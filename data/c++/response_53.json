[{"tags": ["c++"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452729251, "post_id": 34779286, "comment_id": 57303617, "body": "What does non-repeated char mean? In <code>ababababac</code> wouldnt the first one be <code>c</code> not <code>a</code>, also this <code>(inputVector[i] != inputVector[i - 1])</code> is very bad news for <code>i == 0</code>. <code>inputVector[-1]</code> is painful for your pc ..."}, {"owner": {"reputation": 13, "user_id": 3968174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01164665464032e1a0657c866748689?s=128&d=identicon&r=PG&f=1", "display_name": "TaylorGlenn", "link": "https://stackoverflow.com/users/3968174/taylorglenn"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452729276, "post_id": 34779286, "comment_id": 57303626, "body": "here&#39;s the link to the challenge, if that helps.   <a href=\"https://www.codeeval.com/open_challenges/12/\" rel=\"nofollow noreferrer\">codeeval.com/open_challenges/12</a>"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452729305, "post_id": 34779286, "comment_id": 57303635, "body": "No link in your comment .... Also this question should really be self contained. Maybe add the defintion of non-repeated to the question."}, {"owner": {"reputation": 13, "user_id": 3968174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01164665464032e1a0657c866748689?s=128&d=identicon&r=PG&f=1", "display_name": "TaylorGlenn", "link": "https://stackoverflow.com/users/3968174/taylorglenn"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1452729321, "post_id": 34779286, "comment_id": 57303647, "body": "I updated it, sorry.  I believe first non-repeated character is just supposed to mean the first character that isn&#39;t repeated in a row.  But that&#39;s an interesting thought.  Maybe they mean there&#39;s only one of that character in the string..."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3968174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01164665464032e1a0657c866748689?s=128&d=identicon&r=PG&f=1", "display_name": "TaylorGlenn", "link": "https://stackoverflow.com/users/3968174/taylorglenn"}, "edited": false, "score": 0, "creation_date": 1452729774, "post_id": 34779367, "comment_id": 57303810, "body": "Ben, you are my hero.  What an embarrassing oversight!  Thank you for your help, that was absolutely the answer to my problem.  I also made sure to avoid any 0-1 situations.  Thank you so much! :)"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 1, "last_activity_date": 1452731666, "last_edit_date": 1452731666, "creation_date": 1452729518, "answer_id": 34779367, "question_id": 34779286, "link": "https://stackoverflow.com/questions/34779286/codeeval-first-non-repeated-character-challenge-need-explanation-as-to-why-it/34779367#34779367", "title": "CodeEval, First Non-Repeated Character challenge - Need explanation as to why it fails", "body": "<p>Based on the link in the comments, a non-repeated character is one that only appears in the string once. Here is the example given:</p>\n\n<pre><code>yellow // y\ntooth  // h\n</code></pre>\n\n<p>Your code:</p>\n\n<pre><code> if((inputVector[i] != inputVector[i + 1]) &amp;&amp; (inputVector[i] != inputVector[i - 1])){\n               firstNonRepeatedChar = inputVector[i];\n</code></pre>\n\n<p>Is only checking if a character is not repeated <em>consecutively</em>. If it was the way you are thinking, then the example above <code>tooth</code>, the first non-repeated would be <code>t</code>, not <code>h</code> as the example specifies. </p>\n\n<p>Furthermore <code>inputVector[i] != inputVector[i - 1]</code> will cause undefined behavior for <code>i == 0</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 3968174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01164665464032e1a0657c866748689?s=128&d=identicon&r=PG&f=1", "display_name": "TaylorGlenn", "link": "https://stackoverflow.com/users/3968174/taylorglenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 34779367, "answer_count": 1, "score": 0, "last_activity_date": 1452733764, "creation_date": 1452729011, "last_edit_date": 1452733764, "question_id": 34779286, "link": "https://stackoverflow.com/questions/34779286/codeeval-first-non-repeated-character-challenge-need-explanation-as-to-why-it", "title": "CodeEval, First Non-Repeated Character challenge - Need explanation as to why it fails", "body": "<p>I have written a small program in c++ that will take as an input a string.  It will then print the first non-repeated character in the string. Below is my code.  This is for a challenge on CodeEval.com.  The thing is, as far as I can tell, the code works as it's supposed to.  But CodeEval.com tells me my code is not correct.  Unfortunately, I'm not allowed to see the input they're using, but when used at home, I see no problem.  Can anyone tell me if there's anything about my code that does not fit the prompt?</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    string input = \"\";\n    while(getline(cin, input)){\n         vector&lt;char&gt; inputVector(input.begin(),input.end());\n         char firstNonRepeatedChar;\n         for(int i = 0; i &lt; inputVector.size(); i++){\n              if((inputVector[i] != inputVector[i + 1]) &amp;&amp; (inputVector[i] != inputVector[i - 1])){\n                   firstNonRepeatedChar = inputVector[i];\n                   break;\n              }\n         }\n         cout &lt;&lt; firstNonRepeatedChar &lt;&lt; \"\\n\";\n    }\n    //system(\"PAUSE\");\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>EDIT:\nThis is the code that gave me the right answer, if anyone is wondering.  Ben helped me realize that I wasn't answering the question properly based on the prompt.</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint findCharInVector(vector&lt;char&gt;&amp; input, char charToFind);\n\nint main(int argc, char *argv[])\n{\n    string input = \"\";\n    while(getline(cin, input)){\n         vector&lt;char&gt; characters(input.begin(),input.end());\n         char firstNonRepeatedChar;\n         for(int i = 0; i &lt; characters.size(); i++){\n              if(!(findCharInVector(characters, characters[i]) &gt; 1)){\n                   firstNonRepeatedChar = characters[i];\n                   break;\n              }\n         }\n         cout &lt;&lt; firstNonRepeatedChar &lt;&lt; \"\\n\";\n    }\n    //system(\"PAUSE\");\n    return EXIT_SUCCESS;\n}\n\nint findCharInVector(vector&lt;char&gt;&amp; input, char charToFind){\n    int output = 0;\n    for(int i = 0; i &lt; input.size(); i++){\n         if(input[i] == charToFind){\n              output++;\n         }\n    }\n    return output;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "reference"], "answers": [{"comments": [{"owner": {"reputation": 8548, "user_id": 5581182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc277bc00b89d827aba59b3e2509a6f4?s=128&d=identicon&r=PG&f=1", "display_name": "Thor", "link": "https://stackoverflow.com/users/5581182/thor"}, "edited": false, "score": 0, "creation_date": 1452730702, "post_id": 34779302, "comment_id": 57304089, "body": "Thanks for the detailed explanation! really helped my understanding."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 3, "last_activity_date": 1452729098, "creation_date": 1452729098, "answer_id": 34779302, "question_id": 34779268, "link": "https://stackoverflow.com/questions/34779268/unable-to-create-a-reference-to-a-new-instance-of-a-class/34779302#34779302", "title": "Unable to create a reference to a new instance of a class", "body": "<p><code>new</code> returns a pointer. A reference must be initialized with the actual object, not a pointer to the object.</p>\n\n<pre><code>Animal &amp;rA = * new Animal;\n</code></pre>\n\n<p>..would work, but until you know what you're doing, you generally shouldn't be using <code>new</code>.</p>\n\n<pre><code>Animal A;\nAnimal &amp;rA = A;\n</code></pre>\n\n<p>...works without getting into nastiness you should be staying away from.</p>\n"}], "owner": {"reputation": 8548, "user_id": 5581182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc277bc00b89d827aba59b3e2509a6f4?s=128&d=identicon&r=PG&f=1", "display_name": "Thor", "link": "https://stackoverflow.com/users/5581182/thor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 34779302, "answer_count": 1, "score": 1, "last_activity_date": 1487507251, "creation_date": 1452728920, "last_edit_date": 1487507251, "question_id": 34779268, "link": "https://stackoverflow.com/questions/34779268/unable-to-create-a-reference-to-a-new-instance-of-a-class", "title": "Unable to create a reference to a new instance of a class", "body": "<p>I'm new to C++ and is trying to learn the concept of pointer and references. I tried to create a reference and a pointer to a new instance of a class using the statement below</p>\n\n<pre><code>Animal *rA = new Animal();//works fine\n\nAnimal &amp;rA = new Animal();//compiler prints error: non-const lvalue reference \n                          //to type 'Animal' cannot bind to a temporary of type 'Animal *'\n</code></pre>\n\n<p>Due to my limited knowledge, I am unable to understand the error message printed out by the compiler. Could someone please kindly explain it to me what it means? </p>\n"}, {"tags": ["c++", "if-statement", "segmentation-fault"], "answers": [{"comments": [{"owner": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452729168, "post_id": 34779279, "comment_id": 57303585, "body": "Is there some workaround so it still can be in the if? Maybe using a reference?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1452729230, "post_id": 34779279, "comment_id": 57303608, "body": "The dangling pointer is to the <code>wtrank</code> object. The <code>wt</code> might also need to be outside the nested scope because its address is passed to the <code>WTRank</code> constructor. It&#39;s not exactly clear from just the given code."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452729306, "post_id": 34779279, "comment_id": 57303638, "body": "@Whizzil: A reference won&#39;t help, they can dangle as well. You have a problem with your object lifetimes."}, {"owner": {"reputation": 309, "user_id": 5362690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX4bq.jpg?s=128&g=1", "display_name": "Jochen M&#252;ller", "link": "https://stackoverflow.com/users/5362690/jochen-m%c3%bcller"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1452894907, "post_id": 34779279, "comment_id": 57383578, "body": "@Blastfurnace Right, the dangling pointer pointed at wtrank not wt. I edited my answer, thanks for pointing it out."}], "tags": [], "owner": {"reputation": 309, "user_id": 5362690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX4bq.jpg?s=128&g=1", "display_name": "Jochen M&#252;ller", "link": "https://stackoverflow.com/users/5362690/jochen-m%c3%bcller"}, "is_accepted": false, "score": 6, "last_activity_date": 1452894792, "last_edit_date": 1452894792, "creation_date": 1452728967, "answer_id": 34779279, "question_id": 34779209, "link": "https://stackoverflow.com/questions/34779209/if-statement-causing-a-segmentation-error/34779279#34779279", "title": "IF statement causing a segmentation error?", "body": "<p>Declare the 'wt' and 'wtrank' variables before the if. If you declare it inside the block following the if, its scope is limited to that block. After the } it is out of scope and the 'rank' pointer becomes dangling, so accessing it later may cause a segfault.</p>\n"}, {"comments": [{"owner": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452729706, "post_id": 34779361, "comment_id": 57303779, "body": "Because I have multiple implementations of Rank function that can be used. Which one is being used is determined as the parameter to main function. I edited my post."}], "tags": [], "owner": {"reputation": 165, "user_id": 5012958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0777c5da05cd33431715cf1b632606b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sijaan Hallak", "link": "https://stackoverflow.com/users/5012958/sijaan-hallak"}, "is_accepted": false, "score": -2, "last_activity_date": 1452729460, "creation_date": 1452729460, "answer_id": 34779361, "question_id": 34779209, "link": "https://stackoverflow.com/questions/34779209/if-statement-causing-a-segmentation-error/34779361#34779361", "title": "IF statement causing a segmentation error?", "body": "<p>Why would you want the declaration of > wt in the IF statement?</p>\n"}, {"comments": [{"owner": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452733571, "post_id": 34779957, "comment_id": 57304939, "body": "Let me post example of my &quot;other&quot; code, maybe you can tell me whats wrong. For sure if the problem is somewhere else, it in that what I am about to post."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1452733780, "post_id": 34779957, "comment_id": 57305011, "body": "The <code>if</code> blocks are absolutely a problem. Variables defined inside those blocks are destroyed when they go out of scope. The posted code is a good example of how to create a dangling pointer."}, {"owner": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452733873, "post_id": 34779957, "comment_id": 57305040, "body": "Well tell me how to achieve the wanted behaviour with no dangling pointers :D"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452734076, "post_id": 34779957, "comment_id": 57305099, "body": "@Whizzil: Variables with automatic storage duration (&quot;on the stack&quot;) are destroyed when they go out of scope. One solution is to use dynamic allocation (<code>new</code> and <code>delete</code>). Of course then you have a resource management problem and the solution for that is <b>smart pointers</b> like <code>std::shared_ptr</code> or <code>std::unique_ptr</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1452734125, "post_id": 34779957, "comment_id": 57305106, "body": "@BlastFurnace - from information given, the fault (segmentation violation) is occurring within the <code>if</code> block - and before objects are passing out of scope.   What you&#39;re pointing out may be related to other problems - affecting subsequently executed code - but not the one asked asked about."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452734208, "post_id": 34779957, "comment_id": 57305128, "body": "@Whizzil Well, when do you want <code>wtrank</code> to be destroyed?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1452734440, "post_id": 34779957, "comment_id": 57305202, "body": "@Peter: Does the segfault actually occur inside the block or is that an assumption because the last observed effect was the <code>cout</code>? Whizzil didn&#39;t say if it was pinpointed while inside a debugger. I don&#39;t know. I&#39;d start fixing the obvious problem first."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1452734738, "post_id": 34779957, "comment_id": 57305273, "body": "@BlastFurnace - From the information given, there are potentially two problems in play - something causing statements within the <code>if()</code> block to fail [which will be caused by previous code, not shown] and subsequent problem due to dangling pointer/reference.   Both need to be checked - fixing one might eliminate symptoms, but still leave a future problem to emerge.   Basic fact of life:  buggy code can still appear to run correctly, so lack of symptoms is not evidence of correct code."}, {"owner": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452734911, "post_id": 34779957, "comment_id": 57305346, "body": "I tried changing ranks to work with NEW, but still sometimes I get segmentation faults.."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452735323, "post_id": 34779957, "comment_id": 57305477, "body": "@Whizzil: You might have larger design issues to resolve. For example, I see your <code>MultiWTRank</code> class copies a pointer passed to its constructor. Who owns <b>that</b> object? Who manages its lifetime? I don&#39;t have a simple answer. Peter and jomuel&#39;s answers are helpful but you probably need to spend some time in your debugger or thinking through your design."}, {"owner": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1452735724, "post_id": 34779957, "comment_id": 57305605, "body": "@Blastfurnace Well this is a pointer returned by a function mwt::generateMultiaryWTree(...). This function creates a tree, and returns a pointer to the root. It is a static function in a class. I can provide code."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452736223, "post_id": 34779957, "comment_id": 57305759, "body": "@Whizzil: Who creates the <code>root</code> pointer in that function? Is it dynamically allocated or is it a local that will go out of scope? I also see that each <code>node</code> contains a <code>std::vector</code> of raw pointers to other nodes. Who creates/owns/deletes all of those? I&#39;m sorry but it&#39;s late and I think I will leave this for others to help. Good luck."}, {"owner": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "edited": false, "score": 0, "creation_date": 1452736371, "post_id": 34779957, "comment_id": 57305817, "body": "It is dynamically allocated. I didnt write the rest of the code, I am just including it kind of, and using it."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1452733349, "creation_date": 1452733349, "answer_id": 34779957, "question_id": 34779209, "link": "https://stackoverflow.com/questions/34779209/if-statement-causing-a-segmentation-error/34779957#34779957", "title": "IF statement causing a segmentation error?", "body": "<p>Your problem is almost certainly some other code you have not shown doing something untoward - molesting a pointer, falling off the end of an array, accessing value of an uninitialised variable, etc.</p>\n\n<p>Introducing an <code>if (true)</code> around some block, at most, will change memory layout of your program (e.g. if storage is set aside to hold the value <code>true</code>, and if the compiler emits some code to test it before executing the subsequent code).  Because the memory layout changes, the implications of misbehaving code (i.e. what gets clobbered) can change.</p>\n\n<p>Naturally, in this case, the possible change depends on the compiler.  An aggressive optimisation may detect that <code>true</code> is always (well) <code>true</code>, and therefore eliminate the <code>if (true)</code> entirely from emitted code.   In this case, there will be no difference on program behaviour of having it or not.   However, not all compilers (or compiler settings) do that.</p>\n\n<p>Incidentally, the advice to change where you define the variable <code>wt</code> might or might not work for similar reasons.   Moving the definition might simply change the order of actions in code (machine instructions, etc), or the layout of memory as used by your program (particularly if the constructor for that object allocates significant resources).   So it is not a solution, even if it might appear to work.   Because it is not guaranteed to work.  And may break because of other changes (of your code, compiler, compilation settings, etc) in future.</p>\n\n<p>The thing is, the real problem might be in code you have shown (impact of functions being called, constructors being invoked, etc) or it might be in code executed previously in your program.   Such is the nature of undefined behaviour - when a problem occurs, the symptom may not become visible immediately, but may affect behaviour of unrelated code.</p>\n\n<p>Given where the problem occurs, the <code>rank = &amp;wtrank</code> statement is not the cause.   The cause will be in previous code.   However, that dangling pointer will be another problem for subsequently executed code - once this problem is fixed.</p>\n"}], "owner": {"reputation": 950, "user_id": 2211267, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/648b65f2ec2c4af90d7d32496f449868?s=128&d=identicon&r=PG", "display_name": "Whizzil", "link": "https://stackoverflow.com/users/2211267/whizzil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1452894792, "creation_date": 1452728617, "last_edit_date": 1452736321, "question_id": 34779209, "link": "https://stackoverflow.com/questions/34779209/if-statement-causing-a-segmentation-error", "title": "IF statement causing a segmentation error?", "body": "<p>I have ran into a rather confusing problem. It seems like the IF statement in my program is causing me a segmentation error. </p>\n\n<p>I am working with extern libraries, and calling the code from external libraries in the IF statement, so I can't provide the whole code of those functions because I don't have it either.</p>\n\n<p>Basic example of what happens. So this example causes me a <code>Segmentation fault</code>.</p>\n\n<pre><code>IRank *rank;\n\n//Generating wavelet tree from BWT with sdsl library\n    if(true) {\n        std::cout &lt;&lt; \"I am in IF\" &lt;&lt; endl; // this gets printed on the screen\n        wt_huff&lt;&gt; wt;                      // right after that - segm fault\n        construct_im(wt, BWT, 1);\n        WTRank wtrank(&amp;wt);\n        rank = &amp;wtrank;\n    }\n</code></pre>\n\n<p>However, the same example, but without an IF, when I comment it out, does not cause <code>Segmentation fault</code>, and executes normally.</p>\n\n<pre><code>IRank *rank;\n\n//Generating wavelet tree from BWT with sdsl library\n//if(true) {\n    std::cout &lt;&lt; \"I am in IF\" &lt;&lt; endl; // again this gets printed\n    wt_huff&lt;&gt; wt;                      // no segmentation error this time\n    construct_im(wt, BWT, 1);\n    WTRank wtrank(&amp;wt);\n    rank = &amp;wtrank;\n//}\n</code></pre>\n\n<p><strong>Original example:</strong></p>\n\n<pre><code>//    // Decide what rank function to use\n    IRank *rank;\n    if(m_wt) {\n        // Multiary Wavelet Tree rank function :: student implementation\n        mwt::node *m_wtree = mwt::generateMultiaryWT(BWT, ary);\n        MultiWTRank m_wt_rank(m_wtree, ary);\n        rank = &amp;m_wt_rank;\n    } else if(b_wt) {\n        // Binary Wavelet Tree rank function :: SDSL implementation\n        wt_huff&lt;&gt; b_wtree;\n        construct_im(b_wtree, BWT, 1);\n        WTRank b_wt_rank(&amp;b_wtree);\n        rank = &amp;b_wt_rank;\n    } else if(non_wt) {\n        // Implementation of rank function not using Wavelet Tree\n        LinRank lin_rank(BWT);\n        rank = &amp;lin_rank;\n    } else {\n        // should not happen\n    }\n\n//...\nrun(rank);\n</code></pre>\n\n<p>What happens here, it is so confusing?</p>\n\n<p><strong>EDIT: example of other code being called from this snipper</strong></p>\n\n<pre><code>    #include \"IRank.h\"\n#include \"mwt.h\"\n\n\nclass MultiWTRank : public IRank {\n\nprivate:\n    mwt::node *wt;\n    int n_ary;\n\npublic:\n    MultiWTRank(mwt::node *root, int ary) {\n        wt = root;\n        n_ary = ary;\n    }\n\n    ~MultiWTRank() {\n    }\n\n    index_type rank(index_type index, symbol_type symbol);\n};\n</code></pre>\n\n<p>So this is being constructed in the first IF.</p>\n\n<p><strong>EDIT2: Providing a code that generates a pointer to the tree that could cause the trouble</strong></p>\n\n<pre><code>class mwt {\npublic:\n    // Structure of a MW tree node\n    typedef struct node {\n        vector&lt;int&gt; data;\n        vector&lt;node*&gt; next;\n    } node;\n\n    // ...\n\n\n\n    static node* generateMultiaryWT(string input, int ary) {\n\n        //...\n\n        return root;\n    }\n</code></pre>\n\n<p>Node is created like this:</p>\n\n<pre><code>   static node* InitRoot(int ary){\n        node *root = new node;\n        for(int iter = 0; iter &lt; ary; iter++){\n            root-&gt;next.push_back(NULL);\n        }\n        return root;\n    }\n</code></pre>\n"}, {"tags": ["c++", "lifetime-scoping"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1452734383, "post_id": 34779042, "comment_id": 57305180, "body": "Note: While this code is an okay way to create and immediately destroy something, <i>the fact that that&#39;s a useful thing to do</i> is a code smell. In a well-designed program, this code wouldn&#39;t do anything useful!"}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 6, "last_activity_date": 1452727897, "creation_date": 1452727897, "answer_id": 34779060, "question_id": 34779042, "link": "https://stackoverflow.com/questions/34779042/c-destroying-variables-via-scoping/34779060#34779060", "title": "C++ Destroying Variables via Scoping", "body": "<ol>\n<li><p>Your scope isn't empty. It contains the declaration of <code>singular</code>.</p></li>\n<li><p>That's perfectly OK, but...</p></li>\n<li><p>...there's no need to create a variable; you can just create a temporary object (which is not a variable):</p>\n\n<pre><code>SingularPurpose(&amp;ptr_to_something);\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 5, "last_activity_date": 1452734274, "last_edit_date": 1452734274, "creation_date": 1452731265, "answer_id": 34779624, "question_id": 34779042, "link": "https://stackoverflow.com/questions/34779042/c-destroying-variables-via-scoping/34779624#34779624", "title": "C++ Destroying Variables via Scoping", "body": "<p>Yes this is perfectly acceptable practice and can be very useful for more than just individual objects. For example locking shared resources while some operations are performed and unlocking it automatically when it goes out of scope:</p>\n\n<pre><code>// normal program stuff here ...\n\n// introduce an open scope\n{\n    std::lock_guard&lt;std::mutex&gt; lock(mtx); // lock a resource in this scope\n\n    // do stuff with the resource ...\n\n    // at the end of the scope the lock object is destroyed\n    // and the resource becomes available to other threads    \n}\n\n// normal program stuff continues ...\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 4404330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6f9ecec26f9b9f9902e701b580ce579?s=128&d=identicon&r=PG&f=1", "display_name": "Bryn McKerracher", "link": "https://stackoverflow.com/users/4404330/bryn-mckerracher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 34779624, "answer_count": 2, "score": 2, "last_activity_date": 1452734274, "creation_date": 1452727799, "question_id": 34779042, "link": "https://stackoverflow.com/questions/34779042/c-destroying-variables-via-scoping", "title": "C++ Destroying Variables via Scoping", "body": "<p>Is it safe or acceptable practice to create 'temporary' objects in C++ with an empty scope (such as the following), in order to ensure they are immediately destroyed? </p>\n\n<pre><code>{\n    SingularPurpose singular(&amp;ptr_to_something);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "edited": false, "score": 1, "creation_date": 1452727686, "post_id": 34778984, "comment_id": 57302999, "body": "To increment by x write <code>+= x</code>, instead of <code>=+ x</code>. The latter is equivalent to <code>= +x</code>, or just <code>= x</code>."}, {"owner": {"reputation": 201, "user_id": 5356383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIrMI.jpg?s=128&g=1", "display_name": "yasserkabbout", "link": "https://stackoverflow.com/users/5356383/yasserkabbout"}, "edited": false, "score": 0, "creation_date": 1452727701, "post_id": 34778984, "comment_id": 57303010, "body": "Why are you using =+ instead of += within the if statement?"}, {"owner": {"reputation": 201, "user_id": 5356383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIrMI.jpg?s=128&g=1", "display_name": "yasserkabbout", "link": "https://stackoverflow.com/users/5356383/yasserkabbout"}, "edited": false, "score": 0, "creation_date": 1452729986, "post_id": 34778984, "comment_id": 57303869, "body": "You should accept one of these answers as a solution to your problem."}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1452727722, "creation_date": 1452727722, "answer_id": 34779028, "question_id": 34778984, "link": "https://stackoverflow.com/questions/34778984/trouble-with-counters/34779028#34779028", "title": "Trouble with counters", "body": "<p><code>positive</code> is accumulating, but <code>totalPositive</code> is accumulating your accumulation.  Try <code>totalPositive++</code> (and the negative version) in your <code>if</code> statement, and eliminate variables <code>positive</code> and <code>negative</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1452727840, "post_id": 34779040, "comment_id": 57303072, "body": "Good, but this does need to reset <code>positive</code> and <code>negative</code> after use each time through the loop."}, {"owner": {"reputation": 668, "user_id": 4752740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dcd8baab8bc3b85eedef201584812bb9?s=128&d=identicon&r=PG", "display_name": "Jean Valjean", "link": "https://stackoverflow.com/users/4752740/jean-valjean"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1452728014, "post_id": 34779040, "comment_id": 57303130, "body": "Yes, another thing you could do is completely remove positive and negative and just put &quot;totalpositive++;&quot; in the first is statement and &quot;totalnegative++;&quot; in the second and take out the last two lines of the while loop. This is slightly more concise and it doesn&#39;t allocate as much space."}], "tags": [], "owner": {"reputation": 668, "user_id": 4752740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dcd8baab8bc3b85eedef201584812bb9?s=128&d=identicon&r=PG", "display_name": "Jean Valjean", "link": "https://stackoverflow.com/users/4752740/jean-valjean"}, "is_accepted": false, "score": 0, "last_activity_date": 1452727793, "creation_date": 1452727793, "answer_id": 34779040, "question_id": 34778984, "link": "https://stackoverflow.com/questions/34778984/trouble-with-counters/34779040#34779040", "title": "Trouble with counters", "body": "<p>SOmething that might help is to do this for the while loop instead</p>\n\n<pre><code>while (number != 0)\n{\npositive = 0;\nnegative = 0;\n//update counters\nif (number &gt; 0)\n{   \n    positive = 1;\n}   \nelse \n   negative = 1;\n\n//end if\n\n//get another number\ncout &lt;&lt; \"Enter another positive or negative integer (enter 0 to end): \";\ncin &gt;&gt; number;\ntotalPositive +=positive;\ntotalNegative +=negative;\n}\n</code></pre>\n\n<p>Otherwise you're doing this thing that's basically 1 + 2 + 3 + 4... for every time the loop runs. By setting each value to 0, it ensures that totalPositive only increases once every loop. Otherwise it grows exponentially</p>\n"}, {"tags": [], "owner": {"reputation": 481, "user_id": 5787123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlxfJ.jpg?s=128&g=1", "display_name": "pticawr", "link": "https://stackoverflow.com/users/5787123/pticawr"}, "is_accepted": false, "score": 1, "last_activity_date": 1452734289, "last_edit_date": 1452734289, "creation_date": 1452728085, "answer_id": 34779100, "question_id": 34778984, "link": "https://stackoverflow.com/questions/34778984/trouble-with-counters/34779100#34779100", "title": "Trouble with counters", "body": "<p>Firstly note the <code>=+</code> is not an operator (Unlike <code>+=</code> which increments the value)</p>\n\n<p>The line </p>\n\n<pre><code>positive =+ 1\n</code></pre>\n\n<p>is just interpreted as assigned <code>+1</code> to positive (which is what you want) but can be just written as</p>\n\n<pre><code>positive = 1\n</code></pre>\n\n<p>This though brings us to the actual point which is that you don't reset positive or negative back to zero each time around the loop.</p>\n\n<p>Once both positive and negative are assigned to <code>1</code> (i.e. when you have entered at least one of each), every time both <code>totalPositive</code> and <code>totalNegative</code> will be incremented.</p>\n\n<p>You may want to consider whether you need the variables positive or negative at all.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1452728121, "creation_date": 1452728121, "answer_id": 34779113, "question_id": 34778984, "link": "https://stackoverflow.com/questions/34778984/trouble-with-counters/34779113#34779113", "title": "Trouble with counters", "body": "<p>The logic error in your program is that <code>positive</code> and <code>negative</code> never get reset to <code>0</code> once they are set to <code>1</code>.</p>\n\n<p>If your first two numbers are such that one is a negative number and the other is a positive number, <code>totalPositive</code> and <code>totalNegative</code> will keep increasing after that regardless of the value of <code>number</code>.</p>\n\n<p>You can simplify your logic to:</p>\n\n<pre><code>//get a number\ncout &lt;&lt; \"Enter a positive or negative integer (enter 0 to end): \";\n\nwhile (cin &gt;&gt; number &amp;&amp; number != 0)\n{\n   //update counters\n   if (number &gt; 0)\n   {   \n      ++totalPositive;\n   }   \n   else \n   {\n      ++totalNegative;\n   }\n\n   //get another number\n   cout &lt;&lt; \"Enter another positive or negative integer (enter 0 to end): \";\n}//end while\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 201, "user_id": 5356383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIrMI.jpg?s=128&g=1", "display_name": "yasserkabbout", "link": "https://stackoverflow.com/users/5356383/yasserkabbout"}, "is_accepted": true, "score": 1, "last_activity_date": 1452728472, "creation_date": 1452728472, "answer_id": 34779180, "question_id": 34778984, "link": "https://stackoverflow.com/questions/34778984/trouble-with-counters/34779180#34779180", "title": "Trouble with counters", "body": "<p>Try this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\nusing namespace std;\n\nint main()\n{\n    int number;\n    int positive = 0;\n    int negative = 0;\n\n   do{\n\n        cout &lt;&lt; \"Enter a positive or negative integer (enter 0 to end): \";\n        cin &gt;&gt; number;\n\n        if (number &gt; 0)\n           positive += 1;\n\n        else if(number&lt;0)\n           negative += 1;\n\n\n    }while(number!=0);\n    //end while\n\n    //display counters\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Total positive numbers: \" &lt;&lt; positive &lt;&lt; endl;\n    cout &lt;&lt; \"Total negative numbers: \" &lt;&lt; negative &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}   //end of main function\n</code></pre>\n\n<p>You don't have to use <code>total positive</code> and <code>total negative</code>, unless you want to have the summation of the positive numbers and the negative ones.</p>\n"}, {"tags": [], "owner": {"reputation": 881, "user_id": 1866626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f6113d8ead1d103d785c41a08a4b39?s=128&d=identicon&r=PG", "display_name": "Jack Andersen", "link": "https://stackoverflow.com/users/1866626/jack-andersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1452728718, "creation_date": 1452728718, "answer_id": 34779226, "question_id": 34778984, "link": "https://stackoverflow.com/questions/34778984/trouble-with-counters/34779226#34779226", "title": "Trouble with counters", "body": "<p>Well your counters are not reset to 0 after your loop finishes. </p>\n\n<p>When you enter your loop the first time, the counters are 0 (positive, negative), but the second time around, the counters are still 1, resulting in a bad counter. </p>\n\n<p>When entering the loop: </p>\n\n<pre><code>positive = 0;\nnegative = 0;\n\n//update counters\n</code></pre>\n\n<p>This code, could be highly refactored to be more efficent, but that's for another question.</p>\n"}], "owner": {"reputation": 19, "user_id": 5785227, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10208469030189022/picture?type=large", "display_name": "Kasaundra Scott", "link": "https://stackoverflow.com/users/5785227/kasaundra-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 34779180, "answer_count": 6, "score": 1, "last_activity_date": 1452734289, "creation_date": 1452727428, "last_edit_date": 1452727576, "question_id": 34778984, "link": "https://stackoverflow.com/questions/34778984/trouble-with-counters", "title": "Trouble with counters", "body": "<p>I'm very new to C++ and have an assignment to edit this code to make it work. For some reason, when I use a combination of multiple positive or negative numbers, it gives the answer that I've entered multiple numbers an extra number.</p>\n\n<p>Example:</p>\n\n<p>I enter 3 postive numbers and 1 negative number.  The counter displays 4 positive and 1 negative.  Same thing happens if I start with negative numbers instead of positive.</p>\n\n<p>Any help would be greatly appreciated.  Here's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int number   = 0;\n    int positive = 0;   //counter\n    int negative = 0;   //counter\n    int totalPositive = 0;\n    int totalNegative = 0;\n\n    //get a number\n    cout &lt;&lt; \"Enter a positive or negative integer (enter 0 to end): \";\n    cin &gt;&gt; number;\n\n    while (number != 0)\n    {\n        //update counters\n        if (number &gt; 0)\n        {   \n            positive =+ 1;\n        }   \n        else \n            negative =+ 1;\n\n        //end if\n\n        //get another number\n        cout &lt;&lt; \"Enter another positive or negative integer (enter 0 to end): \";\n        cin &gt;&gt; number;\n        totalPositive += positive;\n        totalNegative += negative;\n    }//end while\n\n    //display counters\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Total positive numbers: \" &lt;&lt; totalPositive &lt;&lt; endl;\n    cout &lt;&lt; \"Total negative numbers: \" &lt;&lt; totalNegative &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}   //end of main function\n</code></pre>\n"}, {"tags": ["c++", "function", "recursion"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1452727066, "post_id": 34778891, "comment_id": 57302786, "body": "Once cin is in error state, you have to clean it."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1452727068, "post_id": 34778891, "comment_id": 57302788, "body": "Undefined behavior reading 3 chars into a 2 char buffer?"}, {"owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "reply_to_user": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1452727227, "post_id": 34778891, "comment_id": 57302840, "body": "@JSF I just changed <code>char myString[2];</code> to <code>char myString[3];</code> Didn&#39;t work"}, {"owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 1, "creation_date": 1452727447, "post_id": 34778891, "comment_id": 57302915, "body": "ALWAYS test the result of io function, including writing to cout. <code>if (!(cout &lt;&lt; &quot;\u2026&quot;)) throw \u2026</code>, <code>if (!cin.getline(\u2026)) throw \u2026</code>, \u2026"}], "answers": [{"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1452727247, "creation_date": 1452727247, "answer_id": 34778959, "question_id": 34778891, "link": "https://stackoverflow.com/questions/34778891/why-does-typing-three-non-integers-cause-this-function-to-recurse-infinitely/34778959#34778959", "title": "Why does typing three non-integers cause this function to recurse infinitely?", "body": "<p>Use the <code>strcmp()</code> function in <code>&lt;cstring&gt;</code> to compare content of strings, not <code>==</code> (which compares only the address of the first character).   i.e.  instead of <code>myString == \"0\\0\"</code> use <code>strcmp(myString, \"0\") == 0</code>.</p>\n\n<p>Or, better yet, use the <code>string</code> type in <code>&lt;string&gt;</code>.   Then you can use <code>==</code> for comparison.</p>\n\n<p>Note that string literals have a <code>'\\0'</code> character appended anyway, and <code>strcmp()</code> searches for the first one it finds.   So there is no functional difference between <code>strcmp(myString, \"0\")</code> and <code>strcmp(myString, \"0\\0\")</code></p>\n\n<p>And don't use recursion to go back and repeat an action.  Use a loop.</p>\n"}], "owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452727247, "creation_date": 1452726943, "last_edit_date": 1452727197, "question_id": 34778891, "link": "https://stackoverflow.com/questions/34778891/why-does-typing-three-non-integers-cause-this-function-to-recurse-infinitely", "title": "Why does typing three non-integers cause this function to recurse infinitely?", "body": "<p>I've set up a script that asks the user to input a number that's two digits long at most.</p>\n\n<p>But if the user types three non-integers in, like 'fff', the recursive function <code>promptGetAge()</code> fires infinitely.</p>\n\n<p>Why?</p>\n\n<pre><code>int promptGetAge(){\n    char myString[3];\n\n    cout&lt;&lt;\"How old is your dog? \";\n    cin.getline(myString,3,'\\n');\n    int userStringToInt = atoi(myString);\n\n    if(userStringToInt==0 &amp;&amp; !(myString==\"0\\0\")){\n        promptGetAge();\n    } else {\n        return userStringToInt;\n    }\n}\n\nint main(){\n    cout&lt;&lt;\"Your dog is \"&lt;&lt;promptGetAge()&lt;&lt;\" years old!\"&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1452726928, "post_id": 34778847, "comment_id": 57302724, "body": "You probably want <code>square[i][j] = column;</code> instead of UB, else error is in calling code."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1452726931, "post_id": 34778847, "comment_id": 57302725, "body": "<code>square[i][j] = square[i][column];</code> doesn&#39;t look correct, though I&#39;m not sure what you are attempting to do with this piece of code. From a syntax perspective, how are you calling this function? Sounds like the compiler sees that a parameter for the function is an int[3][3] and you are attempting to give it a plain integer."}, {"owner": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "edited": false, "score": 0, "creation_date": 1452726964, "post_id": 34778847, "comment_id": 57302737, "body": "What happens if the number the user enters for column is higher than 2? Your array is a 3x3. The indexes range from 0-2. So if column is 3+ it would go out of range."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1452727178, "post_id": 34778847, "comment_id": 57302824, "body": "Your code doesn&#39;t make much sense, but I actually don&#39;t see how it would produce the error you claim. Can you provide a <a href=\"/help/mcve\">mcve</a>"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1452727195, "post_id": 34778847, "comment_id": 57302829, "body": "@DietmarK&#252;hl He technically doesn&#39;t have to pass the array by reference. If the array is not passed by reference it will decay to a pointer and the changes he makes in the function will still be maintained after returning. He just won&#39;t be able to do an accurate <code>sizeof()</code> on the array."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1452727297, "post_id": 34778847, "comment_id": 57302853, "body": "Are you going to give us a hint where in that snippet the error occurs, or do you expect people to guess?"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452727408, "post_id": 34778847, "comment_id": 57302897, "body": "You have to include the call of the getSquare function, that&#39;s problably the source of the error."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1452727421, "post_id": 34778847, "comment_id": 57302902, "body": "The posted code has no such error. See <a href=\"http://ideone.com/GCSyyR\" rel=\"nofollow noreferrer\">ideone.com/GCSyyR</a>."}], "answers": [{"tags": [], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "is_accepted": true, "score": 1, "last_activity_date": 1452728346, "last_edit_date": 1452728346, "creation_date": 1452727997, "answer_id": 34779081, "question_id": 34778847, "link": "https://stackoverflow.com/questions/34778847/invalid-conversion-from-int-to-int3-c/34779081#34779081", "title": "Invalid Conversion from &#39;int&#39; to &#39;int(*)[3]&#39; c++", "body": "<pre><code>int main(){ int magicSquare[3][3]; getSquare(magicSquare[3][3]); return 0; } \n</code></pre>\n\n<p>Doesn't pass an array to the function, but the (non-exising) element in the 4th colum and 4th row (arrays are 0-indexed in c and c++). That is the reason for the error message, as you are trying to assign an integer (the matrix element) to a pointer to a three element array (that is what <code>getSquare(int square[3][3])</code> actually expects - <code>int square[3][3]</code> is equivalent to <code>int square(*)[3]</code> in this context). </p>\n\n<p>To pass the matrix you can write </p>\n\n<pre><code>int main(){ int magicSquare[3][3]; getSquare(magicSquare);} \n</code></pre>\n\n<p>However, your <code>getSquare</code> will probably not do what you expect (it assigns one entry of the square to another one). You probably wanted to write </p>\n\n<pre><code>void getSquare(int square[3][3]) {\n\n    int number;\n\n    for (int i = 0; i &lt; 3; i++)\n    {\n        for (int j = 0; j &lt; 3; j++)\n        {\n            cout &lt;&lt; \"Please enter a number between 1 and 9\" &lt;&lt; endl;\n            cin &gt;&gt; number;\n            cout &lt;&lt; endl;\n            square[i][j] = number;\n        }\n    }\n}\n</code></pre>\n\n<p>instead.</p>\n"}], "owner": {"reputation": 133, "user_id": 5786983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ef29edf05c4c7d70cd065a06a92fc7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Tremors", "link": "https://stackoverflow.com/users/5786983/tremors"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1425, "favorite_count": 1, "accepted_answer_id": 34779081, "answer_count": 1, "score": 2, "last_activity_date": 1452728346, "creation_date": 1452726779, "last_edit_date": 1452728041, "question_id": 34778847, "link": "https://stackoverflow.com/questions/34778847/invalid-conversion-from-int-to-int3-c", "title": "Invalid Conversion from &#39;int&#39; to &#39;int(*)[3]&#39; c++", "body": "<p>I'm getting <code>[Error] invalid conversion from 'int' to 'int(*)[3]' [-fpermissive]</code> in a few spots of my code. This snippet in particular has that error</p>\n\n<pre><code>void getSquare(int square[3][3]){\n\n    int column;\n\n    for (int i = 0; i &lt; 3; i++)\n    {\n        for (int j = 0; j &lt; 3; j++)\n        {\n            cout &lt;&lt; \"Please enter a number between 1 and 9\" &lt;&lt; endl;\n            cin &gt;&gt; column;\n            cout &lt;&lt; endl;\n            square[i][j] = square[i][column];\n        }\n    }\n}\n</code></pre>\n\n<p>This code is designed to take in 9 numbers and store them in a [3][3] array, I might have this completely wrong but let me know!</p>\n\n<p>Here is how the code is being called for those of you who asked</p>\n\n<pre><code>int main(){\n    int magicSquare[3][3];\n    getSquare(magicSquare[3][3]);\n    checkSquare(magicSquare[3][3]);\nif (checkSquare(magicSquare[3][3]) == true)\n    {\n    cout &lt;&lt; \"Yes!\"\n    }\nif (checkSquare(magicSquare[3][3]) != true)\n    {\n    cout &lt;&lt; \"No!\"\n    return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "linux"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1452725769, "post_id": 34778602, "comment_id": 57302297, "body": "Use chdir? (Note that chdir is part of your operating system, not part of C++)"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 2, "creation_date": 1452725783, "post_id": 34778602, "comment_id": 57302302, "body": "In c++, it&#39;s more common that there&#39;s a source directory, a data directory, and a build directory. When your project gets built by a makefile or whatnot, your binary ends up in the build directory, and any data files it needs get copied there. You are supposed to run the binary in that folder and it may grab the data files using relative paths. You could also have some kind of &quot;asset_path_marker&quot; file or something to tell it where to look for data. You don&#39;t need to manually change directories, just open <code>fstream</code>&#39;s with a relative path as the string, and you can error out if it doesn&#39;t open."}, {"owner": {"reputation": 21605, "user_id": 1142167, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/f9MAS.jpg?s=128&g=1", "display_name": "Joel Cornett", "link": "https://stackoverflow.com/users/1142167/joel-cornett"}, "edited": false, "score": 2, "creation_date": 1452725974, "post_id": 34778602, "comment_id": 57302376, "body": "Both python and C++ ultimately rely on system libraries to do things like change the current working directory of a program. So I would look at the linux manpages for the C API to <code>chdir()</code>, etc."}, {"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 1, "creation_date": 1452726050, "post_id": 34778602, "comment_id": 57302406, "body": "Why, in either python or c++, change the directory?  If you desire access to a file in directory <code>X</code>, you should open it by eg <code>open(os.path.join(</code>X<code>, &lt;some-file&gt;))</code>.  (temporarily changing the directory is still changing global state ... that may cause unintended side effects in multithreaded programs)"}, {"owner": {"reputation": 448, "user_id": 3973851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e26bb80cdddbdf2dbb47ec3ffeee68e?s=128&d=identicon&r=PG&f=1", "display_name": "jonnyd42", "link": "https://stackoverflow.com/users/3973851/jonnyd42"}, "reply_to_user": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1452726499, "post_id": 34778602, "comment_id": 57302563, "body": "@donkopotamus  How would I do that in C++?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1452726649, "post_id": 34778602, "comment_id": 57302622, "body": "Note that in C++17, boost&#39;s awesome filesystem library will likely become standard."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1452731824, "post_id": 34778602, "comment_id": 57304402, "body": "If you on a POSIX(ish) system (e.g. Linux, BSD, OSX, etc...), you can get documentation for system calls using <code>man</code> pages.  Try using <code>man chdir</code> or <code>man opendir</code>.  All operating system calls should generally have a <code>man</code> page."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 5779285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fb6766832cf4aacb45cfd8294e192b?s=128&d=identicon&r=PG&f=1", "display_name": "Ira Rodens", "link": "https://stackoverflow.com/users/5779285/ira-rodens"}, "is_accepted": false, "score": 0, "last_activity_date": 1452737451, "creation_date": 1452737451, "answer_id": 34780548, "question_id": 34778602, "link": "https://stackoverflow.com/questions/34778602/directory-navigation-with-c/34780548#34780548", "title": "Directory Navigation with C++", "body": "<p>You can use the directory functions in dirent.h to obtain the directory contents. Use the opendir function to open the directory, then traverse the directory using readdir and finally call closedir to close the directory handle.</p>\n\n<p>This is a system call in linux/unix, won't work in Windows or other OS.</p>\n"}], "owner": {"reputation": 448, "user_id": 3973851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8e26bb80cdddbdf2dbb47ec3ffeee68e?s=128&d=identicon&r=PG&f=1", "display_name": "jonnyd42", "link": "https://stackoverflow.com/users/3973851/jonnyd42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 603, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1452737451, "creation_date": 1452725578, "last_edit_date": 1495542211, "question_id": 34778602, "link": "https://stackoverflow.com/questions/34778602/directory-navigation-with-c", "title": "Directory Navigation with C++", "body": "<p>I'm learning how to develop C++ programs without an IDE by using gcc and gdb for my debugger. Up to now, I've developed Python in the terminal with emacs but shied away from C++ because I was intimidated by makefiles, etc. Now that I'm working in Linux with my C++ program, I was wondering something about the way C++ works with directories.</p>\n\n<p>I have a directory structure as follows</p>\n\n<pre><code>               Parent\n           /           \\\nData Folder             Program Dir\n    |                      |\n407 subdirectories      &lt;program files&gt;\n</code></pre>\n\n<p>Developing python scripts on a linux machine makes it easy to change directories by just storing os.getcwd(), using os.chdir() to change directories to a target, and then using it again to return to the previous directory. My question is, can I do the same thing with C++ where I navigate to the parallel directory Data Folder containing 407 subdirectories in a similar way to Python?</p>\n\n<p>I've seen the following post so I know about getcwd in C++:\n<a href=\"https://stackoverflow.com/questions/298510/how-to-get-the-current-directory-in-a-c-program\">How to get the current directory in a C program?</a></p>\n\n<p>However, I'm asking because I remember having to do something in Xcode where I tell it where to look for my data since I wasn't able to get it to navigate directories intuitively (like Python.) I assume I don't need to do that again. </p>\n\n<p><strong>What's the best way to do this (switch dirs, perform tasks, switch back) without using boost filesystem?</strong></p>\n"}, {"tags": ["c++", "templates", "asynchronous", "future"], "answers": [{"comments": [{"owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "edited": false, "score": 0, "creation_date": 1452726626, "post_id": 34778759, "comment_id": 57302610, "body": "I don&#39;t want to pass a specific function though. I want to be able to pass any function that has the same return type as the TaskQueue that I insert it into and have that be passed as an async operation into the queue of futures."}, {"owner": {"reputation": 1, "user_id": 5178235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8uAatTWHloo/AAAAAAAAAAI/AAAAAAAAAWY/TYBsKFE4dD8/photo.jpg?sz=128", "display_name": "Cristiano Silva Jr", "link": "https://stackoverflow.com/users/5178235/cristiano-silva-jr"}, "reply_to_user": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "edited": false, "score": 0, "creation_date": 1452726921, "post_id": 34778759, "comment_id": 57302719, "body": "<code>return_type (*func) () </code> then? It can be passed as an argument, no need to <code>typedef</code> it."}], "tags": [], "owner": {"reputation": 1, "user_id": 5178235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8uAatTWHloo/AAAAAAAAAAI/AAAAAAAAAWY/TYBsKFE4dD8/photo.jpg?sz=128", "display_name": "Cristiano Silva Jr", "link": "https://stackoverflow.com/users/5178235/cristiano-silva-jr"}, "is_accepted": false, "score": 0, "last_activity_date": 1452726405, "creation_date": 1452726405, "answer_id": 34778759, "question_id": 34778579, "link": "https://stackoverflow.com/questions/34778579/how-to-use-function-pointer-as-a-parameter-in-a-class/34778759#34778759", "title": "How to use Function Pointer as a parameter in a Class", "body": "<p>I think you can define a type for the function you want to pass and then apply them in the order you want. For example, the following snippet will define a <code>intfunc</code> type, which is a function that takes an <code>int</code> and returns an <code>int</code>.</p>\n\n<pre><code>typedef int (*intfunc) (int);\n</code></pre>\n\n<p>We can then define functions like</p>\n\n<pre><code>int sum2(int n) {\n    return n + 2;\n}\n\nint mult3(int n) {\n    return 3 * n;\n}\n</code></pre>\n\n<p>and give them to a vector,</p>\n\n<pre><code>vector&lt;intfunc&gt; funcs;\nvector&lt;intfunc&gt;::iterator func;\nint start = 0;\n\nfuncs.push_back(sum2);\nfuncs.push_back(mult3);\n\ncin &gt;&gt; start;\nfor (func = funcs.begin(); func != funcs.end(); ++func)\n{\n    start = (*func)(start);\n}\n\ncout &lt;&lt; start &lt;&lt; endl;\n</code></pre>\n\n<p>If we enter 5 to that program, it will return 21 as expected.</p>\n"}, {"comments": [{"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "edited": false, "score": 0, "creation_date": 1452727437, "post_id": 34778790, "comment_id": 57302909, "body": "Tested with different types and functions. Works like a charm!"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1452726517, "creation_date": 1452726517, "answer_id": 34778790, "question_id": 34778579, "link": "https://stackoverflow.com/questions/34778579/how-to-use-function-pointer-as-a-parameter-in-a-class/34778790#34778790", "title": "How to use Function Pointer as a parameter in a Class", "body": "<p>A compilable version:</p>\n\n<pre><code>template &lt;typename return_type&gt;\nclass TaskQueue {\nprivate:\n    queue&lt;future&lt;return_type&gt;&gt; tasks;\npublic:\n    //return a copy of the queue\n    queue&lt;future&lt;return_type&gt;&gt; copy() const {\n        return tasks;\n    }\n\n\n    //default constructor\n    //does nothing, waits for input\n    TaskQueue() {\n        //do nothing\n    }\n\n    //call constructors\n    //adds task to queue\n    template &lt;typename ... Args, typename ... Ts&gt;\n    TaskQueue(return_type (*func)(Ts...), Args&amp;&amp; ... args) {\n        tasks.push(std::async(func, args...));\n    }\n\n    //copy constructor\n    //copies another queue to this one\n    TaskQueue(const queue&lt;future&lt;return_type&gt;&gt; &amp; in) {\n        tasks = in.copy();\n    }\n\n    //setter and getter functions\n\n    //inserts a new task into the queue\n    template &lt;typename ... Args, typename ... Ts&gt;\n    void add(return_type(*func)(Ts...), Args&amp;&amp; ... args) {\n        tasks.push(std::async(func, args...));\n    }\n\n    //returns true if the task at the top of the queue is ready\n    bool valid() {\n        return tasks.front().valid();\n    }\n\n    //gets the value, if the value is not ready, waits for it to be ready\n    //pops the top task after getting it\n    return_type get() {\n        return_type temp = tasks.front().get();\n\n        tasks.pop();\n\n        return temp;\n    }\n\n    //waits for the value of the top of the queue to become ready\n    void wait() {\n        tasks.top().wait();\n    }\n\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5c5632c98d9add64\" rel=\"nofollow\">Demo</a></p>\n"}], "owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 34778790, "answer_count": 2, "score": 2, "last_activity_date": 1452726517, "creation_date": 1452725459, "last_edit_date": 1452725874, "question_id": 34778579, "link": "https://stackoverflow.com/questions/34778579/how-to-use-function-pointer-as-a-parameter-in-a-class", "title": "How to use Function Pointer as a parameter in a Class", "body": "<p>I am trying to construct a class that is essentially a queue of futures that are all handled asynchronously and eventually all stored when main wants to get their values. I am having trouble creating the function parameters that will accept these functions and their arguments in order to create an async operation that is then pushed in to the queue of futures. The areas in question are the call constructor and the member function <code>add()</code>.  Here is what I have so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;future&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\nusing longInt = unsigned long long int;\n\n//prototypes\nlongInt isPrime(longInt);\n\ntemplate &lt;typename return_type&gt;\nclass TaskQueue {\nprivate:\n    queue&lt;future&lt;return_type&gt;&gt; tasks;\npublic:\n    //return a copy of the queue\n    queue&lt;future&lt;return_type&gt;&gt; copy() const {\n        return tasks;\n    }\n\n\n    //default constructor\n    //does nothing, waits for input\n    TaskQueue() {\n        //do nothing\n    }\n\n    //call constructors\n    //adds task to queue\n    TaskQueue(return_type (*func)(), Args&amp;&amp; ... args) {\n        tasks.push(new async(func, args));\n    }\n\n    //copy constructor\n    //copies another queue to this one\n    TaskQueue(const queue&lt;future&lt;return_type&gt;&gt; &amp; in) {\n        tasks = in.copy();\n    }\n\n    //setter and getter functions\n\n    //inserts a new task into the queue\n    void add(return_type(*func)(), Args&amp;&amp; ... args) {\n        tasks.push(new aync(in, args));\n    }\n\n    //returns true if the task at the top of the queue is ready\n    bool valid() {\n        return tasks.front().valid();\n    }\n\n    //gets the value, if the value is not ready, waits for it to be ready\n    //pops the top task after getting it\n    return_type get() {\n        return_type temp = tasks.top().get();\n\n        tasks.pop();\n\n        return temp;\n    }\n\n    //waits for the value of the top of the queue to become ready\n    void wait() {\n        tasks.top().wait();\n    }\n\n\n};\n\nint main() {\n    TaskQueue&lt;longInt&gt; checkPrimes;\n\n    checkPrimes.add(isPrime, 5);\n\n    longInt test = checkPrimes.get();\n\n    cout &lt;&lt; test &lt;&lt; endl;\n\n}\n\n//returns the number if it is prime or 0 if it is not\nlongInt isPrime(longInt n) {\n    if (n &lt;= 3) {\n        if (n &gt; 1) {\n            return n;\n        }\n        return 0;\n    }\n\n    if (n % 2 == 0 || n % 3 == 0) {\n        return 0;\n    }\n\n    for (unsigned short i = 5; i * i &lt;= n; i += 6) {\n        if (n % i == 0 || n % (i + 2) == 0) {\n            return 0;\n        }\n    }\n\n    return n;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1452725834, "post_id": 34778523, "comment_id": 57302324, "body": "What does <i>move particle under gravity</i> do?  That seems important."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1452726021, "post_id": 34778523, "comment_id": 57302393, "body": "Names that contain two consecutive underscores (<code>__Particle__sim__</code>, <code>__physics__sim__</code>) and names that begin with an underscore followed by a capital letter are reserved to the implementation. Don&#39;t use them."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1452727236, "post_id": 34778523, "comment_id": 57302843, "body": "Note that spawning 100,000 sub-threads is likely to set your computer on fire, metaphorically speaking... :)  most modern OS&#39;s aren&#39;t really made to scale beyond a few hundred active threads at one time.  You&#39;d probably be better off dividing your particles list into a set of N sub-lists, where N is the number of CPU cores in the computer the program is running on, and spawning off one thread per sub-list."}, {"owner": {"reputation": 153, "user_id": 1850483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/393c3bc1054213979473d5c1dc3a152e?s=128&d=identicon&r=PG", "display_name": "fred.smalley", "link": "https://stackoverflow.com/users/1850483/fred-smalley"}, "edited": false, "score": 0, "creation_date": 1454701998, "post_id": 34778523, "comment_id": 58179403, "body": "Thanks Jeremy for the insight. I will do this as well."}], "answers": [{"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 1, "last_activity_date": 1452726898, "creation_date": 1452726898, "answer_id": 34778880, "question_id": 34778523, "link": "https://stackoverflow.com/questions/34778523/is-using-a-const-method-from-one-object-thread-safe/34778880#34778880", "title": "Is using a const method from one object thread safe?", "body": "<p>It looks thread-safe to me.  In particular, if the only (non-immutable) data read or written by each of the spawned threads is the thread's own corresponding Particle object, then there is no shared data as far as the threads are concerned.  (The Physics object itself is shared, of course, but since you are not modifying the Physics object during the sub-threads' lifetime, the Physics object is effectively immutable/read-only during the operation, and any read-only access to the Physics object by the spawned threads will not be a source of race conditions)</p>\n"}, {"comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 153, "user_id": 1850483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/393c3bc1054213979473d5c1dc3a152e?s=128&d=identicon&r=PG", "display_name": "fred.smalley", "link": "https://stackoverflow.com/users/1850483/fred-smalley"}, "edited": false, "score": 0, "creation_date": 1454703201, "post_id": 34778901, "comment_id": 58180013, "body": "@fred.smalley: Return Value Optimization and Named Return Value Optimization is where the compiler takes the return value from a function and constructs it directly in the caller instead of building a temporary value in the function and then copying it."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": true, "score": 2, "last_activity_date": 1452727480, "last_edit_date": 1452727480, "creation_date": 1452726984, "answer_id": 34778901, "question_id": 34778523, "link": "https://stackoverflow.com/questions/34778523/is-using-a-const-method-from-one-object-thread-safe/34778901#34778901", "title": "Is using a const method from one object thread safe?", "body": "<p>At first sight, this should be thread safe.</p>\n\n<p>We need to see the implementation of Particle::setHeight to be absolutely sure. What if it did something like write to a global array? Which would be silly but we can't tell for sure.</p>\n\n<p>However, your Particle looks very simple. What would be even more thread safe is to not mutate it at all. Make them immutable and create a new one with each calculation.</p>\n\n<p>You can still change them by assigning the new Particle back to the old Particle.</p>\n\n<p>However if you really want to get into threading, a great technique here is to have two world states: previous and next. These swap with each update step. Each update step reads from previous and writes into next. This lets other threads like graphics display read from previous without constantly locking on little things like Particles.</p>\n\n<p>With that, a immutable Particle does not slow anything down at all. In fact, the compiler will rewrite the machine code for <code>nextParticles[i] = updateParticle(prevParticles[i])</code> into direct assignments to its final position in memory. That's RVO or NRVO.</p>\n"}], "owner": {"reputation": 153, "user_id": 1850483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/393c3bc1054213979473d5c1dc3a152e?s=128&d=identicon&r=PG", "display_name": "fred.smalley", "link": "https://stackoverflow.com/users/1850483/fred-smalley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 34778901, "answer_count": 2, "score": 0, "last_activity_date": 1452727480, "creation_date": 1452725204, "question_id": 34778523, "link": "https://stackoverflow.com/questions/34778523/is-using-a-const-method-from-one-object-thread-safe", "title": "Is using a const method from one object thread safe?", "body": "<p>I am not sure if this is a duplicate, I have looked through many posts but they do not seem to be close enough to my question.</p>\n\n<p>I want to use a const method from one object to change other objects concurrently. The program basically needs me to move a particle under the influence of gravity and I want to run this in parallel for all particles.  I made a physics class and in that class I have a const method to move a particle object.</p>\n\n<p>Here are some example classes to understand me better.</p>\n\n<pre><code>/**\n * Particle.h\n */\n#ifndef __Particle__sim__\n#define __Particle__sim__\n\nclass Particle {\n  private:\n    double height;\n    double velocity;\n  public:\n    const double getHeight() const;\n    const double getVelocity() const;\n    void setHeight(const double&amp;);\n    void setVelocity(const double&amp;);\n};\n\n#endif\n</code></pre>\n\n<hr>\n\n<pre><code>/**\n * Physics.h\n */\n#ifndef __physics__sim__\n#define __physics__sim__\n\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\n#include \"Particle.h\"\n\nclass Physics {\n  private:\n    double gravity;\n    double timeStep;\n    void moveParticle(Particle&amp;, const double) const;\n\n  public:\n    Physics(const double g, const double t);\n    void moveParticles(std::vector&lt;Particle&gt;&amp;, const double) const;\n};\n\n#endif\n</code></pre>\n\n<hr>\n\n<pre><code>/**\n * Physics.cpp\n */\n#include \"Physics.h\"\n\nusing namespace std;   \n\nPhysics::Physics(const double g, const double t) : gravity(g), timeStep(t) {}\n\nvoid Physics::moveParticle(Particle&amp; particle, const double time) const {\n  // move particle under gravity\n}\n\nvoid Physics::moveParticles(vector&lt;Particles&gt;&amp; particles, const double time) const {\n  vector&lt;thread&gt; threads;\n  threads.reserve(particles.size());\n\n  for (auto&amp; p : particles) {\n    threads.push_back(thread(Physics::moveParticle&amp;, this, std::ref(p), time));\n  }\n  for (auto&amp; t : threads) {\n    t.join();\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>Here is essentially my main</p>\n\n<pre><code>/**\n * main.cpp\n */\n\n#include &lt;vector&gt;\n\n#include \"Physics.h\"\n#include \"Particle.h\"\n\nusing namespace std;\n\nint main() {\n  vector&lt;Particle&gt; particles;\n  // insert 100,000 particles\n\n  Physics physics = Physics(-9.81, 0.01);\n\n  physics.moveParticles(particles, 5.0);    \n\n  return 0;\n}\n</code></pre>\n\n<p>So is <code>physics.moveParticle(Particle&amp;, const double)</code> thread safe here?</p>\n\n<p>Short &amp; Sweet:\nI want to use a method from one Physics object to make multiple threads to move all the Particles in my program and I am not sure if the const method I wrote is thread safe. I can't see why not but I can't justify it.</p>\n"}, {"tags": ["c++", "c", "linux", "syslog", "syslog-ng"], "comments": [{"owner": {"reputation": 1736, "user_id": 418599, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/QDDnf.jpg?s=128&g=1", "display_name": "Antonio Petricca", "link": "https://stackoverflow.com/users/418599/antonio-petricca"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1452724921, "post_id": 34778402, "comment_id": 57301898, "body": "Could you make me an example? Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1452725867, "creation_date": 1452725867, "answer_id": 34778667, "question_id": 34778402, "link": "https://stackoverflow.com/questions/34778402/include-level-into-syslog-log-file/34778667#34778667", "title": "Include LEVEL into SysLog log file", "body": "<p>You can write a wrapper function like this</p>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;syslog.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint\nmysyslog(int __level, const char *const syslogformat, ...)\n{\n    va_list args;\n    char *format;\n    size_t length;\n    char *level;\n    ssize_t result;\n\n    va_start(args,syslogformat);\n\n    level = \"?\";\n    switch (__level)\n    {\n        case LOG_ALERT:\n            level = \"LOG_ALERT\";\n            break;\n        case LOG_INFO:\n            level = \"LOG_INFO\";\n            break;\n       case LOG_EMERG:\n            level = \"LOG_EMERG\";\n            break;\n       case LOG_CRIT:\n            level = \"LOG_CRIT\";\n            break;\n       case LOG_ERR:\n            level = \"LOG_ERR\";\n            break;\n       case LOG_WARNING:\n            level = \"LOG_WARNING\";\n            break;\n       case LOG_NOTICE:\n            level = \"LOG_NOTICE\";\n            break;\n       case LOG_DEBUG:\n            level = \"LOG_DEBUG\";\n            break;\n    }\n\n    length = strlen(syslogformat) + strlen(level) + 2;\n    format = malloc(length + 1);\n    result = snprintf(format, length + 1, \"%s: %s\", level, syslogformat);\n    if ((result &lt; 0) || (result &gt;= length + 1))\n        return -1;\n    vsyslog(__level, format, args);\n    va_end(args);\n\n    return 0;\n}\n\nint main(void) \n{\n    mysyslog(LOG_NOTICE, \"This is a log message `%d' with an integer as parameter\\n\", 100);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 5940183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cdb2c5f57c2980ed7cb4d59fc0ab579?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/5940183/andre"}, "is_accepted": false, "score": 1, "last_activity_date": 1477041614, "creation_date": 1477041614, "answer_id": 40172810, "question_id": 34778402, "link": "https://stackoverflow.com/questions/34778402/include-level-into-syslog-log-file/40172810#40172810", "title": "Include LEVEL into SysLog log file", "body": "<p>Just use a template for your destination file in which you specifie how your log message will be displayed/written; something like this shows only syslog level and message:</p>\n\n<pre><code>template t_example { template(\"${LEVEL}\" \"${MSG}\"); };\n\ndestination d_example { file(\"/var/log/example.log\" template(t_example) ); };\n</code></pre>\n"}], "owner": {"reputation": 1736, "user_id": 418599, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/QDDnf.jpg?s=128&g=1", "display_name": "Antonio Petricca", "link": "https://stackoverflow.com/users/418599/antonio-petricca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1477041614, "creation_date": 1452724648, "question_id": 34778402, "link": "https://stackoverflow.com/questions/34778402/include-level-into-syslog-log-file", "title": "Include LEVEL into SysLog log file", "body": "<p>Is it possibile to show the level (LOG_INFO, LOG_ERROR, ...) information passed to the \"syslog\" function into each log line?</p>\n\n<p>Thank you!\nAntonio</p>\n"}, {"tags": ["c++", "windows", "visual-studio-2013", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 5349, "user_id": 487980, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6fe3d12390796cbf760d3ef11016e8af?s=128&d=identicon&r=PG", "display_name": "Flethuseo", "link": "https://stackoverflow.com/users/487980/flethuseo"}, "edited": false, "score": 0, "creation_date": 1452790076, "post_id": 34781373, "comment_id": 57333524, "body": "Yes, that worked. How do I capture it in an std::locale variable though?"}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": true, "score": 0, "last_activity_date": 1452802494, "last_edit_date": 1452802494, "creation_date": 1452743119, "answer_id": 34781373, "question_id": 34778356, "link": "https://stackoverflow.com/questions/34778356/how-do-i-get-the-locale-name-using-vs2015/34781373#34781373", "title": "How do I get the locale name using VS2015?", "body": "<p>In VS2015 they made it so the name if the locale is always equal to the argument you pass to the constructor (if it's valid):</p>\n\n<pre><code>// c:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\xlocinfo line 360\nvoid _Construct(const string &amp;_Str,\n    category _Cat)\n    {   // construct a locale with named facets\n    bool _Bad = false;\n    _Init();\n    if (_Cat != none)\n        {   // worth adding, do it\n        _TRY_BEGIN\n            _BEGIN_LOCINFO(_Lobj(_Cat, _Str.c_str()))\n                if (_Badname(_Lobj))\n                    _Bad = true;\n                else\n                    {   // name okay, build the locale\n                    _Locimp::_Makeloc(_Lobj, _Cat, _Ptr, 0);\n                    // The two lines below were added in VS2015\n                    _Ptr-&gt;_Catmask = _Cat;\n                    _Ptr-&gt;_Name = _Str.c_str(); // &lt;--- Here they set the name forcefully\n                    }\n</code></pre>\n\n<p>I believe you have to use <a href=\"https://msdn.microsoft.com/en-us/library/x99tb11d.aspx\" rel=\"nofollow\">setlocale()</a> instead:</p>\n\n<pre><code>std::cout &lt;&lt; setlocale(LC_ALL, \"\") &lt;&lt; endl;\n</code></pre>\n\n<p>To have it in <code>std::locale</code> you can do</p>\n\n<pre><code>std::locale loc(setlocale(LC_ALL, \"\"));\n</code></pre>\n\n<p>This works in both VS2013 and VS2015.</p>\n"}], "owner": {"reputation": 5349, "user_id": 487980, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6fe3d12390796cbf760d3ef11016e8af?s=128&d=identicon&r=PG", "display_name": "Flethuseo", "link": "https://stackoverflow.com/users/487980/flethuseo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 34781373, "answer_count": 1, "score": 1, "last_activity_date": 1452802494, "creation_date": 1452724453, "question_id": 34778356, "link": "https://stackoverflow.com/questions/34778356/how-do-i-get-the-locale-name-using-vs2015", "title": "How do I get the locale name using VS2015?", "body": "<p>I can get the locale name of my system using the code below compiled in Visual Studio 2013. If I compile this same code in VS2015 I get nothing back! Is this a bug? How do you get your current system locale's name using VS2015 then?</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;locale&gt;\nusing namespace std;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    std::cout &lt;&lt; std::locale(\"\").name().c_str() &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["javascript", "c++", "websocket"], "comments": [{"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452724974, "post_id": 34778321, "comment_id": 57301922, "body": "What is the value of <code>acceptkey</code> ?"}, {"owner": {"reputation": 259, "user_id": 5786883, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3bfda63d380fe30937289d0abfd4462d?s=128&d=identicon&r=PG&f=1", "display_name": "xmxmxmx", "link": "https://stackoverflow.com/users/5786883/xmxmxmx"}, "reply_to_user": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452726976, "post_id": 34778321, "comment_id": 57302746, "body": "thanks, i&#39;ve listed the key values in the question"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452727126, "post_id": 34778321, "comment_id": 57302808, "body": "Have you tried with <code>\\n</code> instead of <code>\\r\\n</code> ? Also, order of lines seem different in the Chrome output (from your code)."}, {"owner": {"reputation": 259, "user_id": 5786883, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3bfda63d380fe30937289d0abfd4462d?s=128&d=identicon&r=PG&f=1", "display_name": "xmxmxmx", "link": "https://stackoverflow.com/users/5786883/xmxmxmx"}, "reply_to_user": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452772933, "post_id": 34778321, "comment_id": 57321489, "body": "yes \\n does the exact same, I&#39;ve also edited chrome output to actual headers instead of parsed."}, {"owner": {"reputation": 259, "user_id": 5786883, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3bfda63d380fe30937289d0abfd4462d?s=128&d=identicon&r=PG&f=1", "display_name": "xmxmxmx", "link": "https://stackoverflow.com/users/5786883/xmxmxmx"}, "reply_to_user": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452807265, "post_id": 34778321, "comment_id": 57343542, "body": "i&#39;m using windows 8 so /r/n should be correct."}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1452808032, "post_id": 34778321, "comment_id": 57343946, "body": "And what is the value of <code>msgkey</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 5786883, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3bfda63d380fe30937289d0abfd4462d?s=128&d=identicon&r=PG&f=1", "display_name": "xmxmxmx", "link": "https://stackoverflow.com/users/5786883/xmxmxmx"}, "edited": false, "score": 1, "creation_date": 1452829640, "post_id": 34801041, "comment_id": 57350929, "body": "aha, I found the issue was a leading space in the original key so the SHA1 was incorrect as you pointed out, socket is open, woohoo! thank you so much."}], "tags": [], "owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "is_accepted": true, "score": 7, "last_activity_date": 1452810690, "creation_date": 1452810690, "answer_id": 34801041, "question_id": 34778321, "link": "https://stackoverflow.com/questions/34778321/websocket-handshake-sec-websocket-accept-header-value-is-incorrect/34801041#34801041", "title": "Websocket handshake Sec-WebSocket-Accept header value is incorrect", "body": "<p>Chrome says that 'Sec-WebSocket-Accept' is incorrect. Trying to compute it manually, I have to agree with Chrome.</p>\n\n<p>My test:</p>\n\n<ol>\n<li>concat \"LKF8lHGznbKGIgO1UzAOhg==\" and \"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\"\n=> \"LKF8lHGznbKGIgO1UzAOhg==258EAFA5-E914-47DA-95CA-C5AB0DC85B11\", that's <code>key</code>.</li>\n<li>compute SHA1 160 bits hex: <strong>bf15 14e3 7108 0ee4 7782 c709 a767 cc72 423d e5c4</strong></li>\n<li>From your log, your encoding to base64 is: 5T5MvxP1iz40vLpi3kQs/ifDaCo=</li>\n<li>Decoding it to hex: <strong>e53e 4cbf 13f5 8b3e 34bc ba62 de44 2cfe\n27c3 682a</strong></li>\n</ol>\n\n<p>The bold values should be equal. Feel free to correct me if I'm wrong somewhere.</p>\n\n<p>Possible problems:</p>\n\n<ul>\n<li><p>Is <code>sha_str</code> null-terminated ? i.e. <code>strlen((char*)sha_str) == 20</code> ?</p></li>\n<li><p>signed/unsigned char mixup ?</p></li>\n</ul>\n"}], "owner": {"reputation": 259, "user_id": 5786883, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3bfda63d380fe30937289d0abfd4462d?s=128&d=identicon&r=PG&f=1", "display_name": "xmxmxmx", "link": "https://stackoverflow.com/users/5786883/xmxmxmx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14257, "favorite_count": 3, "accepted_answer_id": 34801041, "answer_count": 1, "score": 4, "last_activity_date": 1608642954, "creation_date": 1452724246, "last_edit_date": 1608642954, "question_id": 34778321, "link": "https://stackoverflow.com/questions/34778321/websocket-handshake-sec-websocket-accept-header-value-is-incorrect", "title": "Websocket handshake Sec-WebSocket-Accept header value is incorrect", "body": "<p>I'm writing a c++ websocket server, dev tools on chrome says sec-websocket-accept header value is incorrect. I've tested for days and it all seems fine. The client closes with readystate 3 without the websocket onopen being called although it shows as 101 in chrome dev tools.</p>\n<p>This is my code for calculating the keys</p>\n<pre><code>string magickey = &quot;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&quot;;\nstring key = msgkey.append(magickey);\n\nunsigned char* sha_str = SHA1(reinterpret_cast&lt;const unsigned char*&gt;(key.c_str()), key.length(), nullptr);\nstring acceptkey = base64_encode(reinterpret_cast&lt;const unsigned char*&gt;(sha_str), strlen((char*)sha_str));\n\nstring handshake_response = &quot;HTTP/1.1 101 Switching Protocols\\r\\n&quot;;\nhandshake_response.append(&quot;Upgrade: websocket\\r\\n&quot;);\nhandshake_response.append(&quot;Connection: Upgrade\\r\\n&quot;);\nhandshake_response.append(&quot;Sec-WebSocket-Accept: &quot;+acceptkey+&quot;\\r\\n&quot;);\nhandshake_response.append(&quot;\\r\\n&quot;);  \n</code></pre>\n<p>Chrome Response</p>\n<pre><code>HTTP/1.1 101 Switching Protocols  \nUpgrade: websocket  \nConnection: Upgrade  \nSec-WebSocket-Accept: 5T5MvxP1iz40vLpi3kQs/ifDaCo=  \n</code></pre>\n<p>Chrome Request</p>\n<pre><code>GET ws://localhost:4897/echo HTTP/1.1  \nHost: localhost:4897  \nConnection: Upgrade  \nPragma: no-cache  \nCache-Control: no-cache  \nUpgrade: websocket  \nOrigin: http://localhost  \nSec-WebSocket-Version: 13  \nUser-Agent: Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.106 Safari/537.36  \nAccept-Encoding: gzip, deflate, sdch  \nAccept-Language: en-US,en;q=0.8  \nSec-WebSocket-Key: LKF8lHGznbKGIgO1UzAOhg==  \nSec-WebSocket-Extensions: permessage-deflate; client_max_window_bits  \n</code></pre>\n<p>It says &quot;Error during WebSocket handshake: Incorrect 'Sec-WebSocket-Accept' header value&quot;.</p>\n<p>Chrome also shows one additional frame received size 79 bytes opcode -1.</p>\n<p>Thanks Heaps!</p>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1452724317, "post_id": 34778252, "comment_id": 57301624, "body": "Unclear how you want to call <code>EventDelegate</code> without knowing which parameter to pass..."}, {"owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1452724326, "post_id": 34778252, "comment_id": 57301630, "body": "@Jarod42 woops thats a typo. I&#39;ll fix it now. That is my previous implementation"}, {"owner": {"reputation": 281, "user_id": 1382551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09d244f05314df4edd52bd78681ed31?s=128&d=identicon&r=PG", "display_name": "Ben Jackson", "link": "https://stackoverflow.com/users/1382551/ben-jackson"}, "edited": false, "score": 0, "creation_date": 1452724616, "post_id": 34778252, "comment_id": 57301764, "body": "Its not clear how you will distinguish between events when iterating through the elements in the evtRegistry.  How can you call the function without knowing the template instanciation?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1452724624, "post_id": 34778252, "comment_id": 57301768, "body": "And how do you expect to use <code>evtRegistry[x]</code> ?"}, {"owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1452724983, "post_id": 34778252, "comment_id": 57301926, "body": "@Jarod42 Please see edit for event handling. Note evtRegistry is a <code>unordered_multimap</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "edited": false, "score": 0, "creation_date": 1452727510, "post_id": 34778686, "comment_id": 57302934, "body": "&quot;What are you trying to achieve with a single data structure holding all registered events?&quot;, what every programmer wants to achieve; Simplicity, Elegance and Perfection, duh"}], "tags": [], "owner": {"reputation": 281, "user_id": 1382551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e09d244f05314df4edd52bd78681ed31?s=128&d=identicon&r=PG", "display_name": "Ben Jackson", "link": "https://stackoverflow.com/users/1382551/ben-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1452725985, "creation_date": 1452725985, "answer_id": 34778686, "question_id": 34778252, "link": "https://stackoverflow.com/questions/34778252/delegate-with-variadic-templates/34778686#34778686", "title": "Delegate with Variadic Templates", "body": "<p>My first inclination, and perhaps the simplest answer here is to create separate data structures for each event type.  For example:</p>\n\n<pre><code>std::vector&lt; EventDelegate&lt; GUID, Point &gt; &gt; clickRegistry\nstd::vector&lt; EventDelegate&lt; char &gt; &gt; keyDownRegistry\n</code></pre>\n\n<p>Usage</p>\n\n<pre><code>clickRegistry.push_back( EventDelegate(std::bind(&amp;Foo::onLeftClick, myFoo, std::placeholders::_1, std::placeholders::_2)) );\n</code></pre>\n\n<p>Although why creating a separate delegate here when you could use<code>std::function</code>directly is unclear. (I could see adding a bunch of other utility to the Delegate class at a future point, and maybe that is your intent).</p>\n\n<p>What are you trying to achieve with a single data structure holding all registered events?</p>\n"}], "owner": {"reputation": 21174, "user_id": 972202, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/k5Gxr.png?s=128&g=1", "display_name": "sazr", "link": "https://stackoverflow.com/users/972202/sazr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452725985, "creation_date": 1452723973, "last_edit_date": 1452724952, "question_id": 34778252, "link": "https://stackoverflow.com/questions/34778252/delegate-with-variadic-templates", "title": "Delegate with Variadic Templates", "body": "<p>When an event fires (key press, mouse, etc.) my application will call delegate functions that have registered for that event.</p>\n\n<p>Below is the implementation. I am trying to make the 'invoke' function (<code>()</code>) a variadic template so that I can pass any parameters to it. But with my current setup below its not possible. </p>\n\n<p>Any ideas how I can achieve using variadic templates in this design?</p>\n\n<p><strong>Edit</strong> Changed code</p>\n\n<pre><code>template &lt;typename... params&gt;\nclass EventDelegate\n{\npublic:\n    typedef std::function&lt;int(params...)&gt; EDelegate;\n\n    EventDelegate(EDelegate delegate) : delegate(delegate)\n    {\n\n    }\n\n    int operator()(params...) const\n    {\n        return delegate(params...);\n    }\n\nprivate:\n    EDelegate delegate;\n};\n\n// Not valid because template params are not specified. But each EventDelegate can take different params\nstd::unordered_multimap&lt;int, EventDelegate&gt; evtRegistry; \n\n// Example\n\nclass Foo\n{\npublic:\n    int onLeftClick(GUID sender, Point pos);\n    int onKeyDown(char key);\n};\n\n// Usage \n\n... \n\nevtRegistry[1] = EventDelegate(std::bind(&amp;Foo::onLeftClick, myFoo, std::placeholders::_1, std::placeholders::_2));\nevtRegistry[2] = EventDelegate(std::bind(&amp;Foo::onKeyDown, myFoo, std::placeholders::_1));\n</code></pre>\n\n<p>Event handling:</p>\n\n<pre><code>LRESULT CALLBACK Win32App::wndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n\n    switch (message)\n    {\n        case WM_CREATE:\n        {\n            auto registeredCmps = evtRegistry.equal_range(EVT_INIT);\n            for (auto iter = registeredCmps.first; iter != registeredCmps.second; iter++)\n                iter-&gt;second();\n        }\n        break;\n        case WM_DESTROY:\n        {\n            auto registeredCmps = evtRegistry.equal_range(EVT_EXIT);\n            for (auto iter = registeredCmps.first; iter != registeredCmps.second; iter++)\n                iter-&gt;second(someParam, someOtherParam);\n        }\n        break;\n        ...\n</code></pre>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 4, "creation_date": 1501020657, "post_id": 34778041, "comment_id": 77591129, "body": "This is bizarrely highly voted for something that seems to ask 3 different unresearched questions and is a duplicate of <a href=\"https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11\">What is a lambda expression in C++11?</a>"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1556307171, "post_id": 34778041, "comment_id": 98407619, "body": "I agree with @underscore_d - It looks like some click is doing rating boosting, right? :)"}, {"owner": {"reputation": 58446, "user_id": 84704, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/aEXJK.png?s=128&g=1", "display_name": "Warren  P", "link": "https://stackoverflow.com/users/84704/warren-p"}, "edited": false, "score": 0, "creation_date": 1616555772, "post_id": 34778041, "comment_id": 118036958, "body": "IT&#39;s highly rated because GOOGLE decided to funnel you here if you google what [=] means in C++, without knowing what the word Lambda even means."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 13, "creation_date": 1452744206, "post_id": 34778079, "comment_id": 57307763, "body": "&quot;This is necessary&quot;  - this exact option isn&#39;t necessary; we could also write <code>[&amp;]</code>, <code>[=offset, =input]</code>, etc."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1452791665, "post_id": 34778079, "comment_id": 57334634, "body": "@M.M - Doesn&#39;t that capture references to locals?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 5, "creation_date": 1452792434, "post_id": 34778079, "comment_id": 57335126, "body": "@M.M. Using a reference capture here would be a problem because those local variables&#39; lifetimes will end as soon as the lambda is returned. You&#39;re right that we could list the individual variables individually, though."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 111, "last_activity_date": 1452738369, "last_edit_date": 1452738369, "creation_date": 1452723092, "answer_id": 34778079, "question_id": 34778041, "link": "https://stackoverflow.com/questions/34778041/what-does-mean-in-c/34778079#34778079", "title": "What does [=] mean in C++?", "body": "<p>The <code>[=]</code> you're referring to is part of the <em>capture list</em> for the lambda expression. This tells C++ that the code inside the lambda expression is initialized so that the lambda gets a copy of all the local variables it uses when it's created. This is necessary for the lambda expression to be able to refer to <code>factor</code> and <code>offset</code>, which are local variables inside the function.</p>\n\n<p>If you replace the <code>[=]</code> with <code>[]</code>, you'll get a compiler error because the code inside the lambda expression won't know what the variables <code>offset</code> and <code>factor</code> refer to. Many compilers give good diagnostic error messages if you do this, so try it and see what happens!</p>\n"}, {"comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 3, "creation_date": 1453241731, "post_id": 34778084, "comment_id": 57514376, "body": "You can also use <code>[]</code> which doesn&#39;t capture anything. :)"}], "tags": [], "owner": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "is_accepted": false, "score": 47, "last_activity_date": 1453241714, "last_edit_date": 1453241714, "creation_date": 1452723109, "answer_id": 34778084, "question_id": 34778041, "link": "https://stackoverflow.com/questions/34778041/what-does-mean-in-c/34778084#34778084", "title": "What does [=] mean in C++?", "body": "<p>It's a <a href=\"http://en.cppreference.com/w/cpp/language/lambda\">lambda</a> capture list. Makes variables available for the lambda. You can use <code>[=]</code> which copies by value, or <code>[&amp;]</code> which passes by reference.</p>\n"}], "owner": {"reputation": 839, "user_id": 4503737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff931b5c525ac465ef5ce0c6543e0769?s=128&d=identicon&r=PG&f=1", "display_name": "der_lord", "link": "https://stackoverflow.com/users/4503737/der-lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17711, "favorite_count": 20, "accepted_answer_id": 34778079, "answer_count": 2, "score": 96, "last_activity_date": 1556306838, "creation_date": 1452722939, "last_edit_date": 1556306838, "question_id": 34778041, "link": "https://stackoverflow.com/questions/34778041/what-does-mean-in-c", "title": "What does [=] mean in C++?", "body": "<p>I want to know what <code>[=]</code> does? Here's a short example</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::function&lt;T (T)&gt; makeConverter(T factor, T offset) {\n    return [=] (T input) -&gt; T { return (offset + input) * factor; };\n}\n\nauto milesToKm = makeConverter(1.60936, 0.0);\n</code></pre>\n\n<p>How would the code work with <code>[]</code> instead of <code>[=]</code>?</p>\n\n<p>I assume that</p>\n\n<pre><code>std::function&lt;T (T)&gt;\n</code></pre>\n\n<p>means an function prototype which gets <code>(T)</code> as argument and return type <code>T</code>?</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1452724273, "post_id": 34778000, "comment_id": 57301607, "body": "It should not be hard to propose a feature and PR it. I would, however I know beforehand they&#39;ll want to accommodate C++03 with BOOST_MOVE and I don&#39;t know how to use it."}, {"owner": {"reputation": 559, "user_id": 4125449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ace0843d460d51cd24c14899e5e1986?s=128&d=identicon&r=PG&f=1", "display_name": "bantl23", "link": "https://stackoverflow.com/users/4125449/bantl23"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452725012, "post_id": 34778000, "comment_id": 57301940, "body": "Yes I wanted to propose an additional to the library but wanted to make sure it was even possible first. :)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1452725076, "post_id": 34778000, "comment_id": 57301974, "body": "It&#39;s not simple at first (and with the iterators it won&#39;t work, but I assume you wouldn&#39;t mind moving from containers instead?)"}], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 4125449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ace0843d460d51cd24c14899e5e1986?s=128&d=identicon&r=PG&f=1", "display_name": "bantl23", "link": "https://stackoverflow.com/users/4125449/bantl23"}, "edited": false, "score": 0, "creation_date": 1452724516, "post_id": 34778206, "comment_id": 57301719, "body": "I was wondering if <code>std::vector</code> could be moved into <code>boost::dynamic_bitset</code> not the other way around, which I think is what you are saying. I was thinking that since the constructor get initialized with <code>std::vector</code> it would take that on underneath and thus have that intimacy you are describing."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 559, "user_id": 4125449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ace0843d460d51cd24c14899e5e1986?s=128&d=identicon&r=PG&f=1", "display_name": "bantl23", "link": "https://stackoverflow.com/users/4125449/bantl23"}, "edited": false, "score": 0, "creation_date": 1452732049, "post_id": 34778206, "comment_id": 57304476, "body": "@bantl23: Added notation about that."}, {"owner": {"reputation": 559, "user_id": 4125449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ace0843d460d51cd24c14899e5e1986?s=128&d=identicon&r=PG&f=1", "display_name": "bantl23", "link": "https://stackoverflow.com/users/4125449/bantl23"}, "edited": false, "score": 0, "creation_date": 1452783046, "post_id": 34778206, "comment_id": 57328371, "body": "Thanks for the thorough response! I had one other question. If <code>boost::dynamic_bitset</code> was implemented by inheriting and/or encapsulating <code>std::vector</code> would it then be possible?"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 3, "last_activity_date": 1452731835, "last_edit_date": 1452731835, "creation_date": 1452723750, "answer_id": 34778206, "question_id": 34778000, "link": "https://stackoverflow.com/questions/34778000/move-instead-of-copy-for-boostdynamic-bitset-blockinputiterator-constructor/34778206#34778206", "title": "Move instead of copy for boost::dynamic_bitset BlockInputIterator constructor?", "body": "<p>Not unless <code>vector</code> gets a change to its interface.</p>\n\n<p>See, movement is a very intimate operation for an object; that's why move support requires member functions of that type. It's not something you can force onto an object from outside.</p>\n\n<p><code>vector</code> has no way to adopt an arbitrary, user-allocated buffer of memory as its internal storage. It theoretically could be required to do so via some means, but it does not have such an interface at present. Without such support, other code cannot give <code>std::vector</code> its memory.</p>\n\n<p>Boost might be able to give <code>boost::container::vector</code> such an interface. But that would not change <code>std::vector</code>.</p>\n\n<p>Likewise, you can't abscond with a <code>std::vector</code>'s memory storage. Well, you could, but only through allocator trickery. That is, you'd have to tell the allocator not to actually deallocate the allocation or destroy objects when it is told to do so by <code>vector</code>. That's going to be tricky, since <code>vector::get_allocator</code> returns a copy of the allocator.</p>\n\n<p>Of course, <code>dynamic_bitset</code> doesn't have any way to be given an allocation either; it expects to own it. Much like <code>vector</code>. So even if you could abscond with <code>std::vector</code>'s storage, <code>dynamic_bitset</code> can't adopt it.</p>\n"}], "owner": {"reputation": 559, "user_id": 4125449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ace0843d460d51cd24c14899e5e1986?s=128&d=identicon&r=PG&f=1", "display_name": "bantl23", "link": "https://stackoverflow.com/users/4125449/bantl23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 34778206, "answer_count": 1, "score": 1, "last_activity_date": 1452731835, "creation_date": 1452722767, "question_id": 34778000, "link": "https://stackoverflow.com/questions/34778000/move-instead-of-copy-for-boostdynamic-bitset-blockinputiterator-constructor", "title": "Move instead of copy for boost::dynamic_bitset BlockInputIterator constructor?", "body": "<p>Would it be possible to create another <code>boost::dynamic_bitset</code> BlockInputIterator constructor to use move instead of copy for <code>std::vector</code>?</p>\n\n<p>I believe the following constructor uses copy <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/dynamic_bitset/dynamic_bitset.html#cons4\" rel=\"nofollow\">boost docs</a>:</p>\n\n<pre><code>template &lt;typename BlockInputIterator&gt;\ndynamic_bitset(\n    BlockInputIterator first,\n    BlockInputIterator last,\n    const Allocator&amp; alloc = Allocator());\n</code></pre>\n\n<p>Here is some code that I wrote to show what I'm asking:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;boost/dynamic_bitset.hpp&gt;\n\nusing namespace std;\nusing namespace boost;\n\nint main(int argc, char* argv[])\n{\n    // Notice the vector opposed to dynamic_bitset\n    vector&lt;uint8_t&gt; data;\n\n    // put in dummy data\n    data.push_back(0x1a);\n    data.push_back(0xcf);\n    data.push_back(0xfc);\n    data.push_back(0x1d);\n    for (auto i = data.begin(); i != data.end(); ++i)\n    {\n      cout &lt;&lt; hex &lt;&lt; (int)*i &lt;&lt; dec &lt;&lt; ' ';\n    }\n    cout &lt;&lt; std;\n    cout &lt;&lt; \"data.data(): \" &lt;&lt; hex &lt;&lt; (uint64_t)data.data() &lt;&lt; dec &lt;&lt; endl;\n\n    // I believe this is a copy opposed to a move\n    boost::dynamic_bitset&lt;uint8_t&gt; bs0(data.begin(), data.end());\n\n    // I would like to be able to do this which would use move,\n    // is that possible considering the vector?\n    boost::dynamic_bitset&lt;uint8_t&gt; bs1 = data;\n\n    return 0;\n}\n</code></pre>\n\n<p>So basically I'm wondering if boost could add an additional constructor to <code>boost::dynamic_bitset</code> to use move instead of copy for <code>std::vector</code>?</p>\n"}, {"tags": ["c++", "multithreading", "sockets", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452763848, "post_id": 34777967, "comment_id": 57315782, "body": "Can you make it a little clearer what the question is? Ideally the question would become much shorter"}, {"owner": {"reputation": 25, "user_id": 5737257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8eefaf6d27f3cd040ec73768b0bdf44?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/5737257/chris"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452780116, "post_id": 34777967, "comment_id": 57326213, "body": "Taking out all of the justification about why I need to use two threads...you can just read the paragraphs after the code.  I can&#39;t come up with anything shorter.  The key question &quot;is there any way to do what I&#39;m trying to do&quot; in third paragraph."}, {"owner": {"reputation": 8223, "user_id": 805579, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0d2eb3294e0905aa3c750998db351ddc?s=128&d=identicon&r=PG", "display_name": "Niall Douglas", "link": "https://stackoverflow.com/users/805579/niall-douglas"}, "edited": false, "score": 0, "creation_date": 1452792710, "post_id": 34777967, "comment_id": 57335285, "body": "Sounds awfully like you need to dedicate a worker thread to pumping ASIO&#39;s run() loop, and use some form of interprocess communication like futures to push read buffers at the main thread - futures should allow you to avoid almost all explicit locking. Unfortunately ASIO does not permit you to start async ops in a thread concurrent to the one which calls run() without additional locking, this is one of the big things I&#39;m fixing in AFIO v2&#39;s shiny new i/o reactor replacing ASIO."}, {"owner": {"reputation": 25, "user_id": 5737257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8eefaf6d27f3cd040ec73768b0bdf44?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/5737257/chris"}, "reply_to_user": {"reputation": 8223, "user_id": 805579, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0d2eb3294e0905aa3c750998db351ddc?s=128&d=identicon&r=PG", "display_name": "Niall Douglas", "link": "https://stackoverflow.com/users/805579/niall-douglas"}, "edited": false, "score": 0, "creation_date": 1452813872, "post_id": 34777967, "comment_id": 57346572, "body": "@Niall - thanks.  I guess I can give up on the dream that streambuf could potentially be used by multiple threads (it would be so awesome)...I&#39;ll study futures now."}, {"owner": {"reputation": 4634, "user_id": 2969631, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/65fb993f9cd6ff78c7c588f5a299414c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamboree", "link": "https://stackoverflow.com/users/2969631/jamboree"}, "edited": false, "score": 0, "creation_date": 1452824322, "post_id": 34777967, "comment_id": 57349690, "body": "Maybe you can try <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/basic_stream_socket/non_blocking/overload3.html\" rel=\"nofollow noreferrer\">non_blocking</a> mode, you just call <code>socket_.read_some</code> in thread 1, and check whether <code>error_code == would_block</code>."}, {"owner": {"reputation": 25, "user_id": 5737257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8eefaf6d27f3cd040ec73768b0bdf44?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/5737257/chris"}, "edited": false, "score": 0, "creation_date": 1452904834, "post_id": 34777967, "comment_id": 57386861, "body": "non_blocking seems to work solidly.  Many thanks - I have something that works well and is simpler than where I was heading, and it has minimal copies.  I kept resolve and connect async as in the boost client async examples, but once connected I just use non-blocking read/write from thread 1.  Very happy...thanks again!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "edited": false, "score": 0, "creation_date": 1453075692, "post_id": 34777967, "comment_id": 57431364, "body": "I&#39;m not sure why the fixation on <code>streambuf</code>?? It exists primarily (afaik) for the <code>read_until</code> operations. It&#39;s an incredible pain the *** to work with actually, especially if you use the <code>X_until</code> methods in asio, as the completion handler is often invoked AFTER the condition has been surpassed, so you have more data than you expect in the streambuf and you need to explicitly handle that."}], "owner": {"reputation": 25, "user_id": 5737257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8eefaf6d27f3cd040ec73768b0bdf44?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/5737257/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 439, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452763752, "creation_date": 1452722669, "last_edit_date": 1452763752, "question_id": 34777967, "link": "https://stackoverflow.com/questions/34777967/using-boostasio-async-model-for-socket-reads-multiple-threads", "title": "Using boost::asio async model for socket reads, multiple threads", "body": "<p>I have a case where my app main thread (thread 1) must run unblocked.  It needs to receive streaming data over a socket...and the data will be continuously arriving over time from the remote server.  I have limited control over thread 1 (this is plugin type of software into a larger host application that is providing thread 1).  </p>\n\n<p>So, I get called on thread 1 with a pointer to a buffer in which to put the data.  If there is no incoming data from the socket, I can just write zeros.  There needs to be at least X bytes of data to fill the buffer I'm given.  If there is not at least X bytes in the socket buffer (more on this later), then again I can fill it with zeros.</p>\n\n<p>Due to the limited control I have over thread 1, I believe I must have a thread 2 to handle the socket interface (agree?).  Let say I create that thread and set it up much like the boost::asio async TCP <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/example/cpp11/echo/async_tcp_echo_server.cpp\" rel=\"nofollow\">server</a>.  Focusing on the incoming \"read\" side of this example, consider something like this where I've created an endless \"reader\" (until I kill io_socket or thread 2 or some such).</p>\n\n<pre><code>void do_read()\n  {\n    auto self(shared_from_this());\n    socket_.async_read_some(boost::asio::buffer(data_, max_length),\n        [this, self](boost::system::error_code ec, std::size_t length)\n        {\n          if (!ec)\n          {\n            do_read();\n          }\n        });\n  }\n</code></pre>\n\n<p>It is piling data into data_ - a simple static array for the buffer.  Since I don't know exactly how much buffering will be required, I'm considering instead a vector type of implementation.  It seems the boost way to do this is to use the boost::asio::streambuf - which resizes and operates in a FIFO fashion (important because I want my incoming data to stay ordered).  It also has the concept of an input sequence and an output sequence.  My goal is to use this...where thread 2 will be putting data into the output sequence by way of the code above, and thread 1 will be reading data from the input sequence when runs and finds that it has more than X bytes.  The streambuf-internal copy from output to input is done with commit().  But my understanding is that the boost::asio::streambuf is not generally thread safe.  One could wrap all access to the streambuf (either input or output sequence) with a lock to solve the problem, but on the socket side...that lock would have to be held between async_read_some and do_read, because it accesses the streambuf at some point in between.  I think that will be state that thread 2 will be in \"most of the time\", and so the lock is very limiting on thread 1 (and again thread 1 cannot block so it would have to \"try\" the lock and rarely get it).</p>\n\n<p>It seems like boost::asio::streambuf should be safe for one thread to access the output sequence while another is accessing the input sequence (?).  I would expect the only point of contention to be commit().  If I had control over commit (and it is not clear that I do...I think possibly async_read does it automatically?) then I could just lock around commit.</p>\n\n<p>Is there any way to do what I am trying to do?  Admittedly, I'm possibly too focused on minimizing copies.  If I allow another copy, then it seems like another thread locked buffer/queue (thread_buf) could be created between thread 1 and 2...where do_read could lock, copy from streambuf to thread_buf, unlock, async_read...etc.  Thread 1 would do lock, if thread_buf has enough data copy it out, unlock.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1452723707, "post_id": 34777935, "comment_id": 57301369, "body": "What makes you think that std::transform is suitable for that? What do you expect std::transform to return?"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1452725217, "last_edit_date": 1592644375, "creation_date": 1452724576, "answer_id": 34778390, "question_id": 34777935, "link": "https://stackoverflow.com/questions/34777935/passing-output-of-c-transform-to-a-function/34778390#34778390", "title": "Passing output of c++ transform to a function", "body": "<p>The <code>???</code> needs to be an iterator for a container where you want to store the result of the transform operation, i.e. the return value of <code>op</code></p>\n<p>However, your idea is wrong.</p>\n<p><code>std::transform</code> returns (see <a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/algorithm/transform</a>)</p>\n<blockquote>\n<p>Return value</p>\n<p>Output iterator to the element past the last element transformed.</p>\n</blockquote>\n<p>It makes no sense to pass that iterator to a function as it is <code>end</code> of the container.</p>\n<p>Further, the signature of <code>op</code> doesn't fulfil the requirements for <code>std::transform</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1453240027, "last_edit_date": 1453240027, "creation_date": 1452725998, "answer_id": 34778690, "question_id": 34777935, "link": "https://stackoverflow.com/questions/34777935/passing-output-of-c-transform-to-a-function/34778690#34778690", "title": "Passing output of c++ transform to a function", "body": "<p>If your function <code>f</code> takes a container, then you will have to create a container with the transformed values. In your example you seem to also expect that <code>X</code> remains unchanged by the first transformation, so you you cannot just modify it inplace</p>\n\n<pre><code>returnVal1 = f( X );\ntransform( X.begin(), X.end(), X.begin(), \n   []( double val ){ return val + 0.1*val; } );\nreturnVal2 = f( X );\n</code></pre>\n\n<p>If you don't want to create explicit local temporaries then you can construct them using a helper function.</p>\n\n<pre><code>// pass in by value to get a copy, modify it inplace and return it\narray2Drow transformed( array2Drow copy, double factor ) \n{\n   std::transform( copy.begin(), copy.end(), copy.begin(),        \n       [&amp;]( double val ){ return val + factor*val; } ) );\n   return copy;\n}\n</code></pre>\n\n<p>The calculation of the return values can then be written using the helper. </p>\n\n<pre><code>returnVal1 = f( X );\nreturnVal2 = f( transformed( X, 0.1 ) );\nreturnVal3 = f( transformed( X, -0.1 ) );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1452734083, "creation_date": 1452734083, "answer_id": 34780074, "question_id": 34777935, "link": "https://stackoverflow.com/questions/34777935/passing-output-of-c-transform-to-a-function/34780074#34780074", "title": "Passing output of c++ transform to a function", "body": "<p>If <code>f</code> expects to receive a <code>array2Drow</code>, then you need to pass it one (containing the correct data).</p>\n\n<p>With that given, you really only have a couple of choices: either modify the data in the existing collection (and repeatedly pass the same collection), or else create a new collection each time you invoke it.</p>\n\n<p>If <code>f</code> really only needs one of the items at a time (e.g., like an accumulator), then you may be able to rewrite <code>f</code> to only take one input at a time, then at the end of each \"run\", retrieve the value and reset the accumulator.</p>\n\n<p>In that case, you can probably create an iterator type that will invoke the accumulator for each item as its created, and pass an instance of that accumulator to <code>std::transform</code> as the destination where the result should be written.</p>\n\n<p>For reference, you may want to look at <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/accumulators/user_s_guide.html\" rel=\"nofollow\">Boost Accumulators</a>.</p>\n"}], "owner": {"reputation": 509, "user_id": 1825170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d0b8f6e54e396f60fb8c9470ee0b169?s=128&d=identicon&r=PG", "display_name": "snooze_bear", "link": "https://stackoverflow.com/users/1825170/snooze-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 34778690, "answer_count": 3, "score": 1, "last_activity_date": 1453240027, "creation_date": 1452722533, "question_id": 34777935, "link": "https://stackoverflow.com/questions/34777935/passing-output-of-c-transform-to-a-function", "title": "Passing output of c++ transform to a function", "body": "<p>I'm sorry if this is a stupid question but I'm a bit of a c++ noob and I haven't been able to find the answer. I'm working with boost multi_array, and I'm trying to do something like this:</p>\n\n<pre><code>typedef boost::multi_array&lt;double,2&gt; array2D;\ntypedef array2D::array_view&lt;1&gt;::type array2Drow;\ntypedef boost::multi_array_types::index_range range;\n... \narray2D A = ... (2-d array) ...;\narray2Drow X = A(boost::indices[0][range()]);\n...\nreturnVal1 = f(X);\nreturnVal2 = f(X+0.1*X);\nreturnVal3 = f(X-0.1*X);\n</code></pre>\n\n<p>I was trying to use std::transform for this; I understand I can write some sort of functor (call it \"op\") that multiplies X by 0.1 and adds/subtracts the result from X, but this is where I run into trouble--I don't know what to put in place of the ???: </p>\n\n<pre><code>returnVal1 = f(X);\nreturnVal2 = f(transform(X.begin(),X.end(),???,op(0.1,X)));\nreturnVal3 = f(transform(X.begin(),X.end(),???,op(-0.1,X)));\n</code></pre>\n\n<p>Is there a way to do this without defining an intermediate object that then gets passed to f? Thanks in advance!</p>\n"}, {"tags": ["c++", "visual-studio-2015", "memory-address", "disassembly"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1452722600, "post_id": 34777887, "comment_id": 57300857, "body": "What do you mean the result was empty? The sum of the addresses does not exist? The memory at the address is not accessible? The memory at the address was some sort of value representing an empty object?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1452722609, "post_id": 34777887, "comment_id": 57300861, "body": "00190000-0021D000 is a <i>range</i>, first and last address of the module.  Use the Windows calculator, switch to Programmer&#39;s mode.  0x00190000 + 0x0002207b = 0x001b207b.  Pretty doubtful that the instruction at that address tells you much, ask the user to provide you with a minidump."}, {"owner": {"reputation": 136, "user_id": 5717562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d8908b59cbc91c452c9ed96fa876be9d?s=128&d=identicon&r=PG&f=1", "display_name": "DaPlayer99", "link": "https://stackoverflow.com/users/5717562/daplayer99"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1452722841, "post_id": 34777887, "comment_id": 57300972, "body": "@nwp ?? ?? After the address"}, {"owner": {"reputation": 136, "user_id": 5717562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d8908b59cbc91c452c9ed96fa876be9d?s=128&d=identicon&r=PG&f=1", "display_name": "DaPlayer99", "link": "https://stackoverflow.com/users/5717562/daplayer99"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1452722917, "post_id": 34777887, "comment_id": 57301007, "body": "@HansPassant Thank-you very much man! Its pointing to glfw, so I look around there :)"}], "owner": {"reputation": 136, "user_id": 5717562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d8908b59cbc91c452c9ed96fa876be9d?s=128&d=identicon&r=PG&f=1", "display_name": "DaPlayer99", "link": "https://stackoverflow.com/users/5717562/daplayer99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452722612, "creation_date": 1452722351, "last_edit_date": 1452722612, "question_id": 34777887, "link": "https://stackoverflow.com/questions/34777887/how-can-i-add-add-an-exception-offset-to-a-memory-address", "title": "How can I add add an exception offset to a memory address?", "body": "<p>I'm trying to find the source of an APPCRASH and I've learned that you can find the start memory address of the .exe file your running, and add the memory address of the 'Exception offset' onto that and find that address in assembly, to see the line of code causing the problem. I'm not sure how to 'add' memory addresses. The start module of the .exe is at address 00190000-0021D000 - that doesn't look like the memory addresses I know! (It's much longer!)</p>\n\n<p>How do I add 0002207b onto that address to see where the access violation is? (I tried converting both to decimal, adding the decimals, and converting back again, but the result was empty).</p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1452722428, "post_id": 34777776, "comment_id": 57300779, "body": "Depends on optimisation? After a <code>return</code>, more code is pointless."}], "answers": [{"comments": [{"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1452722553, "post_id": 34777925, "comment_id": 57300830, "body": "To both @Jarod42 and Weather Vane: So I guess the real question is which optimization level removes it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 1, "creation_date": 1452723097, "post_id": 34777925, "comment_id": 57301101, "body": "@musasabi wouldn&#39;t <i>any</i> level of optimisation remove unreachable code? It&#39;s a no-brainer decision by the compiler."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1452722489, "creation_date": 1452722489, "answer_id": 34777925, "question_id": 34777776, "link": "https://stackoverflow.com/questions/34777776/does-gcc-exclude-code-after-a-return-ifdef/34777925#34777925", "title": "Does GCC exclude code after a return #ifdef", "body": "<p>Code should be compilable, and any decent compiler optimization may remove it as unreachable code.</p>\n"}, {"tags": [], "owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "is_accepted": true, "score": 1, "last_activity_date": 1452787427, "last_edit_date": 1452787427, "creation_date": 1452725347, "answer_id": 34778559, "question_id": 34777776, "link": "https://stackoverflow.com/questions/34777776/does-gcc-exclude-code-after-a-return-ifdef/34778559#34778559", "title": "Does GCC exclude code after a return #ifdef", "body": "<p>Just compiled this with gcc 4.9 <code>cc     test.c   -o test</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define CONDITION\n\nint test() {\n  const char* hello = \"hello world\";\n  printf(\"%s\\n\",hello);\n  return 2;\n}\n\nint main()\n{\n#ifdef CONDITION\n  const char* a_test = \"hello me\";\n  printf(\"%s\\n\",a_test);\n  return 0;\n#endif\n\n  volatile const char* hello = \"hello musasabi\";\n  printf(\"%s\\n\",hello);\n\n  return test();\n}\n</code></pre>\n\n<p>and then tested the content of the resulting binary with <code>strings test | grep hello</code>\n\"hello me\" and \"hello world\" appear, but the string \"hello musasabi\" is not in <code>test</code>.</p>\n"}], "owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 1, "accepted_answer_id": 34778559, "answer_count": 2, "score": -2, "last_activity_date": 1452787427, "creation_date": 1452721928, "question_id": 34777776, "link": "https://stackoverflow.com/questions/34777776/does-gcc-exclude-code-after-a-return-ifdef", "title": "Does GCC exclude code after a return #ifdef", "body": "<p>Say, for example, you've got the following code</p>\n\n<pre><code>#define CONDITION\n\nint conditional function();\n//...\n\nint foo()\n{\n#ifdef CONDITION\n  return conditional_function();\n#endif\n\nint value = 0;\n//...many more lines\n\nreturn value;\n}\n</code></pre>\n\n<p>Would GCC not generate code for the lines following the <code>return</code>'d <code>#ifdef</code>? or would an <code>#else</code> be required for that code to be excluded?</p>\n"}, {"tags": ["c++", "clang", "googletest", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 2015090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4388202b28ea0bbc66ea8d577dc158?s=128&d=identicon&r=PG&f=1", "display_name": "WhittlesJr", "link": "https://stackoverflow.com/users/2015090/whittlesjr"}, "edited": false, "score": 0, "creation_date": 1472280632, "post_id": 35158841, "comment_id": 65698270, "body": "Sorry for the crazy late response. I&#39;m just now getting back to this issue after a long hiatus from my projects, and I hesitate to mark this as the accepted answer, because I&#39;m trying to get gtest to work with VS2015&#39;s built-in clang toolkit. I&#39;m sure I could switch to an LLVM snapshot build and get it to compile fine, and I may do that if all else fails. (And in that case I&#39;ll mark this answer correct.)"}], "tags": [], "owner": {"reputation": 54, "user_id": 5873294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cuK9l.png?s=128&g=1", "display_name": "panzerfaust", "link": "https://stackoverflow.com/users/5873294/panzerfaust"}, "is_accepted": false, "score": 1, "last_activity_date": 1454431998, "last_edit_date": 1592644375, "creation_date": 1454430768, "answer_id": 35158841, "question_id": 34777647, "link": "https://stackoverflow.com/questions/34777647/cant-build-google-test-with-visual-studio-2015-and-clang-3-7-with-microsoft-cod/35158841#35158841", "title": "Can&#39;t build Google Test with Visual Studio 2015 and Clang 3.7 with Microsoft CodeGen", "body": "<p>I faced similar problems with chdir and freopen.</p>\n<p>I will just post the steps I took, to get googletest up and running with VS2015 and Clang.</p>\n<ul>\n<li>Get an LLVM snapshotbuild for windows.\n<a href=\"http://llvm.org/builds/\" rel=\"nofollow noreferrer\">http://llvm.org/builds/</a><br />\n(Make sure you download the correct version (32-/64-bit))</li>\n</ul>\n<p>This will install a recent version of clang (at the time of writing v3.9). Be aware that this is a snapshot build and not an official release.</p>\n<p>If you do not like snapshot builds, maybe try the latest release version. I did not test it. I just like to have up-to-date tools, especially when they are fast-paced like LLVM/Clang.</p>\n<ul>\n<li>After the installation you should get entries in the Visual Studio Project properties.\n<code>Properties</code> -&gt; <code>General</code> -&gt; <code>Platform Tools</code> -&gt; <code>LLVM-vs2014</code> (and more)\n(Switch to <code>LLVM-vs2014</code>)</li>\n</ul>\n<p>I am aware that you are asking for Clang 3.7 with Microsoft CodeGen. You have to decide on your own.<br />\nIn addition, I do not like to apply some fixes/changes to code I did not write or do not know. As this worked out fine for me, I did not investigate the problem any further.</p>\n<p><b>At this point it might already work for you. The next steps describe building googletest libraries and adding the include directories to the project.</b></p>\n<ul>\n<li><p>Get googletest from github.\n<a href=\"https://github.com/google/googletest\" rel=\"nofollow noreferrer\">https://github.com/google/googletest</a></p>\n</li>\n<li><p>Run cmake-gui and configure googletest to be able to build.</p>\n<p>Generator: Visual Studio 14 2015 Win64 (I only used 64bit, you can also\ntry 32bit)</p>\n</li>\n</ul>\n<blockquote>\n<p>From the llvm documentation<br />\n(no link because not enough reputation: clang.llvm.org/docs/MSVCCompatibility.html):</p>\n<p>First, Clang attempts to be ABI-compatible, meaning that Clang-compiled code should be able to link against MSVC-compiled code successfully.</p>\n</blockquote>\n<ul>\n<li>Use default native compilers</li>\n</ul>\n<p>Where is the source code: (ex. <code>C:\\libs\\googletest\\googletest</code>)<br />\n(Because there is also googlemock in the top directory)</p>\n<p>Where to build the binaries: (ex. <code>C:\\libs\\googletest\\build</code>)</p>\n<ul>\n<li>Uncheck: <code>BUILD_SHARED_LIBS</code> (build shared libs if you want)\n<code>CMAKE_CONFIGURATION_TYPES</code>: Debug and Release (choose others if you like)<br />\nRemember or change: <code>CMAKE_INSTALL_PREFIX</code> (ex. <code>C:\\libs\\googletest\\install</code>)</li>\n</ul>\n<p>Python 2.7 was found by cmake, even though im pretty sure it is not necessary.<br />\nPress Configure and Generate.</p>\n<ul>\n<li><p>After generating the solution file, go to the directory specified above\n(Where to build the binaries, ex. <code>C:\\libs\\googletest\\build</code>) and open the solution gtest.sln.</p>\n</li>\n<li><p>Choose Debug solution configuration and right click ALL_BUILD and Build.\nWhen done, right click INSTALL and Build. This creates the folders specified earlier.</p>\n</li>\n<li><p><code>CMAKE_INSTALL_PREFIX</code> (ex. <code>C:\\libs\\googletest\\install</code>)\nin there you may want to change the libs name and add a *d.lib to keep the files from overwriting and as designator that it was the debug build.</p>\n</li>\n<li><p>Repeat the steps for the Release solution configuration.\nIn <code>CMAKE_INSTALL_PREFIX</code> (ex. <code>C:\\libs\\googletest\\install</code>) you should find an include directory and a lib directory.</p>\n</li>\n<li><p>In your project under Properties -&gt; VC++ Directories add Include Directories.\n<code>CMAKE_INSTALL_PREFIX&lt;b&gt;\\include&lt;/b&gt;</code> (ex. <code>C:\\libs\\googletest\\install&lt;b&gt;\\include&lt;/b&gt;</code>)</p>\n</li>\n<li><p>In your project under Properties -&gt; VC++ Directories add Library Directories.\nCMAKE_INSTALL_PREFIX<b>\\lib</b> (ex. C:\\libs\\googletest\\install<b>\\lib</b>)</p>\n</li>\n<li><p>And under <code>Properties</code> -&gt; <code>Linker</code> -&gt; <code>Input</code> -&gt; <code>Additional Dependencies</code>\n(gtest.lib / gtestd.lib depending on your configuration)</p>\n</li>\n</ul>\n<p>After that I was able to build and run my tests.</p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 5873294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cuK9l.png?s=128&g=1", "display_name": "panzerfaust", "link": "https://stackoverflow.com/users/5873294/panzerfaust"}, "is_accepted": false, "score": 1, "last_activity_date": 1458900158, "creation_date": 1458900158, "answer_id": 36217812, "question_id": 34777647, "link": "https://stackoverflow.com/questions/34777647/cant-build-google-test-with-visual-studio-2015-and-clang-3-7-with-microsoft-cod/36217812#36217812", "title": "Can&#39;t build Google Test with Visual Studio 2015 and Clang 3.7 with Microsoft CodeGen", "body": "<p>Due to troubles debugging with newer LLVM/Clang, i spent some time with VS2015, Clang 3.7 and googletest.</p>\n\n<p>I compiled googletest libraries as mentioned in other answer. Then switched to \"Clang 3.7 with Microsoft CodeGen (v140_clang_3_7)\" to build my googletest project.</p>\n\n<p>Sample output of error:<br>\n....gtest/internal/gtest-port.h(2384,35): error : use of undeclared identifier 'close'<br>\ninline int Close(int fd) { return close(fd); }</p>\n\n<p>In the documentation of Microsoft you can find:  </p>\n\n<blockquote>\n  <p>Example with fdopen<br>\n  fdopen: This POSIX function is deprecated. Use the ISO C++ conformant _fdopen instead.<br>\n  <a href=\"https://msdn.microsoft.com/en-us/library/ms235351.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms235351.aspx</a></p>\n</blockquote>\n\n<p>This is the same with quite some more functions.</p>\n\n<p>Just google for \"visual studio xxx\", where xxx is fdopen or chdir.\nYou should get a link to the documentation where you can find the new method. (Usually an underscore in front of the name.)</p>\n\n<p>Once you know what to use, go to the error (use VS output to go there), here gtest-port.h(2384,35).</p>\n\n<p>Make the change, here<br>\n ...return close(fd);<br>\nto<br>\n...return <strong>_</strong>close(fd);<br>\nand so on.</p>\n\n<p>After that my tests worked as usual. Had to get rid of some warnings too.</p>\n"}], "owner": {"reputation": 112, "user_id": 2015090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4388202b28ea0bbc66ea8d577dc158?s=128&d=identicon&r=PG&f=1", "display_name": "WhittlesJr", "link": "https://stackoverflow.com/users/2015090/whittlesjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1499, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1458900158, "creation_date": 1452721484, "question_id": 34777647, "link": "https://stackoverflow.com/questions/34777647/cant-build-google-test-with-visual-studio-2015-and-clang-3-7-with-microsoft-cod", "title": "Can&#39;t build Google Test with Visual Studio 2015 and Clang 3.7 with Microsoft CodeGen", "body": "<p>Using VS 2015 and its new built-in clang toolset / project template, I cannot build Google Test successfully. I get the following errors:</p>\n\n<pre><code>Error       use of undeclared identifier 'chdir'; did you mean '_chdir'?    \nError       use of undeclared identifier 'fdopen'   \nError       use of undeclared identifier 'read' \nError       use of undeclared identifier 'write'    \nError       use of undeclared identifier 'close'\nError       use of undeclared identifier 'O_RDONLY' \nError       use of undeclared identifier 'O_APPEND' \nError       use of undeclared identifier 'dup'; did you mean '_dup'?\nError       use of undeclared identifier 'creat'; did you mean '_creat'?\n</code></pre>\n\n<p>I noticed that the majority of those declarations are within these ANSI-checking blocks:</p>\n\n<pre><code>#if !__STDC__\n...\n#endif\n</code></pre>\n\n<p>Is there a project setting or something I can change to get these methods to resolve? </p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 2229, "user_id": 2883579, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/819d54c16f8b8c93c0fd4c7f642c59f4?s=128&d=identicon&r=PG&f=1", "display_name": "Samir Aguiar", "link": "https://stackoverflow.com/users/2883579/samir-aguiar"}, "edited": false, "score": 2, "creation_date": 1452721714, "post_id": 34777620, "comment_id": 57300414, "body": "See <a href=\"http://stackoverflow.com/questions/317450/why-override-operator\">why override operator()</a>"}, {"owner": {"reputation": 953, "user_id": 1095896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f70f2db9cc735bfc663e9b0794125e2e?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1095896/james"}, "reply_to_user": {"reputation": 2229, "user_id": 2883579, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/819d54c16f8b8c93c0fd4c7f642c59f4?s=128&d=identicon&r=PG&f=1", "display_name": "Samir Aguiar", "link": "https://stackoverflow.com/users/2883579/samir-aguiar"}, "edited": false, "score": 0, "creation_date": 1452723629, "post_id": 34777620, "comment_id": 57301331, "body": "thanks, it has been asked indeed."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1452726906, "post_id": 34777620, "comment_id": 57302709, "body": "Supplementary reading: <a href=\"http://stackoverflow.com/questions/6451866/why-use-functors-over-functions\">Why use functors over functions?</a>"}], "owner": {"reputation": 953, "user_id": 1095896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f70f2db9cc735bfc663e9b0794125e2e?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1095896/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "closed_date": 1452721821, "answer_count": 0, "score": 0, "last_activity_date": 1452721384, "creation_date": 1452721384, "question_id": 34777620, "link": "https://stackoverflow.com/questions/34777620/why-overload-operator-in-a-struct", "closed_reason": "Duplicate", "title": "Why overload operator() in a struct", "body": "<p>I have read some boost::thread code and found a lot of overloads of operator() in a struct. For instance, in boost/thread/thread_functors.hpp, you can see something like this:</p>\n\n<pre><code>  struct detach\n  {\n    void operator()(thread&amp; t)\n    {\n      t.detach();\n    }\n  };\n</code></pre>\n\n<p>I don't understand what the benefits are. Why not use functions like </p>\n\n<pre><code>void detach(thread&amp; t) {...}\n</code></pre>\n\n<p>instead?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1452720398, "post_id": 34777279, "comment_id": 57299781, "body": "You cannot convert to a number from a string using a simple cast."}, {"owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452720437, "post_id": 34777279, "comment_id": 57299801, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 What other steps must I take?"}], "answers": [{"tags": [], "owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "is_accepted": false, "score": 1, "last_activity_date": 1452720501, "creation_date": 1452720501, "answer_id": 34777357, "question_id": 34777279, "link": "https://stackoverflow.com/questions/34777279/c-error-cast-from-char-to-int-loses-precision/34777357#34777357", "title": "C++ error: cast from \u2018char*\u2019 to \u2018int\u2019 loses precision", "body": "<p>You can't convert a string to an int that way. <code>myString</code> is of type <code>char[]</code>, which the cast decays to <code>char*</code>, which is then converted to an <code>int</code>.</p>\n\n<p>The standard library contains some methods that can convert from string to <code>int</code>.</p>\n\n<p>Example: <a href=\"http://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow\"><code>std::atoi</code></a></p>\n"}], "owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5631, "favorite_count": 0, "closed_date": 1452720482, "answer_count": 1, "score": -1, "last_activity_date": 1452720501, "creation_date": 1452720244, "question_id": 34777279, "link": "https://stackoverflow.com/questions/34777279/c-error-cast-from-char-to-int-loses-precision", "closed_reason": "Duplicate", "title": "C++ error: cast from \u2018char*\u2019 to \u2018int\u2019 loses precision", "body": "<p>I started learning C++ a few days ago.</p>\n\n<p>I want to set <code>dog.age</code> using user input.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass dog{\n    public:\n        dog();\n        ~dog();\n        int getAge();\n        void setAge(int a);\n\n    protected:\n        int age;\n};\n\ndog::dog(){\n\n}\n\ndog::~dog(){\n\n}\n\nint dog::getAge(){\n    return age;\n}\n\nvoid dog::setAge(int a){\n    age = a;\n}\n\nint main(){\n    dog myDog;\n    char myString[2];\n    int age;\n\n    cout&lt;&lt;\"How old is the dog? \";\n    cin.getline(myString,2,'\\n');\n\n    age = (int)myString;\n    myDog.setAge(age);\n    cout&lt;&lt;\"The dog is \"&lt;&lt;myDog.getAge()&lt;&lt;\" years old!\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>But I get this error: </p>\n\n<pre><code>error: cast from \u2018char*\u2019 to \u2018int\u2019 loses precision [-fpermissive]\n  age = (int)myString;`\n</code></pre>\n\n<p>Even if I remove <code>(int)</code>, it fails.</p>\n\n<p>Why won't my program cast <code>myString</code> as an <code>int</code>?</p>\n\n<p>OPTIONAL: If I'm doing something else wrong with constructing classes, feel free to tell me. I'd like to kick bad habits early.</p>\n"}, {"tags": ["c++", "qt", "combobox", "qt5.5"], "answers": [{"comments": [{"owner": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "edited": false, "score": 0, "creation_date": 1452728359, "post_id": 34777522, "comment_id": 57303270, "body": "I see, so my for loop at the end its causing more triggers then since the index is changing.  That makes sense. Time to think of a new way to do this."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "edited": false, "score": 0, "creation_date": 1452784654, "post_id": 34777522, "comment_id": 57329634, "body": "@StackAttack I&#39;d need to know a little more about how all the signals and slots are connected but there is a <a href=\"http://doc.qt.io/qt-5/qobject.html#blockSignals\" rel=\"nofollow noreferrer\"><code>blockSignals</code></a> function on every <code>QObject</code> that can be enabled and disabled to handle situations similar to this."}, {"owner": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "edited": false, "score": 0, "creation_date": 1452829576, "post_id": 34777522, "comment_id": 57350913, "body": "I managed to figure it out by reading a bit more - &quot;There are two signals emitted if the current item of a combobox changes, currentIndexChanged() and activated(). currentIndexChanged() is always emitted regardless if the change was done programmatically or by user interaction, while activated() is only emitted when the change is caused by user interaction.&quot;  -  So the solution was to simply use activated() instead of currentIndexChanged() and wala, the algo is going to work going forward. Thanks for your help!"}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 1, "last_activity_date": 1452721054, "creation_date": 1452721054, "answer_id": 34777522, "question_id": 34777242, "link": "https://stackoverflow.com/questions/34777242/qt-5-5-using-c-removing-and-item-from-combobox-is-removing-all-items-before-t/34777522#34777522", "title": "Qt 5.5 using C++, removing and item from ComboBox is removing all items before the item as well", "body": "<p>From the <a href=\"http://doc.qt.io/qt-5/qcombobox.html#removeItem\" rel=\"nofollow\">Qt 5.5 documentation</a>:</p>\n\n<blockquote>\n  <p>Removes the item at the given index from the combobox. This will update the current index if the index is removed.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>in practice it is removing the index plus every index before it for some reason. Any idea why?</p>\n</blockquote>\n\n<p>It seems that the work to remove an item is being performed in a slot that responds to the <code>currentIndexChanged</code> signal. The above documentation states removing an item will change the current index of the combo box which will result in the slot being triggered many times, thereby removing many items.</p>\n"}], "owner": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 0, "accepted_answer_id": 34777522, "answer_count": 1, "score": 1, "last_activity_date": 1452721563, "creation_date": 1452720089, "last_edit_date": 1452720869, "question_id": 34777242, "link": "https://stackoverflow.com/questions/34777242/qt-5-5-using-c-removing-and-item-from-combobox-is-removing-all-items-before-t", "title": "Qt 5.5 using C++, removing and item from ComboBox is removing all items before the item as well", "body": "<p>Working on a program where 6 combobox's have relative data, once an index is selected, the others shouldn't be able to select it, hence I'm just removing it from the index on the others, however in practice it is removing the index plus every index before it for some reason.  Any idea why?</p>\n\n<pre><code>void AssignStatsWindow::on_comboBox_currentIndexChanged()\n{\n    ui-&gt;comboBox_2-&gt;removeItem(ui-&gt;comboBox-&gt;currentIndex());  //these should remove 1 index but removes many\n    ui-&gt;comboBox_3-&gt;removeItem(ui-&gt;comboBox-&gt;currentIndex());\n    ui-&gt;comboBox_4-&gt;removeItem(ui-&gt;comboBox-&gt;currentIndex());\n    ui-&gt;comboBox_5-&gt;removeItem(ui-&gt;comboBox-&gt;currentIndex());\n    ui-&gt;comboBox_6-&gt;removeItem(ui-&gt;comboBox-&gt;currentIndex());\n\n    for (int i = ui-&gt;comboBox-&gt;count(); i &gt;= 0; --i) //removes all but newly selected index, seems to be working fine\n    {\n        if (i != ui-&gt;comboBox-&gt;currentIndex()) {\n            ui-&gt;comboBox-&gt;removeItem(i);\n        }\n    }\n}\n</code></pre>\n\n<p><code>comboBox</code> is the one having the <code>indexChanged</code>  and triggering the code, <code>comboBox_2</code> through 6 are the others that need adjust and are 'over-removing' indexes.  Once I get this first one working correctly it should be easy to build the rest of the <code>indexChanged</code> for the rest of the <code>comboBox</code>es. Any help would be greatly appreciated. </p>\n"}, {"tags": ["c++", "c++11", "gdb", "clang++", "conversion-operator"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1452720628, "post_id": 34777236, "comment_id": 57299896, "body": "FWIW, there is no difference between <code>fooobj.operator bool()</code> and <code>(bool)(fooobj)</code> in C++. I don&#39;t know how they are different in gdb."}, {"owner": {"reputation": 3196, "user_id": 1098524, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c997b206ec650551574f4bf4f50c79ff?s=128&d=identicon&r=PG", "display_name": "owagh", "link": "https://stackoverflow.com/users/1098524/owagh"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1452720728, "post_id": 34777236, "comment_id": 57299948, "body": "@RSahu That is exactly what my understanding was. However, it definitely doesn&#39;t seem to be working that way."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1452721154, "post_id": 34777236, "comment_id": 57300158, "body": "There is <a href=\"https://ideone.com/V88alD\" rel=\"nofollow noreferrer\">no difference</a>. Your question seems to be more about the operation of GDB than about C++."}, {"owner": {"reputation": 3196, "user_id": 1098524, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c997b206ec650551574f4bf4f50c79ff?s=128&d=identicon&r=PG", "display_name": "owagh", "link": "https://stackoverflow.com/users/1098524/owagh"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1452722288, "post_id": 34777236, "comment_id": 57300693, "body": "@KerrekSB Hmm, It may be the case that this is a quirk of gdb."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1452724430, "post_id": 34777236, "comment_id": 57301678, "body": "@owagh: Something tells me that gdb probably isn&#39;t a complete C++ REPL..."}], "answers": [{"comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1452749062, "post_id": 34782255, "comment_id": 57309016, "body": "for completeness, you could try installing <code>lldb</code> also and see how it fares?"}, {"owner": {"reputation": 3196, "user_id": 1098524, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c997b206ec650551574f4bf4f50c79ff?s=128&d=identicon&r=PG", "display_name": "owagh", "link": "https://stackoverflow.com/users/1098524/owagh"}, "edited": false, "score": 0, "creation_date": 1452790477, "post_id": 34782255, "comment_id": 57333831, "body": "Good well-written answer. Accepted!"}], "tags": [], "owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1452749589, "last_edit_date": 1495542682, "creation_date": 1452748978, "answer_id": 34782255, "question_id": 34777236, "link": "https://stackoverflow.com/questions/34777236/what-is-the-difference-between-object-operator-bool-and-bool-object/34782255#34782255", "title": "What is the difference between object.operator bool() and (bool) object?", "body": "<p>I just ran a few quick tests, and it appears to be that gdb doesn't handle code compiled with clang well.  Here is a test program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Foo {\npublic:\n  Foo() : m_Int(0) {}\n  operator bool() {\n    return true;  // also tried false here\n  }\nprivate:\n  int m_Int;\n};\n\nint main()\n{\n  Foo f;\n  if (f.operator bool()) cout &lt;&lt; \"operator bool is true.\\n\";\n\n  if ((bool)f)  cout &lt;&lt; \"(bool)f is true.\\n\";\n\n  return 0;\n}\n</code></pre>\n\n<p>When the binary is run, the output is as expected, i.e. (bool)f is the same as f.operator bool(), regardless of the compiler.  However, if gdb is used with code build using g++, then the <code>p</code> command behaves correctly.  Yet when gdb is run on code built using clang++, I get:</p>\n\n<pre><code>(gdb) print f.operator bool()\nCouldn't find method Foo::operatorbool\n(gdb) \n</code></pre>\n\n<p>I'm running clang v. 3.4, gcc v. 4.8.4 on Ubuntu 14.04.</p>\n\n<p>In fact, a quick search revealed this: <a href=\"https://stackoverflow.com/questions/21132194/is-it-possible-to-debug-a-gcc-compiled-program-using-lldb-or-debug-a-clang-comp\">Is it possible to debug a gcc-compiled program using lldb, or debug a clang-compiled program using gdb?</a>.  So, I tried <code>lldb</code>, and it worked as expected.  This is consistent with the comment that was added as I was investigating.</p>\n"}], "owner": {"reputation": 3196, "user_id": 1098524, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c997b206ec650551574f4bf4f50c79ff?s=128&d=identicon&r=PG", "display_name": "owagh", "link": "https://stackoverflow.com/users/1098524/owagh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 34782255, "answer_count": 1, "score": 3, "last_activity_date": 1452749589, "creation_date": 1452720066, "last_edit_date": 1452720841, "question_id": 34777236, "link": "https://stackoverflow.com/questions/34777236/what-is-the-difference-between-object-operator-bool-and-bool-object", "title": "What is the difference between object.operator bool() and (bool) object?", "body": "<p>I have a class for which I have overloaded the operator bool explicitly like this :-</p>\n\n<pre><code>class Foo {\n  explicit operator bool() {\n    // return_something_here\n  }\n};\n</code></pre>\n\n<p>However, when I run the following two in gdb I get :-</p>\n\n<pre><code>gdb) p fooobj.operator bool()\n$7 = true\ngdb) p (bool)(fooobj)\n$8 = false\n</code></pre>\n\n<p>What's the difference between the two invocations and why do they return different things?</p>\n\n<p>Edit :- I'm using the clang compiler.</p>\n\n<p>Note :- The second value (false) is the correct value that I want to be returned using the first syntax. I'm using a codegen so I don't have complete control over what c++ gets generated in case anyone is curious why I don't just use the second syntax.</p>\n\n<p>Even in that case, the difference between the two would still be an unanswered question.</p>\n"}, {"tags": ["c++", "c++11", "enumeration"], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "edited": false, "score": 0, "creation_date": 1452722696, "post_id": 34777854, "comment_id": 57300900, "body": "that was a great answer!! Thanks, The reason I need to have the valueOf (const int&amp; rValue) method is to deserialize these enum like classes from bytes sent over the wire, these are part of a higher level structure (who&#39;s field is actually the Value type (in this case a uint8_t) right now though the sizeof (DiscreteStatus) and sizeof (MessageStatus) which should be 1 are not as there is an embedded string field which I am trying to remove, great answer my friend"}], "tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": true, "score": 4, "last_activity_date": 1452722221, "creation_date": 1452722221, "answer_id": 34777854, "question_id": 34777054, "link": "https://stackoverflow.com/questions/34777054/c-java-like-enum-header-compiler-error/34777854#34777854", "title": "C++ Java like enum header compiler error", "body": "<p>In both cases, the intention is to call the type-conversion operator in order to perform a conversion to the corresponding <code>Value</code> type.</p>\n\n<p>In the first case, you have <code>Value</code> defined like this:</p>\n\n<blockquote>\n<pre><code>enum class Value : uint8_t\n</code></pre>\n</blockquote>\n\n<p>This does not work like public inheritance but is more similar to private inheritance: it's an <strong>implemented-in-terms-of relationship</strong>. Client code must not and in your case cannot rely on the fact that <code>Value</code> is internally implemented as a <code>uint8_t</code>.</p>\n\n<p>In the second case, however, it's as follows:</p>\n\n<blockquote>\n<pre><code>enum Value : uint8_t\n</code></pre>\n</blockquote>\n\n<p>This can be pictured as something like public inheritance, meaning that client code can rely and depend on the fact that <code>Value</code> is really an <code>uint8_t</code>. The type conversion thus works.</p>\n\n<p>Now, you could quick-fix your code by changing the first definition to <code>enum Value : uint8_t</code>, but one has to wonder why you want to provide a <code>valueOf</code> function with an integer argument anyway. It breaks the abstraction.</p>\n\n<hr>\n\n<p>Generally, I strongly advise against this whole approach. It seems overly complicated, as is always the case when one attempts to write language A in language B.</p>\n\n<p>In this particular case, any similarities between Java enums and C++11 enum classes are only superficial. At the end of the day, from a C++ perspective, Java enums are non-copyable classes with static constant pointers to garbage-collected instances which cannot be dereferenced. You do not want to emulate all of this in C++, nor can you, nor should you.</p>\n"}], "owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 34777854, "answer_count": 1, "score": 0, "last_activity_date": 1452722221, "creation_date": 1452719370, "last_edit_date": 1452720055, "question_id": 34777054, "link": "https://stackoverflow.com/questions/34777054/c-java-like-enum-header-compiler-error", "title": "C++ Java like enum header compiler error", "body": "<p>Could someone help with the following compiler error?  I am trying to create a Java like enums in C++ and I am getting compiler errors in Visual Studio 2015.</p>\n\n<p>I am using these Java like Enum classes as members of a struct and I would like the sizeof(MessageType) to be the same as the Value type.  I know that this will require that I remove the mValueStr member from the class, however then I will not be able to look up the value from a string.  Any suggestions on how I might be able to achieve that would be greatly appreciated.</p>\n\n<p>One of the really neat things in the Java Enums is the ability to look up the enum type using the String name or value.  To that end I added 2 methods to my enum classes to reverse look up the enums from these strings or values.  Unfortunately the method below has the squiggly lines indicated</p>\n\n<pre><code>static MessageType valueOf(const int&amp; rVal) {\n    for (const auto&amp; next : getValues()) {\n        if (next == rVal) {\n                 ~~\n            return next;\n        }\n    }\n    throw std::invalid_argument(\n        \"Illegal Argument: \" + rVal);\n}\n</code></pre>\n\n<p>and the compiler complains as follows and I cannot quite figure it out:</p>\n\n<pre><code>1&gt;c:\\main\\dlmu\\caclient\\udpclient\\cmc.h(123): error C2678: binary '==': no operator found which takes a left-hand operand of type 'const MessageType' (or there is no acceptable conversion)\n1&gt;  c:\\main\\dlmu\\caclient\\udpclient\\cmc.h(123): note: could be 'built-in C++ operator==(MessageType::Value, int)'\n1&gt;  c:\\main\\dlmu\\caclient\\udpclient\\cmc.h(123): note: while trying to match the argument list '(const MessageType, const int)'\n1&gt;  UDPClient.cpp\n1&gt;c:\\main\\dlmu\\caclient\\udpclient\\cmc.h(123): error C2678: binary '==': no operator found which takes a left-hand operand of type 'const MessageType' (or there is no acceptable conversion)\n1&gt;  c:\\program files (x86)\\windows kits\\8.1\\include\\shared\\guiddef.h(192): note: could be 'bool operator ==(const GUID &amp;,const GUID &amp;)'\n1&gt;  c:\\main\\dlmu\\caclient\\udpclient\\cmc.h(123): note: while trying to match the argument list '(const MessageType, const int)'\n</code></pre>\n\n<p>The key to getting this type of functionality working is to use the integral cast operator to a Value type (which in this case is an e bit enum value)</p>\n\n<pre><code>class MessageType {\npublic:\n    enum class Value : uint8_t {\n        undefined = 0, membersystem = 10\n    };\n    static const MessageType Undefined, MemberSystem;\n    // integral operator cast for switch statements (cast to named enum)\n    inline operator const Value() const {\n        return mValue;\n    }\n    // strict weak ordering for set ops\n    inline bool operator&lt;(const MessageType&amp; rhs) const {\n        return mValue &lt; rhs.mValue;\n    }\n    // serialized version of the enum\n    inline std::string getStringVal() const {\n        return mStringVal;\n    }\n    static const std::set&lt;MessageType&gt;&amp; getValues() {\n        static std::set&lt;MessageType&gt; gValues;\n        if (gValues.empty()) {\n            gValues.insert(Undefined);\n            gValues.insert(MemberSystem);\n        }\n        return gValues;\n    }\n    static MessageType valueOf(const int&amp; rVal) {\n        for (const auto&amp; next : getValues()) {\n            if (next == rVal) {\n                return next;\n            }\n        }\n        throw std::invalid_argument(\n            \"Illegal Argument: \" + rVal);\n    }\n    static MessageType valueOf(const std::string&amp; rStringVal) {\n        for (const auto&amp; next : getValues()) {\n            if (next.getStringVal() == rStringVal) {\n                return next;\n            }\n        }\n        throw std::invalid_argument(\n            \"Illegal Argument: \" + rStringVal);\n    }\nprivate:\n    MessageType(const Value&amp; rValue, const std::string&amp; rStringVal)\n        : mValue(rValue)\n        , mStringVal(rStringVal)\n    {}\n\n    Value mValue;\n    std::string mStringVal;\n};\n</code></pre>\n\n<p>The really strange thing is that right before this definition I have a similar class that works fine without squiggly lines as follows:</p>\n\n<pre><code>class DiscreteStatus {\npublic:\n    enum Value : uint8_t {\n        normaloperation = 0, nocomputeddata = 1, functionaltest = 2, failurewarning = 3\n    };\n    static const DiscreteStatus NormalOperation, NoComputedData, FunctionalTest, FailureWarning;\n    // integral operator cast for switch statements (cast to named enum)\n    inline operator const Value() const {\n        return mValue;\n    }\n    // strict weak ordering for set ops\n    inline bool operator&lt;(const DiscreteStatus&amp; rhs) const {\n        return mValue &lt; rhs.mValue;\n    }\n    // serialized version of the enum\n    inline std::string getStringVal() const {\n        return mStringVal;\n    }\n    static const std::set&lt;DiscreteStatus&gt;&amp; getValues() {\n        static std::set&lt;DiscreteStatus&gt; gValues;\n        if (gValues.empty()) {\n            gValues.insert(NormalOperation);\n            gValues.insert(NoComputedData);\n            gValues.insert(FunctionalTest);\n            gValues.insert(FailureWarning);\n        }\n        return gValues;\n    }\n    static DiscreteStatus valueOf(const int&amp; rVal) {\n        for (const auto&amp; next : getValues()) {\n            if (next == rVal) {\n                return next;\n            }\n        }\n        throw std::invalid_argument(\n            \"Illegal Argument: \" + rVal);\n    }\n    static DiscreteStatus valueOf(const std::string&amp; rStringVal) {\n        for (const auto&amp; next : getValues()) {\n            if (next.getStringVal() == rStringVal) {\n                return next;\n            }\n        }\n        throw std::invalid_argument(\n            \"Illegal Argument: \" + rStringVal);\n    }\nprivate:\n    DiscreteStatus(const Value&amp; rValue, const std::string&amp; rStringVal)\n        : mValue(rValue)\n        , mStringVal(rStringVal)\n    {}\n\n    Value mValue;\n    std::string mStringVal;\n};\n</code></pre>\n\n<p>The implementation file (CPP) performs the static initialization as follows:</p>\n\n<pre><code>const DiscreteStatus DiscreteStatus::NormalOperation(DiscreteStatus::Value::normaloperation, \"NML\");\nconst DiscreteStatus DiscreteStatus::NoComputedData(DiscreteStatus::Value::nocomputeddata, \"NCD\");\nconst DiscreteStatus DiscreteStatus::FunctionalTest(DiscreteStatus::Value::functionaltest, \"FT\");\nconst DiscreteStatus DiscreteStatus::FailureWarning(DiscreteStatus::Value::failurewarning, \"FW\");\n\nconst MessageType MessageType::Undefined(MessageType::Value::undefined, \"Undefined\");\nconst MessageType MessageType::MemberSystem(MessageType::Value::membersystem, \"MemberSystem\");\n</code></pre>\n"}, {"tags": ["c++", "usb"], "answers": [{"tags": [], "owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "is_accepted": false, "score": 1, "last_activity_date": 1606406647, "creation_date": 1606406647, "answer_id": 65025498, "question_id": 34777039, "link": "https://stackoverflow.com/questions/34777039/communicating-with-a-blackstar-id-core-guitar-amplifier-through-its-usb-entrance/65025498#65025498", "title": "Communicating with a Blackstar ID Core Guitar Amplifier through its USB Entrance and C++", "body": "<p>I feel your pain regarding Blackstar's awful Insider software.</p>\n<p>To answer your question, is this project even possible, of course it is, the Insider software obviously is able to control the amp via USB. You just have to figure out what its protocol is.</p>\n<p>You can use a USB sniffer like <a href=\"https://www.virtual-serial-port.org/products/usb-sniffer/\" rel=\"nofollow noreferrer\">this one</a> to see what commands Insider sends to the amp when you perform actions. With enough experimentation you should be able to reverse-engineer the protocol.</p>\n<p>It's probably easier than you think. As evidence I offer the Insider software itself, which is not very sophisticated. The settings are probably modeled more or less as a struct.</p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 3909240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8270ad41a3d10556b48553b60c9ad83?s=128&d=identicon&r=PG", "display_name": "Rohitt Vashishtha", "link": "https://stackoverflow.com/users/3909240/rohitt-vashishtha"}, "is_accepted": true, "score": 1, "last_activity_date": 1612870915, "creation_date": 1612870915, "answer_id": 66118313, "question_id": 34777039, "link": "https://stackoverflow.com/questions/34777039/communicating-with-a-blackstar-id-core-guitar-amplifier-through-its-usb-entrance/66118313#66118313", "title": "Communicating with a Blackstar ID Core Guitar Amplifier through its USB Entrance and C++", "body": "<p>This existing project is likely to help provide clues for you to reverse engineer what Insider does and rewrite that in C++.</p>\n<p><a href=\"https://github.com/jonathanunderwood/outsider\" rel=\"nofollow noreferrer\">https://github.com/jonathanunderwood/outsider</a></p>\n"}], "owner": {"reputation": 135, "user_id": 5786544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf4fafe56ad0c8b913995c3e8c0b6ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Denolth", "link": "https://stackoverflow.com/users/5786544/denolth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 66118313, "answer_count": 2, "score": 3, "last_activity_date": 1612870915, "creation_date": 1452719320, "question_id": 34777039, "link": "https://stackoverflow.com/questions/34777039/communicating-with-a-blackstar-id-core-guitar-amplifier-through-its-usb-entrance", "title": "Communicating with a Blackstar ID Core Guitar Amplifier through its USB Entrance and C++", "body": "<p>I currently own a Blackstar ID Core 10w Amp. It has a lot of built in guitar effects such as Reverb, Delay and Modulation, all of which have various depths and levels. By connecting a USB cable from the amp to my computer, I'm able to use Blackstar's Insider software, which allows me to save these effects settings and switch to any of them with just a double click. However, the need for a double click makes it impossible for you to play your guitar and change effects during a song (which is what a pedal does).</p>\n\n<p>However, I wanted to know if it's possible to use C++ to do something more ambitious than the manufacturer allows: I wanted to create a software that would play a backing track (voice+drums but no guitar) of a song and allow the user to set where during that song he wants his effects changed, and to what. This way, one would be able to play a song from start to end, not needing to worry about having to change effects.</p>\n\n<p>This would also be a school project, so it can't really be a \"mouse manager\" or anything of this sort. It would need to be something more robust.</p>\n\n<p>FYI, as far as I'm concerned, Blackstar does not give us any API we could work with. So I'd like to know if this project is even possible and, if so, where I should start.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "lnk2005"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1452719120, "post_id": 34776970, "comment_id": 57299178, "body": "Did you define the destructor in the header file perhaps?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1452721324, "post_id": 34776970, "comment_id": 57300246, "body": "What&#39;s this <code>&quot;memdc.h&quot;</code>? Is it defining <i>another</i> CMemDC class?"}, {"owner": {"reputation": 49, "user_id": 5239848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-9DGLshy5rRc/AAAAAAAAAAI/AAAAAAAAAAA/kxCCCDJiNFs/photo.jpg?sz=128", "display_name": "scubieman", "link": "https://stackoverflow.com/users/5239848/scubieman"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452722334, "post_id": 34776970, "comment_id": 57300716, "body": "@NathanOliver I added the header above. I&#39;m better with c+ and not c++"}, {"owner": {"reputation": 49, "user_id": 5239848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-9DGLshy5rRc/AAAAAAAAAAI/AAAAAAAAAAA/kxCCCDJiNFs/photo.jpg?sz=128", "display_name": "scubieman", "link": "https://stackoverflow.com/users/5239848/scubieman"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1452722378, "post_id": 34776970, "comment_id": 57300748, "body": "@BoPersson when I comment out that file I get a lot of errors with &quot;Error C2065: &#39;CMemDC&#39; : undeclared identifier&quot;"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452729842, "post_id": 34776970, "comment_id": 57303823, "body": "What is the C+ language?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1452758310, "post_id": 34776970, "comment_id": 57312621, "body": "The source looks really old (<code>_MSC_VER &gt; 1000</code> and the odd include guards), like VC6 or worse. What version of the compiler do you use now?"}, {"owner": {"reputation": 49, "user_id": 5239848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-9DGLshy5rRc/AAAAAAAAAAI/AAAAAAAAAAA/kxCCCDJiNFs/photo.jpg?sz=128", "display_name": "scubieman", "link": "https://stackoverflow.com/users/5239848/scubieman"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452776746, "post_id": 34776970, "comment_id": 57323881, "body": "@ThomasMatthews c++ , I didnt write this I&#39;m just updating it."}, {"owner": {"reputation": 49, "user_id": 5239848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-9DGLshy5rRc/AAAAAAAAAAI/AAAAAAAAAAA/kxCCCDJiNFs/photo.jpg?sz=128", "display_name": "scubieman", "link": "https://stackoverflow.com/users/5239848/scubieman"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1452776795, "post_id": 34776970, "comment_id": 57323921, "body": "@BoPersson I will need to look. I am not the original programmer for this. Yes it was written a long time ago!"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5239848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-9DGLshy5rRc/AAAAAAAAAAI/AAAAAAAAAAA/kxCCCDJiNFs/photo.jpg?sz=128", "display_name": "scubieman", "link": "https://stackoverflow.com/users/5239848/scubieman"}, "edited": false, "score": 0, "creation_date": 1452783956, "post_id": 34780115, "comment_id": 57329075, "body": "I did not see where the class CMemDC is called or included/linked. I do show a header MEMDC.H with class of CMemDC. This should be right?"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1452734390, "creation_date": 1452734390, "answer_id": 34780115, "question_id": 34776970, "link": "https://stackoverflow.com/questions/34776970/error-lnk2005-already-defined-in-skinheaderctrl-obj/34780115#34780115", "title": "error LNK2005: &quot;already defined in SkinHeaderCtrl.obj&quot;", "body": "<p><code>CMemDC</code> is an internal helper class in MFC (see <a href=\"https://msdn.microsoft.com/en-us/vstudio/cc714512%28v=vs.115%29\" rel=\"nofollow\">Internal Classes</a>).  You've apparently defined your own <code>CMemDC</code> class, with the result that the linker is seeing two destructors with the same name.  You'll either have to rename your class to something else or put it in a namespace to avoid the conflict.</p>\n"}], "owner": {"reputation": 49, "user_id": 5239848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-9DGLshy5rRc/AAAAAAAAAAI/AAAAAAAAAAA/kxCCCDJiNFs/photo.jpg?sz=128", "display_name": "scubieman", "link": "https://stackoverflow.com/users/5239848/scubieman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1114, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1452778377, "creation_date": 1452719030, "last_edit_date": 1452778377, "question_id": 34776970, "link": "https://stackoverflow.com/questions/34776970/error-lnk2005-already-defined-in-skinheaderctrl-obj", "title": "error LNK2005: &quot;already defined in SkinHeaderCtrl.obj&quot;", "body": "<p>I am Getting this error \"Error  2   error LNK2005: \"public: virtual __thiscall CMemDC::~CMemDC(void)\" (??1CMemDC@@UAE@XZ) already defined in SkinHeaderCtrl.obj C:\\Users\\anthonyd\\Desktop\\ASPX\\STP\\nafxcwd.lib(afxglobals.obj)  STP\n\"</p>\n\n<p>I have read through many similar questions but can not find what fits. Could someone help please?</p>\n\n<pre><code>   // SkinHeaderCtrl.cpp : implementation file\n//\n\n#include \"stdafx.h\"\n#include \"STP.h\"\n#include \"SkinHeaderCtrl.h\"\n#include \"memdc.h\"\n\n#ifdef _DEBUG\n#define new DEBUG_NEW\n#undef THIS_FILE\nstatic char THIS_FILE[] = __FILE__;\n#endif\n\n#define BACKGROUND RGB(218,218,218)// was 218,218,218\n#define HEIGHT 16\n/////////////////////////////////////////////////////////////////////////////\n// CSkinHeaderCtrl\n\nCSkinHeaderCtrl::CSkinHeaderCtrl()\n{\n}\n\nCSkinHeaderCtrl::~CSkinHeaderCtrl()\n{\n}\n\n\nBEGIN_MESSAGE_MAP(CSkinHeaderCtrl, CHeaderCtrl)\n    //{{AFX_MSG_MAP(CSkinHeaderCtrl)\n    ON_WM_PAINT()\n    ON_WM_ERASEBKGND()\n    //}}AFX_MSG_MAP\nEND_MESSAGE_MAP()\n\n/////////////////////////////////////////////////////////////////////////////\n// CSkinHeaderCtrl message handlers\n\nvoid CSkinHeaderCtrl::DrawItem(LPDRAWITEMSTRUCT lpDrawItemStruct)\n{\n\n}\n\nvoid CSkinHeaderCtrl::OnPaint() \n{\n    CPaintDC dc(this); // device context for painting\n\n    CRect rect, rectItem, clientRect;\n    GetClientRect(&amp;rect);\n    GetClientRect(&amp;clientRect);\n    CMemDC memDC(&amp;dc, rect);\n    CDC bitmapDC;\n    bitmapDC.CreateCompatibleDC(&amp;dc);\n\n//  memDC.FillSolidRect(&amp;rect, RGB(76,85,118));\n    memDC.FillSolidRect(&amp;rect, BACKGROUND);\n\n    CBitmap bitmapSpan;\n    bitmapSpan.LoadBitmap(IDB_COLUMNHEADER_SPAN);\n    CBitmap* pOldBitmapSpan = bitmapDC.SelectObject(&amp;bitmapSpan);\n\n//  memDC.StretchBlt(rect.left+2, 0, rect.Width(), 12, &amp;bitmapDC, 0, 0, 1, 12, SRCCOPY);\n    memDC.StretchBlt(rect.left+2, 0, rect.Width(), HEIGHT, &amp;bitmapDC, 0, 0, 1, 12, SRCCOPY);\n\n    bitmapDC.SelectObject(pOldBitmapSpan);\n    bitmapSpan.DeleteObject();\n\n    int nItems = GetItemCount();\n\n    CBitmap bitmap;\n    CBitmap bitmap2;\n    CBitmap bitmap3;\n</code></pre>\n\n<p>Here is the skinheaderctrl.h</p>\n\n<pre><code>#if !defined(AFX_SKINHEADERCTRL_H__8B0847B1_B4E6_4372_A62D_038582FFEA5C__INCLUDED_)\n#define AFX_SKINHEADERCTRL_H__8B0847B1_B4E6_4372_A62D_038582FFEA5C__INCLUDED_\n\n#if _MSC_VER &gt; 1000\n#pragma once\n#endif // _MSC_VER &gt; 1000\n// SkinHeaderCtrl.h : header file\n//\n\n\n/////////////////////////////////////////////////////////////////////////////\n// CSkinHeaderCtrl window\n\nclass CSkinHeaderCtrl : public CHeaderCtrl\n{\n// Construction\npublic:\n    CSkinHeaderCtrl();\n\n// Attributes\npublic:\n\n// Operations\npublic:\n\n// Overrides\n    // ClassWizard generated virtual function overrides\n    //{{AFX_VIRTUAL(CSkinHeaderCtrl)\n    //}}AFX_VIRTUAL\n\n// Implementation\npublic:\n    virtual void DrawItem(LPDRAWITEMSTRUCT lpDrawItemStruct);\n    virtual ~CSkinHeaderCtrl();\n\n    // Generated message map functions\nprotected:\n    //{{AFX_MSG(CSkinHeaderCtrl)\n    afx_msg void OnPaint();\n    afx_msg BOOL OnEraseBkgnd(CDC* pDC);\n    //}}AFX_MSG\n\n    DECLARE_MESSAGE_MAP()\n};\n\n/////////////////////////////////////////////////////////////////////////////\n\n//{{AFX_INSERT_LOCATION}}\n// Microsoft Visual C++ will insert additional declarations immediately before the previous line.\n\n#endif // !defined(AFX_SKINHEADERCTRL_H__8B0847B1_B4E6_4372_A62D_038582FFEA5C__INCLUDED_)\n</code></pre>\n\n<p><strong><em>Update</em></strong> </p>\n\n<p>On the skinheaderctrl.cpp I have a includes #include \"memdc.h\" do I want to update this to CMemDC?</p>\n"}, {"tags": ["c++", "datetime"], "comments": [{"owner": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1452719169, "post_id": 34776894, "comment_id": 57299200, "body": "edited with a proper question"}], "answers": [{"comments": [{"owner": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452757774, "post_id": 34777346, "comment_id": 57312335, "body": "From what I read, the spec of std::tm doesn&#39;t say if it is UTC."}, {"owner": {"reputation": 308, "user_id": 5692818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1efd91afb43891b8c162bac123b826bb?s=128&d=identicon&r=PG&f=1", "display_name": "SKZ 81", "link": "https://stackoverflow.com/users/5692818/skz-81"}, "reply_to_user": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452798576, "post_id": 34777346, "comment_id": 57338591, "body": "Indeed, that&#39;s why <code>tm_zone</code> was introduced by glibc to allow discrimination. I didn&#39;t check, but i guess it will be filled accordingly, depending if you use <code>localtime()</code> or <code>gmtime()</code> to get your std::tm object."}, {"owner": {"reputation": 308, "user_id": 5692818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1efd91afb43891b8c162bac123b826bb?s=128&d=identicon&r=PG&f=1", "display_name": "SKZ 81", "link": "https://stackoverflow.com/users/5692818/skz-81"}, "reply_to_user": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452800650, "post_id": 34777346, "comment_id": 57339749, "body": "Hummm sorry i didn&#39;t noticed <code>system_clock</code> is available in C++11 only.  But it seems you do C++11 since you try to build a time_point !! Anyway, for C++98, <code>std::time_t now = std::time(NULL); std::tm *t = std::gmtime(&amp;now);</code> will do the job, it returns current UTC date. <b>WARNING</b>  <code>std::gmtime( 0 )</code> returns a NULL pointer."}, {"owner": {"reputation": 308, "user_id": 5692818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1efd91afb43891b8c162bac123b826bb?s=128&d=identicon&r=PG&f=1", "display_name": "SKZ 81", "link": "https://stackoverflow.com/users/5692818/skz-81"}, "reply_to_user": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452800674, "post_id": 34777346, "comment_id": 57339761, "body": "please consider accepting the answer if it helps :)"}, {"owner": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452811431, "post_id": 34777346, "comment_id": 57345578, "body": "+1 for the warning, you may also integrate your previous comment to your answer as gmtime() is part of the solution."}], "tags": [], "owner": {"reputation": 308, "user_id": 5692818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1efd91afb43891b8c162bac123b826bb?s=128&d=identicon&r=PG&f=1", "display_name": "SKZ 81", "link": "https://stackoverflow.com/users/5692818/skz-81"}, "is_accepted": true, "score": 0, "last_activity_date": 1452721026, "last_edit_date": 1495540348, "creation_date": 1452720468, "answer_id": 34777346, "question_id": 34776894, "link": "https://stackoverflow.com/questions/34776894/build-parse-utc-date-using-standard-library/34777346#34777346", "title": "Build/parse UTC date using standard library", "body": "<p>Better use <code>std::tm</code>... As it is standard.</p>\n\n<p>Don't worry about tm_zone. It's an optional field, only available in some environment like Linux/GNU or freeBSD... (actually, it comes with glibc, as you pointed out).</p>\n\n<p>It as, nevertheless <strong>NO</strong> functionnal effect. \nA program using it should have a <code>#ifndef</code> or <code>#ifdef</code> directive to embed the statement, allowing compilation on systems without the field defined in the structure.</p>\n\n<p>To answer your last question... Unsure of your your needs, but a starting point can be :</p>\n\n<p><code>system_clock::time_point tp = system_clock::now();</code></p>\n\n<p>as found here :</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/chrono/time_point/time_since_epoch/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/chrono/time_point/time_since_epoch/</a></p>\n\n<p>Hope it helps,</p>\n\n<p><strong>PS</strong> : throw an eye on this : <a href=\"https://stackoverflow.com/questions/31552193/difference-between-steady-clock-vs-system-clock\">Difference between steady_clock vs system_clock?</a></p>\n"}, {"comments": [{"owner": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452875045, "post_id": 34801521, "comment_id": 57373050, "body": "Correct me if I am wrong, but I see : <code>using day_point = std::chrono::time_point&lt;std::chrono::system_clock, days&gt;;</code> which <code>counts the days since (or before) jan&#47;1&#47;1970</code>, however, c++ specification gives no assurance that the origin is actually 1 jan 1970."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452875817, "post_id": 34801521, "comment_id": 57373491, "body": "@pixelou:  You are exactly correct.  This is a de facto standard, not an official one.  Therefore the onus is on my date.h library to make sure it takes the correct epoch into account everywhere it is ported to.  So far, everywhere it has been ported, <code>std::chrono::system_clock</code> is measuring Unix Time (<a href=\"https://en.wikipedia.org/wiki/Unix_time\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Unix_time</a>).  I have a long track record of writing non-portable code so that others don&#39;t have to. ;-)"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452876949, "post_id": 34801521, "comment_id": 57374167, "body": "Here is a record of my low-level study on the issue of <code>system_clock</code> epochs.  It contains code you can run yourself, on any platform supporting <code>system_clock</code> which will either confirm or refute the use of New Years 1970 UTC for that platform.  <a href=\"http://howardhinnant.github.io/date_algorithms.html#How%20can%20I%20confirm%20that%20your%20assertions%20about%20&lt;code&gt;chrono&lt;/code&gt;%20compatibility%20are%20correct\" rel=\"nofollow noreferrer\">howardhinnant.github.io/&hellip;</a>?  This paper also describes the major low-level algorithms used in date.h."}, {"owner": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452884103, "post_id": 34801521, "comment_id": 57377900, "body": "Thank you for the clarification. More than its obvious usefulness, your library is truly a nice demonstration of c++ coding. I&#39;m still accepting the first answer as it still solves the problem with the (rather poorly furnished) standard library, but out of curiosity, have you considered submitting your work for standardization?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452887719, "post_id": 34801521, "comment_id": 57379862, "body": "I am considering, but have not done so at this time.  I&#39;m waiting for enough people like you to make enough noise in asking/demanding that this is what they want in the standard.  Without a grassroots groundswell of support, the committee won&#39;t accept this solution.  Every proposal in this space will be <i>very</i> controversial.  <code>&lt;chrono&gt;</code> itself was almost too controversial to get into C++11."}, {"owner": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "edited": false, "score": 0, "creation_date": 1452946953, "post_id": 34801521, "comment_id": 57395509, "body": "I will try to spread the word ;-) and wish you all the best for your work. I will upvote as soon as I earn enough badges..."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 2, "last_activity_date": 1463860814, "last_edit_date": 1463860814, "creation_date": 1452813072, "answer_id": 34801521, "question_id": 34776894, "link": "https://stackoverflow.com/questions/34776894/build-parse-utc-date-using-standard-library/34801521#34801521", "title": "Build/parse UTC date using standard library", "body": "<blockquote>\n  <p>How can I build a <code>std::chrono::system_clock::time_point</code> from the UTC date?</p>\n</blockquote>\n\n<p>Just for this part of it, <a href=\"http://howardhinnant.github.io/date/date.html\" rel=\"nofollow\">here</a> is a header-only high-performance C++11/14 modern solution.  It can be used like this:</p>\n\n<pre><code>int y = 2016;\nint m = 1;\nint d = 14;\nint h = 18;\nint min = 2;\nint sec = 15;\nstd::chrono::system_clock::time_point tp = \n    date::sys_days{date::year{y}/m/d} +\n    std::chrono::hours{h} +\n    std::chrono::minutes{m} +\n    std::chrono::seconds{sec};\n</code></pre>\n\n<p>This is an open source, free library on <a href=\"https://github.com/HowardHinnant/date\" rel=\"nofollow\">github</a>.  Here is a <a href=\"https://www.youtube.com/watch?v=tzyGjOm8AKo\" rel=\"nofollow\">video presentation</a> of the library.  This library is portable to all recent implementations of C++11 and C++14 (including VS2013 and VS2015).  It offers a better interface than <code>tm</code> inherited from C, and a greater range of validity.  It also offers higher performance, and a great deal of compile-time abilities in C++14.  It is designed to be a simple extension of <code>&lt;chrono&gt;</code>, and is thus fully interoperable with <code>&lt;chrono&gt;</code>.</p>\n\n<p>For parsing, use <a href=\"http://howardhinnant.github.io/date/tz.html#parse\" rel=\"nofollow\">tz.h</a>:</p>\n\n<blockquote>\n  <p>01/01/1970 00:00:00 UTC</p>\n</blockquote>\n\n<pre><code>#include \"tz.h\"\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nint\nmain()\n{\n    std::istringstream in{\"01/01/1970 00:00:00 UTC\"};\n    date::sys_seconds tp;\n    date::parse(in, \"%d/%m/%Y %T %Z\", tp);\n    using namespace date;\n    if (!in.fail())\n        std::cout &lt;&lt; tp &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>In the above code, <code>sys_seconds</code> is a <code>std::chrono::time_point&lt;system_clock, seconds&gt;</code>.</p>\n\n<blockquote>\n  <p>01/01/1970 00:00:00 +0000</p>\n</blockquote>\n\n<p>Change <code>%Z</code> to <code>%z</code>above.</p>\n\n<blockquote>\n  <p>01/01/1970 00:00:00</p>\n</blockquote>\n\n<p>Remove the <code>%Z/%z</code>.</p>\n\n<blockquote>\n  <ul>\n  <li>avoid external libraries if possible</li>\n  </ul>\n</blockquote>\n\n<p>Sorry, but otherwise you have to:</p>\n\n<blockquote>\n  <ul>\n  <li>messing around with std::tm directly,...</li>\n  </ul>\n</blockquote>\n\n<p>This library allows you to parse both <code>%z</code> and <code>%Z</code>.  You can throw away the abbreviation, or discover it, and try to figure out what it means (in general the abbreviation is ambiguous).  With <code>%z</code> the offset will alter the parsed value to give you UTC:</p>\n\n<pre><code>std::istringstream in{\"01/01/1970 00:00:00 +0500\"};\ndate::sys_seconds tp;\ndate::parse(in, \"%d/%m/%Y %T %z\", tp);\nusing namespace date;\nif (!in.fail())\n    std::cout &lt;&lt; tp &lt;&lt; '\\n';\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1969-12-31 19:00:00\n</code></pre>\n\n<p>If you would rather get the local time, that is easy too:</p>\n\n<pre><code>std::istringstream in{\"01/01/1970 00:00:00 +0500\"};\ndate::local_seconds tp;\ndate::parse(in, \"%d/%m/%Y %T %z\", tp);\nusing namespace date;\nif (!in.fail())\n    std::cout &lt;&lt; tp &lt;&lt; '\\n';\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1970-01-01 00:00:00\n</code></pre>\n\n<p><code>local_seconds</code> is a <code>std::chrono::time_point</code>, but based on a \"clock\" which has no <code>now()</code>.</p>\n"}], "owner": {"reputation": 526, "user_id": 5786475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ec17a610f3289e4f3234bc0c0ff559?s=128&d=identicon&r=PG&f=1", "display_name": "pixelou", "link": "https://stackoverflow.com/users/5786475/pixelou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "accepted_answer_id": 34777346, "answer_count": 2, "score": 3, "last_activity_date": 1463860814, "creation_date": 1452718728, "last_edit_date": 1495540738, "question_id": 34776894, "link": "https://stackoverflow.com/questions/34776894/build-parse-utc-date-using-standard-library", "title": "Build/parse UTC date using standard library", "body": "<p>I'm having troubles building a <strong>UTC</strong> date in c++ using the standard library.\nFor example (any is fine): </p>\n\n<ul>\n<li>building from separate variables containing day month year...</li>\n</ul>\n\n<p>or parsing </p>\n\n<ul>\n<li><blockquote>\n  <p>01/01/1970 00:00:00 UTC</p>\n</blockquote></li>\n<li><blockquote>\n  <p>01/01/1970 00:00:00 +0000</p>\n</blockquote></li>\n<li><blockquote>\n  <p>01/01/1970 00:00:00 # (implicitely in UTC)</p>\n</blockquote></li>\n</ul>\n\n<p>Conditions:</p>\n\n<ul>\n<li>The timezone string does not need to be interpreted but I need to be sure the date is interpreted as UTC. </li>\n<li>the date is always correctly formated</li>\n<li>any formatting is accepted as long as it does the job</li>\n<li>should be portable (UNIX variants and Windows)</li>\n<li>avoid external libraries if possible</li>\n</ul>\n\n<p>The best candidates so far are:</p>\n\n<ul>\n<li><code>std::time_get</code> but specification doesn't say anything about the timezone (for what I understood of it :-) ).</li>\n<li>boost's <code>date_time</code>, but its a pretty heavy dependency (mentioned in <a href=\"https://stackoverflow.com/questions/3547510/c-library-unix-to-parse-date-time-string-including-timezones\">C++ library (unix) to parse date/time string Including timezones</a>, but the answer predates C++11)</li>\n<li>unix <code>strptime</code> is not portable on windows</li>\n<li>messing around with <code>std::tm</code> directly, but on my system (glibc), it has non-standard undocumented fields (namely tm_zone ...). I suppose I could initialize it with <code>gmtime(0)</code> then modify the days, month, year fields.</li>\n</ul>\n\n<p>How can I build an <code>std::chrono::time_point::time_point</code> from the UTC date?</p>\n"}, {"tags": ["c++", "caching", "recursion", "vector", "fibonacci"], "comments": [{"owner": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "edited": false, "score": 0, "creation_date": 1452718320, "post_id": 34776753, "comment_id": 57298790, "body": "This doesn&#39;t compile. You&#39;re trying to access memory in which you don&#39;t have access to."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452718358, "post_id": 34776753, "comment_id": 57298818, "body": "When will <code>cache[n]</code> ever be 0 when you start with 1?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "edited": false, "score": 1, "creation_date": 1452718366, "post_id": 34776753, "comment_id": 57298826, "body": "@TarikNeaj, <a href=\"http://coliru.stacked-crooked.com/a/1b414ac0c96aec67\" rel=\"nofollow noreferrer\">It compiles.</a>"}, {"owner": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "edited": false, "score": 0, "creation_date": 1452718405, "post_id": 34776753, "comment_id": 57298845, "body": "Doesn&#39;t for me for some reason. Using Visual studio 2013."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1452718416, "post_id": 34776753, "comment_id": 57298853, "body": "@OP, you likely want a <code>std::unordered_map</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "edited": false, "score": 0, "creation_date": 1452718432, "post_id": 34776753, "comment_id": 57298856, "body": "@TarikNeaj Compiles on MSVS 2015 and g++"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1452718440, "post_id": 34776753, "comment_id": 57298861, "body": "you also recursve infinitely, since you never check if <code>n</code> goes below 1, you&#39;ll eventually be calling <code>Fibonacci_vector(-99999999)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 5749314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gyCdX.jpg?s=128&g=1", "display_name": "SashaMN", "link": "https://stackoverflow.com/users/5749314/sashamn"}, "is_accepted": false, "score": 1, "last_activity_date": 1452718705, "last_edit_date": 1452718705, "creation_date": 1452718382, "answer_id": 34776808, "question_id": 34776753, "link": "https://stackoverflow.com/questions/34776753/why-does-this-code-print-rubbish/34776808#34776808", "title": "Why does this code print rubbish?", "body": "<p>You need to check that the element exists. Change the code like this:</p>\n\n<pre><code>int Fibonacci_vector(int n) {\n    static vector&lt;int&gt; cache(2, 1);\n    if (n &gt;= cache.size()) {\n        cache.push_back(Fibonacci_vector(n-1) + Fibonacci_vector(n-2));\n    }\n    return cache[n];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 5, "last_activity_date": 1452757008, "last_edit_date": 1592644375, "creation_date": 1452718486, "answer_id": 34776838, "question_id": 34776753, "link": "https://stackoverflow.com/questions/34776753/why-does-this-code-print-rubbish/34776838#34776838", "title": "Why does this code print rubbish?", "body": "<ol>\n<li><p>There's <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>std::vector::reserve</code></a> and there's also <a href=\"http://en.cppreference.com/w/cpp/container/vector/resize\" rel=\"nofollow noreferrer\"><code>std::vector::resize</code></a>. <a href=\"https://stackoverflow.com/questions/13029299/stdvectorresize-vs-stdvectorreserve\">They do different things</a>.</p>\n<p><sup><code>cache[n]</code> is still access out of range in both cases (one past last element in case of <code>std::vector::resize</code>)</sup></p>\n</li>\n<li><p>The condition for calculation should not try to access any cached data (out of range), it just has to compare <code>if(n &gt;= cache.size())</code>.</p>\n</li>\n<li><p>You'll need to call <code>cache.resize(n + 1)</code> only if the condition above is satisfied, so put it inside the <code>if</code>-clause.</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 930, "user_id": 3713926, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4644674624a85763e1932e6058fc2be1?s=128&d=identicon&r=PG&f=1", "display_name": "Akiiino", "link": "https://stackoverflow.com/users/3713926/akiiino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 34776838, "answer_count": 2, "score": 0, "last_activity_date": 1455617122, "creation_date": 1452718183, "last_edit_date": 1455617122, "question_id": 34776753, "link": "https://stackoverflow.com/questions/34776753/why-does-this-code-print-rubbish", "title": "Why does this code print rubbish?", "body": "<p>This is a simple recursive method with caching so that the numbers will not get recalculated over and over again. I've definitely seen it work, but now it's broken and prints rubbish. I've tried reverting to working version, but just can't find any difference that could have broken it.</p>\n\n<p>Why did it stop working?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nint Fibonacci_vector(int n) {\n    static vector&lt;int&gt; cache(2, 1);\n    cache.reserve(n);\n    if (cache[n] == 0) {\n        cache[n] = Fibonacci_vector(n-1) + Fibonacci_vector(n-2);\n    }\n    return cache[n];\n}\n\nint main() {\n    cout &lt;&lt; Fibonacci_vector(4);\n}\n</code></pre>\n\n<p><strong>UPDATE</strong> Jeez, I'm so stupid that it just hurts. I've changed <code>if (n &gt; cache.size()) { cache.resize(n); }</code> to <code>cache.reserve(n);</code> and <em>of course</em> it broke everything! So sorry for my stupidity, guys.</p>\n"}, {"tags": ["c++", "meep"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4280478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceb2b20cabf9409b4d6fbdbafa7ef47?s=128&d=identicon&r=PG&f=1", "display_name": "hyperbull", "link": "https://stackoverflow.com/users/4280478/hyperbull"}, "edited": false, "score": 0, "creation_date": 1452719679, "post_id": 34776883, "comment_id": 57299419, "body": "yes ... that works. Where can I learn what &#39;you have to link the meep library&#39; mean?  Also I am still unable to run the code through eclipse IDE. That might need this linking as well. Am I right?"}, {"owner": {"reputation": 37736, "user_id": 2153571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d5573368e2aa8dd2039de1c545ce2b9c?s=128&d=identicon&r=PG", "display_name": "juzzlin", "link": "https://stackoverflow.com/users/2153571/juzzlin"}, "reply_to_user": {"reputation": 25, "user_id": 4280478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceb2b20cabf9409b4d6fbdbafa7ef47?s=128&d=identicon&r=PG&f=1", "display_name": "hyperbull", "link": "https://stackoverflow.com/users/4280478/hyperbull"}, "edited": false, "score": 0, "creation_date": 1452722334, "post_id": 34776883, "comment_id": 57300718, "body": "Yes, you&#39;re right. Eclipse (and all other IDEs) just run these same commands behind the scenes. In general the header file that you include contains only declarations of classes, functions etc, but the actual implementations are in source files (.cpp) or in libraries (.a, .so). You might want to google &quot;c++ libraries on linux&quot; or something like that. I also advice you to abandon Eclipse and use Qt Creator (and qmake) for C++ development."}], "tags": [], "owner": {"reputation": 37736, "user_id": 2153571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d5573368e2aa8dd2039de1c545ce2b9c?s=128&d=identicon&r=PG", "display_name": "juzzlin", "link": "https://stackoverflow.com/users/2153571/juzzlin"}, "is_accepted": true, "score": 3, "last_activity_date": 1452718670, "creation_date": 1452718670, "answer_id": 34776883, "question_id": 34776751, "link": "https://stackoverflow.com/questions/34776751/running-meep-c-basics/34776883#34776883", "title": "running meep c++ basics", "body": "<p>You have to link the MEEP library. I compiled your app like this:</p>\n\n<pre><code>g++ -o test2 test2.cpp -lmeep\n</code></pre>\n\n<p>MEEP development files can be installed like this on Ubuntu:</p>\n\n<pre><code>sudo apt-get install libmeep-dev\n</code></pre>\n\n<p>Also modify the include statement like this now:</p>\n\n<pre><code>#include &lt;meep.hpp&gt;\n</code></pre>\n\n<p>I tested this on Ubuntu 15.10 and your app worked fine.</p>\n"}], "owner": {"reputation": 25, "user_id": 4280478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fceb2b20cabf9409b4d6fbdbafa7ef47?s=128&d=identicon&r=PG&f=1", "display_name": "hyperbull", "link": "https://stackoverflow.com/users/4280478/hyperbull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 1, "accepted_answer_id": 34776883, "answer_count": 1, "score": 2, "last_activity_date": 1452718693, "creation_date": 1452718172, "last_edit_date": 1452718693, "question_id": 34776751, "link": "https://stackoverflow.com/questions/34776751/running-meep-c-basics", "title": "running meep c++ basics", "body": "<p>I'm trying to run <a href=\"http://ab-initio.mit.edu/wiki/index.php/Meep_C-plus-plus_Tutorial\" rel=\"nofollow\">MIT MEEP</a> on ubuntu through its C++ lib but I've been widely unsuccessful. I have meep and g++ installed properly. I can run Scheme ctrl file but not the c++ libs.</p>\n\n<p>I am trying the simple code from MEEP c++ tutorial. The meep.hpp is located where I have given. I am new to c++.</p>\n\n<p>Could anyone give me a hint of what can be wrong?</p>\n\n<p>These are the first lines of errors I get:</p>\n\n<pre><code>Building target: test2\nInvoking: GCC C++ Linker\ng++  -o \"test2\"  ./src/test2.o   \n./src/test2.o: In function `main':\n/home/mad/clipse_workspace/test2/Debug/../src/test2.cpp:20: undefined reference to `meep::initialize::initialize(int&amp;, char**&amp;)'\n/home/mad/clipse_workspace/test2/Debug/../src/test2.cpp:22: undefined reference to `meep::vol2d(double, double, double)'\n</code></pre>\n\n<p>Here is the code I run:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n\n#include &lt;/usr/include/meep/meep.hpp&gt;\nusing namespace meep;\nusing namespace std;\n\ndouble eps(const vec &amp;p);\n\nint main(int argc, char **argv) {\n  initialize mpi(argc, argv); // do this even for non-MPI Meep\n  double resolution = 10; // pixels per distance\n  grid_volume v = vol2d(5,10, resolution); // 5x10 2d cell\n  structure s(v, eps, pml(1.0));\n  fields f(&amp;s);\n\n  f.output_hdf5(Dielectric, v.surroundings());\n\n  double freq = 0.3, fwidth = 0.1;\n  gaussian_src_time src(freq, fwidth);\n  f.add_point_source(Ey, src, vec(1.1, 2.3));\n  while (f.time() &lt; f.last_source_time()) {\n    f.step();\n  }\n\n  f.output_hdf5(Hz, v.surroundings());\n\n  return 0;\n}\n\ndouble eps(const vec &amp;p) {\n  if (p.x() &lt; 2 &amp;&amp; p.y() &lt; 3)\n  return 12.0;\n  return 1.0;\n} \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "edited": false, "score": 1, "creation_date": 1452718153, "post_id": 34776720, "comment_id": 57298705, "body": "Come up with a small formula or a logic which would do that."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1452718889, "post_id": 34776720, "comment_id": 57299075, "body": "This shouldn&#39;t compile, <code>x</code> is not in range in the second loop."}, {"owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1452719952, "post_id": 34776720, "comment_id": 57299567, "body": "@UlrichEckhardt yeah the looks like some of the code was stuck in the comment"}], "answers": [{"tags": [], "owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "is_accepted": false, "score": 5, "last_activity_date": 1452719202, "last_edit_date": 1495540754, "creation_date": 1452718618, "answer_id": 34776867, "question_id": 34776720, "link": "https://stackoverflow.com/questions/34776720/how-do-i-create-a-permutation-of-a-2d-string-array/34776867#34776867", "title": "How do I create a permutation of a 2D string array?", "body": "<p>Personally, I would store the array as a 1D <code>std::vector&lt;int&gt;</code> of size <code>n*n</code>. Then you could call <a href=\"https://stackoverflow.com/questions/16680322/how-to-use-next-permutation\"><code>std::next_permutation()</code></a> on it very simply. (It's worth noting that you don't have to use a <code>std::vector</code>; as long as it is contiguous in memory, you should be able to use <code>std::next_permutation()</code> properly)</p>\n\n<p>The only thing you have to do that makes your permutation logic \"2D\" is the act of printing it out. However, your loop as-is should handle that properly, so no problems there either.</p>\n\n<p><strong>EDIT</strong>: Upon re-reading your code, you could not use this as-is. Instead, you should initialize your 1D <code>std::vector</code> to be 0 everywhere, except 1 at position 0. THEN, permutations of that would yield the output you want.</p>\n\n<p>Furthermore, your printing loop would not print out the array properly. You probably want:</p>\n\n<pre><code>for (int i = 0; i &lt; 2; ++i) {\n    for (int j = 0; j &lt; 2; ++j) {\n        std::cout &lt;&lt; vector[i*2+j] &lt;&lt; \" \" ;\n    }\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1452719093, "post_id": 34776938, "comment_id": 57299170, "body": "<code>#define</code>? Seriously?"}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1452732306, "post_id": 34776938, "comment_id": 57304553, "body": "@UlrichEckhardt You better believe it buddy!"}], "tags": [], "owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "is_accepted": true, "score": -1, "last_activity_date": 1452718890, "creation_date": 1452718890, "answer_id": 34776938, "question_id": 34776720, "link": "https://stackoverflow.com/questions/34776720/how-do-i-create-a-permutation-of-a-2d-string-array/34776938#34776938", "title": "How do I create a permutation of a 2D string array?", "body": "<p>I would write a function that prints all zeros except where it needs to print the actual value, then call this function with different indexes for desired effect. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#define SZ 2\nvoid printValue(int a [SZ][SZ], int x, int y)\n{\n    for(int i=0; i&lt;SZ; ++i )\n    {\n        for(int j=0; j&lt;SZ; ++j)\n        {\n            if(i==x &amp;&amp; j==y) cout&lt;&lt;a[i][j];\n            else cout&lt;&lt;\"0\";\n            cout&lt;&lt;\" \";\n        }\n        cout&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>Now you can make use of this function in a for loop</p>\n\n<pre><code>int main()\n{\n  int arr[SZ][SZ];\n  for (int x = 0; x&lt;SZ; x++)\n  {\n        for (int y = 0; y&lt;SZ; y++)\n            arr[x][y] = 1;\n  }\n\n    // display all cells to see that all of them are set to zero\n cout &lt;&lt; \"diplaying\" &lt;&lt; endl;\n\n for (int x = 0; x&lt;SZ; x++)\n {\n    for (int y = 0; y&lt;SZ; y++)\n       cout &lt;&lt; arr[x][y] &lt;&lt; \" \" ;\n    cout &lt;&lt; endl;\n }\n\n //now display all combos:\n for(int i=0; i&lt;SZ; ++i)\n {\n     for(int j=0; j&lt;SZ; ++j)\n     {\n         printValue(arr, i,j);    \n     }\n  cout&lt;&lt;\"\\n\\n\";\n }\n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "is_accepted": false, "score": 0, "last_activity_date": 1452719651, "creation_date": 1452719651, "answer_id": 34777122, "question_id": 34776720, "link": "https://stackoverflow.com/questions/34776720/how-do-i-create-a-permutation-of-a-2d-string-array/34777122#34777122", "title": "How do I create a permutation of a 2D string array?", "body": "<p>After reading carefully, I interpreted your question this way: \nYou want to go from this</p>\n\n<pre><code>1   1\n\n1   1\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>0   1          \n\n0   0\n</code></pre>\n\n<p>using the <code>for</code> clause.</p>\n\n<p>if you simply want to leave a cell unchanged.. you could just save it and restore it after filling the array with <code>0</code>.</p>\n\n<pre><code>memo = array[0][1];\n\nfor (int x = 0; x&lt;2; x++) {\n    for (int y = 0; y&lt;2; y++) {\n        array[x][y] = 0;\n    }\n}\narray[0][1] = memo;\n</code></pre>\n\n<p>If that's what you want to do.</p>\n\n<p>Where's the \"string array\" by the way..?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5768645"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 34776938, "answer_count": 3, "score": 0, "last_activity_date": 1452720130, "creation_date": 1452718065, "last_edit_date": 1452720130, "question_id": 34776720, "link": "https://stackoverflow.com/questions/34776720/how-do-i-create-a-permutation-of-a-2d-string-array", "title": "How do I create a permutation of a 2D string array?", "body": "<p>I have the following code. I set each box equal to 1. Now I want to set 3 boxes at a time to 0. How do I do that without manually setting each of them to 1?</p>\n\n<p>Is there a  permutation formula that will set 3 at the time to 1?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n  int array[2][2];\n  for (int x = 0; x&lt;2; x++) \n  {\n        for (int y = 0; y&lt;2; y++)\n            array[x][y] = 1;\n  }\n\n // display all cells to see that all of them are set to zero \n cout &lt;&lt; \"diplaying\" &lt;&lt; endl;   \n for (int x = 0; x&lt;2; x++)   \n {\n    for (int y = 0; y&lt;2; y++)\n       cout &lt;&lt; array[x][y] &lt;&lt; \" \" ; \n    cout &lt;&lt; endl;\n }\n</code></pre>\n\n<p>Printing this would look something like.</p>\n\n<pre><code>1   1\n\n1   1\n</code></pre>\n\n<p>Now how do I get to print </p>\n\n<pre><code>0   1          \n\n0   0\n</code></pre>\n\n<p>and</p>\n\n<pre><code>1   0\n\n0   0\n</code></pre>\n\n<p>and</p>\n\n<pre><code>0   0\n\n1   0\n</code></pre>\n\n<p>and</p>\n\n<pre><code>0   0\n\n0   1\n</code></pre>\n\n<p>without having to set them individually that way?</p>\n"}, {"tags": ["c++", "opencv", "non-maximum-suppression"], "comments": [{"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 2, "creation_date": 1452719713, "post_id": 34776704, "comment_id": 57299439, "body": "First of all, you should give a detailed explanation of imhmin. Second, you should explain the relation between non-maximum suppression and imhmin. Third, if i got it correct, just find the smallest value <code>min</code>, then change any value to <code>h+min</code> which is smaller than <code>h+min</code>."}], "answers": [{"tags": [], "owner": {"reputation": 10288, "user_id": 1542806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89b0522a428d374844f2efcb8b342a2?s=128&d=identicon&r=PG", "display_name": "Andrey  Smorodov", "link": "https://stackoverflow.com/users/1542806/andrey-smorodov"}, "is_accepted": false, "score": 0, "last_activity_date": 1452803784, "creation_date": 1452803784, "answer_id": 34799239, "question_id": 34776704, "link": "https://stackoverflow.com/questions/34776704/how-to-implement-imhmin-in-c/34799239#34799239", "title": "How To Implement imhmin() in C++", "body": "<p>Use the result you get as mask for source image. </p>\n"}], "owner": {"reputation": 7, "user_id": 5411364, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/920caa58505e32498cf4aa9e36f0eb7b?s=128&d=identicon&r=PG&f=1", "display_name": "blknt", "link": "https://stackoverflow.com/users/5411364/blknt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452803784, "creation_date": 1452718027, "question_id": 34776704, "link": "https://stackoverflow.com/questions/34776704/how-to-implement-imhmin-in-c", "title": "How To Implement imhmin() in C++", "body": "<p>I would like to implement imhmin() function of matlab in c++.  Firstly, I have examined the algorithm. It suppresses the minimum pixel intensity values. Non-maximum suppression code is:  </p>\n\n<pre><code>void non_maxima_suppression(const cv::Mat&amp; src, cv::Mat&amp; mask, const bool remove_plateaus)\n{\n    // find pixels that are equal to the local neighborhood not maximum (including 'plateaus')\n    cv::dilate(src, mask, cv::Mat());\n    cv::compare(src, mask, mask, cv::CMP_GE);\n\n    // optionally filter out pixels that are equal to the local minimum ('plateaus')\n    if (remove_plateaus) {\n        cv::Mat non_plateau_mask;\n        cv::erode(src, non_plateau_mask, cv::Mat());\n        cv::compare(src, non_plateau_mask, non_plateau_mask, cv::CMP_GT);\n        cv::bitwise_and(mask, non_plateau_mask, mask);\n    }\n} \n</code></pre>\n\n<p>imhmin() function returns suppressed values. However, non-maximum suppression returns binary values. How can I handle it?</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 478, "user_id": 3861548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G89Hn.jpg?s=128&g=1", "display_name": "jabujavi", "link": "https://stackoverflow.com/users/3861548/jabujavi"}, "edited": false, "score": 0, "creation_date": 1452766356, "post_id": 34776524, "comment_id": 57317416, "body": "Probably, you are having troubles using interrupts and timers... When Arduino is handling an interrupt(execute count()) some functions of time are disabled or lost their sense. millis() or delay(), for example, don&#39;t work as usual if are called in a handler function."}, {"owner": {"reputation": 2636, "user_id": 3368201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c46939557e63148d8c8cfa3b14d9e2f?s=128&d=identicon&r=PG&f=1", "display_name": "frarugi87", "link": "https://stackoverflow.com/users/3368201/frarugi87"}, "edited": false, "score": 0, "creation_date": 1452772317, "post_id": 34776524, "comment_id": 57321078, "body": "What is <code>while(freq1)</code> for?"}, {"owner": {"reputation": 21, "user_id": 5786453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767d8ca33585b535d42ea432d6ed515b?s=128&d=identicon&r=PG&f=1", "display_name": "supreme kannan", "link": "https://stackoverflow.com/users/5786453/supreme-kannan"}, "edited": false, "score": 0, "creation_date": 1452773570, "post_id": 34776524, "comment_id": 57321867, "body": "i dont want to print when freq1=0 so i set the loop"}], "answers": [{"tags": [], "owner": {"reputation": 1163, "user_id": 4932683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D4FJQ.jpg?s=128&g=1", "display_name": "cyberponk", "link": "https://stackoverflow.com/users/4932683/cyberponk"}, "is_accepted": false, "score": 0, "last_activity_date": 1484933268, "creation_date": 1484933268, "answer_id": 41769249, "question_id": 34776524, "link": "https://stackoverflow.com/questions/34776524/measuring-frequency-with-arduino/41769249#41769249", "title": "Measuring frequency with Arduino", "body": "<p>There is a working example <a href=\"https://github.com/cyberponk/PWM_Signal_Analyzer_for_Arduino/blob/master/PWM_Signal_Analyzer_for_Arduino.ino\" rel=\"nofollow noreferrer\">here</a>.\nIt uses native ISR functions (faster) instead of arduino interrupt handlers.\nUses Timer1 for best resolution and precision.</p>\n\n<p>The code is big but the part that interests you is:</p>\n\n<blockquote>\n<pre><code>The \"// Setup Timer1 for precise timing\" portion of void setup()\n\nISR(TIMER1_OVF_vect) -&gt; for timer1 overflow counter\n\nISR(INT0_vect) // External Interrupt pin 2 [D2]\n\nvoid PulseCaptureScheduler_callback()  // Starts a capture and flags a timeout\n\nvoid PrintInfoScheduler_callback() // Processes the results\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 5786453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767d8ca33585b535d42ea432d6ed515b?s=128&d=identicon&r=PG&f=1", "display_name": "supreme kannan", "link": "https://stackoverflow.com/users/5786453/supreme-kannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 744, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1484933268, "creation_date": 1452717254, "last_edit_date": 1452726355, "question_id": 34776524, "link": "https://stackoverflow.com/questions/34776524/measuring-frequency-with-arduino", "title": "Measuring frequency with Arduino", "body": "<p>I am working on a small project for measuring input square wave frequency using Arduino, I did it using both timer and hardware interrupts and here is my code:</p>\n\n<pre><code>#include &lt;TimerOne.h&gt;\nlong count1=0,freq1=0;\n\nvoid setup(){\n    attachInterrupt(5,count,RISING);\n    Timer1.initialize(1000000); //increments count for 1 sec and prints out count\n    Timer1.attachInterrupt( freq ); // attach the service routine here\n\n    Serial.begin(9600);\n}\n\nvoid loop(){\n    while(freq1)\n        Serial.println(freq1);\n}\n\nvoid count()\n{\n    count1++; \n}\n\nvoid freq(){\n    freq1 =  count1;\n    count1=0;\n}\n</code></pre>\n\n<p>The problem is that output value is almost double the input frequency, \nI don't know what's wrong with it. I learned about interrupts after an intensive Google search. Seems it didn't work.</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1452717162, "post_id": 34776444, "comment_id": 57298154, "body": "Itanium and Alpha are very different platforms. About the best you can do is make statements about the memory layout used by the OS."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1452717546, "post_id": 34776444, "comment_id": 57298364, "body": "@ Flexo Well, that is already a partial answer, if the Itanium spec has something to say about it then that&#39;s a start."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1452717559, "post_id": 34776444, "comment_id": 57298372, "body": "Already vote to close? Can I ask why?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 2, "creation_date": 1452717710, "post_id": 34776444, "comment_id": 57298463, "body": "It&#39;s more likely to the <i>least</i> significant bit, not the <i>most</i>.  The long string buffer will be allocated from the heap, and will almost certainly be 8byte aligned (at least), so bottom four bits zero.  This avoids making any assumptions about overall memory layout."}, {"owner": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 2, "creation_date": 1452717760, "post_id": 34776444, "comment_id": 57298490, "body": "You&#39;re mistaken in multiple ways. The short string flag doesn&#39;t overlap with a pointer at all, it overlaps with the field that holds the <i>size</i> of a long string. Even if it did overlap with a pointer, it would be the low bit of the pointer, meaning that memory <i>range</i> doesn&#39;t come into it, only alignment."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1452718540, "post_id": 34776444, "comment_id": 57298912, "body": "@MartinBonner Thanks for pointing out the size. As for the alignment, I don&#39;t think this works out. std::string is a typedef of basic_string, so SSO is implemented in basic_string. basic_string is allocator aware, so it must work with any allocator. While the standard allocater will return 8 byte aligned memory, conforming allocators are not required to. Since it&#39;s allocating chars, it can return 1 byte aligned memory."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1452718695, "post_id": 34776444, "comment_id": 57298980, "body": "@hobbs See my comment above."}, {"owner": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1452719223, "post_id": 34776444, "comment_id": 57299229, "body": "@NirFriedman still, it means that there&#39;s nothing germane in your question."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1452719399, "post_id": 34776444, "comment_id": 57299303, "body": "@hobbs Well, actually what it means is that the motivating example was flawed. The question itself still stands, but obviously you are entitled to your opinion."}], "answers": [{"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1452718843, "post_id": 34776719, "comment_id": 57299051, "body": "Thanks for pointing this out, I stupidly assumed that string used 3 pointers like vector usually does, definitely a brain fart. I&#39;m accepting zneak&#39;s answer as he added more information about the heart of my question, but thanks to you as well!"}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 3, "last_activity_date": 1452718060, "creation_date": 1452718060, "answer_id": 34776719, "question_id": 34776444, "link": "https://stackoverflow.com/questions/34776444/range-of-pointer-values-on-64-bit-systems/34776719#34776719", "title": "Range of pointer values on 64 bit systems", "body": "<p>The \"long-bit\" isn't part of a pointer, but of the capacity:</p>\n\n<pre><code>struct __long\n{\n    size_type __cap_;\n    size_type __size_;\n    pointer   __data_;\n};\n</code></pre>\n\n<p>The \"trick\" is that if you always allocate an even number of characters and reserve one for the nul terminator, the resulting capacity will always be an odd number. And you get the 1-bit for free!</p>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1452718762, "post_id": 34776730, "comment_id": 57299008, "body": "Actually, x86-64 has canonical addresses, so the upper 16 bits are copies of bit 47, so they <i>can</i> be set."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1452719598, "post_id": 34776730, "comment_id": 57299384, "body": "@EOF is this guaranteed then? If this is the case, then it sounds like it is actually possible to use those bits for something, and simply set the top 16 bits before dereferencing."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1452719857, "post_id": 34776730, "comment_id": 57299513, "body": "@NirFriedman: Yes, canonical pointers are enforced by hardware, you get an exception if you try to dereference a non-canonical address. However, if the virtual address-space is expanded in future processor generations, code relying on those bits being unused will not work anymore. I&#39;m pretty sure canonical addresses are supposed to discourage this use."}], "tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": true, "score": 4, "last_activity_date": 1452718971, "last_edit_date": 1452718971, "creation_date": 1452718099, "answer_id": 34776730, "question_id": 34776444, "link": "https://stackoverflow.com/questions/34776444/range-of-pointer-values-on-64-bit-systems/34776730#34776730", "title": "Range of pointer values on 64 bit systems", "body": "<blockquote>\n  <p>As we know, a string typically consists of 3 pointers, which is 24 bytes on a 64 bit system.</p>\n</blockquote>\n\n<p>This is not true with libc++. The <code>__long</code> structure, for \"long strings\" is defined as:</p>\n\n<pre><code>struct __long\n{\n    size_type __cap_;\n    size_type __size_;\n    pointer   __data_;\n};\n</code></pre>\n\n<p>The short flag therefore goes into the capacity field, making the whole thing moot.</p>\n\n<p>As for pointer tagging, there is no universal guarantee about the size of a pointer. On x86_64, the data structures that the CPU uses for virtual address translation only use 48 bits (or 52 with physical address extension), so virtual addresses never use the upper 16 (or 12) bits. Additionally, most operating systems map their kernel into every process and reserve some amount of the high end of the address space for it, so in practice, user-mode pointers are even more restricted. On Windows, the most significant hardware-usable bit of a pointer tells whether it belongs to kernel-space or user-space.</p>\n\n<p>These limits can change in the future and will vary across platforms, so it would be bad form to use them in a platform-independent standard library. In general, it's much better practice to <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20150605-00/?p=45441\" rel=\"nofollow\">use the least-significant bits for pointer tagging</a>, since your application is in control of these.</p>\n"}], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 34776730, "answer_count": 2, "score": 2, "last_activity_date": 1452718971, "creation_date": 1452716938, "last_edit_date": 1495541046, "question_id": 34776444, "link": "https://stackoverflow.com/questions/34776444/range-of-pointer-values-on-64-bit-systems", "title": "Range of pointer values on 64 bit systems", "body": "<p>Recently I was reading about the small string optimization (SSO): <a href=\"https://stackoverflow.com/questions/21694302/what-are-the-mechanics-of-short-string-optimization-in-libc\">What are the mechanics of short string optimization in libc++?</a>. As we know, a string typically consists of 3 pointers, which is 24 bytes on a 64 bit system. The linked answer says that in libc++'s implementation, the very first bit of the first pointer is used to indicate whether the string is in \"long\" or \"short\" mode, i.e. heap allocation and external storage vs internal storage of up to some 22 characters.</p>\n\n<p>This however assumes however that the first bit of the first pointer cannot ever meaningfully be part of the address, because whenever the string is in \"long\" mode, that bit will always be set (or unset, depending which convention was chosen). This seems reasonable on its face, since with 64 bit pointers that allows 2^64 addresses, larger than 1 followed by 18 zeroes in bytes, or more than 1 billion gigabytes.</p>\n\n<p>So this is reasonable, though not certain. My question is: is this guaranteed somewhere? And if it is guaranteed, where is it guaranteed? By the architecture spec, or by something else? To take it a step further: how many bits is it safe to do this with? I have a vague recollection reading somewhere that only 48 bits are used, but I don't recall.</p>\n\n<p>If there are some number of bits, e.g. 8 or 16 that are guaranteed to be untouched, that is certainly something that could be leveraged in some interesting ways. It would be nice to exploit this, but not at the cost of having code mysteriously failure on some machine.</p>\n"}, {"tags": ["c++", "qml", "flicker", "qquickview"], "comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1452716637, "post_id": 34776225, "comment_id": 57297838, "body": "Well, it ain&#39;t the QML code, maybe a problem with platform support? Does it flicker if you don&#39;t set those extra view flags?"}, {"owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1452717094, "post_id": 34776225, "comment_id": 57298112, "body": "Nope. Without FramelessWindowHint everthing is fine."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1452717280, "post_id": 34776225, "comment_id": 57298217, "body": "Well, it looks like a bug, you should post a bug report. Just don&#39;t hold your breath for a quick resolution :)"}], "answers": [{"tags": [], "owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "is_accepted": false, "score": 0, "last_activity_date": 1452728818, "creation_date": 1452728818, "answer_id": 34779249, "question_id": 34776225, "link": "https://stackoverflow.com/questions/34776225/qml-flicker-on-animation-in-frameless-qquickview-qtquick2/34779249#34779249", "title": "Qml flicker on animation in frameless QQuickView (QtQuick2)", "body": "<p>Short answer:\nSet the environment variable to QSG_RENDER_LOOP=basic</p>\n\n<p>Long answer:\nI dont know the exact internals. The Qmlscene is rendered by multiple threads when QSG_RENDER_LOOP=threaded is set. But some drivers fail in rendering smooth animations. Hence for untested systems (x11,mesa) initially QSG_RENDER_LOOP was set to basic. Since 5.5 threaded is the default. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7755159, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/787820680263446df4fb5a53311193cf?s=128&d=identicon&r=PG", "display_name": "user7755159", "link": "https://stackoverflow.com/users/7755159/user7755159"}, "is_accepted": false, "score": 0, "last_activity_date": 1490250286, "creation_date": 1490250286, "answer_id": 42968688, "question_id": 34776225, "link": "https://stackoverflow.com/questions/34776225/qml-flicker-on-animation-in-frameless-qquickview-qtquick2/42968688#42968688", "title": "Qml flicker on animation in frameless QQuickView (QtQuick2)", "body": "<p>Try \"view->setFlags(Qt::SplashScreen)\"\nMaybe solve this issue, but the window can't be resized and moved. It doesn't make sense, but it is.</p>\n"}], "owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 828, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490250286, "creation_date": 1452716224, "question_id": 34776225, "link": "https://stackoverflow.com/questions/34776225/qml-flicker-on-animation-in-frameless-qquickview-qtquick2", "title": "Qml flicker on animation in frameless QQuickView (QtQuick2)", "body": "<p>main.cpp</p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQuickView&gt;\n\nint main(int argc, char *argv[])\n{\n    QGuiApplication app(argc, argv);\n    QQuickView *view= new QQuickView;\n    view-&gt;setFlags(Qt::Tool|Qt::WindowStaysOnTopHint|Qt::FramelessWindowHint);\n    view-&gt;setColor(Qt::transparent);\n    view-&gt;show();\n    view-&gt;setSource(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n    return app.exec();\n}\n</code></pre>\n\n<p>qmlfile:</p>\n\n<pre><code>import QtQuick 2.0\n\nRectangle {\n    width: 100\n    height: 100\n    color: \"#80808080\"\n\n    Rectangle {\n        width: 10\n        height: 10\n        anchors.centerIn: parent\n        RotationAnimation on rotation {\n            duration : 15000\n            easing.type: Easing.Linear\n            loops: Animation.Infinite\n            from: 0\n            to: 360\n        }\n    }\n}\n</code></pre>\n\n<p>The transparent background <a href=\"https://youtu.be/6fg-KJq9caU\" rel=\"nofollow\">flickers</a>, but only with an animation. The example is pretty basic, so whats the problem?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "edited": false, "score": 2, "creation_date": 1452715794, "post_id": 34776080, "comment_id": 57297380, "body": "What do you mean wrong number? You&#39;re returning true or false, what else are you expecting? And as a future tip, program in English. It&#39;s the universal programming Language."}, {"owner": {"reputation": 23, "user_id": 4876081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617a95689f88a27372a6a1c1d61afa64?s=128&d=identicon&r=PG&f=1", "display_name": "mulaczos", "link": "https://stackoverflow.com/users/4876081/mulaczos"}, "reply_to_user": {"reputation": 548, "user_id": 4323420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bV2OX.jpg?s=128&g=1", "display_name": "Tarik Neaj", "link": "https://stackoverflow.com/users/4323420/tarik-neaj"}, "edited": false, "score": 0, "creation_date": 1452716009, "post_id": 34776080, "comment_id": 57297503, "body": "i mean integer &quot;rezultat&quot;. It is declared global, inside pop function it has a value assigned by &quot;rezultat=tymczasowy-&gt;x&quot;, inside is correct(25), but in  next line in &quot;main()&quot;, value is &quot;0&quot;.  Like this: <a href=\"http://imgur.com/j5NtVJI\" rel=\"nofollow noreferrer\">imgur.com/j5NtVJI</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452716374, "post_id": 34776080, "comment_id": 57297689, "body": "I recommend using a debugger and single stepping through the code.  Also, print variable values or <i>watch</i> them as each statement is executed."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1452725870, "post_id": 34776080, "comment_id": 57302341, "body": "When you have the code working you should get a [code review](codereview.stackexchange.com) to get best practice for C++"}], "answers": [{"comments": [{"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1452716878, "post_id": 34776155, "comment_id": 57297983, "body": "Correct, but doesn&#39;t address the memory leak you have in push, you need to rethink that function entirely"}, {"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1452716990, "post_id": 34776155, "comment_id": 57298053, "body": "@ForeverStudent <i>Who</i> needs to rethink that function (ha ha)?! I was only addressing the bug he knows about. Your answer is much better than mine for that reason."}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1452717060, "post_id": 34776155, "comment_id": 57298097, "body": "@EdPlunkett, sorry The OP needs to rethink the function not you. my apologies for confusion haha"}], "tags": [], "owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "is_accepted": true, "score": 4, "last_activity_date": 1452717063, "last_edit_date": 1495541848, "creation_date": 1452716005, "answer_id": 34776155, "question_id": 34776080, "link": "https://stackoverflow.com/questions/34776080/function-returns-a-wrong-number-c/34776155#34776155", "title": "Function returns a wrong number C++", "body": "<p>You have two different ints which both happen to have the same name: The global <code>rezultat</code> declared at the top of the file, and the function parameter <code>rezultat</code> in the parameter list for function <code>pop()</code>. </p>\n\n<p>You pass the value of the global <code>rezultat</code> into <code>pop()</code>, then you assign a new value to the function parameter <code>rezultat</code> inside the function. When the function exits, the function parameter <code>rezultat</code> is gone. You didn't assign a new value to the global <code>rezultat</code>, so it has the same value as it did before. </p>\n\n<p>If you want to send the value of a variable from inside a function to the outside, use the <code>return</code> statement. </p>\n\n<p>If you rename the global one to something else, that should clear up your confusion between the two.</p>\n\n<p>Also, see <a href=\"https://stackoverflow.com/a/34776259/424129\">@ForeverStudent's excellent answer</a>. He spotted a number of other issues that you'll need to take a look at. </p>\n"}, {"tags": [], "owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "is_accepted": false, "score": 2, "last_activity_date": 1452717619, "last_edit_date": 1452717619, "creation_date": 1452716333, "answer_id": 34776259, "question_id": 34776080, "link": "https://stackoverflow.com/questions/34776080/function-returns-a-wrong-number-c/34776259#34776259", "title": "Function returns a wrong number C++", "body": "<p>There are quite a few problems with your code. </p>\n\n<p>First of all, your <code>push</code> function has the signature <code>void push(stosik* &amp;stos, int x)</code> </p>\n\n<p>based on your semantics you most likely want <code>void push(stosik* stos, int x)</code></p>\n\n<p>You have the same problem in the signature of <code>pop</code></p>\n\n<p>also inside the body of <code>push</code> you have: </p>\n\n<pre><code>stosik* tymczasowy = new stosik; //allocate on heap, OK\ntymczasowy-&gt;x = x; //OK\ntymczasowy-&gt;next = stos;//OK\nstos=tymczasowy;  //BOTH pointers now point to the same memory\ndelete tymczasowy;//you are freeing memory for both. \n//stos-&gt;next is now inaccessible and leaked\n</code></pre>\n\n<p>last line creates a memory leak, both pointers are pointing to the same location and you are freeing the memory. sure you still have the pointer, but it is no longer pointing to a valid object instance. </p>\n\n<p>Also you are using extern global variable <code>rezultat</code> that will be initialized to 0. </p>\n\n<p>Now your <code>pop</code> function has a formal parameter of the same name. \nThis causes <code>rezultat</code> to refer to the variable in the function scope as opposed to the global. </p>\n\n<p>I would advise you to avoid using global variables, but if you have to use them, at least do not overwrite them in block scopes. </p>\n\n<pre><code>bool pop(stosik* stos, int rezultat) //valid code, but terrible practice\n{\n    //here rezultat refers to the variable passed in NOT the global\n    //global variable is still accessible in this scope via ::rezultat\n\n    if (!isEmpty(stos))    \n    {\n        return false;\n    }\n    stosik* tymczasowy = stos;\n    rezultat =  tymczasowy -&gt; x; \n    //this rezultat will be destroyed when this function returns. \n...\n}\n</code></pre>\n\n<p>If you decide to be naughty and use global variables, then you will need to do this: </p>\n\n<pre><code>bool pop(stosik* stos) \n{\n    if (!isEmpty(stos))    \n    {\n        return false;\n    }\n    stosik* tymczasowy = stos;\n    rezultat =  tymczasowy -&gt; x; \n    //now this refers to the global variable\n ...\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": false, "score": 1, "last_activity_date": 1452717167, "creation_date": 1452717167, "answer_id": 34776504, "question_id": 34776080, "link": "https://stackoverflow.com/questions/34776080/function-returns-a-wrong-number-c/34776504#34776504", "title": "Function returns a wrong number C++", "body": "<p>When you want to return a value through a parameter, you need to use a reference, e.g. </p>\n\n<pre><code>bool pop(stosik* &amp;stos, int &amp;rezultat){\n</code></pre>\n\n<p>Note the <code>&amp;</code> before <code>rezultat</code>.\nWhen you call <code>pop(stos_roboczy, rezultat);</code>, this will put a reference to <code>rezultat</code> on the stack instead of its value. And it allows the function to return the given value to the variable of the caller, instead of just modifying a local variable/parameter.</p>\n\n<p>See also <a href=\"http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/\" rel=\"nofollow\">Passing arguments by reference</a> for more details.</p>\n"}], "owner": {"reputation": 23, "user_id": 4876081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617a95689f88a27372a6a1c1d61afa64?s=128&d=identicon&r=PG&f=1", "display_name": "mulaczos", "link": "https://stackoverflow.com/users/4876081/mulaczos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 34776155, "answer_count": 3, "score": -6, "last_activity_date": 1452717619, "creation_date": 1452715741, "last_edit_date": 1452715815, "question_id": 34776080, "link": "https://stackoverflow.com/questions/34776080/function-returns-a-wrong-number-c", "title": "Function returns a wrong number C++", "body": "<p>I've got a problem. Inside function \"pop\" , int rezultat has correct value, but outside, is 0. I don't know C++, but i have to do this for school, it took me 2 hours and i have no idea what I'm doing wrong... please help.</p>\n\n<pre><code>#include &lt;iostream&gt;\nint rezultat;\n\nstruct stosik {\n    int x;\n    stosik *next;\n};\n\nvoid push(stosik* &amp;stos, int x) {\n    stosik* tymczasowy = new stosik; \n    tymczasowy-&gt;x = x;\n    tymczasowy-&gt;next = stos;\n    stos=tymczasowy;\n    delete tymczasowy;\n}\n\nbool isEmpty(stosik* stos){\n    return stos != NULL;\n}\n\n//HERE@@@@@@@@@@@@@@@@@@@@@@@\nbool pop(stosik* &amp;stos, int rezultat){\n    if (!isEmpty(stos))     {\n        return false;\n    }\n    stosik* tymczasowy = stos;\n    rezultat =  tymczasowy -&gt; x;\n\n    if(stos-&gt;next !=NULL){ \n        tymczasowy = stos -&gt; next;\n        stos=tymczasowy;\n    }\n    else {\n            std::cout &lt;&lt; \"Nic\" &lt;&lt; std::endl;\n    }\n//        delete tymczasowy;\n    std::cout &lt;&lt;\"Rezultat na koncu dziala funkcji \"&lt;&lt;rezultat &lt;&lt; std::endl;\n    return true;\n}\n\n\nbool topEl(stosik* &amp;stos,  int* result, int mekeke){\n    if (isEmpty(stos))\n    {\n        return false;\n    }\n\n    *result = stos -&gt;x;\n    mekeke=*result;\n\n    return true;        \n}\n\n\nint main(){ \n    stosik* stos_roboczy=NULL; // deklaracja stosu, domy\u015blnie NULL\n\n    std::cout &lt;&lt; \"0 empty, 1 something \"&lt;&lt; std::endl;\n    std::cout &lt;&lt; isEmpty(stos_roboczy) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"\" &lt;&lt; std::endl;   \n\n\n    push(stos_roboczy, 5);\n    push(stos_roboczy, 15);\n    push(stos_roboczy, 25);\n\n    std::cout &lt;&lt; \"0 empty, 1 something&lt;&lt;std::endl;\n    std::cout &lt;&lt; isEmpty(stos_roboczy) &lt;&lt; std::endl; \n    std::cout &lt;&lt; \"\" &lt;&lt; std::endl;\n\n\n//AND HERE @@@@@@@@@@@@@@@@@@@@@@@\n\n    pop(stos_roboczy, rezultat);\n    std::cout &lt;&lt;\"Wrong result after function: \"&lt;&lt;rezultat &lt;&lt; std::endl;\n\n\n\n//        \n//        pop(stos_roboczy, rezultat);\n//        pop(stos_roboczy, rezultat);\n//        \n//        std::cout &lt;&lt; rezultat &lt;&lt; std::endl;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "function-pointers", "function-templates"], "comments": [{"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1452714745, "post_id": 34775555, "comment_id": 57296782, "body": "<code>BaseFactory::createInstance(object_components-&gt;Attribute(&quot;id&zwnj;&#8203;&quot;),n,m)</code> .. <code>m</code> is a pointer to a <code>std::map&lt;string, string&gt;</code> while you defined <code>createInstance</code> to take the 3rd argument as a pointer to <code>std::string</code> ... is that one of the errors?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1452715281, "post_id": 34775555, "comment_id": 57297091, "body": "Well, what are the errors? If there&#39;s way too many, then pick some to ask about."}], "owner": {"reputation": 394, "user_id": 1688591, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5e783892e141b8f7019747151ae7a579?s=128&d=identicon&r=PG", "display_name": "roymcclure", "link": "https://stackoverflow.com/users/1688591/roymcclure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1452715991, "creation_date": 1452713883, "last_edit_date": 1495540346, "question_id": 34775555, "link": "https://stackoverflow.com/questions/34775555/provide-self-registering-derived-classes-with-parameters-upon-construction", "title": "Provide self-registering derived classes with parameters upon construction", "body": "<p>I'm creating self-registering classes following <a href=\"https://stackoverflow.com/a/582456/1688591\">this example</a>:</p>\n\n<p>I got the example up and running but now I find myself in the trouble of needing to pass arguments to constructor of the derived class in a fashion similar to this:</p>\n\n<pre><code>int* n = generateRandomInteger();\nstd::string attributes = readFirstLine(file);\n// converts the string of attributes in a map of strings\nstd::map&lt;string, string&gt;* m = createMap(attributes);\n// n and m would be parameters that the constructor would use\nBase* b = BaseFactory::createInstance(object_components-&gt;Attribute(\"id\"),n,m);\n</code></pre>\n\n<p>All derived classes would be taking the same amount or arguments with the same type, so I guess the function template used to create the new object could use these fixed types.</p>\n\n<p>What I try is this:</p>\n\n<pre><code>#ifndef BFACT_H\n#define BFACT_H\n\n#include \"B.h\"\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nB * createT(int* a, std::string* b)\n{\n  return new T(a,b);\n}\n\nstruct BaseFactory {\n\n    //typedef std::map&lt;std::string, B*(*)(SDLGameObject*,std::map&lt;string,string&gt;*)&gt; map_type;\n    typedef std::map&lt;std::string, B*(*)(int*,std::string*)&gt; map_type;\n\n    static B * createInstance(std::string const&amp; s, int* a, std::string* b)  {\n        map_type::iterator it = getMap()-&gt;find(s);\n        if(it == getMap()-&gt;end())\n            return 0;\n        return it-&gt;second(a,b);\n    }\n\nprotected:\n    static map_type * getMap() {\n        // never delete'ed. (exist until program termination)\n        // because we can't guarantee correct destruction order \n        if(!map)\n        {\n          map = new map_type;\n        } \n        return map; \n    }\n\nprivate:\n    static map_type * map;\n\n};\n\ntemplate&lt;typename T&gt;\nstruct DerivedRegister : BaseFactory { \n\n    DerivedRegister(std::string const&amp; s)\n    { \n        getMap()-&gt;insert(std::make_pair(s, &amp;createT&lt;T&gt;(int*, std::string*)));\n    }\n};\n\n#endif // BFACT_H\n</code></pre>\n\n<p>but the number of errors I get is too damn high.</p>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1452715841, "post_id": 34775546, "comment_id": 57297407, "body": "Do you want to extract arbitrary lengths, or are they always fixed at 10 bits embedded in 16?  If so, you could handle four lots of 10 bits packed into 40 bits (five 8-bit bytes) (and then iterate for the next 40 bits)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1612753224, "post_id": 34775546, "comment_id": 116856413, "body": "Related: <a href=\"https://stackoverflow.com/q/66091979\">Keep only the 10 useful bits in 16-bit words</a> for AVX2 SIMD."}], "answers": [{"tags": [], "owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "is_accepted": false, "score": 3, "last_activity_date": 1589772827, "last_edit_date": 1589772827, "creation_date": 1452774036, "answer_id": 34789480, "question_id": 34775546, "link": "https://stackoverflow.com/questions/34775546/efficiently-packing-10-bit-data-on-unaligned-byte-boundries/34789480#34789480", "title": "Efficiently packing 10-bit data on unaligned byte boundries", "body": "<p>What you want can be done, but it depends on certain conditions and what you consider efficient.</p>\n\n<p>First, if the 2 arrays will always be 1 512-bit and 1 320-bit array, that is, if the arrays being passed will always be <code>uint64 (&amp;array512bits)[8]</code> and <code>uint64 (&amp;array320bits)[5]</code>, then it's actually orders of magnitude more efficient to hard code the padding. </p>\n\n<p>If you wanted to take <i>larger byte sequences</i> into account though, you could create an algorithm that takes the padding into account and shifts off the bits accordingly then iterating through the <code>uint64</code> values of the larger bit array. Going with this method however, introduces branches in the assembly that add computational time (e.g. <code>if (total_shifted &lt; bit_size)</code>, etc.). Even with optimizations on, the generated assembly would still be more complex than manually doing the shifts, as well, the code to do this would need to account for the size of each array to ensure they can fit into each other appropriately thus adding more compute time (or general code complexity).</p>\n\n<p>As an example, consider this manual shift code:</p>\n\n<pre><code>static void pack512to320_manual(uint64 (&amp;a512)[8], uint64 (&amp;a320)[5])\n{\n    a320[0] = (\n        (a512[0] &amp; 0x00000000000003FF)         | // 10 -&gt; 10\n        ((a512[0] &amp; 0x0000000003FF0000) &gt;&gt; 6)  | // 10 -&gt; 20\n        ((a512[0] &amp; 0x000003FF00000000) &gt;&gt; 12) | // 10 -&gt; 30\n        ((a512[0] &amp; 0x03FF000000000000) &gt;&gt; 18) | // 10 -&gt; 40\n        ((a512[1] &amp; 0x00000000000003FF) &lt;&lt; 40) | // 10 -&gt; 50\n        ((a512[1] &amp; 0x0000000003FF0000) &lt;&lt; 34) | // 10 -&gt; 60\n        ((a512[1] &amp; 0x0000000F00000000) &lt;&lt; 28)); // 4  -&gt; 64\n\n    a320[1] = (\n        ((a512[1] &amp; 0x000003F000000000) &gt;&gt; 36) | // 6  -&gt; 6\n        ((a512[1] &amp; 0x03FF000000000000) &gt;&gt; 42) | // 10 -&gt; 16\n        ((a512[2] &amp; 0x00000000000003FF) &lt;&lt; 16) | // 10 -&gt; 26\n        ((a512[2] &amp; 0x0000000003FF0000) &lt;&lt; 10) | // 10 -&gt; 36\n        ((a512[2] &amp; 0x000003FF00000000) &lt;&lt; 4)  | // 10 -&gt; 46\n        ((a512[2] &amp; 0x03FF000000000000) &gt;&gt; 2)  | // 10 -&gt; 56\n        ((a512[3] &amp; 0x00000000000000FF) &lt;&lt; 56)); // 8  -&gt; 64\n\n    a320[2] = (\n        ((a512[3] &amp; 0x0000000000000300) &gt;&gt; 8)  | // 2  -&gt; 2\n        ((a512[3] &amp; 0x0000000003FF0000) &gt;&gt; 14) | // 10 -&gt; 12\n        ((a512[3] &amp; 0x000003FF00000000) &gt;&gt; 20) | // 10 -&gt; 22\n        ((a512[3] &amp; 0x03FF000000000000) &gt;&gt; 26) | // 10 -&gt; 32\n        ((a512[4] &amp; 0x00000000000003FF) &lt;&lt; 32) | // 10 -&gt; 42\n        ((a512[4] &amp; 0x0000000003FF0000) &lt;&lt; 26) | // 10 -&gt; 52\n        ((a512[4] &amp; 0x000003FF00000000) &lt;&lt; 20) | // 10 -&gt; 62\n        ((a512[4] &amp; 0x0003000000000000) &lt;&lt; 14)); // 2  -&gt; 64\n\n    a320[3] = (\n        ((a512[4] &amp; 0x03FC000000000000) &gt;&gt; 50) | // 8  -&gt; 8\n        ((a512[5] &amp; 0x00000000000003FF) &lt;&lt; 8)  | // 10 -&gt; 18\n        ((a512[5] &amp; 0x0000000003FF0000) &lt;&lt; 2)  | // 10 -&gt; 28\n        ((a512[5] &amp; 0x000003FF00000000) &gt;&gt; 4)  | // 10 -&gt; 38\n        ((a512[5] &amp; 0x03FF000000000000) &gt;&gt; 10) | // 10 -&gt; 48\n        ((a512[6] &amp; 0x00000000000003FF) &lt;&lt; 48) | // 10 -&gt; 58\n        ((a512[6] &amp; 0x00000000003F0000) &lt;&lt; 42)); // 6  -&gt; 64\n\n    a320[4] = (\n        ((a512[6] &amp; 0x0000000003C00000) &gt;&gt; 22) | // 4  -&gt; 4\n        ((a512[6] &amp; 0x000003FF00000000) &gt;&gt; 28) | // 10 -&gt; 14\n        ((a512[6] &amp; 0x03FF000000000000) &gt;&gt; 34) | // 10 -&gt; 24\n        ((a512[7] &amp; 0x00000000000003FF) &lt;&lt; 24) | // 10 -&gt; 34\n        ((a512[7] &amp; 0x0000000003FF0000) &lt;&lt; 18) | // 10 -&gt; 44\n        ((a512[7] &amp; 0x000003FF00000000) &lt;&lt; 12) | // 10 -&gt; 54\n        ((a512[7] &amp; 0x03FF000000000000) &lt;&lt; 6));  // 10 -&gt; 64\n}\n</code></pre>\n\n<p>This code will only accept arrays of <code>uint64</code> types that will fit into each other with the 10-bit boundary taken into account and shifts accordingly such that the 512-bit array is packed into the 320-bit array, so doing something like <code>uint64* a512p = a512; pack512to320_manual(a512p, a320);</code> will fail at compile time since <code>a512p</code> is not a <code>uint64 (&amp;)[8]</code> (i.e. type-safety). Note that this code is expanded fully to show the bit shifting sequences, but you could use <code>#define</code>'s or an <code>enum</code> to avoid \"magic numbers\" and make the code potentially clearer.</p>\n\n<p>If you wanted to expand this to take larger byte sequences into account, you could do something like the following:</p>\n\n<pre><code>template &lt; std::size_t X, std::size_t Y &gt;\nstatic void pack512to320_loop(const uint64 (&amp;array512bits)[X], uint64 (&amp;array320bits)[Y])\n{\n    const uint64* start = array512bits;\n    const uint64* end = array512bits + (X-1);\n    uint64 tmp = *start;\n    uint64 tmask = 0;\n    int i = 0, tot = 0, stot = 0, rem = 0, z = 0;\n    bool excess = false;\n    while (start &lt;= end) {\n        while (stot &lt; bit_size) {\n            array320bits[i] |= ((tmp &amp; 0x00000000000003FF) &lt;&lt; tot);\n            tot += 10; // increase shift left by 10 bits\n            tmp = tmp &gt;&gt; 16; // shift off 2 bytes\n            stot += 16; // increase shifted total\n            if ((excess = ((tot + 10) &gt;= bit_size))) { break; }\n        }\n        if (stot == bit_size) {\n            tmp = *(++start); // get next value\n            stot = 0;\n        }\n        if (excess) {\n            rem = (bit_size - tot); // remainder bits to shift off\n            tot = 0;\n            // create the mask\n            tmask = 0;\n            for (z = 0; z &lt; rem; ++z) { tmask |= (1 &lt;&lt; z); }\n            // get the last bits\n            array320bits[i++] |= ((tmp &amp; tmask) &lt;&lt; (bit_size - rem));\n            // shift off and adjust\n            tmp = tmp &gt;&gt; rem;\n            rem = (10 - rem);\n            // new mask\n            tmask = 0;\n            for (z = 0; z &lt; rem; ++z) { tmask |= (1 &lt;&lt; z); }\n            array320bits[i] = (tmp &amp; tmask);\n\n            tot += rem; // increase shift left by remainder bits\n            tmp = tmp &gt;&gt; (rem + 6); // shift off 2 bytes\n            stot += 16;\n            excess = false;\n        }\n    }\n}\n</code></pre>\n\n<p>This code also takes the byte boundaries into account and packs them into the 512-bit array. This code, however, does <i>not</i> do any error checking to ensure the sizes will properly match, so if <code>X % 8 != 0</code> and <code>Y % 5 != 0</code> (where <code>X</code> and <code>Y</code> > 0), you could get invalid results! Additionally, it's much slower than the manual version due to the looping, temporaries and shifting involved, as well, it could take more time for a first time reader of the function code to decipher the full intent and context of the loop code vs. that of the bit-shifting version.</p>\n\n<p>If you want something in-between the two, you could use the manual packing function and iterate over the larger byte arrays in groups of 8 and 5 to ensure the bytes align properly; something similar to the following:</p>\n\n<pre><code>template &lt; std::size_t X, std::size_t Y &gt;\nstatic void pack512to320_manual_loop(const uint64 (&amp;array512bits)[X], uint64 (&amp;array320bits)[Y])\n{\n    if (((X == 0) || (X % 8 != 0)) || ((Y == 0) || (Y % 5 != 0)) || ((X &lt; Y) || (Y % X != Y))) {\n        // handle invalid sizes how you need here\n        std::cerr &lt;&lt; \"Invalid sizes!\" &lt;&lt; std::endl;\n        return;\n    }\n    uint64* a320 = array320bits;\n    const uint64* end = array512bits + (X-1);\n    for (const uint64* a512 = array512bits; a512 &lt; end; a512 += 8) {\n        *a320 = (\n            (a512[0] &amp; 0x00000000000003FF)         | // 10 -&gt; 10\n            ((a512[0] &amp; 0x0000000003FF0000) &gt;&gt; 6)  | // 10 -&gt; 20\n            ((a512[0] &amp; 0x000003FF00000000) &gt;&gt; 12) | // 10 -&gt; 30\n            ((a512[0] &amp; 0x03FF000000000000) &gt;&gt; 18) | // 10 -&gt; 40\n            ((a512[1] &amp; 0x00000000000003FF) &lt;&lt; 40) | // 10 -&gt; 50\n            ((a512[1] &amp; 0x0000000003FF0000) &lt;&lt; 34) | // 10 -&gt; 60\n            ((a512[1] &amp; 0x0000000F00000000) &lt;&lt; 28)); // 4  -&gt; 64\n        ++a320;\n\n        *a320 = (\n            ((a512[1] &amp; 0x000003F000000000) &gt;&gt; 36) | // 6  -&gt; 6\n            ((a512[1] &amp; 0x03FF000000000000) &gt;&gt; 42) | // 10 -&gt; 16\n            ((a512[2] &amp; 0x00000000000003FF) &lt;&lt; 16) | // 10 -&gt; 26\n            ((a512[2] &amp; 0x0000000003FF0000) &lt;&lt; 10) | // 10 -&gt; 36\n            ((a512[2] &amp; 0x000003FF00000000) &lt;&lt; 4)  | // 10 -&gt; 46\n            ((a512[2] &amp; 0x03FF000000000000) &gt;&gt; 2)  | // 10 -&gt; 56\n            ((a512[3] &amp; 0x00000000000000FF) &lt;&lt; 56)); // 8  -&gt; 64\n        ++a320;\n\n        *a320 = (\n            ((a512[3] &amp; 0x0000000000000300) &gt;&gt; 8)  | // 2  -&gt; 2\n            ((a512[3] &amp; 0x0000000003FF0000) &gt;&gt; 14) | // 10 -&gt; 12\n            ((a512[3] &amp; 0x000003FF00000000) &gt;&gt; 20) | // 10 -&gt; 22\n            ((a512[3] &amp; 0x03FF000000000000) &gt;&gt; 26) | // 10 -&gt; 32\n            ((a512[4] &amp; 0x00000000000003FF) &lt;&lt; 32) | // 10 -&gt; 42\n            ((a512[4] &amp; 0x0000000003FF0000) &lt;&lt; 26) | // 10 -&gt; 52\n            ((a512[4] &amp; 0x000003FF00000000) &lt;&lt; 20) | // 10 -&gt; 62\n            ((a512[4] &amp; 0x0003000000000000) &lt;&lt; 14)); // 2  -&gt; 64\n        ++a320;\n\n        *a320 = (\n            ((a512[4] &amp; 0x03FC000000000000) &gt;&gt; 50) | // 8  -&gt; 8\n            ((a512[5] &amp; 0x00000000000003FF) &lt;&lt; 8)  | // 10 -&gt; 18\n            ((a512[5] &amp; 0x0000000003FF0000) &lt;&lt; 2)  | // 10 -&gt; 28\n            ((a512[5] &amp; 0x000003FF00000000) &gt;&gt; 4)  | // 10 -&gt; 38\n            ((a512[5] &amp; 0x03FF000000000000) &gt;&gt; 10) | // 10 -&gt; 48\n            ((a512[6] &amp; 0x00000000000003FF) &lt;&lt; 48) | // 10 -&gt; 58\n            ((a512[6] &amp; 0x00000000003F0000) &lt;&lt; 42)); // 6  -&gt; 64\n        ++a320;\n\n        *a320 = (\n            ((a512[6] &amp; 0x0000000003C00000) &gt;&gt; 22) | // 4  -&gt; 4\n            ((a512[6] &amp; 0x000003FF00000000) &gt;&gt; 28) | // 10 -&gt; 14\n            ((a512[6] &amp; 0x03FF000000000000) &gt;&gt; 34) | // 10 -&gt; 24\n            ((a512[7] &amp; 0x00000000000003FF) &lt;&lt; 24) | // 10 -&gt; 34\n            ((a512[7] &amp; 0x0000000003FF0000) &lt;&lt; 18) | // 10 -&gt; 44\n            ((a512[7] &amp; 0x000003FF00000000) &lt;&lt; 12) | // 10 -&gt; 54\n            ((a512[7] &amp; 0x03FF000000000000) &lt;&lt; 6));  // 10 -&gt; 64\n        ++a320;\n    }\n}\n</code></pre>\n\n<p>This is similar to the manual packing function and only adds a trivial amount of time for the checks but can handle larger arrays that will pack into each other cleanly (again, expanded to show the sequence).</p>\n\n<p>Timing the examples above with <code>g++ 4.2.1</code> using <code>-O3</code> on an i7@2.2GHz yielded these average times:</p>\n\n<blockquote>\n  <p><code>pack512to320_loop</code>: 0.135 us</p>\n  \n  <p><code>pack512to320_manual</code>: 0.0017 us</p>\n  \n  <p><code>pack512to320_manual_loop</code>: 0.0020 us</p>\n</blockquote>\n\n<p>And here is the test code used to test the input/output and general timing:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#if defined(_MSC_VER)\n    #include &lt;cstdint&gt;\n    #include &lt;windows.h&gt;\n    #define timesruct LARGE_INTEGER\n    #define dotick(v) QueryPerformanceCounter(&amp;v)\n    timesruct freq;\n#else\n    #define timesruct struct timespec\n    #define dotick(v) clock_gettime(CLOCK_MONOTONIC, &amp;v)\n#endif\n\nstatic const std::size_t bit_size = sizeof(uint64) * 8;\n\ntemplate &lt; std::size_t X, std::size_t Y &gt;\nstatic void pack512to320_loop(const uint64 (&amp;array512bits)[X], uint64 (&amp;array320bits)[Y])\n{\n    const uint64* start = array512bits;\n    const uint64* end = array512bits + (X-1);\n    uint64 tmp = *start;\n    uint64 tmask = 0;\n    int i = 0, tot = 0, stot = 0, rem = 0, z = 0;\n    bool excess = false;\n    // this line is only here for validities sake,\n    // it was commented out during testing for performance\n    for (z = 0; z &lt; Y; ++z) { array320bits[z] = 0; }\n    while (start &lt;= end) {\n        while (stot &lt; bit_size) {\n            array320bits[i] |= ((tmp &amp; 0x00000000000003FF) &lt;&lt; tot);\n            tot += 10; // increase shift left by 10 bits\n            tmp = tmp &gt;&gt; 16; // shift off 2 bytes\n            stot += 16; // increase shifted total\n            if ((excess = ((tot + 10) &gt;= bit_size))) { break; }\n        }\n        if (stot == bit_size) {\n            tmp = *(++start); // get next value\n            stot = 0;\n        }\n        if (excess) {\n            rem = (bit_size - tot); // remainder bits to shift off\n            tot = 0;\n            // create the mask\n            tmask = 0;\n            for (z = 0; z &lt; rem; ++z) { tmask |= (1 &lt;&lt; z); }\n            // get the last bits\n            array320bits[i++] |= ((tmp &amp; tmask) &lt;&lt; (bit_size - rem));\n            // shift off and adjust\n            tmp = tmp &gt;&gt; rem;\n            rem = (10 - rem);\n            // new mask\n            tmask = 0;\n            for (z = 0; z &lt; rem; ++z) { tmask |= (1 &lt;&lt; z); }\n            array320bits[i] = (tmp &amp; tmask);\n\n            tot += rem; // increase shift left by remainder bits\n            tmp = tmp &gt;&gt; (rem + 6); // shift off 2 bytes\n            stot += 16;\n            excess = false;\n        }\n    }\n}\n\ntemplate &lt; std::size_t X, std::size_t Y &gt;\nstatic void pack512to320_manual_loop(const uint64 (&amp;array512bits)[X], uint64 (&amp;array320bits)[Y])\n{\n    if (((X == 0) || (X % 8 != 0)) || ((Y == 0) || (Y % 5 != 0)) || ((X &lt; Y) || (Y % X != Y))) {\n        // handle invalid sizes how you need here\n        std::cerr &lt;&lt; \"Invalid sizes!\" &lt;&lt; std::endl;\n        return;\n    }\n    uint64* a320 = array320bits;\n    const uint64* end = array512bits + (X-1);\n    for (const uint64* a512 = array512bits; a512 &lt; end; a512 += 8) {\n        *a320 = (\n            (a512[0] &amp; 0x00000000000003FF)         | // 10 -&gt; 10\n            ((a512[0] &amp; 0x0000000003FF0000) &gt;&gt; 6)  | // 10 -&gt; 20\n            ((a512[0] &amp; 0x000003FF00000000) &gt;&gt; 12) | // 10 -&gt; 30\n            ((a512[0] &amp; 0x03FF000000000000) &gt;&gt; 18) | // 10 -&gt; 40\n            ((a512[1] &amp; 0x00000000000003FF) &lt;&lt; 40) | // 10 -&gt; 50\n            ((a512[1] &amp; 0x0000000003FF0000) &lt;&lt; 34) | // 10 -&gt; 60\n            ((a512[1] &amp; 0x0000000F00000000) &lt;&lt; 28)); // 4  -&gt; 64\n        ++a320;\n\n        *a320 = (\n            ((a512[1] &amp; 0x000003F000000000) &gt;&gt; 36) | // 6  -&gt; 6\n            ((a512[1] &amp; 0x03FF000000000000) &gt;&gt; 42) | // 10 -&gt; 16\n            ((a512[2] &amp; 0x00000000000003FF) &lt;&lt; 16) | // 10 -&gt; 26\n            ((a512[2] &amp; 0x0000000003FF0000) &lt;&lt; 10) | // 10 -&gt; 36\n            ((a512[2] &amp; 0x000003FF00000000) &lt;&lt; 4)  | // 10 -&gt; 46\n            ((a512[2] &amp; 0x03FF000000000000) &gt;&gt; 2)  | // 10 -&gt; 56\n            ((a512[3] &amp; 0x00000000000000FF) &lt;&lt; 56)); // 8  -&gt; 64\n        ++a320;\n\n        *a320 = (\n            ((a512[3] &amp; 0x0000000000000300) &gt;&gt; 8)  | // 2  -&gt; 2\n            ((a512[3] &amp; 0x0000000003FF0000) &gt;&gt; 14) | // 10 -&gt; 12\n            ((a512[3] &amp; 0x000003FF00000000) &gt;&gt; 20) | // 10 -&gt; 22\n            ((a512[3] &amp; 0x03FF000000000000) &gt;&gt; 26) | // 10 -&gt; 32\n            ((a512[4] &amp; 0x00000000000003FF) &lt;&lt; 32) | // 10 -&gt; 42\n            ((a512[4] &amp; 0x0000000003FF0000) &lt;&lt; 26) | // 10 -&gt; 52\n            ((a512[4] &amp; 0x000003FF00000000) &lt;&lt; 20) | // 10 -&gt; 62\n            ((a512[4] &amp; 0x0003000000000000) &lt;&lt; 14)); // 2  -&gt; 64\n        ++a320;\n\n        *a320 = (\n            ((a512[4] &amp; 0x03FC000000000000) &gt;&gt; 50) | // 8  -&gt; 8\n            ((a512[5] &amp; 0x00000000000003FF) &lt;&lt; 8)  | // 10 -&gt; 18\n            ((a512[5] &amp; 0x0000000003FF0000) &lt;&lt; 2)  | // 10 -&gt; 28\n            ((a512[5] &amp; 0x000003FF00000000) &gt;&gt; 4)  | // 10 -&gt; 38\n            ((a512[5] &amp; 0x03FF000000000000) &gt;&gt; 10) | // 10 -&gt; 48\n            ((a512[6] &amp; 0x00000000000003FF) &lt;&lt; 48) | // 10 -&gt; 58\n            ((a512[6] &amp; 0x00000000003F0000) &lt;&lt; 42)); // 6  -&gt; 64\n        ++a320;\n\n        *a320 = (\n            ((a512[6] &amp; 0x0000000003C00000) &gt;&gt; 22) | // 4  -&gt; 4\n            ((a512[6] &amp; 0x000003FF00000000) &gt;&gt; 28) | // 10 -&gt; 14\n            ((a512[6] &amp; 0x03FF000000000000) &gt;&gt; 34) | // 10 -&gt; 24\n            ((a512[7] &amp; 0x00000000000003FF) &lt;&lt; 24) | // 10 -&gt; 34\n            ((a512[7] &amp; 0x0000000003FF0000) &lt;&lt; 18) | // 10 -&gt; 44\n            ((a512[7] &amp; 0x000003FF00000000) &lt;&lt; 12) | // 10 -&gt; 54\n            ((a512[7] &amp; 0x03FF000000000000) &lt;&lt; 6));  // 10 -&gt; 64\n        ++a320;\n    }\n}\n\nstatic void pack512to320_manual(uint64 (&amp;a512)[8], uint64 (&amp;a320)[5])\n{\n    a320[0] = (\n        (a512[0] &amp; 0x00000000000003FF)         | // 10 -&gt; 10\n        ((a512[0] &amp; 0x0000000003FF0000) &gt;&gt; 6)  | // 10 -&gt; 20\n        ((a512[0] &amp; 0x000003FF00000000) &gt;&gt; 12) | // 10 -&gt; 30\n        ((a512[0] &amp; 0x03FF000000000000) &gt;&gt; 18) | // 10 -&gt; 40\n        ((a512[1] &amp; 0x00000000000003FF) &lt;&lt; 40) | // 10 -&gt; 50\n        ((a512[1] &amp; 0x0000000003FF0000) &lt;&lt; 34) | // 10 -&gt; 60\n        ((a512[1] &amp; 0x0000000F00000000) &lt;&lt; 28)); // 4  -&gt; 64\n\n    a320[1] = (\n        ((a512[1] &amp; 0x000003F000000000) &gt;&gt; 36) | // 6  -&gt; 6\n        ((a512[1] &amp; 0x03FF000000000000) &gt;&gt; 42) | // 10 -&gt; 16\n        ((a512[2] &amp; 0x00000000000003FF) &lt;&lt; 16) | // 10 -&gt; 26\n        ((a512[2] &amp; 0x0000000003FF0000) &lt;&lt; 10) | // 10 -&gt; 36\n        ((a512[2] &amp; 0x000003FF00000000) &lt;&lt; 4)  | // 10 -&gt; 46\n        ((a512[2] &amp; 0x03FF000000000000) &gt;&gt; 2)  | // 10 -&gt; 56\n        ((a512[3] &amp; 0x00000000000000FF) &lt;&lt; 56)); // 8  -&gt; 64\n\n    a320[2] = (\n        ((a512[3] &amp; 0x0000000000000300) &gt;&gt; 8)  | // 2  -&gt; 2\n        ((a512[3] &amp; 0x0000000003FF0000) &gt;&gt; 14) | // 10 -&gt; 12\n        ((a512[3] &amp; 0x000003FF00000000) &gt;&gt; 20) | // 10 -&gt; 22\n        ((a512[3] &amp; 0x03FF000000000000) &gt;&gt; 26) | // 10 -&gt; 32\n        ((a512[4] &amp; 0x00000000000003FF) &lt;&lt; 32) | // 10 -&gt; 42\n        ((a512[4] &amp; 0x0000000003FF0000) &lt;&lt; 26) | // 10 -&gt; 52\n        ((a512[4] &amp; 0x000003FF00000000) &lt;&lt; 20) | // 10 -&gt; 62\n        ((a512[4] &amp; 0x0003000000000000) &lt;&lt; 14)); // 2  -&gt; 64\n\n    a320[3] = (\n        ((a512[4] &amp; 0x03FC000000000000) &gt;&gt; 50) | // 8  -&gt; 8\n        ((a512[5] &amp; 0x00000000000003FF) &lt;&lt; 8)  | // 10 -&gt; 18\n        ((a512[5] &amp; 0x0000000003FF0000) &lt;&lt; 2)  | // 10 -&gt; 28\n        ((a512[5] &amp; 0x000003FF00000000) &gt;&gt; 4)  | // 10 -&gt; 38\n        ((a512[5] &amp; 0x03FF000000000000) &gt;&gt; 10) | // 10 -&gt; 48\n        ((a512[6] &amp; 0x00000000000003FF) &lt;&lt; 48) | // 10 -&gt; 58\n        ((a512[6] &amp; 0x00000000003F0000) &lt;&lt; 42)); // 6  -&gt; 64\n\n    a320[4] = (\n        ((a512[6] &amp; 0x0000000003C00000) &gt;&gt; 22) | // 4  -&gt; 4\n        ((a512[6] &amp; 0x000003FF00000000) &gt;&gt; 28) | // 10 -&gt; 14\n        ((a512[6] &amp; 0x03FF000000000000) &gt;&gt; 34) | // 10 -&gt; 24\n        ((a512[7] &amp; 0x00000000000003FF) &lt;&lt; 24) | // 10 -&gt; 34\n        ((a512[7] &amp; 0x0000000003FF0000) &lt;&lt; 18) | // 10 -&gt; 44\n        ((a512[7] &amp; 0x000003FF00000000) &lt;&lt; 12) | // 10 -&gt; 54\n        ((a512[7] &amp; 0x03FF000000000000) &lt;&lt; 6));  // 10 -&gt; 64\n}\n\ntemplate &lt; std::size_t N &gt;\nstatic void printit(uint64 (&amp;arr)[N])\n{\n    for (std::size_t i = 0; i &lt; N; ++i) {\n        std::cout &lt;&lt; \"arr[\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; arr[i] &lt;&lt; std::endl;\n    }\n}\n\nstatic double elapsed_us(timesruct init, timesruct end)\n{\n    #if defined(_MSC_VER)\n        if (freq.LowPart == 0) { QueryPerformanceFrequency(&amp;freq); }\n        return (static_cast&lt;double&gt;(((end.QuadPart - init.QuadPart) * 1000000)) / static_cast&lt;double&gt;(freq.QuadPart));\n    #else\n        return ((end.tv_sec - init.tv_sec) * 1000000) + (static_cast&lt;double&gt;((end.tv_nsec - init.tv_nsec)) / 1000);\n    #endif\n}\n\nint main(int argc, char* argv[])\n{\n    uint64 val = 0x039F039F039F039F;\n    uint64 a512[] = { val, val, val, val, val, val, val, val };\n    uint64 a320[] = { 0, 0, 0, 0, 0 };\n    int max_cnt = 1000000;\n    timesruct init, end;\n    std::cout &lt;&lt; std::hex;\n\n    dotick(init);\n    for (int i = 0; i &lt; max_cnt; ++i) {\n        pack512to320_loop(a512, a320);\n    }\n    dotick(end);\n    printit(a320);\n    // rough estimate of timing / divide by iterations\n    std::cout &lt;&lt; \"avg. us = \" &lt;&lt; (elapsed_us(init, end) / max_cnt) &lt;&lt; \" us\" &lt;&lt; std::endl;\n\n    dotick(init);\n    for (int i = 0; i &lt; max_cnt; ++i) {\n        pack512to320_manual(a512, a320);\n    }\n    dotick(end);\n    printit(a320);\n    // rough estimate of timing / divide by iterations\n    std::cout &lt;&lt; \"avg. us = \" &lt;&lt; (elapsed_us(init, end) / max_cnt) &lt;&lt; \" us\" &lt;&lt; std::endl;\n\n    dotick(init);\n    for (int i = 0; i &lt; max_cnt; ++i) {\n        pack512to320_manual_loop(a512, a320);\n    }\n    dotick(end);\n    printit(a320);\n    // rough estimate of timing / divide by iterations\n    std::cout &lt;&lt; \"avg. us = \" &lt;&lt; (elapsed_us(init, end) / max_cnt) &lt;&lt; \" us\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Again, this is just generic test code and your results might vary.</p>\n\n<p>Hope that can help.</p>\n"}], "owner": {"reputation": 73, "user_id": 1188999, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/11826018205ad206b2c7ce81c51ecccd?s=128&d=identicon&r=PG", "display_name": "user1188999", "link": "https://stackoverflow.com/users/1188999/user1188999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1589772827, "creation_date": 1452713862, "question_id": 34775546, "link": "https://stackoverflow.com/questions/34775546/efficiently-packing-10-bit-data-on-unaligned-byte-boundries", "title": "Efficiently packing 10-bit data on unaligned byte boundries", "body": "<p>I'm trying to do some bit packing on multiples that don't align to byte boundries. Here's specifically what I'm trying to do.</p>\n\n<p>I have a 512-bit array (8 64-bit integers) of data. Inside that array is 10-bit data aligned to 2 bytes. What I need to do is strip that 512-bits down to 320-bits of just the 10-bit data (5 64-bit integers).</p>\n\n<p>I can think of the manual way to do that where I go through each 2-byte sections of the 512-bit array, mask out the 10-bits, or it together taking into account byte boundaries and create the output 64-bit integers. something like this:</p>\n\n<pre><code>void pack512to320bits(uint64 (&amp;array512bits)[8], uint64 (&amp;array320bits)[5])\n{\n    array320bits[0] = (array512bits[0] &amp; maskFor10bits) | ((array512bits[0] &amp; (maskFor10bits &lt;&lt; 16)) &lt;&lt; 10) | \n                  ((array512bits[0] &amp; (maskFor10bits &lt;&lt; 32)) &lt;&lt; 20) | ((array512bits[0] &lt;&lt; 48) &lt;&lt; 30) | \n                  ((arrayFor512bits[1] &amp; (maskFor10bits)) &lt;&lt; 40) | ((arrayFor512bits[1] &amp; (maskFor10bits &lt;&lt; 16)) &lt;&lt; 50) |\n                  ((arrayFor512bits[1] &amp; (0xF &lt;&lt; 32)) &lt;&lt; 60);\n    array320bits[1] = 0;\n    array320bits[2] = 0;\n    array320bits[3] = 0;\n    array320bits[4] = 0;\n}\n</code></pre>\n\n<p>I know this will work but it seems error prone and doesn't easily expand to larger byte sequences.</p>\n\n<p>Alternatively I could go through the input array, strip out all the 10 bit values into a vector, then concatenate them at the end, again making sure I align to byte boundaries. Something like this:</p>\n\n<pre><code>void pack512to320bits(uint64 (&amp;array512bits)[8], uint64 (&amp;array320bits)[5])\n{\n    static uint64 maskFor10bits = 0x3FF;\n    std::vector&lt;uint16&gt; maskedPixelBytes(8 * 4);\n\n    for (unsigned int qword = 0; qword &lt; 8; ++qword)\n    {\n        for (unsigned int pixelBytes = 0; pixelBytes &lt; 4; ++pixelBytes)\n        {\n        maskedPixelBytes[qword * 4 + pixelBytes] = (array512bits[qword] &amp; (maskFor10bits &lt;&lt; (16 * pixelbytes)));\n        } \n    }\n    array320bits[0] = maskedPixelBytes[0] | (maskedPixelBytes[1] &lt;&lt; 10) | (maskedPixelBytes[2] &lt;&lt; 20) | (maskedPixelBytes[3] &lt;&lt; 30) |\n                  (maskedPixelBytes[4] &lt;&lt; 40) | (maskedPixelBytes[5] &lt;&lt; 50) | (maskedPixelBytes[6] &lt;&lt; 60);\n    array320bits[1] = (maskedPixelBytes[6] &gt;&gt; 4) | (maskedPixelBytes[7] &lt;&lt; 6) ...\n\n\n    array320bits[2] = 0;\n    array320bits[3] = 0;\n    array320bits[4] = 0;\n}\n</code></pre>\n\n<p>This way is a little easier to debug/read but is inefficient and again can't be expanded to larger byte sequences. I'm wondering if there is an easier/algorithmic way to do this sort of bit packing.</p>\n"}, {"tags": ["c++", "arrays", "file", "vector", "multidimensional-array"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452713892, "post_id": 34775480, "comment_id": 57296254, "body": "You are not handling the removal of all of the <code>[,],,</code> in the text"}, {"owner": {"reputation": 1514, "user_id": 60483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adc436035eb8d4f1b82043219761e9df?s=128&d=identicon&r=PG", "display_name": "James Matta", "link": "https://stackoverflow.com/users/60483/james-matta"}, "edited": false, "score": 0, "creation_date": 1452713954, "post_id": 34775480, "comment_id": 57296288, "body": "You need to read each of the numbers individually, skipping delimitters and such as you go."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1452714076, "post_id": 34775480, "comment_id": 57296380, "body": "You&#39;ll get more/better help if you spell out <i>what</i> errors, <i>what</i> the wrong output is and what it should be."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1452714995, "post_id": 34775480, "comment_id": 57296938, "body": "You have to read some books (Learning C++ by try and error is no good)"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1452715523, "post_id": 34775480, "comment_id": 57297217, "body": "There are no builtin functions for reading entire arrays from a file in C++. You need to write your own suitable code or use a library."}, {"owner": {"reputation": 95, "user_id": 5023199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://lh4.googleusercontent.com/-yNnyyzmta0Q/AAAAAAAAAAI/AAAAAAAAADE/4khKPmhtcMQ/photo.jpg?sz=128", "display_name": "Waleed A", "link": "https://stackoverflow.com/users/5023199/waleed-a"}, "edited": false, "score": 0, "creation_date": 1452715758, "post_id": 34775480, "comment_id": 57297357, "body": "thanks for your answer, yes, this is what i mean, whivh library i can use to read the content of the file directly in the variabless"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452715926, "post_id": 34775480, "comment_id": 57297457, "body": "@WaleedA Primary thing you need to implement is a loop. I&#39;ve voted to close the question being <i>too broad</i>, because there are many many ways to to that actually."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452716142, "post_id": 34775480, "comment_id": 57297581, "body": "@WaleedA Research a bit about parsing inputs. Asking for a library that does it for you is explicitly off-topic here."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452716670, "post_id": 34775480, "comment_id": 57297858, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/572962/reading-a-matrix-txt-file-and-storing-as-an-array\" title=\"reading a matrix txt file and storing as an array\">stackoverflow.com/questions/572962/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452716733, "post_id": 34775480, "comment_id": 57297896, "body": "Possible duplicate <a href=\"https://www.google.com/search?q=stackoverflow+c%2B%2B+read+file+matrix&amp;ie=utf-8&amp;oe=utf-8\" rel=\"nofollow noreferrer\">from &quot;stackoverflow c++ read file matrix&quot;</a>"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1452727630, "post_id": 34775480, "comment_id": 57302975, "body": "Since you seem to interpret some values you see: you should <b>always</b> check whether input was successful before using the values, e.g., using <code>if (f &gt;&gt; parameter &gt;&gt; physical) { ... }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 3383936, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/feba85bd9eb9e15f27da70c596f54a8b?s=128&d=identicon&r=PG", "display_name": "hamed1soleimani", "link": "https://stackoverflow.com/users/3383936/hamed1soleimani"}, "is_accepted": false, "score": 0, "last_activity_date": 1452755163, "creation_date": 1452755163, "answer_id": 34783542, "question_id": 34775480, "link": "https://stackoverflow.com/questions/34775480/reading-from-file-into-several-arrays/34783542#34783542", "title": "reading from file into several arrays", "body": "<p>you cant work with strings in this way. It seems that you are learning c++ with try/error method and it's the worst way to learn a programming language.\nI wrote a little sample to read a line of numbers in your format:</p>\n\n<pre><code>string x = \"1,0,1,0,1,0,1,0,1,0\";\nint array[10];\nfor(int i = 0; i &lt; x.size(); i+=2)\n    array[i / 2] = x[i] - '0';\n</code></pre>\n\n<p>numbers are at even indexes so we should iterate on even poses of the string. each of them are a char and we can obtain the int value by subtracting them from '0'.</p>\n"}], "owner": {"reputation": 95, "user_id": 5023199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://lh4.googleusercontent.com/-yNnyyzmta0Q/AAAAAAAAAAI/AAAAAAAAADE/4khKPmhtcMQ/photo.jpg?sz=128", "display_name": "Waleed A", "link": "https://stackoverflow.com/users/5023199/waleed-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452755163, "creation_date": 1452713641, "last_edit_date": 1452715350, "question_id": 34775480, "link": "https://stackoverflow.com/questions/34775480/reading-from-file-into-several-arrays", "title": "reading from file into several arrays", "body": "<p>I would like to write a c++ code that read a text file test.txt\nand write the conetent into several arrays.\nthe file looks like: </p>\n\n<pre><code>[7,13,17]\n[[0,1,1,0,0,1,0,0,1,0,0,0,0,0,1,0,0],\n[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\n[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],\n[1,0,0,1,0,0,0,0,0,1,1,1,0,0,1,0,0],\n[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],\n[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],\n[0,0,0,0,0,1,0,0,1,0,0,0,1,1,0,0,0],\n[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],\n[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0]]\n</code></pre>\n\n<p>the code i have written like</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n\n  int parameter[10];\n  int physical[7][7];\n\n  const char* filename;\n\n     filename = \"src/cplex_N7.txt\";\n\n      ifstream f(filename, ios::in);\n      if (!f) {\n         cerr &lt;&lt; \"No such file: \" &lt;&lt; filename &lt;&lt; endl;\n         throw(1);\n      }\n\n    f &gt;&gt; parameter &gt;&gt; physical ;\n  // cout  content\n   return 0;\n}\n</code></pre>\n\n<p>but i always got errors and wrong output, could you please help with doing this in the best way. I mean can i read the file without for loop or without handling the commas and splitters.</p>\n"}, {"tags": ["c++", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1452714305, "post_id": 34775449, "comment_id": 57296518, "body": "What <i>exact</i> problem are you experiencing? &#39;Compiler just read the array&#39; doesn&#39;t make much sense, to tell the truth since it&#39;s the compiler&#39;s job to read the code. What&#39;s more, you can just write <code>using namespace std;</code> and <code>cout</code> and <code>cerr</code>, etc will be available without using <code>std::</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5775469"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1452714445, "post_id": 34775449, "comment_id": 57296605, "body": "Just get this message: 2 * 5 3 4"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1452714546, "post_id": 34775449, "comment_id": 57296667, "body": "to be honest, I don&#39;t understand what your comment means: what does &#39;2 * 5 3 4&#39; mean??"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5775469"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1452714645, "post_id": 34775449, "comment_id": 57296729, "body": "It mean that I get this in console. It should be like:  2 3 4 5 *"}, {"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1452714780, "post_id": 34775449, "comment_id": 57296808, "body": "What&#39;s contained in the <code>&#47;home&#47;demir&#47;Downloads&#47;input.txt</code> file?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5775469"}, "edited": false, "score": 0, "creation_date": 1452714868, "post_id": 34775449, "comment_id": 57296857, "body": "It contatin those number that should be sorted. 2 * 5 3 4"}, {"owner": {"reputation": 4437, "user_id": 258418, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4677591288653a8dcc9041884e95c38c?s=128&d=identicon&r=PG", "display_name": "ted", "link": "https://stackoverflow.com/users/258418/ted"}, "edited": false, "score": 0, "creation_date": 1452715331, "post_id": 34775449, "comment_id": 57297118, "body": "Whats up with the *, have you heared of <code>std::swap</code> and how is something with `swap supposed to be an insertion sort? (Reads like a <a href=\"https://en.wikipedia.org/wiki/Selection_sort\" rel=\"nofollow noreferrer\">selection sort</a> for me)."}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1452716123, "post_id": 34775449, "comment_id": 57297568, "body": "Did you <i>get</i> <code>Insertion sort algorithm driver program</code> <i>in console</i>, preceding <code>2 * 5 3 4</code>?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5775469"}, "edited": false, "score": 0, "creation_date": 1452718190, "post_id": 34775578, "comment_id": 57298722, "body": "There is problem with reading, i debug program. Debuger stop here:      char fileLine[MAX_CHARS];     std::stringstream ss;     inStream.getline(fileLine, MAX_CHARS);     ss &lt;&lt; fileLine;     T elem;        while (ss &gt;&gt; elem) {         v.push_back( elem );     }"}, {"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1452721524, "post_id": 34775578, "comment_id": 57300327, "body": "You will probably need to <code>ss.seekg(0);</code> after writing to <code>ss</code> as well, so that the stream reads from the beginning."}], "tags": [], "owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "is_accepted": true, "score": 1, "last_activity_date": 1452715362, "last_edit_date": 1452715362, "creation_date": 1452713962, "answer_id": 34775578, "question_id": 34775449, "link": "https://stackoverflow.com/questions/34775449/array-can-be-sorted/34775578#34775578", "title": "Array can be sorted", "body": "<pre><code>while (!inStream.eof()&amp;&amp;possition&lt;array_size)\n   {\n       inStream.get(array[possition]);\n       possition++;\n   }\n</code></pre>\n\n<p>When you run through the loop above, you are consuming all the input. Therefore, when you call <code>readSortOutput</code> there is nothing left to read. You should use <code>inStream.seekg(0);</code> to reset your position in the file before trying to read the array again.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5775469"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 34775578, "answer_count": 1, "score": -2, "last_activity_date": 1452715362, "creation_date": 1452713552, "last_edit_date": 1452714888, "question_id": 34775449, "link": "https://stackoverflow.com/questions/34775449/array-can-be-sorted", "title": "Array can be sorted", "body": "<p>I have a problem with sorting array of char. There is a array 2 * 5 3 4 that should be sorted from file, but I can finde the error in the code. Compiler just read the array. Any suggestion, comment </p>\n\n<pre><code>#include &lt;iostream&gt; // cin cout endl\n#include &lt;fstream&gt; // ifstream\n#include &lt;sstream&gt; // stringstream\n#include &lt;stdlib.h&gt; //exit\n#include &lt;vector&gt;\n#include \"insertionSort.h\";\n\nusing std::cerr;\nusing std::cout;\nusing std::endl;\nusing std::ifstream;\nusing std::vector;\nusing namespace std;\n\n\nconst int MAX_CHARS = 200; // max length of each line to read from the input file\n\ntemplate&lt;class T&gt;\nvoid readSortOutput( char* typeName, vector&lt;T&gt; v, ifstream &amp;inStream );\n\nint main( )\n{\n    int array_size= 1024;\n    char *array = new char[array_size];\n    int possition;\n    ifstream inStream(\"/home/xx/Downloads/input.txt\");\n    cout &lt;&lt; \"Insertion sort algorithm driver program\" &lt;&lt; endl;\n\n    if( inStream.fail( ) )\n    {\n        cerr &lt;&lt; \"Input file opening failed.\\n\";\n        exit(1);\n    }\n   while (!inStream.eof()&amp;&amp;possition&lt;array_size)\n   {\n       inStream.get(array[possition]);\n       possition++;\n   }\n   array[possition-1] = '\\0';\n   cout &lt;&lt;\"Display the array\" &lt;&lt;endl &lt;&lt;endl;\n   for (int i=0;array[i] !='\\0';i++)\n   {\n       cout &lt;&lt;array[i];\n   }\n\n    vector&lt;int&gt; intVector;\n    readSortOutput( (char*)\"int\", intVector, inStream );\n\n    vector&lt;double&gt; dblVector;\n    readSortOutput( (char*)\"double\", dblVector, inStream );\n\n    vector&lt;char&gt; chrVector;\n    readSortOutput( (char*)\"char\", chrVector, inStream );\n\n    inStream.close( );\n\n    return 0;\n}\n\ntemplate&lt;class T&gt;\nvoid readSortOutput( char* typeName, vector&lt;T&gt; v, ifstream &amp;inStream )\n{\n    // read a line from the input stream into a stringstream\n    char fileLine[MAX_CHARS];\n    std::stringstream ss;\n    inStream.getline(fileLine, MAX_CHARS);\n    ss &lt;&lt; fileLine;\n\n    // extract elements of the specified type from the stringstream\n    T elem;\n       while (ss &gt;&gt; elem) {\n        v.push_back( elem );\n    }\n\n    cout &lt;&lt; endl &lt;&lt; typeName &lt;&lt; \" vector before insertion sort: \" &lt;&lt; endl;\n    for (int i = 0; i &lt; v.size( ); i++)\n        cout &lt;&lt; v[i] &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n\n    insertionSort( v ); // the sort itself\n\n    cout &lt;&lt; typeName &lt;&lt; \" vector after insertion sort: \" &lt;&lt; endl;\n    for (int i = 0; i &lt; v.size( ); i++)\n        cout &lt;&lt; v[i] &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n\n    return;\n} // readSortOutput\n</code></pre>\n\n<p>insertionSort.h</p>\n\n<pre><code>#ifndef INSERTIONSORT_H\n#define INSERTIONSORT_H\n\n#include &lt;vector&gt; // vector\n#include &lt;iostream&gt; // cin cout endl\n#include &lt;fstream&gt; // ifstream\n#include &lt;sstream&gt; // stringstream\n#include &lt;stdlib.h&gt; //exit\n\nusing std::vector;\n\n/*template&lt;class T&gt;\nvoid insertionSort(vector&lt;T&gt;&amp; data); // function replaces the given argument\n*/\n\n\ntemplate&lt;class T&gt;\nvoid insertionSort(vector&lt;T&gt;&amp; data)\n{\n    for (size_t i = 0; i &lt; data.size( ); i++)\n        for (size_t j = i; j &lt; data.size( ); j++)\n            if (data[ j ] &lt; data[ i ])\n            { // swap values\n                T temp = data[ j ];\n                data[ j ] = data[ i ];\n                data[ i ] = temp;\n            }\n\n    return;\n}\n#endif  // INSERTIONSORT_H\n</code></pre>\n"}, {"tags": ["c++", "arrays", "probability", "dice"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 8, "creation_date": 1452713325, "post_id": 34775332, "comment_id": 57295880, "body": "Just because something is indented doesn&#39;t mean it is inside the loop it is under."}, {"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1452713401, "post_id": 34775332, "comment_id": 57295938, "body": "Yes, C++ is (mostly) whitespace-insensitive. Logically you would want braces surrounding the first <code>for</code> loop&#39;s two lines."}, {"owner": {"reputation": 297, "user_id": 5297150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6bwQ.png?s=128&g=1", "display_name": "Kanga_Roo", "link": "https://stackoverflow.com/users/5297150/kanga-roo"}, "edited": false, "score": 0, "creation_date": 1452713502, "post_id": 34775332, "comment_id": 57296021, "body": "Is there an upper limit on how many dice a user can &#39;hold&#39;, or an assumed upper limit? If not you&#39;re going to have to dynamically allocate an array based on the user&#39;s choice"}, {"owner": {"reputation": 83, "user_id": 5398751, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/468fffe5e7d8de6ee824b7d97d6ba320?s=128&d=identicon&r=PG&f=1", "display_name": "Jarrod A.", "link": "https://stackoverflow.com/users/5398751/jarrod-a"}, "edited": false, "score": 0, "creation_date": 1452713551, "post_id": 34775332, "comment_id": 57296055, "body": "I know how to use loops, I was just going off of what we did together in class as a starting point. My teacher said that a<code>for</code> loop didn&#39;t need brackets if it was in the parenthesis, I&#39;m just really confused on this project and the way it was explained to me didn&#39;t help my understanding."}, {"owner": {"reputation": 83, "user_id": 5398751, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/468fffe5e7d8de6ee824b7d97d6ba320?s=128&d=identicon&r=PG&f=1", "display_name": "Jarrod A.", "link": "https://stackoverflow.com/users/5398751/jarrod-a"}, "edited": false, "score": 0, "creation_date": 1452713605, "post_id": 34775332, "comment_id": 57296094, "body": "Kangaroo, how would I make the number of spaces the Array creates equal to a users integer?"}], "answers": [{"tags": [], "owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1452713290, "creation_date": 1452713290, "answer_id": 34775384, "question_id": 34775332, "link": "https://stackoverflow.com/questions/34775332/dice-roll-simulator-c/34775384#34775384", "title": "Dice Roll Simulator C++", "body": "<p>You can use either a <code>std::vector&lt;int&gt;</code>, <code>int[DICE_COUNT]</code>, or even <code>std::vector&lt;Die&gt;</code>, creating a <code>Die</code> class. There's a large number of ways to do it, but basically think of the array/vector as storing the current state of a number of dice, which can then be recalled at a later point.</p>\n"}, {"tags": [], "owner": {"reputation": 297, "user_id": 5297150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A6bwQ.png?s=128&g=1", "display_name": "Kanga_Roo", "link": "https://stackoverflow.com/users/5297150/kanga-roo"}, "is_accepted": true, "score": 0, "last_activity_date": 1452777404, "last_edit_date": 1452777404, "creation_date": 1452714347, "answer_id": 34775691, "question_id": 34775332, "link": "https://stackoverflow.com/questions/34775332/dice-roll-simulator-c/34775691#34775691", "title": "Dice Roll Simulator C++", "body": "<p>If you have no upper limit on the number of dice that a user can choose (or rather no 'assumed' upper limit) then in order to store the results you'll need to allocate the array according to the user's input, which can be accomplished like so:</p>\n\n<pre><code>int *results = new int[dicenumber];\nfor(int i = 0; i &lt; dicenumber; i++){\n    // rolling the dice and storing the values...\n    *(results+i) = rand() % sides + 1;\n}// end for loop\n\n// viewing the results...\nfor(int i = 0; i &lt; dicenumber; i++){\n    cout &lt;&lt; *(results+i) &lt;&lt; endl;\n}\n...\n// end of program; free the memory when you're done\ndelete[] results;\n</code></pre>\n\n<p>In the above case, you're using a pointer <code>*results</code> to point to a specific address in memory, where using the <code>new</code> keyword allocated space for us to store the results of the die rolls. In this case, we've allocated a space equal to the size of an <code>int</code> times the number of dice. With each iteration of the for loop(s) we are incrementing the pointer, and thereby indexing through our array.</p>\n\n<p>However if you're just being introduced to arrays I find it highly unlikely your professor had pointer arithmetic in mind. Storing the results in a static array is considerably easier (or at least more intuitive); below is an example:</p>\n\n<pre><code>int results[32]; // allocated an array of size sizeof(int)*32, so space for 32 ints!\nfor(int i = 0; i &lt; dicenumber; i++){\n    // indexing through the array and assigning our roll...\n    results[i] = rand() % sides + 1;\n}// end for loop\n\n// viewing the results...\nfor(int i = 0; i &lt; dicenumber; i++){\n    cout &lt;&lt; results[i] &lt;&lt; endl;\n}// end for loop\n</code></pre>\n\n<p>Either way, yes, an array is a simple way to store the results of your program. As the other answer suggested you could indeed use a <code>std::vector&lt;int&gt;</code> or a vector of some other custom class/struct to store the results, but frankly anything beyond the static array is overkill (at least for a programming course...)</p>\n"}], "owner": {"reputation": 83, "user_id": 5398751, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/468fffe5e7d8de6ee824b7d97d6ba320?s=128&d=identicon&r=PG&f=1", "display_name": "Jarrod A.", "link": "https://stackoverflow.com/users/5398751/jarrod-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2714, "favorite_count": 0, "accepted_answer_id": 34775691, "answer_count": 2, "score": 1, "last_activity_date": 1452777404, "creation_date": 1452713089, "question_id": 34775332, "link": "https://stackoverflow.com/questions/34775332/dice-roll-simulator-c", "title": "Dice Roll Simulator C++", "body": "<p>In class we received an assignment to make a C++ program that simulates rolling a die (or multiple). Simple enough, I did that really easy, even got it to roll more than 1 die at once and to count how many times a number was rolled (2-12, as you'll see in the code at the bottom). But then the teacher gave us another assignment. Making the program roll how ever many dice the user inputs, how many sides the dice has based on user input, how many times the user wants the dice to be rolled, and being able to \"hold\" dice, like in the game Yahtzee.</p>\n\n<p>My classmates and I are really confused at how to do this, the hint the teacher gave us for creating the \"hold\" function involves Arrays. We're quite confused as the only Array example we have is the example we did in class, the original Dice simulator we made as an example and rolling two dice, etc.</p>\n\n<p>Below is my code for what I have so far. I'm aware not all my variables have a purpose, and I tried replicating the example below my code with Arrays, and I know I didn't do it right, so please go easy on me. I'm not asking for you to do the assignment for me, I just need some guidance on what to do next and what I'm doing wrong. The code with the comment tags are the original Dice Simulator I mentioned, and above is what I'm working on. Any help is appreciated.</p>\n\n<pre><code>srand (time(NULL));\nint dicenumber,diceroll,sides,rolls,rolling;\n//Be able to hold, ask how many dice to roll, how many sides per die, and how many rolls\ncout&lt;&lt;\"\\033[1;36m How many dice would you like to roll? \\033[0m \\n\";\ncin&gt;&gt;dicenumber;\ncout&lt;&lt;\"\\033[1;36m How many sides per die? \\033[0m \\n\";\ncin&gt;&gt;sides;\ncout&lt;&lt;\"\\033[1;36m How many times do you want to roll? \\033[0m \\n\";\ncin&gt;&gt;rolls;\n\n//Sets total rolls to 0\nfor (rolling=0;rolling&lt;rolls;rolling++)\n    diceroll=rand()%sides+1;\n    cout&lt;&lt;diceroll;\n\n\n\n\n//Initialize variables and randomness\n//srand (time(NULL));\n//int COUNTER,ROLLS,TOTALS[13];\n\n        //Set totals to 0\n//for (COUNTER=0;COUNTER&lt;13;COUNTER++)\n//TOTALS[COUNTER]=0;\n\n        //Simulate 1,000,000 dice rolls\n//for (ROLLS=0;ROLLS&lt;1000;ROLLS++)\n    //TOTALS[rand()%6+1+rand()%6+1]++;\n\n        //Output the totals\n//for (COUNTER=1;COUNTER&lt;13;COUNTER++)\n    //cout&lt;&lt;COUNTER&lt;&lt;\" = \\033[1;36m\"&lt;&lt;TOTALS[COUNTER]&lt;&lt;\"\\033[0m \\n\";\n</code></pre>\n"}, {"tags": ["c++", "qt", "filesystems", "tableview"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "edited": false, "score": 0, "creation_date": 1452800243, "post_id": 34776477, "comment_id": 57339516, "body": "i will try it as soon i get home, and is possible to convert it in mp3, or i should save it in fileByteArray? It&#39;s because i need to download it from data base, and save it user computer, be the final product need to be in mp3, or any extension that they can listen."}, {"owner": {"reputation": 3575, "user_id": 2750816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c28ad318c9e95eda7bf7ee211db86a76?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/2750816/evgeny"}, "reply_to_user": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "edited": false, "score": 0, "creation_date": 1452841848, "post_id": 34776477, "comment_id": 57354201, "body": "Are you sure your byte array is not empty after database query?"}, {"owner": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "edited": false, "score": 0, "creation_date": 1452854975, "post_id": 34776477, "comment_id": 57360788, "body": "Yes, because i&#39;m printing the size of the byte Array after the query and is not empty.. is very strange...."}, {"owner": {"reputation": 3575, "user_id": 2750816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c28ad318c9e95eda7bf7ee211db86a76?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/2750816/evgeny"}, "reply_to_user": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "edited": false, "score": 0, "creation_date": 1452949908, "post_id": 34776477, "comment_id": 57396418, "body": "@Afreeca there is no problems with you code except you have useless declaration <code>QFileDialog dialog;</code>. How do you check that file is empty? Also try to replace <code>f.write(fileByteArray);</code> with <code>f.write(&quot;12345&quot;);</code> and check if this data saved to file."}, {"owner": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "edited": false, "score": 0, "creation_date": 1453214653, "post_id": 34776477, "comment_id": 57497219, "body": "it&#39;s working if i try: f.write(&quot;12345&quot;), so why my byteArray file doesn&#39;t save? if isn&#39;t empty?"}, {"owner": {"reputation": 3575, "user_id": 2750816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c28ad318c9e95eda7bf7ee211db86a76?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/2750816/evgeny"}, "reply_to_user": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "edited": false, "score": 0, "creation_date": 1453218936, "post_id": 34776477, "comment_id": 57500466, "body": "I think it is empty."}, {"owner": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "edited": false, "score": 0, "creation_date": 1453226035, "post_id": 34776477, "comment_id": 57505149, "body": "I have been trying over and over again and until now no solution... The byte Array is not empty, so it should save it"}, {"owner": {"reputation": 3575, "user_id": 2750816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c28ad318c9e95eda7bf7ee211db86a76?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/2750816/evgeny"}, "reply_to_user": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "edited": false, "score": 0, "creation_date": 1453227384, "post_id": 34776477, "comment_id": 57505961, "body": "Ok then change <code>QByteArray fileByteArray = dbm.GetSharedFile(fileNameSelected);</code> with <code>QByteArray fileByteArray(&quot;test&quot;);</code> If this one will work then problem for sure with your DB query."}], "tags": [], "owner": {"reputation": 3575, "user_id": 2750816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c28ad318c9e95eda7bf7ee211db86a76?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/2750816/evgeny"}, "is_accepted": false, "score": 0, "last_activity_date": 1452717369, "last_edit_date": 1452717369, "creation_date": 1452717052, "answer_id": 34776477, "question_id": 34775256, "link": "https://stackoverflow.com/questions/34775256/qt-c-store-file-from-db-to-my-file-system/34776477#34776477", "title": "QT C++ Store file from DB to my file system", "body": "<p>There is static member at <code>QFileDialog</code> class:</p>\n\n<pre><code>QString QFileDialog::getSaveFileName(QWidget * parent = 0, const QString &amp; caption = QString(), const QString &amp; dir = QString(), const QString &amp; filter = QString(), QString * selectedFilter = 0, Options options = 0)\n</code></pre>\n\n<p>After you get filename with this method you should check string for empty and then do with file like you do</p>\n\n<p>Example:</p>\n\n<pre><code>QString fname =QFileDialog::getSaveFileName(); //you can set some params\nif (!fname.isEmpty()) {\n     QFile f(fname);\n     if(f.open(QIODevice::WriteOnly))\n         f.write(fileByteArray);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "is_accepted": false, "score": 0, "last_activity_date": 1452855396, "creation_date": 1452855396, "answer_id": 34809521, "question_id": 34775256, "link": "https://stackoverflow.com/questions/34775256/qt-c-store-file-from-db-to-my-file-system/34809521#34809521", "title": "QT C++ Store file from DB to my file system", "body": "<p>Like you can see the file byte array is not empty.... i may have done something wrong....</p>\n\n<pre><code>......\n......\nqDebug() &lt;&lt; \"row selected\" &lt;&lt; rowSelected;\nqDebug() &lt;&lt; \"file name to download\" &lt;&lt; fileNameSelected;\n\nQByteArray fileByteArray = dbm.GetSharedFile(fileNameSelected);\n\nqDebug() &lt;&lt; fileByteArray.size(); // Checking the file byte array size\n\nQFileDialog dialog;\n\n\nQString fname =QFileDialog::getSaveFileName(); //you can set some params\nif (!fname.isEmpty()) {\n     QFile f(fname);\n     if(f.open(QIODevice::WriteOnly))\n         f.write(fileByteArray);\n}\n\n       qDebug() &lt;&lt; fileByteArray.size(); // file size\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 1, "user_id": 5786126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KaWqrlLMMbg/AAAAAAAAAAI/AAAAAAAAAVQ/dFuaqtWaKu8/photo.jpg?sz=128", "display_name": "Afreeca", "link": "https://stackoverflow.com/users/5786126/afreeca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452855396, "creation_date": 1452712834, "question_id": 34775256, "link": "https://stackoverflow.com/questions/34775256/qt-c-store-file-from-db-to-my-file-system", "title": "QT C++ Store file from DB to my file system", "body": "<p>i need help, i have been researching and until now nothing, i'm creating a application in QT C++, to allow user to share files(.mp3, jpg and .txt), how can a get the file from tableview to store it in file system?</p>\n\n<pre><code>// getting file from DB\nQByteArray fileByteArray = dbm.GetSharedFile(fileNameSelected);\n\nQFileDialog dialog;\ndialog.setOptions(QFileDialog::DontUseNativeDialog);  // with or without this\ndialog.setFileMode(QFileDialog::AnyFile);\ndialog.setAcceptMode(QFileDialog::AcceptSave);\ndialog.setDirectory(\".\");\ndialog.selectFile(fileNameSelected);   // magic happens here\nint ret = dialog.exec();\n\nif (ret == QDialog::Accepted)\n{\n    QFile f(dialog.directory ().absolutePath());\n       f.open( QIODevice::WriteOnly );\n      f.write(fileByteArray);\n      ????\n      ???\n}\n</code></pre>\n\n<p>I can get the file from tableview, but after, i don't know how to save it using qfiledialog. best wishes</p>\n"}, {"tags": ["c++", "function", "unit-testing", "googletest"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 1566968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/59b419e917a853fe3aeaaec4f6b0ede4?s=128&d=identicon&r=PG", "display_name": "Utkarsh Kumar", "link": "https://stackoverflow.com/users/1566968/utkarsh-kumar"}, "edited": false, "score": 0, "creation_date": 1452723722, "post_id": 34776737, "comment_id": 57301376, "body": "Thanks for the reply.  So what according to you is a good way to design a system that achieves the same results without using Static Initialization ? Or, is there no other way ?"}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "reply_to_user": {"reputation": 385, "user_id": 1566968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/59b419e917a853fe3aeaaec4f6b0ede4?s=128&d=identicon&r=PG", "display_name": "Utkarsh Kumar", "link": "https://stackoverflow.com/users/1566968/utkarsh-kumar"}, "edited": false, "score": 0, "creation_date": 1452769137, "post_id": 34776737, "comment_id": 57319146, "body": "If you want something to happen before <code>main</code> is called, you will have to rely on static initialization. Obviously Google chose to implement it this way - I&#39;m just warning that great care must be taken to implement this properly - because it would be very easy to create an unstable implementation, as described in the C++ FAQ."}, {"owner": {"reputation": 385, "user_id": 1566968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/59b419e917a853fe3aeaaec4f6b0ede4?s=128&d=identicon&r=PG", "display_name": "Utkarsh Kumar", "link": "https://stackoverflow.com/users/1566968/utkarsh-kumar"}, "edited": false, "score": 0, "creation_date": 1452822071, "post_id": 34776737, "comment_id": 57349123, "body": "Your help is much appreciated :) Thanks a lot."}], "tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": true, "score": 3, "last_activity_date": 1452718123, "creation_date": 1452718123, "answer_id": 34776737, "question_id": 34775254, "link": "https://stackoverflow.com/questions/34775254/how-to-auto-register-test-cases-in-a-test-system/34776737#34776737", "title": "How to auto-register test cases in a test system?", "body": "<p>Generally this is done by creating global objects, which call a registration method when they are constructed. This goes against generally regarded \"good practices\" in C++ (see <a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"nofollow\">https://isocpp.org/wiki/faq/ctors#static-init-order</a>), so you should be quite versed in these issues before attempting such an implementation.</p>\n\n<p>Regardless, this is the method googletest uses - the <code>TEST</code> preprocessor macro eventually boils down to this (gtest-internal.h):</p>\n\n<pre><code>// Helper macro for defining tests.\n#define GTEST_TEST_(test_case_name, test_name, parent_class, parent_id)\\\nclass GTEST_TEST_CLASS_NAME_(test_case_name, test_name) : public parent_class {\\\n public:\\\n  GTEST_TEST_CLASS_NAME_(test_case_name, test_name)() {}\\\n private:\\\n  virtual void TestBody();\\\n  static ::testing::TestInfo* const test_info_ GTEST_ATTRIBUTE_UNUSED_;\\\n  GTEST_DISALLOW_COPY_AND_ASSIGN_(\\\n      GTEST_TEST_CLASS_NAME_(test_case_name, test_name));\\\n};\\\n\\\n::testing::TestInfo* const GTEST_TEST_CLASS_NAME_(test_case_name, test_name)\\\n  ::test_info_ =\\\n    ::testing::internal::MakeAndRegisterTestInfo(\\\n        #test_case_name, #test_name, NULL, NULL, \\\n        (parent_id), \\\n        parent_class::SetUpTestCase, \\\n        parent_class::TearDownTestCase, \\\n        new ::testing::internal::TestFactoryImpl&lt;\\\n            GTEST_TEST_CLASS_NAME_(test_case_name, test_name)&gt;);\\\nvoid GTEST_TEST_CLASS_NAME_(test_case_name, test_name)::TestBody()\n</code></pre>\n\n<p>So, when you use this macro, a global instance of a class which calls <code>::testing::internal::MakeAndRegisterTestInfo</code> with parameters corresponding to the test case.</p>\n"}], "owner": {"reputation": 385, "user_id": 1566968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/59b419e917a853fe3aeaaec4f6b0ede4?s=128&d=identicon&r=PG", "display_name": "Utkarsh Kumar", "link": "https://stackoverflow.com/users/1566968/utkarsh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "accepted_answer_id": 34776737, "answer_count": 1, "score": 3, "last_activity_date": 1452718123, "creation_date": 1452712833, "question_id": 34775254, "link": "https://stackoverflow.com/questions/34775254/how-to-auto-register-test-cases-in-a-test-system", "title": "How to auto-register test cases in a test system?", "body": "<p>Usually in test systems when we write a new testcase we need to register the test case somewhere so that it can be called. </p>\n\n<p>For example in a test system :\n<code>TESTCASE(a,b){...}</code> can map to <code>void testcase_a_b() {...}</code> and the test system may call each of these <code>void testcase_a_b()</code>, <code>void testcase_c_d()</code> etc. from main and hence run all the test cases.</p>\n\n<p>What is the way to auto-register test cases in an executable? For example, in Google Test (just like several other test frameworks), if we call <code>RUN_ALL_TESTS()</code> it automatically executes all the declarations starting with <code>TEST(a,b)</code> etc. in the executable.</p>\n\n<p>How does Google Test know about the existence of <code>TEST(a,b)</code> in the exe ? I am trying to understand(from a high level design perspective) what would be a simple way to implement a system like that one in C++. where a macro like TEST(a,b) automatically appends itself to the list of valid test cases, so that it can be run from main without worrying about registering it separately.</p>\n"}, {"tags": ["c#", "c++", ".net", "c++11", "gcc"], "comments": [{"owner": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 4, "creation_date": 1452712586, "post_id": 34775127, "comment_id": 57295449, "body": "Is <a href=\"https://www.google.co.in/\" rel=\"nofollow noreferrer\">Google</a> down?"}, {"owner": {"reputation": 43, "user_id": 4479776, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001313414704/picture?type=large", "display_name": "Vasiu Alexandru", "link": "https://stackoverflow.com/users/4479776/vasiu-alexandru"}, "reply_to_user": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 0, "creation_date": 1452712898, "post_id": 34775127, "comment_id": 57295641, "body": "@F\u1d00\u0280\u029c\u1d00\u0274A\u0274\u1d00\u1d0d I didn&#39;t find anything relevant :("}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4479776, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001313414704/picture?type=large", "display_name": "Vasiu Alexandru", "link": "https://stackoverflow.com/users/4479776/vasiu-alexandru"}, "edited": false, "score": 0, "creation_date": 1452798538, "post_id": 34775497, "comment_id": 57338568, "body": "So i get this error : <code>Additional information: Access is denied</code> ! the folder with complier is read-only I can&#39;t change that! I made the path of compiler global (I add the path to Environment Settings, System Path) and in cmd works ! What to do ?"}, {"owner": {"reputation": 3728, "user_id": 1779504, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/K8LTB.png?s=128&g=1", "display_name": "csharpfolk", "link": "https://stackoverflow.com/users/1779504/csharpfolk"}, "reply_to_user": {"reputation": 43, "user_id": 4479776, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001313414704/picture?type=large", "display_name": "Vasiu Alexandru", "link": "https://stackoverflow.com/users/4479776/vasiu-alexandru"}, "edited": false, "score": 0, "creation_date": 1452805559, "post_id": 34775497, "comment_id": 57342633, "body": "If it is added to path you may just use name <code>gcc</code> instead of full path. Programs are usually read only - this is not a problem, but user who runs your program may have restricted access to that directory, interesting..."}, {"owner": {"reputation": 43, "user_id": 4479776, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001313414704/picture?type=large", "display_name": "Vasiu Alexandru", "link": "https://stackoverflow.com/users/4479776/vasiu-alexandru"}, "edited": false, "score": 0, "creation_date": 1452855274, "post_id": 34775497, "comment_id": 57360945, "body": "Now works ! I made a batch file for the argumets with name <code>start.bat</code> and I don&#39;t need any Arguments!"}], "tags": [], "owner": {"reputation": 3728, "user_id": 1779504, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/K8LTB.png?s=128&g=1", "display_name": "csharpfolk", "link": "https://stackoverflow.com/users/1779504/csharpfolk"}, "is_accepted": true, "score": 0, "last_activity_date": 1452713698, "last_edit_date": 1495541719, "creation_date": 1452713698, "answer_id": 34775497, "question_id": 34775127, "link": "https://stackoverflow.com/questions/34775127/how-you-integrate-a-c-compiler-into-a-c-app/34775497#34775497", "title": "How you integrate a C++ compiler into a C# app?", "body": "<p>Use <code>System.Diagnostics.Process.Start</code> to start C++ compiler like any other external process:</p>\n\n<pre><code>System.Diagnostics.Process pProcess = new System.Diagnostics.Process();\npProcess.StartInfo.FileName = @\"path\\to\\gcc\";\npProcess.StartInfo.Arguments = \"-Wall myFile.cpp\"; //argument\npProcess.StartInfo.UseShellExecute = false;\npProcess.StartInfo.RedirectStandardOutput = true;\npProcess.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;\npProcess.StartInfo.CreateNoWindow = true; //not diplay a windows\npProcess.Start();\nstring output = pProcess.StandardOutput.ReadToEnd(); //The output result\nint exitCode = pProcess.WaitForExit();\n</code></pre>\n\n<p>Then analyze output/exit code to see if there was any errors.</p>\n\n<p>There will be much more trouble with debugger (e.g. gdb - because it has fully command line interface), you can send commands using StandardInput property of <code>Process</code> class, but it will be rather complicated. As you can see <a href=\"https://stackoverflow.com/questions/17250572/net-lib-to-control-remote-gdb\">.Net lib to control remote GDB</a> there is no library for this yet.</p>\n"}], "owner": {"reputation": 43, "user_id": 4479776, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001313414704/picture?type=large", "display_name": "Vasiu Alexandru", "link": "https://stackoverflow.com/users/4479776/vasiu-alexandru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 1, "closed_date": 1452730629, "accepted_answer_id": 34775497, "answer_count": 1, "score": -1, "last_activity_date": 1452798687, "creation_date": 1452712378, "last_edit_date": 1452798687, "question_id": 34775127, "link": "https://stackoverflow.com/questions/34775127/how-you-integrate-a-c-compiler-into-a-c-app", "closed_reason": "Needs more focus", "title": "How you integrate a C++ compiler into a C# app?", "body": "<p>I want to make an app in C#(.NET) where you will have ,let's say a richtextbox,where you can write C++ code and a button for debugging and running the app which is written in richtextbox ! How to do that ? How can I integrate C++ compiler (<code>G++ 5.3.0 C++0X ENABLED</code> for example) into my app to run that ? I know that for sites it could be use <a href=\"https://ideone.com/sphere-engine\" rel=\"nofollow\">Ideone Api</a> ! I can get the compiler from <code>MinGW/bin</code> !</p>\n"}, {"tags": ["c++", "class", "properties"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1452712358, "post_id": 34775059, "comment_id": 57295302, "body": "Not everything is a pointer in C++, you know."}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 4222954, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bdb1905cc70a9e244e7b104826898842?s=128&d=identicon&r=PG&f=1", "display_name": "Pepelee", "link": "https://stackoverflow.com/users/4222954/pepelee"}, "edited": false, "score": 0, "creation_date": 1452712493, "post_id": 34775125, "comment_id": 57295387, "body": "would this fact apply to blittable datatypes like int, too?"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 383, "user_id": 4222954, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bdb1905cc70a9e244e7b104826898842?s=128&d=identicon&r=PG&f=1", "display_name": "Pepelee", "link": "https://stackoverflow.com/users/4222954/pepelee"}, "edited": false, "score": 0, "creation_date": 1452712572, "post_id": 34775125, "comment_id": 57295441, "body": "No - <code>int</code> is a fundamental type, and reading from an uninitialised int is undefined behaviour"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 383, "user_id": 4222954, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bdb1905cc70a9e244e7b104826898842?s=128&d=identicon&r=PG&f=1", "display_name": "Pepelee", "link": "https://stackoverflow.com/users/4222954/pepelee"}, "edited": false, "score": 0, "creation_date": 1452717223, "post_id": 34775125, "comment_id": 57298185, "body": "@Pepelee: What is a <i>blittable</i> data type?  My understanding is that the hardware that performs blitting is type insensitive.  It only blits an area of memory."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1452717980, "post_id": 34775125, "comment_id": 57298609, "body": "@ThomasMatthews I assumed he meant <a href=\"http://en.cppreference.com/w/cpp/concept/PODType\" rel=\"nofollow noreferrer\">POD</a>"}], "tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 5, "last_activity_date": 1452712541, "last_edit_date": 1452712541, "creation_date": 1452712364, "answer_id": 34775125, "question_id": 34775059, "link": "https://stackoverflow.com/questions/34775059/looking-into-an-uninitialized-property-of-an-object-in-c/34775125#34775125", "title": "Looking into an uninitialized property of an Object in c++", "body": "<p>It would be empty, because the default constructor for <code>std::string</code> is to construct an empty string</p>\n\n<p>See constructor 1 here: <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\">http://en.cppreference.com/w/cpp/string/basic_string/basic_string</a></p>\n\n<blockquote>\n  <p>1) Default constructor. Constructs empty string (zero size and\n  unspecified capacity)</p>\n</blockquote>\n\n<p>Therefore there would merely be an empty line (the newline coming from <code>std::endl</code>)</p>\n\n<p>If you were later to assign a value to your string member</p>\n\n<pre><code>Affe.name = \"foo\";\n</code></pre>\n\n<p>then an allocation would occur, sufficient memory to store <code>\"foo\"</code> and a null terminator would be allocated.</p>\n"}, {"tags": [], "owner": {"reputation": 1025, "user_id": 1364776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f7b9f5042f040ee074e7e4b4615a2a69?s=128&d=identicon&r=PG", "display_name": "mjwach", "link": "https://stackoverflow.com/users/1364776/mjwach"}, "is_accepted": false, "score": 2, "last_activity_date": 1452713788, "last_edit_date": 1452713788, "creation_date": 1452712590, "answer_id": 34775183, "question_id": 34775059, "link": "https://stackoverflow.com/questions/34775059/looking-into-an-uninitialized-property-of-an-object-in-c/34775183#34775183", "title": "Looking into an uninitialized property of an Object in c++", "body": "<p>Here there is no \"null\" error or the like because nothing is null.  In C#, your Affe.name would be a pointer to something (or to nothing).  In C++, it is not a pointer.  It is a VALUE.  For it to be a pointer, you would need to declare it specially as such:</p>\n\n<pre><code>class TierContainingPointer {\npublic:\n    string* name;\n};\n</code></pre>\n\n<p>Note the *.  Creating an instance of TierContainingPointer would leave you with a \"name\" pointing to nothing useful, as you have imagined.</p>\n\n<p>But creating an instance of your Tier gives you a full string object that has its own members inside the Tier object.  You imagine the Tier containing a pointer to a string, but instead the Tier contains the actual member data of the string.  The string is embedded in the Tier (though one or more of the string class' own members may be a pointer itself).</p>\n\n<p>Ah, and to address the remainder of the question (though another answer has already done it):  When the \"name\" instance inside the Tier is created (during the Tier's own creation), its default constructor is run.  And the string class' default constructor leaves the string storing the text \"\".</p>\n"}], "owner": {"reputation": 383, "user_id": 4222954, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bdb1905cc70a9e244e7b104826898842?s=128&d=identicon&r=PG&f=1", "display_name": "Pepelee", "link": "https://stackoverflow.com/users/4222954/pepelee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 34775125, "answer_count": 2, "score": 1, "last_activity_date": 1452713788, "creation_date": 1452712172, "question_id": 34775059, "link": "https://stackoverflow.com/questions/34775059/looking-into-an-uninitialized-property-of-an-object-in-c", "title": "Looking into an uninitialized property of an Object in c++", "body": "<p>Hey Guys i wondered what the Console would show in this simple Code in C++</p>\n\n<pre><code>using namespace std;\n\nclass Tier {\npublic:\n    string name;\n};\n\nint main()\n{\n    Tier Affe;\n    cout &lt;&lt; Affe.name &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I come from C# and know that an \"null\"-Error would be thrown. But in C++ the Console shows nothing. When debugging the property is \"\".</p>\n\n<p>Does this mean that the property \"name\" is referenced to a nullpointer? \nThinking of creating an object from the class \"Tier\", there would be allocated memory with the size of the class. So the property \"name\" of the object would be allocated in the memory, too. </p>\n\n<p>Why is the debugger showing \"\" then. In my oppinion where should be some random data, which was in the memory section before...</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2010", "object", "factory-pattern"], "answers": [{"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": true, "score": 1, "last_activity_date": 1452714140, "last_edit_date": 1495535276, "creation_date": 1452714140, "answer_id": 34775638, "question_id": 34774997, "link": "https://stackoverflow.com/questions/34774997/visual-studio-and-automatic-object-creation-using-class-factory-in-c/34775638#34775638", "title": "Visual Studio and automatic object creation using class factory in C++", "body": "<pre><code>TestcaseFactory&lt;derived&gt; testcase_##derived(); \n</code></pre>\n\n<p>This line declares a function, not a variable. It's a variant of the (most)  <a href=\"https://stackoverflow.com/questions/1424510/most-vexing-parse-why-doesnt-a-a-work\">vexing parse</a> of C++ - if it <em>can</em> be a declaration, it is.</p>\n"}], "owner": {"reputation": 645, "user_id": 4809031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89362ff1bcef4e3e95d1263b98e40e26?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/4809031/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34775638, "answer_count": 1, "score": 0, "last_activity_date": 1452714140, "creation_date": 1452711937, "last_edit_date": 1452713152, "question_id": 34774997, "link": "https://stackoverflow.com/questions/34774997/visual-studio-and-automatic-object-creation-using-class-factory-in-c", "title": "Visual Studio and automatic object creation using class factory in C++", "body": "<p>I am trying to make a framework in C++ using Visual Studio 2010 where I can create objects at the same time as class definition of lots of derived classes. I have been reading a bit on this, and understand the the factory pattern can be used. I however do not manage to get it working.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass TestCase;\n\nstd::vector&lt;TestCase*&gt; testcases;\n\nclass base\n{\npublic:\n    static void init();\n};\n\ntemplate&lt;class T&gt;\nclass TestcaseFactory// : public base\n{\npublic:\n    TestcaseFactory()\n    {\n        testcases.push_back(new T());\n    }\nprivate:\n};\n\n\nclass TestCase\n{\npublic:\n    virtual void id() = 0;\n};\n\n#define TESTCASE(derived)\\\nclass derived; \\\nTestcaseFactory&lt;derived&gt; testcase_##derived(); \\\nclass derived : public TestCase\n\nTESTCASE(derived1)\n{\n    void id() {std::cout &lt;&lt; \"derived 1\" &lt;&lt; std::endl;}\n};\n\nTESTCASE(derived2)\n{\n    void id() {std::cout &lt;&lt; \"derived 2\" &lt;&lt; std::endl;}\n};\n\nint main()\n{\n    for(unsigned int i = 0; i &lt; testcases.size(); ++i)\n    {\n        std::cout &lt;&lt; i &lt;&lt; std::endl;\n        testcases[i]-&gt;id();\n    }\n    getchar( );\n}\n</code></pre>\n\n<p>and would have expected the loop in <code>main()</code> to call the two created objects and print</p>\n\n<pre><code>derived1\nderived2\n</code></pre>\n\n<p>However nothing happens. For some reason the code in the <code>#define</code> is never reached. I can not figure out why?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452711782, "post_id": 34774928, "comment_id": 57294958, "body": "Modify which codebase please what? Clarify your question please!"}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452711851, "post_id": 34774928, "comment_id": 57295010, "body": "Without modifying any part of the source code, simply."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452711915, "post_id": 34774928, "comment_id": 57295051, "body": "Which source code? Did you show any in your question? (Note that links don&#39;t count)"}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452712045, "post_id": 34774928, "comment_id": 57295124, "body": "Why do I have to show source code if I&#39;d want to avoid modifying any source code whatsoever? (this includes .h, .cpp files)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 5, "creation_date": 1452712108, "post_id": 34774928, "comment_id": 57295157, "body": "It&#39;s not the IDE, it&#39;s the way Windows programs work. By default there is either a console or a graphics window, not both."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452712143, "post_id": 34774928, "comment_id": 57295181, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1-\u1fe5\u03b5\u1fd6 - He&#39;s got a program he wants to run under Visual Studio.  He wants to see stdout.  You don&#39;t need to see the code for the program."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452712159, "post_id": 34774928, "comment_id": 57295188, "body": "I would say if you do not want to allocate a console for a GUI application or change the code or use /SUBSYSTEM:CONSOLE you are out of luck."}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "edited": false, "score": 0, "creation_date": 1452712251, "post_id": 34774928, "comment_id": 57295235, "body": "I&#39;d want to use /SUBSYSTEM:CONSOLE, I tried too (this I aliased as &quot;external console&quot; in my question), without success. If you could point me in the direction how to make this work with that method I&#39;d be very thankful."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1452712286, "post_id": 34774928, "comment_id": 57295252, "body": "@MatrixAndrew To be clear:  Do you have a program which starts at <code>main</code> or at <code>WinMain</code>?  If the former, I get stdout displayed in a separate console; if the latter, Windows (not Visual Studio) typically sends stdout to a black hole."}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "edited": false, "score": 0, "creation_date": 1452712403, "post_id": 34774928, "comment_id": 57295328, "body": "entry point looks like this: <a href=\"http://pastebin.com/6WyHcAKc\" rel=\"nofollow noreferrer\">pastebin.com/6WyHcAKc</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1452712475, "post_id": 34774928, "comment_id": 57295368, "body": "Did you try the editbin method in my answer: <a href=\"http://stackoverflow.com/a/13841522/487892\">stackoverflow.com/a/13841522/487892</a>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 2, "creation_date": 1452712576, "post_id": 34774928, "comment_id": 57295443, "body": "Then that is your problem.  Windows is sending your stdout to a black hole.  If you want a graphics window and a console, you will have to change the code to create a console."}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1452712694, "post_id": 34774928, "comment_id": 57295518, "body": "@drescherjm As a last resort I may try to use that method, but I&#39;m still in shock due to the realization why one would need to do something like this manually when all other IDE&#39;s provide this functionality out-of-the-box."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452712807, "post_id": 34774928, "comment_id": 57295599, "body": "Like others mentioned you are fighting windows on that. It&#39;s not really the IDE that is the problem."}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "edited": false, "score": 0, "creation_date": 1452712835, "post_id": 34774928, "comment_id": 57295615, "body": "Also I was hoping with VS2015 something has changed that enables what I&#39;d seek. I&#39;m fighting with a Windows on a lot of fronts, I recently spent half a day debugging environment variables because the existence of whitespaces after semicolons screws up the entire parsing of the variable paths."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452712868, "post_id": 34774928, "comment_id": 57295628, "body": "Simple answer is VS2015 does not have this feature."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1452712951, "post_id": 34774928, "comment_id": 57295675, "body": "@MatrixAndrew With those other IDE&#39;s other than VS, what if a developer does <i>not</i> want the IDE to do these things, because possibly the developer is writing code that allocates a console window?  That would be confusing as heck..."}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "edited": false, "score": 0, "creation_date": 1452713127, "post_id": 34774928, "comment_id": 57295763, "body": "Thank you for responses then, I&#39;ll probably go with the method that works with the previous versions as well then, allocating a console. I&#39;d appreciate if you&#39;d balance the score of my question to at least 0, because it is a legitimate question and I get prolonging existential crisis when I get downvotes."}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452778670, "post_id": 34774928, "comment_id": 57325140, "body": "@drescherjm In your answer a macro &quot;_O_TEXT&quot; is used, it is not defined in the MSVC library &lt;io.h&gt; like the rest and neither can I find anything about it on the net. Have they removed this recently? Is there an alternative way?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1452779576, "post_id": 34774928, "comment_id": 57325816, "body": "The documentation for _open_osfhandle describes these parameters: <a href=\"https://msdn.microsoft.com/en-us/library/bdts1c9x.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/bdts1c9x.aspx</a>"}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "edited": false, "score": 0, "creation_date": 1452780246, "post_id": 34774928, "comment_id": 57326303, "body": "&lt;fcntl.h&gt; had to be included too, all compiles and I get the console but so far cout and cerr does not output into it  w/wo debugger (I use your openConsole() method as global function) I&#39;ll keep trying"}, {"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "edited": false, "score": 0, "creation_date": 1452781806, "post_id": 34774928, "comment_id": 57327421, "body": "No success. So only way left is if I convert this into a non-win32 application by creating a regular int main() entry point, too bad it&#39;s probably not possible with this project, well.."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "edited": false, "score": 0, "creation_date": 1452792114, "post_id": 34794127, "comment_id": 57334897, "body": "That might come in handy too."}], "tags": [], "owner": {"reputation": 370, "user_id": 2415419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dhm0Z.jpg?s=128&g=1", "display_name": "Jack White", "link": "https://stackoverflow.com/users/2415419/jack-white"}, "is_accepted": true, "score": 1, "last_activity_date": 1452787377, "creation_date": 1452787377, "answer_id": 34794127, "question_id": 34774928, "link": "https://stackoverflow.com/questions/34774928/how-to-display-standard-output-in-visual-studio-2015/34794127#34794127", "title": "How to display standard output in Visual Studio 2015?", "body": "<p>If it is only for debugging purposes, you might find <a href=\"https://msdn.microsoft.com/en-us/library/232dxah7(v=vs.90).aspx\" rel=\"nofollow\">Debug Breakpoints/Tracepoint actions</a> helpful.\nThey enable to log custom strings with expressions (i.e. variables) to the visual studio console.</p>\n\n<p>For a non-console windows application, by default (i.e. without changing your codebase, as you are requesting) all output to stdout is lost..</p>\n"}], "owner": {"reputation": 245, "user_id": 5024552, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/FTGl1.jpg?s=128&g=1", "display_name": "MatrixAndrew", "link": "https://stackoverflow.com/users/5024552/matrixandrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3316, "favorite_count": 0, "accepted_answer_id": 34794127, "answer_count": 1, "score": 5, "last_activity_date": 1452792025, "creation_date": 1452711694, "last_edit_date": 1495542746, "question_id": 34774928, "link": "https://stackoverflow.com/questions/34774928/how-to-display-standard-output-in-visual-studio-2015", "title": "How to display standard output in Visual Studio 2015?", "body": "<p>Most IDE's I've seen (NetBeans, QtCreator, XCode, CodeBlocks, Eclipse) provide an out-of-the-box method to view standard output either in one of its embedded window or external console or in a log BUT Visual Studio. </p>\n\n<p>I really don't want to <em>allocate a separate console</em> as it is suggested at <a href=\"https://stackoverflow.com/questions/13840942/visual-studio-2012-c-standard-output\">THIS</a> question. I'd also prefer not to redirect it to a file as it is suggested at <a href=\"https://stackoverflow.com/questions/2683249/redirect-stdout-and-stderr-to-the-output-debug-console-of-microsoft-visual-studi\">THIS</a> question (output file is not created with the suggested console command (<code>2&gt;output.txt</code>)). <strong>Please don't give answers that modify the codebase</strong>  like using <code>OutputDebugString</code>.</p>\n\n<p>If displaying standard output inside VS this way is not possible, a working solution of the other two alternatives would still be welcomed, namely using external console (which I tried using without seeing the output in it) or a log file.</p>\n"}, {"tags": ["c++", "boost", "boost-thread", "mcisendstring"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1452724724, "post_id": 34774867, "comment_id": 57301813, "body": "Can you simplify? Is the MCI command working in a simpler app? Why do you spawn a new thread all the time? Did you consider using Boost Asio and a proper clock to measure time (perhaps MCI has a transport interface that can tell you the actual track position, so you don&#39;t need to do all the heroics)."}, {"owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452757205, "post_id": 34774867, "comment_id": 57312068, "body": "@sehe One thread is made so that the UI won&#39;t hang when I have continuos play on, and the other for the counter so it won&#39;t hinder the song from playing. And yes, it works if I don&#39;t try to do it across threads. I might have to look into asio, but the counter doesn&#39;t really hinder me right now, it&#39;s rather the cross-thread mcisendstring problem."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1453207511, "post_id": 34774867, "comment_id": 57492074, "body": "You wouldn&#39;t need the counter without the threading kludge. Also, I asked &quot;Why do you spawn a new thread <b><i>all the time</i></b>&quot;. You only answered the first (obvious) part"}, {"owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1453208657, "post_id": 34774867, "comment_id": 57492841, "body": "Oh, right, I see what you meant now. I fixed that already, I&#39;ll update it as soon as I have access to my computer."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 5, "last_activity_date": 1453212206, "last_edit_date": 1592644375, "creation_date": 1453207921, "answer_id": 34877329, "question_id": 34774867, "link": "https://stackoverflow.com/questions/34774867/mcisendstring-doesnt-pause-sound-played-from-a-thread/34877329#34877329", "title": "mciSendString doesn&#39;t pause sound played from a thread", "body": "<blockquote>\n<p>EDIT: Turns out this is actually happening due to threading. I've been doing some C# for a good amount of time and you could use Invokes to work around thread problems.</p>\n</blockquote>\n<p>Yes. Ifff you need a user-land thread for the asynchronous events <em>then</em> a queued message is your course of action (like C#'s (or Java's etc.) invoke-on-UI-thread). That's hard work.</p>\n<blockquote>\n<p>EDIT2: I read up a bit and it seems like there is an option to Post a method in the message queue of another thread via PostMessage WinAPI call. Is this a possiblity here? If yes, could anyone provide a good example? I read up a bit but I don't really understand alot so far</p>\n<p>Is there something like this in C++ as well?</p>\n</blockquote>\n<p>What you're referring to is just the general message-pump/event-loop that underlies almost\u00b9 all UI frameworks. C++ doesn't &quot;have&quot; GUI natively, but certainly libraries exist that have similar facilities.</p>\n<p>Boost Asio was one mentionable. If you already have a GUI framework, it'll have it's own event loop (Qt, MFC etc. have it).</p>\n<p>Regardless of what is used, all Win32 GUI applications end up using the message pump you referred to which does indeed allow messages to be posted.\n<em>This is almost always the wrong level of abstraction, unless you're actively developing your GUI framework\u00b2</em>.</p>\n<p>You can always build your own. Just have some kind of (priority) queue to receive messages and have a main loop processing these. Call them events and pronto: event-driven design.</p>\n<hr />\n<p>\u00b9 there's a wave back at the moment with new-fangled back-to-basics like <a href=\"https://github.com/ocornut/imgui\" rel=\"noreferrer\">https://github.com/ocornut/imgui</a></p>\n<p>\u00b2 the fact that this question exists tells me you are not doing that</p>\n"}], "owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "accepted_answer_id": 34877329, "answer_count": 1, "score": 5, "last_activity_date": 1453212206, "creation_date": 1452711453, "last_edit_date": 1453208901, "question_id": 34774867, "link": "https://stackoverflow.com/questions/34774867/mcisendstring-doesnt-pause-sound-played-from-a-thread", "title": "mciSendString doesn&#39;t pause sound played from a thread", "body": "<p>Recently I already asked for a solution similar to this questions:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/34711181/is-there-a-way-to-pause-stop-a-mp3-file-playing-with-mcisendstring-with-the-wai\">Is there a way to pause/stop a mp3 file playing with mcisendstring with the &quot;wait&quot; option?</a></p>\n\n<p>I want to implement a function in my audio player which allows people to have sound playing continuosly, while a slider moves according to the current second the track is running in, and also with the functionality to go to the next track after the current track is over</p>\n\n<p>After (as you can read in the link) trying to do it with</p>\n\n<pre><code>mciSendString(\"play mp3 wait\", NULL, 0, NULL);\n</code></pre>\n\n<p>which failed due to the problem that the track can't be paused or stopped until it is finished, I am now trying to implement it another way. Currently, when I start to play the track, I also start another thread, which is starting a counter. The counter is getting the length of the track in seconds, and is counting down the time, also offering a mutex for pausing/resuming the counter. In order to stop my MusicCycle from simply looping uncontrolled, I am joining the thread, therefore waiting for its termination.</p>\n\n<pre><code>void Music::MusicCycle(std::wstring trackPath)\n{\n    while (true)\n    {\n        OpenMP3(trackPath);\n        mciSendString(\"play mp3\", NULL, 0, NULL);\n\n        m_counterThread = boost::thread(boost::bind(&amp;Counter::StartCount, m_counter, &lt;length of track in seconds&gt;));\n        m_counterThread.join();\n\n        //... Get new track here\n    }\n}\n</code></pre>\n\n<p>Note that this whole method is created in a thread as well:</p>\n\n<pre><code>m_cycleThread = boost::thread(boost::bind(&amp;Music::MusicCycle, this, trackPath));\n</code></pre>\n\n<p>The thread started by the MusicCycle function is looking like this:</p>\n\n<pre><code>void Counter::StartCount(int seconds)\n{\n    boost::mutex::scoped_lock lock(m_mutex);\n\n    for (int i = 0; i &lt; seconds; i++)\n    {\n        while (m_counterLock)\n        {\n            m_condVar.wait(lock);\n        }\n\n        boost::this_thread::sleep(boost::posix_time::seconds(1));\n    }\n}\n</code></pre>\n\n<p>Also, I added another functionality to lock/unlock the mutex here with my Pause/Resume methods, which also call the corresponding mciSendString functions</p>\n\n<pre><code>mciSendString(\"resume mp3\", NULL, 0, NULL);\n\nmciSendString(\"pause mp3\", NULL, 0, NULL);\n</code></pre>\n\n<p>When I would call pause now, mciSendString would pause the track, and also lock the counter so it won't keep on counting down.</p>\n\n<p>However, the problem is that it still doesn't work. The pause simply doesn't affect the playing of music, despite my efforts to think up a solution without using the wait option in the mciSendString</p>\n\n<p>Any advice?</p>\n\n<p>EDIT: Turns out this is actually happening due to threading. I've been doing some C# for a good amount of time and you could use Invokes to work around thread problems. Maybe this is possible here as well?</p>\n\n<p>EDIT2: I read up a bit and it seems like there is an option to Post a method in the message queue of another thread via PostMessage WinAPI call. Is this a possiblity here? If yes, could anyone provide a good example? I read up a bit but I don't really understand alot so far</p>\n\n<p>Is there something like this in C++ as well?</p>\n"}, {"tags": ["c++", "arrays", "parsing", "csv"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1452711549, "post_id": 34774857, "comment_id": 57294836, "body": "Don&#39;t you have any concrete attempts you&#39;re stuck with? If so elaborate where specifically. Otherwise your question looks just off-topic."}, {"owner": {"reputation": 11, "user_id": 5786070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b77dcd71f1615a5dd591b038c2911b?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/5786070/athena"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452717630, "post_id": 34774857, "comment_id": 57298412, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 , I am a beginner at programming and have never programmed in C++ before. That&#39;s why I do not have any concrete attempts, and I figured someone would be able to point me in the right direction. I don&#39;t understand how my question is off-topic."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1452725980, "post_id": 34774857, "comment_id": 57302377, "body": "This might be helpful: <a href=\"http://stackoverflow.com/q/1120140/14065\">stackoverflow.com/q/1120140/14065</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1452712610, "post_id": 34775142, "comment_id": 57295463, "body": "In this case it would work, but it&#39;s better to count the double quotes : &quot;&quot; in order to figure if the &#39;,&#39; was in the column or was a column separator. To make a generic function for any csv."}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1452715870, "post_id": 34775142, "comment_id": 57297423, "body": "@PierreEmmanuelLallemant: A generic CSV parser (which I&#39;ve written many of) was not called for here. All indications are that the field values will never contain a comma or any other character that requires quotes."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452718128, "post_id": 34775142, "comment_id": 57298690, "body": "@JonathanWood <code>strtok()</code> is one of the worst recommendations you can give."}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1452718252, "post_id": 34775142, "comment_id": 57298753, "body": "@PierreEmmanuelLallemant: Yes, but I disagree with you that it is better to handle double quotes in this case."}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452718286, "post_id": 34775142, "comment_id": 57298771, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Thanks for making an assertion without justification. I&#39;m sure everyone will find that very helpful."}], "tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": false, "score": 1, "last_activity_date": 1452712435, "creation_date": 1452712435, "answer_id": 34775142, "question_id": 34774857, "link": "https://stackoverflow.com/questions/34774857/how-to-parse-read-and-store-only-one-column-of-csv-file-into-an-array-in-c/34775142#34775142", "title": "How to parse, read, and store only one column of .CSV file into an array in C++", "body": "<p>You can use <code>strtok()</code> to separate out the three columns. And then just get the last value.</p>\n\n<p>You could also just take the string and scan for the first comma, and then scan from there for the second comma. What follows is the value you are after.</p>\n\n<p>You could also use <code>sscanf()</code> to parse out the individual values.</p>\n\n<p>This really isn't a difficult problem, and there are many ways to approach it. That is why people are complaining that you probably should've tried something and then ask a question here when you get stuck on a specific question.</p>\n"}], "owner": {"reputation": 11, "user_id": 5786070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b77dcd71f1615a5dd591b038c2911b?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/5786070/athena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452712435, "creation_date": 1452711409, "last_edit_date": 1452711959, "question_id": 34774857, "link": "https://stackoverflow.com/questions/34774857/how-to-parse-read-and-store-only-one-column-of-csv-file-into-an-array-in-c", "title": "How to parse, read, and store only one column of .CSV file into an array in C++", "body": "<p>I have a .CSV file that's storing data from a laser. It records the height of the laser beam every second.</p>\n\n<p>The .CSV file ends up having rows for each measurement that are all in this format:</p>\n\n<pre><code>DR,04,#\n</code></pre>\n\n<p>where the # is the height reading.</p>\n\n<p>For example, if the beam is at a height of 10, the reading would say:</p>\n\n<pre><code>DR,04,10.\n</code></pre>\n\n<p>I want my program in C++ to read <strong>only the height</strong> (third column of the .CSV) from each row and put it into an array. I do not want the first two columns at all. That way I end up with an array with just a bunch of height values from each measurement.</p>\n\n<p>How do I do that?</p>\n"}, {"tags": ["c++", "ubuntu-14.04", "libpng"], "comments": [{"owner": {"reputation": 101, "user_id": 4879551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GexZf.png?s=128&g=1", "display_name": "Dario Salvati", "link": "https://stackoverflow.com/users/4879551/dario-salvati"}, "edited": false, "score": 0, "creation_date": 1452711380, "post_id": 34774820, "comment_id": 57294745, "body": "I&#39;d suggest to ask the same question <a href=\"http://askubuntu.com/\">here</a>."}, {"owner": {"reputation": 43, "user_id": 2308658, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/963b23e896944f4be79e9512feb61b5f?s=128&d=identicon&r=PG", "display_name": "Pinte Laurentiu", "link": "https://stackoverflow.com/users/2308658/pinte-laurentiu"}, "reply_to_user": {"reputation": 101, "user_id": 4879551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GexZf.png?s=128&g=1", "display_name": "Dario Salvati", "link": "https://stackoverflow.com/users/4879551/dario-salvati"}, "edited": false, "score": 0, "creation_date": 1452711553, "post_id": 34774820, "comment_id": 57294838, "body": "Already did that i&#39;m not sure if this is a ubuntu problem or a programming one!"}, {"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 0, "creation_date": 1452711749, "post_id": 34774820, "comment_id": 57294935, "body": "You can install this new library from source to a different folder (e.g.  in ~/mylibs/, having ~/mylibs/include, ~/mylibs/lib, etc.). Later on, when compiling your own code, point to ~/mylibs/. If you are using the Environment Variables to point to the paths where the libraries are installed, just make sure your ~/mylibs/ comes first the other paths."}, {"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 0, "creation_date": 1452711812, "post_id": 34774820, "comment_id": 57294980, "body": "Jut to add to previous comment, just google for &quot;how to install library in my home&quot; to see different suggestion on how that can be done"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1452712852, "post_id": 34774820, "comment_id": 57295620, "body": "Extract the newest version of this lib to any folder and open it with the current version of the compiler you are using, then compile and build out this lib for both release and debug modes. If they give you the options of either a DLL or Lib then it is your choice which to use, just make sure to link them appropriately. Once you have a successful build, create an environment variable on your machine to point to the root of this folder. Then make sure to tell your IDE where this library resides using the environment variable and paths; for static lib copy this into same folder as your exe."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1452712908, "post_id": 34774820, "comment_id": 57295648, "body": "(...continued) Also make sure that you are building this lib with the same code generation flags that you are using in your project."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 2308658, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/963b23e896944f4be79e9512feb61b5f?s=128&d=identicon&r=PG", "display_name": "Pinte Laurentiu", "link": "https://stackoverflow.com/users/2308658/pinte-laurentiu"}, "is_accepted": false, "score": 0, "last_activity_date": 1452716050, "creation_date": 1452716050, "answer_id": 34776176, "question_id": 34774820, "link": "https://stackoverflow.com/questions/34774820/install-a-newer-version-of-libpng/34776176#34776176", "title": "Install a newer version of libpng", "body": "<p>It seems that libpng 1.6.5 must be linked with -lpng16 not with the usual -lpng</p>\n"}], "owner": {"reputation": 43, "user_id": 2308658, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/963b23e896944f4be79e9512feb61b5f?s=128&d=identicon&r=PG", "display_name": "Pinte Laurentiu", "link": "https://stackoverflow.com/users/2308658/pinte-laurentiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452716050, "creation_date": 1452711263, "question_id": 34774820, "link": "https://stackoverflow.com/questions/34774820/install-a-newer-version-of-libpng", "title": "Install a newer version of libpng", "body": "<p>I want to export a c++ project that i started in Windows to Ubuntu 14.04 LTS. The problem is that Ubuntu has libpng 1.2 installed and I need libpng 1.6.5 or newer so i manually compiled libpng 1.6.5 on my computer but eclipse cdt uses libpng 1.2 so my project doesn't work. I tried to uninstall libpng12-dev package and it worked but after a restart something happened and Ubuntu Desktop stopped working and I had to reinstall Ubuntu from scratch. How can I install libpng 1.6.5 over 1.2 without destroying anything?</p>\n"}, {"tags": ["c++", "redhawksdr"], "comments": [{"owner": {"reputation": 271, "user_id": 3088770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jcijQ.png?s=128&g=1", "display_name": "pwolfram", "link": "https://stackoverflow.com/users/3088770/pwolfram"}, "edited": false, "score": 0, "creation_date": 1452724914, "post_id": 34774784, "comment_id": 57301892, "body": "Have you tried doing the same setup but using a Waveform instead of the Chalkboard?"}, {"owner": {"reputation": 271, "user_id": 3088770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jcijQ.png?s=128&g=1", "display_name": "pwolfram", "link": "https://stackoverflow.com/users/3088770/pwolfram"}, "edited": false, "score": 0, "creation_date": 1452725278, "post_id": 34774784, "comment_id": 57302091, "body": "Also, which version of REDHAWK are you using?"}, {"owner": {"reputation": 319, "user_id": 1799200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07e99a64508e8f22339a9d7e13a3200c?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1799200/james"}, "reply_to_user": {"reputation": 271, "user_id": 3088770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jcijQ.png?s=128&g=1", "display_name": "pwolfram", "link": "https://stackoverflow.com/users/3088770/pwolfram"}, "edited": false, "score": 0, "creation_date": 1452777705, "post_id": 34774784, "comment_id": 57324535, "body": "No I haven&#39;t tried using a waveform but I&#39;ll see if that makes a difference (if it does though it&#39;s not a good solution because it will add a lot of time to module development), at the moment we&#39;re just trying to get all of the modules we&#39;ll need built. The version of REDHAWK is 1.10 on cent os 6.7"}], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 1799200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07e99a64508e8f22339a9d7e13a3200c?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1799200/james"}, "edited": false, "score": 0, "creation_date": 1452783898, "post_id": 34791909, "comment_id": 57329024, "body": "Thanks for the suggested fixes, I just ran the example on another computer running the same setup on a VM and it worked with no issues as well.  Due to all the issues were having we have decided to reformat and do a clean install."}], "tags": [], "owner": {"reputation": 1199, "user_id": 2391144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11d6c6e030786091372373f15473579f?s=128&d=identicon&r=PG", "display_name": "Youssef Bagoulla", "link": "https://stackoverflow.com/users/2391144/youssef-bagoulla"}, "is_accepted": true, "score": 1, "last_activity_date": 1452781328, "creation_date": 1452781328, "answer_id": 34791909, "question_id": 34774784, "link": "https://stackoverflow.com/questions/34774784/redhawk-module-service-function-usage-example-crashes/34791909#34791909", "title": "redhawk module service function usage example crashes", "body": "<p>In REDHAWK 2.0.0 I created a component with the same name (freqModFrTest) and port names (dataFloatIn and ComplexOut) and used your service function verbatim. I did not however get any issues. </p>\n\n<p>Here are a few things to try:</p>\n\n<ul>\n<li><p>Clean and rebuild the component. The Sandbox (what you referred to as the whiteboard) will run the binary that has been built. It is possible that you've modified the code and have an older version of the binary on disk. Right click on the project and select \"clean project\". Then right click and select \"Build Project\" this will make sure that the binary matches your source code.</p></li>\n<li><p>Run the component in debug mode. If you double click on the SPD file, under the \"overview\" tab there is \"Debug a component in the sandbox\". This will launch the component in the chalkboard within a debugging context. You can set breakpoints and walk through the code line by line. If you set no breakpoints though the IDE will stop execution when a fatal error occurs. If there is an issue (like invalid memory access) the IDE will prompt you to enter debug mode and it should point out the line in code where the issue is.</p></li>\n<li><p>If those options fail, you can enable core dumps and use GDB to see where in the code the issue is occurring. There are lots of tutorials online for GDB but the gist is that before launching the IDE, you'll want to type \"ulimit -c unlimited\" then from the same terminal, launch the IDE. Now when your component dies, it will produce a core file.</p></li>\n</ul>\n\n<p>Hopefully one of these gets you going down the right path.</p>\n"}], "owner": {"reputation": 319, "user_id": 1799200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07e99a64508e8f22339a9d7e13a3200c?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1799200/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 34791909, "answer_count": 1, "score": 0, "last_activity_date": 1452781328, "creation_date": 1452711122, "last_edit_date": 1452779324, "question_id": 34774784, "link": "https://stackoverflow.com/questions/34774784/redhawk-module-service-function-usage-example-crashes", "title": "redhawk module service function usage example crashes", "body": "<p>So I am building a redhawk module and trying to just pass data through it as a test.  After putting their example of how to work with input and output ports into the serviceFunction() I am able to build the module with no errors (I changed variable names to match my ports).  When I put the module on the white board and link it up it's fine but as soon as I start the module it crashes.  I added a line to write the incoming stream id to the console and that will hit the console 10 to 20 times before the crash (it correctly writes the id of the signal generator that is providing the signal).  If I plot the output port nothing is plotted before the crash (when I say crash I mean that the module just disappears from the white board, the ide is still up and running). </p>\n\n<p>The service function is:</p>\n\n<pre><code>int freqModFrTest_i::serviceFunction()\n{\n\n    bulkio::InFloatPort::dataTransfer *tmp = dataFloatIn-&gt;getPacket(bulkio::Const::BLOCKING);\n    if (not tmp) { // No data is available\n        return NOOP;\n    }\n    else\n    {\n        std::cout&lt;&lt;tmp-&gt;streamID&lt;&lt;std::endl;\n        std::vector&lt;float&gt; outputData;\n        outputData.resize(tmp-&gt;dataBuffer.size());\n        for (unsigned int i=0; i&lt;tmp-&gt;dataBuffer.size(); i++) {\n            outputData[i] = (float)tmp-&gt;dataBuffer[i];\n        }\n\n        // NOTE: You must make at least one valid pushSRI call\n        if (tmp-&gt;sriChanged) {\n            ComplexOut-&gt;pushSRI(tmp-&gt;SRI);\n        }\n        ComplexOut-&gt;pushPacket(outputData, tmp-&gt;T, tmp-&gt;EOS, tmp-&gt;streamID);\n\n        delete tmp; // IMPORTANT: MUST RELEASE THE RECEIVED DATA BLOCK\n        return NORMAL;\n    }\n}\n</code></pre>\n\n<p>Has anyone had a similar issue or any ideas on what would be causing this?</p>\n\n<p>Additional Info:</p>\n\n<p>Following the sugestion by pwolfram I built a sig generator and this component into a waveform.  When launching it from a domain I got the error:</p>\n\n<pre><code>2016-01-14 07:41:50,430 ERROR DCE:aa1a189e-0b5b-4968-9150-5fc3d501dadc{1}:1030 - \nChild process 3772 terminated with signal 11\n</code></pre>\n\n<p>when trying to restart the component (as it just stoped rather then disapering) I get the following error:</p>\n\n<pre><code>Error while executing callable. Caused by org.omg.CORBA.TRANSIENT:\nRetries exceeded, couldn't reconnect to 10.62.7.21:56857\nRetries exceeded, couldn't reconnect to 10.62.7.21:56857\n</code></pre>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1452711176, "post_id": 34774774, "comment_id": 57294614, "body": "c or c++ ? text says c, but I guess you meant c++"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1452711276, "post_id": 34774774, "comment_id": 57294683, "body": "<code>double l[i][j];</code> VLA&#39;s aren&#39;t standad c++. Use <code>std::vector</code> instead."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1452711326, "post_id": 34774774, "comment_id": 57294715, "body": "Why don&#39;t you use a vector of vectors instead of a two-dimensional array? Check <a href=\"https://github.com/ForceBru/Matrix\" rel=\"nofollow noreferrer\">this</a> out of you want an example of how to code a simple C++ library to work with matrices."}, {"owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1452711908, "post_id": 34774774, "comment_id": 57295046, "body": "You cannot provide the size in a function parameter (at least as far as I remember), use <code>double matrix[][]</code> or <code>double **matrix</code>"}, {"owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452712190, "post_id": 34774774, "comment_id": 57295204, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I understand <code>vector</code> is the standard in C++, but I don&#39;t believe there is anything against the standard to use VLA&#39;s?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1452712326, "post_id": 34774774, "comment_id": 57295279, "body": "@SGM1 VLA&#39;s aren&#39;t supported by the current c++ standard, but just by some compiler specific extensions. So they aren&#39;t standard, period."}, {"owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1452713018, "post_id": 34774774, "comment_id": 57295706, "body": "For those interested in the standard &#39;s discussion: <a href=\"http://stackoverflow.com/questions/1887097/variable-length-arrays-in-c\" title=\"variable length arrays in c\">stackoverflow.com/questions/1887097/variable-length-arrays-i&zwnj;&#8203;n-c</a>"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1452714340, "post_id": 34774774, "comment_id": 57296543, "body": "OT, but you shouldn&#39;t mix <code>iostream</code> and <code>stdio</code>, pick one!"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1452715038, "post_id": 34774774, "comment_id": 57296962, "body": "I suggest you to take a deep look into this: <a href=\"http://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c\" title=\"how do i use arrays in c\">stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5556013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd250627171a65063d5822fe10de50f?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Rahman", "link": "https://stackoverflow.com/users/5556013/syed-rahman"}, "edited": false, "score": 0, "creation_date": 1452712221, "post_id": 34774849, "comment_id": 57295223, "body": "void make_zero(int row, int col, double ** matrix) doesn&#39;t seem to work. Can you please elaborate on using std::vector, or point me in the right direction? Thanks."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1452712617, "post_id": 34774849, "comment_id": 57295469, "body": "problem with this answer: <code>double l[i][j]</code> does not decay to <code>double**</code> even if the compiler supports VLA. Something worth noting: <code>std::vector&lt;std::vector&lt;double&gt; &gt;</code> has serious performance problems due to the lack of contiguity between the <code>vector&lt;double&gt;</code>s in the outer <code>vector</code>. Recommend using a 1D vector instead and doing the 2D indexing manually."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3, "user_id": 5556013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd250627171a65063d5822fe10de50f?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Rahman", "link": "https://stackoverflow.com/users/5556013/syed-rahman"}, "edited": false, "score": 0, "creation_date": 1452712936, "post_id": 34774849, "comment_id": 57295664, "body": "@SyedRahman take a look at <a href=\"http://stackoverflow.com/questions/34077816/how-to-properly-work-with-dynamically-allocated-multi-dimensional-arrays-in-c\" title=\"how to properly work with dynamically allocated multi dimensional arrays in c\">stackoverflow.com/questions/34077816/&hellip;</a>"}], "tags": [], "owner": {"reputation": 658, "user_id": 5749314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gyCdX.jpg?s=128&g=1", "display_name": "SashaMN", "link": "https://stackoverflow.com/users/5749314/sashamn"}, "is_accepted": false, "score": 1, "last_activity_date": 1452715051, "last_edit_date": 1452715051, "creation_date": 1452711373, "answer_id": 34774849, "question_id": 34774774, "link": "https://stackoverflow.com/questions/34774774/error-in-passing-a-matrix-as-an-argument/34774849#34774849", "title": "Error in passing a matrix as an argument", "body": "<pre><code>void make_zero(int row, int col, double ** matrix)\n</code></pre>\n\n<p>Note, that you need to pass also size of the matrix separately.</p>\n\n<p>Also you can use</p>\n\n<pre><code>std::vector&lt;std::vector&lt;double&gt; &gt;\n</code></pre>\n\n<p>instead and pass this object by reference, pointer, or just make a copy.</p>\n\n<p>Actually, it works, but your problem in this line also:</p>\n\n<pre><code>double l[i][j];\n</code></pre>\n\n<p>i, j is unknown during the compile time.\nYou have 2 ways.</p>\n\n<p>1) dynamically allocate the memory</p>\n\n<p>2) use <code>std::vector&lt;std::vector&lt;double&gt; &gt;</code>. Default constructor already sets zero values. But you can do it manually like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nvoid make_zero(std::vector&lt;std::vector&lt;double&gt; &gt; &amp; to_zero) {\n    for (int i = 0; i &lt; to_zero.size(); ++i) {\n        for (int j = 0; j &lt; to_zero[i].size(); ++j) {\n            to_zero[i][j] = 0;\n        }\n    }\n}\n\n\nvoid print_double_vector(const std::vector&lt;std::vector&lt;double&gt; &gt; &amp; to_print) {\n    for (int i = 0; i &lt; to_print.size(); ++i) {\n        for (int j = 0; j &lt; to_print[i].size(); ++j) {\n            std::cout &lt;&lt; to_print[i][j] &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\n\nint main() {\n    // your code goes here\n    int n, m;\n    std::cin &gt;&gt; n &gt;&gt; m;\n    std::vector&lt;std::vector&lt;double&gt; &gt; d(n, std::vector&lt;double&gt;(m));\n    print_double_vector(d);\n    make_zero(d);\n    print_double_vector(d);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/0X53Yj\" rel=\"nofollow\">http://ideone.com/0X53Yj</a></p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1452721691, "last_edit_date": 1495541715, "creation_date": 1452718932, "answer_id": 34776946, "question_id": 34774774, "link": "https://stackoverflow.com/questions/34774774/error-in-passing-a-matrix-as-an-argument/34776946#34776946", "title": "Error in passing a matrix as an argument", "body": "<p>There are a bunch of ways to do this with pointers. The most common is</p>\n\n<pre><code>void make_zero(int row, int col, double ** matrix)\n</code></pre>\n\n<p>defines a pointer (usually rows) to a pointer (usually columns). Unfortunately</p>\n\n<pre><code>double l[i][j]; \n</code></pre>\n\n<p>does not define a pointer to a pointer. If this syntax is supported by the compiler, and the compiler is not required to allow arrays of variable length, it most likely defines a pointer to a 1D array (<code>double l[i*j];</code>) and hides the indexing arithmetic used to convert the array to two dimensions. Anyway, it can't be passed to a <code>double **</code> because it isn't a <code>double **</code></p>\n\n<p>Trying to pass as an array is troublesome</p>\n\n<pre><code>void make_zero(int row, int col, double matrix[][NUMBER_OF_COLUMNS])\n</code></pre>\n\n<p>The number of columns in the array must be known to perform the indexing arithmetic and be provided to any functions called with it. This means that number of columns cannot be changed at run time because the indexing used by the function will be rendered invalid.</p>\n\n<p>Getting around this would require changes to the compiler that will drive it further and further from the C++ standard. A bad idea since there are a number of simple ways around calling functions with multi dimensional arrays. Most depend on arrays of arrays or <code>std::vector</code>s of <code>std::vector</code>s.</p>\n\n<p>And when it comes to these solutions, as far as I'm concerned, the best is don't. I'm not going to cover them.</p>\n\n<p>None of the arrays representing a dimension are guaranteed to be anywhere close to the others in memory, and this limits the CPU's ability to read and cache. Without caching and being able to look ahead, a modern CPU is at a serious performance disadvantage. (Read for more information: <a href=\"https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array\">Why is it faster to process a sorted array than an unsorted array?</a>)</p>\n\n<p>So what you want is a 1 D array, and those are easy to pass around. The indexing math is also easy, row number * size of column + column number, but you need to pass at least the size of the column around. Rather than scatter the book-keeping around like this:</p>\n\n<pre><code>void make_zero(int row, int col, std::vector&lt;double&gt; matrix)\n</code></pre>\n\n<p>make a wrapper class like this:</p>\n\n<pre><code>class Matrix\n{\nprivate:\n    std::vector&lt;double&gt; myArray;\n    size_t nrRows;\n    size_t nrColumns;\n\npublic:\n    Matrix(size_t rows, size_t columns) :\n            myArray(rows * columns), // allocate vector to store matrix. \n            nrRows(rows), \n            nrColumns(columns)\n    {\n\n    }\n    size_t getNrRows() const\n    {\n        return nrRows;\n    }\n    size_t getNrColumns() const\n    {\n        return nrColumns;\n    }\n\n    // gets value at row, column and returns a reference so caller can \n    // modify the value\n    double&amp; operator()(size_t row, size_t column)\n    {\n        // note: No sanity check for row &gt;= nrRows or column &gt; nrColumns\n        return myArray[row * nrColumns + column];\n    }\n\n    // gets value at row, column and returns a copy so caller cannot\n    // change the contents of the Matrix\n    double operator()(size_t row, size_t column) const\n    {\n        return myArray[row * nrColumns + column];\n    }\n};\n</code></pre>\n\n<p>Using the <code>vector</code> gets around a number of common pointer-to-array problems by managing its own memory. No destructor is required and <code>Matrix</code> can be copied and moved without requiring special handling because <code>vector</code> performs all that heavy lifting for us. </p>\n\n<p>And as a usage example, let's make a function that prints the matrix out:</p>\n\n<pre><code>std::ostream &amp; operator&lt;&lt;(std::ostream &amp;  out, const Matrix &amp; in)\n{\n    for (size_t i = 0; i &lt; in.getNrRows(); i++)\n    {\n        for (size_t j = 0; j &lt; in.getNrColumns(); j++)\n        {\n            out &lt;&lt; in(i,j) &lt;&lt; ' ';\n        }\n        out &lt;&lt; \"\\n\";\n    }\n\n    return out;\n}\n</code></pre>\n\n<p>And modifying OP's <code>main</code> function to use <code>Matrix</code> we get:</p>\n\n<pre><code>int main()\n{\n    int i = 0, j = 0;\n\n    cout &lt;&lt; \"Enter no of rows of the matrix\";\n    cin &gt;&gt; i;\n    cout &lt;&lt; \"Enter no of columns of the matrix\";\n    cin &gt;&gt; j;\n\n    Matrix matrix(i,j);\n\n    int p = 0, q = 0;\n\n    while (p &lt; i)\n    {\n        while (q &lt; j)\n        {\n            cout &lt;&lt; \"Enter the\" &lt;&lt; p + 1 &lt;&lt; \"*\" &lt;&lt; q + 1 &lt;&lt; \"entry\";\n            cin &gt;&gt; matrix(p,q);\n\n            q = q + 1;\n        }\n        p = p + 1;\n        q = 0;\n    }\n    cout &lt;&lt; matrix &lt;&lt; \"\\n\";\n\n    make_zero(matrix);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5556013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd250627171a65063d5822fe10de50f?s=128&d=identicon&r=PG&f=1", "display_name": "Syed Rahman", "link": "https://stackoverflow.com/users/5556013/syed-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 34776946, "answer_count": 2, "score": 0, "last_activity_date": 1452721691, "creation_date": 1452711099, "last_edit_date": 1452712189, "question_id": 34774774, "link": "https://stackoverflow.com/questions/34774774/error-in-passing-a-matrix-as-an-argument", "title": "Error in passing a matrix as an argument", "body": "<p>I am trying to get an understanding of how to work with matrices in C++. The code at the bottom is supposed to take an input matrix and return the places where there are 0s. However, I am getting the following errors:</p>\n\n<pre><code> matrix.cpp:47:3: error: no matching function for call to 'make_zero'  make_zero(i,j,l);\n     ^~~~~~~~~\n    matrix.cpp:8:6: note: candidate function not viable: no known conversion from 'double [i][j]' to\n      'double (*)[col]' for 3rd argument\n    void make_zero(int row, int col, double matrix[row][col])\n     ^\n    1 error generated.\n</code></pre>\n\n<p>when I try to run the following code:</p>\n\n<pre><code>// Matrix\n\n#include &lt;iostream&gt; \n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nvoid make_zero(int row, int col, double matrix[row][col])\n  {\n     int k,l;  \n for(k=0;k&lt;row;k++)\n    for(l=0;l&lt;col;l++)\n    {\n        if(matrix[k][l]==0)\n           printf(\"%d %d\\n\",k,l);\n    }\n\n }\n\n\n\nint main ()\n{\n  int i = 0,j = 0;\n\n  cout &lt;&lt; \"Enter no of rows of the matrix\";\n  cin &gt;&gt; i;\n  cout &lt;&lt; \"Enter no of columns of the matrix\";\n  cin &gt;&gt; j;\n\n  double l[i][j];\n\n  int p = 0, q = 0;\n\n  while (p &lt; i) {\nwhile (q &lt; j) {\n  cout &lt;&lt; \"Enter the\" &lt;&lt; p + 1 &lt;&lt; \"*\" &lt;&lt; q + 1 &lt;&lt; \"entry\";\n  cin &gt;&gt; l[p][q];\n\n  q = q + 1;\n}\np = p + 1;\nq = 0;\n  }\n  cout &lt;&lt; l &lt;&lt; \"\\n\";\n\n  make_zero(i,j,l);\n}\n</code></pre>\n\n<p>Any help would be appreciated. Thanks.</p>\n"}, {"tags": ["c++", "dictionary", "casting", "iterator", "nodes"], "comments": [{"owner": {"reputation": 1709, "user_id": 4325016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f0a09185dea1c14428422310a022de?s=128&d=identicon&r=PG&f=1", "display_name": "George Houpis", "link": "https://stackoverflow.com/users/4325016/george-houpis"}, "edited": false, "score": 0, "creation_date": 1452711341, "post_id": 34774772, "comment_id": 57294726, "body": "Are you trying to redefine a member reference with this-&gt;_it = iterator( &amp;_pairs);?"}, {"owner": {"reputation": 165, "user_id": 5759941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c17e647dc92a0274428b0f0e0cf8d522?s=128&d=identicon&r=PG&f=1", "display_name": "KittyT2016", "link": "https://stackoverflow.com/users/5759941/kittyt2016"}, "reply_to_user": {"reputation": 1709, "user_id": 4325016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f0a09185dea1c14428422310a022de?s=128&d=identicon&r=PG&f=1", "display_name": "George Houpis", "link": "https://stackoverflow.com/users/4325016/george-houpis"}, "edited": false, "score": 0, "creation_date": 1452712130, "post_id": 34774772, "comment_id": 57295172, "body": "that&#39;s typo, but still the same problem after fixing it. The problem is that the error appears despite that I call iterator ctor with Node&lt;Pair&gt; * variable, but it doesn&#39;t see it."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1452712960, "post_id": 34774772, "comment_id": 57295678, "body": "Can&#39;t tell what scope things are in, and you haven&#39;t shown enough code. Maybe try <code>this-&gt;_it = ::iterator(&amp;_pairs);</code> (on the assumption your <code>iterator</code> is declared globally but is being hidden by the <code>iterator</code> within <code>std::map</code>, which I&#39;m assuming <code>MtmMap</code> is derived from)."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5759941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c17e647dc92a0274428b0f0e0cf8d522?s=128&d=identicon&r=PG&f=1", "display_name": "KittyT2016", "link": "https://stackoverflow.com/users/5759941/kittyt2016"}, "edited": false, "score": 0, "creation_date": 1452719426, "post_id": 34776648, "comment_id": 57299313, "body": "Yes, you&#39;re right, that among many other trouble )) but thanks. i&#39;ve handled it already."}], "tags": [], "owner": {"reputation": 4290, "user_id": 311314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9098882126e0907a9df39856ef1b5bfa?s=128&d=identicon&r=PG", "display_name": "Nathan Ernst", "link": "https://stackoverflow.com/users/311314/nathan-ernst"}, "is_accepted": false, "score": 0, "last_activity_date": 1452717754, "creation_date": 1452717754, "answer_id": 34776648, "question_id": 34774772, "link": "https://stackoverflow.com/questions/34774772/trouble-with-begin-of-my-map-realization/34776648#34776648", "title": "Trouble with begin() of my Map realization", "body": "<p>The problem is that you've declared <code>begin</code> as <code>const</code>. Thus this in this line:</p>\n\n<pre><code>this-&gt;_it = iterator(&amp;_pairs);\n</code></pre>\n\n<p><code>&amp;_pairs</code> has resulting type of <code>const Node&lt;Pair&gt;*</code>. Your <code>iterator</code> class only accepts a non-const pointer to <code>Node&lt;Pair&gt;</code> (implicit conversion from a const-pointer to a non-const-pointer is not allowed).</p>\n\n<p>Either <code>iterator</code> needs to be modified to accept (and store) a const-pointer, or <code>begin</code> needs to drop the <code>const</code> qualifier.</p>\n"}], "owner": {"reputation": 165, "user_id": 5759941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c17e647dc92a0274428b0f0e0cf8d522?s=128&d=identicon&r=PG&f=1", "display_name": "KittyT2016", "link": "https://stackoverflow.com/users/5759941/kittyt2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452717754, "creation_date": 1452711095, "last_edit_date": 1452712158, "question_id": 34774772, "link": "https://stackoverflow.com/questions/34774772/trouble-with-begin-of-my-map-realization", "title": "Trouble with begin() of my Map realization", "body": "<p>help me with figuring out please why I have this error:</p>\n\n<p><strong>error:</strong></p>\n\n<pre><code>&lt;function-style-cast&gt;: The compiler cannot cast from \"const mtm::Node&lt;mtm::MtmMap&lt;int,int,std::less&lt;KeyType&gt;&gt;::Pair&gt; *\" to \"mtm::MtmMap&lt;int,int,std::less&lt;KeyType&gt;&gt;::iterator\"\n</code></pre>\n\n<p>Those are different relevant parts of the code:</p>\n\n<p><strong>Node:</strong></p>\n\n<pre><code>template &lt;typename DataType&gt;\n        class Node {\n    public:\n        DataType data;\n        Node&lt;DataType&gt; *head;\n        Node&lt;DataType&gt; *next;\n\n    public:\n        Node(const DataType&amp; data) :data(data), head(nullptr) {\n            next = nullptr; \n        };\n</code></pre>\n\n<p><strong>Iterator:</strong></p>\n\n<pre><code>class iterator {\n        private:\n            Node&lt;Pair&gt;* _ptr = nullptr;\n        public:\n            iterator(Node&lt;Pair&gt;* ptr = nullptr) : _ptr(ptr) { }\n\n            iterator(const iterator&amp; itr) = default;\n\n            ~iterator() = default;\n\n            iterator&amp; operator=(const iterator&amp;) = default;\n</code></pre>\n\n<p><strong>Private of MtmMap:</strong></p>\n\n<pre><code>private:\n        Node&lt;Pair&gt; _pairs;\n        iterator _it; \n        int _size;\n</code></pre>\n\n<p><strong>The code when the error shows:(in body of MtmMap)</strong></p>\n\n<pre><code>iterator begin() const{\n            if (this-&gt;_size) {\n                this-&gt;_it = iterator(&amp;_pairs);\n            }\n            return this-&gt;_it;\n        }\n</code></pre>\n"}, {"tags": ["c++", "input", "whitespace", "cin", "getline"], "comments": [{"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 3, "creation_date": 1452711378, "post_id": 34774742, "comment_id": 57294744, "body": "Read a whole line with getline then perform string to integer conversion using stoi"}, {"owner": {"reputation": 33, "user_id": 5740779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aa4d643b56ef7ce692690d8322729df?s=128&d=identicon&r=PG&f=1", "display_name": "Walter White", "link": "https://stackoverflow.com/users/5740779/walter-white"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1452712247, "post_id": 34774742, "comment_id": 57295232, "body": "Works great and it&#39;s very quick to implement. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": true, "score": 4, "last_activity_date": 1452712734, "creation_date": 1452712734, "answer_id": 34775219, "question_id": 34774742, "link": "https://stackoverflow.com/questions/34774742/proper-way-to-flush-cin-input/34775219#34775219", "title": "Proper way to flush cin input", "body": "<p>Answered by mikedu95 in a comment:</p>\n\n<blockquote>\n  <p>Read a whole line with <code>getline</code>, then perform string to integer conversion using <code>stoi</code></p>\n</blockquote>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nstring str;\nint a, b, c, d;\n\nvoid main()\n{\n    cout &lt;&lt; \"Reading a\" &lt;&lt; endl;\n    getline(cin, str);\n    a = stoi(str);\n\n    cout &lt;&lt; \"Reading b\" &lt;&lt; endl;\n    getline(cin, str);\n    b = stoi(str);\n\n    cout &lt;&lt; \"Reading c\" &lt;&lt; endl;\n    getline(cin, str);\n    c = stoi(str);\n\n    cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; c &lt;&lt; endl;\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 3945915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cxw2o.jpg?s=128&g=1", "display_name": "Mohammad Ahmadi", "link": "https://stackoverflow.com/users/3945915/mohammad-ahmadi"}, "is_accepted": false, "score": 3, "last_activity_date": 1452712804, "last_edit_date": 1495535302, "creation_date": 1452712804, "answer_id": 34775243, "question_id": 34774742, "link": "https://stackoverflow.com/questions/34774742/proper-way-to-flush-cin-input/34775243#34775243", "title": "Proper way to flush cin input", "body": "<p>You can find your answer here:\n<a href=\"https://stackoverflow.com/questions/20832289/how-does-cin-clear-clear-the-input-buffer\">How does cin.clear() clear the input buffer?</a></p>\n\n<p>I bring here part of an answer from this page:</p>\n\n<p>If you need to remove character from the input buffer, you'll need to do it explicitly. For example you can use</p>\n\n<ul>\n<li><code>stream.ignore();</code> to unconditionally remove the next character (if any; if there is none, the stream will get <code>std::ios_base::eofbit</code> set).</li>\n<li><code>stream.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');</code> to remove all character up to and including the first <code>'\\n'</code> character encountered.</li>\n<li>you might want to <code>ignore()</code> characters while <code>stream.peek()</code> yields a character class you don't like (e.g., while <code>isdigit(stream.peek())</code> yields <code>false</code>)</li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 5740779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aa4d643b56ef7ce692690d8322729df?s=128&d=identicon&r=PG&f=1", "display_name": "Walter White", "link": "https://stackoverflow.com/users/5740779/walter-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6512, "favorite_count": 0, "accepted_answer_id": 34775219, "answer_count": 2, "score": 1, "last_activity_date": 1452712804, "creation_date": 1452710999, "last_edit_date": 1452712777, "question_id": 34774742, "link": "https://stackoverflow.com/questions/34774742/proper-way-to-flush-cin-input", "title": "Proper way to flush cin input", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint a, b, c, d;\n\nvoid main()\n{\n    cout &lt;&lt; \"Reading a\" &lt;&lt; endl;\n    cin.ignore();\n//  cin.clear();\n    cin &gt;&gt; a;\n\n    cout &lt;&lt; \"Reading b\" &lt;&lt; endl;\n    cin.ignore();\n//  cin.clear();\n    cin &gt;&gt; b;\n\n    cout &lt;&lt; \"Reading c\" &lt;&lt; endl;\n    cin.ignore();\n//  cin.clear();\n    cin &gt;&gt; c;\n\n    cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; c &lt;&lt; endl;\n    system(\"pause\");\n}\n</code></pre>\n\n<p>I read 3 times to variables from a to c. It works when fine when I enter random number then accept it using no white spaces (<code>23</code> , <code>45</code> , <code>66</code>). However when my input looks like this <code>23 45 66</code> (spaces in between), it immediately puts <code>23</code> to <code>a</code>, <code>45</code> to <code>b</code> and <code>66</code> to <code>c</code>. </p>\n\n<p>My intention is to read number, end on whitespace, then forget the rest of the input and read again to the next variable.</p>\n\n<p><code>cin.ignore()</code> and <code>cin.clear()</code> don't seem to help me, but probably I am using them wrong.</p>\n\n<p>I could make my own buffer and then check it for whitespaces, but before doing that I want to see if there is another way.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1452710539, "post_id": 34774522, "comment_id": 57294168, "body": "Also see: <a href=\"http://stackoverflow.com/questions/8745260/c-return-array-from-function\" title=\"c return array from function\">stackoverflow.com/questions/8745260/&hellip;</a>"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1452710674, "post_id": 34774522, "comment_id": 57294271, "body": "Why not use an <code>std::vector</code> instead of an array?"}, {"owner": {"reputation": 1056, "user_id": 1816217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8acdefe9fda212f43a415a2be438e137?s=128&d=identicon&r=PG", "display_name": "abdulmanov.ilmir", "link": "https://stackoverflow.com/users/1816217/abdulmanov-ilmir"}, "edited": false, "score": 0, "creation_date": 1452710781, "post_id": 34774522, "comment_id": 57294335, "body": "std::vector is ok, but I want <code>int[]</code> in the example."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1452711017, "post_id": 34774522, "comment_id": 57294507, "body": "you can always <a href=\"http://stackoverflow.com/questions/2923272/how-to-convert-vector-to-array-c\">convert a vector to a c-style array</a> when needed. Imho best practice is to convert it <b>only</b> when needed, thus even if the client code needs a <code>int[]</code> I would use a vector in the function."}], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 5749314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gyCdX.jpg?s=128&g=1", "display_name": "SashaMN", "link": "https://stackoverflow.com/users/5749314/sashamn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452710483, "creation_date": 1452710483, "answer_id": 34774575, "question_id": 34774522, "link": "https://stackoverflow.com/questions/34774522/c-return-type-from-function/34774575#34774575", "title": "c++ return type from function", "body": "<p>You need dynamically allocate memory (it is on stack now). Return type will be int * then.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 5, "last_activity_date": 1452717046, "last_edit_date": 1495541045, "creation_date": 1452711274, "answer_id": 34774824, "question_id": 34774522, "link": "https://stackoverflow.com/questions/34774522/c-return-type-from-function/34774824#34774824", "title": "c++ return type from function", "body": "<p>You can't do that. For several reasons (including history, and C compatibility, and the rule that decays arrays to pointers in several important cases) you cannot return a raw array; but you can return a <code>struct</code> (or <code>class</code>....) containing that array.</p>\n\n<p>What you could do in C++11 is to return a <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array&lt;int,40&gt;</code></a> ; it behaves like your thing, but it is a proper class (with all the usual operations you imagine, and iterator stuff too). So your code becomes:</p>\n\n<pre><code>std::array&lt;int,40&gt; test(void) {\n  std::array&lt;int,40&gt; nums;\n  for (int i=0; i &lt; 40; i++) {\n    nums[i] = i + 1;\n  }\n  return nums;\n}\n</code></pre>\n\n<p>An <a href=\"https://en.wikipedia.org/wiki/Optimizing_compiler\" rel=\"nofollow noreferrer\">optimizing compiler</a> (e.g. <code>g++ -Wall -O2 -std=c++11</code> .... using a recent <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>) will optimize that exactly like your hypothetical return type (or like <a href=\"https://stackoverflow.com/a/34774843/841108\">FISOCPP's answer</a>, which is likely to get compiled into the same object code).</p>\n\n<p>If the size (40) can vary at runtime, use <code>std::vector&lt;int&gt;</code> as the type and declare <code>std::vector&gt; nums{40};</code>  -then you later could <code>nums.resize(17);</code> and the data would then stay in heap (so there is a tiny performance penalty).</p>\n"}, {"comments": [{"owner": {"reputation": 1056, "user_id": 1816217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8acdefe9fda212f43a415a2be438e137?s=128&d=identicon&r=PG", "display_name": "abdulmanov.ilmir", "link": "https://stackoverflow.com/users/1816217/abdulmanov-ilmir"}, "edited": false, "score": 0, "creation_date": 1452712097, "post_id": 34774843, "comment_id": 57295150, "body": "Have to do I release after that? I mean is it heap or stack?"}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "reply_to_user": {"reputation": 1056, "user_id": 1816217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8acdefe9fda212f43a415a2be438e137?s=128&d=identicon&r=PG", "display_name": "abdulmanov.ilmir", "link": "https://stackoverflow.com/users/1816217/abdulmanov-ilmir"}, "edited": false, "score": 0, "creation_date": 1452712336, "post_id": 34774843, "comment_id": 57295286, "body": "It&#39;s the &quot;stek&quot;. Every variable presumably would be stored there (you should consult the ISO standard for concrete information). However you could have a pointer to non-stack memory (which is often fed by calling a function). In our case we are not returning a pointer and no external function is called so you could assume it&#39;s the stack.  So no external work is needed for the calling function."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1452713996, "post_id": 34774843, "comment_id": 57296317, "body": "That&#39;s not true - I&#39;m copying the local variable &#39;nums&#39; to the return-value. So there is no undefined behavior as far as I know. I&#39;m returning the whole array - not a pointer to it."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1452717145, "post_id": 34774843, "comment_id": 57298144, "body": "If you edit your answer I would be able to upvote it. I wrongly downvoted it!"}], "tags": [], "owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "is_accepted": false, "score": 2, "last_activity_date": 1452786649, "last_edit_date": 1452786649, "creation_date": 1452711341, "answer_id": 34774843, "question_id": 34774522, "link": "https://stackoverflow.com/questions/34774522/c-return-type-from-function/34774843#34774843", "title": "c++ return type from function", "body": "<p>The <em>only</em> way to achieve that is to encapsulate your array into a structure (or union - which is not relevant).</p>\n\n<pre><code>typedef struct { int ra[20]; } rvtyp;\n\nrvtyp test()\n{\n    int nums[40];\n\n    for (int i=0; i &lt; 40; i++)\n    {\n        nums[i] = i + 1;\n    }\n\n    return *(rvtyp*)&amp;nums;\n}\n</code></pre>\n\n<p>Then you can access your returned value by 'test().ra'.</p>\n"}], "owner": {"reputation": 1056, "user_id": 1816217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8acdefe9fda212f43a415a2be438e137?s=128&d=identicon&r=PG", "display_name": "abdulmanov.ilmir", "link": "https://stackoverflow.com/users/1816217/abdulmanov-ilmir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 34774824, "answer_count": 3, "score": 2, "last_activity_date": 1452856631, "creation_date": 1452710334, "question_id": 34774522, "link": "https://stackoverflow.com/questions/34774522/c-return-type-from-function", "title": "c++ return type from function", "body": "<p>In this example I want return <code>int nums[40]</code><br>\nHow can I do it?  </p>\n\n<pre><code>&lt;RETURNTYPE&gt; test()\n{\n    int nums[40];\n\n    for (int i=0; i &lt; 40; i++)\n    {\n        nums[i] = i + 1;\n    }\n\n    return nums;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "edited": false, "score": 2, "creation_date": 1452710231, "post_id": 34774418, "comment_id": 57293969, "body": "Any feedback on the down vote?"}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1452710234, "post_id": 34774418, "comment_id": 57293971, "body": "Why don&#39;t you allocate the memory dynamically ?"}, {"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "reply_to_user": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1452710302, "post_id": 34774418, "comment_id": 57294019, "body": "I can but then it takes an inordinate amount of time to run.  I&#39;m trying to get it all in the compile time."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1452710850, "post_id": 34774418, "comment_id": 57294395, "body": "How exactly your array definition looks like? <code>const float arr[bla][blah] {values};</code>? If so, have you tried <code>constexpr</code>?"}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1452711476, "post_id": 34774418, "comment_id": 57294801, "body": "Provide your source or at least the relevant lines where you define and initialize"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1452711842, "post_id": 34774418, "comment_id": 57295000, "body": "I can guess that 8 million float literals in a source file is not (yet) part of the compiler test suite. Why not store it in a binary file and load that during startup?"}, {"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "edited": false, "score": 0, "creation_date": 1452711881, "post_id": 34774418, "comment_id": 57295030, "body": "Added code to the original post.  I tried <code>constexpr</code> but I get a host of syntax errors.  It doesn&#39;t appear to support that or I don&#39;t have a correct setting to use it. Here&#39;s what I had: <code>static SKEWLOGISTICFUNCTIONSDLL_API constexpr int shapeValues = 2001;</code>"}, {"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "edited": false, "score": 0, "creation_date": 1452711951, "post_id": 34774418, "comment_id": 57295071, "body": "&quot;Why not store it in a binary file and load that during startup?&quot; -- I&#39;m not familiar with that, but I&#39;ll look that up."}, {"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1452712676, "post_id": 34774418, "comment_id": 57295505, "body": "@BoPersson So, if I went the binary file route, I would just tell the program running the DLL to load the binary file on startup?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1452713085, "post_id": 34774418, "comment_id": 57295738, "body": "Another crazy idea :-)  If the values are <i>that</i> regular, why do you have to store them all instead of calculating them as needed?"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1452713112, "post_id": 34774418, "comment_id": 57295754, "body": "<i>&quot;I&#39;m trying to get it all in the compile time.&quot;</i> - You&#39;ll still pay the memory allocation cost at run time, it&#39;ll just be paid when the OS loads the module&#39;s pages instead of somewhere under <code>main</code>."}, {"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1452713300, "post_id": 34774418, "comment_id": 57295858, "body": "@BoPersson As the Shape and Distance parameters approach zero, the function that calculates them takes longer, such as a few seconds once one of the parameters is below 0.1 or even for hours if one of the parameters is at zero.  My solution is provide a table for the area of concern (Shape &lt;= 2 and Distance &gt;= -2 and &lt;= 2) and then do the function for the remainder."}, {"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1452713385, "post_id": 34774418, "comment_id": 57295930, "body": "@MooseBoys How would I tell the DLL to initialize the table?  Would I create an &quot;Initialization&quot; function and then call it first in the main program?"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1452713614, "post_id": 34774418, "comment_id": 57296098, "body": "@TheLionKing Never mind, I thought you were talking about the cost to allocate the memory; it sounds like the real cost is in the LUT generation, in which case storing it as a separate file that you load at run-time is the best approach."}, {"owner": {"reputation": 4287, "user_id": 1492351, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/27b06d1b6cdf815e86752a61b67435e0?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Andriyanov", "link": "https://stackoverflow.com/users/1492351/oleg-andriyanov"}, "edited": false, "score": 1, "creation_date": 1452713645, "post_id": 34774418, "comment_id": 57296120, "body": "I&#39;ve seen recently a post about the same problem. The suggested solution was to create a separate object file out of a binary file, but use an assembler to create the object file instead of a compiler. Then link the main program against that object file."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 1, "creation_date": 1452714069, "post_id": 34774418, "comment_id": 57296372, "body": "@TheLionKing, how many values will you need at any specific point of time? You maybe better of to store the data in the DB - SQLite for example, and just query the appropriate table."}, {"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1452714454, "post_id": 34774418, "comment_id": 57296610, "body": "@Igor Actually, that&#39;s a thought as well.  Once I find the Shape for the data, all I would need is that one row of Distances, so potentially just 4001 floats at one time."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 1, "creation_date": 1452714681, "post_id": 34774418, "comment_id": 57296753, "body": "@TheLionKing, Exactly my point. And since SQLite is fully embeddable , all you will need is just provide a DB with the binary. Just get the source and include it in the project. And grab the command-line tool to create a DB - you will just need 1 table. Then you are done. You may also look at some other embeddable DB engine."}, {"owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1452723368, "post_id": 34774418, "comment_id": 57301219, "body": "@BoPersson Although not the answer to the question, the final solution was a binary file as suggested by Bo.  Upload time for 8 million floats is probably less than two seconds.  Thanks, Bo!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5790674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ce5b03ad35ec57d5aaf4c1f3cbf0830?s=128&d=identicon&r=PG&f=1", "display_name": "C. MacLean", "link": "https://stackoverflow.com/users/5790674/c-maclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1452791576, "last_edit_date": 1495541045, "creation_date": 1452791576, "answer_id": 34795632, "question_id": 34774418, "link": "https://stackoverflow.com/questions/34774418/initializing-2001-x-4001-const-float-array-gives-out-of-heap-space-cl-exe-exit/34795632#34795632", "title": "Initializing 2001 x 4001 const float array gives out of heap space/&quot;CL.exe&quot; exited with code 3 error", "body": "<p>The compiler is probably trying to optimize out this data and that takes much more memory. GCC is able to compile a test program with this large of an array, but is taking ~2.5GiB of ram to do so. Visual Studio is likely doing the same thing, so /Zm1000 isn't actually enough.</p>\n\n<p>There are alternative methods of storing blobs of data in binaries, but none of them are cross platform. With Visual Studio, the way of doing it is with resource files. With the GNU toolchain, objcopy is used. This sticks blobs into binary's the data segment, then the C++ code is linked against the symbols marking your binary blob. This avoids having the compiler trying to mess with large amounts of data. See this post for how to actually do it: <a href=\"https://stackoverflow.com/a/17441467/5790674\">https://stackoverflow.com/a/17441467/5790674</a>.</p>\n"}], "owner": {"reputation": 49, "user_id": 5785832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQY9y.jpg?s=128&g=1", "display_name": "TheLionKing", "link": "https://stackoverflow.com/users/5785832/thelionking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1452791576, "creation_date": 1452710034, "last_edit_date": 1452712794, "question_id": 34774418, "link": "https://stackoverflow.com/questions/34774418/initializing-2001-x-4001-const-float-array-gives-out-of-heap-space-cl-exe-exit", "title": "Initializing 2001 x 4001 const float array gives out of heap space/&quot;CL.exe&quot; exited with code 3 error", "body": "<p>I'm using C++ in Visual Studio 2013 on a Windows 7 x64 OS with 8.00 GB of RAM.</p>\n\n<p>I'm programming a DLL and have a 2001 x 4001 array of const floats for a large lookup table of ~8 million values, which should be 32 MB.</p>\n\n<p>Everything works fine when I compile without initializing the table with values and when I try to compile with initializing approximately 1400 x 4001 of the values.</p>\n\n<p>However, when I try to initialize the entire 2001 x 4001 table, I get:</p>\n\n<p>c1060 compiler is out of heap space error.</p>\n\n<p>I've added /Zm200 (and /Zm1000) to the command line options, but then error becomes:</p>\n\n<p>C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V120\\Microsoft.CppCommon.targets(341,5): error MSB6006: \"CL.exe\" exited with code 3.</p>\n\n<p>I've tried in Debug and Release and get the same results.</p>\n\n<p>Unfortunately I can't find anything helpful on this specific error.</p>\n\n<p>I'm not sure where to look, but 32 MB doesn't seem to be an inordinate amount of memory and even if so, wouldn't the /Zm1000 have made plenty of memory available if the default /Zm100 was enough for nearly 3/4 of the table?</p>\n\n<p>Finally, the vast majority of the DLL is the table.  There are about 150 other lines of code in total but only a handful of standard variables (int, double, etc.) are in scope at any one time.</p>\n\n<p>Here's the definition of the array:</p>\n\n<pre><code>static SKEWLOGISTICFUNCTIONSDLL_API const int shapeValues = 2001; // Enough for 0.000 to 2.000 in increments of 0.001\nstatic SKEWLOGISTICFUNCTIONSDLL_API const int distanceValues = 4001; // Enough for -2.000 to 2.000 in increments of 0.001\n\nstatic SKEWLOGISTICFUNCTIONSDLL_API const float skewLogisticTable[shapeValues][distanceValues];\n</code></pre>\n\n<p>And here's the start of the large table:</p>\n\n<pre><code>    const float MySkewLogisticFunctions::skewLogisticTable[shapeValues][distanceValues] =\n{\n    // Shape going down --&gt; 0.000 to 2.000 in increments of 0.001\n    // Distance going across --&gt; -2.000 to 2.000 in increments of 0.001\n    { 0.119203, 0.119308, 0.119413, . . .\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "data-structures"], "comments": [{"owner": {"reputation": 1113, "user_id": 4183920, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/373d5add81b78be87653a7987bf06fde?s=128&d=identicon&r=PG&f=1", "display_name": "PerryC", "link": "https://stackoverflow.com/users/4183920/perryc"}, "edited": false, "score": 0, "creation_date": 1452709227, "post_id": 34774135, "comment_id": 57293303, "body": "The line <code>(player % 2) ? 1 : 2</code> basically evaluates if <code>(player % 2)</code> is true. If it&#39;s true, the <code>1</code> is selected, otherwise, if it&#39;s false, the <code>2</code> is selected. The selected value is then assigned to <code>player</code>."}], "answers": [{"comments": [{"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1452709383, "post_id": 34774154, "comment_id": 57293400, "body": "@juanchopanza: right. What I meant to say is it should be used for its return value, not for side effects."}], "tags": [], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "is_accepted": false, "score": 3, "last_activity_date": 1452709252, "last_edit_date": 1452709252, "creation_date": 1452709125, "answer_id": 34774154, "question_id": 34774135, "link": "https://stackoverflow.com/questions/34774135/what-does-this-line-of-code-do-player-player-2-1-2/34774154#34774154", "title": "what does this line of code do? player = (player % 2) ? 1 : 2;", "body": "<p>It's the <a href=\"http://www.cprogramming.com/reference/operators/ternary-operator.html\" rel=\"nofollow\">ternary operator</a>.</p>\n\n<p>This line of code will set <code>player</code> to <code>1</code> if <code>player</code> originally was odd, and to <code>2</code> if it was even.</p>\n"}, {"tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 3, "last_activity_date": 1452722692, "last_edit_date": 1452722692, "creation_date": 1452709175, "answer_id": 34774173, "question_id": 34774135, "link": "https://stackoverflow.com/questions/34774135/what-does-this-line-of-code-do-player-player-2-1-2/34774173#34774173", "title": "what does this line of code do? player = (player % 2) ? 1 : 2;", "body": "<p>This is a conditional <code>if</code>, and is the same as:</p>\n\n<pre><code>if(player % 2)\n    player = 1; // Odd\nelse\n    player = 2; // Even\n</code></pre>\n\n<p>Another way to do this without an <code>if</code> branch:</p>\n\n<pre><code>player = 2 - (player &amp; 0x01);\n</code></pre>\n\n<p>The least significant bit is zero for even numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "is_accepted": false, "score": 0, "last_activity_date": 1452709268, "creation_date": 1452709268, "answer_id": 34774196, "question_id": 34774135, "link": "https://stackoverflow.com/questions/34774135/what-does-this-line-of-code-do-player-player-2-1-2/34774196#34774196", "title": "what does this line of code do? player = (player % 2) ? 1 : 2;", "body": "<p>It's the ternary operator. It takes this form:</p>\n\n<pre><code>boolean expression ? a : b;\n</code></pre>\n\n<p>Which translates to:</p>\n\n<pre><code>If this expression is true, then a else b\n</code></pre>\n\n<p>It's often used as the right-hand expression in assignment operators. In your case <code>player</code> is being assigned 1 or 2 based on whether they are even or odd. </p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 5780762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9a42f98a3624f49d3d65a2d8d03fa58?s=128&d=identicon&r=PG", "display_name": "Andreas Schmidt", "link": "https://stackoverflow.com/users/5780762/andreas-schmidt"}, "is_accepted": false, "score": 0, "last_activity_date": 1452709327, "creation_date": 1452709327, "answer_id": 34774217, "question_id": 34774135, "link": "https://stackoverflow.com/questions/34774135/what-does-this-line-of-code-do-player-player-2-1-2/34774217#34774217", "title": "what does this line of code do? player = (player % 2) ? 1 : 2;", "body": "<p>It meaning that if the Condition is true so Player have the Value 1 else it have 2.</p>\n\n<pre><code>if(player % 2) {\n    player = 1;\n} else {\n    player = 2;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4713484, "user_type": "registered", "profile_image": "https://graph.facebook.com/758208920961885/picture?type=large", "display_name": "Ali Amjad", "link": "https://stackoverflow.com/users/4713484/ali-amjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5168, "favorite_count": 0, "closed_date": 1452709252, "accepted_answer_id": 34774173, "answer_count": 4, "score": 0, "last_activity_date": 1452722692, "creation_date": 1452709061, "last_edit_date": 1452709263, "question_id": 34774135, "link": "https://stackoverflow.com/questions/34774135/what-does-this-line-of-code-do-player-player-2-1-2", "closed_reason": "Duplicate", "title": "what does this line of code do? player = (player % 2) ? 1 : 2;", "body": "<p>I can`t understand this line \nwhy we use question mark \"?\" in it.\nthere are 2 player 1 and 2 .</p>\n\n<pre><code>player = (player % 2) ? 1 : 2;\n</code></pre>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 2, "creation_date": 1452709024, "post_id": 34774083, "comment_id": 57293160, "body": "Support for multi-byte characters for Win32 is very bad. You should better switch to Unicode - it supports even Windows XP. You can find this article useful though - <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a> . The general problem with using CodePages is that your source-files are bound to some specific code-page unless you write your strings with hex characters which is not the best option. So then if someone needs to use your source files it would need to switch to the code page that you are using (at least with VS)."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 1, "creation_date": 1452709025, "post_id": 34774083, "comment_id": 57293162, "body": "No, I don&#39;t think so, and definitely not unless your system locale is set to such that supports these symbols and your dir name is encoded with teh same locale. Why not use <code>CreateDirectoryW</code>?"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 5, "creation_date": 1452709060, "post_id": 34774083, "comment_id": 57293187, "body": "Unless you have to support some ancient version of Windows, why wouldn&#39;t you use Unicode? It&#39;s 2016, not 1995."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1452711660, "post_id": 34774083, "comment_id": 57294894, "body": "Please read: <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">utf8everywhere.org</a> (10 How to do text on Windows)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1452740072, "post_id": 34774083, "comment_id": 57306776, "body": "@DieterL&#252;cking: worth reading, but some of it needs to be taken with a grain of salt.  In particular, converting from UTF-16 to UTF-8 and back to use the API needs to be done with greater care: as of Vista, the MultiByteToWideChar and WideCharToMultibyte functions are lossy.  I think other strictly-standards-conforming functions will too.  See <a href=\"http://stackoverflow.com/q/34743801/886887\">stackoverflow.com/q/34743801/886887</a> for example."}, {"owner": {"reputation": 9, "user_id": 5508293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EA60BPgcNhE/AAAAAAAAAAI/AAAAAAAADl0/XAKljiwwQvw/photo.jpg?sz=128", "display_name": "buggex", "link": "https://stackoverflow.com/users/5508293/buggex"}, "edited": false, "score": 0, "creation_date": 1452770851, "post_id": 34774083, "comment_id": 57320170, "body": "Thanks for the comments. I was curious to see if it was possible at all but seams that I will be using CreateDirectoryW. Unfortunately using Unicode is not an option at the moment. Thanks for the input and the links to the articles, will give them a read."}], "owner": {"reputation": 9, "user_id": 5508293, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EA60BPgcNhE/AAAAAAAAAAI/AAAAAAAADl0/XAKljiwwQvw/photo.jpg?sz=128", "display_name": "buggex", "link": "https://stackoverflow.com/users/5508293/buggex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1216, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1452708870, "creation_date": 1452708870, "question_id": 34774083, "link": "https://stackoverflow.com/questions/34774083/is-it-possible-to-use-createdirectorya-to-create-directories-with-asian-glyphs", "title": "Is it possible to use CreateDirectoryA to create directories with asian glyphs", "body": "<p>I'm trying to create a dir in windows with Chinese glyphs. (Project uses Multi-Byte char set)  </p>\n\n<p>Lets say you have the Chinese glyphs \u6d4b\u8bd5 in code page 936: \u00b2\u00e2\u00ca\u00d4<br>\nWould it be possible to some how use CreateDirectoryA to create a dir in windows named: \u6d4b\u8bd5  </p>\n\n<pre><code>std::string dir936 = \"H:\u00b2\u00e2\u00ca\u00d4\";\nCreateDirectoryA(dir936.c_str(), NULL);\n</code></pre>\n\n<p>This creates a dir named H:\\\u00b2\u00e2\u00ca\u00d4.</p>\n\n<p>Can I specify something like the locale or codepage to make this work?<br>\nOr am I required to convert to wide string and use CreateDirectoryW?</p>\n"}, {"tags": ["c++", "user-interface", "winapi", "slider", "controls"], "answers": [{"comments": [{"owner": {"reputation": 578, "user_id": 793243, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80fcacf0c2f1068d763c6df97b4c29b4?s=128&d=identicon&r=PG&f=1", "display_name": "Bogey Jammer", "link": "https://stackoverflow.com/users/793243/bogey-jammer"}, "edited": false, "score": 0, "creation_date": 1452710704, "post_id": 34774407, "comment_id": 57294283, "body": "Yes, that is the workaround I intend to use until, if possible, there is a way to do it directly in the control."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1452714927, "post_id": 34774407, "comment_id": 57296892, "body": "This seems the only solution if the control doesn&#39;t support it itself."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 2, "last_activity_date": 1452709998, "creation_date": 1452709998, "answer_id": 34774407, "question_id": 34773937, "link": "https://stackoverflow.com/questions/34773937/how-to-reverse-a-trackbars-range-commctrl-dll/34774407#34774407", "title": "How to reverse a trackbar&#39;s range&#160;? (commctrl.dll)", "body": "<p>A simple way to do this, would be to reverse the result.</p>\n\n<p>Something like:</p>\n\n<pre><code>result_value = max_value - trackbar_value;\n</code></pre>\n\n<p>And the other way round to set the value.</p>\n"}], "owner": {"reputation": 578, "user_id": 793243, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80fcacf0c2f1068d763c6df97b4c29b4?s=128&d=identicon&r=PG&f=1", "display_name": "Bogey Jammer", "link": "https://stackoverflow.com/users/793243/bogey-jammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452709998, "creation_date": 1452708376, "question_id": 34773937, "link": "https://stackoverflow.com/questions/34773937/how-to-reverse-a-trackbars-range-commctrl-dll", "title": "How to reverse a trackbar&#39;s range&#160;? (commctrl.dll)", "body": "<p>I'd like to use a comctrl.dll trackbar for sound level adjustment, with the lowest value at its bottom and the highest at the top, reversed from the normal situation but I can't do it.\nThe <strong>TBS_REVERSED</strong> flag doesn't seem to really have any effect on the slider, and reversing the min and max values in the <strong>TBM_SETRANGE</strong> message is not supported. Doing it individually with <strong>TBM_SETRANGEMIN</strong> &amp; MAX either\u2026</p>\n\n<pre><code>HWND hwndTrack = CreateWindowEx(\n        NULL,                               // no extended styles \n        TRACKBAR_CLASS,                  // class name \n        L\"Trackbar Control test\",              // title (caption) \n        WS_CHILD | WS_VISIBLE | TBS_AUTOTICKS | TBS_VERT | TBS_TOOLTIPS | TBS_DOWNISLEFT | TBS_REVERSED,              // style \n        10, 44,                          // position \n        30, 200,                         // size \n        hwnd,                         // parent window \n        (HMENU)IDC_MAIN_TRACKBARTEST,                     // control identifier \n        GetModuleHandle(NULL),                         // instance \n        NULL                             // no WM_CREATE parameter \n        );\n    SendMessage(hwndTrack, TBM_SETRANGE,\n        (WPARAM)TRUE,                   // redraw flag \n        (LPARAM)MAKELONG(0, 127));  // min. &amp; max. positions\n</code></pre>\n"}, {"tags": ["c++", "opengl", "graphics", "sdl"], "comments": [{"owner": {"reputation": 22952, "user_id": 210211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8721ff8fa4b5c658058f4a2803231f44?s=128&d=identicon&r=PG", "display_name": "comingstorm", "link": "https://stackoverflow.com/users/210211/comingstorm"}, "edited": false, "score": 2, "creation_date": 1452708778, "post_id": 34773928, "comment_id": 57293013, "body": "What do you mean by &quot;To remove alpha channel&quot; and &quot;while maintaining the alpha channel&quot;? It isn&#39;t clear what you&#39;re trying to do."}, {"owner": {"reputation": 2046, "user_id": 3829741, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17d134a7bfba2d86b9777d674344758d?s=128&d=identicon&r=PG&f=1", "display_name": "dari", "link": "https://stackoverflow.com/users/3829741/dari"}, "edited": false, "score": 0, "creation_date": 1452708984, "post_id": 34773928, "comment_id": 57293130, "body": "Make sure your terrain in the back has an alpha of 1."}, {"owner": {"reputation": 47, "user_id": 4815530, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YvArX.png?s=128&g=1", "display_name": "Macko", "link": "https://stackoverflow.com/users/4815530/macko"}, "edited": false, "score": 0, "creation_date": 1452709435, "post_id": 34773928, "comment_id": 57293438, "body": "I mean I don&#39;t want it to be transparent, just 100% opaque, but at the same time areas without any image (like between his legs) should be see through so I can see the background."}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1452732954, "post_id": 34773928, "comment_id": 57304755, "body": "You&#39;re not removing anything here. You&#39;re just blending the thing you&#39;re drawing (source) with what was already in the framebuffer (destination) and you are using the alpha component of the source to control the proportions used when mixing. Incidentally, the function here is simply linear interpolation weighted by alpha: <code>src * a + dst * (1 - a)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "edited": false, "score": 1, "creation_date": 1452711220, "post_id": 34774286, "comment_id": 57294645, "body": "You&#39;re welcome to share with us the piece of shader code that caused your fragments to blend. This way, others who come across your question can avoid a potential common pitfall :)"}, {"owner": {"reputation": 47, "user_id": 4815530, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YvArX.png?s=128&g=1", "display_name": "Macko", "link": "https://stackoverflow.com/users/4815530/macko"}, "reply_to_user": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "edited": false, "score": 0, "creation_date": 1452713414, "post_id": 34774286, "comment_id": 57295947, "body": "This is the piece of code that was causing the issue: <a href=\"http://pastebin.com/UbFPdpYN\" rel=\"nofollow noreferrer\">pastebin.com/UbFPdpYN</a>  I&#39;ve fixed it by changing the line number 3 to: color = textureColor;"}], "tags": [], "owner": {"reputation": 47, "user_id": 4815530, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YvArX.png?s=128&g=1", "display_name": "Macko", "link": "https://stackoverflow.com/users/4815530/macko"}, "is_accepted": false, "score": -1, "last_activity_date": 1452709568, "creation_date": 1452709568, "answer_id": 34774286, "question_id": 34773928, "link": "https://stackoverflow.com/questions/34773928/textures-and-background-blending-a-little/34774286#34774286", "title": "Textures and background blending a little", "body": "<p>Okay I've fixed it.\nIt turned out that I had a piece of code in the shader that blend everything. </p>\n"}], "owner": {"reputation": 47, "user_id": 4815530, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YvArX.png?s=128&g=1", "display_name": "Macko", "link": "https://stackoverflow.com/users/4815530/macko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1452709568, "creation_date": 1452708352, "question_id": 34773928, "link": "https://stackoverflow.com/questions/34773928/textures-and-background-blending-a-little", "title": "Textures and background blending a little", "body": "<p>So I am making a simple opengl/SDL project for my university assignment.</p>\n\n<p>Basically a very simple game with a character moving across the screen.</p>\n\n<p>I am almost done but I've encountered a problem.</p>\n\n<p>So when I load textures etc, they sort of blend together and \"shine\" through each other.</p>\n\n<p>Here's an example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HFwxO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HFwxO.png\" alt=\"enter image description here\"></a></p>\n\n<p>Left - Red background color     glClearColor(1.0f, 0.0f, 0.0f, 0.0f);\nMiddle - Green background color<br>\nRight - Black background </p>\n\n<p>As you can see, the background is affecting textures in front of it which I really don't like. </p>\n\n<p>The black background is alright-ish (makes my textures a bit darker) and I could live with it but as you can see, with black background we can see a little bit of the texture behind vader through him. </p>\n\n<p>It's the most noticeable around his shoulders. Id rather keep the textures completely opaque and maintain colours as they are.</p>\n\n<p>To remove alpha channel I am using </p>\n\n<pre><code>    glEnable(GL_BLEND);\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n</code></pre>\n\n<p>but I feel like this isn't the best way to do it since it blends all the textures together as well.</p>\n\n<p>Is there a way to keep the image completely opaque while maintaining the alpha channel so there's no stuff around it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5785836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0176a422f60e36b6b81467c54b3f43?s=128&d=identicon&r=PG&f=1", "display_name": "SEP101", "link": "https://stackoverflow.com/users/5785836/sep101"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1452711106, "post_id": 34773733, "comment_id": 57294570, "body": "Thanks everyone, I compiled everything separately and then I had them all in one project in Code:Blocks, so I just used the program to run and build that project, thinking that was the way to do it? Earlier I was using Xcode and just using the terminal to compile etc., but then I get a different error, but probably because I am not doing it correctly. Can anyone tell me how to the whole compiling/linking/running process using the terminal properly? Thanks!"}, {"owner": {"reputation": 1, "user_id": 5785836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0176a422f60e36b6b81467c54b3f43?s=128&d=identicon&r=PG&f=1", "display_name": "SEP101", "link": "https://stackoverflow.com/users/5785836/sep101"}, "edited": false, "score": 0, "creation_date": 1452760030, "post_id": 34773733, "comment_id": 57313444, "body": "Ok, thanks for the replies. The project I made in Code::Blocks had extra .o files, but I have no idea where they came from. I will read around a bit more but perhaps it is easier to sort out my own Makefile and work out how to run these things through the terminal."}], "answers": [{"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1452708080, "creation_date": 1452708080, "answer_id": 34773840, "question_id": 34773733, "link": "https://stackoverflow.com/questions/34773733/ld-4-duplicate-symbols-for-architecture-x86-64/34773840#34773840", "title": "ld: 4 duplicate symbols for architecture x86_64", "body": "<p><code>g++  -o bin/Debug/Binomial obj/Debug/BinModel01.o obj/Debug/BinModel01.o obj/Debug/Main04.o obj/Debug/Main04.o</code></p>\n\n<p>you shouldn't be linking in files twice.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1452708131, "creation_date": 1452708131, "answer_id": 34773859, "question_id": 34773733, "link": "https://stackoverflow.com/questions/34773733/ld-4-duplicate-symbols-for-architecture-x86-64/34773859#34773859", "title": "ld: 4 duplicate symbols for architecture x86_64", "body": "<pre><code>g++  -o bin/Debug/Binomial obj/Debug/BinModel01.o obj/Debug/BinModel01.o obj/Debug/Main04.o obj/Debug/Main04.o \n                           ^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>You linked this object twice.</p>\n\n<p>So, yeah, you're going to get duplicate symbol errors.</p>\n"}, {"tags": [], "owner": {"reputation": 8369, "user_id": 785194, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/94c198ed8c016359381405b64a5b1aa8?s=128&d=identicon&r=PG", "display_name": "EML", "link": "https://stackoverflow.com/users/785194/eml"}, "is_accepted": false, "score": 3, "last_activity_date": 1452708138, "creation_date": 1452708138, "answer_id": 34773863, "question_id": 34773733, "link": "https://stackoverflow.com/questions/34773733/ld-4-duplicate-symbols-for-architecture-x86-64/34773863#34773863", "title": "ld: 4 duplicate symbols for architecture x86_64", "body": "<p>Here's your linker command:</p>\n\n<pre><code>g++  -o bin/Debug/Binomial \\\n  obj/Debug/BinModel01.o \\\n  obj/Debug/BinModel01.o \\\n  obj/Debug/Main04.o \\\n  obj/Debug/Main04.o \n</code></pre>\n\n<p>It's linking the files twice over, so you're getting duplicates. The error will be in your Makefile, or whatever you're using to build.</p>\n"}], "owner": {"reputation": 1, "user_id": 5785836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0176a422f60e36b6b81467c54b3f43?s=128&d=identicon&r=PG&f=1", "display_name": "SEP101", "link": "https://stackoverflow.com/users/5785836/sep101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1452708138, "creation_date": 1452707836, "last_edit_date": 1452708123, "question_id": 34773733, "link": "https://stackoverflow.com/questions/34773733/ld-4-duplicate-symbols-for-architecture-x86-64", "title": "ld: 4 duplicate symbols for architecture x86_64", "body": "<p>I am pretty new to C++ (knew some a long time ago), and am flicking through 'Numerical Methods in Finance with C++' and I can't get one of the examples to work. It is very near the beginning of the book so shouldn't be difficult, but I am doing exactly what they are doing and am getting an error. I have looked through similar questions to this but I don't think I am making the same mistake as the other people (as many of them as I could be bothered to read). I have defined my functions in the BinModel cpp file, and just stated that they exist in the .h file, so I don't know why I am getting a duplication error? The whole compiling/running thing is a bit of a mystery to me, so if anyone knows where to find a really basic introduction to that stuff then that would be great as well. I am currently using Code::Blocks on my mac, I gave up on Xcode. Here is my code:</p>\n\n<p>BinModel.01.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\ndouble RiskNeutProb(double U, double D, double R)\n{\nreturn (R-D)/(U-D);\n}\n\ndouble S(double S0, double U, double D, int n, int i)\n{\nreturn S0*pow(1+U,i)*pow(1+D,n-i);\n}\n\nint GetInputData(double&amp; S0, double&amp; U, double&amp; D, double&amp; R)\n{\n//entering data\ncout &lt;&lt; \"Enter S0: \"; cin &gt;&gt; S0;\ncout &lt;&lt; \"Enter U: \"; cin &gt;&gt; U;\ncout &lt;&lt; \"Enter D: \"; cin &gt;&gt; D;\ncout &lt;&lt; \"Enter R: \"; cin &gt;&gt; R;\ncout &lt;&lt; endl;\n\n//check range\nif (S0&lt;=0.0 || U&lt;=-1.0 || D&lt;=-1.0 || U&lt;=D || R&lt;=-1.0)\n{\n    cout &lt;&lt; \"Illegal data ranges\" &lt;&lt; endl;\n    cout &lt;&lt; \"terminating program\" &lt;&lt; endl;\n    return 1;\n}\n\n//check arbitrage\nif (R&gt;=U || R&lt;=D)\n{\n    cout &lt;&lt; \"Arbitrage exists\" &lt;&lt; endl;\n    cout &lt;&lt; \"Terminating program\" &lt;&lt; endl;\n    return 1;\n}\n\ncout &lt;&lt; \"Input data checked\" &lt;&lt; endl;\ncout &lt;&lt; \"There is no arbitrage\" &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>BinModel01.h</p>\n\n<pre><code>#ifndef BinModel01_h\n#define BinModel01_h\n\ndouble RiskNeutProb(double U, double D, double R);\n\ndouble S(double S0, double U, double D, int n, int i);\n\nint GetInputData(double&amp; S0, double&amp; U, double&amp; D, double&amp; R);\n\n#endif // BinModel01_h\n</code></pre>\n\n<p>And Main04.cpp</p>\n\n<pre><code>#include \"BinModel01.h\"\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nint main()\n{\ndouble S0,U,D,R;\n\nif (GetInputData(S0,U,D,R)==1) return 1;\n\n//compute risk neutral prob\ncout &lt;&lt; \"q= \" &lt;&lt; RiskNeutProb(U,D,R) &lt;&lt; endl;\n\n//stock price at node n=3,i=2\nint n=3; int i=2;\ncout &lt;&lt; \"n= \" &lt;&lt; n &lt;&lt; endl;\ncout &lt;&lt; \"i= \" &lt;&lt; i &lt;&lt; endl;\ncout &lt;&lt; \"S(n,i)= \" &lt;&lt; S(S0,U,D,n,i) &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>And the error:</p>\n\n<pre><code>g++  -o bin/Debug/Binomial obj/Debug/BinModel01.o obj/Debug/BinModel01.o obj/Debug/Main04.o obj/Debug/Main04.o   \nduplicate symbol __Z12RiskNeutProbddd in:\n    obj/Debug/BinModel01.o\nduplicate symbol __Z1Sdddii in:\n    obj/Debug/BinModel01.o\nduplicate symbol __Z12GetInputDataRdS_S_S_ in:\n    obj/Debug/BinModel01.o\nduplicate symbol _main in:\n    obj/Debug/Main04.o\nld: 4 duplicate symbols for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see  invocation)\n</code></pre>\n"}, {"tags": ["c++", "pointers", "char"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1452708016, "post_id": 34773731, "comment_id": 57292606, "body": "Research: pointer arithmetic"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "edited": false, "score": 0, "creation_date": 1452711882, "post_id": 34773731, "comment_id": 57295031, "body": "@ArmenTsirunyan abstraction. You have some one else write (so it isn&#39;t your code) a header with <code>#define man main</code> then you <code>#include</code>... rats. Another &#39;i&#39;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452727124, "post_id": 34773731, "comment_id": 57302806, "body": "<i>&quot;I dont want to use square brackets, I can use only curly(round) brackets.&quot;</i> y&#39;wot"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1452708468, "last_edit_date": 1452708468, "creation_date": 1452708119, "answer_id": 34773852, "question_id": 34773731, "link": "https://stackoverflow.com/questions/34773731/char-pointer-without-square-brackets/34773852#34773852", "title": "Char pointer without square brackets", "body": "<p>The only answer is: You can't.</p>\n\n<p>A string literal is actually a <em>read-only</em> array, you can't modify it. That's why you normal declare pointers to string literals as <code>const</code>:</p>\n\n<pre><code>const char *pointer = \"foo\";\n</code></pre>\n\n<p>You need to declare an array yourself and initialize it if you want to modify the contents:</p>\n\n<pre><code>char str[100] = \"foo\";\n</code></pre>\n\n<p>Or, since you are programming in C++, use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow\"><code>std::string</code></a>:</p>\n\n<pre><code>std::string str = \"foo\";\n</code></pre>\n\n<p>Using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow\"><code>std::string</code></a> you also don't have to worry about overflowing the array if you want to insert more characters.</p>\n"}], "owner": {"reputation": 1164, "user_id": 5785871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d79cffe6b09e1730e358357dd77b1e3f?s=128&d=identicon&r=PG&f=1", "display_name": "mslowiak", "link": "https://stackoverflow.com/users/5785871/mslowiak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "closed_date": 1452708239, "answer_count": 1, "score": -3, "last_activity_date": 1452708468, "creation_date": 1452707831, "last_edit_date": 1452708294, "question_id": 34773731, "link": "https://stackoverflow.com/questions/34773731/char-pointer-without-square-brackets", "closed_reason": "Needs details or clarity", "title": "Char pointer without square brackets", "body": "<p>I got problem with char pointer.\nI know that I can make something like this:</p>\n\n<pre><code>char *pointer=\"something\";\n</code></pre>\n\n<p>but how I can exchange the content of it?</p>\n\n<p>I dont want to use square brackets, I can use only curly(round) brackets.</p>\n"}, {"tags": ["java", "c++", "opencv"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1452707597, "post_id": 34773626, "comment_id": 57292358, "body": "Is <code>Vector</code> the same as <code>ArrayList</code>? Is <code>Math.PI</code> equal to <code>CV_PI</code> (radians or degrees?)"}, {"owner": {"reputation": 57, "user_id": 5737077, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2978c55143a3292146c0012684c06d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Chrome Lanta", "link": "https://stackoverflow.com/users/5737077/chrome-lanta"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1452708147, "post_id": 34773626, "comment_id": 57292666, "body": "according to a post from here <code>Math.Pi</code> can be used in place of <code>CV_PI</code>"}, {"owner": {"reputation": 57, "user_id": 5737077, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2978c55143a3292146c0012684c06d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Chrome Lanta", "link": "https://stackoverflow.com/users/5737077/chrome-lanta"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 2, "creation_date": 1452708225, "post_id": 34773626, "comment_id": 57292717, "body": "<a href=\"http://stackoverflow.com/questions/19651756/convert-vec4i-to-java-opencv\" title=\"convert vec4i to java opencv\">stackoverflow.com/questions/19651756/&hellip;</a> look at the answer"}, {"owner": {"reputation": 57, "user_id": 5737077, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2978c55143a3292146c0012684c06d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Chrome Lanta", "link": "https://stackoverflow.com/users/5737077/chrome-lanta"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1452708823, "post_id": 34773626, "comment_id": 57293039, "body": "infact I have sold it with the help of that thread"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1452719246, "post_id": 34773626, "comment_id": 57299237, "body": "Please either post the solution you found and accept your own answer, close as duplicate of another question that was useful, or delete this question."}, {"owner": {"reputation": 7521, "user_id": 902383, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/984003dbcbad7afeb2b110d351467dd1?s=128&d=identicon&r=PG", "display_name": "user902383", "link": "https://stackoverflow.com/users/902383/user902383"}, "edited": false, "score": 0, "creation_date": 1452763428, "post_id": 34773626, "comment_id": 57315495, "body": "if you have a look at api <code>HoughLines</code> methods in java uses Mat as second parameter not Vector , hence you dont need <code>Vec2f</code> class."}], "owner": {"reputation": 57, "user_id": 5737077, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2978c55143a3292146c0012684c06d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Chrome Lanta", "link": "https://stackoverflow.com/users/5737077/chrome-lanta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452707530, "creation_date": 1452707530, "question_id": 34773626, "link": "https://stackoverflow.com/questions/34773626/converting-opencv-c-code-to-java", "title": "Converting OpenCv C++ code to Java", "body": "<p>I am trying to detect lines in an Image using OpenCV houghLine algorithm but the issue is the only tutorial I found was in C++, I managed to convert some code to Java but some lines are just too confusing, below is the original code I am converting to Java </p>\n\n<pre><code>  Mat dst, cdst;\nCanny(src, dst, 50, 200, 3); \ncvtColor(dst, cdst, CV_GRAY2BGR); \n\nvector&lt;Vec2f&gt; lines;\n// detect lines\nHoughLines(dst, lines, 1, CV_PI/180, 150, 0, 0 );\n\n// draw lines\nfor( size_t i = 0; i &lt; lines.size(); i++ )\n{\n    float rho = lines[i][0], theta = lines[i][1];\n    Point pt1, pt2;\n    double a = cos(theta), b = sin(theta);\n    double x0 = a*rho, y0 = b*rho;\n    pt1.x = cvRound(x0 + 1000*(-b));\n    pt1.y = cvRound(y0 + 1000*(a));\n    pt2.x = cvRound(x0 - 1000*(-b));\n    pt2.y = cvRound(y0 - 1000*(a));\n    line( cdst, pt1, pt2, Scalar(0,0,255), 3, CV_AA);\n}\n</code></pre>\n\n<p>And this is what I have done so far</p>\n\n<pre><code>       Mat dst, cdst;\n    Imgproc.Canny(src, dst, 50, 200); \n  //  Imgproc.Canny(src, dst, 50, 200, 3); \n    Imgproc.cvtColor(dst, cdst, Imgproc.COLOR_GRAY2BGRA); \n\n    Vector&lt;Vec2f&gt; lines;\n    // detect lines\n    Imgproc.HoughLines(dst, lines, 1, Math.PI/180, 150, 0, 0 );\n\n    // draw lines\n    for( int i = 0; i &lt; lines.size(); i++ )\n    {\n        float rho = lines[i][0], theta = lines[i][1];\n        Point pt1, pt2;\n        double a = Math.cos(theta), b = Math.sin(theta);\n        double x0 = a*rho, y0 = b*rho;\n        pt1.x = Math.round(x0 + 1000*(-b));\n        pt1.y = Math.round(y0 + 1000*(a));\n        pt2.x = Math.round(x0 - 1000*(-b));\n        pt2.y = Math.round(y0 - 1000*(a));\n        Imgproc.line( cdst, pt1, pt2, new Scalar(0,0,255), 3, Core.LINE_AA);\n        //Imgproc.line( cdst, pt1, pt2, new Scalar(0,0,255), 3, Core.LINE_AA);\n    }\n</code></pre>\n\n<p>My issues start at line 3 <code>Imgproc.Canny(src, dst, 50, 200, 3)</code>, Java version of Canny I found with 5 parameters had a <code>boolean</code> as its 5th parameter, <code>Vector&lt;Vec2f&gt; lines</code> I could not locate the <code>Vec2f</code> class in Java Version and <code>Imgproc.line( cdst, pt1, pt2, new Scalar(0,0,255), 3, Core.LINE_AA)</code>, there is not method in <code>Imgproc</code> of a line that has <code>6</code> parameters, the closest I found was 5 and 7 </p>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1452707935, "post_id": 34773592, "comment_id": 57292557, "body": "Some manipulators are only for the next output, some stays put for all output. <code>std::setfill</code> will set the fill character for <i>all</i> following output.&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": false, "score": 4, "last_activity_date": 1452708261, "last_edit_date": 1452708261, "creation_date": 1452707899, "answer_id": 34773766, "question_id": 34773592, "link": "https://stackoverflow.com/questions/34773592/c-iomanip-lib-setfill-and-setw-issues/34773766#34773766", "title": "C++ Iomanip lib setfill and setw issues", "body": "<p>Many of the <code>iomanip</code> objects are \"sticky\", that is, they stick to the stream and affect subsequent lines.</p>\n\n<p>When you have this:</p>\n\n<pre><code>cout &lt;&lt; setw (12) &lt;&lt; left &lt;&lt; \"Seattle:\";\ncout &lt;&lt; setw (4) &lt;&lt; setfill('0') &lt;&lt; seattle &lt;&lt; endl;\n</code></pre>\n\n<p>that is going to leave the <code>setfill</code> active for the next line. So you might instead prefer</p>\n\n<pre><code>cout &lt;&lt; setw (12) &lt;&lt; setfill(' ') &lt;&lt; left &lt;&lt; \"Seattle:\";\ncout &lt;&lt; setw (4) &lt;&lt; setfill('0') &lt;&lt; seattle &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 4, "last_activity_date": 1452707937, "creation_date": 1452707937, "answer_id": 34773777, "question_id": 34773592, "link": "https://stackoverflow.com/questions/34773592/c-iomanip-lib-setfill-and-setw-issues/34773777#34773777", "title": "C++ Iomanip lib setfill and setw issues", "body": "<p>The fill character is \"sticky\", so it remains in effect until you change it.</p>\n\n<p>In your case, you want <code>0</code> as the fill for the numeric fields, but space as the fill for the character fields, so you'll have to set that explicitly, something like this:</p>\n\n<pre><code>cout &lt;&lt; setfill(' ') &lt;&lt; setw (12) &lt;&lt; left &lt;&lt; \"Seattle:\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 253, "user_id": 4328606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iMp3bhVgDjs/AAAAAAAAAAI/AAAAAAAAAKI/wDu0G_Yac1g/photo.jpg?sz=128", "display_name": "DennisS", "link": "https://stackoverflow.com/users/4328606/denniss"}, "is_accepted": true, "score": 2, "last_activity_date": 1452712896, "creation_date": 1452712896, "answer_id": 34775279, "question_id": 34773592, "link": "https://stackoverflow.com/questions/34773592/c-iomanip-lib-setfill-and-setw-issues/34775279#34775279", "title": "C++ Iomanip lib setfill and setw issues", "body": "<p>As mentioned in other comments many of I/O manipulators are \"sticky\".\nI personally prefer to solve this kind of problem using <a href=\"https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow\">RAII</a>:</p>\n\n<pre><code>class stream_format_raii {\npublic:\n   stream_format_raii(std::ostream &amp;stream)\n      : stream_(stream)\n      , state_(NULL) {\n      state_.copyfmt(stream_);\n   }\n\n   ~stream_format_raii() {\n      stream_.copyfmt(state_);\n   }\npublic:\n   std::ostream &amp;stream_;\n   std::ios  state_;\n};\n</code></pre>\n\n<p>That this class does is backing up your current stream's format upon constructing and setting it back upon destructing. </p>\n\n<p>You can use it this way:</p>\n\n<pre><code>void printCity(std::ostream &amp;os, const std::string name, int time) {\n   stream_format_raii back(os);\n   os &lt;&lt; std::setw(12) &lt;&lt; std::left &lt;&lt; (name + \":\");\n   os &lt;&lt; std::setw(4) &lt;&lt; std::setfill('0') &lt;&lt; time;\n}\n\n\nint main() {\n   // Same as before\n   printCity(std::cout, \"Honolulu\", honolulu);\n   // Same as before\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 3367992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yHqfX.png?s=128&g=1", "display_name": "Debdut", "link": "https://stackoverflow.com/users/3367992/debdut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 34775279, "answer_count": 3, "score": 3, "last_activity_date": 1471392635, "creation_date": 1452707430, "last_edit_date": 1471392635, "question_id": 34773592, "link": "https://stackoverflow.com/questions/34773592/c-iomanip-lib-setfill-and-setw-issues", "title": "C++ Iomanip lib setfill and setw issues", "body": "<p>My Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint main () {\n    int time;\n    int honolulu, seattle, london, moscow, hongkong, auckland;\n\n    cout &lt;&lt; \"What is the current time in Philadelphia? \";\n    cin &gt;&gt; time;\n\n    honolulu = (time+2400-600)%2400;\n    seattle = (time+2400-300)%2400;\n    london = (time+2400+500)%2400;\n    moscow = (time+2400+800)%2400;\n    hongkong = (time+2400+1200)%2400;\n    auckland = (time+2400+1700)%2400;\n\n    cout &lt;&lt; endl &lt;&lt; \"Current times in other cities: \" &lt;&lt; endl;\n    cout &lt;&lt; setw (12) &lt;&lt; left &lt;&lt; \"Honolulu:\";\n    cout &lt;&lt; setw (4) &lt;&lt; setfill('0') &lt;&lt; honolulu &lt;&lt; endl;\n    cout &lt;&lt; setw (12) &lt;&lt; left &lt;&lt; \"Seattle:\";\n    cout &lt;&lt; setw (4) &lt;&lt; setfill('0') &lt;&lt; seattle &lt;&lt; endl;\n    cout &lt;&lt; setw (12) &lt;&lt; left &lt;&lt; \"London:\";\n    cout &lt;&lt; setw (4) &lt;&lt; setfill('0') &lt;&lt; london &lt;&lt; endl;\n    cout &lt;&lt; setw (12) &lt;&lt; left &lt;&lt; \"Moscow:\";\n    cout &lt;&lt; setw (4) &lt;&lt; setfill('0') &lt;&lt; moscow &lt;&lt; endl;\n    cout &lt;&lt; setw (12) &lt;&lt; left &lt;&lt; \"Hong Kong:\";\n    cout &lt;&lt; setw (4) &lt;&lt; setfill('0') &lt;&lt; hongkong &lt;&lt; endl;\n    cout &lt;&lt; setw (12) &lt;&lt; left &lt;&lt; \"Auckland:\";\n    cout &lt;&lt; setw (4) &lt;&lt; setfill('0') &lt;&lt; auckland &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Required Output :</p>\n\n<pre><code>What is the current time in Philadelphia? 0415    \n\nCurrent times in other cities: \nHonolulu:   2215\nSeattle:    1150\nLondon:     9150\nMoscow:     1215\nHong Kong:  1615\nAuckland:   2115\n</code></pre>\n\n<p>My output : </p>\n\n<pre><code>What is the current time in Philadelphia? 0415    \n\nCurrent times in other cities: \nHonolulu:   2215\nSeattle:00001150\nLondon:000009150\nMoscow:000001215\nHong Kong:001615\nAuckland:0002115\n</code></pre>\n\n<p>What am I doing wrong? The first line of output, <code>Honolulu:   2215</code>, is correct. But the next lines have leading zeroes. I do not understand why this is happening? Is there a problem with my code or am I misunderstanding how the functions <code>setfill</code> and <code>setw</code> work?</p>\n"}, {"tags": ["c++", "multithreading", "optimization"], "comments": [{"owner": {"reputation": 153, "user_id": 5784692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc409f228a2dd40921afd7bc93d87bd1?s=128&d=identicon&r=PG&f=1", "display_name": "John Watson", "link": "https://stackoverflow.com/users/5784692/john-watson"}, "edited": false, "score": 0, "creation_date": 1452710316, "post_id": 34773587, "comment_id": 57294027, "body": "instead of having an array entry for each thread, have you thought about using <a href=\"http://en.cppreference.com/w/cpp/keyword/thread_local\" rel=\"nofollow noreferrer\">thread local</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5767740, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206329008121918/picture?type=large", "display_name": "Marek Basovn&#237;k", "link": "https://stackoverflow.com/users/5767740/marek-basovn%c3%adk"}, "edited": false, "score": 0, "creation_date": 1452733748, "post_id": 34774672, "comment_id": 57305002, "body": "Actually, I can&#39;t. I can use OMP reduction just for some type variables as floats, integers, ... but not for arrays :/"}], "tags": [], "owner": {"reputation": 153, "user_id": 5784692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc409f228a2dd40921afd7bc93d87bd1?s=128&d=identicon&r=PG&f=1", "display_name": "John Watson", "link": "https://stackoverflow.com/users/5784692/john-watson"}, "is_accepted": false, "score": 0, "last_activity_date": 1452710764, "creation_date": 1452710764, "answer_id": 34774672, "question_id": 34773587, "link": "https://stackoverflow.com/questions/34773587/example-of-c-code-optimization-for-parallel-computing/34774672#34774672", "title": "Example of C++ code optimization for parallel computing", "body": "<p>You can use <a href=\"https://computing.llnl.gov/tutorials/openMP/#REDUCTION\" rel=\"nofollow\">OMP reduction</a> for your for loop:</p>\n\n<pre><code>int result = 0;\n\n#pragma omp for nowait reduction(+:result) \nfor ( k = np ; --k ; ) {\n\n    num = omp_get_thread_num();\n\n    p = (int) x[k];\n    u[k] += a[p] + a_lin[p] * (x[k] - p);\n    x[k] += u[k];\n\n    if (x[k]&lt;0 ) {x[k]+=nc;} else\n    if (x[k]&gt;nc) {x[k]-=nc;};\n\n    p = (int) x[k];\n    result += weight[k] + weight[k] * (x[k] - p);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5767740, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206329008121918/picture?type=large", "display_name": "Marek Basovn&#237;k", "link": "https://stackoverflow.com/users/5767740/marek-basovn%c3%adk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1116, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452742410, "creation_date": 1452707424, "last_edit_date": 1452742410, "question_id": 34773587, "link": "https://stackoverflow.com/questions/34773587/example-of-c-code-optimization-for-parallel-computing", "title": "Example of C++ code optimization for parallel computing", "body": "<p>I'm trying to understand optimization routines. I'm focusing on the most critical part of my code (the code has some cycles of length \"nc\" and one cycle of length \"np\", where number \"np\" is much larger then \"nc\"). I present part of the code in here. The rest of code is not very essential in % of computational time so i prefer code purify in the rest of the algorithm. However, the critical cycle with \"np\" length is a pretty simple piece of code and it can be parallelized. So it will not hurt if i rewrite this part into some more effective and less clear version (maybe into SSE instructions). I'm using a gcc compiler, c++ code, and OpenMP parallelization.</p>\n\n<p>This code is part of the well known <a href=\"https://en.wikipedia.org/wiki/Particle-in-cell\" rel=\"nofollow\">particle-in-cell</a> algorithm (and this one is also basic one). I'm trying to learn code optimization on this version (so my goal is not to have effective PIC algorithm only, because it is already written in thousand variants, but i want to bring some demonstrative example for code optimization also). I'm trying to do some work but i am not very sure if i solved all optimization properties correctly.</p>\n\n<pre><code>const int NT = ...; // number of threads (in two versions: about 6 or about 30)\nconst int np = 10000000; // np is about 1000-10000 times larger than nc commonly\nconst int nc = 10000;\nconst int step = 1000;\n\nfloat u[np], x[np];\nfloat a[nc], a_lin[nc], rho_full[NT][nc], rho_diff[NT][nc] , weight[nc];\n\nint p,num;\n\nfor ( i = 0 ; i&lt;step ;  i++) {\n\n// *** \n// *** some not very time consuming code for calculation \n// *** a, a_lin from values of rho_full and rho_diff\n\n#pragma omp for private(p,num)\nfor ( k = np ; --k ; ) {\n\n    num = omp_get_thread_num();\n\n    p = (int) x[k];\n    u[k] += a[p] + a_lin[p] * (x[k] - p);\n    x[k] += u[k];\n\n    if (x[k]&lt;0 ) {x[k]+=nc;} else\n    if (x[k]&gt;nc) {x[k]-=nc;};\n\n    p = (int) x[k];\n    rho_full[num][p] += weight[k];\n    rho_diff[num][p] += weight[k] * (x[k] - p);\n\n    }\n};\n</code></pre>\n\n<p>I realize this has problems:</p>\n\n<p><strong>1)</strong> (main question) I use set of arrays <code>rho_full[num][p]</code> where <code>num</code> is index for each thread. After computation i just summarize this arrays (<code>rho_full[0][p] + rho_full[1][p] + rho_full[2][p] ...</code>). The reason is avoidance of writing into same part of array with two different threads. I am not very sure if this way is an effective solution (note that number \"nc\" is relatively small, so number of operations with \"np\" is still probably most essential)</p>\n\n<p><strong>2)</strong> (also important question) I need to read <code>x[k]</code> many times and it's also changed many times. Maybe its better to read this value into some register and then forget whole x array or fix some pointer in here. After all calculation i can call <code>x[k]</code> array again and store obtained value. I believe that compiler do this work for me but i am not very sure because i used modification of <code>x[k]</code> in the center of algorithm. So the compiler probably do some effective work on their own but maybe in this version it call more times then nessesary becouse more then ones I swich calling and storing this value.</p>\n\n<p><strong>3)</strong> (probably not relevant) The code works with integer part and remainder below decimal point part. It needs both of this values. I identify integer part as <code>p = (int) x</code> and remainder as <code>x - p</code>. I calculate this routine at the begin and also in the end of cycle interior. One can see that this spliting can be stored somewhere and used at next step (i mean step at <code>i</code> index). Do you thing that following version is better? I store integral and remainder part at arrays of x instead of whole value x.</p>\n\n<pre><code>int x_int[np];\nfloat x_rem[np];\n//...\n\nfor ( k = np ; --k ; ) {\n\n    num = omp_get_thread_num();\n\n    u[k] += a[x_int[k]] + a_lin[x_int[k]] * x_rem[k];\n    x_rem[k] += u[k];\n\n    p = (int) x_rem[k];   // *** This part is added into code for simplify the rest.\n    x_int[k] += p;        // *** And maybe there is a better way how to realize\n    x_rem[k] -= p;        // *** this \"pushing correction\".\n\n    if (x_int[k]&lt;0 ) {x_int[k]+=nc;} else\n    if (x_int[k]&gt;nc) {x_int[k]-=nc;};\n\n    rho_full[num][x_int[k]] += weight[k];\n    rho_diff[num][x_int[k]] += weight[k] * x_rem[k];\n\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "class", "vector"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 3, "creation_date": 1452707156, "post_id": 34773468, "comment_id": 57292072, "body": "Read a good <a href=\"http://stroustrup.com/programming.html\" rel=\"nofollow noreferrer\">programming using C++</a> book about <code>template</code>-s. But teaching that to you would be too long for an answer. So your question is too broad..."}, {"owner": {"reputation": 115, "user_id": 5424752, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s1acZ.png?s=128&g=1", "display_name": "Zac G", "link": "https://stackoverflow.com/users/5424752/zac-g"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1452707160, "post_id": 34773468, "comment_id": 57292074, "body": "No, my problem is that I need to make a <code>Grid</code> of any type"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1452707184, "post_id": 34773468, "comment_id": 57292099, "body": "Make Grid a template"}, {"owner": {"reputation": 300, "user_id": 5607065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee63964a7ed9cd95ec784ffef561274?s=128&d=identicon&r=PG&f=1", "display_name": "CodeCody", "link": "https://stackoverflow.com/users/5607065/codecody"}, "edited": false, "score": 1, "creation_date": 1452707244, "post_id": 34773468, "comment_id": 57292142, "body": "on top of your class definition put &quot;template&lt;typename T&gt;&quot;. You will also have to put this over any methods defined outside of the class body. <a href=\"http://www.cprogramming.com/tutorial/templates.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/templates.html</a>"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 2, "creation_date": 1452707268, "post_id": 34773468, "comment_id": 57292154, "body": "<a href=\"https://isocpp.org/wiki/faq/templates\" rel=\"nofollow noreferrer\">Templates</a>. What else?"}], "answers": [{"tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": false, "score": 6, "last_activity_date": 1452708183, "last_edit_date": 1452708183, "creation_date": 1452707203, "answer_id": 34773535, "question_id": 34773468, "link": "https://stackoverflow.com/questions/34773468/how-to-specify-a-type-parameter-using-to-create-a-template-class/34773535#34773535", "title": "How to specify a type parameter using &lt;&gt; to create a template class", "body": "<p>It seems like you just want to template your <code>Grid</code> class:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Grid {\n  public:\n    vector&lt;vector&lt;T&gt; &gt; grid;\n\n    // initialize the vector with the correct dimensions:\n    Grid (int width, int height)\n        : grid(width, vector&lt;double&gt;(height)) {}\n};\n</code></pre>\n\n<p>and then instantiate:</p>\n\n<pre><code>Grid&lt;double&gt; g(x, y);\n</code></pre>\n\n<p>This will create a <code>Grid</code> object where <code>T</code> is <code>double</code></p>\n"}], "owner": {"reputation": 115, "user_id": 5424752, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s1acZ.png?s=128&g=1", "display_name": "Zac G", "link": "https://stackoverflow.com/users/5424752/zac-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1464716275, "answer_count": 1, "score": -5, "last_activity_date": 1452708186, "creation_date": 1452707015, "last_edit_date": 1452708186, "question_id": 34773468, "link": "https://stackoverflow.com/questions/34773468/how-to-specify-a-type-parameter-using-to-create-a-template-class", "closed_reason": "Needs details or clarity", "title": "How to specify a type parameter using &lt;&gt; to create a template class", "body": "<p>I have this code:</p>\n\n<pre><code>class Grid {\npublic:\n    vector&lt;vector&lt;int&gt; &gt; grid;\n    int width;\n    int height;\n\n    Grid (int width, int height) width(width), height(height) {\n        ...\n    }\n};\n</code></pre>\n\n<p>It makes a class called <code>Grid</code> which is a 2D array of integers. The problem is, however, that at the moment it can <em>only</em> be integers, but I want it so it's kind of like the <code>std::vector</code> class in which you can use <code>&lt;&gt;</code> parentheses to choose the type that it will store. My question is, how can I use these in <strong><em>my</em></strong> class in order to replace all the current <code>int</code>s with any other class.</p>\n\n<p>Also, you might say to look it up but I tried and I could't find anything, probably because I didn't know what to search so if anyone could give me an idea on what this is even called then that'd be helpful too.</p>\n"}, {"tags": ["c++", "qt", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 4900256, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ca2eb3e8c80f260b2e2fa27ddf0e8203?s=128&d=identicon&r=PG&f=1", "display_name": "Mason Watmough", "link": "https://stackoverflow.com/users/4900256/mason-watmough"}, "edited": false, "score": 0, "creation_date": 1452707416, "post_id": 34773545, "comment_id": 57292233, "body": "As a side note, I would also recommend researching about getting different threads to run on different CPU cores, just to help speed things up."}], "tags": [], "owner": {"reputation": 447, "user_id": 4900256, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ca2eb3e8c80f260b2e2fa27ddf0e8203?s=128&d=identicon&r=PG&f=1", "display_name": "Mason Watmough", "link": "https://stackoverflow.com/users/4900256/mason-watmough"}, "is_accepted": true, "score": 2, "last_activity_date": 1452707264, "creation_date": 1452707264, "answer_id": 34773545, "question_id": 34773202, "link": "https://stackoverflow.com/questions/34773202/how-to-show-images-from-an-ip-camera-as-a-live-video-while-also-doing-some-audio/34773545#34773545", "title": "How to show images from an ip camera as a live video while also doing some audio processing in Qt?", "body": "<p>This sounds like a problem that could easily be solved with the <a href=\"http://www.cplusplus.com/reference/thread/\" rel=\"nofollow\">C++ standard thread</a> library. Try running the audio processing and OpenCV stuff in different concurrently-executing threads.</p>\n"}, {"tags": [], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "is_accepted": false, "score": 1, "last_activity_date": 1452716739, "creation_date": 1452716739, "answer_id": 34776372, "question_id": 34773202, "link": "https://stackoverflow.com/questions/34773202/how-to-show-images-from-an-ip-camera-as-a-live-video-while-also-doing-some-audio/34776372#34776372", "title": "How to show images from an ip camera as a live video while also doing some audio processing in Qt?", "body": "<p>Whilst I agree with Mason Watmough's sentiment, you are using Qt and QThread abstracts a lot of the nasty stuff away and allows you to continue using signals and slots across the threads.</p>\n\n<p>There is a good example on the <a href=\"http://doc.qt.io/qt-4.8/qthread.html\" rel=\"nofollow\">QThread class</a> page which i've added at the bottom of this post (to keep the top cleaner)</p>\n\n<p>The layout of your program will then look something like this:</p>\n\n<pre><code>- ControllerClass\n- VideoController\n- VideoWorker\n- AudioController\n- AudioWorker\n</code></pre>\n\n<p>You can then use your <code>ControllerClass</code> to spawn off the threads, connect up to signals and slots, then use the outputs from the two concurrently running threads to do whatever behaviour you want. </p>\n\n<p>You would do this in a way similar to this:</p>\n\n<pre><code>myThread = new VideoController();\nconnect(myThread, SIGNAL(depthValues(float, float, float)), this, SLOT(on_depth_values(float, float, float)));\n</code></pre>\n\n<hr>\n\n<p>QThread Example:</p>\n\n<pre><code>    class Worker : public QObject\n{\n    Q_OBJECT\n    QThread workerThread;\n\npublic slots:\n    void doWork(const QString &amp;parameter) {\n        // ...\n        emit resultReady(result);\n    }\n\nsignals:\n    void resultReady(const QString &amp;result);\n};\n\nclass Controller : public QObject\n{\n    Q_OBJECT\n    QThread workerThread;\npublic:\n    Controller() {\n        Worker *worker = new Worker;\n        worker-&gt;moveToThread(&amp;workerThread);\n        connect(&amp;workerThread, SIGNAL(finished()), worker, SLOT(deleteLater()));\n        connect(this, SIGNAL(operate(QString)), worker, SLOT(doWork(QString)));\n        connect(worker, SIGNAL(resultReady(QString)), this, SLOT(handleResults(QString)));\n        workerThread.start();\n    }\n    ~Controller() {\n        workerThread.quit();\n        workerThread.wait();\n    }\npublic slots:\n    void handleResults(const QString &amp;);\nsignals:\n    void operate(const QString &amp;);\n};\n</code></pre>\n"}], "owner": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 34773545, "answer_count": 2, "score": 1, "last_activity_date": 1452716739, "creation_date": 1452706153, "last_edit_date": 1452706945, "question_id": 34773202, "link": "https://stackoverflow.com/questions/34773202/how-to-show-images-from-an-ip-camera-as-a-live-video-while-also-doing-some-audio", "title": "How to show images from an ip camera as a live video while also doing some audio processing in Qt?", "body": "<p>In this application, I am using two audio devices, each of which can be used both as input and output devices. One audio device is used as an input and the other audio device uses the fed input sound as an output and same happens the other way around. While this audio processing goes on, I also try to show the image from an ip camera and update it to produce a live video. </p>\n\n<p>A screenshot of the application:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ruxDm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ruxDm.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, I can show the image, but not while doing any sort of audio processing. The problem is that whenever I try to do audio processing and show the video simultaneously, I run into problems as the program stops working altogether.</p>\n\n<p>The slots I have are these:</p>\n\n<pre><code>private slots:\n    void on_startVideo_clicked();\n\n    void on_stopVideo_clicked();\n\n    void on_startInput1_clicked();\n\n    void on_stopInput1_clicked();\n\n    void on_startInput2_clicked();\n\n    void on_stopInput2_clicked();\n\n    void readMoreInput1();\n\n    void readMoreInput2();\n</code></pre>\n\n<p>Here all the slots, except <code>on_startVideo_clicked()</code> and <code>on_stopVideo_clicked()</code>, are relevant for audio processing and they work fine until I invoke the slots relevant for the video.</p>\n\n<p>The slot for showing the video:</p>\n\n<pre><code>void MainWindow::on_startVideo_clicked()\n{\n    const std::string streamUrl = \"http://operator:operator@axis-p5515/axis-cgi/mjpg/video.cgi?resolution=1920x1080&amp;compression=0&amp;dummy=param.mjpg\";\n    if (!capture.open(streamUrl))\n    {\n        QMessageBox::warning(this, \"Error\", \"No input device availabe!\");\n    }\n    else\n    {\n        videoState = true;\n        ui-&gt;stopVideo-&gt;setEnabled(true);\n        ui-&gt;startVideo-&gt;setEnabled(false);\n        while(videoState){\n            cv::Mat frame;\n            capture &gt;&gt; frame;\n            cv::cvtColor(frame, frame, CV_BGR2RGBA);\n            cv::resize(frame, frame, cv::Size(ui-&gt;liveVideo-&gt;width(), ui-&gt;liveVideo-&gt;height()), 0, 0);\n            QImage image(frame.data, frame.cols, frame.rows, frame.step, QImage::Format_RGBA8888);\n            ui-&gt;liveVideo-&gt;setPixmap(QPixmap::fromImage(image));\n            QPixmap coloredImage(QPixmap::fromImage(image));\n            QPainter painter(&amp;coloredImage);\n            painter.setOpacity(0.5);\n            painter.setBrush(Qt::red);\n            painter.drawRect(coloredImage.rect());\n            ui-&gt;overlayVideo-&gt;setPixmap(coloredImage);\n            qApp-&gt;processEvents(QEventLoop::AllEvents);\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see, I am using <code>OpenCV</code> for capturing the image and showing it. Obviously, I'm doing something wrong. Could you please point out where I'm doing wrong?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "vector", "multidimensional-array", "codeblocks", "2d-vector"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452706281, "post_id": 34773098, "comment_id": 57291516, "body": "Maybe you should show a picture of this + a small self contained code example that fills the arrays and your expected values. Otherwise we have to guess."}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452707398, "post_id": 34773098, "comment_id": 57292226, "body": "why the downvote? is it not a legit question? The picture contains the info needed. It is clear that the vector is indeed 12 elements long, but it is being displayed differently to how I would expect to read it. So the question is why?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1452707764, "post_id": 34773098, "comment_id": 57292450, "body": "The debugger is probably just not smart enough. It just sees a pointer to the vector&#39;s data, but doesn&#39;t know enough to realize the relationship between that data and the size member."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1452708077, "post_id": 34773098, "comment_id": 57292637, "body": "I take it back. It seems to be alternating between showing length and capacity of the sub-vectors as individual elements, that&#39;s complete nonsense."}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1452708238, "post_id": 34773098, "comment_id": 57292729, "body": "That could make sense. But I&#39;d of thought the latest GDB would be fairly smart. I don&#39;t however know much about the ins and outs of debuggers yet. Or could it be how codeblocks is interpreting the debuggers data?"}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1452708320, "post_id": 34773098, "comment_id": 57292778, "body": "Yeah, it&#39;s alternating, and then occasionally showing an element in the wrong place"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1452708533, "post_id": 34773098, "comment_id": 57292882, "body": "Well, I don&#39;t use CodeBlocks or GDB, so cannot attest to the quality of either one."}, {"owner": {"reputation": 1698, "user_id": 230194, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dIpZe.jpg?s=128&g=1", "display_name": "zackery.fix", "link": "https://stackoverflow.com/users/230194/zackery-fix"}, "edited": false, "score": 0, "creation_date": 1452759811, "post_id": 34773098, "comment_id": 57313314, "body": "The pointers used to hold your vector arrays are not terminated, so Codeblocks will continue to show data (non-existing vectors) until it discovers a termination point (null).  Codeblocks is a GREAT C++ IDE, but it only works with the code its given.   Are you storing pointers to vectors?"}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1452769694, "post_id": 34773098, "comment_id": 57319485, "body": "Nope, this vector was declared, initialised and filled in the same function I was in when I print screened this watches window, nothing else has happened to this vector. And to reiterate, when I cycle through the vectors within the vector and print all the data, showing the indexes aswell as the data, it&#39;s all in the right place"}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "reply_to_user": {"reputation": 1698, "user_id": 230194, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dIpZe.jpg?s=128&g=1", "display_name": "zackery.fix", "link": "https://stackoverflow.com/users/230194/zackery-fix"}, "edited": false, "score": 0, "creation_date": 1452770503, "post_id": 34773098, "comment_id": 57319985, "body": "@zackery.fix Sorry, I almost forgot, I am not using pointers"}, {"owner": {"reputation": 1698, "user_id": 230194, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dIpZe.jpg?s=128&g=1", "display_name": "zackery.fix", "link": "https://stackoverflow.com/users/230194/zackery-fix"}, "edited": false, "score": 0, "creation_date": 1452773598, "post_id": 34773098, "comment_id": 57321880, "body": "@IronAttorney Could you create a Gist on GitHub that exposes the code you are using that gives you these results?  Also, make sure Codeblocks has a watch definition for vector.  You should see <code>Registered new type: STL Vector</code> in the Debugger output window."}, {"owner": {"reputation": 1698, "user_id": 230194, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dIpZe.jpg?s=128&g=1", "display_name": "zackery.fix", "link": "https://stackoverflow.com/users/230194/zackery-fix"}, "edited": false, "score": 0, "creation_date": 1452773972, "post_id": 34773098, "comment_id": 57322112, "body": "@IronAttorney  And try this with only 10 items per vector."}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "reply_to_user": {"reputation": 1698, "user_id": 230194, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dIpZe.jpg?s=128&g=1", "display_name": "zackery.fix", "link": "https://stackoverflow.com/users/230194/zackery-fix"}, "edited": false, "score": 0, "creation_date": 1452777166, "post_id": 34773098, "comment_id": 57324163, "body": "@zackery.fix I&#39;m not familiar enough with Github yet, but I will give that a go later. It is worth mentioning that I have noticed some of this behaviour with my multi dimensional vectors before. 1D vectors show up fine. The debugger is registering the new type: STL Vector"}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1452777269, "post_id": 34773098, "comment_id": 57324237, "body": "Encase it&#39;s important: Debugger name and version: GNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.2) 7.7.1"}, {"owner": {"reputation": 1698, "user_id": 230194, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dIpZe.jpg?s=128&g=1", "display_name": "zackery.fix", "link": "https://stackoverflow.com/users/230194/zackery-fix"}, "edited": false, "score": 1, "creation_date": 1452777842, "post_id": 34773098, "comment_id": 57324616, "body": "I implemented the same instantiation that you describe, and I get expected watches.  Each vector is nested exactly as I would imagine the data to look.  Maybe something this is a wxWindows bug on Ubuntu, I can&#39;t imagine the sources for Codeblocks doing anything different for this part of the IDE for a different platform. Ill check it out, but I suggest going to the Codeblocks forum and seeing if this is a known issue, or expected behaviour."}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1452778631, "post_id": 34773098, "comment_id": 57325114, "body": "Ok cool, good idea! Thanks for the time testing this for me."}], "owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452706994, "creation_date": 1452705817, "last_edit_date": 1452706994, "question_id": 34773098, "link": "https://stackoverflow.com/questions/34773098/why-do-2d-vectors-look-weird-when-im-watching-them-in-debug-mode", "title": "Why do 2d vectors look weird when I&#39;m watching them in debug mode?", "body": "<p>I've been scratching my head for ages trying to work out why my 2d vectors look like they're storing things in the wrong order, and have twice as many entries as they should. I'm watching them in debug mode using the \"watches\" window in codeblocks.</p>\n\n<p>When I just outputted all the data to the terminal, it is infact in the correct order.</p>\n\n<p>Why's it showing up so wrong in the watches window? Is it something to do with how it's actually stored?</p>\n\n<p>EDIT:</p>\n\n<p>here is an image of my Watches window showing the 2d vector. It is mostly empty, but I've just noticed that it says length = 12, capacity = 12 at the top. So it clearly knows it's not actually that long. The way the vectors constructed, ints between 0 and 999 should be in element 0, ints between 1000 and 1999 in element 1, ints between 2000 and 2999 in element 2, and so on until ints between 11000 to 11999 in element 11. So that int 6019 should definately not be in element 1! And isn't if I cout to terminal.</p>\n\n<p><a href=\"https://i.stack.imgur.com/E3Xe0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E3Xe0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "sockets", "boost", "tcp"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452732891, "post_id": 34772823, "comment_id": 57304728, "body": "I don&#39;t understand why all deque implementations seem unable to cope with ... double ended queues. I&#39;ll probably bounty this question to see if some can come up with an explanation."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452728057, "post_id": 34778818, "comment_id": 57303146, "body": "I&#39;ve located the culprit and found a trivial drop-in replacement that removes the problem. Still looking <a href=\"http://livecoding.tv/sehe\" rel=\"nofollow noreferrer\">livecoding.tv/sehe</a>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452729962, "post_id": 34778818, "comment_id": 57303859, "body": "Sidenote: Never mind the ever-growing queue depth is an observer effect (running under massif memory profiler slows it down enough to build up undelivered messages)."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452731764, "post_id": 34778818, "comment_id": 57304383, "body": "Running things through <a href=\"http://milianw.de/blog/heaptrack-a-heap-memory-profiler-for-linux\" rel=\"nofollow noreferrer\">milianw.de/blog/heaptrack-a-heap-memory-profiler-for-linux</a> now"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452732742, "post_id": 34778818, "comment_id": 57304678, "body": "Summarizing: deque seems to be a bad fit (std::deque in both libc++ and libstdc++ as well as Boost Container&#39;s <code>deque&lt;&gt;</code>). Using <code>shrink_to_fit</code> doesn&#39;t really seem to change anything. Using <code>boost::circular_buffer</code> knocks the socks off anything else - gcc a little more accurately than clang it seems. Sidenote: profiling still tricky without influencing the process being profiled."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1452732771, "post_id": 34778818, "comment_id": 57304684, "body": "Recorded livestream of my efforts  in case you want to peek over my shoulder: <a href=\"https://www.livecoding.tv/video/why-is-asios-chat-sample-leaking-memory/\" rel=\"nofollow noreferrer\">livecoding.tv/video/why-is-asios-chat-sample-leaking-memory</a> (starts around ~27:00 mark)"}, {"owner": {"reputation": 23, "user_id": 4504659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f79233de199516d7a247516d29137b?s=128&d=identicon&r=PG&f=1", "display_name": "hungrh", "link": "https://stackoverflow.com/users/4504659/hungrh"}, "edited": false, "score": 0, "creation_date": 1452778404, "post_id": 34778818, "comment_id": 57324984, "body": "sehe: Thank you for your help and your time. I will follow your suggestion and do it with boost::circular_buffer."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 4, "last_activity_date": 1452729742, "last_edit_date": 1452729742, "creation_date": 1452726658, "answer_id": 34778818, "question_id": 34772823, "link": "https://stackoverflow.com/questions/34772823/boost-1-55-asio-tcp-cpp03-chat-server-example-memory-leaks/34778818#34778818", "title": "boost 1.55 asio tcp cpp03 chat_server example memory leaks", "body": "<p>The server retains chat history, but only the 100 most recent messages in a \"ringbuffer\" (actually a <code>deque&lt;chat_message&gt;</code>).</p>\n\n<p>Indeed testing with a large number of clients doing a lot of chatting:</p>\n\n<pre><code>(for c in {00..99}; do for a in {001..999}; do sleep .1; echo \"Client $c message $a\"; done | ./chat_client localhost 6767&amp; done)\n</code></pre>\n\n<p>Shows a memory increase:</p>\n\n<p><a href=\"https://i.stack.imgur.com/G76Ta.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G76Ta.png\" alt=\"enter image description here\"></a></p>\n\n<p>The breakdown indicates it's due to allocations from <code>deliver</code> for <code>_write_msgs_</code> which is also a queue. </p>\n\n<pre><code>3.4 GiB: std::deque&lt;chat_message, std::allocator&lt;chat_message&gt; &gt;::_M_push_back_aux(chat_message const&amp;) (new_allocator.h:104)\n3.4 GiB: chat_session::deliver(chat_message const&amp;) (stl_deque.h:1526)\n</code></pre>\n\n<p>It doesn't logically grow, though, so it would appear there's some unfortunate behaviour.</p>\n\n<p>Let's investigate:</p>\n\n<p>On a total test run (shown above) the max write queue depth for any session is 60.</p>\n\n<p>Upon restart of all the client (without reloading the server), the queue depth increases to 100 immediately for obvious reasons (all clients get the full history of 100 items delivered at once)\u00b9.</p>\n\n<h3>Add <code>shrink_to_fit</code></h3>\n\n<p>Adding a call to <code>shrink_to_fit</code> after each <code>pop_front</code> call in <code>chat_session</code> doesn't make the the behaviour any better (apart from the fact that c++03 doesn't have <code>shrink_to_fit</code> of course).</p>\n\n<h3>Use a different container</h3>\n\n<p>Dropping in a <code>boost::circular_buffer</code> instead of the <code>std::deque</code>, strangely reaches a queue depth of 100 easily, even on the first run, but it <strong>does</strong> change the memory profile <strong><em>dramatically</em></strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PpsXa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PpsXa.png\" alt=\"enter image description here\"></a></p>\n\n<p>Clearly, there's something suboptimal about using deque as... a double-ended queue o.O That's very surprising. I'll try with libc++ instead:</p>\n\n<h3>Using libc++ instead</h3>\n\n<p>Interestingly, with <code>std::deque&lt;&gt;</code> and shrink-to-fit libc++ shows a different - still bad -curve. Note also it report ever-growing <code>_write_msgs_</code> queue depths. Somehow it behaves really differently... o.O</p>\n\n<p><a href=\"https://i.stack.imgur.com/LnStM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LnStM.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>\u00b9 Even thought the client immediately start cackling as well, the queue depth doesn't go beyond 100 - so throughput is still fine.</p>\n"}], "owner": {"reputation": 23, "user_id": 4504659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f79233de199516d7a247516d29137b?s=128&d=identicon&r=PG&f=1", "display_name": "hungrh", "link": "https://stackoverflow.com/users/4504659/hungrh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1452729742, "creation_date": 1452704953, "question_id": 34772823, "link": "https://stackoverflow.com/questions/34772823/boost-1-55-asio-tcp-cpp03-chat-server-example-memory-leaks", "title": "boost 1.55 asio tcp cpp03 chat_server example memory leaks", "body": "<p>i hope someone could give me a clue where to investigate...</p>\n\n<p>i'm running the chat_server example from boost </p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_55_0/doc/html/boost_asio/example/cpp03/chat/chat_server.cpp\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_55_0/doc/html/boost_asio/example/cpp03/chat/chat_server.cpp</a></p>\n\n<p>on visual studio 2010, windows 10 and i downloaded boost binaries from :</p>\n\n<p><a href=\"http://sourceforge.net/projects/boost/files/boost-binaries/1.55.0/boost_1_55_0-msvc-10.0-32.exe/download\" rel=\"nofollow\">http://sourceforge.net/projects/boost/files/boost-binaries/1.55.0/boost_1_55_0-msvc-10.0-32.exe/download</a></p>\n\n<p>i used a script to simulate 30 tcp clients, each thread behavior basically:</p>\n\n<ol>\n<li>connect to tcp server</li>\n<li>start a loop</li>\n<li>send a message to tcp server</li>\n<li>receive a message from tcp server</li>\n<li>sleep</li>\n<li>back to step 2</li>\n</ol>\n\n<p>the strange fact is when i use windows task manager to monitor the memory consumption. The numbers from columns <strong>private working set</strong> and <strong>shared working set</strong> remains \"stable\" for almost 18 minutes and after that the values of <strong>private working set</strong> starts to increase almost 5 MB by minute.</p>\n\n<p>So my doubts are:</p>\n\n<ol>\n<li>Does anyone ever seen anything similar before? </li>\n<li>What could cause this?</li>\n</ol>\n\n<p>Regards</p>\n"}, {"tags": ["c++", "opencv", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 2, "last_activity_date": 1452705895, "creation_date": 1452705895, "answer_id": 34773131, "question_id": 34772798, "link": "https://stackoverflow.com/questions/34772798/cvgemm-assert-in-opencv/34773131#34773131", "title": "cvGEMM Assert in openCV", "body": "<p>The problem seems to be in the matrix <code>translation</code>. You have the error because you're trying to multiply <code>rotation</code> (<code>3x3</code>) with <code>translation</code> (<code>1x3</code>).</p>\n\n<p>Simply transpose the <code>translation matrix</code> using:</p>\n\n<pre><code>transpose(translation, translation);\n</code></pre>\n\n<p>or create <code>T_02</code> and <code>T_03</code> as <code>Mat_&lt;double&gt;(3, 1)</code> instead of <code>Mat_&lt;double&gt;(1, 3)</code></p>\n\n<p>so you have a multiplication <code>(3x3) x (3x1)</code></p>\n"}], "owner": {"reputation": 1150, "user_id": 1789718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3fe641a6a3acaaede04ec4a239f78e41?s=128&d=identicon&r=PG", "display_name": "Luca", "link": "https://stackoverflow.com/users/1789718/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 34773131, "answer_count": 1, "score": 1, "last_activity_date": 1452705895, "creation_date": 1452704880, "question_id": 34772798, "link": "https://stackoverflow.com/questions/34772798/cvgemm-assert-in-opencv", "title": "cvGEMM Assert in openCV", "body": "<p>I'm having many problem using <code>stereoRectify</code> of openCV, these are my variables:</p>\n\n<pre><code>    Mat K_02 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 9.597910e+02, 0.000000e+00, 6.960217e+02,\n                     0.000000e+00, 9.569251e+02, 2.241806e+02,\n                     0.000000e+00, 0.000000e+00, 1.000000e+00);\n\n    Mat K_03 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 9.037596e+02, 0.000000e+00, 6.957519e+02,\n                     0.000000e+00, 9.019653e+02, 2.242509e+02,\n                     0.000000e+00, 0.000000e+00, 1.000000e+00);\n\n    Mat D_02 = (Mat_&lt;double&gt;(1,5) &lt;&lt; -3.691481e-01, 1.968681e-01, 1.353473e-03, 5.677587e-04, -6.770705e-02);\n    Mat D_03 = (Mat_&lt;double&gt;(1,5) &lt;&lt; -3.639558e-01, 1.788651e-01, 6.029694e-04, -3.922424e-04, -5.382460e-02);\n\n     Mat R_02 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 9.999758e-01, -5.267463e-03, -4.552439e-03,\n                     5.251945e-03, 9.999804e-01, -3.413835e-03,\n                     4.570332e-03, 3.389843e-03, 9.999838e-01);\n    transpose(R_02,R_02);\n\n    Mat R_03 = (Mat_&lt;double&gt;(3,3) &lt;&lt; 9.995599e-01, 1.699522e-02, -2.431313e-02,\n                     -1.704422e-02, 9.998531e-01, -1.809756e-03,\n                     2.427880e-02, 2.223358e-03, 9.997028e-01);\n\n    Mat T_02 = (Mat_&lt;double&gt;(1,3) &lt;&lt; 5.956621e-02, 2.900141e-04, 2.577209e-03);\n    Mat T_03 = (Mat_&lt;double&gt;(1,3) &lt;&lt; -4.731050e-01, 5.551470e-03, -5.250882e-03);\n\n    Mat rotation = cv::Mat::zeros(3, 3, R_03.type());\n    Mat translation = cv::Mat::zeros(1, 3, T_03.type());\n    rotation = R_02 * R_03;\n    translation = T_02 - T_03;\n</code></pre>\n\n<p>These variables are obtained using KITTI dataset, now i want to obtain the Q matrix to reconstruct the scene, the problem is that using the <code>stereoRectify</code>:</p>\n\n<pre><code>Mat R1,R2,P1,P2,Q;\nstereoRectify(K_02, D_02, K_03, D_03, size, rotation, translation, R1, R2, P1, P2, Q);\n</code></pre>\n\n<p>Is giving me an horrible assertion:</p>\n\n<pre><code>OpenCV Error: Assertion failed ((D.rows == ((flags &amp; CV_GEMM_A_T) == 0 ? A.rows : A.cols)) &amp;&amp; (D.cols == ((flags &amp; CV_GEMM_B_T) == 0 ? B.cols : B.rows)) &amp;&amp; D.type() == A.type()) in cvGEMM, file /build/buildd/opencv-2.4.9+dfsg/modules/core/src/matmul.cpp, line 3150\n</code></pre>\n\n<p>I can't debug it because gdb (throught Kdevelop) is not finding the source of openCV (I have installed it using repository). I have seen on the web how to use this function but it always use the output of <code>stereoCalibrate</code> function so i don't know which is the correct type to use to define my intrinsics matrices.</p>\n\n<p>Someone can give me a hint on how to avoid the assertion?</p>\n"}, {"tags": ["c++", "qt", "qbytearray"], "comments": [{"owner": {"reputation": 3575, "user_id": 2750816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c28ad318c9e95eda7bf7ee211db86a76?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/2750816/evgeny"}, "edited": false, "score": 0, "creation_date": 1452705696, "post_id": 34772787, "comment_id": 57291139, "body": "I&#39;m not sure but I think you should use <code>reinterpret_cast</code> instead of <code>static_cast</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3575, "user_id": 2750816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c28ad318c9e95eda7bf7ee211db86a76?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/2750816/evgeny"}, "is_accepted": true, "score": 2, "last_activity_date": 1452950289, "last_edit_date": 1452950289, "creation_date": 1452706283, "answer_id": 34773227, "question_id": 34772787, "link": "https://stackoverflow.com/questions/34772787/whats-wrong-in-my-code-why-the-error-msg/34773227#34773227", "title": "whats wrong in my code? why the error msg", "body": "<p>Ok, i figure out where is the problem. This is because when  you inside <code>for</code> make call <code>Alphabytes.at(b/8)</code> for the first time, the size of <code>Alphabytes</code> is zero, so you try get index that is out of array range. Replace this with <code>Alphabytes[b/8] = (Alphabytes[b/8] |......</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 3992620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsHUl.png?s=128&g=1", "display_name": "Rami Shawwa", "link": "https://stackoverflow.com/users/3992620/rami-shawwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1452821082, "creation_date": 1452821082, "answer_id": 34802876, "question_id": 34772787, "link": "https://stackoverflow.com/questions/34772787/whats-wrong-in-my-code-why-the-error-msg/34802876#34802876", "title": "whats wrong in my code? why the error msg", "body": "<p>It seems that in release mode everything compiles and even no errors or warnings etc are detected so this is strange it only happens in debug mode so I think ill report this in QT bug tracking maybe...\nUnless anyone can figure out why this error only happens when debugging...</p>\n"}], "owner": {"reputation": 53, "user_id": 3992620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsHUl.png?s=128&g=1", "display_name": "Rami Shawwa", "link": "https://stackoverflow.com/users/3992620/rami-shawwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 34773227, "answer_count": 2, "score": 0, "last_activity_date": 1452950289, "creation_date": 1452704858, "question_id": 34772787, "link": "https://stackoverflow.com/questions/34772787/whats-wrong-in-my-code-why-the-error-msg", "title": "whats wrong in my code? why the error msg", "body": "<p>The following code works just fine I can get the results I want if I ignore the error message once I run it. the error I get is: Debug Error!\nProgram:c:\\qt\\qt5.5.1\\5.5\\msvc2013_64\\bin\\Qt5Cored.dll\nModule: 5.5.1\nFile: global\\qglobal.cpp\nLine: 2966\n.....</p>\n\n<p>if I chose to ignore error the console app displays all data correctly it shows the correct bits array it also shows correct character for the binary array and last it gives also the correct byte decimal value for the byte char...</p>\n\n<p>this is the error in console:\n ASSERT: \"uint(i) &lt; uint(size())\" in file c:\\work\\build\\qt5_workdir\\w\\s\\qtbase\\sr\nc\\corelib\\tools\\qbytearray.h, line 464</p>\n\n<p>this is correct output:</p>\n\n<p>Bits are: QBitArray(0110 0011)</p>\n\n<p>Byte Char is \"c\"</p>\n\n<p>Decimal format Bytes are:  99</p>\n\n<p>Code used:</p>\n\n<pre><code>    QBitArray Alphabits(8);\n    Alphabits[0] = false;\n    Alphabits[1] = true;\n    Alphabits[2] = true;\n    Alphabits[3] = false;\n    Alphabits[4] = false;\n    Alphabits[5] = false;\n    Alphabits[6] = true;\n    Alphabits[7] = true;\n\n    QByteArray Alphabytes;\n    // Convert from QBitArray to QByteArray\n    for(int b=0; b&lt;Alphabits.count();++b) {\n        Alphabytes[b/8] = (Alphabytes.at(b/8) | ((Alphabits[b]?1:0)&lt;&lt;(7-(b%8))));\n    }\n\n    qDebug() &lt;&lt; \"Bits are:\" &lt;&lt; Alphabits;\n    qDebug() &lt;&lt; \"Byte Char is\" &lt;&lt; Alphabytes;\n    qDebug() &lt;&lt; \"Decimal format Bytes are: \"&lt;&lt; static_cast&lt;quint8&gt;(Alphabytes[0]);\n</code></pre>\n"}, {"tags": ["c++", "opengl", "printf"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1452708884, "post_id": 34772774, "comment_id": 57293073, "body": "What is the thing you have tried that hasn&#39;t worked? As far as I know the pre-build glfw libraries are not compatible with mingw32. Have you tried switching to mingw64 or MinGW-W64?"}, {"owner": {"reputation": 91, "user_id": 5669968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b44d02d93774294113b53e2b13c160a?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Spire", "link": "https://stackoverflow.com/users/5669968/emerald-spire"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1452709597, "post_id": 34772774, "comment_id": 57293553, "body": "I actually found what I did wrong. I&#39;m updating the question right now."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 5669968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b44d02d93774294113b53e2b13c160a?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Spire", "link": "https://stackoverflow.com/users/5669968/emerald-spire"}, "is_accepted": false, "score": -2, "last_activity_date": 1452709963, "creation_date": 1452709963, "answer_id": 34774396, "question_id": 34772774, "link": "https://stackoverflow.com/questions/34772774/undefined-reference-to-ms-vsnprintf/34774396#34774396", "title": "&quot;Undefined reference to _ms_vsnprintf&quot;", "body": "<p>I edited the question with my answer.\nDeleting libglfw3.a fixed it.</p>\n"}], "owner": {"reputation": 91, "user_id": 5669968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b44d02d93774294113b53e2b13c160a?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Spire", "link": "https://stackoverflow.com/users/5669968/emerald-spire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 941, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452709963, "creation_date": 1452704812, "last_edit_date": 1452709718, "question_id": 34772774, "link": "https://stackoverflow.com/questions/34772774/undefined-reference-to-ms-vsnprintf", "title": "&quot;Undefined reference to _ms_vsnprintf&quot;", "body": "<p><strong>I figured out what I did. It was one of the libraries I was using. It had a reference to <code>_ms__vsnprintf</code> that wasn't defined in it. I removed the file and my program compiled. Thanks for your help.\nFor future reference, the file was <code>libglfw3.a</code>.</strong></p>\n\n<p>How do I fix the error \"Undefined Reference to _ms_vsnprintf\"? I've only seen one other post about it, and that didn't fix my problem. I'm using Windows 8, Code::Blocks and MinGW. This is my code. </p>\n\n<pre><code>#define __LCC__\n#define GLEW_STATIC\n#define GLFWAPI __declspec(dllimport)\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;GL/glew.h&gt;\n#define GLFW_INCLUDE_GLU\n#include &lt;GL/glfw3.h&gt;\n#include &lt;glm/glm.hpp&gt;\nusing namespace glm;\nint main() {\nif( !glfwInit() ) {\n    fprintf( stderr, \"Failed to initialize GLFW\\n\");\n    return -1;\n}\n glfwWindowHint(GLFW_SAMPLES, 4);\n glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);\nglfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n\nGLFWwindow* window;\nwindow = glfwCreateWindow( 600, 800, \"OpenGL Window\", NULL, NULL);\n\nif(window == NULL) {\n    fprintf(stderr, \"OpenGL Couldn't open the window.\\n\");\n    glfwTerminate();\n    return -1;\n}\n\nglfwMakeContextCurrent(window);\nglewExperimental=true;\nif (glewInit() !=GLEW_OK) {\n    fprintf(stderr, \"Failed to start GLEW.\\n\");\n    return -1;\n}\n }\n</code></pre>\n\n<p>Here's the build log from Code::Blocks</p>\n\n<pre><code>-------------- Build: Debug in opengltest (compiler: GNU GCC Compiler)---------------\n\nmingw32-g++.exe -lglfw3 -Wall -g -I..\\..\\MiniGW\\lib\\lib-mingw-w64 -c \"D:\\Programs\\C PROGRAMS\\opengltest\\main.cpp\" -o obj\\Debug\\main.o\nmingw32-g++.exe -L..\\..\\MiniGW\\lib\\lib-mingw-w64 -L..\\MiniGW\\lib -o bin\\Debug\\opengltest.exe obj\\Debug\\main.o  -lglfw3 -lglfw3 -lopengl32 -lgdi32 -lglu32  ..\\..\\MiniGW\\lib\\Release\\Win32\\glew32s.lib ..\\..\\MiniGW\\lib\\lib-mingw-w64\\glfw3dll.a ..\\..\\MiniGW\\lib\\lib-mingw-w64\\libglfw3.a ..\\..\\MiniGW\\lib\\libglu32.a ..\\..\\MiniGW\\lib\\libopengl32.a\nWarning: corrupt .drectve at end of def file\n..\\..\\MiniGW\\lib\\lib-mingw-w64/libglfw3.a(init.c.obj):init.c:(.text+0x49): undefined reference to `__ms_vsnprintf'\ncollect2.exe: error: ld returned 1 exit status\nProcess terminated with status 1 (0 minute(s), 13 second(s))\n1 error(s), 1 warning(s) (0 minute(s), 13 second(s))\n</code></pre>\n"}, {"tags": ["c++", "friend"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1452704681, "post_id": 34772669, "comment_id": 57290467, "body": "<code>friend</code>-ship is the strongest relationship between class types in C++. Do you really want that with a type you didn&#39;t even create? Why can <code>std::tuple</code> copy it, but no one else can?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1452704805, "post_id": 34772669, "comment_id": 57290542, "body": "What is the <i>actual</i> problem you try to solve? Please <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">read about the XY problem</a>."}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1452704929, "post_id": 34772669, "comment_id": 57290625, "body": "@BoBTFish I want to prevent unintentional copy-construction due to programmer error. It&#39;s purely a practical concern."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 3, "creation_date": 1452705094, "post_id": 34772669, "comment_id": 57290754, "body": "@dshin Unless there is a good reason the type <i>must</i> not be copied, you should leave that decision to the user of the type. Why is it correct for <code>tuple</code> to do it, but not someone else writing some sort of container that needs it?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1452705175, "post_id": 34772669, "comment_id": 57290810, "body": "@dshin but by making the copy constructor private, you prevent <i>all</i> copy-construction, both intentional and non-intentional. Furthermore, programmers would still be able to make unintentional copies using <code>tuple</code>."}, {"owner": {"reputation": 6753, "user_id": 15161, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ux55V.jpg?s=128&g=1", "display_name": "slashmais", "link": "https://stackoverflow.com/users/15161/slashmais"}, "edited": false, "score": 1, "creation_date": 1452705258, "post_id": 34772669, "comment_id": 57290856, "body": "Use a base-class where std::tuple is friend then derive your exposed private-ctor class from that."}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1452705493, "post_id": 34772669, "comment_id": 57291004, "body": "@user2079303 Yes, programmers would be able to make unintentional copies using <code>tuple</code>. That is unlikely to happen in my context. My actual desire is to prevent <i>all</i> copy-construction."}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "reply_to_user": {"reputation": 6753, "user_id": 15161, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ux55V.jpg?s=128&g=1", "display_name": "slashmais", "link": "https://stackoverflow.com/users/15161/slashmais"}, "edited": false, "score": 0, "creation_date": 1452705727, "post_id": 34772669, "comment_id": 57291160, "body": "@slashmais Thanks for the idea, with some refactoring I think I can make that work."}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "edited": false, "score": 0, "creation_date": 1452706691, "post_id": 34772669, "comment_id": 57291775, "body": "I reworded my question slightly to answer some of the questions in the comments."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1452706816, "post_id": 34772669, "comment_id": 57291864, "body": "What negative effects occur if this class is copy-constructed?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452706833, "post_id": 34772669, "comment_id": 57291878, "body": "A noble goal, but given that it&#39;s troubling and that some code needs to copy your objects anyway, I&#39;d not bother."}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1452706878, "post_id": 34772669, "comment_id": 57291909, "body": "@GManNickG performance (it&#39;s a large object), and potential for bugs"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 1, "creation_date": 1452707183, "post_id": 34772669, "comment_id": 57292098, "body": "No bugs should occur if you have a properly-defined copy constructor. As for performance, allow programmers to program; if copying your object is needed, let it happen, otherwise pass by reference. Don&#39;t contort your code out of (unfounded?) fear that someone will forget a reference. Your profiler will help."}, {"owner": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 0, "creation_date": 1452707389, "post_id": 34772669, "comment_id": 57292224, "body": "One thought: make a special function that encapsulates this ability to copy construct.  Then, you can limit friendship to only that function. So, maybe make_special_tuple for your class does everything, and that one function is a friend of your framework.  I feel like encapsulating in a function is the easiest thing to do here."}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1452707621, "post_id": 34772669, "comment_id": 57292371, "body": "@GManNickG Sure, but declaring copy constructors private is fairly common practice, not really a contortion. I&#39;ve been at companies where you were required to make copy constructors private unless there was a compelling reason not to. Also, the fear of bug is not due to a buggy constructor definition, but that we have &gt;N instances of an object that logically there should only be N instances of. The instance in my tuple doesn&#39;t count because it&#39;s under a carefully crafted under-the-hood framework."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 4, "creation_date": 1452707833, "post_id": 34772669, "comment_id": 57292486, "body": "Declaring copy constructors private is indeed totally common, many classes don&#39;t have well-defined copy semantics. Declaring otherwise meaningful copy constructors private, then wanting to grant arbitrary exceptions is not normal. :)"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1452709990, "post_id": 34772669, "comment_id": 57293808, "body": "Do you allow move-construction? Then you could move your object into a tuple."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1452710054, "post_id": 34772669, "comment_id": 57293844, "body": "And since you are using c++11 anyway, it is better to <code>= delete</code> copy constructor instead of making it private."}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1452710284, "post_id": 34772669, "comment_id": 57294006, "body": "@IlyaPopov I actually cannot <code>= delete</code> because the copy constructor is used by other hidden-from-the-user classes within the framework. And move-construction, if I understand correctly, would actually slide the problem over to the private default constructor. Maybe if I had to choose the lesser of 2 evils, an accidental default construction is more acceptable than an accidental copy construction."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1452710323, "post_id": 34772669, "comment_id": 57294031, "body": "Another example of dubious design practices ran amok. One should only prohibit copy construction (and usually assignment operator) when sematics of the class do not allow for copying. When the class has value semantics, it should be copyable. Performance associated with copying is not something class writer should worry. <code>std::vector&lt;&gt;</code> has copy constructor, despite this being potentially slow operation."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 1, "creation_date": 1452710592, "post_id": 34772669, "comment_id": 57294201, "body": "@dshin You not necessarily need default construction. All tuple member constructors accept rvalue-references: <code>tuple&lt;Object, int&gt; t(std::move(x), 35);</code> It represents a problem, however, if the framework is not ready for non-copyable types. In that case, ideally the framework shall be fixed."}, {"owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1452710911, "post_id": 34772669, "comment_id": 57294448, "body": "@IlyaPopov Ah, I gotcha. I like this solution."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1452711139, "post_id": 34772669, "comment_id": 57294593, "body": "@dshin Be aware, that the <code>tuple</code> containing your object becomes non-copyable itself. Which the framework may not like."}], "answers": [{"tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": false, "score": 1, "last_activity_date": 1452710368, "last_edit_date": 1452710368, "creation_date": 1452709600, "answer_id": 34774294, "question_id": 34772669, "link": "https://stackoverflow.com/questions/34772669/be-friending-stdtuple/34774294#34774294", "title": "Be-friend&#39;ing std::tuple", "body": "<p>If the framework requires your class to be copyable, you really should provide a copyable class.</p>\n\n<p>If your class really is only movable, or not even that, then maybe the framework should have a <code>std::unique_ptr</code> or similar to the object instead? Or you could create a movable adaptor class around that <code>std::unique_ptr</code> which forwards the interface...</p>\n\n<p>Part of the forward-facing interface to users of the class is, whether it is moveable and/or copyable. If you are trying to make it non-copyable, unless you happen to be a component of the target application area... this limits code reuse, and it may confuse potential users of the class as to whether or not it is safe to copy / move it.</p>\n\n<p>It may be that the framework doesn't really need to make a copy, and can be refactored to make moves instead?</p>\n\n<p>It's very unclear from the question why you don't want it to be copyable. You seem to say that bad things will happen, but for some reason you aren't concerned if the framework makes a copy. Is it really okay to make copies or not?</p>\n\n<p>It may be that you need to make a separate system for tracking / enforcing the invariant that you are concerned about, rather than just try to prohibit copying this class.</p>\n"}], "owner": {"reputation": 2007, "user_id": 543913, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7d76a4187acf1918902f0a2ab239aba?s=128&d=identicon&r=PG", "display_name": "dshin", "link": "https://stackoverflow.com/users/543913/dshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452710395, "creation_date": 1452704495, "last_edit_date": 1452710395, "question_id": 34772669, "link": "https://stackoverflow.com/questions/34772669/be-friending-stdtuple", "title": "Be-friend&#39;ing std::tuple", "body": "<p>I have a custom <code>class</code>, and I'd like to minimize the chances that someone on my team accidentally copies it, as that could break certain invariants within our system. To this end, I made the copy constructor private, as there is no reason anyone should need to copy it in any legitimate usage of the class.</p>\n\n<p>However, under-the-hood of the framework that the class is a part of, a copy construction of the object into a <code>std::tuple</code> is required. I tried to use <code>friend</code>, but the compiler still complains, as the inner class(es?) of <code>std::tuple</code> require friend-access as well.</p>\n\n<p>What is the best way to get what I want?</p>\n"}, {"tags": ["c++", "windows", "dll", "leap-motion", "vst"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452708905, "post_id": 34772645, "comment_id": 57293089, "body": "<b><i>and tried to regsvr32 them</i></b> Why did you do that? I do not see regsvr32 at all in the instructions. Did you copy the dlls to the same location as your applications executable like the xcopy part from the example?"}, {"owner": {"reputation": 87, "user_id": 2084345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjEE4.jpg?s=128&g=1", "display_name": "Vincent Berthiaume", "link": "https://stackoverflow.com/users/2084345/vincent-berthiaume"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452709506, "post_id": 34772645, "comment_id": 57293481, "body": "yes I did copy the Leap dll in the same folder as my plugin dll--my output is a dll, not a .exe. And I tried the regsvr32 technique (with dlls in the system folders) because this has worked in the past for me to use other dlls. And because I didn&#39;t know what else to do!"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452710149, "post_id": 34772645, "comment_id": 57293900, "body": "Did you build dlls for the SDK (I could not download to see without registration)? I ask because if you downloaded a binary release and you do not have the correct ependencies of the dll (installed on your system) the dll will not load even though you have it in the correct folder."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1452710330, "post_id": 34772645, "comment_id": 57294036, "body": "Your conclusion is quite backwards, it stops working when it <i>does</i> have a dependency on Leap.  Probably a missing DLL, use SysInternals&#39; Process Monitor to see your DAW looking for it and not finding it."}, {"owner": {"reputation": 87, "user_id": 2084345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjEE4.jpg?s=128&g=1", "display_name": "Vincent Berthiaume", "link": "https://stackoverflow.com/users/2084345/vincent-berthiaume"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452710902, "post_id": 34772645, "comment_id": 57294439, "body": "@drescherjm, I figure you&#39;re referring to the Leap SDK? They don&#39;t give the source code, only the dlls. And no static lib. And their instructions clearly say that we only need the Leap.dll. And using Leap.dylib works on mac."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452711072, "post_id": 34772645, "comment_id": 57294543, "body": "Yes. Maybe you need to use dependencywalker <a href=\"http://dependencywalker.com/\" rel=\"nofollow noreferrer\">dependencywalker.com</a> to verify that you have all of the dependent dlls. Also if there are different binaries for each version of Visual Studio (should be to avoid CRT incompatibilities) make sure you get the correct version.vc9=Visual Studio 2008,vc10=2010, vc11=2012, vc12=2013,vc14=2015."}], "answers": [{"tags": [], "owner": {"reputation": 269, "user_id": 3982428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ba09f66a24f5edd07eb0d9210c67bed?s=128&d=identicon&r=PG&f=1", "display_name": "Ehsan Enayati", "link": "https://stackoverflow.com/users/3982428/ehsan-enayati"}, "is_accepted": false, "score": 1, "last_activity_date": 1458048428, "creation_date": 1458048428, "answer_id": 36012669, "question_id": 34772645, "link": "https://stackoverflow.com/questions/34772645/how-to-use-an-external-dll-when-building-a-vst-under-windows/36012669#36012669", "title": "How to use an external dll when building a vst under windows", "body": "<p>If it is a dynamic library you do not need to include it in your project. All you need is to copy the file onto user's machine in a specific folder and then in your plugin code add something like this:</p>\n\n<pre><code>DynamicLibrary dynLib;\nbool loaded = dynLib.open(\"DYNAMIC_LIBRARY_FULL_PATH\");\nif(loaded)\n{\n    FUNCTIONTEMPLATE functiontemplate = (FUNCTIONTEMPLATE) dynLib.getFunction(\"functionName\");\n    char *input;\n    int output = functiontemplate (input);\n}\n</code></pre>\n\n<p>Of course if you did not write the dynamic library yourself, then you need something like dependency walker to check inside the dll and find the function declaration or read the documentation from whoever wrote the dll. Anyway, you need to know the exact function declaration format and create a pointer to that. Imagine it is function that accepts char* as input and returns int as output, then you need to have a line like this on top of your .cpp or .c code:</p>\n\n<pre><code>typedef int (*FUNCTIONTEMPLATE) (char *);\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 2084345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjEE4.jpg?s=128&g=1", "display_name": "Vincent Berthiaume", "link": "https://stackoverflow.com/users/2084345/vincent-berthiaume"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458048428, "creation_date": 1452704443, "last_edit_date": 1495541728, "question_id": 34772645, "link": "https://stackoverflow.com/questions/34772645/how-to-use-an-external-dll-when-building-a-vst-under-windows", "title": "How to use an external dll when building a vst under windows", "body": "<p>I'm trying to use the Leap motion sdk with a JUCE vst plugin under Windows 10 x64. </p>\n\n<p>I have setup my project <a href=\"https://developer.leapmotion.com/documentation/cpp/devguide/Project_Setup.html\" rel=\"nofollow noreferrer\">exactly like this</a>, and made sure that Leap.dll was in my output, VstPlugins directory. However my DAW (Reaper) cannot detect/open my plugin's dll. I have also tried to put my x86 Leap.dll in C:\\Windows\\System32 (and my x64 version in C:\\Windows\\SysWOW64), and tried to regsvr32 them, only to be told <a href=\"https://stackoverflow.com/questions/13931337/register-comdlg32-dll-gets-regsvr32-dllregisterserver-entry-point-was-not-found\">the DLLRegistryServer entry point cannot be found</a>. </p>\n\n<p>When I comment everything related to the Leap sdk, my plugin is detected in Reaper and everything else works, and on Mac OSX I am able to use the Leap as well, so it seems my problem is really that my Windows system does not know it has to use Leap.dll with my plugin's dll. How does one go about doing this?</p>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1452704183, "post_id": 34772468, "comment_id": 57290110, "body": "You somewhat answered your own question with your question title. You need a container (a list is adequate, as is a vector, deque, etc) to retain your input values for regurgitation during output. Right now you&#39;re repeatedly spewing the <i>last</i> hour value read."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452704192, "post_id": 34772468, "comment_id": 57290121, "body": "<i>&quot;Hours: 6 6 6 6 6.&quot;</i> What should this output actually mean? Would you mind to elaborate please."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452706784, "post_id": 34772468, "comment_id": 57291839, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: I believe &quot;Hour: 6 6 6&quot; means &quot;the apocalypse is upon us!&quot;"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1452707001, "post_id": 34772468, "comment_id": 57291979, "body": "@JerryCoffin That doesn&#39;t explain the postfixed two 6 there though :-) ..."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1452707072, "post_id": 34772468, "comment_id": 57292020, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: The apocalypse tends to distract from such minor concerns."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1452707194, "post_id": 34772468, "comment_id": 57292107, "body": "@JerryCoffin LOL! You&#39;re cool man, sure big things wont be attracted from minor concerns. Your pun is awesome!"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452704729, "post_id": 34772709, "comment_id": 57290496, "body": "Sure about the <code>std::vector&lt;int&gt;</code>?"}], "tags": [], "owner": {"reputation": 134, "user_id": 2788511, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/350dfa174194022e9d652afb26556371?s=128&d=identicon&r=PG&f=1", "display_name": "sean", "link": "https://stackoverflow.com/users/2788511/sean"}, "is_accepted": false, "score": 2, "last_activity_date": 1452704624, "creation_date": 1452704624, "answer_id": 34772709, "question_id": 34772468, "link": "https://stackoverflow.com/questions/34772468/how-to-get-list-in-c/34772709#34772709", "title": "How to get list in c++?", "body": "<p>You need to to use Vector from standard library. Try something like below. You can go through different data structures it will help in future. \nI hope this helps.</p>\n\n<pre><code>std::vector&lt;double&gt; myVectorList;\ncout &lt;&lt; \"How many days:\\n\";\ncin &gt;&gt; days;\n\nfor(ind=0; ind&lt;days; ind++) {\n  cout &lt;&lt; ind+1 &lt;&lt; \". day h: \";\n  cin &gt;&gt; hours;\n  sum += hours;\n  myVectorList.push_back(hours);\n}\n\ncout &lt;&lt; \"Total hours: \" &lt;&lt; sum &lt;&lt; endl;\naverage = sum/days;\ncout &lt;&lt; \"Average working day: \" &lt;&lt; average &lt;&lt; endl;\ncout &lt;&lt; \"Hours: \";\n\nfor(ind=0; ind&lt;days; ind++) {\n  cout &lt;&lt; myVectorList[ind] &lt;&lt; \" \";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1452705063, "last_edit_date": 1452705063, "creation_date": 1452704669, "answer_id": 34772721, "question_id": 34772468, "link": "https://stackoverflow.com/questions/34772468/how-to-get-list-in-c/34772721#34772721", "title": "How to get list in c++?", "body": "<p>Well you could primarily use an appropriate standard container class like <code>std::vector&lt;double&gt;</code> to gather the inputs:</p>\n\n<pre><code>cout &lt;&lt; \"How many days:\\n\";\ncin &gt;&gt; days;\n\nstd::vector&lt;double&gt; dailyWorkingHours;\n\nfor(int ind=0; ind&lt;days; ind++) {\n  cout &lt;&lt; ind+1 &lt;&lt; \". day h: \";\n  double hours;\n  cin &gt;&gt; hours;\n  dailyWorkingHours.push_back(hours);\n  sum += hours;\n}\n</code></pre>\n\n<p>and print out the gathered values from the container as you need to:</p>\n\n<pre><code>for(ind=0; ind&lt;dailyWorkingHours.size(); ind++) {\n  cout &lt;&lt; ind + 1 &lt;&lt; \". day h:\" &lt;&lt; dailyWorkingHours[ind] &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1452706109, "last_edit_date": 1452706109, "creation_date": 1452705031, "answer_id": 34772845, "question_id": 34772468, "link": "https://stackoverflow.com/questions/34772468/how-to-get-list-in-c/34772845#34772845", "title": "How to get list in c++?", "body": "<p>Yo can use a <code>std::vector</code> for your list  and <code>std::accumulate</code> to calcualtes sum of your list:</p>\n\n<pre><code>#include &lt;vector&gt;   // std::vector\n#include &lt;numeric&gt;  // std::accumulate\n\nint main()\n{\n    // read days\n    int days;\n    cout &lt;&lt; \"How many days:\\n\";\n    cin &gt;&gt; days;\n\n    // read hours for each day\n    std::vector&lt;double&gt; hoursList;\n    for(int ind=0; ind&lt;days; ind++) {\n        cout &lt;&lt; ind+1 &lt;&lt; \". day h: \";\n        double hours;\n        cin &gt;&gt; hours;\n        hoursList.push_back(hours); // add one element at back of your vector\n    }\n\n    // clacualte sum of all hours in vector \n    double sum = std::accumulate(hoursList.begin(), hoursList.end(), 0.0); \n\n    cout &lt;&lt; \"Total hours: \" &lt;&lt; sum &lt;&lt; endl;\n    doubleaverage = sum/days;\n\n    cout &lt;&lt; \"Average working day: \" &lt;&lt; average &lt;&lt; endl;\n    cout &lt;&lt; \"Hours: \";\n    for( int day=0; day &lt; (int)hoursList.size(); day ++ ) {\n        cout &lt;&lt; day+1 &lt;&lt; \". \" &lt;&lt; hoursList[day] &lt;&lt; std::endl;\n    }\n    cout &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5785481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68bae0c6184618b4bddb9ad49992ca7f?s=128&d=identicon&r=PG&f=1", "display_name": "Jaska", "link": "https://stackoverflow.com/users/5785481/jaska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 34772845, "answer_count": 3, "score": 1, "last_activity_date": 1452706109, "creation_date": 1452703974, "question_id": 34772468, "link": "https://stackoverflow.com/questions/34772468/how-to-get-list-in-c", "title": "How to get list in c++?", "body": "<p>What I have to do if I want that kind of output? I cant get that Hours: list out right. My output look Hours: 6 6 6 6 6.</p>\n\n<pre><code>How many days:\n4\n1. day h:7\n2. day h:8\n3. day h:9\n4. day h:5.4\nTotal hours: 29.4\nAverage working day: 7.35\nHours: 7 8 9 5.4\n</code></pre>\n\n<p>My code look like that</p>\n\n<pre><code>cout &lt;&lt; \"How many days:\\n\";\ncin &gt;&gt; days;\n\nfor(ind=0; ind&lt;days; ind++) {\n  cout &lt;&lt; ind+1 &lt;&lt; \". day h: \";\n  cin &gt;&gt; hours;\n  sum += hours;\n}\n\ncout &lt;&lt; \"Total hours: \" &lt;&lt; sum &lt;&lt; endl;\naverage = sum/days;\n\ncout &lt;&lt; \"Average working day: \" &lt;&lt; average &lt;&lt; endl;\ncout &lt;&lt; \"Hours: \";\nfor(ind=0; ind&lt;days; ind++) {\n  cout &lt;&lt; hours &lt;&lt; \" \";\n}\ncout &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1452704059, "post_id": 34772392, "comment_id": 57290015, "body": "You what to use the wide versions <a href=\"https://msdn.microsoft.com/en-us/library/td1esda9.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/td1esda9.aspx</a> - wcscpy_s"}, {"owner": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "edited": false, "score": 0, "creation_date": 1452755841, "post_id": 34772392, "comment_id": 57311428, "body": "check this <a href=\"https://msdn.microsoft.com/en-us/library/awkwbzyc.aspx\" rel=\"nofollow noreferrer\">MSDN link</a>"}], "answers": [{"comments": [{"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1452768694, "post_id": 34787571, "comment_id": 57318856, "body": "&quot;Which no one uses anymore and hasn&#39;t for well over a decade.&quot; you would be surprised. :)"}], "tags": [], "owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "is_accepted": true, "score": 2, "last_activity_date": 1452768335, "creation_date": 1452768335, "answer_id": 34787571, "question_id": 34772392, "link": "https://stackoverflow.com/questions/34772392/strcpy-parameters-are-not-correct/34787571#34787571", "title": "Strcpy parameters are not correct", "body": "<p>The <code>strcpy</code> function accepts only parameters of type <code>char*</code>. That's what the compiler error is telling you\u2014you have a type mismatch error. In a Windows environment, <code>char*</code> means <em>narrow</em> (<em>i.e.</em>, ANSI) strings. Which no one uses anymore and hasn't for well over a decade.</p>\n\n<p>You know this already; you say that you're building a Unicode application, which is what you should be doing. But that means you can't call the narrow string functions (<code>str*</code>) anymore. You have two options. Either:</p>\n\n<ul>\n<li><p>Explicitly call the \"wide\" (<em>i.e.</em>, Unicode) variants of the C string library functions, which are prefixed with <code>wcs</code> instead of <code>str</code>. In this case, then, you'd be calling <code>wcscpy</code>.</p></li>\n<li><p>Use the macros that map automatically to the correct variant of the C string library functions. If the <code>_UNICODE</code> symbol is defined (as it would be for you), they will map to the wide-string variants; otherwise, they map to the narrow-string variants. These functions (actually macros) are all prefixed with <code>_tcs</code>. In this case, then, you'd call <code>_tcscpy</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 1161, "user_id": 124658, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/d140e80b383a2072a376d352f1315e2d?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/124658/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 34787571, "answer_count": 1, "score": 1, "last_activity_date": 1452768386, "creation_date": 1452703766, "last_edit_date": 1452768386, "question_id": 34772392, "link": "https://stackoverflow.com/questions/34772392/strcpy-parameters-are-not-correct", "title": "Strcpy parameters are not correct", "body": "<p>I am updating an older visual studio project to VS2013 and keep running into an issue where it does not like the parameters that I pass into <code>strcpy</code> functions.<br>\n This is a Unicode application.<br>\nI get the error -    </p>\n\n<blockquote>\n  <p><strong>cannot convert argument 2 from 'CString' to 'const char *'</strong></p>\n</blockquote>\n\n<pre><code>strcpy(szFileName, m_strFileName);\n</code></pre>\n\n<p><code>m_strFileName</code> is defined as a <code>CString</code>.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1452704056, "post_id": 34772371, "comment_id": 57290009, "body": "The in-memory layout isn&#39;t the same for the data, so you can&#39;t even come up with a non-safe kludge. Sorry."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1452704189, "post_id": 34772371, "comment_id": 57290115, "body": "@MarkRansom: I think the underlying data <i>will</i> (probably) have the same layout.  For <code>std::pair&lt;int,int&gt; p</code>.  <code>(&amp;p.first)+1</code> and <code>&amp;p.second</code> are overwhelmingly likely to be equal (although the standard doesn&#39;t guarantee that)."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1452704334, "post_id": 34772371, "comment_id": 57290221, "body": "I don&#39;t get it. If you have <code>std::vector&lt;std::pair&lt;int,int&gt;&gt; { {0,1}, {2,3}, {4,5} }</code>, what should you pass to the library function? <code>{0, 2, 4}</code>? <code>{0,1,2,3,4,5}</code>?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1452704338, "post_id": 34772371, "comment_id": 57290224, "body": "@MartinBonner it depends on how you read the question. If the intent is to send <i>both</i> of the pair to the function, then you might be right. If the intent is to send <i>one</i> of the pair, it can&#39;t be done."}, {"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1452704517, "post_id": 34772371, "comment_id": 57290354, "body": "@YSC I actually don&#39;t have integers (this was just an example) but I have openCL Devices and for each device there is also a CommandQueue. And I store them in a vector of tuple&lt;Device, CommandQueue&gt; right now, but one function wants a vector&lt;Device&gt;. So basically I want a vector of the first elements of each tuple."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1452704622, "post_id": 34772371, "comment_id": 57290426, "body": "Then there is no solution without altering your internal structure. Can you use something different from <code>std::vector&lt;std::tuple&lt;Device, CommandQueue&gt;&gt;</code>?"}, {"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1452704820, "post_id": 34772371, "comment_id": 57290550, "body": "@YSC I am not bound to use tuple. I just couldn&#39;t come up with something that would keep the connection between the Device and CommanQueue as well as the tuple does, except writing my own container."}], "answers": [{"comments": [{"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1452704231, "post_id": 34772447, "comment_id": 57290148, "body": "Ok. So maybe there is another way if I do not use <code>std::pair</code>? I mean I could just store two separate vectors, but that would be really uncomfortable as I usually (except for this one function call) need both elements of the pair. So is there maybe a clever way?"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1452710910, "last_edit_date": 1452710910, "creation_date": 1452703914, "answer_id": 34772447, "question_id": 34772371, "link": "https://stackoverflow.com/questions/34772371/how-to-pass-a-read-only-vectorint-to-a-function-which-is-part-of-a-vector-of-p/34772447#34772447", "title": "How to pass a read-only vector&lt;int&gt; to a function which is part of a vector of pair&lt;int,int&gt; without copying", "body": "<p>No.  <code>std::vector&lt;std::pair&lt;int&gt;&gt;</code> and <code>std::vector&lt;int&gt;</code> are completely unrelated types.  You can't pass one where the function requires the other.  You will have to copy the data.</p>\n\n<p>This is slightly sad because the vector of pairs must have an array of adjacent pairs, and in reality, the pairs will just contain adjacent <code>int</code>s, so the memory layout you need is there.  The truth is though, that there is no way to get at it.</p>\n\n<p><strong>Edit</strong>\nI see from comments that it's more like <code>std::pair&lt;int, char*&gt;</code> in which case you are really stuck.</p>\n\n<p>I think \"write your own container\" which can expose a <code>std::vector&lt;int&gt; const&amp;</code> for use in this other function, or just copy, is your best bet.</p>\n"}, {"tags": [], "owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1452710569, "last_edit_date": 1452710569, "creation_date": 1452704816, "answer_id": 34772775, "question_id": 34772371, "link": "https://stackoverflow.com/questions/34772371/how-to-pass-a-read-only-vectorint-to-a-function-which-is-part-of-a-vector-of-p/34772775#34772775", "title": "How to pass a read-only vector&lt;int&gt; to a function which is part of a vector of pair&lt;int,int&gt; without copying", "body": "<p>You can try to use <code>vector&lt;int&gt;</code> to store your data, and write an adapter class which will expose it using interface compatible with <code>vector&lt;pair&lt;int,int&gt;&gt;</code> for your code.</p>\n"}, {"comments": [{"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1452705974, "post_id": 34772883, "comment_id": 57291330, "body": "Hm, but I think the original construct is more comfortable if I want to iterate over the tuple&lt;Device, CommandQueue&gt;, which I do a lot. I would rather copy the devices from time to time then, I guess."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 0, "last_activity_date": 1452705149, "creation_date": 1452705149, "answer_id": 34772883, "question_id": 34772371, "link": "https://stackoverflow.com/questions/34772371/how-to-pass-a-read-only-vectorint-to-a-function-which-is-part-of-a-vector-of-p/34772883#34772883", "title": "How to pass a read-only vector&lt;int&gt; to a function which is part of a vector of pair&lt;int,int&gt; without copying", "body": "<p>What about something in the taste of:</p>\n\n<pre><code>class container : private std::tuple&lt;std::vector&lt;Device&gt;, std::vector&lt;CommandQueue&gt;&gt;\n{\npublic:\n    std::tuple&lt;Device, CommandQueue&gt; tuple(size_t index)\n    {\n        return std::make_tuple(get&lt;0&gt;.at(index), get&lt;1&gt;.at(index))\n    }\n\n    const std::vector&lt;Device&gt;&amp;       devices()      const { return get&lt;0&gt;; }\n    const std::vector&lt;CommandQueue&gt;&amp; commandQueue() const { return get&lt;1&gt;; }\n};\n</code></pre>\n"}], "owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 34772447, "answer_count": 3, "score": 0, "last_activity_date": 1452710910, "creation_date": 1452703690, "last_edit_date": 1452704696, "question_id": 34772371, "link": "https://stackoverflow.com/questions/34772371/how-to-pass-a-read-only-vectorint-to-a-function-which-is-part-of-a-vector-of-p", "title": "How to pass a read-only vector&lt;int&gt; to a function which is part of a vector of pair&lt;int,int&gt; without copying", "body": "<p>I have a vector of pairs of let's say <code>int</code>s. Now there is a library that expects a <code>const vector&lt;int&gt;&amp;</code> reference as an input to one of its functions. Is there a way of passing the appropriate vector to the function without copying data? Because all solutions for extracting vectors here on SO always deal with the scenario that I need to extract and copy parts of the vector, but I don't want to copy as I only pass the subvector as read-only const.</p>\n\n<p>Note: I cannot change the function I am calling (that expects <code>const vector&lt;int&gt;&amp;</code>) as it is not part of my code.</p>\n\n<p><strong>EDIT:</strong> As I was not clear what I actually want to extract, I will try to clarify. I have a <code>vector&lt;pair&lt;A,B&gt;&gt;</code> and want to pass <code>vector&lt;A&gt;</code>.</p>\n"}, {"tags": ["c++", "svn"], "comments": [{"owner": {"reputation": 443, "user_id": 476315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0f0bc3bccf9835eae84615b393ba8d?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Liehr", "link": "https://stackoverflow.com/users/476315/viktor-liehr"}, "edited": false, "score": 0, "creation_date": 1452707514, "post_id": 34772284, "comment_id": 57292292, "body": "What about adding a function GetVersion() and test the result in your application?"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 443, "user_id": 476315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0f0bc3bccf9835eae84615b393ba8d?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Liehr", "link": "https://stackoverflow.com/users/476315/viktor-liehr"}, "edited": false, "score": 0, "creation_date": 1452781854, "post_id": 34772284, "comment_id": 57327461, "body": "@ViktorLiehr How could that function be implemented and how could it be tested?"}, {"owner": {"reputation": 443, "user_id": 476315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0f0bc3bccf9835eae84615b393ba8d?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Liehr", "link": "https://stackoverflow.com/users/476315/viktor-liehr"}, "edited": false, "score": 0, "creation_date": 1452799626, "post_id": 34772284, "comment_id": 57339176, "body": "@Walter: Straightforward, just a uint32_t GetVersion() { return 10105; } for v1.01.05 in the Library. And a check in your application code, e.g. LibraryXGetVersion is the function binding to the GetVersion(), So the check is if( LibraryXGetVersion() == 10105) { /* code for correct version */ }"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 443, "user_id": 476315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0f0bc3bccf9835eae84615b393ba8d?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Liehr", "link": "https://stackoverflow.com/users/476315/viktor-liehr"}, "edited": false, "score": 0, "creation_date": 1452937180, "post_id": 34772284, "comment_id": 57393011, "body": "@ViktorLiehr Of course I thought along those lines, but for that I need an <b>automatic</b> way to generate a version for the library interface (or, simpler but equivalent, for each library header file). How to do that?"}], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1452704167, "creation_date": 1452703442, "last_edit_date": 1495542211, "question_id": 34772284, "link": "https://stackoverflow.com/questions/34772284/how-to-ensure-correct-version-of-library-is-loaded-at-run-time", "title": "How to ensure correct version of library is loaded at run time", "body": "<p>I'm developing a library (using C++) and occasionally run into the problem that at run-time a wrong version of the library is loaded. If so, the executable and the library have seen different header files (of the library modules) and all sorts of funny errors occur, usually crashing the code.</p>\n\n<p>I wonder whether there is a simple way to detect this at run time (and produce a useful error message). Of course, I can try to keep the version of the library and compare that from the header files with that from the library -- but how to keep such a version automatically? (I want to minimize human intervention to avoid mistakes and oversights). I currently use svn to version my code, and am running on linux.</p>\n\n<p>What's more, I don't want to be forced (for this to work) to re-compile any executable if a library module has changed.</p>\n\n<p>(note that this <a href=\"https://stackoverflow.com/a/24287561/1023390\">answer</a> doesn't help me.)</p>\n"}, {"tags": ["c++", "string", "sorting"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1452703427, "post_id": 34772259, "comment_id": 57289499, "body": "Welcome to Stack Overflow! Please <b><a href=\"https://stackoverflow.com/posts/34772259/edit\">edit</a></b> your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1452703447, "post_id": 34772259, "comment_id": 57289512, "body": "Have you tried sorting this array of strings?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 4, "creation_date": 1452703590, "post_id": 34772259, "comment_id": 57289625, "body": "<b>would it work in less than 1 second(in the worst case)?</b> This is largely architecture dependent. On an i7, maybe, on an Atmega16, absolutely not."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1452703779, "post_id": 34772259, "comment_id": 57289785, "body": "...&quot;but I had a problem&quot; - we&#39;re not mind readers. If you want help with a problem you need to describe what you&#39;re trying to do, what you actually tried (i.e. provide code), what behaviour you expected, and what behaviour you actually observed. See here: <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask a good question</a>. If you have no interest in solving that problem, I&#39;m unsure what it has to do with the remainder of your question."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1452703880, "post_id": 34772259, "comment_id": 57289872, "body": "You say &quot;I had a problem!&quot; but you never tell us what the problem was."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1452704290, "post_id": 34772259, "comment_id": 57290187, "body": "<code>the total size of them is less than 100,000 characters</code> Is that the sum of all <code>string.size()</code>? I think the most important part is the number of strings in the array - not the size of the individual string (unless the strings typically only differs on the last characters)."}], "answers": [{"tags": [], "owner": {"reputation": 704, "user_id": 2012895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc39548d59c8c0ca58108ac8f3b143ce?s=128&d=identicon&r=PG", "display_name": "allen1", "link": "https://stackoverflow.com/users/2012895/allen1"}, "is_accepted": false, "score": 0, "last_activity_date": 1452703601, "creation_date": 1452703601, "answer_id": 34772334, "question_id": 34772259, "link": "https://stackoverflow.com/questions/34772259/c-sort-function-for-sorting-strings/34772334#34772334", "title": "C++ sort() function for sorting strings", "body": "<p>The type of sorting algorithm depends on the implementation. This Wikipedia page may help you determine the algorithm based on what you are using.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Sort_(C%2B%2B)\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Sort_(C%2B%2B)</a></p>\n"}, {"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1452703721, "post_id": 34772367, "comment_id": 57289727, "body": "Same algorithm: It&#39;s not specified by the standard, but it is very likely to use the same algorithm for all sorting."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1452704517, "post_id": 34772367, "comment_id": 57290355, "body": "@MartinBonner All I know that the standard does not mention anything about requiring the algorithm be same for all types. I share a hunch that having a different algorithm would not be worth it, but I couldn&#39;t say for certain since I haven&#39;t implemented all of the standard libraries."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1452703988, "last_edit_date": 1452703988, "creation_date": 1452703679, "answer_id": 34772367, "question_id": 34772259, "link": "https://stackoverflow.com/questions/34772259/c-sort-function-for-sorting-strings/34772367#34772367", "title": "C++ sort() function for sorting strings", "body": "<blockquote>\n  <p>Does this function use the same algorithm for sorting numbers array and strings array?</p>\n</blockquote>\n\n<p>It might or it might not. That is not specified by the standard.</p>\n\n<blockquote>\n  <p>And if we use it to sort an array of strings which the total size of them is less than 100,000 characters, would it work in less than 1 second(in the worst case)?</p>\n</blockquote>\n\n<p>It might or it might not. It depends on the machine you're running the program on. Even if it will work in less than 1 second in worst case on a particular machine, it would be difficult to prove. But you can get a decent estimation by measuring. A measurement only applies to the machine it was performed, of course.</p>\n"}], "owner": {"reputation": 63, "user_id": 5785525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22b791d8e86a3b454fcf5ee2ebf17eb?s=128&d=identicon&r=PG&f=1", "display_name": "Harace", "link": "https://stackoverflow.com/users/5785525/harace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "closed_date": 1452778227, "answer_count": 2, "score": -5, "last_activity_date": 1452703988, "creation_date": 1452703376, "question_id": 34772259, "link": "https://stackoverflow.com/questions/34772259/c-sort-function-for-sorting-strings", "closed_reason": "Needs details or clarity", "title": "C++ sort() function for sorting strings", "body": "<p><br>\nSome days ago I wanted to use c++ <code>sort()</code> function to sort an array of strings which the total size, but I had a problem!<br>\nDoes this function use the same algorithm for sorting numbers array and strings array?\nAnd if we use it to sort an array of strings which the total size of them is less than 100,000 characters, would it work in less than 1 second(in the worst case)?</p>\n"}, {"tags": ["c++", "c++11", "c++14", "move-semantics"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1452703513, "post_id": 34772219, "comment_id": 57289569, "body": "<code>unique_lock</code> maybe? <code>future</code>, <code>promise</code>..."}, {"owner": {"reputation": 11326, "user_id": 2328763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/849491de0be9b3cdf39c96b4c6b32e2b?s=128&d=identicon&r=PG", "display_name": "Alper", "link": "https://stackoverflow.com/users/2328763/alper"}, "edited": false, "score": 0, "creation_date": 1452703701, "post_id": 34772219, "comment_id": 57289709, "body": "<code>std::thread</code> sets other to a default constructed state."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1452711647, "post_id": 34772949, "comment_id": 57294889, "body": "Poor <code>basic_string</code>, not considered a container.  <i>sniff</i>."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1452728817, "post_id": 34772949, "comment_id": 57303440, "body": "I mentioned <code>basic_string</code> separately since there exists an explicit statement for it, but not for other containers (/cc @T.C. is that right?)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1452742742, "post_id": 34772949, "comment_id": 57307387, "body": "Right. The container requirements tables don&#39;t say anything about the moved-from object, so the default in [lib.types.movedfrom] applies."}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": false, "score": 10, "last_activity_date": 1452705305, "creation_date": 1452705305, "answer_id": 34772949, "question_id": 34772219, "link": "https://stackoverflow.com/questions/34772219/which-std-types-are-guaranteed-to-be-empty-null-after-being-used-as-arg-in-move/34772949#34772949", "title": "Which std types are guaranteed to be empty/null after being used as arg in move constructor", "body": "<p>Types leaving moved-from objects in \"empty\" state are smart pointers, locks (<a href=\"http://eel.is/c++draft/thread.lock.unique.cons#21\">[thread.lock.unique.cons]/21</a>, <a href=\"http://eel.is/c++draft/thread.lock.shared.cons#21\">[thread.lock.shared.cons]/21</a>), file streams (<a href=\"http://eel.is/c++draft/filebuf.cons#4\">[filebuf.cons]/(4.2)</a>), futures (<a href=\"http://eel.is/c++draft/futures.unique_future#8\">[futures.unique_future]/(8.2)</a>, <a href=\"http://eel.is/c++draft/futures.shared_future#10\">[futures.shared_future]/10</a>), promises (<a href=\"http://eel.is/c++draft/futures.promise#6\">[futures.promise]/6</a>), packaged tasks (<a href=\"http://eel.is/c++draft/futures.task#futures.task.members-7\">[futures.task]/7</a>), threads (<a href=\"http://eel.is/c++draft/thread.thread.constr#10\">[thread.thread.constr]/10</a>), \u2026 </p>\n\n<p>By contrast, templates leaving the moved-from objects with unspecified values are <code>function</code> (<a href=\"http://eel.is/c++draft/func.wrap.func.con#6\">[func.wrap.func.con]/6</a>), <code>basic_regex</code> (<a href=\"http://eel.is/c++draft/re.regex.construct#13\">[re.regex.construct]/13</a>), <code>basic_string</code> (<a href=\"http://eel.is/c++draft/string.cons#2\">[string.cons]/2</a>), containers\u2026</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1452815455, "post_id": 34778171, "comment_id": 57347146, "body": "<code>shared_lock</code> is not really shared reference semantics. It&#39;s a lot more like <code>unique_lock</code> than <code>shared_ptr</code>."}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1452943036, "post_id": 34778171, "comment_id": 57394434, "body": "@T.C. Good catch. Fixed it."}], "tags": [], "owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "is_accepted": true, "score": 8, "last_activity_date": 1452943957, "last_edit_date": 1452943957, "creation_date": 1452723580, "answer_id": 34778171, "question_id": 34772219, "link": "https://stackoverflow.com/questions/34772219/which-std-types-are-guaranteed-to-be-empty-null-after-being-used-as-arg-in-move/34778171#34778171", "title": "Which std types are guaranteed to be empty/null after being used as arg in move constructor", "body": "<h1>A rule of thumb</h1>\n\n<p>As a rule of thumb: <strong>The move-only types or types with shared reference semantics leave their moved-from object in an empty state.</strong> All other types leave unspecified values.</p>\n\n<h1>Move-only types</h1>\n\n<p>Move-only types (which leave moved-from objects in an empty state) are <code>std::unique_lock</code>, <code>std::thread</code>, <code>std::promise</code>, <code>std::packaged_task</code>, <code>std::future</code>, <code>basic_filebuf</code>, <code>std::basic_ifstream</code>, <code>std::basic_ofstream</code>, <code>std::basic_fstream</code>, <code>std::shared_lock</code> and <code>std::unique_ptr</code>. </p>\n\n<h1>Shared reference semantics</h1>\n\n<p>Types with shared reference semantics are <code>std::shared_future</code>, and of course <code>std::shared_ptr</code> and <code>std::weak_ptr</code>. These leave their moved-from objects also in an empty state.</p>\n\n<h1>A notable exception</h1>\n\n<p>As I went through the standard library, I found <code>std::stringstream</code> and its input-only and output-only siblings (<code>std::istringstream</code> and <code>std::ostringstream</code>) as a notable exception. These classes are move-only, but nothing is being told about the moved-from object upon move-construction. Therefore, the valid-but-unspecified-rule applies. As you see, it's just a rule of thumb, not 100% always correct. </p>\n"}], "owner": {"reputation": 23269, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 3, "accepted_answer_id": 34778171, "answer_count": 2, "score": 9, "last_activity_date": 1452943957, "creation_date": 1452703252, "last_edit_date": 1452703602, "question_id": 34772219, "link": "https://stackoverflow.com/questions/34772219/which-std-types-are-guaranteed-to-be-empty-null-after-being-used-as-arg-in-move", "title": "Which std types are guaranteed to be empty/null after being used as arg in move constructor", "body": "<p>I know <code>shared_ptr</code>, <code>unique_ptr</code>, <code>weak_ptr</code> are guaranteed to be empty after used as RVR argument in the constructor of the same type, but I wonder does standard specifies this for some other <code>std::</code> types beside the ones I mentioned. </p>\n\n<p>Please note that I know that elements after move are left in valid but <em>unspecified</em> state, I am here interested for which types state is specified. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1452703569, "post_id": 34772201, "comment_id": 57289607, "body": "Why awkward? Just create an object that calls the functor in its destructor and pack it in a shared pointer."}], "owner": {"reputation": 173, "user_id": 3825739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d69f2622ba93367618e9db169f3010c?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Khvostikov", "link": "https://stackoverflow.com/users/3825739/roman-khvostikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452703204, "creation_date": 1452703204, "question_id": 34772201, "link": "https://stackoverflow.com/questions/34772201/common-implementaion-for-scoped-procedure", "title": "Common implementaion for scoped procedure", "body": "<p>I am interested in common practice/implementation of a pattern which I would call \"scoped procedure\". I even don't know how to name it correctly :)</p>\n\n<p>The thing I am talking about is close to <code>boost::scoped_exit</code> and <code>boost::scoped_connection</code>: a class, which</p>\n\n<ul>\n<li>holds user-provided functor,</li>\n<li>shares the functor on object copying,</li>\n<li>have a counter to count all objects sharing given functor,</li>\n<li>calls the fuctor when the counter becomes 0.</li>\n</ul>\n\n<p>The candidate I can think about is <code>boost::shared_ptr</code>, but it seems to me a bit awkward to store there some fake pointer.</p>\n\n<p>Can you give any suggestion/best practice for this?</p>\n\n<p>The case I want to apply it to is as follows. There is some registry class which stores a collection of records for associated objects of some other class. When an object is \"registered\" in the collection it receives a registration ID. When the object wants to unregister it just \"releases the ID\" (by going out of scope or calling a method similar to <code>boost::scoped_connection::disconnect()</code>). On release a user-provided procedure would be called to remove a corresponding record from the collection.</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 4259, "user_id": 2348315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IIlRD.jpg?s=128&g=1", "display_name": "PeterSW", "link": "https://stackoverflow.com/users/2348315/petersw"}, "edited": false, "score": 0, "creation_date": 1452703354, "post_id": 34772173, "comment_id": 57289437, "body": "<code>Bar::Bar() : foo(1, 2) {}</code>"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1452704184, "post_id": 34772173, "comment_id": 57290111, "body": "Look specifically at the part right after the word &quot;Furthermore&quot; in the accepted answer to the question LogicStuff suggested this question duplicates."}, {"owner": {"reputation": 35, "user_id": 5785444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223386f8ed85afca131d253a47b414c2?s=128&d=identicon&r=PG&f=1", "display_name": "LukeImYourFather", "link": "https://stackoverflow.com/users/5785444/lukeimyourfather"}, "edited": false, "score": 0, "creation_date": 1452714320, "post_id": 34772173, "comment_id": 57296526, "body": "I have some more extra questions, that&#39;s why I didn&#39;t accepted any answer right now"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5785444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223386f8ed85afca131d253a47b414c2?s=128&d=identicon&r=PG&f=1", "display_name": "LukeImYourFather", "link": "https://stackoverflow.com/users/5785444/lukeimyourfather"}, "edited": false, "score": 0, "creation_date": 1452711707, "post_id": 34772255, "comment_id": 57294910, "body": "Thanks for your fast answer. What if I have a Foo foo[3]; ? Would it be :       Bar(int a = 0, int b = 0) : foo[0](a, b), foo[1](a, b), foo[2](a, b) {}"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 35, "user_id": 5785444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223386f8ed85afca131d253a47b414c2?s=128&d=identicon&r=PG&f=1", "display_name": "LukeImYourFather", "link": "https://stackoverflow.com/users/5785444/lukeimyourfather"}, "edited": false, "score": 0, "creation_date": 1452712744, "post_id": 34772255, "comment_id": 57295549, "body": "@LukeImYourFather see this example: <a href=\"http://coliru.stacked-crooked.com/a/d867a927236d786a\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/d867a927236d786a</a>"}, {"owner": {"reputation": 35, "user_id": 5785444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223386f8ed85afca131d253a47b414c2?s=128&d=identicon&r=PG&f=1", "display_name": "LukeImYourFather", "link": "https://stackoverflow.com/users/5785444/lukeimyourfather"}, "edited": false, "score": 0, "creation_date": 1452714211, "post_id": 34772255, "comment_id": 57296459, "body": "I get then error &quot;cannot specify explicit initializer for arrays&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 35, "user_id": 5785444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223386f8ed85afca131d253a47b414c2?s=128&d=identicon&r=PG&f=1", "display_name": "LukeImYourFather", "link": "https://stackoverflow.com/users/5785444/lukeimyourfather"}, "edited": false, "score": 0, "creation_date": 1452714259, "post_id": 34772255, "comment_id": 57296494, "body": "@LukeImYourFather You need to compile with C++11 or above for it to work."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1452703358, "creation_date": 1452703358, "answer_id": 34772255, "question_id": 34772173, "link": "https://stackoverflow.com/questions/34772173/with-oop-when-you-have-an-instance-of-a-class-as-attribute-of-another-class-ho/34772255#34772255", "title": "With OOP, when you have an instance of a class as attribute of another class, how is it possible to instantiate it only in the 2nd class?", "body": "<p>Since <code>Foo</code> needs to be constructed from 2 parameters you are either going to have to have the user pass them to <code>Bar</code>s constructor and create it with them or just use some hard coded values.  I would suggest getting them from the user but also have a default value for the parameters so it acts as a default constructor.</p>\n\n<pre><code>class Bar\n{\nprivate:\n    Foo foo;\n\npublic:\n    Bar(int a = 0, int b = 0) : foo(a, b) {}\n};\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5785444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223386f8ed85afca131d253a47b414c2?s=128&d=identicon&r=PG&f=1", "display_name": "LukeImYourFather", "link": "https://stackoverflow.com/users/5785444/lukeimyourfather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "closed_date": 1453055116, "accepted_answer_id": 34772255, "answer_count": 1, "score": -3, "last_activity_date": 1501298156, "creation_date": 1452703157, "last_edit_date": 1501298156, "question_id": 34772173, "link": "https://stackoverflow.com/questions/34772173/with-oop-when-you-have-an-instance-of-a-class-as-attribute-of-another-class-ho", "closed_reason": "Duplicate", "title": "With OOP, when you have an instance of a class as attribute of another class, how is it possible to instantiate it only in the 2nd class?", "body": "<p>Their is something I don't understand with OOP : when you have an instance of a class as attribute of another class, how is it possible to instantiate it only in the constructor of the 2nd class?</p>\n\n<p>For example in this example I would like to instantiate the class Foo in Bar's constructor. How should I modify my code so it work?</p>\n\n<p>Foo.h</p>\n\n<pre><code>class Foo\n{\nprivate:\n    int x, y;\n\npublic:\n    Foo(int a, int b);\n};\n</code></pre>\n\n<p>Foo.cpp</p>\n\n<pre><code>#include \"Foo.h\"\n\nFoo::Foo(int a, int b)\n{\n    x = a;\n    y = b;\n}\n</code></pre>\n\n<p>Bar.h</p>\n\n<pre><code>#include \"Foo.h\"\n\nclass Bar\n{\nprivate:\n    Foo foo;\n\npublic:\n    Bar();\n};\n</code></pre>\n\n<p>Bar.cpp</p>\n\n<pre><code>#include \"Bar.h\"\n\nBar::Bar()\n{\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 1, "user_id": 5785350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1738341e889d7449218e04fd605257de?s=128&d=identicon&r=PG&f=1", "display_name": "Kinlaw", "link": "https://stackoverflow.com/users/5785350/kinlaw"}, "edited": false, "score": 0, "creation_date": 1452703497, "post_id": 34771941, "comment_id": 57289548, "body": "I also want to mention that I realize Qt supplies their own button templates, but theirs does not cover all the different possibilities for a buttons that I need and this is why I am making my own."}, {"owner": {"reputation": 7002, "user_id": 2538363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a17eb0f935aaff6b21269f57ccdc1bd?s=128&d=identicon&r=PG", "display_name": "BaCaRoZzo", "link": "https://stackoverflow.com/users/2538363/bacarozzo"}, "edited": false, "score": 0, "creation_date": 1452703757, "post_id": 34771941, "comment_id": 57289758, "body": "Take a look at <a href=\"http://doc.qt.io/qt-5/qtqml-syntax-signals.html#adding-signals-to-custom-qml-types\" rel=\"nofollow noreferrer\">this</a>. That&#39;s the usual way to go."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5785350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1738341e889d7449218e04fd605257de?s=128&d=identicon&r=PG&f=1", "display_name": "Kinlaw", "link": "https://stackoverflow.com/users/5785350/kinlaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1452703433, "creation_date": 1452703433, "answer_id": 34772281, "question_id": 34771941, "link": "https://stackoverflow.com/questions/34771941/qt-passing-a-slot-to-call-into-a-qml-template/34772281#34772281", "title": "Qt: Passing a slot to call into a QML Template", "body": "<p>Update: I got it working by doing this:\nReplace:</p>\n\n<pre><code>property variant onClickedAction\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>property var onClickedAction\n</code></pre>\n\n<p>And replace:</p>\n\n<pre><code>onClickedAction: ExampleSlot()\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>onClickedAction: ExampleSlot\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4799, "user_id": 6842725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d760417ddd74d615520fcdabd6c42ef?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Krammer", "link": "https://stackoverflow.com/users/6842725/kevin-krammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1475421605, "creation_date": 1475421605, "answer_id": 39818463, "question_id": 34771941, "link": "https://stackoverflow.com/questions/34771941/qt-passing-a-slot-to-call-into-a-qml-template/39818463#39818463", "title": "Qt: Passing a slot to call into a QML Template", "body": "<p>While this is certainly possible why not just \"forward\" the signal and handle it like at the place of usage?</p>\n\n<p>Basically just add a signal to your outermost item</p>\n\n<pre><code>Item {\n    id: button\n    signal clicked()\n\n    Image {\n        MouseArea {\n            onClicked: button.clicked()\n        }\n    }\n}\n</code></pre>\n\n<p>And then you use it like any built-in signal</p>\n\n<pre><code>ExampleButtonTemplate {\n    onClicked: exampleSlot()\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5785350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1738341e889d7449218e04fd605257de?s=128&d=identicon&r=PG&f=1", "display_name": "Kinlaw", "link": "https://stackoverflow.com/users/5785350/kinlaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475421605, "creation_date": 1452702547, "question_id": 34771941, "link": "https://stackoverflow.com/questions/34771941/qt-passing-a-slot-to-call-into-a-qml-template", "title": "Qt: Passing a slot to call into a QML Template", "body": "<p>I'm trying to do something in Qt, and I'm not sure that it's possible. I can't seem to find any documentation about it, or anyone else trying to do it online, but I hate to give up unless someone can confirm that it isn't possible.</p>\n\n<p>What I'm doing is creating a QML template that will be used for every button in my application. The QML Item has several properties and property aliases that are passed in when another QML file uses the template, that define how the button works. What I want to do is pass into the template a slot to call when the button is pressed.</p>\n\n<p>Here's a simple example of a template and how it might work:</p>\n\n<pre><code>Item {\n    property variant onClickedAction\n    property alias buttonImageSource: buttonImage.source\n\n    Image {\n        id: buttonImage\n        MouseArea {\n            anchors.fill: parent\n            onClicked: onClickedAction()\n        }\n    }\n}\n</code></pre>\n\n<p>And here's an example of how another QML file might use that button template (which is called ExampleButtonTemplate.qml):</p>\n\n<pre><code>ExampleButtonTemplate {\n    onClickedAction: ExampleSlot()\n    buttonImageSource: \"ExampleImage.png\"\n}\n</code></pre>\n\n<p>However, when I try it this way, it just calls the slot as soon as it loads the page that uses the template, instead of when the button is pressed. There must be some way that I can pass a function that I want to call later from one QML file to another through the properties. If anyone can explain a way to do this or confirm that it isn't possible to pass slots around like this, it would be a big help.</p>\n"}, {"tags": ["c++", "sockets", "tcp", "bind"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1452703457, "post_id": 34771738, "comment_id": 57289524, "body": "The &quot;certain time&quot; is discussed here: <a href=\"http://stackoverflow.com/questions/548879/releasing-bound-ports-on-process-exit\" title=\"releasing bound ports on process exit\">stackoverflow.com/questions/548879/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1452702226, "creation_date": 1452702226, "answer_id": 34771832, "question_id": 34771738, "link": "https://stackoverflow.com/questions/34771738/c-tcp-server-bind-function-failed-errno-98-if-i-do-not-wait-enough-time/34771832#34771832", "title": "c++ : TCP Server &quot;bind&quot; function failed (errno 98) if I do not wait enough time between two consecutive app launch", "body": "<p>Try <code>setsockopt(SO_REUSEADDR)</code>, this should help.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5489492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b73d9d753fbd271270da76ed8ab8b65?s=128&d=identicon&r=PG&f=1", "display_name": "Daemon Pulsar", "link": "https://stackoverflow.com/users/5489492/daemon-pulsar"}, "edited": false, "score": 0, "creation_date": 1452774845, "post_id": 34772097, "comment_id": 57322644, "body": "Thanks a lot ! I read the doc of &quot;bind&quot;, but I did not think about the <code>man socket</code> ... Problem solved."}], "tags": [], "owner": {"reputation": 134, "user_id": 2788511, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/350dfa174194022e9d652afb26556371?s=128&d=identicon&r=PG&f=1", "display_name": "sean", "link": "https://stackoverflow.com/users/2788511/sean"}, "is_accepted": true, "score": 3, "last_activity_date": 1452702936, "creation_date": 1452702936, "answer_id": 34772097, "question_id": 34771738, "link": "https://stackoverflow.com/questions/34771738/c-tcp-server-bind-function-failed-errno-98-if-i-do-not-wait-enough-time/34772097#34772097", "title": "c++ : TCP Server &quot;bind&quot; function failed (errno 98) if I do not wait enough time between two consecutive app launch", "body": "<p>You may need to use both SO_REUSEADDR and SO_REUSEPORT. You can further go through the documentation of Socket: <a href=\"http://man7.org/linux/man-pages/man7/socket.7.html\" rel=\"nofollow\">Socket Docs</a></p>\n\n<pre><code>const int trueFlag = 1;\nif (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;trueFlag, sizeof(int)) &lt; 0)\nerror(\"Failure\");\n</code></pre>\n\n<p>You can use reuse Port in similar way. Hope this helps</p>\n"}], "owner": {"reputation": 13, "user_id": 5489492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b73d9d753fbd271270da76ed8ab8b65?s=128&d=identicon&r=PG&f=1", "display_name": "Daemon Pulsar", "link": "https://stackoverflow.com/users/5489492/daemon-pulsar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5538, "favorite_count": 0, "closed_date": 1452774899, "accepted_answer_id": 34772097, "answer_count": 2, "score": 0, "last_activity_date": 1452702936, "creation_date": 1452701978, "last_edit_date": 1495540853, "question_id": 34771738, "link": "https://stackoverflow.com/questions/34771738/c-tcp-server-bind-function-failed-errno-98-if-i-do-not-wait-enough-time", "closed_reason": "Duplicate", "title": "c++ : TCP Server &quot;bind&quot; function failed (errno 98) if I do not wait enough time between two consecutive app launch", "body": "<p>discovering TCP socket, I made a very simple test based on my understanding of the subject and some tuto found on the net</p>\n\n<p>Server :</p>\n\n<pre><code>void Server(void)\n{\n  int localSocket;\n  int distantSocket;\n\n  sockaddr_in serverInfo;\n  sockaddr_in clientInfo;\n\n  int sizeOfSocketInfo = sizeof(struct sockaddr_in);\n\n  /* Open Socket */\n  std::cout &lt;&lt; \"open socket\" &lt;&lt; std::endl;\n\n  localSocket = socket(AF_INET, SOCK_STREAM, 0);\n  if (localSocket == -1)\n  {\n    std::cout &lt;&lt; \"open failed, error - \" &lt;&lt; (int)errno &lt;&lt; std::endl;\n    exit(errno);\n  }\n\n  /* Configure server */\n  serverInfo.sin_addr.s_addr = INADDR_ANY;\n  serverInfo.sin_family = AF_INET;\n  serverInfo.sin_port = htons(61001);\n\n  /* Bind Socket */\n  std::cout &lt;&lt; \"bind socket\" &lt;&lt; std::endl;\n\n  if (bind (localSocket, (sockaddr *) &amp;serverInfo, sizeof(serverInfo)) == -1)\n  {\n    std::cout &lt;&lt; \"bind failed, error - \" &lt;&lt; (int)errno &lt;&lt; std::endl;\n    exit(errno);\n  }\n\n  /* Wait for client */\n  std::cout &lt;&lt; \"Wait for client ...\" &lt;&lt; std::endl;\n\n  listen(localSocket, 1);\n  distantSocket = accept(localSocket, (sockaddr *)&amp;clientInfo, (socklen_t*)&amp;sizeOfSocketInfo);\n\n  std::cout &lt;&lt; \"client connected  - \" &lt;&lt; inet_ntoa(clientInfo.sin_addr) &lt;&lt; std::endl;\n\n  /* Close Socket */\n  close (localSocket);\n  close (distantSocket);\n\n  std::cout &lt;&lt; \"socket closed\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>and client : </p>\n\n<pre><code>void Client(void)\n{\n  int localSocket;\n  sockaddr_in clientInfo;\n\n  /* Open Socket */\n  std::cout &lt;&lt; \"open socket\" &lt;&lt; std::endl;\n\n  localSocket = socket(AF_INET, SOCK_STREAM, 0);\n  if (localSocket == -1)\n  {\n    std::cout &lt;&lt; \"open failed, error - \" &lt;&lt; (int)errno &lt;&lt; std::endl;\n    exit(errno);\n  }\n\n  clientInfo.sin_family = AF_INET;\n  clientInfo.sin_port = htons(61001);\n  clientInfo.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n\n  /* Open Socket */\n  std::cout &lt;&lt; \"connect to server\" &lt;&lt; std::endl;\n  if (connect(localSocket, (sockaddr*)&amp;clientInfo, sizeof(clientInfo)) &lt; (int)0)\n  {\n    std::cout &lt;&lt; \"connect failed, error - \" &lt;&lt; (int)errno &lt;&lt; std::endl;\n    exit(errno);\n  }\n\n  std::cout &lt;&lt; \"connected !\" &lt;&lt; std::endl;\n\n  close(localSocket);\n}\n</code></pre>\n\n<p>When I launch the server in one terminal and the client in another one, it seems to be ok :</p>\n\n<p>server side : </p>\n\n<pre><code>&gt; ./tcpTest -s\nopen socket\nbind socket\nWait for client ...\nclient connected  - 127.0.0.1\nsocket closed\n&gt; \n</code></pre>\n\n<p>and client side : </p>\n\n<pre><code>&gt; ./tcpTest -c\nopen socket\nconnect to server\nconnected !\n&gt;\n</code></pre>\n\n<p>But, if, just after this first try, I launch the server again ...</p>\n\n<pre><code>&gt; ./tcpTest -s\nopen socket\nbind socket\nbind failed, error - 98\n&gt;\n</code></pre>\n\n<p>And I have to wait a \"certain time\", I don't know exactly how long, one minute maybe, to have the server working again.</p>\n\n<p>I can't figure out what's happening, looking to open socket with <code>sockstat</code> does not show anything strange (I only see mozilla socket).</p>\n\n<p>I found this guy having the same problem but in Ruby \n<a href=\"https://stackoverflow.com/questions/33718522/basic-ruby-tcp-server-demo-fails-on-startup-bind-address-already-in-use-err\">basic Ruby TCP server demo fails on startup: `bind&#39;: Address already in use, Errno::EADDRINUSE</a></p>\n\n<p>If this is really the same problem, how can I apply the same solution in C++ ? Or do you have any idea ?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "c", "makefile", "mosek"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1452705084, "post_id": 34771607, "comment_id": 57290748, "body": "Have you tried to find out <i>which</i> library is causing this? (Binary search through the list, etc.)"}, {"owner": {"reputation": 183, "user_id": 4926404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02495b1c89744e3ad26cce0fa7519b8?s=128&d=identicon&r=PG", "display_name": "Mohammad Fawaz", "link": "https://stackoverflow.com/users/4926404/mohammad-fawaz"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1452706245, "post_id": 34771607, "comment_id": 57291496, "body": "@EtanReisner It seems that the problem is with umfpack and the libraries that come after it, but not in any particular one. I had to remove all of them for it to work. Even letting &quot;$(LIBS) = -umfpack &quot; only didn&#39;t work."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1452706621, "post_id": 34771607, "comment_id": 57291719, "body": "So using boost is ok but using any of the libraries from umfpack to the end (even one at a time) breaks this? Or does only umfpack break it?"}, {"owner": {"reputation": 183, "user_id": 4926404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02495b1c89744e3ad26cce0fa7519b8?s=128&d=identicon&r=PG", "display_name": "Mohammad Fawaz", "link": "https://stackoverflow.com/users/4926404/mohammad-fawaz"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1452707198, "post_id": 34771607, "comment_id": 57292113, "body": "@EtanReisner So I tried adding the libraries separately, one at a time, and it seems that the problematic ones are umfpack, lapack, and blas."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1452707418, "post_id": 34771607, "comment_id": 57292234, "body": "It might make sense to see if those libraries have communities you can ask about this? And or see is MOSEK does. Someone here will likely have ideas about this but whether they see this question or not is the real question. I don&#39;t know anything about any of these pieces so I can&#39;t really help anymore, sorry."}, {"owner": {"reputation": 183, "user_id": 4926404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02495b1c89744e3ad26cce0fa7519b8?s=128&d=identicon&r=PG", "display_name": "Mohammad Fawaz", "link": "https://stackoverflow.com/users/4926404/mohammad-fawaz"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1452713862, "post_id": 34771607, "comment_id": 57296242, "body": "@EtanReisner Thank you anyways."}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 4926404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02495b1c89744e3ad26cce0fa7519b8?s=128&d=identicon&r=PG", "display_name": "Mohammad Fawaz", "link": "https://stackoverflow.com/users/4926404/mohammad-fawaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1461011739, "creation_date": 1461011739, "answer_id": 36703810, "question_id": 34771607, "link": "https://stackoverflow.com/questions/34771607/libraries-affecting-other-libraries-in-a-makefile/36703810#36703810", "title": "Libraries affecting other libraries in a Makefile", "body": "<p>It turns out that the problem was with BLAS. Some of the libraries from SuiteSparse require BLAS and the BLAS libraries on the server messes up with OpenMP, which is apparently required by MOSEK to parallelize its code. In any case, the solution was to use OpenBLAS, compiled with the flag \"USE_OPENMP=1\".</p>\n"}], "owner": {"reputation": 183, "user_id": 4926404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02495b1c89744e3ad26cce0fa7519b8?s=128&d=identicon&r=PG", "display_name": "Mohammad Fawaz", "link": "https://stackoverflow.com/users/4926404/mohammad-fawaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1461011739, "creation_date": 1452701664, "question_id": 34771607, "link": "https://stackoverflow.com/questions/34771607/libraries-affecting-other-libraries-in-a-makefile", "title": "Libraries affecting other libraries in a Makefile", "body": "<p>I am facing a weird problem in the following Makefile:</p>\n\n<pre><code># Mosek path\nMOSEKPATH = /autofs/fs1.ece/fs1.eecg.najm/b/b1/power_grid_code/mosek\n\n# Include paths\nINCPATHS = -I$(MOSEKPATH)/7/tools/platform/linux64x86/h -I/usr/include/suitesparse -I../include\n\n# Libraries paths\nLIBPATHS = -L$(MOSEKPATH)/7/tools/platform/linux64x86/bin\n\n# Link libraries\nLIBS = -lboost_timer-mt -lboost_system -lumfpack -lamd -lcolamd -lcholmod -lccolamd -lcamd -lbtf -lcsparse -lcxsparse -lklu -lldl -lspqr -llapack -lblas\nMOSEKLIB = -lmosek64\nLDOPT = -Wl,-rpath-link,$(MOSEKPATH)/7/tools/platform/linux64x86/bin -Wl,-rpath,'/autofs/fs1.ece/fs1.eecg.najm/b/b1/power_grid_code/mosek/7/tools/platform/linux64x86/bin' -pthread -lc -lm\n\n# Specify compiler\nCC = g++-4.7 -m64\n\n# Compiler flags\nFLAGS = -O3 -Wall -g\n\nlo1: lo1.c\n    $(CC) $(FLAGS) -c $(INCPATHS)          -o lo1.o lo1.c\n    $(CC) $(FLAGS) $(LIBPATHS) lo1.o $(LIBS) $(MOSEKLIB) $(LDOPT) -o lo1 \n\nclean:\n    rm -f lo1 *.o \n</code></pre>\n\n<p>I got most of the content from the examples provided by <a href=\"https://mosek.com/\">MOSEK</a>. The Makefile works fine and the results are as expected. The issue is that, the version of MOSEK that I'm using is multi-threaded (MOSEK 7.1). MOSEK is supposed to detect the number of cores on the machine, and use all of them. When I use the Makefile as is, MOSEK only detects one core, and uses only one thread:</p>\n\n<pre><code>Computer\n  Platform               : Linux/64-X86    \n  Cores                  : 1              \n</code></pre>\n\n<p>However, when i compile without $(LIBS), MOSEK does detect 4 cores:</p>\n\n<pre><code>Computer\n  Platform               : Linux/64-X86    \n  Cores                  : 4               \n</code></pre>\n\n<p>The code that I have in lo1.c does not use $(LIBS) for now, but I will need those libraries later on, in lo1.c. How come those libraries are affecting the behavior of MOSEK?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "serialization", "cereal"], "comments": [{"owner": {"reputation": 1572, "user_id": 710791, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd5fbc434a719276d6561f6a8f6d1b6a?s=128&d=identicon&r=PG", "display_name": "Azoth", "link": "https://stackoverflow.com/users/710791/azoth"}, "edited": false, "score": 3, "creation_date": 1454113984, "post_id": 34771226, "comment_id": 57914713, "body": "To see where the problem is coming from, try serializing the class members  one at a time. You can then debug that individual class with XML serialization."}, {"owner": {"reputation": 5102, "user_id": 1054322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IhsyB.jpg?s=128&g=1", "display_name": "MatrixManAtYrService", "link": "https://stackoverflow.com/users/1054322/matrixmanatyrservice"}, "edited": false, "score": 0, "creation_date": 1483572525, "post_id": 34771226, "comment_id": 70155916, "body": "Does the compiler create any additional output around this error?  I have found I get this error when I forget to add a header that includes my Load/Save functions, and typically the place I need to add that header is indicated at the end of a long chain of &quot;see reference to:&quot;.  In visual studio, this appears in the output window."}], "owner": {"reputation": 368, "user_id": 4772950, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-HWVWXiRpeck/AAAAAAAAAAI/AAAAAAAAADo/EjTJEBINA3E/photo.jpg?sz=128", "display_name": "AKludges", "link": "https://stackoverflow.com/users/4772950/akludges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 752, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1452700564, "creation_date": 1452700564, "question_id": 34771226, "link": "https://stackoverflow.com/questions/34771226/after-changing-to-xml-cereal-could-not-find-any-output-serialization-functions", "title": "after changing to XML &quot;cereal could not find any output serialization functions&quot;", "body": "<p>I want to serialize a Reconstruction class in a library called theia. The class Reconstruction does have a serialize function:</p>\n\n<pre><code>friend class cereal::access;\n  template &lt;class Archive&gt;\n  void serialize(Archive&amp; ar) {  // NOLINT\n    ar(next_track_id_,\n       next_view_id_,\n       view_name_to_id_,\n       views_,\n       tracks_);\n  }\n</code></pre>\n\n<p>The serialization already in place works fine like this:</p>\n\n<pre><code>Reconstruction estimated_reconstruction;\n\n[...]\nstd::ofstream output_writer(output_file, std::ios::out | std::ios::binary);\ncereal::PortableBinaryOutputArchive output_archive(output_writer);\n output_archive(estimated_reconstruction);\n</code></pre>\n\n<p>But when I change it to an XMLOutputArchive (adding the necessary #include) it doesn't work anymore!</p>\n\n<pre><code>Reconstruction estimated_reconstruction;\n[...]\n\nstd::ofstream output_writer(output_file, std::ios::out);\ncereal::XMLOutputArchive output_archive(output_writer);\noutput_archive(estimated_reconstruction);\n</code></pre>\n\n<p>The error is the following one:</p>\n\n<p>[...] </p>\n\n<pre><code>error: static assertion failed: cereal could not find any output serialization functions for the provided type and archive combination.\n\n Types must either have a serialize function, load/save pair, or load_minimal/save_minimal pair (you may not mix these).\n Serialize functions generally have the following signature:\n\n template&lt;class Archive&gt;\n   void serialize(Archive &amp; ar)\n   {\n     ar( member1, member2, member3 );\n   }\n</code></pre>\n"}, {"tags": ["c++", "boost", "cmake"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1452701073, "post_id": 34771101, "comment_id": 57287639, "body": "Are you giving hints? Then you have to drop the last boost and only pass the path until the /src."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1452701630, "post_id": 34771101, "comment_id": 57288057, "body": "boost-1.60 is too new. I had to add set(Boost_ADDITIONAL_VERSIONS &quot;1.60&quot; &quot;1.60.0&quot;) before the find package to find boost even with the latest cmake-3.4.1."}], "answers": [{"comments": [{"owner": {"reputation": 1942, "user_id": 4986615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QG9iP.jpg?s=128&g=1", "display_name": "guhur", "link": "https://stackoverflow.com/users/4986615/guhur"}, "edited": false, "score": 0, "creation_date": 1452705233, "post_id": 34772747, "comment_id": 57290839, "body": "actually it seems my installation of boost has failed and that the folder /boost/boost has been moved to another location. now it seems to work but i havent tested yet my program"}], "tags": [], "owner": {"reputation": 2794, "user_id": 5836291, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1327347077/picture?type=large", "display_name": "Vtik", "link": "https://stackoverflow.com/users/5836291/vtik"}, "is_accepted": true, "score": 4, "last_activity_date": 1452704747, "creation_date": 1452704747, "answer_id": 34772747, "question_id": 34771101, "link": "https://stackoverflow.com/questions/34771101/cmake-cant-find-boost-1-60-0-version-hp-not-found/34772747#34772747", "title": "CMake: can&#39;t find boost 1_60_0 (version.hp not found)", "body": "<p>I beleive that you set your env wrong !\ntry to set entry BOOST_INCLUDE_DIR = \"/Users/.../src/boost_1_60_0\"\nIt looks like you are getting it directly to /boost_1_60_0/boost which won't work as your CMAKE will look for the verion.hpp in BOOST_INCLUDE_DIR/boost/ folder.</p>\n\n<p>BTW, are you sure that the version.hpp is not there ? that's strange !</p>\n\n<p>Cheers</p>\n"}], "owner": {"reputation": 1942, "user_id": 4986615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QG9iP.jpg?s=128&g=1", "display_name": "guhur", "link": "https://stackoverflow.com/users/4986615/guhur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3413, "favorite_count": 1, "accepted_answer_id": 34772747, "answer_count": 1, "score": 5, "last_activity_date": 1452705157, "creation_date": 1452700279, "question_id": 34771101, "link": "https://stackoverflow.com/questions/34771101/cmake-cant-find-boost-1-60-0-version-hp-not-found", "title": "CMake: can&#39;t find boost 1_60_0 (version.hp not found)", "body": "<p>I am trying to compile a program using Boost with CMake under Mac OS X.</p>\n\n<p>I have got the following error:</p>\n\n<blockquote>\n  <p>CMake Error at\n  /Applications/CMake.app/Contents/share/cmake-3.4/Modules/FindBoost.cmake:721\n  (file):   file STRINGS file\n  \"/Users/.../src/boost_1_60_0/boost/boost/version.hpp\"   cannot be\n  read. Call Stack (most recent call first):   CMakeLists.txt:44\n  (find_package)</p>\n  \n  <p>Boost version: 0.0.0</p>\n</blockquote>\n\n<p>Indeed, when I go inside boost_1_60_0/boost, there isn't a folder called boost.</p>\n\n<p>Is my FindBoost not up-to-date?</p>\n"}, {"tags": ["c++", "r", "performance", "rcpp", "microbenchmark"], "comments": [{"owner": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 3, "creation_date": 1452700552, "post_id": 34771088, "comment_id": 57287257, "body": "For starters, look at all the stuff that <code>median.default</code> actually does and then try testing against something more fair."}, {"owner": {"reputation": 244, "user_id": 3383318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/190ca65f724c74b976293b6c49ed2fb7?s=128&d=identicon&r=PG", "display_name": "Ruben", "link": "https://stackoverflow.com/users/3383318/ruben"}, "reply_to_user": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 0, "creation_date": 1452701497, "post_id": 34771088, "comment_id": 57287964, "body": "Ok, so I guess that it is because of all the things around, but actually computing the median takes no time at all."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1452702681, "post_id": 34771088, "comment_id": 57288888, "body": "As an aside, sorting the vector is overkill.  You don&#39;t care about the ordering of the first n/2 elements -- you just care about what the n/2th element is.  The algorithm <code>std::nth_element</code> will do this faster than sorting.  It can be implemented reasonably easily and efficiently using recursive median-of-median-of-5 and partition, with a short-length alternative algorithm, if you want it in r.  Second, use explicit <code>std::sort</code> on <code>std::vector</code> iterators (there is no guarantee they are defined in <code>namespace std</code>, which your code relies upon)."}, {"owner": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1452703022, "post_id": 34771088, "comment_id": 57289180, "body": "@Yakk Indeed, note that <code>median.default</code> uses the <code>partial</code> argument for <code>sort</code>, which does something similar to what you&#39;re describing I think."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 0, "creation_date": 1452708003, "post_id": 34771088, "comment_id": 57292597, "body": "@joran it actually does more -- it sorts the first half of the vector.  <code>nth_element</code> only partitions it so that the nth element is at position n, and all elements before are less, and all elements after are more.  You can do this .. faster than a half-sort.  You do <a href=\"https://en.wikipedia.org/wiki/Median_of_medians\" rel=\"nofollow noreferrer\">median of medians</a> to find an almost-median, partition to find out where it is.  Repeat until you find nth."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1452701296, "post_id": 34771464, "comment_id": 57287821, "body": "The C++ code also makes a copy so the copy time should be about the same."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1452701760, "post_id": 34771464, "comment_id": 57288164, "body": "He passes the vector by <i>value</i>, not by const reference."}, {"owner": {"reputation": 244, "user_id": 3383318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/190ca65f724c74b976293b6c49ed2fb7?s=128&d=identicon&r=PG", "display_name": "Ruben", "link": "https://stackoverflow.com/users/3383318/ruben"}, "edited": false, "score": 0, "creation_date": 1452702304, "post_id": 34771464, "comment_id": 57288591, "body": "I mean the median function of the stats package (a standard package). Thanks for noticing I changed the x-variable, I didn&#39;t notice that. edit: it is a pass by value, so a copy is made"}], "tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": false, "score": -1, "last_activity_date": 1452701325, "last_edit_date": 1452701325, "creation_date": 1452701253, "answer_id": 34771464, "question_id": 34771088, "link": "https://stackoverflow.com/questions/34771088/why-is-standard-r-median-function-so-much-slower-than-a-simple-c-alternative/34771464#34771464", "title": "Why is standard R median function so much slower than a simple C++ alternative?", "body": "<p>I'm not sure what \"standard\" implementation you would be referring to.</p>\n\n<p>Anyway: If there were one, it would, being part of a standard library, certainly not be allowed to change the order of elements in the vector (as your implementation does), so it would definitely have to work on a copy. </p>\n\n<p>Creating this copy would take time and CPU (and significant memory), which would affect the run time.</p>\n"}, {"comments": [{"owner": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 4, "creation_date": 1452701641, "post_id": 34771504, "comment_id": 57288062, "body": "I&#39;d be curious what happens if one used only the last four lines of <code>median.default</code> and replaced <code>mean()</code> by <code>.Internal(mean())</code>. I would guess that would be pretty close to <code>median2</code>, maybe even faster."}, {"owner": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 2, "creation_date": 1452701918, "post_id": 34771504, "comment_id": 57288286, "body": "...so having tested that it&#39;s definitely not as fast as <code>median2</code>, but it is much closer."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "reply_to_user": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 1, "creation_date": 1452702022, "post_id": 34771504, "comment_id": 57288352, "body": "@joran It&#39;s probably worth testing on a larger vector as well; when I compared <code>median.default</code> to the two C++ versions on a <code>rnorm(1e5)</code> vector the timings were much closer."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "reply_to_user": {"reputation": 156564, "user_id": 324364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KIazX.jpg?s=128&g=1", "display_name": "joran", "link": "https://stackoverflow.com/users/324364/joran"}, "edited": false, "score": 0, "creation_date": 1452702553, "post_id": 34771504, "comment_id": 57288772, "body": "And I&#39;m also wondering why the author of <code>median.default</code> chose to use <code>any(is.na(x))</code> instead of <code>anyNA(x)</code>, as the latter is much faster..."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1452710486, "post_id": 34771504, "comment_id": 57294128, "body": "One call to <code>nth_element</code> isn&#39;t enough for an even length list.  Call it once, then call <code>min_element</code> on the right hand side interval (or max element on the left hand side, depending how your math works).  Also you have to deal with 0 sized lists with special case code."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1452711417, "post_id": 34771504, "comment_id": 57294768, "body": "Second, everything done outside of the median algorithm should be really cheap stuff even in R.  But it is slow enough that on small lists, it dominates the search time.  Note that my version above is sub-optimal, because you can do lots of work to get the nth-1 element while getting the nth element -- calling <code>max_element</code> afterwards ignores the structure we have generated in the lhs list.  There isn&#39;t, as far as I know a <code>nsth_elements</code> function that takes a collection of elements to find in a way similar to <code>nth_element</code> finds one; you&#39;d have to roll your own.  It might be ~1.2x faster tho"}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1452713695, "post_id": 34771504, "comment_id": 57296150, "body": "@Yakk Whoops, good catch - thank you. I left out the zero-size check in the previous versions and in your version just because the OP wasn&#39;t performing these in their function. And although it&#39;s definitely a good idea to check for this in C++, empty vectors are <i>much</i> less likely to exist in R just due to the nature of the language, i.e. you pretty much have to explicitly create one with <code>numeric(0)</code>. Thanks again for your input."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1452714932, "post_id": 34771504, "comment_id": 57296897, "body": "You should also update the benchmarks (I cannot believe that the max element change had no timing impact)"}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1452715792, "post_id": 34771504, "comment_id": 57297377, "body": "@Yakk One would think that the extra call to <code>std::max_element</code> would have a noticeable impact, but I just reran the benchmark with the updated version of <code>cpp_med2</code> and did not see a measurable increase in the run time; e.g. the median times were all within the range of about 12.4 - 12.8 milliseconds."}, {"owner": {"reputation": 244, "user_id": 3383318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/190ca65f724c74b976293b6c49ed2fb7?s=128&d=identicon&r=PG", "display_name": "Ruben", "link": "https://stackoverflow.com/users/3383318/ruben"}, "edited": false, "score": 0, "creation_date": 1452764549, "post_id": 34771504, "comment_id": 57316216, "body": "I don&#39;t think the part <code>Rcpp::NumericVector x = Rcpp::clone(xx);</code> in <code>cpp_med2</code> is necessary, because we did a pass by value ?"}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 0, "creation_date": 1452766413, "post_id": 34771504, "comment_id": 57317464, "body": "It is necessary, try it both ways and see : )."}, {"owner": {"reputation": 244, "user_id": 3383318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/190ca65f724c74b976293b6c49ed2fb7?s=128&d=identicon&r=PG", "display_name": "Ruben", "link": "https://stackoverflow.com/users/3383318/ruben"}, "edited": false, "score": 0, "creation_date": 1452853337, "post_id": 34771504, "comment_id": 57359881, "body": "No, let me show you: <code>&#47;&#47; [[Rcpp::export]] double median3(NumericVector x) {   std::size_t n = x.size() &#47; 2;   std::nth_element(x.begin(), x.begin() + n, x.end());    if (x.size() % 2) return x(n);    return (x[n] + *std::max_element(x.begin(), x.begin() + n)) &#47; 2.; }</code> also works."}], "tags": [], "owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "is_accepted": true, "score": 15, "last_activity_date": 1452713381, "last_edit_date": 1452713381, "creation_date": 1452701365, "answer_id": 34771504, "question_id": 34771088, "link": "https://stackoverflow.com/questions/34771088/why-is-standard-r-median-function-so-much-slower-than-a-simple-c-alternative/34771504#34771504", "title": "Why is standard R median function so much slower than a simple C++ alternative?", "body": "<p>As noted by @joran, your code is very specialized, and generally speaking, less generalized functions, algorithms, etc... are often more performant. Take a look at <code>median.default</code>: </p>\n\n<pre><code>median.default\n# function (x, na.rm = FALSE) \n# {\n#   if (is.factor(x) || is.data.frame(x)) \n#     stop(\"need numeric data\")\n#   if (length(names(x))) \n#     names(x) &lt;- NULL\n#   if (na.rm) \n#     x &lt;- x[!is.na(x)]\n#   else if (any(is.na(x))) \n#     return(x[FALSE][NA])\n#   n &lt;- length(x)\n#   if (n == 0L) \n#     return(x[FALSE][NA])\n#   half &lt;- (n + 1L)%/%2L\n#   if (n%%2L == 1L) \n#     sort(x, partial = half)[half]\n#   else mean(sort(x, partial = half + 0L:1L)[half + 0L:1L])\n# }\n</code></pre>\n\n<p>There are several operations in place to accommodate the possibility of missing values, and these will definitely impact the overall execution time of the function. Since your function does not replicate this behavior it can eliminate a bunch of calculations, but consequently will not provide the same result for vectors with missing values: </p>\n\n<pre><code>median(c(1, 2, NA))\n#[1] NA\n\nmedian2(c(1, 2, NA))\n#[1] 2\n</code></pre>\n\n<hr>\n\n<p>A couple of other factors which probably don't have <em>as much</em> of an effect as the handling of <code>NA</code>s, but are worth pointing out: </p>\n\n<ul>\n<li><code>median</code>, along with a handful of the functions it uses, are S3 generics, so there is a small amount of time spent on method dispatch </li>\n<li><code>median</code> will work with more than just integer and numeric vectors; it will also handle <code>Date</code>, <code>POSIXt</code>, and probably a bunch of other classes, and preserve attributes correctly:  </li>\n</ul>\n\n<hr>\n\n<pre><code>median(Sys.Date() + 0:4)\n#[1] \"2016-01-15\"\n\nmedian(Sys.time() + (0:4) * 3600 * 24)\n#[1] \"2016-01-15 11:14:31 EST\"\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong> \nI should mention that the function below <em>will cause the original vector to be sorted</em> since <code>NumericVector</code>s are proxy objects. If you want to avoid this, you can either <code>Rcpp::clone</code> the input vector and operate on the clone, or use your original signature (with a <code>std::vector&lt;double&gt;</code>), which implicitly requires a copy in the conversion from <code>SEXP</code> to <code>std::vector</code>. </p>\n\n<p>Also note that you can shave off a little more time by using a <code>NumericVector</code> instead of a <code>std::vector&lt;double&gt;</code>: </p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\n// [[Rcpp::export]]\ndouble cpp_med(Rcpp::NumericVector x){\n  std::size_t size = x.size();\n  std::sort(x.begin(), x.end());\n  if (size  % 2 == 0) return (x[size / 2 - 1] + x[size / 2]) / 2.0;\n  return x[size / 2];\n}\n</code></pre>\n\n<hr>\n\n<pre><code>microbenchmark::microbenchmark(\n  median(x),\n  median2(x),\n  cpp_med(x),\n  times = 200L\n)\n# Unit: microseconds\n#       expr    min      lq      mean  median      uq     max neval\n#  median(x) 74.787 81.6485 110.09870 92.5665 129.757 293.810   200\n# median2(x)  6.474  7.9665  13.90126 11.0570  14.844 151.817   200\n# cpp_med(x)  5.737  7.4285  11.25318  9.0270  13.405  52.184   200\n</code></pre>\n\n<hr>\n\n<p>Yakk brought up a great point in the comments above - also elaborated on by Jerry Coffin - about the inefficiency of doing a complete sort. Here's a rewrite using <code>std::nth_element</code>, benchmarked on a much larger vector: </p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\n// [[Rcpp::export]]\ndouble cpp_med2(Rcpp::NumericVector xx) {\n  Rcpp::NumericVector x = Rcpp::clone(xx);\n  std::size_t n = x.size() / 2;\n  std::nth_element(x.begin(), x.begin() + n, x.end());\n\n  if (x.size() % 2) return x[n]; \n  return (x[n] + *std::max_element(x.begin(), x.begin() + n)) / 2.;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>set.seed(123)\nxx &lt;- rnorm(10e5)\n\nall.equal(cpp_med2(xx), median(xx))\nall.equal(median2(xx), median(xx))\n\nmicrobenchmark::microbenchmark(\n  cpp_med2(xx), median2(xx), \n  median(xx), times = 200L\n)\n# Unit: milliseconds\n#         expr      min       lq     mean   median       uq       max neval\n# cpp_med2(xx) 10.89060 11.34894 13.15313 12.72861 13.56161  33.92103   200\n#  median2(xx) 84.29518 85.47184 88.57361 86.05363 87.70065 228.07301   200\n#   median(xx) 46.18976 48.36627 58.77436 49.31659 53.46830 250.66939   200\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1452704316, "creation_date": 1452704316, "answer_id": 34772598, "question_id": 34771088, "link": "https://stackoverflow.com/questions/34771088/why-is-standard-r-median-function-so-much-slower-than-a-simple-c-alternative/34772598#34772598", "title": "Why is standard R median function so much slower than a simple C++ alternative?", "body": "<p>[This is more of an extended comment than an answer to the question you actually asked.]</p>\n\n<p>Even your code may be open to significant improvement. In particular, you're sorting the entire input even though you only care about one or two elements.</p>\n\n<p>You can change this from O(n log n) to O(n) by using <code>std::nth_element</code> instead of <code>std::sort</code>. In case of an even number of elements, you'd typically want to use <code>std::nth_element</code> to find the element just before the middle, then use <code>std::min_element</code> to find the immediately succeeding element--but <code>std::nth_element</code> also partitions the input items, so the <code>std::min_element</code> only has to run on the items above the middle after the <code>nth_element</code>, not the entire input array. That is, after nth_element, you get a situation like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/t1u3p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t1u3p.png\" alt=\"enter image description here\"></a></p>\n\n<p>The complexity of <code>std::nth_element</code> is \"linear on average\", and (of course) <code>std::min_element</code> is linear as well, so the overall complexity is linear.</p>\n\n<p>So, for the simple case (odd number of elements), you get something like:</p>\n\n<pre><code>auto pos = x.begin() + x.size()/2;\n\nstd::nth_element(x.begin(), pos, x.end());\nreturn *pos;\n</code></pre>\n\n<p>...and for the more complex case (even number of elements):</p>\n\n<pre><code>std::nth_element(x.begin(), pos, x.end());\nauto pos2 = std::min_element(pos+1, x.end());\nreturn (*pos + *pos2) / 2.0;\n</code></pre>\n"}], "owner": {"reputation": 244, "user_id": 3383318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/190ca65f724c74b976293b6c49ed2fb7?s=128&d=identicon&r=PG", "display_name": "Ruben", "link": "https://stackoverflow.com/users/3383318/ruben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1351, "favorite_count": 5, "accepted_answer_id": 34771504, "answer_count": 3, "score": 4, "last_activity_date": 1452713381, "creation_date": 1452700241, "question_id": 34771088, "link": "https://stackoverflow.com/questions/34771088/why-is-standard-r-median-function-so-much-slower-than-a-simple-c-alternative", "title": "Why is standard R median function so much slower than a simple C++ alternative?", "body": "<p>I made the following implementation of the median in <code>C++</code> and and used it in <code>R</code> via <code>Rcpp</code>:</p>\n\n<pre><code>// [[Rcpp::export]]\ndouble median2(std::vector&lt;double&gt; x){\n  double median;\n  size_t size = x.size();\n  sort(x.begin(), x.end());\n  if (size  % 2 == 0){\n      median = (x[size / 2 - 1] + x[size / 2]) / 2.0;\n  }\n  else {\n      median = x[size / 2];\n  }\n  return median;\n}\n</code></pre>\n\n<p>If I subsequently compare the performance with the standard built-in R median function, I get the following results via <code>microbenchmark</code></p>\n\n<pre><code>&gt; x = rnorm(100)\n&gt; microbenchmark(median(x),median2(x))\nUnit: microseconds\n       expr    min     lq     mean median     uq     max neval\n  median(x) 25.469 26.990 34.96888 28.130 29.081 518.126   100\n median2(x)  1.140  1.521  2.47486  1.901  2.281  47.897   100\n</code></pre>\n\n<p>Why is the standard median function so much slower? This isn't what I would expect...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1452700258, "post_id": 34771046, "comment_id": 57287024, "body": "If in this code is not switchable to switch, pun intended."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452700841, "post_id": 34771046, "comment_id": 57287476, "body": "@SergeyA Times when `ticks` would be useful. :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452701065, "post_id": 34771046, "comment_id": 57287635, "body": "In fact @SergeyA is the only one being right about answering this question."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1452701922, "post_id": 34771046, "comment_id": 57288290, "body": "I think you have misunderstood your assignment."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1452700310, "creation_date": 1452700310, "answer_id": 34771114, "question_id": 34771046, "link": "https://stackoverflow.com/questions/34771046/trouble-creating-switch-statement/34771114#34771114", "title": "Trouble creating switch statement", "body": "<p>This is not feasibly possible to do. <code>switch</code> requires integral equality, your code checks for lesser than  on a double number.</p>\n\n<p>The unfeasible option would be to convert your double to integer with lost precision and than list all 15000 options as case labels. Not feasible at all.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1452700473, "post_id": 34771146, "comment_id": 57287192, "body": "Why are you spreading the knowledge of this terrible feature?"}, {"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1452701253, "post_id": 34771146, "comment_id": 57287792, "body": "The topic is not about best practices ha-ha. Even in spite I totally agree with your dislike this feature, it may fit to the task ))"}], "tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": false, "score": 1, "last_activity_date": 1452700517, "last_edit_date": 1452700517, "creation_date": 1452700379, "answer_id": 34771146, "question_id": 34771046, "link": "https://stackoverflow.com/questions/34771046/trouble-creating-switch-statement/34771146#34771146", "title": "Trouble creating switch statement", "body": "<p>If you use gcc then you can use case ranges: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Case-Ranges.html\" rel=\"nofollow\">Case Ranges</a>, but this works IMHO for integral data types, I am not sure about doubles.</p>\n\n<p>But don't forget, this is only the extension of the compiler. I also heard something similar was introduced with C++11, but I am not sure there.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1452700665, "post_id": 34771250, "comment_id": 57287352, "body": "Not only it is cheating, it&#39;s cheating with overhead. You can simply use switch on the in-site comparison."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1452701355, "post_id": 34771250, "comment_id": 57287859, "body": "Still an interesting solution, though."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1452700813, "last_edit_date": 1495542209, "creation_date": 1452700641, "answer_id": 34771250, "question_id": 34771046, "link": "https://stackoverflow.com/questions/34771046/trouble-creating-switch-statement/34771250#34771250", "title": "Trouble creating switch statement", "body": "<p>As <a href=\"https://stackoverflow.com/users/5245033/sergeya\">SergeyA</a> pointed out in <a href=\"https://stackoverflow.com/a/34771114/4342498\">his answer</a> this is feasible as it is a huge range of cases.</p>\n\n<p>If it absolutely needs to have a switch statement then we can cheat and have a function that returns true or false and then switch on the result of that function</p>\n\n<pre><code>bool is_less(double amount)\n{\n    return amount &lt; 15000.0;\n}\n\n//...\n\nswitch (is_less(sales))\n{\n    case true: commission = sales * RATE1; break;\n    case false: commission = sales * RATE2; break;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 4, "creation_date": 1452700922, "post_id": 34771334, "comment_id": 57287535, "body": "hahahaha, I like this. I want to upvote it, but I don&#39;t want people to think this is good."}, {"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1452701113, "post_id": 34771334, "comment_id": 57287674, "body": "Well, I do stress how one shouldn&#39;t do this. I think the assignment is flawed, though, and deserves this kind of answer."}, {"owner": {"reputation": 6250, "user_id": 269392, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8eb23e30e970b58f9949f7c69c25b6b?s=128&d=identicon&r=PG", "display_name": "Willem van Rumpt", "link": "https://stackoverflow.com/users/269392/willem-van-rumpt"}, "edited": false, "score": 2, "creation_date": 1452701291, "post_id": 34771334, "comment_id": 57287817, "body": "I can only hope the teacher is looking for a negative answer on the assignment: &quot;Sorry sir, this can&#39;t be done using a switch&quot; (with bonus points for students adding &quot;...without using hideous constructs like &lt;the above example&gt;&quot;)."}], "tags": [], "owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "is_accepted": false, "score": 1, "last_activity_date": 1452700890, "creation_date": 1452700890, "answer_id": 34771334, "question_id": 34771046, "link": "https://stackoverflow.com/questions/34771046/trouble-creating-switch-statement/34771334#34771334", "title": "Trouble creating switch statement", "body": "<p>You can technically do it in this horrible way:</p>\n\n<pre><code>//calculate commission\nswitch (sales &lt;= 15000.0)\n{\ncase true: \n    commission = sales * RATE1;\n    break;\ndefault:\n    commission = sales * RATE2;\n}\n</code></pre>\n\n<p>But never, <em>ever</em> do this in real code.</p>\n"}, {"comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1452701195, "post_id": 34771438, "comment_id": 57287743, "body": "<code>default</code> is unreachable here. No need to include it."}, {"owner": {"reputation": 232, "user_id": 5120312, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2444037d657121f6b3430788ee9e5c35?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Woods", "link": "https://stackoverflow.com/users/5120312/robert-woods"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1452702272, "post_id": 34771438, "comment_id": 57288558, "body": "@erip - True, just been a habit of mine to always add it."}, {"owner": {"reputation": 232, "user_id": 5120312, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2444037d657121f6b3430788ee9e5c35?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Woods", "link": "https://stackoverflow.com/users/5120312/robert-woods"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452702276, "post_id": 34771438, "comment_id": 57288568, "body": "@SergeyA - It&#39;s a different way of doing things, feel free to flag if you think it should be deleted."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452702413, "post_id": 34771438, "comment_id": 57288664, "body": "How is it different from already posted answer by @JohnSensebe?"}, {"owner": {"reputation": 232, "user_id": 5120312, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2444037d657121f6b3430788ee9e5c35?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Woods", "link": "https://stackoverflow.com/users/5120312/robert-woods"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452702602, "post_id": 34771438, "comment_id": 57288820, "body": "@SergeyA - If you hadn&#39;t noticed, mine was only 5 minutes after. It wasn&#39;t there when I first clicked add answer. Anyway, this is a pointless argument, I&#39;m going to get on with my day. You&#39;re welcome to reply but I won&#39;t."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452702777, "post_id": 34771438, "comment_id": 57288966, "body": "@robert.woods Mind to add some reasoning for <code>default:          break; </code> ?"}, {"owner": {"reputation": 232, "user_id": 5120312, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2444037d657121f6b3430788ee9e5c35?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Woods", "link": "https://stackoverflow.com/users/5120312/robert-woods"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452702840, "post_id": 34771438, "comment_id": 57289011, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 - There is no need for it, just a bad habit of mine to always end a <code>switch</code> with a <code>default</code>"}, {"owner": {"reputation": 19, "user_id": 5785227, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10208469030189022/picture?type=large", "display_name": "Kasaundra Scott", "link": "https://stackoverflow.com/users/5785227/kasaundra-scott"}, "edited": false, "score": 0, "creation_date": 1452726987, "post_id": 34771438, "comment_id": 57302753, "body": "robert.woods, that worked like a charm.  Thanks for your help!"}], "tags": [], "owner": {"reputation": 232, "user_id": 5120312, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2444037d657121f6b3430788ee9e5c35?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Woods", "link": "https://stackoverflow.com/users/5120312/robert-woods"}, "is_accepted": true, "score": -2, "last_activity_date": 1452701166, "creation_date": 1452701166, "answer_id": 34771438, "question_id": 34771046, "link": "https://stackoverflow.com/questions/34771046/trouble-creating-switch-statement/34771438#34771438", "title": "Trouble creating switch statement", "body": "<p>You could do something like this, similar to NathanOliver's answer without a new function.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n  //declare named constants and variables\n  const double RATE1 = .02;\n  const double RATE2 = .05;\n  double sales       = 0.0;\n  double commission  = 0.0;\n\n  //get input item\n  cout &lt;&lt; \"Enter the sales amount: \"; \n  cin &gt;&gt; sales; \n\n  //calculate commission\n\n  bool lessthan = sales &lt;= 15000.0;\n\n  switch (lessthan) \n  {\n      case true: \n          commission = sales * RATE1;\n          break;\n\n      case false: \n        commission = sales * RATE2;\n        break;\n\n      default: \n        break;        \n  }\n\n//display commission\n  cout &lt;&lt; fixed &lt;&lt; setprecision(2);\n  cout &lt;&lt; \"Commission: $\" &lt;&lt; commission &lt;&lt; endl;\n\n  system(\"pause\");\n  return 0;\n}   //end of main function`\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5785227, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10208469030189022/picture?type=large", "display_name": "Kasaundra Scott", "link": "https://stackoverflow.com/users/5785227/kasaundra-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 34771438, "answer_count": 5, "score": 1, "last_activity_date": 1452701166, "creation_date": 1452700125, "question_id": 34771046, "link": "https://stackoverflow.com/questions/34771046/trouble-creating-switch-statement", "title": "Trouble creating switch statement", "body": "<p>I am very new to C++, and I am having trouble completing an assignment.  I need to switch this if statement to a switch statement, but I am totally lost on how to do it since the number must be an integer.  Could someone point me in the right direction?</p>\n\n<p>See below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n  //declare named constants and variables\n  const double RATE1 = .02;\n  const double RATE2 = .05;\n  double sales       = 0.0;\n  double commission  = 0.0;\n\n  //get input item\n  cout &lt;&lt; \"Enter the sales amount: \"; \n  cin &gt;&gt; sales; \n\n  //calculate commission\n  if (sales &lt;= 15000.0)\n{\n    commission = sales * RATE1;\nelse\n    commission = sales * RATE2;\n\n }\n//end if\n\n//display commission\n  cout &lt;&lt; fixed &lt;&lt; setprecision(2);\n  cout &lt;&lt; \"Commission: $\" &lt;&lt; commission &lt;&lt; endl;\n\nsystem(\"pause\");\nreturn 0;\n}   //end of main function\n</code></pre>\n"}, {"tags": ["c++", "string", "ascii", "uint8t"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1452700129, "post_id": 34770945, "comment_id": 57286928, "body": "There is also a question of your char* being signed or unsigned. The fact that you have to do the conversion inside <code>itoa</code> suggests unsigned."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1452700299, "post_id": 34770945, "comment_id": 57287059, "body": "Real ASCII is seven-bit, definitely including the digits \u2014 how you choose to interpret the most significant/sign bit should have no effect. So the cast shouldn&#39;t be problematic. Just a syntactic pain."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1452700177, "post_id": 34771043, "comment_id": 57286968, "body": "Can I borrow your crystal ball, please?"}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1452700242, "post_id": 34771043, "comment_id": 57287010, "body": "... couldn&#39;t he likely just use <code>sprintf</code> (or, ideally, <code>snprintf</code>) with an <code>ll</code> specifier? Without knowing the compiler and whether it equates a long long with being 32-bit, of course."}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 1, "creation_date": 1452701808, "post_id": 34771043, "comment_id": 57288207, "body": "you really need to make that crystal-ball technology of yours publicly available ..."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1452702179, "post_id": 34771043, "comment_id": 57288496, "body": "It was the first thing I thought of. I think that this is representative of typical problems you get with languages that let you truncate integers by default and compilers that don&#39;t warn you of the fact. C could have enforced an explicit narrowing cast, but it doesn&#39;t, and such bugs are the result. The worst part: this behavior makes default types such as <code>int</code> virtually useless. Portable code needs to use integer types from <code>&lt;stdint.h&gt;</code> exclusively (and char where needed for library APIs)."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1452709348, "last_edit_date": 1452709348, "creation_date": 1452700120, "answer_id": 34771043, "question_id": 34770945, "link": "https://stackoverflow.com/questions/34770945/displaying-integer-on-an-lcd/34771043#34771043", "title": "Displaying integer on an LCD", "body": "<p>On your architecture, <code>int</code> is an <code>int16_t</code>, not <code>int32_t</code>. Thus, <code>itoa</code> treats <code>123456</code> as <code>-7616</code>, because:</p>\n\n<pre><code>123456 = 0x0001_E240\n -7616 = 0xFFFF_E240\n</code></pre>\n\n<p>They are the same if you truncate them down to 16 bits - so that's what your code is doing. Instead of using <code>itoa</code>, you have following options:</p>\n\n<ol>\n<li>calculate the ASCII representation yourself;</li>\n<li>use <code>ltoa(long value, char * buffer, int radix)</code>, if available, or</li>\n<li>leverage <code>s[n]printf</code> if available.</li>\n</ol>\n\n<p>For the last option you can use the following, \"mostly\" portable code:</p>\n\n<pre><code>void LCD::printInteger(unsigned char headLine[17], int32_t number) {\n  ...\n  char str[17];\n  if (sizeof(int) == sizeof(int32_t))\n    snprintf(str, sizeof(str), \"%d\", num);\n  else if (sizeof(long int) == sizeof(int32_t))\n    snprintf(str, sizeof(str), \"%ld\", num);\n  else if (sizeof(long long int) == sizeof(int32_t))\n    snprintf(str, sizeof(str), \"%lld\", num);\n  ...\n}\n</code></pre>\n\n<p>If, and only if, your platform doesn't have <code>snprintf</code>, you can use <code>sprintf</code> and remove the 2nd argument (<code>sizeof(str)</code>). Your go-to function should always be the <code>n</code> variant, as it gives you one less bullet to shoot your foot with :)</p>\n\n<p>Since you're compiling with a C++ compiler that is, I assume, at least half-decent, the above should do \"the right thing\" in a portable way, without emitting all the unnecessary code. The test conditions passed to <code>if</code> are compile-time constant expressions. Even some fairly old C compilers could deal with such properly.</p>\n\n<p>Nitpick: Don't use <code>int8_t</code> where a <code>char</code> would do. <code>itoa</code>, <code>s[n]printf</code>, etc. expect <code>char</code> buffers, not <code>int8_t</code> buffers.</p>\n"}], "owner": {"reputation": 2402, "user_id": 4621142, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Pa0B7.jpg?s=128&g=1", "display_name": "Bobface", "link": "https://stackoverflow.com/users/4621142/bobface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2185, "favorite_count": 0, "accepted_answer_id": 34771043, "answer_count": 1, "score": 3, "last_activity_date": 1452709348, "creation_date": 1452699892, "question_id": 34770945, "link": "https://stackoverflow.com/questions/34770945/displaying-integer-on-an-lcd", "title": "Displaying integer on an LCD", "body": "<p>I'm trying to display an integer on an LCD-Display. The way the Lcd works is that you send an 8-Bit ASCII-Character to it and it displays the character.</p>\n\n<p>The code I have so far is:</p>\n\n<pre><code>unsigned char text[17] = \"ABCDEFGHIJKLMNOP\";\nint32_t n = 123456;\nlcd.printInteger(text, n);\n\n//-----------------------------------------  \n\nvoid LCD::printInteger(unsigned char headLine[17], int32_t number)\n{\n    //......\n\n\n    int8_t str[17];\n    itoa(number,(char*)str,10);\n\n\n    for(int i = 0; i &lt; 16; i++)\n    {\n        if(str[i] == 0x0)\n        break;\n\n        this-&gt;sendCharacter(str[i]);\n        _delay_ms(2);\n\n    }\n}\nvoid LCD::sendCharacter(uint8_t character)\n{\n    //....\n\n    *this-&gt;cOutputPort = character;\n\n    //...\n\n}\n</code></pre>\n\n<p>So if I try to display <code>123456</code> on the LCD, it actually displays <code>-7616</code>, which obviously is not the correct integer. </p>\n\n<p>I know that there is probably a problem because I convert the characters to signed <code>int8_t</code> and then output them as unsigned <code>uint8_t</code>. But I have to output them in unsigned format. I don't know how I can convert the <code>int32_t</code> input integer to an ASCII <code>uint8_t</code>-String.</p>\n"}, {"tags": ["c++", "cmake", "wxwidgets"], "answers": [{"comments": [{"owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "edited": false, "score": 2, "creation_date": 1452703583, "post_id": 34771574, "comment_id": 57289618, "body": "You can use <code>wx-config --help</code> to see the list of all the available libraries at the end of its output."}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "edited": false, "score": 0, "creation_date": 1452704869, "post_id": 34771574, "comment_id": 57290587, "body": "Ahhhh..did not know that utility at all. Thanks!"}], "tags": [], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "is_accepted": false, "score": 1, "last_activity_date": 1452701571, "creation_date": 1452701571, "answer_id": 34771574, "question_id": 34770937, "link": "https://stackoverflow.com/questions/34770937/wxwidgets-linking-to-wxmediactrl-using-cmake/34771574#34771574", "title": "wxwidgets: linking to wxMediaCtrl using CMake", "body": "<p>Ok, I solved by problem by setting:</p>\n\n<pre><code>find_package(wxWidgets REQUIRED core base media)\n</code></pre>\n\n<p>I had to add the media component as well. I do not know how to get a list of available components in wxWidgets yet.</p>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452701571, "creation_date": 1452699852, "question_id": 34770937, "link": "https://stackoverflow.com/questions/34770937/wxwidgets-linking-to-wxmediactrl-using-cmake", "title": "wxwidgets: linking to wxMediaCtrl using CMake", "body": "<p>I am trying to use wxWidgets and the wxMediaCtrl to play some video files. However, I am having issue linking my application with the wxMediaCtrl. I looked at some wxWidgets documentation but it is not clear on what I should do.</p>\n\n<p>So, I have an application using it and in my top level CMakeLists, I use wxWidgets as follows:</p>\n\n<pre><code>find_package(wxWidgets REQUIRED core base)\nINCLUDE(${wxWidgets_USE_FILE})\n</code></pre>\n\n<p>I think here I should use other libraries too (related to wxMediaCtrl) but have no idea what they are called.</p>\n\n<p>Then I link my app as:</p>\n\n<pre><code>TARGET_LINK_LIBRARIES(${NAME} ${wxWidgets_LIBRARIES})\n</code></pre>\n\n<p>Now, when I do this, I get the linker errors whereever I use wxMediaCtrl as:</p>\n\n<pre><code>undefined reference to `wxMediaCtrl::GetPlaybackRate()\nundefined reference to `vtable for wxMediaCtrl'\n</code></pre>\n\n<p>And there are multiple instances of these for various methods of wxMediaCtrl.</p>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1452699367, "post_id": 34770661, "comment_id": 57286276, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 689, "user_id": 662593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e745cd82e8f6f2832568ee8a67e61661?s=128&d=identicon&r=PG", "display_name": "StahlRat", "link": "https://stackoverflow.com/users/662593/stahlrat"}, "edited": false, "score": 0, "creation_date": 1452700185, "post_id": 34770661, "comment_id": 57286974, "body": "<code>cout &lt;&lt; i &lt;&lt; endl;</code> will produce same output as the one in Java source"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1452700326, "post_id": 34770661, "comment_id": 57287081, "body": "What are you actually confused about? The integer initialisations, the use of comma operator, or why your output isn&#39;t flushed to the terminal?"}], "answers": [{"comments": [{"owner": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 0, "creation_date": 1452699425, "post_id": 34770741, "comment_id": 57286315, "body": "Perhaps you can mention that <code>cout &lt;&lt;</code> unlike <code>System.out.println</code> does not add the <code>\\n</code> character ;)"}, {"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "edited": false, "score": 0, "creation_date": 1452699922, "post_id": 34770741, "comment_id": 57286749, "body": "<code>\\n</code> is wrong. <code>endl</code> is right...  <a href=\"http://stackoverflow.com/questions/7324843/why-use-endl-when-i-can-use-a-newline-character\" title=\"why use endl when i can use a newline character\">stackoverflow.com/questions/7324843/&hellip;</a>"}, {"owner": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 0, "creation_date": 1452699967, "post_id": 34770741, "comment_id": 57286790, "body": "I agree, but I think you&#39;ll find I never said that <code>\\n</code> should be included. Instead I only remarked that <code>cout</code> does not include it, which is correct ;)"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "edited": false, "score": 6, "creation_date": 1452700024, "post_id": 34770741, "comment_id": 57286835, "body": "@Centril I disagree. <code>std::endl</code> should only be used when you <i>need</i> to flush the stream. You shouldn&#39;t use it all the time."}, {"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1452700437, "post_id": 34770741, "comment_id": 57287169, "body": "@TartanLlama Well... That is partially true - since \\n is converted to CRLF where needed <a href=\"http://stackoverflow.com/questions/7372012/line-feed-and-carriage-return\" title=\"line feed and carriage return\">stackoverflow.com/questions/7372012/&hellip;</a> But one should explain the difference and you should at least flush the stream at the end."}], "tags": [], "owner": {"reputation": 4561, "user_id": 1043569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0f0397c0ae99625fde35aaa75a20494e?s=128&d=identicon&r=PG", "display_name": "Atri", "link": "https://stackoverflow.com/users/1043569/atri"}, "is_accepted": true, "score": 10, "last_activity_date": 1452699507, "last_edit_date": 1452699507, "creation_date": 1452699383, "answer_id": 34770741, "question_id": 34770661, "link": "https://stackoverflow.com/questions/34770661/c-for-loop-syntax/34770741#34770741", "title": "C++ for loop syntax", "body": "<p>It is printing 9,8,7,6,5 as expected without any commas. Its not one big number.</p>\n\n<p><code>System.out.println()</code> - Prints a new line at the end.  </p>\n\n<p><code>cout</code> - Behaves in a similar way like <code>System.out.print()</code> where it doesn't print a newline at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 12594, "user_id": 2491746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4432131c9d27a81503f25956bc8b9c?s=128&d=identicon&r=PG", "display_name": "Simple", "link": "https://stackoverflow.com/users/2491746/simple"}, "is_accepted": false, "score": 3, "last_activity_date": 1452699430, "creation_date": 1452699430, "answer_id": 34770758, "question_id": 34770661, "link": "https://stackoverflow.com/questions/34770661/c-for-loop-syntax/34770758#34770758", "title": "C++ for loop syntax", "body": "<p>Because you aren't printing a new line character:</p>\n\n<pre><code>for(int i(9), j(0); i &gt; j; i--, j++)\n    cout &lt;&lt; i &lt;&lt; '\\n';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 1, "creation_date": 1452699649, "post_id": 34770770, "comment_id": 57286536, "body": "This is not what OP was confused about I think"}, {"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "reply_to_user": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 0, "creation_date": 1452699885, "post_id": 34770770, "comment_id": 57286713, "body": "@MrHug Well - it is not explicit from his question, so it might as well be what he asked about... The question is titled &quot;C++ for loop syntax&quot; not: &quot;C++: How do I print a newline?&quot; And <code>endl</code> is the most correct way to do it... NOT <code>\\n</code>.  Answers should bear everyone in mind, not just the OP... Those down votes are way way unfair."}, {"owner": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 0, "creation_date": 1452700034, "post_id": 34770770, "comment_id": 57286845, "body": "You are correct, but then I would suggest tackling multiple issues in one post, not one that is least likely (as his confusion was about the &quot;large number&quot; not the fact that it compiled)"}, {"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "reply_to_user": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 0, "creation_date": 1452700277, "post_id": 34770770, "comment_id": 57287040, "body": "Well; My edited answer has notes on both problems... yours does not. This makes me not want to answer things in SO... getting down votes for a formally correct answer because your assumption about what the questioner happened to ask happened to be more correct even tho the name of the question has nothing to do with newline and everything to do with C++ loops.."}, {"owner": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 0, "creation_date": 1452700384, "post_id": 34770770, "comment_id": 57287124, "body": "I actually do not have an answer to this question, just hanging out here ;) Also I removed my downvote but am not willing to give you an upvote either. As the post you link indicates, you most often do not want to use <code>endl</code>, see the <a href=\"http://stackoverflow.com/questions/5492380/what-is-the-c-iostream-endl-fiasco/5492605#5492605\">accepted answer</a>"}, {"owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "reply_to_user": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 0, "creation_date": 1452700613, "post_id": 34770770, "comment_id": 57287312, "body": "@MrHug that is an answer on another question, not the one I linked... Besides - holding things in an internal buffer is not free either - so it entirely depends on the use case."}, {"owner": {"reputation": 1275, "user_id": 2094953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb71128e8388f91bef3ca5d383449136?s=128&d=identicon&r=PG", "display_name": "MrHug", "link": "https://stackoverflow.com/users/2094953/mrhug"}, "edited": false, "score": 0, "creation_date": 1452700685, "post_id": 34770770, "comment_id": 57287366, "body": "Oops you are right, it was linked in the top comment, I assumed it was the same question. My apologies. And I agree it depends on the usecase, but saying that using <code>\\n</code> is wrong is a bit of a stretch then ;) Regardless, I&#39;m moving on to the next question :)"}], "tags": [], "owner": {"reputation": 2204, "user_id": 1063961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/s9gRK.png?s=128&g=1", "display_name": "Centril", "link": "https://stackoverflow.com/users/1063961/centril"}, "is_accepted": false, "score": 0, "last_activity_date": 1452699704, "last_edit_date": 1495535265, "creation_date": 1452699458, "answer_id": 34770770, "question_id": 34770661, "link": "https://stackoverflow.com/questions/34770661/c-for-loop-syntax/34770770#34770770", "title": "C++ for loop syntax", "body": "<p>Indentation does not matter in C++ since whitespace is ignored...</p>\n\n<p>Thus,</p>\n\n<pre><code>for(int i(9), j(0); i &gt; j; i--, j++)\ncout &lt;&lt; i;\n</code></pre>\n\n<p>Is the same as:</p>\n\n<pre><code>for(int i(9), j(0); i &gt; j; i--, j++)\n    cout &lt;&lt; i;\n</code></pre>\n\n<p>Which is:</p>\n\n<pre><code>for(int i(9), j(0); i &gt; j; i--, j++) {\n    cout &lt;&lt; i;\n}\n</code></pre>\n\n<p>So it is not 1 number, but many.</p>\n\n<p>This is the same in Java and most C-family languages.</p>\n\n<p>Unlike <code>println</code> from System.out (a PrintStream)...\n<code>&lt;&lt;</code> only writes what you pass to <code>cout</code>, which is usually STDOUT.\nTo properly write a newline to <code>cout</code> you should use:</p>\n\n<p><code>cout &lt;&lt; i &lt;&lt; endl;</code></p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/7324843/why-use-endl-when-i-can-use-a-newline-character\">Why use endl when I can use a newline character?</a> for more.</p>\n"}, {"tags": [], "owner": {"reputation": 3971, "user_id": 2921343, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5a6a90bd1c391e3f7aa638134a14481?s=128&d=identicon&r=PG&f=1", "display_name": "Eutherpy", "link": "https://stackoverflow.com/users/2921343/eutherpy"}, "is_accepted": false, "score": 2, "last_activity_date": 1452700229, "last_edit_date": 1495540512, "creation_date": 1452700229, "answer_id": 34771083, "question_id": 34770661, "link": "https://stackoverflow.com/questions/34770661/c-for-loop-syntax/34771083#34771083", "title": "C++ for loop syntax", "body": "<p>I'd just like to add something to the (good) answers already posted here:</p>\n\n<p><code>int i(9);</code></p>\n\n<p>does the same thing as </p>\n\n<p><code>int i = 9;</code></p>\n\n<p>It is called <em>direct initialization</em>. Take a look: <a href=\"https://stackoverflow.com/questions/5350125/constructor-of-type-int\">Constructor of type int</a></p>\n\n<p>I think this is what confused you in the first place.</p>\n"}, {"tags": [], "owner": {"reputation": 386, "user_id": 5089102, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WIyTy.jpg?s=128&g=1", "display_name": "Yousuf Azad", "link": "https://stackoverflow.com/users/5089102/yousuf-azad"}, "is_accepted": false, "score": 0, "last_activity_date": 1452700336, "creation_date": 1452700336, "answer_id": 34771130, "question_id": 34770661, "link": "https://stackoverflow.com/questions/34770661/c-for-loop-syntax/34771130#34771130", "title": "C++ for loop syntax", "body": "<p>it's not printing a big number, it is just printing <code>i</code> one after another in each iteration/loop. To see use this </p>\n\n<pre><code>cout &lt;&lt; i &lt;&lt; endl;\n</code></pre>\n\n<p>or try different number for <code>i</code> or <code>j</code></p>\n"}, {"tags": [], "owner": {"reputation": 265, "user_id": 5785252, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/2cbd388c49f217c0356ebaa01095e5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek Mangal", "link": "https://stackoverflow.com/users/5785252/vivek-mangal"}, "is_accepted": false, "score": 0, "last_activity_date": 1452700431, "creation_date": 1452700431, "answer_id": 34771169, "question_id": 34770661, "link": "https://stackoverflow.com/questions/34770661/c-for-loop-syntax/34771169#34771169", "title": "C++ for loop syntax", "body": "<p>This is not a big number. Actually, the output is 5 different numbers (9,8,7,6,5).\nYou just have to print them in different lines by following methods:</p>\n\n<pre><code>cout&lt;&lt;i&lt;&lt;endl;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>cout&lt;&lt;i&lt;&lt;\"\\n\";\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>printf(\"%d\\n\",i);\n</code></pre>\n\n<p>and one more thing:\nint i(9) simply assigns value 9 to i. It is same as int i=9.</p>\n"}], "owner": {"reputation": 97, "user_id": 5666899, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/12127e4f3c7b0323a2cf3fafb2e5871e?s=128&d=identicon&r=PG&f=1", "display_name": "LC12382", "link": "https://stackoverflow.com/users/5666899/lc12382"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 34770741, "answer_count": 6, "score": -4, "last_activity_date": 1452702723, "creation_date": 1452699208, "last_edit_date": 1452702723, "question_id": 34770661, "link": "https://stackoverflow.com/questions/34770661/c-for-loop-syntax", "title": "C++ for loop syntax", "body": "<p>I'm new to C and don't understand this type of for loop syntax. </p>\n\n<pre><code>for(int i(9), j(0); i &gt; j; i--, j++)\ncout &lt;&lt; i;\n</code></pre>\n\n<p>This gives the result of 98765, but why?</p>\n\n<p>I'm used to loops like this:</p>\n\n<pre><code>for(int i = 9, int j = 0; i&gt;j; i--, j++){\n System.out.println(i);\n}\n</code></pre>\n\n<p>I see that i is being initialized to 9 and j to 0, but how does it get a number that big? </p>\n"}, {"tags": ["c++", "qt", "move"], "comments": [{"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 1, "creation_date": 1452701882, "post_id": 34770656, "comment_id": 57288259, "body": "How about an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>? You can use <a href=\"https://gist.github.com/mitchcurtis/8526eb7155c589166087\" rel=\"nofollow noreferrer\">this gist</a> to get started."}, {"owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "reply_to_user": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 0, "creation_date": 1452703366, "post_id": 34770656, "comment_id": 57289446, "body": "@Mitch please check my update."}], "answers": [{"tags": [], "owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1452719854, "last_edit_date": 1592644375, "creation_date": 1452713883, "answer_id": 34775554, "question_id": 34770656, "link": "https://stackoverflow.com/questions/34770656/qgraphicsrectitem-move-with-mouse-how-to/34775554#34775554", "title": "QGraphicsRectItem move with mouse. How to?", "body": "<p>I'd try a different approach that is a little easier to understand:</p>\n<pre><code>#include &lt;QtWidgets&gt;\n\nclass Steer : public QGraphicsView\n{\npublic:\n    Steer()\n    {\n        scene = new QGraphicsScene;\n        p1 = new QGraphicsRectItem;\n\n        //add player\n        p1-&gt;setRect(0, 0, 10, 80);\n        p1-&gt;setX(760);\n        p1-&gt;setY(160);\n\n        //add scene\n        scene-&gt;setSceneRect(0, 0, 800, 400);\n\n        //add moveable item\n        scene-&gt;addItem(p1);\n\n        //set scene\n        this-&gt;setScene(scene);\n        this-&gt;show();\n    }\n\nprotected:\n    void mousePressEvent(QMouseEvent * click)\n    {\n        if (p1-&gt;contains(p1-&gt;mapFromScene(click-&gt;localPos()))) {\n            lastMousePos = click-&gt;pos();\n        } else {\n            lastMousePos = QPoint(-1, -1);\n        }\n    }\n\n    void mouseMoveEvent(QMouseEvent * event)\n    {\n        if(!(event-&gt;buttons() &amp; Qt::LeftButton)) {\n            return;\n        }\n\n        if (lastMousePos == QPoint(-1, -1)) {\n            return;\n        }\n\n        p1-&gt;setPos(p1-&gt;pos() + (event-&gt;localPos() - lastMousePos));\n        lastMousePos = event-&gt;pos();\n    }\n\nprivate:\n    QGraphicsScene *scene;\n    QGraphicsRectItem *p1;\n\n    QPoint lastMousePos;\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    Steer w;\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n<p>There are a few things to point out here:</p>\n<ol>\n<li><p>Don't use <code>setRect()</code> to set the position of a <code>QGraphicsRectItem</code>. It <a href=\"https://bugreports.qt.io/browse/QTBUG-50448\" rel=\"nofollow noreferrer\">doesn't work</a> the way you think it might. Always use <code>setPos()</code> to change the position of an item.</p>\n</li>\n<li><p>Rename offset to something more descriptive. I chose <code>lastMousePos</code>. Instead of just updating it once when the mouse is pressed, also update it whenever the mouse is moved. Then, it's simply a matter of getting the difference between the two points and adding that to the position of the item.</p>\n</li>\n<li><p>Check if the mouse is actually over the item before reacting to move events. If the mouse isn't over the item, you need some way of knowing that, hence the <code>QPoint(-1, -1)</code>. You may want to use a separate boolean flag for this purpose. This solves the problem that you saw, where it was possible to click anywhere in the scene to get the item to move.</p>\n<p>Also, note the <code>mapFromScene()</code> call: the <code>contains()</code> function works in local coordinates, so we must map the mouse position which is in scene coordinates before testing if it's over the item.</p>\n</li>\n<li><p>The event functions are not slots, they're <a href=\"http://doc.qt.io/qt-5/qgraphicsitem.html#protected-functions\" rel=\"nofollow noreferrer\">virtual, protected functions</a>.</p>\n</li>\n</ol>\n<hr />\n<p>You could also consider handling these events in the items themselves. You don't need to do it from within <code>QGraphicsView</code>, especially if you have more than one of these items that need to be dragged with the mouse.</p>\n"}], "owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "accepted_answer_id": 34775554, "answer_count": 1, "score": 0, "last_activity_date": 1452719854, "creation_date": 1452699196, "last_edit_date": 1452703324, "question_id": 34770656, "link": "https://stackoverflow.com/questions/34770656/qgraphicsrectitem-move-with-mouse-how-to", "title": "QGraphicsRectItem move with mouse. How to?", "body": "<p>I have <code>QGraphicsView</code>, <code>QGraphicsScene</code> and <code>QGraphicsRectItem</code>.\n<code>QGraphicsRectItem</code> in the <code>QGraphicsScene</code> and the last one in the <code>QGraphicsView</code>. I want to move <code>QGraphicsRectItem</code> with mouse by clicking on it only! But in my implementation it moves if I click on any position on my QGraphicsScene. Whether it is my <code>QGraphicsRectItem</code> or some other place. And the second issue. The item has been moved to the center of the scene. Clicking on it again it starts to move from the home location.</p>\n\n<pre><code>void Steer::mousePressEvent(QMouseEvent *click)\n{\n    offset = click-&gt;pos();\n}\n\nvoid Steer::mouseMoveEvent(QMouseEvent *event)\n{\n    if(event-&gt;buttons() &amp; Qt::LeftButton)\n    {\n       p1-&gt;setPos(event-&gt;localPos() - offset); //p1 movable item\n    }\n}\n</code></pre>\n\n<p>What do I do wrong?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p><code>main.cpp</code></p>\n\n<pre><code>#include \"widget.h\"\n#include &lt;QApplication&gt;\n\n    int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    Steer w;\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p><code>widget.h</code></p>\n\n<pre><code>#ifndef STEER_H\n#define STEER_H\n\n#include &lt;QGraphicsView&gt;\n#include &lt;QGraphicsScene&gt;\n#include &lt;QMouseEvent&gt;\n#include &lt;QPoint&gt;\n#include &lt;QGraphicsRectItem&gt;\n\nclass Steer : public QGraphicsView\n{\n    Q_OBJECT\n\nprivate:\n    QGraphicsScene *scene;\n    QGraphicsRectItem *p1;\n\n    QPoint offset;\n\npublic:\n   explicit  Steer(QGraphicsView *parent = 0);\n    ~Steer(){}\n\npublic slots:\n    void mousePressEvent(QMouseEvent * click);\n    void mouseMoveEvent(QMouseEvent * event);\n};\n\n#endif // STEER_H\n</code></pre>\n\n<p><code>widget.cpp</code></p>\n\n<pre><code>#include \"widget.h\"\n#include &lt;QBrush&gt;\n\nSteer::Steer(QGraphicsView *parent)\n    : QGraphicsView(parent)\n{\n    scene = new QGraphicsScene;\n    p1 = new QGraphicsRectItem;\n\n    //add player\n    p1-&gt;setRect(760, 160, 10, 80);\n\n    //add scene\n    scene-&gt;setSceneRect(0, 0, 800, 400);\n\n    //add moveable item\n    scene-&gt;addItem(p1);\n\n    //set scene\n    this-&gt;setScene(scene);\n    this-&gt;show();\n}\n\nvoid Steer::mousePressEvent(QMouseEvent *click)\n{\n    offset = click-&gt;pos();\n}\n\nvoid Steer::mouseMoveEvent(QMouseEvent *event)\n{\n    if(event-&gt;buttons() &amp; Qt::LeftButton)\n    {\n       p1-&gt;setPos(event-&gt;localPos() - offset);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "haar-classifier"], "answers": [{"tags": [], "owner": {"reputation": 1906, "user_id": 5604117, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/3a84056939c7dc256d0bf052b5629f14?s=128&d=identicon&r=PG&f=1", "display_name": "D. Sergeev", "link": "https://stackoverflow.com/users/5604117/d-sergeev"}, "is_accepted": false, "score": 0, "last_activity_date": 1452699670, "creation_date": 1452699670, "answer_id": 34770864, "question_id": 34770563, "link": "https://stackoverflow.com/questions/34770563/is-it-possible-to-continue-haar-training-in-opencv/34770864#34770864", "title": "Is it possible to continue haar training in opencv?", "body": "<p>It is possible and it performs automatically when running opencv_traincascade.exe next time</p>\n"}], "owner": {"reputation": 1906, "user_id": 5604117, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/3a84056939c7dc256d0bf052b5629f14?s=128&d=identicon&r=PG&f=1", "display_name": "D. Sergeev", "link": "https://stackoverflow.com/users/5604117/d-sergeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452699670, "creation_date": 1452698917, "question_id": 34770563, "link": "https://stackoverflow.com/questions/34770563/is-it-possible-to-continue-haar-training-in-opencv", "title": "Is it possible to continue haar training in opencv?", "body": "<p>opencv_traincascade.exe from opencv package has -numStage parameter and for each stage creates temporary xml file. When all stages are finished, the tool unifies thus xml files to cascade.xml. </p>\n\n<p>The question is how to continue learning process from last stage using temporary xml files?</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": true, "score": 11, "last_activity_date": 1452698639, "creation_date": 1452698639, "answer_id": 34770464, "question_id": 34770359, "link": "https://stackoverflow.com/questions/34770359/compile-error-trying-to-put-a-unique-ptr-into-a-map/34770464#34770464", "title": "Compile error trying to put a unique_ptr into a map", "body": "<p>You cannot copy a <code>unique_ptr</code>, because then it will not be unique. You have to move it - <code>AddItem(std::move(someItem));</code> and <code>myMap.emplace(\"test\", std::move(item));</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1090, "user_id": 5428089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99553cd40613c219df839d5e30c15e3e?s=128&d=identicon&r=PG&f=1", "display_name": "karastojko", "link": "https://stackoverflow.com/users/5428089/karastojko"}, "is_accepted": false, "score": 2, "last_activity_date": 1452699126, "creation_date": 1452699126, "answer_id": 34770634, "question_id": 34770359, "link": "https://stackoverflow.com/questions/34770359/compile-error-trying-to-put-a-unique-ptr-into-a-map/34770634#34770634", "title": "Compile error trying to put a unique_ptr into a map", "body": "<p>You are trying to copy <em>unique_ptr</em> which is not allowed (that constructor is deleted as gcc says in the error). Instead of that you can try with <em>std::move</em>:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;memory&gt;\n#include &lt;utility&gt;\n\nclass MyClass\n{\n    public:\n         std::string Name;\n};\n\nusing Map = std::unordered_map&lt;std::string,std::unique_ptr&lt;MyClass&gt;&gt;;\n\n\nclass MyContainer\n{\n    private:\n        Map myMap;\n        void AddItem(std::unique_ptr&lt;MyClass&gt; item)\n        {\n            myMap.emplace(\"test\", std::move(item));\n        }\n    public:\n        void LoadItems()\n        {\n            //Read a file ... do something before etc..\n            std::unique_ptr&lt;MyClass&gt; someItem(new MyClass);\n            someItem-&gt;Name = \"FooBar\";\n            AddItem(std::move(someItem));\n        }\n};\n</code></pre>\n\n<p>Be aware, do not use the moved object afterwards.</p>\n\n<p>You can consider to use <em>shared_ptr</em> instead.</p>\n"}], "owner": {"reputation": 632, "user_id": 3023032, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5VlOh.jpg?s=128&g=1", "display_name": "DoubleVoid", "link": "https://stackoverflow.com/users/3023032/doublevoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4149, "favorite_count": 0, "accepted_answer_id": 34770464, "answer_count": 2, "score": 1, "last_activity_date": 1452699126, "creation_date": 1452698387, "question_id": 34770359, "link": "https://stackoverflow.com/questions/34770359/compile-error-trying-to-put-a-unique-ptr-into-a-map", "title": "Compile error trying to put a unique_ptr into a map", "body": "<p>I have a Load-Method which builds my unique_ptr (will be more than one later on) and a method to add these unique_ptr to my unordered map. But the code does not compile and I guess it has something to do with scoping...</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;memory&gt;\n\nclass MyClass\n{\n    public:\n        std::string Name;\n};\n\nusing Map = std::unordered_map&lt;std::string,std::unique_ptr&lt;MyClass&gt;&gt;;\n\n\nclass MyContainer\n{\n    private:\n        Map myMap;\n        void AddItem(std::unique_ptr&lt;MyClass&gt; item)\n        {\n            myMap.emplace(\"test\", item);\n        }\n    public:\n        void LoadItems()\n        {\n            //Read a file ... do something before etc..\n            std::unique_ptr&lt;MyClass&gt; someItem(new MyClass);\n            someItem-&gt;Name = \"FooBar\";\n            AddItem(someItem);\n        }\n};\n</code></pre>\n\n<p>This is one of the g++ error messages: </p>\n\n<blockquote>\n  <p>error: use of deleted function 'std::unique_ptr&lt;_Tp,\n  _Dp>::unique_ptr(const std::unique_ptr&lt;_Tp, _Dp>&amp;) [with _Tp = MyClass; _Dp = std::default_delete]'</p>\n</blockquote>\n\n<p>What is the best way to get this working? I tried changing the signature of the AddItem-method like so:</p>\n\n<pre><code>void AddItem(std::unique_ptr&lt;MyClass&gt;&amp; item) //takes a reference now...\n</code></pre>\n\n<p>This leads to a real cryptic error message:</p>\n\n<blockquote>\n  <p>In instantiation of 'constexpr std::pair&lt;_T1, _T2>::pair(_U1&amp;&amp;, const\n  _T2&amp;) [with _U1 = const char (&amp;)[5];  = void; _T1 = const std::basic_string; _T2 = std::unique_ptr]': e:\\devtools\\winbuilds\\include\\c++\\4.8.3\\bits\\hashtable_policy.h:177:55:\n  required from 'std::__detail::_ ...</p>\n</blockquote>\n\n<p>I suggest trying this piece of code on the fly here, to see the error messages: \n<a href=\"http://cpp.sh/\" rel=\"nofollow\">http://cpp.sh/</a></p>\n"}, {"tags": ["c++", "arrays", "arduino"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1452697745, "post_id": 34770031, "comment_id": 57285023, "body": "This would be a lot easier if you could use <code>std::string</code>s.  Can you use them?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1452698213, "post_id": 34770031, "comment_id": 57285379, "body": "@NathanOliver I was tempted to advise the same first. I think it&#39;s different on <a href=\"https://stackoverflow.com/questions/tagged/arduino\">arduino</a>, it&#39;s not really standard c++ they use."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452698470, "post_id": 34770031, "comment_id": 57285597, "body": "<i>@Max</i> Why not simply use <a href=\"http://en.cppreference.com/w/c/string/byte/strcat\" rel=\"nofollow noreferrer\"><code>strcat()</code></a>?"}, {"owner": {"reputation": 33, "user_id": 5767763, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/484920442e3e590991234d1b039311f8?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5767763/max"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452698728, "post_id": 34770031, "comment_id": 57285768, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: i tried it, but it didn&#39;t work ...that is the last version i used to do it nearly manualy ;-) How could it look like after you?"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1452698973, "post_id": 34770421, "comment_id": 57285961, "body": "I knew that arduino has some propriatetary implementation of strings. Good point."}, {"owner": {"reputation": 33, "user_id": 5767763, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/484920442e3e590991234d1b039311f8?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5767763/max"}, "edited": false, "score": 0, "creation_date": 1452699350, "post_id": 34770421, "comment_id": 57286260, "body": "@Danny_ds: sorry...didn&#39;t work with string library yet...how would it look like with you suggestion?? Thank you in Advance!"}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 33, "user_id": 5767763, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/484920442e3e590991234d1b039311f8?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5767763/max"}, "edited": false, "score": 1, "creation_date": 1452699633, "post_id": 34770421, "comment_id": 57286521, "body": "@Max - Something like: <code>String stringOne =  String(stringTwo + &quot; with more&quot;); &#47;&#47; concatenating two strings</code> - see <a href=\"https://www.arduino.cc/en/Reference/StringConstructor\" rel=\"nofollow noreferrer\">here</a> for some examples, or <a href=\"https://www.arduino.cc/en/Tutorial/StringConstructors\" rel=\"nofollow noreferrer\">here</a> for a tutorial."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 1, "last_activity_date": 1452700104, "last_edit_date": 1452700104, "creation_date": 1452698542, "answer_id": 34770421, "question_id": 34770031, "link": "https://stackoverflow.com/questions/34770031/function-to-join-char-array-incl-additional-sign-in-between/34770421#34770421", "title": "function to join Char array incl additional sign in between", "body": "<p>There are several problems in the code:</p>\n\n<ul>\n<li><p>First, it would be better to declare <code>result</code> outside the function:</p>\n\n<pre><code>static char result[MAX_CONCAT_LEN] = {0};\n</code></pre></li>\n<li><p>Declare the function with a default value for <code>str4</code>:</p>\n\n<pre><code>const char *concat_strings(const char *str1, const char *str2, const char *str3,const char *str4 = NULL);\n</code></pre></li>\n<li><p>Don't compare <code>char*</code> with <code>TRUE</code>, use <code>NULL</code> instead:</p>\n\n<pre><code>if (str4 != NULL){\n</code></pre></li>\n<li><p>Between <code>PREF</code>, <code>str1</code> and <code>str2</code>, there is no code to add the seperator:</p>\n\n<pre><code>while(*PREF &amp;&amp; i &lt; MAX_CONCAT_LEN)\n  {result[i++] = *PREF++;}\n// loop until end of string 1 has reached or destination buffer is full\nwhile(*str1 &amp;&amp; i &lt; MAX_CONCAT_LEN)\n  {result[i++] = *str1++;}\n// loop until end of string 2 has reached or destination buffer is full\nwhile(*str2 &amp;&amp; i &lt; MAX_CONCAT_LEN)\n  {result[i++] = *str2++;}\n</code></pre></li>\n<li><p>In <code>str4</code>, <code>slash</code> is pointing to the end of the string due to:</p>\n\n<pre><code>  while(*slash &amp;&amp; i &lt; MAX_CONCAT_LEN)\n    {result[i++] = *slash++;}\n</code></pre>\n\n<p>in the previous loop. (you normally don't need a loop here, unless the seperator could be more than one character in the future)</p></li>\n<li><p><code>len</code> isn't adjusted when <code>str4</code> is present:</p>\n\n<pre><code>size_t len = strlen(PREF)+strlen(str1)+strlen(str2)+strlen(str3);\n\nresult[len+1] = 0;\n</code></pre>\n\n<p>which cuts off <code>str4</code> anyway.</p></li>\n</ul>\n\n<p>When possible, it would be better to use the <a href=\"https://www.arduino.cc/en/Reference/StringObject\" rel=\"nofollow\"><code>String</code> class</a>, or <a href=\"http://www.cplusplus.com/reference/cstring/strcat/\" rel=\"nofollow\"><code>strcat()</code></a>.</p>\n\n<p>For some examples of string concatenation with the Arduino <code>String</code> class, see <a href=\"https://www.arduino.cc/en/Tutorial/StringAdditionOperator\" rel=\"nofollow\">here</a>, <a href=\"https://www.arduino.cc/en/Tutorial/StringAppendOperator\" rel=\"nofollow\">here</a> and <a href=\"https://www.arduino.cc/en/Tutorial/StringConstructors\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code> // adding a constant integer to a string:\n  stringThree = stringOne + 123;\n\n  // adding a constant long interger to a string:\n  stringThree = stringOne + 123456789;\n\n  // adding a constant character to a string:\n  stringThree = stringOne + 'A';\n\n  // adding a constant string to a string:\n  stringThree = stringOne +  \"abc\";\n\n  // adding two Strings together:\n  stringThree = stringOne + stringTwo;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5767763, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/484920442e3e590991234d1b039311f8?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5767763/max"}, "edited": false, "score": 0, "creation_date": 1452703983, "post_id": 34771350, "comment_id": 57289952, "body": "thanks working like charm... heve to rewritze my code...i will give feedback later, when it working withhte whole code... THANK YOU!"}], "tags": [], "owner": {"reputation": 56, "user_id": 3765091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8713af4a0a7fcd325caad31b3be9b2e5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Birkner", "link": "https://stackoverflow.com/users/3765091/j-birkner"}, "is_accepted": false, "score": 1, "last_activity_date": 1452700927, "creation_date": 1452700927, "answer_id": 34771350, "question_id": 34770031, "link": "https://stackoverflow.com/questions/34770031/function-to-join-char-array-incl-additional-sign-in-between/34771350#34771350", "title": "function to join Char array incl additional sign in between", "body": "<p>I assume you are hell-bent on sticking with C functionality and <code>const char*</code> strings. There are a couple more useful C string functions like <code>strlen</code> and <code>strcopy</code>. As you will notice from the C API, when dealing with raw <code>char*</code> strings, it is standard practice to issue a buffer into which the function should write its results, so it is clear whose responsibility it is to clean the string up (in that case: the caller's!). Therefore, you can do the following (tested <a href=\"http://cpp.sh/8d3s\" rel=\"nofollow\">here</a>):</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\n\nbool strconcat(char* result, unsigned int bufsize, const char* s1, const char* s2, const char* s3, const char* s4) {\n    const char* strings[4] = {s1, s2, s3, s4};\n    for(unsigned char i = 0; i &lt; 4; ++i) {\n        const char* s = strings[i];\n        if(!s)\n            return true;\n        unsigned int len = strlen(s);\n        if(len &gt; bufsize)\n            return false;\n        strcpy(result, s);\n        bufsize -= len * sizeof(char);\n        result += len * sizeof(char);\n        if(i &lt; 3 &amp;&amp; strings[i+1]) {\n            if(bufsize &gt; 0) {\n                result[0] = '/';\n                --bufsize;\n                ++result;\n            }\n            else\n                return false;\n        }\n    }\n    return true;\n}\n\nint main()\n{\n  char result[80] = {0};\n  const char* a = \"ab\";\n  const char* b = \"xyziuehfih\";\n  const char* c = \"ihihfeih\";\n  strconcat(result, 80, a, a, b, 0);\n  std::cout &lt;&lt; result &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5767763, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/484920442e3e590991234d1b039311f8?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5767763/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 34770421, "answer_count": 2, "score": 1, "last_activity_date": 1452700927, "creation_date": 1452697463, "last_edit_date": 1452699555, "question_id": 34770031, "link": "https://stackoverflow.com/questions/34770031/function-to-join-char-array-incl-additional-sign-in-between", "title": "function to join Char array incl additional sign in between", "body": "<p>I've tried to solve it for half a day... without success...</p>\n\n<p>I have an Struct:</p>\n\n<pre><code>typedef struct s_iomodus {\nconst char* SENSOR; \nconst char* POSITION_1;\nconst char* SHOW_MI;\nconst char* POSITION_2;\nconst char* TYPE_1;\nconst char* TYPE_2;\nconst char* DESCRIPTION;  // LOC Description of the\nconst int NRVALUES;\n} iomodus_t;\n\niomodus_t iomodus[] = {\n{ \"Relay\",\"WW_Tank\",\"WW_Pumpe_An_Aus\",\"NO_P2\",\"NO_T1\",\"NO_T2\" ,\"MAGNETIC\", 1}, //D25 :\n{ \"Relay\",\"Puffer_Tank\",\"NO_SHOW\",\"NO_P2\",\"NO_T1\",\"NO_T2\" ,\"SSR\", 1}, //D26 :\n{ \"Relay\",\"WW_Tank\",\"Valve\",\"Auslauf_unten\",\"Zu\",\"Auf\" ,\"MAGNETIC\", 2}, //D27 :\n</code></pre>\n\n<p>where i store all STATUS QUO setup of all PINS and the Position, which i send as a topic to MQTT server..</p>\n\n<p>now i have to build from this array a string to send it in VOID SETUP as a </p>\n\n<pre><code>void setup()\n{\n  Serial.begin(115200);\n\n  MQTTclient.setServer(server, 1883);\n  MQTTclient.setCallback(callback);\n  Ethernet.begin(mac, ip);\n  // Allow the hardware to sort itself out\n  delay(1500);\n\n const char *c_topic = concat_strings(iomodus[i].POSITION_1,iomodus[i].SENSOR, iomodus[i].POSITION_2);\n\n      Serial.println(c_topic);\n      MQTTclient.publish(c_topic, iomodus[i].VERSION);\n\n    }\n</code></pre>\n\n<p>my problem is... that the function does not make the right string\n<strong>It does not add \"/\" in between !</strong>\nIt should be the String like this:\n\"MQTTTOPIC_PREFIX/TEXT_str1/TEXT_str2/TEXT_str3\"\nor\n\"MQTTTOPIC_PREFIX/TEXT_str1/TEXT_str2/TEXT_str3/TEXT_str4\" <strong>if str4 is there/not empty</strong></p>\n\n<pre><code>const char *concat_strings(const char *str1, const char *str2, const char *str3,const char *str4)\n{\n  // define a buffer\n  static char result[MAX_CONCAT_LEN] = {0};\n\n  // counter part\n  int i = 0;\n  const char *slash = {\"/\"};\n  const char *PREF= {MQTTTOPIC_PREFIX};\n  size_t len = strlen(PREF)+strlen(str1)+strlen(str2)+strlen(str3);\n\n  // loop until end of ID has reached or destination buffer is full\n  while(*PREF &amp;&amp; i &lt; MAX_CONCAT_LEN)\n    {result[i++] = *PREF++;}\n  // loop until end of string 1 has reached or destination buffer is full\n  while(*str1 &amp;&amp; i &lt; MAX_CONCAT_LEN)\n    {result[i++] = *str1++;}\n  // loop until end of string 2 has reached or destination buffer is full\n  while(*str2 &amp;&amp; i &lt; MAX_CONCAT_LEN)\n    {result[i++] = *str2++;}\n\nif (str3==TRUE){\n// loop until end of SLASH has reached or destination buffer is full\n  while(*slash &amp;&amp; i &lt; MAX_CONCAT_LEN)\n    {result[i++] = *slash++;} \n  while(*str3 &amp;&amp; i &lt; MAX_CONCAT_LEN)\n   { result[i++] = *str3++;}\n   }    \n\n if (str4==TRUE){\n// loop until end of SLASH has reached or destination buffer is full\n  while(*slash &amp;&amp; i &lt; MAX_CONCAT_LEN)\n    {result[i++] = *slash++;} \n  while(*str4 &amp;&amp; i &lt; MAX_CONCAT_LEN)\n   { result[i++] = *str4++;}\n   }      \n\n  result[len+1] = 0;\n\n  return result;\n}\n</code></pre>\n\n<p>so even though I do it this way... it does not add \"/\" and does not want to recognize, if str3 or str4 is FALSE...</p>\n\n<p>Please, what is the easiest way to join the array and add \"/\" if str3 or str4 is available (str1 and str2 is always there)</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c++", "constructor", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1452699421, "post_id": 34769999, "comment_id": 57286310, "body": "Perhaps you should give a more complete example of what you are trying to do (i.e. showing the setup of the <code>foo</code> object you are trying to pass to the kernel).  If you have such an object set up as you wish on the host, you should be able to copy it to the device using <code>cudaMemcpy</code>, without invoking any object methods or constructors.  And pass-by-reference cannot be used anyway in a cuda kernel call, so perhaps you mean pass-by-pointer.  I&#39;m suggesting use pass-by-pointer, and it&#39;s unclear (to me) why that would not work."}, {"owner": {"reputation": 10644, "user_id": 722294, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/93c0ad362f097b52bf81c30d116e7319?s=128&d=identicon&r=PG", "display_name": "Jared Hoberock", "link": "https://stackoverflow.com/users/722294/jared-hoberock"}, "edited": false, "score": 0, "creation_date": 1452716955, "post_id": 34769999, "comment_id": 57298032, "body": "If the compiler invokes a copy constructor when passing a parameter to the triple chevrons, I doubt there&#39;s a way to prevent it. To work around it, you could launch <code>kernel</code> by marshaling the parameters yourself through <code>cudaSetupArgument</code> and <code>cudaLaunch</code>. These APIs might be deprecated, however."}], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 2557120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b929c8e70ccad0a692c1ba3175b36da4?s=128&d=identicon&r=PG", "display_name": "icurays1", "link": "https://stackoverflow.com/users/2557120/icurays1"}, "reply_to_user": {"reputation": 29, "user_id": 5784681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f70a65c77e4199384343924e7786d2?s=128&d=identicon&r=PG&f=1", "display_name": "Max Petreus", "link": "https://stackoverflow.com/users/5784681/max-petreus"}, "edited": false, "score": 0, "creation_date": 1452699061, "post_id": 34770124, "comment_id": 57286024, "body": "In my experience the slight performance drop is worth it, but I mostly deal with complicated objects that are only copied over to the device once during the program.  If you had simple objects that were being passed around frequently, your results may vary."}], "tags": [], "owner": {"reputation": 340, "user_id": 2557120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b929c8e70ccad0a692c1ba3175b36da4?s=128&d=identicon&r=PG", "display_name": "icurays1", "link": "https://stackoverflow.com/users/2557120/icurays1"}, "is_accepted": false, "score": 1, "last_activity_date": 1452697733, "creation_date": 1452697733, "answer_id": 34770124, "question_id": 34769999, "link": "https://stackoverflow.com/questions/34769999/prevent-copy-constructor-before-passing-object-to-kernel/34770124#34770124", "title": "Prevent copy-constructor before passing object to kernel", "body": "<p>Take a look at managed memory, for instance <a href=\"http://on-demand.gputechconf.com/supercomputing/2013/presentation/SC3120-Unified-Memory-CUDA-6.0.pdf\" rel=\"nofollow\">these</a> slides from a 2013 conference.  Essentially, if you write your class to extend the CUDA <code>Managed</code> class, and use the correct memory allocations, you can pass-by-reference and CUDA will take care of the memory mangement.</p>\n"}, {"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": false, "score": 1, "last_activity_date": 1452716548, "creation_date": 1452716548, "answer_id": 34776323, "question_id": 34769999, "link": "https://stackoverflow.com/questions/34769999/prevent-copy-constructor-before-passing-object-to-kernel/34776323#34776323", "title": "Prevent copy-constructor before passing object to kernel", "body": "<p>My suggestion would be to pass <code>foo</code> by pointer:</p>\n\n<pre><code>$ cat t1041.cu\n#include &lt;stdio.h&gt;\n\nclass Foo {\n  public:\n    __host__ __device__\n    void chirp() { printf(\"Hello!\\n\"); }\n    __host__ __device__\n    Foo(const Foo&amp;) {printf(\"Called copy constructor!\\n\");}\n    __host__ __device__\n    Foo(){};\n};\n\n\n__global__ void kernel(Foo *foo) {\n\n  foo-&gt;chirp();\n }\n\nint main(){\n\n  Foo myfoo, *d_foo;\n  cudaMalloc(&amp;d_foo, sizeof(Foo));\n  cudaMemcpy(d_foo, &amp;myfoo, sizeof(Foo), cudaMemcpyHostToDevice);\n  kernel&lt;&lt;&lt;1,1&gt;&gt;&gt;(d_foo);\n  cudaDeviceSynchronize();\n}\n\n$ nvcc -o t1041 t1041.cu\n$ ./t1041\nHello!\n$\n</code></pre>\n\n<p>You could also use managed memory, on platforms that support it, as suggested by @icurays1.</p>\n"}], "owner": {"reputation": 29, "user_id": 5784681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f70a65c77e4199384343924e7786d2?s=128&d=identicon&r=PG&f=1", "display_name": "Max Petreus", "link": "https://stackoverflow.com/users/5784681/max-petreus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1515244743, "creation_date": 1452697375, "last_edit_date": 1515244743, "question_id": 34769999, "link": "https://stackoverflow.com/questions/34769999/prevent-copy-constructor-before-passing-object-to-kernel", "title": "Prevent copy-constructor before passing object to kernel", "body": "<p>As I understand it, when I pass a struct or class to a kernel, the copy-constructor is called on it host-side, and the copied object is then sent to the device with <code>memcpy</code>. Here is an example:</p>\n\n<pre><code>class Foo {\n    Foo(const Foo&amp;) {std::cout &lt;&lt; \"Called before kernel execution\";}\n};\n\n__global__ void kernel(Foo foo) { }\n</code></pre>\n\n<p>Can I somehow prevent the copy-constructor from being called, and make CUDA <code>memcpy</code> the object to device-memory directly? Passing <code>foo</code> by reference wouldn't work, since it would mix up device and host memory.</p>\n"}, {"tags": ["android", "c++", "ios", "floating-point", "fixed-point"], "answers": [{"comments": [{"owner": {"reputation": 1645, "user_id": 4869914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/94e94ff39b0e876b5edd59dd8ee58c48?s=128&d=identicon&r=PG&f=1", "display_name": "keyboard", "link": "https://stackoverflow.com/users/4869914/keyboard"}, "edited": false, "score": 0, "creation_date": 1452701672, "post_id": 34771143, "comment_id": 57288085, "body": "Thanks for this really in-detail answer!"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1452728436, "last_edit_date": 1452728436, "creation_date": 1452700371, "answer_id": 34771143, "question_id": 34769921, "link": "https://stackoverflow.com/questions/34769921/fixed-point-math-is-the-conversion-from-float-safe-to-always-yield-the-same-re/34771143#34771143", "title": "Fixed-Point-Math - Is the conversion from float safe to always yield the same result?", "body": "<p>Assuming that:</p>\n\n<ul>\n<li><p>both machines use IEEE-754 single precision floating point representation for <code>float</code>, and</p></li>\n<li><p>the value <code>a</code> is \"reasonable\"</p></li>\n</ul>\n\n<p>the conversion should be portable, with the possible exception of the case where the absolute value of <code>a</code> is just slightly less than 0.5&times;2<sup>&minus;16</sup>.</p>\n\n<p>Multiplying a (binary) floating point number by a power of 2 (in this case 2<sup>16</sup>) is precise provided that it doesn't cause a floating point overflow (or underflow in the case of negative powers of 2). Every floating point implementation should handle that multiplication in precisely the same way.</p>\n\n<p>The C++ standard requires conversion from floating point to integer types to truncate towards 0, so the rounding strategy is correct. </p>\n\n<p>Adding 0.5 to <code>temp</code> will produce the correct result in almost all cases.</p>\n\n<p>For intermediate values of <code>temp</code>, the result will be precise.</p>\n\n<p>If <code>temp</code> is greater than 2<sup>23</sup>, the addition will have no effect, but there is no fraction to be rounded, so the end result will be predictable as long as there is no overflow when casting back to an integer.</p>\n\n<p>If <code>temp</code> is less than 1.0, the sum will be imprecise, because the exponent will be increased. The addition should then <em>round</em> to produce the correct result. Here, the only case of interest is where the truncated sum might be either 0 or 1; if <code>temp</code> is not close to 0.5, the sum cannot be 1.0 and the truncated sum must be 0. If <code>temp</code> is at least 0.5, the sum must be at least 1.0, and the truncated sum must be 1.</p>\n\n<p>But if <code>temp</code> is just slightly less than 0.5, rounding of the sum may be significant. In particular, if <code>temp</code> is precisely 0.5&minus;2<sup>&minus;25</sup>, there is an ambiguity. The result of the sum will be 1.0&minus;2<sup>&minus;25</sup>, but this value is not precisely representable as an IEEE-754 single-precision float. Moreover, the error term is precisely one-half of a ULP. So the result needs to be rounded, and that will obey the rounding mode of the implementation.</p>\n\n<p>The default rounding mode for IEEE-754 is <a href=\"https://en.wikipedia.org/wiki/Rounding#Round_half_to_even\" rel=\"nofollow\">\"banker's rounding\"</a>, where rounding of a value of exactly one-half is towards whichever of the two possibilities has a 0 as its low-order bit. That will favour rounding 0.5&minus;2<sup>&minus;25</sup> + 0.5 to 1.0, which will produce the incorrect integer truncation 1. However, it is possible that a given implementation uses a different rounding mode, perhaps because it has been set using <a href=\"http://en.cppreference.com/w/cpp/numeric/fenv/feround\" rel=\"nofollow\"><code>std::fesetround</code></a>.</p>\n\n<p>All of the above applies equally to negative values.</p>\n"}], "owner": {"reputation": 1645, "user_id": 4869914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/94e94ff39b0e876b5edd59dd8ee58c48?s=128&d=identicon&r=PG&f=1", "display_name": "keyboard", "link": "https://stackoverflow.com/users/4869914/keyboard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 34771143, "answer_count": 1, "score": 4, "last_activity_date": 1452728436, "creation_date": 1452697178, "question_id": 34769921, "link": "https://stackoverflow.com/questions/34769921/fixed-point-math-is-the-conversion-from-float-safe-to-always-yield-the-same-re", "title": "Fixed-Point-Math - Is the conversion from float safe to always yield the same result?", "body": "<p>I'm using libfixmath for a simulation the needs to take place on two devices (iOS / Android) at the same time and be perfectly accurate.</p>\n\n<p>The simulation needs to be fed with some initial float parameters. I'm wondering, if it's safe to use floats and then convert them into fix16_t in the way below (the function is from the library) or if I need to feed the simulation with fix16_t values already?</p>\n\n<p>Hence, is it possible that two different devices calculate different results with the same input for the function below, because of floating point inaccuracy?    </p>\n\n<pre><code>typedef int32_t fix16_t;\nstatic const fix16_t fix16_one = 0x00010000; /*!&lt; fix16_t value of 1 */\n\nstatic inline fix16_t fix16_from_float(float a)\n{\n    float temp = a * fix16_one; \n\n    // rounding\n    temp += (temp &gt;= 0) ? 0.5f : -0.5f;\n    return (fix16_t)temp;\n}\n</code></pre>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 0, "creation_date": 1452697116, "post_id": 34769757, "comment_id": 57284554, "body": "Possibly, when you do all your computation in CPU or if you visualize the matrix, it is already in cash which makes your loops fast."}, {"owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "reply_to_user": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 0, "creation_date": 1452697222, "post_id": 34769757, "comment_id": 57284622, "body": "Ok, but why would it not be otherwise? By the way I am using Visual Studio 2013 64-bit."}, {"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 0, "creation_date": 1452697919, "post_id": 34769757, "comment_id": 57285155, "body": "I am not an expert on CUDA or NVidia, but I know that generally cost of copying data prevents using GPU in most applications. Particularly, for matrix N*N, you usually need to offload O(N^3) operation to GPU to make it faster than CPU."}, {"owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "reply_to_user": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 0, "creation_date": 1452698123, "post_id": 34769757, "comment_id": 57285315, "body": "Sure, but that is already done when I go into the for-loops. And the raycast four times takes 0.16 seconds including copying back and forth to the GPU, compared to 2.2 seconds using only the CPU. The question is why pure CPU-code suddenly is extremely slow. It is probably connected to the GPU somehow, but I cannot see it."}, {"owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "edited": false, "score": 0, "creation_date": 1452698323, "post_id": 34769757, "comment_id": 57285476, "body": "The copying is already done, but it might be a copy to the main memory, not to the cash of the core that does further calculation. Again, I am not an expert on this hardware..."}], "answers": [{"comments": [{"owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "edited": false, "score": 0, "creation_date": 1452702036, "post_id": 34770739, "comment_id": 57288369, "body": "I don&#39;t get what you mean. In the for-loop I am reading from Error, ErrorDx, ErrorDy and ErrorDz, but they are cv::Mat matrices (opencv) which are created on the CPU. Why would the result in PCI-transactions?"}, {"owner": {"reputation": 33098, "user_id": 116186, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/dc5f7c3937e6844cb776d2004b903578?s=128&d=identicon&r=PG", "display_name": "Petter", "link": "https://stackoverflow.com/users/116186/petter"}, "edited": false, "score": 0, "creation_date": 1452702410, "post_id": 34770739, "comment_id": 57288661, "body": "Well, we don\u2019t know since we don\u2019t see the code of getErrorMatrix. For all I know, cv::Mat could be created from existing memory. But looking at what is passed to getErrorMatrix, it seems unlikely."}, {"owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "edited": false, "score": 0, "creation_date": 1452702959, "post_id": 34770739, "comment_id": 57289110, "body": "I add getErrorMatrix()"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "edited": false, "score": 0, "creation_date": 1452723214, "post_id": 34770739, "comment_id": 57301151, "body": "@Erik: And you pass it into the GPU kernel, correct?  So if the GPU does DMA on that buffer, it might affect your later reads.  It&#39;s a bit hard to follow what&#39;s going on here because you seem to be passing a lot of data around through class members and not function parameters."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1452699382, "creation_date": 1452699382, "answer_id": 34770739, "question_id": 34769757, "link": "https://stackoverflow.com/questions/34769757/cpu-code-runs-slow-after-gpu-called/34770739#34770739", "title": "CPU code runs slow after GPU called", "body": "<p>I don't know which calls in your code could possibly do it, but it seems likely that your GPU calculation includes a step that moves the data into VRAM, and then instead of copying the result back, your GPU has a shared-address programming model and it is simply mapping the VRAM into the address space of the CPU code, such that every subsequent access costs a PCI transaction.</p>\n\n<p>Or perhaps the GPU driver is changing page table flags on the buffer you passed in, such as marking pages as non-cacheable, in order to make it usable for DMA.</p>\n\n<p>Try following the GPU operation by immediately cloning the entirety of your data into a brand-new buffer, wholly in CPU memory and never seen by the GPU driver, and use that copy for the subsequent calculation.</p>\n"}, {"tags": [], "owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "is_accepted": false, "score": 1, "last_activity_date": 1452764171, "creation_date": 1452764171, "answer_id": 34786026, "question_id": 34769757, "link": "https://stackoverflow.com/questions/34769757/cpu-code-runs-slow-after-gpu-called/34786026#34786026", "title": "CPU code runs slow after GPU called", "body": "<p>Because of the strange behavior I started to suspect that it was something with the settings in Visual Studio 2013. It turned out that even if I was building with the Release version, when I launched the program it was with debugging. Adding the button \"Start without debugging\" did the trick, (or ctrl-F5). In other words, just a silly mistake by me. </p>\n"}], "owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1452764238, "creation_date": 1452696789, "last_edit_date": 1452764238, "question_id": 34769757, "link": "https://stackoverflow.com/questions/34769757/cpu-code-runs-slow-after-gpu-called", "title": "CPU code runs slow after GPU called", "body": "<p>I have, in my opinion, a rather strange problem. I have a piece of code that starts with using the GPU to create four matrices which takes 0.15 seconds, then the matrices are copied to the host and put into <code>cv::Mat</code> matrices. Thereafter two nested for-loops are used to iterate through the images and perform some computations.</p>\n\n<p>The for-loop runs entirely on the CPU and takes 14 seconds to finish if I have used the GPU to compute the matrices before. If I instead use the CPU all the way, also when computing the four matrices, it takes 2 seconds to compute the matrices, but only 1.2 seconds to run the for-loop.</p>\n\n<p>Why does it take so long time if I use the GPU before the for-loop. The GPU has nothing to do with the GPU. </p>\n\n<p>Another strange thing is that if I after that I have called the GPU and created the <code>cv::Mat</code> matrices on the CPU, I visualize an image like this</p>\n\n<pre><code>    cv::imshow(\"Error\", Error * 100);\n    cv::waitKey(0);\n</code></pre>\n\n<p>before the loop, then the loop just takes 1.4 seconds.</p>\n\n<p><strong>Another strange thing is that if I run diagnostics as adminstrator, it runs perfectly, and faster. Also when profiling the code runs significantly faster.</strong></p>\n\n<p>I am using Visual Studio 2013 on a 64-bit machine.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>void ModelTracker::computeAnalyticLSqRay(const Eigen::VectorXd &amp;Xi, const cv::Mat &amp;depthImg){\nLieAlgebra::LieAlgebra lie;\nEigen::MatrixXd A = Eigen::MatrixXd::Zero(6, 6);\nEigen::VectorXd b = Eigen::VectorXd::Zero(6);\n\n// Vectors for rotation and translation\nEigen::Vector3d xi(Xi(0), Xi(1), Xi(2));\nEigen::Vector3d t(Xi(3), Xi(4), Xi(5));\n\n// Vectors for outer derivative\ndouble delta = DELTADERIV;\n\nEigen::VectorXd XiDX = Xi;\nEigen::VectorXd XiDY = Xi;\nEigen::VectorXd XiDZ = Xi;\n\nXiDX(3) += delta;\nXiDY(4) += delta;\nXiDZ(5) += delta;\n\n//cv::Mat Error = rayCast(Xi, depthImg);\n//cv::Mat ErrorDX = rayCast(XiDX, depthImg);\n//cv::Mat ErrorDY = rayCast(XiDY, depthImg);\n//cv::Mat ErrorDZ = rayCast(XiDZ, depthImg);\n\n// Here the GPU is called from the function GPURayCast\n\ndouble t1 = omp_get_wtime();\ncv::Mat Error = GPUrayCast(Xi, depthImg);\ncv::Mat ErrorDX = GPUrayCast(XiDX, depthImg);\ncv::Mat ErrorDY = GPUrayCast(XiDY, depthImg);\ncv::Mat ErrorDZ = GPUrayCast(XiDZ, depthImg);\ndouble t2 = omp_get_wtime();\nstd::cout &lt;&lt; t2 - t1 &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"GPURayCast Done\" &lt;&lt; std::endl;\ncv::imshow(\"Error\", Error * 100);\ncv::waitKey(0);\nEigen::MatrixXd Atmp = Eigen::MatrixXd::Zero(6, 6);\nEigen::VectorXd btmp = Eigen::VectorXd::Zero(6, 1);\n\nt1 = omp_get_wtime();\nfor (int i = 0; i &lt; depthImg.rows; i++){\n    for (int j = 0; j &lt; depthImg.cols; ++j){\n        double z = depthImg.at&lt;double&gt;(i, j);\n        if (!isnan(z)){\n            double V0 = Error.at&lt;double&gt;(i, j);\n            if (!isnan(V0)){\n                Eigen::Vector3d pLocal = reproject3p(j, i, z);\n                double V0Dx = ErrorDX.at&lt;double&gt;(i, j);\n                double V0Dy = ErrorDY.at&lt;double&gt;(i, j);\n                double V0Dz = ErrorDZ.at&lt;double&gt;(i, j);\n\n                if (!isnan(V0Dx) &amp;&amp; !isnan(V0Dy) &amp;&amp; !isnan(V0Dz)){\n                    Eigen::VectorXd grad = getRayAnalyticGradient(xi, t, pLocal, V0, V0Dx, V0Dy, V0Dz, delta, i, j, z);\n\n                    bool gradCheck = checkGradient(grad);\n\n                    if (gradCheck){\n                        Atmp += grad*grad.transpose();\n                        btmp += V0*grad;\n                    }\n\n                }\n            }\n        }\n    }\n}\nt2 = omp_get_wtime();\nstd::cout &lt;&lt; \"Time for computing matrices: \" &lt;&lt; t2 - t1&lt;&lt; std::endl;\n//std::cout &lt;&lt; btmp &lt;&lt; std::endl;\nALsq = Atmp;\nbLsq = btmp;\n}\n</code></pre>\n\n<p>GPUrayCast:</p>\n\n<pre><code>cv::Mat ModelTracker::GPUrayCast(const Eigen::VectorXd &amp;Xi, const cv::Mat &amp;depthImg){\nLieAlgebra::LieAlgebra lie;\ndouble *error = new double[depthImg.rows*depthImg.cols];\nmemset(error, 0, depthImg.cols*depthImg.rows);\nEigen::Matrix4d camera = lie.getTransfMatrix(Xi);\ndouble ptrCamera[12] = { 0 };\ncpyToCamera(ptrCamera, camera);\ndouble3 gridStart = { start(0), start(1), start(2) };\nGPURayCast(error, depthImg.rows, depthImg.cols, fx, fy, cx, cy, RESOLUTION, step, MAXITR, gridStart, MAXDISTANCE, RAYTHRESHOLD, ptrCamera);\ncv::Mat tmp =  getErrorMatrix(error, depthImg.rows, depthImg.cols);\ndelete [] error;\nreturn tmp;\n}\n</code></pre>\n\n<p>GPURayCast: (in the .cu-file)</p>\n\n<pre><code>extern \"C\" void GPURayCast(double *target, const int rows, const int cols, const double fx, const double fy, const double cx, const double cy, const int resolution, const double gridStep, const int maxItr, const double3 gridStart, const int maxDistance, const double rayThreshold, double *camera){\nuploadGlobalCamera(camera);\n\nconst int nbrOfBlocksX = (rows) / L + ((rows) % L != 0 ? 1 : 0);\nconst int nbrOfBlocksY = cols / L + (cols % L != 0 ? 1 : 0);\nconst int BXBY = nbrOfBlocksX * nbrOfBlocksY;\n\ndim3 Blocks(nbrOfBlocksX, nbrOfBlocksY);\ndim3 Threads(L, L);\n\n\nCudaSafeCall(cudaMemset(devTarget, 0, rows*cols*sizeof(double)));\n\nrayCast &lt;&lt; &lt;Blocks, Threads &gt;&gt; &gt;(devGrid, devDepthImg, rows, cols, fx, fy, cx, cy, resolution, devTarget, gridStep, maxItr, gridStart, maxDistance, rayThreshold);\nCudaSafeCall(cudaThreadSynchronize());\nCudaCheckError();\nCudaSafeCall(cudaMemcpy(target, devTarget, rows*cols*sizeof(double), cudaMemcpyDeviceToHost));\n}\n</code></pre>\n\n<p>Doing everything on CPU (Note that the for-loops are exactly the same as in void <code>ModelTracker::computeAnalyticLSqRay</code> above):</p>\n\n<pre><code>void ModelTracker::CPUcomputeAnalyticLSqRay(const Eigen::VectorXd &amp;Xi, const cv::Mat &amp;depthImg){\nLieAlgebra::LieAlgebra lie;\nEigen::MatrixXd A = Eigen::MatrixXd::Zero(6, 6);\nEigen::VectorXd b = Eigen::VectorXd::Zero(6);\n\n// Vectors for rotation and translation\nEigen::Vector3d xi(Xi(0), Xi(1), Xi(2));\nEigen::Vector3d t(Xi(3), Xi(4), Xi(5));\n\n// Vectors for outer derivative\ndouble delta = DELTADERIV;\n\nEigen::VectorXd XiDX = Xi;\nEigen::VectorXd XiDY = Xi;\nEigen::VectorXd XiDZ = Xi;\n\n//Eigen::VectorXd XiRX = Xi;\n//Eigen::VectorXd XiRY = Xi;\n//Eigen::VectorXd XiRZ = Xi;\n\n\nXiDX(3) += delta;\nXiDY(4) += delta;\nXiDZ(5) += delta;\n\ndouble t1 = omp_get_wtime();\ncv::Mat Error = rayCast(Xi, depthImg);\ncv::Mat ErrorDX = rayCast(XiDX, depthImg);\ncv::Mat ErrorDY = rayCast(XiDY, depthImg);\ncv::Mat ErrorDZ = rayCast(XiDZ, depthImg);\ndouble t2 = omp_get_wtime();\nstd::cout &lt;&lt; t2 - t1 &lt;&lt; std::endl;\n//double t1 = omp_get_wtime();\n//cv::Mat Error = GPUrayCast(Xi, depthImg);\n//cv::Mat ErrorDX = GPUrayCast(XiDX, depthImg);\n//cv::Mat ErrorDY = GPUrayCast(XiDY, depthImg);\n//cv::Mat ErrorDZ = GPUrayCast(XiDZ, depthImg);\n//double t2 = omp_get_wtime();\n//std::cout &lt;&lt; t2 - t1 &lt;&lt; std::endl;\n//std::cout &lt;&lt; \"GPURayCast Done\" &lt;&lt; std::endl;\n//cv::imshow(\"Error\", Error * 100);\n//cv::waitKey(0);\nEigen::MatrixXd Atmp = Eigen::MatrixXd::Zero(6, 6);\nEigen::VectorXd btmp = Eigen::VectorXd::Zero(6, 1);\n\nt1 = omp_get_wtime();\nfor (int i = 0; i &lt; depthImg.rows; i++){\n    for (int j = 0; j &lt; depthImg.cols; ++j){\n        double z = depthImg.at&lt;double&gt;(i, j);\n        if (!isnan(z)){\n            double V0 = Error.at&lt;double&gt;(i, j);\n            if (!isnan(V0)){\n                Eigen::Vector3d pLocal = reproject3p(j, i, z);\n                double V0Dx = ErrorDX.at&lt;double&gt;(i, j);\n                double V0Dy = ErrorDY.at&lt;double&gt;(i, j);\n                double V0Dz = ErrorDZ.at&lt;double&gt;(i, j);\n\n                if (!isnan(V0Dx) &amp;&amp; !isnan(V0Dy) &amp;&amp; !isnan(V0Dz)){\n                    Eigen::VectorXd grad = getRayAnalyticGradient(xi, t, pLocal, V0, V0Dx, V0Dy, V0Dz, delta, i, j, z);\n\n                    bool gradCheck = checkGradient(grad);\n\n                    if (gradCheck){\n                        Atmp += grad*grad.transpose();\n                        btmp += V0*grad;\n                    }\n\n                }\n            }\n        }\n    }\n}\nt2 = omp_get_wtime();\nstd::cout &lt;&lt; \"Time for computing matrices: \" &lt;&lt; t2 - t1 &lt;&lt; std::endl;\n//std::cout &lt;&lt; btmp &lt;&lt; std::endl;\nALsq = Atmp;\nbLsq = btmp;\n}\n</code></pre>\n\n<p>getErrorMatrix():</p>\n\n<pre><code>cv::Mat ModelTracker::getErrorMatrix(double *error, const int rows, const int cols){\ncv::Mat tmp = cv::Mat::zeros(rows, cols, CV_64FC1);\nfor (int i = 0; i &lt; rows; ++i){\n    for (int j = 0; j &lt; cols; ++j){\n        tmp.at&lt;double&gt;(i, j) = error[j + i*cols];\n    }\n}\nreturn tmp;\n}\n</code></pre>\n"}]