[{"tags": ["c++", "switch-statement", "mouseevent", "sdl-2"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4420869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a5d22cd654f1aafc7b8c718e14843d1?s=128&d=identicon&r=PG&f=1", "display_name": "willgosling", "link": "https://stackoverflow.com/users/4420869/willgosling"}, "edited": false, "score": 0, "creation_date": 1431010510, "post_id": 30095675, "comment_id": 48320533, "body": "Great thankyou very much. Seems so simple when you explain it like that. Dont know why i didnt think of it :)"}], "tags": [], "owner": {"reputation": 331, "user_id": 4815626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e9c0151b29d0c905195edeb6b4cee0c?s=128&d=identicon&r=PG", "display_name": "nkcode", "link": "https://stackoverflow.com/users/4815626/nkcode"}, "is_accepted": true, "score": 1, "last_activity_date": 1430987246, "creation_date": 1430987246, "answer_id": 30095675, "question_id": 30089548, "link": "https://stackoverflow.com/questions/30089548/sdl-how-to-get-the-mouse-motion-while-the-left-mouse-button-is-down-using-case/30095675#30095675", "title": "SDL: how to get the mouse motion while the left mouse button is down using case statement", "body": "<p>on <code>SDL_MOUSEBUTTONDOWN</code> set variable click = true ans save x,y  coordinates,\non <code>SDL_MOUSEMOTION</code> check if click == true and update x,y coordinates,<br>\non <code>SDL_MOUSEBUTTONUP</code> set click = false and calculate distance.</p>\n\n<p><a href=\"http://lazyfoo.net/tutorials/SDL/17_mouse_events/index.php\" rel=\"nofollow\">http://lazyfoo.net/tutorials/SDL/17_mouse_events/index.php</a></p>\n"}], "owner": {"reputation": 23, "user_id": 4420869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a5d22cd654f1aafc7b8c718e14843d1?s=128&d=identicon&r=PG&f=1", "display_name": "willgosling", "link": "https://stackoverflow.com/users/4420869/willgosling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2977, "favorite_count": 0, "accepted_answer_id": 30095675, "answer_count": 1, "score": 0, "last_activity_date": 1430987246, "creation_date": 1430955970, "question_id": 30089548, "link": "https://stackoverflow.com/questions/30089548/sdl-how-to-get-the-mouse-motion-while-the-left-mouse-button-is-down-using-case", "title": "SDL: how to get the mouse motion while the left mouse button is down using case statement", "body": "<p>I am currently working with SDL2 and am fairly new to it. I am trying to use case statments to get the mouse motion coordinates only while the left mouse button is pressed down.</p>\n\n<p>In the end, I need to be able to click on a object and find how much the mouse is dragged from that selected object.</p>\n\n<p>So far I have been able to get the mouse press and the mouse motion working separately, but not at the same time.</p>\n\n<p>Here is my code for the mouse press event:</p>\n\n<pre><code>void SDL::OnEvent(SDL_Event *_event)\n{\nMallet mallet;\n\nswitch (_event-&gt;type)\n{\ncase SDL_QUIT:\n    m_running = false;\n    break;\n\ndefault:\n    break;\n\n\ncase SDL_KEYUP:\n    switch (_event-&gt;key.keysym.sym)\n    {\n    case SDLK_SPACE:\n        if(m_playerTurn == 1)\n            m_playerTurn = 2;\n        else\n            m_playerTurn = 1;\n\n        std::cout&lt;&lt;\"player turn = \"&lt;&lt;m_playerTurn&lt;&lt;std::endl;\n        break;\n\n    }\n\n\ncase SDL_MOUSEBUTTONDOWN:\n\n    switch(_event-&gt;button.button)\n    {\n    case SDL_BUTTON_LEFT:\n        int x = _event-&gt;button.x;\n        int y = _event-&gt;button.y;\n\n        if(m_playerTurn == 1)\n        {\n            bool collision = checkCollision(x, y, m_player1-&gt;getTeamMallets(), mallet);\n            if(collision)\n                std::cout&lt;&lt;\"collision with P1\"&lt;&lt;std::endl;\n        }\n\n        if(m_playerTurn == 2)\n        {\n            bool collision = checkCollision(x, y, m_player2-&gt;getTeamMallets(), mallet);\n            if(collision)\n                std::cout&lt;&lt;\"collision with P2\"&lt;&lt;std::endl;\n        }\n\n        break;\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Can anyone help.</p>\n\n<p>Many thanks in advance.</p>\n\n<p>Will</p>\n"}, {"tags": ["c++", "raspberry-pi", "ifstream"], "comments": [{"owner": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "edited": false, "score": 0, "creation_date": 1430956249, "post_id": 30089527, "comment_id": 48292148, "body": "You wouldn&#39;t even need to call close, because RAII is amazing. I would guess it is a problem with the system, the C++ code looks fine to me."}, {"owner": {"reputation": 255, "user_id": 3359379, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2a94579c86c2d9b242961a1c56fc39b7?s=128&d=identicon&r=PG&f=1", "display_name": "ch0l1n3", "link": "https://stackoverflow.com/users/3359379/ch0l1n3"}, "reply_to_user": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "edited": false, "score": 0, "creation_date": 1430956800, "post_id": 30089527, "comment_id": 48292300, "body": "Damn. That explains why it didn&#39;t do anything. Hmmm any ideas on how I could figure out what&#39;s going on?"}, {"owner": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "edited": false, "score": 0, "creation_date": 1430981202, "post_id": 30089527, "comment_id": 48299801, "body": "Oh, to figure the thing out you could use the bits of the fstream (goot, eof, bad, fail) though that will not tell you what went wrong."}], "answers": [{"tags": [], "owner": {"reputation": 745, "user_id": 6674213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7826731c884808f91e604aae162c2813?s=128&d=identicon&r=PG&f=1", "display_name": "brad", "link": "https://stackoverflow.com/users/6674213/brad"}, "is_accepted": false, "score": 0, "last_activity_date": 1506694797, "creation_date": 1506694797, "answer_id": 46490815, "question_id": 30089527, "link": "https://stackoverflow.com/questions/30089527/reading-files-with-ifstream-not-working-after-several-file-reads/46490815#46490815", "title": "Reading files with ifstream not working after several file reads", "body": "<p>I just had a similar problem, where ifstream no longer worked after running the program for awhile. It seemed it was no longer working after too many files were opened, even though I was also calling file.close(). It turned out I had an fopen() elsewhere in the program without an fclose().  I would check anywhere else you are opening files and make sure they are also being closed.</p>\n"}], "owner": {"reputation": 255, "user_id": 3359379, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2a94579c86c2d9b242961a1c56fc39b7?s=128&d=identicon&r=PG&f=1", "display_name": "ch0l1n3", "link": "https://stackoverflow.com/users/3359379/ch0l1n3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506694797, "creation_date": 1430955823, "question_id": 30089527, "link": "https://stackoverflow.com/questions/30089527/reading-files-with-ifstream-not-working-after-several-file-reads", "title": "Reading files with ifstream not working after several file reads", "body": "<p>So I have written this application for the raspberry pi to play around with RFID tags. \nAnyway, the point of it is that a tag comes near the sensor, I read the tag and then I open a file containing the tags and the settings of the individual using an ifstream.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>bool Config::isTagInConfig(std::string tagID)\n{\n    /// Opens humans.cfg file and checks if tag is inside.\n    std::ifstream file(PATH);\n    std::string str;\n    std::string delimiter = \"\\t\";\n\n    while (std::getline(file, str))\n    {\n        /// Since the tagID is always the first column, then the next line\n        /// strictly obtains the tagID ALWAYS.\n        std::string file_tagID = str.substr(0, str.find(delimiter));\n        if (tagID == file_tagID)\n        {\n                file.close();\n                return true;\n\n        }\n    }\n\n    std::cout &lt;&lt; tagID &lt;&lt; \" not found in Config file...\" &lt;&lt; std::endl;\n    file.close();\n    /// Consider adding a helper here, to add unknown tags.\n    return false;\n}\n</code></pre>\n\n<p>The code works fine for the first few hours, but after a while for some reason the file cannot be read...\nI keep getting the message the the tag id was not found in the Config file.</p>\n\n<p>I have tried searching why this would happen. I used to not have the line 'file.close()' but I recently changed that, yet the bug persists.</p>\n\n<p>Any idea what I'm doing wrong?</p>\n\n<p>Thank you for reading!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "edited": false, "score": 1, "creation_date": 1430955780, "post_id": 30089506, "comment_id": 48292005, "body": "What type does val have?"}, {"owner": {"reputation": 83, "user_id": 4297762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9c2ef59b9a7d89924ae397a038548e?s=128&d=identicon&r=PG&f=1", "display_name": "Knippie", "link": "https://stackoverflow.com/users/4297762/knippie"}, "reply_to_user": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "edited": false, "score": 0, "creation_date": 1430955907, "post_id": 30089506, "comment_id": 48292038, "body": "Perhaps I should have mentioned that val is a double"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1430956142, "post_id": 30089506, "comment_id": 48292110, "body": "That can&#39;t be done trivially; it requires most of a compiler and enough information from the compilation of the main code for whatever function translates the string into a call to <code>bbox.set1.vect1.push_back(foo)</code>.  Decidedly non-trivial; decidedly non-standard.  Not undoable; debuggers translate strings typed at them into function calls.  But outside a debugger, it&#39;s kinda hard..."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4297762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9c2ef59b9a7d89924ae397a038548e?s=128&d=identicon&r=PG&f=1", "display_name": "Knippie", "link": "https://stackoverflow.com/users/4297762/knippie"}, "edited": false, "score": 0, "creation_date": 1430956995, "post_id": 30089556, "comment_id": 48292368, "body": "All right, I think I&#39;d rather use a double switch than the map container (which seems quite complicated). But thanks for your quick reply!"}], "tags": [], "owner": {"reputation": 29810, "user_id": 423170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H9kNQ.png?s=128&g=1", "display_name": "Frxstrem", "link": "https://stackoverflow.com/users/423170/frxstrem"}, "is_accepted": false, "score": 6, "last_activity_date": 1430956021, "creation_date": 1430956021, "answer_id": 30089556, "question_id": 30089506, "link": "https://stackoverflow.com/questions/30089506/c-using-strings-to-access-variables/30089556#30089556", "title": "C++ Using strings to access variables", "body": "<p>No, C++ does not support this, since variable names are resolved at compile time, which means that by the time the program runs, the variable names themselves are meaningless. (In other words, the name <code>bbox</code> has in practice been replaced by a set of numbers representing the object called by that variable name.)</p>\n\n<p>If you <em>really</em> need to something like this, you should consider using a container such as <a href=\"http://www.cplusplus.com/reference/map/map/\" rel=\"noreferrer\"><code>std::map</code></a>, which you can use to map strings to objects. You can't access them like variables, though, but you can dynamically build strings to decide which object to get.</p>\n"}, {"tags": [], "owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "is_accepted": false, "score": 2, "last_activity_date": 1430956060, "creation_date": 1430956060, "answer_id": 30089570, "question_id": 30089506, "link": "https://stackoverflow.com/questions/30089506/c-using-strings-to-access-variables/30089570#30089570", "title": "C++ Using strings to access variables", "body": "<p>What you are looking for is some method of reflection, which C++ does not natively support. There is no way to do what you want directly.</p>\n\n<p>Instead you will need to provide your own support.</p>\n"}], "owner": {"reputation": 83, "user_id": 4297762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9c2ef59b9a7d89924ae397a038548e?s=128&d=identicon&r=PG&f=1", "display_name": "Knippie", "link": "https://stackoverflow.com/users/4297762/knippie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "closed_date": 1430956349, "answer_count": 2, "score": 1, "last_activity_date": 1430956060, "creation_date": 1430955678, "last_edit_date": 1430955958, "question_id": 30089506, "link": "https://stackoverflow.com/questions/30089506/c-using-strings-to-access-variables", "closed_reason": "Duplicate", "title": "C++ Using strings to access variables", "body": "<p>Suppose I have a structure bbox containing 6 sets, where each set contains 4 vectors. I can add a vector element by using bbox.set1.vect1.push_back(foo). However, I'm reading data from a file and I'm looking for an elegant way to store the data in the vectors. Using a double for() loop with indices i (1 to 6) and k (1 to 4) I've tried the following (using string concatenation):</p>\n\n<pre><code>string test1 = \"bbox.set\";\nstring test2 = \".vect\";\nstring fin = test1 + to_string(i) + test2 + to_string(k);\nfin.push_back(val);\n</code></pre>\n\n<p>Though the code compiles fine, nothing seems to happen. Explicitly writing bbox.set1.vect1.push_back(foo) does work. Can this be done in such a way? In another topic I've read that C does not support changing/creating variable names during runtime, but here I simply try to access an existing variable.</p>\n"}, {"tags": ["c++", "c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 2, "creation_date": 1430955328, "post_id": 30089452, "comment_id": 48291860, "body": "well <code>unsigned int</code> does not overflow, it wraps around modulo max_size"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430955380, "post_id": 30089452, "comment_id": 48291881, "body": "@vsoftco: Right, unsigned integer types don&#39;t overflow -- which makes it pretty difficult to define what would happen if they did. 8-)}"}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 0, "creation_date": 1430955419, "post_id": 30089452, "comment_id": 48291890, "body": "You&#39;re absolutely right. In fact a pointer is more of an <code>unsigned</code> than an <code>int</code>, which is why first paragraph and @Mike Robinson&#39;s answers are inaccurate. I&#39;ll update accordingly."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430955453, "post_id": 30089452, "comment_id": 48291901, "body": "@EyasSH that&#39;s why I asked the question. A pointer usually stores the same values as a <code>size_t</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1430955500, "post_id": 30089452, "comment_id": 48291918, "body": "@EyasSH: Pointers are neither signed nor unsigned, and there&#39;s no basis in the standard for saying that they&#39;re more similar to unsigned integers than to signed integers."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 0, "creation_date": 1430955557, "post_id": 30089452, "comment_id": 48291940, "body": "It should still be &#39;undefined&#39; or &#39;unspecified&#39; behavior. Let me  look up the exact relevant parts."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1430955619, "post_id": 30089452, "comment_id": 48291957, "body": "@EyasSH: It&#39;s undefined behavior -- but the only relevant bounds are those of the array object into which the pointer points. (A single object is treated as a one-element array for purposes of pointer arithmetic.) You could probably delete everything up to and including the word &quot;Additionally&quot;."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1430955726, "post_id": 30089452, "comment_id": 48291990, "body": "@KeithThompson are you saying that you get UB because you increment the pointer past the array/allocated memory boundary? Even if you don&#39;t dereference it?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1430955744, "post_id": 30089452, "comment_id": 48291995, "body": "What&#39;s the significance of &#39;after unallocated memory&#39;?  Is it a typo for &#39;after allocated memory&#39;, or are you trying to describe something else?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430955764, "post_id": 30089452, "comment_id": 48292001, "body": "@vsoftco: Yes, that&#39;s exactly what the standard says in the excerpt quoted in the answer."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430956580, "post_id": 30089452, "comment_id": 48292245, "body": "@vsoftco: see updated answer for detail. I also include a link to GCC&#39;s &quot;one past the end&quot; doc to explain the significance."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430956675, "post_id": 30089452, "comment_id": 48292268, "body": "@EyasSH thanks, your answer now seems to nail it! I was aware of the one-past-the-end stuff (since otherwise using <code>[a,b)</code> ranges would have been a pain), however I had the impression that you enter UB only when trying to dereference."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1430957073, "post_id": 30089452, "comment_id": 48292395, "body": "Just 5.7.5 should&#39;ve been sufficient. It&#39;s pretty clear."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1430958091, "post_id": 30089452, "comment_id": 48292671, "body": "@Barry the thing that throws me off a bit is the link between the pointer and the array/memory. In particular, the standard doesn&#39;t say what happens with a pointer that is un-initialized, does it?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1430958454, "post_id": 30089452, "comment_id": 48292756, "body": "@Barry yes, I guess that&#39;s true. But what if <code>char* p = (char*)0xAABB10E</code> ? In this way you initialize the pointer, but of course have no idea what&#39;s at that memory location, and most certainly don&#39;t own it."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1430960600, "post_id": 30089452, "comment_id": 48293273, "body": "@Barry: 5.7.4 is quite necessary to explain that this behavior is not exclusive to arrays. Including 3.7.4.3.2 is a weaker argument."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430961938, "post_id": 30089452, "comment_id": 48293601, "body": "@EyasSH I think 5.7.4 answers my last question above."}], "tags": [], "owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "is_accepted": true, "score": 10, "last_activity_date": 1430956301, "last_edit_date": 1430956301, "creation_date": 1430955266, "answer_id": 30089452, "question_id": 30089415, "link": "https://stackoverflow.com/questions/30089415/do-pointer-types-wrap-around-their-maximum-value/30089452#30089452", "title": "Do pointer types wrap around their maximum value?", "body": "<p>Short answer: by spec, it is undefined behavior. Performing any pointer arithmetic that leads to unallocated memory more than one address past an allocated item (see the <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/iterators.html\">One Past the End</a> chapter in the GCC docs for the significance of this) is undefined behavior.</p>\n\n<hr>\n\n<p>To see why, let us look at the standard:</p>\n\n<p>Sec 3.7.4.3.2 in the C++11 standard enumerates over all \"safely-derived pointer\" types. Most items in sec 3.7.4.3.2 of the standard describe ways to obtain references to objects legally. Assuming a pointer refers to allocated memory, 3.7.4.3.2 simply states:</p>\n\n<blockquote>\n  <p>A pointer value is a <em>safely-derived pointer</em> to a dynamic object only if it has an object pointer type and it is one of the following:</p>\n  \n  <ul>\n  <li>the result of well-defined pointer arithmetic (5.7) using a safely-derived pointer value;</li>\n  </ul>\n</blockquote>\n\n<p>Sec 5.7.4 states:</p>\n\n<blockquote>\n  <p>For the purposes of these operators, <strong>a pointer to a nonarray object behaves the same as a pointer to the first element of an array of length one with the type of the object as its element type</strong>.</p>\n</blockquote>\n\n<p>Finally, sec 5.7.5:</p>\n\n<blockquote>\n  <p>If both the pointer operand and the result point to elements of the same array object, or one past the last element of the array object, the evaluation shall not produce an overflow; <strong>otherwise, the behavior is undefined.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 134605, "user_id": 140740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6eddcd47c263a1a5d31bdb4f7b6424?s=128&d=identicon&r=PG", "display_name": "DigitalRoss", "link": "https://stackoverflow.com/users/140740/digitalross"}, "is_accepted": false, "score": 2, "last_activity_date": 1430956319, "creation_date": 1430956319, "answer_id": 30089607, "question_id": 30089415, "link": "https://stackoverflow.com/questions/30089415/do-pointer-types-wrap-around-their-maximum-value/30089607#30089607", "title": "Do pointer types wrap around their maximum value?", "body": "<p>From a specification point of view: it's UB.</p>\n\n<p>From a <em>what-will-it-do</em> point of view, yes, it will eventually wrap around to zero in most environments, especially for plain C. It may take a century or so on a 64-bit system.</p>\n"}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "accepted_answer_id": 30089452, "answer_count": 2, "score": 10, "last_activity_date": 1430956319, "creation_date": 1430955025, "question_id": 30089415, "link": "https://stackoverflow.com/questions/30089415/do-pointer-types-wrap-around-their-maximum-value", "title": "Do pointer types wrap around their maximum value?", "body": "<p>Consider a pointer <code>char* p</code> that is not <code>nullptr</code>, and the loop</p>\n\n<pre><code>while(++p);\n</code></pre>\n\n<p>Is the behaviour well defined or undefined? In other words, will the pointer eventually become 0 when reaching the maximum allocable memory (probably 2^32 or 2^64) or this is just UB?</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits\">std::numeric_limits</a> is (as expected) not specialized for pointer types.</p>\n"}, {"tags": ["c++", "glfw"], "comments": [{"owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "edited": false, "score": 0, "creation_date": 1430956004, "post_id": 30089353, "comment_id": 48292063, "body": "Try to save the return value of <code>glfwGetPrimaryMonitor()</code> into a variable before passing it to <code>glfwGetVideoMode</code>, and put a breakpoint there to check its value."}, {"owner": {"reputation": 324, "user_id": 3949980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a0e5e64af64dc499b080ea7e15a5050?s=128&d=identicon&r=PG&f=1", "display_name": "Vicente Berm&#250;dez", "link": "https://stackoverflow.com/users/3949980/vicente-berm%c3%badez"}, "reply_to_user": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "edited": false, "score": 0, "creation_date": 1430957434, "post_id": 30089353, "comment_id": 48292498, "body": "I did this: GLFWmonitor *monitor = glfwGetPrimaryMonitor(); and then tried to print it. No errors... I guess it&#39;s     glfwGetVideoMode"}, {"owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 1, "creation_date": 1430996247, "post_id": 30089353, "comment_id": 48309608, "body": "Your screenshot shows that <code>mode</code> is NULL when you try to dereference it. The <a href=\"http://www.glfw.org/docs/latest/group__monitor.html#gafc1bb972a921ad5b3bd5d63a95fc2d52\" rel=\"nofollow noreferrer\">documentation</a> says that <code>glfwGetVideoMode</code> will return NULL if an error occur, with a link to <a href=\"http://www.glfw.org/docs/latest/intro.html#error_handling\" rel=\"nofollow noreferrer\">the &quot;error handling&quot; part of the documentation</a> that explains how to set a callback to get the actual error message."}], "owner": {"reputation": 324, "user_id": 3949980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a0e5e64af64dc499b080ea7e15a5050?s=128&d=identicon&r=PG&f=1", "display_name": "Vicente Berm&#250;dez", "link": "https://stackoverflow.com/users/3949980/vicente-berm%c3%badez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430954680, "creation_date": 1430954680, "question_id": 30089353, "link": "https://stackoverflow.com/questions/30089353/glfw-unable-to-get-screens-width-and-height", "title": "GLFW unable to get screen&#39;s width and height", "body": "<p>I'm really new to C++ and I'm trying to get the screen's width and height to make my window appear in the center of the screen with GLFW.</p>\n\n<p>I'm trying to get the width and height of the screen by doing this</p>\n\n<pre><code>//Get primary monitor information\nconst GLFWvidmode* mode = glfwGetVideoMode(glfwGetPrimaryMonitor());\n//Center the program to the screen\nconst int windowPosX = (mode-&gt;width - 800) / 2;\nconst int windowPosY = (mode-&gt;height - 600) / 2;\nWindow window(\"Game Engine\", 800, 600);\nglfwSetWindowPos(window.getWindow(), windowPosX, windowPosY);\n</code></pre>\n\n<p><strong>Results:</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/GS281.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/4bIbk.jpg\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1430954069, "post_id": 30089234, "comment_id": 48291498, "body": "Why not move <code>row</code> into the loop? If it really makes that much of a crucial performance difference, you could do <code>row = {};</code>."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1430954136, "post_id": 30089234, "comment_id": 48291519, "body": "You should allow <code>std::vector</code> to handle memory for you. It&#39;s one of the best reasons to use <code>std::vector</code> over something like an array. <code>std::vector::push_back</code> will allocate more memory if it needs it. You don&#39;t need to have the memory prepared before you <code>push_back</code>"}, {"owner": {"reputation": 610, "user_id": 2777604, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gX4pb.png?s=128&g=1", "display_name": "Andr&#233; Santal&#243;", "link": "https://stackoverflow.com/users/2777604/andr%c3%a9-santal%c3%b3"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1430954634, "post_id": 30089234, "comment_id": 48291665, "body": "@chris Moving the row into the loop seems a good option, I will try that."}, {"owner": {"reputation": 610, "user_id": 2777604, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gX4pb.png?s=128&g=1", "display_name": "Andr&#233; Santal&#243;", "link": "https://stackoverflow.com/users/2777604/andr%c3%a9-santal%c3%b3"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1430954638, "post_id": 30089234, "comment_id": 48291670, "body": "@Tas true, but I don&#39;t know how much vector&lt;int&gt;s I will put inside the vector&lt;vector&lt;int&gt;&gt;, so I need a dynamic allocation in some way, or, I could use a single vector&lt;int&gt; to determine the matrix, it&#39;s an option too, but the first one seems easier."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1430955353, "post_id": 30089234, "comment_id": 48291871, "body": "C++, as a rule, has value semantics. Pushing <code>4</code> to a <code>vector&lt;int&gt;</code> just copies the  number 4. Pushing a 1D vector on a 2D vector copies the 1D vector. Don&#39;t worry about &quot;dynamic allocations&quot;. The vector class manages that for you, even if you have vectors in vectors."}], "answers": [{"tags": [], "owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "is_accepted": true, "score": 1, "last_activity_date": 1430954593, "creation_date": 1430954593, "answer_id": 30089335, "question_id": 30089234, "link": "https://stackoverflow.com/questions/30089234/how-to-make-a-vector-allocate-new-not-more-memory/30089335#30089335", "title": "How to make a vector allocate new (not more) memory", "body": "<p>You don't need to allocate new memory to write a new row. When <code>matrix.push_back</code> is called, its parameter is a copy of row, not row itself. So if you later change the <code>row</code> variable, the contents of matrix do not change.</p>\n"}, {"comments": [{"owner": {"reputation": 610, "user_id": 2777604, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gX4pb.png?s=128&g=1", "display_name": "Andr&#233; Santal&#243;", "link": "https://stackoverflow.com/users/2777604/andr%c3%a9-santal%c3%b3"}, "edited": false, "score": 0, "creation_date": 1430954991, "post_id": 30089351, "comment_id": 48291763, "body": "Interesting, but using the <code>clear</code> will work if I&#39;m going to put the vector inside a vector of vectors? I don&#39;t know much about c++, but, if the vector of vectors stores a reference, then calling the <code>clear</code> may also clear the row inside the vector of vectors, or no?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 610, "user_id": 2777604, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gX4pb.png?s=128&g=1", "display_name": "Andr&#233; Santal&#243;", "link": "https://stackoverflow.com/users/2777604/andr%c3%a9-santal%c3%b3"}, "edited": false, "score": 0, "creation_date": 1430955040, "post_id": 30089351, "comment_id": 48291770, "body": "The <code>row</code> vector is copied in the matrix <code>push_back</code> operation. C++ containers generally have value semantics: assignment performs deep copy. To get reference semantics you pass (smart) pointers around."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 1, "last_activity_date": 1430954667, "creation_date": 1430954667, "answer_id": 30089351, "question_id": 30089234, "link": "https://stackoverflow.com/questions/30089234/how-to-make-a-vector-allocate-new-not-more-memory/30089351#30089351", "title": "How to make a vector allocate new (not more) memory", "body": "<p>Call the <code>clear</code> member function, or <code>resize( 0 )</code>, to resize down to 0 again.</p>\n\n<p>You can then use <code>shrink_to_fit</code> (in C++11 and later) to make a good attempt at ditching the current buffer, but in the code you sketch that will just incur inefficiency, namely needless dynamic allocations.</p>\n\n<p>An alternative is to assign an emtpy vector, e.g. <code>row = vector&lt;int&gt;()</code>, but that will generally have the same effect as <code>shrink_to_fit</code>, namely that you get needless dynamic allocations when the buffer size has to be increased again.</p>\n"}], "owner": {"reputation": 610, "user_id": 2777604, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gX4pb.png?s=128&g=1", "display_name": "Andr&#233; Santal&#243;", "link": "https://stackoverflow.com/users/2777604/andr%c3%a9-santal%c3%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 30089335, "answer_count": 2, "score": 0, "last_activity_date": 1430954667, "creation_date": 1430953985, "question_id": 30089234, "link": "https://stackoverflow.com/questions/30089234/how-to-make-a-vector-allocate-new-not-more-memory", "title": "How to make a vector allocate new (not more) memory", "body": "<p>I have a code with a \"matrix\" in the format:</p>\n\n<p><code>vector &lt; vector&lt;int&gt; &gt; matrix</code>;</p>\n\n<p>I don't know her sizes: it will be input by the user by the <code>cin</code>. I wanted to do something like this:</p>\n\n<pre><code>vector&lt;int&gt; row;\nwhile (userInputting)\n{\n    row.push_back(userInput);\n    if (rowIsReady)\n    {\n        // puts the row in the matrix and allocates a new row to be filled\n        matrix.push_back(row);\n        **row = new vector&lt;int&gt;();**\n    }\n}\n</code></pre>\n\n<p>But it's being very difficult to do the intended action of the highlighted line, which usually is simple in other languages. How can I do this or something similar to fill my matrix?</p>\n"}, {"tags": ["c++", "windows", "visual-studio-2010", "python-3.x"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1431205688, "post_id": 30089189, "comment_id": 48398480, "body": "The <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=8279\" rel=\"nofollow noreferrer\">Windows SDK 7.1</a> can be a tedious install. There may be snags such as <a href=\"https://support.microsoft.com/en-us/kb/2717426\" rel=\"nofollow noreferrer\">KB2717426</a>; having to first uninstall .NET 4.5 and reinstall it after installing the SDK; and restoring x64 compilers per <a href=\"https://support.microsoft.com/en-us/kb/2519277\" rel=\"nofollow noreferrer\">KB2519277</a> . See <a href=\"http://blogs.msdn.com/b/vcblog/archive/2011/03/31/10148110.aspx\" rel=\"nofollow noreferrer\">this vcblog post</a> for the recommended install order."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1431206260, "post_id": 30089189, "comment_id": 48398614, "body": "<a href=\"http://mingw-w64.sourceforge.net\" rel=\"nofollow noreferrer\">Mingw-w64</a> is a common choice for building Python C extensions on Windows. It&#39;s using the Windows CRT, msvcrt.dll, instead of msvcr100.dll. The two CRTs won&#39;t have the same low-level file descriptors, among other issues that rarely seem to be a problem for Python extension modules. You could also try using <a href=\"https://www.visualstudio.com/vs-2015-product-editions\" rel=\"nofollow noreferrer\">Visual Studio 2015</a>."}], "owner": {"reputation": 214, "user_id": 3818411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43e0bc51f334775114307767ff81c781?s=128&d=identicon&r=PG&f=1", "display_name": "Snyder005", "link": "https://stackoverflow.com/users/3818411/snyder005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 640, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1430953712, "creation_date": 1430953712, "question_id": 30089189, "link": "https://stackoverflow.com/questions/30089189/unable-to-find-vcvarsall-bat-for-64-bit-python-3-4-3-on-windows-8-1", "title": "Unable to find vcvarsall.bat for 64-bit Python 3.4.3 on Windows 8.1", "body": "<p>I have ran into this problem trying to install several different python packages, and I can no longer work around this with alternate packages. I read through the other solutions, but none seem to be specific to my particular Python version and operating system. </p>\n\n<p>I am running Python 3.4.3 64 bit on Windows 8.1 laptop.  While install packages such as esutil and fitsio, I get the error: <code>Unable to find vcvarsall.bat</code>.  This indicates it can't find Visual Studio 2010 C++ compiler.  However I know Visual Studio Express does not have a 64 bit C++ compiler, so that solution does not work.  With Visual Studio Express installed I then get <code>ValueError: ['path']</code></p>\n\n<p>Also, since this is a Windows 8 laptop I can't download the additional Visual Studio SDK 7.1 which is also suggested to alleviate the problem.  What Microsoft Visual Studio 2010 software can I download for Windows 8 in order get a 64 bit C++ compiler?  </p>\n\n<p>Alternatively is there a work around using a different C++ compiler, such as mingw32.  I tried mingw32 from a Cygwin installation, but that also fails, so I suspect I need a 64-bit mingw c++ compiler as well.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1934, "user_id": 147808, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b5c1e7d6b890de9288c7aac3d884329?s=128&d=identicon&r=PG", "display_name": "olovb", "link": "https://stackoverflow.com/users/147808/olovb"}, "edited": false, "score": 2, "creation_date": 1430953915, "post_id": 30089167, "comment_id": 48291440, "body": "Does this even compile?"}, {"owner": {"reputation": 2630, "user_id": 989878, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/81065a8d4babc9d566e4cdded4e15370?s=128&d=identicon&r=PG", "display_name": "camelccc", "link": "https://stackoverflow.com/users/989878/camelccc"}, "edited": false, "score": 0, "creation_date": 1430953952, "post_id": 30089167, "comment_id": 48291454, "body": "variable array lengths are not part of the standard. your loops don&#39;t have terminating conditions that make sense."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1430954194, "post_id": 30089167, "comment_id": 48291538, "body": "Use <code>std::vector</code>. When you create it, all of the <code>int</code>s are 0, and inputting each element is as easy as a range-based for loop. Best of all, no memory to clean up after yourself."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1430954811, "post_id": 30089167, "comment_id": 48291718, "body": "@chris, to complement your comment <a href=\"http://ideone.com/8fystc\" rel=\"nofollow noreferrer\">ideone.com/8fystc</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1430957146, "post_id": 30089215, "comment_id": 48292419, "body": "Note to those that follow: Remember to <code>delete[] array</code> when done with it."}, {"owner": {"reputation": 35205, "user_id": 2891664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9df9d7af70d46f8db2ecd4392bb76087?s=128&d=identicon&r=PG&f=1", "display_name": "Radiodef", "link": "https://stackoverflow.com/users/2891664/radiodef"}, "edited": false, "score": 0, "creation_date": 1430959535, "post_id": 30089215, "comment_id": 48293000, "body": "This won&#39;t fix the program in the question, though. ; )"}], "tags": [], "owner": {"reputation": 509, "user_id": 4747617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841eeba38ce0900b1ceadfde0076515?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Byer", "link": "https://stackoverflow.com/users/4747617/joshua-byer"}, "is_accepted": false, "score": 0, "last_activity_date": 1430953846, "creation_date": 1430953846, "answer_id": 30089215, "question_id": 30089167, "link": "https://stackoverflow.com/questions/30089167/c-segmentation-fault-array/30089215#30089215", "title": "C++ segmentation fault array", "body": "<pre><code>int * array;\narray= new int [x];\n</code></pre>\n\n<p><a href=\"http://www.cplusplus.com/doc/tutorial/dynamic/\" rel=\"nofollow\">http://www.cplusplus.com/doc/tutorial/dynamic/</a></p>\n"}, {"comments": [{"owner": {"reputation": 509, "user_id": 4747617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841eeba38ce0900b1ceadfde0076515?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Byer", "link": "https://stackoverflow.com/users/4747617/joshua-byer"}, "edited": false, "score": 0, "creation_date": 1430954158, "post_id": 30089242, "comment_id": 48291525, "body": "This is incorrect ... you well eventually run through all the positives and become 0 since it is like a int."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 509, "user_id": 4747617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841eeba38ce0900b1ceadfde0076515?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Byer", "link": "https://stackoverflow.com/users/4747617/joshua-byer"}, "edited": false, "score": 0, "creation_date": 1430954205, "post_id": 30089242, "comment_id": 48291542, "body": "@JoshuaByer Not even sure if it is well defined behaviour... thanks anyway, corrected."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1430955759, "post_id": 30089242, "comment_id": 48291997, "body": "@vsoftco, It&#39;s undefined as soon as the pointer goes past the one-past-the-end position of the array, even without dereferencing it."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 2, "last_activity_date": 1430956166, "last_edit_date": 1495539824, "creation_date": 1430954028, "answer_id": 30089242, "question_id": 30089167, "link": "https://stackoverflow.com/questions/30089167/c-segmentation-fault-array/30089242#30089242", "title": "C++ segmentation fault array", "body": "<p>Your loop conditions are wrong.</p>\n\n<pre><code>for (int *j = array; j; j++)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>for (int *i=array; i; i++)\n</code></pre>\n\n<p>will not stop at the end of the array, as the condition <code>j</code> (<code>i</code>) is true when traversing the array (i.e., to be false, the pointer needs to be <code>nullptr</code>). In fact, <a href=\"https://stackoverflow.com/q/12102880/3093378\">pointer arithmetic past the array boundary plus one results in undefined behaviour</a>.  Your stopping condition should be</p>\n\n<pre><code>i &lt; array + x;\n</code></pre>\n\n<p>Moreover, variable length arrays are an extension and not support by the C++ standard. Use <code>new[]</code> instead to allocate memory, as @Joshua Byer pointed out.</p>\n"}, {"tags": [], "owner": {"reputation": 1934, "user_id": 147808, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b5c1e7d6b890de9288c7aac3d884329?s=128&d=identicon&r=PG", "display_name": "olovb", "link": "https://stackoverflow.com/users/147808/olovb"}, "is_accepted": false, "score": 0, "last_activity_date": 1430954542, "last_edit_date": 1430954542, "creation_date": 1430954194, "answer_id": 30089267, "question_id": 30089167, "link": "https://stackoverflow.com/questions/30089167/c-segmentation-fault-array/30089267#30089267", "title": "C++ segmentation fault array", "body": "<p>Within a <code>for</code> statement, the second expression should terminate the loop by evaluating to <code>false</code>. In this case however you never terminate the loop:</p>\n\n<pre><code>for (int *j=array; j; j++)\n</code></pre>\n\n<p>Instead do:</p>\n\n<pre><code>for (int *j=array; j &lt; array + x; j++)\n</code></pre>\n\n<p>The expression <code>array + x</code> (by pointer arithmetic) means one element past the end of the array.</p>\n\n<p>The above goes for both of the loops.</p>\n"}, {"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1430954425, "creation_date": 1430954425, "answer_id": 30089301, "question_id": 30089167, "link": "https://stackoverflow.com/questions/30089167/c-segmentation-fault-array/30089301#30089301", "title": "C++ segmentation fault array", "body": "<p>The conditions used in your loops are incorrect. </p>\n\n<p>eg. <code>for (int *j = array; j; j++)</code> even though <code>j</code> will eventually reach the end of the array but will still never evaluate to false (allowing the loop to finish). On top of this it means you will iterate to past the end of the array and move into Undefined Behaviour, this is probably why you are seeing the segfault. </p>\n\n<p>you either need to do the following (super gross solution!!!! also not C++ standard supported):</p>\n\n<pre><code>for (int i = 0, *j = array; i &lt; x; i++, j++)\n</code></pre>\n\n<p>which will increment a counter and check the array at the same time as incrementing your pointer. </p>\n\n<p><strong>OR</strong>\n<em>USE VECTORS</em></p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\">std::vector</a> is a much easier way to do what you are doing. </p>\n\n<pre><code>int arraySize;\ncin &gt;&gt; arraySize;\nstd::vector&lt;int&gt; array(arraySize, 0);\n\nfor (int i=0; i &lt; arraySize; i++)\n{\n    cin &gt;&gt; array[i];\n}\n\ncout &lt;&lt; array.at(3) &lt;&lt; endl;\n</code></pre>\n\n<p>Here is a <a href=\"http://ideone.com/8fystc\" rel=\"nofollow\">live example.</a> </p>\n"}], "owner": {"reputation": 23, "user_id": 4837651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8r4b.png?s=128&g=1", "display_name": "Joki", "link": "https://stackoverflow.com/users/4837651/joki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1431042737, "creation_date": 1430953564, "last_edit_date": 1430954215, "question_id": 30089167, "link": "https://stackoverflow.com/questions/30089167/c-segmentation-fault-array", "title": "C++ segmentation fault array", "body": "<p>In C++ I get a segmentation fault after telling the program how big the array should be (x). </p>\n\n<p>Why is this happening and how do I fix this?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int x;\n    cin &gt;&gt; x;\n    int array[x];\n\n    for (int *j=array; j; j++)\n    {\n        *j=0;\n    }\n\n    for (int *i=array; i; i++)\n    {\n        cin &gt;&gt; *i;\n    }\n\n    cout &lt;&lt; array[3] &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1430953700, "post_id": 30089162, "comment_id": 48291367, "body": "Cannot reproduce: <a href=\"http://ideone.com/7O6D2M\" rel=\"nofollow noreferrer\">ideone.com/7O6D2M</a> Do you compile with <code>-std=c++11</code> support?"}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 4, "creation_date": 1430953751, "post_id": 30089162, "comment_id": 48291382, "body": "C (and C++) don&#39;t allow users to use <code>_Leading_underscore_capital</code> names; watch out with <code>_RNG_H</code>"}, {"owner": {"reputation": 890, "user_id": 1455049, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/79b19722b591e7872e95cb4b0330e08e?s=128&d=identicon&r=PG", "display_name": "mariner", "link": "https://stackoverflow.com/users/1455049/mariner"}, "edited": false, "score": 0, "creation_date": 1430953838, "post_id": 30089162, "comment_id": 48291411, "body": "I compiled with -std=c++0x. I am forced to use gcc 4.4.7 due to dependency problems."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 3, "creation_date": 1430954005, "post_id": 30089162, "comment_id": 48291475, "body": "@mariner: It&#39;s likely that your problems are from GCC 4.4.7 not fully implementing C++11."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 1, "creation_date": 1430954720, "post_id": 30089162, "comment_id": 48291694, "body": "@BillyONeal: Such identifiers aren&#39;t exactly <i>disallowed</i>. They&#39;re reserved to the implementation, which makes defining them in your own code undefined behavior. Typically the compiler won&#39;t complain as long as the identifier happens not to collide with anything. Bottom line: Changing <code>_RNG_H</code> to <code>RNG_H</code> is a good idea, but it&#39;s unlikely to be the cause of the observed error."}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 1, "creation_date": 1430967149, "post_id": 30089162, "comment_id": 48294895, "body": "@Kieth: I never intended to claim that it was the cause of the observed error (that&#39;s why I made it a comment and not an answer)"}], "answers": [{"tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": false, "score": 1, "last_activity_date": 1430955577, "last_edit_date": 1430955577, "creation_date": 1430954616, "answer_id": 30089342, "question_id": 30089162, "link": "https://stackoverflow.com/questions/30089162/iso-c-forbids-declaration-of-uniform-real-distribution-with-no-type/30089342#30089342", "title": "ISO C++ forbids declaration of &#39;uniform_real_distribution&#39; with no type", "body": "<p>G++ 4.4.7 implements <a href=\"https://en.wikipedia.org/wiki/C%2B%2B_Technical_Report_1\" rel=\"nofollow\">Technical Report 1's random</a>, not C++11's random.</p>\n\n<p>That means that there is no <code>std::uniform_real_distribution</code> type.</p>\n\n<p>You can write code that looks like this:</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    std::random_device rng;\n    double x = std::uniform_real&lt;&gt;()(rng);\n    printf(\"%lf\\n\", x);\n}\n</code></pre>\n\n<p>Althought I suspect that there is something wrong with it, since it's returning values much larger than the range [0, 1), which is what I understand the limit is supposed to be.</p>\n"}, {"tags": [], "owner": {"reputation": 890, "user_id": 1455049, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/79b19722b591e7872e95cb4b0330e08e?s=128&d=identicon&r=PG", "display_name": "mariner", "link": "https://stackoverflow.com/users/1455049/mariner"}, "is_accepted": false, "score": 0, "last_activity_date": 1431034711, "creation_date": 1431034711, "answer_id": 30112129, "question_id": 30089162, "link": "https://stackoverflow.com/questions/30089162/iso-c-forbids-declaration-of-uniform-real-distribution-with-no-type/30112129#30112129", "title": "ISO C++ forbids declaration of &#39;uniform_real_distribution&#39; with no type", "body": "<pre><code>#if defined __GNUC__\n  #define GCC_VERSION (__GNUC__ * 10000 \\\n                           + __GNUC_MINOR__ * 100 \\\n                           + __GNUC_PATCHLEVEL__)\n  #if GCC_VERSION &lt; 40300\n    #include &lt;tr1/random&gt;\n  #else\n    #include &lt;random&gt;\n  #endif\n#else\n  #include &lt;random&gt;\n#endif\n\n#include &lt;iostream&gt;\n#include &lt;sys/types.h&gt;\n\ntypedef std::mt19937                                        generator_t;\ntypedef std::uniform_real&lt;double&gt;                           distribution_t;\ntypedef std::variate_generator&lt;generator_t, distribution_t&gt; variate_t;\n\nint main() {\n    generator_t sparfun_rand;\n    variate_t sparfun_rand_unif(sparfun_rand, distribution_t(0.0,1.0));\n    distribution_t dist(0.0, 1.0);\n    for (int i = 0; i &lt; 10 ; i++) {\n      std::cout &lt;&lt; dist(sparfun_rand_unif) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Got it working with gcc 4.4.7 with -std=c++0x flag. </p>\n"}], "owner": {"reputation": 890, "user_id": 1455049, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/79b19722b591e7872e95cb4b0330e08e?s=128&d=identicon&r=PG", "display_name": "mariner", "link": "https://stackoverflow.com/users/1455049/mariner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431034711, "creation_date": 1430953533, "last_edit_date": 1430953726, "question_id": 30089162, "link": "https://stackoverflow.com/questions/30089162/iso-c-forbids-declaration-of-uniform-real-distribution-with-no-type", "title": "ISO C++ forbids declaration of &#39;uniform_real_distribution&#39; with no type", "body": "<pre><code>#ifndef _RNG_H\n#define _RNG_H\n\n#include &lt;random&gt;\n\nclass RNG {\npublic:\n  RNG() :\n    _generator(_default_seed) { }\n\n  RNG(uint32_t seed):\n    _generator(seed) { }\n\n  double operator()();\n\nprivate:\n  std::mt19937 _generator;\n  static std::uniform_real_distribution&lt;&gt; _urd;\n  static const int _default_seed;\n};\n\n#endif // _RNG_H\n</code></pre>\n\n<p>I am trying to encapsulate the random number generator used with a wrapper class. But when trying to compile the above code I get the following error:</p>\n\n<p>rng.h:37: error: ISO C++ forbids declaration of 'uniform_real_distribution' with no type</p>\n\n<p>rng.h:37: error: invalid use of '::'</p>\n\n<p>rng.h:37: error: expected ';' before '&lt;' token</p>\n\n<p>But I am just trying to follow the example as given in <a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution</a></p>\n"}, {"tags": ["c++", "c++11", "auto", "c++14", "constexpr"], "comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1430954015, "post_id": 30089131, "comment_id": 48291482, "body": "<code>_data[a]</code> is not a constant expression inside <code>A::one</code>. Note that <code>constexpr</code> functions can still be called at runtime, e.g. if you supply arguments that are only known at runtime."}, {"owner": {"reputation": 753, "user_id": 2172459, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750bdd93b854a92288fec857151718b4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/2172459/pat"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1430955077, "post_id": 30089131, "comment_id": 48291783, "body": "It is a constexpr inside of <code>two</code>, as evidenced by using its return value as a template parameter?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1430955339, "post_id": 30089131, "comment_id": 48291865, "body": "As far as I can tell, <code>_data[a]</code> is not a constant expression in both member functions. But constexpr functions can consist of non-constant expressions. The rules are rather: In a context that requires a constant expression, non-constant things must not be evaluated (including parts of a constexpr function). Additionally, there must be a way for a <code>constexpr</code> function to be legally called in a context where a constant expression is required."}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1430955892, "post_id": 30089131, "comment_id": 48292032, "body": "@dyp You&#39;re missing the fact that <code>constexpr</code> is a qualifier, and the behaviour is changing depending on the call site. In that way <code>two</code> knows that <code>A</code> is <code>constexpr</code>, and do is <code>this-&gt;data[a]</code>. The interesting part is why does it think that <code>one</code> is ill-formed."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "edited": false, "score": 1, "creation_date": 1430956037, "post_id": 30089131, "comment_id": 48292072, "body": "@polkovnikov.ph <code>two</code> does not know that the instance has been declared as <code>constexpr</code>. Consider <code>A a {rand()}; a.two(0)</code>. This is perfectly legal yet the function-call expression <code>a.two(0)</code> cannot be a constant expression."}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1430956141, "post_id": 30089131, "comment_id": 48292108, "body": "@dyp No, it&#39;s not legal. You don&#39;t have a <code>constexpr</code> on <code>A</code>. <a href=\"http://ideone.com/HMQZqR\" rel=\"nofollow noreferrer\">ideone.com/HMQZqR</a>"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "edited": false, "score": 1, "creation_date": 1430956662, "post_id": 30089131, "comment_id": 48292259, "body": "@polkovnikov.ph Note that I have used simply <code>a.two(0)</code> but you&#39;re using it in a context where a constant expression is required. As I said: In this example, <code>a.two(0)</code> is legal, but is not a constant expression itself, nor can it be evaluated within a constant expression."}], "answers": [{"comments": [{"owner": {"reputation": 753, "user_id": 2172459, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750bdd93b854a92288fec857151718b4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/2172459/pat"}, "edited": false, "score": 0, "creation_date": 1430954504, "post_id": 30089244, "comment_id": 48291634, "body": "Removing the <code>one</code> function compiles fine, and <code>two</code> is being used in a compile time context?"}, {"owner": {"reputation": 753, "user_id": 2172459, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750bdd93b854a92288fec857151718b4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/2172459/pat"}, "edited": false, "score": 0, "creation_date": 1430954864, "post_id": 30089244, "comment_id": 48291732, "body": "It&#39;s literally in the example, I use the call to two as a template parameter."}], "tags": [], "owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "is_accepted": false, "score": 1, "last_activity_date": 1430956908, "last_edit_date": 1430956908, "creation_date": 1430954032, "answer_id": 30089244, "question_id": 30089131, "link": "https://stackoverflow.com/questions/30089131/c-constexpr-auto-member-function-clang-issue/30089244#30089244", "title": "C++ constexpr auto member function. Clang issue?", "body": "<ol>\n<li><code>constexpr</code> functions are made so that they can be called both at compile-time and run-time.</li>\n<li>Code with a <code>constexpr</code> function is well-formed if you can omit <code>constexpr</code> and get a proper plain function. In other words it <em>must</em> compile as a run-time function.</li>\n<li>If the body of <code>constexpr</code> function cannot be calculated at compile-time, it's still compiled, but you cannot use it in a compile-time context such as template arguments.</li>\n<li>If <code>constexpr</code> method is called on <code>constexpr</code> object, <code>this</code> is considered constexpr.</li>\n</ol>\n\n<p>In case of <code>one</code> it is ill-formed, because when it's compiled to be run at run-time, <code>_data[a]</code> is considered to be a run-time expression, because <code>a</code> is not a constant expression, even though <code>this</code> and <code>this-&gt;_data</code> are.</p>\n\n<p>In case of <code>two</code> it compiles fine, because it works fine at runtime, and at compile-time <code>this</code> is <code>constexpr</code> as much as <code>a</code>, so that <code>this-&gt;_data[a]</code> is <code>constexpr</code> and everything works fine.</p>\n"}, {"comments": [{"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "edited": false, "score": 0, "creation_date": 1430957491, "post_id": 30089692, "comment_id": 48292514, "body": "Magnificent answer. Could you quote a section of Standard that tells why does <code>two</code> work in constant expressions? The part that <code>this</code> gets <code>constexpr</code>-qualified when the method is called on <code>constexpr</code> object was determined by me in experimental way."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "edited": false, "score": 0, "creation_date": 1430957697, "post_id": 30089692, "comment_id": 48292575, "body": "@polkovnikov.ph The Standard provides a list of things that would prevent an expression from being a constant expression - just none of them apply. [ ] <code>this</code> <b>except</b> in <code>constexpr</code>, [ ] call function other than a <code>constexpr</code> function, [ ] call undefined function, [ ] UB, [ ] lambda, [x] lvalue-to-rvalue conversion but [x] <b>unless</b> refers to a non-mutable sub-object of an object defined with <code>constexpr</code>, ..."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1430956811, "creation_date": 1430956811, "answer_id": 30089692, "question_id": 30089131, "link": "https://stackoverflow.com/questions/30089131/c-constexpr-auto-member-function-clang-issue/30089692#30089692", "title": "C++ constexpr auto member function. Clang issue?", "body": "<p>If you consider this statement in [dcl.constexpr]/7:</p>\n\n<blockquote>\n  <p>A call to a <code>constexpr</code> function produces <strong>the same result</strong> as a call to an equivalent non-<code>constexpr</code> function <strong>in all respects</strong> except that a call to a <code>constexpr</code> function can appear in a constant expression.</p>\n</blockquote>\n\n<p>Consider the non-<code>constexpr</code> equivalent function <code>A::one()</code>. <code>_data[a]</code> cannot be used in a constant expression (as a non-type template argument) because it would involve the evaluation of <code>this</code>, from [expr.const]:</p>\n\n<blockquote>\n  <p>A conditional-expression e is a core constant expression unless the evaluation of e, following the rules of the\n  abstract machine (1.9), would evaluate one of the following expressions:<br>\n  (2.1) \u2014 <code>this</code> (5.1.1), except in a <code>constexpr</code> function or a <code>constexpr</code> constructor that is being evaluated as\n  part of e;</p>\n</blockquote>\n\n<p>Since the non-<code>constexpr</code> equivalent is ill-formed, it is reasonable that the <code>constexpr</code> function give the same result.</p>\n\n<p>Ont the other hand, <code>two()</code> is a well-formed member function regardless of <code>constexpr</code> and your use of <code>ex.two(3)</code> is valid as a constant expression - that's why it compiles. </p>\n"}], "owner": {"reputation": 753, "user_id": 2172459, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/750bdd93b854a92288fec857151718b4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/2172459/pat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1114, "favorite_count": 1, "accepted_answer_id": 30089692, "answer_count": 2, "score": 4, "last_activity_date": 1430961825, "creation_date": 1430953362, "last_edit_date": 1430961825, "question_id": 30089131, "link": "https://stackoverflow.com/questions/30089131/c-constexpr-auto-member-function-clang-issue", "title": "C++ constexpr auto member function. Clang issue?", "body": "<pre><code> #include &lt;utility&gt;\n\n struct A {\n     constexpr auto one(int a) {\n         return std::integral_constant&lt;int, _data[a]&gt;{};\n     }\n     constexpr int  two(int a) const {\n         return _data[a];\n     }\n\n     int _data[10];\n };\n\n int main() {\n     constexpr auto ex = A{{1,2,3,4,5,6,7,8,9,10}};\n\n     std::integral_constant&lt;int, ex.two(3)&gt; b{};\n }\n</code></pre>\n\n<p>The code above will not compile in trunk Clang.  The error is in the <code>one()</code> member function, and says: </p>\n\n<pre><code>cc.cpp:57:44: note: implicit use of 'this' pointer is only allowed \n  within the evaluation of a call to a 'constexpr' member function.\n</code></pre>\n\n<p>Obviously, the function is marked <code>constexpr</code>, and if you comment out the <code>one()</code> member, everything compiles fine, so we are clearly able to create the <code>integral_constant</code> from the <code>ex</code>, but not directly from the <code>struct</code>?  It seems like, when I need the <code>auto</code> return type deduction, it fails and claims the function is not <code>constexpr</code>?</p>\n\n<p>Is this expected?  I feel like it should not be a problem, and I would be surprised if this was expected behavior.</p>\n"}, {"tags": ["c++", "boost", "build", "cmake", "cgal"], "comments": [{"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1430952631, "post_id": 30089004, "comment_id": 48291043, "body": "You need the boost includes if you want to use the boost library in your project. If you&#39;re simply linking already built executables/libraries against dynamic boost archives, the includes aren&#39;t necessary."}, {"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "reply_to_user": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1430952730, "post_id": 30089004, "comment_id": 48291075, "body": "Did I download the wrong boost then? I downloaded the ZIP here: <a href=\"http://sourceforge.net/projects/boost/files/boost/1.58.0/boost_1_58_0.zip/download\" rel=\"nofollow noreferrer\">sourceforge.net/projects/boost/files/boost/1.58.0/&hellip;</a>"}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1430953316, "post_id": 30089004, "comment_id": 48291256, "body": "The include files are in <code>boost_1_58_0&#47;boost</code> after unzipping that archive."}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1430953414, "post_id": 30089004, "comment_id": 48291288, "body": "I would try setting <code>BOOST_INCLUDEDIR</code> to <code>e:&#47;Users&#47;Bombax&#47;Cpp&#47;Libraries&#47;boost_1_58_0&#47;boost</code>. This will find the right include directory."}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1430953583, "post_id": 30089004, "comment_id": 48291341, "body": "As for your library directory, what you downloaded are the source files. To use boost in CMake, you need binaries that you can link against. You need to look up how to either build those binaries or download them from somewhere."}, {"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "reply_to_user": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1430953815, "post_id": 30089004, "comment_id": 48291402, "body": "Same problem after <code>BOOST_INCLUDEDIR</code> is correctly set. I&#39;m not sure what you mean with your last comment."}, {"owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "reply_to_user": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1430953842, "post_id": 30089004, "comment_id": 48291413, "body": "I really wish there was just precompiled .lib files and .h files that simple-minded developers like me could use."}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 1, "creation_date": 1430954075, "post_id": 30089004, "comment_id": 48291500, "body": "You might want to check in <a href=\"http://sourceforge.net/projects/boost/files/boost-binaries/1.58.0/\" rel=\"nofollow noreferrer\">here</a> for precompiled binaries that might be compatible with your build. If it isn&#39;t there, there&#39;s not much you can do but build those binaries yourself."}], "answers": [{"tags": [], "owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "is_accepted": true, "score": 2, "last_activity_date": 1430961564, "creation_date": 1430961564, "answer_id": 30090330, "question_id": 30089004, "link": "https://stackoverflow.com/questions/30089004/cmake-fails-to-find-boost-libraries-cgal-windows/30090330#30090330", "title": "CMake fails to find boost libraries (CGAL, Windows)", "body": "<p>Alright, I finally got everything to the state I needed. What follows is essentially a description of how to get the magical libCGAL.dll and libCGAL.a (library files) that you want on Windows 7 with Code::Blocks.</p>\n\n<ol>\n<li>I downloaded and installed CMake.</li>\n<li>I downloaded and installed Boost 1.58.0, with the manual and GMP included (but not examples because I don't want to flub around with Qt). The destination was a folder without spaces.</li>\n<li>I downloaded and installed CGAL-4.6. Again, destination was folder without spaces.</li>\n<li>I added CodeBlocks\\MingW\\bin to my <code>PATH</code> environmental variable.</li>\n<li>I went into the boost_1_58_0 folder, opened a command prompt, and typed <code>bootstrap gcc</code>, followed by <code>b2 --toolset=gcc</code>, all good. This seemed to build Boost into the stage\\lib folder.</li>\n<li>I made a new Code::Blocks project to test the Boost files. In the projects Build Options, I selected the root, added under Linker Settings a direct path to the <code>libboost_regex-mgw44-mt-1_58.a</code>, under Search Directories I added under Compiler the boost_1_58_0 folder, under Linker the boost_1_58_0\\stage\\lib folder. I then successfully compiled and ran the example regex program <a href=\"http://www.boost.org/doc/libs/1_58_0/more/getting_started/windows.html\" rel=\"nofollow\">here</a> (section 6).</li>\n<li>I went into the CGAL-4.6 folder and opened a command prompt. I typed cmake-gui. I followed <a href=\"https://xinyustudio.wordpress.com/2012/07/18/setup-cgal-in-windows-7-step-by-step-tutorial/\" rel=\"nofollow\">this tutorial</a> to the letter, except that I (think) I chose \"Specify native compilers\" and pointed them to <code>mingw32-gcc.exe</code> and <code>mingw32-g++.exe</code> in the MingW folder (it might work with the first option if you've added MingW\\bin to the path like you have to anyway, later)</li>\n<li>After configuring and building correctly, a Code::Blocks project file was created, along with a Makefile. The Code::Blocks file was useless and wouldn't build correctly because it tried to run <code>make.exe</code> instead of <code>mingw32-make.exe</code>. I had no idea how to fix this, so I simply went to my Code::Blocks folder, opened a command prompt and typed <code>mingw32-make.exe -s -f &lt;path-to-the-makefile&gt; all</code>. It Make'd without problems.</li>\n<li>Finally, I made a test project. Like in Step 6, I added ALL the non-debug libraries from Boost (blah-blah-NOT-d.a in stage/lib) and the libCGAL.dll.a library from CGAL-4.6\\lib. I added also the Boost directories as in Step 6, and the CGAL-4.6\\include directory too.</li>\n<li>Super-finally, I compiled the example <a href=\"http://doc.cgal.org/latest/Manual/introduction.html\" rel=\"nofollow\">here</a> without problems. Before running it. I had to move CGAL-4.6\\bin\\libCGAL.dll into the exe file folder, that is bin\\Debug.</li>\n</ol>\n\n<p>NOW THAT WAS PERFECTLY STRAIGHTFORWARD, WASN'T IT?!</p>\n\n<p>If someone else gets stuck on this, throw a message and I can shoot you the actual files everyone wants: libCGAL.dll, libCGAL.dll.a, all the Boost library files and all the headers.</p>\n"}], "owner": {"reputation": 1129, "user_id": 1866808, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/590f81e0d4226f41f1d0f9cc4c01fd36?s=128&d=identicon&r=PG", "display_name": "bombax", "link": "https://stackoverflow.com/users/1866808/bombax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2148, "favorite_count": 0, "accepted_answer_id": 30090330, "answer_count": 1, "score": 1, "last_activity_date": 1435071480, "creation_date": 1430952481, "last_edit_date": 1430953699, "question_id": 30089004, "link": "https://stackoverflow.com/questions/30089004/cmake-fails-to-find-boost-libraries-cgal-windows", "title": "CMake fails to find boost libraries (CGAL, Windows)", "body": "<p>I saw dozens of identical questions about this issue. None of their answers worked for me I'm afraid.</p>\n\n<p>I'm trying to install CGAL. I'm following the <a href=\"https://xinyustudio.wordpress.com/2012/07/18/setup-cgal-in-windows-7-step-by-step-tutorial/\" rel=\"nofollow\">following tutorial</a> describing the process step-by-step. The only difference is that I'm using CodeBlocks and I've selected \"Specify native compilers\" and pointed them to <code>mingw32-gcc.exe</code> and <code>mingw32-g++.exe</code> which seems to be fine. When I run cmake-gui and then click configure, I get the following output, with the Advanced option ticked:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>The CXX compiler identification is GNU 4.4.1\nThe C compiler identification is GNU 4.4.1\nCheck for working CXX compiler: E:/Program Files (x86)/CodeBlocks/MinGW/bin/mingw32-g++.exe\nCheck for working CXX compiler: E:/Program Files (x86)/CodeBlocks/MinGW/bin/mingw32-g++.exe -- works\nDetecting CXX compiler ABI info\nDetecting CXX compiler ABI info - done\nCheck for working C compiler: E:/Program Files (x86)/CodeBlocks/MinGW/bin/mingw32-gcc.exe\nCheck for working C compiler: E:/Program Files (x86)/CodeBlocks/MinGW/bin/mingw32-gcc.exe -- works\nDetecting C compiler ABI info\nDetecting C compiler ABI info - done\n== Setting paths ==\nBuild CGAL from release in directory CGAL-4.6\nPackagenames: CGAL-4.6\n== Setting paths (DONE) ==\n\n== Generate version files ==\nCGAL_MAJOR_VERSION=4\nCGAL_MINOR_VERSION=6\nCGAL_BUGFIX_VERSION=0\nCGAL_SONAME_VERSION=11\nCGAL_SOVERSION     =11.0.0\nCGAL_REFERENCE_CACHE_DIR=\nBuilding shared libraries\nTargetting MinGW Makefiles\nUsing E:/Program Files (x86)/CodeBlocks/MinGW/bin/mingw32-g++.exe compiler.\nUSING CMake version: 2.8.8\nSystem: Windows\nUSING GCC_VERSION = '4.4.1'\nUsing gcc version 4 or later. Adding -frounding-math\n== Generate version files (DONE) ==\n\n== Set up flags ==\nBuild type: Release\nUSING CXXFLAGS = ' -frounding-math -O3 -DNDEBUG'\nUSING LDFLAGS = '  '\n== Set up flags (DONE) ==\n\n== Detect external libraries ==\nExternal libraries supported: GMP;MPFR;ZLIB;OpenGL;LEDA;MPFI;RS;RS3;OpenNL;Eigen3;BLAS;LAPACK;QGLViewer;ESBTL;Coin3D;NTL;IPE\nPreconfiguring library: GMP ...\nFound GMP: e:/Users/Bombax/Cpp/Libraries/CGAL-4.6/auxiliary/gmp/lib/libgmp-10.dll  \nGMP has been preconfigured:\n  UseGMP-file:      \n  GMP include:      e:/Users/Bombax/Cpp/Libraries/CGAL-4.6/auxiliary/gmp/include\n  GMP libraries:    e:/Users/Bombax/Cpp/Libraries/CGAL-4.6/auxiliary/gmp/lib/libgmp-10.dll\n  GMP definitions:  \nUSING GMP_VERSION = '5.0.1'\nPreconfiguring library: MPFR ...\nFound MPFR: e:/Users/Bombax/Cpp/Libraries/CGAL-4.6/auxiliary/gmp/lib/libmpfr-4.dll  \nMPFR has been preconfigured:\n  UseMPFR-file:      \n  MPFR include:      e:/Users/Bombax/Cpp/Libraries/CGAL-4.6/auxiliary/gmp/include\n  MPFR libraries:    e:/Users/Bombax/Cpp/Libraries/CGAL-4.6/auxiliary/gmp/lib/libmpfr-4.dll\n  MPFR definitions:  \nUSING MPFR_VERSION = '3.0.0'\nCMake Error at E:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:1200 (message):\n  Unable to find the requested Boost libraries.\n\n  Boost version: 1.58.0\n\n  Boost include path: e:/Users/Bombax/Cpp/Libraries/boost_1_58_0\n\n  The following Boost libraries could not be found:\n\n          boost_thread\n          boost_system\n\n  No Boost libraries were found.  You may need to set BOOST_LIBRARYDIR to the\n  directory containing Boost libraries or BOOST_ROOT to the location of\n  Boost.\nCall Stack (most recent call first):\n  cmake/modules/CGAL_SetupBoost.cmake:6 (find_package)\n  cmake/modules/CGAL_SetupDependencies.cmake:85 (include)\n  CMakeLists.txt:640 (include)\n\n\nBoost include:     e:/Users/Bombax/Cpp/Libraries/boost_1_58_0\nBoost libraries:   \nBoost definitions: \nUSING BOOST_VERSION = '1.58.0'\n== Detect external libraries (DONE) ==\n\n== Write compiler_config.h ==\nPerforming Test CGAL_CFG_BOOST_VARIANT_SWAP_BUG - Failed\nPerforming Test CGAL_CFG_DENORMALS_COMPILE_BUG - Success\nPerforming Test CGAL_CFG_FPU_ROUNDING_MODE_UNWINDING_VC_BUG - Success\nPerforming Test CGAL_CFG_IEEE_754_BUG - Success\nPerforming Test CGAL_CFG_ISTREAM_INT_BUG - Success\nPerforming Test CGAL_CFG_MATCHING_BUG_5 - Success\nPerforming Test CGAL_CFG_MATCHING_BUG_6 - Success\nPerforming Test CGAL_CFG_MATCHING_BUG_7 - Success\nPerforming Test CGAL_CFG_MATCHING_BUG_8 - Success\nPerforming Test CGAL_CFG_NESTED_CLASS_FRIEND_DECLARATION_BUG - Success\nPerforming Test CGAL_CFG_NO_LIMITS - Success\nPerforming Test CGAL_CFG_NO_NEXTAFTER - Success\nPerforming Test CGAL_CFG_NO_STL - Success\nPerforming Test CGAL_CFG_NO_WARNING_CPP_DIRECTIVE_BUG - Success\nPerforming Test CGAL_CFG_NUMERIC_LIMITS_BUG - Success\nPerforming Test CGAL_CFG_OUTOFLINE_MEMBER_DEFINITION_BUG - Success\nPerforming Test CGAL_CFG_TEMPLATE_IN_DEFAULT_PARAMETER_BUG - Success\nPerforming Test CGAL_CFG_TYPENAME_BEFORE_DEFAULT_ARGUMENT_BUG - Success\nPerforming Test CGAL_CFG_USING_BASE_MEMBER_BUG_2 - Success\n== Write compiler_config.h (DONE) ==\n\n== Generating build files ==\nConfiguring libCGAL\nRequested component: MPFR\nRequested component: GMP\nlibCGAL is configured\nSources for CGAL component library 'CGAL_Core' detected\nConfiguring libCGAL_Core\nRequested component: MPFR\nRequested component: GMP\nlibCGAL_Core is configured\nSources for CGAL component library 'CGAL_ImageIO' detected\nConfiguring libCGAL_ImageIO\nFound OpenGL: opengl32  \nCould NOT find ZLIB (missing:  ZLIB_LIBRARY ZLIB_INCLUDE_DIR) \nOpenGL include:     \nOpenGL libraries:   glu32;opengl32\nRequested component: MPFR\nRequested component: GMP\nlibCGAL_ImageIO is configured\nNOTICE: libCGAL_ImageIO needs ZLib to read compressed files. That feature will not be activated.\nSources for CGAL component library 'CGAL_Qt3' detected\nConfiguring libCGAL_Qt3\nlibCGAL_Qt3 needs Qt3, cannot be configured.\nSources for CGAL component library 'CGAL_Qt4' detected\nConfiguring libCGAL_Qt4\nlibCGAL_Qt4 needs Qt4, cannot be configured.\nSources for CGAL component libraries 'CGAL_Core;CGAL_ImageIO;CGAL_Qt3;CGAL_Qt4' detected\n== Generating build files (DONE) ==\n\nConfiguring incomplete, errors occurred!\n</code></pre>\n\n<p>I did indeed setup <code>BOOST_ROOT</code> to a PATH in CMake's GUI, to <code>e:/Users/Bombax/Cpp/Libraries/boost_1_58_0</code>, which exists. And the two libraries it mentions are definitely installed. I've noticed there's no explicit include folder in my boost installation (though their is libs). I've tried checking the CGAL_Boost_USE_STATIC_LIBS option with no better results. What is happening here? What do I need to do?</p>\n"}, {"tags": ["c++", "templates", "c++11", "metaprogramming"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 9, "creation_date": 1430952393, "post_id": 30088983, "comment_id": 48290959, "body": "Functions can only have one return type. C++ is statically typed. Maybe you&#39;re looking for <code>boost::variant</code>."}, {"owner": {"reputation": 53, "user_id": 4872615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5b42d69f9c93440edd0f7028335374?s=128&d=identicon&r=PG&f=1", "display_name": "Ausser", "link": "https://stackoverflow.com/users/4872615/ausser"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1430952448, "post_id": 30088983, "comment_id": 48290978, "body": "@chris: How about template functions, auto functions?"}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 1, "creation_date": 1430952501, "post_id": 30088983, "comment_id": 48290994, "body": "This doesn&#39;t look like real code, but a contrived example. If you can show us what you are trying to achieve, maybe we can suggest something better"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1430952625, "post_id": 30088983, "comment_id": 48291041, "body": "@Ausser Templates are instantiated once for each type where it&#39;s needed during compilation. The type of  <code>auto</code> is deduced during compilation, it&#39;s not determined at runtime."}, {"owner": {"reputation": 18517, "user_id": 203458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1b9f56786ceba3c57d0d2fe56182a4d3?s=128&d=identicon&r=PG", "display_name": "Kate Gregory", "link": "https://stackoverflow.com/users/203458/kate-gregory"}, "edited": false, "score": 2, "creation_date": 1430952669, "post_id": 30088983, "comment_id": 48291055, "body": "maybe this is an attempt at a Factory pattern? Are the various types you might return related in some way?"}, {"owner": {"reputation": 1090, "user_id": 2843157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qorh2.jpg?s=128&g=1", "display_name": "John Odom", "link": "https://stackoverflow.com/users/2843157/john-odom"}, "edited": false, "score": 0, "creation_date": 1430952738, "post_id": 30088983, "comment_id": 48291080, "body": "@Ausser It&#39;s possible with template functions. Take a look at <a href=\"http://www.cplusplus.com/doc/tutorial/templates/\" rel=\"nofollow noreferrer\">this link</a> for a tutorial on how to use templates."}, {"owner": {"reputation": 53, "user_id": 4872615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5b42d69f9c93440edd0f7028335374?s=128&d=identicon&r=PG&f=1", "display_name": "Ausser", "link": "https://stackoverflow.com/users/4872615/ausser"}, "reply_to_user": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1430952743, "post_id": 30088983, "comment_id": 48291083, "body": "@Nasser it&#39;s not a real code, yes. It&#39;s the example usage aiming to clarify my need."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 1090, "user_id": 2843157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qorh2.jpg?s=128&g=1", "display_name": "John Odom", "link": "https://stackoverflow.com/users/2843157/john-odom"}, "edited": false, "score": 0, "creation_date": 1430952760, "post_id": 30088983, "comment_id": 48291088, "body": "@JohnOdom, Not based on runtime values. Directly, anyway, since templates could certainly aid in a different approach."}, {"owner": {"reputation": 53, "user_id": 4872615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5b42d69f9c93440edd0f7028335374?s=128&d=identicon&r=PG&f=1", "display_name": "Ausser", "link": "https://stackoverflow.com/users/4872615/ausser"}, "reply_to_user": {"reputation": 18517, "user_id": 203458, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1b9f56786ceba3c57d0d2fe56182a4d3?s=128&d=identicon&r=PG", "display_name": "Kate Gregory", "link": "https://stackoverflow.com/users/203458/kate-gregory"}, "edited": false, "score": 0, "creation_date": 1430952834, "post_id": 30088983, "comment_id": 48291115, "body": "@KateGregory Factory pattern returns a base class pointer AFAIK ?"}, {"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "edited": false, "score": 0, "creation_date": 1430953068, "post_id": 30088983, "comment_id": 48291183, "body": "Overload resolution (whether template or &#39;plain&#39;) does not consider return type."}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1430953578, "post_id": 30088983, "comment_id": 48291339, "body": "is <code>typeCode</code> known at compile time, or is it determined at runtime?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4872615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5b42d69f9c93440edd0f7028335374?s=128&d=identicon&r=PG&f=1", "display_name": "Ausser", "link": "https://stackoverflow.com/users/4872615/ausser"}, "edited": false, "score": 0, "creation_date": 1430953367, "post_id": 30089113, "comment_id": 48291273, "body": "I&#39;m sorry, I didn&#39;t understand how this is related with my question."}, {"owner": {"reputation": 509, "user_id": 4747617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841eeba38ce0900b1ceadfde0076515?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Byer", "link": "https://stackoverflow.com/users/4747617/joshua-byer"}, "reply_to_user": {"reputation": 53, "user_id": 4872615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5b42d69f9c93440edd0f7028335374?s=128&d=identicon&r=PG&f=1", "display_name": "Ausser", "link": "https://stackoverflow.com/users/4872615/ausser"}, "edited": false, "score": 0, "creation_date": 1430953615, "post_id": 30089113, "comment_id": 48291349, "body": "two possible methods to return different structured data, keep in mind you can also overload the function to return different things depending on what arguments are passed in to it"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430959459, "post_id": 30089113, "comment_id": 48292983, "body": "@JoshuaByer if you think about overriding a virtual function, then you&#39;re stuck with covariant returning (can at most return a pointer to the derived class)."}], "tags": [], "owner": {"reputation": 509, "user_id": 4747617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841eeba38ce0900b1ceadfde0076515?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Byer", "link": "https://stackoverflow.com/users/4747617/joshua-byer"}, "is_accepted": false, "score": 0, "last_activity_date": 1430953883, "last_edit_date": 1430953883, "creation_date": 1430953213, "answer_id": 30089113, "question_id": 30088983, "link": "https://stackoverflow.com/questions/30088983/returning-a-type-depending-on-the-parameter/30089113#30089113", "title": "Returning a type depending on the parameter", "body": "<p>Since c++ is object oriented we can have all of the options inherit from a parent class and then return an instance of that parent class.\n<br/>\nAlternatively we could try the  void * return type.</p>\n"}, {"tags": [], "owner": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "is_accepted": true, "score": 1, "last_activity_date": 1430956077, "creation_date": 1430956077, "answer_id": 30089574, "question_id": 30088983, "link": "https://stackoverflow.com/questions/30088983/returning-a-type-depending-on-the-parameter/30089574#30089574", "title": "Returning a type depending on the parameter", "body": "<p>That does not work, you would have to give the parameter at compile time. The following would work:</p>\n\n<pre><code>template&lt;int Value&gt;\ndouble GetVar() {return 0.0;};\n\ntemplate&lt;&gt;\nint GetVar&lt;42&gt;() {return 42;}\n\nauto x = GetVar&lt;0&gt;(); //type(x) == double\nauto y = GetVar&lt;42&gt;(); //type(x) == int\n</code></pre>\n\n<p>Another version would be to pass std::integral_constant, like this:</p>\n\n<pre><code>template&lt;int Value&gt;\nusing v = std::integral_constant&lt;int, Value&gt;;\n\ntemplate&lt;typename T&gt;\ndouble GetVar(T) {return 0;};\n\nint GetVar(v&lt;42&gt;) {return 42;};\n\nauto x = GetVar(v&lt;0&gt;()); //type(x) == double\nauto y = GetVar(v&lt;42&gt;()); //type(x) == int\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 4861128, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bGJJm9mZpjw/AAAAAAAAAAI/AAAAAAAABg0/i7dh2AV5nJI/photo.jpg?sz=128", "display_name": "Alexander Katz", "link": "https://stackoverflow.com/users/4861128/alexander-katz"}, "edited": false, "score": 0, "creation_date": 1430976114, "post_id": 30092504, "comment_id": 48297588, "body": "Have a look at std::enable_if doc. Possibly you may use it to create return param type that depends on the value and not just on type"}], "tags": [], "owner": {"reputation": 99, "user_id": 4861128, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bGJJm9mZpjw/AAAAAAAAAAI/AAAAAAAABg0/i7dh2AV5nJI/photo.jpg?sz=128", "display_name": "Alexander Katz", "link": "https://stackoverflow.com/users/4861128/alexander-katz"}, "is_accepted": false, "score": 0, "last_activity_date": 1430975983, "creation_date": 1430975983, "answer_id": 30092504, "question_id": 30088983, "link": "https://stackoverflow.com/questions/30088983/returning-a-type-depending-on-the-parameter/30092504#30092504", "title": "Returning a type depending on the parameter", "body": "<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\n// foo1 overloads are enabled via the return type\ntemplate&lt;class T&gt;\ntypename std::enable_if&lt;std::is_floating_point&lt;T&gt;::value, T&gt;::type \nfoo1(T t) \n{\n    std::cout &lt;&lt; \"foo1: float\\n\";\n    return t;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4872615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5b42d69f9c93440edd0f7028335374?s=128&d=identicon&r=PG&f=1", "display_name": "Ausser", "link": "https://stackoverflow.com/users/4872615/ausser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1454, "favorite_count": 0, "accepted_answer_id": 30089574, "answer_count": 3, "score": 5, "last_activity_date": 1430975983, "creation_date": 1430952322, "last_edit_date": 1430953009, "question_id": 30088983, "link": "https://stackoverflow.com/questions/30088983/returning-a-type-depending-on-the-parameter", "title": "Returning a type depending on the parameter", "body": "<p>I want to have such a function that it's return type will be decided within the function(depending on the <strong>value</strong> of the parameter), but failed implementing it. (template specialization maybe?)</p>\n\n<pre><code>// half-pseudo code\nauto GetVar(int typeCode)\n{\n  if(typeCode == 0)return int(0);\n  else if(typeCode == 1)return double(0);\n  else return std::string(\"string\");\n}\n</code></pre>\n\n<p>And I want to use it without specifying the type as:</p>\n\n<pre><code>auto val = GetVar(42); // val's type is std::string\n</code></pre>\n"}, {"tags": ["python", "c++", "ipc", "fifo"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1430952237, "post_id": 30088928, "comment_id": 48290902, "body": "Tangent: why not just pass <code>pipename.c_str()</code> to <code>unlink</code> and <code>mkfifo</code>? The code as you&#39;ve written it needlessly allocates memory (and then forgets to deallocate it)."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1430953444, "post_id": 30088928, "comment_id": 48291297, "body": "<code>if(!read(fd, buf, MAX_BUF))</code> -- You throw away the result of <code>read</code>, so you have no idea how much data you read. There&#39;s no possible way the code could work."}], "answers": [{"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430952887, "post_id": 30089058, "comment_id": 48291127, "body": "This should work even if there are embedded nulls. A <code>std::string</code> can contain arbitrary data."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430953171, "post_id": 30089058, "comment_id": 48291218, "body": "@Brian, True.  But the constructor he&#39;s using assumes a C-style string is the input data. (I&#39;m admittedly assuming <code>buf</code> is defined as <code>char *</code> or <code>char []</code>.)"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430953340, "post_id": 30089058, "comment_id": 48291266, "body": "I mean, your code uses the correct constructor, so it doesn&#39;t suffer from the same problem. Or am I misunderstanding something?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430953634, "post_id": 30089058, "comment_id": 48291352, "body": "I used the constructor that specifies the length of the input string.  I don&#39;t recall offhand what happens if a <code>&#39;\\0&#39;</code> is embedded in such a string with that constructor.  That&#39;s why I said it &quot;may still fail&quot;.  But it does prevent overruns, which the original code did not.  Per <a href=\"http://www.cplusplus.com/reference/string/string/string/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/string/string/string</a>, the <code>string( const char *, size_t )</code> constructor copies the specified number of bytes.  So it should work.  But I don&#39;t remember ever using that constructor."}, {"owner": {"reputation": 1152, "user_id": 4541974, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152538725216326/picture?type=large", "display_name": "Luis Cruz", "link": "https://stackoverflow.com/users/4541974/luis-cruz"}, "edited": false, "score": 0, "creation_date": 1430960546, "post_id": 30089058, "comment_id": 48293259, "body": "So just to be clear... my python code should not send the &#39;\\0&#39; character?"}], "tags": [], "owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1430953405, "last_edit_date": 1430953405, "creation_date": 1430952807, "answer_id": 30089058, "question_id": 30088928, "link": "https://stackoverflow.com/questions/30088928/loss-of-data-in-a-fifo-pipe/30089058#30089058", "title": "Loss of data in a FIFO pipe?", "body": "<p><code>buf</code> is not guaranteed to be terminated, nor is it guaranteed to not have <code>'\\0'</code> characters embedded in it from the code you posted.  This should work better, but may still fail if the Python code embeds a <code>'\\0'</code> in the data it writes:</p>\n\n<pre><code>while( running_threads )\n{\n    ssize_t bytesRead = read(fd, buf, MAX_BUF);\n    if ( bytesRead &lt; 0 )\n         break;\n    else if ( bytesRead == 0 )\n         continue;\n\n    string line( buf, static_cast&lt;size_t&gt;(bytesRead) );\n</code></pre>\n\n<p>And your code doesn't properly handle an error condition should <code>read()</code> return -1.</p>\n"}], "owner": {"reputation": 1152, "user_id": 4541974, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152538725216326/picture?type=large", "display_name": "Luis Cruz", "link": "https://stackoverflow.com/users/4541974/luis-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430953405, "creation_date": 1430951996, "last_edit_date": 1430952131, "question_id": 30088928, "link": "https://stackoverflow.com/questions/30088928/loss-of-data-in-a-fifo-pipe", "title": "Loss of data in a FIFO pipe?", "body": "<p>I have a python process writing to a named pipe, and a C++ program reads it. (I create the pipes in C++). Well, it seems to work fine. However, sometimes I notice that there's loss of data. The data is not detected by the reader! Am I doing something wrong?</p>\n\n<p>Here's how I am creating the pipes:</p>\n\n<pre><code>void create_pipes(string pipename){\n\n    char * cstr1 = new char [pipename.length()+1];\n    strcpy (cstr1, pipename.c_str());\n\n    cout &lt;&lt; \"Creating \" &lt;&lt; pipename &lt;&lt; \" pipe...\" &lt;&lt; endl;\n    unlink (cstr1); // Delete pipe\n    int result = mkfifo (cstr1, S_IRUSR| S_IWUSR);  // Create Pipe\n    if( result == -1 ){\n         cout &lt;&lt; \"There was en error creating the pipe! \" &lt;&lt; result &lt;&lt; endl;\n         //return 0;\n    }\n    else\n        cout &lt;&lt; \"Pipe created!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Now, I have a thread that reads the pipe like this:</p>\n\n<pre><code>     int fd = open(cstr1, O_RDONLY);  // Open the pipe\n\n\n    while( running_threads ){\n\n        if(!read(fd, buf, MAX_BUF))\n            continue;\n        string line(buf);\n        if( buf != \"\" ){\n            //cout &lt;&lt; line;\n            pipe_r.DECODE_PIPE_DATA(line);\n        }\n    }\n\n    cout &lt;&lt; \"Thread terminated\" &lt;&lt; endl;\n\n    close(fd);\n</code></pre>\n\n<p>In python I'm simply writing the data to the pipe by doing this:</p>\n\n<pre><code>def write_pipe(file_string):\n    while True:\n        try:\n            pipe.write(file_string)\n            pipe.flush()\n            break\n        except:\n            print \"Error while writing to pipe\"\n            continue\n</code></pre>\n\n<p>What could be causing my problem? The python program writes the data into the pipe successfully; But the c++ program sometimes will not read the pipe. Can this be caused by the python process writing data faster than the c++ program before it could actually read it? What should I do?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "file-io", "runtime-error"], "comments": [{"owner": {"reputation": 616, "user_id": 1762208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBdrF.jpg?s=128&g=1", "display_name": "bentank", "link": "https://stackoverflow.com/users/1762208/bentank"}, "edited": false, "score": 0, "creation_date": 1430951961, "post_id": 30088852, "comment_id": 48290802, "body": "Compiles and runs for me. I was not able to crash it."}, {"owner": {"reputation": 1090, "user_id": 2843157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qorh2.jpg?s=128&g=1", "display_name": "John Odom", "link": "https://stackoverflow.com/users/2843157/john-odom"}, "edited": false, "score": 0, "creation_date": 1430952072, "post_id": 30088852, "comment_id": 48290841, "body": "Welcome to StackOverflow! Where in case 1 does it crash (debug it to find out)? Also please read <a href=\"http://stackoverflow.com/help/mcve\">this link</a> on how to write MCVE code when asking a question here."}, {"owner": {"reputation": 1, "user_id": 4869105, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mrd2boj2aO0/AAAAAAAAAAI/AAAAAAAAAB0/5hLJCNxX2Rc/photo.jpg?sz=128", "display_name": "h h", "link": "https://stackoverflow.com/users/4869105/h-h"}, "edited": false, "score": 1, "creation_date": 1430952104, "post_id": 30088852, "comment_id": 48290852, "body": "I&#39;m using dev c++ and windows 7 do you know of any issue that could be on my end?  My response to John Odom :  an access violation (segmentation fault) raised in my program."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1430952492, "post_id": 30088852, "comment_id": 48290989, "body": "Your loops only seem to do something on the first index and the last index, so they don&#39;t need to be loops."}, {"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "reply_to_user": {"reputation": 1090, "user_id": 2843157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qorh2.jpg?s=128&g=1", "display_name": "John Odom", "link": "https://stackoverflow.com/users/2843157/john-odom"}, "edited": false, "score": 1, "creation_date": 1430952778, "post_id": 30088852, "comment_id": 48291093, "body": "To elaborate on @JohnOdom&#39;s comment: you said <i>&quot;my program crashes every time I invoke case 1 of the main switch statement to select a file to in&quot;</i> .  Okay, so why do we need to see cases 2 through 6?  In addition to reading the MCVE link, I&#39;d suggest reading fully through <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">Short, Self-Contained, Compilable Example</a>.  You need to do the work to remove the extraneous code and might just find the smoking gun while doing so.  (Note you can edit your questions with the EDIT button.)"}], "answers": [{"tags": [], "owner": {"reputation": 1958, "user_id": 1150249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22ba9a5573439e1f850203c465467c3?s=128&d=identicon&r=PG", "display_name": "dhavenith", "link": "https://stackoverflow.com/users/1150249/dhavenith"}, "is_accepted": false, "score": 0, "last_activity_date": 1430952752, "last_edit_date": 1430952752, "creation_date": 1430952211, "answer_id": 30088973, "question_id": 30088852, "link": "https://stackoverflow.com/questions/30088852/file-in-out-program-crashes-after-case-1-is-invoked/30088973#30088973", "title": "File In/Out, Program crashes after case 1 is invoked", "body": "<p>One possible issue is this dangerous combination:</p>\n\n<pre><code>for(int i = 0; i &lt; length; i++)\n</code></pre>\n\n<p>In combination with </p>\n\n<pre><code>temp.erase(temp.begin());\n</code></pre>\n\n<p>...which shortens your string.</p>\n\n<p>This means that if a string in the input starts with punctuation, the following statement will peek one beyond the end of the string:</p>\n\n<pre><code>if ( i == (length - 1) &amp;&amp; ispunct(temp[i]))\n</code></pre>\n\n<p>All of this while, as @molbdnilo stated, you don't even need loops in this case.</p>\n"}], "owner": {"reputation": 1, "user_id": 4869105, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mrd2boj2aO0/AAAAAAAAAAI/AAAAAAAAAB0/5hLJCNxX2Rc/photo.jpg?sz=128", "display_name": "h h", "link": "https://stackoverflow.com/users/4869105/h-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1430952823, "creation_date": 1430951588, "last_edit_date": 1430952823, "question_id": 30088852, "link": "https://stackoverflow.com/questions/30088852/file-in-out-program-crashes-after-case-1-is-invoked", "title": "File In/Out, Program crashes after case 1 is invoked", "body": "<p>I have been using stack overflow for a while now to get through my first c++ class and this is my first time asking a question, so please bear with me. \nThis problem is about file in/out - simple reading and writing. I am supposed to crunch through a no frills text file and determine whether a string has leading or trailing punctuation, split them off, count punctuation and letters (not punct in the middle of strings as in the word can't or www.google.com)\nI have the loops down (or so I thought) but recently my program crashes every time I invoke case 1 of the main switch statement to select a file to in. Case 1 does the primary crunching to determine the longest string, shortest string, punct count , and letter count. </p>\n\n<p>What am I missing here?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main(){\nifstream in;\nofstream out;\nchar outFile[50], inFile[50];\nstring temp, wird;\nint x, longest, shortest, words, punct, wordlen, length, count;\nfloat letters;\n\n\ncout &lt;&lt; \"Enter output file: \";\ncin &gt;&gt; outFile;\nout.open(outFile);\ndo{\n   cout &lt;&lt; \"\\nSelect an option:\\n\\t1 - Enter input file name\\n\\t2 - Determine word statistics\\n\\t3 - List shortest words\\n\\t4 - List longest words\\n\\t5 - Search for a word\\n\\t6 - Exit\\n\";\n   cin &gt;&gt; x;\n   switch(x){\n             case 1: // input file select\n                  cout &lt;&lt; \"\\nEnter input file name: \";\n                  out &lt;&lt; \"\\nEnter input file name: \";\n                  cin &gt;&gt; inFile;\n                  in.open(inFile);\n                  words = 0;\n                  letters = 0;\n                  punct = 0;\n\n                  in &gt;&gt; temp;\n                  longest = temp.length();\n                  shortest = temp.length();\n                  do{ // to determine letters, words, longest, shortest, punct\n                           length = temp.length();\n                           if (ispunct(temp[length -1]))\n                                   {\n                                      punct++;\n                                      temp.erase(temp.end()); // erase trailing punct\n                                   } //end if\n                           if( ispunct(temp[0]))\n                                   {\n                                       punct++;\n                                       temp.erase(temp.begin()); // erase leading punct\n                                   } // end if\n                           length = temp.length();\n                           if(length &gt; 0)\n                           {\n                              words++;\n                              letters += length;\n                              if(longest &lt; length)\n                                         longest = length;\n                              if(shortest &gt; length)\n                                          shortest = length;\n                           } // end if nest                                                                                                      \n                           in &gt;&gt; temp;\n                  }while(in);\n\n\n                  in.close();\n                  in.open(inFile);\n\n                  break;\n             case 2: // file stats\n                  if(!in.is_open()){\n                                    cout &lt;&lt; \"\\nError - no input file selected\";\n                                    out &lt;&lt; \"\\nError - no input file selected\";\n                                    } // end if\n                  else {\n                       cout &lt;&lt; \"\\nFilename: \" &lt;&lt; inFile &lt;&lt;\n                       \"\\nTotal number of words: \" &lt;&lt; words &lt;&lt;\n                       \"\\nAverage word length: \" &lt;&lt; letters / words &lt;&lt;\n                       \"\\nTotal number of word characters: \" &lt;&lt;  letters &lt;&lt;\n                       \"\\nTotal number of punctuation characters: \" &lt;&lt; punct&lt;&lt;\n                       \"\\nShortest word length: \" &lt;&lt; shortest &lt;&lt;\n                       \"\\nLongest word length: \" &lt;&lt; longest;\n                       out &lt;&lt; \"\\nFilename: \" &lt;&lt; inFile &lt;&lt; \n                       \"\\nTotal number of words: \" &lt;&lt; words &lt;&lt;\n                       \"\\nAverage word length: \" &lt;&lt; letters / words &lt;&lt;\n                       \"\\nTotal number of word characters: \" &lt;&lt;  letters &lt;&lt;\n                       \"\\nTotal number of punctuation characters: \" &lt;&lt; punct &lt;&lt;\n                       \"\\nShortest word length: \" &lt;&lt; shortest &lt;&lt;\n                       \"\\nLongest word length: \" &lt;&lt; longest;\n                       } // end else\n                  break;\n             case 3: // shortest words list\n                  if(!in.is_open()){\n                                    cout &lt;&lt; \"\\nError - no input file selected\";\n                                    out &lt;&lt; \"\\nError - no input file selected\";\n                                    } // end if\n                  else{\n                  cout &lt;&lt; \"Filename: \" &lt;&lt; inFile &lt;&lt; \"\\nShortest words in file:\\n\";\n                  out &lt;&lt; \"Filename: \" &lt;&lt; inFile &lt;&lt; \"\\nShortest words in file:\\n\";\n                  in &gt;&gt; temp;\n                  do{ \n                           length = temp.length();\n                           if (ispunct(temp[length -1]))\n                                   {\n                                      punct++;\n                                      temp.erase(temp.end()); // erase trailing punct\n                                   } //end if\n                           if( ispunct(temp[0]))\n                                   {\n                                       punct++;\n                                       temp.erase(temp.begin()); // erase leading punct\n                                   } // end if\n                           length = temp.length();\n                           if(shortest == length){\n                                      cout &lt;&lt; temp &lt;&lt; endl;\n                                      out &lt;&lt; temp &lt;&lt; endl;  \n                                      }//endif                                                                            \n                           in &gt;&gt; temp;\n                  }while(in);\n                  }//endelse\n                  in.close();\n                  in.open(inFile);\n\n                  break;\n             case 4: // longest words list\n                  if(!in.is_open()){\n                                    cout &lt;&lt; \"\\nError - no input file selected\";\n                                    out &lt;&lt; \"\\nError - no input file selected\";\n                                    } // end if\n                  else {\n                  in &gt;&gt; temp;\n                  do{ \n                           length = temp.length();\n                           if (ispunct(temp[length -1]))\n                                   {\n                                      punct++;\n                                      temp.erase(temp.end()); // erase trailing punct\n                                   } //end if\n                           if( ispunct(temp[0]))\n                                   {\n                                       punct++;\n                                       temp.erase(temp.begin()); // erase leading punct\n                                   } // end if\n                           length = temp.length();\n                           if(longest == length){\n                                      cout &lt;&lt; temp &lt;&lt; endl;\n                                      out &lt;&lt; temp &lt;&lt; endl;  \n                                      }//endif                                                                            \n                           in &gt;&gt; temp;\n                  }while(in);\n                  in.close();\n                  in.open(inFile);\n                       }// end else\n                  break;\n             case 5:\n                  if(!in.is_open()){\n                                    cout &lt;&lt; \"\\nError - no input file selected\";\n                                    out &lt;&lt; \"\\nError - no input file selected\";\n                                    } // end if\n                  cout &lt;&lt; \"\\nEnter word to find in file: \";\n                  out &lt;&lt; \"\\nEnter word to find in file: \";\n                  cin &gt;&gt; wird;\n                  cout &lt;&lt; \"\\nWord to find: \" &lt;&lt; wird &lt;&lt; endl;\n                  out &lt;&lt; \"\\nWord to find: \" &lt;&lt; wird &lt;&lt; endl;\n                  count = 0;\n                  in &gt;&gt; temp;\n                  do{\n                           length = temp.length();\n                           if (ispunct(temp[length -1]))\n                                   {\n                                      punct++;\n                                      temp.erase(temp.end()); // erase trailing punct\n                                   } //end if\n                           if( ispunct(temp[0]))\n                                   {\n                                       punct++;\n                                       temp.erase(temp.begin()); // erase leading punct\n                                   } // end if\n                           length = temp.length();\n                           length = temp.length();\n                           if(temp.compare(wird)){\n                                      count ++ ; \n                                      }//endif                                                                            \n                           in &gt;&gt; temp;\n                  }while(in);\n                  in.close();\n                  in.open(inFile);\n\n\n\n                  cout &lt;&lt; \"\\nThe word \" &lt;&lt; wird &lt;&lt; \" appears \" &lt;&lt; count &lt;&lt; \" times.\";\n                  out &lt;&lt; \"\\nThe word \" &lt;&lt; wird &lt;&lt; \" appears \" &lt;&lt; count &lt;&lt; \" times.\";\n                  break;\n             case 6:\n                  in.close();\n                  out &lt;&lt; \"\\n Program terminated by user\";\n                  out.close();\n                  break;} // end switch\n   }while(x &lt; 6);\nreturn 0;    \n} // end main\n</code></pre>\n"}, {"tags": ["c++", "stdthread", "move-constructor"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1430952149, "post_id": 30088814, "comment_id": 48290872, "body": "Well, you&#39;re getting Foo destructor  called, aren&#39;t you?"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1430952226, "post_id": 30088814, "comment_id": 48290896, "body": "Basically, on move you should render <code>foo</code> into some inoperable state, so destructor won&#39;t do anything"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1430952227, "post_id": 30088814, "comment_id": 48290897, "body": "You&#39;re binding the thread to a specific instance by passing <code>this</code> as an argument and calling a member function of that particular object. Therefore, moving the thread won&#39;t be as trivial as moving its handle."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1430952238, "post_id": 30088814, "comment_id": 48290903, "body": "You can move the thread to a new object but isn&#39;t the <code>this</code> pointer the thread was constructed with still pointing to the old object?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1430952363, "post_id": 30088814, "comment_id": 48290944, "body": "A very easy solution is to put the whole state including the thread in an object on the heap, and storing only a <code>unique_ptr</code> to that in <code>Foo</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1430952418, "post_id": 30088814, "comment_id": 48290967, "body": "Your thread is basically running one of the methods of a specific object. You can&#39;t just magically have it start running the same method of a different object."}], "owner": {"reputation": 673, "user_id": 1089579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e98ee88d11f146787726ce90558d2f1?s=128&d=identicon&r=PG", "display_name": "Dan Halliday", "link": "https://stackoverflow.com/users/1089579/dan-halliday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430951406, "creation_date": 1430951406, "question_id": 30088814, "link": "https://stackoverflow.com/questions/30088814/moving-stdthread-and-maintaining-state", "title": "Moving std::thread and maintaining state", "body": "<p>I have a class which maintains a worker thread. It needs to be move constructible as I pass them around and add/remove from arrays, such as:</p>\n\n<pre><code>    for (...) {\n        Foo foo;\n        foos.push_back(std::move(foo));\n    }\n</code></pre>\n\n<p>The class setup looks like this:</p>\n\n<pre><code>Foo::Foo() : worker(), working(true) {\n    worker = std::thread(&amp;Foo::work, this);\n}\n\nFoo::Foo(Foo &amp;&amp;foo) {\n    working = true;\n    worker = std::move(foo.worker);\n}\n\nFoo::~Foo() {\n    if (worker.joinable()) {\n        working = false;\n        worker.join();\n    }\n}\n\nvoid Foo::work() {\n    while(working) {\n        std::cout &lt;&lt; \"working...\" &lt;&lt; std::endl;\n        std::this_thread::sleep_for(std::chrono::seconds(1));\n    }\n}\n</code></pre>\n\n<p>The problem is that after a <code>Foo</code> has been moved, its worker thread exits. I discovered it's because <code>working</code> is now seen by the <code>worker</code> to be <code>false</code>.</p>\n\n<p>How can I get the <code>worker</code> thread to see the instance variables of the new (moved-to) parent <code>Foo</code> object? Is this possible? Is my move constructor totally wrong?</p>\n"}, {"tags": ["c++", "visual-studio-2013", "compiler-errors"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1430951410, "post_id": 30088767, "comment_id": 48290621, "body": "Generally you&#39;d want to include windows.h in your precompiled header.  You might also copy/paste the exact error messages since you&#39;ve misspelled quite a bit in your question.  I&#39;d suggest reducing your code to a small simple example and see if that works and then add things to see where it breaks.  You seem to have an include problem but it isn&#39;t evident what it would be from the code you&#39;ve posted."}, {"owner": {"reputation": 11, "user_id": 4872520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5508ec255ddf4631605b7e628841314?s=128&d=identicon&r=PG&f=1", "display_name": "Coder86", "link": "https://stackoverflow.com/users/4872520/coder86"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1430965943, "post_id": 30088767, "comment_id": 48294575, "body": "Sorry, this is my first post as well. The error code reads: error C3861: &#39;PeekMessage&#39;: identifier not found...same for all others except WNDCLASSEX which has error C2065. So I need to have my header precompiled to get my build to work??"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1430968824, "post_id": 30088767, "comment_id": 48295314, "body": "You can edit your question to include the copy/pasted errors.  You do not ever need a precompiled header, but if you&#39;re using one it can screw some things up if you do it wrong.  Without seeing more code all anyone could do is guess."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4872520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5508ec255ddf4631605b7e628841314?s=128&d=identicon&r=PG&f=1", "display_name": "Coder86", "link": "https://stackoverflow.com/users/4872520/coder86"}, "is_accepted": false, "score": 0, "last_activity_date": 1431139522, "creation_date": 1431139522, "answer_id": 30135388, "question_id": 30088767, "link": "https://stackoverflow.com/questions/30088767/vs-2013-errorc3861-peekmessage-etc-and-errorc2065-wndclassex/30135388#30135388", "title": "VS 2013 errorC3861 PeekMessage etc and errorC2065 WNDCLASSEX", "body": "<p>Figured it out, directx projects don't recognize window API, I needed a win32 project, apply #stdafx headers on all my cpp files to get precompiled headers to work an also add #pragma once to all header files to avoid pch errors. VS is a bit quirky it turns out. Also for all the other noobs, make sure you set up file paths for directx and that you add files through project ->add->newfile->appropriate file type. it will save you headaches from VS knowing correct file locations.</p>\n"}], "owner": {"reputation": 11, "user_id": 4872520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5508ec255ddf4631605b7e628841314?s=128&d=identicon&r=PG&f=1", "display_name": "Coder86", "link": "https://stackoverflow.com/users/4872520/coder86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431139522, "creation_date": 1430951173, "question_id": 30088767, "link": "https://stackoverflow.com/questions/30088767/vs-2013-errorc3861-peekmessage-etc-and-errorc2065-wndclassex", "title": "VS 2013 errorC3861 PeekMessage etc and errorC2065 WNDCLASSEX", "body": "<p>I am attempting a new user graphics tutorial but I am very stuck. I am a very new programmer...I was under the impression that most of these definitions would be included in  I included. My message handler is missing an identifier 'DefWindowProcess', WINDCLASSEX is also not being identified, GetModuleHandle function, PeekMessage/TranslateMessage etc. The Microsoft dev center says that all these definitions should be in windows.h.</p>\n\n<pre><code>#ifndef _SYSTEMCLASS_H_\n#define _SYSTEMCLASS_H_\n\n#define WIN32_LEAN_AND_MEAN\n\n#include &lt;windows.h&gt;\n\n#include \"inputclass.h\"\n#include \"graphicsclass.h\"\n\n\nclass SystemClass\n{\npublic:\nSystemClass();\nSystemClass(const SystemClass&amp;);\n~SystemClass();\n\nbool Initialize();\nvoid Shutdown();\nvoid Run();\n\nLRESULT CALLBACK MessageHandler(HWND, UINT, WPARAM, LPARAM);\n\nprivate:\nbool Frame();\nvoid InitializeWindows(int&amp;, int&amp;);\nvoid ShutdownWindows();\n\nprivate:\nLPCWSTR m_applicationName;\nHINSTANCE m_hinstance;\nHWND m_hwnd;\n\nInputClass* m_Input;\nGraphicsClass* m_Graphics;\n\n};\n\nstatic LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);\n\nstatic SystemClass* ApplicationHandle = 0;\n\n#endif\n</code></pre>\n\n<p>my systemclass.cpp is as follows</p>\n\n<pre><code>#include \"pch.h\"\n#include \"systemclass.h\"\n\nSystemClass::SystemClass()\n{\nm_Input = 0;\nm_Graphics = 0;\n}\n\n\nbool SystemClass::Initialize()\n{\nint screenWidth, screenHeight;\nbool result;\n\nscreenWidth = 0;\nscreenHeight = 0;\n\n// Initialize the windows api.\nInitializeWindows(screenWidth, screenHeight);\n\nm_Input = new InputClass;\nif (!m_Input)\n{\n    return false;\n}\n\n// Initialize the input object.\nm_Input-&gt;Initialize();\n\n// Create the graphics object.  This object will handle rendering all the graphics for this application.\nm_Graphics = new GraphicsClass;\nif (!m_Graphics)\n{\n    return false;\n}\n\n// Initialize the graphics object.\nresult = m_Graphics-&gt;Initialize(screenWidth, screenHeight, m_hwnd);\nif (!result)\n{\n    return false;\n}\n\nreturn true;\n}\n\n\nvoid SystemClass::Shutdown()\n{\n// Release the graphics object.\nif (m_Graphics)\n{\n    m_Graphics-&gt;Shutdown();\n    delete m_Graphics;\n    m_Graphics = 0;\n}\n\n// Release the input object.\nif (m_Input)\n{\n    delete m_Input;\n    m_Input = 0;\n}\n\n// Shutdown the window.\nShutdownWindows();\n\nreturn;\n}\n\n\nvoid SystemClass::Run()\n{\nMSG msg;\nbool done, result;\n\n\n// Initialize the message structure.\nZeroMemory(&amp;msg, sizeof(MSG));\n\n// Loop until there is a quit message from the window or the user.\ndone = false;\nwhile (!done)\n{\n    // Handle the windows messages.\n    if ( PeekMessage(&amp;msg, NULL, 0, 0, PM_REMOVE))\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n\n    // If windows signals to end the application then exit out.\n    if (msg.message == WM_QUIT)\n    {\n        done = true;\n    }\n    else\n    {\n        // Otherwise do the frame processing.\n        result = Frame();\n        if (!result)\n        {\n            done = true;\n        }\n    }\n\n}\n\nreturn;\n}\n\n\nbool SystemClass::Frame()\n{\nbool result;\n\n\n// Check if the user pressed escape and wants to exit the application.\nif (m_Input-&gt;IsKeyDown(VK_ESCAPE))\n{\n    return false;\n}\n\n// Do the frame processing for the graphics object.\nresult = m_Graphics-&gt;Frame();\nif (!result)\n{\n    return false;\n}\n\nreturn true;\n}\n\n\nLRESULT CALLBACK SystemClass::MessageHandler(HWND hwnd, UINT umsg, WPARAM   wparam, LPARAM lparam)\n{\nswitch (umsg)\n{\n    // Check if a key has been pressed on the keyboard.\ncase WM_KEYDOWN:\n{\n\n    m_Input-&gt;KeyDown((unsigned int)wparam);\n    return 0;\n}\n\n// Check if a key has been released on the keyboard.\ncase WM_KEYUP:\n{\n    m_Input-&gt;KeyUp((unsigned int)wparam);\n    return 0;\n}\n\ndefault:\n{\n    return DefWindowProc(hwnd, umsg, wparam, lparam);\n}\n}\n}\n\n\nvoid SystemClass::InitializeWindows(int&amp; screenWidth, int&amp; screenHeight)\n{\nWNDCLASSEX wc; //THIS IS THE PROBLEM\nDEVMODE dmScreenSettings;\nint posX, posY;\n\n\n// Get an external pointer to this object.  \nApplicationHandle = this;\n\n// Get the instance of this application.\nm_hinstance = GetModuleHandle(NULL);\n\n// Give the application a name.\nm_applicationName = L\"Engine\";\n\n// Setup the windows class with default settings.\nwc.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;\nwc.lpfnWndProc = WndProc;\nwc.cbClsExtra = 0;\nwc.cbWndExtra = 0;\nwc.hInstance = m_hinstance;\nwc.hIcon = LoadIcon(NULL, IDI_WINLOGO);\nwc.hIconSm = wc.hIcon;\nwc.hCursor = LoadCursor(NULL, IDC_ARROW);\nwc.hbrBackground = (HBRUSH)GetStockObject(BLACK_BRUSH);\nwc.lpszMenuName = NULL;\nwc.lpszClassName = m_applicationName;\nwc.cbSize = sizeof(WNDCLASSEX);\n\n// Register the window class.\nRegisterClassEx(&amp;wc);\n\n// Determine the resolution of the clients desktop screen.\nscreenWidth = GetSystemMetrics(SM_CXSCREEN);\nscreenHeight = GetSystemMetrics(SM_CYSCREEN);\n\n    if (FULL_SCREEN)\n{\n            memset(&amp;dmScreenSettings, 0, sizeof(dmScreenSettings));\n    dmScreenSettings.dmSize = sizeof(dmScreenSettings);\n    dmScreenSettings.dmPelsWidth = (unsigned long)screenWidth;\n    dmScreenSettings.dmPelsHeight = (unsigned long)screenHeight;\n    dmScreenSettings.dmBitsPerPel = 32;\n    dmScreenSettings.dmFields = DM_BITSPERPEL | DM_PELSWIDTH | DM_PELSHEIGHT;\n\n    // Change the display settings to full screen.\n    ChangeDisplaySettings(&amp;dmScreenSettings, CDS_FULLSCREEN);\n\n    // Set the position of the window to the top left corner.\n    posX = posY = 0;\n}\nelse\n{\n    // If windowed then set it to 800x600 resolution.\n    screenWidth = 800;\n    screenHeight = 600;\n\n    // Place the window in the middle of the screen.\n    posX = (GetSystemMetrics(SM_CXSCREEN) - screenWidth) / 2;\n    posY = (GetSystemMetrics(SM_CYSCREEN) - screenHeight) / 2;\n}\n\n// Create the window with the screen settings and get the handle to it.\nm_hwnd = CreateWindowEx(WS_EX_APPWINDOW, m_applicationName, m_applicationName,\n    WS_CLIPSIBLINGS | WS_CLIPCHILDREN | WS_POPUP,\n    posX, posY, screenWidth, screenHeight, NULL, NULL, m_hinstance, NULL);\n\n// Bring the window up on the screen and set it as main focus.\nShowWindow(m_hwnd, SW_SHOW);\nSetForegroundWindow(m_hwnd);\nSetFocus(m_hwnd);\n\n// Hide the mouse cursor.\nShowCursor(false);\n\nreturn;\n}\n\n\nvoid SystemClass::ShutdownWindows()\n{\n// Show the mouse cursor.\nShowCursor(true);\n\n// Fix the display settings if leaving full screen mode.\nif (FULL_SCREEN)\n{\n    ChangeDisplaySettings(NULL, 0);\n}\n\n// Remove the window.\nDestroyWindow(m_hwnd);\nm_hwnd = NULL;\n\n// Remove the application instance.\nUnregisterClass(m_applicationName, m_hinstance);\nm_hinstance = NULL;\n\n// Release the pointer to this class.\nApplicationHandle = NULL;\n\nreturn;\n}\n\n\nLRESULT CALLBACK WndProc(HWND hwnd, UINT umessage, WPARAM wparam, LPARAM lparam)\n{\nswitch (umessage)\n{\n    // Check if the window is being destroyed.\ncase WM_DESTROY:\n{\n    PostQuitMessage(0);\n    return 0;\n}\n\n// Check if the window is being closed.\ncase WM_CLOSE:\n{\n    PostQuitMessage(0);\n    return 0;\n}\n\n// All other messages pass to the message handler in the system class.\ndefault:\n{\n    return ApplicationHandle-&gt;MessageHandler(hwnd, umessage, wparam, lparam);\n}\n}\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1430953275, "post_id": 30088741, "comment_id": 48291246, "body": "Please get rid of <a href=\"http://www.gidnetwork.com/b-61.html\" rel=\"nofollow noreferrer\">system(&quot;PAUSE&quot;);</a> -- you have no way to know what that might do on other people&#39;s systems. Maybe on my system that pauses the cooling on my nuclear reactor."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1430953447, "post_id": 30088741, "comment_id": 48291298, "body": "@DavidSchwartz I don&#39;t think I want your job :)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1430953495, "post_id": 30088741, "comment_id": 48291316, "body": "@MichaelDorgan My job is to type <code>PAUSE --restart</code> as quickly as possible when the klaxons sound."}, {"owner": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1430954845, "post_id": 30088741, "comment_id": 48291726, "body": "@DavidSchwartz I don&#39;t know. Isn&#39;t  system(&quot;PAUSE&quot;); just make the debugging mode pops-up until I close it by myself ?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1430955680, "post_id": 30088741, "comment_id": 48291978, "body": "@MahmoudEidarous Calls to <code>system</code> are very bloated and system-dependant. I just use something like <code>char c; cin &gt;&gt; c;</code>; maybe with a message above it."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1430956723, "post_id": 30088741, "comment_id": 48292279, "body": "@MahmoudEidarous How would I know what it does on your system? How do you know what it does on my system?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1430956859, "post_id": 30088741, "comment_id": 48292325, "body": "Your <code>for</code> loop will only perform one iteration because the statements inside the loop say to return for both the <code>true</code> and <code>false</code> cases."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "edited": false, "score": 0, "creation_date": 1430952098, "post_id": 30088816, "comment_id": 48290850, "body": "Sorry. Maybe, I don&#39;t get you well, but this didn&#39;t work for me. The Program is still getting just one input then closes."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "reply_to_user": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "edited": false, "score": 1, "creation_date": 1430952606, "post_id": 30088816, "comment_id": 48291033, "body": "@MahmoudEidarous: make sure the <code>return 0;</code> is outside of the loop, otherwise it will cause the program to terminate."}, {"owner": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430954402, "post_id": 30088816, "comment_id": 48291603, "body": "@FabioTurati It is outside the loop."}], "tags": [], "owner": {"reputation": 29810, "user_id": 423170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H9kNQ.png?s=128&g=1", "display_name": "Frxstrem", "link": "https://stackoverflow.com/users/423170/frxstrem"}, "is_accepted": false, "score": 3, "last_activity_date": 1430951420, "creation_date": 1430951420, "answer_id": 30088816, "question_id": 30088741, "link": "https://stackoverflow.com/questions/30088741/check-whether-numbers-are-prime-or-not/30088816#30088816", "title": "Check whether numbers are prime or not", "body": "<p>Think about what this does:</p>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>for (int i=2; i&lt;number; i++) \n{\n   if(number % i == 0)\n       return false;\n   else\n       return true;\n}\n</code></pre>\n\n<p>Assume that <code>i</code> is 3 or greater. Then in the first iteration, it checks if <code>number</code> is divisible by two. If it is, then it is not prime, so <code>false</code> is returned. But if it isn't divisible, then function returns <code>true</code> (meaning <code>number</code> should be prime) -- even when it shouldn't (for instance, 9, which is not divisible by 2 nor a prime number).</p>\n\n<p>The solution is to return <code>true</code> only when you know the number can't divide anything (i.e., after the <code>for</code> loop has finished):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>for (int i=2; i&lt;number; i++) \n{\n   if(number % i == 0)\n       return false;\n}\nreturn true;\n</code></pre>\n\n<hr>\n\n<p>As for the input loop, you could put the input/output part of the program in a <code>while</code> loop:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>while(true) {\n  cout &lt;&lt; \"Enter a positive integer: \";\n  cin &gt;&gt; y;\n\n  z = isPrime (y);\n\n  if(z==true)\n    cout &lt;&lt;\"number is prime\" &lt;&lt; endl;\n  else \n    cout &lt;&lt; \"number is not prime\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Then it will continue to read a number, check if it's a prime and print the result, in a loop. You can put a check (for instance, \"quit loop if number is less than 0 (i.e., not valid)\")</p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "edited": false, "score": 0, "creation_date": 1430951791, "post_id": 30088835, "comment_id": 48290751, "body": "Great! Now, I think I can handle with the while loop better than before. It works well for me. Thanks :)"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "edited": false, "score": 0, "creation_date": 1430951916, "post_id": 30088835, "comment_id": 48290792, "body": "Keep in mind, this isn&#39;t a perfect set-up when looping. If <code>cin</code> goes into a bad state, it will skip asking the user for input and loop endlessly."}, {"owner": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "edited": false, "score": 0, "creation_date": 1430952171, "post_id": 30088835, "comment_id": 48290881, "body": "Then, Do you have any advice for a better code, please ?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "edited": false, "score": 0, "creation_date": 1430952328, "post_id": 30088835, "comment_id": 48290926, "body": "This give good coverage of it. Notice in the askers question he&#39;s putting the return from <code>cin</code> into an int? Without the <code>cin.clear()&#47;ignore()</code> calls, if the user entered a letter, <code>cin</code> would fail, quit asking for user input, and the program would loop forever . <a href=\"http://stackoverflow.com/questions/5131647/why-would-we-call-cin-clear-and-cin-ignore-after-reading-input4\" title=\"why would we call cin clear and cin ignore after reading input4\">stackoverflow.com/questions/5131647/&hellip;</a>"}], "tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": true, "score": 0, "last_activity_date": 1430952048, "last_edit_date": 1430952048, "creation_date": 1430951508, "answer_id": 30088835, "question_id": 30088741, "link": "https://stackoverflow.com/questions/30088741/check-whether-numbers-are-prime-or-not/30088835#30088835", "title": "Check whether numbers are prime or not", "body": "<p>Just put a loop around the entire <code>main</code> contents:</p>\n\n<pre><code>int main()\n{\n\n    while (true)\n    {\n        int y;\n        bool z;\n        cout&lt;&lt;\"Enter a positive integer: \";\n        cin&gt;&gt;y;\n        z= isPrime (y);\n        if(z==true)\n            cout &lt;&lt;\"number is prime\" &lt;&lt; endl;\n        else \n            cout &lt;&lt; \"number is not prime\" &lt;&lt; endl;\n    }\n\n    system(\"PAUSE\");\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5531, "user_id": 2460632, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/efec63e786cd7066bc1029410c40f7f8?s=128&d=identicon&r=PG&f=1", "display_name": "IanPudney", "link": "https://stackoverflow.com/users/2460632/ianpudney"}, "is_accepted": false, "score": 0, "last_activity_date": 1430951555, "creation_date": 1430951555, "answer_id": 30088846, "question_id": 30088741, "link": "https://stackoverflow.com/questions/30088741/check-whether-numbers-are-prime-or-not/30088846#30088846", "title": "Check whether numbers are prime or not", "body": "<p>Really simply: just wrap the part you want to repeat in a loop:</p>\n\n<p>int main()\n{</p>\n\n<pre><code>int y;\nbool z;\nwhile (true) {\n    cout&lt;&lt;\"Enter a positive integer: \";\n    cin&gt;&gt;y;\n    z= isPrime (y);\n    if(z==true)\n        cout &lt;&lt;\"number is prime\" &lt;&lt; endl;\n    else \n        cout &lt;&lt; \"number is not prime\" &lt;&lt; endl;\n    system(\"PAUSE\");\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>This program will never stop. In C++, <code>while(x)</code> runs a block of code repeatedly as long as <code>x</code> is true. In this case, <code>x</code> is simply <code>true</code>, so it runs the code forever.</p>\n\n<p>One thing to watch out for: I see you indented three lines after your <code>else</code> statement, but you didn't use curly braces. In C++, if you don't use curly braces, <code>if</code>, <code>else</code>, <code>while</code>, <code>for</code>, etc. work on <em>only one line</em>. To make them work on multiple lines, use curly braces like this:</p>\n\n<pre><code>if(z==true) {\n    cout &lt;&lt;\"number is prime\" &lt;&lt; endl;\n}\nelse {\n    cout &lt;&lt; \"number is not prime\" &lt;&lt; endl;\n    system(\"PAUSE\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1746, "user_id": 1364489, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a14de6f4e93dddde282d1edd68029f6b?s=128&d=identicon&r=PG", "display_name": "apotry", "link": "https://stackoverflow.com/users/1364489/apotry"}, "is_accepted": false, "score": 0, "last_activity_date": 1430951753, "creation_date": 1430951753, "answer_id": 30088886, "question_id": 30088741, "link": "https://stackoverflow.com/questions/30088741/check-whether-numbers-are-prime-or-not/30088886#30088886", "title": "Check whether numbers are prime or not", "body": "<p>The other answers about simply looping over the input are correct. I would also highly recommend checking some well known algorithms for checking primality. For starters, I would recommend checking the Sieve of Eratosthenes </p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes</a></p>\n\n<p>Otherwise, you'll run into performance problems when somebody chooses to input a really large number.</p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "edited": false, "score": 1, "creation_date": 1430954244, "post_id": 30088936, "comment_id": 48291554, "body": "About 9.. How would it return true, although the for loop will divide 9 by each number less than it one by one. so it will discover that it is not divisible by 2, and then check 3, and discover that it is divisible by 3, and then will return false."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4570983"}, "is_accepted": false, "score": 0, "last_activity_date": 1430952031, "creation_date": 1430952031, "answer_id": 30088936, "question_id": 30088741, "link": "https://stackoverflow.com/questions/30088741/check-whether-numbers-are-prime-or-not/30088936#30088936", "title": "Check whether numbers are prime or not", "body": "<p>Get rid of your <code>else</code> clause in your function, and move <code>return true;</code> to just outside the <code>for</code> loop. Currently, as soon as your function find one number that your number is divisible by, it will return <code>true</code>. So if your number was 9, your function would quickly discover that it is not divisible by 2 and return <code>true</code>, despite 9 not being a prime number.</p>\n\n<p>Moving <code>return true;</code> to after your <code>for</code> loop would have the effect of making your program loop through all the while numbers less than the number you entered until it either found a number which your number is evenly divisible by, in which case your function would return <code>false</code>, or reached your number, in which case execution leaves the <code>for</code> loop and the function returns <code>true</code>.</p>\n\n<pre><code>bool isPrime(int number)\n{\n    for (int i = 2; i &lt; number; i++) \n    {\n       if (number % i == 0)\n           return false;\n    }\n    return true;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5409, "user_id": 480386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hKe7X.jpg?s=128&g=1", "display_name": "Christian Abella", "link": "https://stackoverflow.com/users/480386/christian-abella"}, "is_accepted": false, "score": 0, "last_activity_date": 1430958286, "creation_date": 1430958286, "answer_id": 30089890, "question_id": 30088741, "link": "https://stackoverflow.com/questions/30088741/check-whether-numbers-are-prime-or-not/30089890#30089890", "title": "Check whether numbers are prime or not", "body": "<p>I found this <a href=\"http://www.programminglogic.com/testing-if-a-number-is-prime-efficiently/\" rel=\"nofollow\">article</a> and it is more efficient\nin determining if a number is prime or not by using sqrt\ninstead of looping from 2 to N-1.</p>\n\n<pre><code>int isPrime(int n)\n{\n    int i;\n\n    if (n==2)\n        return 1;\n\n    if (n%2==0)\n        return 0;\n\n    for (i=3;i&lt;=sqrt(n);i+=2)\n        if (n%i==0)\n            return 0;\n\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 4872547, "user_type": "registered", "profile_image": "https://graph.facebook.com/837813922921210/picture?type=large", "display_name": "Mahmoud Eidarous", "link": "https://stackoverflow.com/users/4872547/mahmoud-eidarous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2582, "favorite_count": 1, "accepted_answer_id": 30088835, "answer_count": 6, "score": 2, "last_activity_date": 1430958286, "creation_date": 1430951039, "last_edit_date": 1430953133, "question_id": 30088741, "link": "https://stackoverflow.com/questions/30088741/check-whether-numbers-are-prime-or-not", "title": "Check whether numbers are prime or not", "body": "<p>I want to write a program that taking some input numbers and then check whether they are prime or not.\nI wrote it this way:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nbool isPrime (int number)\n{\n    for (int i=2; i&lt;number; i++) \n    {\n       if(number % i == 0)\n           return false;\n       else\n           return true;\n    }\n}\n\nint main()\n{\n    int y;\n    bool z;\n\n    cout &lt;&lt; \"Enter a positive integer: \";\n    cin &gt;&gt; y;\n\n    z = isPrime (y);\n\n    if(z==true)\n        cout &lt;&lt;\"number is prime\" &lt;&lt; endl;\n    else \n        cout &lt;&lt; \"number is not prime\" &lt;&lt; endl;\n\n    system(\"PAUSE\");\n\n    return 0;\n}\n</code></pre>\n\n<p>As, you can see, I wanted to use a function and for loop.\nBut this code is getting just one number. I want to loop the whole input process. How can I make it ?</p>\n"}, {"tags": ["c++", "qt", "qtreewidgetitem"], "comments": [{"owner": {"reputation": 1068, "user_id": 2469099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d14cefa990b93b276681eb0fb727986f?s=128&d=identicon&r=PG", "display_name": "Edwin Rodr&#237;guez", "link": "https://stackoverflow.com/users/2469099/edwin-rodr%c3%adguez"}, "edited": false, "score": 1, "creation_date": 1430952131, "post_id": 30088705, "comment_id": 48290861, "body": "Seems that the indicator is showed only for these items that have subitems"}, {"owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "reply_to_user": {"reputation": 1068, "user_id": 2469099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d14cefa990b93b276681eb0fb727986f?s=128&d=identicon&r=PG", "display_name": "Edwin Rodr&#237;guez", "link": "https://stackoverflow.com/users/2469099/edwin-rodr%c3%adguez"}, "edited": false, "score": 1, "creation_date": 1430952885, "post_id": 30088705, "comment_id": 48291126, "body": "@edwrodrig yes that&quot;s the issue QTreeWidgetItem:: ShowIndicator is supposed to display all the time the indicator. there is another argument which is only displaying when subitems"}, {"owner": {"reputation": 1068, "user_id": 2469099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d14cefa990b93b276681eb0fb727986f?s=128&d=identicon&r=PG", "display_name": "Edwin Rodr&#237;guez", "link": "https://stackoverflow.com/users/2469099/edwin-rodr%c3%adguez"}, "edited": false, "score": 0, "creation_date": 1430955633, "post_id": 30088705, "comment_id": 48291964, "body": "It&#39;s a Qt bug <a href=\"https://bugreports.qt.io/browse/QTBUG-28312\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTBUG-28312</a>"}], "owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430950911, "creation_date": 1430950911, "question_id": 30088705, "link": "https://stackoverflow.com/questions/30088705/qtreewidgetitem-childindicator-strange-behavior", "title": "QTreeWidgetItem ChildIndicator strange behavior", "body": "<p>I have develop an app using a QTreeWidget and based on QTreeWidgetItem. The app is a file browser-like. Each time I had to display a folder, I create it like this :</p>\n\n<pre><code>    item-&gt;setText(0, foldername);\n    item-&gt;setText(1,\"--\");\n    item-&gt;setText(2,\"--\");\n    item-&gt;setIcon(0,QIcon(\":/Images/folder_pic.png\"));\n    item-&gt;setFlags(Qt::ItemIsEnabled | Qt::ItemIsSelectable | Qt::ItemIsDropEnabled | Qt::ItemIsEditable);\n    item-&gt;setChildIndicatorPolicy(QTreeWidgetItem::ShowIndicator);\n</code></pre>\n\n<p>and I got this :</p>\n\n<p><img src=\"https://i.stack.imgur.com/rqs6d.jpg\" alt=\"enter image description here\"></p>\n\n<p>and when expand this</p>\n\n<p><img src=\"https://i.stack.imgur.com/kzjxL.jpg\" alt=\"enter image description here\"></p>\n\n<p>This working fine but when I delete the folder \"NewFolder\", I lose the indicator of the parent folder even if the indicator for this parent has been set to always show the indicator</p>\n\n<p><img src=\"https://i.stack.imgur.com/P8Nfi.jpg\" alt=\"enter image description here\"></p>\n\n<p>The delete code is just </p>\n\n<p>delete Item; </p>\n\n<p>where Item is the selected item, in my case the child of the folder apps.\nI have try to remove the delete and replace it by something like</p>\n\n<pre><code>ItParent = myItem-&gt;parent();\nmyItem-&gt;parent()-&gt;removeChild(myItem);\nif(ItParent != NULL)\n   ItParent-&gt;setChildIndicatorPolicy(QTreeWidgetItem::ShowIndicator);\n</code></pre>\n\n<p>it's not working as well</p>\n\n<p>Any idea ?</p>\n"}, {"tags": ["c++", "c", "windows"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1430949611, "post_id": 30088335, "comment_id": 48289843, "body": "<i>&quot;The code I used on linux to open a disk ...&quot;</i> <b>linux</b> with <i>drive characters <code>E:</code></i> and unescaped backslash `\\` path delimiter?? That sounds seriously strange, and I doubt you can present any running code.from this using a linux host environment."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1430953739, "post_id": 30088335, "comment_id": 48291378, "body": "I don&#39;t know if you can <code>fopen()</code> a physical drive, but you can open it with the Win32 API <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx\" rel=\"nofollow noreferrer\"><code>CreateFile()</code></a> function (despite its name, it can open several kinds of resources, not just files)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1430957401, "post_id": 30088335, "comment_id": 48292492, "body": "@RemyLebeau: Does <code>CreateFile()</code> work with deleted files?  The question is about recovering deleted files."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1430958876, "post_id": 30088335, "comment_id": 48292859, "body": "To recover deleted files, you have to access the file system directly and parse/alter its file records accordingly.  And also parse the raw partition data directly so you can find the deleted files, since they are not in the file system anymore (unless the file system keep track of them). You can do that stuff with <code>CreateFile()</code>/<code>ReadFile()</code>/<code>WriteFile()</code>, but you have to be VERY careful working at such a low level of data.  There are a bazillion recovery tools already widely available, I would not recommend writing a new one, except maybe as a learning exercise."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1430950705, "last_edit_date": 1430950705, "creation_date": 1430950134, "answer_id": 30088522, "question_id": 30088335, "link": "https://stackoverflow.com/questions/30088335/recovering-files-on-windows-and-c/30088522#30088522", "title": "Recovering Files on Windows and C", "body": "<blockquote>\n  <p><em>\"The code I used on linux to open a disk as a file was:\"</em>  </p>\n\n<pre><code> File *f = fopen(\"E:\\\", \"rb\");\n</code></pre>\n</blockquote>\n\n<p>I seriously doubt you ever got this code working on any linux system (or windows either).<br>\nYou'll need to escape the backslash path delimiter, if it's presented in any string literal:</p>\n\n<pre><code>FILE* f = fopen(\"E:\\\\\", \"rb\");\n                // ^\n</code></pre>\n\n<hr>\n\n<p>Also all that filesystem path style you are presenting to access a particular disk, is about accessing a windows file path/disk.</p>\n\n<p>No linux file system has notion about <em>drive characters</em>, and the file path delimiter value used is <code>'/'</code>, not <code>'\\\\'</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 3391168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7134ec3fc5865caee23558af99951de0?s=128&d=identicon&r=PG&f=1", "display_name": "MaToXz", "link": "https://stackoverflow.com/users/3391168/matoxz"}, "edited": false, "score": 0, "creation_date": 1430957909, "post_id": 30089769, "comment_id": 48292629, "body": "Thanks for you step list input, the points is than I&#39;ve  never try to do a thing like this before, so I&#39;m not really sure about how to do it, I doesn&#39;t even program on c/c++ so much, could you help me with an example of it or a guide about how to getting those data (Master File Table) so I can use it as a bridge to solve my target?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 61, "user_id": 3391168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7134ec3fc5865caee23558af99951de0?s=128&d=identicon&r=PG&f=1", "display_name": "MaToXz", "link": "https://stackoverflow.com/users/3391168/matoxz"}, "edited": false, "score": 0, "creation_date": 1430958110, "post_id": 30089769, "comment_id": 48292680, "body": "Post to SuperUser@StackExchange.com"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1430957338, "creation_date": 1430957338, "answer_id": 30089769, "question_id": 30088335, "link": "https://stackoverflow.com/questions/30088335/recovering-files-on-windows-and-c/30089769#30089769", "title": "Recovering Files on Windows and C", "body": "<p>To recover deleted files, you can't use <code>fopen</code> or <code>fstream::open</code> because the file was deleted.  Check the return value from the function or test the stream state.  </p>\n\n<p>The way to recover deleted files is:</p>\n\n<ol>\n<li>Get the Master File Table as raw data.</li>\n<li>Search for the record containing a string similar to the deleted\nfilename.</li>\n<li>Change the entry in the Master File Table to \"undeleted\".</li>\n<li>Write the Master File Table back to the drive.</li>\n</ol>\n\n<p>The above usually requires platform specific API, which is different on Linux and Windows platforms.  </p>\n"}], "owner": {"reputation": 61, "user_id": 3391168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7134ec3fc5865caee23558af99951de0?s=128&d=identicon&r=PG&f=1", "display_name": "MaToXz", "link": "https://stackoverflow.com/users/3391168/matoxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1430957338, "creation_date": 1430949403, "last_edit_date": 1430955538, "question_id": 30088335, "link": "https://stackoverflow.com/questions/30088335/recovering-files-on-windows-and-c", "title": "Recovering Files on Windows and C", "body": "<p>Well this time I'm trying to write a program in C which recover deleted files from a disk, it could be an external disk, I have an idea than i had used before on linux, it is to open the disk as a kind of file and scaning the Headers and file footers of everything within the disk, the point is I'm not sure if there's allow on windows to open a disk as an File, basiclly I have the logic how to develope this program, but I'm not sure how to implement it on windows, anybody can give me a hand with this?.</p>\n\n<p>The code I used on linux to open a disk as a file was:\nEdit: That was a sample of what I was using guys, it's just to give you an idea of what I was doing, the correct syntax I used was the next:</p>\n\n<pre><code>direccion = ui-&gt;linea-&gt;text().toLatin1().constData();\nf = fopen(direccion,\"rb\");\n</code></pre>\n\n<p>I used QT creator on linux, and direccion variable was a TextField value which contained the file path of the disk through a button function that open a QFileDialog...</p>\n\n<p>could I use it in windows as well?</p>\n\n<p>Thank you before hand..</p>\n"}, {"tags": ["c++", "c", "binaryfiles"], "comments": [{"owner": {"reputation": 901, "user_id": 3749292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UptT.jpg?s=128&g=1", "display_name": "Jerry Ajay", "link": "https://stackoverflow.com/users/3749292/jerry-ajay"}, "edited": false, "score": 0, "creation_date": 1430947866, "post_id": 30087895, "comment_id": 48289004, "body": "Use bitwise arithmetic operators. <a href=\"http://www.cprogramming.com/tutorial/bitwise_operators.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/bitwise_operators.html</a>"}, {"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1430947881, "post_id": 30087895, "comment_id": 48289015, "body": "sizeof(int)=4 means 4 bytes, aka 32 bits.  I think you therefore mean n bits from the first spot and 32-n bits from the other to form a 32 bit integer... but maybe not; can you clarify?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1430948815, "post_id": 30087895, "comment_id": 48289448, "body": "It&#39;s possible with memcpy.  Also with unions.  Also with bitwise operators.  Also with pointer assignment.  A tutorial on any of those topics should get you going."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1430950553, "post_id": 30087895, "comment_id": 48290274, "body": "<code>a = (b &lt;&lt; 16) | c;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7440, "user_id": 157344, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b403786b380b1b5a1ed25f144df103e6?s=128&d=identicon&r=PG", "display_name": "Freddie Chopin", "link": "https://stackoverflow.com/users/157344/freddie-chopin"}, "is_accepted": false, "score": 2, "last_activity_date": 1430947975, "creation_date": 1430947975, "answer_id": 30087970, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and/30087970#30087970", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>It is obviously possible and can be accomplished in many different ways.</p>\n\n<p>You can just read the data (with <code>fread()</code> or <code>read()</code> or whatever you want) into an array of 4 <code>char</code>, in two steps. Then you can just <code>memcpy()</code> this to your <code>int</code>. If you're not afraid of casting and pointer arithmetic, the use of <code>char array[4]</code> and <code>memcpy()</code> can be skipped.</p>\n"}, {"tags": [], "owner": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "is_accepted": false, "score": -1, "last_activity_date": 1430950300, "creation_date": 1430950300, "answer_id": 30088565, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and/30088565#30088565", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>I would to it the following way:</p>\n\n<pre><code>std::ifstream fstr(\"file\", std::ios_base::binary);\n\nint value;  \n\nfstr.read(reinterpret_cast&lt;char*&gt;(&amp;value), 2); //first two bytes\n\n//read other stuff\n\nfstr.read(reinterpret_cast&lt;char*&gt;(&amp;value)+2, 2); //second two bytes\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": true, "score": 3, "last_activity_date": 1430950783, "creation_date": 1430950783, "answer_id": 30088676, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and/30088676#30088676", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>Yes, it's possible and can be done in quite portable way <strong>(*)</strong>:</p>\n\n<pre><code>union int_bytes\n{\n    uint32_t value;\n    unsigned char bytes[4];\n};\n\nlong int first_part_offset = ... ;\nlong int second_part_offset = ... ;\nsize_t first_part_size = ... ;\n\nFILE* file = fopen(\"filename\", \"rb\");\n\nint_bytes result;\n\nfseek(file, first_part_offset, SEEK_SET);\nfread(&amp;(result.bytes[0]), 1, first_part_size, file);\n\nif(first_part_size &lt; 4) // nothing to read if first part was 4-byte long...\n{\n    fseek(file, second_part_offset, SEEK_SET);\n    fread(&amp;(result.bytes[first_part_size]), 1, first_part_size, file);\n}\n\nuint32_t final_int_value = int_bytes.value;\n</code></pre>\n\n<hr>\n\n<p><strong>(*)</strong> What non-portable can be done here? Remember, that serializing data always depends on <a href=\"http://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow\">byte ordering (endianness)</a> of current architecture.</p>\n\n<p>If you write this code:</p>\n\n<pre><code>int value = ... ;\nfwrite(&amp;value, sizeof(int), 1, file_handle);\n</code></pre>\n\n<p>file content will be endianness-dependent. Yes, most platforms are little-endian these days, but not all of them! If you know, that certain binary data was serialized as big-endian and you current hardware is little-endian (or vice versa), you will need to swap read bytes (most compilers allow to do this efficiently, however, providing intrinsic, that maps directly to <a href=\"http://docs.oracle.com/cd/E19455-01/806-3773/instructionset-122/index.html\" rel=\"nofollow\"><code>BSWAP</code> instruction</a>).</p>\n\n<p>Unions are your best friends in many byte-wise operations, that suppose to have at least <em>minimal</em> portability.</p>\n"}, {"tags": [], "owner": {"reputation": 2493, "user_id": 4866989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea9d94abae12663ba3ad2564619081?s=128&d=identicon&r=PG&f=1", "display_name": "Tim3880", "link": "https://stackoverflow.com/users/4866989/tim3880"}, "is_accepted": false, "score": 0, "last_activity_date": 1430950854, "creation_date": 1430950854, "answer_id": 30088696, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and/30088696#30088696", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>you can always read them into two variables and calculate your result. I don't think it's very useful or practical to read them into one var. If the two parts are close enough, you can read them into one buffer structure to avoid two reads.</p>\n"}], "owner": {"reputation": 105, "user_id": 3597501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4e6fb4e0ef27669d270944150bd9d85e?s=128&d=identicon&r=PG&f=1", "display_name": "pchr8", "link": "https://stackoverflow.com/users/3597501/pchr8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 30088676, "answer_count": 4, "score": 1, "last_activity_date": 1430950854, "creation_date": 1430947726, "question_id": 30087895, "link": "https://stackoverflow.com/questions/30087895/how-can-i-read-a-var-from-a-binary-file-from-different-parts-say-2-bytes-and", "title": "How can I read a var from a binary file from different parts? (Say, 2 bytes, and another 2 bytes from another place?)", "body": "<p>Is it possible to read data from multiple parts of a binary file? </p>\n\n<p>For the sake of example, an integer; sizeof(int)=4; I want to read the first n bytes from a place on the file, and the other 4-n bytes from another place; then somehow fit them together to form a full 4 byte integer.</p>\n\n<p>Is this possible? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6458, "user_id": 985032, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e8cb4a86a0afcc659a9f479075e141f?s=128&d=identicon&r=PG", "display_name": "Michael Price", "link": "https://stackoverflow.com/users/985032/michael-price"}, "edited": false, "score": 2, "creation_date": 1430948103, "post_id": 30087887, "comment_id": 48289121, "body": "See <a href=\"http://stackoverflow.com/questions/8535226/return-type-of-ternary-conditional-operator\" title=\"return type of ternary conditional operator\">stackoverflow.com/questions/8535226/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 4857952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7d8432c3ff2b6c81de95f6423987b7?s=128&d=identicon&r=PG&f=1", "display_name": "Owbea", "link": "https://stackoverflow.com/users/4857952/owbea"}, "edited": false, "score": 2, "creation_date": 1430948141, "post_id": 30087887, "comment_id": 48289142, "body": "See: <a href=\"http://stackoverflow.com/questions/8535226/return-type-of-ternary-conditional-operator\" title=\"return type of ternary conditional operator\">stackoverflow.com/questions/8535226/&hellip;</a>"}, {"owner": {"reputation": 235, "user_id": 3766665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e86dfe55b8bd299efcfdfb68b9a60b1?s=128&d=identicon&r=PG&f=1", "display_name": "bking", "link": "https://stackoverflow.com/users/3766665/bking"}, "edited": false, "score": 1, "creation_date": 1430982721, "post_id": 30087887, "comment_id": 48300628, "body": "The linked question was about having different types on both sides of the colon. While the answers discuss value categories, they would not explain directly why copy construction is necessary in the question that I have asked. I have edited my question to clarify that."}], "answers": [{"comments": [{"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1430948645, "post_id": 30088030, "comment_id": 48289381, "body": "Justification in standard [<i>&#167;5.16 Conditional operator</i>]."}, {"owner": {"reputation": 235, "user_id": 3766665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e86dfe55b8bd299efcfdfb68b9a60b1?s=128&d=identicon&r=PG&f=1", "display_name": "bking", "link": "https://stackoverflow.com/users/3766665/bking"}, "edited": false, "score": 0, "creation_date": 1430983141, "post_id": 30088030, "comment_id": 48300893, "body": "I was using C++03 in that case. Could you give an explanation on why the copy is necessary there? Wouldn&#39;t it be possible in priciple for the compiler to do a kind of &#39;cast on value category&#39; instead?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 235, "user_id": 3766665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e86dfe55b8bd299efcfdfb68b9a60b1?s=128&d=identicon&r=PG&f=1", "display_name": "bking", "link": "https://stackoverflow.com/users/3766665/bking"}, "edited": false, "score": 0, "creation_date": 1430983370, "post_id": 30088030, "comment_id": 48301062, "body": "@bking C++03 still has lvalues and rvalues. Just replace &quot;prvalue&quot; with &quot;rvalue&quot; in my answer."}, {"owner": {"reputation": 235, "user_id": 3766665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e86dfe55b8bd299efcfdfb68b9a60b1?s=128&d=identicon&r=PG&f=1", "display_name": "bking", "link": "https://stackoverflow.com/users/3766665/bking"}, "edited": false, "score": 0, "creation_date": 1430995421, "post_id": 30088030, "comment_id": 48309055, "body": "<a href=\"http://stackoverflow.com/a/20999389/3766665\">stackoverflow.com/a/20999389/3766665</a> explains the copying during the lvalue to rvalue conversion in a little more detail."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 12, "last_activity_date": 1430948157, "creation_date": 1430948157, "answer_id": 30088030, "question_id": 30087887, "link": "https://stackoverflow.com/questions/30087887/why-does-binding-to-const-reference-from-a-ternary-make-a-copy/30088030#30088030", "title": "Why does binding to const reference from a ternary make a copy?", "body": "<p>The conditional operator determines a common type and value category for its second and third operands. Whichever branch is chosen (as determined by the condition), the corresponding operand is converted into this common type and value category.</p>\n\n<p>In this case <code>X()</code> and <code>x</code> both have type <code>X</code>, so the common type is of course <code>X</code> itself. But the result is a prvalue, so if <code>x</code> is chosen (the condition is false) then the lvalue-to-rvalue conversion is applied, creating a prvalue temporary copy of <code>x</code> which is then bound to the reference.</p>\n\n<p>In conclusion, the use of the conditional operator itself is what forces the copy to be made.</p>\n"}], "owner": {"reputation": 235, "user_id": 3766665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e86dfe55b8bd299efcfdfb68b9a60b1?s=128&d=identicon&r=PG&f=1", "display_name": "bking", "link": "https://stackoverflow.com/users/3766665/bking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "closed_date": 1430949651, "accepted_answer_id": 30088030, "answer_count": 1, "score": 12, "last_activity_date": 1430950597, "creation_date": 1430947705, "last_edit_date": 1430950597, "question_id": 30087887, "link": "https://stackoverflow.com/questions/30087887/why-does-binding-to-const-reference-from-a-ternary-make-a-copy", "closed_reason": "Duplicate", "title": "Why does binding to const reference from a ternary make a copy?", "body": "<p>I am baffled by this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nstruct X {};\nvoid f( const X &amp;x ) { std::cerr &lt;&lt; &amp;x &lt;&lt; \"\\n\"; }\n\nstatic X x;\nint main()\n{\n  f( x ); // Off stack address\n  f( false ? X() : x ); // Different address on stack.\n}\n</code></pre>\n\n<p>Why would the second invocation of f make a temporary copy?</p>\n\n<p><strong>Edit:</strong> This question is not so much about the type X, but the fact that a copy is made. I was missing the sublety of value categories from the accepted answer and had expected f's parameter to bind on either x or X() directly like it does when rephrasing this as an if statement. </p>\n"}, {"tags": ["c++", "csv", "mfc"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1430957472, "post_id": 30087876, "comment_id": 48292510, "body": "Search StackOverflow for &quot;c++ read file csv&quot;.  This has been asked too many times."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1430957571, "post_id": 30087876, "comment_id": 48292538, "body": "I recommend learning plain C++ before learning the MS obscurities, such as <code>CString</code> and <code>String^</code>.  Using plain C++, I recommend <code>std::getline</code> using &#39;;&#39; as the delimiter."}], "answers": [{"comments": [{"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1430973897, "post_id": 30092031, "comment_id": 48296735, "body": "It may be called &quot;Comma Separated Values File&quot;, but in reality people put in commas, semicolons, tabs, ... As long as he handles everything correct, it should not be a problem to use a semicolon."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 2, "last_activity_date": 1431009364, "last_edit_date": 1431009364, "creation_date": 1430973453, "answer_id": 30092031, "question_id": 30087876, "link": "https://stackoverflow.com/questions/30087876/read-csv-file-contents-in-mfc/30092031#30092031", "title": "Read .CSV file contents in MFC", "body": "<p>Reading the file one character at a time is slow, you can read in larger blocks in to one string. This works as long as file is not too large. Then tokenize that string in to different lines, and tokenize each line in to different fields.</p>\n\n<p>By the way, you are asking for \"semi-colon separated value\" not csv, so change <code>','</code> to <code>';'</code></p>\n\n<pre><code>void tokenize(vector&lt;CStringA&gt; &amp;v, const CStringA &amp;source, char token)\n{\n    for (int start = 0, len = source.GetLength(); start &lt; len;)\n    {\n        int end = source.Find(token, start);\n        if (end &lt; 0) end = len;\n        v.push_back(source.Mid(start, end - start));\n        start = end + 1;\n    }\n}\n\nvoid foo()\n{\n    CStringA source; //read the whole file in to one string \"source\"\n    const int bufsize = 512 + 1;\n    char buf[bufsize];\n    CFile file(\"files.csv\", CFile::modeRead|CFile::typeBinary);\n    int count;\n    while ((count = file.Read(buf, bufsize - 1)) &gt; 0) {\n        buf[count] = 0;\n        source += buf;\n    }\n\n    source.Remove('\\r');\n    vector&lt;CStringA&gt; lines; //tokenize in to separate lines and store in vector\n    tokenize(lines, source, '\\n'); \n\n    for (int row = 0; row &lt; (int)lines.size(); row++) {\n        vector&lt;CStringA&gt; fields; //tokenize in to different fields\n        tokenize(fields, lines[row], ',');\n        for (int column = 0; column &lt; (int)fields.size(); column++)\n            TRACE(\"%s|\", fields[column]); //print each field for testing\n        TRACE(\"\\n\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4609293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856d697ae3057c6c6b9ba2b27af087da?s=128&d=identicon&r=PG&f=1", "display_name": "Perdue P", "link": "https://stackoverflow.com/users/4609293/perdue-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431009364, "creation_date": 1430947660, "last_edit_date": 1430971965, "question_id": 30087876, "link": "https://stackoverflow.com/questions/30087876/read-csv-file-contents-in-mfc", "title": "Read .CSV file contents in MFC", "body": "<p>Hi everyone I am a C++ MFC beginner and I want some help about how to read a .CSV file contents in C++ MFC by inherited the CStdioFile class.</p>\n\n<p>the file has data like that:</p>\n\n<p>AAAAAAAAA;BBBBBBB;CCCCCCC;DDDDDDDD;\nEEEEEEEE;FFFFFFFF; etc...</p>\n\n<p>AAAAAAAA is directly the string without the \"\"\nfor example like: test1;test2;...</p>\n\n<p>and represent values in a excel in reality.</p>\n\n<p>What I want is to create a new reader function with two parameters(line and column) that read into the file and extracts the good value and return it as a CString</p>\n\n<p>For the moment this is the piece of code I have:</p>\n\n<pre><code>CString ReadData(int rl, int rc)\n{\n    CString sLine;\n    LPCTSTR p = sLine;\n    unsigned int i=1;\n    unsigned int j=1;\n    CString s;\n\n    while(*p!= EOF)\n    {\n        if(*p==';' &amp;&amp; i==rl)\n            s.AppendChar(*p);\n        if(*p=='\\n')\n            i++;\n        p++;\n    }\n    return s;\n}\n</code></pre>\n\n<p>This is not working and not finished yet.</p>\n\n<p>What I want is some help to know a method to do that in the file, how to detect the end of the file( it is the EOF value normally ?), an end of line( '\\n' ?), Do I have to stock the differents strings in one line ? and of course some help in the code is also welcome.</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1430947641, "last_edit_date": 1430947641, "creation_date": 1430947461, "answer_id": 30087814, "question_id": 30087740, "link": "https://stackoverflow.com/questions/30087740/polymorphism-not-kicking-in-when-calling-virtual-method-on-base-class-copy-cons/30087814#30087814", "title": "Polymorphism not kicking-in when calling virtual method on base class&#39; copy constructor", "body": "<blockquote>\n  <p>Why is this happening?</p>\n</blockquote>\n\n<p>This is happening because the virtual table is not fully defined at that time. The virtual functions of derived classes are not set yet when base classes being constructed. They will be set in the virtual table when the derived classes are constructed.</p>\n\n<blockquote>\n  <p>Should polymorphism have My::foo be called?</p>\n</blockquote>\n\n<p>No. The above explanation should suffice.</p>\n\n<p>Virtual functions can be reliably called only inside the body of the constructor of the most derived class:</p>\n\n<pre><code>// This should work\nMy(const My&amp; other) : Base(other) { this-&gt;foo(); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1430947898, "last_edit_date": 1495540707, "creation_date": 1430947572, "answer_id": 30087848, "question_id": 30087740, "link": "https://stackoverflow.com/questions/30087740/polymorphism-not-kicking-in-when-calling-virtual-method-on-base-class-copy-cons/30087848#30087848", "title": "Polymorphism not kicking-in when calling virtual method on base class&#39; copy constructor", "body": "<p>You will find the answer in <a href=\"https://stackoverflow.com/questions/733360/why-do-we-not-have-a-virtual-constructor-in-c\">this</a>. Virtual constructor is not available and with your code it would be that. So calling a virtual function from a constructor will not work in a way that you think.</p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 1, "last_activity_date": 1430947626, "creation_date": 1430947626, "answer_id": 30087867, "question_id": 30087740, "link": "https://stackoverflow.com/questions/30087740/polymorphism-not-kicking-in-when-calling-virtual-method-on-base-class-copy-cons/30087867#30087867", "title": "Polymorphism not kicking-in when calling virtual method on base class&#39; copy constructor", "body": "<p>Dynamic dispatch is disabled during construction and destruction. This is by design. Inside a <code>Base</code> constructor, the <code>My</code> part of the object hasn't been constructed yet, so it makes no sense to call <code>My</code>'s overrider, which might access uninitialized members of <code>My</code> or otherwise depend upon <code>My</code>'s invariants that have not yet been established since <code>My</code>'s constructor hasn't completed yet.</p>\n\n<p>If this causes problems for you, you'll have to explain specifically what outcome you desire (post a new question) so workarounds can be suggested.</p>\n"}], "owner": {"reputation": 14141, "user_id": 519836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2aa95f64549bd119106e71022dc5c5?s=128&d=identicon&r=PG", "display_name": "Andry", "link": "https://stackoverflow.com/users/519836/andry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "closed_date": 1430947635, "answer_count": 3, "score": 0, "last_activity_date": 1430947898, "creation_date": 1430947180, "last_edit_date": 1592644375, "question_id": 30087740, "link": "https://stackoverflow.com/questions/30087740/polymorphism-not-kicking-in-when-calling-virtual-method-on-base-class-copy-cons", "closed_reason": "Duplicate", "title": "Polymorphism not kicking-in when calling virtual method on base class&#39; copy constructor", "body": "<p>I have the following C++ code:</p>\n<pre><code>#include &lt;iostream&gt;\n\nclass Base {\npublic:\n  Base() { }\n  Base(const Base&amp; other) { this-&gt;foo(); }\n  virtual ~Base() { }\n  virtual void foo() { std::cout &lt;&lt; &quot;Base::foo&quot; &lt;&lt; std::endl; }\n};\n\nclass My : public Base {\npublic:\n  My() : Base() { }\n  My(const My&amp; other) : Base(other) { }\n  virtual ~My() { }\n  void foo() { std::cout &lt;&lt; &quot;My::foo&quot; &lt;&lt; std::endl; }\n};\n\nint main(int argc, char** argv);\n\nint main(int argc, char** argv) {\n  My* my = new My();\n  My* my2 = new My(*my);\n}\n</code></pre>\n<p>Class <code>My</code> inherits from <code>Base</code>. The important thing is that <code>Base</code> has a virtual method <code>foo</code> which is overridden in <code>My</code>.</p>\n<h2>Polymorphism not kicking in</h2>\n<p>In the copy ctor of <code>Base</code>, called by <code>My</code>'s copy ctor, I call <code>foo</code>. However I expect <code>Base::Base(const Base&amp;)</code> to call <code>My::foo</code>, however when running the program I get:</p>\n<blockquote>\n<p>Base::foo</p>\n</blockquote>\n<p>Why is this happening? Should polymorphism have <code>My::foo</code> be called?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1430947716, "post_id": 30087718, "comment_id": 48288917, "body": "Please read through the plethora of examples at: <a href=\"https://www.google.com/search?q=stackoverflow+c%2B%2B+read+file+vector+structure&amp;ie=utf-8&amp;oe=utf-8\" rel=\"nofollow noreferrer\">StackOverflow C++ read file vector</a>"}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430948689, "post_id": 30087718, "comment_id": 48289399, "body": "The picture isn&#39;t visible (I think you need more reputation to attach it here), and the error you are getting is not clear: does it at least compile? And then you have a runtime error? Have you tried some basic debugging to understand where it crashes?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4839895"}, "is_accepted": false, "score": 1, "last_activity_date": 1430948073, "creation_date": 1430948073, "answer_id": 30088004, "question_id": 30087718, "link": "https://stackoverflow.com/questions/30087718/c-trying-to-read-data-from-file-into-vector/30088004#30088004", "title": "C++ trying to read data from file into vector", "body": "<p>Why dont you write data like this?: <code>4;12,2365,85;6,11,12,8;</code>\nMuch easier to split and parse..\ufeff</p>\n\n<p>Or use <code>name=value</code> list..</p>\n\n<p>Hope this helps.. Just how i know it best.</p>\n"}, {"tags": [], "owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1430950265, "creation_date": 1430950265, "answer_id": 30088556, "question_id": 30087718, "link": "https://stackoverflow.com/questions/30087718/c-trying-to-read-data-from-file-into-vector/30088556#30088556", "title": "C++ trying to read data from file into vector", "body": "<p>This block looks wrong:</p>\n\n<pre><code>for(int i =0; i &lt; n ; i++){\n    inFile&gt;&gt; weight[i];\n    weight.push_back(weight[i]);\n}\n</code></pre>\n\n<p>You are taking the number from <code>inFile</code> and putting it into <code>weight[i]</code>, then, on the following line, you <code>push_back</code> the same value again, but then you will overwrite it at the next iteration (because <code>i</code> has increased in the meanwhile). This means that if your numbers coming from the file are <code>1 2 3 4</code> you will end up with these results at the end of each iteration: <code>1 1</code>, <code>1 2 2</code>, <code>1 2 3 3</code>, <code>1 2 3 4 4</code>. <code>inFile&gt;&gt; weight[i];</code> alone is enough.</p>\n\n<p>Then, I don't think this is the problem that is blocking you, but...</p>\n\n<pre><code>if(! inFile){\n    cout &lt;&lt; \"OPSS\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>If you can't read the file, you should not only print \"OPSS\", you should exit, or throw an exception. Anyway, you can't just continue, because the rest of the code expects the file to be there.</p>\n"}], "owner": {"reputation": 47, "user_id": 4862643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26d12a0b3bfabec5eafceeb5ac4aec0d?s=128&d=identicon&r=PG&f=1", "display_name": "KIM", "link": "https://stackoverflow.com/users/4862643/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 30088556, "answer_count": 2, "score": 0, "last_activity_date": 1430950943, "creation_date": 1430947111, "last_edit_date": 1430950943, "question_id": 30087718, "link": "https://stackoverflow.com/questions/30087718/c-trying-to-read-data-from-file-into-vector", "title": "C++ trying to read data from file into vector", "body": "<p>I'm simply trying to read data from file into a vector. The file, as showed in the image, I'm trying to read from contains the first number (n) which is the number of nodes. After that, I read n numbers of weight. Finally, I get the the connection from the adjacency matrix. When I compile my code it stops working.</p>\n\n<pre><code>int main()\n{\n    ifstream inFile;\n    string tline;\n\n    inFile.open(\"Problem.dat_50_50_0\");\n\n    if(!inFile)\n        cout &lt;&lt; \"OPSS\" &lt;&lt; endl;\n\n    inFile &gt;&gt; tline;\n    inFile &gt;&gt; n;\n\n    for(int i = 0; i &lt; 2 * (n + 1); i++)\n        inFile &gt;&gt; tline;\n\n    vector&lt;vector&lt;int&gt; &gt; matrix(n, vector&lt;int&gt;(n));\n    vector&lt;list&lt;int&gt; &gt; adj(n);\n    vector&lt;int&gt; weight(n);\n    vector&lt;int&gt; degree(n);\n    vector&lt;string&gt; color(n, white);\n\n    for(int i = 0; i &lt; n; i++)\n    {\n        inFile &gt;&gt; weight[i];\n        weight.push_back(weight[i]);\n    }\n\n    inFile &gt;&gt; tline;\n\n    for(int i = 0; i &lt; n; i++)\n        for(int j = 0; j &lt; n; j++)\n        {\n            inFile &gt;&gt; matrix[i][j];\n\n            if(i == j)\n                matrix[i][j] = 0;\n            if(matrix[i][j] == 1)\n                adj[i].push_back(j);\n        }\n}\n</code></pre>\n\n<p>I'm trying to open the file to read the first line, put this number into <code>n</code>, and then <code>push_back</code> into a vector the <code>n</code>th number after the first line (which represents the weight as shown in the picture). After reading the weight, we go to the matrix to get the neighbors. If <code>matrix[i][j] == 1</code>, we put the value of <code>j</code> into the adjacency vector.</p>\n\n<p>For example, according to the pictures, the adj vector will be like so:</p>\n\n<pre><code>0 -&gt; 1, 2\n1 -&gt; 0, 2, 3\n2 -&gt; 0, 1\n3 -&gt; 1\n</code></pre>\n"}, {"tags": ["c++", "linux", "debugging", "gdb", "codeblocks"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 4872346, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qsJ2L1f_IQQ/AAAAAAAAAAI/AAAAAAAAAKM/SWTP6M4NInY/photo.jpg?sz=128", "display_name": "tedka", "link": "https://stackoverflow.com/users/4872346/tedka"}, "is_accepted": false, "score": 2, "last_activity_date": 1431724634, "creation_date": 1431724634, "answer_id": 30268881, "question_id": 30087659, "link": "https://stackoverflow.com/questions/30087659/codeblocks-debugger-painfully-slow-on-kubuntu/30268881#30268881", "title": "Code::Blocks debugger painfully slow on Kubuntu", "body": "<p>The problem turned out to be with stepping through lines that declare uninitialized std::string objects. A similar (or the same) problem is described here:</p>\n\n<p><a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=12555\" rel=\"nofollow\">https://sourceware.org/bugzilla/show_bug.cgi?id=12555</a></p>\n\n<p>The probleb with debugging in Code::Blocks was suddenly fixed when I followed these instructions:</p>\n\n<p><a href=\"http://wiki.eclipse.org/CDT/User/FAQ#How_can_I_inspect_the_contents_of_STL_containers.3F\" rel=\"nofollow\">http://wiki.eclipse.org/CDT/User/FAQ#How_can_I_inspect_the_contents_of_STL_containers.3F</a></p>\n\n<p>on how to enable pretty-printing in Eclipse CDT.\nI still need to follow these instructions on my other machines to make sure they fix the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 2743286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ce78043c4a7220fad5d1fd2c2abf8a1?s=128&d=identicon&r=PG&f=1", "display_name": "Qwertypal", "link": "https://stackoverflow.com/users/2743286/qwertypal"}, "is_accepted": false, "score": 0, "last_activity_date": 1594911230, "creation_date": 1594911230, "answer_id": 62937466, "question_id": 30087659, "link": "https://stackoverflow.com/questions/30087659/codeblocks-debugger-painfully-slow-on-kubuntu/62937466#62937466", "title": "Code::Blocks debugger painfully slow on Kubuntu", "body": "<p>You can try and turn off CodeBlock pretty-printing: <code>Settings-&gt;Debugger-&gt;Default-&gt;Enable Watch Scripts = Unchecked</code>\n(<a href=\"http://wiki.codeblocks.org/index.php/Pretty_Printers\" rel=\"nofollow noreferrer\">Source</a>)</p>\n"}], "owner": {"reputation": 91, "user_id": 4872346, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qsJ2L1f_IQQ/AAAAAAAAAAI/AAAAAAAAAKM/SWTP6M4NInY/photo.jpg?sz=128", "display_name": "tedka", "link": "https://stackoverflow.com/users/4872346/tedka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1594911230, "creation_date": 1430946898, "last_edit_date": 1431640830, "question_id": 30087659, "link": "https://stackoverflow.com/questions/30087659/codeblocks-debugger-painfully-slow-on-kubuntu", "title": "Code::Blocks debugger painfully slow on Kubuntu", "body": "<p>I have Kubuntu 14.10 and 15.04 installed on my four computers, all having different hardware (the oldest machine was assembbled in 2007 and the newest just a month ago. I have both 32- and 64-bit OSs installed. The amount of RAM varies from 4 to 32 GB). I have been using Code::Blocks on them for a few months, and I experience the same problem on all 4 machines: integrated debugger is painfully slow when debugging a C++ program.\nAfter the debugger stops at a breakpoint, it takes 10 seconds to 5 minutes to step through a single line of code. And while the debugger is performing a step, one core of my CPU is loaded by GDB by 100%. And often trying to step through a line of code hangs forever. After that I have to kill GDB and the process that has been debugged.\nSome time ago I updated GDB to version 7.9 (from 7.8) but this did not fix the problem. And I have no slowdown when debugging with GDB from command line, so I suspect that the problem is in the Code::Blocks debugger plugin.\nI saw many complaints regarding similar problems, some of which were allegedly caused by outdated libc6-dbg (more exactly, by the fact that debug symbols were not shipped with Ubuntu and other Debian-based distributions), but reinstalling libc6-dbg did not help either.\nI am afraid that after a day or two of trying to fix this problem I will give up and will switch to Eclipse or some other IDE. It looks like Code::Blocks and its debugger plugin have not been updated for a couple of years (at least, their Linux versions). So maybe I should not use Code::Blocks at all because its future is not clear (while Eclipse is likely to be in service for long time).\nI wonder if anybody else experiences this problem and whether there are solutions. Overall Code::Blocks IDE looks decent and rather convenient, but this debugger problem prevents from using it for purposes other than writing code and compiling.</p>\n\n<p>An update:\nI ended up installing Eclipse for C++ (Luna release). It took some time to learn how to use it. It is slow, buggy, glitchy and uses a lot of RAM, but it at least allows me to debug my applications in IDE. Now I am 100% sure that the problem is in Code::Blocks debugger plugin.\nI also tried NetBeans, and seems to work fine, but it is even slower than Eclipse and looks really ugly. So I am going to stick with Eclipse for now because no one seems to be willing to fix the debugger plugin in Code::Blocks. </p>\n"}, {"tags": ["c++", "recursion", "g++", "tail-recursion"], "comments": [{"owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1430947375, "post_id": 30087649, "comment_id": 48288758, "body": "What is the input of funct? Without this function, hard to tell what is wrong"}, {"owner": {"reputation": 754, "user_id": 1834730, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ew0AA.jpg?s=128&g=1", "display_name": "Jcao02", "link": "https://stackoverflow.com/users/1834730/jcao02"}, "reply_to_user": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1430947888, "post_id": 30087649, "comment_id": 48289019, "body": "@Matt I think <code>funct</code> is not relevant in this case. When I run <code>gdb</code> the stack has only calls to Foo because <code>funct</code> was called and then it returned."}, {"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 0, "creation_date": 1430948560, "post_id": 30087649, "comment_id": 48289349, "body": "What happens if you assign variables in your <code>if&#47;else</code> statement and only have one call to <code>Foo</code> at the end?"}], "answers": [{"tags": [], "owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "is_accepted": false, "score": 3, "last_activity_date": 1430949000, "creation_date": 1430949000, "answer_id": 30088251, "question_id": 30087649, "link": "https://stackoverflow.com/questions/30087649/tail-recursion-not-happening/30088251#30088251", "title": "Tail-recursion not happening", "body": "<p>Your function is <em>not</em> tail-recursive, since there's still work to do after the recursive call: Destruction of <code>copy_bar</code> (which has a non-trivial destructor) and possibly also of <code>baz</code> (if the type <code>T</code> also has a non-trivial destructor).</p>\n"}, {"comments": [{"owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "edited": false, "score": 0, "creation_date": 1430952358, "post_id": 30088978, "comment_id": 48290940, "body": "Note: You can do this transformation manually: create a variable, empty, outside of the loop; whenever the condition is true you can swap the contents of the variable inside the loop with the variable outside of the loop (which is quite efficient) and adjust the pointer.  If you know that you will do multiple passes and thus will need multiple copies, you can also take the value by non-const ref and provide a fa&#231;ade that will copy the user&#39;s argument before forwarding to this one, then internally you can blast (swap) the value of the argument before recursing with the same argument you got."}, {"owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "edited": false, "score": 0, "creation_date": 1430952596, "post_id": 30088978, "comment_id": 48291028, "body": "Note2: If the code is really as you showed it above... well, you don&#39;t need a copy of the argument to call <code>size()</code>, you can remove the object altogether and make your life (and the compiler&#39;s) easier."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1430953353, "post_id": 30088978, "comment_id": 48291271, "body": "The issue with my answer is that when I tested it with always using the false case (in which case, the same reference is being passed in on every recursive call), tail recursion was still not occurring. The only thing left is the destructor code for <code>copy_bar</code>."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1430953642, "post_id": 30088978, "comment_id": 48291354, "body": "... and the constructors/destructors associated with the recursive function return value."}], "tags": [], "owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "is_accepted": false, "score": 1, "last_activity_date": 1430952822, "last_edit_date": 1430952822, "creation_date": 1430952260, "answer_id": 30088978, "question_id": 30087649, "link": "https://stackoverflow.com/questions/30087649/tail-recursion-not-happening/30088978#30088978", "title": "Tail-recursion not happening", "body": "<p>I don't think @celschk is right, but rather @jxh in an answer that he wiped out, so lets revisit it.</p>\n\n<p>The fact that there are local variables that need to be destroyed does not affect tail recursion in general.  The optimization is turning recursion into a loop, and those variables can be internal to the loop and be destroyed in each pass.</p>\n\n<p>The problem, I believe, stems from the fact that the argument is a reference and that depending on some condition each pass over the loop would have to refer to either an object outside of the function or the local copy inside this function. If you try to manually unroll the recursion into a loop you will find it quite hard to figure out what should the loop look like.</p>\n\n<p>To transform the recursion into a loop you would have to create an additional variable outside of the loop to hold the value of the <code>multimap</code>, turn the reference into a pointer and update the pointer to one or the other object depending on the condition before jumping back to the beginning of the loop. The <code>baz</code> variable cannot be used for this (i.e. it cannot be pulled outside of the loop) as each pass makes a copy and I imagine some other transformations that you did not show in the code above, so you really need to create an additional variable. The compiler cannot create new variables for you.</p>\n\n<p>At this point, I have to admit that yes, the issue here is that for one of the branches <code>copy_var</code> needs to be destroyed <em>after</em> the recursion completes (as a reference to it is passed down), so @celtschk is not 100% wrong... but he is when he points at <code>baz</code> as another potential reason for breaking the tail-recursion.</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 2, "last_activity_date": 1430982184, "last_edit_date": 1495541639, "creation_date": 1430961979, "answer_id": 30090390, "question_id": 30087649, "link": "https://stackoverflow.com/questions/30087649/tail-recursion-not-happening/30090390#30090390", "title": "Tail-recursion not happening", "body": "<p>As indicated by <a href=\"https://stackoverflow.com/a/30088251/315052\">@celtschk's answer</a>, non-trivial destructors are preventing the compiler from treating the calls as truly tail-recursive. Even when your function is reduced to this:</p>\n\n<pre><code>template&lt;typename T, T (*funct)(int) &gt;\nmultiset&lt;T&gt; Foo(const multiset&lt;T&gt;&amp; bar, int iterations) {\n    if (iterations == 0) return bar;\n    return Foo&lt;T,funct&gt;(bar, iterations - 1);\n}\n</code></pre>\n\n<p>It is still not tail-recursive, because of the implicit calls to the non-trivial constructors and destructors of the result of the recursive function call.</p>\n\n<p>Note, however, that the above function does become tail-recursive with a relatively minor change:</p>\n\n<pre><code>template&lt;typename T, T (*funct)(int) &gt;\nconst multiset&lt;T&gt;&amp; Foo(const multiset&lt;T&gt;&amp; bar, int iterations) {\n    if (iterations == 0) return bar;\n    return Foo&lt;T,funct&gt;(bar, iterations - 1);\n}\n</code></pre>\n\n<p>Voila! The function now compiles down into a loop. How can we achieve this with your original code?</p>\n\n<p>Unfortunately, it is a little tricky, because your code will sometimes return the copy, and sometimes the original argument. We have to correctly deal with both cases. The solution presented below is a variation of the idea <a href=\"https://stackoverflow.com/a/30088978/315052\">David</a> mentioned in his comments to his answer.</p>\n\n<p>Assuming you want to keep your original <code>Foo</code> signature the same (and, since it sometimes returns the copy, there is no reason to believe you wouldn't want to leave the signature the same), we create a secondary version of <code>Foo</code> called <code>Foo2</code> that returns a reference to a result object that is either the original <code>bar</code> parameter, or one local in your <code>Foo</code>. In addition, <code>Foo</code> creates place holder objects for the copy, a secondary copy (for switching), and one to hold the <code>funct()</code> call result:</p>\n\n<pre><code>template&lt;typename T, T (*funct)(int) &gt;\nmultiset&lt;T&gt; Foo(const multiset&lt;T&gt;&amp; bar, int iterations) {\n    multiset&lt;T&gt; copy_bar;\n    multiset&lt;T&gt; copy_alt;\n    T baz;\n    return Foo2&lt;T, funct&gt;(bar, iterations, copy_bar, copy_alt, baz);\n}\n</code></pre>\n\n<p>Since <code>Foo2</code> will always end up returning a reference, this removes any issues with the recursive function result causing implicit construction and destruction.</p>\n\n<p>Upon each iteration, if the copy is to be used as the next <code>bar</code>, we pass the copy in, but switch the order of the copy and alternate placeholders for the recursive call, so that the alternate is actually used to hold the copy on the next iteration. If the next iteration reuses <code>bar</code> as is, the order of the arguments don't change, the <code>iterations</code> counter is merely decremented.</p>\n\n<pre><code>template&lt;typename T, T (*funct)(int) &gt;\nconst multiset&lt;T&gt;&amp; Foo2(\n        const multiset&lt;T&gt;&amp; bar, int iterations,\n        multiset&lt;T&gt;&amp; copy_bar, multiset&lt;T&gt;&amp; copy_alt, T&amp; baz) {\n    if (iterations == 0) return bar;\n    copy_bar = bar;\n    baz = funct(copy_bar.size());\n    if (baz.attr &gt; 0) {\n        return Foo2&lt;T, funct&gt;(copy_bar, 100, copy_alt, copy_bar, baz);\n    } else {\n        return Foo2&lt;T, funct&gt;(bar, --iterations, copy_bar, copy_alt, baz);\n    }\n}\n</code></pre>\n\n<p>Notice that only the original call to <code>Foo</code> pays the penalty of construction and destruction of the local objects, and <code>Foo2</code> is now entirely tail-recursive.</p>\n"}], "owner": {"reputation": 754, "user_id": 1834730, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ew0AA.jpg?s=128&g=1", "display_name": "Jcao02", "link": "https://stackoverflow.com/users/1834730/jcao02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1430982184, "creation_date": 1430946869, "last_edit_date": 1430947908, "question_id": 30087649, "link": "https://stackoverflow.com/questions/30087649/tail-recursion-not-happening", "title": "Tail-recursion not happening", "body": "<p>I'm using <code>g++ (Ubuntu 4.8.2-19ubuntu1) 4.8.2</code> in a C++ project. I wrote a function that kind of does this:</p>\n\n<pre><code>template&lt;typename T, T (*funct)(int) &gt;\nmultiset&lt;T&gt; Foo(const multiset&lt;T&gt;&amp; bar, int iterations) {\n    if (iterations == 0) return bar; \n    multiset&lt;T&gt; copy_bar(bar); \n\n    T baz = funct(copy_bar.size());\n\n    if (baz.attr &gt; 0)\n        return Foo&lt;T,funct&gt;(copy_bar, 100);\n    else \n        return Foo&lt;T,funct&gt;(bar, iterations - 1);    \n}\n</code></pre>\n\n<p>I was getting <code>bad_alloc() exception</code> so I tested the function with <code>gdb</code> and turns out that there's no tail-recursion happening, which I was expecting since there are no statements after the <code>return</code>s.</p>\n\n<p><strong>NOTE</strong>: I tried with -O2 compilation flag but it didn't work  </p>\n"}, {"tags": ["c++", "operator-overloading", "pre-increment"], "answers": [{"comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1430946793, "post_id": 30087605, "comment_id": 48288480, "body": "This applies to the <code>+</code> and <code>!</code> operators as well. Declare the member functions <code>const</code>, and the corresponding calls become ambiguous."}, {"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1430947126, "post_id": 30087605, "comment_id": 48288642, "body": "Pretty obvious. I seem a rookie. By the way, why the non-const version is choosen against the non-member function? For being &quot;less cv-qualified&quot;? After all, a cv-comparision doesn&#39;t apply for member and non-member overloads. In my understanding, all forms (const/non-const member function) should provoke an ambiguity with non-class versions."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1430947247, "post_id": 30087605, "comment_id": 48288694, "body": "&quot;After all, a cv-comparision doesn&#39;t apply for member and non-member overloads.&quot; I&#39;m not sure what exactly that means, but it could be the source of misunderstanding."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1430947339, "post_id": 30087605, "comment_id": 48288737, "body": "@Peregring-lk Non-const overloads are chosen in this case because <code>a</code> is not <code>const</code> and the rules of the language state those overloads are preferred over <code>const</code> ones, all other things equal."}, {"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1430947770, "post_id": 30087605, "comment_id": 48288950, "body": "I meant: in order to choose an overload (for a regular function-member, not an operator), if an object is non-const, binding to a const version requeries a const-conversion, so, the non-const version is a best match if both exist. Now, concerning operators, we haven&#39;t two const/non-const member operator overloads, but two member/non-member operators. What I don&#39;t understand is why the member version is a better match than the non-member one (when parameters are the same). Are there rules stating it explicity (member operator best), or does it happen due to a different reason?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1430947907, "post_id": 30087605, "comment_id": 48289034, "body": "@Peregring-lk Because the members don&#39;t have a <code>const</code> operand that the non-members do."}, {"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1430948140, "post_id": 30087605, "comment_id": 48289138, "body": "Non-member functions/operators can&#39;t be const qualified. It has no sense at all. So, a comparision between then, using cv qualifications as discriminant, has no sense again."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1430948252, "post_id": 30087605, "comment_id": 48289193, "body": "@Peregring-lk Non members can have const parameters. The corresponding parameters of the member versions are not const, because the members aren&#39;t const."}, {"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1430948656, "post_id": 30087605, "comment_id": 48289385, "body": "Ok, I see. You meant all the time the implicit parameter: if the member overload is <code>const</code>, the implicit parameter -the first one, is also <code>const</code>, as it happens in the non-member version."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 4, "last_activity_date": 1430948403, "last_edit_date": 1430948403, "creation_date": 1430946715, "answer_id": 30087605, "question_id": 30087527, "link": "https://stackoverflow.com/questions/30087527/c-operator-overloading-in-class-and-out-class-ambiguity-with-preincrement-o/30087605#30087605", "title": "C++: operator overloading: in-class and out-class. Ambiguity with preincrement operator", "body": "<p>Your post-increment member operator is not a <code>const</code> member, whereas the non-member one <code>const A&amp;</code> parameter. There is no ambiguity, and the  non-const version chosen. The same does not apply for the pre-increment version. Both member and non-member bind to a non-const <code>A</code>, hence the ambiguity.</p>\n\n<p>Look:</p>\n\n<pre><code>// non-const member. Does not require A operand to be const\nA operator++(int)\n\n// non-member. Requires A operand to be const\nA operator++(A const&amp; a, int)\n</code></pre>\n"}], "owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 30087605, "answer_count": 1, "score": 2, "last_activity_date": 1430948403, "creation_date": 1430946451, "question_id": 30087527, "link": "https://stackoverflow.com/questions/30087527/c-operator-overloading-in-class-and-out-class-ambiguity-with-preincrement-o", "title": "C++: operator overloading: in-class and out-class. Ambiguity with preincrement operator", "body": "<p>Check it out <a href=\"http://coliru.stacked-crooked.com/a/4bf8336b6146ca53\" rel=\"nofollow\">this code</a>:</p>\n\n<pre><code>struct A\n{\n    A operator+(A const&amp; a) { cout &lt;&lt; 1 &lt;&lt; endl; return A(); }\n    A&amp; operator++() { cout &lt;&lt; 2 &lt;&lt; endl; return *this; }\n    A operator++(int) { cout &lt;&lt; 3 &lt;&lt; endl; return *this; }\n    bool operator!() { cout &lt;&lt; 4 &lt;&lt; endl; return true; }\n\n};\n\nA operator+(A const&amp; a, A const&amp; b)\n{ cout &lt;&lt; 5 &lt;&lt; endl; return A(); }\n\nA&amp; operator++(A&amp; a) { cout &lt;&lt; 6 &lt;&lt; endl; return a; }\nA operator++(A const&amp; a, int) { cout &lt;&lt; 7 &lt;&lt; endl; return A(); }\nbool operator!(A const&amp; a) { cout &lt;&lt; 8 &lt;&lt; endl; return false; }\n\nint main()\n{\n    A a, b;\n\n    a + b; // Prints 1 instead 5\n    ++a;   // Ambiguity\n    a++;   // Prints 3 instead 7\n    !a;    // Prints 4 instead 8\n\n    return 0;\n}\n</code></pre>\n\n<p>In every case, the in-class overload of an operator is choosen against any other out-class overload of the same operator, but the preincrement operator is different: it causes an ambiguity between the in-class and out-class overload.</p>\n\n<p>Why?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3730, "user_id": 1291935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6c0d80f8d0f580c5e1fcb208c02874d?s=128&d=identicon&r=PG", "display_name": "DrCord", "link": "https://stackoverflow.com/users/1291935/drcord"}, "edited": false, "score": 1, "creation_date": 1430946277, "post_id": 30087379, "comment_id": 48288242, "body": "What is your desired output?"}, {"owner": {"reputation": 3, "user_id": 4872178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30970f44f1e37d162fb89317e27059e3?s=128&d=identicon&r=PG&f=1", "display_name": "jtilly30", "link": "https://stackoverflow.com/users/4872178/jtilly30"}, "reply_to_user": {"reputation": 3730, "user_id": 1291935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6c0d80f8d0f580c5e1fcb208c02874d?s=128&d=identicon&r=PG", "display_name": "DrCord", "link": "https://stackoverflow.com/users/1291935/drcord"}, "edited": false, "score": 0, "creation_date": 1430946415, "post_id": 30087379, "comment_id": 48288298, "body": "To display the day of the of week that corresponds with the given date"}], "answers": [{"tags": [], "owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "is_accepted": true, "score": 4, "last_activity_date": 1430946130, "creation_date": 1430946130, "answer_id": 30087450, "question_id": 30087379, "link": "https://stackoverflow.com/questions/30087379/why-is-it-not-reading-my-days-c/30087450#30087450", "title": "Why is it not reading my days c++", "body": "<p>You reversed the order of month and day in the constructor call. Your constructor expects the parameters in the order: <code>int day, int month, int year</code>. You pass the parameters in as <code>Date todaysDate (2,15,2015);</code> I assume that the month is 2 and the day is 15. So you should be calling <code>Date todaysDate (15,2,2015);</code> instead.</p>\n"}], "owner": {"reputation": 3, "user_id": 4872178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30970f44f1e37d162fb89317e27059e3?s=128&d=identicon&r=PG&f=1", "display_name": "jtilly30", "link": "https://stackoverflow.com/users/4872178/jtilly30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 30087450, "answer_count": 1, "score": -3, "last_activity_date": 1430946130, "creation_date": 1430945843, "question_id": 30087379, "link": "https://stackoverflow.com/questions/30087379/why-is-it-not-reading-my-days-c", "title": "Why is it not reading my days c++", "body": "<p>I am new to c++ and I am having some trouble with getting my code before to ready and out put the day of the week the certain date lands on. When I out put my code it says \nYour date is:15/2/2015\nThe day of the given date is \nAny suggestions on how to fix this?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass Date\n{\n    private:\n        int day;\n        int month;\n        int year;\n        bool isLeapYear (int);\n        int getMonthValue (int, int);\n        int getCenturyValue (int);\n        int getYearValue (int);\n        string calculateWeekday();\n\n    public:\n        Date ();\n        Date (int, int, int);\n        void setDay (int);\n        void setYear (int);\n        void setMonth (int);\n        int getDay ();\n        int getMonth ();\n        int getYear ();\n        void displayWeekday ();\n};\n\n\n\n\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nDate::Date()\n{\n}\n\n\nDate::Date (int day, int month, int year)\n\n{\n\n    setDay(day);\n    setMonth(month);\n    setYear(year);\n}\n\nvoid Date::setDay (int d)\n{\n    day = d;\n}\n\nvoid Date::setMonth (int m)\n{\n    month = m;\n}\n\nvoid Date::setYear (int y)\n{\n    year = y;\n}\n\nint Date::getDay()\n{\n    return day;\n}\n\nint Date::getMonth()\n{\n    return month;\n}\n\nint Date::getYear()\n{\n    return year;\n}\n\nbool Date::isLeapYear (int year)\n{\n    return ((year % 400 == 0) || (year % 4 == 0 &amp;&amp; year % 100 !=0));\n}\n\nint Date::getMonthValue (int month, int year)\n{\n    int monthValue;\n    switch(month)\n    {\n        case 1:\n            if(isLeapYear(year))\n                monthValue = 6;\n            else\n                monthValue = 0;\n            break;\n\n        case 2:\n            if(isLeapYear(year))\n                monthValue = 2;\n            else\n                monthValue = 3;\n            break;\n\n        case 3: \n            monthValue = 3;\n            break;\n        case 11:\n            monthValue = 3;\n            break;\n        case 4:\n            monthValue = 6;\n            break;\n        case 5:\n            monthValue = 1;\n            break;\n        case 6:\n            monthValue = 4;\n            break;\n        case 7:\n            monthValue = 6;\n            break;\n        case 8:\n            monthValue = 2;\n            break;\n        case 9:\n            monthValue = 5;\n            break;\n        case 10:\n            monthValue = 0;\n            break;\n        case 12:\n            monthValue = 5;\n            break;\n\n    }\n    return monthValue;\n}\n\nint Date::getYearValue (int year)\n\n{\n    int lastTwo = year % 100;\n    int d = lastTwo / 4;\n    int r = lastTwo + d;\n    return r;\n}\n\nint Date::getCenturyValue (int year)\n\n{\n    int firstTwo = year / 100;\n    int in = firstTwo % 4;\n    int ints = 3 - in;\n    return ints * 2;\n}\n\nstring Date::calculateWeekday ()\n{\n    string day;\n    int sum = getDay() + getMonthValue (month, year) + getYearValue (year) + getCenturyValue (year);\n    int rem = sum % 7;\n\n    if (rem == 0)\n        day = \"Sunday\";\n    if (rem == 1)\n        day = \"Monday\";\n    if (rem == 2)\n        day = \"Tuesday\";\n    if (rem == 3)\n        day = \"Wednesday\";\n    if (rem == 4)\n        day = \"Thursday\";\n    if (rem == 5)\n        day = \"Friday\";\n    if (rem == 6)\n        day = \"Saturday\";\n\n    return day;\n\n}\n\nvoid Date::displayWeekday()\n{\n    cout &lt;&lt; \"\\nYour date is:\";\n    cout &lt;&lt; getMonth() &lt;&lt; \"/\";\n    cout &lt;&lt; getDay() &lt;&lt; \"/\";\n    cout &lt;&lt; getYear() &lt;&lt; endl;\n    cout &lt;&lt; \"The day of the given date is \\n\"; \n    cout&lt;&lt; calculateWeekday();\n\n}\n</code></pre>\n\n<p>Main\n    #include </p>\n\n<pre><code>using namespace std;\nint main ()\n{\n    Date todaysDate (2,15,2015);\n\n    todaysDate.displayWeekday();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2013", "parallel-processing", "fortran"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1430948269, "post_id": 30087309, "comment_id": 48289205, "body": "what kind of parallelism? ILP or SPMD?"}, {"owner": {"reputation": 113, "user_id": 4592071, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/WhXYF.jpg?s=128&g=1", "display_name": "venusisle", "link": "https://stackoverflow.com/users/4592071/venusisle"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1430959638, "post_id": 30087309, "comment_id": 48293021, "body": "I think it&#39;s ILP, I am trying to parallelize a for loop"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1430959788, "post_id": 30087309, "comment_id": 48293061, "body": "Then forget about it. Any function call will prevent compiler doing any ILP optimization. SIMD won&#39;t work, either. OpenMP may still work, maybe."}], "owner": {"reputation": 113, "user_id": 4592071, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/WhXYF.jpg?s=128&g=1", "display_name": "venusisle", "link": "https://stackoverflow.com/users/4592071/venusisle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430959577, "creation_date": 1430945545, "last_edit_date": 1430959577, "question_id": 30087309, "link": "https://stackoverflow.com/questions/30087309/vs2013-c-auto-parallelization-a-loop-with-fortran-code-inside", "title": "VS2013 c++: Auto-Parallelization a loop with fortran code inside", "body": "<p>I want to use the VS2013 Auto-Parallelization feature to parallel a loop in C++. </p>\n\n<p>However, inside the loop, there is a call to a fortran function (pre-compiled in fortran). Will auto-parallelization work on this loop?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "derived-class", "private-members", "friend-class"], "comments": [{"owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "edited": false, "score": 0, "creation_date": 1430945515, "post_id": 30087274, "comment_id": 48287850, "body": "It is usually bad design to require using friends except in rare cases. What is the actual problem you are trying to solve? There is probably a better design."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1430945632, "post_id": 30087274, "comment_id": 48287915, "body": "How rich is this privileged interface in <code>Library</code>?  (ie, how many methods are exposed).  Or do you really mean members, and we have our consumers directly manipulating the guts of <code>Library</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430945645, "post_id": 30087274, "comment_id": 48287924, "body": "What about introducing a protected interface as sketched out here:<a href=\"http://stackoverflow.com/questions/27492132/how-can-i-remove-refactor-a-friend-dependency-declaration-properly\">How can I remove/refactor a &#171;friend&#187; dependency declaration properly?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1068, "user_id": 2469099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d14cefa990b93b276681eb0fb727986f?s=128&d=identicon&r=PG", "display_name": "Edwin Rodr&#237;guez", "link": "https://stackoverflow.com/users/2469099/edwin-rodr%c3%adguez"}, "edited": false, "score": 1, "creation_date": 1430946233, "post_id": 30087412, "comment_id": 48288219, "body": "The problem is how Library access private Kid not the opposite."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 1068, "user_id": 2469099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d14cefa990b93b276681eb0fb727986f?s=128&d=identicon&r=PG", "display_name": "Edwin Rodr&#237;guez", "link": "https://stackoverflow.com/users/2469099/edwin-rodr%c3%adguez"}, "edited": false, "score": 0, "creation_date": 1430946555, "post_id": 30087412, "comment_id": 48288367, "body": "@edwrodrig: Uh, no?  I think you got that backwards.  The question says the private members are in the Library, and he&#39;s friending derived classes so the Kid can access the private members."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1430946587, "post_id": 30087412, "comment_id": 48288382, "body": "@RSahu: Might be worth mentioning that if there&#39;s a lot of such variables, you can use an interface to expose them all togeather: <a href=\"http://coliru.stacked-crooked.com/a/2d647c3d290604e9\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/2d647c3d290604e9</a>"}, {"owner": {"reputation": 2793, "user_id": 1914692, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/12e0cc66841cc5949b577d3be9043feb?s=128&d=identicon&r=PG&f=1", "display_name": "user1914692", "link": "https://stackoverflow.com/users/1914692/user1914692"}, "edited": false, "score": 0, "creation_date": 1430949955, "post_id": 30087412, "comment_id": 48290033, "body": "@RSahu: Thanks. The interface is the function I want. I am just wondering: since all derived classes are from the base class LibraryCustomer, is there any other way related to inheritance, to circumvent this problem? Because I think adding the base class as a friend class seems to be more understandable (unfortunately does not work)"}, {"owner": {"reputation": 2793, "user_id": 1914692, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/12e0cc66841cc5949b577d3be9043feb?s=128&d=identicon&r=PG&f=1", "display_name": "user1914692", "link": "https://stackoverflow.com/users/1914692/user1914692"}, "edited": false, "score": 0, "creation_date": 1430951465, "post_id": 30087412, "comment_id": 48290638, "body": "@RSahu: (1) Sorry about my misleading. It works. I just ask a further question in my last comment: I am wondering whether there is another simpler way? (2) I read your answer again: since the members in LibraryInterface are public, which is not safe. If members in LibraryInterface are public, I could use assign put those members in Library as public too. So what additional usefulness to add LibraryInterface?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2793, "user_id": 1914692, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/12e0cc66841cc5949b577d3be9043feb?s=128&d=identicon&r=PG&f=1", "display_name": "user1914692", "link": "https://stackoverflow.com/users/1914692/user1914692"}, "edited": false, "score": 0, "creation_date": 1430957360, "post_id": 30087412, "comment_id": 48292475, "body": "@user why do you think public members are not safe?"}, {"owner": {"reputation": 2793, "user_id": 1914692, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/12e0cc66841cc5949b577d3be9043feb?s=128&d=identicon&r=PG&f=1", "display_name": "user1914692", "link": "https://stackoverflow.com/users/1914692/user1914692"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1430958943, "post_id": 30087412, "comment_id": 48292874, "body": "@Yakk, if the public members are safe, so I think I can directly set all those member variables in the class of Library as public, right? I wanted to do this way; just was afraid it was not a good design."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2793, "user_id": 1914692, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/12e0cc66841cc5949b577d3be9043feb?s=128&d=identicon&r=PG&f=1", "display_name": "user1914692", "link": "https://stackoverflow.com/users/1914692/user1914692"}, "edited": false, "score": 0, "creation_date": 1430966888, "post_id": 30087412, "comment_id": 48294825, "body": "@user1914692, providing access to member variables makes your program difficult to maintain. It&#39;s always better to provide access the member data through member functions. When you do that, you can even hide how your member data are stored by using the <a href=\"http://en.wikipedia.org/wiki/Opaque_pointer\" rel=\"nofollow noreferrer\">Pimple idiom</a>."}, {"owner": {"reputation": 2793, "user_id": 1914692, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/12e0cc66841cc5949b577d3be9043feb?s=128&d=identicon&r=PG&f=1", "display_name": "user1914692", "link": "https://stackoverflow.com/users/1914692/user1914692"}, "edited": false, "score": 0, "creation_date": 1431020462, "post_id": 30087412, "comment_id": 48327236, "body": "@RSahu, in your example code, we can access member variables to LibraryInterface freely. It seems a little conflicting...."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2793, "user_id": 1914692, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/12e0cc66841cc5949b577d3be9043feb?s=128&d=identicon&r=PG&f=1", "display_name": "user1914692", "link": "https://stackoverflow.com/users/1914692/user1914692"}, "edited": false, "score": 0, "creation_date": 1431020658, "post_id": 30087412, "comment_id": 48327363, "body": "@user1914692, it is. I copied the code verbatim from the link that was provided by MooingDuck."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1430946906, "last_edit_date": 1430946906, "creation_date": 1430945978, "answer_id": 30087412, "question_id": 30087274, "link": "https://stackoverflow.com/questions/30087274/c-how-to-make-a-group-of-derived-classes-be-able-to-access-private-members-of/30087412#30087412", "title": "C++: how to make a group of derived classes be able to access private members of one class?", "body": "<p>Provide a function in <code>LibraryCustomer</code> that accesses <code>Library</code> to get the data and provides that data to the classes derived from <code>LibraryCustomer</code>.</p>\n\n<pre><code>class Library\n{\n   friend class LibraryCustomer;\n\n   private:\n\n     std::string name;\n};\n\nclass LibraryCustomer\n{\n   protected:\n\n   std::string getLibraryName(Library const&amp; lib)\n   {\n      return lib.name;\n   }\n};\n\nclass Kid : public LibraryCustomer\n{\n    // Can use LibraryCustomer::getLibraryName() any where\n    // it needs to.\n};\n</code></pre>\n\n<p>Having said that, it will be easier to provide access to the data from <code>Library</code> itself.</p>\n\n<pre><code>class Library\n{\n   public:\n\n      std::string getName() const { return name; }\n\n   private:\n\n     std::string name;\n};\n</code></pre>\n\n<p>Then, there won't be the need for the <code>friend</code> declaration and the wrapper function <code>LibraryCustomer::getLibraryName()</code>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>@MooingDuck has interesting suggestion. If you have to expose many such variables, it might be better to put them all in one class. Working code at <a href=\"http://coliru.stacked-crooked.com/a/2d647c3d290604e9\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/2d647c3d290604e9</a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass LibraryInterface {\npublic:\n    std::string name;\n    std::string name1;\n    std::string name2;\n    std::string name3;\n    std::string name4;\n    std::string name5;\n    std::string name6;\n};\n\nclass Library : private LibraryInterface\n{\npublic:\n    Library() {name=\"BOB\";}\nprivate:\n    LibraryInterface* getLibraryInterface() {return this;} //only LibraryCustomer can aquire the interface pointer\n    friend class LibraryCustomer;\n};\n\nclass LibraryCustomer\n{\n   protected:\n       LibraryInterface* getLibraryInterface(Library&amp; lib) {return lib.getLibraryInterface();} //only things deriving from LibraryCustomer can aquire the interface pointer\n};\n\nclass Kid : public LibraryCustomer\n{\npublic:\n    void function(Library&amp; lib) {\n        LibraryInterface* interface = getLibraryInterface(lib);\n        std::cout &lt;&lt; interface-&gt;name;\n    }\n};\n\nint main() {\n    Library lib;\n    Kid k;\n    k.function(lib);\n}\n</code></pre>\n"}], "owner": {"reputation": 2793, "user_id": 1914692, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/12e0cc66841cc5949b577d3be9043feb?s=128&d=identicon&r=PG&f=1", "display_name": "user1914692", "link": "https://stackoverflow.com/users/1914692/user1914692"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1430949609, "creation_date": 1430945427, "last_edit_date": 1430949609, "question_id": 30087274, "link": "https://stackoverflow.com/questions/30087274/c-how-to-make-a-group-of-derived-classes-be-able-to-access-private-members-of", "title": "C++: how to make a group of derived classes be able to access private members of one class?", "body": "<p>Suppose a class: Library</p>\n\n<p>And we have a group of derived class from the base class LibraryCustomer, such as:\nKid, Parent, Student, \netc</p>\n\n<p>In the class of Library, there are a group of (tons of) private members variables.\nSince there are tons of private members in the class of Library, I do not want to use getter and setter which are tedious. \nPlus the LibraryCustomer derived classes will often refer to those members. Getter and Setter are not convenient.</p>\n\n<p>In order for those LibraryCustomers to access those private member in Library,\nI need to claim those LibraryCustomers as friend classes in Library.</p>\n\n<p>But since the derived classes keep growing, I do not want to add them one by one in the class Library.</p>\n\n<p>Add the base class LibraryCustomer as friend in Library seems not to work.\nSo what is another better way?</p>\n\n<p>[Update] I want to access tons of private member variables in the class of Library.\nSince there are many, so I do not want to use getter and setter.\nI hope the derived classes from LibraryCustomer can freely access those private member variables in the class of Library.</p>\n"}, {"tags": ["c++", "windows", "visual-studio-2013", "console-application", "stringstream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430945240, "post_id": 30087165, "comment_id": 48287696, "body": "<i>&quot;but this doesn&#39;t seem to work&quot;</i> is to vague to ask. Please provide a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>. Also see <a href=\"http://stackoverflow.com/questions/24504582/how-to-test-whether-stringstream-operator-has-parsed-a-bad-type-and-skip-it\">here</a> and <a href=\"http://stackoverflow.com/questions/23047052/why-does-reading-a-struct-record-fields-from-stdistream-fail-and-how-can-i-fi\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4872170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152854138213461/picture?type=large", "display_name": "NickL", "link": "https://stackoverflow.com/users/4872170/nickl"}, "edited": false, "score": 0, "creation_date": 1431015339, "post_id": 30087244, "comment_id": 48324207, "body": "Thank you. Small mistake but just couldn&#39;t see it. Now how do I close this question and choose your answer as the solution to the problem?"}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "reply_to_user": {"reputation": 3, "user_id": 4872170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152854138213461/picture?type=large", "display_name": "NickL", "link": "https://stackoverflow.com/users/4872170/nickl"}, "edited": false, "score": 0, "creation_date": 1431015422, "post_id": 30087244, "comment_id": 48324262, "body": "@NickL you click the check mark near the arrows/score of my answer"}], "tags": [], "owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "is_accepted": true, "score": 1, "last_activity_date": 1430945276, "creation_date": 1430945276, "answer_id": 30087244, "question_id": 30087165, "link": "https://stackoverflow.com/questions/30087165/stringstream-wont-convert-properly/30087244#30087244", "title": "Stringstream won&#39;t convert properly", "body": "<p>You aren't initializing your stringstream to use the string that the user input:</p>\n\n<pre><code>stringstream convHolder;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>stringstream convHolder(playerAnswer);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4872170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152854138213461/picture?type=large", "display_name": "NickL", "link": "https://stackoverflow.com/users/4872170/nickl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 30087244, "answer_count": 1, "score": -2, "last_activity_date": 1431015020, "creation_date": 1430945021, "last_edit_date": 1431015020, "question_id": 30087165, "link": "https://stackoverflow.com/questions/30087165/stringstream-wont-convert-properly", "title": "Stringstream won&#39;t convert properly", "body": "<p>To begin with, I'm using Windows 8.1, Visual Studio 2013 Express and c++. Don't know which C++ standard I'm using though.</p>\n\n<p>I'm completely new to programming so I might have missed some fundamental part in this function. I am making a 10-question quiz and this one is about when MJ passed away. I'm trying to make sure that the program won't crash if the user inputs something other than an <code>int</code> by using <code>getline()</code>.</p>\n\n<p>I learned about <code>stringstream</code> and to convert. It is supposed to convert \"playerAnswer\" to an <code>int</code>.\nI am using<code>#include &lt;iostream&gt;</code> <code>#include &lt;string&gt;</code> <code>#include &lt;sstream&gt;</code>  and <code>using namespace std;</code> </p>\n\n<pre><code>int question_3()\n{\n\n    cout &lt;&lt; \"Question 3:\\n\";\n\n    string playerAnswer = \"\";\n    int convertedAnswer = 0;    \n\n    cout &lt;&lt; \"Which year did Michael Jackson die? 2008, 2009 or 2010?\\n\" \\\n            \"Your answer: \";\n\n    while (true)\n    {\n        getline(cin, playerAnswer);\n        stringstream convHolder;   // EDIT: Got an answer and it now works.\n                                   // Forgot  (playerAnswer) in convHolder\n        if (convHolder &gt;&gt; convertedAnswer)\n        {\n            if (convertedAnswer == 2009)\n            {\n                cout &lt;&lt; endl &lt;&lt; \"Correct! \\nOn August 29 1958 the legend was born. \\n\" \\\n                                \"On June 25 2009 he passed away in his rented mansion in Holmby Hills.\\n\";\n                cout &lt;&lt; endl;\n                return 1;\n            }\n            else\n            {\n                cout &lt;&lt; endl &lt;&lt; \"Wrong. \\nOn August 29 1958 the legend was born. \\n\" \\\n                                \"On June 25 2009 he passed away in his rented mansion in Holmby Hills.\\n\";\n                cout &lt;&lt; endl;\n                return 0;\n            }\n        }\n        else\n        {\n            cout &lt;&lt; \"Invalid number, please try again: \";\n        }\n    }\n}\n</code></pre>\n\n<p>If you could make it work as intended and in a better way/with shorter code I'd be very interested to learn it :) Any input from you guys is appriciated!</p>\n\n<p>/NickL</p>\n"}, {"tags": ["c++", "opencv", "mat", "assertion"], "comments": [{"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 1, "creation_date": 1430946588, "post_id": 30087023, "comment_id": 48288383, "body": "Please provide the definition of the input variables/parameters of <code>calcOpticalFlowPyrLK</code>"}, {"owner": {"reputation": 753, "user_id": 3829158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SN1lg.jpg?s=128&g=1", "display_name": "rohit-biswas", "link": "https://stackoverflow.com/users/3829158/rohit-biswas"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1430949160, "post_id": 30087023, "comment_id": 48289633, "body": "I forgot to add the definitions. But, It&#39;s solved now. Basically, I hadn&#39;t initialized points[0] and hence the error. I would still like to know what checkVector does as I couldn&#39;t find it in the documentation."}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 1286360, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/315219cb4f246c402c1f3638e8c8b9bd?s=128&d=identicon&r=PG", "display_name": "Udaya", "link": "https://stackoverflow.com/users/1286360/udaya"}, "edited": false, "score": 1, "creation_date": 1483515026, "post_id": 30096493, "comment_id": 70122556, "body": "What is the definition of &#39;N&#39; here? Cannot find it in the documentation."}, {"owner": {"reputation": 1076, "user_id": 907166, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vvTQN.jpg?s=128&g=1", "display_name": "TripleS", "link": "https://stackoverflow.com/users/907166/triples"}, "edited": false, "score": 0, "creation_date": 1510821461, "post_id": 30096493, "comment_id": 81600517, "body": "it&#39;s a bit confusing, does this means that the data is continues?"}, {"owner": {"reputation": 495, "user_id": 1270710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638f68de79fbe26c7f8561717c847d36?s=128&d=identicon&r=PG", "display_name": "user1270710", "link": "https://stackoverflow.com/users/1270710/user1270710"}, "edited": false, "score": 0, "creation_date": 1542238499, "post_id": 30096493, "comment_id": 93501489, "body": "N just stands for a list of &quot;N&quot; points, 1, 2, 3, ...  whatever the count of N points happens to be."}], "tags": [], "owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "is_accepted": true, "score": 15, "last_activity_date": 1487385179, "last_edit_date": 1487385179, "creation_date": 1430989441, "answer_id": 30096493, "question_id": 30087023, "link": "https://stackoverflow.com/questions/30087023/what-does-matcheckvector-do-in-opencv/30096493#30096493", "title": "What does Mat::checkVector do in OpenCV?", "body": "<p>The official OpenCV's doc says:</p>\n\n<blockquote>\n  <p><a href=\"http://docs.opencv.org/master/d3/d63/classcv_1_1Mat.html#a39541d4dbd7fafbfae93f1737e51ffbc\" rel=\"noreferrer\"><code>cv::Mat::checkVector()</code></a> returns N if the matrix is 1-channel (N x\n  ptdim) or ptdim-channel (1 x N) or (N x 1); negative number otherwise</p>\n</blockquote>\n\n<p>OpenCV considers some data types equivalent in case of some functions i.e. <code>objectPoints</code> of <a href=\"http://docs.opencv.org/master/d9/d0c/group__calib3d.html#ga549c2075fac14829ff4a58bc931c033d\" rel=\"noreferrer\"><code>cv::solvePnP()</code></a> can be:</p>\n\n<ul>\n<li>1xN/Nx1 1-channel <code>cv::Mat</code> </li>\n<li>3xN/Nx3 3-channel <code>cv::Mat</code> </li>\n<li><code>std::vector&lt;cv::Point3f&gt;</code></li>\n</ul>\n\n<p>With <code>checkVector</code> you can make sure that you are passing the correct representation of your data.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8757743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE6E6.jpg?s=128&g=1", "display_name": "Gaussiano", "link": "https://stackoverflow.com/users/8757743/gaussiano"}, "is_accepted": false, "score": 0, "last_activity_date": 1563385998, "creation_date": 1563385998, "answer_id": 57081684, "question_id": 30087023, "link": "https://stackoverflow.com/questions/30087023/what-does-matcheckvector-do-in-opencv/57081684#57081684", "title": "What does Mat::checkVector do in OpenCV?", "body": "<p>I had a similar issue with cv2.projectPoints function (-215:Assertion failed) because openCV was expecting a nx3 matrix and i was passing an 1D array of length 3. Try:</p>\n\n<pre><code>points[0].reshape(-1,3)\n</code></pre>\n\n<p>As argument to the function. It changes the shape (3,) to shape (1,3).</p>\n"}], "owner": {"reputation": 753, "user_id": 3829158, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/SN1lg.jpg?s=128&g=1", "display_name": "rohit-biswas", "link": "https://stackoverflow.com/users/3829158/rohit-biswas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8671, "favorite_count": 2, "accepted_answer_id": 30096493, "answer_count": 2, "score": 8, "last_activity_date": 1563385998, "creation_date": 1430944558, "question_id": 30087023, "link": "https://stackoverflow.com/questions/30087023/what-does-matcheckvector-do-in-opencv", "title": "What does Mat::checkVector do in OpenCV?", "body": "<p>I tried to use the following function in OpenCV (C++)</p>\n\n<pre><code>calcOpticalFlowPyrLK(prev_frame_gray, frame_gray, points[0], points[1], status, err, winSize, 3, termcrit, 0, 0.001);\n</code></pre>\n\n<p>and I get this error</p>\n\n<pre><code>OpenCV Error: Assertion failed ((npoints = prevPtsMat.checkVector(2, CV_32F, true)) &gt;= 0) in calcOpticalFlowPyrLK,\nfile /home/rohit/OpenCV_src/opencv-2.4.9/modules/video/src/lkpyramid.cpp, line 845\nterminate called after throwing an instance of 'cv::Exception'\nwhat():  /home/rohit/OpenCV_src/opencv-2.4.9/modules/video/src/lkpyramid.cpp:845:\nerror: (-215) (npoints = prevPtsMat.checkVector(2, CV_32F, true)) &gt;= 0 in function calcOpticalFlowPyrLK\n</code></pre>\n\n<p>Both of the following return -1</p>\n\n<pre><code>frame_gray.checkVector(2, CV_32F, true)\nprev_frame_gray.checkVector(2, CV_32F, true)\n</code></pre>\n\n<p>I wanted to know what checkVector actually does because it is leading to the assertion error as you can see above.</p>\n"}, {"tags": ["c++", "windows", "performance", "mfc", "64-bit"], "comments": [{"owner": {"reputation": 10018, "user_id": 1309356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o45P6.png?s=128&g=1", "display_name": "cha", "link": "https://stackoverflow.com/users/1309356/cha"}, "edited": false, "score": 1, "creation_date": 1430955943, "post_id": 30086705, "comment_id": 48292048, "body": "Are the optimisation flags for 32 and 64 bit builds the same?"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1430962951, "post_id": 30086705, "comment_id": 48293835, "body": "I tried it with VS 2013, I get the same numbers. It&#39;s 4 times faster for 64-bit with <code>vector&lt;CString&gt;</code>, but I don&#39;t know if that&#39;s an option for VS 2005."}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1430966089, "post_id": 30086705, "comment_id": 48294625, "body": "This supposed phenomenon occurred w/16 bit apps running on Win95 - they were &quot;faster&quot;.  A broader native data/address bus does not imply faster.  Wonder why VS remains a 32 bit app, including VS 2015?  Wider data/address bus means being able to handle 64 bit math and 64 bit addressing (that&#39;s a LOT of potential RAM to address directly) - if you tried to compare THAT, I am sure the 64 bit app would be faster than the 32 bit &quot;equivalent&quot; (e.g. try formatting or integer dividing two large 64 bit integers)."}, {"owner": {"reputation": 95, "user_id": 3229835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b5410308c3333d70ac04eff4a1b8d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "andrebroz", "link": "https://stackoverflow.com/users/3229835/andrebroz"}, "reply_to_user": {"reputation": 10018, "user_id": 1309356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o45P6.png?s=128&g=1", "display_name": "cha", "link": "https://stackoverflow.com/users/1309356/cha"}, "edited": false, "score": 0, "creation_date": 1430995102, "post_id": 30086705, "comment_id": 48308840, "body": "@cha, I didn&#39;t play with optimization, so the optimization flags are set to their original values: for the debug builds - disabled, for the release builds - Maximize Speed (/O2)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1431000063, "post_id": 30086705, "comment_id": 48312259, "body": "@franji1 compiling to x86_64 does not only increase the address and data width but also double (actually more than double) the number of registers which is very useful for most compute intensive programs. That&#39;s not counting many other improvements"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 3229835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b5410308c3333d70ac04eff4a1b8d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "andrebroz", "link": "https://stackoverflow.com/users/3229835/andrebroz"}, "edited": false, "score": 0, "creation_date": 1431278425, "post_id": 30103238, "comment_id": 48415908, "body": "Thank you, I cannot vote this answer up because of lack of enough reputation, but I think this is a good answer."}], "tags": [], "owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "is_accepted": true, "score": 2, "last_activity_date": 1431006932, "creation_date": 1431006932, "answer_id": 30103238, "question_id": 30086705, "link": "https://stackoverflow.com/questions/30086705/mfc-64-bit-code-is-slower-than-32-bit-on-windows-server-2008-r2/30103238#30103238", "title": "MFC 64 bit code is slower than 32 bit on Windows Server 2008 R2", "body": "<p>In 64-bit mode, pointers are twice as big. So it can happen that you have to allocate up to twice as much memory in the 64-bit version, just to store your pointers. This might be enough in itself to slow the program down.</p>\n"}], "owner": {"reputation": 95, "user_id": 3229835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b5410308c3333d70ac04eff4a1b8d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "andrebroz", "link": "https://stackoverflow.com/users/3229835/andrebroz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 3, "accepted_answer_id": 30103238, "answer_count": 1, "score": 2, "last_activity_date": 1431268350, "creation_date": 1430943434, "last_edit_date": 1431268350, "question_id": 30086705, "link": "https://stackoverflow.com/questions/30086705/mfc-64-bit-code-is-slower-than-32-bit-on-windows-server-2008-r2", "title": "MFC 64 bit code is slower than 32 bit on Windows Server 2008 R2", "body": "<p>I run the following MFC code:</p>\n\n<pre><code>CArray&lt;CString&gt; l_Arr;\nfor (int i = 0; i &lt; 2000000; ++i)\n{\n  CString l_sStr;\n  l_sStr.Format(\"%d\", i);\n  l_Arr.Add(l_sStr);\n}\n</code></pre>\n\n<p>If I build 64 bit version the code runs about 2 times slower than 32 bit. I tried both Debug and Release versions. The times are the following:<br></p>\n\n<blockquote>\n  <p>Debug 64 bit: 15085 ms<br> Debug 32 bit: 8128 ms<br> Release 64 bit:\n  8237 ms<br> Release 32 bit: 4695 ms<br></p>\n</blockquote>\n\n<p>My configuration:<br></p>\n\n<blockquote>\n  <p>Microsoft Visual Studio 2005<br> Version 8.0.50727.4039\n  (QFE.050727-4000)<br> Windows Server 2008 R2 Standard 64 bit<br>\n  Processor: Intel(R) Xeon(R) E5645 @ 2.40GHz<br> Memory: 16.0 GB<br></p>\n</blockquote>\n\n<p>I understand that this code can be optimized. I do not understand why there is such a difference.</p>\n\n<p>@BarmakShemirani, I tried with vector as you suggested, you are right, the results are completely different. It looks like 64 bit code is even faster. Here are the results:  </p>\n\n<pre><code>std::vector&lt;CString&gt; l_Arr; \nfor (int i = 0; i &lt; 2000000; ++i) \n{ \n  CString l_sStr; \n  l_sStr.Format(\"%d\", i); \n  l_Arr.push_back(l_sStr); \n} \n</code></pre>\n\n<blockquote>\n  <p>Debug 64 bit: 3563 ms<br>\n  Debug 32 bit: 4562 ms<br>\n  Release 64 bit: 1140 ms<br>\n  Release 32 bit: 1563 ms  </p>\n</blockquote>\n\n<p>Here is the optimized version with CArray:  </p>\n\n<pre><code>CArray&lt;CString&gt; l_Arr;\nstatic const int K_CNT = 2000000;\nl_Arr.SetSize(K_CNT);\nfor (int i = 0; i &lt; K_CNT; ++i)\n{\n  CString l_sStr;\n  l_sStr.Format(\"%d\", i);\n  l_Arr[i] = l_sStr;\n}\n</code></pre>\n\n<blockquote>\n  <p>Debug 64 bit: 2625 ms<br>\n  Debug 32 bit: 2625 ms<br>\n  Release 64 bit: 1015 ms<br>\n  Release 32 bit: 1438 ms  </p>\n</blockquote>\n\n<p>Is CArray growing mechanism causes the code to run slower in 64 bit?</p>\n\n<p>I looked into CArray growing code, essentially it allocates a new array and copies to it the old content every 1024 added elements. So I just simulated the allocation code with the following results:  </p>\n\n<pre><code>static const int K_CNT = 2000000;\nfor (int i = 0; i &lt; K_CNT / 1024; ++i)\n{\n  int l_nSize = (i + 1) * 1024 * sizeof(CString);\n  BYTE* l_pData = new BYTE[l_nSize];\n  memset(l_pData, 0, l_nSize);\n  delete[] l_pData;\n}\n</code></pre>\n\n<blockquote>\n  <p>Debug 64 bit: 10483 ms<br>\n  Debug 32 bit: 4696 ms<br>\n  Release 64 bit: 5803 ms<br>\n  Release 32 bit: 2652 ms  </p>\n</blockquote>\n"}, {"tags": ["c++", "c++11", "initializer-list", "crtp"], "answers": [{"comments": [{"owner": {"reputation": 47307, "user_id": 817778, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20cc8f574b01913048718f0abd4bf861?s=128&d=identicon&r=PG", "display_name": "eddi", "link": "https://stackoverflow.com/users/817778/eddi"}, "edited": false, "score": 0, "creation_date": 1430942936, "post_id": 30086441, "comment_id": 48286313, "body": "Ah, so the second part of <a href=\"http://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/7189821#7189821\">this answer</a> doesn&#39;t apply. Thanks."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1430950103, "post_id": 30086441, "comment_id": 48290090, "body": "This <a href=\"http://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/27511360#comment47403725_27511360\">could change in C++17</a> there is currently a proposal being considered."}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 11, "last_activity_date": 1430942500, "creation_date": 1430942500, "answer_id": 30086441, "question_id": 30086368, "link": "https://stackoverflow.com/questions/30086368/initializer-list-constructor-error-with-crtp/30086441#30086441", "title": "initializer list constructor error with CRTP", "body": "<p><em>Aggregate-initialization</em> requires your type to be an aggregate. An aggregate cannot have base classes:</p>\n\n<blockquote>\n  <p>An aggregate is an array or a class (Clause 9) with no user-provided\n  constructors (12.1), no private or protected non-static data members\n  (Clause 11), <strong>no base classes</strong> (Clause 10), and no virtual functions\n  (10.3).</p>\n</blockquote>\n"}], "owner": {"reputation": 47307, "user_id": 817778, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/20cc8f574b01913048718f0abd4bf861?s=128&d=identicon&r=PG", "display_name": "eddi", "link": "https://stackoverflow.com/users/817778/eddi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 30086441, "answer_count": 1, "score": 6, "last_activity_date": 1430942595, "creation_date": 1430942262, "last_edit_date": 1430942595, "question_id": 30086368, "link": "https://stackoverflow.com/questions/30086368/initializer-list-constructor-error-with-crtp", "title": "initializer list constructor error with CRTP", "body": "<p>I'm wetting my feet with C++11 and am really confused why this doesn't work:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct A {\n  size_t size() const { return sizeof(T); }\n};\n\nstruct B : A&lt;B&gt; {\n  int x;\n  int y;\n};\n\nB var {1, 5};\n</code></pre>\n\n<p>I'm using gcc 4.8.2 and get an error saying:</p>\n\n<pre><code>no matching function for call to 'B(&lt;brace-enclosed initializer list&gt;)'\n</code></pre>\n\n<p>It works just fine when I don't derive from <code>A</code>, so does the derivation somehow change the POD-ness of my struct <code>B</code>?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 2, "creation_date": 1430942174, "post_id": 30086311, "comment_id": 48285813, "body": "a 4x5 matrix of ints allocation will hardly matter for performance"}, {"owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "reply_to_user": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 1, "creation_date": 1430942373, "post_id": 30086311, "comment_id": 48285954, "body": "@dwcanillas: But locality of reference will likely matter. I have no idea about the performance of <code>Mat</code>, but the second version is clearly not optimal."}, {"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 1, "creation_date": 1430942425, "post_id": 30086311, "comment_id": 48285986, "body": "Premature optimization is the root of all evil -- DonaldKnuth"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1430942734, "post_id": 30086311, "comment_id": 48286196, "body": "Measure it. But how is a newed array of newed arrays comparable to a <code>cv::Mat</code>?"}, {"owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "edited": false, "score": 0, "creation_date": 1430944172, "post_id": 30086311, "comment_id": 48287083, "body": "How do you know this is your bottleneck?   How have you attempted to measure this operations and what failed about those attempts?   What are  your estimates on the sizes of the matrices?   Min/Max/Mode/etc?   What other representations of the data have you considered?"}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1430946486, "post_id": 30086311, "comment_id": 48288336, "body": "At least transform your second loop in a <code>memset(matrix[i],1,n)</code>. Ideally you should have one array of <code>int</code> (not an array of arrays of <code>int</code>). Then you would have <code>memset(matrix,1,m*n)</code>. Which I believe is the fastest existing (as long as you have a good compiler)."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1431011083, "post_id": 30086311, "comment_id": 48320997, "body": "I don&#39;t understand the question... if you want to use OpenCV functions later, you probably want to use cv::Mat objects right in the beginning. If you just want some 2D array, you shouldnt add openCV libraries to your project just for that (OpenCV Matrices do have some overhead, too)."}], "owner": {"reputation": 332, "user_id": 3799302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af0930e8ac1f4730e3bc380897b276d7?s=128&d=identicon&r=PG&f=1", "display_name": "jperezmartin", "link": "https://stackoverflow.com/users/3799302/jperezmartin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431016866, "creation_date": 1430942075, "last_edit_date": 1431016866, "question_id": 30086311, "link": "https://stackoverflow.com/questions/30086311/matones-performance", "title": "Mat::ones() performance", "body": "<p>I am developing a software operating in real time in C++ with opencv and need the highest performance possible.\nWhich is more efficient?</p>\n\n<pre><code>Mat matrix = Mat::ones(m, n, CV_32SC1);\n</code></pre>\n\n<p>or this option</p>\n\n<pre><code>int** matrix = new int*[m];\nfor (int i = 0; i &lt; m; i++)\n{\n    matrix[i] = new int[n];\n    for (int j = 0; j &lt; n; j++)\n        matrix[i][j] = 1;\n}\n</code></pre>\n\n<p>and indexing</p>\n\n<pre><code>matrix.at&lt;int&gt;(r,c) = 10;\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>matrix[r][c] = 10;\n</code></pre>\n"}, {"tags": ["c++", "vector", "tuples", "std"], "comments": [{"owner": {"reputation": 1142, "user_id": 2116585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20805c944e8cb258aec761ac61440e6f?s=128&d=identicon&r=PG", "display_name": "nic", "link": "https://stackoverflow.com/users/2116585/nic"}, "edited": false, "score": 1, "creation_date": 1430942310, "post_id": 30086300, "comment_id": 48285901, "body": "You didn&#39;t put much effort into this question. Your code doesn&#39;t come close to compiling."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1430942614, "post_id": 30086300, "comment_id": 48286109, "body": "You should also use <code>tupleVector.emplace_back(&quot;test&quot;, 2, 3);</code> instead of <code>push_back</code>, is much cleaner, faster, and better for current situation."}], "answers": [{"tags": [], "owner": {"reputation": 1068, "user_id": 2469099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d14cefa990b93b276681eb0fb727986f?s=128&d=identicon&r=PG", "display_name": "Edwin Rodr&#237;guez", "link": "https://stackoverflow.com/users/2469099/edwin-rodr%c3%adguez"}, "is_accepted": true, "score": 7, "last_activity_date": 1611141763, "last_edit_date": 1611141763, "creation_date": 1430942382, "answer_id": 30086399, "question_id": 30086300, "link": "https://stackoverflow.com/questions/30086300/how-to-print-a-type-vectortuplestring-int-int-to-screen-c/30086399#30086399", "title": "How to print a type vector&lt;tuple&lt;string, int, int&gt;&gt; to screen c++?", "body": "<p>Just iterate the <code>vector</code>, printing each <code>tuple</code> value using <code>cout</code>:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>for (const auto&amp; i : tupleVector) {\n  cout &lt;&lt; get&lt;0&gt;(i) &lt;&lt; &quot;, &quot; &lt;&lt; get&lt;1&gt;(i) &lt;&lt; &quot;, &quot; &lt;&lt; get&lt;2&gt;(i) &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430943911, "post_id": 30086610, "comment_id": 48286926, "body": "<code>v.emplace_back(&quot;hello&quot;, 3, 4);</code> looks cleaner (and it is actually a tad faster)"}], "tags": [], "owner": {"reputation": 1142, "user_id": 2116585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20805c944e8cb258aec761ac61440e6f?s=128&d=identicon&r=PG", "display_name": "nic", "link": "https://stackoverflow.com/users/2116585/nic"}, "is_accepted": false, "score": 2, "last_activity_date": 1430944633, "last_edit_date": 1430944633, "creation_date": 1430943061, "answer_id": 30086610, "question_id": 30086300, "link": "https://stackoverflow.com/questions/30086300/how-to-print-a-type-vectortuplestring-int-int-to-screen-c/30086610#30086610", "title": "How to print a type vector&lt;tuple&lt;string, int, int&gt;&gt; to screen c++?", "body": "<p>You need to break the problem into two steps. First think about how to print just the tuple, then think about how to print the vector. Here is how I'd do it:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; s,\n                         const std::tuple&lt;std::string, int, int&gt;&amp; t) {\n  s &lt;&lt; \"(\" &lt;&lt; std::get&lt;0&gt;(t) &lt;&lt; \",\" &lt;&lt; std::get&lt;1&gt;(t) &lt;&lt; \",\" &lt;&lt;\n      std::get&lt;2&gt;(t) &lt;&lt; \")\";\n  return s;\n}\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; s,\n                         const std::vector&lt;std::tuple&lt;\n                         std::string, int, int&gt; &gt;&amp; v) {\n  s &lt;&lt; \"[\";\n  for (size_t idx = 0; idx &lt; v.size(); idx++) {\n    s &lt;&lt; v[idx];\n    if (idx &lt; v.size() - 1) {\n      s &lt;&lt; \",\";\n    }\n  }\n  s &lt;&lt; \"]\";\n  return s;\n}\n\nint main() {\n  std::vector&lt;std::tuple&lt;std::string, int, int&gt; &gt; v;\n  v.emplace_back(\"hello\", 3, 4);\n  v.emplace_back(\"goodbye\", 45, 67);\n\n  std::cout &lt;&lt; v &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>This method overrides the operator&lt;&lt; for the tuple and the vector. Printing the vector will loop through the vector calling the operator&lt;&lt; for each tuple.</p>\n\n<p>The output will be:</p>\n\n<pre><code>[(hello,3,4),(goodbye,45,67)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1430947081, "creation_date": 1430947081, "answer_id": 30087708, "question_id": 30086300, "link": "https://stackoverflow.com/questions/30086300/how-to-print-a-type-vectortuplestring-int-int-to-screen-c/30087708#30087708", "title": "How to print a type vector&lt;tuple&lt;string, int, int&gt;&gt; to screen c++?", "body": "<p>for pretty printing of any array of any item (including tuples), something like this.</p>\n\n<p>Note: this program written in c++11. c++14 would make it easier to iterate the tuple without recursion.</p>\n\n<p>example project here: <a href=\"http://goo.gl/9okLTB\" rel=\"nofollow\">http://goo.gl/9okLTB</a></p>\n\n<p>example output:</p>\n\n<pre><code>Hello World                                                                                                                                                                             \n{ hello, 1, 2 }                                                                                                                                                                         \n{ { hello, 3, 4 }, { world, 5, 6 } }    \n</code></pre>\n\n<p>fully compilable example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n\nnamespace detail {\n    template&lt;typename Stream&gt;\n    struct printer {\n        printer(Stream&amp; os)\n        : _os ( os )\n        {}\n\n        ~printer() {\n            _os &lt;&lt; \" }\";\n        }\n\n        template&lt;class X&gt;\n        void operator()(const X&amp; x) {\n            if (_first) {\n                _os &lt;&lt; \"{ \";\n                _first = false;\n            }\n            else {\n                _os &lt;&lt; \", \";\n            }\n            _os &lt;&lt; x;\n        }\n    private:\n        Stream&amp; _os;\n        bool _first = true;    \n    };\n\n    template&lt;size_t index, size_t limit&gt;\n    struct print_loop\n    {\n        template&lt;class Stream, class...Args&gt;\n        void operator()(detail::printer&lt;Stream&gt;&amp;&amp; print, const std::tuple&lt;Args...&gt;&amp; tuple) const\n        {\n            print(std::get&lt;index&gt;(tuple));\n            print_loop&lt;index+1, limit&gt;()(std::forward&lt;detail::printer&lt;Stream&gt;&gt;(print), tuple);\n        }\n    };\n\n    template&lt;size_t limit&gt;\n    struct print_loop&lt;limit, limit&gt;\n    {\n        template&lt;class Stream, class...Args&gt;\n        void operator()(detail::printer&lt;Stream&gt;&amp;&amp; print, const std::tuple&lt;Args...&gt;&amp; tuple) const\n        {\n\n        }    \n    };\n}\n\ntemplate&lt;class Stream&gt;\ndetail::printer&lt;Stream&gt; make_printer(Stream&amp; os)\n{\n    return detail::printer&lt;Stream&gt;(os);\n}\n\n\n\n\ntemplate&lt;class Stream, class...Args&gt;\nvoid print_elements(detail::printer&lt;Stream&gt;&amp;&amp; printer, const std::tuple&lt;Args...&gt;&amp; tuple)\n{\n\n    detail::print_loop&lt;0, sizeof...(Args)&gt;()(std::forward&lt;detail::printer&lt;Stream&gt;&gt;(printer), tuple);\n}\n\ntemplate&lt;class...Args&gt;\nvoid tuple_print(std::ostream&amp; os, const std::tuple&lt;Args...&gt;&amp; tuple)\n{\n    print_elements(make_printer(os), tuple);\n}\n\ntemplate&lt;class...Args&gt;\ninline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const std::tuple&lt;Args...&gt;&amp; tuple)\n{\n    tuple_print(os, tuple);\n    return os;\n}\n\ntemplate&lt;class T&gt;\ninline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const std::vector&lt;T&gt;&amp; vec)\n{\n    auto print = make_printer(os);\n    for(const auto&amp; item : vec) {\n        print(item);\n    }\n}\n\nusing namespace std;\n\n\nint main()\n{\n   cout &lt;&lt; \"Hello World\" &lt;&lt; endl; \n   auto x = make_tuple(string { \"hello\" }, 1, 2);\n   cout &lt;&lt; x &lt;&lt; endl;\n\n   auto y = vector&lt;tuple&lt;string, int, int&gt;&gt; {\n    make_tuple(string { \"hello\" }, 3, 4),\n    make_tuple(string { \"world\" }, 5, 6)\n   };\n   cout &lt;&lt; y &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 740, "user_id": 4524860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Z7TV8IXJjiw/AAAAAAAAAAI/AAAAAAAAABA/hedLPR9Xebw/photo.jpg?sz=128", "display_name": "asdfasdf", "link": "https://stackoverflow.com/users/4524860/asdfasdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3980, "favorite_count": 0, "accepted_answer_id": 30086399, "answer_count": 3, "score": -3, "last_activity_date": 1611141763, "creation_date": 1430942055, "last_edit_date": 1430945002, "question_id": 30086300, "link": "https://stackoverflow.com/questions/30086300/how-to-print-a-type-vectortuplestring-int-int-to-screen-c", "title": "How to print a type vector&lt;tuple&lt;string, int, int&gt;&gt; to screen c++?", "body": "<p>Let's say I have </p>\n\n<pre><code>std::vector&lt;std::tuple&lt;string ,int ,int&gt;&gt; tupleVector;\ntupleVector.push_back(std::tuple&lt;string ,int ,int&gt;(\"Joe\", 2, 3));\ntupleVector.push_back(std::tuple&lt;string ,int ,int&gt;(\"Bob\", 4, 5));\n</code></pre>\n\n<p>How can I iterate on the vector to print all values of this vector containing a tuple?</p>\n"}, {"tags": ["c++", "clion"], "comments": [{"owner": {"reputation": 370, "user_id": 4842378, "user_type": "registered", "profile_image": "https://graph.facebook.com/956662497699762/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/4842378/scott"}, "edited": false, "score": 0, "creation_date": 1430942007, "post_id": 30086210, "comment_id": 48285692, "body": "Since CLion is based on CMake, do you have an executable target in one of your CMakeLists.txt?  If so, there should be an executable target you can run.  This is of course me simply going off of memory from when CLion was still EAP."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4134614"}, "reply_to_user": {"reputation": 370, "user_id": 4842378, "user_type": "registered", "profile_image": "https://graph.facebook.com/956662497699762/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/4842378/scott"}, "edited": false, "score": 0, "creation_date": 1430942331, "post_id": 30086210, "comment_id": 48285915, "body": "i added content of makelist.txt. And what does <code>EAP</code> stand for ? @Scott"}, {"owner": {"reputation": 370, "user_id": 4842378, "user_type": "registered", "profile_image": "https://graph.facebook.com/956662497699762/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/4842378/scott"}, "edited": false, "score": 0, "creation_date": 1430943059, "post_id": 30086210, "comment_id": 48286393, "body": "EAP simply means Early Access Program where you could use pre-released versions of CLion to try it out and report issues.  Are there any other options in the Target dropdown other than &quot;All targets&quot;?  It seems like you should have a target called untitled that would be an executable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4134614"}, "reply_to_user": {"reputation": 370, "user_id": 4842378, "user_type": "registered", "profile_image": "https://graph.facebook.com/956662497699762/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/4842378/scott"}, "edited": false, "score": 0, "creation_date": 1430943387, "post_id": 30086210, "comment_id": 48286614, "body": "where the option All targets ? How can I find @Scott"}, {"owner": {"reputation": 370, "user_id": 4842378, "user_type": "registered", "profile_image": "https://graph.facebook.com/956662497699762/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/4842378/scott"}, "edited": false, "score": 0, "creation_date": 1430944015, "post_id": 30086210, "comment_id": 48286996, "body": "I was referring to the &quot;Target&quot; dropdown in the screenshot you provided.  Here is a link that provides more documentation about how to run and debug your code in CLion.  <a href=\"https://www.jetbrains.com/clion/features/#run_and_debug\" rel=\"nofollow noreferrer\">jetbrains.com/clion/features/#run_and_debug</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4134614"}, "reply_to_user": {"reputation": 370, "user_id": 4842378, "user_type": "registered", "profile_image": "https://graph.facebook.com/956662497699762/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/4842378/scott"}, "edited": false, "score": 0, "creation_date": 1430947044, "post_id": 30086210, "comment_id": 48288611, "body": "that&#39;s it! untitled target i selected thank you @Scott"}, {"owner": {"reputation": 7500, "user_id": 159679, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/450f7e984216da4c72cd521fcbaf8316?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/159679/alex"}, "edited": false, "score": 0, "creation_date": 1548951395, "post_id": 30086210, "comment_id": 95737686, "body": "Absolute fail. A &quot;hello world&quot; does not work. Sorry, there is no excuse. I know that there might an obvious fix those who are familiar with C tooling but I am a Java guy."}], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 1998477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f28d54150d25049990e8dee8bede1ca5?s=128&d=identicon&r=PG", "display_name": "gkc", "link": "https://stackoverflow.com/users/1998477/gkc"}, "is_accepted": false, "score": 5, "last_activity_date": 1457637477, "creation_date": 1457637477, "answer_id": 35925320, "question_id": 30086210, "link": "https://stackoverflow.com/questions/30086210/when-compiling-in-clion-i-get-the-error-executable-is-not-specified/35925320#35925320", "title": "When compiling in clion I get the error &quot;executable is not specified&quot;", "body": "<p>I think CLion needs CMakeLists.txt for run/debug configuration.\nMore info at: <a href=\"https://www.jetbrains.com/clion/help/cmakelists-file.html\" rel=\"noreferrer\">https://www.jetbrains.com/clion/help/cmakelists-file.html</a></p>\n\n<p>As a C++ newbie, I have basically created new project in CLion then copy/past CMakeLists.txt content into my project by editing required fields.</p>\n\n<p>After that, I was able to configure my project for run/debug.</p>\n\n<p>Default CMakeLists.txt content should be something like this:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(YourProjectName)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\n\nset(SOURCE_FILES YourSourceFile.cpp)\nadd_executable(YourProjectName ${SOURCE_FILES})\n</code></pre>\n\n<p>I hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 1958, "user_id": 5996014, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vu90WeMXl0E/AAAAAAAAAAI/AAAAAAAAABU/cI9eg7UBXSY/photo.jpg?sz=128", "display_name": "Snail", "link": "https://stackoverflow.com/users/5996014/snail"}, "edited": false, "score": 0, "creation_date": 1458309184, "post_id": 36086042, "comment_id": 59816739, "body": "click the left bottom \u201c+\u201d select \u201cgenerate the coffeeScript source map\u201d"}], "tags": [], "owner": {"reputation": 1958, "user_id": 5996014, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vu90WeMXl0E/AAAAAAAAAAI/AAAAAAAAABU/cI9eg7UBXSY/photo.jpg?sz=128", "display_name": "Snail", "link": "https://stackoverflow.com/users/5996014/snail"}, "is_accepted": false, "score": -1, "last_activity_date": 1458359272, "last_edit_date": 1458359272, "creation_date": 1458308723, "answer_id": 36086042, "question_id": 30086210, "link": "https://stackoverflow.com/questions/30086210/when-compiling-in-clion-i-get-the-error-executable-is-not-specified/36086042#36086042", "title": "When compiling in clion I get the error &quot;executable is not specified&quot;", "body": "<p><img src=\"https://i.stack.imgur.com/Kg4n3.png\" alt=\"image of what to click\"></p>\n\n<p>click the left button \u201c+\u201d  select \u201cgenerate the coffee\u201d</p>\n"}, {"comments": [{"owner": {"reputation": 1366, "user_id": 4807889, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/10153645629657370/picture?type=large", "display_name": "mjwrazor", "link": "https://stackoverflow.com/users/4807889/mjwrazor"}, "edited": false, "score": 0, "creation_date": 1525446486, "post_id": 41073082, "comment_id": 87373245, "body": "This does not allow to build a static library either."}], "tags": [], "owner": {"reputation": 603, "user_id": 5662244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DQuGU.jpg?s=128&g=1", "display_name": "whalemare", "link": "https://stackoverflow.com/users/5662244/whalemare"}, "is_accepted": false, "score": 3, "last_activity_date": 1481353712, "creation_date": 1481353712, "answer_id": 41073082, "question_id": 30086210, "link": "https://stackoverflow.com/questions/30086210/when-compiling-in-clion-i-get-the-error-executable-is-not-specified/41073082#41073082", "title": "When compiling in clion I get the error &quot;executable is not specified&quot;", "body": "<p>You just need choose <code>target</code> only for you application (choose your application name).</p>\n\n<p>Like this\n<a href=\"https://i.stack.imgur.com/LJBb7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LJBb7.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 3382160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bcf00652e120e9ee9641bddfe95d9a2?s=128&d=identicon&r=PG&f=1", "display_name": "Thirdshift", "link": "https://stackoverflow.com/users/3382160/thirdshift"}, "is_accepted": false, "score": 2, "last_activity_date": 1574642178, "creation_date": 1574642178, "answer_id": 59023832, "question_id": 30086210, "link": "https://stackoverflow.com/questions/30086210/when-compiling-in-clion-i-get-the-error-executable-is-not-specified/59023832#59023832", "title": "When compiling in clion I get the error &quot;executable is not specified&quot;", "body": "<p>What I can tell from the original posts' image is that this build config is for a \"c library\" project type. </p>\n\n<p><strong>Solution:</strong> create a new project of type \"c executable\". When you launch this project, and hit run the application does run.</p>\n\n<p>While this doesn't answer the question of whey the project type \"c library\" won't execute out of the box, it will get a newbie in business of tinkering with c. </p>\n\n<p>I hope this helps. </p>\n"}, {"tags": [], "owner": {"reputation": 597, "user_id": 5557585, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HJ5faS1sHtQ/AAAAAAAAAAI/AAAAAAAAApY/PE3LfjNskuY/photo.jpg?sz=128", "display_name": "Vishal Singh", "link": "https://stackoverflow.com/users/5557585/vishal-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1586495692, "last_edit_date": 1586495692, "creation_date": 1578222928, "answer_id": 59599296, "question_id": 30086210, "link": "https://stackoverflow.com/questions/30086210/when-compiling-in-clion-i-get-the-error-executable-is-not-specified/59599296#59599296", "title": "When compiling in clion I get the error &quot;executable is not specified&quot;", "body": "<p>If you have created <strong>C/C++ Library by mistake</strong>, make sure that you make a <strong>new project with C/C++ executable</strong>.\nThen you will be able to debug it out of the box.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nE1fd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nE1fd.png\" alt=\"screenshot\"></a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4134614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23348, "favorite_count": 2, "answer_count": 5, "score": 18, "last_activity_date": 1586495692, "creation_date": 1430941748, "last_edit_date": 1435077489, "question_id": 30086210, "link": "https://stackoverflow.com/questions/30086210/when-compiling-in-clion-i-get-the-error-executable-is-not-specified", "title": "When compiling in clion I get the error &quot;executable is not specified&quot;", "body": "<p>I'm using MacOS and trying to write c++ code in Clion but when I run the simple hello world code I get the error <code>executable is not specified</code>. \nI'm new to Clion.</p>\n\n<p>Cmakelist.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2)\nproject(untitled)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\n\nset(SOURCE_FILES main.cpp)\nadd_executable(untitled ${SOURCE_FILES})\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/04VTB.png\" alt=\"clion\"></p>\n"}, {"tags": ["c++", "oracle", "bulkinsert"], "comments": [{"owner": {"reputation": 2191, "user_id": 2244286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce702cb12d8b18f1688280aecd4310f5?s=128&d=identicon&r=PG", "display_name": "pablomatico", "link": "https://stackoverflow.com/users/2244286/pablomatico"}, "edited": false, "score": 0, "creation_date": 1430978351, "post_id": 30086209, "comment_id": 48298437, "body": "Can you store the data in a PL/SQL collection? Can you make a new PL/SQL procedure in the database? If so, you should store the data in a collection and pass it to the procedure which would bulk insert all the objects in the collection"}, {"owner": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "reply_to_user": {"reputation": 2191, "user_id": 2244286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce702cb12d8b18f1688280aecd4310f5?s=128&d=identicon&r=PG", "display_name": "pablomatico", "link": "https://stackoverflow.com/users/2244286/pablomatico"}, "edited": false, "score": 0, "creation_date": 1430978651, "post_id": 30086209, "comment_id": 48298576, "body": "I could make a new procedure - yes. But how do I pass values to it by the scheme above?"}, {"owner": {"reputation": 2191, "user_id": 2244286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce702cb12d8b18f1688280aecd4310f5?s=128&d=identicon&r=PG", "display_name": "pablomatico", "link": "https://stackoverflow.com/users/2244286/pablomatico"}, "edited": false, "score": 0, "creation_date": 1430978892, "post_id": 30086209, "comment_id": 48298674, "body": "I could help you with the PL/SQL part but I don&#39;t know how values are passed in C++"}], "owner": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 525, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1430941747, "creation_date": 1430941747, "question_id": 30086209, "link": "https://stackoverflow.com/questions/30086209/oracle-bulk-insert-based-on-sql", "title": "ORACLE bulk insert based on SQL", "body": "<p>Ich have to shuffle a lot of data data from an application into an ORACLE 11g database. To execute SQL from within C++ I use to employ the following scheme, using bare SQL together with the Poco::Data framework and an ODBC connection to my database:</p>\n\n<pre><code>    // get session  from ODBC session pool \n    Session session = moc::SessionPoolMOC::get();\n\n    // prepare a statement as QString\n    QString q = (\"INSERT INTO MOC_DATA_CONCENTRATOR\"\n        \"(\"\n        \"EQUIPMENT_INSTANCE_ID, \"\n        \"STATION_NAME, \"\n        \"DATA_SRC, \"\n        \"ORG_ID)\"\n        \"values (%1, '%2', '%3', %4);\"\n        );\n\n    /*\n    there would be also prepared statements, but I think that is not the \n    topic now...\n    */\n\n\n    // set parameters within string from passed object 'info'\n    q = q.arg(info.equipment_instance_id);              /* 1 */\n    q = q.arg(info.station_name.toUtf8().constData());  /* 2 */\n    q = q.arg(info.data_src.toUtf8().constData());      /* 3 */\n    q = q.arg(info.org_id);                             /* 4 */\n\n    // prepare statement\n    Statement query(session);\n    query &lt;&lt; q.toUtf8().constData();\n    try\n    {\n        // execute query\n        query.execute();\n    }\n    catch (...)\n    {\n       ...\n    }\n</code></pre>\n\n<p>I'm aware, that this is a very low level approach, but it worked really fine for all situations I encountered so far...</p>\n\n<p>The problem is, that I have now a lot of data (about 400,000 records) to fill into one table. Data is available as different C++ objects, stored in a Qt-List. My naive approach is to call this code sequence for each object to insert. This works fine, but turns out to be quite slow (taking about 15 minutes or so). I asked around, and was told to better use a so called \"bulk insert\". </p>\n\n<p>It seems, however, that this is more related to PLSQL - at least I have no Idea how to use that from the same context or in a similar way as shown in my example. I'm neither ORACLE expert nor administrator and usage of the database is only a side problem within my project. What would you recommend?</p>\n\n<p>Many thanks,\nMichael</p>\n"}, {"tags": ["c++", "static", "rect"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1430941762, "post_id": 30086183, "comment_id": 48285544, "body": "It seems that you did not inlcude in the project file rect.cpp. Check you building of the project."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1430941770, "post_id": 30086183, "comment_id": 48285549, "body": "Looks like you forgot to include <code>rect.cpp</code> in creating the executable."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1430942693, "post_id": 30086183, "comment_id": 48286168, "body": "Can you include all of the commands you use to compile your software?"}, {"owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "edited": false, "score": 1, "creation_date": 1430942797, "post_id": 30086183, "comment_id": 48286227, "body": "I&#39;m in the same situation as the compiler: I cannot find a definition of <code>SDL_Rect</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430942862, "post_id": 30086183, "comment_id": 48286274, "body": "You have a mix of <code>SDL_Rect</code> and <code>Rect</code>. Is that on purpose?"}, {"owner": {"reputation": 25, "user_id": 4678962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272646052938fd6e29eeabb95e2a94fc?s=128&d=identicon&r=PG&f=1", "display_name": "aglasscage", "link": "https://stackoverflow.com/users/4678962/aglasscage"}, "edited": false, "score": 0, "creation_date": 1430942889, "post_id": 30086183, "comment_id": 48286286, "body": "Updated with all the info I can think of. Let me know if you guys need anything else. I appreciate all of the help. And to answer the above question: yes, that is on purpose. The rect code was given to me by my professor, and I&#39;m trying to add static members to it (it was working before I added the static variables and tried to use them)"}, {"owner": {"reputation": 242489, "user_id": 21886, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/38750c50c11e6054c2123073b17b18fc?s=128&d=identicon&r=PG", "display_name": "RichieHindle", "link": "https://stackoverflow.com/users/21886/richiehindle"}, "edited": false, "score": 2, "creation_date": 1430942956, "post_id": 30086183, "comment_id": 48286331, "body": "You need to include &quot;SDL_rect.h&quot; to get the definition of SDL_Rect."}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 4678962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272646052938fd6e29eeabb95e2a94fc?s=128&d=identicon&r=PG&f=1", "display_name": "aglasscage", "link": "https://stackoverflow.com/users/4678962/aglasscage"}, "is_accepted": false, "score": 0, "last_activity_date": 1430943187, "creation_date": 1430943187, "answer_id": 30086640, "question_id": 30086183, "link": "https://stackoverflow.com/questions/30086183/undefined-reference-to-static-variable-in-c/30086640#30086640", "title": "Undefined reference to static variable in c++", "body": "<p>Thanks for all the help, and thank you RichieHindle for the answer.</p>\n\n<p>I needed to #include \"SDL_gfxPrimitives.h\" to get it to work. Funny that is the case because I've been working on this project for a while, and the compiler didn't complain at all, until I tried to add a static member.</p>\n\n<p>Thanks again!</p>\n"}], "owner": {"reputation": 25, "user_id": 4678962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272646052938fd6e29eeabb95e2a94fc?s=128&d=identicon&r=PG&f=1", "display_name": "aglasscage", "link": "https://stackoverflow.com/users/4678962/aglasscage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 683, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430943187, "creation_date": 1430941632, "last_edit_date": 1430942813, "question_id": 30086183, "link": "https://stackoverflow.com/questions/30086183/undefined-reference-to-static-variable-in-c", "title": "Undefined reference to static variable in c++", "body": "<p>I'm trying to use a static variable in one of my classes. I've used them before, without problem. Now I'm getting this error:</p>\n\n<blockquote>\n  <p>/tmp/ccg26aZi.o: In function 'main': main.cpp:(.text+0x7482):\n  undefined reference to `Rect::rect_change' collect2: error: ld\n  returned 1 exit status make: *** [exe] Error 1</p>\n</blockquote>\n\n<p>any advice? Thanks!</p>\n\n<p>UPDATE:</p>\n\n<p>I was told to check my make file to make sure the rect.cpp was being included in the making of the exe. I switched the folder so it is in the correct place. But now I'm getting a whole new set of errors, I previously didn't get:</p>\n\n<p>I checked my make file and made sure the rect.cpp, and moved it to a different folder that ran *.cpp. However Now I'm getting a brand new set of errors:                                                                      </p>\n\n<blockquote>\n  <blockquote>\n    <p>includes/Rect.h:16:17: error: \u2018SDL_Rect\u2019 does not name a type  Rect(const SDL_Rect &amp; r)</p>\n    \n    <p>includes/Rect.h:16:28: error: ISO C++ forbids declaration of \u2018r\u2019 with no type [-fpermissive] Rect( const SDL_Rect &amp; r)</p>\n  </blockquote>\n  \n  <p>includes/Rect.h:19:2: error: \u2018SDL_Rect\u2019 does not name a type<br>\n  SDL_Rect getSDL_Rect()   ^ includes/Rect.h: In constructor\n  \u2018Rect::Rect(const int&amp;)\u2019: includes/Rect.h:17:9: error: request for\n  member \u2018x\u2019 in \u2018r\u2019, which is of non-class type \u2018const int\u2019 : x(r.x),\n  y(r.y), w(r.w), h(r.h)</p>\n  \n  <p>includes/Rect.h:17:17: error: request for member \u2018y\u2019 in \u2018r\u2019, which is\n  of non-class type \u2018const int\u2019    : x(r.x), y(r.y), w(r.w), h(r.h)</p>\n  \n  <p>includes/Rect.h:17:25: error: request for member \u2018w\u2019 in \u2018r\u2019, which is\n  of non-class type \u2018const int\u2019    : x(r.x), y(r.y), w(r.w), h(r.h)</p>\n  \n  <p>includes/Rect.h:17:33: error: request for member \u2018h\u2019 in \u2018r\u2019, which is\n  of non-class type \u2018const int\u2019    : x(r.x), y(r.y), w(r.w), h(r.h)</p>\n</blockquote>\n\n<p>Here is the contents of my make file. the rect.cpp is located inside the src folder.</p>\n\n<pre><code>exe:    main.cpp\n    g++ *.cpp src/*.cpp src/*.c `sdl-config --cflags --libs` -lSDL_image -lSDL_mixer -lSDL_ttf -Iincludes \n\nrun:\n    ./a.out\n\nr:\n    ./a.out\n\nclean:\n    rm a.out\n\nc:\n    rm a.out\n</code></pre>\n\n<hr>\n\n<pre><code>// header\n#ifndef RECT_H\n#define RECT_H\n\n#include &lt;iostream&gt;\n\nclass Rect\n{\npublic:\n    Rect(int x0 = 0, int y0 = 0, int w0 = 0, int h0 = 0)\n        : x(x0), y(y0), w(w0), h(h0)\n    {}\n    Rect( const SDL_Rect &amp; r)\n        : x(r.x), y(r.y), w(r.w), h(r.h)\n    {}\n    SDL_Rect getSDL_Rect()\n    {\n        SDL_Rect r = {x, y, w, h};\n        return r;\n    }\n    int x, y, w, h;\n    static int rect_change;\n    static int rect_change_max;\n};\n\ninline std::ostream &amp; operator&lt;&lt;(std::ostream &amp; cout, const Rect &amp; r)\n{\n    cout &lt;&lt; \"(\" &lt;&lt; r.x &lt;&lt; \",\" &lt;&lt; r.y &lt;&lt; \",\" &lt;&lt; r.w &lt;&lt; \",\" &lt;&lt; r.h &lt;&lt; \")\";\n    return cout;\n}\n\n#endif\n</code></pre>\n\n<hr>\n\n<pre><code>rect.cpp    \n#include \"Rect.h\"\n\nint Rect::rect_change = 0;\nint Rect::rect_change_max = 0;\n</code></pre>\n\n<hr>\n\n<pre><code>   // main.cpp example\n   #include \"Rect.h\"\n\n   int main()\n   {\n       Rect rect;\n       rect.rect_change = 5;\n\n       return 0;\n   }\n</code></pre>\n"}, {"tags": ["c++", "string", "optimization", "vector", "char"], "comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 0, "creation_date": 1430941649, "post_id": 30086128, "comment_id": 48285470, "body": "Instead of a second loop you could just use <a href=\"http://www.cplusplus.com/reference/string/string/find/\" rel=\"nofollow noreferrer\"><code>std::string::find</code></a>.  Not sure how much of a performance boost it is, but it would be more readable."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1430942113, "post_id": 30086128, "comment_id": 48285768, "body": "This: <code>i &lt;= upperProcessed.size()</code> will go out of bounds. Same with <code>j</code> loop."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1430942117, "post_id": 30086128, "comment_id": 48285770, "body": "is this a real performance bottleneck in your code? or are you trying to optimize &quot;just because&quot;?"}, {"owner": {"reputation": 79, "user_id": 3027864, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9d851fdfe52337f00f95536f22a192ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3027864", "link": "https://stackoverflow.com/users/3027864/user3027864"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1430942433, "post_id": 30086128, "comment_id": 48285992, "body": "@TheParamagneticCroissant &quot;just because&quot;"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1430942848, "post_id": 30086128, "comment_id": 48286269, "body": "One thing --  If you&#39;re using a C++ 11 compliant compiler, you might as well pass the strings by value instead of passing by reference and then copying those strings in the function.  <a href=\"http://stackoverflow.com/questions/7592630/is-pass-by-value-a-reasonable-default-in-c11\" title=\"is pass by value a reasonable default in c11\">stackoverflow.com/questions/7592630/&hellip;</a>"}, {"owner": {"reputation": 79, "user_id": 3027864, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9d851fdfe52337f00f95536f22a192ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3027864", "link": "https://stackoverflow.com/users/3027864/user3027864"}, "edited": false, "score": 0, "creation_date": 1430942970, "post_id": 30086128, "comment_id": 48286341, "body": "Haha passing by reference is the one thing we can&#39;t change, sorry should have mentioned"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1430943130, "post_id": 30086128, "comment_id": 48286441, "body": "@user3027864 <code>passing by reference is the one thing we can&#39;t change</code> Well, given the link, you might reconsider if it&#39;s C++11 and that function is called a substantial number of times.  You asked for optimization, well..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1430943462, "post_id": 30086128, "comment_id": 48286667, "body": "@user3027864 Also, why do you need a vector?  Just declare a string and apply <code>+=</code> to it."}, {"owner": {"reputation": 1068, "user_id": 2469099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d14cefa990b93b276681eb0fb727986f?s=128&d=identicon&r=PG", "display_name": "Edwin Rodr&#237;guez", "link": "https://stackoverflow.com/users/2469099/edwin-rodr%c3%adguez"}, "edited": false, "score": 0, "creation_date": 1430943983, "post_id": 30086128, "comment_id": 48286974, "body": "I think that after     <code>found = true</code> must be a     <code>break;</code>"}, {"owner": {"reputation": 1068, "user_id": 2469099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d14cefa990b93b276681eb0fb727986f?s=128&d=identicon&r=PG", "display_name": "Edwin Rodr&#237;guez", "link": "https://stackoverflow.com/users/2469099/edwin-rodr%c3%adguez"}, "edited": false, "score": 0, "creation_date": 1430944300, "post_id": 30086128, "comment_id": 48287169, "body": "If the expected size of a vector is known then reserve. In your code call <code>vectorAfterProcessed.reserve(upperProcessed.size() * upperIgnored.size())</code>. With this, push_backs will be faster"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1430944867, "post_id": 30086128, "comment_id": 48287497, "body": "@user3027864 then don&#39;t do it."}], "answers": [{"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1430946895, "creation_date": 1430946895, "answer_id": 30087657, "question_id": 30086128, "link": "https://stackoverflow.com/questions/30086128/c-optimization-for-string-compare-and-replace/30087657#30087657", "title": "C++ Optimization for string compare and replace", "body": "<p><strong>Note:</strong> Whether this is faster or not, you will have to profile the code and determine this.  In addition, the program below has <strong>not</strong> been tested for all input cases.  </p>\n\n<hr>\n\n<p>If your goal is to search for characters that are not in a string, instead of nested search loops (and vectors), usage of <code>find_first_not_of</code> in a loop would (should) do the job.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;cctype&gt;\n\nstd::string optimize(std::string toBeProcessed, std::string toBeIgnored, char ch)\n{\n    std::transform(toBeProcessed.begin(), toBeProcessed.end(), toBeProcessed.begin(), ::toupper);\n    std::transform(toBeIgnored.begin(), toBeIgnored.end(), toBeIgnored.begin(), ::toupper);\n    std::string test;\n    size_t start = 0;\n    while (start &lt; toBeProcessed.size())\n    {\n        size_t n = toBeProcessed.find_first_not_of(toBeIgnored, start);\n        if ( n != std::string::npos)\n        { \n            toBeProcessed[n] = ch;\n            start = n+1;\n        }\n        else\n            break;\n    }\n    return toBeProcessed;\n}\n\nint main()\n{\n    std::string out = optimize(\"abc123\", \"abc1\", 'x');\n    std::cout &lt;&lt; out;\n}\n</code></pre>\n\n<p>Live Example: <a href=\"http://ideone.com/RsB37f\" rel=\"nofollow\">http://ideone.com/RsB37f</a></p>\n\n<p>This has not been tested for all inputs, but this illustrates the basic point.  I am replacing the string in place, as opposed to creating a vector (or even a new string) and building a string from scratch.</p>\n\n<p>In addition, I passed the parameters by value, since it is advantageous to do this with a C++ 11 compliant compiler.  Even if you didn't have a C++ 11 compiler, you really don't lose anything by doing this, since in your original example, you were copying the passed-in strings to local variables.  </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 0, "creation_date": 1430974219, "post_id": 30087813, "comment_id": 48296867, "body": "Treating it as a bitmask is neat! Now I&#39;m tempted to compare it to the less cache-friendly <code>bool used[256]</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1431005213, "post_id": 30087813, "comment_id": 48316183, "body": "I would replace the vector with a std::string, and retest to see if the <code>+=</code> of a string is more efficient than a <code>vector::push_back</code>."}], "tags": [], "owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "is_accepted": false, "score": 3, "last_activity_date": 1430977641, "last_edit_date": 1430977641, "creation_date": 1430947460, "answer_id": 30087813, "question_id": 30086128, "link": "https://stackoverflow.com/questions/30086128/c-optimization-for-string-compare-and-replace/30087813#30087813", "title": "C++ Optimization for string compare and replace", "body": "<p>Note that <code>char</code> can hold only 256 values. You can just scan <code>ignored</code> string once, and populate a bitmask of characters that occur in it:</p>\n\n\n\n<pre><code>uint32_t bitmask[8] = {0};\nfor(int j = 0; j &lt; upperIgnored.size(); j++)\n{\n    uint8_t chr = static_cast&lt;uint8_t&gt;(upperIgnored[j]);\n    bitmask[chr &gt;&gt; 5] |= (1 &lt;&lt; (chr &amp; 31));\n}\n</code></pre>\n\n<p>After that instead of the inner loop just check the value of the bitmask:</p>\n\n<pre><code>for(int i = 0; i &lt; upperProcessed.size(); i++)\n{\n    uint8_t chr = static_cast&lt;uint8_t&gt;(upperProcessed[i]);\n    if(bitmask[chr &gt;&gt; 5] &amp; (1 &lt;&lt; (chr &amp; 31)))\n    {\n        vectorAfterProcessed.push_back(upperProcessed[i]);\n    }\n    else\n    {\n        vectorAfterProcessed.push_back(ch);\n    }\n}\n</code></pre>\n\n<p>Also note that your code had two other issues: your loops had their right end inclusive, which would very likely lead to a segfault/access violation, and you were not <code>break</code>ing after setting <code>found</code> to true, which would result in character being appended to the <code>processed</code> string multiple times if it occurs multiple times in the <code>ignored</code> string.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "is_accepted": false, "score": 1, "last_activity_date": 1455835845, "last_edit_date": 1455835845, "creation_date": 1430976277, "answer_id": 30092554, "question_id": 30086128, "link": "https://stackoverflow.com/questions/30086128/c-optimization-for-string-compare-and-replace/30092554#30092554", "title": "C++ Optimization for string compare and replace", "body": "<p>I was in the middle of arriving similar to Ishmael's solution, only I was tempted to just use the 256-byte boolean array as opposed to Ishamel's more cache-friendly 64-byte bitmask array.</p>\n\n<p>So I was really curious about how these perform against each other and whipped up a quick benchmark.</p>\n\n<h2>Benchmark Games</h2>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;cassert&gt;\n#include &lt;vector&gt;\n#include &lt;ctime&gt;\n#include &lt;cctype&gt;\n\nusing namespace std;    \n\nstatic string optimize_original(string&amp; toBeProcessed, const string&amp; toBeIgnored, char ch)\n{\n    string upperProcessed = toBeProcessed;\n    transform(upperProcessed.begin(), upperProcessed.end(), upperProcessed.begin(), ::toupper);\n    string upperIgnored = toBeIgnored;\n    transform(upperIgnored.begin(), upperIgnored.end(), upperIgnored.begin(), ::toupper);\n    vector&lt;char&gt; vectorAfterProcessed;\n    bool found;\n    for(size_t i = 0; i &lt;= upperProcessed.size(); i++)\n    {\n        found = false;\n        for(size_t j = 0; j &lt;= upperIgnored.size(); j++)\n        {\n            if(upperProcessed[i] == upperIgnored[j])\n            {\n                vectorAfterProcessed.push_back(upperProcessed[i]);\n                found = true;\n            }\n        }\n        if(found != true)\n            vectorAfterProcessed.push_back(ch);\n    }\n    return string(vectorAfterProcessed.begin(), vectorAfterProcessed.end());\n}\n\nstatic string optimize_paul(string toBeProcessed, string toBeIgnored, char ch)\n{\n    transform(toBeProcessed.begin(), toBeProcessed.end(), toBeProcessed.begin(), ::toupper);\n    transform(toBeIgnored.begin(), toBeIgnored.end(), toBeIgnored.begin(), ::toupper);\n    string test;\n    size_t start = 0;\n    while (start &lt; toBeProcessed.size())\n    {\n        size_t n = toBeProcessed.find_first_not_of(toBeIgnored, start);\n        if ( n != string::npos)\n        { \n            toBeProcessed[n] = ch;\n            start = n+1;\n        }\n        else\n            break;\n    }\n    return toBeProcessed;\n}\n\nstatic string optimize_ike(string input, const string&amp; to_keep, char rep)\n{\n    bool used[256] = {false};\n    for (size_t j=0; j &lt; to_keep.size(); ++j)\n    {\n        used[tolower(to_keep[j])] = true;\n        used[toupper(to_keep[j])] = true;\n    }\n    for (size_t j=0; j &lt; input.size(); ++j)\n    {\n        if (used[input[j]])\n            input[j] = toupper(input[j]);\n        else\n            input[j] = rep;\n    }\n    return input;\n}\n\nstatic string optimize_ishmael(string input, const string&amp; to_keep, char rep)\n{\n    uint32_t bitmask[8] = {0};\n    for (size_t j=0; j &lt; to_keep.size(); ++j)\n    {\n        const uint8_t lower = static_cast&lt;uint8_t&gt;(tolower(to_keep[j]));\n        bitmask[lower &gt;&gt; 5] |= (1 &lt;&lt; (lower &amp; 31));\n\n        const uint8_t upper = static_cast&lt;uint8_t&gt;(toupper(to_keep[j]));\n        bitmask[upper &gt;&gt; 5] |= (1 &lt;&lt; (upper &amp; 31));\n    }\n    for (size_t j=0; j &lt; input.size(); ++j)\n    {\n        const uint8_t chr = static_cast&lt;uint8_t&gt;(input[j]);\n        if (bitmask[chr &gt;&gt; 5] &amp; (1 &lt;&lt; (chr &amp; 31)))\n            input[j] = toupper(input[j]);\n        else\n            input[j] = rep;\n    }\n    return input;\n}\n\nstatic double sys_time()\n{\n    return static_cast&lt;double&gt;(clock()) / CLOCKS_PER_SEC;\n}\n\nenum {string_len = 10000000};\nenum {num_tests = 5};\n\nint main()\n{\n    const string to_keep = \"abcd\";\n    for (int k=0; k &lt; 5; ++k)\n    {\n        string in;\n        for (int j=0; j &lt; string_len; ++j)\n            in += rand() % 26 + 'A';\n\n        double time = sys_time();\n        volatile const string a = optimize_original(in, to_keep, '*');\n        cout &lt;&lt; ((sys_time() - time) * 1000) &lt;&lt; \" ms for original\" &lt;&lt; endl;\n\n        time = sys_time();\n        volatile const string b = optimize_paul(in, to_keep, '*');\n        cout &lt;&lt; ((sys_time() - time) * 1000) &lt;&lt; \" ms for Paul's\" &lt;&lt; endl;\n\n        time = sys_time();\n        volatile const string c = optimize_ike(in, to_keep, '*');\n        cout &lt;&lt; ((sys_time() - time) * 1000) &lt;&lt; \" ms for Ike's\" &lt;&lt; endl;\n\n        time = sys_time();\n        volatile const string d = optimize_ishmael(in, to_keep, '*');\n        cout &lt;&lt; ((sys_time() - time) * 1000) &lt;&lt; \" ms for Ishmael's\" &lt;&lt; endl;\n\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<h2>Results</h2>\n\n<pre><code>515 ms for original\n218 ms for Paul's\n78 ms for Ike's\n63 ms for Ishmael's\n\n514 ms for original\n203 ms for Paul's\n78 ms for Ike's\n73 ms for Ishmael's\n\n515 ms for original\n218 ms for Paul's\n78 ms for Ike's\n63 ms for Ishmael's\n\n515 ms for original\n202 ms for Paul's\n67 ms for Ike's\n62 ms for Ishmael's\n\n515 ms for original\n218 ms for Paul's\n78 ms for Ike's\n62 ms for Ishmael's\n</code></pre>\n\n<h2>Winner -- Ishamel</h2>\n\n<p>The winner appears to be Ishmael when it comes to speed, arriving at not only the theoretically fastest solution at O(N+M) [the original is O(N*M)] but also the most micro-efficient.</p>\n\n<p>I believe his solution is clearly superior to mine. I just wanted to offer the benchmarks comparing all of these for posterity.</p>\n\n<p>Paul's solution is perhaps the most elegant from a modern C++ perspective, utilizing what's available and standard to replace the inner loop with higher-level logic. Speed isn't always (or even usually) everything.</p>\n"}], "owner": {"reputation": 79, "user_id": 3027864, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9d851fdfe52337f00f95536f22a192ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3027864", "link": "https://stackoverflow.com/users/3027864/user3027864"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1455835845, "creation_date": 1430941438, "question_id": 30086128, "link": "https://stackoverflow.com/questions/30086128/c-optimization-for-string-compare-and-replace", "title": "C++ Optimization for string compare and replace", "body": "<p>I am trying to optimize this function I have written that compares two strings, then replaces the characters in the first string if they are not found in the second. Do you think, for example converting the string to a vector of chars when changing to uppercase would yield a performance boost? I can't see many ways around the 2 for loops however. Any general tips would be appreciated! </p>\n\n<pre><code>void optimize(std::string &amp; toBeProcessed, const std::string &amp; toBeIgnored, char ch)\n{\n    std::string upperProcessed = toBeProcessed;\n    std::transform(upperProcessed.begin(), upperProcessed.end(), upperProcessed.begin(), ::toupper);\n    std::string upperIgnored = toBeIgnored;\n    std::transform(upperIgnored.begin(), upperIgnored.end(), upperIgnored.begin(), ::toupper);\n    std::vector&lt;char&gt; vectorAfterProcessed;\n    bool found;\n    for(int i = 0; i &lt;= upperProcessed.size(); i++)\n    {\n        found = false;\n        for(int j = 0; j &lt;= upperIgnored.size(); j++)\n        {\n            if(upperProcessed[i] == upperIgnored[j])\n            {\n                vectorAfterProcessed.push_back(upperProcessed[i]);\n                found = true;\n            }\n        }\n        if(found != true)\n        {\n            vectorAfterProcessed.push_back(ch);\n        }\n    }\n    std::string test(vectorAfterProcessed.begin(), vectorAfterProcessed.end());\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "shader"], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 4051145, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99472d8e25426f77f5389c3cfcc829cc?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4051145/james"}, "edited": false, "score": 0, "creation_date": 1430941957, "post_id": 30086061, "comment_id": 48285663, "body": "For solution A: I currently don&#39;t have any normals. Does it make sense to add normals without adding a light source? Do I need a light source from a point?"}, {"owner": {"reputation": 247, "user_id": 4051145, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99472d8e25426f77f5389c3cfcc829cc?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4051145/james"}, "edited": false, "score": 0, "creation_date": 1430942252, "post_id": 30086061, "comment_id": 48285864, "body": "For solution C: I&#39;d like to do this, but I&#39;m not quite sure how to calculate it."}, {"owner": {"reputation": 6635, "user_id": 77764, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/K9VA7.png?s=128&g=1", "display_name": "Kromster", "link": "https://stackoverflow.com/users/77764/kromster"}, "reply_to_user": {"reputation": 247, "user_id": 4051145, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99472d8e25426f77f5389c3cfcc829cc?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4051145/james"}, "edited": false, "score": 0, "creation_date": 1430942909, "post_id": 30086061, "comment_id": 48286305, "body": "@acerd: A - I will fix answer now. C - you can pass uniform with low/high range of the object."}, {"owner": {"reputation": 247, "user_id": 4051145, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99472d8e25426f77f5389c3cfcc829cc?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4051145/james"}, "edited": false, "score": 0, "creation_date": 1430946253, "post_id": 30086061, "comment_id": 48288229, "body": "For C: Are you talking about using the diamond shaped prism and assigning colors based on the fragments height with relation to the triangle, or are you talking about covering the whole screen with two triangles whose pixels are colored with relation to their distance from the min or max? If you&#39;re talking about the second, I understand how I&#39;d get the color from the camera&#39;s y direction with relation to the min or max, but that would just be the color for the center of the screen. What about the pixels at the top of the screen?"}, {"owner": {"reputation": 247, "user_id": 4051145, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99472d8e25426f77f5389c3cfcc829cc?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4051145/james"}, "edited": false, "score": 0, "creation_date": 1430946653, "post_id": 30086061, "comment_id": 48288418, "body": "What would be the projected y value of the pixels at the top of the screen?"}, {"owner": {"reputation": 6635, "user_id": 77764, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/K9VA7.png?s=128&g=1", "display_name": "Kromster", "link": "https://stackoverflow.com/users/77764/kromster"}, "reply_to_user": {"reputation": 247, "user_id": 4051145, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99472d8e25426f77f5389c3cfcc829cc?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4051145/james"}, "edited": false, "score": 0, "creation_date": 1430982046, "post_id": 30086061, "comment_id": 48300268, "body": "@acerd: Please post a screen of what you have got working wrongly."}], "tags": [], "owner": {"reputation": 6635, "user_id": 77764, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/K9VA7.png?s=128&g=1", "display_name": "Kromster", "link": "https://stackoverflow.com/users/77764/kromster"}, "is_accepted": true, "score": 1, "last_activity_date": 1430942999, "last_edit_date": 1430942999, "creation_date": 1430941217, "answer_id": 30086061, "question_id": 30085923, "link": "https://stackoverflow.com/questions/30085923/how-can-i-make-this-spherical-gradient-in-an-opengl-fragment-shader/30086061#30086061", "title": "How can I make this spherical gradient in an OpenGL fragment shader?", "body": "<p>Solution A: Add more triangles. This way they will be less noticeable. Modern GPUs can render 3 or 3000 triangles just as easily in your case.</p>\n\n<p>Solution B: Apply a texture with a gradient to your \"diamond shaped prism\"</p>\n\n<p>Solution C: Write a custom fragment shader which will assign pixel color depending on vertical location</p>\n"}, {"tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": false, "score": 0, "last_activity_date": 1430988071, "last_edit_date": 1430988071, "creation_date": 1430987717, "answer_id": 30095845, "question_id": 30085923, "link": "https://stackoverflow.com/questions/30085923/how-can-i-make-this-spherical-gradient-in-an-opengl-fragment-shader/30095845#30095845", "title": "How can I make this spherical gradient in an OpenGL fragment shader?", "body": "<p>why not use y coordinate as color intensity instead of texture...</p>\n\n<ul>\n<li>in Players coordinate system it looks like this:</li>\n<li><img src=\"https://i.stack.imgur.com/HfAMN.png\" alt=\"overview\"></li>\n<li>so let <code>(0,0,0)</code> be the players position (center of sphere)</li>\n<li>let <code>r</code> be the radius of sphere</li>\n<li><p>So in Fragment shader compute the color like this:</p>\n\n<pre><code>float i=0.5f+(0.5f*y/r);\nif (i&gt;1.0f) i=1.0f; // white for out of sphere fragments\nif (i&lt;0.0f) i=1.0f; // here you could have 0.0 if triangles are outer not inner\nvec3 col; col=vec3(i,i,i);\n</code></pre></li>\n<li><p>do not forget that tis works only localy in Players coordinate system</p></li>\n</ul>\n\n<p>Now how to get rid of the triangulation artifacts?</p>\n\n<ul>\n<li>normalize the fragment coordinates before applying the above</li>\n<li>so let <code>vec3 p</code> be the rendered fragment position in player coordinate system</li>\n<li>you are rendering surface of the sphere so the distance from <code>(0,0,0)</code> should be <code>r</code></li>\n<li>so normalize the <code>p</code> to it</li>\n<li><code>p.xyz*=r/length(p);</code></li>\n<li>and now use <code>p.y</code></li>\n</ul>\n"}], "owner": {"reputation": 247, "user_id": 4051145, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99472d8e25426f77f5389c3cfcc829cc?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4051145/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 0, "accepted_answer_id": 30086061, "answer_count": 2, "score": 1, "last_activity_date": 1430988071, "creation_date": 1430940786, "last_edit_date": 1592644375, "question_id": 30085923, "link": "https://stackoverflow.com/questions/30085923/how-can-i-make-this-spherical-gradient-in-an-opengl-fragment-shader", "title": "How can I make this spherical gradient in an OpenGL fragment shader?", "body": "<p>I'm new to OpenGL. I'd like my background to look as if the player is inside the sphere pictured below. White as the player looks up, black as the player looks down, and a gradient along the way.</p>\n<p>I tried enclosing the camera in a diamond shaped prism and assigning white to the top vertex, gray to middles, and black to the bottom. But the seams of the triangles are very apparent, which I don't totally understand why. It seems overkill to make more vertices to better approximate a sphere. I feel like I should be able to do this all in the fragment shader, but don't know enough to implement it. I can pass the camera's y direction [-1,1] as a uniform to the shader.</p>\n<p>How can I implement this?</p>\n<p><img src=\"https://i.stack.imgur.com/wh4Ri.jpg\" alt=\"Sphere Gradient\" /></p>\n"}, {"tags": ["c++", "c", "dry"], "comments": [{"owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "edited": false, "score": 1, "creation_date": 1430941132, "post_id": 30085895, "comment_id": 48285151, "body": "See the second answer in <a href=\"http://stackoverflow.com/questions/4203010/how-to-initialize-member-struct-in-initializer-list-of-c-class\">this question</a>, it might help you do what you want."}, {"owner": {"reputation": 274, "user_id": 4852504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fZTb.jpg?s=128&g=1", "display_name": "Khaldor", "link": "https://stackoverflow.com/users/4852504/khaldor"}, "edited": false, "score": 0, "creation_date": 1430941408, "post_id": 30085895, "comment_id": 48285311, "body": "C or C++? And then, are you using va_args or how exactly do you pass the variables? Do you know how many you have? Or is it totally variable? I&#39;m guessing it is a fixed amount but could be wrong."}, {"owner": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "reply_to_user": {"reputation": 274, "user_id": 4852504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9fZTb.jpg?s=128&g=1", "display_name": "Khaldor", "link": "https://stackoverflow.com/users/4852504/khaldor"}, "edited": false, "score": 0, "creation_date": 1430942146, "post_id": 30085895, "comment_id": 48285793, "body": "@Khaldor, yes, it<code>s fixed amount. But it</code>s can be changed some time! And I want to achive two goals: I want to operate with object, where I can(it`s much more comfortable) and I want to get compilation error, when something goes wrong(for example additional filed in object structure without function interface changing). Qusteion about C++, but I think that if there any solution for plain C it will works for C++ as well."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430941111, "post_id": 30085985, "comment_id": 48285141, "body": "I think he is looking for the inverse. Given a <code>struct</code>, call a function using the members of the <code>struct</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430941264, "post_id": 30085985, "comment_id": 48285220, "body": "@RSahu I think the OP wants to create the struct from the function <code>solution to init structure from function args</code>"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 0, "creation_date": 1430941451, "post_id": 30085985, "comment_id": 48285341, "body": "@pvl I&#39;ve updated the post. Do you need an example of Boost Fusion usage?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1430941519, "post_id": 30085985, "comment_id": 48285386, "body": "@pvl so you also want to take all of the members of a struct and pass them as individual parameters to a function as well?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1430941699, "post_id": 30085985, "comment_id": 48285503, "body": "Haha, BOOST_FUSION_ADAPT_STRUCT is basically a (slightly) prettier version of my solution :)"}, {"owner": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1430941728, "post_id": 30085985, "comment_id": 48285525, "body": "@NathanOliver, yes, you are right. @polkovnikov.ph Thx. About &#39;further C++ versions&#39; - it<code>s just your guess or it</code>s officially already discussed somewhere?"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1430941831, "post_id": 30085985, "comment_id": 48285584, "body": "@nneonneo That&#39;s exactly the reason why I&#39;ve upvoted your answer :)"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "reply_to_user": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 1, "creation_date": 1430941932, "post_id": 30085985, "comment_id": 48285645, "body": "@pvl Yes, there&#39;s a mailing lists on several language proposals, and if I remember it right, it&#39;s called <code>SG7</code>. (Edit: <a href=\"https://groups.google.com/a/isocpp.org/forum/?fromgroups#!forum/reflection\" rel=\"nofollow noreferrer\">groups.google.com/a/isocpp.org/forum/?fromgroups#!forum/&hellip;</a>)."}], "tags": [], "owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "is_accepted": true, "score": 3, "last_activity_date": 1430941573, "last_edit_date": 1430941573, "creation_date": 1430940976, "answer_id": 30085985, "question_id": 30085895, "link": "https://stackoverflow.com/questions/30085895/the-best-way-to-split-struct-into-function-argument-list/30085985#30085985", "title": "The best way to split struct into function argument list", "body": "<p>Sure, but that's C++11.</p>\n\n<pre><code>struct xy {\n    int x, y;\n};\n\ntemplate &lt;class... T&gt;\nxy f(T... args) {\n    return xy{args...};\n}\n\nint main() {\n    xy a = f(1, 2);\n    cout &lt;&lt; a.y &lt;&lt; endl;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/JS2nQK\" rel=\"nofollow\">Live example.</a></p>\n\n<p>By \"sending structure into function\" it seems you meant you'd like to get each field from a structure in the order they've been declared and call a function with them as arguments. Sorry, but there's no pretty way to do that, because that requires <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3814.html\" rel=\"nofollow\">compile-time reflection</a>, which is a subject to addition in further C++ versions, but the syntax is not even clear yet.</p>\n\n<p>If you can use <code>tuple</code>s instead of structures, it's easy though.</p>\n\n<p>There's a not very much pretty way to do this if you absolutely need to. There's a Boost Fusion library. It allows adding reflection to <a href=\"http://www.boost.org/doc/libs/1_46_1/libs/fusion/doc/html/fusion/adapted/adapt_struct.html\" rel=\"nofollow\">structures</a> via macros, so that it's possible to convert them to tuples.</p>\n"}, {"comments": [{"owner": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 0, "creation_date": 1430941257, "post_id": 30086029, "comment_id": 48285215, "body": "OMG. Sorry, but that it isn`t pretty"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "reply_to_user": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 1, "creation_date": 1430941363, "post_id": 30086029, "comment_id": 48285280, "body": "Hey, I told you it wasn&#39;t pretty. But C++ doesn&#39;t have very strong introspection skills - I&#39;m pretty sure you cannot explode a struct into individual function arguments with the template system alone."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "reply_to_user": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "edited": false, "score": 0, "creation_date": 1430941458, "post_id": 30086029, "comment_id": 48285349, "body": "...but, it does work, and you can probably define yourself some more macros to make it prettier :P"}, {"owner": {"reputation": 5164, "user_id": 1872046, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2GC1B.jpg?s=128&g=1", "display_name": "polkovnikov.ph", "link": "https://stackoverflow.com/users/1872046/polkovnikov-ph"}, "edited": false, "score": 0, "creation_date": 1430941791, "post_id": 30086029, "comment_id": 48285558, "body": "Actually this IS a a prettiest solution to the problem (modulo the existence of some libraries that will help you avoid some boilerplate)."}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 3, "last_activity_date": 1430941296, "last_edit_date": 1430941296, "creation_date": 1430941121, "answer_id": 30086029, "question_id": 30085895, "link": "https://stackoverflow.com/questions/30085895/the-best-way-to-split-struct-into-function-argument-list/30086029#30086029", "title": "The best way to split struct into function argument list", "body": "<p>You can do it with macros. It's definitely not pretty, but it is highly compatible (works in C, C++03, etc.):</p>\n\n<p>In header file <code>args.h</code>:</p>\n\n<pre><code>#define ARGS_STRUCT ARG(int, arg1) SEP ARG(char *, arg2) SEP ARG(void *, arg3)\n#undef ARG\n#undef SEP\n</code></pre>\n\n<p>You can declare the struct as</p>\n\n<pre><code>struct Args {\n    #define ARG(type, name) type name\n    #define SEP ;\n    #include \"args.h\"\n};\n</code></pre>\n\n<p>and the function as</p>\n\n<pre><code>int func(\n    #define ARG(type, name) type name\n    #define SEP ,\n    #include \"args.h\"\n);\n</code></pre>\n\n<p>initialize the struct with</p>\n\n<pre><code>struct Args args = {\n    #define ARG(type, name) name\n    #define SEP ,\n    #include \"args.h\"\n};\n</code></pre>\n\n<p>pass in args with</p>\n\n<pre><code>struct Args args;\nfunc(\n    #define ARG(type, name) args.name\n    #define SEP ,\n    #include \"args.h\"\n);\n</code></pre>\n\n<p>Tested, no problems with Clang and Clang++ (both 6.1).</p>\n"}], "owner": {"reputation": 929, "user_id": 1189243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/447ac6ba6dc867442e3bf0b6efe0925a?s=128&d=identicon&r=PG&f=1", "display_name": "pvl", "link": "https://stackoverflow.com/users/1189243/pvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "accepted_answer_id": 30085985, "answer_count": 2, "score": 4, "last_activity_date": 1430942826, "creation_date": 1430940700, "question_id": 30085895, "link": "https://stackoverflow.com/questions/30085895/the-best-way-to-split-struct-into-function-argument-list", "title": "The best way to split struct into function argument list", "body": "<p>I have function like:</p>\n\n<pre><code>void funcName(arg1, arg2, arg3[ = someDefault], ... , argN)\n</code></pre>\n\n<p>And I have a struct like</p>\n\n<pre><code>struct Args\n{\n    arg1;\n    ...\n    argN;\n}\n</code></pre>\n\n<p>Is there any DRY and pretty solution to init structure from function args and to send structure into function if I can`t change function signature?</p>\n"}, {"tags": ["c++", "c++11", "lambda", "rvalue-reference", "stdbind"], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 4, "last_activity_date": 1430944416, "last_edit_date": 1495539938, "creation_date": 1430942890, "answer_id": 30086551, "question_id": 30085869, "link": "https://stackoverflow.com/questions/30085869/difference-between-stdasync-and-stdbind-when-wrapping-rvalue-reference-lambd/30086551#30086551", "title": "Difference between std::async and std::bind when wrapping rvalue reference lambda", "body": "<blockquote>\n  <p>I've <a href=\"https://stackoverflow.com/a/14913055/2297365\">read</a> that\n  <code>std::async</code> internally uses <code>std::bind</code>, so how does it get away with\n  rvalue reference parameters when <code>std::bind</code> does not?</p>\n</blockquote>\n\n<p>It doesn't use <code>bind</code> internally. (Or rather, it couldn't without going through some epic contortions like the one in <a href=\"https://stackoverflow.com/a/30084685/2756719\">@Praetorian's answer in that question</a>, and it's much easier to just write something separately).</p>\n\n<p>It is usually implemented using a somewhat <code>bind</code>-like machinery, but it's much simpler because it doesn't have to handle all sorts of weird things <code>bind</code> handles (nested <code>bind</code>s, placeholders, dropping extra arguments, etc.)</p>\n\n<blockquote>\n  <p>Is there a particular part of the standard that requires this behavior\n  or is this dependent on the compiler?</p>\n</blockquote>\n\n<p>It's required by the standard. The specification of <code>bind</code> is ridiculously dense, but does require plain bound arguments to be passed as lvalues ([func.bind.bind]/p10, bullet 4).</p>\n\n<p><code>async</code> is specified to call <code>INVOKE (DECAY_COPY (std::forward&lt;F&gt;(f)),\nDECAY_COPY (std::forward&lt;Args&gt;(args))...)</code>, and <code>DECAY_COPY</code> always returns an rvalue.</p>\n"}], "owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 30086551, "answer_count": 1, "score": 8, "last_activity_date": 1433957264, "creation_date": 1430940557, "last_edit_date": 1495541354, "question_id": 30085869, "link": "https://stackoverflow.com/questions/30085869/difference-between-stdasync-and-stdbind-when-wrapping-rvalue-reference-lambd", "title": "Difference between std::async and std::bind when wrapping rvalue reference lambda", "body": "<p>Inspired by this <a href=\"https://stackoverflow.com/questions/30084357/stdasync-using-an-rvalue-reference-bound-to-a-lambda#comment48282493_30084357\">comment</a> about binding lambdas with rvalue reference parameters directly to <code>std::async</code>, binding an rvalue to a lambda through <code>std::async</code> compiles and executes as expected: (<a href=\"http://coliru.stacked-crooked.com/a/67ce1197ec9f83f8\" rel=\"nofollow noreferrer\">live example</a>)</p>\n\n<pre><code>auto lambda = [] (std::string&amp;&amp; message) {\n    std::cout &lt;&lt; message &lt;&lt; std::endl;\n};\nauto future = std::async(lambda, std::string{\"hello world\"});\nfuture.get();\n</code></pre>\n\n<p>Using <code>std::bind</code>, however, triggers a compiler error: (<a href=\"http://coliru.stacked-crooked.com/a/6ae907b688a19fa2\" rel=\"nofollow noreferrer\">live example</a>)</p>\n\n<pre><code>auto lambda = [] (std::string&amp;&amp; message) {\n    std::cout &lt;&lt; message &lt;&lt; std::endl;\n};\nauto bound = std::bind(lambda, std::string{\"hello world\"}); // Compiler error\nbound();\n</code></pre>\n\n<p>This is because <code>std::bind</code> keeps <code>message</code> as an lvalue, so that when it passes it to the lambda, the argument no longer matches the parameter.</p>\n\n<p>I've <a href=\"https://stackoverflow.com/a/14913055/2297365\">read</a> that <code>std::async</code> internally uses <code>std::bind</code>, so how does it get away with rvalue reference parameters when <code>std::bind</code> does not? Is there a particular part of the standard that requires this behavior or is this dependent on the compiler?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1430940273, "post_id": 30085755, "comment_id": 48284666, "body": "If you want to scramble a string you should use <a href=\"http://en.cppreference.com/w/cpp/algorithm/random_shuffle\" rel=\"nofollow noreferrer\"><code>std::random_suffle()</code></a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3813238"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1430940309, "post_id": 30085755, "comment_id": 48284687, "body": "Yes in algorithm include, but I don&#39;t want use a ready function."}, {"owner": {"reputation": 1921, "user_id": 583447, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/a6cGr.jpg?s=128&g=1", "display_name": "Erik S", "link": "https://stackoverflow.com/users/583447/erik-s"}, "edited": false, "score": 0, "creation_date": 1430940427, "post_id": 30085755, "comment_id": 48284752, "body": "So what results <i>are</i> you getting, if not errors or warnings? Are the strings not shuffled? Do they return empty, or duplicated?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1430940486, "post_id": 30085755, "comment_id": 48284786, "body": "Possible duplicate: <a href=\"http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=4&amp;cad=rja&amp;uact=8&amp;ved=0CDIQFjAD&amp;url=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F8364597%2Fshuffling-string&amp;ei=_WpKVaLCLdTjoASQvIHgBQ&amp;usg=AFQjCNGD5pNHfNO63AqbkL9YF32vPhcQqQ&amp;sig2=B_f1ro0MJshc9E5OabbBEg&amp;bvm=bv.92291466,d.cGU\" rel=\"nofollow noreferrer\">Shuffling a string</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3813238"}, "edited": false, "score": 0, "creation_date": 1430940503, "post_id": 30085755, "comment_id": 48284800, "body": "When I put a string I have :  std::out_of_range"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1430940517, "post_id": 30085755, "comment_id": 48284809, "body": "I think you are using the character value of your random letter as the index for the character you want to erase. I think you need to keep a note of your random position <code>getNbr(gen)</code> and use <i>that</i> as the character to <code>erase()</code>."}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 1, "creation_date": 1430940694, "post_id": 30085755, "comment_id": 48284935, "body": "maybe it should be <code>uniform_int_distribution&lt;&gt; getNbr(0, mot.size()-1);</code> ?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1430941046, "post_id": 30085755, "comment_id": 48285105, "body": "Also your <code>for()</code> loop won&#39;t work because the size of your word <code>mot</code> keeps changing."}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1430941245, "post_id": 30085755, "comment_id": 48285210, "body": "@galik is right it should be <code>while(mot.size())</code>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1430941462, "post_id": 30085755, "comment_id": 48285359, "body": "Why all the down votes? OP made a genuine effort and has provided his code."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3813238"}, "edited": false, "score": 0, "creation_date": 1430941799, "post_id": 30086089, "comment_id": 48285563, "body": "Oh yes the problem was the for loop ! Thank&#39;s you so much :)"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 1, "last_activity_date": 1430941299, "creation_date": 1430941299, "answer_id": 30086089, "question_id": 30085755, "link": "https://stackoverflow.com/questions/30085755/how-mix-up-a-word-c/30086089#30086089", "title": "How mix up a word ? C++", "body": "<p>You are using the character value of your random letter as the index for the character you want to erase. I think you need to keep a note of your random position <code>getNbr(gen)</code> and use that as the character to <code>erase()</code>.</p>\n\n<p>Also your <code>for()</code> loop won't work because the size of your word <code>mot</code> keeps changing.</p>\n\n<p>Finally your integer distribution is an <em>inclusive</em> range.</p>\n\n<p>This is with the above corrections:</p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt; // need this\n\nusing namespace std;\n\nstring melangeLettre(string mot);\nint main()\n{\n    cout &lt;&lt; \"Saisissez un mot mystere: \\n&gt; \";\n    string motMystere{};\n    cin &gt;&gt; motMystere;\n\n    cout &lt;&lt; \"Quel est ce mot ?\\n\";\n    string const newMot{melangeLettre(motMystere)};\n    cout &lt;&lt; newMot &lt;&lt; endl;\n\n    return {0};\n}\n\nstring melangeLettre(string mot)\n{\n    size_t random = chrono::system_clock::now().time_since_epoch().count();\n    mt19937 gen{random};\n    string newMot;\n\n//    for (unsigned int i{}; i &lt; mot.size(); ++i)\n    while(!mot.empty()) // mot keeps changing size so use this\n    {\n//        uniform_int_distribution&lt;&gt; getNbr(0, mot.size());\n        uniform_int_distribution&lt;&gt; getNbr(0, mot.size() - 1); // range inclusive!\n\n        auto pos {getNbr(gen)}; // store the position of the letter\n        auto alea {mot[pos]};\n\n        newMot.push_back(alea);\n        mot.erase(pos, 1); // erase the letter from the stored position\n    }\n\n    return newMot;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3813238"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "accepted_answer_id": 30086089, "answer_count": 1, "score": -3, "last_activity_date": 1430941299, "creation_date": 1430940098, "last_edit_date": 1430940562, "question_id": 30085755, "link": "https://stackoverflow.com/questions/30085755/how-mix-up-a-word-c", "title": "How mix up a word ? C++", "body": "<p>I just can't mix up my word, it's getting me anything I don't want.\nI have no errors, no warnings but Whe I put a string I have std::out_of_range</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;random&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\n\nstring melangeLettre(string mot);\nint main()\n{\n    cout &lt;&lt; \"Saisissez un mot mystere: \\n&gt; \";\n    string motMystere{};\n    cin &gt;&gt; motMystere;\n\n    cout &lt;&lt; \"Quel est ce mot ?\\n\";\n    string const newMot{melangeLettre(motMystere)};\n    cout &lt;&lt; newMot &lt;&lt; endl;\n\n    return {0};\n}\n\nstring melangeLettre(string mot)\n{\n    size_t random = chrono::system_clock::now().time_since_epoch().count();\n    mt19937 gen{random};\n    string newMot{};\n\n    for (unsigned int i{}; i &lt; mot.size(); ++i)\n    {\n        uniform_int_distribution&lt;&gt; getNbr(0, mot.size());\n        int const alea{mot[getNbr(gen)]};\n\n        newMot.push_back(alea);\n        mot.erase(alea, 1);\n    }\n\n    return newMot;\n}\n</code></pre>\n\n<p>The problem is on ' melangeLettre ' function, please someone can help me to resolve this ?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "ffmpeg", "instrumentation"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9420398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rsghN.png?s=128&g=1", "display_name": "Nick Doran", "link": "https://stackoverflow.com/users/9420398/nick-doran"}, "is_accepted": false, "score": 0, "last_activity_date": 1529451489, "creation_date": 1529451489, "answer_id": 50938282, "question_id": 30085697, "link": "https://stackoverflow.com/questions/30085697/warning-vsp2005-error-vsp1048-when-instrumenting-c-code-dynamically-linked-t/50938282#50938282", "title": "Warning VSP2005 &amp; Error VSP1048 when instrumenting C++ code dynamically linked to FFMPEG", "body": "<p>I ran into the same issue.  I was able to get some useful data by using the CPU Usage tool, rather than CPU Instrumentation.</p>\n"}], "owner": {"reputation": 21, "user_id": 4871935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d581b8d76567825862ad6ca76f27d4d6?s=128&d=identicon&r=PG&f=1", "display_name": "TTJG", "link": "https://stackoverflow.com/users/4871935/ttjg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1529451489, "creation_date": 1430939902, "question_id": 30085697, "link": "https://stackoverflow.com/questions/30085697/warning-vsp2005-error-vsp1048-when-instrumenting-c-code-dynamically-linked-t", "title": "Warning VSP2005 &amp; Error VSP1048 when instrumenting C++ code dynamically linked to FFMPEG", "body": "<p>I am trying to profile my project with the Instrumentation profiler of Visual Studio 2013 Ultimate. I have a 64bit C++ project which is dynamically linked to FFMPEG. However, the profiler is giving me the following error <code>Error VSP1048: Internal instrumentation error</code>. I don't want to profile FFMPEG but only analyze the performance of my code. I downloaded the pre-built FFMPEG libs from this site <a href=\"http://ffmpeg.zeranoe.com/builds/\" rel=\"nofollow\">ffmpeg.zeranoe.com/builds/</a>. The project is also linking against Boost, live555 and x264. It is running and debugging fine. The full output of the profiler is:</p>\n\n<pre><code>Profiling started.\nInstrumenting ...\\Player.exe in place\nInfo VSP3049: Small functions will be excluded from instrumentation.\nMicrosoft (R) VSInstr Post-Link Instrumentation 12.0.21005 x64\nCopyright (C) Microsoft Corp. All rights reserved.\nWarning VSP2005: Internal instrumentation warning: The object '...\\ffmpeg-20150506-git-a2190de-win64-dev\\lib\\avutil.lib(dbyqh.o)' was built without debug information.\nFile to Process:\n\\Player.exe --&gt; ...\\Player.exe\nOriginal file backed up to ...\\Player.exe.orig\nWarning VSP2005: Internal instrumentation warning: The object '...\\ffmpeg-20150506-git-a2190de-win64-dev\\lib\\avutil.lib(dbyqh.o)' was built without debug information.\nError VSP1048: Internal instrumentation error.\nPRF0002: Instrumentation failed with these options: /u \"...\\Player.exe\"   /excludesmallfuncs.  Please check the output window for additional details.\nData written to ...\\Player150506.vsp.\nProfiling finished.\nFile contains no data buffers\nFile contains no data buffers\nAnalysis failed\nProfiling complete.\n</code></pre>\n\n<p>Any ideas how this could be solved? I have found very little about this issue on the Internet.</p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430940607, "post_id": 30085669, "comment_id": 48284875, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19842035/stdmap-how-to-sort-by-value-then-by-key\">std::map, how to sort by value, then by key</a>"}], "answers": [{"tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": true, "score": 3, "last_activity_date": 1430940356, "last_edit_date": 1430940356, "creation_date": 1430940055, "answer_id": 30085738, "question_id": 30085669, "link": "https://stackoverflow.com/questions/30085669/c-sort-map-by-value-numerically-key-alphabetically/30085738#30085738", "title": "C++ Sort Map By Value Numerically, Key Alphabetically", "body": "<p>Not sure why you're using <code>std::partial_sort</code> here - it's meant for sorting only part of the input. Try <code>std::stable_sort</code> instead: it will sort the input, but will not affect the order of elements that compare equal. This gives you what you want since your input <code>map</code> is already sorted by increasing alphabetical key:</p>\n\n<pre><code>struct IntCmp {\n    bool operator()(const mypair &amp;lhs, const mypair &amp;rhs) {\n        return lhs.second &gt; rhs.second; // note reversed comparison here to sort by descending order\n    }\n};\n\nvoid printmap(const std::map&lt;std::string,int&gt; &amp;mymap, int size) {\n    std::vector&lt;mypair&gt; myvec(mymap.begin(), mymap.end());\n    assert(myvec.size() &gt;= size);\n    std::stable_sort(myvec.begin(), myvec.end(), IntCmp());\n\n    // note we now iterate forwards because the sort comparison is reversed\n    for(const auto &amp;item : myvec) {\n        std::cout &lt;&lt; item.first &lt;&lt; \" \" &lt;&lt; item.second &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Alternatively, you could alter your comparison function to compare both the value and the key, and use a plain <code>std::sort</code>:</p>\n\n<pre><code>struct IntCmp {\n    bool operator()(const mypair &amp;lhs, const mypair &amp;rhs) {\n        if(lhs.second == rhs.second) return lhs.first &lt; rhs.first; // this is the \"secondary\" comparison, used if the frequencies are equal\n        return lhs.second &gt; rhs.second; // note reversed comparison here to sort by descending order\n    }\n};\n\nvoid printmap(const std::map&lt;std::string,int&gt; &amp;mymap, int size) {\n    std::vector&lt;mypair&gt; myvec(mymap.begin(), mymap.end());\n    assert(myvec.size() &gt;= size);\n    std::sort(myvec.begin(), myvec.end(), IntCmp());\n\n    // note we now iterate forwards because the sort comparison is reversed\n    for(const auto &amp;item : myvec) {\n        std::cout &lt;&lt; item.first &lt;&lt; \" \" &lt;&lt; item.second &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 316, "user_id": 3272903, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ba7dba3b99f98de0e6851665ef6b5826?s=128&d=identicon&r=PG&f=1", "display_name": "BryanLavinParmenter", "link": "https://stackoverflow.com/users/3272903/bryanlavinparmenter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3654, "favorite_count": 0, "accepted_answer_id": 30085738, "answer_count": 1, "score": 0, "last_activity_date": 1430940356, "creation_date": 1430939773, "question_id": 30085669, "link": "https://stackoverflow.com/questions/30085669/c-sort-map-by-value-numerically-key-alphabetically", "title": "C++ Sort Map By Value Numerically, Key Alphabetically", "body": "<p>I'm trying to make this frequency table with c++, and my code is below.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n#include &lt;cassert&gt;\n\nusing namespace std;\n\ntypedef std::pair&lt;std::string, int&gt; mypair;\n\nstruct IntCmp {\n    bool operator()(const mypair &amp;lhs, const mypair &amp;rhs) {\n        return lhs.second &lt; rhs.second;\n    }\n};\n\nstring removeSpaces(string input) {\n    input.erase(std::remove(input.begin(),input.end(),' '),input.end());\n    input.erase(std::remove(input.begin(), input.end(), '\\t'), input.end());\n    input.erase(std::remove(input.begin(), input.end(), '.'), input.end());\n    return input;\n}\n\nvoid printmap(const std::map&lt;std::string,int&gt; &amp;mymap, int size) {\n    std::vector&lt;mypair&gt; myvec(mymap.begin(), mymap.end());\n    assert(myvec.size() &gt;= size);\n    std::partial_sort(myvec.begin(), myvec.begin() + size, myvec.end(), IntCmp());\n\n    for(int i = size; i --&gt; 0;) {\n        std::cout &lt;&lt; myvec[i].first &lt;&lt; \" \" &lt;&lt; myvec[i].second &lt;&lt; \"\\n\";\n    }\n}\n\nint main() {\n    string str;\n\n    cout &lt;&lt; \"Enter text:\\n\";\n    cin &gt;&gt; str;\n    cout &lt;&lt; \"Frequencies:\\n\";\n\n    str = \"do be do bo.\";\n\n    str = removeSpaces(str);\n    int size = str.size();\n    string *array = new string[size];\n    for(int i = 0; i &lt; size; ++i) {\n        array[i] = str[i];\n    }\n    sort(array, array+size);\n    map&lt;int, string&gt; mymap;\n    for(int i = 0; i &lt; size; ++i) {\n        mymap[i] = array[i];\n    }\n    map&lt;string, int&gt; freq;\n    for(int i = 0; i &lt; size; ++i) {\n        if(freq.count(mymap[i]) == 0) {\n            //Not found\n            freq[mymap[i]] = 1;\n        }\n        else {\n            //Found\n            freq.at(mymap[i]) = freq.at(mymap[i]) + 1;\n        }\n    }\n    int mapsize = freq.size();\n    printmap(freq, mapsize);\n}\n</code></pre>\n\n<p>When I run the code with the <code>str</code> given as <code>do be do bo.</code>, the output is as follows</p>\n\n<pre><code>o 3\nd 2\nb 2\ne 1\n</code></pre>\n\n<p>So here's my thought process.</p>\n\n<p>I take the input <code>str</code> and put it in an array, and sort that array alphabetically, and then put that array into the map <code>mymap</code>. Then, I take <code>mymap</code> and get the frequency of each string and put the letters as the keys and the frequency as the values in the map <code>freq</code>. Then, I use the <code>printmap()</code> function to order the map by value descending.</p>\n\n<p>However, when I do this, the keys are randomly ordered. So, for example, in the string presented above, <code>b 2</code> is printed out after <code>d 2</code>, even though they were in order when I gave the <code>freq</code> map to the <code>printmap()</code> function.</p>\n\n<p>Essentially, I'm looking for a way to sort the map in the <code>printmap()</code> function by value, and then by key, so the results are printed out by descending value and alphabetical key.</p>\n\n<p>The desired result for the <code>do be do bo.</code> is as follows:</p>\n\n<pre><code>o 3\nb 2\nd 2\ne 1\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "struct", "iterator", "private"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1430939353, "post_id": 30085503, "comment_id": 48284077, "body": "You know the difference between a class in C++ and a struct, right? It&#39;s almost none. That said, I&#39;d postpone the template parts until later, they are not necessary to answer your question but they complicate the issue."}, {"owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1430939504, "post_id": 30085503, "comment_id": 48284179, "body": "What I mean is making them actual classes with their own header files...then including them.  But lets not get side tracked"}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1430940034, "post_id": 30085649, "comment_id": 48284508, "body": "Adding the structs as described gives a syntax error in Element: Error\t1\terror C2059: syntax error : &#39;&lt;&#39; ..no error if templetized!"}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 1, "creation_date": 1430940182, "post_id": 30085649, "comment_id": 48284606, "body": "do you still have lines like <code>Iterator(Element&lt;T&gt;* e = nullptr) : elem(e) {}</code> ? These should be replaced with <code>Iterator(Element *e = nullptr) : elem(e){}</code> etc."}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 1, "creation_date": 1430940213, "post_id": 30085649, "comment_id": 48284624, "body": "Similarly <code>Iterator&lt;T&gt;&amp; operator+(const int val)</code> becomes <code>Iterator&amp; operator+(...)</code>"}, {"owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1430941837, "post_id": 30085649, "comment_id": 48285585, "body": "Many thanks guys, I kept Iterator public made Element private &amp; forward declared Element like so: &quot;class Element;&quot; @EyasSh if you add this to your answer code I&#39;ll accept it!"}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "reply_to_user": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "edited": false, "score": 0, "creation_date": 1430943390, "post_id": 30085649, "comment_id": 48286618, "body": "I modified the answer accordingly."}], "tags": [], "owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "is_accepted": true, "score": 3, "last_activity_date": 1430943351, "last_edit_date": 1430943351, "creation_date": 1430939694, "answer_id": 30085649, "question_id": 30085503, "link": "https://stackoverflow.com/questions/30085503/implementing-private-structs-in-class/30085649#30085649", "title": "Implementing: private structs in Class", "body": "<p>As far as \"elegance\" is concerned, redundant <code>typename</code> declarations seem to be the biggest issue:</p>\n\n<p>If you have a nested class or struct, you don't need to templetize it; it is already bound to the templetized <code>typename T</code> declaration.</p>\n\n<p>So:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass List {\npublic:\n    struct Element;\n    struct Iterator;\nprivate:\n};\n</code></pre>\n\n<p>Allows you to do:</p>\n\n<pre><code>List&lt;int&gt; x;\nList&lt;int&gt;::iterator iter ( x.begin() );\n</code></pre>\n\n<p>Since <code>Iterator</code> is being returned in a public method, it cannot be marked <code>private</code>. <code>Element</code>, on the other hand, is purely an implementation detail and can be marked private. You need to make sure that it is declared before any method that uses it <em>or</em> is simply forward declared.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass List {\nprivate:\n    struct Element; // or struct Element { &lt;impl&gt; };\npublic:\n    struct Iterator { &lt; impl &gt; };\nprivate:\n};\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 668180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/12f3241ea33a5817f8ad86fb4e161479?s=128&d=identicon&r=PG&f=1", "display_name": "tuk", "link": "https://stackoverflow.com/users/668180/tuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 30085649, "answer_count": 1, "score": 1, "last_activity_date": 1430943351, "creation_date": 1430939205, "question_id": 30085503, "link": "https://stackoverflow.com/questions/30085503/implementing-private-structs-in-class", "title": "Implementing: private structs in Class", "body": "<p>I have a List class which uses two objects: Element &amp; Iterator</p>\n\n<p>I considered making Element &amp; Iterator classes but decided on structs.</p>\n\n<h2>V1. This works...</h2>\n\n<pre><code>template &lt;class T&gt;\nstruct Element\n\ntemplate &lt;class T&gt;\nstruct Iterator\n\n\n\ntemplate &lt;typename T&gt;\nclass List {\n\npublic: \n\ntypedef Iterator&lt;T&gt; iterator;\n\n\nprivate:\n\n};\n</code></pre>\n\n<p>Which allows a List iterator as you might expect: </p>\n\n<pre><code>List&lt;int&gt; list;\nList&lt;int&gt;::iterator iter = list.begin();\n</code></pre>\n\n<h2>V2. Another way is to declare the structs inside the class</h2>\n\n<pre><code>template &lt;typename T&gt;\nclass List {\n\npublic:\n\n    template &lt;class T&gt;\n    struct Element\n\n    template &lt;class T&gt;\n    struct Iterator\n\n\nprivate:\n\n\n};\n</code></pre>\n\n<p>However having to include the second &lt;> when creating iterator is a little less elegant &amp; structs are public: </p>\n\n<pre><code>List&lt;int&gt; list;\nList&lt;int&gt;::Iterator&lt;int&gt; iter = list.begin();\n</code></pre>\n\n<h2>V3. Involves making the structs private, which is preferable:</h2>\n\n<pre><code>template &lt;class T&gt;\nclass Iterator;\n\n\ntemplate &lt;typename T&gt;\nclass List {\n\npublic:\n\n\ntypedef Iterator&lt;T&gt; iterator;\n\nprivate:\n\ntemplate &lt;class T&gt;\nstruct Element\n\ntemplate &lt;class T&gt;\nstruct Iterator\n\n};\n</code></pre>\n\n<p>.</p>\n\n<pre><code>List&lt;int&gt; list;\nList&lt;int&gt;::iterator iter list.begin();\n\nError 1 error C2079: 'begin' uses undefined class 'Iterator&lt;T&gt;'  main.cpp   216\n</code></pre>\n\n<h2>Question:</h2>\n\n<p>How do I make structs private, allow public access to Iterator &amp; keep the <strong>List::iterator</strong> syntax ?</p>\n\n<p>eg List::iterator iter list.begin();</p>\n\n<p>note: \nIterator depends on Element</p>\n\n<p>code:</p>\n\n<pre><code>#ifndef GUARD_List_h\n#define GUARD_List_h\n\ntemplate &lt;class T&gt;\nstruct Element {\n\n    Element() : prev(nullptr), next(nullptr), data(), t_flag(\" \") {}\n\n    Element&lt;T&gt;* prev;\n    Element&lt;T&gt;* next;\n\n    T data;\n    int elem_ID;\n    std::string t_flag;\n};\n\ntemplate &lt;class T&gt;\nstruct Iterator {\n\n    Iterator(Element&lt;T&gt;* e = nullptr) : elem(e) {}\n\n    T&amp; operator*(void) const {\n\n        if (elem-&gt;t_flag == \"sentinel\"){ std::cerr &lt;&lt; \"No Element to De-Reference - End of List Reached\"; }\n\n        return elem-&gt;data;\n    }\n\n    T&amp; operator++(void) {           // ++prefix\n\n        elem = elem-&gt;next;\n        return elem-&gt;data;\n    }\n    T operator++(const int) {               // postfix++\n\n        elem = elem-&gt;next;\n        return elem-&gt;prev-&gt;data;\n    }\n    T&amp; operator--(const int) {          // --prefix\n\n        elem = elem-&gt;prev;\n        return elem-&gt;data;\n    }\n    T operator--(void) {            // postfix--\n\n        elem = elem-&gt;prev;\n        return elem-&gt;next-&gt;data;\n    }\n\n    Iterator&lt;T&gt;&amp; operator+(const int val) {\n\n        for (int i = 0; i &lt; val; i++){\n\n            elem = elem-&gt;next;\n        }\n        return *this;\n    }\n    Iterator&lt;T&gt;&amp; operator-(const int val) {\n\n        for (int i = 0; i &lt; val; i++){\n\n            elem = elem-&gt;prev;\n        }\n        return *this;\n    }\n\n    bool operator!=(const Iterator&lt;T&gt;&amp; rhs) const {\n\n        return elem-&gt;elem_ID != rhs.elem-&gt;elem_ID;\n    }\n    bool operator==(const Iterator&lt;T&gt;&amp; rhs) const {\n\n        return elem-&gt;elem_ID == rhs.elem-&gt;elem_ID;\n    }\n    bool operator&gt;(const Iterator&lt;T&gt;&amp; rhs) const {\n\n        return elem-&gt;elem_ID &gt; rhs.elem-&gt;elem_ID;\n    }\n    bool operator&lt;(const Iterator&lt;T&gt;&amp; rhs) const {\n\n        return elem-&gt;elem_ID &lt; rhs.elem-&gt;elem_ID;\n    }\n    bool operator&gt;=(const Iterator&lt;T&gt;&amp; rhs) const {\n\n        return elem-&gt;elem_ID &gt;= rhs.elem-&gt;elem_ID;\n    }\n    bool operator&lt;=(const Iterator&lt;T&gt;&amp; rhs) const {\n\n        return elem-&gt;elem_ID &lt;= rhs.elem-&gt;elem_ID;\n    }\n\n\n    Element&lt;T&gt;* elem;\n\n};\n\n\n\n\ntemplate &lt;typename T&gt;\nclass List {\n\npublic:\n    List() : sentinel(new Element&lt;T&gt;), Element_count(0)  {\n\n        sentinel-&gt;t_flag = \"sentinel\";\n\n        // double link: sentinel to itself\n        sentinel-&gt;next = sentinel;\n        sentinel-&gt;prev = sentinel;\n\n    }\n    virtual ~List()  {\n\n        Element&lt;T&gt;* index = sentinel-&gt;next;\n        Element&lt;T&gt;* index_next = sentinel-&gt;next-&gt;next;\n\n        while (index-&gt;t_flag != \"sentinel\"){\n\n            delete index;\n            index = index_next;\n            index_next = index_next-&gt;next;\n        }\n        delete sentinel;        \n    }\n\n\n    typedef Iterator&lt;T&gt; iterator;   \n\n\n    Iterator&lt;T&gt; begin(void) const {\n\n        Iterator&lt;T&gt; it(sentinel-&gt;next);\n        return it;\n    }\n    Iterator&lt;T&gt; end(void) const {\n\n        Iterator&lt;T&gt; it(sentinel);\n        return it;\n    }\n\n    void push_back(const T val)  {\n\n        Element&lt;T&gt;* elem = new Element&lt;T&gt;;      // create Element&lt;T&gt; object         \n        elem-&gt;data = val;                       // set Element&lt;T&gt; data\n\n        sentinel-&gt;prev-&gt;next = elem;            // link: end of List to Element object\n        elem-&gt;prev = sentinel-&gt;prev;            // link: Element object to end of List   \n\n        elem-&gt;next = sentinel;                  // link: new end of List to sentinel    \n        sentinel-&gt;prev = elem;                  // link: sentinel to new end of List                \n\n        elem-&gt;elem_ID = Element_count++;        // update: Element_count on grow        \n    }\n    T at(const size_t pos)  const {\n\n        return get_Element(pos)-&gt;data;\n    }\n    void del(const size_t pos) const  {\n\n        Element&lt;T&gt;* elem = get_Element(pos);    // get: Element for deletion        \n\n        elem-&gt;prev-&gt;next = elem-&gt;next;          // rejoin: double link\n        elem-&gt;next-&gt;prev = elem-&gt;prev;          // rejoin: double link\n\n        delete elem;\n\n        Element_count--;                        // update: Element_count on shrink\n\n    }\n    void clear(void) {\n\n        Element&lt;T&gt;* index = sentinel-&gt;next;\n        Element&lt;T&gt;* index_next = sentinel-&gt;next-&gt;next;\n\n        while (index-&gt;t_flag != \"sentinel\"){\n\n            delete index;\n            index = index_next;\n            index_next = index_next-&gt;next;\n        }\n\n        // double link: sentinel to itself\n        sentinel-&gt;next = sentinel;\n        sentinel-&gt;prev = sentinel;\n\n        Element_count = 0;\n\n    }\n\n    size_t size(void) const {\n        return Element_count;\n    }\n    bool empty(void) const {\n\n        if (Element_count == 0){ return true; }\n        else { return false; }\n    }\n\n\nprivate:\n\n\n\n    Element&lt;T&gt;* sentinel;                         // List sentinel\n    size_t Element_count;                         // List size\n\n    Element&lt;T&gt;* get_Element(const size_t pos) const     {\n\n        if (empty())                        {\n            std::cerr &lt;&lt; \"No Element - Empty List\";\n            throw;          \n        }\n        if (pos &lt; 0 || pos &gt;= Element_count){\n            std::cerr &lt;&lt; \"No Element - Out of Range\";\n            throw;          \n        }\n\n\n        Iterator&lt;T&gt; it;\n\n        if ((Element_count / 2) &gt; pos) {                        // Determine efficent direction ? \n\n            it = begin()+1;\n            while ( it.elem-&gt;elem_ID != pos ){  it++;   }\n        }\n        else {\n\n            it = end()-1;                           \n            while ( it.elem-&gt;elem_ID != pos ){  it--;   }\n        }\n\n        return it.elem;\n    }\n\n\n\n\n};\n#endif\n</code></pre>\n"}, {"tags": ["c++", "cmake", "cocos2d-x", "release", "cocos2d-x-3.0"], "comments": [{"owner": {"reputation": 104, "user_id": 1158719, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/e8lUe.jpg?s=128&g=1", "display_name": "Furkanzmc", "link": "https://stackoverflow.com/users/1158719/furkanzmc"}, "edited": false, "score": 0, "creation_date": 1431613363, "post_id": 30085393, "comment_id": 48580985, "body": "I managed to get a detailed stack log. Here it is --&gt; <a href=\"https://paste.kde.org/pqttvvxkm\" rel=\"nofollow noreferrer\">paste.kde.org/pqttvvxkm</a>"}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 1158719, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/e8lUe.jpg?s=128&g=1", "display_name": "Furkanzmc", "link": "https://stackoverflow.com/users/1158719/furkanzmc"}, "is_accepted": false, "score": 0, "last_activity_date": 1432213431, "creation_date": 1432213431, "answer_id": 30374621, "question_id": 30085393, "link": "https://stackoverflow.com/questions/30085393/cocos2dx-v3-4-release-mode-error/30374621#30374621", "title": "Cocos2dx v3.4 Release Mode Error", "body": "<p>I figured out the problem. It appears that there's a problem with the way I pre-load assets into my game. In the <code>TitleScreen::init()</code> I use this function to load assets.\n<code>GameManager::getInstance()-&gt;getResourceManager()-&gt;loadTextures(\"GameScene\", callback);</code>\nAnd here's the implementation for the <code>CocosResourceManager::loadTextures()</code></p>\n\n<pre><code>void CocosResourceManager::loadTextures(const std::string &amp;sceneName, const std::function&lt;void(std::string sceneName, int loadedAssetCount, int totalAssetCount)&gt; &amp;callback)\n{\n    std::map&lt;std::string, std::string&gt; assets = parseAssetsArray(sceneName);\n    int totalAsset = assets.size(), loadedAsset = 0;\n    for (auto value : assets) {\n        TextureCache::getInstance()-&gt;addImage(value.second);\n        loadedAsset++;\n        callback(sceneName, loadedAsset, totalAsset);\n    }\n}\n</code></pre>\n\n<p>When I don't pe-load the assets with that function, there's no crash in release mode. When I pre-load them, I have it with the stack trace I previously posted above. This happens with both <code>TextureCache::getInstance()-&gt;addImageAsync();</code> and <code>TextureCache::getInstance()-&gt;addImage();</code>\nAm I pre-loading the wrong way? Can anybody explain why this is happening?</p>\n"}], "owner": {"reputation": 104, "user_id": 1158719, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/e8lUe.jpg?s=128&g=1", "display_name": "Furkanzmc", "link": "https://stackoverflow.com/users/1158719/furkanzmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432237644, "creation_date": 1430938830, "last_edit_date": 1432237644, "question_id": 30085393, "link": "https://stackoverflow.com/questions/30085393/cocos2dx-v3-4-release-mode-error", "title": "Cocos2dx v3.4 Release Mode Error", "body": "<p>I'm trying to build my game on release mode using CMake. I disabled DEBUG_MODE and successfully built the project but when I run it I get an error I don't get in debug mode.<img src=\"https://i.stack.imgur.com/X5b5y.png\" alt=\"Error Message\"></p>\n\n<p>Here's the call stack.</p>\n\n<pre><code>KernelBase.dll!763d2f71()   Unknown\n    [Frames below may be incorrect and/or missing, no symbols loaded for KernelBase.dll]    \n    [External Code] \n&gt;   SortingGame.exe!BackgroundBuilder::configureTimeLabel(const cocos2d::Vec2 timeContainerEndPos) Line 236 C++\n    SortingGame.exe!BackgroundBuilder::configureTimeContainerSprite() Line 226  C++\n    SortingGame.exe!GameScene::configureTimeContainerSprite() Line 352  C++\n    SortingGame.exe!GameScene::configureScene() Line 210    C++\n    SortingGame.exe!GameScene::init() Line 130  C++\n    SortingGame.exe!GameScene::create() Line 25 C++\n    SortingGame.exe!LoadingScreen::onKeyPressed(cocos2d::EventKeyboard::KeyCode keyCode, cocos2d::Event * event) Line 168   C++\n    [External Code] \n    SortingGame.exe!wWinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, wchar_t * lpCmdLine, int nCmdShow) Line 24   C++\n    [External Code]\n</code></pre>\n\n<p><code>BackgroundBuilder::configureTimeContainerSprite()</code> function gets called only once. If I call <code>BackgroundBuilder::configureTimeContainerSprite()</code> in <code>BackgroundBuilder::BackgroundBuilder()</code> the error doesn't occur in <code>BackgroundBuilder::configureTimeContainerSprite()</code> but in main.cpp file's <code>return Application::getInstance()-&gt;run();</code> line. The error is the same here too.\nI get the same error when I build the project with Visual Studio 2013.</p>\n"}, {"tags": ["c++", "boost", "boost-multi-array"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "edited": false, "score": 0, "creation_date": 1431043040, "post_id": 30088413, "comment_id": 48338011, "body": "That looks like it will work. I am wrapping the multi_array, so I can just hide that stuff and keep all outside code the same. Thanks."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1430949730, "creation_date": 1430949730, "answer_id": 30088413, "question_id": 30085357, "link": "https://stackoverflow.com/questions/30085357/resizing-boostmulti-array-to-match-another/30088413#30088413", "title": "resizing boost::multi_array to match another", "body": "<p>You can use the <code>shape()</code> member. Sadly  it cannot directly serve as an <code>ExtentList</code> (it doesn't model the <code>Collection</code> concept) but it's easy to make it into one:</p>\n\n<pre><code>using MA = multi_array&lt;double, 2&gt;;\nMA ma(extents[12][34]);\nauto&amp; ma_shape = reinterpret_cast&lt;boost::array&lt;size_t, MA::dimensionality&gt; const&amp;&gt;(*ma.shape());\n</code></pre>\n\n<p>So that</p>\n\n<pre><code>// demo\nstd::cout &lt;&lt; \"[\" &lt;&lt; ma_shape[0] &lt;&lt; \"][\" &lt;&lt; ma_shape[1] &lt;&lt; \"]\\n\";\n</code></pre>\n\n<p>Prints <code>[12][34]</code>.</p>\n\n<p>Now, <code>ma_shape</code> can directly be used to reshape/resize another array:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/b5b5570384f2a80e\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/multi_array.hpp&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    using namespace boost;\n    using MA = multi_array&lt;double, 2&gt;;\n\n    MA ma(extents[12][34]);\n    auto&amp; ma_shape = reinterpret_cast&lt;boost::array&lt;size_t, MA::dimensionality&gt; const&amp;&gt;(*ma.shape());\n\n    // demo\n    std::cout &lt;&lt; \"[\" &lt;&lt; ma_shape[0] &lt;&lt; \"][\" &lt;&lt; ma_shape[1] &lt;&lt; \"]\\n\";\n\n    // resize\n    MA other;\n    assert(!std::equal(ma_shape.begin(), ma_shape.end(), other.shape()));\n\n    other.resize(ma_shape);\n    assert(std::equal(ma_shape.begin(), ma_shape.end(), other.shape()));\n\n    // reshape\n    other.resize(extents[1][12*34]);\n    assert(!std::equal(ma_shape.begin(), ma_shape.end(), other.shape()));\n\n    other.reshape(ma_shape);\n    assert(std::equal(ma_shape.begin(), ma_shape.end(), other.shape()));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "is_accepted": false, "score": 0, "last_activity_date": 1435861311, "creation_date": 1435861311, "answer_id": 31191902, "question_id": 30085357, "link": "https://stackoverflow.com/questions/30085357/resizing-boostmulti-array-to-match-another/31191902#31191902", "title": "resizing boost::multi_array to match another", "body": "<p>I think this is another oversight of Boost.MultiArray. I have written a bunch of \"utility\" functions that allows to take the shape (dimension sizes), base indices (e.g. 0 or 1 for each dimension) and extensions (base indices and sizes in each dimension).</p>\n\n<pre><code>namespace boost{\ntemplate&lt;class MultiArray&gt;\ndetail::multi_array::extent_gen&lt;MultiArray::dimensionality&gt;\nextension(MultiArray const&amp; ma){ //this function is adapted from \n    typedef detail::multi_array::extent_gen&lt;MultiArray::dimensionality&gt; gen_type;\n    gen_type ret;\n    typedef typename gen_type::range range_type;\n    for(int i=0; i != MultiArray::dimensionality; ++i)\n        ret.ranges_[i] = range_type(ma.index_bases()[i], ma.index_bases()[i]+ma.shape()[i]);\n    return ret;\n}\n}\n</code></pre>\n\n<p>Which is later used as:</p>\n\n<pre><code>boost::multi::array&lt;double, 3&gt; m(boost::multi::extents[3][4][5]);\nboost::multi::array&lt;double, 3&gt; n(extension(m)); // n takes the extension (and shape) of m\n</code></pre>\n\n<p>(If the base indexes are not zero it also works. It works also for view and other multi_array-type classes.)</p>\n"}], "owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 968, "favorite_count": 1, "accepted_answer_id": 30088413, "answer_count": 2, "score": 2, "last_activity_date": 1435861311, "creation_date": 1430938751, "question_id": 30085357, "link": "https://stackoverflow.com/questions/30085357/resizing-boostmulti-array-to-match-another", "title": "resizing boost::multi_array to match another", "body": "<p>I need to resize one multi_array to the size of another.</p>\n\n<p>In Blitz++ I could just do </p>\n\n<p><code>arr1.resize(arr2.shape());</code></p>\n\n<p>Is there a multi_array solution of similar length? Because</p>\n\n<p><code>arr1.resize(boost::extents[arr2.shape()[0]][arr2.shape()[1]]);</code></p>\n\n<p>seems a little long and arduous.</p>\n"}, {"tags": ["c++", "multithreading", "signals"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430939052, "post_id": 30085274, "comment_id": 48283898, "body": "There&#39;s things like <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_sigmask.html\" rel=\"nofollow noreferrer\"><code>pthread_sigmask(), sigprocmask</code></a>, though that stuff is OS dependent."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1430939112, "post_id": 30085274, "comment_id": 48283925, "body": "<a href=\"http://stackoverflow.com/questions/5282099/signal-handling-in-pthreads\" title=\"signal handling in pthreads\">stackoverflow.com/questions/5282099/signal-handling-in-pthre&zwnj;&#8203;ads</a> <a href=\"http://stackoverflow.com/questions/2575106/posix-threads-and-signals\" title=\"posix threads and signals\">stackoverflow.com/questions/2575106/posix-threads-and-signal&zwnj;&#8203;s</a>"}, {"owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "edited": false, "score": 0, "creation_date": 1430939391, "post_id": 30085274, "comment_id": 48284106, "body": "My vague understanding, also, is that signal-handlers are thread specific.  I honestly don&#39;t remember if a signal raised by a thread will be caught by another thread, or if the thread that raised it (if <i>it</i> does not have a signal-handler itself) will treat it as an &quot;uncaught signal.&quot; I&#39;d experiment by putting some trace-messages in various places to see if you can piece-together what happens on <i>your</i> system."}, {"owner": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "edited": false, "score": 0, "creation_date": 1430949818, "post_id": 30085274, "comment_id": 48289957, "body": "Why aren&#39;t you using C++ threads? There is a standard for that..."}], "owner": {"reputation": 2982, "user_id": 976766, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/812753feeddc1aa93f23b1e0d733b7b5?s=128&d=identicon&r=PG", "display_name": "g4ur4v", "link": "https://stackoverflow.com/users/976766/g4ur4v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430938480, "creation_date": 1430938480, "question_id": 30085274, "link": "https://stackoverflow.com/questions/30085274/c-threads-and-signal-handling", "title": "c++ | Threads and Signal Handling", "body": "<p>I am trying to understand threads and signal handling .\nPlease help me understand what difference does it make if I call the <code>signal</code> inside <code>main</code> or the <code>function</code> I am using to create a thread ?</p>\n\n<pre><code># include &lt;iostream&gt;\n# include &lt;cstdlib&gt;\n# include &lt;pthread.h&gt;\n# include &lt;string.h&gt;\n# include &lt;csignal&gt;\nusing namespace std;\nvoid signalHandler( int signum )\n{\n    cout &lt;&lt;\"\\n&gt;&gt; Interrupt signal (\" &lt;&lt; signum &lt;&lt; \") received.\";\n    cout &lt;&lt;\"\\n&gt;&gt; Release all the resources.\";\n    cout &lt;&lt;\"\\n&gt;&gt; Going down.\\n\"; \n\n    // cleanup and close up stuff here  \n    // terminate program  \n    exit(signum);  \n\n}\n\nvoid *ShellThread(void *threadid)\n{\n    //signal(SIGINT, signalHandler);  // 1) signal inside the thread function\n    string InputToShell;\n    while(1)\n    {\n        cout&lt;&lt;\"\\n&gt;&gt; \";\n        getline(cin, InputToShell);\n        cout&lt;&lt;\"Input received\"&lt;&lt;InputToShell;\n    }\n\n    pthread_exit(NULL);\n}\n\nint main(int argc, char const *argv[])\n{\n    signal(SIGINT, signalHandler);  // 2) Signal inside the main function\n    pthread_t MainShell;\n    int rc;\n\n    rc = pthread_create(&amp;MainShell, NULL, ShellThread, (void *)1);\n\n    if(rc)\n    {\n        cout&lt;&lt;\"Unable to create thread\";\n    }\n    pthread_exit(NULL); \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "overloading"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1430938569, "post_id": 30085154, "comment_id": 48283605, "body": "You need to read a bit about <i>proxy classes</i>"}, {"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430944914, "post_id": 30085154, "comment_id": 48287528, "body": "Yes - I have learned about proxy classes today - and overloading the assignment operator; which I have generally been a bit reluctant to do."}, {"owner": {"reputation": 1142, "user_id": 2116585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20805c944e8cb258aec761ac61440e6f?s=128&d=identicon&r=PG", "display_name": "nic", "link": "https://stackoverflow.com/users/2116585/nic"}, "edited": false, "score": 0, "creation_date": 1430945795, "post_id": 30085154, "comment_id": 48287993, "body": "This may or may not be viable for your solution, but you should think about the frequency of transformations versus the frequency of boolean accesses. If you are primarily using the set/get/[] functions and rarely using the SPECIAL_*_VALUE transformation, it may be easier to just store the bools, then transform only when needed."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1430943073, "post_id": 30085294, "comment_id": 48286407, "body": "In response to an edit attempt by @user1978011 : I made that private on purpose.  The <code>friend class Class</code> should allow <code>Class</code> to construct <code>pseudo_reference</code>s."}, {"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "edited": false, "score": 0, "creation_date": 1430944625, "post_id": 30085294, "comment_id": 48287354, "body": "OK - I think I understand how it works? You will instantiate a pseudo_reference for every access to the <code>set()</code> method? That does seem a bit heavy weight?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "edited": false, "score": 1, "creation_date": 1430945098, "post_id": 30085294, "comment_id": 48287616, "body": "@user422005 it is a pointer (to <code>Class</code>) and a <code>size_t</code>.  How is that heavy weight?  A reference is typically implemented (if not inlined out of existence) as a pointer, so we are talking only a few more bytes that returning a reference to the data.  A compiler worth its salt can inline it out of existence, as it only lives long enough to call <code>set</code> or <code>get</code> on the pointer anyhow.  Do profiling with optimization against the raw call to <code>get</code> or <code>set</code> and I&#39;d be shocked if there was much difference.  small stack objects that go away immediately are <b>cheap</b>."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430946677, "post_id": 30085294, "comment_id": 48288427, "body": "@Yakk, can you do instead of <code>bool operator[](size_t i)const</code> something like <code>operator bool() const</code>? In this way, you convert the proxy to a <code>bool</code> whenever one deals with rvalue access. I remember seeing this kind of conversion used when read via a proxy, but want to double check."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430947002, "post_id": 30085294, "comment_id": 48288584, "body": "@vsoftco A <code>const_proxy</code> is a different type than a <code>proxy</code> in general (it isn&#39;t just a <code>const proxy</code> -- sort of like pointers, a <code>const pointer</code> is different than a <code>pointer to const</code>).  Rather than write a fancy class that just called <code>get</code> deferred, I made <code>[] const</code> return the value directly.  Seems simpler, no?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1430947337, "post_id": 30085294, "comment_id": 48288735, "body": "@Yakk ohhh ok, actually you do have an <code>operator bool()const</code> in <code>pseudo_reference</code>. I misread your code, I meant a conversion to <code>bool</code> in the proxy class, but you have it. Nice usage of rvalue overload <code>&amp;&amp;</code> also!"}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430947696, "post_id": 30085294, "comment_id": 48288903, "body": "Sorry about that. I copied the code and it didn&#39;t compile with the private constructor. I messes up the friend declaration. Can you comment on the <code>const&amp;&amp;</code> syntax ? I have never seen it so far. Thx and my apologies again.."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430948172, "post_id": 30085294, "comment_id": 48289154, "body": "@user1978011 make sure you compiler with C++11 support (<code>-std=c++11</code> for g++/clang++). That syntax means that the function is overloaded for rvalues (and actually disabled for lvalues). See e.g. <a href=\"http://stackoverflow.com/questions/21052377/whats-a-use-case-for-overloading-member-functions-on-reference-qualifiers\" title=\"whats a use case for overloading member functions on reference qualifiers\">stackoverflow.com/questions/21052377/&hellip;</a>"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 7, "last_activity_date": 1430943171, "last_edit_date": 1430943171, "creation_date": 1430938534, "answer_id": 30085294, "question_id": 30085154, "link": "https://stackoverflow.com/questions/30085154/c-overload-with-transformation/30085294#30085294", "title": "C++ overload[] with transformation", "body": "<pre><code>struct pseudo_reference {\n  operator bool()const&amp;&amp;{\n    return c-&gt;get(index);\n  }\n  pseudo_reference operator=(bool b)&amp;&amp;{\n    c-&gt;set(index, b);\n    return {c,index};\n  }\n\n  // sometimes having named functions is useful:\n  bool get() const&amp;&amp; {\n    return std::move(*this);\n  }\n  void set(bool b)&amp;&amp; {\n    std::move(*this) = b;\n  }\n  pseudo_reference()=delete;\nprivate:\n  Class* c;\n  size_t index;\n  pseudo_reference(pseudo_reference&amp;&amp;o)=default; // not exposed\n  pseudo_reference(Class* pc, size_t i):c(pc),index(i){}\n  friend class Class;\n};\n</code></pre>\n\n<p>In <code>Class</code>:</p>\n\n<pre><code>pseudo_reference operator[](size_t i){\n  return {this, i};\n}\nbool operator[](size_t i)const{\n  return c_ptr[index] == SPECIAL_TRUE_VALUE;\n}\n</code></pre>\n\n<p>I stored both a pointer and an index, so I avoid reimplementing the logic of <code>get</code>/<code>set</code> in my <code>pseudo_reference</code>.  Such <code>pseudo_references</code> are likely to be short-lived, so size optimization probably isn't important.</p>\n\n<p>I blocked all non-rvalue operations to discourage storing a <code>pseudo_reference</code>.  You can make said operations non-rvalue restricted relatively harmlessly, but in my experience <code>pseudo_references</code> are values that behave like references, so it is better if they don't persist.</p>\n\n<p>Someone can still store a <code>pseudo_reference</code> via <code>auto&amp;&amp; x = c[33];</code>, but using it without <code>move</code>ing it won't be possible.  Hopefully that catches <em>most</em> error-prone uses of it.  <code>auto x = c[33];</code> won't work.</p>\n"}, {"tags": [], "owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "is_accepted": false, "score": 1, "last_activity_date": 1430943693, "last_edit_date": 1430943693, "creation_date": 1430938601, "answer_id": 30085316, "question_id": 30085154, "link": "https://stackoverflow.com/questions/30085154/c-overload-with-transformation/30085316#30085316", "title": "C++ overload[] with transformation", "body": "<p>You can return a wrapper helper class which handles assignment for you.</p>\n\n<pre><code>struct WrapMe {\n    c_ptr_T &amp;value;\n    WrapMe(c_ptr_T &amp;_value) : value(_value) {}\n    // handles assignment of bool values\n    WrapMe &amp; operator=(const bool b) {\n       value = (b) ? SPECIAL_TRUE_VALUE : SPECIAL_FALSE_VALUE;\n       return *this;\n    }\n    // handles cast to bool\n    operator bool() const { return value == SPECIAL_TRUE_VALUE; }\n};\n\nclass Class {\n   WrapMe operator[](const int idx) { return WrapMe(c_ptr[idx]); }\n   // ...\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "is_accepted": false, "score": 2, "last_activity_date": 1430950243, "last_edit_date": 1430950243, "creation_date": 1430938760, "answer_id": 30085364, "question_id": 30085154, "link": "https://stackoverflow.com/questions/30085154/c-overload-with-transformation/30085364#30085364", "title": "C++ overload[] with transformation", "body": "<p>To implement <code>operator[]()</code>, you need to return a proxy object that does the actual assignment when it appears on the left-hand-side of <code>=</code>:</p>\n\n<pre><code>struct proxy {\n    proxy&amp; operator=( bool value ) {\n        c_.c_ptr[ index_ ] = value ? SPECIAL_TRUE_VALUE : SPECIAL_FALSE_VALUE;\n        return *this;\n    }\n    operator bool() const { // for when it's just used normally, not =\n        return c_ptr[ index ] == SPECIAL_TRUE_VALUE;\n    }\nprivate:\n    Class &amp;c_;\n    size_t const index_;\n    proxy( Class &amp;c, size_t index ) : c_( c ), index_( index ) { }\n    friend class Class;\n}\n\nclass Class {\npublic:\n    proxy operator[]( size_t index ) {\n        return proxy( *this, index );\n    }\n    bool operator[]( size_t index ) const { // read-only access is easy\n        return c_ptr[ index ] == SPECIAL_TRUE_VALUE;\n    }\n    // ...\n};\n</code></pre>\n\n<p>Or something like that.</p>\n"}], "owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "accepted_answer_id": 30085294, "answer_count": 3, "score": 7, "last_activity_date": 1430950243, "creation_date": 1430938102, "question_id": 30085154, "link": "https://stackoverflow.com/questions/30085154/c-overload-with-transformation", "title": "C++ overload[] with transformation", "body": "<p>I have a C datastructure representing a vector of boolean values; for reasons outside of my control the bools' are stored internally as integers with two magical values (not 0 and 1 ...) representing true and false. I have created a C++ class wrapping this C structure, and it works nicely. I have implemented the <code>set()</code>and <code>get()</code>methods as:</p>\n\n<pre><code>void Class::set(size_t index , bool value) {\n     if (value)\n        c_ptr[index] = SPECIAL_TRUE_VALUE;\n     else\n        c_ptr[index] = SPECIAL_FALSE_VALUE;\n}\n</code></pre>\n\n<p>This works ok; but ideally I would like to overload operator[], however it is not clear to me how/if I can do that - due to special transformation between bool and the integer values?</p>\n"}, {"tags": ["c++", "opencv", "roi", "opticalflow"], "answers": [{"tags": [], "owner": {"reputation": 475, "user_id": 2139216, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8b153e14ff523a9feb65bb6100a5fd36?s=128&d=identicon&r=PG&f=1", "display_name": "Thom", "link": "https://stackoverflow.com/users/2139216/thom"}, "is_accepted": false, "score": 0, "last_activity_date": 1432649073, "creation_date": 1432649073, "answer_id": 30460880, "question_id": 30084992, "link": "https://stackoverflow.com/questions/30084992/roi-based-klt-optical-tracker-in-opencv/30460880#30460880", "title": "ROI-based KLT optical tracker in opencv", "body": "<p>Here is what I use in those cases :</p>\n\n<pre><code>void SelectNewTemplate(int event, int posx, int posy, int flags, void* userdata)\n{\n    if( event == EVENT_MBUTTONDOWN )\n    {\n        waitKey();\n    }\n    if( event == CV_EVENT_LBUTTONDOWN )\n    {\n        x1pt = posx;\n        y1pt = posy;\n    }\n    if( event == CV_EVENT_LBUTTONUP )\n    {\n        x2pt = posx;\n        y2pt = posy;\n\n        Rect newTemp(x1pt, y1pt, (x2pt - x1pt), (y2pt - y1pt));\n        Mat imgROI = frame(newTemp);\n    }\n}\n</code></pre>\n\n<p>Usage : pausing the video with middle mouse button, then left clic, drag and let go, press any key to keep going.</p>\n\n<hr>\n\n<p>After that you can compute your features on your new ROI image : <code>imgROI</code>.</p>\n\n<p>Hope that helps,\nThomas</p>\n"}], "owner": {"reputation": 11, "user_id": 4871033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad96e56e34bd436ca0e76f9ac075ba20?s=128&d=identicon&r=PG&f=1", "display_name": "v  sadegh", "link": "https://stackoverflow.com/users/4871033/v-sadegh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2387, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432649073, "creation_date": 1430937566, "last_edit_date": 1431190998, "question_id": 30084992, "link": "https://stackoverflow.com/questions/30084992/roi-based-klt-optical-tracker-in-opencv", "title": "ROI-based KLT optical tracker in opencv", "body": "<p>How can I add roi-based selection in lkdemo.pp( klt optical flow tracker opencv example) source code?\nI want select roi in the first frame and track feature point that selected in roi.</p>\n\n<pre><code>#include \"opencv2/video/tracking.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n\n#include &lt;iostream&gt;\n#include &lt;ctype.h&gt;\n\nusing namespace cv;\nusing namespace std;\n\nstatic void help()\n{\n    // print a welcome message, and the OpenCV version\n    cout &lt;&lt; \"\\nThis is a demo of Lukas-Kanade optical flow lkdemo(),\\n\"\n            \"Using OpenCV version \" &lt;&lt; CV_VERSION &lt;&lt; endl;\n\n}\n\nPoint2f point;\nbool addRemovePt = false;\n\nstatic void onMouse( int event, int x, int y, int , void* )\n{\n    if( event == CV_EVENT_LBUTTONDOWN )\n    {\n        point = Point2f((float)x, (float)y);\n        addRemovePt = true;\n    }\n}\n\nint main( int argc, char** argv )\n{\n    help();\n\n    VideoCapture cap(CV_CAP_ANY);\n    TermCriteria termcrit(CV_TERMCRIT_ITER|CV_TERMCRIT_EPS, 20, 0.03);\n    Size subPixWinSize(10,10), winSize(61,61);\n\n    const int MAX_COUNT = 500;\n    bool needToInit = false;\n    bool nightMode = false;\n\n    //if( argc == 1 || (argc == 2 &amp;&amp; strlen(argv[1]) == 1 &amp;&amp; isdigit(argv[1][0])))\n        //cap.open(argc == 2 ? argv[1][0] - '0' : 0);\n    //else if( argc == 2 )\n        //cap.open(argv[1]);\n\n    if( !cap.isOpened() )\n    {\n        cout &lt;&lt; \"Could not initialize capturing...\\n\";\n        return 0;\n    }\n\n    namedWindow( \"LK Demo\", 1 );\n    setMouseCallback( \"LK Demo\", onMouse, 0 );\n\n    Mat gray, prevGray, image;\n    vector&lt;Point2f&gt; points[2];\n\n    for(;;)\n    {\n        Mat frame;\n        cap &gt;&gt; frame;\n        if( frame.empty() )\n            break;\n\n        frame.copyTo(image);\n        cvtColor(image, gray, COLOR_RGB2GRAY);\n\n        if( nightMode )\n            image = Scalar::all(0);\n\n        if( needToInit )\n        {\n            // automatic initialization\n            goodFeaturesToTrack(gray, points[1], MAX_COUNT, 0.01, 10, Mat(), 3, 0, 0.04);\n            cornerSubPix(gray, points[1], subPixWinSize, Size(-1,-1), termcrit);\n            addRemovePt = false;\n        }\n        else if( !points[0].empty() )\n        {\n            vector&lt;uchar&gt; status;\n            vector&lt;float&gt; err;\n            if(prevGray.empty())\n                gray.copyTo(prevGray);\n            calcOpticalFlowPyrLK(prevGray, gray, points[0], points[1], status, err, winSize,10, termcrit, 0, 0.001);\n            size_t i, k;\n            for( i = k = 0; i &lt; points[1].size(); i++ )\n            {\n                if( addRemovePt )\n                {\n                    if( norm(point - points[1][i]) &lt;= 5 )\n                    {\n                        addRemovePt = false;\n                        continue;\n                    }\n                }\n\n                if( !status[i] )\n                    continue;\n\n                points[1][k++] = points[1][i];\n                circle( image, points[1][i], 3, Scalar(0,255,0), -1, 8);\n            }\n            points[1].resize(k);\n        }\n\n        if( addRemovePt &amp;&amp; points[1].size() &lt; (size_t)MAX_COUNT )\n        {\n            vector&lt;Point2f&gt; tmp;\n            tmp.push_back(point);\n            cornerSubPix( gray, tmp, winSize, cvSize(-1,-1), termcrit);\n            points[1].push_back(tmp[0]);\n            addRemovePt = false;\n        }\n\n        needToInit = false;\n        imshow(\"LK Demo\", image);\n\n        char c = (char)waitKey(10);\n        if( c == 27 )\n            break;\n        switch( c )\n        {\n        case 'r':\n            needToInit = true;\n            break;\n        case 'c':\n            points[0].clear();\n            points[1].clear();\n            break;\n        case 'n':\n            nightMode = !nightMode;\n            break;\n        }\n\n        std::swap(points[1], points[0]);\n        cv::swap(prevGray, gray);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "runtime", "big-o"], "answers": [{"tags": [], "owner": {"reputation": 18, "user_id": 4847911, "user_type": "registered", "profile_image": "https://graph.facebook.com/1073028532712094/picture?type=large", "display_name": "Sergio Adri&#225;n Lagunas Pinacho", "link": "https://stackoverflow.com/users/4847911/sergio-adri%c3%a1n-lagunas-pinacho"}, "is_accepted": true, "score": 0, "last_activity_date": 1430951714, "last_edit_date": 1430951714, "creation_date": 1430939306, "answer_id": 30085544, "question_id": 30084938, "link": "https://stackoverflow.com/questions/30084938/counting-the-basic-operations-of-a-given-program/30085544#30085544", "title": "Counting the basic operations of a given program", "body": "<p>When the article you are following says \"for var &lt;- 0 to var2\", it is like \"for (var = 0; var &lt;= var2; var++), so yes, when i = 0, it enters the \"for\" twice (once when i = 0, and again when i = 1, then it goes out).\n(Sorry if bad english)</p>\n\n<p>Edit and improve: When I calculate the complexity of a program, the only thing that interest me is the big O complexity; in this case, you have that the 'i' loop run 'n' times, and the 'j' loop run 'i' times, so the 'i' loop runs (1+2+3+...+n) times, that is n(n+1)/2 times, and that is an O(n**2) complexity.</p>\n\n<p>In the first line, you have an assignament (i = something), and a comparison (i &lt;= n-1) (\"2 operations\") for each i value, and as the last value is i=n, it does those 2 operations since i=0, until i=n, and as those are n+1 values (from 0 to n), this line do 2(n+1) operations.</p>\n\n<p>The second line is a little obvious, as it enters the loop n times (since i=0, until i=n-1).</p>\n\n<p>On the second loop, it do 2 things, an assignament, and a comparison (just as the first loop), and it do this i+2 times (for example, when i=0, it enters the loop 1 time, but it has to do the i=1 assignament, and the 1&lt;=0 comparison, so its 2 times in total), so it do this calculus 2(i+2) times, but it do this since i=0, until i=n-1, so to calculate all of this, we have to do the sum (sum from i=0 until i=n-1: 2(i+2)) = 2((sum of i from 0 to n-1) + (sum of 2 from i=0 to i=n-1)) = 2((n(n-1)/2) + 2n) = n(n-1) + 4n = n\"2 - n + 4n = n\"2 + 3n.</p>\n\n<p>I'll continue this later, I hope my answer so far is helpful for you. (again, sorry if some bad english)</p>\n"}], "owner": {"reputation": 3670, "user_id": 2681057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c2135aa4c462b83c2844bf35d03c447?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Chapman", "link": "https://stackoverflow.com/users/2681057/nick-chapman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 1, "accepted_answer_id": 30085544, "answer_count": 1, "score": 0, "last_activity_date": 1430951714, "creation_date": 1430937384, "last_edit_date": 1592644375, "question_id": 30084938, "link": "https://stackoverflow.com/questions/30084938/counting-the-basic-operations-of-a-given-program", "title": "Counting the basic operations of a given program", "body": "<p>I am looking at the following: <a href=\"https://drive.google.com/file/d/0BwKWMjrtkjUwa3NCaTh6M2FWemM/view?usp=sharing\" rel=\"nofollow noreferrer\">Operations Counting Example</a></p>\n<p>Which is supposed to present the operations count of the following pseudocode:</p>\n<pre><code>Algorithm prefixAverages(A)\n Input array A of n numbers\n Output array B of n numbers such that B[i] is the average\n of elements A[0], A[1], \u2026 , A[i]\n\nfor i = 0 to n - 1 do\n   b = 0\n   for j = 0 to i do\n       b = b + A[j]\n       j++;\n   B[i] = b / (i + 1)\nreturn B\n</code></pre>\n<p>But I don't see how the counts on the inner for loop are reached. It says that for case <code>i=0; j=0;</code> the inner for loop runs twice? But it strikes me that it should only run once to see that <code>0 &lt; 0</code>. Can anyone provide insight into where the given operations count comes from or provide their own operations count?</p>\n<p>This is under the assumption that primitive operations are:</p>\n<ul>\n<li>Assignment</li>\n<li>Array access</li>\n<li>Mathematical operators (+, -, /, *)</li>\n<li>Comparison</li>\n<li>Increment/Decrement (math in disguise)</li>\n<li>Return statements</li>\n</ul>\n<p>Let me know if anything is unclear or you need more information</p>\n"}, {"tags": ["c++", "winapi", "flicker", "regions"], "comments": [{"owner": {"reputation": 6964, "user_id": 2261657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de05cbfc9a0fbef64f55eb69e761bee5?s=128&d=identicon&r=PG", "display_name": "\u03b3\u03b7\u03c1\u03ac\u03c3\u03ba\u03c9 \u03b4&#39; \u03b1\u03b5\u03af \u03c0\u03bf\u03bb\u03bb\u03ac \u03b4\u03b9\u03b4\u03b1\u03c3\u03ba\u03cc\u03bc\u03b5", "link": "https://stackoverflow.com/users/2261657/%ce%b3%ce%b7%cf%81%ce%ac%cf%83%ce%ba%cf%89-%ce%b4-%ce%b1%ce%b5%ce%af-%cf%80%ce%bf%ce%bb%ce%bb%ce%ac-%ce%b4%ce%b9%ce%b4%ce%b1%cf%83%ce%ba%cf%8c%ce%bc%ce%b5"}, "edited": false, "score": 0, "creation_date": 1430942099, "post_id": 30084855, "comment_id": 48285761, "body": "I can not understand what you are trying to do but in win7 parts of the window that you <b>do not</b> draw or erase (WM_ERASEBKGND) they are not going to be invisible. The system draws them with white color. This can be seen clearly when you resize a window and dont draw anything (empty <code>BeginPaint, EndPaint</code> and returning TRUE in <code>WM_ERASEBKGND </code> message). Maybe that is the problem."}, {"owner": {"reputation": 237, "user_id": 4372366, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-1q_ZFynSNx8/AAAAAAAAAAI/AAAAAAAAALU/gKCcmSMERaw/photo.jpg?sz=128", "display_name": "Row Rebel", "link": "https://stackoverflow.com/users/4372366/row-rebel"}, "reply_to_user": {"reputation": 6964, "user_id": 2261657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de05cbfc9a0fbef64f55eb69e761bee5?s=128&d=identicon&r=PG", "display_name": "\u03b3\u03b7\u03c1\u03ac\u03c3\u03ba\u03c9 \u03b4&#39; \u03b1\u03b5\u03af \u03c0\u03bf\u03bb\u03bb\u03ac \u03b4\u03b9\u03b4\u03b1\u03c3\u03ba\u03cc\u03bc\u03b5", "link": "https://stackoverflow.com/users/2261657/%ce%b3%ce%b7%cf%81%ce%ac%cf%83%ce%ba%cf%89-%ce%b4-%ce%b1%ce%b5%ce%af-%cf%80%ce%bf%ce%bb%ce%bb%ce%ac-%ce%b4%ce%b9%ce%b4%ce%b1%cf%83%ce%ba%cf%8c%ce%bc%ce%b5"}, "edited": false, "score": 0, "creation_date": 1430943049, "post_id": 30084855, "comment_id": 48286387, "body": "I&#39;m actually using win7 and I can ensure that there&#39;s no empty paint code inside WM_PAINT. I&#39;m asking for a redraw right after OR-ing the two regions togheter as you can see in the code above, and in the newest regions white flicker appears. It doesn&#39;t in &quot;older&quot; ones."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1430944889, "post_id": 30084855, "comment_id": 48287511, "body": "Try temporarily turning off DWM to help determine if it&#39;s a bug in your code or an interaction with DWM."}, {"owner": {"reputation": 237, "user_id": 4372366, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-1q_ZFynSNx8/AAAAAAAAAAI/AAAAAAAAALU/gKCcmSMERaw/photo.jpg?sz=128", "display_name": "Row Rebel", "link": "https://stackoverflow.com/users/4372366/row-rebel"}, "edited": false, "score": 0, "creation_date": 1430945822, "post_id": 30084855, "comment_id": 48288008, "body": "Looks like DWM doesn&#39;t have any role in this, tested without it just now. I&#39;m making tests with the bare minumum now. Whenever I press the &quot;r&quot; button, a new rectangle is added to the original region and then everything gets invalidated. If I keep the &quot;R&quot; button pressed, the call to the combineRgn function gets called fastly enough to show the white flicker continuosly"}, {"owner": {"reputation": 6964, "user_id": 2261657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de05cbfc9a0fbef64f55eb69e761bee5?s=128&d=identicon&r=PG", "display_name": "\u03b3\u03b7\u03c1\u03ac\u03c3\u03ba\u03c9 \u03b4&#39; \u03b1\u03b5\u03af \u03c0\u03bf\u03bb\u03bb\u03ac \u03b4\u03b9\u03b4\u03b1\u03c3\u03ba\u03cc\u03bc\u03b5", "link": "https://stackoverflow.com/users/2261657/%ce%b3%ce%b7%cf%81%ce%ac%cf%83%ce%ba%cf%89-%ce%b4-%ce%b1%ce%b5%ce%af-%cf%80%ce%bf%ce%bb%ce%bb%ce%ac-%ce%b4%ce%b9%ce%b4%ce%b1%cf%83%ce%ba%cf%8c%ce%bc%ce%b5"}, "edited": false, "score": 0, "creation_date": 1430963584, "post_id": 30084855, "comment_id": 48293996, "body": "Can you post a working code to test it?"}, {"owner": {"reputation": 237, "user_id": 4372366, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-1q_ZFynSNx8/AAAAAAAAAAI/AAAAAAAAALU/gKCcmSMERaw/photo.jpg?sz=128", "display_name": "Row Rebel", "link": "https://stackoverflow.com/users/4372366/row-rebel"}, "edited": false, "score": 0, "creation_date": 1430999160, "post_id": 30084855, "comment_id": 48311635, "body": "<a href=\"http://pastebin.com/db43c2Vu\" rel=\"nofollow noreferrer\">pastebin.com/db43c2Vu</a>  Raw paste of the minimal testing i&#39;m doing now. If you hold down &quot;R&quot; button new regions are fastly created and painted and you should see the white flickering in the newer ones"}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1431124693, "post_id": 30084855, "comment_id": 48377743, "body": "Just a comment. I have had this problem with every window control I draw (click a button and it flickers white.) I was unable to find a solution."}], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 4372366, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-1q_ZFynSNx8/AAAAAAAAAAI/AAAAAAAAALU/gKCcmSMERaw/photo.jpg?sz=128", "display_name": "Row Rebel", "link": "https://stackoverflow.com/users/4372366/row-rebel"}, "edited": false, "score": 0, "creation_date": 1431171417, "post_id": 30133818, "comment_id": 48387696, "body": "Indeed, <b>it works</b>. No more flicker and I can&#39;t thank you enough. It&#39;s incredible how many little facets you have to know to use correctly winAPI, I really have no idea why using SetWindowRgn inside WM_CREATE could possibly interfer with new regions rendering"}], "tags": [], "owner": {"reputation": 6964, "user_id": 2261657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de05cbfc9a0fbef64f55eb69e761bee5?s=128&d=identicon&r=PG", "display_name": "\u03b3\u03b7\u03c1\u03ac\u03c3\u03ba\u03c9 \u03b4&#39; \u03b1\u03b5\u03af \u03c0\u03bf\u03bb\u03bb\u03ac \u03b4\u03b9\u03b4\u03b1\u03c3\u03ba\u03cc\u03bc\u03b5", "link": "https://stackoverflow.com/users/2261657/%ce%b3%ce%b7%cf%81%ce%ac%cf%83%ce%ba%cf%89-%ce%b4-%ce%b1%ce%b5%ce%af-%cf%80%ce%bf%ce%bb%ce%bb%ce%ac-%ce%b4%ce%b9%ce%b4%ce%b1%cf%83%ce%ba%cf%8c%ce%bc%ce%b5"}, "is_accepted": true, "score": 1, "last_activity_date": 1431124448, "creation_date": 1431124448, "answer_id": 30133818, "question_id": 30084855, "link": "https://stackoverflow.com/questions/30084855/white-flicker-after-combinergn-function/30133818#30133818", "title": "White Flicker after CombineRgn function", "body": "<p>The problem is not the <code>CombineRgn</code> function but the <code>SetWindowRgn</code> function which you call before the system draws the window for the first time. If you call <code>SetWindowRgn</code> <strong>after</strong> the first draw, no flicker. Unfortunatelly I don't know why. So, a way to counter that is to set the window region after the first draw (take the code that sets window region from WM_CREATE and leave only the <code>DwmEnableBlurBehindWindow</code>):</p>\n\n<pre><code>static int stc = 0;\n\n//in WM_PAINT after the EndPaint(hwnd, &amp;ps); add\nHRESULT lr = DefWindowProc(hwnd, message, wParam, lParam);\n\nif( stc == 0 ){\n    OnlyOnce();\n    stc++;\n}\n\nreturn lr;\n</code></pre>\n\n<p>and the <code>OnlyOnce</code>:</p>\n\n<pre><code>void OnlyOnce(void){\n    int X_Screen = GetSystemMetrics(SM_CXSCREEN);\n    int Y_Screen = GetSystemMetrics(SM_CYSCREEN);\n\n    HRGN ActualRegion = CreateRectRgn(X_Screen - 100, Y_Screen - 100, X_Screen - 100 + 40, Y_Screen - 100 + 40);\n    SetWindowRgn(hWnd, ActualRegion, true);\n\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 4372366, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-1q_ZFynSNx8/AAAAAAAAAAI/AAAAAAAAALU/gKCcmSMERaw/photo.jpg?sz=128", "display_name": "Row Rebel", "link": "https://stackoverflow.com/users/4372366/row-rebel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 30133818, "answer_count": 1, "score": 2, "last_activity_date": 1431124448, "creation_date": 1430937176, "question_id": 30084855, "link": "https://stackoverflow.com/questions/30084855/white-flicker-after-combinergn-function", "title": "White Flicker after CombineRgn function", "body": "<p>It seems the flickering is generated by the CombineRgn function, but I really have no idea why this happens, since i've never used regions that much I'm possibly missing some knowledge on the matter.</p>\n\n<p>Some events in the program triggers the addition of little rectangles to the main region, here's the code that handles that:</p>\n\n<pre><code>        HRGN ActualRegion = CreateRectRgn(0, 0, 0, 0);\n        GetWindowRgn(hwnd, ActualRegion);\n        HRGN AddedRect = CreateRectRgn(//long code that creates a rectangle)\n        CombineRgn(ActualRegion, ActualRegion, AddedRect, RGN_OR);\n\n        SetWindowRgn(hwnd, ActualRegion, FALSE);\n        InvalidateRect(hwnd, NULL, FALSE);\n</code></pre>\n\n<p>White Flickering appears only after the invalidation if new regions where combined to the main one.</p>\n\n<p>Here's how I'm implementing double buffering in WM_PAINT:</p>\n\n<p>PLEASE NOTE that on creation i'm enabling the DWM blur behind function with an invalid region (different from the Main one) which means that everything painted with BLACK_BRUSH will result in a 100% \"invisible\" portion of the program</p>\n\n<pre><code>        RECT r; GetClientRect(hwnd, &amp;r);\n\n        PAINTSTRUCT ps; HDC hdc = BeginPaint(hwnd, &amp;ps);\n        HDC MemDc = CreateCompatibleDC(hdc);\n        HBITMAP hBmp = CreateCompatibleBitmap(hdc, r.right, r.bottom);\n        HBITMAP hOld = (HBITMAP)SelectObject(MemDc, hBmp);\n\n        //Making sure this dc is filled with \"invisible\" pixels to display\n        SelectObject(MemDc, GetStockObject(BLACK_BRUSH));\n        Rectangle(MemDc, //arbitrary values that matches the entire screen);\n\n        BitBlt(hdc, 0, 0, GetSystemMetrics(SM_CXSCREEN), GetSystemMetrics(SM_CYSCREEN), MemDc, 0, 0,        SRCCOPY);\n\n        //clean-up\n        SelectObject(MemDc, hOld);\n        DeleteObject(hBmp);\n        DeleteDC(MemDc);\n        EndPaint(hwnd, &amp;ps);\n</code></pre>\n\n<p>WM_ERASEBKGND obviously returns TRUE without further handling, the WNDCLASSEX instance of the window has a default BLACK_BRUSH as the hbrBackground field.</p>\n\n<p>I also tried to intercept and return TRUE from WM_NCPAINT message.</p>\n\n<p>I'm doing everything necessary to avoid intermediate drawcalls, everything handled inside the WM_PAINT uses a backbuffer, also i'd like to mention i'm not working with images/bitmaps. Everything is drawn with gdi/gdi+, and in no place i'm actually issuing a \"white\" redraw that may possibly cause said flicker. I'm a bit lost here</p>\n\n<p>Is it something that i'm possibly missing ? I can't really understand what may be causing white flickering in this scenario </p>\n"}, {"tags": ["c++", "3d", "rendering", "renderer"], "comments": [{"owner": {"reputation": 374, "user_id": 2277321, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d9053aabc8d0c415b5d33e7bf9088cf8?s=128&d=identicon&r=PG", "display_name": "Tim Hsu", "link": "https://stackoverflow.com/users/2277321/tim-hsu"}, "edited": false, "score": 0, "creation_date": 1430937284, "post_id": 30084683, "comment_id": 48282850, "body": "texcoord is calculate the same way as normal, it &quot;looks&quot; nicer than normal. but it might be wrong too"}], "owner": {"reputation": 374, "user_id": 2277321, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d9053aabc8d0c415b5d33e7bf9088cf8?s=128&d=identicon&r=PG", "display_name": "Tim Hsu", "link": "https://stackoverflow.com/users/2277321/tim-hsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430937381, "creation_date": 1430936555, "last_edit_date": 1430937381, "question_id": 30084683, "link": "https://stackoverflow.com/questions/30084683/is-my-normal-interpolation-perspectively-correct", "title": "Is my normal interpolation perspectively correct", "body": "<p>I am trying to implement a software renderer</p>\n\n<p>It looks like this, it seems my interpolated normal is not perspectively correct</p>\n\n<p><img src=\"https://i.stack.imgur.com/U21pi.png\" alt=\"enter image description here\">\n<br></p>\n\n<p>I use scanline conversion and calculate normal with following steps:</p>\n\n<p>Assume we are now drawing line AB (A B have same y value in screen space)</p>\n\n<ol>\n<li>Calculating normal of B by interpolating normals of Top vertex and bottom vertex. (Alpha and Beta value is retrieve from top and bottom in screen space)</li>\n<li>to calculate A is similar</li>\n<li>draw line AB. Calculating the normals of fragments by interpolating normals of A and B </li>\n<li>calc light contribution</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/BhOlc.png\" alt=\"enter image description here\">\n<br></p>\n\n<p>If I am doing wrong, how to do correct interpolation?</p>\n"}, {"tags": ["c++", "lua"], "comments": [{"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1430938772, "post_id": 30084681, "comment_id": 48283716, "body": "That&#39;s c++ not c, you might get more help if you switch the tag."}, {"owner": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1430939164, "post_id": 30084681, "comment_id": 48283957, "body": "Use <code>extern &quot;C&quot;</code> (<a href=\"https://csl.name/post/lua-and-cpp/\" rel=\"nofollow noreferrer\">link</a>)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1430939321, "post_id": 30084681, "comment_id": 48284061, "body": "<i>&quot;I am not great at reading technical documents&quot;</i> Can you elaborate on this? This is a skill you will <i>have</i> to learn, not just give up on."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1430939362, "post_id": 30084681, "comment_id": 48284086, "body": "Clearly answered by the very first result on Google for <code>lua c++</code>. :("}, {"owner": {"reputation": 273, "user_id": 2526216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/355df55c9d42e966d198388ceb270812?s=128&d=identicon&r=PG", "display_name": "Giaphage47", "link": "https://stackoverflow.com/users/2526216/giaphage47"}, "edited": false, "score": 0, "creation_date": 1431232038, "post_id": 30084681, "comment_id": 48403402, "body": "Following <a href=\"https://csl.name/post/lua-and-cpp/\" rel=\"nofollow noreferrer\">this tutorial</a> i get <code>&#39;luaopen_loadlib&#39; was not declared in this scope</code>, and when I remove that statement it compiles; however, when I run it lua panics <code>unprotected error to Lua API (no calling environment)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 28343, "user_id": 1890567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSohE.png?s=128&g=1", "display_name": "FDinoff", "link": "https://stackoverflow.com/users/1890567/fdinoff"}, "is_accepted": false, "score": 4, "last_activity_date": 1430939130, "creation_date": 1430939130, "answer_id": 30085479, "question_id": 30084681, "link": "https://stackoverflow.com/questions/30084681/lua-5-3-undefined-references/30085479#30085479", "title": "Lua 5.3 undefined references", "body": "<p>In c++ you should include <code>lua.hpp</code> not <code>lua.h</code>. <code>lua.h</code> does not define the <code>extern \"C\"</code> block to stop the name mangling of the c++ compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 273, "user_id": 2526216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/355df55c9d42e966d198388ceb270812?s=128&d=identicon&r=PG", "display_name": "Giaphage47", "link": "https://stackoverflow.com/users/2526216/giaphage47"}, "is_accepted": true, "score": 0, "last_activity_date": 1432146233, "creation_date": 1432146233, "answer_id": 30357555, "question_id": 30084681, "link": "https://stackoverflow.com/questions/30084681/lua-5-3-undefined-references/30357555#30357555", "title": "Lua 5.3 undefined references", "body": "<p>The arguments for g++ had -llua before the input file. I put -llua at the end, and everything works fine now.</p>\n"}], "owner": {"reputation": 273, "user_id": 2526216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/355df55c9d42e966d198388ceb270812?s=128&d=identicon&r=PG", "display_name": "Giaphage47", "link": "https://stackoverflow.com/users/2526216/giaphage47"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2797, "favorite_count": 1, "accepted_answer_id": 30357555, "answer_count": 2, "score": 4, "last_activity_date": 1432146233, "creation_date": 1430936552, "last_edit_date": 1430940538, "question_id": 30084681, "link": "https://stackoverflow.com/questions/30084681/lua-5-3-undefined-references", "title": "Lua 5.3 undefined references", "body": "<p>I am trying to learn how to embed lua in a C program, but I am not great at reading technical documents, and I haven't found any current tutorials. This is my program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;lua.h&gt;\n#include &lt;lualib.h&gt;\n#include &lt;lauxlib.h&gt;\n\n\nvoid report_errors(lua_State*, int);\n\nint main(int argc, char** argv) {\n    for (int n = 1; n &lt; argc; ++n) {\n        const char* file = argv[n];\n        lua_State *L = luaL_newstate();\n\n        luaL_openlibs(L);\n\n        std::cerr &lt;&lt; \"-- Loading File: \" &lt;&lt; file &lt;&lt; std::endl;\n\n        int s = luaL_loadfile(L, file);\n\n        if (s == 0) {\n            s = lua_pcall(L, 0, LUA_MULTRET, 0);\n        }\n\n        report_errors(L, s);\n        lua_close(L);\n        std::cerr &lt;&lt; std::endl;\n    }\n    return 0;\n}\n\nvoid report_errors(lua_State *L, int status) {\n    if (status) {\n        std::cerr &lt;&lt; \"-- \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n        lua_pop(L, 1);\n    }\n}\n</code></pre>\n\n<p>The compiler gives undefined reference errors for luaL_newstate, luaL_openlibs, luaL_loadfilex, lua_pcallk, and lua_close. I am using Code::Blocks one a Windows computer and I have added the lua include directory to all of the search paths and liblua53.a to the link libraries. The IDE autocompleted the header names and the parser displays most of the lua functions, but with a brief search I found that the parser could not find either lua_newstate or luaL_newstate. Why does it find some of the functions and not others?</p>\n"}, {"tags": ["c++", "macos", "c++11", "cmath"], "comments": [{"owner": {"reputation": 10922, "user_id": 224286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3d72b765bb4aed80f3138ca74606d9?s=128&d=identicon&r=PG", "display_name": "Collin", "link": "https://stackoverflow.com/users/224286/collin"}, "edited": false, "score": 0, "creation_date": 1430936445, "post_id": 30084577, "comment_id": 48282317, "body": "Do you have the actual error text?"}, {"owner": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "reply_to_user": {"reputation": 10922, "user_id": 224286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f3d72b765bb4aed80f3138ca74606d9?s=128&d=identicon&r=PG", "display_name": "Collin", "link": "https://stackoverflow.com/users/224286/collin"}, "edited": false, "score": 0, "creation_date": 1430936541, "post_id": 30084577, "comment_id": 48282374, "body": "@Collin Added the Visual Studio error. Will need a minute to find the clang  analog."}, {"owner": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1430936597, "post_id": 30084577, "comment_id": 48282401, "body": "@ShafikYaghmour The error is generated at that line without any calls necessary."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1430936635, "post_id": 30084577, "comment_id": 48282420, "body": "So what headers are you including etc...."}, {"owner": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "edited": false, "score": 0, "creation_date": 1430939140, "post_id": 30084577, "comment_id": 48283934, "body": "Updated with example."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1430944682, "post_id": 30084577, "comment_id": 48287393, "body": "Your fully example make more sense now. Updated my original answer."}], "answers": [{"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 11, "last_activity_date": 1430944635, "last_edit_date": 1495540458, "creation_date": 1430936706, "answer_id": 30084734, "question_id": 30084577, "link": "https://stackoverflow.com/questions/30084577/ambiguous-call-to-abs/30084734#30084734", "title": "Ambiguous call to abs", "body": "<p>The issue is that <code>libc++</code> is not entirely C++11 compliant with the integral overload for <a href=\"http://en.cppreference.com/w/cpp/numeric/math/fabs\" rel=\"noreferrer\">std::abs in cmath</a>:</p>\n\n<pre><code>double      fabs( Integral arg ); (7)   (since C++11)\n</code></pre>\n\n<p>Including <a href=\"http://en.cppreference.com/w/cpp/numeric/math/abs\" rel=\"noreferrer\">cstdlib</a> solves your problem since that header has overloads specifically for integer types.</p>\n\n<p>For reference the draft C++11 standard section <code>26.8</code> <em>[c.math]</em> paragraph <code>11</code> says:</p>\n\n<blockquote>\n  <p>Moreover, there shall be additional overloads sufficient to ensure:</p>\n</blockquote>\n\n<p>and includes the following item:</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Otherwise, if any argument corresponding to a double parameter has type double or an integer type, then all arguments corresponding to\n  double parameters are effectively cast to double.</li>\n  </ol>\n</blockquote>\n\n<p>This is situation very likely to change due to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#2192\" rel=\"noreferrer\">LWG active issue 2192: Validity and return type of std::abs(0u) is unclear</a>. I am guessing <code>libc++</code> choose not to provide the overloads in <code>cmath</code> due to the issue brought up in this defect report.</p>\n\n<p>See <a href=\"https://stackoverflow.com/q/29750946/1708801\">Is std::abs(0u) ill-formed?</a> for more details on this.</p>\n"}, {"comments": [{"owner": {"reputation": 4184, "user_id": 1938719, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TLqf5.jpg?s=128&g=1", "display_name": "Fengson", "link": "https://stackoverflow.com/users/1938719/fengson"}, "edited": false, "score": 0, "creation_date": 1451462834, "post_id": 30085929, "comment_id": 56792096, "body": "Helped me in my project written in Xcode, too. Thanks!"}, {"owner": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "reply_to_user": {"reputation": 4184, "user_id": 1938719, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TLqf5.jpg?s=128&g=1", "display_name": "Fengson", "link": "https://stackoverflow.com/users/1938719/fengson"}, "edited": false, "score": 0, "creation_date": 1451492378, "post_id": 30085929, "comment_id": 56807686, "body": "Glad I saved somebody else some time!"}], "tags": [], "owner": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "is_accepted": false, "score": 4, "last_activity_date": 1430940804, "creation_date": 1430940804, "answer_id": 30085929, "question_id": 30084577, "link": "https://stackoverflow.com/questions/30084577/ambiguous-call-to-abs/30085929#30085929", "title": "Ambiguous call to abs", "body": "<p>The solution was to explicitly <code>#include &lt;cstdlib&gt;</code> on the OS X machine, as for some reason Visual Studio finds it in our dependencies and includes it, but clang does not. I will try to reproduce a similar chain of includes that our project has and reproduce the error in a minimalist way, as it may still be a problem either with Xcode or Visual Studio.</p>\n"}, {"tags": [], "owner": {"reputation": 606, "user_id": 4759339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mkL09.jpg?s=128&g=1", "display_name": "jan.sende", "link": "https://stackoverflow.com/users/4759339/jan-sende"}, "is_accepted": false, "score": 1, "last_activity_date": 1533143414, "creation_date": 1533143414, "answer_id": 51638822, "question_id": 30084577, "link": "https://stackoverflow.com/questions/30084577/ambiguous-call-to-abs/51638822#51638822", "title": "Ambiguous call to abs", "body": "<p>If you have many template functions causing this problem, you can use the following drop-in replacement:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdlib&gt;\n#include &lt;type_traits&gt;\n\nnamespace util {\n\n\ntemplate &lt;class T&gt;\nauto abs(T value) -&gt; std::enable_if_t&lt;std::is_unsigned&lt;T&gt;::value,\n                                      T&gt; { return value; }\ntemplate &lt;class T&gt;\nauto abs(T value) -&gt; std::enable_if_t&lt;std::is_floating_point&lt;T&gt;::value,\n                                      T&gt; { return std::fabs(value); }\ntemplate &lt;class T&gt;\nauto abs(T value) -&gt; std::enable_if_t&lt;std::is_same&lt;T, int&gt;::value,\n                                      T&gt; { return std::abs(value); }\ntemplate &lt;class T&gt;\nauto abs(T value) -&gt; std::enable_if_t&lt;std::is_same&lt;T, long&gt;::value,\n                                      T&gt; { return std::labs(value); }\ntemplate &lt;class T&gt;\nauto abs(T value) -&gt; std::enable_if_t&lt;std::is_same&lt;T, long long&gt;::value,\n                                      T&gt; { return std::llabs(value); }\ntemplate &lt;class T&gt;\nauto abs(T value) -&gt; std::enable_if_t&lt;std::is_signed&lt;T&gt;::value &amp;&amp;\n                                          !std::is_floating_point&lt;T&gt;::value &amp;&amp;\n                                          !std::is_same&lt;T, int&gt;::value &amp;&amp;\n                                          !std::is_same&lt;T, long&gt;::value &amp;&amp;\n                                          !std::is_same&lt;T, long long&gt;::value,\n                                      T&gt; { return std::abs(value); }\n\n\n} // namespace util\n</code></pre>\n\n<p>Just replace the <code>std::abs</code> calls with <code>util::abs</code>. (Needs <code>c++11</code>.)</p>\n"}], "owner": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18907, "favorite_count": 1, "accepted_answer_id": 30084734, "answer_count": 3, "score": 10, "last_activity_date": 1533143414, "creation_date": 1430936202, "last_edit_date": 1471910438, "question_id": 30084577, "link": "https://stackoverflow.com/questions/30084577/ambiguous-call-to-abs", "title": "Ambiguous call to abs", "body": "<p>I have a custom data type that in practice can be either <code>float</code> or <code>double</code>. On every OS except OSX, I am able to successfully build this C++11 template:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstdint&gt;\n\ntemplate&lt; class REAL_T &gt;\ninline REAL_T inhouse_abs(REAL_T i_val)\n{\n    return std::abs((REAL_T)i_val);\n}\n\nint main()\n{\n    int32_t ui = 2;\n    inhouse_abs(ui);\n    return 0;\n}\n</code></pre>\n\n<p>However, clang 6.0 (3.5 LLVM) reports an ambiguous function call. If I change <code>abs</code> to <code>fabs</code>, the error is resolved on OSX, but now an identical error shows up on my Linux clang, gcc, and Visual Studio.</p>\n\n<p>Error on Visual Studio with fabs:</p>\n\n<pre><code>349 error C2668: 'fabs' : ambiguous call to overloaded function\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>This example compiled on our OS X systems, although in the <em>nearly</em> identical project it does not. The solution was including <code>&lt;cstdlib&gt;</code> explicitly in the source, rather than back in another header. The reason is unclear, but seems to be xcode/clang not following our header includes properly.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 5, "creation_date": 1430936126, "post_id": 30084521, "comment_id": 48282134, "body": "C != C++, and have you tried anything yet (we are not going to just write code for you)?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1430936740, "post_id": 30084521, "comment_id": 48282486, "body": "Does the Turkish part start at the same column, e.g. column 36, in each line? Are there only spaces between the English and Turkish parts? Or may there be tabs? Or are these two parts even separated by tabs? You should be more specific."}, {"owner": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1430937361, "post_id": 30084521, "comment_id": 48282888, "body": "It changes each and every row. I have got 5127 different row. @crashmstr   I&#39;m not waiting for you to write code for me. I just need idea about how to do that."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1430938376, "post_id": 30084521, "comment_id": 48283475, "body": "In that case, I&#39;d read the file line by line and look for stretches of two or more white-space characters and interpret them as separator. This should work if your vocabulary entries never have more than one space between words."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1430940569, "post_id": 30084521, "comment_id": 48284845, "body": "Well, judging from the picture, the Turkish parts always starts in the same column for every line. (Of corse, the lines themselves are different.) Apart from not showing any code, you should at least make an effort to describe your problem precisely."}, {"owner": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "edited": false, "score": 0, "creation_date": 1430941452, "post_id": 30084521, "comment_id": 48285345, "body": "Thank you for your comment. I tried fscanf and fgets functions but these functions read line by line. In this case I need read coulumn by coulumn. Everyone knows about fscanf or fgets functions about how to use them. That is why I didn&#39;t show any code blocks at my post. And also I don&#39;t need any specific code for it. You are not my employees but at least you can suggest your ideas for the solution. I need your ideas ,suggestion or advice not your codes. It called brainstorm , remember ?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1430942472, "post_id": 30084521, "comment_id": 48286024, "body": "There has to be one or more questions already asked about reading text files.  Try searching for &quot;stackoverflow c++ read file struct&quot; or &quot;stackoverflow c++ read file columns&quot;."}, {"owner": {"reputation": 486, "user_id": 7302586, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/add2c35e26541725f67515dbb8ccd67a?s=128&d=identicon&r=PG&f=1", "display_name": "szpanczyk", "link": "https://stackoverflow.com/users/7302586/szpanczyk"}, "edited": false, "score": 0, "creation_date": 1484864334, "post_id": 30084521, "comment_id": 70698043, "body": "@MustafaAlp it doesn&#39;t seem like you&#39;re looking to understand the problem, overcome difficulty in particular part of attempted solution or anything like this. Especially when You take someones code and try to use it to no avail, only to comment that it&#39;s not working. It seems you&#39;re looking for a working specific solution..."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1430937106, "post_id": 30084776, "comment_id": 48282727, "body": "This code will work for the shown input file excerpt, where both English and Turkish parts have two words each, but for not much else. What about determining the end of input by an end-of-file condition?"}, {"owner": {"reputation": 1503, "user_id": 4037465, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4f3bc53b780a4ff232429b4391863f49?s=128&d=identicon&r=PG&f=1", "display_name": "Ashot Khachatryan", "link": "https://stackoverflow.com/users/4037465/ashot-khachatryan"}, "reply_to_user": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "edited": false, "score": 0, "creation_date": 1430938041, "post_id": 30084776, "comment_id": 48283266, "body": "@MustafaAlp You need to have file.txt file in directory where executable runs. In the same directory will be created two files turkce.txt ingilizce.txt. Did you get error?"}, {"owner": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "edited": false, "score": 0, "creation_date": 1430938271, "post_id": 30084776, "comment_id": 48283397, "body": "No , I didn&#39;t get the any error the code above. But I have multiple coulumns not just 2."}], "tags": [], "owner": {"reputation": 1503, "user_id": 4037465, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4f3bc53b780a4ff232429b4391863f49?s=128&d=identicon&r=PG&f=1", "display_name": "Ashot Khachatryan", "link": "https://stackoverflow.com/users/4037465/ashot-khachatryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1430936922, "creation_date": 1430936922, "answer_id": 30084776, "question_id": 30084521, "link": "https://stackoverflow.com/questions/30084521/file-handling-in-c-reading-multiple-chars/30084776#30084776", "title": "File Handling in C reading multiple chars", "body": "<p>There could be better solutions but here is simple one.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main()\n{\n  std::ifstream inFile(\"file.txt\");\n  std::ofstream outFileT(\"turkce.txt\", std::ios::app);\n  std::ofstream outFileE(\"ingilizce.txt\", std::ios::app);\n  std::string a;\n  std::string b;\n\n  for (int i = 0; i &lt; 2; i++) {\n    inFile &gt;&gt; a &gt;&gt; b;\n    outFileE &lt;&lt; a + \" \" + b + \"\\n\";\n\n    inFile &gt;&gt; a &gt;&gt; b;\n    outFileT &lt;&lt; a + \" \" + b + \"\\n\";\n }\n}\n</code></pre>\n\n<p>I assumed you have two lines but you can determine lines count in the file first. </p>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 0, "last_activity_date": 1430986604, "last_edit_date": 1430986604, "creation_date": 1430986209, "answer_id": 30095326, "question_id": 30084521, "link": "https://stackoverflow.com/questions/30084521/file-handling-in-c-reading-multiple-chars/30095326#30095326", "title": "File Handling in C reading multiple chars", "body": "<p>You don't say it explicitly, but your file has two fixed-width columns, which you want to separate.</p>\n\n<p>A substring of a string <code>str</code> from a fixed index <code>i</code> to the end can be expressed with pointer arithmetic: <code>str + i</code> or <code>&amp;str[i]</code>. Strings that are not zero-terminated (like your first column) can be printed by specifying a length with <code>printf</code>s precision field, e.g. <code>printf(\"%.*s\", len, str)</code>.</p>\n\n<p>A quick and dirty way to print your two columns is:</p>\n\n<pre><code>char line[80];\nint col = 36;\n\nwhile (fgets(line, sizeof(line), in)) {\n    fprintf(en, \"%.*s\\n\", col, line);\n    fprintf(tr, \"%s\", line + col);\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>This method has some drawbacks: It will print garbage if the string is shorter than your separation width, i.e. if the right column is empty. It also prints the column padding spaces for the left column, which looks untidy. So let's write a function that splits the strings nicely, which we can call like so:</p>\n\n<pre><code>while (fgets(line, sizeof(line), in)) {\n    char *stren, *strtr;\n\n    split_at(line, &amp;stren, &amp;strtr, 36);\n\n    fprintf(en, \"%s\\n\", stren);\n    fprintf(tr, \"%s\\n\", strtr);\n}\n</code></pre>\n\n<p>The function looks like this:</p>\n\n<pre><code>void split_at(char *line, char **left, char **right, int col)\n{\n    char *trim = line;\n    char *p = line;\n\n    *left = line;\n    *right = line + col;\n\n    while (p &lt; *right) {\n        if (*p == '\\0') {\n            *right = p;\n            break;\n        }\n\n        if (!isspace(*p)) trim = p + 1;\n        p++;\n    }\n\n    *trim = '\\0';\n    trim = p;\n\n    while (*p) {\n        if (!isspace(*p)) trim = p + 1;        \n        p++;\n    }\n\n    if (trim) *trim = '\\0';\n}\n</code></pre>\n\n<p>This should work for your example data. It will also work for empty left or right columns. It will not work if there is no space between the left and right columns, i.e. when the left and right art are pasted together.</p>\n\n<p>This method will also work only if the code points of the strings have the same length. You haven't said which encoding you use for your data. If you use ISO-8859-9, you will be okay. If you use UTF-8, all non ASCII-codepoints, i.e. the Turkish special characters, will be represented by more than one byte. What looks like a fixed-width column doesn't have a fixed width in its memory representation.</p>\n\n<p>That said, you should be safe as long as your English text is in the left column. English text is made up of only ASCII characters unless you have fancy formatting with typographic quotation marks or some such.</p>\n"}], "owner": {"reputation": 73, "user_id": 4227027, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/125342fdd489da1e7381a5f9230efd1a?s=128&d=identicon&r=PG", "display_name": "Mustafa Alp", "link": "https://stackoverflow.com/users/4227027/mustafa-alp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 30095326, "answer_count": 2, "score": -3, "last_activity_date": 1484863966, "creation_date": 1430936008, "last_edit_date": 1484863966, "question_id": 30084521, "link": "https://stackoverflow.com/questions/30084521/file-handling-in-c-reading-multiple-chars", "title": "File Handling in C reading multiple chars", "body": "<blockquote>\n<pre><code>abort action                        islemi durdur(MS)\nabort sequence                      durdurma dizisi(IBM)\n</code></pre>\n</blockquote>\n\n<p>I have a file.txt like above. I want to read this from the file.txt separately. Besides the file.txt I got 2 more turkce.txt and ingilizce.txt</p>\n\n<p>Here is what I want to do : </p>\n\n<p>I want to read from file.txt and separate the words English and Turkish. After that ingilizce.txt become like this </p>\n\n<blockquote>\n  <p>abort action<br/>\n  abort sequence  </p>\n</blockquote>\n\n<p>and turkce.txt like this</p>\n\n<blockquote>\n  <p>islemi durdur(MS)<br/>\n  durdurma dizisi(IBM)</p>\n</blockquote>\n\n<p>Also, I have multiple columns and 5127 rows. Column numbers can changes each and every row.</p>\n\n<p>Here is a pic of some part of my file.txt \n<a href=\"http://i59.tinypic.com/33m0iu8.png\" rel=\"nofollow noreferrer\">http://i59.tinypic.com/33m0iu8.png</a></p>\n\n<p>Thank you for your answers.</p>\n\n<p>Update : I solved the problem. The difference between left column's starting of first letter and right column's starting of firs letter are same and it equals 37.</p>\n\n<p>So I use </p>\n\n<pre><code>FILE* fp = fopen(\"file.txt\",\"r\");\nchar s[256];\nfgets(s, 37 , \"fp);\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "qt"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1430937924, "post_id": 30084371, "comment_id": 48283196, "body": "go for your second approach, worry about effiency when everything works and <b>really</b> is too slow."}, {"owner": {"reputation": 3824, "user_id": 2011734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b3a27a24468b1b78dd2a125bfef1402?s=128&d=identicon&r=PG", "display_name": "Greenflow", "link": "https://stackoverflow.com/users/2011734/greenflow"}, "edited": false, "score": 1, "creation_date": 1430939525, "post_id": 30084371, "comment_id": 48284190, "body": "&quot;I thought about a mutex to lock the writing signal emit&quot; &lt;--- Not necessary. Signal/Slot connections are automatically &#39;thread-safe&#39;."}, {"owner": {"reputation": 3824, "user_id": 2011734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b3a27a24468b1b78dd2a125bfef1402?s=128&d=identicon&r=PG", "display_name": "Greenflow", "link": "https://stackoverflow.com/users/2011734/greenflow"}, "edited": false, "score": 1, "creation_date": 1430939594, "post_id": 30084371, "comment_id": 48284235, "body": "Check your Qt documentation and search for: Qt::QueuedConnection"}, {"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 1, "creation_date": 1430939692, "post_id": 30084371, "comment_id": 48284299, "body": "Send the string to the other thread via a signal and write it there. cross-thread signal/slot connections are /queued/ and the arguments copied, i.e. you don&#39;t have to worry about locking in that case. (message passing paradigm)"}], "answers": [{"tags": [], "owner": {"reputation": 3357, "user_id": 1325084, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/861cba4c57f76eb68d3249b60c72c809?s=128&d=identicon&r=PG", "display_name": "cppguy", "link": "https://stackoverflow.com/users/1325084/cppguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1430945526, "creation_date": 1430945526, "answer_id": 30087305, "question_id": 30084371, "link": "https://stackoverflow.com/questions/30084371/accessing-qt-widget-thread-safe/30087305#30087305", "title": "Accessing Qt widget thread safe", "body": "<p>In essence, as long as you use an auto or queued connection (see <a href=\"http://doc.qt.io/qt-5/qobject.html#connect\" rel=\"nofollow\">QObject::connect</a>) when connecting a signal from an object that belongs to another thread (see <a href=\"http://doc.qt.io/qt-5/qobject.html#moveToThread\" rel=\"nofollow\">QObject::moveToThread</a>) to a widget (which must belong to the main gui thread), then emitting the signal will be an asynchronous \"fire and forget\" call. You can also make the call synchronous by specifying that it's a blocking queued connection but I don't recommend it unless you really require it.</p>\n\n<p>The threading model in Qt takes a bit to wrap your head around but you'll grow to love the simplicity signals and slots provide in multithreaded code and how many pieces of code will no longer need to protect their data with mutexes.</p>\n"}], "owner": {"reputation": 701, "user_id": 1748274, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/da8b01da0f194f454e68d1936292f1b0?s=128&d=identicon&r=PG", "display_name": "xlw12", "link": "https://stackoverflow.com/users/1748274/xlw12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430945526, "creation_date": 1430935546, "question_id": 30084371, "link": "https://stackoverflow.com/questions/30084371/accessing-qt-widget-thread-safe", "title": "Accessing Qt widget thread safe", "body": "<p>I use a QPlainTextEdit to display some text. This text will be modified (append) in another thread than the ui(main) thread with sending a signal to the widget</p>\n\n<pre><code>connect(this, SIGNAL(addText(QString)), mUi-&gt;plainTextEditLog, SLOT(appendPlainText(QString)));\n\n...\nemit addText(QString::fromStdString(someString));\n...\n</code></pre>\n\n<p>another thread is reading the text of this PlainTextEdit and writes it to a file</p>\n\n<pre><code>QFile file(fileName);\nif (!file.open(QIODevice::WriteOnly | QIODevice::Text | QIODevice::Truncate)) {\n    return;\n}\nfile.write(mUi-&gt;plainTextEditLog-&gt;toPlainText().toUtf8());\nfile.close();\n</code></pre>\n\n<p>As far as i know the Qt widgets aren't thread safe. I thought about a mutex to lock the writing signal emit, but this wont lock it really because it is only sending a signal asynchronously.</p>\n\n<p>The reason why i use signals is that the writing method can be called from more than one thread and a mutex didn't help in this case but signals do perfectly.</p>\n\n<p>The second thought was to store the text also in my class and lock the string with mutual exclusion. But i am not sure if this is very efficient because there is not only the plaintextedit that has to be modified but also the string as a copy.</p>\n"}, {"tags": ["java", "c++", "oop", "design-patterns", "interface"], "comments": [{"owner": {"reputation": 249, "user_id": 1565631, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4581630863fde2cf0e8dfbd3430b815d?s=128&d=identicon&r=PG", "display_name": "Mok", "link": "https://stackoverflow.com/users/1565631/mok"}, "edited": false, "score": 0, "creation_date": 1430974272, "post_id": 30084370, "comment_id": 48296886, "body": "Nice differences here. <a href=\"http://mindprod.com/jgloss/interfacevsabstract.html\" rel=\"nofollow noreferrer\">mindprod.com/jgloss/interfacevsabstract.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1430935952, "creation_date": 1430935952, "answer_id": 30084501, "question_id": 30084370, "link": "https://stackoverflow.com/questions/30084370/should-i-program-to-an-interface-or-an-abstract-base-class-what-exactly-does-th/30084501#30084501", "title": "Should I Program to an Interface or an Abstract Base Class? What exactly does that phrase mean?", "body": "<p>Note: C++ doesn't have interfaces. You might argue it doesn't need them.</p>\n\n<blockquote>\n  <p>you should program to an interface not an implementation but do they mean literal interfaces (no shared code at all)?</p>\n</blockquote>\n\n<p>Possibly. Where it makes sense to do this, it can work very well.  Note: in Java interfaces can have code as well.</p>\n\n<blockquote>\n  <p>Is it okay to program to an abstract base class that would have been an interface except that there were variables in this \"interface\" that all sub-classes were expected to have?</p>\n</blockquote>\n\n<p>If you need fields in the implementation an abstract class can make sense.  You can still use an interface as well.</p>\n\n<blockquote>\n  <p>Replicating a variable across sub-classes would have been an inconvenience because if I changed the name of one of the variables in one of the sub-classes I would have to change the name of that variable in all of the sub-classes.</p>\n</blockquote>\n\n<p>This is where using an IDE helps.  You can change a field, class, method name in all your code with one action.</p>\n\n<blockquote>\n  <p>is this okay or would you create another interface on top of the abstract base class and program to that interface?</p>\n</blockquote>\n\n<p>You can code your implementation to an abstract class, but the users of that class should be using an interface if possible.</p>\n\n<p>e.g. <code>HashMap</code> extends <code>AbstractMap</code> but implements <code>Map</code>.  Most people would use <code>Map</code> not <code>AbstractMap</code></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2287171"}, "edited": false, "score": 2, "creation_date": 1430951003, "post_id": 30084876, "comment_id": 48290456, "body": "I vote your answer most helpful because of the line &quot;It&#39;s always okay to program to abstract or even concrete classes, however it&#39;s better if you can avoid it.&quot;"}], "tags": [], "owner": {"reputation": 1934, "user_id": 147808, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b5c1e7d6b890de9288c7aac3d884329?s=128&d=identicon&r=PG", "display_name": "olovb", "link": "https://stackoverflow.com/users/147808/olovb"}, "is_accepted": true, "score": 2, "last_activity_date": 1430939537, "last_edit_date": 1495539993, "creation_date": 1430937222, "answer_id": 30084876, "question_id": 30084370, "link": "https://stackoverflow.com/questions/30084370/should-i-program-to-an-interface-or-an-abstract-base-class-what-exactly-does-th/30084876#30084876", "title": "Should I Program to an Interface or an Abstract Base Class? What exactly does that phrase mean?", "body": "<p>You want to program to interfaces because it means lower coupling. Note that interfaces in Java are more flexible since they can be implemented by a class <em>anywhere</em> in the class hierarchy unlike abstract classes (as a result of single inheritance). Such flexibility means that your code is reusable to a higher degree.</p>\n\n<p><em>The important point of \"programming to an interface not an implementation\" is that of the general principles mentioned above, even if they might cause some minor inconveniences</em>.</p>\n\n<p>Also, even if you program to an interface, you can always implement said interface (or parts of it) by means of abstract classes if you'd like, achieving both low coupling and code reusability at the same time.</p>\n\n<p>It's always okay to program to abstract or even concrete classes, however it's better if you can avoid it.</p>\n\n<p><a href=\"https://softwareengineering.stackexchange.com/questions/237113/why-are-interfaces-more-helpful-than-superclasses-in-achieving-loose-coupling\">This discussion might be helpful</a> or <a href=\"https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface?rq=1\">this one</a> and <a href=\"https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo\">of course this one</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2287171"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 30084876, "answer_count": 2, "score": 4, "last_activity_date": 1430939537, "creation_date": 1430935544, "last_edit_date": 1430935695, "question_id": 30084370, "link": "https://stackoverflow.com/questions/30084370/should-i-program-to-an-interface-or-an-abstract-base-class-what-exactly-does-th", "title": "Should I Program to an Interface or an Abstract Base Class? What exactly does that phrase mean?", "body": "<p>In object oriented programming, I have read that you should program to an interface not an implementation but do they mean literal interfaces (no shared code at all)? </p>\n\n<p>Is it okay to program to an abstract base class that would have been an interface except that there were variables in this \"interface\" that all sub-classes were expected to have? Replicating a variable across sub-classes would have been an inconvenience because if I changed the name of one of the variables in one of the sub-classes I would have to change the name of that variable in all of the sub-classes. </p>\n\n<p>In following the principle of \"program to an interface not an implementation\", is this okay or would you create another interface on top of the abstract base class and program to that interface?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 4, "creation_date": 1430936118, "post_id": 30084369, "comment_id": 48282130, "body": "In your example code, the value in <code>iii</code> is converted to <code>float</code> type, since the result of ternary is the &quot;widest&quot; type."}, {"owner": {"reputation": 631, "user_id": 2006805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Ch4Nt.jpg?s=128&g=1", "display_name": "ryu", "link": "https://stackoverflow.com/users/2006805/ryu"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1430965259, "post_id": 30084369, "comment_id": 48294376, "body": "I thought even if the second and third operands are not in the same type, implicitly conversion will not happen. Because <b>(true ? 1 : 2.0)</b> will return 1 instead of 1.0.  As per @T.C&#39;s wonderful explanation I have got the point. thanks all the same."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1430936192, "last_edit_date": 1495541196, "creation_date": 1430936192, "answer_id": 30084574, "question_id": 30084369, "link": "https://stackoverflow.com/questions/30084369/return-type-of-decltype-when-applied-to-ternary-expression/30084574#30084574", "title": "Return type of decltype when applied to ternary(?:) expression", "body": "<p>The type of an expression is a <em>compile-time</em> property. The value of the first operand in a conditional expression (and hence the branch selected), is, in general, a <em>run-time</em> thing, so it can't possibly affect the expression's type.</p>\n\n<p>Instead, a complicated set of rules (more than a page of standardese, most of which I quoted in <a href=\"https://stackoverflow.com/questions/24706480/why-does-stdistringstream-appear-to-resolve-differently-to-stdifstream-in-th/24706610#24706610\">this answer</a>) is used to determine what the \"common type\" of the second and third operands is, and the conditional expression is of that type. <code>std::common_type</code> merely leverages the existing rules in the core language.</p>\n"}], "owner": {"reputation": 631, "user_id": 2006805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Ch4Nt.jpg?s=128&g=1", "display_name": "ryu", "link": "https://stackoverflow.com/users/2006805/ryu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 30084574, "answer_count": 1, "score": 10, "last_activity_date": 1430960434, "creation_date": 1430935533, "last_edit_date": 1430960434, "question_id": 30084369, "link": "https://stackoverflow.com/questions/30084369/return-type-of-decltype-when-applied-to-ternary-expression", "title": "Return type of decltype when applied to ternary(?:) expression", "body": "<p>When I look into a code snippet for a possible implementation of <a href=\"http://en.cppreference.com/w/cpp/types/common_type\" rel=\"noreferrer\">std::common_type</a></p>\n\n<pre><code>template &lt;class ...T&gt; struct common_type;\n\ntemplate &lt;class T&gt;\nstruct common_type&lt;T&gt; {\n    typedef decay_t&lt;T&gt; type;\n};\n\ntemplate &lt;class T, class U&gt;\nstruct common_type&lt;T, U&gt; {\n    typedef decay_t&lt;decltype(true ? declval&lt;T&gt;() : declval&lt;U&gt;())&gt; type;\n};\n\ntemplate &lt;class T, class U, class... V&gt;\nstruct common_type&lt;T, U, V...&gt; {\n    typedef common_type_t&lt;common_type_t&lt;T, U&gt;, V...&gt; type;\n};\n</code></pre>\n\n<p>The part how to get a common type for two template argument makes me confused.It is a usage of ternary operator with decltype. </p>\n\n<p>As I known, whether to return the second or third operand is decided by the value of first operand. In this snippet, the first operand is <strong>true</strong> which means the return value of expression will always be <strong><code>declval&lt;T&gt;()</code></strong>. If it is what i thought which make no sense... Therefore, I have tried the following test</p>\n\n<pre><code>int iii = 2;\nfloat fff = 3.3;\nstd::cout &lt;&lt; typeid(decltype(false? std::move(iii):std::move(fff))).name() &lt;&lt; std::endl;\nstd::cout &lt;&lt; typeid(decltype(std::move(iii))).name() &lt;&lt; std::endl;\nstd::cout &lt;&lt; typeid(decltype(false ? iii : fff)).name() &lt;&lt; std::endl;\nstd::cout &lt;&lt; typeid(decltype(true ? iii : fff)).name() &lt;&lt; std::endl;\n\n// [02:23:37][ryu@C++_test]$ g++ -std=c++14 -g common_type.cpp\n// output \n// f\n// i\n// f\n// f\n</code></pre>\n\n<p>Comparing with the running result, The result what i though should be like as follows</p>\n\n<pre><code>int iii = 2;\nfloat fff = 3.3;\nstd::cout &lt;&lt; typeid(decltype(false ? iii : fff)).name() &lt;&lt; std::endl; // should return f;\nstd::cout &lt;&lt; typeid(decltype(true ? iii : fff)).name() &lt;&lt; std::endl;  // should return i;\n</code></pre>\n\n<p>Anyone when can help to explain why the running result is different ? </p>\n\n<p>In other words, what's the return result of decltype when it is applied on a ternary expression?</p>\n"}, {"tags": ["c++", "c++11", "lambda", "stdbind"], "comments": [{"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430936112, "post_id": 30084357, "comment_id": 48282125, "body": "It also works, if the lambda is defined with <code>auto lambda = [] (std::string&amp; message)</code>    (reference, not rvalue)"}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "reply_to_user": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430936245, "post_id": 30084357, "comment_id": 48282193, "body": "I&#39;ve noticed that as well, though it should be <code>const string&amp; message</code>, otherwise it&#39;ll refuse to accept a c-string literal."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1430936758, "post_id": 30084357, "comment_id": 48282493, "body": "Just let <code>async</code> do the binding for you: <code>std::async(lambda, std::string{&quot;hello world&quot;})</code>."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1430936662, "post_id": 30084685, "comment_id": 48282432, "body": "Ugh. Yes, that&#39;s ugly as hell."}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1430937168, "post_id": 30084685, "comment_id": 48282778, "body": "Very clever. Makes sense since <code>lambda(&quot;hello world&quot;)</code> would compile but <code>auto s = std::string{&quot;hello world&quot;}; lambda(s)</code> would not."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1430937553, "post_id": 30084685, "comment_id": 48282985, "body": "Another option in this case is to just create a new lambda. <code>auto bound = [lambda,msg=std::string{&quot;hello world&quot;}]() mutable { lambda(std::move(msg)); };</code>"}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430963854, "post_id": 30084685, "comment_id": 48294063, "body": "@Brian, you&#39;re right, a generalized lambda capture would obviate the need for <code>std::bind</code>. I&#39;m restricted to C++11 at the moment though, so that won&#39;t work in my situation, but that&#39;s good to know in case C++14 does become an option."}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 11, "last_activity_date": 1430937547, "last_edit_date": 1430937547, "creation_date": 1430936570, "answer_id": 30084685, "question_id": 30084357, "link": "https://stackoverflow.com/questions/30084357/stdasync-using-an-rvalue-reference-bound-to-a-lambda/30084685#30084685", "title": "std::async using an rvalue reference bound to a lambda", "body": "<p><code>std::bind</code> is going to make a copy of the <code>std::string</code> argument and pass that to the lambda. But that fails to compile because the lambda requires an rvalue argument, while what <code>bind</code> passes it will be an lvalue. You could get this to work if you get <code>bind</code> to <code>move</code> the argument, but this requires extremely ugly casting for disambiguation (because <a href=\"http://en.cppreference.com/w/cpp/algorithm/move\" rel=\"nofollow\"><code>std::move</code></a> is an overloaded function).</p>\n\n<pre><code>auto bound = std::bind(lambda, std::bind(static_cast&lt;std::string&amp;&amp;(*)(std::string&amp;)&gt;(std::move),\n                                         std::string{\"hello world\"}));\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/7b4d0edf0df2aaf9\" rel=\"nofollow\">Live demo</a></p>\n\n<p>You could, of course, write your own version of <code>move</code> that is not overloaded, and avoid that cast.</p>\n\n<p>The second case works because when <code>bind</code> passes the <code>char const *</code> to the lambda, an rvalue <code>std::string</code> temporary is created implicitly.</p>\n\n<hr>\n\n<p>To explain the error message you're seeing, somewhere within the innards of <code>std::async</code>, <code>std::result_of</code> is being invoked to determine the return type of the function call expression. However, because that call expression is invalid due to the reasons explained above, <a href=\"http://en.cppreference.com/w/cpp/types/result_of\" rel=\"nofollow\"><code>result_of</code></a> is being SFINAE'd out (this is a C++14 change). Hence the error <code>error: no type named 'type' in 'class std::result_of&lt;...&gt;'</code>.</p>\n"}], "owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 30084685, "answer_count": 1, "score": 8, "last_activity_date": 1433957243, "creation_date": 1430935463, "last_edit_date": 1433957243, "question_id": 30084357, "link": "https://stackoverflow.com/questions/30084357/stdasync-using-an-rvalue-reference-bound-to-a-lambda", "title": "std::async using an rvalue reference bound to a lambda", "body": "<p>I'm trying to bind an rvalue reference to a lambda using <code>std::bind</code>, but I have issues when I throw that into a <code>std::async</code> call: (<a href=\"http://coliru.stacked-crooked.com/a/9d46c1cd466e1a08\" rel=\"nofollow noreferrer\">source</a>)</p>\n\n<pre><code>auto lambda = [] (std::string&amp;&amp; message) {\n    std::cout &lt;&lt; message &lt;&lt; std::endl;\n};\nauto bound = std::bind(lambda, std::string{\"hello world\"});\nauto future = std::async(bound); // Compiler error here\nfuture.get()\n</code></pre>\n\n<p>This issues a compiler error I'm not really sure how to interpret:</p>\n\n<blockquote>\n  <p>error: no type named 'type' in 'class std::result_of(std::basic_string)>&amp;()>'</p>\n</blockquote>\n\n<p>What's going on here? Interestingly, a slight modification does compile and work as expected. If I change <code>std::string{\"hello world\"}</code> to a c-string literal, everything works fine: (<a href=\"http://coliru.stacked-crooked.com/a/85ae5aa256e147ea\" rel=\"nofollow noreferrer\">source</a>)</p>\n\n<pre><code>auto lambda = [] (std::string&amp;&amp; message) {\n    std::cout &lt;&lt; message &lt;&lt; std::endl;\n};\nauto bound = std::bind(lambda, \"hello world\");\nauto future = std::async(bound);\nfuture.get(); // Prints \"hello world\" as expected\n</code></pre>\n\n<p>Why does this work but not the first example?</p>\n"}, {"tags": ["c++", "heap", "priority-queue", "undefined-reference"], "comments": [{"owner": {"reputation": 33538, "user_id": 276994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f81585f940e68c3bab934cc6f59c901e?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/276994/vlad"}, "edited": false, "score": 0, "creation_date": 1430935283, "post_id": 30084253, "comment_id": 48281624, "body": "Could you please show a (preferably small) example of code reproducing the behaviour in question?"}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430935364, "post_id": 30084253, "comment_id": 48281679, "body": "Also, because this sounds like a linking problem, please give us your linker command."}, {"owner": {"reputation": 33538, "user_id": 276994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f81585f940e68c3bab934cc6f59c901e?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/276994/vlad"}, "edited": false, "score": 2, "creation_date": 1430935551, "post_id": 30084253, "comment_id": 48281785, "body": "Or maybe your template class methods are defined in a .cpp (a <a href=\"https://isocpp.org/wiki/faq/templates#templates-defn-vs-decl\" rel=\"nofollow noreferrer\">major C++ crime</a>)?"}, {"owner": {"reputation": 1056, "user_id": 1498329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f05806694ca16c86f8adaa7e94bae308?s=128&d=identicon&r=PG", "display_name": "Daniel Heilper", "link": "https://stackoverflow.com/users/1498329/daniel-heilper"}, "edited": false, "score": 0, "creation_date": 1430935581, "post_id": 30084253, "comment_id": 48281795, "body": "Do you include the header file where class Passenger API resides?"}, {"owner": {"reputation": 530, "user_id": 3945015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b21d5e2fc598199fc06f09aedd34f71?s=128&d=identicon&r=PG&f=1", "display_name": "Adalee", "link": "https://stackoverflow.com/users/3945015/adalee"}, "edited": false, "score": 0, "creation_date": 1430935632, "post_id": 30084253, "comment_id": 48281830, "body": "Since you mentioned including <code>Heap_PriorityQueue.h</code> into <i>both</i> you header and cpp file - are you using <a href=\"http://stackoverflow.com/questions/1653958/why-are-ifndef-and-define-used-in-c-header-files\">include guards</a>? I remember having a problem with cyclic including without include guards when I didn&#39;t know I need to use them, and your problems seems similar to mine."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1430936153, "post_id": 30084253, "comment_id": 48282149, "body": "do you have a Heap_PriorityQueue.cpp?"}, {"owner": {"reputation": 55, "user_id": 4429178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tLi0c.jpg?s=128&g=1", "display_name": "YouHaveGotToBeKiddingMe", "link": "https://stackoverflow.com/users/4429178/youhavegottobekiddingme"}, "edited": false, "score": 0, "creation_date": 1430936232, "post_id": 30084253, "comment_id": 48282180, "body": "Heap_PriorityQueue.cpp and Heap_PriorityQueue.h were both provided by the text and are in the same folder as the rest of the files."}, {"owner": {"reputation": 55, "user_id": 4429178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tLi0c.jpg?s=128&g=1", "display_name": "YouHaveGotToBeKiddingMe", "link": "https://stackoverflow.com/users/4429178/youhavegottobekiddingme"}, "edited": false, "score": 0, "creation_date": 1430944158, "post_id": 30084253, "comment_id": 48287077, "body": "It&#39;s been hours and I&#39;m still having this error. I&#39;ve even shifted Code::Blocks to use my custom makefile and it&#39;s still not working."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4429178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tLi0c.jpg?s=128&g=1", "display_name": "YouHaveGotToBeKiddingMe", "link": "https://stackoverflow.com/users/4429178/youhavegottobekiddingme"}, "edited": false, "score": 0, "creation_date": 1431094580, "post_id": 30106549, "comment_id": 48361609, "body": "Good idea so I gave it a shot. It didn&#39;t work but thank you anyways"}, {"owner": {"reputation": 1009, "user_id": 2453661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a44afa0c663b486bff7891d92df52c?s=128&d=identicon&r=PG", "display_name": "Alberto M", "link": "https://stackoverflow.com/users/2453661/alberto-m"}, "reply_to_user": {"reputation": 55, "user_id": 4429178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tLi0c.jpg?s=128&g=1", "display_name": "YouHaveGotToBeKiddingMe", "link": "https://stackoverflow.com/users/4429178/youhavegottobekiddingme"}, "edited": false, "score": 0, "creation_date": 1431096936, "post_id": 30106549, "comment_id": 48363365, "body": "@MKWhit OK, I expanded on my answer"}], "tags": [], "owner": {"reputation": 1009, "user_id": 2453661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a44afa0c663b486bff7891d92df52c?s=128&d=identicon&r=PG", "display_name": "Alberto M", "link": "https://stackoverflow.com/users/2453661/alberto-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1431096875, "last_edit_date": 1431096875, "creation_date": 1431015411, "answer_id": 30106549, "question_id": 30084253, "link": "https://stackoverflow.com/questions/30084253/object-listed-in-header-file-yet-undefined-reference-in-cpp-file/30106549#30106549", "title": "Object listed in header file, yet undefined reference in cpp file", "body": "<p>I think the likely problem is that you forgot to include <code>Heap_PriorityQueue.cpp</code> in the makefile recipe for  <code>Airworthy.o</code>. So the compiler is finding the definitions for the functions of the queue, but not the funtions themselves (that is the meaning of \"undefined reference\" in the linking stage)</p>\n\n<p>EDIT: check if the build process produces a <code>Heap_PriorityQueue.o</code> file, and if this file is included in the final commandline that creates the exe.</p>\n"}], "owner": {"reputation": 55, "user_id": 4429178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tLi0c.jpg?s=128&g=1", "display_name": "YouHaveGotToBeKiddingMe", "link": "https://stackoverflow.com/users/4429178/youhavegottobekiddingme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1408, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431096875, "creation_date": 1430935117, "last_edit_date": 1430939530, "question_id": 30084253, "link": "https://stackoverflow.com/questions/30084253/object-listed-in-header-file-yet-undefined-reference-in-cpp-file", "title": "Object listed in header file, yet undefined reference in cpp file", "body": "<p>In the class, in my header file, in the private section of the class I have </p>\n\n<pre><code> Heap_PriorityQueue&lt;Passenger&gt; oldBoardingQueue;\n</code></pre>\n\n<p>I have <code>#include \"Heap_PriorityQueue.h\"</code> in both the header and the cpp just to be safe.\nI haven't even started using it in my cpp file, yet when I try to compile the cpp file throws up a bunch of:</p>\n\n<pre><code>undefiend reference to 'Heap_PriorityQueue&lt;Passenger&gt;::(insert function for Heap_PriorityQueue class isEmpty, add, etc.)\n</code></pre>\n\n<p>Followed by several</p>\n\n<pre><code>undefined reference to 'non-virtual thunk to Heap_PriorityQueue&lt;Passenger&gt;::(Heap_PriorityQueue functions again)\n</code></pre>\n\n<p>Unsure of how to proceed. Am I declaring incorrectly?</p>\n\n<p>Edit:</p>\n\n<p>Passenger is another class for creating Passenger objects holding the passenger's data (name, row, priority/key, etc).</p>\n\n<p>Not sure what's meant by 'linker command' (I'm a student/newb) but the makefile for airworthy.cpp and airworthy.h files are as follows:</p>\n\n<pre><code>Airworthy.o: Airworthy.cpp Airworthy.h  Heap_PriorityQueue.h NotFoundException.h PrecondViolatedExcep.h Passenger.h\ng++ -std=gnu++11 -ggdb -c Airworthy.cpp\n</code></pre>\n\n<p>Airworthy.h is as follows:</p>\n\n<pre><code>#ifndef AIRWORTHY_H\n#define AIRWORTHY_H\n\n#include \"Heap_PriorityQueue.h\"\n#include \"Passenger.h\"\n\nusing namespace std;\n\nclass Airworthy\n{\nprivate:\n\n    int oldBoardingSeconds;\n    int randomBoardingSeconds;\n    Heap_PriorityQueue&lt;Passenger&gt; oldBoardingQueue;\n    Heap_PriorityQueue&lt;Passenger&gt; randomBoardingQueue;\n    Passenger thisPassenger;\n\npublic:\n\n    Airworthy();\n    void inputFileData(ifstream&amp; inputFile);\n    void loadQueue(ifstream&amp; inputFile, ofstream&amp; outputFile);\n    void runSim();\n    void setOldBoardingPriority();\n    void setRandomBoardingPriority();\n};\n\n#endif\n</code></pre>\n\n<p>Just realized that the error hones in on the first use of the Airworthy constructor which I've just had empty for now. Here's the first part of Airworthy.cpp</p>\n\n<pre><code>#include \"Airworthy.h\"\n#include \"Heap_PriorityQueue.h\"\n#include \"Passenger.h\"\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\n\nAirworthy::Airworthy()\n{\n}\n</code></pre>\n\n<p>Tried putting different things inside the constructor (including the Heap_PriorityQueues) but doesn't seem to make a difference. Calling the constructor in the main cpp file makes that file also generate the same errors.</p>\n\n<p>Heap_PriorityQueue.h is as follows: </p>\n\n<pre><code>#ifndef _HEAP_PRIORITY_QUEUE\n#define _HEAP_PRIORITY_QUEUE\n\n#include \"ArrayMaxHeap.h\"\n#include \"PriorityQueueInterface.h\"\n\ntemplate&lt;class ItemType&gt;\nclass Heap_PriorityQueue : public PriorityQueueInterface&lt;ItemType&gt;,\nprivate ArrayMaxHeap&lt;ItemType&gt;\n{\npublic:\n   Heap_PriorityQueue();\n   bool isEmpty() const;\n   bool add(const ItemType&amp; newEntry);\n   bool remove();\n\n   /** @pre The priority queue is not empty. */\n   ItemType peek() const throw(PrecondViolatedExcep);\n}; // end Heap_PriorityQueue\n\n\n#endif\n</code></pre>\n\n<p>I'm at my wits end, I've been trying to make this damned thing work for hours now.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1430935265, "post_id": 30084233, "comment_id": 48281614, "body": "Where do you close the bracket of the <code>else if</code>? And of the <code>while</code> loop, and of the function? And anyway, you are calling <code>printArray(string_array)</code> but the function requires 2 arguments. This code shouldn&#39;t even compile."}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430935268, "post_id": 30084233, "comment_id": 48281617, "body": "homework? You are not showing relevant sections of your code."}, {"owner": {"reputation": 69, "user_id": 4450645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4b434196e59436230c278d2b317fc61?s=128&d=identicon&r=PG&f=1", "display_name": "MistFTW", "link": "https://stackoverflow.com/users/4450645/mistftw"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430935703, "post_id": 30084233, "comment_id": 48281878, "body": "@Fabio, Sorry, I did not copy and paste this directly from visual studios. I did not want to ask the direct problem, and so I came up with a smaller question that still needs to solve the <code>exit</code> problem. This is actually all of my code, sans <code>main()</code>, which just calls <code>a_function();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2405, "user_id": 3761982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/u8soe.png?s=128&g=1", "display_name": "CrApHeR", "link": "https://stackoverflow.com/users/3761982/crapher"}, "is_accepted": true, "score": 0, "last_activity_date": 1430937477, "last_edit_date": 1430937477, "creation_date": 1430937125, "answer_id": 30084838, "question_id": 30084233, "link": "https://stackoverflow.com/questions/30084233/taking-exit-as-user-input-in-c/30084838#30084838", "title": "Taking &quot;exit&quot; as user input in C++", "body": "<p>I think this changes in your code will solve the problem.  Please, try with this code:</p>\n\n<pre><code>void printArray(string string_array[], int size){\n    for (int i = 0; i &lt; size; i++){\n        cout &lt;&lt; string_array[i];\n    }\n\n}\nvoid a_func(){\n    string string_array[10];\n    string user_input;\n\n    while (user_input != \"exit\"){\n        cout &lt;&lt; \"Please enter a number between 0 - 100: \";\n        cin &gt;&gt; user_input;\n        if (user_input == \"exit\"){\n            printArray(string_array, 10);\n        }\n        else if (stoi(user_input) &lt; 0 || stoi(user_input) &gt; 100){\n            cout &lt;&lt; \"Error, please re-enter the number between 0 - 100: \";\n            cin &gt;&gt; user_input;\n\n            int array_index = stoi(user_input) / 10;\n            string_array[array_index] = \"*\";\n        }\n    }\n}\n</code></pre>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1430937315, "creation_date": 1430937315, "answer_id": 30084908, "question_id": 30084233, "link": "https://stackoverflow.com/questions/30084233/taking-exit-as-user-input-in-c/30084908#30084908", "title": "Taking &quot;exit&quot; as user input in C++", "body": "<p>stoi doesn't accept non-numbers. Try this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid printArray(string string_array[], int size){\n    for (int i = 0; i &lt; size; i++){\n        cout &lt;&lt; string_array[i];\n    }\n}\n\nvoid a_func(){\n    string string_array[10];\n    string user_input;\n\n    while (user_input != \"exit\"){\n        cout &lt;&lt; \"Please enter a number between 0 - 100: \";\n        cin &gt;&gt; user_input;\n        //cout &lt;&lt; \"You have printed \" &lt;&lt; user_input &lt;&lt; endl;\n\n        bool isNumber = true;\n        for(string::const_iterator k = user_input.begin(); k != user_input.end(); ++k) {\n            if (isdigit(*k) == false) {\n                isNumber = false;\n                break;\n            }\n        }\n\n        if (isNumber) {\n            int number = stoi(user_input);\n            if (number &lt; 0 || number &gt; 100){\n                cout &lt;&lt; \"Error, please re-enter the number between 0 - 100: \";\n                continue;\n            } else {\n                int array_index = stoi(user_input) / 10;\n                string_array[array_index] = \"*\";\n            }\n        } else if (user_input == \"exit\"){\n            printArray(string_array, 10);\n            break;\n        } else {\n            // Not a number and not \"exit\"; do nothing?\n        }\n    }\n}\n\nint main() {\n    a_func();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4450645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4b434196e59436230c278d2b317fc61?s=128&d=identicon&r=PG&f=1", "display_name": "MistFTW", "link": "https://stackoverflow.com/users/4450645/mistftw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 30084838, "answer_count": 2, "score": -1, "last_activity_date": 1430937477, "creation_date": 1430935050, "last_edit_date": 1430935622, "question_id": 30084233, "link": "https://stackoverflow.com/questions/30084233/taking-exit-as-user-input-in-c", "title": "Taking &quot;exit&quot; as user input in C++", "body": "<p>I'm currently trying to write code that takes user input as strings, and then convert them to integers if I need to. If the user decides to enter <code>exit</code> then the program should move on to calling a function. Here is what I have so far:</p>\n\n<pre><code>void printArray(string string_array[], int size){\n    for (int i = 0; i &lt; size; i++){\n        cout &lt;&lt; string_array[i];\n    }\n\n}\nvoid a_func(){\n    string string_array[10];\n    string user_input;\n\n    while (user_input != \"exit\"){\n        cout &lt;&lt; \"Please enter a number between 0 - 100: \";\n        cin &gt;&gt; user_input;\n        if (stoi(user_input) &lt; 0 || stoi(user_input) &gt; 100){\n            cout &lt;&lt; \"Error, please re-enter the number between 0 - 100: \";\n            cin &gt;&gt; user_input;\n        }\n        else if (user_input == \"exit\"){\n            printArray(string_array, 10);\n        }\n        int array_index = stoi(user_input) / 10;\n        string_array[array_index] = \"*\";\n}\n</code></pre>\n\n<p>However, as I'm testing the program, the console is aborting the program if I enter <code>exit</code>. Is there a way for me to enter exit and then the program calls <code>printArray</code>?</p>\n"}, {"tags": ["c++", "enums", "switch-statement"], "comments": [{"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1430935089, "post_id": 30084131, "comment_id": 48281496, "body": "<code>a_class = a;</code> seems clearer. <code>enum</code>s by default start from 0 and increse by one."}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "reply_to_user": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1430935337, "post_id": 30084131, "comment_id": 48281654, "body": "@zch Yes, but only with additional check - otherwise it is not safe. <code>int</code> can yields value, that is beyond scope of this enumeration."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1430937037, "post_id": 30084131, "comment_id": 48282681, "body": "As an aside, I&#39;d recommend only passing large classes by const reference, for primitives it is <a href=\"https://stackoverflow.com/questions/2108084/pass-by-reference-more-expensive-than-pass-by-value\">not necessary</a>, in fact it is often slightly less efficient, you should just pass them by value."}], "answers": [{"comments": [{"owner": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "edited": false, "score": 0, "creation_date": 1430935070, "post_id": 30084203, "comment_id": 48281482, "body": "that&#39;s beautiful. Thanks."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1430934975, "creation_date": 1430934975, "answer_id": 30084203, "question_id": 30084131, "link": "https://stackoverflow.com/questions/30084131/c-using-an-int-to-set-an-enum-from-a-list/30084203#30084203", "title": "C++ Using an int to set an enum from a list", "body": "<p>Your constructor could just be</p>\n\n<pre><code>Character_Class(const classofnpc&amp; a, const int&amp; b)\n: a_class { a }, lvl { b }\n{ }\n</code></pre>\n\n<p>Since the <code>enum</code> is exposed publicly, you don't need the switch statement. You could instantiate an instance of this class like so</p>\n\n<pre><code>Character_Class foo{ Character_Class::ROGUE, 12 };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "edited": false, "score": 0, "creation_date": 1430937831, "post_id": 30084224, "comment_id": 48283139, "body": "a_class = static_cast&lt;classofnpc&gt;(a);   Works great for what I&#39;m doing. I already have a check to make sure the int &#39;a&#39; is within bounds when asking for the input in another function.  Thanks for the Answer."}], "tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": false, "score": 1, "last_activity_date": 1430935037, "creation_date": 1430935037, "answer_id": 30084224, "question_id": 30084131, "link": "https://stackoverflow.com/questions/30084131/c-using-an-int-to-set-an-enum-from-a-list/30084224#30084224", "title": "C++ Using an int to set an enum from a list", "body": "<blockquote>\n  <p>Is there a clearer, shorter way to do this operation?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p><strong>1.</strong> Add sentinel value:</p>\n\n<pre><code>enum classofnpc\n{\n    CLERIC,\n    //cut...\n    WARLOCK,\n    CLS_LIMIT = WARLOCK //set sentinel to largest value\n};\n</code></pre>\n\n<p><strong>2.</strong> Check and cast:</p>\n\n<pre><code>Character_Class(const int&amp; a, const int&amp; b)\n{\n    if(a &gt; CLS_LIMIT)\n        //report error, wrong value passed\n    else\n        a_class = static_cast&lt;classofnpc&gt;(a);\n\n    lvl = b;\n}\n</code></pre>\n\n<p>This is a perfect solution if you want to use numerical values for some reason (user input?). However, if you can, the most type-safe way would be to construct your object using <code>classofnpc</code> as first parameter in constructor (instead of plain <code>int</code>).</p>\n"}], "owner": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430935107, "creation_date": 1430934747, "question_id": 30084131, "link": "https://stackoverflow.com/questions/30084131/c-using-an-int-to-set-an-enum-from-a-list", "title": "C++ Using an int to set an enum from a list", "body": "<p>I am using a header file for character class in a game (doing it as a side project for experience).  I have it working but it just feels like I'm doing this the long way. I ask for an 'int' to set the character class then set it based on the enum position using a switch statement. Is there a clearer, shorter way to do this operation?  Am I doing anything here that would be considered bad practice?</p>\n\n<pre><code>class Character_Class {\n  public:\n    enum classofnpc { CLERIC, FIGHTER, ROGUE, WIZARD, BARBARIAN, DRUID, PALADIN, SORCERER, BARD, MONK, RANGER, WARLOCK };\n\n    Character_Class(const int&amp; a, const int&amp; b){\n        switch (a) {\n            case 0 :\n                a_class = CLERIC;\n                break;\n            case 1 :\n                a_class = FIGHTER;\n                break;\n            case 2 :\n                a_class = ROGUE;\n                break;\n            case 3 :\n                a_class = WIZARD;\n                break;\n            case 4 :\n                a_class = BARBARIAN;\n                break;\n            case 5 :\n                a_class = DRUID;\n                break;\n            case 6 :\n                a_class = PALADIN;\n                break;\n            case 7 :\n                a_class = SORCERER;\n                break;\n            case 8 :\n                a_class = BARD;\n                break;\n            case 9 :\n                a_class = MONK;\n                break;\n            case 10 :\n                a_class = RANGER;\n                break;\n            case 11 :\n                a_class = WARLOCK;\n                break;\n        }\n        lvl = b;\n    }\n  private:\n    classofnpc a_class;\n    int lvl;\n};\n</code></pre>\n"}, {"tags": ["c++", "qt", "qmediaplayer"], "comments": [{"owner": {"reputation": 2300, "user_id": 353094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2ef00cd1457bcdc46f506983384f57e?s=128&d=identicon&r=PG", "display_name": "leetNightshade", "link": "https://stackoverflow.com/users/353094/leetnightshade"}, "edited": false, "score": 2, "creation_date": 1441990427, "post_id": 30084109, "comment_id": 52914995, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/24377720/play-mp3-file-in-the-resource-with-qmediaplayer\">Play mp3 file in the resource with QMediaPlayer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37736, "user_id": 2153571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d5573368e2aa8dd2039de1c545ce2b9c?s=128&d=identicon&r=PG", "display_name": "juzzlin", "link": "https://stackoverflow.com/users/2153571/juzzlin"}, "edited": false, "score": 0, "creation_date": 1458165959, "post_id": 30085625, "comment_id": 59744200, "body": "I&#39;m also having no sound (Qt 5.5) when I try to play from a resource. If I copy the file to a local file, then it works fine."}, {"owner": {"reputation": 532, "user_id": 5137945, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/fa894819bb206e2dc0a26d82da77a5d4?s=128&d=identicon&r=PG&f=1", "display_name": "guan boshen", "link": "https://stackoverflow.com/users/5137945/guan-boshen"}, "edited": false, "score": 4, "creation_date": 1506429594, "post_id": 30085625, "comment_id": 79810627, "body": "Great answer! thank you! And remember to remove <code>::fromLocalFile</code> when add <code>qrc:</code> to the path."}], "tags": [], "owner": {"reputation": 1402, "user_id": 3088216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0069b50a6eb086f64e842fab5c558a6e?s=128&d=identicon&r=PG", "display_name": "rsht", "link": "https://stackoverflow.com/users/3088216/rsht"}, "is_accepted": false, "score": 15, "last_activity_date": 1430939910, "last_edit_date": 1430939910, "creation_date": 1430939608, "answer_id": 30085625, "question_id": 30084109, "link": "https://stackoverflow.com/questions/30084109/using-a-resource-file-in-qmediaplayer/30085625#30085625", "title": "Using a resource file in QMediaPlayer", "body": "<p>Use <code>m_player-&gt;setMedia(QUrl(\"qrc:/audio/theme.mp3\"));</code></p>\n\n<p>If you are using Qt Creator, you can copy this url to clipboard by pressing right button on the audio file in the side bar and choosing <code>Copy url \"...\"</code>.</p>\n"}], "owner": {"reputation": 7207, "user_id": 1523238, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e11e8f40ff750f4fb1e0f4663b520e3?s=128&d=identicon&r=PG&f=1", "display_name": "Oskar Persson", "link": "https://stackoverflow.com/users/1523238/oskar-persson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5875, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1438679514, "creation_date": 1430934670, "question_id": 30084109, "link": "https://stackoverflow.com/questions/30084109/using-a-resource-file-in-qmediaplayer", "title": "Using a resource file in QMediaPlayer", "body": "<p>How do I load a .mp3 file to use in a <code>QMediaPlayer</code> from a .qrc resource file?</p>\n\n<p>This is what I have so far</p>\n\n<pre><code>QMediaPlayer *player = new QMediaPlayer;\nplayer-&gt;setMedia(QUrl::fromLocalFile(\":/audio/theme.mp3\"));\nplayer-&gt;play();\n</code></pre>\n\n<p>resources.qrc:</p>\n\n<pre><code>&lt;RCC&gt;\n    &lt;qresource prefix=\"/audio\"&gt;\n        &lt;file&gt;theme.mp3&lt;/file&gt;\n    &lt;/qresource&gt;\n&lt;/RCC&gt;\n</code></pre>\n\n<p>theme.mp3 is located in the project directory.</p>\n"}, {"tags": ["c++", "c", "lua"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1430934747, "post_id": 30084007, "comment_id": 48281256, "body": "Have you looked at any of the <i>number</i> of C++ binding libraries that exist for lua?"}, {"owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "edited": false, "score": 0, "creation_date": 1430934826, "post_id": 30084007, "comment_id": 48281313, "body": "See <a href=\"http://stackoverflow.com/questions/8094992/register-c-function-in-lua\" title=\"register c function in lua\">stackoverflow.com/questions/8094992/register-c-function-in-l&zwnj;&#8203;ua</a>"}, {"owner": {"reputation": 347, "user_id": 2359879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3f675292839a2c69f5f0be5a33a45105?s=128&d=identicon&r=PG", "display_name": "413X", "link": "https://stackoverflow.com/users/2359879/413x"}, "edited": false, "score": 0, "creation_date": 1430935191, "post_id": 30084007, "comment_id": 48281558, "body": "Thank you uesp, that looked interesting. Will read up and give some of the ideas a try."}], "owner": {"reputation": 347, "user_id": 2359879, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3f675292839a2c69f5f0be5a33a45105?s=128&d=identicon&r=PG", "display_name": "413X", "link": "https://stackoverflow.com/users/2359879/413x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 1, "closed_date": 1430947286, "answer_count": 0, "score": 0, "last_activity_date": 1430937716, "creation_date": 1430934375, "question_id": 30084007, "link": "https://stackoverflow.com/questions/30084007/lua-set-a-function-from-a-class", "closed_reason": "Duplicate", "title": "Lua - set a function from a class", "body": "<p>I am currently trying to learn how to bridge Lua with C++ and write scripts. The problem that I have is that most of the tutorial or documentation is somewhat simplified. Or maybe I have the wrong approach, which is why I am asking here now.</p>\n\n<p>I am trying to initialize the meta table and more specifically. Trying to add functions. Like so;</p>\n\n<pre><code>luaL_Reg rmFuncs[] =\n    {\n        { \"rotate\", RotateBlocks },\n        { NULL, NULL }\n    };\n</code></pre>\n\n<p>But to add RotateBlocks is a bit tricky. All examples that I've found is done in main and not in classes. RotateBlocks is actually Application::RotateBlocks. </p>\n\n<p>So the only way for me to make it work is like this:</p>\n\n<pre><code>static int RotateBlocks(lua_State* L);\n</code></pre>\n\n<p>Is this the only way? Because this causes a lot of problems. As it is static, I cant actually rotate the objects that I want inside the function. Because all my membervalues complain on the function being static.</p>\n\n<p>So how do I actually do anything useful inside my functions and not just printf a random sentence as in all the tutorials or documentation?</p>\n"}, {"tags": ["c++", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 7, "creation_date": 1430934109, "post_id": 30083887, "comment_id": 48280828, "body": "A pointer should either point to a valid object, or <code>nullptr</code> everything else is undefined behavior."}, {"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "edited": false, "score": 2, "creation_date": 1430934204, "post_id": 30083887, "comment_id": 48280896, "body": "<i>But I&#39;m just wondering excatly how bad it is</i> <a href=\"https://xkcd.com/748/\" rel=\"nofollow noreferrer\">xkcd.com/748</a>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1430934230, "post_id": 30083887, "comment_id": 48280909, "body": "<a href=\"http://stackoverflow.com/q/29825352/583833\">Related question</a>"}, {"owner": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1430934282, "post_id": 30083887, "comment_id": 48280942, "body": "A well found @Borgleader. I had been searching quite a bit. But did not stumble upon that one."}, {"owner": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "edited": false, "score": 0, "creation_date": 1430934530, "post_id": 30083887, "comment_id": 48281128, "body": "Oh, this seems to also be slightly related. <a href=\"http://stackoverflow.com/questions/3304795/can-a-pointer-address-ever-be-negative\" title=\"can a pointer address ever be negative\">stackoverflow.com/questions/3304795/&hellip;</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1430935236, "post_id": 30083887, "comment_id": 48281588, "body": "@Borgleader I am not sure about that from <i>basic.compound</i>: <code>A valid value of an object pointer type represents either the address of a byte in memory (1.7) or a null pointer (4.10)</code> wording came from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1367.html#73\" rel=\"nofollow noreferrer\">DR 73</a>"}, {"owner": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1432110708, "post_id": 30083887, "comment_id": 48781633, "body": "@Borgleader, &quot;A pointer should either point to a valid object, or nullptr everything else is undefined behavior.&quot; Do you have any quote from the standard which states this?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1432125249, "post_id": 30083887, "comment_id": 48791992, "body": "@laurisvr No, I took that from chat after having discussed the topic of the related question in my earlier comment."}], "answers": [{"comments": [{"owner": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "edited": false, "score": 0, "creation_date": 1430934955, "post_id": 30084095, "comment_id": 48281410, "body": "Well my 2 cent&#39;s would be that it&#39;s an &#39;intuitive&#39; thing to do. You flags something with a nullptr, so why not flag something with 1. I&#39;m aware it&#39;s a violation and tempers might rise. That&#39;s why i covered myself in the p.s.:)."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "edited": false, "score": 0, "creation_date": 1430935762, "post_id": 30084095, "comment_id": 48281912, "body": "I&#39;d worry less about tempers and religious wars than accidental ommisions that lead to crashes.  If you absolutely need a stand in value, then create a global pointer called dummy that is set to null, or have it point to something that will cause an assert if it is invoked."}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": false, "score": 2, "last_activity_date": 1430934624, "creation_date": 1430934624, "answer_id": 30084095, "question_id": 30083887, "link": "https://stackoverflow.com/questions/30083887/which-dummy-pointer-values-are-okay/30084095#30084095", "title": "Which dummy pointer values are okay", "body": "<p>I bet your compiler warns when you do this?  That in itself should tell you that it is bad and should be avoided.</p>\n\n<p>Lots of old crusty code has guards against NULL (or nullptr) for values.  You place a -1 in there, which turns into an unsigned 0xffffffff address (32-bit land) into that pointer and it will merrily run though all sorts of things you don't want it to run through.  Best case is an immediate access violation / seg fault.  Worst case is no one notices and things go out of wack 2 months later and you are found as the, well... 'not smart person' who illegally placed a non-pointer value into a pointer and blew things up.  Jobs can be lost for mistakes like this.</p>\n\n<p>As an aside, why would 'people' want to use 1 or -1 in a pointer?  Drop nullptr, NULL, or whatever your language supports in there and be done with it.  Otherwise put a valid pointer in there and call it good.</p>\n"}, {"comments": [{"owner": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "edited": false, "score": 0, "creation_date": 1432110455, "post_id": 30084219, "comment_id": 48781487, "body": "I agree with this answer. It&#39;s nasty to do it, but in most aspects you can treat a pointer like an int and you&#39;d be fine. Doing so would be utterly stupid, but you could do it:). It&#39;s the resolution where the problems would arise."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 1, "last_activity_date": 1430935010, "creation_date": 1430935010, "answer_id": 30084219, "question_id": 30083887, "link": "https://stackoverflow.com/questions/30083887/which-dummy-pointer-values-are-okay/30084219#30084219", "title": "Which dummy pointer values are okay", "body": "<p>It depends on your compiler and (mostly) OS -- on most operating systems there are ranges of addresses that can never be valid.  So on such an OS, it is safe to use such addresses as 'magic' values for a pointer that will never compare as equal to any valid object.  As long as you never dereference them they should be fine -- and even if you do dereference it, the OS may define the behavior (generally throwing a particular signal).</p>\n\n<p>A more portable alternative is to create 'dummy' global objects and use pointers to them as your special tags.  No other valid object pointer will ever compare as equal to the dummy object pointer, and the extra overhead for the dummy object is minimal.</p>\n"}, {"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1430937955, "post_id": 30084964, "comment_id": 48283216, "body": "It is not clear to me this is the case in C++ see <a href=\"http://stackoverflow.com/questions/30083887/which-dummy-pointer-values-are-okay#comment48281588_30083887\">my comment above</a> and the DR that the wording came from."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1430937500, "creation_date": 1430937500, "answer_id": 30084964, "question_id": 30083887, "link": "https://stackoverflow.com/questions/30083887/which-dummy-pointer-values-are-okay/30084964#30084964", "title": "Which dummy pointer values are okay", "body": "<p>The only pointer values you can <em>portably</em> use are pointers to objects that currently exist and null pointers. (I'm ignoring function pointers and member pointers.)</p>\n\n<p>The purpose of the null pointer is to have a pointer value that doesn't point to any object, and that compares unequal to any pointer that does point to an object. The language only provides one such pointer value for each pointer type.</p>\n\n<p>Sometimes it can be convenient to have more than one distinguished pointer value.</p>\n\n<p>You can define such values yourself -- for example:</p>\n\n<pre><code>const some_type* foo = reinterpret_cast&lt;some_type*&gt;(-1);\nconst some_type* bar = reinterpret_cast&lt;some_type*&gt;(-2);\n</code></pre>\n\n<p>Strictly speaking, using either value, even without dereferencing it, has undefined behavior. (I know that's the case for C; I think it's also true for C++.) But if you happen to know that those values are distinct from any pointers that point to actual objects, and that comparisons to them behave as expected, then you can get away with it.</p>\n\n<p>There's some precedent for this in the C standard library. <code>&lt;signal.h&gt;</code> defines three macros for signal handler function pointers, <code>SIG_DFL</code>, <code>SIG_ERR</code>, and <code>SIG_IGN</code>. In some implementations these are defined as the constants -1, 0, and 1 cast to the appropriate pointer type. Those definitions are not portable -- but since they're part of the implementation itself, they don't have to be. The only requirement is that they must compare unequal to any pointer to a user-defined function. (In the implementation I'm using, <code>SIG_DFL</code> happens to be a null pointer; that's not required.)</p>\n\n<p>If a library defines such a pointer, feel free to use it. If it fails, it's a bug in the library. If you want to define such a pointer yourself, be careful, and understand that it might not work correctly on all implementations.</p>\n\n<p>An alternative is to define a static object of the appropriate type, and use a pointer to that object:</p>\n\n<pre><code>static some_type foo_obj;\nstatic some_type bar_obj;\nconst some_type* foo = &amp;foo_obj;\nconst some_type* bar = &amp;bar_obj;\n</code></pre>\n\n<p>This is portable <em>and</em> it gives you pointer values that are guaranteed to compare unequal to the null pointer and to any pointers to user-defined objects.</p>\n"}], "owner": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1840, "favorite_count": 0, "accepted_answer_id": 30084219, "answer_count": 3, "score": 0, "last_activity_date": 1432110782, "creation_date": 1430934017, "last_edit_date": 1432110782, "question_id": 30083887, "link": "https://stackoverflow.com/questions/30083887/which-dummy-pointer-values-are-okay", "title": "Which dummy pointer values are okay", "body": "<p>This is something that's been on my mind for a long time. Every once so often i see people use 1, or -1 as a dummy value for a pointer. To safe the need of a different variable.</p>\n\n<p>Is it okay to use pointers like this? I suppose -1 is okay. But is it also okay to use other negative numbers? And can I be sure 1 isn't a used memory location? And if so, up to which value can i use memory pointers.</p>\n\n<p>P.s. I'm aware storing other data especially positive values in pointers, is very, very bad practice. But I'm just wondering what would be the consequences in  any real life situation.</p>\n"}, {"tags": ["c++", "makefile", "cmake", "mingw"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1430934424, "post_id": 30083759, "comment_id": 48281057, "body": "To make a dll you need <code>add_library(mydlltarget SHARED mysourcefiles)</code> not <code>add_executable(myexetarget mysourcefiles)</code>"}, {"owner": {"reputation": 2901, "user_id": 1437164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a2d9ca2232be88e55f3268bc3b8f871a?s=128&d=identicon&r=PG", "display_name": "PolGraphic", "link": "https://stackoverflow.com/users/1437164/polgraphic"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1430934504, "post_id": 30083759, "comment_id": 48281111, "body": "Wow, that would be the only change here? Quite powerful ;)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1430934612, "post_id": 30083759, "comment_id": 48281177, "body": "You probably need to change the headers for the classes you want to export. I am not familiar with mingw dlls so I can&#39;t help with that."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1430934673, "post_id": 30083759, "comment_id": 48281215, "body": "Hmm. Looks the same as Visual Studio: <a href=\"http://www.mingw.org/wiki/sampledll\" rel=\"nofollow noreferrer\">mingw.org/wiki/sampledll</a> see the part about <code>EXAMPLE_DLL</code>."}, {"owner": {"reputation": 2901, "user_id": 1437164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a2d9ca2232be88e55f3268bc3b8f871a?s=128&d=identicon&r=PG", "display_name": "PolGraphic", "link": "https://stackoverflow.com/users/1437164/polgraphic"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1430934828, "post_id": 30083759, "comment_id": 48281314, "body": "Yes, indeed :) Can you make an answer from your comments? I can accept it."}], "answers": [{"tags": [], "owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "is_accepted": true, "score": 1, "last_activity_date": 1430940255, "last_edit_date": 1430940255, "creation_date": 1430938124, "answer_id": 30085162, "question_id": 30083759, "link": "https://stackoverflow.com/questions/30083759/output-the-dll-instead-of-exe-with-cmake-mingw/30085162#30085162", "title": "Output the DLL instead of .exe with cmake/mingw", "body": "<p>To make a dll you need <code>add_library(mydlltarget SHARED mysourcefiles)</code> instead of <code>add_executable(myexetarget mysourcefiles)</code></p>\n\n<p>Also to make a dll from code that was an executable you will at minimum have to modify your headers to export the classes/functions that you want exported. From the documentation for <a href=\"http://%20mingw.org/wiki/sampledll\" rel=\"nofollow\">building a dll with mingw</a> it appears that the process is similar to Visual Studio. Where you have a header define a macro that translates to <code>__declspec(dllexport)</code> when building the dll and <code>__declspec(dllimport)</code> when using the dll. </p>\n\n<p>A sample of the export header looks like this:</p>\n\n<pre><code>#ifdef BUILDING_EXAMPLE_DLL\n#define EXAMPLE_DLL __declspec(dllexport)\n#else\n#define EXAMPLE_DLL __declspec(dllimport)\n#endif\n</code></pre>\n\n<p>Then the modification for your class is like this:</p>\n\n<pre><code>class EXAMPLE_DLL MyClass\n{\npublic:\n        MyClass() {};\n        virtual ~MyClass() {};\n        void func(void);\n};\n</code></pre>\n\n<p>Then you need to define <code>EXAMPLE_DLL</code> when building the dll. You can do that in CMake with an <code>add_definitions(-DEXAMPLE_DLL)</code></p>\n\n<p>Also CMake provides support for generating the export header with <code>GENERATE_EXPORT_HEADER</code></p>\n\n<p><a href=\"http://www.cmake.org/cmake/help/v3.0/module/GenerateExportHeader.html\" rel=\"nofollow\">Doc for GenerateExportHeader</a></p>\n"}], "owner": {"reputation": 2901, "user_id": 1437164, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a2d9ca2232be88e55f3268bc3b8f871a?s=128&d=identicon&r=PG", "display_name": "PolGraphic", "link": "https://stackoverflow.com/users/1437164/polgraphic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1603, "favorite_count": 0, "accepted_answer_id": 30085162, "answer_count": 1, "score": 1, "last_activity_date": 1430940255, "creation_date": 1430933605, "question_id": 30083759, "link": "https://stackoverflow.com/questions/30083759/output-the-dll-instead-of-exe-with-cmake-mingw", "title": "Output the DLL instead of .exe with cmake/mingw", "body": "<p>I'm not very familiar with both cmake and mingw.</p>\n\n<p>I have some source code that can be build with it (and the build process works fine with <code>mingw32-make</code>). The problem is, I would like to output the DLLs and not the .exe files.</p>\n\n<p>I have some <code>CMakeList</code> file that I believe stores the configuration I have to change (that part should be responsible to produce the .exe files for .cpp files in <code>Examples/</code> directory, taking some dependencies into account):</p>\n\n<pre><code># C examples\nif(PSMOVE_BUILD_EXAMPLES)\n    foreach(EXAMPLE example multiple dump_calibration battery_check)\n        add_executable(${EXAMPLE} examples/c/${EXAMPLE}.c)\n        target_link_libraries(${EXAMPLE} psmoveapi)\n    endforeach()\n\n    if(PSMOVE_BUILD_TRACKER AND PSMOVE_BUILD_TUIO_SERVER)\n        include_directories(${PSMOVEAPI_SOURCE_DIR}/external/TUIO_CPP/TUIO)\n        include_directories(${PSMOVEAPI_SOURCE_DIR}/external/TUIO_CPP/oscpack)\n        add_executable(tuio_server examples/c/tuio_server.cpp\n            external/TUIO_CPP/TUIO/TuioClient.cpp\n...\n            external/TUIO_CPP/oscpack/ip/win32/NetworkingUtils.cpp\n            external/TUIO_CPP/oscpack/ip/win32/UdpSocket.cpp)\n        set_target_properties(tuio_server PROPERTIES\n            COMPILE_FLAGS -DOSC_HOST_LITTLE_ENDIAN)\n        target_link_libraries(tuio_server psmoveapi psmoveapi_tracker)\n    else()\n        # Disable the TUIO Server if we don't build the tracker\n        set(PSMOVE_BUILD_TUIO_SERVER OFF)\n    endif()\n\n    if(PSMOVE_BUILD_TRACKER)\n        foreach(EXAMPLE distance_calibration)\n            add_executable(${EXAMPLE} examples/c/${EXAMPLE}.c)\n            target_link_libraries(${EXAMPLE} psmoveapi psmoveapi_tracker)\n        endforeach()\n    endif()\nendif()\n</code></pre>\n\n<p>I guess I should add <code>-DBUILDING_EXAMPLE_DLL</code> and <code>-shared</code> options somewhere. But where exactly? Or maybe I'm missing the point?</p>\n"}, {"tags": ["c++", "windows", "keyboard-events", "keystroke"], "comments": [{"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1430935590, "post_id": 30083750, "comment_id": 48281800, "body": "What OS are you using?  And can you supply the code that you used to what Hurzelchen suggested?"}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1430935823, "post_id": 30083750, "comment_id": 48281945, "body": "Windows 7 and i am currently working on Hurzelchen code."}], "answers": [{"comments": [{"owner": {"reputation": 556, "user_id": 2870660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UpxBk.png?s=128&g=1", "display_name": "Hurzelchen", "link": "https://stackoverflow.com/users/2870660/hurzelchen"}, "reply_to_user": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 1, "creation_date": 1430934187, "post_id": 30083855, "comment_id": 48280883, "body": "how is the output different than what we would expect?"}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 0, "creation_date": 1430934553, "post_id": 30083855, "comment_id": 48281142, "body": "Output is p2 , don&#39;t know how."}, {"owner": {"reputation": 556, "user_id": 2870660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UpxBk.png?s=128&g=1", "display_name": "Hurzelchen", "link": "https://stackoverflow.com/users/2870660/hurzelchen"}, "reply_to_user": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 0, "creation_date": 1430935122, "post_id": 30083855, "comment_id": 48281514, "body": "just updated my question with a code snipped I used to send key strokes to an application."}, {"owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "edited": false, "score": 0, "creation_date": 1430937554, "post_id": 30083855, "comment_id": 48282986, "body": "Thank you Hurzelchen (&#39;@&#39;) is now printing. This will help me in my program."}], "tags": [], "owner": {"reputation": 556, "user_id": 2870660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UpxBk.png?s=128&g=1", "display_name": "Hurzelchen", "link": "https://stackoverflow.com/users/2870660/hurzelchen"}, "is_accepted": true, "score": 1, "last_activity_date": 1430935060, "last_edit_date": 1430935060, "creation_date": 1430933942, "answer_id": 30083855, "question_id": 30083750, "link": "https://stackoverflow.com/questions/30083750/how-to-print-press-using-keybd-event-function/30083855#30083855", "title": "How to print/press &#39;@&#39; using keybd_event function?", "body": "<p>Try the following:</p>\n\n<ol>\n<li>Press Shift</li>\n<li>Press 2</li>\n<li>Release 2</li>\n<li>Release Shift</li>\n</ol>\n\n<p><strong>Addendum</strong></p>\n\n<p>I just checked my own code where I did the same thing... <code>keybd_event</code> is deprecated (as stated on the site you linked), you should use <code>SendInput</code> instead.</p>\n\n<p>This are my two functions to send the key press and release:</p>\n\n<pre><code>void sendKeyDown(unsigned char keyCode)\n{\n    INPUT input;\n    input.type = INPUT_KEYBOARD;\n\n    input.ki.wVk = keyCode;\n    input.ki.dwFlags = 0;\n    input.ki.time = 0;\n    input.ki.dwExtraInfo = 0;\n\n    SendInput(1, &amp;input, sizeof(INPUT));\n}\n\nvoid sendKeyUp(unsigned char keyCode)\n{\n    INPUT input;\n    input.type = INPUT_KEYBOARD;\n\n    input.ki.wVk = keyCode;\n    input.ki.dwFlags = KEYEVENTF_KEYUP;\n    input.ki.time = 0;\n    input.ki.dwExtraInfo = 0;\n\n    SendInput(1, &amp;input, sizeof(INPUT));\n}\n</code></pre>\n\n<p>And this should then give you an <code>@</code>:</p>\n\n<pre><code>sendKeyDown(VK_SHIFT);\nsendKeyDown(0x32);\nsendKeyUp(0x32);\nsendKeyUp(VK_SHIFT);\n</code></pre>\n\n<p>Please check the <code>0x32</code>, I can't reliably test it at the moment to be the key <code>2</code>.</p>\n"}], "owner": {"reputation": 1554, "user_id": 4499919, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n2u5L.jpg?s=128&g=1", "display_name": "udit043", "link": "https://stackoverflow.com/users/4499919/udit043"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1648, "favorite_count": 0, "accepted_answer_id": 30083855, "answer_count": 1, "score": 2, "last_activity_date": 1430935060, "creation_date": 1430933577, "last_edit_date": 1430934938, "question_id": 30083750, "link": "https://stackoverflow.com/questions/30083750/how-to-print-press-using-keybd-event-function", "title": "How to print/press &#39;@&#39; using keybd_event function?", "body": "<p>To press 'a' code is</p>\n\n<pre><code>keybd_event(VkKeyScan(64),0,0,0);\n</code></pre>\n\n<p>Releasing key code is</p>\n\n<pre><code>keybd_event(VkKeyScan(64),0,KEYEVENTF_KEYUP,0);\n</code></pre>\n\n<p>For pressing '@' i need combination of two key - SHIFT &amp; 2 , but i don't know how.</p>\n\n<p>keybd_event (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646304(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms646304(v=vs.85).aspx</a>)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1430933710, "post_id": 30083726, "comment_id": 48280584, "body": "Does <code>c::calculate</code> have to be private? Otherwise <code>a</code> could call <code>.calculate</code> off of the <code>c</code> object it instantiated."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1430933823, "post_id": 30083726, "comment_id": 48280649, "body": "Your code sample doesn&#39;t make much sense. As well as there&#39;s not really a question."}, {"owner": {"reputation": 11, "user_id": 3166884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/038b6a3229f06132331eb3c21b964e21?s=128&d=identicon&r=PG&f=1", "display_name": "user3166884", "link": "https://stackoverflow.com/users/3166884/user3166884"}, "edited": false, "score": 0, "creation_date": 1430935178, "post_id": 30083726, "comment_id": 48281549, "body": "Doesn&#39;t have to be private, just tried it and it works. Thank you!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430935350, "post_id": 30083726, "comment_id": 48281667, "body": "@user3166884 <i>&quot;Doesn&#39;t have to be private, &quot;</i> It <b><i>should</i></b> be <code>private</code> (or at least <code>protected</code>) with a good class design!"}], "answers": [{"comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1430933925, "post_id": 30083835, "comment_id": 48280715, "body": "This is still backwards because <code>a</code> will have a <code>c</code>, not the other way around. <code>c</code> isn&#39;t aware of class <code>a</code> at all, so a getter for an attribute of <code>a</code> will be of no use."}], "tags": [], "owner": {"reputation": 7789, "user_id": 2357837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/035467770d62d867f62487dc025f043d?s=128&d=identicon&r=PG", "display_name": "ChronoTrigger", "link": "https://stackoverflow.com/users/2357837/chronotrigger"}, "is_accepted": false, "score": 0, "last_activity_date": 1430933862, "creation_date": 1430933862, "answer_id": 30083835, "question_id": 30083726, "link": "https://stackoverflow.com/questions/30083726/using-a-variable-of-an-instance-within-the-method-of-another-class-in-c/30083835#30083835", "title": "Using a Variable of an Instance within the Method of another Class in C++", "body": "<p>I'm not sure if I understand your problem, but if you want to access a member of a class instance from a non-friend non-base class, that member must be exposed of there must be some function that access it. For example:</p>\n\n<pre><code>class a\n{\npublic:\n  int getPos() const { return pos; }\nprivate:\n  void B(); //Calls an instance of class c\n  int pos; //Variable that I want to use in c\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1430935232, "last_edit_date": 1430935232, "creation_date": 1430933955, "answer_id": 30083860, "question_id": 30083726, "link": "https://stackoverflow.com/questions/30083726/using-a-variable-of-an-instance-within-the-method-of-another-class-in-c/30083860#30083860", "title": "Using a Variable of an Instance within the Method of another Class in C++", "body": "<p>Your code sample doesn't make much sense for me, and you aren't really clear what you want to achieve.</p>\n\n<blockquote>\n  <p><em>\"How would I go about using the variable of int pos (see below) within a specific instance of class a in class c?\"</em></p>\n</blockquote>\n\n<p>Fact is you can't access any <code>private</code> class member variables from other classes.</p>\n\n<p>Since <code>class c</code> and <code>class b</code> aren't declared as <code>friend</code> for <code>class a</code>, these cannot access the <code>pos</code> member from <code>a::pos</code> directly. You have to pass them a reference to <code>class a;</code> at some point, and provide public (read access) to <code>pos</code> with a getter function :</p>\n\n<pre><code>class a {\n    int pos; //Variable that I want to use in c\npublic:\n    int getPos() const { return pos; } // &lt;&lt;&lt; let other classes read this \n                                       //     property\n};\n</code></pre>\n\n<p>And use it from an instance of <code>class c()</code> like e.g. (constructor):</p>\n\n<pre><code>c::c(const a&amp; a_) { // &lt;&lt;&lt; pass a reference to a \n   calculate(a_.getPos());\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3166884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/038b6a3229f06132331eb3c21b964e21?s=128&d=identicon&r=PG&f=1", "display_name": "user3166884", "link": "https://stackoverflow.com/users/3166884/user3166884"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430935232, "creation_date": 1430933482, "question_id": 30083726, "link": "https://stackoverflow.com/questions/30083726/using-a-variable-of-an-instance-within-the-method-of-another-class-in-c", "title": "Using a Variable of an Instance within the Method of another Class in C++", "body": "<p>I was wondering how I would go about using a variable of a specific instance of a class within a function of another class.</p>\n\n<p>To provide an example of what I'm trying to do, say I've 3 classes a,b and c. Class c inherits from class b, and a single instance of b and c are  called within a method in class a and b respectively. How would I go about using the variable of int pos (see below) within a specific instance of class a in class c?</p>\n\n<pre><code>class a\n{\n    private:\n    void B(); //Calls an instance of class c\n    int pos; //Variable that I want to use in c\n};\n\nclass b : public c\n{\n    private:\n    void C(); //Calls an instance of class b\n};\n\nclass c\n{\n    private:\n    void calculate(int _pos); //Method which requires the value of pos from class a \n};\n</code></pre>\n\n<p>Help would be greatly appreciated, thank you!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1430933579, "post_id": 30083721, "comment_id": 48280508, "body": "What kind of way are you looking for? One that&#39;s enforced at compile time? If that&#39;s what you want then you should be explicit about it."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1430934125, "post_id": 30083721, "comment_id": 48280841, "body": "The simplest would be to pass it a custom class which takes <code>n</code> in the ctor and performs the validation. <code>double computeNthDerivative(double x, AssertedInt n)</code>.  Where <code>AssertedInt</code> is <code>class AssertedInt (int n) { validate n }</code>"}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430934621, "post_id": 30083721, "comment_id": 48281181, "body": "@Brian I edited the question to be more precise."}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1430934707, "post_id": 30083721, "comment_id": 48281234, "body": "@jnbbender Indeed that could be a great way indeed. A kind of policy in fact ?"}], "answers": [{"comments": [{"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "edited": false, "score": 0, "creation_date": 1430934501, "post_id": 30083829, "comment_id": 48281108, "body": "Actually my question was not really clear about wether it should have been at compile or runtime, apologizes. I edited the question to make it more specific. Thanks for the useful input though."}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430934999, "post_id": 30083829, "comment_id": 48281438, "body": "The check should be made at <i>runtime</i>, static assertions are not useful for that. Zouch was not clear about that, though"}, {"owner": {"reputation": 4259, "user_id": 2348315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IIlRD.jpg?s=128&g=1", "display_name": "PeterSW", "link": "https://stackoverflow.com/users/2348315/petersw"}, "reply_to_user": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430935839, "post_id": 30083829, "comment_id": 48281954, "body": "@user1978011 he wasn&#39;t clear about that in his original question"}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "reply_to_user": {"reputation": 4259, "user_id": 2348315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IIlRD.jpg?s=128&g=1", "display_name": "PeterSW", "link": "https://stackoverflow.com/users/2348315/petersw"}, "edited": false, "score": 0, "creation_date": 1430935890, "post_id": 30083829, "comment_id": 48281987, "body": "@PeterSW I agree, but should the answer remain there as is?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430936345, "post_id": 30083829, "comment_id": 48282257, "body": "@user1978011, I agree that the original answer doesn&#39;t serve the updated question. Updated the answer."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1430936296, "last_edit_date": 1430936296, "creation_date": 1430933846, "answer_id": 30083829, "question_id": 30083721, "link": "https://stackoverflow.com/questions/30083721/force-function-parameter-to-match-some-rule/30083829#30083829", "title": "Force function parameter to match some rule", "body": "<p>You can prevent the use of <code>0</code> at compile time, using templates.</p>\n\n<pre><code>template &lt;int N&gt;\ndouble computeNthDerivative(double x)\n{\n  // Disallow its usage for 0 by using static_assert.\n  static_assert(N != 0, \"Using 0 is not allowed\");\n\n  // Implement the logic for non-zero N\n}\n</code></pre>\n\n<p>To prevent the use of the function for <code>0</code> at run time, it's best to throw an exception.</p>\n\n<pre><code>double computeNthDerivative(double x, unsinged int n)\n{\n   if ( n == 0 )\n   {\n      throw std::out_of_range(\"Use of the function for n = 0 is not allowed.\");\n   }\n\n   // Implement the logic for non-zero n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "edited": false, "score": 0, "creation_date": 1430934949, "post_id": 30084065, "comment_id": 48281402, "body": "The idea would rightly be not do the check in the function itself, but to let the function writer make his own &quot;policy&quot; (don&#39;t know if it is the right term), and so would not depend on the input (user, algorithm, ...)"}], "tags": [], "owner": {"reputation": 1, "user_id": 4633562, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--07KDO_rshU/AAAAAAAAAAI/AAAAAAAAAHc/20joCSenBZA/photo.jpg?sz=128", "display_name": "P&#233;ter Mehlmann", "link": "https://stackoverflow.com/users/4633562/p%c3%a9ter-mehlmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1430934554, "creation_date": 1430934554, "answer_id": 30084065, "question_id": 30083721, "link": "https://stackoverflow.com/questions/30083721/force-function-parameter-to-match-some-rule/30084065#30084065", "title": "Force function parameter to match some rule", "body": "<p>The only rules are that you give in. If users are the ones that you want to restrict, you have to check what they give in. \nSame goes for the functions, however in your case what you showed as an example it is better to check the variable after the cin (or whatever imput you prefer) rather than checking it in the function itself. For this i would just go \n    if n!=0;\nyour function\n    else break;</p>\n"}, {"tags": [], "owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "is_accepted": false, "score": 1, "last_activity_date": 1430934888, "creation_date": 1430934888, "answer_id": 30084175, "question_id": 30083721, "link": "https://stackoverflow.com/questions/30083721/force-function-parameter-to-match-some-rule/30084175#30084175", "title": "Force function parameter to match some rule", "body": "<p>I think the best way here is to throw an exception. This is what exceptions are for, even the name seems to suggest this.</p>\n\n<p>As to the <code>assert</code> macro, there is one important caveat. If you use the <code>assert</code> macro, the program will abort if the assertion is not met. However, if you ever make a <em>release</em> build where the <code>NDEBUG</code> macro is set, all <strong>assertions</strong> will be <strong>removed</strong> during compilation. This means that you cannot check for valid user input with this macro (because you <em>should</em> build a release build).</p>\n"}, {"tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1430935220, "creation_date": 1430935220, "answer_id": 30084286, "question_id": 30083721, "link": "https://stackoverflow.com/questions/30083721/force-function-parameter-to-match-some-rule/30084286#30084286", "title": "Force function parameter to match some rule", "body": "<p>So if you are looking for a \"Policy\" based solution you could create a separate class which accepts a defining regular expression (or whatever you define as a policy) and the input, in this case <code>n</code>, which would then be used as the input to your function.</p>\n"}, {"comments": [{"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "edited": false, "score": 0, "creation_date": 1430936856, "post_id": 30084445, "comment_id": 48282545, "body": "Kinda like this solution, really fits what I had in mind when asking the question !"}], "tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1430938349, "last_edit_date": 1430938349, "creation_date": 1430935807, "answer_id": 30084445, "question_id": 30083721, "link": "https://stackoverflow.com/questions/30083721/force-function-parameter-to-match-some-rule/30084445#30084445", "title": "Force function parameter to match some rule", "body": "<pre><code>class Policy {\nprivate:\n    String myPolicy;\npublic :\n    Policy(String regEx) : myPolicy(regEx) {\n    }\n\n    void verify(int n) {\n       regEx strtok , sprintf, blah, blah n\n};\n\nclass Asserted {\nprivate:\n    Policy policy;\npublic:\n    Asserted(Policy policy, int n) throw AAAHHHHH {\n        policy.verify(n);\n    }\n};\n</code></pre>\n\n<p>Then finally</p>\n\n<pre><code>Asserted assert = new Asserted(Policy(\"[1-9]\", 8))\ndouble computeNthDerivative(2.6, assert);\n</code></pre>\n"}], "owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 30084445, "answer_count": 5, "score": 3, "last_activity_date": 1430938349, "creation_date": 1430933458, "last_edit_date": 1430934596, "question_id": 30083721, "link": "https://stackoverflow.com/questions/30083721/force-function-parameter-to-match-some-rule", "title": "Force function parameter to match some rule", "body": "<p>Is there any way to \"force\" a function parameter to follow some rule in C++ ?<br>\nFor the sake of example, let say I want to write a function which computes the n'th derivative of a mathematical function. Let suppose the signature of the function is this one :  </p>\n\n<pre><code>double computeNthDerivative(double x, unsigned int n);\n</code></pre>\n\n<p>Now, let say I want to forbid users to input 0 for n. I could just use an <code>assert</code> or test the value and <code>throw</code> an exception if the user input is 0.<br>\nBut is there any other way of doing this kind of stuff ?</p>\n\n<p>Edit : Conditions would be set at compile time, but the check must be done at the run-time.</p>\n"}, {"tags": ["c++", "string", "variadic-templates"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1430933439, "post_id": 30083662, "comment_id": 48280415, "body": "You are using C++14, so <code>&quot;World!&quot;s</code>."}, {"owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1430934496, "post_id": 30083662, "comment_id": 48281103, "body": "@T.C. I&#39;ve tried this on <a href=\"http://ideone.com/3fRo0M\" rel=\"nofollow noreferrer\">ideone</a>, but I&#39;ve got a compilation error, am I doing it wrong?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1430934935, "post_id": 30083662, "comment_id": 48281392, "body": "You need a <code>using namespace std::literals;</code>."}, {"owner": {"reputation": 4082, "user_id": 4255107, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-84XHYSdES6k/AAAAAAAAAAI/AAAAAAAAAF0/BzBS4Ozwoc0/photo.jpg?sz=128", "display_name": "sonus21", "link": "https://stackoverflow.com/users/4255107/sonus21"}, "edited": false, "score": 0, "creation_date": 1430935526, "post_id": 30083662, "comment_id": 48281758, "body": "@NikolayKondratyev it&#39;s working on my  system with <code>gcc (Ubuntu 4.9.2-10ubuntu13) 4.9.2</code> only we need to pass <code>-std=c++1y</code> flag to compile ."}, {"owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1430938949, "post_id": 30083662, "comment_id": 48283829, "body": "@T.C. Works great, thanks! I will learn more about string literals for sure."}], "answers": [{"tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": false, "score": 1, "last_activity_date": 1430935194, "creation_date": 1430935194, "answer_id": 30084272, "question_id": 30083662, "link": "https://stackoverflow.com/questions/30083662/type-deduction-from-char-array-to-stdstring/30084272#30084272", "title": "type deduction from char array to std::string", "body": "<p>Ultimately you're <code>char</code> pointer types don't deal well with being on both the left <em>and</em> right side of <code>operator +</code>.` You can overload to manufacture an intermediary if desired. </p>\n\n<p>Below I took liberty to refactor this down to a single-param-supported <code>sum</code> (not a required step, but allows <code>sum(x)</code> overloads, which are clearer to understand). Hopefully you get the idea.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n// generic identity\ntemplate&lt;typename T1&gt;\nauto sum(const T1&amp; t1)\n{\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    return t1;\n}\n\n// specialized for const char [N]\nauto sum(const char *s)\n{\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    return std::string(s);\n}\n\ntemplate&lt;typename T1, typename... T2&gt;\nauto sum(const T1&amp; t1, const T2&amp;... t2)\n{\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n    return t1 + sum(t2...);\n}\n\nint main(int argc, char** argv) {\n\n    std::cout &lt;&lt; sum(1,2,3) &lt;&lt; '\\n';\n    std::cout &lt;&lt; sum(1, 2.0, 3) &lt;&lt; '\\n';\n    std::cout &lt;&lt; sum(\"Hello\", \" \", std::string(\"World!\")) &lt;&lt; '\\n';\n    std::cout &lt;&lt; sum(\"Hello\", \" \", \"World!\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>auto sum(const T1 &amp;, const T2 &amp;...) [T1 = int, T2 = &lt;int, int&gt;]\nauto sum(const T1 &amp;, const T2 &amp;...) [T1 = int, T2 = &lt;int&gt;]\nauto sum(const T1 &amp;) [T1 = int]\n6\nauto sum(const T1 &amp;, const T2 &amp;...) [T1 = int, T2 = &lt;double, int&gt;]\nauto sum(const T1 &amp;, const T2 &amp;...) [T1 = double, T2 = &lt;int&gt;]\nauto sum(const T1 &amp;) [T1 = int]\n6\nauto sum(const T1 &amp;, const T2 &amp;...) [T1 = char [6], T2 = &lt;char [2], std::__1::basic_string&lt;char&gt;&gt;]\nauto sum(const T1 &amp;, const T2 &amp;...) [T1 = char [2], T2 = &lt;std::__1::basic_string&lt;char&gt;&gt;]\nauto sum(const T1 &amp;) [T1 = std::__1::basic_string&lt;char&gt;]\nHello World!\nauto sum(const T1 &amp;, const T2 &amp;...) [T1 = char [6], T2 = &lt;char [2], char [7]&gt;]\nauto sum(const T1 &amp;, const T2 &amp;...) [T1 = char [2], T2 = &lt;char [7]&gt;]\nauto sum(const char *)\nHello World!\n</code></pre>\n\n<p>Best of luck</p>\n"}, {"comments": [{"owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "edited": false, "score": 0, "creation_date": 1430937790, "post_id": 30084281, "comment_id": 48283111, "body": "Is there any need for <code>decltype</code>? I tried to run your solution without it and looks like it works fine."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "edited": false, "score": 0, "creation_date": 1430938363, "post_id": 30084281, "comment_id": 48283468, "body": "@NikolayKondratyev: Yes, it should work fine without decltype for pretty much all situations. The decltype just makes sure that the object which is passed in is perfectly forwarded to the return type. This might be important to you if, for example, you have an unbounded integer type which does dynamic allocation, and you want to avoid the potentially expensive copy that would occur without <code>decltype(auto)</code>. Or if you have a type which is non-copyable (but still movable)."}], "tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 1, "last_activity_date": 1430935211, "creation_date": 1430935211, "answer_id": 30084281, "question_id": 30083662, "link": "https://stackoverflow.com/questions/30083662/type-deduction-from-char-array-to-stdstring/30084281#30084281", "title": "type deduction from char array to std::string", "body": "<p>I would just write a simple overloaded identity function which handles <code>const char*</code> specially.</p>\n\n<pre><code>template&lt;typename T&gt;\ndecltype(auto) fix(T&amp;&amp; val)\n{\n    return std::forward&lt;T&gt;(val);\n} \n\nauto fix(char const* str)\n{\n    return std::string(str);\n}\n\ntemplate&lt;typename T1, typename T2&gt;\nauto sum(const T1&amp; t1, const T2&amp; t2) {\n    return fix(t1) + t2;\n}\n\ntemplate&lt;typename T1, typename... T2&gt;\nauto sum(const T1&amp; t1, const T2&amp;... t2) {\n    return t1 + sum(t2...);\n}\n</code></pre>\n"}], "owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 1, "accepted_answer_id": 30084281, "answer_count": 2, "score": 1, "last_activity_date": 1430935426, "creation_date": 1430933247, "question_id": 30083662, "link": "https://stackoverflow.com/questions/30083662/type-deduction-from-char-array-to-stdstring", "title": "type deduction from char array to std::string", "body": "<p>I'm trying to write <code>sum</code> function using variadic template.\nIn the code I would write something like</p>\n\n<pre><code>sum(1, 2., 3)\n</code></pre>\n\n<p>and it will return most general type of the sum (in this case - <code>double</code>).\nThe problem is with characters. When I call it like</p>\n\n<pre><code>sum(\"Hello\", \" \", \"World!\") \n</code></pre>\n\n<p>template parameters are deduces as <code>const char [7]</code> for example, thus it won't compile. I found the way to specify last argument as <code>std::string(\"World!\")</code>, but it's not pretty, is there any way to achieve automatic type deduction to <code>std::string</code> or correctly overload <code>sum</code>?</p>\n\n<p>The code I have so far:</p>\n\n<pre><code>template&lt;typename T1, typename T2&gt;\nauto sum(const T1&amp; t1, const T2&amp; t2) {\n    return t1 + t2;\n}\n\ntemplate&lt;typename T1, typename... T2&gt;\nauto sum(const T1&amp; t1, const T2&amp;... t2) {\n    return t1 + sum(t2...);\n}\n\nint main(int argc, char** argv) {\n    auto s1 = sum(1, 2, 3);\n    std::cout &lt;&lt; typeid(s1).name() &lt;&lt; \" \" &lt;&lt; s1 &lt;&lt; std::endl;\n\n    auto s2 = sum(1, 2.0, 3);\n    std::cout &lt;&lt; typeid(s2).name() &lt;&lt; \" \" &lt;&lt; s2 &lt;&lt; std::endl;\n\n    auto s3 = sum(\"Hello\", \" \", std::string(\"World!\"));\n    std::cout &lt;&lt; typeid(s3).name() &lt;&lt; \" \" &lt;&lt; s3 &lt;&lt; std::endl;\n\n    /* Won't compile! */\n    /*\n    auto s4 = sum(\"Hello\", \" \", \"World!\");\n    std::cout &lt;&lt; typeid(s4).name() &lt;&lt; \" \" &lt;&lt; s4 &lt;&lt; std::endl;\n    */\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>i 6\nd 6\nSs Hello World!\n</code></pre>\n"}, {"tags": ["c++", "pointers", "optimization"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1430935749, "post_id": 30083604, "comment_id": 48281904, "body": "It&#39;s common to get the best of both worlds when calling a function, by making the function parameter a const reference. It&#39;s similar to a pointer in that you don&#39;t make a copy."}, {"owner": {"reputation": 11698, "user_id": 1560850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dba9e19ac64c87c548a4c636bf5cb7f0?s=128&d=identicon&r=PG", "display_name": "valdo", "link": "https://stackoverflow.com/users/1560850/valdo"}, "edited": false, "score": 0, "creation_date": 1430938768, "post_id": 30083604, "comment_id": 48283713, "body": "It&#39;s a question of <b>where</b> the memory for the object is allocated: stack or heap. Accessing objects by pointers and copying - is another area."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1430957845, "post_id": 30083604, "comment_id": 48292611, "body": "When you are as experienced as most of the people answering here, you too will tell people not to worry in advance about performance. That&#39;s a natural order of things. First make the code clear and maintainable and correct. Then deal with performance, because it&#39;s never where you would guess it to be. <a href=\"http://stackoverflow.com/a/927773/23771\"><i>Here&#39;s</i></a> one example."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "edited": false, "score": 1, "creation_date": 1430933759, "post_id": 30083635, "comment_id": 48280610, "body": "I will be thankful if you can explain better and give me an example."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "edited": false, "score": 0, "creation_date": 1430935843, "post_id": 30083635, "comment_id": 48281958, "body": "@amit: That&#39;s out of scope. Which book are you using?"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1430933177, "creation_date": 1430933177, "answer_id": 30083635, "question_id": 30083604, "link": "https://stackoverflow.com/questions/30083604/pointer-against-not-pointer/30083635#30083635", "title": "Pointer against not pointer", "body": "<p>What you said is essentially correct. However, move semantics alleviate the concern about object copying in a large number of cases.</p>\n"}, {"comments": [{"owner": {"reputation": 11698, "user_id": 1560850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dba9e19ac64c87c548a4c636bf5cb7f0?s=128&d=identicon&r=PG", "display_name": "valdo", "link": "https://stackoverflow.com/users/1560850/valdo"}, "edited": false, "score": 0, "creation_date": 1430938980, "post_id": 30083897, "comment_id": 48283853, "body": "I generally agree that profiling should be done prior to optimizations. But claiming that stack vs heap memory allocation is a &quot;micro-optimisation&quot;, without knowing the context - this is nonsense!! There&#39;s a <b>huge</b> performance difference."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1431622081, "post_id": 30083897, "comment_id": 48586710, "body": "There is only a real huge difference if no optimization takes place. Think about return value optimization ( coly elision ). And malloc/free must not use the default implementation. Overwriting new/delete for own instances can help in the same way, e.g. using block pools. So I agree that first you should do always profiling before start to think of rewriting/redesigning code."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 4, "last_activity_date": 1430934049, "creation_date": 1430934049, "answer_id": 30083897, "question_id": 30083604, "link": "https://stackoverflow.com/questions/30083604/pointer-against-not-pointer/30083897#30083897", "title": "Pointer against not pointer", "body": "<p>The reality is that this is a micro-optimisation. You should write the code to make it readable, maintainable and robust. If you worry about speed, you use a profiling tool to measure the speed. You find things that take more time than they should, and then and only then do you worry about speed optimisation. </p>\n\n<p>An object should obviously only exist once. If you make multiple copies of an object that is expensive to copy you are wasting time. You also have different copies of the same object, which is in itself not a good thing. </p>\n\n<p>\"Move semantics\" avoids expensive copying in cases where you didn't really <em>want</em> to copy anything but just move an object from here to there. Google for it; it is quite an important thing to understand. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "is_accepted": true, "score": 4, "last_activity_date": 1431657905, "last_edit_date": 1431657905, "creation_date": 1430935176, "answer_id": 30084265, "question_id": 30083604, "link": "https://stackoverflow.com/questions/30083604/pointer-against-not-pointer/30084265#30084265", "title": "Pointer against not pointer", "body": "<p>Let's focus purely on efficiency. There's no one-size-fits-all, unfortunately. It depends on what you are optimizing for. There's a saying, always optimize the common case. But what is the common case? Sometimes the answer lies in understanding your software's design inside out. Sometimes it's unknowable even at the high level in advance because your users will discover new ways to use it that you didn't anticipate. Sometimes you will extend the design and reveal new common cases. So optimization, but especially micro-optimization, is almost always best applied in hindsight, based on both this user-end knowledge and with a profiler in your hand.</p>\n\n<p>The few times you can usually have really good foresight about the common case is when your design is forcing it rather than responding to it. For example, if you are designing a class like <code>std::deque</code>, then you're forcing the common case write usage to be <code>push_fronts</code> and <code>push_backs</code> rather than insertions to the middle, so the requirements give you decent foresight as to what to optimize. The common case is embedded into the design, and there's no way the design would ever want to be any different. For higher-level designs, you're usually not so lucky. And even in the cases where you know the broad common case in advance, knowing the micro-level instructions that cause slowdowns is too often incorrectly guessed, even by experts, without a profiler. So the first thing any developer should be interested in when thinking about efficiency is a profiler.</p>\n\n<p>But here's some tips if you do run into a hotspot with a profiler.</p>\n\n<h2>Memory Access</h2>\n\n<p><em>Most</em> of the time, the biggest micro-level hotspots if you have any will relate to memory access. So if you have a large object that is just one contiguous block where all the members are getting accessed in some tight loop, it'll aid performance.</p>\n\n<p>For example, if you have an array of 4-component mathematical vectors you're sequentially accessing in a tight algorithm, you'll generally fare far, far better if they're contiguous like so:</p>\n\n<pre><code>x1,y1,z1,w1,x2,y2,x2,w2...xn,yn,zn,wn\n</code></pre>\n\n<p>... with a single-block structure like this (all in one contiguous block):</p>\n\n<pre><code>x\ny\nz\nw\n</code></pre>\n\n<p>This is because the machine will fetch this data into a cache line which will have the adjacent vectors' data inside of it when it's all tightly packed and contiguous in memory like this.</p>\n\n<p>You can very quickly slow down the algorithm if you used something like <code>std::vector</code> here to represent each individual 4-component mathematical vector, where every single individual one stores the mathematical components in a potentially completely different place in memory. Now you could potentially have a cache miss with each vector. In addition, you're paying for additional members since it's a variable-sized container.</p>\n\n<p><code>std::vector</code> is a \"2-block\" object that often looks like this when we use it for a mathematical 4-vector:</p>\n\n<pre><code>size\ncapacity\nptr --&gt; [x y z w] another block\n</code></pre>\n\n<p>It also stores an allocator but I'll omit that for simplicity.</p>\n\n<p>On the flip side, if you have a big \"1-block\" object where only some of its members get accessed in those tight, performance-critical loops, then it might be better to make it into a \"2-block\" structure. Say you have some <code>Vertex</code> structure where the most-accessed part of it is the x/y/z position but it also has a less commonly-accessed list of adjacent vertices. In that case, it might be better to hoist that out and store that adjacency data elsewhere in memory, perhaps even completely outside of the <code>Vertex</code> class itself (or merely a pointer), because your common case, performance-critical algorithms not accessing that data will then be able to access more contiguous vertices nearby in a single cache line since the vertices will be smaller and point to that rarely-accessed data elsewhere in memory.</p>\n\n<h2>Creation/Destruction Overhead</h2>\n\n<p>When rapid creation and destruction of objects is a concern, you can also do better to create each object in a contiguous memory block. The fewer separate memory blocks per object, the faster it'll generally go (since whether or not this stuff is going on the heap or stack, there will be fewer blocks to allocate/deallocate).</p>\n\n<h2>Free Store/Heap Overhead</h2>\n\n<p>So far I've been talking more about contiguity than stack vs. heap, and it's because stack vs. heap relates more to client-side usage of an object rather than an object's design. When you're designing the representation of an object, you don't know whether it's going on the stack or heap. What you do know is whether it's going to be fully contiguous (1 block) or not (multiple blocks).</p>\n\n<p>But naturally if it's not contiguous, then at least part of it is going on the heap, and heap allocations and deallocations can be enormously expensive if you are relating the cost to the hardware stack. However, you can mitigate this overhead often with the use of efficient O(1) fixed allocators. They serve a more special purpose than <code>malloc</code> or <code>free</code>, but I would suggest concerning yourself less with the stack vs. heap distinction and more about the contiguity of an object's memory layout.</p>\n\n<h2>Copy/Move Overhead</h2>\n\n<p>Last but not least, if you are copying/swapping/moving objects a lot, then the smaller they are, the cheaper this is going to be. So you might want to sort pointers or indices to big objects sometimes, for example, instead of the original object, since even a move constructor for a type T where sizeof(T) is a large number is going to be expensive to copy/move.</p>\n\n<p>So move constructing something like the \"2-block\" <code>std::vector</code> here which is not contiguous (its dynamic contents are contiguous, but that's a separate block) and stores its bulky data in a separate memory block is actually going to be cheaper than move constructing like a \"1-block\" 4x4 matrix that is contiguous. It's because there's no such thing as a cheap <code>shallow copy</code> if the object is just one big memory block rather than a tiny one with a pointer to another. One of the funny trends that arises is that objects which are cheap to copy are expensive to move, and ones which are very expensive to copy are cheap to move.</p>\n\n<p>However, I would not let copying/move overhead impact your object implementation choices, because the client can always add a level of indirection there if he needs for a particular use case that taxes copies and moves. When you're designing for memory layout-type micro-efficiency, the first thing to focus on is contiguity.</p>\n\n<h2>Optimization</h2>\n\n<p>The rule for optimization is this: if you have no code or no tests or no profiling measurements, don't do it. As others have wisely suggested, your number one concern is always productivity (which includes maintainability, safety, clarity, etc). So instead of trapping yourself in hypothetical what-if scenarios, the first thing to do is to write the code, measure it twice, and change it if you really have to do so. It's better to focus on how to design your interfaces appropriately so that if you do have to change anything, it'll just affect one local source file.</p>\n"}], "owner": {"reputation": 167, "user_id": 4061085, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac7706c864e557ae4387c43751a39300?s=128&d=identicon&r=PG&f=1", "display_name": "amit", "link": "https://stackoverflow.com/users/4061085/amit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 30084265, "answer_count": 3, "score": 4, "last_activity_date": 1431657905, "creation_date": 1430933104, "last_edit_date": 1431621285, "question_id": 30083604, "link": "https://stackoverflow.com/questions/30083604/pointer-against-not-pointer", "title": "Pointer against not pointer", "body": "<p>I read in many places including Effective C++ that it is better to store data on the stack and not as pointer to the data.</p>\n\n<p>I can understand doing this with small object, because the number of new and delete calls is also reduced, which reduces the chance of a memory leak. Also, the pointer can take more space than the object itself.</p>\n\n<p>But with large object, where copying them will be expensive, is it not better to store them in a smart pointer?</p>\n\n<p>Because with many operations with the large object there will be few object copying which is very expensive (I am not including the getters and setters).</p>\n"}, {"tags": ["c++", "c++11", "stl"], "comments": [{"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1430932118, "post_id": 30083209, "comment_id": 48279570, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/operator_cmp</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "is_accepted": false, "score": 1, "last_activity_date": 1430932440, "last_edit_date": 1430932440, "creation_date": 1430932097, "answer_id": 30083252, "question_id": 30083209, "link": "https://stackoverflow.com/questions/30083209/can-someone-please-clarify-what-the-does-when-comparing-two-strings-c/30083252#30083252", "title": "Can someone please clarify what the &quot;&lt;&quot; does when comparing two strings c++", "body": "<p>Strings are ordered <a href=\"http://en.wikipedia.org/wiki/Lexicographical_order\" rel=\"nofollow\">lexicographically</a>. Each character in the first string is compared to the equivalent character in the second string until there are two characters that don't match one another or until one string ends. For example the following statements are true:</p>\n\n<pre><code>\"aaab\" &lt; \"aaac\" // because 'b'&lt;'c'\n\"aaa\"  &lt; \"aaab\" // by convention shorter string are smaller than larger ones\n\"aaa0\" &lt; \"aaab\" // because '0'=48 and 'b'=98\n\"aaaB\" &lt; \"aaab\" // because 'B'=66 and 'b'=98\n</code></pre>\n\n<p>The character comparison is performed using the numeric values of the corresponding characters (using <a href=\"http://www.asciitable.com/\" rel=\"nofollow\">ASCII</a> for instance).</p>\n"}], "owner": {"reputation": 35, "user_id": 4374692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65ceddca6b95630f1c37863f912bd19?s=128&d=identicon&r=PG&f=1", "display_name": "jamesb1082", "link": "https://stackoverflow.com/users/4374692/jamesb1082"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1430932109, "answer_count": 1, "score": -3, "last_activity_date": 1430932440, "creation_date": 1430931972, "last_edit_date": 1430932163, "question_id": 30083209, "link": "https://stackoverflow.com/questions/30083209/can-someone-please-clarify-what-the-does-when-comparing-two-strings-c", "closed_reason": "Duplicate", "title": "Can someone please clarify what the &quot;&lt;&quot; does when comparing two strings c++", "body": "<p>I had a past paper question involving the STL sort algorithm. And it was sorting a vector, i am aware that the sort algorithm sorts into ascending order using the \"&lt;\" operator. However, I was wondering how two strings are compared? How is a value for a string found? (So i can work out what string is smaller than another in an exam.) </p>\n"}, {"tags": ["c++", "function", "pass-by-reference", "pass-by-value", "pass-by-pointer"], "comments": [{"owner": {"reputation": 2642, "user_id": 1967704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VfDfH.jpg?s=128&g=1", "display_name": "George Netu", "link": "https://stackoverflow.com/users/1967704/george-netu"}, "edited": false, "score": 0, "creation_date": 1430932039, "post_id": 30083174, "comment_id": 48279512, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3796181/c-passing-pointer-to-function-howto-c-pointer-manipulation\">C++ Passing Pointer to Function (Howto) + C++ Pointer Manipulation</a>"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 4, "creation_date": 1430932043, "post_id": 30083174, "comment_id": 48279516, "body": "You don&#39;t pass a reference to your function, you pass the address of <code>a</code>."}], "answers": [{"tags": [], "owner": {"reputation": 506, "user_id": 4126269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2ChD.jpg?s=128&g=1", "display_name": "CarlosMorente", "link": "https://stackoverflow.com/users/4126269/carlosmorente"}, "is_accepted": false, "score": 1, "last_activity_date": 1430932691, "last_edit_date": 1430932691, "creation_date": 1430932269, "answer_id": 30083306, "question_id": 30083174, "link": "https://stackoverflow.com/questions/30083174/c-call-by-reference/30083306#30083306", "title": "C++ Call by reference", "body": "<p>You are passing <strong>by value</strong> the address where a is located.</p>\n\n<p>So when in your void called fun you type *a, you're accessing the value of a.</p>\n\n<p>But as I've said, you're passing by value an int pointer to a.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1430932599, "creation_date": 1430932599, "answer_id": 30083426, "question_id": 30083174, "link": "https://stackoverflow.com/questions/30083174/c-call-by-reference/30083426#30083426", "title": "C++ Call by reference", "body": "<p><strong>You're passing a <em>pointer</em> to <code>a</code>, by value.</strong></p>\n\n<p>Depending on which level of abstraction you are speaking, you could say that <strong>you are therefore passing <code>a</code> by pointer</strong>, or passing <code>a</code> by \"handle\". In broader terms, \"passing <code>a</code> by reference\" would not be strictly incorrect, but it is incorrect in C++ because \"reference\" means something specific in C++. You have no C++ references in this code.</p>\n"}, {"tags": [], "owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "is_accepted": false, "score": 5, "last_activity_date": 1430932787, "creation_date": 1430932787, "answer_id": 30083497, "question_id": 30083174, "link": "https://stackoverflow.com/questions/30083174/c-call-by-reference/30083497#30083497", "title": "C++ Call by reference", "body": "<p>Your call is a pass by value, but of type <code>int*</code> not of argument type <code>int</code>. This means that a copy of the pointer is made and passed to the function. You can change the value of what it points to but not of the pointer.</p>\n\n<p>So if your function is like this</p>\n\n<pre><code>void fun(int *a)\n{\n   *a = 10;\n}\n</code></pre>\n\n<p>and you call from <code>main</code> like this</p>\n\n<pre><code>int main() {\n    int b = 1;\n    fun(&amp;b);\n    // now b = 10;\n    return 0;\n}\n</code></pre>\n\n<p>you could modify the value of <code>b</code> by passing a pointer to it to your function.</p>\n\n<p>The same effect would be if you did the following - which is passing by reference</p>\n\n<pre><code>void fun2(int&amp; a) \n{\n    a = 5;\n}\n\nint main()\n{\n    int b = 10;\n    fun2(b); \n\n    // now b = 5;\n    return 0;\n}\n</code></pre>\n\n<p>Now consider a third function that takes an integer argument by value</p>\n\n<pre><code>void fun3(int a)\n{\n    a = 10;\n}\n\nint main()\n{\n    int b = 1;\n    fun3(b);\n    // b  is still 1 now!\n    return 0;   \n}\n</code></pre>\n\n<p>With pass by value, <code>fun3</code> changes the copy of the argument passed to it, not the variable <code>b</code> in the scope of main. </p>\n\n<p>Passing by (non-const) reference or pointer allows the modification of the argument that is passed to it. Passing by value or const reference will not allow the argument passed to it to be changed.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4863682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1186495f6de5e3319ef8b6c46adb3d0?s=128&d=identicon&r=PG&f=1", "display_name": "user4863682", "link": "https://stackoverflow.com/users/4863682/user4863682"}, "is_accepted": false, "score": -1, "last_activity_date": 1430932863, "creation_date": 1430932863, "answer_id": 30083523, "question_id": 30083174, "link": "https://stackoverflow.com/questions/30083174/c-call-by-reference/30083523#30083523", "title": "C++ Call by reference", "body": "<pre><code>It is call by reference as you are passing reference the address reference to your variable so, \ninside function\n           *a = 100;\nchanges the value of a in caller function as the content at that address has been changed.\nBut address is passed by value so\n             a = NULL;\nwill not change a, as a still be pointing to same address.\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 3828158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fcdada4d34a16cb3e5f0db0ed8a070?s=128&d=identicon&r=PG&f=1", "display_name": "user3828158", "link": "https://stackoverflow.com/users/3828158/user3828158"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9933, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1430938369, "creation_date": 1430931849, "question_id": 30083174, "link": "https://stackoverflow.com/questions/30083174/c-call-by-reference", "title": "C++ Call by reference", "body": "<p>If I have a function which takes a pointer to an integer, and I pass a reference to an integer variable from my main, is this call by value or call by reference? Sample code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid fun(int *a){\n//Code block\n}\n\nint main(){\n    int a = 5;\n    fun(&amp;a);\n    return 0;\n}\n</code></pre>\n\n<p>In the above code, is the call to function <strong>fun</strong> a call by value or call by reference?</p>\n"}, {"tags": ["c++", "function", "templates"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1430932249, "post_id": 30082996, "comment_id": 48279660, "body": "You cannot use templates like this. Perhaps you should read up on templates before trying them again."}], "answers": [{"tags": [], "owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "is_accepted": true, "score": 1, "last_activity_date": 1430931792, "creation_date": 1430931792, "answer_id": 30083155, "question_id": 30082996, "link": "https://stackoverflow.com/questions/30082996/overloading-with-a-template-function/30083155#30083155", "title": "Overloading with a template function", "body": "<p>You don't need templates at all. Polymorphism will solve this problem for you. Would this work for you:</p>\n\n<pre><code>class baseClass{\npublic:\n    virtual void myfunction(double dA, double dB) = 0; //Pure virtual function\n    virtual void myfunction(double dC) {\n      double dA = dC;\n      double dB = 0;\n\n      myfunction(dA, dB)  // Calls the function of the derived class\n    }\n};\n</code></pre>\n\n<p>Then your main function can look like:</p>\n\n<pre><code>#include\"classes.h\"\n\nint main(){\n\n    derivedClass1 example;\n    baseClass *caller = &amp;example;    \n    caller.myfunction(1.0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4863682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1186495f6de5e3319ef8b6c46adb3d0?s=128&d=identicon&r=PG&f=1", "display_name": "user4863682", "link": "https://stackoverflow.com/users/4863682/user4863682"}, "is_accepted": false, "score": 0, "last_activity_date": 1430932532, "creation_date": 1430932532, "answer_id": 30083411, "question_id": 30082996, "link": "https://stackoverflow.com/questions/30082996/overloading-with-a-template-function/30083411#30083411", "title": "Overloading with a template function", "body": "<pre><code>    I think you want to write general function outside any class to call the respective class function.\n\n    1) You don't need to put type::myfunction\n        template &lt;class type&gt; \n        void myfunction(baseClass *caller, double dc) \n        {\n            double dA = dC;\n            double dB = 0; //In place of a complex calculation\n            caller-&gt;myfunction(double dA, double dB)  //Call the function for the\n        }\n    2) actually, you don't need type template for it if there are not multiple data types\n       void myfunction(baseClass *caller,double dc)\n       {\n            double dA = dC;\n            double dB = 0; //In place of a complex calculation\n            caller-&gt;myfunction(double dA, double dB)  //Call the function for the\n       }\n\n\nint main(){\n    derivedClass1 example;\n    myfunction(&amp;example,1.0);\n    derivedClass2 example2;\n    myfunction(&amp;example2,2.0);\n    baseClass example3;\n    myfunction(&amp;example3,4.0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1229, "user_id": 3347993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvT9m.jpg?s=128&g=1", "display_name": "Nitheesh George", "link": "https://stackoverflow.com/users/3347993/nitheesh-george"}, "is_accepted": false, "score": 0, "last_activity_date": 1430932602, "creation_date": 1430932602, "answer_id": 30083430, "question_id": 30082996, "link": "https://stackoverflow.com/questions/30082996/overloading-with-a-template-function/30083430#30083430", "title": "Overloading with a template function", "body": "<p>I think there lot of problems in the above code you provided like the following</p>\n\n<pre><code>void type::myfunction(double dC)\n</code></pre>\n\n<p>In this above statement \"type\" should be the class name in which myfunction will be member. Instead you given this as a template type. </p>\n\n<p>I am rewritten your code as follows,</p>\n\n<pre><code>class baseClass\n{\n  public:\n    template&lt;typename Type&gt;\n    void myfunction(Type dA, double dB)\n    {};\n\n    template&lt;typename Type&gt;\n    void myfunction(Type dC)\n    {};\n};\n\nclass derivedClass1 :baseClass\n{\n  public:\n\n   template&lt;typename Type&gt;\n   void myfunction(Type dA, double dB)\n   {\n     //DO STUFF\n   }\n\n\n   template&lt;typename Type&gt;\n   void myfunction(Type dC)\n   {\n      Type dA = dC;\n      double dB = 0; //In place of a complex calculation\n\n      myfunction(dA, dB);\n   };\n};\n\nclass derivedClass2 :baseClass\n{\n  public:\n\n  template&lt;typename Type&gt;\n  void myfunction(Type dA, double dB)\n  {\n    //Do different stuff to derivedClass1\n  }\n\n  template&lt;typename Type&gt;\n  void myfunction(Type dC)\n  {\n     Type dA = dC;\n    double dB = 0; //In place of a complex calculation\n\n    myfunction(dA, dB);\n  };\n};\n\nint main()\n{\n  derivedClass1 example;\n  example.myfunction(1.0);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4871460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c23e7f1ce2eb576837fd30a19b897e?s=128&d=identicon&r=PG&f=1", "display_name": "Nota", "link": "https://stackoverflow.com/users/4871460/nota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 30083155, "answer_count": 3, "score": 0, "last_activity_date": 1449675598, "creation_date": 1430931326, "last_edit_date": 1449675598, "question_id": 30082996, "link": "https://stackoverflow.com/questions/30082996/overloading-with-a-template-function", "title": "Overloading with a template function", "body": "<p>I'm having trouble identifying the problem here as I'm using multiple techniques I am not that familiar with (splitting code into files, templates), so I have recreated it in the simplest way I could think:</p>\n\n<p>classes.h:</p>\n\n<pre><code>class baseClass{\npublic:\n    virtual void myfunction(double dA, double dB) = 0; //Pure virtual function\n    virtual void myfunction(double dC) = 0;//Overloaded pure virtual function\n};\n\nclass derivedClass1 :baseClass{\npublic:\n    void myfunction(double dA, double dB)override;\n    void myfunction(double dC)override;\n};\n\nclass derivedClass2 :baseClass{\npublic:\n    void myfunction(double dA, double dB)override;\n    void myfunction(double dC)override;\n};\n</code></pre>\n\n<p>classes.cpp :</p>\n\n<pre><code>#include\"classes.h\"\n\nvoid derivedClass1::myfunction(double dA, double dB){\n    //DO STUFF\n}\n\nvoid derivedClass2::myfunction(double dA, double dB){\n    //Do different stuff to derivedClass1\n}\n\ntemplate &lt;class type&gt;\nvoid type::myfunction(double dC){\n    double dA = dC;\n    double dB = 0; //In place of a complex calculation\n\n    myfunction(dA, dB)  //Call the function for the\n//relevant class and 2 input arguments.\n\n}\n</code></pre>\n\n<p>main:</p>\n\n<pre><code>#include\"classes.h\"\n\nint main(){\n    derivedClass1 example;\n    example.myfunction(1.0);\n}\n</code></pre>\n\n<p>What I want to do is overload all myfunction for only one input argument with a template function. As there's many derived classes I wanted to use templates. However, when I do something like this I get this error: </p>\n\n<blockquote>\n  <p>error C2063: 'myfunction' : not a function</p>\n</blockquote>\n\n<p>Is there an easy way to do this or a better way around it? I've tried putting the template in the header file and removing the in class declarations but that doesn't work either.</p>\n"}, {"tags": ["c++", "vector", "find"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1430931577, "post_id": 30082990, "comment_id": 48279203, "body": "Why is your indentation so haphazard?"}, {"owner": {"reputation": 3, "user_id": 4253460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c4d7e8a46a4dde77aafae1c62aff69?s=128&d=identicon&r=PG&f=1", "display_name": "Ben D.", "link": "https://stackoverflow.com/users/4253460/ben-d"}, "edited": false, "score": 0, "creation_date": 1430932626, "post_id": 30082990, "comment_id": 48279886, "body": "indenting for each pair of brackets sounds about right to me..."}], "answers": [{"tags": [], "owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "is_accepted": true, "score": 0, "last_activity_date": 1430931547, "creation_date": 1430931547, "answer_id": 30083070, "question_id": 30082990, "link": "https://stackoverflow.com/questions/30082990/how-to-find-a-specific-string-in-a-vector-and-use-it-in-an-if-statement/30083070#30083070", "title": "how to find a specific string in a vector and use it in an if statement", "body": "<pre><code>if(std::find(inventory.begin(), inventory.end(), std::string(\"sword\")) != inventory.end())\n    ...\n</code></pre>\n\n<p>do not forget to include <code>&lt;algorithm&gt;</code></p>\n"}], "owner": {"reputation": 3, "user_id": 4253460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c4d7e8a46a4dde77aafae1c62aff69?s=128&d=identicon&r=PG&f=1", "display_name": "Ben D.", "link": "https://stackoverflow.com/users/4253460/ben-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "closed_date": 1430931629, "accepted_answer_id": 30083070, "answer_count": 1, "score": 0, "last_activity_date": 1430932092, "creation_date": 1430931319, "last_edit_date": 1430932092, "question_id": 30082990, "link": "https://stackoverflow.com/questions/30082990/how-to-find-a-specific-string-in-a-vector-and-use-it-in-an-if-statement", "closed_reason": "Duplicate", "title": "how to find a specific string in a vector and use it in an if statement", "body": "<p>This is what my vector starts as:</p>\n\n<pre><code>vector&lt;string&gt; inventory;\ninventory.push_back(\"sword\");\ninventory.push_back(\"armor\");\n</code></pre>\n\n<p>the player of this game will be able to choose two of three items with this code block:</p>\n\n<pre><code>while(paid &lt; 2)\n{\n    cout &lt;&lt; \"choice: \";\n    cin &gt;&gt; equip;\n    ++paid;\n    inventory.insert(inventory.begin(), equip);\n}\n\nif(paid == 2)\n{\n    cout &lt;&lt; \"\\nYou are out of money\\n\";\n}\n</code></pre>\n\n<p>then there is a character that will interact with one of the inventory items if you purchased it. </p>\n\n<pre><code>if((bazaar == \"woman\") || (bazaar == \"WOMAN\"))\n{\n    cout &lt;&lt; \"you approach the woman, and she gives you a look.\";\n\n    if(...)\n    {\n\n    }\n}\n</code></pre>\n\n<p>in that second <code>if</code> statement, I want to be able to check for a string in the inventory vector, and have two separate things happen, depending on whether or not that string is in the vector somewhere.</p>\n\n<p>(as a side note, this is code for a text based game played in the console window)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 306, "user_id": 3508350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e8b4d87030697e2b69d6bdcf6c681c0?s=128&d=identicon&r=PG", "display_name": "Joe Sewell", "link": "https://stackoverflow.com/users/3508350/joe-sewell"}, "edited": false, "score": 0, "creation_date": 1430931129, "post_id": 30082821, "comment_id": 48278903, "body": "FYI, the code for <code>f()</code> shouldn&#39;t give a memory leak, since <code>delete</code> would know that <code>h</code> points to an instance of <code>CanData</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 306, "user_id": 3508350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e8b4d87030697e2b69d6bdcf6c681c0?s=128&d=identicon&r=PG", "display_name": "Joe Sewell", "link": "https://stackoverflow.com/users/3508350/joe-sewell"}, "edited": false, "score": 4, "creation_date": 1430932113, "post_id": 30082821, "comment_id": 48279565, "body": "@JoeSewell: Actually, it has UB due to missing virtual destructor."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1430932337, "post_id": 30082821, "comment_id": 48279722, "body": "@Lightness, even if there are no virtual functions at all and the class is therefore non-polymorphic?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 2, "creation_date": 1430932383, "post_id": 30082821, "comment_id": 48279752, "body": "@SergeyTachenov: Yes. Read <code>[C++11: 5.3.5&#47;3]</code>."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 1, "creation_date": 1430932694, "post_id": 30082821, "comment_id": 48279925, "body": "Oh, I see. Indeed, even a trivial destructor can be not so trivial - it could call fields&#39; destructors, which can do anything, so it actually makes sense to define as UB any situation where a destructor (trivial or not) may not be called."}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1431175653, "post_id": 30083000, "comment_id": 48388919, "body": "<i>If you delete a pointer to a derived type held as its base type and you don&#39;t have a virtual destructor, the derived types destructor won&#39;t be called</i> It&#39;s undefined behaviour, so <i>anything</i> can happen. You cannot tell what destructor is called and what not."}], "tags": [], "owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "is_accepted": false, "score": 1, "last_activity_date": 1430931340, "creation_date": 1430931340, "answer_id": 30083000, "question_id": 30082821, "link": "https://stackoverflow.com/questions/30082821/can-a-class-hierarchy-be-safe-and-trivially-copyable/30083000#30083000", "title": "Can a class hierarchy be safe and trivially copyable?", "body": "<p>If you delete a pointer to a derived type held as its base type and you don't have a virtual destructor, the derived types destructor won't be called, whether it's implicitly generated or not. And whether its implicitly generated or not, you want it to be called. If the derived type's destructor wouldn't actually do anything anyway though, it might not leak anything or cause a problem. If the derived type holds something like a <code>std::string</code>, <code>std::vector</code>, or anything with a dynamic allocation, you want the dtors to be called. As a matter of good practice, you always want a virtual destructor for base classes whether or not the derived classes destructors <em>need</em> to be called (since a base class shouldn't know about what derives from it, it shouldn't make an assumption like this).</p>\n\n<p>If you copy a type like so:</p>\n\n<pre><code>Base* b1 = new Derived;\nBase b2 = *b1;\n</code></pre>\n\n<p>You will only invoke <code>Base</code>s copy ctor. The parts of the object which are actually from <code>Derived</code> will not be involved. <code>b2</code> will not secretly be a <code>Derived</code>, it will just be a <code>Base</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1430932156, "post_id": 30083007, "comment_id": 48279597, "body": "<i>&quot;the lack of a virtual destructor is not a problem&quot;</i> Except for having undefined behaviour and therefore being able to do literally anything at all (<code>[C++11: 5.3.5&#47;3]</code>)."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1430932701, "post_id": 30083007, "comment_id": 48279931, "body": "@LightnessRacesinOrbit thanks for pointing that out (I have adapted the answer accordinly). I wasn&#39;t fully aware of that. Most compilers simply only warn about this, but usually don&#39;t make it an error to have a public non-virtual destructor in base. What&#39;s the logic behind that then?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1430932893, "post_id": 30083007, "comment_id": 48280043, "body": "@Walter: It&#39;s only undefined behavior to <code>delete</code> a derived type through a base pointer, which is nearly impossible for compilers to detect."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1430933235, "post_id": 30083007, "comment_id": 48280255, "body": "@Walter Compilers are not omniscient, and they cannot tell the future :)"}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 0, "last_activity_date": 1430932903, "last_edit_date": 1430932903, "creation_date": 1430931368, "answer_id": 30083007, "question_id": 30082821, "link": "https://stackoverflow.com/questions/30082821/can-a-class-hierarchy-be-safe-and-trivially-copyable/30083007#30083007", "title": "Can a class hierarchy be safe and trivially copyable?", "body": "<p>It's almost safe. In particular, there is <strong>no memory leak</strong> in</p>\n\n<pre><code>Header* h = new CanData();\ndelete h;\n</code></pre>\n\n<p><code>delete h</code> calls the destructor of <code>Header</code> and then frees the memory pointed to by <code>h</code>. The amount of memory freed is the same as was initially allocated at that memory address, not the <code>sizeof(Header)</code>. Since <code>Header</code> and <code>CanData</code> are trivial, their destructors do nothing.</p>\n\n<p>However, you <strong>must provide a virtual destructor</strong> to base even if it does nothing (by requirement of the standard to avoid undefined behaviour). A common guideline is that a destructor for a base class must be either public and virtual or protected and nonvirtual</p>\n\n<p>Of course, you must beware slicing as usual.</p>\n"}, {"tags": [], "owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "is_accepted": false, "score": 4, "last_activity_date": 1430935131, "last_edit_date": 1430935131, "creation_date": 1430931644, "answer_id": 30083102, "question_id": 30082821, "link": "https://stackoverflow.com/questions/30082821/can-a-class-hierarchy-be-safe-and-trivially-copyable/30083102#30083102", "title": "Can a class hierarchy be safe and trivially copyable?", "body": "<p>This code</p>\n\n<pre><code>Header* h = new CanData();\ndelete h;\n</code></pre>\n\n<p>will trigger <strong>undefined behavior</strong> since \u00a75.3.5/p3 states:</p>\n\n<blockquote>\n  <p>In the first alternative (delete object), if the static type of the object to be deleted is different from its\n  dynamic type, the static type shall be a base class of the dynamic type of the object to be deleted and the\n  static type shall have a virtual destructor or the behavior is undefined</p>\n</blockquote>\n\n<p>and regardless of not having dynamically allocated objects contained in your derived class (really bad if you have), you shouldn't do it. Having a class hierarchy without the base class virtual destructor is not a problem <em>per se</em>, it becomes a problem when you try to mix static and dynamic types with <code>delete</code>.</p>\n\n<p>Doing <code>memcpy</code> on a derived class object smells of bad design to me, I would rather address the need for a \"<em>virtual constructor</em>\" (i.e. a virtual <code>clone()</code> function in your base class) to duplicate your derived objects.</p>\n\n<p>You can have your class hierarchy that is trivially copyable if you make sure that your object, its subobjects and base classes are trivially copyable. If you want to prevent users referring to your derived objects via base classes you could, as Mark first suggested, <a href=\"http://coliru.stacked-crooked.com/a/35e2bf858fdd08a8\" rel=\"nofollow\">render the inheritance protected</a> </p>\n\n<pre><code>class Header\n{\npublic:\n};\n\nclass CanData : protected Header\n{               ^^^^^^^^^\npublic:\n};\n\nint main() {\n  Header *pt = new CanData(); // &lt;- not allowed\n  delete pt;\n}\n</code></pre>\n\n<p>Notice that you won't be able to use base pointers at all to refer to derived objects due to \u00a74.10/p3 - pointer conversions.</p>\n"}, {"comments": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "reply_to_user": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1430942846, "post_id": 30083758, "comment_id": 48286266, "body": "@MarcoA The parent is completely non-polymorphic so having a pointer to it is only going to cause problems."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1430933605, "creation_date": 1430933605, "answer_id": 30083758, "question_id": 30082821, "link": "https://stackoverflow.com/questions/30082821/can-a-class-hierarchy-be-safe-and-trivially-copyable/30083758#30083758", "title": "Can a class hierarchy be safe and trivially copyable?", "body": "<p>My first instinct is \"don't do that - find another way, a different framework, or fix the framework\". But just for fun let's assume that for certain your class copy doesn't depend in any way on the copy constructor of the class or any of its comprised parts being called.</p>\n\n<p>Then since you're clearly inheriting to implement rather than to substitute the solution is easy: Use <code>protected</code> inheritance and your problem is solved, because they can no longer polymorphically access or delete your object, preventing the undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 4871538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a17596e554d8321eaf5e916f57c080?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Siemens", "link": "https://stackoverflow.com/users/4871538/simon-siemens"}, "is_accepted": false, "score": 0, "last_activity_date": 1431328494, "creation_date": 1431328494, "answer_id": 30161637, "question_id": 30082821, "link": "https://stackoverflow.com/questions/30082821/can-a-class-hierarchy-be-safe-and-trivially-copyable/30161637#30161637", "title": "Can a class hierarchy be safe and trivially copyable?", "body": "<p>Thanks all for posting various suggestions. I try a summarizing answer with an additional proposal for the solution.</p>\n\n<p>The prerequisite of my question was to reach a class hierarchy that is trivially copyable. See <a href=\"http://en.cppreference.com/w/cpp/concept/TriviallyCopyable\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/concept/TriviallyCopyable</a> and especially the requirement of a trivial destructor (<a href=\"http://en.cppreference.com/w/cpp/language/destructor#Trivial_destructor\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/destructor#Trivial_destructor</a>). The class cannot need a destructor implemented. This restricts the allowed data members, but is fine for me. The example shows only C-compatible types without dynamic memory allocation.</p>\n\n<p>Some pointed out that the problem of my code is undefined behaviour, not necessarily a memory leak. Marco quoted the standard regarding this. Thanks, really helpful. </p>\n\n<p>From my understanding of the answers, possible solutions are the following. Please correct me if I am wrong. The solution's point is that the implementation of the base class must avoid that its destructor can be called. </p>\n\n<p><strong>Solution 1:</strong> The proposed solutions use protected inheritance.</p>\n\n<pre><code>class CanData : protected Header\n{\n  ...\n};\n</code></pre>\n\n<p>It works but avoids that people can access the public interface of Header. This was the original intention to have a base class. CanData needs to forward these functions to Header. In the consequece, I would reconsider to use composition instead of inheritance here. But the solution should work.</p>\n\n<p><strong>Solution 2:</strong> Header's destructor must be protected, not the base class as a whole.</p>\n\n<pre><code>class Header\n{\npublic:\n  uint8_t Version() const;\n  const Timestamp&amp; StartTime();\n  // ... more simple setters and getters with error checking\n\nprotected:\n  ~Header() = default;\n\nprivate:\n  uint8_t m_Version;\n  Timestamp m_StartTime;\n};\n</code></pre>\n\n<p>Then no user can delete Header. This is fine for me, because Header has no purpose on its own. With public derivation, the public interface remains available to the user. </p>\n\n<p>My understanding is that CanData needs not implement a destructor to call the base class's desctructor. All can use the default destructor. I am not completely sure about this though.</p>\n\n<p>All in all, the answers to my questions in the end of the origial positing are:</p>\n\n<ol>\n<li><p><strong>Is it right that the class hierarchy without the virtual destructor is a problem even if all classes use the compiler's default destructor?</strong> </p>\n\n<p>It is only a problem if your destructor is public. You must avoid that people can access you desctrutor, except for derived classes. And you must ensure that derived classes call (implicitely) the base class's destructor.</p></li>\n<li><p><strong>Is it therefore right that I cannot have a safe class hierarchy that is trivially copyable?</strong></p>\n\n<p>You can make your base class safe with protected inheritance or a protected desctructor. Then you can have a hierarchy of trivially copyable classes.</p></li>\n</ol>\n"}], "owner": {"reputation": 111, "user_id": 4871538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a17596e554d8321eaf5e916f57c080?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Siemens", "link": "https://stackoverflow.com/users/4871538/simon-siemens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "answer_count": 5, "score": 11, "last_activity_date": 1431328494, "creation_date": 1430930805, "question_id": 30082821, "link": "https://stackoverflow.com/questions/30082821/can-a-class-hierarchy-be-safe-and-trivially-copyable", "title": "Can a class hierarchy be safe and trivially copyable?", "body": "<p>We use a framework that relies on memcpy in certain functions. To my understanding I can give everything that is trivially copyable into these functions.</p>\n\n<p>Now we want to use a simple class hierarchy. We are not sure whether we can have a class hierarchy that results in trivially copyable types because of the safe destruction. The example code looks like this.</p>\n\n<pre><code>class Timestamp; //...\n\nclass Header\n{\npublic:\n  uint8_t Version() const;\n  const Timestamp&amp; StartTime();\n  // ... more simple setters and getters with error checking\n\nprivate:\n  uint8_t m_Version;\n  Timestamp m_StartTime;\n};\n\nclass CanData : public Header\n{\npublic:\n  uint8_t Channel();\n  // ... more setters and getters with error checking\n\nprivate:\n  uint8_t m_Channel;\n};\n</code></pre>\n\n<p>The base class is used in several similar subclasses. Here I omitted all constructors and destructors. Thus the classes are trivially copyable. I suppose though that the user can write a code that results in a memory leak like this:</p>\n\n<pre><code>void f()\n{\n  Header* h = new CanData();\n  delete h;\n}\n</code></pre>\n\n<p>Is it right that the class hierarchy without the virtual destructor is a problem even if all classes use the compiler's default destructor? Is it therefore right that I cannot have a safe class hierarchy that is trivially copyable?</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 1, "creation_date": 1430931089, "post_id": 30082819, "comment_id": 48278883, "body": "I can&#39;t believe that this is really code which was provided in a library. <code>uint8_t *buffer[length];</code> is complete broken. First it is an array of pointers and not an array and it is allocated on the stack of the function and later returned which never works."}, {"owner": {"reputation": 924, "user_id": 2551338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gvXO5.jpg?s=128&g=1", "display_name": "Leandro", "link": "https://stackoverflow.com/users/2551338/leandro"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1430931227, "post_id": 30082819, "comment_id": 48278954, "body": "My mistake, I was performing some tests and I left this behind. I edited my post with the correct code."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1430931041, "creation_date": 1430931041, "answer_id": 30082893, "question_id": 30082819, "link": "https://stackoverflow.com/questions/30082819/warning-address-of-local-variable-buffer-returned/30082893#30082893", "title": "warning: address of local variable &#39;buffer&#39; returned", "body": "<p>A simple solution is to modify the library files and declare the buffer as <code>static</code>.  The <code>static</code> keyword tells the compiler that the variable will live after the execution leaves the function.  Since it lives after exiting the function, the address will still be valid.  </p>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1430931406, "post_id": 30082900, "comment_id": 48279080, "body": "There needs to be a check to verify there is only one allocation of the buffer inside the function.  Try calling the function 2 times and verify."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1430931065, "creation_date": 1430931065, "answer_id": 30082900, "question_id": 30082819, "link": "https://stackoverflow.com/questions/30082819/warning-address-of-local-variable-buffer-returned/30082900#30082900", "title": "warning: address of local variable &#39;buffer&#39; returned", "body": "<p><strong>Solution 1</strong></p>\n\n<p>Instead of</p>\n\n<pre><code>uint8_t buffer[length]; // Here is line 124\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>// Allocate memory from the heap.\nuint8_t* buffer = new unit8_t[length];\n</code></pre>\n\n<p>Make sure to deallocate the memory in the calling function.</p>\n\n<p><strong>Solution 2</strong></p>\n\n<p>Expect the input to come from the calling function.</p>\n\n<pre><code>uint8_t* HMC5883L::Read(int address, int length, uint8_t buffer[])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1430931252, "post_id": 30082916, "comment_id": 48278970, "body": "Where&#39;s the <code>malloc</code> call in your example?"}, {"owner": {"reputation": 924, "user_id": 2551338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gvXO5.jpg?s=128&g=1", "display_name": "Leandro", "link": "https://stackoverflow.com/users/2551338/leandro"}, "edited": false, "score": 0, "creation_date": 1430931260, "post_id": 30082916, "comment_id": 48278980, "body": "My mistake, I was performing some tests and I left this behind. I edited my post with the correct code."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1430931313, "post_id": 30082916, "comment_id": 48279021, "body": "How does your example prevent multiple allocations of the buffer?  Remember, the memory can&#39;t be deleted until after the function exits."}, {"owner": {"reputation": 2254, "user_id": 3638234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0154282463b68d52baee00eefd2daf05?s=128&d=identicon&r=PG", "display_name": "GHugo", "link": "https://stackoverflow.com/users/3638234/ghugo"}, "edited": false, "score": 0, "creation_date": 1430931550, "post_id": 30082916, "comment_id": 48279182, "body": "It is C++, so one must use <code>new</code> and <code>delete</code> keywords : <a href=\"https://arduino.land/FAQ/content/4/20/en/can-i-use-new-and-delete-with-arduino.html\" rel=\"nofollow noreferrer\">arduino.land/FAQ/content/4/20/en/&hellip;</a>. And it does not prevent memory to be allocated twice, but it is up to the programmer to take care of this."}], "tags": [], "owner": {"reputation": 2254, "user_id": 3638234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0154282463b68d52baee00eefd2daf05?s=128&d=identicon&r=PG", "display_name": "GHugo", "link": "https://stackoverflow.com/users/3638234/ghugo"}, "is_accepted": true, "score": 2, "last_activity_date": 1430931125, "creation_date": 1430931125, "answer_id": 30082916, "question_id": 30082819, "link": "https://stackoverflow.com/questions/30082819/warning-address-of-local-variable-buffer-returned/30082916#30082916", "title": "warning: address of local variable &#39;buffer&#39; returned", "body": "<p>It is because you declare buffer on the stack. If you want to return a dynamically allocated buffer, use malloc:</p>\n\n<pre><code>uint8_t *buffer = new uint8_t[length];\nif (buffer == NULL) error_allocation;\n\n// Make sure to de-allocate after you finish to use it\ndelete [] buffer;\n</code></pre>\n"}], "owner": {"reputation": 924, "user_id": 2551338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gvXO5.jpg?s=128&g=1", "display_name": "Leandro", "link": "https://stackoverflow.com/users/2551338/leandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2073, "favorite_count": 0, "closed_date": 1430931240, "accepted_answer_id": 30082916, "answer_count": 3, "score": 0, "last_activity_date": 1430931328, "creation_date": 1430930804, "last_edit_date": 1495541212, "question_id": 30082819, "link": "https://stackoverflow.com/questions/30082819/warning-address-of-local-variable-buffer-returned", "closed_reason": "Duplicate", "title": "warning: address of local variable &#39;buffer&#39; returned", "body": "<p>I'm working on an Arduino project and I need to use HMC5883L sensor's libraries. The problem is that the libraries are kind old and my compiler is complaining about the 'return' from a function:</p>\n\n<pre><code>/home/leandro/arduino-1.6.1/libraries/HMC5883L/HMC5883L.cpp: In member function 'uint8_t* HMC5883L::Read(int, int)':\n/home/leandro/arduino-1.6.1/libraries/HMC5883L/HMC5883L.cpp:124:11: warning: address of local variable 'buffer' returned [-Wreturn-local-addr]\nuint8_t buffer[length];\n</code></pre>\n\n<p>The part of the code is:</p>\n\n<p>HMC5883L.cpp</p>\n\n<pre><code>uint8_t* HMC5883L::Read(int address, int length)\n{\n  Wire.beginTransmission(HMC5883L_Address);\n  Wire.write(address);\n  Wire.endTransmission();\n\n  Wire.beginTransmission(HMC5883L_Address);\n  Wire.requestFrom(HMC5883L_Address, length);\n\n  uint8_t buffer[length]; // Here is line 124\n  if(Wire.available() == length)\n  {\n      for(uint8_t i = 0; i &lt; length; i++)\n      {\n          buffer[i] = Wire.read();\n      }\n  }\n  Wire.endTransmission();\n\n  return buffer;\n}\n</code></pre>\n\n<p>HMC5883L.h:</p>\n\n<pre><code>#ifndef HMC5883L_h\n#define HMC5883L_h\n\n#include &lt;Arduino.h&gt;\n#include &lt;Wire.h&gt;\n\n#define HMC5883L_Address 0x1E\n#define ConfigurationRegisterA 0x00\n#define ConfigurationRegisterB 0x01\n#define ModeRegister 0x02\n#define DataRegisterBegin 0x03\n\n#define Measurement_Continuous 0x00\n#define Measurement_SingleShot 0x01\n#define Measurement_Idle 0x03\n\n#define ErrorCode_1 \"Entered scale was not valid, valid gauss values are: 0.88, 1.3, 1.9, 2.5, 4.0, 4.7, 5.6, 8.1\"\n#define ErrorCode_1_Num 1\n\nstruct MagnetometerScaled\n{\n    float XAxis;\n    float YAxis;\n    float ZAxis;\n};\n\nstruct MagnetometerRaw\n{\n    int XAxis;\n    int YAxis;\n    int ZAxis;\n};\n\nclass HMC5883L\n{\n    public:\n      HMC5883L();\n\n      MagnetometerRaw ReadRawAxis();\n      MagnetometerScaled ReadScaledAxis();\n\n      int SetMeasurementMode(uint8_t mode);\n      int SetScale(float gauss);\n\n      const char* GetErrorText(int errorCode);\n\n    protected:\n      void Write(int address, int byte);\n      uint8_t* Read(int address, int length);\n\n    private:\n      float m_Scale;\n};\n#endif\n</code></pre>\n\n<p>I tried few suggestions from <a href=\"https://stackoverflow.com/questions/28679558/warning-function-returns-address-of-local-variable-wreturn-local-addr\" title=\"here\">here</a>, <a href=\"https://stackoverflow.com/questions/8743411/return-address-of-local-variable-in-c\" title=\"here\">here</a> and <a href=\"https://stackoverflow.com/questions/2744264/returning-the-address-of-local-or-temporary-variable\" title=\"here\">here</a> without success. Maybe I just couldn't figure out on how to solve this issue using those suggestion.</p>\n\n<p><strong>EDIT:</strong> There was an typo on my code, just changed it.</p>\n"}, {"tags": ["c++", "class", "constructor"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1430930657, "post_id": 30082647, "comment_id": 48278593, "body": "Could you please create a <a href=\"http://stackoverflow.com/help/mcve\">minimal compilable sample</a> of your code, that reproduces the behavior you describe?"}, {"owner": {"reputation": 9, "user_id": 4269627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qwZz.jpg?s=128&g=1", "display_name": "unix14", "link": "https://stackoverflow.com/users/4269627/unix14"}, "reply_to_user": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1430932876, "post_id": 30082647, "comment_id": 48280035, "body": "@WillBriggs Hey , thanks for your reply , all the things you said is irrelavent becauce this things are already declared in the code but i hadnt copied it to here .."}, {"owner": {"reputation": 9, "user_id": 4269627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qwZz.jpg?s=128&g=1", "display_name": "unix14", "link": "https://stackoverflow.com/users/4269627/unix14"}, "reply_to_user": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 0, "creation_date": 1430932969, "post_id": 30082647, "comment_id": 48280075, "body": "@user1978011 sorry , thought i could get some help to get things together and understand , the code itself is alot larger and i made 90% of the work , i just want help for this P2.addscore thing .."}, {"owner": {"reputation": 223115, "user_id": 426671, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zgBsf.jpg?s=128&g=1", "display_name": "Taryn", "link": "https://stackoverflow.com/users/426671/taryn"}, "edited": false, "score": 0, "creation_date": 1430933814, "post_id": 30082647, "comment_id": 48280645, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/77115/discussion-on-question-by-unix14-c-multi-classes-and-private-data-members\">moved to chat</a>."}, {"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1430934061, "post_id": 30082647, "comment_id": 48280806, "body": "Here&#39;s the error, which is certainly predictable, that I get when I try to compile that:  <code>Cannot open include file: &#39;NumSet.h&#39;: No such file or directory</code>."}, {"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1430934116, "post_id": 30082647, "comment_id": 48280832, "body": "...&quot;Could you please create a minimal compilable sample of your code, that reproduces the behavior you describe? \u2013  \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 &quot;  This is why you&#39;re getting comments rather than solutions.  Do it and we can help you."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430940141, "post_id": 30082647, "comment_id": 48284590, "body": "@unix14 Rolled back your edit. Just linking your actual code makes your question even worse. I&#39;ve been asking you to create a minimal sample source code, that evidents to reproduce that behavior. This means <b>you reduce your source code</b>, until you have a (let&#39;s say not more than ~20 lines sample, alternatively highlight and link to a online ide like <a href=\"http://ideone.com/\" rel=\"nofollow noreferrer\">ideone</a> you can present here."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 9, "user_id": 4269627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qwZz.jpg?s=128&g=1", "display_name": "unix14", "link": "https://stackoverflow.com/users/4269627/unix14"}, "edited": false, "score": 0, "creation_date": 1430940590, "post_id": 30082940, "comment_id": 48284866, "body": "@unix14 <i>&quot;Uploaded Whole Code \u2013&quot;</i> You didn&#39;t., you linked it, which is even worse than your original post. Please create a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> as mentioned!"}], "tags": [], "owner": {"reputation": 1, "user_id": 4863682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1186495f6de5e3319ef8b6c46adb3d0?s=128&d=identicon&r=PG&f=1", "display_name": "user4863682", "link": "https://stackoverflow.com/users/4863682/user4863682"}, "is_accepted": false, "score": 0, "last_activity_date": 1430931180, "creation_date": 1430931180, "answer_id": 30082940, "question_id": 30082647, "link": "https://stackoverflow.com/questions/30082647/c-multi-classes-and-private-data-members/30082940#30082940", "title": "C++ - Multi-Classes and Private Data Members", "body": "<p>nothing seems wrong here.. just make sure - \n1) Score is initialized to 0\n2) Not doing any assignment or increment by mistake</p>\n"}], "owner": {"reputation": 9, "user_id": 4269627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qwZz.jpg?s=128&g=1", "display_name": "unix14", "link": "https://stackoverflow.com/users/4269627/unix14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1430940004, "creation_date": 1430930285, "last_edit_date": 1430940004, "question_id": 30082647, "link": "https://stackoverflow.com/questions/30082647/c-multi-classes-and-private-data-members", "title": "C++ - Multi-Classes and Private Data Members", "body": "<p>I'm doing for my college a work in c++, my code is based on 2 classes, \n<code>NumSet</code> and <code>Game</code>.\ndata members are private.</p>\n\n<pre><code>class NumSet\n{\n    int arr[5];     //Cards\n    int Score;\n}\n\nclass Game \n{\n    NumSet P1, P2;              //Player 1 , And Player 2 \n    int OpenCard;               //For The Card in The center\n}\n</code></pre>\n\n<p>for adding a score to P1 \\ P2 from a method inside of <code>Game</code>\nI created this method: </p>\n\n<pre><code>void NumSet::Addscore()\n{\n    ++this-&gt;Score;\n}\n</code></pre>\n\n<p>and this other method:</p>\n\n<pre><code>void NumSet::PrintScore()\n{\n    cout &lt;&lt; this-&gt;Score &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Until now it all looks fine, but for some reason \nwhen I call the method <code>Addscore</code>: </p>\n\n<pre><code>P2.Addscore();\n</code></pre>\n\n<p>it raises its value from 0 to 2..</p>\n\n<pre><code>NumSet::NumSet()        //C'tor\n{\n    for (int i = 0; i &lt; STARTCARDS; i++)\n        arr[i] = NULL;\n    this-&gt;Sort();       //BubbleSort\n    Score = 0;\n}\n\nvoid Game::ChangeCards()\n{\n    if (x1 &gt; x2)        //Player 1 is Stronger\n        P1.Addscore();\n\n    else if (x2 &gt; x1)   //Player 2 is Stronger\n        P2.Addscore();\n\n    else                //Both Cards Are Equal\n    {               //Checkin For The Lower Max Num\n        int max1 = P1.Max();     //Max returns maximum num in arr\n        int max2 = P2.Max();\n        if (max1 &lt; max2)\n            P1.Addscore();\n        else if (max2 &lt; max1)\n            P2.Addscore();\n    }\n}\n</code></pre>\n\n<p>I really would like an explanation of what's wrong in here.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "linux", "background"], "comments": [{"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 0, "creation_date": 1430930312, "post_id": 30082561, "comment_id": 48278357, "body": "You&#39;d like a <a href=\"http://en.wikipedia.org/wiki/Keystroke_logging\" rel=\"nofollow noreferrer\">KeyLogger</a> ?"}, {"owner": {"reputation": 75, "user_id": 4161837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a735342600e52fa326f42cdab949a284?s=128&d=identicon&r=PG&f=1", "display_name": "Law.", "link": "https://stackoverflow.com/users/4161837/law"}, "reply_to_user": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 0, "creation_date": 1430930434, "post_id": 30082561, "comment_id": 48278433, "body": "Yes, sort of. But I want to code it myself, unless that&#39;s way too complicated."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1430930523, "post_id": 30082561, "comment_id": 48278498, "body": "It&#39;s more complicated than just calling a function. You&#39;d need to intercept the event in the OS or the interrupt and let that event or interrupt pass through, while you log the event/interrupt to your background application. In other words, it&#39;s a system level functionality, not application level."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1430930863, "post_id": 30082561, "comment_id": 48278725, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/14553435/how-to-listen-for-mouse-events-in-linux\">How to listen for mouse events in Linux?</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430930869, "post_id": 30082561, "comment_id": 48278735, "body": "I can&#39;t get why this overly broad question (basically asking for code samples) was upvored?"}, {"owner": {"reputation": 75, "user_id": 4161837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a735342600e52fa326f42cdab949a284?s=128&d=identicon&r=PG&f=1", "display_name": "Law.", "link": "https://stackoverflow.com/users/4161837/law"}, "edited": false, "score": 0, "creation_date": 1430930911, "post_id": 30082561, "comment_id": 48278767, "body": "I&#39;m still willing to read about that. Would you know what websites/documentation I should read?"}], "answers": [{"tags": [], "owner": {"reputation": 1503, "user_id": 4037465, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4f3bc53b780a4ff232429b4391863f49?s=128&d=identicon&r=PG&f=1", "display_name": "Ashot Khachatryan", "link": "https://stackoverflow.com/users/4037465/ashot-khachatryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1431027536, "last_edit_date": 1431027536, "creation_date": 1431027088, "answer_id": 30110074, "question_id": 30082561, "link": "https://stackoverflow.com/questions/30082561/background-program-in-c-for-linux/30110074#30110074", "title": "Background program in C++ for Linux", "body": "<p>You need to read your mouse device in Linux. In my Ubuntu that device is '/dev/input/event4', you can check yours from '/proc/bus/input/devices'.</p>\n\n<p>In linux/input.h header you can find 'input_event' struct which can be used to handle different mouse events.</p>\n\n<p>Here is simple example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;time.h&gt;\n#include &lt;linux/input.h&gt;\n\n#define MOUSEFILE \"/dev/input/event4\"\n\nint main()\n{\n  int fd;\n  struct input_event ie;\n\n if((fd = open(MOUSEFILE, O_RDONLY)) == -1) {\n    perror(\"Cannot access mouse device\");\n     exit(EXIT_FAILURE);\n      }\n while(read(fd, &amp;ie, sizeof(struct input_event))) {\n   printf(\"%d, %d, %d\\n\", ie.type, ie.value, ie.code);\n }\n return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>You can find out more about input_event struct and code definitions from <a href=\"http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/include/linux/input.h?v=2.6.11.8\" rel=\"nofollow\">http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/include/linux/input.h?v=2.6.11.8</a></p>\n\n<p>For example in my machine I realized that when I left click my mouse the following combination occurs</p>\n\n<pre><code>ie.type = 1\nie.value = 1\nie.code = 272\n</code></pre>\n\n<p>This can be helpful to catch different events in Linux.</p>\n"}], "owner": {"reputation": 75, "user_id": 4161837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a735342600e52fa326f42cdab949a284?s=128&d=identicon&r=PG&f=1", "display_name": "Law.", "link": "https://stackoverflow.com/users/4161837/law"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1431027536, "creation_date": 1430930026, "question_id": 30082561, "link": "https://stackoverflow.com/questions/30082561/background-program-in-c-for-linux", "title": "Background program in C++ for Linux", "body": "<p>I'm not sure as to what keywords I should use to search this, so I'm going to ask here. I'm sorry if that's a duplicate.</p>\n\n<p>Basically, I'd like to do the following</p>\n\n<pre><code>./my_prog &amp;\n</code></pre>\n\n<p>where my_prog, coded in C++14,</p>\n\n<ul>\n<li>adds a character to file A whenever I right click.</li>\n<li>adds a character to file B whenever I left click.</li>\n<li>adds a character to file C whenever I press a key.</li>\n</ul>\n\n<p>(That would enable me to see how often I do any of the above at the end of the day.)</p>\n\n<p>First I wanted to use Qt but I realized soon afterwards that Qt does that in its own window only. (Or at least, that's as far as I can use it.) That wouldn't help as I'd rather have <code>my_prog</code> count every single click and key-press.</p>\n\n<p>Anyone know what library/functions I should use? Thanks.</p>\n"}, {"tags": ["c++", "boost", "visual-studio-2013", "llvm"], "comments": [{"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1431276643, "post_id": 30082559, "comment_id": 48415260, "body": "LLVM-VS isn&#39;t even remotely ready for prime time so I don&#39;t know what this question is about."}], "owner": {"reputation": 602, "user_id": 797396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2bd94537b14d881761688b937b9a211?s=128&d=identicon&r=PG", "display_name": "radato", "link": "https://stackoverflow.com/users/797396/radato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1431274534, "creation_date": 1430930019, "last_edit_date": 1431274534, "question_id": 30082559, "link": "https://stackoverflow.com/questions/30082559/compiling-c-using-llvm-visual-studio-2013-with-boost", "title": "Compiling c++ using llvm &amp; visual studio 2013 with BOOST", "body": "<p>I am trying to compile with llvm in MS Visual Studio 2013 but the minute I use BOOST I get errors which I can't solve.<br><br>\nHere is the simple code I use:</p>\n\n<pre><code>#include &lt;boost/thread.hpp&gt;\n\nvoid doAbsolutelyNothingForever()\n{\n    while (true);\n}\n\nint main()\n{\n    //boost::thread t(doAbsolutelyNothingForever);\n    //t.join();\n    return 0;\n}\n</code></pre>\n\n<p>To which I get many errors. So my next guess was to build boost and compile it with clang. After doing so, I still get the same errors.\nAnd here are the errors:</p>\n\n<blockquote>\n  <p>1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(27,9):\n  error : unknown type name '_Atomic'   1>  typedef _Atomic(\n  boost::int_least32_t ) atomic_int_least32_t;  1>          ^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(27,25):\n  error : cannot define or redeclare 'int_least32_t' here because\n  namespace 'detail' does not enclose namespace 'boost'     1>  typedef\n  _Atomic( boost::int_least32_t ) atomic_int_least32_t;     1>                   ~~~~~~~^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(27,25):\n  error : typedef declarator cannot be qualified    1>  typedef _Atomic(\n  boost::int_least32_t ) atomic_int_least32_t;  1><br>\n  ~~~~~~~^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(27,40):\n  error : expected ';' after top level declarator   1>  typedef _Atomic(\n  boost::int_least32_t ) atomic_int_least32_t;  1><br>\n  ^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(29,31):\n  error : unknown type name 'atomic_int_least32_t'  1>  inline void\n  atomic_increment( atomic_int_least32_t * pw )     1><br>\n  ^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(34,47):\n  error : unknown type name 'atomic_int_least32_t'  1>  inline\n  boost::int_least32_t atomic_decrement( atomic_int_least32_t * pw )    1>\n  ^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(39,59):\n  error : unknown type name 'atomic_int_least32_t'  1>  inline\n  boost::int_least32_t atomic_conditional_increment(\n  atomic_int_least32_t * pw )   1><br>\n  ^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(68,5):\n  error : unknown type name 'atomic_int_least32_t'  1><br>\n  atomic_int_least32_t use_count_;    // #shared    1>      ^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(69,5):\n  error : unknown type name 'atomic_int_least32_t'  1><br>\n  atomic_int_least32_t weak_count_;   // #weak + (#shared != 0)     1><br>\n  ^\n    1>d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/sp_counted_base_clang.hpp(132,47):\n  error : unknown type name 'atomic_int_least32_t'  1>          return\n  __c11_atomic_load( const_cast&lt; atomic_int_least32_t* >( &amp;use_count_ ), __ATOMIC_ACQUIRE );    1>                                                ^     1>  In file included from Source.cpp:1:     1>  In file included from\n  d:\\local\\boost_1_58_0\\boost\\thread.hpp:13:    1>  In file included from\n  d:\\local\\boost_1_58_0\\boost/thread/thread.hpp:12:     1>  In file\n  included from d:\\local\\boost_1_58_0\\boost/thread/thread_only.hpp:15:\n    1>  In file included from\n  d:\\local\\boost_1_58_0\\boost/thread/win32/thread_data.hpp:11:\n    1>d:\\local\\boost_1_58_0\\boost/thread/win32/thread_primitives.hpp(183,54):\n  error : redeclaration of 'Sleep' cannot add 'dllimport' attribute     1> \n  __declspec(dllimport) void __stdcall Sleep(unsigned long);    1>                                                       ^  1>  d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/yield_k.hpp(63,29)\n  :  note: previous declaration is here     1>    extern \"C\" void __stdcall\n  Sleep( unsigned long ms );    1>                              ^   1>  In\n  file included from Source.cpp:1:  1>  In file included from\n  d:\\local\\boost_1_58_0\\boost\\thread.hpp:13:    1>  In file included from\n  d:\\local\\boost_1_58_0\\boost/thread/thread.hpp:12:     1>  In file\n  included from d:\\local\\boost_1_58_0\\boost/thread/thread_only.hpp:15:\n    1>  In file included from\n  d:\\local\\boost_1_58_0\\boost/thread/win32/thread_data.hpp:11:\n    1>d:\\local\\boost_1_58_0\\boost/thread/win32/thread_primitives.hpp(418,21):\n  error : no member named 'Sleep' in namespace 'boost::detail::win32';\n  did you mean simply 'Sleep'?  1><br>\n  ::boost::detail::win32::Sleep(0);     1><br>\n  ^~~~~~~~~~~~~~~~~~~~~~~~  1> \n  d:\\local\\boost_1_58_0\\boost/smart_ptr/detail/yield_k.hpp(63,29) : \n  note: 'Sleep' declared here   1>    extern \"C\" void __stdcall Sleep(\n  unsigned long ms );   1>                              ^   1>  In file\n  included from Source.cpp:1:   1>  In file included from\n  d:\\local\\boost_1_58_0\\boost\\thread.hpp:13:    1>  In file included from\n  d:\\local\\boost_1_58_0\\boost/thread/thread.hpp:12:     1>  In file\n  included from d:\\local\\boost_1_58_0\\boost/thread/thread_only.hpp:15:\n    1>  In file included from\n  d:\\local\\boost_1_58_0\\boost/thread/win32/thread_data.hpp:11:\n    1>d:\\local\\boost_1_58_0\\boost/thread/win32/thread_primitives.hpp(426,45):\n  error : no type named 'Sleep' in namespace 'boost::detail::win32'     1> \n  ::boost::detail::win32::Sleep(milliseconds);  1><br>\n  ~~~~~~~~~~~~~~~~~~~~~~~~^     1>  13 errors generated.    ========== Build:\n  0 succeeded, 1 failed, 1 up-to-date, 0 skipped ==========</p>\n</blockquote>\n"}, {"tags": ["c++", "templates", "template-specialization", "overload-resolution"], "answers": [{"tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 4, "last_activity_date": 1430930214, "creation_date": 1430930214, "answer_id": 30082620, "question_id": 30082548, "link": "https://stackoverflow.com/questions/30082548/why-does-using-the-scope-resolution-operator-change-which-overloaded-template-in/30082620#30082620", "title": "Why does using the scope resolution operator change which overloaded template in the global namespace gets called?", "body": "<p>Names declared after the template can only be found via <strong>argument-dependent name lookup</strong>. Your overload of <code>foo</code> for <code>int&amp;</code> is only found because one of the types involved, <code>W&lt;true&gt;</code>, is a specialization of a class template declared in the global namespace. Hence ADL looks for declarations in the global namespace in the instantiation context and finds the (more specialized), desired overload.</p>\n\n<p><code>::foo</code> is a qualified-id, which suppresses ADL, hence only names declared in the definition context are considered.</p>\n"}], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 30082620, "answer_count": 1, "score": 7, "last_activity_date": 1430930214, "creation_date": 1430929987, "question_id": 30082548, "link": "https://stackoverflow.com/questions/30082548/why-does-using-the-scope-resolution-operator-change-which-overloaded-template-in", "title": "Why does using the scope resolution operator change which overloaded template in the global namespace gets called?", "body": "<p>Consider the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;class W, class T&gt;\nvoid foo(W&amp; a, T&amp; t)\n{\n  std::cout &lt;&lt; \"generic\" &lt;&lt; std::endl;\n}\n\ntemplate &lt;template &lt;bool&gt; class W, class T&gt;\nvoid foo(W&lt;true&gt;&amp; a, const T&amp; t)\n{\n  foo(a, const_cast&lt;T&amp;&gt;(t));\n}\n\ntemplate &lt;class W&gt;\nvoid foo(W&amp; a, int&amp; t)\n{\n  std::cout &lt;&lt; \"int\" &lt;&lt; std::endl;\n}\n\ntemplate &lt;bool&gt; struct what;\ntemplate&lt;&gt; struct what&lt;true&gt; { };\n\nint main() {\n  const int ci = 10;\n  what&lt;true&gt; wt;\n\n  foo(wt, ci);\n\n  return 0;\n}\n</code></pre>\n\n<p>The output is (<a href=\"https://ideone.com/jzEC5J\">ideone link</a>):</p>\n\n<pre><code>int\n</code></pre>\n\n<p>This makes sense to me: <code>foo(what&lt;true&gt;&amp;, const int&amp;)</code> matches the <code>const_cast</code> overload, which then calls <code>foo(what&lt;true&gt;&amp;, int&amp;)</code>, which matches the <code>int</code> overload.</p>\n\n<p>Yet if I change the <code>const_cast</code> function to the following:</p>\n\n<pre><code>template &lt;template &lt;bool&gt; class W, class T&gt;\nvoid foo(W&lt;true&gt;&amp; a, const T&amp; t)\n{\n    ::foo(a, const_cast&lt;T&amp;&gt;(t));\n}\n</code></pre>\n\n<p>The output is now (<a href=\"https://ideone.com/LYi7jK\">ideone link</a>):</p>\n\n<pre><code>generic\n</code></pre>\n\n<p>This doesn't make sense to me. Why does changing that <code>const_cast</code> overload of <code>foo</code> to call <code>::foo</code> cause the generic version to get called instead of the int version? </p>\n\n<p>My understanding of <code>::</code> is that it was just to disambiguate which function to call in the case you have a method or a function in the global namespace. The <code>const_cast</code> overload still matches, which should then call <code>::foo(what&lt;true&gt;&amp;, int&amp;)</code>, which should match the <code>int</code> specialization - shouldn't it?</p>\n\n<p>Further, if I change the order and place the <code>const_cast</code> overload using <code>::foo</code> after the <code>int</code> specialization, then the <code>int</code> specialization gets called (<a href=\"https://ideone.com/BWL3Ua\">ideone link</a>). Why does the order of definition matter here?</p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1430930200, "post_id": 30082500, "comment_id": 48278292, "body": "You can only convert one single value to string, not an array."}, {"owner": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1430930494, "post_id": 30082500, "comment_id": 48278474, "body": "Okay( Then i should ask - How to display float[4] via textEdit ?"}, {"owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "edited": false, "score": 0, "creation_date": 1430931472, "post_id": 30082500, "comment_id": 48279139, "body": "You need to provide more information. <i>How</i> do you want these floats displayed textually? What sort of floating point precision do you need?"}, {"owner": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "edited": false, "score": 0, "creation_date": 1430933405, "post_id": 30082500, "comment_id": 48280383, "body": "Actually I am not excited by the form of display or precision, I simply want to display it via QTextEdit or other widget in Qt cteator."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "edited": false, "score": 0, "creation_date": 1430930708, "post_id": 30082700, "comment_id": 48278627, "body": "I use array, not a single element of this array"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "edited": false, "score": 0, "creation_date": 1430930840, "post_id": 30082700, "comment_id": 48278706, "body": "That&#39;s the problem. There is no overload of <code>QString::number</code> that can work with an array. To convert the entire array to <code>QString</code>, you&#39;ll have to convert each element of the array, decide what separator to use to combine them, and combine the resulting strings in a loop."}, {"owner": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "edited": false, "score": 0, "creation_date": 1430931295, "post_id": 30082700, "comment_id": 48279006, "body": "Yep, I understood.I can display somehow float via textEdit?"}, {"owner": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "edited": false, "score": 0, "creation_date": 1430931832, "post_id": 30082700, "comment_id": 48279376, "body": "Hmm. QTextEdit \u2014 is a visual element of the graphic interface in QT Creator."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "edited": false, "score": 0, "creation_date": 1430931893, "post_id": 30082700, "comment_id": 48279410, "body": "@Nickel94, I have never used <code>QTextEdit</code>. I can&#39;t help you there."}, {"owner": {"reputation": 5317, "user_id": 1908677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df23b8c11c0268a0a7ce9db736e06277?s=128&d=identicon&r=PG", "display_name": "Daniel Hedberg", "link": "https://stackoverflow.com/users/1908677/daniel-hedberg"}, "edited": false, "score": 1, "creation_date": 1430933716, "post_id": 30082700, "comment_id": 48280588, "body": "Like R Sahu, said, iterate the array of floats and convert each float to a QString using QString::number(). Concatenate the converted strings with a separator of your choice. Set the QTextEdits contents to the resulting string using QTextEdit::setPlainText(). If it&#39;s not clear to you what to do after this, I think you simply have to study some more C++, read the Qt documentation, and most importantly, learn by practicing!"}, {"owner": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "edited": false, "score": 0, "creation_date": 1430934783, "post_id": 30082700, "comment_id": 48281277, "body": "Thank you. Practice is that I do now"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1430930441, "creation_date": 1430930441, "answer_id": 30082700, "question_id": 30082500, "link": "https://stackoverflow.com/questions/30082500/how-to-convert-array-to-qstring/30082700#30082700", "title": "How to convert array to QString?", "body": "<p><code>QString::number</code> has various overloads:</p>\n\n<pre><code>QString number(long n, int base = 10)\nQString number(double n, char format = 'g', int precision = 6)\nQString number(ulong n, int base = 10)\nQString number(int n, int base = 10)\nQString number(uint n, int base = 10)\nQString number(qlonglong n, int base = 10)\nQString number(qulonglong n, int base = 10)\n</code></pre>\n\n<p>Your compiler is trying to convert the array to a pointer and the pointer to an integer. Since it can convert the pointer to more than one integer type for which there is an overload, it cannot decide which overload to use.</p>\n\n<p>Did you mean to use the array in the call to <code>QString::number</code> or just one of the elements of the array?</p>\n"}], "owner": {"reputation": 1, "user_id": 4871471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fb064500dc326588e3a06a83a06436?s=128&d=identicon&r=PG&f=1", "display_name": "Nickel94", "link": "https://stackoverflow.com/users/4871471/nickel94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1470, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1477701149, "creation_date": 1430929878, "last_edit_date": 1477701149, "question_id": 30082500, "link": "https://stackoverflow.com/questions/30082500/how-to-convert-array-to-qstring", "title": "How to convert array to QString?", "body": "<p>I use QString::number() to convert float[4] to QString, but I see an error:</p>\n\n<p><code>call of overloaded 'number(float [4])' is ambiguous</code></p>\n"}, {"tags": ["c++", "c", "arrays", "assembly"], "comments": [{"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "edited": false, "score": 1, "creation_date": 1430929956, "post_id": 30082446, "comment_id": 48278149, "body": "well, have you seen the syntax <code>A[0]</code>? If not, I would encourage you to read a tutorial on C/C++."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1430930155, "post_id": 30082446, "comment_id": 48278271, "body": "Are you <i>writing</i> the asm function? if so, writing a dummy C function taking an <code>unsigned int []</code> parameter and compiling with -S (generate assembly) would probably be pretty informative in seeing how the setup is done on the callee side. And know that the <i>calling convention</i> being used <i>will</i> play a role in this."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1430930986, "post_id": 30082446, "comment_id": 48278821, "body": "That depends on the ABI, that&#39;s actually used with your toolchain."}], "owner": {"reputation": 13, "user_id": 4871492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57f3fd7151c7e87d436649bb23319cb?s=128&d=identicon&r=PG&f=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/4871492/fran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430930030, "creation_date": 1430929720, "last_edit_date": 1430930030, "question_id": 30082446, "link": "https://stackoverflow.com/questions/30082446/how-to-use-an-array-pass-by-parameter-to-some-assembly-func-using-c", "title": "How to use an array pass by parameter to some assembly func using C++", "body": "<p>I have a problem trying to figure how access the values from an array. The important parts of the code look like this.</p>\n\n<pre><code>unsigned int A[]  = {1,1,1,3};\n\nextern \"C\" bool isItValid(unsigned int A[]);\n</code></pre>\n\n<p>My question is, how do I work with the values from the array? Also, the real values of the array are 6 hex numbers of 32 bits each.</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "hough-transform", "opencv-contour"], "comments": [{"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1430942775, "post_id": 30082431, "comment_id": 48286217, "body": "Showing an example input image would help"}, {"owner": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1430984364, "post_id": 30082431, "comment_id": 48301668, "body": "@Antonio: Images are added, thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431068550, "post_id": 30095760, "comment_id": 48345673, "body": "I have done similar thing as you suggested in the past. However I found that the contours of the rectangle could be broken into 2-3 halves in different lighting condition after binary thresholding. It looks to me Hough transform gave a better line. I understand we need to find the intersection points to get the rectangle. However, if there are more than one line for each edge with different orientation, do you know how can I combine the lines into one and find the intersection? For the contours approach, I think this will be more difficult to combine the contours than the Hough lines."}, {"owner": {"reputation": 1479, "user_id": 3343569, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CR12b.jpg?s=128&g=1", "display_name": "Aphire", "link": "https://stackoverflow.com/users/3343569/aphire"}, "reply_to_user": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431070731, "post_id": 30095760, "comment_id": 48346885, "body": "If you use an adaptive threshold (as seen in the link) you should find the object is not broken up, as the threshold is calculated in several local areas, instead of the entire image, this will ensure lighting conditions will have a far smaller effect on the binary you get at the end. If you find hough lines is giving you better results, maybe stick with that, its always easier I find, to adapt something you are comfortable with to suit your purpose. If you are able to get the XY or each end of the lines you might be able to choose the correct lines, based on those that surround it"}, {"owner": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431082917, "post_id": 30095760, "comment_id": 48353962, "body": "I remembered I have also tried adaptive threshold but it gave worse results. For the hough transform, is there a common practice to &quot;choose&quot; the correct line, or combine the lines into one for each edge?"}, {"owner": {"reputation": 1479, "user_id": 3343569, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CR12b.jpg?s=128&g=1", "display_name": "Aphire", "link": "https://stackoverflow.com/users/3343569/aphire"}, "reply_to_user": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431085010, "post_id": 30095760, "comment_id": 48355276, "body": "I would suggest you revisit theresholding and contours, I just had a try at it and it was quite successful, I used a global threshold to obtain a binary image, then detected contours, and drew a bounding box around the largest set of contours, I will edit my post with images for you"}, {"owner": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431100567, "post_id": 30095760, "comment_id": 48365827, "body": "Many thanks for your effort... but the main objective is to identify only rectangle (e.g. bicycle) and filter out all other rectangular-ish objects like character &#39;D&#39; and trapezoid. I am sorry if I did not make it clear in the question."}, {"owner": {"reputation": 1479, "user_id": 3343569, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CR12b.jpg?s=128&g=1", "display_name": "Aphire", "link": "https://stackoverflow.com/users/3343569/aphire"}, "reply_to_user": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431102478, "post_id": 30095760, "comment_id": 48367052, "body": "Ah right, sorry I think I misunderstood. In which case, I would still suggest using the binary threshold before you try your houghlines, as it makes a much cleaner image, hopefully this article might help you : <a href=\"http://opencv-code.com/tutorials/automatic-perspective-correction-for-quadrilateral-objects/\" rel=\"nofollow noreferrer\">opencv-code.com/tutorials/&hellip;</a>  Good luck!"}, {"owner": {"reputation": 1479, "user_id": 3343569, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CR12b.jpg?s=128&g=1", "display_name": "Aphire", "link": "https://stackoverflow.com/users/3343569/aphire"}, "reply_to_user": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431329444, "post_id": 30095760, "comment_id": 48430553, "body": "You might be able to use the above link to find an &quot;average corner&quot; by going through all your houghlines, running the example to find corner based on intersecting lines, and then find the areas where the most lines intersect, if you have too many houghlines, this might help pinpoint the right corners"}, {"owner": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431362270, "post_id": 30095760, "comment_id": 48452146, "body": "Interesting point! I did have a look on this post before but have no idea to combine the Hough lines. So are you suggesting not to merge the lines and then find the intersections but you would suggest the other way round. Is that correct? I am not familiar with Hough transform. Is &quot;find the areas where the most lines intersects&quot; a common practice to find the rectangle when there are many hough lines? Many thanks!"}, {"owner": {"reputation": 1479, "user_id": 3343569, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CR12b.jpg?s=128&g=1", "display_name": "Aphire", "link": "https://stackoverflow.com/users/3343569/aphire"}, "reply_to_user": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "edited": false, "score": 0, "creation_date": 1431415829, "post_id": 30095760, "comment_id": 48474294, "body": "I have to admit, I don&#39;t know if its common practise, but it&#39;s what I would do :P I think if you use the binary threshold and then canny the image, that should get rid of most of the noise, allowing for your houghlines to be more precise, if you are still getting lots of lines, then you could see how accurate the &quot;average corner&quot; thing works out :)"}], "tags": [], "owner": {"reputation": 1479, "user_id": 3343569, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CR12b.jpg?s=128&g=1", "display_name": "Aphire", "link": "https://stackoverflow.com/users/3343569/aphire"}, "is_accepted": false, "score": 1, "last_activity_date": 1431085563, "last_edit_date": 1431085563, "creation_date": 1430987461, "answer_id": 30095760, "question_id": 30082431, "link": "https://stackoverflow.com/questions/30082431/opencv-using-contours-and-hough-transform-on-rectangle-detection/30095760#30095760", "title": "opencv: Using contours and Hough transform on rectangle detection", "body": "<p>I would suggest that you try using a <a href=\"http://opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_imgproc/py_thresholding/py_thresholding.html#thresholding\" rel=\"nofollow noreferrer\">binary threshold</a> (adaptive or otherwise) on each image, this will give some clear lines for your contour detection. You can also <a href=\"http://opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html?highlight=erode\" rel=\"nofollow noreferrer\">erode/dilate</a> the images to remove noise (such as the thin lines in your second image)</p>\n\n<p>Then use contour detection, and count the contours, finding the largest object in the image with four sides (this will probably be your object).</p>\n\n<p>Make a copy of the image before you use the binary/erode, so that once you have the region of interest from contour detection, you can crop the copy image to that area.</p>\n\n<p>Apologies the example links are written in python, but i'm sure once you get the idea, porting it to C++ will be easy.</p>\n\n<p>Hope this helps.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Just tried the above method myself by thresholding each image, contour detection, and then drawing a bounding box around the largest set of contours.</p>\n\n<p>Below see results:</p>\n\n<p><img src=\"https://i.stack.imgur.com/9qTIF.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Bounding box around largest set of contours</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/9dE7u.png\" alt=\"enter image description here\"></p>\n\n<p><strong>The same, drawn over the original images</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/dMpWl.png\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 626, "user_id": 2910704, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/596b5b3ddc1bcb02797ce9191b62ae16?s=128&d=identicon&r=PG&f=1", "display_name": "chesschi", "link": "https://stackoverflow.com/users/2910704/chesschi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4617, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1431085563, "creation_date": 1430929691, "last_edit_date": 1495540427, "question_id": 30082431, "link": "https://stackoverflow.com/questions/30082431/opencv-using-contours-and-hough-transform-on-rectangle-detection", "title": "opencv: Using contours and Hough transform on rectangle detection", "body": "<p>I am trying to detect white rectangles in a grayscale image using different approaches: contour detection and Hough transform. Unfortunately there are some limitations of the image I am processing, i.e.</p>\n\n<ol>\n<li>There are many features in the image and rectangle is not the only features</li>\n<li>The rectangle could be merged to other features (e.g. one of the rectangle edges could be overlapped with a long straight line)</li>\n<li>The rectangle could contain some other features (e.g. letter, numbers or some logo inside the rectangle)</li>\n<li>There are some features look like rectangle (e.g. character 'D' looks like a rectangle with small arc on the top right and bottom right; another example is trapezoid instead of parallelogram)</li>\n<li>The rectangle could be rotated from 0 to 15 degrees both clockwise and anti-clockwise</li>\n<li>It is possible that the lines are broken into several lines in different lighting condition (e.g. 1 pixel gap) so the minimum line length to filter the lines has to be small (e.g. in Hough Transform)</li>\n<li>When the minimum line length is set to small value, it is more often to see duplicate lines for the same line in different orientations (i.e. need to combine several lines)</li>\n</ol>\n\n<p>For the contonours approach, the contours of some images are broken. In addition, the image could contain features like rectangle (e.g. character 'D'). I am not sure if this is a good approach.</p>\n\n<p>I have seen many articles/forum suggesting to use Hough transform to detect rectangle like the following post. Unfortunately I have to set the small value of minimum line length and have seen duplicate lines. I have no idea how to deal with the points mentioned above (e.g. combine all the duplicate lines and pick only one line for each edge, how to differentiate the features with most part are lines but with small arcs like 'D', and how to isolate the square with one edge merged with a long straight line, etc).</p>\n\n<p><a href=\"https://stackoverflow.com/questions/10260519/hough-transformation-vs-contour-detection-for-rectangle-recognition-with-perspec\">Hough transformation vs Contour detection for Rectangle recognition with perspective projection</a></p>\n\n<p>Any suggestions are welcomed!</p>\n\n<p><strong>EDIT: Add some pictures</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/unjHS.png\" alt=\"Character D\"></p>\n\n<p><strong>Character D</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/TSoCA.png\" alt=\"Rect edge merged with long straight line\"></p>\n\n<p><strong>Rectangle with logo and the edges are merged with long straight line</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/GQHSe.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Trapezoid (with shadow on the top forming trapezoid in the bottom)</strong></p>\n"}, {"tags": ["c++", "database", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 2839586, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/70824ec3c27b00f17976653db320760f?s=128&d=identicon&r=PG&f=1", "display_name": "seanr", "link": "https://stackoverflow.com/users/2839586/seanr"}, "edited": false, "score": 0, "creation_date": 1430930103, "post_id": 30082511, "comment_id": 48278229, "body": "Thank you very much. I can&#39;t believe I didn&#39;t find this myself. For some reason I kept running into sites that explain I need to install sqlite first before utilizing it. Thanks again."}], "tags": [], "owner": {"reputation": 9309, "user_id": 496405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d224ce8793eda60a36f5e0ed9f124c?s=128&d=identicon&r=PG", "display_name": "g19fanatic", "link": "https://stackoverflow.com/users/496405/g19fanatic"}, "is_accepted": false, "score": 2, "last_activity_date": 1430934028, "last_edit_date": 1430934028, "creation_date": 1430929900, "answer_id": 30082511, "question_id": 30082416, "link": "https://stackoverflow.com/questions/30082416/does-sqlite-have-to-be-installed-or-can-it-be-imported-in-code/30082511#30082511", "title": "Does sqlite have to be installed or can it be imported in code", "body": "<p>The sqlite library is available in many different forms. None of them require any sort of 'installation' to use.</p>\n\n<p><a href=\"https://www.sqlite.org/download.html\" rel=\"nofollow\">https://www.sqlite.org/download.html</a></p>\n"}], "owner": {"reputation": 195, "user_id": 2839586, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/70824ec3c27b00f17976653db320760f?s=128&d=identicon&r=PG&f=1", "display_name": "seanr", "link": "https://stackoverflow.com/users/2839586/seanr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430934028, "creation_date": 1430929646, "question_id": 30082416, "link": "https://stackoverflow.com/questions/30082416/does-sqlite-have-to-be-installed-or-can-it-be-imported-in-code", "title": "Does sqlite have to be installed or can it be imported in code", "body": "<p>I want to write a small program that stores simple data. However the computer that this program will operate on is very secure. Installing anything on this system is out of the question. I was wondering if sqlite can be added as a library to a C application or any language not necessarily C. I assumed C/C++ would be easiest being compiled. I know it might not make much since because how can I run my application on this system but not install sqlite but this is the restraints that I am in. Any advice or resources will be very greatful.</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430929518, "post_id": 30082303, "comment_id": 48277839, "body": "You are using <code>&lt;&lt; codons[i][2]</code>. That should be <code>&lt;&lt; codons[i][1]</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1430929537, "post_id": 30082303, "comment_id": 48277853, "body": "Voting to close. Problem caused by a typo."}, {"owner": {"reputation": 1004, "user_id": 2036673, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cfbc483da1e90fb9fb000ad59962b295?s=128&d=identicon&r=PG", "display_name": "Person93", "link": "https://stackoverflow.com/users/2036673/person93"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1430932118, "post_id": 30082303, "comment_id": 48279571, "body": "Yep. It was caused by a typo, but I don&#39;t have enough reputation to close the question."}], "answers": [{"tags": [], "owner": {"reputation": 4904, "user_id": 143504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34e7b6be5f0a1bbc846d14eca893bbd3?s=128&d=identicon&r=PG", "display_name": "Julien-L", "link": "https://stackoverflow.com/users/143504/julien-l"}, "is_accepted": true, "score": 3, "last_activity_date": 1430929563, "creation_date": 1430929563, "answer_id": 30082387, "question_id": 30082303, "link": "https://stackoverflow.com/questions/30082303/how-do-i-write-to-a-2d-array-in-c/30082387#30082387", "title": "How do I write to a 2D array in C++?", "body": "<p>There is a typo in your debug output, the subscript of the second string is <code>2</code> but it should be <code>1</code> (as indices start from <code>0</code>, the second object is indexed at <code>1</code>, like you did in the reading line).</p>\n\n<pre><code>for (int i=0; i &lt; CODONSLENGTH &amp;&amp; !infile.eof(); i++) {\n    cout &lt;&lt; \"DEGUG: start iteration \" &lt;&lt; i &lt;&lt; endl;\n    infile &gt;&gt; codons[i][0] &gt;&gt; codons[i][1];\n    cout &lt;&lt; \"DEBUG: \" &lt;&lt; codons[i][0] &lt;&lt; \" \" &lt;&lt; codons[i][1] &lt;&lt; endl; // &lt;-- HERE\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1999, "user_id": 2866898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c3f789c8dff46eed3cfa22ee7abc00?s=128&d=identicon&r=PG", "display_name": "Arkanosis", "link": "https://stackoverflow.com/users/2866898/arkanosis"}, "is_accepted": false, "score": 2, "last_activity_date": 1430929640, "creation_date": 1430929640, "answer_id": 30082415, "question_id": 30082303, "link": "https://stackoverflow.com/questions/30082303/how-do-i-write-to-a-2d-array-in-c/30082415#30082415", "title": "How do I write to a 2D array in C++?", "body": "<p>You're writing to <code>codons[i][1]</code> but reading from <code>codons[i][2]</code>.</p>\n"}], "owner": {"reputation": 1004, "user_id": 2036673, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cfbc483da1e90fb9fb000ad59962b295?s=128&d=identicon&r=PG", "display_name": "Person93", "link": "https://stackoverflow.com/users/2036673/person93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 30082387, "answer_count": 2, "score": 1, "last_activity_date": 1430929640, "creation_date": 1430929308, "question_id": 30082303, "link": "https://stackoverflow.com/questions/30082303/how-do-i-write-to-a-2d-array-in-c", "title": "How do I write to a 2D array in C++?", "body": "<p>I am having trouble using 2D arrays.</p>\n\n<p>I am using an array of arrays of strings.</p>\n\n<p>Each line of the input file contains two strings and each line needs to be one array.</p>\n\n<p>Below is my code and the text from codons.txt. My code has a few extra cout commands for debugging. When I run it, it does not display the second string.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cctype&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    const int CODONSLENGTH=64;\n    string codons[CODONSLENGTH][2];\n    ifstream infile;\n    //void readRNACodonTable(string [][2]);\n\n    //readRNACodonTable(codons);\n\n    infile.open(\"codons.txt\");\n    if (!infile.is_open()){\n        cout &lt;&lt; \"ERROR: Coudn't open input file.\";\n        exit(1);\n    }\n\n    for (int i=0; i &lt; CODONSLENGTH &amp;&amp; !infile.eof(); i++) {\n        cout &lt;&lt; \"DEGUG: start iteration \" &lt;&lt; i &lt;&lt; endl;\n        infile &gt;&gt; codons[i][0] &gt;&gt; codons[i][1];\n        cout &lt;&lt; \"DEBUG: \" &lt;&lt; codons[i][0] &lt;&lt; \" \" &lt;&lt; codons[i][2] &lt;&lt;\n        endl;\n    }\n    infile.close();\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>Here is codons.txt:</p>\n\n<pre>GCU A\nGCC A\nGCA A\nGCG A\nCGU R\nCGC R\nCGA R\nCGG R\nAGA R\nAGG R\nAAU N\nAAC N\nGAU D\nGAC D\nUGU C\nUGC C\nCAA Q\nCAG Q\nGAA E\nGAG E\nGGU G\nGGC G\nGGA G\nGGG G\nCAU H\nCAC H\nAUU I\nAUC I\nAUA I\nUUA L\nUUG L\nCUU L\nCUC L\nCUA L\nCUG L\nAAA K\nAAG K\nAUG M\nUUU F\nUUC F\nCCU P\nCCC P\nCCA P\nCCG P\nUCU S\nUCC S\nUCA S\nUCG S\nAGU S\nAGC S\nACU T\nACC T\nACA T\nACG T\nUGG W\nUAU Y\nUAC Y\nGUU V\nGUC V\nGUA V\nGUG V</pre>\n"}, {"tags": ["c++", "function", "memory"], "comments": [{"owner": {"reputation": 1541, "user_id": 3111536, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9555afb668ee02d47b4737a74e93d4fa?s=128&d=identicon&r=PG&f=1", "display_name": "rashmatash", "link": "https://stackoverflow.com/users/3111536/rashmatash"}, "edited": false, "score": 0, "creation_date": 1430929388, "post_id": 30082248, "comment_id": 48277755, "body": "Have you tried using <code>typedef void(function*)();</code> instead of <code>typedef void function(void)</code>?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 4, "creation_date": 1430929407, "post_id": 30082248, "comment_id": 48277768, "body": "How can you guarantee that your function actually starts at 0x402810? You cannot! The compiler can move your functions around as it likes."}, {"owner": {"reputation": 191, "user_id": 4814815, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/07eccc7ac57e8964f11d73097593c4bb?s=128&d=identicon&r=PG&f=1", "display_name": "Nullptr", "link": "https://stackoverflow.com/users/4814815/nullptr"}, "edited": false, "score": 0, "creation_date": 1430930123, "post_id": 30082248, "comment_id": 48278241, "body": "Yes it does, it works on the code below."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4857952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7d8432c3ff2b6c81de95f6423987b7?s=128&d=identicon&r=PG&f=1", "display_name": "Owbea", "link": "https://stackoverflow.com/users/4857952/owbea"}, "is_accepted": false, "score": 0, "last_activity_date": 1430940510, "creation_date": 1430940510, "answer_id": 30085854, "question_id": 30082248, "link": "https://stackoverflow.com/questions/30082248/c-program-crash-when-calling-function-from-address/30085854#30085854", "title": "C++ Program crash when calling function from address", "body": "<p>There is no guarantee that when you declare print() before main() it is actually compiled to a few addresses before main() (As one might expect). From here, since the main() function on your second example is not the same as the first one (larger), the address of the print() function might have changed between the two examples.</p>\n\n<p>If you really want to find out the address of your function i'd recommend using a debugger to find that out.</p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 191, "user_id": 4814815, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/07eccc7ac57e8964f11d73097593c4bb?s=128&d=identicon&r=PG&f=1", "display_name": "Nullptr", "link": "https://stackoverflow.com/users/4814815/nullptr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1430940510, "creation_date": 1430929142, "last_edit_date": 1430931344, "question_id": 30082248, "link": "https://stackoverflow.com/questions/30082248/c-program-crash-when-calling-function-from-address", "title": "C++ Program crash when calling function from address", "body": "<pre><code>void print()\n{\n  printf(\"Test\");\n}\n</code></pre>\n\n<p>This does not work</p>\n\n<blockquote>\n  <p>Unhandled exception at 0x00402826 in test.exe: 0xC0000005: Access\n  violation reading location 0x00000000.</p>\n</blockquote>\n\n<pre><code>int main()\n{\n  typedef void function(void);\n  function* Execute = (function*)0x00402810;\n  Execute();\n}\n</code></pre>\n\n<p>But this works?</p>\n\n<pre><code>int main()\n{\n  void(*func)();\n  func = &amp;print;\n  cout &lt;&lt; func;\n  getchar();\n\n  typedef void function(void);\n  function* Execute = (function*)0x00402810;\n  Execute();\n }\n</code></pre>\n\n<p>I am compiling with /Dynamicbase:NO</p>\n\n<p>so addresses are static on every run.</p>\n"}, {"tags": ["c++", "visual-studio-2012", "dll", "sdk", "vst"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 2566462, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b2a1bfd6ccd90f2a19fe9c3b993055b0?s=128&d=identicon&r=PG", "display_name": "Bob Saget", "link": "https://stackoverflow.com/users/2566462/bob-saget"}, "edited": false, "score": 0, "creation_date": 1431256331, "post_id": 30146745, "comment_id": 48408812, "body": "THAT WORKED! thank you so much! I would like to tip you how can I get in touch with you?"}, {"owner": {"reputation": 1832, "user_id": 3321579, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8507b1ffc84187a23597ae23ad773458?s=128&d=identicon&r=PG&f=1", "display_name": "Scorb", "link": "https://stackoverflow.com/users/3321579/scorb"}, "edited": false, "score": 0, "creation_date": 1447381807, "post_id": 30146745, "comment_id": 55142625, "body": "I am confused. I don&#39;t see a linker tab anywhere? I am building the same VST example, and I change target to dll, but it still builds a .lib"}], "tags": [], "owner": {"reputation": 21, "user_id": 4883349, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7a6a54e1d0859f9c3a816bc66acef1be?s=128&d=identicon&r=PG", "display_name": "qwertyuiop", "link": "https://stackoverflow.com/users/4883349/qwertyuiop"}, "is_accepted": false, "score": 2, "last_activity_date": 1431221166, "creation_date": 1431221166, "answer_id": 30146745, "question_id": 30082158, "link": "https://stackoverflow.com/questions/30082158/visual-studio-spitting-out-a-lib-instead-of-a-dll/30146745#30146745", "title": "Visual studio spitting out a .lib instead of a .dll", "body": "<p>Go to project properties(alt+enter) then under \"Configuration Properties\" find the \"General\" tab. Change \"Target Extension\" to \".dll\". Now, under the \"Linker\" tab, leave the \"Output File\" field blank.</p>\n"}], "owner": {"reputation": 67, "user_id": 2566462, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b2a1bfd6ccd90f2a19fe9c3b993055b0?s=128&d=identicon&r=PG", "display_name": "Bob Saget", "link": "https://stackoverflow.com/users/2566462/bob-saget"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1477, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431221166, "creation_date": 1430928833, "question_id": 30082158, "link": "https://stackoverflow.com/questions/30082158/visual-studio-spitting-out-a-lib-instead-of-a-dll", "title": "Visual studio spitting out a .lib instead of a .dll", "body": "<p>I tell visual studio to build a .dll but it only builds a .lib no matter what I do.\nI have the configuration type set to .dll, the extension is set to .dll, in the pre-processor directives I have \"_WINDLL\", and I set the output file to be like this \"$(CommonProgramW6432)\\VST3\\Steinberg\\$(ProjectName).dll\" . However, it still builds a static (.lib) every time and I don't know why. I'm trying to compile a sample program called \"AGain\" from an sdk called Vst3 which you can get here and try to compile it if you don't mind going through a brutal hellish nightmare just to help me. </p>\n\n<p>here is the warning it gives me after I build the .lib file</p>\n\n<pre><code>  Warning   1   warning MSB8012: \n  TargetPath(C:\\VST3 SDK\\public.sdk\\samples\\vst\\again\\win\\Win32\\Debug\\AGain.dll) \n  does not match the Linker's OutputFile property value \n  (C:\\Program Files (x86)\\Common Files\\VST3\\Steinberg\\AGain). \n  This may cause your project to build incorrectly. \n  To correct this,   \n  please make sure that $(OutDir),\n   $(TargetName) and $(TargetExt) \n  property values match the value specified in %(Link.OutputFile).  \n  C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V110\\Microsoft.CppBuild.targets 1137\n</code></pre>\n\n<p>This problem appears straight out of the box with no changes done to the source code or project at all. </p>\n"}, {"tags": ["c++", "textures", "sprite", "directx-9"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1430930278, "post_id": 30082100, "comment_id": 48278334, "body": "So, I am unclear what went wrong in your current attempt.  You say what you want, and dump some code.  What specifically is wrong in that code?  I mean, an actual line, and something that happens that you do not want to happen?  Plus your code that requires that code to be called (at least a sketch, but ideally a MCVE)."}, {"owner": {"reputation": 279, "user_id": 3863813, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e80397110a9646af0dec7113148afaf8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/3863813/jack"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1430931728, "post_id": 30082100, "comment_id": 48279296, "body": "Has been edited @Yakk"}, {"owner": {"reputation": 279, "user_id": 3863813, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e80397110a9646af0dec7113148afaf8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/3863813/jack"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1430933573, "post_id": 30082100, "comment_id": 48280504, "body": "All I want to do is draw multiple sprites with the same texture which then will not use more and more memory as it will be drawing the same rendered texture over and over @Yakk"}], "owner": {"reputation": 279, "user_id": 3863813, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e80397110a9646af0dec7113148afaf8?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/3863813/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1430931697, "creation_date": 1430928701, "last_edit_date": 1430931697, "question_id": 30082100, "link": "https://stackoverflow.com/questions/30082100/how-to-use-one-rendered-sprite-texture-over-and-over", "title": "How to use one rendered sprite texture over and over", "body": "<p>I'm creating a game which has sprites, at the start of the game before anything is shown all of the sprites which will be used will be loaded and a texture will be created for each of the sprites. My problem is that when I create an object I want to give it the same rendered texture as the texture it corresponds to. e.g. if the new object is a grass tile then give it the same texture as the already loaded grass tile texture. </p>\n\n<p>Nothing goes wrong as such because everything works as intended, the problem is that the game uses way too much memory (around the 150 MB mark) because of the Tile::Draw function, anywhere before the Tile::draw function is called the game only uses around 10 MB (which is just the images which are loaded at the start).  So my question is how do I reuse the same texture over and over without having to render it and still draw it to the window. I'll give some of my code for drawing.</p>\n\n<p>Function which draws the sprites.</p>\n\n<pre><code>void Tile::Draw(){ //here is where each sprite is drawn \n    sprite-&gt;Begin(D3DXSPRITE_ALPHABLEND); \n    sprite-&gt;Draw(tex, NULL, NULL, &amp;position, colour); //here is where more memory is used each time a sprite is drawn\n    sprite-&gt;End();\n}\n</code></pre>\n\n<p>Function which creates the sprite texture.</p>\n\n<pre><code>void Tile::CreateTexture(IDirect3DDevice9* device){\n    D3DXCreateTextureFromFileEx(device, filePath, getDimensions().width, getDimensions().height, 1, D3DPOOL_DEFAULT,\n    D3DFMT_UNKNOWN, D3DPOOL_MANAGED, D3DX_DEFAULT, D3DX_DEFAULT, 0, NULL, NULL, &amp;tex);\n\n    //Attempt to create the sprite\n    D3DXCreateSprite(device, &amp;sprite);\n}\n</code></pre>\n\n<p>This is the class for each tile object which holds the sprite, texture, and position variables.</p>\n\n<pre><code>class Tile{\npublic:\n    void setIndex(int x, int y) { position.x = x; position.y = y; position.z = 0; } //used for setting the position of the tile\n    void setColour(D3DCOLOR colour) { this-&gt;colour = colour; } //used for setting the colour value of the object \n    void setTexture(LPDIRECT3DTEXTURE9 *tex) { this-&gt;tex = *tex; } //used for setting the texture value of the object\n    void setSprite(LPD3DXSPRITE sprite) { this-&gt;sprite = sprite; } //used for setting the sprute value of the object\n    void CreateTexture(IDirect3DDevice9* device); //used for creating the texture for the object\n\n    LPDIRECT3DTEXTURE9 getTexture() { return tex; } //used for returning the texture of the object\n    LPD3DXSPRITE getSprite() { return sprite; } //used for returning the sprite of the object\n\n    void Draw(); //used for drawing the object\n\nprotected:\n    D3DXVECTOR3 position; //used for storing the position of the object\n    LPDIRECT3DTEXTURE9 tex; //used for storing the texture of the object\n    LPD3DXSPRITE sprite; //used for storing the sprute value of the object\n    D3DCOLOR colour; //used for storing the colour value of the object\n};\n</code></pre>\n\n<p>When the tiles are first created at the start of the game they are stored in a vector array so they can be accessed later </p>\n\n<pre><code>    std::vector&lt;Tile&gt; tileList;\n</code></pre>\n\n<p>Here is what I would do when I want to create a new Tile object which will be drawn:</p>\n\n<pre><code>Tile tile; //create a new tile object\ntile = tileList[0] //give the new object the exact same values of the already created tile which includes, sprite, texture, etc\n</code></pre>\n\n<p>I would then later call a draw function to draw all of the tiles to the window</p>\n\n<pre><code>void Map::draw(){\n    tile.draw(); //call the tiles own draw function so it can be drawn\n}\n</code></pre>\n\n<p>Any help would be greatly appreciated and the actual code even more so.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "arrays", "dynamic", "struct", "arduino"], "comments": [{"owner": {"reputation": 370, "user_id": 4842378, "user_type": "registered", "profile_image": "https://graph.facebook.com/956662497699762/picture?type=large", "display_name": "Scott", "link": "https://stackoverflow.com/users/4842378/scott"}, "edited": false, "score": 0, "creation_date": 1430929138, "post_id": 30082094, "comment_id": 48277589, "body": "You will likely want to do some more research on memory management and the use of the new and delete keywords.  In a very simplistic explanation, everything that is allocated using new needs to be deallocated using delete.  This can be challenging, especially with complex data structures.  This is why people use RAII (Resource Acquisition is Initialization) to manage resources for them.  In your case, you should think about using std::string for names and std::vector for your pets array.  This will practically eliminate manual memory management needed by you."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1430930512, "post_id": 30082094, "comment_id": 48278491, "body": "<code>operator new</code> at your stage is like wanting to drive a race car on your driver&#39;s test after skipping driver&#39;s ed classes.  Raw <code>new</code> is better, and <code>unique_ptr&lt;Pet[]&gt;</code> even better."}, {"owner": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1430932565, "post_id": 30082094, "comment_id": 48279862, "body": "@Yakk - Thanks for the heads-up. &#39;operator new&#39; provided the only method for dynamically creating structs that contain dynamically created structs that I could get to work correctly and repeatedly. I tried &#39;new&#39; by itself with no luck - I&#39;m sure it was due to my ignorance. However, I am certainly a fan of powering through a problem and having a chunky -  yet workable solution before honing in on the most efficient method. I&#39;ll look in to &#39;unique_ptr&lt;Pet[]&gt;&#39;. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "edited": false, "score": 0, "creation_date": 1430930494, "post_id": 30082289, "comment_id": 48278475, "body": "Your first example explains a very workable solution for me that I can use immediately. I will begin studying RAII, but initially it&#39;s greatly complicating my ability to understand what&#39;s actually happening - even the syntax is confusing. Either way, I&#39;m on it. Thank you very much for the help."}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "reply_to_user": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "edited": false, "score": 0, "creation_date": 1430930887, "post_id": 30082289, "comment_id": 48278751, "body": "@ryanlindsey Don&#39;t just do what I told you, please! This is very bad coding style. That way, you will inexorably lose memory at some point!"}, {"owner": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "edited": false, "score": 0, "creation_date": 1430932013, "post_id": 30082289, "comment_id": 48279496, "body": "If I follow your first method, how will I have memory issues? Is the idea that I will eventually have difficulty tracking my own arrays and forget to delete some? Or, is there a fundamental issue with this method that it cannot be done correctly?"}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "reply_to_user": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "edited": false, "score": 0, "creation_date": 1430932144, "post_id": 30082289, "comment_id": 48279587, "body": "@ryanlindsey <i>Is the idea that I will eventually have difficulty tracking my own arrays and forget to delete some?</i> YES"}, {"owner": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "edited": false, "score": 0, "creation_date": 1430934118, "post_id": 30082289, "comment_id": 48280834, "body": "Do I also need to delete the char arrays for the name of each pet?"}, {"owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "reply_to_user": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "edited": false, "score": 0, "creation_date": 1430934355, "post_id": 30082289, "comment_id": 48281003, "body": "if it is an <i>array</i> no. If it is a pointer to an allocated string, yes."}], "tags": [], "owner": {"reputation": 3099, "user_id": 1978011, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ca7712f5e45279a01ee1b7f273248e15?s=128&d=identicon&r=PG", "display_name": "user1978011", "link": "https://stackoverflow.com/users/1978011/user1978011"}, "is_accepted": true, "score": 1, "last_activity_date": 1430929661, "last_edit_date": 1495541657, "creation_date": 1430929277, "answer_id": 30082289, "question_id": 30082094, "link": "https://stackoverflow.com/questions/30082094/memory-management-when-dynamically-creating-an-array-of-structs-that-contain-ano/30082289#30082289", "title": "Memory management when dynamically creating an array of structs that contain another dynamically created array of structs", "body": "<p><strong>NO</strong> the previously allocated memory will not be freed. You will lose all allocated memory.</p>\n\n<p>By overwriting your <code>persons</code> pointer, you lose your handle on the allocated storage. So before you do this, you have to call</p>\n\n<pre><code>::operator delete(persons[0].pets);\n::operator delete(persons[1].pets);\n::operator delete(persons);\n</code></pre>\n\n<p>This is pretty ugly, isn't it? For that reason exists the <code>std::vector</code> container.</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct Person {\n  std::vector&lt; Pet &gt; pets;\n};\n\nstd::vector&lt; Person &gt; persons(2);\npersons[0].pets = std::vector&lt; Pet &gt;(2);\npersons[1].pets = std::vector&lt; Pet &gt;(3);\n\npersons = std::vector&lt; Person &gt;(3); // won't lose memory\n</code></pre>\n\n<p>Since you have probably not heard of it, I would recommend to read up on <a href=\"http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow noreferrer\">RAII</a> or <a href=\"https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "edited": false, "score": 0, "creation_date": 1430930656, "post_id": 30082394, "comment_id": 48278592, "body": "Thanks for the clarification! That explains what&#39;s happening very well. Thanks!"}], "tags": [], "owner": {"reputation": 400, "user_id": 1814543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xLwWr.gif?s=128&g=1", "display_name": "emjay", "link": "https://stackoverflow.com/users/1814543/emjay"}, "is_accepted": false, "score": 0, "last_activity_date": 1430929592, "creation_date": 1430929592, "answer_id": 30082394, "question_id": 30082094, "link": "https://stackoverflow.com/questions/30082094/memory-management-when-dynamically-creating-an-array-of-structs-that-contain-ano/30082394#30082394", "title": "Memory management when dynamically creating an array of structs that contain another dynamically created array of structs", "body": "<p>In short, no, you need to delete them.</p>\n\n<p>The first Person array that you created will become a garbage, and so you should delete (free) it before you assign another array to the pointer. (Think of the \"new\" operator as requesting permission (key) for accessing a memory location, and so if you lose the address of that location, you can't use it any more, and nobody else can either (because you have the key!) and so it becomes garbage.)</p>\n\n<p>Now, if you delete the Person array, you will still have the Pet arrays as garbage, so you should delete them first (otherwise you don't have their address, and, again, garbage!), and then delete the Person array.</p>\n\n<p>A better (and the standard) way is to write a destructor method for Person and delete the Pet array inside it. The destructor will be automatically called when a Person object gets deleted.</p>\n"}], "owner": {"reputation": 105, "user_id": 1404908, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ffe5aaad04f0206530e2c11439a24f5?s=128&d=identicon&r=PG", "display_name": "ryan lindsey", "link": "https://stackoverflow.com/users/1404908/ryan-lindsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 30082289, "answer_count": 2, "score": 1, "last_activity_date": 1430929661, "creation_date": 1430928689, "question_id": 30082094, "link": "https://stackoverflow.com/questions/30082094/memory-management-when-dynamically-creating-an-array-of-structs-that-contain-ano", "title": "Memory management when dynamically creating an array of structs that contain another dynamically created array of structs", "body": "<p>I'm trying to understand the memory issues associated with dynamic struct arrays inside of dynamic struct arrays. I am dynamically creating an array of structs and attaching it to the variable 'persons' and then dynamically creating an array of structs and attaching it to the variable 'pets' inside of each 'persons' object. A simple example is this:</p>\n\n<pre><code>typedef struct {\n  int age;\n} Pet;\n\ntypedef struct {\n  Pet *pets;\n} Person\n</code></pre>\n\n<p>Create 2 Object Person array and attach it to variable 'persons'</p>\n\n<pre><code>persons = (Person*) ::operator new(sizeof(Person) * 2);\npersons[0]\npersons[1]\n</code></pre>\n\n<p>Create 3 Object Pet array and attach it to the variable 'pets' inside of object #1 of 'persons'</p>\n\n<pre><code>persons[0].pets = (Pet*) ::operator new(sizeof(Pet) * 3);\npersons[0].pets[0].age\npersons[0].pets[1].age\npersons[0].pets[2].age\n</code></pre>\n\n<p>Create 2 Object Pet array and attach it to the variable 'pets' inside of object #2 of 'persons'</p>\n\n<pre><code>persons[1].pets = (Pet*) ::operator new(sizeof(Pet) * 2);\npersons[1].pets[0].age\npersons[1].pets[1].age\n</code></pre>\n\n<p>If I dynamically create another array of structs and attach it to the 'persons' array will the array previously attached to the variable 'persons' be free?</p>\n\n<p>Create 4 Object Person array and attach it to variable 'persons' replacing the previous 2 Object array.</p>\n\n<pre><code>persons = (Person*) ::operator new(sizeof(Person) * 4);\npersons[0]\npersons[1]\npersons[2]\npersons[3]\n</code></pre>\n\n<p>If not, do I need to free each of the 'pets' arrays inside of each object of the 'persons' array?</p>\n\n<p>Here it is in code running on an Arduino. The code works fine and seems to repeat indefinitely without any hiccups, but that doesn't mean it's legit.</p>\n\n<pre><code>// DYNAMIC MEMORY\n\n// OBJECTS\n// Pet object\ntypedef struct {\n  char *name;\n  int age;\n} Pet;\n// Person object\ntypedef struct {\n  char *name;\n  int age;\n  int numberOfPets;\n  Pet *pets;          // OBJECT 'Pet' is part of OBJECT 'Person'\n} Person;\n\n#define OBJECT_PET    0\n#define OBJECT_PERSON 1\n\n\n// DYNAMIC MEMORY HANDLING\n// ARRAY Creation\nvoid* createArray(int numberOfObjects, int typeOfObject) {\n  numberOfObjects;\n  int memorySize;\n  switch (typeOfObject) {\n    case OBJECT_PET:\n      Serial.print(\"Creating Pet array of \");\n      memorySize = sizeof(Pet) * numberOfObjects;\n      break;\n    case OBJECT_PERSON:\n      Serial.print(\"Creating Person array of \");\n      memorySize = sizeof(Person) * numberOfObjects;\n      break;\n  }\n  Serial.print(numberOfObjects);\n  Serial.println(\" objects\");\n\n  return ::operator new(memorySize);\n}\n\n// GLOBAL VARIABLES\nPerson *persons;\nint numberOfPersons;\n\nvoid createPersonsAndPetsFirst() {\n  numberOfPersons = 3;\n\n  // CREATE 3 empty Person objects [0, 1, 2]\n  persons = (Person*) createArray(numberOfPersons, OBJECT_PERSON);\n\n  // ENTER Specific Person information for Person #1\n  // Person #1 [0]\n  persons[0].name = \"Larry\";\n  persons[0].age = 19;\n  persons[0].numberOfPets = 2;\n  // CREATE 2 empty Pet objects for Person #1\n  persons[0].pets = (Pet*) createArray(persons[0].numberOfPets, OBJECT_PET);\n  // ENTER Specific Pet information for Pet #1\n  // Pet #1\n  persons[0].pets[0].name = \"Xander\";\n  persons[0].pets[0].age = 3;\n  // ENTER Specific Pet information for Pet #2\n  // Pet #2\n  persons[0].pets[1].name = \"Shorty\";\n  persons[0].pets[1].age = 6;\n\n  // ENTER Specific Person information for Person #2\n  // Persons #2 [1]\n  persons[1].name = \"Mark\";\n  persons[1].age = 29;\n  persons[1].numberOfPets = 1;\n  // CREATE 1 empty Pet object for Person #2\n  persons[1].pets = (Pet*) createArray(persons[1].numberOfPets, OBJECT_PET);\n  // ENTER Specific Pet information for Pet #1\n  // Pet #1 [0]\n  persons[1].pets[0].name = \"Fido\";\n  persons[1].pets[0].age = 5;\n\n  // ENTER Specific Person information for Person #3\n  // Person #3 [2]\n  persons[2].name = \"Larry\";\n  persons[2].age = 19;\n  persons[2].numberOfPets = 2;\n  // CREATE 2 empty Pet objects for Person #1\n  persons[2].pets = (Pet*) createArray(persons[0].numberOfPets, OBJECT_PET);\n  // ENTER Specific Pet information for Pet #1\n  // Pet #1\n  persons[2].pets[0].name = \"Nado\";\n  persons[2].pets[0].age = 12;\n  // ENTER Specific Pet information for Pet #2\n  // Pet #2\n  persons[2].pets[1].name = \"Buster\";\n  persons[2].pets[1].age = 4;\n\n  Serial.println();\n}\n\nvoid createPersonsAndPetsSecond() {\n  numberOfPersons = 2;\n\n  // CREATE 2 empty Person objects [0, 1]\n  persons = (Person*) createArray(numberOfPersons, OBJECT_PERSON);\n\n  // ENTER Specific Person information for Person #1\n  // Person #1 [0]\n  persons[0].name = \"Chad\";\n  persons[0].age = 22;\n  persons[0].numberOfPets = 1;\n  // CREATE 1 empty Pet object for Person #1\n  persons[0].pets = (Pet*) createArray(persons[0].numberOfPets, OBJECT_PET);\n  // ENTER Specific Pet information for Pet #1\n  // Pet #1\n  persons[0].pets[0].name = \"Lucky\";\n  persons[0].pets[0].age = 5;\n\n  // ENTER Specific Person information for Person #2\n  // Persons #2 [1]\n  persons[1].name = \"Lisa\";\n  persons[1].age = 36;\n  persons[1].numberOfPets = 2;\n  // CREATE 2 empty Pet objects for Person #2\n  persons[1].pets = (Pet*) createArray(persons[1].numberOfPets, OBJECT_PET);\n  // ENTER Specific Pet information for Pet #1\n  // Pet #1 [0]\n  persons[1].pets[0].name = \"Chester\";\n  persons[1].pets[0].age = 7;\n  // ENTER Specific Pet information for Pet #2\n  // Pet #2 [1]\n  persons[1].pets[1].name = \"Marlo\";\n  persons[1].pets[1].age = 12;\n\n  Serial.println();\n}\n\nvoid sendPersonsAndPetsInformationToHost() {\n  Serial.print(\"Number of Persons = \");\n  Serial.println(numberOfPersons);\n\n  for (int personsIndex = 0; personsIndex &lt; numberOfPersons; personsIndex++) {\n    // SHOW Person\n    Serial.print(\"Person #\");\n    Serial.print(personsIndex + 1);\n    Serial.println(\" Information\");\n\n    // SHOW Person Information\n    Serial.print(\"Name = \");\n    Serial.println(persons[personsIndex].name);\n    Serial.print(\"Age  = \");\n    Serial.println(persons[personsIndex].age);\n\n    // SHOW Person number of Pets Information\n    Serial.print(\"Number of Pets = \");\n    Serial.println(persons[personsIndex].numberOfPets);\n\n    for (int petsIndex = 0; petsIndex &lt; persons[personsIndex].numberOfPets; petsIndex++) {\n      // SHOW Pet\n      Serial.print(\"Pet #\");\n      Serial.print(petsIndex + 1);\n      Serial.println(\" Information\");\n\n      Serial.print(\"Name = \");\n      Serial.println(persons[personsIndex].pets[petsIndex].name);\n      Serial.print(\"Age  = \");\n      Serial.println(persons[personsIndex].pets[petsIndex].age);\n    }\n    Serial.println();\n  }\n}\n\n\nvoid setup() {\n  // OPEN Serial communication\n  Serial.begin(115200);\n\n}\n\nvoid loop() {\n  // CREATE First Persons and Pets Arrays\n  createPersonsAndPetsFirst();\n\n  // SEND Persons and Pets array information to Host\n  sendPersonsAndPetsInformationToHost();\n\n  delay(2000);\n\n  // CREATE Second Persons and Pets Arrays\n  createPersonsAndPetsSecond();\n\n  // SEND Persons and Pets array information to Host\n  sendPersonsAndPetsInformationToHost();\n\n  delay(2000); \n\n}\n</code></pre>\n"}, {"tags": ["c++", "statistics", "armadillo"], "comments": [{"owner": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "edited": false, "score": 1, "creation_date": 1430931193, "post_id": 30082085, "comment_id": 48278940, "body": "Where the Armadillo documentation mentions cor(X) is the autocorrelation, they presumably mean the zero-lag autocorrelation only (not all lags). (The documentation doesn&#39;t mention the return type of the various functions; that seems unusual for programming documentation, but oh well.) I don&#39;t see an all-lags autocorrelation function listed. Do you have to use Armadillo? Probably you could find another library, or write it yourself -- the autocorrelation function is easily expressed in terms of the discrete Fourier transform."}], "answers": [{"tags": [], "owner": {"reputation": 3366, "user_id": 1080929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ecd4627fdf46fc3b3a217eeb0e5104?s=128&d=identicon&r=PG", "display_name": "mtall", "link": "https://stackoverflow.com/users/1080929/mtall"}, "is_accepted": false, "score": 1, "last_activity_date": 1440565593, "creation_date": 1440565593, "answer_id": 32218373, "question_id": 30082085, "link": "https://stackoverflow.com/questions/30082085/armadillo-cor-function-returning-scalar/32218373#32218373", "title": "Armadillo &#39;cor&#39; function returning scalar", "body": "<p>To convert a 1x1 matrix to a pure scalar in Armadillo, use the <a href=\"http://arma.sourceforge.net/docs.html#as_scalar\" rel=\"nofollow\">as_scalar()</a> function. For example:</p>\n\n<pre><code>mat X(1,1, fill::ones);\n\ndouble val = as_scalar(X);\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4455880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588398c7310c9baebea5b1617c666f3c?s=128&d=identicon&r=PG&f=1", "display_name": "Deleted", "link": "https://stackoverflow.com/users/4455880/deleted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440565593, "creation_date": 1430928652, "question_id": 30082085, "link": "https://stackoverflow.com/questions/30082085/armadillo-cor-function-returning-scalar", "title": "Armadillo &#39;cor&#39; function returning scalar", "body": "<p>I'm trying to calculate the autocorrelation of a vector of doubles using Armadillo, as following: </p>\n\n<pre><code>QVector&lt;double&gt; calculateAutocorrelation(QVector&lt;double&gt; samples){\n  arma::Row&lt;double&gt; armadillo_samples(samples.toStdVector());//Convert samples to armadillo vector\n  arma::Row&lt;double&gt; armadillo_autocorrelation = cor(armadillo_samples); //compute the autocorrelation, returns a 1x1 matrix!\n  QVector&lt;double&gt; ret(samples.size());\n  for(int i = 0; i &lt;samples.size();i++)\n      ret[i] = armadillo_autocorrelation(i);//copy back into a QVector\n  return ret;\n}\n</code></pre>\n\n<p>However, as commented on the 2nd line, cor(armadillo_samples) returns a 1x1 matrix instead of another vector, as I would expect.\n I have downloaded the latests stable release of Armadillo from their website (5.100.1) and tried this code on Linux with MKL enabled and on Windows with the precompiled BLAS/LAPACK libraries enabled.<br>\nAm I misunderstanding how this function works/using it wrong?</p>\n\n<p>Relevant Links:<br>\n-<a href=\"http://arma.sourceforge.net/docs.html#cor\" rel=\"nofollow\">Armadillo documentation of cor</a><br>\n-Autocorrelation on <a href=\"http://en.wikipedia.org/wiki/Autocorrelation#Estimation\" rel=\"nofollow\">Wikipedia</a> (there's a link to Mathworld in the Armadillo documation which is usefull too, but I can't link to it)</p>\n"}, {"tags": ["c++", "optimization", "standards", "document", "rvo"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1430928410, "post_id": 30081953, "comment_id": 48277143, "body": "It can&#39;t be guaranteed."}, {"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 0, "creation_date": 1430928459, "post_id": 30081953, "comment_id": 48277171, "body": "I think you can never be sure when optimizations are done because this is a very compiler specific.issue."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1430928541, "post_id": 30081953, "comment_id": 48277229, "body": "I will say any decent compiler should use RVO and if it doesn&#39;t then you shouldn&#39;t use it."}, {"owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "edited": false, "score": 0, "creation_date": 1430928754, "post_id": 30081953, "comment_id": 48277355, "body": "you can always wrap the return value in a unique_ptr and move it. This way you&#39;ll be guaranteed to achieve what you&#39;re looking for. If you have to support some old compilers and you&#39;re in C++03, auto_ptr will be helpful, although it&#39;s deprecated nowadays."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1430928765, "post_id": 30081953, "comment_id": 48277364, "body": "I thought that with modern C++ (you don&#39;t give a particular standard) one could define proper move operations for the type which is returned and have a guarantee. Is that so? (Stroustrup gives an example for matrix operations in the latest TCPPPL.)"}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1430928906, "post_id": 30081953, "comment_id": 48277444, "body": "What data members do these objects consist of?"}, {"owner": {"reputation": 9851, "user_id": 1356110, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/har6o.jpg?s=128&g=1", "display_name": "Ashot", "link": "https://stackoverflow.com/users/1356110/ashot"}, "edited": false, "score": 0, "creation_date": 1430929310, "post_id": 30081953, "comment_id": 48277695, "body": "There are different cases: sometimes function just returns std::list&lt;std::string&gt; and we need to be sure that it will not be copied."}], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 2, "last_activity_date": 1430930385, "last_edit_date": 1430930385, "creation_date": 1430928485, "answer_id": 30082031, "question_id": 30081953, "link": "https://stackoverflow.com/questions/30081953/how-can-i-be-sure-that-return-value-optimization-will-be-done/30082031#30082031", "title": "How can I be sure that Return value optimization will be done", "body": "<p>The standard does never guarantee RVO to happen, it just allows it.</p>\n\n<p>You can check the actual code produced to find out if it happened, but this still is no guarantee that it will still happen in the future.</p>\n\n<p>But at the end, every decent compiler can perform RVO in many cases, and even if no RVO happens, C++11 (and later) move construction can make returning relatively cheap.</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 1552766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050525b6d5df7ac28609fd791d1e384d?s=128&d=identicon&r=PG", "display_name": "timato", "link": "https://stackoverflow.com/users/1552766/timato"}, "is_accepted": false, "score": 2, "last_activity_date": 1430932694, "creation_date": 1430932694, "answer_id": 30083471, "question_id": 30081953, "link": "https://stackoverflow.com/questions/30081953/how-can-i-be-sure-that-return-value-optimization-will-be-done/30083471#30083471", "title": "How can I be sure that Return value optimization will be done", "body": "<p>One method you could use to prove to your coworkers that RVO is being done is to put printfs or other similar statements in the code.</p>\n\n<pre><code>HugeObject&amp; HugeObject::operator=(const HugeObject&amp; rhs)\n{\n  printf(\"HugeObject::operator= called\\n\");\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>HugeObject::HugeObject(const HugeObject&amp; rhs)\n{\n  printf(\"HugeObject::copy constructor called\\n\");\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>HugeObject SomeFunctionThatCreatesHugeObject()\n{\n  ...\n  printf(\"SomeFunction returning HugeObject\\n\"\n}\n</code></pre>\n\n<p>Then run the code in question, and verify that the expected number of objects have been constructed/copied.</p>\n"}], "owner": {"reputation": 9851, "user_id": 1356110, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/har6o.jpg?s=128&g=1", "display_name": "Ashot", "link": "https://stackoverflow.com/users/1356110/ashot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1430932694, "creation_date": 1430928259, "question_id": 30081953, "link": "https://stackoverflow.com/questions/30081953/how-can-i-be-sure-that-return-value-optimization-will-be-done", "title": "How can I be sure that Return value optimization will be done", "body": "<p>I have written functions that are returning huge objects by value. My coworkers complain that it will do redundant copy and suggest to return objects by reference as a function argument. I know that Return Value optimization will be done and copies will be eliminated but the code will be used in a library that can be compiled by different compilers and I can't test on all of them. In order to convince my coworker that it is save to return objects by value I need some document where it is stated.</p>\n\n<p>I have looked at c++03 standard but can't find anything about Return Value Optimization. Can you please give link to a document (standard) where is defined that RVO will be done. Or if it doesn't exist where I can find list of compilers that support RVO?</p>\n"}, {"tags": ["c++", "multithreading", "winsock2"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1430928275, "post_id": 30081889, "comment_id": 48277057, "body": "Probably you don&#39;t want to have a blocking <code>recv()</code> call, but a <code>poll()</code> or <code>select()</code> loop that check for changes on the corresponding file descriptor/handle."}, {"owner": {"reputation": 43, "user_id": 4871366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2dbe301e58cce0267a00a1af3cac1e?s=128&d=identicon&r=PG&f=1", "display_name": "John Wood", "link": "https://stackoverflow.com/users/4871366/john-wood"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430928587, "post_id": 30081889, "comment_id": 48277258, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I shall look into it, thank you."}, {"owner": {"reputation": 43, "user_id": 4871366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2dbe301e58cce0267a00a1af3cac1e?s=128&d=identicon&r=PG&f=1", "display_name": "John Wood", "link": "https://stackoverflow.com/users/4871366/john-wood"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430929836, "post_id": 30081889, "comment_id": 48278067, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I have one more question (although a simple one that doesn&#39;t need a new question opened) - how do I use select() on windows? Do you have any guide or anything? I just don&#39;t understand Beej&#39;s guide in this subject - if I have select() with the reading parameters set to a structure with one socket, and it is confirmed to still contain it (using FD_ISSET()), is it only then the time to receive? Or select() works in another way?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430930354, "post_id": 30081889, "comment_id": 48278378, "body": "Yes, it work&#39;s this way. Basically you specify a timeout (or immediate return), check the return value, and use <code>FD_ISSET()</code> to determine, which socket fd&#39;s are ready for reading or writing."}, {"owner": {"reputation": 43, "user_id": 4871366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2dbe301e58cce0267a00a1af3cac1e?s=128&d=identicon&r=PG&f=1", "display_name": "John Wood", "link": "https://stackoverflow.com/users/4871366/john-wood"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1430930823, "post_id": 30081889, "comment_id": 48278695, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4871366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2dbe301e58cce0267a00a1af3cac1e?s=128&d=identicon&r=PG&f=1", "display_name": "John Wood", "link": "https://stackoverflow.com/users/4871366/john-wood"}, "edited": false, "score": 0, "creation_date": 1430929664, "post_id": 30082361, "comment_id": 48277951, "body": "I did think of this option. Although I didn&#39;t like it too much. Thanks a lot either way."}], "tags": [], "owner": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "is_accepted": false, "score": 0, "last_activity_date": 1430932648, "last_edit_date": 1430932648, "creation_date": 1430929484, "answer_id": 30082361, "question_id": 30081889, "link": "https://stackoverflow.com/questions/30081889/how-to-interrupt-other-stdthreads-c/30082361#30082361", "title": "How to interrupt other std::threads c++", "body": "<p>Besides \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6's comment, you could try to implement a <a href=\"http://www.mario-konrad.ch/wiki/doku.php?id=programming:multithreading:tutorial-06\" rel=\"nofollow\">Provider-Consumer pattern</a>.</p>\n\n<p>Use a queue for store clients messages and read from it using that loop, if no messages to read just continue. This way the loop don't waits for the message arrives, that is the \"Provider's\" Job (the loop is the consumer since is consuming messages from the queue).</p>\n\n<p>So, move the code calling <code>recv</code> out of the loop and use it for feed the queue.</p>\n\n<h2>Pseudocode:</h2>\n\n<pre><code>Queue queue; // This has to be thread save.\n\nclass Provider: Thread\n{\n    void run(queue)\n    {\n      while(1)\n      {\n          message = recv();       // This is where waiting occurs.\n          queue.push(message);\n      }\n    }   \n}\n\n\n// This looks like it fits inside another thread. ;)\nwhile (some_condition)\n{\n    message = queue.pop(); // This returns immediately.\n    if (message)\n    {\n      //... so some things.  \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 4871366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2dbe301e58cce0267a00a1af3cac1e?s=128&d=identicon&r=PG&f=1", "display_name": "John Wood", "link": "https://stackoverflow.com/users/4871366/john-wood"}, "edited": false, "score": 0, "creation_date": 1430932825, "post_id": 30083441, "comment_id": 48280006, "body": "Indeed. Thank you, I did solve the problem and the server is working perfectly fine now."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 1, "last_activity_date": 1430932868, "last_edit_date": 1430932868, "creation_date": 1430932623, "answer_id": 30083441, "question_id": 30081889, "link": "https://stackoverflow.com/questions/30081889/how-to-interrupt-other-stdthreads-c/30083441#30083441", "title": "How to interrupt other std::threads c++", "body": "<blockquote>\n  <p><em>\"Because in the beginning of the iteration there's a recv() call, which awaits the client's messages.\"</em></p>\n</blockquote>\n\n<p>Probably you don't want to have a blocking <code>recv()</code> call at this point in 1st place.<br>\nThere's the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740141(v=vs.85).aspx\" rel=\"nofollow\"><code>select()</code></a> function from the Windows Socket API, you can use to observe the state changes for a number of socket file descriptors.</p>\n\n<p>Basically you will have a thread running a loop, and poll the return value of a <code>select()</code> call. Not to hog the CPU with a tight loop, a reasonable timeout value should be specified, but it's possible with a zero timeout, and just poll the available states as well.</p>\n\n<p>If the return value signals that there's some action available for one of the observed sockets (<code>select() &gt; 0</code>), you can inspect the observed socket file descriptors if they were triggered using the </p>\n\n<pre><code>FD_ISSET(s, *set)\n</code></pre>\n\n<p>macro.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 1, "last_activity_date": 1430933435, "creation_date": 1430933435, "answer_id": 30083711, "question_id": 30081889, "link": "https://stackoverflow.com/questions/30081889/how-to-interrupt-other-stdthreads-c/30083711#30083711", "title": "How to interrupt other std::threads c++", "body": "<blockquote>\n  <p>Because in the beginning of the iteration there's a recv() call, which awaits the client's messages.</p>\n</blockquote>\n\n<p>I'm not familiar with the particulars if what you're using, but two tricks that can be used in similar circumstances are:</p>\n\n<ul>\n<li>Have your server put bytes into the stream that <code>recv()</code> reads from.</li>\n<li>Close the stream.</li>\n</ul>\n\n<p>With the intent that either of these will force <code>recv()</code> to return.</p>\n\n<p>If you can't do this with winsock, then another solution is to add another layer. You write a wrapper class that manages the complexities of how to read from a socket while still being able to receive notifications from other sources. Then your clients only use the wrapper class for receiving communications.</p>\n\n<p>In the long term, this solution is probably better than using <code>recv()</code> directly anyways, since it separates concerns; client code is only worried about how to deal with the client and not the details of how to do robust communications, and the communications code only has to deal with how to receive and relay communications.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1430933717, "creation_date": 1430933717, "answer_id": 30083795, "question_id": 30081889, "link": "https://stackoverflow.com/questions/30081889/how-to-interrupt-other-stdthreads-c/30083795#30083795", "title": "How to interrupt other std::threads c++", "body": "<p>Refactor your code so that there's one and only one place where you block on <code>recv</code>. Then you can move the client around all you want without having to disrupt the thread blocked in <code>recv</code>. You still want to receive a message if the client sends one, right?</p>\n\n<p>So when a room is closed, the thread that closes the room can move clients out of it with no need to disturb the threads waiting for messages from those clients.</p>\n"}], "owner": {"reputation": 43, "user_id": 4871366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2dbe301e58cce0267a00a1af3cac1e?s=128&d=identicon&r=PG&f=1", "display_name": "John Wood", "link": "https://stackoverflow.com/users/4871366/john-wood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1401, "favorite_count": 0, "accepted_answer_id": 30083441, "answer_count": 4, "score": 4, "last_activity_date": 1430933717, "creation_date": 1430928069, "last_edit_date": 1430933046, "question_id": 30081889, "link": "https://stackoverflow.com/questions/30081889/how-to-interrupt-other-stdthreads-c", "title": "How to interrupt other std::threads c++", "body": "<p>I have a server which is built in a thread-per-client way. Lately, I bumped into a problem that I'm having a really hard time to come up with a solution to, so I thought to ask some help.</p>\n\n<p>My server hosts a lobby, in the lobby there are many rooms (all of them owned by users), and in rooms there are players. Each room has an admin, when the admin chooses to leave - the room is closed, and all of the users are supposed to return to the lobby.</p>\n\n<p>Now, I already have a working code - but there's the problem, I have no idea how should I have the other clients also exiting from the room. The code running in the thread is as following:</p>\n\n<pre><code>while(in_lobby)\n{\n//Receive a message\n//Do stuff\n//In certain cases change the Boolean to fit to the situation\n//Send a comeback\n}\n\nwhile(in_room)\n{\n//Receive a message\n//Do stuff\n//In certain cases change the Boolean to fit to the situation\n//Send a comeback\n}\n\nwhile(in_game)\n{\n//When a game started\n//Not practical right now, though\n}\n</code></pre>\n\n<p>There is no problem messing with the booleans from a thread of one client to another (because they are not exactly local variables, they are several conditions that I could change through the thread which is handling the administrator choosing to close the room).</p>\n\n<p>The problem occurs when the condition DOES change, and the while loop is supposed to exit before the next iteration. Why does it occur? Because in the beginning of the iteration there's a <code>recv()</code> call, which awaits the client's messages.</p>\n\n<p>Now, the condition is okay, everything is okay, but the loop won't continue (so it won't reach the next iteration - to see that the condition is false) until the server receives a certain message from the client (which it shouldn't, because closing the room doesn't depend on a regular user - the user only receives and alert, which is also sent through the admin's thread, about the room being closed).</p>\n\n<p><strong>My question therefore is:</strong></p>\n\n<p>How can I perform what I want? How can I make these users to break out of the loop, returning to the lobby (there is no problem with doing so with the admin, as his thread is the one that does everything and he returns to the lobby successfully) without changing the whole architecture from a thread-per-client way?</p>\n"}, {"tags": ["c++", "colors", "jpeg"], "answers": [{"tags": [], "owner": {"reputation": 3420, "user_id": 675723, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f525203adb5093c5954b43a5b6420c2?s=128&d=identicon&r=PG", "display_name": "BadZen", "link": "https://stackoverflow.com/users/675723/badzen"}, "is_accepted": true, "score": 3, "last_activity_date": 1430928261, "creation_date": 1430928261, "answer_id": 30081955, "question_id": 30081784, "link": "https://stackoverflow.com/questions/30081784/jpeg-ycrcb-rgb-conversion-precision/30081955#30081955", "title": "JPEG: YCrCb &lt;-&gt; RGB conversion precision", "body": "<p>The problem isn't rounding modes.  </p>\n\n<p>Even if you converted your floating point constants to ratios and used only integer math, you'd still see different values after the inverse. </p>\n\n<p>To see why, consider a function where I tell you I'm going to shift the numbers 0 through N to the range 0 through N-2.   The fact is that this transform is just doesn't have an inverse.  You can represent it more or less exactly with a floating point computation (<code>f(x) = x*(N-2)/N</code>), but some of the neighboring values will map to the same result in integer math (pigeonhole principle!).  This is a simplification and \"compresses\" the range, but the same thing happens in arbitrary affine transforms like this one you are using.</p>\n\n<p>If you had r, g, b in floating point, and kept it that way until you quantized to integer, that would be a different story - but in integers you will necessarily always see some difference between the original and the inverse.</p>\n"}, {"comments": [{"owner": {"reputation": 1551, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "edited": false, "score": 0, "creation_date": 1430992976, "post_id": 30090594, "comment_id": 48307315, "body": "In HSV description it&#39;s stated, and there is handling of these cases, but in YCrCb it wasn&#39;t described."}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "reply_to_user": {"reputation": 1551, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "edited": false, "score": 1, "creation_date": 1431010477, "post_id": 30090594, "comment_id": 48320498, "body": "The way you handle that situation in YCbCr is to use the closest color. You will get component values outside the range 0-255 in the conversion. You clamp those to the range."}], "tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 0, "last_activity_date": 1430963443, "creation_date": 1430963443, "answer_id": 30090594, "question_id": 30081784, "link": "https://stackoverflow.com/questions/30081784/jpeg-ycrcb-rgb-conversion-precision/30090594#30090594", "title": "JPEG: YCrCb &lt;-&gt; RGB conversion precision", "body": "<p>Another problem is that there is not a 1 to 1 mapping between rgb and YCbCR. There are YCbCr values with no corresponding RGB value and RBG values with no corresponding YCbCR values.</p>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 4306868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0525549d492414add26b352dbcf95b72?s=128&d=identicon&r=PG&f=1", "display_name": "The Hard Way", "link": "https://stackoverflow.com/users/4306868/the-hard-way"}, "is_accepted": false, "score": 1, "last_activity_date": 1431012138, "creation_date": 1431012138, "answer_id": 30105358, "question_id": 30081784, "link": "https://stackoverflow.com/questions/30081784/jpeg-ycrcb-rgb-conversion-precision/30105358#30105358", "title": "JPEG: YCrCb &lt;-&gt; RGB conversion precision", "body": "<p>Only about 60% of all RGB values can be represented in YCbCr space when using the same amount of bits for both triplets. This means the most damage happens in RGB->YCbCr when you take a 3*8 bit RGB triplet, convert and round it back to 3*8 bits of precision. The trick is to store the YCbCr triplet at a higher precision until it's time to do forward DCT. There, the data needs to be scaled up anyway, so you can do e.g. 16 bit * 16 bit -> MSB16 multiplies, which are well supported by various SIMD instruction sets.</p>\n\n<p>At the decoder it's the reverse: The results of inverse DCT have to be stored at higher precision until it's time to do the YCbCr->RGB conversion.</p>\n\n<p>This doesn't make the process lossless, but for JPEG, it may buy a few dB of PSNR at the extreme high end of the quality scale, i.e. where the difference can't be seen with a naked eye but can be measured.</p>\n"}, {"tags": [], "owner": {"reputation": 6048, "user_id": 492716, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6831c7dec9e7ca59c06a09135559ef62?s=128&d=identicon&r=PG", "display_name": "onemasse", "link": "https://stackoverflow.com/users/492716/onemasse"}, "is_accepted": false, "score": 1, "last_activity_date": 1433429705, "last_edit_date": 1495539975, "creation_date": 1433429705, "answer_id": 30647268, "question_id": 30081784, "link": "https://stackoverflow.com/questions/30081784/jpeg-ycrcb-rgb-conversion-precision/30647268#30647268", "title": "JPEG: YCrCb &lt;-&gt; RGB conversion precision", "body": "<p>Yes, supposedly <a href=\"http://en.wikipedia.org/wiki/JPEG_XR\" rel=\"nofollow noreferrer\">JPEG XR</a> defines a color conversion that is reversible. The code is open source if you want to investigate in depth how they're doing it. The method is loosely described on the Wiki-page I linked to.</p>\n\n<p>Also <a href=\"https://stackoverflow.com/questions/10566668/lossless-rgb-to-ycbcr-transformation\">this SO post</a> might give you some insights.</p>\n"}], "owner": {"reputation": 1551, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2959, "favorite_count": 1, "accepted_answer_id": 30081955, "answer_count": 4, "score": 1, "last_activity_date": 1433429705, "creation_date": 1430927742, "question_id": 30081784, "link": "https://stackoverflow.com/questions/30081784/jpeg-ycrcb-rgb-conversion-precision", "title": "JPEG: YCrCb &lt;-&gt; RGB conversion precision", "body": "<p>I've implemented rgb->ycrcb and ycrcb->rgb conversion using JPEG conversion formulae from<br>\n<a href=\"http://www.w3.org/Graphics/JPEG/jfif3.pdf\" rel=\"nofollow\">http://www.w3.org/Graphics/JPEG/jfif3.pdf</a> <br>\n(the same at: <a href=\"http://en.wikipedia.org/wiki/YCbCr\" rel=\"nofollow\">http://en.wikipedia.org/wiki/YCbCr</a> (JPEG conversion)).</p>\n\n<p>When checking whether results are correct (original->YCrCb->RGB), some of pixels differ by one, e.g 201->200.    </p>\n\n<p>Average percent of precision errors is 0.1%, so it's not critical.</p>\n\n<pre><code>/// converts RGB pixel to YCrCb using { en.wikipedia.org/wiki/YCbCr: JPEG conversion }\nivect4 rgb2ycrcb(int r, int g, int b)\n{\n    int y =  round(0.299*r + 0.587*g + 0.114*b) ;\n    int cb = round(128.0 - (0.1687*r) - (0.3313*g) + (0.5*b));\n    int cr = round(128.0 + (0.5*r) - (0.4187*g) - (0.0813*b));\n    return ivect4(y, cr, cb, 255);\n}\n/// converts YCrCb pixel to RGB using { en.wikipedia.org/wiki/YCbCr: JPEG conversion }\nivect4 ycrcb2rgb(int y, int cr, int cb)\n{\n    int r = round(1.402*(cr-128) + y);\n    int g = round(-0.34414*(cb-128)-0.71414*(cr-128) + y);\n    int b = round(1.772*(cb-128) + y);\n    return ivect4(r, g, b, 255);\n}\n</code></pre>\n\n<p>I use round formula: <br>\nfloor((x) + 0.5)</p>\n\n<p>When using other types of rounding, e.g. float(int), or std::ceil(), results are even worse.</p>\n\n<p>So, <strong>does there exist the way to do YCrCb &lt;-> RGB conversion without loss in precision?</strong></p>\n"}, {"tags": ["c++", "qt", "taglib", "qstring"], "answers": [{"tags": [], "owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "is_accepted": true, "score": 1, "last_activity_date": 1430927741, "creation_date": 1430927741, "answer_id": 30081783, "question_id": 30081576, "link": "https://stackoverflow.com/questions/30081576/mp3-metadata-from-taglib-to-qstring-qt-c/30081783#30081783", "title": "&quot;.mp3&quot; metadata from TagLib to QString, Qt, C++", "body": "<p>Use format string to build the string for new name:</p>\n\n<pre><code>QString newName(\"%1% - %2% - %3% (%4%)\");\nnewName = newName.arg(f.tag()-&gt;artist().toCString()).arg(f.tag()-&gt;album().toCString()).arg(f.tag()-&gt;track()).arg(f.tag()-&gt;year());\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 3239246, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1141483599/picture?type=large", "display_name": "Jadelabe", "link": "https://stackoverflow.com/users/3239246/jadelabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "accepted_answer_id": 30081783, "answer_count": 1, "score": 0, "last_activity_date": 1430927741, "creation_date": 1430927160, "question_id": 30081576, "link": "https://stackoverflow.com/questions/30081576/mp3-metadata-from-taglib-to-qstring-qt-c", "title": "&quot;.mp3&quot; metadata from TagLib to QString, Qt, C++", "body": "<p>I'm trying to rename .mp3 files using TagLib with the format \"artist - album - song(year).mp3\" and move them to a new directory, so far i'm using</p>\n\n<pre><code>    TagLib::FileRef f(dirIt.filePath().toStdString().c_str());\n\n    QString newName = f.tag()-&gt;artist().toCString() + \" - \" + f.tag()-&gt;album().toCString() + \" - \" + (QString) f.tag()-&gt;track() + \" (\" + (QString) f.tag()-&gt;year() + \")\";\n    QString newPath = NewDir.absolutePath() + QDir().separator() + newName + \".mp3\";\n    QFile::copy(oldDir, newPath);\n    QFile::remove(dirIt.filePath().toStdString().c_str());\n</code></pre>\n\n<p>Where \"dirIt\" is a QDirIterator (I'm iterating a folder where the songs are) and \"oldDir\" a Qstring with the absolute path of the folder i'm iterating.</p>\n\n<p>My problem comes when im trying to give \"newName\" the desired value, i'm getting  </p>\n\n<blockquote>\n  <p>error: invalid operands of types 'const char*' and 'const char [4]' to\n  binary 'operator+'\n               QString newName = f.tag()->artist().toCString() + \" - \" + f.tag()->album().toCString() +\n  \" - \" + (QString) f.tag()->track() + \" (\" + (QString) f.tag()->year()\n  + \")\";</p>\n</blockquote>\n\n<p>How can i solve this? </p>\n"}, {"tags": ["c++", "geolocation", "trilateration"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1430927584, "post_id": 30081499, "comment_id": 48276587, "body": "By the way, know that since you have a requirement that all circles be centered on the x-axis, you actually only need to find the intersection of 2 circles, the 3rd is superfluous. You would need the 3rd circle if their centers were arbitrary."}, {"owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1430938194, "post_id": 30081499, "comment_id": 48283348, "body": "ohh you are right, thank you :)"}], "owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 875, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430926943, "creation_date": 1430926943, "question_id": 30081499, "link": "https://stackoverflow.com/questions/30081499/intersection-of-3-circles-which-are-on-the-same-line-trilateration", "title": "Intersection of 3 circles which are on the same line - Trilateration", "body": "<p>I have faced a problem: I would like to compute the intersection of three circles. To the best of my knowledge, I should use the so called <a href=\"http://en.wikipedia.org/wiki/Trilateration\" rel=\"nofollow noreferrer\">Trilateration</a>. I have implemented it in c++. The <a href=\"http://en.wikipedia.org/wiki/Trilateration\" rel=\"nofollow noreferrer\">article</a> says that there are three limitation of this solution.</p>\n\n<ol>\n<li>all three centers are in the plane z = 0, </li>\n<li>the sphere center, P1, is at the origin,</li>\n<li>and the sphere center, P2, is on the x-axis</li>\n</ol>\n\n<p>As for the first \"criterion\", I have nothing to do because all the three centers are in the plane z = 0 since I do not use Z coordinates.\nAfter that I translated the points to the positions where the center of the first point (P1) is at the origin. After that, I rotated the P2 (and P3 as well) point to the position where the P2 is on the x-axis.</p>\n\n<p>My problem is: When all the three center are on the X axis, I tried to compute the center of the intersection area(which is computed by using the algorithm of the <a href=\"http://en.wikipedia.org/wiki/Trilateration\" rel=\"nofollow noreferrer\">wiki's article</a>), but the calculation can not be done. On the other hand there is no limitation which says something like \"the centers of the circles can not be on one line...\nLet's see my problem visually, I just painted it:</p>\n\n<p><img src=\"https://i.stack.imgur.com/n7Ykh.png\" alt=\"intersection of three circles\"></p>\n\n<p>As you can see, the three circle intersect each other on the same point at coordinates of (4,3). Therefore there is a solution for these points which are all on the same line (in this example, on the x axis).\nThe parameters of the circles are the following (x,y,radius):</p>\n\n<pre><code>P1: (0,0,5)\nP2: (4,0,3)\nP3: (8,0,5)\n</code></pre>\n\n<p>As I mentioned, I successfully implemented the algorithm of the <a href=\"http://en.wikipedia.org/wiki/Trilateration\" rel=\"nofollow noreferrer\">Trilateration</a> but it can not solve this example, the result is NaN (Not a Number). Of course I already tried this algorithm with another circles (which are not on the same line), and it works properly.</p>\n\n<p>So I started debugging my implementation, and I have found where the problem might lie. My implementation is the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;math.h&gt; \n#include &lt;vector&gt;\nstd::ifstream infile(\"coordinateList.txt\");\nusing namespace std;\n\nstd::vector&lt;double&gt; trilateration2D(double point1[], double point2[], double point3[], double r1, double r2, double r3) {\n    std::vector&lt;double&gt; resultPose;\n    //unit vector in a direction from point1 to point 2\n    double p2p1Distance = pow(pow(point2[0]-point1[0],2) + pow(point2[1]-point1[1],2),0.5);\n    double exx = (point2[0]-point1[0])/p2p1Distance;\n    double exy = (point2[1]-point1[1])/p2p1Distance;\n\n    //signed magnitude of the x component\n    double ix = exx*(point3[0]-point1[0]);\n    double iy = exy*(point3[1]-point1[1]);\n    double i = ix+iy;\n    //the unit vector in the y direction. \n    double eyx = (point3[0]-point1[0]-ix*exx)/pow(pow(point3[0]-point1[0]-ix*exx,2) + pow(point3[1]-point1[1]-iy*exy,2),0.5);\n    double eyy = (point3[1]-point1[1]-iy*exy)/pow(pow(point3[0]-point1[0]-ix*exx,2) + pow(point3[1]-point1[1]-iy*exy,2),0.5);\n    //the signed magnitude of the y component\n    double jx = eyx*(point3[0]-point1[0]);\n    double jy = eyy*(point3[1]-point1[1]);\n    double j = jx + jy;\n    //coordinates\n    double x = (pow(r1,2) - pow(r2,2) + pow(p2p1Distance,2))/ (2 * p2p1Distance);\n    double y = (pow(r1,2) - pow(r3,2) + pow(i,2) + pow(j,2))/(2*j) - i*x/j;\n    //result coordinates\n    double finalX = point1[0]+ x*exx + y*eyx;\n    double finalY = point1[1]+ x*exy + y*eyy;\n    resultPose.push_back(finalX);\n    resultPose.push_back(finalY);\n    return resultPose;\n}\nint main(int argc, char* argv[]){\n    std::vector&lt;double&gt; finalPose;\n    double p1[] = {0,0};\n    double p2[] = {4,0};\n    double p3[] = {8,0};\n    double r1,r2,r3;\n    r1 = 5;\n    r2 =3;\n    r3 = 5;\n    finalPose = trilateration2D(p1,p2,p3,r1,r2,r3);\n    cout&lt;&lt;\"X:::  \"&lt;&lt;finalPose[0]&lt;&lt;endl;\n    cout&lt;&lt;\"Y:::  \"&lt;&lt;finalPose[1]&lt;&lt;endl;\n\n}\n</code></pre>\n\n<p>When the program calculates <strong>eyx</strong> and <strong>eyy</strong> there are zeros in the division, and needless to say, a division by zero is not \"allowed\".\nThe <strong>eyx</strong> and <strong>eyy</strong> are unit vectors in the y direction, but at such this locating of circles there is no unit vector in y direction.</p>\n\n<p>My question is: Is there a 4th limitation to this algorithm? In my opinion it would be written to the article, so: Could you advise other solution for this problem, where the intersection can be calculated while all the points are on the same line?\nThanks in advance!</p>\n"}, {"tags": ["c++", "linux", "core", "linux-mint"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1430926967, "post_id": 30081373, "comment_id": 48276172, "body": "It might be simpler to have more disk space. You might even try plugging some cheap USB key (with some Ext4 filesystem on it), and run your program in it."}, {"owner": {"reputation": 25, "user_id": 3655785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a5457a6f05e2496c86a6508fd4a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/3655785/carlos"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1430988378, "post_id": 30081373, "comment_id": 48304093, "body": "@BasileStarynkevitch Unfortunately that&#39;s not an option. I&#39;m very limited with hardware in this case. That&#39;s actually the root of the problem."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3655785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a5457a6f05e2496c86a6508fd4a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/3655785/carlos"}, "edited": false, "score": 0, "creation_date": 1431001744, "post_id": 30081414, "comment_id": 48313475, "body": "That looks very promising. I&#39;ll definitely look into it, thank you!"}], "tags": [], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "is_accepted": true, "score": 2, "last_activity_date": 1430926709, "creation_date": 1430926709, "answer_id": 30081414, "question_id": 30081373, "link": "https://stackoverflow.com/questions/30081373/reduce-core-dump-size-on-linux/30081414#30081414", "title": "reduce core dump size on linux", "body": "<p>Consider using Breakpad: <a href=\"https://code.google.com/p/google-breakpad/\" rel=\"nofollow\">https://code.google.com/p/google-breakpad/</a>\n<a href=\"https://code.google.com/p/google-breakpad/wiki/GettingStartedWithBreakpad\" rel=\"nofollow\">https://code.google.com/p/google-breakpad/wiki/GettingStartedWithBreakpad</a> :</p>\n\n<blockquote>\n  <p>Breakpad is a library and tool suite that allows you to distribute an\n  application to users with compiler-provided debugging information\n  removed, record crashes in compact \"minidump\" files, send them back to\n  your server, and produce C and C++ stack traces from these minidumps.\n  Breakpad can also write minidumps on request for programs that have\n  not crashed.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 3655785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a5457a6f05e2496c86a6508fd4a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/3655785/carlos"}, "edited": false, "score": 0, "creation_date": 1431001867, "post_id": 30081869, "comment_id": 48313573, "body": "Simply setting a size limit for the core only results in it getting truncated, which, as far as my knowledge goes, is useless. About the other method, I&#39;m not really familiar with writing signal handlers but I&#39;ll try it, thank you!"}, {"owner": {"reputation": 184, "user_id": 1552766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050525b6d5df7ac28609fd791d1e384d?s=128&d=identicon&r=PG", "display_name": "timato", "link": "https://stackoverflow.com/users/1552766/timato"}, "reply_to_user": {"reputation": 25, "user_id": 3655785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a5457a6f05e2496c86a6508fd4a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/3655785/carlos"}, "edited": false, "score": 0, "creation_date": 1431013392, "post_id": 30081869, "comment_id": 48322822, "body": "Let me know how it goes!"}], "tags": [], "owner": {"reputation": 184, "user_id": 1552766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050525b6d5df7ac28609fd791d1e384d?s=128&d=identicon&r=PG", "display_name": "timato", "link": "https://stackoverflow.com/users/1552766/timato"}, "is_accepted": false, "score": 0, "last_activity_date": 1430928016, "last_edit_date": 1495535049, "creation_date": 1430928016, "answer_id": 30081869, "question_id": 30081373, "link": "https://stackoverflow.com/questions/30081373/reduce-core-dump-size-on-linux/30081869#30081869", "title": "reduce core dump size on linux", "body": "<p>It appears that there are several related answers here on StackOverflow:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8836459/minimal-core-dump-stack-trace-current-frame-only\">Minimal core dump (stack trace + current frame only)</a></p>\n\n<p>This link suggests setting up a signal handler for SIGSEGV and dumping core in your own way.</p>\n\n<p>and </p>\n\n<p><a href=\"https://stackoverflow.com/questions/2762879/linux-core-dumps-are-too-large\">Linux core dumps are too large!</a></p>\n\n<p>This link suggests using setrlimit to limit the size of the dump.</p>\n"}], "owner": {"reputation": 25, "user_id": 3655785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082a5457a6f05e2496c86a6508fd4a4a?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/3655785/carlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2835, "favorite_count": 1, "accepted_answer_id": 30081414, "answer_count": 2, "score": 2, "last_activity_date": 1430928016, "creation_date": 1430926574, "question_id": 30081373, "link": "https://stackoverflow.com/questions/30081373/reduce-core-dump-size-on-linux", "title": "reduce core dump size on linux", "body": "<p>What are the best methods to reduce a core dump's size?</p>\n\n<p>My problem is that I have very little space dedicated to the purpose on my Linux Mint. I have around 200 MB which is far not enough for my program to generate a decent dump. I have tried configuring the coredump filter, but only the anonymous private mappings dump made any significant change in the size, but it also made my dump unreadable. I also tried to limit the size with ulimit, but the only result was that dump was truncated every single time.</p>\n\n<p>My question is that what is the best way to control the core dump's size?\nIs there any way to keep only maybe the top 10-15 frames of a dump? Also what is the use of setting the size limit with ulimit, if it only generates useless core files?</p>\n"}]