[{"tags": ["c++", "priority-queue"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1469058700, "post_id": 38492612, "comment_id": 64386541, "body": "You have a <code>priority_queue</code> of pointers, it&#39;s sorting using the value of the pointers not the age.  Use <code>priority_queue&lt;Person&gt;</code> and remove the <code>new</code>s when you push."}], "answers": [{"comments": [{"owner": {"reputation": 1455, "user_id": 2817885, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XfipV.jpg?s=128&g=1", "display_name": "Coffee Maker", "link": "https://stackoverflow.com/users/2817885/coffee-maker"}, "edited": false, "score": 0, "creation_date": 1469059320, "post_id": 38492624, "comment_id": 64386673, "body": "This works, thanks. Also, I got an error which implied that I need to add const after the operator overloading function (before the body part). Why is const necessary here?"}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "reply_to_user": {"reputation": 1455, "user_id": 2817885, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XfipV.jpg?s=128&g=1", "display_name": "Coffee Maker", "link": "https://stackoverflow.com/users/2817885/coffee-maker"}, "edited": false, "score": 0, "creation_date": 1469059712, "post_id": 38492624, "comment_id": 64386748, "body": "Ah yes, <code>operator&lt;</code> should have a <code>const</code> specification as it shouldn&#39;t change <code>this</code> - the comparator of <code>std::priority_queue</code> expects it to be <code>const</code> specified so its necessary (and correct) here."}], "tags": [], "owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "is_accepted": true, "score": 8, "last_activity_date": 1469222674, "last_edit_date": 1469222674, "creation_date": 1469058657, "answer_id": 38492624, "question_id": 38492612, "link": "https://stackoverflow.com/questions/38492612/how-do-you-order-objects-in-a-priority-queue-in-c/38492624#38492624", "title": "How do you order objects in a priority_queue in C++?", "body": "<p><code>priority_queue&lt;Person*&gt;</code> actually orders based on comparing the memory addresses of <code>Person</code> object using the comparator <code>std::less&lt;Person*&gt;</code>. </p>\n\n<p>Declare a <code>priority_queue&lt;Person&gt;</code> instead to order based on the <code>operator&lt;</code> you provided.</p>\n\n<p>Or if you insist on using pointers (for some reason) then declare as:</p>\n\n<pre><code>auto age_comp = [](const std::unique_ptr&lt;Person&gt;&amp; lhs, const std::unique_ptr&lt;Person&gt;&amp; rhs) -&gt; bool {\n    return *lhs &lt; *rhs;\n};\nstd::priority_queue&lt;std::unique_ptr&lt;Person&gt;, std::vector&lt;std::unique_ptr&lt;Person&gt;&gt;,\n    decltype(age_comp)&gt; people(age_comp);\n// note: must pass age_comp to std::priority_queue constructor here as\n// lambda closure types have deleted default constructors\n</code></pre>\n\n<p>Note that this is using smart pointers not raw pointers, the former are much more commonly used in modern C++ - don't use raw pointers unless you have  a very good reason to.</p>\n\n<p>Also, <code>operator&lt;</code> of <code>Person</code> should be <code>const</code> specified as it shouldn't change the <code>Person</code> object it belongs to at any point - the comparator of <code>std::priority_queue</code> expects the <code>const</code> and will likely throw an error if the <code>operator&lt;</code> does not have <code>const</code> specification. So, alter <code>operator&lt;</code> to:</p>\n\n<pre><code>bool operator&lt;(const Person&amp; p) const {\n    return age &lt; p.age;\n}\n</code></pre>\n"}], "owner": {"reputation": 1455, "user_id": 2817885, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XfipV.jpg?s=128&g=1", "display_name": "Coffee Maker", "link": "https://stackoverflow.com/users/2817885/coffee-maker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 1, "accepted_answer_id": 38492624, "answer_count": 1, "score": 1, "last_activity_date": 1469222674, "creation_date": 1469058556, "question_id": 38492612, "link": "https://stackoverflow.com/questions/38492612/how-do-you-order-objects-in-a-priority-queue-in-c", "title": "How do you order objects in a priority_queue in C++?", "body": "<p>I couldn't find any information on how to order objects in a priority queue. I tried this:</p>\n\n<pre><code>class Person {\n    ...\n    public:\n    bool operator&lt;(const Person&amp; p) {\n        return age &lt; p.age;\n    }\n}\n\nint main() {\n    priority_queue&lt;Person*&gt; people;\n    people.push(new Person(\"YoungMan\", 21));\n    people.push(new Person(\"Grandma\", 83));\n    people.push(new Person(\"TimeTraveler\", -5000));\n    people.push(new Person(\"Infant\", 1));\n\n    while (!people.empty()) {\n        cout &lt;&lt; people.top()-&gt;name;\n        delete people.top();\n        people.pop();\n    }\n</code></pre>\n\n<p>And it's supposed to give priority based on age (older people get higher priority, and thus leave the queue first), but it doesn't work. But I'm getting this output:</p>\n\n<pre><code>Infant\nGrandma\nTimeTraveler\nYoungMan\n</code></pre>\n\n<p>And I have no idea what this is ordered by, but it's definitely not age.</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1469054238, "post_id": 38491950, "comment_id": 64385374, "body": "Use <code>std::array&lt;int, 8&gt;</code> instead of raw owning pointer..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1469054268, "post_id": 38491950, "comment_id": 64385389, "body": "You store always the same <b>pointer</b> inside <code>myvector</code>"}, {"owner": {"reputation": 19, "user_id": 6542228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44009483b2375f3ca262cacdaf993a9f?s=128&d=identicon&r=PG&f=1", "display_name": "lul", "link": "https://stackoverflow.com/users/6542228/lul"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1469054629, "post_id": 38491950, "comment_id": 64385479, "body": "@Jarod42 Thanks for explanation! I understand now!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1469054718, "post_id": 38491950, "comment_id": 64385498, "body": "Trick interview question. The right answer is, &quot;Well known problem. Rather than waste the company&#39;s time reinventing the wheel, I&#39;ll look up solutions online, select one that meets the project requirements with the lowest amount of time and money spent upfront and in maintenance, and move on to the next problem.&quot;"}, {"owner": {"reputation": 19, "user_id": 6542228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44009483b2375f3ca262cacdaf993a9f?s=128&d=identicon&r=PG&f=1", "display_name": "lul", "link": "https://stackoverflow.com/users/6542228/lul"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469054962, "post_id": 38491950, "comment_id": 64385567, "body": "@user4581301 I see. Thank you for the guidance."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1469057307, "post_id": 38492166, "comment_id": 64386225, "body": "For the answer to be useful to future readers, you should show the corrected version of the code."}], "tags": [], "owner": {"reputation": 19, "user_id": 6542228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44009483b2375f3ca262cacdaf993a9f?s=128&d=identicon&r=PG&f=1", "display_name": "lul", "link": "https://stackoverflow.com/users/6542228/lul"}, "is_accepted": true, "score": -2, "last_activity_date": 1469131724, "last_edit_date": 1469131724, "creation_date": 1469055183, "answer_id": 38492166, "question_id": 38491950, "link": "https://stackoverflow.com/questions/38491950/recursive-method-always-print-out-the-same-thing/38492166#38492166", "title": "recursive method ,always print out the same thing", "body": "<p>From @Jarod42's  comment, I know I have to change pointer inside the vector to\nstd::array. In my former code, I store the same pointer inside the vector again and again.\n    #include\n    #include</p>\n\n<pre><code> const int max = 8;\n bool checkvalid(std::array&lt;int, 8&gt; array, int row1, int col)  // change array* to  std::array&lt;int, 8&gt; array\n{\n      for(int j=0; j&lt;row1; j++)\n        {\n           if( array[j] == col)  //not in the same colon\n             return false;\n          if( ((row1- j) == ( array[j]-col)) || ((row1- j) == ( -array[j]+col)) ) // not in the same diagonal\n            return false;\n\n         }\nreturn true;\n}\n\nvoid placequeen(int row, std::array&lt;int, 8&gt; array, std::vector&lt;std::array&lt;int, 8&gt;&gt; &amp;myvector)  // change array* to std::array&lt;int, 8&gt; array\n{\n     if( row == max)\n     {    \n           myvector.push_back(array);  // if I print here , result is correct\n\n     }\n    else\n     {\n\n          for(int i=0 ; i&lt;max; i++)\n          {  \n\n              if(checkvalid(array, row, i))\n               { \n                 array[row] = i;\n                 placequeen(row+1, array,myvector);\n                }\n\n            }\n\n         }\n   }\n\n\nint main()\n{\n   std::vector&lt;std::array&lt;int, 8&gt;&gt; a;\n   std::array&lt;int, 8&gt; array;\n   placequeen(0,  array, a);\n\n  for(std::vector&lt;std::array&lt;int, 8&gt;&gt;::iterator it=a.begin(); it!=a.end(); it++)\n  {    \n       for(int i=0 ; i&lt;8; i++)\n       { \n         std::cout &lt;&lt; (*it)[i] ; }\n    std::cout &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6542228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44009483b2375f3ca262cacdaf993a9f?s=128&d=identicon&r=PG&f=1", "display_name": "lul", "link": "https://stackoverflow.com/users/6542228/lul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38492166, "answer_count": 1, "score": -4, "last_activity_date": 1469131724, "creation_date": 1469053943, "question_id": 38491950, "link": "https://stackoverflow.com/questions/38491950/recursive-method-always-print-out-the-same-thing", "title": "recursive method ,always print out the same thing", "body": "<pre><code>#include&lt;vector&gt;\n#include&lt;iostream&gt;\n\n const int max = 8;\n bool checkvalid(int* array, int row1, int col)\n{\n      for(int j=0; j&lt;row1; j++)\n        {\n           if( array[j] == col)  //not in the same colon\n             return false;\n            if( ((row1- j) == ( array[j]-col)) || ((row1- j) == ( -array[j]+col)) ) // not in the same diagonal\n               return false;\n\n         }\nreturn true;\n}\n\nvoid placequeen(int row, int* array, std::vector&lt;int*&gt; &amp;myvector)\n{\n     if( row == max)\n     {       \n          myvector.push_back(array);  // if I print here , result is correct\n         /* for(int i=0; i&lt;8; i++)\n           std::cout &lt;&lt; array[i] ;\n           std::cout &lt;&lt; std::endl;*/\n     }\n else\n     {\n\n          for(int i=0 ; i&lt;max; i++)\n          {  \n\n              if(checkvalid(array, row, i))\n               { \n                 array[row] = i;\n                 placequeen(row+1, array,myvector);\n                }\n\n              }\n\n         }\n   }\n\n\nint main()\n{\n std::vector&lt;int*&gt; a;\n int* array = new int[8];\n placequeen(0,  array, a);\n\nfor(std::vector&lt;int*&gt;::iterator it=a.begin(); it!=a.end(); it++)\n  {    \n        for(int i=0 ; i&lt;8; i++)\n        { \n         std::cout &lt;&lt; (*it)[i] ; }\n          std::cout &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>It's the n queen problem from cracking the code interview.It prints the same result \"75364424\" all the time . But if I print inside the if(row == max ) the result is correct (I toggle the code there), why and how to change? Thanks</p>\n"}, {"tags": ["c++", "algorithm", "binary-indexed-tree"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1469053400, "post_id": 38491741, "comment_id": 64385124, "body": "Please help us to help you. What is wrong with the code? Do you get a compiler error? Runtime error? Wrong result? In any case you should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and please format the code properly, at the moment it is rather difficult to read"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1469053744, "post_id": 38491741, "comment_id": 64385229, "body": "I highly recommend a tool, maybe you&#39;ve heard of it, called a <b>Debugger</b>.  Very useful for finding issues in code."}], "answers": [{"tags": [], "owner": {"reputation": 717, "user_id": 5294025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fbcc3f045d297285cefc60a2ed9f4f8?s=128&d=identicon&r=PG", "display_name": "Evan VanderZee", "link": "https://stackoverflow.com/users/5294025/evan-vanderzee"}, "is_accepted": false, "score": 0, "last_activity_date": 1469072477, "creation_date": 1469072477, "answer_id": 38494484, "question_id": 38491741, "link": "https://stackoverflow.com/questions/38491741/couldnt-figure-out-whats-wrong-with-my-binary-indexed-tree-solution/38494484#38494484", "title": "Couldn&#39;t figure out whats wrong with my Binary Indexed Tree Solution", "body": "<p>It was hard for me to understand how you are trying to use the Binary Indexed Tree, but I think I get it.</p>\n\n<p>Let me try to explain what I think the algorithm is, using n as the length of the input array.</p>\n\n<ol>\n<li>Compute all of the range sums for which the range begins with index 0.</li>\n<li>Sort these sums in increasing order.</li>\n<li>Initialize a Binary Indexed Tree of size n that represents a frequency count of 0 at each position.  This represents that all of the sums you start with are invalid, and it will be used to keep track of which sums become valid as the algorithm progresses.</li>\n<li>Implicitly offset all of the sums by the range sum S(0, n) so that you obtain range sums for which the range begins with index n rather than index 0.</li>\n<li>Determine the indices within the list of sorted sums of the smallest and largest sum that fall into [lower bound, upper bound].</li>\n<li>Query the Binary Indexed Tree to count how many of these sums are valid.  Add this to your count of the total number of range sums that fall into [lower bound, upper bound]</li>\n<li>Identify the index of the range sum S(0,n) in the Binary Indexed Tree and mark that it will be a valid sum in the next iteration by setting its frequency count to 1.</li>\n<li>Loop back to step 4, iterating through n - 1, n - 2, n - 3, . . ., 2, 1, 0.</li>\n</ol>\n\n<p>The most significant problem with your implementation, I think, is that your tree is not quite large enough.  It should be a little larger because the 0 index is not used.  So use</p>\n\n<pre><code>tree.resize(sum.size()+2);\n</code></pre>\n\n<p>instead of your current <code>+1</code>.</p>\n\n<p>Also, if you want to be able to use the method more than once, you will need to clear out the tree, setting all values back to zero, rather than just resizing it.</p>\n\n<p>Fixing the first problem made it work on your sample data.  I didn't notice any other problems with your code, but I didn't test thoroughly.</p>\n"}], "owner": {"reputation": 1, "user_id": 6520086, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1b33e2bce133717f6a7f058cc0fd97ba?s=128&d=identicon&r=PG&f=1", "display_name": "Isabella Lu", "link": "https://stackoverflow.com/users/6520086/isabella-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1469072477, "creation_date": 1469052850, "last_edit_date": 1469071703, "question_id": 38491741, "link": "https://stackoverflow.com/questions/38491741/couldnt-figure-out-whats-wrong-with-my-binary-indexed-tree-solution", "title": "Couldn&#39;t figure out whats wrong with my Binary Indexed Tree Solution", "body": "<p>I am solving a problem.</p>\n\n<pre><code>    Count of Range Sum\n\n    Given an integer array nums, return the number of range sums that \n    lie in [lower, upper] inclusive. Range sum S(i, j) is defined as \n    the sum of the elements in nums between indices i and j (i \u2264 j),inclusive.\n    Example: Given nums = [-2, 5, -1], lower = -2, upper = 2, Return 3.\n    The three ranges are : [0, 0], [2, 2], [0, 2] and their respective sums are: -2, -1, 2\n</code></pre>\n\n<p>My solution is below:</p>\n\n<p>1.get all sums from[0,i] as sum[i] </p>\n\n<p>2.sort sum vector as clone vector, and reindex elements in sum according to its index in clone vector. Put sum element value as map reflect's key, new index as reflect's value. add vector sum element from back to front into Binary Indexed Tree, and at the same time find valid elements index range [idx1,idx2] in clone which satisfies the lowerbound and upperbound condition.</p>\n\n<p>3.get the sum from node 0 to node idx1 and sum from node 0 to node idx2 in our BIT. If the node is inserted into the BIT already we will find the node in our BIT. So the node amount which satisfies our bound conditifon is the sum. </p>\n\n<pre><code> public:\n vector&lt;long&gt;tree,clone;\n int countRangeSum(vector&lt;int&gt;&amp; nums, int lower, int upper) {\n int n=nums.size();\n vector&lt;long&gt;sum(n+1);\n for(int i=1;i&lt;=n;i++)\n sum[i]=sum[i-1]+nums[i-1];// step1\n\n clone=sum;\n sort(clone.begin(),clone.end());\n tree.resize(sum.size()+1);\n unordered_map&lt;long,int&gt;reflect;\n for(int i=0;i&lt;clone.size();i++)\n reflect[clone[i]]=i;//step2\n\n int res=0;\n for(int i=sum.size()-1;i&gt;=0;i--)\n {\n\n   int idx1=binarysearch(sum[i]+lower,true);\n   int idx2=binarysearch(sum[i]+upper,false);\n\n   res=res+count(idx2)-count(idx1);\n   add(reflect[sum[i]]); //step3\n }\n return res;\n }\n\n\n\n\n int binarysearch(long val, bool includeself)\n{  \nif(includeself)\nreturn lower_bound(clone.begin(),clone.end(),val)-clone.begin();\nreturn upper_bound(clone.begin(),clone.end(),val)-clone.begin();\n}\n\n\n\n\n\nvoid add(int pos){\npos=pos+1;\nwhile(pos&lt;tree.size())\n{\n    tree[pos]++;\n    pos=pos+(pos&amp;-pos);\n}\n}\n\n\n\n\nint count(int pos){\nint cnt=0;\npos=pos+1;\nwhile(pos&gt;0)\n{\n    cnt=cnt+tree[pos];\n    pos=pos-(pos&amp;-pos);\n}\nreturn cnt;\n}\n</code></pre>\n\n<p>Errors:\nInput:\n[-2,5,-1]\n-2\n2\nOutput:\n197\nExpected:\n3</p>\n\n<p>And I don't really know how to format my code, I always wrote c++ like this so..</p>\n\n<p>Sorry it gets a bit long, I thought it for several days still no clue where goes wrong. Any thought is appreciated!!</p>\n"}, {"tags": ["c++", "xml", "qt"], "answers": [{"tags": [], "owner": {"reputation": 620, "user_id": 3444217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/031b44a4e2bfde21506ae47bf108e2a1?s=128&d=identicon&r=PG&f=1", "display_name": "Clemens Sielaff", "link": "https://stackoverflow.com/users/3444217/clemens-sielaff"}, "is_accepted": true, "score": 1, "last_activity_date": 1469053924, "creation_date": 1469053924, "answer_id": 38491945, "question_id": 38491729, "link": "https://stackoverflow.com/questions/38491729/qt-c-xml-unexpected-character/38491945#38491945", "title": "Qt C++ XML Unexpected Character", "body": "<p>In cases like this, you can try the w3 XML validator: <a href=\"http://validator.w3.org/#validate_by_input\" rel=\"nofollow\">http://validator.w3.org/#validate_by_input</a> and see what happens.</p>\n\n<p>I pasted the code (without the error message):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ItemRow name=\"{0405d28e-fa16-443d-b70e-ba62efb60973}\" website=\"test\" login=\"test1\" password=\"test2\" category=\"No Category\"/&gt;\n&lt;ItemRow name=\"{69407bfb-ecbd-4456-abfb-08c19f5c4b19}\" website=\"test3\" login=\"test4\" password=\"test5\" category=\"No Category\"/&gt;\n</code></pre>\n\n<p>and got the message </p>\n\n<blockquote>\n  <p>Line 3, Column 126: document type does not allow element \"ItemRow\" here</p>\n</blockquote>\n\n<p>I think you are simply missing the root element of the XML structure.\nThe following XML is valid:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;root&gt;\n    &lt;ItemRow name=\"{0405d28e-fa16-443d-b70e-ba62efb60973}\" website=\"test\" login=\"test1\" password=\"test2\" category=\"No Category\"/&gt;\n    &lt;ItemRow name=\"{69407bfb-ecbd-4456-abfb-08c19f5c4b19}\" website=\"test3\" login=\"test4\" password=\"test5\" category=\"No Category\"/&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>For reference: <a href=\"http://www.w3schools.com/XML/xml_tree.asp\" rel=\"nofollow\">http://www.w3schools.com/XML/xml_tree.asp</a></p>\n"}], "owner": {"reputation": 648, "user_id": 5733045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99191d840da90ac75c139010561275e1?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5733045/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 38491945, "answer_count": 1, "score": 0, "last_activity_date": 1469053924, "creation_date": 1469052794, "question_id": 38491729, "link": "https://stackoverflow.com/questions/38491729/qt-c-xml-unexpected-character", "title": "Qt C++ XML Unexpected Character", "body": "<p>I've been trying to iterate through an xml file, but before doing so I have written this line of code:</p>\n\n<pre><code>if(!dom.setContent(&amp;file, &amp;error, &amp;line, &amp;column)) {\n     qDebug() &lt;&lt; \"Error:\" &lt;&lt; error &lt;&lt; \"in line \" &lt;&lt; line &lt;&lt; \"column\" &lt;&lt; column;\n}\n</code></pre>\n\n<p>For some reason it keeps returning</p>\n\n<pre><code>Error: \"unexpected character\" in line  2 column 2\n</code></pre>\n\n<p>This is my xml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ItemRow name=\"{0405d28e-fa16-443d-b70e-ba62efb60973}\" website=\"test\" login=\"test1\" password=\"test2\" category=\"No Category\"/&gt;\n&lt;(line 2 column 2 here)ItemRow name=\"{69407bfb-ecbd-4456-abfb-08c19f5c4b19}\" website=\"test3\" login=\"test4\" password=\"test5\" category=\"No Category\"/&gt;\n</code></pre>\n\n<p>I have been trying to fix this for hours and have made no progress, any suggestions are appreciated.</p>\n"}, {"tags": ["c++", "templates", "catch-unit-test"], "comments": [{"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469074532, "post_id": 38491608, "comment_id": 64390142, "body": "Short answer: Use functors: <a href=\"http://stackoverflow.com/questions/38494276/c-single-function-pointer-for-all-template-instances\" title=\"c single function pointer for all template instances\">stackoverflow.com/questions/38494276/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1469165815, "creation_date": 1469165815, "answer_id": 38518921, "question_id": 38491608, "link": "https://stackoverflow.com/questions/38491608/test-c-template-class-using-catch-framework/38518921#38518921", "title": "Test C++ template class using Catch framework", "body": "<p>\nThe problem with your macro is that, when it is expanded, it is expanded to a single line. Although I don't know your test framework in use, it is obvious that the macro does something comparable to this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct M { M(char* msg) { puts(msg); } }; // just an example class...\n#define INFO(m) M scopedMessage##__line__(msg)\n</code></pre>\n\n<p>So you will get multiple scopedMessage270 instances, if you use your macro RUN_ALL at line 270...</p>\n\n<p>You could work around the problem by replacing the macro with a template. Unfortunately, you cannot use this with template functions, so you will have to make your test cases template classes, too:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;template &lt;typename T, typename TT &gt; class Test &gt;\nstruct All\n{\n    template &lt;typename ... Parameters&gt;\n    static void run(Parameters ... parameters)\n    {\n        Test&lt;uint8_t, bool&gt;::run(parameters ...);\n        Test&lt;uint8_t, char&gt;::run(parameters ...);\n        Test&lt;uint16_t, bool&gt;::run(parameters ...);\n        Test&lt;uint16_t, char&gt;::run(parameters ...);\n        Test&lt;uint32_t, bool&gt;::run(parameters ...);\n        Test&lt;uint32_t, char&gt;::run(parameters ...);\n        Test&lt;uint64_t, bool&gt;::run(parameters ...);\n        Test&lt;uint64_t, char&gt;::run(parameters ...);\n    }\n};\n\ntemplate&lt;typename A, typename B&gt;\nstruct test_number_one\n{\n    static void run()\n    {\n        // log test name\n        // run the test\n    }\n};\ntemplate&lt;typename A, typename B&gt;\nstruct test_number_two\n{\n    static void run(int n)\n    {\n        // log test name and parameter value\n        // run the test\n    }\n};\n\nint main(int argc, char* argv[])\n{\n    All&lt;test_number_one&gt;::run();\n    All&lt;test_number_two&gt;::run(12);\n    All&lt;test_number_two&gt;::run(10);\n}\n</code></pre>\n\n<p>As now, within the template, all code lines remain on separate lines, you can place in between any logging just as you like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename ... Parameters&gt;\nstatic void run(Parameters ... parameters)\n{\n    INFO(\"uint8_t, bool\");\n    Test&lt;uint8_t, bool&gt;::run(parameters ...);\n    INFO(\"uint8_t, char\");\n    Test&lt;uint8_t, char&gt;::run(parameters ...);\n// ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1469206738, "post_id": 38530749, "comment_id": 64457394, "body": "Apart from being able to used as kind of stateful function pointer in templates, there is, under the hood, no real difference between an operator() and any other function... Your point: the outer templated function is nicer than my template class..."}], "tags": [], "owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "is_accepted": false, "score": 1, "last_activity_date": 1469202862, "last_edit_date": 1495541287, "creation_date": 1469202862, "answer_id": 38530749, "question_id": 38491608, "link": "https://stackoverflow.com/questions/38491608/test-c-template-class-using-catch-framework/38530749#38530749", "title": "Test C++ template class using Catch framework", "body": "<p>@Aconcagua is absolutely correct.  My solution is similar, but uses functors (As suggested by @R Sahu ---<a href=\"https://stackoverflow.com/questions/38494276/c-single-function-pointer-for-all-template-instances\">C++ Single function pointer for all template instances</a>)</p>\n\n<pre><code>template&lt;template&lt;typename, typename&gt; class TestFunctor, typename... Parameters&gt;\nvoid testAllTypes(Parameters... parameters) {\n\n  INFO(\"Testing &lt;uint8_t, bool&gt;\");\n  TestFunctor&lt;uint8_t, bool&gt;()(parameters...);\n  INFO(\"Testing &lt;uint8_t, char&gt;\");\n  TestFunctor&lt;uint8_t, char&gt;()(parameters...);\n\n  // ...\n}\n\ntemplate&lt;typename A, typename B&gt;\nstruct testDefaultConstructor {\n  void operator()() {\n    mallGraph&lt;A, B&gt; sg;\n    REQUIRE(sg.numVertices() == 0);\n    REQUIRE_FALSE(sg.edgecountIsValid());\n    REQUIRE_FALSE(sg.adjacencyMatrixIsValid());        \n  }\n};\n\n\nTEST_CASE(\"SmallGraph::SmallGraph() initializes instance data as expected\", \"[SmallGraph]\") {\n  testAllTypes&lt;testDefaultConstructor&gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "accepted_answer_id": 38518921, "answer_count": 2, "score": 0, "last_activity_date": 1469202862, "creation_date": 1469052172, "question_id": 38491608, "link": "https://stackoverflow.com/questions/38491608/test-c-template-class-using-catch-framework", "title": "Test C++ template class using Catch framework", "body": "<p>I'm looking for a good way to use Catch to test a templated class. I have something that almost works:</p>\n\n<pre><code>#define RUN_ALL(fn, params)  \\\nfn&lt;uint8_t, bool&gt;(params);  \\\nfn&lt;uint8_t, char&gt;(params);  \\\nfn&lt;uint16_t, bool&gt;(params); \\\nfn&lt;uint16_t, char&gt;(params); \\\nfn&lt;uint32_t, bool&gt;(params); \\\nfn&lt;uint32_t, char&gt;(params); \\\nfn&lt;uint64_t, bool&gt;(params); \\\nfn&lt;uint64_t, char&gt;(params);\n\ntemplate&lt;typename A, typename B&gt;\nvoid test_number_one() {\n   REQUIRE(...)\n} \n\nTEST_CASE(\"Foo::Foo() works nicely\", \"[SmallGraph]\") {\n  RUN_ALL(test_number_one)\n}\n</code></pre>\n\n<p>This setup will run only until the first failure, which is fine because it is highly likely that all 8 cases will fail the same way.  However, it would be nice to know which set of template arguments are in use when a failure occurs.  My idea is to do this:</p>\n\n<pre><code>#define RUN_ALL_P(fn, params)  \\\nINFO(\"Testing &lt;uint8_t, bool&gt;\"); \\\nfn&lt;uint8_t, bool&gt;(params);  \\\nINFO(\"Testing &lt;uint8_t, char&gt;\"); \\\nfn&lt;uint8_t, char&gt;(params);  \\\nINFO(\"Testing &lt;uint16_t, bool&gt;\"); \\\nfn&lt;uint16_t, bool&gt;(params); \\\n...\n</code></pre>\n\n<p>However, I can't use more than one INFO in RUN_ALL because doing so generates code with a duplicate identifier.</p>\n\n<pre><code>FOO.cpp:270:3: error: redefinition of 'scopedMessage270'\n  RUN_ALL(test_number_one);\n</code></pre>\n\n<p>(<code>RUN_ALL(test_number_one)</code> appears on line 270.)</p>\n\n<p>Any ideas for a workaround that doesn't require all test functions to the same signature? </p>\n\n<p>(I would also welcome pointers to articles about testing template code using CATCH, as well as suggestions on how to search for such articles without getting a bunch of results about general exception handling -- i.e., try/catch.)</p>\n"}, {"tags": ["c++", "qt", "qt5", "qt5.7"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1469056812, "post_id": 38491520, "comment_id": 64386096, "body": "I would say you should not expect sensible comparison between QVariants, but anyhow I strongly suspect it&#39;s a bug, cf the implementation: <a href=\"https://code.woboq.org/qt5/qtbase/src/corelib/kernel/qvariant.cpp.html#_ZNK8QVariant7compareERKS_\" rel=\"nofollow noreferrer\">code.woboq.org/qt5/qtbase/src/corelib/kernel/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 620, "user_id": 3444217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/031b44a4e2bfde21506ae47bf108e2a1?s=128&d=identicon&r=PG&f=1", "display_name": "Clemens Sielaff", "link": "https://stackoverflow.com/users/3444217/clemens-sielaff"}, "is_accepted": true, "score": 2, "last_activity_date": 1469185874, "last_edit_date": 1469185874, "creation_date": 1469057349, "answer_id": 38492467, "question_id": 38491520, "link": "https://stackoverflow.com/questions/38491520/qvariants-with-qstringlist-comparison/38492467#38492467", "title": "QVariants with QStringList comparison", "body": "<p>Nice one.</p>\n\n<p>Here is the exact line in the Qt source code that produces this behaviour: <a href=\"https://github.com/qt/qtbase/blob/4e41babd0337473a1078d3a5f3367cc1fc5f2935/src/corelib/kernel/qvariant.cpp#L3564\" rel=\"nofollow\">https://github.com/qt/qtbase/blob/4e41babd0337473a1078d3a5f3367cc1fc5f2935/src/corelib/kernel/qvariant.cpp#L3564</a></p>\n\n<p>There is no special case for QStringList, therefore QVariant::toString() is called, which returns an empty string if there are no, or more than one entries in the QStringList, or the first entry if there is just the one.</p>\n\n<p>Comparing two empty strings returns 0. Comparing two QVariant with one entry each results in the comparison on both strings and comparing two QVariant with more than one entry causes the type to be compared, yielding a return value of 1 in all cases, which results in <code>&lt;</code> always returning <code>false</code> and <code>&gt;</code> always <code>true</code>.</p>\n\n<p>Looks like a bug to me.</p>\n\n<p>Examples:</p>\n\n<pre><code>// expected behaviour when both have a single entry\nQStringList l, m;\nl &lt;&lt; \"0\";\nm &lt;&lt; \"1\";\nQVariant less(l);\nQVariant more(m);\nless &lt; more; // true\nless &gt; more; // false\n\nQStringList l, m;\nl &lt;&lt; \"1\";\nm &lt;&lt; \"0\";\nQVariant less(l);\nQVariant more(m);\nless &lt; more; // false\nless &gt; more; // true\n\n// ... or both have no entry\nQStringList l, m;\nQVariant less(l);\nQVariant more(m);\nless &lt; more; // false\nmore &lt; less; // false\nmore == less; // true\n\n// otherwise, things get weird\nQStringList l, m;\nl &lt;&lt; \"0\" &lt;&lt; \"1\";\nm &lt;&lt; \"2\" &lt;&lt; \"3\";\nQVariant less(l);\nQVariant more(m);\nless &lt; more; // false\nmore &lt; less; // false\nless &gt; more; // true\nmore &gt; less; // true\nless == more; // false\n\nQStringList l, m;\nm &lt;&lt; \"2\" &lt;&lt; \"3\";\nQVariant less(l);\nQVariant more(m);\nless &lt; more; // false\nmore &lt; less; // false\nless &gt; more; // true\nmore &gt; less; // true\nless == more; // false\n</code></pre>\n\n<p>etc.</p>\n\n<hr>\n\n<p>Edit: pushed a fix explicitly comparing QStringLists in QVariants: <a href=\"https://codereview.qt-project.org/#/c/165886/1\" rel=\"nofollow\">https://codereview.qt-project.org/#/c/165886/1</a></p>\n"}], "owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 38492467, "answer_count": 1, "score": 1, "last_activity_date": 1487199908, "creation_date": 1469051794, "last_edit_date": 1487199908, "question_id": 38491520, "link": "https://stackoverflow.com/questions/38491520/qvariants-with-qstringlist-comparison", "title": "QVariants with QStringList comparison", "body": "<p>I'm having weird observations when comparing <code>QVariant</code>s with <code>QStringList</code>s inside.</p>\n\n<p>Code:</p>\n\n<pre><code>QStringList l1, l2;\n\nl1 &lt;&lt; \"\";\nl2 &lt;&lt; \"33\" &lt;&lt; \"434\";\n\nconst bool le = l1 &lt; l2;\nconst bool ge = l1 &gt; l2;\nconst bool eq = l1 == l2;\n\nQVariant v1(l1), v2(l2);\n\nconst bool vle = v1 &lt; v2;\nconst bool vge = v1 &gt; v2;\nconst bool veq = v1 == v2;\n</code></pre>\n\n<p>When I modify <code>l1</code> my comparison results (<code>le</code>, <code>ge</code> and <code>eq</code>) have expected values. But it doesn't affect results for variants at all. I always get <code>vge</code> == true, <code>vle</code> and <code>veq</code> are always false. </p>\n\n<p>Docs say it should work. Am I wrong somewhere or is it Qt bug?\nI'm using Qt5.7.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I've filled a bug report for this issue: <a href=\"https://bugreports.qt.io/browse/QTBUG-54893\" rel=\"nofollow noreferrer\">https://bugreports.qt.io/browse/QTBUG-54893</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1469051459, "post_id": 38491428, "comment_id": 64384450, "body": "Have a look at <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">c++ lambda expressions</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1469051671, "post_id": 38491428, "comment_id": 64384524, "body": "As for your question title, I&#39;m pretty sure it is possible. There are rarely patterns that can&#39;t be implemented in c++."}, {"owner": {"reputation": 67, "user_id": 6121523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac16319cf5f3bfc16549ee6da67c99ad?s=128&d=identicon&r=PG&f=1", "display_name": "E.Hamed", "link": "https://stackoverflow.com/users/6121523/e-hamed"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469051737, "post_id": 38491428, "comment_id": 64384534, "body": "thank you. I found your link useful.. i think people hate that question so that i might delete it . but thank you !"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1469051790, "post_id": 38491428, "comment_id": 64384554, "body": "<a href=\"http://coliru.stacked-crooked.com/a/11450c085f3f1ece\" rel=\"nofollow noreferrer\">auto lambdas are your friend</a>"}, {"owner": {"reputation": 67, "user_id": 6121523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac16319cf5f3bfc16549ee6da67c99ad?s=128&d=identicon&r=PG&f=1", "display_name": "E.Hamed", "link": "https://stackoverflow.com/users/6121523/e-hamed"}, "edited": false, "score": 0, "creation_date": 1469051859, "post_id": 38491428, "comment_id": 64384573, "body": "yeah thank you a lot for that, please put it as an answer to close it !"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1469054479, "post_id": 38491428, "comment_id": 64385446, "body": "Is it possible? Yes. May you need to do some work to reach the goal? Yes. Sorry, but I really hate these obvious &quot;can it be done&#39; questions. The answer is always in 99.999pct of the case &quot; yes, of course, if you just know how&quot;."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1469113956, "post_id": 38491428, "comment_id": 64414003, "body": "@E.Hamed I&#39;ve edited your question in an attempt to improve the clarity and (hopefully) the question quality. If you disagree that the question has been improved or think that it now deviates from your original intent, either you can ask me to roll it back, or do so yourself."}, {"owner": {"reputation": 67, "user_id": 6121523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac16319cf5f3bfc16549ee6da67c99ad?s=128&d=identicon&r=PG&f=1", "display_name": "E.Hamed", "link": "https://stackoverflow.com/users/6121523/e-hamed"}, "edited": false, "score": 0, "creation_date": 1469819541, "post_id": 38491428, "comment_id": 64712929, "body": "jaggedSpire, it&#39;s great, thank you, and sorry for not clarifying my question"}], "answers": [{"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 0, "last_activity_date": 1469051883, "last_edit_date": 1469051883, "creation_date": 1469051540, "answer_id": 38491473, "question_id": 38491428, "link": "https://stackoverflow.com/questions/38491428/how-can-i-compose-a-pair-of-functions-in-c/38491473#38491473", "title": "How can I compose a pair of functions in C++?", "body": "<p>A very simple implementation:</p>\n\n<pre><code>template &lt;class F, class G, class T&gt;\nauto compose(F f, G g, T x)\n{\n  return f(g(x));\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>auto foo(int x)\n{\n  return x + 1;\n}\n\nauto bar(int x)\n{\n  return x * 2;\n}\n\nauto test()\n{\n  return compose(foo, bar, 24);\n}\n</code></pre>\n\n<p>It can be optimized to move the argument.</p>\n\n<hr>\n\n<p>If you want a lambda for <code>foo</code> and <code>bar</code> specifically:</p>\n\n<pre><code>auto compose = [](auto x) { return foo(bar(x)); }\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>cout &lt;&lt; compose(24);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": true, "score": 5, "last_activity_date": 1469052605, "last_edit_date": 1469052605, "creation_date": 1469051996, "answer_id": 38491573, "question_id": 38491428, "link": "https://stackoverflow.com/questions/38491428/how-can-i-compose-a-pair-of-functions-in-c/38491573#38491573", "title": "How can I compose a pair of functions in C++?", "body": "<p>Yes, with very much similar syntax:</p>\n\n<pre><code>auto compose = [](auto f, auto g){\n    return [f,g](auto x){return f(g(x));};\n};\n\nauto square = [](auto i){return i * i;};\n\nauto inc = [](auto i){return i + 1;};\n\ncompose(square, inc)(6); // result is 49\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/11450c085f3f1ece\" rel=\"nofollow\">Live on coliru</a></p>\n\n<p>The <code>[](auto arg){}</code> is a <em>generic lambda</em>, and you may read more about them (and non-generic lambdas) on <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow\">cppreference's page on lambdas</a>. Unlike lambdas with a specified argument type (<code>[](int arg){}</code>), they act like a functor with a templated <code>operator()</code>, and thus allow their argument type to be deduced where it's used.</p>\n"}], "owner": {"reputation": 67, "user_id": 6121523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac16319cf5f3bfc16549ee6da67c99ad?s=128&d=identicon&r=PG&f=1", "display_name": "E.Hamed", "link": "https://stackoverflow.com/users/6121523/e-hamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 3, "closed_date": 1469055267, "accepted_answer_id": 38491573, "answer_count": 2, "score": -4, "last_activity_date": 1469111099, "creation_date": 1469051320, "last_edit_date": 1469111099, "question_id": 38491428, "link": "https://stackoverflow.com/questions/38491428/how-can-i-compose-a-pair-of-functions-in-c", "closed_reason": "Needs details or clarity", "title": "How can I compose a pair of functions in C++?", "body": "<p>Let <code>f</code> and <code>g</code> be two one-argument functions. The composition <code>f</code> after <code>g</code> is defined to be the function <code>x \\mapsto f(g(x))</code>. </p>\n\n<p>Say the  procedure <code>compose</code> implements composition. As an example, if <code>inc</code> is a procedure that adds 1 to its argument and <code>square</code> squares its argument,\n<code>((compose square inc) 6)</code>\nevaluates to 49.</p>\n\n<p>The solution is straightforward. It looks very much like its mathematical analogue:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(define (compose f g)\n  (lambda (x) (f (g x))))\nLet's test:\n(define (square x) (* x x))\n\n(define (inc x) (+ x 1))\n\n((compose square inc) 6)\nOutput:\n 49\n</code></pre>\n\n<p>How can I implement composition using C++ ? Is it possible to write the arguments like that and have the function implement itself?</p>\n"}, {"tags": ["c++", "qt", "qthread"], "answers": [{"tags": [], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "is_accepted": true, "score": 2, "last_activity_date": 1469127888, "creation_date": 1469127888, "answer_id": 38512449, "question_id": 38491359, "link": "https://stackoverflow.com/questions/38491359/the-qprogressdialog-is-not-closing/38512449#38512449", "title": "The QProgressDialog is not closing", "body": "<p>I solved the problem by adding the following attribute to my progress dialog:</p>\n\n<pre><code>progressDialog-&gt;setAttribute(Qt::WA_DeleteOnClose, true);\n</code></pre>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 38512449, "answer_count": 1, "score": 0, "last_activity_date": 1469127888, "creation_date": 1469051022, "last_edit_date": 1469105951, "question_id": 38491359, "link": "https://stackoverflow.com/questions/38491359/the-qprogressdialog-is-not-closing", "title": "The QProgressDialog is not closing", "body": "<p>I'm having some trouble with a <strong>QProgressDialog</strong> on my app.</p>\n\n<p>When the user clicks on a calculation button, I show a <strong>QProgressDialog</strong> that is updated from a <strong>QThread</strong> (I don't think this is related to the problem), and when this <strong>QThread</strong> finishes I call a function that closes the <strong>QProgressDialog</strong>.</p>\n\n<pre><code>progressDialog-&gt;setValue(100);\nprogressDialog-&gt;close();\n</code></pre>\n\n<p>It seems to be working.</p>\n\n<p>But if the user clicks on the calculation button and minimizes the app (main window), the <strong>QProgressDialog</strong> don't close:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MphEd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MphEd.png\" alt=\"enter image description here\"></a></p>\n\n<p>I already checked and the code is reaching on the command:</p>\n\n<pre><code>progressDialog-&gt;close();\n</code></pre>\n\n<p>I don't know what is happening, can someone help me?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "logging", "boost", "logstash", "boost-logging"], "owner": {"reputation": 31, "user_id": 6615813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cda07dd7d3c31d2b64587eed6ebe764?s=128&d=identicon&r=PG&f=1", "display_name": "foxfoot", "link": "https://stackoverflow.com/users/6615813/foxfoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469556104, "creation_date": 1469050582, "last_edit_date": 1469556104, "question_id": 38491267, "link": "https://stackoverflow.com/questions/38491267/in-boostlog-how-to-re-connect-to-a-remote-server-like-logstash", "title": "In boost::log, how to re-connect to a remote server (like logstash)?", "body": "<p>By using <code>boost::asio::ip::tcp::iostream</code> and <code>boost::log</code>, I am trying to send log records to a remote server like logstash. But I need to handle the network disconnection/reconnection. Unfortunately, I did not find any way for <code>tcp::iostream</code>. </p>\n\n<ol>\n<li>Is it possible to get a notification or exception when the tcp connection is broken?</li>\n<li>Can I use <code>ip::tcp::socket</code> instead of <code>tcp::iostream</code> in <code>boost::log</code>?\nThank you.</li>\n</ol>\n\n<p>My code looks like:</p>\n\n<pre><code>typedef boost::log::sinks::asynchronous_sink&lt; boost::log::sinks::text_ostream_backend &gt; tcp_sink;\nboost::shared_ptr&lt; tcp_sink &gt; networkSink;\n\n// init tcp stream\nboost::shared_ptr&lt; sinks::text_ostream_backend &gt; backend =\n    boost::make_shared&lt; sinks::text_ostream_backend &gt;();\n\nboost::shared_ptr&lt; boost::asio::ip::tcp::iostream &gt; stream =    boost::make_shared&lt; boost::asio::ip::tcp::iostream &gt;();\nstream-&gt;connect(\"logstash\", \"1111\");\n\n\nbackend-&gt;add_stream(stream);\n\nnetworkSink = boost::make_shared&lt; tcp_sink &gt;();\nnetworkSink-&gt;set_formatter(fmt);\nnetworkSink-&gt;set_filter(severity &lt;= severityThreshold); \nnetworkSink = boost::make_shared&lt;tcp_sink&gt;(backend );\nlogging::core::get()-&gt;add_sink(networkSink);\n</code></pre>\n"}, {"tags": ["c++", "exception", "vector"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1469050704, "post_id": 38491252, "comment_id": 64384139, "body": "Assuming for the moment the implied, unasked question here is &quot;Why am I getting a subscript-out-of-range error, this is what a <i>debugger</i> is made for. Until such time as you have solid coverage of unit tests that breed high-confidence your subscripts will always be in-range, I suggest you 1. use <code>.at()</code> instead of the subscripting <code>operator[]</code> for your vectors, and 2. <i>use a debugger</i>."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469051080, "post_id": 38491252, "comment_id": 64384283, "body": "You&#39;re erasing <code>ennemies[i]</code> but leaving the value of <code>i</code> unchanged. If the last enemy in the list is erased, next loop iteration you&#39;ll be beyond the bounds of the vector. Also, &quot;enemies&quot; only has one &#39;n&#39;."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469051325, "post_id": 38491252, "comment_id": 64384390, "body": "@JonathanPotter same with <code>bullets</code>. If you want to remove items from a container while looping through it, you need to use iterators instead of indexes. <code>erase()</code> returns a new iterator that points to the item after the erased item, so you can continue looping."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1469051394, "post_id": 38491252, "comment_id": 64384421, "body": "@RemyLebeau I think <code>bullets</code> is ok (in terms of out-of-bounds access) because the loop evaluates the vector size each time through. Of course results may be inconsistent."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469051473, "post_id": 38491252, "comment_id": 64384457, "body": "@JonathanPotter the loops through <code>bullets</code> are also affected by index mis-management."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6615623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/08cd4cf820f05e5504ff632956765c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Salin", "link": "https://stackoverflow.com/users/6615623/salin"}, "edited": false, "score": 0, "creation_date": 1469055194, "post_id": 38491627, "comment_id": 64385637, "body": "Hey, thanks for help. :) You realy helped me with my issue. I have never thought that i can fix it like this, especially that i didn&#39;t know smth. like &quot;iterator &quot; before. I think that the 1st sollution is much simppler . Anyway once again thanks for the effort."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1469054156, "last_edit_date": 1469054156, "creation_date": 1469052251, "answer_id": 38491627, "question_id": 38491252, "link": "https://stackoverflow.com/questions/38491252/vector-subscript-out-of-range/38491627#38491627", "title": "Vector subscript out of range", "body": "<p>All of your loops that are calling <code>erase()</code> on containers are not taking into account that the size of the containers change when you erase items from them. To <em>properly</em> loop through a container <em>while</em> erasing items from it, you should use iterators instead of indexes. <code>erase()</code> returns a new iterator that points to the item after the erased item, so you can continue looping.</p>\n\n<pre><code>std::vector&lt;enemy&gt;::iterator i = ennemies.begin();\nwhile (i != ennemies.end())\n{\n    i-&gt;update(player);\n\n    if (player.getGlobalBounds().intersects(i-&gt;getGlobalBounds()))\n    {\n        player.kill();\n    }\n\n    bool hit = false;\n    for (std::vector&lt;bullet&gt;::iterator j = bullets.begin(); j != bullets.end); ++j)\n    {\n        if (i-&gt;getGlobalBounds().intersects(j-&gt;getGlobalBounds()))\n        {\n            hit = true;\n            i = ennemies.erase(i);\n            j = bullets.erase(j);\n            ilosc--;\n            break;\n        }\n    }\n\n    if (!hit)\n        ++i;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>for (int i = 0; i &lt; Level::LEVEL_HEIGHT; i++)\n{\n    for (int j = 0; j &lt; Level::LEVEL_WIDTH; j++)\n    {\n        if (level.tiles[i][j].tileType != 0)\n        {\n            if (x.intersects(map[i][j].getGlobalBounds()))\n                kolX = true;\n            else if (y.intersects(map[i][j].getGlobalBounds()))\n                kolY = true;\n\n            std::vector&lt;bullet&gt;::iterator k = bullets.begin();\n            while (k != bullets.end())\n            {\n                if (k-&gt;getGlobalBounds().intersects(map[i][j].getGlobalBounds()))\n                {\n                    k = bullets.erase(k);\n                    ilosc--;\n                }\n                else\n                    ++k;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>With that said, you might consider using <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow\"><code>std::remove_if()</code></a> instead of manual <code>erase()</code> loops:</p>\n\n<pre><code>template&lt;typename SourceType, typename TargetType&gt;\nstruct intersectsBounds\n{\n    TargetType &amp;m_target;\n\n    intersectsBounds(TargetType &amp;target) : m_target(target) {}\n\n    bool operator()(const SourceType &amp;source) const\n    {\n        return source.getGlobalBounds().intersects(m_target.getGlobalBounds());\n    }\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>std::vector&lt;enemy&gt;::iterator i = ennemies.begin();\nwhile (i != ennemies.end())\n{\n    i-&gt;update(player);\n\n    if (player.getGlobalBounds().intersects(i-&gt;getGlobalBounds()))\n    {\n        player.kill();\n    }\n\n    std::vector&lt;bullet&gt;::iterator j = std::remove_if(bullets.begin(), bullets.end(), intersectsBounds(*i));\n    if (j != bullets.end())\n    {\n        i = ennemies.erase(i);\n\n        int numErased = std::distance(j, bullets.end());\n        bullets.erase(j, bullets.end());\n        ilosc -= numErased;\n    }\n    else\n        ++i;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>for (int i = 0; i &lt; Level::LEVEL_HEIGHT; i++)\n{\n    for (int j = 0; j &lt; Level::LEVEL_WIDTH; j++)\n    {\n        if (level.tiles[i][j].tileType != 0)\n        {\n            if (x.intersects(map[i][j].getGlobalBounds()))\n                kolX = true;\n            else if (y.intersects(map[i][j].getGlobalBounds()))\n                kolY = true;\n\n            std::vector&lt;bullet&gt;::iterator k = std::remove_if(bullets.begin(), bullets.end(), intersectsBounds(map[i][j]));\n            if (k != bullets.end())\n            {\n                int numErased = std::distance(k, bullets.end());\n                bullets.erase(k, bullets.end());\n                ilosc -= numErased;\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6615623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/08cd4cf820f05e5504ff632956765c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Salin", "link": "https://stackoverflow.com/users/6615623/salin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 1, "accepted_answer_id": 38491627, "answer_count": 1, "score": -3, "last_activity_date": 1469054156, "creation_date": 1469050526, "question_id": 38491252, "link": "https://stackoverflow.com/questions/38491252/vector-subscript-out-of-range", "title": "Vector subscript out of range", "body": "<p>i have a little problem with my game. When i'm trying to check that the bullet and ennemy are colliding i'm randomly getting an error \"Vector subscript out of range\", im not sure that this is a problem, but i'm deleting my vector in two places:</p>\n\n<pre><code>//Checking if enemy is crossing a bullet\n        for (size_t i = 0; i &lt; ennemies.size(); i++)\n        {\n            ennemies[i].update(player);\n\n            if (player.getGlobalBounds().intersects(ennemies[i].getGlobalBounds()))\n            {\n                player.kill();\n            }\n\n            for (size_t j = 0; j &lt; bullets.size(); j++)\n            {\n                if (ennemies[i].getGlobalBounds().intersects(bullets[j].getGlobalBounds()))\n                {\n                    ennemies.erase(ennemies.begin() + i);\n                    bullets.erase(bullets.begin() + j);\n                    ilosc--;\n                }\n            }\n        }\n</code></pre>\n\n<p>Here is the second place:</p>\n\n<pre><code>for (int i = 0; i &lt; Level::LEVEL_HEIGHT; i++)\n{\n    for (int j = 0; j &lt; Level::LEVEL_WIDTH; j++)\n    {\n        if (level.tiles[i][j].tileType != 0)\n        {\n            if (x.intersects(map[i][j].getGlobalBounds()))\n                kolX = true;\n            else if (y.intersects(map[i][j].getGlobalBounds()))\n                kolY = true;\n\n            for (int k = 0; k &lt; bullets.size(); k++)\n            {\n                if (bullets[k].getGlobalBounds().intersects(map[i][j].getGlobalBounds()))\n                {\n                    bullets.erase(bullets.begin() + k);\n                    ilosc--;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>and here is the whole code of a main class:</p>\n\n<pre><code>    #include \"Engine.h\"\n\nEngine::Engine()\n{\n    //wczytywanie bg\n    bgTexture.loadFromFile(\"data\\\\textures\\\\bg.png\");\n    bgSprite.setTexture(bgTexture);\n\n    //wczytywanie textur\n    for (int i = 1; i &lt; level.iloscTextur; i++)\n    {\n        tiles[i].loadFromFile(\"data\\\\textures\\\\tiles.png\", IntRect((i-1)*level.TILE_WIDTH, 0, 32, 32));\n    }\n\n    //ustawianie kafli\n    for (int i = 0; i &lt; Level::LEVEL_HEIGHT; i++)\n    {\n        for (int j = 0; j &lt; Level::LEVEL_WIDTH; j++)\n        {\n            if (level.tiles[i][j].tileType != 0)\n            {\n                map[i][j].setPosition(j * Level::TILE_WIDTH, i * Level::TILE_HEIGHT);\n                map[i][j].setTexture(tiles[level.tiles[i][j].tileType]);\n            }\n        }\n    }\n}\n\nEngine::~Engine()\n{\n\n}\n\n//Renderowany poziom gry\n\nvoid Engine::runEngine(RenderWindow &amp; window)\n{\n    //Zegary do p\u0119tli sta\u0142okrokowej, pocisk\u00f3w i przeciwnik\u00f3w\n    Time UpdateTime = Time::Zero;\n    Time czasOdPocisku = Time::Zero;\n    Time czasDoSpawnu = Time::Zero;\n\n    Clock przeciwnicy;\n    Clock zegar;\n    Clock czasPocisku;\n\n    const Time StepTime = seconds(1.f / 60.f);\n    const Time WaitTime = seconds(0.1);\n    Time EnemySpawn = enemy.losujSpawn();\n\n    bool menu = false;\n\n    while (!menu)\n    {\n        Time czas = zegar.restart();\n        UpdateTime += czas;\n\n        //P\u0119tla aktualizujaca logik\u0119 gry\n\n        while (UpdateTime &gt; StepTime)\n        {\n            czasOdPocisku = czasPocisku.getElapsedTime();\n            czasDoSpawnu = przeciwnicy.getElapsedTime();\n\n            UpdateTime -= StepTime;\n            Event event;\n            Vector2f mouse = window.mapPixelToCoords(Mouse::getPosition(window));   \n\n            player.update(mouse);\n\n            if (window.pollEvent(event))\n            {\n                if (event.type == Event::Closed)\n                    menu = true;\n\n                if ((Keyboard::isKeyPressed(Keyboard::Left) &amp;&amp; WaitTime &lt; czasOdPocisku) || (Keyboard::isKeyPressed(Keyboard::Right) &amp;&amp; WaitTime &lt; czasOdPocisku) ||\n                    (Keyboard::isKeyPressed(Keyboard::Up) &amp;&amp; WaitTime &lt; czasOdPocisku) || (Keyboard::isKeyPressed(Keyboard::Down) &amp;&amp; WaitTime &lt; czasOdPocisku))\n                {\n                    czasPocisku.restart();\n\n                    bullets.push_back(bullet);\n                    bullets[ilosc].addBullet(player);\n                    ilosc++;\n                }\n            }\n\n            //Spawn przeciwnik\u00f3w\n\n\n            if (EnemySpawn &lt; czasDoSpawnu)\n            {\n                czasDoSpawnu = przeciwnicy.restart();\n                EnemySpawn = enemy.losujSpawn();\n                for (int i = 0; i &lt; enemy.losujPrzeciwnikow(); i++)\n                    ennemies.push_back(enemy);\n            }\n\n            //aktualizacje logiki\n\n            for (int i = 0; i &lt; bullets.size(); i++)\n            {\n                bullets[i].update();\n            }\n\n            //Checking if enemy is crossing a bullet\n            for (size_t i = 0; i &lt; ennemies.size(); i++)\n            {\n                ennemies[i].update(player);\n\n                if (player.getGlobalBounds().intersects(ennemies[i].getGlobalBounds()))\n                {\n                    player.kill();\n                }\n\n                for (size_t j = 0; j &lt; bullets.size(); j++)\n                {\n                    if (ennemies[i].getGlobalBounds().intersects(bullets[j].getGlobalBounds()))\n                    {\n                        ennemies.erase(ennemies.begin() + i);\n                        bullets.erase(bullets.begin() + j);\n                        ilosc--;\n                    }\n                }\n            }\n            czyKoliduje(player.ruch(StepTime));\n        }\n\n        window.clear();\n        window.draw(bgSprite);\n\n        //Rysowanie poziomu\n\n        for (int i = 0; i &lt; Level::LEVEL_HEIGHT; i++)\n        {\n            for (int j = 0; j &lt; Level::LEVEL_WIDTH; j++)\n            {\n                window.draw(map[i][j]);\n            }\n        }\n\n        //Rysowanie pociskow\n\n        for (int i = 0; i &lt; bullets.size(); i++)\n        {\n            window.draw(bullets[i]);\n        }   \n\n        for (int i = 0; i &lt; ennemies.size(); i++)\n        {\n            window.draw(ennemies[i]);\n        }\n\n        window.draw(player);\n        window.display();\n    }\n}\n\n//Kolizje\n\nvoid Engine::czyKoliduje(Vector2f ruch)\n{\n\n    FloatRect x = player.getGlobalBounds();\n    FloatRect y = player.getGlobalBounds();\n\n    x.left += ruch.x;\n    y.top += ruch.y;\n\n    bool kolY = false, kolX = false;\n\n    for (int i = 0; i &lt; Level::LEVEL_HEIGHT; i++)\n    {\n        for (int j = 0; j &lt; Level::LEVEL_WIDTH; j++)\n        {\n            if (level.tiles[i][j].tileType != 0)\n            {\n                if (x.intersects(map[i][j].getGlobalBounds()))\n                    kolX = true;\n                else if (y.intersects(map[i][j].getGlobalBounds()))\n                    kolY = true;\n\n                for (int k = 0; k &lt; bullets.size(); k++)\n                {\n                    if (bullets[k].getGlobalBounds().intersects(map[i][j].getGlobalBounds()))\n                    {\n                        bullets.erase(bullets.begin() + k);\n                        ilosc--;\n                    }\n                }\n            }\n        }\n    }\n\n    if (!kolX)\n        player.move(Vector2f(ruch.x, 0));\n    if (!kolY)\n        player.move(Vector2f(0, ruch.y));\n}\n</code></pre>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1469054262, "post_id": 38491912, "comment_id": 64385386, "body": "Or just abuse the template argument list with a constant leading non-type argument and a similar specialization, <a href=\"http://ideone.com/5qttEV\" rel=\"nofollow noreferrer\">such as this</a>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1469053754, "last_edit_date": 1495542154, "creation_date": 1469053754, "answer_id": 38491912, "question_id": 38491250, "link": "https://stackoverflow.com/questions/38491250/error-when-trying-to-expand-template-parameter-pack/38491912#38491912", "title": "Error when trying to expand template parameter pack", "body": "<p>You have:</p>\n\n<pre><code>// function that is not a template\nvoid StoreArguments() {}\n\n// function template that takes N+1 types\ntemplate &lt;typename Arg, typename... Args&gt;\nvoid StoreArguments() {\n    parameter_types.push_back(ClassInfo&lt;Arg&gt;::GetClassKey());\n\n    // call function template that takes N types\n    StoreArguments&lt;Args...&gt;();\n}\n</code></pre>\n\n<p>Hopefully the comments I added make this clear... you're recursing from a function template taking N+1 types to a function template taking N types. The base case there is a function template taking 0 types. You don't have that, you have a nullary function - which won't be considered. </p>\n\n<p>Your approaches are either to lift your types into values, so your base case actually <em>is</em> a nullary function:</p>\n\n<pre><code>template &lt;class T&gt; struct tag { using type = T; };\n\nvoid StoreArgumentsImpl() { }\n\ntemplate &lt;typename Arg, typename... Tags&gt;\nvoid StoreArgumentsImpl(tag&lt;Arg&gt;, Tags... tags) {\n    parameter_types.push_back(ClassInfo&lt;Arg&gt;::GetClassKey());\n\n    StoreArgumentsImpl(tags...);\n}\n\ntemplate &lt;typename... Args&gt;\nvoid StoreArguments() {\n    StoreArgumentsImpl(tag&lt;Args&gt;{}...);\n}\n</code></pre>\n\n<p>Or do everything in a single function with the <a href=\"https://stackoverflow.com/a/25683817/2069064\">expander trick</a>:</p>\n\n<pre><code>template &lt;typename... Args&gt;\nvoid StoreArguments() {\n    using expander = int[];\n    (void)expander{0,\n        (void(\n           parameter_types.push_back(ClassInfo&lt;Args&gt;::GetClassKey())\n        ), 0)...\n    };\n}\n</code></pre>\n\n<p>Or, in C++17 (can't wait), with fold expressions:</p>\n\n<pre><code>template &lt;typename... Args&gt;\nvoid StoreArguments() {\n    (parameter_types.push_back(ClassInfo&lt;Args&gt;::GetClassKey()), ...);\n}\n</code></pre>\n\n<p>Or, also in C++17, with if constexpr (though this will not work with <em>no</em> arguments):</p>\n\n<pre><code>template &lt;typename Arg, typename... Args&gt;\nvoid StoreArguments() {\n    parameter_types.push_back(ClassInfo&lt;Args&gt;::GetClassKey());\n\n    if constexpr(sizeof...(Args) &gt; 0) {\n        StoreArguments&lt;Args...&gt;();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4781381, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_JbTjNpfV7E/AAAAAAAAAAI/AAAAAAAAATA/RieevT4Sakk/photo.jpg?sz=128", "display_name": "mitchk", "link": "https://stackoverflow.com/users/4781381/mitchk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 38491912, "answer_count": 1, "score": 2, "last_activity_date": 1469053761, "creation_date": 1469050519, "last_edit_date": 1469053761, "question_id": 38491250, "link": "https://stackoverflow.com/questions/38491250/error-when-trying-to-expand-template-parameter-pack", "title": "Error when trying to expand template parameter pack", "body": "<p>I'm trying to use variadic templates to store the parameter types to a member function. The way I'm trying to achieve this is by associating each type with a key, then storing this key in an std::vector. The code for creating this key is as follows</p>\n\n<pre><code>template &lt;typename T&gt;\nclass ClassInfo {\npublic:\n    inline static void const* GetClassKey() {\n        static char key;\n        return &amp;key;\n    }\n};\n</code></pre>\n\n<p>Then I use the following code to try to store the keys in an std::vector</p>\n\n<pre><code>class WrappedMemberFunction {\n    void *function_pointer; // Holds the member function pointer\n    void const* class_type; // Class type key\n    void const* return_type; // Return type key\n    std::vector&lt;void const*&gt; parameter_types; // Parameter type keys\n\n    void StoreArguments() {}\n    template &lt;typename Arg, typename... Args&gt;\n    void StoreArguments() {\n        parameter_types.push_back(ClassInfo&lt;Arg&gt;::GetClassKey());\n        StoreArguments&lt;Args...&gt;(); // Error here: No matching member function for call to 'StoreArguments'\n    }\n\n\npublic:\n    template &lt;typename Class, typename ReturnType, typename... Args&gt;\n    WrappedMemberFunction(ReturnType (Class::*member_pointer)(Args...)) {\n        // Store member pointer as regular old void pointer\n        function_pointer = (void*&amp;)member_pointer;\n\n        // Store class type\n        class_type = ClassInfo&lt;Class&gt;::GetClassKey();\n\n        // Store return type\n        return_type = ClassInfo&lt;Class&gt;::GetClassKey();\n\n        // Store parameter types\n        StoreArguments&lt;Args...&gt;();\n    }\n};\n</code></pre>\n\n<p>What I'm getting stuck on is the variadic recursion needed to store each class key. I am getting an error on the line indicated above, which is the recursive step in trying to expand the parameter pack. What am I doing wrong here?</p>\n"}, {"tags": ["c++", "functional-programming", "boost-range"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1469050076, "post_id": 38491060, "comment_id": 64383841, "body": "I think you&#39;re looking for std::equal_range"}, {"owner": {"reputation": 793, "user_id": 443864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f79c8e3a092765cdcc884683adba14?s=128&d=identicon&r=PG", "display_name": "Yaron Tausky", "link": "https://stackoverflow.com/users/443864/yaron-tausky"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1469050308, "post_id": 38491060, "comment_id": 64383953, "body": "Not really, it doesn&#39;t provide lazy evaluation, so after calling it I would have to iterate over the range again do further processing (the integers here are just an example, in reality I have more complex values with non-trivial operations on them). Unless I&#39;m missing something?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1469050408, "post_id": 38491060, "comment_id": 64383999, "body": "Why the downvotes? It&#39;s a clearly stated, well researched question."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1469050408, "post_id": 38491060, "comment_id": 64384000, "body": "Equal_range can be used to build a sequence of ranges. From there you can loop through and do whatever processing you like. Equal_range can take a predicate, so it doesn&#39;t have to test for literal equality"}, {"owner": {"reputation": 793, "user_id": 443864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f79c8e3a092765cdcc884683adba14?s=128&d=identicon&r=PG", "display_name": "Yaron Tausky", "link": "https://stackoverflow.com/users/443864/yaron-tausky"}, "edited": false, "score": 0, "creation_date": 1469052091, "post_id": 38491060, "comment_id": 64384653, "body": "But that&#39;s exactly what I don&#39;t want to do -- I want to combine the initial segmentation and the processing into a single loop, instead of first creating the sequence of ranges and then iterating over it and processing each one. I just want to do it with the nice abstractions that lazy evaluation provides, instead of handwriting such a loop."}], "owner": {"reputation": 793, "user_id": 443864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e9f79c8e3a092765cdcc884683adba14?s=128&d=identicon&r=PG", "display_name": "Yaron Tausky", "link": "https://stackoverflow.com/users/443864/yaron-tausky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 1, "protected_date": 1472835575, "answer_count": 0, "score": 1, "last_activity_date": 1472830754, "creation_date": 1469049693, "last_edit_date": 1469051894, "question_id": 38491060, "link": "https://stackoverflow.com/questions/38491060/is-there-an-idiomatic-efficient-c-equivalent-to-haskells-groupby", "title": "Is there an idiomatic, efficient C++ equivalent to Haskell&#39;s groupBy?", "body": "<p>I'm trying to process an input sequence with Boost.Range. The library leaves quite a lot to be desired, so I have to write some additional range adaptors on my own. Most of them are straightforward, but I ran into some difficulties when I tried to implement an equivalent of Haskell's groupBy (or ranges-v3's group_by_view). It's a transformation that takes an input range and returns a range of ranges, each containing a sequence of adjacent elements from the input that satisfy some given binary predicate. For example, if the binary predicate is simply <code>std::equal_to&lt;int&gt;()</code>, the sequence</p>\n\n<pre><code>{1, 1, 2, 3, 5, 5, 5, 4, 1}\n</code></pre>\n\n<p>would be mapped to </p>\n\n<pre><code>{{1, 1}, {2}, {3}, {5, 5, 5}, {4}, {1}}\n</code></pre>\n\n<p>My problem is with the interface for this adaptor. Suppose</p>\n\n<pre><code>auto i = (input | grouped_by(std::equal_to&lt;int&gt;())).begin();\n</code></pre>\n\n<p>if <code>i</code> is incremented, it would have to scan the underlying sequence until it finds 2. If, however, I first scan <code>*i</code> (which is the range <code>{1, 1}</code>), I essentially already found the end of the first group, so the traversal caused by <code>++i</code> would be redundant. It's possible to have some feedback path from the inner iterator to the outer one, i.e. have <code>i</code> start the scan from the last element reached by the inner iterator, but that would cause a lot of overhead, and risk creating dangling iterators.</p>\n\n<p>I'm wondering if there is some idiomatic way to deal with this problem. Ideally some redefinition of <code>grouped_by</code> interface that sidesteps the problem altogether. Obviously the input range has to be scanned to find the beginning of each group, but I'd like to have a robust way to do that without rescanning elements for no reason. (By robust I mean not invalidating iterators as long as the underlying input range's iterators are valid, and certainly not during the scan itself.)</p>\n\n<p>So.. is there some known/proven/elegant solution to this?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 2308, "user_id": 5883832, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Emekr.jpg?s=128&g=1", "display_name": "PhotometricStereo", "link": "https://stackoverflow.com/users/5883832/photometricstereo"}, "edited": false, "score": 0, "creation_date": 1469049534, "post_id": 38490960, "comment_id": 64383618, "body": "Why <code>w[i]==(&#39;a&#39;)</code>? You can get rid of the parenthesis. Just do <code>w[i] == &#39;a&#39;</code>."}, {"owner": {"reputation": 11, "user_id": 6615765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6963316887b107531d5e5d10dd694113?s=128&d=identicon&r=PG&f=1", "display_name": "2lnk", "link": "https://stackoverflow.com/users/6615765/2lnk"}, "reply_to_user": {"reputation": 2308, "user_id": 5883832, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Emekr.jpg?s=128&g=1", "display_name": "PhotometricStereo", "link": "https://stackoverflow.com/users/5883832/photometricstereo"}, "edited": false, "score": 0, "creation_date": 1469049675, "post_id": 38490960, "comment_id": 64383675, "body": "I just got rid of them and the problem is still there :( But, thank you for your input! Do you think there is something else that could be wrong?"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1469049679, "post_id": 38490960, "comment_id": 64383678, "body": "You need to know that <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\"><code>while(!stream.eof()){ ...}</code></a> is considered wrong"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1469049707, "post_id": 38490960, "comment_id": 64383688, "body": "Then there could be uppercase and lowercase characters. Also something to worry about."}, {"owner": {"reputation": 11, "user_id": 6615765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6963316887b107531d5e5d10dd694113?s=128&d=identicon&r=PG&f=1", "display_name": "2lnk", "link": "https://stackoverflow.com/users/6615765/2lnk"}, "edited": false, "score": 0, "creation_date": 1469049818, "post_id": 38490960, "comment_id": 64383728, "body": "But doesn&#39;t the function of that while loop expression says that the calculations won&#39;t end until the file ends?"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1469049981, "post_id": 38490960, "comment_id": 64383801, "body": "Read the link by WhiZTiM, basically your loop condition is letting you read past the end of the file, which is bad. Also, you seem to assume that all letters encountered will be either vowels or consonants, aside from being lowercase. Is this the case? What about spaces and punctuation?"}, {"owner": {"reputation": 463, "user_id": 6511094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRJfm.jpg?s=128&g=1", "display_name": "D Hydar", "link": "https://stackoverflow.com/users/6511094/d-hydar"}, "edited": false, "score": 0, "creation_date": 1469050084, "post_id": 38490960, "comment_id": 64383843, "body": "Your eof test is badly placed. The end of file bit is set when a  read is attempted and there is no more data."}, {"owner": {"reputation": 11, "user_id": 6615765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6963316887b107531d5e5d10dd694113?s=128&d=identicon&r=PG&f=1", "display_name": "2lnk", "link": "https://stackoverflow.com/users/6615765/2lnk"}, "edited": false, "score": 0, "creation_date": 1469050555, "post_id": 38490960, "comment_id": 64384063, "body": "Ok.. I get it.. sorry, I&#39;m super new to all of this. (I also didn&#39;t know it was a link lol)."}, {"owner": {"reputation": 11, "user_id": 6615765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6963316887b107531d5e5d10dd694113?s=128&d=identicon&r=PG&f=1", "display_name": "2lnk", "link": "https://stackoverflow.com/users/6615765/2lnk"}, "edited": false, "score": 0, "creation_date": 1469050617, "post_id": 38490960, "comment_id": 64384095, "body": "So, should I do this?   while (inFile &gt;&gt; data) and then do getline(data,w) ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469052033, "post_id": 38490960, "comment_id": 64384627, "body": "<code>while (inFile &gt;&gt; w)</code> will read the whole file for you, then you can loop through <code>w</code>  and count consonants and vowels. I recommend making two functions, <code>isvowel</code> and <code>isconsonant</code> to determine vowels and consonants if only just because it makes your code easier to read: <code>if (isconsonant(w[i])) numC++; else if (isvowel(w[i])) numV++;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6615765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6963316887b107531d5e5d10dd694113?s=128&d=identicon&r=PG&f=1", "display_name": "2lnk", "link": "https://stackoverflow.com/users/6615765/2lnk"}, "edited": false, "score": 0, "creation_date": 1469126370, "post_id": 38491846, "comment_id": 64421292, "body": "Thank you so much!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "is_accepted": false, "score": 1, "last_activity_date": 1469055186, "last_edit_date": 1469055186, "creation_date": 1469053375, "answer_id": 38491846, "question_id": 38490960, "link": "https://stackoverflow.com/questions/38490960/c-count-vowel-consonants-from-a-text-file/38491846#38491846", "title": "C++ count vowel consonants from a text file", "body": "<p>Here is one of the solutions to your problem. Keep vowels, consonants and all characters in separate sets, read one character at the time from a file. If match is found in any of the sets then increment the appropriate counter. Calculate the percentage based on those counters:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;set&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main() {\n    set&lt;char&gt; vowels = { 'a', 'e', 'i', 'o', 'u' };\n    set&lt;char&gt; consonants = { 'b', 'c', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'q', 'r', 's', 't', 'v', 'x', 'z', 'w', 'y' };\n    set&lt;char&gt; allchars = { 'a', 'e', 'i', 'o', 'u', 'b', 'c', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'q', 'r', 's', 't', 'v', 'x', 'z', 'w', 'y' };\n    char ch;\n    int vowelsCount = 0;\n    int consonantsCount = 0;\n    int percentageVowels = 0;\n    int percentageConsonants = 0;\n    int charactersCount = 0;\n    fstream fin(\"MyFile.txt\", fstream::in);\n\n    while (fin &gt;&gt; ch) {\n        ch = tolower(ch);\n        if (find(allchars.begin(), allchars.end(), ch) != allchars.end())\n        {\n            charactersCount++;\n        }\n        if (find(vowels.begin(), vowels.end(), ch) != vowels.end())\n        {\n            vowelsCount++;\n        }\n        if (find(consonants.begin(), consonants.end(), ch) != consonants.end())\n        {\n            consonantsCount++;\n        }\n    }\n    percentageVowels = double(vowelsCount) / charactersCount * 100;\n    percentageConsonants = double(consonantsCount) / charactersCount * 100;\n    cout &lt;&lt; \"Vowels     %: \" &lt;&lt; percentageVowels &lt;&lt; endl;\n    cout &lt;&lt; \"Consonants %: \" &lt;&lt; percentageConsonants &lt;&lt; endl;\n    getchar();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6615765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6963316887b107531d5e5d10dd694113?s=128&d=identicon&r=PG&f=1", "display_name": "2lnk", "link": "https://stackoverflow.com/users/6615765/2lnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2019, "favorite_count": 2, "answer_count": 1, "score": -1, "last_activity_date": 1469055186, "creation_date": 1469049279, "question_id": 38490960, "link": "https://stackoverflow.com/questions/38490960/c-count-vowel-consonants-from-a-text-file", "title": "C++ count vowel consonants from a text file", "body": "<p>So one of the prompt of my lab is:\n\"Find the percentage of vowels and percentage consonants in the English language. You should get a percentage of vowels = 37.4% and consonants = 62.5%.\"</p>\n\n<p>Here is just my percentage function. I think there may be something wrong with the for loops but I can't seem to figure it out.. Thanks for the help!</p>\n\n<pre><code>int pv(string w) {\ndouble numC=0;\ndouble numV=0;\nstring fName;\nifstream inFile;\ndouble pc;\n\n\ncout &lt;&lt; \"Enter file name of dictionary (Mac users type in full path): \";\ncin &gt;&gt; fName;\n\nif (inFile.fail()) {\n    cout &lt;&lt; \"Error opening file\" &lt;&lt; endl;\n    exit(1);\n}\n\nwhile (!inFile.eof()) {\n    getline(inFile, w);\n\nfor (int i=0; i&lt;w.length(); i++) {\n    if(w[i]==('a')||w[i]==('e')||w[i]==('i')||w[i]==('o')||w[i]==('u'))\n        numV=numV+1;\n    else {\n        numC=numC+1;\n\n    }\n}\n}\ncout &lt;&lt; numV;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1469049228, "post_id": 38490924, "comment_id": 64383476, "body": "Aren&#39;t you forgetting the <code>virtual</code> keyword somewhere?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469049537, "post_id": 38490924, "comment_id": 64383621, "body": "&quot;Is there something I&#39;m missing here&quot; - Yes. <code>virtual</code> destructors when deleting via base object pointers."}], "answers": [{"comments": [{"owner": {"reputation": 2684, "user_id": 3171100, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/457ebc3fdf64f6b24e968e3d6a1316db?s=128&d=identicon&r=PG", "display_name": "Chris Smith", "link": "https://stackoverflow.com/users/3171100/chris-smith"}, "edited": false, "score": 0, "creation_date": 1469049918, "post_id": 38490979, "comment_id": 64383777, "body": "I do not have access to the std lib so virtual functions do not work."}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "reply_to_user": {"reputation": 2684, "user_id": 3171100, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/457ebc3fdf64f6b24e968e3d6a1316db?s=128&d=identicon&r=PG", "display_name": "Chris Smith", "link": "https://stackoverflow.com/users/3171100/chris-smith"}, "edited": false, "score": 0, "creation_date": 1469050022, "post_id": 38490979, "comment_id": 64383817, "body": "@chris13524 vitrual defination is not part of the std lib, it&#39;s integral part of the language"}, {"owner": {"reputation": 2684, "user_id": 3171100, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/457ebc3fdf64f6b24e968e3d6a1316db?s=128&d=identicon&r=PG", "display_name": "Chris Smith", "link": "https://stackoverflow.com/users/3171100/chris-smith"}, "edited": false, "score": 1, "creation_date": 1469050211, "post_id": 38490979, "comment_id": 64383902, "body": "I had to add the <code>-fno-rtti</code> flag to <code>gcc</code> and now it works (still requires <code>virtual</code>)."}], "tags": [], "owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "is_accepted": true, "score": 3, "last_activity_date": 1469049353, "creation_date": 1469049353, "answer_id": 38490979, "question_id": 38490924, "link": "https://stackoverflow.com/questions/38490924/c-destructor-not-working-as-intended/38490979#38490979", "title": "C++ destructor not working as intended", "body": "<p>You should make the destructor of <code>Aa</code> virtual:</p>\n\n<pre><code>class Aa {\npublic:\n    virtual ~Aa();\n};\n</code></pre>\n\n<p>This is a basic concept of c++. You can read on it <a href=\"http://www.geeksforgeeks.org/g-fact-37/\" rel=\"nofollow\">here</a> (and in many other places).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1469049380, "creation_date": 1469049380, "answer_id": 38490985, "question_id": 38490924, "link": "https://stackoverflow.com/questions/38490924/c-destructor-not-working-as-intended/38490985#38490985", "title": "C++ destructor not working as intended", "body": "<p>Your \"Aa\" destructor is not virtual, so what you are observing is the expected behaviour.</p>\n\n<p>To get the behaviour <em>you</em> expect, declare the destructor as <code>virtual ~Aa() = default;</code> .</p>\n"}], "owner": {"reputation": 2684, "user_id": 3171100, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/457ebc3fdf64f6b24e968e3d6a1316db?s=128&d=identicon&r=PG", "display_name": "Chris Smith", "link": "https://stackoverflow.com/users/3171100/chris-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "closed_date": 1469049269, "accepted_answer_id": 38490979, "answer_count": 2, "score": -2, "last_activity_date": 1469049380, "creation_date": 1469049131, "question_id": 38490924, "link": "https://stackoverflow.com/questions/38490924/c-destructor-not-working-as-intended", "closed_reason": "Duplicate", "title": "C++ destructor not working as intended", "body": "<p>I'm writing an operating system in C++. I do not have the std libs at my disposal (so I'm not sure if this works normally with std libs). It appears that if I <code>delete</code> an object, it only calls the destructor of the variable type (and it's parents).</p>\n\n<p>For example:</p>\n\n<pre><code>Aa* aa = new Bb();\ndelete aa;\n</code></pre>\n\n<p>will only print \"destructing Aa\". Whereas </p>\n\n<pre><code>Bb* bb = new Bb();\ndelete bb;\n</code></pre>\n\n<p>will print both \"destructing Bb\" and \"destructing Aa\".</p>\n\n<p>I tried to work around this issue by calling the sub class destructor in the super class destructor (as seen below).</p>\n\n<p>Is there something I'm missing here, or will I have to resort to casting to the concrete type before the initial <code>delete</code>?</p>\n\n<pre><code>class Aa {\npublic:\n    ~Aa();\n};\nclass Bb : public Aa {\npublic:\n    ~Bb() {\n        log(\"destructing Bb\");\n    }\n};\n\nAa::~Aa() {\n    log(\"destructing Aa\");\n\n    // TODO checks if we are of type Bb\n    // ((Bb*) this)-&gt;~Bb(); // uncomment to test calling sub class destructor\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "boost", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 334, "user_id": 1215001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1369dad4acdf58c515ad81d9a37dbc11?s=128&d=identicon&r=PG", "display_name": "Alex Ferrier", "link": "https://stackoverflow.com/users/1215001/alex-ferrier"}, "edited": false, "score": 0, "creation_date": 1469053100, "post_id": 38491669, "comment_id": 64385015, "body": "This is the clearest comment I&#39;ve heard yet, and fully explains the behaviour. But to clarify, is there <i>no</i> way in CMake to achieve what I want, with cleanly separated installations? Granted, I can clearly now make my own &quot;install&quot; sub-folder, but I don&#39;t understand why I would want to do that and install everything to &quot;install&quot;. A folder with VTK, opencv, pcl, etc all dumped into it is a fairly mostrous folder, and there&#39;s then no way to clean-rebuild a sub-package if I, for example, choose to update it."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 334, "user_id": 1215001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1369dad4acdf58c515ad81d9a37dbc11?s=128&d=identicon&r=PG", "display_name": "Alex Ferrier", "link": "https://stackoverflow.com/users/1215001/alex-ferrier"}, "edited": false, "score": 0, "creation_date": 1469054538, "post_id": 38491669, "comment_id": 64385458, "body": "<code>is there no way in CMake to achieve what I want, with cleanly separated installations?</code> - It is possible, but you need to explicitely specify all installation prefixes in that case. E.g., you may collect all of them into <code>CMAKE_PREFIX_PATH</code> (this variable may actually be a <i>list</i>). <code>there&#39;s then no way to clean-rebuild a sub-package if I, for example, choose to update it.</code> - Usually, <code>make uninstall</code> cleanly removes package&#39;s files from install directory and does not touch other packages in the same dir. So having single install prefix doesn&#39;t prevent rebuilding separate packages."}, {"owner": {"reputation": 334, "user_id": 1215001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1369dad4acdf58c515ad81d9a37dbc11?s=128&d=identicon&r=PG", "display_name": "Alex Ferrier", "link": "https://stackoverflow.com/users/1215001/alex-ferrier"}, "edited": false, "score": 0, "creation_date": 1469056762, "post_id": 38491669, "comment_id": 64386082, "body": "Thanks. In generally I trust people to write uninstall scripts less than I trust blowing away the folder they wrote to, but your suggestions give me everything I need to work.   I am a little confused about why OpenCV <i>was</i> found (albeit in an arbitrary sub-folder.) Does this imply that OpenCV has overridden the behaviour of find_package, and is such an override common?"}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 2, "last_activity_date": 1469052437, "creation_date": 1469052437, "answer_id": 38491669, "question_id": 38490911, "link": "https://stackoverflow.com/questions/38490911/using-cmake-to-find-dependencies-in-an-application-specific-subfolder/38491669#38491669", "title": "Using CMake to find dependencies in an application-specific subfolder", "body": "<p>As error message says, <code>CMAKE_PREFIX_PATH</code> should be set to <em>installation prefix</em> of the package. E.g., if the package has been built using CMake, this is <code>CMAKE_INSTALL_PREFIX</code> variable's value, if the package has been build using Autotools, this is value of <code>--prefix</code> option used for configure it, and so on.</p>\n\n<p>CMake doesn't search every directory under CMAKE_PREFIX_PATH. That is why specifying it as <code>/users/foo/src</code> is useless if you have the package installed at <code>/users/foo/src/eigen-install</code>.</p>\n\n<p>Instead, you may install <em>all</em> 3d-party packages into <code>/users/foo/src/install</code>, and use that path as <em>CMAKE_PREFIX_PATH</em> in your main project.</p>\n"}], "owner": {"reputation": 334, "user_id": 1215001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1369dad4acdf58c515ad81d9a37dbc11?s=128&d=identicon&r=PG", "display_name": "Alex Ferrier", "link": "https://stackoverflow.com/users/1215001/alex-ferrier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "accepted_answer_id": 38491669, "answer_count": 1, "score": 1, "last_activity_date": 1469056841, "creation_date": 1469049079, "last_edit_date": 1469056841, "question_id": 38490911, "link": "https://stackoverflow.com/questions/38490911/using-cmake-to-find-dependencies-in-an-application-specific-subfolder", "title": "Using CMake to find dependencies in an application-specific subfolder", "body": "<p>In spite of many years of coding large-scale C++ applications, I do not understand how find_package is supposed to work in a medium-size CMake project, ASSUMING that I want to build the source to dependent packages myself and not simply rely on large systems like opencv, pcl or boost being installed somewhere in a system folder. I can't can't believe that I'm the only person in the world who has shipped multiple OpenCV and other open-source apps, has worked with meta-build systems like NAnt and SCons on major game projects, yet can't understand the most basic things about how CMake works or find a tutorial answering these questions. </p>\n\n<p>In the past, I have essentially hacked around not understaning find_package by setting all the foo_DIR values by hand as CMake complains until I get a working folder. </p>\n\n<p>I would like to run through a simple example which I'm working on right now, and dearly hope someone can explain what I'm doing so wrong. </p>\n\n<p>Firstly, some assumptions: \nI want to build everything for both MacOS and Windows, ideally via CMakeGUI. MacOS should build XCodeProjects and Windows should build Visual Studio Solutions. </p>\n\n<p>Where there are dependencies, I want to compile them myself, so I have debug symbols and can modify the dependency source (or at least debug into it.) \nNo installation of pre-built binaries into system folders, i.e. no use of sudo port install opencv/pcl, etc on mac. \nI have multiple projects, and prefer to keep a project and its dependencies in a single folder. \nFor the purposes of a concrete example, suppose I am building this project, although it's an arbitrary choice to illustrate the process and confusion I suffer: </p>\n\n<p><a href=\"https://github.com/krips89/opendetection\" rel=\"nofollow\">https://github.com/krips89/opendetection</a></p>\n\n<p>This lists dependencies, which I have intentionally reordered here so that I can take them in order, as follows: </p>\n\n<pre><code>find_package(OpenCV REQUIRED)\nfind_package(Eigen REQUIRED)\nfind_package(Boost 1.40 COMPONENTS program_options REQUIRED )\nfind_package(PCL REQUIRED)\nfind_package(VTK REQUIRED)\n</code></pre>\n\n<p>I would like to have all of these dependencies downloaded and configured in a single path (let's say c:\\src on Windows, and ~\\src on Mac for simplicity), NOT in a system path. Assume that the actual folder is a sub-folder for this project, and no a sub-folder for all projects. This should also allow for side-by-side installation of multiple projects on the same computer.</p>\n\n<p>Taking this one step at a time: </p>\n\n<p>(1) I clone openCV from <a href=\"https://github.com/opencv/opencv\" rel=\"nofollow\">https://github.com/opencv/opencv</a>, sync to tag 3.1, configure into the folder opencv_build folder, build and install into opencv_install. I've done this so many times it's pretty straightforward. \n(2) As above, but for eigen (although building for eigen doesn't actually do anything s it's a template library. I install to a folder eigen_install</p>\n\n<p>Taking directory shows a series of folders for downloaded dependencies. I have assumed a convention where ,  and  are source repos, and their following _build folders are the \"WHere to build the binaries\" folders in CMakeGui.</p>\n\n<pre><code>$ ls\nboost_1_40_0    opencv  opendetection_build\neigen   opencv-build    opendetection_data\neigen_build opencv_contrib  pcl\neigen_install   opendetection\n</code></pre>\n\n<p>All good so far, now let's try to configure opendetection and generate a solution into opendetection_build, and find pendetection's dependencies <em>from within the ~/src folder</em>, that is for the first two dependencies, I hope to find opencv and eigen in the opencv-build and eigen-build folders. </p>\n\n<p>OpenCV immediately fails, as expected, saying: </p>\n\n<pre><code>Could not find a package configuration file provided by \"OpenCV\" with any of the following names:\n\nOpenCVConfig.cmake\nopencv-config.cmake\n\nAdd the installation prefix of \"OpenCV\" to CMAKE_PREFIX_PATH or set \"OpenCV_DIR\" to a directory containing one of the above files. If \"OpenCV\" provides a separate development package or SDK, be sure it has been installed.\n</code></pre>\n\n<p>That's good, because I want to explicitly tell CMake to look for dependent packages under my ~/src folder. Question: Is the use of CMAKE_PREFIX_PATH=/users/foo/src the recommended way to accomplish what I want - looking for all sub-packages under a specific path? </p>\n\n<p>Following this, CMake finds OpenCV (good), and sets OpenCV_DIR = /Users/foo/src/opencv-build. </p>\n\n<p>Question: Given that I have made an \"install\" to opencv-install (using CMAKE_INSTALL_PREFIX and building the Install Target Of OpenCV, shouldn't it find OpenCV in the opencv-install folder not opencv-build? </p>\n\n<p>Moving on to eigen, I have configured and built eigen, and installed it to ~/src/eigen-install, which since it is a subfolder of CMAKE_PREFIX_PATH (~/src) I might expect to be found. But it doesn't seem to be. Can somebody explain to me what I'm not understanding? Particularly given that Eigen in a template library, and that there are at least three folders (eigen, eigen_build and eigen_install)  under CMAKE_PREFIX_PATH which I would have thought CMake would find something in, I assume I must be doing something wrong here. I KNOW from past experience, I can set EIGEN_INCLUDE_DIR by hand in CMakeGUI by hand, and continue hacking forth, but that just seems wrong. </p>\n\n<p>I'm more than willing to write up a web page explaining this for future people as dumb as me if one does not already exist, although I can't understand how use of CMake for basic project configuration and generation is apparently so obvious to everyone but so opaque for me. I have actually been using CMake for some years, usually by just manually setting Boost_INCLUDE_Dir, Foo_INCLUDE_PATH etc manually, but clearly this is not the right solution. Generally, after spending a couple of days fighting through the various packages to generate a solution by manually setting INCLUDE PATHS, LIBRARY PATHS and other options, I just deal with the solution and don't touch CMake again. But I would love to understand what I'm missing about find_package for my (surely not uncommon) use case of wanting to control my project dependencies rather than just using sudo port install * and installing random versions of projects to my global system folders. </p>\n"}, {"tags": ["c++", "serial-port", "termios"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1469048809, "post_id": 38490776, "comment_id": 64383288, "body": "Suggestion: Minimize. Write yourself a little program that does nothing but open your serial port and talk to the device on the other side and experiment with that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1469048846, "post_id": 38490776, "comment_id": 64383303, "body": "Nitpick: &quot;using a C++ script&quot;. No. C++ is <i>not</i> a scripting (interpreted) language. It&#39;s a compiled language - and yes, there&#39;s a <i>huge</i> difference."}, {"owner": {"reputation": 11, "user_id": 6532355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac65f78d2a374ee0a19852fb3a2bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "crispc85", "link": "https://stackoverflow.com/users/6532355/crispc85"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469049598, "post_id": 38490776, "comment_id": 64383646, "body": "@JesperJuhl Thanks for the term clarification! I am relatively new to C/C++ but am relatively well versed in Matlab due to my engineering background, so I am used to calling my code &quot;scripts&quot; since Matlab is (to my knowledge) a scripting language."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1469067516, "post_id": 38490776, "comment_id": 64388432, "body": "Your code is not POSIX compliant for portability.  See <a href=\"http://www.chemie.fu-berlin.de/chemnet/use/info/libc/libc_12.html#SEC237\" rel=\"nofollow noreferrer\">Setting Terminal Modes Properly</a> and <a href=\"http://www.cmrr.umn.edu/~strupp/serial.html\" rel=\"nofollow noreferrer\">Serial Programming Guide for POSIX Operating Systems</a>.  Using non-blocking mode (i.e. O_NDELAY) is probably a mistake.  There&#39;s no need to use TIOCGSERIAL or TIOCSSERIAL <b>ioctl()</b> .   Using magic number such as <code>serinfo.flags |= 0x4000</code> is bad code."}, {"owner": {"reputation": 11, "user_id": 6532355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac65f78d2a374ee0a19852fb3a2bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "crispc85", "link": "https://stackoverflow.com/users/6532355/crispc85"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1469068491, "post_id": 38490776, "comment_id": 64388652, "body": "Thanks, @sawdust. Those were all just options I found while Googling the problem I was having that I had tried to make my code work as expected. My new/working code does not use any of those things you mentioned. Thanks for your input though, since, like I mentioned in my previous comment, I am relatively new to C/C++ coding and it is always nice to get input into good and bad coding practices!"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469093260, "post_id": 38490776, "comment_id": 64400082, "body": "@crispc85: You might also want to learn the difference between C and C++. The two languages diverged quite a while ago (around the 1990&#39;s) and went their own way. Your code certainly isn&#39;t C (which doesn&#39;t have <code>class</code>) but in C++ you would use <code>std::string</code> and would not use <code>#define</code>  for all those constants."}, {"owner": {"reputation": 11, "user_id": 6532355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac65f78d2a374ee0a19852fb3a2bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "crispc85", "link": "https://stackoverflow.com/users/6532355/crispc85"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469116658, "post_id": 38490776, "comment_id": 64415795, "body": "@MSalters: I appreciate your input, I am trying to familiarize myself with the differences between the two languages. If I shouldn&#39;t use <code>#define</code> for the constant strings what should I use, and is there any performance gain from using <code>std::string</code> over <code>#define</code>?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469116988, "post_id": 38490776, "comment_id": 64416019, "body": "@crispc85: The two common choices would be <code>const char* AT = &quot;AT\\r\\n&quot;;</code> and <code>const std::string AT = &quot;AT\\r\\n&quot;;. This is more type-safe. Performance is a non-issue here - std::string might save you a few </code>strlen()` calls but that&#39;s not going to take much time anyway. BTW, you may also want to read up on C++ namespaces. It looks like you could use a <code>namespace Fona {</code>"}, {"owner": {"reputation": 11, "user_id": 6532355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac65f78d2a374ee0a19852fb3a2bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "crispc85", "link": "https://stackoverflow.com/users/6532355/crispc85"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469117138, "post_id": 38490776, "comment_id": 64416132, "body": "Thanks, @MSalters. I will look into namespaces and the other ways to store constant strings. I appreciate your help. Cheers."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6532355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac65f78d2a374ee0a19852fb3a2bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "crispc85", "link": "https://stackoverflow.com/users/6532355/crispc85"}, "edited": false, "score": 0, "creation_date": 1469056720, "post_id": 38491325, "comment_id": 64386068, "body": "Thanks for all the information! I was able to implement code similar to the code you provided using <code>select</code> and now it is working as I hoped! I will definitely check out <code>epoll</code> as well. Thanks again!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 11, "user_id": 6532355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac65f78d2a374ee0a19852fb3a2bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "crispc85", "link": "https://stackoverflow.com/users/6532355/crispc85"}, "edited": false, "score": 0, "creation_date": 1469057000, "post_id": 38491325, "comment_id": 64386146, "body": "No problem. Where <code>select</code> and <code>epoll</code> really get useful is when you have a couple serial ports, a network socket or two, and maybe a few timers and you want them all running in one thread. Throw them all into <code>select</code> or <code>epoll</code> and let it wake up and sort out who does what and when."}, {"owner": {"reputation": 11, "user_id": 6532355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac65f78d2a374ee0a19852fb3a2bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "crispc85", "link": "https://stackoverflow.com/users/6532355/crispc85"}, "edited": false, "score": 0, "creation_date": 1469063618, "post_id": 38491325, "comment_id": 64387638, "body": "Yea, they seem like really useful functions for reading from device ports. I wish I would have come across them sooner!"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1469051225, "last_edit_date": 1469051225, "creation_date": 1469050881, "answer_id": 38491325, "question_id": 38490776, "link": "https://stackoverflow.com/questions/38490776/slow-response-to-serial-at-commands-using-c-but-fast-response-with-minicom/38491325#38491325", "title": "Slow response to serial AT commands using C, but fast response with minicom", "body": "<p>1 second sleeps are murderous and I can assure you minicom is not doing them. It will be waiting for data to come in, rather than polling, then displaying it. Serial data is slow. Every character sent at 9600 baud takes about a millisecond to arrive. at 115.2k baud, you're moving a character in a little less than 85 microseconds. Your Beaglebone, on the other hand, is working in nanoseconds, so if you don't wait before reading, the data won't be there yet. That said, you should have that \"OK\" in less than 1 ms and waiting a whole second is vast overkill.</p>\n\n<p>Consider blocking and waiting for the three bytes needed for \"OK\"</p>\n\n<pre><code>while(strstr((char *)buffer,\"OK\") == NULL &amp;&amp; cnt &lt; 5)\n{\n    memset(buffer,'\\0',50);\n    n_write = write(fona_fd,FONA_AT,sizeof(FONA_AT)-1);\n    n_read = read(fona_fd,buffer,3);\n    cnt++;\n}\n</code></pre>\n\n<p>This can block forever if the device never responds so you need a timeout </p>\n\n<p>The easiest catch-all timeout mechanism I can think of off the top of my head is something like this:</p>\n\n<pre><code>int retry= 5;\nwhile (retry)\n{\n    fd_set readfs;    // file descriptor set used by select\n    struct timeval timeout;\n    FD_ZERO(&amp;readfs); // clear file descriptor set \n    FD_SET(fona_fd, &amp;readfs); //  set our port as the one item in the set\n    timeout.tv_sec = 1;\n    timeout.tv_usec = 0;\n    if (select(fona_fd+1, &amp;readfs, NULL, NULL, &amp;timeout) !=0)\n    {\n        rval = read(fona_fd, buffer, sizeof(buffer)-1); \n        // will stop reading after configurable gap between bytes read\n        buffer[rval] = '\\0'; // NULL terminate the buffer or it ain't a string\n                             // If not a string, results of strstr are undefined\n        if (strstr((char *)buffer,\"OK\") != NULL) \n        {\n            break;\n        }\n    }\n    retry--;\n}\n</code></pre>\n\n<p><a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow\">Documentation on <code>select</code></a>. It's very very cool function. <a href=\"https://en.wikipedia.org/wiki/Epoll\" rel=\"nofollow\">Not as cool as epoll,</a> but easier to find tutorials for. If you do a lot of <code>select</code> give <code>epoll</code> a good look over.</p>\n\n<p>Select in this case will wait for data for 1 second before giving up. If it finds data, the program will enter the <code>if</code> body and <code>read</code> will read until some user configurable number of character-times have passed since the last character was received or the buffer is full.</p>\n\n<p>We then null terminate the data in the buffer so we can use string handling routines on it. This also eliminates the need to <code>memset</code> the buffer. If the buffer contains \"OK\", we exit the loop.</p>\n\n<p>Otherwise the we decrement the retry counter and loop around to see if there are more retries.</p>\n"}], "owner": {"reputation": 11, "user_id": 6532355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac65f78d2a374ee0a19852fb3a2bc7fe?s=128&d=identicon&r=PG&f=1", "display_name": "crispc85", "link": "https://stackoverflow.com/users/6532355/crispc85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 0, "accepted_answer_id": 38491325, "answer_count": 1, "score": 0, "last_activity_date": 1469051225, "creation_date": 1469048460, "question_id": 38490776, "link": "https://stackoverflow.com/questions/38490776/slow-response-to-serial-at-commands-using-c-but-fast-response-with-minicom", "title": "Slow response to serial AT commands using C, but fast response with minicom", "body": "<p>I am having an issue reading from a serial port on a Beaglebone Black using a C++ script I've written. The script sends commands to and receives responses from an Adafruit FONA GSM/GPS device and works, except that there is a long delay between sending the commands and actually receiving any bytes back from the device (I have to put a 1 sec delay between the write and read commands in order to get the response from the device). However, when I use the minicom serial terminal emulator there is no perceptible delay between sending the command and receiving the response. I'm guessing it has to do with how I am opening the serial port, but I don't know what else I can change. Right now I have the settings set to raw input and output modes with no line control or echoing, but still unable to reduce the response time. Any help or ideas are more than welcome and appreciated! Thanks!</p>\n\n<p>CPP file:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;linux/ioctl.h&gt;\n#include &lt;linux/serial.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include \"Fona_control.h\"\n\n\nFona_control::Fona_control(void)\n{\n    begin();\n}\n\nvoid Fona_control::get_gps(void)\n{\n    printf(\"Reading GPS\\n\");\n    unsigned char gpsbuff[250];\n    memset(gpsbuff,'\\0',250);\n    sleep(0.1);\n\n    int bytes_a = 0;\n    int n_write = write(fona_fd,GPS_GET_DATA,sizeof(GPS_GET_DATA)-1);\n    sleep(1);\n    ioctl(fona_fd,FIONREAD,&amp;bytes_a);\n    printf(\"Bytes avail: %i\\n\",bytes_a);\n    int n_read = read(fona_fd,gpsbuff,bytes_a);\n    printf(\"Buffer: %s\\n\",gpsbuff);\n    printf(\"Bytes read: %i\\n\",n_read);\n\n    return;\n}\n\n\n\nvoid Fona_control::begin(void)\n{\n    printf(\"FONA Beginning\\n\");\n\n    struct termios oldtio, newtio;\n    struct serial_struct serinfo;\n    // Load the pin configuration\n    /* Open modem device for reading and writing and not as controlling tty\n    because we don't want to get killed if linenoise sends CTRL-C. */\n    fona_fd = open(FONA_DEVICE, O_RDWR | O_NOCTTY | O_NDELAY);\n    if (fona_fd &lt; 0) { perror(FONA_DEVICE); exit(-1); }\n\n    bzero(&amp;newtio, sizeof(newtio)); /* clear struct for new port settings */\n\n    /*  BAUDRATE: Set bps rate. You could also use cfsetispeed and cfsetospeed.\n    CRTSCTS : output hardware flow control (only used if the cable has\n              all necessary lines. See sect. 7 of Serial-HOWTO)\n    CS8     : 8n1 (8bit,no parity,1 stopbit)\n    CLOCAL  : local connection, no modem contol\n    CREAD   : enable receiving characters */\n    cfsetspeed(&amp;newtio,BAUDRATE_Fona);\n    newtio.c_cflag |= ( CLOCAL | CREAD );\n    newtio.c_cflag &amp;= ~CSIZE;\n    newtio.c_cflag |= CS8;\n    newtio.c_cflag &amp;= ~PARENB;   \n    newtio.c_cflag &amp;= ~CRTSCTS;\n    newtio.c_cflag &amp;= ~CSTOPB;\n    newtio.c_cc[VMIN]  = 1;\n    newtio.c_cc[VTIME] = 1;\n\nioctl (fona_fd, TIOCGSERIAL, &amp;serinfo);\nserinfo.flags |= 0x4000;\nioctl (fona_fd, TIOCSSERIAL, &amp;serinfo);\n\n    /* setup for non-canonical mode */\n    //newtio.c_iflag &amp;= ~(IGNBRK | BRKINT | IGNPAR | ISTRIP | INLCR | INPCK | ICRNL | IXON | IGNCR);  \n    newtio.c_iflag = 0; \n\n    /* Set line flags */ \n    //newtio.c_lflag &amp;= ~(ECHO | ECHONL | ICANON | ISIG | IEXTEN);\n    newtio.c_lflag = 0; \n\n    /*  Raw output\n    newtio.c_oflag &amp;= ~(OCRNL | ONLCR | ONLRET | ONOCR | ONOEOT| OFILL | OLCUC | OPOST); */\n    newtio.c_oflag = 0;\n\n\n    /* now clean the modem line and activate the settings for the port */\n    tcflush(fona_fd, TCIOFLUSH);\n    if(tcsetattr(fona_fd,TCSANOW,&amp;newtio) &lt; 0)\n    {\n        printf(\"Error Setting FONA Serial Port Attributes!\");\n        exit(0);\n    };\n\n    /* terminal settings done, now send FONA initialization commands*/\n\n    sleep(1);\n    unsigned char buffer[50];\n    int bytes_avail = 0;\n    int n_write     = 0;\n    int n_read      = 0;\n    int cnt         = 0;\n    memset(buffer,'\\0',50);\n    tcflush(fona_fd, TCIOFLUSH);\n    while(strstr((char *)buffer,\"OK\") == NULL &amp;&amp; cnt &lt; 5)\n    {\n        memset(buffer,'\\0',50);\n        n_write = write(fona_fd,FONA_AT,sizeof(FONA_AT)-1);\n        sleep(1);\n        ioctl(fona_fd,FIONREAD,&amp;bytes_avail);\n        printf(\"BA: %i\\n\",bytes_avail);\n        if(bytes_avail &gt; 0)\n        {\n            n_read = read(fona_fd,buffer,bytes_avail);\n            printf(\"%s\\n\",buffer);\n        }\n        sleep(1);\n        cnt++;\n    }\n\n    sleep(1);\n    n_write = write(fona_fd,\"+++\",3);\n    bytes_avail = 0;\n    sleep(1);\n    ioctl(fona_fd,FIONREAD,&amp;bytes_avail);\n    printf(\"BA2: %i\\n\",bytes_avail);\n    n_read = read(fona_fd,buffer,bytes_avail);\n    printf(\"%s\",buffer);\n\n    printf(\"AT Accepted\\n\");\n    sleep(1);\n    tcflush(fona_fd, TCIOFLUSH);\n    unsigned char buffer1[50];\n    memset(buffer1,'\\0',50);\n\n    int n = write(fona_fd,FONA_ECHO_OFF,sizeof(FONA_ECHO_OFF)-1);\n    printf(\"Writ: %i\\n\",n);\n    bytes_avail = 0;\n    sleep(1);\n    ioctl(fona_fd,FIONREAD,&amp;bytes_avail);\n    printf(\"BA2: %i\\n\",bytes_avail);\n    n = read(fona_fd,buffer1,bytes_avail);\n    printf(\"%s\",buffer1);\n    memset(buffer1,'\\0',50);\n    sleep(1);\n\n\n    n = write(fona_fd,GPS_POWER_ON,sizeof(GPS_POWER_ON)-1);\n    printf(\"Writ: %i\\n\",n);\n    bytes_avail = 0;\n    sleep(1);\n    ioctl(fona_fd,FIONREAD,&amp;bytes_avail);\n    printf(\"BA2: %i\\n\",bytes_avail);\n    n = read(fona_fd,buffer1,bytes_avail);\n    printf(\"%s\\n\",buffer1);\n    memset(buffer1,'\\0',50);\n    sleep(1);\n\n    n = write(fona_fd,FONA_SMS_TYPE,sizeof(FONA_SMS_TYPE)-1);\n    printf(\"Writ: %i\\n\",n);\n    bytes_avail = 0;\n    sleep(1);\n    ioctl(fona_fd,FIONREAD,&amp;bytes_avail);\n    printf(\"BA2: %i\\n\",bytes_avail);\n    n = read(fona_fd,buffer1,bytes_avail);\n    printf(\"%s\\n\",buffer1);\n    sleep(1);\n\n}\n</code></pre>\n\n<p>H File:</p>\n\n<pre><code>#ifndef _fona_control_H\n#define _fona_control_H\n\n#include &lt;stdint.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define FONA_DEVICE \"/dev/ttyO5\" //Beaglebone Black serial port\n//#define _POSIX_SOURCE 1 /* POSIX compliant source */\n\n#define BAUDRATE_Fona B115200   // Change as needed, keep B\n\n/* Define FONA AT Commands */\n#define FONA_AT         \"AT\\r\\n\"\n#define FONA_ECHO_OFF       \"ATE0\\r\\n\"\n#define FONA_CMD_REPEAT     \"A/\\r\\n\"\n#define FONA_NO_ECHO        \"ATE0\\r\\n\"\n#define FONA_PIN_CHECK      \"AT+CPIN?\\r\\n\"\n#define FONA_PIN_SEND       \"AT+CPIN=1234\\r\\n\"\n#define FONA_SMS_TYPE       \"AT+CMGF=1\\r\\n\"\n\n\n/* Define FONA GPS AT Commands */\n#define GPS_POWER_ON    \"AT+CGNSPWR=1\\r\\n\"\n#define GPS_POWER_OFF   \"AT+CGNSPWR=0\\r\\n\"\n#define GPS_GET_DATA    \"AT+CGNSINF\\r\\n\"\n\n/* Define FONA GPS NMEA Commands */\n#define PMTK_CMD_HOT_START  \"AT+CGNSCMD=0,\"$PMTK101*32\"\\r\\n\"\n#define PMTK_CMD_WARM_START \"AT+CGNSCMD=0,\"$PMTK102*31\"\\r\\n\"\n#define PMTK_CMD_COLD_START     \"AT+CGNSCMD=0,\"$PMTK103*30\"\\r\\n\"\n#define PMTK_SET_NMEA_5HZ       \"AT+CGNSCMD=0,\"$PMTK220,200*2C\"\\r\\n\"\n#define PMTK_SET_BAUD_38400     \"AT+CGNSCMD=0,\"$PMTK251,38400*27\"\\r\\n\"\n#define PMTK_SET_WAAS       \"AT+CGNSCMD=0,\"$PMTK301,2*2E\"\\r\\n\"\n#define PMTK_SET_SBAS       \"AT+CGNSCMD=0,\"$PMTK313,1*2E\"\\r\\n\"\n#define PMTK_NMEA_TYPES         \"AT+CGNSCMD=0,\"$PMTK314,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0*29\"\\r\\n\"\n#define PMTK_STANDY_MODE    \"AT+CGNSCMD=0,\"$PMTK161,0*28\"\\r\\n\"    //Send any byte to exit standby mode\n\n\nclass Fona_control {\n   public:\n\n      void begin(void);\n      void get_gps(void);\n      Fona_control(void); // Constructor when using HardwareSerial\n\n      uint8_t fix_status, fix_mode, sats, sats_used, glo_sats, cn0;\n      uint8_t month, day, minute;\n      uint32_t year;\n\n      double seconds, latitude, longitude, speed, course, hdop, vdop, pdop, hpa, vpa;\n\n      int fona_fd;\n\n   private:\n\n\n};\n\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "netlink"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1469048242, "post_id": 38490695, "comment_id": 64383048, "body": "<i>&quot;What am I doing wrong?&quot;</i> What the error message actually says."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1469048530, "post_id": 38490695, "comment_id": 64383162, "body": "You cannot use a <code>void*</code> when the argument type is <code>nlattr*</code>. You need to explicitly cast the <code>void*</code> to <code>nlattr*</code> before calling the function. Use <code>reinterpret_cast&lt;nlattr*&gt;(arg)</code> to do the explicit cast."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1469049727, "post_id": 38490695, "comment_id": 64383697, "body": "Why haven&#39;t you posted the code that contains the line with the error?"}, {"owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1469050141, "post_id": 38490695, "comment_id": 64383870, "body": "@Barmar are you referring to <code>&#47;usr&#47;include&#47;libnl3&#47;netlink&#47;attr.h</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1469050246, "post_id": 38490695, "comment_id": 64383922, "body": "I suppose so. Is <code>nla_for_each_nested</code> a macro defined in that file?"}, {"owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1469050436, "post_id": 38490695, "comment_id": 64384012, "body": "@Barmar, yes it is. I&#39;ve added it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1469050691, "post_id": 38490695, "comment_id": 64384134, "body": "What is the return type of <code>nla_data()</code>? The error implies that it returns <code>void*</code>, and you&#39;re trying to assign that to <code>nl_band</code>, which is <code>nlattr*</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1469050772, "post_id": 38490695, "comment_id": 64384164, "body": "The problem seems to be that the header file was intended for use with C, not C++. C allows <code>void*</code> to be converted automatically to any other pointer type, but C++ doesn&#39;t."}, {"owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "edited": false, "score": 0, "creation_date": 1469051020, "post_id": 38490695, "comment_id": 64384259, "body": "I was wondering if it had to do with c vs c++. I&#39;m using <code>iw</code> source as a guide and I do believe it&#39;s written in c."}], "answers": [{"tags": [], "owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "is_accepted": true, "score": 0, "last_activity_date": 1469612778, "creation_date": 1469612778, "answer_id": 38609408, "question_id": 38490695, "link": "https://stackoverflow.com/questions/38490695/why-am-i-getting-error-invalid-conversion-from-void-to-nlattr-when-i-us/38609408#38609408", "title": "Why am I getting &quot;error: invalid conversion from &#39;void*&#39; to &#39;nlattr*&#39;&quot; when I use &quot;nla_for_each_nested&quot; on a nested array?", "body": "<p>The issue was g++ is unable to compile code with nla_for_each_nested macro due to implicit type conversion from void* to nlattr*.</p>\n\n<p>See link from libnl list:</p>\n\n<p><a href=\"http://lists.infradead.org/pipermail/libnl/2016-February/002096.html\" rel=\"nofollow\">http://lists.infradead.org/pipermail/libnl/2016-February/002096.html</a></p>\n\n<p>The fix in the nla_for_each_nested macro was to add type casting for nla_for_each_nested macro.</p>\n\n<p>Changed from:</p>\n\n<pre><code>for (pos = nla_data(nla), rem = nla_len(nla); \\\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>for (pos = (struct nlattr *) nla_data(nla), rem = nla_len(nla); \\\n</code></pre>\n"}], "owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 0, "accepted_answer_id": 38609408, "answer_count": 1, "score": -4, "last_activity_date": 1469612778, "creation_date": 1469048158, "last_edit_date": 1469050398, "question_id": 38490695, "link": "https://stackoverflow.com/questions/38490695/why-am-i-getting-error-invalid-conversion-from-void-to-nlattr-when-i-us", "title": "Why am I getting &quot;error: invalid conversion from &#39;void*&#39; to &#39;nlattr*&#39;&quot; when I use &quot;nla_for_each_nested&quot; on a nested array?", "body": "<p>I'm using <code>libnl3</code> and <code>nl80211.h</code> to get the available bands for a connected wireless interface.</p>\n\n<p>When I try to compile I get <code>error: invalid conversion from \u2018void*\u2019 to \u2018nlattr*\u2019</code>. The IDE (CLion) is also complaining about the line <code>nla_for_each_nested(nl_band, tb_msg[NL80211_ATTR_WIPHY_BANDS], rem_band)</code> and says <code>incompatible pointer type 'nlattr *' and 'void *'</code>.</p>\n\n<p>What is being seen as <code>void *</code>, is it <code>pos = nla_data(nla)</code> from <code>/usr/include/libnl3/netlink/attr.h</code> that is considered <code>void *</code>?</p>\n\n<p>Compile Error:</p>\n\n<pre><code>/home/username/Documents/Development/appname/fs_nl80211Class.cpp: In function \u2018int callback(nl_msg*, void*)\u2019:\n/usr/include/libnl3/netlink/attr.h:328:21: error: invalid conversion from \u2018void*\u2019 to \u2018nlattr*\u2019 [-fpermissive]\n  for (pos = nla_data(nla), rem = nla_len(nla);\n                     ^\n</code></pre>\n\n<p>The macro from the <code>libnl3/netlink/attr.h</code> file:</p>\n\n<pre><code>#define nla_for_each_nested(pos, nla, rem) \\\n    for (pos = nla_data(nla), rem = nla_len(nla); \\\n         nla_ok(pos, rem); \\\n         pos = nla_next(pos, &amp;(rem)))\n</code></pre>\n\n<p>My Code:</p>\n\n<pre><code>static int callback(struct nl_msg *msg, void *arg) {\n\n    genlmsghdr *gnlh = (genlmsghdr *) nlmsg_data(nlmsg_hdr(msg));\n\n    struct nlattr *tb_msg[NL80211_ATTR_MAX + 1];\n    struct nlattr *tb_band[NL80211_BAND_ATTR_MAX + 1];\n\n    struct nlattr *nl_band;\n\n    int rem_band;\n    static int last_band = -1;\n    static bool band_had_freq = false;\n\n    nla_parse(tb_msg, NL80211_ATTR_MAX, genlmsg_attrdata(gnlh, 0), genlmsg_attrlen(gnlh, 0), NULL);\n\n    if (tb_msg[NL80211_ATTR_WIPHY_BANDS]) {\n\n        // macro from libnl3/netlink/attr.h\n        nla_for_each_nested(nl_band, tb_msg[NL80211_ATTR_WIPHY_BANDS], rem_band) {\n            if (last_band != nl_band-&gt;nla_type) {\n                cout &lt;&lt; (\"Band %d:\", nl_band-&gt;nla_type) &lt;&lt; endl;\n                band_had_freq = false;\n            }\n            last_band = nl_band-&gt;nla_type;\n\n            nla_parse(tb_band,\n                      NL80211_BAND_ATTR_MAX,\n                      nla_data(nl_band),\n                      nla_len(nl_band), NULL);\n\n            if (tb_band[NL80211_BAND_ATTR_FREQS]) {\n                if (!band_had_freq) {\n                    cout &lt;&lt; \"Frequencies:\" &lt;&lt; endl;\n                    band_had_freq = true;\n                }\n            }\n        }\n    }\n\n    //nl_msg_dump(msg, stdout);\n\n    return NL_SKIP;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "opencv3.1"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1469047887, "post_id": 38490405, "comment_id": 64382869, "body": "so what do you expect and/or why do you want to imwrite?"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469083636, "post_id": 38490405, "comment_id": 64393700, "body": "I want to save the image to disk. Is there any other way to do this?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469084722, "post_id": 38490405, "comment_id": 64394343, "body": "have a look at cv::FileStorage"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469085771, "post_id": 38490405, "comment_id": 64394974, "body": "But it will only save the data as XML/YAML. I want to save the image to disk."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469085918, "post_id": 38490405, "comment_id": 64395062, "body": "but it is no image but 2d point coordinates (instead of color pixels). So again: What result do you expect? An image that looks like what? In the end: Afaik oprnCV cant save 64 bit channel values"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469086855, "post_id": 38490405, "comment_id": 64395766, "body": "I have tried this.                                                                                       Mat depthImage = cv::Mat(height, width, CV_16UC3);  int i = 0;     for (int h = 0; h &lt; depthImage.rows; h++)     {         for (int w = 0; w &lt; depthImage.cols; w++)         {             depthImage.at&lt;cv::Vec3w&gt;(h, w)[0] = imagePoints[i].x ;                 depthImage.at&lt;cv::Vec3w&gt;(h, w)[1] = imagePoints[i].y;             depthImage.at&lt;cv::Vec3w&gt;(h, w)[2] = 1;              i++;         }     }                  This is giving me an image but in 24 bit format."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469087102, "post_id": 38490405, "comment_id": 64395957, "body": "since point positions can be negative you must use CV_16SC3 and then access by <code>depthImage.at&lt;cv::Vec3s&gt;</code> (Vec3s is 3 short values which each are each 16 bit)."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469087139, "post_id": 38490405, "comment_id": 64395986, "body": "Not sure whether openCV can save 16 bit signed values to png."}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469087416, "post_id": 38490405, "comment_id": 64396152, "body": "Yes. That works. But since it is 16 bit each, the resulting image is 48 bits. I tried to convert it into 16 bit using this. Mat u16;  \t\tdepthImage.convertTo(u16, CV_16S); But no luck. It is being converted to 24 bits with 8 bits each for each channel"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469087511, "post_id": 38490405, "comment_id": 64396216, "body": "My real problem is this <a href=\"http://answers.opencv.org/question/98725/3d-clod-point-to-2d-image/\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469087641, "post_id": 38490405, "comment_id": 64396298, "body": "I still dont get why you want to save an image. Btw: A depth image typically does not hold 3d or 2d point positions but only the distance from the scene to the camera looking through that pixel. So maybe you are not doing the right thing, if you want a depth image (typically single channel) as a result!"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469089737, "post_id": 38490405, "comment_id": 64397649, "body": "What I am trying to save is not the depth image. But the 2D projection of a 3D point cloud."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469089950, "post_id": 38490405, "comment_id": 64397796, "body": "do you keep negative point locations (points that don&#39;t hit the image plane within the image range)?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469104594, "post_id": 38490405, "comment_id": 64407384, "body": "what&#39;s the dimension of the resulting image? You have N points which are projected, but what&#39;s the dimension of the image you want to save? 1xN?  Nx1? LxM where L+M=N?"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469170113, "post_id": 38490405, "comment_id": 64435353, "body": "I am able to save the 2D projection of the point Cloud. Thanks a lot for all the help."}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469170186, "post_id": 38490405, "comment_id": 64435391, "body": "If I want to save only the depth image, Can i just copy the depth info as follows.  **newdepthimage.at&lt;char16_t&gt;(u,v) = Z ** Z is the z coordinate in the 3D cloud point"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469170394, "post_id": 38490405, "comment_id": 64435492, "body": "What type is ** depth **?"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469186557, "post_id": 38490405, "comment_id": 64444661, "body": "16 bit png depth image. I dont undestand the question.."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469186686, "post_id": 38490405, "comment_id": 64444739, "body": "signed (positive and negative values) or unsigned (only positive)?"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469187122, "post_id": 38490405, "comment_id": 64445014, "body": "depth value is in float."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469187355, "post_id": 38490405, "comment_id": 64445152, "body": "so it is 32 bit. you have to decide whether it is enough for you to round the value to lower or nearest integer or whether you want to limit/scale/range the float space to 16 bit integer range. In addition if you have only positive (float) values you can switch to char16u_t to increase the possibe range/precision"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469187529, "post_id": 38490405, "comment_id": 64445246, "body": "I am using char16_t to save the image, but getting a dark image. I tried multiplying it by 255. But no luck"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469188330, "post_id": 38490405, "comment_id": 64445765, "body": "what&#39;s the type of the Mat? char16_t would be CV_16SC1 (not CV_16UC1). in addition, value -32768 is black and 32767 is white for signed while 0 is black and 65535 is white for unsigned."}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469188628, "post_id": 38490405, "comment_id": 64445927, "body": "I was using CV_16UC1 so far. Now it is working. But the image is too dark.  :("}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469188920, "post_id": 38490405, "comment_id": 64446104, "body": "can you increase the scale factor? And did you change to  <code>newdepthimage.at&lt;char16u_t&gt;(u,v) = factor*Z</code> ?"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469189094, "post_id": 38490405, "comment_id": 64446206, "body": "yes. I have increased the scale factor as well. The thing i do not understand is, My depth value is in float. Why is it not working when i created a Mat float image and used &lt;float&gt; to copy data."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469189309, "post_id": 38490405, "comment_id": 64446334, "body": "because float is 32 bit but your matrix entries are 16 bit. If you create a float (32FC1) mat you can save them, but imwrite will convert them to 8 bit (and maybe scale them). Do you need the images just for visualization or do you need to reuse them (e.g.don&#39;t lose information)? Can you create a new question and post your code?"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469189435, "post_id": 38490405, "comment_id": 64446427, "body": "I dont want to lose the information. And yes. I will create a new post with the code."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469189470, "post_id": 38490405, "comment_id": 64446450, "body": "so the image &quot;being too dark&quot; isn&#39;t really a problem if the values are ok?!?"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469189566, "post_id": 38490405, "comment_id": 64446522, "body": "I want to visualize the image as well. :)"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469189698, "post_id": 38490405, "comment_id": 64446608, "body": "maybe you should use differently scaled images for both purposes..."}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1469189976, "post_id": 38490405, "comment_id": 64446776, "body": "hmm. Ok. Thanks a lot for all the help. :) :)"}], "answers": [{"tags": [], "owner": {"reputation": 448, "user_id": 2351496, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/nC1Z7.jpg?s=128&g=1", "display_name": "Anubhav Rohatgi", "link": "https://stackoverflow.com/users/2351496/anubhav-rohatgi"}, "is_accepted": true, "score": 1, "last_activity_date": 1469451985, "creation_date": 1469451985, "answer_id": 38568633, "question_id": 38490405, "link": "https://stackoverflow.com/questions/38490405/converting-point2d-to-mat/38568633#38568633", "title": "Converting point2d to Mat", "body": "<p>Here is the answer:</p>\n\n<p>Dont worry about the type casting. Using integers in double. But this is just to give the gist of the solution.</p>\n\n<pre><code>std::vector&lt; cv::Point2d&gt; points;\n\nfor(int i =0; i &lt; 10; i++)\n{\n    points.push_back(cv::Point2d(i,i));\n}\n\ncv::Mat_&lt;cv::Point2d&gt; matrix(points);\n\nstd::cout&lt;&lt;matrix.at&lt;cv::Point2d&gt;(1);\n</code></pre>\n\n<p>But if you want to save this Mat then use XML. Imwrite wont write the Mat.</p>\n"}], "owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 38568633, "answer_count": 1, "score": 0, "last_activity_date": 1469451985, "creation_date": 1469047038, "question_id": 38490405, "link": "https://stackoverflow.com/questions/38490405/converting-point2d-to-mat", "title": "Converting point2d to Mat", "body": "<p>How can I convert vector&lt;Point2d> to Mat. </p>\n\n<pre><code>     Mat newImg = Mat(ImagePoints);\n     imwrite(\"E:/softwares/1.8.0.71/bin/newImg.png\", newImg); \n</code></pre>\n\n<p>This is not working since imWrite() will only accept channel 1 or 3 or 4 and the Image Points are 2 channel.</p>\n\n<p>I am using OpenCV version 3. </p>\n"}, {"tags": ["c++", "c", "linux", "macos", "memory"], "comments": [{"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1469048931, "post_id": 38490320, "comment_id": 64383336, "body": "mallinfo() with (arena + hblkhd + uordblks)"}, {"owner": {"reputation": 113, "user_id": 6530331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jDWhJ.gif?s=128&g=1", "display_name": "Martin Bisson", "link": "https://stackoverflow.com/users/6530331/martin-bisson"}, "reply_to_user": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1469136951, "post_id": 38490320, "comment_id": 64426486, "body": "@brianbeuning : according to <a href=\"http://man7.org/linux/man-pages/man3/mallinfo.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/mallinfo.3.html</a>, <code>arena</code> is <code>uordblks</code> + <code>fordblks</code>, so your suggestion would end up counting some memory twice..."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6530331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jDWhJ.gif?s=128&g=1", "display_name": "Martin Bisson", "link": "https://stackoverflow.com/users/6530331/martin-bisson"}, "edited": false, "score": 1, "creation_date": 1469115637, "post_id": 38490525, "comment_id": 64415113, "body": "Thanks for the suggestion.  I tried it (reading <code>ru_ixrss</code>, <code>ru_idrss</code> and <code>ru_isrss</code>) and all fields have 0.  According to the man page, &quot;Not all fields are completed; unmaintained fields are set to zero by the kernel.&quot; and &quot;In Linux 2.4 only the fields ru_utime, ru_stime, ru_minflt, and ru_majflt are maintained.  Since Linux 2.6, ru_nvcsw and ru_nivcsw are also maintained.&quot;"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1469047568, "creation_date": 1469047568, "answer_id": 38490525, "question_id": 38490320, "link": "https://stackoverflow.com/questions/38490320/how-to-query-amount-of-allocated-memory-on-linux-and-osx/38490525#38490525", "title": "How to query amount of allocated memory on Linux (and OSX)?", "body": "<p>You can try and use information returned by <code>getrusage()</code>:</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\n\nint getrusage(int who, struct rusage *usage);\n\nstruct rusage {\n    struct timeval ru_utime; /* user CPU time used */\n    struct timeval ru_stime; /* system CPU time used */\n    long   ru_maxrss;        /* maximum resident set size */\n    long   ru_ixrss;         /* integral shared memory size */\n    long   ru_idrss;         /* integral unshared data size */\n    long   ru_isrss;         /* integral unshared stack size */\n    long   ru_minflt;        /* page reclaims (soft page faults) */\n    long   ru_majflt;        /* page faults (hard page faults) */\n    long   ru_nswap;         /* swaps */\n    long   ru_inblock;       /* block input operations */\n    long   ru_oublock;       /* block output operations */\n    long   ru_msgsnd;        /* IPC messages sent */\n    long   ru_msgrcv;        /* IPC messages received */\n    long   ru_nsignals;      /* signals received */\n    long   ru_nvcsw;         /* voluntary context switches */\n    long   ru_nivcsw;        /* involuntary context switches */\n};\n</code></pre>\n\n<p>If the memory information does not fit you purpose, observing the page fault counts can help monitor memory stress, which is what you intend to detect.</p>\n"}, {"tags": [], "owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "is_accepted": false, "score": 2, "last_activity_date": 1469320017, "creation_date": 1469320017, "answer_id": 38547596, "question_id": 38490320, "link": "https://stackoverflow.com/questions/38490320/how-to-query-amount-of-allocated-memory-on-linux-and-osx/38547596#38547596", "title": "How to query amount of allocated memory on Linux (and OSX)?", "body": "<p>Have you tried a shared library interposer for Linux for section (5) above?  So long as your application is not statically linking the malloc functions, you can interpose a new function between your program and the kernel malloc.  I've used this tactic many times to collect stats on memory usage.  </p>\n\n<p>It does required setting LD_PRELOAD before running the program but no source or binary changes.  It is an ideal answer in many cases.</p>\n\n<p>Here is an example of a malloc interposer:</p>\n\n<p><a href=\"http://www.drdobbs.com/building-library-interposers-for-fun-and/184404926\" rel=\"nofollow\">http://www.drdobbs.com/building-library-interposers-for-fun-and/184404926</a></p>\n\n<p>You probably will also want to do calloc and free. Calls to new generally end up as a call to malloc so C++ is covered as well.  </p>\n\n<p>OS X seems to have similar capabilities but I have not tried it.</p>\n\n<p><a href=\"http://tlrobinson.net/blog/2007/12/overriding-library-functions-in-mac-os-x-the-easy-way-dyld_insert_libraries/\" rel=\"nofollow\">http://tlrobinson.net/blog/2007/12/overriding-library-functions-in-mac-os-x-the-easy-way-dyld_insert_libraries/</a></p>\n\n<p>--Matt</p>\n"}, {"comments": [{"owner": {"reputation": 4981, "user_id": 490529, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d62e4dfe127b89706657e13a91a55b15?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/490529/dmitriy"}, "edited": false, "score": 0, "creation_date": 1539180773, "post_id": 43126663, "comment_id": 92409150, "body": "Doesn&#39;t work on Mac Os X, fopen(&quot;/proc/self/maps&quot; returns NULL."}, {"owner": {"reputation": 113, "user_id": 6530331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jDWhJ.gif?s=128&g=1", "display_name": "Martin Bisson", "link": "https://stackoverflow.com/users/6530331/martin-bisson"}, "reply_to_user": {"reputation": 4981, "user_id": 490529, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d62e4dfe127b89706657e13a91a55b15?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/490529/dmitriy"}, "edited": false, "score": 0, "creation_date": 1539277927, "post_id": 43126663, "comment_id": 92453836, "body": "This solution is for Linux, it requires the proc filesystem."}, {"owner": {"reputation": 4981, "user_id": 490529, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d62e4dfe127b89706657e13a91a55b15?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/490529/dmitriy"}, "edited": false, "score": 0, "creation_date": 1539370148, "post_id": 43126663, "comment_id": 92492301, "body": "Did you find a solution for OSX(question title is about OSX too)?"}], "tags": [], "owner": {"reputation": 113, "user_id": 6530331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jDWhJ.gif?s=128&g=1", "display_name": "Martin Bisson", "link": "https://stackoverflow.com/users/6530331/martin-bisson"}, "is_accepted": true, "score": 0, "last_activity_date": 1490901589, "last_edit_date": 1495541417, "creation_date": 1490901589, "answer_id": 43126663, "question_id": 38490320, "link": "https://stackoverflow.com/questions/38490320/how-to-query-amount-of-allocated-memory-on-linux-and-osx/43126663#43126663", "title": "How to query amount of allocated memory on Linux (and OSX)?", "body": "<p>Here is what I ended up using.  I scan /proc/self/maps and sum the size of all the address ranges meeting my criteria, which is:</p>\n\n<ul>\n<li>Only include ranges from inode 0 (i.e. no devices, no mapped file, etc.)</li>\n<li>Only include ranges that are at least one of readable, writable or executable</li>\n<li>Only include private memory\n\n<ul>\n<li>In my experiments I did not see instances of shared memory from inode 0.  Maybe with inter-process shared memory...?</li>\n</ul></li>\n</ul>\n\n<p>Here is the code for my solution:</p>\n\n<pre><code>size_t getValue()\n{\n    FILE* file = fopen(\"/proc/self/maps\", \"r\");\n    if (!file)\n    {\n        assert(0);\n        return 0;\n    }\n\n    size_t value = 0;\n\n    char line[1024];\n    while (fgets(line, 1024, file) != NULL)\n    {\n        ptrdiff_t start_address, end_address;\n        char perms[4];\n        ptrdiff_t offset;\n        int dev_major, dev_minor;\n        unsigned long int inode;\n        const int nb_scanned = sscanf(\n            line, \"%16tx-%16tx %c%c%c%c %16tx %02x:%02x %lu\",\n            &amp;start_address, &amp;end_address,\n            &amp;perms[0], &amp;perms[1], &amp;perms[2], &amp;perms[3],\n            &amp;offset, &amp;dev_major, &amp;dev_minor, &amp;inode\n            );\n        if (10 != nb_scanned)\n        {\n            assert(0);\n            continue;\n        }\n\n        if ((inode == 0) &amp;&amp;\n            (perms[0] != '-' || perms[1] != '-' || perms[2] != '-') &amp;&amp;\n            (perms[3] == 'p'))\n        {\n            assert(dev_major == 0);\n            assert(dev_minor == 0);\n            value += (end_address - start_address);\n        }\n    }\n\n    fclose(file);\n\n    return value;\n}\n</code></pre>\n\n<p>Since this is looping through all the lines in /proc/self/maps, querying memory that way is significantly slower than using \"Virtual Memory currently used by current process\" from <a href=\"https://stackoverflow.com/questions/63166/how-to-determine-cpu-and-memory-consumption-from-inside-a-process\">How to determine CPU and memory consumption from inside a process?</a>.</p>\n\n<p>However, it provides an answer much closer to what I need.</p>\n"}], "owner": {"reputation": 113, "user_id": 6530331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jDWhJ.gif?s=128&g=1", "display_name": "Martin Bisson", "link": "https://stackoverflow.com/users/6530331/martin-bisson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1254, "favorite_count": 4, "accepted_answer_id": 43126663, "answer_count": 3, "score": 11, "last_activity_date": 1490901589, "creation_date": 1469046726, "last_edit_date": 1495542327, "question_id": 38490320, "link": "https://stackoverflow.com/questions/38490320/how-to-query-amount-of-allocated-memory-on-linux-and-osx", "title": "How to query amount of allocated memory on Linux (and OSX)?", "body": "<p>While this might look like a duplicate from other questions, let me explain why it's not.</p>\n\n<p>I am looking to get a specific part of my application to degrade gracefully when a certain memory limit has been reached.  I could have used criteria based on remaining available physical memory, but this wouldn't be safe, because the OS could start paging out memory used by my application before reaching the criteria, which would think there is still some physical memory left, and keep allocating, etc.  For the same reason, I can't used the amount of physical memory currently used by the process, because as soon as the OS would start swapping me out, I would keep allocating as the OS pages memory so the number would not grow anymore.</p>\n\n<p>For this reason, I chose a criteria based on the amount of memory allocated by my application, i.e. very close to virtual memory size.</p>\n\n<p>This question (<a href=\"https://stackoverflow.com/questions/63166/how-to-determine-cpu-and-memory-consumption-from-inside-a-process\">How to determine CPU and memory consumption from inside a process?</a>) provides great ways of querying the amount of virtual memory used by the current process, which I THOUGHT was what I needed.</p>\n\n<p>On Windows, I'm using <code>GetProcessMemoryInfo()</code> and the <code>PrivateUsage</code> field, which works great.</p>\n\n<p>On Linux, I tried several things (listed below) that did not work.  The reason why virtual memory usage does not work for me is because of something that happens with OpenCL context creation on NVidia hardware on Linux.  The driver reserves a region of the virtual memory space big enough to hold all RAM, all swap and all video memory.  My guess is it does so for unified address space and everything.  But it also means that the process reports using enormous amounts of memory.  On my system for instance, <em>top</em> will report 23.3 Gb in the VIRT column (12 Gb of RAM, 6 Gb of swap, 2 Gb of video memory, which gives 20 Gb reserved by the NVidia driver).</p>\n\n<p>On OSX, by using <code>task_info()</code> and the <code>virtual_size</code> field, I also get a bigger than expected number (a few Gb for an app that takes not even close to 1 Gb on Windows), but not as big as Linux.</p>\n\n<p>So here is the big question: how can I get the amount of memory allocated by my application?  I know that this is a somewhat vague question (what does \"allocated memory\" means?), but I'm flexible:</p>\n\n<ul>\n<li>I would prefer to include the application static data, code section and everything, but I can live without.</li>\n<li>I would prefer to include the memory allocated for stacks, but I can live without.</li>\n<li>I would prefer to include the memory used by shared libraries, but I can live without.</li>\n<li>I don't really care for mmap stuff, I can do with or without at that point.</li>\n<li>Etc.</li>\n</ul>\n\n<p>What is really important is that the number grows with dynamic allocation (new, malloc, anything) and shrinks when the memory is released (which I know can be implementation-dependent).</p>\n\n<h1>Things I have tried</h1>\n\n<p>Here are a couple of solutions I have tried and/or thought of but that would not work for me.</p>\n\n<ol>\n<li><p><strong>Read from /proc/self/status</strong></p>\n\n<p>This is the approach suggested by how-to-determine-cpu-and-memory-consumption-from-inside-a-process.  However, as stated above, this returns the amount of virtual memory, which does not work for me.</p></li>\n<li><p><strong>Read from /proc/self/statm</strong></p>\n\n<p><em>Very slightly</em> worst: according to <a href=\"http://kernelnewbies.kernelnewbies.narkive.com/iG9xCmwB/proc-pid-statm-doesnt-match-with-status\" rel=\"nofollow noreferrer\">http://kernelnewbies.kernelnewbies.narkive.com/iG9xCmwB/proc-pid-statm-doesnt-match-with-status</a>, which refers to Linux kernel code, the only difference between those two values is that the second one does not substract <code>reserved_vm</code> to the amount of virtual memory.  I would have HOPED that <code>reserved_vm</code> would include the memory reserved by the OpenCL driver, but it does not.</p></li>\n<li><p><strong>Use <code>mallinfo()</code> and the <code>uordblks</code> field</strong></p>\n\n<p>This does not seem to include all the allocations (I'm guessing the <code>new</code>s are missing), since for an +2Gb growth in virtual memory space (after doing some memory-heavy work and still holding the memory), I'm only seeing about 0.1Gb growth in the number returned by <code>mallinfo()</code>.</p></li>\n<li><p><strong>Read the [heap] section size from /proc/self/smaps</strong></p>\n\n<p>This value started at around 336,760 Kb and peaked at 1,019,496 Kb for work that grew virtual memory space by +2Gb, and then it never gets down, so I'm not sure I can't really rely on this number...</p></li>\n<li><p><strong>Monitor all memory allocations in my application</strong></p>\n\n<p>Yes, in an ideal world, I would have control over everybody who allocates memory.  However, this is a legacy application, using tons of different allocators, some <code>malloc</code>s, some <code>new</code>s, some OS-specific routines, etc.  There are some plug-ins that could do whatever they want, they could be compiled with a different compiler, etc.  So while this would be great to really control memory, this does not work in my context.</p></li>\n<li><p><strong>Read the virtual memory size before and after the OpenCL context initialization</strong></p>\n\n<p>While this could be a \"hacky\" way to solve the problem (and I might have to fallback to it), I would really wish for a more reliable way to query memory, because OpenCL context could be initialized somewhere out of my control, and other similar but non-OpenCL specific issues could creep in and I wouldn't know about it.</p></li>\n</ol>\n\n<p>So that's pretty much all I've got.  There is one more thing I have not tried yet, because it only works on OSX, but it is to use the approach described in <a href=\"https://stackoverflow.com/questions/25609945/why-does-mstats-and-malloc-zone-statistics-not-show-recovered-memory-after-free\">Why does mstats and malloc_zone_statistics not show recovered memory after free?</a>, i.e. use <code>malloc_get_all_zones()</code> and <code>malloc_zone_statistics()</code>, but I think this might be the same problem as <code>mallinfo()</code>, i.e. not take all allocations into account.</p>\n\n<p>So, can anyone suggest a way to query memory usage (as vague of a term as this is, see above for precision) of a given process in Linux (and also OSX even if it's a different method)?</p>\n"}, {"tags": ["c++", "algorithm", "performance", "stl"], "comments": [{"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1469046620, "post_id": 38490237, "comment_id": 64382196, "body": "Maybe because it&#39;s not as straightforward to understand?"}], "answers": [{"comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 1, "creation_date": 1469047025, "post_id": 38490311, "comment_id": 64382403, "body": "And sometimes implementation given on cppreference is incorrect implementation, because it does not work for some corner cases which require much more code or SFINAE trickery."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469047390, "post_id": 38490311, "comment_id": 64382605, "body": "Did not quite understand why secondary binary search needs to search for the first copy."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469047491, "post_id": 38490311, "comment_id": 64382662, "body": "@Slava The first binary search reduces the upper and lower bounds of the search range until a copy is found.  Your implementation only reduced the range by moving the lower bound."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469048142, "post_id": 38490311, "comment_id": 64382992, "body": "I believe you are <i>exactly</i> correct. The shown (one of many possible) implementation is there to help people understand the algorithm. It is not intended to show the <i>best</i> implementation, just an understandable one.  Have an upvote - good answer all-round."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 7, "last_activity_date": 1469051468, "last_edit_date": 1469051468, "creation_date": 1469046679, "answer_id": 38490311, "question_id": 38490237, "link": "https://stackoverflow.com/questions/38490237/possible-implementation-of-stdequal-range/38490311#38490311", "title": "Possible implementation of std::equal_range", "body": "<p>The implementation given on cppreference is a <em>possible</em> implementation, not necessarily the most <em>optimized</em> implementation. I think it was included for clarity's sake so that a reader could get a better feel for what the algorithm is doing internally rather than as a guide for the fastest of all possible implementations.</p>\n\n<p>As long as you're optimizing the implementation, you might consider having some logic to check if the range is small and, if so, to use a linear search instead of a binary search.</p>\n\n<p>It might be helpful to look at an actual implementation to see how it's structured. Take a look at, say, <a href=\"https://github.com/gcc-mirror/gcc/blob/54ee8abfe62dc97f725843f58fe896eebcc52db0/libstdc%2B%2B-v3/include/bits/stl_algo.h#L2118\" rel=\"nofollow\">the libstdc++ implementation</a>, which is exceptionally dense and much harder to read than the clearer but less efficient version given at cppreference. That version - as of the time of this writing - uses a totally different approach:</p>\n\n<ol>\n<li>Use an initial binary search to search for any copy of the element.</li>\n<li>Use secondary binary search on the remaining window to find the first and last copies of the elements in that range.</li>\n</ol>\n\n<p>That approach is likely to be even faster than what you're proposing, since a lot of work from the two binary searches can be shared.</p>\n"}], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 1, "accepted_answer_id": 38490311, "answer_count": 1, "score": 3, "last_activity_date": 1469051468, "creation_date": 1469046387, "last_edit_date": 1469046942, "question_id": 38490237, "link": "https://stackoverflow.com/questions/38490237/possible-implementation-of-stdequal-range", "title": "Possible implementation of std::equal_range", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/equal_range\" rel=\"nofollow\">std::equal_range</a> documentation on <a href=\"http://cppreference.com/\" rel=\"nofollow\">cppreference.com</a> shows a possible implementation:</p>\n\n<pre><code>template&lt;class ForwardIt, class T&gt;\nstd::pair&lt;ForwardIt,ForwardIt&gt; \n    equal_range(ForwardIt first, ForwardIt last,\n                const T&amp; value)\n{\n    return std::make_pair(std::lower_bound(first, last, value),\n                          std::upper_bound(first, last, value));\n}\n</code></pre>\n\n<p>but this looks more optimal while still pretty simple:</p>\n\n<pre><code>template&lt;class ForwardIt, class T&gt;\nstd::pair&lt;ForwardIt,ForwardIt&gt; \n    equal_range(ForwardIt first, ForwardIt last,\n                const T&amp; value)\n{\n    first = std::lower_bound(first, last, value);\n    return std::make_pair(first,\n                          std::upper_bound(first, last, value));\n}\n</code></pre>\n\n<p>as this solution is pretty obvious, is there any reason it is not used?</p>\n"}, {"tags": ["c++", "templates", "stdvector"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1469044429, "post_id": 38489642, "comment_id": 64381031, "body": "<a href=\"http://coliru.stacked-crooked.com/a/3ad139c309b53f99\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/3ad139c309b53f99</a> ; <code>=std::allocator&lt;T&gt;</code> isn&#39;t necessary."}, {"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 1, "creation_date": 1469044560, "post_id": 38489642, "comment_id": 64381099, "body": "Doesn&#39;t work how? Btw it&#39;ll change local variable <code>vec</code> only."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1469044785, "post_id": 38489642, "comment_id": 64381217, "body": "both intel c compiler and gcc complains using a &lt;&gt; within template &lt;...&gt;. The problem seems the second template argument  depends on the 1st template argument."}, {"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 1, "creation_date": 1469044962, "post_id": 38489642, "comment_id": 64381299, "body": "<code>&gt;&gt;</code> is a problem in c++ standards before std c++11. It must be separated by space."}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1469045006, "post_id": 38489642, "comment_id": 64381320, "body": "wow. never knew that. let me try."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1469045338, "post_id": 38489642, "comment_id": 64381503, "body": "This seems like pretty much an imitation of <code>std::fill_n</code>, which you&#39;d use like: <code>fill_n(back_inserter(vec), n, 0);</code>"}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1469045489, "post_id": 38489642, "comment_id": 64381580, "body": "@JerryCoffin: how to copy n values from an ifstream iterator into the std::vector?"}, {"owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "edited": false, "score": 0, "creation_date": 1469045943, "post_id": 38489642, "comment_id": 64381834, "body": "too bad that the compiler on the computer can&#39;t use fill_n..."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1469046406, "post_id": 38489642, "comment_id": 64382072, "body": "@rxu: <code>std::copy_n</code> seems like the obvious choice."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1469048249, "post_id": 38489642, "comment_id": 64383051, "body": "@JerryCoffin That&#39;s worse than just using <code>vec.insert(vec.end(), n, 0)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1469044730, "last_edit_date": 1469044730, "creation_date": 1469044607, "answer_id": 38489726, "question_id": 38489642, "link": "https://stackoverflow.com/questions/38489642/c-template-for-stdvector-with-custom-memory-allocator/38489726#38489726", "title": "c++ template for std::vector with custom memory allocator", "body": "<p>You do not need to provide a default for the allocator. But really the problem is that you're padding a local variable - you accept <code>vec</code> by <em>value</em>!</p>\n\n<p>Take it by reference, and drop the unnecessary default. Moreover, there's an overload of <a href=\"http://en.cppreference.com/w/cpp/container/vector/insert\" rel=\"nofollow\"><code>insert()</code></a> that does exactly what you want, no manual looping necessary (which is not only verbose but inefficient due to the uncertain number of reallocations):</p>\n\n<pre><code>template &lt;typename T, typename A&gt;\nvoid pad_zero(std::vector&lt;T,A&gt;&amp; vec, uint32_t n) {\n//                           ^^^\n    vec.insert(vec.end(), n, T{0});\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": false, "score": 2, "last_activity_date": 1469044737, "creation_date": 1469044737, "answer_id": 38489764, "question_id": 38489642, "link": "https://stackoverflow.com/questions/38489642/c-template-for-stdvector-with-custom-memory-allocator/38489764#38489764", "title": "c++ template for std::vector with custom memory allocator", "body": "<p>You don't need to provide the allocator, template-argument-deduction will do that for you.</p>\n\n<p>Note additionally that you're passing your vector by value, so inside <code>pad_zero</code> you get a <strong>copy</strong> of the vector, whilst the original one remains unchanged, which is probably not what you're looking for</p>\n\n<p>See code below</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5457167a4aeb36db\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/5457167a4aeb36db</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate &lt;typename T, typename A&gt;\nvoid pad_zero(std::vector&lt;T,A&gt;&amp; vec, uint32_t n)\n{\n    uint32_t i;\n    for (i = 0; i &lt; n; i++)\n    {\n        vec.push_back(0);\n    }\n}\n\nint main()\n{\n    std::vector&lt;int&gt; a = { 1, 2, 3 };\n    pad_zero(a, 10);\n\n    for (int i : a)\n        std::cout &lt;&lt; i &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n<pre><code>1\n2\n3\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 38489726, "answer_count": 2, "score": 2, "last_activity_date": 1469044737, "creation_date": 1469044295, "question_id": 38489642, "link": "https://stackoverflow.com/questions/38489642/c-template-for-stdvector-with-custom-memory-allocator", "title": "c++ template for std::vector with custom memory allocator", "body": "<p>I want to make a template for an argument of a function.</p>\n\n<p>The argument is a <code>std::vector&lt;type&gt;</code> with an allocator.</p>\n\n<p>The default is to use the default memory allocator, but custom allocator can also be used.</p>\n\n<p>The following code doesn't work. How to fix this?</p>\n\n<pre><code>template &lt;typename T, typename T2=std::allocator&lt;T&gt;&gt;\nvoid pad_zero(std::vector&lt;T,T2&gt; vec, uint32_t n){\n    uint32_t i;\n    for (i = 0; i &lt; n; i++){\n        vec.push_back(0);\n    }\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1469044398, "post_id": 38489538, "comment_id": 64381010, "body": "Can you be more specific than &quot;incorporating different classes?&quot; What&#39;s the problem you want to solve? Do you need to instantiate classes of varying types that are only determined at runtime? Or are you simply encapsulating basic polymorphism?"}, {"owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1469045186, "post_id": 38489538, "comment_id": 64381418, "body": "@TimStraubinger Thanks. I have reedited the name of the title. The main question is what kind of problem of using the factory design pattern method to incorporatrice different classes as shown in the example."}, {"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 0, "creation_date": 1469046959, "post_id": 38489538, "comment_id": 64382367, "body": "I believe <a href=\"https://sourcemaking.com/design_patterns/abstract_factory\" rel=\"nofollow noreferrer\">Abstract Factory</a> is more suit to your problem thant Factory Method."}], "answers": [{"comments": [{"owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "edited": false, "score": 0, "creation_date": 1469045104, "post_id": 38489796, "comment_id": 64381376, "body": "Thanks, and I have named the title of my question. Thanks."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 3, "last_activity_date": 1469044860, "creation_date": 1469044860, "answer_id": 38489796, "question_id": 38489538, "link": "https://stackoverflow.com/questions/38489538/using-factory-method-to-incorporate-different-classes-c/38489796#38489796", "title": "Using factory method to incorporate different classes (c++)", "body": "<blockquote>\n  <p>Is factory method the only way of incorporating different classes?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>I'm not quite sure I understand your question correctly. But if I do and you are asking if a factory class is the only way to instantiate your derived classes and get a base-class pointer to them, then the answer is \"no\".</p>\n\n<p>You could simply do <code>Base* b = new ExtendA;</code>.</p>\n\n<p>If I misunderstood your question, then just disregard my answer but please attempt to clarify the question.</p>\n"}], "owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469045068, "creation_date": 1469043906, "last_edit_date": 1469045068, "question_id": 38489538, "link": "https://stackoverflow.com/questions/38489538/using-factory-method-to-incorporate-different-classes-c", "title": "Using factory method to incorporate different classes (c++)", "body": "<p>I give the following codes to illustrate my question:</p>\n\n<pre><code>class Basic \n{\n  public:\n      Basic();\n      ~Basic();\n};\n\nclass ExtendA: public Basic\n{\n  public:\n      class Para\n      {\n       };\n      Para para_;\n\n};\nclass ExtendB: public Basic\n{\n   public:\n    class Para\n    {\n\n     };\n    Para para_;\n};\n\nenum Method\n{\n   MedExtendA, \n   MedExtendB,\n   MedExtendAVar1,\n   MedExtendBVar1\n};\n\nclass Enginee\n{\n public: \n     class Para()\n     {\n      public:\n         ExtendA::Para paraA_;\n         ExtendB::Para paraB_;\n     };\n     Para paraEnginee_;\n     Enginee(Method med)\n     {\n         switch(med):\n         {\n           case MedExtendA:\n              pBasic.reset(new ExtendA());\n              break;\n           case MedExtendAVar1:\n              pBasic.reset(new ExtendA());\n              ExtendA *p = dynamic_cast&lt;ExtendA *&gt; (pBasic.get());\n              p.para_ = ; // set the parameter\n              break;\n           case MedExtendB:\n                 ...\n              break;\n           case MedExtendBVar1:\n                  ...\n              break;\n\n         }\n     }\n     ~Enginee()\n     {\n      }\n     boost::shared_ptr&lt;Basic&gt; pBasic;\n };\n</code></pre>\n\n<p>From the above example, we can see that <code>Basic</code> is the base class while <code>ExtendA</code> and <code>ExtendB</code> are derived class based on <code>Basic</code> class. class <code>Enginee</code> is a factory class, which facilitates invoking other classes. The reason why <code>Enginee</code> class is needed can be shown in the following example:</p>\n\n<p>Without <code>Enginee</code> class:</p>\n\n<pre><code>ExtendA objA;\nobjA.para_ /// parameter setting\nobjA.do_something(); \n</code></pre>\n\n<p>With Enginee class:</p>\n\n<pre><code>   Enginee myEngine(MedExtendAVar1);\n     myEngine.do_something();\n</code></pre>\n\n<p>In a word, using factory method to construct a <code>Enginee</code> class gives a uniform interface for using <code>ExtendA</code> and <code>ExtendB</code> class. In the above example, depending on parameter setting, we can kind of create different varieties of classes, which can be invoked very easily. However, it also makes the codes more complicated. So here is my question: are there other alternative solutions? what's the problem of the proposed solution?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469046878, "post_id": 38489528, "comment_id": 64382338, "body": "Don&#39;t use an array. Use a priority queue. This will keep the list nicely sorted and sized."}, {"owner": {"reputation": 31, "user_id": 6615039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2c400fcd6129a914d86d1af5fa28390e?s=128&d=identicon&r=PG&f=1", "display_name": "KnightValor", "link": "https://stackoverflow.com/users/6615039/knightvalor"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469047498, "post_id": 38489528, "comment_id": 64382666, "body": "@user4581301 This is part of an assignment which specifies that I must use an array, so unfortunately I can&#39;t use a priority queue."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6615039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2c400fcd6129a914d86d1af5fa28390e?s=128&d=identicon&r=PG&f=1", "display_name": "KnightValor", "link": "https://stackoverflow.com/users/6615039/knightvalor"}, "edited": false, "score": 0, "creation_date": 1469047412, "post_id": 38489792, "comment_id": 64382617, "body": "I made the changes you recommended, which did fix the spaces problem, but the guessed letters now do not sort correctly. I have tested the <code>bubblesort()</code> function and I know it works correctly, so this is not the issue. I can&#39;t seem to figure out why the guesses are not sorting correctly anymore..."}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "reply_to_user": {"reputation": 31, "user_id": 6615039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2c400fcd6129a914d86d1af5fa28390e?s=128&d=identicon&r=PG&f=1", "display_name": "KnightValor", "link": "https://stackoverflow.com/users/6615039/knightvalor"}, "edited": false, "score": 0, "creation_date": 1469047642, "post_id": 38489792, "comment_id": 64382743, "body": "@KnightValor maybe you should send <code>incorrectCount+1</code> to <code>bubblesort</code>?"}, {"owner": {"reputation": 31, "user_id": 6615039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2c400fcd6129a914d86d1af5fa28390e?s=128&d=identicon&r=PG&f=1", "display_name": "KnightValor", "link": "https://stackoverflow.com/users/6615039/knightvalor"}, "edited": false, "score": 0, "creation_date": 1469047781, "post_id": 38489792, "comment_id": 64382810, "body": "Ah good point. That fixed the problem. Thanks a bunch for the help."}], "tags": [], "owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "is_accepted": true, "score": 0, "last_activity_date": 1469047892, "last_edit_date": 1469047892, "creation_date": 1469044851, "answer_id": 38489792, "question_id": 38489528, "link": "https://stackoverflow.com/questions/38489528/char-array-formatting/38489792#38489792", "title": "Char Array Formatting", "body": "<p>As I understand the array <code>wrongletters</code> contain at the beginning it of the wrong letters guesed so far. So there is no point of print all of it and especially <strong>sort all of it</strong>. </p>\n\n<p>Hence you should change: </p>\n\n<pre><code>for (int i = 0; i &lt; incorrectCount; i++) // incorrectCount replaced 26\n    cout &lt;&lt; wrongLetters[i] &lt;&lt; \" \";\n\n...\n\nelse\n{\n    incorrectCount++;\n    wrongLetters[incorrectCount] = guessLetter;\n    bubbleSort(wrongLetters, incorrectCount+1); // incorrectCount replaced numWrongLetters\n}\n</code></pre>\n\n<p>Otherwise when you sort all of the array the spaces go first before the wrong letters.</p>\n"}, {"comments": [{"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1469045172, "post_id": 38489811, "comment_id": 64381408, "body": "The OP problem is spaces <b>before</b> the letters"}], "tags": [], "owner": {"reputation": 5, "user_id": 6464985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcf240848f76e2fa85aacbc30d0c96b2?s=128&d=identicon&r=PG&f=1", "display_name": "guiiigz", "link": "https://stackoverflow.com/users/6464985/guiiigz"}, "is_accepted": false, "score": -1, "last_activity_date": 1469044897, "creation_date": 1469044897, "answer_id": 38489811, "question_id": 38489528, "link": "https://stackoverflow.com/questions/38489528/char-array-formatting/38489811#38489811", "title": "Char Array Formatting", "body": "<p>Because even if your char sequence is empty, you ask in your loop to display a space after the wrongLetters[i]. Replace the ' ' by endl and you will have<br>\nA<br>\nB<br>\nC<br>\nD</p>\n"}], "owner": {"reputation": 31, "user_id": 6615039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2c400fcd6129a914d86d1af5fa28390e?s=128&d=identicon&r=PG&f=1", "display_name": "KnightValor", "link": "https://stackoverflow.com/users/6615039/knightvalor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 38489792, "answer_count": 2, "score": 0, "last_activity_date": 1469047892, "creation_date": 1469043889, "question_id": 38489528, "link": "https://stackoverflow.com/questions/38489528/char-array-formatting", "title": "Char Array Formatting", "body": "<p>I am working on a hangman game where incorrect letter guesses are stored in a char array called <code>wrongletters</code>. Of course, the user begins the game with zero wrongletters, so the <code>wrongletters</code> array remains empty upon declaration. The problem I am having is that when I try to display the wrong letters, the letters are spaced very far to the right because of all the other non-value elements in the array</p>\n\n<p>Intended: (Guessed Letters: A B C D)</p>\n\n<p>Current:  (Guessed Letters:        (Extra Spaces)                  A B C D)</p>\n\n<p>Any thoughts? (I am aware game does not function properly yet):</p>\n\n<pre><code>void gameSequence()     // Runs the hangman game loop\n{\n// Local and Global Variable Declaration and Initialization\nchar guessLetter = ' ';\nguessWord = strToUpper(getNextWord());\nstring maskedWord(guessWord.size(), '_');\nchar wrongLetters[26] = {};\nint numWrongLetters = sizeof(wrongLetters) / sizeof(wrongLetters[0]);\n\n// Input, Process, and Output\ncout &lt;&lt; \"\\nLet's PLAY\\n\\n\";\nfor (int i = 0; i &lt; maskedWord.length(); i++)\n    cout &lt;&lt; maskedWord[i] &lt;&lt; \" \";\n\nwhile (incorrectCount &lt; 6)\n{\n    drawHangman(incorrectCount);\n    cout &lt;&lt; \"&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; MAKE A GUESS &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\\n\\n\";\n    cout &lt;&lt; \"Guessed Letters: \";\n\n    for (int i = 0; i &lt; 26; i++)\n        cout &lt;&lt; wrongLetters[i] &lt;&lt; \" \";\n\n    cout &lt;&lt; \"\\n\\nEnter a letter to guess: \";\n    cin &gt;&gt; guessLetter;\n    cout &lt;&lt; endl;\n    guessLetter = toupper(guessLetter);\n\n    for (int i = 0; i &lt; maskedWord.length(); i++)\n        cout &lt;&lt; maskedWord[i] &lt;&lt; \" \";\n\n    if (guessWord.find(guessLetter) != string::npos)\n    {\n        for (int i = 0; i &lt; maskedWord.length(); i++)\n        {\n            if (maskedWord[i] == guessLetter)\n                maskedWord[i] = guessLetter;\n        }\n    }\n    else\n    {\n        incorrectCount++;\n        wrongLetters[incorrectCount] = guessLetter;\n        bubbleSort(wrongLetters, numWrongLetters);\n    }\n        if (incorrectCount == 6)\n        {\n            drawHangman(incorrectCount);\n            cout &lt;&lt; \"Sorry you lose - the word was: \" &lt;&lt; guessWord &lt;&lt; endl &lt;&lt; endl;\n        }\n}\nincorrectCount = 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469044295, "post_id": 38489473, "comment_id": 64380948, "body": "Hint: Add a const number of spaces on every row iteration (new line). As you see, spaces are constantly repetitive."}, {"owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469044476, "post_id": 38489473, "comment_id": 64381062, "body": "Thanks, I will give that a try."}], "answers": [{"tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": true, "score": 3, "last_activity_date": 1469068382, "last_edit_date": 1469068382, "creation_date": 1469044921, "answer_id": 38489818, "question_id": 38489473, "link": "https://stackoverflow.com/questions/38489473/how-to-draw-opposite-inverse-triangle/38489818#38489818", "title": "How to draw opposite inverse triangle?", "body": "<p>This should work: </p>\n\n<pre><code>   for (int lines = 0; lines &lt; triBase; lines++)\n    {\n        for (int rows = 0; rows &lt;= lines; rows++)\n        {\n            cout &lt;&lt; \"* \";\n        }\n\n        cout &lt;&lt; std::string(30, ' '); // 30 spaces\n\n        for(int i = 0; i &lt; triBase - lines; i++)\n        {\n            cout &lt;&lt; \"* \";\n        }\n\n        cout &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>As you see, on every line, and once you are done with plotting your <code>*</code>, then I add a const number of spaces and execute a new for loop to display the <code>*</code> as <code>triBase - lines</code> times. </p>\n\n<p>Also, it is better to think about it as a 2D table with rows and columns, so your <code>lines</code> are actually rows, and your <code>rows</code> are actually columns.</p>\n"}, {"comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469046285, "post_id": 38490066, "comment_id": 64382004, "body": "No reason for using a for loop to display a const number of spaces."}, {"owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469046599, "post_id": 38490066, "comment_id": 64382185, "body": "Thanks, I will fix that."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469046637, "post_id": 38490066, "comment_id": 64382207, "body": "See what @NathanOliver suggested in the comments"}, {"owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469047182, "post_id": 38490066, "comment_id": 64382488, "body": "@FirstStep got it."}, {"owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469047188, "post_id": 38490066, "comment_id": 64382492, "body": "@NathanOliver Thank you! That was much easier."}, {"owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1469047209, "post_id": 38490066, "comment_id": 64382506, "body": "@FirstStep much appreciated."}], "tags": [], "owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "is_accepted": false, "score": 1, "last_activity_date": 1469047094, "last_edit_date": 1469047094, "creation_date": 1469045757, "answer_id": 38490066, "question_id": 38489473, "link": "https://stackoverflow.com/questions/38489473/how-to-draw-opposite-inverse-triangle/38490066#38490066", "title": "How to draw opposite inverse triangle?", "body": "<p>I was able to get it to work. Here is the final code:</p>\n\n<pre><code>#include \"main.h\"\nusing namespace std;\n\nint main()\n{\n    int triBase = 0;\n    string spaces(30, ' '); \n\n    cout &lt;&lt; \"Enter a base number for the triangle [1-100]: \";\n    cin &gt;&gt; triBase;\n    cout &lt;&lt; endl;\n    while(!cin || triBase &gt; 100 || triBase &lt;= 0)\n    {   \n        system (\"clear\");\n        cout &lt;&lt; \"Invalid input!\" &lt;&lt; endl;\n        cin.clear();\n        cin.ignore(10, '\\n');\n        cout &lt;&lt; \"Enter a base number for the triangle [1-100]: \";\n        cin &gt;&gt; triBase;\n        cout &lt;&lt; endl;\n    }   \n\n    system (\"clear\");\n    for(int lines = 0; lines &lt; triBase; lines++)\n    {   \n        for(int rows = 0; rows &lt;= lines; rows++)\n        {   \n            cout &lt;&lt; \"* \";\n        }   \n        cout &lt;&lt; spaces;\n        for(int secondRow = 0; secondRow &lt; triBase - lines; secondRow++)\n        {   \n            cout &lt;&lt; \"* \";\n        }   \n        cout &lt;&lt; endl;\n    }   \n\n    return 0;   \n}\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 5859194, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a539c08ebb2d8bd85d5ac84f29a820ef?s=128&d=identicon&r=PG&f=1", "display_name": "ryanpback", "link": "https://stackoverflow.com/users/5859194/ryanpback"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 38489818, "answer_count": 2, "score": -1, "last_activity_date": 1469068382, "creation_date": 1469043731, "question_id": 38489473, "link": "https://stackoverflow.com/questions/38489473/how-to-draw-opposite-inverse-triangle", "title": "How to draw opposite inverse triangle?", "body": "<p>I'm playing around with some code today (I'm a beginner). I just wrote a simple program to make a triangle in which the base is determined by the user's input.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include \"main.h\"\nusing namespace std;\n\nint main()\n{\n    int triBase = 0;\n\n    cout &lt;&lt; \"Enter a base number for the triangle [1-100]: \";\n    cin &gt;&gt; triBase;\n    cout &lt;&lt; endl;\n    while(!cin || triBase &gt; 100 || triBase &lt;= 0)\n    {   \n        system (\"clear\");\n        cout &lt;&lt; \"Invalid input!\" &lt;&lt; endl;\n        cin.clear();\n        cin.ignore(10, '\\n');\n        cout &lt;&lt; \"Enter a base number for the triangle [1-100]: \";\n        cin &gt;&gt; triBase;\n        cout &lt;&lt; endl;\n    }   \n\n    system (\"clear\");\n    for(int lines = 0; lines &lt; triBase; lines++)\n    {   \n        for(int rows = 0; rows &lt;= lines; rows++)\n        {   \n            cout &lt;&lt; \"* \";\n        }   \n    cout &lt;&lt; endl;\n    }   \n\n\n    return 0;   \n}\n</code></pre>\n\n<p>My question is, how would I go about making the triangle appear on the opposite side of the screen in an inverse order? Example, the user enters 5, the screen would show:</p>\n\n<pre><code>*                                                            *****\n**                                                            ****\n***                                                            ***\n****                                                            **\n*****                                                            *\n</code></pre>\n\n<p>Or if they enter 12:</p>\n\n<pre><code>*                                                       ************\n**                                                       ***********\n***                                                       **********\n****                                                       *********\n*****                                                       ********\n******                                                       *******\n*******                                                       ******\n********                                                       *****\n*********                                                       ****\n**********                                                       ***\n***********                                                       **                \n************                                                       *\n</code></pre>\n\n<p>Is there a way to know how may characters can fit across the screen, subtract the number of characters that would fit on that line, then add the difference in spaces in order for them to start in the correct place so that each line ends at the last spot on the screen? Thank you in advance.</p>\n"}, {"tags": ["c++", "arrays", "image", "opencv", "rgb"], "comments": [{"owner": {"reputation": 1177, "user_id": 1301624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18f36badd852b20f7e745309b0b65c?s=128&d=identicon&r=PG", "display_name": "cxyzs7", "link": "https://stackoverflow.com/users/1301624/cxyzs7"}, "edited": false, "score": 0, "creation_date": 1469050397, "post_id": 38489423, "comment_id": 64383997, "body": "Your description of the <code>data</code> is a bit confusing, could you make it more clear? Is each channel (single R) an integer(int)? Or each of them is a unsigned char, and together they make an int (with one additional unsigned char for padding)?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6538743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b0fd57d621d42fc90b12541bc2c82dc1?s=128&d=identicon&r=PG&f=1", "display_name": "OCW", "link": "https://stackoverflow.com/users/6538743/ocw"}, "edited": false, "score": 0, "creation_date": 1469132519, "post_id": 38496775, "comment_id": 64424382, "body": "Thank you so much - this worked! I figured it had something to do with the type, but I wasn&#39;t adept enough with C++/OpenCV to figure it out."}], "tags": [], "owner": {"reputation": 3849, "user_id": 5198595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e45c7ec5cb67cf3cdf2186d8037e29?s=128&d=identicon&r=PG&f=1", "display_name": "Sunreef", "link": "https://stackoverflow.com/users/5198595/sunreef"}, "is_accepted": true, "score": 5, "last_activity_date": 1469083358, "creation_date": 1469083358, "answer_id": 38496775, "question_id": 38489423, "link": "https://stackoverflow.com/questions/38489423/c-convert-rgb-1-d-array-to-opencv-mat-image/38496775#38496775", "title": "C++ - Convert RGB 1-D Array to OpenCV Mat Image", "body": "<p>If you want to obtain a color image, the type <code>CV_8U</code> is not enough. This type represents a <em>single-channel</em> 8-bit image. What you want is <code>CV_8UC4</code> if your data is indeed an array of 32-bit integers. </p>\n\n<pre><code>cv::Mat image = cv::Mat(width, height, CV_8UC4, (unsigned*)data);\n</code></pre>\n\n<p>The 4th channel represents alpha value (transparency). If you want to drop it, you can ask OpenCV to convert your image to a <code>CV_8UC3</code>.</p>\n\n<pre><code>image = cv2.cvtColor(image, cv2.CV_BGRA2BGR)\n</code></pre>\n\n<p>Also, bear in mind that OpenCV represents color values in the BGR order. Make sure that your data is in the BGR format when creating your image.</p>\n"}], "owner": {"reputation": 63, "user_id": 6538743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b0fd57d621d42fc90b12541bc2c82dc1?s=128&d=identicon&r=PG&f=1", "display_name": "OCW", "link": "https://stackoverflow.com/users/6538743/ocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7043, "favorite_count": 1, "accepted_answer_id": 38496775, "answer_count": 1, "score": 2, "last_activity_date": 1469083358, "creation_date": 1469043544, "question_id": 38489423, "link": "https://stackoverflow.com/questions/38489423/c-convert-rgb-1-d-array-to-opencv-mat-image", "title": "C++ - Convert RGB 1-D Array to OpenCV Mat Image", "body": "<p>I'm using C++ and I have a void* array of image data. I've determined that it's an array of RGB pixel values, and I have information about the width and height of the resulting image. Each pixel value is an integer of interleaved R, G, and B integers (i.e. 123456 = R:12, G:34, B:56). I need to convert this array to an OpenCV Mat image. I've found many examples of this online, but none have been successful for me. Here is an abbreviated version of the code that has come closest to working for me:</p>\n\n<pre><code>cv::Mat image = cv::Mat(width*height*4, 1, CV_8U, (unsigned*)data);\ncv::Mat reshaped = image.reshape(0, height);\ncv::imwrite(\"Test.jpg\", reshaped);\n</code></pre>\n\n<p>The code above saves a grayscale, elongated version of my color image. I have also tried:</p>\n\n<pre><code>cv::Mat image = cv::Mat(width, height, CV_8U, (unsigned*)data);\ncv::imwrite(\"Test.jpg\", image);\n</code></pre>\n\n<p>The code above saves a chopped-up, grayscale version of my color image. Anything else I've tried (CV_16U, CV_32F, (byte*)data, etc.) has just returned a black image. What am I doing wrong?</p>\n\n<p>Alternatively, I'm only using OpenCV because I can't find an easier way of saving an image from an array using C++ without using a for loop. I've been successful in saving a PPM image by looping through all of the pixels and saving them individually, but now I need something more efficient. If there's a different way to save images from an array, I would be happy to use that instead.</p>\n"}, {"tags": ["c++", "visual-studio-2012", "visual-studio-debugging", "debug-symbols"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1469045102, "post_id": 38489394, "comment_id": 64381373, "body": "I suspect you&#39;re rather confused. The <i>program</i> doesn&#39;t load the symbols, Visual Studio does. And Visual Studio loads those symbols asynchronously. The fact that your program freezes is unrelated."}, {"owner": {"reputation": 68, "user_id": 6036456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f905554b7d15d87af005667daf5d1563?s=128&d=identicon&r=PG&f=1", "display_name": "MKennedy", "link": "https://stackoverflow.com/users/6036456/mkennedy"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469045310, "post_id": 38489394, "comment_id": 64381489, "body": "Possibly, I&#39;ve never seen this kind of issue before, but the symbol loading does seem to highly correlate to the program freezing. When the program works without issues all the symbols load 1-10+ per second, otherwise it all freezes at the same time."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469045686, "post_id": 38489394, "comment_id": 64381689, "body": "@MSalters If the VS debugger is attached to a process, that process will &quot;freeze&quot; while VS loads symbols. Triggering something like an open file dialog can cause a bunch of new DLLs to be loaded into the process and by default VS will try to get symbols for them all."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469045717, "post_id": 38489394, "comment_id": 64381702, "body": "@MKennedy Do you get different/better results if you start the program normally and then attach the debugger once it&#39;s up and running?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1469047980, "post_id": 38489394, "comment_id": 64382919, "body": "Whenever a thread deadlocks then it will of course also stop loading DLLs. Deadlock bugs rarely repeat well and are often affected by timing.  So you are focusing on the completely wrong issue.  UI thread deadlocks are a fairly common mishap whenever you open a file dialog, programmers have too many shell extensions installed on their machine and they are not exactly always of the best quality.  Use SysInternals&#39; AutoRuns to disable them."}], "owner": {"reputation": 68, "user_id": 6036456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f905554b7d15d87af005667daf5d1563?s=128&d=identicon&r=PG&f=1", "display_name": "MKennedy", "link": "https://stackoverflow.com/users/6036456/mkennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 761, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469043741, "creation_date": 1469043426, "last_edit_date": 1469043741, "question_id": 38489394, "link": "https://stackoverflow.com/questions/38489394/visual-studio-debugging-symbols-never-load-causing-program-freezes", "title": "Visual Studio Debugging - Symbols never load, causing program freezes", "body": "<p>*On Windows 7, Visual Studio 2012 Professional, if it's relevant. </p>\n\n<p>I've been stuck on this issue for several days now and scoured all remotely related stackoverflow answers I can find with no solutions working. The project developers seem to have no idea and I don't think it's related to their code but rather my setup.</p>\n\n<p>I'm attempting to debug a C++ application written by someone else, same code runs without issues on several other computers but freezes on my computer when opening a windows file dialog (for opening or saving files.) </p>\n\n<p>Per the debugger it'll freeze while trying to load symbols from libraries such as:</p>\n\n<ul>\n<li><p>shdocvw.dll (most common)</p></li>\n<li><p>networkexplorer.dll</p></li>\n<li><p>ieframe.dll</p></li>\n<li><p>dfscli.dll</p></li>\n<li><p>wbemsvc.dll</p></li>\n<li><p>FirewallAPI.dll</p></li>\n<li><p>npmproxy.dll</p></li>\n</ul>\n\n<p>and a number of others. I've let it sit over night and once if freezes it never seems to recover. </p>\n\n<p>I've essentially tried all the possible configurations in Options->Debug->Symbols, including enabling and disabling the Microsoft Symbol Servers, explicitly giving it the location where these libraries should be located, project directories, loading all modules or only specified modules, clearing the cache, excluding the libraries that cause freezes (they still load+freeze,) etc </p>\n\n<p>Note that deleting all breakpoints, a common solution to these types of problems, has no effect.</p>\n\n<p>It will very randomly work perfectly but then restarting the program, while changing literally nothing, will make the problems come back. It's rather infuriating. The most reliable method I've found is to let it load all symbols from the Microsoft Symbol Servers for one to three runs, and then once that stops working clear the cache and run it completely locally one time, then go back to the Microsoft Symbol Servers. Though that's not a very good solution and odd that it works.</p>\n\n<p>Any ideas for an actual solution?</p>\n"}, {"tags": ["c++", "arrays", "char"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1469043037, "post_id": 38489265, "comment_id": 64380219, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 35, "user_id": 3977766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-gyLnYpRB71c/AAAAAAAAAAI/AAAAAAAAACI/DC0hOeFn9Tw/photo.jpg?sz=128", "display_name": "Khaled Afify", "link": "https://stackoverflow.com/users/3977766/khaled-afify"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469043136, "post_id": 38489265, "comment_id": 64380271, "body": "i&#39;m trying to debug this code more than  1 hour and i don&#39;t know why it causes infinte loop"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469043331, "post_id": 38489328, "comment_id": 64380372, "body": "And this is why using meaningful variable names helps.  Looks like a typo(<code>j</code> instead of <code>jj</code>)."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469043436, "post_id": 38489328, "comment_id": 64380436, "body": "Better not use the SO users as your debuggers ;) I agree with @NathanOliver&#39;s  suggestion to use a debugger."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 35, "user_id": 3977766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-gyLnYpRB71c/AAAAAAAAAAI/AAAAAAAAACI/DC0hOeFn9Tw/photo.jpg?sz=128", "display_name": "Khaled Afify", "link": "https://stackoverflow.com/users/3977766/khaled-afify"}, "edited": false, "score": 0, "creation_date": 1469043808, "post_id": 38489328, "comment_id": 64380640, "body": "@Khaledooz : You may accept the answer if it helped. :)"}, {"owner": {"reputation": 35, "user_id": 3977766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-gyLnYpRB71c/AAAAAAAAAAI/AAAAAAAAACI/DC0hOeFn9Tw/photo.jpg?sz=128", "display_name": "Khaled Afify", "link": "https://stackoverflow.com/users/3977766/khaled-afify"}, "edited": false, "score": 0, "creation_date": 1469043812, "post_id": 38489328, "comment_id": 64380642, "body": "idk why my question got -1 rate"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 35, "user_id": 3977766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-gyLnYpRB71c/AAAAAAAAAAI/AAAAAAAAACI/DC0hOeFn9Tw/photo.jpg?sz=128", "display_name": "Khaled Afify", "link": "https://stackoverflow.com/users/3977766/khaled-afify"}, "edited": false, "score": 0, "creation_date": 1469043899, "post_id": 38489328, "comment_id": 64380695, "body": "@Khaledooz : I didn&#39;t downvote the question, but the downvoter might have thought that you could have fixed your code by stepping through a debugger."}, {"owner": {"reputation": 35, "user_id": 3977766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-gyLnYpRB71c/AAAAAAAAAAI/AAAAAAAAACI/DC0hOeFn9Tw/photo.jpg?sz=128", "display_name": "Khaled Afify", "link": "https://stackoverflow.com/users/3977766/khaled-afify"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469044007, "post_id": 38489328, "comment_id": 64380757, "body": "i try so hard to find the bug but my eye didn&#39;t here this small difference in the condition  @NathanOliver"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 35, "user_id": 3977766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-gyLnYpRB71c/AAAAAAAAAAI/AAAAAAAAACI/DC0hOeFn9Tw/photo.jpg?sz=128", "display_name": "Khaled Afify", "link": "https://stackoverflow.com/users/3977766/khaled-afify"}, "edited": false, "score": 0, "creation_date": 1469044084, "post_id": 38489328, "comment_id": 64380807, "body": "@Khaledooz : That is why you need to use a debugger like <code>gdb</code>."}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": true, "score": 6, "last_activity_date": 1469043680, "last_edit_date": 1469043680, "creation_date": 1469043193, "answer_id": 38489328, "question_id": 38489265, "link": "https://stackoverflow.com/questions/38489265/why-this-code-make-infinite-loop/38489328#38489328", "title": "why this code make infinite loop", "body": "<pre><code>j&lt;j+2 // in for(int jj=j-1;j&lt;j+2;jj++){\n</code></pre>\n\n<p>is always true, the result is infinite loop.</p>\n\n<p>Using <code>real</code> variables like <code>count</code>, <code>total</code> etc makes sense here considering your choice of variables :</p>\n\n<pre><code>i,n,j,m,ii,jj // No wonder if someone is not confused with this.\n</code></pre>\n\n<p>to name a few.</p>\n"}], "owner": {"reputation": 35, "user_id": 3977766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-gyLnYpRB71c/AAAAAAAAAAI/AAAAAAAAACI/DC0hOeFn9Tw/photo.jpg?sz=128", "display_name": "Khaled Afify", "link": "https://stackoverflow.com/users/3977766/khaled-afify"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 38489328, "answer_count": 1, "score": 0, "last_activity_date": 1469043680, "creation_date": 1469042983, "question_id": 38489265, "link": "https://stackoverflow.com/questions/38489265/why-this-code-make-infinite-loop", "title": "why this code make infinite loop", "body": "<p>i'm trying to test many of test cases for minesweeper game\nand it causes infinte loop and i didn't get the output</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n\nint main(){\n    int n,m;\n    cin&gt;&gt;n&gt;&gt;m ;\n\n    //cout&lt;&lt;\"bug1\";\n    char grid[n+2][m+2] ;\n    string numbers=\"0123456789\" ;\n    memset(grid,'0',sizeof grid);\n\n    for(int i=0;i&lt;n;i++)\n        for(int j=0;j&lt;m;j++)\n            cin&gt;&gt;grid[i][j];\n\n    //cout&lt;&lt;\"bug2\";\n\n\n    for(int i=0;i&lt;n;i++){\n        for(int j=0;j&lt;m;j++){\n            if(grid[i][j]!='*'){\n                int counter=0;\n                for(int ii=i-1;ii&lt;i+2;ii++){\n                    for(int jj=j-1;j&lt;j+2;jj++){\n                        if(ii&gt;=0 &amp;&amp; jj&gt;=0 &amp;&amp; grid[ii][jj]=='*')\n                            counter++;\n                    }\n                }\n                grid[i][j]=numbers[counter];\n            }\n        }\n    }\n\n    for(int i=0;i&lt;n;i++){\n        for(int j=0;j&lt;m;j++){\n            cout&lt;&lt;grid[i][j] ;\n        }\n        cout&lt;&lt;endl ;\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>i try this test case </p>\n\n<p><a href=\"https://i.stack.imgur.com/cpNer.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cpNer.png\" alt=\"enter image description here\"></a></p>\n\n<p>and it causes infinte loop so ...what is the solution ?</p>\n"}, {"tags": ["c++", "thread-safety", "mutex", "boost-mutex"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 6090773, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1976822302543465/picture?type=large", "display_name": "Petko Six", "link": "https://stackoverflow.com/users/6090773/petko-six"}, "edited": false, "score": 0, "creation_date": 1469044200, "post_id": 38489382, "comment_id": 64380877, "body": "Thank you for your answer! :)"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1469048267, "post_id": 38489382, "comment_id": 64383059, "body": "Just to continue: one way to ensure locking order is to have lightweight wrappers around the mutexes/locks, and then have layer i&#39;s constructor take const ref of layer (i-1)&#39;s obtained lock. Then you cannot construct it any other way. Or - use C++17 and lock them at the same time."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1469048581, "post_id": 38489382, "comment_id": 64383187, "body": "@lorro I&#39;m well aware that there are <i>many</i> ways to address the issue. But I was not trying to give advice on <i>how</i> to solve the problem implementation wise, merely to point out <i>what</i> the potential problem is and a general rule that avoids it. Implementation left as an exercise for the reader. :-)"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 6, "last_activity_date": 1469044443, "last_edit_date": 1469044443, "creation_date": 1469043393, "answer_id": 38489382, "question_id": 38489190, "link": "https://stackoverflow.com/questions/38489190/holding-two-mutex-locks-at-the-same-time/38489382#38489382", "title": "Holding two mutex locks at the same time", "body": "<p>Holding more than one lock is not <em>in itself</em> a problem.</p>\n\n<p>Problems arise when other threads attempt to obtain those same locks in different order and you end up with <code>ABBA</code> deadlocks. Thread 1 locks <code>A</code> and <code>B</code>, then thread 2 wants to lock <code>B</code> then <code>A</code> and both end up being blocked (if the locking interleaves so t1 locks <code>A</code>, then t2 locks <code>B</code> and then both block trying to lock the other) waiting for the other to release one of the locks in order to be able to continue (and release their own held locks which would allow the other to continue).</p>\n\n<p>So, the general rule of thumb is; if you need to obtain more than one lock, make damn sure that all threads <em>always</em> attempt to aquire those locks in the same order.</p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 6090773, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1976822302543465/picture?type=large", "display_name": "Petko Six", "link": "https://stackoverflow.com/users/6090773/petko-six"}, "edited": false, "score": 0, "creation_date": 1469044205, "post_id": 38489389, "comment_id": 64380881, "body": "Thank you for your answer! :)"}], "tags": [], "owner": {"reputation": 54473, "user_id": 41747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc53a4faffef3f7a1d0a3c492d21757?s=128&d=identicon&r=PG", "display_name": "D.Shawley", "link": "https://stackoverflow.com/users/41747/d-shawley"}, "is_accepted": false, "score": 7, "last_activity_date": 1469043411, "creation_date": 1469043411, "answer_id": 38489389, "question_id": 38489190, "link": "https://stackoverflow.com/questions/38489190/holding-two-mutex-locks-at-the-same-time/38489389#38489389", "title": "Holding two mutex locks at the same time", "body": "<p>This <em>can</em> cause a deadlock if anyone acquires both mutexes in the opposite order.</p>\n\n<pre><code>void bar1() {\n    boost::recursive_mutex::scoped_lock lock(mutex2);\n    bar2();\n}\n\nvoid bar2() {\n    boost::recursive_mutex::scoped_lock lock(mutex1);\n}\n</code></pre>\n\n<p>Two threads interleaved as follows will deadlock:</p>\n\n<pre><code>                                 mutex1  mutex2\nTime    Thread A     Thread B    owner   owner\n  0     foo1()                     A\n  1                  bar1()        A       B\n  2                  bar2()        A       B\n  3     foo2()                     A       B\n</code></pre>\n\n<p>At this point threads A &amp; B are deadlocked.  I don't think that <code>boost</code> provides protection against this though the underlying OS may.</p>\n"}], "owner": {"reputation": 195, "user_id": 6090773, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1976822302543465/picture?type=large", "display_name": "Petko Six", "link": "https://stackoverflow.com/users/6090773/petko-six"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1928, "favorite_count": 0, "accepted_answer_id": 38489382, "answer_count": 2, "score": 5, "last_activity_date": 1469044443, "creation_date": 1469042709, "question_id": 38489190, "link": "https://stackoverflow.com/questions/38489190/holding-two-mutex-locks-at-the-same-time", "title": "Holding two mutex locks at the same time", "body": "<p>I would like to know if there would be any issue if I hold two boost::scoped_locks at the same time. The locks are locking different mutexes. Consider the following example:</p>\n\n<pre><code>void foo1()\n{\n   boost::recursive_mutex::scoped_lock lock(mutex1);\n   foo2();\n}\n\nvoid foo2()\n{\n   boost::recursive_mutex::scoped_lock lock(mutex2);\n}\n</code></pre>\n\n<p>I know that this shouldn't cause a deadlock. But are there any other issues. Maybe this could cause the thread to sleep for too long?</p>\n"}, {"tags": ["c++", "qt", "qwt"], "answers": [{"tags": [], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "is_accepted": true, "score": 0, "last_activity_date": 1469045763, "creation_date": 1469045763, "answer_id": 38490069, "question_id": 38489067, "link": "https://stackoverflow.com/questions/38489067/how-can-i-clear-a-qwtplot-on-qt/38490069#38490069", "title": "How can I clear a QwtPlot on Qt?", "body": "<p>I solved the problem by <strong>disabling</strong> my <strong>QwtPlotPicker</strong>:</p>\n\n<pre><code>myQwtPlotPicker-&gt;setEnabled(false);\n</code></pre>\n\n<p>I don't know if it is the best/right solution, but it worked.</p>\n\n<p>Anyway, if anyone knows a better way to do so please let me know.</p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 1, "accepted_answer_id": 38490069, "answer_count": 1, "score": 2, "last_activity_date": 1469045763, "creation_date": 1469042259, "question_id": 38489067, "link": "https://stackoverflow.com/questions/38489067/how-can-i-clear-a-qwtplot-on-qt", "title": "How can I clear a QwtPlot on Qt?", "body": "<p>In my <strong>QwtPlot</strong> object I have some curves plotted and a <strong>QwtPlotPicker</strong> (derived from the curvetracker class from the Qwt playground).</p>\n\n<p><strong>How can I clear it all?</strong></p>\n\n<p>I need to remove the curves, hide the axes and remove the <strong>QwtPlotPicker</strong>.</p>\n\n<p>I can remove the curves with the following command:</p>\n\n<pre><code>myQwtPlot-&gt;detachItems(QwtPlotItem::Rtti_PlotItem, true);\n</code></pre>\n\n<p>And I can hide/disable the axes with the following commands:</p>\n\n<pre><code>myQwtPlot-&gt;enableAxis(QwtPlot::xBottom, false);\nmyQwtPlot-&gt;enableAxis(QwtPlot::yLeft, false);\n</code></pre>\n\n<p>But I don't know how to remove the <strong>QwtPlotPicker</strong>. If I just remove the curves and move the mouse over my <strong>QwtPlot</strong> my application crashes.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "qt", "graphics"], "comments": [{"owner": {"reputation": 5097, "user_id": 3175480, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/agIDd.jpg?s=128&g=1", "display_name": "Gluttton", "link": "https://stackoverflow.com/users/3175480/gluttton"}, "edited": false, "score": 0, "creation_date": 1469043080, "post_id": 38489038, "comment_id": 64380244, "body": "<code>addLine</code> isn&#39;t <code>void</code>."}, {"owner": {"reputation": 1556, "user_id": 2846161, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/oov5F.jpg?s=128&g=1", "display_name": "Leonardo Lanchas", "link": "https://stackoverflow.com/users/2846161/leonardo-lanchas"}, "reply_to_user": {"reputation": 5097, "user_id": 3175480, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/agIDd.jpg?s=128&g=1", "display_name": "Gluttton", "link": "https://stackoverflow.com/users/3175480/gluttton"}, "edited": false, "score": 0, "creation_date": 1469043194, "post_id": 38489038, "comment_id": 64380307, "body": "I know. Do you mean the only way to do it is to store all the pointers for later deletion?"}, {"owner": {"reputation": 5097, "user_id": 3175480, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/agIDd.jpg?s=128&g=1", "display_name": "Gluttton", "link": "https://stackoverflow.com/users/3175480/gluttton"}, "edited": false, "score": 0, "creation_date": 1469043828, "post_id": 38489038, "comment_id": 64380658, "body": "Sorry, I think that you need delete specific item but not clear all scene. By the way, I&#39;ve tried <code>scene.clear()</code> in my own project and all items have been removed. Can you provide complete example which reproduces the problem?"}, {"owner": {"reputation": 1556, "user_id": 2846161, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/oov5F.jpg?s=128&g=1", "display_name": "Leonardo Lanchas", "link": "https://stackoverflow.com/users/2846161/leonardo-lanchas"}, "reply_to_user": {"reputation": 5097, "user_id": 3175480, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/agIDd.jpg?s=128&g=1", "display_name": "Gluttton", "link": "https://stackoverflow.com/users/3175480/gluttton"}, "edited": false, "score": 0, "creation_date": 1469044260, "post_id": 38489038, "comment_id": 64380919, "body": "I&#39;m afraid that&#39;s it. I was just testing because I need a more complex routine which basically draws some lines and later deletes them. And the only way I got it to work was by storing the pointer on a variable (one by one) and later delete all."}], "answers": [{"tags": [], "owner": {"reputation": 1556, "user_id": 2846161, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/oov5F.jpg?s=128&g=1", "display_name": "Leonardo Lanchas", "link": "https://stackoverflow.com/users/2846161/leonardo-lanchas"}, "is_accepted": true, "score": 1, "last_activity_date": 1476743721, "creation_date": 1476743721, "answer_id": 40096724, "question_id": 38489038, "link": "https://stackoverflow.com/questions/38489038/delete-all-lines-from-qgraphicsscene/40096724#40096724", "title": "Delete all lines from QGraphicsScene", "body": "<p>I solved it storing all lines in a list and when I want to clear the scene I delete all pointers inside the list:</p>\n\n<pre><code>QList&lt;QGraphicsItem *&gt; list;\nlist &lt;&lt; scene.addLine(x1, y1, x2, y2, pen); // store line pointer\nvoid mainWindow::emptyList(void){ // delete all pointers in list (clear)\n    int iNum = list.count();\n    for (int i=0; i&lt;iNum; i++)\n        delete list.takeAt(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 1556, "user_id": 2846161, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/oov5F.jpg?s=128&g=1", "display_name": "Leonardo Lanchas", "link": "https://stackoverflow.com/users/2846161/leonardo-lanchas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 40096724, "answer_count": 1, "score": 0, "last_activity_date": 1476743721, "creation_date": 1469042172, "question_id": 38489038, "link": "https://stackoverflow.com/questions/38489038/delete-all-lines-from-qgraphicsscene", "title": "Delete all lines from QGraphicsScene", "body": "<p>I am having a very hard time to find a way to delete all lines added to a <code>QGraphicsScene</code>. Let's say we have this 6 lines. How do I delete them later, after some processing? or in other words, how do I get a white and empty scene again?</p>\n\n<pre><code>QPen pen(Qt::blue, 1);\nQLineF line(10, 20, 100,100);\nscene.addLine(line,pen);\nline.setLine(100, 100, 100,100);\npen.setWidth(3);\nscene.addLine(line, pen);\n</code></pre>\n\n<p>By the way,  <code>scene.clear()</code> does not seem to work.</p>\n"}, {"tags": ["c++", "cookies", "casablanca"], "owner": {"reputation": 161, "user_id": 1158736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39fc9b771c7af23091faaa1a75088a4?s=128&d=identicon&r=PG", "display_name": "domehead100", "link": "https://stackoverflow.com/users/1158736/domehead100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 625, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469041228, "creation_date": 1469041228, "question_id": 38488760, "link": "https://stackoverflow.com/questions/38488760/cpprestsdk-cookie-handling", "title": "cpprestsdk cookie handling", "body": "<p>I'm using the cpprestsdk in a native Windows desktop client app (written in WTL), so it uses WinHttp.  Now, WinHttp has automatic cookie handling, but in the cpprestsdk when I get a response that has Set-Cookie headers, the cookies don't get set on the WinHttp session, and I have to manually add a Cookie header to each subsequent request (mostly we're talking about auth cookies).</p>\n\n<p>I don't see anywhere in the source of the cpprestsdk that it's specifically disabling WinHttp's automatic cookie handling, so kind of flummoxed and wondering if anyone can help.</p>\n"}, {"tags": ["c++", "precision"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469041151, "post_id": 38488699, "comment_id": 64379142, "body": "<i>&quot;I&#39;m reading values from a text file and converting them to doubles, then, I&#39;ll need to print these values on screen, and they should look exactly the same as in the text file.&quot;</i> - This necessitates, that you store your numbers as strings. Assuming that your text file stores base-10 numbers, and floating point numbers are stored as base-2 on your system, you cannot represent ever source number in your destination encoding. You&#39;ll have to keep the strings around. This is all just premature optimization, so scrap it, and store the numbers as strings. It is <b>that</b> simple, really."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469041393, "post_id": 38488699, "comment_id": 64379267, "body": "You could try boost.multiprecision maybe. But storing them as strings may be the easiest solution."}, {"owner": {"reputation": 292, "user_id": 4980643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af46f03b73e8061d553df89ed49a2b45?s=128&d=identicon&r=PG&f=1", "display_name": "nancyheidilee", "link": "https://stackoverflow.com/users/4980643/nancyheidilee"}, "edited": false, "score": 0, "creation_date": 1469041509, "post_id": 38488699, "comment_id": 64379338, "body": "The case is that we need to use minimal memory to achieve the requirements, so strings just won&#39;t do :S"}, {"owner": {"reputation": 463, "user_id": 6511094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRJfm.jpg?s=128&g=1", "display_name": "D Hydar", "link": "https://stackoverflow.com/users/6511094/d-hydar"}, "edited": false, "score": 0, "creation_date": 1469041532, "post_id": 38488699, "comment_id": 64379350, "body": "Just a thought - if memory is your main concern, can you simply process the file in pieces?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469041575, "post_id": 38488699, "comment_id": 64379375, "body": "If strings won&#39;t do (and I&#39;m sure you <b>haven&#39;t</b> profiled this), then you cannot care about correctness. You have to pick: A program that properly works, or a program that doesn&#39;t use strings."}, {"owner": {"reputation": 292, "user_id": 4980643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af46f03b73e8061d553df89ed49a2b45?s=128&d=identicon&r=PG&f=1", "display_name": "nancyheidilee", "link": "https://stackoverflow.com/users/4980643/nancyheidilee"}, "edited": false, "score": 0, "creation_date": 1469041759, "post_id": 38488699, "comment_id": 64379495, "body": "Sorry, to be specific, after reading in the text files, we convert the values into doubles and write them as binary files. When the binary files are loaded back into memory, it should be able to provide exact same features as when data was loaded from the text files.  We can design the binary file format on our own, but the goal is to keep the file size as small as possible."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469041823, "post_id": 38488699, "comment_id": 64379533, "body": "You cannot maintain the same information, once you convert strings to floating point values. The conversion is lossy. Either keep the strings or drop the requirement."}, {"owner": {"reputation": 292, "user_id": 4980643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af46f03b73e8061d553df89ed49a2b45?s=128&d=identicon&r=PG&f=1", "display_name": "nancyheidilee", "link": "https://stackoverflow.com/users/4980643/nancyheidilee"}, "edited": false, "score": 0, "creation_date": 1469041942, "post_id": 38488699, "comment_id": 64379604, "body": "I realise that information is lost once the conversion is done, but is there any way I could get the precision out of the original string? (before information is lost)"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469042678, "post_id": 38488699, "comment_id": 64380020, "body": "It&#39;s not even clear what you mean by &quot;get the precision out of the original string&quot;. Using the numbers you&#39;ve shown above, which &quot;part&quot; of them are you hoping to extract?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1469042738, "post_id": 38488699, "comment_id": 64380048, "body": "You could count the number of digits in the original number, and then use that with <code>setprecision()</code> when you print the number out later."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1469044954, "post_id": 38488699, "comment_id": 64381294, "body": "I&#39;m not even sure you realize, how <code>8.994279313857e-317</code> is well outside the range representable by double precision IEEE 754 floating point numbers. Maybe you need to take a step back, and think this through again. <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a> is a good read."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469045309, "post_id": 38488699, "comment_id": 64381488, "body": "You can of course create a dedicated <code>numberstring</code> class that stores 4 bits per digit. You also need the <code>+-e.</code>symbols, but that&#39;s still only 14 characters altogether."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469093412, "post_id": 38489816, "comment_id": 64400183, "body": "<code>long double</code> is not guaranteed to provide higher precision or a larger range than a <code>double</code>. The last version of Visual Studio to support an 80-bit floating point representation was Visual Studio 6 SP6. Today, both floating point types use the same representation (see <a href=\"https://msdn.microsoft.com/en-us/library/cc953fe1.aspx\" rel=\"nofollow noreferrer\">Fundamental Types (C++)</a>) when using Visual Studio."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469122575, "post_id": 38489816, "comment_id": 64419194, "body": "@IInspectable sure, in Visual studio! :)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 0, "last_activity_date": 1469044908, "last_edit_date": 1495541298, "creation_date": 1469044908, "answer_id": 38489816, "question_id": 38488699, "link": "https://stackoverflow.com/questions/38488699/getting-the-precision-of-a-string-number/38489816#38489816", "title": "Getting the precision of a string number", "body": "<p><em>You can't have your cake and eat it too!</em> :)</p>\n\n<p>I mean, you want the exact representation of a string in a number, without having to pay the cost in terms of memory (by just storing the string<sup>*</sup>).</p>\n\n<p>So in that case the best thing you could do is to use a <code>long double</code>, you know the <code>L</code> we append at the end of numeric constants. However, of course this also has its limits (..since our computer also has limits). Moreover, what a waste of space (and processing time) would it be to use a <code>long double</code> for numbers that do not need, since you say that the precisions that you will meet are not fixed. So, you could do that with that code (kindly assembled by <a href=\"https://stackoverflow.com/questions/554063/how-do-i-print-a-double-value-with-full-precision-using-cout?rq=1\">this</a> and <a href=\"https://stackoverflow.com/questions/19885876/c-read-from-file-to-double\">this</a> answers and the <a href=\"http://www.cplusplus.com/reference/limits/numeric_limits/\" rel=\"nofollow noreferrer\">std::numeric limits</a>):</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\ntypedef std::numeric_limits&lt; double &gt; dbl;\n\nint main() {\n    std::ifstream ifile(\"example.txt\", std::ios::in);\n    std::vector&lt;long double&gt; scores;\n\n    //check to see that the file was opened correctly:\n    if (!ifile.is_open()) {\n        std::cerr &lt;&lt; \"There was a problem opening the input file!\\n\";\n        exit(1);//exit or do additional error checking\n    }\n\n    long double num = 0.0;\n    //keep storing values from the text file so long as data exists:\n    while (ifile &gt;&gt; num) {\n        scores.push_back(num);\n    }\n\n    std::cout.precision(dbl::max_digits10); // you can print more digits if you like, you won't the exact representation obviously\n    //verify that the scores were stored correctly:\n    for (int i = 0; i &lt; scores.size(); ++i) {\n        std::cout &lt;&lt; std::fixed &lt;&lt; scores[i] &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>which gives <em>on my machine</em>:</p>\n\n<pre><code>C02QT2UBFVH6-lm:~ gsamaras$ cat example.txt \n3.12345678912345678912345678 2.79\nC02QT2UBFVH6-lm:~ gsamaras$ g++ -Wall main.cpp\nC02QT2UBFVH6-lm:~ gsamaras$ ./a.out\n3.12345678912345679\n2.79000000000000000\n</code></pre>\n\n<hr>\n\n<p>If you want to go even further, then use <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">GMP</a>, which is \"a free library for arbitrary precision arithmetic\". Of course, this will won't come for free in terms of memory usage and processing time, so you should <em>really think twice</em> before using it!</p>\n\n<hr>\n\n<p>*<sub>I feel that you are a victim of premature optimization. If I were you, I would just store the strings and see how this is going, or better yet use a numeric data type, thus losing some precision, making your life far easier. When the project is ready see what results you are getting and if the precision achieved pleases \"your boss\". If not, use strings (or <a href=\"/questions/tagged/gmp\" class=\"post-tag\" title=\"show questions tagged &#39;gmp&#39;\" rel=\"tag\">gmp</a>).</sub></p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469052593, "post_id": 38490600, "comment_id": 64384840, "body": "<i>&quot;To construct the numeric object from std::string you can ...&quot;</i> - Well, no, it&#39;s certainly not <b>that</b> simple. You still have to account for +/- sign (and preserve that information), thousand&#39;s separators, or scientific notation (e.g. <code>101e-1</code>). And with all that additional information stored, the savings become so little that it&#39;s hard to justify not simply storing the strings."}, {"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469069516, "post_id": 38490600, "comment_id": 64388902, "body": "@IInspectable: ok, but it is not so hard to implement with regex."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469091487, "post_id": 38490600, "comment_id": 64398822, "body": "<i>&quot;it is not so hard&quot;</i> - I&#39;m going to believe you, once you come up with a regular expression, that works reliably. But this is all missing the point I was trying to make: If you want to store all information necessary to reproduce the original formatting of a floating point literal (in addition to a binary representation), it is likely more efficient to just store the string."}, {"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469091955, "post_id": 38490600, "comment_id": 64399164, "body": "@IInspectable agreed, but if you need to have not only representation but and full algebra (add, sub, div, mul and so on) the number class instead of double is good point to start."}, {"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469092556, "post_id": 38490600, "comment_id": 64399617, "body": "@IInspectable also I suppose that the author talks about values like 10.1243, -1.03 (not scientist notation) which cannot be represented with double exactly, so my answer is based on my  assumption."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469093644, "post_id": 38490600, "comment_id": 64400329, "body": "The question <b>explicitly</b> uses scientific notation. Regardless of representation, though, base-10 decimals (in general) cannot be accurately represented in a base-2 number system."}], "tags": [], "owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "is_accepted": false, "score": 0, "last_activity_date": 1469087228, "last_edit_date": 1469087228, "creation_date": 1469047797, "answer_id": 38490600, "question_id": 38488699, "link": "https://stackoverflow.com/questions/38488699/getting-the-precision-of-a-string-number/38490600#38490600", "title": "Getting the precision of a string number", "body": "<p>The right way is to use some class represents any numeric value faithfully. To represent such values you can use the arbitrary precision integer class with scale factor. For example, it can be defined like the following:</p>\n\n<pre><code>#include &lt;boost/multiprecision/cpp_int.hpp&gt;\n\n// numeric = value/pow(10, scale)\nstruct numeric {\n  /// arbitrary precision integer\n  boost::multiprecision::cpp_int value;\n  /// point position\n  int scale;\n};\n// for example, 10.1 can be represented with the numeric class exactlty in difference to double :\nnumeric n{101, 1}; // 101/pow(10, 1)\n</code></pre>\n\n<p>To print such number you can use helper function which convert objects of the numeric class to std::string:</p>\n\n<pre><code>std::string to_string(const numeric&amp; n)  const\n{\n  if (n.value.is_zero() &amp;&amp; n.scale &lt;= 0)\n    return \"0\";\n  bool neg = n.value &lt; 0;\n  std::string r;\n  {\n    std::ostringstream s;\n    s &lt;&lt; (neg ? -n.value : n.value);\n    s.str().swap(r);\n  }\n  if (n.scale &gt; 0) {\n    if (n.scale &gt;= r.length()) {\n      r = std::string(n.scale - r.length() + 1, '0') + r;\n    }\n    r.insert(r.length() - n.scale, 1, '.');\n    if (neg)\n      r = '-' + r;\n  }\n  else if (n.scale &lt; 0) {\n    if (neg)\n      r = '-' + r;\n    r += std::string(-n.scale, '0');\n  }\n  else {\n    if (neg)\n      r = '-' + r;\n  }\n  return std::move(r);\n}\n</code></pre>\n\n<p>To construct the numeric object from std::string you can find point position (that is scale of the numeric), remove point and init cpp_int with the cleared from a point string.</p>\n"}], "owner": {"reputation": 292, "user_id": 4980643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af46f03b73e8061d553df89ed49a2b45?s=128&d=identicon&r=PG&f=1", "display_name": "nancyheidilee", "link": "https://stackoverflow.com/users/4980643/nancyheidilee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "accepted_answer_id": 38489816, "answer_count": 2, "score": 0, "last_activity_date": 1469087228, "creation_date": 1469041032, "question_id": 38488699, "link": "https://stackoverflow.com/questions/38488699/getting-the-precision-of-a-string-number", "title": "Getting the precision of a string number", "body": "<p>I'm reading values from a text file and converting them to doubles,\nthen, I'll need to print these values on screen, \nand they should look exactly the same as in the text file.</p>\n\n<p>Currently, I'm using max precision when printing, \nand I might get results like this:</p>\n\n<p>text value:    8.994279313857e-317\nprinted value: 8.99427931385706e-317</p>\n\n<p>Each text file may have different precision, \nor even different precision for different values (in the same text file),\nand I can't store these values as strings for memory concern.</p>\n\n<p>My thought is to store them as doubles with another unsigned int for precision, \nis there a way to get the precision out of a string number?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1469040979, "post_id": 38488657, "comment_id": 64379058, "body": "Use <code>find_if</code> instead, then you can compare on whatever you want."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1469041033, "creation_date": 1469041033, "answer_id": 38488700, "question_id": 38488657, "link": "https://stackoverflow.com/questions/38488657/ignoring-one-of-the-value-when-searching-the-vector-of-pairs-using-stdfind/38488700#38488700", "title": "Ignoring one of the value when searching the vector of pairs using std::find", "body": "<p>Use the better algorithm: <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow\"><code>std::find_if</code></a>:</p>\n\n<pre><code>auto it = std::find_if(v.begin(), v.end(), [first](const std::pair&lt;int, int&gt;&amp; elem){\n    return elem.first == first;\n});\n</code></pre>\n\n<p>Or a different flavor of <code>find</code> from <a href=\"https://ericniebler.github.io/range-v3/\" rel=\"nofollow\">range-v3</a>:</p>\n\n<pre><code>auto it = ranges::find(v,\n    first,                      // the value\n    &amp;std::pair&lt;int, int&gt;::first // the projection\n    );\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4301705, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-D95QZDJACGs/AAAAAAAAAAI/AAAAAAAAAA8/2ypbU2Ft7Hg/photo.jpg?sz=128", "display_name": "Nikola Lozanovski", "link": "https://stackoverflow.com/users/4301705/nikola-lozanovski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 38488700, "answer_count": 1, "score": 2, "last_activity_date": 1469041033, "creation_date": 1469040895, "question_id": 38488657, "link": "https://stackoverflow.com/questions/38488657/ignoring-one-of-the-value-when-searching-the-vector-of-pairs-using-stdfind", "title": "Ignoring one of the value when searching the vector of pairs using std::find", "body": "<p>In a given vector of pairs </p>\n\n<pre><code>static std::vector&lt;std::pair&lt;int,int&gt;&gt; v\n</code></pre>\n\n<p>how can i ignore one of the value when i search the vector using std::find</p>\n\n<pre><code>std::find(v.begin(), v.end(), std::make_pair(first int, /*ignored value*/)) - v.begin();\n</code></pre>\n"}, {"tags": ["c++", "containers", "c++17", "incomplete-type"], "comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 1, "creation_date": 1469116469, "post_id": 38488517, "comment_id": 64415673, "body": "Really you can do it (at least for <i>libc++</i> and <i>libstdc++</i>). But it is non-portable and non-conformant."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 8, "last_activity_date": 1469040726, "creation_date": 1469040726, "answer_id": 38488600, "question_id": 38488517, "link": "https://stackoverflow.com/questions/38488517/may-i-use-iterator-of-a-list-of-an-incomplete-type/38488600#38488600", "title": "May I use iterator of a list of an incomplete type?", "body": "<p>That very paper says</p>\n\n<blockquote>\n  <p><code>T</code> shall be complete before any member of the resulting specialization\n  of <code>list</code> is referenced.</p>\n</blockquote>\n"}], "owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 38488600, "answer_count": 1, "score": 5, "last_activity_date": 1469041005, "creation_date": 1469040459, "last_edit_date": 1469041005, "question_id": 38488517, "link": "https://stackoverflow.com/questions/38488517/may-i-use-iterator-of-a-list-of-an-incomplete-type", "title": "May I use iterator of a list of an incomplete type?", "body": "<pre><code>struct some_struct\n{\n    std::list&lt;some_struct&gt; nested;\n};\n</code></pre>\n\n<p>IIUC in the past this would invoke UB because the standard containers required to be instantiated only with complete types.</p>\n\n<p>Now, however, we have progressed from this and as per <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/n4510.html\" rel=\"nofollow\">http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/n4510.html</a> we can instantiate <code>std::list</code>, <code>std::forward_list</code> and <code>std::vector</code> with incomplete types, so the above code is valid.</p>\n\n<p>But, but, may I go further a little and write:</p>\n\n<pre><code>struct some_struct\n{\n    std::list&lt;some_struct&gt;::iterator it;\n};\n</code></pre>\n\n<p>?</p>\n\n<p>Instantiating a container and using its member types is not the same... For example, I was told that I may instantiate boost containers with incomplete types, but I may not use their <code>value_type</code> unless the template argument is a complete type. So I'm not really sure if the above code snippet is valid.</p>\n\n<p>Is it?</p>\n"}, {"tags": ["c++", "c", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1469040091, "post_id": 38488317, "comment_id": 64378542, "body": "The simplest answer is to sort the array (in descending order) with <code>qsort</code>, and then take the first X items. Alternatively, you need to insert new items at the correct location in your <code>retArray</code> so that the array is always sorted."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1469040236, "post_id": 38488317, "comment_id": 64378619, "body": "You are overwriting 77 with 88, even though 67 is smaller.  You need to replace the smallest value in retArray, not the first one you find."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1469040475, "post_id": 38488317, "comment_id": 64378759, "body": "<code>calloc(sizeof(int) * maxGrades)</code> --&gt; <code>calloc( maxGrades, sizeof(int))</code>"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1469040505, "post_id": 38488317, "comment_id": 64378775, "body": "Lets say it was a learning exercise and<code>qsort</code> is cheating.  Then your problem is that any new value going into <code>retArray</code> has that <code>break</code> statement preventing  tests on later indexs inside <code>retArray</code>.  Opportunities to find a new maximum could be skipped.  I suspect that replacing <code>break;</code> with <code>grades[i]=0;</code> would work, but I am too lazy to check.  But it would be pretty brute force then."}], "answers": [{"tags": [], "owner": {"reputation": 203, "user_id": 6524939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66c08308e85fe4e732ca7278a75ada7?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/6524939/robert"}, "is_accepted": false, "score": 0, "last_activity_date": 1469040652, "last_edit_date": 1469040652, "creation_date": 1469040230, "answer_id": 38488452, "question_id": 38488317, "link": "https://stackoverflow.com/questions/38488317/maximum-x-values-at-array/38488452#38488452", "title": "Maximum X values at array", "body": "<p>At the start of your last loop iteration your retArray looks like this: <code>{90,77,67}</code>. If you step through the inner loop with an <code>i=5</code>, you'll find the 77 is found before the 67, so the 77 is the one replaced. You should probably sort the array and take the top maxGrades values, but if you want to do it your way:</p>\n\n<pre><code>for(...)\n    if(grades[i] &gt; retArray[j])\n        if(retArray[j] &lt; retArray[minVal])\n            minVal = j;\nif(minVal &gt; 0)\n    retArray[minVal] = grades[i];\nminVal = -1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1469041432, "creation_date": 1469041432, "answer_id": 38488833, "question_id": 38488317, "link": "https://stackoverflow.com/questions/38488317/maximum-x-values-at-array/38488833#38488833", "title": "Maximum X values at array", "body": "<p>Selecting the X largest values from an array of size N can be performed in <strong>O(N)</strong> average complexity using the QuickSelect algorithm from the inventor of QuickSort: <a href=\"https://en.wikipedia.org/wiki/Quickselect\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Quickselect</a></p>\n"}, {"tags": [], "owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "is_accepted": false, "score": 4, "last_activity_date": 1469047366, "last_edit_date": 1469047366, "creation_date": 1469047008, "answer_id": 38490399, "question_id": 38488317, "link": "https://stackoverflow.com/questions/38488317/maximum-x-values-at-array/38490399#38490399", "title": "Maximum X values at array", "body": "<p>While it can be done in linear time using selection algorithm, it is usually done using a min-heap that stores the top k elements, at each iteration - you check if the smallest element in the heap is greater or not from the current one you are iterating, and if it is - you replace them.</p>\n\n<p>This is <code>O(nlogk)</code> time and only <code>O(k)</code> extra memory, and requires only a single traversal on the data (so it'll work perfectly if your elements are coming in a stream).</p>\n\n<p>The following code is C++11 (with its elegant for-each loops), but it's easy to transform it to old c++ code, using the same data structures.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;queue&gt;\n\nint main(void) {\n    int array[] = { 90,45,77,43,67,88 }; \n    int maxGrades = 3;\n    std::priority_queue&lt;int, std::vector&lt;int&gt;, std::greater&lt;int&gt;&gt; q;\n    for (int x : array) { \n        // populate first maxGrades elements\n        if (q.size() &lt; maxGrades) {\n            q.push(x);\n        // replace if new element is higher than smallest in heap.\n        } else if (q.top() &lt; x) {\n            q.pop();\n            q.push(x);\n        }\n    }\n    // print elements\n    std::cout &lt;&lt; \"elements: \";\n    while (!q.empty()) { \n        std::cout &lt;&lt; q.top() &lt;&lt; \" \";\n        q.pop();\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 778, "user_id": 1836540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4466fdeadf066a319e6afba5df630960?s=128&d=identicon&r=PG", "display_name": "Vyacheslav Napadovsky", "link": "https://stackoverflow.com/users/1836540/vyacheslav-napadovsky"}, "is_accepted": true, "score": 0, "last_activity_date": 1469079149, "last_edit_date": 1469079149, "creation_date": 1469078591, "answer_id": 38495464, "question_id": 38488317, "link": "https://stackoverflow.com/questions/38488317/maximum-x-values-at-array/38495464#38495464", "title": "Maximum X values at array", "body": "<p>If your <code>grades</code> array may contain duplicates the solution becomes more difficult. And don't forget that if you return back pointer to <code>grades</code> array the caller may not know should or should not it free the returned pointer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint* GetMaxGrades(int* grades, int size, int maxGrades) {\n    if (maxGrades &lt;= 0 || size &lt;= 0)\n        return NULL;\n\n    // first, function must allocate memory every time,\n    // otherwise you can't understand when to free memory or when do not it.\n    int *retArray = (int*)malloc(sizeof(int) * maxGrades);\n\n    if (maxGrades &gt;= size) {\n        for (int i = 0; i &lt; size; ++i)\n            retArray[i] = grades[i];\n        for (int i = size; i &lt; maxGrades; ++i)\n            retArray[i] = 0;\n    }\n    else {\n        // need to save positions of found max grades,\n        // because if there's duplicates among grades,\n        // you will pick up only different onces.\n        int *positions = (int*)malloc(sizeof(int) * maxGrades);\n        for (int i = 0; i &lt; maxGrades; ++i) {\n            int position = 0;\n            int maxgrade = INT_MIN;\n            for (int j = 0; j &lt; size; ++j) {\n                // pick max grade\n                if (grades[j] &gt; maxgrade) {\n                    // do not permit duplicates among positions\n                    bool newmax = true;\n                    for (int k = 0; k &lt; i; ++k) {\n                        if (positions[k] == j) {\n                            newmax = false;\n                            break;\n                        }\n                    }\n                    // assign new max value &amp; position\n                    if (newmax) {\n                        position = j;\n                        maxgrade = grades[j];\n                    }\n                }\n            }\n            positions[i] = position;\n            retArray[i] = maxgrade;\n        }\n        free(positions);\n    }\n    return retArray;\n}\n\nint main(int argc, char* argv[]) {\n    int a[] = { 90,45,77,43,67,88 };\n    const int max_grades = 3;\n    int *p = GetMaxGrades(a, sizeof(a) / sizeof(a[0]), 3);\n    for (int i = 0; i &lt; max_grades; ++i) {\n        printf(\"%d \", p[i]);\n    }\n    printf(\"\\n\");\n    free(p);\n    return 0;\n}\n</code></pre>\n\n<p>If you are allowed to use <code>qsort</code> that will become more easy:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint greater_comp(const void * a, const void * b) {\n    return *(int*)b - *(int*)a;\n}\n\nint* GetMaxGrades(int* grades, int size, int maxGrades) {\n    if (maxGrades &lt;= 0 || size &lt;= 0)\n        return NULL;\n\n    int alloc_size = (maxGrades &lt; size) ? size : maxGrades;\n\n    // copy grades array (allocate more memory)\n    int *retArray = (int*)malloc(sizeof(int) * alloc_size);\n    for (int i = 0; i &lt; size; ++i)\n        retArray[i] = grades[i];\n    for (int i = size; i &lt; alloc_size; ++i)\n        retArray[i] = 0;\n\n    // sort: descending order\n    qsort(retArray, size, sizeof(int), greater_comp);\n\n    return retArray;\n}\n\nint main(int argc, char* argv[]) {\n    int a[] = { 90,45,77,43,67,88 };\n    const int max_grades = 3;\n    int *p = GetMaxGrades(a, sizeof(a) / sizeof(a[0]), 3);\n    for (int i = 0; i &lt; max_grades; ++i) {\n        printf(\"%d \", p[i]);\n    }\n    printf(\"\\n\");\n    free(p);\n    return 0;\n}\n</code></pre>\n\n<p>And if you would use algorithm library that will become much more easy:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nvector&lt;int&gt; GetMaxGrades(vector&lt;int&gt; grades, int maxGrades) {\n    // descending order\n    sort(grades.begin(), grades.end(), greater&lt;int&gt;());\n    grades.resize(maxGrades);\n    return grades;\n}\n\nint main(int argc, char* argv[]) {\n    vector&lt;int&gt; a = { 90,45,77,43,67,88 };\n    vector&lt;int&gt; p = GetMaxGrades(a, 3);\n    for (auto&amp; i : p)\n        cout &lt;&lt; i &lt;&lt; ' ';\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 6502945, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b2caa3c177f7dc69e350cd9bc98c07cb?s=128&d=identicon&r=PG&f=1", "display_name": "CSharpBeginner", "link": "https://stackoverflow.com/users/6502945/csharpbeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 38495464, "answer_count": 4, "score": 2, "last_activity_date": 1469079149, "creation_date": 1469039738, "last_edit_date": 1469046081, "question_id": 38488317, "link": "https://stackoverflow.com/questions/38488317/maximum-x-values-at-array", "title": "Maximum X values at array", "body": "<p>I'm trying to write a function that takes array, size and number of X maximum grades at the array.<br>\ne.g:  </p>\n\n<pre><code>array = { 90,45,77,43,67,88 }, maxGrades = 3\n</code></pre>\n\n<p>The result should be:</p>\n\n<pre><code>retArray = {90,77,88} or {90,88,77}\n</code></pre>\n\n<p>What I have been tried:</p>\n\n<pre><code>int * GetMaxGrades(int * grades, int size, int maxGrades)\n{\n     int *retArray;\n\n     if (maxGrades &gt; size)\n        return grades;\n\n     retArray = (int*)calloc(sizeof(int) * maxGrades);\n\n     for (int i = 0; i &lt; size; i++)\n     {\n         for (int j = 0; j &lt; maxGrades; j++)\n            if (grades[i] &gt; retArray[j])\n            {\n                 retArray[j] = grades[i];\n                 break;\n            }\n     }\n\n     return retArray;\n}\n</code></pre>\n\n<p>But I'm revived <code>{90,88,67}</code></p>\n\n<p><strong>EDIT</strong>\nIf I change the inner loop like that:</p>\n\n<pre><code>        if (grades[i] &gt; retArray[j])\n        {\n            if (j + 1 &lt; maxGrades)\n                retArray[j + 1] = retArray[j];\n\n            retArray[j] = grades[i];\n            break;\n        }\n</code></pre>\n\n<p>It solved part of the problem, but is it the best way to do that?</p>\n"}, {"tags": ["c++", "c++11", "matrix", "vector", "complex-numbers"], "comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 1, "creation_date": 1469039920, "post_id": 38488244, "comment_id": 64378427, "body": "Please explain if you <code>-1</code> this post. I would highly appreciate it."}, {"owner": {"reputation": 1148, "user_id": 1475287, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2efbb80f218638866d8ea63ee20496aa?s=128&d=identicon&r=PG", "display_name": "Feng Wang", "link": "https://stackoverflow.com/users/1475287/feng-wang"}, "edited": false, "score": 0, "creation_date": 1469042183, "post_id": 38488244, "comment_id": 64379744, "body": "Have you ever considered std::thread based parallel or cuda? Plus, for a symmetric matrix, you only need to visit n(n-1)/2 elements, instead of n*n elements to make an accumulation."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 1148, "user_id": 1475287, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2efbb80f218638866d8ea63ee20496aa?s=128&d=identicon&r=PG", "display_name": "Feng Wang", "link": "https://stackoverflow.com/users/1475287/feng-wang"}, "edited": false, "score": 0, "creation_date": 1469042264, "post_id": 38488244, "comment_id": 64379800, "body": "@FengWang Actually I&#39;m parallelizing with OpenMP, and I&#39;m visiting n(n-1)/2 elements already :)"}, {"owner": {"reputation": 673, "user_id": 2440280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a304296ff4daaec38c4a3845648da5c?s=128&d=identicon&r=PG", "display_name": "Maarten Hilferink", "link": "https://stackoverflow.com/users/2440280/maarten-hilferink"}, "edited": false, "score": 0, "creation_date": 1469103542, "post_id": 38488244, "comment_id": 64406685, "body": "With simple aggregations of large arrays, the performance bottleneck really is in the memory bandwidth. How many bytes is a <code>Real</code>? If <code>Real</code> is defined as a 4 bytes float, a 64 bit machine might load 8 aligned bytes as fast as only the first 4 bytes thereof. You could test this by separating myMatrix into a real and an imaginary part, both represented by <code>std::vector&lt;float&gt;</code> and then only aggregate the real part, but that is ony beneficial if you don&#39;t have to translate between different representations a lot."}], "answers": [{"comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1469042335, "post_id": 38488281, "comment_id": 64379833, "body": "By the way, I just found out that this is computationally slower :("}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1469042853, "post_id": 38488281, "comment_id": 64380118, "body": "@TheQuantumPhysicist : Try <code>[](Real&amp; acc, std::complex&lt;Real&gt; const c) -&gt; Real&amp; { return acc += c.real(); }</code> \u2013 does it perform any differently?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1469043146, "post_id": 38488281, "comment_id": 64380278, "body": "Still... this is slower than the sum of real and imaginary part together by 5%-10%... I&#39;m really surprised."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 6, "creation_date": 1469044265, "post_id": 38488281, "comment_id": 64380922, "body": "@TheQuantumPhysicist Possibly the complex-adding version got SIMD&#39;d"}], "tags": [], "owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "is_accepted": true, "score": 8, "last_activity_date": 1469041922, "last_edit_date": 1469041922, "creation_date": 1469039616, "answer_id": 38488281, "question_id": 38488244, "link": "https://stackoverflow.com/questions/38488244/stdaccumulate-only-the-real-part-of-a-complex-stdvector/38488281#38488281", "title": "std::accumulate() only the real part of a complex std::vector", "body": "<pre><code>Real real_sum = std::accumulate(\n    myMatrix.cbegin(), myMatrix.cend(), Real{},\n    [](Real const acc, std::complex&lt;Real&gt; const&amp; c) { return acc + std::real(c); }\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 4, "last_activity_date": 1469040740, "last_edit_date": 1469040740, "creation_date": 1469039674, "answer_id": 38488297, "question_id": 38488244, "link": "https://stackoverflow.com/questions/38488244/stdaccumulate-only-the-real-part-of-a-complex-stdvector/38488297#38488297", "title": "std::accumulate() only the real part of a complex std::vector", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow\"><code>std::accumulate</code></a> has two overloads, one of which takes an operator:</p>\n\n<pre><code>template&lt; class InputIt, class T, class BinaryOperation &gt;\nT accumulate( InputIt first, InputIt last, T init,\n              BinaryOperation op );\n</code></pre>\n\n<p>Just provide your own instead of defaulting to <code>+</code>:</p>\n\n<pre><code>std::accumulate(myMatrix.begin(), myMatrix.end(), Real{0},\n    [](Real const&amp; sum, std::complex&lt;Real&gt; const&amp; next){\n        return sum + std::real(next);\n    });\n</code></pre>\n\n<hr />\n\n<p>Alternatively, you could do something fun like use <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/iterator/doc/transform_iterator.html\" rel=\"nofollow\"><code>boost::transform_iterator</code></a>:</p>\n\n<pre><code>auto make_real = [](std::complex&lt;Real&gt; const&amp; c) {\n    return std::real(c);\n};\n\nstd::accumulate(\n    boost::make_transform_iterator(myMatrix.begin(), make_real),\n    boost::make_transform_iterator(myMatrix.end(), make_real),\n    Real{0});\n</code></pre>\n\n<p>Or with <a href=\"https://ericniebler.github.io/range-v3/\" rel=\"nofollow\">range-v3</a>:</p>\n\n<pre><code>accumulate(myMatrix,\n    Real{0},\n    std::plus&lt;&gt;{},\n    [](std::complex&lt;Real&gt; const&amp; c) { return c.real(); }\n);\n</code></pre>\n\n<p>Both of the above would be much nicer if <code>real</code> didn't have overloads and you could just provide <code>std::real&lt;Real&gt;</code> in the boost example and <code>&amp;std::complex&lt;Real&gt;::real</code> in the second. </p>\n"}, {"comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1469041286, "post_id": 38488762, "comment_id": 64379210, "body": "std algorithms are optimized for processors. So yes, if you want the best outcome, you should use std algorthms as much as possible."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1469061041, "post_id": 38488762, "comment_id": 64387037, "body": "By using <code>auto c</code> instead of <code>auto&amp; c</code> you&#39;re making copies. Was that your intent?"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1469067840, "post_id": 38488762, "comment_id": 64388505, "body": "@kfsone I trust the compiler to make that optimization of avoiding the copy."}], "tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1469041821, "last_edit_date": 1469041821, "creation_date": 1469041230, "answer_id": 38488762, "question_id": 38488244, "link": "https://stackoverflow.com/questions/38488244/stdaccumulate-only-the-real-part-of-a-complex-stdvector/38488762#38488762", "title": "std::accumulate() only the real part of a complex std::vector", "body": "<p>Is using <code>std::accumulate</code> absolutely necessary?</p>\n\n<pre><code>    Real acc = 0;\n    for(auto c : myMatrix)\n       acc += real(c);\n</code></pre>\n\n<p>Don't get me wrong, I'm in favour of using standard algorithms when they suit, but it seems hard to beat this loop in readability.</p>\n\n<p>This is as compared to the implementation that came with my g++-4.8.4 install:</p>\n\n<pre><code>  template&lt;typename _InputIterator, typename _Tp&gt;\n    inline _Tp\n    accumulate(_InputIterator __first, _InputIterator __last, _Tp __init)\n    {\n      // concept requirements\n      __glibcxx_function_requires(_InputIteratorConcept&lt;_InputIterator&gt;)\n      __glibcxx_requires_valid_range(__first, __last);\n\n      for (; __first != __last; ++__first)\n    __init = __init + *__first;\n      return __init;\n    }\n</code></pre>\n\n<p>So you can see they're pretty much doing the same thing.</p>\n"}], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "accepted_answer_id": 38488281, "answer_count": 3, "score": 4, "last_activity_date": 1469043838, "creation_date": 1469039490, "last_edit_date": 1469043838, "question_id": 38488244, "link": "https://stackoverflow.com/questions/38488244/stdaccumulate-only-the-real-part-of-a-complex-stdvector", "title": "std::accumulate() only the real part of a complex std::vector", "body": "<p>I used to take the sum of a symmetric (Hermitian) matrix (the matrix is in an <code>std::vector</code>), which is a huge waste because the imaginary part will always add to zero (I'm talking about huge matrices with side-length of <code>n&gt;1000</code>, so I think it makes a difference. </p>\n\n<p>So now I only add the upper-triangular part of the matrix. But I want to optimize this further and avoid adding the complex part because I don't need it.</p>\n\n<p>What I currently use is:</p>\n\n<pre><code>std::real(std::accumulate(myMatrix.begin(), myMatrix.end(), std::complex&lt;Real&gt;(0,0)));\n</code></pre>\n\n<p>This adds all the element of <code>myMatrix</code> to <code>std::complex&lt;Real&gt;(0,0)</code>, resulting in the sum I need.</p>\n\n<p>But this will add real and imaginary components of my vector, which is a waste! How can I write the most optimized version of this that adds only the real part of this matrix?</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>While I accepted the answer that works, I discovered that it's slower than summing the real and imaginary parts of my matrix. It's slower by 5%-10% for a matrix with side-length of 128. This is surprising. Any other faster suggestions are highly appreciated. </p>\n\n<p>Please ask if you require additional information.</p>\n"}, {"tags": ["python", "c++", "c", "boost-python"], "answers": [{"comments": [{"owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "edited": false, "score": 0, "creation_date": 1469054124, "post_id": 38489304, "comment_id": 64385336, "body": "i&#39;ve accepted the other answer as i&#39;ve tested it and it works (although i tagged boost-python in my question i didn&#39;t actually state it so i&#39;ll edit my question now). thanks for answering though, i&#39;m sure this will help anybody who finds this page that doesn&#39;t want the boost dependency."}], "tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": false, "score": 3, "last_activity_date": 1469043100, "creation_date": 1469043100, "answer_id": 38489304, "question_id": 38488205, "link": "https://stackoverflow.com/questions/38488205/how-do-i-create-a-python-decimal-object-from-c/38489304#38489304", "title": "How do I create a Python Decimal object from C++?", "body": "<p>Should be straightforward enough.  Although untested, something like the following should work:</p>\n\n<pre><code>PyObject * decimal_mod = PyImport_ImportModule(\"decimal\");\nassert(decimal_mod);\nPyObject * decimal_ctor = PyObject_GetAttrString(decimal_mod, \"Decimal\");\nassert(decimal_ctor);\nPyObject * four = PyObject_CallFunction(decimal_ctor, \"i\", 4);\nassert(four);\n</code></pre>\n\n<p>Do keep in mind that all three <code>PyObject *</code> references here should be decreffed (using <code>Py_DECREF()</code>) once you are done with them.  Also, I use <code>assert()</code> here for pedagogical purposes.  Actual code should have real error handling.</p>\n\n<p>Also, I use the raw Python/C API here.  I've never used boost-python, so I don't know what differences exist, if any.</p>\n"}, {"tags": [], "owner": {"reputation": 26037, "user_id": 542190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bb1f122c476561bb9a98a1523e8b5e?s=128&d=identicon&r=PG", "display_name": "filmor", "link": "https://stackoverflow.com/users/542190/filmor"}, "is_accepted": true, "score": 2, "last_activity_date": 1469044141, "creation_date": 1469044141, "answer_id": 38489597, "question_id": 38488205, "link": "https://stackoverflow.com/questions/38488205/how-do-i-create-a-python-decimal-object-from-c/38489597#38489597", "title": "How do I create a Python Decimal object from C++?", "body": "<p>In Boost.Python that would be something like</p>\n\n<pre><code>bp::object decimal = bp::import(\"decimal\").attr(\"Decimal\");\nbp::object decimal_obj = decimal(1, 4);\n</code></pre>\n"}], "owner": {"reputation": 1257, "user_id": 649140, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ff4ce275d6b5e7986cc235e90c90a07b?s=128&d=identicon&r=PG", "display_name": "Sam Kellett", "link": "https://stackoverflow.com/users/649140/sam-kellett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 2, "accepted_answer_id": 38489597, "answer_count": 2, "score": 2, "last_activity_date": 1469054153, "creation_date": 1469039390, "last_edit_date": 1469054153, "question_id": 38488205, "link": "https://stackoverflow.com/questions/38488205/how-do-i-create-a-python-decimal-object-from-c", "title": "How do I create a Python Decimal object from C++?", "body": "<p>...or any Python object that exists in an importable library. I have found PyDateTime_* functions in the <a href=\"https://docs.python.org/3/c-api/datetime.html\" rel=\"nofollow\">documentation</a> for creating objects from the datetime module, but I can't find anything to do with the python decimal module. Is this possible?</p>\n\n<p>Looking for a Boost.Python way if there is one, but the native API's will suffice if not.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "indentation"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1469039444, "post_id": 38488153, "comment_id": 64378184, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/0x6hx0kx.aspx\" rel=\"nofollow noreferrer\">Options, Text Editor, C/C++, Formatting</a>."}, {"owner": {"reputation": 145, "user_id": 5918499, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FvSfu.jpg?s=128&g=1", "display_name": "man", "link": "https://stackoverflow.com/users/5918499/man"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1469039828, "post_id": 38488153, "comment_id": 64378370, "body": "@IInspectable Seems like we have a misunderstanding. I edited my question to make it more clear."}, {"owner": {"reputation": 1190, "user_id": 4070000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4c671fa7002be8d180675875a8c9148e?s=128&d=identicon&r=PG&f=1", "display_name": "orbitcowboy", "link": "https://stackoverflow.com/users/4070000/orbitcowboy"}, "edited": false, "score": 0, "creation_date": 1469039899, "post_id": 38488153, "comment_id": 64378412, "body": "Try the artistic style plugin!"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469040370, "post_id": 38488153, "comment_id": 64378699, "body": "How on earth is this a relevant, on-topic, programming related question? This is just about a trivial configuration detail for a tool that could easily be solved with a 5sec google search. Finding <a href=\"https://blogs.msdn.microsoft.com/cdnstudents/2014/02/10/visual-studio-tips-and-tricks-formatting-your-code/\" rel=\"nofollow noreferrer\">this</a> took aproximately that time.  Show a little effort, please."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1469040775, "post_id": 38488153, "comment_id": 64378934, "body": "By the way; I&#39;m currious why you find that indentation (which helps show the structure of the code) <i>hurts</i> readability..? That&#39;s not something I hear often."}, {"owner": {"reputation": 145, "user_id": 5918499, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FvSfu.jpg?s=128&g=1", "display_name": "man", "link": "https://stackoverflow.com/users/5918499/man"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469040929, "post_id": 38488153, "comment_id": 64379029, "body": "@JesperJuhl If I didn&#39;t search for it, I wouldn&#39;t post a question here. If you&#39;re so smart, then show me where exactly it is."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469041217, "post_id": 38488153, "comment_id": 64379175, "body": "How are we to know that you&#39;ve tried to research it? You didn&#39;t tell us you did, nor what you tried to search for, nor what results you got, nor why those results were not useful, etc etc. Btw, may I recommend <a href=\"http://clang.llvm.org/docs/ClangFormat.html\" rel=\"nofollow noreferrer\">clang-format</a> - which can in fact be used with Visual Studio : <a href=\"https://visualstudioextensions.vlasovstudio.com/2013/11/05/format-c-code-intelligently-in-visual-studio-with-clang-format/\" rel=\"nofollow noreferrer\">visualstudioextensions.vlasovstudio.com/2013/11/05/&hellip;</a>"}, {"owner": {"reputation": 145, "user_id": 5918499, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FvSfu.jpg?s=128&g=1", "display_name": "man", "link": "https://stackoverflow.com/users/5918499/man"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469041411, "post_id": 38488153, "comment_id": 64379280, "body": "@JesperJuhl The link you provided gives me a 404."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469041456, "post_id": 38488153, "comment_id": 64379299, "body": "Try again, I fumbled the link the first time."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1473377544, "post_id": 38488153, "comment_id": 66129269, "body": "@JesperJuhl: That extension offers consistent formatting. The OP is apparently looking for <b>inconsistent</b> formatting, i.e. <code>regular code</code> should get indented, but <code>code in &quot;scope braces&quot;</code> should not. I doubt there is tool support for this."}], "owner": {"reputation": 145, "user_id": 5918499, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FvSfu.jpg?s=128&g=1", "display_name": "man", "link": "https://stackoverflow.com/users/5918499/man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469039741, "creation_date": 1469039235, "last_edit_date": 1469039741, "question_id": 38488153, "link": "https://stackoverflow.com/questions/38488153/visual-studio-prevent-indentation-of-scope-braces-content", "title": "Visual Studio prevent indentation of scope braces content", "body": "<p>I'm working on a project which uses a lot of \"scope braces\".</p>\n\n<pre><code>void func()\n{\n    // regular code\n\n    {\n        // code in \"scope braces\"\n    }\n\n    // regular code\n\n}\n</code></pre>\n\n<p>Visual Studio by default indents their content, and that makes the code hard to read. <br>\nI'm looking for a way to tell Visual Studio not to indent them. Is this possible?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "concurrency"], "comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 1, "creation_date": 1469045650, "post_id": 38488107, "comment_id": 64381673, "body": "A quick queston: have you considered <a href=\"http://en.cppreference.com/w/cpp/experimental/barrier\" rel=\"nofollow noreferrer\"><code>std::experimental::barrier</code></a>?"}], "answers": [{"comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1469048578, "post_id": 38488425, "comment_id": 64383186, "body": "For the first one, wouldn&#39;t be easier to use. The second one doesn&#39;t work because it could happen that while the master thread is waiting for some lock other thread  that has a different lock, can cycle more than once which is something I don&#39;t want!"}, {"owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1469056452, "post_id": 38488425, "comment_id": 64385969, "body": "Not if after every cycle the worker threads release the lock, then wait for the condition variable and only if notified relock and do exactly one cycle."}], "tags": [], "owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "is_accepted": false, "score": 1, "last_activity_date": 1469040146, "creation_date": 1469040146, "answer_id": 38488425, "question_id": 38488107, "link": "https://stackoverflow.com/questions/38488107/correct-way-to-wait-a-condition-variable-that-is-notified-by-several-threads/38488425#38488425", "title": "Correct way to wait a condition variable that is notified by several threads", "body": "<p>I see two options here:</p>\n\n<p>Option 1: <code>join()</code></p>\n\n<p>Basically instead of using a condition variable to start the calculations in your threads, you spawn a new thread for every iteration and use <code>join()</code> to wait for it to be finished. Then you spawn new threads for the next iteration and so on.</p>\n\n<p>Option 2: locks</p>\n\n<p>You don't want the main-thread to notify as long as one of the threads is still working. So each thread gets its own lock, which it locks before doing the calculations and unlocks afterwards. Your main-thread locks all of them before calling the <code>notify()</code> and unlocks them afterwards.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1469046248, "last_edit_date": 1469046248, "creation_date": 1469042555, "answer_id": 38489146, "question_id": 38488107, "link": "https://stackoverflow.com/questions/38488107/correct-way-to-wait-a-condition-variable-that-is-notified-by-several-threads/38489146#38489146", "title": "Correct way to wait a condition variable that is notified by several threads", "body": "<p>I see nothing fundamentally wrong with your solution.</p>\n\n<p>Guard <code>workers</code> with <code>workers_mtx</code> and done.</p>\n\n<p>We could abstract this with a counting semaphore.</p>\n\n<pre><code>struct counting_semaphore {\n  std::unique_ptr&lt;std::mutex&gt; m=std::make_unique&lt;std::mutex&gt;();\n  std::ptrdiff_t count = 0;\n  std::unique_ptr&lt;std::condition_variable&gt; cv=std::make_unique&lt;std::condition_variable&gt;();\n\n  counting_semaphore( std::ptrdiff_t c=0 ):count(c) {}\n  counting_semaphore(counting_semaphore&amp;&amp;)=default;\n\n  void take(std::size_t n = 1) {\n    std::unique_lock&lt;std::mutex&gt; lock(*m);\n    cv-&gt;wait(lock, [&amp;]{ if (count-std::ptrdiff_t(n) &lt; 0) return false; count-=n; return true; } );\n  }\n  void give(std::size_t n = 1) {\n    {\n      std::unique_lock&lt;std::mutex&gt; lock(*m);\n      count += n;\n      if (count &lt;= 0) return;\n    }\n    cv-&gt;notify_all();\n  }\n};\n</code></pre>\n\n<p><code>take</code> takes <code>count</code> away, and blocks if there is not enough.</p>\n\n<p><code>give</code> adds to <code>count</code>, and notifies if there is a positive amount.</p>\n\n<p>Now the worker threads ferry tokens between two semaphores.</p>\n\n<pre><code>std::vector&lt; counting_semaphore &gt; m_worker_start{count};\ncounting_semaphore m_worker_done{0}; // not count, zero\nstd::atomic&lt;bool&gt; m_shutdown = false;\n\n// master controller:\nfor (each step) {\n  for (auto&amp;&amp; starts:m_worker_start)\n    starts.give();\n  m_worker_done.take(count);\n}\n\n// master shutdown:\nm_shutdown = true;\n// wake up forever:\nfor (auto&amp;&amp; starts:m_worker_start)\n  starts.give(std::size_t(-1)/2);\n\n// worker thread:\nwhile (true) {\n  master-&gt;m_worker_start[my_id].take();\n  if (master-&gt;m_shutdown) return;\n  // do work\n  master-&gt;m_worker_done.give();\n}\n</code></pre>\n\n<p>or somesuch.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a8db79064adb9165\" rel=\"nofollow\">live example</a>.</p>\n"}], "owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1469046248, "creation_date": 1469039088, "question_id": 38488107, "link": "https://stackoverflow.com/questions/38488107/correct-way-to-wait-a-condition-variable-that-is-notified-by-several-threads", "title": "Correct way to wait a condition variable that is notified by several threads", "body": "<p>I'm trying to do this with the C++11 concurrency support. </p>\n\n<p>I have a sort of thread pool of worker threads that all do the same thing, where a master thread has an array of condition variables (one for each thread, they need to 'start' synchronized, ie not run ahead one cycle of their loop).</p>\n\n<pre><code>    for (auto &amp;worker_cond : cond_arr) {\n        worker_cond.notify_one();\n    }\n</code></pre>\n\n<p>then this thread has to wait for a notification of each thread of the pool to restart its cycle again. Whats the correct way of doing this? Have a single condition variable and wait on some integer each thread that isn't the master is going to increase? something like (still in the master thread)</p>\n\n<pre><code>    unique_lock&lt;std::mutex&gt; lock(workers_mtx);\n    workers_finished.wait(lock, [&amp;workers] { return workers = cond_arr.size(); });\n</code></pre>\n"}, {"tags": ["c++", "qt", "user-interface", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 736, "user_id": 5507961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/emPOd.jpg?s=128&g=1", "display_name": "karelss", "link": "https://stackoverflow.com/users/5507961/karelss"}, "is_accepted": false, "score": 0, "last_activity_date": 1469046750, "creation_date": 1469046750, "answer_id": 38490327, "question_id": 38488088, "link": "https://stackoverflow.com/questions/38488088/designing-opencv-gui-with-qt/38490327#38490327", "title": "Designing OpenCV GUI with Qt", "body": "<p>I'm not sure about if you can customize the OpenCv Qt windows but you can code your own window and then show the openCv image, using something similiar to <a href=\"https://github.com/javiertoja/KGuardiant/blob/master/KGuardiantClient/customtab.cpp\" rel=\"nofollow\">this</a>, you can retrive the cv:Mat immage and convert it to a Qimage object then show the object in a Qt graphicsview using a QPixmap.</p>\n"}], "owner": {"reputation": 5434, "user_id": 5404226, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/awXQh.png?s=128&g=1", "display_name": "Ahx", "link": "https://stackoverflow.com/users/5404226/ahx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1187, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469046750, "creation_date": 1469039052, "question_id": 38488088, "link": "https://stackoverflow.com/questions/38488088/designing-opencv-gui-with-qt", "title": "Designing OpenCV GUI with Qt", "body": "<p>I want to customize Qt's GUI</p>\n\n<p>Here is the Default Qt OpenCV GUI</p>\n\n<p><a href=\"https://i.stack.imgur.com/nTeAf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nTeAf.png\" alt=\"When You Click on Display Properties Button\"></a> </p>\n\n<p>I want to place createButton on Menu.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nYnTK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nYnTK.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I do that?</p>\n\n<p>Below is my code</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\n#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n\n#include &lt;iostream&gt;\n\nvoid callbackButton2(int state, void* userData){\n\n}\n\nint main(int argc, char *argv[])\n{\n//QApplication a(argc, argv);\n//MainWindow w;\n//w.show();\ncv::VideoCapture vc(0);\nif(!vc.isOpened()) perror(\"Can't Open WebCam\");\n\nconst char* winname = \"WebCam\";\ncv::namedWindow(winname,CV_GUI_EXPANDED);\n\ncv::createButton(\"button6\",callbackButton2,NULL,CV_PUSH_BUTTON,1);\nfor(;;){\n    cv::Mat frm;\n    vc&gt;&gt;frm;\n    if(!frm.empty()) imshow(winname,frm);\n    if(cv::waitKey(20)==27) break;\n}\nvc.release();\ncv::destroyWindow(winname);\n\nreturn 0;\n// return a.exec();\n}\n</code></pre>\n\n<p>The code above simply opens webcam and display it on the screen. But for my next application, I need to customize gui and place it on to the menu.</p>\n\n<p>BTW I searched through the fllowing link, and I couldn't find how can I customize the GUI. <a href=\"http://docs.opencv.org/2.4/modules/highgui/doc/qt_new_functions.html\" rel=\"nofollow noreferrer\">http://docs.opencv.org/2.4/modules/highgui/doc/qt_new_functions.html</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1469039111, "post_id": 38487946, "comment_id": 64377988, "body": "Why not convert <code>min</code> and <code>max</code> into strings and do string comparison?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469039156, "post_id": 38487946, "comment_id": 64378017, "body": "Does <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stoul\" rel=\"nofollow noreferrer\">std::stoull</a> not throw an exception?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469039228, "post_id": 38487946, "comment_id": 64378063, "body": "@IInspectable If I remember right <code>std::stoull</code> does not throw if the input is negative."}, {"owner": {"reputation": 466, "user_id": 840599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7375cf17905b62784593e4df5549ed41?s=128&d=identicon&r=PG", "display_name": "markand", "link": "https://stackoverflow.com/users/840599/markand"}, "edited": false, "score": 0, "creation_date": 1469039247, "post_id": 38487946, "comment_id": 64378072, "body": "No, <code>std::stoull</code> does not throw an exception when invoked with &quot;-1&quot;."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469039324, "post_id": 38487946, "comment_id": 64378119, "body": "@NathanOliver: The documentation seems to agree with you. Talking about a specification that completely avoids taking the route of least surprise..."}, {"owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1469039886, "post_id": 38487946, "comment_id": 64378405, "body": "On input of &quot;-1&quot; <code>strtoull()</code> returns ULLONG_MAX and sets <code>errno</code> to ERANGE. I don&#39;t like OP&#39;s function. What is the real purpose of mixing so many things (suppressing exceptions, converting and comparing in a single function, using C functions instead of C++) like this?"}, {"owner": {"reputation": 466, "user_id": 840599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7375cf17905b62784593e4df5549ed41?s=128&d=identicon&r=PG", "display_name": "markand", "link": "https://stackoverflow.com/users/840599/markand"}, "edited": false, "score": 0, "creation_date": 1469040193, "post_id": 38487946, "comment_id": 64378598, "body": "Hmm, I&#39;ve just tried with strtoull, it does not set errno to ERANGE on my machine, not on ideone neither : <a href=\"http://ideone.com/cMFrbu\" rel=\"nofollow noreferrer\">ideone.com/cMFrbu</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469040376, "post_id": 38487946, "comment_id": 64378704, "body": "Careful with that, Markand. Unable to reproduce D&#250;thomhas&#39;s claim on VS 2010 and 2015, or on GCC 4.8 and 4.9"}], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 840599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7375cf17905b62784593e4df5549ed41?s=128&d=identicon&r=PG", "display_name": "markand", "link": "https://stackoverflow.com/users/840599/markand"}, "edited": false, "score": 0, "creation_date": 1469084106, "post_id": 38489471, "comment_id": 64393972, "body": "How is that possible? The maximum double is much higher than the maximum of a 64 bit unsigned. Your program also output 0 on <a href=\"http://ideone.com/adPr0v\" rel=\"nofollow noreferrer\">ideone</a>"}, {"owner": {"reputation": 466, "user_id": 840599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7375cf17905b62784593e4df5549ed41?s=128&d=identicon&r=PG", "display_name": "markand", "link": "https://stackoverflow.com/users/840599/markand"}, "edited": false, "score": 0, "creation_date": 1469085149, "post_id": 38489471, "comment_id": 64394585, "body": "Is using a <code>long double</code> and <code>stold</code> a valid solution? It seems to work on this <a href=\"http://ideone.com/LVxweZ\" rel=\"nofollow noreferrer\">code</a>"}, {"owner": {"reputation": 1564, "user_id": 5422980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d70c303b95aa718a340b77e11628e3?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Hietanen", "link": "https://stackoverflow.com/users/5422980/ari-hietanen"}, "reply_to_user": {"reputation": 466, "user_id": 840599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7375cf17905b62784593e4df5549ed41?s=128&d=identicon&r=PG", "display_name": "markand", "link": "https://stackoverflow.com/users/840599/markand"}, "edited": false, "score": 0, "creation_date": 1469086300, "post_id": 38489471, "comment_id": 64395344, "body": "@mark the maximum of double is larger, but because some of the bits goes to representing the exponent it cannot represent all the number 64bit integer can. In other words, for large enough doubles the difference between two consecutive numbers is larger than one. There is something strange with ideone. The result of  <code>long long v=(1l &lt;&lt; 54) +1;</code> is <code>1</code>. If you just substitute the result of that calculation to it it seems to give what I expect. See <a href=\"http://ideone.com/k3aoHP\" rel=\"nofollow noreferrer\">ideone</a>. If the <code>long double</code> is 128 bits and the mantissa is more than 64bits in your system it will work."}], "tags": [], "owner": {"reputation": 1564, "user_id": 5422980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d70c303b95aa718a340b77e11628e3?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Hietanen", "link": "https://stackoverflow.com/users/5422980/ari-hietanen"}, "is_accepted": false, "score": 2, "last_activity_date": 1469043725, "creation_date": 1469043725, "answer_id": 38489471, "question_id": 38487946, "link": "https://stackoverflow.com/questions/38487946/converting-strings-to-integers-the-right-way/38489471#38489471", "title": "Converting strings to integers the right way", "body": "<p>Your function is safe from the error you describe because small enough integer numbers can be represented exactly with floating point numbers. Hence, the conversion of <code>1</code> cannot be <code>0.99999</code> because they are different numbers if <code>0.99999</code> can be represented in doubles. The conversion of <code>0.99999</code> to <code>1</code> is possible.</p>\n\n<p>However, if you have large enough number, the limit checking does not work, because 64bit double precision has less bits (usually 54, but this is not defined in standard) for the fraction part  than a 64bit integer. E.g., output of a following program is <code>1</code> and not <code>0</code> as if it would be with a higher precision numbers.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main(){\n  long long v=(1l &lt;&lt; 54) +1;\n  std::cout &lt;&lt; v-static_cast&lt;long long&gt;(std::stod(std::to_string(v))) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>If you really need numbers close to <code>UINT64_MAX</code> it's better to use some library like <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/multiprecision/doc/html/index.html\" rel=\"nofollow\">Boost multiprecision</a>. It has an arbitrary precision integer <code>cpp_int</code>, which can be constructed from a <code>std::string</code>. </p>\n"}], "owner": {"reputation": 466, "user_id": 840599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7375cf17905b62784593e4df5549ed41?s=128&d=identicon&r=PG", "display_name": "markand", "link": "https://stackoverflow.com/users/840599/markand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1469043725, "creation_date": 1469038517, "question_id": 38487946, "link": "https://stackoverflow.com/questions/38487946/converting-strings-to-integers-the-right-way", "title": "Converting strings to integers the right way", "body": "<p>I would like to verify that strings are valid integers. I could just use 64 bits integers and functions like <code>std::stoull</code> or <code>std::stoll</code> but I can't verify if the value is between a given range.</p>\n\n<p>Example, I want an integer between 0 and UINT64_MAX. If the string is <code>\"-1\"</code>, I can convert it to a <code>long long</code> and I'll know it's negative. However, if the string is above the maximum of <strong>signed long long</strong> (usually <code>INT64_MAX</code>), the overflow makes it negative again while the string was a positive integer.</p>\n\n<p>A friend first advised me to check for a minus sign but I didn't like this solution, then I thought about using a double, however I know that comparisons using doubles can be tricky so that's why I'm unsure about this solution.</p>\n\n<pre><code>template &lt;typename T&gt;\ninline bool is_between(const string &amp;str,\n                       T min = numeric_limits&lt;T&gt;::min(),\n                       T max = numeric_limits&lt;T&gt;::max()) noexcept\n{\n    try {\n        double value = stod(str);\n\n        if (value &lt; min || value &gt; max)\n            return false;\n    } catch (...) {\n        return false;\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>Is this function safe? Because I'm afraid that a string of \"1\" could return a double value of \"0.9999999999\", then it would not fit in an interval between 1 and 100.</p>\n\n<p>Then we can use the function like this:</p>\n\n<pre><code>cout &lt;&lt; is_between&lt;uint16_t&gt;(\"0\") &lt;&lt; endl;\ncout &lt;&lt; is_between&lt;uint16_t&gt;(\"65535\") &lt;&lt; endl;\ncout &lt;&lt; is_between&lt;uint16_t&gt;(\"65535\", 0, 2000) &lt;&lt; endl;\ncout &lt;&lt; is_between&lt;uint16_t&gt;(\"-1\") &lt;&lt; endl;\ncout &lt;&lt; is_between&lt;uint16_t&gt;(\"800000\") &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "qt", "c++11"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1469039995, "post_id": 38487911, "comment_id": 64378486, "body": "What you&#39;re missing is that there are no <code>write</code> overloads for every type you can think of. If you want to do binary I/O, you should be explicit about it by casting the pointer to memory that holds the object to <code>const char *</code>."}], "answers": [{"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": true, "score": 1, "last_activity_date": 1469134401, "last_edit_date": 1469134401, "creation_date": 1469038820, "answer_id": 38488027, "question_id": 38487911, "link": "https://stackoverflow.com/questions/38487911/no-matching-function-call-stdbasic-ofstreamcharwrite/38488027#38488027", "title": "no matching function call std::basic_ofstream&lt;char&gt;::write()", "body": "<p><code>write()</code> is a function for outputting characters, it won't apply any formatting, you need to do the formatting yourself. </p>\n\n<p>The function requires a <code>const char*</code> argument. It won't take pointers to other types, a conversion will need to be made first. </p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/write\" rel=\"nofollow\">here</a> for more details. </p>\n\n<p>The stream operator <code>&lt;&lt;</code> is better suited if you want the stream to format your output. </p>\n"}], "owner": {"reputation": 223, "user_id": 2228389, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/2b94fc8653928d871417455d5efba2c7?s=128&d=identicon&r=PG", "display_name": "Shane Yost", "link": "https://stackoverflow.com/users/2228389/shane-yost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3026, "favorite_count": 0, "closed_date": 1469039956, "accepted_answer_id": 38488027, "answer_count": 1, "score": 0, "last_activity_date": 1469134401, "creation_date": 1469038416, "question_id": 38487911, "link": "https://stackoverflow.com/questions/38487911/no-matching-function-call-stdbasic-ofstreamcharwrite", "closed_reason": "Duplicate", "title": "no matching function call std::basic_ofstream&lt;char&gt;::write()", "body": "<p>I'm trying to accomplish binary i/o here and I keep getting this error which is...</p>\n\n<pre><code>no matching function for call to 'std::basic_ofstream&lt;char&gt;::write(int*,unsigned int)'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>no matching function for call to 'std::basic_ofstream&lt;char&gt;::write(double*,unsigned int)'\n</code></pre>\n\n<p>Here is my code...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    int x = 123;\n    double fx = 12.34;\n    ofstream myfile(\"filename.dat\", ios::out | ios::binary);\n    myfile.write(&amp;x, sizeof(x));\n    myfile.write(&amp;fx, sizeof(fx));\n    myfile.close();\n    return 0;\n}\n</code></pre>\n\n<p>I've found multiple other posts with the same situation but their fix was usually typing in...</p>\n\n<pre><code>ofstream myfile(filename.c_str(), ios::out | ios::binary);\n</code></pre>\n\n<p>The compiler still screams at me as I tried it multiple times. I'm using QT creator as my IDE which I've already verified it is using C++11. and also ran the same code in Code::Blocks and get the same error. Its not liking the filename parameter i'm passing to it. I think this has something to do with the first parameter being the const char of the member function of ofstream open()?!</p>\n\n<pre><code>void open(const char *filename, [int mode], [int prot]);\n</code></pre>\n\n<p>What am I not understanding/missing here?</p>\n"}, {"tags": ["c++", "travis-ci"], "answers": [{"tags": [], "owner": {"reputation": 478, "user_id": 995285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VLP2Q.png?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/995285/david-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1469040372, "creation_date": 1469040372, "answer_id": 38488493, "question_id": 38487804, "link": "https://stackoverflow.com/questions/38487804/travis-fails-first-build-in-matrix/38488493#38488493", "title": "Travis fails first build in matrix", "body": "<p>Simply misspelled sources in the first entry. Corrected that and removed the back referencing and everything is working.</p>\n"}], "owner": {"reputation": 478, "user_id": 995285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VLP2Q.png?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/995285/david-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1469040372, "creation_date": 1469038085, "question_id": 38487804, "link": "https://stackoverflow.com/questions/38487804/travis-fails-first-build-in-matrix", "title": "Travis fails first build in matrix", "body": "<p>I have started building my project on travis and, after managing to build with one compiler, I decided to cover more and use matrix builds to build with a variety of compilers on Linux. I have managed to get a configuration that builds successfully for all entries except the first one.  The exact error I get is:</p>\n\n<pre><code>$ sudo -E apt-get -yq --no-install-suggests --no-install-recommends --force-yes install g++-5 libncurses5-dev\nReading package lists...\nBuilding dependency tree...\nReading state information...\nE: Unable to locate package g++-5\nE: Couldn't find any package by regex 'g++-5'\napt-get.diagnostics\napt-get install failed\n</code></pre>\n\n<p>My travis configuration looks like:</p>\n\n<pre><code>sudo: false\nlanguage: generic\n\nmatrix:\n  include:\n    - os: linux\n      env: COMPILER_NAME=g++ CXX=g++-5 CC=gcc-5\n      addons:\n        apt:\n          source: &amp;sources\n            - llvm-toolchain-precise-3.8\n            - llvm-toolchain-precise-3.7\n            - llvm-toolchain-precise-3.6\n            - ubuntu-toolchain-r-test\n          packages:\n            - g++-5\n            - libncurses5-dev\n\n    - os: linux\n      env: COMPILER_NAME=clang++ CXX=clang++-3.8 CC=clang-3.8\n      addons:\n        apt:\n          sources: *sources\n          packages:\n            - clang-3.8\n            - libncurses5-dev\n\n    - os: linux\n      env: COMPILER_NAME=clang CXX=clang++-3.7 CC=clang-3.7\n      addons:\n        apt:\n          sources: *sources\n          packages:\n            - clang-3.7\n            - libncurses5-dev\n\n    - os: linux\n      env: COMPILER_NAME=clang CXX=clang++-3.6 CC=clang-3.6\n      addons:\n        apt:\n          sources: *sources\n          packages:\n            - clang-3.6\n            - libncurses5-dev\n\nbefore_script:\n  - mkdir -p build\n  - cd build\n\nscript:\n  - cmake -DCMAKE_BUILD_TYPE=DEBUG .. &amp;&amp; make &amp;&amp; make runtests\n</code></pre>\n\n<p>At this point I feel like I am missing something obvious. I cannot find any solution to this problem (or simply don't know how to search for it effectively).</p>\n\n<p>I feel I should mention that if I swap the gcc section with one of the clang sections that the clang section will fail and the gcc section will pass.</p>\n\n<p>If I can provide anymore useful information then let me know! Thanks in advance for your help. </p>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1469038154, "post_id": 38487762, "comment_id": 64377433, "body": "You can write the &quot;GL&quot; functions yourself and call the &quot;gl&quot; functions from inside. That way you can use your favorite names without loss of functionality or performance."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1469038177, "post_id": 38487762, "comment_id": 64377445, "body": "Well you could write wrapper functions named how you want it and then just call the <code>gl</code> function in the body."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 3, "creation_date": 1469038687, "post_id": 38487762, "comment_id": 64377751, "body": "This is a horrible idea. Things have standardized names for a reason. You&#39;re talking about doing a huge amount of pointless extra work,  maybe breaking compatibility, and causing confusion in communicating with other programmers. Lots of things in life are hard."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1469038841, "post_id": 38487762, "comment_id": 64377848, "body": "Wow, people voting to close as &quot;too broad&quot;? Just because there are multiple solutions doesn&#39;t mean that you have to expand 10 pages to cover them all."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1469038948, "last_edit_date": 1469038948, "creation_date": 1469038243, "answer_id": 38487859, "question_id": 38487762, "link": "https://stackoverflow.com/questions/38487762/is-possible-to-linking-a-function-with-a-different-name/38487859#38487859", "title": "Is possible to linking a function with a different name", "body": "<p>You could create function pointers with whatever name you want and assign the existing functions to them:</p>\n\n<pre><code>char *(*my_strcpy)(char *, const char *) = strcpy;\n</code></pre>\n\n<p>You could also use the preprocessor as follows if your compiler supports <code>__VA_ARGS__</code>:</p>\n\n<pre><code>#define my_function(...) gl_function(__VA_ARGS__)\n</code></pre>\n\n<p>The latter is probably easier to use since you don't have to know the return type or the number and type of the arguments.</p>\n\n<p>While you could define the above macro as a non-function type, defining it as a function-type macro will help prevent it from being replaced in places you wouldn't want it.</p>\n"}, {"tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": false, "score": 7, "last_activity_date": 1469039227, "last_edit_date": 1469039227, "creation_date": 1469038432, "answer_id": 38487915, "question_id": 38487762, "link": "https://stackoverflow.com/questions/38487762/is-possible-to-linking-a-function-with-a-different-name/38487915#38487915", "title": "Is possible to linking a function with a different name", "body": "<p>Given that this is C++11, you can easily create an alias to any function that you like with the auto keyword:</p>\n\n<pre><code>const auto Finish = glFinish;\nint main()\n{\n    Finish();\n}\n</code></pre>\n\n<p>Using <code>const</code> informs the compiler that nothing else will modify the function pointer/alias that you've set up and that may enable better code generation.</p>\n\n<p>There isn't a built-in, automated way to \"rename\" functions, however. Other than manually maintaining a list, one way to get a similar result would be to find a page that has every OpenGL call and do a regex search-and replace for the pattern <code>(gl(.+))</code> to <code>const auto \\2 = \\1;</code>, or something like that.</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 2, "last_activity_date": 1469038822, "creation_date": 1469038822, "answer_id": 38488028, "question_id": 38487762, "link": "https://stackoverflow.com/questions/38487762/is-possible-to-linking-a-function-with-a-different-name/38488028#38488028", "title": "Is possible to linking a function with a different name", "body": "<p>You can use <code>#define</code> to rename all the functions (although I would recommend <strong>not</strong> doing this if you ever intend to share your code with anyone else). For example</p>\n\n<pre><code>#define GLClear      glClear\n#define GLDrawArrays glDrawArrays\n#define GLFinish     glFinish\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 6615096, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/1AHQb.png?s=128&g=1", "display_name": "Ibrahim Ipek", "link": "https://stackoverflow.com/users/6615096/ibrahim-ipek"}, "is_accepted": true, "score": 0, "last_activity_date": 1469132144, "creation_date": 1469132144, "answer_id": 38513562, "question_id": 38487762, "link": "https://stackoverflow.com/questions/38487762/is-possible-to-linking-a-function-with-a-different-name/38513562#38513562", "title": "Is possible to linking a function with a different name", "body": "<p>I find a better solution:</p>\n\n<pre><code>#define GLFunction(Function) gl##Function\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>#define GLClearDepth GLFunction(ClearDepth)\n//...\n</code></pre>\n\n<p>More bearable to see.</p>\n"}], "owner": {"reputation": 429, "user_id": 6615096, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/1AHQb.png?s=128&g=1", "display_name": "Ibrahim Ipek", "link": "https://stackoverflow.com/users/6615096/ibrahim-ipek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "closed_date": 1469408456, "accepted_answer_id": 38513562, "answer_count": 4, "score": 2, "last_activity_date": 1469132144, "creation_date": 1469037975, "question_id": 38487762, "link": "https://stackoverflow.com/questions/38487762/is-possible-to-linking-a-function-with-a-different-name", "closed_reason": "Needs more focus", "title": "Is possible to linking a function with a different name", "body": "<p>Well, function names are only labels to pointing starting address of a function, so can we link a function with a different name? As a example in OpenGL API functions are starting with 'gl', can we chance this to 'GL'? I have OCD, this is really hard for me.</p>\n"}, {"tags": ["c++", "templates", "c++11"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1469039086, "creation_date": 1469039086, "answer_id": 38488105, "question_id": 38487760, "link": "https://stackoverflow.com/questions/38487760/using-variadic-templates-with-callbacks/38488105#38488105", "title": "Using variadic templates with callbacks", "body": "<p>Use <code>C_Delegate&lt;&gt;</code> for no arguments instead of <code>C_Delegate&lt;void&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 98839, "user_id": 3848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/W10YY.jpg?s=128&g=1", "display_name": "Motti", "link": "https://stackoverflow.com/users/3848/motti"}, "is_accepted": true, "score": 3, "last_activity_date": 1469039253, "creation_date": 1469039253, "answer_id": 38488158, "question_id": 38487760, "link": "https://stackoverflow.com/questions/38487760/using-variadic-templates-with-callbacks/38488158#38488158", "title": "Using variadic templates with callbacks", "body": "<p>The empty parameter pack is spelled <code>&lt;&gt;</code> not <code>&lt;void&gt;</code>. Try using <code>C_Delegate&lt;&gt;</code>.</p>\n\n<p>By the way, they're called variadic templates, <code>varargs</code> usually refer to the <code>C</code> <code>...</code>.</p>\n"}], "owner": {"reputation": 171, "user_id": 6522377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-oPYYo3Tbj5k/AAAAAAAAAAI/AAAAAAAAAVk/20jmjLMx7SI/photo.jpg?sz=128", "display_name": "Nils &#39;Linkpy&#39; Reid", "link": "https://stackoverflow.com/users/6522377/nils-linkpy-reid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 38488158, "answer_count": 2, "score": 1, "last_activity_date": 1469041056, "creation_date": 1469037966, "last_edit_date": 1469041056, "question_id": 38487760, "link": "https://stackoverflow.com/questions/38487760/using-variadic-templates-with-callbacks", "title": "Using variadic templates with callbacks", "body": "<p>I'm working on a game with a simple \"delegate\" system.</p>\n\n<p>Here is the source file (sorry for the french comments) :</p>\n\n<pre><code>#ifndef C_DELEGATE_HPP_\n#define C_DELEGATE_HPP_\n\n\n#include &lt;list&gt;\n#include &lt;functional&gt;\n\n#include &lt;boost/function.hpp&gt;\n\n\nnamespace ns\n{\n\n\n////////////////////////////////////////////////////////////////////////////////\n/// Classe g\u00e9rant une liste de callback. Les callbacks ont entre 0 et 1\n/// arguments.\n///\ntemplate &lt;typename ... Args&gt;\nclass C_Delegate\n{\n\npublic:\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// Type des callbacks.\n    ///\n    typedef std::function&lt;void (Args...)&gt; callback;\n\n\n\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// Structure r\u00e9presentant un callback.\n    ///\n    struct S_Callback\n    {\n\n        callback    callback_ptr;\n\n        bool        once;\n\n    }; // S_Callback\n\n\n\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// Type pour la liste des callbacks.\n    ///\n    typedef std::list &lt;S_Callback&gt; callback_list;\n\n\n\npublic:\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// Constructeur.\n    ///\n    C_Delegate (void)\n    { }\n\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// Destructeur.\n    ///\n    virtual ~C_Delegate (void) throw ()\n    { }\n\n\n\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// Connecte une fonction \u00e0 la liste des callbacks.\n    ///\n    /// @param cb : Callback.\n    /// @param instance : Instance de l'objet utilisant le callback.\n    /// @param once : D\u00e9termine si le callback est appel\u00e9 que une fois ou non.\n    ///\n    void connect (callback cb, bool once=false) throw ()\n    {\n\n        _callbacks.push_back ( {cb, once} );\n\n    }\n\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// D\u00e9conncte une fonction de la liste.\n    ///\n    /// @param cb : Callback.\n    /// @param instance : Instance de l'objet utilisant le callback.\n    ///\n    void disconnect (callback cb) throw ()\n    {\n        for (auto i = _callbacks.begin(); i != _callbacks.end(); i++) {\n            if (i-&gt;callback_ptr == cb) {\n                _callbacks.erase(i);\n                return;\n            }\n        }\n    }\n\n\n\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// Appels tous les callbacks l\u00e9 \u00e0 l'objet actuel.\n    ///\n    /// @param a1 : Argument \u00e0 passer aux callbacks.\n    ///\n    void emit(Args... args) throw ()\n    {\n        for (auto i = _callbacks.begin(); i != _callbacks.end(); i++)\n        {\n            i-&gt;callback_ptr(args...);\n\n            if (i-&gt;once)\n                _callbacks.erase (i);\n        }\n    }\n\n\n\nprivate:\n\n    ////////////////////////////////////////////////////////////////////////////\n    /// Liste des callbacks.\n    ///\n    callback_list   _callbacks;\n\n\n}; // C_Delegate\n\n\n} // namespace ns\n\n#endif\n</code></pre>\n\n<p>The linter says nothing, good. But, using with <code>C_Delegate&lt;void&gt;</code> create this error : <code>invalid parameter type 'void'</code>.</p>\n\n<p>How can I make my <code>C_Delegate::emit</code> method to allow using no parameter callback ?</p>\n\n<p>Thanks for your answers ! </p>\n"}, {"tags": ["c++", "c", "sse", "fpu", "x87"], "comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 5, "creation_date": 1469038179, "post_id": 38487718, "comment_id": 64377446, "body": "Wait... I&#39;m confused. You mention IEEE and bits which means you know about FP representation. But at the same time you&#39;re asking how to truncate <i>decimals</i> which is impossible in binary floating-point. Am I missing something?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 6, "creation_date": 1469038284, "post_id": 38487718, "comment_id": 64377503, "body": "@user354900 I disagree, work to the best precision you can, and truncate or round for display. By truncating during the calculations, you will &quot;spread&quot; a bigger error, not less."}, {"owner": {"reputation": 1, "user_id": 6615057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/935b05610702d4621e61e276e12b438b?s=128&d=identicon&r=PG&f=1", "display_name": "user354900", "link": "https://stackoverflow.com/users/6615057/user354900"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1469038354, "post_id": 38487718, "comment_id": 64377542, "body": "@Mysticial I&#39;m confused too, it all depends on what &quot;chopping mode&quot; means for Intel ..."}, {"owner": {"reputation": 1, "user_id": 6615057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/935b05610702d4621e61e276e12b438b?s=128&d=identicon&r=PG&f=1", "display_name": "user354900", "link": "https://stackoverflow.com/users/6615057/user354900"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1469038429, "post_id": 38487718, "comment_id": 64377586, "body": "@WeatherVane I really don&#39;t need those extra decimals and there is no rounding mode that is helping my case / function"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 2, "creation_date": 1469038552, "post_id": 38487718, "comment_id": 64377670, "body": "@user354900 &quot;Chopping mode&quot; in IEEE floating point is just truncating the binary representation. In no way does it map to decimal digits unless you happen to be rounding to an integer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1469038559, "post_id": 38487718, "comment_id": 64377672, "body": "Floating point values (typically) do not <i>have</i> &quot;decimal values&quot; - that&#39;s a conversion to human readable format. If you don&#39;t need them, then you are not doing any further calculations with the values. So you might just as well retain the precision and deal with truncation at output. If you are doing more calculations, then you do need maximum precison."}, {"owner": {"reputation": 1, "user_id": 6615057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/935b05610702d4621e61e276e12b438b?s=128&d=identicon&r=PG&f=1", "display_name": "user354900", "link": "https://stackoverflow.com/users/6615057/user354900"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1469038617, "post_id": 38487718, "comment_id": 64377704, "body": "@Mysticial Can you code an example for &quot;rouding to an integer with chopping mode &quot; I would like to see that in action"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1469038769, "post_id": 38487718, "comment_id": 64377798, "body": "@user354900: Weather Vane is right. By truncating you lose information, and it makes your results less accurate, i.e. you increase the error."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 5, "creation_date": 1469038810, "post_id": 38487718, "comment_id": 64377827, "body": "@user354900 If you&#39;re really asking that question. Then I presume you don&#39;t know floating-point math. So I refer you to this: <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"}, {"owner": {"reputation": 1, "user_id": 6615057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/935b05610702d4621e61e276e12b438b?s=128&d=identicon&r=PG&f=1", "display_name": "user354900", "link": "https://stackoverflow.com/users/6615057/user354900"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1469039124, "post_id": 38487718, "comment_id": 64377999, "body": "@Mysticial still confused about this, and apparently <code>FISTTP</code> doesn&#39;t really has an intrinsics equivalent ."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 2, "creation_date": 1469039930, "post_id": 38487718, "comment_id": 64378433, "body": "@user354900 Read that article that I linked you and you will understand why your question is fundamentally flawed. (putting aside the fact that this is an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>) When people use words like, &quot;IEEE&quot;, &quot;intrinsics&quot;, &quot;SSE&quot;, &quot;vectorization&quot;, and assembly instructions, we habitually assume they know all the basics such as floating-point representation. This is the first time I&#39;ve seen otherwise. Sorry."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1469078571, "post_id": 38487718, "comment_id": 64391309, "body": "internal calculations should be done in as most precision as possible, that&#39;s why x87 uses 80-bit registers"}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1469068702, "post_id": 38490616, "comment_id": 64388705, "body": "I&#39;d recommend <a href=\"http://en.cppreference.com/w/c/numeric/math/rint\" rel=\"nofollow noreferrer\">C99 <code>double rint(double)</code></a> instead of <code>round()</code>.  <code>round</code> has weird rounding semantics that don&#39;t match any of the available rounding modes on x86, <a href=\"http://stackoverflow.com/a/37624488/224132\">so it compiles to worse code for that architecture.</a>.  <code>round</code> can actually inline to a single instruction for ARM, since it seems ARM has an instruction with those semantics."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1469069094, "post_id": 38490616, "comment_id": 64388802, "body": "@Peter Cordes Good thoughts in your <a href=\"http://stackoverflow.com/questions/38487718/truncate-floats-and-doubles-after-user-defined-points-in-x87-and-sse-fpus/38490616?noredirect=1#comment64388705_38490616\">comment</a>.  I see both <code>rint()</code> and <code>nearbyint()</code> as contenders.  Thanks for the tip.  Amend the post as you see fit - it is community wiki."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1469069346, "post_id": 38490616, "comment_id": 64388856, "body": "oh right, yes <a href=\"http://en.cppreference.com/w/c/numeric/math/nearbyint\" rel=\"nofollow noreferrer\"><code>double nearbyint(double)</code></a> should always be at least as efficient, and potentially better since it doesn&#39;t have to set errno.  Other than that, I think they have identical semantics."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1469069146, "last_edit_date": 1469069146, "creation_date": 1469047838, "answer_id": 38490616, "question_id": 38487718, "link": "https://stackoverflow.com/questions/38487718/truncate-floats-and-doubles-after-user-defined-points-in-x87-and-sse-fpus/38490616#38490616", "title": "Truncate Floats and Doubles after user defined points in X87 and SSE FPUs", "body": "<blockquote>\n  <p>how do I do this in X87 ( scalar FPU ) and SSE ( vector FPU ) ?</p>\n</blockquote>\n\n<p>The following does not use X87 nor SSE.  I've included it as a community reference for general purpose code.  If anything, it can be used to test a X87 solution.</p>\n\n<ol>\n<li><p>Any \"chopping\" of the result of <code>g()</code> will at least <em>marginally</em> increase error, hopefully tolerable as OP said \"To avoid spreading error to other computations ...\"</p></li>\n<li><p>It is unclear if OP wants \"accurate results up to 5 decimals\" to reflect absolute precision (+/- 0.000005) or relative precision (+/- 0.000005 * result).  Will assume \"absolute precision\".</p></li>\n<li><p>Since <code>float</code>, <code>double</code> are far often a <em>binary</em> floating point, any \"chop\" will reflect a FP number <em>nearest</em> to a multiple of 0.00001.</p></li>\n<li><p>Text Method:</p>\n\n<pre><code>//       - x    xxx...xxx    . xxxxx \\0\nchar buf[1+1+ DBL_MAX_10_EXP+1  +5   +1];\nsprintf(buf, \"%.5f\", x);\nx = atof(buf);\n</code></pre></li>\n<li><p><strike><code>round()</code></strike>  <code>rint()</code> method:</p>\n\n<pre><code>#define SCALE 100000.0\nif (fabs(x) &lt; DBL_MAX/SCALE) {\n  x = x*SCALE;\n  x = rint(x)/SCALE;\n}\n</code></pre></li>\n<li><p>Direct bit manipulation of <code>x</code>.  Simply zero select bits in the significand.</p>\n\n<pre><code>TBD code.\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1469069482, "post_id": 38493931, "comment_id": 64388893, "body": "Could use <code>double HHGTG_round(double) { return 42; }</code>"}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 3, "last_activity_date": 1469073487, "last_edit_date": 1469073487, "creation_date": 1469068405, "answer_id": 38493931, "question_id": 38487718, "link": "https://stackoverflow.com/questions/38487718/truncate-floats-and-doubles-after-user-defined-points-in-x87-and-sse-fpus/38493931#38493931", "title": "Truncate Floats and Doubles after user defined points in X87 and SSE FPUs", "body": "<p>As several people commented, <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow\">more early rounding doesn't help the final result be more accurate</a>.  If you want to read more about floating point comparisons and weirdness / gotchas, I highly recommend Bruce Dawson's series of articles on floating point.  Here's a quote from <a href=\"https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/\" rel=\"nofollow\">the one with the index</a></p>\n\n<blockquote>\n  <p>We\u2019ve finally reached the point in this series that I\u2019ve been waiting\n  for. In <a href=\"https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/\" rel=\"nofollow\">this post</a> I am going to share the most crucial piece of\n  floating-point math knowledge that I have. Here it is:</p>\n  \n  <p>[Floating-point] math is hard.</p>\n  \n  <p>You just won\u2019t believe how vastly, hugely, mind-bogglingly hard it is.\n  I mean, you may think it\u2019s difficult to calculate when trains from\n  Chicago and Los Angeles will collide, but that\u2019s just peanuts to\n  floating-point math.</p>\n</blockquote>\n\n<p>(Bonus points if you recognize that last paragraph as a paraphrase of a famous line about space.)</p>\n\n<hr>\n\n<h3>How you could actually implement your bad idea:</h3>\n\n<p>There aren't any machine instructions or C standard library functions to truncate or round to anything other than integer.</p>\n\n<p>Note that there are machine instructions (and C functions) that round a <code>double</code> to nearest (representable) integer without converting it to <code>intmax_t</code> or anything, just <code>double</code>-><code>double</code>.  So no round-trip through a fixed-width 2's complement integer.</p>\n\n<p>So to use them, you could scale your float up by some factor, round to nearest integer, then scale back down.  (like chux's <code>round()</code>-based function, but I'd recommend <a href=\"http://en.cppreference.com/w/c/numeric/math/rint\" rel=\"nofollow\">C99 <code>double rint(double)</code></a> instead of <code>round()</code>.  <code>round</code> has weird rounding semantics that don't match any of the available rounding modes on x86, so it compiles to worse code.</p>\n\n<hr>\n\n<p><strong>The x86 asm instructions you keep mentioning are nothing special</strong>, and don't do anything that you can't ask the compiler to do with pure C.</p>\n\n<p><a href=\"http://www.felixcloutier.com/x86/FIST:FISTP.html\" rel=\"nofollow\"><code>FISTP</code></a> (Float Integer STore (and Pop the x87 stack) is one way for a compiler or asm programmer to implement <a href=\"https://stackoverflow.com/a/37624488/224132\"><code>long lrint(double)</code> or <code>(int)nearbyint(double)</code>.</a>  Some compilers make better code for one or the other.  It rounds using the current x87 rounding mode (default: round to nearest), which is the <a href=\"http://en.cppreference.com/w/c/numeric/math/rint\" rel=\"nofollow\">same semantics as those ISO C standard functions</a>.</p>\n\n<p><a href=\"http://www.felixcloutier.com/x86/FISTTP.html\" rel=\"nofollow\"><code>FISTTP</code></a> (Float Integer STore with Truncation (and Pop the x87 stack) is <a href=\"https://en.wikipedia.org/wiki/SSE3\" rel=\"nofollow\">part of SSE3</a>, even though it operates on the x87 stack.  It lets compilers avoid setting the rounding mode to truncation (round-towards-zero) to implement the C truncation semantics of <code>(long)x</code>, and then restoring the old rounding mode.</p>\n\n<p>This is what the \"not modify the control word\" stuff is about.  Neither instruction does that, but to implement <code>(int)x</code> without FISTTP, the compiler has to use <em>other</em> instructions to modify and restore the rounding mode around a <code>FIST</code> instruction.  Or just use <a href=\"http://www.felixcloutier.com/x86/CVTTSD2SI.html\" rel=\"nofollow\">SSE2 <code>CVTTSD2SI</code></a> to convert a double in an xmm register with truncation, instead of an FP value on the legacy x87 stack.</p>\n\n<p>Since <code>FISTTP</code> is only available with SSE3, you'd only use it for <code>long double</code>, or in 32-bit code that had FP values in x87 registers anyway because of the crusty old 32-bit ABI which returns FP values on the x87 stack.</p>\n\n<hr>\n\n<p>PS. if you didn't recognize Bruce's <a href=\"https://en.wikipedia.org/wiki/The_Hitchhiker%27s_Guide_to_the_Galaxy\" rel=\"nofollow\">HHGTG</a> reference, <a href=\"http://hitchhikersguidequotes.tumblr.com/post/13945214509/space-is-big-really-big-you-just-wont-believe\" rel=\"nofollow\">the original is</a>:</p>\n\n<blockquote>\n  <p>Space is big. Really big. You just won\u2019t believe how vastly hugely\n  mindbogglingly big it is. I mean you may think it\u2019s a long way down\n  the road to the chemist\u2019s, but that\u2019s just peanuts to space.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 6615057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/935b05610702d4621e61e276e12b438b?s=128&d=identicon&r=PG&f=1", "display_name": "user354900", "link": "https://stackoverflow.com/users/6615057/user354900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469073487, "creation_date": 1469037823, "question_id": 38487718, "link": "https://stackoverflow.com/questions/38487718/truncate-floats-and-doubles-after-user-defined-points-in-x87-and-sse-fpus", "title": "Truncate Floats and Doubles after user defined points in X87 and SSE FPUs", "body": "<p>I have made a function <code>g</code> that is able to approximate a function to a certain degree, this function gives accurate results up to 5 decimals ( 1,23456xxxxxxxxxxxx where the x positions are just rounding errors / junk ) .</p>\n\n<p>To avoid spreading error to other computations that will use the results of <code>g</code> I would like to just set all the x positions to zero, better yet, just set to 0 everything after the 5th decimal .</p>\n\n<p>I haven't found anything in X87 and SSE literature that let's me play with IEEE 754 bits or their representation the way I would like to .</p>\n\n<p>There is an old reference to the <code>FISTP</code> instruction for X87 that is apparently mirrored in the SSE world with <code>FISTTP</code>, with the benefit that <code>FISTTP</code> doesn't necesserily modify the control word and is therefore faster .</p>\n\n<p>I have noticed that <code>FISTTP</code> was called \"chopping mode\", but now in more modern literature is just \"rounding toward zero\" or \"truncate\" and this confuse me because \"chopping\" means removing something altogether where \"rounding toward zero\" doesn't necessarily means the same thing to me .</p>\n\n<p>I don't need to round to zero, I only need to preserve up to 5 decimals as the last step in my function before storing the result in memory; how do I do this in X87 ( scalar FPU ) and SSE ( vector FPU ) ? </p>\n"}, {"tags": ["c++", "fft"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1469038340, "post_id": 38487680, "comment_id": 64377532, "body": "There&#39;s no need to re-post your question, you should edit your original question to preserve the discussion."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1469088204, "post_id": 38487680, "comment_id": 64396632, "body": "&quot;I know IFFT is for this&quot; - and it&#39;s the <i>only</i> transform that gives you back the original. But why the irrational dislike for the IFFT?"}, {"owner": {"reputation": 113, "user_id": 2147973, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/jpDcx.png?s=128&g=1", "display_name": "Jay Kim", "link": "https://stackoverflow.com/users/2147973/jay-kim"}, "edited": false, "score": 0, "creation_date": 1469088813, "post_id": 38487680, "comment_id": 64396998, "body": "for test purpose. This is sound signal and I&#39;m trying to make a original sound back from major frequencies of the original signal. Does it must make the same sound if I play each frequency at the same time?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1469090459, "post_id": 38487680, "comment_id": 64398142, "body": "Sorry, I don&#39;t understand that last sentence. &quot;Frequency&quot; is associated with a sine wave, which is <i>not</i> localized in time, so you can&#39;t really talk about &quot;the same time&quot;."}, {"owner": {"reputation": 113, "user_id": 2147973, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/jpDcx.png?s=128&g=1", "display_name": "Jay Kim", "link": "https://stackoverflow.com/users/2147973/jay-kim"}, "edited": false, "score": 0, "creation_date": 1469091061, "post_id": 38487680, "comment_id": 64398530, "body": "yea, u r right. I was just trying to simulate &quot;simultaneous&quot; sound play back environment. make each frequency into sound signal and play them at once. thats what i meant."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 2147973, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/jpDcx.png?s=128&g=1", "display_name": "Jay Kim", "link": "https://stackoverflow.com/users/2147973/jay-kim"}, "edited": false, "score": 0, "creation_date": 1469090224, "post_id": 38498497, "comment_id": 64397988, "body": "That seems correct. reconstructed signal plot fits after its original signal. But this is getting more confusing. :("}, {"owner": {"reputation": 113, "user_id": 2147973, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/jpDcx.png?s=128&g=1", "display_name": "Jay Kim", "link": "https://stackoverflow.com/users/2147973/jay-kim"}, "edited": false, "score": 0, "creation_date": 1469091473, "post_id": 38498497, "comment_id": 64398811, "body": "Could you plz explain why this is happening? As far as I understand, Fourier Series just input signal into its frequency domain. How time frame can be involved?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 113, "user_id": 2147973, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/jpDcx.png?s=128&g=1", "display_name": "Jay Kim", "link": "https://stackoverflow.com/users/2147973/jay-kim"}, "edited": false, "score": 0, "creation_date": 1469091924, "post_id": 38498497, "comment_id": 64399143, "body": "Don&#39;t confuse things. Fourier Series is a related thing, not an FFT. The Fourier Series is a mathematical construct for a periodic signal defined at any moment. You very much have a discrete signa, and the FFT works on that. That said, how big is your input sound (in samples), and how many samples do you pass to the FFT? They&#39;re probably not the same."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1469088483, "creation_date": 1469088483, "answer_id": 38498497, "question_id": 38487680, "link": "https://stackoverflow.com/questions/38487680/reconstruct-signal-from-fft/38498497#38498497", "title": "reconstruct signal from fft", "body": "<p>Quite normal. You're doing a frame-by-frame transform. That means the FFT frame is produced <em>after</em> one time frame. When transforming back, you have the inverse effect: your time frame starts <em>after</em> the FFT frame has been decoded.</p>\n"}], "owner": {"reputation": 113, "user_id": 2147973, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/jpDcx.png?s=128&g=1", "display_name": "Jay Kim", "link": "https://stackoverflow.com/users/2147973/jay-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1637, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1469088483, "creation_date": 1469037678, "last_edit_date": 1469080093, "question_id": 38487680, "link": "https://stackoverflow.com/questions/38487680/reconstruct-signal-from-fft", "title": "reconstruct signal from fft", "body": "<p>Im reconstructing signal from amplitude, frequency and phase obtained fft. After I do fft, I picked some of its frequencies and reconstructed time line signal from those fft data. I know IFFT is for this but, I dont want to use IFFT. \nReconstruction seems fine but theres some time lag between two signals. This image shows this problem. Black one is the original signal and red one is that reconstructed.\n<a href=\"https://i.stack.imgur.com/cpHDW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cpHDW.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I know correctly, amplitude of frequency bin t is <code>sqrt(real[t]*real[t] + imag[t]*imag[t]</code> and phase is <code>atan2(imag[t], real[t])</code>.\nSo, I used formula <code>amplitude * cos(2*\u03c0*x / frequency + phase)</code> for a frequency bin. And I summed those regenerated waves. As far as I know, this should generate intact signal fits to original signal. But it ends up always with some time lag from original signal.<br></p>\n\n<p>Yeah, I think its about phase but thats so simple to calculate and its working correctly. If it has error, reconstructed signal would not fit to its original signal in shape.</p>\n\n<p>This is the code to generate cosine wave. I generated cosine wave from sin(x + \u03c0/2).\n<code></p>\n\n<pre><code>std::vector&lt;short&gt; encodeSineWavePCM(\n    const double frequency,\n    const double amplitude,\n    const double offSetPhase)\n{\n    const double pi = 3.1415926535897932384626;\n    const int N = 44100; // 1 sec length wave\n    std::vector&lt;short&gt; s(N);\n    const double wavelength = 1.0 * N / frequency;\n    const double unitlength = 2 * pi / wavelength;\n    for (int i = 0; i&lt;N; i ++) {\n        double val = sin(offSetPhase + i * unitlength);\n        val *= amplitude;\n        s[i] = (short)val;\n    }\n\n    return s;\n}\n</code></pre>\n\n<p></code></p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 5, "creation_date": 1469037712, "post_id": 38487653, "comment_id": 64377129, "body": "Cool assignment and good job for doing it. What do you see when debugging it? And maybe then you could remove all these and post just a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1469037730, "post_id": 38487653, "comment_id": 64377139, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1469037730, "post_id": 38487653, "comment_id": 64377141, "body": "What have you done so far to try debugging this? Have you stepped through it in a debugger? What test cases have you run it on? We can help you out best if you let us know what you&#39;ve tried; otherwise it looks like you&#39;re trying to get us to do your homework for you."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1469038982, "post_id": 38487653, "comment_id": 64377918, "body": "If the first character in your <code>input</code> stream isn&#39;t <code>&#39;c&#39;</code>, the entire while loop <i>spins</i>. You never read another character from input, so <code>next</code> always stays the same (i.e. not <code>&#39;c&#39;</code>), and <code>input</code> never reaches eof.  You also will never write a single thing to your stream. I would suggest you consider what to do in the <code>else</code> case that currently doesn&#39;t exist for the most-outer <code>if</code> block."}, {"owner": {"reputation": 37, "user_id": 6614997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a038284c462a0542fc3f71f2ee23ec40?s=128&d=identicon&r=PG&f=1", "display_name": "pansoh", "link": "https://stackoverflow.com/users/6614997/pansoh"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1469039841, "post_id": 38487653, "comment_id": 64378383, "body": "@WhozCraig: Although my file begins with &#39;c&#39;, it still output nothing."}, {"owner": {"reputation": 37, "user_id": 6614997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a038284c462a0542fc3f71f2ee23ec40?s=128&d=identicon&r=PG&f=1", "display_name": "pansoh", "link": "https://stackoverflow.com/users/6614997/pansoh"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1469040062, "post_id": 38487653, "comment_id": 64378530, "body": "@FirstStep: I cannot find any errors when debugging it, I try to separate the code to look at it by small parts, it seems to make sense."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1469040070, "post_id": 38487653, "comment_id": 64378533, "body": "@pansoh not gonna sit and argue. First, I don&#39;t believe it unless I see it, and since you never posted the sample program content you&#39;re trying to parse <i>in your question</i> that&#39;s that. Secondly, what I wrote still stands. If you <i>ever</i> get to the outer-most if-block if that while-loop, the current character is <i>not</i> a <code>&#39;c&#39;</code>, <i>and</i> you&#39;ve not at <code>input.eof()</code>, this program <i>will</i> spin infinitely. If you can&#39;t see that in your program, you need to look at it again."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1469040541, "post_id": 38487653, "comment_id": 64378794, "body": "Simply, <b>step throuh each word</b> in <code>std::istream</code> using <code>operator&gt;&gt;</code>, save it to <code>std::string</code>, if it&#39;s <code>cin</code> check if it&#39;s followed by <code>&lt;&lt;</code> if yes change it to <code>&lt;&lt;</code>. Same with <code>cout</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1469044036, "post_id": 38487653, "comment_id": 64380781, "body": "Each word? Nah. Use <code>std::getline</code> to read everything between &#39;;&#39;s into a <code>std::string</code>. Search the <code>string</code> for &quot;cin &quot; or cout&quot; and search and replace for &quot;&lt;&lt;&quot;, &quot;&gt;&gt;&quot; or &quot;&lt;&lt;&quot;, &quot;&gt;&gt;&quot;  respectively if found. Write string to corrected  file. Close all files. Replace original file with corrected file. This will trap deviant cases like <code>cout &lt;&lt; &quot;A&quot; &gt;&gt; &quot;B&quot;;</code>"}, {"owner": {"reputation": 37, "user_id": 6614997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a038284c462a0542fc3f71f2ee23ec40?s=128&d=identicon&r=PG&f=1", "display_name": "pansoh", "link": "https://stackoverflow.com/users/6614997/pansoh"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469056778, "post_id": 38487653, "comment_id": 64386086, "body": "@user4581301: Sorry! I am not very understand what you mean. You mean I need to put std::getline in the void function to read &quot;;&quot;s?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469057594, "post_id": 38487653, "comment_id": 64386299, "body": "<code>std::getline(input, command, &#39;;&#39;);</code> will read everything up to the next &#39;;&#39; from the file and store it in string <code>command</code>. You can&#39;t trust words because they don&#39;t have enough context and a line also may not contain all the context you need or may contain too much. Fortunately <code>;</code> can be used to delimit the code most of the time. About the only fail case I can think of is someone has nested templates inside the same token as a <code>cin</code> or <code>cout</code>. A pretty rare case."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469057963, "post_id": 38487653, "comment_id": 64386397, "body": "On second thought, <code>std::string fail = &quot;cout &gt;&gt; hah ha ha you lose!&quot;;</code> will trip my code up. To build this and be sure you practically have to write a compiler. A fairly complete state machine at the very least."}, {"owner": {"reputation": 37, "user_id": 6614997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a038284c462a0542fc3f71f2ee23ec40?s=128&d=identicon&r=PG&f=1", "display_name": "pansoh", "link": "https://stackoverflow.com/users/6614997/pansoh"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1469058240, "post_id": 38487653, "comment_id": 64386457, "body": "@user4581301: After I put in the void function, it creates some errors."}, {"owner": {"reputation": 37, "user_id": 6614997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a038284c462a0542fc3f71f2ee23ec40?s=128&d=identicon&r=PG&f=1", "display_name": "pansoh", "link": "https://stackoverflow.com/users/6614997/pansoh"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1469058624, "post_id": 38487653, "comment_id": 64386526, "body": "@WhozCraig: I use &quot; input &gt;&gt; next&quot; instead of &quot;input.eof() &quot;."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6614997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a038284c462a0542fc3f71f2ee23ec40?s=128&d=identicon&r=PG&f=1", "display_name": "pansoh", "link": "https://stackoverflow.com/users/6614997/pansoh"}, "edited": false, "score": 0, "creation_date": 1469063416, "post_id": 38492825, "comment_id": 64387587, "body": "This way can transfer the word in input file to output file but it outputs nothing during compiling. The expect result is &quot;#include &lt;iostream&gt;&quot; and &quot;using namespace std;&quot;  This is the link for the submit result: <a href=\"https://submit.cs.ucsb.edu/submission/202937\" rel=\"nofollow noreferrer\">submit.cs.ucsb.edu/submission/202937</a>. May be you can have a look."}, {"owner": {"reputation": 660, "user_id": 6803631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533527fd4af5a6cd263ea2d9c6b82890?s=128&d=identicon&r=PG&f=1", "display_name": "nomadictype", "link": "https://stackoverflow.com/users/6803631/nomadictype"}, "edited": false, "score": 0, "creation_date": 1478246236, "post_id": 38492825, "comment_id": 68084587, "body": "This doesn&#39;t correctly write the semicolons (it prints one in the first iteration but not thereafter), as pointed out by @Deegeeek in <a href=\"http://stackoverflow.com/questions/40414721/i-o-stream-string-manipulation-correct-cin-cout-operators\">this question</a>. The two lines starting with &quot;output &lt;&lt;&quot; should be swapped."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 660, "user_id": 6803631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533527fd4af5a6cd263ea2d9c6b82890?s=128&d=identicon&r=PG&f=1", "display_name": "nomadictype", "link": "https://stackoverflow.com/users/6803631/nomadictype"}, "edited": false, "score": 0, "creation_date": 1478273437, "post_id": 38492825, "comment_id": 68101199, "body": "@nomadictype Thank you. Corrected."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 3, "last_activity_date": 1478273397, "last_edit_date": 1478273397, "creation_date": 1469060115, "answer_id": 38492825, "question_id": 38487653, "link": "https://stackoverflow.com/questions/38487653/a-program-that-will-correct-a-c-program-that-has-errors-in-the-operator/38492825#38492825", "title": "A program that will correct a C++ program that has errors in the operator", "body": "<p>I can't explain this in a comment. Please don't judge this too harshly:</p>\n\n<pre><code>void print(ifstream&amp; input,ofstream&amp; output)\n{\n    bool first = true;\n    std::string command;\n    while(std::getline(input, command, ';'))\n    { // loop until no more input to read or input fails to be read\n        if (command.find(\"cin\")!= std::string::npos)\n        { // found cin somewhere in command. This is too crude to work. See below\n            size_t pos = command.find(\"&lt;&lt;\"); // look for the first &lt;&lt;\n            while (pos != std::string::npos)\n            { // keep replacing and looking until end of string\n                command.replace(pos, 2, \"&gt;&gt;\"); // replace with &gt;&gt;\n                pos = command.find(\"&lt;&lt;\", pos); // look for another \n            }\n        }\n        else if (command.find(\"cout\")!= std::string::npos)\n        { // same as above, but other way around\n            size_t pos = command.find(\"&gt;&gt;\"); \n            while (pos != std::string::npos)\n            {\n                command.replace(pos, 2, \"&lt;&lt;\");\n                pos = command.find(\"&gt;&gt;\", pos);\n            }\n        }\n        if (! first)\n        {\n            output &lt;&lt; ';' &lt;&lt; command; // write string to output\n        }\n        else\n        {\n            first = false;\n            output &lt;&lt; command; // write string to output\n        }\n    }\n}\n</code></pre>\n\n<p>This will catch and correctly handle MOST cases. What it can't deal with is:</p>\n\n<p>Stuff like </p>\n\n<pre><code>cout &lt;&lt; Cincinnati; // find is just too dumb. Regex is not\n           ^ finds a cin right here and starts reversing &lt;&lt;\n</code></pre>\n\n<p>Comments</p>\n\n<pre><code>/* cout &gt;&gt; hah ha ha Sucker!!!; */\n</code></pre>\n\n<p>String literals</p>\n\n<pre><code>std::string fail = \"cout &gt;&gt; Got you again!!!\";\n</code></pre>\n\n<p>[expletive deleted] macros</p>\n\n<pre><code>#define evil cout &gt;\\\n&gt; \"Gotcha!!!\";\n</code></pre>\n\n<p>And really odd stuff like</p>\n\n<pre><code>cout &lt;&lt; vector&lt;vector&lt;int&gt;&gt;(42)[0];\n                         ^ Muhuhahahahahaha!!!\n</code></pre>\n\n<p>To do this right, you need a non-trivial state machine that can detect and eliminate the above failure cases.</p>\n"}], "owner": {"reputation": 37, "user_id": 6614997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a038284c462a0542fc3f71f2ee23ec40?s=128&d=identicon&r=PG&f=1", "display_name": "pansoh", "link": "https://stackoverflow.com/users/6614997/pansoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1730, "favorite_count": 0, "closed_date": 1469408404, "accepted_answer_id": 38492825, "answer_count": 1, "score": 0, "last_activity_date": 1478273397, "creation_date": 1469037603, "last_edit_date": 1469058651, "question_id": 38487653, "link": "https://stackoverflow.com/questions/38487653/a-program-that-will-correct-a-c-program-that-has-errors-in-the-operator", "closed_reason": "Not suitable for this site", "title": "A program that will correct a C++ program that has errors in the operator", "body": "<p>Write a program that will correct a C++ program that has errors in which operator, <code>&lt;&lt;</code> or <code>&gt;&gt;</code>, it uses with <code>cin</code> and <code>cout</code>. The program replaces each (incorrect) occurrence of</p>\n\n<p><code>cin &lt;&lt;</code>\nwith the corrected version\n<code>cin &gt;&gt;</code></p>\n\n<p>and each (incorrect) occurrence of\n<code>cout &gt;&gt;</code>\nwith the corrected version\n<code>cout &lt;&lt;</code></p>\n\n<p>Allow for the possibility that there may be any number of whitespace characters (one or more) between <code>cin</code> and <code>&lt;&lt;</code> and between <code>cout</code> and <code>&gt;&gt;</code>. The replacement corrected version has only one blank between the <code>cin</code> or <code>cout</code> and the following operator.</p>\n\n<p>Your program should get the source filename as an input from the user. The corrected version should be output to a file with name <code>corrected.txt</code> and it should also be displayed on the terminal. That means output of your program (after getting the filename) should be exactly same as the contents of the file <code>corrected.txt</code>. Your program should define a function that is called with the input- and output-file streams as arguments.</p>\n\n<p>There are no compile errors for the code. However, the code output's nothing (The file exists).  Also the words in the file will disappear after I compile the program. Can anyone give me some advice? Thanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cctype&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid print(ifstream&amp; input,ofstream&amp; output, char next)\n{\n\n    input.get(next);\n    cout &lt;&lt; next;\n    output.put(next);\n\n    while(input &gt;&gt; next)\n    {\n        if(next=='c')\n        {\n            output.put(next);\n            cout &lt;&lt; next;\n            input.get(next);\n\n            if(next=='i')\n            {   output.put(next);\n                cout &lt;&lt; next;\n                input.get(next);\n\n\n                if(next=='n')\n                {\n                    output.put(next);\n                    cout &lt;&lt; next;\n                    while(next==' ')\n                    {\n                        input.get(next);\n                    }\n                    output.put(' ');\n                    if(next=='&lt;')\n                    {\n\n                        input.get(next);\n\n                        if(next == '&lt;')\n\n                        {\n                            cout &lt;&lt; \"&gt;&gt;\";\n                            input.get(next);\n\n                        }\n                        else\n                        {\n                            output.put(next);\n                            cout &lt;&lt; next;\n                        }\n                    }\n                    else\n                    {\n                        output.put(next);\n                        cout &lt;&lt; next;\n                    }\n                }\n\n                else\n                {\n                    output.put(next);\n                    cout &lt;&lt; next;\n                }\n            }\n\n            else if (next=='o')\n            {\n                output.put(next);\n                cout &lt;&lt; next;\n                input.get(next);\n\n                if(next=='u')\n                {\n                    output.put(next);\n                    cout &lt;&lt; next;\n                    input.get(next);\n\n\n                    if(next=='t')\n                    {\n                        output.put(next);\n                        cout &lt;&lt; next;\n                        while(next==' ')\n                        {\n                            input.get(next);\n                        }\n                        output.put(' ');\n                        if(next=='&gt;')\n                        {\n\n                            input.get(next);\n\n                            if(next == '&gt;')\n\n                            {\n                                cout &lt;&lt; \"&lt;&lt;\";\n                                input.get(next);\n\n                            }\n                            else\n                            {\n                                output.put(next);\n                                cout &lt;&lt; next;\n                            }\n\n                        }\n                        else\n                        {\n                            output.put(next);\n                            cout &lt;&lt; next;\n                        }\n\n                    }\n                    else\n                    {\n                        output.put(next);\n                        cout &lt;&lt; next;\n                    }\n                }\n\n                else\n                {\n                    output.put(next);\n                    cout &lt;&lt; next;\n                }\n                input.get(next);\n            }\n\n        }\n\n    }\n}\n\nint main()\n{\n    ifstream input;\n    ofstream output;\n    char next;\n    char filename[16];\n    cout &lt;&lt; \"Enter filename:\" &lt;&lt; endl;\n    cin &gt;&gt; filename;\n    input.open(filename);\n    if(input.fail()) {\n        cout &lt;&lt; \"Could not open the file \" &lt;&lt; endl;\n        exit(0);\n    }\n    output.open(\"original.txt\");\n\n    if (output.fail()) {\n        cout &lt;&lt; \"Could not open the file \" &lt;&lt; filename &lt;&lt; endl;\n        exit(1);\n    }\n    print(input, output, next);\n\n    input.close();\n    output.close();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor", "language-lawyer", "lifetime", "virtual-inheritance"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1469039083, "post_id": 38487640, "comment_id": 64377971, "body": "What exception are you getting? This compiles and runs fine on my system (g++)"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1469039376, "post_id": 38487640, "comment_id": 64378152, "body": "Elaborating a bit more - the code you have here looks like it&#39;s totally fine (though the inheritance diagram took me a while to draw out ^_^), so I suspect something else is going on. Additionally, is this example sufficient to cause the crash (as in, should I expect this to crash when I run it?)"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1469040140, "post_id": 38487640, "comment_id": 64378570, "body": "Not clear why you need all this virtual inheritance - you don&#39;t actually have a diamond-shaped hierarchy. There is a class that appears twice in the inheritance lattice - <code>LinkedListNode</code> - but that&#39;s precisely the one that you do <i>not</i> inherit virtually, and thus end up with two copies of in <code>MyClass</code>."}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "edited": false, "score": 0, "creation_date": 1469040421, "post_id": 38487640, "comment_id": 64378734, "body": "I know it&#39;s not clear why <code>virtual</code> is and isn&#39;t where it is, but there is a reason which shows up in larger systems (which consist of 90% of what I do). And I agree nothing is wrong with this code, but on the Intel C++ compiler, it has a segmentation fault."}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1469040582, "post_id": 38487640, "comment_id": 64378815, "body": "@templatetypedef - &quot;The specific error is that, upon construction, the expression <code>static_cast&lt;T*&gt;(this)</code> causes a segmentation fault....... when using the Intel C++ compiler.&quot;"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1469040961, "post_id": 38487640, "comment_id": 64379046, "body": "Okay, so it&#39;s specifically a segmentation fault. I wasn&#39;t sure whether this was an idealized example or an actual minimal test case. Thanks!"}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1469042264, "post_id": 38487640, "comment_id": 64379799, "body": "@templatetypedef - I suppose one note: this is a derived example which exhibits nearly the exact same inheritance hierarchy as the case that&#39;s dying. That being said, I haven&#39;t yet tested <i>the exact code</i> in the example, but will in the next couple hours. I can&#39;t share the original code for proprietarity reasons."}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1469046553, "post_id": 38487640, "comment_id": 64382152, "body": "@templatetypedef - OK, I have now tested the exact code above and it crashes with a segmentation fault in exactly the right spot (however, I do have to replace the ellipsis with the correct arguments or else ICPC will die anyway). Putting <code>static_cast&lt;T*&gt;(this)</code> in the constructor <i>body</i> works just fine, but putting it there in the initializer list doesn&#39;t work. So the question is still: is this spec behavior and GCC/MSVC/CLANG is nice? Or is this a bug in Intel&#39;s compiler? (if it&#39;s spec, what part of the spec?)"}, {"owner": {"reputation": 3301, "user_id": 234946, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6af8b76e0ae95edd533cf3a57e4294f8?s=128&d=identicon&r=PG", "display_name": "Olipro", "link": "https://stackoverflow.com/users/234946/olipro"}, "edited": false, "score": 0, "creation_date": 1469139749, "post_id": 38487640, "comment_id": 64427510, "body": "ICC has been relatively well known to have compiler bugs - I can specifically point out a third-party x64 version of Firefox that was compiled with ICC that resulted in a significant number of compiler bugs surfacing that Intel had to fix. Reliability also tends to vary significantly with compiler options chosen."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1469148604, "post_id": 38487640, "comment_id": 64429582, "body": "The <code>static_cast</code> is a distraction, this is just an up-cast, which can also be done implicitly (and is actually done as implicit conversion by <code>static_cast</code>. Removed non specific <a href=\"https://stackoverflow.com/questions/tagged/static-cast\">static-cast</a> tag, added the more specific <a href=\"https://stackoverflow.com/questions/tagged/up-casting\">up-casting</a>"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1469149613, "post_id": 38487640, "comment_id": 64429799, "body": "The constructor starts the lifetime of the object, by first constructing the base classes, the members, and then establishing the object itself; the up cast works in the body of the constructor and not in the init-list; added <a href=\"https://stackoverflow.com/questions/tagged/constructor\">constructor</a> and <a href=\"https://stackoverflow.com/questions/tagged/lifetime\">lifetime</a> for that reason."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1469247342, "post_id": 38487640, "comment_id": 64469351, "body": "@curiousguy That can&#39;t possibly be true, or at least not universally true all of the time. There&#39;s an example in <b>[class.cdtor]/3</b> that shows up-casting of <code>this</code> in constructor initializer list and declares it to be valid. Also, it&#39;s OK to use some members to initialize other members (if you are careful about the order), and member access uses <code>this</code> implicitly. Could you cite chapter and verse suggesting that <code>this</code> is not valid in initializer list? It doesn&#39;t make any sense - how else would the program even locate members to be initialized?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1469250189, "post_id": 38487640, "comment_id": 64469771, "body": "@curiousguy &quot;<b>[class.base.init]/15</b> [<i>Note</i>: Because the <i>mem-initializer</i> are evaluated in the scope of the constructor, the <code>this</code> pointer can be used in the <i>expression-list</i> of a <i>mem-initializer</i> to refer to the object being initialized. \u2014 <i>end note</i>]&quot; And like I said, there&#39;s an example in <b>[class.cdtor]/3</b> that upcasts <code>this</code> and passes the result of that upcast to base class constructor, in the initializer list; it initializes one base class with the pointer to the other."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1469250766, "post_id": 38487640, "comment_id": 64469862, "body": "@curiousguy &quot;<b>[class.cdtor]/3</b> To explicitly or implicitly convert a pointer (a glvalue) referring to an object of class <code>X</code> to a pointer (reference) to a direct or indirect base class <code>B</code> of <code>X</code>, the construction of <code>X</code> and the construction of all of its direct or indirect bases that directly or indirectly derive from <code>B</code> shall have started ..., otherwise the conversion results in undefined behavior.&quot; You seem to argue that the constructor &quot;starts&quot; only when opening brace of its body is reached - but again, an example right under that clause clearly contradicts such interpretation."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1469251260, "post_id": 38487640, "comment_id": 64469938, "body": "@curiousguy Yes, some uses can - <b>[class.base.init]/16</b> explicitly spells them out. But upcast of <code>this</code> is not one of them, and in fact is explicitly allowed under certain carefully prescribed conditions - which I believe the OP&#39;s code satisfies."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 2, "creation_date": 1469251379, "post_id": 38487640, "comment_id": 64469951, "body": "@curiousguy &quot;<b>[class.base.init]/16</b> Member functions (including virtual member functions, 10.3) can be called for an object under construction. Similarly, an object under construction can be the operand of the <code>typeid</code> operator (5.2.8) or of a <code>dynamic_cast</code> (5.2.7). However, if these operations are performed in a <i>ctor-initializer</i> (or in a function called directly or indirectly from a <i>ctor-initializer</i>) before all the <i>mem-initializer</i>s for base classes have completed, the result of the operation is undefined.&quot; But the OP&#39;s code does none of the three prohibited actions."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1469253998, "post_id": 38487640, "comment_id": 64470404, "body": "FWIW, the exact same text was already in N1905. It&#39;s very old spec, not a moving standard target."}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469371403, "post_id": 38487640, "comment_id": 64497232, "body": "@IgorTandetnik - Your last comment is the answer to this question; I highly recommend you add this to your answer. Up-casting to a virtual base class <b>is</b> is [special] dynamic cast because the location of the superclass depends on the dynamic type of the object, not its static type - and therefore must ask the dynamic type where it is."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469377144, "post_id": 38487640, "comment_id": 64499123, "body": "@iAdjunct Up-casting is specifically addressed by <b>[class.cdtor]/3</b>, which I did too add to my answer."}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469379670, "post_id": 38487640, "comment_id": 64499956, "body": "@IgorTandetnik that example isn&#39;t quite the same thing though since the class which needs the vtable to know where its super is already has finished construction, whereas in my example it hasn&#39;t."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469381298, "post_id": 38487640, "comment_id": 64500481, "body": "@iAdjunct The example has <code>X(this)</code>, where <code>this</code> is <code>E*</code>. <code>E</code> has not finished construction, considering that <code>X(this)</code> is in <code>E</code>&#39;s constrructor&#39;s initializer list. In your example, <code>LinkedListNode ( static_cast&lt;void*&gt;(static_cast&lt;T*&gt;(this)) )</code> is in a similar position, with <code>LinkedListNode</code> for <code>X</code> and <code>InheritAndLinkList&lt;T&gt;</code> for <code>E</code>."}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469384870, "post_id": 38487640, "comment_id": 64501658, "body": "@IgorTandetnik But in that example, E to any of its parents is a static cast (offset known at compile-time). At that point, you&#39;re in a constructed class (in the example), and the conversion to its parent is a dynamic cast (due to the virtual inheritance). In my case, I&#39;m casting from this to a virtual parent in that first step."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1469385975, "post_id": 38487640, "comment_id": 64502034, "body": "@iAdjunct That very same example also says that <code>D(this)</code> is UB. Why would that be if the cast from <code>E*</code> to <code>A*</code> were purely static? In any case, the text of the standard doesn&#39;t make this distinction between &quot;dynamic&quot; and &quot;static&quot; you are trying to make. It describes under what conditions a pointer-to-derived can be converted to a pointer-to-base. If you want to argue that this paragraph is inapplicable, you have to explain precisely which conditions are being violated and how (especially since you yourself demanded a language-lawyerly answer)."}], "answers": [{"comments": [{"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "edited": false, "score": 0, "creation_date": 1469040523, "post_id": 38488280, "comment_id": 64378786, "body": "I agree it looks like that and I&#39;m pretty sure it is that. The question really stems from it being a virtual base class that it&#39;s casting to."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1469256548, "post_id": 38488280, "comment_id": 64470905, "body": "The dawn of an object: before <code>typeid</code> and virtual functions can be used, after virtual base classes are made accessible! GCC uses one hidden field for all of these, the vptr; may be the underlying issue."}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 4, "last_activity_date": 1469253946, "last_edit_date": 1469253946, "creation_date": 1469039613, "answer_id": 38488280, "question_id": 38487640, "link": "https://stackoverflow.com/questions/38487640/c-virtual-inheritance-static-cast-this-to-virtual-parent-in-initializer-lis/38488280#38488280", "title": "C++ Virtual Inheritance: static_cast &quot;this&quot; to virtual parent in initializer list of derived", "body": "<p>For what it's worth, the code looks OK to me. I don't see anything controversial in this use of <code>static_cast</code> - it's run-of-the-mill derived-to-base pointer conversion. Looks like a compiler bug to me.</p>\n\n<p>If you insist on chapter and verse:</p>\n\n<blockquote>\n  <p><strong>[expr.static.cast]/4</strong> An expression <code>e</code> can be explicitly converted to a type <code>T</code> using a <code>static_cast</code> of the form <code>static_cast&lt;T&gt;(e)</code> if the declaration <code>T t(e);</code> is well-formed, for some invented temporary variable <code>t</code> (8.5). The effect of such an explicit conversion is the same as performing the declaration and initialization and then using the temporary variable as the result of the conversion.</p>\n</blockquote>\n\n<p>So we are looking at the validity of <code>T t(this);</code> within the constructor of <code>InheritAndLinkList&lt;T&gt;</code> - a <em>direct-initialization</em>:</p>\n\n<blockquote>\n  <p><strong>[dcl.init]/17</strong> ...</p>\n  \n  <p>-- Otherwise, the initial value of the object being initialized is the (possibly converted) value of the initializer expression. Standard conversions (Clause 4) will be used, if necessary, to convert the initializer expression to the cv-unqualified version of the destination type; no user-defined conversions are considered.</p>\n</blockquote>\n\n<p>.</p>\n\n<blockquote>\n  <p><strong>[conv.ptr]/3</strong> A prvalue of type \u201cpointer to <em>cv</em> <code>D</code>\u201d, where <code>D</code> is a class type, can be converted to a prvalue of type \u201cpointer\n  to <em>cv</em> <code>B</code>\u201d, where <code>B</code> is a base class (Clause 10) of <code>D</code>. If <code>B</code> is an inaccessible (Clause 11) or ambiguous (10.2) base class of <code>D</code>, a program that necessitates this conversion is ill-formed. The result of the conversion is a\n  pointer to the base class subobject of the derived class object.</p>\n</blockquote>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>After vigorous discussion in comments, using <code>this</code> from within constructor initializer list is not quite as straightforward - but your particular use is still legal, I believe.</p>\n\n<blockquote>\n  <p><strong>[class.cdtor]/3</strong> To explicitly or implicitly convert a pointer (a glvalue) referring to an object of class <code>X</code> to a pointer (reference) to a direct or indirect base class <code>B</code> of <code>X</code>, the construction of <code>X</code> and the construction of all of its direct or indirect bases that directly or indirectly derive from <code>B</code> shall have started and the destruction of these classes shall not have completed, otherwise the conversion results in undefined behavior... [<em>Example</em>:</p>\n\n<pre><code>struct A { };\nstruct B : virtual A { };\nstruct C : B { };\nstruct D : virtual A { D(A*); };\nstruct X { X(A*); };\n\nstruct E : C, D, X {\n  E() : D(this), // undefined: upcast from E* to A*\n                 // might use path E* ! D* ! A*\n                 // but D is not constructed\n                 // D((C*)this), // defined:\n                 // E* ! C* defined because E() has started\n                 // and C* ! A* defined because\n                 // C fully constructed\n  X(this) {      // defined: upon construction of X,\n                 // C/B/D/A sublattice is fully constructed\n  }\n};\n</code></pre>\n  \n  <p>\u2014 <em>end example</em> ]</p>\n</blockquote>\n\n<p>Your case resembles <code>X(this)</code> in the example above, and is actually simpler than that because you only cast one step up in the hierarchy, so there are no intermediate classes to be concerned about.</p>\n"}, {"comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1469249041, "post_id": 38537319, "comment_id": 64469598, "body": "Quite frankly, looks like a compiler bug to me. It works with clang and msvc, only crashes with gcc (which I don&#39;t have handy to debug). <b>[class.cdtor]/3</b> explicitly addresses this precise situation, and has an example that closely resembles yours and declares it valid."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469250095, "post_id": 38537319, "comment_id": 64469754, "body": "As clear as can be: &quot;<b>[class.base.init]/15</b> [<i>Note</i>: Because the <i>mem-initializer</i> are evaluated in the scope of the constructor, the <code>this</code> pointer can be used in the <i>expression-list</i> of a <i>mem-initializer</i> to refer to the object being initialized. \u2014 <i>end note</i>]&quot; Now, it&#39;s a non-normative note, but it&#39;s clearly the intent of the standard to allow such usage."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469253468, "post_id": 38537319, "comment_id": 64470300, "body": "@IgorTandetnik If it&#39;s a bug, at least I have a nicer and simpler code snippet than the very complicated hierarchy in the question. ;)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469255382, "post_id": 38537319, "comment_id": 64470662, "body": "I changed the answer to indicate: It may be a compiler bug."}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "edited": false, "score": 0, "creation_date": 1469374143, "post_id": 38537319, "comment_id": 64498146, "body": "You&#39;re missing a key point: it&#39;s a virtual base class. This is ridiculously important."}], "tags": [], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1469255329, "last_edit_date": 1469255329, "creation_date": 1469237686, "answer_id": 38537319, "question_id": 38487640, "link": "https://stackoverflow.com/questions/38487640/c-virtual-inheritance-static-cast-this-to-virtual-parent-in-initializer-lis/38537319#38537319", "title": "C++ Virtual Inheritance: static_cast &quot;this&quot; to virtual parent in initializer list of derived", "body": "<p><em>It may be a compiler bug</em>.</p>\n\n<p>I reduced and simplified the code example:</p>\n\n<pre><code>struct ctor_takes_int\n{\n    // dummy parameter needed to put expression in a ctor-init-list of derived class\n    ctor_takes_int (int=0){ }\n} ;\n\nstruct stupid_base\n{\n    //int nevermind;\n} ;\n\nstruct upcast_in_init_list;\n\n/* \n * volatile = anti optimisation :\n * no value propagation possible on volatile variables\n * no constant propagation\n * no inlining of volatile pointer to function!\n */\nint (*volatile upcast) (struct upcast_in_init_list *that);\n\nstruct upcast_in_init_list\n: virtual stupid_base, ctor_takes_int\n{\n    upcast_in_init_list ()\n    :    ctor_takes_int (upcast(this))\n    { }\n} ;\n\n/*\n * volatile = anti optimisation\n * no dead assignment removal\n */\nstupid_base *volatile p;\n\n// must be compiled out of line\nint do_upcast (upcast_in_init_list *that) {\n    p = that;\n    return 0;\n}\n\nint main ()\n{\n    upcast = &amp;do_upcast;\n    new upcast_in_init_list() ; \n    return 0 ;\n}\n</code></pre>\n\n<p>The program crashes on <a href=\"http://www.tutorialspoint.com/compile_cpp11_online.php\" rel=\"nofollow\">http://www.tutorialspoint.com/compile_cpp11_online.php</a></p>\n\n<p>(Note the use of <code>volatile</code> to prevent some optimisations, but it doesn't seem needed in practice. It's just more \"robust\", to have a \"robust crash\".)</p>\n\n<p>If instead of calling a function, I do the up cast inside the ctor-init-list, with <code>((p = this,0))</code>, the program works. This means that the compilers knows how to perform the pointer conversion on <code>this</code> inside the ctor-init-list of the object being constructor, but the common conversion code doesn't know how perform the conversion, as the derived object doesn't exist at that point (you can't use <code>typeid</code> on it for example).</p>\n\n<p>When you think about it in term of implementation, it's understandable: for non virtual base classes, the derived to base pointer conversion is a simple \"if non null add a fixed offset\" adjustment, but it involves something more complicated for virtual base classes, as they don't reside at a fixed offset, by definition (making a base class virtual is much like adding a level of indirection).</p>\n\n<p>The essence of virtual items (virtual functions, virtual base classes) is a dependency on the dynamic (real) type of the object. Note that a class without virtual functions but with a virtual base class isn't \"polymorphic\" in C++ and doesn't support RTTI (<code>dynamic_cast</code> and <code>typeid</code>), but must still have some \"virtual\" runtime information, either vptr (vtable pointer), or some virtual base offset or pointer. In either case, the runtime information is initialized during construction.</p>\n\n<p><strong>When the body of a constructor is entered (immediately after <code>{</code>), the object being constructed doesn't officially \"exists\"</strong> as its lifetime has not started: if the constructor body exits with an exception, the corresponding destructor will not be invoked. But the un-started lifetime still has all the attribute of a \"virtual\" object (= an object with virtual features, either functions or base classes). Virtual functions can be called virtually and the overrider in the current class will be invoked, <code>typeid</code> will indicate the type of the object in construction, etc.</p>\n\n<p>In practice, conversions to non virtual base classes always work, in all compilers, as no \"virtual\"/dynamic information is used, just like calling non virtual functions \"works\" (in practice) on un-constructed objects, even if it isn't legal.</p>\n\n<p>Also, conversion of the expression (not value) <code>this</code> in the initialization list works, as it is a special optimized case: the compiler knows the layout of the class and the (static) offset of all virtual in the complete constructor (the constructor used to construct complete objects, not base class subobjects). You can see that <code>this</code> is special cased: using <code>(that = this, p = that, 0)</code> (where <code>that</code> is some <code>upcast_in_init_list *</code> variable) in a ctor-init-list of a complete constructor doesn't work, as the special isn't recognized anymore.</p>\n\n<p>Handling of <code>this</code> is a base class constructor call (a constructor call that doesn't get to initialize virtual base classes) apparently works too, I don't know why.</p>\n"}], "owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 3, "answer_count": 2, "score": 3, "last_activity_date": 1469374018, "creation_date": 1469037558, "last_edit_date": 1469374018, "question_id": 38487640, "link": "https://stackoverflow.com/questions/38487640/c-virtual-inheritance-static-cast-this-to-virtual-parent-in-initializer-lis", "title": "C++ Virtual Inheritance: static_cast &quot;this&quot; to virtual parent in initializer list of derived", "body": "<p>I have some code. It doesn't work.</p>\n\n<p>At first, you will look at this sample code snippet and think \"WHY?\" but trust me: there is a reason.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>class LinkedListNode\n// blaa\n{\npublic:\n    LinkedListNode ( void* p )\n    {\n        // blaa\n    }\n} ;\n\ntemplate &lt;typename T&gt;\nclass InheritAndLinkList\n:   public virtual T\n,   public LinkedListNode\n{\npublic:\n    InheritAndLinkList ()\n    :    LinkedListNode ( static_cast&lt;void*&gt;(static_cast&lt;T*&gt;(this)) ) // an exception occurs here when ..... (scroll down)\n    { }\n} ;\n\ntemplate &lt;typename T&gt;\nclass Implements\n:   public virtual InheritAndLinkList&lt;T&gt;\n{ } ;\n\n\nclass    A\n{\npublic:\n    virtual void goA () =0 ;\n} ;\n\nclass    B\n:   public Implements&lt;A&gt;\n{\npublic:\n    virtual void goB () =0 ;\n} ;\n\n\nclass    MyClass\n:   public Implements&lt;B&gt;\n{\npublic:\n    virtual void goA ()\n    {\n        // blaa\n    }\n    virtual void goB ()\n    {\n        // blaa\n    }\n} ;\n\n\nint main ( ... )\n{\n    MyClass * p = new MyClass () ; // ..... This line executes\n\n    p-&gt;goA() ;\n    p-&gt;goB() ;\n\n    return 0 ;\n}\n</code></pre>\n\n<p>The specific error is that, upon construction, the expression <code>static_cast&lt;T*&gt;(this)</code> causes a segmentation fault....... when using the Intel C++ compiler. This has been working for years on many version of GCC, LLVM, MS Visual Studio, etc. And now ICPC makes it die.</p>\n\n<p>I believe this is a perfectly valid thing to do. By the time this line gets called, <code>T</code> has been constructed and should be valid to use... unless there is another weird thing in the C++ spec about that.</p>\n\n<p>Putting the <code>static_cast</code> in the constructor body (and changing its super to match) causes it to avoid this seg-fault.</p>\n\n<p>So my question: <strong>where in the spec does it say this <em>[static cast]</em> is/isn't safe?</strong></p>\n"}, {"tags": ["java", "c++", "opengl", "graphics", "jogl"], "comments": [{"owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "edited": false, "score": 0, "creation_date": 1469084470, "post_id": 38487617, "comment_id": 64394199, "body": "This question seems to be a duplicate of <a href=\"http://gamedev.stackexchange.com/questions/125876/opengl-properly-attach-texture\" title=\"opengl properly attach texture\">gamedev.stackexchange.com/questions/125876/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "is_accepted": false, "score": 0, "last_activity_date": 1469084419, "creation_date": 1469084419, "answer_id": 38497122, "question_id": 38487617, "link": "https://stackoverflow.com/questions/38487617/opengl-properly-attach-texture/38497122#38497122", "title": "OpenGL properly attach Texture", "body": "<p>Maybe there's more problems, but at least this looks incorrect:</p>\n\n<pre><code>gl.glTexCoord2f(2f, 1.0f);\n</code></pre>\n\n<p>Your texture is repeated horizontally 2 times because its wrap mode is <strong>repeat</strong> and the coordinates you set are over <code>1</code> (in this case <code>2f</code>). To fix this, replace <code>2f</code> with <code>1f</code>:</p>\n\n<pre><code>gl.glTexCoord2f(1f, 1.0f);\n</code></pre>\n"}], "owner": {"reputation": 10110, "user_id": 1334761, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e98df35e5a847e4adee98cb544e5bf6e?s=128&d=identicon&r=PG", "display_name": "Jjang", "link": "https://stackoverflow.com/users/1334761/jjang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469084419, "creation_date": 1469037498, "last_edit_date": 1469039745, "question_id": 38487617, "link": "https://stackoverflow.com/questions/38487617/opengl-properly-attach-texture", "title": "OpenGL properly attach Texture", "body": "<h2>Problem:</h2>\n\n<p>Been trying for hours to set a simple png of a cross hair as a texture (so I could later stick in the middle of the view like a normal cross hair), without luck.</p>\n\n<p>I'm coding in Java with JOGL.</p>\n\n<p>P.S Also need to make the background of the texture transparent. But that's another problem.</p>\n\n<h2>Code:</h2>\n\n<pre><code>public void display(GLAutoDrawable gLDrawable) {\n    final GL2 gl = gLDrawable.getGL().getGL2();\n    gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);\n    gl.glLoadIdentity();  // Reset The View\n    gl.glTranslatef(0.0f, 0.0f, -5.0f);\n\n    gl.glTexParameteri ( GL2.GL_TEXTURE_2D,GL2.GL_TEXTURE_WRAP_T, GL2.GL_REPEAT );\n    gl.glTexParameteri( GL2.GL_TEXTURE_2D,GL2.GL_TEXTURE_WRAP_S, GL2.GL_REPEAT );\n    texture.bind(gl);\n\n    gl.glBegin(GL2.GL_QUADS);\n    // Front Face\n    gl.glTexCoord2f(0.0f, 0.0f);\n    gl.glVertex3f(-1.0f, -1.0f, 1.0f);\n    gl.glTexCoord2f(2f, 0.0f);\n    gl.glVertex3f(1.0f, -1.0f, 1.0f);\n    gl.glTexCoord2f(2f, 1.0f);\n    gl.glVertex3f(1.0f, 1.0f, 1.0f);\n    gl.glTexCoord2f(0.0f, 1.0f);\n    gl.glVertex3f(-1.0f, 1.0f, 1.0f);\n    gl.glEnd();\n}\n\npublic void init(GLAutoDrawable drawable) {\n    final GL2 gl = drawable.getGL().getGL2();\n    gl.glShadeModel(GL2.GL_SMOOTH);              // Enable Smooth Shading\n    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);    // Black Background\n    gl.glClearDepth(1.0f);                      // Depth Buffer Setup\n    gl.glEnable(GL2.GL_DEPTH_TEST);              // Enables Depth Testing\n    gl.glDepthFunc(GL2.GL_LEQUAL);               // The Type Of Depth Testing To Do\n    // Really Nice Perspective Calculations\n    gl.glHint(GL2.GL_PERSPECTIVE_CORRECTION_HINT, GL2.GL_NICEST);\n    gl.glEnable(GL2.GL_TEXTURE_2D);\n    try {\n        String filename = \"resources/misc/crosshair.png\";\n        texture=TextureIO.newTexture(new File( filename ),true);\n    } catch (IOException e) {\n        e.printStackTrace();\n        throw new RuntimeException(e);\n    }\n    gl.glTexParameteri(GL2.GL_TEXTURE_2D, GL2.GL_TEXTURE_MIN_FILTER, GL2.GL_LINEAR);\n    gl.glTexParameteri(GL2.GL_TEXTURE_2D, GL2.GL_TEXTURE_MAG_FILTER, GL2.GL_LINEAR);\n}\n</code></pre>\n\n<h2>Result:</h2>\n\n<p><a href=\"https://i.stack.imgur.com/eDhTYm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eDhTYm.jpg\" alt=\"demonstration\"></a></p>\n\n<h2>Original png:</h2>\n\n<p><a href=\"https://i.stack.imgur.com/6Ul2E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6Ul2E.png\" alt=\"demonstration\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1469038789, "post_id": 38487616, "comment_id": 64377809, "body": "I would think that if you used compile time constants as shown in the question, you&#39;d get a compile time warning."}, {"owner": {"reputation": 43, "user_id": 6086852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VorfQ.jpg?s=128&g=1", "display_name": "Neo Derek", "link": "https://stackoverflow.com/users/6086852/neo-derek"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1469069848, "post_id": 38487616, "comment_id": 64388988, "body": "Yes, the compiler did give me a warning, but I didn&#39;t mention it. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6086852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VorfQ.jpg?s=128&g=1", "display_name": "Neo Derek", "link": "https://stackoverflow.com/users/6086852/neo-derek"}, "edited": false, "score": 0, "creation_date": 1469070062, "post_id": 38487683, "comment_id": 64389039, "body": "Thank you very much for answering my question! Anyway, I can solve the current question now. But I still want to know why a compiler cannot just detect the size of a variable(or the value of an expression) and allocate enough space to store it?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469070601, "post_id": 38487683, "comment_id": 64389166, "body": "<i>&quot;... and allocate enough space to store it?&quot;</i> The primitive types and their actual sizes introduced by implementation and CPU target are fixed already, there&#39;s not much room for a compiler to apply automatic allocation."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1469071136, "post_id": 38487683, "comment_id": 64389294, "body": "Your <code>trunc</code> is in the wrong place, it needs to surround the divide itself. In this case it doesn&#39;t matter, because <code>30000 * x</code> will always divide evenly by 2, but in other contexts it could make a world of difference."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 4, "last_activity_date": 1469039430, "last_edit_date": 1469039430, "creation_date": 1469037692, "answer_id": 38487683, "question_id": 38487616, "link": "https://stackoverflow.com/questions/38487616/c-overflow-while-calculating-an-arithmetic-expression/38487683#38487683", "title": "c++ overflow while calculating an arithmetic expression", "body": "<p>When you compile your example code, the compiler usually throws a warning identifying exactly the part of your expression that overflows</p>\n\n<pre><code>main.cpp:4:24: warning: integer overflow in expression [-Woverflow]\n     std::cout &lt;&lt; 30000 * (5 * 30000 - 22207) / 2 + 50488389 &lt;&lt; std::endl;\n                  ~~~~~~^~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4629351ce1017f34\" rel=\"nofollow\"><kbd>Live Demo</kbd></a></p>\n\n<hr>\n\n<p>To overcome this, use all floating point constants to do this calculation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nint main(int argc, char* argv[]) {\n    std::cout &lt;&lt; std::trunc(30000.0 * (5.0 * 30000.0 - 22207.0) / 2.0 + 50488389.0) &lt;&lt; std::endl;\n                              // ^^     ^^        ^^        ^^     ^^           ^^\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/09cf372b57095bc6\" rel=\"nofollow\"><kbd>Live Demo</kbd></a></p>\n\n<hr>\n\n<blockquote>\n  <p>How can I judge whether an arithmetic expression will overflow?</p>\n</blockquote>\n\n<p>You can check the <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits\" rel=\"nofollow\"><code>std::numeric_limits</code></a> to see what are the maximum values, that are available with your compiler implementation and target CPU.</p>\n\n<hr>\n\n<p>If you need the exact output as it was mentioned in your question, you can use I/O manipulators to bang the output in shape:</p>\n\n<pre><code>std::cout  &lt;&lt; std::fixed &lt;&lt; std::setprecision(0) \n        // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n           &lt;&lt; std::trunc(30000.0 * (5.0 * 30000.0 - 22207.0) / 2.0 + 50488389.0) &lt;&lt; std::endl;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/792c14ae7ca6100c\" rel=\"nofollow\"><kbd>Live Demo</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1469039005, "post_id": 38487895, "comment_id": 64377931, "body": "A <code>double</code> (IEEE) can hold any integer of 53 bits or less without rounding."}, {"owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1469039198, "post_id": 38487895, "comment_id": 64378039, "body": "I didn&#39;t know that exact number, 53.  Thanks"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1469040952, "post_id": 38487895, "comment_id": 64379038, "body": "It comes from the way floating point numbers are stored. <a href=\"https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_numbers\" rel=\"nofollow noreferrer\">IEEE 754-1985</a> contains 52 bits of fraction in a double, and there&#39;s an implied 1-bit on the left side that doesn&#39;t need to be stored, for a total of 53."}], "tags": [], "owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "is_accepted": false, "score": 0, "last_activity_date": 1469038345, "creation_date": 1469038345, "answer_id": 38487895, "question_id": 38487616, "link": "https://stackoverflow.com/questions/38487616/c-overflow-while-calculating-an-arithmetic-expression/38487895#38487895", "title": "c++ overflow while calculating an arithmetic expression", "body": "<p>To directly answer the question, overflow is controlled by size of the type.  The common C++ types are int (32-bit), long (64-bit), float(32-bit) and double (64-bit).  Depending on the platform the size of the types may vary so caution must be observed when dealing with large numbers.  An int type of 64-bit is common these days for example but may be 16-bit on some old embedded platforms. </p>\n\n<p>In your case, an intermediate value exceeded the sizeof(int) which appears to be 32 bit.  The result will be rubbish.   You can use floating point as the other suggested, that can lead to round of error in certain cases however.  </p>\n\n<p>If you stick with integer literals, can you can assign the type with a trailing letter. There are a lot of details here:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/integer_literal\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/integer_literal</a></p>\n\n<p>I prefer to use variable of the explicit size that I'm interested in int32_t or int64_t for example. </p>\n\n<p>Hope that help,</p>\n\n<p>--Matt</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1469039012, "post_id": 38487987, "comment_id": 64377937, "body": "What the limits actually are varies with compiler implementations and target CPUs."}], "tags": [], "owner": {"reputation": 26, "user_id": 6019834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cd0f34985d0f2380a41701565436e4?s=128&d=identicon&r=PG&f=1", "display_name": "surru", "link": "https://stackoverflow.com/users/6019834/surru"}, "is_accepted": false, "score": 0, "last_activity_date": 1469038662, "creation_date": 1469038662, "answer_id": 38487987, "question_id": 38487616, "link": "https://stackoverflow.com/questions/38487616/c-overflow-while-calculating-an-arithmetic-expression/38487987#38487987", "title": "c++ overflow while calculating an arithmetic expression", "body": "<p>It has overflowed because <strong>30000 * (5 * 30000 - 22207)</strong> evaluates to 3833790000 which is greater than the largest integer an int can hold. Constants in an arithmetic expression are treated as int type and an arithmetic operation on two int types will result in int type only, so overflow occurred.</p>\n\n<p>You can check whether an arithmetic expression containing constants will overflow by compiling the above code with g++ in unix/linux. It will throw a warning when compiling like this - </p>\n\n<p><strong>warning: integer overflow in expression [-Woverflow]</strong></p>\n\n<p>To get the desired answer you can just convert the type of any constant in <strong>30000 * (5 * 30000 - 22207)</strong> to type long like <strong>long(30000) * (5 * 30000 - 22207)</strong></p>\n"}, {"tags": [], "owner": {"reputation": 819, "user_id": 1393899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3288575e7215c9075292e937a3e244?s=128&d=identicon&r=PG", "display_name": "Xaver", "link": "https://stackoverflow.com/users/1393899/xaver"}, "is_accepted": false, "score": 0, "last_activity_date": 1469038898, "creation_date": 1469038898, "answer_id": 38488049, "question_id": 38487616, "link": "https://stackoverflow.com/questions/38487616/c-overflow-while-calculating-an-arithmetic-expression/38488049#38488049", "title": "c++ overflow while calculating an arithmetic expression", "body": "<p>The reason for the overflow is the following: </p>\n\n<pre><code>30000 * (5 * 30000 - 22207) / 2 + 50488389\n</code></pre>\n\n<p>is calculated from left to right. The result of calculating</p>\n\n<pre><code>30000 * (5 * 30000 - 22207)\n</code></pre>\n\n<p>is</p>\n\n<pre><code>3833790000\n</code></pre>\n\n<p>which is equivalent to</p>\n\n<pre><code>-461177296\n</code></pre>\n\n<p>modulo 2^32. Here the overflow occurs, because you use a 32-bit signed integer datatype.</p>\n\n<p>Calculating</p>\n\n<pre><code>-461177296 / 2 + 50488389\n</code></pre>\n\n<p>then gives you</p>\n\n<pre><code>-180100259\n</code></pre>\n\n<p>To my knowledge, you cannot directly detect if an overflow had occurred. A possible way is to insert some assembly code into your C++ code and check the overflow flag. (But you have to have a good understanding of compilers and your system in order to get it working correctly.)</p>\n"}], "owner": {"reputation": 43, "user_id": 6086852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VorfQ.jpg?s=128&g=1", "display_name": "Neo Derek", "link": "https://stackoverflow.com/users/6086852/neo-derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 38487683, "answer_count": 4, "score": 3, "last_activity_date": 1469070122, "creation_date": 1469037494, "last_edit_date": 1469070122, "question_id": 38487616, "link": "https://stackoverflow.com/questions/38487616/c-overflow-while-calculating-an-arithmetic-expression", "title": "c++ overflow while calculating an arithmetic expression", "body": "<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char* argv[]) {\n    std::cout &lt;&lt; 30000 * (5 * 30000 - 22207) / 2 + 50488389 &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The right answer I want is 1967383389, but this program outputted -180100259 after running on my computer. It seemed it had overflowed. But why? How can I judge whether an <strong><em>arithmetic expression</em></strong> will overflow?</p>\n"}, {"tags": ["c++", "visual-studio", "winapi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1469037769, "post_id": 38487571, "comment_id": 64377172, "body": "This isn&#39;t advanced. You declared a function and never defined it. This is explained in the Q&amp;A you linked to. COM supports late-binding. COM does not, however, support guess-based binding. Your pseudo-COM declaration is bogus. You need to read <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms694363.aspx\" rel=\"nofollow noreferrer\">The Component Object Model</a>. All of it. And never, <b>never ever</b> again must you convert an MBCS string to a wide character string by simply widening that character data type, completely ignoring character encoding."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1469037776, "post_id": 38487571, "comment_id": 64377179, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 495, "user_id": 5954280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9cde8c47b90fa328f21aae546cad3d?s=128&d=identicon&r=PG&f=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/5954280/koga"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469037938, "post_id": 38487571, "comment_id": 64377277, "body": "@IInspectable, thank you for the resource! I&#39;ll have a read through it and see if that helps. Thanks!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469038488, "post_id": 38487571, "comment_id": 64377631, "body": "And by the way, the path separator on Windows is &quot;\\&quot;. &quot;//&quot; is meaningless, too."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469039343, "post_id": 38487571, "comment_id": 64378133, "body": "All your path separators are wrong."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1469042795, "post_id": 38487571, "comment_id": 64380075, "body": "Bizarre that you declare the function and hope that somebody else might implement it for you"}], "answers": [{"comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469039417, "post_id": 38488156, "comment_id": 64378168, "body": "Don&#39;t forget to explain he needs to call <code>CoInitializeEx</code> as well otherwise it will just lead to another question."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1469039577, "post_id": 38488156, "comment_id": 64378242, "body": "of course need CoInitializeEx and CoUninitialize() but i not write full code, but just chunk :)"}, {"owner": {"reputation": 495, "user_id": 5954280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9cde8c47b90fa328f21aae546cad3d?s=128&d=identicon&r=PG&f=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/5954280/koga"}, "edited": false, "score": 0, "creation_date": 1469105600, "post_id": 38488156, "comment_id": 64408047, "body": "Thanks @RbMm, this really helped a lot!"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 3, "last_activity_date": 1469042001, "last_edit_date": 1469042001, "creation_date": 1469039244, "answer_id": 38488156, "question_id": 38487571, "link": "https://stackoverflow.com/questions/38487571/unable-to-call-setwallpaper-due-to-error-lnk2019/38488156#38488156", "title": "Unable to call `SetWallpaper()` due to error LNK2019", "body": "<p><code>SetWallpaper()</code> is not a standalone function exported by the Win32 API.  It is a method of the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh706946.aspx\" rel=\"nofollow\">IDesktopWallpaper</a> interface (see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh706962.aspx\" rel=\"nofollow\">here</a>).</p>\n\n<p>So you need to use code that is more like this instead:</p>\n\n<pre><code>#include \"headers.h\"\n\nint main()\n{\n    std::wstring x = L\"C:\\\\Users\\\\student\\\\Desktop\\\\i-should-buy-a-boat.jpg\";\n\n    CoInitialize(NULL);\n\n    IDesktopWallpaper *p;\n    if (SUCCEEDED(CoCreateInstance(__uuidof(DesktopWallpaper), 0, CLSCTX_LOCAL_SERVER, __uuidof(IDesktopWallpaper), (void**)&amp;p)))\n    {\n        p-&gt;SetWallpaper(NULL, x.c_str());\n        p-&gt;Release();\n    }\n\n    CoUninitialize();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 5954280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9cde8c47b90fa328f21aae546cad3d?s=128&d=identicon&r=PG&f=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/5954280/koga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 38488156, "answer_count": 1, "score": -2, "last_activity_date": 1469042001, "creation_date": 1469037338, "last_edit_date": 1495535328, "question_id": 38487571, "link": "https://stackoverflow.com/questions/38487571/unable-to-call-setwallpaper-due-to-error-lnk2019", "title": "Unable to call `SetWallpaper()` due to error LNK2019", "body": "<h2>Intro</h2>\n\n<p>First of all, I would like to say that I have read through the previous answers for this type of question, including <a href=\"https://stackoverflow.com/a/12573818/65863\">this excellently written one</a>. </p>\n\n<p>However, I do not understand enough about C++ to be able to use the more \"advanced\" fixes.</p>\n\n<p>I have ensured that the right type of console has been selected (<code>Console (/SUBSYSTEM:CONSOLE)</code> for those interested), and have the required imports with the possible exception of an IDL mentioned somewhere (that falls into the lack of understanding category).</p>\n\n<p>If this is a duplicate, I would be more than happy to use the post I duplicated, but I have not been able to find anything that can help someone of my skill level.</p>\n\n<h2>Technical Information</h2>\n\n<p>IDE: Visual Studio</p>\n\n<p>Platform: Windows</p>\n\n<h2>Code</h2>\n\n<p>headers.h</p>\n\n<pre><code>#pragma once\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;windows.h&gt;\n#include &lt;Shobjidl.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;tchar.h&gt;\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"headers.h\"\nusing namespace std;\n\nint main() {\n    string x = \"C://Users/student/Desktop/i-should-buy-a-boat.jpg\";\n    x.c_str();\n\n    wstring tempx = std::wstring(x.begin(), x.end());\n    LPCWSTR sw = tempx.c_str();\n    HRESULT SetWallpaper(\n        LPCWSTR monitorID,\n        LPCWSTR wallpaper\n        );\n    SetWallpaper(NULL, sw);\n}\n</code></pre>\n"}, {"tags": ["c++", "vim", "youcompleteme"], "answers": [{"tags": [], "owner": {"reputation": 1220, "user_id": 1316465, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f211ce1ca0a29ab1007bc2a5fc73e175?s=128&d=identicon&r=PG", "display_name": "thed0ctor", "link": "https://stackoverflow.com/users/1316465/thed0ctor"}, "is_accepted": false, "score": 1, "last_activity_date": 1469136459, "creation_date": 1469136459, "answer_id": 38514658, "question_id": 38487429, "link": "https://stackoverflow.com/questions/38487429/how-to-get-youcompleteme-to-automatically-invoke-autocomplete/38514658#38514658", "title": "How to get YouCompleteMe to automatically invoke autocomplete", "body": "<p>The issue seemed to be caused by a <a href=\"https://github.com/oblitum/YouCompleteMe/\" rel=\"nofollow\">forked version of YCM</a>. Using the <a href=\"https://github.com/Valloric/YouCompleteMe\" rel=\"nofollow\">actual version by Valloric</a> resolved the problem</p>\n"}], "owner": {"reputation": 1220, "user_id": 1316465, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f211ce1ca0a29ab1007bc2a5fc73e175?s=128&d=identicon&r=PG", "display_name": "thed0ctor", "link": "https://stackoverflow.com/users/1316465/thed0ctor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469136459, "creation_date": 1469036980, "question_id": 38487429, "link": "https://stackoverflow.com/questions/38487429/how-to-get-youcompleteme-to-automatically-invoke-autocomplete", "title": "How to get YouCompleteMe to automatically invoke autocomplete", "body": "<p>I'm running YouCompleteMe on a remote development server with Vim. I'm using the same vimrc as the one on my local system and for whatever reason autocomplete isn't... well.. auto. I can invoke suggestions by adding <code>let g:ycm_key_invoke_completion = '&lt;C-b&gt;'</code> to my vimrc. Now if I hit this button in the middle of a symbol it will drop down suggestions but this happens automatically without my intervention on my local system.</p>\n\n<p>I am writing in c++, using CentOS release 6.6, using Vim 7.4 and have no errors when running <code>:YcmDiags</code> or <code>:messages</code></p>\n"}, {"tags": ["c++", "save", "eigen", "diagonal"], "comments": [{"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469036456, "post_id": 38487220, "comment_id": 64376321, "body": "try 3.2.9 or 3.3-beta1 then"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4085386"}, "reply_to_user": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469036569, "post_id": 38487220, "comment_id": 64376406, "body": "@kangshiyin: Are you sure it is there in 3.2.9+?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4085386"}, "reply_to_user": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469037076, "post_id": 38487220, "comment_id": 64376724, "body": "Nope! At least in <code>Eigen 3.2.9</code> also, <code>.nonZeros()</code> is not defined for <code>DiagonalMatrix</code> in <code>DiagonalMatrix.h</code> and still <code>MarketIO.h</code> uses <code>.nonZeros()</code>."}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469037157, "post_id": 38487220, "comment_id": 64376762, "body": "ok so it seems the unsupported part is too old..."}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469037277, "post_id": 38487220, "comment_id": 64376853, "body": "it is just 3 arrays. you can save them manually."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4085386"}, "reply_to_user": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469037646, "post_id": 38487220, "comment_id": 64377088, "body": "@kangshiyin: Yeah! That seems the only way for now."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4085386"}, "is_accepted": true, "score": 0, "last_activity_date": 1469037957, "creation_date": 1469037957, "answer_id": 38487757, "question_id": 38487220, "link": "https://stackoverflow.com/questions/38487220/how-to-save-eigendiagonalmatrix-in-marketio-format-in-eigen/38487757#38487757", "title": "How to save Eigen::DiagonalMatrix in MarketIO format in Eigen?", "body": "<p>Okay! The only solution for now with minimal effort is to use the following:</p>\n\n<pre><code>saveMarketVector(W.diagonal(), \"W.txt\");\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4085386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 38487757, "answer_count": 1, "score": 0, "last_activity_date": 1469037957, "creation_date": 1469036250, "question_id": 38487220, "link": "https://stackoverflow.com/questions/38487220/how-to-save-eigendiagonalmatrix-in-marketio-format-in-eigen", "title": "How to save Eigen::DiagonalMatrix in MarketIO format in Eigen?", "body": "<p>Using <code>Eigen 3.2.1</code>, I am trying to save an <code>Eigen::DiagonalMatrix</code> in <code>MarketIO</code> format as below:</p>\n\n<pre><code>#include &lt;Eigen/Sparse&gt;\n#include &lt;Unsupported/Eigen/SparseExtra&gt;\nusing namespace Eigen;\n...\n\nsize_t n = XX;\nDiagonalMatrix&lt;num_t, Dynamic&gt; W(n);\n...\nsaveMarket(W, \"W.txt\"); // error propagates from here\n</code></pre>\n\n<p>However, I am getting the following error:</p>\n\n<pre><code>MarketIO.h|236|error: 'const class Eigen::DiagonalMatrix&lt;double, -1&gt;' has no\nmember named 'nonZeros'\n</code></pre>\n\n<p>What is the problem here? Is this implemented at all for <code>Diagonal Matrices</code>? </p>\n\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1469034974, "post_id": 38486775, "comment_id": 64375506, "body": "Wow - I wanted to accept your answer even before you gave me the extra edited answer. You read my mind on what I wanted to do. Thank you very much! (I was trying to do the second approach but decided hesitantly that I&#39;d just settle for the first) Could you explain what the <code>&lt;typename...&gt;</code> does?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1469035284, "post_id": 38486775, "comment_id": 64375673, "body": "@OneRaynyDay The general approach here is called a <i>template template argument</i> - we&#39;re providing a template as an argument to a template. The notation <code>template &lt;typename...&gt; class T&gt;</code> means &quot;the argument is a template class named <code>T</code>, and we don&#39;t care how many arguments that template class requires.&quot;"}, {"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1469035368, "post_id": 38486775, "comment_id": 64375726, "body": "Ah, thank you! And thanks especially for telling me the name of the technique - I find that I get stuck with templates mainly because I don&#39;t know what to google. I really appreciate it."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 5, "last_activity_date": 1469036076, "last_edit_date": 1469036076, "creation_date": 1469034724, "answer_id": 38486775, "question_id": 38486722, "link": "https://stackoverflow.com/questions/38486722/template-of-a-class-that-contains-a-constant-type-template/38486775#38486775", "title": "Template of a class that contains a constant-type template?", "body": "<p>If you know for a fact that <code>T</code> is a template container storing some type <code>C</code>, then you don't need to specify <code>C</code> anywhere and can just templatize over <code>T</code>:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass A {\n    class B {\n       /* Use the type name T however you'd like. */\n    };\n};\n</code></pre>\n\n<p>This works because <code>T</code> has to be the name of a complete type, so if you do something like</p>\n\n<pre><code>A&lt;std::vector&lt;int&gt;&gt;\n</code></pre>\n\n<p>then <code>T</code> is <code>std::vector&lt;int&gt;</code> and any time you use <code>T</code> it will specifically be a <code>std::vector</code> of <code>int</code>s and not of any other type.</p>\n\n<p>On the other hand, if you want the client to provide the name of a template class and then forcibly instantiate it with your choice of <code>C</code>, you can use <em>template template arguments</em>, like this:</p>\n\n<pre><code>template &lt;template &lt;typename...&gt; class T&gt;\nclass A {\n    class B {\n        typedef std::unique_ptr&lt;T&lt;C&gt;&gt; containerPtr;\n        /* ... use containerPtr ... */\n    };\n};\n</code></pre>\n\n<p>This asks the user to give you a template type, so you'd write something like</p>\n\n<pre><code>A&lt;std::vector&gt; myObject;\n</code></pre>\n\n<p>and your <code>A</code> template will then instantiate <code>std::vector</code> using the type <code>C</code>.</p>\n"}], "owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 38486775, "answer_count": 1, "score": 3, "last_activity_date": 1469036076, "creation_date": 1469034548, "last_edit_date": 1592644375, "question_id": 38486722, "link": "https://stackoverflow.com/questions/38486722/template-of-a-class-that-contains-a-constant-type-template", "title": "Template of a class that contains a constant-type template?", "body": "<h1>Situation</h1>\n<p>I'm trying to implement a container that holds a specific data type - let's call it C. The container(let's call it B) is an inner class of A. I'm trying to declare the template but am running into compiler issues and am not sure what I should do.</p>\n<h1>Attempts</h1>\n<pre><code>template &lt;typename T&lt;C&gt;&gt;\nclass A\n{\n    class B\n    {\n    typedef std::unique_ptr&lt;T&gt; containerPtr;\n    private:\n        containerPtr container;\n    }\n}\n\ntypedef std::shared_ptr&lt;A&lt;std::vector&lt;C&gt;&gt;&gt; somePtr; // Error!\n</code></pre>\n<p>The error is:</p>\n<blockquote>\n<p>struct C</p>\n<p>type name is not allowed</p>\n</blockquote>\n<hr />\n<pre><code>template &lt;typename T,U&gt;\nclass A\n{\n    class B\n    {\n    typedef std::unique_ptr&lt;T&lt;U&gt;&gt; containerPtr;\n    private:\n        containerPtr container; // But does it contain C or some other type now? \n        // We have to do a check - what's the best approach?\n    }\n}\n\ntypedef std::shared_ptr&lt;A&lt;std::vector&lt;C&gt;&gt;&gt; somePtr; \n</code></pre>\n<hr />\n<p>What is the best approach in this situation?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469033949, "post_id": 38486509, "comment_id": 64374903, "body": "If it&#39;s a <code>void</code> function, how does it generate strings?"}, {"owner": {"reputation": 11, "user_id": 6575314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353ef5821807994a3a8cc58c88a6cea?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Weiler", "link": "https://stackoverflow.com/users/6575314/bill-weiler"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1469034066, "post_id": 38486509, "comment_id": 64374988, "body": "It uses cout. This is a function given by another person I am working with, so I am not able to change it from a void function"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 2, "creation_date": 1469034185, "post_id": 38486509, "comment_id": 64375064, "body": "Then you can&#39;t use it to initialize a list of strings."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1469034186, "post_id": 38486509, "comment_id": 64375065, "body": "<code>cout</code> prints on the console. You will have to make the function return the string somehow (or use some stream trickery to catch whatever the function puts into <code>cout</code>)"}, {"owner": {"reputation": 11, "user_id": 6575314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353ef5821807994a3a8cc58c88a6cea?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Weiler", "link": "https://stackoverflow.com/users/6575314/bill-weiler"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469034323, "post_id": 38486509, "comment_id": 64375149, "body": "@tobi303 What &quot;stream trickery&quot; options are there? Like I said I am not able to modify the void function so any changes would have to be outside of the function itself."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1469034474, "post_id": 38486509, "comment_id": 64375236, "body": "Why are you obligating yourself into using someone else&#39;s poorly designed function? Why don&#39;t you instead design a good function?"}, {"owner": {"reputation": 11, "user_id": 6575314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353ef5821807994a3a8cc58c88a6cea?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Weiler", "link": "https://stackoverflow.com/users/6575314/bill-weiler"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1469034532, "post_id": 38486509, "comment_id": 64375260, "body": "@BenjaminLindley I wish I could but convention disallows me. Unfortunately, I have to work with the function given, for better or worse."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469034810, "post_id": 38486509, "comment_id": 64375417, "body": "actually I dont know how to do it, but as anything is possible, I would expect that also this is doable somehow."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469034905, "post_id": 38486509, "comment_id": 64375475, "body": "this might help : <a href=\"http://stackoverflow.com/questions/10150468/how-to-redirect-cin-and-cout-to-files\" title=\"how to redirect cin and cout to files\">stackoverflow.com/questions/10150468/&hellip;</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1469035398, "post_id": 38486509, "comment_id": 64375742, "body": "<i>I wish I could but convention disallows me</i>  -- You&#39;ve been given a trick question, and your coworkers are all laughing at you.  And I don&#39;t think I&#39;m being all that sarcastic."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469035544, "post_id": 38486509, "comment_id": 64375824, "body": "&quot;I wish I could but convention disallows me&quot; - Well, sometimes you just have to say &quot;to hell with conventions/rules - I&#39;m doing this <i>right</i> and accept the consequences&quot; - professional pride <i>is</i> a thing..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469035584, "post_id": 38486509, "comment_id": 64375839, "body": "one solution would be to do <code>#define cout return</code> call the function and then undef it again. ps: Dont do it !"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469035906, "post_id": 38486509, "comment_id": 64376012, "body": "@tobi303 Noooooo! <i>Please</i> don&#39;t."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469036083, "post_id": 38486509, "comment_id": 64376133, "body": "@tobi303: You&#39;d have to do that before and after the function definition to have any effect. However, it wouldn&#39;t have a useful effect, and would almost certainly result in an error on a line that looked something like <code>return &lt;&lt; word &lt;&lt; endl;</code>, or <code>std::return &lt;&lt; word &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1469036142, "post_id": 38486509, "comment_id": 64376159, "body": "@BenjaminLindley it wasnt meant that serious, but actually yes I didnt realize that it wont work at all..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469036184, "post_id": 38486509, "comment_id": 64376188, "body": "@BillWeiler Are you allowed to change the function&#39;s prototype to add a second argument that denotes the stream to write to?"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469035745, "post_id": 38486904, "comment_id": 64375930, "body": "completely agree. I would take it as a fun challenge to get it working somehow, but in any serious code I would simply throw that function into the garbage."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 3, "last_activity_date": 1469035126, "creation_date": 1469035126, "answer_id": 38486904, "question_id": 38486509, "link": "https://stackoverflow.com/questions/38486509/adding-strings-generated-by-function-into-an-array/38486904#38486904", "title": "Adding strings generated by function into an array", "body": "<p>If (as your comment states) the code uses <code>cout</code> to print the strings, then you have no way to capture them and put them in your array. Well, ok, you <em>might</em> be able to, by doing some major/ugly hack that grabs hold of the stdout file descriptor and reads what is written to it, but that would just be ugly beyond words (and most likely would need different platform specific implementations). Just don't go there.</p>\n\n<p>Write your own <em>good</em> function to read the file and return what you need or fix the crap function you've been given.</p>\n\n<p>There's got to be a limit to how much crud (with the risk of introducing more crap/bugs) one has to add to work around broken crap code before fixing or re-implementing/re-factoring it.</p>\n"}], "owner": {"reputation": 11, "user_id": 6575314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353ef5821807994a3a8cc58c88a6cea?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Weiler", "link": "https://stackoverflow.com/users/6575314/bill-weiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1469408190, "answer_count": 1, "score": -3, "last_activity_date": 1469035126, "creation_date": 1469033850, "question_id": 38486509, "link": "https://stackoverflow.com/questions/38486509/adding-strings-generated-by-function-into-an-array", "closed_reason": "Not suitable for this site", "title": "Adding strings generated by function into an array", "body": "<p>I am trying to create a string array to hold the strings generated by a void function. I am very confused about if or how I can do this. The below code is giving me an error about \"no suitable constructor.\"</p>\n\n<pre><code>getWords(\"theFile.dat\");     // Function to extract list of strings from file       \nstring wordsList[] = {getWords(\"theFile.dat\")};    // Add strings from function to array\n</code></pre>\n"}, {"tags": ["c++", "linux", "cmake", "eigen"], "comments": [{"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469033983, "post_id": 38486365, "comment_id": 64374921, "body": "how about the official version?"}, {"owner": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "reply_to_user": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469036032, "post_id": 38486365, "comment_id": 64376093, "body": "I tested the official version from the mercurial repo and I got the same error."}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469036290, "post_id": 38486365, "comment_id": 64376245, "body": "How about older version like 3.2.9. anyway it is <code>unsupported</code>"}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 2, "creation_date": 1469036358, "post_id": 38486365, "comment_id": 64376282, "body": "you may want to create a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> code that reproduces the problem."}, {"owner": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "reply_to_user": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469037409, "post_id": 38486365, "comment_id": 64376934, "body": "Tested 3.2.9 as well and same error."}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469038334, "post_id": 38486365, "comment_id": 64377529, "body": "at least you need to tell your compiler where to find <code>KroneckerProduct</code>"}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "edited": false, "score": 0, "creation_date": 1469039452, "post_id": 38487928, "comment_id": 64378190, "body": "This still gives the same error that I originally listed. <code>SparseMatrix does not name a type...</code>"}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "reply_to_user": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "edited": false, "score": 0, "creation_date": 1469039573, "post_id": 38487928, "comment_id": 64378240, "body": "how do you comiple your code? what is the compile options?"}, {"owner": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "edited": false, "score": 0, "creation_date": 1469039628, "post_id": 38487928, "comment_id": 64378268, "body": "<code>g++ -std=c++11 -I &#47;usr&#47;local&#47;include&#47;eigen3 hello.cpp -o hello</code>"}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "reply_to_user": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "edited": false, "score": 0, "creation_date": 1469040217, "post_id": 38487928, "comment_id": 64378610, "body": "@Steve.Q I cannot reproduce your problem with my code and your compile cmdline."}, {"owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "reply_to_user": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "edited": false, "score": 0, "creation_date": 1469040689, "post_id": 38487928, "comment_id": 64378888, "body": "@Steve.Q in fact if I remove the first line in my code, I get the same error as yours."}, {"owner": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "edited": false, "score": 0, "creation_date": 1469043184, "post_id": 38487928, "comment_id": 64380293, "body": "You can&#39;t reproduce it but you&#39;re able to reproduce it when the &lt;Eigen/Sparse&gt; include is removed?"}, {"owner": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "reply_to_user": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "edited": false, "score": 0, "creation_date": 1469043586, "post_id": 38487928, "comment_id": 64380519, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/117846/discussion-between-steve-q-and-kangshiyin\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "is_accepted": true, "score": 1, "last_activity_date": 1469038448, "creation_date": 1469038448, "answer_id": 38487928, "question_id": 38486365, "link": "https://stackoverflow.com/questions/38486365/eigen3-from-linux-mint-17-3-repo-sparsematrix-not-named/38487928#38487928", "title": "Eigen3 from Linux Mint 17.3 repo, SparseMatrix not named", "body": "<p>You problem can be solved with correct <code>inlcude</code>s. The first one defines <code>SparseMatrix</code> which corrects your first error message. The second one uses proper path which corrects your second error message.</p>\n\n<pre><code>#include &lt;Eigen/Sparse&gt;\n#include &lt;unsupported/Eigen/KroneckerProduct&gt;\nint main() {\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 3787151, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ac023abbe138a13c8e60a87676ace19?s=128&d=identicon&r=PG&f=1", "display_name": "BlazePascal", "link": "https://stackoverflow.com/users/3787151/blazepascal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 38487928, "answer_count": 1, "score": 0, "last_activity_date": 1469039547, "creation_date": 1469033359, "last_edit_date": 1469039547, "question_id": 38486365, "link": "https://stackoverflow.com/questions/38486365/eigen3-from-linux-mint-17-3-repo-sparsematrix-not-named", "title": "Eigen3 from Linux Mint 17.3 repo, SparseMatrix not named", "body": "<p>I am trying to use Eigen3 in my project and I get this error when I try to build using CMake and make</p>\n\n<pre><code>/usr/include/eigen3/unsupported/Eigen/src/KroneckerProduct/KroneckerTensorProduct.h:246:11: error: \u2018SparseMatrix\u2019 does not name a type\n       typedef SparseMatrix&lt;Scalar, 0, StorageIndex&gt; ReturnType;\n</code></pre>\n\n<p>I am using Linux Mint 17.3. I have both the eigen2 and eigen3 libraries and I'm pretty sure the CMake is picking eigen3 (especially given the error message I posted above). I installed eigen3 using the command\n<code>sudo apt-get install libeigen3-dev</code>.\nWhen I run <code>apt-cache show libeigen3-dev</code> I get</p>\n\n<pre><code>Package: libeigen3-dev\nPriority: extra\nSection: universe/libdevel\nInstalled-Size: 5130\nMaintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;\nOriginal-Maintainer: Debian Science Maintainers &lt;debian-science-maintainers@lists.alioth.debian.org&gt;\nArchitecture: all\nSource: eigen3\nVersion: 3.3~beta1-2\nDepends: pkg-config\nSuggests: libeigen3-doc, libmrpt-dev\nFilename: pool/universe/e/eigen3/libeigen3-dev_3.3~beta1-2_all.deb\nSize: 662650\nMD5sum: bad08ef7b1d166c5bc9903e510a9fb68\nSHA1: ef35745fcd047f1a1f18834e02ccef1476d7407c\nSHA256: 5c73d97dca2d950ce51bde451deed4b6508b2f6cca9b9b6563218591e029f17b\nDescription-en: lightweight C++ template library for linear algebra\n Eigen 3 is a lightweight C++ template library for vector and matrix math,\n a.k.a. linear algebra.\n .\n Unlike most other linear algebra libraries, Eigen 3 focuses on the simple\n mathematical needs of applications: games and other OpenGL apps, spreadsheets\n and other office apps, etc. Eigen 3 is dedicated to providing optimal speed\n with GCC. A lot of improvements since 2-nd version of Eigen.\nDescription-md5: 71025bd67be9e83075fd5a0e7ab822a2\nHomepage: http://eigen.tuxfamily.org\nBugs: https://bugs.launchpad.net/ubuntu/+filebug\nOrigin: Ubuntu\nSupported: 9m\n</code></pre>\n\n<p>Here's a minimal code snippet:</p>\n\n<pre><code>#include &lt;unsupported/Eigen/KroneckerProduct&gt;\nint main() {\n    return 0;\n}\n</code></pre>\n\n<p>compiling with <code>g++ -std=c++11 -I /usr/local/include/eigen3 hello.cpp -o hello\n</code>:</p>\n\n<pre><code>In file included from /usr/local/include/eigen3/unsupported/Eigen/KroneckerProduct:30:0,\n                 from hello.cpp:4:\n/usr/local/include/eigen3/unsupported/Eigen/src/KroneckerProduct/KroneckerTensorProduct.h:246:11: error: \u2018SparseMatrix\u2019 does not name a type\n   typedef SparseMatrix&lt;Scalar, 0, StorageIndex&gt; ReturnType;\n</code></pre>\n"}, {"tags": ["c++", "optimization", "z3"], "comments": [{"owner": {"reputation": 9152, "user_id": 1655144, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbea8e47dae48820261dc2a291f44907?s=128&d=identicon&r=PG", "display_name": "Douglas B. Staple", "link": "https://stackoverflow.com/users/1655144/douglas-b-staple"}, "edited": false, "score": 0, "creation_date": 1469044016, "post_id": 38486362, "comment_id": 64380767, "body": "You can get some information about what tactics are in use from the command-line tool by specifying <code>-v:10</code>.  Also, the order of tactics applied by default when <code>(check-sat)</code> is used can be found in <a href=\"https://github.com/Z3Prover/z3/blob/master/src/tactic/portfolio/default_tactic.cpp\" rel=\"nofollow noreferrer\">src/tactic/portfolio/default_tactic.cpp</a>.  I don&#39;t know where the equivalent code is for the optimization routines.  Also, I recommend cloning and compiling the current version of Z3 from GitHub. There were a few bugs related to both the optimization and the parallel combinators that have been fixed since v4.4.1."}], "owner": {"reputation": 21, "user_id": 2997021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67dd2b1d9125fcade9d64ce8270275a?s=128&d=identicon&r=PG", "display_name": "Chris Wailes", "link": "https://stackoverflow.com/users/2997021/chris-wailes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469033455, "creation_date": 1469033356, "last_edit_date": 1469033455, "question_id": 38486362, "link": "https://stackoverflow.com/questions/38486362/using-tactics-with-the-z3-optimizer-and-the-c-api", "title": "Using tactics with the Z3 optimizer and the C++ API", "body": "<p>I'm using the Z3 optimization functionality through the C++ API and would like to modify the tactics being used in an attempt to reduce the amount of time it takes Z3 to find satisfying models.  I've run into two major problems with this:</p>\n\n<ol>\n<li><p><a href=\"https://github.com/Z3Prover/z3/blob/master/examples/c%2B%2B/example.cpp#L597\" rel=\"nofollow\">While you can build a <code>solver</code> from a tactic</a> it doesn't appear that you can do the same thing for an <code>optimize</code> object.</p></li>\n<li><p>I don't know exactly what the right tactics to use are, so I would like to start by modifying whatever is being used be default.  This will let me explore different strategies and try out different combinations.  The problem is that I don't see any way to ask the solver for it's currently configured tactics.</p></li>\n</ol>\n\n<p>Does anyone know how to create an <code>optimize</code> object from a set of tactics, or how to mimic one using the right tactic combinations?  Is there a command I can use (even for the command line tool) that will cause it to display the tactics currently being used?</p>\n\n<p>For a little extra background information, I'm mainly interested in adding <a href=\"http://rise4fun.com/Z3/tutorial/strategies\" rel=\"nofollow\"><code>par-then</code> and <code>par-or</code></a> combinators and removing any tactics that don't have to do with Booleans, integer arithmetic, and <code>if-than-else</code> expressions.</p>\n"}, {"tags": ["c++", "qt", "ubuntu", "segmentation-fault"], "comments": [{"owner": {"reputation": 468, "user_id": 2829494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a65b077259fd54fe704b08beff43054?s=128&d=identicon&r=PG&f=1", "display_name": "DeathTails", "link": "https://stackoverflow.com/users/2829494/deathtails"}, "edited": false, "score": 4, "creation_date": 1469033133, "post_id": 38486241, "comment_id": 64374447, "body": "Why not use a string object instead of a char array? Would save you a lot of headache."}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 2, "creation_date": 1469033244, "post_id": 38486241, "comment_id": 64374503, "body": "<code>char outputPath[255]</code> would be more idiomatic IMO. Also there are constants/defines for a maximum path length you should use (for portability if nothing else)"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469033377, "post_id": 38486241, "comment_id": 64374559, "body": "Stop violating the <a href=\"https://en.wikipedia.org/wiki/Zero_one_infinity_rule\" rel=\"nofollow noreferrer\">zero one infinity rule</a> already."}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1469033418, "post_id": 38486241, "comment_id": 64374586, "body": "Most likely answer, <code>patientName</code> or <code>techName</code> are malformed or longer than you expect, overflowing the allocated memory. Second most likedly, you could allocate the memory for <code>outputPath</code> because you never free it and ran out of memory."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1469033661, "post_id": 38486241, "comment_id": 64374735, "body": "This is supposed to be C++, right?  <code>std::ostringstream strm; strm &lt;&lt; &quot;&#47;home&#47;istrab&#47;iStrabGUI Output&#47;&quot; &lt;&lt; patientName &lt;&lt; &#39;&#47;&#39; &lt;&lt; techName &lt;&lt; &quot;&#47;0&#47;Frames&quot;;  std::string outputPath = strm.str();</code> -- Even if techname or patientName go haywire and are larger than expected, the code still works."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1469034006, "post_id": 38486241, "comment_id": 64374938, "body": "<i>The reason I wonder this is because after some research I&#39;ve declared the size of the array to be 255,</i> -- Don&#39;t write programs using this way of thinking, and especially don&#39;t write ones where you have no way of <i>ensuring</i> these preconditions hold."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469034331, "post_id": 38486241, "comment_id": 64375154, "body": "<a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a> needed. Also, reading about <a href=\"http://www.catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">how to ask smart questions</a> might be a good idea."}, {"owner": {"reputation": 386, "user_id": 4247808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94039d63e482a00879691a185e68e555?s=128&d=identicon&r=PG&f=1", "display_name": "Xiobiq", "link": "https://stackoverflow.com/users/4247808/xiobiq"}, "edited": false, "score": 1, "creation_date": 1469034472, "post_id": 38486241, "comment_id": 64375234, "body": "Please provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. Also, you should not use <code>sprintf</code>, use <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\"><code>snprintf</code></a> instead (though you should use just a <code>std::string</code> but maybe you have your limitations)."}], "answers": [{"tags": [], "owner": {"reputation": 312, "user_id": 3795926, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f4612f58dca2e48ddedb6cb8c52d9ded?s=128&d=identicon&r=PG&f=1", "display_name": "rafaelleru", "link": "https://stackoverflow.com/users/3795926/rafaelleru"}, "is_accepted": false, "score": 0, "last_activity_date": 1469034609, "last_edit_date": 1495542795, "creation_date": 1469034609, "answer_id": 38486735, "question_id": 38486241, "link": "https://stackoverflow.com/questions/38486241/c-char255-producing-segmentation-fault/38486735#38486735", "title": "C++ char*[255] producing segmentation fault", "body": "<p>The vars patientName, techName are the problem, you should use resize outputPath to become bigger and won't be overflowed.</p>\n\n<p>But I try to figure out to use a string var from string library. \n<a href=\"https://stackoverflow.com/questions/5193173/getting-cout-output-to-a-stdstring\">Look here</a></p>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 3794352, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/59ed2011ec872c6cb6db92a7d1c6143a?s=128&d=identicon&r=PG&f=1", "display_name": "Coliwack", "link": "https://stackoverflow.com/users/3794352/coliwack"}, "edited": false, "score": 0, "creation_date": 1469118408, "post_id": 38486858, "comment_id": 64416955, "body": "Thank you.  I tried this method and the problem was fixed."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 3, "last_activity_date": 1469034961, "creation_date": 1469034961, "answer_id": 38486858, "question_id": 38486241, "link": "https://stackoverflow.com/questions/38486241/c-char255-producing-segmentation-fault/38486858#38486858", "title": "C++ char*[255] producing segmentation fault", "body": "<p>Use <code>QString</code> if If you are using Qt anyway:</p>\n\n<pre><code>QString outputPath;\noutputPath.sprintf( \"/home/istrab/iStrabGUI Output/%s/%s/0/Frames\",\n                    patientName, \n                    techName);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 3794352, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/59ed2011ec872c6cb6db92a7d1c6143a?s=128&d=identicon&r=PG&f=1", "display_name": "Coliwack", "link": "https://stackoverflow.com/users/3794352/coliwack"}, "edited": false, "score": 0, "creation_date": 1469118006, "post_id": 38486888, "comment_id": 64416727, "body": "I know that they are not, because I used print commands to print them before the offending line is reached."}], "tags": [], "owner": {"reputation": 1404, "user_id": 142337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250fe75643eb5dfe354d6de3d8f527ab?s=128&d=identicon&r=PG", "display_name": "ascotan", "link": "https://stackoverflow.com/users/142337/ascotan"}, "is_accepted": false, "score": 1, "last_activity_date": 1469035047, "creation_date": 1469035047, "answer_id": 38486888, "question_id": 38486241, "link": "https://stackoverflow.com/questions/38486241/c-char255-producing-segmentation-fault/38486888#38486888", "title": "C++ char*[255] producing segmentation fault", "body": "<p>Run gdb on it and put a break on that line, then print the value of patientName and techName.  One of the two is probably null.</p>\n"}, {"tags": [], "owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "is_accepted": false, "score": 1, "last_activity_date": 1469037017, "creation_date": 1469037017, "answer_id": 38487447, "question_id": 38486241, "link": "https://stackoverflow.com/questions/38486241/c-char255-producing-segmentation-fault/38487447#38487447", "title": "C++ char*[255] producing segmentation fault", "body": "<p>You can use <code>QDir</code> methods.</p>\n\n<pre><code>QDir path(\"/home/istrab/iStrabGUI Output/\");\npath.cd(patientName);\npath.cd(techName);\npath.cd(\"/0/Frames\");\n\nQString pathString = path.path();\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 3794352, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/59ed2011ec872c6cb6db92a7d1c6143a?s=128&d=identicon&r=PG&f=1", "display_name": "Coliwack", "link": "https://stackoverflow.com/users/3794352/coliwack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "closed_date": 1469039939, "accepted_answer_id": 38486858, "answer_count": 4, "score": -5, "last_activity_date": 1469037017, "creation_date": 1469032964, "last_edit_date": 1469034125, "question_id": 38486241, "link": "https://stackoverflow.com/questions/38486241/c-char255-producing-segmentation-fault", "closed_reason": "Not suitable for this site", "title": "C++ char*[255] producing segmentation fault", "body": "<p>I know this is probably something basic that has been talked about 1000 times, but I think I need help understanding why the following produces a segmentation fault:</p>\n\n<pre><code>char* outputPath = new char[255];\nsprintf(outputPath, \"/home/istrab/iStrabGUI Output/%s/%s/0/Frames\",patientName, techName);\n</code></pre>\n\n<p>The reason I wonder this is because after some research I've declared the size of the array to be 255, which I know would be large enough to hold the string I wish to write to it.  I also made sure it was initialized before I tried to write to it.  I also made doubly sure that any involved variables were initialized earlier in the code or the program would have exited by then.  Is there another way I could be going about this?  Is it in the string itself or the way I initialized the array?  </p>\n\n<p>This code was written using Qt 4.8.6 in C++</p>\n"}, {"tags": ["c++", "c++11", "constructor", "language-lawyer", "delegating-constructor"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1469034045, "post_id": 38486235, "comment_id": 64374970, "body": "<i>&quot;Why same program exhibits different behaviour in different versions of these compilers ?&quot;</i> Because the newer compilers are better the older ones. Telling you your code is broken is better than crashing at runtime."}], "answers": [{"comments": [{"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 1, "creation_date": 1469034007, "post_id": 38486324, "comment_id": 64374939, "body": "I think behaviour should be undefined in case of ill formed NDR not implementation defined !!!"}], "tags": [], "owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "is_accepted": true, "score": 9, "last_activity_date": 1469034126, "last_edit_date": 1469034126, "creation_date": 1469033221, "answer_id": 38486324, "question_id": 38486235, "link": "https://stackoverflow.com/questions/38486235/constructor-delegates-to-itself-in-g-clang/38486324#38486324", "title": "constructor delegates to itself in g++ &amp; clang++", "body": "<p>From C++11, [class.base.init]\u00b66:</p>\n\n<blockquote>\n  <p>If a constructor delegates to itself directly or indirectly, the program is ill-formed; no diagnostic is required.</p>\n</blockquote>\n\n<p>All compilers are right \u2013 the code is broken, and the compiler isn't required to tell you so. At this point you have UB; from [intro.compliance]\u00b62:</p>\n\n<blockquote>\n  <p>If a program contains a violation of a rule for which no diagnostic is required, this International Standard places no requirement on implementations with respect to that program.</p>\n</blockquote>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 38486324, "answer_count": 1, "score": 4, "last_activity_date": 1469034126, "creation_date": 1469032953, "question_id": 38486235, "link": "https://stackoverflow.com/questions/38486235/constructor-delegates-to-itself-in-g-clang", "title": "constructor delegates to itself in g++ &amp; clang++", "body": "<p>Consider following program. I accidentally made a mistake in it.</p>\n\n<pre><code>struct T {\n    int s;\n    T() : T() {\n        s=9;\n    }\n};\nint main() {\n    T t;\n}\n</code></pre>\n\n<p>The above code compiles &amp; runs fine in some versions of g++ like g++ 4.8.1 (See live demo <a href=\"http://melpon.org/wandbox/permlink/ROkKdTDJ3xUUPBhw\" rel=\"nofollow\">here</a> ) &amp; clang++ 3.6.0 (see live demo <a href=\"http://melpon.org/wandbox/permlink/oEza0NM8EC90C4GY\" rel=\"nofollow\">here</a> ) &amp; in MSVC++ 2015 but crashes at runtime. It gives me <strong>segmentation fault</strong> error. I think it is due to recursion I mean recursively call the constructor. But most recent versions of g++ &amp; clang++ fails to compile this code by giving following error:</p>\n\n<p>g++ 4.9.2 gives following error (See live demo <a href=\"http://melpon.org/wandbox/permlink/xoKqjuUdZRunkwWS\" rel=\"nofollow\">here</a> )</p>\n\n<pre><code>prog.cc: In constructor 'T::T()':\nprog.cc:3:10: error: constructor delegates to itself\n  T() : T() {\n</code></pre>\n\n<p>clang++ gives following error (See live demo <a href=\"http://coliru.stacked-crooked.com/a/ce1d74059f654f51\" rel=\"nofollow\">here</a> )</p>\n\n<pre><code>main.cpp:4:8: error: constructor for 'T' creates a delegation cycle [-Wdelegating-ctor-cycles]\n        T() : T() {\n              ^\n1 error generated.\n</code></pre>\n\n<p>So, the question here is which compiler is right here according to standard ? Is it bug in one of these compilers ? What exactly is happening here in above program? Correct me If I am wrong somewhere in my understanding. Why same program exhibits different behaviour in different versions of these compilers ?</p>\n"}, {"tags": ["c++", "c++11", "std", "smart-pointers"], "comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 1, "creation_date": 1469033028, "post_id": 38486211, "comment_id": 64374382, "body": "In <code>head(std::move(createList()), ...</code>, why are you moving an rvalue?"}, {"owner": {"reputation": 43, "user_id": 5087526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d60a9ebba9d1c3bada3067237fc14?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinaj", "link": "https://stackoverflow.com/users/5087526/ashwinaj"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1469033111, "post_id": 38486211, "comment_id": 64374429, "body": "I&#39;m just trying out all the fancy new things in C++11, the std::move is probably implicit (as createList returns an rvalue) and not required."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1469033988, "post_id": 38486211, "comment_id": 64374924, "body": "The return type of <code>createList</code> does not include your deleter, so it&#39;s a different type"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5087526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d60a9ebba9d1c3bada3067237fc14?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinaj", "link": "https://stackoverflow.com/users/5087526/ashwinaj"}, "edited": false, "score": 0, "creation_date": 1469035631, "post_id": 38486544, "comment_id": 64375867, "body": "Thanks. I tried your second option and I get this:   no known conversion for argument 1 from \u2018std::default_delete&lt;node&gt;\u2019 to \u2018const main()::__lambda0&amp;\u2019"}, {"owner": {"reputation": 43, "user_id": 5087526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d60a9ebba9d1c3bada3067237fc14?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinaj", "link": "https://stackoverflow.com/users/5087526/ashwinaj"}, "edited": false, "score": 0, "creation_date": 1469036172, "post_id": 38486544, "comment_id": 64376178, "body": "Skypjack, I added the compilation error in my original question."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 43, "user_id": 5087526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d60a9ebba9d1c3bada3067237fc14?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinaj", "link": "https://stackoverflow.com/users/5087526/ashwinaj"}, "edited": false, "score": 0, "creation_date": 1469036243, "post_id": 38486544, "comment_id": 64376215, "body": "@ashwinaj See the link in the previous comment. Is that what you you did? You should not edit a question this way indeed."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 4, "last_activity_date": 1469033958, "creation_date": 1469033958, "answer_id": 38486544, "question_id": 38486211, "link": "https://stackoverflow.com/questions/38486211/c11-using-unique-ptr-with-custom-deleter/38486544#38486544", "title": "C++11 using unique_ptr with custom deleter", "body": "<p>You should return the correct type from <code>createList</code>:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;limits&gt;\n#include &lt;memory&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct node {\n    int value;\n    struct node* next;\n};\n\ntypedef struct node Node;\n\nauto createList()\n{\n    auto del1 = [](Node* p) { while(p) {std::cout &lt;&lt; \"Deleting value is : \" &lt;&lt; p-&gt;value;struct node* n=p-&gt;next;delete p; p=n;} return; };\n    std::unique_ptr&lt; Node, decltype(del1) &gt; head(new Node,del1);\n\n    Node* temp=head.get();\n    temp-&gt;value=0;\n    for(int i=1;i&lt;8;i++) {\n        if(temp-&gt;next==nullptr) {\n            temp-&gt;next=new Node();\n            temp=temp-&gt;next;\n            temp-&gt;value=i;\n            temp-&gt;next=nullptr;\n        }\n    //temp=temp-&gt;next;\n    }\n    return head;\n}\n\nint main()\n{\n    auto node = createList();\n }\n</code></pre>\n\n<p>Otherwise, in the code shown in the question, you should take ownership of the internal data and move them, being the pointers of different types:</p>\n\n<pre><code>int main()\n{\n    auto del1 = [](Node* p) { while(p) {std::cout &lt;&lt; \"Deleting value is : \" &lt;&lt; p-&gt;value;struct node* n=p-&gt;next;delete p; p=n;} return; };\n\n    std::unique_ptr&lt; Node, decltype(del1) &gt; head(createList().release(),del1);\n}\n</code></pre>\n\n<p>Note the call to <code>.release()</code>.<br>\nSee <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/release\" rel=\"nofollow\">here</a> for further details.</p>\n"}, {"comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1469034198, "post_id": 38486596, "comment_id": 64375077, "body": "The safest would probably be to have a destructor in <code>Node</code> to be honest"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 1, "last_activity_date": 1469034125, "creation_date": 1469034125, "answer_id": 38486596, "question_id": 38486211, "link": "https://stackoverflow.com/questions/38486211/c11-using-unique-ptr-with-custom-deleter/38486596#38486596", "title": "C++11 using unique_ptr with custom deleter", "body": "<p>The two-argument constructor for <code>unique_ptr</code> takes a raw pointer and a deleter, not a smart pointer and a deleter.</p>\n\n<p>To make your example safe, <code>createList</code> should probably return a <code>unique_ptr</code> that would delete all the nodes in the first place.</p>\n"}, {"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1469035577, "post_id": 38486619, "comment_id": 64375835, "body": "How does this differ exactly from what I said in the other answer?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1469037219, "post_id": 38486619, "comment_id": 64376808, "body": "@skypjack You didn&#39;t have the release option when I wrote this answer, and you don&#39;t have an explanation of why OP&#39;s code doesn&#39;t work."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1469037668, "post_id": 38486619, "comment_id": 64377104, "body": "It makes sense. I added the reference to <code>release</code> with an edit, but I didn&#39;t notice that you answered meanwhile. I&#39;m sorry."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1469034217, "creation_date": 1469034217, "answer_id": 38486619, "question_id": 38486211, "link": "https://stackoverflow.com/questions/38486211/c11-using-unique-ptr-with-custom-deleter/38486619#38486619", "title": "C++11 using unique_ptr with custom deleter", "body": "<p><code>createList()</code> returns a <code>std::unique_ptr&lt;Node&gt;</code>. The <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/unique_ptr\" rel=\"nofollow\">constructor</a> you're trying to use takes a <code>Node*</code> as the first argument:</p>\n\n<pre><code>unique_ptr( pointer p, /* see below */ d1 ); (3)    \nunique_ptr( pointer p, /* see below */ d2 ); (4)    \n</code></pre>\n\n<p>Hence the error. </p>\n\n<p>If you want to keep the custom deleter local to <code>main()</code>, you'll have to just pull the pointer out of <code>createList</code>:</p>\n\n<pre><code>std::unique_ptr&lt;Node, decltype(del1)&gt; head(\n    createList().release(), // NB release(), not get()!\n    del1);\n</code></pre>\n\n<p>or change <code>createList()</code> itself to return a <code>std::unique_ptr&lt;Node, decltype(del1)&gt;</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 336, "user_id": 3951733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44b978c87a1a9309f04bd7c15c4266f5?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/3951733/roland"}, "edited": false, "score": 0, "creation_date": 1469111836, "post_id": 38487523, "comment_id": 64412527, "body": "@ashwinaj: and you need no custom deleter any more"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1469038391, "last_edit_date": 1469038391, "creation_date": 1469037193, "answer_id": 38487523, "question_id": 38486211, "link": "https://stackoverflow.com/questions/38486211/c11-using-unique-ptr-with-custom-deleter/38487523#38487523", "title": "C++11 using unique_ptr with custom deleter", "body": "<p>An alternative design would be</p>\n\n<pre><code>struct Node {\n    Node(int value) : value(value) {}\n\n    int value;\n    std::unique_ptr&lt;Node&gt; next;\n};\n\nstd::unique_ptr&lt;Node&gt; createList()\n{\n    std::unique_ptr&lt;Node&gt; head = std::make_unique&lt;Node&gt;(0);\n\n    Node* node = head.get();\n    for(int i = 1; i &lt; 8; i++) {\n        node-&gt;next = std::make_unique&lt;Node&gt;(i);\n        node = node-&gt;next.get();\n    }\n    return head;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5087526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d60a9ebba9d1c3bada3067237fc14?s=128&d=identicon&r=PG&f=1", "display_name": "ashwinaj", "link": "https://stackoverflow.com/users/5087526/ashwinaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5066, "favorite_count": 1, "accepted_answer_id": 38486544, "answer_count": 4, "score": 4, "last_activity_date": 1469038391, "creation_date": 1469032870, "last_edit_date": 1469036546, "question_id": 38486211, "link": "https://stackoverflow.com/questions/38486211/c11-using-unique-ptr-with-custom-deleter", "title": "C++11 using unique_ptr with custom deleter", "body": "<p>I'm trying to learn C++11 unique_ptr usage by doing a simple linked list program. For the life of me I can't figure out why I'm getting a compile error when using a custom deleter.</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;limits&gt;\n#include &lt;memory&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct node {\n    int value;\n    struct node* next;\n};\n\ntypedef struct node Node;\n\nstd::unique_ptr&lt;Node&gt; createList()\n{\n\n    std::unique_ptr&lt;Node&gt; head(new Node);\n    Node* temp=head.get();\n    temp-&gt;value=0;\n    for(int i=1;i&lt;8;i++) {\n        if(temp-&gt;next==nullptr) {\n            temp-&gt;next=new Node();\n            temp=temp-&gt;next;\n            temp-&gt;value=i;\n            temp-&gt;next=nullptr;\n        }\n    //temp=temp-&gt;next;\n    }\n    return head;\n}\n\nint main()\n{\n    auto del1 = [](Node* p) { while(p) {std::cout &lt;&lt; \"Deleting value is : \" &lt;&lt; p-&gt;value;struct node* n=p-&gt;next;delete p; p=n;} return; };\n\n    std::unique_ptr&lt; Node, decltype(del1) &gt; head(std::move(createList()),del1);\n}\n</code></pre>\n\n<p>And here is the compilation error</p>\n\n<pre><code>sh-4.3$ g++ -std=c++11 -o main *.cpp                                                                                                                   \nmain.cpp: In function 'int main()':                                                                                                                    \nmain.cpp:38:82: error: no matching function for call to 'std::unique_ptr&lt;node, main()::&lt;lambda(Node*)&gt; &gt;::unique_ptr(std::remove_reference&lt;std::unique_\nptr&lt;node&gt; &gt;::type, main()::&lt;lambda(Node*)&gt;&amp;)'                                                                                                          \n         std::unique_ptr&lt; Node, decltype(del1) &gt; head(std::move(createList()),del1);                                                                   \n                                                                                  ^                                                                    \nIn file included from /usr/include/c++/5.3.1/memory:81:0,                                                                                              \n                 from main.cpp:3:                                                                                                                      \n/usr/include/c++/5.3.1/bits/unique_ptr.h:228:2: note: candidate: template&lt;class _Up, class&gt; std::unique_ptr&lt;_Tp, _Dp&gt;::unique_ptr(std::auto_ptr&lt;_Up&gt;&amp;&amp;)\n  unique_ptr(auto_ptr&lt;_Up&gt;&amp;&amp; __u) noexcept;                                                                                                            \n  ^                                                                                                                                                    \n/usr/include/c++/5.3.1/bits/unique_ptr.h:228:2: note:   template argument deduction/substitution failed:                                               \nmain.cpp:38:82: note:   'std::remove_reference&lt;std::unique_ptr&lt;node&gt; &gt;::type {aka std::unique_ptr&lt;node&gt;}' is not derived from 'std::auto_ptr&lt;_Up&gt;'     \n         std::unique_ptr&lt; Node, decltype(del1) &gt; head(std::move(createList()),del1);                                                                   \n                                                                                  ^                                                                    \nIn file included from /usr/include/c++/5.3.1/memory:81:0,                                                                                              \n                 from main.cpp:3:                                                                                                                      \n/usr/include/c++/5.3.1/bits/unique_ptr.h:220:2: note: candidate: template&lt;class _Up, class _Ep, class&gt; std::unique_ptr&lt;_Tp, _Dp&gt;::unique_ptr(std::uniqu\ne_ptr&lt;_Up, _Ep&gt;&amp;&amp;)                                                                                                                                     \n  unique_ptr(unique_ptr&lt;_Up, _Ep&gt;&amp;&amp; __u) noexcept                                                                                                      \n  ^                                                                                                                                                    \n/usr/include/c++/5.3.1/bits/unique_ptr.h:220:2: note:   template argument deduction/substitution failed:                                               \nmain.cpp:38:82: note:   candidate expects 1 argument, 2 provided                                                                                       \n         std::unique_ptr&lt; Node, decltype(del1) &gt; head(std::move(createList()),del1);    \n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "regex", "c++11"], "comments": [{"owner": {"reputation": 7975, "user_id": 3836111, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc8e3526756540925b0536455b280205?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Proske", "link": "https://stackoverflow.com/users/3836111/sebastian-proske"}, "edited": false, "score": 0, "creation_date": 1469033024, "post_id": 38486156, "comment_id": 64374380, "body": "You could write your own regex engine."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1469033569, "post_id": 38486156, "comment_id": 64374678, "body": "The answer is - indtall Boost and use lookbehind <code>(?&lt;!\\S</code> and lookahead <code>(?!\\S)</code> instead of  <code>\\bword\\b</code>."}, {"owner": {"reputation": 4128, "user_id": 4607733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc604aa16e5409668cc4fd1f2f0c01e2?s=128&d=identicon&r=PG&f=1", "display_name": "horcrux", "link": "https://stackoverflow.com/users/4607733/horcrux"}, "edited": false, "score": 1, "creation_date": 1469033658, "post_id": 38486156, "comment_id": 64374732, "body": "For the boundary after the word you can use lookahead, replacing <code>\\b</code> with <code>(?=\\s)</code>. Unfortunatly, C++11 does not support lookbehind, so you cannot do the same for the first boundary."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1469038815, "post_id": 38486156, "comment_id": 64377829, "body": "How about <code>const std::string specialWord = &quot;[A-Za-z0-9_?!,]&quot;; const std::string notSpecialWord = &quot;[^A-Za-z0-9_?!,]&quot;;</code> and use these helper variables to construct your regexes ?"}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1469090068, "post_id": 38486156, "comment_id": 64397870, "body": "@Jarod42 because <code>\\b</code> doesn&#39;t consume character"}], "owner": {"reputation": 1765, "user_id": 4334743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/83022b3dad2600c0ec8136042ab37eec?s=128&d=identicon&r=PG", "display_name": "AneesAhmed777", "link": "https://stackoverflow.com/users/4334743/aneesahmed777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469034199, "creation_date": 1469032718, "last_edit_date": 1495540372, "question_id": 38486156, "link": "https://stackoverflow.com/questions/38486156/how-to-make-b-in-regex-behave-as-if-w-s-and-w-s", "title": "How to make `\\b` in regex behave as if `\\w=\\S` and `\\W=\\s`?", "body": "<p>I need to match word boundaries using C++ Regex (ECMAscript or whatever), but in this particular situation I find myself, the criteria for what is considered a word-char must be changed.</p>\n\n<p>By default, <code>\\w</code> = <code>[A-Za-z0-9_]</code> and <code>\\W</code> = <code>[^\\w]</code>.</p>\n\n<p>But sometimes situations dictate that special chars like <code>?</code>,<code>!</code>,<code>,</code>, etc also be considered word-chars.</p>\n\n<p><strong>Basically, I would be happy if <code>\\b</code> was tricked into thinking that <code>\\w</code> is <code>\\S</code> and that <code>\\W</code> is <code>\\s</code>.</strong></p>\n\n<p>Is there a way to do it?</p>\n\n<p>P.S. I'm currently trying to simulate this and expressions are looking ugly. Would be nice if I get <code>\\b</code> to behave as I want. <strong>Also, it would be nice if the new definition of <code>\\b</code> is only activated where I want, and at other places, the original definition of <code>\\b</code> should be used.</strong></p>\n\n<hr>\n\n<p>The closest question which I could manage to find is <a href=\"https://stackoverflow.com/q/15907896/4334743\">this</a>. The OP wanted to end the expression with a <code>\\b</code>, but could not because <code>*</code> is not a word-char. What if he still wanted to end it with a word-boundary but <code>*</code> treated as a word-char ?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 1214, "user_id": 5740834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaaaba0c043b131a3234fb02fc9c2feb?s=128&d=identicon&r=PG&f=1", "display_name": "Dainius \u0160altenis", "link": "https://stackoverflow.com/users/5740834/dainius-%c5%a0altenis"}, "edited": false, "score": 0, "creation_date": 1469032728, "post_id": 38486150, "comment_id": 64374207, "body": "Show your code and full error log please."}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 1214, "user_id": 5740834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaaaba0c043b131a3234fb02fc9c2feb?s=128&d=identicon&r=PG&f=1", "display_name": "Dainius \u0160altenis", "link": "https://stackoverflow.com/users/5740834/dainius-%c5%a0altenis"}, "edited": false, "score": 0, "creation_date": 1469033069, "post_id": 38486150, "comment_id": 64374403, "body": "OpenCV Error: Assertion failed (image.channels() == 1 || image.channels() == 3 || image.channels() == 4) in cv::imwrite_, file E:\\softwares\\opencv-3.1.0\\opencv-3.1.0\\modules\\imgcodecs\\src&zwnj;&#8203;\\loadsave.cpp, line 455"}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "reply_to_user": {"reputation": 1214, "user_id": 5740834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaaaba0c043b131a3234fb02fc9c2feb?s=128&d=identicon&r=PG&f=1", "display_name": "Dainius \u0160altenis", "link": "https://stackoverflow.com/users/5740834/dainius-%c5%a0altenis"}, "edited": false, "score": 0, "creation_date": 1469033132, "post_id": 38486150, "comment_id": 64374446, "body": "This is my code.. projectPoints(objectPoints, rVec, tVec, intrisicMat, distCoeffs, imagePoints);  Mat pointsMat = Mat(imagePoints); imwrite(&quot;E:/softwares/1.8.0.71/bin/depthImage.png&quot;, pointsMat);"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "edited": false, "score": 0, "creation_date": 1469037834, "post_id": 38487485, "comment_id": 64377208, "body": "So how can i create a Mat image using this data?"}, {"owner": {"reputation": 834, "user_id": 6331184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468bc3e65322011f19839ef9ab7acc38?s=128&d=identicon&r=PG", "display_name": "Cedric", "link": "https://stackoverflow.com/users/6331184/cedric"}, "reply_to_user": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "edited": false, "score": 0, "creation_date": 1469038348, "post_id": 38487485, "comment_id": 64377538, "body": "Could you point me to the meaning of this 2 channels Mat? What is it suppose to show as an image? If you&#39;re just trying to save the values as a serialized Mat object, there&#39;s the cv::FileStorage class that has the purpose of saving to XML or YML format (see: <a href=\"http://docs.opencv.org/2.4/modules/core/doc/xml_yaml_persistence.html\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/core/doc/xml_yaml_persistence.ht&zwnj;&#8203;ml</a>)."}, {"owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "edited": false, "score": 0, "creation_date": 1469038618, "post_id": 38487485, "comment_id": 64377706, "body": "My goal is to convert the 3D clod point into 2D image data. I want to save the 2D image to visualize the 2D depth image."}, {"owner": {"reputation": 834, "user_id": 6331184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468bc3e65322011f19839ef9ab7acc38?s=128&d=identicon&r=PG", "display_name": "Cedric", "link": "https://stackoverflow.com/users/6331184/cedric"}, "reply_to_user": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "edited": false, "score": 0, "creation_date": 1469039026, "post_id": 38487485, "comment_id": 64377945, "body": "If I do understand what you want, the Mat object you&#39;re getting links every 3D coordinates of the 3D point cloud to a 2D coordinate in the imagePoints. Therefore, you&#39;ll want to go through every 2 channels element of imagePoints, get the (x,y) values and use these as an index on another matrix (which is a binary image (CV_8U), for example) and set the (x,y) element value as 255."}], "tags": [], "owner": {"reputation": 834, "user_id": 6331184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468bc3e65322011f19839ef9ab7acc38?s=128&d=identicon&r=PG", "display_name": "Cedric", "link": "https://stackoverflow.com/users/6331184/cedric"}, "is_accepted": false, "score": 1, "last_activity_date": 1469037112, "creation_date": 1469037112, "answer_id": 38487485, "question_id": 38486150, "link": "https://stackoverflow.com/questions/38486150/create-mat-from-vectorpoint2f-assertion-failed-error/38487485#38487485", "title": "Create Mat from Vector&lt;point2f&gt; Assertion failed error", "body": "<p>With what you have written in the comments, it seems that you're trying to imwrite your <code>Mat</code> to a file. The problem is, a <code>Mat</code> from <code>Vector&lt;Point2f&gt;</code> will give a 2 channels matrix, which is not compatible with any image format (grayscale, RGB or RGBA).</p>\n\n<p>Moreover, please edit your main post to show the code (using markdown) so it is easier to read and then help you.</p>\n"}], "owner": {"reputation": 51, "user_id": 6584600, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6fb77966c044a4c66e6b174289e4c86?s=128&d=identicon&r=PG&f=1", "display_name": "MThomas", "link": "https://stackoverflow.com/users/6584600/mthomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469045463, "creation_date": 1469032688, "last_edit_date": 1495535328, "question_id": 38486150, "link": "https://stackoverflow.com/questions/38486150/create-mat-from-vectorpoint2f-assertion-failed-error", "title": "Create Mat from Vector&lt;point2f&gt; Assertion failed error", "body": "<p>I was trying to write Point2f imagePoints to a Mat image in openCV. I was following the link below. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/23585158/create-mat-from-vectorpoint2f\">Create Mat from vector&lt;point2f&gt;</a></p>\n\n<p>But I am getting 'Assertion failed' error. Please help.</p>\n\n<p>Code: </p>\n\n<pre><code>std::vector&lt;cv::Point3d&gt; objectPoints;\nstd::vector&lt;cv::Point2d&gt; imagePoints;\n\ncv::Mat intrisicMat(3, 3, cv::DataType&lt;double&gt;::type);\nintrisicMat.at&lt;double&gt;(0, 0) = param.focalLength.first;\nintrisicMat.at&lt;double&gt;(0, 1) = 0;\nintrisicMat.at&lt;double&gt;(0, 2) = param.principalPoint.first;\n\nintrisicMat.at&lt;double&gt;(1, 0) = 0;\nintrisicMat.at&lt;double&gt;(1, 1) = param.focalLength.second;\nintrisicMat.at&lt;double&gt;(1, 2) = param.principalPoint.second;\n\nintrisicMat.at&lt;double&gt;(2, 0) = 0;\nintrisicMat.at&lt;double&gt;(2, 1) = 0;\nintrisicMat.at&lt;double&gt;(2, 2) = 1;\n\ncv::Mat rVec(3, 1, cv::DataType&lt;double&gt;::type); // Rotation vector\nrVec.at&lt;double&gt;(0) = 0;\nrVec.at&lt;double&gt;(1) = 0;\nrVec.at&lt;double&gt;(2) = 0;\n\ncv::Mat tVec(3, 1, cv::DataType&lt;double&gt;::type); // Translation vector\ntVec.at&lt;double&gt;(0) = 0;\ntVec.at&lt;double&gt;(1) = 0;\ntVec.at&lt;double&gt;(2) = 0;\n\ncv::Mat distCoeffs(5, 1, cv::DataType&lt;double&gt;::type);   // Distortion vector\ndistCoeffs.at&lt;double&gt;(0) = param.distortionRadial.at(0);\ndistCoeffs.at&lt;double&gt;(1) = param.distortionRadial.at(1);\ndistCoeffs.at&lt;double&gt;(2) = param.distortionTangential.first;\ndistCoeffs.at&lt;double&gt;(3) = param.distortionTangential.second;\ndistCoeffs.at&lt;double&gt;(4) = param.distortionRadial.at(2);\n\n\nprojectPoints(objectPoints, rVec, tVec, intrisicMat, distCoeffs, imagePoints);\nMat depthImage = Mat(imagePoints);\nimwrite(\"E:/softwares/1.8.0.71/bin/depthImage.jpg\", depthImage);\ncout &lt;&lt; \"depthImage.channels()=\" &lt;&lt; depthImage.channels() &lt;&lt; endl;\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>OpenCV Error: Assertion failed (image.channels() == 1 || image.channels() == 3 || image.channels() == 4) in cv::imwrite_, file E:\\softwares\\opencv-3.1.0\\opencv-3.1.0\\modules\\imgcodecs\\src\\loadsave.cpp, line 455\n</code></pre>\n\n<p>My image has 2 channels. So ImWrite() is throwing assertion failed error. How can I create a Mat image using the Image points  if not like this?  </p>\n"}, {"tags": ["c++", "opengl", "vbo", "vao"], "answers": [{"tags": [], "owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "is_accepted": true, "score": 2, "last_activity_date": 1469033140, "creation_date": 1469033140, "answer_id": 38486296, "question_id": 38486070, "link": "https://stackoverflow.com/questions/38486070/opengl-multiple-vaos-for-one-vbo/38486296#38486296", "title": "OpenGL : multiple VAOs for one VBO", "body": "<p>The last parameter for this function call is incorrect:</p>\n\n<pre><code>glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (char*)NULL + 9); \n</code></pre>\n\n<p>You're telling it to add 9 <strong>bytes</strong>, but your points are <strong>floats</strong></p>\n\n<p>Try this:</p>\n\n<pre><code>glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (char*)NULL + 9 * sizeof(float)); \n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 4281509, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d380b8205a0e2f4f2fc4b972e2040bea?s=128&d=identicon&r=PG&f=1", "display_name": "Corvinus", "link": "https://stackoverflow.com/users/4281509/corvinus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 38486296, "answer_count": 1, "score": 1, "last_activity_date": 1469033140, "creation_date": 1469032419, "question_id": 38486070, "link": "https://stackoverflow.com/questions/38486070/opengl-multiple-vaos-for-one-vbo", "title": "OpenGL : multiple VAOs for one VBO", "body": "<p>I'm a newbie to OpenGL and I'm trying draw two triangles using two VAOs and only one VBO. Even if after some research, I came to have a better understanding of VAO, VBO and how the needed glew functions work, I have no clue why my program displays only one triangle instead of two. Can somebody help?</p>\n\n<pre><code>...\n\nGLfloat points[] = {\n    0.5f, 0.5f, 0.0f, //First Triangle\n    -0.5f, 0.5f, 0.0f,\n    0.5f, -0.5f, 0.0f,\n\n    0.0f, 0.0f, 0.0f, //Second Triangle\n    -1.0f, 0.0f, 0.0f,\n    0.0f, -1.0f, 0.0f\n};\n\nGLuint vbo;\nglGenBuffers(1, &amp;vbo);\nglBindBuffer(GL_ARRAY_BUFFER, vbo);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(points), points, GL_STATIC_DRAW);\nglBindBuffer(GL_ARRAY_BUFFER, 0);\n\nGLuint vao1;\nglGenVertexArrays(1, &amp;vao1);\nglBindVertexArray(vao1);        \n    glBindBuffer(GL_ARRAY_BUFFER, vbo);         \n        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, NULL);   \n        glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\nglBindVertexArray(0);\n\nGLuint vao2;\nglGenVertexArrays(1, &amp;vao2);\nglBindVertexArray(vao2);\n    glBindBuffer(GL_ARRAY_BUFFER, vbo);         \n        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, (char*)NULL + 9);    \n        glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\nglBindVertexArray(0);\n\n...\n\nwhile (!glfwWindowShouldClose(window))\n{\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    glUseProgram(shader_program);\n\n        glBindVertexArray(vao1);\n            glDrawArrays(GL_TRIANGLES, 0, 3);\n        glBindVertexArray(0);           \n\n        glBindVertexArray(vao2);\n            glDrawArrays(GL_TRIANGLES, 0, 3);\n        glBindVertexArray(0);\n\n    glUseProgram(0);\n\n    glfwPollEvents();\n    glfwSwapBuffers(window);\n}\n\n...\n</code></pre>\n"}, {"tags": ["c++", "api", "optimization", "initialization", "ampl"], "answers": [{"tags": [], "owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "is_accepted": true, "score": 1, "last_activity_date": 1469460415, "creation_date": 1469460415, "answer_id": 38571790, "question_id": 38485991, "link": "https://stackoverflow.com/questions/38485991/ampl-api-c-how-to-set-initial-guess-for-variables/38571790#38571790", "title": "AMPL API C++ - How to set initial guess for variables?", "body": "<p>To set an initial guess, you just need to assign values to variables with methods such as <code>Variable::setValue</code>.</p>\n"}], "owner": {"reputation": 339, "user_id": 1434693, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bb209eff018c97b0070f3168f08d2ab2?s=128&d=identicon&r=PG", "display_name": "Milan Jain", "link": "https://stackoverflow.com/users/1434693/milan-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 38571790, "answer_count": 1, "score": 1, "last_activity_date": 1469460415, "creation_date": 1469032179, "question_id": 38485991, "link": "https://stackoverflow.com/questions/38485991/ampl-api-c-how-to-set-initial-guess-for-variables", "title": "AMPL API C++ - How to set initial guess for variables?", "body": "<p>I am using AMPL API for C++ which takes AMPL mod file as input. I want to set initial guess for each variable in AMPL mode file, but I am not sure how to do that. Can anyone help me with that? </p>\n\n<p>Thanks in advance!!</p>\n"}, {"tags": ["c++", "eigen"], "answers": [{"tags": [], "owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 11, "last_activity_date": 1469033182, "creation_date": 1469033182, "answer_id": 38486309, "question_id": 38485794, "link": "https://stackoverflow.com/questions/38485794/element-wise-max-and-positive-part-in-eigen/38486309#38486309", "title": "Element-wise max and positive part in Eigen", "body": "<p>The answer is <a href=\"http://eigen.tuxfamily.org/dox/group__QuickRefPage.html#title6\" rel=\"noreferrer\">there</a>.</p>\n\n<p>You can either move to the <a href=\"http://eigen.tuxfamily.org/dox/group__TutorialArrayClass.html\" rel=\"noreferrer\">\"array\" world</a> and use max:</p>\n\n<pre><code>A.array().max(B.array())\n</code></pre>\n\n<p>or use cwiseMax:</p>\n\n<pre><code>A.cwiseMax(B)\n</code></pre>\n\n<p>In both cases, <code>B</code> can be either a <code>Matrix</code> or a scalar:</p>\n\n<pre><code>A = A.cwiseMax(0);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9313, "user_id": 1957265, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b616537ad7664d6f0d24c2b6ff098098?s=128&d=identicon&r=PG", "display_name": "kangshiyin", "link": "https://stackoverflow.com/users/1957265/kangshiyin"}, "is_accepted": false, "score": 3, "last_activity_date": 1469033211, "creation_date": 1469033211, "answer_id": 38486320, "question_id": 38485794, "link": "https://stackoverflow.com/questions/38485794/element-wise-max-and-positive-part-in-eigen/38486320#38486320", "title": "Element-wise max and positive part in Eigen", "body": "<p>I think what you are looking for is</p>\n\n<pre><code>mat1.cwiseMax(mat2);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>mat1.cwiseMax(0);\n</code></pre>\n\n<p>as shown in the document</p>\n\n<p><a href=\"http://eigen.tuxfamily.org/dox/classEigen_1_1MatrixBase.html#aa1a53029c0ee62fb8875ce3c12151eda\" rel=\"nofollow\">http://eigen.tuxfamily.org/dox/classEigen_1_1MatrixBase.html#aa1a53029c0ee62fb8875ce3c12151eda</a></p>\n\n<p>They also have an array interface.</p>\n\n<p><a href=\"http://eigen.tuxfamily.org/dox/classEigen_1_1ArrayBase.html#add2c757190d66c4d10d44b74c07a9e0f\" rel=\"nofollow\">http://eigen.tuxfamily.org/dox/classEigen_1_1ArrayBase.html#add2c757190d66c4d10d44b74c07a9e0f</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6182266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ryYLemu1DNs/AAAAAAAAAAI/AAAAAAAAAHs/QtZGlh2DBg0/photo.jpg?sz=128", "display_name": "Djordje Vukcevic", "link": "https://stackoverflow.com/users/6182266/djordje-vukcevic"}, "is_accepted": false, "score": 0, "last_activity_date": 1547472228, "last_edit_date": 1547472228, "creation_date": 1547419361, "answer_id": 54173895, "question_id": 38485794, "link": "https://stackoverflow.com/questions/38485794/element-wise-max-and-positive-part-in-eigen/54173895#54173895", "title": "Element-wise max and positive part in Eigen", "body": "<p>If you want to do mix/max comparison of a vector and a scalar/vector, in Eigen would be:</p>\n\n<ul>\n<li>For Max:</li>\n</ul>\n\n<pre><code>vector.cwiseMax(some_scalar); \nvector.cwiseMax(some_vector); \n\n</code></pre>\n\n<ul>\n<li>For Min:</li>\n</ul>\n\n<pre><code>vector.cwiseMin(some_scalar); \nvector.cwiseMin(some_vector);\n</code></pre>\n\n<ul>\n<li>For both at the same time, e.g. saturation function:</li>\n</ul>\n\n<pre><code>vector.cwiseMin(max_limit).cwiseMax(min_limit); \n\n</code></pre>\n\n<p>But if you want to perform the comparison using a matrix, I think you would need to perform the above operation/s for each row/column individually.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user674155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7300, "favorite_count": 0, "accepted_answer_id": 38486309, "answer_count": 3, "score": 3, "last_activity_date": 1547472228, "creation_date": 1469031555, "question_id": 38485794, "link": "https://stackoverflow.com/questions/38485794/element-wise-max-and-positive-part-in-eigen", "title": "Element-wise max and positive part in Eigen", "body": "<p>I would like to take the element-wise max of two vectors/matrices in Eigen. So far, I've written this code:</p>\n\n<pre><code>template &lt;typename S, typename T&gt;\nauto elemwise_max(const S &amp; A, const T &amp; B) {\n    return (A.array() &gt; B.array()).select(A, B); \n}\n</code></pre>\n\n<p>Is this correct, or is this there a better way of doing this?</p>\n\n<p>For the positive part (ie. <code>max(A, 0)</code>), I'm not sure how to proceed. Do I need to create two methods?</p>\n\n<pre><code>template &lt;typename S&gt;\nauto positive_part_matrix(const S &amp; A) {\n   auto zeros = S::Zero(A.rows(), A.cols());\n   return elemwise_max(A, zeros);\n}\n\ntemplate &lt;typename S&gt;\nauto positive_part_vec(const S &amp; A) {\n   auto zeros = S::Zero(A.size());\n   return elemwise_max(A, zeros);\n}\n</code></pre>\n\n<p>Ideally both of the above would just be called <code>positive_part</code>.</p>\n"}, {"tags": ["c++", "qt", "file", "qsharedpointer"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1469031995, "post_id": 38485764, "comment_id": 64373799, "body": "1) Please make a complete testcase. 2) OOM? That QFile should really be opened in unbuffered mode (and/or regularly flushed). 3) If you close the file, open it back and compare the saved contents, what do you see?"}, {"owner": {"reputation": 245, "user_id": 3388944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1d1369b30e58ebb62a40ac5832f98cf6?s=128&d=identicon&r=PG&f=1", "display_name": "FreddyKay", "link": "https://stackoverflow.com/users/3388944/freddykay"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1469032619, "post_id": 38485764, "comment_id": 64374161, "body": "I will provide a complete testcase shortly then. I tried to check whether the data is actually written via QDataStream::writeRawData . There was no error. I am closing the QFile and the error persists. I tried flushing the file. The error persists"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469032923, "post_id": 38485764, "comment_id": 64374313, "body": "Is the number of missing bytes repeatable? Even with different floating point values?  How do you determine the amount written? Do you close the file first?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469033167, "post_id": 38485764, "comment_id": 64374466, "body": "I observe that the missing data for 8000000 bytes is consistent with the data being written in 128k blocks and the last block being lost.  If QFile is adaptively changing the block size as the file grows, that <i>could</i> explain why the data lost is proportional to file size.  What happens if you write 8388608 bytes (8M) instead?"}, {"owner": {"reputation": 245, "user_id": 3388944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1d1369b30e58ebb62a40ac5832f98cf6?s=128&d=identicon&r=PG&f=1", "display_name": "FreddyKay", "link": "https://stackoverflow.com/users/3388944/freddykay"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469034004, "post_id": 38485764, "comment_id": 64374937, "body": "@MartinBonner If I attempt to write 8388608 bytes. the amount of bytes on disk are: 8372224. The number of missing bytes is repeatable. I do not quite get what you mean by &quot;different floating point values&quot;. I determine the written amount by two methods: 1. I am using ubuntus file properties and second I use octave to read the file and all the values for further analysis. Octave returns the same result, the elements written is lower, than I actually expect it to be."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1469040330, "post_id": 38485764, "comment_id": 64378672, "body": "Minimize, minimize, minimize! Is the problem related to your data at all? Does <code>QSharedPointer</code> matter? I doubt it. What if you ignore the data and just write zeroes i.e. <code>streamer &lt;&lt; (float)0.0</code>? Do you need to use a <code>QObject</code> and <code>QThread</code> explicitly - can&#39;t you just run the writing asynchronously via <code>QtConcurrent::run</code>? Your examples are far from minimal, and I can&#39;t reproduce any of it."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1469040424, "post_id": 38485764, "comment_id": 64378735, "body": "<code>blubber</code> and <code>blybber2</code> are not even remotely the same thing. The former uses correct data but fails to write it all to disk. The latter doesn&#39;t do any disk writing, it does what amounts to some pointer math and memcpys."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1469040538, "post_id": 38485764, "comment_id": 64378792, "body": "Are you sure that <code>blubb::foo</code> has returned? You can&#39;t look at the file before you are sure that <code>foo</code> is done."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1469040645, "post_id": 38485764, "comment_id": 64378856, "body": "Finally, your API is backwards: you should be passing a <code>QVector</code> by const reference. It was designed <i>precisely</i> as a shared array that&#39;s cheap to copy. Internally, it uses a shared data pointer. Your design is half-way between C and C++, it&#39;s horrible. But it&#39;s not the source of whatever problem you may have."}, {"owner": {"reputation": 245, "user_id": 3388944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1d1369b30e58ebb62a40ac5832f98cf6?s=128&d=identicon&r=PG&f=1", "display_name": "FreddyKay", "link": "https://stackoverflow.com/users/3388944/freddykay"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1469087727, "post_id": 38485764, "comment_id": 64396351, "body": "@KubaOber 1. I was asked to provide a testcase. I did, by providing the last code section above, that does essentially what I do. I probably could use QtConcurrent::run. Will investigate. For now QThread seemed simpler. 2. Sorry for the syntax errors, I had to write from the top of my head, as I did not have a IDE at that point yesterday anymore. Will correct it in a minute."}, {"owner": {"reputation": 245, "user_id": 3388944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1d1369b30e58ebb62a40ac5832f98cf6?s=128&d=identicon&r=PG&f=1", "display_name": "FreddyKay", "link": "https://stackoverflow.com/users/3388944/freddykay"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1469087947, "post_id": 38485764, "comment_id": 64396489, "body": "@KubaOber 3. I am sure blubb::foo returnes. I am sure that the for loop goes through all entries (0 -&gt; size -1). I am sure to close the QFile after the comment by Martin Bonner. I am sure QDataStream does not give an error (tested it via: QDataStream::WriteRawData and checking for errors). 4. Do I understand correctly, that you mean to tell me to use QVector from the get go, without bothering with the float* fields? The only reason I use the pointer field, is because I am working with hardware in the loop where the hardware driver is giving me a pointer field."}], "owner": {"reputation": 245, "user_id": 3388944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1d1369b30e58ebb62a40ac5832f98cf6?s=128&d=identicon&r=PG&f=1", "display_name": "FreddyKay", "link": "https://stackoverflow.com/users/3388944/freddykay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469089895, "creation_date": 1469031465, "last_edit_date": 1469089895, "question_id": 38485764, "link": "https://stackoverflow.com/questions/38485764/wriring-binary-data-from-qsharedpointerfloat-gives-unexpected-file-size", "title": "Wriring binary data from QSharedPointer&lt;float&gt; gives unexpected file size", "body": "<p>My issue at the moment is essentially that I can't seem to be able to write all the data that I want to disk.</p>\n\n<p>What I am trying to do is saving float values in binary format to disk, one after the other. There can be any even number of values between 1.000.000 and 400.000.000 float values. Internally the data is stored in QSharedPointer. I am using the same data in different functions, in different threads. I am making sure, that the access is not changing the values in the field.</p>\n\n<p>What I have is similar to this:</p>\n\n<pre><code>class blubb : public QObject\n{\n    Q_OBJECT\n public slots:\n    void foo(QSharedPointer&lt;float&gt; data, size_t size)\n    {\n        QFile saveFile(\"ExampleFileName\");\n        QDataStream streamer;\n\n        saveFile.open(QIODevice::WriteOnly);\n\n        streamer.setDevice(&amp;saveFile);\n        streamer.setFloatingPointPrecision(QDataStream::SinglePrecision);\n        streamer.setByteOrder(QDataStream::BigEndian);\n\n        qDebug() &lt;&lt; \"Now writing: \" &lt;&lt; size &lt;&lt; \" elements.\" &lt;&lt; endl;\n        qDebug() &lt;&lt; \"With: \" &lt;&lt; sizeof (*data.data()) &lt;&lt; \" byte per entry.\" &lt;&lt; endl;\n        qDebug() &lt;&lt; \"Total space: \" &lt;&lt; size * sizeof(*data.data()) &lt;&lt; \" bytes.\";        \n\n\n        for (size_t i = 0; i &lt; size; i++)\n        {\n            streamer &lt;&lt; (data.data())[i];\n        }\n\n        qInfo() &lt;&lt; \"Writing done of \" &lt;&lt; size &lt;&lt; \" float values of \"\n                &lt;&lt; sizeof (*data.data()) &lt;&lt; \" bytes per entry, total written space: \"\n                &lt;&lt; size * sizeof(*data.data());\n    }\n};\n</code></pre>\n\n<p>If I have for example 4.000.000 float value in data I get all things as expected: 4.000.000 elements to write, 4 bytes per element and a total of 16.000.000 bytes to write. But the actual amount I find written is: 15.990.784 bytes.</p>\n\n<p>If I try with a total of 2.000.000 elements in data the amount of bytes written is: 7.995.392 instead of 8.000.000. This is consistent and repeatable. The amount of bytes missing is proportional to the amount of entries I have in data.</p>\n\n<p>Fun fact: I have another function in another thread that uses the same QSharedPointer to do this:</p>\n\n<pre><code>class blubber2 : public QObject\n{\n    Q_OBJECT\npublic slots:\n    void fooOtherThread(QSharedPointer&lt;float&gt; data, size_t size)\n    {\n        if ((size % 2) != 0)\n        {\n            std::invalid_argument ex(\"Data is not evenly sized.\");\n            throw ex;\n        }\n\n        QVector&lt;float&gt; vec1;\n        QVector&lt;float&gt; vec2;\n\n        bool toggle = false;\n\n        std::partition_copy(data.data(),\n                            data.data()+size,\n                            std::back_inserter(vec1),\n                            std::back_inserter(vec2),\n                            [&amp;toggle](int)\n        {\n            return toggle = !toggle;\n        });\n\n    }\n};\n</code></pre>\n\n<p>The amount of elements in vec1 and vec2 are as expected 2.000.000 if I have 4.000.000 entries in data. </p>\n\n<p>So what am I doing wrong in the first function? Why am I getting a wrong amount of bytes written to file?</p>\n\n<p>EDIT:// This should start the whole thing:</p>\n\n<pre><code>class Starter : public QObject\n{\nsignals: \n    void startSignal(QSharedPointer&lt;float&gt; data, size_t size);\n\npublic slots:\n    void helperStart()\n    {\n        size_t size = 2000000;\n        QSharedPointer&lt;float&gt; data(new float[size]);\n        emit startSignal(data, size);\n    }\n\n};\nint main (int argc, char ** argv)\n{\n    QCoreApplication app(argc, argv);\n    qRegisterMetaType&lt;QSharedPointer&lt;float&gt;&gt;(\"QSharedPointer&lt;float&gt;\");\n    qRegisterMetaType&lt;size_t&gt;(\"size_t\");\n\n    blubb blubbInstance;\n    blubber2 blubberInstance;\n\n    QThread blubbThread;\n    QThread blubberThread;\n\n    blubbInstance.moveToThread(&amp;blubbThread);\n    blubberInstance.moveToThread(&amp;blubberThread);\n\n    blubbThread.start();\n    blubberThread.start();\n\n\n    Starter starterInstance;\n    QTimer timer;\n    timer.setSingleShot(500);\n    QObject::connect(&amp;timer, &amp;QTimer::timeout, &amp;starterInstance, &amp;Starter::helperStart);\n\n    QObject::connect(&amp;starterInstance, &amp;Starter::startSignal, &amp;blubbInstance, &amp;blubb::foo);\n    QObject::connect(&amp;starterInstance, &amp;Starter::startSignal, &amp;blubberInstance, &amp;blubber2::fooOtherThread);\n\n    timer.start();\n    app.exec();        \n}\n</code></pre>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1469030579, "post_id": 38485448, "comment_id": 64372905, "body": "Use <code>std::map</code>.  It was designed for dictionary usage.  The <code>std::map</code> also uses <code>std::pair</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469030640, "post_id": 38485448, "comment_id": 64372958, "body": "For God&#39;s sake use <code>typedef</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1469030725, "post_id": 38485448, "comment_id": 64373018, "body": "@Slava For $DEITY&#39;s sake, use <code>using</code> ;)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469030765, "post_id": 38485448, "comment_id": 64373063, "body": "@JesperJuhl whatever way, but avoid code duplicate"}, {"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "edited": false, "score": 0, "creation_date": 1469030781, "post_id": 38485448, "comment_id": 64373071, "body": "what Slava wanted to say?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469030893, "post_id": 38485448, "comment_id": 64373149, "body": "@user6575913 Slava wanted to say that creating type alias for <code>std::pair&lt;std::string,std::string&gt;</code> not only makes your code easier to change but also easier to read."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469031012, "post_id": 38485448, "comment_id": 64373228, "body": "As for your question you can use <code>std::lower_bound</code> but it is unclear why you want to reimplement <code>std::map</code>"}, {"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "edited": false, "score": 0, "creation_date": 1469031172, "post_id": 38485448, "comment_id": 64373337, "body": "a problem ask me to do so and i want to do it:))"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1469033387, "post_id": 38485448, "comment_id": 64374563, "body": "and there is yet <a href=\"http://www.cplusplus.com/reference/algorithm/binary_search/\" rel=\"nofollow noreferrer\">std::binary_search</a> - requires the range of the iterators being sorted, but you did so already, so fine..."}, {"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "edited": false, "score": 0, "creation_date": 1469033611, "post_id": 38485448, "comment_id": 64374700, "body": "but binary_search just return true or false not the index or the element. I want the element because the problems says in most efficient way using stl function and pairs. I found a method using find_if but i don&#39;t know if it is efficient"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469034561, "post_id": 38485448, "comment_id": 64375277, "body": "@user6575913 <code>std::find</code> in this case is definatly less efficient as it does linear search."}, {"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "edited": false, "score": 0, "creation_date": 1469035237, "post_id": 38485448, "comment_id": 64375645, "body": "but is there a method that doesn&#39;t take O(N) where n is the number of key?(i am referring to pairs and methods associated with pairs in STL not map)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469045501, "post_id": 38485448, "comment_id": 64381589, "body": "@user6575913 Yes there is a method and I have already provided it for you in my answer. Can you read it?"}, {"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "edited": false, "score": 0, "creation_date": 1469047515, "post_id": 38485448, "comment_id": 64382678, "body": "but the method it is correct? i can&#39;t see a call to that function like this? are you not missed an element or mismatch compare with value?"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "edited": false, "score": 0, "creation_date": 1469030832, "post_id": 38485517, "comment_id": 64373111, "body": "but it can be done with pairs? or i have to split like you say?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1469031032, "post_id": 38485517, "comment_id": 64373238, "body": "Sure you <i>could</i> implement a solution with <code>pair</code>, but it&#39;s most likely to be more code, less readable and slower than just doing the straight-forward thing and use a <code>map</code>."}, {"owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "edited": false, "score": 0, "creation_date": 1469031262, "post_id": 38485517, "comment_id": 64373391, "body": "and then when i use pairs and when i use map? or which one of this is better?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1469032942, "post_id": 38485517, "comment_id": 64374327, "body": "A <code>std::map</code> uses <code>std::pair</code>.  The map data structure is designed for fast lookups with [key, value] pairs.  Many of the <code>std::map</code> interfaces hide the underlying <code>std::pair</code> data structure."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 5, "last_activity_date": 1469030702, "creation_date": 1469030702, "answer_id": 38485517, "question_id": 38485448, "link": "https://stackoverflow.com/questions/38485448/stl-pairs-and-binary-search/38485517#38485517", "title": "stl pairs and binary search", "body": "<p>Use <code>std::map</code>.  A map is often referred to as an <em>associated array</em> or <em>dictionary</em>.  </p>\n\n<p>You may want to break up the key and values and use a <em>trie</em> data structure.  The <em>trie</em> allows for a more efficient lookup (by word length).  </p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1469045554, "last_edit_date": 1469045554, "creation_date": 1469031672, "answer_id": 38485833, "question_id": 38485448, "link": "https://stackoverflow.com/questions/38485448/stl-pairs-and-binary-search/38485833#38485833", "title": "stl pairs and binary search", "body": "<p>You can implement binary search using <code>std::equal_range</code>:</p>\n\n<pre><code>string searchelem;\ncin&gt;&gt;searchelem;\nauto p = std::equal_range( a,a+dimension,compare);\nif( p.first == p.second ) {\n    // not found\nelse\n    std::cout &lt;&lt; \"for \" &lt;&lt; searchelem &lt;&lt; \" found \" &lt;&lt; p.first-&gt;second &lt;&lt; std::endl;\n</code></pre>\n\n<p>you can use <code>std::lower_bound</code> as well, but then you need to check if key is equal, as it returns first element which is not less than key.</p>\n\n<p>Your code though may have issue (unlike <code>std::map</code>) - it keeps duplicates if they happen to be in the file. You may remove them using <code>std::remove_if</code> but it is simpler and cleaner just to use <code>std::map</code> or <code>std::unordered_map</code></p>\n"}], "owner": {"reputation": 173, "user_id": 4178517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003101255168/picture?type=large", "display_name": "Otniel Mercea", "link": "https://stackoverflow.com/users/4178517/otniel-mercea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 38485517, "answer_count": 2, "score": 0, "last_activity_date": 1469641918, "creation_date": 1469030509, "last_edit_date": 1469641918, "question_id": 38485448, "link": "https://stackoverflow.com/questions/38485448/stl-pairs-and-binary-search", "title": "stl pairs and binary search", "body": "<p>I want to make a dictionary program and my dictionary is implemented with pairs. I want to search in my array for a term and return a description all of this using stl function. I made this:</p>\n\n<pre><code>#include&lt;iostream&gt; \n#include&lt;fstream&gt;\n#include&lt;algorithm&gt;\n#include&lt;string.h&gt;\nusing namespace std;\n\nbool compare(pair&lt;string,string&gt;a,pair&lt;string,string&gt;b) {\n    return a.first&lt;b.first;\n}\n\nint main() {\n    pair&lt;string,string&gt; a[100]=pair&lt;string,string&gt;();\n    int dimension=0;\n    ifstream f(\"dictionar.in\");\n    string name,description;\n    while(f&gt;&gt;name) {\n        getline(f,description);\n        a[dimension]=make_pair(name,description);\n        dimension++;\n    }\n    for(int i=0;i&lt;dimension;i++)\n        cout&lt;&lt;a[i].first&lt;&lt;\" \"&lt;&lt;a[i].second&lt;&lt;endl;\n\n    sort(a,a+dimension,compare);\n    cout&lt;&lt;endl;\n\n    for(int i=0;i&lt;dimension;i++)\n        cout&lt;&lt;a[i].first&lt;&lt;\" \"&lt;&lt;a[i].second&lt;&lt;endl;\n    string searchelem;\n\n    cin&gt;&gt;searchelem;\n}\n</code></pre>\n\n<p>I want to use 'searchelement' to find if in the pair array there is an element equal with searchelement and if there is return the index. What function should i use?</p>\n"}, {"tags": ["c++", "inheritance", "iterator"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1469030799, "post_id": 38485427, "comment_id": 64373087, "body": "What is the point of your design?  This looks like the design of someone used to C#/Java with its hatred of value types and love of interfaces writing C++ code."}, {"owner": {"reputation": 59, "user_id": 6431798, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744106532497154/picture?type=large", "display_name": "VikAsh KuMar", "link": "https://stackoverflow.com/users/6431798/vikash-kumar"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1469030916, "post_id": 38485427, "comment_id": 64373159, "body": "i want to design an ArrayList class and LinkedList class by using List interface ."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 4, "creation_date": 1469031041, "post_id": 38485427, "comment_id": 64373249, "body": "So, the point of your design is your design.  That isn&#39;t a reason to have a design.  A reason to do a design is what the design is <i>used</i> for."}, {"owner": {"reputation": 59, "user_id": 6431798, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744106532497154/picture?type=large", "display_name": "VikAsh KuMar", "link": "https://stackoverflow.com/users/6431798/vikash-kumar"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1469031504, "post_id": 38485427, "comment_id": 64373532, "body": "My idea for this design is to use iterator in following ways .  int main(){ \tArrayList ob; \tList <i>ptr = &amp;ob; \tList::iterator it = ptr-&gt;begin(); \t /</i> \t\tIterate Array List \t<i>/ \t \tLinkedList ob2; \tList *ptr2 = &amp;ob2; \tList::iterator it2 = ptr2-&gt;begin(); \t/</i> \t\tIterate Linked List \t*/ \t \treturn 0; }"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1469031559, "post_id": 38485427, "comment_id": 64373563, "body": "Standard library containers do not use inheritance based polymorphism. Ignore this fact to your own peril."}, {"owner": {"reputation": 59, "user_id": 6431798, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744106532497154/picture?type=large", "display_name": "VikAsh KuMar", "link": "https://stackoverflow.com/users/6431798/vikash-kumar"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1469033455, "post_id": 38485427, "comment_id": 64374607, "body": "So , @n.m. i have to use Solution 1 as i have mentioned in this post ?"}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 1, "creation_date": 1469033652, "post_id": 38485427, "comment_id": 64374728, "body": "No, you can use polymorphism to do it if you want, but you need to be aware that that&#39;s not how the stl works if you want to use your classes with the stl"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1469034398, "post_id": 38485427, "comment_id": 64375200, "body": "Do not use runtime polymorphism to build an hierarchy of container types. In other words, no abstract List that begets ArrayList and LinkedList. Such a structure just makes no sense. Once you get rid of this, hierarchy of iterators becames a non-issue."}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1469035218, "post_id": 38485427, "comment_id": 64375633, "body": "Its not really a hierarchy of container types its just giving a couple of types a common base interface. It does make sense and it does work. It&#39;s basically what happens with IEnumerator / IEnumerable in C#. And the language difference doesn&#39;t change whether the concept makes sense."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1469079538, "post_id": 38485427, "comment_id": 64391634, "body": "@ROX I didn&#39;t say it cannot work, I said it makes no sense, and this does depend on the language. C# uses a completely different object model from C++. You can make C++ behave almost like C#, but should you?"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6431798, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744106532497154/picture?type=large", "display_name": "VikAsh KuMar", "link": "https://stackoverflow.com/users/6431798/vikash-kumar"}, "edited": false, "score": 0, "creation_date": 1469033399, "post_id": 38485688, "comment_id": 64374570, "body": "After deriving ListIterator to ArrayListIterator gives same Error ."}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1469033542, "post_id": 38485688, "comment_id": 64374659, "body": "as lorro points out, you&#39;d also need begin to return by pointer (or reference) so that it would work polymorphically."}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1469034072, "post_id": 38485688, "comment_id": 64374992, "body": "-1 why? The error in message in the original post is caused by the reason as explained. Would take a long time to go into whether the whole idea is sensible."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1469037806, "post_id": 38485688, "comment_id": 64377190, "body": "I wasn&#39;t the -1, but your answer does not solve the OP&#39;s problem.  The code still fails to compile after the OP makes the change you suggested.  Fold the pointer suggestion in and you are getting somewhere, but that is not in your answer.  And that means you are telling the OP to manually manage pointer-owned resources, which by itself might be worth a -1!"}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1469041417, "post_id": 38485688, "comment_id": 64379284, "body": "Yes, my answer fails in the context of implementing the std collections interface in that begin doesn&#39;t return by pointer/reference in a standard collection, I was going to edit to suggest returning an object using non-virtual interface pattern to wrap the container-specific iteration implementation, but you beat me to that."}], "tags": [], "owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "is_accepted": false, "score": -1, "last_activity_date": 1469031214, "creation_date": 1469031214, "answer_id": 38485688, "question_id": 38485427, "link": "https://stackoverflow.com/questions/38485427/how-to-implement-iterator-in-derived-class-in-c/38485688#38485688", "title": "how to Implement iterator in derived class in c++?", "body": "<p>you need ArrayListIterator to derive from ListIterator.</p>\n\n<p>The types returned by begin in the derived classes are not derived from the type returned by begin in the base List class.</p>\n\n<p>That is why the error says they are not covariant.</p>\n"}, {"comments": [{"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1469034370, "post_id": 38486460, "comment_id": 64375178, "body": "As concept iteration and polymorphism are not incompatible. It&#39;s true that the stl does not work that way but to assert that idea need to throw out polymorphism is incorrect. Its often useful to be able to code against a collection that you know will iterator over a certain type without having to know whether the collection type is a vector / list / array whatever. If these iterators are for use in stl algorithms (which OP doesn&#39;t state) then that&#39;s different."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1469035825, "post_id": 38486460, "comment_id": 64375968, "body": "@ROX C++ standard iterators are value types.  Value types are not (inheritance based) polymorphic.  If the OP is using the term &quot;iterator&quot; to mean something different than that &quot;iterators&quot; mean in C++, I&#39;d be surprised, and advise the OP to change their use of terms.  I described how to do polymorphic value types, which to match the C++ standard &quot;iteration&quot; concept you must do.  This includes <code>for(:)</code> loop support, beyond the <code>std</code> algorithms."}, {"owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "edited": false, "score": 0, "creation_date": 1469099258, "post_id": 38486460, "comment_id": 64403827, "body": "I was thinking iterators as a pattern - the &quot;about&quot; on SOs iterator tag covers that pretty well. Do you have a specific suggestion on how one might &quot;change their use of terms&quot; when talking about iterator pattern but not necessarily specifically one which follows the stl design?"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": -1, "last_activity_date": 1469038231, "last_edit_date": 1469038231, "creation_date": 1469033686, "answer_id": 38486460, "question_id": 38485427, "link": "https://stackoverflow.com/questions/38485427/how-to-implement-iterator-in-derived-class-in-c/38486460#38486460", "title": "how to Implement iterator in derived class in c++?", "body": "<p>You need to throw out inheritance based polymorphism.  C++ iteration in the standard library and in <code>for(:)</code> loops assumes value-based iterators, and inheritance based polymorphism doesn't work with value-based iterators.</p>\n\n<p>Instead of inheritance-based polymorphism, you should use type-erasure based polymorphism.  This requires a bit of boilerplate, because the need abstractly deal with an iterable range was found to be not that common in C++ and often a serious performance hit.</p>\n\n<p>But I'll show you how.</p>\n\n<p>Type erasure based polymorphism is like <code>std::function</code>.</p>\n\n<p>One concrete approach to type-erased polymorphism:</p>\n\n<p>You determine what interface you want to support.  Call this your \"type erasure target\".  Your type erasure target is <em>not</em> a class with <code>virtual</code> and <code>=0</code>, but rather a set of functions, methods and operations you want to support, and their signature, and a description of what each does.</p>\n\n<p>Then you write a value class that <em>implements</em> that interface (again, no inheritance) that contains a <code>pImpl</code> (see <code>pImpl</code> pattern) that it dispatches its operations to (the <code>pImpl</code> need not match the same interface, it just needs primitives that you can implement the operations in terms of.  Being minimal here is worthwhile).</p>\n\n<p>The <code>pImpl</code> type <em>does</em> have <code>virtual</code> methods and <code>=0</code> abstract methods.</p>\n\n<p>Then you write a constructor or factory function that takes an object that supports the interface you want to, and generates a concrete instance of the <code>pImpl</code>, then wraps the value class around it.</p>\n\n<p>Suppose the type erasure target was \"print to a stream\".</p>\n\n<p>My type erasure target is <code>std::ostream&amp; &lt;&lt; foo</code> works, and prints stuff.</p>\n\n<pre><code>struct printable_view {\n  // dispatch to pimpl:\n  friend std::ostream&amp; operator&lt;&lt;( std::ostream&amp; o, printable_view const&amp; p ) {\n    p-&gt;print(o);\n    return o;\n  }\n  // pimpl:\nprivate:\n  struct printable_view_impl {\n    virtual ~printable_view_impl() {}\n    virtual void print(std::ostream&amp; o) = 0;\n  };\n  std::unique_ptr&lt;printable_view_impl&gt; pImpl;\n\nprivate:\n  template&lt;class T&gt;\n  struct printer:printable_view_impl {\n    printer( T const* p ):ptr(p) {}\n    T const* ptr; // just a view, no ownership\n    virtual void print( std::ostream&amp; o ) final override {\n      o &lt;&lt; *ptr;\n    }\n  };\npublic:\n  // create a pimpl:\n  printable_view(printable_view&amp;&amp;)=default;\n  printable_view(printable_view const&amp;)=delete;\n  printable_view()=delete;\n  template&lt;class T&gt;\n  printable_view( T const&amp; t ):\n    pImpl( std::make_unique&lt;printer&lt;T&gt;&gt;( std::addressof(t) ) )\n  {}\n};\n</code></pre>\n\n<p>which may have typos, but you get the idea.</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_54_0/libs/range/doc/html/range/reference/ranges/any_range.html\" rel=\"nofollow\">Boost has a generic iterator and range</a> that your base class can return, if you want to find a sample implementation.</p>\n\n<p>There are significant performance hits to using type erasure based iteration: you'll end up with C++ code that is as slow as C#/Java code.</p>\n\n<p>In your case you need to take <em>every</em> thing that <code>iterator</code> requires (copy, increment, move, dereference, etc) as mandated by the standard, and erase it like I did copy.  In this case it isn't a view, so your impl impl will likely hold a <code>T</code> not a <code>T*</code>.</p>\n\n<p>Here is a really simple toy <code>for(:)</code> supporing toy pseudo-iterator that will permit your <code>List</code> base to be used in <code>for(:)</code> loops.</p>\n\n<pre><code>template&lt;class T&gt;\nstruct any_iterator_sorta {\n  T operator*()const { return pImpl-&gt;get(); }\n  void operator++() { pImpl-&gt;next(); }\n  any_iterator_sorta(any_iterator_sorta const&amp; o):\n    any_iterator_sorta( o.pImpl?any_iterator_sorta(o.pImpl-&gt;clone()):any_iterator_sorta() )\n  {}\n  friend bool operator==(any_iterator_sorta const&amp; lhs, any_iterator_sorta const&amp; rhs ) {\n    if (!lhs.pImpl || ! rhs.pImpl)\n      return lhs.pImpl == rhs.pImpl;\n    return lhs.pImpl-&gt;equals( *rhs.pImpl );\n  }\n  friend bool operator!=(any_iterator_sorta const&amp; lhs, any_iterator_sorta const&amp; rhs ) {\n    return !(lhs==rhs);\n  }\n  any_iterator_sorta(any_iterator_sorta&amp;&amp; o) = default;\n  any_iterator_sorta() = default;\n\n  any_iterator_sorta&amp; operator=(any_iterator_sorta const&amp; o) {\n    any_iterator_sorta tmp=o;\n    std::swap(tmp.pImpl, o.pImpl);\n    return *this;\n  }\n  any_iterator_sorta&amp; operator=(any_iterator_sorta&amp;&amp; o) = default;\nprivate:\n  struct pimpl {\n    virtual ~pimpl() {}\n    virtual void next() = 0;\n    virtual T get() const = 0;\n    virtual std::unique_ptr&lt; pimpl &gt; clone() const = 0;\n    virtual bool equals( pimpl const&amp; rhs ) const = 0;\n  };\n  std::unique_ptr&lt; pimpl &gt; pImpl;\n  template&lt;class It&gt;\n  struct pimpl_impl:pimpl {\n    It it;\n    virtual void next() final override { ++it; }\n    virtual T get() const final override { return *it; }\n    virtual std::unique_ptr&lt; pimpl &gt; clone() const final override {\n      return std::make_unique&lt;pimpl_impl&gt;( it );\n    }\n    virtual bool equals( pimpl const&amp; rhs ) const final override {\n      if (auto* r = dynamic_cast&lt;pimpl_impl const*&gt;(&amp;rhs))\n        return it == r-&gt;it;\n      return false;\n    }\n    pimpl_impl( It in ):it(std::move(in)) {}\n  };\n  any_iterator_sorta( std::unique_ptr&lt; pimpl &gt; pin ):pImpl(std::move(pin)) {}\npublic:\n  template&lt;class It,\n    std::enable_if_t&lt; !std::is_same&lt;It, any_iterator_sorta&gt;{}, int&gt;* =nullptr\n  &gt;\n  any_iterator_sorta( It it ):\n    pImpl( std::make_unique&lt;pimpl_impl&lt;It&gt;&gt;( std::move(it) ) )\n  {}       \n};\n</code></pre>\n\n<p>If your interface class returned an <code>any_iterator_sorta&lt;T&gt;</code> where <code>T</code> is the type you iterate over, and the child classes did the same (but returned a class that supports <code>++</code>, <code>*</code>, copy construct and <code>==</code>), it would behave polymorphically with values.</p>\n\n<p>The <code>any_iterator_sorta</code> is an C++ pseudo-iterator that is good enough to work in <code>for(:)</code> loops, but does not satisfy all the axioms of a real C++ iterator as mandated by the standard.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/8d48cab5493917e4\" rel=\"nofollow\">live example</a></p>\n\n<p>Test case:</p>\n\n<pre><code>void test( any_iterator_sorta&lt;int&gt; begin, any_iterator_sorta&lt;int&gt; end )\n{\n  for (auto it = begin; it != end; ++it) {\n    std::cout &lt;&lt; *it &lt;&lt; '\\n';\n  }\n}\n\nstd::vector&lt;int&gt; v{1,2,3};\nstd::list&lt;int&gt; l{10,11};\n\ntest( begin(v), end(v) );\ntest( begin(l), end(l) );\n</code></pre>\n\n<p>same code, iterating using two different iterator implementations.</p>\n\n<p>To be concrete, assuming your code iterates over <code>int</code>s:</p>\n\n<pre><code>    virtual any_iterator_sorta&lt;int&gt; begin() = 0;\n    virtual any_iterator_sorta&lt;int&gt; end() = 0;\n</code></pre>\n\n<p>in <code>List</code>.  Then in <code>ArrayList</code>:</p>\n\n<pre><code>   any_iterator_sorta&lt;int&gt; begin() final override {\n     return ArrayListIterator{};\n   }\n   any_iterator_sorta&lt;int&gt; end() final override {\n     return ArrayListIterator{};\n   }\n</code></pre>\n\n<p>finally, implement <code>ArrayListIterator</code>:</p>\n\n<pre><code>   class ArrayListIterator{\n\n   public:\n     int operator*() const { return 0; }\n     bool operator==( ArrayListIterator const&amp; o ){return true;}\n     void operator++() { /* do nothing for now */ }\n   };\n</code></pre>\n\n<p>the above just contains \"stub\" versions of the 4 required operations (copy construct, <code>==</code>, <code>++</code> and unary <code>*</code>), so the <code>ArrayList</code> will appear \"empty\" to C++ <code>for(:)</code> loops.</p>\n"}], "owner": {"reputation": 59, "user_id": 6431798, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744106532497154/picture?type=large", "display_name": "VikAsh KuMar", "link": "https://stackoverflow.com/users/6431798/vikash-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 620, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469038231, "creation_date": 1469030456, "last_edit_date": 1495540372, "question_id": 38485427, "link": "https://stackoverflow.com/questions/38485427/how-to-implement-iterator-in-derived-class-in-c", "title": "how to Implement iterator in derived class in c++?", "body": "<pre><code>class List{\n\n    public:\n        class ListIterator{\n\n            public:\n\n        };\n        typedef ListIterator iterator;\n        virtual iterator begin() = 0;\n};\nclass ArrayList:public List{\n    public:\n        class ArrayListIterator{\n\n            public:\n\n        };\n        typedef ArrayListIterator iterator;\n        iterator begin(){\n\n        }\n};\nclass LinkedList:public List{\n\n    public:\n        class LinkedListIterator{\n\n            public:\n\n        };\n        typedef LinkedListIterator iterator;\n        iterator begin(){\n\n        }\n};\n</code></pre>\n\n<p>I want to implement iterator in this way . But compiler showing Error </p>\n\n<pre><code>[Error] invalid covariant return type for 'virtual ArrayList::iterator ArrayList::begin()'\n[Error] overriding 'virtual List::iterator List::begin()'\n</code></pre>\n\n<p>Same for LinkedList.</p>\n\n<p>As i search on stack overflow for same problem and i get this solution</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2191572/iterator-for-custom-container-with-derived-classes\">Iterator for custom container with derived classes</a>\nand i get two solutions</p>\n\n<pre><code>1 . implement iterator without using runtime polymorphism\n2 . implement seperator iterator class.\n</code></pre>\n\n<p>But i want to know that is there any possible way so that iterator will be inner class of ArrayList , LinkedList and List  ??</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1469030416, "post_id": 38485379, "comment_id": 64372785, "body": "Undefined behaviour. You are de-referencing an uninitialized pointer."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 3, "creation_date": 1469030506, "post_id": 38485379, "comment_id": 64372848, "body": "You never construct an <code>A</code> object."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1469030735, "post_id": 38485379, "comment_id": 64373028, "body": "Just because you seemingly <i>can</i> do something, doesn&#39;t mean you <b>should</b>. <code>why its not giving error</code> I don&#39;t know what compiler you&#39;re using, but turn on warnings, as you always should, e.g. g++: <code>main.cpp:14:8: warning: &#39;p&#39; is used uninitialized in this function [-Wuninitialized]</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1469031244, "post_id": 38485379, "comment_id": 64373379, "body": "&quot;why its not giving error&quot;. A C++ implementation is not required to diagnose all errors. Your error may have better chances of getting found if you increase the warning level, but many error will still go undiagnosed. It&#39;s your responsibility to avoid them."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1469033489, "last_edit_date": 1469033489, "creation_date": 1469031933, "answer_id": 38485917, "question_id": 38485379, "link": "https://stackoverflow.com/questions/38485379/what-happens-in-the-background-when-we-declare-a-pointer-to-an-object-of-a-class/38485917#38485917", "title": "What happens in the background when we declare a pointer to an object of a class having member variable as reference", "body": "<p>You can initialize a reference only once. This is not different whether it is a member of a class or not:</p>\n\n<pre><code>int a;\nint&amp; b = a;  // &lt;- initialize the reference\nint&amp; c;      // NOT OK, references have to be initialized to reference something\n</code></pre>\n\n<p>Any later assignment does not change the variable the reference is referencing, but it changes the value of that variable:</p>\n\n<pre><code>int c = 3;\nb = c;      // now a==3 but b is still a reference to a\n</code></pre>\n\n<p>Please note that your code has some serious problems that are not actually related to your question. It is already mentioned in comments, but for the sake of completeness: You never create an object and you dereference an invalid pointer leading to undefinded behaviour.</p>\n\n<p><strong>PS</strong>: I was reading the question again and realized that the problems in your code actually are related to the question.</p>\n\n<blockquote>\n  <p>What happens in the background when we declare a pointer to an object of a class having member variable as reference?</p>\n</blockquote>\n\n<p>The answer to this is rather simple and short: Nothing happens in the background. When you declare a pointer you really just declared a pointer. Having a pointer declared relates to creating an object as having a piece of paper where you could write the adress of a house to building a house. But if you merely declare a pointer you neither know the adress nor did you build the house.</p>\n\n<p>Anyhow when I look at your code I can only suggest you to stay away from dynamic allocation and instead simply do this:</p>\n\n<pre><code>int main(){\n    int a,b;\n    A p = A(a,b);\n    p.a = 100;\n    p.b = 200;\n    cout&lt;&lt;\"a:\"&lt;&lt;a&lt;&lt; \"b:\"&lt;&lt;b&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 3172690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6de81ea5397f901a3f6902920cf1566f?s=128&d=identicon&r=PG&f=1", "display_name": "Uttam", "link": "https://stackoverflow.com/users/3172690/uttam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1469033489, "creation_date": 1469030346, "question_id": 38485379, "link": "https://stackoverflow.com/questions/38485379/what-happens-in-the-background-when-we-declare-a-pointer-to-an-object-of-a-class", "title": "What happens in the background when we declare a pointer to an object of a class having member variable as reference", "body": "<p>I was going through reference variable concepts and found that member variables of a class declared as reference must be initialised in the constructor using initialiser list. but in the folling code i am declaring a pointer to the class and assigning value later to the reference varibales. Can anyone explain me whats happening in the background. why its not giving error as I am not intitialising the member reference variables.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass A\n{\n    public:\n        int &amp;a;\n        int &amp;b;\n        A(int &amp;a, int &amp;b):a(a),b(b){}\n};\n\nint main(){\n    A *p;\n    p-&gt;a = 100;\n    p-&gt;b = 200;\n    cout&lt;&lt;\"a:\"&lt;&lt;p-&gt;a&lt;&lt; \"b:\"&lt;&lt;p-&gt;b&lt;&lt;endl;\n    return 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "eclipse", "eclipse-cdt"], "answers": [{"tags": [], "owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "is_accepted": false, "score": 0, "last_activity_date": 1484248777, "creation_date": 1484248777, "answer_id": 41621231, "question_id": 38485291, "link": "https://stackoverflow.com/questions/38485291/eclipse-cdt-sorting-src-implementation-based-on-the-class-interface-c/41621231#41621231", "title": "Eclipse cdt, sorting src implementation based on the class interface C++", "body": "<p>There is no current way to do this.</p>\n\n<p>Feature requests are welcome and can be filed in <a href=\"https://bugs.eclipse.org/bugs/enter_bug.cgi?product=CDT\" rel=\"nofollow noreferrer\">CDT's bug tracker</a>.</p>\n"}], "owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484248777, "creation_date": 1469030107, "question_id": 38485291, "link": "https://stackoverflow.com/questions/38485291/eclipse-cdt-sorting-src-implementation-based-on-the-class-interface-c", "title": "Eclipse cdt, sorting src implementation based on the class interface C++", "body": "<p>If I have a class like:</p>\n\n<pre><code>//sample.h\nclass A {\npublic:\n   void method1();\n   void method2();\n};\n</code></pre>\n\n<p>and the implementation is like:</p>\n\n<pre><code>//sample.cc\nvoid A::method2() {...}\nvoid A::method1() {...}\n</code></pre>\n\n<p>Is there a way/shortcut to sort the implementations following the declarion in the class? (in the class declaration the order is method1, method2, while in the src the order is inverted).</p>\n"}, {"tags": ["c++", "qt", "opengl"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1469032170, "post_id": 38485089, "comment_id": 64373917, "body": "Which OS? Which Qt version?"}, {"owner": {"reputation": 70, "user_id": 6560758, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f160444c581fc9d047a7ecf7450bc3c3?s=128&d=identicon&r=PG&f=1", "display_name": "Lauriane.C", "link": "https://stackoverflow.com/users/6560758/lauriane-c"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1469090249, "post_id": 38485089, "comment_id": 64398010, "body": "Ubuntu and Qt 5.6.1"}], "owner": {"reputation": 70, "user_id": 6560758, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f160444c581fc9d047a7ecf7450bc3c3?s=128&d=identicon&r=PG&f=1", "display_name": "Lauriane.C", "link": "https://stackoverflow.com/users/6560758/lauriane-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 921, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469029525, "creation_date": 1469029525, "question_id": 38485089, "link": "https://stackoverflow.com/questions/38485089/qt-accessibility-plugins", "title": "Qt accessibility plugins", "body": "<p>I use to work with glfw and glew and I want to switch to Qt to create an opengl context (so to replace glfw), but keep using glew and raw opengl functions afterwards. </p>\n\n<p>I have an issue with the creation of the opengl context : my window is transparent and I get this message  </p>\n\n<pre><code> Problem creating accessible interface for:  mainWindow(0x160e410) \n Make sure to deploy Qt with accessibility plugins.\n</code></pre>\n\n<p>I found on this forum that I need to add to my .pro file </p>\n\n<pre><code> QTPLUGIN += qtaccessiblewidgets\n</code></pre>\n\n<p>so I did and nothing changed. They mentionned adding : Q_IMPORT_PLUGIN(qtaccessiblewidgets) in my main.cpp but when I do I get the compilation error :</p>\n\n<pre><code> expected constructor, destructor or type convertion before '(' token\n</code></pre>\n\n<p>so I guess I used it wrong. </p>\n\n<p>Here are my very simple files. I explected to have compatibility issues between QOpenGLContext and glew, but no an \"accessibility\" problem... </p>\n\n<p>main.cpp </p>\n\n<pre><code> #include &lt;GL/glew.h&gt; // include GLEW and new version of GL on Windows\n #include &lt;QDebug&gt;\n\n #include \"mainwindow.h\"\n\n #include &lt;QApplication&gt;\n #include &lt;QGuiApplication&gt;\n #include &lt;QOpenGLContext&gt;\n\nint main(int argc, char** argv) {\nQGuiApplication app(argc, argv) ;\n\nfloat windowWidth = 640;\nfloat windowHeight = 480;\nmainWindow* win = new mainWindow(NULL,windowWidth, windowHeight);\n\nwin-&gt;show();\n\nreturn app.exec() ; \n\n}\n</code></pre>\n\n<p>mainwindow.h </p>\n\n<pre><code> #include \"GL/glew.h\"\n #include &lt;QOpenGLContext&gt;\n #include &lt;QWindow&gt;\n #include &lt;QDebug&gt;\n\n\nclass mainWindow : public QWindow\n{\nQ_OBJECT\npublic:\n\nmainWindow();\nmainWindow(QWindow *parent = 0, float windowWidth = 600, float windowHeight = 400);\n\n~mainWindow();\n\nprivate:\n\nQOpenGLContext *m_context;\n\n};\n</code></pre>\n\n<p>mainwindow.cpp </p>\n\n<pre><code> #include \"mainwindow.h\"\n\n mainWindow::mainWindow(QWindow *parent, float windowWidth, float windowHeight): QWindow(parent), m_context(0)\n {\nsetSurfaceType(QWindow::OpenGLSurface);\nresize(QSize(windowWidth, windowHeight));\nif (!m_context) {\n    m_context = new QOpenGLContext(this);\n    m_context-&gt;create() ;\n}\nm_context-&gt;makeCurrent(this) ;\n\nglewExperimental = GL_TRUE;\nif (!glewInit ()) {\n    fprintf (stderr, \"failed glew init\\n\");\n}\n\n//m_context-&gt;doneCurrent();\nglEnable (GL_DEPTH_TEST); // enable depth-testing\nglDepthFunc (GL_LESS); // depth-testing interprets a smaller value as \"closer\"\n\nglFrontFace(GL_CCW) ;\n}\n</code></pre>\n\n<p>On another forum someone had the same issue I have, and they said to copy the plugins folders \"imageFormat\" and \"accessible\" to the build folder, so I tried but I only found the imageFormat one, not \"accessible\" folder on my computer. \nI really dont know what to try next. </p>\n"}, {"tags": ["c++", "dev-c++", "cimg"], "comments": [{"owner": {"reputation": 11, "user_id": 6610554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4d684e7e6f6c1abe36a28e57d4ee16?s=128&d=identicon&r=PG&f=1", "display_name": "bluefog21", "link": "https://stackoverflow.com/users/6610554/bluefog21"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1469029627, "post_id": 38484989, "comment_id": 64372240, "body": "Yes it is similar to that one however as I was saying I tried the solution suggested and it hasn&#39;t worked :/"}, {"owner": {"reputation": 11, "user_id": 6610554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4d684e7e6f6c1abe36a28e57d4ee16?s=128&d=identicon&r=PG&f=1", "display_name": "bluefog21", "link": "https://stackoverflow.com/users/6610554/bluefog21"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1469029850, "post_id": 38484989, "comment_id": 64372398, "body": "I deleted the other post"}, {"owner": {"reputation": 11, "user_id": 6610554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4d684e7e6f6c1abe36a28e57d4ee16?s=128&d=identicon&r=PG&f=1", "display_name": "bluefog21", "link": "https://stackoverflow.com/users/6610554/bluefog21"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1469030230, "post_id": 38484989, "comment_id": 64372646, "body": "I use dev-c++ 5.11"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6610554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4d684e7e6f6c1abe36a28e57d4ee16?s=128&d=identicon&r=PG&f=1", "display_name": "bluefog21", "link": "https://stackoverflow.com/users/6610554/bluefog21"}, "is_accepted": false, "score": 0, "last_activity_date": 1469034173, "creation_date": 1469034173, "answer_id": 38486607, "question_id": 38484989, "link": "https://stackoverflow.com/questions/38484989/libgdi32-a-library-while-using-cimg/38486607#38486607", "title": "libgdi32.a library while using CImg", "body": "<p>I now realized my mistake!\nWhen creating a new folder I selected the wrong type: should be Empty Project! </p>\n"}], "owner": {"reputation": 11, "user_id": 6610554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4d684e7e6f6c1abe36a28e57d4ee16?s=128&d=identicon&r=PG&f=1", "display_name": "bluefog21", "link": "https://stackoverflow.com/users/6610554/bluefog21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469043020, "creation_date": 1469029303, "last_edit_date": 1469043020, "question_id": 38484989, "link": "https://stackoverflow.com/questions/38484989/libgdi32-a-library-while-using-cimg", "title": "libgdi32.a library while using CImg", "body": "<p>I'm trying to run this short code that I found in another SO post. However, I keep on getting this error: </p>\n\n<p>C:\\Users\\ndeangelis\\AppData\\Local\\Temp\\ccK7X4dd.o   test.cpp:(.text$_ZN12cimg_library11CImgDisplay5paintEv[_ZN12cimg_library11CImgDisplay5paintEv]+0xb7): undefined reference to `__imp_SetDIBitsToDevice'</p>\n\n<p>After doing some research I found that I'm supposed to include the libgdi32.a library and I have done so under Project Options->Parameters->Add library or object. However the error persists. Here is the code:</p>\n\n<pre><code>#include \"C:\\Users\\ndeangelis\\Desktop\\CImg-1.7.4\\CImg.h\"\n\nusing namespace cimg_library;\n\nint main() {\n\nCImg&lt;unsigned char&gt; image(\"dog.bmp\");\nimage = image.resize(64, 64, -100, -100, 3);\nCImgDisplay main_disp(image,\"Image resized\");\n   while (!main_disp.is_closed() ) \n     main_disp.wait();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "templates", "c++11", "ld"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469037930, "post_id": 38484895, "comment_id": 64377270, "body": "Function template is not a function, it doesn&#39;t by itself have a name that another module can link to. Function template instantiations, with concrete template arguments, are functions. I don&#39;t think templates would be helpful in your quest; your original, non-template-using, example makes much more sense."}, {"owner": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1469043446, "post_id": 38484895, "comment_id": 64380446, "body": "Thanks for correcting me. The motivation for using templates is very specific to the project I try to update: the project generates some kind of fake libc. If I use the macro version, I need to explicitly set the arguments &quot;NATIVE(name,...)&quot; while the template one can deduce the arguments types from the function name only since the functions are already declared in standard header. Typically, I want to be able to write &quot;NATIVE(printf)&quot; instead of &quot;NATIVE(printf, const char*, ...)&quot;"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1469044976, "post_id": 38484895, "comment_id": 64381305, "body": "No, a template can deduce argument types from the function <b>call</b>, not the function name alone. Which doesn&#39;t help you, as the call is apparently in some C module which of course wouldn&#39;t know anything about templates."}], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "edited": false, "score": 0, "creation_date": 1469043671, "post_id": 38484976, "comment_id": 64380560, "body": "I don&#39;t think that&#39;s doable as my goal is to get rid of the macros and I don&#39;t see how this new intermediate function could pass the parameters to the C++ function without the macros. Let me know if the objective is not clear. Thanks for your time"}], "tags": [], "owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "is_accepted": false, "score": 2, "last_activity_date": 1469029262, "creation_date": 1469029262, "answer_id": 38484976, "question_id": 38484895, "link": "https://stackoverflow.com/questions/38484895/create-a-c-symbol-alias-of-a-c-template-function/38484976#38484976", "title": "Create a C symbol alias of a C++ template function", "body": "<p>The macro should create another kind of mangled function name with C linkage which calls the C++ function. Making it inline removes the performance issues.</p>\n"}], "owner": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469043307, "creation_date": 1469029026, "last_edit_date": 1469043307, "question_id": 38484895, "link": "https://stackoverflow.com/questions/38484895/create-a-c-symbol-alias-of-a-c-template-function", "title": "Create a C symbol alias of a C++ template function", "body": "<p>I need to generate many wrappers with C linkage of the form:</p>\n\n<pre><code>  int myfunc (type0 param0, type1 param1, ..., typeN paramN) {\n       return (*g_libc.myfunc ## _fn) (param0, etc...)\n  }\n</code></pre>\n\n<p>So far, I got away with lots of macros:</p>\n\n<pre><code>  #define NATIVE(name,...) \\\n  auto name (FULL_ARGS(__VA_ARGS__)) \\\n  {                                                             \\\n    return (*mystruct.name ## _fn) (ARGS (__VA_ARGS__));              \\\n  }\n</code></pre>\n\n<p>but I would like to use variadic templates in C++11 for various reasons. I have a working variadic function that could replace the previous <em>hackish</em> implementation:</p>\n\n<pre><code>#define NATIVE(name) template &lt;typename... Args&gt; \\\nauto name (Args&amp;&amp;... args) -&gt; decltype( name ( std::forward&lt;Args&gt;(args)...) ) \\\n{ \\\n  return g_libc. name ## _fn (std::forward&lt;Args&gt;(args)...); \\\n}\n</code></pre>\n\n<p>but then I would lose the C linkage (since templates can't have C linkage). My idea is thus to create an alias with the wanted function name that points towards the templated function.\nIt seems possible to have a C symbol as an alias of a C++ function (might seem obvious but I had to test it and it worked ok). However to be able to alias the templated function, I need to know its mangled name at compile time, which seems hard to get right (no gcc extension to do that, notwithstanding I want to support clang as well). My conclusion is that I should add the alias as a postprocessing step.</p>\n\n<p>So the question is how to add a symbol alias to an already built shared library ? (I can 'grep' the 'nm' output to retrieve the mangled symbol)</p>\n\n<p>Best regards</p>\n"}, {"tags": ["c++", "if-statement", "while-loop"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1469028952, "post_id": 38484848, "comment_id": 64371768, "body": "Just add another loop.  Better yet use functions and then in main use a loop that calls the game logic function and then all main needs to do is ask to play again."}, {"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469029124, "post_id": 38484848, "comment_id": 64371876, "body": "How would I go about doing that? I&#39;m a novice, I know what the functions do but I never know where to place them correctly. I was able to do this through a lot of trial and error :)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1469029207, "post_id": 38484848, "comment_id": 64371933, "body": "Trail and error is a wonderful way to learn.  However I suggest you get yourself a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> as that will really help to learn the language."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469042835, "post_id": 38485612, "comment_id": 64380106, "body": "So that loop would be the first thing under my int main()? then all of my code above would fall within it? Also, what is the Play_Game variable for? And I am not familiar with what a &quot;tolower&quot; function is."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "edited": false, "score": 0, "creation_date": 1469053654, "post_id": 38485612, "comment_id": 64385198, "body": "The <code>Play_Game</code> is a function, not a variable.  It is the function that plays your game.  Look up in any good C++ reference the <a href=\"http://en.cppreference.com/w/cpp/locale/ctype/tolower\" rel=\"nofollow noreferrer\">tolower function</a>."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1469030986, "creation_date": 1469030986, "answer_id": 38485612, "question_id": 38484848, "link": "https://stackoverflow.com/questions/38484848/xcode-c-how-to-add-a-play-again-function-to-my-program/38485612#38485612", "title": "Xcode C++ How to add a &quot;Play Again?&quot; function to my program", "body": "<p>To illustrate @NathanOliver's comment:  </p>\n\n<pre><code>int main(void)\n{\n  bool play_again = true;\n  while (play_again)\n  {\n    Play_Game();\n    std::cout &lt;&lt; \"\\nWant to play again (y / n)?\";\n    char answer;\n    std::cin &gt;&gt; answer;\n    if (tolower(answer) != 'y')\n    {\n        play_again = false;\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>You could also use a <code>do-while</code> loop as well.</p>\n"}], "owner": {"reputation": 103, "user_id": 6436725, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/34e47540afc9bf1101ff54acee811565?s=128&d=identicon&r=PG&f=1", "display_name": "Zjm4192", "link": "https://stackoverflow.com/users/6436725/zjm4192"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 760, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1469030986, "creation_date": 1469028884, "last_edit_date": 1469029309, "question_id": 38484848, "link": "https://stackoverflow.com/questions/38484848/xcode-c-how-to-add-a-play-again-function-to-my-program", "title": "Xcode C++ How to add a &quot;Play Again?&quot; function to my program", "body": "<p>my program is all finished but I want to know how to add a \"Play again\" feature that uses \"Yes\" or \"No\" input to decide whether to run the program again or to end it. I am a little unsure of where to place it in my program since I use a handful of while loops and if/else statements. Any insight would be appreciated, thanks! Here is my code:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\nint main() // Setting up the code to follow.\n{\n    srand(static_cast&lt;unsigned int&gt;(time(0)));\n\n    int Weapon_Selection;  // Creating variables for the player and computer's weapon selection.\n    int Comp_Weapon;\n    bool Battle = true;    // The variable to begin the battle.\n\n    while(Battle)          // The main while loop to run the program code.\n    {\n        int Player_Health = 100; // More variables for both the player and the computer.\n        int Comp_Health = 100;\n        int Cannon_Ammo = 3;\n        int Grenade_Ammo = 4;\n        int Comp_Cannon_Ammo = 3;\n        int Comp_Grenade_Ammo = 4;\n\n        while(Player_Health &gt; 0 &amp;&amp; Comp_Health &gt; 0) // The while loop to continue running the program while both combatants are alive.\n        {\n            bool Invalid = true;\n            bool Comp_Invalid = true;\n\n\n            while(Invalid)\n            {\n                cout &lt;&lt; \"Select a weapon using number keys 1, 2, and 3.\\n\"; // Weapon selection input from the player.\n                cout &lt;&lt; \"1. Cannon (Ammo left: \" &lt;&lt; Cannon_Ammo &lt;&lt; \")\\n\";\n                cout &lt;&lt; \"2. Grenade (Ammo left: \" &lt;&lt; Grenade_Ammo &lt;&lt; \")\\n\";\n                cout &lt;&lt; \"3. Rifle\\n\";\n                cout &lt;&lt; \"\\n\";\n                cout &lt;&lt; \"You select: \";\n                cin &gt;&gt; Weapon_Selection;\n\n                srand(static_cast&lt;unsigned int&gt;(time(0)));\n\n                if (Weapon_Selection == 1 &amp;&amp; Cannon_Ammo &gt; 0)\n                {\n                    Cannon_Ammo -= 1;\n                    Invalid = false;\n                    int Player_Dmg = rand() % 5 + 10; // Randomly generated damage range.\n                    cout &lt;&lt; \"You caused \" &lt;&lt;  Player_Dmg &lt;&lt; \" cannon damage to your enemy!\\n\";\n                    Comp_Health -= Player_Dmg;\n                    cout &lt;&lt; \"Your health is \" &lt;&lt; Player_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"The computer's health is \" &lt;&lt; Comp_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"\\n\";\n                    break;\n                }\n\n                else if (Weapon_Selection == 2 &amp;&amp; Grenade_Ammo &gt; 0)\n                {\n                    Grenade_Ammo -= 1;\n                    Invalid = false;\n                    int Player_Dmg = rand() % 5 + 7;\n                    cout &lt;&lt; \"You caused \" &lt;&lt; Player_Dmg &lt;&lt; \" grenade damage to your enemy!\\n\";\n                    Comp_Health -= Player_Dmg;\n                    cout &lt;&lt; \"Your health is \" &lt;&lt; Player_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"The computer's health is \" &lt;&lt; Comp_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"\\n\";\n                    break;\n                }\n\n                else if (Weapon_Selection == 3)\n                {\n                    Invalid = false;\n                    int Player_Dmg = rand() % 5 + 3;\n                    cout &lt;&lt; \"You caused \" &lt;&lt; Player_Dmg &lt;&lt; \" rifle damage to your enemy!\\n\";\n                    Comp_Health -= Player_Dmg;\n                    cout &lt;&lt; \"Your health is \" &lt;&lt; Player_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"The computer's health is \" &lt;&lt; Comp_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"\\n\";\n                    break;\n                }\n\n                else\n                    cout &lt;&lt; \"You are out of ammo or you have entered an invalid number.\" &lt;&lt; \"\\n\"; // Output for wrong number input or no ammo.\n                    cout &lt;&lt; \"\\n\";\n            }\n\n\n            if (Comp_Health &lt;= 0) // Break point if the computer dies in battle.\n                break;\n\n            while(Comp_Invalid) // The computer's random weapon selection.\n            {\n                Comp_Weapon = rand() % 3 + 1;\n\n                if (Comp_Weapon == 1 &amp;&amp; Comp_Cannon_Ammo &gt; 0)\n                {\n                    Comp_Cannon_Ammo -= 1;\n                    Comp_Invalid = false;\n                    int Comp_Dmg = rand() % 5 + 10;  // Randomly generated damage range for the computer.\n                    cout &lt;&lt; \"Your enemy used a cannon and caused \" &lt;&lt; Comp_Dmg &lt;&lt; \" damage to you!\\n\";\n                    Player_Health -= Comp_Dmg;\n                    cout &lt;&lt; \"Your health is \" &lt;&lt; Player_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"The computer's health is \" &lt;&lt; Comp_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"\\n\";\n                }\n\n                else if (Comp_Weapon == 2 &amp;&amp; Comp_Grenade_Ammo &gt; 0)\n                {\n                    Comp_Grenade_Ammo -= 1;\n                    Comp_Invalid = false;\n                    int Comp_Dmg = rand() % 5 + 7;\n                    cout &lt;&lt; \"Your enemy used a grenade and caused \" &lt;&lt; Comp_Dmg &lt;&lt; \" damage to you!\\n\";\n                    Player_Health -= Comp_Dmg;\n                    cout &lt;&lt; \"Your health is \" &lt;&lt; Player_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"The computer's health is \" &lt;&lt; Comp_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"\\n\";\n                }\n\n                else\n                {\n                    Comp_Invalid = false;\n                    int Comp_Dmg = rand() % 5 + 3;\n                    cout &lt;&lt; \"Your enemy used a rifle and caused \" &lt;&lt; Comp_Dmg &lt;&lt; \" damage to you!\\n\";\n                    Player_Health -= Comp_Dmg;\n                    cout &lt;&lt; \"Your health is \" &lt;&lt; Player_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"The computer's health is \" &lt;&lt; Comp_Health &lt;&lt; \"\\n\";\n                    cout &lt;&lt; \"\\n\";\n                }\n\n            }\n        }\n        if(Player_Health &lt; 0) // End of battle output, regardless of who wins or loses.\n            cout &lt;&lt; \"You have been defeated by your enemy!\" &lt;&lt; \"\\n\" &lt;&lt; endl;\n\n        else\n            cout &lt;&lt; \"Congratulations, you beat your enemy!\" &lt;&lt; \"\\n\" &lt;&lt; endl;\n\n\n    }\n    cin.ignore(2);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "qt", "mingw", "qtimer"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1469034125, "post_id": 38484779, "comment_id": 64375029, "body": "Do you know if <code>QObject::blockSignals</code> blocks the current signal (if there is one) or just future signals?  (I checked the <a href=\"http://doc.qt.io/qt-5/qobject.html#blockSignals\" rel=\"nofollow noreferrer\">docs.</a> but didn&#39;t see anything definitive.)"}], "owner": {"reputation": 303, "user_id": 3760979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/953f305b693aa6b8d0df30f0a9c5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Ety", "link": "https://stackoverflow.com/users/3760979/ety"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 490, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1469028701, "creation_date": 1469028701, "question_id": 38484779, "link": "https://stackoverflow.com/questions/38484779/thread-runtime-error-qt-timers-cannot-be-stopped-from-another-thread-mingw", "title": "Thread runtime error - Qt Timers cannot be stopped from another thread - MinGW", "body": "<p>I have a GUI application made in Qt 5.7 and Qt Creator, in which two buttons call two different functions in the code:\nInside MainWindow constructor:</p>\n\n<pre><code>connect(button1, SIGNAL(buttonClickedForBattle(Ally*,Enemy&amp;)), this, SLOT(attack(Ally*,Enemy&amp;)));\nconnect(button2, SIGNAL(buttonClickedForBattle(Ally*,Enemy&amp;)), this, SLOT(fire(Ally*,Enemy&amp;)));\n</code></pre>\n\n<p>My two slots are exactly the same, except a little function call inside (to calculate damage) that differs, and a different sound when triggered.</p>\n\n<p>The problem occurs only in the \"fire\" slot which is as follows:</p>\n\n<pre><code>void MainWindow::fire(Ally *a, Enemy &amp;e)\n{\n    ...\n    sound-&gt;play();\n    ...\n\n    system.fira(*a, e); // calculates and applies damage\n\n    if(e.getHP() == 0)\n    {\n        ...\n    }\n    else\n    {\n        timer1 = new MyTimer(\"PrepareCounterAttackTimer\", e, a);\n        connect(timer1, SIGNAL(timeoutNowAttack(Enemy&amp;,Ally*)), timer1, SLOT(stopAndBlock2(Enemy&amp;,Ally*)));\n        connect(timer1, SIGNAL(timeoutNowAttack(Enemy&amp;,Ally*)), this, SLOT(PrepareCounterAttack(Enemy&amp;,Ally*)));\n        timer1-&gt;start(2000);\n        cout &lt;&lt; \"timer started\" &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>The program executes the whole function (\"timer started\" appears) but never reached the end of \"timer1\", so it never enters the \"PrepareCounterAttack\" slot. The other slot is meant to stop the timer and block signals (I use other timers afterwards); removing its line doesn't change the result. At execution, when \"button2\" is clicked, a pop-up instantly appears above the GUI:</p>\n\n<pre><code>Runtime Error!\nR6016 \n- not enough space for thread data\n</code></pre>\n\n<p>And when I click on \"OK\" I get the following output:</p>\n\n<pre><code>QObject::~QObject: Timers cannot be stopped from another thread\n</code></pre>\n\n<p>FYI, this timer is of type \"MyTimer\", which is a subclass of QTimer:\nHeader file:</p>\n\n<pre><code>class MyTimer : public QTimer\n{\n   Q_OBJECT\n\npublic:\n   MyTimer();\n   MyTimer(std::string name, Enemy &amp; en, Ally* al);\n   ~MyTimer();\n\nprivate:\n   std::string name;\n   Ally* ally;\n   Enemy enemy;\n\nsignals:\n   void mytimeout();\n   void timeoutNowAttack(Enemy &amp; en, Ally* al);\n\npublic slots:\n   void stopAndBlock();\n\nprotected:\n   void timerEvent(QTimerEvent* e);\n};\n</code></pre>\n\n<p>Cpp file:</p>\n\n<pre><code>MyTimer::MyTimer()\n        :QTimer()\n    {\n        setSingleShot(true);\n    }\n\n    MyTimer::MyTimer(string n, Enemy &amp; en, Ally* al)\n        :QTimer()\n    {\n        setSingleShot(true);\n        name = n;\n        ally = al;\n        enemy = en;\n    }\n\n    MyTimer::~MyTimer()\n    {\n    }\n\n    void MyTimer::timerEvent(QTimerEvent* e)\n    {\n        if(e-&gt;timerId() == this-&gt;timerId())\n        {\n            emit mytimeout();\n            emit timeoutNowAttack(enemy, ally);\n        }\n    }\n\n    void MyTimer::stopAndBlock()\n    {\n        blockSignals(true);\n        stop();\n    }\n</code></pre>\n\n<p>What I don't understand is: </p>\n\n<ul>\n<li>Why is there a thread problem while I never created one explicitly?</li>\n<li>Why is QObject destructor called?</li>\n<li>How come the runtime error occurs in <em>button2</em>'s slot but not in\n<em>button1</em>'s? The if/else part is literally the same!</li>\n</ul>\n\n<p>I'm not proficient in multithreading and this is my first big Qt program.</p>\n\n<p><strong>Important note:</strong> The problem <strong>only</strong> occurs in</p>\n\n<ul>\n<li>Windows (on Linux, everything's fine)</li>\n<li>32-bit MinGW (when I switch to 64-bit MSVC 2013, the slot is executed until the end)</li>\n</ul>\n\n<p>Is it a 32-bit vs 64-bit issue?\nThank you for any ideas.</p>\n"}, {"tags": ["c++", "mergesort"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1469028382, "post_id": 38484502, "comment_id": 64371414, "body": "Shen you get segmentation fault under debugger it should point where it happens. Didn&#39;t you run it under debugger or you are hiding this information from us?"}, {"owner": {"reputation": 106, "user_id": 5249995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15a9a2aa71f0e6c7b5b0d93d5801ec9f?s=128&d=identicon&r=PG&f=1", "display_name": "Gerardo G&#225;lvez", "link": "https://stackoverflow.com/users/5249995/gerardo-g%c3%a1lvez"}, "edited": false, "score": 0, "creation_date": 1469028731, "post_id": 38484502, "comment_id": 64371613, "body": "Try changing mid to (low + high) / 2 instead of low + high / 2"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469028931, "post_id": 38484502, "comment_id": 64371750, "body": "Suggestion - make <code>mid</code> and <code>high</code> point to the element behind last, like standard C++ algos do. First of all that will make your code cleaner, second you can easily use standard algos (for example <code>std::copy</code> instead of loop). There is a reason why it is done this way in C++."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1469029172, "post_id": 38484502, "comment_id": 64371910, "body": "Note: variable-size array is illegal in c++ even if gcc compiles it"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469029593, "post_id": 38484502, "comment_id": 64372215, "body": "You are getting a stack overflow exception, meaning you&#39;re calling the <code>mergesort</code> function over and over again until the stack is exhausted.  Why didn&#39;t you recognize this when you were debugging?  At the very least, you could have printed out the values in your functions for debugging purposes, and see that you would have had an endless amount of amount."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 6378631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hfk7t.jpg?s=128&g=1", "display_name": "armor", "link": "https://stackoverflow.com/users/6378631/armor"}, "is_accepted": false, "score": -1, "last_activity_date": 1469050051, "last_edit_date": 1469050051, "creation_date": 1469034402, "answer_id": 38486677, "question_id": 38484502, "link": "https://stackoverflow.com/questions/38484502/mergesort-in-csegmentation-fault/38486677#38486677", "title": "mergesort in c++:segmentation fault", "body": "<p>You're recursively calling mergesort. Although your general case seems legitimate, I cannot ascertain your base case (i.e. to exit the recursion). </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5375360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d73f30828fd76888f482213bad835?s=128&d=identicon&r=PG&f=1", "display_name": "ridhim rastogi", "link": "https://stackoverflow.com/users/5375360/ridhim-rastogi"}, "is_accepted": true, "score": 0, "last_activity_date": 1469071132, "creation_date": 1469071132, "answer_id": 38494317, "question_id": 38484502, "link": "https://stackoverflow.com/questions/38484502/mergesort-in-csegmentation-fault/38494317#38494317", "title": "mergesort in c++:segmentation fault", "body": "<p>i only needed to change mid=(low+high)/2. Thank you @Gerado G\u00e1lvez for your suggestion</p>\n"}], "owner": {"reputation": 1, "user_id": 5375360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d73f30828fd76888f482213bad835?s=128&d=identicon&r=PG&f=1", "display_name": "ridhim rastogi", "link": "https://stackoverflow.com/users/5375360/ridhim-rastogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 38494317, "answer_count": 2, "score": 0, "last_activity_date": 1469165693, "creation_date": 1469026009, "last_edit_date": 1469165693, "question_id": 38484502, "link": "https://stackoverflow.com/questions/38484502/mergesort-in-csegmentation-fault", "title": "mergesort in c++:segmentation fault", "body": "<p>I am getting segmentation fault while implementing mergesort.\nI have checked for array out of bounds.I would love some help to find out where I have gone wrong.I have tried inputs for small arrays such as of size 10 where I have taken size of temp as static(>10).I have been pulling my hair out for hours.    </p>\n\n<p>UPDATE:  I only needed to change mid=(low+high)/2. </p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nvoid merges(int arr[],int low,int mid,int high)\n{\n    int i=low,j=mid+1,k=0;\n    int temp[high-low+1];\n    while(i&lt;=mid &amp;&amp; j&lt;=high)\n    {\n           if(arr[i]&lt;arr[j])\n            {\n                temp[k++]=arr[i];\n                i++;\n            }\n            else\n            {\n                temp[k++]=arr[j];\n                j++;               \n            }\n    }\n    if(i&gt;mid)\n    {\n        while(j&lt;=high)\n        {\n            temp[k++]=arr[j];\n            j++;\n        }\n    }\n    else\n    {\n        while(i&lt;=mid)\n        {\n            temp[k++]=arr[i];\n            i++;\n        }\n    }\n    j=0;\n    for(i=low;i&lt;=high;i++)\n    {\n        arr[i]=temp[j++];    \n    }\n}\n\nvoid mergesort(int arr[],int low,int high)\n{\n    if(low&lt;high)\n    {\n    int mid=low+high/2;\n    mergesort(arr,low,mid);\n    mergesort(arr,mid+1,high);\n    merges(arr,low,mid,high);\n    }   \n}\n\nint main(){\n    int n;\n    cin &gt;&gt; n;\n    int arr[n];\n    for(int arr_i = 0;arr_i &lt; n;arr_i++){\n    cin &gt;&gt; arr[arr_i];\n    }\n    int i,j,k;\n    mergesort(arr,0,n-1);\n    for(i=0;i&lt;n;i++)\n        cout&lt;&lt;arr[i];\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1469025765, "creation_date": 1469025765, "answer_id": 38484393, "question_id": 38484352, "link": "https://stackoverflow.com/questions/38484352/template-issue-with-class-derived-from-const/38484393#38484393", "title": "template issue with class derived from const", "body": "<p><code>Derived&lt; MyClass* &gt;</code> is derived from <code>Base&lt;MyClass * const&gt;</code>.<br>\nNote what becomes <code>const</code> here, since <code>T</code> is not <code>MyClass</code>, but <code>MyClass*</code></p>\n\n<p>If you want to force the <code>const</code> to be applied to the pointee when <code>T</code> is a pointer type, you need to make use of a helper template &amp; some meta-programming.</p>\n"}, {"comments": [{"owner": {"reputation": 977, "user_id": 1729830, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6765d452faf54463b2a02ee433bcba3f?s=128&d=identicon&r=PG", "display_name": "Micka&#235;lG", "link": "https://stackoverflow.com/users/1729830/micka%c3%ablg"}, "edited": false, "score": 0, "creation_date": 1469085736, "post_id": 38484416, "comment_id": 64394949, "body": "Thanks. Fixed using  &quot;class Derived : public Base&lt; const typename std::remove_pointer&lt;T&gt;::type* &gt;&quot; since remove_pointer_t is C++14."}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": true, "score": 2, "last_activity_date": 1469025821, "creation_date": 1469025821, "answer_id": 38484416, "question_id": 38484352, "link": "https://stackoverflow.com/questions/38484352/template-issue-with-class-derived-from-const/38484416#38484416", "title": "template issue with class derived from const", "body": "<p>This is because <code>Derived&lt;MyClass*&gt;</code> is derived from <code>Base&lt;MyClass* const&gt;</code>, <em>not</em> <code>Base&lt;const MyClass*&gt;</code>. The former means a <code>const</code> pointer to <code>MyClass</code>, the latter means a pointer to a <code>const MyClass</code>.</p>\n\n<p>You need to think about what you want to be <code>const</code>: the pointer or the pointee. </p>\n\n<p>If it's the pointer, then just change the return type to <code>Base&lt;MyClass* const&gt;</code>*. </p>\n\n<p>If it's the pointee, then you'll need to do some transformations on <code>T</code> in your definition for <code>Derived</code>. If you only expect <code>T</code> to be a pointer, then <code>const std::remove_pointer_t&lt;T&gt;*</code> will probably work for you, otherwise you'll need to do some partial specialization.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1469028116, "creation_date": 1469028116, "answer_id": 38484563, "question_id": 38484352, "link": "https://stackoverflow.com/questions/38484352/template-issue-with-class-derived-from-const/38484563#38484563", "title": "template issue with class derived from const", "body": "<p>The source of confusion:</p>\n\n<pre><code>const MyClass* ptr;  // ptr is is a non-const pointer to a const object\nMyClass* const ptr;  // ptr is a const pointer to a non-const object.\n</code></pre>\n\n<p>Hence, you need to use:</p>\n\n<pre><code>Base&lt; MyClass const* &gt;* MyFunc ()\n{\n    return new Derived&lt; MyClass* &gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 977, "user_id": 1729830, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6765d452faf54463b2a02ee433bcba3f?s=128&d=identicon&r=PG", "display_name": "Micka&#235;lG", "link": "https://stackoverflow.com/users/1729830/micka%c3%ablg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 38484416, "answer_count": 3, "score": 0, "last_activity_date": 1469028116, "creation_date": 1469025631, "question_id": 38484352, "link": "https://stackoverflow.com/questions/38484352/template-issue-with-class-derived-from-const", "title": "template issue with class derived from const", "body": "<p>Given following code:</p>\n\n<pre><code>class MyClass {};\ntemplate&lt; class T &gt; class Base {};\ntemplate&lt; class T &gt; class Derived : public Base&lt; const T &gt; {};\n\nBase&lt; const MyClass* &gt;* MyFunc ()\n{\n    return new Derived&lt; MyClass* &gt;();\n}\n</code></pre>\n\n<p>clang gives:</p>\n\n<pre><code>error: cannot initialize return object of type 'Base&lt;const MyClass *&gt; *' with an rvalue of type 'Derived&lt;MyClass *&gt; *'\n</code></pre>\n\n<p>However, \"Derived MyClass*\" is derived from \"Base const MyClass*\", so I expected it to work.\nWhat did I get wrong ?</p>\n"}, {"tags": ["c++", "fstream", "getline"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 2, "creation_date": 1469025705, "post_id": 38484306, "comment_id": 64370926, "body": "I don&#39;t know if its the root cause of your pain, but you shouldn&#39;t check for <code>eof</code> as your terminating condition.  See:  <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 336, "user_id": 6614154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/444e3eea34cc65740f5f545e34f07889?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Morren", "link": "https://stackoverflow.com/users/6614154/jeremy-morren"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1469026011, "post_id": 38484306, "comment_id": 64371146, "body": "Well, maybe that is so, but that isn&#39;t the cause of the problem.  It enters the loop,  and then prints &quot;Bad Read Exiting&quot; Every time.  And it always opens the file...but Thanks for the tip."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1469026017, "post_id": 38484306, "comment_id": 64371155, "body": "Just looking at your code I&#39;d expect that for loop to never work since row will be empty on the first iteration."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1469028180, "post_id": 38484306, "comment_id": 64371297, "body": "@RetiredNinja has it right, I think.  The <code>getline()</code> will only execute after the first loop iteration, so the first time through <code>row</code> is blank."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1469029063, "post_id": 38484306, "comment_id": 64371840, "body": "Why are you opening an input stream for appending?"}, {"owner": {"reputation": 336, "user_id": 6614154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/444e3eea34cc65740f5f545e34f07889?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Morren", "link": "https://stackoverflow.com/users/6614154/jeremy-morren"}, "edited": false, "score": 0, "creation_date": 1469029941, "post_id": 38484306, "comment_id": 64372450, "body": "Yes, that was the problem.  I don&#39;t really understand why that code did execute (and it did).  The compiler must suddenly  have said:  hey, I&#39;ve had enough of doing it wrong.  Chad, in answer to your question, I have no experience at all and I am doing this to practice.  I think you can see why.  Thanks a lot for the help."}], "owner": {"reputation": 336, "user_id": 6614154, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/444e3eea34cc65740f5f545e34f07889?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy Morren", "link": "https://stackoverflow.com/users/6614154/jeremy-morren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469025534, "creation_date": 1469025534, "question_id": 38484306, "link": "https://stackoverflow.com/questions/38484306/getline-randomly-stops-working", "title": "Getline Randomly Stops Working", "body": "<p>I am trying to write a very basic program to read in a CSV and display it.  The function, as you can see below, is a very basic one.  It uses getline to read in each row (until the newline chracter) before displaying each cell.  It was working fine and I was finetuning the loop to display each cell when getline simply stopped working.  Without changing any of the code to do with getline, I compiled it and it would not read from the file.  row is always empty.  However, the ifstream is valid because the \"test\" string (which I inserted in response) reads in from sheet fine.  Can anyone help me?</p>\n\n<p>PS:  I have had similar problems with getline before.  Is it something to do with my system?  It seems to work on and off</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\nifstream sheet( \"StockTake.csv\", ios::app );\nif ( ! sheet.is_open() )\n{\n    cout &lt;&lt; \"Cannot Open File!\\n\";\n    return 0;\n}\nelse\n{\n    cout &lt;&lt; \"Opened File\\n\";\n}\n//Now print each row (find the newline chracter at the end of each line)\n/*string test;\nsheet &gt;&gt; test;\ncout &lt;&lt; test;*/\nfor ( string row; ! sheet.eof(); getline(sheet, row, '\\n') )\n{\n    if (row == \"\")\n    {\n        cout &lt;&lt; \"Bad Read.  Exiting\\n\";\n        return 0;\n    }\n    //Print out each row with a tab space between each cell\n    string cell;\n    //find the beginning and the end of each cell\n    for (int i = 0, j = 0; ; )\n    {\n        /*Checks if the cell is enclosed in quotes\n        The first time, j == i hence the -2 and +2\n        the +2 is required to \"skip\" out the apostrophes if\n        they are found*/\n        if (row.at(i) == '\"')\n        {\n            i++;\n            j = i-2;\n            do\n            {\n                j = row.find('\"', j+2);\n            } while (row.at(j+1) == '\"');\n            /*Check for the \"\" apostrophe sign*/\n        }\n        else\n        {\n            j = row.find(',', i);\n        }\n        /*Print the Cell*/\n        if (j == string::npos) //if this is the last cell\n        {\n            cell = row.substr(i, row.size() - i);\n        }\n        else if ( j-i != 0)\n        {\n            cell = row.substr(i, j-i);\n        }\n        else\n        {\n            cell = \"\";\n        }\n        /*Check for the \"\" apostrophe sign, and replace\n        with \" for each instance*/\n        if ( cell.find(\"\\\"\\\"\", 0) != string::npos )\n        {\n            int pos = -2; //must start at zero\n            do\n            {\n                //Skips out the \"current\" apostrophe\n                //if there are more than one\n                pos = cell.find(\"\\\"\\\"\", pos+2);\n                cell = cell.substr(0, pos) + \n                       cell.substr(pos+1, cell.size()- (pos+1) );\n            } while (cell.find(\"\\\"\\\"\", pos+2) != string::npos);\n\n        }\n        /*Display the Cell, only the space will be displayed\n        if the cell is empty*/\n        cout &lt;&lt; cell &lt;&lt; \"     \";\n        /*Find the next cell*/\n        if ( row.at(j) == '\"' )\n        {\n            i = j+2;\n        }\n        else\n        {\n            i = j+1;\n        }\n\n    }\n    cout &lt;&lt; \"\\n\"; //Print newline character at the end of each line\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "boost"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1469025348, "post_id": 38484023, "comment_id": 64370644, "body": "You could always store the x/y/z/whatever values separately, in plain text: <code>key1=1;2;3</code>"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 1, "creation_date": 1469025476, "post_id": 38484023, "comment_id": 64370737, "body": "I advicse you to use the Qt 4.8 source code, located at <a href=\"http://code.qt.io/cgit/qt/qt.git/tree/src/corelib/kernel\" rel=\"nofollow noreferrer\">code.qt.io/cgit/qt/qt.git/tree/src/corelib/kernel</a> regarding <code>QVariant</code>&#39;s. Right now I can&#39;t find the exact conversion code, but with a proper IDE, havinf the Qt 4.8 tree loaded, it should be easy to find the necessary definitions. <code>QVariant</code> itself is a template class, for which coversions to and from certain types are defined, some explicitly via specialization, some not."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1469057602, "post_id": 38484023, "comment_id": 64386303, "body": "Use Qt or don&#39;t use Qt&#39;s serialization format in your ini exchange format"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1469101250, "post_id": 38484023, "comment_id": 64405166, "body": "Also, another possibility is to create a small utility using Qt to parse the data and convert it into the desired format. From what I understand, such a conversion will only take place once during the config file migration?"}], "owner": {"reputation": 687, "user_id": 1056493, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/89c8e9dd38e9173b160155abb86a7d59?s=128&d=identicon&r=PG", "display_name": "andreapavan", "link": "https://stackoverflow.com/users/1056493/andreapavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469024850, "creation_date": 1469024850, "question_id": 38484023, "link": "https://stackoverflow.com/questions/38484023/how-read-qpointf-in-c-without-qt-libraries", "title": "How read QPointF in C++ without Qt libraries?", "body": "<p>I have to read a .ini file which contains some sample values like:</p>\n\n<pre><code>[Category]\nkey1=\"@Variant(\\0\\0\\0\\x1a@Q\\x13v\\x8a\\xf1\\xfd\\xf@=#lSm\\xa9\\xee)\"\nkey2=1\nkey3=1\n</code></pre>\n\n<p>The value of <code>key1</code> is a binary format of QPointF from Qt framework.\nSo the value of <code>key1</code> is a QPointF stored as QVariant.\nThis value can be read (with Qt libraries) with:</p>\n\n<pre><code>QSettings-&gt;value( \"Category/key1\" ).toPointF()\n</code></pre>\n\n<p>How can I achieve the same result without Qt using only C++ std and boost libraries?</p>\n\n<p>More informations about QPointF are showed here:\n<a href=\"http://doc.qt.io/qt-4.8/qpointf.html\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/qpointf.html</a></p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 2, "creation_date": 1544000716, "post_id": 38483932, "comment_id": 94116817, "body": "<code>setWindowFlags(windowFlags() &amp;(~Qt::WindowMaximizeButtonHint));</code>"}, {"owner": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1582835566, "post_id": 38483932, "comment_id": 106923874, "body": "related: <a href=\"https://stackoverflow.com/questions/26146574/qdialog-how-to-remove-the-minimize-button\" title=\"qdialog how to remove the minimize button\">stackoverflow.com/questions/26146574/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1227, "user_id": 1563469, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xdJq4.jpg?s=128&g=1", "display_name": "Reagan Ochora", "link": "https://stackoverflow.com/users/1563469/reagan-ochora"}, "is_accepted": false, "score": 5, "last_activity_date": 1499667286, "creation_date": 1499667286, "answer_id": 45004889, "question_id": 38483932, "link": "https://stackoverflow.com/questions/38483932/how-to-disable-maximize-button-in-qt/45004889#45004889", "title": "How to disable maximize button in QT?", "body": "<p><strong><em>SetWindowsFlags();</em></strong> didn't work for me on Ubuntu 16.04,but under ui->setupUi(this) I added this line:</p>\n\n<pre><code>setFixedSize(width(), height());\n</code></pre>\n\n<p>and it works fine.</p>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 13110240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4056bbbbf509d8d70e6379e6eae7591?s=128&d=identicon&r=PG&f=1", "display_name": "DaniV", "link": "https://stackoverflow.com/users/13110240/daniv"}, "edited": false, "score": 0, "creation_date": 1598035569, "post_id": 50376182, "comment_id": 112337446, "body": "Great answer, best regards!!"}], "tags": [], "owner": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "is_accepted": false, "score": 6, "last_activity_date": 1526490432, "last_edit_date": 1526490432, "creation_date": 1526489330, "answer_id": 50376182, "question_id": 38483932, "link": "https://stackoverflow.com/questions/38483932/how-to-disable-maximize-button-in-qt/50376182#50376182", "title": "How to disable maximize button in QT?", "body": "<p>To turn off the Maximize Button on the default windows, set the max size of your Window on your Ui file. </p>\n\n<p>For example: </p>\n\n<p><a href=\"https://i.stack.imgur.com/AGMO3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AGMO3.png\" alt=\"enter image description here\"></a></p>\n\n<p>You will notice the Maximize button is greyed out when you run your program.  </p>\n\n<p>If you want your window to ever only be the one size and give the user no control to change it, set the Geometry and the Minimum size to these same values.</p>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 9682880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u8oxN.jpg?s=128&g=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/9682880/mahdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1541504672, "creation_date": 1541504672, "answer_id": 53171243, "question_id": 38483932, "link": "https://stackoverflow.com/questions/38483932/how-to-disable-maximize-button-in-qt/53171243#53171243", "title": "How to disable maximize button in QT?", "body": "<pre><code>setWindowFlags(Qt::Drawer);\n</code></pre>\n\n<p>cool :)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6348579"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12411, "favorite_count": 2, "answer_count": 3, "score": 8, "last_activity_date": 1614253521, "creation_date": 1469024597, "question_id": 38483932, "link": "https://stackoverflow.com/questions/38483932/how-to-disable-maximize-button-in-qt", "title": "How to disable maximize button in QT?", "body": "<p>I want to disable maximize button in the Qt</p>\n\n<p>I tried</p>\n\n<pre><code>setWindowFlags( (windowFlags() | Qt::CustomizeWindowHint) &amp; ~Qt::WindowMaximizeButtonHint); \n</code></pre>\n"}, {"tags": ["c++", "openmesh"], "answers": [{"comments": [{"owner": {"reputation": 3664, "user_id": 1909094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RU6fC.jpg?s=128&g=1", "display_name": "Lake", "link": "https://stackoverflow.com/users/1909094/lake"}, "edited": false, "score": 0, "creation_date": 1469095430, "post_id": 38499909, "comment_id": 64401512, "body": "You made my day.  Thanks.  Do you have any pointer to where it states this behavior on the official docs?^^"}, {"owner": {"reputation": 832, "user_id": 3077540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMo4X.png?s=128&g=1", "display_name": "jsb", "link": "https://stackoverflow.com/users/3077540/jsb"}, "reply_to_user": {"reputation": 3664, "user_id": 1909094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RU6fC.jpg?s=128&g=1", "display_name": "Lake", "link": "https://stackoverflow.com/users/1909094/lake"}, "edited": false, "score": 1, "creation_date": 1469098992, "post_id": 38499909, "comment_id": 64403691, "body": "@Lake There&#39;s a general explanation on <a href=\"http://www.openmesh.org/media/Documentations/OpenMesh-6.2-Documentation/a00060.html\" rel=\"nofollow noreferrer\">deleting geometry elements</a>. Unfortunately, the fact that <code>decimate_to</code> does not trigger a garbage collection seems to be only documented by a source code comment in the implementation in <code>DecimaterT.cpp</code>."}, {"owner": {"reputation": 832, "user_id": 3077540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMo4X.png?s=128&g=1", "display_name": "jsb", "link": "https://stackoverflow.com/users/3077540/jsb"}, "reply_to_user": {"reputation": 3664, "user_id": 1909094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RU6fC.jpg?s=128&g=1", "display_name": "Lake", "link": "https://stackoverflow.com/users/1909094/lake"}, "edited": false, "score": 1, "creation_date": 1475754498, "post_id": 38499909, "comment_id": 67075964, "body": "@Lake As of OpenMesh 6.3, the documentation has been updated accordingly."}], "tags": [], "owner": {"reputation": 832, "user_id": 3077540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMo4X.png?s=128&g=1", "display_name": "jsb", "link": "https://stackoverflow.com/users/3077540/jsb"}, "is_accepted": true, "score": 4, "last_activity_date": 1469170316, "last_edit_date": 1469170316, "creation_date": 1469092446, "answer_id": 38499909, "question_id": 38483848, "link": "https://stackoverflow.com/questions/38483848/openmesh-decimater-does-not-reduce-vertex-number/38499909#38499909", "title": "OpenMesh Decimater does not reduce vertex number", "body": "<p>Decimation changes the connectivity of the mesh by removing elements (vertices, faces, etc.). Removal of mesh elements in OpenMesh is implemented by tentatively marking the respective elements for deletion (using the <code>mesh.status(handle).deleted()</code> property). The actual removal of deleted elements happens only when explicitly requested, by calling <code>mesh.garbage_collection()</code>. Before garbage collection, <code>mesh.n_vertices()</code> still includes vertices that are marked for deletion in its count.</p>\n\n<p>The Decimator does not automatically prompt a garbage collection; it is left for the user to do so. Inserting a call to <code>mesh.garbage_collection()</code> after <code>decimater.decimate_to(...)</code> should solve your problem.</p>\n"}], "owner": {"reputation": 3664, "user_id": 1909094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RU6fC.jpg?s=128&g=1", "display_name": "Lake", "link": "https://stackoverflow.com/users/1909094/lake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 1, "accepted_answer_id": 38499909, "answer_count": 1, "score": 2, "last_activity_date": 1469170316, "creation_date": 1469024371, "question_id": 38483848, "link": "https://stackoverflow.com/questions/38483848/openmesh-decimater-does-not-reduce-vertex-number", "title": "OpenMesh Decimater does not reduce vertex number", "body": "<p>I am trying to decimate a mesh using OpenMesh.\nI followed the very example that is stated in the doc:</p>\n\n<pre><code>    cout &lt;&lt; \"Vertices: \" &lt;&lt; mesh-&gt;n_vertices() &lt;&lt; endl;\n\n    DecimaterT&lt;Mesh&gt;   decimater(*mesh);  // a decimater object, connected to a mesh\n    ModQuadricT&lt;Mesh&gt;::Handle hModQuadric;      // use a quadric module\n\n    decimater.add(hModQuadric); // register module at the decimater\n    decimater.initialize();       // let the decimater initialize the mesh and the\n                                  // modules\n    decimater.decimate_to(15000);         // do decimation\n\n    cout &lt;&lt; \"Vertices: \" &lt;&lt; decimater.mesh().n_vertices() &lt;&lt; endl;\n</code></pre>\n\n<p>decimate_to method correctly terminates and returns 56,000, which is the number of vertices that should have collapsed.</p>\n\n<p>However, I can tell by the log that the vertex number on the mesh did not change.\nHow is this possible?</p>\n"}, {"tags": ["c++", "templates", "data-structures"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1469024150, "post_id": 38483746, "comment_id": 64369696, "body": "<code>static_cast</code> on get is only a small part of the problem. In your example, what would the declaration of the hypothetical <code>vector::push</code> be?"}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 1, "creation_date": 1469024193, "post_id": 38483746, "comment_id": 64369736, "body": "It is possible, but that would mean adopting a pure C-style strategy. The main example I can give you is the way linked lists and RB trees are implemented within the Linux kernel"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 1, "creation_date": 1469024284, "post_id": 38483746, "comment_id": 64369817, "body": "Using templates you can get containers storing elements by value. In case of <code>void *</code> it wouldn&#39;t be an option..."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 4, "creation_date": 1469025537, "post_id": 38483746, "comment_id": 64370793, "body": "What is it about templates that you feel you have to avoid them? They are an excellent solution to this problem."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1469025718, "post_id": 38483746, "comment_id": 64370940, "body": "What is the actual problem that you feel that the template prevents you from solving? Do you need a heterogenous or something?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1469027932, "post_id": 38483746, "comment_id": 64371210, "body": "Why do you want &quot;to not use the template&quot;? This really seems like an XY question. Anyway, optimised stdlib implementations will use <code>void *</code> as a main base for pointer-type specialisations wherever possible, so if you&#39;re trying to do any premature optimisation, they&#39;ve already beaten you to it!"}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1469033982, "post_id": 38483746, "comment_id": 64374918, "body": "It is not impossible. It is not impractical. It depends on your problem. How do you know what type is associated with your data when you extract an entry from the container? Which leads to tagged <code>union</code>. And ... I think <code>reinterpret_cast</code> on <code>void*</code> is better."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1469029144, "post_id": 38484247, "comment_id": 64371892, "body": "This is why things like <code>boost::any</code>, soon to be <code>std::any</code>, are templates with additional scaffolding to track the type, call the right <code>delete</code>r, etc. Doing this manually really doesn&#39;t seem worthwhile, as you indicated. By my understanding of &quot;modern C++&quot;, anything that would require manual memory management, exotic casts, etc should be handled by the library or other carefully made wrappers; user code shouldn&#39;t do any."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1469034253, "post_id": 38484247, "comment_id": 64375104, "body": "Someone needs to write the libraries and the wrappers. User code (whatever this means) can also be a library."}], "tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1469025954, "last_edit_date": 1469025954, "creation_date": 1469025378, "answer_id": 38484247, "question_id": 38483746, "link": "https://stackoverflow.com/questions/38483746/data-structure-with-type-specific-but-without-template/38484247#38484247", "title": "Data structure with type-specific, but without template", "body": "<p>I will give you an example why can it be dangerous to use such an collection. Consider the code below:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nusing anyvector = std::vector&lt;void *&gt;;\n\nint main() {\n   anyvector av;\n   av.push_back(new int(10));\n   std::cout &lt;&lt; (*static_cast&lt;int*&gt;(av[0])) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>the <code>av[0]</code> is a pointer to int created by old-fashioned c++ way using <code>new</code> keyword. As such one should free the memory allocated this way using <code>delete</code> keyword. But to do this the pointer should be first cast to the right type to let compiler know what is he really deleting in order to prevent from undefined behaviour. </p>\n\n<p>To be clear I'm not saying it is impossible nor impractical but it require from the programmer full consciousness...</p>\n"}, {"comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1469030972, "post_id": 38484528, "comment_id": 64373196, "body": "Hmmm grouping -&gt; storing a collection of?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1469031174, "post_id": 38484528, "comment_id": 64373339, "body": "@TimStraubinger That&#39;s a fitting word for containers that indeed store the objects (like the standard containers), but we are also considering <code>void*</code>. When we use <code>void*</code> we aren&#39;t <i>&quot;storing&quot;</i> the objects. We just refer to them. This is why I have trouble coming up with a word describing the use of data structures in general."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1469029092, "last_edit_date": 1469029092, "creation_date": 1469027981, "answer_id": 38484528, "question_id": 38483746, "link": "https://stackoverflow.com/questions/38483746/data-structure-with-type-specific-but-without-template/38484528#38484528", "title": "Data structure with type-specific, but without template", "body": "<blockquote>\n  <p>Is it possible to not use the template?</p>\n</blockquote>\n\n<p>Yes. It is possible to define a general data structure, that allows grouping <sup>&lt;-- I don't know what verb to use here</sup> objects of any type, without using a template.</p>\n\n<p>There is the \"C way\" (templates do not exist in C). The C way is to use <code>void*</code>. You are apparently already familiar, but for other readers of the answer, <code>void*</code> is a special pointer type, that can point to an object of any type. When you use <code>void*</code> to refer to an object, you essentially throw away all type safety that the language offers.</p>\n\n<p>I don't think there are any non-template containers <sup>\u2020</sup> in the standard library. However, if it is not too much to use the offered templates to instantiate <code>std::vector&lt;void*&gt;</code> or similar, then you can certainly use such template instance to store pointers to any objects.</p>\n\n<p>Templates are strongly preferred to <code>void*</code> because templates do not throw type safety out of the window. Templates are much easier to use correctly.</p>\n\n<p><sup>\u2020</sup> Not yet. But <code>std::any</code> is planned to be introduced in C++17. It can be used in stead of <code>void*</code>. Using <code>std::any</code> you still throw away compile time type safety, but at least you retain run time safety (you'll get an exception instead of potentially dragons when you have a bug). And unlike <code>void*</code>, <code>std::any</code> manages the memory of the stored object. Note that while <code>std::any</code> is not a template, most of its member functions are.</p>\n\n<hr>\n\n<blockquote>\n  <p>Are there any other alternative approaches?</p>\n</blockquote>\n\n<p>Besides templates and <code>void*</code>? Technically, you could also use macros to generate different versions of same program, similarly to instantiating a template. This is sometimes used in C. There is no reason do this in C++, because templates are better in every way.</p>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1469031500, "creation_date": 1469031500, "answer_id": 38485772, "question_id": 38483746, "link": "https://stackoverflow.com/questions/38483746/data-structure-with-type-specific-but-without-template/38485772#38485772", "title": "Data structure with type-specific, but without template", "body": "<p>You can rely on type erased structures.<br>\nAs a minimal, working and na\u00efve example:</p>\n\n<pre><code>#include&lt;memory&gt;\n#include&lt;iostream&gt;\n#include&lt;vector&gt;\n\nstruct Container {\n    struct B {\n        virtual void operator()() = 0;\n    };\n\n    template&lt;class T&gt;\n    struct D: B {\n        D(T t): o{t} {}\n        void operator()() override { o(); }\n        T o;\n    };\n\n    template&lt;typename T&gt;\n    void add(T t) {\n        vec.push_back(std::unique_ptr&lt;B&gt;{new D&lt;T&gt;{t}});\n    }\n\n    void operator()() {\n        for(auto &amp;ref: vec) (*ref)();\n    }\n\n    std::vector&lt;std::unique_ptr&lt;B&gt;&gt; vec;\n};\n\nstruct P {\n    void operator()() { std::cout &lt;&lt; \"P\" &lt;&lt; std::endl; }\n};\n\nstruct Q {\n    void operator()() { std::cout &lt;&lt; \"Q\" &lt;&lt; std::endl; }\n};\n\nint main() {\n    Container c;\n    P p;\n    Q q;\n    c.add(p);\n    c.add(q);\n    c();\n}\n</code></pre>\n\n<p>C++17 will probably bring in <code>std::any</code> and let you doing it easily.<br>\nUntil then, you can use <code>boost::any</code> or an homemade type erased class like the one above.</p>\n"}, {"tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": false, "score": 2, "last_activity_date": 1469033621, "creation_date": 1469033621, "answer_id": 38486443, "question_id": 38483746, "link": "https://stackoverflow.com/questions/38483746/data-structure-with-type-specific-but-without-template/38486443#38486443", "title": "Data structure with type-specific, but without template", "body": "<p>I agree that templates are the correct way to approach containers, <code>std::any</code> (or <code>boost::any</code>) when you can't use containers. However, just for the fun part I'd like to note that perfect type reconstruction is possible via exceptions. Note this is <em>very much ill-recommended</em>, I'm just adding this for completeness. In this case,</p>\n\n<ul>\n<li>your vector is like <code>std::vector&lt;std::function&lt;void()&gt;&gt;</code> (can be simplified),</li>\n<li>you push elements like <code>v.push_back([e](){ throw e; });</code> and</li>\n<li>you visit elements by, yuck, not less than <code>catch</code>ing the exception thrown by e.g. <code>try{ v[i](); } catch(EType&amp; e) { ... }</code>.</li>\n</ul>\n\n<p>This is ugly, don't do this, this is slow, don't do this.. but, on the other hand, it allows for perfect visitation (including inheritance, which you don't get with <code>type_info</code>), open hierarchies (which you don't get with <code>variant</code>), chaining of visitors, without the need for base class &amp; additional virtual functions.</p>\n\n<p>BIG FAT WARNING: you probably wouldn't pass my CR with such a code - it's just mentioned for fun and theoretical completeness.</p>\n"}], "owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 38484528, "answer_count": 4, "score": 2, "last_activity_date": 1469033621, "creation_date": 1469024062, "last_edit_date": 1469024725, "question_id": 38483746, "link": "https://stackoverflow.com/questions/38483746/data-structure-with-type-specific-but-without-template", "title": "Data structure with type-specific, but without template", "body": "<p>I have noticed that most (all?) of C++ data structures that can store a user defined type use template:</p>\n\n<pre><code>std::vector&lt;T&gt;, std::unordered_map&lt;T....&gt;, etc.\n</code></pre>\n\n<p>It seems to me that it is required, otherwise those data-structures will have to return as the sinister pointer <code>void*</code> that users have to cast manually as follows:</p>\n\n<pre><code>std::vector a; \nint b;\na.push_back(b);\nstatic_cast&lt;int&gt;(a.get(0));\n</code></pre>\n\n<p>Is it possible to not use the template?  Are there any other alternative approaches?</p>\n\n<p><strong>Edit:</strong> \nMany comments suggest that without template, it is impossible / impractical.  (Thank!)    </p>\n\n<p>What if I limited <code>&lt;T&gt;</code> to be a real pointer (e.g. not int/float), will it still be impractical?</p>\n"}, {"tags": ["java", "c++", "type-conversion", "wrapper", "jna"], "comments": [{"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1469041348, "post_id": 38483553, "comment_id": 64379244, "body": "You <i>definitely</i> can&#39;t return <code>std::string</code>, you need to return an allocated block of memory containing a C string (nominally std::string.c_str()) which will be guaranteed not to be freed until JNA has a chance to create a Java String based on its contents."}, {"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1469041428, "post_id": 38483553, "comment_id": 64379286, "body": "I&#39;d recommend storing the object encoding on the object itself (even if it&#39;s regenerated on every call to <code>encode</code>) so that the memory doesn&#39;t get freed, then return a pointer to that string&#39;s C string buffer."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4139711"}, "is_accepted": false, "score": 0, "last_activity_date": 1469024651, "creation_date": 1469024651, "answer_id": 38483959, "question_id": 38483553, "link": "https://stackoverflow.com/questions/38483553/how-to-work-with-c-objects-in-jna/38483959#38483959", "title": "How to work with C++ objects in JNA", "body": "<p>Sorry for posting a comment here, I don't have enough rep to properly post in the comment section.</p>\n\n<p>I don't have much experience with java JNA stuff but in the C++ world </p>\n\n<pre><code>extern \"C\" {}\n</code></pre>\n\n<p>is used for making C++ code have C linkage. In encoder_wrapper.h you're using std::string which is a pure c++ construct. Have you tried removing the extern \"C\"?</p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 1682733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/864a037e9775679fbb97f44b1970333b?s=128&d=identicon&r=PG", "display_name": "AdityaTS", "link": "https://stackoverflow.com/users/1682733/adityats"}, "edited": false, "score": 0, "creation_date": 1469031944, "post_id": 38484041, "comment_id": 64373773, "body": "I don&#39;t think that is the problem here. I changed the string to char* and error is still the same at the same point."}], "tags": [], "owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "is_accepted": false, "score": 1, "last_activity_date": 1469024876, "creation_date": 1469024876, "answer_id": 38484041, "question_id": 38483553, "link": "https://stackoverflow.com/questions/38483553/how-to-work-with-c-objects-in-jna/38484041#38484041", "title": "How to work with C++ objects in JNA", "body": "<p>As Vybz is suggesting, your problem is mixing C++ with JNA. JNA does not know about C++ structures and expects pure C.</p>\n\n<p>In other words you can't assume a Java String is the same as a std::string. You can't use std::string in your interface.</p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 1682733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/864a037e9775679fbb97f44b1970333b?s=128&d=identicon&r=PG", "display_name": "AdityaTS", "link": "https://stackoverflow.com/users/1682733/adityats"}, "is_accepted": true, "score": 0, "last_activity_date": 1469171937, "creation_date": 1469171937, "answer_id": 38520441, "question_id": 38483553, "link": "https://stackoverflow.com/questions/38483553/how-to-work-with-c-objects-in-jna/38520441#38520441", "title": "How to work with C++ objects in JNA", "body": "<p>I solved this by enclosing the void* in a structure and returning the structure to JNA. Every time the <code>newEncoder</code> is called, a structure instance is created which will have a new Encoder object casted as void* as a member. </p>\n\n<p>The struct object is passed to the <code>encode</code> function every time. This method in turn casts the void* back to the object and calls the <code>originalEncode</code> method.</p>\n"}], "owner": {"reputation": 89, "user_id": 1682733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/864a037e9775679fbb97f44b1970333b?s=128&d=identicon&r=PG", "display_name": "AdityaTS", "link": "https://stackoverflow.com/users/1682733/adityats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1612, "favorite_count": 0, "accepted_answer_id": 38520441, "answer_count": 3, "score": 0, "last_activity_date": 1469172001, "creation_date": 1469023552, "last_edit_date": 1469172001, "question_id": 38483553, "link": "https://stackoverflow.com/questions/38483553/how-to-work-with-c-objects-in-jna", "title": "How to work with C++ objects in JNA", "body": "<p>I am trying to access a C++ library from Java using JNA. To do so I have written a thin wrapper around the C++ methods that I require. However, wrapping the C++ object, passing to Java and back to C++ results in Invalid Memory access while accessing the object in C++. Any pointers on why this is happening will be very helpful.</p>\n\n<p><strong>newencoder.h</strong></p>\n\n<pre><code>Class Encoder {\n\npublic:\nEncoder();\n~Encoder();\n\ntemplate&lt;class Type&gt;\nbool originalEncode(Type* input);\n\n}\n</code></pre>\n\n<p><strong>encoder_wrapper.h</strong></p>\n\n<pre><code>typedef void* EncoderWrap;\n\n    extern \"C\" {\n    EncoderWrap newEncoder();\n\n    const char* encode(EncoderWrap vcEncoder);\n    }\n</code></pre>\n\n<p><strong>encoder_wrapper.cpp</strong></p>\n\n<pre><code>#include \"encoder_wrapper.h\"\n#include \"newencoder.h\"\n\nEncoderWrap newEncoder() {\n    return reinterpret_cast&lt;void*&gt;(new Encoder());\n}\n\nconst char* encode(EncoderWrap encoderObj) {\n        std::string input;\n        (reinterpret_cast&lt;Encoder*&gt;(encoderObj))-&gt;originalEncode(&amp;input); //This is where the invalid memory access occurs. Commenting this line and returning a placeholder string does not throw any error.\n        return input.c_str();\n    }\n</code></pre>\n\n<p><strong>JNA</strong></p>\n\n<pre><code>private static class Encoder {\n\n    public static native Pointer newEncoder();\n    public static native String encode(Pointer encoderObj);\n\n    static {\n            Native.setProtected(true);\n            Native.register(\"encoderlib\");\n    }\n\n}\n\n//Code that calls the native methods\n\nPointer encoderObj = Encoder.newEncoder(); //Does not fail\nString result = Encoder.encode(encoderObj); //Results in Invalid Memory access\n</code></pre>\n\n<p>I tried calling the <code>encode()</code> method from within the C++ method <code>newEncoder()</code> and that works as expected. This memory error only happens when I receive the encoder object casted as void* in java and pass it back to the C++ method <code>enocode()</code>.</p>\n"}, {"tags": ["c++", "qt", "model-view-controller"], "answers": [{"tags": [], "owner": {"reputation": 5097, "user_id": 3175480, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/agIDd.jpg?s=128&g=1", "display_name": "Gluttton", "link": "https://stackoverflow.com/users/3175480/gluttton"}, "is_accepted": false, "score": 1, "last_activity_date": 1469024115, "last_edit_date": 1469024115, "creation_date": 1469023694, "answer_id": 38483604, "question_id": 38483478, "link": "https://stackoverflow.com/questions/38483478/qt-model-view-concept-with-text-browser/38483604#38483604", "title": "Qt: model/view concept with text browser", "body": "<blockquote>\n  <p>Is there a way to use QTextEdit or QPlainTextEdit with the model/view concept in Qt?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>For using model/view concept you need use already existed classes which inherit <a href=\"http://doc.qt.io/qt-5/qabstractitemview.html\" rel=\"nofollow\">QAbstractItemView</a> (such as: <code>QColumnView</code>, <code>QHeaderView</code>, <code>QListView</code>, <code>QTableView</code> and <code>QTreeView</code>) or inherit your custom class.</p>\n"}, {"tags": [], "owner": {"reputation": 510, "user_id": 4773274, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3a40ce1edf1b405c6cc3167533da30fa?s=128&d=identicon&r=PG&f=1", "display_name": "holzkohlengrill", "link": "https://stackoverflow.com/users/4773274/holzkohlengrill"}, "is_accepted": false, "score": 1, "last_activity_date": 1469025002, "last_edit_date": 1469025002, "creation_date": 1469024249, "answer_id": 38483805, "question_id": 38483478, "link": "https://stackoverflow.com/questions/38483478/qt-model-view-concept-with-text-browser/38483805#38483805", "title": "Qt: model/view concept with text browser", "body": "<p>Have a look at the Qt documentation. There are the options you have: \n<a href=\"http://doc.qt.io/qt-4.8/model-view-programming.html\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/model-view-programming.html</a></p>\n\n<h1>Models</h1>\n\n<blockquote>\n  <p><code>QAbstractItemModel</code> provides an interface to data that is flexible\n  enough to handle views that represent data in the form of tables,\n  lists, and trees. However, when implementing new models for list and\n  table-like data structures, the <code>QAbstractListModel</code> and\n  <code>QAbstractTableModel</code> classes are better starting points because they\n  provide appropriate default implementations of common functions.</p>\n</blockquote>\n\n<h1>Views</h1>\n\n<blockquote>\n  <p><code>QListView</code> displays a list of items, <code>QTableView</code> displays data from\n  a model in a table, and <code>QTreeView</code> shows model items of data in a\n  hierarchical list. Each of these classes is based on the\n  <code>QAbstractItemView</code> abstract base class.</p>\n</blockquote>\n\n<h1>Controller</h1>\n\n<blockquote>\n  <p><code>QAbstractItemDelegate</code> is the abstract base class for delegates in\n  the model/view framework.</p>\n</blockquote>\n"}], "owner": {"reputation": 71, "user_id": 6614116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7b7588ace46861b43343597f5f2326?s=128&d=identicon&r=PG&f=1", "display_name": "ram&#243;n", "link": "https://stackoverflow.com/users/6614116/ram%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1469025002, "creation_date": 1469023359, "question_id": 38483478, "link": "https://stackoverflow.com/questions/38483478/qt-model-view-concept-with-text-browser", "title": "Qt: model/view concept with text browser", "body": "<p>I am writing an application in Qt with C++. In this application I have to display an amount of data in a text box.</p>\n\n<p>Is there a way to use QTextEdit or QPlainTextEdit with the model/view concept in Qt? I only found list, tree, or table View classes with mvc functionality.</p>\n"}, {"tags": ["c++", "performance", "stl"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469023763, "post_id": 38483422, "comment_id": 64369440, "body": "<i>I&#39;m sure the compiler isn&#39;t doing optimizations</i> -- Let&#39;s see the assembly listing."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1469023844, "post_id": 38483422, "comment_id": 64369493, "body": "I read original article, nevermind"}, {"owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "edited": false, "score": 0, "creation_date": 1469028192, "post_id": 38483422, "comment_id": 64371303, "body": "I meant vector as sequence of elements, not <code>std::vector</code>. I have corrected to make the meaning clearer."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1469028802, "post_id": 38483422, "comment_id": 64371657, "body": "&quot;<i>Or should I actually keep push_back if the amount of elements to be inserted isn&#39;t likely to be big?</i>&quot; Considering how trivial the performance difference is in this case, do whatever makes your code seem the most reasonable."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1469035734, "post_id": 38483422, "comment_id": 64375927, "body": "The article is from 2011."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "edited": false, "score": 0, "creation_date": 1469038858, "post_id": 38483422, "comment_id": 64377858, "body": "You are measuring milliseconds using GetTickCount() which is accurate to 10-15 ms.  QueryPerformanceFrequency()/QueryPerformanceCounter() will provide greater resolution."}], "answers": [{"comments": [{"owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "edited": false, "score": 0, "creation_date": 1469028526, "post_id": 38483697, "comment_id": 64371496, "body": "I thought of it, but concluded it couldn&#39;t be that significant, being a single check over as much as <code>64</code> elements. However, I agree this is the most likely explanation at the moment."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 12, "last_activity_date": 1469023925, "creation_date": 1469023925, "answer_id": 38483697, "question_id": 38483422, "link": "https://stackoverflow.com/questions/38483422/push-back-faster-than-insert/38483697#38483697", "title": "Push_back faster than insert?", "body": "<p><code>deque::insert</code> effectively has 3 possible ways of operating: general insert, insert in front, insert in back. Because of that, every time you call <code>insert</code>, it must do a test to see which way it needs to insert. So it has to test the iterator you pass against the front and the back.</p>\n\n<p><code>deque::push_back</code> has only 1 mode of operation: insert in back.</p>\n\n<p>The advantage of using a bulk insert operation is that the container can detect exactly how much memory it needs to allocate to perform the whole insertion, since it can get the length of the iterator range. So the larger the bulk insert, the better <code>insert</code> will be.</p>\n\n<p>Well, the better for <strong><code>vector</code></strong> at least.</p>\n\n<p>See with <code>vector</code>, if you insert 30,000 elements one at a time, you're likely to perform reallocation ~14-15 times. That means allocating new memory and copying the old data into that memory. Whereas if you insert 30,000 elements all at once, you get a <em>single</em> reallocation.</p>\n\n<p><code>deque</code> is typically implemented as an array of fixed-size blocks. Because of that, if you insert 30,000 elements one at a time, you will get ~3,000 allocations (depending on the block size). If you insert 30,000 elements all at once, you will get... ~3,000 allocations. So you're not really saving much.</p>\n\n<p>Since bulk insert isn't much different from single insert for <code>deque</code>, what happens is a fight between micro-optimization issues. Every <code>insert</code> call has to do iterator comparison to see how to perform that insertion. As such, the smaller the insertions, the less efficient <code>insert</code> will be. <code>push_back</code> doesn't have that overhead, but it is a function call for each element. So it has that overhead.</p>\n\n<p>Therefore, <code>insert</code> will likely win when the number of elements added per insert is high.</p>\n"}], "owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2102, "favorite_count": 2, "answer_count": 1, "score": 7, "last_activity_date": 1469028133, "creation_date": 1469023244, "last_edit_date": 1469028133, "question_id": 38483422, "link": "https://stackoverflow.com/questions/38483422/push-back-faster-than-insert", "title": "Push_back faster than insert?", "body": "<p>I'm using <code>std::deque</code>. I was sure that substituting a loop with a <code>push_back</code> with a single <code>insert</code> would yield an increase in performance. It is also recommended, for instance <a href=\"https://pkisensee.wordpress.com/2011/06/02/efficient-stl-insertion-tip-of-the-month/\" rel=\"noreferrer\">here</a>.</p>\n\n<p>But now I'm not so sure anymore. </p>\n\n<p>I've run some benchmarks on test code.</p>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include\"queueInsert.h\"\n\n#include&lt;Windows.h&gt;\n\nstd::deque&lt;int&gt; queue;\n\nconstexpr size_t len = 64;\n\nint arr[len];\n\nint main()\n{\n    DWORD startTime = GetTickCount();\n    for (int i = 0; i &lt; 100000; ++i)\n    {\n        insert(queue, arr, len);\n    }\n    DWORD endTime = GetTickCount();\n\n    return endTime - startTime;\n}\n</code></pre>\n\n<p>queueInsert.h:</p>\n\n<pre><code>#include&lt;deque&gt;\n\nvoid insert(std::deque&lt;int&gt;&amp;, int* arr, int n);\n</code></pre>\n\n<p>queueInsert.cpp -push version</p>\n\n<pre><code>#include \"queueInsert.h\"\n\nvoid insert(std::deque&lt;int&gt;&amp; queue, int* arr, int n)\n{\n    for (int i = 0; i &lt; n; ++i)\n    {\n        queue.push_back(arr[i]);\n    }\n}\n</code></pre>\n\n<p>queueInsert.cpp -insert version</p>\n\n<pre><code>#include \"queueInsert.h\"\n\nvoid insert(std::deque&lt;int&gt;&amp; queue, int* arr, int n)\n{\n    queue.insert(queue.end(), arr, arr + n);\n}\n</code></pre>\n\n<p>I get <code>203</code> milliseconds with <code>push_back</code>, but <code>218</code> with <code>insert</code>.</p>\n\n<p>Changing <code>len</code> to <code>6</code>, and increasing the iterations to one million, keeps the same result: <code>219</code> mills for <code>push</code> and <code>266</code> for <code>insert</code>. </p>\n\n<p>Only with <code>len = 640</code> does <code>push</code> lose out, and even then by very little: <code>1531</code> for <code>push</code> against <code>1437</code> for <code>insert</code>.</p>\n\n<p>I'm compiling in Release in VisualStudio 2015 under Windows 10. </p>\n\n<p>I'm sure the compiler isn't doing optimizations as inlining the constant number of iterations or fusing the loops, as every time i change the implementation only <code>queueInsert.cpp</code> is recompiled.</p>\n\n<p>Am i doing profiling wrong? Or should I actually keep <code>push_back</code> if the amount of elements to be inserted isn't likely to be big?</p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "gdi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469023502, "post_id": 38483273, "comment_id": 64369243, "body": "As far as I know, there isn&#39;t even a supported way to create a child window for the desktop. But if you insist that you must Hack The Planet\u2122, consider creating the window without a redirection bitmap (<code>WS_EX_NOREDIRECTIONBITMAP</code>) and manually add a DirectX surface for rendering. That <i>might</i> give you more control over desktop composition. Or maybe you can use the DirectComposition API to control desktop composition, although I have no experience with that."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1469029191, "post_id": 38483273, "comment_id": 64371927, "body": "Why are you attempting to do this unsupported thing? Do you realise that you are not supposed to do this?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1469046386, "post_id": 38483273, "comment_id": 64382062, "body": "Why make it a child?  What problem does that solve that simply placing the window causes?  Have you considered how this will work under Remote Desktop?  With Aero switche off?  With Windows 8, 8.1, and 10?"}, {"owner": {"reputation": 11, "user_id": 6613999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c9b08be6096ac2cd6ff19cccd8fed60?s=128&d=identicon&r=PG&f=1", "display_name": "shrln", "link": "https://stackoverflow.com/users/6613999/shrln"}, "edited": false, "score": 0, "creation_date": 1469049950, "post_id": 38483273, "comment_id": 64383789, "body": "Why should this be &quot;unsupported&quot;? Didn&#39; read anything about it in the docs. It&#39;s afaik the only way to pin a window to the desktop, placing it at the z-order (bottom) does not work reliably, see: Openhardwaremonitor gadget, Rainmeter, or even if you dare to still use it, the Windows 7 sidebar.exe. So if even the Microsoft executable struggles with pinning a window at a specific z-order, i didn&#39;t see another way of doing it. It doesn&#39;t have to work for 8-10. If anyone can contribute a way to pin a window at a specific z-order, then i will gladly implement it ;-)"}, {"owner": {"reputation": 11, "user_id": 6613999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c9b08be6096ac2cd6ff19cccd8fed60?s=128&d=identicon&r=PG&f=1", "display_name": "shrln", "link": "https://stackoverflow.com/users/6613999/shrln"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469051543, "post_id": 38483273, "comment_id": 64384479, "body": "@IInspectable Isn&#39;t DirectComposition Win 8 or newer only?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469051890, "post_id": 38483273, "comment_id": 64384585, "body": "<i>&quot;Why should this be &quot;unsupported&quot;?&quot;</i> - Because cross-thread parent/child relationships are not supported by Explorer (see <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20130412-00/?p=4683\" rel=\"nofollow noreferrer\">Is it legal to have a cross-process parent/child or owner/owned window relationship?</a>). And yes, DirectComposition was introduced in Windows 8, my bad."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6613999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c9b08be6096ac2cd6ff19cccd8fed60?s=128&d=identicon&r=PG&f=1", "display_name": "shrln", "link": "https://stackoverflow.com/users/6613999/shrln"}, "edited": false, "score": 0, "creation_date": 1469272458, "post_id": 38541092, "comment_id": 64474667, "body": "btw. i tried every combination of the pixelFormat (DXGI_FORMAT &amp; D2D1_ALPHA_MODE) i could find in the documentation and it didnt change the behaviour as long as GDI was involved, so if no one comes up with a solution for GDI, the Direct2D approach seems to be the only &quot;answer&quot;"}], "tags": [], "owner": {"reputation": 11, "user_id": 6613999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c9b08be6096ac2cd6ff19cccd8fed60?s=128&d=identicon&r=PG&f=1", "display_name": "shrln", "link": "https://stackoverflow.com/users/6613999/shrln"}, "is_accepted": true, "score": 0, "last_activity_date": 1469272231, "creation_date": 1469272231, "answer_id": 38541092, "question_id": 38483273, "link": "https://stackoverflow.com/questions/38483273/disable-transparency-for-a-desktop-child-window/38541092#38541092", "title": "Disable transparency for a &quot;desktop&quot; child window", "body": "<p>Using Direct2D does the job as intended (100% opaque), as soon as i mix it with GDI (CreateDCRenderTarget or ID2D1GdiInteropRenderTarget) the whole transparency thing comes up again. So much for \"Direct2D and GDI Interoperability\"\nGuess it's time to port the legacy GDI code to Direct2D then ....</p>\n"}], "owner": {"reputation": 11, "user_id": 6613999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c9b08be6096ac2cd6ff19cccd8fed60?s=128&d=identicon&r=PG&f=1", "display_name": "shrln", "link": "https://stackoverflow.com/users/6613999/shrln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 38541092, "answer_count": 1, "score": 1, "last_activity_date": 1469274720, "creation_date": 1469022818, "question_id": 38483273, "link": "https://stackoverflow.com/questions/38483273/disable-transparency-for-a-desktop-child-window", "title": "Disable transparency for a &quot;desktop&quot; child window", "body": "<p>I pin a window to the desktop by making it a child of the WorkerW window that contains the desktop FolderView in Windows 7 Aero. So far this works perfectly for pinning the window to the desktop, but the window has some sort of transparency which it doesn't has as a topmost window.<a href=\"http://i.stack.imgur.com/KlBVT.png\" rel=\"nofollow\">Instead of a dark background RGB(0,21,32) the actual desktop background/wallpaper shines through</a></p>\n\n<pre><code>case WM_PAINT:\n    hdc = BeginPaint(hWnd, &amp;ps);\n    GetClientRect(hWnd, &amp;cr);\n    SelectObject(hdc, GetStockObject(DC_BRUSH));\n    SetDCBrushColor(hdc, RGB(0,21,32));\n    FillRect(hdc, &amp;cr, (HBRUSH) GetStockObject(DC_BRUSH));\n</code></pre>\n\n<p>The client area is drawn via GDI, i tried everything i could think of to make the window fully opaque: SetBkColor, SetLayeredWindowAttributes, WNDCLASSEX.style = CS_PARENTDC, using RGBA colors (only works to get even more transparency up to 100%, but setting it to opaque doesn't change the outcome)</p>\n\n<p><strong>Is there any way to draw an opaque window as a child of the Aero desktop?</strong></p>\n"}, {"tags": ["c++", "opengl", "rotation"], "answers": [{"tags": [], "owner": {"reputation": 1221, "user_id": 4285290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6312206b9e2c38d5f08968c41331656?s=128&d=identicon&r=PG&f=1", "display_name": "eldo", "link": "https://stackoverflow.com/users/4285290/eldo"}, "is_accepted": false, "score": 0, "last_activity_date": 1469179145, "creation_date": 1469179145, "answer_id": 38522735, "question_id": 38483167, "link": "https://stackoverflow.com/questions/38483167/rotating-and-translating-a-2d-image-with-opengl-fixed-function/38522735#38522735", "title": "Rotating and translating a 2D image with OpenGL fixed function", "body": "<p>To rotate around the center of the screen (0,0) you can change your entity's position according these equations:  </p>\n\n<p>x = x * cos(angle) - y * sin(angle)<br>\ny = x * sin(angle) - y * cos(angle) </p>\n\n<p>Where x and y are the positions of your entity and angle is the angle of rotation. If you want to face the same point after rotation, like the center of the rotation, you also have to rotate your entity around its center by negative angle. This is the same what a rotation matrix use, but</p>\n\n<p>If you want to rotate around a specific point you have to use coordinates relative to that point. Thats easy just substract the center point coordinates of the coordinates of your entity, do the rotation and add your center coordinates to your new position.\nThis is important because you were relative to an other point not the center and this is how vectors work. </p>\n"}], "owner": {"reputation": 463, "user_id": 3664211, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/be71f95dc8628e3ce157801731051dc6?s=128&d=identicon&r=PG&f=1", "display_name": "bender", "link": "https://stackoverflow.com/users/3664211/bender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1469179145, "creation_date": 1469022527, "last_edit_date": 1469022841, "question_id": 38483167, "link": "https://stackoverflow.com/questions/38483167/rotating-and-translating-a-2d-image-with-opengl-fixed-function", "title": "Rotating and translating a 2D image with OpenGL fixed function", "body": "<p>My code draws a texture on a 2D quad which should be translated, rotated and scaled: </p>\n\n<pre><code>double width = ... //window width\ndouble height = ... //window height\ndouble imagewidth = ... \ndouble imageheight = ...\nvec2 usertranslation = ... //additional translation in x,y direction from user input\ndouble rot_angle = ... //rotation angle from user input\n\nglMatrixMode(GL_PROJECTION);\nglLoadIdentity();\nglOrtho(0.0, width, 0.0, height, 0.0, -1.0);\nglMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\n\n// translate to the top center of the image and add user input translation\ndouble transx = (width - imagewidth) / 2 + usertranslation.x;\ndouble transy = height - imageheight + usertranslation.y;\nglTranslatef(transx, transy, 0);\n\n//this currently rotates around the center of the image, but what I need\n//is to rotate the image around the center of the window. \nglTranslatef(imagewidth / 2, imageheight / 2, 0);\nglRotatef(rot_angle, 0, 0, 1.0);\nglTranslatef(-imagewidth / 2, -imageheight / 2, 0);\n\n//bind the texture and draw the quad\ndrawTexturedQuad(); \n</code></pre>\n\n<p>Now my question is, what do I need to change to let the image always rotate around the center point of the window. I already tried somehting like this for the rotation: </p>\n\n<pre><code>glTranslatef(imagewidth / 2, imageheight - usertranslation.y - height, 0);\nglRotatef(rot_angle, 0, 0, 1.0);\nglTranslatef(-imagewidth  / 2, -(imageheight - usertranslation.y - height), 0);\n</code></pre>\n\n<p>But then I get a inverted top down translation if the image was rotated for 180 degrees (the image moves in the oposite direction on translation). </p>\n"}, {"tags": ["c++", "maven", "pom.xml"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 6613892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17330633735cb58134cc4e7822b2c70c?s=128&d=identicon&r=PG", "display_name": "Ekto", "link": "https://stackoverflow.com/users/6613892/ekto"}, "is_accepted": true, "score": 2, "last_activity_date": 1469088352, "creation_date": 1469088352, "answer_id": 38498451, "question_id": 38483120, "link": "https://stackoverflow.com/questions/38483120/how-to-configure-nar-maven-projects/38498451#38498451", "title": "How to configure NAR Maven projects?", "body": "<p>I figured.</p>\n\n<p>I browsed the <a href=\"https://github.com/maven-nar/nar-maven-plugin/wiki/Working-examples\" rel=\"nofollow\">working examples</a> in order to see where my mistake was, and on this particular example, <a href=\"https://github.com/imagej/imagej-launcher/blob/imagej-launcher-4.0.5/pom.xml#L145-L172\" rel=\"nofollow\">imagej-launcher</a>, we can see that it adds all the compiler configuration inside a <strong>c tag</strong> :</p>\n\n<pre><code>            &lt;configuration&gt;\n                &lt;c&gt;\n                    &lt;name&gt;gcc&lt;/name&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;**/*.c&lt;/include&gt;\n                    &lt;/includes&gt;\n                    &lt;options&gt;\n                            &lt;option&gt;-DLAUNCHER_VERSION=\"${project.version}\"&lt;/option&gt;\n                            &lt;option&gt;-DBUILD_NUMBER=\"${buildNumber}\"&lt;/option&gt;\n                            &lt;option&gt;-I${JAVA_HOME}/include&lt;/option&gt;\n                            &lt;option&gt;${java.os.include}&lt;/option&gt;\n                            &lt;option&gt;${stack.protector.option}&lt;/option&gt;\n                            &lt;option&gt;${architecture.option}&lt;/option&gt;\n                            &lt;option&gt;${subsystem.option}&lt;/option&gt;\n                            &lt;option&gt;${debug.option}&lt;/option&gt;\n                    &lt;/options&gt;\n               &lt;/c&gt;\n             ...\n</code></pre>\n\n<p>So I just added a <strong>cpp</strong> tag and put my options in it, and now it works fine :</p>\n\n<pre><code>    &lt;configuration&gt;\n      &lt;cpp&gt;\n          &lt;options&gt;\n              &lt;option&gt;/D_WINDOWS&lt;/option&gt;\n              &lt;option&gt;/D_WINDLL&lt;/option&gt;\n              &lt;option&gt;...&lt;/option&gt;\n          &lt;/options&gt;\n      &lt;/cpp&gt;\n</code></pre>\n"}], "owner": {"reputation": 46, "user_id": 6613892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17330633735cb58134cc4e7822b2c70c?s=128&d=identicon&r=PG", "display_name": "Ekto", "link": "https://stackoverflow.com/users/6613892/ekto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1420, "favorite_count": 0, "accepted_answer_id": 38498451, "answer_count": 1, "score": 1, "last_activity_date": 1469088352, "creation_date": 1469022417, "question_id": 38483120, "link": "https://stackoverflow.com/questions/38483120/how-to-configure-nar-maven-projects", "title": "How to configure NAR Maven projects?", "body": "<p>I am trying to <em>Mavenize</em> a C++ project with nar-maven, on Windows with MSVC. It is a shared library.<br/> \nI already tested successfully nar-maven on sample projects with this <a href=\"https://github.com/duns/maven-archetype-nar-lib\" rel=\"nofollow\">archetype</a>.<br/></p>\n\n<p>So now, I need to use the <a href=\"http://maven-nar.github.io/index.html\" rel=\"nofollow\">nar-maven-plugin</a> for a bigger project. In order to compile successfully, I need to add some arguments (includes, libs, preprocessor definitions...). And this is where I am stuck. Here is a sample of my current pom file :\n</p>\n\n<pre><code>&lt;project&gt;\n\n  ...\n\n  &lt;properties&gt;\n    &lt;skipTests&gt;true&lt;/skipTests&gt;\n  &lt;/properties&gt;  \n\n  &lt;build&gt;\n    &lt;defaultGoal&gt;integration-test&lt;/defaultGoal&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;com.github.maven-nar&lt;/groupId&gt;\n        &lt;artifactId&gt;nar-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.5.0&lt;/version&gt;\n        &lt;extensions&gt;true&lt;/extensions&gt;\n        &lt;configuration&gt;\n          &lt;options&gt;\n              &lt;option&gt;/D_WINDOWS&lt;/option&gt;\n              &lt;option&gt;/D_WINDLL&lt;/option&gt;\n              &lt;option&gt;...&lt;/option&gt;\n          &lt;/options&gt;\n          &lt;libraries&gt;\n            &lt;library&gt;\n              &lt;type&gt;shared&lt;/type&gt;\n            &lt;/library&gt;\n          &lt;/libraries&gt;\n          &lt;tests&gt;\n            &lt;test&gt;\n              &lt;name&gt;libblawin&lt;/name&gt;\n              &lt;link&gt;shared&lt;/link&gt;\n            &lt;/test&gt;\n          &lt;/tests&gt;\n\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;dependencies&gt;\n    ...\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Whatever parameter I add (options tag, includes tag...) within the configuration tag, it is not taken in account by maven. Indeed, when I look for the command line used to compile a source file (using the -X option with mvn) the options added in the pom.xml are not included.<br/>\nThe command line used by maven :</p>\n\n<pre><code>Executing 'C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\bin\\amd64\\cl' with arguments:\n''\n'/c'\n'/nologo'\n'/EHsc'\n'/DNDEBUG'\n'/MD'\n'/GR'\n'/FdD:\\NAR-projects\\srt\\target\\nar\\obj\\amd64-Windows-msvc\\'\n'/DWIN32'\n'/ID:\\NAR-projects\\srt\\target\\nar\\obj\\amd64-Windows-msvc'\n'/ID:\\NAR-projects\\srt\\target\\nar\\obj\\amd64-Windows-msvc'\n'/ID:\\NAR-projects\\srt\\src\\main\\include'\n'/IC:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\include'\n'/IC:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\atlmfc\\include'\n'/IC:\\Program Files (x86)\\Windows Kits\\8.1\\Include\\shared'\n'/IC:\\Program Files (x86)\\Windows Kits\\8.1\\Include\\um'\n'/IC:\\Program Files (x86)\\Windows Kits\\8.1\\Include\\winrt'\n'/FoD:\\NAR-projects\\srt\\target\\nar\\obj\\amd64-Windows-msvc\\libraryExtern.1d1757c3.obj'\n'include/interapp/libraryExtern.cpp'\n</code></pre>\n\n<p>Anyway, I think that I am doing something wrong, and I hope you can help. I need to find a way to configure my project as I want.</p>\n"}, {"tags": ["c++", "trim", "outofrangeexception"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 7, "creation_date": 1469022038, "post_id": 38482878, "comment_id": 64368066, "body": "No, don&#39;t use a try-catch block. That&#39;s Java-think. In C++, exceptions should not be used for control flow. There&#39;s not really enough code here to recommend a solution, but as a guess, after the call to <code>find_first_not_of</code>, check whether <code>startpos</code> is equal to <code>std::string::npos</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469022813, "post_id": 38482878, "comment_id": 64368686, "body": "<i>My idea would be to use a try-catch block for it</i> -- No.  For C++, exceptions are to be used for <i>exceptional</i> conditions, not for masking coding bugs.  You get an exception in this case, you fix the bug that the exception detected, and not <code>try &#47; catch</code> around it."}, {"owner": {"reputation": 832, "user_id": 3939193, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb094ece8706efc178637c692fb93d2?s=128&d=identicon&r=PG&f=1", "display_name": "DrDonut", "link": "https://stackoverflow.com/users/3939193/drdonut"}, "edited": false, "score": 0, "creation_date": 1469023943, "post_id": 38482878, "comment_id": 64369557, "body": "The exception you get here is not because you reach the end of your file, only the end of your string. You could work around this by checking if &#39;startpos&#39; and &#39;endpos&#39; both exist and are not equal to each other."}], "owner": {"reputation": 61, "user_id": 6499512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d6bce3e21b4149ea5aa158376cd7f33c?s=128&d=identicon&r=PG&f=1", "display_name": "George G", "link": "https://stackoverflow.com/users/6499512/george-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469021790, "creation_date": 1469021790, "question_id": 38482878, "link": "https://stackoverflow.com/questions/38482878/preventing-out-of-range-exceptions-when-trimming-in-c", "title": "Preventing &quot;out of range&quot; exceptions when trimming in C++", "body": "<p>I'm attempting to trim the strings that I read in from a file. I read the string, trim it, then do my stuff with it. As I read through the file, I eventually reach the end, meaning the endpos+1 results in an out of range exception.</p>\n\n<p>What would be the \"best\" way of handling this issue?\nBelow is my trimming code.</p>\n\n<pre><code>size_t startpos = num.find_first_not_of(\" \");\nsize_t endpos = num.find_last_not_of(\" \");\nnum = num.substr(startpos, endpos-startpos+1); //out of range on final string read from file\n</code></pre>\n\n<p>My idea would be to use a try-catch block for it, but this seems very novice (I am one after all!)</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "function", "methods", "expression", "member-function-pointers"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1469021903, "post_id": 38482805, "comment_id": 64367941, "body": "Remember that a non-static member function pointer needs an instance of its class (an object) on which to operate.  One way of passing member function pointer(s) with an object is with std::function. See the <code>print_add</code> example: <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/function</a>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1469022089, "post_id": 38482805, "comment_id": 64368109, "body": "@RichardCritten Note the &quot;<b>undefined</b> function&quot; and &quot;<b>undefined</b> method&quot; <code>function</code> objects will not work, they need an address. Frankly I&#39;m not even sure how <code>decltype(m(foo))</code> works, I&#39;m just kinda going with it."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1469023097, "post_id": 38483298, "comment_id": 64368912, "body": "Note the &quot;<b>undefined</b> method&quot; I can&#39;t take the address. I&#39;ll bold those in the question so it&#39;s clear why this isn&#39;t a solution. It&#39;s almost like the function was treated as an expression when I passed it. Not sure how to do something similar with a method."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1469023163, "post_id": 38483298, "comment_id": 64368956, "body": "@JonathanMee Why do you mean by &quot;<b>undefined</b> method&quot;? A method that is declared but not define? If so, the above code work perfectly. The expression you give to <code>decltype</code> is never evaluated."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1469023272, "post_id": 38483298, "comment_id": 64369039, "body": "&quot;The above code work perfectly&quot;[sic] I&#39;m guessing you didn&#39;t test it before you made that statement: <a href=\"http://stackoverflow.com/q/38402133/2642059\">stackoverflow.com/q/38402133/2642059</a> It will not work at all."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 2, "creation_date": 1469023611, "post_id": 38483298, "comment_id": 64369323, "body": "@JonathanMee I did <a href=\"http://ideone.com/0BlsEt\" rel=\"nofollow noreferrer\">test it</a>, you did not. There is a <b>huge</b> difference between your code and the link you provide: In your code, the <code>&amp;</code> is inside the <code>decltype</code>. Per the standard <i>The operand of the decltype specifier is an unevaluated operand</i> and <i>An expression is potentially evaluated unless it is an unevaluated operand (Clause 5) or a subexpression thereof</i>, so <b>no</b>, <code>&amp;bar::foo</code> will never be evaluated in the above context."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1469023883, "post_id": 38483298, "comment_id": 64369520, "body": "Wow... so taking the address doesn&#39;t evaluate even though taking the address requires the function to be defined..."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1469024484, "post_id": 38483298, "comment_id": 64369990, "body": "@JonathanMee That&#39;s because <code>decltype</code> doesn&#39;t look at the implementation of functions, only the return types. It knows the expression <code>&amp;bar::foo</code> returns a method pointer, it doesn&#39;t need to know if it actually works."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1469024535, "post_id": 38483298, "comment_id": 64370030, "body": "@JonathanMee This is exactly the same behavior as in <a href=\"http://stackoverflow.com/questions/38373768/shouldnt-decltype-trigger-compilation-of-its-argument\">this question</a> you asked a few days ago - Whatever is inside <code>decltype()</code> will <b>never</b> be evaluated, so you will never really <i>&quot;take the address of the function&quot;</i>. All the compilers needs to know is that <code>&amp;bar::foo</code> is of type <code>void (bar::*) (char, short);</code>, which it gets from the <b>declaration</b>, from this it deduces which overloads of <code>m</code> it needs to consider, and from this it can get the return types."}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 2, "last_activity_date": 1469022874, "creation_date": 1469022874, "answer_id": 38483298, "question_id": 38482805, "link": "https://stackoverflow.com/questions/38482805/how-can-i-pass-an-undefined-method-like-an-undefined-function/38483298#38483298", "title": "How Can I Pass an Undefined Method Like an Undefined Function", "body": "<p>If you only want to use <code>decltype</code> on it, you simply need an extra <code>&amp;</code>:</p>\n\n<pre><code>decltype(m(&amp;bar::foo))\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 38483298, "answer_count": 1, "score": 1, "last_activity_date": 1469023151, "creation_date": 1469021612, "last_edit_date": 1495541685, "question_id": 38482805, "link": "https://stackoverflow.com/questions/38482805/how-can-i-pass-an-undefined-method-like-an-undefined-function", "title": "How Can I Pass an Undefined Method Like an Undefined Function", "body": "<p>Given that I was passing the <strong>undefined</strong> function:</p>\n\n<pre><code>void foo(char, short);\n</code></pre>\n\n<p>I <a href=\"https://stackoverflow.com/q/38463980/2642059\">learned how</a> to obtain the type <code>tuple</code> of the arguments by calling <code>decltype(m(foo))</code> with this function:</p>\n\n<pre><code>template &lt;typename Ret, typename... Args&gt;\ntuple&lt;Args...&gt; m(Ret(Args...));\n</code></pre>\n\n<p>I would now like to pass an <strong>undefined</strong> method:</p>\n\n<pre><code>struct bar { void foo(char, short); };\n</code></pre>\n\n<p>I had tried rewriting <code>m</code> like:</p>\n\n<pre><code>template &lt;typename Ret, typename C, typename... Args&gt;\ntuple&lt;Args...&gt; m(Ret(C::*)(Args...));\n</code></pre>\n\n<p>But when <a href=\"http://ideone.com/GwQiB6\" rel=\"nofollow noreferrer\">I try to call this</a> similarly with <code>decltype(m(bar::foo))</code> I get the error:</p>\n\n<blockquote>\n  <p>invalid use of non-static member function <code>void bar::foo(char, short int)</code></p>\n</blockquote>\n\n<p>How can I pass this method like I did for the function?</p>\n"}, {"tags": ["c++", "list", "push-back"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1469021714, "post_id": 38482790, "comment_id": 64367804, "body": "The constructor you show is not very interesting - the copy constructor would be. Also, the class definition would help. My educated guess: your class has a lot of members that are pointers, which you allocate in your constructor, and likely deallocate in the destructor. You don&#39;t have an explicit copy constructor, so the compiler-generated one just copies pointers. So you end up with two instances holding the same pointer, then one of them is destroyed and deallocates memory behind that pointer, and the other is left with a dangling pointer."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1469021838, "post_id": 38482790, "comment_id": 64367895, "body": "How is <code>seg_fac</code> declared in your class...?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469021948, "post_id": 38482790, "comment_id": 64367981, "body": "<code>int* empty_labels = new int[width*height];</code> -- Why aren&#39;t you using <code>std::vector&lt;int&gt; empty_labels(width*height, 0)</code>?  Same thing with the rest of the code that does <code>new[]</code>.  You could use <code>std::vector</code> and not need to do this.  This may not sound important, but could be part and parcel of why you&#39;re having issues with <code>voxels.push_back(voxel)</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1469022032, "post_id": 38482790, "comment_id": 64368061, "body": "See also: <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">Rule of Three</a>"}, {"owner": {"reputation": 73, "user_id": 6325778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f3e10ae05c6579e078482482ed8ec30?s=128&d=identicon&r=PG&f=1", "display_name": "Sven", "link": "https://stackoverflow.com/users/6325778/sven"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469022143, "post_id": 38482790, "comment_id": 64368150, "body": "@PaulMcKenzie I&#39;d like to do it this way, but i can&#39;t because I have to work with another function, that only supports these inputs. And this function is not written by me."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1469022171, "post_id": 38482790, "comment_id": 64368177, "body": "Almost as I thought: you do have an explicit copy constructor after all, but all it does is copy pointers, leaving two instances both thinking they own the same memory."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 2, "creation_date": 1469022208, "post_id": 38482790, "comment_id": 64368213, "body": "Igor has it. When you insert into the list, you &quot;copy construct&quot; the object, then delete the original. Since your class has many raw pointers, they will not copy correctly. Precisely why it doesn&#39;t copy two specific items we can&#39;t know without seeing their definitions, but we already know most of the class will fail at the first copy."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469022268, "post_id": 38482790, "comment_id": 64368266, "body": "@sven -- You do know that passing the address of the first element in a vector is the same as passing a pointer to a buffer?  So the excuse that the other functions have to use this format doesn&#39;t hold water.  <code>set_depth(depth.data())</code> If <code>data</code> is a vector."}, {"owner": {"reputation": 73, "user_id": 6325778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f3e10ae05c6579e078482482ed8ec30?s=128&d=identicon&r=PG&f=1", "display_name": "Sven", "link": "https://stackoverflow.com/users/6325778/sven"}, "edited": false, "score": 0, "creation_date": 1469022318, "post_id": 38482790, "comment_id": 64368314, "body": "Thanks to all of you, I&#39;m new to C++ so I didn&#39;t know that the pointers are a problem if I just copy them. I will read up on &quot;Rule of Three&quot; and change my code!"}, {"owner": {"reputation": 73, "user_id": 6325778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f3e10ae05c6579e078482482ed8ec30?s=128&d=identicon&r=PG&f=1", "display_name": "Sven", "link": "https://stackoverflow.com/users/6325778/sven"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469022397, "post_id": 38482790, "comment_id": 64368380, "body": "@PaulMcKenzi No I didn&#39;t know, but shouldn&#39;t be an excuse. Thanks!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1469022466, "post_id": 38482790, "comment_id": 64368442, "body": "You wouldn&#39;t need the <code>Rule of Three</code> if you used types that knew how to properly copy themselves.  Changing the raw pointers to safely-copyable types removes the need to write a copy constructor, assignment operator, and destructor."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1469022809, "post_id": 38482790, "comment_id": 64368681, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please. With emphasize on <b>minimal</b>."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 6325778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f3e10ae05c6579e078482482ed8ec30?s=128&d=identicon&r=PG&f=1", "display_name": "Sven", "link": "https://stackoverflow.com/users/6325778/sven"}, "is_accepted": true, "score": 0, "last_activity_date": 1469107258, "creation_date": 1469107258, "answer_id": 38505438, "question_id": 38482790, "link": "https://stackoverflow.com/questions/38482790/inserting-in-a-list-changes-values-c/38505438#38505438", "title": "Inserting in a list changes values c++", "body": "<p>After fiddling around with my <code>constructers</code>, <code>destructors</code> and the <code>operator=</code> I found out that I simply forgot to add </p>\n\n<pre><code>int sf_counter;\nbool subdiv;\nint seg_fac;\n</code></pre>\n\n<p>to my <code>copy-constructor</code>.\nSo the working <code>copy-constructor</code> looks like:</p>\n\n<pre><code>Voxelization::Voxelization(const Voxelization&amp; voxel):sf_counter(voxel.sf_counter),subdiv(voxel.subdiv),seg_fac(voxel.seg_fac),labels(new int[voxel.width*voxel.height]), centers(voxel.centers),n_seeds(voxel.n_seeds),pixels(new float[voxel.width*voxel.height*3]),depth(new float[voxel.width*voxel.height]),width(voxel.width),height(voxel.height),iterations(voxel.iterations),r1(voxel.r1),r2(voxel.r2),env_size(voxel.env_size),move_centers(voxel.move_centers),cloud(voxel.cloud),normal_cloud(voxel.normal_cloud){\nstd::copy(voxel.labels, voxel.labels + voxel.width*voxel.height, labels);\nstd::copy(voxel.pixels, voxel.pixels + voxel.width*voxel.height*3, pixels);\nstd::copy(voxel.depth, voxel.depth + voxel.width*voxel.height, depth);\nstd::copy(voxel.centers, voxel.centers + voxel.width*voxel.height, centers);\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6325778, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f3e10ae05c6579e078482482ed8ec30?s=128&d=identicon&r=PG&f=1", "display_name": "Sven", "link": "https://stackoverflow.com/users/6325778/sven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 38505438, "answer_count": 1, "score": -1, "last_activity_date": 1469107258, "creation_date": 1469021566, "last_edit_date": 1469092689, "question_id": 38482790, "link": "https://stackoverflow.com/questions/38482790/inserting-in-a-list-changes-values-c", "title": "Inserting in a list changes values c++", "body": "<p>I want to create multiple \"voxel\"-objects and put them in a list. But if I do so two of the values, that are stored by voxel, change.\nHere is the class definition:</p>\n\n<pre><code>class Voxelization{\n\nprivate:\nint sf_counter;\nbool subdiv;\nint seg_fac;\nint* labels;\nPixel&lt;int&gt;* centers;\nint n_seeds;\nfloat* pixels;\nfloat* depth;\nint width;\nint height;\nint iterations;\nfloat r1;\nfloat r2;\nint env_size;\nbool move_centers;\ntypename pcl::PointCloud&lt;PointT&gt;::ConstPtr&amp; cloud;\ntypename NormalCloudT::ConstPtr normal_cloud;\n}\n</code></pre>\n\n<p>And this is the copy constructor:</p>\n\n<pre><code>Voxelization::Voxelization(const Voxelization&amp; voxel):labels(voxel.labels), centers(voxel.centers),n_seeds(voxel.n_seeds),pixels(voxel.pixels),depth(voxel.depth),width(voxel.width),height(voxel.height),iterations(voxel.iterations),r1(voxel.r1),r2(voxel.r2),env_size(voxel.env_size),move_centers(voxel.move_centers),cloud(voxel.cloud){}\n</code></pre>\n\n<p>And with this code I'm inserting them:</p>\n\n<pre><code>  int seg_fac=100;\n  int sf_counter=0;\n  std::list&lt;Voxelization&gt; voxels\n  for(sf_counter; sf_counter&lt;seg_fac;sf_counter++){\n      Voxelization voxel(input_cloud_ptr,seg_fac,sf_counter);\n      voxels.push_back(voxel);\n  }\n</code></pre>\n\n<p>If I look at the variables, after I create the single voxel-objects, the values for seg_fac and sf_counter are right. But if I then insert them, and look them up in the list they change to something like 8744512 or -236461096.\nSo my question is, where does this come from?</p>\n\n<p>Any help is appreciated, and thanks in advance.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1469021861, "post_id": 38482776, "comment_id": 64367915, "body": "Might be an outdated compiler that also accepts <code>void main()</code>. (Not really, but why is it still so prevalent)."}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1469022035, "post_id": 38482913, "comment_id": 64368063, "body": "The string literal is not <code>const wchar_t*</code> either - it&#39;s an array of const <code>wchar_t</code> (not quite the same thing)."}, {"owner": {"reputation": 468, "user_id": 2829494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a65b077259fd54fe704b08beff43054?s=128&d=identicon&r=PG&f=1", "display_name": "DeathTails", "link": "https://stackoverflow.com/users/2829494/deathtails"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469022097, "post_id": 38482913, "comment_id": 64368115, "body": "Correct. I&#39;ll fix that."}], "tags": [], "owner": {"reputation": 468, "user_id": 2829494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a65b077259fd54fe704b08beff43054?s=128&d=identicon&r=PG&f=1", "display_name": "DeathTails", "link": "https://stackoverflow.com/users/2829494/deathtails"}, "is_accepted": false, "score": 3, "last_activity_date": 1469022207, "last_edit_date": 1469022207, "creation_date": 1469021879, "answer_id": 38482913, "question_id": 38482776, "link": "https://stackoverflow.com/questions/38482776/wrong-detection-in-the-same-name-functions/38482913#38482913", "title": "Wrong detection in the same name functions", "body": "<p>Your string literal is not a <code>wstring</code> but a <code>const wchar_t[]</code> which is more easily converted to a <code>bool</code> (via decay into a <code>const wchar_t*</code>) than a <code>wstring</code>.</p>\n\n<p>Running your code in Visual Studios gave me this error:<br>\n<code>warning C4800: 'const wchar_t *' : forcing value to bool 'true' or 'false' (performance warning)</code><br>\nwhich gives a pretty much perfect explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1469021985, "creation_date": 1469021985, "answer_id": 38482953, "question_id": 38482776, "link": "https://stackoverflow.com/questions/38482776/wrong-detection-in-the-same-name-functions/38482953#38482953", "title": "Wrong detection in the same name functions", "body": "<p>You have been bitten by the rules for implicit type conversions.  The problem is that <code>L\"my string data for test\"</code> is neither a <code>bool</code> nor a <code>std::wstring</code>.  It is in fact a const array of <code>wchar_t</code>.</p>\n\n<p>It can be converted to <code>bool</code> by array decays to pointer, followed by pointer to <code>bool</code> conversion (test if the pointer is null - it isn't).</p>\n\n<p>It can be converted to <code>std::wstring</code> by calling the appropriate constructor.</p>\n\n<p>Your problem is that the standard calls for the the compiler to choose the \"wrong\" one.</p>\n\n<p>Probably your best bet is to write a suitable additional overload.  For example:</p>\n\n<pre><code>void test(const wchar_t* p)\n{\n   test(std::wstring(p));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469022126, "post_id": 38482965, "comment_id": 64368137, "body": "That&#39;s a much clearer explanation of what I was trying to say.  Can I suggest adding my workround (add another overload force the &quot;right&quot; function to be called)?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 3, "creation_date": 1469022245, "post_id": 38482965, "comment_id": 64368246, "body": "In the second case, the sequence is <code>const wchar[N+1]</code> -&gt; <code>const wchar *</code> -&gt; <code>std::wstring</code>    (actually <code>wchar</code> should be <code>wchar_t</code>).    Essentially conversion of a pointer to a <code>bool</code> is preferred over a user-defined conversion (i.e. invoking the constructor of <code>std::wstring</code>)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1469048470, "post_id": 38482965, "comment_id": 64383140, "body": "Given how the <code>wstring</code> version is written, I&#39;d do the forwarding the other way. Although that version is arguably broken."}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 4, "last_activity_date": 1469022592, "last_edit_date": 1495542172, "creation_date": 1469022003, "answer_id": 38482965, "question_id": 38482776, "link": "https://stackoverflow.com/questions/38482776/wrong-detection-in-the-same-name-functions/38482965#38482965", "title": "Wrong detection in the same name functions", "body": "<p>A wide string literal is of type <code>const wchar_t [N+1]</code>. When you pass it to <code>test</code>, there are two possible paths:</p>\n\n<ol>\n<li><code>const wchar_t[N+1]</code> -> <code>const wchar_t*</code> -> <code>bool</code></li>\n<li><code>const wchar_t[N+1]</code> -> <code>const wchar_t*</code> -> <code>std::wstring</code></li>\n</ol>\n\n<p>The first version is chosen because overload resolution prefers the standard boolean conversion to <code>bool</code> is preferred to the user-defined conversion to <code>std::wstring</code>.</p>\n\n<p>One possible solution would be to explicitly create the <code>std::wstring</code>, as <a href=\"https://stackoverflow.com/a/38482953/496161\">Martin suggests</a>, but I think this is likely to bite you again later on. I would instead either have two functions with different names to avoid the issue, or add an overload which takes a <code>const wchar_t*</code> and forwards on to the <code>std::wstring</code> version.</p>\n\n<pre><code>void test(const wchar_t* w) {\n    test(std::wstring{w});   \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1469022506, "creation_date": 1469022506, "answer_id": 38483155, "question_id": 38482776, "link": "https://stackoverflow.com/questions/38482776/wrong-detection-in-the-same-name-functions/38483155#38483155", "title": "Wrong detection in the same name functions", "body": "<p>All answers being given, if you use c++14, you could just tweak the literal you pass in the first case.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n//Function for bool data\n\nvoid test(const bool b) {\n    wcout &lt;&lt; L\"bool data is : \" &lt;&lt; b &lt;&lt; endl;\n};\n\n//Function for   wstring data\n\nvoid test(const wstring &amp;w) {\n    wcout &lt;&lt; L\"wstring data is : \" &lt;&lt; w.c_str() &lt;&lt; endl;\n};\n\nint main() {\n    test(L\"my string  data for test\"s);\n    test(true);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/8YOiLs\" rel=\"nofollow\">output</a>:</p>\n\n<blockquote>\n  <p>wstring data is : my string  data for test<br>\n  bool data is : 1</p>\n</blockquote>\n"}], "owner": {"reputation": 85, "user_id": 6600456, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/363096b7baf4fc2d825a65c9b02f93be?s=128&d=identicon&r=PG&f=1", "display_name": "S_M", "link": "https://stackoverflow.com/users/6600456/s-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1469022592, "creation_date": 1469021534, "last_edit_date": 1469021599, "question_id": 38482776, "link": "https://stackoverflow.com/questions/38482776/wrong-detection-in-the-same-name-functions", "title": "Wrong detection in the same name functions", "body": "<p>I have two functions with same name and multiple signature as below :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n//Function for bool data\n\nvoid test(const bool &amp;b) {\n    wcout &lt;&lt; L\"bool data is : \" &lt;&lt; b &lt;&lt; endl;\n};\n\n//Function for   wstring data\n\nvoid test(const wstring &amp;w) {\n    wcout &lt;&lt; L\"wstring data is : \" &lt;&lt; w.c_str() &lt;&lt; endl;\n};\n\nvoid main() {\n    test(L\"my string  data for test\");\n    test(true);\n}\n</code></pre>\n\n<p>Why when i use the wstring value type <code>void test(const bool &amp;b)</code>function executed?</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 5978, "user_id": 954927, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/RxggX.png?s=128&g=1", "display_name": "Neutrino", "link": "https://stackoverflow.com/users/954927/neutrino"}, "edited": false, "score": 0, "creation_date": 1469020948, "post_id": 38482522, "comment_id": 64367131, "body": "No idea what&#39;s going on with the language syntax formatting. It&#39;s screwed up for some reason I can&#39;t fathom."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469020986, "post_id": 38482522, "comment_id": 64367164, "body": "You did 3 spaces not 4"}, {"owner": {"reputation": 5978, "user_id": 954927, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/RxggX.png?s=128&g=1", "display_name": "Neutrino", "link": "https://stackoverflow.com/users/954927/neutrino"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469021130, "post_id": 38482522, "comment_id": 64367286, "body": "Thanks, I didn&#39;t realise it was so pernickety, I thought it just looked for a rational indent."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1469021177, "post_id": 38482522, "comment_id": 64367334, "body": "Wait, so do you want to fix those line endings and minimize wasted memory, or read the file as-is? You can&#39;t tell how many line endings are in the file before you read it. One option would be to resize after you read and know the resulting size."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1469021286, "post_id": 38482522, "comment_id": 64367417, "body": "You can use <code>gcount()</code> to obtain the number of characters actually read. Why not just resize the string to that size? Or, if you actually want <code>\\r\\n</code> preserved, open the file in binary mode."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469022124, "post_id": 38482522, "comment_id": 64368135, "body": "Unix-style line endings are wrong. They are the odd ones that violate standards documents. See <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20040318-00/?p=40193\" rel=\"nofollow noreferrer\">Why is the line terminator CR+LF?</a>"}, {"owner": {"reputation": 1566, "user_id": 4847311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90fbb34e156577e5c3a5b3b3d1b30f83?s=128&d=identicon&r=PG", "display_name": "Sven Nilsson", "link": "https://stackoverflow.com/users/4847311/sven-nilsson"}, "edited": false, "score": 0, "creation_date": 1469024051, "post_id": 38482522, "comment_id": 64369625, "body": "Read the file in binary mode and keep the \\r\\n"}, {"owner": {"reputation": 5978, "user_id": 954927, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/RxggX.png?s=128&g=1", "display_name": "Neutrino", "link": "https://stackoverflow.com/users/954927/neutrino"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1469025378, "post_id": 38482522, "comment_id": 64370665, "body": "@Igor I&#39;d forgotten about gcount and was contemplating recalculating the size of the string, that&#39;s exactly the kind of elegance I was looking for. Thanks, post it as an answer and I&#39;ll tick it."}, {"owner": {"reputation": 5978, "user_id": 954927, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/RxggX.png?s=128&g=1", "display_name": "Neutrino", "link": "https://stackoverflow.com/users/954927/neutrino"}, "reply_to_user": {"reputation": 1566, "user_id": 4847311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90fbb34e156577e5c3a5b3b3d1b30f83?s=128&d=identicon&r=PG", "display_name": "Sven Nilsson", "link": "https://stackoverflow.com/users/4847311/sven-nilsson"}, "edited": false, "score": 0, "creation_date": 1469025497, "post_id": 38482522, "comment_id": 64370755, "body": "@Sven It&#39;s bad enough having to deal with \\r\\n in files, you never want that line ending in your strings in memory where you&#39;ll inevitably have to compare them with other strings with plain \\n line endings."}], "answers": [{"tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 0, "last_activity_date": 1469031786, "creation_date": 1469031786, "answer_id": 38485868, "question_id": 38482522, "link": "https://stackoverflow.com/questions/38482522/read-file-to-stdstring-efficiently-with-windows-line-endings/38485868#38485868", "title": "Read file to std::string efficiently with windows line endings", "body": "<p><code>fileContents.resize(file.gcount())</code> after <code>read()</code> should do the trick.</p>\n"}], "owner": {"reputation": 5978, "user_id": 954927, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/RxggX.png?s=128&g=1", "display_name": "Neutrino", "link": "https://stackoverflow.com/users/954927/neutrino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 2, "accepted_answer_id": 38485868, "answer_count": 1, "score": 1, "last_activity_date": 1469031786, "creation_date": 1469020894, "last_edit_date": 1469021020, "question_id": 38482522, "link": "https://stackoverflow.com/questions/38482522/read-file-to-stdstring-efficiently-with-windows-line-endings", "title": "Read file to std::string efficiently with windows line endings", "body": "<p>One of the more efficient ways to read a file into a string in C++ is as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>fstream file(filePath);\nfile.seekg(0, std::ios_base::end);\nstring fileContents;\nfileContents.resize(file.tellg());\nfile.seekg(0, std::ios_base::beg);\nfile.read(&amp;fileContents[0], fileContents.size());\n</code></pre>\n\n<p>If this is on Windows though and the file has Windows style \\r\\n line endings, then the size of the string will end up larger than its contents due to the fact that tellg() reports the size of the file in bytes, whereas file.read() will translate \\r\\n into \\n resulting in a smaller string than the size of the file.</p>\n\n<p>I can think of several ways of dealing with this, but none of them is efficient nor elegant.</p>\n\n<p>So my first question is: is this actually a problem or have I just made a stupid mistake somewhere in the use of this technique?</p>\n\n<p>My second question then is: what is the most efficient and elegant way of dealing with this?</p>\n\n<p>For what it's worth my current preferred method for dealing with this is to write my text files using Unix line ending style even on Windows, which is proposed in this first link as part of a strategy for C++ coding using utf-8 on Windows, and which the second link seems to hint that Microsoft themselves may be coming around to.</p>\n\n<p><a href=\"http://utf8everywhere.org/\" rel=\"nofollow\">http://utf8everywhere.org/</a></p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/02/22/new-options-for-managing-character-sets-in-the-microsoft-cc-compiler/\" rel=\"nofollow\">https://blogs.msdn.microsoft.com/vcblog/2016/02/22/new-options-for-managing-character-sets-in-the-microsoft-cc-compiler/</a></p>\n"}, {"tags": ["c++", "algorithm", "dynamic"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1469020839, "post_id": 38482494, "comment_id": 64367047, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 1, "user_id": 6448607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf44886a9a24f1f9530dad6a24635584?s=128&d=identicon&r=PG&f=1", "display_name": "Taha Jiruwala", "link": "https://stackoverflow.com/users/6448607/taha-jiruwala"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469021114, "post_id": 38482494, "comment_id": 64367275, "body": "Thanxx for the help.Could you please tell me that whether I have implemented dp in a correct way.@NathanOliver"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1469021199, "post_id": 38482494, "comment_id": 64367343, "body": "@TahaJiruwala It&#39;s up to you to find out, when stepping through your code using the debugger."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1469021456, "post_id": 38482494, "comment_id": 64367566, "body": "@TahaJiruwala It would also help you if you didn&#39;t name your variables with single letters.  Naming variables <code>r</code>, <code>t</code>, <code>n</code>, etc. conveys no information as to what they represent.  Also, is this one of those &quot;online judge&quot; contests?  I ask this, since you wrote that while loop in <code>main</code> -- why don&#39;t you hard-code the data that you&#39;re using instead of writing a loop that helps no one here."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1469021545, "post_id": 38482494, "comment_id": 64367656, "body": "you could shorten the list of <code>#includes</code>. As far as I see, most of them are unnecessary"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6448607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf44886a9a24f1f9530dad6a24635584?s=128&d=identicon&r=PG&f=1", "display_name": "Taha Jiruwala", "link": "https://stackoverflow.com/users/6448607/taha-jiruwala"}, "edited": false, "score": 0, "creation_date": 1469022217, "post_id": 38482837, "comment_id": 64368219, "body": "Yes the codes working.Could you give a memoized version for this."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1, "user_id": 6448607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf44886a9a24f1f9530dad6a24635584?s=128&d=identicon&r=PG&f=1", "display_name": "Taha Jiruwala", "link": "https://stackoverflow.com/users/6448607/taha-jiruwala"}, "edited": false, "score": 3, "creation_date": 1469022500, "post_id": 38482837, "comment_id": 64368468, "body": "@TahaJiruwala Lol. Did you really just say that? SO is not a code-writing service. If you cheat at coding challenges, you&#39;re worse than Melania"}, {"owner": {"reputation": 88, "user_id": 6210511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c0af51c9b6f255075da605cda5a6ab?s=128&d=identicon&r=PG&f=1", "display_name": "crypton3535", "link": "https://stackoverflow.com/users/6210511/crypton3535"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1469022867, "post_id": 38482837, "comment_id": 64368732, "body": "@tobi303 .. Changes made by me .. Recursion could not solve large values , So , I tranformed the code to iterative one . (2)* . Error 2: Assigning const int INF a very large value and comparing with that value renders an error (Error suggestion: reduce that value), you can&#39;t store such large values and then do comparisons. BTW .. that was rude of you not looking at my code properly before commenting."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1469028293, "post_id": 38482837, "comment_id": 64371361, "body": "no it was not rude at all. Answers should answer the question and not simply consist of code only."}], "tags": [], "owner": {"reputation": 88, "user_id": 6210511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c0af51c9b6f255075da605cda5a6ab?s=128&d=identicon&r=PG&f=1", "display_name": "crypton3535", "link": "https://stackoverflow.com/users/6210511/crypton3535"}, "is_accepted": true, "score": -3, "last_activity_date": 1469021928, "last_edit_date": 1469021928, "creation_date": 1469021685, "answer_id": 38482837, "question_id": 38482494, "link": "https://stackoverflow.com/questions/38482494/stuck-on-dynamic-programming/38482837#38482837", "title": "stuck on dynamic programming", "body": "<pre><code>int milk(int n) {\n    int min;\n    memset(r, 0, sizeof(r));\n    for (int i = 1; i &lt;= n; i++) {\n        min = 10000000; // some very large value greater than n\n        for (j = 0; j &lt;= 3; j++) {\n            if (m[j] &gt; i)\n                continue;\n            else if (r[i - m[j]] &lt; min)\n                min = r[i - m[j]];\n        }\n        r[i] = min;\n    }\n    return r[n];\n}\n</code></pre>\n\n<p>I hope this works and it would help you , comment if you have any doubts.</p>\n"}], "owner": {"reputation": 1, "user_id": 6448607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf44886a9a24f1f9530dad6a24635584?s=128&d=identicon&r=PG&f=1", "display_name": "Taha Jiruwala", "link": "https://stackoverflow.com/users/6448607/taha-jiruwala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 38482837, "answer_count": 1, "score": -7, "last_activity_date": 1469021928, "creation_date": 1469020803, "last_edit_date": 1469021848, "question_id": 38482494, "link": "https://stackoverflow.com/questions/38482494/stuck-on-dynamic-programming", "title": "stuck on dynamic programming", "body": "<p>Heres the problem:\nA Milkman serves milk in packaged bottles of varied sizes. The possible size of the bottles are {1, 5, 7 and 10} litres. He wants to supply desired quantity using as less bottles as possible irrespective of the size. Your objective is to help him find the minimum number of bottles required to supply the given demand of milk. </p>\n\n<p>Input Format: </p>\n\n<p>First line contains number of test cases N \nNext N lines, each contain a positive integer Li which corresponds to the demand of milk. </p>\n\n<p>Output Format: </p>\n\n<p>For each input Li, print the minimum number of bottles required to fulfill the demand </p>\n\n<p>I have written this code for the problem.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;stdio.h&gt;\n#include &lt;set&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;queue&gt;\n#include &lt;map&gt;\n#include &lt;iomanip&gt;\n#include &lt;locale&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;cstring&gt;\n#include &lt;cmath&gt;\n#include &lt;tgmath.h&gt;\nusing namespace std;\nconst int INF = 1000000000;\nint m[4] = { 1, 5, 7, 10 };\nint r[100000000];\n\nint milk(int n) {\n    int q;\n\n    if (r[n] &lt; INF)\n        return r[n];\n\n    if (n &lt;= 0)\n        q = 0;\n    else {\n        q = INF;\n        for (int i = 0; i &lt; 4; i++) {\n            if (n &gt;= m[i])\n                q = min(q, 1 + milk(n - m[i]));\n        }\n    }\n\n    r[n] = q;\n\n    return q;\n}\n\nint main() {\n    int t, n;\n    cin &gt;&gt; t;\n\n    while (t--) {\n        cin &gt;&gt; n;\n        memset(r, INF, sizeof(r));\n        cout &lt;&lt; milk(n) &lt;&lt; endl;\n    }\n\n    return` 0;\n}\n</code></pre>\n\n<p>I have used dynamic programming for this.But I only get an output zero for every input.I am new to dp.Please help.</p>\n"}, {"tags": ["c++", "c-preprocessor", "metaprogramming", "code-generation"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469020566, "post_id": 38482279, "comment_id": 64366844, "body": "Well, for simple types like you show, just drop the &quot;param<i>n</i>&quot; from the arguments.  The problem is with types like <code>int (param1&amp;)[4]</code> where the parameter needs to go <i>inside</i> the type."}, {"owner": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469020809, "post_id": 38482279, "comment_id": 64367027, "body": "I know I can solve this by removing &quot;param n&quot; but I was looking for a more robust option. My question is &quot;is it possible to get away without dropping &#39;param n&#39;&quot; via template machinery or decltype etc... Otherwise it means I have to change hundreds of lines in an upstream project, which is not a fun job or a fun change to take in for the project."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1469021134, "post_id": 38482279, "comment_id": 64367291, "body": "I&#39;m not sure how retrieving <code>int</code> helps here. Don&#39;t you mean retrieving <code>param1</code>, <code>param2</code>, etc ?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469021586, "post_id": 38482279, "comment_id": 64367693, "body": "Can you show more of what you want to do please."}, {"owner": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "edited": false, "score": 0, "creation_date": 1469021601, "post_id": 38482279, "comment_id": 64367707, "body": "retrieving either would work. If I can retrieve the type, then it&#39;s finished, If I can retrieve param1, then I can call decltype on it to get its type."}], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "edited": false, "score": 0, "creation_date": 1469103625, "post_id": 38484554, "comment_id": 64406735, "body": "Thanks for the help, this is smart indeed. Its has problems when the prototype contains variadic arguments ( &quot;...&quot;) but I guess that can&#39;t be helped so I accept the answer :) Thanks again"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "edited": false, "score": 0, "creation_date": 1469104120, "post_id": 38484554, "comment_id": 64407046, "body": "@mattator could you expand (haha) on that problem ?"}, {"owner": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "edited": false, "score": 0, "creation_date": 1469105861, "post_id": 38484554, "comment_id": 64408231, "body": "For instance I have NATIVE(int, open64, const char *path, int flags, ...); which gives: ../model/libc.cc:59:63: error: \u2018type\u2019 in \u2018struct detail_paramType::unpackType&lt;void(...)&gt;\u2019 does not name a type      typename detail_paramType::unpackType&lt;void(<b>VA_ARGS</b>)&gt;::type"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "edited": false, "score": 0, "creation_date": 1469106126, "post_id": 38484554, "comment_id": 64408414, "body": "@mattator That makes sense, as <code>T</code> cannot match a vararg. What you can do is add a specialization <code>template &lt;&gt;     struct unpackType&lt;void(...)&gt; { &#47;* ... *&#47; };</code> to match that case, and decide what you do from there."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1469028093, "creation_date": 1469028093, "answer_id": 38484554, "question_id": 38482279, "link": "https://stackoverflow.com/questions/38482279/how-to-get-the-type-of-unsecable-int-toto-for-use-in-preprocessor/38484554#38484554", "title": "How to get the type of unsecable &quot;int toto&quot; for use in preprocessor", "body": "<pre><code>namespace detail_paramType {\n    template &lt;class&gt;\n    struct unpackType;\n\n    template &lt;class T&gt;\n    struct unpackType&lt;void(T)&gt; { using type = T; };\n}\n\n#define PARAM_TYPE(...) \\\n    typename detail_paramType::unpackType&lt;void(__VA_ARGS__)&gt;::type\n</code></pre>\n\n<p>That was a bit tricky. Syntaxes like <code>using type = void (*param)();</code> don't compile, because the type shan't contain a name.</p>\n\n<p>The variable declaration syntax is compatible, but gets us no closer to the goal, as we don't know the parameter's name:</p>\n\n<pre><code>void (*param)(); // Fine\nusing type = decltype(???); // Now what ? We can't name param...\n</code></pre>\n\n<p>However, names are allowed (and ignored) inside the syntax of a function type's parameters. So <code>PARAM_TYPE</code> stuffs its parameter inside a function type, and passes it to <code>unpackType</code>, which deduces the parameter's type back. No need to know the parameter's original name, and it works for any type.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5d78394f1352dd02\" rel=\"nofollow\">Live on Coliru</a></p>\n"}], "owner": {"reputation": 269, "user_id": 2789617, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b18dcd70f6aaecd2bb05a205b454d0ed?s=128&d=identicon&r=PG&f=1", "display_name": "mattator", "link": "https://stackoverflow.com/users/2789617/mattator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 38484554, "answer_count": 1, "score": -1, "last_activity_date": 1469046109, "creation_date": 1469020262, "last_edit_date": 1469046109, "question_id": 38482279, "link": "https://stackoverflow.com/questions/38482279/how-to-get-the-type-of-unsecable-int-toto-for-use-in-preprocessor", "title": "How to get the type of unsecable &quot;int toto&quot; for use in preprocessor", "body": "<p>I use macros to DECLARE functions like:</p>\n\n<pre><code>NATIVE(int, myfunctionname, int param1, int param2)\nNATIVE(int, myfunctionname, int param1, int)\n</code></pre>\n\n<p>The 'NATIVE' macro is responsible for generating a wrapper like:</p>\n\n<pre><code>int myfunctionname(int arg0, int arg1) {\n   return mystruct.myfunctionname(arg0, arg1);\n}\n</code></pre>\n\n<p>for some specific reasons, I can't use LD_PRELOAD or the ld --wrap command. </p>\n\n<p>The main problem I have now is to be able to retrieve at compile time the type \"int\" both when the preprocessor token is \"int\" or when it is \"int param0\".</p>\n\n<p>EDIT: I would like to be able to use both:</p>\n\n<pre><code>NATIVE(int, myfunctionname, int param1, int param2)\nNATIVE(int, myfunctionname, int, int)\n</code></pre>\n\n<p>but only the latter works. As asked in the comments here is more context:</p>\n\n<pre><code>#define c99_count(...)    _c99_count1 (, ## __VA_ARGS__) /* If only ## worked.*/\n#define _c99_count1(...)  _c99_count2 (__VA_ARGS__,10,9,8,7,6,5,4,3,2,1,0)\n#define _c99_count2(_,x0,x1,x2,x3,x4,x5,x6,x7,x8,x9,n,...) n\n\n#define FULL_ARGS_0()\n#define FULL_ARGS_1(X0)  X0 a0\n#define FULL_ARGS_2(X0,X1)  X0 a0, X1 a1\n#define FULL_ARGS_3(X0,X1,X2)  X0 a0, X1 a1, X2 a2\n#define FULL_ARGS_4(X0,X1,X2,X3)  X0 a0, X1 a1, X2 a2, X3 a3\n#define FULL_ARGS_5(X0,X1,X2,X3,X4)  X0 a0, X1 a1, X2 a2, X3 a3, X4 a4\n\n#define _ARGS_0()\n#define _ARGS_1(X0)  a0\n#define _ARGS_2(X0,X1)   a0, a1\n#define _ARGS_3(X0,X1,X2)  a0, a1, a2\n#define _ARGS_4(X0,X1,X2,X3)  a0, a1, a2, a3\n#define _ARGS_5(X0,X1,X2,X3,X4) a0, a1, a2, a3, a4\n\n#define CAT(a, ...) PRIMITIVE_CAT (a, __VA_ARGS__)\n#define PRIMITIVE_CAT(a, ...) a ## __VA_ARGS__\n\n/*\n gives a name X0 a0\n */\n#define  FULL_ARGS(...) CAT ( FULL_ARGS_, c99_count (__VA_ARGS__) ) (__VA_ARGS__)\n#define  ARGS(...) CAT (_ARGS_,c99_count (__VA_ARGS__)) (__VA_ARGS__)\n\n#define NATIVE(rtype, name,...)                                    \\\n  rtype name (FULL_ARGS(__VA_ARGS__)) \\\n  {                                                             \\\n    return (*g_libc.name ## _fn) (ARGS (__VA_ARGS__));              \\\n  }\n</code></pre>\n"}, {"tags": ["c++", "performance"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1469019586, "post_id": 38482007, "comment_id": 64366066, "body": "Cache misses become fewer &amp; fewer"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469019738, "post_id": 38482007, "comment_id": 64366192, "body": "That for loop you are timing can be completely optimized away by the compiler.  Are you sure it actually runs in gcc and clang?  Also what settings did you use?"}, {"owner": {"reputation": 3728, "user_id": 1341942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=128&d=identicon&r=PG", "display_name": "nikitablack", "link": "https://stackoverflow.com/users/1341942/nikitablack"}, "edited": false, "score": 0, "creation_date": 1469019742, "post_id": 38482007, "comment_id": 64366199, "body": "I&#39;m not reading anything in my example. And how there can be less cache misses on the same code and the same data?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1469019856, "post_id": 38482007, "comment_id": 64366292, "body": "Because the cache isn&#39;t filled until the first time a load is done (be it code or data). So the first time it misses. There&#39;s also the branch predictor which becomes better after a few iterations of the loop."}, {"owner": {"reputation": 3728, "user_id": 1341942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=128&d=identicon&r=PG", "display_name": "nikitablack", "link": "https://stackoverflow.com/users/1341942/nikitablack"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469019861, "post_id": 38482007, "comment_id": 64366301, "body": "@NathanOliver Yes, I thought about it but it seems it not optimized - the timings are not 0. I used default release configuration with vs and non-optimized release config for others."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1469019984, "post_id": 38482007, "comment_id": 64366406, "body": "Then you are comparing apples to oranges.  Release build in MSVS has optimizations turned on by default.  You need to also turn on optimizations in gcc and clang to get a real comparison."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1469020002, "post_id": 38482007, "comment_id": 64366421, "body": "@nikitablack, it&#39;s relevant to all code on (even not so) modern architectures."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1469020754, "post_id": 38482007, "comment_id": 64366980, "body": "Is the problem that the first loop is 100 times slower, or that the non-optimized compilers don&#39;t speed up on second and subsequent passes?  Asking anything about performance without optimization is pointless."}, {"owner": {"reputation": 3728, "user_id": 1341942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=128&d=identicon&r=PG", "display_name": "nikitablack", "link": "https://stackoverflow.com/users/1341942/nikitablack"}, "edited": false, "score": 0, "creation_date": 1469021474, "post_id": 38482007, "comment_id": 64367588, "body": "The question was why the first iteration is slow? But now I see it happens only with vs2013 thought with full optimization. The difference between compilers can be because I&#39;m running on different machines."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1469021701, "post_id": 38482007, "comment_id": 64367790, "body": "Since you never specified your target platform, this is an exercise in guessing. And pretty useless as a reference."}, {"owner": {"reputation": 3728, "user_id": 1341942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=128&d=identicon&r=PG", "display_name": "nikitablack", "link": "https://stackoverflow.com/users/1341942/nikitablack"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1469022078, "post_id": 38482007, "comment_id": 64368095, "body": "@IInspectable All I wanted to hear is - &quot;yes, this is well known standard feature because the first 135 instructions need to warm up&quot; or &quot;some code compiles in machine code on the fly&quot; or whatever. Now I can see the behavior I described is not common and very compiler/platform specific i.e. it&#39;s not a standard. It&#39;s also very good to know. Thanks everybody."}], "answers": [{"comments": [{"owner": {"reputation": 3728, "user_id": 1341942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=128&d=identicon&r=PG", "display_name": "nikitablack", "link": "https://stackoverflow.com/users/1341942/nikitablack"}, "edited": false, "score": 0, "creation_date": 1469022784, "post_id": 38483014, "comment_id": 64368663, "body": "This sounds good, but the two big vectors are not participating in time measurements. Also they are not mentioned in the measured code block. But still they affect somehow the behavior of the problem in vs2013. I agree that the best solution would be to look into the generated assembly but unfortunately I can&#39;t read the assembly."}, {"owner": {"reputation": 1054, "user_id": 3798126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13368663e8f57baf2a5ed5ced426eb88?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Fairservice", "link": "https://stackoverflow.com/users/3798126/brian-fairservice"}, "reply_to_user": {"reputation": 3728, "user_id": 1341942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=128&d=identicon&r=PG", "display_name": "nikitablack", "link": "https://stackoverflow.com/users/1341942/nikitablack"}, "edited": false, "score": 0, "creation_date": 1469023056, "post_id": 38483014, "comment_id": 64368881, "body": "Ah I see, I thought you were seeing and asking about the performance issues with each of the loops, and that the first two loops weren&#39;t just included because they have an effect on the third."}, {"owner": {"reputation": 3728, "user_id": 1341942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=128&d=identicon&r=PG", "display_name": "nikitablack", "link": "https://stackoverflow.com/users/1341942/nikitablack"}, "edited": false, "score": 0, "creation_date": 1469023848, "post_id": 38483014, "comment_id": 64369497, "body": "Nope, only the measured one. Sorry for the confusion. Btw, as far as I know gcc and clang uses coefficient of 2 for the calculation of new capacity but visual studio uses 50% capacity increase."}], "tags": [], "owner": {"reputation": 1054, "user_id": 3798126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13368663e8f57baf2a5ed5ced426eb88?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Fairservice", "link": "https://stackoverflow.com/users/3798126/brian-fairservice"}, "is_accepted": false, "score": 1, "last_activity_date": 1469022148, "creation_date": 1469022148, "answer_id": 38483014, "question_id": 38482007, "link": "https://stackoverflow.com/questions/38482007/why-a-program-starts-slow-but-later-gains-the-full-speed/38483014#38483014", "title": "Why a program starts slow but later gains the full speed?", "body": "<p>For your first two loops, probably the biggest performance consideration is going to be the allocation of memory, and the copying of the <code>vector</code> contents to the larger buffer.  In this case, the fact that the loops appear to be 'gaining speed' is not surprising.</p>\n\n<p>This is due to the implementation details of the <code>vector</code> class.  Let's look at the <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>Internally, vectors use a dynamically allocated array to store their\n  elements. This array may need to be reallocated in order to grow in\n  size when new elements are inserted, which implies allocating a new\n  array and moving all elements to it. This is a relatively expensive\n  task in terms of processing time, and thus, vectors do not reallocate\n  each time an element is added to the container.</p>\n  \n  <p>Instead, vector containers may allocate some extra storage to\n  accommodate for possible growth, and thus the container may have an\n  actual capacity greater than the storage strictly needed to contain\n  its elements (i.e., its size). <strong>Libraries can implement different\n  strategies for growth to balance between memory usage and\n  reallocations, but in any case, reallocations should only happen at\n  logarithmically growing intervals of size so that the insertion of\n  individual elements at the end of the vector can be provided with\n  amortized constant time complexity (see push_back).</strong></p>\n</blockquote>\n\n<p>So under the hood, the actual memory allocated for your <code>vector</code> might be much more than what you are actually using.  So the <code>vector</code> only needs to do the costly re-allocation and copy when you add a new element to the <code>vector</code> which wouldn't fit into its current buffer.  Moreover, since it says that re-allocations should only happen at logarithmically growing intervals, you can expect that the <code>vector</code> class is roughly doubling the buffer size every time it needs to re-allocate.  But note that the <code>vector</code> implementations on various platforms are highly tuned to be optimal for the most common usage patterns for the class, which could be one factor in the different performance you are seeing across tool chains and platforms.  </p>\n\n<p>So you should see the loops be slow on the first several executions, and then gain more speed as <code>push_back</code> and <code>emplace</code> operations need to do fewer re-allocations and copies to accommodate the new elements.</p>\n\n<p>So I think this is the main fact you can use to reason about how long your first two loops should take to execute.  But for your specific examples, due to the simplicity of the program, the compiler may be taking some liberties with what code it generates.  So we could imagine that a sufficiently clever optimizing compiler might be able to see that your <code>vector</code>s will only be growing to a size which it knows at compile time, <code>num</code>.  And this is the biggest issue I suspect with your last loop, which seems like an arbitrary and useless test.  For example, the nested loop in loop 3 can be optimized away entirely.  I think this is the main reason why you are seeing such different run-time behavior across the different compilers.  </p>\n\n<p>If you want to get the real story, take a look at the assembly code that your compiler is generating.</p>\n"}], "owner": {"reputation": 3728, "user_id": 1341942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=128&d=identicon&r=PG", "display_name": "nikitablack", "link": "https://stackoverflow.com/users/1341942/nikitablack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469022148, "creation_date": 1469019517, "question_id": 38482007, "link": "https://stackoverflow.com/questions/38482007/why-a-program-starts-slow-but-later-gains-the-full-speed", "title": "Why a program starts slow but later gains the full speed?", "body": "<p>I noticed that sometimes a program runs very slow but later the performance is good. For example, I have some code which I run in a loop and the first iteration takes ages but other iterations of the <strong>same</strong> code runs pretty fast. It's hard to name the circumstances because I can't figure it out and it seems that even single literal can affect this behavior. I prepared a small code snippet:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    const int num{ 100000 };\n\n    vector&lt;vector&lt;int&gt;&gt; octs;\n    for (int i{ 0 }; i &lt; num; ++i)\n    {\n        octs.emplace_back(vector&lt;int&gt;{ 42 });\n    }\n\n    vector&lt;int&gt; datas;\n    for (int i{ 0 }; i &lt; num; ++i)\n    {\n        datas.push_back(42);\n    }\n\n    for (int n{ 0 }; n &lt; 10; ++n)\n    {\n        cout &lt;&lt; \"start\" &lt;&lt; '\\n';\n        //cout &lt;&lt; 0 &lt;&lt; \"start\" &lt;&lt; '\\n';\n\n        auto start = chrono::high_resolution_clock::now();\n\n        for (int i{ 0 }; i &lt; num; ++i)\n        {\n            vector&lt;int&gt; points{ 42 };\n        }\n\n        auto end = chrono::high_resolution_clock::now();\n        auto time = chrono::duration_cast&lt;chrono::milliseconds&gt;(end - start);\n\n        cout &lt;&lt; time.count() &lt;&lt; '\\n';\n    }\n\n    cin.get();\n\n    return 0;\n}\n</code></pre>\n\n<p>The first two vectors are essential. At least with Visual Studio. Thought they're not in use they affect the performance a lot. Moreover, tweaking them also give performance effect (like change the order of initialization, remove <code>push_back</code> and allocate the necessary size in constructor). But this code as it is gives me the following results:</p>\n\n<ul>\n<li>with gcc there're no problems at all</li>\n<li>with clang the first iteration takes two times longer than the others</li>\n<li>with vs2013 the first iteration is 100 (yes, one hundred) times slower.</li>\n</ul>\n\n<p>Moreover, with vs2013 if I uncomment the line <code>cout &lt;&lt; 0 &lt;&lt; \"start\" &lt;&lt; '\\n';</code> the performance problem goes away and all iterations are equal!</p>\n\n<p>What's going on?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 166, "user_id": 6613741, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1733225590277891/picture?type=large", "display_name": "Mathias B.", "link": "https://stackoverflow.com/users/6613741/mathias-b"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1469019970, "post_id": 38481987, "comment_id": 64366394, "body": "what does UB mean ?"}, {"owner": {"reputation": 235, "user_id": 3730455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06c2aa88720cc441ac7e816d3ff25be7?s=128&d=identicon&r=PG&f=1", "display_name": "OrMiz", "link": "https://stackoverflow.com/users/3730455/ormiz"}, "edited": false, "score": 0, "creation_date": 1469019971, "post_id": 38481987, "comment_id": 64366397, "body": "Please try to replace %g with %f."}, {"owner": {"reputation": 166, "user_id": 6613741, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1733225590277891/picture?type=large", "display_name": "Mathias B.", "link": "https://stackoverflow.com/users/6613741/mathias-b"}, "edited": false, "score": 0, "creation_date": 1469020013, "post_id": 38481987, "comment_id": 64366431, "body": "I already did, the results are the same, with some more decimals : <code>cellsize -0,250000 min -0,250000 -0,250000 0,250000 max 0,250000 0,250000 -350888301291506888700118171648,000000</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1469020143, "post_id": 38481987, "comment_id": 64366525, "body": "<a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>."}, {"owner": {"reputation": 235, "user_id": 3730455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06c2aa88720cc441ac7e816d3ff25be7?s=128&d=identicon&r=PG&f=1", "display_name": "OrMiz", "link": "https://stackoverflow.com/users/3730455/ormiz"}, "edited": false, "score": 1, "creation_date": 1469020230, "post_id": 38481987, "comment_id": 64366583, "body": "What are the types of the arguments?"}, {"owner": {"reputation": 166, "user_id": 6613741, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1733225590277891/picture?type=large", "display_name": "Mathias B.", "link": "https://stackoverflow.com/users/6613741/mathias-b"}, "edited": false, "score": 0, "creation_date": 1469020326, "post_id": 38481987, "comment_id": 64366663, "body": "cellSize is a <code>float</code>, min and max are both <code>glm::vec3</code> from glm library"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1469022441, "post_id": 38481987, "comment_id": 64368419, "body": "my guess would be stack corruption elsewhere in your program.  If that is the case, passing the structure by reference is just hiding the actual issue, and it will likely pop up somewhere else in your code as confusing behavior there too.  For questions like this (&quot;why isn&#39;t this code working&quot;) SO expects you to provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 235, "user_id": 3730455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06c2aa88720cc441ac7e816d3ff25be7?s=128&d=identicon&r=PG&f=1", "display_name": "OrMiz", "link": "https://stackoverflow.com/users/3730455/ormiz"}, "is_accepted": false, "score": -1, "last_activity_date": 1469020563, "creation_date": 1469020563, "answer_id": 38482401, "question_id": 38481987, "link": "https://stackoverflow.com/questions/38481987/c-c-printf-acting-weird/38482401#38482401", "title": "C/C++ - printf acting weird", "body": "<p>I would suggest to make your own struct with simple variables and copy the exact data you want to show from the c++ program into the CUDA function.</p>\n"}], "owner": {"reputation": 166, "user_id": 6613741, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1733225590277891/picture?type=large", "display_name": "Mathias B.", "link": "https://stackoverflow.com/users/6613741/mathias-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1469034472, "creation_date": 1469019456, "last_edit_date": 1592644375, "question_id": 38481987, "link": "https://stackoverflow.com/questions/38481987/c-c-printf-acting-weird", "title": "C/C++ - printf acting weird", "body": "<p>My program needs to compute a bounding box from a vector a boundary objects, and min/max 3d vectors of this bounding box need to be used in a CUDA kernel.</p>\n<p>To do so i get my bounding box in a c++ routine (<code>systemparticlesph.cpp</code>) :</p>\n<pre><code>void SystemParticleSPH::computeNeighborhood()\n{\n    //cellSize\n    UniformGridParameters grid_params;\n    grid_params.cellSize = sph_parameters.ParticleRadius;\n\n    //bbox\n    std::pair&lt;glm::vec3, glm::vec3&gt; bbox = CollisionObjectsContainer::getInstance()-&gt;getBBox();\n    grid_params.min = std::get&lt;0&gt;(bbox);\n    grid_params.max = std::get&lt;1&gt;(bbox);\n\n    //works fine here ! \n    std::cout &lt;&lt; &quot;cpp cellSize &quot; &lt;&lt; grid_params.cellSize &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;cpp min &quot; &lt;&lt; grid_params.min.x &lt;&lt; &quot; &quot; &lt;&lt; grid_params.min.y &lt;&lt; &quot; &quot; &lt;&lt; grid_params.min.z &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;cpp max &quot; &lt;&lt; grid_params.max.x &lt;&lt; &quot; &quot; &lt;&lt; grid_params.max.y &lt;&lt; &quot; &quot; &lt;&lt; grid_params.max.z &lt;&lt; std::endl;\n\n    //cuda call\n    computeNeighborsCuda(grid_params);\n}\n</code></pre>\n<p>The results printed with cout are exactly what i expect according to the boundary objects i created :</p>\n<pre><code>cpp cellSize 0.02\ncpp min -0.25 -0.25 -0.25\ncpp max 0.25 0.25 0.25\n</code></pre>\n<p>I'm having a really hard time when i try to print the same exact data in the <code>computeNeighborsCuda(grid_params);</code> function located in <code>systemparticlessph.cu</code> :</p>\n<pre><code>void computeNeighborsCuda(UniformGridParameters grid_params)\n{\n\n    printf(&quot;cellsize %g min %g %g %g max %g %g %g\\n&quot;,grid_params.cellSize, grid_params.min.x, grid_params.min.y, grid_params.min.z, grid_params.max.x, grid_params.max.y, grid_params.max.z );\n\n    int numBlock =  m_dPos.size()/256 + 1;\n    calcHashD&lt;&lt;&lt;numBlock, 256&gt;&gt;&gt;(thrust::raw_pointer_cast(&amp;m_dGridParticleHash[0]), thrust::raw_pointer_cast(&amp;m_dGridParticleIndex[0]), thrust::raw_pointer_cast(&amp;m_dPos[0]), grid_params, m_dPos.size());\n}\n</code></pre>\n<p>The results displayed (when i comment the 3 <code>cout</code>) should be the same but here is what i get :</p>\n<p><code>cellsize -0,25 min -0,25 -0,25 0,25 max 0,25 0,25 -7168,19</code></p>\n<p>It looks like there is some offset making the whole thing wrong : <code>cellSize</code> has the value of <code>min.x</code>, while <code>max.z</code> has an arbitrary value.</p>\n<p>Note that the problem is exactly the same when i call <code>printf</code> from the CUDA kernel.</p>\n<p>Also note that it is getting worse when i display both with cout and printf at the same time :</p>\n<pre><code>cpp cellSize 0.02\ncpp min -0.25 -0.25 -0.25\ncpp max 0.25 0.25 0.25\ncellsize -1,79826e+36 min 0 1,21731e-37 0 max 1,21731e-37 0 1,21731e-37\n</code></pre>\n<p>Do you have any idea of to get the same result in the C function (and kernel) ?</p>\n<p>Thanks in advance, this is really giving me a hard time.</p>\n<p>Mathias</p>\n<h1>Edit :</h1>\n<p>Passing a reference instead of a copy of the structure, everything works perfectly fine.</p>\n<p>Still, i have no idea why it does not work with a copy of the structure.</p>\n"}, {"tags": ["c++", "windows", "debugging", "winapi"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1469020193, "post_id": 38481978, "comment_id": 64366557, "body": "I don&#39;t get it, if you see the Ports tab empty then why on Earth would you expect your program to find any?  Add a port and see what hits the fan.  And ask for help at superuser.com."}, {"owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1469020530, "post_id": 38481978, "comment_id": 64366818, "body": "Because debugging explorer has loads of other stuff going on at the same time, there are 1000s of calls to winspool functions. I wrote the test program in the hope to make it easier to debug, with only 1 call to winspool, and so RPC tracing/network tracing can filter just on this process. I am interested in how to further debug why the EnumPorts function call is not working, I don&#39;t think super user is the right crowd."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1469028484, "post_id": 38481978, "comment_id": 64371464, "body": "you need attach debugger to spoolsv.exe and set breakpoint to spoolsv.PrvEnumPortsW function - when you call EnumPorts in self process - internally this function called."}, {"owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "edited": false, "score": 0, "creation_date": 1469046059, "post_id": 38481978, "comment_id": 64381897, "body": "Thanks this got my closer .. spoolsv.exe calls GetAddrInfoW(&quot;&lt;print server&quot;) which fails with 11001 = No such host is known and DnsQuery_W ( &quot;&lt;print server&gt;&quot;) which returns 9701 - DNS record does not exist. But dns resolves correctly on same machine using nslookup &lt;print server&gt;"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1469052739, "post_id": 38481978, "comment_id": 64384891, "body": "in this case can attach debugger to &quot;svchost.exe -k NetworkService&quot; where dnsrslvr.dll live and set breakpoint to dnsrslvr.R_ResolverQuery which internal call dnsapi.Query_Main and try looking what here going.."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1469053477, "post_id": 38481978, "comment_id": 64385145, "body": "usual next fuctions called from dnsapi.dll: Query_Main -&gt; Query_Start -&gt; Query_Wire -&gt; Send_AndRecv -&gt; Send_AndRecvUdpWithParam -&gt; sendUdpToNextDnsServers -&gt; sendUsingServerInfo -&gt; sendto.."}, {"owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "edited": false, "score": 0, "creation_date": 1469149943, "post_id": 38481978, "comment_id": 64429853, "body": "This led me to the solution. Issue was caused by 3rd party DLL C:\\Program Files\\Citrix\\Universal Print Client\\UpProv.dll"}], "owner": {"reputation": 1951, "user_id": 941548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9b13d4393e6fda83cea20e7b68a2966d?s=128&d=identicon&r=PG", "display_name": "Malcolm McCaffery", "link": "https://stackoverflow.com/users/941548/malcolm-mccaffery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469021652, "creation_date": 1469019431, "last_edit_date": 1469021652, "question_id": 38481978, "link": "https://stackoverflow.com/questions/38481978/techniques-to-identify-root-cause-of-winspoolenumports-incorrectly-returning-0", "title": "Techniques to Identify Root Cause of winspool!EnumPorts Incorrectly Returning 0 Ports", "body": "<p>Have a Windows environment where the \"Ports\" tab is empty on all network printers, but only on some win7 clients. All other printing functionality from these clients works to printers on those print servers. Due to the way the environment is set up I cannot easily attach a kernel debugger to these vSphere virtual machines.</p>\n\n<ul>\n<li>Server 2008 R2 machines - OK</li>\n<li>Clean Win7 machine - OK</li>\n<li>Win7 machine + much 3rd party software, including 3rd party device drivers, multiple API hooking software, etc - BROKEN</li>\n</ul>\n\n<p>All machines are joined to same domain, and logged in as same user.\nUsing <a href=\"http://www.rohitab.com/apimonitor\" rel=\"nofollow\">Rohitab API Monitor</a> on Explorer.exe I identified the winspool <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd162687(v=vs.85).aspx\" rel=\"nofollow\">EnumPorts</a> is succeeding, but returning 0 ports on the failing machine, but under same user account/same network and same parameters it returns 600+ ports on both working machines.. </p>\n\n<p>I wrote a test C++ program to test EnumPorts on its own. The Visual Studio 2015 project + binary is <a href=\"https://1drv.ms/f/s!AiFhB4fT6aiTkTIlppvmFr4qTAQO\" rel=\"nofollow\">here</a> </p>\n\n<p>The key part of this program is:</p>\n\n<pre><code>pPortInfo = (PORT_INFO_2 *)malloc(cbNeeded);\n            bResult = EnumPorts(argv[1],\n                2,\n                (LPBYTE)pPortInfo,\n                cbNeeded,\n                &amp;cbNeeded,\n                &amp;cbReturned);\n</code></pre>\n\n<p>On a working machine output from pPortInfo is :</p>\n\n<pre><code>CALL: EnumPorts(\"\\\\PRINTSERVER01\",(LPBYTE)pPortInfo,4096,&amp;cbNeeded,&amp;cbReturned)\nRETURNED: false ERROR CODE: 122 ERROR MSG: The data area passed to a system call is too small.\nCALL: EnumPorts(\"\\\\PRINTSERVER01\",(LPBYTE)pPortInfo,121800,&amp;cbNeeded,&amp;cbReturned)\nRETURNED: true ERROR CODE: 0 ERROR MSG: The operation completed successfully.\ncbReturned = 629\nPORT #0\nPort Name: TS005\nMonitor Name: Dynamic Print Monitor\nDescription: Inactive TS Port\nPort Type: WRITE READ \nPORT #1\nPort Name: TS004\nMonitor Name: Dynamic Print Monitor\nDescription: Inactive TS Port\nPort Type: WRITE READ \netc...\n</code></pre>\n\n<p>On the broken machine:</p>\n\n<pre><code>CALL: EnumPorts(\"\\\\PRINTSERVER01\",(LPBYTE)pPortInfo,4096,&amp;cbNeeded,&amp;cbReturned)\nRETURNED: true ERROR CODE: 0 ERROR MSG: The operation completed successfully.\ncbReturned = 0\n</code></pre>\n\n<p>What I have identified/tried so far</p>\n\n<ul>\n<li>Using <a href=\"https://technet.microsoft.com/en-au/sysinternals/bb963902.aspx\" rel=\"nofollow\">SysInternals AutoRuns</a> to compare machines there are hundreds of differences between Windows Services Configuration/Drivers/Hooking DLLs on both machines. I want to find a technique to narrow this down to potential culprit without having to remove/disable all these items</li>\n<li>I've tried disabling all hooking DLLs by renaming <a href=\"https://support.microsoft.com/en-au/kb/197571\" rel=\"nofollow\">AppInit_DLLs</a> key and confirming these DLLs no longer load in the process, but it remains broken</li>\n<li>Captured <a href=\"https://www.wireshark.org/\" rel=\"nofollow\">WireShark</a> trace - On the working machine network traffic is sent/received to the print server when EnumPorts is called. On the broken machine there is no network traffic sent to the print server at all. However on the broken machine you can still run commands like net view /all \\ and map to printers/drives on the remote print server.</li>\n<li>Used <a href=\"https://www.microsoft.com/en-au/download/details.aspx?id=44226\" rel=\"nofollow\">Microsoft Message Analyzer</a> RPC trace, this logs the RPC calls but not sure how to interpret this data. None of the calls appear to be failing.</li>\n<li>Looking deeper into winspool!EnumPorts it uses <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa374215(v=vs.85).aspx\" rel=\"nofollow\">NdrClientCall2</a> to communicate with print server but these calls are not failing.</li>\n<li>Tried disabling local firewall</li>\n<li>Tried netsh winsock reset and restarting</li>\n<li>Tested with antivirus disabled</li>\n<li>Created a filter in Windows Event viewer to look at ALL windows event log entries during the time test is run and can't find any seemingly related errors</li>\n<li>Running my test tool via WinDbg there are no first chance exceptions or other errors </li>\n<li>Tried setting a breakpoint at the completion of EnumPort function then created a complete memory dmp with <a href=\"https://download.sysinternals.com/files/NotMyFault.zip\" rel=\"nofollow\">NotMyFault</a> but couldn't find anything, and didn't really know what I was looking for in the first place</li>\n<li>Used <a href=\"https://technet.microsoft.com/en-us/sysinternals/processmonitor.aspx\" rel=\"nofollow\">Process Monitor</a> to look for missing registry keys/files and couldn't find any</li>\n</ul>\n"}, {"tags": ["c++", "qt", "cmake", "qmake", "meshlab"], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 1551735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78259a566145fa07e6b4a713f728254b?s=128&d=identicon&r=PG", "display_name": "Younes Jafari", "link": "https://stackoverflow.com/users/1551735/younes-jafari"}, "edited": false, "score": 0, "creation_date": 1469020531, "post_id": 38482205, "comment_id": 64366819, "body": "Thanks Jovasa! I add this line to CMakeList.txt file but that error is not change. Is my path format wrong?"}, {"owner": {"reputation": 423, "user_id": 6403908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c417abbf02cc56b054e2b2404e6358a4?s=128&d=identicon&r=PG&f=1", "display_name": "Jovasa", "link": "https://stackoverflow.com/users/6403908/jovasa"}, "reply_to_user": {"reputation": 231, "user_id": 1551735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78259a566145fa07e6b4a713f728254b?s=128&d=identicon&r=PG", "display_name": "Younes Jafari", "link": "https://stackoverflow.com/users/1551735/younes-jafari"}, "edited": false, "score": 0, "creation_date": 1469020678, "post_id": 38482205, "comment_id": 64366924, "body": "Does this path \u201cC:\\Program Files (x86)\\Windows Kits\\8.0\\Lib\\win8\\um\\x64\u201d exist to begin with?"}, {"owner": {"reputation": 231, "user_id": 1551735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78259a566145fa07e6b4a713f728254b?s=128&d=identicon&r=PG", "display_name": "Younes Jafari", "link": "https://stackoverflow.com/users/1551735/younes-jafari"}, "edited": false, "score": 0, "creation_date": 1469024648, "post_id": 38482205, "comment_id": 64370114, "body": "Yes, it&#39;s exist! I mean C:\\\\ or C:/ or C://"}], "tags": [], "owner": {"reputation": 423, "user_id": 6403908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c417abbf02cc56b054e2b2404e6358a4?s=128&d=identicon&r=PG&f=1", "display_name": "Jovasa", "link": "https://stackoverflow.com/users/6403908/jovasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1469020054, "creation_date": 1469020054, "answer_id": 38482205, "question_id": 38481863, "link": "https://stackoverflow.com/questions/38481863/failed-to-create-meshlab-visual-studio-2013-project/38482205#38482205", "title": "Failed to Create Meshlab Visual Studio 2013 Project", "body": "<p>Add it to the CMakeList.txt that apperantly recides on the higher level directory from where you try to run CMake.</p>\n"}], "owner": {"reputation": 231, "user_id": 1551735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78259a566145fa07e6b4a713f728254b?s=128&d=identicon&r=PG", "display_name": "Younes Jafari", "link": "https://stackoverflow.com/users/1551735/younes-jafari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 38482205, "answer_count": 1, "score": 1, "last_activity_date": 1469042607, "creation_date": 1469019126, "last_edit_date": 1592644375, "question_id": 38481863, "link": "https://stackoverflow.com/questions/38481863/failed-to-create-meshlab-visual-studio-2013-project", "title": "Failed to Create Meshlab Visual Studio 2013 Project", "body": "<p>I'm trying to open <a href=\"https://github.com/starseeker/meshlab\" rel=\"nofollow noreferrer\">meshlab</a> project in visual studio 2013. I did install <a href=\"https://cmake.org/download/\" rel=\"nofollow noreferrer\">Cmake</a> and Qt 5.3.0 on my windows 10 and then run this command :</p>\n<pre><code>cmake .. -G &quot;Visual Studio 12 Win64&quot;\n</code></pre>\n<p>and after running that :</p>\n<pre><code>-- The C compiler identification is MSVC 18.0.31101.0\n-- The CXX compiler identification is MSVC 18.0.31101.0\n-- Check for working C compiler using: Visual Studio 12 2013 Win64\n-- Check for working C compiler using: Visual Studio 12 2013 Win64 -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working CXX compiler using: Visual Studio 12 2013 Win64\n-- Check for working CXX compiler using: Visual Studio 12 2013 Win64 -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n*** Configuring MeshLab Version 1.3.2 ****\n-- Found OpenGL: opengl32\n-- Looking for include file dlfcn.h\n-- Looking for include file dlfcn.h - not found\n-- Looking for include file inttypes.h\n-- Looking for include file inttypes.h - found\n-- Looking for include file memory.h\n-- Looking for include file memory.h - found\n-- Looking for include file stdint.h\n-- Looking for include file stdint.h - found\n-- Looking for include file stdlib.h\n-- Looking for include file stdlib.h - found\n-- Looking for include file strings.h\n-- Looking for include file strings.h - not found\n-- Looking for include file string.h\n-- Looking for include file string.h - found\n-- Looking for include file sys/stat.h\n-- Looking for include file sys/stat.h - found\n-- Looking for include file sys/types.h\n-- Looking for include file sys/types.h - found\n-- Looking for include file unistd.h\n-- Looking for include file unistd.h - not found\n-- Looking for cos in m\n-- Looking for cos in m - not found\n-- lmdemo will be linked against levmar;lapack;blas;f2c\nCMake Error at E:/MyWorkSpace/Meshinator/Qt/Qt5.3.0/5.3/msvc2013_64_opengl/lib/cmake/Qt5Gui/Qt5GuiConfigExtras.cmake:14 (message):\n  Failed to find &quot;glu32&quot; in &quot;&quot; with CMAKE_CXX_LIBRARY_ARCHITECTURE &quot;&quot;.\nCall Stack (most recent call first):\n  E:/MyWorkSpace/Meshinator/Qt/Qt5.3.0/5.3/msvc2013_64_opengl/lib/cmake/Qt5Gui/Qt5GuiConfigExtras.cmake:50 (_qt5gui_find_extra_libs)\n  E:/MyWorkSpace/Meshinator/Qt/Qt5.3.0/5.3/msvc2013_64_opengl/lib/cmake/Qt5Gui/Qt5GuiConfig.cmake:152 (include)\n  E:/MyWorkSpace/Meshinator/Qt/Qt5.3.0/5.3/msvc2013_64_opengl/lib/cmake/Qt5Widgets/Qt5WidgetsConfig.cmake:94 (find_package)\n  src/other/structuresynth/CMakeLists.txt:17 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\nSee also &quot;E:/MyWorkSpace/Meshinator/meshlab-master/_build/CMakeFiles/CMakeOutput.log&quot;.\nSee also &quot;E:/MyWorkSpace/Meshinator/meshlab-master/_build/CMakeFiles/CMakeError.log&quot;.\n</code></pre>\n<p>As you see I get this error from cmak :</p>\n<pre><code>CMake Error at E:/MyWorkSpace/Meshinator/Qt/Qt5.3.0/5.3/msvc2013_64_opengl/lib/cmake/Qt5Gui/Qt5GuiConfigExtras.cmake:14 (message):\n      Failed to find &quot;glu32&quot; in &quot;&quot; with CMAKE_CXX_LIBRARY_ARCHITECTURE &quot;&quot;.\n</code></pre>\n<p>I did google that error and find this answer :</p>\n<blockquote>\n<p><em>To solve the problem use this line :  set (CMAKE_LIBRARY_PATH \u201cC:\\Program Files (x86)\\Windows Kits\\8.0\\Lib\\win8\\um\\x64\u201d)</em></p>\n</blockquote>\n<p>Now I don't know where I can add this line? please help me!</p>\n"}]