[{"tags": ["c++", "command-line", "argv", "argc"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1445472037, "post_id": 33271219, "comment_id": 54343536, "body": "Please post the text of your programming texts, not images.  Also, <b>edit</b> your question with the text, don&#39; put into comments."}, {"owner": {"reputation": 1, "user_id": 5469839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ec13319a7e27d74bb2781e5ea8c8d7?s=128&d=identicon&r=PG&f=1", "display_name": "pppear", "link": "https://stackoverflow.com/users/5469839/pppear"}, "edited": false, "score": 0, "creation_date": 1445472185, "post_id": 33271219, "comment_id": 54343580, "body": "Thank you for the advice, I am new I thought that was going to display the images inline.  Any hints on my question while I work on editing this to make it more clear?"}, {"owner": {"reputation": 1, "user_id": 5469839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ec13319a7e27d74bb2781e5ea8c8d7?s=128&d=identicon&r=PG&f=1", "display_name": "pppear", "link": "https://stackoverflow.com/users/5469839/pppear"}, "edited": false, "score": 0, "creation_date": 1445472214, "post_id": 33271219, "comment_id": 54343594, "body": "Visual studio 2015 is my IDE"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1445472218, "post_id": 33271219, "comment_id": 54343596, "body": "Use <code>argv[]</code> to get a filename from command line arguments."}, {"owner": {"reputation": 1, "user_id": 5469839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ec13319a7e27d74bb2781e5ea8c8d7?s=128&d=identicon&r=PG&f=1", "display_name": "pppear", "link": "https://stackoverflow.com/users/5469839/pppear"}, "edited": false, "score": 0, "creation_date": 1445472451, "post_id": 33271219, "comment_id": 54343650, "body": "Yes I am using argv[], am am asking how to pass argv[0] as the function name and argv[1] as the parameter"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1445473370, "post_id": 33271219, "comment_id": 54343881, "body": "Groovy. Open the project&#39;s property page (right click the project and click properties on the pop-up menu) then type your argument strings into  Configuration Properties-&gt;Debugging-&gt;Command Arguments"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1445477211, "post_id": 33271219, "comment_id": 54344922, "body": "@pppear It is possible to display images in-line I believe. However, text for your code is always better. It&#39;s not possible to copy/paste text from an image file (easily)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5469839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ec13319a7e27d74bb2781e5ea8c8d7?s=128&d=identicon&r=PG&f=1", "display_name": "pppear", "link": "https://stackoverflow.com/users/5469839/pppear"}, "edited": false, "score": 0, "creation_date": 1445472797, "post_id": 33271301, "comment_id": 54343739, "body": "I was told I didn&#39;t need to worry about filestream, it should just call argc and/or agrv in my code"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 1, "user_id": 5469839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ec13319a7e27d74bb2781e5ea8c8d7?s=128&d=identicon&r=PG&f=1", "display_name": "pppear", "link": "https://stackoverflow.com/users/5469839/pppear"}, "edited": false, "score": 0, "creation_date": 1445477594, "post_id": 33271301, "comment_id": 54345019, "body": "You can&#39;t call <code>argv</code> in your code.  You can read text from it, but you need some kind of function or data structure to represent a file.  In C++, that is done by the filestream classes."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1445472347, "creation_date": 1445472347, "answer_id": 33271301, "question_id": 33271219, "link": "https://stackoverflow.com/questions/33271219/c-pass-a-txt-file-which-has-a-function-name-and-the-parameter/33271301#33271301", "title": "C++ pass a .txt file which has a function name and the parameter", "body": "<p>You have two alternatives:  1) Pass the filename and number; or 2) Pass the file stream and number.  </p>\n\n<p>For example:  </p>\n\n<pre><code>void Read_File(const std::string filename,\n               unsigned int number)\n{\n  std::ifstream input(filename.c_str());\n  //...\n}\n\nvoid Read_From_Stream(std::istream&amp; input,\n                      unsigned int number)\n{\n  // ...\n}\n\nint main(void)\n{\n  Read_File(\"my_file.txt\", 24);\n  std::ifstream another_file(\"your_text_file.txt);\n  Read_From_Stream(another_file, 42);\n  // ...\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5469839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ec13319a7e27d74bb2781e5ea8c8d7?s=128&d=identicon&r=PG&f=1", "display_name": "pppear", "link": "https://stackoverflow.com/users/5469839/pppear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1806, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1445472910, "creation_date": 1445471671, "last_edit_date": 1445472910, "question_id": 33271219, "link": "https://stackoverflow.com/questions/33271219/c-pass-a-txt-file-which-has-a-function-name-and-the-parameter", "title": "C++ pass a .txt file which has a function name and the parameter", "body": "<p>I am working on a simple homework that requires me to pass a .txt file which contains 2 lines, the first is the function name, the second is a number, 3, or 9 for example.</p>\n\n<p>I am asking how to pass argv[0] as the function name and argv[ 1] as the parameter.</p>\n\n<p>I'm not sure how to implement this so I get essentially what is in the first screen (I know that it is wrong). </p>\n\n<p><a href=\"http://i.stack.imgur.com/pJbgZ.jpg\" rel=\"nofollow\">First screen shot, bad syntax but this is what I'm trying to do</a></p>\n\n<p>I have started with what is in the second screen,</p>\n\n<p><a href=\"http://i.stack.imgur.com/gzEV5.jpg\" rel=\"nofollow\">second screen shot, this seems like it should work, but I can't seem to test it</a></p>\n\n<p>but I also can't figure out how to pass the .txt in the developer command window to test it. Using Windows Developer Command Prompt. (The program was created in Visual Studio 2015)\nI navigate to the debug folder, ...debug>Program \"textFile\"</p>\n\n<p>This runs the program but does not seem to be taking the file</p>\n\n<p>I have done a TON of searching to try to find some answers, but so far have not found anything that answers this, found a lot of how to pass files for arguments and such, but nothing to address this specifically. </p>\n"}, {"tags": ["c++", "xcode", "macos"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1445472361, "post_id": 33271092, "comment_id": 54343628, "body": "Inside Xcode there is an expandable directory on the left side where you can see all your project&#39;s source files. Drag your <code>inventory.txt</code> and drop it in the area called <code>Supporting Files</code> or similar."}, {"owner": {"reputation": 3, "user_id": 4222405, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/54a85f252827db024eb9467352fd837c?s=128&d=identicon&r=PG&f=1", "display_name": "suitedupvet83", "link": "https://stackoverflow.com/users/4222405/suitedupvet83"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1445473006, "post_id": 33271092, "comment_id": 54343789, "body": "@MarkSetchell I don&#39;t see &quot;Supporting Files&quot;"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1445473369, "post_id": 33271092, "comment_id": 54343880, "body": "It&#39;s there in the pink Navigator area on the left...<a href=\"https://developer.apple.com/library/mac/referencelibrary/GettingStarted/RoadMapOSX/books/RM_YourFirstApp_Mac/Articles/GettingStarted.html\" rel=\"nofollow noreferrer\">developer.apple.com/library/mac/referencelibrary/Gett&zwnj;&#8203;ingStarted/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 4222405, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/54a85f252827db024eb9467352fd837c?s=128&d=identicon&r=PG&f=1", "display_name": "suitedupvet83", "link": "https://stackoverflow.com/users/4222405/suitedupvet83"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1445473745, "post_id": 33271092, "comment_id": 54343954, "body": "@MarkSetchell i do see that but unfortunately i don&#39;t see anything similar to a supporting files =("}, {"owner": {"reputation": 3, "user_id": 4222405, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/54a85f252827db024eb9467352fd837c?s=128&d=identicon&r=PG&f=1", "display_name": "suitedupvet83", "link": "https://stackoverflow.com/users/4222405/suitedupvet83"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1445473920, "post_id": 33271092, "comment_id": 54344000, "body": "@MarkSetchell I have that same setup as the pink Navigator area, but I don&#39;t see where to drop it"}], "answers": [{"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1445471657, "creation_date": 1445471657, "answer_id": 33271218, "question_id": 33271092, "link": "https://stackoverflow.com/questions/33271092/where-to-put-a-text-file-in-xcode-to-be-read-in-c/33271218#33271218", "title": "where to put a text file in xcode to be read in C++", "body": "<p>If you want to use a relative path, the easiest would be to put it in the same directory as the executable.</p>\n\n<p>But you can also use an absolute path to the file.</p>\n"}], "owner": {"reputation": 3, "user_id": 4222405, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/54a85f252827db024eb9467352fd837c?s=128&d=identicon&r=PG&f=1", "display_name": "suitedupvet83", "link": "https://stackoverflow.com/users/4222405/suitedupvet83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1541, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447348288, "creation_date": 1445470851, "last_edit_date": 1447348288, "question_id": 33271092, "link": "https://stackoverflow.com/questions/33271092/where-to-put-a-text-file-in-xcode-to-be-read-in-c", "title": "where to put a text file in xcode to be read in C++", "body": "<p>I'm using xcode version 6.2 to write my C++ program. I have a file entitled inventory.txt that I want my program to read. Where do I insert the text file?</p>\n\n<p>The current path to where the main cpp is </p>\n\n<pre><code>Documents/xcode workspace/inventory/inventory/ main.cpp\n</code></pre>\n\n<p>and my project is located at </p>\n\n<pre><code>Documents/xcode workspace/inventory/inventory.xcodeproj\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading", "assert"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1445470642, "post_id": 33271046, "comment_id": 54343115, "body": "There&#39;s no <code>assert(c == d)</code>\u2026"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1445470815, "post_id": 33271046, "comment_id": 54343161, "body": "You need to follow the <a href=\"http://stackoverflow.com/q/4172722/241631\">Rule of Three</a>. Your <code>operator==</code> takes the <code>String</code>s by value which will result in double deletion otherwise."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1445470927, "post_id": 33271046, "comment_id": 54343198, "body": "Unrelated to the problem at hand: You memory management is horribly wrong. There is also no need to pass the arguments of comparison operators by value, use <code>const&amp;</code> instead."}, {"owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1445471033, "post_id": 33271046, "comment_id": 54343233, "body": "@BaummitAugen Please explain?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1445471082, "post_id": 33271046, "comment_id": 54343247, "body": "you need delete str[]"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1445471107, "post_id": 33271046, "comment_id": 54343253, "body": "you do know that c++ has a string class already :-)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1445471111, "post_id": 33271046, "comment_id": 54343256, "body": "@LeonhartDan <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\" title=\"what is the rule of three\">stackoverflow.com/questions/4172722/what-is-the-rule-of-thre&zwnj;&#8203;e</a> has an example almost identical to yours."}], "answers": [{"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 0, "last_activity_date": 1445471063, "last_edit_date": 1445471063, "creation_date": 1445470813, "answer_id": 33271086, "question_id": 33271046, "link": "https://stackoverflow.com/questions/33271046/why-is-this-assert-failing/33271086#33271086", "title": "Why is this assert failing?", "body": "<p><code>strcmp</code> returns 0 when its arguments have equal contents.</p>\n\n<p>So add a comparison with 0 to your <code>operator==</code>:</p>\n\n<pre><code>inline bool operator==(String const&amp; lhs, String const&amp; rhs)\n{\n    return std::strcmp(lhs.getString(), rhs.getString()) == 0;\n}\n</code></pre>\n\n<p>Also, since you probably don't want to copy the arguments each time you call <code>operator==</code>, I'd recommend passing them by reference.</p>\n"}, {"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 1, "last_activity_date": 1445470823, "creation_date": 1445470823, "answer_id": 33271089, "question_id": 33271046, "link": "https://stackoverflow.com/questions/33271046/why-is-this-assert-failing/33271089#33271089", "title": "Why is this assert failing?", "body": "<p><code>std::strcmp</code> returns <code>0</code> if the strings are equal. So your <code>operator==</code> will return <code>false</code> for equal strings and <code>true</code> else.</p>\n\n<p>You could, for instance, switch the implementations of <code>==</code> and <code>!=</code> around,</p>\n"}], "owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 33271086, "answer_count": 2, "score": 0, "last_activity_date": 1445471063, "creation_date": 1445470542, "question_id": 33271046, "link": "https://stackoverflow.com/questions/33271046/why-is-this-assert-failing", "title": "Why is this assert failing?", "body": "<p>The <code>assert</code> in <code>main.cpp</code> is failing, and I don't understand why.\nHere is <code>string.hpp</code></p>\n\n<pre><code>class String\n{\nprivate:\n    int len;\n    char* str;\npublic:\n    String(char const* s);      // C-string constructor\n    ~String() {delete str;};    // destructor\n    char* const getString();    //get string for printing\n};\n\ninline bool operator==(String lhs, String rhs)\n{\n    return std::strcmp(lhs.getString(),rhs.getString());\n}\n\n// Define operator!= in terms of ==\ninline bool operator!=(String const&amp; lhs, String const&amp; rhs)\n{\n    return !(lhs == rhs);\n}\n</code></pre>\n\n<p>and here is <code>string.cpp</code></p>\n\n<pre><code>String::String(char const* s)   // C-string constructor\n{\n    len = std::strlen(s);\n    str = new char[len+1];\n    std::strcpy(str,s);\n\n}\n\nchar* const String::getString()\n{\n    return str;\n}\n</code></pre>\n\n<p>and here is <code>main.cpp</code></p>\n\n<pre><code>#include &lt;cassert&gt;\nint main()\n{\n    String c = \"c\";\n    String d = \"d\";\n\n    assert(c == c);\n    assert(c != d);\n}\n</code></pre>\n\n<p>I tried to include only the essential code. I left out a lot of the obvious includes. The <code>assert(c == d)</code> is failing and I don't understand why. The operator overload of == should have returned a true result.</p>\n"}, {"tags": ["c++", "opengl", "visual-c++-2010"], "answers": [{"tags": [], "owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "is_accepted": true, "score": 1, "last_activity_date": 1445490767, "creation_date": 1445490767, "answer_id": 33273807, "question_id": 33270689, "link": "https://stackoverflow.com/questions/33270689/variable-types-compatible-with-glgetfloatv/33273807#33273807", "title": "Variable Types compatible with glGetFloatv", "body": "<p>The basic type you want to use is <code>GLfloat</code>. This matches the type in the function prototype. This is a 32-bit float value, which mostly matches the <code>float</code> type, but this is not guaranteed.</p>\n\n<p>For cases where <code>glGetFloatv()</code> returns a single value, you can simply use the address of a <code>GLfloat</code> variable. For example:</p>\n\n<pre><code>GLfloat val;\nglGetFloatv(GL_DEPTH_CLEAR_VALUE, &amp;val);\n</code></pre>\n\n<p>For cases that return multiple values, you can either use an array:</p>\n\n<pre><code>GLfloat vals[4];\nglGetFloatv(GL_COLOR_CLEAR_VALUE, vals);\n</code></pre>\n\n<p>Or, to make it more C++, a <code>vector</code>:</p>\n\n<pre><code>std::vector&lt;GLfloat&gt; vals(4);\nglGetFloatv(GL_COLOR_CLEAR_VALUE, &amp;vals[0]);\n</code></pre>\n\n<p>Or, even nicer in C++11:</p>\n\n<pre><code>std::vector&lt;GLfloat&gt; vals(4);\nglGetFloatv(GL_COLOR_CLEAR_VALUE, vals.data());\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5464713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d420e6386f7be150b960d458c3f8b24?s=128&d=identicon&r=PG&f=1", "display_name": "Tambierria", "link": "https://stackoverflow.com/users/5464713/tambierria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 33273807, "answer_count": 1, "score": -1, "last_activity_date": 1445490767, "creation_date": 1445468515, "question_id": 33270689, "link": "https://stackoverflow.com/questions/33270689/variable-types-compatible-with-glgetfloatv", "title": "Variable Types compatible with glGetFloatv", "body": "<p>What variable types are compatible with opengl's glGetFloat() or glGetFloatv()? </p>\n\n<p>P.S. This is in c++.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1445472841, "post_id": 33270734, "comment_id": 54343756, "body": "Just to beat this point to death, <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">member initializer list</a>. Extremely useful and often more efficient."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 9, "last_activity_date": 1445468736, "creation_date": 1445468736, "answer_id": 33270734, "question_id": 33270668, "link": "https://stackoverflow.com/questions/33270668/code-in-cpp-file/33270734#33270734", "title": "Code in .cpp file", "body": "<p>Things wrong with your code:</p>\n\n<ul>\n<li>You're not using the <code>area</code> variable in any way.</li>\n<li>One of your <code>}</code> is in the wrong place.</li>\n<li>Your <code>calculateArea</code> is probably a member function of <code>Shapes</code> and should as such be prefixed with <code>Shapes::</code>.</li>\n<li>You aren't using the member initializer list.</li>\n<li>Your indentation is inconsistent.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": false, "score": 7, "last_activity_date": 1445468969, "last_edit_date": 1445468969, "creation_date": 1445468758, "answer_id": 33270738, "question_id": 33270668, "link": "https://stackoverflow.com/questions/33270668/code-in-cpp-file/33270738#33270738", "title": "Code in .cpp file", "body": "<p>You forgot to add the class scope in the implementation of <code>calculatateArea</code>.\nYour cpp code must look like</p>\n\n<pre><code>Shapes::Shapes(float l, float w)\n{\n   length = l;\n   width = w;\n}\n\nfloat Shapes::calculateArea()\n{\n   float area = length * width;\n   return area;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5473631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f2e9f4fa50a499c28b0a3d6cebe711?s=128&d=identicon&r=PG&f=1", "display_name": "adnan", "link": "https://stackoverflow.com/users/5473631/adnan"}, "edited": false, "score": 0, "creation_date": 1445471225, "post_id": 33270819, "comment_id": 54343292, "body": "Thanks a lot . Its a great place to find the solution."}], "tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": false, "score": 1, "last_activity_date": 1445469732, "last_edit_date": 1445469732, "creation_date": 1445469276, "answer_id": 33270819, "question_id": 33270668, "link": "https://stackoverflow.com/questions/33270668/code-in-cpp-file/33270819#33270819", "title": "Code in .cpp file", "body": "<p>This is how your code should be:</p>\n\n<pre><code>   #include \"Shapes.h\"\n\n   Shapes::Shape(float l, float w) : length(l), width(w) { }\n   float Shape::calculateArea()\n   {\n       return this-&gt;length * this-&gt;width;\n   }\n</code></pre>\n\n<p>I changed your constructor to use the constructor syntax. It is faster than the assignment you did before.</p>\n\n<p>You should read this <a href=\"http://www.cplusplus.com/doc/tutorial/classes/\" rel=\"nofollow\">http://www.cplusplus.com/doc/tutorial/classes/</a></p>\n\n<p>It even has the same exact example as you are doing.</p>\n"}], "owner": {"reputation": 19, "user_id": 5473631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f2e9f4fa50a499c28b0a3d6cebe711?s=128&d=identicon&r=PG&f=1", "display_name": "adnan", "link": "https://stackoverflow.com/users/5473631/adnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "closed_date": 1445472327, "answer_count": 3, "score": -6, "last_activity_date": 1445470975, "creation_date": 1445468413, "question_id": 33270668, "link": "https://stackoverflow.com/questions/33270668/code-in-cpp-file", "closed_reason": "Not suitable for this site", "title": "Code in .cpp file", "body": "<p>I am beginner in C++ in Eclipse environment. Could you explain whats wrong with this code.</p>\n\n<pre><code>   #include \"Shapes.h\"\n\n  Shapes::Shapes(float l, float w)\n   {\n            length = l;\n            width = w;\n\n\n   float calculateArea()\n              {\n               float area = length * width;\n               return calculateArea;\n              }\n   }\n</code></pre>\n"}, {"tags": ["c++", "sockets", "memory-management", "memory-leaks", "memory-leak-detector"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4808350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71677ac092a8b962afb2c732277a4d47?s=128&d=identicon&r=PG&f=1", "display_name": "Asmo", "link": "https://stackoverflow.com/users/4808350/asmo"}, "edited": false, "score": 0, "creation_date": 1445471867, "post_id": 33271039, "comment_id": 54343487, "body": "malloc only causes a single 48bytes memory leak. The program itself uses 1200kb on startup, when I run 10000 threads on it memory usage goes straight up to 5300kb, which is logical if you consider the number of threads created. But shouldn&#39;t the memory be freed since the threads are stopped with _endthread?"}, {"owner": {"reputation": 27, "user_id": 4808350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71677ac092a8b962afb2c732277a4d47?s=128&d=identicon&r=PG&f=1", "display_name": "Asmo", "link": "https://stackoverflow.com/users/4808350/asmo"}, "edited": false, "score": 0, "creation_date": 1445472190, "post_id": 33271039, "comment_id": 54343584, "body": "Also I can&#39;t use your approach, since I can&#39;t wait for the thread to finish. I need to create a new concurrent thread on each new socket."}, {"owner": {"reputation": 27, "user_id": 4808350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71677ac092a8b962afb2c732277a4d47?s=128&d=identicon&r=PG&f=1", "display_name": "Asmo", "link": "https://stackoverflow.com/users/4808350/asmo"}, "edited": false, "score": 0, "creation_date": 1445480692, "post_id": 33271039, "comment_id": 54345766, "body": "Done it another way, altho used your answer as a guide!"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "reply_to_user": {"reputation": 27, "user_id": 4808350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71677ac092a8b962afb2c732277a4d47?s=128&d=identicon&r=PG&f=1", "display_name": "Asmo", "link": "https://stackoverflow.com/users/4808350/asmo"}, "edited": false, "score": 0, "creation_date": 1445485770, "post_id": 33271039, "comment_id": 54346950, "body": "@Asmo Glad you managed to fix it! My use of <code>std::thread::join()</code> is commented out: I added it in case you needed it, but I assumed you didn&#39;t so I left it commented out. By no means you need to use <code>std::thread::join</code> when you use <code>std::thread</code>"}], "tags": [], "owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "is_accepted": true, "score": 1, "last_activity_date": 1445470519, "creation_date": 1445470519, "answer_id": 33271039, "question_id": 33270600, "link": "https://stackoverflow.com/questions/33270600/memory-leak-on-socket/33271039#33271039", "title": "Memory leak on socket", "body": "<p>I'm not familiar with reading the program in the screenshots you posted; however, you should probably be concerned about this line:</p>\n\n<pre><code>arg = (HandleStruct *)malloc(sizeof( HandleStruct));\n</code></pre>\n\n<p>Here you are allocating memory for a <code>HandleStruct</code> via <a href=\"http://www.cplusplus.com/reference/cstdlib/malloc/\" rel=\"nofollow\"><code>malloc()</code></a> which doesn't appear to be cleaned up anywhere with a subsequent call to <a href=\"http://www.cplusplus.com/reference/cstdlib/free/\" rel=\"nofollow\"><code>free()</code></a>. You pass <code>arg</code> into <code>handle()</code> but still don't deallocate the memory.</p>\n\n<p>It doesn't <em>appear</em> to be <code>handle()</code>'s responsibility to clean <code>arg</code> up, so you should probably have a call to <code>free()</code> after the <code>while</code> loop, or you could allocate the <code>HandleStruct</code> at the beginning of each loop and deallocate it at the end.</p>\n\n<p>Or you could save yourself the hassle and use <a href=\"http://www.cplusplus.com/reference/memory/unique_ptr/\" rel=\"nofollow\"><code>std::unique_ptr</code></a>, and optionally change your threads to <a href=\"http://www.cplusplus.com/reference/thread/thread/?kw=thread\" rel=\"nofollow\"><code>std::thread</code></a>, which self-documents who owns the memory etc:</p>\n\n<pre><code>void handle(std::unique_ptr&lt;HandleStruct&gt; args)\n{\n    // Manipulate args\n    ...\n}\n\nint main()\n{\n    std::unique_ptr&lt;HandleStruct&gt; pHandle = std::make_unique&lt;HandleStruct&gt;();\n    for (;;)\n    {\n        ...\n        pHandle-&gt;sock = newsock;\n        pHandle-&gt;host = host;\n        pHandle-&gt;port = port;\n        // Create thread:\n        std::thread t(&amp;handle, pHandle);\n        // Wait for thread to finish so pHandle doesn't change while we are using it on another thread\n        // t.join();\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "is_accepted": false, "score": 1, "last_activity_date": 1445471239, "creation_date": 1445471239, "answer_id": 33271176, "question_id": 33270600, "link": "https://stackoverflow.com/questions/33270600/memory-leak-on-socket/33271176#33271176", "title": "Memory leak on socket", "body": "<p>Every socket uses some memory in the operating system.</p>\n\n<p>Here the description in Linux : <a href=\"http://man7.org/linux/man-pages/man2/accept.2.html\" rel=\"nofollow\">accept</a></p>\n\n<blockquote>\n<pre><code>   ENOBUFS, ENOMEM\n          Not enough free memory.  This often means that the memory\n          allocation is limited by the socket buffer limits, not by the\n          system memory.\n</code></pre>\n</blockquote>\n\n<p>The OS might not clean them up.</p>\n\n<p>You are also trying to create 10000 threads, these might also take some memory, if the creation doesn't fail long before with <code>errno</code> set to <code>EAGAIN</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 4808350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71677ac092a8b962afb2c732277a4d47?s=128&d=identicon&r=PG&f=1", "display_name": "Asmo", "link": "https://stackoverflow.com/users/4808350/asmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2543, "favorite_count": 0, "accepted_answer_id": 33271039, "answer_count": 2, "score": 1, "last_activity_date": 1445471239, "creation_date": 1445468033, "question_id": 33270600, "link": "https://stackoverflow.com/questions/33270600/memory-leak-on-socket", "title": "Memory leak on socket", "body": "<p>I'm writing a tcp proxy and while it seem to work it leaves a memory leak behind. I manipulated the code to forward the incoming packet to itself to create 10000 sockets and close them to see where the leak is. However I can't figure it out. I've used deleaker and it doesn't shows any leak(besides a small one that I don't care.) <a href=\"https://i.stack.imgur.com/jUpeg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jUpeg.png\" alt=\"http://i.imgur.com/7r6u4Jd.png\"></a></p>\n\n<p>But then I untick the two boxes and this comes out.\n<a href=\"https://i.stack.imgur.com/82NUF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/82NUF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any help would be appreciated!</p>\n\n<p><strong><em>Code:</em></strong></p>\n\n<pre><code>#include &lt;winsock2.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;process.h&gt; /* _beginthread() */\n\n// Need to link with Ws2_32.lib\n#pragma comment(lib, \"Ws2_32.lib\")\n\n#define PORT    \"1234\" /* Port to listen on */\n#define BUF_SIZE 4096    /* Buffer for  transfers */\n\ntypedef struct {\n\n    char *host;\n    char *port;\n    SOCKET sock;\n\n}\nHandleStruct;\n\nunsigned int S2C(SOCKET from, SOCKET to)\n{\n\n    char buf[BUF_SIZE];\n    unsigned int disconnected = 0;\n    size_t bytes_read, bytes_written;\n    bytes_read = recv(from, buf, BUF_SIZE, 0);\n    if (bytes_read == 0) {\n\n        disconnected = 1;\n\n    }\n\n    else {\n\n        bytes_written = send(to, buf, bytes_read, 0);\n        if (bytes_written == -1) {\n\n            disconnected = 1;\n\n        }\n\n\n    }\n\n    return disconnected;\n\n}\n\nunsigned int C2S(SOCKET from, SOCKET to)\n{\n\n    char buf[BUF_SIZE];\n    unsigned int disconnected = 0;\n    size_t bytes_read, bytes_written;\n    bytes_read = recv(from, buf, BUF_SIZE, 0);\n    if (bytes_read == 0) {\n\n        disconnected = 1;\n\n    }\n\n    else {\n\n        bytes_written = send(to, buf, bytes_read, 0);\n        if (bytes_written == -1) {\n\n            disconnected = 1;\n\n        }\n\n\n    }\n\n    return disconnected;\n\n}\n\nvoid handle(void *param)\n{\n\n    HandleStruct *args = (HandleStruct*) param;\n    SOCKET client = args-&gt;sock;\n    const char *host = args-&gt;host;\n    const char *port = args-&gt;port;\n    SOCKET server = -1;\n    unsigned int disconnected = 0;\n    fd_set set;\n    unsigned int max_sock;\n    struct addrinfo *res = NULL;\n    struct addrinfo *ptr = NULL;\n    struct addrinfo hints;\n    /* Get the address info */\n    ZeroMemory( &amp;hints, sizeof(hints) );\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n    if (getaddrinfo(host, port, &amp;hints, &amp;res) != 0) {\n\n        perror(\"getaddrinfo\");\n        closesocket(client);\n        return;\n\n    }\n\n    /* Create the socket */\n    server = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);\n    if (server == INVALID_SOCKET) {\n\n        perror(\"socket\");\n        closesocket(client);\n        return;\n\n    }\n\n    /* Connect to the host */\n    if (connect(server, res-&gt;ai_addr, res-&gt;ai_addrlen) == -1) {\n\n        perror(\"connect\");\n        closesocket(client);\n        return;\n\n    }\n\n    if (client &gt; server) {\n\n        max_sock = client;\n\n    }\n\n    else {\n\n        max_sock = server;\n\n    }\n\n    /* Main transfer loop */\n    while (!disconnected) {\n\n        FD_ZERO(&amp;set);\n        FD_SET(client, &amp;set);\n        FD_SET(server, &amp;set);\n        if (select(max_sock + 1, &amp;set, NULL, NULL, NULL) == SOCKET_ERROR) {\n\n            perror(\"select\");\n            break;\n\n        }\n\n        if (FD_ISSET(client, &amp;set)) {\n\n            disconnected = C2S(client, server);\n\n        }\n\n        if (FD_ISSET(server, &amp;set)) {\n\n            disconnected = S2C(server, client);\n\n        }\n\n\n    }\n\n    closesocket(server);\n    closesocket(client);\nfprintf(stderr, \"Sockets Closed: %d/%d\", server, client);\n    _endthread();\n    return;\n\n}\n\nint _tmain(int argc)\n{\n\n    WORD wVersion = MAKEWORD(2, 2);\n    WSADATA wsaData;\n    int iResult;\n    SOCKET sock;\n    struct addrinfo hints, *res;\n    int reuseaddr = 1; /* True */\n    /* Initialise Winsock */\n    if (iResult = (WSAStartup(wVersion, &amp;wsaData)) != 0) {\n\n        fprintf(stderr, \"WSAStartup failed: %dn\", iResult);\n        return 1;\n\n    }\n\n    char * host = \"127.0.0.1\";\n    char * port = \"1234\";\n\n    /* Get the address info */\n    ZeroMemory(&amp;hints, sizeof hints);\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    if (getaddrinfo(NULL, PORT, &amp;hints, &amp;res) != 0) {\n\n        perror(\"getaddrinfo\");\n        WSACleanup();\n        return 1;\n\n    }\n\n    /* Create the socket */\n    sock = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);\n    if (sock == INVALID_SOCKET) {\n\n        perror(\"socket\");\n        WSACleanup();\n        return 1;\n\n    }\n\n    /* Enable the socket to reuse the address */\n    if (setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, (const char*)&amp;reuseaddr,\n    sizeof(int)) == SOCKET_ERROR) {\n\n        perror(\"setsockopt\");\n        WSACleanup();\n        return 1;\n\n    }\n\n    /* Bind to the address */\n    if (bind(sock, res-&gt;ai_addr, res-&gt;ai_addrlen) == SOCKET_ERROR) {\n\n        perror(\"bind\");\n        WSACleanup();\n        return 1;\n\n    }\n\n    /* Listen */\n    if (listen(sock, 6500) == SOCKET_ERROR) {\n\n        perror(\"listen\");\n        WSACleanup();\n        return 1;\n\n    }\n\n    freeaddrinfo(res);\n    int i = 0;\n\n    HandleStruct *arg;\n    arg = (HandleStruct *)malloc(sizeof( HandleStruct));\n/* Main loop */\n    while(1) {\n\n        int size = sizeof(struct sockaddr);\n        struct sockaddr_in their_addr;\n        SOCKET newsock;\n        ZeroMemory(&amp;their_addr, sizeof (struct sockaddr));\n        newsock = accept(sock, (struct sockaddr*)&amp;their_addr, &amp;size);\n\n        if (newsock == INVALID_SOCKET) {\n\n            perror(\"acceptn\");\n\n        }\n        else {\n\n            arg-&gt;sock = newsock;\n            arg-&gt;host = host;\n            arg-&gt;port = port;\n\n            if (i &lt; 10000) {\n                _beginthread(handle, 0, (void*) arg);\n                i++;\n            }\n        }\n    }\n\n    closesocket(sock);\n    WSACleanup();\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "null", "linked-list"], "comments": [{"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 0, "creation_date": 1445467544, "post_id": 33270477, "comment_id": 54342181, "body": "Huh? What do you mean by the value of elem is getting set to null? You seem to be saying that elem-&gt;getAge() is setting elem to null. However, a couple sentences later, you also say accessing current in the if statement sets its value to null. So which is it. If current is null how do you know elem got set to null?"}, {"owner": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 1, "creation_date": 1445467683, "post_id": 33270477, "comment_id": 54342227, "body": "Please put up the code for the addFront function. That is where the mistake is likely to be."}, {"owner": {"reputation": 623, "user_id": 2833207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1372706307/picture?type=large", "display_name": "temp", "link": "https://stackoverflow.com/users/2833207/temp"}, "reply_to_user": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 0, "creation_date": 1445467734, "post_id": 33270477, "comment_id": 54342237, "body": "@iheanyi current points to the correct node, however when I access that element it&#39;s accessing it from NULL. If that makes sense"}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 0, "creation_date": 1445467865, "post_id": 33270477, "comment_id": 54342285, "body": "Not quite. You can&#39;t access anything at null. It seems you mean that current is NOT null and elem is null."}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 0, "creation_date": 1445467982, "post_id": 33270477, "comment_id": 54342317, "body": "But anyway, like FrankM suggests, post the comment for addFront. If you&#39;re having a problem with elem being null, that&#39;s likely the source."}, {"owner": {"reputation": 623, "user_id": 2833207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1372706307/picture?type=large", "display_name": "temp", "link": "https://stackoverflow.com/users/2833207/temp"}, "reply_to_user": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "edited": false, "score": 0, "creation_date": 1445468040, "post_id": 33270477, "comment_id": 54342334, "body": "@iheanyi precisely! Current is not null but elem is null!"}, {"owner": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 0, "creation_date": 1445468351, "post_id": 33270477, "comment_id": 54342426, "body": "As I suspected. addFront passes header-&gt;next into the add function but before you put in anything either next is initialized to null (meaning all that is done to v in add won&#39;t have any effect and will be violating memory at address 0) or next is initialised to a node with elem uninitialized or null."}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 0, "creation_date": 1445468426, "post_id": 33270477, "comment_id": 54342448, "body": "@FrankM - no, that&#39;s not it. It&#39;s because the temporary Elem reference goes out of scope. next is initialized, likely in the DLinkedList constructor."}, {"owner": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 0, "creation_date": 1445468739, "post_id": 33270477, "comment_id": 54342555, "body": "Looks like the DLinkedList constructor code is also needed for the full picture"}, {"owner": {"reputation": 848, "user_id": 1800880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/840b5c564824008d4e84a4e94d904c3e?s=128&d=identicon&r=PG", "display_name": "tweej", "link": "https://stackoverflow.com/users/1800880/tweej"}, "edited": false, "score": 0, "creation_date": 1445989386, "post_id": 33270477, "comment_id": 54554712, "body": "<a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> please. This is neither complete nor verifiable."}], "answers": [{"comments": [{"owner": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 0, "creation_date": 1445468540, "post_id": 33270654, "comment_id": 54342482, "body": "Elem is typedef Person*"}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 0, "creation_date": 1445468702, "post_id": 33270654, "comment_id": 54342540, "body": "@FrankM Still, when you pass the &quot;object&quot; Elem to a function which takes it by non-const reference, the function gets a temporary object since the compiler needs to construct a new object and get a reference to that object. I&#39;ve edited my answer to add the non-const reference part as that&#39;s the crux of the matter."}, {"owner": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 1, "creation_date": 1445468921, "post_id": 33270654, "comment_id": 54342615, "body": "A reference to a pointer works exactly like a pointer but let&#39;s you modify the value of the original pointer. There is no problem with temporary objects anywhere in the code."}, {"owner": {"reputation": 623, "user_id": 2833207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1372706307/picture?type=large", "display_name": "temp", "link": "https://stackoverflow.com/users/2833207/temp"}, "edited": false, "score": 0, "creation_date": 1445468967, "post_id": 33270654, "comment_id": 54342630, "body": "@iheanyi I removed the &amp; from AddFront and Add and it worked!"}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 0, "creation_date": 1445469133, "post_id": 33270654, "comment_id": 54342680, "body": "@FrankM a reference works kinda like a pointer but it is not a pointer. In particular, because ryan was not originally a reference, it needs to be converted to one. That&#39;s where the temporary object creation comes from."}, {"owner": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 1, "creation_date": 1445469730, "post_id": 33270654, "comment_id": 54342849, "body": "It&#39;s late and I need to go to sleep but I&#39;ll leave one more attempt at convincing you. int a = 10;  int&amp; b(a); int c = b;  The result of this is a is 10. b is a reference to the same memory that contains a. c gets the value of a i.e. 10. Regardless of what happens to a or b the value of c will be 10 until it is changed again. Replace int with pointers and the same will hold true."}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 606, "user_id": 3106912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/acOpL.jpg?s=128&g=1", "display_name": "FrankM", "link": "https://stackoverflow.com/users/3106912/frankm"}, "edited": false, "score": 0, "creation_date": 1445470199, "post_id": 33270654, "comment_id": 54342974, "body": "@FrankM Sleep on it. Just because b is a reference to a, doesn&#39;t mean if you copy the address of b, you get the address of a."}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1445470438, "post_id": 33270654, "comment_id": 54343043, "body": "@iheanyi Yes it does! :-)"}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1445529082, "post_id": 33270654, "comment_id": 54370741, "body": "@KlitosKyriacou then explain the issue the OP had and why my &quot;solution&quot; worked."}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1445532889, "post_id": 33270654, "comment_id": 54372987, "body": "I suspect the OP posted a simplified version of the code, and that the actual code involved more function calls in a way that caused a variable to go out of scope. There is no temporary being created here. In fact, temporaries can&#39;t be bound to non-const references."}, {"owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "reply_to_user": {"reputation": 623, "user_id": 2833207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1372706307/picture?type=large", "display_name": "temp", "link": "https://stackoverflow.com/users/2833207/temp"}, "edited": false, "score": 0, "creation_date": 1445985879, "post_id": 33270654, "comment_id": 54553482, "body": "@RyanTemple After reviewing this, I must agree with others that something else is going on and my answer is wrong. Can you un-accept it so I can delete the answer."}], "tags": [], "owner": {"reputation": 2943, "user_id": 2250588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67a4afaa3e67ed31d90400f2eb9a22a?s=128&d=identicon&r=PG", "display_name": "iheanyi", "link": "https://stackoverflow.com/users/2250588/iheanyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1445985836, "last_edit_date": 1445985836, "creation_date": 1445468356, "answer_id": 33270654, "question_id": 33270477, "link": "https://stackoverflow.com/questions/33270477/c-linked-list-printing/33270654#33270654", "title": "C++ Linked List printing", "body": "<p>EDIT:</p>\n\n<p>My answer is incorrect. Something else is going on but without more source code, we can only speculate. As this is the accepted answer, I cannot delete it. So I've removed the original content from being visible as to not confuse others who may stumble upon this question.</p>\n"}], "owner": {"reputation": 623, "user_id": 2833207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1372706307/picture?type=large", "display_name": "temp", "link": "https://stackoverflow.com/users/2833207/temp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445985836, "creation_date": 1445467238, "last_edit_date": 1445467991, "question_id": 33270477, "link": "https://stackoverflow.com/questions/33270477/c-linked-list-printing", "title": "C++ Linked List printing", "body": "<p>Here is the code for a function that prints a LinkedList in a forward direction. </p>\n\n<pre><code>void DLinkedList::printForwards(int age)\n{\nDNode * current;\ncurrent = header-&gt;next;\nwhile (current != NULL)\n{\n    if (current-&gt;elem-&gt;getAge() &lt;= age) {\n        cout &lt;&lt; current-&gt;elem-&gt;getName() &lt;&lt; \", \";\n    }\n    current = current-&gt;next;\n}\ncout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Here is the class DNode</p>\n\n<pre><code>typedef Person* Elem;\nclass DNode {                                 // doubly linked list node\nprivate:\n    Elem elem;                                  // node element value\n    DNode* prev;                            // previous node in list\n    DNode* next;                                // next node in list\n    friend class DLinkedList;                   // allow DLinkedList access\n};\n</code></pre>\n\n<p>Here is the class Person</p>\n\n<pre><code>class Person {                                 \npublic:\nPerson(int age, string first, string last){\n    setAge(age);\n    setFirstname(first);\n    setLastName(last);\n}\nvoid setAge(int age){\n    this-&gt;age = age;\n}\nvoid setFirstname(string first){\n    firstName = first;\n}\nvoid setLastName(string last){\n    lastname = last;\n}\n\nint getAge(){\n    return age;\n}\n\nstring getName(){\n    return firstName + \" \" + lastname;\n}\nprivate:\n    string firstName, lastname;\n    int age;\n};\n</code></pre>\n\n<p>Here is my main</p>\n\n<pre><code>int main(){    \n\nDLinkedList list;\nPerson * ryan= new Person(19, \"Ryan\", \"Temple\");\nlist.addFront(ryan);\nlist.printForwards(100);\n}\n</code></pre>\n\n<p>This line of code is giving the program trouble.</p>\n\n<pre><code>if (current-&gt;elem-&gt;getAge() &lt;= age)\n</code></pre>\n\n<p>The value of the elem is getting set to NULL.\nWhen the current is initialized it is getting pointed to the correct Node.\nHowever accessing current in the if statement sets its value to NULL.</p>\n\n<p>Can someone please help me?</p>\n\n<p>EDIT:\nHere is the addFront function</p>\n\n<pre><code>void DLinkedList::add(DNode* v, Elem&amp; e) {\nDNode* u = new DNode;\nu-&gt;elem = e;            // create a new node for e\nu-&gt;next = v;                                // link u in between v\nu-&gt;prev = v-&gt;prev;                          // ...and v-&gt;prev\nv-&gt;prev-&gt;next = u;\nv-&gt;prev = u;\n}\n</code></pre>\n\n<p>Add front</p>\n\n<pre><code>  void DLinkedList::addFront(Elem&amp; e)     // add to front of list\n{\n   add(header-&gt;next, e);\n}\n</code></pre>\n"}, {"tags": ["c++", "std", "eclipse-cdt", "stdstring", "codan"], "answers": [{"comments": [{"owner": {"reputation": 1769, "user_id": 398502, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0ad41bf624e895bbc2e53b087dd0b0b?s=128&d=identicon&r=PG", "display_name": "Govan", "link": "https://stackoverflow.com/users/398502/govan"}, "edited": false, "score": 0, "creation_date": 1445468174, "post_id": 33270504, "comment_id": 54342372, "body": "I accepted your answer however I defined the &lt;string.h&gt; in other files without problem. I think eclipse cdt had a problem with refreshing the indexes some how. After I add a new source folder. It has happened before as well."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 1769, "user_id": 398502, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0ad41bf624e895bbc2e53b087dd0b0b?s=128&d=identicon&r=PG", "display_name": "Govan", "link": "https://stackoverflow.com/users/398502/govan"}, "edited": false, "score": 3, "creation_date": 1445468405, "post_id": 33270504, "comment_id": 54342443, "body": "@Govan Yes your compiler might allow including <code>some_std_header.h</code> but you can&#39;t rely on that behavior. As far as the Standard is concerned, those headers don&#39;t exist. Relying on implementation-defined behavior is generally bad."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 3, "last_activity_date": 1445467681, "last_edit_date": 1445467681, "creation_date": 1445467381, "answer_id": 33270504, "question_id": 33270448, "link": "https://stackoverflow.com/questions/33270448/string-does-not-name-a-type-error-in-eclipse-cdt/33270504#33270504", "title": "\u2018string\u2019 does not name a type error&quot; in eclipse cdt", "body": "<pre><code>#include &lt;string.h&gt;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>#include &lt;string&gt;\n</code></pre>\n\n<p><code>string.h</code> is the C string header. <code>string</code> is the C++ string header.</p>\n\n<p>Furthermore, all standard C++ headers omit the <code>.h</code>. Even the C headers, when included from C++ code should be prefixed with <code>c</code> in addition to omitting the <code>.h</code>. E.g. <code>cstring</code> would be the correct header to include to get the C string header in C++.</p>\n"}], "owner": {"reputation": 1769, "user_id": 398502, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0ad41bf624e895bbc2e53b087dd0b0b?s=128&d=identicon&r=PG", "display_name": "Govan", "link": "https://stackoverflow.com/users/398502/govan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 33270504, "answer_count": 1, "score": 0, "last_activity_date": 1445467681, "creation_date": 1445467080, "question_id": 33270448, "link": "https://stackoverflow.com/questions/33270448/string-does-not-name-a-type-error-in-eclipse-cdt", "title": "\u2018string\u2019 does not name a type error&quot; in eclipse cdt", "body": "<p>I added a new source folder to my code and create a new class with below header and cpp file </p>\n\n<pre><code>#ifndef ENVIRONMENT_H_\n#define ENVIRONMENT_H_\n\n#include &lt;string.h&gt;\nusing namespace std;\n\nnamespace daemonWorld {\n\nclass Environment {\n    const string objName;\npublic:\n    Environment(const string &amp; name){\n        this-&gt;objName = name;\n\n    }\n    virtual ~Environment();\n};\n\n} /* namespace daemonWorld */\n\n#endif /* TEMP_ENVIRONMENT_H_ */\n</code></pre>\n\n<p>CPP file </p>\n\n<pre><code>#include \"Environment.h\"\n\n\nnamespace daemonWorld {\n\n\nEnvironment::~Environment() {\n    // TODO Auto-generated destructor stub\n}\n\n} /* namespace daemonWorld */\n</code></pre>\n\n<p>I am getting an error that string is not a type in constructor and the member variable Obj \nand I am getting Codan error in cpp file Member declaration not found\nfor constructor. \nI have many times cleaned the project, rebuild the index and rebuild the project but it doesn't work. Any Idea?</p>\n"}, {"tags": ["c++", "c++11", "functional-programming"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1445466559, "post_id": 33270337, "comment_id": 54341836, "body": "What&#39;s with all the bold and double spacing? Paste your properly-indented code, mark it, and use Ctl-k to format it as code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1445466924, "post_id": 33270337, "comment_id": 54341981, "body": "Helpful reading: <a href=\"https://isocpp.org/wiki/faq/pointers-to-members\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/pointers-to-members</a> Primarily about pointers to class members, but also covers the standard function case and provides C++-friendly alternatives."}, {"owner": {"reputation": 463, "user_id": 5473533, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/caabf88655865f80e3cb0163f990b3ed?s=128&d=identicon&r=PG&f=1", "display_name": "Hao Shi", "link": "https://stackoverflow.com/users/5473533/hao-shi"}, "edited": false, "score": 0, "creation_date": 1445476109, "post_id": 33270337, "comment_id": 54344579, "body": "Thank you for all the help. I apology for the bad format."}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 5473533, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/caabf88655865f80e3cb0163f990b3ed?s=128&d=identicon&r=PG&f=1", "display_name": "Hao Shi", "link": "https://stackoverflow.com/users/5473533/hao-shi"}, "edited": false, "score": 0, "creation_date": 1445475768, "post_id": 33270456, "comment_id": 54344489, "body": "Thank you Jack. Both solutions work fine. Thank you for editing my post too. :-)"}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 3, "last_activity_date": 1445467107, "creation_date": 1445467107, "answer_id": 33270456, "question_id": 33270337, "link": "https://stackoverflow.com/questions/33270337/c-pass-a-function-as-argument/33270456#33270456", "title": "C++ pass a function as argument", "body": "<p>You basically want to partially apply a function to pass it as an argument to <code>brents_fun</code>, this is possible and you have two ways to do it in C++11:</p>\n\n<ul>\n<li>with a lambda</li>\n<li>with <code>std::bind</code></li>\n</ul>\n\n<p>Both solutions:</p>\n\n<pre><code>double brents_fun(std::function &lt;double(double)&gt; f)\n{\n  return f(0.0);\n}\n\ndouble fun1(double x, double y)\n{\n  return x+y;\n}\n\nint main() {\n  double res1 = brents_fun([](double x) { return fun1(x, 12.0); });\n  double res2 = brents_fun(std::bind(fun1, placeholders::_1, 12.0));\n}\n</code></pre>\n\n<p>While the lambda one is more suitable to optimizations in general both solutions are equivalent. <code>std::bind</code> can be polymorphic while a lambda can't, but that's not the point in your situation. I'd say just stick to the syntax you prefer.</p>\n"}, {"comments": [{"owner": {"reputation": 463, "user_id": 5473533, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/caabf88655865f80e3cb0163f990b3ed?s=128&d=identicon&r=PG&f=1", "display_name": "Hao Shi", "link": "https://stackoverflow.com/users/5473533/hao-shi"}, "edited": false, "score": 0, "creation_date": 1445475961, "post_id": 33270460, "comment_id": 54344550, "body": "Thank you Yves. I will use ctrl+k to post formatted code next time."}], "tags": [], "owner": {"reputation": 637, "user_id": 5446775, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/92a536f7870770956c9b61fc7b5fb741?s=128&d=identicon&r=PG&f=1", "display_name": "Henri", "link": "https://stackoverflow.com/users/5446775/henri"}, "is_accepted": false, "score": 0, "last_activity_date": 1445467137, "creation_date": 1445467137, "answer_id": 33270460, "question_id": 33270337, "link": "https://stackoverflow.com/questions/33270337/c-pass-a-function-as-argument/33270460#33270460", "title": "C++ pass a function as argument", "body": "<p>brents_fun accepts as argument a function in the form of: double someFunction(double), as you might already know. No functions of other return types, nor arguments, can be used. In this particular case, you can pass the fun1 function, them sum y when you have it calculated. Also, to post formatted code, simply select it and ctrl+k. </p>\n"}], "owner": {"reputation": 463, "user_id": 5473533, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/caabf88655865f80e3cb0163f990b3ed?s=128&d=identicon&r=PG&f=1", "display_name": "Hao Shi", "link": "https://stackoverflow.com/users/5473533/hao-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 33270456, "answer_count": 2, "score": 1, "last_activity_date": 1445467137, "creation_date": 1445466467, "last_edit_date": 1445466793, "question_id": 33270337, "link": "https://stackoverflow.com/questions/33270337/c-pass-a-function-as-argument", "title": "C++ pass a function as argument", "body": "<p>I need to call a library function in C++, it has the form:</p>\n\n<pre><code>double brents_fun(std::function &lt;double(double)&gt; f);\n</code></pre>\n\n<p>I can call this function by the following:</p>\n\n<pre><code>double fun1(double x)\n{\n   return -2.0*x+1;\n}\n\nvoid main()\n{\n   brents_fun(fun1);\n   return 0;\n}\n</code></pre>\n\n<p>I want to pass another function to <code>brents_fun</code>, like:</p>\n\n<pre><code>double fun2(double x, double y)\n{\n   return -2.0*x+y;\n}\n\nvoid main()\n{\n   y=12.0;\n   brents_fun( fun2(x,y=12) );\n   return 0;\n}\n</code></pre>\n\n<p>In my real code, y is complicated. I need to read data from file, do some calculations with the data to generate y. That's why I need two argument x and y in fun2. y will not be changed during calling brents_fun.</p>\n\n<p>Since y is not changed, is there a way to pass fun2 to brents_fun?</p>\n\n<p>Thank you.</p>\n\n<p>Hao</p>\n"}, {"tags": ["c++", "memory-management", "memory-leaks", "instance", "destructor"], "comments": [{"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1445466495, "post_id": 33270296, "comment_id": 54341807, "body": "The destructor for <code>in</code> will be called.  It wouldn&#39;t be called if <code>in</code> was an <code>inner*</code> and was declared using <code>new</code>."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 2, "last_activity_date": 1445467278, "creation_date": 1445467278, "answer_id": 33270484, "question_id": 33270296, "link": "https://stackoverflow.com/questions/33270296/delete-instance-of-inner-class-in-an-instance-of-outer-class/33270484#33270484", "title": "Delete instance of inner class in an instance of outer class", "body": "<p>When your <code>class Outer</code>'s instance <code>out</code> goes out of scope the first thing that happens is all of its members (which have also just gone out of scope) have their destructors called.  Then <code>class Outer</code>'s destructor is called. The C++ standard guarantees this so this behavior is generated automatically by your C++ compiler.</p>\n"}], "owner": {"reputation": 71, "user_id": 4231819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c7de07ac922c7f8e5ef1edd4ab22b?s=128&d=identicon&r=PG&f=1", "display_name": "user107680", "link": "https://stackoverflow.com/users/4231819/user107680"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 33270484, "answer_count": 1, "score": 2, "last_activity_date": 1445467278, "creation_date": 1445466280, "question_id": 33270296, "link": "https://stackoverflow.com/questions/33270296/delete-instance-of-inner-class-in-an-instance-of-outer-class", "title": "Delete instance of inner class in an instance of outer class", "body": "<p>Suppose I have a class <code>Inner</code> within another class  <code>Outer</code>:</p>\n\n<pre><code>class Inner\n{\npublic:\n    Inner();\n    ~Inner();\n};\n\nclass Outer\n{\npublic:\n    Outer();\n    ~Outer();\nprivate:\n    Inner in;\n};\n</code></pre>\n\n<p>Now say in main I declare an object of type Outer:</p>\n\n<pre><code>int main()\n{\n    Outer out;\n\n    return 0;\n}\n</code></pre>\n\n<p>The object <code>out</code> has an instance of <code>in</code> as a member. If I call the destructor of <code>out</code>, will it in turn call the destructor of <code>in</code>? If not, how can I implement the destructor for the class <code>Outer</code> to successfully invoke the destructor of the class <code>Inner</code>?</p>\n\n<p>For example, if I have an application of users, and each user has a profile, how can I make it so when a user's account is deleted, so is the user's profile?</p>\n"}, {"tags": ["c++", "double"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1445466913, "post_id": 33270204, "comment_id": 54341979, "body": "&#39;return fac_total;&#39; float WHAT...............?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5473554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adaa0286b3689dcf0ec21f5f9a21d8c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ambrosios", "link": "https://stackoverflow.com/users/5473554/ambrosios"}, "edited": false, "score": 0, "creation_date": 1445466015, "post_id": 33270214, "comment_id": 54341629, "body": "Would there be any other way to make a main function that doesn&#39;t only return integers?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 1, "user_id": 5473554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adaa0286b3689dcf0ec21f5f9a21d8c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ambrosios", "link": "https://stackoverflow.com/users/5473554/ambrosios"}, "edited": false, "score": 1, "creation_date": 1445466089, "post_id": 33270214, "comment_id": 54341661, "body": "@Ambrosios No, in C++, <code>main</code> always returns <code>int</code>. This is basic, go read your book."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 4, "creation_date": 1445466474, "post_id": 33270214, "comment_id": 54341802, "body": "And not only does it return integers only, it should only return <i>exit codes</i>, not results of calculations. That&#39;s a job for the <i>output</i> of the program."}], "tags": [], "owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "is_accepted": false, "score": 6, "last_activity_date": 1445465869, "creation_date": 1445465869, "answer_id": 33270214, "question_id": 33270204, "link": "https://stackoverflow.com/questions/33270204/when-setting-variable-to-double-and-adding-a-double-to-an-integer-why-does-an-i/33270214#33270214", "title": "When setting variable to double AND adding a double to an integer, why does an integer value come out?", "body": "<p>Because <code>int main()</code> returns integers...</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5473554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adaa0286b3689dcf0ec21f5f9a21d8c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ambrosios", "link": "https://stackoverflow.com/users/5473554/ambrosios"}, "edited": false, "score": 0, "creation_date": 1445466592, "post_id": 33270316, "comment_id": 54341855, "body": "I wanted to test out a function that I was making by creating a separate program for it, but it seems that this function would only properly work if I included it as part of a program rather than on its own."}], "tags": [], "owner": {"reputation": 216, "user_id": 2159206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3176ba16a9e0b57c7d61efca9d9228bd?s=128&d=identicon&r=PG", "display_name": "Evan Nudd", "link": "https://stackoverflow.com/users/2159206/evan-nudd"}, "is_accepted": false, "score": 2, "last_activity_date": 1445466377, "creation_date": 1445466377, "answer_id": 33270316, "question_id": 33270204, "link": "https://stackoverflow.com/questions/33270204/when-setting-variable-to-double-and-adding-a-double-to-an-integer-why-does-an-i/33270316#33270316", "title": "When setting variable to double AND adding a double to an integer, why does an integer value come out?", "body": "<p>Like @djechlin said, the return type for the main function is an int, therefore it will only return integers. \nWhy do you want to return a double though? Are you using a bash script on the result of the calculation? \nI noticed you are using cin, so why don't you just use </p>\n\n<pre><code>    cout &lt;&lt; fac_total &lt;&lt; endl;\n</code></pre>\n\n<p>before the return statement. (then return 0;)</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1445466909, "last_edit_date": 1445466909, "creation_date": 1445466477, "answer_id": 33270339, "question_id": 33270204, "link": "https://stackoverflow.com/questions/33270204/when-setting-variable-to-double-and-adding-a-double-to-an-integer-why-does-an-i/33270339#33270339", "title": "When setting variable to double AND adding a double to an integer, why does an integer value come out?", "body": "<p>You cannot return anything but an <code>int</code> from <code>main</code> if you want to keep your program conform to the standard.</p>\n\n<p>Besides, return value of <code>0</code> is meant to indicate success and a non-zero value is meant to indicate failure. You probably should print the number to <code>stdout</code> and return <code>0</code> from <code>main</code>.</p>\n\n<pre><code>int main()\n{\n    double fac_total=1.0;\n    int number;\n    cin &gt;&gt; number;\n    for (int x=1; x &lt;= number; x++)\n        fac_total = x*(fac_total+0.0);\n    std::cout &lt;&lt; std::setprecision(3) &lt;&lt; std::fixed &lt;&lt; fac_total &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>You can capture the output of the program using the facilities provided by the console/shell.</p>\n\n<p>Make sure to add</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;ios&gt;\n</code></pre>\n\n<p>to be able to use <code>std::setprecision</code> and <code>std::fixed</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5473554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adaa0286b3689dcf0ec21f5f9a21d8c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ambrosios", "link": "https://stackoverflow.com/users/5473554/ambrosios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1445466909, "creation_date": 1445465785, "question_id": 33270204, "link": "https://stackoverflow.com/questions/33270204/when-setting-variable-to-double-and-adding-a-double-to-an-integer-why-does-an-i", "title": "When setting variable to double AND adding a double to an integer, why does an integer value come out?", "body": "<p>I'm trying to make a code that returns factorials of integers as doubles. However, every time I use the code, it does not return doubles. It always returns integers.</p>\n\n<p>I would like for the code to return the factorial trailed by zeroes.</p>\n\n<p>Ex. 5! = 120.0000, not just 120.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    double fac_total=1.0;\n    int number;\n    cin &gt;&gt; number;\n    for (int x=1; x &lt;= number; x++)\n        fac_total = x*(fac_total+0.0);\n    return fac_total;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "static-assert"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445466355, "post_id": 33270147, "comment_id": 54341755, "body": "<code>constexpr</code> on a function doesn&#39;t mean &quot;this function can only be called with arguments known at compile time&quot;, or &quot;this function is always executed at compile time&quot;. It means &quot;if parameters happen to be compile-time constants, then the function can be executed at compile time and so the function call is itself a compile-time constant&quot;. It is legal to pass arguments to a <code>constexpr</code> function that are not in fact compile-time constants; then it runs like any regular function would."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445466440, "post_id": 33270147, "comment_id": 54341786, "body": "Yes I know that - I&#39;m asking why passing a string literal to <code>check</code> <i>can</i> be used in a <code>static_assert</code> but passing a string literal to <code>test</code> causes it to degrade from a constant that can be used in <code>static_assert</code> to non-constant which can&#39;t"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445466495, "post_id": 33270147, "comment_id": 54341806, "body": "Because, again, for all the compiler knows, your program may be calling <code>test</code> and passing a non-constant, dynamically computed <code>char</code> array to it."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445466829, "post_id": 33270147, "comment_id": 54341953, "body": "But given <code>test</code> is a function template, <code>N</code> has to be known at compile time, so <code>arr</code> <i>has to be</i> a constant array surely?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445467450, "post_id": 33270147, "comment_id": 54342152, "body": "<a href=\"http://rextester.com/OCXH54470\" rel=\"nofollow noreferrer\">Not really</a>. Not a compile-time constant. It&#39;s only a constant in <code>const</code> sense (can&#39;t be modified after having been initialized), not necessarily in <code>constexpr</code> sense (fully known at compile-time)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 2, "creation_date": 1445467496, "post_id": 33270147, "comment_id": 54342165, "body": "@Steve: It may help to realize there is only one version of <code>test</code> for each <code>N</code>: both <code>test(&quot;boo&quot;)</code> and <code>test(&quot;ya*&quot;)</code> call the same function. And so does <code>char foo[3]; &#47;* set the contents of foo at runtime *&#47; test(foo);</code>."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1445467810, "post_id": 33270147, "comment_id": 54342261, "body": "Ah yes, and I suppose I could call <code>test&lt;4&gt;(var)</code> with a runtime <code>char*</code> variable, and the function call would work, but the <code>static_assert</code> could of course not."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1446216937, "post_id": 33270147, "comment_id": 54665707, "body": "@Hurkyl if you&#39;d like to write your comment as an answer I&#39;d gladly accept it"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 949, "favorite_count": 3, "answer_count": 0, "score": 4, "last_activity_date": 1445466887, "creation_date": 1445465472, "last_edit_date": 1445466887, "question_id": 33270147, "link": "https://stackoverflow.com/questions/33270147/why-can-a-char-array-be-used-in-a-constexpr-function-template-but-not-in-a-stati", "title": "Why can a char array be used in a constexpr function template but not in a static_assert", "body": "<p>I have a <code>constexpr</code> function template which takes a <code>char</code> array, the bounds of which are known at compile time:</p>\n\n<pre><code>template&lt;size_t N&gt;\nconstexpr bool check(const char (&amp;arr)[N], size_t n = 0)\n</code></pre>\n\n<p>I can use this function with a string literal in a <code>static_assert</code> call.</p>\n\n<p>In this function I can walk through the string literal and perform calculations at compile time on the individual characters which make up the string.</p>\n\n<p>However, if I have another <code>constexpr</code> function template which also takes a char array / string literal</p>\n\n<pre><code>template&lt;size_t N&gt;\nconstexpr void test(const char (&amp;arr)[N])\n</code></pre>\n\n<p>and from within that function I call <code>static_assert</code>, <code>arr</code> is no longer a constant expression, and so the <code>static_assert</code> is not allowed.</p>\n\n<p>Given the string literal's bounds are known at compile time, and it is therefore a statically sized array, and <code>size_t N</code> is a template parameter, I would have thought it should be possible to use <code>arr</code> in function <code>test</code>.</p>\n\n<p>It is not possible to call <code>test</code> with a non-constant array, so I would expect the compiler to know that <code>arr</code> is constant in <code>test</code>.</p>\n\n<p>Attempting to call <code>test</code> with a non-constant array results in a different (expected) error:</p>\n\n<pre><code>main.cpp:16:16: note:   template argument deduction/substitution failed:\nmain.cpp:32:15: note:   mismatched types \u2018const char [N]\u2019 and \u2018const char*\u2019\n</code></pre>\n\n<h2>Question:</h2>\n\n<p><strong>Why can I use <code>const char (&amp;arr)[N]</code> <em>inside</em> a <code>static_assert</code>, but not pass it <em>to</em> a <code>static_assert</code>?</strong></p>\n\n<h2>Full example:</h2>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;stdexcept&gt;\n\ntemplate&lt;size_t N&gt;\nconstexpr bool check(const char (&amp;arr)[N], size_t n = 0)\n{\n    return\n        n &gt;= N ?\n            true\n        : arr[n] != '*' ?\n            check(arr, n + 1)\n        : throw std::logic_error(\"arr can't contain a '*'\");\n}\n\ntemplate&lt;size_t N&gt;\nconstexpr void test(const char (&amp;arr)[N])\n{\n    static_assert(check&lt;N&gt;(arr), \"\"); // non-constant condition for static assertion\n}\n\nint main()\n{\n    static_assert(check(\"foo\"), \"\");\n\n    // fails to compile: string contains '*'\n    //static_assert(check(\"foo*\"), \"\"); \n\n    // fails to compile: \u2018arr\u2019 is not a constant expression\n    //test(\"foo\"); \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "android-source", "android-runtime"], "answers": [{"tags": [], "owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "is_accepted": true, "score": 0, "last_activity_date": 1445850775, "last_edit_date": 1445850775, "creation_date": 1445826243, "answer_id": 33337544, "question_id": 33269892, "link": "https://stackoverflow.com/questions/33269892/expose-new-art-functionality-by-changing-the-runtime-class-of-libcore/33337544#33337544", "title": "Expose new ART functionality by changing the Runtime.class of libcore", "body": "<p><strong>The problem:</strong></p>\n\n<p>Android ships the factory images with framework components being pre-optimised.\nThe file <code>boot.oat</code> contains pre-optimised code (or odex code), which can be accessed by reading pointers contained in the <code>boot.art</code> file.</p>\n\n<p>These two files contain code only for the <code>boot classpath</code>.\nThe rest of the framework, and the rest of the system applications (in <code>app</code> and <code>priv-app</code>) folders have standalone <code>odex</code> files.</p>\n\n<p>During this pre-optimisation phase, the dex code is <strong>taken out</strong> of a framework module (a jar, or an apk), is compiled using <code>dex2oat</code>, and the resulting code resides in the files I just mentioned.</p>\n\n<p><strong>Some of the things I 've tried:</strong></p>\n\n<p>Shipping just the <code>libart.so</code> and <code>core-libart.jar</code> does not work, even though the latter contains the dex code. This is because the runtime is still attempting to read that information from <code>boot.oat</code>.</p>\n\n<p>By modifying the device configuration to do the pre-optimisation, the <code>aosp build system</code> can generate <code>boot.oat|art</code> and the rest of the <code>odex</code> files (more <a href=\"https://source.android.com/devices/tech/dalvik/configure.html\" rel=\"nofollow\">here</a>). I expected that flashing all these should work, but it didn't.\n(at least for the <code>marshmallow-release</code> branch, on a nexus6)</p>\n\n<p>I 've tried flashing the whole aosp-generated build, and it didn't work, even with a custom kernel that I 've build with the security features (<code>verity</code>) disabled.</p>\n\n<p>I am sure that some of these should have worked, but there must be something else that should be considered during building the OS.</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>The last resort, was <code>deodexing</code> and thankfully it worked.\nI have written a small <a href=\"https://github.com/Paschalis/android_scripts/tree/master/deodex\" rel=\"nofollow\">script</a> that does it for the Nexus 6 on Marshmallow.</p>\n\n<p>The script, during a 1st stage, it takes out all the <code>oat/odex</code> code from relevant places, and de-optimises it to <code>dex</code> code, thanks to the <a href=\"https://github.com/testwhat/SmaliEx\" rel=\"nofollow\">oat2dex</a> and <a href=\"https://bitbucket.org/JesusFreke/smali/\" rel=\"nofollow\">smali</a> projects.\nOn a 2nd stage, it packs the <code>dex</code> code back, in the framework modules (jars/apks).</p>\n\n<p>Shipping a whole new <code>core-libart.jar</code> to the device still does not work (not sure why), but tinkering the dex files before packing them into the modules does the trick! <strong>:))</strong></p>\n\n<p>The <code>libart.so</code> can now find <code>Runtime.myMethod()</code>, which can be invoked by an application (smali tinkering again) to run my code inside <code>ART</code>.</p>\n"}], "owner": {"reputation": 10516, "user_id": 776345, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/379d691c110d9dd8becf1fee282d140d?s=128&d=identicon&r=PG", "display_name": "Paschalis", "link": "https://stackoverflow.com/users/776345/paschalis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 1, "accepted_answer_id": 33337544, "answer_count": 1, "score": 0, "last_activity_date": 1445850775, "creation_date": 1445464209, "last_edit_date": 1445826267, "question_id": 33269892, "link": "https://stackoverflow.com/questions/33269892/expose-new-art-functionality-by-changing-the-runtime-class-of-libcore", "title": "Expose new ART functionality by changing the Runtime.class of libcore", "body": "<p>I have inserted some new functionality in the Android Runtime (<a href=\"https://android.googlesource.com/platform/art/\" rel=\"nofollow\">ART</a>), and now I want to expose it to the outside world via an interface. As it is native code, I will be using the <code>JNI</code> interface to call this new functionality, in a similar way with the Garbage Collector functionality: <code>Runtime.getInstance().gc()</code>.</p>\n\n<p>However, I don't care in building a new SDK that could be used by an IDE, as I will be manually injecting bytecode to .dex files that will make the call.</p>\n\n<p>I have edited the <code>Runtime.java</code> in <code>libcore/luni</code>, and <code>java_lang_Runtime.cc</code> in <code>art</code> in a similar way with the <code>gc()</code> function. I am generating the new <code>libart.so</code> and <code>core-libart.jar</code> and I flash them on a device.\nHowever, when I try to reboot the device, I get the message:</p>\n\n<pre><code>Failed to register native method java.lang.Runtime.myMethod()V in /system/framework/core-libart.jar\n...\n----- class 'Ljava/lang/Runtime;' cl=0x0 -----\nvtable (24 entries, 11 in super):\n// 24 entries are listed here. My entry is missing.\n...\n</code></pre>\n\n<p>In the <code>Runtime.java</code> I register the native method and supress some warnings on a full build using @hide. eg,</p>\n\n<pre><code>/** @hide */\npublic native void myMethod();\n</code></pre>\n\n<p>In the <code>java_lang_Runtime.cc</code>, I define the function (that will call the ART internal stuff) and register it to the gMethods[] array using a macro. eg,</p>\n\n<pre><code>static void Runtime_myMethod(JNIEnv*, jclass) {  \n// body\n}\n</code></pre>\n\n<p><code>NATIVE_METHOD(Runtime, myMethod, \"()V\")</code></p>\n\n<p>The device is on a bootloop. Are there any other files that I should have edited? Should I build extra modules, or send any other files on the device?</p>\n\n<p>BTW, I do NOT want to build a new <code>SDK</code> as for calling <code>myMethod</code> I will inject <code>Dalvik bytecode</code> to an APK file. Basically I will get the Runtime instance, and then call the method.</p>\n"}, {"tags": ["c++", "arrays", "constructor"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1445466866, "post_id": 33269884, "comment_id": 54341968, "body": "Because raw arrays can&#39;t be passed by value to functions. An array parameter is always treated as a pointer to the element type."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 0, "last_activity_date": 1445464297, "creation_date": 1445464297, "answer_id": 33269914, "question_id": 33269884, "link": "https://stackoverflow.com/questions/33269884/passing-a-2d-array-as-an-argument/33269914#33269914", "title": "Passing a 2D array as an argument", "body": "<p>Syntax is</p>\n\n<pre><code>void f(T (&amp;d)[4][4])\n</code></pre>\n\n<p>but prefer <code>std::array&lt;std::array&lt;T, 4&gt;, 4&gt;</code> which is copyable</p>\n"}], "owner": {"reputation": 333, "user_id": 4650516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8948188eb659ec046021adc8ab2a7054?s=128&d=identicon&r=PG&f=1", "display_name": "CLL", "link": "https://stackoverflow.com/users/4650516/cll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 33269914, "answer_count": 1, "score": 0, "last_activity_date": 1445464297, "creation_date": 1445464187, "question_id": 33269884, "link": "https://stackoverflow.com/questions/33269884/passing-a-2d-array-as-an-argument", "title": "Passing a 2D array as an argument", "body": "<p>I'm having some problems regarding syntax around using constructors that take 2D arrays as parameters. Here's an example of one such constructor:</p>\n\n<pre><code>template &lt;class T&gt;\nNode&lt;T&gt;::Node(T d[4][4]) : data(d) {}    \n</code></pre>\n\n<p>I'm attempting to use it as follows:</p>\n\n<pre><code>float f[4][4] = { { /* 2D array declaration */ } };\nNode&lt;float&gt; myNode = Matrix4x4&lt;float&gt;((f));\n</code></pre>\n\n<p>I'm getting the following errors, and after much searching around, I can't figure out the root cause of the problem:</p>\n\n<pre><code>error: no matching constructor for\n      initialization of 'Node&lt;float&gt;'\n      Node&lt;float&gt; myNode = Node&lt;float&gt;((f));\n                   ^     ~~~~~~~~~~~~~~~~~~~~~\nsrc/Node.h:33:5: note: candidate constructor not viable:\n      no known conversion from 'Node&lt;float&gt;' to\n      'float (*)[4]' for 1st argument\n      Node(T d[4][4]);\n</code></pre>\n\n<p>Obviously the line \"<code>no known conversion from 'Node&lt;float&gt;' to 'float (*)[4]' for 1st argument</code>\" is a big clue, but I'm stuck on why clang++ is interpreting <code>f</code> as a <code>float (*)[4]</code> instead of as <code>float[4][4]</code>. </p>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 380, "user_id": 5049516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5PjHt.jpg?s=128&g=1", "display_name": "nv3", "link": "https://stackoverflow.com/users/5049516/nv3"}, "edited": false, "score": 0, "creation_date": 1445465020, "post_id": 33269812, "comment_id": 54341228, "body": "Have you considered to look into the documentation of the vector class?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1445469619, "post_id": 33269812, "comment_id": 54342813, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3376124/how-to-add-element-by-element-of-two-stl-vectors\">How to add element by element of two STL vectors?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5471381, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DuMWOr5mRGo/AAAAAAAAAAI/AAAAAAAAAHQ/rJ7dPT3Zi8g/photo.jpg?sz=128", "display_name": "Sarmad Mueen AA Al-gawwam", "link": "https://stackoverflow.com/users/5471381/sarmad-mueen-aa-al-gawwam"}, "edited": false, "score": 0, "creation_date": 1445468816, "post_id": 33270590, "comment_id": 54342586, "body": "Thanks ,the values of taw1 and taw2 are integers I don&#39;t want to convert them to Mat .    is                                                                                       Mat mdelta = Mat(taw2) - Mat(taw1);                                                        converting them to Mat ?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1445469454, "post_id": 33270590, "comment_id": 54342763, "body": "No conversion here, just creating Mat header."}, {"owner": {"reputation": 31, "user_id": 5471381, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DuMWOr5mRGo/AAAAAAAAAAI/AAAAAAAAAHQ/rJ7dPT3Zi8g/photo.jpg?sz=128", "display_name": "Sarmad Mueen AA Al-gawwam", "link": "https://stackoverflow.com/users/5471381/sarmad-mueen-aa-al-gawwam"}, "edited": false, "score": 0, "creation_date": 1445500336, "post_id": 33270590, "comment_id": 54352282, "body": "Why creating Mat header ? Sorry for my question I just started learning opencv"}], "tags": [], "owner": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "is_accepted": false, "score": 2, "last_activity_date": 1445467985, "creation_date": 1445467985, "answer_id": 33270590, "question_id": 33269812, "link": "https://stackoverflow.com/questions/33269812/subtract-integer-vectors-in-opencv/33270590#33270590", "title": "subtract integer vectors in opencv", "body": "<p>you can do it like</p>\n\n<pre><code>Mat mdelta = Mat(taw2) - Mat(taw1);\nmdelta.copyTo(delta);\n</code></pre>\n\n<p>as seen on the test code:</p>\n\n<pre><code>#include &lt;opencv2\\opencv.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main( int argc, char** argv )\n{\n    vector&lt;int&gt; taw1;\n    vector&lt;int&gt; taw2;\n    vector&lt;int&gt; delta;\n\n    for( int i =1; i &lt; 5; i++ )\n    {\n        taw1.push_back( i );\n        taw2.push_back( i*3 );\n    }\n\n    Mat mdelta = Mat(taw2) - Mat(taw1);\n    mdelta.copyTo(delta);\n\n    cout &lt;&lt; \"taw1\\n\" &lt;&lt; Mat(taw2) &lt;&lt; endl;\n    cout &lt;&lt; \"taw2\\n\" &lt;&lt; Mat(taw1) &lt;&lt; endl;\n    cout &lt;&lt; \"taw2 - taw1\\n\" &lt;&lt; Mat(delta) &lt;&lt; endl;\n    cout &lt;&lt; \"taw2 + taw1\\n\" &lt;&lt; Mat(taw2) + Mat(taw1) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5471381, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DuMWOr5mRGo/AAAAAAAAAAI/AAAAAAAAAHQ/rJ7dPT3Zi8g/photo.jpg?sz=128", "display_name": "Sarmad Mueen AA Al-gawwam", "link": "https://stackoverflow.com/users/5471381/sarmad-mueen-aa-al-gawwam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1445467985, "creation_date": 1445463880, "question_id": 33269812, "link": "https://stackoverflow.com/questions/33269812/subtract-integer-vectors-in-opencv", "title": "subtract integer vectors in opencv", "body": "<p>if  I have </p>\n\n<pre><code>vector &lt;int&gt;taw1 , vector&lt;int&gt;taw2;\n</code></pre>\n\n<p>and I want to calculate </p>\n\n<pre><code>vector&lt;int&gt;delta =taw2-taw1; \n</code></pre>\n\n<p>how the subtraction can be done ?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1445463353, "post_id": 33269649, "comment_id": 54340496, "body": "Yes, I was afraid the question was too open, but dared anyway. What is your reason for <code>str()</code> and <code>to_string()</code> to use <code>operator&lt;&lt;</code> internally and not the other way around?"}, {"owner": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1445463746, "post_id": 33269649, "comment_id": 54340681, "body": "Ah, I guess you mean preference over e.g. stringstream above manual string concatenation. In which case your choice for <code>operator&lt;&lt;</code> makes sense."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1445520306, "post_id": 33269649, "comment_id": 54364515, "body": "@StijnFrishert, exactly. It is hard to serialize a complex class with simple string concatenation."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 8, "last_activity_date": 1445463143, "creation_date": 1445463143, "answer_id": 33269649, "question_id": 33269559, "link": "https://stackoverflow.com/questions/33269559/best-practices-on-making-c-class-showable-string-ostream/33269649#33269649", "title": "Best practices on making c++ class &quot;Showable&quot; (string, ostream)", "body": "<p>The question is going to be put in hold in a very few minutes, but I will still share my thoughts here.</p>\n\n<p>First, of all, we can remove const char* / std::string() operator overloads from the list. If the class is not a string, it should not be convertible to string, and serialization enablement does not make your class a string. </p>\n\n<p>As for <code>str()</code>, <code>to_string</code> and <code>operator &lt;&lt;</code> they a pretty equivalent. However, since for any complex class to_string() and str() are very likely to use ostreams internally, I believe, <code>operator &lt;&lt;</code> is the best option.</p>\n"}, {"comments": [{"owner": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "edited": false, "score": 0, "creation_date": 1445504839, "post_id": 33269986, "comment_id": 54354986, "body": "Good mention there&#39;s sometimes more ways than one to print an object (debug info, formatted output, ...). Seems another argument against conversion operators (&#39;cause what output format do you want, then?)."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1445464651, "creation_date": 1445464651, "answer_id": 33269986, "question_id": 33269559, "link": "https://stackoverflow.com/questions/33269559/best-practices-on-making-c-class-showable-string-ostream/33269986#33269986", "title": "Best practices on making c++ class &quot;Showable&quot; (string, ostream)", "body": "<p>I don't know whether it's best practice or not but... </p>\n\n<ol>\n<li><p>for debugging I always define <code>operator&lt;&lt;</code> which gives a summarised output in text form (this means it's easy to stream objects to log files)</p></li>\n<li><p>for formatted output I would probably choose to implement this in terms of free functions: <code>detail::x_detail_writer write_details(const X&amp;)</code> and then give <code>detail::x_detail_writer</code> (which is a functor) an <code>operator&lt;&lt; overload</code></p></li>\n<li><p>for anything but the most trivial object I implement <code>to_string</code> in terms of <code>operator&lt;&lt;</code> if at all.</p></li>\n</ol>\n\n<p>for aiding with debugging output we have a helper class which goes something like this:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct make_writeable {\n  friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const T&amp; t) {\n    // example prefix...\n    os &lt;&lt; demangle(typeid(T).name()) &lt;&lt; \"{\";\n    t.write(os);\n    // example postfix:\n    os &lt;&lt; \" }\";\n    return os;\n  }\n};\n</code></pre>\n\n<p>then derive some class from this and give it a member function called write:</p>\n\n<pre><code>struct X : make_writeable&lt;X&gt;\n{\n  void write(std::ostream&amp; os) const {\n    // write out members here. they will appear within the prefix and postfix\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 1363, "user_id": 1872993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41e9c2c0f9b961d684d3ddf42942281d?s=128&d=identicon&r=PG", "display_name": "Stijn Frishert", "link": "https://stackoverflow.com/users/1872993/stijn-frishert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 1, "accepted_answer_id": 33269649, "answer_count": 2, "score": 8, "last_activity_date": 1445464651, "creation_date": 1445462796, "question_id": 33269559, "link": "https://stackoverflow.com/questions/33269559/best-practices-on-making-c-class-showable-string-ostream", "title": "Best practices on making c++ class &quot;Showable&quot; (string, ostream)", "body": "<p>I have a value-semantic class that I'd like to be \"showable\" in the same sense as Haskells <code>Show</code> class, or Python provides a universal <code>__str__()</code> function.</p>\n\n<p>In c++:</p>\n\n<ul>\n<li>I could overload <code>operator&lt;&lt;(ostream&amp;, ...)</code> so I can output my class to e.g. <code>cout</code></li>\n<li>I could overload <code>operator std::string()</code> so my class converts to <em>std::string</em></li>\n<li>I could overload <code>operator const char*()</code> so my class converts to <em>const char</em> *.</li>\n<li>I could write a <code>str()</code> member, or a <code>to_string(...)</code> free function</li>\n</ul>\n\n<p><strong>Each of these functions could be defined in terms of the other.</strong> Is one option better over the others? Are these all the options? What would the most elegant way be to do this given c++11/14/17?</p>\n"}, {"tags": ["c++", "c++11", "copy-constructor", "move-constructor"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1445462566, "post_id": 33269316, "comment_id": 54340053, "body": "By deleting a copy constructor you inhibit a compiler-generated move constructor, so <code>MyClass ( MyClass &amp;&amp; ) = delete;</code> is redundant (ditto assignment operators)"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 5, "last_activity_date": 1445462115, "creation_date": 1445462115, "answer_id": 33269378, "question_id": 33269316, "link": "https://stackoverflow.com/questions/33269316/inheritance-and-deleting-copy-and-move-constructors/33269378#33269378", "title": "Inheritance and deleting copy and move constructors", "body": "<p>You are having the error because apparently you are deleting your methods in the wrong place. Since you are prefixing them with the class name, looks like you are deleting them in the implementation. The right way to delete is in the class definition, like following:</p>\n\n<pre><code>class foo {\n   foo(const foo&amp; ) = delete;\n};\n</code></pre>\n"}], "owner": {"reputation": 1769, "user_id": 398502, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e0ad41bf624e895bbc2e53b087dd0b0b?s=128&d=identicon&r=PG", "display_name": "Govan", "link": "https://stackoverflow.com/users/398502/govan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 33269378, "answer_count": 1, "score": 0, "last_activity_date": 1445462115, "creation_date": 1445461829, "last_edit_date": 1445461878, "question_id": 33269316, "link": "https://stackoverflow.com/questions/33269316/inheritance-and-deleting-copy-and-move-constructors", "title": "Inheritance and deleting copy and move constructors", "body": "<p>I want have a class with third-level inheritance. I will not move my classes or copy them. Actually, they will be created just once.  I want to test if it would be possible to delete the move and copy constructors and assignments as below: </p>\n\n<pre><code>MyClass ( MyClass &amp;&amp; ) = delete;\nMyClass ( const MyClass &amp; ) = delete;\nMyClass &amp; MyClass :: operator= ( const MyClass &amp; ) = delete;\nMyClass &amp; MyClass :: operator= ( MyClass &amp;&amp; ) = delete;\n</code></pre>\n\n<p>When I did that I got an error in the base class constructor and base of base class:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>initializing argument 1 of \u2018Base::Base(const int&amp;)\u2019 [-fpermissive]\n</code></pre>\n\n<p>My constructor is like this: </p>\n\n<pre><code>Base(const string &amp; name):BaseOfBase(name){\n\n    };\n</code></pre>\n\n<p>My questions are: </p>\n\n<ol>\n<li>Is it possible to delete all of move and copy constructors and assignment operators?</li>\n<li>If it is possible, why I am getting error? </li>\n<li>If it is possibe, is it a good choice? </li>\n</ol>\n"}, {"tags": ["c++", "class", "operator-overloading"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1445461654, "post_id": 33269238, "comment_id": 54339591, "body": "Your <code>operator+</code> function should fail to compile...   Also it contains a logic error, you call <code>strcat</code> on a pointer to uninitialized storage."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1445461727, "post_id": 33269238, "comment_id": 54339635, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including the actual and the desired behavior."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1445461750, "post_id": 33269238, "comment_id": 54339649, "body": "Another thing is that you continually dont&#39; allocate enough memory, you are forgetting about null terminators"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445461948, "post_id": 33269238, "comment_id": 54339738, "body": "I think you have the const in your <code>getString</code> in the wrong place? Is it necessary for <code>operator &lt;&lt;</code> to copy your string? I&#39;m not sure how you handle an empty string as per your default constructor is a good way."}, {"owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1445462806, "post_id": 33269238, "comment_id": 54340196, "body": "@M.M it did fail compile. Thanks for the reminder about the null terminators, I also fixed the strcat issue I believe. However, it still fails to compile. It can&#39;t seem to access the member variables str and int..."}, {"owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445462810, "post_id": 33269238, "comment_id": 54340197, "body": "@NeilKirk That function was provided to me by the teacher..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1445542114, "post_id": 33269238, "comment_id": 54378170, "body": "@LeonhartDan member variables can only be used when you have an object which they are a member of...   so when you&#39;re in a non-member function you have to say which object (e.g. <code>foo.str</code>, not just <code>str</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "edited": false, "score": 0, "creation_date": 1445462538, "post_id": 33269385, "comment_id": 54340036, "body": "This makes sense, thanks. However, the program still fails to compile. &quot;str&quot; and &quot;len&quot; are not working because they aren&#39;t declared in the scope. operator+ is not able to access the private members. how do I fix that?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "edited": false, "score": 1, "creation_date": 1445463039, "post_id": 33269385, "comment_id": 54340323, "body": "@LeonhartDan Make <code>operator+</code> a <code>friend</code>"}, {"owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445463659, "post_id": 33269385, "comment_id": 54340640, "body": "@NeilKirk That&#39;s what I was thinking as well, and I tried that, but it failed. I&#39;m starting to wonder if I don&#39;t understand what a non-member operator is and how it works..."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "edited": false, "score": 0, "creation_date": 1445463729, "post_id": 33269385, "comment_id": 54340671, "body": "@LeonhartDan, use a simpler class/struct to experiment with that. Something like <code>struct Foo {int a; int b;};</code>"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "edited": false, "score": 0, "creation_date": 1445463764, "post_id": 33269385, "comment_id": 54340692, "body": "@LeonhartDan In the class <code>friend String operator+(String const&amp; lhs, String const&amp; rhs)</code> then define the function outside the class."}, {"owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445464032, "post_id": 33269385, "comment_id": 54340795, "body": "@NeilKirk If I follow correctly, this is what I have. And it still doesn&#39;t work.. In class: <code>friend String operator+(String const&amp; lhs, String const&amp; rhs);</code>. Then after the class, I declare the operator+ as such:     <code>String operator+(String const&amp; lhs, String const&amp; rhs) {     \tlen = lhs.len + rhs.len;     \tstr = new char[len];     \tstd::strcpy(str,lhs);     \tstd::strcat(str,rhs);     }</code>"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445464145, "post_id": 33269385, "comment_id": 54340849, "body": "Where is <code>len</code> declared? It cannot come from nowhere!"}, {"owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "edited": false, "score": 0, "creation_date": 1445465137, "post_id": 33269385, "comment_id": 54341273, "body": "@RSahu That would be it, Thanks. The idea of creating and returning a string wasn&#39;t clicking with me. I also made the mistake of implementing the  operator+ in the .hpp file not main.cpp. Thanks so much for your help!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1445465177, "last_edit_date": 1445465177, "creation_date": 1445462142, "answer_id": 33269385, "question_id": 33269238, "link": "https://stackoverflow.com/questions/33269238/operator-overloading-problems/33269385#33269385", "title": "Operator+ Overloading Problems", "body": "<p>You are using</p>\n\n<pre><code>str = new char[len]; \n</code></pre>\n\n<p>in all the functions.  That does not have enough memory to hold the terminating null character. You need to use:</p>\n\n<pre><code>str = new char[len+1];\n</code></pre>\n\n<p>In the <code>operaor+</code> function, using <code>strcat</code> just after memory allocation is cause for undefined behavior since <code>str</code> is not initialized.</p>\n\n<p>You need to use:</p>\n\n<pre><code>str = new char[len+1];\nstr[0] = '\\0';\nstd::strcat(str,lhs);\nstd::strcat(str,rhs);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>str = new char[len+1];\nstd::strpy(str,lhs);    // strcpy, not strcat\nstd::strcat(str,rhs);\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>The complete implementation of <code>operator+()</code>:</p>\n\n<pre><code>String operator+(String const&amp; lhs, String const&amp; rhs) {\n    int len = lhs.len + rhs.len;\n    char* str = new char[len+1];\n    std::strcpy(str,lhs);\n    std::strcat(str,rhs);\n    String ret(str);\n    delete [] str;\n    return ret;\n}\n</code></pre>\n\n<p>You can simplify the function if you implement <code>String::operator+=(String const&amp; rhs)</code>. Then, you can use:</p>\n\n<pre><code>String operator+(String const&amp; lhs, String const&amp; rhs) {\n    String ret(lhs);\n    ret += rhs;\n    return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 3599400, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000424352408/picture?type=large", "display_name": "LeonhartDan", "link": "https://stackoverflow.com/users/3599400/leonhartdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 33269385, "answer_count": 1, "score": 0, "last_activity_date": 1445465177, "creation_date": 1445461477, "last_edit_date": 1445461717, "question_id": 33269238, "link": "https://stackoverflow.com/questions/33269238/operator-overloading-problems", "title": "Operator+ Overloading Problems", "body": "<p>For my CS class, our teacher wants us to create our own string class. I'm just in the beginning stages and am currently trying to overload <code>operator+</code>. He wants it as a non-member function. Here is what I have so far:</p>\n\n<p>This is the <code>String</code> header file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;cstring&gt;\n\n#ifndef STRING_HPP\n#define STRING_HPP\n\n\n\nclass String\n{\nprivate:\n    int len;\n    char* str;\npublic:\n    String();               // default constructor\n    String(String const&amp; s);    // copy constructor\n    String(char const* s);      // C-string constructor\n    ~String() {delete str;};                // destructor\n    char* const getString();    //get string for printing\n    String&amp; operator=(char const* c);\n    String&amp; operator=(String const&amp; s);\n\n};\n\ninline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, String s)\n{\n    return os &lt;&lt; s.getString();\n}\n\nString operator+(String const&amp; lhs, String const&amp; rhs) {\n    len = lhs.len + rhs.len;\n    str = new char[len];\n    std::strcat(str,lhs);\n    std::strcat(str,rhs);\n}\n\n#endif\n</code></pre>\n\n<p>This is the <code>String.cpp</code> file:</p>\n\n<pre><code>#include \"string.hpp\"\n#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n\nString::String()\n{\n    len = 0;\n    str = new char[len];\n}\n\nString::String(String const&amp; s) // copy constructor\n{\n    len = s.len;\n    str = new char[len]; \n    std::strcpy(str,s.str);\n\n}\nString::String(char const* s)   // C-string constructor\n{\n    len = std::strlen(s);\n    str = new char[len];\n    std::strcpy(str,s);\n\n}\n\nchar* const String::getString()\n{\n    return str;\n}\n\nString&amp; String::operator=(char const* c)\n{\n    // 1: allocate new memory and copy the elements\n    int newLen = std::strlen(c);\n    char* newStr = new char[newLen]; \n    std::strcpy(newStr,c);\n\n    // 2: deallocate old memory\n    delete [] str;\n\n    // 3: assign the new memory to the object\n    str = newStr;\n    len = newLen;\n}\n\nString&amp; String::operator=(String const&amp; s)\n{\n    // 1: allocate new memory and copy the elements\n    int newLen = s.len;\n    char* newStr = new char[newLen]; \n    std::strcpy(newStr,s.str);\n\n    // 2: deallocate old memory\n    delete [] str;\n\n    // 3: assign the new memory to the object\n    str = newStr;\n    len = newLen;\n }\n</code></pre>\n\n<p>and here is the implementation of <code>main</code>:</p>\n\n<pre><code>#include \"string.hpp\"\n#include &lt;iostream&gt;\nint main()\n{\n\n    String s1;\n    String s2 = \"test\";\n    String s3 = s2;\n\n    std::cout &lt;&lt; s1 &lt;&lt; '\\n';\n    std::cout &lt;&lt; s2 &lt;&lt; '\\n';\n    std::cout &lt;&lt; s3 &lt;&lt; '\\n';\n\n    String a = \"one\";\n    String b = \"two\";\n\n    a = b;\n    b = \"three\";\n\n    std::cout &lt;&lt; a &lt;&lt; '\\n';\n    std::cout &lt;&lt; b &lt;&lt; '\\n';\n\n    String hello = \"hello \";\n    String world = \"world\";\n    String concat = hello + world;\n\n    std::cout &lt;&lt; concat &lt;&lt; '\\n';\n}  \n</code></pre>\n\n<p>Everything works until that last <code>concat</code>. I cannot change <code>Main.cpp</code> because it is provided by the professor.</p>\n\n<p>Can anyone help point me in the right direction to get <code>operator+</code> to work?</p>\n"}, {"tags": ["c++", "function", "equation", "cmath"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1445461484, "post_id": 33269183, "comment_id": 54339496, "body": "Perhaps you should first read a book about computing C++ basics."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1445461500, "post_id": 33269183, "comment_id": 54339508, "body": "write <code>0.5 * ...</code> instead. And follow @Walter&#39;s advice."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1445461611, "post_id": 33269183, "comment_id": 54339570, "body": "When does <code>1&#47;2</code> ever evaluate to <code>5</code>??"}, {"owner": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 1, "creation_date": 1445461615, "post_id": 33269183, "comment_id": 54339571, "body": "<code>if I represent 1 &#47; 2 as an integer it&#39;ll just display 5?</code> No it will not it will display 0. Before you ask for help read a book or even a website about the fundamentals of C++ and programming in general"}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1445470608, "post_id": 33269183, "comment_id": 54343104, "body": "Apart from the problem with 1/2 and integers-doubles, which is the object of the question and so it&#39;s ok, your formula is wrong. Why are you using <code>pow(KE,2)</code>? As noted by user4581301, KE is not even initialised here. You don&#39;t want <code>KE</code>, you want <code>v</code>. So it&#39;s either <code>double KE = 1&#47;2*m*v*v;</code> or <code>double KE = 1&#47;2*m*pow(v,2);</code>."}, {"owner": {"reputation": 13, "user_id": 5438309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023511f1d6304e688972f459fecb62cd?s=128&d=identicon&r=PG&f=1", "display_name": "jon", "link": "https://stackoverflow.com/users/5438309/jon"}, "edited": false, "score": 0, "creation_date": 1445481465, "post_id": 33269183, "comment_id": 54345976, "body": "For your information Jack William&#39;s, I have already taken a college programming course in java and right now i&#39;m currently taking a programming class in c++. And before I even started taking college programming courses. I was studying c++ without fear second edition by Brian overland and I also was referencing the website tutorial point as I still am referencing that website along with coding made easy, and buckys you tube."}, {"owner": {"reputation": 13, "user_id": 5438309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023511f1d6304e688972f459fecb62cd?s=128&d=identicon&r=PG&f=1", "display_name": "jon", "link": "https://stackoverflow.com/users/5438309/jon"}, "edited": false, "score": 0, "creation_date": 1445487596, "post_id": 33269183, "comment_id": 54347431, "body": "And wow, okay I completely did not see that! The formula for calculating kinetic energy is &quot;k = m*v^2&quot; I was looking into how to use pow() in cmath. When pow() said base my mind right away was thinking KE was the base."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1445545926, "post_id": 33269183, "comment_id": 54380477, "body": "don&#39;t use <code>std::pow</code> for computing low-integer powers."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1445466033, "post_id": 33269267, "comment_id": 54341637, "body": "Finally! A valid proof that it&#39;s hip to be square!"}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 2, "last_activity_date": 1445461590, "creation_date": 1445461590, "answer_id": 33269267, "question_id": 33269183, "link": "https://stackoverflow.com/questions/33269183/how-to-represent-the-kinetic-equation-in-syntax/33269267#33269267", "title": "How to represent the kinetic equation in syntax", "body": "<p>using <code>std::array&lt;double,3&gt;</code> for the velocity vector:</p>\n\n<pre><code>double kinetic_energy(double mass, std::array&lt;double,3&gt; const&amp;velocity)\n{\n  return 0.5 * mass * (velocity[0]*velocity[0]+\n                       velocity[1]*velocity[1]+\n                       velocity[2]*velocity[2]); \n}\n</code></pre>\n\n<p>Note 1) that the velocity is a vector (whose magnitude is the speed) and 2) using <code>std::pow()</code> cannot be recommended for computing the square: its much more computationally costly than a single multiplication (with C++11). You may want to use the auxiliary</p>\n\n<pre><code>inline double square(double x)\n{ return x*x; }\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>double kinetic_energy(double mass, std::array&lt;double,3&gt; const&amp;velocity)\n{\n  return 0.5 * mass * (square(velocity[0])+square(velocity[1])+square(velocity[2])); \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1445465798, "post_id": 33269272, "comment_id": 54341537, "body": "&quot;assuming <code>m*v*pow(KE,2)</code> is correct.&quot; Don&#39;t be so coy. Of course it isn&#39;t. <code>KE</code> is used uninitialized."}, {"owner": {"reputation": 862, "user_id": 3371662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7daa9efdfdb43208824d9cc2aa2c80?s=128&d=identicon&r=PG&f=1", "display_name": "davir", "link": "https://stackoverflow.com/users/3371662/davir"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1445472499, "post_id": 33269272, "comment_id": 54343664, "body": "@user4581301 you&#39;re right, my bad. This part was formated badly in the original post and I didn&#39;t catch it after it was corrected."}], "tags": [], "owner": {"reputation": 862, "user_id": 3371662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7daa9efdfdb43208824d9cc2aa2c80?s=128&d=identicon&r=PG&f=1", "display_name": "davir", "link": "https://stackoverflow.com/users/3371662/davir"}, "is_accepted": true, "score": 1, "last_activity_date": 1445461604, "creation_date": 1445461604, "answer_id": 33269272, "question_id": 33269183, "link": "https://stackoverflow.com/questions/33269183/how-to-represent-the-kinetic-equation-in-syntax/33269272#33269272", "title": "How to represent the kinetic equation in syntax", "body": "<p>Yes, 1 and 2 are integer constants, so <code>1/2</code> gives you <code>0</code>, which is the result of the integral division of 1 by 2.</p>\n\n<p>What you want is this (assuming \"<code>m*v*pow(KE,2)</code>\" is correct):</p>\n\n<pre><code>double KE = 1.0/2.0*m*v*pow(KE,2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1497178855, "post_id": 44482812, "comment_id": 75960264, "body": "This works fine, but the reason yours works and OP&#39;s doesn&#39;t is because you used the correct equation for the kinetic energy and multiplied by a float (instead of multiplying by two integers divided, which didn&#39;t give the expected result). Both of these points have already been made to OP, and are contained in the accepted answer. Please only add answers to questions when they add something new. See <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer?</a>."}], "tags": [], "owner": {"reputation": 1, "user_id": 8141903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d5063acc5113f5f9dbfd85e57ffc34?s=128&d=identicon&r=PG&f=1", "display_name": "Kamaljot Singh", "link": "https://stackoverflow.com/users/8141903/kamaljot-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1497177198, "creation_date": 1497177198, "answer_id": 44482812, "question_id": 33269183, "link": "https://stackoverflow.com/questions/33269183/how-to-represent-the-kinetic-equation-in-syntax/44482812#44482812", "title": "How to represent the kinetic equation in syntax", "body": "<p>The best one could do is this-</p>\n\n<p>It took me 4 hours to devise, modify and simplify this answer.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint main()\n{\nint m;\ncout &lt;&lt; \"Enter mass (in kg): \";\ncin &gt;&gt; m;\n\nint v;\ncout &lt;&lt; \"Enter velocity (in m/s): \";\ncin &gt;&gt; v;\n\ncout &lt;&lt; \"If mass is \" &lt;&lt; m &lt;&lt; \" kg\" &lt;&lt; endl;\ncout &lt;&lt; \"and velocity is \" &lt;&lt; v &lt;&lt; \" m/s,\" &lt;&lt; endl;\n\nfloat kinEn = m * pow(v,2) * (0.5);\ncout &lt;&lt; \"then kinetic energy is \" &lt;&lt; kinEn &lt;&lt; \" Joules\" &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n\n<p>Avoid making it a function\nand mostly try to first declare, then write what is it about (using cout) and then to provide space for entering the value (using cin).</p>\n\n<p>The code gives the following result.</p>\n\n<pre><code> Enter mass (in kg): \n Enter velocity (in m/s): \n If mass is 57 kg\n and velocity is 20 m/s,\n then kinetic energy is 11400 Joules\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5438309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023511f1d6304e688972f459fecb62cd?s=128&d=identicon&r=PG&f=1", "display_name": "jon", "link": "https://stackoverflow.com/users/5438309/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1861, "favorite_count": 0, "accepted_answer_id": 33269272, "answer_count": 3, "score": 0, "last_activity_date": 1497177198, "creation_date": 1445461306, "last_edit_date": 1445482299, "question_id": 33269183, "link": "https://stackoverflow.com/questions/33269183/how-to-represent-the-kinetic-equation-in-syntax", "title": "How to represent the kinetic equation in syntax", "body": "<p>So i'd like to write the formula</p>\n\n<pre><code>KE = 1 / 2mv^2\n</code></pre>\n\n<p>in C++, creating a function that calculates a value using the kinetic energy equation. But I'm not entirely \nsure how to go about showing <code>1 / 2</code>. Wouldn't I have to make it a <code>double</code> because if I represent <code>1 / 2</code> as an integer it'll just display <code>5</code>? What the compiler is really seeing would be <code>0.5</code>, from which the zero is cut off? Here is the piece of code I have so far to calculating this equation: double KE = 1/2*m<em>v</em>pow(KE,2); Here's my code and what i'm trying to do.</p>\n\n<p>It's giving me <code>0</code> instead of <code>25</code> when I use the test values of <code>2</code> and <code>5</code>.</p>\n\n<pre><code>//my protyped function kineticEnergy\ndouble kineticEnergy(int m, int v);\n\n    int main(){\n      int m; // needed to pass a value into kineticEnergy function\n      int v; // needed to pass a value into kineticEnergy function\n\n      cout &lt;&lt; \"Enter the mass \" &lt;&lt; endl;\n      cin &gt;&gt; m;\n      cout &lt;&lt; \"Enter the velocity\" &lt;&lt; endl;\n      cin &gt;&gt; v;\n      int results = kineticEnergy(m,v);\n\n      cout &lt;&lt; \"The total kinetic energy of the object is \" &lt;&lt; results &lt;&lt; endl;\n\n      return 0;\n    } // end of main\n\n    // ##########################################################\n    //\n    //  Function name: kineticEnergy\n    //\n    //  Description:This will grab input from a program and calculate\n    // kinetic energy within the function\n    // ##########################################################\n\n    double kineticEnergy(int m, int v){\n      double KE = 1/2*m*v*pow(KE,2); // equation for calculating kinetic energy\n\n        return KE;\n    } // end of kinetic energy\n</code></pre>\n"}, {"tags": ["c++", "qt", "integer", "double"], "answers": [{"comments": [{"owner": {"reputation": 2589, "user_id": 3808452, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/iGXTD.jpg?s=128&g=1", "display_name": "Barthy", "link": "https://stackoverflow.com/users/3808452/barthy"}, "edited": false, "score": 1, "creation_date": 1445462603, "post_id": 33269139, "comment_id": 54340081, "body": "I went with @Rostislav&#39;s answer, which seems to have solved the problem. Thank you anyway for your help, the link you provided still is very helpful."}], "tags": [], "owner": {"reputation": 1158, "user_id": 5394981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc5b4002ea2221d26b83f57a432d6005?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/5394981/victor"}, "is_accepted": false, "score": 1, "last_activity_date": 1445461198, "creation_date": 1445461198, "answer_id": 33269139, "question_id": 33269043, "link": "https://stackoverflow.com/questions/33269043/qt-sql-how-to-differentiate-between-a-double-and-an-int/33269139#33269139", "title": "Qt SQL: how to differentiate between a double and an int?", "body": "<p>You must query <code>sqlite_master</code> for metadata.</p>\n\n<p>You should run a separate query for field <code>type</code> with condition <code>name</code> as field name, and <code>tbl_name</code> as table name.</p>\n\n<p>See here for available field types:</p>\n\n<p><a href=\"https://www.sqlite.org/faq.html\" rel=\"nofollow\">SQLite Frequently Asked Questions</a></p>\n"}, {"tags": [], "owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "is_accepted": true, "score": 2, "last_activity_date": 1445461282, "creation_date": 1445461282, "answer_id": 33269169, "question_id": 33269043, "link": "https://stackoverflow.com/questions/33269043/qt-sql-how-to-differentiate-between-a-double-and-an-int/33269169#33269169", "title": "Qt SQL: how to differentiate between a double and an int?", "body": "<p>To test the exact type stored in a <code>QVariant</code>, you can use the <a href=\"http://doc.qt.io/qt-5/qmetatype.html#Type-enum\" rel=\"nofollow\">type()</a> function and then switch on it:</p>\n\n<pre><code>switch(query.value(i).type()) {\ncase QMetaType::Int:\n    // ....\n    break;\ncase QMetaType::Double:\n    // ...\n    break;\n}\n</code></pre>\n\n<p>The types can be found <a href=\"http://doc.qt.io/qt-5/qmetatype.html#Type-enum\" rel=\"nofollow\">here</a>.</p>\n\n<p>Also, perhaps @Victor's answer has its merit - I'm not sure how QtSQL handles the types.</p>\n"}], "owner": {"reputation": 2589, "user_id": 3808452, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/iGXTD.jpg?s=128&g=1", "display_name": "Barthy", "link": "https://stackoverflow.com/users/3808452/barthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 33269169, "answer_count": 2, "score": 2, "last_activity_date": 1445461282, "creation_date": 1445460858, "question_id": 33269043, "link": "https://stackoverflow.com/questions/33269043/qt-sql-how-to-differentiate-between-a-double-and-an-int", "title": "Qt SQL: how to differentiate between a double and an int?", "body": "<p>I use an SQLite database in Qt. When filling a QTableWidget with information, I want to check if values received as QVariant are integers, doubles, or strings:</p>\n\n<pre><code>// query something here, put in in var named 'query'\nwhile(query.next()){\n    // insert new row\n    for (int i=0; i&lt;columnCount; i++){\n        if(query.value(i).toInt()!=0){\n            //add integer table item with special sorting/formatting \n        }else if(query.value(i).toDouble()!=0){\n            //add double table item with special sorting/formatting\n        }else {\n            //add standard qt table item\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is that double gets casted to integer when using <em>toInt()</em> and the other way round, which is why all numeric values are treated as integers or all as doubles, dependig on which one you test first.</p>\n\n<p>Is there a possibility to properly check if the number is a double or an integer?</p>\n"}, {"tags": ["c++", "lambda", "function-pointers", "implicit-conversion", "conversion-operator"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445465901, "post_id": 33269018, "comment_id": 54341585, "body": "Is <a href=\"http://rextester.com/DTUR53479\" rel=\"nofollow noreferrer\">this</a> what you are looking for? I&#39;m not sure I quite grasp the nature of the difficulty."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445488226, "post_id": 33269018, "comment_id": 54347594, "body": "@IgorTandetnik I looking exactly for answers to my questions marked by &quot;?&quot; signs. A copying of <a href=\"http://coliru.stacked-crooked.com/a/662f4fca9f3ac5ef\" rel=\"nofollow noreferrer\">my workable code</a> is not the solution IAC."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445488616, "post_id": 33269018, "comment_id": 54347693, "body": "What do you mean by <code>For #if 0 it can&#39;t convert...</code> The code between <code>#if 0</code> and <code>#endif</code> is skipped by the compiler - who do you mean by &quot;it&quot;, then? What code are you actually compiling, and what errors are you seeing? When you say <code>Does it mean that it is &quot;implicitly&quot; marked by the explicit keyword?</code> - does <i>what</i> mean that, and <i>what</i> is so marked? You use &quot;it&quot; a lot, but it&#39;s unclear (to me, at least) what each occurrence of the pronoun stands for."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445518191, "post_id": 33269018, "comment_id": 54363202, "body": "@IgorTandetnik &quot;It&quot; is placeholder for latest introduced  noun (usually from previous sentence)."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445520432, "post_id": 33269018, "comment_id": 54364601, "body": "So your questions should be read this way, then: &quot;For <code>#if 0</code> type can&#39;t convert a lambda to the corresponding function pointer. Does pointer mean that pointer is &quot;implicitly&quot; marked by the explicit keyword?&quot; I&#39;m afraid these sentences don&#39;t make much sense to me."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445521851, "post_id": 33269018, "comment_id": 54365557, "body": "@IgorTandetnik Please, never mind. If you want I can delete the question entirely. Do you want?"}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445522099, "post_id": 33269018, "comment_id": 54365727, "body": "@IgorTandetnik Another possibility for you is to correct my question in a way you want and I can accept your changes."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1445525193, "post_id": 33269018, "comment_id": 54367899, "body": "If you no longer want help with a problem, then by all means, go ahead and delete the question. If you do still want help with a problem, then I suggest you explain that problem more clearly. At the very least, post the actual code that fails to compile, and error messages you see when trying to compile it. I cannot correct your question as I do not understand the nature of the problem you want help with; if I did, I wouldn&#39;t need to ask for clarifications."}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1445526068, "creation_date": 1445460776, "last_edit_date": 1445526068, "question_id": 33269018, "link": "https://stackoverflow.com/questions/33269018/explicit-user-defined-conversion-operator-for-lambda", "title": "Explicit user-defined conversion operator for lambda", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow\">The article</a> devoted to lambda functions and particularly touches upon their <code>ClosureType::operator ret(*)(params)()</code>. In the article the operator refered to as \"a generic captureless lambda user-defined conversion function template.\"</p>\n\n<p>Given the code (automatic conversion to function pointer of appropriate type):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\n#if 0\n\ntemplate&lt; typename L, typename R, typename ...A &gt;\nconstexpr\nauto \nto_function_pointer(L l, R (L::*)(A...) const)\n{\n    return static_cast&lt; R (*)(A...) &gt;(l);\n}\n\ntemplate&lt; typename L, typename R, typename ...A &gt;\nconstexpr\nauto \nto_function_pointer(L l, R (L::*)(A...))\n{\n    return static_cast&lt; R (*)(A...) &gt;(l);\n}\n\ntemplate&lt; typename L &gt;\nconstexpr\nauto \nto_function_pointer(L l)\n{\n    return to_function_pointer(l, &amp;L::operator ());\n}\n\n#endif\n\ntemplate&lt; typename R, typename ...A &gt;\nconstexpr\nauto\nto_function_pointer(R (* fp)(A...))\n{\n    return fp;\n}\n\nnamespace\n{\n\nvoid f() { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl; }\n\n}\n\nint main()\n{\n    to_function_pointer(f)();\n    to_function_pointer(&amp;f)();\n    to_function_pointer([] () { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl; })();\n    to_function_pointer([] () mutable { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl; })();\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>For <code>#if 0</code> function <code>to_function_pointer</code> from the code can't convert a lambda to the corresponding function pointer. Does it mean that mentioned operator is \"implicitly\" marked by the <code>explicit</code> keyword? Is there a corresponding clause from the standard?</p>\n"}, {"tags": ["c++", "json", "qnetworkaccessmanager", "rapidjson"], "answers": [{"tags": [], "owner": {"reputation": 1439, "user_id": 3909621, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gWquo.jpg?s=128&g=1", "display_name": "Nicolas Charvoz", "link": "https://stackoverflow.com/users/3909621/nicolas-charvoz"}, "is_accepted": true, "score": 0, "last_activity_date": 1445461173, "creation_date": 1445461173, "answer_id": 33269134, "question_id": 33269000, "link": "https://stackoverflow.com/questions/33269000/rapidjson-and-data-from-yahoo-weather/33269134#33269134", "title": "RapidJson and Data from Yahoo Weather", "body": "<p>The format of the JSon is a bit special and I only had to dig throw all the array. </p>\n\n<p>So now my line looks like : </p>\n\n<pre><code>std::cout &lt;&lt; d[\"query\"][\"results\"][\"channel\"][\"item\"][\"condition\"][\"text\"].GetString() &lt;&lt; std::endl; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 426, "user_id": 5473325, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ec78e88ece91f4522361152e72bc050d?s=128&d=identicon&r=PG", "display_name": "john s.", "link": "https://stackoverflow.com/users/5473325/john-s"}, "is_accepted": false, "score": -1, "last_activity_date": 1445504197, "last_edit_date": 1445504197, "creation_date": 1445461343, "answer_id": 33269196, "question_id": 33269000, "link": "https://stackoverflow.com/questions/33269000/rapidjson-and-data-from-yahoo-weather/33269196#33269196", "title": "RapidJson and Data from Yahoo Weather", "body": "<p>The above string is not in a valid json format. You need to escape it. Instead of <code>{ temp : 23 }</code> it has to be <code>string json =\"{/\"temp/\" : 23}\";</code></p>\n\n<p>Also, you can perform error handling in RapidJson with <code>HasParseError()</code> and <code>IsString()</code>.</p>\n"}], "owner": {"reputation": 1439, "user_id": 3909621, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gWquo.jpg?s=128&g=1", "display_name": "Nicolas Charvoz", "link": "https://stackoverflow.com/users/3909621/nicolas-charvoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 33269134, "answer_count": 2, "score": 1, "last_activity_date": 1445504197, "creation_date": 1445460671, "question_id": 33269000, "link": "https://stackoverflow.com/questions/33269000/rapidjson-and-data-from-yahoo-weather", "title": "RapidJson and Data from Yahoo Weather", "body": "<p>I'm new to RapidJson, and I need to build an app using it.</p>\n\n<p>For now what I have is a JSon string that I get from the Yahoo API Weather, it looks like this :</p>\n\n<pre><code>{\n  query: {\n        count: 1,\n        created: \"2015-10-21T20:40:02Z\",\n        lang: \"fr-FR\",\n        results: {\n              channel: {\n                    item: {\n                          condition: {\n                                code: \"27\",\n                                date: \"Wed, 21 Oct 2015 9:59 pm CEST\",\n                                temp: \"59\",\n                                text: \"Mostly Cloudy\"\n                          }\n                    }\n              }\n        }\n  }\n}\n</code></pre>\n\n<p>And my function that habdle the data is here : </p>\n\n<pre><code>void MyCurl::dataHandle(const std::string &amp;data)\n{\n  //  std::cout &lt;&lt; data &lt;&lt; std::endl;                                                 \n\n  Document d;\n  d.Parse(data.c_str());\n\n  std::cout &lt;&lt; d[\"temp\"].GetString() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The last line throw  : </p>\n\n<p><code>rapidjson/document.h\u00a0:866\u00a0:\u00a0rapidjson::GenericValue&lt;Encoding, Allocator&gt;&amp;</code> <code>rapidjson::GenericValue&lt;Encoding, Allocator&gt;::operator[](const</code> <code>rapidjson::GenericValue&lt;Encoding, SourceAllocator&gt;&amp;) [with SourceAllocator =</code> <code>rapidjson::MemoryPoolAllocator&lt;&gt;; Encoding = rapidjson::UTF8&lt;&gt;; Allocator =</code> <code>rapidjson::MemoryPoolAllocator&lt;&gt;]:  assertion &lt;false&gt; failed.</code></p>\n\n<p>How can I access to the temperature and the text ? </p>\n\n<p>Thanks for your help !</p>\n"}, {"tags": ["c++", "templates", "dry"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1445460802, "post_id": 33268894, "comment_id": 54339105, "body": "you can put the definitions right after the declaration. Anyway templates go in header files."}], "answers": [{"comments": [{"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1445460638, "post_id": 33268927, "comment_id": 54339014, "body": "I cannot move template to the method1(). I thought something with inheritance, but is ugly anyway."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "reply_to_user": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1445460734, "post_id": 33268927, "comment_id": 54339073, "body": "@Nick You should put these restrictions in your question."}], "tags": [], "owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "is_accepted": false, "score": 1, "last_activity_date": 1445460400, "creation_date": 1445460400, "answer_id": 33268927, "question_id": 33268894, "link": "https://stackoverflow.com/questions/33268894/large-template-class-boilerplate-code/33268927#33268927", "title": "large template class boilerplate code", "body": "<p>If only <code>method1</code> uses the template parameter, only that function needs to be templated.</p>\n\n<pre><code>class Something\n{\n    template&lt;class T&gt;\n    void method1()\n    {\n        T::use();\n    }\n\n    void method2();\n    void method3();\n};\n</code></pre>\n\n<p>Note that this slightly changes the functionality of the class. It's now possible for an instance to be called with a variety of types on its <code>method1</code> whereas before only 1 type was possible and had to be decided up front.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445460864, "post_id": 33269010, "comment_id": 54339136, "body": "While this is common suggestion, it has some drawbacks. You introduce is-a relationship to something which is not naturally is-a, and what was only itroduced to save on typing. Private iheritance is much better here."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445461344, "post_id": 33269010, "comment_id": 54339414, "body": "@SergeyA The base is not <i>only introduced to save typing</i>. It allows those <code>method2()</code> and <code>method3()</code> to be defined in a source file and thus reduces compilation. Moreover, in case of specialisation of the derived classes, it avoids re-defining (copy &amp; paste) similar or even identical methods."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445461558, "post_id": 33269010, "comment_id": 54339541, "body": "Fair enough, not only to save on typing (I saved on typing here). It still had nothing to do with IS-A relationship reflected in public inheritance, but private inheritance with protected members of base class is the solution, as I mentioned."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1445489557, "post_id": 33269010, "comment_id": 54347972, "body": "honestly, i did accept this answer, because it is doing whatever I asked. However, when I tryed to separated the class into base + templated, it does look very bad and non intuitive. So probably I will make it with the boilerplate code."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1445548022, "post_id": 33269010, "comment_id": 54381694, "body": "@Nick <i>it does look very bad and non intuitive</i> is obviously subjective. If your non-template methods are trivial, then the &#39;boiler-plate code&#39; is certainly viable, but if they are heavy functions that are best pre-compiled, separating them out in a base class is certainly much better."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1445581885, "post_id": 33269010, "comment_id": 54391478, "body": "@Walter sure. but i still learning C++11 and I do not pay attention to  compile time yet. Also I explicitly instantiating the templates at the end."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1445590623, "post_id": 33269010, "comment_id": 54395884, "body": "@Nick 1) You should pay attention to what is inlined and/or cannot be pre-compiled, for you want to avoid bloated header files. 2) You can only explicitly instantiate your template once you know the template parameters, and for most useful templates you don&#39;t -- think about <code>std::vector&lt;&gt;</code>."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": true, "score": 3, "last_activity_date": 1445461142, "last_edit_date": 1445461142, "creation_date": 1445460730, "answer_id": 33269010, "question_id": 33268894, "link": "https://stackoverflow.com/questions/33268894/large-template-class-boilerplate-code/33269010#33269010", "title": "large template class boilerplate code", "body": "<p>Put the non-template dependent methods in a base class.</p>\n\n<pre><code>class SomethingBase\n{\nprotected:\n  void method2();\n  void method3();\n};\n\ntemplate&lt;typename T&gt;\nclass Something\n: SomethingBase\n{\npublic:\n  void method1();\n  using SomethingBase::method2;\n  using SomethingBase::method3;\n};\n</code></pre>\n\n<p>This does not change the functionality of the class, but is a bit more cumbersome than Neil Kirk's approach, which should be preferred if applicable.</p>\n\n<p>If, as here, the only functionality of the base is to provide less specialised functionality for derived classes, all its members, including the constructors, should be <code>protected</code>.</p>\n"}], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 33269010, "answer_count": 2, "score": 1, "last_activity_date": 1445461142, "creation_date": 1445460254, "question_id": 33268894, "link": "https://stackoverflow.com/questions/33268894/large-template-class-boilerplate-code", "title": "large template class boilerplate code", "body": "<p>I have large template class with several methods etc.</p>\n\n<p>Most of the methods do not use template parameter - Only few methods uses template parameter.</p>\n\n<p>Is there a way to minimize boilerplate code?</p>\n\n<pre><code>template &lt;class T&gt;\nclass Something{\n    void method1();\n    void method2();\n    void method3();\n};\n\ntemplate &lt;class T&gt;\nvoid Something&lt;T&gt;::method1(){\n    T::use();\n}\n\ntemplate &lt;class T&gt;\nvoid Something&lt;T&gt;::method2(){\n    // do not use T at all, does not call method1()\n}\n\ntemplate &lt;class T&gt;\nvoid Something&lt;T&gt;::method3(){\n    // do not use T at all, does not call method1()\n}\n</code></pre>\n\n<p>Any way I can avoid <code>template &lt;class T&gt;</code> (in my real code template definition is way much bigger) ?</p>\n"}, {"tags": ["c++", "templates", "c++11", "traits"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1445460575, "post_id": 33268855, "comment_id": 54338980, "body": "<i>Now double_vector is of type std::vector</i> ??? How did you conclude that?"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1445460634, "post_id": 33268855, "comment_id": 54339012, "body": "It&#39;s not really clear what you are trying to do. Get the collection of the same type, but with different value_type? Plus there&#39;s no context in which you want to use this which makes giving any reasonable answer hard."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1445460708, "post_id": 33268855, "comment_id": 54339057, "body": "What do you expect to do for <code>std::set</code>? <code>std::map</code>? What if there are custom comparators?"}, {"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1445464412, "post_id": 33268855, "comment_id": 54340993, "body": "@Barry he probably wants to use this collection_traits for vectors, lists, stacks, queues and deques."}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "edited": false, "score": 0, "creation_date": 1445465564, "post_id": 33268855, "comment_id": 54341448, "body": "This can probably be done for <a href=\"http://en.cppreference.com/w/cpp/concept/SequenceContainer\" rel=\"nofollow noreferrer\"><b>SequenceContainers</b></a> without too much hassle, using some template magic."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1445518922, "post_id": 33268855, "comment_id": 54363666, "body": "@\u0410\u043d\u0434\u0440\u0435\u0439\u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439 It is up to the OP to determine what it is the OP wants to do."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 1415913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cecc0f600c0ad7b7d4484d73a605d6?s=128&d=identicon&r=PG", "display_name": "user1415913", "link": "https://stackoverflow.com/users/1415913/user1415913"}, "edited": false, "score": 0, "creation_date": 1445495315, "post_id": 33270088, "comment_id": 54349859, "body": "This is what I was looking for. I almost got there, but the alias template was missing in my attempts. Great. I get it."}], "tags": [], "owner": {"reputation": 1526, "user_id": 969373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11067682315ef971f4866914789c3b7c?s=128&d=identicon&r=PG", "display_name": "Bartosz Przybylski", "link": "https://stackoverflow.com/users/969373/bartosz-przybylski"}, "is_accepted": true, "score": 3, "last_activity_date": 1445466289, "last_edit_date": 1445466289, "creation_date": 1445465172, "answer_id": 33270088, "question_id": 33268855, "link": "https://stackoverflow.com/questions/33268855/how-can-i-determine-the-container-template-type-of-an-instantiated-container-tem/33270088#33270088", "title": "How can I determine the container template type of an instantiated container template in C++", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Variadic_template\" rel=\"nofollow\">Variadic template</a> will help you <a href=\"https://ideone.com/lbS2W3\" rel=\"nofollow\">https://ideone.com/lbS2W3</a></p>\n\n<pre><code>using namespace std;\n\ntemplate&lt;typename... T&gt;\nstruct collection_traits { using template_type = void; };\n\ntemplate&lt;template&lt;typename...&gt; class C, typename... Args&gt;\nstruct collection_traits&lt;C&lt;Args...&gt; &gt; {\n  template&lt;typename... Subst&gt;\n  using template_type = C&lt;Subst...&gt;;\n};\n\nint main(int argc, char *argv[]) {\n  collection_traits&lt;vector&lt;int&gt;&gt;::template_type&lt;double&gt; t;\n\n  cout &lt;&lt; typeid(t).name() &lt;&lt; endl;\n\n  t.push_back(123.5);\n  cout &lt;&lt; t.front() &lt;&lt; endl;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 1415913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cecc0f600c0ad7b7d4484d73a605d6?s=128&d=identicon&r=PG", "display_name": "user1415913", "link": "https://stackoverflow.com/users/1415913/user1415913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 33270088, "answer_count": 1, "score": 1, "last_activity_date": 1445466289, "creation_date": 1445460143, "last_edit_date": 1445463843, "question_id": 33268855, "link": "https://stackoverflow.com/questions/33268855/how-can-i-determine-the-container-template-type-of-an-instantiated-container-tem", "title": "How can I determine the container template type of an instantiated container template in C++", "body": "<p>I need collection_traits with which I can do something like </p>\n\n<pre><code>typename collection_traits&lt;std::vector&lt;int&gt;&gt;::template type&lt;double&gt; double_vector;\n</code></pre>\n\n<p>Now double_vector is of type <code>std::vector&lt;double&gt;</code>. </p>\n\n<p>So what I want is to get the same container, but with different value type. </p>\n\n<p>Is this even possible?</p>\n"}, {"tags": ["c++", "pointers", "visual-c++"], "answers": [{"comments": [{"owner": {"reputation": 801, "user_id": 2471974, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Z8LG7.jpg?s=128&g=1", "display_name": "tomascapek", "link": "https://stackoverflow.com/users/2471974/tomascapek"}, "edited": false, "score": 0, "creation_date": 1445459997, "post_id": 33268797, "comment_id": 54338677, "body": "You won :) I wasn&#39;t fast enought ..."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 2, "last_activity_date": 1445459962, "creation_date": 1445459962, "answer_id": 33268797, "question_id": 33268739, "link": "https://stackoverflow.com/questions/33268739/c-pointers-c-style-strings/33268797#33268797", "title": "C++ Pointers - C - Style Strings", "body": "<p>C style strings are just C-style arrays of <code>char</code>, with all the semantics associated to C-style arrays.</p>\n\n<p><code>iostream</code> is special-cased to behave differently when given a <code>char</code> pointer; if you want to print the address you should cast it to <code>void*</code> first.</p>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 2929925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ead5d98179d08112d9008e507384878b?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/2929925/rahul"}, "edited": false, "score": 0, "creation_date": 1445460479, "post_id": 33268830, "comment_id": 54338936, "body": "would you mind giving me an example with void* casting please ?Also, in usual cases if it is of type say &quot;int&quot;, cout &lt;&lt; ptr should return a memry address right ?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 313, "user_id": 2929925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ead5d98179d08112d9008e507384878b?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/2929925/rahul"}, "edited": false, "score": 0, "creation_date": 1445460616, "post_id": 33268830, "comment_id": 54339002, "body": "@rahul Sure, check the edit. And yes, the char pointer is a special case for compatibility and ease of use with C-style strings. With all other types of pointers the address will be printed. You could technically cast the pointer to something else other than <code>void*</code> too, but <code>void*</code> is considered the most &quot;neutral&quot; for this purpose."}, {"owner": {"reputation": 313, "user_id": 2929925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ead5d98179d08112d9008e507384878b?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/2929925/rahul"}, "edited": false, "score": 0, "creation_date": 1445531586, "post_id": 33268830, "comment_id": 54372211, "body": "Also, in addition to this.When I tried printing cout &lt;&lt; *ptr, it gives me address of 1st character.why is this ?, i was expecting the 1st value instead"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 313, "user_id": 2929925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ead5d98179d08112d9008e507384878b?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/2929925/rahul"}, "edited": false, "score": 0, "creation_date": 1445531917, "post_id": 33268830, "comment_id": 54372411, "body": "@rahul What do you mean by the 1st value? 1st of what?"}, {"owner": {"reputation": 313, "user_id": 2929925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ead5d98179d08112d9008e507384878b?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/2929925/rahul"}, "edited": false, "score": 0, "creation_date": 1445532437, "post_id": 33268830, "comment_id": 54372729, "body": "sorry, i meant it is just giving a random address .I though I would get value if you deference a pointer"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 313, "user_id": 2929925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ead5d98179d08112d9008e507384878b?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/2929925/rahul"}, "edited": false, "score": 0, "creation_date": 1445532733, "post_id": 33268830, "comment_id": 54372891, "body": "<code>cout &lt;&lt; *ptr</code> will print the first character, because that&#39;s what <code>ptr</code> is pointing to."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 3, "last_activity_date": 1445460519, "last_edit_date": 1445460519, "creation_date": 1445460075, "answer_id": 33268830, "question_id": 33268739, "link": "https://stackoverflow.com/questions/33268739/c-pointers-c-style-strings/33268830#33268830", "title": "C++ Pointers - C - Style Strings", "body": "<p><code>operator&lt;&lt;</code> has an overload that takes an <code>ostream</code> (the type of <code>cout</code>) and a <code>const char*</code>.</p>\n\n<p>That overload treats the <code>const char*</code> argument as a null terminated C-string, and prints characters pointed to by that pointer, until it finds the terminating null character.</p>\n\n<p>Note that passing a <code>char</code> pointer that doesn't point to a null terminated sequence of <code>char</code>s invokes undefined behavior.</p>\n\n<p>For circumventing this behavior when you simply want to output the memory address, cast the pointer to <code>void*</code> first:</p>\n\n<pre><code>cout &lt;&lt; static_cast&lt;void*&gt;(ptr); // outputs the address stored in 'ptr'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": false, "score": 0, "last_activity_date": 1445460117, "creation_date": 1445460117, "answer_id": 33268843, "question_id": 33268739, "link": "https://stackoverflow.com/questions/33268739/c-pointers-c-style-strings/33268843#33268843", "title": "C++ Pointers - C - Style Strings", "body": "<p>Because strings in C/C++ ends with <code>'\\0'</code>. The output will run to the next pointer until it reaches the pointer wich point to <code>'\\0'</code>.</p>\n\n<pre><code>ptr + 0 == 'A';\nptr + 1 == 'l';\nptr + 2 == 'e';\nptr + 3 == 'x';\nptr + 4 == '\\0'; // stop, end of output\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": 2, "last_activity_date": 1445460205, "creation_date": 1445460205, "answer_id": 33268880, "question_id": 33268739, "link": "https://stackoverflow.com/questions/33268739/c-pointers-c-style-strings/33268880#33268880", "title": "C++ Pointers - C - Style Strings", "body": "<p>it is happen because in c++ you can overload operators,  like this:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; os, const char* p)\n{\n    while (*p) cout&lt;&lt;*p++;\n}\n</code></pre>\n\n<p>and because char array is a common type of strings, it was done for you in the standard language.  </p>\n"}], "owner": {"reputation": 313, "user_id": 2929925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ead5d98179d08112d9008e507384878b?s=128&d=identicon&r=PG&f=1", "display_name": "rahul", "link": "https://stackoverflow.com/users/2929925/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "closed_date": 1445460442, "accepted_answer_id": 33268830, "answer_count": 4, "score": 1, "last_activity_date": 1445531758, "creation_date": 1445459739, "last_edit_date": 1445531758, "question_id": 33268739, "link": "https://stackoverflow.com/questions/33268739/c-pointers-c-style-strings", "closed_reason": "Duplicate", "title": "C++ Pointers - C - Style Strings", "body": "<p>I am fairly new to C++,when I was reading about pointers I got confused a bit:</p>\n\n<pre><code>char str[] = \"Alex\"\nchar *ptr\nptr = str\ncout &lt;&lt; ptr\n</code></pre>\n\n<p>This gives \"Alex\" string itself , rather than the memory location and also, *ptr would give you the letter \"A\".Would someone explain to me why this is happening please?</p>\n\n<p>Also, in addition to this.When I tried printing \n<code>cout &lt;&lt; *ptr</code>\nit gives me address of 1st character.why is this ?, i was expecting the 1st value instead </p>\n"}, {"tags": ["c++", "c++11", "gcc"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1445460374, "post_id": 33268691, "comment_id": 54338882, "body": "I am not confident enough to post this as an answer, but you can try this: Set <code>CC</code> and <code>CXX</code> while configuring, e.g. <code>CC=&#47;path&#47;to&#47;gcc CXX=&#47;path&#47;to&#47;g++ cmake .</code>. Then prepend <code>&#47;path&#47;to&#47;newlibs</code> to <code>LD_LIBRARY_PATH</code> when running the compiled program."}, {"owner": {"reputation": 15468, "user_id": 321772, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c03247f45c9f291391b894375c2709ca?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/321772/adam"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1445460915, "post_id": 33268691, "comment_id": 54339175, "body": "@BaummitAugen be confident. Potentially also prepend <code>PATH</code> to make the command line <code>gcc</code> command pick up the new one."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5335780, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153635949218958/picture?type=large", "display_name": "nash.ouroboro", "link": "https://stackoverflow.com/users/5335780/nash-ouroboro"}, "edited": false, "score": 0, "creation_date": 1445460799, "post_id": 33268914, "comment_id": 54339104, "body": "i am able to change the $LD_LIBRARY_PATH by the command:   setenv LD_LIBRARY_PATH /share/user/gccInstall/lib.   which gcc returns the path to the older version which means the system does not recognize the new gcc installation. For that i guess i need to make changes to the $PATH variable. What should the path be?"}, {"owner": {"reputation": 73, "user_id": 5335780, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153635949218958/picture?type=large", "display_name": "nash.ouroboro", "link": "https://stackoverflow.com/users/5335780/nash-ouroboro"}, "edited": false, "score": 0, "creation_date": 1445461495, "post_id": 33268914, "comment_id": 54339506, "body": "Compiling with the command: g++ -std=c++11 main.cpp gives the following error:   /share/user/OpenFOAM/ThirdParty-2.3.0/platforms/linux64/gcc-&zwnj;&#8203;4.6.1/libexec/gcc/x8&zwnj;&#8203;6_64-unknown-linux-g&zwnj;&#8203;nu/4.6.1/cc1plus: error while loading shared libraries: libmpc.so.2: cannot open shared object file: No such file or directory  This is after using the following lines in Makefile:  CC = /share/user/gccInstall/bin/gcc CXX = /share/user/gccInstall/bin/g++"}, {"owner": {"reputation": 226, "user_id": 709998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c740d7c3a5d1538dd8b5ee6169226c?s=128&d=identicon&r=PG", "display_name": "RyGuyinCA", "link": "https://stackoverflow.com/users/709998/ryguyinca"}, "reply_to_user": {"reputation": 73, "user_id": 5335780, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153635949218958/picture?type=large", "display_name": "nash.ouroboro", "link": "https://stackoverflow.com/users/5335780/nash-ouroboro"}, "edited": false, "score": 0, "creation_date": 1445463228, "post_id": 33268914, "comment_id": 54340427, "body": "If you use the command <code>ldd &#47;share&#47;user&#47;gccInstall&#47;bin&#47;g++</code> then what does it say for the libmpc.so.2 library?  We want to set up LD_LIBRARY_PATH so that it loads the gcc-4.8.2 version instead of the 4.6.1 one."}, {"owner": {"reputation": 73, "user_id": 5335780, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153635949218958/picture?type=large", "display_name": "nash.ouroboro", "link": "https://stackoverflow.com/users/5335780/nash-ouroboro"}, "edited": false, "score": 0, "creation_date": 1445467427, "post_id": 33268914, "comment_id": 54342145, "body": "This is the response i got from the command. Not sure what it means though libm.so.6 =&gt; /lib64/libm.so.6 (0x0000003068200000)         libc.so.6 =&gt; /lib64/libc.so.6 (0x0000003067a00000)         /lib64/ld-linux-x86-64.so.2 (0x0000003066a00000)"}], "tags": [], "owner": {"reputation": 226, "user_id": 709998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c740d7c3a5d1538dd8b5ee6169226c?s=128&d=identicon&r=PG", "display_name": "RyGuyinCA", "link": "https://stackoverflow.com/users/709998/ryguyinca"}, "is_accepted": false, "score": 0, "last_activity_date": 1445460341, "creation_date": 1445460341, "answer_id": 33268914, "question_id": 33268691, "link": "https://stackoverflow.com/questions/33268691/switching-gcc-version-on-remote-linux-based-hpc-no-root-rights/33268914#33268914", "title": "Switching gcc version on remote Linux based HPC (no root rights)", "body": "<p>If you have a different version of g++ that you want to use then make sure you're getting the right one according to your <code>$PATH</code> or else specify the full path to the g++ you want.  The other thing to be aware of is that you will probably need to update the <code>$LD_LIBRARY_PATH</code> environment variable to get the necessary libraries from your new gcc installation.</p>\n\n<p>What exactly is the problem you're having?  Can you compile but not run?  Does compilation fail?  Do you have any error messages you can share?</p>\n"}, {"tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": false, "score": 0, "last_activity_date": 1445463259, "creation_date": 1445463259, "answer_id": 33269679, "question_id": 33268691, "link": "https://stackoverflow.com/questions/33268691/switching-gcc-version-on-remote-linux-based-hpc-no-root-rights/33269679#33269679", "title": "Switching gcc version on remote Linux based HPC (no root rights)", "body": "<p>Assuming as you say that your new GCC installation is\nunder <code>/share/user/gccInstall</code> then if you add the option</p>\n\n<pre><code>-B/share/user/gccInstall\n</code></pre>\n\n<p>to each invocation of <code>g++</code> or <code>gcc</code> then it will have this\neffect:</p>\n\n<blockquote>\n  <p>-Bprefix\n     This option specifies where to find the executables, libraries, include files, and data files of the compiler itself.</p>\n</blockquote>\n\n<p>(from <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html#Directory-Options\" rel=\"nofollow\">Options for Directory Search</a>)</p>\n\n<p>This should help, and will perhaps be enough. </p>\n"}], "owner": {"reputation": 73, "user_id": 5335780, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153635949218958/picture?type=large", "display_name": "nash.ouroboro", "link": "https://stackoverflow.com/users/5335780/nash-ouroboro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1445463259, "creation_date": 1445459592, "last_edit_date": 1445462847, "question_id": 33268691, "link": "https://stackoverflow.com/questions/33268691/switching-gcc-version-on-remote-linux-based-hpc-no-root-rights", "title": "Switching gcc version on remote Linux based HPC (no root rights)", "body": "<p>There is a specific program i need to run using c++11 libraries offered by gcc-4.8 and higher. The remote HPC on which i am trying to run the program has gcc-4.6.1. I was able to install the gcc-4.8.2 version on the HPC in a user specified directory, say\n/share/user/gccInstall</p>\n\n<p>(gccInstall has the /bin and /lib (etc) folders you get after installation)\nI need to switch to this version for compiling my program. I tried using update-alternatives --config gcc, but it does not return anything. \nCan anyone help me solve this!</p>\n\n<p><strong>EDIT</strong>:\nWas able to change the gcc version using the following commands:\nsetenv PATH /share/user/gccInstall/bin\nsetenv LD_LIBRARY_PATH /share/user/gccInstall/lib</p>\n\n<p>Now gcc --version returns 4.8.2.\nBut encountered another error while compiling: \ng++: error trying to exec 'as': execvp: No such file or directory\nwhat am i missing? </p>\n\n<p>Many Thanks.</p>\n"}, {"tags": ["c++", "c++11", "stdvector", "initializer-list"], "answers": [{"tags": [], "owner": {"reputation": 221, "user_id": 1571671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954f813d353e5f8bc864cbe02bd22ead?s=128&d=identicon&r=PG", "display_name": "Sim&#243;n Gonz&#225;lez Guerra", "link": "https://stackoverflow.com/users/1571671/sim%c3%b3n-gonz%c3%a1lez-guerra"}, "is_accepted": true, "score": 4, "last_activity_date": 1445459788, "creation_date": 1445459788, "answer_id": 33268753, "question_id": 33268655, "link": "https://stackoverflow.com/questions/33268655/initializer-list-for-vector-of-objects/33268753#33268753", "title": "Initializer list for vector of objects", "body": "<p>The following works:</p>\n\n<pre><code>std::vector&lt;Test&gt; v = {{1, 2, 3}, {1, 2, 4}};\n</code></pre>\n\n<p>But I'm not sure if this is what you meant.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1445460134, "creation_date": 1445460134, "answer_id": 33268851, "question_id": 33268655, "link": "https://stackoverflow.com/questions/33268655/initializer-list-for-vector-of-objects/33268851#33268851", "title": "Initializer list for vector of objects", "body": "<p>The following are all valid methods to initialize a <code>vector&lt;Test&gt;</code>.</p>\n\n<pre><code> std::vector&lt;Test&gt; v1 = { Test({1, 2, 3}), Test({1, 2, 4}) };\n std::vector&lt;Test&gt; v2{Test({1, 2, 3}), Test({1, 2, 4}) };\n\n std::vector&lt;Test&gt; v3 = { {1, 2, 3}, {1, 2, 4}};\n std::vector&lt;Test&gt; v4{{1, 2, 3}, {1, 2, 4}};\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5463834, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0f64c0c83aafe7f50987cb2061405d52?s=128&d=identicon&r=PG&f=1", "display_name": "Mark W", "link": "https://stackoverflow.com/users/5463834/mark-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1282, "favorite_count": 0, "accepted_answer_id": 33268753, "answer_count": 2, "score": 0, "last_activity_date": 1445460134, "creation_date": 1445459438, "question_id": 33268655, "link": "https://stackoverflow.com/questions/33268655/initializer-list-for-vector-of-objects", "title": "Initializer list for vector of objects", "body": "<p>I have the following sample code. Is it possible to initialize a list of objects without specifying the \"Test\" in the vector of objects, or is this the best way? Thanks.</p>\n\n<pre><code>class Test {\npublic:\n    Test(const std::initializer_list&lt;int&gt; list) : m_(list) {\n\n    }\n\nprivate:\n    std::vector&lt;int&gt; m_;\n};\n\nint main(int argc, char **argv) {\n    std::vector&lt;Test&gt; v = { Test({1, 2, 3}), Test({1, 2, 4}) };\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "directx-11", "vertex-buffer"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1445551072, "post_id": 33268622, "comment_id": 54383190, "body": "You should take a moment to read <a href=\"http://blogs.msdn.com/b/chuckw/archive/2013/08/21/living-without-d3dx.aspx\" rel=\"nofollow noreferrer\">this post</a>."}, {"owner": {"reputation": 450, "user_id": 3622514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d7088d94fbfb978d54089ff20d81f61a?s=128&d=identicon&r=PG&f=1", "display_name": "Wu Zhenwei", "link": "https://stackoverflow.com/users/3622514/wu-zhenwei"}, "edited": false, "score": 0, "creation_date": 1542825382, "post_id": 33268622, "comment_id": 93711192, "body": "Maybe it&#39;s too late but I didn&#39;t see you use the mInputLayout you created. It should be bind to the context with vertex buffers."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5472965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a12e3560238be35e26c75345bda67b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael L.", "link": "https://stackoverflow.com/users/5472965/michael-l"}, "edited": false, "score": 0, "creation_date": 1445462193, "post_id": 33268890, "comment_id": 54339853, "body": "Thx, you are right - I corrected the code but now I got no errors and no cube on the screen :("}, {"owner": {"reputation": 3244, "user_id": 2498598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de08236fe3ba6726fb5f34a6a5bb1aa6?s=128&d=identicon&r=PG", "display_name": "Adam Miles", "link": "https://stackoverflow.com/users/2498598/adam-miles"}, "reply_to_user": {"reputation": 11, "user_id": 5472965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a12e3560238be35e26c75345bda67b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael L.", "link": "https://stackoverflow.com/users/5472965/michael-l"}, "edited": false, "score": 0, "creation_date": 1445462427, "post_id": 33268890, "comment_id": 54339987, "body": "Have you tried a) Turning on DX11 Debug Layer? b) Using Visual Studio&#39;s Graphics Debugger?"}, {"owner": {"reputation": 11, "user_id": 5472965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a12e3560238be35e26c75345bda67b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael L.", "link": "https://stackoverflow.com/users/5472965/michael-l"}, "edited": false, "score": 0, "creation_date": 1445464984, "post_id": 33268890, "comment_id": 54341220, "body": "I&#39;m using VS2010, windows 7, and there is no file D3D11SDKLayers.dll on my system. But simple debug layer is working - macro HR()."}, {"owner": {"reputation": 11, "user_id": 5472965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a12e3560238be35e26c75345bda67b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael L.", "link": "https://stackoverflow.com/users/5472965/michael-l"}, "edited": false, "score": 0, "creation_date": 1445465160, "post_id": 33268890, "comment_id": 54341286, "body": "I mean program is compiling now, but in window i got rendered correctly background only."}, {"owner": {"reputation": 11, "user_id": 5472965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a12e3560238be35e26c75345bda67b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael L.", "link": "https://stackoverflow.com/users/5472965/michael-l"}, "edited": false, "score": 0, "creation_date": 1445465604, "post_id": 33268890, "comment_id": 54341464, "body": "Maybe there is a problem with function BuildFX(), I pasted the code above, and i think somewhere i miss sth..."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1445551199, "post_id": 33268890, "comment_id": 54383240, "body": "The D3D11SDK Debug Layer is available for Windows 7. See <a href=\"http://blogs.msdn.com/b/chuckw/archive/2013/08/21/living-without-d3dx.aspx\" rel=\"nofollow noreferrer\">Direct3D SDK Debug Layer Tricks</a>. I&#39;d strongly suggest moving to VS 2013 or VS 2015--Community edition is free if you quality for the license and includes the graphics debugger; avoid the Express for Windows desktop SKUs"}], "tags": [], "owner": {"reputation": 3244, "user_id": 2498598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de08236fe3ba6726fb5f34a6a5bb1aa6?s=128&d=identicon&r=PG", "display_name": "Adam Miles", "link": "https://stackoverflow.com/users/2498598/adam-miles"}, "is_accepted": false, "score": 0, "last_activity_date": 1445460236, "creation_date": 1445460236, "answer_id": 33268890, "question_id": 33268622, "link": "https://stackoverflow.com/questions/33268622/directx-11-two-vertex-buffers-and-two-input-slots/33268890#33268890", "title": "Directx-11 Two vertex buffers and two input slots", "body": "<p>vbd2 is uninitialised. </p>\n\n<p>You've copy/pasted the code from above and not changed vbd to vbd2.</p>\n"}], "owner": {"reputation": 11, "user_id": 5472965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a12e3560238be35e26c75345bda67b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael L.", "link": "https://stackoverflow.com/users/5472965/michael-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 962, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445465768, "creation_date": 1445459306, "last_edit_date": 1495541681, "question_id": 33268622, "link": "https://stackoverflow.com/questions/33268622/directx-11-two-vertex-buffers-and-two-input-slots", "title": "Directx-11 Two vertex buffers and two input slots", "body": "<p>I have a problem with setting two separate vertex buffers (and input slots). One buffer must contain vertices, the second buffer - color data. I have found this problem here:\n<a href=\"https://stackoverflow.com/questions/28248727/direct3d-multiple-vertex-buffers-non-interleaved-elements\">Direct3D multiple vertex buffers, non interleaved elements</a>\nSo i followed this instructions but got error message box:</p>\n\n<p>Error Code: E_INVALIDARG (0x80070057)\nCalling: md3dDevice->CreateBuffer(&amp;vbd2, &amp;initData2, &amp;mBoxVB2)</p>\n\n<p>Here's the code:</p>\n\n<pre><code>//layout array   \nD3D11_INPUT_ELEMENT_DESC vertexDesc3[] =\n{\n{\"POSITION\", 0, DXGI_FORMAT_R32G32B32_FLOAT,    0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0},\n{\"COLOR\",    0, DXGI_FORMAT_R32G32B32A32_FLOAT, 1, 0, D3D11_INPUT_PER_VERTEX_DATA, 0}\n};\n\nD3DX11_PASS_DESC passDesc;\nmTech-&gt;GetPassByIndex(0)-&gt;GetDesc(&amp;passDesc);\nHR(md3dDevice-&gt;CreateInputLayout(vertexDesc3, 2, passDesc.pIAInputSignature, \n    passDesc.IAInputSignatureSize, &amp;mInputLayout));\n\n// buffers\nID3D11Buffer* mBoxVB;\nID3D11Buffer* mBoxVB2;\nID3D11Buffer* buffers[2];\nbuffers[0] = mBoxVB;\nbuffers[1] = mBoxVB2;\n\n\nXMFLOAT3 vertex[] =\n{\nXMFLOAT3(-1.0f, -1.0f, -1.0f)  ,\nXMFLOAT3(-1.0f, +1.0f, -1.0f)  ,\nXMFLOAT3(+1.0f, +1.0f, -1.0f)  ,  \nXMFLOAT3(+1.0f, -1.0f, -1.0f)  , \nXMFLOAT3(-1.0f, -1.0f, +1.0f)  ,\nXMFLOAT3(-1.0f, +1.0f, +1.0f)  , \nXMFLOAT3(+1.0f, +1.0f, +1.0f)  , \nXMFLOAT3(+1.0f, -1.0f, +1.0f)  \n};\n\n// vertex buffer\nD3D11_BUFFER_DESC vbd;\nvbd.Usage = D3D11_USAGE_IMMUTABLE;\nvbd.ByteWidth = sizeof(XMFLOAT3) * 8;\nvbd.BindFlags = D3D11_BIND_VERTEX_BUFFER;\nvbd.CPUAccessFlags = 0;\nvbd.MiscFlags = 0;\nvbd.StructureByteStride = 0;\n\nD3D11_SUBRESOURCE_DATA vinitData;\nvinitData.pSysMem = vertex;\nHR(md3dDevice-&gt;CreateBuffer(&amp;vbd, &amp;vinitData, &amp;mBoxVB));\n\nXMFLOAT4 color[] =\n{\n (const float*)&amp;Colors::White  ,\n (const float*)&amp;Colors::Black  ,\n (const float*)&amp;Colors::Red    ,  \n (const float*)&amp;Colors::Green  , \n (const float*)&amp;Colors::Blue   ,\n (const float*)&amp;Colors::Yellow , \n (const float*)&amp;Colors::Cyan   , \n (const float*)&amp;Colors::Magenta \n};\n\n// where the namespace Colors is defined like\nnamespace Colors\n{\n    XMGLOBALCONST XMVECTORF32 White     = {1.0f, 1.0f, 1.0f, 1.0f};\n    XMGLOBALCONST XMVECTORF32 Black     = {0.0f, 0.0f, 0.0f, 1.0f};\n    XMGLOBALCONST XMVECTORF32 Red       = {1.0f, 0.0f, 0.0f, 1.0f};\n    XMGLOBALCONST XMVECTORF32 Green     = {0.0f, 1.0f, 0.0f, 1.0f};\n    XMGLOBALCONST XMVECTORF32 Blue      = {0.0f, 0.0f, 1.0f, 1.0f};\n    XMGLOBALCONST XMVECTORF32 Yellow    = {1.0f, 1.0f, 0.0f, 1.0f};\n    XMGLOBALCONST XMVECTORF32 Cyan      = {0.0f, 1.0f, 1.0f, 1.0f};\n    XMGLOBALCONST XMVECTORF32 Magenta   = {1.0f, 0.0f, 1.0f, 1.0f}; \n};\n\n// color buffer\nD3D11_BUFFER_DESC vbd2;\nvbd2.Usage = D3D11_USAGE_IMMUTABLE;\nvbd2.ByteWidth = sizeof(XMFLOAT4) * 8;\nvbd2.BindFlags = D3D11_BIND_VERTEX_BUFFER;\nvbd2.CPUAccessFlags = 0;\nvbd2.MiscFlags = 0;\nvbd2.StructureByteStride = 0;\n\nD3D11_SUBRESOURCE_DATA initData2;\ninitData2.pSysMem = color;\n// here is our problem:\nHR(md3dDevice-&gt;CreateBuffer(&amp;vbd2, &amp;initData2, &amp;mBoxVB2));\n\n// inside DrawScene():\nUINT stride[] = {sizeof(XMFLOAT3), sizeof(XMFLOAT4)};\nUINT offset[] = {0,0};\nmd3dImmediateContext-&gt;IASetVertexBuffers(0, 2, buffers, stride, offset);\nmd3dImmediateContext-&gt;IASetIndexBuffer(mBoxIB, DXGI_FORMAT_R32_UINT, 0);\n\n\n// and the shaders\ncbuffer cbPerObject\n{\n    float4x4 gWorldViewProj; \n};\n\nstruct VertexIn\n{\n    float3 PosL  : POSITION;\n    float4 Color : COLOR;\n};\n\nstruct VertexOut\n{\n    float4 PosH  : SV_POSITION;\n    float4 Color : COLOR;\n};\n\nVertexOut VS(VertexIn vin)\n{\n    VertexOut vout;\n\n    vout.PosH = mul(float4(vin.PosL, 1.0f), gWorldViewProj);\n\n    vout.Color = vin.Color;\n\n    return vout;\n}\n\nfloat4 PS(VertexOut pin) : SV_Target\n{\n\n    return pin.Color;\n}\n\ntechnique11 ColorTech\n{\n    pass P0\n    {\n        SetVertexShader( CompileShader( vs_5_0, VS() ) );\n        SetGeometryShader( NULL );\n        SetPixelShader( CompileShader(  ps_5_0, PS() ) );\n    }\n}\n</code></pre>\n\n<p>What I'm doing wrong?\nBuildFX():</p>\n\n<pre><code>DWORD shaderFlags = 0;\n#if defined( DEBUG ) || defined( _DEBUG )\n    shaderFlags |= D3D10_SHADER_DEBUG;\n    shaderFlags |= D3D10_SHADER_SKIP_OPTIMIZATION;\n#endif\n\n    ID3D10Blob* compiledShader = 0;\n    ID3D10Blob* compilationMsgs = 0;\n    HRESULT hr = D3DX11CompileFromFile(L\"FX/color.fx\", 0, 0, 0, \"fx_5_0\", shaderFlags, \n        0, 0, &amp;compiledShader, &amp;compilationMsgs, 0);\n\n    // compilationMsgs can store errors or warnings.\n    if( compilationMsgs != 0 )\n    {\n        MessageBoxA(0, (char*)compilationMsgs-&gt;GetBufferPointer(), 0, 0);\n        ReleaseCOM(compilationMsgs);\n    }\n\n    // Even if there are no compilationMsgs, check to make sure there were no other errors.\n    if(FAILED(hr))\n    {\n        DXTrace(__FILE__, (DWORD)__LINE__, hr, L\"D3DX11CompileFromFile\", true);\n    }\n\n    HR(D3DX11CreateEffectFromMemory(compiledShader-&gt;GetBufferPointer(), compiledShader-&gt;GetBufferSize(), \n        0, md3dDevice, &amp;mFX));\n\n    // Done with compiled shader.\n    ReleaseCOM(compiledShader);\n\n    mTech    = mFX-&gt;GetTechniqueByName(\"ColorTech\");\n    mfxWorldViewProj = mFX-&gt;GetVariableByName(\"gWorldViewProj\")-&gt;AsMatrix();\n</code></pre>\n"}, {"tags": ["c++", "destructor"], "comments": [{"owner": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "edited": false, "score": 1, "creation_date": 1445459413, "post_id": 33268608, "comment_id": 54338374, "body": "Indexing in arrays is 0-based in C++. Use mb[0] to access the first element in mb[]. Your program is reading outside of the mb[] array, which is invalid."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1445460048, "post_id": 33268608, "comment_id": 54338716, "body": "Also, using an array with only one element is <i>extremely</i> unusual."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1445460070, "post_id": 33268608, "comment_id": 54338731, "body": "Your destructor should probably be virtual."}], "answers": [{"comments": [{"owner": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "edited": false, "score": 0, "creation_date": 1445459721, "post_id": 33268648, "comment_id": 54338544, "body": "Incorrect. <code>delete[]</code> is for deallocating memory allocated with <code>new []</code>. The OP&#39;s program nowhere does <code>new []</code>."}, {"owner": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "edited": false, "score": 0, "creation_date": 1445460209, "post_id": 33268648, "comment_id": 54338810, "body": "Correct now. But in the end you just copied my answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5473178"}, "reply_to_user": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "edited": false, "score": 0, "creation_date": 1445460374, "post_id": 33268648, "comment_id": 54338883, "body": "well you can say that, but i got to learn something new. thanks anyway :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5473178"}, "is_accepted": false, "score": 1, "last_activity_date": 1445460024, "last_edit_date": 1445460024, "creation_date": 1445459418, "answer_id": 33268648, "question_id": 33268608, "link": "https://stackoverflow.com/questions/33268608/destructor-calls-stopped-working-error/33268648#33268648", "title": "Destructor calls &quot;Stopped working&quot; error", "body": "<p>Deallocation should be done by:</p>\n\n<pre><code>delete mb[0]\n</code></pre>\n\n<p>You should use mb[0] to access first element of array</p>\n"}, {"tags": [], "owner": {"reputation": 2801, "user_id": 2877058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fMUyx.jpg?s=128&g=1", "display_name": "WhiteViking", "link": "https://stackoverflow.com/users/2877058/whiteviking"}, "is_accepted": false, "score": 1, "last_activity_date": 1445459980, "last_edit_date": 1445459980, "creation_date": 1445459627, "answer_id": 33268704, "question_id": 33268608, "link": "https://stackoverflow.com/questions/33268608/destructor-calls-stopped-working-error/33268704#33268704", "title": "Destructor calls &quot;Stopped working&quot; error", "body": "<p>You need to store the object in <code>mb[0]</code> (not <code>mb[1]</code>) because array indexing is 0-based in C and C++ and you only reserved space for one element in <code>mb</code>. Reading from or writing to mb[1] yields undefined behaviour in your program, typically resulting in a crash.</p>\n\n<p>Deallocating your object must be done with <code>delete mb[0]</code>. <strong>Not</strong> with <code>delete[]</code> which is for deallocating memory allocated with <code>new []</code>.</p>\n"}], "owner": {"reputation": 161, "user_id": 4299127, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/100000123096513/picture?type=large", "display_name": "Brock", "link": "https://stackoverflow.com/users/4299127/brock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1445460024, "creation_date": 1445459253, "question_id": 33268608, "link": "https://stackoverflow.com/questions/33268608/destructor-calls-stopped-working-error", "title": "Destructor calls &quot;Stopped working&quot; error", "body": "<pre><code>MainClass *mb[1];\nClass1 *m1;     \ncout &lt;&lt; \"Constructor type (1 - no parameters || 2 - with parameters): \";\n    int choose;\n    cin &gt;&gt; choose;\n    if (choose == 1) {\n        mb[1] = new Class1;\n    }\n    else if (choose == 2) {\n        mb[1] = new Class1(\"Red\", 1);\n    }\n    m1 = dynamic_cast&lt;Class*&gt;(mb[1]);\n    m1-&gt;printEverything(); \n    getchar();\n</code></pre>\n\n<p>and after that Windows 10 throws me \"Program1.exe stopped working\".\nTrying to add delete     mb[1]    , but no luck. </p>\n\n<p>Destructor:</p>\n\n<pre><code>~Class() {\n    cout &lt;&lt; endl;\n    getchar();\n}\n</code></pre>\n\n<p>How can I delete derived class object?</p>\n"}, {"tags": ["c++", "oop", "virtual-functions"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445466645, "post_id": 33268558, "comment_id": 54341881, "body": "out of interest, what is the actual polymorphic behaviour you&#39;re looking for? i.e. what exact methods will client code be calling against the base class? I ask this because I think you risk solving the wrong problem. Animals may <i>look at first glance</i> like an inheritance problem, but it&#39;s more likely to be a traits problem in reality."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445468239, "post_id": 33268558, "comment_id": 54342391, "body": "You&#39;re right, I am not looking for polymorphic behavior. What I really want is for anybody who extend <code>Animal</code> to define the right <code>setFoodPreference</code> function. Of course I could argue that I want to call <code>setFoodPreference</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 1, "creation_date": 1445461504, "post_id": 33268727, "comment_id": 54339510, "body": "I think I should keep _preferredFood private, and make setFoodPreference protected virtual. Because I need to enforce that the derived classes allow for the preference to be set."}, {"owner": {"reputation": 60311, "user_id": 1620671, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/24231f169c1ed55850339ec5d62047c5?s=128&d=identicon&r=PG", "display_name": "Philipp", "link": "https://stackoverflow.com/users/1620671/philipp"}, "reply_to_user": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1445461998, "post_id": 33268727, "comment_id": 54339761, "body": "@user2308211 why <code>virtual</code>? When any subclasses call that method only through their own methods, you can put any code specific to the subclass there."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1445462563, "post_id": 33268727, "comment_id": 54340051, "body": "I should&#39;ve said, purely virtual. To make sure they implement these methods. Although it&#39;s not a complete solution, somebody could derive from Animal, and implement only setFoodPreference."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1445464231, "post_id": 33268727, "comment_id": 54340894, "body": "marking as unanswered, to invite further responses."}], "tags": [], "owner": {"reputation": 60311, "user_id": 1620671, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/24231f169c1ed55850339ec5d62047c5?s=128&d=identicon&r=PG", "display_name": "Philipp", "link": "https://stackoverflow.com/users/1620671/philipp"}, "is_accepted": true, "score": 1, "last_activity_date": 1445462886, "last_edit_date": 1445462886, "creation_date": 1445459692, "answer_id": 33268727, "question_id": 33268558, "link": "https://stackoverflow.com/questions/33268558/liskov-substitution-principle-with-multiple-inheritance-heirachies/33268727#33268727", "title": "Liskov Substitution Principle with multiple inheritance heirachies", "body": "<p>When <code>Carnivore::setFoodPreference</code> only accepts <code>Meat</code> and <code>Herbivore::setFoodPreference</code> only accepts <code>Fruit</code>, then they do not comply to the same contract. That means they are not actually the same method. When you call this method, you have to know if you are dealing with a carnivore or a herbivore to avoid passing the wrong type. When you forget to check this, you risk creating a bug which manifests in form of a casting error at runtime. </p>\n\n<p>The solution is to separate these two methods.</p>\n\n<p>I would recommend you to remove <code>setFoodPreference</code> from the public interface and instead add methods <code>Carnivore::setMeatPreference(Meat *meat)</code> and <code>Herbivore::setFruitPreference(Fruit *fruit)</code> directly to the subclasses. That way any code which sets the food preference must know what kind of Animal and what kind of Food it is dealing with, so you can no longer write code which tries to set an incompatible food type.</p>\n\n<p>Internally, both methods may set a <code>protected Food *_preferredFood</code> from the common base class. Or even better, call a <code>protected void setPreferredFood(Food *food)</code> which is a setter for a <code>private Food* _preferredFood</code>. That variable should definitely not be public to ensure proper encapsulation.</p>\n"}], "owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 33268727, "answer_count": 1, "score": 0, "last_activity_date": 1445464211, "creation_date": 1445459065, "last_edit_date": 1445464211, "question_id": 33268558, "link": "https://stackoverflow.com/questions/33268558/liskov-substitution-principle-with-multiple-inheritance-heirachies", "title": "Liskov Substitution Principle with multiple inheritance heirachies", "body": "<p>I am trying to come up with an object oriented design, and having difficulty satisfying the Liskov Substitution Principle. Here is an illustrative example:</p>\n\n<pre><code>class Food\n{\n    public:\n    virtual void printName() {\n    //......\n    }\n};\nclass Fruit : public Food\n{\n};\nclass Meat : public Food\n{\n};\nclass Animal\n{\n    public:\n    Food *_preferredFood;\n    virtual void setFoodPreference(Food *food)=0;\n\n};\nclass Carnivore: public Animal\n{\n    public:\n    void setFoodPreference(Food *food) {\n        this-&gt;_preferredFood = dynamic_cast&lt;Meat *&gt;(food);\n    }\n};\nclass Herbivore: public Animal\n{\n    public:\n    void setFoodPreference(Food *food) {\n        this-&gt;_preferredFood = dynamic_cast&lt;Fruit *&gt;(food);\n    }\n};\n</code></pre>\n\n<p>How can I enforce the following:</p>\n\n<ol>\n<li>Each subclass of Animal should allow setting a food preference, without breaking LSP </li>\n<li>The food preference for each derived class of animal is a subclass of Food</li>\n</ol>\n\n<p>Fore example, if somebody extends <code>Animal</code> to create <code>MarineMammal</code>, the food preference might be <code>Fish</code> (which they will create by extending <code>Food</code>).</p>\n"}, {"tags": ["c++", "c++11", "vector", "header-files"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1445460014, "post_id": 33268529, "comment_id": 54338687, "body": "Forward declarations can only be used with pointers, not when using the object type itself."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1445460959, "post_id": 33268529, "comment_id": 54339199, "body": "@Barmar untrue, class declarations can be used for a variety of purposes"}, {"owner": {"reputation": 3326, "user_id": 991000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-_7QtSrCkQE0/AAAAAAAAAAI/AAAAAAAAAEo/OgQ89VSFZMM/photo.jpg?sz=128", "display_name": "CJCombrink", "link": "https://stackoverflow.com/users/991000/cjcombrink"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1445494145, "post_id": 33268529, "comment_id": 54349376, "body": "@M.M According to my knowledge Barmar is correct, you can forward declare the class but when you refer to that class it must be a pointer or reference, not the object by itself: thus &#39;Card*&#39; works but not &#39;Card&#39;"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3326, "user_id": 991000, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-_7QtSrCkQE0/AAAAAAAAAAI/AAAAAAAAAEo/OgQ89VSFZMM/photo.jpg?sz=128", "display_name": "CJCombrink", "link": "https://stackoverflow.com/users/991000/cjcombrink"}, "edited": false, "score": 1, "creation_date": 1445542323, "post_id": 33268529, "comment_id": 54378293, "body": "@TheBadger <a href=\"http://www.boost.org/doc/libs/1_54_0/doc/html/container.html\" rel=\"nofollow noreferrer\">here</a> are some containers that work with incomplete type (could be used in OP&#39;s code instead of <code>std::vector</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 2, "last_activity_date": 1445459204, "creation_date": 1445459204, "answer_id": 33268591, "question_id": 33268529, "link": "https://stackoverflow.com/questions/33268529/vector-unknown-size/33268591#33268591", "title": "Vector unknown size", "body": "<p>The vector doesn't have to know how many cards you want to store, but is has to know the <em>size</em> of a <code>Card</code>. </p>\n\n<p>So don't forward declare, but <code>#include</code> the Card.h.</p>\n"}, {"tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 4, "last_activity_date": 1445501503, "last_edit_date": 1445501503, "creation_date": 1445459273, "answer_id": 33268614, "question_id": 33268529, "link": "https://stackoverflow.com/questions/33268529/vector-unknown-size/33268614#33268614", "title": "Vector unknown size", "body": "<p>The type template argument of <code>std::vector</code> cannot be an incomplete type. It has to be defined (complete) before instantiation of <code>std::vector&lt;Card&gt;</code>. To do that, replace your forward declaration <code>class Card;</code> with <code>#include \"Card.h\"</code> directive.</p>\n\n<p>You can see the further requirements on template arguments <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1445459478, "creation_date": 1445459478, "answer_id": 33268662, "question_id": 33268529, "link": "https://stackoverflow.com/questions/33268529/vector-unknown-size/33268662#33268662", "title": "Vector unknown size", "body": "<p><code>vector&lt;Card&gt;</code> needs to see a complete declaration of <code>Card</code>. There are some certain functions that are needed for instantiation.</p>\n\n<p>You can do something like a </p>\n\n<pre><code>vector&lt;unique_ptr&lt;Card&gt;&gt; userCards;\n</code></pre>\n\n<p>though, which behaves as any pointer (reference) declaration, and accepts the forward declaration.</p>\n"}, {"tags": [], "owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "is_accepted": false, "score": 3, "last_activity_date": 1445574231, "last_edit_date": 1445574231, "creation_date": 1445460568, "answer_id": 33268972, "question_id": 33268529, "link": "https://stackoverflow.com/questions/33268529/vector-unknown-size/33268972#33268972", "title": "Vector unknown size", "body": "<p>I am assuming you included the <strong>Card.h</strong> header in the <strong>Player.h</strong> file using the <code>#include \"Card.h\"</code> directive</p>\n\n<p>but, if you did not then be informed that <code>std::vector&lt;T&gt;</code> requires its parameter to be a complete type and you cannot pass a forward declared type as its template argument.</p>\n\n<p>Here is a another question/answer that clarifies your problem: <a href=\"https://stackoverflow.com/questions/553682/when-can-i-use-a-forward-declaration\">When can I use a forward declaration?</a></p>\n"}], "owner": {"reputation": 124, "user_id": 3670950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/395a5f0e47dc8d805846f15263442eb1?s=128&d=identicon&r=PG&f=1", "display_name": "t3rrh42d2", "link": "https://stackoverflow.com/users/3670950/t3rrh42d2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6886, "favorite_count": 0, "accepted_answer_id": 33268614, "answer_count": 4, "score": 0, "last_activity_date": 1445574231, "creation_date": 1445458946, "last_edit_date": 1445501820, "question_id": 33268529, "link": "https://stackoverflow.com/questions/33268529/vector-unknown-size", "title": "Vector unknown size", "body": "<p>I have a class Player which contains an instance variable: \\</p>\n\n<pre><code>vector&lt;Card&gt; userCards;\n</code></pre>\n\n<p>In order to avoid any compilation errors I forward declared the class <code>Card</code>. However now when I try to Build Solution I get an error saying </p>\n\n<blockquote>\n  <p>Card *: Unknown size. </p>\n</blockquote>\n\n<p>Basically I am trying to create a <code>Player</code> who contains a non-fixed number of cards, so I tried using a vector and now I cannot get it to work.</p>\n\n<p>Player.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing std::string;\nusing std::vector;\n\n#ifndef PLAYER_H_\n#define PLAYER_H_\n\nclass Card;\nclass Player {\nprivate:\n    vector&lt;Card&gt; userCards;\n};\n#endif\n</code></pre>\n\n<p>Card.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing std::string;\n\n#ifndef CARD_H_\n#define CARD_H_\n\nclass Card {\nprivate:\n    string name;\n    string type;\n\npublic:\n    Card(const string&amp; name, const string&amp; type);   \n};\n#endif\n</code></pre>\n\n<p>I have a bunch of different functions that are not related, so I did not include them.</p>\n"}, {"tags": ["c++", "arrays", "average", "variance", "standard-deviation"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1445459720, "post_id": 33268513, "comment_id": 54338543, "body": "In <code>(Array[n] - mean)</code> isn&#39;t <code>n</code> one more than the number of elements you have read? Also, <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\"><code>while (!myfile.eof())</code> is almost always wrong</a>"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1445460435, "post_id": 33268513, "comment_id": 54338909, "body": "You should use double instead of float"}], "answers": [{"comments": [{"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1445468158, "post_id": 33268864, "comment_id": 54342366, "body": "I think you have a typo on the last line."}, {"owner": {"reputation": 1119, "user_id": 5446933, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Y0izJ.gif?s=128&g=1", "display_name": "horseshoe", "link": "https://stackoverflow.com/users/5446933/horseshoe"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 1, "creation_date": 1445469304, "post_id": 33268864, "comment_id": 54342720, "body": "@ Jason: yes, true, but Ahmeds solutions now solves it very well"}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 1, "creation_date": 1445469626, "post_id": 33268864, "comment_id": 54342815, "body": "It&#39;s still good to fix your typos for anyone else that reads the code."}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1445573680, "post_id": 33268864, "comment_id": 54389047, "body": "@horseshoe the loop should start with <code>n=0;</code> to cater for the first index of the array. &quot;It&#39;s still good to fix your typos for anyone else that reads the code. \u2013 Jason&quot;"}], "tags": [], "owner": {"reputation": 1119, "user_id": 5446933, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Y0izJ.gif?s=128&g=1", "display_name": "horseshoe", "link": "https://stackoverflow.com/users/5446933/horseshoe"}, "is_accepted": false, "score": 1, "last_activity_date": 1445582910, "last_edit_date": 1445582910, "creation_date": 1445460162, "answer_id": 33268864, "question_id": 33268513, "link": "https://stackoverflow.com/questions/33268513/calculating-standard-deviation-variance-in-c/33268864#33268864", "title": "Calculating Standard Deviation &amp; Variance in C++", "body": "<p>Your variance calculation is outside the loop and thus it is only based on the <code>n== 100 value.</code> You need an additional loop. </p>\n\n<p>You need:</p>\n\n<pre><code>var = 0;\nn=0;\nwhile (n&lt;numPoints){\n   var = var + ((Array[n] - mean) * (Array[n] - mean));\n   n++;\n}\nvar /= numPoints;\nsd = sqrt(var);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "edited": false, "score": 1, "creation_date": 1445513520, "post_id": 33270461, "comment_id": 54360315, "body": "thanks for the &#39;Note&#39; it was useful. compare your code to horseshoe why is the for statement better than the while? or is there no real difference?"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "reply_to_user": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "edited": false, "score": 2, "creation_date": 1445572594, "post_id": 33270461, "comment_id": 54388815, "body": "@jack technically there is no difference between the <b>for</b> and the <b>while</b> loops (except syntax), but usually when you need: (1) initialization of a variable before starting the loop, (2) an increment in the variable at the end of the loop and then (3) want to check for a condition to reiterate; then <b>for</b> makes the code much more readable and also ensures that you don&#39;t forget any of the three."}, {"owner": {"reputation": 598, "user_id": 1734357, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gaD24.jpg?s=128&g=1", "display_name": "WurmD", "link": "https://stackoverflow.com/users/1734357/wurmd"}, "edited": false, "score": 0, "creation_date": 1559906144, "post_id": 33270461, "comment_id": 99575220, "body": "Am I missing something?  var /= (numPoints-1) , not / numPoints"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "reply_to_user": {"reputation": 598, "user_id": 1734357, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gaD24.jpg?s=128&g=1", "display_name": "WurmD", "link": "https://stackoverflow.com/users/1734357/wurmd"}, "edited": false, "score": 0, "creation_date": 1560866007, "post_id": 33270461, "comment_id": 99871231, "body": "@WurmD Why do you think it should be divided by <code>numPoints - 1</code> and not by <code>numPoints</code>?"}, {"owner": {"reputation": 598, "user_id": 1734357, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gaD24.jpg?s=128&g=1", "display_name": "WurmD", "link": "https://stackoverflow.com/users/1734357/wurmd"}, "edited": false, "score": 0, "creation_date": 1560979556, "post_id": 33270461, "comment_id": 99919324, "body": "Look at the other responses, half of them are size-1 @AhmedAkhtar"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "reply_to_user": {"reputation": 598, "user_id": 1734357, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gaD24.jpg?s=128&g=1", "display_name": "WurmD", "link": "https://stackoverflow.com/users/1734357/wurmd"}, "edited": false, "score": 0, "creation_date": 1561376100, "post_id": 33270461, "comment_id": 100030126, "body": "@WurmD The <code>N</code> in the formula of variance means the number of observations, which is <code>numPoints</code>  in our case, not <code>numPoints-1</code>"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1569558537, "post_id": 33270461, "comment_id": 102643136, "body": "Usually you divide by the number of points subtracted by 1 to provide an unbiased estimate of the variance. <a href=\"https://stats.stackexchange.com/q/100041/86678\">stats.stackexchange.com/q/100041/86678</a>"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1569647596, "post_id": 33270461, "comment_id": 102672758, "body": "@rayryeng Thanks for the explanation to why <code>numPoints-1</code> could be used. However, I used just <code>numPoints</code> because it was in line with the formula posted by the OP. But thanks again for clarifying."}], "tags": [], "owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "is_accepted": true, "score": 14, "last_activity_date": 1542090064, "last_edit_date": 1542090064, "creation_date": 1445467139, "answer_id": 33270461, "question_id": 33268513, "link": "https://stackoverflow.com/questions/33268513/calculating-standard-deviation-variance-in-c/33270461#33270461", "title": "Calculating Standard Deviation &amp; Variance in C++", "body": "<p>As the other answer by horseshoe correctly suggests, you will have to use a loop to calculate variance otherwise the statement</p>\n\n<blockquote>\n  <p>var = ((Array[n] - mean) * (Array[n] - mean)) / numPoints;</p>\n</blockquote>\n\n<p>will just consider a single element from the array.</p>\n\n<p>Just improved horseshoe's suggested code:</p>\n\n<pre><code>var = 0;\nfor( n = 0; n &lt; numPoints; n++ )\n{\n  var += (Array[n] - mean) * (Array[n] - mean);\n}\nvar /= numPoints;\nsd = sqrt(var);\n</code></pre>\n\n<p>Your sum works fine even without using loop because you are using <strong>accumulate</strong> function which already has a loop inside it, but which is not evident in the code, take a look at the equivalent behavior of <a href=\"http://www.cplusplus.com/reference/numeric/accumulate/\" rel=\"noreferrer\">accumulate</a> for a clear understanding of what it is doing.</p>\n\n<p><strong>Note:</strong> <code>X ?= Y</code> is short for <code>X = X ? Y</code> where <code>?</code> can be any operator.\nAlso you can use <code>pow(Array[n] - mean, 2)</code> to take the square instead of multiplying it by itself making it more tidy.</p>\n"}, {"comments": [{"owner": {"reputation": 8121, "user_id": 119725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94d7f9208e421fe3fcdb2953ede58280?s=128&d=identicon&r=PG", "display_name": "Tilman Vogel", "link": "https://stackoverflow.com/users/119725/tilman-vogel"}, "edited": false, "score": 0, "creation_date": 1592306435, "post_id": 42615051, "comment_id": 110372167, "body": "Do you have a reference for that approach? Is it this one? <a href=\"https://en.wikipedia.org/wiki/Algorithms_for_calculating_variance#Welford&#39;s_online_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}], "tags": [], "owner": {"reputation": 617, "user_id": 6745687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6ccb78f7dbff4396cbb7d6ac3465131?s=128&d=identicon&r=PG", "display_name": "D.Zadravec", "link": "https://stackoverflow.com/users/6745687/d-zadravec"}, "is_accepted": false, "score": 1, "last_activity_date": 1488754486, "creation_date": 1488754486, "answer_id": 42615051, "question_id": 33268513, "link": "https://stackoverflow.com/questions/33268513/calculating-standard-deviation-variance-in-c/42615051#42615051", "title": "Calculating Standard Deviation &amp; Variance in C++", "body": "<p>Two simple methods to calculate Standard Deviation &amp; Variance in C++.</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;vector&gt;\n\ndouble StandardDeviation(std::vector&lt;double&gt;);\ndouble Variance(std::vector&lt;double&gt;);\n\nint main()\n{\n     std::vector&lt;double&gt; samples;\n     samples.push_back(2.0);\n     samples.push_back(3.0);\n     samples.push_back(4.0);\n     samples.push_back(5.0);\n     samples.push_back(6.0);\n     samples.push_back(7.0);\n\n     double std = StandardDeviation(samples);\n     return 0;\n}\n\ndouble StandardDeviation(std::vector&lt;double&gt; samples)\n{\n     return sqrt(Variance(samples));\n}\n\ndouble Variance(std::vector&lt;double&gt; samples)\n{\n     int size = samples.size();\n\n     double variance = 0;\n     double t = samples[0];\n     for (int i = 1; i &lt; size; i++)\n     {\n          t += samples[i];\n          double diff = ((i + 1) * samples[i]) - t;\n          variance += (diff * diff) / ((i + 1.0) *i);\n     }\n\n     return variance / (size - 1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1562676990, "last_edit_date": 1562676990, "creation_date": 1503574617, "answer_id": 45860603, "question_id": 33268513, "link": "https://stackoverflow.com/questions/33268513/calculating-standard-deviation-variance-in-c/45860603#45860603", "title": "Calculating Standard Deviation &amp; Variance in C++", "body": "<p>Rather than writing out more loops, you can create a <a href=\"http://en.cppreference.com/w/cpp/concept/FunctionObject\" rel=\"nofollow noreferrer\">function object</a> to pass to <code>std::accumulate</code> to calculate the mean.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct normalize {\n    T operator()(T initial, T value) {\n        return initial + pow(value - mean, 2);\n    }\n    T mean;\n}\n</code></pre>\n\n<p>While we are at it, we can use <a href=\"http://en.cppreference.com/w/cpp/iterator/istream_iterator\" rel=\"nofollow noreferrer\">std::istream_iterator</a> to do the file loading, and <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> because we don't know how many values there are at compile time. This gives us:</p>\n\n<pre><code>int main()\n{\n    std::vector&lt;int&gt; values; // initial capacity, no contents yet\n\n    ifstream myfile(\u201cnumbers.txt\");\n    if (myfile)\n    {\n        values.assign(std::istream_iterator&lt;int&gt;(myfile), {});\n    }\n    else { std::cout &lt;&lt; \"Error loading file\" &lt;&lt; std::endl; }\n\n    float sum = std::accumulate(values.begin(), values.end(), 0, plus&lt;int&gt;()); // plus is the default for accumulate, can be omitted\n    std::cout &lt;&lt; \"The sum of all integers: \" &lt;&lt; sum &lt;&lt; std::endl;\n    float mean = sum / values.size();\n    std::cout &lt;&lt; \"The mean of all integers: \" &lt;&lt; mean &lt;&lt; std::endl;\n    float var = std::accumulate(values.begin(), values.end(), 0, normalize&lt;float&gt;{ mean }) / values.size();\n    float sd = sqrt(var);\n    std::cout &lt;&lt; \"The standard deviation is: \" &lt;&lt; sd &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "is_accepted": false, "score": 8, "last_activity_date": 1601192467, "last_edit_date": 1601192467, "creation_date": 1517561069, "answer_id": 48578852, "question_id": 33268513, "link": "https://stackoverflow.com/questions/33268513/calculating-standard-deviation-variance-in-c/48578852#48578852", "title": "Calculating Standard Deviation &amp; Variance in C++", "body": "<p>Here's another approach using <code>std::accumulate</code> but without using <code>pow</code>.  In addition, we can use an anonymous function to define how to calculate the variance after we calculate the mean.  Note that this computes the unbiased sample variance.</p>\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n\ntemplate&lt;typename T&gt;\nT variance(const std::vector&lt;T&gt; &amp;vec) {\n    const size_t sz = vec.size();\n    if (sz == 1) {\n        return 0.0;\n    }\n\n    // Calculate the mean\n    const T mean = std::accumulate(vec.begin(), vec.end(), 0.0) / sz;\n\n    // Now calculate the variance\n    auto variance_func = [&amp;mean, &amp;sz](T accumulator, const T&amp; val) {\n        return accumulator + ((val - mean)*(val - mean) / (sz - 1));\n    };\n\n    return std::accumulate(vec.begin(), vec.end(), 0.0, variance_func);\n}\n</code></pre>\n<p>A sample of how to use this function:</p>\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    const std::vector&lt;double&gt; vec = {1.0, 5.0, 6.0, 3.0, 4.5};\n    std::cout &lt;&lt; variance(vec) &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2691, "user_id": 3115822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/djEOC.png?s=128&g=1", "display_name": "borchvm", "link": "https://stackoverflow.com/users/3115822/borchvm"}, "edited": false, "score": 0, "creation_date": 1597143212, "post_id": 63355451, "comment_id": 112031345, "body": "While this code may provide a solution to the question, it&#39;s better to add context as to why/how it works. This can help future users learn, and apply that knowledge to their own code. You are also likely to have positive feedback from users in the form of upvotes, when the code is explained."}, {"owner": {"reputation": 1, "user_id": 8001601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899b02dccfffb0c2e540abbeff7f9199?s=128&d=identicon&r=PG&f=1", "display_name": "manh duong", "link": "https://stackoverflow.com/users/8001601/manh-duong"}, "reply_to_user": {"reputation": 2691, "user_id": 3115822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/djEOC.png?s=128&g=1", "display_name": "borchvm", "link": "https://stackoverflow.com/users/3115822/borchvm"}, "edited": false, "score": 0, "creation_date": 1597168350, "post_id": 63355451, "comment_id": 112044057, "body": "Thank you, my code has a problem with performance. I fixed it. I hope it will better than. With the source code, I am still not satisfied with it. When I want compute mean and standard-deviation then the mean function is repeated 2 times."}], "tags": [], "owner": {"reputation": 1, "user_id": 8001601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/899b02dccfffb0c2e540abbeff7f9199?s=128&d=identicon&r=PG&f=1", "display_name": "manh duong", "link": "https://stackoverflow.com/users/8001601/manh-duong"}, "is_accepted": false, "score": 0, "last_activity_date": 1597407683, "last_edit_date": 1597407683, "creation_date": 1597138342, "answer_id": 63355451, "question_id": 33268513, "link": "https://stackoverflow.com/questions/33268513/calculating-standard-deviation-variance-in-c/63355451#63355451", "title": "Calculating Standard Deviation &amp; Variance in C++", "body": "<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;utility&gt;\n#include &lt;array&gt;\n\ntemplate &lt;class InputIterator, class T&gt;\nvoid Mean(InputIterator first, InputIterator last, T&amp; mean) {\n  int n = std::distance(first, last);\n  mean = std::accumulate(first, last, static_cast&lt;T&gt;(0)) / n;\n}\n\ntemplate &lt;class InputIterator, class T&gt;\nvoid StandardDeviation(InputIterator first, InputIterator last, T&amp; mean, T&amp; stardard_deviation) {\n  int n = std::distance(first, last);\n  mean = std::accumulate(first, last, static_cast&lt;T&gt;(0)) / n;\n  T s = std::accumulate(first, last, static_cast&lt;T&gt;(0), [mean](double x, double y) {\n    T denta = y - mean;\n    return x + denta*denta;\n  });\n  stardard_deviation = s/n;\n}\n\nint main () {\n  std::vector&lt;int&gt; v = {10, 20, 30};\n\n  double mean = 0;\n  Mean(v.begin(), v.end(), mean);\n  std::cout &lt;&lt; mean &lt;&lt; std::endl;\n\n  double stardard_deviation = 0;\n  StandardDeviation(v.begin(), v.end(), mean, stardard_deviation);\n  std::cout &lt;&lt; mean &lt;&lt; &quot; &quot; &lt;&lt; stardard_deviation &lt;&lt; std::endl;\n\n  double a[3] = {10.5, 20.5, 30.5};\n  Mean(a, a+3, mean);\n  std::cout &lt;&lt; mean &lt;&lt; std::endl;\n  StandardDeviation(a, a+3, mean, stardard_deviation);\n  std::cout &lt;&lt; mean &lt;&lt; &quot; &quot; &lt;&lt; stardard_deviation &lt;&lt; std::endl;\n\n  std::array&lt;int, 3&gt; m = {1, 2, 3};\n  Mean(m.begin(), m.end(), mean);\n  std::cout &lt;&lt; mean &lt;&lt; std::endl;\n  StandardDeviation(m.begin(), m.end(), mean, stardard_deviation);\n  std::cout &lt;&lt; mean &lt;&lt; &quot; &quot; &lt;&lt; stardard_deviation &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 5469157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8af076c1ff00937c0ef73af1eb667?s=128&d=identicon&r=PG&f=1", "display_name": "Jack ", "link": "https://stackoverflow.com/users/5469157/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44442, "favorite_count": 1, "accepted_answer_id": 33270461, "answer_count": 6, "score": 10, "last_activity_date": 1602693778, "creation_date": 1445458859, "last_edit_date": 1602693778, "question_id": 33268513, "link": "https://stackoverflow.com/questions/33268513/calculating-standard-deviation-variance-in-c", "title": "Calculating Standard Deviation &amp; Variance in C++", "body": "<p>So, I've posted a few times and previously my problems were pretty vague. I started C++ this week and have been doing a little project.</p>\n<p>I'm trying to calculate standard deviation &amp; variance. My code loads a file of 100 integers and puts them into an array, counts them, calculates the mean, sum, variance and SD. But I'm having a little trouble with the variance.</p>\n<p>I keep getting a huge number - I have a feeling it's to do with its calculation.</p>\n<p>My mean and sum are ok.</p>\n<p>NB:</p>\n<p><a href=\"https://i.stack.imgur.com/hfNC4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hfNC4.png\" alt=\"sd &amp; mean calcs\" /></a></p>\n<pre><code> using namespace std;\n    int main()\n\n{\n\nint n = 0;\nint Array[100];\nfloat mean;\nfloat var;\nfloat sd;\nstring line;\nfloat numPoints;\n\nifstream myfile(&quot;numbers.txt&quot;);\n\nif (myfile.is_open())\n\n{\n    while (!myfile.eof())\n      \n    {\n        getline(myfile, line);\n            \n        stringstream convert(line);\n        \n        if (!(convert &gt;&gt; Array[n]))\n        \n        {\n            Array[n] = 0;\n        }\n        cout &lt;&lt; Array[n] &lt;&lt; endl;\n        \n        n++;\n        \n    }\n    \n    myfile.close();\n\n    numPoints = n;\n\n}\nelse cout&lt;&lt; &quot;Error loading file&quot; &lt;&lt;endl;\n\nint sum = accumulate(begin(Array), end(Array), 0, plus&lt;int&gt;());\n\ncout &lt;&lt; &quot;The sum of all integers: &quot; &lt;&lt; sum &lt;&lt; endl;\n\nmean = sum/numPoints;\n\ncout &lt;&lt; &quot;The mean of all integers: &quot; &lt;&lt; mean &lt;&lt;endl;\n\nvar = ((Array[n] - mean) * (Array[n] - mean)) / numPoints;\n\nsd = sqrt(var);\n\ncout &lt;&lt; &quot;The standard deviation is: &quot; &lt;&lt; sd &lt;&lt;endl;\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "iterator", "dereference"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5473171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef740a1198f7e367dcaece68b42d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "presgiovanni", "link": "https://stackoverflow.com/users/5473171/presgiovanni"}, "edited": false, "score": 0, "creation_date": 1445459019, "post_id": 33268466, "comment_id": 54338142, "body": "I&#39;ve already tried to do exactly what you say, but it still doesn&#39;t work!"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 61, "user_id": 5473171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef740a1198f7e367dcaece68b42d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "presgiovanni", "link": "https://stackoverflow.com/users/5473171/presgiovanni"}, "edited": false, "score": 0, "creation_date": 1445459060, "post_id": 33268466, "comment_id": 54338166, "body": "@GiovanniPrestigiacomo see my edit and R Sahu&#39;s answer."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 61, "user_id": 5473171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef740a1198f7e367dcaece68b42d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "presgiovanni", "link": "https://stackoverflow.com/users/5473171/presgiovanni"}, "edited": false, "score": 0, "creation_date": 1445459410, "post_id": 33268466, "comment_id": 54338370, "body": "@GiovanniPrestigiacomo added some more info"}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "reply_to_user": {"reputation": 61, "user_id": 5473171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef740a1198f7e367dcaece68b42d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "presgiovanni", "link": "https://stackoverflow.com/users/5473171/presgiovanni"}, "edited": false, "score": 0, "creation_date": 1445459933, "post_id": 33268466, "comment_id": 54338646, "body": "@GiovanniPrestigiacomo Feel free to accept the answer ;)"}], "tags": [], "owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "is_accepted": false, "score": 1, "last_activity_date": 1445459920, "last_edit_date": 1445459920, "creation_date": 1445458703, "answer_id": 33268466, "question_id": 33268424, "link": "https://stackoverflow.com/questions/33268424/c-vector-iterator-not-dereferencable-in-runtime/33268466#33268466", "title": "C++ &quot;vector iterator not dereferencable&quot; in runtime", "body": "<p><code>vector&lt;int&gt;</code> is not a null-terminated c-style string. So to check whether an iterator reached the end, you need to compare it with the end iterator. So instead of <code>(*i1) &amp;&amp; (*i2)</code> you should write <code>(i1 != v1.end()) &amp;&amp; (i2 != v2.end())</code> in both cases. Same goes for <code>!(*i1)</code>. You should change it to <code>i1 == v1.end()</code>.</p>\n\n<p>@RSahu describes the first problem you hit. You will hit the problem that I described once you fix the first one.</p>\n\n<p>To fix the problem he described, you should clear the bad bits and ignore whatever is left in <code>cin</code>'s buffer. Add the following lines before your second <code>while</code> loop:</p>\n\n<pre><code>cin.clear();\ncin.ignore();\n</code></pre>\n\n<p><a href=\"http://cpp.sh/8xqqg\" rel=\"nofollow\">LIVE</a></p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1445459177, "last_edit_date": 1445459177, "creation_date": 1445458746, "answer_id": 33268477, "question_id": 33268424, "link": "https://stackoverflow.com/questions/33268424/c-vector-iterator-not-dereferencable-in-runtime/33268477#33268477", "title": "C++ &quot;vector iterator not dereferencable&quot; in runtime", "body": "<p>Once you get the first eof on <code>cin</code>, it stays there. The second while loop effectively becomes a noop, since <code>cin</code> thinks it's done. From there, we run through:</p>\n\n<pre><code>vector&lt;int&gt;::const_iterator i1 = v1.begin();\nvector&lt;int&gt;::const_iterator i2 = v2.begin();\nwhile ((*i1) &amp;&amp; (*i2) &amp;&amp; ((*i1) == (*i2))){\n                 ^^^\n                 UB!\n</code></pre>\n\n<p>And you're dereferencing <code>i2</code> without checking <code>v2</code>'s size. </p>\n\n<p>First, you have to clear <code>std::cin</code>:</p>\n\n<pre><code>std::cin.clear();\n</code></pre>\n\n<p>And then, the right way to check if you're done with a vector is to compare the iterator to <code>end()</code> (as opposed to simply dereferencing):</p>\n\n<pre><code>while (i1 &lt; v1.end() &amp;&amp; i2 &lt; v2.end() &amp;&amp; *i1 == *i2) {\n    ++i1;\n    ++i2;\n}\n</code></pre>\n\n<p>Though if you have access to a C++14 compiler, you could simply use <a href=\"http://en.cppreference.com/w/cpp/algorithm/mismatch\" rel=\"nofollow\"><code>std::mismatch</code></a>:</p>\n\n<pre><code>auto res = std::mismatch(v1.begin(), v1.end(), v2.begin(), v2.end());\nif (res.first &lt; v1.end()) {\n    if (res.second &lt; v2.end()) {\n        std::cout &lt;&lt; \"Not compatible!\" &lt;&lt; std::endl;\n    }\n    else {\n        std::cout &lt;&lt; \"The 2nd vector is a prefix for the 1st.\" &lt;&lt; std::endl;\n    }\n}\nelse {\n    std::cout &lt;&lt; \"The 1st vector is a prefix for the 2nd.\" &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1445458769, "creation_date": 1445458769, "answer_id": 33268484, "question_id": 33268424, "link": "https://stackoverflow.com/questions/33268424/c-vector-iterator-not-dereferencable-in-runtime/33268484#33268484", "title": "C++ &quot;vector iterator not dereferencable&quot; in runtime", "body": "<p>The following block:</p>\n\n<pre><code>    while (cin &gt;&gt; i){\n        v1.push_back(i);\n    }\n</code></pre>\n\n<p>makes sure that <code>cin &gt;&gt; j</code> fails. Hence, nothing gets added to <code>v2</code> in the block:</p>\n\n<pre><code>    while (cin &gt;&gt; j){\n        v2.push_back(j);\n    }\n</code></pre>\n\n<p>Since <code>v2</code> is empty, using <code>*i2</code> leads to undefined behavior.</p>\n"}], "owner": {"reputation": 61, "user_id": 5473171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef740a1198f7e367dcaece68b42d3a7?s=128&d=identicon&r=PG&f=1", "display_name": "presgiovanni", "link": "https://stackoverflow.com/users/5473171/presgiovanni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2076, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1445459920, "creation_date": 1445458544, "question_id": 33268424, "link": "https://stackoverflow.com/questions/33268424/c-vector-iterator-not-dereferencable-in-runtime", "title": "C++ &quot;vector iterator not dereferencable&quot; in runtime", "body": "<p>implementing this simple program I found out, in runtime, an error that occurs when i type the eof at the end of the <strong>FIRST</strong> while. The error says \"<em>vector iterator not dereferencable</em>\". Is that possible? The iterators are declared after the while cycles! I still cannot understand what i misspelled. Can someone help me?\nPs. The program should check if a vector is a prefix for the other. Thank you! Here's the main function:</p>\n\n<pre><code>   int main(){\n        vector&lt;int&gt; v1, v2;\n        cout &lt;&lt; \"1st vector: enter integers\" &lt;&lt; endl;\n        int i, j;\n        while (cin &gt;&gt; i){\n            v1.push_back(i);\n        }\n        cout &lt;&lt; \"2nd vector: enter integers\" &lt;&lt; endl;\n        while (cin &gt;&gt; j){\n            v2.push_back(j);\n        }\n        vector&lt;int&gt;::const_iterator i1 = v1.begin();\n        vector&lt;int&gt;::const_iterator i2 = v2.begin();\n        while ((*i1) &amp;&amp; (*i2) &amp;&amp; ((*i1) == (*i2))){\n            ++i1; ++i2;\n        }\n        if ((*i1) &amp;&amp; (*i2))\n            cout &lt;&lt; \"Vectors not compatible.\" &lt;&lt; endl;\n        else\n        if (!(*i1))\n            cout &lt;&lt; \"The 1st vector is a prefix for the 2nd.\" &lt;&lt; endl;\n        else\n            cout &lt;&lt; \"The 2nd vector is a prefix for the 1st.\" &lt;&lt; endl;\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "objective-c", "macos", "nscursor"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445466852, "post_id": 33268296, "comment_id": 54341962, "body": "i don&#39;t think you should be calling [nsimg release]. ARC is enabled by default isn&#39;t it?"}, {"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445469214, "post_id": 33268296, "comment_id": 54342700, "body": "ARC is off in that project."}], "answers": [{"tags": [], "owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "is_accepted": false, "score": 0, "last_activity_date": 1445469738, "creation_date": 1445469738, "answer_id": 33270906, "question_id": 33268296, "link": "https://stackoverflow.com/questions/33268296/custom-nscursor-is-broken/33270906#33270906", "title": "custom NSCursor is broken", "body": "<p>Answering my own question.</p>\n\n<p>It seem like OS X uses some autorelease pool or the like to store intermediate results. </p>\n\n<p>In my implementation I am creating cursor in one place and use in another - in response of mouse move. It seems that in this case OS X is trying to use memory that was freed. </p>\n\n<p>In order to fix that I was forced to use <code>[pcur push]; [pcur pop];</code> sequence to convince OS X to create cursor immediately:</p>\n\n<pre><code>NSPoint   hotspot = ...;\nCGImageRef cgimg = ...;\n\nif(!cgimg)\n    return nullptr;\nNSImage* nsimg = [[NSImage alloc] initWithCGImage:cgimg size:NSZeroSize];\nif(!nsimg)\n    return nullptr;\n\nNSCursor* pcur = [[NSCursor alloc] initWithImage: nsimg hotSpot: hotspot];\nif(!pcur)\n    return nullptr;\n\n[nsimg release];\n\n[pcur push]; [pcur pop]; // this is mandatory to force cursor structures to be created.\n\n// store pcur for later use ...\n</code></pre>\n"}], "owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1445469738, "creation_date": 1445458054, "last_edit_date": 1445462379, "question_id": 33268296, "link": "https://stackoverflow.com/questions/33268296/custom-nscursor-is-broken", "title": "custom NSCursor is broken", "body": "<p>I have the following code to set cursor from existing CGImage:</p>\n\n<pre><code>    NSPoint   hotspot = ...;\n    CGImageRef cgimg = ...;\n\n    if(!cgimg)\n        return nullptr;\n    NSImage* nsimg = [[NSImage alloc] initWithCGImage:cgimg size:NSZeroSize];\n    if(!nsimg)\n        return nullptr;\n\n    NSCursor* pcur = [[NSCursor alloc] initWithImage: nsimg hotSpot: hotspot];\n    if(!pcur)\n        return nullptr;\n\n    [nsimg release];\n\n    // later in the code I set it as current:\n    [pcur set];\n</code></pre>\n\n<p>Problem is that it renders inconsistently, sometimes it looks OK, sometimes it shows garbage:\n<a href=\"https://i.stack.imgur.com/9pAfX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9pAfX.jpg\" alt=\"broken cursor\"></a> </p>\n\n<p>I am using exactly the same CGImageRef that is rendered OK as normal image (that one below the box).</p>\n\n<p>Any idea what problem could be?</p>\n\n<p>Stock cursors in the same application are rendered OK. That is on OS X \"El Capitan\" if that matters.</p>\n"}, {"tags": ["c++", "mysql++"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445463144, "post_id": 33268161, "comment_id": 54340378, "body": "there&#39;s something missing in your understanding here. one of the main purposes of prepared statements (aside from performance) is to safely transmit variables to the database engine. encoding them directly in the query opens you up to data-driven security vulnerabilities and logic errors - people can inject SQL commands into your query. have another read of the documentation and look at parameter binding."}, {"owner": {"reputation": 11, "user_id": 5473132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f795e20e266abc164be4f73e394e7c4a?s=128&d=identicon&r=PG&f=1", "display_name": "SeanR1700", "link": "https://stackoverflow.com/users/5473132/seanr1700"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445525915, "post_id": 33268161, "comment_id": 54368469, "body": "If I&#39;m understanding correctly, what you&#39;re saying is that since I&#39;ve used prepared statements without parameter binding I haven&#39;t actually gained any security benefits since the prepared statements as I have implemented them without parameter binding are still vulnerable to SQL injection?  If that&#39;s the case I guess my next question is whether or not MySQL++ templated queries gain me any of these security benefits.  If not I supposed I&#39;ll be forced to use the MySQL C API since I&#39;m fairly certain that supports parameter binding and prepared statements."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445531625, "post_id": 33268161, "comment_id": 54372236, "body": "The documentation is your friend there I&#39;m afraid. We use the C api and wrap it in our own c++ wrapper classes to ensure type safety, correct resource management and exception consistency. We found the C++ API to be too unreliable and not documented well-enough so we lost faith in it."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445532675, "post_id": 33268161, "comment_id": 54372856, "body": "ok I had a look at the documentation again. MySQL++ does have the concept of &#39;templated queries&#39; which seem to behave similarly to parameterised queries. However the interface is non-standard (no idea why they did it that way). I have a bad feeling about this library. the non-standardness smells bad and suggests (to me) an inexperienced development team. I wouldn&#39;t be surprised to learn that it has security vulnerabilities. Personally I would avoid it."}, {"owner": {"reputation": 11, "user_id": 5473132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f795e20e266abc164be4f73e394e7c4a?s=128&d=identicon&r=PG&f=1", "display_name": "SeanR1700", "link": "https://stackoverflow.com/users/5473132/seanr1700"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445534477, "post_id": 33268161, "comment_id": 54373849, "body": "I agree with your sentiments completely.  I think I&#39;ll also move to using MySQL C API.  Thanks for your help, I appreciate it."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445534849, "post_id": 33268161, "comment_id": 54374060, "body": "no problem. I would wrap the c handles in RAII containers though - a simple shared_ptr with a custom deleter is enough."}, {"owner": {"reputation": 11, "user_id": 5473132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f795e20e266abc164be4f73e394e7c4a?s=128&d=identicon&r=PG&f=1", "display_name": "SeanR1700", "link": "https://stackoverflow.com/users/5473132/seanr1700"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445622967, "post_id": 33268161, "comment_id": 54416055, "body": "I was planning on having a persistent connection as the program this is part of is an FCGI request handler.  Would it still make sense to use RAII in this situation ?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445623177, "post_id": 33268161, "comment_id": 54416163, "body": "If you&#39;re going to use transactions, it doesn&#39;t make sense to have a persistent connection with mysql unless you have one persistent connection per thread - because transactions are tied to connections with mysql. Creating and destroying connections has very little overhead since under the covers the connections are cached anyway. Trust me - i&#39;ve been through this loop and the answer is to keep it extremely simple until your users are demanding more speed. At that point, buy a second server. it&#39;s more bang for buck."}, {"owner": {"reputation": 11, "user_id": 5473132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f795e20e266abc164be4f73e394e7c4a?s=128&d=identicon&r=PG&f=1", "display_name": "SeanR1700", "link": "https://stackoverflow.com/users/5473132/seanr1700"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445623862, "post_id": 33268161, "comment_id": 54416518, "body": "The idea was to have a single threaded program running on a docker container and spawn more containers if the load required it, gives the benefit of letting the load balancer do its thing and avoids having to multi-thread stuff.  What you said makes alot of sense though.  Thanks again for the help."}], "owner": {"reputation": 11, "user_id": 5473132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f795e20e266abc164be4f73e394e7c4a?s=128&d=identicon&r=PG&f=1", "display_name": "SeanR1700", "link": "https://stackoverflow.com/users/5473132/seanr1700"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 586, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445457569, "creation_date": 1445457569, "question_id": 33268161, "link": "https://stackoverflow.com/questions/33268161/mysql-prepared-statements-with-raw-sql-no-results-returned", "title": "MySQL++ Prepared Statements With Raw SQL, No Results Returned", "body": "<p>I'm having trouble attempting to get prepared statements to work with MySQL++.  I know  that MySQL++ has no native support for prepared statements, so I thought an easy solution would just be to create prepared statements with raw SQL.</p>\n\n<p>For example the following code is working correctly:</p>\n\n<pre><code>string* DatabaseCore::SaveNewInformation(const char * information)\n{\n    if (connection-&gt;connected())\n    {\n        Query query = connection-&gt;query(\"SELECT UUID();\");\n\n        string * guid = nullptr;\n\n        if (StoreQueryResult res = query.store())\n        {\n            Row row = (*res.begin());\n            guid = new string(row[0]);\n        }\n        else\n        {\n            UpdateErrorInformationToLastFailedQuery(query);\n            return nullptr;\n        }\n\n        stringstream query_string;\n        query_string &lt;&lt; \"PREPARE save_info FROM 'INSERT INTO \" &lt;&lt; ENIGMA_TABLE_NAME &lt;&lt; \" VALUES ( ?, ? )'; \";\n        query_string &lt;&lt; \"SET @guid = '\" &lt;&lt; *guid &lt;&lt; \"'; \";\n        query_string &lt;&lt; \"SET @info = '\" &lt;&lt; information &lt;&lt; \"'; \";\n        query_string &lt;&lt; \"EXECUTE save_info USING @guid, @info; \";\n        query_string &lt;&lt; \"DEALLOCATE PREPARE save_info; \";\n\n        query.reset();\n        query = connection-&gt;query(query_string.str());\n\n        if (query.execute())\n        {\n            return guid;\n        }\n        else\n        {\n            delete guid;\n            UpdateErrorInformationToLastFailedQuery(query);\n        }\n    }\n\n    ErrorMessage = \"Not connected to the database.\";\n    return nullptr;\n}\n</code></pre>\n\n<p>That executes fine, returns no errors and successfully inserts a new row into the database as one would expect.</p>\n\n<p>My issue is when I try to execute a prepared statement this way but expect it to return information.  The code in question is as follows:</p>\n\n<pre><code>        stringstream query_string;\n        query_string &lt;&lt; \"PREPARE get_info FROM 'SELECT Information FROM \" &lt;&lt; ENIGMA_TABLE_NAME &lt;&lt; \" WHERE (Id = ?)'; \";\n        query_string &lt;&lt; \"SET @guid = '\" &lt;&lt; guid &lt;&lt; \"'; \";\n        query_string &lt;&lt; \"EXECUTE get_info USING @guid; \";\n        query_string &lt;&lt; \"DEALLOCATE PREPARE get_info; \";\n\n        Query query = connection-&gt;query( query_string.str() );\n\n        std::cout &lt;&lt; (query.more_results() ? \"More Results\" : \"No Results\") &lt;&lt; std::endl; // Outputs \"No Results\"\n\n        StoreQueryResult res = query.store();\n        std::cout &lt;&lt; res.num_rows() &lt;&lt; std::endl; // Returns Zero\n</code></pre>\n\n<p>So while this code executes correctly with no errors it returns no results.  I know that the resulting query string is correct, for instance if I output that query string into a file and paste it into MySQL workbench it returns the information as I would expect. The problem is still present if I set the MultiStatementsOption option on the connection to be true.  I'm wondering how I can use prepared statements with MySQL++ like this and be able to retrieve information back from the executed statement.</p>\n\n<p>Thanks for any help you can provide.</p>\n"}, {"tags": ["c++", "dll", "dependencies", "loadlibrary", "import-table"], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1445529781, "creation_date": 1445529781, "answer_id": 33285476, "question_id": 33268131, "link": "https://stackoverflow.com/questions/33268131/why-does-dependency-walker-show-missing-dlls/33285476#33285476", "title": "Why does dependency walker show missing dlls?", "body": "<p>I think you're seeing part of the Windows implementation, and this is because Dependency Walker doesn't know the exact OS rules but <code>LoadLibrary</code> does. Some of those \"fake imports\" may exist for compatibility reasons, to support apps which make unfounded assumptions about Windows DLL's. </p>\n\n<p><em>MSDN documents against which DLL's you should link. They usually forward to other DLL's. Please don't hardcode those implementation DLL's. Your company is probably not important enough for Microsoft to add compatibility hacks when the implementation DLLs change.</em></p>\n"}], "owner": {"reputation": 409, "user_id": 2317744, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ac5100c96d62cfdd44395aeacd15b1c?s=128&d=identicon&r=PG", "display_name": "ashish g", "link": "https://stackoverflow.com/users/2317744/ashish-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445529781, "creation_date": 1445457455, "last_edit_date": 1445522230, "question_id": 33268131, "link": "https://stackoverflow.com/questions/33268131/why-does-dependency-walker-show-missing-dlls", "title": "Why does dependency walker show missing dlls?", "body": "<p>I have a dll file which when I try to load using <code>LoadLibrary</code> works fine. I am able to call the functions in the loaded dll successfully. However when I try to use dependency walker on this dll it shows me a bunch of missing dll's and some symbols within some dll's. </p>\n\n<p>I know I can safely ignore these, however I'd like to know why would this happen? I tried to parse through the PE headers import directory and I get similar results as dependency walker too.</p>\n\n<p>Any pointers?</p>\n"}, {"tags": ["c#", "c++", "amqp", "sasl", "qpid"], "owner": {"reputation": 11, "user_id": 3302058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a81a8bcc5bb0b2a6bcf176d73b839e22?s=128&d=identicon&r=PG&f=1", "display_name": "AaronT", "link": "https://stackoverflow.com/users/3302058/aaront"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445525198, "creation_date": 1445457311, "last_edit_date": 1445525198, "question_id": 33268088, "link": "https://stackoverflow.com/questions/33268088/qpid-c-messaging-api-amqp-net-lite", "title": "Qpid C++ Messaging API &amp; amqp .net lite", "body": "<p>I am developing a application in C++ using Qpid C++ Messaging API. The application should send messages to another .net application running amqpnetlite. </p>\n\n<p>However, when initiating the connection, on the C++ side, I got this security error: </p>\n\n<pre><code>[Security] error Expected SASL frame; got type \\0x00 \n[Security] error Unexpected descriptor in SASL negotiation: unknown-descriptor (0x10).\n</code></pre>\n\n<p>I was wondering anyone has any thoughts about the error?</p>\n\n<p>Additional Info:</p>\n\n<ol>\n<li>I confirm that the C++ application speaks AMQP 1.0.</li>\n<li>I also have this python script (using Qpid Proton 0.10) that speaks AMQP 1.0 and sends essentially the same message to the .net application. This python script works just fine.</li>\n<li>I set up a C++ AMQP broker with <code>qpidd --auth no</code>. Now both the python script and the C++ application (connection configured with <code>{sasl_mechanism:ANONYMOUS}</code>) could send messages through.</li>\n</ol>\n\n<p>Any or all help would be appreciated!</p>\n\n<hr>\n\n<p><strong>EDIT</strong> </p>\n\n<p>Find the solution myself.</p>\n\n<p>When initiate the connection on the C++ application side, the SASL_MECHANISMS must be set to NONE explicitly, as amqpnetlite defaults to disable any authentication (not even the ANONYMOUS mode) when listening for incoming connection.</p>\n\n<p>This can be done in the C++ code by doing</p>\n\n<pre><code>connection.setOption(\"sasl_mechanisms\",\"NONE\");\n</code></pre>\n\n<p>or by supplying the option from the command line.</p>\n\n<pre><code>./send.o localhost {protocol:amqp1.0\\,sasl_mechanisms:NONE}\n</code></pre>\n\n<p>The NONE option for sasl_mechanisms is documented nowhere in the Qpid C++ API documentation. It has to be found out by looking into the source code.</p>\n"}, {"tags": ["c++", "xcode", "combinations", "lldb", "factorial"], "comments": [{"owner": {"reputation": 3068, "user_id": 901230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHGeS.jpg?s=128&g=1", "display_name": "Enrico Granata", "link": "https://stackoverflow.com/users/901230/enrico-granata"}, "edited": false, "score": 0, "creation_date": 1445633369, "post_id": 33268082, "comment_id": 54421293, "body": "How are you launching your program under LLDB?"}], "owner": {"reputation": 578, "user_id": 2440997, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/a19e8abb36f4d7b3893487fa2ad98b0e?s=128&d=identicon&r=PG", "display_name": "sanch", "link": "https://stackoverflow.com/users/2440997/sanch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445458266, "creation_date": 1445457291, "question_id": 33268082, "link": "https://stackoverflow.com/questions/33268082/getting-lldb-output-and-hang-on-runtime", "title": "Getting (lldb) output and hang on runtime", "body": "<p>I have a simple program that is calculating factorials, permutations and combinations. I feel good about my math but for whatever reason I cannot get this program to execute. Full disclosure I am new student to C++. Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint factorial(int);\nint permutations(int, int);\nint combinations (int ,int);\nvoid perms_and_combs(int, int, int&amp;, int&amp;);\nint numPerms;\nint numCombs;\nint main() {\nint factorialVal;\ncout &lt;&lt; \"enter an int!\\n\";\ncin &gt;&gt; factorialVal;\ncout &lt;&lt; \"The factorial of \" &lt;&lt; factorialVal &lt;&lt; \" is \" &lt;&lt; factorial(factorialVal) &lt;&lt; endl;\nint permVal1;\nint permVal2;\ndo {\n    cout &lt;&lt; \"Input a two values: \";\n    cin &gt;&gt; permVal1;\n    cout &lt;&lt; \", \";\n    cin &gt;&gt; permVal2;\n} while ( permVal1 &lt; 0 || permVal2 &gt; permVal1);\ncout &lt;&lt; \"test\"; // This line doesn't get executed\nperms_and_combs(permVal1, permVal2, numPerms, numCombs);\ncout &lt;&lt; \"Number of permutations: \"&lt;&lt;numPerms &lt;&lt; \". Number of combinations: \" &lt;&lt; numCombs;\nreturn 0;\n}\n\nint factorial(int n) {\nint product = 1;\nfor (int i = 1; i &lt;= n; i++) {\n    product *= i;\n}\nreturn product;\n\n}\n\nint permutations (int n, int k) {\n\nint result;\nint denominator = n-k;\ncout &lt;&lt; denominator;\nresult = (factorial(n)/factorial(denominator));\nreturn result;\n}\nint combinations (int n, int k) {\nint result;\nresult = permutations(n, k) * (1/factorial(k));\nreturn result;\n}\nvoid perms_and_combs(int n, int k, int&amp; numPerms, int&amp; numCombs) {\nnumPerms = permutations(n, k);\nnumCombs = combinations(n, k);\nreturn;\n}\n</code></pre>\n"}, {"tags": ["c++", "this", "pointer-arithmetic", "this-pointer"], "comments": [{"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1445457486, "post_id": 33268042, "comment_id": 54337342, "body": "Unless your class is made entirely of pointers, it is highly unlikely that iterating through memory by 1 is going to get you to the next object."}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1445457667, "post_id": 33268042, "comment_id": 54337424, "body": "Also... the reason you get &quot;Error: no opperator &#39;&lt;&lt;&#39; matches these operands&quot; is because you don&#39;t have a &lt;&lt; operator defined for myclass.  I&#39;m going to assume that is a compile time error?  If you do it to compile, you are going to seg fault or worse when you dereference somepointer."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1445457676, "post_id": 33268042, "comment_id": 54337431, "body": "actually, pointers are larger than a <code>char</code> so it wouldn&#39;t even work with just pointers. You&#39;d have to have only the likes of <code>char</code>"}, {"owner": {"reputation": 1573, "user_id": 748910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ef3395a924e030974f23677c45bbafe3?s=128&d=identicon&r=PG", "display_name": "mjr", "link": "https://stackoverflow.com/users/748910/mjr"}, "edited": false, "score": 0, "creation_date": 1445458212, "post_id": 33268042, "comment_id": 54337708, "body": "I would also look at this <a href=\"http://stackoverflow.com/questions/15430848/are-class-members-garaunteed-to-be-contiguous-in-memory\" title=\"are class members garaunteed to be contiguous in memory\">stackoverflow.com/questions/15430848/&hellip;</a>  You are guaranteed &quot;increasing addresses in the order declared&quot;.  But there is a LOT that you are not guaranteed about your class memory."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445458267, "post_id": 33268042, "comment_id": 54337738, "body": "The idea was to run it in a loop."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445458912, "post_id": 33268042, "comment_id": 54338082, "body": "objects are not blocks of data in memory, at least, they should not be thought about in this manner. Thinking this way is the reason for your confusion."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1445458950, "post_id": 33268042, "comment_id": 54338100, "body": "Adding 1 to a <code>myclass*</code> doesn&#39;t add 1 to the address stored in the pointer. And it definitely doesn&#39;t move to the next member variable."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445459137, "post_id": 33268042, "comment_id": 54338208, "body": "@SergeyA: Actualy it is, but this is error prone to work with it in that manner."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445459240, "post_id": 33268042, "comment_id": 54338278, "body": "If I were to ever do this, it would be in a context where the data members are fixed and can be tested to a certainty. I&#39;m just curious if its possible, and how."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445459277, "post_id": 33268042, "comment_id": 54338298, "body": "and also curious about the difference between structs and classes. Cause I&#39;m pretty sure you /can/ do pointer arithmetic on a struct?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1445459396, "post_id": 33268042, "comment_id": 54338360, "body": "in class object case can be made some pointer arithmetic too, but you did not do it in right way"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1445459437, "post_id": 33268042, "comment_id": 54338385, "body": "so what do you want?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1445459540, "post_id": 33268042, "comment_id": 54338444, "body": "in your case you shift object pointer to entire object size, so it will definitely not a pointer to object member."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445459961, "post_id": 33268042, "comment_id": 54338663, "body": "Your code is printing long, complicated numbers, not the members."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1445460012, "post_id": 33268042, "comment_id": 54338686, "body": "@Mykola, i reiterate my point. If you are programming in C++, you should never treat objects  as blocks of memory. It would do you no good, and C++ was designed exactly to add abstraction level on top of chunks of memory."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445460042, "post_id": 33268042, "comment_id": 54338710, "body": "What I want to do is cycle through the contents of the data, so someint, then somedouble then the elements of somearray."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1445460424, "post_id": 33268042, "comment_id": 54338902, "body": "Look at my post I shall make some alteration to satisfy you curiosity"}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445460485, "post_id": 33268042, "comment_id": 54338939, "body": "@SergeyA - I realize C++ is object oriented, but the language retains a lot of C functionality. I&#39;d say this gives an advantage over other newer oop languages like Java or C#"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445460704, "post_id": 33268042, "comment_id": 54339054, "body": "@bigcodeszzer, and this is exactly why you have this conondrum. Stop thiking about C++ as an assembly with class keyword. It is not, and it will do you no good to continue in this line of thought."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1445460959, "post_id": 33268042, "comment_id": 54339198, "body": "I have add what you want."}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445461113, "post_id": 33268042, "comment_id": 54339293, "body": "@SergeyA I disagree. I think code should not be thought exclusively as abstract, even in oop. While most problems can be solved more effectively at an abstract level, others can be solved better at a literal level. The knife cuts both ways."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1445461433, "post_id": 33268042, "comment_id": 54339466, "body": "@bigcodeszzer: The result code is in the answer below."}], "answers": [{"comments": [{"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445461866, "post_id": 33268330, "comment_id": 54339697, "body": "So you casted the members into variables to print them?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445462124, "post_id": 33268330, "comment_id": 54339823, "body": "There are no other method to proper data interpretation for output."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445462422, "post_id": 33268330, "comment_id": 54339980, "body": "you also may use void or char pointers, than use actual member shifts in bytes to access them i pointer to someint (int*)pObjPrt, pointer to somedouble (double*)(pObjPrt + 4), pointer to somearray (int*)(pObjPrt + 12)"}, {"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445462854, "post_id": 33268330, "comment_id": 54340219, "body": "Is there a way to account for padding without packing the data specifically?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445463285, "post_id": 33268330, "comment_id": 54340452, "body": "No, there is not. Its because compiler align the data of the class member to the size of member wich has the biggest size in our case its double (8B). so the pointer to somedouble will starts at pObjPrt + 8 instead of  pObjPrt + 4, than the address of somearray will starts at pObjPrt + 16 instead of  pObjPrt + 12"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445463371, "post_id": 33268330, "comment_id": 54340505, "body": "So the actual data size will be different, than it is in documentation"}], "tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": true, "score": 1, "last_activity_date": 1445461528, "last_edit_date": 1445461528, "creation_date": 1445458172, "answer_id": 33268330, "question_id": 33268042, "link": "https://stackoverflow.com/questions/33268042/c-cycle-through-the-addresses-of-an-object/33268330#33268330", "title": "C++ Cycle through the addresses of an object", "body": "<p>You must add friend global <code>std::ostream operator &lt;&lt;</code> to display content of object</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n\nclass myclass {\n    int someint;\n    double somedouble;\n    int somearray[5];\npublic: \n    myclass()\n    {\n        someint = 10;\n        somedouble = 80000;\n        somearray[0] = 0;\n        somearray[1] = 1;\n        somearray[2] = 2;\n        somearray[3] = 3;\n        somearray[4] = 4;\n    }\n    void somefunction();\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; lhs, const myclass&amp; rhs);\n};\n\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; lhs, const myclass&amp; rhs)\n{\n    lhs &lt;&lt; \"someint: \" &lt;&lt; rhs.someint &lt;&lt; std::endl\n        &lt;&lt; \"somedouble: \" &lt;&lt; rhs.somedouble &lt;&lt; std::endl\n        &lt;&lt; \"somearray: { \";\n\n    for (int iIndex = 0; iIndex &lt; 5; iIndex++)\n    {\n        if (iIndex == 4)\n            lhs &lt;&lt; rhs.somearray[iIndex] &lt;&lt; \" }\" &lt;&lt; std::endl;\n        else\n            lhs &lt;&lt; rhs.somearray[iIndex] &lt;&lt;  \", \";\n    }\n\n    return lhs;\n}\n\n\nvoid myclass::somefunction() {\n\n\n    cout &lt;&lt; \"\\n test \\n\" &lt;&lt; this;\n\n    myclass *somepointer;\n\n    somepointer = this; \n\n    somepointer += 1; // wrong pointer to object with `object + sizeof(object)` address, \n    // data probably has been corrupted\n\n    cout &lt;&lt; \"\\n test2 \\n\" &lt;&lt; *somepointer; // displaying objects content\n}\n\nint main() {\n\n\n    myclass myobject;\n\n    myobject.somefunction();\n\n    return 0;\n}\n</code></pre>\n\n<p>as you want to get to the object member using its pointers shifts I post another program</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n\n#pragma pack (push, 1) // force data alignment to 1 byte\n\nclass myclass {\n    int someint;\n    double somedouble;\n    int somearray[5];\npublic: \n    myclass()\n    {\n        someint = 10;\n        somedouble = 80000;\n        somearray[0] = 0;\n        somearray[1] = 1;\n        somearray[2] = 2;\n        somearray[3] = 3;\n        somearray[4] = 4;\n    }\n    void somefunction();\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; lhs, const myclass&amp; rhs);\n};\n\n#pragma pack (pop) // restore data alignment\n\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; lhs, const myclass&amp; rhs)\n{\n    lhs &lt;&lt; \"someint: \" &lt;&lt; rhs.someint &lt;&lt; std::endl\n        &lt;&lt; \"somedouble: \" &lt;&lt; rhs.somedouble &lt;&lt; std::endl\n        &lt;&lt; \"somearray: { \";\n\n    for (int iIndex = 0; iIndex &lt; 5; iIndex++)\n    {\n        if (iIndex == 4)\n            lhs &lt;&lt; rhs.somearray[iIndex] &lt;&lt; \" }\" &lt;&lt; std::endl;\n        else\n            lhs &lt;&lt; rhs.somearray[iIndex] &lt;&lt;  \", \";\n    }\n\n    return lhs;\n}\n\n\nvoid myclass::somefunction() {\n\n    int* pSomeInt = (int*)this; // get someint address\n    double *pSomeDouble = (double*)(pSomeInt + 1); // get somedouble address\n    int* pSomeArray = (int*)(pSomeDouble + 1); // get somearray address\n\n    std::cout &lt;&lt; \"someint: \" &lt;&lt; *pSomeInt &lt;&lt; std::endl\n        &lt;&lt; \"somedouble: \" &lt;&lt; *pSomeDouble &lt;&lt; std::endl\n        &lt;&lt; \"somearray: { \";\n\n    for (int iIndex = 0; iIndex &lt; 5; iIndex++)\n    {\n        if (iIndex == 4)\n            std::cout &lt;&lt; pSomeArray[iIndex] &lt;&lt; \" }\" &lt;&lt; std::endl;\n        else\n            std::cout &lt;&lt; pSomeArray[iIndex] &lt;&lt;  \", \";\n    }\n}\n\nint main() {\n\n\n    myclass myobject;\n\n    myobject.somefunction();\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "edited": false, "score": 0, "creation_date": 1445459002, "post_id": 33268456, "comment_id": 54338135, "body": "I agree, but I&#39;m pretty sure dynamic blocks are not guaranteed to be arranged in order. At least, not if they are initialized with &#39;new&#39;"}], "tags": [], "owner": {"reputation": 221, "user_id": 1571671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954f813d353e5f8bc864cbe02bd22ead?s=128&d=identicon&r=PG", "display_name": "Sim&#243;n Gonz&#225;lez Guerra", "link": "https://stackoverflow.com/users/1571671/sim%c3%b3n-gonz%c3%a1lez-guerra"}, "is_accepted": false, "score": 1, "last_activity_date": 1445458686, "creation_date": 1445458686, "answer_id": 33268456, "question_id": 33268042, "link": "https://stackoverflow.com/questions/33268042/c-cycle-through-the-addresses-of-an-object/33268456#33268456", "title": "C++ Cycle through the addresses of an object", "body": "<p>C++, by design, has no reflection feature. This means there is no generic, type-independent way to acces type metadata (e.g. the list of members if a class and their types) at runtime. So what you're trying to do (if I understand it correctly) cannot be done in C++.</p>\n\n<p>Also I'm not sure what you meant by \"objects (that are not dynamic)\". all objects are blocks of data in memory, regardless of whether they are dynamically allocated or not.</p>\n"}], "owner": {"reputation": 854, "user_id": 5171360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdd1b0d8d8eadd4461800a04ef24a640?s=128&d=identicon&r=PG&f=1", "display_name": "bigcodeszzer", "link": "https://stackoverflow.com/users/5171360/bigcodeszzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 33268330, "answer_count": 2, "score": 0, "last_activity_date": 1445461528, "creation_date": 1445457149, "question_id": 33268042, "link": "https://stackoverflow.com/questions/33268042/c-cycle-through-the-addresses-of-an-object", "title": "C++ Cycle through the addresses of an object", "body": "<p>Objects (that are not dynamic) are blocks of data in memory.</p>\n\n<p>Is there a way to cycle through and print each item in an object?</p>\n\n<p>I tried doing it with 'this' but I keep getting errors.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"TestProject.h\"\n\nusing namespace std;\n\n\nclass myclass {\n\n    int someint = 10;\n    double somedouble = 80000;\n    int somearray[5] = {0, 1, 2, 3, 4};\n\n\npublic:   \n    void somefunction();\n\n\n};\n\n\nvoid myclass::somefunction() {\n\n\n    cout &lt;&lt; \"\\n test \\n\" &lt;&lt; this;\n\n    myclass *somepointer;\n\n    somepointer = this; \n\n    somepointer += 1;\n\n    cout &lt;&lt; \"\\n test2 \\n\" &lt;&lt; *somepointer;\n    //Error: no opperator '&lt;&lt;' matches these operands\n\n}\n\n\n\nint main() {\n\n\n    myclass myobject;\n\n    myobject.somefunction();\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm guessing the error is because the types don't match. But I can't really figure a solution. Is there a dynamic type, or do I have to test the type somehow?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "edited": false, "score": 0, "creation_date": 1445459399, "post_id": 33267990, "comment_id": 54338365, "body": "What OS, API or Framework ... are you using?"}, {"owner": {"reputation": 11, "user_id": 5473086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475d355cad547dcce3e9f5399a58ee95?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5473086/pavel"}, "reply_to_user": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "edited": false, "score": 0, "creation_date": 1445877692, "post_id": 33267990, "comment_id": 54497437, "body": "I&#39;m working under Linux (specifically on Debian) and I&#39;m writing a program in C/C++. For reading a data from the wheel I use functions open and read from fcntl.h library."}], "owner": {"reputation": 11, "user_id": 5473086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475d355cad547dcce3e9f5399a58ee95?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5473086/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445456911, "creation_date": 1445456911, "question_id": 33267990, "link": "https://stackoverflow.com/questions/33267990/reading-data-from-buttons-of-a-racing-wheel-genius-speedwheel-3-mt", "title": "Reading data from buttons of a racing wheel Genius speedwheel 3 mt", "body": "<p>I would like to read the data from buttons of a racing wheel Genius speedwheel 3 mt in C programming language (mainly because I want to reckognize which button was exactly pressed) but I'm not sure what format of data the wheel has. I'm guessing that the wheel sends some bytes but I don't know how many or what means each byte. Any ideas?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1445456567, "post_id": 33267839, "comment_id": 54336876, "body": "An anonymous namespace in a header is certainly a wrong design."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1445456647, "post_id": 33267839, "comment_id": 54336915, "body": "Anonymous namespaces are <b>intended</b> to confine scope to the file scope. A named namespace might fit your needs better."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 6, "creation_date": 1445456684, "post_id": 33267839, "comment_id": 54336933, "body": "Why not make <code>PrevCalc</code> a nested struct of <code>Calculator</code>? You won&#39;t need to dynamically allocate it then either."}, {"owner": {"reputation": 487, "user_id": 4299396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/38afb3d353cd66738f6fa1070ca0215e?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4299396/leo"}, "edited": false, "score": 0, "creation_date": 1445457018, "post_id": 33267839, "comment_id": 54337108, "body": "@Dieter L&#252;cking anonymous header is in <code>.cpp</code> not in header"}, {"owner": {"reputation": 487, "user_id": 4299396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/38afb3d353cd66738f6fa1070ca0215e?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4299396/leo"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445457284, "post_id": 33267839, "comment_id": 54337247, "body": "@Neil Kirk Previously <code>prev</code> variables was class members and because of that class was too big. So, if I create nested struct class will remain big."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445457391, "post_id": 33267839, "comment_id": 54337292, "body": "Define &quot;too big&quot;? You can forward-declare a nested struct in the header file and continue to use it dynamically."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1445457618, "post_id": 33267839, "comment_id": 54337399, "body": "@Leo your usage of the forward declaration, which is an declaration in an  anonymous namespace  in a source file implies the the usage of an  anonymous namespace in the header (which you omitted) - Note (!), that will be no good, anyways!"}, {"owner": {"reputation": 487, "user_id": 4299396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/38afb3d353cd66738f6fa1070ca0215e?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4299396/leo"}, "edited": false, "score": 0, "creation_date": 1445457693, "post_id": 33267839, "comment_id": 54337444, "body": "@I have twenty <code>prev</code> variables in header and I guess it is not good for reading. However forward declare in header and define in <code>.cpp</code> is a good idea"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1445461232, "post_id": 33267839, "comment_id": 54339348, "body": "@Leo he means that you can put <code>class PrevCalc;</code> inside <code>class Calculator</code>. This does not affect the size of a Calculator, it only affects the scope of <code>PrevCalc</code>."}], "answers": [{"comments": [{"owner": {"reputation": 817, "user_id": 362515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af405c8e6ed7799762a21ab51e64ee7b?s=128&d=identicon&r=PG", "display_name": "user362515", "link": "https://stackoverflow.com/users/362515/user362515"}, "edited": false, "score": 0, "creation_date": 1453721923, "post_id": 33267987, "comment_id": 57711458, "body": "The problem is, only an anonymous namespace gives you internal linkage. It is pretty sad, there is no way to freely use a completely internal class member (or member function) without hacks. Hope Modules will improve that! At least we&#39;ll have module-internal classes and whatnot."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 6, "last_activity_date": 1445460748, "last_edit_date": 1495540326, "creation_date": 1445456901, "answer_id": 33267987, "question_id": 33267839, "link": "https://stackoverflow.com/questions/33267839/how-to-forward-declare-class-which-is-in-unnamed-namespace/33267987#33267987", "title": "How to forward declare class which is in unnamed namespace", "body": "<blockquote>\n  <p>My question is how to declare class which will be defined in unnamed namespace in <code>.cpp</code> file </p>\n</blockquote>\n\n<p>You cannot. The unnamed namespace is explicitly meant to be privately visible for the current translation unit it appears in, and cannot be used for forward declarations inherently.</p>\n\n<p>You're probably be better off using the <a href=\"https://stackoverflow.com/questions/8972588/is-the-pimpl-idiom-really-used-in-practice\">pimpl idiom</a>, if you want to hide implementation details.</p>\n\n<hr>\n\n<p>Another popular approach is using an <code>internal_</code> namespace, and document it's not meant for <code>public</code> usage:</p>\n\n<pre><code>namespace calculators {\nnamespace internal_ {\n    struct PrevCalc{\n        double prevA = -1;\n        double prevB = -1;\n        double prevC = -1;\n    };\n}\n\nclass Calculator {\npublic:\n    Calculator();\nprivate: // !!!!\n    internal_::PrevCalc* prevCalc;\n};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3572, "user_id": 5710233, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5LmFgRhfZNQ/AAAAAAAAAAI/AAAAAAAAABk/Etcd11tdJGc/photo.jpg?sz=128", "display_name": "Mizux", "link": "https://stackoverflow.com/users/5710233/mizux"}, "is_accepted": false, "score": 1, "last_activity_date": 1598025236, "creation_date": 1598025236, "answer_id": 63526128, "question_id": 33267839, "link": "https://stackoverflow.com/questions/33267839/how-to-forward-declare-class-which-is-in-unnamed-namespace/63526128#63526128", "title": "How to forward declare class which is in unnamed namespace", "body": "<p>You could also use a nested class ?</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef CALCULATOR_H\n#define CALCULATOR_H\n\nclass Calculator {\npublic:\n    Calculator();\n    ~Calculator(); // need an explicit destructor to use std::unique_ptr&lt;&gt;\nprivate:\n    struct PrevCalc;\n    std::unique_ptr&lt;PrevCalc&gt; prevCalc;\n};\n\n#endif // CALCULATOR_H\n</code></pre>\n<p>in .cc file</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &quot;calculator.h&quot;\n\nstruct Calculator::PrevCalc{\n  double prevA = -1;\n  double prevB = -1;\n  double prevC = -1;\n};\n\nCalculator::Calculator():\n  prevCalc(std::make_unique&lt;PrevCalc&gt;())\n{}\n\nCalculator::~Calculator(){}\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 4299396, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/38afb3d353cd66738f6fa1070ca0215e?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/4299396/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3475, "favorite_count": 0, "accepted_answer_id": 33267987, "answer_count": 2, "score": 9, "last_activity_date": 1598025236, "creation_date": 1445456459, "question_id": 33267839, "link": "https://stackoverflow.com/questions/33267839/how-to-forward-declare-class-which-is-in-unnamed-namespace", "title": "How to forward declare class which is in unnamed namespace", "body": "<p>I am trying to create class with lazy calculations. So I need struct to hold previously calculated variables and I want to put that class into unnamed namespace(don't want to pollute global scope). Here is minimal code which explains what I want:\n<code>calculator.h</code>:</p>\n\n<pre><code>#ifndef CALCULATOR_H\n#define CALCULATOR_H\n\nclass PrevCalc;\nclass Calculator\n{\npublic:\n    Calculator();\n    PrevCalc* prevCalc;\n};\n\n#endif // CALCULATOR_H\n</code></pre>\n\n<p><code>calculator.cpp</code>:</p>\n\n<pre><code>#include \"calculator.h\"\nnamespace{\n    struct PrevCalc{\n        double prevA = -1;\n        double prevB = -1;\n        double prevC = -1;\n    };\n}\nCalculator::Calculator()\n{\n    prevCalc = new PrevCalc();\n}\n</code></pre>\n\n<p>Of course it gives an error <code>expected type-specifier before 'PrevCalc'</code> and if I define <code>PrevCalc</code> without namespace everything works fine. My question is how to declare class which will be defined in unnamed namespace in <code>.cpp</code> file</p>\n"}, {"tags": ["c++", "c", "file", "arr"], "comments": [{"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1445456541, "post_id": 33267772, "comment_id": 54336859, "body": "fp = open(&quot;text.txt&quot;,r); should be fp = fopen(&quot;text.txt&quot;,r);"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1445456555, "post_id": 33267772, "comment_id": 54336872, "body": "Is there a newline character (<code>\\n</code>) at the end of the string of integers also?"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445458303, "post_id": 33267772, "comment_id": 54337759, "body": "<a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1445461218, "post_id": 33267772, "comment_id": 54339341, "body": "Which language are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1445456453, "creation_date": 1445456453, "answer_id": 33267834, "question_id": 33267772, "link": "https://stackoverflow.com/questions/33267772/how-to-detect-youve-reached-the-end-of-a-fgets-string-of-integers-when-0-is-th/33267834#33267834", "title": "How to detect you&#39;ve reached the end of a fgets string of integers, when 0 is the last integer in the line, using c++?", "body": "<p>You could actually use C++:</p>\n\n<pre><code>std::ifstream file(\"text.txt\");\nstd::string line;\nwhile (std::getline(file, line)) {\n    std::istringstream iss(line);\n    int i;\n    while (iss &gt;&gt; i) {\n        // ...\n    }\n}\n</code></pre>\n\n<p>The inner loop could simply load all of the ints into a vector directly or something:</p>\n\n<pre><code>std::ifstream file(\"text.txt\");\nstd::string line;\nwhile (std::getline(file, line)) {\n    std::istringstream iss(line);\n    std::vector&lt;int&gt; all_the_ints{\n        std::istream_iterator&lt;int&gt;{iss},\n        std::istream_iterator&lt;int&gt;{}\n    };\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1445458395, "post_id": 33267946, "comment_id": 54337818, "body": "Note that you&#39;ll not only need to check it, but reset it before the call to <code>strtol</code> you care about.  Otherwise you could see an error that occurred much earlier."}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": true, "score": 0, "last_activity_date": 1445461441, "last_edit_date": 1445461441, "creation_date": 1445456780, "answer_id": 33267946, "question_id": 33267772, "link": "https://stackoverflow.com/questions/33267772/how-to-detect-youve-reached-the-end-of-a-fgets-string-of-integers-when-0-is-th/33267946#33267946", "title": "How to detect you&#39;ve reached the end of a fgets string of integers, when 0 is the last integer in the line, using c++?", "body": "<p>Ben's answer was so good, it should be part of the answer</p>\n\n<p>Set errno to 0 before calling strtol.</p>\n\n<p>Check errno. From man page</p>\n\n<p>ERANGE</p>\n\n<p>The resulting value was out of range.\nThe implementation may also set errno to EINVAL in case no conversion was performed <strong>(no digits seen, and 0 returned)</strong>. </p>\n"}, {"tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1445458322, "creation_date": 1445458322, "answer_id": 33268369, "question_id": 33267772, "link": "https://stackoverflow.com/questions/33267772/how-to-detect-youve-reached-the-end-of-a-fgets-string-of-integers-when-0-is-th/33268369#33268369", "title": "How to detect you&#39;ve reached the end of a fgets string of integers, when 0 is the last integer in the line, using c++?", "body": "<p>You're throwing away the information available from <code>strtol</code>.</p>\n\n<p>In particular, after a call</p>\n\n<pre><code>val = strtol(p, &amp;endp, radix);\n</code></pre>\n\n<p>you are interested in whether <code>p == endp</code>.</p>\n\n<p>In your call <code>strtol(p, &amp;p, radix)</code> you're overwriting <code>p</code> too soon and losing the chance to perform the test.</p>\n"}], "owner": {"reputation": 23, "user_id": 5473081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4693bf71da42a000f4c0dc041645838c?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Johnson", "link": "https://stackoverflow.com/users/5473081/mark-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 33267946, "answer_count": 3, "score": 2, "last_activity_date": 1445461441, "creation_date": 1445456211, "question_id": 33267772, "link": "https://stackoverflow.com/questions/33267772/how-to-detect-youve-reached-the-end-of-a-fgets-string-of-integers-when-0-is-th", "title": "How to detect you&#39;ve reached the end of a fgets string of integers, when 0 is the last integer in the line, using c++?", "body": "<p>If I'm reading in lines from a .txt file of varying length, (i.e. 5 integers on line 1, then 2 integers on line 2, then 10 integers on line 3, and etc.), using fgets (although I don't necessarily need to use it, just seemed like a good tool in my situation). Every solution I find returns an error of 0 (like strtol or atio).</p>\n\n<pre><code>char str[100];\nchar* p = str;\nFILE* fp;\nfp = open(\"text.txt\",r);\nif(fp == NULL) \n    printf(\"aborting.. Cannot open file! \\n\");\nwhile(!foef(fp))\n{\nif(fgets(p,100,fp) != NULL)\n{\n    for (int j = 0 ; j &lt; 20 ; j+=2) \n    {\n        temp1 = strtol(p, &amp;p, 10);\n        // need to store temp1 into arr[j] if it is a valid integer (0-&gt;inf)\n        // but should discard if we are at the end of the line\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1445460437, "post_id": 33267758, "comment_id": 54338910, "body": "What are (in your opinion) the <i>range-based goodies</i>? What&#39;s wrong with an ordinary <code>for</code> loop?"}], "answers": [{"tags": [], "owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "is_accepted": false, "score": 0, "last_activity_date": 1445458495, "creation_date": 1445458495, "answer_id": 33268410, "question_id": 33267758, "link": "https://stackoverflow.com/questions/33267758/iterating-over-a-part-of-an-array-in-a-range-based-loop/33268410#33268410", "title": "Iterating over a part of an array in a range-based loop", "body": "<p>The range-based for loop iterates over the entire range. What you could do is store an additional index that you check in each look.</p>\n\n<pre><code>size_t index = 0;\nfor(auto elem: someArray) \n{\n   //doStuff\n\n   if(index++ &gt; n) break;\n}\n</code></pre>\n\n<p>However, I don't see what you'd gain with this over a regular for loop.</p>\n\n<p>Ofc, you could also use <code>std::for_each</code> on the desired sub-range, but I'd still prefer a traditional for loop.</p>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 2, "last_activity_date": 1445459826, "last_edit_date": 1445459826, "creation_date": 1445459484, "answer_id": 33268664, "question_id": 33267758, "link": "https://stackoverflow.com/questions/33267758/iterating-over-a-part-of-an-array-in-a-range-based-loop/33268664#33268664", "title": "Iterating over a part of an array in a range-based loop", "body": "<p>No. Not in the current standard.</p>\n\n<p>There are some things in the making for C++17 that would make this possible, e.g. <code>std::range</code> and <code>std::array_view</code>.</p>\n\n<p>But until then, just use the good old iterator or index <code>for</code>, it will be the most readable:</p>\n\n<pre><code>for(auto i = 0u; i &lt; n; ++i)\n{\n    // do the stuffs on someArray[i]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 3, "last_activity_date": 1446758375, "last_edit_date": 1446758375, "creation_date": 1445459854, "answer_id": 33268769, "question_id": 33267758, "link": "https://stackoverflow.com/questions/33267758/iterating-over-a-part-of-an-array-in-a-range-based-loop/33268769#33268769", "title": "Iterating over a part of an array in a range-based loop", "body": "<p>There is no C++11 way to do this without writing your own wrapper for it. An alternative option could be to use <a href=\"https://ericniebler.github.io/range-v3/\" rel=\"nofollow\">Range-V3</a> which has <code>view::slice</code> (<em><a href=\"http://coliru.stacked-crooked.com/a/12149af040ad22e3\" rel=\"nofollow\">see it live</a></em>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;range/v3/view.hpp&gt;\n\nint main() {\n  int arr[10] = {1,2,3,4,5,6,7,8,9,10} ;\n\n  using namespace ranges;\n\n  auto rng = arr |  view::slice(3, 6);\n\n  for( auto &amp;item : rng )\n  {\n      std::cout &lt;&lt; item &lt;&lt; \", \" ;\n  }\n  std::cout &lt;&lt; std::endl ;\n}\n</code></pre>\n\n<p>If on the other hand C++14 was available then <a href=\"https://github.com/Microsoft/GSL/blob/master/include/array_view.h\" rel=\"nofollow\">GSL array_view</a> would be a viable option:</p>\n\n<pre><code>gsl::array_view&lt;int&gt; av(arr+3,3) ;\n\nfor( auto &amp;item : av )\n{\n    std::cout &lt;&lt; item &lt;&lt; \", \" ;\n}\nstd::cout &lt;&lt; std::endl ;\n</code></pre>\n\n<p><a href=\"https://github.com/martinmoene/gsl-lite\" rel=\"nofollow\">gsl-lite</a> offers a minimal GSL implementation that works in C++11.</p>\n"}, {"comments": [{"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 3, "creation_date": 1445460493, "post_id": 33268891, "comment_id": 54338944, "body": "Why not <code>size_t</code> for the size?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445474313, "post_id": 33268891, "comment_id": 54344093, "body": "Shrug. Use that if you want to. An array used with range-based <code>for</code> is almost certainly global or automatic, so is unlikely to be too big for an <code>int</code> index. A system that can create an array of 10e7 probably has at least 32-bit <code>int</code>. If not, use a bigger type."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 5, "creation_date": 1445474653, "post_id": 33268891, "comment_id": 54344183, "body": "Why write code which usually works instead of always works?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1445545158, "post_id": 33268891, "comment_id": 54380005, "body": "So use a bigger type."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 5, "last_activity_date": 1445545359, "last_edit_date": 1445545359, "creation_date": 1445460244, "answer_id": 33268891, "question_id": 33267758, "link": "https://stackoverflow.com/questions/33267758/iterating-over-a-part-of-an-array-in-a-range-based-loop/33268891#33268891", "title": "Iterating over a part of an array in a range-based loop", "body": "<p>Simply adapt the range to be a different type where <code>begin()</code> and <code>end()</code> do the right thing.</p>\n\n<pre><code>struct Slice {\n  int* arr;\n  size_t n;\n  int* begin() { return arr; }\n  int* end() { return arr + n; }\n};\n\nfor(auto elem : Slice{someArray, 100}) {/*doStuff*/}\n</code></pre>\n"}], "owner": {"reputation": 1975, "user_id": 1195131, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5e8dacdbaffaa900cd3b6eb300f2b2df?s=128&d=identicon&r=PG", "display_name": "Straightfw", "link": "https://stackoverflow.com/users/1195131/straightfw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3112, "favorite_count": 3, "accepted_answer_id": 33268891, "answer_count": 4, "score": 5, "last_activity_date": 1446758375, "creation_date": 1445456182, "last_edit_date": 1445459862, "question_id": 33267758, "link": "https://stackoverflow.com/questions/33267758/iterating-over-a-part-of-an-array-in-a-range-based-loop", "title": "Iterating over a part of an array in a range-based loop", "body": "<p>Is there any way to iterate over only a part of an array in the C++11 range-based loop? Say I have an int <code>someArray[10000000]</code> but I only want to iterate over the first <code>n</code> elements. Thus, I can't simply use</p>\n\n<pre><code>for(auto elem: someArray) {//doStuff}\n</code></pre>\n\n<p>Any way to limit the scope of the loop while still using the range-based goodies?</p>\n"}, {"tags": ["android", "c++", "eclipse", "android-ndk", "java-native-interface"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1445457060, "post_id": 33267543, "comment_id": 54337141, "body": "Possible duplicate of <i><a href=\"http://stackoverflow.com/questions/33256159/android-ndk-giving-errors-while-compiling-in-eclipse\">Android ndk giving errors while compiling in eclipse</a></i> and/or <i><a href=\"http://stackoverflow.com/questions/33241161/opencv-opencv2-core-core-hpp-no-such-file-or-directory/33242889#33242889\">OpenCV opencv2/core/core.hpp: No such file or directory</a></i>"}, {"owner": {"reputation": 167, "user_id": 5308173, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/3c5242075fbb6e1bb36c60eabc1ff15d?s=128&d=identicon&r=PG&f=1", "display_name": "S.Khan", "link": "https://stackoverflow.com/users/5308173/s-khan"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1445457845, "post_id": 33267543, "comment_id": 54337518, "body": "Those links did not solve my problem."}], "answers": [{"tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 0, "last_activity_date": 1445459661, "creation_date": 1445459661, "answer_id": 33268715, "question_id": 33267543, "link": "https://stackoverflow.com/questions/33267543/how-to-add-opencv-files-in-include-folder-in-jni-using-eclipse/33268715#33268715", "title": "How to add openCV files in &quot;include&quot; folder in JNI using Eclipse", "body": "<p>There is a character missing</p>\n\n<pre><code>OPENCV_MK_PATH:D\u2026\n</code></pre>\n\n<p>should read</p>\n\n<pre><code>OPENCV_MK_PATH:=D\u2026\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 5308173, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/3c5242075fbb6e1bb36c60eabc1ff15d?s=128&d=identicon&r=PG&f=1", "display_name": "S.Khan", "link": "https://stackoverflow.com/users/5308173/s-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 33268715, "answer_count": 1, "score": 0, "last_activity_date": 1445459661, "creation_date": 1445455342, "question_id": 33267543, "link": "https://stackoverflow.com/questions/33267543/how-to-add-opencv-files-in-include-folder-in-jni-using-eclipse", "title": "How to add openCV files in &quot;include&quot; folder in JNI using Eclipse", "body": "<p>I am implementing the following project:\n<a href=\"https://github.com/matthill/darwinwallet\" rel=\"nofollow\">https://github.com/matthill/darwinwallet</a>\nI am getting the following error when I am executing a OpenCV android project in Eclipse:</p>\n\n<pre><code>    jni/jni_recognizer.cpp:2:33: fatal error: opencv2/core/core.hpp: No such file or directory\n #include &lt;opencv2/core/core.hpp&gt;\n                                 ^\ncompilation terminated.\nmake.exe: *** [obj/local/armeabi-v7a/objs/native_wallet/jni_recognizer.o] Error 1\n</code></pre>\n\n<p>in my jni/include folder in Eclipse,there is no openCV files.There are only NDK files, so, maybe that is the issue. SO, please tell me how to add openCV files in the include folder.</p>\n\n<p>This is my recognizer.cpp file</p>\n\n<p>`</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;opencv2/features2d/features2d.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;vector&gt;\n#include \"NativeVision/vision.h\"\n#include &lt;time.h&gt;\n#include &lt;android/log.h&gt;\nusing namespace std;\nusing namespace cv;\n#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG,   \"JNI_DEBUGGING\", __VA_ARGS__)\ndouble diffclock(clock_t clock1,clock_t clock2)\n{\n    double diffticks=clock2-clock1;\n    double diffms=(diffticks*1000)/ CLOCKS_PER_SEC;\n    return diffms;\n}\nstatic Ptr&lt;ORB&gt; detector;\nstatic Ptr&lt;DescriptorMatcher&gt; descriptorMatcher;\nstatic vector&lt;Mat&gt; trainImages;\nstatic bool training_complete = false;\nstatic vector&lt;string&gt; billMapping;\nextern \"C\" {\n    JNIEXPORT void JNICALL Java_com_ndu_mobile_darwinwallet_Recognizer_nvInitialize(JNIEnv* env, jobject thiz)\n    {\n        LOGD( \"Started nvInitialize\" );\n        detector = getQueryDetector();\n        descriptorMatcher = getMatcher();\n        LOGD( \"Finished nvInitialize\" );\n    }\n}\nextern \"C\" {\n    JNIEXPORT void JNICALL Java_com_ndu_mobile_darwinwallet_Recognizer_nvResetTrainedDatabase(JNIEnv* env, jobject thiz)\n    {\n        LOGD( \"Started nvResetTrainedDatabase\" );\n        training_complete = false;\n        descriptorMatcher = getMatcher();\n        trainImages.clear();\n        billMapping.clear();\n        LOGD( \"Finished nvResetTrainedDatabase\" );\n    }\n}\nextern \"C\" {\n    JNIEXPORT void JNICALL Java_com_ndu_mobile_darwinwallet_Recognizer_nvTrainImage(JNIEnv* env, jobject thiz, jstring billname, jstring billpath)\n    {\n        //char* _imgBytes  = (char*) env-&gt;GetPrimitiveArrayCritical(imgBytes, 0);\n        const char * _billpath = env-&gt;GetStringUTFChars(billpath, 0);\n        const char * _billname = env-&gt;GetStringUTFChars(billname, 0);\n        LOGD( \"Started nvTrainImage\" );\n        std::ostringstream out;\n        //std::ostringstream out;\n        //out &lt;&lt; \" : billname: \" &lt;&lt; _billname &lt;&lt; \": BILLPATH: \" &lt;&lt; billpath &lt;&lt; endl;\n        LOGD( out.str().c_str() );\n        //LOGD( \"nvTrainImage: 1\" );\n        //Mat mgray(1, bytelength, CV_8U, (unsigned char *)_imgBytes);\n        //LOGD( \"nvTrainImage: 2\" );\n        Mat img = imread(_billpath, 0);\n        //Mat img = imread(\"/sdcard/wallet/us/100b/full_pic.jpg\", 0);\n        //LOGD( \"nvTrainImage: 3\" );\n        Mat trainData = trainImage( img,  detector, descriptorMatcher );\n        out &lt;&lt; \"nvTrainImage: \" &lt;&lt; _billpath &lt;&lt; \" (\" &lt;&lt; trainData.rows &lt;&lt; \" x \" &lt;&lt; trainData.cols &lt;&lt; \")\" &lt;&lt; endl;\n        LOGD( out.str().c_str() );\n        trainImages.push_back(trainData);\n        string billstr(_billname);\n        billMapping.push_back(billstr);\n        LOGD( \"Finished nvTrainImage\" );\n        env-&gt;ReleaseStringUTFChars(billpath, _billpath);\n        env-&gt;ReleaseStringUTFChars(billname, _billname);\n        //env-&gt;ReleasePrimitiveArrayCritical(imgBytes, _imgBytes, 0);\n    }\n}\nextern \"C\" {\n    JNIEXPORT void JNICALL Java_com_ndu_mobile_darwinwallet_Recognizer_nvFinalizeTraining(JNIEnv* env, jobject thiz)\n    {\n        LOGD( \"Started nvFinalizeTraining\" );\n        descriptorMatcher-&gt;add(trainImages);\n        descriptorMatcher-&gt;train();\n        training_complete = true;\n        LOGD( \"Finished nvFinalizeTraining\" );\n    }\n}\nextern \"C\" {\n    JNIEXPORT jstring JNICALL Java_com_ndu_mobile_darwinwallet_Recognizer_nvRecognize(JNIEnv* env, jobject thiz, jint width, jint height, jbyteArray yuv)\n    {\n        jbyte* _yuv  = env-&gt;GetByteArrayElements(yuv, 0);\n        //jint*  _bgra = env-&gt;GetIntArrayElements(bgra, 0);\n        LOGD( \"Started nvFindFeatures\" );\n        jstring response = env-&gt;NewStringUTF(\"\");\n        if (training_complete == true)\n        {\n            clock_t begin;\n            clock_t end;\n            //Mat myuv(height + height/2, width, CV_8UC1, (unsigned char *)_yuv);\n            //Mat mbgra(height, width, CV_8UC4);\n            Mat mgray(height, width, CV_8UC1, (unsigned char *)_yuv);\n            //Mat myuv(width, 1, CV_8U, (unsigned char *)_yuv);\n            //Mat mgray = imdecode(myuv, 0);\n            //Please make attention about BGRA byte order\n            //ARGB stored in java as int array becomes BGRA at native level\n            //cvtColor(myuv, mbgra, CV_YUV420sp2BGR, 4);\n            vector&lt;KeyPoint&gt; v;\n            //FastFeatureDetector detector(50);\n            //detector.detect(mgray, v);\n            float divisor = 1;\n            if (height &lt; width)\n            {\n                divisor = (((double) height) / 240);\n            }\n            else\n            {\n                divisor = (((double) width) / 240);\n            }\n            if (divisor == 0)\n                divisor = 1;\n            Size idealSize(width/divisor, height/divisor);\n            Mat mgray_small;\n            resize(mgray, mgray_small, idealSize);\n            Mat descriptors;\n            vector&lt;DMatch&gt; matches;\n            begin=clock();\n            //detector-&gt;detect(mgray_small, v);\n            //descriptorExtractor-&gt;compute( mgray_small, v, descriptors );\n            //surfStyleMatching( descriptorMatcher, descriptors, matches );\n            Mat* dummy;\n            //imwrite(\"/sdcard/wallet_debug.jpg\", mgray_small );\n            bool debug_on = true;\n            int debug_matches[billMapping.size()];\n            RecognitionResult result = recognize( mgray_small, false, dummy, detector, descriptorMatcher, billMapping,\n                    debug_on, debug_matches);\n            end=clock();\n            std::ostringstream out;\n            out &lt;&lt; \"time: \" &lt;&lt; diffclock(begin, end) &lt;&lt; \" ms | matches: \" &lt;&lt; matches.size() &lt;&lt; endl;\n            if (debug_on)\n            {\n                for (int k = 0; k &lt; billMapping.size(); k++)\n                    out &lt;&lt; \" --\" &lt;&lt; billMapping[k] &lt;&lt; \" : \" &lt;&lt; debug_matches[k] &lt;&lt; endl;\n            }\n            out &lt;&lt; \"orig_width: \" &lt;&lt; width &lt;&lt; \"orig_height: \" &lt;&lt; height &lt;&lt; endl;\n            out &lt;&lt; \"divisor: \" &lt;&lt; divisor &lt;&lt; endl;\n            //LOGD( (char*) out.str().c_str());\n            if (result.haswinner == false)\n                out &lt;&lt; \"No winner frown emoticon\" &lt;&lt; endl;\n            else\n            {\n                out &lt;&lt; \"Big Winner!  \" &lt;&lt; result.winner &lt;&lt; \" : \" &lt;&lt; result.confidence &lt;&lt; endl;\n                std::ostringstream responsetext;\n                responsetext &lt;&lt; result.winner &lt;&lt; \",\" &lt;&lt; result.confidence;\n                response = env-&gt;NewStringUTF(responsetext.str().c_str());\n            }\n            LOGD( (char*) out.str().c_str());\n            //for( size_t i = 0; i &lt; v.size(); i++ )\n            //  circle(mbgra, Point(v[i].pt.x, v[i].pt.y), 10, Scalar(0,0,255,255));\n        }\n        LOGD( \"Finished nvFindFeatures\" );\n        //env-&gt;ReleaseIntArrayElements(bgra, _bgra, 0);\n        env-&gt;ReleaseByteArrayElements(yuv, _yuv, 0);\n        return response;\n    }\n}\n</code></pre>\n\n<p>`</p>\n\n<p>And this is my android.mk file:</p>\n\n<pre><code>LOCAL_PATH:= $(call my-dir)\ninclude $(CLEAR_VARS)\nOPENCV_CAMERA_MODULES:= off\n#OPENCV_MK_PATH:D:\\FYP\\darwinwallet-master\\OpenCV-2.4.9-android-sdk\\sdk\\native\\jni\nOPENCV_MK_PATH:D:\\FYP\\darwinwallet-master\\OpenCV-2.4.9-android-sdk\\sdk\\native\\jni\\OpenCV.mk\nOPENCV_LIB_TYPE:=STATIC\nOPENCV_INSTALL_MODULES:=on\ninclude $(OPENCV_MK_PATH)\n#Profiler \n#-include android-ndk-profiler.mk\n#include ../includeOpenCV.mk\n#ifeq (\"$(wildcard $(OPENCV_MK_PATH))\",\"\")\n#try to load OpenCV.mk from default install location\n#include $(TOOLCHAIN_PREBUILT_ROOT)/user/share/OpenCV/OpenCV.mk\n#else\n#include $(OPENCV_MK_PATH)\n#endif\n#LOCAL_C_INCLUDES:=D:\\FYP\\darwinwallet-master\\OpenCV-2.4.9-android-sdk\\sdk\\native\\jni\\include\nLOCAL_MODULE:=native_wallet\nLOCAL_SRC_FILES:=jni_recognizer.cpp NativeVision\\vision.cpp\nLOCAL_CFLAGS=-ffast-math -O3 -funroll-loops\n#LOCAL_CFLAGS=-O3 -funroll-loops\nLOCAL_LDLIBS+=-llog -ldl\n#Profiling\n#LOCAL_CFLAGS:=-pg\n#LOCAL_STATIC_LIBRARIES:=andprof\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2012", "gcc"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1445455776, "post_id": 33267529, "comment_id": 54336451, "body": "This is <a href=\"http://stackoverflow.com/q/26681873/1708801\">ill-formed no diagnostic required</a>"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445455708, "post_id": 33267616, "comment_id": 54336425, "body": "don&#39;t you mean MSVS?  Also clang compiles with no errors or warnings"}], "tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": false, "score": 0, "last_activity_date": 1445455811, "last_edit_date": 1445455811, "creation_date": 1445455640, "answer_id": 33267616, "question_id": 33267529, "link": "https://stackoverflow.com/questions/33267529/error-while-compiling-in-gcc/33267616#33267616", "title": "Error while compiling in gcc", "body": "<p>You have a type called <code>rv</code> and a member variable called <code>rv</code>. How is the compiler supposed to know which one you mean when you write <code>rv</code>?</p>\n\n<p>Strictly this is invalid code, but Visual Studio seems to be willing to try to let you shoot yourself in the foot.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1445455869, "post_id": 33267641, "comment_id": 54336502, "body": "and the fix: <code>vector&lt;struct rv&gt; rv;</code> or <code>vector&lt;::rv&gt; rv;</code>"}, {"owner": {"reputation": 175, "user_id": 4518186, "user_type": "registered", "profile_image": "https://graph.facebook.com/649937893/picture?type=large", "display_name": "Nitin Kashyap", "link": "https://stackoverflow.com/users/4518186/nitin-kashyap"}, "edited": false, "score": 0, "creation_date": 1445457015, "post_id": 33267641, "comment_id": 54337106, "body": "Thank you for explaining it out. I am just learning C++ and I really appreciate the detailed answer."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 3, "last_activity_date": 1445457208, "last_edit_date": 1445457208, "creation_date": 1445455719, "answer_id": 33267641, "question_id": 33267529, "link": "https://stackoverflow.com/questions/33267529/error-while-compiling-in-gcc/33267641#33267641", "title": "Error while compiling in gcc", "body": "<p>Your declarations violate the following rule</p>\n\n<blockquote>\n  <p>3.3.7 Class scope [basic.scope.class] </p>\n  \n  <p>1 The following rules describe the scope of names declared in classes.</p>\n  \n  <p>... </p>\n  \n  <p>2) A name N used in a\n  class S shall refer to the same declaration in its context and when\n  re-evaluated in the completed scope of S. No diagnostic is required\n  for a violation of this rule.</p>\n</blockquote>\n\n<p>At the point of vector declaration name <code>rv</code> refers to a type <code>struct rv</code>. But when reevaluated in the scope of complete class <code>rvs</code> it, refers to class member <code>rvs::rv</code>. Such inconsistency is an error in C++.</p>\n\n<p>A similar error is illustrated by an example in the standard</p>\n\n<pre><code>enum { i = 1 };\n\nclass X {\n  char v[i]; // error: i refers to ::i\n             // but when reevaluated is X::i\n  ...\n  enum { i = 2 };\n};\n</code></pre>\n\n<p>As @Ben Voigt stated in the comment, if you explicitly resolve the conflict between <code>rv</code> as <code>struct rv</code> and <code>rv</code> as <code>rvs::rv</code>, the error will go away. You can do it by either using elaborate type specifier <code>struct rv</code> or by specifying scope explicitly <code>::rv</code>.</p>\n\n<p>Note that this is one of those errors which are not guaranteed/required to be caught by the compiler.</p>\n"}], "owner": {"reputation": 175, "user_id": 4518186, "user_type": "registered", "profile_image": "https://graph.facebook.com/649937893/picture?type=large", "display_name": "Nitin Kashyap", "link": "https://stackoverflow.com/users/4518186/nitin-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 33267641, "answer_count": 2, "score": 0, "last_activity_date": 1445457208, "creation_date": 1445455310, "last_edit_date": 1445455546, "question_id": 33267529, "link": "https://stackoverflow.com/questions/33267529/error-while-compiling-in-gcc", "title": "Error while compiling in gcc", "body": "<p>I am doing a project for my class where the instructor had given us some code snippets and we were asked to modify it. The code compiles correctly in my class computer in Visual Studio but when I try to compile it with gcc it gives me an error.\nThe error I am getting is:</p>\n\n<pre><code>||=== Build: Debug in Project (compiler: GNU GCC Compiler) ===|\n/home/nitin/Read.h|45|error: declaration of \u2018std::vector&lt;rv&gt; rvs::rv\u2019 [-fpermissive]|\n/home/nitin/Read.h|35|error: changes meaning of \u2018rv\u2019 from \u2018struct rv\u2019 [-fpermissive]|\n||=== Build failed: 2 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n\n<p>The code from the error is snippet for this is: </p>\n\n<pre><code>struct rv\n{\n    double val, prob;\n    rv(const double v, const double p): val(v), prob(p) {};\n};\n\n\nstruct rvs\n{\n    int row_n, col_n;\n    vector&lt;rv&gt; rv;\n    rvs(const int r=-2, const int c=-2): row_n(r), col_n(c) {};\n};\n</code></pre>\n\n<p>Could you please let me know what the problem could be?</p>\n"}, {"tags": ["c++", "insert", "set", "duplicates"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1445454857, "post_id": 33267363, "comment_id": 54335955, "body": "What about equal results? You don&#39;t seem to handle that case."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1445454960, "post_id": 33267363, "comment_id": 54336001, "body": "Your logic is flawed (All lines on the x-axis, where x1 = -n and x2 = +n, are the same for any n)"}, {"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1446197157, "post_id": 33267363, "comment_id": 54653267, "body": "Are you intentionally comparing only centers or line segments? Both comparators will say that two different line segments with the same center are equal."}, {"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1446197230, "post_id": 33267363, "comment_id": 54653325, "body": "The std::set duplicates objects because it assumes that &lt; is transitive. i.e: if a &lt; b and b &lt; c then a &lt; c. But your second comparator allows situations where a &lt; b is true, b &lt; c is true and a &lt; c is false eg: a&#39;s center is (3, -5) b&#39;s center is (0, 0) c&#39;s center is (5, -5)"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 0, "last_activity_date": 1445456248, "creation_date": 1445456248, "answer_id": 33267779, "question_id": 33267363, "link": "https://stackoverflow.com/questions/33267363/stdsetinsert-duplicates-using-a-user-defined-class/33267779#33267779", "title": "std::set::insert: duplicates using a user-defined class", "body": "<p>Let's compare the line segment <code>(-n,0):(n,0)</code> to the line segment <code>(-x,-y):(x,y)</code>. So <code>(cx1,cy1)</code> and <code>(cx2,cy2)</code> are both <code>(0,0)</code>. For both implementations of <code>operator&lt;</code>, the result will be <code>false</code> in either direction, which implies that the two line segments are equivalent. That is, any line segment centered at <code>(0,0)</code> is equivalent to every other such line segment?!</p>\n\n<p>This is obviously incorrect. </p>\n\n<p>The simplest thing is to take advantage of <a href=\"http://en.cppreference.com/w/cpp/utility/tuple\" rel=\"nofollow\"><code>std::tuple</code></a> having <code>operator&lt;</code> defined and do:</p>\n\n<pre><code>std::tuple&lt;int, int, int, int&gt; tied() const {\n    // can be just auto in C++14. typically I'd say use std::tie()\n    // but we're dealing with ints right?\n    return std::make_tuple(x1, y1, x2, y2);\n}\n\nbool operator &lt; (const TLineSegment&amp; other) const\n{\n    return tied() &lt; other.tied();\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5472985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d965e0774517808607c7dcb43abff9ad?s=128&d=identicon&r=PG&f=1", "display_name": "Davis", "link": "https://stackoverflow.com/users/5472985/davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445458352, "creation_date": 1445454657, "last_edit_date": 1445455564, "question_id": 33267363, "link": "https://stackoverflow.com/questions/33267363/stdsetinsert-duplicates-using-a-user-defined-class", "title": "std::set::insert: duplicates using a user-defined class", "body": "<p>I am using C++ set container to remove duplicates, but am having a problem with a user-defined class. I defined the comparison operator as below and it works well:</p>\n\n<pre><code>bool operator &lt; (const TLineSegment&amp; other) const\n{\n    int cx1 = (int)((x1 + x2) / 2.0);\n    int cy1 = (int)((y1 + y2) / 2.0);\n    int cx2 = (int)((other.x1 + other.x2) / 2.0);\n    int cy2 = (int)((other.y1 + other.y2) / 2.0);\n\n    if (cx1 == cx2)\n        return (cy1 &lt; cy2);\n    else\n        return (cx1 &lt; cx2);\n}\n</code></pre>\n\n<p>However, the below code by adding more condition (no duplicate within a certain range) contains a very few duplicates. I found it working in most cases, but it sometimes doesn't work, really weird. One case I found was two TLineSegments are the same (but not the same instance) and both of them were inserted. </p>\n\n<pre><code>bool operator &lt; (const TLineSegment&amp; other) const\n{\n    const int epi = 5;\n    int cx1 = (int)((x1 + x2) / 2.0);\n    int cy1 = (int)((y1 + y2) / 2.0);\n    int cx2 = (int)((other.x1 + other.x2) / 2.0);\n    int cy2 = (int)((other.y1 + other.y2) / 2.0);\n\n    if (abs(cx1 - cx2) &lt; epi) {\n        if (abs(cy1 - cy2) &lt; epi) {\n            return false;\n        }\n        else {\n            return (cy1 &lt; cy2);\n        }\n    }\n    else {\n        return (cx1 &lt; cx2);\n    }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1445454868, "post_id": 33267314, "comment_id": 54335960, "body": "One good advice is to value the C++ standard libary. The algorithms and functions in there will easily solve the problem in like ten lines."}, {"owner": {"reputation": 1462, "user_id": 445159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db78d0607a60347d9f61acf0b0451ef?s=128&d=identicon&r=PG", "display_name": "bigtlb", "link": "https://stackoverflow.com/users/445159/bigtlb"}, "edited": false, "score": 0, "creation_date": 1445455026, "post_id": 33267314, "comment_id": 54336044, "body": "If you looped through each character of the string, then everything else could just be in a switch/case statement."}, {"owner": {"reputation": 4032, "user_id": 975741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e07f41c11cd1d02830ccade93b35145c?s=128&d=identicon&r=PG&f=1", "display_name": "trooper", "link": "https://stackoverflow.com/users/975741/trooper"}, "edited": false, "score": 3, "creation_date": 1445455295, "post_id": 33267314, "comment_id": 54336190, "body": "Since you&#39;ve already got a working solution and seem to be asking for ways to rewrite it and make it better, maybe <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a> would be a better fit for this question."}, {"owner": {"reputation": 446, "user_id": 4057042, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r7PPZ.jpg?s=128&g=1", "display_name": "Annadate Piyush", "link": "https://stackoverflow.com/users/4057042/annadate-piyush"}, "edited": false, "score": 0, "creation_date": 1445456014, "post_id": 33267314, "comment_id": 54336584, "body": "better to get another program / class having array index and their symbolic value, So when it encounters you can just replace with its value"}, {"owner": {"reputation": 11, "user_id": 5472948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3b0eb8c2d567d60852852b8a230679?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Cuevas", "link": "https://stackoverflow.com/users/5472948/andre-cuevas"}, "edited": false, "score": 0, "creation_date": 1445459858, "post_id": 33267314, "comment_id": 54338606, "body": "Yeah, this is my first time using stackoverflow, my apologies on the wrong section, and Ill be sure to post this question in codereview. With that being said, I will look into converting my onslaught of if-statements into either a switch/case or treating it like an array. Thanks for the help!"}], "answers": [{"tags": [], "owner": {"reputation": 205, "user_id": 3624389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKcRx.png?s=128&g=1", "display_name": "Dragonrage", "link": "https://stackoverflow.com/users/3624389/dragonrage"}, "is_accepted": false, "score": 0, "last_activity_date": 1445471948, "last_edit_date": 1445471948, "creation_date": 1445467584, "answer_id": 33270530, "question_id": 33267314, "link": "https://stackoverflow.com/questions/33267314/using-loops-to-replace-characters-in-a-string-need-help-optimizing/33270530#33270530", "title": "Using loops to replace characters in a string (need help optimizing)", "body": "<p>you can do all of that in one loop.</p>\n\n<pre><code>int main()\n{\n  string myWord;\n  cout &lt;&lt; \"enter a word: \";\n  cin &gt;&gt; myWord;\n  for(unsigned int i = 0; i &lt; myWord.size(); i++)\n  {\n    if(myWord[i]=='a')\n      myWord[i] = '@';\n    else if(myWord[i] == 'e')\n      myWord[i] = '3';\n    else if(myWord[i] == 'i')\n      myWord[i] = '!';\n    else if(myWord[i] == 'g')\n      myWord[i] = '9';\n    else if(myWord[i] == 's')\n      myWord[i] = '$';\n    else if(myWord[i] == 'x')\n      myWord[i] = '*';\n  }\n  cout &lt;&lt; myWord;\n}\n</code></pre>\n\n<p>see it running here <a href=\"http://cpp.sh/86qh\" rel=\"nofollow\">http://cpp.sh/86qh</a></p>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1445472043, "post_id": 33270648, "comment_id": 54343537, "body": "I would just start out by initializing the substitution map to an equality substitution, then changing the ones I needed to remap."}, {"owner": {"reputation": 4308, "user_id": 7618, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc9a41c5f58d50a7dee1b45b6f7629b6?s=128&d=identicon&r=PG", "display_name": "Jesse Weigert", "link": "https://stackoverflow.com/users/7618/jesse-weigert"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1445472525, "post_id": 33270648, "comment_id": 54343674, "body": "That&#39;s what haavee did in his solution. :-)  There are plenty of ways to do this."}], "tags": [], "owner": {"reputation": 4308, "user_id": 7618, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc9a41c5f58d50a7dee1b45b6f7629b6?s=128&d=identicon&r=PG", "display_name": "Jesse Weigert", "link": "https://stackoverflow.com/users/7618/jesse-weigert"}, "is_accepted": false, "score": 0, "last_activity_date": 1445468324, "creation_date": 1445468324, "answer_id": 33270648, "question_id": 33267314, "link": "https://stackoverflow.com/questions/33267314/using-loops-to-replace-characters-in-a-string-need-help-optimizing/33270648#33270648", "title": "Using loops to replace characters in a string (need help optimizing)", "body": "<p>Not going to provide a full code sample because this smells like a homework assignment.</p>\n\n<p>Most efficient way of doing this would be to create a ASCII substitution map:</p>\n\n<pre><code>const substitution[] = \" !\\\"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@BCD3F9H!JKLMNOPQR$TUVW*YZ[\\]^_`@bcd3f9h!jklmnopqr$tuvw*yz{|}~\";\n</code></pre>\n\n<p>Then just loop through the input and replace each character with the corresponding character in the substitution map:</p>\n\n<pre><code>for (int i = 0; i &lt; myWord.size(); i++)\n{\n    myWord[i] = substitution[myWord[i] - 32];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "is_accepted": false, "score": 1, "last_activity_date": 1445501669, "last_edit_date": 1445501669, "creation_date": 1445469768, "answer_id": 33270917, "question_id": 33267314, "link": "https://stackoverflow.com/questions/33267314/using-loops-to-replace-characters-in-a-string-need-help-optimizing/33270917#33270917", "title": "Using loops to replace characters in a string (need help optimizing)", "body": "<p>Using C++'s standard template library this should be quite easy. Uses <code>std::transform</code> and the <code>std::map&lt;..&gt;</code> associative container.</p>\n\n<p>(assuming C++11 is available <strong>See below for a 'true' C++11 implementation!</strong>)</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\n// A functor (object posing as function call)\nstruct charmapper {\n    charmapper( const std::map&lt;char, char&gt;&amp; cm):\n       charmap( cm )\n    {}\n\n    // If the character 'in' is present in the std::map&lt;&gt;\n    // return the mapped character, otherwise the original character\n    char operator()(char in) const {\n        std::map&lt;char, char&gt;::iterator entry = charmap.find(in);\n        return (entry == charmap.end()) ? in : entry-&gt;second;\n    }\n    std::map&lt;char, char&gt;  charmap;\n};\n\nint main(void) {\n   // Here define your character replacements\n   std::map&lt;char, char&gt;  toreplace{ {'a', '@'}, {'i', '1'} }; // etc\n\n   std::string  input{ \"This is an input string\" };\n   std::string  output;\n\n   // Now transform the input string, using the charmapper functor\n   std::transform(input.begin(), input.end(), std::back_inserter(output),\n                  charmapper(toreplace) );\n\n   // Display to check what transform has done\n   std::cout &lt;&lt; output &lt;&lt; std::endl;\n   return 0;\n}\n</code></pre>\n\n<p>See &amp; run the program here: <a href=\"https://ideone.com/GROl6p\" rel=\"nofollow\">https://ideone.com/GROl6p</a></p>\n\n<p><strong>EDIT:</strong>\nHaving given it some more thought, it could be done even better, using more of C++11's features. The basic idea below is that we decorate <code>std::map</code> with a function call operator; for the transformation nothing <em>but</em> the map should be necessary. This is done by inheriting from <code>std::map</code> and defining <code>operator()</code>.</p>\n\n<p>In this derived class define C++11's forwarding constructor with variadic template arguments. This means that it is possible to create the derived type with <code>std::map</code> 's initializer-list constructor in-situ; no need to create a separate instance of the <code>std::map</code> and the derived (decorated) type.</p>\n\n<p>The code is now type safer and what's more, the 'mapper' is now generic and can trivially be used for any replacement mapping operations.</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nusing std::string; using std::map;\n\ntemplate &lt;typename ...Types&gt;\nstruct mapper : public map&lt;Types...&gt; {\n    typedef map&lt;Types...&gt; Self;\n    using map&lt;Types...&gt;::map;\n\n    // C++11 forwarding constructor!\n    template &lt;typename ...Args&gt;\n    mapper(Args... args) : map&lt;Types...&gt;(args...) {}\n\n    // Decorate the std::map&lt;&gt; with function call operator\n    typename Self::mapped_type operator()(const typename Self::key_type&amp; k) const {\n        typename Self::const_iterator  ptr = this-&gt;find(k);\n        return (ptr==this-&gt;end()) ? typename Self::mapped_type(k) : ptr-&gt;second;\n    }\n};\n\nint main(void) {\n   string  input{ \"This is an input string\" };\n   string  output;\n\n   // Now transform the input string, using the mapperr\n   std::transform(input.begin(), input.end(), std::back_inserter(output),\n                  mapper&lt;string::value_type, string::value_type&gt;({{'a', '@'}, {'i','1'}}) );\n\n   // Display to check what transform has done\n   std::cout &lt;&lt; output &lt;&lt; std::endl;\n   return 0;\n}\n</code></pre>\n\n<p>See it in action here: <a href=\"https://ideone.com/vmON0E\" rel=\"nofollow\">https://ideone.com/vmON0E</a></p>\n"}], "owner": {"reputation": 11, "user_id": 5472948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3b0eb8c2d567d60852852b8a230679?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Cuevas", "link": "https://stackoverflow.com/users/5472948/andre-cuevas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3384, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1445501669, "creation_date": 1445454490, "last_edit_date": 1445468484, "question_id": 33267314, "link": "https://stackoverflow.com/questions/33267314/using-loops-to-replace-characters-in-a-string-need-help-optimizing", "title": "Using loops to replace characters in a string (need help optimizing)", "body": "<p>For one of my CS assignments, I am being told to </p>\n\n<p>\"(1) Get a single word of input from the user. Output the word. If the word contains certain characters, use a loop of your choosing to replace them with the corresponding symbols or numbers. </p>\n\n<p>Example output:</p>\n\n<pre><code>    Enter word: sixteen\n    You entered: sixteen\n    New word: $!*t33n\n</code></pre>\n\n<p>You should support these characters:</p>\n\n<p>a -- @</p>\n\n<p>e -- 3</p>\n\n<p>i -- !</p>\n\n<p>g -- 9</p>\n\n<p>s -- $</p>\n\n<p>x -- *</p>\n\n<p>If your word does not contain any of the above characters, just print the original word again.\"</p>\n\n<p>Now, I was able to figure this out, using a myriad of while and for loops. However, I am under the impression there has to be a more efficient way to complete this task. </p>\n\n<p>Here is the relevant bit of code I am looking to optimize:</p>\n\n<pre><code>while (userWord.find('a') != string::npos) {\n     hasA = userWord.find('a');\n\n  userWord.replace( userWord.find('a'), 1, \"@\");\n\n   if (userWord.find('a') != string::npos) {\n      hasA = userWord.find('a');\n\n      userWord.replace( userWord.find('a'), 1, \"@\");\n   }\n   else if (userWord.find('e') != string::npos) {\n      hasA = userWord.find('e');\n\n      userWord.replace( userWord.find('e'), 1, \"3\");\n   }\n   else if (userWord.find('i') != string::npos) {\n      hasA = userWord.find('i');\n\n      userWord.replace( userWord.find('i'), 1, \"!\");\n   }\n   else if (userWord.find('g') != string::npos) {\n      hasA = userWord.find('g');\n\n      userWord.replace( userWord.find('g'), 1, \"9\");\n   }\n   else if (userWord.find('s') != string::npos) {\n      hasA = userWord.find('s');\n\n      userWord.replace( userWord.find('s'), 1, \"$\");\n   }\n  else if (userWord.find('x') != string::npos) {\n      hasA = userWord.find('x');\n\n      userWord.replace( userWord.find('x'), 1, \"*\");\n   }\n\n}\n\nwhile (userWord.find('e') != string::npos) {\n  hasA = userWord.find('e');\n\n  userWord.replace( userWord.find('e'), 1, \"3\");\n\n  if (userWord.find('a') != string::npos) {\n      hasA = userWord.find('a');\n\n      userWord.replace( userWord.find('a'), 1, \"@\");\n  }\n  else if (userWord.find('e') != string::npos) {\n      hasA = userWord.find('e');\n\n      userWord.replace( userWord.find('e'), 1, \"3\");\n  }\n  else if (userWord.find('i') != string::npos) {\n      hasA = userWord.find('i');\n\n      userWord.replace( userWord.find('i'), 1, \"!\");\n  }\n  else if (userWord.find('g') != string::npos) {\n      hasA = userWord.find('g');\n\n      userWord.replace( userWord.find('g'), 1, \"9\");\n  }\n  else if (userWord.find('s') != string::npos) {\n      hasA = userWord.find('s');\n\n      userWord.replace( userWord.find('s'), 1, \"$\");\n  }\n  else if (userWord.find('x') != string::npos) {\n      hasA = userWord.find('x');\n\n      userWord.replace( userWord.find('x'), 1, \"*\");\n  }\n\n}\n\nwhile (userWord.find('i') != string::npos) {\n  hasA = userWord.find('i');\n\n  userWord.replace( userWord.find('i'), 1, \"!\");\n\nif (userWord.find('a') != string::npos) {\n      hasA = userWord.find('a');\n\n      userWord.replace( userWord.find('a'), 1, \"@\");\n  }\n  else if (userWord.find('e') != string::npos) {\n      hasA = userWord.find('e');\n\n      userWord.replace( userWord.find('e'), 1, \"3\");\n  }\n  else if (userWord.find('i') != string::npos) {\n      hasA = userWord.find('i');\n\n      userWord.replace( userWord.find('i'), 1, \"!\");\n  }\n  else if (userWord.find('g') != string::npos) {\n      hasA = userWord.find('g');\n\n      userWord.replace( userWord.find('g'), 1, \"9\");\n  }\n  else if (userWord.find('s') != string::npos) {\n      hasA = userWord.find('s');\n\n      userWord.replace( userWord.find('s'), 1, \"$\");\n  }\n  else if (userWord.find('x') != string::npos) {\n      hasA = userWord.find('x');\n\n      userWord.replace( userWord.find('x'), 1, \"*\");\n  }\n\n}\n\nwhile (userWord.find('g') != string::npos) {\n  hasA = userWord.find('g');\n\n  userWord.replace( userWord.find('g'), 1, \"9\");\n  if (userWord.find('a') != string::npos) {\n      hasA = userWord.find('a');\n\n      userWord.replace( userWord.find('a'), 1, \"@\");\n  }\n  else if (userWord.find('e') != string::npos) {\n      hasA = userWord.find('e');\n\n      userWord.replace( userWord.find('e'), 1, \"3\");\n  }\n  else if (userWord.find('i') != string::npos) {\n      hasA = userWord.find('i');\n\n      userWord.replace( userWord.find('i'), 1, \"!\");\n  }\n  else if (userWord.find('g') != string::npos) {\n      hasA = userWord.find('g');\n\n      userWord.replace( userWord.find('g'), 1, \"9\");\n  }\n  else if (userWord.find('s') != string::npos) {\n      hasA = userWord.find('s');\n\n      userWord.replace( userWord.find('s'), 1, \"$\");\n  }\n  else if (userWord.find('x') != string::npos) {\n      hasA = userWord.find('x');\n\n      userWord.replace( userWord.find('x'), 1, \"*\");\n  }\n\n}\n\nwhile (userWord.find('s') != string::npos) {\n  hasA = userWord.find('s');\n\n  userWord.replace( userWord.find('s'), 1, \"$\");\n if (userWord.find('a') != string::npos) {\n      hasA = userWord.find('a');\n\n      userWord.replace( userWord.find('a'), 1, \"@\");\n  }\n  else if (userWord.find('e') != string::npos) {\n      hasA = userWord.find('e');\n\n      userWord.replace( userWord.find('e'), 1, \"3\");\n  }\n  else if (userWord.find('i') != string::npos) {\n      hasA = userWord.find('i');\n\n      userWord.replace( userWord.find('i'), 1, \"!\");\n  }\n  else if (userWord.find('g') != string::npos) {\n      hasA = userWord.find('g');\n\n      userWord.replace( userWord.find('g'), 1, \"9\");\n  }\n  else if (userWord.find('s') != string::npos) {\n      hasA = userWord.find('s');\n\n      userWord.replace( userWord.find('s'), 1, \"$\");\n  }\n  else if (userWord.find('x') != string::npos) {\n      hasA = userWord.find('x');\n\n      userWord.replace( userWord.find('x'), 1, \"*\");\n  }\n\n}\n\nwhile (userWord.find('x') != string::npos) {\n  hasA = userWord.find('x');\n\n  userWord.replace( userWord.find('x'), 1, \"*\");\n  if (userWord.find('a') != string::npos) {\n      hasA = userWord.find('a');\n\n      userWord.replace( userWord.find('a'), 1, \"@\");\n  }\n  else if (userWord.find('e') != string::npos) {\n      hasA = userWord.find('e');\n\n      userWord.replace( userWord.find('e'), 1, \"3\");\n  }\n  else if (userWord.find('i') != string::npos) {\n      hasA = userWord.find('i');\n\n      userWord.replace( userWord.find('i'), 1, \"!\");\n  }\n  else if (userWord.find('g') != string::npos) {\n      hasA = userWord.find('g');\n\n      userWord.replace( userWord.find('g'), 1, \"9\");\n  }\n  else if (userWord.find('s') != string::npos) {\n      hasA = userWord.find('s');\n\n      userWord.replace( userWord.find('s'), 1, \"$\");\n  }\n  else if (userWord.find('x') != string::npos) {\n      hasA = userWord.find('x');\n\n      userWord.replace( userWord.find('x'), 1, \"*\");\n  }\n\n}\ncout &lt;&lt; \"New word: \" &lt;&lt; userWord &lt;&lt; endl;\n</code></pre>\n\n<p>There has to be a better way than re-nesting each if-statement after each while-loop to ensure each instance of any of the replaceable letters will actually get replaced. </p>\n\n<p>Any insight would be greatly appreciated!</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "msbuild"], "comments": [{"owner": {"reputation": 5135, "user_id": 3242721, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e611aa36c6efd0568bd7ede8993c538e?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Hosala", "link": "https://stackoverflow.com/users/3242721/michal-hosala"}, "edited": false, "score": 0, "creation_date": 1445638936, "post_id": 33267189, "comment_id": 54423417, "body": "Would it be possible to add contents of any of the affected projects in here so we can see for ourselves? Perhaps one additional question - what is the value of <code>PlatformToolset</code> element in affected vcxproj files?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 5135, "user_id": 3242721, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e611aa36c6efd0568bd7ede8993c538e?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Hosala", "link": "https://stackoverflow.com/users/3242721/michal-hosala"}, "edited": false, "score": 0, "creation_date": 1445640096, "post_id": 33267189, "comment_id": 54423723, "body": "I will post what I can.  Give me a few..."}], "answers": [{"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1445640078, "post_id": 33310954, "comment_id": 54423715, "body": "I am pretty sure than every PlatformToolset value is indeed set to v120, but I will be sure.  This is the first place I started.  Will also double check for duplicates."}, {"owner": {"reputation": 1356, "user_id": 605794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b7c58a37507632eb1d31120a0818ab39?s=128&d=identicon&r=PG", "display_name": "greenback", "link": "https://stackoverflow.com/users/605794/greenback"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1445640928, "post_id": 33310954, "comment_id": 54423976, "body": "PlatformToolset may also be defined in one or more props files so you should check each of these as well."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1445640959, "post_id": 33310954, "comment_id": 54423985, "body": "Oh  @#$#.  I had missed 1 - 1! stupid PlatformToolset define in 1 props file that was shared and it was overwriting all the others to a lower version.  And all magically works when I fixed that one.  Thank you."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1445642267, "post_id": 33310954, "comment_id": 54424368, "body": "Bounty is yours tomorrow."}, {"owner": {"reputation": 1356, "user_id": 605794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b7c58a37507632eb1d31120a0818ab39?s=128&d=identicon&r=PG", "display_name": "greenback", "link": "https://stackoverflow.com/users/605794/greenback"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1445643363, "post_id": 33310954, "comment_id": 54424658, "body": "Appreciated- glad the hours I&#39;ve spent on similar upgrade issues have helped someone else!"}], "tags": [], "owner": {"reputation": 1356, "user_id": 605794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b7c58a37507632eb1d31120a0818ab39?s=128&d=identicon&r=PG", "display_name": "greenback", "link": "https://stackoverflow.com/users/605794/greenback"}, "is_accepted": true, "score": 4, "last_activity_date": 1445635237, "last_edit_date": 1445635237, "creation_date": 1445632402, "answer_id": 33310954, "question_id": 33267189, "link": "https://stackoverflow.com/questions/33267189/visual-studio-using-older-2012-compiler-on-a-project-converted-to-2013/33310954#33310954", "title": "Visual Studio using older 2012 compiler on a project converted to 2013", "body": "<p>Ensure each configuration property group (i.e. each group that defines a build configuration) targets the 2013 compiler in its PlatformToolset element:</p>\n\n<pre><code>&lt;PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\" Label=\"Configuration\"&gt;\n    &lt;PlatformToolset&gt;v120&lt;/PlatformToolset&gt;\n    ...\n&lt;/PropertyGroup&gt;\n</code></pre>\n\n<p>Check also that you do not have duplicate property groups - there should only be one instance of any property group with the same Condition and Label attributes.  .vcxproj files can become fragmented over time due to merging and insertion/deletion of platforms and configurations, with duplicate groups effectively undefining configuration elements defined earlier in the file.  Combine duplicate property groups into a single group.</p>\n\n<p>If you are defining the toolset version in a macro in one of your props files, ensure it is v120.</p>\n\n<p>Also check that your props files are associated with all the project configurations you expect.  You can view which props have been included directly in the ImportGroup element in the vcxproj file for each configuration, or alternatively look in the Property Manager in Visual Studio - expand each Configuration|Platform node to see a list of the props files that have been included.</p>\n\n<p>Finally, if your project has CLR support, set the framework version to v4.5.1:</p>\n\n<pre><code>&lt;Project&gt;\n    &lt;PropertyGroup Label=\"Globals\"&gt;\n        &lt;TargetFrameworkVersion&gt;v4.5.1&lt;/TargetFrameworkVersion&gt;\n        ...\n    &lt;/PropertyGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n"}], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 33310954, "answer_count": 1, "score": 4, "last_activity_date": 1445635237, "creation_date": 1445454090, "question_id": 33267189, "link": "https://stackoverflow.com/questions/33267189/visual-studio-using-older-2012-compiler-on-a-project-converted-to-2013", "title": "Visual Studio using older 2012 compiler on a project converted to 2013", "body": "<p>I have inherited a (small) build system from VS2012 that our team wishes to take to VS2013.  I have run the wizard on the solution to \"convert\" to 2013 and this has dutifully changed the VisualStudioVersion and Project ToolsVersion in various .vcxproj files to \"12.0\" and added a few extra fields here and there with no errors or warnings reported.</p>\n\n<p>But, the IDE is still showing these projects as 2012:</p>\n\n<pre><code>Solution 'foo'\n   Bar (Visual Studio 2012)\n</code></pre>\n\n<p>And the IDE is still allowing me to \"upgrade\" these projects.  I did note that the conversion process also did not touch any .props files and I have gone through and manually updated them, but still it does not seem to be using the latest version of the compiler and the IDE still is confused - or isn't.  </p>\n\n<p>I am an MSBuild newbie here so perhaps this is just a simple missing flag somewhere - hopefully?</p>\n\n<p>Also, I get a ton of schema warnings on first build, but I believe this is a known feature from my research.</p>\n\n<p>What else should I look into here?</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1445453591, "creation_date": 1445453591, "answer_id": 33267038, "question_id": 33266944, "link": "https://stackoverflow.com/questions/33266944/attempt-to-access-an-unitialized-boostmatch-result-class/33267038#33267038", "title": "Attempt to access an unitialized boost::match_result&lt;&gt; class", "body": "<p><a href=\"http://www.boost.org/doc/libs/1_57_0/libs/regex/doc/html/boost_regex/ref/regex_search.html\" rel=\"nofollow\"><code>boost::regex_search</code></a> has a post condition of</p>\n\n<blockquote>\n  <p>If the function returns false, then the effect on parameter m is undefined, otherwise the effects on parameter m are given in the table:</p>\n</blockquote>\n\n<p>So what you need to do is either capture the return from <code>regex_search</code> to make sure it did find something or can can use it as the condition of an if statement like</p>\n\n<pre><code>if(boost::regex_search(line, match, expr)){\n    if(match[\"value\"].matched){\n        cout &lt;&lt; match[\"value\"]&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>If you can use C++11 you can use <a href=\"http://en.cppreference.com/w/cpp/regex/regex_search\" rel=\"nofollow\"><code>std::regex_search</code></a> which will update the match argument even if no matches are found.</p>\n"}], "owner": {"reputation": 305, "user_id": 3142434, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4933dfe4e50f96433e1344f9bd1cc565?s=128&d=identicon&r=PG&f=1", "display_name": "user3142434", "link": "https://stackoverflow.com/users/3142434/user3142434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 33267038, "answer_count": 1, "score": 0, "last_activity_date": 1445453591, "creation_date": 1445453234, "last_edit_date": 1445453449, "question_id": 33266944, "link": "https://stackoverflow.com/questions/33266944/attempt-to-access-an-unitialized-boostmatch-result-class", "title": "Attempt to access an unitialized boost::match_result&lt;&gt; class", "body": "<p>The pattern matches any <code>floating point</code> number with &lt;= 10 digits before the dot.</p>\n\n<pre><code>string pattern = (?&lt;value&gt;([1-9][0-9]{0,9})(,[0-9]+){0,1});\nstring line = \" s - ssd\";\nboost::regex expr{val_pat};\nboost::smatch match;\nboost::regex_search(line, match, expr);\nif(match[\"value\"].matched){\n    cout &lt;&lt; match[\"value\"]&lt;&lt;endl;\n}\n</code></pre>\n\n<p>This code gives me the </p>\n\n<blockquote>\n  <p>Attempt to access an unitialized boost::match_result&lt;> class error.</p>\n</blockquote>\n\n<p>How do I safely extract the named group: value?</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1445453079, "post_id": 33266804, "comment_id": 54334961, "body": "Why doesn&#39;t <code>main()</code> return anything? Also, assignment operator overloads should return a reference to the object getting the assignment."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 2, "creation_date": 1445453257, "post_id": 33266804, "comment_id": 54335056, "body": "@owacoder It&#39;s not necessary to let <code>main()</code> return, it defaults to <code>exit(0);</code>."}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1445453439, "post_id": 33266804, "comment_id": 54335157, "body": "That&#39;s true, but it&#39;s good practice to <code>return</code> values from functions that are defined to return a value!"}, {"owner": {"reputation": 314, "user_id": 1780667, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uI0nx.jpg?s=128&g=1", "display_name": "Deepeshkumar", "link": "https://stackoverflow.com/users/1780667/deepeshkumar"}, "reply_to_user": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1445454269, "post_id": 33266804, "comment_id": 54335669, "body": "@owacoder you are right bout int main().But it is not always necessary for an operator overload to return a value. I am pretty sure about that."}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 1, "creation_date": 1445454403, "post_id": 33266804, "comment_id": 54335726, "body": "Neither of my comments were intended to analyze bugs. There isn&#39;t <i>technically</i> anything wrong with those two things. The code would work just fine (in those respects) without changing them. I was just giving hints for better programming technique."}], "answers": [{"comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 1, "creation_date": 1445453354, "post_id": 33266906, "comment_id": 54335118, "body": "A good argument for decorating your member variables in some manner (flavor to taste)"}, {"owner": {"reputation": 314, "user_id": 1780667, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uI0nx.jpg?s=128&g=1", "display_name": "Deepeshkumar", "link": "https://stackoverflow.com/users/1780667/deepeshkumar"}, "edited": false, "score": 0, "creation_date": 1445454118, "post_id": 33266906, "comment_id": 54335581, "body": "Woho!  that worked! Thank you! Well that was a serious mistake."}], "tags": [], "owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "is_accepted": true, "score": 4, "last_activity_date": 1445453776, "last_edit_date": 1445453776, "creation_date": 1445453093, "answer_id": 33266906, "question_id": 33266804, "link": "https://stackoverflow.com/questions/33266804/failing-to-copy-content-of-a-file-into-another-using-operator-overloading/33266906#33266906", "title": "Failing to copy content of a file into another using operator overloading", "body": "<p>The problem seems to come from the following line in your function <code>setContent</code>:</p>\n\n<pre><code>std::ofstream file(filePath);\n</code></pre>\n\n<p>The variable <code>filepath</code> used is the one passed as argument (the origin path not the destination path). You are trying to do a copy from origin to origin.</p>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 1571671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954f813d353e5f8bc864cbe02bd22ead?s=128&d=identicon&r=PG", "display_name": "Sim&#243;n Gonz&#225;lez Guerra", "link": "https://stackoverflow.com/users/1571671/sim%c3%b3n-gonz%c3%a1lez-guerra"}, "is_accepted": false, "score": 3, "last_activity_date": 1445457425, "last_edit_date": 1445457425, "creation_date": 1445456156, "answer_id": 33267749, "question_id": 33266804, "link": "https://stackoverflow.com/questions/33266804/failing-to-copy-content-of-a-file-into-another-using-operator-overloading/33267749#33267749", "title": "Failing to copy content of a file into another using operator overloading", "body": "<p>I can see several problems in the code you provided:</p>\n\n<ol>\n<li><p>In method setContent the filePath parameter is hiding the member filePath because they have the same name. As it is the method is opening the file given by the filePath parameter (not the file represented by this) and writing the value of parameter content. What you want to do is remove the filePath parameter altogether. This way it will write content to the file represented by this.</p></li>\n<li><p>In the constructor, when you call getline you are not reading the whole content of the file, your are only reading the first line. To read the whole content you should do an iteration reading lines and appending them to your string. You can do that with code like this:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n\n#define BUFF_SIZE 512\n\nstd::string ReadFile(const char* fileName)\n{\n  std::string ret;\n  std::ifstream ifs(fileName);\n  char buff[BUFF_SIZE];\n  do {\n    ifs.read(buff, BUFF_SIZE);\n    ret.append(buff, ifs.gcount());\n  } while (!ifs.eof());\n\n  return ret;\n}\n</code></pre></li>\n<li><p>This is not critical to what you are trying to do but it's good to keep it in mind. In the assignment operator it is a good idea to pass the argument by const reference (const EasyFile&amp; file instead of just EasyFile). You will need to mark your getter methods as const by appending the keyword const at the end of the signature and before the opening brace.</p></li>\n</ol>\n"}], "owner": {"reputation": 314, "user_id": 1780667, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uI0nx.jpg?s=128&g=1", "display_name": "Deepeshkumar", "link": "https://stackoverflow.com/users/1780667/deepeshkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 33266906, "answer_count": 2, "score": 0, "last_activity_date": 1445457425, "creation_date": 1445452697, "last_edit_date": 1445453219, "question_id": 33266804, "link": "https://stackoverflow.com/questions/33266804/failing-to-copy-content-of-a-file-into-another-using-operator-overloading", "title": "Failing to copy content of a file into another using operator overloading", "body": "<p>I am trying to copy contents of one file into another by overloading \"=\" operator.\nI want to do something like when i write, file2 = file1 , the contents of file1 will be written into file2.\nBut my code fails to do so.\nThis is what i have done so far.</p>\n\n<pre><code>class EasyFile{\n    std::string fileContent;\n    char* filePath;\npublic:\n    EasyFile(char* filePath){\n       this-&gt;filePath = filePath;\n       std::fstream file(filePath);\n       getline(file,fileContent);\n    }\n    char* getFilePath(){\n        return filePath;\n    }\n    std::string getFileContent(){\n        return fileContent;\n    }\n    void setContent(std::string content,char* filePath){\n        std::ofstream file(filePath);\n        file&lt;&lt;content;\n    }\n    void operator=(EasyFile f);\n };\nvoid EasyFile::operator=(EasyFile f){\n   this-&gt;setContent(f.getFileContent(),f.getFilePath());\n}\n\nint main(int argc,char** argv)\n {\n   EasyFile efile1(argv[1]);\n   EasyFile efile2(argv[2]);\n   efile2 = efile1;\n   std::string output=\"\";\n   std::ifstream file(argv[2]);\n   std::getline(file,output);\n   std::cout&lt;&lt;output;\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 2, "creation_date": 1445452828, "post_id": 33266782, "comment_id": 54334818, "body": "It&#39;s not really an rvalue: it&#39;s called &quot;universal reference&quot; (or &quot;forwading reference&quot;, but the former expresses the idea better) due to template type deduction and reference collapsing."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1445527828, "post_id": 33266782, "comment_id": 54369906, "body": "@black The correct term is &quot;forwarding reference&quot; (because it should probably be <code>std::forward()</code>-ed). &quot;Universal reference&quot; is something that Scott Meyers uses."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1445455850, "creation_date": 1445455850, "answer_id": 33267678, "question_id": 33266782, "link": "https://stackoverflow.com/questions/33266782/why-does-a-templated-rvalue-reference-accept-lvalues/33267678#33267678", "title": "Why does a templated rvalue reference accept lvalues?", "body": "<p>The rules for deduction of <code>T&amp;&amp;</code> are tricky.</p>\n\n<p>They where designed to make a deduced <code>T&amp;&amp;</code> a \"forwarding reference\" (or \"universal reference\").</p>\n\n<p>First, reference collapsing.  Suppose you have an unknown type X.  For now <code>X</code> is not deduced.</p>\n\n<p>Then if we examine variables of the following type:</p>\n\n<pre><code>typedef X x0;\ntypedef X&amp; x1;\ntypedef X const&amp; x2;\ntypedef X&amp;&amp; x3;\n</code></pre>\n\n<p>and we set <code>X</code> to be one of <code>int</code>, <code>int&amp;</code>, <code>int const&amp;</code> and <code>int&amp;&amp;</code>, we get:</p>\n\n<pre><code>X is ---&gt;  int         int&amp;      int const&amp;      int&amp;&amp;\nX          int         int&amp;      int const&amp;      int&amp;&amp;\nX&amp;         int&amp;        int&amp;      int const&amp;      int&amp;\nX const&amp;   int const&amp;  int&amp;      int const&amp;      int&amp;\nX&amp;&amp;        int&amp;&amp;       int&amp;      int const&amp;      int&amp;&amp;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/6b8f1f7859c260d4\" rel=\"nofollow\">live example</a>.</p>\n\n<p>The next bit comes with the deduction rules.  If you pass <code>X&amp;</code> to <code>T&amp;&amp;</code> in a deduced context, <code>T</code> is deduced to be <code>X&amp;</code>.  This causes <code>T&amp;&amp;</code> to become <code>X&amp;</code> by the above reference collapsing rules.  Similar things happen for <code>X const&amp;</code>.</p>\n\n<p>If you pass <code>X&amp;&amp;</code> to <code>T&amp;&amp;</code>, it deduces <code>T</code> to be <code>X</code>.  <code>T&amp;&amp;</code> becomes <code>X&amp;&amp;</code> as well.</p>\n\n<p>Between the two of them, in a deduced context, <code>template&lt;class T&gt; void foo(T&amp;&amp;t)</code> is a universal reference (well, now called a forwarding reference).</p>\n\n<p>You can recover the r/l value category of <code>t</code> with <code>std::forward&lt;T&gt;(t)</code>, hence the name forwarding reference.</p>\n\n<p>This allows one template to process both l and r values, and use <code>std::forward</code> and similar machinery to behave slightly differently, if you want.</p>\n\n<p>Only processing rvalues requires extra work: you have to use SFINAE or another overload (possibly with <code>=delete</code>).  Only processing lvalues is easy (just deduce with <code>T&amp;</code>).</p>\n"}], "owner": {"reputation": 291, "user_id": 3479305, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/82d0cbb1d59debb4f54c382a8108d3dd?s=128&d=identicon&r=PG&f=1", "display_name": "Vitali", "link": "https://stackoverflow.com/users/3479305/vitali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1445527901, "creation_date": 1445452603, "last_edit_date": 1445527901, "question_id": 33266782, "link": "https://stackoverflow.com/questions/33266782/why-does-a-templated-rvalue-reference-accept-lvalues", "title": "Why does a templated rvalue reference accept lvalues?", "body": "<p>I saw the usage of something like </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\nusing namespace std;\n\ntemplate&lt;typename FN&gt;\nvoid Foo(FN&amp;&amp; Fn)\n{\n    Fn();\n}\n\n\nvoid b()\n{\n    cout &lt;&lt; \"2.\" &lt;&lt; endl;\n}\n\nint main() \n{\n    Foo([](){ cout &lt;&lt; \"1.\" &lt;&lt; endl; });\n    Foo(&amp;b);\n\n    auto c = []() { cout &lt;&lt; \"3.\" &lt;&lt; endl; };\n\n    Foo(c);\n\n    std::function&lt;void(void)&gt; d = c;\n\n    Foo(d);\n\n    return 0;\n}\n</code></pre>\n\n<p>I am fairly sure 'c' is an lvalue, but I could believe that there was some lambda type deduction shenanigans. But I am almost 100% sure, d is an lvalue. </p>\n\n<p>Why does the templated stuff work if the function takes in an rvalue, but d is an lvalue? </p>\n\n<p>Furthermore why would one write Foo's signature like that instead of just</p>\n\n<pre><code>template&lt;typename FN&gt;\nvoid Foo(FN Fn)\n</code></pre>\n"}, {"tags": ["c++", "logging", "glog"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445455508, "post_id": 33266643, "comment_id": 54336306, "body": "did you read the documentation? <a href=\"https://google-glog.googlecode.com/svn/trunk/doc/glog.html\" rel=\"nofollow noreferrer\">google-glog.googlecode.com/svn/trunk/doc/glog.html</a>"}, {"owner": {"reputation": 10570, "user_id": 222279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3bbfbf318fab2f44ff5a51f9851cda10?s=128&d=identicon&r=PG", "display_name": "GregH", "link": "https://stackoverflow.com/users/222279/gregh"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445468584, "post_id": 33266643, "comment_id": 54342501, "body": "There isn&#39;t really anything there that addresses how you specify writing to different files."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1445468970, "post_id": 33266643, "comment_id": 54342631, "body": "Boost log has this functionality."}], "owner": {"reputation": 10570, "user_id": 222279, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3bbfbf318fab2f44ff5a51f9851cda10?s=128&d=identicon&r=PG", "display_name": "GregH", "link": "https://stackoverflow.com/users/222279/gregh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1242, "favorite_count": 2, "answer_count": 0, "score": 5, "last_activity_date": 1445452186, "creation_date": 1445452186, "question_id": 33266643, "link": "https://stackoverflow.com/questions/33266643/is-it-possible-to-use-glog-vlog-and-output-to-multiple-log-files", "title": "Is it possible to use glog/vlog and output to multiple log files?", "body": "<p>We are using Google Logger (glog/vlog C++) to output debug information.  However, we would like to output performance information to a separate log file using glog.  Is this possible?  An example of a standard call to the logger is:</p>\n\n<pre><code> VLOG(1) &lt;&lt; \"This is test glog output\";\n</code></pre>\n\n<p>But this seems to go to stderr/stdout.  Basically is there a way to output glog to more than one output stream/file?</p>\n"}, {"tags": ["c++", "windows", "ffmpeg"], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 5137293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16dcc0d0f8edf897135128358e7c741?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Price", "link": "https://stackoverflow.com/users/5137293/casey-price"}, "is_accepted": true, "score": 2, "last_activity_date": 1445530924, "creation_date": 1445530924, "answer_id": 33285833, "question_id": 33266560, "link": "https://stackoverflow.com/questions/33266560/ffmpeg-set-webcam-encoder-c/33285833#33285833", "title": "FFMPEG Set Webcam Encoder C++", "body": "<p>Solved, I had to init my AVFormatContext first and then open a MJPEG decoder and set the AVFormatContext's video decoder and codec ID before opening it.</p>\n\n<pre><code>AVDictionary* dictionary = NULL;\nav_dict_set(&amp;dictionary, \"video_size\", \"1280x720\", NULL);\nav_dict_set(&amp;dictionary, \"framerate\", \"30\", NULL);\n\nifmt_ctx = avformat_alloc_context();\nifmt_ctx-&gt;video_codec_id = AV_CODEC_ID_MJPEG;\nav_format_set_video_codec(ifmt_ctx, opened_mjpeg_codec);\n\navformat_open_input(&amp;ifmt_ctx, filename, inputFormat, &amp;dictionary);\n</code></pre>\n"}], "owner": {"reputation": 658, "user_id": 5137293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16dcc0d0f8edf897135128358e7c741?s=128&d=identicon&r=PG&f=1", "display_name": "Casey Price", "link": "https://stackoverflow.com/users/5137293/casey-price"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1679, "favorite_count": 0, "accepted_answer_id": 33285833, "answer_count": 1, "score": 0, "last_activity_date": 1445530924, "creation_date": 1445451855, "question_id": 33266560, "link": "https://stackoverflow.com/questions/33266560/ffmpeg-set-webcam-encoder-c", "title": "FFMPEG Set Webcam Encoder C++", "body": "<p>I'm trying to capture a webcam stream using the FFMPEG C API in windows. I can do what I want using the following command line options: </p>\n\n<pre><code>ffmpeg -f dshow -vcodec mjpeg -s 1280x720 -framerate 30 -i video=HX-A1:audio=\"Microphone (HX-A1)\" outputFile.mpg\n</code></pre>\n\n<p>I've started out with the transcoding.c example and got it working for recording a virtual webcam like screen-capture-recorder. However, I need to set the encoder options for my real webcam because it defaults to 160x120 raw video, and I'd prefer a higher resolution. I'm trying the following to set the camera encoder options but it doesn't appear to be doing anything. </p>\n\n<pre><code>AVDictionary *opt = NULL;\nav_dict_set(&amp;opt, \"vcodec\", \"mjpeg\", 0);\nav_dict_set(&amp;opt, \"s\", \"1280x720\", 0);\nav_dict_set(&amp;opt, \"framerate\", \"30\", 0);\nif ((ret = avformat_open_input(&amp;ifmt_ctx, filename, inputFormat, &amp;opt)) &lt; 0) {\n    av_log(NULL, AV_LOG_ERROR, \"Cannot open input file\\n\");\n    return ret;\n}\n</code></pre>\n\n<p>Is there another way to set input options to tell the camera what codec to use as done in my command line example? </p>\n"}, {"tags": ["c#", "c++", "windows", "multithreading", "named-pipes"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1445460968, "post_id": 33266548, "comment_id": 54339204, "body": "In non-blocking mode, ERROR_PIPE_LISTENING is the normal, documented behaviour; it means &quot;no client is attempting to connect at present, try again later&quot;.  But you&#39;re not supposed to use both nonblocking mode and asynchronous mode at the same time anyway.  Asynchronous mode is the preferred choice, even more so in this case since the FileStream class is unlikely to support nonblocking mode."}, {"owner": {"reputation": 14802, "user_id": 800123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bZMq5.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/800123/jack"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1445462733, "post_id": 33266548, "comment_id": 54340157, "body": "The C# application, the client, is opened. That&#39;s why I don&#39;t get the <code>ConnectNamedPipe()</code>  return value. This works just fine if I remove the <code>PIPE_NOWAIT</code> atribute and use 0 (same as <code>PIPE_WAIT</code>, default value). I tried this (<a href=\"http://pastebin.com/03GhwRnJ\" rel=\"nofollow noreferrer\">pastebin.com/03GhwRnJ</a>) just to see if it gets connect after a while trying, but it didn&#39;t. I&#39;ll try to clean up the mess of using asynchronous mode and nonblocking mode at same time..."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1445462944, "post_id": 33266548, "comment_id": 54340273, "body": "That pastebin code won&#39;t work because the call returns zero either way, either with ERROR_PIPE_LISTENING (no client yet) or ERROR_PIPE_CONNECTED (success!) and you aren&#39;t distinguishing between the two cases.  But it&#39;s pretty much moot; you really do need to remove <code>PIPE_NOWAIT</code>.  Hopefully mksteve&#39;s answer will provide you with an alternative."}, {"owner": {"reputation": 14802, "user_id": 800123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bZMq5.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/800123/jack"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1445464578, "post_id": 33266548, "comment_id": 54341055, "body": "Just to see what was last Windows error code after each <code>ConnectNamedPipe()</code> I ran this(<a href=\"http://pastebin.com/Umk4R4hg\" rel=\"nofollow noreferrer\">pastebin.com/Umk4R4hg</a>). I get <code>ERROR_PIPE_LISTENING</code> for a while then <code>ERROR_PIPE_CONNECTED</code>. If break the loop if windows last error code is <code>ERROR_PIPE_CONNECTED</code> I get an exception later on <code>stream.Read()</code> call. I&#39;m remove the <code>PIPE_NOWAIT</code> and try mksteve&#39;s answer."}], "answers": [{"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 1, "last_activity_date": 1445454216, "last_edit_date": 1495540719, "creation_date": 1445454216, "answer_id": 33267234, "question_id": 33266548, "link": "https://stackoverflow.com/questions/33266548/how-do-i-cancel-a-pipe-operation/33267234#33267234", "title": "How do I cancel a PIPE operation?", "body": "<p>In C++ you need to create the file with overlapped io, then <code>WaitForMultipleObjects(..., INFINITE);</code> for a stop event and the IO.</p>\n\n<p>If you get the stop event, then you <code>CancelIO();</code>.</p>\n\n<p>For C# <a href=\"https://msdn.microsoft.com/en-us/library/system.threading.overlapped(v=vs.110).aspx\" rel=\"nofollow noreferrer\">msdn : Overlapped</a> allows you to create an overlapped object (necessary for the read).</p>\n\n<p><a href=\"https://stackoverflow.com/questions/24552548/pinvoke-readfile-overlapped-i-o-operation-is-in-progress\">stackoverflow : pinvoke ReadFile</a>.  This shows how to natively call ReadFile with the overlapped option.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7431171/waithandle-waitany-to-match-waitformultipleobjects-functionality\">stackoverflow : waitformultipleobjects functionality</a> Explains how to call WaitForMultipleObjects.</p>\n\n<p>When solving this sort of problem I created a stand-alone function </p>\n\n<pre><code>ReadFileWithEvent( HANDLE file, VOID * pData, size_t data, HANDLE exitEvent, BOOL &amp; signalled );\n</code></pre>\n\n<p>which packaged creating an overlapped object, waiting and explaining to the caller that the stop had occurred, and the Read had not completed.  This simplified the code I needed.</p>\n"}, {"tags": [], "owner": {"reputation": 14802, "user_id": 800123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bZMq5.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/800123/jack"}, "is_accepted": true, "score": 0, "last_activity_date": 1446328828, "creation_date": 1446328828, "answer_id": 33457105, "question_id": 33266548, "link": "https://stackoverflow.com/questions/33266548/how-do-i-cancel-a-pipe-operation/33457105#33457105", "title": "How do I cancel a PIPE operation?", "body": "<p>I solved this with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365779%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>PeekNamedPipe</code></a>(), I get the number total of bytes available and call  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>ReadFile</code></a>() only if it's > 0. This is a simple approach to emulate nonblocking mode and I can exit the loop running inside a thread just setting <code>done</code> to <code>true</code>.</p>\n\n<p>Something like this:</p>\n\n<pre><code>   while(!done) {\n            DWORD total_available_bytes = 0;\n            if(!PeekNamedPipe(hPipe2, NULL, 0, NULL, &amp;total_available_bytes, NULL)) {\n                /* error handling goes here */\n                break;\n            }\n\n            // for avoid overuse of the CPU, sleep for a while until next check.\n            if(total_available_bytes == 0) {\n                Sleep(500);\n                continue;\n            }\n\n           if(ReadFile(hPipe2, ...)) {\n             // ...\n           }\n}\n</code></pre>\n"}], "owner": {"reputation": 14802, "user_id": 800123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bZMq5.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/800123/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 1, "accepted_answer_id": 33457105, "answer_count": 2, "score": 2, "last_activity_date": 1446328828, "creation_date": 1445451822, "last_edit_date": 1445454047, "question_id": 33266548, "link": "https://stackoverflow.com/questions/33266548/how-do-i-cancel-a-pipe-operation", "title": "How do I cancel a PIPE operation?", "body": "<p>I have a C++ and C# applications where I send command to each one other by using named pipes. It was working well until I noticied I couldn't cancel the <a href=\"https://msdn.microsoft.com/en-us/library/system.io.filestream.read%28v=vs.110%29.aspx\" rel=\"nofollow\"><code>Read()</code></a> call, I was using a stop variable but didn't notice this wasn't all I need because it couldn't read the stop variable state until get off the <a href=\"https://msdn.microsoft.com/en-us/library/system.io.filestream.read%28v=vs.110%29.aspx\" rel=\"nofollow\"><code>Read()</code></a> call. I found I would use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365150%28v=vs.85%29.aspx\" rel=\"nofollow\">PIPE_NOWAIT</a> attribute in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365150%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>CreateNamedPipe()</code></a> call. When I added it the C# throw an  <a href=\"https://msdn.microsoft.com/en-us/library/system.nullreferenceexception%28v=vs.110%29.aspx\" rel=\"nofollow\">System.NullReferenceException</a> because the <code>FileStream</code> was null, it's created from <code>new FileStream(clientHandle, FileAccess.ReadWrite, BUFFER_SIZE, true);</code>  where <code>clientHandle</code> is created as following:</p>\n\n<pre><code>   private void Listen()\n        {\n            while (!exitLoop)\n            {\n                clientHandle = CreateNamedPipe(this.pipeName,\n                                                DUPLEX | FILE_FLAG_OVERLAPPED,\n                                                PIPE_NOWAIT,\n                                                255,\n                                                BUFFER_SIZE,\n                                                BUFFER_SIZE,\n                                                0,\n                                                IntPtr.Zero);\n\n                if (clientHandle.IsInvalid)\n                {\n                    return;\n                }\n\n                int ok = ConnectNamedPipe(clientHandle, IntPtr.Zero);\n\n                //could not connect client\n                if (ok == 0) // here's the error, getLastError() = ERROR_PIPE_LISTENING\n                {\n                    return;\n                }\n                 stream = new FileStream(clientHandle, FileAccess.ReadWrite, BUFFER_SIZE, true);\n              // ....\n        }\n</code></pre>\n\n<p>If matter, in C++ the pipe is created like this:</p>\n\n<pre><code> hPipe1 = CreateFile(lpszPipename1,\n                       GENERIC_WRITE,\n                       0,\n                       NULL,\n                       OPEN_EXISTING,\n                       FILE_FLAG_OVERLAPPED,\n                       NULL);\n    if (!IsValidPipe(hPipe1))\n    {\n         openError();\n         return;\n    }\n\n    hPipe2 = CreateFile(lpszPipename2,\n                       GENERIC_READ,\n                       0,\n                       NULL,\n                       OPEN_EXISTING,\n                       FILE_FLAG_OVERLAPPED,\n                       NULL);\n</code></pre>\n\n<p><strong>So my question is</strong>: the error is <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms681388%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>ERROR_PIPE_LISTENING</code></a> after <code>ConnectNamedPipe()</code> call, happend after I did add <code>PIPE_NOWAIT</code>. Why is that error? how do I fix this? and this the right way to add support to cancel a named-pipe operation? I would kill the theread where <code>Listen()</code> is running in but I read it isn't a good practive (it doesn't even work either).</p>\n\n<p>NOTE: I'm working on existing code base and I would like to avoid rewrite everything using <a href=\"https://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeclientstream%28v=vs.110%29.aspx\" rel=\"nofollow\"><code>NamedPipeClientStream</code></a> for time reasons.</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2015", "gdal", "nmake"], "answers": [{"comments": [{"owner": {"reputation": 4148, "user_id": 222054, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/qTpcy.jpg?s=128&g=1", "display_name": "Kelly Elton", "link": "https://stackoverflow.com/users/222054/kelly-elton"}, "edited": false, "score": 0, "creation_date": 1449524441, "post_id": 34043884, "comment_id": 56035702, "body": "For a reference <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/1039102\" rel=\"nofollow noreferrer\">connect.microsoft.com/VisualStudio/feedback/details/1039102</a>"}, {"owner": {"reputation": 450, "user_id": 5354373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/425a9d6c8e991a0c75ff4d54f8a199b6?s=128&d=identicon&r=PG&f=1", "display_name": "rmkemker", "link": "https://stackoverflow.com/users/5354373/rmkemker"}, "edited": false, "score": 0, "creation_date": 1451748658, "post_id": 34043884, "comment_id": 56878855, "body": "It did build and got rid of the linker error.  I am going to install the python bindings and try it out.  Thanks!"}, {"owner": {"reputation": 450, "user_id": 5354373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/425a9d6c8e991a0c75ff4d54f8a199b6?s=128&d=identicon&r=PG&f=1", "display_name": "rmkemker", "link": "https://stackoverflow.com/users/5354373/rmkemker"}, "edited": false, "score": 0, "creation_date": 1452001911, "post_id": 34043884, "comment_id": 56971689, "body": "The build worked...I am using it with Python support (built the Python bindings separate from <a href=\"https://pypi.python.org/pypi/GDAL/\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/GDAL</a>) which was relatively easy.  Thanks for your help!"}], "tags": [], "owner": {"reputation": 76, "user_id": 5558235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca6c8a8397d2f575e541ff86506f3cef?s=128&d=identicon&r=PG&f=1", "display_name": "Anders Larsolle", "link": "https://stackoverflow.com/users/5558235/anders-larsolle"}, "is_accepted": true, "score": 6, "last_activity_date": 1457704063, "last_edit_date": 1457704063, "creation_date": 1449062694, "answer_id": 34043884, "question_id": 33266542, "link": "https://stackoverflow.com/questions/33266542/linker-error-building-gdal/34043884#34043884", "title": "Linker Error Building GDAL", "body": "<p>I edited nmake.opt:</p>\n\n<p>I replaced line 667 ... :</p>\n\n<pre><code>!IFDEF ODBC_SUPPORTED  \nODBCLIB = odbc32.lib odbccp32.lib user32.lib  \n!ENDIF\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>!IFDEF ODBC_SUPPORTED  \n!IF $(MSVC_VER) &lt; 1900  \nODBCLIB = odbc32.lib odbccp32.lib user32.lib  \n!ELSE  \nODBCLIB = legacy_stdio_definitions.lib odbc32.lib odbccp32.lib user32.lib  \n!ENDIF  \n!ENDIF\n</code></pre>\n\n<p>/Anders</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 6301917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d947e52738864a2e1ff80b36cad55823?s=128&d=identicon&r=PG", "display_name": "escolano", "link": "https://stackoverflow.com/users/6301917/escolano"}, "is_accepted": false, "score": 7, "last_activity_date": 1469008017, "last_edit_date": 1469008017, "creation_date": 1462563852, "answer_id": 37080275, "question_id": 33266542, "link": "https://stackoverflow.com/questions/33266542/linker-error-building-gdal/37080275#37080275", "title": "Linker Error Building GDAL", "body": "<p>GDAL-2.1.0 already has a similar change on nmake.opt</p>\n\n<pre><code>!IFDEF ODBC_SUPPORTED\n!IF $(MSVC_VER) &gt;= 1900\n# legacy_stdio_definitions.lib : https://connect.microsoft.com/VisualStudio/feedback/details/1134693/vs-2015-ctp-5-c-vsnwprintf-s-and-other-functions-are-not-exported-in-appcrt140-dll-breaking-linkage-of-static-libraries\nODBCLIB = legacy_stdio_definitions.lib odbc32.lib odbccp32.lib user32.lib\n!ELSE\nODBCLIB = odbc32.lib odbccp32.lib user32.lib\n!ENDIF\n!ENDIF\n</code></pre>\n\n<p>but you must also specify the Visual Studio version from the command line with parameter MSVC_VER.\ne.g. for Visual Studio 2015 (MSVC_VER==1900) use  this command line to compile</p>\n\n<pre><code>nmake -f makefile.vc MSVC_VER=1900\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 6036426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d80c5cdc9b715e6c5888a0533a7cd09?s=128&d=identicon&r=PG&f=1", "display_name": "SteveEng", "link": "https://stackoverflow.com/users/6036426/steveeng"}, "is_accepted": false, "score": 0, "last_activity_date": 1465977424, "creation_date": 1465977424, "answer_id": 37829371, "question_id": 33266542, "link": "https://stackoverflow.com/questions/33266542/linker-error-building-gdal/37829371#37829371", "title": "Linker Error Building GDAL", "body": "<p>In addition to the above, I also had to make the following modification to the nmake.opt file:</p>\n\n<p>the line that says </p>\n\n<pre><code>!IFNDEF MSVC_VER\n#assume msvc VS2008.\nMSVC_VER=1500\n!ENDIF\n</code></pre>\n\n<p>Should be changed to:</p>\n\n<pre><code>!IFNDEF MSVC_VER\n#assume msvc VS2015.\nMSVC_VER=1900\n!ENDIF\n</code></pre>\n"}], "owner": {"reputation": 450, "user_id": 5354373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/425a9d6c8e991a0c75ff4d54f8a199b6?s=128&d=identicon&r=PG&f=1", "display_name": "rmkemker", "link": "https://stackoverflow.com/users/5354373/rmkemker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3331, "favorite_count": 3, "accepted_answer_id": 34043884, "answer_count": 3, "score": 5, "last_activity_date": 1469008017, "creation_date": 1445451806, "question_id": 33266542, "link": "https://stackoverflow.com/questions/33266542/linker-error-building-gdal", "title": "Linker Error Building GDAL", "body": "<p>I am building GDAL from source using the MSVC 2015 64-bit command prompt.  I am using Windows 8.  Part way through the build, I get the following error:</p>\n\n<pre><code>Creating library gdal_i.lib and object gdal_i.exp\nodbccp32.lib(dllload.obj) : error LNK2019: unresolved external symbol _vsnwprintf_s referenced in function StringCchPrintfW\ngdal201.dll : fatal error LNK1120: 1 unresolved externals\nNMAKE : fatal error U1077: '\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64\\link.EXE\"' : return code '0x460'\nStop.\n</code></pre>\n\n<p>I have read on the Microsoft Site and GDAL Git issues section that this was a problem with the 2014 MSVC and pre-release version of MSVC 2015, but the issue was supposed to be resolved prior to the final release of MSVC 2015.</p>\n\n<ul>\n<li><a href=\"https://github.com/mapbox/windows-builds/issues/53\" rel=\"noreferrer\">https://github.com/mapbox/windows-builds/issues/53</a></li>\n<li><a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/1134693/vs-2015-ctp-5-c-vsnwprintf-s-and-other-functions-are-not-exported-in-appcrt140-dll-breaking-linkage-of-static-libraries\" rel=\"noreferrer\">https://connect.microsoft.com/VisualStudio/feedback/details/1134693/vs-2015-ctp-5-c-vsnwprintf-s-and-other-functions-are-not-exported-in-appcrt140-dll-breaking-linkage-of-static-libraries</a></li>\n</ul>\n\n<p>I don't seem to be the only person with this issue, but I am also not seeing a solution (besides reverting to an older version of MSVC such as 2013).  Has anybody had any luck getting GDAL to build using MSVC 2015 (64 bit)?</p>\n"}, {"tags": ["c++", "templates", "gcc", "template-instantiation"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1445451307, "post_id": 33266353, "comment_id": 54333977, "body": "Why not use separate functions?"}, {"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1445454078, "post_id": 33266353, "comment_id": 54335558, "body": "Unless you have a very good reason to make archive a separate function, I&#39;d recommend doing it other way round: using a virtual method of a class you want to achieve (and an ABC/Interface for all classes that can be achieved). That&#39;s what I&#39;d use."}], "answers": [{"comments": [{"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1445451844, "post_id": 33266454, "comment_id": 54334268, "body": "I believe at the time I decided to go with templates because of the inverse process, unarchiving. I could write <code>unarchive&lt;Header&gt;()</code>, instead of <code>unarchive_header()</code>. I think the first form is more convenient"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1445522559, "post_id": 33266454, "comment_id": 54366074, "body": "@Andr&#233;Fratelli Why do you think you have to write <code>unarchive_header()</code>? Just write <code>unarchive()</code>."}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1445522954, "post_id": 33266454, "comment_id": 54366307, "body": "Because <code>Header</code> is not the only unarchivable class and this function wouldn&#39;t be overridable because it does not get any parameters"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 5, "last_activity_date": 1445451412, "creation_date": 1445451412, "answer_id": 33266454, "question_id": 33266353, "link": "https://stackoverflow.com/questions/33266353/template-function-for-full-specialization/33266454#33266454", "title": "Template function for full specialization", "body": "<p>Just don't use templates:</p>\n\n<pre><code>// Header.h\nvoid archive(Archiver &amp; archiver, const Header &amp; obj);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// Header.cpp\nvoid archive(Archiver &amp; archiver, const Header &amp; obj)\n{\n // Code here\n}\n</code></pre>\n\n<p>Much simpler that way. Simply make an unqualified call to <code>archive()</code> and make sure this overload is declared in the same namespace as <code>Header</code>  and let ADL do its magic. </p>\n"}, {"comments": [{"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1445451762, "post_id": 33266497, "comment_id": 54334227, "body": "That second approach gives &quot;undefined reference&quot; at the calling point. I&#39;m still looking into not using templates."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1445452182, "post_id": 33266497, "comment_id": 54334425, "body": "@Andr&#233;Fratelli, See Update."}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1445452917, "post_id": 33266497, "comment_id": 54334869, "body": "Could you make it work with gcc instead? I&#39;ve tried adding the <code>-lstdc++</code> compiler flag. I didn&#39;t mention it initially (it didn&#39;t seem relevant) but I&#39;m using Gradle to build for Android. I&#39;m also looking into how to switch to g++ with gradle"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1445453165, "post_id": 33266497, "comment_id": 54335016, "body": "@Andr&#233;Fratelli, It doesn&#39;t make sense to compile C++ code with <code>gcc</code>. You should figure out how to use <code>g++ </code>in your development tool. I am not familiar with it."}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1445453341, "post_id": 33266497, "comment_id": 54335110, "body": "I know, but then I saw <a href=\"http://stackoverflow.com/a/3206195/2328352\">this</a>. I&#39;m already looking into how to use g++"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1445452167, "last_edit_date": 1445452167, "creation_date": 1445451601, "answer_id": 33266497, "question_id": 33266353, "link": "https://stackoverflow.com/questions/33266353/template-function-for-full-specialization/33266497#33266497", "title": "Template function for full specialization", "body": "<p><strong>Why use a function template?</strong></p>\n\n<p>You said:</p>\n\n<blockquote>\n  <p>The idea is to have a base template declaration which each class then specialises to its own types.</p>\n</blockquote>\n\n<p>If a function template does not have a default implementation, it is pointless to have one at all. You can just use:</p>\n\n<pre><code>extern void archive(Archiver &amp; archiver, const Header &amp; obj);\n</code></pre>\n\n<p>when you need it.</p>\n\n<p><strong>If you must use a function template</strong></p>\n\n<p>The line</p>\n\n<pre><code>extern template void archive(Archiver &amp; archiver, const Header &amp; obj);\n</code></pre>\n\n<p>is not right. It needs to be:</p>\n\n<pre><code>template &lt;&gt; void archive&lt;Header&gt;(Archiver &amp; archiver, const Header &amp; obj);\n</code></pre>\n\n<p>The implementation needs to use the same signature.</p>\n\n<pre><code>template &lt;&gt; void archive&lt;Header&gt;(Archiver &amp; archiver, const Header &amp; obj)\n{\n}\n</code></pre>\n\n<p><strong>Update, in response to OP's comment</strong></p>\n\n<p>I tried the following to simulate your situation.</p>\n\n<p>socc.h:</p>\n\n<pre><code>#pragma once\n\nstruct Archiver {};\n\ntemplate &lt;class T&gt; void archive(Archiver &amp; archiver, const T &amp; obj);\n\nstruct Header {};\n\ntemplate &lt;&gt; void archive&lt;Header&gt;(Archiver &amp; archiver, const Header &amp; obj);\n</code></pre>\n\n<p>socc.cc:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include \"socc.h\"\n\nint main()\n{\n   Archiver ar;\n   Header obj;\n   archive(ar, obj);\n}\n</code></pre>\n\n<p>socc-2.cc:</p>\n\n<pre><code>#include \"socc.h\"\n\ntemplate &lt;&gt; void archive&lt;Header&gt;(Archiver &amp; archiver, const Header &amp; obj)\n{\n}\n</code></pre>\n\n<p>Command to build:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>g++ -std=c++11 -Wall    socc.cc  socc-2.cc -o socc\n</code></pre>\n\n<p>The program was built successfully.</p>\n"}, {"tags": [], "owner": {"reputation": 2630, "user_id": 5053331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9a0047e09056279f06b7fb3b0c101e?s=128&d=identicon&r=PG&f=1", "display_name": "cdonat", "link": "https://stackoverflow.com/users/5053331/cdonat"}, "is_accepted": false, "score": 0, "last_activity_date": 1445451817, "creation_date": 1445451817, "answer_id": 33266547, "question_id": 33266353, "link": "https://stackoverflow.com/questions/33266353/template-function-for-full-specialization/33266547#33266547", "title": "Template function for full specialization", "body": "<p>In this case I think, overloading simply does the trick. You don't really need templates here.</p>\n\n<pre><code>void archive(Archiver &amp; archiver, const Header &amp; obj);\nvoid archive(Archiver &amp; archiver, const Footer &amp; obj);\nvoid archive(Archiver &amp; archiver, const Whatever &amp; obj);\n</code></pre>\n"}], "owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1480259734, "creation_date": 1445451057, "last_edit_date": 1480259734, "question_id": 33266353, "link": "https://stackoverflow.com/questions/33266353/template-function-for-full-specialization", "title": "Template function for full specialization", "body": "<p>I have a function template declared in an header file. This function is an archiver which is supposed to support several other types (classes) implemented through the project. The idea is to have a base template declaration which each class then specialises to its own types.</p>\n\n<pre><code>// Archiver.h\ntemplate &lt;class T&gt; void archive(Archiver &amp; archiver, const T &amp; obj);\n</code></pre>\n\n<p>This method does not have an implementation. Now I create a class (say, <code>Header</code>) and I want it to be archivable. As such, it is my intent to specialise the method. Here's what I have now:</p>\n\n<pre><code>// Header.h\nextern template void archive(Archiver &amp; archiver, const Header &amp; obj);\n</code></pre>\n\n<p>I declare the function as <code>extern</code> because I implement it in the .cpp file</p>\n\n<pre><code>// Header.cpp\ntemplate &lt;&gt; void archive(Archiver &amp; archiver, const Header &amp; obj)\n{\n // Code here\n}\n</code></pre>\n\n<p>This gives <code>specialization after instantiation</code>. I've tried other combinations as well:</p>\n\n<ol>\n<li>Implementing directly in the header file, as is usually recommended for templates: I get \"multiple definition\"</li>\n<li>Implementation in the .cpp file without a declaration on the header: I get <code>undefined reference</code> when calling the method from another compilation unit</li>\n</ol>\n\n<p>So what is the correct of implementing this?</p>\n\n<p>Edit:</p>\n\n<p>Initially I decided to go with templates because of the inverse process, unarchiving. Basically I could write <code>unarchive&lt;Header&gt;()</code> instead of <code>unarchive_header()</code> which seemed more appropriate.</p>\n\n<p>I believe I should also mention that I'm compiling this using Android Studio and the Gradle build system, which is why I'm using gcc and not g++. I also gave gcc the following compiler flags:</p>\n\n<pre><code>-std=gnu++11 -fexceptions -fpermissive -lstdc++\n</code></pre>\n\n<p><code>-fpermissive</code> was an act of despair.</p>\n"}, {"tags": ["c++", "boost", "intervals"], "answers": [{"comments": [{"owner": {"reputation": 3414, "user_id": 1282931, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/7TwwM.jpg?s=128&g=1", "display_name": "matthias_buehlmann", "link": "https://stackoverflow.com/users/1282931/matthias-buehlmann"}, "edited": false, "score": 0, "creation_date": 1445451315, "post_id": 33266284, "comment_id": 54333982, "body": "oh I see, this makes sense! in that case, is there a way to get the highest element of a discrete interval that is still part of the interval?"}], "tags": [], "owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "is_accepted": true, "score": 5, "last_activity_date": 1445452415, "last_edit_date": 1445452415, "creation_date": 1445450773, "answer_id": 33266284, "question_id": 33266057, "link": "https://stackoverflow.com/questions/33266057/removing-discrete-closed-intervals-from-boosticlinterval-set/33266284#33266284", "title": "removing discrete closed intervals from boost::icl::interval_set", "body": "<p>Subtracting one closed interval from another, in your case results in two half-open intervals. If you think about it, it is consistent with the behaviour of continuous intervals as well. </p>\n\n<p>You can test this with the following code:</p>\n\n<pre><code> std::cout &lt;&lt; test_set.begin()-&gt;bounds() &lt;&lt; \"\\n\";\n std::cout &lt;&lt; (++test_set.begin())-&gt;bounds() &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>This outputs: <code>[)</code> and <code>(]</code> showing that the resulting intervals are half-open, meaning that <code>12</code> and <code>18</code> are not included in your interval set.</p>\n\n<p>To get the first/last elements of the (possibly open) discrete interval, use the functions <code>first</code> and <code>last</code> (docs <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/icl/doc/html/boost_icl/function_reference/range.html\" rel=\"noreferrer\">here</a>):</p>\n\n<pre><code>uint i1min = boost::icl::first(*test_set.begin());\nuint i1max = boost::icl::last(*test_set.begin());\nuint i2min = boost::icl::first(*(++test_set.begin()));\nuint i2max = boost::icl::last(*(++test_set.begin()));\n</code></pre>\n"}], "owner": {"reputation": 3414, "user_id": 1282931, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/7TwwM.jpg?s=128&g=1", "display_name": "matthias_buehlmann", "link": "https://stackoverflow.com/users/1282931/matthias-buehlmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 1, "accepted_answer_id": 33266284, "answer_count": 1, "score": 2, "last_activity_date": 1445452415, "creation_date": 1445449958, "last_edit_date": 1445450085, "question_id": 33266057, "link": "https://stackoverflow.com/questions/33266057/removing-discrete-closed-intervals-from-boosticlinterval-set", "title": "removing discrete closed intervals from boost::icl::interval_set", "body": "<pre><code>  boost::icl::interval_set&lt;uint&gt; test_set;\n  test_set.insert(boost::icl::discrete_interval&lt;uint&gt;::closed(10u, 20u));\n  test_set.insert(boost::icl::discrete_interval&lt;uint&gt;::closed(21u, 30u)); //should merge to single interval\n  test_set.insert(boost::icl::discrete_interval&lt;uint&gt;::closed(15u, 25u)); //should not change\n  test_set.erase(boost::icl::discrete_interval&lt;uint&gt;::closed(12u, 18u)); //should split in two intervals\n  uint i1min = test_set.begin()-&gt;lower();\n  uint i1max = test_set.begin()-&gt;upper();\n  uint i2min = (++test_set.begin())-&gt;lower();\n  uint i2max = (++test_set.begin())-&gt;upper();\n  std::cout&lt;&lt;i1min&lt;&lt;\"\\n\";\n  std::cout&lt;&lt;i1max&lt;&lt;\"\\n\";\n  std::cout&lt;&lt;i2min&lt;&lt;\"\\n\";\n  std::cout&lt;&lt;i2max&lt;&lt;\"\\n\";\n</code></pre>\n\n<p>since I am adding and subtracting closed intervals, I would expect the following output:</p>\n\n<pre><code>10\n11\n19\n30\n</code></pre>\n\n<p>but instead I get:</p>\n\n<pre><code>10\n12\n18\n30\n</code></pre>\n\n<p>why do the endpoints of the interval I am removing remain? Is this the expected behaviour with subtracting closed intervals or am I doing something wrong?</p>\n"}, {"tags": ["c++", "c", "linker", "cairo", "xlib"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445449602, "post_id": 33265930, "comment_id": 54333016, "body": "Did you check to make sure <code>surface</code> is a valid pointer?"}, {"owner": {"reputation": 2480, "user_id": 1561081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/acd9e93464c089acdf36bf1d8ce793c9?s=128&d=identicon&r=PG", "display_name": "lrleon", "link": "https://stackoverflow.com/users/1561081/lrleon"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445449923, "post_id": 33265930, "comment_id": 54333200, "body": "Yes! It is valid in the sense that it is not NULL and it points to a readable address. More about its validity I&#39;m unable to say because I do not know cairo. However, I remark that this code works perfectly when all the libraries are dynamically linked"}, {"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1445450965, "post_id": 33265930, "comment_id": 54333773, "body": "Are you sure that the program has write access to a file file_name and this file isn&#39;t opened in another application?"}, {"owner": {"reputation": 2480, "user_id": 1561081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/acd9e93464c089acdf36bf1d8ce793c9?s=128&d=identicon&r=PG", "display_name": "lrleon", "link": "https://stackoverflow.com/users/1561081/lrleon"}, "edited": false, "score": 0, "creation_date": 1445457630, "post_id": 33265930, "comment_id": 54337406, "body": "Yes I am. I verified that"}, {"owner": {"reputation": 3870, "user_id": 773849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc313492ba01cdb794a218eeeeab8ee?s=128&d=identicon&r=PG", "display_name": "Alex Barker", "link": "https://stackoverflow.com/users/773849/alex-barker"}, "edited": false, "score": 0, "creation_date": 1498264761, "post_id": 33265930, "comment_id": 76445924, "body": "Can you add a backtrace?"}], "answers": [{"tags": [], "owner": {"reputation": 3870, "user_id": 773849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afc313492ba01cdb794a218eeeeab8ee?s=128&d=identicon&r=PG", "display_name": "Alex Barker", "link": "https://stackoverflow.com/users/773849/alex-barker"}, "is_accepted": true, "score": 1, "last_activity_date": 1502738739, "creation_date": 1502738739, "answer_id": 45681666, "question_id": 33265930, "link": "https://stackoverflow.com/questions/33265930/seg-fault-in-cairo-when-using-some-static-libraries/45681666#45681666", "title": "Seg fault in cairo when using some static libraries", "body": "<p>I did just patch a crash on linux due to xcb in the 2.1 branch.  That may fix your issue when 2.1.1.  I would recommend trying 2.0 which does not contain xcb to see if that fixes your problem.</p>\n"}], "owner": {"reputation": 2480, "user_id": 1561081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/acd9e93464c089acdf36bf1d8ce793c9?s=128&d=identicon&r=PG", "display_name": "lrleon", "link": "https://stackoverflow.com/users/1561081/lrleon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 45681666, "answer_count": 1, "score": 0, "last_activity_date": 1502738739, "creation_date": 1445449518, "last_edit_date": 1495541029, "question_id": 33265930, "link": "https://stackoverflow.com/questions/33265930/seg-fault-in-cairo-when-using-some-static-libraries", "title": "Seg fault in cairo when using some static libraries", "body": "<p>I have the following routine for taking a screenshot:</p>\n\n<pre><code>void take_screenshot(const std::string &amp; file_name)\n{\n  Display *disp;\n  Window root;\n  cairo_surface_t *surface;\n  int scr;\n\n  disp = XOpenDisplay(nullptr);\n  scr = DefaultScreen(disp);\n  root = DefaultRootWindow(disp);\n\n  surface = cairo_xlib_surface_create(disp, root, DefaultVisual(disp, scr),\n                      DisplayWidth(disp, scr), \n                      DisplayHeight(disp, scr));\n  cairo_surface_write_to_png(surface, file_name.c_str()); // &lt;-- here is the seg fault\n  cairo_surface_destroy(surface);\n}\n</code></pre>\n\n<p>This routine was taken from the answer of <a href=\"https://stackoverflow.com/users/436275/uli-schlachter\">https://stackoverflow.com/users/436275/uli-schlachter</a> to this question <a href=\"https://stackoverflow.com/questions/15507788/making-a-screenshot-using-xlib-and-cairo-libs-fail\">Making a screenshot using Xlib and Cairo libs [fail]</a> (credits to the authors)</p>\n\n<p>The routine is part of a program called <code>collector</code>. which is linked as follows:</p>\n\n<pre><code>clang -o collector -g -O2 -fno-strict-aliasing collector.o common-vars.o \\\ncollector-events.o listeners.o active_window.o \\\n../lib/libperfq-common.a -lPocoNet -lPocoFoundation -luiohook\\\n-lstdc++ -lgsl -lgslcblas -lm -lcairo -lXt -lXtst -lXinerama \\\n-lX11 -lpthread -lc\n</code></pre>\n\n<p>So far so good. The program works very well.</p>\n\n<p>However, when I statically link the poco and uiohook libraries, the program throws a seg fault at the line indicated above. </p>\n\n<p>The executable with poco and uiohook libraries statically linked is produced as follows:</p>\n\n<pre><code>clang -o collector -g -O2 -fno-strict-aliasing collector.o \\\ncommon-vars.o collector-events.o listeners.o active_window.o \\\n../lib/libperfq-common.a /home/lrleon/poco/lib/libPocoNet.a \\\n/home/lrleon/poco/lib/libPocoFoundation.a \\\n/home/lrleon/uiohook/lib/libuiohook.a -lstdc++ -lgsl -lgslcblas \\\n-lm -lcairo -lXt -lXtst -lXinerama -lX11 -lpthread -lc\n</code></pre>\n\n<p>With this version, I have a segfault. And after switching some dynamic libraries, watch with a debugger, I do know what is causing the error.</p>\n\n<p>I guess the fact that some libraries statically chained make the call to <code>cairo_surface_write_to_png()</code> fails. But I have no idea why.</p>\n\n<p>Any idea? Thanks in advance</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1445449270, "post_id": 33265814, "comment_id": 54332807, "body": "It must be that the line <code>state_s *state = new state_s;</code> is not really being executed, or <code>state</code> is being reset to null somehow, or else you have undefined behaviour somewhere. Can you show a complete self-contained example?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1445449288, "post_id": 33265814, "comment_id": 54332817, "body": "Please <b><a href=\"https://stackoverflow.com/posts/33265814/edit\">edit</a></b> your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 2043, "user_id": 1516116, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Q1EHF.png?s=128&g=1", "display_name": "Validus Oculus", "link": "https://stackoverflow.com/users/1516116/validus-oculus"}, "edited": false, "score": 0, "creation_date": 1445449421, "post_id": 33265814, "comment_id": 54332896, "body": "function *_function; What is function? Is that std::function. Then you should provide template arguments."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 2043, "user_id": 1516116, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Q1EHF.png?s=128&g=1", "display_name": "Validus Oculus", "link": "https://stackoverflow.com/users/1516116/validus-oculus"}, "edited": false, "score": 0, "creation_date": 1445449492, "post_id": 33265814, "comment_id": 54332933, "body": "@MuratKaraku\u015f That depends on what <code>function</code> is in his case."}, {"owner": {"reputation": 2043, "user_id": 1516116, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Q1EHF.png?s=128&g=1", "display_name": "Validus Oculus", "link": "https://stackoverflow.com/users/1516116/validus-oculus"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1445449646, "post_id": 33265814, "comment_id": 54333041, "body": "@BaummitAugen you are right, I made an assumption that he is using std::function."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445449720, "post_id": 33265814, "comment_id": 54333090, "body": "To print a pointer in C using <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>printf</code></a> use the <code>&quot;%p&quot;</code> format. Or use <code>std::cout</code> and cast the pointer to <code>void *</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1445451037, "post_id": 33265814, "comment_id": 54333819, "body": "@JoachimPileborg, no need to cast pointer to void* unless you are <code>cout</code>ing <code>[const] char*</code> pointers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1445451249, "post_id": 33265814, "comment_id": 54333937, "body": "You might eliminate pointers from your source code wherever you can (to get rid of potential trouble)"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1445452305, "post_id": 33265814, "comment_id": 54334493, "body": "You don&#39;t even show how you&#39;re calling <code>DeclarVar()</code>, how could we possibly know what the problem is?"}, {"owner": {"reputation": 159, "user_id": 4135957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003307910037/picture?type=large", "display_name": "Guilherme Nemeth", "link": "https://stackoverflow.com/users/4135957/guilherme-nemeth"}, "edited": false, "score": 0, "creation_date": 1445452876, "post_id": 33265814, "comment_id": 54334847, "body": "I pasted the whole code now. Note that if i just comment out the parts of the code that i&#39;m using <code>_ls-&gt;_vars</code> this code runs perfectly. This is also only a partial class because that is a piece of a toy interpreter that i&#39;m writing. <code>Function</code> is a custom struct, not <code>std::function</code>."}, {"owner": {"reputation": 159, "user_id": 4135957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003307910037/picture?type=large", "display_name": "Guilherme Nemeth", "link": "https://stackoverflow.com/users/4135957/guilherme-nemeth"}, "edited": false, "score": 0, "creation_date": 1445514619, "post_id": 33265814, "comment_id": 54360942, "body": "I updated the code, and even one line after creating <code>new LexState</code>, the unordered map has address 0, so I think most of the rest of the code is unecessary, but it&#39;s still here anyway. I still haven&#39;t found a way around this. Thanks for the help so far and for future help also."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445450982, "post_id": 33265976, "comment_id": 54333784, "body": "It crashes because the object was not properly allocated, or deleted after it was allocated."}, {"owner": {"reputation": 159, "user_id": 4135957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003307910037/picture?type=large", "display_name": "Guilherme Nemeth", "link": "https://stackoverflow.com/users/4135957/guilherme-nemeth"}, "edited": false, "score": 0, "creation_date": 1445451789, "post_id": 33265976, "comment_id": 54334243, "body": "Doing this it prints this: <code>0000000000000000</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 159, "user_id": 4135957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003307910037/picture?type=large", "display_name": "Guilherme Nemeth", "link": "https://stackoverflow.com/users/4135957/guilherme-nemeth"}, "edited": false, "score": 0, "creation_date": 1445452598, "post_id": 33265976, "comment_id": 54334668, "body": "@GuilhermeNemeth, It&#39;s difficult to diagnose how the program got to that state without a  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. How can we figure out what <code>_ls</code> points to without an MCVE? You can add a check <code>if ( _ls != nullptr )</code> before accessing <code>_ls-&gt;var</code>. That might be helpful. I don&#39;t know what else to offer."}, {"owner": {"reputation": 159, "user_id": 4135957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003307910037/picture?type=large", "display_name": "Guilherme Nemeth", "link": "https://stackoverflow.com/users/4135957/guilherme-nemeth"}, "edited": false, "score": 0, "creation_date": 1445453503, "post_id": 33265976, "comment_id": 54335190, "body": "I did that, still got the same crash error. And the condition was true."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1445450174, "last_edit_date": 1445450174, "creation_date": 1445449708, "answer_id": 33265976, "question_id": 33265814, "link": "https://stackoverflow.com/questions/33265814/stdunordered-map-as-a-struct-member-has-address-0/33265976#33265976", "title": "std::unordered_map as a struct member has address 0", "body": "<p><code>%i</code> is not the right format specifier to use to print a pointer. You are most likely getting the output that represents a truncated value of the pointer. Use <code>%p</code> instead.</p>\n\n<pre><code>printf(\"%p\\n\", &amp;state-&gt;_vars);\n</code></pre>\n\n<p>I don't see anything wrong using <code>state-&gt;_vars</code>. See working code at <a href=\"http://ideone.com/YAJK5K\" rel=\"nofollow\">http://ideone.com/YAJK5K</a>.</p>\n"}], "owner": {"reputation": 159, "user_id": 4135957, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003307910037/picture?type=large", "display_name": "Guilherme Nemeth", "link": "https://stackoverflow.com/users/4135957/guilherme-nemeth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445455667, "creation_date": 1445449112, "last_edit_date": 1445455667, "question_id": 33265814, "link": "https://stackoverflow.com/questions/33265814/stdunordered-map-as-a-struct-member-has-address-0", "title": "std::unordered_map as a struct member has address 0", "body": "<p>I have a struct that looks like this:</p>\n\n<pre><code>// A lexical scope that keeps track of every declared variable\n// in a function\nstruct LexState\n{\n    // A map containing the index of a variable in it's function\n    // The key is the variable name\n    std::unordered_map&lt;std::string, int&gt; _vars;\n\n    Function *_function;\n    LexState *_parent;\n};\n</code></pre>\n\n<p>This is the code using the struct:</p>\n\n<pre><code>#define DD(msg) std::cout &lt;&lt; \"Debug: \" &lt;&lt; msg &lt;&lt; '\\n'\n#define DD1(msg, p1) std::cout &lt;&lt; \"Debug: \" &lt;&lt; msg &lt;&lt; p1 &lt;&lt; '\\n'\n#define DD2(msg, p1, p2) std::cout &lt;&lt; \"Debug: \" &lt;&lt; msg &lt;&lt; p1 &lt;&lt; p2 &lt;&lt; '\\n'\n\n// A lexical scope that keeps track of every declared variable\n// in a function\nstruct LexState\n{\n    // A map containing the index of a variable in it's function\n    // The key is the variable name\n    std::unordered_map&lt;std::string, int&gt; _vars;\n\n    Function *_function;\n    LexState *_parent;\n\n    LexState(LexState *parent, Function *function)\n    {\n        _parent = parent;\n        _function = function;\n    }\n\n    Value *SearchVar(char *name)\n    {\n        if (_parent == nullptr)\n        {\n            return nullptr;\n        }\n        std::string str(name);\n        auto var = _parent-&gt;_vars.find(str);\n        if (var == _parent-&gt;_vars.end())\n        {\n            return _parent-&gt;SearchVar(name);\n        }\n        return _function-&gt;GetLocalVar(var-&gt;second)-&gt;GetValue();\n    }\n};\n\nclass Compiler\n{\npublic:\n\n    State *_state;\n    Function *_current_function;\n    GC *_gc;\n    LexState *_ls;\n\n    Compiler(State *state) :\n        _state(state)\n    {\n        _current_function = nullptr;\n        _gc = state-&gt;GetGC();\n        _current_function = new Function(nullptr);\n        _state-&gt;_main_function = _current_function;\n        _ls = nullptr;\n    }\n\n    void PushFunction()\n    {\n        Function *new_function = new Function(_current_function);\n        _current_function = new_function;\n        LexState *new_ls = new LexState(_ls, new_function);\n\n        // even now, right after creating new_ls, new_ls-&gt;_vars is 0\n        printf(\"%p\\n\", &amp;new_ls-&gt;_vars);\n        _ls = new_ls;\n    }\n\n    void PopFunction()\n    {\n        _current_function = _current_function-&gt;_parent;\n        LexState *parent = _ls-&gt;_parent;\n        delete _ls;\n        _ls = parent;\n    }\n\n    int DeclareVar(const Symbol *node)\n    {\n        assert(node-&gt;_type == NODE_SYMBOL);\n\n        DD(\"Declaring variable\");\n\n        auto token = node-&gt;_token;\n        char name[token-&gt;len + 1];\n        memcpy(name, token-&gt;pos, token-&gt;len);\n        name[token-&gt;len] = '\\0';\n\n        int idx = _current_function-&gt;AddLocalVar(name);\n        std::string key(name);\n\n        printf(\"%p\\n\", &amp;_ls-&gt;_vars);\n\n        if (_ls != nullptr)\n            _ls-&gt;_vars.insert(std::make_pair(key, idx));\n        else\n           DD(\"LexState nullptr\");\n\n        DD(\"Variable declared\");\n\n        return idx;\n    }\n\n    void Compile(const Node *node)\n    {\n        switch (node-&gt;_type)\n        {\n            case NODE_CHUNK:\n                CompileChunk((Chunk *)node);\n                break;\n\n            case NODE_BLOCK:\n                CompileBlock((Block *)node);\n                break;\n\n            case NODE_FUNCTION_DEF:\n                CompileFunctionDef((FunctionDef *)node);\n                break;\n\n            case NODE_CONDITIONAL:\n                CompileConditional((ConditionalStatement *)node);\n                break;\n\n            case NODE_BINARY_EXPR:\n                CompileBinaryExpr((BinaryExpr *)node);\n                break;\n\n            case NODE_UNARY_EXPR:\n                CompileUnaryExpr((UnaryExpr *)node);\n                break;\n\n            case NODE_SYMBOL:\n                CompileSymbol((Symbol *)node);\n                break;\n\n            case NODE_STRING_LITERAL:\n                CompileStringLiteral((StringLiteral *)node);\n                break;\n\n            case NODE_BOOL_LITERAL:\n                CompileBoolLiteral((BoolLiteral *)node);\n                break;\n\n            case NODE_INT_LITERAL:\n                CompileIntLiteral((IntLiteral *)node);\n                break;\n        }\n    }\n\n    void CompileChunk(const Chunk *chunk)\n    {\n        Compile(chunk-&gt;_block);\n        AddCode(OP_HALT);\n    }\n\n    void CompileBlock(const Block *block)\n    {\n        std::vector&lt;Node *&gt; vec = block-&gt;_vec;\n        for (auto it = vec.begin(); it != vec.end(); it++)\n        {\n            Compile(*it);\n        }\n    }\n\n    void CompileFunctionDef(const FunctionDef *func)\n    {\n        Value v;\n\n        int f = AddConstant(v);\n        AddCode(OP_PUSH, f);\n\n        Value *vp = _current_function-&gt;GetConstant(f);\n\n        if (func-&gt;_name)\n        {\n            int fvar = DeclareVar((Symbol *)func-&gt;_name);\n            AddCode(OP_STOR_LOCAL, fvar);\n        }\n\n        ArgList *argsnode = (ArgList *)func-&gt;_args;\n        auto args = argsnode-&gt;_vec;\n        int argcount = args.size();\n\n        PushFunction();\n        auto closure = new Closure(_current_function);\n        closure-&gt;_argcount = argcount;\n        std::cout &lt;&lt; argcount &lt;&lt; '\\n';\n        vp-&gt;_closure = closure;\n        vp-&gt;_type = VALUE_CLOSURE;\n\n        // Compiling inside function\n\n        // Arguments are compiled in reserved order, because in the function call\n        // the passed arguments will be pushed in the order they are passed\n        for (auto it = args.rbegin(); it != args.rend(); it++)\n        {\n            int var = DeclareVar((Symbol *)*it);\n            AddCode(OP_STOR_LOCAL, var);\n        }\n\n        if (func-&gt;_guard)\n        {\n            Compile(func-&gt;_guard);\n        }\n        else\n        {\n            Compile(func-&gt;_body);\n        }\n\n        AddCode(OP_RETURN);\n\n        // End function\n\n        PopFunction();\n    }\n\n    void CompileConditional(const ConditionalStatement *node)\n    {\n        auto function = _current_function;\n        Compile(node-&gt;_condition);\n\n        int cond_res_idx = function-&gt;AddLocalVar();\n        AddCode(OP_DUP);\n\n        // Store the condition result into an internal variable\n        AddCode(OP_STOR_LOCAL, cond_res_idx);\n\n        AddCode(OP_DUP);\n        int true_jmp = AddCode(OP_JMP_T, 0);\n        int false_jmp = AddCode(OP_JMP_F, 0);\n\n        // Save index of the first code of the block\n        int block_idx = function-&gt;_code.size();\n\n        // Jump to block when condition is true\n        function-&gt;ChangeCode(true_jmp, block_idx);\n\n        Compile(node-&gt;_expr1);\n        AddCode(OP_PUSH_LOCAL, cond_res_idx);\n\n        // Jump to the end of the whole if-elif-else statement\n        // if the condition result was true\n        int exit_jmp = AddCode(OP_JMP_T, 0);\n\n        // Save index of the first code after this statement\n        int right_idx = function-&gt;_code.size();\n        function-&gt;ChangeCode(false_jmp, right_idx);\n\n        if (node-&gt;_expr2 != nullptr)\n        {\n            Compile(node-&gt;_expr2);\n        }\n        else\n        {\n            AddCode(OP_PUSH_NIL);\n        }\n\n        int end_idx = function-&gt;_code.size();\n        function-&gt;ChangeCode(exit_jmp, end_idx);\n    }\n\n    void CompileBinaryExpr(const BinaryExpr *expr)\n    {\n        auto function = _current_function;\n        auto token = expr-&gt;_op-&gt;type;\n\n        if (token == TOKEN_ASSIGN)\n        {\n            if (expr-&gt;_left-&gt;_type == NODE_SYMBOL)\n            {\n                int var = DeclareVar((Symbol *)expr-&gt;_left);\n\n                Compile(expr-&gt;_right);\n                AddCode(OP_STOR_LOCAL, var);\n                return;\n            }\n        }\n\n        // A function call\n        if (token == TOKEN_LEFTPAREN)\n        {\n            ArgList *arglist = (ArgList *)expr-&gt;_right;\n            auto args = arglist-&gt;_vec;\n            int argcount = args.size();\n\n            // A function call cannot have more than 255 arguments\n            assert(argcount &lt; 256);\n\n            for (auto it = args.begin(), end = args.end();\n                it != end; it++)\n            {\n                Compile(*it);\n            }\n\n            Compile(expr-&gt;_left);\n\n            AddCode(OP_CALL, argcount);\n            return;\n        }\n\n        Compile(expr-&gt;_left);\n\n        // Both 'and' and 'or' expressions does short circuit\n        if (token == TOKEN_BOOL_AND || \n            token == TOKEN_BOOL_OR)\n        {\n\n            AddCode(OP_DUP);\n\n            OpType op = (token == TOKEN_BOOL_AND) ? OP_JMP_F : OP_JMP_T;\n            int idx = AddCode(op, function-&gt;_ip + 1);\n\n            Compile(expr-&gt;_right);\n            int next = function-&gt;_code.size();\n            uint32_t instr = function-&gt;_code[idx];\n            function-&gt;ChangeCode(idx, next);\n            return;\n        }\n\n        // No need for lazy evaluation, compile normally\n        Compile(expr-&gt;_right);\n\n        switch (expr-&gt;_op-&gt;type)\n        {\n\n            case TOKEN_ADD:\n                AddCode(OP_ADD);\n                break;\n            case TOKEN_SUB:\n                AddCode(OP_SUB);\n                break;\n            case TOKEN_MUL:\n                AddCode(OP_MUL);\n                break;\n            case TOKEN_DIV:\n                AddCode(OP_DIV);\n                break;\n            case TOKEN_POW:\n                AddCode(OP_POW);\n                break;\n            case TOKEN_AND:\n                AddCode(OP_AND);\n                break;\n            case TOKEN_OR:\n                AddCode(OP_OR);\n                break;\n            case TOKEN_XOR:\n                AddCode(OP_XOR);\n                break;\n            case TOKEN_LT:\n                AddCode(OP_LT);\n                break;\n            case TOKEN_GT:\n                AddCode(OP_GT);\n                break;\n            case TOKEN_LTEQ:\n                AddCode(OP_LTEQ);\n                break;\n            case TOKEN_GTEQ:\n                AddCode(OP_GTEQ);\n                break;\n            case TOKEN_SHIFT_L:\n                AddCode(OP_SHIFT_L);\n                break;\n            case TOKEN_SHIFT_R:\n                AddCode(OP_SHIFT_R);\n                break;\n        }\n    }\n\n    void CompileUnaryExpr(const UnaryExpr *expr)\n    {\n        Compile(expr-&gt;_right);\n\n        switch (expr-&gt;_token-&gt;type)\n        {\n            case TOKEN_SUB:\n                AddCode(OP_NEGATE);\n                break;\n\n            case TOKEN_NOT:\n                AddCode(OP_NOT);\n                break;\n\n            case TOKEN_BOOL_NOT:\n                AddCode(OP_BOOL_NOT);\n                break;\n        }\n    }\n\n    // This function gets called only when it's a reference\n    void CompileSymbol(const Symbol *node)\n    {\n        auto token = node-&gt;_token;\n        char name[token-&gt;len + 1];\n        memcpy(name, token-&gt;pos, token-&gt;len);\n        name[token-&gt;len] = '\\0';\n\n        DD1(\"Searching reference: \", name);\n\n        Value *upvalue = _ls-&gt;SearchVar(name);\n        if (upvalue)\n        {\n            int idx = _current_function-&gt;AddUpValue(upvalue);\n            AddCode(OP_PUSH_UPVALUE, idx);\n            return;\n        }\n\n        int idx = _current_function-&gt;GetLocalVarIndex(name);\n        AddCode(OP_PUSH_LOCAL, idx);\n    }\n\n    void CompileStringLiteral(const StringLiteral *sl)\n    {\n        Value v(sl-&gt;_token-&gt;str, sl-&gt;_token-&gt;len);\n        AddCode(OP_PUSH, AddConstant(v));\n    }\n\n    void CompileBoolLiteral(const BoolLiteral *bl)\n    {\n        Value v(bl-&gt;_token-&gt;type == TOKEN_TRUE);\n        AddCode(OP_PUSH, AddConstant(v));\n    }\n\n    void CompileIntLiteral(const IntLiteral *il)\n    {\n        Value v(il-&gt;_token-&gt;num);\n        AddCode(OP_PUSH, AddConstant(v));\n    }\n\n    int AddCode(OpType code)\n    {\n        return _current_function-&gt;AddCode(code);\n    }\n\n    int AddCode(OpType code, int a)\n    {\n        return _current_function-&gt;AddCode(code, a);\n    }\n\n    int AddConstant(const Value &amp;v)\n    {\n        return _current_function-&gt;AddConstant(v);\n    }\n};\n</code></pre>\n\n<p>The program outputs: </p>\n\n<pre><code>Declaring variable\n0\n</code></pre>\n\n<p>It crashes before the <code>DD(\"Variable declared\")</code> part.</p>\n\n<p>Even though i'm new to C++, I'm pretty sure I don't need to allocate the unordered map myself, right? As it's not a pointer, it will be allocated when I do <code>new LexState</code></p>\n\n<p>So is there any initialization/allocation I am forgetting?</p>\n"}, {"tags": ["c++", "shared-libraries", "xerces", "xalan", "ldd"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1445449898, "post_id": 33265778, "comment_id": 54333185, "body": "It could be that your Xalan library was built in such a way that it&#39;s dependent library locations are hard coded into it.  I believe this may occur for common system libraries.  How and on what machine was your Xalan library built?"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1445450367, "post_id": 33265778, "comment_id": 54333442, "body": "@AnonMail Unfortunately they are both precompiled binaries from the Xalan and Xerces websites. Does that mean that I am doomed?"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1445450702, "post_id": 33265778, "comment_id": 54333636, "body": "I missed the part where you said you are having problems linking.  Can you show your link command and error?  It may be that your linker can&#39;t find the library.  In that case use the -L option to tell it where it is.  I believe LD_LIBRARY_PATH is only good for running the program - the GNU compiler does not use it to find library locations."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1445457920, "post_id": 33265778, "comment_id": 54337559, "body": "@AnonMail I think I mis-wrote when I said linking. I actually meant the issue is occurring when running the binary, not trying to link the library when compiling."}], "answers": [{"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1445527899, "post_id": 33272138, "comment_id": 54369950, "body": "You&#39;re right, it says <code>.&#47;libxerces-c.so.26: ELF 64-bit LSB  shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=802588c1d05e6bcb968d63fe050422d780f3612d, not stripped</code>"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 2, "last_activity_date": 1445478430, "creation_date": 1445478430, "answer_id": 33272138, "question_id": 33265778, "link": "https://stackoverflow.com/questions/33265778/ldd-not-finding-shared-object-so-for-xerces/33272138#33272138", "title": "ldd not finding shared object (.so) for xerces", "body": "<p>What does this produce:</p>\n\n<pre><code>cd /usr/local/lib\nfile -L ./libxerces-c.so.26\n</code></pre>\n\n<p>Chances are, this will print something like <code>ELF 64-bit LSB shared object ...</code>, in which case you are trying to point 32-bit executable at 64-bit libraries, and <em>that</em> doesn't work.</p>\n\n<p>You need to download a 32-bit build of <code>libxerces</code>.</p>\n"}], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 33272138, "answer_count": 1, "score": 0, "last_activity_date": 1445478430, "creation_date": 1445449015, "question_id": 33265778, "link": "https://stackoverflow.com/questions/33265778/ldd-not-finding-shared-object-so-for-xerces", "title": "ldd not finding shared object (.so) for xerces", "body": "<p>I am trying to run a sample executable provided with Xalan C++ library, which requires a the Xerces C library. But I am not able to properly link the Xerces shared object file.</p>\n\n<pre><code>mike@ubuntu:~/Xalan-C_1_9_0-redhat_80-gcc_32/bin$ ldd SimpleXPathAPI \n    linux-gate.so.1 =&gt;  (0xf7765000)\n    libxalan-c.so.19 =&gt; /home/mike/Xalan-C_1_9_0-redhat_80-gcc_32/lib/libxalan-c.so.19 (0xf7409000)\n    libm.so.6 =&gt; /lib/i386-linux-gnu/libm.so.6 (0xf73ab000)\n    libpthread.so.0 =&gt; /lib/i386-linux-gnu/libpthread.so.0 (0xf738e000)\n    libxerces-c.so.26 =&gt; not found\n    libxalanMsg.so.19 =&gt; /home/mike/Xalan-C_1_9_0-redhat_80-gcc_32/lib/libxalanMsg.so.19 (0xf7386000)\n    libc.so.6 =&gt; /lib/i386-linux-gnu/libc.so.6 (0xf71d8000)\n    /lib/ld-linux.so.2 (0xf7768000)\n    libstdc++.so.5 =&gt; not found\n    libxerces-c.so.26 =&gt; not found\n</code></pre>\n\n<p>I included the location containing the <code>libxerces-c.so</code> in my <code>LD_LIBRARY_PATH</code> but <code>ldd</code> will not find it.</p>\n\n<pre><code>mike@ubuntu:~/Xalan-C_1_9_0-redhat_80-gcc_32/bin$ echo $LD_LIBRARY_PATH\n    /home/mike/Xalan-C_1_9_0-redhat_80-gcc_32/lib:/usr/local/lib\n</code></pre>\n\n<p>I even added a soft link to ensure the <code>.26</code> is included.</p>\n\n<pre><code>mike@ubuntu:/usr/local/lib$ ls -l\ntotal 98308\n-rwxr-xr-x 1 root root  25560971 Aug 28 13:39 libxerces-c-3.1.so\n-rw-r--r-- 1 root root  75080734 Aug 28 13:39 libxerces-c.a\n-rwxr-xr-x 1 root root       962 Aug 28 13:39 libxerces-c.la\nlrwxrwxrwx 1 root root        18 Aug 28 13:39 libxerces-c.so -&gt; libxerces-c-3.1.so\nlrwxrwxrwx 1 root root        14 Oct 21 10:31 libxerces-c.so.26 -&gt; libxerces-c.so\ndrwxr-xr-x 2 root root      4096 Aug 28 13:39 pkgconfig\ndrwxrwsr-x 4 root staff     4096 Feb 18  2015 python2.7\ndrwxrwsr-x 3 root staff     4096 Feb 18  2015 python3.4\ndrwxr-xr-x 3 root root      4096 Jul  6 15:42 site_ruby\n</code></pre>\n\n<p>The first time I had this <code>=&gt; not found</code> issue with <code>libxalan-c.so.19</code> I solved it by adding the location of that file to my <code>LD_LIBRARY_PATH</code>. So I can't figure out why the same fix is not working for the <code>libxerces-c.so.26</code>. Does anyone know what I'm doing wrong?</p>\n"}, {"tags": ["c++", "memory-management", "vector", "stl", "operator-overloading"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1445449348, "post_id": 33265641, "comment_id": 54332856, "body": "@Galik: Did you uncomment the line that says &quot;getting compilation error&quot;?"}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1445449353, "post_id": 33265641, "comment_id": 54332858, "body": "@DieterL&#252;cking updated post with compilation error."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1445449431, "post_id": 33265641, "comment_id": 54332905, "body": "@MooingDuck lol good point!"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1445449493, "post_id": 33265641, "comment_id": 54332935, "body": "It looks like you need to implement <code>operator!=</code> in your allocator class."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445449560, "post_id": 33265924, "comment_id": 54332990, "body": "Construct/desctruct to begin with, yes."}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1445449762, "post_id": 33265924, "comment_id": 54333106, "body": "like this template&lt;class U&gt; MyAllocator&amp; operator !=(const MyAllocator&lt;U&gt; &amp;) { return *this;}"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1445450499, "post_id": 33265924, "comment_id": 54333516, "body": "@eswaat: ... No.  <code>operator!=</code> is a boolean operator.  <code>template&lt;class U&gt; bool operator !=(const MyAllocator&lt;U&gt; &amp;) { return false;}</code>.  You&#39;ll probably need <code>operator==</code> which should probably return true.  (All your allocators are equal, because they&#39;re 100% identical)"}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1445452407, "post_id": 33265924, "comment_id": 54334547, "body": "@MooingDuck Thanks. I think you are right <a href=\"http://en.cppreference.com/w/cpp/memory/allocator/operator_cmp\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/allocator/operator_cmp</a>  .Since default allocators are stateless, two default allocators are always equal. So operator != will always return false and operator == will always return true. I am understanding right ?"}], "tags": [], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": true, "score": 3, "last_activity_date": 1445449493, "creation_date": 1445449493, "answer_id": 33265924, "question_id": 33265641, "link": "https://stackoverflow.com/questions/33265641/error-while-copying-one-vector-to-other-c/33265924#33265924", "title": "Error while copying one vector to other c++", "body": "<p>The key part of the exception is hundreds of lines into it: </p>\n\n<pre><code>In file included from /usr/local/include/c++/5.2.0/vector:64:0,\n             from main.cpp:2:    /usr/local/include/c++/5.2.0/bits/stl_vector.h:1535:5: note: candidate: template&lt;class _Tp, class _Alloc&gt; bool std::operator!=(const std::vector&lt;_Tp, _Alloc&gt;&amp;, const std::vector&lt;_Tp, _Alloc&gt;&amp;)\n     operator!=(const vector&lt;_Tp, _Alloc&gt;&amp; __x, const vector&lt;_Tp, _Alloc&gt;&amp; __y)\n     ^\n/usr/local/include/c++/5.2.0/bits/stl_vector.h:1535:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/local/include/c++/5.2.0/vector:69:0,\n                 from main.cpp:2:\n/usr/local/include/c++/5.2.0/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::vector&lt;_Tp, _Alloc&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\n</code></pre>\n\n<p><code>vector::operator=</code> requires <code>vector::operator!=</code>, which requires <code>allocator::operator!=</code>, which doesn't exist.  Without it, the function can't be created.  Simply add an <code>operator!=</code> to your allocator.  While you're at it, also make sure you have all the other required allocator functions.  If memory serves me right, you're missing a fair number.</p>\n"}, {"tags": [], "owner": {"reputation": 424, "user_id": 5293624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bacf8cd0c5c7a2277363ea6f84c82a8?s=128&d=identicon&r=PG&f=1", "display_name": "kjpus", "link": "https://stackoverflow.com/users/5293624/kjpus"}, "is_accepted": false, "score": 0, "last_activity_date": 1445450034, "creation_date": 1445450034, "answer_id": 33266076, "question_id": 33265641, "link": "https://stackoverflow.com/questions/33265641/error-while-copying-one-vector-to-other-c/33266076#33266076", "title": "Error while copying one vector to other c++", "body": "<p>Change the definition to <code>struct MyAllocator: public std::allocator&lt;T&gt;</code> and the code will compile. </p>\n"}], "owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 33265924, "answer_count": 2, "score": 0, "last_activity_date": 1445450034, "creation_date": 1445448546, "last_edit_date": 1495540718, "question_id": 33265641, "link": "https://stackoverflow.com/questions/33265641/error-while-copying-one-vector-to-other-c", "title": "Error while copying one vector to other c++", "body": "<p>I have overloaded allocator for most of the stl containers below is the code. The code is from <a href=\"https://stackoverflow.com/questions/30471582/how-to-track-memory-assign-by-stl-library\">here</a> </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;list&gt;\n\nnamespace outside\n{\n    template&lt;typename T&gt;\n    struct MyAllocator\n    {\n    typedef typename std::allocator&lt;T&gt;::value_type value_type;\n    typedef typename std::allocator&lt;T&gt;::pointer pointer;\n    typedef typename std::allocator&lt;T&gt;::const_pointer const_pointer;\n    typedef typename std::allocator&lt;T&gt;::reference reference;\n    typedef typename std::allocator&lt;T&gt;::const_reference const_reference;\n    typedef typename std::allocator&lt;T&gt;::size_type size_type;\n    pointer allocate (size_type n, typename std::allocator&lt;void&gt;::const_pointer hint=0)\n    {\n        std::cerr &lt;&lt; \"allocate...\" &lt;&lt; std::endl;\n        return std::allocator&lt;T&gt;{}.allocate(n, hint);\n    }\n    void deallocate (pointer p, size_type n)\n    {\n        std::cerr &lt;&lt; \"deallocate...\" &lt;&lt; std::endl;\n        return std::allocator&lt;T&gt;{}.deallocate(p, n);\n    }\n    template &lt;class Type&gt; struct rebind\n    {\n        typedef MyAllocator&lt;Type&gt; other;\n    };\n    MyAllocator()\n    {\n    }\n    MyAllocator(const MyAllocator&lt;T&gt;&amp; other )\n    {\n    }\n    template&lt; class U &gt;\n    MyAllocator( const MyAllocator&lt;U&gt;&amp; other )\n    {\n    }\n};\n} // namespace outside\n\nnamespace outer\n{\ntemplate&lt;class T&gt;\nusing vector = ::std::vector&lt;T, outside::MyAllocator&lt;T&gt;&gt;;\n\ntemplate&lt;class T&gt;\nusing list = ::std::list&lt;T, outside::MyAllocator&lt;T&gt;&gt;;\n}\n\n\nint main()\n{\n    outer::vector&lt;int&gt; myVector1;\n    outer::vector&lt;int&gt; myVector2;\n    myVector1.push_back(10);\n    myVector1.push_back(20);\n    // myVector2 = myVector1; // Getting compilation error\n    for (auto i = myVector1.begin(); i != myVector1.end(); ++i) {\n       std::cout &lt;&lt; *i &lt;&lt; ' ';\n    }\n\n    std::list&lt;int&gt; myList1;\n    std::list&lt;int&gt; myList2;\n    myList2 = myList1; // // No compilation error\n}\n</code></pre>\n\n<p>Copying one vector to another vector is giving me error. While for the same code copying one list to another list is working fine.</p>\n\n<p>Compilation error </p>\n\n<pre><code>included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc: In instantiation of 'std::vector&lt;_Tp, _Alloc&gt;&amp; std::vector&lt;_Tp, _Alloc&gt;::operator=(const std::vector&lt;_Tp, _Alloc&gt;&amp;) [with _Tp = int; _Alloc = outside::MyAllocator&lt;int&gt;]':\nprog.cpp:59:15:   required from here\n/usr/include/c++/5/bits/vector.tcc:176:37: error: no match for 'operator!=' (operand types are 'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' and 'const _Tp_alloc_type {aka const outside::MyAllocator&lt;int&gt;}')\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/iosfwd:40:0,\n                 from /usr/include/c++/5/ios:38,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/postypes.h:221:5: note: candidate: template&lt;class _StateT&gt; bool std::operator!=(const std::fpos&lt;_StateT&gt;&amp;, const std::fpos&lt;_StateT&gt;&amp;)\n     operator!=(const fpos&lt;_StateT&gt;&amp; __lhs, const fpos&lt;_StateT&gt;&amp; __rhs)\n     ^\n/usr/include/c++/5/bits/postypes.h:221:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::fpos&lt;_StateT&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:64:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/stl_pair.h:227:5: note: candidate: template&lt;class _T1, class _T2&gt; constexpr bool std::operator!=(const std::pair&lt;_T1, _T2&gt;&amp;, const std::pair&lt;_T1, _T2&gt;&amp;)\n     operator!=(const pair&lt;_T1, _T2&gt;&amp; __x, const pair&lt;_T1, _T2&gt;&amp; __y)\n     ^\n/usr/include/c++/5/bits/stl_pair.h:227:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::pair&lt;_T1, _T2&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/stl_iterator.h:304:5: note: candidate: template&lt;class _Iterator&gt; bool std::operator!=(const std::reverse_iterator&lt;_Iterator&gt;&amp;, const std::reverse_iterator&lt;_Iterator&gt;&amp;)\n     operator!=(const reverse_iterator&lt;_Iterator&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_iterator.h:304:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::reverse_iterator&lt;_Iterator&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/stl_iterator.h:354:5: note: candidate: template&lt;class _IteratorL, class _IteratorR&gt; bool std::operator!=(const std::reverse_iterator&lt;_Iterator&gt;&amp;, const std::reverse_iterator&lt;_IteratorR&gt;&amp;)\n     operator!=(const reverse_iterator&lt;_IteratorL&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_iterator.h:354:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::reverse_iterator&lt;_Iterator&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/stl_iterator.h:1077:5: note: candidate: template&lt;class _IteratorL, class _IteratorR&gt; bool std::operator!=(const std::move_iterator&lt;_Iterator&gt;&amp;, const std::move_iterator&lt;_IteratorR&gt;&amp;)\n     operator!=(const move_iterator&lt;_IteratorL&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_iterator.h:1077:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::move_iterator&lt;_Iterator&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/stl_iterator.h:1083:5: note: candidate: template&lt;class _Iterator&gt; bool std::operator!=(const std::move_iterator&lt;_Iterator&gt;&amp;, const std::move_iterator&lt;_Iterator&gt;&amp;)\n     operator!=(const move_iterator&lt;_Iterator&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_iterator.h:1083:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::move_iterator&lt;_Iterator&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/string:41:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/allocator.h:140:5: note: candidate: template&lt;class _T1, class _T2&gt; bool std::operator!=(const std::allocator&lt;_CharT&gt;&amp;, const std::allocator&lt;_T2&gt;&amp;)\n     operator!=(const allocator&lt;_T1&gt;&amp;, const allocator&lt;_T2&gt;&amp;)\n     ^\n/usr/include/c++/5/bits/allocator.h:140:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::allocator&lt;_CharT&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/string:41:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/allocator.h:146:5: note: candidate: template&lt;class _Tp&gt; bool std::operator!=(const std::allocator&lt;_CharT&gt;&amp;, const std::allocator&lt;_CharT&gt;&amp;)\n     operator!=(const allocator&lt;_Tp&gt;&amp;, const allocator&lt;_Tp&gt;&amp;)\n     ^\n/usr/include/c++/5/bits/allocator.h:146:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::allocator&lt;_CharT&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/string:52:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/basic_string.h:4948:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator!=(const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     operator!=(const basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^\n/usr/include/c++/5/bits/basic_string.h:4948:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/string:52:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/basic_string.h:4960:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator!=(const _CharT*, const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     operator!=(const _CharT* __lhs,\n     ^\n/usr/include/c++/5/bits/basic_string.h:4960:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   mismatched types 'const _CharT*' and 'outside::MyAllocator&lt;int&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/string:52:0,\n                 from /usr/include/c++/5/bits/locale_classes.h:40,\n                 from /usr/include/c++/5/bits/ios_base.h:41,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/basic_string.h:4972:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator!=(const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, const _CharT*)\n     operator!=(const basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^\n/usr/include/c++/5/bits/basic_string.h:4972:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/bits/ios_base.h:46:0,\n                 from /usr/include/c++/5/ios:42,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/system_error:311:3: note: candidate: bool std::operator!=(const std::error_code&amp;, const std::error_code&amp;)\n   operator!=(const error_code&amp; __lhs, const error_code&amp; __rhs) noexcept\n   ^\n/usr/include/c++/5/system_error:311:3: note:   no known conversion for argument 1 from 'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' to 'const std::error_code&amp;'\n/usr/include/c++/5/system_error:315:3: note: candidate: bool std::operator!=(const std::error_code&amp;, const std::error_condition&amp;)\n   operator!=(const error_code&amp; __lhs, const error_condition&amp; __rhs) noexcept\n   ^\n/usr/include/c++/5/system_error:315:3: note:   no known conversion for argument 1 from 'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' to 'const std::error_code&amp;'\n/usr/include/c++/5/system_error:319:3: note: candidate: bool std::operator!=(const std::error_condition&amp;, const std::error_code&amp;)\n   operator!=(const error_condition&amp; __lhs, const error_code&amp; __rhs) noexcept\n   ^\n/usr/include/c++/5/system_error:319:3: note:   no known conversion for argument 1 from 'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' to 'const std::error_condition&amp;'\n/usr/include/c++/5/system_error:323:3: note: candidate: bool std::operator!=(const std::error_condition&amp;, const std::error_condition&amp;)\n   operator!=(const error_condition&amp; __lhs,\n   ^\n/usr/include/c++/5/system_error:323:3: note:   no known conversion for argument 1 from 'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' to 'const std::error_condition&amp;'\nIn file included from /usr/include/c++/5/bits/locale_facets.h:48:0,\n                 from /usr/include/c++/5/bits/basic_ios.h:37,\n                 from /usr/include/c++/5/ios:44,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/5/bits/streambuf_iterator.h:210:5: note: candidate: template&lt;class _CharT, class _Traits&gt; bool std::operator!=(const std::istreambuf_iterator&lt;_CharT, _Traits&gt;&amp;, const std::istreambuf_iterator&lt;_CharT, _Traits&gt;&amp;)\n     operator!=(const istreambuf_iterator&lt;_CharT, _Traits&gt;&amp; __a,\n     ^\n/usr/include/c++/5/bits/streambuf_iterator.h:210:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::istreambuf_iterator&lt;_CharT, _Traits&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/vector:64:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/stl_vector.h:1535:5: note: candidate: template&lt;class _Tp, class _Alloc&gt; bool std::operator!=(const std::vector&lt;_Tp, _Alloc&gt;&amp;, const std::vector&lt;_Tp, _Alloc&gt;&amp;)\n     operator!=(const vector&lt;_Tp, _Alloc&gt;&amp; __x, const vector&lt;_Tp, _Alloc&gt;&amp; __y)\n     ^\n/usr/include/c++/5/bits/stl_vector.h:1535:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::vector&lt;_Tp, _Alloc&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/list:63:0,\n                 from prog.cpp:3:\n/usr/include/c++/5/bits/stl_list.h:291:5: note: candidate: template&lt;class _Val&gt; bool std::operator!=(const std::_List_iterator&lt;_Tp&gt;&amp;, const std::_List_const_iterator&lt;_Val&gt;&amp;)\n     operator!=(const _List_iterator&lt;_Val&gt;&amp; __x,\n     ^\n/usr/include/c++/5/bits/stl_list.h:291:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::_List_iterator&lt;_Tp&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\nIn file included from /usr/include/c++/5/list:63:0,\n                 from prog.cpp:3:\n/usr/include/c++/5/bits/stl_list.h:1843:5: note: candidate: template&lt;class _Tp, class _Alloc&gt; bool std::operator!=(const std::list&lt;_Tp, _Alloc&gt;&amp;, const std::list&lt;_Tp, _Alloc&gt;&amp;)\n     operator!=(const list&lt;_Tp, _Alloc&gt;&amp; __x, const list&lt;_Tp, _Alloc&gt;&amp; __y)\n     ^\n/usr/include/c++/5/bits/stl_list.h:1843:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/5/vector:69:0,\n                 from prog.cpp:2:\n/usr/include/c++/5/bits/vector.tcc:176:37: note:   'std::_Vector_base&lt;int, outside::MyAllocator&lt;int&gt; &gt;::_Tp_alloc_type {aka outside::MyAllocator&lt;int&gt;}' is not derived from 'const std::list&lt;_Tp, _Alloc&gt;'\n            &amp;&amp; _M_get_Tp_allocator() != __x._M_get_Tp_allocator())\n                                     ^\n</code></pre>\n\n<p>I am trying to understand why this is the case and solution for this problem ?</p>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1445448311, "post_id": 33265502, "comment_id": 54332216, "body": "Related, but not exactly the same: <a href=\"http://stackoverflow.com/q/4643074/2069064\">stackoverflow.com/q/4643074/2069064</a>"}, {"owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1445448339, "post_id": 33265502, "comment_id": 54332243, "body": "@Piotr Skotnicki ,thaks for your answer . I have modified the code in thsi way  queueElem&lt;T&gt; <i>queueStart()   {     //handle h = first();     typename FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;::handle = first();     queueElem&lt;T&gt; *elem = get_item( h );     return elem;   } // queueStart  but now I have this errors: include/queue.h: In member function \u2018queueElem&lt;T&gt;</i> queue&lt;T&gt;::queueStart()\u2019: include/queue.h:101: error: expected unqualified-id before \u2018=\u2019 token include/queue.h:102: error: \u2018h\u2019 was not declared in this scope"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1445448846, "post_id": 33265502, "comment_id": 54332546, "body": "I do not get the design: Why the queue a <code>FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;</code> (pointer) ?"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445448550, "post_id": 33265558, "comment_id": 54332359, "body": "The OP is also missing a few <code>;</code>"}, {"owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "edited": false, "score": 0, "creation_date": 1445448815, "post_id": 33265558, "comment_id": 54332528, "body": "@Barry now I have this error : include/queue.h:101: error: there are no arguments to \u2018first\u2019 that  depend on a template parameter, so a declaration of \u2018first\u2019 must be availabl"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "edited": false, "score": 0, "creation_date": 1445448869, "post_id": 33265558, "comment_id": 54332562, "body": "@famedoro Well nowhere in your code do you define <code>first</code>."}, {"owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "edited": false, "score": 0, "creation_date": 1445449058, "post_id": 33265558, "comment_id": 54332674, "body": "@Barry I have updated the code."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "edited": false, "score": 0, "creation_date": 1445449388, "post_id": 33265558, "comment_id": 54332878, "body": "@famedoro, I have answered the question."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1445449493, "last_edit_date": 1445449493, "creation_date": 1445448247, "answer_id": 33265558, "question_id": 33265502, "link": "https://stackoverflow.com/questions/33265502/i-cannot-compile-this-code-using-template/33265558#33265558", "title": "I cannot compile this code using template", "body": "<p>For some reason I cannot find a good duplicate of this...</p>\n\n<hr />\n\n<p><code>handle</code> is a <em>dependent</em> name. Unqualified lookup will not find dependent names in base classes, so you will have to qualify it:</p>\n\n<pre><code>typename FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;::handle h = first();\n</code></pre>\n\n<p>Similarly, since <code>first</code> comes from the base class as well, that needs to be qualified:</p>\n\n<pre><code>typename FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;::handle h = FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;::first();\n</code></pre>\n\n<p>Though you can shorten the latter qualification by simply using <code>this-&gt;</code>:</p>\n\n<pre><code>typename FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;::handle h = this-&gt;first();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1445449270, "creation_date": 1445449270, "answer_id": 33265861, "question_id": 33265502, "link": "https://stackoverflow.com/questions/33265502/i-cannot-compile-this-code-using-template/33265861#33265861", "title": "I cannot compile this code using template", "body": "<p>This is a known problem of two-stage template instantiation (this is why I do not like it).</p>\n\n<p>To fix your code, use following:</p>\n\n<pre><code>typename FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;::handle h = this-&gt;first();\n</code></pre>\n"}], "owner": {"reputation": 1133, "user_id": 1176668, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/306d7986d36750697c633864525d3775?s=128&d=identicon&r=PG", "display_name": "famedoro", "link": "https://stackoverflow.com/users/1176668/famedoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1445449562, "accepted_answer_id": 33265861, "answer_count": 2, "score": 1, "last_activity_date": 1445449493, "creation_date": 1445448041, "last_edit_date": 1445449002, "question_id": 33265502, "link": "https://stackoverflow.com/questions/33265502/i-cannot-compile-this-code-using-template", "closed_reason": "Duplicate", "title": "I cannot compile this code using template", "body": "<p>I'm trying to compile code written in C ++.</p>\n\n<p>I have this code in fifo_list.h</p>\n\n<pre><code>template &lt;class T&gt;\nclass FIFO_LIST\n{\n  public:\n  class list_type {\n  public:\n    T data;\n    list_type *next;\n    void *operator new(size_t num_bytes)\n    {\n       block_pool mem_pool;\n\n       void *mem_addr = mem_pool.pool_alloc( num_bytes );\n       return mem_addr;\n     } // new\n   };  // class list_type\n   private:\n\n  list_type *list;\n\n  public:\n  /** define a handle type to abstract the list_type type */\n  typedef list_type *handle\n  handle first(void)\n  {\n    return list;\n   } // first\n\n }\n</code></pre>\n\n<p>and this header queue.h:</p>\n\n<pre><code>#include \"fifo_list.h\"\ntemplate &lt;class T&gt;\nclass queue : protected FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;\n{ \n public:  \n  queueElem&lt;T&gt; *queueStart()\n  {\n    handle h = first();\n    queueElem&lt;T&gt; *elem = get_item( h );\n    return elem;\n   } \n }\n</code></pre>\n\n<p>When I try to compile I have these error messages:</p>\n\n<pre><code>include/queue.h: In member function \u2018queueElem&lt;T&gt;* queue&lt;T&gt;::queueStart()\u2019:\ninclude/queue.h:100: error: \u2018handle\u2019 was not declared in this scope\ninclude/queue.h:100: error: expected \u2018;\u2019 before \u2018h\u2019\ninclude/queue.h:101: error: \u2018h\u2019 was not declared in this scope\n</code></pre>\n\n<p>where I'm wrong?</p>\n\n<p>@Piotr Skotnicki, @Barry I have modified the code in this way</p>\n\n<pre><code>queueElem&lt;T&gt; *queueStart()\n{\n  //handle h = first();\n  typename FIFO_LIST&lt;queueElem&lt;T&gt; *&gt;::handle h = first();\n  queueElem&lt;T&gt; *elem = get_item( h );\n  return elem;\n } // queueStart\n</code></pre>\n\n<p>now I have this errors:</p>\n\n<pre><code>include/queue.h:101: error: there are no arguments to \u2018first\u2019 that  depend on a template parameter, so a declaration of \u2018first\u2019 must be available\n</code></pre>\n"}, {"tags": ["c++", "string", "static-cast"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1445448325, "post_id": 33265466, "comment_id": 54332227, "body": "You&#39;re trying to convert a &quot;pointer to constant&quot; to a &quot;pointer to non-constant&quot;, which  <code>static_cast</code> does not allow."}], "answers": [{"comments": [{"owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 1, "creation_date": 1445448661, "post_id": 33265526, "comment_id": 54332422, "body": "@Columbo: Can you please explain more, your explanation is little confusing"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 0, "creation_date": 1445449180, "post_id": 33265526, "comment_id": 54332735, "body": "@anurag86 I adjusted it, better now?"}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 5, "last_activity_date": 1445449166, "last_edit_date": 1445449166, "creation_date": 1445448127, "answer_id": 33265526, "question_id": 33265466, "link": "https://stackoverflow.com/questions/33265466/why-cant-i-use-static-castconst-charstr-instead-of-const-charstr/33265526#33265526", "title": "Why cant i use static_cast&lt;const char**&gt;(str) instead of (const char**)str?", "body": "<p>You're casting away <code>const</code> on the second level, which <code>static_cast</code> is not allowed to do (in fact, no \"C++\" cast apart from <code>const_cast</code>):</p>\n\n<pre><code>          void    const*\n   char const*         *\n// ^^^^^^^^^^^    ^^^^^\n// pointee        cv-qualifiers\n//                of pointee\n</code></pre>\n\n<p>Instead, write</p>\n\n<pre><code>const char *ca = *(static_cast&lt;const char* const*&gt;(str));\n</code></pre>\n\n<hr>\n\n<p>The <code>(char const**)</code> cast works here because it is equivalent to a <code>static_cast</code> followed by a <code>const_cast</code> (as per [expr.cast]/(4.3)) - i.e. it was equivalent to</p>\n\n<pre><code>const char *ca = *(const_cast&lt;const char**&gt;(static_cast&lt;const char* const*&gt;(str)));\n</code></pre>\n"}], "owner": {"reputation": 1081, "user_id": 4859268, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/434108cc24f67b8f47c3032894e72423?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/4859268/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 33265526, "answer_count": 1, "score": 1, "last_activity_date": 1445449166, "creation_date": 1445447915, "question_id": 33265466, "link": "https://stackoverflow.com/questions/33265466/why-cant-i-use-static-castconst-charstr-instead-of-const-charstr", "title": "Why cant i use static_cast&lt;const char**&gt;(str) instead of (const char**)str?", "body": "<p>I have an issue, it doesn't want to cast using <strong>static_cast&lt;></strong>. What can it be?</p>\n\n<pre><code>void myCompare(const void *str)\n{\n    const char *ca = *(static_cast&lt;const char**&gt;(str)); //error\n    const char *a = *(const char **)str; //ok\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix", "graph"], "comments": [{"owner": {"reputation": 604, "user_id": 4666991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hFSp9.jpg?s=128&g=1", "display_name": "matz", "link": "https://stackoverflow.com/users/4666991/matz"}, "edited": false, "score": 0, "creation_date": 1445448073, "post_id": 33265397, "comment_id": 54332078, "body": "<code>std::vector&lt;string&gt; label</code> is not initialized but you&#39;re accessing the entries (in <code>cin &gt;&gt; label[i]</code>). Either make this access a <code>push_back</code> or initialize the vector to the proper size."}, {"owner": {"reputation": 31, "user_id": 5253176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4e36e5bb249654ddafd4821796f9d75?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/5253176/groot"}, "reply_to_user": {"reputation": 604, "user_id": 4666991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hFSp9.jpg?s=128&g=1", "display_name": "matz", "link": "https://stackoverflow.com/users/4666991/matz"}, "edited": false, "score": 0, "creation_date": 1445451915, "post_id": 33265397, "comment_id": 54334299, "body": "Okay thanks! I used push_back. It is allowing me to Enter everything, but now when I enter q q to quit, nothing prints."}, {"owner": {"reputation": 604, "user_id": 4666991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hFSp9.jpg?s=128&g=1", "display_name": "matz", "link": "https://stackoverflow.com/users/4666991/matz"}, "edited": false, "score": 0, "creation_date": 1445454098, "post_id": 33265397, "comment_id": 54335570, "body": "There are a couple of variables that are not or incorrectly initialized; <code>nodes</code> in <code>GraphMatrix::List</code> is not initialized, and <code>n</code> is not initialized in the <code>GraphMatrix</code>&#39;s constructor. Additionally (unrelated to these problems), note that you&#39;re leaking the memory allocated in the  constructor -- anything allocated with <code>new</code> needs to be <code>delete</code>ed again."}, {"owner": {"reputation": 31, "user_id": 5253176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4e36e5bb249654ddafd4821796f9d75?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/5253176/groot"}, "reply_to_user": {"reputation": 604, "user_id": 4666991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hFSp9.jpg?s=128&g=1", "display_name": "matz", "link": "https://stackoverflow.com/users/4666991/matz"}, "edited": false, "score": 0, "creation_date": 1445460879, "post_id": 33265397, "comment_id": 54339149, "body": "Hmm I still cannot get the graph to print :/"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5253176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4e36e5bb249654ddafd4821796f9d75?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/5253176/groot"}, "edited": false, "score": 0, "creation_date": 1445725640, "post_id": 33316854, "comment_id": 54445624, "body": "Thank you, that helps a lot!"}], "tags": [], "owner": {"reputation": 21755, "user_id": 149818, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2a2cc0bea23b5e604a252f0f3f0456aa?s=128&d=identicon&r=PG", "display_name": "Dewfy", "link": "https://stackoverflow.com/users/149818/dewfy"}, "is_accepted": true, "score": 0, "last_activity_date": 1445680701, "creation_date": 1445680701, "answer_id": 33316854, "question_id": 33265397, "link": "https://stackoverflow.com/questions/33265397/graph-matrix-labeling/33316854#33316854", "title": "Graph Matrix Labeling", "body": "<p>First:</p>\n\n<pre><code>vector&lt;string&gt; label;\n...\ncin &gt;&gt; label[i];\n</code></pre>\n\n<p>Vector has no clue how many items you plan to use, so let's declare it:</p>\n\n<pre><code>label.resize(nodes); //now vector populated with 'nodes' default string\n</code></pre>\n\n<p>Second issue with use of <code>&gt;&gt;</code> it is intended to work with formatted lines, I assume you need something that responds with pressing <kbd>Enter</kbd>, that is why use <code>getline</code> instead:</p>\n\n<pre><code>getline(cin, label[i]);\n</code></pre>\n\n<p>Second: In constructor of graph you don't initialize variable <code>n</code>, and <code>label</code> hope it should be:</p>\n\n<pre><code>    GraphMatrix(const vector&lt;string&gt;&amp;labels):\n       n(labels.size()),\n       label(labels)\n    {\n      ...\n</code></pre>\n\n<p>Third: <code>add_edge</code> must return true at the end</p>\n\n<p>Forth: In the list method you play dangerous game with mixing names of variables <code>i</code> and <code>j</code> for inner and outer loops.</p>\n\n<p>After some correction you can find working code there <a href=\"https://ideone.com/3yU9pw\" rel=\"nofollow\">https://ideone.com/3yU9pw</a> (with sample for creation edges [a b] and [c d] )</p>\n"}], "owner": {"reputation": 31, "user_id": 5253176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d4e36e5bb249654ddafd4821796f9d75?s=128&d=identicon&r=PG&f=1", "display_name": "groot", "link": "https://stackoverflow.com/users/5253176/groot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 0, "accepted_answer_id": 33316854, "answer_count": 1, "score": 0, "last_activity_date": 1445680701, "creation_date": 1445447685, "question_id": 33265397, "link": "https://stackoverflow.com/questions/33265397/graph-matrix-labeling", "title": "Graph Matrix Labeling", "body": "<p>I am new to graphs and vectors, I am trying to label the points on the graph A, B, C, etc.</p>\n\n<pre><code>class GraphMatrix\n{\n    private:\n        int n;\n        int **adj;\n        bool *visited;\n\n        vector &lt;string&gt; label;\n\n    public:\n        GraphMatrix(const vector&lt;string&gt;&amp;labels)\n        {\n            this-&gt;n = n;\n            visited = new bool [n];\n            adj = new int* [n];\n\n            for (int i = 0; i &lt; n; i++)\n            {\n                adj[i] = new int [n];\n\n                for(int j = 0; j &lt; n; j++)\n                {\n                    adj[i][j] = 0;\n                }\n            }\n        }\n\n        bool add_edge(const string &amp;origin, const string &amp;destin)\n        {\n\n            int nodes;\n\n            vector&lt;string&gt;::iterator opos, dpos;\n        opos = std::find(label.begin(), label.end(), origin);\n        dpos = std::find(label.begin(), label.end(), destin);\n\n\n            if (opos == label.end() || dpos == label.end()) return false;\n\n            opos-label.begin();\n\n        }\n            /*\n\n            */\n\n\n        void List()\n        {\n            int i,j, nodes;\n\n\n\n\n            for(i = 0; i &lt; n; i++)\n            {\n                for(j = 0; j &lt; n; j++)\n                {\n                    cout &lt;&lt; adj[i][j] &lt;&lt; \"  \";\n                }\n\n                cout&lt;&lt;endl;\n\n                cout &lt;&lt; \"\\nMatrix Graph\\n\" &lt;&lt; endl;\n\n\n                for(int i = 0; i &lt; nodes; i++)\n                {\n                     cout &lt;&lt; label[i] &lt;&lt; \"  \";\n                }\n\n                cout &lt;&lt; '\\n';\n\n\n                for(int i = 0; i &lt; nodes; i++)\n                    {\n                      cout &lt;&lt; label[i] &lt;&lt; \"\\n\";\n                    }\n\n                 // assign labels to each node\n               // for ( int i = 1; i &lt; nodes; i++ )\n                //{\n                  //  label [ i ] = label [ i - 1 ] + 1;\n                //}       \n\n            }\n        }\n};\n\n\nint main()\n{\n    string  origin, destin;\n    int nodes, max_edges;\n\n    //char label[] =  {'A', 'B', 'C', 'D', 'E'};\n    //label [ 0 ] = 'A';\n\n    vector&lt;string&gt; label;\n\n    cout &lt;&lt; \"How many points? \";\n    cin &gt;&gt; nodes;\n\n       cout &lt;&lt; \"Label the points: \\n\";\n                for(int i = 0; i &lt; nodes; i++ )\n                {\n                    cout &lt;&lt; \"Enter label for point # \" &lt;&lt; i &lt;&lt; \" \";\n                    cin &gt;&gt; label[i];\n                }  \n\n\n    GraphMatrix graph(label);\n\n    max_edges = nodes * (nodes - 1);\n\n        for (int i = 0; i &lt; max_edges; i++)\n        {\n            cout &lt;&lt; \"Define edges between two points (q q to exit): \";\n\n            cin &gt;&gt; origin &gt;&gt; destin;\n\n            if((origin == \"q\") &amp;&amp; (destin == \"q\"))\n            {\n                break;\n            }\n\n            graph.add_edge(origin, destin);\n        }\n\n    graph.List();\n\n    //system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>My output is : </p>\n\n<pre><code>How many points? 5\nLabel the points: \nEnter label for point # 0 A\n</code></pre>\n\n<p>And then it stops. </p>\n\n<pre><code>I am trying to get a graph that looks like this:\n\n  A  B  C  D  E\nA 0  1  0  1  1\nB 0  0  1  0  1\nC 1  0  0  0  0\nD 0  0  1  0  0\nE 0  1  0  0  0\n</code></pre>\n\n<p>Can anyone please help? I had the graph printing fine without labeling. Then I tried adding vectors which is totally new to me, now I can't get it to work.</p>\n"}, {"tags": ["c++", "windows", "dll", "runtime-error"], "answers": [{"comments": [{"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1446115382, "post_id": 33308273, "comment_id": 54614025, "body": "Thank you for your reply, and sorry it&#39;s taken so long to respond. I can&#39;t find any functions named anything like that. Though what has occurred to me is that it mentions string and char. Mingw was complaining about some conversions from char* to string or from string to char*. I&#39;m not at the windows machine so I can&#39;t check yet. I would of thought point b. would be would affect my program working both inside and outside the IDE, I&#39;m not certain of that though, so let me know if I&#39;m wrong. I will make the hello world and report back...."}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1446115502, "post_id": 33308273, "comment_id": 54614118, "body": "Thanks for the links too, while I haven&#39;t found an answer to my problem in them yet, they have helped me with some other things that would blatently have been issues once I solved this :D Is it the done thing to upvote answers if they&#39;re generally helpful? Or do they have to be the correct solution to the problem?"}], "tags": [], "owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "is_accepted": false, "score": 1, "last_activity_date": 1445621512, "creation_date": 1445621512, "answer_id": 33308273, "question_id": 33265375, "link": "https://stackoverflow.com/questions/33265375/the-procedure-entry-point-could-not-be-located-error/33308273#33308273", "title": "&quot;The procedure entry point.... could not be located&quot; error", "body": "<ol>\n<li><p>I don't think the problem is \"dll not found\".  Rather, I think it's \"function name not found\".</p></li>\n<li><p>Specifically, if you were coding in \"C\", you'd expect to link to function names like \"myFunc()\".</p>\n\n<p>If you were coding in C++, you'd instead expect \"<a href=\"https://en.wikipedia.org/wiki/Name_mangling\" rel=\"nofollow\">mangled names</a>\" like \"_ZNSt7__cxx1112basic_stringlcst11char_traitslcSt11char_traitslcESalcEE10_M_replaceEjjPKcj\".</p></li>\n<li><p>In other words, I think you might have inadvertently compiled some C functions as though they were C++, and the linker is looking for the \"mangled name\" instead of the \"actual name\".</p></li>\n</ol>\n\n<p>SUGGESTIONS:</p>\n\n<p>a. See if you recognize \"_ZNSt7__cxx1112basic_stringlcst11char_traitslcSt11char_traitslcESalcEE10_M_replaceEjjPKcj\" as being a function you might have written.  If so, make sure it has a \".cpp\" (C++) extension; and make sure you're including the object file (.o or .obj) in your link command.</p>\n\n<p>b. Otherwise, make sure you <code>#include &lt;xyz&gt;</code> the appropriate header (.h) file for <em>every</em> external call you're making.</p>\n\n<p>c. Failing all else, write a simple \"hello world\" 5 line SDL2 program to verify that you can successfully compile, link and execute.</p>\n\n<p>d. If the \"hello world\" fails, update your post with:</p>\n\n<pre><code>1. \"hello world\" source\n2. \"hello world\" compile/link command\n3. Exact error message\n</code></pre>\n\n<p>These links might also help:</p>\n\n<ul>\n<li><p><a href=\"http://lazyfoo.net/tutorials/SDL/01_hello_SDL/windows/mingw/index.php\" rel=\"nofollow\">http://lazyfoo.net/tutorials/SDL/01_hello_SDL/windows/mingw/index.php</a></p></li>\n<li><p><a href=\"https://wiki.libsdl.org/FAQWindows\" rel=\"nofollow\">https://wiki.libsdl.org/FAQWindows</a></p></li>\n</ul>\n"}], "owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1427, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445621512, "creation_date": 1445447616, "last_edit_date": 1445612342, "question_id": 33265375, "link": "https://stackoverflow.com/questions/33265375/the-procedure-entry-point-could-not-be-located-error", "title": "&quot;The procedure entry point.... could not be located&quot; error", "body": "<p>I have been setting up my application to compile on windows 8, using mingw32 (i686-w64-mingw32 to be precise). I have set up the toolchain and links etc correctly as far as I can tell, and the app compiles and runs inside codeblocks. When I try to run the release version outside of codeblocks. My app depends on libsndfile-1, csound, and a number of the SDL2 libraries. Libsndfile and csound are statically linked, SDL2 is dynamically linked. In my project folder, my SDL2 DLL's are located in \\GUI\\bin. </p>\n\n<p>When trying to run the .exe outside of codeblocks... If I stick the DLL's in a folder with the same relative filepath to the .exe as in the project folder (ie \\GUI\\bin), I get an error messages telling me it can't find the SDL2 DLL's</p>\n\n<p>If I stick the DLL's in the same folder as the .exe, I get the following message:</p>\n\n<blockquote>\n  <p>The procedure entry point\n  _ZNSt7__cxx1112basic_stringlcst11char_traitslcSt11char_traitslcESalcEE10_M_replaceEjjPKcj\n  could not be located in the dynamic link library\n  C:\\Users\\Peter\\Documents\\SDLGUIApp\\bin\\Release\\SDL GUI.exe</p>\n</blockquote>\n\n<p>I've done some research, and I'm struggling to find info that is relevant to my situation. Seeing as it drops the \"can't find DLL's\" error messages when I move them to the same folder as the .exe, then I'm guessing either it finds them in the same folder, and this error is caused by something else, or it is even less happy with them being moved to the same folder than it is with them in the 'correct' place. Either way, I'm stumped!</p>\n\n<p>Any help will be much appreciated!</p>\n\n<p>Pete</p>\n\n<p>EDIT:</p>\n\n<p>Some sources I've found suggest that the order in which I link to the libraries might cause similar (though not identical) errors. I have tried shuffling them around, but nothing I've tried make it better. Here is how I am linking:</p>\n\n<p>In other linker options:</p>\n\n<blockquote>\n  <p>-lmingw32 -lSDL2main -lSDL2 -lSDL2_image -lSDL2_mixer -lSDL2_ttf</p>\n</blockquote>\n\n<p>In link libraries:</p>\n\n<blockquote>\n  <p>C:\\Program Files\\Libraries\\Csound6\\bin\\csound64.lib C:\\Program\n  Files\\Libraries\\libsndfile32\\lib\\libsndfile-1.lib</p>\n</blockquote>\n\n<p>A look at codeblock's build log suggests it links the \"other linker options\" first. I assume this, because one of the last sections from the build log says this:</p>\n\n<blockquote>\n  <p>-lmingw32 -lSDL2main -lSDL2 -lSDL2_image -lSDL2_mixer -lSDL2_ttf -s -mwindows -lmingw32  \"C:\\Program Files\\Libraries\\Csound6\\bin\\csound64.lib\" \"C:\\Program\n  Files\\Libraries\\libsndfile32\\lib\\libsndfile-1.lib\"</p>\n</blockquote>\n\n<p>I'm not sure what the -s means, or why it mentions -lmingw32 twice.</p>\n\n<p>EDIT:</p>\n\n<p>Sorry, a further edit... I have read about how similar errors occur from either not having a main function, or from having the wrong build type selected in codeblocks build options (typically it is the difference between Console or GUI application set under the type option). I have tried exploring these ideas, but I definitely have an \"int main()\" function, the main.cpp is included in both the debug and release builds, and I have \"console application\" selected as build type for both debug and release, so as far as I can tell, the error isn't because of any of these.</p>\n"}, {"tags": ["c++", "file", "text", "int", "output"], "answers": [{"tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 0, "last_activity_date": 1445462465, "last_edit_date": 1445462465, "creation_date": 1445447509, "answer_id": 33265342, "question_id": 33265258, "link": "https://stackoverflow.com/questions/33265258/why-is-0-appearing-in-my-code-while-working-with-text-files/33265342#33265342", "title": "Why is 0 appearing in my code while working with text files", "body": "<p>It's because you're using <code>std::getline</code> after you've read with <code>operator&gt;&gt;</code>, which doesn't consume whitespace characters (including newline) after the extraction is done.</p>\n\n<p>So, the newline character is still there, your first <code>std::getline</code> reads till that character (in your case nothing - <code>iss</code> is empty) and extraction <code>iss &gt;&gt; b</code> fails, thus <code>v</code> is not incremented. Do</p>\n\n<pre><code>file.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>after <code>file &gt;&gt; d;</code> to consume the newline character and continue reading on the next line.</p>\n"}, {"comments": [{"owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 1, "creation_date": 1445447872, "post_id": 33265343, "comment_id": 54331962, "body": "#include&lt;limits&gt; for numeric_limits"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1445448071, "last_edit_date": 1445448071, "creation_date": 1445447510, "answer_id": 33265343, "question_id": 33265258, "link": "https://stackoverflow.com/questions/33265258/why-is-0-appearing-in-my-code-while-working-with-text-files/33265343#33265343", "title": "Why is 0 appearing in my code while working with text files", "body": "<p>After </p>\n\n<pre><code>file &gt;&gt; d;\n</code></pre>\n\n<p>the newline character is still in the input stream. The first call to <code>getline</code> returns an empty line.</p>\n\n<p>Use</p>\n\n<pre><code>file &gt;&gt; d;\n\n// Ignore the rest of the first line.\nfile.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n\nwhile(getline(file,line))\n</code></pre>\n\n<p>And make sure to add</p>\n\n<pre><code>#include &lt;limits&gt;\n</code></pre>\n\n<p>to be able to use <code>std:numeric_limits</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 5356778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fee09b649f1b005bec9c4057b5f6c7?s=128&d=identicon&r=PG&f=1", "display_name": "Arquon", "link": "https://stackoverflow.com/users/5356778/arquon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "closed_date": 1445450288, "answer_count": 2, "score": 2, "last_activity_date": 1445462465, "creation_date": 1445447200, "last_edit_date": 1445447968, "question_id": 33265258, "link": "https://stackoverflow.com/questions/33265258/why-is-0-appearing-in-my-code-while-working-with-text-files", "closed_reason": "Duplicate", "title": "Why is 0 appearing in my code while working with text files", "body": "<p>I have a text file with inside made of:</p>\n\n<pre><code>3\n7 8 9 7 8\n5 7 9 5 7\n6 8 7 9 7\n</code></pre>\n\n<p>I have set 3 to int 'd'. All other lines should belong to int 'b'. But it seems that 'b' still counts in the first line, which became 0 after extracting it to 'd'.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int b, d;\n    string line;\n    ifstream file(\"File.txt\");\n\n    if(!file.is_open())\n        cout &lt;&lt; \"File failed to open.\" &lt;&lt; endl;\n\n    file &gt;&gt; d;\n\n    while(getline(file, line))\n    {\n        istringstream iss(line);\n        double v = 0;\n\n        while(iss &gt;&gt; b)\n            v += b;\n\n        cout &lt;&lt; v / 5 &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>0\n7.8\n6.6\n7.4\n</code></pre>\n\n<p>What could I do to fix this ? Thank you in advance :)</p>\n"}, {"tags": ["c++", "linux"], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1445447495, "creation_date": 1445447495, "answer_id": 33265339, "question_id": 33265249, "link": "https://stackoverflow.com/questions/33265249/is-there-a-way-to-programmatically-refresh-dns-cache-on-linux/33265339#33265339", "title": "Is there a way to programmatically refresh DNS cache on linux?", "body": "<p>have a look here and match the command you need to your system\n<a href=\"http://www.cyberciti.biz/faq/rhel-debian-ubuntu-flush-clear-dns-cache/\" rel=\"nofollow\">http://www.cyberciti.biz/faq/rhel-debian-ubuntu-flush-clear-dns-cache/</a></p>\n\n<p>code will be</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n...\nsystem(\"unix command goes here\");\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 5269863, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a10e3c9ddb93c007df29ac61925c814a?s=128&d=identicon&r=PG&f=1", "display_name": "sushi7777", "link": "https://stackoverflow.com/users/5269863/sushi7777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445447495, "creation_date": 1445447159, "question_id": 33265249, "link": "https://stackoverflow.com/questions/33265249/is-there-a-way-to-programmatically-refresh-dns-cache-on-linux", "title": "Is there a way to programmatically refresh DNS cache on linux?", "body": "<p>We have a large c++ application which will send data constantly from one server to another. We dynamically connect to a specific end point - some virtual IP address. If the IP address is unreachable, the resolved host is redirected to a different address, but that's all taking place on the destination server.</p>\n\n<p>Us as the source server will need to refresh our DNS cache in order to recognize that our endpoint has changed.</p>\n\n<p>Is there a way in c++ to programmatically refresh the DNS cache on a Linux box?</p>\n"}, {"tags": ["c++", "geometry", "simplygon"], "answers": [{"tags": [], "owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "is_accepted": true, "score": 0, "last_activity_date": 1445887040, "creation_date": 1445887040, "answer_id": 33353845, "question_id": 33265212, "link": "https://stackoverflow.com/questions/33265212/get-simplygon-uv-index/33353845#33353845", "title": "Get Simplygon UV Index", "body": "<p>Turns out you need to call: <code>spPackedGeometryData PackedGeom = inGeom-&gt;NewPackedCopy();</code></p>\n\n<p>This will pack the data for you. You can then use your code as normal. </p>\n\n<pre><code>spRidArray PackedVertexIds = PackedGeom-&gt;GetVertexIds();\n</code></pre>\n\n<p>will contain the properly packed indices now. </p>\n"}], "owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 33353845, "answer_count": 1, "score": 0, "last_activity_date": 1445887040, "creation_date": 1445447034, "last_edit_date": 1445448254, "question_id": 33265212, "link": "https://stackoverflow.com/questions/33265212/get-simplygon-uv-index", "title": "Get Simplygon UV Index", "body": "<p>I am currently converting our custom mesh format to simplygon, running a mesh reduction then converting back. The problem at the moment is that the UV number is skyrocketing after converting back to our format. I believe that the UVS are becoming unwelded. </p>\n\n<p>I am using:</p>\n\n<pre><code>spRealArray texcoords = inGeom-&gt;GetTexCoords(i);\n</code></pre>\n\n<p>to get the texture coordinates, I am then using:</p>\n\n<pre><code>spRealData texcoords_xy = g_simplygonSDK-&gt;CreateRealData();\ntexcoords-&gt;GetTuple(j, texcoords_xy);\n</code></pre>\n\n<p>to get each texture coordinate. </p>\n\n<p>But now I need to create a channel of each shared uv index instead of exporting everything as a seperate vertex. How do I find the UV index given a face and a vertex index. </p>\n"}, {"tags": ["c++", "templates", "c++11", "allocator"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445446974, "post_id": 33265165, "comment_id": 54331474, "body": "can you post a minimum (almost) compilable example that I can plug into my compiler to check?"}, {"owner": {"reputation": 746, "user_id": 1412888, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779?s=128&d=identicon&r=PG", "display_name": "Jackie", "link": "https://stackoverflow.com/users/1412888/jackie"}, "edited": false, "score": 1, "creation_date": 1445448078, "post_id": 33265165, "comment_id": 54332084, "body": "I&#39;ve edited it with a code snippet that should be valid, except for the compile error mentioned in the original post that I can&#39;t figure out."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1445448336, "post_id": 33265165, "comment_id": 54332238, "body": "@Jackie compiles fine starting from gcc 5.1"}, {"owner": {"reputation": 746, "user_id": 1412888, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779?s=128&d=identicon&r=PG", "display_name": "Jackie", "link": "https://stackoverflow.com/users/1412888/jackie"}, "edited": false, "score": 0, "creation_date": 1445449205, "post_id": 33265165, "comment_id": 54332760, "body": "ah, thanks for checking that. So the documentation is correct, but 4.8 has an incomplete implementation of the standard, then?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1445449815, "post_id": 33265165, "comment_id": 54333139, "body": "@Jackie you can look up if there&#39;s any bug reported for stdlib not using allocator traits for operating on allocators. I&#39;m not sure if the stdlib is forced to use them, I guess it is, but it was not implemented for <code>std::basic_string</code>"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1445454246, "post_id": 33265165, "comment_id": 54335650, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=56437\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=56437</a>"}, {"owner": {"reputation": 746, "user_id": 1412888, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779?s=128&d=identicon&r=PG", "display_name": "Jackie", "link": "https://stackoverflow.com/users/1412888/jackie"}, "edited": false, "score": 0, "creation_date": 1445559503, "post_id": 33265165, "comment_id": 54385804, "body": "Thanks everyone for clarifying the problem. I&#39;m in a situation where I can&#39;t change my compiler (working on a library targeting developers on gcc 4.8).  I implemented a workaround for this particular issue, but now I&#39;m running into the same bug trying to pass a custom allocator to std::shared_ptr. Anyone know a good workaround to make my allocator compatible with this interface?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1445599582, "post_id": 33265165, "comment_id": 54401141, "body": "@Jackie ask a new question with a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, verifiable example</a>, <i>&quot;I&#39;m having a problem&quot;</i> isn&#39;t very descriptive"}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1445459275, "last_edit_date": 1592644375, "creation_date": 1445453153, "answer_id": 33266918, "question_id": 33265165, "link": "https://stackoverflow.com/questions/33265165/does-stdallocator-traits-define-rebind-alloc-if-rebind-not-present-in-custom-a/33266918#33266918", "title": "Does std::allocator_traits define rebind_alloc if rebind not present in custom allocator?", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf\" rel=\"nofollow noreferrer\">n3376</a> says in [allocator.traits.types]/10:</p>\n<blockquote>\n<pre><code>template &lt;class T&gt; using rebind_alloc = see below;\n</code></pre>\n<p><em>Alias template:</em> <code>Alloc::rebind&lt;T&gt;::other</code> if such a type exists; otherwise, <code>Alloc&lt;T, Args&gt;</code> if <code>Alloc</code> is a class template instantiation of the form <code>Alloc&lt;U, Args&gt;</code>, where <code>Args</code> is zero or more type arguments; otherwise, the instantiation of <code>rebind_alloc</code> is ill-formed.</p>\n</blockquote>\n<p>which agrees with cppreference.  It (allocator traits) seem to have been added in C++11, so it does not appear in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf\" rel=\"nofollow noreferrer\">n1905</a>.  Further archaeology could detect where it arrived, but that isn't all that relevant.</p>\n<p>It appears as if your compiler is not a compliant C++11 compiler in this regard.</p>\n<p>With minor fixes, <a href=\"http://coliru.stacked-crooked.com/a/7629a3afcd3913e7\" rel=\"nofollow noreferrer\">both gcc 5.2.0 and clang 3.7.0 in C++11 mode</a> will compile your code without error.</p>\n<p>It appears the only reasonable response, if you cannot change your compiler, is to implement a simple <code>rebind</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 5, "last_activity_date": 1445454352, "last_edit_date": 1445454352, "creation_date": 1445453898, "answer_id": 33267132, "question_id": 33265165, "link": "https://stackoverflow.com/questions/33265165/does-stdallocator-traits-define-rebind-alloc-if-rebind-not-present-in-custom-a/33267132#33267132", "title": "Does std::allocator_traits define rebind_alloc if rebind not present in custom allocator?", "body": "<blockquote>\n  <p>I am using gcc 4.8 with C++11.</p>\n</blockquote>\n\n<p>Then you need to define <code>rebind</code> in your allocator, GCC's <code>basic_string</code> doesn't support the C++11 allocator requirements until version 5.1 (and then only for the new ABI string, i.e. <code>std::__cxx::basic_string</code>).</p>\n\n<p>So your allocator must meet the C++03 Allocator requirements, defining all the members, because <code>allocator_traits</code> isn't used by string in 4.8</p>\n"}], "owner": {"reputation": 746, "user_id": 1412888, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea011fa2919d4bd4568b32b440eda779?s=128&d=identicon&r=PG", "display_name": "Jackie", "link": "https://stackoverflow.com/users/1412888/jackie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2174, "favorite_count": 0, "accepted_answer_id": 33267132, "answer_count": 2, "score": 8, "last_activity_date": 1445459275, "creation_date": 1445446870, "last_edit_date": 1445448069, "question_id": 33265165, "link": "https://stackoverflow.com/questions/33265165/does-stdallocator-traits-define-rebind-alloc-if-rebind-not-present-in-custom-a", "title": "Does std::allocator_traits define rebind_alloc if rebind not present in custom allocator?", "body": "<p>I'm trying to rebind my custom allocator type, <code>MyAllocator&lt;foo&gt;</code>, for use in a <code>basic_string</code> class, e.g.:</p>\n\n<p><code>std::basic_string&lt;char, std::char_traits&lt;char&gt;, MyAllocator&lt;char&gt;&gt; ...</code></p>\n\n<p>The allocator is passed to the context as <code>MyAllocator&lt;void&gt;</code>, so I need to rebind the allocator.</p>\n\n<p>From the cppreference page for <code>std::allocator_traits</code>, <a href=\"http://en.cppreference.com/w/cpp/memory/allocator_traits\">http://en.cppreference.com/w/cpp/memory/allocator_traits</a>:</p>\n\n<blockquote>\n  <p>Member alias templates:</p>\n  \n  <p><code>rebind_alloc&lt;T&gt;</code>:    <code>Alloc::rebind&lt;T&gt;::other</code> if present, otherwise <code>Alloc&lt;T, Args&gt;</code> if this Alloc is <code>Alloc&lt;U, Args&gt;</code></p>\n</blockquote>\n\n<p>My custom allocator implements <code>allocator_traits</code>, but does not define the rebind struct (which doesn't appear to be a requirement to implement <code>allocator_traits</code>). My understanding of the documentation is that it <code>allocator_traits</code> should understand <code>rebind_alloc</code>. However, if I try calling <code>rebind_alloc</code> on my custom allocator type:</p>\n\n<pre><code>template&lt;typename T&gt;\nusing RebindAlloc =\n  typename std::allocator_traits&lt;MyAllocator&lt;void&gt;&gt;::template rebind_alloc&lt;T&gt;;\n</code></pre>\n\n<p>I get various compiler errors when I try to pass <code>RebindAlloc&lt;char&gt;</code> to the <code>basic_string</code> type:</p>\n\n<pre><code>In file included from /usr/bin/../lib/gcc/x86_64-linux-gnu/4.8/../../../../include/c++/4.8/string:52:\n/usr/bin/../lib/gcc/x86_64-linux-gnu/4.8/../../../../include/c++/4.8/bits/basic_string.h:114:41: error: \n  'rebind' following the 'template' keyword does not refer to a template\n  typedef typename _Alloc::template rebind&lt;_CharT&gt;::other _CharT_alloc_type;\n</code></pre>\n\n<p>Clearly the documentation has misled me. Should I just give up on <code>rebind_alloc</code> and implement rebind in the custom allocator, or is there a correct way of doing this using <code>allocator_traits</code>?</p>\n\n<p>I am using gcc 4.8 with C++11. 14 is not an option at the moment.</p>\n\n<p>Here's a code snippet of what I'm trying to do:\n<a href=\"https://gist.github.com/jacquelinekay/0cee73d1d2d78d8edd31\">https://gist.github.com/jacquelinekay/0cee73d1d2d78d8edd31</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1445446759, "post_id": 33265006, "comment_id": 54331348, "body": "What do you mean by &quot;not working&quot;?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1445446770, "post_id": 33265006, "comment_id": 54331352, "body": "Try renaming <code>max</code> to something else."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445446803, "post_id": 33265006, "comment_id": 54331369, "body": "I&#39;ll be gentle as it&#39;s your first day here. You&#39;re going to have to ask your question more clearly. It&#39;s currently unclear what your are asking. The two functions you present differ in more than one way. They have different template arguments <i>and</i> different argument passing schemes."}, {"owner": {"reputation": 37, "user_id": 5108698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hQG34.jpg?s=128&g=1", "display_name": "Md Zobayer", "link": "https://stackoverflow.com/users/5108698/md-zobayer"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445447290, "post_id": 33265006, "comment_id": 54331656, "body": "Sorry for my bad English. I mean doesn&#39;t compile. @Richard Hodges  I ask why this program shows error on compile time.  #include &lt;iostream&gt;  using namespace std;  template &lt;typename T&gt;  T max (T arg1, T arg2) {      return (arg1 &gt; arg2) ? arg1 : arg2;  };  int main() {      int a = 12;     int b = 24;     cout &lt;&lt; max(a,b) &lt;&lt; endl;     double x = 2.25;     double y = .25;     cout &lt;&lt; max(x,y) &lt;&lt; endl;     string w1 = &quot;apple&quot;;     string w2 = &quot;aardvark&quot;;     cout &lt;&lt; max(w1,w2) &lt;&lt; endl;      return (0); };"}], "owner": {"reputation": 37, "user_id": 5108698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hQG34.jpg?s=128&g=1", "display_name": "Md Zobayer", "link": "https://stackoverflow.com/users/5108698/md-zobayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1445446763, "answer_count": 0, "score": 0, "last_activity_date": 1445447231, "creation_date": 1445446366, "last_edit_date": 1445447231, "question_id": 33265006, "link": "https://stackoverflow.com/questions/33265006/why-does-this-c-generic-function-work-by-reference-but-doesnt-work-by-value", "closed_reason": "Duplicate", "title": "Why does this C++ generic function work by reference but doesn&#39;t work by value?", "body": "<p>I am new in programming world. I am facing a problem with generic function.\n<strong>T max(T arg1, U arg2)</strong> function doesn't compile in a program. but when i change the parameter of <strong>arg1</strong> and <strong>arg2</strong> to <strong>&amp;agr1</strong> and <strong>&amp;arg2</strong> then the program compile with no error. The program is given below.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T&gt;\n\nT max (T &amp;arg1, T &amp;arg2) {\n\n    return (arg1 &gt; arg2) ? arg1 : arg2;\n\n};\n\nint main() {\n\n    int a = 12;\n    int b = 24;\n    cout &lt;&lt; max(a,b) &lt;&lt; endl;\n    double x = 2.25;\n    double y = .25;\n    cout &lt;&lt; max(x,y) &lt;&lt; endl;\n    string w1 = \"apple\";\n    string w2 = \"aardvark\";\n    cout &lt;&lt; max(w1,w2) &lt;&lt; endl;\n\n    return (0);\n};\n</code></pre>\n\n<p>I can't understand why this program doesn't work by value.\nBut another program this function work both passing value and reference. Another program is given below</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T, typename U&gt;\n\nT max (T arg1, U arg2) {\n\n    return (arg1 &gt; arg2) ? arg1 : arg2;\n\n};\n\nint main() {\n\n    double num1 = 35.55;\n    int num2 = 130;\n    cout &lt;&lt; \"Max value is: \" &lt;&lt; max(num1,num2) &lt;&lt; endl;\n\n    return (0);\n};\n</code></pre>\n\n<p>Please help me and advance thanks for giving your valuable time.</p>\n"}, {"tags": ["c++", "arrays", "string"], "comments": [{"owner": {"reputation": 9127, "user_id": 167288, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c29056d9ec0bece9dc7345a0f8d794f7?s=128&d=identicon&r=PG", "display_name": "Adem", "link": "https://stackoverflow.com/users/167288/adem"}, "edited": false, "score": 0, "creation_date": 1445446153, "post_id": 33264900, "comment_id": 54331008, "body": "it is very obvious that you can not set something in const var. you may try , char *p = strdup(problem.c_str());"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1445446170, "post_id": 33264900, "comment_id": 54331016, "body": "What operations do you need to do on a <code>string</code> that that you need to convert it to a <code>char*</code>?  Anything you can do with a <code>char*</code> you can do with a <code>string</code>"}, {"owner": {"reputation": 174, "user_id": 2623589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0002b7e4130ce37697703d2df6945d84?s=128&d=identicon&r=PG", "display_name": "computador7", "link": "https://stackoverflow.com/users/2623589/computador7"}, "edited": false, "score": 0, "creation_date": 1445446588, "post_id": 33264900, "comment_id": 54331246, "body": "I believe you can try the following: char* p = &amp;problem[0];"}, {"owner": {"reputation": 235, "user_id": 4062381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1040140919/picture?type=large", "display_name": "Pu&#233;rtolas Luis", "link": "https://stackoverflow.com/users/4062381/pu%c3%a9rtolas-luis"}, "edited": false, "score": 0, "creation_date": 1445447070, "post_id": 33264900, "comment_id": 54331536, "body": "I tried strdup(problem.c_str()); but I get: &#39;strdup&#39; was not declared in this scope, should I include something at the beginning of my code to make it work?"}, {"owner": {"reputation": 2008, "user_id": 3483291, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PAosg.jpg?s=128&g=1", "display_name": "vishal", "link": "https://stackoverflow.com/users/3483291/vishal"}, "edited": false, "score": 0, "creation_date": 1445447203, "post_id": 33264900, "comment_id": 54331595, "body": "you want #include&lt;string.h&gt;"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1445447335, "post_id": 33264900, "comment_id": 54331690, "body": "<code>strdup</code> is non-standard."}, {"owner": {"reputation": 105, "user_id": 4975850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efc586ce10bc152ccea1497e3d7f4d3b?s=128&d=identicon&r=PG&f=1", "display_name": "David Pulse", "link": "https://stackoverflow.com/users/4975850/david-pulse"}, "reply_to_user": {"reputation": 9127, "user_id": 167288, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c29056d9ec0bece9dc7345a0f8d794f7?s=128&d=identicon&r=PG", "display_name": "Adem", "link": "https://stackoverflow.com/users/167288/adem"}, "edited": false, "score": 0, "creation_date": 1445448744, "post_id": 33264900, "comment_id": 54332481, "body": "Besides @adem, did anyone note that he is trying to change a const variable with his array call?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 105, "user_id": 4975850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efc586ce10bc152ccea1497e3d7f4d3b?s=128&d=identicon&r=PG&f=1", "display_name": "David Pulse", "link": "https://stackoverflow.com/users/4975850/david-pulse"}, "edited": false, "score": 0, "creation_date": 1445542303, "post_id": 33264900, "comment_id": 54378287, "body": "@DavidPulse Er, that&#39;s what the question&#39;s about."}], "answers": [{"tags": [], "owner": {"reputation": 2008, "user_id": 3483291, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PAosg.jpg?s=128&g=1", "display_name": "vishal", "link": "https://stackoverflow.com/users/3483291/vishal"}, "is_accepted": false, "score": 0, "last_activity_date": 1445446730, "last_edit_date": 1445446730, "creation_date": 1445446257, "answer_id": 33264977, "question_id": 33264900, "link": "https://stackoverflow.com/questions/33264900/passing-a-string-to-a-char-array-then-modify-the-char-array-at-position-x-in-c/33264977#33264977", "title": "Passing a string to a char array, then modify the char array at position x in C", "body": "<blockquote>\n  <p>p[1]=' ';</p>\n</blockquote>\n\n<p>is not valid as const char * is read-only pointer.</p>\n\n<p>in other words, it is a const pointer.</p>\n\n<p>remember:</p>\n\n<blockquote>\n  <p>When const appears to the left of the *, what's pointed to is constant, and if const appears to the right of the *, the pointer itself is constant. If const appears on both sizes, both are constants.</p>\n</blockquote>\n\n<p>this code might work:</p>\n\n<pre><code>char problem[]=\"RGGB\";\nchar* p = problem;\np[1]=' ';\ncout&lt;&lt;problem;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 2, "last_activity_date": 1445446842, "last_edit_date": 1495539886, "creation_date": 1445446476, "answer_id": 33265045, "question_id": 33264900, "link": "https://stackoverflow.com/questions/33264900/passing-a-string-to-a-char-array-then-modify-the-char-array-at-position-x-in-c/33265045#33265045", "title": "Passing a string to a char array, then modify the char array at position x in C", "body": "<p>To access the \"interal string\" (I mean a <code>const char*</code>) of a <code>std::string</code>, there are two member functions provided: <a href=\"http://www.cplusplus.com/reference/string/string/c_str/\" rel=\"nofollow noreferrer\"><code>std::string::c_str</code></a> and <a href=\"http://www.cplusplus.com/reference/string/string/data/\" rel=\"nofollow noreferrer\"><code>std::string::data</code></a>. Until C++11, the difference was that <code>std::string::data</code> wasn't bound to return a pointer to a null-terminated <code>const char*</code> while <code>std::string::c_str</code> was. Now, they are equivalent. And both return a <code>const char*</code>, even before C++11.</p>\n\n<p>There are several approaches to your problem:</p>\n\n<ol>\n<li><p>Use <code>std::strdup</code> or <code>std::str(n)cpy</code> to duplicate the string and write to the duplicate.</p></li>\n<li><p>Use a <code>const_cast</code>. Pretty drastic, but, <a href=\"https://stackoverflow.com/questions/24298212/can-i-const-cast-c-str-if-the-string-is-const\">if it doesn't hurt any rules</a> (FYI, it does), works.</p></li>\n<li><p>Don't use <code>std::string</code> at all. Do what you want with a <code>char*</code> and then optionally convert it to a <code>std::string</code> later.</p></li>\n<li><p>Just use the functionality of <code>std::string</code>.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1445447453, "post_id": 33265106, "comment_id": 54331763, "body": "&quot;string [\u2026] does not provide directly alterable access to its innerds via a char *&quot;, what about <code>&amp;str.at(0)</code>?"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1445541224, "post_id": 33265106, "comment_id": 54377611, "body": "str.at(0) provides a const reference as well. If the contents of a string were user alterable it would break compiler optimizations and memory layout sharing. You can always cast away const as C++ allows dangerous things but it makes you do it on purpose. It might work now on some or even all compilers but it could well fail to work on future compilers even from the same vendor."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1445541834, "post_id": 33265106, "comment_id": 54377981, "body": "Uhm, <code>at</code> also has a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/at\" rel=\"nofollow noreferrer\">non-const overload</a>. Taking the address from that yields a <code>char*</code> that you can use to modify the string <i>perfectly legally</i>. (as long as you don&#39;t add a <code>&#39;\\0&#39;</code> in the middle or modify the terminating <code>&#39;\\0&#39;</code>)"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1445551701, "post_id": 33265106, "comment_id": 54383445, "body": "I stand corrected. I noticed that str[0] also returns a non const ref. in addition to a const ref so it should be usable to directly write to a string element. Always assumed otherwise given that  c_str() doesn&#39;t do that. I suppose it&#39;s so implementers can peel off a copy and add a null for C library functions without having to store a \\0 at the end of each string."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1445551819, "post_id": 33265106, "comment_id": 54383478, "body": "Don&#39;t string objects allow \\0s in the middle? I thought the only reason to avoid that was for use with old C functions via c_str()?"}], "tags": [], "owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "is_accepted": false, "score": 0, "last_activity_date": 1445446670, "creation_date": 1445446670, "answer_id": 33265106, "question_id": 33264900, "link": "https://stackoverflow.com/questions/33264900/passing-a-string-to-a-char-array-then-modify-the-char-array-at-position-x-in-c/33265106#33265106", "title": "Passing a string to a char array, then modify the char array at position x in C", "body": "<p>string, a C++ class, does not provide directly alterable access to its innerds via a char *. While you could cast away the const, this is dangerous because compilers may use the const as an optimization path.</p>\n\n<p>If you absolutely need to do this just use a char array, not a string or alter the contents of the string using string methods.</p>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1445447019, "creation_date": 1445447019, "answer_id": 33265204, "question_id": 33264900, "link": "https://stackoverflow.com/questions/33264900/passing-a-string-to-a-char-array-then-modify-the-char-array-at-position-x-in-c/33265204#33265204", "title": "Passing a string to a char array, then modify the char array at position x in C", "body": "<p>The answer is in your question:</p>\n\n<blockquote>\n  <p>I need it to be in a <code>char</code> array</p>\n</blockquote>\n\n<p>Then <em>put</em> it in a <code>char</code> array:</p>\n\n<pre><code>char problem[] = \"RGGB\";\nproblem[1] = ' ';\n</code></pre>\n\n<p>Problem solved.</p>\n\n<p>If, on the other hand, you want to solve the problem using <em>actual</em> C++:</p>\n\n<pre><code>std::string problem = \"RGGB\";\nproblem.at(1) = ' ';\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 4062381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1040140919/picture?type=large", "display_name": "Pu&#233;rtolas Luis", "link": "https://stackoverflow.com/users/4062381/pu%c3%a9rtolas-luis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1445447019, "creation_date": 1445445986, "last_edit_date": 1445446867, "question_id": 33264900, "link": "https://stackoverflow.com/questions/33264900/passing-a-string-to-a-char-array-then-modify-the-char-array-at-position-x-in-c", "title": "Passing a string to a char array, then modify the char array at position x in C", "body": "<p>So I have a string which contains <code>\"RGGB\"</code> and I need it to be in a <code>char</code> array to perform some operations. Then I need to replace certain characters for a blank space, for example the first <code>'G'</code>, so that my <code>char</code> array remains <code>\"R GB\"</code>.</p>\n\n<p>How can I do this? So far I tried this solution:</p>\n\n<pre><code>int main()\n{\n    string problem=\"RGGB\";\n    const char *p=problem.c_str();\n    p[1]=' ';\n    return p;\n}\n</code></pre>\n\n<p>I get the error:</p>\n\n<blockquote>\n  <p>assignment of read only location <code>*(p + ((sizetype)i))</code></p>\n</blockquote>\n"}, {"tags": ["c++", "list"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1445445962, "post_id": 33264820, "comment_id": 54330882, "body": "What did the person who got different out use?  I cannot replicate the second example on g++, clang or MSVS"}, {"owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 1, "creation_date": 1445446432, "post_id": 33264820, "comment_id": 54331155, "body": "There are a couple of numbers like 70,210 etc. which are not even a part of your program. Are you sure you both are using the same code? I don&#39;t think so."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1445446577, "post_id": 33264820, "comment_id": 54331238, "body": "Wild guess: Was the other person using something like <code>#define list vector</code>? Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1445447089, "post_id": 33264820, "comment_id": 54331549, "body": "<a href=\"http://ideone.com/mqbiDe\" rel=\"nofollow noreferrer\">Here</a> the result is your version."}], "answers": [{"comments": [{"owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 0, "creation_date": 1445448128, "post_id": 33265458, "comment_id": 54332112, "body": "Bravo! This is it(must be) :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "edited": false, "score": 0, "creation_date": 1445456304, "post_id": 33265458, "comment_id": 54336748, "body": "@anurag86 How was your question asking about <i>small changes</i>, that reproduce the 2nd behavior/output? Are you trolling us here?"}, {"owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1445482314, "post_id": 33265458, "comment_id": 54346205, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 : I didnt understand the context of your comment perhaps because you didnt understand how i appreciated atkins the way he reached this answer(which i couldnt have so easily)"}, {"owner": {"reputation": 25, "user_id": 5445583, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-W-ytqteeY-U/AAAAAAAAAAI/AAAAAAAABDE/f_02_Ll5HmA/photo.jpg?sz=128", "display_name": "Tuonelan Joutsen", "link": "https://stackoverflow.com/users/5445583/tuonelan-joutsen"}, "edited": false, "score": 0, "creation_date": 1445524071, "post_id": 33265458, "comment_id": 54367115, "body": "Thank you so much! Now I can understand why they didn&#39;t get the same output..."}], "tags": [], "owner": {"reputation": 1891, "user_id": 995218, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZKQoe.jpg?s=128&g=1", "display_name": "atkins", "link": "https://stackoverflow.com/users/995218/atkins"}, "is_accepted": false, "score": 2, "last_activity_date": 1445447870, "creation_date": 1445447870, "answer_id": 33265458, "question_id": 33264820, "link": "https://stackoverflow.com/questions/33264820/want-to-understand-why-is-this-same-code-producing-a-different-output-for-someon/33265458#33265458", "title": "Want to understand why is this same code producing a different output for someone else", "body": "<p>It takes two small changes to your code to get the second output:</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nint main()\n{\n    list&lt;int&gt; intList;\n    ostream_iterator&lt;int&gt; screen(cout, \" \");\n    list&lt;int&gt;::iterator listIt;\n    intList.push_back(5);\n    intList.push_front(23);\n    intList.push_front(45);\n    intList.push_back(0);  // 1. You had intList.pop_back();\n    intList.push_back(35);\n    intList.push_front(0);\n    intList.push_back(50);\n    intList.push_front(34);\n    copy(intList.begin(), intList.end(), screen);\n    cout &lt;&lt; endl;     // 2. Add an extra end-of-line\n    listIt = intList.begin();\n    intList.insert(listIt, 76);\n    ++listIt;\n    ++listIt;\n    intList.insert(listIt, 38);\n    intList.pop_back();\n    ++listIt;\n    ++listIt;\n    intList.erase(listIt);\n    intList.push_front(2 * intList.back());\n    intList.push_back(3 * intList.front());\n    copy(intList.begin(), intList.end(), screen);\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>34 0 45 23 5 0 35 50 \n70 76 34 0 38 45 23 0 35 210\n</code></pre>\n\n<p>I suspect you are not both running exactly the same code...</p>\n"}], "owner": {"reputation": 25, "user_id": 5445583, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-W-ytqteeY-U/AAAAAAAAAAI/AAAAAAAABDE/f_02_Ll5HmA/photo.jpg?sz=128", "display_name": "Tuonelan Joutsen", "link": "https://stackoverflow.com/users/5445583/tuonelan-joutsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1445457380, "answer_count": 1, "score": -3, "last_activity_date": 1445447870, "creation_date": 1445445698, "last_edit_date": 1445447128, "question_id": 33264820, "link": "https://stackoverflow.com/questions/33264820/want-to-understand-why-is-this-same-code-producing-a-different-output-for-someon", "closed_reason": "Not suitable for this site", "title": "Want to understand why is this same code producing a different output for someone else", "body": "<p>I have a code that I need to find its output:</p>\n\n<pre><code>int main()\n{\n    list&lt;int&gt; intList;\n    ostream_iterator&lt;int&gt; screen(cout, \" \");\n    list&lt;int&gt;::iterator listIt;\n    intList.push_back(5);\n    intList.push_front(23);\n    intList.push_front(45);\n    intList.pop_back();\n    intList.push_back(35);\n    intList.push_front(0);\n    intList.push_back(50);\n    intList.push_front(34);\n    copy(intList.begin(), intList.end(), screen);\n    listIt = intList.begin();\n    intList.insert(listIt, 76);\n    ++listIt;\n    ++listIt;\n    intList.insert(listIt, 38);\n    intList.pop_back();\n    ++listIt;\n    ++listIt;\n    intList.erase(listIt);\n    intList.push_front(2 * intList.back());\n    intList.push_back(3 * intList.front());\n    copy(intList.begin(), intList.end(), screen);\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I get this output:</p>\n\n<pre><code>34 0 45 23 35 50 46 76 34 0 38 45 23 138\n</code></pre>\n\n<p>While someone else gets:</p>\n\n<pre><code>34 0 45 23 5 0 35 50\n70 76 34 0 38 45 23 0 35 210\n</code></pre>\n\n<p>Which one is correct and why?</p>\n"}, {"tags": ["c++", "opencv", "mat", "opencv3.0", "opencv4android"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445445628, "post_id": 33264766, "comment_id": 54330678, "body": "Are you sure casting an object of <code>jlong</code> to a pointer is alright?"}, {"owner": {"reputation": 442, "user_id": 4825376, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f9948277df055d3e778bae275b3680e?s=128&d=identicon&r=PG&f=1", "display_name": "Adham Enaya", "link": "https://stackoverflow.com/users/4825376/adham-enaya"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445445703, "post_id": 33264766, "comment_id": 54330720, "body": "jlong is the address of the native object(as passed from java). is not that right ?"}, {"owner": {"reputation": 442, "user_id": 4825376, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f9948277df055d3e778bae275b3680e?s=128&d=identicon&r=PG&f=1", "display_name": "Adham Enaya", "link": "https://stackoverflow.com/users/4825376/adham-enaya"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445446584, "post_id": 33264766, "comment_id": 54331243, "body": "@cad Do you see any error in that ? can you suggest something about it ?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445446652, "post_id": 33264766, "comment_id": 54331288, "body": "Maybe the object the reference in the function at some point goes out of scope, resulting in undefined behavior (and possible a segfault), but that&#39;s just a wild guess."}], "answers": [{"tags": [], "owner": {"reputation": 4400, "user_id": 1531708, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ngDh7.png?s=128&g=1", "display_name": "PhilLab", "link": "https://stackoverflow.com/users/1531708/phillab"}, "is_accepted": false, "score": 0, "last_activity_date": 1445516103, "creation_date": 1445516103, "answer_id": 33280811, "question_id": 33264766, "link": "https://stackoverflow.com/questions/33264766/error-signal-11-sigsegv-code-1/33280811#33280811", "title": "Error: signal 11 (SIGSEGV), code 1", "body": "<p>Just write</p>\n\n<pre><code>public Mat onCameraFrame(CvCameraViewFrame inputFrame) {\n    mGray = inputFrame.gray()\n    return inputFrame.rgba();\n}\n</code></pre>\n\n<p>OpenCV handles the conversion for you. What happens if you call the JNI code directly in the onCameraFrame() callback?</p>\n"}], "owner": {"reputation": 442, "user_id": 4825376, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f9948277df055d3e778bae275b3680e?s=128&d=identicon&r=PG&f=1", "display_name": "Adham Enaya", "link": "https://stackoverflow.com/users/4825376/adham-enaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445516103, "creation_date": 1445445543, "last_edit_date": 1445446540, "question_id": 33264766, "link": "https://stackoverflow.com/questions/33264766/error-signal-11-sigsegv-code-1", "title": "Error: signal 11 (SIGSEGV), code 1", "body": "<p>I am calling C++ function gives me this error: <code>signal 11 (SIGSEGV), code 1</code>\nThe crash dump is: </p>\n\n<pre><code>Build fingerprint: 'google/hammerhead/hammerhead:6.0/MRA58K/2256973:user/release-keys'\npid: 19580, tid: 19706, name: Thread-6405  &gt;&gt;&gt; com.adhamenaya &lt;&lt;&lt;\nsignal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0xfa0\nStack frame 10-21 19:25:04.423   200   200 F DEBUG   :     #00 pc 0041c59e  /data/app/com.adhamenaya-2/lib/arm/libGrafty.so (cv::Mat::copyTo(cv::_Outp\nutArray const&amp;) const+173): Routine cv::Mat::copyTo(cv::_OutputArray const&amp;) const at ??:?\nStack frame 10-21 19:25:04.423   200   200 F DEBUG   :     #01 pc 0023b034  /data/app/com.adhamenaya-2/lib/arm/libGrafty.so (cv::Mat::clone() const+56\n): Routine cv::Mat::clone() const at D:/scryptech/ndk_project/OpenCV-android-sdk/sdk/native/jni/include/opencv2/core/mat.inl.hpp:628 (discriminator 1)\n\nStack frame 10-21 19:25:04.423   200   200 F DEBUG   :     #02 pc 0023b3a4  /data/app/com.adhamenaya-2/lib/arm/libGrafty.so (GraftySystem::setCurrentF\nrame(cv::Mat&amp;)+44): Routine GraftySystem::setCurrentFrame(cv::Mat&amp;) at C:\\Users\\aenaya\\git\\GraftyAndroid\\GraftyAndroid/jni/grafty-system-settings.cpp:\n39\nStack frame 10-21 19:25:04.423   200   200 F DEBUG   :     #03 pc 002b339c  /data/app/com.adhamenaya-2/lib/arm/libGrafty.so (Java_com_adhamenaya_Nativ\ne_runGrafty+492): Routine Java_com_adhamenaya_Native_runGrafty at C:\\Users\\aenaya\\git\\GraftyAndroid\\GraftyAndroid/jni/grafty-hr-main.cpp:96 (discrimin\nator 1)\nStack frame 10-21 19:25:04.423   200   200 F DEBUG   :     #04 pc 0036a627  /data/app/com.adhamenaya-2/oat/arm/base.odex (offset 0x29c000) (byte[] com\n.adhamenaya.Native.runGrafty(java.lang.String, java.lang.String, java.lang.String, java.lang.Long)+170)\nStack frame 10-21 19:25:04.423   200   200 F DEBUG   :     #05 pc 00369f33  /data/app/com.adhamenaya-2/oat/arm/base.odex (offset 0x29c000) (void com.a\ndhamenaya.MainActivity$2.run()+574)\nStack frame 10-21 19:25:04.424   200   200 F DEBUG   :     #06 pc 729298d1  /data/dalvik-cache/arm/system@framework@boot.oat (offset 0x1eb1000)\n</code></pre>\n\n<p>where:\n<strong>grafty-hr-main.cpp:96</strong> </p>\n\n<pre><code>JNIEXPORT jbyteArray JNICALL Java_com_adhamenaya_Native_runGrafty(JNIEnv * env,\n        jobject obj, jstring faceCascadeFile, jstring noseCascadeFile,\n        jstring landmarks, jlong frame) {\n\n    cv::Mat&amp; inFrame = *(cv::Mat*) frame;\n\n\nline 96 &gt;&gt;&gt;&gt;    gsys.setCurrentFrame(inFrame);\n</code></pre>\n\n<p>and: </p>\n\n<p><strong>grafty-system-settings.cpp:39</strong></p>\n\n<pre><code>void GraftySystem::setCurrentFrame(cv::Mat&amp; inFrame) {\n    cv::Size2d imgRes;\n    float resRatio;\nline 39 &gt;&gt;&gt;&gt;&gt;   cv::Mat frame = inFrame.clone();\n\n}\n</code></pre>\n\n<p>and the call of the JNI function : </p>\n\n<pre><code>Java_com_adhamenaya_Native_runGrafty\n</code></pre>\n\n<p>is like this : </p>\n\n<pre><code>private Mat mGray;\n\n    public Mat onCameraFrame(CvCameraViewFrame inputFrame) {\n        mRgba = inputFrame.rgba();\n        Imgproc.cvtColor(mRgba, mGray, Imgproc.COLOR_BGRA2GRAY);\n        if (mRgba.empty())\n            return null;\n        else if (mRgba.channels() &gt; 1)\n            Imgproc.cvtColor(mRgba, mGray, Imgproc.COLOR_BGRA2GRAY);\n        else\n            mGray = mRgba;\n\n        return mRgba;\n    }\n...\n...\nresult = Native.runGrafty(mFaceCascadeFile,\n                        mNoseCascadeFile, mLandmarks,\n                        mGray.getNativeObjAddr());\n</code></pre>\n\n<p>It seems the problem in the frame parameter. Can you please help me in figuring out what is the problem ?</p>\n"}, {"tags": ["c++", "templates", "c++11", "c++14", "type-deduction"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1445445701, "post_id": 33264650, "comment_id": 54330718, "body": "can you post example code which triggers the error you mention <code>variable &#39;lambda&#39; declared with &#39;auto&#39; type cannot appear in its own initializer</code> ?"}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1445446088, "post_id": 33264650, "comment_id": 54330968, "body": "@m.s. <code>auto lambda = [] (auto const &amp; first, decltype(first) second, auto const &amp;... rest) { return first + lambda(second, rest...); };</code> here lambda variable should be captured by default by value (the same is for <code>[&amp;]</code> or <code>[&amp;lambda]</code>)."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1445487539, "post_id": 33264650, "comment_id": 54347420, "body": "For the second example, maybe <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2015/p0091r0.html\" rel=\"nofollow noreferrer\">Template parameter deduction for constructors (Rev. 3)</a> will help."}], "answers": [{"comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1445445936, "post_id": 33264861, "comment_id": 54330861, "body": "Really base case is my omission, but what about second example?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1445446059, "post_id": 33264861, "comment_id": 54330943, "body": "@Orient I don&#39;t know what your second example is supposed to mean."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1445446184, "post_id": 33264861, "comment_id": 54331025, "body": "Second example mean that first template parameter of <code>std::vector</code> should be deduced so, that <code>std::initializer_list</code> constructor to be viable."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1445446283, "post_id": 33264861, "comment_id": 54331074, "body": "@Orient That doesn&#39;t make any sense."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1445446407, "post_id": 33264861, "comment_id": 54331144, "body": "It is controversial conclusion."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1445445816, "creation_date": 1445445816, "answer_id": 33264861, "question_id": 33264650, "link": "https://stackoverflow.com/questions/33264650/automatic-deduction-of-template-parameters-for-alias-templates-and-template-clas/33264861#33264861", "title": "Automatic deduction of template parameters for alias templates and template classes", "body": "<p>No, there is no way to do what you want. The way to deduce the result of an expression is to use <code>auto</code>. There is no way to deduce types for a function template or alias template. Consider the simplest case:</p>\n\n<pre><code>std::function&lt;auto&gt; if_this_existed = [](int x, int y) { return x + y; };\n</code></pre>\n\n<p>You probably expect <code>std::function&lt;int(int, int)&gt;</code>. But <code>std::function&lt;void(int, int)&gt;</code> works. So does <code>std::function&lt;long(long, long)&gt;</code>. There really is no one thing to deduce. Furthermore, for a <em>generic</em> lambda, it doesn't make sense to assign a <em>specific</em> type:</p>\n\n<pre><code>std::function&lt;void(???)&gt; print = [](auto x) { std::cout &lt;&lt; x; };\n</code></pre>\n\n<p>The lambda can be called with any type that's printable, but whatever we put in <code>???</code> would restrict <code>print</code> to be just that type. So this fails too.</p>\n\n<p>So ultimately, no, you cannot write your generic variadic lambda recursively. Although, <code>sum</code> would be impossible to write recursively anyway since you wouldn't be able to write a base case. The right way to write such a generic <code>sum()</code> would be to use a fold expression (C++1z):</p>\n\n<pre><code>auto sum = [] (auto const&amp;... args) {\n    return (args + ...);\n};\n</code></pre>\n"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 33264861, "answer_count": 1, "score": 1, "last_activity_date": 1445446220, "creation_date": 1445445108, "last_edit_date": 1445446220, "question_id": 33264650, "link": "https://stackoverflow.com/questions/33264650/automatic-deduction-of-template-parameters-for-alias-templates-and-template-clas", "title": "Automatic deduction of template parameters for alias templates and template classes", "body": "<p>I want to make stateless lambda function with variadic template parameter list to be recursive. But I need type erasure to avoid errors like <code>variable 'lambda' declared with 'auto' type cannot appear in its own initializer</code>. Variadic template parameter list requires corresponding functional object to have templated <code>operator ()</code>. For simple stateless lambda function I can cast it to pointer to simple free old function, but how to achieve a similar for <em>variadic</em> stateless lambda function? I think what I want is <em>automatic type deduction for template parameter list</em> (during instantiation of template variables: during call or during assignment): (pseudocode)</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\n#include &lt;cstdlib&gt;\n\ntemplate&lt; typename first, typename second, typename ...rest &gt;\nusing fp = first (*)(first const &amp;, second const &amp;, rest const &amp;...); // at least binary function\n\nint\nmain()\n{\n    template fp sum = [] (auto const &amp; first, decltype(first) second, auto const &amp;... rest) { return first + sum(second, rest...); };\n    //              ^ assignment                                                                                ^ call\n    std::cout &lt;&lt; sum(1, 2.0, 3.0f) &lt;&lt; std::endl;\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Is it possible to achieve such a behaviour currently (<em>C++14</em>) (say, using <code>std::function</code> or another way of type erasure)? Is there proposal for similar language feature? Or maybe it totally forbidden by already existent language rules?</p>\n\n<p>Another possible example where it will be useful: (pseudocode)</p>\n\n<pre><code>template std::vector v{1, 2, 3};\nstatic_assert(std::is_same&lt; decltype(v), std::vector&lt; int &gt; &gt;{});\n</code></pre>\n"}, {"tags": ["c++", "com"], "comments": [{"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 1, "creation_date": 1445445317, "post_id": 33264568, "comment_id": 54330476, "body": "Put a breakpoint in <code>QueryInterface</code> and see why it returns <code>E_NOINTERFACE</code>. Does your call even reach the server? Or is the <code>QueryInterface</code> implementation mishandling the interface request? Are you sure that you&#39;re using the right interface GUID?"}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1445446630, "post_id": 33264568, "comment_id": 54331268, "body": "Run it in the debugger, put a breakpoint on it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1445457263, "post_id": 33264568, "comment_id": 54337240, "body": "You can look at the object&#39;s type library (if it publishes one, which it doesn&#39; t have to , but typically they do)"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1445467072, "post_id": 33264568, "comment_id": 54342032, "body": "for each(GUID g in AllGuids) { }"}, {"owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "reply_to_user": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1445504206, "post_id": 33264568, "comment_id": 54354590, "body": "@Ben on what precisely? I can see the COM process is being run up (good sign) but after that I don&#39;t have a clue what&#39;s happening"}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1445507149, "post_id": 33264568, "comment_id": 54356522, "body": "Are your running the COM server process in the debugger? Or not?"}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1445508750, "post_id": 33264568, "comment_id": 54357499, "body": "Here&#39;s a clue: Put _CrtDebugBreak() in your QueryInterface implementation. Then you can &quot;Attach&quot; to the process at the relevant point."}], "answers": [{"comments": [{"owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1445505087, "post_id": 33265304, "comment_id": 54355132, "body": "I&#39;ve reworked my question; I think your comment about proxy stubs could be the key here. I only registered the COM process, is that not sufficient? Woudl that explain that COM knows to run up the right process based on the class-id, but doesn&#39;t know how how to get the interface I ask for?"}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "reply_to_user": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1445507402, "post_id": 33265304, "comment_id": 54356694, "body": "Your edit still leaves the question incomplete. You do register CLSID to make it discoverable, but this does not cover the question how to deal with the interface. Apparently it needs marshaling and if it&#39;s somcethnig custom then it does not receive marshaling for granted. <code>E_NOINTERFACE</code> suggests the COM could access the CLSID in question, the problem is exactly in the interface."}, {"owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1445507953, "post_id": 33265304, "comment_id": 54357050, "body": "Unless a simple project setting when building would affect this, I assume all this stuff works since as mentioned, the same interface and approach is used in many of our modules. I&#39;m basically making a new module copy-pasting our normal approach - but I don&#39;t know if the issue is my code, or merely that my dev-PC doesn&#39;t have the right stuff registered. I&#39;m leaning to the latter."}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "reply_to_user": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1445508966, "post_id": 33265304, "comment_id": 54357625, "body": "You can simply create a new ATL EXE project usign wizard and add ATL Simple object using wizard with all defaults. Created out of process COM server should be well accessible by simplest client code. Then you would be able to compare your non-working code with this working code."}, {"owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "edited": false, "score": 0, "creation_date": 1445514172, "post_id": 33265304, "comment_id": 54360698, "body": "So it turns out the clue was the proxy stubs - I&#39;d simply forgotten to register them explicitly as well as the COM server module."}], "tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": true, "score": 3, "last_activity_date": 1445447789, "last_edit_date": 1445447789, "creation_date": 1445447360, "answer_id": 33265304, "question_id": 33264568, "link": "https://stackoverflow.com/questions/33264568/com-process-runs-up-but-only-iunknown-is-queryable/33265304#33265304", "title": "COM process runs up but only IUnknown is queryable", "body": "<p>Your COM server hosted by .EXE is out-of-process server. Consuming its interfaces you access the server from another process: you don't talk to the server directly, instead you talk to proxy the COM subsystem created for you. </p>\n\n<p>Client process: Your client code -> Proxy -> (Magic)</p>\n\n<p>Server process: (Magic) -> Stub -> Your server code</p>\n\n<p>Well, proxy/stub is a part of magic too, but I separated them to help understanding that client code is interfaced to something tangible but not yet real server.</p>\n\n<p>Proxy, stub and the rest of the magic create an imitation of the COM interfaces your client code requests and then forward the calls to real server, then take data back. They can only do interfaces that are \"marshalable\", for which marshaling code exists, where proxy/stub pair creation is possible.</p>\n\n<p>Not every interface can be marshaled, and this finally gets us to the situation that server implements an interface, you know it for sure, and you still cannot obtain it on client side.</p>\n\n<p>There are a few options how to get marshaling done, and the easiest way to accomplish the task with ATL is to make sure:</p>\n\n<ul>\n<li>the interface is derived from <code>IDispatch</code>, is marked <code>oleautomation</code> in the type library</li>\n<li>the interface is in library section of IDL code, or otherwise is included into TLB file and is visible in your EXE when inspected with OleView</li>\n<li>COM server (EXE) registers well and your COM object implements the interface correctly (COM_MAP entry etc)</li>\n</ul>\n\n<p>In this case you are taking advantage of standard marshaler (also known as <code>PSOAInterface</code>) for OLE automation interfaces and you have proxy/stub pairs created for you without any additional effort.</p>\n\n<p>You might want to look some code snippets up here: <a href=\"http://diranieh.com/ATLCOM/IDL.htm\" rel=\"nofollow\">http://diranieh.com/ATLCOM/IDL.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "is_accepted": false, "score": 0, "last_activity_date": 1445490875, "creation_date": 1445490875, "answer_id": 33273819, "question_id": 33264568, "link": "https://stackoverflow.com/questions/33264568/com-process-runs-up-but-only-iunknown-is-queryable/33273819#33273819", "title": "COM process runs up but only IUnknown is queryable", "body": "<p>Try calling OleRun() before your call to QueryInterface().  If the object is out of process, you are only talking to the handler object.  The EXE is probably not even running.  Calling OleRun will cause it to load.  Then querying for the interface is more likely to work.</p>\n"}], "owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 33265304, "answer_count": 2, "score": -1, "last_activity_date": 1445504996, "creation_date": 1445444911, "last_edit_date": 1445504996, "question_id": 33264568, "link": "https://stackoverflow.com/questions/33264568/com-process-runs-up-but-only-iunknown-is-queryable", "title": "COM process runs up but only IUnknown is queryable", "body": "<p>I am a bit of a weird situation. I've created a COM server (.exe module) and registered it; I can see the entries in my registry.</p>\n\n<p>This server registers a class id, and when the process starts up it registers an object against that id which supports a custom interface <code>ISomething</code>:</p>\n\n<pre><code>//rough pseudo code\nMyClass : public ISomething { ... };\n\nmain(){\n ::CoInitialize(NULL);\n MyClass obj;\n CoRegisterClassObject(ClassId, (ISomething *)&amp;obj, ...);\n ...\n}\n</code></pre>\n\n<p>When I try to co-create the clsid with IUnknown from a test-app, the COM process runs up and I get a non-NULL IUnknown pointer.</p>\n\n<p>But if I try to cocreate using <code>ISomething</code> I get <code>E_NOINTERFACE</code>.</p>\n\n<p>Please note this code setup is tried and tested over many modules, it's basically copy-pasted. So I believe the issue is a registry/configuration one.</p>\n\n<p>I'm on a \"clean\" dev PC so the only thing I've registered is the COM .exe linked to <code>ClassId</code>.</p>\n\n<p>Is the issue that I also need to have <code>ISomething</code> registered? <strong>Roman R</strong> mentions proxy stubs in his answer (before I edited my question) and I wonder if that's the problem... does each interface need to be registered as well as the component's class ID?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445444627, "post_id": 33264297, "comment_id": 54330064, "body": "Where is 1.png located on disk? It&#39;ll have to be in your working directory if you want to reference it like that."}, {"owner": {"reputation": 1652, "user_id": 4854450, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-1YtpzQXa0l0/AAAAAAAAAAI/AAAAAAAAALQ/lGOeSGEXC88/photo.jpg?sz=128", "display_name": "Raphael Teyssandier", "link": "https://stackoverflow.com/users/4854450/raphael-teyssandier"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445444687, "post_id": 33264297, "comment_id": 54330094, "body": "&quot;D:\\Programmation\\Git\\Gomoku\\src\\core\\1.png&quot; AND &quot;D:\\Programmation\\Git\\Gomoku\\src\\core\\GameEngine.cpp&quot;"}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445444788, "post_id": 33264297, "comment_id": 54330139, "body": "Are you running your application from an IDE? If so which one are you using?"}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 1, "creation_date": 1445444904, "post_id": 33264297, "comment_id": 54330190, "body": "From Qt Docs: If the file does not exist or is of an unknown format, the pixmap becomes a null pixmap."}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445445073, "post_id": 33264297, "comment_id": 54330309, "body": "Just to make sure that there&#39;s no problem with the filepath I would try using the absolute filepath to load the image. If that works then your working directory is not what you think it is. If it doesn&#39;t work then there&#39;s a problem with the file."}, {"owner": {"reputation": 1652, "user_id": 4854450, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-1YtpzQXa0l0/AAAAAAAAAAI/AAAAAAAAALQ/lGOeSGEXC88/photo.jpg?sz=128", "display_name": "Raphael Teyssandier", "link": "https://stackoverflow.com/users/4854450/raphael-teyssandier"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445445186, "post_id": 33264297, "comment_id": 54330389, "body": "Yeah, you have right, with the absolute filepath, the pixmap is not null, but the image still doesn&#39;t print."}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445445940, "post_id": 33264297, "comment_id": 54330863, "body": "Could you try passing the pixmap into the constructor of QBrush instead of using brush-&gt;setTexture."}, {"owner": {"reputation": 1652, "user_id": 4854450, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-1YtpzQXa0l0/AAAAAAAAAAI/AAAAAAAAALQ/lGOeSGEXC88/photo.jpg?sz=128", "display_name": "Raphael Teyssandier", "link": "https://stackoverflow.com/users/4854450/raphael-teyssandier"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445446104, "post_id": 33264297, "comment_id": 54330979, "body": "Still the same, i will edit with an imaghe example of what i have."}, {"owner": {"reputation": 1652, "user_id": 4854450, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-1YtpzQXa0l0/AAAAAAAAAAI/AAAAAAAAALQ/lGOeSGEXC88/photo.jpg?sz=128", "display_name": "Raphael Teyssandier", "link": "https://stackoverflow.com/users/4854450/raphael-teyssandier"}, "reply_to_user": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445448198, "post_id": 33264297, "comment_id": 54332152, "body": "Okay, my bad, the image is printed but is to big, so can i set to fill the cell ?"}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "reply_to_user": {"reputation": 1652, "user_id": 4854450, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-1YtpzQXa0l0/AAAAAAAAAAI/AAAAAAAAALQ/lGOeSGEXC88/photo.jpg?sz=128", "display_name": "Raphael Teyssandier", "link": "https://stackoverflow.com/users/4854450/raphael-teyssandier"}, "edited": false, "score": 0, "creation_date": 1445448829, "post_id": 33264297, "comment_id": 54332537, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/92997/discussion-between-mohamad-elghawi-and-raphael-teyssandier\">continue this discussion in chat</a>."}], "owner": {"reputation": 1652, "user_id": 4854450, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-1YtpzQXa0l0/AAAAAAAAAAI/AAAAAAAAALQ/lGOeSGEXC88/photo.jpg?sz=128", "display_name": "Raphael Teyssandier", "link": "https://stackoverflow.com/users/4854450/raphael-teyssandier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445446151, "creation_date": 1445444021, "last_edit_date": 1445446151, "question_id": 33264297, "link": "https://stackoverflow.com/questions/33264297/how-to-load-image-into-a-cell-in-qtablewidgets", "title": "How to load image into a cell in QTableWidgets", "body": "<p>i want to load a default image into all cell, but the image i want to load is always null, i don't know why. The image and .cpp are in the same place.</p>\n\n<pre><code>QTableWidgetItem *item = new QTableWidgetItem();\nQBrush *brush = new QBrush();\nQPixmap pixmap(QString(\"1.png\"));\nif (pixmap.isNull())\n    std::cout &lt;&lt; \"isNull\" &lt;&lt; std::endl;\nbrush-&gt;setTexture(pixmap);\nitem-&gt;setBackground(*brush);\nthis-&gt;tableWidget-&gt;setItem(i, j, new QTableWidgetItem(*item));\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/788t4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/788t4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "boost", "boost-optional"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1445444022, "post_id": 33264244, "comment_id": 54329684, "body": "What does the documentation say?"}, {"owner": {"reputation": 1658, "user_id": 1171783, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uV3kB.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/1171783/julien"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1445444480, "post_id": 33264244, "comment_id": 54329972, "body": "I did not find the answer in the documentation but maybe I missed it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1445447667, "post_id": 33264244, "comment_id": 54331878, "body": "Side note: As long as the pointer is in use the optional must not change it&#39;s internal state (optional = boost::none would be fatal)."}], "answers": [{"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445444216, "post_id": 33264319, "comment_id": 54329798, "body": "<code>*opt</code> returns a reference to the internal member or throws an exception if it has not been constructed. <code>opt=24</code> assigns to the already-constructed member."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445444309, "post_id": 33264319, "comment_id": 54329864, "body": "ignore me.  wasn&#39;t thinking."}, {"owner": {"reputation": 1658, "user_id": 1171783, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uV3kB.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/1171783/julien"}, "edited": false, "score": 0, "creation_date": 1445496948, "post_id": 33264319, "comment_id": 54350592, "body": "Can you point the part of the documentation which would back your answer up?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445500819, "post_id": 33264319, "comment_id": 54352606, "body": "See the narrative on semantics. Note that an optional is semantically equivalent to T, plus being able to be uninitialised. <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/optional/doc/html/boost_optional/tutorial/design_overview/the_semantics.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_58_0/libs/optional/doc/html/boost_optio&zwnj;&#8203;nal/&hellip;</a>"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 3, "last_activity_date": 1445444447, "last_edit_date": 1445444447, "creation_date": 1445444077, "answer_id": 33264319, "question_id": 33264244, "link": "https://stackoverflow.com/questions/33264244/can-i-safely-point-to-the-data-of-a-reassigned-boostoptional/33264319#33264319", "title": "Can I safely point to the data of a reassigned boost::optional?", "body": "<p>yes it's a guarantee. The <code>T</code> of a <code>boost::optional&lt;T&gt;</code> is a logically a private member of the optional.</p>\n\n<p>the code above is logically equivalent to:</p>\n\n<pre><code>bool opt_constructed = false;\nint opt_i; // not constructed\n\nnew int (&amp;opt_i)(12); opt_constructed = true; // in-place constructed\n\nint*p = &amp;opt_i;\n\nopt_i = 24;\n\nassert(p == &amp;opt_i);\n\n// destuctor\nif (opt_constructed) {\n  // call opt_i's destructor if it has one\n}\n</code></pre>\n"}], "owner": {"reputation": 1658, "user_id": 1171783, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uV3kB.jpg?s=128&g=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/1171783/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 33264319, "answer_count": 1, "score": 3, "last_activity_date": 1445444447, "creation_date": 1445443869, "question_id": 33264244, "link": "https://stackoverflow.com/questions/33264244/can-i-safely-point-to-the-data-of-a-reassigned-boostoptional", "title": "Can I safely point to the data of a reassigned boost::optional?", "body": "<p>Given the following code sample:</p>\n\n<pre><code>boost::optional&lt; int &gt; opt;\nopt = 12;\nint* p( &amp;*opt );\nopt = 24;\nassert( p == &amp;*opt );\n</code></pre>\n\n<p>Is there any guarantee that the assert will always be valid?</p>\n"}, {"tags": ["c++", "string", "visual-studio", "winapi", "resources"], "comments": [{"owner": {"reputation": 788, "user_id": 5037458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1a34a94f1f7f3ee63ad2be94de183d?s=128&d=identicon&r=PG&f=1", "display_name": "Nandu", "link": "https://stackoverflow.com/users/5037458/nandu"}, "edited": false, "score": 1, "creation_date": 1445444155, "post_id": 33264083, "comment_id": 54329760, "body": "shouldn&#39;t you be allocating memory for PSTR copyright in LoadString method?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445444251, "post_id": 33264083, "comment_id": 54329821, "body": "Read MSDN description, looks like it could be used to read raw resources without pre-allocating buffers. However, nowhere it says resources are null-terminated - and it seems like it is what happening here."}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445444251, "post_id": 33264083, "comment_id": 54329822, "body": "Fom MSDN: <code>If this parameter is 0, then lpBuffer receives a read-only pointer to the resource itself.</code>"}, {"owner": {"reputation": 20130, "user_id": 479869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oiCBo.jpg?s=128&g=1", "display_name": "Steve Wellens", "link": "https://stackoverflow.com/users/479869/steve-wellens"}, "edited": false, "score": 1, "creation_date": 1445444266, "post_id": 33264083, "comment_id": 54329830, "body": "I think you are getting pointers to the raw data which does not include the null terminators."}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445444312, "post_id": 33264083, "comment_id": 54329870, "body": "Look my previous comment about the MSDN, please."}], "answers": [{"comments": [{"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445445229, "post_id": 33264598, "comment_id": 54330420, "body": "I tried this already, before I created my topic. It didn&#39;t help me."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445445669, "post_id": 33264598, "comment_id": 54330700, "body": "How could that possibly be true?"}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445496824, "post_id": 33264598, "comment_id": 54350529, "body": "I tried to add <code>\\0</code> to my strings in the VS text editor, but when I recompiled my code I saw what it didn&#39;t help me. The character added by me disappeared."}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445497026, "post_id": 33264598, "comment_id": 54350626, "body": "I tried to do the same through the text resources table, but the character <code>\\0</code>added by me disappeared also."}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445497278, "post_id": 33264598, "comment_id": 54350752, "body": "I expected each string in the resource table is broken by <code>\\0</code> char, therefore it is enough to pass <code>0</code> in the last parameter of the <code>LoadString</code> (the WinAPI  function) and to get the pointer of the string in the resources. I see I was mistaken."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445497746, "post_id": 33264598, "comment_id": 54350970, "body": "You must have got something wrong. It&#39;s perfectly possible to null terminate these strings."}, {"owner": {"reputation": 81, "user_id": 5536515, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yA2mFF_Tjys/AAAAAAAAAAI/AAAAAAAAAEU/tsDYpbiLDEE/photo.jpg?sz=128", "display_name": "Johan Boonstra", "link": "https://stackoverflow.com/users/5536515/johan-boonstra"}, "edited": false, "score": 0, "creation_date": 1515666628, "post_id": 33264598, "comment_id": 83390698, "body": "The RC (resource compiler) has a command-line option to Null terminate all strings in the string table: &#39;/n&#39;. It is possible to set this option in the property pages of the vcxproj project. If you enable this option it isn&#39;t necessary to manually add &#39;\\0&#39; to a resource string yourself."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 0, "last_activity_date": 1445446015, "last_edit_date": 1445446015, "creation_date": 1445444981, "answer_id": 33264598, "question_id": 33264083, "link": "https://stackoverflow.com/questions/33264083/why-loadstring-returns-the-concatenated-strings-from-the-resources/33264598#33264598", "title": "Why LoadString returns the concatenated strings from the resources?", "body": "<p>Resource strings are only null-terminated if you explicitly null-terminate them. In order for your code, which assumes null-termination, to work, you should null-terminate the strings. In the .rc file, instead of</p>\n\n<pre><code>\"Hello, World!\"\n</code></pre>\n\n<p>write</p>\n\n<pre><code>\"Hello, World!\\0\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445445781, "post_id": 33264694, "comment_id": 54330772, "body": "Thank you for answer. I fixed my code. Look my answer, please. In my previous code I expected that each string in the resource file is terminated by <code>\\0</code>."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445446044, "post_id": 33264694, "comment_id": 54330934, "body": "@AndreyBushman: In your code, you don&#39;t need to call <code>LoadString()</code> twice. Once you have called it the first time, and have a pointer to the string, if you insist on using raw C-like string buffers/pointers, then you can just <code>memcpy()</code> from the original pointer to the allocated destination buffer. But IMO in C++ it&#39;s much better to use string <b>classes</b> (instead of C-like buffers/pointers)."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 3, "last_activity_date": 1445445269, "creation_date": 1445445269, "answer_id": 33264694, "question_id": 33264083, "link": "https://stackoverflow.com/questions/33264083/why-loadstring-returns-the-concatenated-strings-from-the-resources/33264694#33264694", "title": "Why LoadString returns the concatenated strings from the resources?", "body": "<blockquote>\n<pre><code>PTSTR copyright = NULL;\nLoadString(h, id, (PTSTR)&amp;copyright, 0); // This is WinAPI function\n</code></pre>\n</blockquote>\n\n<p>You are invoking the Win32 <code>LoadString()</code> function passing <code>0</code> as the value of the last parameter. As you can read from the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647486(v=vs.85).aspx\" rel=\"nofollow\">MSDN documentation of <code>LoadString()</code></a>, when the last parameter is 0: </p>\n\n<blockquote>\n  <p>[...] If this parameter is 0, then lpBuffer receives a read-only pointer to the resource itself.</p>\n</blockquote>\n\n<p>So, on successful return from <code>LoadString()</code>, the <code>copyright</code> pointer in your code is set by <code>LoadString()</code> to point to the string resource itself.</p>\n\n<p>However, string resources are <em>not</em> NUL terminated by default; they are length prefixed.\nSo, since your string is not NUL terminated, when you print it using <code>wcout</code>, the characters following the copyright string are printed as well. So you get the whole <code>Hello, World!Russian_Russia.1251</code> string.</p>\n\n<p>To fix that, instead of using raw C-like string pointers, you can build a <code>std::wstring</code> from the string loaded from resources, and just use it with <code>wcout</code>. Note that the resource string's length is the return value of <code>LoadString()</code>.<br>\n<a href=\"http://blogs.msmvps.com/gdicanio/2010/01/05/stl-strings-loading-from-resources/\" rel=\"nofollow\">For example:</a></p>\n\n<pre><code>std::wstring LoadStringFromResource(\n    _In_ UINT stringID,\n    _In_opt_ HINSTANCE instance = nullptr )\n{\n    WCHAR * pBuf = nullptr;\n\n    int len = LoadStringW(\n        instance,\n        stringID,\n        reinterpret_cast&lt; LPWSTR &gt;( &amp;pBuf ),\n        0 );\n\n    if( len )\n        return std::wstring( pBuf, len );\n    else\n        return std::wstring();\n}\n</code></pre>\n\n<p>Or you could use the <strong><code>CString</code></strong> class from ATL/MFC, and its convenient methods (<a href=\"https://msdn.microsoft.com/en-us/library/a44fb3wy.aspx\" rel=\"nofollow\"><code>CString::LoadString()</code> overloads</a>) or <a href=\"https://msdn.microsoft.com/en-us/library/cws1zdt8.aspx\" rel=\"nofollow\">proper constructor overload</a> to load a string from resources.<br>\nIin this case, the complexity of the <code>LoadString()</code> call is hidden under the hood, under the implementation of <code>CString</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1445446091, "post_id": 33264782, "comment_id": 54330971, "body": "If you use this code, make sure the caller calls <code>free()</code> on the returned pointer to release the memory: <code>PCTSTR lang = LoadString(NULL, IDS_STRING_LOCALE); ... free(lang);</code> and likewise for <code>copyright</code>. Otherwise, instead of using <code>malloc()</code> (or <code>new[]</code>), it is better to use <code>std::string</code> or <code>std::wstring</code> (or even <code>std::basic_string&lt;TCHAR&gt;</code>) as demonstrated in Mr.C64&#39;s answer."}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1445446233, "post_id": 33264782, "comment_id": 54331048, "body": "Thank you, I will fix it."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1445447872, "post_id": 33264782, "comment_id": 54331963, "body": "You allocation allocates too many characters and does not null terminate. This code is very broken."}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1445496625, "post_id": 33264782, "comment_id": 54350426, "body": "@DavidHeffernan,  I am learning C\\C++ and I don&#39;t see the mistake. Can you expand your notice for me? Why <code>PTSTR string = (PTSTR)malloc(i * (sizeof(TCHAR) + 1));</code> is wrong in your opinion?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1445497807, "post_id": 33264782, "comment_id": 54350997, "body": "You can work that out yourself surely. Try substituting in some values for <code>i</code> and see what happens."}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445498849, "post_id": 33264782, "comment_id": 54351507, "body": "I am thinking you are not right about my <code>PTSTR string = (PTSTR)malloc(i * (sizeof(TCHAR) + 1));</code>  code row. Sorry."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1445513691, "post_id": 33264782, "comment_id": 54360406, "body": "You are meant to allocate <code>i+1</code> characters. You did not. You allocated <code>i</code> elements whose size is one larger than the size of a character. Your code will fail when <code>i</code> is zero. You are really making a meal of this. Let me give you some advice. You are a self-confessed beginner. Your knowledge is incomplete. All that is fine. But you should be less confident in your own abilities. Have more self-doubt."}, {"owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "edited": false, "score": 0, "creation_date": 1445516956, "post_id": 33264782, "comment_id": 54362444, "body": "Thank you, David. Now I see my mistake. I will rewrite it to this: <code>PTSTR string = (PTSTR)malloc((i + 1) * sizeof(TCHAR));</code>. And thank you for your advice. I didn&#39;t want to offend you. I appologize."}], "tags": [], "owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "is_accepted": false, "score": -2, "last_activity_date": 1445516991, "last_edit_date": 1445516991, "creation_date": 1445445614, "answer_id": 33264782, "question_id": 33264083, "link": "https://stackoverflow.com/questions/33264083/why-loadstring-returns-the-concatenated-strings-from-the-resources/33264782#33264782", "title": "Why LoadString returns the concatenated strings from the resources?", "body": "<p>Oh, I fixed my code. Now it works fine:</p>\n\n<pre><code>PTSTR LoadString(HMODULE h, DWORD id) {\n    h = NULL == h ? GetModuleHandle(NULL) : h;\n    PTSTR ptr = NULL;   \n    // it returns really length instead of concatenated \n    // string length, therefore I can use it for malloc.\n    int i = LoadString(h, id, (PTSTR)&amp;ptr, 0);\n    if (0 == i) {\n        return NULL;\n    }\n    PTSTR string = (PTSTR)malloc((i + 1) * sizeof(TCHAR));\n    LoadString(h, id, string, i + 1);\n    return string; // don't forget free resource in the outer code.\n}\n</code></pre>\n\n<p>The strings in the resources are not separated through the <code>\\0</code> char as I expected.</p>\n"}], "owner": {"reputation": 10045, "user_id": 1306132, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kVX7T.png?s=128&g=1", "display_name": "Andrey Bushman", "link": "https://stackoverflow.com/users/1306132/andrey-bushman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1487, "favorite_count": 1, "accepted_answer_id": 33264694, "answer_count": 3, "score": 0, "last_activity_date": 1445516991, "creation_date": 1445443431, "last_edit_date": 1445445519, "question_id": 33264083, "link": "https://stackoverflow.com/questions/33264083/why-loadstring-returns-the-concatenated-strings-from-the-resources", "title": "Why LoadString returns the concatenated strings from the resources?", "body": "<p>MS Visual Studio 2015 Enterprise; C++.</p>\n\n<p>Into my console project I added the RC-file (i.e. resource) and added two strings into it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/sv9vR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sv9vR.png\" alt=\"enter image description here\"></a></p>\n\n<p>I wrote such function for getting of the strings:</p>\n\n<pre><code>PCTSTR LoadString(HMODULE h, DWORD id) {\n    h = NULL == h ? GetModuleHandle(NULL) : h;\n    PTSTR copyright = NULL;\n    LoadString(h, id, (PTSTR)&amp;copyright, 0); // This is WinAPI function\n    return copyright;\n}\n</code></pre>\n\n<p>Now I try to use it in my code:</p>\n\n<pre><code>// Set necessary locale\nPCTSTR lang = LoadString(NULL, IDS_STRING_LOCALE);\n_wsetlocale(LC_ALL, lang);\n\n// Print copyright info\nPCTSTR copyright = LoadString(NULL, IDS_STRING_COPYRIGHT);\nif (NULL != copyright) {\n    // TODO: unexpected string output is here!\n    wcout &lt;&lt; copyright &lt;&lt; endl;\n}\nelse {\n    DWORD errorCode = GetLastError();\n</code></pre>\n\n<p>The <code>lang</code> variable has right value: <code>Russian_Russia.1251</code>, but the <code>copyright</code> variable has the<code>Hello, World!Russian_Russia.1251</code> instead of <code>Hello World!</code>. </p>\n\n<p>Why does it happen?</p>\n"}, {"tags": ["c++", "templates", "overloading"], "comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1445448727, "post_id": 33264017, "comment_id": 54332471, "body": "Do not ignore keywords when determining whether or not two function signatures are &quot;identical&quot;!"}], "answers": [{"tags": [], "owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "is_accepted": true, "score": 13, "last_activity_date": 1445443300, "creation_date": 1445443300, "answer_id": 33264038, "question_id": 33264017, "link": "https://stackoverflow.com/questions/33264017/c-identical-method-signature-but-different-return-type/33264038#33264038", "title": "C++ identical method signature but different return type", "body": "<p>The two functions are actually not the same. Only the second function is declared as a <code>const</code> member function. If the object that the member is called from is <code>const</code>, the latter option is used. If the object is non-<code>const</code>, the first option is used.</p>\n\n<p>Example:</p>\n\n<pre><code>void any_func(const Type *t)\n{\n    something = t-&gt;value(); //second `const` version used\n}\n\nvoid any_func2(Type *t)\n{\n    something = t-&gt;value(); //first non-`const` version used\n}\n</code></pre>\n\n<p>If both functions were declared non-<code>const</code> or both were declared <code>const</code>, the compiler <em>would</em> (should, anyway) complain.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 7, "last_activity_date": 1445455202, "last_edit_date": 1445455202, "creation_date": 1445443570, "answer_id": 33264130, "question_id": 33264017, "link": "https://stackoverflow.com/questions/33264017/c-identical-method-signature-but-different-return-type/33264130#33264130", "title": "C++ identical method signature but different return type", "body": "<blockquote>\n  <p>Why does the compiler not complain about</p>\n</blockquote>\n\n<p>Because the <code>const</code> counts for a different function signature. Your assumption the <em>function signatures are identical</em> is wrong.<br>\nThe function marked as <code>const</code> will be invoked for any <code>const</code> instance or reference of <code>Type&lt;T&gt;</code>.</p>\n\n<blockquote>\n  <p>and how to know which one is invoked?</p>\n</blockquote>\n\n<p>Put a <code>cout</code> statement in the functions and test the following cases:</p>\n\n<pre><code>template &lt;class T&gt;\nclass Type {\n    public:\n        Type() {}\n        T&amp; operator=(const T&amp; rhs) {value() = rhs; return value();}\n        T&amp; value() { \n            std::cout &lt;&lt; \"non const version\" &lt;&lt; std endl;\n            return m_value;\n        }\n        T value() const { \n            std::cout &lt;&lt; \"const version\" &lt;&lt; std endl;\n            return m_value;\n        }\n    private:\n        T m_value;\n};\n</code></pre>\n\n<hr>\n\n<pre><code>int main() {\n    Type&lt;int&gt; t;\n    t.value();\n\n    Type&lt;int&gt; rt = t;\n    rt.value();\n\n    Type&lt;int&gt;* pt = &amp;t;\n    pt-&gt;value();\n\n    const Type&lt;int&gt; ct;\n    ct.value();\n\n    const Type&lt;int&gt;&amp; crt = t;\n    crt.value();\n\n    const Type&lt;int&gt;* pct = &amp;t;\n    pct-&gt;value();\n}\n</code></pre>\n\n<p>Your assignment operator will call the non const version.</p>\n\n<hr>\n\n<p>The const version should better look like</p>\n\n<pre><code>const T&amp; value() const { \n     std::cout &lt;&lt; \"const version\" &lt;&lt; std endl;\n     return m_value;\n}\n</code></pre>\n\n<p>because you can't always rely on RVO (return value optimization), and extra copies might be taken (especially for older compiler implementations).</p>\n\n<hr>\n\n<p>Also note the assignment operator should return a reference to the current instance:</p>\n\n<pre><code> Type&amp; operator=(const T&amp; rhs) {value() = rhs; return *this;}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 3, "creation_date": 1445446924, "post_id": 33264248, "comment_id": 54331445, "body": "I think the logic in the second paragraph is backwards. Non-<code>const</code> functions <b>can&#39;t</b> be called for <code>const</code> objects."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1445447644, "post_id": 33264248, "comment_id": 54331862, "body": "@owacoder, my bad. You are correct, I misread your comment and mistyped my answer. Will edit it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1445447973, "post_id": 33264248, "comment_id": 54332019, "body": "Yes, yes, yes. @jaggedSpire is correct, I was skimming and not reading carefully. Mea culpa."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 5, "last_activity_date": 1445447925, "last_edit_date": 1445447925, "creation_date": 1445443881, "answer_id": 33264248, "question_id": 33264017, "link": "https://stackoverflow.com/questions/33264017/c-identical-method-signature-but-different-return-type/33264248#33264248", "title": "C++ identical method signature but different return type", "body": "<p>A couple of words on functions resolution priority. Compiler distinguishes between const/non const functions on following way:</p>\n\n<p>If a class has only const function with given name and argument list, it will be called for constant and non-constant objects alike. After calling this function, object will 'assume' constness (even if it was not const), meaning that the function can only call other const functions.</p>\n\n<p>If a class has only non-const function, it will be called for non-const objects. Attempt to call this function for const objects  will lead to compilation error.</p>\n\n<p>If a class has both functions available, const version will be used for const objects, non-const version will be used for non-const objects.</p>\n\n<p>Thanks to @owacoder for pointing my attention to initial mixup in the description.</p>\n"}], "owner": {"reputation": 163, "user_id": 5354436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b5d3f735bbfa87969a42f84c7180bf?s=128&d=identicon&r=PG&f=1", "display_name": "agentsmith", "link": "https://stackoverflow.com/users/5354436/agentsmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1135, "favorite_count": 2, "accepted_answer_id": 33264038, "answer_count": 3, "score": 8, "last_activity_date": 1445455202, "creation_date": 1445443228, "question_id": 33264017, "link": "https://stackoverflow.com/questions/33264017/c-identical-method-signature-but-different-return-type", "title": "C++ identical method signature but different return type", "body": "<p>I have seen the following code:</p>\n\n<pre><code>template &lt;class T&gt;\nclass Type {\n    public:\n        Type() {}\n        T&amp; operator=(const T&amp; rhs) {value() = rhs; return value();}\n        T&amp; value() {return m_value;}\n        T value() const {return m_value;}\n    private:\n        T m_value;\n};\n</code></pre>\n\n<p>Why does the compiler not complain about</p>\n\n<pre><code>    T&amp; value() {return m_value;}\n    T value() const {return m_value;}\n</code></pre>\n\n<p>and how to know which one is invoked?</p>\n"}, {"tags": ["c++", "wxwidgets"], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 1545472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb8d6fb18e4558e002c820e44855b9f6?s=128&d=identicon&r=PG", "display_name": "zohsvosv", "link": "https://stackoverflow.com/users/1545472/zohsvosv"}, "is_accepted": false, "score": 0, "last_activity_date": 1446074824, "creation_date": 1446074824, "answer_id": 33403355, "question_id": 33264007, "link": "https://stackoverflow.com/questions/33264007/wxbitmap-transparent-background/33403355#33403355", "title": "wxBitmap transparent background", "body": "<p>I have noticed that if I minimise the window and then show it again, the problem is solved - no default grey background when the bitmap is hidden. I do not know what operation this (minimise + maximise) procedure performs and I have not yet figured out how to implement it programmatically.</p>\n"}], "owner": {"reputation": 89, "user_id": 1545472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb8d6fb18e4558e002c820e44855b9f6?s=128&d=identicon&r=PG", "display_name": "zohsvosv", "link": "https://stackoverflow.com/users/1545472/zohsvosv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446074824, "creation_date": 1445443201, "question_id": 33264007, "link": "https://stackoverflow.com/questions/33264007/wxbitmap-transparent-background", "title": "wxBitmap transparent background", "body": "<p>I have a wxBitmap which can be hidden or revealed on a wxPanel. When the wxBitmap is hidden I would like it to have the background of the wxPanel, instead it has a standard grey background. </p>\n\n<p>To illustrate my point here are two images:</p>\n\n<p>Bitmap shown:\n<a href=\"http://i.stack.imgur.com/PzpR9.png\" rel=\"nofollow\">http://i.stack.imgur.com/PzpR9.png</a></p>\n\n<p>Bitmap hidden:\n<a href=\"http://i.stack.imgur.com/GWs7r.png\" rel=\"nofollow\">http://i.stack.imgur.com/GWs7r.png</a></p>\n\n<p>I tried applying a mask and using alpha channel for transparency, but these do not solve the problem. What I need to do is set the background of the wxBitmap.</p>\n\n<p>Any ideas how I can accomplish this?</p>\n"}, {"tags": ["c++", "qt", "visual-studio-2013", "release", "crypto++"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1445447737, "post_id": 33263734, "comment_id": 54331908, "body": "The problem exerting most pressure is the failed VCUpgrade conversions. Because of that, I dropped the Qt tag (it had nothing to do with your issues), and added the Visual-Studio tag (Microsoft created these problems with their broken VCUpgrade machinery)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1445661005, "post_id": 33263734, "comment_id": 54427733, "body": "We added a download to address your problem. See the discussion of <a href=\"http://cryptopp.com/wiki/Visual_Studio#Downloads\" rel=\"nofollow noreferrer\"><code>vs2010-dynamic.zip</code></a> on the Crypto++ wiki under <a href=\"https://cryptopp.com/wiki/Visual_Studio\" rel=\"nofollow noreferrer\">Visual Studio</a>."}], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "edited": false, "score": 0, "creation_date": 1445505181, "post_id": 33265325, "comment_id": 54355192, "body": "<i>&quot;Is there another way to compile any version of crypto++ for release mode to work with MSVC 12.0 with /MD or /MDd...&quot;</i> - you can probably do it with MSBuild from the command line. See <a href=\"http://stackoverflow.com/q/8782271\">How to override a configuration property?</a>"}, {"owner": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "edited": false, "score": 0, "creation_date": 1445940594, "post_id": 33265325, "comment_id": 54524807, "body": "Now it is working for version 5.6.3rc5 and the download of vs2010-dynamic.zip in the wiki. I have test it only for 32 bit. Good job everybody, thank you very much."}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 1, "last_activity_date": 1445648220, "last_edit_date": 1495540336, "creation_date": 1445447459, "answer_id": 33265325, "question_id": 33263734, "link": "https://stackoverflow.com/questions/33263734/rebuild-crypto-5-6-2-for-md-release-under-visual-studio-2013/33265325#33265325", "title": "Rebuild Crypto++ 5.6.2 for /MD release under Visual Studio 2013", "body": "<blockquote>\n  <p>I want to rebuild Crypto++ via MSVC 2013...</p>\n</blockquote>\n\n<p>OK, so the pain points here are the <a href=\"http://blogs.msdn.com/b/vcblog/archive/2010/03/02/visual-studio-2010-c-project-upgrade-guide.aspx\" rel=\"nofollow noreferrer\">Microsoft changes to MSBuild at 2010</a>. To make matters worse, <a href=\"http://blogs.msdn.com/b/vcblog/archive/2010/02/16/project-settings-changes-with-vs2010.aspx\" rel=\"nofollow noreferrer\">VCUpgrade does a rather poor job of up-converting projects</a>.</p>\n\n<p>To help users with the upgrade process, Crypto++ provides a file called <a href=\"https://cryptopp.com/wiki/Visual_Studio\" rel=\"nofollow noreferrer\"><code>vs2010.zip</code></a>. The archive contains the pre-converted solution file, project files and filters for Visual Studio 2010 and above. The files were released in October 2015 with a 5.6.3 Release Candidate.</p>\n\n<p>The upgraded solution files are mostly successful. They build 20 of 24 configurations properly from the IDE. 4 of them fail on the first attempt; but the process recovers on the second attempt and builds all 24. We know its a dependency/ordering issue, but we don't know how to solve it. There's an open question on Stack Overflow at <a href=\"https://stackoverflow.com/q/33191432\">How to control order of Batch Build \u2192 Build All</a>.</p>\n\n<p>There is now a page on the subject of Visual Studio 2010 and VCUpgrade. See <a href=\"https://cryptopp.com/wiki/Visual_Studio\" rel=\"nofollow noreferrer\">Visual Studio</a> on the Crypto++ wiki.</p>\n\n<hr>\n\n<blockquote>\n  <p>In this article ...</p>\n</blockquote>\n\n<p>I wrote <a href=\"http://www.codeproject.com/Articles/16388/Compiling-and-Integrating-Crypto-into-the-Microsof\" rel=\"nofollow noreferrer\">that article</a> years ago. You are on the right track.</p>\n\n<hr>\n\n<blockquote>\n  <p>I did it, but it is only working for debug mode. For Release mode the errors from 117 go to 53, but again the same old error occures:</p>\n\n<pre><code>cryptlib.lib(cryptlib.obj):-1: error: LNK2038: mismatch detected for 'RuntimeLibrary':\nvalue 'MT_StaticRelease' doesn't match value 'MD_DynamicRelease' in main.obj\n</code></pre>\n</blockquote>\n\n<p>We added a ZIP file for you. The ZIP is a pre-converted Visual Studio 2010 solution and project files that utilizes dynamic runtime linking (<code>/MD</code> and <code>/MDd</code>). (Its not really just you since a lot of folks have asked about it over the years).</p>\n\n<p>The solution to your problems are:</p>\n\n<ol>\n<li>download <a href=\"https://cryptopp.com/wiki/Visual_Studio\" rel=\"nofollow noreferrer\"><code>vs2010-dynamic.zip</code></a> from the Crypto++ wiki</li>\n<li>unzip over top of the exiting Crypto++ distribution files.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1445519541, "creation_date": 1445519541, "answer_id": 33281901, "question_id": 33263734, "link": "https://stackoverflow.com/questions/33263734/rebuild-crypto-5-6-2-for-md-release-under-visual-studio-2013/33281901#33281901", "title": "Rebuild Crypto++ 5.6.2 for /MD release under Visual Studio 2013", "body": "<p>I am using cryptopp from source with /MD, built on vs2013 using the latest cryptopp version (5.6.2). You want to be up to date on encryption or security software, plus they may have fixed platform build issues. </p>\n\n<p>The issues you cite sound like intermediate files from building a project with /MT set, even if it was later changed to /MD (although it is dangerously easy to forget to change the drop-down to \"all configurations\", and change just the debug settings in one project).</p>\n\n<p>First clean solution, then make sure you change every project to /MD in [bold]all configurations[bold], and clean solution again. Now search for and delete any debug or release folders and .obj .lib .dll files, because I don't trust \"clean solution\". It can only get files it intends to build under the current settings, but the linker might find more in the link search (/verbose:lib).</p>\n\n<p>Then rebuild all.</p>\n"}], "owner": {"reputation": 316, "user_id": 5467838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c552127eacd3222998377eb54eb045fa?s=128&d=identicon&r=PG&f=1", "display_name": "nicksona", "link": "https://stackoverflow.com/users/5467838/nicksona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 33265325, "answer_count": 2, "score": 0, "last_activity_date": 1445648220, "creation_date": 1445442503, "last_edit_date": 1495541038, "question_id": 33263734, "link": "https://stackoverflow.com/questions/33263734/rebuild-crypto-5-6-2-for-md-release-under-visual-studio-2013", "title": "Rebuild Crypto++ 5.6.2 for /MD release under Visual Studio 2013", "body": "<p>I want to rebuild Crypto++ via MSVC 2013 so when I am using the library to be able to build my project with /MD or /MDd, NOT /MT or /MTd, because I am using QT 5.5.1 with MSVC2013 32bit compiler and it seems if I want to make GUI interface - it is using /MD or /MDd! In <a href=\"http://www.codeproject.com/Articles/16388/Compiling-and-Integrating-Crypto-into-the-Microsof\" rel=\"nofollow noreferrer\">this</a> article in section <code>Static Versus Dynamic Linking</code> is mentioned the necessity for rebuilding (not building) and how you can see from my other <a href=\"https://stackoverflow.com/questions/33254054/qt-5-5-crypto-and-gui-with-mtd\">question</a> I did it, but it is only working for debug mode. For Release mode the errors from 117 go to 53, but again the same old error occures:</p>\n\n<blockquote>\n  <p>cryptlib.lib(cryptlib.obj):-1: error: LNK2038: mismatch detected for\n  'RuntimeLibrary': value 'MT_StaticRelease' doesn't match value\n  'MD_DynamicRelease' in main.obj</p>\n</blockquote>\n\n<p>I am doing just what I mentioned <a href=\"https://stackoverflow.com/a/33259856/5467838\">here</a></p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 1, "creation_date": 1445442261, "post_id": 33263625, "comment_id": 54328525, "body": "<a href=\"http://stackoverflow.com/questions/3207018/register-keyword-in-c\"><code>register</code></a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 8, "creation_date": 1445442508, "post_id": 33263625, "comment_id": 54328699, "body": "I would not consider MSVC a reliable arbiter of what the standard allows or requires.  And I&#39;m inclined to doubt that the situation will have changed by year 11025 :-)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1445442718, "post_id": 33263625, "comment_id": 54328863, "body": "fails on g++: <a href=\"http://coliru.stacked-crooked.com/a/b486009ecb10f5e7\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/b486009ecb10f5e7</a>"}, {"owner": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "edited": false, "score": 0, "creation_date": 1445443850, "post_id": 33263625, "comment_id": 54329599, "body": "Where in the standard can I find something equivalent to &quot;qualifiers can only be specified for objects and functions? That is the g++ error message."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1445445000, "post_id": 33263625, "comment_id": 54330256, "body": "<i>&quot;after preprocessing&quot;</i> does not mean what your question seems to imply. After preprocessing means: when the preprocessor has finished."}, {"owner": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1445445112, "post_id": 33263625, "comment_id": 54330344, "body": "@ChristianHackl: I did mean after the preprocessor has finished. I meant to avoid empty macros."}], "answers": [{"comments": [{"owner": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "edited": false, "score": 0, "creation_date": 1445445384, "post_id": 33263995, "comment_id": 54330527, "body": "I upvoted and accepted your answer even though it did not answer my question as it was worded. I was looking for irrelevancies such as <code>if(true);</code> that are neither full expressions nor depend on other declarations/expressions."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "edited": false, "score": 0, "creation_date": 1445445896, "post_id": 33263995, "comment_id": 54330842, "body": "@Hector I completely missed that aspect of your question, I read in a more narrow sense. It is possible you will receive a broader answer, that would not be unusual. You should feel free to unaccept in the mean-time, questions without an accept usually get more views and sometimes more answers and I would completely understand."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "edited": false, "score": 0, "creation_date": 1445446264, "post_id": 33263995, "comment_id": 54331062, "body": "@Hector in general the standard eschews ambiguity and either makes such cases ill-formed or undefined behavior. In other cases the standard will define how ambiguities should be resolved. This makes sense since one of the goals of a standard is to remove potential ambiguities and provide uniform implementations."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 4, "last_activity_date": 1445443529, "last_edit_date": 1445443529, "creation_date": 1445443188, "answer_id": 33263995, "question_id": 33263625, "link": "https://stackoverflow.com/questions/33263625/c-standard-ambiguity/33263995#33263995", "title": "C++ standard ambiguity", "body": "<p>Both <a href=\"http://melpon.org/wandbox/permlink/HgPXqnuKESHDQoW9\" rel=\"nofollow\">clang</a> and <a href=\"http://melpon.org/wandbox/permlink/KtpcUvfGELsD3S4C\" rel=\"nofollow\">gcc</a> reject this code using <code>-pedantic-errors</code>. clang provides the following error:</p>\n\n<pre><code>error: 'const' is not permitted on a declaration of a type [-Werror,-Wmissing-declarations]\nconst struct omg;\n^\n\nerror: 'volatile' is not permitted on a declaration of a type [-Werror,-Wmissing-declarations]\n</code></pre>\n\n<p>the draft C++ standard section 7.1.6.1 The cv-qualifiers [dcl.type.cv] says:</p>\n\n<blockquote>\n  <p>[...]If a cv-qualifier appears in a decl-specifier-seq, the init-declarator-list of the declaration shall\n  not be empty.[...]</p>\n</blockquote>\n"}], "owner": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 33263995, "answer_count": 1, "score": 8, "last_activity_date": 1445443529, "creation_date": 1445442185, "question_id": 33263625, "link": "https://stackoverflow.com/questions/33263625/c-standard-ambiguity", "title": "C++ standard ambiguity", "body": "<p>As far as I can see in the standard, the following code is valid. It compiles in MSVC1025.</p>\n\n<pre><code>const struct omg;\nstruct omg volatile;\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>The qualifiers <code>const</code> and <code>volatile</code> seem purposeless in those declarations. They do not help nor hurt neither the compiler nor the programmer.</p>\n\n<p>The standard does not seem bent on weeding out these \"empty ambiguities\". In the case of the empty declaration <code>;</code>, it is explicitly allowed.</p>\n\n<p>Are there other cases of tokens that, after preprocessing, are irrelevant for the meaning of the expression?</p>\n"}, {"tags": ["c++", "vector", "stl", "cilk-plus"], "comments": [{"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1445449926, "post_id": 33263624, "comment_id": 54333204, "body": "Given the section <code>Array Notation with Dynamically Allocated Arrays</code> <a href=\"https://www.cilkplus.org/tutorial-array-notation\" rel=\"nofollow noreferrer\">here</a>, I think your best bet is <code>c.data()[0:c.size()] = a.data()[0:a.size()] + b.data()[0:b.size()]</code> and then defining a macro to avoid copy-paste errors."}, {"owner": {"reputation": 161, "user_id": 2023065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d043a433feb77e7ddbef6d665f6b8490?s=128&d=identicon&r=PG&f=1", "display_name": "Stershic", "link": "https://stackoverflow.com/users/2023065/stershic"}, "reply_to_user": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1445451288, "post_id": 33263624, "comment_id": 54333962, "body": "Ok, that might be getting me on the right track. When I compile that, I get no compilation error on the lines themselves, but I get &quot;internal compiler error: in find_rank, at c-family/array-notation-common.c:244&quot; at the end of the method it&#39;s placed in."}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 2023065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d043a433feb77e7ddbef6d665f6b8490?s=128&d=identicon&r=PG&f=1", "display_name": "Stershic", "link": "https://stackoverflow.com/users/2023065/stershic"}, "is_accepted": true, "score": 0, "last_activity_date": 1445451512, "creation_date": 1445451512, "answer_id": 33266477, "question_id": 33263624, "link": "https://stackoverflow.com/questions/33263624/using-cilk-array-notation-and-stl-vectors/33266477#33266477", "title": "Using Cilk array notation and STL vectors", "body": "<p>This may not be the best/most-elegant answer (please post alternatives if there are), but it does seem to work to use the above approach #2 with the index start/length specifications. Like this:</p>\n\n<pre><code>double* aArr = &amp;a[0];\ndouble* bArr = &amp;b[0];\ndouble* cArr = &amp;c[0];\ncArr[0:c.size()] = aArr[0:c.size()] + bArr[0:c.size()]\n</code></pre>\n\n<p>Of course, I need to be careful that the vector lengths match, but it compiles, and so far, seems to return the same answers.</p>\n"}], "owner": {"reputation": 161, "user_id": 2023065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d043a433feb77e7ddbef6d665f6b8490?s=128&d=identicon&r=PG&f=1", "display_name": "Stershic", "link": "https://stackoverflow.com/users/2023065/stershic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 1, "accepted_answer_id": 33266477, "answer_count": 1, "score": 2, "last_activity_date": 1445451512, "creation_date": 1445442183, "last_edit_date": 1445447660, "question_id": 33263624, "link": "https://stackoverflow.com/questions/33263624/using-cilk-array-notation-and-stl-vectors", "title": "Using Cilk array notation and STL vectors", "body": "<p>I'm learning about parallel programming using the Cilk Plus extension to C++ (on gcc). One of the simplest refactors that I have read about is to use Cilk array notation, namely using it performing order-independent vector operations.</p>\n\n<p>i.e.: <code>c[:] = a[:] + b[:]</code></p>\n\n<p>rather than: <code>for (unsigned i = 0; i &lt; a.size(); ++i) c[i] = a[i] + b[i];</code></p>\n\n<p>I have a large code in place heavily using <code>std::vector</code> objects rather than arrays. Is it possible to use this concept with the <code>std::vector</code>?</p>\n\n<p>Considering <code>a</code>, <code>b</code>, and <code>c</code> to be <code>std::vector&lt;double&gt;</code> of equal length, I have tried these with no success:</p>\n\n<p>1.</p>\n\n<pre><code>c[:] = a[:] + b[:]\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>double* aArr = &amp;a[0];\ndouble* bArr = &amp;b[0];\ndouble* cArr = &amp;c[0];\ncArr[:] = aArr[:] + bArr[:]\n</code></pre>\n\n<p>Both return</p>\n\n<blockquote>\n  <p>start-index and length fields necessary for using array notations in pointers or records</p>\n</blockquote>\n\n<p>I understand that approach #2 makes a pointer to the vector without length information, but is there any workaround?</p>\n\n<p>Edit:</p>\n\n<p>An efficient solution is preferred. It may be possible, for example, to define an array and use <code>std::copy</code> to copy the values from the vector to the array, perform the addition using Cilk array notation, and then copy the values back to the vector. This is probably costlier than just doing the original element-wise addition.</p>\n"}, {"tags": ["c++", "object", "methods"], "comments": [{"owner": {"reputation": 17, "user_id": 5472249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464bf62935b13a44fa9a33008f2f44cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tiffany", "link": "https://stackoverflow.com/users/5472249/tiffany"}, "edited": false, "score": 0, "creation_date": 1445442124, "post_id": 33263523, "comment_id": 54328419, "body": "Updated code ( posted wrong snippet)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1445442173, "post_id": 33263523, "comment_id": 54328453, "body": "I would remove the <code>switch</code> statement in <code>getpoints</code> and replace with <code>if</code> statement:  <code>if (dice_value &lt; 7) return dice_value; else return -1;</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1445442454, "post_id": 33263523, "comment_id": 54328660, "body": "BTW, you don&#39;t need a class to hold functions, functions can be free-standing.  I suggest moving the <code>getpoints</code> function into the <code>game</code> class."}, {"owner": {"reputation": 94, "user_id": 5159806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67649e45c8bc304994e583753b9d477?s=128&d=identicon&r=PG", "display_name": "user5159806", "link": "https://stackoverflow.com/users/5159806/user5159806"}, "edited": false, "score": 1, "creation_date": 1445442481, "post_id": 33263523, "comment_id": 54328677, "body": "To me it looks like you have abused classes, dice and points classes are unnecessary and makes the code ugly and cluttered."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1445442512, "post_id": 33263523, "comment_id": 54328705, "body": "When you used the debugger, what statement is causing the issue?  If you don&#39;t know how to use a debugger, this is an excellent opportunity."}, {"owner": {"reputation": 17, "user_id": 5472249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464bf62935b13a44fa9a33008f2f44cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tiffany", "link": "https://stackoverflow.com/users/5472249/tiffany"}, "edited": false, "score": 0, "creation_date": 1445448773, "post_id": 33263523, "comment_id": 54332499, "body": "Thanks everyone! I&#39;m working things out. Will post updated code shortly. Also, I think all the classes are overkill as well, but this is how my professor wants it for this assignment."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 3902595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/832228ea00f07226ce1a3e2886f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Dese", "link": "https://stackoverflow.com/users/3902595/dese"}, "edited": false, "score": 0, "creation_date": 1445443963, "post_id": 33264143, "comment_id": 54329656, "body": "And &quot;using namespace std;&quot; is bad practice apparently:  <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\" title=\"why is using namespace std considered bad practice\">stackoverflow.com/questions/1452721/&hellip;</a>"}, {"owner": {"reputation": 339, "user_id": 3902595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/832228ea00f07226ce1a3e2886f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Dese", "link": "https://stackoverflow.com/users/3902595/dese"}, "edited": false, "score": 0, "creation_date": 1445512121, "post_id": 33264143, "comment_id": 54359488, "body": "so you could instead write std::printf and std::scanf (which is what didn&#39;t compile for me), which seems to solve the problem that you had. Of course, std::cout and std::cin are better.    And I maintain what I said about seeding your random numbers."}], "tags": [], "owner": {"reputation": 339, "user_id": 3902595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/832228ea00f07226ce1a3e2886f8772b?s=128&d=identicon&r=PG&f=1", "display_name": "Dese", "link": "https://stackoverflow.com/users/3902595/dese"}, "is_accepted": false, "score": -1, "last_activity_date": 1445443614, "creation_date": 1445443614, "answer_id": 33264143, "question_id": 33263523, "link": "https://stackoverflow.com/questions/33263523/how-to-execute-correct-running-total-using-class-objects/33264143#33264143", "title": "How to execute correct running total using class objects", "body": "<p>Add </p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>at the beginning of your code so that we can compile it without errors. </p>\n\n<p>It seems to me that your code does exactly what it is supposed to. </p>\n\n<p>In the function getpoints(), you always return the same value as dicevalue, (eg case 1: ... return 1;) So it is equivalent to </p>\n\n<pre><code>  int getpoints(int dicevalue){\n      if (dicevalue &lt; 7) {\n        printf(\"\\nYou won %d points\\n\",dicevalue);\n        return dicevalue;\n      }\n      else return -1;\n  }\n</code></pre>\n\n<p>I changed it so that the number of points would be dicevalue + 10 and it worked fine:</p>\n\n<pre><code>  int getpoints(int dicevalue){\n      if (dicevalue &lt; 7) {\n        int numberPoints = dicevalue+10;\n        printf(\"\\nYou won %d points\\n\",numberPoints);\n        return numberPoints;\n      }\n      else return -1;\n  } \n</code></pre>\n\n<p>And at the end, I always get \"total point are \" the sum of the points I earned in the rounds.</p>\n\n<p>You should seed your random numbers using time, put this at the beginning of the main function: </p>\n\n<pre><code>srand(time(NULL));\n</code></pre>\n\n<p>As it is, I get the same serie of numbers whenever I launch the program. </p>\n\n<p>Hope this helps. </p>\n"}, {"tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 0, "last_activity_date": 1445444282, "last_edit_date": 1445444282, "creation_date": 1445443776, "answer_id": 33264200, "question_id": 33263523, "link": "https://stackoverflow.com/questions/33263523/how-to-execute-correct-running-total-using-class-objects/33264200#33264200", "title": "How to execute correct running total using class objects", "body": "<p>The strange behaviour you experience is related to your use of the old C functions <code>printf</code> and <code>scanf</code>.</p>\n\n<p>In particular, consider these two lines here:</p>\n\n<pre><code>        printf(\"\\nif you want one more term press 1 or 0 : \");\n        scanf(\"%d\",&amp;con);   \n</code></pre>\n\n<p>The output of <code>printf</code> is <strong>buffered</strong>, i.e. there is no guarantee that it's immediately written to the console or wherever the program output is directed. Indeed, when <code>scanf</code> prompts the user for input, the output may still not have been written, which obviously results in poor user experience! The user enters something and only <em>then</em> sees the line which should have been visible all along...</p>\n\n<p>You could use <code>fflush(stdout)</code> as a workaround to force flushing of the buffer. But why should you? If you use C++ I/O with <code>std::cout</code> and <code>std::cin</code>, then you do not encounter this problem, because reading from <code>std::cin</code> automatically flushes the output buffer<sup>[*]</sup>:</p>\n\n<pre><code>        std::cout &lt;&lt; \"\\nif you want one more term press 1 or 0 : \";\n        std::cin &gt;&gt; con;\n</code></pre>\n\n<p>This is a wonderful example of how using standard C++ mechanisms automatically prevents you from dealing with low-level problems which a beginner should not even be aware of.</p>\n\n<p>I believe all other errors you are describing were just a wrong interpretation on your part of inconsistent program output, because the program works perfectly for me if I replace all <code>printf</code>/<code>scanf</code> calls with <code>std::cout</code>/<code>std::cin</code>.</p>\n\n<hr>\n\n<p><sup>[*]</sup> The technical background for this feature to work is that <code>std::cin</code> is said to be <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/tie\" rel=\"nofollow\"><em>tied</em></a> to <code>std::cout</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 5472249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464bf62935b13a44fa9a33008f2f44cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tiffany", "link": "https://stackoverflow.com/users/5472249/tiffany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445444282, "creation_date": 1445441882, "question_id": 33263523, "link": "https://stackoverflow.com/questions/33263523/how-to-execute-correct-running-total-using-class-objects", "title": "How to execute correct running total using class objects", "body": "<p>I am writing a program that is like a guessing die and card game. It simulates the user rolling a die, and based on what they toll a  card is generated that is equivalent to the amount of points they received in that round based. For example, rolling 1 has a card that says the user caught a big fish, and earned 20 points. The problem that I have is incrementing points and keeping a running total. The program only displays the die number rolled, as opposed to how many points were earned that round. It also does not print the correct final total. I have been tinkering with it for a few days, which leads me to believe I am making a simple mistake. Please help.  My code is pasted below. </p>\n\n<pre><code>    #include&lt;iostream&gt;\n#include&lt;cstdlib&gt;\n\nclass Dice{\n    private: \n        int dicevalue;\n    public:\n        int rollDice(){\n         int ran = rand() %6 +1;\n        dicevalue = ran;\n         return dicevalue;\n           }\n};\n\nclass Points{\n\n    public:\n        int getpoints(int dicevalue){\n            switch(dicevalue){\n                case 1:\n                    printf(\"\\nYou won %d points\\n\",dicevalue);\n                    return 1;\n                    break;\n                case 2:\n                    printf(\"\\nYou won %d points\\n\",dicevalue);\n                    return 2;\n                    break;\n                case 3:\n                    printf(\"\\nYou won %d points\\n\",dicevalue);\n                    return 3;\n                    break;\n                case 4:\n                    printf(\"\\nYou won %d points\\n\",dicevalue);\n                    return 4;\n                    break;\n                case 5:\n                    printf(\"\\nYou won %d points\\n\",dicevalue);\n                    return 5;\n                    break;\n                case 6:\n                    printf(\"\\nYou won %d points\\n\",dicevalue);\n                    return 6;\n                    break;\n            }\n\n            return -1;\n        }\n};\n\nclass Game{\n    private:\n        int total=0;\n        Points points;\n        Dice dice;\n\n    public:\n        int playgame(){\n            int con;\n            do{\n            int dicevalue = dice.rollDice();\n            int points_to_add=points.getpoints(dicevalue);\n            total = total + points_to_add;\n\n            printf(\"\\nif you want one more term press 1 or 0 : \");\n            scanf(\"%d\",&amp;con);   \n        }while(con==1);\n\n        return total;\n        }\n\n\n};\n\nint main(){\n    Game game;\n    printf(\"\\ntotal points are %d\",game.playgame());\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "return-value"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1445441812, "post_id": 33263439, "comment_id": 54328213, "body": "It looks like that member function should not be <code>const</code>."}, {"owner": {"reputation": 994, "user_id": 5348990, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/bf9b29188c0f8f2318a5e14dc1ca7319?s=128&d=identicon&r=PG&f=1", "display_name": "jackycflau", "link": "https://stackoverflow.com/users/5348990/jackycflau"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445441954, "post_id": 33263439, "comment_id": 54328294, "body": "@NathanOliver how to throw the exception?? I cannot find a way to return properly..."}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445441994, "post_id": 33263439, "comment_id": 54328332, "body": "Exceptions are perfect for this kind of scenario. Otherwise you will have to redesign your function to return an error code. You will also have to check the error code for every invocation."}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "edited": false, "score": 0, "creation_date": 1445442080, "post_id": 33263439, "comment_id": 54328387, "body": "There&#39;s a good tutorial <a href=\"http://www.cplusplus.com/doc/tutorial/exceptions/\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 2, "last_activity_date": 1445443217, "last_edit_date": 1445443217, "creation_date": 1445442147, "answer_id": 33263612, "question_id": 33263439, "link": "https://stackoverflow.com/questions/33263439/class-function-returning-invalid-lvalue/33263612#33263612", "title": "Class function returning invalid lvalue", "body": "<p>There are three practical possibilities:</p>\n\n<ul>\n<li><code>assert</code> the precondition, and rely on testing to root out all invalid calls, or</li>\n<li>throw an exception when the precondition is not true, or</li>\n<li>return an easily recognized-as-such error value.</li>\n</ul>\n\n<p>In the old days one also included schemes such as calling a user-provided error function, but really what could it do except terminate or throw an exception.</p>\n\n<p>The third possibility, returning a known-as-such error value, may appear unsuitable for your present predicament, which ideally would return a <code>double&amp;</code> which would be immediately used. But in general it's a valid option. For example, it can be implemented as a Boost <code>optional</code>.</p>\n\n<hr>\n\n<p>In passing, some general advice.</p>\n\n<p>For the given code,</p>\n\n<pre><code>double &amp; MATRIX::elements(int i, int j) const;\n</code></pre>\n\n<p>usually a <code>const</code> method does not provide read/write access, it defeats the purpose. However there are exceptions, such as for a proxy object. But on the third and gripping hand, the above code is not for such objects.</p>\n\n<p>Also, consider reserving ALL UPPERCASE identifiers for macros. That way you can avoid some name collisions. Remember that macros don't respect scopes, and since a great many people use all uppercase identifiers for macros, while few do otherwise, the chance of a collision, resulting in undesirable text substitution, is greater with uppercase used for ordinary identifiers.</p>\n"}], "owner": {"reputation": 994, "user_id": 5348990, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/bf9b29188c0f8f2318a5e14dc1ca7319?s=128&d=identicon&r=PG&f=1", "display_name": "jackycflau", "link": "https://stackoverflow.com/users/5348990/jackycflau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 33263612, "answer_count": 1, "score": 1, "last_activity_date": 1445443217, "creation_date": 1445441636, "question_id": 33263439, "link": "https://stackoverflow.com/questions/33263439/class-function-returning-invalid-lvalue", "title": "Class function returning invalid lvalue", "body": "<p>Hi I am now writing a program handling matrix manipulation and I am struggling on the error handling issue in a member function.</p>\n\n<p>Given a function </p>\n\n<pre><code>double &amp; MATRIX::elements(int i, int j) const;\n</code></pre>\n\n<p>it is the function that can return a reference back, so the function can be a \nlvalue, e.g. </p>\n\n<pre><code>object.elements(1,2)= 2; // I can change the value matrix element (1,2) to be 2\n</code></pre>\n\n<p>I assume that some people may enter the index of the matrix wrongly (i.e.invalid value of i and j) that the element (i,j) does not exist. Therefore, I write an if-else statement, however, I wonder what should I return when invalid values of i and j are found?? Can I prevent the function from returning  anything so situations like </p>\n\n<pre><code>object.elements(100,100000)= 2; // where the matrix size is only 3x3\n</code></pre>\n\n<p>won' t happen??</p>\n\n<p>P.S. I store the matrix elements in a dynamic array when I create the object</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1445441658, "post_id": 33263407, "comment_id": 54328118, "body": "C <b>or</b> C++? There is a difference!"}, {"owner": {"reputation": 123, "user_id": 5467916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/s54EF.png?s=128&g=1", "display_name": "Understanding", "link": "https://stackoverflow.com/users/5467916/understanding"}, "edited": false, "score": 0, "creation_date": 1445441755, "post_id": 33263407, "comment_id": 54328182, "body": "This is for C++, but I would like to know also for C! :)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1445441774, "post_id": 33263407, "comment_id": 54328191, "body": "You will probably need to look up your OS API for time delay or sleep functions."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445441778, "post_id": 33263407, "comment_id": 54328195, "body": "@cad: there is, and this is clearly C++. (Knowing what language it actually is could be useful to the OP as well.)"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1445441820, "post_id": 33263407, "comment_id": 54328217, "body": "@Jongware I was rather referring to the general fact that C is distinct from C++."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1445449231, "post_id": 33263407, "comment_id": 54332779, "body": "Suggestions for C under a couple of different OSes: <a href=\"http://stackoverflow.com/q/2353685/2564301\">stackoverflow.com/q/2353685/2564301</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5467916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/s54EF.png?s=128&g=1", "display_name": "Understanding", "link": "https://stackoverflow.com/users/5467916/understanding"}, "edited": false, "score": 0, "creation_date": 1445441936, "post_id": 33263451, "comment_id": 54328289, "body": "Have I to include some library? Because it gives me error (precisely it says that the &quot;s&quot; in &quot;1s&quot; has not been declared)"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1445442436, "last_edit_date": 1445442436, "creation_date": 1445441668, "answer_id": 33263451, "question_id": 33263407, "link": "https://stackoverflow.com/questions/33263407/adding-time-interval-in-a-for-cycle/33263451#33263451", "title": "Adding &quot;time interval&quot; in a for cycle", "body": "<p>Since C++14, you can use <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow\"><code>std::this_thread::sleep_for</code></a> and the new user defined time intervals:</p>\n\n<pre><code>using namespace std::chrono_literals;\nfor (i = 1; i&lt;=100; i++) \n{\n    cout &lt;&lt; \" Hello World!\\n \"; \n    std::this_thread::sleep_for(1s);\n}\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/15dafff0de6044f5\" rel=\"nofollow\">Live Example</a></kbd></p>\n\n<p>If you only have C++11 support it would be</p>\n\n<pre><code>for (i = 1; i&lt;=100; i++) \n{\n    cout &lt;&lt; \" Hello World!\\n \"; \n    std::this_thread::sleep_for(std::chrono::seconds(1));\n}\n</code></pre>\n\n<p>This does require <code>&lt;thread&gt;</code> and <code>&lt;chrono&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 2008, "user_id": 3483291, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PAosg.jpg?s=128&g=1", "display_name": "vishal", "link": "https://stackoverflow.com/users/3483291/vishal"}, "is_accepted": true, "score": 0, "last_activity_date": 1445442159, "creation_date": 1445442159, "answer_id": 33263617, "question_id": 33263407, "link": "https://stackoverflow.com/questions/33263407/adding-time-interval-in-a-for-cycle/33263617#33263617", "title": "Adding &quot;time interval&quot; in a for cycle", "body": "<p>Here is the complete working code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n\nusing namespace std;\n\nint main()\n{\nunsigned int microseconds = 1000 ;\n\nfor (int i = 1; i&lt;=10; i++)\n{\n\n    cout &lt;&lt; \" Hello World!\\n \";\n    this_thread::sleep_for(chrono::milliseconds(microseconds));\n}\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5467916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/s54EF.png?s=128&g=1", "display_name": "Understanding", "link": "https://stackoverflow.com/users/5467916/understanding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 33263617, "answer_count": 2, "score": 0, "last_activity_date": 1445442436, "creation_date": 1445441553, "last_edit_date": 1445442247, "question_id": 33263407, "link": "https://stackoverflow.com/questions/33263407/adding-time-interval-in-a-for-cycle", "title": "Adding &quot;time interval&quot; in a for cycle", "body": "<p>Supposing I have the following program (I will write only the essential!):</p>\n\n<pre><code>for (i = 1; i&lt;=100; i++) \n{\n    cout &lt;&lt; \" Hello World!\\n \"; \n}\n</code></pre>\n\n<p>Running that will produce 100 Hello World directly.  How can I make this where the loop will wait a certain duration like 1 second before it executes again?</p>\n"}, {"tags": ["c++", "c++11", "header", "namespaces", "wrapper"], "comments": [{"owner": {"reputation": 3039, "user_id": 2851815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37MCt.png?s=128&g=1", "display_name": "\u043d\u0430\u0431\u0438\u044f\u0447\u043b\u044d\u0432\u044d\u043b\u0438", "link": "https://stackoverflow.com/users/2851815/%d0%bd%d0%b0%d0%b1%d0%b8%d1%8f%d1%87%d0%bb%d1%8d%d0%b2%d1%8d%d0%bb%d0%b8"}, "edited": false, "score": 0, "creation_date": 1445442154, "post_id": 33263405, "comment_id": 54328440, "body": "<code>namespace m00 {#include &quot;myheader.h&quot;}</code> (yes, this is partially sarcastic)"}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1445442156, "post_id": 33263405, "comment_id": 54328441, "body": "What about using <a href=\"https://en.wikipedia.org/wiki/Opaque_pointer\" rel=\"nofollow noreferrer\">the pimpl idiom</a>?"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1445442218, "post_id": 33263405, "comment_id": 54328493, "body": "You are trying to reuse types from your c library in the interface of your cpp library. As long as that is the case, you obviously cannot hide those types."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1445442279, "post_id": 33263405, "comment_id": 54328539, "body": "@C&#225;ssioRenan thanks, I will take a look at that! (I&#39;ve already read some hints about it, as my search returned some result about pimpl)"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 3039, "user_id": 2851815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37MCt.png?s=128&g=1", "display_name": "\u043d\u0430\u0431\u0438\u044f\u0447\u043b\u044d\u0432\u044d\u043b\u0438", "link": "https://stackoverflow.com/users/2851815/%d0%bd%d0%b0%d0%b1%d0%b8%d1%8f%d1%87%d0%bb%d1%8d%d0%b2%d1%8d%d0%bb%d0%b8"}, "edited": false, "score": 0, "creation_date": 1445442300, "post_id": 33263405, "comment_id": 54328555, "body": "@AnalPhabet: That won&#39;t work, if the c-library isn&#39;t header only, because of the different name mangling (or lack thereof)"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1445442446, "post_id": 33263405, "comment_id": 54328650, "body": "@MikeMB so basically it is not possible, to only use the C part inside the source and not in the headers? (like (stupid ideas here they go =&gt;) forward declaring the enum constants, but define their values in the source; or forward declare a class and define its inheritance in the source)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1445442726, "post_id": 33263405, "comment_id": 54328868, "body": "@MikeMB surprisingly it does work."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1445442736, "post_id": 33263405, "comment_id": 54328876, "body": "@C&#225;ssioRenan the pimpl mechanism creates runtime overhead, which I want to avoid if possible. My first solution was very similar, before I even knew this technique called pimpl, but then I found out, that a class can derive from a struct.. (also not solving the enum problem)"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1445443172, "post_id": 33263405, "comment_id": 54329133, "body": "for the enums at least, you could declare an enum that represented every type in the C structs, in the .hpp file like so: <code>struct Consts{enum values{&#47;*values mirroring C consts struct here*&#47;}};</code> which would allow you to convert from and to the underlying type, then write a specialized cast to convert between the two enums in your .cpp file."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1445443206, "post_id": 33263405, "comment_id": 54329158, "body": "Pimpl is a terrible idea. Kills a lot of optimizations."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1445443426, "post_id": 33263405, "comment_id": 54329320, "body": "@jaggedSpire umm.. I don&#39;t think that would be a great idea (convince me, if I&#39;m wrong), as we have modern language support for <code>enum class</code>es which I truly want to use :) Not to mention, the lightness of an enum compared to a struct.."}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1445443712, "post_id": 33263405, "comment_id": 54329496, "body": "@SergeyA I agree, but if the concern is hiding names from the header, there&#39;s not a lot of options. Not that I know of, at least."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1445444114, "post_id": 33263405, "comment_id": 54329737, "body": "@n.m.: That is indeed interesting - with what library and compiler have you tested it?"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1445444329, "post_id": 33263405, "comment_id": 54329884, "body": "@PeterVaro: Of course you can, but any type, you want to use in your interface (directly or indirectly) has to be defined in your hpp-file."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1445444574, "post_id": 33263405, "comment_id": 54330027, "body": "@MikeMB gcc, but it should work with any normal compiler. <code>extern &quot;C&quot;</code> names are usually not mangled."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1445444802, "post_id": 33263405, "comment_id": 54330146, "body": "@n.m. even if this is true (which would be awesome) -- the C values would be still available, because that namespace would be included by the <code>.hpp</code>, so in some ways, it answers my question, that those values won&#39;t pollute the global namespace, but on the other hand they will not hide/restrict access to them, right?"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1445445013, "post_id": 33263405, "comment_id": 54330265, "body": "@n.m.: even if they are sourrounded by <code>namespace ...</code>? I thought the namespace is part of the name mangling. Lets say, I include two C-header files which both define the name foo and souround them with two different namespaces. How does the linker resolve a call to <code>namespace1::foo</code> then?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1445445433, "post_id": 33263405, "comment_id": 54330562, "body": "This just puts the included names in a namespace. To totally hide them you would need to do if you wanted to hide names exported by a C++ library. Write forwarders and implement pimpls. There&#39;s no need, namespaces solve the problem."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1445445773, "post_id": 33263405, "comment_id": 54330768, "body": "@MikeMB yes, even when included in a namespace. The point of <code>extern &quot;C&quot;</code> is C compatibility. C doesn&#39;t mangle. If you include two such things, you will have an error. The linker would see both names as just <code>foo</code> and will not be able to resolve them correctly."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 3039, "user_id": 2851815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37MCt.png?s=128&g=1", "display_name": "\u043d\u0430\u0431\u0438\u044f\u0447\u043b\u044d\u0432\u044d\u043b\u0438", "link": "https://stackoverflow.com/users/2851815/%d0%bd%d0%b0%d0%b1%d0%b8%d1%8f%d1%87%d0%bb%d1%8d%d0%b2%d1%8d%d0%bb%d0%b8"}, "edited": false, "score": 0, "creation_date": 1445445790, "post_id": 33263405, "comment_id": 54330775, "body": "@Anal Phabet: Sorry, I was totally wrong please go ahead and post your suggestion as an answer"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1445445849, "post_id": 33263405, "comment_id": 54330812, "body": "@n.m.: You are right of course, there is even an example in the standard about this. Don&#39;t know, what I was thinking."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1445446081, "post_id": 33263405, "comment_id": 54330960, "body": "@PeterVaro I was misremembering that with a scoped enum, you couldn&#39;t get the underlying value, period. (An aside: the only difference in cost I can find between a scoped enum and a struct containing just an unscoped enum definition is the type safety aspect--what I&#39;m assuming is your concern, and that variables of the <i>struct&#39;s</i> type will typically be a byte, excepting its inclusion in another class as a base class, in which case <a href=\"http://stackoverflow.com/questions/25786853/\">the Base Class Optimization comes out to play</a>, but you&#39;d only use instantiations of the enum...)"}], "answers": [{"comments": [{"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445453159, "post_id": 33265429, "comment_id": 54335011, "body": "At this stage of your answer, it does not solve anything =&gt; you are including <code>bar.hpp</code> into the user-code, which also includes <code>foo.h</code>, therefore all the C declarations will be accessible. I need a solution, where I only include the <code>foo.h</code> into <code>bar.cpp</code> and <code>bar.hpp</code> stays clean and not include any C related stuffs directly. The hard part is: both the enums and classes need something for their reasonable forward declarations.."}], "tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 0, "last_activity_date": 1445452242, "last_edit_date": 1445452242, "creation_date": 1445447750, "answer_id": 33265429, "question_id": 33263405, "link": "https://stackoverflow.com/questions/33263405/how-not-to-pollute-the-global-namespace-with-declarations-of-a-c-header/33265429#33265429", "title": "How not to pollute the global namespace with declarations of a C header?", "body": "<p>I'm not sure if it's language legal, but I think <code>extern \"C\"</code> is just there to unmangle functions, so as long as you keep them in the .cpp file you can get away with this.</p>\n\n<p>This is a little profane, but it seems to work with gcc 4.3.5.  It demonstrates that you can use C functions while also hiding them in a namespace.</p>\n\n<p>I didn't bother with inheriting struct_t, but it should probably work.  I have no idea if you can pull off the <code>enum class</code>.</p>\n\n<p><strong>foo.h</strong></p>\n\n<pre><code>#ifndef foo_H\n#define foo_H\n\ntypedef enum {\n    ALPHA,\n    BETA\n} enum_t;\n\ntypedef struct\n{\n    int i;\n} struct_t;\n\nvoid printit(struct_t print_me);\n\n#endif // foo_H\n</code></pre>\n\n<p><strong>foo.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"foo.h\"\n\nvoid printit (struct_t print_me)\n{\n    printf (\"Hello World %d!\\n\", print_me.i);\n}\n</code></pre>\n\n<p><strong>bar.hpp</strong></p>\n\n<pre><code>#ifndef bar_HPP\n#define bar_HPP\n\nnamespace _foo {\n    // Don't need extern \"C\" since we're not using functions\n#include \"foo.h\"\n}\n\nstruct based_on_struct_t // : public _foo:struct_t // Do you really have to derive?  It might be possible, but it's ugly\n{\n    _foo::struct_t i;\n    double j;\n    based_on_struct_t (int _i, double _j) : j(_j) { i.i = _i; }\n    void print(void); // Gonna call printit, MUST be in .cpp\n};\n\n#endif // bar_HPP\n</code></pre>\n\n<p><strong>bar.cpp</strong></p>\n\n<pre><code>namespace _foo{\nextern \"C\" {\n#include \"foo.h\"\n}\n}\n\n#include \"bar.hpp\"\n#include &lt;stdio.h&gt;\n\nvoid based_on_struct_t::print (void) {\n    // Call the old version...\n    printit(i);\n\n    // And do new crap\n    printf (\"Goodbye World %d %f\\n\", i.i, j);\n}\n</code></pre>\n\n<p><strong>driver.cpp</strong></p>\n\n<pre><code>#include \"bar.hpp\"\n\nint main (void) {\n    based_on_struct_t B(10, .1);\n\n    B.print();\n\n    return 0;\n}\n</code></pre>\n\n<p>Demo...</p>\n\n<pre><code>$ gcc foo.c -c -O3\n$ g++ foo.o bar.cpp driver.cpp\n$ ./a.out\nHello World 10!\nGoodbye World 10 0.100000\n$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445451755, "post_id": 33266416, "comment_id": 54334223, "body": "Thanks for the reply, although you just summerized what I&#39;m trying to do here. But while I tried, I hit some walls, one of them is the above question, which unfortunately did not answer by you."}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "reply_to_user": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445452028, "post_id": 33266416, "comment_id": 54334347, "body": "@PeterVaro hmm... if you don&#39;t use C structures and enums in your C++ interface, you won&#39;t need to include <code>.h</code> into <code>.hpp</code> file. What am I missing?"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445452249, "post_id": 33266416, "comment_id": 54334466, "body": "that&#39;s exactly what I want to achieve, and that&#39;s exactly what I asked: how not to include the original <code>.h</code> into the <code>.hpp</code> =&gt; but because both the enums and classes need some values from it, it looks like it is unavoidable.. cannot forward declare the wrapping types without their C counterparts.."}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "reply_to_user": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445452488, "post_id": 33266416, "comment_id": 54334604, "body": "@PeterVaro I would define C++ enum class in <code>.hpp</code> file and added function into <code>.cpp</code> that converts C++ enum to C enum and back. I wouldn&#39;t use C enum values in C++ enum definition. The same for C++ class vs C structure. I&#39;ve added a link to my tiny C library with C++ wrapper."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445452600, "post_id": 33266416, "comment_id": 54334669, "body": "so, you would push all the conversions to run-time, instead of translation time =&gt; which could and should be avoided in this case (not only because of the tiny performance overhead, but because of the unnecessary nature of it)"}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "reply_to_user": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445453008, "post_id": 33266416, "comment_id": 54334923, "body": "@PeterVaro I know, all C++ developers inclined to optimize performance of every single line of code (including myself). But in my experience, performance bottlenecks are usually in other places. Later, you will be able to make interface dirtier if it is need to improve performance. But, usually it is not. I maintain high performance software and most of performance problems aren&#39;t related to packing/copying and other things. Sure, this is all IMHO."}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445453348, "post_id": 33266416, "comment_id": 54335116, "body": "I tried to say, that I&#39;m not talking about performance here, it is very likely that it is so little it is neglectable. I&#39;m talking about the static checking and analysis the compiler (and I) can do. Not to mention the fact, that literally nothing justifies pushing this problem to the runtime side, when you are perfectly being able to do that on the translation time side."}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "reply_to_user": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445453595, "post_id": 33266416, "comment_id": 54335262, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/93005/discussion-between-stas-and-peter-varo\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "is_accepted": false, "score": 2, "last_activity_date": 1445501566, "last_edit_date": 1445501566, "creation_date": 1445451269, "answer_id": 33266416, "question_id": 33263405, "link": "https://stackoverflow.com/questions/33263405/how-not-to-pollute-the-global-namespace-with-declarations-of-a-c-header/33266416#33266416", "title": "How not to pollute the global namespace with declarations of a C header?", "body": "<p>If the whole idea of writing high-level and idiomatic C++ wrapper is to bring safety, automatic memory management and convenient C++ types like <code>std::sting</code>, I would include C header into <code>cpp</code> file only.</p>\n\n<p>Provide clean idiomatic C++ interface, and use C library only in the implementation.</p>\n\n<p>Do not afraid to write a couple of utility functions that convert C data to C++ and back. If a C++ class should hold C-specific data, and it is not possible to replace it with C++ analog, use <a href=\"https://akrzemi1.wordpress.com/2013/11/18/type-erasure-part-i/\" rel=\"nofollow\">some type erasure technique</a> to keep clean interface.</p>\n\n<p>I wouldn't worry about performance due to such wrapping until I see it on top in a profiler log. In most cases it is not a bottleneck.</p>\n\n<p>Again, splitting interface and implementation is usually a win.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Initially, I was thinking more about project specific C++ interface rather than universal C++ wrapper around C library.</p>\n\n<p>Solution with <code>extern \"C\"</code> wrapped into a namespace looks correct to me (see \u00a77.5 of C++11 standard). But, I've never seen this technique in the wild.</p>\n\n<p>You can go further and add nested <code>detail</code> namespace to not pollute <code>my</code> namespace with C types. This trick is popular in header only libraries:</p>\n\n<pre><code>namespace my\n{\n    namespace detail\n    {\n        extern \"C\"\n        {\n            #include \"my_header.h\"\n        }\n    }\n\n    enum class Consts\n    {\n        ALPHA = detail::my_Consts_ALPHA,\n        BETA  = detail::my_Consts_BETA,\n    };\n\n    class Type : public detail::my_Type\n    {\n        public:\n            void\n            method(Consts constant);\n    };\n}\n</code></pre>\n\n<p>Take into account that you can't make C functions completely opaque or wrap them to a single namespace when you link with static library. They have external linkage and know nothing about namespaces.</p>\n\n<pre><code>namespace A {\n    extern \"C\" void my_Type_method(my_Type *const, my_Enum);\n}\n\nnamespace B {\n    extern \"C\" void my_Type_method(my_Type *const, my_Enum);\n}\n\nextern \"C\" void my_Type_method(my_Type *const, my_Enum);\n</code></pre>\n\n<p>Basically, all these declarations refer to the same C function. As C doesn't support namespaces and overloading, linker usually uses function names as unique identifiers (even argument types are ignored).</p>\n\n<p>Anyway, this approach will help to avoid accidental access to C interface.</p>\n"}, {"comments": [{"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "edited": false, "score": 0, "creation_date": 1445465062, "post_id": 33270062, "comment_id": 54341246, "body": "Thank you guys: @AnalPhabet and @n.m.!"}, {"owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "reply_to_user": {"reputation": 3039, "user_id": 2851815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37MCt.png?s=128&g=1", "display_name": "\u043d\u0430\u0431\u0438\u044f\u0447\u043b\u044d\u0432\u044d\u043b\u0438", "link": "https://stackoverflow.com/users/2851815/%d0%bd%d0%b0%d0%b1%d0%b8%d1%8f%d1%87%d0%bb%d1%8d%d0%b2%d1%8d%d0%bb%d0%b8"}, "edited": false, "score": 0, "creation_date": 1445599726, "post_id": 33270062, "comment_id": 54401238, "body": "@AnalPhabet how&#39;s so?"}, {"owner": {"reputation": 3039, "user_id": 2851815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/37MCt.png?s=128&g=1", "display_name": "\u043d\u0430\u0431\u0438\u044f\u0447\u043b\u044d\u0432\u044d\u043b\u0438", "link": "https://stackoverflow.com/users/2851815/%d0%bd%d0%b0%d0%b1%d0%b8%d1%8f%d1%87%d0%bb%d1%8d%d0%b2%d1%8d%d0%bb%d0%b8"}, "edited": false, "score": 0, "creation_date": 1445600471, "post_id": 33270062, "comment_id": 54401681, "body": "Types, verbibols, funcitons defined in the namespace. Is <code>size_t</code> <code>std::size_t</code>, <code>::size_t</code> or <code>mynaemspaec::size_t</code>?"}], "tags": [], "owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "is_accepted": true, "score": 3, "last_activity_date": 1445599692, "last_edit_date": 1495541041, "creation_date": 1445465030, "answer_id": 33270062, "question_id": 33263405, "link": "https://stackoverflow.com/questions/33263405/how-not-to-pollute-the-global-namespace-with-declarations-of-a-c-header/33270062#33270062", "title": "How not to pollute the global namespace with declarations of a C header?", "body": "<p>In the comments of the question <a href=\"https://stackoverflow.com/users/2851815/anal-phabet\">@AnalPhabet</a> suggested sarcastically, that one should use <code>#include</code> of a C header inside a <code>namespace</code>. <a href=\"https://stackoverflow.com/users/775806/n-m\">@n.m.</a> confirmed, that it is actually a working solution, and now I tested it on my own setup, and fortunately it is working pretty fine.</p>\n\n<p><em>(Although I have no idea, if this is implementation specific or not, but I tested on both <code>g++</code> and <code>clang++</code> and it is working.)</em></p>\n\n<p>It does not solve the <em>opaqueness</em> problem, but at least it makes <em>a bit harder</em> to access to the raw C data directly as it is living in a separate <code>namespace</code> now, therefore the user can't accidentaly access, but willingly.</p>\n\n<p>So, the <code>my_header.hpp</code> should look like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>namespace my\n{\n    extern \"C\"\n    {\n        #include \"my_header.h\"\n    }\n\n    enum class Consts\n    {\n        ALPHA = my_Consts_ALPHA,\n        BETA  = my_Consts_BETA,\n    };\n\n    class Type : public my_Type\n    {\n        public:\n            void\n            method(Consts constant);\n    };\n}\n</code></pre>\n\n<p>So wherever <code>my_header.hpp</code> is <code>#include</code>'d, the user can only access to the C values as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>my::my_Consts_ALPHA       // The wrapped value is =&gt; my::Consts::ALPHA\nmy::my_Type               // The wrapped value is =&gt; my::Type\nmy::my_Type_method(t,..)  // The wrapped value is =&gt; t.method(..)\n</code></pre>\n"}], "owner": {"reputation": 9958, "user_id": 2188562, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DMWEc.png?s=128&g=1", "display_name": "Peter Varo", "link": "https://stackoverflow.com/users/2188562/peter-varo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1521, "favorite_count": 4, "accepted_answer_id": 33270062, "answer_count": 3, "score": 8, "last_activity_date": 1445599692, "creation_date": 1445441546, "last_edit_date": 1445441946, "question_id": 33263405, "link": "https://stackoverflow.com/questions/33263405/how-not-to-pollute-the-global-namespace-with-declarations-of-a-c-header", "title": "How not to pollute the global namespace with declarations of a C header?", "body": "<p>I'm trying to wrap a C library in C++, to make it a modern, high level and idiomatic C++ library. What I want to do, is to make the C objects completely opaque and/or directly unavailable from the C++ code and wrap/replace them with higher-level alternatives.</p>\n\n<p>The problem I'm facing with is simple: I want to include the C header only to the C++ source, so that the C++ header when included won't include the C header's declarations as well, that is, it won't pollute the global namespace.</p>\n\n<p>But it looks like the correct separation of the header and source files does not allow me to do that. Here is a very much dummified version of my problem, the comments will tell you the rest:</p>\n\n<hr>\n\n<p><em>my_header.h:</em></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef enum\n{\n    my_Consts_ALPHA = /* some special value */,\n    my_Consts_BETA  = /* other special value */,\n} my_Consts;\n\ntypedef struct\n{\n    // members...\n} my_Type;\n\nvoid\nmy_Type_method(my_Type *const,\n               my_Enum);\n</code></pre>\n\n<hr>\n\n<p><em>my_header.hpp:</em></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>namespace my\n{\n    enum class Consts; // &lt;-- This header is missing the constant values of\n                       //     this enum, because its values are defined by\n                       //     the C header :( \n\n    class Type : public my_Type // &lt;-- The super struct is coming from the\n                                //     C header, but I don't want to include\n                                //     that header here :(\n    {\n        public:\n            void\n            method(Consts constant);\n    };\n}\n</code></pre>\n\n<hr>\n\n<p><em>my_source.cpp:</em></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>extern \"C\"\n{\n    #include \"my_header.h\"\n}\n\n#include \"my_header.hpp\"\n\nnamespace my\n{\n    enum class Consts\n    {\n        ALPHA = my_Consts_ALPHA,\n        BETA  = my_Consts_BETA,\n    };\n\n    void\n    Type::method(Consts constant)\n    {\n        my_Type_method(static_cast&lt;my_Type *const&gt;(this),\n                       static_cast&lt;my_Consts&gt;(constant));\n    }\n}\n</code></pre>\n\n<p><em>So my questions are:</em> am I missing something very obvious here? Is this even possible to achieve? Is there a trick that I'm not aware of?</p>\n"}, {"tags": ["c++", "templates", "strategy-pattern"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1445441990, "post_id": 33263375, "comment_id": 54328327, "body": "so you want to specify <code>lookupMethod</code> at compile time? depending on what? please clarify"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1445442699, "post_id": 33263375, "comment_id": 54328848, "body": "If you want to choose at compile time, use <code>template</code>s.  Otherwise, your code works.  You add a second parameter for the <code>lookupMethod</code> and use function overloading."}, {"owner": {"reputation": 94, "user_id": 5159806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67649e45c8bc304994e583753b9d477?s=128&d=identicon&r=PG", "display_name": "user5159806", "link": "https://stackoverflow.com/users/5159806/user5159806"}, "edited": false, "score": 0, "creation_date": 1445442766, "post_id": 33263375, "comment_id": 54328897, "body": "Your question is not clear to me."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1445442779, "post_id": 33263375, "comment_id": 54328903, "body": "Your issue to resolve is that templates <i>use data types, not values</i>; so you&#39;ll have to figure out a way to do the switching based on data types."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1445445142, "post_id": 33263375, "comment_id": 54330360, "body": "yes, compile time. I will edit the question soon."}], "answers": [{"comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1445443790, "post_id": 33264135, "comment_id": 54329553, "body": "It&#39;s not necessary to introduce all the boilerplate of having two template specializations, see my answer."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1445444415, "post_id": 33264135, "comment_id": 54329931, "body": "@NirFriedman, depends on your idea of boilerplate. I find yours more boilerplace, and it also has branching (yes, likely to be thrown out by optimizer - but syntaxically it is there)."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1445452319, "post_id": 33264135, "comment_id": 54334503, "body": "I guess that is technically true in some kind of extreme limit, but this is relatively objective, considering you&#39;ve written out the signature 3 times, which contains no new information. I think most people find ifs more readable than template specializations, they&#39;re much simpler, and there is no run-time cost."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1445443594, "creation_date": 1445443594, "answer_id": 33264135, "question_id": 33263375, "link": "https://stackoverflow.com/questions/33263375/using-c-templates-to-switch-strategies-algorithms/33264135#33264135", "title": "using C++ templates to switch strategies / algorithms", "body": "<p>You can use template specialization, provided lookupMethod is known at compile time.\nFor example, you can do it like this:</p>\n\n<pre><code>template &lt;int METHOD&gt; \nint MyArray::lookup(const String&amp; key); // Not implemented\ntemplate&lt;&gt;\nint MyArray::lookup&lt;LINEAR_SEARCH&gt;(const String&amp; key) {\n    return lookupLinearSearch(key);\n}\n\ntemplate&lt;&gt;\nint MyArray::lookup&lt;BINARY_SEARCH&gt;(const String&amp; key) {\n    return lookupBinarySearch(key);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": false, "score": -1, "last_activity_date": 1445443757, "creation_date": 1445443757, "answer_id": 33264191, "question_id": 33263375, "link": "https://stackoverflow.com/questions/33263375/using-c-templates-to-switch-strategies-algorithms/33264191#33264191", "title": "using C++ templates to switch strategies / algorithms", "body": "<p>If you are willing to always commit to which strategy you are going to use at compile time, you can do this:</p>\n\n<pre><code>enum class METHOD {LINEAR_SEARCH, BINARY_SEARCH};\n\ntemplate &lt;METHOD M&gt;\nint MyArray::lookup(const String &amp; key) {\n    if (M == METHOD::LINEAR_SEARCH)\n        return lookupLinearSearch(key);\n    else\n        return lookupBinarySearch(key);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2630, "user_id": 5053331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9a0047e09056279f06b7fb3b0c101e?s=128&d=identicon&r=PG&f=1", "display_name": "cdonat", "link": "https://stackoverflow.com/users/5053331/cdonat"}, "is_accepted": true, "score": 3, "last_activity_date": 1445451222, "last_edit_date": 1445451222, "creation_date": 1445443934, "answer_id": 33264265, "question_id": 33263375, "link": "https://stackoverflow.com/questions/33263375/using-c-templates-to-switch-strategies-algorithms/33264265#33264265", "title": "using C++ templates to switch strategies / algorithms", "body": "<p>The most obvious way is to encapsulate the strategies in types and implement lookup() as a function template:</p>\n\n<pre><code>namespace searchStrategy {\n    struct linearSearch {\n        static auto lookup(const MyArray&amp; a, const String &amp;key)\n        -&gt; int {\n            return a.lookupLinearSearch(key);\n        };\n    };\n\n    struct binarySearch {\n        static auto lookup(const MyArray&amp; a, const String &amp;key)\n        -&gt; int {\n            return a.lookupBinarySearch(key);\n        };\n    };\n}\n\nclass MyArray {\n    public:\n        template &lt;typename LookupStrategy&gt;\n        auto lookup(const String &amp;key) const\n        -&gt; int {\n            return LookupStrategy::lookup(*this, key);\n        };\n};\n\n// ...\nauto myArray = MyArray{};\nmArray.lookup&lt;searchStrategy::binarySearch&gt;(\"asdf\"s);\n</code></pre>\n\n<p>Alternatively you can specialize the template and use the strategy type as tag only:</p>\n\n<pre><code>namespace searchStrategy {\n    struct linearSearch {};    \n    struct binarySearch {};\n}\n\nclass MyArray {\n    public:\n        template &lt;typename LookupStrategy&gt;\n        int lookup(const String &amp;key) const;\n        template &lt;&gt;\n        int lookup&lt;searchStrategy::linearSearch&gt;(const String &amp;key) const {\n            return lookupLinearSearch(key);\n        };\n        template &lt;&gt;\n        int lookup&lt;searchStrategy::binarySearch&gt;(const String &amp;key) const {\n            return lookupBinarySearch(key)\n        };\n};\n\n\n// ...\nauto myArray = MyArray{};\nmArray.lookup&lt;searchStrategy::binarySearch&gt;(\"asdf\"s);\n</code></pre>\n\n<p>Now you might prefer to not have to define the template parameters, but use a function parameter instead. You don't even need templates for that, but just method overloading:</p>\n\n<pre><code>namespace searchStrategy {\n    struct LinearSearchT {};    \n    struct BinarySearchT {};\n    static const LinearSearchT linearSearch;\n    static const BinarySearchT binarySearch;\n}\n\nclass MyArray {\n    public:\n        int lookup(const String &amp;key,\n                   const searchStrategy::linearSearchT strategy) const {\n            return lookupLinearSearch(key);\n        };\n        int lookup(const String &amp;key,\n                   const searchStrategy::binarySearchT strategy) const {\n            return lookupBinarySearch(key)\n        };\n};\n\n\n// ...\nauto myArray = MyArray{};\nmArray.lookup(\"asdf\"s, searchStrategy::binarySearch);\n</code></pre>\n\n<p>Looks like dynamically choosing the strategy, but is static. You can not do something like this:</p>\n\n<pre><code>mArray.lookup(\"asdf\"s, (someReason) ?\n                           searchStrategy::binarySearch :\n                           searchStrategy::linearSearch);\n</code></pre>\n\n<p>In that case you'd have to write</p>\n\n<pre><code>if( someReason )\n    mArray.lookup(\"asdf\"s, searchStrategy::binarySearch);\nelse\n    mArray.lookup(\"asdf\"s, searchStrategy::linearSearch);\n</code></pre>\n\n<p>Beware: all code in this answer is untested. It will contain bugs.</p>\n"}], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 33264265, "answer_count": 3, "score": 0, "last_activity_date": 1445452635, "creation_date": 1445441478, "last_edit_date": 1445452635, "question_id": 33263375, "link": "https://stackoverflow.com/questions/33263375/using-c-templates-to-switch-strategies-algorithms", "title": "using C++ templates to switch strategies / algorithms", "body": "<p>I have a C++ class that might work with linear or binary search.</p>\n\n<p>Currently I have additional member variable that show what search to be used.</p>\n\n<p>I know how I can do the search with Java-like virtual functions (strategy pattern or template method),<br>\nbut I am curious what is best practice this to be done compile time with templates&lt;>?</p>\n\n<p>Current (simplified) code looks like this:</p>\n\n<pre><code>int MyArray::lookup(const String &amp;key) const{\n    if (lookupMethod == LINEAR_SEARCH)\n        return lookupLinearSearch(key);\n    else\n        return lookupBinarySearch(key);\n}\n</code></pre>\n"}, {"tags": ["c++", "static-members", "forward-declaration"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1445441669, "post_id": 33263349, "comment_id": 54328127, "body": "Shouldn&#39;t that <code>T* array[B::N];</code> be <code>T* array[B&lt;T&gt;::N];</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1445441773, "post_id": 33263349, "comment_id": 54328189, "body": "@ChristianHackl yes, I fixed it. Actually I also had the same mistake in the original code, but I didnt realize it yet"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1445441811, "creation_date": 1445441811, "answer_id": 33263499, "question_id": 33263349, "link": "https://stackoverflow.com/questions/33263349/using-static-const-member-before-declaration/33263499#33263499", "title": "Using static const member before declaration", "body": "<p>You can change the classes a bit to get around the problem.</p>\n\n<p><strong>Solution 1: Make <code>N</code> a member of <code>A</code></strong></p>\n\n<pre><code>template&lt;typename T&gt; \nstruct A {\n    static const int N = 10;\n    T* array[N];\n};\n</code></pre>\n\n<p>and define <code>B&lt;T&gt;::N</code> in terms of <code>A&lt;T&gt;::N</code>.</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct B {\n    static const int N = A&lt;T&gt;::N;\n    A&lt;T&gt; a;\n};\n</code></pre>\n\n<p><strong>Solution 2: Make <code>N</code> another template parameter of <code>A</code></strong></p>\n\n<pre><code>template&lt;typename T, int N&gt; \nstruct A {\n    T* array[N];\n};\n\ntemplate&lt;typename T&gt;\nstruct B {\n    static const int N = 10;\n    A&lt;T, N&gt; a;\n};\n</code></pre>\n"}], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 33263499, "answer_count": 1, "score": 1, "last_activity_date": 1445441811, "creation_date": 1445441376, "last_edit_date": 1495542214, "question_id": 33263349, "link": "https://stackoverflow.com/questions/33263349/using-static-const-member-before-declaration", "title": "Using static const member before declaration", "body": "<p>My problem is the following:</p>\n\n<pre><code>template&lt;typename T&gt; \nstruct A {\n    T* array[B&lt;T&gt;::N];\n};\n\ntemplate&lt;typename T&gt;\nstruct B {\n    static const int N = 10;\n    A&lt;T&gt; a;\n}\n</code></pre>\n\n<p>This does not compile, because I would need some kind of forward declaration. I see two options</p>\n\n<ul>\n<li><p>change the order of the class declarations + forward declaration of <code>A</code> so I can use a pointer of <code>A</code> in <code>B</code>. I dont like it because I really would like to have <code>A</code> and not <code>A*</code> as member in <code>B</code> </p></li>\n<li><p>make <code>N</code> a template parameter of <code>A</code>. For now I guess I will go with this, but I also dont like it too much, thus I would like to know...</p></li>\n</ul>\n\n<p>Is there a way to make this code compile (if possible without changing any of the types or introducing more template parameters)?</p>\n\n<p>There are many similar questions, but to most of them the answer is something along the line: \"No you cant forward (static) class members\"\nHere are some of them:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2655612/forward-declare-static-function-c\">forward declare static function c++</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/936446/is-it-possible-to-forward-declare-a-static-array\">Is it possible to forward declare a static array</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/15806331/c-forward-declaration-of-a-static-class-member\">c++ forward declaration of a static class member</a></p>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1445441499, "post_id": 33263324, "comment_id": 54327994, "body": "You forgot to <code>#include &lt;algorithm&gt;</code>.  works now: <a href=\"http://coliru.stacked-crooked.com/a/63d8d55d5839d2d1\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/63d8d55d5839d2d1</a>"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1445441508, "post_id": 33263324, "comment_id": 54328003, "body": "compiles and works fine for me without the custom find."}], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1445443448, "post_id": 33263558, "comment_id": 54329333, "body": "This was completely stupid from my part... Thanks! I was busy of understanding the template error message instead... darn. Voting to close the question."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1445443896, "post_id": 33263558, "comment_id": 54329619, "body": "The funky thing is that <code>std::find</code> seems to have some overload outside algorithm. Otherwise the error should have been less verbose, like: <code>error: &#39;find&#39; is not a member of &#39;std&#39;</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1445446332, "post_id": 33263558, "comment_id": 54331093, "body": "@vsoftco: Yeah, it&#39;s a forward/friendship declaration of the specialisation in <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-api-4.5/a01048_source.html\" rel=\"nofollow noreferrer\"><code>&lt;streambuf&gt;</code></a>"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 8, "last_activity_date": 1445441972, "creation_date": 1445441972, "answer_id": 33263558, "question_id": 33263324, "link": "https://stackoverflow.com/questions/33263324/stdfind-is-not-working-with-istream-iterators/33263558#33263558", "title": "std::find is not working with istream_iterators", "body": "<blockquote>\n  <p>no matching function for call to 'find'</p>\n</blockquote>\n\n<p>Well, indeed. You did not bring <code>std::find</code> into scope by typing the following:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n</code></pre>\n"}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2107, "favorite_count": 1, "closed_date": 1445456437, "accepted_answer_id": 33263558, "answer_count": 1, "score": 1, "last_activity_date": 1445443582, "creation_date": 1445441317, "last_edit_date": 1445443582, "question_id": 33263324, "link": "https://stackoverflow.com/questions/33263324/stdfind-is-not-working-with-istream-iterators", "closed_reason": "Not suitable for this site", "title": "std::find is not working with istream_iterators", "body": "<p>I am trying to find an element in a range spanned by <code>std::istream_iterator&lt;std::string&gt;</code> using <code>std::find</code>. The code does not compile, spitting out an error about template type deduction failure</p>\n\n<blockquote>\n  <p>error: no matching function for call to 'find(std::istream_iterator >&amp;, std::istream_iterator >&amp;, std::__cxx11::string&amp;)'\n       auto it = std::find(is, end, token);</p>\n  \n  <p>note: candidate: template typename __gnu_cxx::__enable_if::__value, std::istreambuf_iterator&lt;_CharT> >::__type std::find(std::istreambuf_iterator&lt;_CharT>, std::istreambuf_iterator&lt;_CharT>, const _CharT2&amp;)\n       find(istreambuf_iterator&lt;_CharT> __first,</p>\n  \n  <p>note:   template argument deduction/substitution failed:</p>\n</blockquote>\n\n<p>However, using <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow\">the implementation of <code>std::find</code> from cppreference</a> (a straightforward implementation) makes the code compilable:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;sstream&gt;\n\n// implementation of std::find from cppreference.com\ntemplate&lt;class InputIt, class T&gt;\nInputIt find(InputIt first, InputIt last, const T&amp; value)\n{\n    for (; first != last; ++first) {\n        if (*first == value) {\n            return first;\n        }\n    }\n    return last;\n}\n\nint main() \n{\n    std::istringstream ss(\"this is a test\");\n    std::istream_iterator&lt;std::string&gt; is(ss);\n    std::istream_iterator&lt;std::string&gt; end;\n\n    std::string token = \"test\";\n    auto it = find(is, end, token); // put std::find here and it won't compile\n    (it != end) ? std::cout &lt;&lt; \"Found\\n\" : std::cout &lt;&lt; \"Not found\\n\";\n}\n</code></pre>\n\n<p>Does any one know what's wrong with <code>std::find</code> and <code>istream_iterator</code>s? I though the requirements on <code>std::find</code> are pretty basic: the iterator should be an InputIterator, which <code>istream_iterator</code> is.</p>\n"}, {"tags": ["python", "c++", "arrays"], "comments": [{"owner": {"reputation": 10032, "user_id": 5100564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZZ7Z5.png?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/5100564/jim-k"}, "edited": false, "score": 0, "creation_date": 1445442439, "post_id": 33263305, "comment_id": 54328642, "body": "Your Python code runs fine on my machine.  What error message or undesirable behavior does it produce?  Please include the call to SortFunc as well, since maybe the problem occurs there."}, {"owner": {"reputation": 178, "user_id": 5472215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500cb32a1646e58e151a06a99eea47d8?s=128&d=identicon&r=PG&f=1", "display_name": "music_junkie", "link": "https://stackoverflow.com/users/5472215/music-junkie"}, "reply_to_user": {"reputation": 10032, "user_id": 5100564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZZ7Z5.png?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/5100564/jim-k"}, "edited": false, "score": 0, "creation_date": 1445443200, "post_id": 33263305, "comment_id": 54329154, "body": "Oh, I excuce for my inaccuracy. It doesn&#39;t work when I want to return the value and print the array. This discription works if I pass array to the function, but it doesn&#39;t work if want to get it back.  When I use this <code>b = SortFunc(a, n)</code> and try to print it <code>print(b[:])</code> I can see an error: &quot;&#39;int&#39; object is not subscriptable&quot;, array b have same discription as array a."}, {"owner": {"reputation": 10032, "user_id": 5100564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZZ7Z5.png?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/5100564/jim-k"}, "edited": false, "score": 0, "creation_date": 1445443601, "post_id": 33263305, "comment_id": 54329422, "body": "Thank you, that is helpful.  Please edit your question to include this information."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1445446346, "post_id": 33263305, "comment_id": 54331104, "body": "What type does C++ think it&#39;s returning?  What type does Python think it received?  Print out the type of <i>arr</i> just before the return; print out the type of <i>b</i> just after.  From your messages, it seems that Python thinks it got an int instead of a list of ints, but let&#39;s check that with both run-time systems."}, {"owner": {"reputation": 178, "user_id": 5472215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500cb32a1646e58e151a06a99eea47d8?s=128&d=identicon&r=PG&f=1", "display_name": "music_junkie", "link": "https://stackoverflow.com/users/5472215/music-junkie"}, "edited": false, "score": 0, "creation_date": 1445448589, "post_id": 33263305, "comment_id": 54332377, "body": "I have a task to write C++ dll and use it in Python but I never studied it before. That&#39;s why I have some troubles with discription of all of it. This program changes array a. It means if I use this function I&#39;ll get a sorted array a, it works. But I want to learn how to discribe the array b to a result"}], "answers": [{"tags": [], "owner": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1445446366, "creation_date": 1445446366, "answer_id": 33265008, "question_id": 33263305, "link": "https://stackoverflow.com/questions/33263305/how-should-i-declare-an-array/33265008#33265008", "title": "How should I declare an array?", "body": "<p>I'm not sure what exactly is causing you to see that error, although I suspect something is going wrong with how \"b\" gets created. I am assuming you have a slightly different Python version of your function since Python's syntax won't allow the \"for (int i = 0...)\" syntax.</p>\n\n<p>That said, I was able to get a properly sorted array back from the following Python implementation of your C function:</p>\n\n<pre><code>def sort_func(arr, n):\n    for i in range(1, n):\n        for j in range (i, 0, -1):\n            if arr[j-1] &gt; arr[j]:\n                temp = arr[j - 1]\n                arr[j - 1] = arr[j]\n                arr[j] = temp\n    return arr\n</code></pre>\n\n<p>which when run using</p>\n\n<pre><code>python_list = [1, 2, 3, 6, 10, 4]\na = (ctypes.c_int * len(python_list))(*python_list)\nb = sort_func(a, len(python_list))\nprint(b[:])\n</code></pre>\n\n<p>as input, gives the sorted array [1, 2, 3, 4, 6, 10] from the call to \"print(b[:])\".</p>\n\n<p>As a side note, you can achieve the same results by simply calling \"sorted(a)\", which from what I understand will do the same as your written function.</p>\n"}, {"comments": [{"owner": {"reputation": 178, "user_id": 5472215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500cb32a1646e58e151a06a99eea47d8?s=128&d=identicon&r=PG&f=1", "display_name": "music_junkie", "link": "https://stackoverflow.com/users/5472215/music-junkie"}, "edited": false, "score": 0, "creation_date": 1445449522, "post_id": 33265739, "comment_id": 54332956, "body": "Yes, it modifies <code>arr</code> and it works, but I wanted to return new array. I had an idea to call the function with another array, but I just didn&#39;t know how to realize that. Thanks&#39;s for the help it was very helpful!"}], "tags": [], "owner": {"reputation": 10032, "user_id": 5100564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZZ7Z5.png?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/5100564/jim-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1445448871, "creation_date": 1445448871, "answer_id": 33265739, "question_id": 33263305, "link": "https://stackoverflow.com/questions/33263305/how-should-i-declare-an-array/33265739#33265739", "title": "How should I declare an array?", "body": "<p>It looks like <code>SortFunc</code> modifies <code>arr</code> in place.  Does this work?</p>\n\n<pre><code>SortFunc(a, n)\nprint(a[:])  # hopefully this will now show [1, 2, 3, 4, 6, 10]\n</code></pre>\n\n<p>I think with your current code, <code>b</code> may just be an int, perhaps an error flag.  Instead of returning the result, you may need to get the result using pass by reference.  So the Python code would look like:</p>\n\n<pre><code>SortFunc(a, b, n)\nprint(b[:])\n</code></pre>\n\n<p>That would call <code>void SortFunc(int arr[], int sorted[], int n)</code>.  There is some code at <a href=\"http://staff.mbi-berlin.de/schultz/Call_C-DLL_from_Python.txt\" rel=\"nofollow\">http://staff.mbi-berlin.de/schultz/Call_C-DLL_from_Python.txt</a> that changes an array by reference.</p>\n\n<p>One more thing: I'm not sure this will work, but you might try returning a new allocated array instead of returning <code>arr</code>:</p>\n\n<pre><code>int * sorted_array = new int[n];\n// Read in values from arr and sort them into sorted_array...\nreturn sorted_array\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 5472215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/500cb32a1646e58e151a06a99eea47d8?s=128&d=identicon&r=PG&f=1", "display_name": "music_junkie", "link": "https://stackoverflow.com/users/5472215/music-junkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 33265739, "answer_count": 2, "score": 0, "last_activity_date": 1445448871, "creation_date": 1445441252, "last_edit_date": 1445443803, "question_id": 33263305, "link": "https://stackoverflow.com/questions/33263305/how-should-i-declare-an-array", "title": "How should I declare an array?", "body": "<p>This is an example of my function from dll. I understand that I should ignore return value, but how to declare the array in Python to get new array back?</p>\n\n<p>C++ code:</p>\n\n<pre><code>extern \"C\" _declspec(dllexport) int* SortFunc(int arr[], int n)\n{\n    for(int i = 1; i &lt; n; i++)     \n        for(int j = i; j &gt; 0 &amp;&amp; arr[j-1] &gt; arr[j]; j--) \n        {\n            int temp = arr[j - 1];\n            arr[j - 1] = arr[j];\n            arr[j] = temp;\n        }\n    return arr;\n}\n</code></pre>\n\n<p>And I want to use this function in my Python program. Usual discription works if I pass array to the function, but it doesn't work if want to get it back.</p>\n\n<pre><code>python_list = [1, 2, 3, 6, 10, 4]\na = (ctypes.c_int * len(python_list))(*python_list)\nb = SortFunc(a, n)\nprint(b[:])\n</code></pre>\n\n<p>When I use this I can see an error: \"'int' object is not subscriptable\", array b have same discription as array a.</p>\n"}, {"tags": ["c++", "makefile", "gtkmm"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 4, "creation_date": 1445441832, "post_id": 33263288, "comment_id": 54328225, "body": "how about linking against <code>libstdc++</code> by adding <code>-L&#47;usr&#47;lib64 -lstdc++</code>?"}, {"owner": {"reputation": 94, "user_id": 5159806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67649e45c8bc304994e583753b9d477?s=128&d=identicon&r=PG", "display_name": "user5159806", "link": "https://stackoverflow.com/users/5159806/user5159806"}, "edited": false, "score": 0, "creation_date": 1445442112, "post_id": 33263288, "comment_id": 54328410, "body": "Linker error, have you tried to compile manually ? Try to specify libstdc++.so.6 at the end of the command."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 10, "creation_date": 1445447217, "post_id": 33263288, "comment_id": 54331604, "body": "Link with g++ not gcc. Do not manually add libstdc++ to the command line. Just link with g++."}, {"owner": {"reputation": 299, "user_id": 821442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5a1db6b3aadf18df987f4352a9ee4cf?s=128&d=identicon&r=PG&f=1", "display_name": "wolx", "link": "https://stackoverflow.com/users/821442/wolx"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1445471836, "post_id": 33263288, "comment_id": 54343482, "body": "@n.m. Am I not using g++ in the makefile?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1445486957, "post_id": 33263288, "comment_id": 54347279, "body": "Look at the resulting link command. <code>cc main.o ...</code>. This should use g++, not cc."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1445487157, "post_id": 33263288, "comment_id": 54347340, "body": "Apparently you attempt to use g++ but there&#39;s a misspelling in the rule (PROG vs PROGRAM)."}, {"owner": {"reputation": 299, "user_id": 821442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5a1db6b3aadf18df987f4352a9ee4cf?s=128&d=identicon&r=PG&f=1", "display_name": "wolx", "link": "https://stackoverflow.com/users/821442/wolx"}, "edited": false, "score": 0, "creation_date": 1445488619, "post_id": 33263288, "comment_id": 54347694, "body": "Wow, that was a stupid mistake. Thank you! Solved."}, {"owner": {"reputation": 299, "user_id": 821442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5a1db6b3aadf18df987f4352a9ee4cf?s=128&d=identicon&r=PG&f=1", "display_name": "wolx", "link": "https://stackoverflow.com/users/821442/wolx"}, "edited": false, "score": 0, "creation_date": 1445489270, "post_id": 33263288, "comment_id": 54347876, "body": "Why does it default to using cc otherwise?"}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1500396007, "post_id": 33263288, "comment_id": 77313227, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19901934/strange-linking-error-dso-missing-from-command-line\">Strange linking error: DSO missing from command line</a>"}], "answers": [{"tags": [], "owner": {"reputation": 509, "user_id": 7165473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a12aeb8b49f4406c5cf0a8143a12391?s=128&d=identicon&r=PG&f=1", "display_name": "T\u1ea1 L\u1ee5c Gia Ho&#224;ng", "link": "https://stackoverflow.com/users/7165473/t%e1%ba%a1-l%e1%bb%a5c-gia-ho%c3%a0ng"}, "is_accepted": false, "score": 20, "last_activity_date": 1524322772, "creation_date": 1524322772, "answer_id": 49957051, "question_id": 33263288, "link": "https://stackoverflow.com/questions/33263288/libstdc-dso-missing-from-command-line/49957051#49957051", "title": "libstdc++: DSO missing from command line", "body": "<p>I met the same issue when built openCV libraries</p>\n\n<pre><code>$ gcc DisplayImage.cpp `pkg-config opencv --libs --cflags` -o DisplayImage\n/usr/bin/ld: /tmp/ccbyJ7Ms.o: undefined reference to symbol '_ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEED1Ev@@GLIBCXX_3.4.21'\n//usr/lib/i386-linux-gnu/libstdc++.so.6: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p><strong>[SOLVE]</strong></p>\n\n<p>For <strong>gcc</strong> try adding <code>-lstdc++</code> to your command. </p>\n\n<pre><code>$ gcc DisplayImage.cpp `pkg-config opencv --libs --cflags` -o DisplayImage -lstdc++\n</code></pre>\n\n<p>For <strong>g++</strong> it will link <strong>libstdc.so.6++</strong> automatically</p>\n\n<pre><code>$ g++ DisplayImage.cpp `pkg-config opencv --libs --cflags` -o DisplayImage\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9891479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6bf7231b5cd53a7da74a9be7b251e18?s=128&d=identicon&r=PG&f=1", "display_name": "Anil Patil", "link": "https://stackoverflow.com/users/9891479/anil-patil"}, "is_accepted": false, "score": 5, "last_activity_date": 1528105678, "creation_date": 1528105678, "answer_id": 50677736, "question_id": 33263288, "link": "https://stackoverflow.com/questions/33263288/libstdc-dso-missing-from-command-line/50677736#50677736", "title": "libstdc++: DSO missing from command line", "body": "<p>I had same problem it was solved by addiing -lstdc++ in command line.</p>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 3772416, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/968873dced9c9bdc8cc206b38cbc9d1e?s=128&d=identicon&r=PG&f=1", "display_name": "cce1911", "link": "https://stackoverflow.com/users/3772416/cce1911"}, "is_accepted": false, "score": 0, "last_activity_date": 1562608692, "creation_date": 1562608692, "answer_id": 56940287, "question_id": 33263288, "link": "https://stackoverflow.com/questions/33263288/libstdc-dso-missing-from-command-line/56940287#56940287", "title": "libstdc++: DSO missing from command line", "body": "<p>I had a similar problem when compiling zeromq (zmq) into my project. Adding <strong>-lstdc++</strong> to the link line in my makefile solved the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 7219400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1566858aba2b9ffb6bd667588f3023bd?s=128&d=identicon&r=PG&f=1", "display_name": "Sahin", "link": "https://stackoverflow.com/users/7219400/sahin"}, "is_accepted": false, "score": 1, "last_activity_date": 1609777891, "creation_date": 1609777891, "answer_id": 65566242, "question_id": 33263288, "link": "https://stackoverflow.com/questions/33263288/libstdc-dso-missing-from-command-line/65566242#65566242", "title": "libstdc++: DSO missing from command line", "body": "<p>I had the same issue, in my case the problem was writing gcc instead of g++</p>\n"}], "owner": {"reputation": 299, "user_id": 821442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5a1db6b3aadf18df987f4352a9ee4cf?s=128&d=identicon&r=PG&f=1", "display_name": "wolx", "link": "https://stackoverflow.com/users/821442/wolx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36847, "favorite_count": 2, "answer_count": 4, "score": 17, "last_activity_date": 1609777891, "creation_date": 1445441201, "last_edit_date": 1592644375, "question_id": 33263288, "link": "https://stackoverflow.com/questions/33263288/libstdc-dso-missing-from-command-line", "title": "libstdc++: DSO missing from command line", "body": "<p>I am having trouble implementing a gtkmm application's makefile. I have implemented a simple solution, however, I am getting the following error:</p>\n<blockquote>\n<p>g++ -Wall -std=c++11 <code>pkg-config gtkmm-3.0 --cflags</code> -c main.cpp</p>\n<p>cc   main.o  <code>pkg-config gtkmm-3.0 --libs</code> -o main</p>\n<p>/usr/bin/ld: main.o: undefined reference to symbol '__gxx_personality_v0@@CXXABI_1.3'</p>\n<p>/usr/lib/x86_64-linux-gnu/libstdc++.so.6: error adding symbols: DSO missing from command line</p>\n<p>collect2: error: ld returned 1 exit status</p>\n<p>: recipe for target 'main' failed</p>\n<p>make: *** [main] Error 1</p>\n</blockquote>\n<p>Makefile:</p>\n<pre><code># Compiler\nCXX = g++\nCXXFLAGS = -Wall -std=c++11 `pkg-config gtkmm-3.0 --cflags`\n\n# gtkmm library flags\nLDLIBS = `pkg-config gtkmm-3.0 --libs`\n\nPROGRAM = main\nSRCS = $(wildcard *.cpp)\nOBJS = $(SRCS:.cpp=.o)\nDEPEND = .depend\n\n.PHONY: clean\n\n$(PROG): $(OBJS)\n    $(CXX) $^ -o $@ $(LDLIBS)\n\n# Object file rules:\n.cpp.o:\n    $(CXX) $(CXXFLAGS) -c $&lt;\n\n# Dependencies\n.depend:\n    rm -f ./.depend\n    $(CXX) $(CXXFLAGS) -MM $(SRCS) &gt; $(DEPEND)\n\nall: .depend $(PROGRAM)\n\nclean:\n    rm -f $(OBJS)\n    rm -f $(PROGRAM)\n    rm -f $(DEPEND)\n\n-include $(DEPEND)\n</code></pre>\n<p>main.cpp:</p>\n<pre><code>#include &lt;gtkmm/application.h&gt;\n\n#include &quot;MainWindow.hpp&quot;\n\nint main(int argc, char *argv[]) {\n  Glib::RefPtr&lt;Gtk::Application&gt; app = Gtk::Application::create(argc, argv, &quot;org.gtkmm.examples.base&quot;);\n\n  MainWindow window;\n\n  // Show windows and return when closed\n  return app-&gt;run(window);\n}\n</code></pre>\n<p>MainWindow.hpp:</p>\n<pre><code>#ifndef GUI_MAIN_WINDOW_H\n#define GUI_MAIN_WINDOW_H\n\n#include &lt;gtkmm.h&gt;\n\nclass MainWindow: public Gtk::Window {\n\n  public:\n    MainWindow();\n    virtual ~MainWindow();\n\n  protected:\n    Gtk::Frame frame;\n\n};\n\n#endif // GUI_MAIN_WINDOW_H\n</code></pre>\n<p>MainWindow.cpp:</p>\n<pre><code>#include &quot;MainWindow.hpp&quot;\n\nMainWindow::MainWindow() {\n  // Set window properties\n  set_title(&quot;Main window&quot;);\n  set_size_request(300, 300);\n\n  // Set window border width\n  set_border_width(10);\n\n  // Add frame\n  add(frame);\n\n  // Set frame's label\n  frame.set_label(&quot;Frame&quot;);\n\n  // Align the label at the right of the frame\n  frame.set_label_align(Gtk::ALIGN_END, Gtk::ALIGN_START);\n\n  // Set the style of the frame\n  frame.set_shadow_type(Gtk::SHADOW_ETCHED_OUT);\n\n  show_all_children();\n}\n\nMainWindow::~MainWindow() {\n  // Nothing to do here\n}\n</code></pre>\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "path"], "comments": [{"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1445447575, "post_id": 33263268, "comment_id": 54331828, "body": "That folder is not a standard shell folder that the Shell API knows about.  Is there any reason why you can&#39;t get the <i>Appdata\\Local</i> folder using <b>SHGetKnownFolderPath</b> and append the rest of the path?"}, {"owner": {"reputation": 1, "user_id": 5472235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93353d7c7b430b25f0a940b1b64b971f?s=128&d=identicon&r=PG&f=1", "display_name": "Shay Dgani", "link": "https://stackoverflow.com/users/5472235/shay-dgani"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1445463025, "post_id": 33263268, "comment_id": 54340318, "body": "@rrirower , I did so but when i cout &lt;&lt; *pPath (The pointer to the file) , It prints some number, Only when i code : wprintf(L&quot;%s&quot; , pPath); it prints the folder path , So do i have to unicode the pPath than append? Any other suggestions?"}], "owner": {"reputation": 1, "user_id": 5472235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93353d7c7b430b25f0a940b1b64b971f?s=128&d=identicon&r=PG&f=1", "display_name": "Shay Dgani", "link": "https://stackoverflow.com/users/5472235/shay-dgani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445441134, "creation_date": 1445441134, "question_id": 33263268, "link": "https://stackoverflow.com/questions/33263268/get-appdata-local-google-path-c", "title": "Get Appdata\\local\\Google path | C++", "body": "<p>I want to get the Path of Appdata\\Local\\Google\\Chrome\\User Data folder.\nWhen I try with getenv(\"LocalAppData\\Google\"), The function fails and returns null.\nCant find it either on KNOWNFOLDERID nor Casidl so ShGetFolderPath is off..</p>\n\n<p>Any other suggestions?</p>\n\n<p>using MVSC.</p>\n"}, {"tags": ["c++", "visual-studio-2012"], "comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1445448214, "post_id": 33263178, "comment_id": 54332171, "body": "Have you tried disabling link-time code generation and whole program optimization? I&#39;ve found that those are the biggest inhibitors of parallel builds."}, {"owner": {"reputation": 41, "user_id": 3448069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947f7be0c2770fe5a5aaffc186ce3991?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin E.", "link": "https://stackoverflow.com/users/3448069/kevin-e"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1445453941, "post_id": 33263178, "comment_id": 54335481, "body": "I took a look and whole program optimization is already off. I am having trouble locating anything for &quot;link-time code generation&quot;. Is this a project property or a global VS setting (a menu path might be helpful if you know it). Thanks."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1445454235, "post_id": 33263178, "comment_id": 54335643, "body": "I don&#39;t have VS in front of me to get the exact option. But the idea is that the linker isn&#39;t well parallelized (if at all). So you need to move as much of the work as possible out of the linker and into the compilation phase. That means disabling most of the link-time optimizations. Of course this may affect the performance of the binary, but usually acceptable for dev purposes."}, {"owner": {"reputation": 41, "user_id": 3448069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947f7be0c2770fe5a5aaffc186ce3991?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin E.", "link": "https://stackoverflow.com/users/3448069/kevin-e"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1445607771, "post_id": 33263178, "comment_id": 54406395, "body": "Well in any case linking doesn&#39;t appear to be the bottleneck (less than one is spent linking)."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1445609072, "post_id": 33263178, "comment_id": 54407323, "body": "Sounds like you might have 2 modules that are very big?"}, {"owner": {"reputation": 41, "user_id": 3448069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947f7be0c2770fe5a5aaffc186ce3991?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin E.", "link": "https://stackoverflow.com/users/3448069/kevin-e"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1445626612, "post_id": 33263178, "comment_id": 54417882, "body": "There are lots of large modules, but these are not the last two. It appears that only about 10-20 files out of about 150 total files have been compiled by the time it drops back down to using only one thread."}], "owner": {"reputation": 41, "user_id": 3448069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947f7be0c2770fe5a5aaffc186ce3991?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin E.", "link": "https://stackoverflow.com/users/3448069/kevin-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1445607729, "creation_date": 1445440913, "last_edit_date": 1495542214, "question_id": 33263178, "link": "https://stackoverflow.com/questions/33263178/why-might-vs-2012-only-perform-parallel-building-on-some-of-my-cpp-files", "title": "Why might VS 2012 only perform parallel building on some of my cpp files?", "body": "<p>I have a large c++ project that I am compiling with MS VS 2012 from within the IDE. </p>\n\n<p>I have enabled <code>Multi-processor compilation (/MP)</code> and the build begins in parallel (I know this because 8 <code>cl.exe</code> instances are visible in Task Manager). However, after a dozen or so files are completed the build seems to be serial again, with only one instance of <code>cl.exe</code> remaining. </p>\n\n<p>I have checked for incompatible options (as indicated <a href=\"https://stackoverflow.com/questions/6172205/how-can-i-do-a-parallel-build-in-visual-studio-2010\">here</a>) and everything seems correct. I have also built using <code>jom</code> from command line and the build is much faster and uses all cores have a much greater portion of the build time. </p>\n\n<p><strong>Questions:</strong><br/>\nIs there a limitation when building in parallel within VS? <br/>\nOr is there some new setting I may be missing? <br/></p>\n\n<p>Any suggestions are welcomed.</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>Here are some screenshots showing what's going on. When a build first starts, I get lots of compiling happening (see the many instances of c1.exe in Task Man), but after just a minute or so I am down to one or two instances. This doesn't seem to be a compiler limitation or project issue, because building with jom is about 4-5 times faster (using the VS compiler still) than building from within the VS IDE.</p>\n\n<p><a href=\"https://i.stack.imgur.com/h0Mr0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h0Mr0.png\" alt=\"VS 2012 Immediately after starting a build\"></a>\n<br/>VS 2012 Immediately after starting a build\n<a href=\"https://i.stack.imgur.com/5FV4c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5FV4c.png\" alt=\"VS 2012 One minute after build started\"></a>\n<br/>VS 2012 One minute after build started</p>\n"}, {"tags": ["c++", "c-preprocessor", "preprocessor-directive"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 2, "creation_date": 1445440952, "post_id": 33263158, "comment_id": 54327602, "body": "<a href=\"https://visualstudiogallery.msdn.microsoft.com/91aaa139-5d3c-43a7-b39f-369196a84fa5\" rel=\"nofollow noreferrer\">StopOnFirstBuildError</a>?"}, {"owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "reply_to_user": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1445441020, "post_id": 33263158, "comment_id": 54327645, "body": "I am specifically searching a solution to do this <code>programmatically</code>."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 2, "creation_date": 1445441323, "post_id": 33263158, "comment_id": 54327851, "body": "What do you mean by <i>programmatically</i>? In the code? Via external scripting?"}, {"owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "edited": false, "score": 0, "creation_date": 1445441469, "post_id": 33263158, "comment_id": 54327970, "body": "Something like <code>#stop</code> to stop compiling after a certain <code>#if</code> statement was true. Not using a plugin for Visual Studio."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445441604, "post_id": 33263158, "comment_id": 54328077, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2124968/gcc-pragma-to-stop-compilation\">GCC #pragma to stop compilation</a>"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1445442094, "post_id": 33263158, "comment_id": 54328397, "body": "@cad: OP knows about <code>#error</code> and also isn&#39;t asking about GCC."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 3, "creation_date": 1445442424, "post_id": 33263158, "comment_id": 54328626, "body": "<code>#error</code> is exactly meant for this. Could you be more specific in what is happening to your build?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1445444869, "post_id": 33263158, "comment_id": 54330171, "body": "<code>#error</code> terminates compilation of the current translation unit (source file). It doesn&#39;t necessarily stop an IDE from continuing to compile other sources files."}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 3, "last_activity_date": 1445444439, "creation_date": 1445444439, "answer_id": 33264433, "question_id": 33263158, "link": "https://stackoverflow.com/questions/33263158/how-can-i-programmatically-force-the-compiler-to-stop-the-compilation-process-af/33264433#33264433", "title": "How can I programmatically force the compiler to stop the compilation process after it encountered a user created error?", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/c8tk0xsk.aspx\" rel=\"nofollow\"><strong>From MSDN</strong></a></p>\n\n<blockquote>\n  <p>The #error directive emits a user-specified error message at compile time <strong><em>and then terminates the compilation.</em></strong></p>\n</blockquote>\n\n<p><em>(Emphasis Added)</em></p>\n\n<p>If compilation is continuing after the <code>#error</code> directive, then you're doing something odd, or MSVC is broken.</p>\n"}], "owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2323, "favorite_count": 1, "accepted_answer_id": 33264433, "answer_count": 1, "score": 1, "last_activity_date": 1464541576, "creation_date": 1445440847, "last_edit_date": 1464541576, "question_id": 33263158, "link": "https://stackoverflow.com/questions/33263158/how-can-i-programmatically-force-the-compiler-to-stop-the-compilation-process-af", "title": "How can I programmatically force the compiler to stop the compilation process after it encountered a user created error?", "body": "<p>In my code I am using the <code>#error</code> preprocessor directive in order to create an error. However, it still continues the building process.</p>\n\n<p>How can I force the building process <strong>programmatically</strong> to stop after encountering my error?</p>\n\n<p>I am using Microsoft Visual Studio 2015, C++ v140, x86, for Windows 10.</p>\n"}, {"tags": ["c++", "sdl-2"], "comments": [{"owner": {"reputation": 1202, "user_id": 673679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ac5b75f2ba59f84ac69e71018275702b?s=128&d=identicon&r=PG", "display_name": "user673679", "link": "https://stackoverflow.com/users/673679/user673679"}, "edited": false, "score": 0, "creation_date": 1445440957, "post_id": 33263112, "comment_id": 54327606, "body": "Doesn&#39;t 24 bits mean 3 color components (8 bits per compnent)? So there wouldn&#39;t be an alpha channel to read..."}], "answers": [{"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 3, "last_activity_date": 1445444555, "last_edit_date": 1445444555, "creation_date": 1445444179, "answer_id": 33264340, "question_id": 33263112, "link": "https://stackoverflow.com/questions/33263112/sdl2-read-png24-pixel-by-pixel/33264340#33264340", "title": "SDL2 read PNG24 pixel by pixel", "body": "<p><code>SDL_GetRGBA(*p, surface-&gt;format, &amp;red, &amp;green, &amp;blue, &amp;alpha);</code> attempts to extract values from <code>*p</code>, which have type <code>Uint8</code>. It is only one byte, so yes - it would be only red or alpha depending on pixel format. <code>SDL_GetRGBA</code> expects <code>Uint32</code>, so call should be e.g. <code>SDL_GetRGBA(*(Uint32*)p, surface-&gt;format, &amp;red, &amp;green, &amp;blue, &amp;alpha);</code></p>\n\n<p>(it would only be valid for 32bpp formats - if it isn't the case, you should either convert surface to 32 bit, or or <code>memcpy</code> <code>BytesPerPixel</code> amount of pixel data, otherwise results will be incorrect)</p>\n"}], "owner": {"reputation": 50096, "user_id": 42636, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1cf6e58dae064fc449e6840ffdb90306?s=128&d=identicon&r=PG", "display_name": "pistacchio", "link": "https://stackoverflow.com/users/42636/pistacchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 33264340, "answer_count": 1, "score": 1, "last_activity_date": 1445444555, "creation_date": 1445440673, "question_id": 33263112, "link": "https://stackoverflow.com/questions/33263112/sdl2-read-png24-pixel-by-pixel", "title": "SDL2 read PNG24 pixel by pixel", "body": "<p>I have a <code>getpixel</code> function that, given a surface, reads the r, g, b and alpha value of a given pixel:</p>\n\n<pre><code>void getpixel(SDL_Surface *surface, int x, int y) {\n    int bpp = surface-&gt;format-&gt;BytesPerPixel;\n    Uint8 *p = (Uint8 *)surface-&gt;pixels + y * surface-&gt;pitch + x * bpp;\n\n    Uint8 red, green, blue, alpha;\n\n    SDL_GetRGBA(*p, surface-&gt;format, &amp;red, &amp;green, &amp;blue, &amp;alpha);\n\n    cout &lt;&lt; (int)red &lt;&lt; \" \" &lt;&lt; (int)green &lt;&lt; \" \" &lt;&lt; (int)blue &lt;&lt; \" \" &lt;&lt; (int)alpha  &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>I saved a PNG image with Phosothop \"Save for Web\" and I choose PNG24 as format. The problem is that the function only reads the red value and always read alpha as 0.\nI tried to force the format like so:</p>\n\n<pre><code>SDL_Surface* temp  = IMG_Load(png_file_path.c_str()); \nSDL_Surface* image =  SDL_ConvertSurfaceFormat(temp, SDL_PIXELFORMAT_RGBA8888, 0);\nSDL_FreeSurface(temp);\n</code></pre>\n\n<p>By doing so it only read the alpha value, instead. How to read a PNG pixel by pixel in SDL2?</p>\n"}, {"tags": ["c++", "iterator", "lifetime", "function-call", "temporary-objects"], "answers": [{"comments": [{"owner": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "edited": false, "score": 0, "creation_date": 1445441487, "post_id": 33263151, "comment_id": 54327987, "body": "But here actually two nested temporary, they will be destroyed in reverse order?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "edited": false, "score": 0, "creation_date": 1445444361, "post_id": 33263151, "comment_id": 54329901, "body": "It doesn&#39;t matter here. It only matters that the first temporary still exists when the second is constructed."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 3, "last_activity_date": 1445440826, "creation_date": 1445440826, "answer_id": 33263151, "question_id": 33263110, "link": "https://stackoverflow.com/questions/33263110/lifetime-of-temporary-object-iterator-to-temporary-vector-in-nested-function-ca/33263151#33263151", "title": "Lifetime of temporary object: iterator to temporary vector in nested function call", "body": "<p>The temporary is destroyed at the end of the full statement. So this is safe.</p>\n"}], "owner": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 33263151, "answer_count": 1, "score": 0, "last_activity_date": 1537865598, "creation_date": 1445440669, "last_edit_date": 1537865598, "question_id": 33263110, "link": "https://stackoverflow.com/questions/33263110/lifetime-of-temporary-object-iterator-to-temporary-vector-in-nested-function-ca", "title": "Lifetime of temporary object: iterator to temporary vector in nested function call", "body": "<p>Let's suppose that I have such classes:</p>\n\n<pre><code>struct QString {\n    //return null terminated array\n    std::vector&lt;char&gt; toLocal8Bit() const;\n};\n\nstruct string_view {\n    const char *data;\n    size_t len;\n    string_view(const char *str): data(str), len(std::strlen(str)) {}\n};\n</code></pre>\n\n<p>and I have function with such signature:</p>\n\n<pre><code>void f(const string_view&amp; str);\n</code></pre>\n\n<p>Is it valid code</p>\n\n<pre><code>QString str;\nf(string_view(&amp;*str.toLocal8Bit().begin()));\n</code></pre>\n\n<p>?</p>\n\n<p>I mean when temporary std::vector will be destroyed?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 2, "creation_date": 1445440575, "post_id": 33263030, "comment_id": 54327326, "body": "although I embrace manu Java utilities,Java-style enums are one of the things you simply don&#39;t need."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 9, "creation_date": 1445440734, "post_id": 33263030, "comment_id": 54327428, "body": "A way of solving what problem exactly?"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 3, "creation_date": 1445440851, "post_id": 33263030, "comment_id": 54327520, "body": "Please explain, what the exact problem is you want to solve for non-java programmers."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1445440980, "post_id": 33263030, "comment_id": 54327618, "body": "It is useful to bundle additional information to an enumeration, which is simply not possible without making the calling methods very verbose. I always thought of having static information like this useful. For example, consider designing a state machine. Wouldn&#39;t it be useful to use a switch statement for each state?"}, {"owner": {"reputation": 2129, "user_id": 904515, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/af4fd7fb5b23422871011bac6112fe92?s=128&d=identicon&r=PG", "display_name": "kain64b", "link": "https://stackoverflow.com/users/904515/kain64b"}, "edited": false, "score": 0, "creation_date": 1445441121, "post_id": 33263030, "comment_id": 54327716, "body": "you are mix value types for enum.it&#39;s wrong. c++11 now support strong typed enums : <a href=\"http://www.cprogramming.com/c++11/c++11-nullptr-strongly-typed-enum-class.html\" rel=\"nofollow noreferrer\">cprogramming.com/c++11/&hellip;</a>"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1445441133, "post_id": 33263030, "comment_id": 54327722, "body": "Still don&#39;t understand what you want, but would a conversion operator solve your problem?"}, {"owner": {"reputation": 2060, "user_id": 3854322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EQMf.jpg?s=128&g=1", "display_name": "BlackDwarf", "link": "https://stackoverflow.com/users/3854322/blackdwarf"}, "edited": false, "score": 1, "creation_date": 1445441297, "post_id": 33263030, "comment_id": 54327841, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1965249/how-to-write-a-java-enum-like-class-with-multiple-data-fields-in-c\">How to write a Java-enum-like class with multiple data fields in C++?</a>"}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1445441418, "post_id": 33263030, "comment_id": 54327922, "body": "But you can&#39;t use a <code>switch</code> with a non-<code>constexpr</code> conversion operator, and since you can&#39;t have a <code>constexpr</code> as a member, when the type is the class itself, you can&#39;t use the answer of that question."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1445441423, "post_id": 33263030, "comment_id": 54327928, "body": "The problem is that <code>enum</code> types in Java are what that language calls reference types. A Java statement like <code>if (color == Color.RED)</code> thus makes a <i>pointer</i> comparison, i.e. it takes object identity and not equality into account. You cannot translate this directly to C++ enums, which are value types. You would have to use pointers to instances to emulate the Java mechanism. That&#39;s not a good idea."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1445441709, "post_id": 33263030, "comment_id": 54328150, "body": "Couldn&#39;t we just use a value comparison of the underlying type?"}], "answers": [{"tags": [], "owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "is_accepted": true, "score": 0, "last_activity_date": 1447220674, "last_edit_date": 1495540982, "creation_date": 1447220674, "answer_id": 33644901, "question_id": 33263030, "link": "https://stackoverflow.com/questions/33263030/how-can-i-bundle-additional-information-to-an-enum/33644901#33644901", "title": "How can I bundle additional information to an enum?", "body": "<p>Based on Columbo's answer here: <a href=\"https://stackoverflow.com/questions/33546997/is-a-class-definition-complete-when-it-is-passed-to-a-base-class\">Is a class definition complete when it is passed to a base class?</a>, it is possible to achieve expanded enums.</p>\n\n<pre><code>template&lt;class T&gt;\nclass Constants {\npublic:\n    static const T OK, HURT, DYING, DEAD;\n};\ntemplate &lt;typename T&gt;\nconstexpr T Constants&lt;T&gt;::OK = T(\"OK\");\ntemplate &lt;typename T&gt;\nconstexpr T Constants&lt;T&gt;::HURT = T(\"Hurt\");\ntemplate &lt;typename T&gt;\nconstexpr T Constants&lt;T&gt;::DYING = T(\"Dying\");\ntemplate &lt;typename T&gt;\nconstexpr T Constants&lt;T&gt;::DEAD = T(\"Dead\");\n\nclass Status : public Constants&lt;Status&gt; {\n    friend class Constants&lt;Status&gt;;\n    const char * name;\n    constexpr Status(const char * name):name(name) {}\npublic:\n    constexpr const char * getName() const { return name; }\n    constexpr operator int() const { return /*some sort of unique value*/; }\n};\n</code></pre>\n\n<p>While there are still some issues with this implementation, such as a lack of returning a unique value (probably have to just make the ctor take one and do it manually), it looks pretty good. Note however this won't compile on MSVC (due to lack of good <code>constexpr</code> support) or Clang (due to bug <a href=\"https://llvm.org/bugs/show_bug.cgi?id=24541\" rel=\"nofollow noreferrer\">24541</a>). But hey, it's the best we've got so far.</p>\n"}], "owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 33644901, "answer_count": 1, "score": -2, "last_activity_date": 1447220674, "creation_date": 1445440449, "last_edit_date": 1445539336, "question_id": 33263030, "link": "https://stackoverflow.com/questions/33263030/how-can-i-bundle-additional-information-to-an-enum", "title": "How can I bundle additional information to an enum?", "body": "<p>Let's say I have an enumeration of statuses for a game I'm working on. At first, I have something like this:</p>\n\n<pre><code>enum class Status {\n    OK, HURT, DYING, DEAD\n};\n</code></pre>\n\n<p>That's all fine and dandy, but now I want to print the name of the status. Naturally, if this was a normal class, I would call <code>getName()</code> on an instance of <code>Status</code>. However, no such option exists for an enumeration.</p>\n\n<p>A way to solve this problem is to have something like this:</p>\n\n<pre><code>const char * getName(Status status) {\nswitch(status) {\ncase Status::OK:\n    return \"OK\";\n    break;\n/*and so on */\n}\n</code></pre>\n\n<p>However, this is clearly not very extensible. It becomes a problem when you have a lot of enums with lots of data tied to them. You also don't really tie related data together in a very meaningful way. With uniform call syntax, you could get something close, like this:</p>\n\n<pre><code>Status::OK.getName();\n</code></pre>\n\n<p>But that's not standard yet. </p>\n\n<p>Another way to solve this problem is through <code>static const</code> members inside a class, like so:</p>\n\n<pre><code>class Status {\n    std::string name;\n    Status(std::string name):name(std::move(name)) {}\npublic:\n    const std::string &amp; getName() const { return name; }\n    static const Status OK, HURT, DYING, DEAD;\n};\n\n//in some .cpp\nconst Status Status::OK(\"OK\"), Status::HURT(\"Hurt\"), Status::DYING(\"Dying\"), Status::DEAD(\"Dead\");\n</code></pre>\n\n<p>That's all well and good, and it works out fine, for a while. But now, I want to write some code to deal with each <code>Status</code>, so instinctively I prefer a <code>switch</code> over an <code>if</code>-<code>else</code> chain.</p>\n\n<p>I write this:</p>\n\n<pre><code>Status status = getStatus();\nswitch(status) {\ncase Status::OK:\n    //do something\ndefault:\n    //do something else     \n}\n</code></pre>\n\n<p>Of course, this doesn't work. I need a converting operator! So I add that</p>\n\n<pre><code>operator int() { return /*some sort of unique value*/; }\n</code></pre>\n\n<p>And... still nothing. The reasoning is that the operator must be a <code>constexpr</code>. Which is obvious, knowing the detail of <code>switch</code>, but it doesn't really help. So the next logical step is to have the <code>static const</code>s become <code>static constexpr</code>s.</p>\n\n<pre><code>class Status {\n    const char * name; //we are in constexpr land now\n    constexpr Status(const char * name):name(name) {}\npublic:\n    constexpr const char * getName() const { return name; }\n    constexpr operator int() const { return /*some sort of unique value*/; }\n    static constexpr Status OK = Status(\"OK\"),\n        HURT = Status(\"Hurt\"),\n        DYING = Status(\"Dying\"),\n        DEAD = Status(\"Dead\");\n};\n\n//in some .cpp\nconstexpr Status Status::OK, Status::HURT, Status::DYING, Status::DEAD;\n</code></pre>\n\n<p>The reason for having to put the <code>static</code>s is because <code>constexpr</code> have to be initialized on the spot. This would work fine, and honestly it covers all my needs. The only problem is that it doesn't compile. It makes sense: how can a class whose definition is not done yet be initialized? This is not a problem with the <code>const</code>s, because they are delayed in their instantiation. </p>\n\n<p>So now, the only reasonable way to do something like that is through a another class, so that the size of <code>Status</code> is known when we create the <code>constexpr</code>s.</p>\n\n<pre><code>class Status {\n    const char * name;\n    constexpr Status(const char * name):name(name) {}\npublic:\n    constexpr const char * getName() const { return name; }\n    constexpr operator int() const { return /*some sort of unique value*/; }\n    struct constants;\n};\n\nstruct Status::constants {\n    static constexpr Status OK = Status(\"OK\"), \n        HURT = Status(\"Hurt\"),\n        DYING = Status(\"Dying\"),\n        DEAD = Status(\"Dead\");\n};\n//in some .cpp\nconstexpr Status Status::constants::OK, Status::constants::HURT, Status::constants::DYING, Status::constants::DEAD;\n</code></pre>\n\n<p>It's a distance away from the natural syntax of <code>Status::NAME</code>, instead having to say something like <code>Status::constants::NAME</code>. Another concern is the <code>operator int()</code>. There is no way (that I know of) to make this be populated in a way such as an enum would be. In a <code>static const</code> implementation, the obvious choice is to have a private <code>static int</code>, increment it in the ctor, and store it, using that as the return value of the conversion operator. However, this is no longer an option in the <code>constexpr</code> version. Maybe there's some sort of template magic to do it, and if so I'd love to see it. So my question is, are there any improvements to be done using modern C++ to the way we bundle information to an enum?</p>\n"}, {"tags": ["c++", "c", "function"], "comments": [{"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "reply_to_user": {"reputation": 1526, "user_id": 2887128, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/55ee6a68a653f3a0ebee2329667c653f?s=128&d=identicon&r=PG", "display_name": "jaredready", "link": "https://stackoverflow.com/users/2887128/jaredready"}, "edited": false, "score": 1, "creation_date": 1445440607, "post_id": 33262979, "comment_id": 54327342, "body": "@ResidentBiscuit the link you pasted is not the answer to this question"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1445440893, "post_id": 33262979, "comment_id": 54327560, "body": "Pick a language! These are not recommended declarators in C."}], "answers": [{"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 0, "last_activity_date": 1445440479, "creation_date": 1445440479, "answer_id": 33263042, "question_id": 33262979, "link": "https://stackoverflow.com/questions/33262979/how-can-i-know-which-function-or-file-and-which-line-called-a-function/33263042#33263042", "title": "How can I know which function or file and which line called a function?", "body": "<p>On Linux, you might use <a href=\"http://man7.org/linux/man-pages/man3/backtrace.3.html\" rel=\"nofollow\">backtrace</a> to dump the stack:</p>\n\n<blockquote>\n<pre><code>   backtrace() returns a backtrace for the calling program, in the array\n   pointed to by buffer.  A backtrace is the series of currently active\n   function calls for the program.  Each item in the array pointed to by\n   buffer is of type void *, and is the return address from the\n   corresponding stack frame.  The size argument specifies the maximum\n   number of addresses that can be stored in buffer.  If the backtrace\n   is larger than size, then the addresses corresponding to the size\n   most recent function calls are returned; to obtain the complete\n   backtrace, make sure that buffer and size are large enough.\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 20311, "user_id": 248756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bbe1403403cbd6ff3f67238a2025826b?s=128&d=identicon&r=PG", "display_name": "Michiel Pater", "link": "https://stackoverflow.com/users/248756/michiel-pater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1445440893, "answer_count": 1, "score": 0, "last_activity_date": 1445440479, "creation_date": 1445440295, "question_id": 33262979, "link": "https://stackoverflow.com/questions/33262979/how-can-i-know-which-function-or-file-and-which-line-called-a-function", "closed_reason": "Duplicate", "title": "How can I know which function or file and which line called a function?", "body": "<p><strong>For example</strong></p>\n\n<pre><code>void MyFunction()\n{\n    printf( \"This function is called by %s in file %s on line $i.\\n\", func, file, line ); // Where func, file and lines should be replaced\n}\n\nint main()\n{\n    MyFunction();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "stdthread"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1445446481, "post_id": 33262894, "comment_id": 54331184, "body": "I edited the error message for you.  You can always select everything you want to block quote and then press the &quot; button"}, {"owner": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1445447006, "post_id": 33262894, "comment_id": 54331497, "body": "Thanks, I&#39;ll try to remember that next time!"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1445440175, "creation_date": 1445440175, "answer_id": 33262948, "question_id": 33262894, "link": "https://stackoverflow.com/questions/33262894/array-of-threads-and-attempting-to-pass-multiple-arguments-to-function-is-not-wo/33262948#33262948", "title": "Array of threads and attempting to pass multiple arguments to function is not working?", "body": "<pre><code>myThread[i](map, rank_matrix, adjacency_matrix[i], nodeNumber, i);\n</code></pre>\n\n<p>Is attemting to call the function call operator on <code>myThread[i]</code> with the supplied parameters not calling a constructor.  <code>thread myThread[nodeNumber];</code> already constructs the threads so what you need to do is assign a thread to each element of the array</p>\n\n<pre><code>myThread[i] = thread(map, rank_matrix, adjacency_matrix[i], nodeNumber, i);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "edited": false, "score": 0, "creation_date": 1445443764, "post_id": 33263058, "comment_id": 54329534, "body": "Thanks for the response.  I tried your suggestion, but I get this error: [Error] no matching function for call to &#39;std::thread::thread(void (&amp;)(float (<i>)[2], float</i>, int, int), float [(((sizetype)(((ssizetype)nodeNumber) + -1)) + 1)][2], float [(((sizetype)(((ssizetype)nodeNumber) + -1)) + 1)], int&amp;, int&amp;)&#39;"}, {"owner": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "edited": false, "score": 0, "creation_date": 1445443839, "post_id": 33263058, "comment_id": 54329590, "body": "I included the vector library.  I&#39;m wondering if it doesn&#39;t like my map function.  Basically, the adjacency_matrix is a 2D array, but I have hacked it so that I only pass in rows and do calculations.  It works without using threads when I test it.  Now I am just trying to use threads to split work between pieces of the array (using the nodes)."}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "reply_to_user": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "edited": false, "score": 0, "creation_date": 1445444203, "post_id": 33263058, "comment_id": 54329791, "body": "Could you edit your existing post or ask another question and post an <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>. Post just enough code to allow us to fire it up and see what the problem is."}, {"owner": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "edited": false, "score": 0, "creation_date": 1445445142, "post_id": 33263058, "comment_id": 54330359, "body": "I think the issue is the variable sized array adjacency_matrix."}, {"owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "reply_to_user": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "edited": false, "score": 0, "creation_date": 1445445436, "post_id": 33263058, "comment_id": 54330565, "body": "Does your example compile for you? Because it doesn&#39;t for me."}, {"owner": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "edited": false, "score": 0, "creation_date": 1445445529, "post_id": 33263058, "comment_id": 54330620, "body": "It doesn&#39;t compile because of the errors I posted.  I know the map function works because I can use it without threading."}, {"owner": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "edited": false, "score": 0, "creation_date": 1445445692, "post_id": 33263058, "comment_id": 54330713, "body": "I&#39;m going to delete this question and tweak a few things and come back later.  Since I know the problem isn&#39;t the way I&#39;m doing the threads, I think my function arguments must have some problem.  I&#39;ll be back with a new post if I can&#39;t figure it out.  Thanks for your help!"}, {"owner": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "edited": false, "score": 0, "creation_date": 1445445759, "post_id": 33263058, "comment_id": 54330756, "body": "I gave you credit, though, because your answer in general will help other users."}], "tags": [], "owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "is_accepted": true, "score": 3, "last_activity_date": 1445440496, "creation_date": 1445440496, "answer_id": 33263058, "question_id": 33262894, "link": "https://stackoverflow.com/questions/33262894/array-of-threads-and-attempting-to-pass-multiple-arguments-to-function-is-not-wo/33263058#33263058", "title": "Array of threads and attempting to pass multiple arguments to function is not working?", "body": "<pre><code>thread myThread[nodeNumber];\n</code></pre>\n\n<p>This creates a number of default-initialized threads i.e threads that do not represent any thread of execution.</p>\n\n<pre><code>myThread[i](map, rank_matrix, adjacency_matrix[i], nodeNumber, i);\n</code></pre>\n\n<p>Does not initialize your threads.</p>\n\n<p>I would suggest using a vector of threads like in this <a href=\"http://www.cplusplus.com/reference/thread/thread/thread/\" rel=\"nofollow\">example</a></p>\n\n<pre><code>std::vector&lt;std::thread&gt; threads;\n</code></pre>\n\n<p>This does not create any actual threads. Just the container to hold them.</p>\n\n<p>Then you can populate it like so:</p>\n\n<pre><code>for(int i = 0; i &lt; nodeNumber; i++)  {\n    threads.push_back(std::thread(map, rank_matrix, adjacency_matrix[i], nodeNumber, i);\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2925352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1863e8f1400effb1f11e2d0ce0c47c02?s=128&d=identicon&r=PG&f=1", "display_name": "RecursionIsSexy", "link": "https://stackoverflow.com/users/2925352/recursionissexy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1663, "favorite_count": 0, "accepted_answer_id": 33263058, "answer_count": 2, "score": 0, "last_activity_date": 1445446434, "creation_date": 1445440041, "last_edit_date": 1445446434, "question_id": 33262894, "link": "https://stackoverflow.com/questions/33262894/array-of-threads-and-attempting-to-pass-multiple-arguments-to-function-is-not-wo", "title": "Array of threads and attempting to pass multiple arguments to function is not working?", "body": "<p>I am creating a program with a dynamic number of threads. I have a vector for the threads (thanks, Mohamad); then I attempt to call a function and pass multiple arguments for the thread of execution.</p>\n\n<p>However, my current code gives an error which I assume is due to my odd usage of the 2D array:</p>\n\n<blockquote>\n  <p>In function 'int main()': 102 77  [Error] no matching function for call\n  to 'std::thread::thread(void (&amp;)(float (<em>)[2], float</em>, int, int),\n  float [(((sizetype)(((ssizetype)nodeNumber) + -1)) + 1)][2], float\n  [(((sizetype)(((ssizetype)nodeNumber) + -1)) + 1)], int&amp;, int&amp;)'</p>\n  \n  <p>102   77      [Note] candidates are: 4    0       </p>\n  \n  <p>133   7   c:\\program files\n  (x86)\\dev-cpp\\mingw64\\lib\\gcc\\x86_64-w64-mingw32\\4.8.1\\include\\c++\\thread [Note]\n  template\n  std::thread::thread(_Callable&amp;&amp;, _Args&amp;&amp; ...)</p>\n  \n  <p>133   7   c:\\program files\n  (x86)\\dev-cpp\\mingw64\\lib\\gcc\\x86_64-w64-mingw32\\4.8.1\\include\\c++\\thread [Note]\n  template argument deduction/substitution failed:</p>\n  \n  <p>102   77      [Note] variable-sized array type 'float\n  (&amp;)[(((sizetype)(((ssizetype)nodeNumber) + -1)) + 1)][2]' is not a\n  valid template argument</p>\n  \n  <p>4 0   In file included from </p>\n  \n  <p>128   5   c:\\program files\n  (x86)\\dev-cpp\\mingw64\\lib\\gcc\\x86_64-w64-mingw32\\4.8.1\\include\\c++\\thread [Note]\n  std::thread::thread(std::thread&amp;&amp;)</p>\n  \n  <p>128   5   c:\\program files\n  (x86)\\dev-cpp\\mingw64\\lib\\gcc\\x86_64-w64-mingw32\\4.8.1\\include\\c++\\thread [Note]\n  candidate expects 1 argument, 5 provided</p>\n  \n  <p>122   5   c:\\program files\n  (x86)\\dev-cpp\\mingw64\\lib\\gcc\\x86_64-w64-mingw32\\4.8.1\\include\\c++\\thread [Note]\n  std::thread::thread() 122 5   c:\\program files\n  (x86)\\dev-cpp\\mingw64\\lib\\gcc\\x86_64-w64-mingw32\\4.8.1\\include\\c++\\thread [Note]\n  candidate expects 0 arguments, 5 provided</p>\n</blockquote>\n\n<p>Here are some of the chunks of code where I am attempting this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\n\nvoid map(float rank_matrix[][2], float adjacency_matrix[], int nodeNumber, int node);\n\nint main()  {\n    // setup code, initialization section here\n\n        float adjacency_matrix[nodeNumber][nodeNumber];\n        float rank_matrix[nodeNumber][2];\n\n    while(iter &lt; terminate)  {\n\n        vector&lt;thread&gt; threads;\n\n        for(int i = 0; i &lt; nodeNumber; i++)  {\n            threads.push_back(std::thread(map, rank_matrix, adjacency_matrix[i], nodeNumber, i);\n        }\n\n        for(int i = 0; i &lt; nodeNumber; i++)  {\n            threads.join();\n        }\n\n        // Flush out the mass for each node (will be updated based on mapper's work.\n        for(i = 0; i &lt; nodeNumber; i++)  {\n            rank_matrix[i][0] = 0;\n        }\n\n        iter++;\n        cout &lt;&lt; endl;\n        cout &lt;&lt; endl;\n    }\n\n    return 0;\n}\n\n\n// Mapper code for each individual node and computation.\nvoid map(float rank_matrix[][2], float adjacency_matrix[], int nodeNumber,    int node)  {\n    for(int i = 0; i &lt; nodeNumber; i++)  {\n        if(rank_matrix[node][1] != 0 &amp;&amp; adjacency_matrix[i] &gt; 0)\n            adjacency_matrix[i] = (rank_matrix[node][0] / rank_matrix[node][1]); \n    }\n}\n</code></pre>\n\n<p>Any suggestions on what I'm doing wrong?  Help would be much appreciated!  Thanks!</p>\n"}]