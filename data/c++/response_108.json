[{"tags": ["c++"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1485993262, "post_id": 41992019, "comment_id": 71161025, "body": "<code>cin &gt;&gt; a</code> will only read one word. How can it be equal to <code>&quot;who are you&quot;</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1485993263, "post_id": 41992019, "comment_id": 71161026, "body": "Read the string using std::getline()"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1485993319, "post_id": 41992019, "comment_id": 71161053, "body": "If you tried printing <code>a</code> you would have seen the problem immediately."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1485994290, "creation_date": 1485994290, "answer_id": 41992196, "question_id": 41992019, "link": "https://stackoverflow.com/questions/41992019/i-keep-running-into-problems-with-if-elif-and-else-in-c/41992196#41992196", "title": "i keep running into problems with if elif and else in c++", "body": "<p>The operator >> for streams and strings inputs words separated by white spaces. You should use a function that can read at once several words up to the Enter key will be pressed. For example you can use standard function <code>std::getline</code></p>\n\n<p>Also you need to include header <code>&lt;string&gt;</code>.</p>\n\n<p>Here you are</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main() \n{\n    std::string s;\n\n    if ( std::getline( std::cin, s ) )\n    {\n        // check the boolean condition\n        if ( s == \"hello\" ) \n        {\n            // if condition is true then print the following\n            std::cout &lt;&lt; \"hi\" &lt;&lt; std::endl;\n        } \n        else if ( s == \"who are you\" ) \n        {\n            // if else if condition is true\n            std::cout &lt;&lt; \"a better question is who are you?\" &lt;&lt; std::endl;\n        } \n        else if ( s == \"what am i doing\" ) \n        {\n            // if else if condition is true\n            std::cout &lt;&lt; \"reading this output  \" &lt;&lt; std::endl;\n        }\n        else \n        {\n            // if none of the conditions is true\n            std::cout &lt;&lt; \"Error Value of a is not matching\" &lt;&lt; std::endl;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7495545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SdqEs0_WSSg/AAAAAAAAAAI/AAAAAAAAAm8/qfjj5dOLod0/photo.jpg?sz=128", "display_name": "Ben Caunt", "link": "https://stackoverflow.com/users/7495545/ben-caunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 41992196, "answer_count": 1, "score": -4, "last_activity_date": 1485994586, "creation_date": 1485993103, "last_edit_date": 1485993715, "question_id": 41992019, "link": "https://stackoverflow.com/questions/41992019/i-keep-running-into-problems-with-if-elif-and-else-in-c", "title": "i keep running into problems with if elif and else in c++", "body": "<p>question: every time I run the program and I input who are you it says Error Value of a is not matching what is going on? (yes I am a noob to c++)\ncode: </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main () {\n\n   // local variable declaration:\n   string a;\n   cin &gt;&gt; a;\n   // check the boolean condition\n   if( a == \"hello\" ) {\n      // if condition is true then print the following\n      cout &lt;&lt; \"hi\" &lt;&lt; endl;\n   } else if( a == \"who are you\" ) {\n      // if else if condition is true\n      cout &lt;&lt; \"a better question is who are you?\" &lt;&lt; endl;\n   } else if( a == \"what am i doing\" ) {\n      // if else if condition is true\n      cout &lt;&lt; \"reading this output  \" &lt;&lt; endl;\n   }else {\n      // if none of the conditions is true\n      cout &lt;&lt; \"Error Value of a is not matching\" &lt;&lt; endl;\n   }\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "boost"], "answers": [{"tags": [], "owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "is_accepted": false, "score": 0, "last_activity_date": 1486021995, "last_edit_date": 1495535367, "creation_date": 1486021995, "answer_id": 41996815, "question_id": 41991982, "link": "https://stackoverflow.com/questions/41991982/how-to-run-a-boost-unit-test-in-qt-creator/41996815#41996815", "title": "How to run a Boost Unit Test in QT Creator?", "body": "<p>Unit tests are usually run in a <em>separate</em> executable to your application.  </p>\n\n<p>To run the <code>boost</code> unit test library the test executable must link to <code>boost_test_exec_monitor</code>.  </p>\n\n<p>Note: the precise name of a <code>boost</code> library depends on your operating system, compiler, multi-threading and debug modes. See: <a href=\"https://stackoverflow.com/questions/2715164/how-can-i-decode-the-boost-library-naming\">how can I decode boost library naming</a>.<br>\nBoost library naming is usually simpler on <code>linux</code>. However, if you define the relevant environment variables then the following <code>qmake</code> lines will link on Windows with <code>MinGW</code> in multithreaded dubug mode:</p>\n\n<pre><code>BOOST_LIB_SUFFIX = $${MINGW_VERSION}-mt-gd$${BOOST_VERSION}\n\nINCLUDEPATH += $$BOOST_ROOT\nLIBS += -L$${BOOST_ROOT}/stage/lib\nLIBS += libboost_test_exec_monitor$${BOOST_LIB_SUFFIX}\n</code></pre>\n\n<p>You could put all of your unit tests in a single file, but it's better to put the following in a file called <code>test_main.cpp</code> (for example) and add it to the source files in your <code>qmake</code> file.  </p>\n\n<pre><code>#define BOOST_TEST_MODULE Main\n#include &lt;boost/test/unit_test.hpp&gt;\n</code></pre>\n\n<p>Separate unit test files can then be written and added to the unit test <code>qmake</code> file, e.g.:</p>\n\n<pre><code>#include \"Hero.hpp\"\n#include &lt;boost/test/unit_test.hpp&gt;\n\nBOOST_AUTO_TEST_SUITE(MyTests)\n\nBOOST_AUTO_TEST_CASE( my_test ){\n       Hero TestHero (\"Hika\",100,100,100,100,100,100,100,0,100);         \n       BOOST_CHECK_EQUAL (100, TestHero.getHP()); }\n\nBOOST_AUTO_TEST_SUITE_END()\n</code></pre>\n\n<p>Your unit test <code>qmake</code> file should then include the test files together with the relevant source files from your application, e.g.:</p>\n\n<pre><code>SOURCES += tests/test_main.cpp \\\n   tests/my_test.cpp \\\n   src/Hero.cpp\n</code></pre>\n\n<p>Look in the <code>tests</code> directory at: <a href=\"https://github.com/kenba/via-httplib\" rel=\"nofollow noreferrer\">via-httplib</a> for a complete example.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6247452"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1323, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486021995, "creation_date": 1485992864, "question_id": 41991982, "link": "https://stackoverflow.com/questions/41991982/how-to-run-a-boost-unit-test-in-qt-creator", "title": "How to run a Boost Unit Test in QT Creator?", "body": "<p>It is a pretty basic question but I run out of ideas. I have my example test for my class:</p>\n\n<pre><code>#define BOOST_TEST_MODULE MyTest\n#include &lt;boost/test/unit_test.hpp&gt;\nBOOST_AUTO_TEST_CASE( my_test ){\n       Hero TestHero (\"Hika\",100,100,100,100,100,100,100,0,100);         \n       BOOST_CHECK ( TestHero.getHP() == 100 ); }\n</code></pre>\n\n<p>And these are stored in my tests.cpp file. My question is: how do I run only tests instead of whole app?</p>\n"}, {"tags": ["c++", "for-loop", "duplicates"], "answers": [{"comments": [{"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 1, "creation_date": 1485993168, "post_id": 41992009, "comment_id": 71160996, "body": "You also look like you need to change the index from <code>i</code> to <code>j</code>."}], "tags": [], "owner": {"reputation": 883, "user_id": 1330434, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb3a229bb021331eac027f657549e7c5?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth", "link": "https://stackoverflow.com/users/1330434/srikanth"}, "is_accepted": true, "score": 1, "last_activity_date": 1485993550, "last_edit_date": 1485993550, "creation_date": 1485993047, "answer_id": 41992009, "question_id": 41991973, "link": "https://stackoverflow.com/questions/41991973/c-comparing-value-from-2-different-list-to-get-rid-of-duplicate-number-using-2/41992009#41992009", "title": "C++ Comparing value from 2 different list to get rid of duplicate number using 2 for loop. Doesn&#39;t detect duplicate correctly", "body": "<p>It looks like you have your <code>=</code> and <code>==</code> mixed up. </p>\n\n<pre><code>        if (foundBag.items[j] == cur)  // Use == here for comparison\n        {\n            found = true; // Use = here for assignment\n        }\n</code></pre>\n\n<p>By the way, if all you're doing is looking for an element in a collection, prefer an algorithm from the standard library:</p>\n\n<pre><code>auto result = std::count(std::begin(foundBag.items), std::end(foundBag.items), cur);\nif (result == std::end(foundBag.items)) {\n    // Not found; Add it\n    foundBag.add(cur);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6861807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RJq8q.jpg?s=128&g=1", "display_name": "Celosia", "link": "https://stackoverflow.com/users/6861807/celosia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 41992009, "answer_count": 1, "score": 0, "last_activity_date": 1485993550, "creation_date": 1485992826, "question_id": 41991973, "link": "https://stackoverflow.com/questions/41991973/c-comparing-value-from-2-different-list-to-get-rid-of-duplicate-number-using-2", "title": "C++ Comparing value from 2 different list to get rid of duplicate number using 2 for loop. Doesn&#39;t detect duplicate correctly", "body": "<pre><code>ArrayBag foundBag;\n    int z;\n    z = getCurrentSize(); // tell you have many items exit in the bag\n    for (int i = 0; i &lt; z; i++ )\n    {\n        int cur = items[i]; //cur is use to hold each number in the vector and items is the first list of number.  \n        bool found = false; // start as false so it doesnt trigger the true right away \n        for (int j = 0; j &lt; foundBag.getCurrentSize(); j++) // this loop check the number currently inside cur agianst everything in the foundbag at the moment \n        {\n            if (foundBag.items[i] = cur)  \n\n            {\n                found == true;   // &lt;&lt; it didnt detect that it have found the number. I think the problem is here \n            }\n        }\n        if (found == true)\n        {\n            // do nothing if found since number is already in the foundbag\n        }\n        else if (found != true)\n        {\n            foundBag.add(cur); // if number is not found in the foundBag add it to the found bag.\n        } \n    }\n</code></pre>\n\n<p>So what I m trying to do is comparing value from an existing list to a new empty one that is called foundBag in this case. So basically it suppose to get value from the first bag and then check if that number exit in the first bag or not then it will add that number to the foundBag if it did not find it. If it already found the number it will do nothing and move to the next element in the first bag. </p>\n\n<p>say the first bag have number 3 4 5 7 5 8 it should add everything from 3 4 5 7 then do nothing when it get to the second 5 then add 8 to the foundBag. \nat the end foundBag should contain: 3 4 5 7 8  </p>\n\n<p>The problem is it doesnt seem to correctly detect that the number is already in the foundBag so it add everything.\nI been using the step-over function in visual studio to look at each step but I couldnt figure out why the bool still go to false when it found the identical number. </p>\n\n<p><em>Im not very strong in english so if this doesnt make sense please ask for more explanation</em> </p>\n\n<p>Thank you </p>\n"}, {"tags": ["c++", "rounding-error"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1485992952, "post_id": 41991935, "comment_id": 71160921, "body": "<i>Answer is rounding when it shouldn&#39;t C++</i> -- No, floating point math doesn&#39;t work that way.  <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">See this</a>"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1485992990, "post_id": 41991935, "comment_id": 71160933, "body": "For starters, store all your data as doubles instead of floats"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1485993112, "post_id": 41991935, "comment_id": 71160973, "body": "Also, there is no need to double space between lines of code.  It just makes the code harder to read."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 2, "creation_date": 1485993820, "post_id": 41991935, "comment_id": 71161225, "body": "Setting precision to 10 I get this: Sales: $25068.7656250000. Following @RyanP &#39;s advice I get Sales: $25068.7641509434, so yes. The lower precision of <code>float</code> is getting you. But instead of using <code>double</code>s, consider doing the math in pennies and sticking to integers. Fewer surprises, especially if you have to perform comparisons."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1485996318, "post_id": 41991935, "comment_id": 71161952, "body": "I find that there is suffient whitespace between the lines, a good amount but not too much @PaulMcKenzie. It divides out the program into neat parts, making it easier to read."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1486007945, "post_id": 41991935, "comment_id": 71164869, "body": "@ABusyProgrammer -- Putting spaces between each and every line does not make the program easier to read to most programmers.  First, we&#39;re scrolling up and down for no reason, second, there is no clarity between logical parts of the program, i.e. <code>for</code> loop blocks.  Double space where it makes sense, not willy-nilly and every single line."}], "answers": [{"tags": [], "owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "is_accepted": true, "score": 1, "last_activity_date": 1485995360, "creation_date": 1485995360, "answer_id": 41992344, "question_id": 41991935, "link": "https://stackoverflow.com/questions/41991935/answer-is-rounding-when-it-shouldnt-c/41992344#41992344", "title": "Answer is rounding when it shouldn&#39;t C++", "body": "<p>To be honest, the problem you are having here is that you are using the type <code>float</code>, and not <code>double</code>. This, in effect, causes your decimal values to be less precise. </p>\n\n<p>If I set the precision to 3 without changing the data type, then I get the number: 25068.765. However, if I change the data type to <code>double</code> and keep the precision at 3, then I get the number 25068.764.</p>\n\n<p>Now given the 2 floating-point values, we would expect the preecision of the one stored in the variable of type <code>double</code> to be the correct number.</p>\n\n<p>Therefore, you should set the data type of your variables to <code>double</code>, and <strong>NOT</strong> <code>float</code>. This should fix the problem at hand.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 319, "user_id": 2503822, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/az4eb.jpg?s=128&g=1", "display_name": "uNiverselEgacy", "link": "https://stackoverflow.com/users/2503822/universelegacy"}, "is_accepted": false, "score": 1, "last_activity_date": 1486022290, "creation_date": 1486022290, "answer_id": 41996901, "question_id": 41991935, "link": "https://stackoverflow.com/questions/41991935/answer-is-rounding-when-it-shouldnt-c/41996901#41996901", "title": "Answer is rounding when it shouldn&#39;t C++", "body": "<p>It's probably rarely a good idea to use floating point numbers for high precision arithmetic, and 32-bit <code>float</code> is especially bad. It has a precision of only 24 bits, which roughly means 6 to 7 decimal digits. Also if you perform certain arithmetic operations (division for example) on floating point numbers, the result is  going to be even less precise.</p>\n\n<p>So if you want to keep things simple, use <code>double</code>. It offers a precision of about 53 bits, which can represent roughly 16 to 17 decimal digits.</p>\n\n<p>Or slightly better use integer types like <code>long long</code> and treat it as cents. Integer arithmetic is far more precise and predictable.</p>\n\n<p>Lastly you can always use a high precision library, though I think <code>double</code> or <code>long long</code> will be good enough for you.</p>\n"}], "owner": {"reputation": 23, "user_id": 7503141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4474ed115c14f58bcb528c8208b5a2?s=128&d=identicon&r=PG&f=1", "display_name": "user7503141", "link": "https://stackoverflow.com/users/7503141/user7503141"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "closed_date": 1486053797, "accepted_answer_id": 41992344, "answer_count": 2, "score": 0, "last_activity_date": 1486022290, "creation_date": 1485992655, "last_edit_date": 1485994532, "question_id": 41991935, "link": "https://stackoverflow.com/questions/41991935/answer-is-rounding-when-it-shouldnt-c", "closed_reason": "Not suitable for this site", "title": "Answer is rounding when it shouldn&#39;t C++", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n//Declaration of Variables\n    float TotalCollected; // Total Amount Collected from sales\n    double sales; // Sale excluding tax\n    float CountyTaxRate; // Tax rate for County\n    float StatesTaxRate; // Tax rate for state\n\n    cout &lt;&lt; setprecision(2) &lt;&lt; fixed &lt;&lt; showpoint;\n\n//We get data from the user\n    cout &lt;&lt; \"What is the Total Collected Amount? \";\n    cin &gt;&gt; TotalCollected;\n    cout &lt;&lt; \"What is the County Tax rate? \"; \n    cin &gt;&gt; CountyTaxRate;\n    cout &lt;&lt; \"What is the State Tax rate \";\n    cin &gt;&gt; StatesTaxRate;\n\n//Calculations\n    sales = TotalCollected / (1 + StatesTaxRate + CountyTaxRate); \n\n//Output    \n    cout &lt;&lt; \"Sales: $\" &lt;&lt; sales &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>County tax rate= .02 state tax rate=.04<br>\ntotal collected amount= 26572.89</p>\n\n<p>The output should be 25068.76 but I keep getting 25068.77.</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1485991768, "post_id": 41991715, "comment_id": 71160558, "body": "You have declared a function taking one parameter of pointer to function type my friend. Why do you think you can apply the dot operator to a function?"}, {"owner": {"reputation": 13, "user_id": 6376990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9045749b37dd03ae296522944c63f16?s=128&d=identicon&r=PG&f=1", "display_name": "lkese3ker", "link": "https://stackoverflow.com/users/6376990/lkese3ker"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1486032948, "post_id": 41991715, "comment_id": 71177080, "body": "@AnArrayOfFunctions I thought I was simply declaring an object lol. C++ is weird."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6376990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9045749b37dd03ae296522944c63f16?s=128&d=identicon&r=PG&f=1", "display_name": "lkese3ker", "link": "https://stackoverflow.com/users/6376990/lkese3ker"}, "edited": false, "score": 0, "creation_date": 1486033270, "post_id": 41991741, "comment_id": 71177274, "body": "Alright, thank you!"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 0, "last_activity_date": 1485991527, "creation_date": 1485991527, "answer_id": 41991741, "question_id": 41991715, "link": "https://stackoverflow.com/questions/41991715/request-for-member-in-which-is-of-non-class-type/41991741#41991741", "title": "Request for member [...] in [...], which is of non-class type [...]", "body": "<p>This is an instance of <a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\"><strong>the most vexing parse</strong></a>.</p>\n\n<p>You can fix it by using <em>list-initialization</em>, which is unambiguous in this context:</p>\n\n<pre><code>EscritorProlog test(Planning{});\n</code></pre>\n\n<p>Unfortunately you have ambiguous <code>EscritorProlog</code> construction from <code>Planning</code>:</p>\n\n<pre><code>EscritorProlog(Planning planning); // (1)\nEscritorProlog(Planning &amp;&amp;planning); // (2)\n</code></pre>\n\n<p>Assuming that you wanted to define a <em>copy-constructor</em> for <code>(1)</code>, change the signature to</p>\n\n<pre><code>EscritorProlog(const Planning&amp; planning);\n</code></pre>\n\n<p>in order to avoid ambiguity. With these changes, your code will compile.</p>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/dDJA448yRyKZSM3B\" rel=\"nofollow noreferrer\"><strong>wandbox example</strong></a></p>\n"}], "owner": {"reputation": 13, "user_id": 6376990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9045749b37dd03ae296522944c63f16?s=128&d=identicon&r=PG&f=1", "display_name": "lkese3ker", "link": "https://stackoverflow.com/users/6376990/lkese3ker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1659, "favorite_count": 0, "closed_date": 1485991597, "accepted_answer_id": 41991741, "answer_count": 1, "score": 0, "last_activity_date": 1485991527, "creation_date": 1485991416, "question_id": 41991715, "link": "https://stackoverflow.com/questions/41991715/request-for-member-in-which-is-of-non-class-type", "closed_reason": "Duplicate", "title": "Request for member [...] in [...], which is of non-class type [...]", "body": "<p>I've searched in the internet for solutions to this compiling error. Most of them seem to have to do with two options:</p>\n\n<ul>\n<li>Treating a pointer as an object and not dereferencing it.</li>\n<li>Mistaking a variable with a function returning the variable type and trying to access it.</li>\n</ul>\n\n<p>My code is:</p>\n\n<pre><code>#ifndef ESCRITOR_PROLOG_HH\n#define ESCRITOR_PROLOG_HH\n\n#include \"planning.hh\"\n#include &lt;string&gt;\n#include &lt;ostream&gt;\n\nclass EscritorProlog {\nprivate:\n  Planning planningAEscriure;\npublic:\n  EscritorProlog(Planning planning);\n  EscritorProlog(Planning &amp;&amp;planning);\n  void escriuFitxerProlog(std::ostream &amp;escritor);\n};\n\n#endif\n</code></pre>\n\n<p>And the main.cc:</p>\n\n<pre><code>#ifndef MAIN_CC\n#define MAIN_CC\n\n#include \"escritorProlog.hh\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main () {\n  std::ofstream escritor(\"./test.txt\");\n  EscritorProlog test(Planning());\n  test.escriuFitxerProlog(escritor);\n}\n#endif\n</code></pre>\n\n<p>If you try to compile it with</p>\n\n<pre><code>g++ -c main.cc -std=c++11\n</code></pre>\n\n<p>You'll just get the error...</p>\n\n<pre><code>main.cc: In function \u2018int main()\u2019:\nmain.cc:11:8: error: request for member \u2018escriuFitxerProlog\u2019 in \u2018test\u2019, which is of non-class type \u2018EscritorProlog(Planning (*)())\u2019\n   test.escriuFitxerProlog(escritor); \n</code></pre>\n\n<p>Now I don't know if I'm missing something but I can't see any of the two issues mentioned before in my code. I'm sorry if I'm blatantly blind or anything but I just don't see the error.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "dlib"], "comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1485994141, "post_id": 41991651, "comment_id": 71161327, "body": "Sorry, I don&#39;t believe this is possible. I glanced through the dlib source and the data pointer is private. Doesn&#39;t seem like there is any way to set it or retrieve it directly."}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1485994180, "post_id": 41991651, "comment_id": 71161346, "body": "I would recommend digging in the source yourself, or contacting the developer of dlib, Davis King."}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 3, "creation_date": 1485996461, "post_id": 41991651, "comment_id": 71161996, "body": "Dlib easily supports this.  If you want to do this you need to define the appropriate generic image interface for whatever image object you want to use. See: <a href=\"http://dlib.net/dlib/image_processing/generic_image.h.html\" rel=\"nofollow noreferrer\">dlib.net/dlib/image_processing/generic_image.h.html</a>"}, {"owner": {"reputation": 127, "user_id": 2287494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/TgDfA.jpg?s=128&g=1", "display_name": "EdtheC", "link": "https://stackoverflow.com/users/2287494/edthec"}, "reply_to_user": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 0, "creation_date": 1486043456, "post_id": 41991651, "comment_id": 71183922, "body": "@Davis -Thanks, I get the idea, but the details are beyond my C++ skills. Not even sure how to get started with a template. Where would I place such a structure? I can fill in the bits to return the appropriate values (eg num row, the pointer etc.) The data is one of the standard pixel traits (either rgb, rgba etc). Any help in with this appreciated."}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 1, "creation_date": 1486045334, "post_id": 41991651, "comment_id": 71185244, "body": "It doesn&#39;t even need to be a template.  In any case, you need to learn C++ before you can use C++.  This thing we are talking about is one of the most basic C++ programming tasks you could imagine.  So if you can&#39;t do this then you need to get a C++ book and learn C++, like one of these: <a href=\"http://dlib.net/books.html\" rel=\"nofollow noreferrer\">dlib.net/books.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 3, "creation_date": 1486090603, "post_id": 42014036, "comment_id": 71207021, "body": "This is not at all a reasonable way to do this. All you need to do is define the generic image global functions for your image class, CpwImage. Don&#39;t make a new class, especially one that is a copy paste of another whose implementation you don&#39;t understand."}], "tags": [], "owner": {"reputation": 127, "user_id": 2287494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/TgDfA.jpg?s=128&g=1", "display_name": "EdtheC", "link": "https://stackoverflow.com/users/2287494/edthec"}, "is_accepted": false, "score": 1, "last_activity_date": 1486076971, "creation_date": 1486076971, "answer_id": 42014036, "question_id": 41991651, "link": "https://stackoverflow.com/questions/41991651/how-to-assign-memory-images-to-a-dlib-array2d-or-image/42014036#42014036", "title": "How to assign memory images to a DLIB array2d or image?", "body": "<p>I found the answer by spending a lot more time with DLIB. Has nothing to do with C++. I rarely use templates so it was overwhelming at first.</p>\n\n<p>What one needs to do is create some headers that follow the generic image model, as suggested. I chose to use array2d as the guide. By creating similar headers, along with adding a function to map to the image I have in memory, I was able to use the image data without duplicating it.</p>\n\n<p>BTW the one gotcha, be careful about width_step (number of bytes per line). I had to set that since many images I had were padded. See code below.</p>\n\n<p>To save someone a lot of time, here's what I did, naming the new structure arrayEd. Just used arrayEd instead of array3d.</p>\n\n<p>If anyone has any comments on this code, it's welcomed :-)</p>\n\n<p>arrayEd.h:</p>\n\n<pre><code>#pragma once\n#include \"arrayEd_kernel.h\"\n#include \"serialize_pixel_overloads_arrayEd.h\"\n#include \"arrayEd_generic_image.h\"\n</code></pre>\n\n<p>For serialize_pixel_overloads_arrayEd.h, just replaced array3d with arrayEd.</p>\n\n<p>arrayEd_kernel.h: (the bulk of changes). Added function setup and passed it my memory image class, along with a couple of variables to keep track of things.</p>\n\n<pre><code>#pragma once\n// Copyright (C) 2006  Davis E. King (davis@dlib.net)\n// License: Boost Software License   See LICENSE.txt for the full license.\n\n#include \"C:\\VStudioProjects\\dlib-master\\dlib/algs.h\"\n#include \"C:\\VStudioProjects\\dlib-master\\dlib/interfaces/enumerable.h\"\n#include \"C:\\VStudioProjects\\dlib-master\\dlib/serialize.h\"\n#include \"C:\\VStudioProjects\\dlib-master\\dlib/geometry/rectangle.h\"\n\nnamespace dlib\n{\ntemplate &lt;\n    typename T,\n    typename mem_manager = default_memory_manager\n&gt;\n    class arrayEd : public enumerable&lt;T&gt;\n{\n\n    /*!\n    INITIAL VALUE\n    - nc_ == 0\n    - nr_ == 0\n    - data == 0\n    - at_start_ == true\n    - cur == 0\n    - last == 0\n\n    CONVENTION\n    - nc_ == nc()\n    - nr_ == nc()\n    - if (data != 0) then\n    - last == a pointer to the last element in the data array\n    - data == pointer to an array of nc_*nr_ T objects\n    - else\n    - nc_ == 0\n    - nr_ == 0\n    - data == 0\n    - last == 0\n\n\n    - nr_ * nc_ == size()\n    - if (cur == 0) then\n    - current_element_valid() == false\n    - else\n    - current_element_valid() == true\n    - *cur == element()\n\n    - at_start_ == at_start()\n    !*/\n\n\n    class row_helper;\npublic:\n\n    // These typedefs are here for backwards compatibility with older versions of dlib.\n    typedef arrayEd kernel_1a;\n    typedef arrayEd kernel_1a_c;\n\n    typedef T type;\n    typedef mem_manager mem_manager_type;\n\n    // -----------------------------------\n    bool bIsAllocatedHere;  //ec this is used to tell whether or not the memory came from here - if so, we clean it up.\n    long lWidthStep;   // number of bytes in a row. This comes from leadtools and is set when we setup the image in setup()\n\n    class row\n    {\n        /*!\n        CONVENTION\n        - nc_ == nc()\n        - for all x &lt; nc_:\n        - (*this)[x] == data[x]\n        !*/\n\n        friend class arrayEd&lt;T, mem_manager&gt;;\n        friend class row_helper;\n\n    public:\n        long nc(\n        ) const {\n            return nc_;\n        }\n\n        const T&amp; operator[] (\n            long column\n            ) const\n        {\n            // make sure requires clause is not broken\n            DLIB_ASSERT(column &lt; nc() &amp;&amp; column &gt;= 0,\n                \"\\tconst T&amp; arrayEd::operator[](long column) const\"\n                &lt;&lt; \"\\n\\tThe column index given must be less than the number of columns.\"\n                &lt;&lt; \"\\n\\tthis:    \" &lt;&lt; this\n                &lt;&lt; \"\\n\\tcolumn:  \" &lt;&lt; column\n                &lt;&lt; \"\\n\\tnc(): \" &lt;&lt; nc()\n            );\n\n            return data[column];\n        }\n\n        T&amp; operator[] (\n            long column\n            )\n        {\n            // make sure requires clause is not broken\n            DLIB_ASSERT(column &lt; nc() &amp;&amp; column &gt;= 0,\n                \"\\tT&amp; arrayEd::operator[](long column)\"\n                &lt;&lt; \"\\n\\tThe column index given must be less than the number of columns.\"\n                &lt;&lt; \"\\n\\tthis:    \" &lt;&lt; this\n                &lt;&lt; \"\\n\\tcolumn:  \" &lt;&lt; column\n                &lt;&lt; \"\\n\\tnc(): \" &lt;&lt; nc()\n            );\n\n            return data[column];\n        }\n\n    private:\n\n        row(T* data_, long cols) : data(data_), nc_(cols) {}\n\n        T* data;\n        long nc_;\n\n\n        // restricted functions\n        row() {}\n        row&amp; operator=(row&amp;);\n    };\n\n    // -----------------------------------\n\n    arrayEd(\n    ) :\n        data(0),\n        nc_(0),\n        nr_(0),\n        cur(0),\n        last(0),\n        at_start_(true),\n        bIsAllocatedHere(false),\n        lWidthStep(0)\n    {\n    }\n\n    arrayEd(\n        long rows,\n        long cols\n    ) :\n        data(0),\n        nc_(0),\n        nr_(0),\n        cur(0),\n        last(0),\n        at_start_(true),\n        bIsAllocatedHere(false),\n        lWidthStep(0)\n    {\n        // make sure requires clause is not broken\n        DLIB_ASSERT((cols &gt;= 0 &amp;&amp; rows &gt;= 0),\n            \"\\t arrayEd::arrayEd(long rows, long cols)\"\n            &lt;&lt; \"\\n\\t The arrayEd can't have negative rows or columns.\"\n            &lt;&lt; \"\\n\\t this: \" &lt;&lt; this\n            &lt;&lt; \"\\n\\t cols: \" &lt;&lt; cols\n            &lt;&lt; \"\\n\\t rows: \" &lt;&lt; rows\n        );\n\n        set_size(rows, cols);\n    }\n\n#ifdef DLIB_HAS_RVALUE_REFERENCES\n    arrayEd(arrayEd&amp;&amp; item) : arrayEd()\n    {\n        swap(item);\n    }\n\n    arrayEd&amp; operator= (\n        arrayEd&amp;&amp; rhs\n        )\n    {\n        swap(rhs);\n        return *this;\n    }\n#endif\n\n    virtual ~arrayEd(\n    ) {\n        clear();\n    }\n\n    long nc(\n    ) const {\n        return nc_;\n    }\n\n    long nr(\n    ) const {\n        return nr_;\n    }\n\n    row operator[] (\n        long row_\n        )\n    {\n        // make sure requires clause is not broken\n        DLIB_ASSERT(row_ &lt; nr() &amp;&amp; row_ &gt;= 0,\n            \"\\trow arrayEd::operator[](long row_)\"\n            &lt;&lt; \"\\n\\tThe row index given must be less than the number of rows.\"\n            &lt;&lt; \"\\n\\tthis:     \" &lt;&lt; this\n            &lt;&lt; \"\\n\\trow_:      \" &lt;&lt; row_\n            &lt;&lt; \"\\n\\tnr(): \" &lt;&lt; nr()\n        );\n\n        return row(data + row_*nc_, nc_);\n    }\n\n    const row operator[] (\n        long row_\n        ) const\n    {\n        // make sure requires clause is not broken\n        DLIB_ASSERT(row_ &lt; nr() &amp;&amp; row_ &gt;= 0,\n            \"\\tconst row arrayEd::operator[](long row_) const\"\n            &lt;&lt; \"\\n\\tThe row index given must be less than the number of rows.\"\n            &lt;&lt; \"\\n\\tthis:     \" &lt;&lt; this\n            &lt;&lt; \"\\n\\trow_:      \" &lt;&lt; row_\n            &lt;&lt; \"\\n\\tnr(): \" &lt;&lt; nr()\n        );\n\n        return row(data + row_*nc_, nc_);\n    }\n\n    void swap(\n        arrayEd&amp; item\n    )\n    {\n        exchange(data, item.data);\n        exchange(nr_, item.nr_);\n        exchange(nc_, item.nc_);\n        exchange(at_start_, item.at_start_);\n        exchange(cur, item.cur);\n        exchange(last, item.last);\n        pool.swap(item.pool);\n    }\n\n    void clear(\n    )\n    {\n        if (data != 0)\n        {\n            // ec we might manage this memory at the leadtools level \n            if (bIsAllocatedHere)\n                pool.deallocate_array(data);\n            nc_ = 0;\n            nr_ = 0;\n            data = 0;\n            at_start_ = true;\n            cur = 0;\n            last = 0;\n            bIsAllocatedHere = false;\n        }\n    }\n\n    void set_size(\n        long rows,\n        long cols\n    );\n\n    bool at_start(\n    ) const {\n        return at_start_;\n    }\n\n    void reset(\n    ) const {\n        at_start_ = true; cur = 0;\n    }\n\n    bool current_element_valid(\n    ) const {\n        return (cur != 0);\n    }\n\n    const T&amp; element(\n    ) const\n    {\n        // make sure requires clause is not broken\n        DLIB_ASSERT(current_element_valid() == true,\n            \"\\tconst T&amp; arrayEd::element()()\"\n            &lt;&lt; \"\\n\\tYou can only call element() when you are at a valid one.\"\n            &lt;&lt; \"\\n\\tthis:    \" &lt;&lt; this\n        );\n\n        return *cur;\n    }\n\n    T&amp; element(\n    )\n    {\n        // make sure requires clause is not broken\n        DLIB_ASSERT(current_element_valid() == true,\n            \"\\tT&amp; arrayEd::element()()\"\n            &lt;&lt; \"\\n\\tYou can only call element() when you are at a valid one.\"\n            &lt;&lt; \"\\n\\tthis:    \" &lt;&lt; this\n        );\n\n        return *cur;\n    }\n\n    bool move_next(\n    ) const\n    {\n        if (cur != 0)\n        {\n            if (cur != last)\n            {\n                ++cur;\n                return true;\n            }\n            cur = 0;\n            return false;\n        }\n        else if (at_start_)\n        {\n            cur = data;\n            at_start_ = false;\n            return (data != 0);\n        }\n        else\n        {\n            return false;\n        }\n    }\n\n    unsigned long size(\n    ) const {\n        return static_cast&lt;unsigned long&gt;(nc_ * nr_);\n    }\n\n    long width_step(\n    ) const\n    {\n        if (lWidthStep == 0)  // inc ase image not allocated by leadtools\n            return nc_ * sizeof(T);\n        else\n            return lWidthStep;\n    }\n\n    // eds setup fcn\n    int setup(CpwImage&amp; img)\n    {\n        data = (T *)img.AccessBitmap();\n        nc_ = img.GetWidth();\n        nr_ = img.GetHeight();\n        cur = last = 0;\n        at_start_ = (true);\n        lWidthStep = img.GetBytesPerLine();\n        if (data != 0)\n            return 1;\n        return 0;\n    }\n\nprivate:\n\n\n    T* data;\n    long nc_;\n    long nr_;\n\n    typename mem_manager::template rebind&lt;T&gt;::other pool;\n    mutable T* cur;\n    T* last;\n    mutable bool at_start_;\n\n    // restricted functions\n    arrayEd(arrayEd&amp;);        // copy constructor\n    arrayEd&amp; operator=(arrayEd&amp;);    // assignment operator\n\n};\n\n// ----------------------------------------------------------------------------------------\n\ntemplate &lt;\n    typename T,\n    typename mem_manager\n&gt;\n    inline void swap(\n        arrayEd&lt;T, mem_manager&gt;&amp; a,\n        arrayEd&lt;T, mem_manager&gt;&amp; b\n    ) {\n    a.swap(b);\n}\n\n\ntemplate &lt;\n    typename T,\n    typename mem_manager\n&gt;\n    void serialize(\n        const arrayEd&lt;T, mem_manager&gt;&amp; item,\n        std::ostream&amp; out\n    )\n{\n    try\n    {\n        // The reason the serialization is a little funny is because we are trying to\n        // maintain backwards compatibility with an older serialization format used by\n        // dlib while also encoding things in a way that lets the arrayEd and matrix\n        // objects have compatible serialization formats.\n        serialize(-item.nr(), out);\n        serialize(-item.nc(), out);\n\n        item.reset();\n        while (item.move_next())\n            serialize(item.element(), out);\n        item.reset();\n    }\n    catch (serialization_error e)\n    {\n        throw serialization_error(e.info + \"\\n   while serializing object of type arrayEd\");\n    }\n}\n\ntemplate &lt;\n    typename T,\n    typename mem_manager\n&gt;\n    void deserialize(\n        arrayEd&lt;T, mem_manager&gt;&amp; item,\n        std::istream&amp; in\n    )\n{\n    try\n    {\n        long nr, nc;\n        deserialize(nr, in);\n        deserialize(nc, in);\n\n        // this is the newer serialization format\n        if (nr &lt; 0 || nc &lt; 0)\n        {\n            nr *= -1;\n            nc *= -1;\n        }\n        else\n        {\n            std::swap(nr, nc);\n        }\n\n        item.set_size(nr, nc);\n\n        while (item.move_next())\n            deserialize(item.element(), in);\n        item.reset();\n    }\n    catch (serialization_error e)\n    {\n        item.clear();\n        throw serialization_error(e.info + \"\\n   while deserializing object of type arrayEd\");\n    }\n}\n\n// ----------------------------------------------------------------------------------------\n// ----------------------------------------------------------------------------------------\n// member function definitions\n// ----------------------------------------------------------------------------------------\n// ----------------------------------------------------------------------------------------\n\ntemplate &lt;\n    typename T,\n    typename mem_manager\n&gt;\n    void arrayEd&lt;T, mem_manager&gt;::\n    set_size(\n        long rows,\n        long cols\n    )\n{\n    // make sure requires clause is not broken\n    DLIB_ASSERT((cols &gt;= 0 &amp;&amp; rows &gt;= 0),\n        \"\\tvoid arrayEd::set_size(long rows, long cols)\"\n        &lt;&lt; \"\\n\\tThe arrayEd can't have negative rows or columns.\"\n        &lt;&lt; \"\\n\\tthis: \" &lt;&lt; this\n        &lt;&lt; \"\\n\\tcols: \" &lt;&lt; cols\n        &lt;&lt; \"\\n\\trows: \" &lt;&lt; rows\n    );\n\n    // set the enumerator back at the start\n    at_start_ = true;\n    cur = 0;\n\n    // don't do anything if we are already the right size.\n    if (nc_ == cols &amp;&amp; nr_ == rows)\n    {\n        return;\n    }\n\n    if (data != 0)\n    {\n        DLIB_ASSERT(0, \"Something wrong - this csoi image type should not be REsetting size\");\n        return;\n    }\n\n    nc_ = cols;\n    nr_ = rows;\n\n    // free any existing memory\n    if (data != 0)\n    {\n        pool.deallocate_array(data);\n        data = 0;\n    }\n\n    // now setup this object to have the new size\n    try\n    {\n        if (nr_ &gt; 0)\n        {\n            data = pool.allocate_array(nr_*nc_);\n            last = data + nr_*nc_ - 1;\n            bIsAllocatedHere = true;\n        }\n    }\n    catch (...)\n    {\n        if (data)\n            pool.deallocate_array(data);\n\n        data = 0;\n        nc_ = 0;\n        nr_ = 0;\n        last = 0;\n        throw;\n    }\n}\n// ----------------------------------------------------------------------------------------\n\ntemplate &lt;typename T&gt;\nstruct is_arrayEd : public default_is_kind_value\n{\n    /*!\n    - if (T is an implementation of array2d/array2d_kernel_abstract.h) then\n    - is_array2d&lt;T&gt;::value == true\n    - else\n    - is_array2d&lt;T&gt;::value == false\n    !*/\n};\n\n// ----------------------------------------------------------------------------------------\n\ntemplate &lt;typename T, typename MM&gt;\nstruct is_arrayEd &lt;arrayEd&lt;T, MM&gt; &gt;\n{\n    const static bool value = true;\n};\n\n// ----------------------------------------------------------------------------------------\n</code></pre>\n\n<p>}</p>\n"}, {"tags": [], "owner": {"reputation": 3708, "user_id": 211682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25e41ba451c678e34c78130a66d0da3f?s=128&d=identicon&r=PG", "display_name": "Jean-Philippe Jodoin", "link": "https://stackoverflow.com/users/211682/jean-philippe-jodoin"}, "is_accepted": false, "score": 2, "last_activity_date": 1549472993, "last_edit_date": 1549472993, "creation_date": 1549461831, "answer_id": 54555449, "question_id": 41991651, "link": "https://stackoverflow.com/questions/41991651/how-to-assign-memory-images-to-a-dlib-array2d-or-image/54555449#54555449", "title": "How to assign memory images to a DLIB array2d or image?", "body": "<p>Based on Davis King's comment.</p>\n\n<p>To avoid copying data from your own image structure to dlib internal format, dlib allows you to implement a generic image interface that will allows dlib to use directly your image. The interface that needs to be implemented looks like this:</p>\n\n<pre><code>    In dlib, an \"image\" is any object that implements the generic image interface.  In\n    particular, this simply means that an image type (let's refer to it as image_type\n    from here on) has the following seven global functions defined for it:\n        - long        num_rows      (const image_type&amp; img)\n        - long        num_columns   (const image_type&amp; img)\n        - void        set_image_size(      image_type&amp; img, long rows, long cols)\n        - void*       image_data    (      image_type&amp; img)\n        - const void* image_data    (const image_type&amp; img)\n        - long        width_step    (const image_type&amp; img)\n        - void        swap          (      image_type&amp; a, image_type&amp; b)\n     And also provides a specialization of the image_traits template that looks like:\n        namespace dlib\n        {\n            template &lt;&gt; \n            struct image_traits&lt;image_type&gt;\n            {\n                typedef the_type_of_pixel_used_in_image_type pixel_type;\n            };\n        }\n</code></pre>\n\n<p>You can find more details here:\n<a href=\"http://dlib.net/dlib/image_processing/generic_image.h.html\" rel=\"nofollow noreferrer\">http://dlib.net/dlib/image_processing/generic_image.h.html</a></p>\n"}], "owner": {"reputation": 127, "user_id": 2287494, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/TgDfA.jpg?s=128&g=1", "display_name": "EdtheC", "link": "https://stackoverflow.com/users/2287494/edthec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3673, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1549472993, "creation_date": 1485991152, "question_id": 41991651, "link": "https://stackoverflow.com/questions/41991651/how-to-assign-memory-images-to-a-dlib-array2d-or-image", "title": "How to assign memory images to a DLIB array2d or image?", "body": "<p>This is likely more of a c++ question, but it does relate to DLIB. I am using another library to load images into memory (Leadtools). I want to replace the \"load_image\" function with assignments, but I am having trouble figuring out how to do so. I have all the information and memory allocated I need from my load, such as pixel bit depth, width, height, width_step, rgb/bgr order, and a pointer to the data. </p>\n\n<p>So in the sample, there is:</p>\n\n<pre><code>array2d&lt;bgr_pixel&gt; img;\n</code></pre>\n\n<p>I can do this:</p>\n\n<pre><code>img.set_size(mywidth, myheight);\n</code></pre>\n\n<p>But (assuming the data mypointer is bgr contiguous char * bytes):</p>\n\n<pre><code>img.data = mydatapointer;  \n</code></pre>\n\n<p>does not work - there is no img.data, plus I can't figure out how to use image_view.</p>\n\n<p>What is the right way to setup that data pointer? Note that I do NOT want to duplicate memory :-)</p>\n\n<p>Is there anything else that needs setting in order to simulate the load_image and have the correct structure to use within dlib?</p>\n\n<p>TIA</p>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 0, "creation_date": 1485990721, "post_id": 41991527, "comment_id": 71160216, "body": "it doesn&#39;t crash it but does it correctly free the memory?"}, {"owner": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "reply_to_user": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 0, "creation_date": 1485990877, "post_id": 41991527, "comment_id": 71160264, "body": "If it doesn&#39;t free the memory, after so many rounds, how can the program survive?"}, {"owner": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 0, "creation_date": 1485991094, "post_id": 41991527, "comment_id": 71160330, "body": "are results the same if you use &quot;int *&quot; instead of &quot;auto&quot;?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1485991314, "post_id": 41991527, "comment_id": 71160398, "body": "@TimeString Clang, for starters, optimizes that whole new/delete business away. It also tells you what you should use. <a href=\"https://godbolt.org/g/dfa0uk\" rel=\"nofollow noreferrer\">godbolt.org/g/dfa0uk</a>"}, {"owner": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "edited": false, "score": 0, "creation_date": 1485991616, "post_id": 41991527, "comment_id": 71160494, "body": "As far as I know, the type of ptr should be <code>int (*)[300][300]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "edited": false, "score": 0, "creation_date": 1485991121, "post_id": 41991550, "comment_id": 71160335, "body": "I&#39;m more interested in what&#39;s going on after I do <code>new int[100][100]</code>: Does it allocate a continuous memory segment or does it allocate 100 segments, each segment contains 100 elements?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "edited": false, "score": 0, "creation_date": 1485991227, "post_id": 41991550, "comment_id": 71160371, "body": "@TimeString Please post a new question"}, {"owner": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "edited": false, "score": 0, "creation_date": 1485992314, "post_id": 41991550, "comment_id": 71160727, "body": "It seems <code>int (*ptr)[100][100] = new int[100][100][100];</code> first creates an array of pointer of int[100][100], but the later two dimensions int[100][100] seem to be a contiguous segment."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "edited": false, "score": 0, "creation_date": 1485995309, "post_id": 41991550, "comment_id": 71161660, "body": "@TimeString No, it does not. It has to be just 100 <code>int[100][100]</code> arrays."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 5, "last_activity_date": 1485990702, "creation_date": 1485990702, "answer_id": 41991550, "question_id": 41991527, "link": "https://stackoverflow.com/questions/41991527/delete-or-delete-over-new-int/41991550#41991550", "title": "Delete or delete[] over new int[][]", "body": "<p>Always <code>delete[]</code> when the object allocated is an array (including an array of arrays, <em>i.e.,</em> a multidimensional array). Using <code>delete</code> when you are supposed to use <code>delete[]</code>, or <em>vice versa,</em> is undefined behaviour. It may appear to work but there is no guarantee.</p>\n"}, {"tags": [], "owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "is_accepted": false, "score": 1, "last_activity_date": 1486293371, "creation_date": 1486293371, "answer_id": 42051404, "question_id": 41991527, "link": "https://stackoverflow.com/questions/41991527/delete-or-delete-over-new-int/42051404#42051404", "title": "Delete or delete[] over new int[][]", "body": "<p>You could new such array before C++11. </p>\n\n<pre><code>    int (*p)[300][300] = new int[300][300][300];\n</code></pre>\n\n<p>C++11 only gives 'auto' sugar.</p>\n\n<p>This is not three-dimentionally dynamic array, it is dynamic only by first direction, i.e. dymamic array of two-dimentional statio arrays.</p>\n\n<p>You can say</p>\n\n<pre><code>    auto p = new int[rand()][300][300];\n</code></pre>\n\n<p>But you can't say</p>\n\n<pre><code>    auto p = new int[300][rand()][300];\n</code></pre>\n\n<p>So since this is ordinary dynamic array, use ordinary delete []</p>\n"}], "owner": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 41991550, "answer_count": 2, "score": 2, "last_activity_date": 1486293371, "creation_date": 1485990572, "last_edit_date": 1495541809, "question_id": 41991527, "link": "https://stackoverflow.com/questions/41991527/delete-or-delete-over-new-int", "title": "Delete or delete[] over new int[][]", "body": "<p>I know in general if you <code>new</code> an instance of an object or a primary data type, you use <code>delete</code>; if you allocate an array such as <code>new int[10]</code>, you free the memory by <code>delete[]</code>. I just came across <a href=\"https://stackoverflow.com/a/16239446/4713342\">another source</a> and find out that in C++11, you can new a multidimensional array like this:</p>\n\n<pre><code>auto arr = new int[10][10];\n</code></pre>\n\n<p>My question is: Should I use <code>delete</code> or should I use <code>delete[]</code>? I would say <code>delete[]</code> looks more correct for me, however, <code>delete</code> doesn't crash the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    for (int i = 0; i &lt; 100000; i++) {\n        cout &lt;&lt; i &lt;&lt; endl;\n        auto ptr = new int[300][300][300];\n        ptr[299][299][299] = i;\n        delete ptr;  // both delete and delete[] work fine here\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Why is that?</p>\n"}, {"tags": ["c++", "assembly", "x86-64", "jit", "machine-code"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1485990049, "post_id": 41991398, "comment_id": 71159989, "body": "Of course it&#39;s possible. Gazillion examples around, maybe look at a <a href=\"http://stackoverflow.com/a/1032422/547981\">hello world</a> for starters. Assembling it by hand will not be fun though. Note that function calls are unlikely to be your bottleneck."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1486007110, "post_id": 41991398, "comment_id": 71164657, "body": "I generally write a sample program in C / C++, then have the compiler output assembly code in order to get the assembly level names and calling sequence. In the case of Visual Studio 2015, printf is now part of an include file, meaning it effectively gets inlined with C / C++ code. One way to deal with this is to have a  project that include a C file for the printf, and an assembly file for the rest of the project. There may be an option to import specific libraries that still include the old style printf."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1486057018, "post_id": 41991398, "comment_id": 71193196, "body": "Well, IIRC, it&#39;s possible to bend clang to compile C source into memory, and then JIT it by LLVM into machine code and run it, so by studying LLVM sources you would probably get your answers.. in few years... It&#39;s also unclear to me why you are bothered by interpreted language speed, simply write performance parts in C++ and assembly, the JIT will generally be hardly on-par in best case, and underperform in any properly tuned performance case. For non-performance critical parts the 25x shouldn&#39;t matter either. Although this may be good exercise to make you figure out how cool C++ is. :)"}], "answers": [{"comments": [{"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1486056698, "post_id": 41998290, "comment_id": 71192991, "body": "How do you prevent C++ from polluting <code>rax</code> between <code>setFunc(sub);</code> and <code>__int64 r = callFunc(0, 1);</code>? IMO this is not a stable example (although it may work with reasonably low optimization level and enough luck)."}, {"owner": {"reputation": 319, "user_id": 2503822, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/az4eb.jpg?s=128&g=1", "display_name": "uNiverselEgacy", "link": "https://stackoverflow.com/users/2503822/universelegacy"}, "reply_to_user": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1486057274, "post_id": 41998290, "comment_id": 71193349, "body": "@Ped7g My point is not that you can just use the code as is. If you can call a function directly why would you do it this way anyway. I meant to say you can retrieve the address of a function this way and then you can do whatever you want with it, setting up a jump table, for example."}, {"owner": {"reputation": 13, "user_id": 6204698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38758ae6e1a6fe8ae1125653f6d81413?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Einar Larsen", "link": "https://stackoverflow.com/users/6204698/kim-einar-larsen"}, "edited": false, "score": 0, "creation_date": 1486086618, "post_id": 41998290, "comment_id": 71206061, "body": "@MegaStupidMonkeys This is what I really was interested in. Thank you!"}], "tags": [], "owner": {"reputation": 319, "user_id": 2503822, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/az4eb.jpg?s=128&g=1", "display_name": "uNiverselEgacy", "link": "https://stackoverflow.com/users/2503822/universelegacy"}, "is_accepted": true, "score": 0, "last_activity_date": 1486027759, "last_edit_date": 1486027759, "creation_date": 1486027027, "answer_id": 41998290, "question_id": 41991398, "link": "https://stackoverflow.com/questions/41991398/call-functions-from-x86-64-assembly/41998290#41998290", "title": "Call functions from x86_64 assembly", "body": "<p>You can probably find some tutorials about writing a compiler/linker. It may help with implementing/calling dynamic libraries.</p>\n\n<p>I'm not sure what you exactly mean by calling C++ functions. Anyway I wrote the following demo program that you can take a look and see if it helps at all.</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n\n\nusing namespace std;\n\n__int64 sub(__int64 a, __int64 b)\n{\n    return a - b;\n}\n\nint main(int argc, char **argv)\n{\n    char code[] =\n    {\n        0x48, 0x89, 0xC8,           // mov rax, rcx\n        0xC3,                       // ret\n\n        0x48, 0x83, 0xEC, 0x20,     // sub rsp, 0x20\n        0xFF, 0xD0,                 // call rax\n        0x48, 0x83, 0xC4, 0x20,     // add rsp, 0x20\n        0xC3                        // ret\n    };\n\n\n    char *mem = static_cast&lt;char *&gt;(VirtualAlloc(0, sizeof(code), MEM_COMMIT, PAGE_EXECUTE_READWRITE));\n\n    MoveMemory(mem, code, sizeof(code));\n\n    auto setFunc = reinterpret_cast&lt;void *(*)(void *)&gt;(mem);\n    auto callFunc = reinterpret_cast&lt;__int64 (*)(__int64, __int64)&gt;(mem + 4);\n\n    setFunc(sub);\n    __int64 r = callFunc(0, 1);\n    cout &lt;&lt; \"r = \" &lt;&lt; r &lt;&lt; endl;\n\n    VirtualFree(mem, 0, MEM_RELEASE);\n\n\n    cin.ignore();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6204698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38758ae6e1a6fe8ae1125653f6d81413?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Einar Larsen", "link": "https://stackoverflow.com/users/6204698/kim-einar-larsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 1, "accepted_answer_id": 41998290, "answer_count": 1, "score": 0, "last_activity_date": 1486027759, "creation_date": 1485989863, "question_id": 41991398, "link": "https://stackoverflow.com/questions/41991398/call-functions-from-x86-64-assembly", "title": "Call functions from x86_64 assembly", "body": "<p>I am trying to create my own JIT and so far managed to run very simple assembly code (in machine-code), but having trouble figuring out how to call functions this way. In Visual Studio I can see functions in disassembly window.</p>\n\n<p>Another related question is how do I call Win32 MessageBox() in machine-code?</p>\n\n<p>Next question is how do I call external DLL/LIB functions in this manner?</p>\n\n<p>Also is there any books or tutorials which could teach me further in this subject? I have tried to search for it but get results like .NET, JVM and LLVM which I think is not really what I am looking for.</p>\n\n<p>Here is a simplified version of the code that I am working on:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n\nint main(int argc, char* argv[])\n{\n    // b8 03 00 00 00 83 c0 02 c3\n    unsigned char code[] = {\n        0xb8,                   // mov eax, 3\n        0x03, 0x00, 0x00, 0x00, // 3 (32 bit)\n        0x83,                   // add eax, 2 // 0x83 = add,\n        0xc0,                   // ModR/M with immediate 8 bit value\n        0x02,                   // 2 (8 bit)\n        0xc3                    // ret\n    };\n\n    void* mem = VirtualAlloc(0, sizeof(code), MEM_COMMIT, PAGE_EXECUTE_READWRITE);\n\n    memcpy(mem, code, sizeof(code));\n\n    DWORD old;\n    VirtualProtect(mem, sizeof(mem), PAGE_EXECUTE_READ, &amp;old);\n\n    int(*func)() = reinterpret_cast&lt;int(*)()&gt;(mem);\n\n    printf(\"Number is %d\\n\", func());\n\n    VirtualFree(mem, 0, MEM_RELEASE);\n\n    return 0;\n}\n</code></pre>\n\n<p>Is it possible to have the JIT assembly code to call a C++ function?</p>\n\n<p>Before this project I made a byte-code interpreter in C++, but I wasn't really happy with the speed when comparing it to equivalent test program in C#. C# was roughly 25x times faster. So I stumbled on something called JIT to make it faster. So I hope you all can see where I am taking this JIT project. And maybe if possible make it handle GUI.</p>\n"}, {"tags": ["c++", "c++11", "constructor"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1485989892, "post_id": 41991363, "comment_id": 71159923, "body": "Try adding <code>noexcept</code> specifier."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1485990431, "post_id": 41991363, "comment_id": 71160127, "body": "Note there&#39;s a difference between &quot;does not have a move constructor&quot; and &quot;has a deleted move constructor&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 17841, "user_id": 331785, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5348f77500c08a662088203ef1b4be27?s=128&d=identicon&r=PG", "display_name": "Baruch", "link": "https://stackoverflow.com/users/331785/baruch"}, "edited": false, "score": 0, "creation_date": 1486020179, "post_id": 41991412, "comment_id": 71169339, "body": "How can a constructor be both <code>default</code> and <code>delete</code>? Also, can you please explain the last sentence in your second quote? What does it mean the the case is &quot;deprecated&quot;? Doesn&#39;t this mean that if I have a user-defined destructor I wont get the implicit copy-constructor (same as for the move-constructor)?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 17841, "user_id": 331785, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5348f77500c08a662088203ef1b4be27?s=128&d=identicon&r=PG", "display_name": "Baruch", "link": "https://stackoverflow.com/users/331785/baruch"}, "edited": false, "score": 0, "creation_date": 1486045677, "post_id": 41991412, "comment_id": 71185496, "body": "@baruch It&#39;s defaulted. But the default is ill-formed, so it&#39;s deleted. Deprecated just means that at some indeterminate point in the future, the functionality will change. Don&#39;t worry about it. I just included it for completeness."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1485990681, "last_edit_date": 1485990681, "creation_date": 1485989930, "answer_id": 41991412, "question_id": 41991363, "link": "https://stackoverflow.com/questions/41991363/what-is-causing-the-move-constructor-to-be-deleted/41991412#41991412", "title": "What is causing the move constructor to be deleted", "body": "<p>You don't need <code>vector</code>, a simpler example would be just:</p>\n\n<pre><code>C1 a;\nC1 b(std::move(a)); // error: C1's copy constructor is deleted\n</code></pre>\n\n<p>From [class.copy]:</p>\n\n<blockquote>\n  <p>If the definition of a class <code>X</code> does not explicitly declare a move constructor, a non-explicit one will be implicitly declared as defaulted if and only if<br>\n  (9.1) \u2014 <code>X</code> does not have a user-declared copy constructor,<br>\n  (9.2) \u2014 <code>X</code> does not have a user-declared copy assignment operator,<br>\n  (9.3) \u2014 <code>X</code> does not have a user-declared move assignment operator, and<br>\n  <strong>(9.4) \u2014 <code>X</code> does not have a user-declared destructor.</strong></p>\n</blockquote>\n\n<p><code>C1</code> has a user-declared destructor, therefore it does not have a move constructor. <code>C1</code> <em>does</em> however have an implicitly declared copy constructor</p>\n\n<blockquote>\n  <p>If the class definition does not explicitly declare a copy constructor, <strong>a non-explicit one is declared implicitly</strong>. If the class definition declares a move constructor or move assignment operator, the implicitly declared copy\n  constructor is defined as deleted; <strong>otherwise, it is defined as defaulted (8.4)</strong>. The latter case is deprecated if the class has a user-declared copy assignment operator or a user-declared destructor.</p>\n</blockquote>\n\n<p>The full set of constructors on <code>C1</code>, explicit and implicit, looks like:</p>\n\n<pre><code>C1();\nC1(C1 const&amp; ) = default; // but also delete\n~C1();\n</code></pre>\n\n<p>So trying to construct a <code>C1</code> from an rvalue of type <code>C1</code> will match that implicitly declared copy constructor as the best match (nothing else is viable), but that constructor is <code>deleted</code> because <code>noncopyable</code>'s copy constructor is <code>deleted</code>, so the entire expression is ill-formed.</p>\n\n<p>That's why the error message mentions the constructor. That move-construction is ill-formed because the best match for that move-construction is the copy constructor is ill-formed. It can't mention the move constructor because <em>there is no</em> move constructor, and the destructor isn't relevant to the expression at hand. When you changed the base class to be copyable, now <code>C1</code> also becomes copyable - so no error. There's still no move constructor, it's just that now there's a viable candidate for move construction. </p>\n"}], "owner": {"reputation": 17841, "user_id": 331785, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5348f77500c08a662088203ef1b4be27?s=128&d=identicon&r=PG", "display_name": "Baruch", "link": "https://stackoverflow.com/users/331785/baruch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1894, "favorite_count": 0, "accepted_answer_id": 41991412, "answer_count": 1, "score": 0, "last_activity_date": 1485990681, "creation_date": 1485989677, "question_id": 41991363, "link": "https://stackoverflow.com/questions/41991363/what-is-causing-the-move-constructor-to-be-deleted", "title": "What is causing the move constructor to be deleted", "body": "<p>I have the following sample:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nclass noncopyable {\nprotected:\n    noncopyable() {}\n    ~noncopyable() {}\n    noncopyable(const noncopyable&amp;) = delete;\n    noncopyable&amp; operator=(const noncopyable&amp;) = delete;\n    noncopyable(noncopyable&amp;&amp;) = default;\n    noncopyable&amp; operator=(noncopyable&amp;&amp;) = default;\n};\n\nclass C1 : private noncopyable {\npublic:\n  C1() { }\n  ~C1() { }\n};\n\nint main() {\n    std::vector&lt;C1&gt; v;\n    v.emplace_back();\n    return 0;\n}\n</code></pre>\n\n<p>I thought it should work since <code>C1</code> should be movable since it's base class is and it has no data members. Instead, I got an an error (using clang++):</p>\n\n<pre><code>error: call to implicitly-deleted copy constructor of 'C1'\n    { ::new(static_cast&lt;void*&gt;(__p)) _T1(std::forward&lt;_Args&gt;(__args)...); }\n                                     ^   ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n.\n.\n.\nnote: in instantiation of function template specialization 'std::vector&lt;C1, std::allocator&lt;C1&gt; &gt;::emplace_back&lt;&gt;' requested here\n        v.emplace_back();\n          ^\nnote: copy constructor of 'C1' is implicitly deleted because base class 'noncopyable' has a deleted copy constructor\nclass C1 : private noncopyable {\n           ^\nnote: 'noncopyable' has been explicitly marked deleted here\n        noncopyable(const noncopyable&amp;) = delete;\n</code></pre>\n\n<p>Doing a little research (<a href=\"http://en.cppreference.com/w/cpp/language/move_constructor\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/move_constructor</a>) revealed that if there is a user-defined destructor then no implicit move-constructor will be defined. This seemes to be the problem here, since <code>C1</code> has a destructor, the move-constructor does not get defined. Sure enough, if I either remove the destructor or add <code>C1(C1&amp;&amp;) = default;</code> to <code>C1</code> then it works.</p>\n\n<p>So far so good.</p>\n\n<p>The problem was that the error message didn't mention <code>~C1()</code> or the move-constructor. It said it was trying to call the copy constructor, which was deleted in the base class. So I tried changing the <code>delete</code>ed functions in <code>noncopyable</code> to be <code>default</code>ed instead, and (surprise!), that also solved the error.</p>\n\n<p>So my question is, what does this last thing have to do with the error or it's correction? If there is a destructor, what is the difference if the base class has the copy-constructor or not?</p>\n"}, {"tags": ["c++", "mysql", "visual-studio", "cmake", "mysql-connector"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6282363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caee9e2e21e2f5718b30a8b7ace41fbd?s=128&d=identicon&r=PG&f=1", "display_name": "mtkzcs", "link": "https://stackoverflow.com/users/6282363/mtkzcs"}, "is_accepted": false, "score": 1, "last_activity_date": 1485991785, "creation_date": 1485991785, "answer_id": 41991786, "question_id": 41991083, "link": "https://stackoverflow.com/questions/41991083/mysql-c-connector-unresolved-dependencies-vs-2015/41991786#41991786", "title": "MySQL C++ Connector Unresolved Dependencies (VS 2015)", "body": "<blockquote>\n  <p>\"I generated the project file using CMake according to the official instructions, which worked fine.\"</p>\n</blockquote>\n\n<p>I assume you meant CMake successfully generated the project but the project doesn't compile correctly.</p>\n\n<p>Have you checked which binaries are currently linked against the failing project? If not, I suggest right clicking on the project from the solution explorer -> Properties -> Linker.</p>\n\n<p>In case CMake cached certain directories that contain the required binaries, go to CMake -> File tab -> Delete cache, and regenerate the project.</p>\n\n<p>One more thing I can think of is checking the environment variables that contain the MySQL binaries path. If something has changed to you environment variables, you might need to rerun CMake, clear its cache and regenerate the project.</p>\n\n<p>If you are certain the binaries are being linked, there might be certain macros that enable static linking. I cannot remember if it is the case with MySQL connector, but it's just another thing that came to mind.</p>\n"}, {"comments": [{"owner": {"reputation": 1269, "user_id": 5173316, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/n9PU5.jpg?s=128&g=1", "display_name": "Tom Doodler", "link": "https://stackoverflow.com/users/5173316/tom-doodler"}, "edited": false, "score": 0, "creation_date": 1546469093, "post_id": 54008937, "comment_id": 94865432, "body": "Thank you very much for digging into this problem after so much time. I have moved on since then and will not be able to verify if this solution works, however I think that the problem might still affect other users, so if the majority of affected people agrees that your solution fixes the problem, I will mark the answer as accepted :)"}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 1269, "user_id": 5173316, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/n9PU5.jpg?s=128&g=1", "display_name": "Tom Doodler", "link": "https://stackoverflow.com/users/5173316/tom-doodler"}, "edited": false, "score": 1, "creation_date": 1546502013, "post_id": 54008937, "comment_id": 94872804, "body": "It&#39;s ok :) I did this because I&#39;m writing my own wrapper anyway. However this is the solution."}], "tags": [], "owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "is_accepted": true, "score": 3, "last_activity_date": 1546442737, "creation_date": 1546442737, "answer_id": 54008937, "question_id": 41991083, "link": "https://stackoverflow.com/questions/41991083/mysql-c-connector-unresolved-dependencies-vs-2015/54008937#54008937", "title": "MySQL C++ Connector Unresolved Dependencies (VS 2015)", "body": "<p>After days of searching and testing, I have found the problem. I am surprised to see that this is going on since 2017 or even earlier.</p>\n\n<p><strong>The Problem</strong>:</p>\n\n<p>Documentation on the MySQL website is confusing, outdated and useless.</p>\n\n<p>If you are downloading the latest <em>mysql-connector-c++-8.0.13-winx64.zip</em>, you will find the library <em>mysqlcppconn-static.lib</em> which is 64+ MB. You can use this in your project BUT, you will need the .dll as well, and this is built in Release version only.</p>\n\n<p>If you want to compile your own connector, you can do so if you have the \"right\" commands only. You can build STATIC DEBUG versions of x64 to work in your application and no .dll is required. </p>\n\n<p>However you will encounter the above error as per the OP posted. The problem is that you need to manually link <em>mysqlclient.lib</em>. Where to find it ? Because in their downloads page they say: \"Windows: The Client Utilities Package is available from the Windows Installer.\" which is false. There is no such thing.</p>\n\n<p>What you must do is go to: <a href=\"https://downloads.mysql.com/archives/c-c/\" rel=\"nofollow noreferrer\">MySQL Connector/C (Archived Versions)</a> and download <em>mysql-connector-c-6.1.11-winx64-debug.zip</em>. Once you have this, you can just link these in your project:</p>\n\n<pre><code>#pragma comment(lib, \"mysqlcppconn-static.lib\")\n#pragma comment(lib, \"mysqlclient.lib\") // mysql-connector-c-6.1.11-winx64\\lib\\vs14\\debug\n</code></pre>\n\n<p>And your project will compile and work fine under Debug x64 and VS2017 (in my case).</p>\n\n<p><strong>More Problems</strong>:</p>\n\n<p>Noticed where I mentioned that the mysqlcppconn-static.lib provided by Oracle has 64+MB ? The reason why I said that is because when you/we build our own mysql connector, the library will have around 16 MB only.</p>\n\n<p>Yes, Oracle somehow link everything in 1 lib. However it's useless because it's in Release and build with <strong>Multi-threaded DLL (/MD)</strong>, so if you are working on your application in Debug mode it will not compile OR you won't be able to debug anything.</p>\n\n<p><strong>Even More Problems</strong>:</p>\n\n<p>Now we I found out how to build this MySQL Connector under x64 and DEBUG, it's still only working under <strong>Multi-threaded Debug DLL (/MDd)</strong>. So basically you cannot build this/your app under /MT or /MTd.</p>\n\n<p>Steps to build current MySQL Connector ( JDBC as they call it ):</p>\n\n<ul>\n<li>Download the latest master:\n<a href=\"https://github.com/mysql/mysql-connector-cpp\" rel=\"nofollow noreferrer\">https://github.com/mysql/mysql-connector-cpp</a> </li>\n<li>Download the latest\n   JDBC branch: <a href=\"https://github.com/mysql/mysql-connector-cpp/tree/jdbc\" rel=\"nofollow noreferrer\">https://github.com/mysql/mysql-connector-cpp/tree/jdbc</a></li>\n<li>Copy all contents from <em>mysql-connector-cpp-jdbc</em> to\n<em>mysql-connector-cpp-master\\jdbc</em></li>\n<li>Open up x64 Native Tools Command Prompt for VS 2017 and navigate into\n<em>mysql-connector-cpp-master</em></li>\n<li><p>Run this command ( assuming you want the STATIC DEBUG ):</p>\n\n<p>cmake -G \"Visual Studio 15 2017 Win64\" -DCMAKE_BUILD_TYPE=Debug -DBUILD_STATIC=true -DBUNDLE_DEPENDENCIES=ON -DSTATIC_MSVCRT=OFF -DWITH_JDBC=ON</p></li>\n<li><p>Once done, go via explorer in <em>mysql-connector-cpp-master\\jdbc</em> and\nyou will see <em>MYSQLCPPCONN.sln</em></p></li>\n<li><p>From there just build the solution, and you will find the lib in\n<em>mysql-connector-cpp-master\\jdbc\\driver\\Debug</em></p></li>\n</ul>\n\n<p>That would be all for now, I hope my efforts to solve this \"mystery\" will help someone. And I sincerely hope that Oracle developers will wake up and create solutions properly and documentation because we are in 2019.</p>\n"}], "owner": {"reputation": 1269, "user_id": 5173316, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/n9PU5.jpg?s=128&g=1", "display_name": "Tom Doodler", "link": "https://stackoverflow.com/users/5173316/tom-doodler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 54008937, "answer_count": 2, "score": 2, "last_activity_date": 1546442737, "creation_date": 1485988425, "last_edit_date": 1485988849, "question_id": 41991083, "link": "https://stackoverflow.com/questions/41991083/mysql-c-connector-unresolved-dependencies-vs-2015", "title": "MySQL C++ Connector Unresolved Dependencies (VS 2015)", "body": "<p>I'm trying to compile MySQL Connector C++ on Windows / Visual Studio 2015.\nI generated the project file using CMake according to the <a href=\"https://dev.mysql.com/doc/connector-cpp/en/connector-cpp-installation-source-windows.html\" rel=\"nofollow noreferrer\">official instructions</a>, which worked fine. Now when I try to compile the solution,I get the following linker errors:</p>\n\n<pre><code>5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_server_init@12 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::library_init(int,char * *,char * *)\" (?library_init@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHHPAPAD0@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_server_end@0 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::library_end(void)\" (?library_end@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXXZ)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_thread_init@0 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::thread_init(void)\" (?thread_init@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXXZ)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_thread_end@0 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::thread_end(void)\" (?thread_end@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXXZ)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_num_rows@4 referenced in function \"public: virtual unsigned __int64 __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::num_rows(struct st_mysql_res *)\" (?num_rows@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAE_KPAUst_mysql_res@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_num_fields@4 referenced in function \"public: virtual unsigned int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::num_fields(struct st_mysql_res *)\" (?num_fields@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEIPAUst_mysql_res@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_fetch_field_direct@8 referenced in function \"public: virtual struct st_mysql_field * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::fetch_field_direct(struct st_mysql_res *,unsigned int)\" (?fetch_field_direct@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAUst_mysql_field@@PAUst_mysql_res@@I@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_field_count@4 referenced in function \"public: virtual unsigned int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::field_count(struct st_mysql *)\" (?field_count@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEIPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_affected_rows@4 referenced in function \"public: virtual unsigned __int64 __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::affected_rows(struct st_mysql *)\" (?affected_rows@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAE_KPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_errno@4 referenced in function \"public: virtual unsigned int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::mysql_errno(struct st_mysql *)\" (?mysql_errno@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEIPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_error@4 referenced in function \"public: virtual char const * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::error(struct st_mysql *)\" (?error@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPBDPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_sqlstate@4 referenced in function \"public: virtual char const * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::sqlstate(struct st_mysql *)\" (?sqlstate@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPBDPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_warning_count@4 referenced in function \"public: virtual unsigned int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::warning_count(struct st_mysql *)\" (?warning_count@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEIPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_info@4 referenced in function \"public: virtual char const * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::info(struct st_mysql *)\" (?info@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPBDPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_init@4 referenced in function \"public: virtual struct st_mysql * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::init(struct st_mysql *)\" (?init@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAUst_mysql@@PAU5@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_ssl_set@24 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::ssl_set(struct st_mysql *,char const *,char const *,char const *,char const *,char const *)\" (?ssl_set@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql@@PBD1111@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_real_connect@32 referenced in function \"public: virtual struct st_mysql * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::real_connect(struct st_mysql *,char const *,char const *,char const *,char const *,unsigned int,char const *,unsigned long)\" (?real_connect@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAUst_mysql@@PAU5@PBD111I1K@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_query@8 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::query(struct st_mysql *,char const *)\" (?query@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql@@PBD@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_real_query@12 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::real_query(struct st_mysql *,char const *,unsigned long)\" (?real_query@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql@@PBDK@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_store_result@4 referenced in function \"public: virtual struct st_mysql_res * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::store_result(struct st_mysql *)\" (?store_result@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAUst_mysql_res@@PAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_use_result@4 referenced in function \"public: virtual struct st_mysql_res * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::use_result(struct st_mysql *)\" (?use_result@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAUst_mysql_res@@PAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_get_character_set_info@8 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::get_character_set_info(struct st_mysql *,void *)\" (?get_character_set_info@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXPAUst_mysql@@PAX@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_ping@4 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::ping(struct st_mysql *)\" (?ping@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_get_server_info@4 referenced in function \"public: virtual char const * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::get_server_info(struct st_mysql *)\" (?get_server_info@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPBDPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_get_client_version@0 referenced in function \"public: virtual unsigned long __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::get_client_version(void)\" (?get_client_version@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEKXZ)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_get_server_version@4 referenced in function \"public: virtual unsigned long __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::get_server_version(struct st_mysql *)\" (?get_server_version@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEKPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_options@12 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::options(struct st_mysql *,enum mysql_option,void const *)\" (?options@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql@@W4mysql_option@@PBX@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_options4@16 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::options(struct st_mysql *,enum mysql_option,void const *,void const *)\" (?options@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql@@W4mysql_option@@PBX2@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_get_option@12 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::get_option(struct st_mysql *,enum mysql_option,void const *)\" (?get_option@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql@@W4mysql_option@@PBX@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_free_result@4 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::free_result(struct st_mysql_res *)\" (?free_result@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXPAUst_mysql_res@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_data_seek@12 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::data_seek(struct st_mysql_res *,unsigned __int64)\" (?data_seek@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXPAUst_mysql_res@@_K@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_fetch_row@4 referenced in function \"public: virtual char * * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::fetch_row(struct st_mysql_res *)\" (?fetch_row@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAPADPAUst_mysql_res@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_fetch_lengths@4 referenced in function \"public: virtual unsigned long * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::fetch_lengths(struct st_mysql_res *)\" (?fetch_lengths@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAKPAUst_mysql_res@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_fetch_field@4 referenced in function \"public: virtual struct st_mysql_field * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::fetch_field(struct st_mysql_res *)\" (?fetch_field@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAUst_mysql_field@@PAUst_mysql_res@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_real_escape_string@16 referenced in function \"public: virtual unsigned long __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::real_escape_string(struct st_mysql *,char *,char const *,unsigned long)\" (?real_escape_string@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEKPAUst_mysql@@PADPBDK@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_debug@4 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::debug(char const *)\" (?debug@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXPBD@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_init@4 referenced in function \"public: virtual struct st_mysql_stmt * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_init(struct st_mysql *)\" (?stmt_init@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAUst_mysql_stmt@@PAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_prepare@12 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_prepare(struct st_mysql_stmt *,char const *,unsigned long)\" (?stmt_prepare@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql_stmt@@PBDK@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_execute@4 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_execute(struct st_mysql_stmt *)\" (?stmt_execute@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_fetch@4 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_fetch(struct st_mysql_stmt *)\" (?stmt_fetch@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_store_result@4 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_store_result(struct st_mysql_stmt *)\" (?stmt_store_result@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_param_count@4 referenced in function \"public: virtual unsigned long __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_param_count(struct st_mysql_stmt *)\" (?stmt_param_count@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEKPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_attr_set@12 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_attr_set(struct st_mysql_stmt *,enum enum_stmt_attr_type,void const *)\" (?stmt_attr_set@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql_stmt@@W4enum_stmt_attr_type@@PBX@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_bind_param@8 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_bind_param(struct st_mysql_stmt *,struct st_mysql_bind *)\" (?stmt_bind_param@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql_stmt@@PAUst_mysql_bind@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_bind_result@8 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_bind_result(struct st_mysql_stmt *,struct st_mysql_bind *)\" (?stmt_bind_result@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql_stmt@@PAUst_mysql_bind@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_close@4 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_close(struct st_mysql_stmt *)\" (?stmt_close@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_free_result@4 referenced in function \"public: virtual bool __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_free_result(struct st_mysql_stmt *)\" (?stmt_free_result@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAE_NPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_send_long_data@16 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_send_long_data(struct st_mysql_stmt *,unsigned int,char const *,unsigned long)\" (?stmt_send_long_data@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql_stmt@@IPBDK@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_result_metadata@4 referenced in function \"public: virtual struct st_mysql_res * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_result_metadata(struct st_mysql_stmt *)\" (?stmt_result_metadata@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPAUst_mysql_res@@PAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_errno@4 referenced in function \"public: virtual unsigned int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_errno(struct st_mysql_stmt *)\" (?stmt_errno@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEIPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_error@4 referenced in function \"public: virtual char const * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_error(struct st_mysql_stmt *)\" (?stmt_error@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPBDPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_sqlstate@4 referenced in function \"public: virtual char const * __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_sqlstate(struct st_mysql_stmt *)\" (?stmt_sqlstate@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEPBDPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_data_seek@12 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_data_seek(struct st_mysql_stmt *,unsigned __int64)\" (?stmt_data_seek@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXPAUst_mysql_stmt@@_K@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_num_rows@4 referenced in function \"public: virtual unsigned __int64 __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_num_rows(struct st_mysql_stmt *)\" (?stmt_num_rows@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAE_KPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_affected_rows@4 referenced in function \"public: virtual unsigned __int64 __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_affected_rows(struct st_mysql_stmt *)\" (?stmt_affected_rows@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAE_KPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_field_count@4 referenced in function \"public: virtual unsigned int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_field_count(struct st_mysql_stmt *)\" (?stmt_field_count@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEIPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_commit@4 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::commit(struct st_mysql *)\" (?commit@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_rollback@4 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::rollback(struct st_mysql *)\" (?rollback@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_autocommit@8 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::autocommit(struct st_mysql *,char)\" (?autocommit@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql@@D@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_more_results@4 referenced in function \"public: virtual char __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::more_results(struct st_mysql *)\" (?more_results@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEDPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_next_result@4 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::next_result(struct st_mysql *)\" (?next_result@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_stmt_next_result@4 referenced in function \"public: virtual int __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::stmt_next_result(struct st_mysql_stmt *)\" (?stmt_next_result@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEHPAUst_mysql_stmt@@@Z)\n5&gt;mysqlcppconn-static.lib(mysql_client_api.obj) : error LNK2019: unresolved external symbol _mysql_close@4 referenced in function \"public: virtual void __thiscall sql::mysql::NativeAPI::LibmysqlStaticProxy::close(struct st_mysql *)\" (?close@LibmysqlStaticProxy@NativeAPI@mysql@sql@@UAEXPAUst_mysql@@@Z)\n</code></pre>\n\n<p>In case you dont want to count: Theres 64 of them. I noticed, that I had installed the 64bit Version of the C++ Connector Source and the 32 bit Version of the C Connector, so I installed the C Connector 64bits and the linker errors exactly doubled (128).</p>\n\n<p>So I deinstalled both and installed the 32 bit version of both, only to return to the errors you see above.</p>\n\n<p>I know there are a bunch of questions out there by people, who have the same problem, but I either was not able to find one that could help me or there is none.</p>\n\n<p>If you can point me towards a fix, that'd be great.</p>\n\n<p>Thanks for your time</p>\n"}, {"tags": ["c++", "vector", "stack"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1485988425, "post_id": 41991070, "comment_id": 71159328, "body": "Please <a href=\"https://stackoverflow.com/posts/41991070/edit\">edit</a> your question to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1485988528, "post_id": 41991070, "comment_id": 71159369, "body": "<i>I absolutely don&#39;t know what&#39;s wrong with the code</i> -- The error is clearly stating to you what the issue is.  You are accessing a vector element out-of-bounds of the number of items in that vector."}, {"owner": {"reputation": 316, "user_id": 7471629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f53e4594a9aff449febbe4773be01240?s=128&d=identicon&r=PG&f=1", "display_name": "Shaana", "link": "https://stackoverflow.com/users/7471629/shaana"}, "edited": false, "score": 1, "creation_date": 1485989233, "post_id": 41991070, "comment_id": 71159650, "body": "Why don&#39;t you use std::stack, which behaves already like a stack and handles the memory for you? Pack it into a wrapper class that protects the critical methods like pop and push and you are basically done. However, this way you avoid the error-prone element handling."}], "answers": [{"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 0, "last_activity_date": 1485988622, "creation_date": 1485988622, "answer_id": 41991127, "question_id": 41991070, "link": "https://stackoverflow.com/questions/41991070/debug-assertion-failed-vector-subscript-out-of-range/41991127#41991127", "title": "Debug Assertion Failed, vector subscript out of range", "body": "<p>Your <code>vector&lt;int&gt; stack</code> member is created with size <code>0</code> and forever maintains that size <code>0</code>. I don't see any attempts to change its size in your code. No wonder any index access to <code>stack</code> produces undefined behavior, including this \"out of range\" error.</p>\n\n<p>Hint: if you want to change the size of an <code>std::vector</code>, the corresponding method is called <code>resize</code>, not <code>reserve</code>. The latter changes the <em>capacity</em>, not the <em>size</em> of a vector.</p>\n"}], "owner": {"reputation": 1, "user_id": 7503059, "user_type": "registered", "profile_image": "https://graph.facebook.com/1301307013226065/picture?type=large", "display_name": "Dominik Parhammer", "link": "https://stackoverflow.com/users/7503059/dominik-parhammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1485988622, "creation_date": 1485988355, "last_edit_date": 1592644375, "question_id": 41991070, "link": "https://stackoverflow.com/questions/41991070/debug-assertion-failed-vector-subscript-out-of-range", "title": "Debug Assertion Failed, vector subscript out of range", "body": "<p>my program should implement a threadsafe stack in c++\nI get an error when I want to start the programm:</p>\n<blockquote>\n<p>Debug assertion Failed! ...\\vector Line 1201</p>\n<p>Expression: vector subscript out of range</p>\n</blockquote>\n<p>I absolutely don't know what's wrong with the code</p>\n<pre><code>#include &lt;condition_variable&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\n#define NUM_ELEMENTS 10\n\nusing namespace std;\n\nclass Stack\n{\nprotected:\n    vector&lt;int&gt; stack;\n    int topOfStack;    \n    int maxSize;\n    mutable mutex _mutex;\n    mutable condition_variable cv;\n\npublic:\n    Stack(int size);\n    int top() const; \n    int pop(); \n    void push(int element); \n\n    bool isFull() const;  \n    bool isEmpty() const; \n};\n\nStack::Stack(int size)\n{\n    stack.reserve(size); \n    maxSize = size;      \n    topOfStack = 0;\n}\n\nint Stack::top() const\n{\n    unique_lock&lt;mutex&gt; lck(_mutex);     \n    \n    // sperren, solange kein Wert da ist\n    while (isEmpty())\n        cv.wait(lck);\n\n    int val = stack[topOfStack - 1];\n\n    return val;\n}\n\nint Stack::pop()\n{\n    // Kritischer Bereich - sperren\n    unique_lock&lt;mutex&gt; lck(_mutex);\n\n    // sperren, solange kein Wert am Stack ist\n    while (isEmpty())\n        cv.wait(lck);\n\n    // Wert zwischenspeichern und Stack-Pointer -1\n    // danach werden wartende Threads benachrichtigt\n    topOfStack--;\n    int val = stack[topOfStack];\n    cv.notify_all();\n\n    return val;\n}\nvoid Stack::push(int element)\n{\n    // Kritischer Bereich - sperren\n    unique_lock&lt;mutex&gt; lck(_mutex);\n\n    // sperren, solange der Stack voll ist\n    while (isFull())\n        cv.wait(lck);\n\n    // Wert speichern und Stack-Pointer +1\n    // danach werden wartende Threads benachrichtigt\n    stack[topOfStack] = element;\n    topOfStack++;\n    cv.notify_all();\n}\nbool Stack::isEmpty() const\n{\n    return topOfStack == 0;\n}\nbool Stack::isFull() const\n{\n    return topOfStack == maxSize;\n}\n\n// PRODUCER\nclass Producer\n{\nprotected:\n    shared_ptr&lt;Stack&gt; stack;\n\npublic:\n    Producer(shared_ptr&lt;Stack&gt; stack);\n\n    void produce(size_t amount);\n};\n\n//CONSUMER\nclass Consumer\n{\nprotected:\n    shared_ptr&lt;Stack&gt; stack;\n\npublic:\n    Consumer(shared_ptr&lt;Stack&gt; stack);\n\n    void consume(size_t amount);\n};\n\nProducer::Producer(shared_ptr&lt;Stack&gt; stack)\n    : stack(stack)\n{}\nvoid Producer::produce(size_t amount)\n{\n    for (size_t i = 0; i &lt; amount; i++)\n    {\n        cout &lt;&lt; &quot;Produce: &quot; &lt;&lt; i &lt;&lt; endl;\n        stack-&gt;push(i);\n    }\n}\n\nConsumer::Consumer(shared_ptr&lt;Stack&gt; stack)\n    : stack(stack)\n{}\nvoid Consumer::consume(size_t amount)\n{\n    for (size_t i = 0; i &lt; amount; i++)\n    {\n        cout &lt;&lt; &quot;Consume: &quot; &lt;&lt; stack-&gt;pop() &lt;&lt; endl;\n    }\n}\n\n// ////////////////////////////////////////////////////////////////////////////\n\nint main()\n{\n    shared_ptr&lt;Stack&gt; stack(new Stack(3));\n\n    Producer producer(stack);\n    Consumer consumer(stack);\n\n    thread consumerThread(&amp;Consumer::consume, &amp;consumer, NUM_ELEMENTS);\n    thread producerThread(&amp;Producer::produce, &amp;producer, NUM_ELEMENTS);\n\n    consumerThread.join();\n    producerThread.join();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "binary", "fstream"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1485986714, "post_id": 41990628, "comment_id": 71158518, "body": "you can return a char * and a length.   Treating a char * like a string is only a convention, not a requirement.  It&#39;s just as valid to treat it as a pointer to an array of char&#39;s.  You couldn&#39;t use operator&lt;&lt; though.  ostream::write should work fine though."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1485987557, "post_id": 41990628, "comment_id": 71158942, "body": "also, what output do you expect if the value is actually 0?"}, {"owner": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "edited": false, "score": 0, "creation_date": 1485987710, "post_id": 41990628, "comment_id": 71159015, "body": "make the minimum to a single byte and the problem of the 0 is solved"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "reply_to_user": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "edited": false, "score": 1, "creation_date": 1485987771, "post_id": 41990628, "comment_id": 71159049, "body": "@J3STER yes, but that&#39;s not something the question states."}, {"owner": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1485988042, "post_id": 41990628, "comment_id": 71159165, "body": "@xaxxon how do you suggest to convert the number into a char*? because if you have the int 1234, and try to convert it to a char*-&gt;[&quot;1234&quot;], that wouldnt work. That would result in -&gt; [49,50,51,52] instead of the desired [4,210]"}, {"owner": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1485988113, "post_id": 41990628, "comment_id": 71159195, "body": "@xaxxon do you think unions are an option?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "reply_to_user": {"reputation": 853, "user_id": 7408143, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w6j01.png?s=128&g=1", "display_name": "J3STER", "link": "https://stackoverflow.com/users/7408143/j3ster"}, "edited": false, "score": 1, "creation_date": 1485988270, "post_id": 41990628, "comment_id": 71159258, "body": "@J3STER I think sam&#39;s answer is reasonable."}], "answers": [{"comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1485987447, "post_id": 41990858, "comment_id": 71158895, "body": "how would that cut off any leading 0&#39;s?"}, {"owner": {"reputation": 441, "user_id": 3401653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2650772d725a121a778430183e80cfb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Mokari", "link": "https://stackoverflow.com/users/3401653/sam-mokari"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1485988056, "post_id": 41990858, "comment_id": 71159171, "body": "I think this does not change the gist of what I am trying to illustrate. I am not doing homework, I am giving direction. :) I think you could adapt it reasonably starting from there."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1485988488, "post_id": 41990858, "comment_id": 71159355, "body": "A more portable method (and doesn&#39;t rely on Endianness), is to isolate the least significant byte:  <code>uint8_t byte = (uint8_t)(toWrite &amp; 0xFFU); out.write(&amp;byte, 1);</code>"}, {"owner": {"reputation": 441, "user_id": 3401653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2650772d725a121a778430183e80cfb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Mokari", "link": "https://stackoverflow.com/users/3401653/sam-mokari"}, "edited": false, "score": 0, "creation_date": 1485988772, "post_id": 41990858, "comment_id": 71159479, "body": "It could be a good solution if toWrite is smaller than 1 byte. But it is not general."}], "tags": [], "owner": {"reputation": 441, "user_id": 3401653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2650772d725a121a778430183e80cfb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Mokari", "link": "https://stackoverflow.com/users/3401653/sam-mokari"}, "is_accepted": true, "score": 1, "last_activity_date": 1485987959, "last_edit_date": 1485987959, "creation_date": 1485987395, "answer_id": 41990858, "question_id": 41990628, "link": "https://stackoverflow.com/questions/41990628/convert-unsigned-long-to-char-disregard-high-0-bytes/41990858#41990858", "title": "Convert unsigned long to char*, disregard high 0 bytes", "body": "<p>One way is using write for this aim.\nSo, just change:</p>\n\n<pre><code>out &lt;&lt; cutoffZeroBytes(toWrite);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>out.write((char*)&amp;toWrite, sizeof(toWrite));\n</code></pre>\n\n<p>And if you want to cut this number:</p>\n\n<pre><code>char* start = (char*)&amp;toWrite;\nint pi = sizeof(toWrite);\nfor (; pi &gt; 0; pi--, start++)\n    if (*start)\n        break;\nout.write(start, pi);\n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 5436259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/84f0035c8c02b5ca04d3675ff63f3937?s=128&d=identicon&r=PG&f=1", "display_name": "infinitezero", "link": "https://stackoverflow.com/users/5436259/infinitezero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 41990858, "answer_count": 1, "score": 0, "last_activity_date": 1485989017, "creation_date": 1485986545, "last_edit_date": 1485989017, "question_id": 41990628, "link": "https://stackoverflow.com/questions/41990628/convert-unsigned-long-to-char-disregard-high-0-bytes", "title": "Convert unsigned long to char*, disregard high 0 bytes", "body": "<p>I have an unsigned long long variable which I want to write to a binary file. However, I need to neglect all leading bytes which are zero.<br>\nThis means  </p>\n\n<pre><code>unsigned long long toWrite = 4;\n</code></pre>\n\n<p>should write 0x04 and not 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x04 to the stream.</p>\n\n<pre><code>#include &lt;fstream&gt;\nint main(){\n  std::ofstream out(\"test.txt\", std::ios::binary);\n  unsigned long long toWrite = 4;\n  out &lt;&lt; cutoffZeroBytes(toWrite);\n  out.close();\n  return 1;\n}\n</code></pre>\n\n<p>I was thinking about making <code>cutoffZeroBytes</code> a function which returns a <code>char*</code>. But if there are zero bytes in the middle (e.g. 0x03 0x00 0xf1), then I think I couldn't write it to the stream, since 0x00 determines the end of an <code>char</code> array.\nI'm a little clueless here and need some help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1485986407, "post_id": 41990539, "comment_id": 71158362, "body": "You missed quoting this bit <i>&quot; and providing a strong exception guarantee.&quot;</i>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1485986572, "post_id": 41990539, "comment_id": 71158449, "body": "Think what happens if the constructor throws an exception"}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "edited": false, "score": 0, "creation_date": 1485987225, "post_id": 41990539, "comment_id": 71158781, "body": "I understand but if the assignment fails with an exception, is it still a good idea to continue to use the object in his old state ? I mean at this point the caller do not plan to use the old object anymore because he has a new one"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1485987777, "post_id": 41990539, "comment_id": 71159052, "body": "The point is to ensure that if an exception is thrown in the assignment, the assigned-to object remains in the state it was before the assignment was attempted."}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1485987837, "post_id": 41990539, "comment_id": 71159083, "body": "@juanchopanza please see my comment"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1485987970, "post_id": 41990539, "comment_id": 71159144, "body": "@mikeDundee The point is in that in some situations you want assignments to have roll-back semantics under exceptions. Copy and swap is a way to guarantee that. If you don&#39;t need it, then there is little point in using it, because it can have a performance impact for no gain."}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1485988538, "post_id": 41990539, "comment_id": 71159372, "body": "@juanchopanza : I see the assignment can be just a part of a set of instructions that you may want to rollback"}], "owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485987786, "creation_date": 1485986192, "last_edit_date": 1495540891, "question_id": 41990539, "link": "https://stackoverflow.com/questions/41990539/code-deduplication-and-copy-and-swap-idiom-why-not-using-placement-new", "title": "Code deduplication and copy-and-swap idiom, why not using placement new?", "body": "<p>In this really interesting <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom/3279550#3279550\">response</a> about the copy-and-swap idiom, it is mentioned that we create a <code>swap()</code> method in order to avoid code deduplication while creating an assignment operator, when we already have a working copy constructor and a destructor.</p>\n\n<p>Instead of creating a <code>swap()</code> method just for this purpose, why not just implementing the assignment operator directly with a call to the destructor (<code>this-&gt;~MyClass()</code>, not using the keyword <code>delete</code>) following by a call to the copy constructor via placement <code>new</code> ?</p>\n\n<p>Considering the exception guarantee :</p>\n\n<p>If the assignment fails with an exception (the copy-and-swap version calls the copy constructor as well), is it still a good idea to continue to use the object in his old state ? I mean at this point the caller do not plan to use the old object anymore because he has a new one.</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "libstdc++", "stdtuple"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 6, "creation_date": 1485986339, "post_id": 41990514, "comment_id": 71158328, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71096\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=71096</a>"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1491127781, "last_edit_date": 1495540934, "creation_date": 1491127781, "answer_id": 43167126, "question_id": 41990514, "link": "https://stackoverflow.com/questions/41990514/calling-stdget-on-stdtuple-with-elements-deriving-from-stdtuple-il/43167126#43167126", "title": "Calling `std::get` on `std::tuple` with elements deriving from `std::tuple` - ill-formed?", "body": "<p>As mentioned by <a href=\"https://stackoverflow.com/users/2756719/t-c\">T.C.</a> in the comments, this is caused by the <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=71096\" rel=\"nofollow noreferrer\">known bug #71096</a>.</p>\n"}], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 2, "accepted_answer_id": 43167126, "answer_count": 1, "score": 6, "last_activity_date": 1491127781, "creation_date": 1485986103, "question_id": 41990514, "link": "https://stackoverflow.com/questions/41990514/calling-stdget-on-stdtuple-with-elements-deriving-from-stdtuple-il", "title": "Calling `std::get` on `std::tuple` with elements deriving from `std::tuple` - ill-formed?", "body": "<pre><code>struct Y { };\nstruct X : std::tuple&lt;Y&gt; { };\n\nint main()\n{\n    std::get&lt;0&gt;(std::make_tuple(X{}));\n}\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/mnoIClXREPXKGqaC\" rel=\"noreferrer\"><strong>on wandbox</strong></a></p>\n\n<hr>\n\n<p>The above code compiles and works as expected with <code>clang++</code> when using <strong>libc++</strong>.</p>\n\n<p>The above code fails to compile with both <code>clang++</code> and <code>g++</code> when using <strong>libstdc++</strong> with the following error:</p>\n\n<pre><code>include/c++/7.0.1/tuple:1302:36: \nerror: no matching function for call to \u2018__get_helper&lt;0&gt;(std::tuple&lt;X&gt;&amp;)\u2019\n    { return std::__get_helper&lt;__i&gt;(__t); }\n            ~~~~~~~~~~~~~~~~~~~~~~^~~~~\n\ninclude/c++/7.0.1/tuple:1290:5: \nnote: candidate: template&lt;long unsigned int __i, class _Head, class ... _Tail&gt; \n                constexpr _Head&amp; std::__get_helper(std::_Tuple_impl&lt;_Idx, _Head, _Tail ...&gt;&amp;)\n    __get_helper(_Tuple_impl&lt;__i, _Head, _Tail...&gt;&amp; __t) noexcept\n    ^~~~~~~~~~~~\n\ninclude/c++/7.0.1/tuple:1290:5: \nnote:   template argument deduction/substitution failed:\ninclude/c++/7.0.1/tuple:1302:36: \nnote:   \u2018std::_Tuple_impl&lt;0, _Head, _Tail ...&gt;\u2019 is an ambiguous base class of \u2018std::tuple&lt;X&gt;\u2019\n    { return std::__get_helper&lt;__i&gt;(__t); }\n            ~~~~~~~~~~~~~~~~~~~~~~^~~~~\n\ninclude/c++/7.0.1/tuple:1295:5: \nnote: candidate: template&lt;long unsigned int __i, class _Head, class ... _Tail&gt; \n                constexpr const _Head&amp; std::__get_helper(const std::_Tuple_impl&lt;_Idx, _Head, _Tail ...&gt;&amp;)\n    __get_helper(const _Tuple_impl&lt;__i, _Head, _Tail...&gt;&amp; __t) noexcept\n    ^~~~~~~~~~~~\n\ninclude/c++/7.0.1/tuple:1295:5: \nnote:   template argument deduction/substitution failed:\ninclude/c++/7.0.1/tuple:1302:36: \nnote:   \u2018const std::_Tuple_impl&lt;0, _Head, _Tail ...&gt;\u2019 is an ambiguous base class of \u2018std::tuple&lt;X&gt;\u2019\n    { return std::__get_helper&lt;__i&gt;(__t); }\n            ~~~~~~~~~~~~~~~~~~~~~~^~~~~\n</code></pre>\n\n<p>It seems that <strong>libstdc++</strong>'s inheritance-based implementation of <code>std::tuple</code> causes ambiguity when tuple elements derive from <code>std::tuple</code> upon calling <code>std::get</code>. I'm inclined to think that this is an implementation defect in <strong>libstdc++</strong> - is that the case? Or is there something in the Standard that would make the code snippet ill-formed?</p>\n"}, {"tags": ["c++", "arrays", "sorting", "c++11"], "comments": [{"owner": {"reputation": 2797, "user_id": 1762181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3215c975d0b96511459fa183589ce86e?s=128&d=identicon&r=PG", "display_name": "AffluentOwl", "link": "https://stackoverflow.com/users/1762181/affluentowl"}, "edited": false, "score": 1, "creation_date": 1485986802, "post_id": 41990511, "comment_id": 71158567, "body": "I recommend starting with helper functions. (1) A function to compare two strings, to see which comes before the other lexicographically. (2) A function to swap two strings position in the array, to help place them in the correct order."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1485989006, "post_id": 41990511, "comment_id": 71159578, "body": "<code>&quot;John&quot; &quot;Hats&quot;</code> missing a comma so this will cause a UB later when trying to read element <code>input[9]</code> which is not initialized."}], "answers": [{"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 0, "last_activity_date": 1485988942, "last_edit_date": 1485988942, "creation_date": 1485987783, "answer_id": 41990956, "question_id": 41990511, "link": "https://stackoverflow.com/questions/41990511/bubble-sort-2d-array-in-alphabetical-order-only-using-iostream/41990956#41990956", "title": "Bubble sort 2d array in alphabetical order only using iostream?", "body": "<p>First you have a UB in your code: </p>\n\n<pre><code>string input[10] = {\n        \"Emma\", \"Liam\", \"Dill\", \"Bill\", \"Kimm\",\n        \"Jacks\", \"John\" \"Hats\", \"Julia\", \"Jill\"}; // a great problem here: \n</code></pre>\n\n<p><code>\"John\" \"Hats\"</code>: missing a comma will cause a great disaster.</p>\n\n<p>You can use class string easily instead of an array of constant strings so you need only to compare the first letter of each word in the array and swap if the condition is true:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid sort(string input[10]);\n\n\nint main()\n{\n\n    string input[10] = {\n        \"Emma\", \"Liam\", \"Dill\", \"Bill\", \"Kimm\",\n        \"Jacks\", \"John\", \"Hats\", \"Julia\", \"Jill\"};\n\n    sort(&amp;input[0]);\n\n    for(int i(0); i &lt; 10; i++)\n        cout &lt;&lt; input[i] &lt;&lt; \", \";\n\n    cout &lt;&lt; endl;\n    return 0;\n}\n\n\nvoid sort(string input[10])\n{\n\n    for(int i = 0; i &lt; 10; i++)\n    {\n        for(int j = i + 1; j &lt; 10; j++)\n        {\n            if(toupper(input[i][0]) &gt; toupper(input[j][0])) // I used `toupper()` to not distinguish between small and capital letters\n            {\n                string temp = input[i];\n                input[i] = input[j];\n                input[j] = temp;\n            }\n        }\n    }\n}\n</code></pre>\n\n<ul>\n<li>If you want a full comparison which means compare the first letter of the two words and if they equal then compare the seconds and so on you need some extra work or use some facilities of some classes.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1485988027, "creation_date": 1485988027, "answer_id": 41991001, "question_id": 41990511, "link": "https://stackoverflow.com/questions/41990511/bubble-sort-2d-array-in-alphabetical-order-only-using-iostream/41991001#41991001", "title": "Bubble sort 2d array in alphabetical order only using iostream?", "body": "<p>To make the code more readable, let's define a swap method:</p>\n\n<pre><code>void Swap_Names(char a[25], char b[25])\n{\n  char c;\n  for (unsigned int i = 0; i &lt; 25; ++i)\n  {\n    c = a[i];\n    a[i] = b[i];\n    b[i] = c;\n  }\n}\n</code></pre>\n\n<p>A comparison function may make the code more readable:  </p>\n\n<pre><code>bool Is_Less_Than(char a[25], char b[25])\n{\n  bool is_less = false;\n  for (unsigned int 0 = 1; i &lt; 25; ++i)\n  {\n    if (a[i] != b[i])\n    {\n       is_less = a[i] &lt; b[i];\n       break;\n    }\n  }\n  return is_less;\n}\n</code></pre>\n\n<p>A bubble sort works by swapping items, in your case, names.  </p>\n\n<pre><code>void Bubble_Sort(char input[10][25], unsigned int size) // size can't be negative.\n{\n  bool swap_occurred = true;\n  while (swap_occurred)\n  {\n    swap_occurred = false;\n    for (unsigned int index = 0; index &lt; 9; ++index)\n    {\n      if (! Is_Less_Than(input[index], input[index + 1]))\n      {\n        Swap_Names(input[index], input[index + 1]);\n        swap_occurred = true;\n      }\n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2797, "user_id": 1762181, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3215c975d0b96511459fa183589ce86e?s=128&d=identicon&r=PG", "display_name": "AffluentOwl", "link": "https://stackoverflow.com/users/1762181/affluentowl"}, "is_accepted": true, "score": 1, "last_activity_date": 1487206492, "last_edit_date": 1487206492, "creation_date": 1485988683, "answer_id": 41991142, "question_id": 41990511, "link": "https://stackoverflow.com/questions/41990511/bubble-sort-2d-array-in-alphabetical-order-only-using-iostream/41991142#41991142", "title": "Bubble sort 2d array in alphabetical order only using iostream?", "body": "<p>The main issue with your code, is that when 1 word needs to be swapped with another, you do not swap the two words in the array. Instead you swap just the characters of the first word, which are larger than the characters of the second word. This creates a jumbled mess.</p>\n\n<p>For example, when you try to Swap the following two rows</p>\n\n<pre><code>SALLY\nMOMMA\n</code></pre>\n\n<p>Your end result is:</p>\n\n<pre><code>MALLA\nSOMMY\n</code></pre>\n\n<p>Another problem include missing a comma between \"John\" and \"Hats\", resulting in only 9 entries in the array, one of them being \"JohnHats\". </p>\n\n<p>Lastly, your bubble sort needs to use different indices in your loops to preserve the already sorted elements.</p>\n\n<p>Using helper functions helps make this more clear. Here's an example solution close to what you originally wrote but with helper functions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nbool smaller(char input[10][25], int a_index, int b_index) {\n    char* a = input[a_index];\n    char* b = input[b_index];\n    for (int i = 0; a[i] != 0 &amp;&amp; b[i] != 0; i++) {\n        cout &lt;&lt; a[i] &lt;&lt; \" \" &lt;&lt; b[i];\n        if (a[i] &gt; b[i]) {\n            return false;\n        } else if (a[i] &lt; b[i]){\n            return true;\n        }\n    }\n    return true;\n}\n\nvoid swap(char input[10][25], int a, int b) {\n    for(int i = 0; i &lt; 25; i++){\n        char temp = input[a][i];\n        input[a][i] = input[b][i];\n        input[b][i] = temp;\n    }\n}\n\nvoid sort(char input[10][25], int size){\n    char temp;\n    for(int k = 0; k &lt; 10; k++){\n        for(int i = k + 1; i &lt; 10; i++){\n            if (smaller(input, i, k)) {\n                swap(input, i, k);\n            }\n        }\n    }\n}\n\nint main(){\n    char input[10][25] = {\"Emma\", \"Liam\", \"Dill\", \"Bill\", \"Kimm\", \"Jacks\", \"John\", \"Hats\", \"Julia\", \"Jill\"};\n\n    sort(input,10);\n\n    cout &lt;&lt; \"Sorted:\\n\";\n    for(int i = 0; i &lt; 10; i++){\n        cout &lt;&lt; input[i];\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1487206940, "creation_date": 1487206940, "answer_id": 42262989, "question_id": 41990511, "link": "https://stackoverflow.com/questions/41990511/bubble-sort-2d-array-in-alphabetical-order-only-using-iostream/42262989#42262989", "title": "Bubble sort 2d array in alphabetical order only using iostream?", "body": "<p>Bubble sort is a poor sorting algorithm.</p>\n\n<p>But it does have one advantage, which is that it can easily sort data you don't hold in memory, as long as you can hold a temporary.\nOne each pass load the first two data items. Then save the lower one back to the file, and keep hold of the higher. Continue loading in one by one and saving the lower. Finally save the higher. </p>\n\n<p>You don't need random access to the data, though you do need to be able to pass through it at will.</p>\n"}], "owner": {"reputation": 33, "user_id": 7502932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d053ab61571fbfea9cb9bda3d75fea4?s=128&d=identicon&r=PG&f=1", "display_name": "HommerJacks", "link": "https://stackoverflow.com/users/7502932/hommerjacks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 0, "accepted_answer_id": 41991142, "answer_count": 4, "score": 3, "last_activity_date": 1487206940, "creation_date": 1485986089, "last_edit_date": 1486016490, "question_id": 41990511, "link": "https://stackoverflow.com/questions/41990511/bubble-sort-2d-array-in-alphabetical-order-only-using-iostream", "title": "Bubble sort 2d array in alphabetical order only using iostream?", "body": "<p>I'm trying to figure out how I can sort a list of words in alphabetical order. The code I have now will sort them correctly, only if each word is only 1 letter. Once I move to more letters, it fails. Can you help me fix this. Thanks</p>\n\n<p>My input file is:</p>\n\n<pre><code>Emma\nLiam\nDill\nBill\nKimm\nJacks\nJohn\nHats\nJulia\nJill\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nvoid sort(char input[10][25], int size);\n\nint main(){\n    char input[10][25] = {\"Emma\", \"Liam\", \"Dill\", \"Bill\", \"Kimm\", \"Jacks\", \"John\", \"Hats\", \"Julia\", \"Jill\"};\n\n    sort(input,10);\n\n    cout &lt;&lt; \"Sorted:\\n\";\n    for(int i = 0; i &lt; 10; i++){\n        cout &lt;&lt; input[i];\n    }\n\n    return 0;\n}\n\n\nvoid sort(char input[10][25],int size){\n\n    char temp;\n    for(int k = 0;k &lt; 10;k++){\n        for(int i = 0; i &lt; 9; i++){\n            for(int j = 0; j &lt; 24; j++){\n                if(input[i][j] &gt; input[i+1][j]){\n                    temp = input[i][j];\n                    input[i][j] = input[i+1][j];\n                    input[i+1][j] = temp;\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "wxwidgets"], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "edited": false, "score": 0, "creation_date": 1485992901, "post_id": 41991914, "comment_id": 71160901, "body": "wxEVT_COMMAND_SCROLL and wxEVT_SCROLL both get a <code>not declared</code> error."}, {"owner": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "edited": false, "score": 0, "creation_date": 1485993181, "post_id": 41991914, "comment_id": 71161002, "body": "it&#39;s wx 3.0 btw, and the comments in the wxEVT declarations clearly state that wxEVT_SCROLL should be used rather than wxEVT_SCROLLBAR."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "reply_to_user": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "edited": false, "score": 0, "creation_date": 1485993627, "post_id": 41991914, "comment_id": 71161157, "body": "@PatrickJeeves, you need to Skip() the event, i.e. add &quot;event.Skip() at the end of the handler."}, {"owner": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1485993948, "post_id": 41991914, "comment_id": 71161270, "body": "@igor it didn&#39;t change anything. Could it have to do with being on KDE?"}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "reply_to_user": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "edited": false, "score": 0, "creation_date": 1485994152, "post_id": 41991914, "comment_id": 71161332, "body": "@PatrickJeeves, you did compile against GTK+ though, right? Was it GTK+2 or 3?"}, {"owner": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1485994338, "post_id": 41991914, "comment_id": 71161385, "body": "@Igor I just used <code>wx-config --cxxflags</code>, which seems to be outputting gtk2-unicode-3.0 for that."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "reply_to_user": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "edited": false, "score": 0, "creation_date": 1485996267, "post_id": 41991914, "comment_id": 71161933, "body": "@PatrickJeeves, ok, I see Vadim&#39; responce. Please follow his suggestion and like he said - don&#39;t forget to call &quot;event.Skip()&quot;."}, {"owner": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1485996834, "post_id": 41991914, "comment_id": 71162106, "body": "@Igor not sure who vadim is, but I just tried the EVT_SCROLL in the event table, the in addition to not working, the printouts aren&#39;t being printed, so the glcanvas isn&#39;t generating scroll events i guess? I tried enabling the style  wxHSCROLL and wxVSCROLL, not sure what they do but they don&#39;t work. If you meant the other guy, I&#39;m not seeing exactly how I would translate a mouse wheel to SetScrollPos, i thought that was the point of the scrollbar class, in addition the docs indicate it isn&#39;t always implemented."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1485995248, "last_edit_date": 1485995248, "creation_date": 1485992550, "answer_id": 41991914, "question_id": 41990425, "link": "https://stackoverflow.com/questions/41990425/how-to-forward-events-in-wxwidgets/41991914#41991914", "title": "How to forward events in wxWidgets?", "body": "<p>You need to <code>conect()</code>, or better <code>bind()</code> if your wx version allows it, a <a href=\"http://docs.wxwidgets.org/trunk/classwx_scroll_event.html\" rel=\"nofollow noreferrer\">wxScrollEvent</a> </p>\n\n<p><p>If you choose to handle all scroll events by using <strong>wxEVT_COMMAND_SCROLL</strong> or <strong>wxEVT_SCROLL</strong> then you can get the type of event from the event parameter in your handler function.</p>\n\n<h2>Correction:</h2>\n\n<p>Currently (wx 3.1) still there's no wxEVT_COMMAND_SCROLL nor wxEVT_SCROLL. Only partial definitions (page up, thumtrack, etc). It seems a bug. But you can use EVT_SCROLL in the old BEGIN_EVENT_TABLE/END_EVENT_TABLE way.</p>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "edited": false, "score": 0, "creation_date": 1485997623, "post_id": 41992183, "comment_id": 71162323, "body": "But aren&#39;t all wx classes things that translate the wxEvents and forward them to native controls?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1485998734, "post_id": 41992183, "comment_id": 71162615, "body": "It&#39;s the other way. Native controls send events and wx allows (by e.g. <code>conect()</code>) that you handle them in your function."}, {"owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1486078763, "post_id": 41992183, "comment_id": 71204076, "body": "@Ripi2 is correct, but I&#39;ve updated the answer to make it more clear."}], "tags": [], "owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "is_accepted": true, "score": 1, "last_activity_date": 1486078747, "last_edit_date": 1486078747, "creation_date": 1485994220, "answer_id": 41992183, "question_id": 41990425, "link": "https://stackoverflow.com/questions/41990425/how-to-forward-events-in-wxwidgets/41992183#41992183", "title": "How to forward events in wxWidgets?", "body": "<p>You can't forward wx events to native controls, if you think about it, how would it be possible for this to work when the native controls don't have any idea about wx? Native controls generate native events which are then translated to wx events and given to your application, but nothing happens, or even can be really done, in the other direction.</p>\n\n<p>In this particular case you can (relatively) easily translate scroll events to the calls to <code>ScrollLines()</code>, <code>ScrollPages()</code> or just <code>SetScrollPos()</code>. This will allow you to control another window scrolling using the same scrollbar.</p>\n\n<p>Do <em>not</em> forget to call <code>Skip()</code> in the original handler to let the window being scrolled from actually scrolling too.</p>\n"}], "owner": {"reputation": 357, "user_id": 2908202, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001195648592/picture?type=large", "display_name": "Patrick Jeeves", "link": "https://stackoverflow.com/users/2908202/patrick-jeeves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 1, "accepted_answer_id": 41992183, "answer_count": 2, "score": 1, "last_activity_date": 1486078747, "creation_date": 1485985725, "last_edit_date": 1486003720, "question_id": 41990425, "link": "https://stackoverflow.com/questions/41990425/how-to-forward-events-in-wxwidgets", "title": "How to forward events in wxWidgets?", "body": "<p>I have a window with a GLCanvas and scroll bars, I want the canvas to capture scroll events and forward them to the scroll bars, which are then used to position the 'camera.' So I've done this:</p>\n\n<pre><code>MainWindow::MainWindow(wxWindow* parent,wxWindowID id)\n{\n//...\n   GlCanvas-&gt;Connect(ID_GLCANVAS1, wxEVT_MOUSEWHEEL, (wxObjectEventFunction)&amp;MainWindow::onMouseWheel, 0L, this);\n}\n\nvoid MainWindow::onMouseWheel(wxMouseEvent &amp; event)\n{\n    if(event.GetWheelAxis() == wxMOUSE_WHEEL_VERTICAL)\n    {\n        std::cerr &lt;&lt; \"vertical scroll\" &lt;&lt; std::endl;\n        verticalScroll-&gt;ProcessWindowEvent(event);\n    }\n    else\n    {\n        std::cerr &lt;&lt; \"horizontal scroll\" &lt;&lt; std::endl;\n        horizontalScroll-&gt;ProcessWindowEvent(event);\n    }\n}\n</code></pre>\n\n<p>However, this isn't doing anything aside from the printouts. What do I do to get the scrollbars to process the wheel events? </p>\n\n<p>============== Solution ==============</p>\n\n<pre><code>void MainWindow::onMouseWheel(wxMouseEvent &amp; event)\n{\n    event.Skip();\n    double rotation = ((double) event.GetWheelRotation()) / event.GetWheelDelta();\n\n    wxScrollBar * scrollBar;\n    double * delta;\n\n    if(event.GetWheelAxis() == wxMOUSE_WHEEL_VERTICAL)\n    {\n        scrollBar = verticalScroll; \n        delta     = &amp;verticalDelta;\n        rotation *= -1;\n    }\n    else\n    {\n        scrollBar = horizontalScroll;\n        delta     = &amp;horizontalDelta;\n    }\n\n    if(event.IsPageScroll())\n    {\n        rotation *= scrollBar-&gt;GetPageSize();\n    }\n    else\n    {\n        if(event.GetWheelAxis() == wxMOUSE_WHEEL_VERTICAL)\n        {\n            rotation *= event.GetLinesPerAction();\n        }\n        else\n        {\n            rotation *= event.GetColumnsPerAction();\n        }\n    }\n\n    *delta += rotation;\n\n    int scroll = scrollBar-&gt;GetThumbPosition();\n    int ds = (int) *delta;\n\n    *delta -= ds;\n    scroll += ds;\n\n    if(scroll &lt; 0)\n    {\n        *delta = 0;\n        scroll = 0;\n    }\n    else if(scroll &gt; scrollBar-&gt;GetRange())\n    {\n        *delta = 0;\n        scroll = scrollBar-&gt;GetRange();\n    }\n\n    scrollBar-&gt;SetThumbPosition(scroll);\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1485985620, "post_id": 41990303, "comment_id": 71157957, "body": "<code>int mapx</code> isn&#39;t initialized. Looks like doing so fixes that: <a href=\"http://coliru.stacked-crooked.com/a/084aea611a4975d0\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/084aea611a4975d0</a>"}, {"owner": {"reputation": 23, "user_id": 4611870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a9d22516f94539da5f9ea4ded992a9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/4611870/andrew"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485985724, "post_id": 41990303, "comment_id": 71158007, "body": "ok that last comment made me realize my error and it now works, thank you."}], "answers": [{"tags": [], "owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "is_accepted": true, "score": 1, "last_activity_date": 1485985675, "creation_date": 1485985675, "answer_id": 41990416, "question_id": 41990303, "link": "https://stackoverflow.com/questions/41990303/c-debug-assertion-failed-vector-subscript-out-of-range/41990416#41990416", "title": "C++ Debug Assertion Failed Vector Subscript out of range", "body": "<pre><code>int mapx, mapy = 5;\n</code></pre>\n\n<p>This statement is not initialising both values to <code>5</code>: it's declaring two <code>int</code>s, initialising  <code>mapy</code> to <code>5</code> and leaving <code>mapx</code> uninitialized. Using <code>mapx</code> is undefined behaviour. Your entire <code>for</code> loop is skipped, and accessing <code>map[0][0]</code> is out-of-bounds.</p>\n\n<p>You want this:</p>\n\n<pre><code>int mapx = 5, mapy = 5;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4611870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05a9d22516f94539da5f9ea4ded992a9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/4611870/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1486030132, "accepted_answer_id": 41990416, "answer_count": 1, "score": -2, "last_activity_date": 1485985675, "creation_date": 1485985281, "question_id": 41990303, "link": "https://stackoverflow.com/questions/41990303/c-debug-assertion-failed-vector-subscript-out-of-range", "closed_reason": "Not suitable for this site", "title": "C++ Debug Assertion Failed Vector Subscript out of range", "body": "<p>i've got some code that i've written using a 2d vector instead of a 2d array however when i go to run it all it says is \"vector subscript out of range\". any help is appreciated.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint mapx, mapy = 5;\n\nvector&lt;vector&lt;int&gt;&gt; map(mapx, vector&lt;int&gt; (mapy, 0));\n\nint i, x;\n\nint main(){\n\nfor (i = 0; i &lt; map.size(); i++){\n    for (x = 0; x &lt; map[i].size(); x++)\n    {\n        map[i][x] = i + x;\n    }\n}\n\ncout &lt;&lt; map[0][0];\n\ncin &gt;&gt; i;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1485984781, "post_id": 41990074, "comment_id": 71157603, "body": "I would have expected an error saying that you cannot repeat the default value <code>= 0</code> in the definition."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1485984838, "post_id": 41990074, "comment_id": 71157625, "body": "There is a lot wrong with that code, but I don&#39;t see anything that would give that error message, and it compiles for me, with warnings."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1485984919, "post_id": 41990074, "comment_id": 71157655, "body": "What is the single closing curly brace <code>}</code> doing there in the .cpp?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1485984967, "post_id": 41990074, "comment_id": 71157681, "body": "@alain It closes the definition of the destructor. Beautiful."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1485985063, "post_id": 41990074, "comment_id": 71157724, "body": "@LogicStuff oh yes. Maybe I should un-learn to use the indentation to &quot;parse&quot; the code.."}], "owner": {"reputation": 1970, "user_id": 5988526, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/540918112752277/picture?type=large", "display_name": "Bashir", "link": "https://stackoverflow.com/users/5988526/bashir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485985094, "creation_date": 1485984453, "last_edit_date": 1485985094, "question_id": 41990074, "link": "https://stackoverflow.com/questions/41990074/c-compiler-error-definition-implicitly-declared", "title": "C++ compiler error definition-implicitly declared", "body": "<p>Hello everyone having anissue with my code today. I have created a program to help me understand different c++ Constructors, With a base class ABC. .</p>\n\n<p>So far have gotten far in my code yet in my ABC.cpp file am getting an error on line 10 that says ABC.cpp:7: error: definition of implicitly-declared 'ABC::ABC(const ABC&amp;)</p>\n\n<p>ABC.cpp code :</p>\n\n<pre><code>#include \"ABC.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n\n    ABC::ABC(const ABC &amp; a) : ptr(new int(*(a.ptr)))\n        {cout &lt;&lt;\" Constructeur de Recopie \"&lt;&lt; endl;}\n\n    ABC::ABC(int x =0) : ptr(new int (x))\n        {cout &lt;&lt;\"Constructeur\" &lt;&lt; endl;}\n\n\n\n    bool ABC::operator == (ABC c)\n        {return (*ptr == *(c.ptr));}\n\n\n\n      ABC::~ABC(){\n          delete ptr;\n      }\n</code></pre>\n\n<p>ABC.h</p>\n\n<pre><code>#ifndef ABC_H_INCLUDED\n#define ABC_H_INCLUDED\n\nclass ABC {\n\n    int * ptr;\n\npublic:\n\n    ABC (int x = 0);\n    ABC ( const ABC&amp; );\n\n    bool operator == (ABC c);\n\n    ~ABC();\n\n\n\n};\n\n\n#endif // ABC_H_INCLUDED\n</code></pre>\n\n<p>Error on this line :</p>\n\n<pre><code>ABC::ABC(const ABC &amp; a) : ptr(new int(*(a.ptr)))\n        {cout &lt;&lt;\" Constructeur de Recopie \"&lt;&lt; endl;}\n</code></pre>\n"}, {"tags": ["c++", "windows", "uwp", "c++-cx", "keyboard-input"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1486043200, "post_id": 41990047, "comment_id": 71183740, "body": "What&#39;s wrong with Raymond Chen&#39;s code sample? This is someone that knows what they are doing. And if you need a workaround for <i>&quot;this&quot;</i>, it&#39;s helpful if you explained precisely, what <i>&quot;this&quot;</i> is."}, {"owner": {"reputation": 432, "user_id": 6857153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01fd0e98d1f243c40ad3f4670d8b81fe?s=128&d=identicon&r=PG&f=1", "display_name": "dodo951", "link": "https://stackoverflow.com/users/6857153/dodo951"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1486069873, "post_id": 41990047, "comment_id": 71200183, "body": "That code sample uses SwapChainPanel XAML control with attached CoreIndependentInputSource class instance that allows to receive input events in background thread. It&#39;s just a way to coexist with XAML event processing and can not be used in non-XAML applications. And as I explained precisely, &quot;this&quot; is avoiding CoreWindow events/methods as they can hardly be considered a &quot;low latency input&quot;."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1486070229, "post_id": 41990047, "comment_id": 71200370, "body": "Nothing in the <a href=\"https://msdn.microsoft.com/library/windows/apps/dn298460\" rel=\"nofollow noreferrer\">CoreIndependentInputSource</a> documentation insists, that this can only be used in a XAML application. What am I missing?"}, {"owner": {"reputation": 432, "user_id": 6857153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01fd0e98d1f243c40ad3f4670d8b81fe?s=128&d=identicon&r=PG&f=1", "display_name": "dodo951", "link": "https://stackoverflow.com/users/6857153/dodo951"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1486071173, "post_id": 41990047, "comment_id": 71200899, "body": "From Remarks section: &quot;Create an instance of this class by calling SwapChainBackgroundPanel::CreateCoreIndependentInputSource or SwapChainPanel::CreateCoreIndependentInputSource.&quot; So basically it can only be used with SwapChainPanel XAML control."}, {"owner": {"reputation": 11321, "user_id": 4184842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mD03.jpg?s=128&g=1", "display_name": "Peter Torr - MSFT", "link": "https://stackoverflow.com/users/4184842/peter-torr-msft"}, "edited": false, "score": 0, "creation_date": 1487730696, "post_id": 41990047, "comment_id": 71912253, "body": "What is your threshold for &quot;low latency&quot;? And just to be sure: Did you measure the <code>CoreWindow</code> events to know they&#39;re not fast enough, or is it an assumption?"}, {"owner": {"reputation": 432, "user_id": 6857153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01fd0e98d1f243c40ad3f4670d8b81fe?s=128&d=identicon&r=PG&f=1", "display_name": "dodo951", "link": "https://stackoverflow.com/users/6857153/dodo951"}, "edited": false, "score": 0, "creation_date": 1487862414, "post_id": 41990047, "comment_id": 71984124, "body": "There are two issues with uwp events: (1) each event is a COM object, basically this whole event system just adds 6 layers on top of WndProc to the call stack and at least one heap allocation; (2) they can be received only in main thread; typically i want to receive input messages in background thread and handle other window messages in main thread along with doing DXGI stuff, mostly swap chain resizing / presenting. The overhead of UWP abi is obviously not good, but waiting all the time to present a frame is the main problem."}, {"owner": {"reputation": 432, "user_id": 6857153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01fd0e98d1f243c40ad3f4670d8b81fe?s=128&d=identicon&r=PG&f=1", "display_name": "dodo951", "link": "https://stackoverflow.com/users/6857153/dodo951"}, "edited": false, "score": 0, "creation_date": 1487863760, "post_id": 41990047, "comment_id": 71985115, "body": "Keyboard input events seem to have about 30 extra stack levels. And yes, simply running UWP event loop is considerably slower compared to good old message proc. It causes up to 5-8% cpu core load compared to ~1%."}, {"owner": {"reputation": 1049, "user_id": 2747755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/011fcb11ff675eb6e09a60a4fc7b9ebc?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Krouwel", "link": "https://stackoverflow.com/users/2747755/andy-krouwel"}, "edited": false, "score": 0, "creation_date": 1513378100, "post_id": 41990047, "comment_id": 82645893, "body": "Low Latency sample also only seems to cover mouse, not keyboard."}, {"owner": {"reputation": 317, "user_id": 946519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/130435d41e6d3e9b134beff19804b5ec?s=128&d=identicon&r=PG", "display_name": "Gavin Williams", "link": "https://stackoverflow.com/users/946519/gavin-williams"}, "edited": false, "score": 0, "creation_date": 1607379939, "post_id": 41990047, "comment_id": 115249953, "body": "I&#39;d also like an answer to this question, in relation to CoreWindow apps."}], "owner": {"reputation": 432, "user_id": 6857153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01fd0e98d1f243c40ad3f4670d8b81fe?s=128&d=identicon&r=PG&f=1", "display_name": "dodo951", "link": "https://stackoverflow.com/users/6857153/dodo951"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 727, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485984337, "creation_date": 1485984337, "question_id": 41990047, "link": "https://stackoverflow.com/questions/41990047/how-to-implement-low-latency-keyboard-mouse-input-for-uwp-application", "title": "How to implement low latency keyboard/mouse input for UWP application?", "body": "<p>I got stuck at this basic matter.\nI can't find any other way to obtain input but through CoreWindow class (handling KeyDown/KeyUp/PointerMoved events or calling GetKeyState in the loop).\nI thought that I had to deal with input device directly, but it turns out that <a href=\"https://msdn.microsoft.com/en-us/library/windows/apps/xaml/dn263140.aspx\" rel=\"nofollow noreferrer\">interactions with generic HID devices are blocked for UWP applications</a>.\nThere is also a <a href=\"https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/LowLatencyInput\" rel=\"nofollow noreferrer\">\"low latency\" sample</a> among UWP samples, that uses some twisted method through creating dedicated XAML control, but it seems more like a method to coexist with XAML rendering loop while I'm dealing with non-xaml application.</p>\n\n<p>Maybe someone knows a good workaround for this?</p>\n"}, {"tags": ["c++", "vtk", "paraview"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7502736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2985ff44187a4cddcdaa43e1928a93?s=128&d=identicon&r=PG&f=1", "display_name": "Philip H.", "link": "https://stackoverflow.com/users/7502736/philip-h"}, "edited": false, "score": 1, "creation_date": 1485986372, "post_id": 41990238, "comment_id": 71158347, "body": "Thanks to your tip I looked again at this command and the error occurs when I use the vtkFloatArray::SafeDownCast() command, otherwise it does not return NULL. I found out, it actually returns a vtkDoubleArray. I thought, VTK is able to downcast from a double to a float array, but apparently this does not work in my case. Thank you for looking into my problem, it helped a lot!"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1485985041, "creation_date": 1485985041, "answer_id": 41990238, "question_id": 41990022, "link": "https://stackoverflow.com/questions/41990022/vtkarraycalculator-segmentation-fault-when-accessing-the-output/41990238#41990238", "title": "vtkArrayCalculator - Segmentation fault when accessing the output", "body": "<p>I'd suggest to split up the long chain of <code>vtkFloatArray::SafeDownCast(calculator-&gt;GetStructuredGridOutput()-&gt;GetPointData()-&gt;GetArray(\"wind_velocity\"))</code> and use a debugger to see what the intermediate results are. </p>\n\n<p>When reading the definition of <code>GetArray</code>, it states that under various conditions the function might return <code>NULL</code>. Check the return value of <code>GetArray</code>; it is very likely that you do not get back what you expect.</p>\n\n<blockquote>\n  <p>vtkDataArray* vtkFieldData::GetArray  (   const char *    arrayName   )<br>\n  inline</p>\n  \n  <p>Not recommended for use. Use GetAbstractArray(const char *arrayName) instead.</p>\n  \n  <p>Return the array with the name given. Returns NULL if array not found.\n  A NULL is also returned if the array with the given name is not a\n  vtkDataArray. To access vtkStringArray, vtkUnicodeStringArray, or\n  vtkVariantArray, use GetAbstractArray(const char *arrayName).</p>\n</blockquote>\n"}], "owner": {"reputation": 71, "user_id": 7502736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2985ff44187a4cddcdaa43e1928a93?s=128&d=identicon&r=PG&f=1", "display_name": "Philip H.", "link": "https://stackoverflow.com/users/7502736/philip-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 2, "accepted_answer_id": 41990238, "answer_count": 1, "score": 0, "last_activity_date": 1485985149, "creation_date": 1485984270, "last_edit_date": 1485985149, "question_id": 41990022, "link": "https://stackoverflow.com/questions/41990022/vtkarraycalculator-segmentation-fault-when-accessing-the-output", "title": "vtkArrayCalculator - Segmentation fault when accessing the output", "body": "<p>I want to use vtkArrayCalculator, for use in a Paraview filter, as described here: <a href=\"https://itk.org/Wiki/VTK/Examples/Cxx/Utilities/ArrayCalculator\" rel=\"nofollow noreferrer\">ArrayCalculatorExample</a></p>\n\n<pre><code>vtkSmartPointer&lt;vtkArrayCalculator&gt; calculator = vtkSmartPointer&lt;vtkArrayCalculator&gt;::New();\ncalculator-&gt;SetInputData(input);\ncalculator-&gt;AddScalarArrayName(\"u\");\ncalculator-&gt;SetFunction(\"u+1\");\ncalculator-&gt;SetResultArrayName(\"wind_velocity\");\ncalculator-&gt;Update();\nvtkSmartPointer&lt;vtkFloatArray&gt; windVelocity = \n        vtkFloatArray::SafeDownCast(calculator-&gt;GetStructuredGridOutput()-&gt;GetPointData()-&gt;GetArray(\"wind_velocity\"));\n</code></pre>\n\n<p>Now when I want to access the data with (or similar commands)</p>\n\n<pre><code>    windVelocity-&gt;GetValue(0);\n</code></pre>\n\n<p>I get a \"Segmentation fault (core dumped)\".</p>\n\n<p>\"input\" is a vtkStructuredGrid and \"u\" is a vtkDataArray (that can be downcast to a vtkFloatArray without problem). \"u\" can be accessed by </p>\n\n<pre><code>input-&gt;GetPointData()-&gt;GetArray(\"u\");\n</code></pre>\n\n<p>Every hint to what I am doing wrong is greatly appreciated!</p>\n\n<p>Edit: I already tried the following</p>\n\n<pre><code>vtkSmartPointer&lt;vtkFloatArray&gt; windVelocity = vtkSmartPointer&lt;vtkFloatArray&gt;::New();\nwindVelocity-&gt;DeepCopy(vtkFloatArray::SafeDownCast(calculator-&gt;GetStructuredGridOutput()-&gt;GetPointData()-&gt;GetArray(\"wind_velocity\")));\n</code></pre>\n"}, {"tags": ["c++", "c++11", "gcc", "c++14", "stdvector"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 9, "creation_date": 1485984102, "post_id": 41989891, "comment_id": 71157268, "body": "It probably won&#39;t make much of a difference, but why assign instead of initialize? The latter could avoid one allocation. <code>VectorWrapper_t(uint8_t const* pData, size_t length) : data(pData, pData + length) {}</code>"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1485987275, "post_id": 41989891, "comment_id": 71158810, "body": "This question seems better suited to a Linaro bug report."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 3, "creation_date": 1485987547, "post_id": 41989891, "comment_id": 71158935, "body": "2 possibilities: either the code starts the same, but gcc-5+ detects that the loop is equivalent to memcpy and replaces it with a call to memcpy, or libstdc++ gained some new special path that calls memcpy. Try passing <code>-fdump-tree-all</code> and look at some early / late dumps to determine what is going on."}, {"owner": {"reputation": 195, "user_id": 4450862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3baf8b85714e220dcd3a6faba71beb9d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Geddert", "link": "https://stackoverflow.com/users/4450862/joel-geddert"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1485989983, "post_id": 41989891, "comment_id": 71159958, "body": "@juanchopanza yes, that would be better practice. Regardless, it&#39;s one of the many things I tried that didn&#39;t fix the problem."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1485993736, "post_id": 41989891, "comment_id": 71161203, "body": "I don&#39;t have any of the standards at hand, but did the specification of assign change between them? If not, I&#39;d call it a regression bug"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1485993851, "post_id": 41989891, "comment_id": 71161235, "body": "Speaking of performance: How much slower is it?"}, {"owner": {"reputation": 195, "user_id": 4450862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3baf8b85714e220dcd3a6faba71beb9d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Geddert", "link": "https://stackoverflow.com/users/4450862/joel-geddert"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1485996272, "post_id": 41989891, "comment_id": 71161936, "body": "@MikeMB - around 5-10x slower, depending on data size (typically it&#39;s a few kB, but it can get up to a couple MB)"}, {"owner": {"reputation": 2204, "user_id": 2027606, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0d51131d464f104ef33e4126e729027?s=128&d=identicon&r=PG", "display_name": "Andrei R.", "link": "https://stackoverflow.com/users/2027606/andrei-r"}, "edited": false, "score": 0, "creation_date": 1486021077, "post_id": 41989891, "comment_id": 71169766, "body": "the real question is: how compiler knew it could replace <code>memcpy</code> with <code>memmove</code>? <code>assign</code> doesn&#39;t take ownership of passed array"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2204, "user_id": 2027606, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0d51131d464f104ef33e4126e729027?s=128&d=identicon&r=PG", "display_name": "Andrei R.", "link": "https://stackoverflow.com/users/2027606/andrei-r"}, "edited": false, "score": 2, "creation_date": 1486045564, "post_id": 41989891, "comment_id": 71185411, "body": "@AndreiR. The <code>move</code> in <code>memmove</code> isn&#39;t related to C++11 move semantics. Neither function modifies the source array."}], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 11, "last_activity_date": 1486686333, "last_edit_date": 1486686333, "creation_date": 1486466982, "answer_id": 42088737, "question_id": 41989891, "link": "https://stackoverflow.com/questions/41989891/stdvectoruint8-t-manually-copying-instead-of-calling-memcpy-when-c11-14-en/42088737#42088737", "title": "std::vector&lt;uint8_t&gt; manually copying instead of calling memcpy when C++11/14 enabled", "body": "<p>This was a GCC bug in the 4.9.2 release, see <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=64476\">PR 64476</a>. The difference between the default <code>-std=gnu++03</code> mode and <code>-std=c++14</code> is that for C++11 and later it's possible to have trivial types that aren't assignable (because they can have a deleted assignment operator) which causes the implementation of <code>std::uninitialized_copy</code> to take a different (slower) code path. The check for assignability was wrong, meaning that we took the slow path when we didn't need to.</p>\n\n<p>I fixed it two years ago for GCC 4.9.3, but your compiler is based on a snapshot made between the 4.9.2 and 4.9.3 releases and is a few weeks too old to have the fix.</p>\n\n<p>You could ask Linaro to update their GCC 4.9 compiler to 4.9.4, or at least to apply the patch fixing this bug.</p>\n"}], "owner": {"reputation": 195, "user_id": 4450862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3baf8b85714e220dcd3a6faba71beb9d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel Geddert", "link": "https://stackoverflow.com/users/4450862/joel-geddert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 42088737, "answer_count": 1, "score": 12, "last_activity_date": 1536615165, "creation_date": 1485983741, "last_edit_date": 1536615165, "question_id": 41989891, "link": "https://stackoverflow.com/questions/41989891/stdvectoruint8-t-manually-copying-instead-of-calling-memcpy-when-c11-14-en", "title": "std::vector&lt;uint8_t&gt; manually copying instead of calling memcpy when C++11/14 enabled", "body": "<p>Using gcc 4.9, cross-compiling for ARM using the Linaro toolchain, I have found the compiled result of <code>vector.assign()</code> changes when adding <code>-std=c++14</code>, in a way that creates significant performance problems.</p>\n\n<p>I have tried several different ways of doing this allocation + copy, but all of them have this performance problem as long as I'm using <code>std::vector</code> to do it. </p>\n\n<p>I can reproduce the problem with this toy example:</p>\n\n<p><strong>VectorTest.h</strong></p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;vector&gt;\n\nstruct VectorWrapper_t\n{\n    VectorWrapper_t(uint8_t const* pData, size_t length);\n    std::vector&lt;uint8_t&gt; data;\n};\n</code></pre>\n\n<p><strong>VectorTest.cpp</strong></p>\n\n<pre><code>#include \"VectorTest.h\"\n\nVectorWrapper_t::VectorWrapper_t(uint8_t const* pData, size_t length)\n{\n    data.assign(pData, pData + length);\n}\n</code></pre>\n\n<p>gcc flags:</p>\n\n<pre><code>-std=c++14 \\\n-mthumb -march=armv7-a -mtune=cortex-a9 \\\n-mlittle-endian -mfloat-abi=hard -mfpu=neon -Wa,-mimplicit-it=thumb \\\n-O2 -g\n</code></pre>\n\n<p>Viewing the assembly, I can see why: the original version (C++03, I'm assuming?) calls <code>memmove</code>, whereas the C++14 version instead adds an extra loop that it looks like is copying the data manually. Looking at the <code>.loc</code> tags gcc adds with <code>-fverbose-asm</code>, the instructions in this loop come from <code>stl_construct.h</code> and <code>stl_uninitialized.h</code>.</p>\n\n<p>Changing to gcc 5.2.1 (with C++14), it compiles nearly identically to the C++03 example, except with <code>memcpy</code> instead of <code>memmove</code>.</p>\n\n<p>I'm able to get around this problem by using <code>std::unique_ptr&lt;uint8_t[]&gt;</code> instead of a <code>vector</code> here. However, I would like to get to the bottom of this issue to figure out if other places using <code>vector</code>s could have performance problems and how to potentially fix them (updating to gcc 5.2 isn't practical).</p>\n\n<p>So my question is: <strong>Why does it compile differently under C++11/14?</strong></p>\n\n<p>For reference, <code>gcc --version</code> reports:<br>\n<code>arm-linux-gnueabihf-gcc (Linaro GCC 4.9-2014.12) 4.9.3 20141205 (prerelease)</code>.</p>\n\n<p>Here is the assembly gcc generated:</p>\n\n<pre><code># C++03, gcc 4.9\n\n    push    {r3, r4, r5, r6, r7, lr}    @\n    movs    r3, #0  @ tmp118,\n    mov r4, r0  @ this, this\n    str r3, [r0]    @ tmp118, MEM[(struct _Vector_impl *)this_1(D)]._M_start\n    mov r5, r2  @ length, length\n    str r3, [r0, #4]    @ tmp118, MEM[(struct _Vector_impl *)this_1(D)]._M_finish\n    str r3, [r0, #8]    @ tmp118, MEM[(struct _Vector_impl *)this_1(D)]._M_end_of_storage\n    cbnz    r2, .L19    @ length,\n    mov r0, r4  @, this\n    pop {r3, r4, r5, r6, r7, pc}    @\n.L19:\n    mov r0, r2  @, length\n    mov r6, r1  @ pData, pData\n    bl  _Znwj   @\n    mov r2, r5  @, length\n    mov r1, r6  @, pData\n    mov r7, r0  @ D.13516,\n    bl  memmove @\n    ldr r0, [r4]    @ D.13515, MEM[(struct vector *)this_1(D)].D.11902._M_impl._M_start\n    cbz r0, .L3 @ D.13515,\n    bl  _ZdlPv  @\n.L3:\n    add r5, r5, r7  @ D.13515, D.13516\n    str r7, [r4]    @ D.13516, MEM[(struct vector *)this_1(D)].D.11902._M_impl._M_start\n    str r5, [r4, #4]    @ D.13515, MEM[(struct vector *)this_1(D)].D.11902._M_impl._M_finish\n    mov r0, r4  @, this\n    str r5, [r4, #8]    @ D.13515, MEM[(struct vector *)this_1(D)].D.11902._M_impl._M_end_of_storage\n    pop {r3, r4, r5, r6, r7, pc}    @\n.L6:\n    ldr r0, [r4]    @ D.13515, MEM[(struct _Vector_base *)this_1(D)]._M_impl._M_start\n    cbz r0, .L5 @ D.13515,\n    bl  _ZdlPv  @\n.L5:\n    bl  __cxa_end_cleanup   @\n\n# C++14, gcc 4.9\n\n    push    {r3, r4, r5, r6, r7, lr}    @\n    movs    r3, #0  @ tmp157,\n    mov r6, r0  @ this, this\n    str r3, [r0]    @ tmp157, MEM[(struct _Vector_impl *)this_1(D)]._M_start\n    mov r5, r2  @ length, length\n    str r3, [r0, #4]    @ tmp157, MEM[(struct _Vector_impl *)this_1(D)]._M_finish\n    str r3, [r0, #8]    @ tmp157, MEM[(struct _Vector_impl *)this_1(D)]._M_end_of_storage\n    cbnz    r2, .L25    @ length,\n    mov r0, r6  @, this\n    pop {r3, r4, r5, r6, r7, pc}    @\n.L25:\n    mov r0, r2  @, length\n    mov r4, r1  @ pData, pData\n    bl  _Znwj   @\n    adds    r3, r4, r5  @ D.20345, pData, length\n    mov r7, r0  @ __result,\n    cmp r4, r3  @ pData, D.20345\n    ittt    ne\n    addne   r1, r4, #-1 @ ivtmp.76, pData,\n    movne   r3, r0  @ __result, __result\n    addne   r4, r0, r5  @ D.20346, __result, length\n    beq .L26    @,\n.L7:\n    ldrb    r2, [r1, #1]!   @ zero_extendqisi2  @ D.20348, MEM[base: _48, offset: 0]\n    cbz r3, .L6 @ __result,\n    strb    r2, [r3]    @ D.20348, MEM[base: __result_23, offset: 0B]\n.L6:\n    adds    r3, r3, #1  @ __result, __result,\n    cmp r3, r4  @ __result, D.20346\n    bne .L7 @,\n.L8:\n    ldr r0, [r6]    @ D.20346, MEM[(struct vector *)this_1(D)].D.18218._M_impl._M_start\n    cbz r0, .L5 @ D.20346,\n    bl  _ZdlPv  @\n.L5:\n    str r7, [r6]    @ __result, MEM[(struct vector *)this_1(D)].D.18218._M_impl._M_start\n    mov r0, r6  @, this\n    str r4, [r6, #4]    @ D.20346, MEM[(struct vector *)this_1(D)].D.18218._M_impl._M_finish\n    str r4, [r6, #8]    @ D.20346, MEM[(struct vector *)this_1(D)].D.18218._M_impl._M_end_of_storage\n    pop {r3, r4, r5, r6, r7, pc}    @\n.L26:\n    adds    r4, r0, r5  @ D.20346, __result, length\n    b   .L8 @\n.L11:\n    ldr r0, [r6]    @ D.20346, MEM[(struct _Vector_base *)this_1(D)]._M_impl._M_start\n    cbz r0, .L10    @ D.20346,\n    bl  _ZdlPv  @\n.L10:\n    bl  __cxa_end_cleanup   @\n\n# C++14, gcc 5.2\n\n    push    {r3, r4, r5, r6, r7, lr}    @\n    movs    r3, #0  @ tmp118,\n    mov r4, r0  @ this, this\n    str r3, [r0]    @ tmp118, MEM[(struct _Vector_impl *)this_1(D)]._M_start\n    str r3, [r0, #4]    @ tmp118, MEM[(struct _Vector_impl *)this_1(D)]._M_finish\n    str r3, [r0, #8]    @ tmp118, MEM[(struct _Vector_impl *)this_1(D)]._M_end_of_storage\n    cbnz    r2, .L19    @ length,\n    mov r0, r4  @, this\n    pop {r3, r4, r5, r6, r7, pc}    @\n.L19:\n    mov r0, r2  @, length\n    mov r6, r1  @ pData, pData\n    mov r5, r2  @ length, length\n    bl  _Znwj   @\n    mov r2, r5  @, length\n    mov r1, r6  @, pData\n    mov r7, r0  @ D.20824,\n    bl  memcpy  @\n    ldr r0, [r4]    @ D.20823, MEM[(struct vector *)this_1(D)].D.18751._M_impl._M_start\n    cbz r0, .L3 @ D.20823,\n    bl  _ZdlPv  @\n.L3:\n    add r5, r5, r7  @ D.20823, D.20824\n    str r7, [r4]    @ D.20824, MEM[(struct vector *)this_1(D)].D.18751._M_impl._M_start\n    str r5, [r4, #4]    @ D.20823, MEM[(struct vector *)this_1(D)].D.18751._M_impl._M_finish\n    mov r0, r4  @, this\n    str r5, [r4, #8]    @ D.20823, MEM[(struct vector *)this_1(D)].D.18751._M_impl._M_end_of_storage\n    pop {r3, r4, r5, r6, r7, pc}    @\n.L6:\n    ldr r0, [r4]    @ D.20823, MEM[(struct _Vector_base *)this_1(D)]._M_impl._M_start\n    cbz r0, .L5 @ D.20823,\n    bl  _ZdlPv  @\n.L5:\n    bl  __cxa_end_cleanup   @\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1485983742, "post_id": 41989858, "comment_id": 71157109, "body": "Look into <code>std::function</code>."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1485984934, "post_id": 41989858, "comment_id": 71157663, "body": "Yes, you can do that. That&#39;s exactly the sort of thing maps are for. Of course your syntax is all wrong, but you&#39;ll figure it out with some research and patience. It looks like you may need <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list?lq=1\">a good C++ book</a>. Remember, although they look similar, C++ is nothing like C# or Java, and it&#39;s so much more than C, so forget what you know about those languages."}], "answers": [{"tags": [], "owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "is_accepted": false, "score": 0, "last_activity_date": 1485985111, "creation_date": 1485985111, "answer_id": 41990257, "question_id": 41989858, "link": "https://stackoverflow.com/questions/41989858/mapping-functions-in-c/41990257#41990257", "title": "Mapping functions in C++", "body": "<p>yes, something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\n// change the signature int(int) to whatever you have in your functions, or course\ntypedef std::function&lt;int(int)&gt; FunctionType;\n\nint function1(int arg)\n{\n    return arg + 1;\n}\n\nint function2(int arg)\n{\n    return arg + 2;\n}\n\nint main(int argc, char* argv[])\n{\n    map&lt;string, FunctionType&gt; functionList;\n\n    functionList[\"one\"] = function1;\n    functionList[\"two\"] = function2;\n\n    cout &lt;&lt; functionList[\"one\"](1) &lt;&lt; endl;\n    cout &lt;&lt; functionList[\"two\"](2) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7502787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1955da082adb93473ddc63c705c33cf6?s=128&d=identicon&r=PG&f=1", "display_name": "JOBWELLDONE", "link": "https://stackoverflow.com/users/7502787/jobwelldone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 323, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485985111, "creation_date": 1485983608, "question_id": 41989858, "link": "https://stackoverflow.com/questions/41989858/mapping-functions-in-c", "title": "Mapping functions in C++", "body": "<p>I have a command router that takes evaluates JSON data from the web into C/C++ application functions. I always like to try new things so I wanted to convert the router from C to C++ because I enjoy OOP. I was wondering if you can use <code>std::map</code> to map strings to function calls.</p>\n\n<p>Instead of doing this</p>\n\n<pre><code>enum myCommands {\n   cmdGetUserName,\n   cmdGetUserId\n};\nstruct cmdRoutes cmdList[] = {\n   {\"getUserName\", cmdGetUserName},\n   {\"getUserId\", cmdGetUserId} \n}\nvoid processCmd(json jsonObject)\n{\n    int cmd = getCmd(jsonObject.cmd, cmdList);\n    switch(cmd){\n       case cmdGetUserName:\n       case cmdGetUserId:\n       ...etc\n    }\n}\n</code></pre>\n\n<p>Can I instead use map to avoid all that?</p>\n\n<pre><code>std:map&lt;string, AppStatus&gt; CmdMap;\nCmdMap[\"getUserName\"] = MyClass.GetUserName;\n\n// now simply..\nCmdMap[jsonObject.cmd](...arguments...);\n</code></pre>\n"}, {"tags": ["c++", "iomanip", "setw"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7191651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63705994c3aa2de55d18fce23a0514b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Thomsen", "link": "https://stackoverflow.com/users/7191651/aaron-thomsen"}, "edited": false, "score": 0, "creation_date": 1485984078, "post_id": 41989932, "comment_id": 71157259, "body": "Thanks, it works. This crossed my mind briefly, but the answers I found said the only difference between &#39;\\n&#39; and endl was that endl cleared the output buffer. Why does this work?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1485984211, "post_id": 41989932, "comment_id": 71157312, "body": "@JesperJuhl I&#39;m still <a href=\"http://coliru.stacked-crooked.com/a/efd69a553d1eaba6\" rel=\"nofollow noreferrer\">investigating about that</a>. If you have a good one feel free to chime in."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1485984365, "post_id": 41989932, "comment_id": 71157387, "body": "Perhaps the fact that &quot;Points Scored\\n&quot; is exactly 14=20-6 characters long should ring a bell."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 1, "last_activity_date": 1485983909, "creation_date": 1485983909, "answer_id": 41989932, "question_id": 41989815, "link": "https://stackoverflow.com/questions/41989815/automatic-spacing-with-iomanip/41989932#41989932", "title": "Automatic spacing with iomanip", "body": "<pre><code>cout &lt;&lt; left &lt;&lt; setw(20) &lt;&lt; \"Name\" &lt;&lt; setw(20) &lt;&lt; \"Number\" &lt;&lt; setw(20) &lt;&lt; \"Points Scored\" \n     &lt;&lt; endl;\n  // ^^^^^^^^\n</code></pre>\n\n<p>instead of using <code>'\\n'</code> fixes that.</p>\n\n<p>See the <a href=\"http://coliru.stacked-crooked.com/a/f1f1c776543a4db7\" rel=\"nofollow noreferrer\">Live Demo</a>.</p>\n"}], "owner": {"reputation": 45, "user_id": 7191651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63705994c3aa2de55d18fce23a0514b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Thomsen", "link": "https://stackoverflow.com/users/7191651/aaron-thomsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 41989932, "answer_count": 1, "score": 1, "last_activity_date": 1485984754, "creation_date": 1485983440, "last_edit_date": 1485984754, "question_id": 41989815, "link": "https://stackoverflow.com/questions/41989815/automatic-spacing-with-iomanip", "title": "Automatic spacing with iomanip", "body": "<p>For the following code:</p>\n\n<pre><code>cout &lt;&lt; left &lt;&lt; setw(20) &lt;&lt; \"Example Header\\n\";\ncout &lt;&lt; setw(60) &lt;&lt; setfill('-') &lt;&lt; \"-\" &lt;&lt; endl;\n</code></pre>\n\n<p>The second line (with the dashes) is indented by 5 spaces for some reason. I initially thought that something was automatically getting tabbed, but I can find no reason for why it would to that. No matter what goes on the second line, six spaces are automatically put in that I cannot remove. Even though a simple work around would be for me to just fill the second line with spaces, I am still curious to know why my program is putting these spaces in. </p>\n"}, {"tags": ["c++", "msbuild", "veracode"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1485982965, "post_id": 41989623, "comment_id": 71156725, "body": "Change /Zl to some other debug setting in the debug configuration or create an new configuration without /Zl  see also <a href=\"https://msdn.microsoft.com/en-us/library/958x11bc.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/958x11bc.aspx</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1485994177, "post_id": 41989623, "comment_id": 71161342, "body": "Static code analyzers are not generally impressed about having to verify a debug build.  They care a lot more about the code you are going to ship to your customer.  The release build."}], "answers": [{"tags": [], "owner": {"reputation": 11030, "user_id": 656346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCIys.png?s=128&g=1", "display_name": "seva titov", "link": "https://stackoverflow.com/users/656346/seva-titov"}, "is_accepted": false, "score": 0, "last_activity_date": 1485993422, "creation_date": 1485993422, "answer_id": 41992071, "question_id": 41989623, "link": "https://stackoverflow.com/questions/41989623/how-do-i-turn-off-edit-and-continue-for-veracode-through-msbuild/41992071#41992071", "title": "How do I turn off Edit and Continue (for Veracode) through msbuild", "body": "<p>There are two ways to do this. The easiest is to build your project in Release configuration. The default Release properties are setup to build with normal debug information (i.e. not an edit-and-continue).</p>\n\n<p>Another solution, if you have to have a Debug binaries without edit-and-continue, you will have to modify all your projects. Add the following snippet into all your projects, somewhere close to the end of the .vcxproj file, after <code>Microsoft.Cpp.props</code> is imported:</p>\n\n<pre><code>&lt;ItemDefinitionGroup&gt;\n  &lt;ClCompile&gt;\n    &lt;DebugInformationFormat&gt;ProgramDatabase&lt;/DebugInformationFormat&gt;\n  &lt;/ClCompile&gt;\n&lt;/ItemDefinitionGroup&gt;\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 270779, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7fcce4eed5196a07162c16d77b9d2f00?s=128&d=identicon&r=PG", "display_name": "Coop", "link": "https://stackoverflow.com/users/270779/coop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485993422, "creation_date": 1485982623, "last_edit_date": 1495539930, "question_id": 41989623, "link": "https://stackoverflow.com/questions/41989623/how-do-i-turn-off-edit-and-continue-for-veracode-through-msbuild", "title": "How do I turn off Edit and Continue (for Veracode) through msbuild", "body": "<p>I know the question does not make complete sense, as I'm not building inside of Visual Studio. I'm trying to submit my binary for a static analysis by <a href=\"http://www.veracode.com/\" rel=\"nofollow noreferrer\">Veracode</a>, and I build using <code>msbuild</code>:</p>\n\n<pre><code>msbuild coop.sln /p:Configuration=Debug /p:Platform=x64 /p:LinkIncremental=false\n</code></pre>\n\n<p>I can turn this off in my Visual Studio environment by going to Tools > Options > Debugging > Edit and Continue, and then unchecking the 'Enabled Edit and Continue.' However, this doesn't seem to affect the solution file.</p>\n\n<p>I get a warning from Veracode about having used Edit &amp; Continue when I upload the resulting binary. I feel like there must be an option to disable that configuration through <code>msbuild</code>.</p>\n\n<p>A couple of related posts that do not completely address this:</p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/7yty6a48.aspx\" rel=\"nofollow noreferrer\">How to: Enable and Disable Edit and Continue</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2050162/is-there-a-way-to-completely-disable-edit-and-continue\">Is there a way to <em>completely</em> disable Edit and Continue?</a></li>\n</ul>\n\n<p>Any ideas for how to disable Edit and Continue through <code>msbuild</code>?</p>\n"}, {"tags": ["c++", "c", "dll", "static-linking", "dynamic-linking"], "answers": [{"comments": [{"owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "edited": false, "score": 0, "creation_date": 1485983832, "post_id": 41989826, "comment_id": 71157154, "body": "Thank you! By &quot;standard library&quot; do you mean the runtime library, or do you imply that this is included in the standard library?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "edited": false, "score": 1, "creation_date": 1485983911, "post_id": 41989826, "comment_id": 71157182, "body": "Neither C nor C++ standards say anything about a runtime library. malloc and free are part of the standard libraries in both languages."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 4, "last_activity_date": 1485984129, "last_edit_date": 1485984129, "creation_date": 1485983490, "answer_id": 41989826, "question_id": 41989605, "link": "https://stackoverflow.com/questions/41989605/what-problems-can-linking-both-static-and-dynamic-libraries-into-the-same-execut/41989826#41989826", "title": "What problems can linking both static and dynamic libraries into the same executable cause?", "body": "<p>Let's say that A.dll links statically with standard library version 1.0. And it has  a function that looks like this:</p>\n\n<pre><code>  char * f() {\n     return malloc( 100 );   // uses malloc 1.0\n  }\n</code></pre>\n\n<p>Now lets say there is another library B.dll that links dynamically with A.dll and statically with standard library version 1.1. It has  a function that looks like this:</p>\n\n<pre><code>   void g() {\n      char * p = f();  // returns the result of malloc 1.0\n      free( p );   // uses free 1.1\n   }\n</code></pre>\n\n<p>You then probably (I say \"probably\" because none of this is standardised) have a pointer that was dynamically allocated with standard library 1.0, but that was freed with version 1.1. This can often lead to severe and hard to diagnose problems.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1485984946, "post_id": 41990140, "comment_id": 71157672, "body": "There is no such thing as statically or dynamically compiled. And no, you would not have to recompile the .exe - you might have to re-link it."}], "tags": [], "owner": {"reputation": 216, "user_id": 5270951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/912e784fefa1d9205673924a82d8dc1b?s=128&d=identicon&r=PG", "display_name": "jimmytt", "link": "https://stackoverflow.com/users/5270951/jimmytt"}, "is_accepted": false, "score": 1, "last_activity_date": 1485984670, "creation_date": 1485984670, "answer_id": 41990140, "question_id": 41989605, "link": "https://stackoverflow.com/questions/41989605/what-problems-can-linking-both-static-and-dynamic-libraries-into-the-same-execut/41990140#41990140", "title": "What problems can linking both static and dynamic libraries into the same executable cause?", "body": "<p>Because statically compiled dlls are compiled before runtime, if you need to change anything (say functions), you would have to re-compile the .exe. Statically compiled dlls are also larger than dynamically linked dlls. Dynamically linked dlls are linked at runtime, so every program has access to them because the all the functions have special place in memory, without having multiple copies of them (like when they are statically compiled). Hope this helps.</p>\n"}], "owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 1, "accepted_answer_id": 41989826, "answer_count": 2, "score": 2, "last_activity_date": 1485984670, "creation_date": 1485982558, "question_id": 41989605, "link": "https://stackoverflow.com/questions/41989605/what-problems-can-linking-both-static-and-dynamic-libraries-into-the-same-execut", "title": "What problems can linking both static and dynamic libraries into the same executable cause?", "body": "<p>I was asked this question on a job interview today. Unfortunately, I am not sure that I have reproduced it here correctly. I just remember, that I did not understand it very well. The question might have been </p>\n\n<blockquote>\n  <p>\"What problems can loading statically and dynamically compiled dlls\n  cause?\"</p>\n</blockquote>\n\n<p>I did not know the answer, but the interviewer told me that <strong>there are at least two main problems</strong>:</p>\n\n<ol>\n<li><p>The runtime library: there can be some incompatible allocations and de-allocations of memory.</p></li>\n<li><p>Unfortunately here we got interrupted and we did not get back to this question.</p></li>\n</ol>\n\n<p>Please, could you help me understand what this question might have been, as well as what is the answer?</p>\n\n<p>I also did not understand the first point very well. I thought there can be only one <code>malloc</code> in a program, am I wrong?</p>\n"}, {"tags": ["c++", "floating-point", "standards", "floating-point-comparison"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 28, "creation_date": 1485982562, "post_id": 41989570, "comment_id": 71156464, "body": "Not if your float is a NaN."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 1, "creation_date": 1486006730, "post_id": 41989570, "comment_id": 71164564, "body": "You probably want to modify this to &#39;non-NaN float values&#39; to exclude the corner-case?"}, {"owner": {"reputation": 2815, "user_id": 4350586, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/IvPNx.png?s=128&g=1", "display_name": "Dmitry Grigoryev", "link": "https://stackoverflow.com/users/4350586/dmitry-grigoryev"}, "edited": false, "score": 2, "creation_date": 1486030180, "post_id": 41989570, "comment_id": 71175127, "body": "No, <b>at most one</b> of those is guaranteed to be true."}], "answers": [{"comments": [{"owner": {"reputation": 54636, "user_id": 1336654, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b1fcddf43425d951bb5dafef53563d45?s=128&d=identicon&r=PG", "display_name": "Jeppe Stig Nielsen", "link": "https://stackoverflow.com/users/1336654/jeppe-stig-nielsen"}, "edited": false, "score": 0, "creation_date": 1485992364, "post_id": 41989607, "comment_id": 71160745, "body": "Will something like <code>0.0 &#47; 0.0</code> not get <b>a</b> NaN as well?"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 54636, "user_id": 1336654, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b1fcddf43425d951bb5dafef53563d45?s=128&d=identicon&r=PG", "display_name": "Jeppe Stig Nielsen", "link": "https://stackoverflow.com/users/1336654/jeppe-stig-nielsen"}, "edited": false, "score": 0, "creation_date": 1485993593, "post_id": 41989607, "comment_id": 71161143, "body": "@JeppeStigNielsen yes, that&#39;s a way to write it without relying on any header."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 54636, "user_id": 1336654, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b1fcddf43425d951bb5dafef53563d45?s=128&d=identicon&r=PG", "display_name": "Jeppe Stig Nielsen", "link": "https://stackoverflow.com/users/1336654/jeppe-stig-nielsen"}, "edited": false, "score": 6, "creation_date": 1485999733, "post_id": 41989607, "comment_id": 71162866, "body": "@JeppeStigNielsen: Depending on your FPU settings that might produce an FPU exception instead of a NaN."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1486019888, "post_id": 41989607, "comment_id": 71169184, "body": "Is the difference of behavior of GCC WRT C and C++ documented anywhere? Is it something related to <a href=\"https://gcc.gnu.org/wiki/FAQ#PR323\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1486027040, "post_id": 41989607, "comment_id": 71173046, "body": "@Ruslan Yes, the last part of this answer describes exactly the same problem as the first part as the FAQ entry you linked to. Joseph Myers said when he implemented <code>-fexcess-precision=standard</code> for C that C++ didn&#39;t support it yet: <a href=\"https://gcc.gnu.org/ml/gcc-patches/2008-11/msg00105.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/ml/gcc-patches/2008-11/msg00105.html</a> . The second part of the FAQ affects how floating-point <b>expressions</b> are computed, so it does not handicap the comparison of <b>lvalues</b>. In any case, with GCC, <code>-ffp-contract=off</code> prevents the issue from the second part of the FAQ."}, {"owner": {"reputation": 333, "user_id": 995368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hjdrh.png?s=128&g=1", "display_name": "Xavier Nicollet", "link": "https://stackoverflow.com/users/995368/xavier-nicollet"}, "edited": false, "score": 0, "creation_date": 1486596308, "post_id": 41989607, "comment_id": 71419126, "body": "It&#39;s worth pointing the C++ faq about comparisons, which tells the same story: <a href=\"http://www.cs.technion.ac.il/users/yechiel/c++-faq/floating-point-arith.html\" rel=\"nofollow noreferrer\">cs.technion.ac.il/users/yechiel/c++-faq/&hellip;</a>"}], "tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": true, "score": 75, "last_activity_date": 1485983314, "last_edit_date": 1495542843, "creation_date": 1485982570, "answer_id": 41989607, "question_id": 41989570, "link": "https://stackoverflow.com/questions/41989570/in-c-is-exactly-one-of-and-guaranteed-to-be-true-on-floats/41989607#41989607", "title": "In C++, is exactly one of &lt;, == and &gt; guaranteed to be true on floats?", "body": "<p>No.</p>\n\n<p>It's enough for either <code>a</code> or <code>b</code> to be <code>NaN</code> for each of <code>a &lt; b</code>, <code>a == b</code> and <code>a &gt; b</code> to be false.</p>\n\n<p>If both <code>a</code> and <code>b</code> are non-NaN then exactly one of <code>a &lt; b</code>, <code>a == b</code> or <code>a &gt; b</code> has to be true.</p>\n\n<p>In complement, this <a href=\"https://stackoverflow.com/a/16691341/139746\">answer</a> tells you how you can get <strong>a</strong> NaN value in C++ (there are several NaN values, that can be distinguished by inspecting their representations; they are all different from each other because NaN is never equal to anything,) and how you can test whether a value is a NaN (an idiomatic test to see if a variable <code>x</code> is a NaN is <code>x != x</code>, and indeed <code>std::isnan()</code> is often implemented this way, but some programmers who will have to read your code may be confused by it).</p>\n\n<p>And then, if <code>a</code> and <code>b</code> are the results of previous computations, there is the problem of excess precision. See this <a href=\"https://hal.archives-ouvertes.fr/hal-00128124/document\" rel=\"nofollow noreferrer\">article</a> for a discussion in C. The C99 standard solved the problem by making rules explicit for where excess precision could and could not occur, but despite C++ more or less inheriting these rules by deferring to the C standard for the definition of <code>FLT_EVAL_METHOD</code> in <code>cfloat</code>, in practice C compilers take the rules more seriously than C++ compilers. For instance GCC implements the rules for C when compiling with <code>-std=c99</code>, and in this context you can rely on the property to hold, but as of this writing GCC does not implement these rules when used as a C++ compiler.</p>\n"}], "owner": {"reputation": 593, "user_id": 6369704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8e624a161ecebad70bbf2ed955db9a?s=128&d=identicon&r=PG", "display_name": "MacMillan", "link": "https://stackoverflow.com/users/6369704/macmillan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3669, "favorite_count": 6, "accepted_answer_id": 41989607, "answer_count": 1, "score": 46, "last_activity_date": 1486006791, "creation_date": 1485982423, "last_edit_date": 1486006791, "question_id": 41989570, "link": "https://stackoverflow.com/questions/41989570/in-c-is-exactly-one-of-and-guaranteed-to-be-true-on-floats", "title": "In C++, is exactly one of &lt;, == and &gt; guaranteed to be true on floats?", "body": "<p>In C++, do I have a guarantee that, for any given <code>float a</code> and <code>float b</code>, one and only one of <code>a &lt; b</code>, <code>a == b</code> and <code>a &gt; b</code> is true?</p>\n\n<p>If this differs between compilers and platforms, I am interested in Visual C++ on x86.</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 6557, "user_id": 2495795, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/13606de0b736d7191e2cf2bfea1d4fda?s=128&d=identicon&r=PG", "display_name": "BufBills", "link": "https://stackoverflow.com/users/2495795/bufbills"}, "edited": false, "score": 0, "creation_date": 1485982515, "post_id": 41989502, "comment_id": 71156426, "body": "which is doable. In each iteration, you just need to return the optimal value till now.  Then return to its caller."}], "answers": [{"tags": [], "owner": {"reputation": 698, "user_id": 5571136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Pp7U.jpg?s=128&g=1", "display_name": "Muhammad Nizami", "link": "https://stackoverflow.com/users/5571136/muhammad-nizami"}, "is_accepted": true, "score": 0, "last_activity_date": 1485983165, "creation_date": 1485983165, "answer_id": 41989742, "question_id": 41989502, "link": "https://stackoverflow.com/questions/41989502/program-wtih-recursive-function-and-without-global-variable-c/41989742#41989742", "title": "Program wtih recursive function and without global variable - C++", "body": "<p>It can be done by return the minimum value at each recursion call. The comparison operation then will be done in non-leaf nodes. In the original code, the comparison operation is done in leaf nodes (base case). The new function looks like this:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;climits&gt;\nusing namespace std;\n\nint a[4][4] = {10, 10, 1, 10, 10, 10, 1, 10, 10, 1 ,10, 10, 0, 10, 10, 10};\nint k=2;         //column start number\n\nbool can_go(int x, int y){\n    if(x&lt;0 || x&gt;3 || y&lt;0 || y&gt;3)\n        return false;\n    return true;\n}\n\nint min_path(int x, int y, int steps, int result){\n    if(x==3 &amp;&amp; steps==3){\n        return result;\n    } \n    else{\n        int min = INT_MAX;\n        if(can_go(x+1,y)){\n            int b = min_path(x+1,y,steps+1,result+a[x+1][y]);\n            if (b&lt;min)\n                min=b;\n        }\n        if(can_go(x+1,y-1)){\n            int b = min_path(x+1,y-1,steps+1,result+a[x+1][y-1]);\n            if (b&lt;min)\n                min=b;\n        }\n        if(can_go(x+1,y+1)){\n            int b = min_path(x+1,y+1,steps+1,result+a[x+1][y+1]);            \n            if (b&lt;min)\n                min=b;\n        }\n        return min;\n    }\n}\n\nint go(){\n     return min_path(0,k,0,a[0][k]);\n}\n\nint main(){\n    cout &lt;&lt; go();\n} \n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7111245, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-L86LSZrkHsg/AAAAAAAAAAI/AAAAAAAAACU/JG89IfkBNaw/photo.jpg?sz=128", "display_name": "Euro Pe", "link": "https://stackoverflow.com/users/7111245/euro-pe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 41989742, "answer_count": 1, "score": -2, "last_activity_date": 1485983165, "creation_date": 1485982203, "question_id": 41989502, "link": "https://stackoverflow.com/questions/41989502/program-wtih-recursive-function-and-without-global-variable-c", "title": "Program wtih recursive function and without global variable - C++", "body": "<p>I have a program which looks for path in 2-D array which \"cost\" is the lowest. Here's an example (start: a[0][2] -> end: a[3][0]):</p>\n\n<pre><code>10 10 1 10 \n10 10 1 10 \n10 1 10 10 \n0 10 10 10 \n\n1 -&gt; 1 -&gt; 1 -&gt; 0\n</code></pre>\n\n<p>In my case, I need to go from row number 0 to row number 3 doing 3 steps (so three directions are available). You can choose column start number.</p>\n\n<p>The problem is, I can't do that without using global variable (min2). I think I should use \"int\" not \"void\" recursive function then.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;climits&gt;\nusing namespace std;\n\nint a[4][4] = {10, 10, 1, 10, 10, 10, 1, 10, 10, 1 ,10, 10, 0, 10, 10, 10};\nint min2=INT_MAX;\nint k=2;         //column start number\n\nbool can_go(int x, int y){\n    if(x&lt;0 || x&gt;3 || y&lt;0 || y&gt;3)\n        return false;\n    return true;\n}\n\nvoid min_path(int x, int y, int steps, int result){\n    if(x==3 &amp;&amp; steps==3){\n        if(result&lt;min2)\n            min2=result;\n    } \n    else{\n        if(can_go(x+1,y)){\n            min_path(x+1,y,steps+1,result+a[x+1][y]);\n        }\n        if(can_go(x+1,y-1)){\n            min_path(x+1,y-1,steps+1,result+a[x+1][y-1]);\n        }\n        if(can_go(x+1,y+1)){\n            min_path(x+1,y+1,steps+1,result+a[x+1][y+1]);\n        }\n    }\n}\n\nint go(){\n     min_path(0,k,0,a[0][k]);\n     return min2;\n}\n\nint main(){\n    cout &lt;&lt; go();\n} \n</code></pre>\n"}, {"tags": ["c++", "string", "for-loop", "matrix", "segmentation-fault"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1485982034, "post_id": 41989395, "comment_id": 71156146, "body": "<code>int i = 1</code> looks fishy. Indexing starts at <code>0</code> in c++."}, {"owner": {"reputation": 52, "user_id": 7426395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Q52s.png?s=128&g=1", "display_name": "Kuzniarz", "link": "https://stackoverflow.com/users/7426395/kuzniarz"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485982372, "post_id": 41989395, "comment_id": 71156346, "body": "usually yes, but in this case i do not need to overwrite the value on the 0 index"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1485982639, "post_id": 41989395, "comment_id": 71156514, "body": "What is <code>i*1</code> for?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485982653, "post_id": 41989395, "comment_id": 71156523, "body": "Can you give us <a href=\"http://coliru.stacked-crooked.com/a/8d02ea77d52b374b\" rel=\"nofollow noreferrer\">something compilable</a>  please. In other words a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is required to ask here."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1485982709, "post_id": 41989395, "comment_id": 71156566, "body": "What do you believe <code>=&gt;</code> means?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485983297, "post_id": 41989395, "comment_id": 71156895, "body": "Ask yourself if it is possible for <code>i</code> or <code>j</code> to ever be less than 0."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1485983299, "post_id": 41989395, "comment_id": 71156896, "body": "Shouldn&#39;t it be std::max_element(ws_cases, ws_cases + <b>3</b> );?"}, {"owner": {"reputation": 52, "user_id": 7426395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Q52s.png?s=128&g=1", "display_name": "Kuzniarz", "link": "https://stackoverflow.com/users/7426395/kuzniarz"}, "edited": false, "score": 0, "creation_date": 1485984001, "post_id": 41989395, "comment_id": 71157221, "body": "yes, changed it in the code below !"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1486055798, "post_id": 41989395, "comment_id": 71192441, "body": "You have an out-of-range dereference <code>matrix[i+1]</code> in the first iteration, when <code>i</code> is <code>m_seq2.size()-1</code>.  And other errors."}], "answers": [{"comments": [{"owner": {"reputation": 52, "user_id": 7426395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Q52s.png?s=128&g=1", "display_name": "Kuzniarz", "link": "https://stackoverflow.com/users/7426395/kuzniarz"}, "edited": false, "score": 0, "creation_date": 1485985033, "post_id": 41990163, "comment_id": 71157711, "body": "i used the gdb debugger and it seems that the error happens at &#39;ws_cases[0] = matrix[i+1][j+1] + w(m_seq1[j],m_seq2[i]);&#39;"}, {"owner": {"reputation": 170, "user_id": 4543427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549e4e00ae03b14d27637074b14e6c4d?s=128&d=identicon&r=PG&f=1", "display_name": "Sweekritee Singh", "link": "https://stackoverflow.com/users/4543427/sweekritee-singh"}, "reply_to_user": {"reputation": 52, "user_id": 7426395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Q52s.png?s=128&g=1", "display_name": "Kuzniarz", "link": "https://stackoverflow.com/users/7426395/kuzniarz"}, "edited": false, "score": 0, "creation_date": 1485986961, "post_id": 41990163, "comment_id": 71158645, "body": "Hi, as your code suggests, initially u are   assigning matrix[0][i] = i*1;, but then at the loop start only, you are assigning    using ws_cases[0] = matrix[i+1][j+1] + w(m_seq1[j],m_seq2[i]);  if i = 1 j= 1(say), matrix[2][2] is not initialsed hence may contain garbage, which may lead segmantation fault or code dump"}], "tags": [], "owner": {"reputation": 170, "user_id": 4543427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549e4e00ae03b14d27637074b14e6c4d?s=128&d=identicon&r=PG&f=1", "display_name": "Sweekritee Singh", "link": "https://stackoverflow.com/users/4543427/sweekritee-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1485987320, "last_edit_date": 1485987320, "creation_date": 1485984761, "answer_id": 41990163, "question_id": 41989395, "link": "https://stackoverflow.com/questions/41989395/segmentation-fault-while-working-with-decrement-in-for-loop/41990163#41990163", "title": "Segmentation fault while working with decrement in for loop", "body": "<p>you have declared j as unsigned int, and suppose m_seq1.size() = 0, in this case, \nm_seq1.size() -1= 0-1=-1 ie; unsigned int j = -1, which can lead to run time segmentation fault.</p>\n\n<pre><code> for (unsigned int j = m_seq1.size()-1;j =&gt; 0; j--) //.j is declared unsigned, hence it must not be negative\n /* if m_seq1.size() = 0, then j = -1 : error\n</code></pre>\n\n<p>Also \nAs your code suggests, initially u are   assigning matrix[0][i] = i*1;, but then at the loop start only, you are assigning    using ws_cases[0] = matrix[i+1][j+1] + w(m_seq1[j],m_seq2[i]);  if i = 1 j= 1(say), matrix[2][2] is not initialised hence may contain garbage, which may lead segmantation fault or code dump</p>\n"}, {"tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 0, "last_activity_date": 1485988724, "creation_date": 1485988724, "answer_id": 41991151, "question_id": 41989395, "link": "https://stackoverflow.com/questions/41989395/segmentation-fault-while-working-with-decrement-in-for-loop/41991151#41991151", "title": "Segmentation fault while working with decrement in for loop", "body": "<p>I'm not familiar with the Needleman-Wunsch algorithm, but after a quick look at the code you posted, the segmentation fault at the line</p>\n\n<pre><code>ws_cases[0] = matrix[i+1][j+1] + w(m_seq1[j],m_seq2[i]);\n</code></pre>\n\n<p>Happens at the very first iteration of the loops, when <code>j = m_seq1.size()-1</code>, <code>i = m_seq2.size()-1</code> and so <code>i + 1</code> and <code>j + 1</code> are out of bounds. Moreover, iterating in that way, those values are uninitialized.</p>\n\n<p>Also, looking at the <a href=\"https://en.wikipedia.org/wiki/Needleman%E2%80%93Wunsch_algorithm\" rel=\"nofollow noreferrer\">wiki page</a>, it seems that you should put the space before your strings:</p>\n\n<pre><code>std::string m_seq1{\" \" + seq1};  \nstd::string m_seq2{\" \" + seq2};\n</code></pre>\n"}], "owner": {"reputation": 52, "user_id": 7426395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Q52s.png?s=128&g=1", "display_name": "Kuzniarz", "link": "https://stackoverflow.com/users/7426395/kuzniarz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 41991151, "answer_count": 2, "score": -1, "last_activity_date": 1485988724, "creation_date": 1485981828, "last_edit_date": 1485984747, "question_id": 41989395, "link": "https://stackoverflow.com/questions/41989395/segmentation-fault-while-working-with-decrement-in-for-loop", "title": "Segmentation fault while working with decrement in for loop", "body": "<p>I'm trying to implement a function in c++ that calculates a score matrix with the Needleman-Wunsch algorithm in reverse but I'm getting a segmentation fault 11.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nint w(char x, char y){\n        if (x == y){return 0;\n        }else{return 1;\n        }\n    };\n\nvoid compute_SM(std::string const &amp; seq1, std::string const &amp; seq2)\n{\n\n    int ws_cases[3];\n\n    std::string m_seq1 = seq1 + \" \";\n    std::string m_seq2 = seq2 + \" \";\n\n    std::vector&lt;int&gt; rows(m_seq1.size(),0);\n    std::vector&lt;std::vector&lt;int&gt;&gt; matrix(m_seq2.size(), rows);\n\n    for (int i = 1; i&lt; m_seq1.size(); i++){rows[i] = i*1;};\n    for (int i = 1; i&lt; m_seq2.size(); i++){matrix[0][i] = i*1;};\n\n    for (unsigned int j = m_seq1.size()-1;j &gt;= 1; j--){\n        for (unsigned int i = m_seq2.size()-1;i  &gt;= 1; i--){\n            ws_cases[0] = matrix[i+1][j+1] + w(m_seq1[j],m_seq2[i]);\n            ws_cases[1] = matrix[i+1][j] + 1;\n            ws_cases[2] = matrix[i][j+1] + 1;\n            matrix[i][j] = *std::max_element(ws_cases, ws_cases+3);\n        }\n    }\n\n}\n\nint main(int argc, char** argv){\n    compute_SM(\"BANANAS\", \"BANDS\");\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "string"], "comments": [{"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1485983395, "post_id": 41989376, "comment_id": 71156939, "body": "and must be sure, that std::string pointer is taken, exist to the last moment of algorithm using pointer  (often error: pointer from variable on the stack)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1485988985, "post_id": 41989376, "comment_id": 71159568, "body": "or make copies of the strings"}, {"owner": {"reputation": 29, "user_id": 6436864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/848fb183cb1c97b423938a62d14dc463?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Sage", "link": "https://stackoverflow.com/users/6436864/kai-sage"}, "edited": false, "score": 0, "creation_date": 1486069655, "post_id": 41989376, "comment_id": 71200067, "body": "<code>const_cast</code> doesn&#39;t work for <code>const char*</code> to <code>char* const</code>. How will making copies of the string help?"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 6436864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/848fb183cb1c97b423938a62d14dc463?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Sage", "link": "https://stackoverflow.com/users/6436864/kai-sage"}, "is_accepted": false, "score": 1, "last_activity_date": 1488909704, "creation_date": 1488909704, "answer_id": 42655167, "question_id": 41989376, "link": "https://stackoverflow.com/questions/41989376/convert-from-string-array-to-char-const/42655167#42655167", "title": "Convert from string array to char* const", "body": "<p>I was able to answer my own question. I had to convert the <code>const char*</code> to a <code>char*</code>.</p>\n\n<p>However, since C++ doesn't allow conversion from <code>const char*</code> to <code>char*</code>, I had to create an <code>extern C</code> function. I converted the string <code>s</code> to a C-string (as a <code>const char*</code>), passed it to the <code>extern</code> C function. Within the C function I could then convert it from a <code>const char*</code> to a <code>char*</code> and subsequently pass it to <code>execvp()</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 6436864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/848fb183cb1c97b423938a62d14dc463?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Sage", "link": "https://stackoverflow.com/users/6436864/kai-sage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488909704, "creation_date": 1485981755, "last_edit_date": 1485982095, "question_id": 41989376, "link": "https://stackoverflow.com/questions/41989376/convert-from-string-array-to-char-const", "title": "Convert from string array to char* const", "body": "<p>I'm looking for a way to call execvp() in a C++ program that uses string arrays. So if, for example, I have an array of strings,</p>\n\n<pre><code>s[0] = \"ls\";\ns[1] = \"-l\";\n</code></pre>\n\n<p>then, <code>s[i].c_str()</code> converts it to <code>const char*</code>. However, I need <code>s[i]</code> converted to a <code>char* const</code> to pass it to <a href=\"http://man7.org/linux/man-pages/man3/exec.3.html\" rel=\"nofollow noreferrer\"><code>execvp()</code></a>. Is there any way to do this in C++?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1485981530, "post_id": 41989298, "comment_id": 71155863, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1485983056, "post_id": 41989298, "comment_id": 71156771, "body": "From the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> your were told to read: <i>&quot;Write a title that summarizes the specific problem&quot;</i> Actual title: <i>&quot;Why is my output wrong?&quot;</i> Come on..."}, {"owner": {"reputation": 15, "user_id": 7502631, "user_type": "registered", "profile_image": "https://graph.facebook.com/1192309774156597/picture?type=large", "display_name": "Alex Chapman", "link": "https://stackoverflow.com/users/7502631/alex-chapman"}, "edited": false, "score": 0, "creation_date": 1486049793, "post_id": 41989298, "comment_id": 71188475, "body": "apologies senpai."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7502631, "user_type": "registered", "profile_image": "https://graph.facebook.com/1192309774156597/picture?type=large", "display_name": "Alex Chapman", "link": "https://stackoverflow.com/users/7502631/alex-chapman"}, "edited": false, "score": 0, "creation_date": 1486051005, "post_id": 41989413, "comment_id": 71189306, "body": "would it be less constructive if i just placed all the calculations i want to do in one module so that they are all in the same scope, maintaining my want to have them not be global, and i can still call the module in main?"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 15, "user_id": 7502631, "user_type": "registered", "profile_image": "https://graph.facebook.com/1192309774156597/picture?type=large", "display_name": "Alex Chapman", "link": "https://stackoverflow.com/users/7502631/alex-chapman"}, "edited": false, "score": 0, "creation_date": 1486056220, "post_id": 41989413, "comment_id": 71192683, "body": "@AlexChapman I updated to show an alternative to all global variables."}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1486056192, "last_edit_date": 1486056192, "creation_date": 1485981904, "answer_id": 41989413, "question_id": 41989298, "link": "https://stackoverflow.com/questions/41989298/why-is-my-output-wrong/41989413#41989413", "title": "Why is my output wrong?", "body": "<p>the variables <code>newStateTaxA</code> and <code>newCountyTaxA</code> that are created and computed in <code>countyTax</code> and <code>stateTax</code> are local to those functions. Once the functions complete, those variables, and the values they contain, go away. In <code>total</code> you create new local variables with the same names. These have no relationship with the previously defined variables, apart from sharing names, and will not store the values previously computed in the other two functions.</p>\n\n<p>The easiest solution, although not considered the most robust, is to create the two variables at the global scope, along with <code>totalSales</code> so that the values that they are assigned to in the two functions persist.</p>\n\n<p>If you do not wish to use global variables (which I also don't care to use), you can declare them in your main function, and modify your other functions to return the calculated values:</p>\n\n<pre><code>double countyTax(double newCountyTax)\n{\n    double newCountyTaxA;\n\n   newCountyTaxA = totalSales * COUNTY_TAX;\n\n   cout &lt;&lt; \"The county tax is: $\" &lt;&lt; newCountyTaxA &lt;&lt; endl;\n\n   return newCountytaxA;\n}\n</code></pre>\n\n<p>The calls in <code>main()</code> would then read:</p>\n\n<pre><code>newCountyTaxA = countyTax(1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 6401632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bM82o.jpg?s=128&g=1", "display_name": "Utkarsh Bais", "link": "https://stackoverflow.com/users/6401632/utkarsh-bais"}, "is_accepted": false, "score": 0, "last_activity_date": 1485982110, "creation_date": 1485982110, "answer_id": 41989466, "question_id": 41989298, "link": "https://stackoverflow.com/questions/41989298/why-is-my-output-wrong/41989466#41989466", "title": "Why is my output wrong?", "body": "<p>Your are doing a fundamental mistake here in the following code :</p>\n\n<pre><code>void total(double newTotal)\n{\n    double newTotalA, newStateTaxA, newCountyTaxA;\n\n    newTotalA = newStateTaxA + newCountyTaxA;\n\n    cout &lt;&lt; \"The total is: $\" &lt;&lt; newTotalA &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>The Variables that you have created here \"newStateTaxA\", and \"newCountyTaxA\" does not have any relation to the other variables that you have created and assigned in the other methods, they are local for each method. You need to either make them global or return valued from those functions.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 7502631, "user_type": "registered", "profile_image": "https://graph.facebook.com/1192309774156597/picture?type=large", "display_name": "Alex Chapman", "link": "https://stackoverflow.com/users/7502631/alex-chapman"}, "is_accepted": false, "score": 0, "last_activity_date": 1486051821, "creation_date": 1486051821, "answer_id": 42007021, "question_id": 41989298, "link": "https://stackoverflow.com/questions/41989298/why-is-my-output-wrong/42007021#42007021", "title": "Why is my output wrong?", "body": "<pre><code> #include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nconst double COUNTY_TAX = 0.02;\nconst double STATE_TAX = 0.04;\ndouble totalSales;\nvoid Taxes();\n\nint main ()\n{\n\n    cout &lt;&lt; \"Please enter the total dollar amount of sales: $\";\n    cin &gt;&gt; totalSales;\n\n    Taxes();\n\n    return 0;   \n}\n\nvoid Taxes()\n{\n    double countyTax, stateTax, total;\n\n    countyTax = totalSales * COUNTY_TAX;\n    stateTax = totalSales * STATE_TAX;\n    total = countyTax + stateTax;\n\n    cout &lt;&lt; \"The County Tax is: $\" &lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; countyTax &lt;&lt; endl;\n    cout &lt;&lt; \"The State Tax is: $\" &lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; stateTax &lt;&lt; endl;\n    cout &lt;&lt; \"The total is: $\" &lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; total &lt;&lt; endl;\n}\n</code></pre>\n\n<p>here is what I came up with. Everything works and outputs as desired. I guess now I am wondering if this type of setup with one module and multiple calculations inside it considered good programming?</p>\n"}], "owner": {"reputation": 15, "user_id": 7502631, "user_type": "registered", "profile_image": "https://graph.facebook.com/1192309774156597/picture?type=large", "display_name": "Alex Chapman", "link": "https://stackoverflow.com/users/7502631/alex-chapman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 41989413, "answer_count": 3, "score": -1, "last_activity_date": 1486056192, "creation_date": 1485981458, "question_id": 41989298, "link": "https://stackoverflow.com/questions/41989298/why-is-my-output-wrong", "title": "Why is my output wrong?", "body": "<pre><code>    #include &lt;iostream&gt;\n    #include &lt;iomanip&gt;\n    #include &lt;cmath&gt;\n\n    using namespace std;\n\n    const double COUNTY_TAX = 0.02;\n    const double STATE_TAX = 0.04;\n    double totalSales;\n    void countyTax(double newCountyTax);\n    void stateTax(double newStateTax);\n    void total(double newTotal);\n\n    int main ()\n    {\n\n        cout &lt;&lt; \"Please enter the total dollar amount of sales: $\";\n        cin &gt;&gt; totalSales;\n\n        countyTax(1);\n        stateTax(1);\n        total(1);\n\n        return 0;   \n    }\n\n    void countyTax(double newCountyTax)\n    {\n        double newCountyTaxA;\n\n        newCountyTaxA = totalSales * COUNTY_TAX;\n\n        cout &lt;&lt; \"The county tax is: $\" &lt;&lt; newCountyTaxA &lt;&lt; endl;\n\n    }\n\n    void stateTax(double newStateTax)\n    {\n\n        double newStateTaxA;\n\n        newStateTaxA = totalSales * STATE_TAX;\n\n        cout &lt;&lt; \"The State tax is: $\" &lt;&lt; newStateTaxA &lt;&lt; endl;\n\n    }\n\n    void total(double newTotal)\n    {\n        double newTotalA, newStateTaxA, newCountyTaxA;\n\n        newTotalA = newStateTaxA + newCountyTaxA;\n\n        cout &lt;&lt; \"The total is: $\" &lt;&lt; newTotalA &lt;&lt; endl;\n\n    }\n</code></pre>\n\n<p>hello guys! I am getting into modules in C++ and the above code compiles correctly but I can't seem to figure out why my output is wonky. I get the county tax and state tax to show properly but when the total shows I get \"$nan\" i was wondering if i could get some feedback on this? does it possibly have to do with the fact that within the module i am not using any global variables like i do with the <code>totalSales</code> and <code>COUNTY_TAX</code> and <code>SALES_TAX</code> and that when i declare <code>newTotalA</code> <code>newStateTaxA</code> <code>newCountyTaxA</code> they are declared but not assigned? just a tad confused here..THANKS!!!</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 3, "creation_date": 1485981084, "post_id": 41989117, "comment_id": 71155624, "body": "When a function throws an exception, the function can&#39;t return a value, as it threw an exception. The exception is catched. I don&#39;t really understand what you are confused about. Please explain, thanks :)"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1485981720, "post_id": 41989117, "comment_id": 71155980, "body": "And start using the <code>override</code> keyword to avoid such mistakes"}], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 7058217, "user_type": "registered", "profile_image": "https://graph.facebook.com/970418849734996/picture?type=large", "display_name": "Kaushal Kishore", "link": "https://stackoverflow.com/users/7058217/kaushal-kishore"}, "edited": false, "score": 0, "creation_date": 1485982397, "post_id": 41989207, "comment_id": 71156353, "body": "Thanks, for the help  :)"}], "tags": [], "owner": {"reputation": 407, "user_id": 360293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/005411dbd57d31a08d785f01f34ca70f?s=128&d=identicon&r=PG", "display_name": "Alwyn Schoeman", "link": "https://stackoverflow.com/users/360293/alwyn-schoeman"}, "is_accepted": false, "score": 1, "last_activity_date": 1485981441, "last_edit_date": 1485981441, "creation_date": 1485981176, "answer_id": 41989207, "question_id": 41989117, "link": "https://stackoverflow.com/questions/41989117/what-is-the-return-value-of-the-given-function-on-encountering-an-exception/41989207#41989207", "title": "What is the return value of the given function on encountering an exception?", "body": "<p>When the exception is thrown in <code>checkUsername()</code>, it stops processing in that function and returns to the calling function which is <code>main()</code>.  Because the call was made in a <code>try</code> block the exception is handled by the <code>catch</code> block. </p>\n\n<p>The <code>if()</code> statement is completely ignored and the <code>catch</code> doesn't care about what happened in that function and just prints \"Too short: \"</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1485983635, "post_id": 41989285, "comment_id": 71157051, "body": "@Quentin I&#39;m just simplifying how this works and skipping over that part, though I mentioned it since the C++ community here is quick to interject if something&#39;s been omitted. To get into all of that is like another six paragraphs of why, how, and when."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1485984189, "post_id": 41989285, "comment_id": 71157304, "body": "Oh, no, those aren&#39;t skipped at all. I&#39;m just omitting those details it for the sake of simplicity. That&#39;s  also why I said specifically &quot;<code>finally</code> type implementations&quot; as some people strive to emulate that sort of thing in C++ for various reasons. You&#39;re right that it could be interpreted that way, so I&#39;ve changed the phrasing to make that easier to understand."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1485984326, "post_id": 41989285, "comment_id": 71157370, "body": "Not at all! Once I read it your way I realized it was saying the opposite of what I intended."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1485984250, "last_edit_date": 1485984250, "creation_date": 1485981440, "answer_id": 41989285, "question_id": 41989117, "link": "https://stackoverflow.com/questions/41989117/what-is-the-return-value-of-the-given-function-on-encountering-an-exception/41989285#41989285", "title": "What is the return value of the given function on encountering an exception?", "body": "<p>A function can either return a value or throw an exception, it can't do both, they're mutually exclusive. If it successfully returns a value that means the code didn't throw an exception, and if an exception was thrown then it means it didn't make it to the point of returning a value.</p>\n\n<p>Further to that, capturing the return value is also interrupted, the code jumps right to the <code>catch</code> block you've defined. It's like a hard <code>goto</code> in concept, if you ignore things like automatic object destruction and <code>finally</code> type implementations which will happen in the process of an exception bubbling up.</p>\n"}], "owner": {"reputation": 100, "user_id": 7058217, "user_type": "registered", "profile_image": "https://graph.facebook.com/970418849734996/picture?type=large", "display_name": "Kaushal Kishore", "link": "https://stackoverflow.com/users/7058217/kaushal-kishore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 41989285, "answer_count": 2, "score": 0, "last_activity_date": 1485984250, "creation_date": 1485980844, "last_edit_date": 1485981253, "question_id": 41989117, "link": "https://stackoverflow.com/questions/41989117/what-is-the-return-value-of-the-given-function-on-encountering-an-exception", "title": "What is the return value of the given function on encountering an exception?", "body": "<p><code>checkUsername()</code> checks the username's length, and returns <code>true</code> when length is greater than or equal to 5. Otherwise it returns <code>false</code>. \nThe function <code>checkUsername()</code> should return false on <code>BadLengthException()</code>, but it doesn't seem to appear as none of the code within <code>checkUsername()</code> and <code>BadLengthException::what()</code> returns <code>false</code>. But still the program is working fine when it encounters a username of length less than 5. What's going on here? How is the return value passed <code>false</code>?</p>\n\n<pre><code>class BadLengthException: public exception{\n    public:\n        int n;\n        BadLengthException(int x) { n=x; };\n        virtual int what() throw() {\n            return n;\n        }\n    };\n/*\nThis function checks the username's length, \nand returns true when length is greater than or equal to 5.\nOtherwise it returns false.\n*/\nbool checkUsername(string username) {\n    bool isValid = true;\n    int n = username.length();\n    if(n &lt; 5) {\n        throw BadLengthException(n);    //the problem\n    }\n    for(int i = 0; i &lt; n-1; i++) {\n        if(username[i] == 'w' &amp;&amp; username[i+1] == 'w') {\n            isValid = false;\n        }\n    }\n    return isValid;\n}\n\nint main() {\n    int T; cin &gt;&gt; T;\n    while(T--) {\n        string username;\n        cin &gt;&gt; username;\n        try {\n            bool isValid = checkUsername(username);\n            if(isValid) {\n                cout &lt;&lt; \"Valid\" &lt;&lt; '\\n';\n            } else {\n                cout &lt;&lt; \"Invalid\" &lt;&lt; '\\n';\n            }\n        } catch (BadLengthException e) {\n            cout &lt;&lt; \"Too short: \" &lt;&lt; e.what() &lt;&lt; '\\n';\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "fat"], "comments": [{"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 1, "creation_date": 1485981224, "post_id": 41989069, "comment_id": 71155706, "body": "You may have to do the grunt work yourself, and get a count of items in the root and compare to known constants."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1485985157, "post_id": 41989069, "comment_id": 71157762, "body": "I recommend that you don&#39;t bother.  Check for that error code and give the user a message that includes something along the lines of &quot;this might be because there are too many items in the root folder&quot;.  You don&#39;t need to tell them that this definitely IS or definitely ISN&#39;T the problem, just let them know that it is one possible cause and let them figure it out.  (I very much doubt that Windows is checking that the root folder is full when it displays that dialog, it just sees error 0x82 on a FAT file system and assumes that must be the cause.)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485985912, "post_id": 41989069, "comment_id": 71158111, "body": "FAT16 was a hard 512 in the root. FAT32 allowed about 64K name blocks in all folders, but long names take more blocks so the maximum number of files in a folder changes. Not worth dredging the entire directory and computing the number just to generate an error message."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1485989401, "post_id": 41989069, "comment_id": 71159718, "body": "&quot;CreateFile() returns 0x82&quot;  I assume you mean GetLastError returned 0x82 after you attempted to create the file.  Right?"}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1486067097, "post_id": 41989069, "comment_id": 71198697, "body": "Yes, GetLastError().  Would be nice to be more exact,but if you think Windows is taking the shortcut, then I probably should too. Thanks for the information.  I was afraid this would be the case from what I saw looking around."}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1486067589, "post_id": 41989069, "comment_id": 71198960, "body": "Actually, let me try one more question (2 parts).  Would it then be correct for me to say that for FAT16 I can actually count folders/files in the root folder and know for sure it&#39;s a FAT problem for that format?  And would it be correct to say that for FAT32, if I can&#39;t copy a file to a given folder, I could then add the file/folder name sizes together for all in the given folder, and if that plus the new name I&#39;m trying to create exceeds 64k, then I can know for sure it&#39;s a FAT problem?  Or is that thinking too simplistic?"}], "owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1485985336, "creation_date": 1485980703, "question_id": 41989069, "link": "https://stackoverflow.com/questions/41989069/win32-c-check-if-write-error-because-fat-formatted-drive-root-folder-maximum", "title": "Win32 C++ - check if write error because FAT formatted drive root folder maximum reached", "body": "<p>Getting an error trying to write to USB.  CreateFile() returns 0x82 (The directory or file cannot be created).  File being copied to the root folder.  The problem ended up being that the USB drive is FAT formatted.  I found this out when on a hunch I manually dragged and dropped the file onto the USB, and got a Windows dialog that said \"The root drive I:\\ is formatted with the FAT fiel system and can only store a limited number of items.  Store the items in a subfolder, or reformat the drive using the NTFS file system\".  </p>\n\n<p>Working on Win7 with VS2010 C++.  I need to be able to give the user feedback about what the problem is, rather than just the generic \"The directory or file cannot be created\".</p>\n\n<p>Is there a way that I can query the USB drive to find out if the error came up because of having passed the maximum number of files allowed in the root folder?  A call to GetVolumeInformation() doesn't seem to give me this information, and a search of the net doesn't show anyone talking about how to do this (or I am not finding the right question to ask).</p>\n\n<p>Since there are FAT8, FAT12, FAT16 and FAT32 out there, I'm assuming these each have different maximums on the number of folders/files in the root folder.  I did find that FAT32 allows the number of files in the root folder to grow, which seems to say that there is no specific maximum number of folders/files for root in FAT32.  But for FAT16 there seems to be, and so the other formats, may have different maximums.</p>\n\n<p>Any idea where I could look next for this type of information.  Thanks ahead of time for any help.</p>\n"}, {"tags": ["c++", "compiler-errors", "cmake", "sdl-2", "clion"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1485981838, "post_id": 41988983, "comment_id": 71156048, "body": "As a side note, you may find it easier to manage your resources using <a href=\"http://stackoverflow.com/questions/2321511/\">RAII</a> so you don&#39;t have to manually check what is and isn&#39;t initialized when you&#39;re cleaning up or explicitly deal with cleanup when handling exceptions. You can wrap a C-style interface like SDL for RAII <a href=\"http://stackoverflow.com/questions/39176805/\">fairly easily</a>, and you&#39;ll wind up with less resource leaks for your trouble."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1485982078, "post_id": 41988983, "comment_id": 71156173, "body": "How much more error is there? Can you reasonably post the rest of it?"}, {"owner": {"reputation": 103, "user_id": 3672848, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/7285b6155b16c0476f29bf73bacb0fc8?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Marley", "link": "https://stackoverflow.com/users/3672848/bob-marley"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1485982423, "post_id": 41988983, "comment_id": 71156373, "body": "@jaggedSpire Sure, I have posted the rest of the error."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1485982775, "post_id": 41988983, "comment_id": 71156604, "body": "added the <a href=\"https://stackoverflow.com/questions/tagged/cmake\">cmake</a> tag, since it looks like script&#39;s either not finding or linking the proper binaries."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1485983351, "post_id": 41988983, "comment_id": 71156917, "body": "Your second executable (<code>SDL2_Lesson_1</code>) is <b>not linked</b> with SDL. That is why you get this error."}, {"owner": {"reputation": 103, "user_id": 3672848, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/7285b6155b16c0476f29bf73bacb0fc8?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Marley", "link": "https://stackoverflow.com/users/3672848/bob-marley"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1485983749, "post_id": 41988983, "comment_id": 71157114, "body": "@Tsyvarev So what this is trying to do is create two executables, and only one of them is actually linked with SDL. Ah, I think I see it, the build I am running is trying to build SDL2_Lesson_1 which isn&#39;t linked as you said. So if I added the target_link_libraries again after the last line it should all work yea?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1485987055, "post_id": 41988983, "comment_id": 71158693, "body": "Yes, after linking the second executable too all should work."}], "answers": [{"comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 1, "creation_date": 1486018661, "post_id": 41990368, "comment_id": 71168573, "body": "That&#39;s more of a comment than an answer."}], "tags": [], "owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "is_accepted": false, "score": 0, "last_activity_date": 1485985512, "creation_date": 1485985512, "answer_id": 41990368, "question_id": 41988983, "link": "https://stackoverflow.com/questions/41988983/using-sdl2-with-clion-on-os-x/41990368#41990368", "title": "Using SDL2 with CLion on OS X", "body": "<p>Use <code>find_library()</code> instead of <code>find_package()</code></p>\n\n<pre><code>find_library(SDL2_LIBRARY SDL2 \"path/to/your/library_bundle\")\nfind_library(SDL2_App ${SDL2_LIBRARY})\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 3672848, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/7285b6155b16c0476f29bf73bacb0fc8?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Marley", "link": "https://stackoverflow.com/users/3672848/bob-marley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1632, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485985512, "creation_date": 1485980462, "last_edit_date": 1485982793, "question_id": 41988983, "link": "https://stackoverflow.com/questions/41988983/using-sdl2-with-clion-on-os-x", "title": "Using SDL2 with CLion on OS X", "body": "<p>So I am trying to get SDL2 to work with CLion (So that I can experiment/learn).</p>\n\n<p>My main code is as such:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;SDL.h&gt;\n\nconst int SCREEN_WIDTH = 640;\nconst int SCREEN_HEIGHT = 480;\n\nbool init();\n\nSDL_Window* gWindow = NULL;\n\nSDL_Surface* gScreenSurface = NULL;\n\nSDL_Surface* gHelloWorld = NULL;\n\nbool init(){\n    bool success = true;\n    /*if(SDL_Init(SDL_INIT_VIDEO)&lt;0){\n        success = false;\n    }\n    else{\n    }*/\n\n    return success;\n}\n\nint main() {\n    std::cout &lt;&lt; \"Hello, World!\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>And my CMake file looks like this</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.6)\nproject(SDL2_Lesson_1)\n\nset(CMAKE_CXX_STANDARD 11)\n\n# includes cmake/FindSDL2.cmake\nset(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)\n\nfind_package(SDL2 REQUIRED)\ninclude_directories(${SDL2_INCLUDE_DIR})\n\nset(SOURCE_FILES Lesson_1.cpp)\n\nadd_executable(SDL2_App ${SOURCE_FILES})\ntarget_link_libraries(SDL2_App ${SDL2_LIBRARY})\n\nset(SOURCE_FILES Lesson_1.cpp)\nadd_executable(SDL2_Lesson_1 ${SOURCE_FILES})\n</code></pre>\n\n<p>Also, I have a file FindSDL2.cmake from <a href=\"https://github.com/tcbrindle/sdl2-cmake-scripts\" rel=\"nofollow noreferrer\">here</a> in a folder cmake within the project folder.\nNow, with the files as I have them posted, everything compiles and runs fine. BUT, when I uncomment the commented section within init(), the compilation breaks down and gives me the following error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_SDL_Init\", referenced from:\n      init() in Lesson_1.cpp.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[3]: *** [SDL2_Lesson_1] Error 1\nmake[2]: *** [CMakeFiles/SDL2_Lesson_1.dir/all] Error 2\nmake[1]: *** [CMakeFiles/SDL2_Lesson_1.dir/rule] Error 2\nmake: *** [SDL2_Lesson_1] Error 2\n</code></pre>\n\n<p>Note: Lesson_1.cpp is the file with the main code. Also, this is only part of the error.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1485980195, "post_id": 41988800, "comment_id": 71155153, "body": "There&#39;s no  \u0300second while loop` in the posted code."}, {"owner": {"reputation": 2008, "user_id": 1074367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9058c070662d7560ecb21a93e523466b?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1074367/michael"}, "edited": false, "score": 0, "creation_date": 1485980297, "post_id": 41988800, "comment_id": 71155220, "body": "second iteration I think..."}, {"owner": {"reputation": 35, "user_id": 4923450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LOoDM.jpg?s=128&g=1", "display_name": "Chloe Carmichael", "link": "https://stackoverflow.com/users/4923450/chloe-carmichael"}, "edited": false, "score": 0, "creation_date": 1485980521, "post_id": 41988800, "comment_id": 71155344, "body": "edit to state second iteration"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1485980568, "creation_date": 1485980568, "answer_id": 41989016, "question_id": 41988800, "link": "https://stackoverflow.com/questions/41988800/data-disappears-and-pointer-points-to-different-object/41989016#41989016", "title": "Data disappears and pointer points to different object", "body": "<p>One major problem is with</p>\n\n<pre><code>Node node = listNodes.back();\n</code></pre>\n\n<p>Here <code>node</code> is local to the while loop yet you store pointers to it.  When that node is destroyed at the end of the loop all of the pointers are now dangling.</p>\n\n<p>Generally the fix would be to use</p>\n\n<pre><code>Node&amp; node = listNodes.back();\n</code></pre>\n\n<p>So now you have a persistent object you can reference.  The issue with that though is you are modifying the vector with</p>\n\n<pre><code>listNodes.erase(listNodes.begin());\n</code></pre>\n\n<p>After that line all pointers and references to elements in the vector after the iterator are invalidated and <code>back()</code> gives you an element that will be invalidated.</p>\n\n<p>You are going to either switch to a container where the references are not invalidated or find a different way to populate your tree structure.</p>\n"}], "owner": {"reputation": 35, "user_id": 4923450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LOoDM.jpg?s=128&g=1", "display_name": "Chloe Carmichael", "link": "https://stackoverflow.com/users/4923450/chloe-carmichael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41989016, "answer_count": 1, "score": -1, "last_activity_date": 1485980918, "creation_date": 1485979864, "last_edit_date": 1485980918, "question_id": 41988800, "link": "https://stackoverflow.com/questions/41988800/data-disappears-and-pointer-points-to-different-object", "title": "Data disappears and pointer points to different object", "body": "<p>This is a quick sample program from a larger program I'm working on. This isn't perfect but it conveys the issue I'm having</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\nclass Node {\npublic: \n    vector&lt;int&gt; state;\n    Node *parent; //Parent node\n\n    //Initial Node\n    Node(const vector&lt;int&gt; &amp;s) : state(s) {}\n\n    //Other Nodes\n    Node(const vector&lt;int&gt; &amp;state, Node &amp;p) : state(state), parent(&amp;p){ }\n};\n\nint main() {\n\n    //Initial Node\n    vector&lt;int&gt; initialState = { 1,2,3 };\n    Node initialNode(initialState);\n\n    vector&lt;Node&gt; listNodes;\n    listNodes.push_back(initialNode);\n\n    while (!listNodes.empty()) { //lisNodes[i].parent-&gt;state = {}; 2nd iteration\n        Node node = listNodes.back(); //node.parent appears to point to node; 2nd iteration\n        listNodes.erase(listNodes.begin());\n\n        for (int i = 0; i &lt; 2; i++) {\n            vector&lt;int&gt; childState = { i+4,i+5,i+6 };\n            Node childNode(childState, node);\n            listNodes.push_back(childNode);\n        } //Inside for loop lisNodes[i].parent-&gt;state = {i+4,i+5,i+6}\n\n    } \n\n    return 0;\n\n}\n</code></pre>\n\n<p>In the second iteration of the while loop, the state of the parents inside <code>listNodes</code> is empty</p>\n\n<pre><code>//lisNodes[i].parent-&gt;state = {}\n</code></pre>\n\n<p>Also, <code>parent</code> in <code>node</code> appears to point to itself during the second run instead of the actual parent node</p>\n\n<p>I'm not sure why this is happening or a possible fix to it.</p>\n"}, {"tags": ["c++", "opencv", "convexity-defects"], "answers": [{"comments": [{"owner": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "edited": false, "score": 0, "creation_date": 1485996490, "post_id": 41992341, "comment_id": 71162008, "body": "hi @Matthew Drill thanks for accepting my answer. did you use an older version of OpenCV?"}], "tags": [], "owner": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "is_accepted": true, "score": 1, "last_activity_date": 1485995346, "creation_date": 1485995346, "answer_id": 41992341, "question_id": 41988577, "link": "https://stackoverflow.com/questions/41988577/opencv-last-convexity-defect-not-right/41992341#41992341", "title": "OpenCV last convexity defect not right", "body": "<p>i tested your code (with a small modification) with the image below (OpenCV version is 3.2).</p>\n\n<p>as you can see on the result image it works as expected.  probably you are using an old version of OpenCV and getting a buggy result. (i think it was a bug recently fixed)</p>\n\n<p><a href=\"https://i.stack.imgur.com/SRZah.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SRZah.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/RgRci.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RgRci.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include \"opencv2\\opencv.hpp\"\n\nusing namespace cv;\nusing namespace std;\n\nint main() {\n    //VideoCapture cap(0);\n    Mat src, gray, background, binary, diff;\n    //cap &gt;&gt; background;\n    //cvtColor(background, background, CV_BGR2GRAY);\n    vector&lt;vector&lt;Point&gt; &gt; contours;\n    vector &lt; vector&lt;int&gt; &gt; hullI = vector&lt;vector&lt;int&gt; &gt;(1);\n    vector &lt; vector&lt;Point&gt; &gt; hullP = vector&lt;vector&lt;Point&gt; &gt;(1);\n    vector&lt;Vec4i&gt; defects;\n        src = imread(\"hand.png\");\n        cvtColor(src, gray, CV_BGR2GRAY);\n        blur(gray, gray, Size(3, 3));\n        threshold(gray, binary, 150, 255, THRESH_BINARY_INV);\n        //erode(binary, binary, Mat(Size(5, 5), CV_8U));\n        imshow(\"binary\", binary);\n        findContours(binary, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE);\n        if (!contours.empty()) {\n            sort(contours.begin(), contours.end(), [](vector&lt;Point&gt; a, vector&lt;Point&gt; b) { return a.size() &gt; b.size(); });\n            drawContours(src, contours, 0, Scalar(255, 255, 0));\n\n            convexHull(contours[0], hullI[0]);\n            convexHull(contours[0], hullP[0]);\n            drawContours(src, hullP, 0, Scalar(0, 255, 255));\n\n            if (hullI[0].size() &gt; 2) {\n                convexityDefects(contours[0], hullI[0], defects);\n\n                for (Vec4i defect : defects) {\n                    line(src, contours[0][defect[0]], contours[0][defect[2]], Scalar(0, 0, 255));\n                    line(src, contours[0][defect[1]], contours[0][defect[2]], Scalar(0, 0, 255));\n                }\n            }\n        }\n        imshow(\"result\", src);\n        char key = waitKey(0);\n        return 0;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "is_accepted": false, "score": 0, "last_activity_date": 1486141032, "creation_date": 1486141032, "answer_id": 42029260, "question_id": 41988577, "link": "https://stackoverflow.com/questions/41988577/opencv-last-convexity-defect-not-right/42029260#42029260", "title": "OpenCV last convexity defect not right", "body": "<p>I have a solution which involves detecting the skin using OpenCV. I implemented it using <code>python</code>, which you can convert easily to C++.</p>\n\n<p>I obtained the HSV values of the image you uploaded using:</p>\n\n<pre><code>hsv_img = cv2.cvtColor(image, cv2.COLOR_BGR2HSV)\n</code></pre>\n\n<p>This the range for the HSV values of human skin:</p>\n\n<pre><code>l = np.array([0, 48, 80], dtype = \"uint8\")\nu = np.array([20, 255, 255], dtype = \"uint8\")\n\nskin_img = cv2.inRange(hsv_img, l, u)\ncv2.imshow(\"Hand\", skin_img)\n</code></pre>\n\n<p>I then performed <strong>morphological dilation</strong> and obtained the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7PKGp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7PKGp.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>You can now apply contour hull and find convexity defects.</p>\n"}], "owner": {"reputation": 1861, "user_id": 5605365, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0bcaecd20a17e1bd30a208a7a6f15438?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5605365/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 41992341, "answer_count": 2, "score": 0, "last_activity_date": 1486141032, "creation_date": 1485979151, "question_id": 41988577, "link": "https://stackoverflow.com/questions/41988577/opencv-last-convexity-defect-not-right", "title": "OpenCV last convexity defect not right", "body": "<p>I am trying to write code to track hands. I am using the convexity defects function to find fingers, but for some reason, there seems to always be a problem with the last defect. </p>\n\n<p><a href=\"http://pasteboard.co/tcOYWEp69.png\" rel=\"nofollow noreferrer\">Here is a picture of what I'm talking about</a> (sorry, i''m new to the forum, so cannot post images)</p>\n\n<p>The cyan line is the contours, the yellow line is the hull points, and the red lines are the defect points. As you can see the last defect point detects the defect from the wrong side of the contour.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include \"opencv2\\opencv.hpp\"\n\nusing namespace cv;\nusing namespace std;\n\nint main() {\n    VideoCapture cap(0);\n    Mat src, gray, background, binary, diff;\n    cap &gt;&gt; background;\n    cvtColor(background, background, CV_BGR2GRAY);\n    vector&lt;vector&lt;Point&gt;&gt; contours;\n    vector &lt; vector&lt;int&gt;&gt; hullI = vector&lt;vector&lt;int&gt;&gt;(1);\n    vector &lt; vector&lt;Point&gt;&gt; hullP = vector&lt;vector&lt;Point&gt;&gt;(1);\n    vector&lt;Vec4i&gt; defects;\n    while (waitKey(30)!='q') {\n        cap &gt;&gt; src;\n        cvtColor(src, gray, CV_BGR2GRAY);\n        blur(gray, gray, Size(3, 3));\n        absdiff(gray, background, diff);\n        threshold(diff, binary, 15, 255, THRESH_BINARY);\n        erode(binary, binary, Mat(Size(5, 5), CV_8U));\n\n        imshow(\"binary\", binary);\n\n        findContours(binary, contours, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE);\n        if (!contours.empty()) {\n            sort(contours.begin(), contours.end(), [](vector&lt;Point&gt; a, vector&lt;Point&gt; b) { return a.size() &gt; b.size(); });\n            drawContours(src, contours, 0, Scalar(255, 255, 0));\n\n            convexHull(contours[0], hullI[0]);\n            convexHull(contours[0], hullP[0]);\n            drawContours(src, hullP, 0, Scalar(0, 255, 255));\n\n            if (hullI[0].size() &gt; 2) {\n                convexityDefects(contours[0], hullI[0], defects);\n\n                for (Vec4i defect : defects) {\n                    line(src, contours[0][defect[0]], contours[0][defect[2]], Scalar(0, 0, 255));\n                    line(src, contours[0][defect[1]], contours[0][defect[2]], Scalar(0, 0, 255));\n                }\n            }\n        }\n        imshow(\"src\", src);\n        char key = waitKey(30);\n        if (key == 'q')break;\n        else if (key == 'p') waitKey();\n        else if (key == 'b') {\n            cap &gt;&gt; background;\n            cvtColor(background, background, CV_BGR2GRAY);\n        }\n    }\n}\n</code></pre>\n\n<p>I have confirmed through experiments that it is always the last defect in the defect vector that this happens too. Is this a bug in opencv or am I doing something wrong?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1485979282, "post_id": 41988606, "comment_id": 71154676, "body": "This isn&#39;t NRVO of any kind. NRVO refers to returning a variable that is a local variable of a function. This is about assigning a returned prvalue to an object."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1485979320, "post_id": 41988606, "comment_id": 71154698, "body": "@NicolBolas, and how is it different from what I just said?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1485979384, "post_id": 41988606, "comment_id": 71154737, "body": "Because you&#39;re talking about this as though the problem is that C++17 does not guarantee NRVO. But this isn&#39;t a case of NRVO, so it doesn&#39;t matter if C++17 guarantees it or not."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1485979430, "post_id": 41988606, "comment_id": 71154758, "body": "@NicolBolas, I am adressing what OP said in the beginning of the question, because it is important to understand, and I see a lot of confusion on this matter."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1485979670, "post_id": 41988606, "comment_id": 71154893, "body": "Also, C++17 does guarantee basic return value elision: the specific case of the return expression being a prvalue. That&#39;s typically what is discussed when people talk about RVO as separate from NRVO. So by that metric, C++17 does guarantee RVO, but not NRVO."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1485979827, "post_id": 41988606, "comment_id": 71154975, "body": "@NicolBolas, agree. I also do not think I said anything which contradicts that."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1485979954, "post_id": 41988606, "comment_id": 71155043, "body": "It&#39;s mostly that you put &quot;N&quot; in parenthesis. That suggests that the &quot;named&quot; part is optional, and thus the statement is saying that C++17 doesn&#39;t guarantee Named or Unnamed RVO."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1485980064, "post_id": 41988606, "comment_id": 71155086, "body": "@NicolBolas, this is just a habit I acquired since I&#39;ve noticed people started using RVO and NRVO almost interchangeably - to highlight the difference between it."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1485979230, "creation_date": 1485979230, "answer_id": 41988606, "question_id": 41988522, "link": "https://stackoverflow.com/questions/41988522/rvo-and-returning-to-vectors-reusing-capacity/41988606#41988606", "title": "RVO and returning to vectors, reusing capacity", "body": "<p>I see that misconception over and over again. C++17 <strong>DOES NOT</strong> guarantee (N)RVO! I have no idea where this misconception stems from, but a lot of people share this. C++17 guarantees copy elision in some cases, but (N)RVO is <strong>not</strong> one of them.</p>\n\n<p>In your case, there will be no NRVO at all! Here, <code>std::vector</code> move assingment will kick in. (N)RVO could be discussed in context of your <code>getFooVectorFromSomewhere</code>, but since the code is not provided, discussion can't take place.</p>\n"}, {"comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1485979559, "post_id": 41988617, "comment_id": 71154830, "body": "Is there any way in C++11 that the compiler could realize that the allocation of foo_ will be destroyed and attempt to reuse that capacity inside of the function (as long as it has enough capacity obviously) before making a new allocation and moving the result at the end of the function? I&#39;m not worried about it being able to move the result into foo_, I&#39;m just trying to avoid deallocating foo_&#39;s internal buffer and then reallocating a new buffer inside the function which will then be moved back."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1485979815, "post_id": 41988617, "comment_id": 71154968, "body": "@RyanP: ... what? Are you suggesting that <code>getFooVectorFromSomewhere</code> will magically know that its return value will be used on a live object, and that it will magically go and talk to that object, absconding with its memory for some process? No, that doesn&#39;t happen. Whatever return value that function creates will have its own storage, unless the function is explicitly written to hunt down <code>foo_</code> and explicitly absconds with its storage. And it will do that whether you assign the return value to <code>foo_</code> or not."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1485980520, "post_id": 41988617, "comment_id": 71155342, "body": "that&#39;s exactly what I&#39;m asking. I understand that&#39;s a far stretch, I guess I&#39;m really asking if there is anything that occurs during optimization or linking that would allow for that. I can pass the vector by reference, clear it at the top of the function, and proceed. It just doesn&#39;t make the resulting code as readable (to me at least, code intention is more obvious to me when outputs are on the left). It just seems that if a vector is being deallocated to make way for another of the same type, its cap could be reused. Wasn&#39;t sure if the linker/optimizer would do that. It seems no"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 4, "last_activity_date": 1485980137, "last_edit_date": 1485980137, "creation_date": 1485979261, "answer_id": 41988617, "question_id": 41988522, "link": "https://stackoverflow.com/questions/41988522/rvo-and-returning-to-vectors-reusing-capacity/41988617#41988617", "title": "RVO and returning to vectors, reusing capacity", "body": "<p>Elision (RVO) only applies, for the return from a function call, if you are directly using that to <em>initialize</em> an object. Since <code>foo_</code> already exists, elision doesn't apply.</p>\n\n<p>At the moment that assignment statement executes, you have two <code>vector</code>s: <code>foo_</code>, and the prvalue returned from <code>getFooVectorFromSomewhere</code>. Each of those <code>vector</code>s may have their own allocations.</p>\n\n<p>The most efficient way to handle this is to destroy whatever allocation is in <code>foo_</code> and move the allocation from the prvalue into that object. And... that is exactly what will happen (in C++11). This is called \"move assignment\". It involves destroying everything in <code>foo_</code>, followed by a few pointer copies and null-ing out of pointers.</p>\n\n<p>If this is pre-C++11, then it's going to have to copy from one <code>vector</code> to the other. If it does so, then it may reuse the allocation in <code>foo_</code> if it is large enough. And if it's not, then it's going to have to make a bigger one.</p>\n\n<blockquote>\n  <p>Is there any way in C++11 that the compiler could realize that the allocation of foo_ will be destroyed and attempt to reuse that capacity inside of the function (as long as it has enough capacity obviously) before making a new allocation and moving the result at the end of the function?</p>\n</blockquote>\n\n<p>No. Assigning the return value of a function to a variable does not cause the compiler to make that variable somehow part of a function's interface, so that the function can access and manipulate it. That's part of why elision only applies to <em>initializing</em> objects, not arbitrary assignment to existing objects. The function effectively acts on uninitialized memory, but it can only act on that memory by initializing it. Named RVO allows the function to do post-initialization work, but initialization of it is part and parcel of what it does.</p>\n\n<p>If you want a function to manipulate a live object in such a way, it needs to be an <em>explicit</em> part of the function's interface, passed as a parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1485979319, "creation_date": 1485979319, "answer_id": 41988641, "question_id": 41988522, "link": "https://stackoverflow.com/questions/41988522/rvo-and-returning-to-vectors-reusing-capacity/41988641#41988641", "title": "RVO and returning to vectors, reusing capacity", "body": "<p>The code <code>foo_ = getFooVectorFromSomewhere();</code> will use the <em>Move Assignment</em> operator associated with <code>std::vector</code>. If your implementation optimizes this operator properly, then it will simply swap the pointers associated with the old and new buffers, and avoid memory allocation altogether.</p>\n\n<p>It's not clear what this code is meant to replace, however, and we can't make guarantees/assessments about whether it will improve performance without seeing what it's replacing.</p>\n"}], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 41988617, "answer_count": 3, "score": 0, "last_activity_date": 1485980137, "creation_date": 1485978969, "question_id": 41988522, "link": "https://stackoverflow.com/questions/41988522/rvo-and-returning-to-vectors-reusing-capacity", "title": "RVO and returning to vectors, reusing capacity", "body": "<p>I have a question about what I can expect out of RVO (I know there are no guarantees until C++17). For the following example:</p>\n\n<pre><code>std::vector&lt;Foo&gt; getFooVectorFromSomewhere();\n\nclass A\n{\nprivate:\n    std::vector&lt;Foo&gt; foo_;\npublic:\n    void doSomething()\n    {\n        foo_ = getFooVectorFromSomewhere();\n    }\n}\n</code></pre>\n\n<p>I am trying to cut down on the amount of memory allocation/deallocation occuring in a particularly hot-spot of the code. Will the above allow <code>getFooVectorFromSomewhere()</code> to reuse <code>foo_</code>'s capactity, or will this result in memory allocation everytime? I would like to stay away from passing <code>foo_</code> by reference and clearing it inside the function if possible for code clarity's sake. (In this case foo_ strictly is an output, I just want to clear it and reuse it if possible).</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "visual-studio", "vector", "enums", "stdvector"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1485978584, "post_id": 41988366, "comment_id": 71154282, "body": "What is in &quot;Text.txt&quot;? Are you sure your debug and release builds open the same file? If your debug/release builds are generated in different directories (ex. Visual Studio), in which case &quot;Text.txt&quot; might only be present in the debug&#39;s output directory."}, {"owner": {"reputation": 983, "user_id": 6753444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a4459e9cb4ab680f510b698e7002eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6753444/jonathan"}, "edited": false, "score": 0, "creation_date": 1485978608, "post_id": 41988366, "comment_id": 71154296, "body": "I apologise if it&#39;s too long...I&#39;ve no idea whether it&#39;s the int, string or enum that I need to change. I&#39;ve been staring at this for a couple of days now and I&#39;m just struggling to be honest."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 2, "creation_date": 1485978617, "post_id": 41988366, "comment_id": 71154302, "body": "Did you make sure the program can still find the text file? This matters if you are going to receive help"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1485978826, "post_id": 41988366, "comment_id": 71154421, "body": "I do not see the check for <code>good</code> after <code>std::ifstream readFile(filename);</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1485980709, "post_id": 41988366, "comment_id": 71155437, "body": "Watch out because you&#39;re not done yet. The program will look for the file where it is run from, not where the program is. Read up on Working Directory"}], "answers": [{"tags": [], "owner": {"reputation": 170, "user_id": 4543427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549e4e00ae03b14d27637074b14e6c4d?s=128&d=identicon&r=PG&f=1", "display_name": "Sweekritee Singh", "link": "https://stackoverflow.com/users/4543427/sweekritee-singh"}, "is_accepted": false, "score": -1, "last_activity_date": 1485981086, "creation_date": 1485981086, "answer_id": 41989187, "question_id": 41988366, "link": "https://stackoverflow.com/questions/41988366/stdvectorclass-fills-on-debug-but-not-on-release/41989187#41989187", "title": "std::vector&lt;class&gt; fills on debug but not on release", "body": "<p>There are two possibilities:</p>\n\n<ol>\n<li><p>As you mentioned that you are able to get correct value while debugging in debug mode,  there is a chance that you are able to read correctly from the .txt file and getting correct values in your vector, but as you are debugging in release mode you are not able to see the correct value set in the watchlist, as you may find watchlist containing garbage value in release mode even if your vector is getting the correct value.</p></li>\n<li><p>You are not getting .txt file, but in that case you should not get velue even in debug version.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": true, "score": 1, "last_activity_date": 1485990966, "creation_date": 1485990966, "answer_id": 41991605, "question_id": 41988366, "link": "https://stackoverflow.com/questions/41988366/stdvectorclass-fills-on-debug-but-not-on-release/41991605#41991605", "title": "std::vector&lt;class&gt; fills on debug but not on release", "body": "<p>As I mentioned in the comments, the most likely problem is that when you created a release build for the project, the text file which the program depends on was not included in the respective folder.</p>\n\n<p>To fix it, you must include this file in that folder yourself, or find a way to indicate to VS that the program depends on that text file, that way it is copied to the release folder automatically for you. I don't use VS, so I don't know how possible that last part is, but I hope you get the idea.</p>\n"}], "owner": {"reputation": 983, "user_id": 6753444, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a4459e9cb4ab680f510b698e7002eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6753444/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 41991605, "answer_count": 2, "score": 0, "last_activity_date": 1485990966, "creation_date": 1485978374, "question_id": 41988366, "link": "https://stackoverflow.com/questions/41988366/stdvectorclass-fills-on-debug-but-not-on-release", "title": "std::vector&lt;class&gt; fills on debug but not on release", "body": "<p>I have a class <code>A</code> which has several data types defined within it. Within the program, I define a vector of type <code>A</code> and then read from a text file into this vector.</p>\n\n<p>When I am debugging, the vector \"fills up\" and I can read values from it - everything works as planned. However, when I build the release version and run the .exe, the vector is empty. The rest of the program works fine, it's just not pushing the values.</p>\n\n<p>I'm fairly new to C++, so I am assuming it is something to do with my constructor function, or possibly how I handle the <code>enum</code>?. Here is my MCVE:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n\nenum class Type\n{\n    Type1\n};\n\nType convertStringToType(std::string input)\n{\n    return Type::Type1;\n}\n\nclass A\n{\npublic:\n    int num;\n    std::string str;\n    Type typ;\n\n    A(int refNumber, std::string name, Type type)\n    {\n        num = refNumber;\n        str = name;\n        typ = type;\n    }\n};\n\nstd::vector&lt;A&gt; readFileIntoVector(std::string filename)\n{\n    std::ifstream readFile(filename);\n    std::vector&lt;A&gt; tempVector;\n\n    std::string tempNum = \"\";\n    std::string tempStr = \"\";\n    std::string tempTyp = \"\";\n\n    std::getline(readFile, tempNum, ',');\n    std::getline(readFile, tempStr, ',');\n    std::getline(readFile, tempTyp, ',');\n\n    while (readFile)\n    {\n        tempVector.push_back(A(std::stoi(tempNum), tempStr, convertStringToType(tempTyp)));\n\n        std::getline(readFile, tempNum, ',');\n        std::getline(readFile, tempStr, ',');\n        std::getline(readFile, tempTyp, ',');\n\n    }\n    return tempVector;\n}\n\nint main()\n{\n    std::vector&lt;A&gt; exampleVector = readFileIntoVector(\"Text.txt\");\n\n    if (exampleVector.empty() == true)\n    {\n        std::cout &lt;&lt; \"Vector is empty.\";\n        system(\"PAUSE\");\n    }\n    else\n    {\n        int a = 1;\n        do\n        {\n            std::cin &gt;&gt; a;\n            if (a == 0 || a == 1)\n            {\n                std::cout &lt;&lt; exampleVector.at(a).num &lt;&lt; \"\\n\";\n                std::cout &lt;&lt; exampleVector.at(a).str &lt;&lt; \"\\n\";\n            }\n        } while (a == 0 || a == 1);\n\n        return 0;\n    }\n}\n</code></pre>\n\n<p>This is Text.txt:</p>\n\n<pre><code>1, String1, Type1,\n2, String2, Type1,\n</code></pre>\n"}, {"tags": ["c++", "linux", "touchscreen"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 6435680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a45456bf9f807882ee0be60b75bcc969?s=128&d=identicon&r=PG", "display_name": "merge", "link": "https://stackoverflow.com/users/6435680/merge"}, "is_accepted": false, "score": 0, "last_activity_date": 1488276132, "creation_date": 1488276132, "answer_id": 42505605, "question_id": 41988360, "link": "https://stackoverflow.com/questions/41988360/how-do-i-get-input-from-my-touchscreen-with-c-while-one-linux/42505605#42505605", "title": "How do I get input from my touchscreen with c++ while one linux.", "body": "<p>Well, when evtest really dumps everything correctly, you won't need <a href=\"https://github.com/kergoth/tslib\" rel=\"nofollow noreferrer\">tslib</a>. In case you might need it anyways, there is more documentation now and I'd be happy to help you use it, when you create a Github issue there.</p>\n\n<p>It seems more like a problem with correctly reading your system's input in your application though :)</p>\n"}], "owner": {"reputation": 1, "user_id": 2309732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7322e0d67b263fb58d7842eacf35672b?s=128&d=identicon&r=PG", "display_name": "hutty", "link": "https://stackoverflow.com/users/2309732/hutty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1368, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1488276132, "creation_date": 1485978357, "last_edit_date": 1495541354, "question_id": 41988360, "link": "https://stackoverflow.com/questions/41988360/how-do-i-get-input-from-my-touchscreen-with-c-while-one-linux", "title": "How do I get input from my touchscreen with c++ while one linux.", "body": "<p>I'm working on a c++/SFML paint program for my chromebook Acer R11 (running gallium linux) and would like to add multi-touch support. However I am stuck trying to find some way to get the input values into my c++ program.</p>\n\n<p>The touchscreen works, full multi-touch works in chrome, non-touch applications treat it like a mouse.</p>\n\n<p>SFML's sf::Touch methods don't give me anything, it appears they only work on android and ios.</p>\n\n<p>I tried to get tslib to work, but it has zero setup instructions and I can't get the sample programs to compile and run.</p>\n\n<p>I tried the c++ code in this thread <a href=\"https://stackoverflow.com/questions/28841139/how-to-get-coordinates-of-touchscreen-rawdata-using-linux\">How to get Coordinates of Touchscreen Rawdata using Linux</a> but it stops at \"You are not root! This may not work...\\n\", chrome gets touch events and its not root, so that's probably not the right direction.</p>\n\n<p><strong>I haven't had any success finding info about this online. What is the proper way to get touch events on a linux system?</strong></p>\n\n<p>More data:\nThe touchscreen shows up in evtest under /dev/input/event6: Elan Touchscreen\nWhen I tell evtest to give me output it dumps realtime output correctly. </p>\n\n<pre><code>cat /proc/bus/input/devices shows it as \nI: Bus=0018 Vendor=04f3 Product=002a Version=0000\nN: Name=\"Elan Touchscreen\"\nP: Phys=\ns: Sysfs=/devices/platform/80622C1:00/i2c-0/i2c-ELAN0001:00/input/input6\nU: Uniq=\nH: Handlers=mouse1 event6\nB:PROP=2\nB: EV=v\nB: EKY=400 0 0 0 0 0\nB: ABS=661800001000003\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stdmap"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1485978476, "post_id": 41988226, "comment_id": 71154217, "body": "If you return a pointer to a const object, you can&#39;t modify the object pointed by the returned pointer"}], "answers": [{"tags": [], "owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "is_accepted": true, "score": 1, "last_activity_date": 1485988678, "last_edit_date": 1485988678, "creation_date": 1485978728, "answer_id": 41988463, "question_id": 41988226, "link": "https://stackoverflow.com/questions/41988226/return-stdpairconst-customclass-bool-for-failure-case-in-a-search-functio/41988463#41988463", "title": "Return std::pair&lt;const CustomClass &amp;, bool&gt; for failure case in a search function when CustomClass is an Abstract Base Class", "body": "<p>There are several options:</p>\n\n<ul>\n<li><p>You can indeed return a pointer. To ensure it is non-mutable, just return a <code>const</code> pointer.</p></li>\n<li><p>You can create a special class that inherits from the base class that does nothing but signal that a value has not been found. For example:</p>\n\n<pre><code>class NpNotFound: NpBaseTest {\n    // implement pure virtual functions with dummy ones\n};\n</code></pre>\n\n<p>And then in <code>NpTestMgr::find()</code> do:</p>\n\n<pre><code>return std::make_pair(NpNotFound(), false);\n</code></pre></li>\n<li><p>Instead of returning a <code>std::pair&lt;SomeClass&amp;, bool&gt;</code>, just return <code>SomeClass&amp;</code>, and throw an exception if the value could not be found. Use this option only if it is unlikely that you are searching for something that does not exist in the map.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 751, "user_id": 3657373, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/baHlx.jpg?s=128&g=1", "display_name": "nitimalh", "link": "https://stackoverflow.com/users/3657373/nitimalh"}, "edited": false, "score": 0, "creation_date": 1485979358, "post_id": 41988526, "comment_id": 71154715, "body": "Is it because it would be up to the user of the member function to be responsible for freeing the pointer ? or rather a user, who is not supposed to free the pointer might do so leading to double frees ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 751, "user_id": 3657373, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/baHlx.jpg?s=128&g=1", "display_name": "nitimalh", "link": "https://stackoverflow.com/users/3657373/nitimalh"}, "edited": false, "score": 0, "creation_date": 1485979481, "post_id": 41988526, "comment_id": 71154785, "body": "@ImNot, deleting part can be solved with <code>unique_ptr</code>. But performance implications of it will remain."}, {"owner": {"reputation": 751, "user_id": 3657373, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/baHlx.jpg?s=128&g=1", "display_name": "nitimalh", "link": "https://stackoverflow.com/users/3657373/nitimalh"}, "edited": false, "score": 0, "creation_date": 1485979784, "post_id": 41988526, "comment_id": 71154953, "body": "If you dont mind, could you tell me a little bit more about what are these performance implications (or point me to a resource where I can learn about the implications of returning pointers). The reason I ask is because I would love to learn why the &quot;best practices&quot; are considered the best."}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485980110, "post_id": 41988526, "comment_id": 71155111, "body": "<code>std::optional</code> does not work with polymorphic types (see also <a href=\"http://stackoverflow.com/questions/37369429/stdoptional-and-polymorphism\">this question</a>)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 751, "user_id": 3657373, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/baHlx.jpg?s=128&g=1", "display_name": "nitimalh", "link": "https://stackoverflow.com/users/3657373/nitimalh"}, "edited": false, "score": 0, "creation_date": 1485980591, "post_id": 41988526, "comment_id": 71155381, "body": "@ImNot, operations such as <code>new</code> and <code>delete</code> are somewhat slow, can result in system calls and are a major penalty in multithreaded apps"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485980819, "post_id": 41988526, "comment_id": 71155493, "body": "@G.Sliepen, well, returning polymorphic types by value is never a good idea. But since OP is eager to do this for cases when object was found, I assume, <code>std::optional</code> would be no worse."}, {"owner": {"reputation": 751, "user_id": 3657373, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/baHlx.jpg?s=128&g=1", "display_name": "nitimalh", "link": "https://stackoverflow.com/users/3657373/nitimalh"}, "edited": false, "score": 0, "creation_date": 1485981195, "post_id": 41988526, "comment_id": 71155681, "body": "So how should polymorphic types be returned ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 751, "user_id": 3657373, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/baHlx.jpg?s=128&g=1", "display_name": "nitimalh", "link": "https://stackoverflow.com/users/3657373/nitimalh"}, "edited": false, "score": 0, "creation_date": 1485981651, "post_id": 41988526, "comment_id": 71155931, "body": "@ImNot, what&#39;s the type of <code>_content</code> and <code>m_pending</code>?"}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485983143, "post_id": 41988526, "comment_id": 71156817, "body": "@SergeyA: but the question is about returning a reference to an object, not by value. And even if you wanted to return by value, you <i>cannot</i> do that with <code>std::optional</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485984649, "post_id": 41988526, "comment_id": 71157541, "body": "@G.Sliepen, I totally missed the fact that the pair is of the reference! Than it is simply not going to work."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1485978982, "creation_date": 1485978982, "answer_id": 41988526, "question_id": 41988226, "link": "https://stackoverflow.com/questions/41988226/return-stdpairconst-customclass-bool-for-failure-case-in-a-search-functio/41988526#41988526", "title": "Return std::pair&lt;const CustomClass &amp;, bool&gt; for failure case in a search function when CustomClass is an Abstract Base Class", "body": "<p>You should just do what C++17 <code>std::optional</code> is doing. It doesn't require any special compiler support, so you can simply borrow the implementation from any library which supports it. For example, CLang version of libc++ is usually easy to read.</p>\n\n<p>One thing you most likely <strong>do not</strong> want to do is to return the pointer. It is not the question of mutability, but rather a dynamic memory management.</p>\n"}], "owner": {"reputation": 751, "user_id": 3657373, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/baHlx.jpg?s=128&g=1", "display_name": "nitimalh", "link": "https://stackoverflow.com/users/3657373/nitimalh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 41988463, "answer_count": 2, "score": 1, "last_activity_date": 1485988678, "creation_date": 1485977879, "last_edit_date": 1495540891, "question_id": 41988226, "link": "https://stackoverflow.com/questions/41988226/return-stdpairconst-customclass-bool-for-failure-case-in-a-search-functio", "title": "Return std::pair&lt;const CustomClass &amp;, bool&gt; for failure case in a search function when CustomClass is an Abstract Base Class", "body": "<p>I have the following piece of code which searches a map of type <code>std::map&lt;int, const CustomClass&amp;&gt;</code>. I would like to return a \"failure\" case object if the item is not found in the map.</p>\n\n<p>I went through the discussion in <a href=\"https://stackoverflow.com/questions/10371094/returning-a-null-reference-in-c\">Returning a \u201cNULL reference\u201d in C++?</a> </p>\n\n<blockquote>\n  <p>Using std::pair with a bool to indicate if the item is valid or not (note: requires that SomeResource has an appropriate default constructor and is not expensive to construct):</p>\n</blockquote>\n\n<pre><code>std::pair&lt;SomeResource, bool&gt; SomeClass::getSomething(std::string name) {\n    std::map&lt;std::string, SomeResource&gt;::iterator it = content_.find(name);\n    if (it != content_.end()) \n        return std::make_pair(*it, true);  \n    return std::make_pair(SomeResource(), false);\n</code></pre>\n\n<blockquote>\n  <p>}</p>\n</blockquote>\n\n<p>but since my CustomClass is an Abstract Base Class I cannot instantiate it ! </p>\n\n<p>Are there any better ways to circumvent this ? I imagine returning a pointer to the class object might allow it to be mutable. I would like to keep the returned object immutable.</p>\n\n<p>My code sample is shown below - </p>\n\n<pre><code>std::pair&lt;const NpBaseTest::NpBaseTest&amp;, bool&gt; NpTestMgr::find(const UID&amp; p_uid) const\n{\n    auto search = m_pending.find(p_uid);\n    if(search != m_pending.end())\n        return std::make_pair(*search, true);\n    return std::make_pair(NpBaseTest(), false);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 9, "creation_date": 1485977751, "post_id": 41988165, "comment_id": 71153862, "body": "A is not the name of a type."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1485977789, "post_id": 41988165, "comment_id": 71153886, "body": "^ For the same reason <code>typedef 23 a;</code> doesn&#39;t work."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1485977802, "post_id": 41988165, "comment_id": 71153894, "body": "<code>Foo::Bar</code> is the enum. <code>Foo::Bar::A</code> is a value that can be assigned to the enum."}, {"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1485978052, "post_id": 41988165, "comment_id": 71154027, "body": "The compiler did give me that error, which is clearer now. But do I have to type the full name of A? (the close vote is unfair)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485978327, "post_id": 41988165, "comment_id": 71154151, "body": "You don&#39;t have to type the full name. You can always pull the enum into the current namespace <code>using Foo::Bar;</code>, or introduce a type alias for it if you are in function scope <code>using Bar = Foo::Bar;</code>. It just so happens that both will make the enum constants usable directly as well (unless <code>Bar</code> is an enum class, but that&#39;s another matter)."}], "answers": [{"tags": [], "owner": {"reputation": 919, "user_id": 5017858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OfAr1.png?s=128&g=1", "display_name": "Sam Marinelli", "link": "https://stackoverflow.com/users/5017858/sam-marinelli"}, "is_accepted": false, "score": 2, "last_activity_date": 1485981560, "creation_date": 1485981560, "answer_id": 41989325, "question_id": 41988165, "link": "https://stackoverflow.com/questions/41988165/typedefing-enum-member/41989325#41989325", "title": "Typedefing enum &quot;member&quot;", "body": "<p>The <code>typedef</code> keyword is only used for aliasing types, not other kinds of entities.  <code>A</code> is not a type; it's a value.  If you want an alias for it, you could do <code>constexpr Foo::Bar a = Foo::A;</code>.</p>\n"}], "owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1485981560, "creation_date": 1485977668, "question_id": 41988165, "link": "https://stackoverflow.com/questions/41988165/typedefing-enum-member", "title": "Typedefing enum &quot;member&quot;", "body": "<p>Suppose I have the following definition in <code>\"foo.h\"</code></p>\n\n<pre><code>namespace Foo{\n     enum Bar\u00a0{\n        A,\n        B\n     };\n}\n</code></pre>\n\n<p>Why won't <code>typedef Foo::Bar::A a</code>compile when I include \"<code>foo.h\"</code>? How would I go about using a shorthand name for A?</p>\n"}, {"tags": ["c++", "c++11", "templates", "stl"], "comments": [{"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1485981700, "post_id": 41988136, "comment_id": 71155968, "body": "Where is <code>SetInt</code> defined?"}], "answers": [{"tags": [], "owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "is_accepted": true, "score": 1, "last_activity_date": 1485982193, "creation_date": 1485982193, "answer_id": 41989497, "question_id": 41988136, "link": "https://stackoverflow.com/questions/41988136/function-object-doesnt-recognize-the-paramstdsetint-that-it-gets/41989497#41989497", "title": "function object doesn&#39;t recognize the param(std::set&lt;int&gt;) that it gets", "body": "<p>You never put anything into <code>before_x</code> so of course that loop doesn't do anything.</p>\n"}], "owner": {"reputation": 3, "user_id": 5938198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KTRR.png?s=128&g=1", "display_name": "Romano", "link": "https://stackoverflow.com/users/5938198/romano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41989497, "answer_count": 1, "score": -1, "last_activity_date": 1485982193, "creation_date": 1485977575, "last_edit_date": 1485977966, "question_id": 41988136, "link": "https://stackoverflow.com/questions/41988136/function-object-doesnt-recognize-the-paramstdsetint-that-it-gets", "title": "function object doesn&#39;t recognize the param(std::set&lt;int&gt;) that it gets", "body": "<p>I'm trying to write a template function that uses a function object.\nthe param that the function object get is <code>std::set</code> (type <code>int</code>).\nfor some reason, when I'm trying to go throw the set with: <code>for(auto curr: set)</code>, it doesn't even go into the for loop, like it doesn't recognize it's a stl set!</p>\n\n<p>MAIN:\n</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n    Functor object_x;\n    SetInt set_1={1,2,6,4,3};\n    SetInt set_output;\n\n    set_output=mtmAlgorithem_2(set_output ,set_1,object_x);\n    return 0;\n}\n</code></pre>\n\n<p>This is the template:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt; typename SetToReturn,typename Generic, typename Functor &gt;\n\nSetToReturn mtmAlgorithem_2(SetToReturn a,Generic input, Functor object){\n\n//All elements after element X including X.\n    SetToReturn after_x;\n    //All elements before element X not-including X.\n    SetToReturn before_x;\n    //Output set\n    SetToReturn output;\n\n    //copy elements from input to after_x:\n    for(auto element: input){\n        after_x.insert(element);\n    }\n\n    for(auto element: input){\n\n\n// &gt; ---------THIS IS WERE I CALL THE FUNCTION OBJECT------\n\n        if(object(before_x,after_x)){\n            output.insert(element);\n        }\n        before_x.erase(element);\n        after_x.insert(element);\n    }\n    return output;\n}\n</code></pre>\n\n<p>This is the function object:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Functor\n{\n    public:\n        bool operator()( SetInt &amp;before_x, SetInt &amp;after_x){\n            bool res=true;\n            for(int curr_1: before_x){\n\n\n//------------not getting here---------------!!!!!!!!!!!!!!\n\n                for(int curr_2: after_x){\n                    if(curr_1&gt;curr_2){\n                        res=false;\n                        break;\n                    }\n                }\n            }\n            std::cout&lt;&lt;\"lla\"&lt;&lt;std::endl;\n            return res;\n        };\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1485977963, "post_id": 41988115, "comment_id": 71153986, "body": "Are you certain that main_class.cpp is being compiled and linked with main.cpp? Recommend adding the compiler command line to the question."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485979985, "post_id": 41988115, "comment_id": 71155050, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 1, "user_id": 6195438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4c11f16af52f20de4b272cde1da128?s=128&d=identicon&r=PG&f=1", "display_name": "starcu", "link": "https://stackoverflow.com/users/6195438/starcu"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1486050965, "post_id": 41988115, "comment_id": 71189272, "body": "Yes, after i added main_class.cpp to makelist everything compiled fine. Thanks for hint!"}], "owner": {"reputation": 1, "user_id": 6195438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4c11f16af52f20de4b272cde1da128?s=128&d=identicon&r=PG&f=1", "display_name": "starcu", "link": "https://stackoverflow.com/users/6195438/starcu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485979017, "creation_date": 1485977508, "last_edit_date": 1485979017, "question_id": 41988115, "link": "https://stackoverflow.com/questions/41988115/c-vtable-error", "title": "C++ vtable error", "body": "<p>I have written some code where I want to set class <code>BaseClass</code> as interface for <code>DerivedClass</code> and <code>MainClass</code>, my code look like this</p>\n\n<p>base_class.h</p>\n\n<pre><code>class BaseClass {\npublic:\n    virtual int first_virtual_function() = 0;\n    virtual int second_virtual_function() = 0;\n    virtual ~BaseClass() {}\n};\n</code></pre>\n\n<p>derived_class.h</p>\n\n<pre><code>#include \"base_class.h\"\n\nclass DerivedClass: public BaseClass {\nprivate:\n    int first_number = 1;\n    int second_number = 2;\n    void change_first_number();\n    void change_second_number();\n\npublic:\n    int first_virtual_function();\n    int second_virtual_function();\n};\n</code></pre>\n\n<p>derived_class.cpp</p>\n\n<pre><code>#include \"derived_class.h\"\n\nvoid DerivedClass::change_first_number() {\n    first_number = 55;\n}\n\nvoid DerivedClass::change_second_number() {\n    second_number = 11;\n}\n\nint DerivedClass::first_virtual_function() {\n    change_first_number();\n    return first_number;\n}\n\nint DerivedClass::second_virtual_function() {\n    change_second_number();\n    return second_number;\n}\n</code></pre>\n\n<p>main_class.h</p>\n\n<pre><code>#include \"base_class.h\"\n\nclass MainClass {\nprivate:\n    int main_first_number = 0;\n    int main_second_number = 0;\n\npublic:\n    void show_changed_first_number(BaseClass&amp; bc);\n    void show_changed_second_number(BaseClass&amp; bc);\n};\n</code></pre>\n\n<p>main_class.cpp</p>\n\n<pre><code>#include \"main_class.h\"\n\nvoid MainClass::show_changed_first_number(BaseClass&amp; bc) {\n    main_first_number = bc.first_virtual_function();\n    std::cout &lt;&lt; main_first_number &lt;&lt; std::endl;\n}\n\nvoid MainClass::show_changed_second_number(BaseClass&amp; bc){\n    main_second_number = bc.second_virtual_function();\n    std::cout &lt;&lt; main_second_number &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>and main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"derived_class.h\"\n#include \"main_class.h\"\n\n\nint main() {\n    std::cout &lt;&lt; \"Hello, World!\" &lt;&lt; std::endl;\n\n    MainClass mc;\n    DerivedClass dc;\n\n    mc.show_changed_first_number(dc);\n    mc.show_changed_second_number(dc);\n\n    return 0;\n}\n</code></pre>\n\n<p>When I want to compiled this I get error:</p>\n\n<blockquote>\n  <p>[100%] Linking CXX executable vtable_error\n  CMakeFiles/vtable_error.dir/main.cpp.o: In function <code>main</code>:\n  /home/lukasz/Programowanie/c-repo/C++\n  academy/Sandbox/vtable_error/main.cpp:12: undefined reference to\n  <code>MainClass::show_changed_first_number(BaseClass&amp;)</code>\n  /home/lukasz/Programowanie/c-repo/C++\n  academy/Sandbox/vtable_error/main.cpp:13: undefined reference to\n  <code>MainClass::show_changed_second_number(BaseClass&amp;)</code> collect2: error:\n  ld returned 1 exit status CMakeFiles/vtable_error.dir/build.make:120:\n  polecenia dla obiektu <code>vtable_error</code> nie powiod\u0142y si\u0119</p>\n</blockquote>\n\n<p>But when I put whole code into one main.cpp file everything works fine, I don't know why.</p>\n"}, {"tags": ["c++", "xml", "qt", "dom"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6285273"}, "edited": false, "score": 0, "creation_date": 1485977766, "post_id": 41988099, "comment_id": 71153873, "body": "no, in program I have QString, I just made a mistake in example."}], "tags": [], "owner": {"reputation": 2008, "user_id": 1074367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9058c070662d7560ecb21a93e523466b?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1074367/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1485977438, "creation_date": 1485977438, "answer_id": 41988099, "question_id": 41988025, "link": "https://stackoverflow.com/questions/41988025/qdomnode-class-read-value-of-child-in-qt/41988099#41988099", "title": "QDomNode Class read value of child in qt", "body": "<p>Maybe:</p>\n\n<pre><code>if (attribute.value() == \"1\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3521, "user_id": 2004438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83aa1035a2265dea1f8ad9818560799a?s=128&d=identicon&r=PG", "display_name": "kefir500", "link": "https://stackoverflow.com/users/2004438/kefir500"}, "is_accepted": true, "score": 0, "last_activity_date": 1485980623, "last_edit_date": 1485980623, "creation_date": 1485980198, "answer_id": 41988898, "question_id": 41988025, "link": "https://stackoverflow.com/questions/41988025/qdomnode-class-read-value-of-child-in-qt/41988898#41988898", "title": "QDomNode Class read value of child in qt", "body": "<p>In your code the <code>domElement.firstChild()</code> refers to the <code>&lt;Apple&gt;</code> element node, <strong>not</strong> to its content. The value inside the <code>&lt;Apple&gt;</code> is <strong>also</strong> a node (<a href=\"http://doc.qt.io/qt-5/qdomnode.html#NodeType-enum\" rel=\"nofollow noreferrer\">text node</a>), that is why it is located one level deeper in the DOM hierarchy:</p>\n\n<ul>\n<li><code>domElement</code> \u2014 <strong><code>&lt;Key&gt;</code></strong></li>\n<li><code>domElement.firstChild()</code> \u2014 <strong><code>&lt;Apple&gt;</code></strong></li>\n<li><code>domElement.firstChild().firstChild()</code> \u2014 <strong><code>A</code></strong></li>\n</ul>\n\n<p>So you will also have to get the first child of the <code>&lt;Apple&gt;</code> element node:</p>\n\n<pre><code>domElement.firstChild().firstChild().setNodeValue(\"D\");\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6285273"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 41988898, "answer_count": 2, "score": 1, "last_activity_date": 1485980623, "creation_date": 1485977173, "last_edit_date": 1485977783, "question_id": 41988025, "link": "https://stackoverflow.com/questions/41988025/qdomnode-class-read-value-of-child-in-qt", "title": "QDomNode Class read value of child in qt", "body": "<p>I want to change \"A\" in Apple, in key which value is 1 to \"D\", in this code 2 items should be replaced. I tried something like this, but nothing happens.</p>\n\n<pre><code> &lt;C&gt;\n    &lt;B&gt;  \n    &lt;Key value=\"1\"&gt;\n       &lt;Apple&gt;A&lt;/Apple&gt;\n    &lt;/Key&gt;\n    &lt;Key value=\"2\"&gt;\n       &lt;Apple&gt;A&lt;/Apple&gt;\n    &lt;/Key&gt;\n    &lt;Key value=\"3\"&gt;\n       &lt;Apple&gt;A&lt;/Apple&gt;\n    &lt;/Key&gt;\n    &lt;Key value=\"1\"&gt;\n       &lt;Apple&gt;A&lt;/Apple&gt;\n    &lt;/Key&gt;\n    &lt;/B&gt;\n &lt;/C&gt; \n</code></pre>\n\n<p>Qt:</p>\n\n<pre><code>QDomNodeList roots = doc.elementsByTagName(\"Key\");\n\nfor (int i = 0; i &lt; roots.size(); ++i) {\n    QDomElement domElement = roots.at(i).toElement();\n    QDomAttr attribute = domElement.attributeNode(\"value\");\n    if (attribute.value() == \"1\") { \n        domElement.firstChild().setNodeValue(\"D\");\n    }\n</code></pre>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1485976900, "post_id": 41987912, "comment_id": 71153383, "body": "Yeah you don&#39;t need to say <code>struct</code> in C++"}, {"owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "edited": false, "score": 2, "creation_date": 1485976919, "post_id": 41987912, "comment_id": 71153395, "body": "This is a C thing. In C one often uses a <code>typedef</code> to avoid that, but in C++ you can always use the type without the <code>struct</code> or <code>class</code> keyword."}, {"owner": {"reputation": 1117, "user_id": 326175, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c0dbe8684b26c23dedbb5e157e06038c?s=128&d=identicon&r=PG", "display_name": "Miek", "link": "https://stackoverflow.com/users/326175/miek"}, "edited": false, "score": 0, "creation_date": 1485977028, "post_id": 41987912, "comment_id": 71153467, "body": "Ahh , That would explain why we use typedef struct in Objective C"}, {"owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "edited": false, "score": 2, "creation_date": 1485977051, "post_id": 41987912, "comment_id": 71153477, "body": "Don&#39;t forget the semicolon after the <code>struct</code> definition though, I don&#39;t think your code will compile as is."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485977053, "post_id": 41987912, "comment_id": 71153478, "body": "The word is not redeclared, it&#39;s there because you name a struct by its tag. <a href=\"http://yarchive.net/comp/linux/typedefs.html\" rel=\"nofollow noreferrer\">And some would say that&#39;s preferable</a>."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 6, "last_activity_date": 1485977015, "creation_date": 1485977015, "answer_id": 41987971, "question_id": 41987912, "link": "https://stackoverflow.com/questions/41987912/c-proper-use-of-struct-in-function-arguments/41987971#41987971", "title": "C++ Proper use of struct in function arguments", "body": "<p>There is a difference between C and C++ use of declarations produced with <code>struct</code> keyword:</p>\n\n<ul>\n<li>In C, <code>struct</code> defines a new <code>struct</code> <em>tag</em>, but not a new <em>type</em></li>\n<li>In C++, <code>struct</code> defines a new <em>type</em>.</li>\n</ul>\n\n<p>The consequence is that C++ lets you use the name defined in <code>struct</code>, while C requires you to either prefix a <code>struct</code> to the tag, or use <code>typedef</code> to define a new type.</p>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1485977203, "post_id": 41987985, "comment_id": 71153560, "body": "You most certainly <i>should</i> do this in new code, if that code is a C binding."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1485977474, "post_id": 41987985, "comment_id": 71153708, "body": "The question is tagged C++ so what C does bears no relevance for writing new C++"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485977614, "post_id": 41987985, "comment_id": 71153791, "body": "And new C binding are no longer written for C++ libraries? That&#39;s news to me."}, {"owner": {"reputation": 1117, "user_id": 326175, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c0dbe8684b26c23dedbb5e157e06038c?s=128&d=identicon&r=PG", "display_name": "Miek", "link": "https://stackoverflow.com/users/326175/miek"}, "edited": false, "score": 0, "creation_date": 1485977772, "post_id": 41987985, "comment_id": 71153874, "body": "StroryTeller - That&#39;s good info moving forward. I&#39;ll just get in the habit of using typedef struct."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1117, "user_id": 326175, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c0dbe8684b26c23dedbb5e157e06038c?s=128&d=identicon&r=PG", "display_name": "Miek", "link": "https://stackoverflow.com/users/326175/miek"}, "edited": false, "score": 1, "creation_date": 1485977879, "post_id": 41987985, "comment_id": 71153946, "body": "@Miek - Don&#39;t. It&#39;s not required for C++. And as discussed in the thread I linked to your question, it can actually make the C bindings better."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1485977981, "post_id": 41987985, "comment_id": 71153990, "body": "If you&#39;re writing header files for use in C, then you&#39;re not writing C++ are you?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485978079, "post_id": 41987985, "comment_id": 71154035, "body": "<code>extern &quot;C&quot;</code> and the <code>__cplusplus</code> macro seem pretty C++ to me"}, {"owner": {"reputation": 1117, "user_id": 326175, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c0dbe8684b26c23dedbb5e157e06038c?s=128&d=identicon&r=PG", "display_name": "Miek", "link": "https://stackoverflow.com/users/326175/miek"}, "edited": false, "score": 0, "creation_date": 1485978556, "post_id": 41987985, "comment_id": 71154268, "body": "@Rob K Although you are correct, but for my situation, I write in C, C++ and Objective C and understanding now this issue effects all three is important for me to know. I appreciate the input."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1485984066, "post_id": 41987985, "comment_id": 71157251, "body": "You didn&#39;t say anything in the question about interfacing with code in other languages, so I inferred you wanted to know about pure C++. If you&#39;re writing compatibility code, code that&#39;s going to be both C and C++, then of course you don&#39;t have any choice. But for pure C++, code that&#39;s only going to be C++, you shouldn&#39;t use it."}], "tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1485977064, "creation_date": 1485977064, "answer_id": 41987985, "question_id": 41987912, "link": "https://stackoverflow.com/questions/41987912/c-proper-use-of-struct-in-function-arguments/41987985#41987985", "title": "C++ Proper use of struct in function arguments", "body": "<p>C requires it. C++ does not require it, but allows it for backward compatibility. Do not do this for new code.</p>\n"}], "owner": {"reputation": 1117, "user_id": 326175, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c0dbe8684b26c23dedbb5e157e06038c?s=128&d=identicon&r=PG", "display_name": "Miek", "link": "https://stackoverflow.com/users/326175/miek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "closed_date": 1485977242, "accepted_answer_id": 41987971, "answer_count": 2, "score": 0, "last_activity_date": 1485977110, "creation_date": 1485976825, "last_edit_date": 1485977110, "question_id": 41987912, "link": "https://stackoverflow.com/questions/41987912/c-proper-use-of-struct-in-function-arguments", "closed_reason": "Duplicate", "title": "C++ Proper use of struct in function arguments", "body": "<p>Quick Question about passing a struct as a function arg. Maybe its a carry over from C that makes no difference in C++.</p>\n\n<p>In many Linked List examples you see them re-declare the word struct in any function argument that takes a struct and I don't understand why. Or any allocation for that matter. A structure is its own object and declaring just the name of the struct is sufficient.</p>\n\n<p>Example:</p>\n\n<pre><code>struct Node{\n\n    int data;\n    Node * next;\n};\n\n// Function to output data.\nvoid printNode(struct Node* myNode){ \n\n    // Print data of node\n\n}\n</code></pre>\n\n<p>why is the word struct re-declared in the function arg. Declaring type Node* works just fine.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1485976458, "post_id": 41987768, "comment_id": 71153151, "body": "Terrible commenting style. Having a huge comment <code>class</code> in front of the class definition certainly makes code so much more readable! As for the gist of the question, I am not sure what you are asking about. Perfect forwarding and move are two independent concepts."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485976788, "post_id": 41987768, "comment_id": 71153327, "body": "For working code, <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a> might be more appropriate."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485977006, "post_id": 41987768, "comment_id": 71153451, "body": "It seems to be that some overloads are not needed, else I don&#39;t see error (missing <code>std::forward</code> for visitor btw)."}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1485977089, "post_id": 41987768, "comment_id": 71153496, "body": "@SergeyA : In a file with a single class I agree that the first comment does not improve readability. When I say perfect forwarding I am just speaking about a perfect proxy that enable the encapsulated object to move data if he knows how to do it"}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485977479, "post_id": 41987768, "comment_id": 71153709, "body": "@Jarod42 Which overloads ? Yes thanks I forgot"}, {"owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485978138, "post_id": 41987768, "comment_id": 71154074, "body": "@Jarod42 : I see, I can remove &quot;BoostVariantWrapper(const TOther &amp;other)&quot; and &quot;BoostVariantWrapper&amp; operator=(const TOther &amp;other) {&quot;. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "is_accepted": false, "score": 0, "last_activity_date": 1486293788, "creation_date": 1486293788, "answer_id": 42051468, "question_id": 41987768, "link": "https://stackoverflow.com/questions/41987768/c-perfect-forwarding-proxy-of-encapsulated-member/42051468#42051468", "title": "C++ perfect forwarding/proxy of encapsulated member", "body": "<p>std::forward by itself does perfect forwarding. It is meant for this purpose.</p>\n"}], "owner": {"reputation": 273, "user_id": 3782790, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/77fb2d7bbb3fad0aba9622007242d32f?s=128&d=identicon&r=PG&f=1", "display_name": "infiniteLoop", "link": "https://stackoverflow.com/users/3782790/infiniteloop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486321277, "creation_date": 1485976347, "last_edit_date": 1486321277, "question_id": 41987768, "link": "https://stackoverflow.com/questions/41987768/c-perfect-forwarding-proxy-of-encapsulated-member", "title": "C++ perfect forwarding/proxy of encapsulated member", "body": "<p>I have been looking online for a way to do a perfect and efficient redirection (proxy) to a member object. But I can't find any useful resource.\nI imagine this is a task than programmers are doing often (sometimes badly), and it could be a good knowledge to know a good, efficient and concise (minimalist) way to do it.</p>\n\n<p>I would like your advice to know if my understanding of move operations is right and if this proxy is correct particularly for copy and move constructor / assignment operators.</p>\n\n<p>To do a perfect forwarding in a move constructor / assignment operator my understanding is that we use <code>std::move</code> if we are sure we pass an <code>lvalue</code> to the encapsulated object, and <code>std::forward</code> otherwise.\nIs it correct ?</p>\n\n<p>Here is my code</p>\n\n<pre><code>#include &lt;boost/variant.hpp&gt;\n\n/* ********************************************************************/\n// Class\n/* ********************************************************************/\ntemplate &lt;class... T&gt;\nclass BoostVariantWrapper {\n\n        /* ********************************************************************/\n        // Private fields\n        /* ********************************************************************/\n        boost::variant&lt;T...&gt; variant;\n\n    public:\n\n        /* ********************************************************************/\n        // Constructors / Destructors\n        /* ********************************************************************/\n        BoostVariantWrapper() {}\n\n        BoostVariantWrapper(const BoostVariantWrapper &amp;other) :\n        BoostVariantWrapper(other.variant)\n        {}\n\n        BoostVariantWrapper(BoostVariantWrapper &amp;other) :\n        BoostVariantWrapper(other.variant)\n        {}\n\n        BoostVariantWrapper(BoostVariantWrapper &amp;&amp;other) :\n        BoostVariantWrapper(std::move(other.variant))\n        {}\n\n        template&lt;class TOther&gt;\n        BoostVariantWrapper(TOther &amp;&amp;other) :\n        variant(std::forward&lt;TOther&gt;(other))\n        {}\n\n        /* ********************************************************************/\n        // Public methods\n        /* ********************************************************************/\n        template &lt;class U&gt;\n        U&amp; get() {\n            return boost::get&lt;U&gt;(variant);\n        }\n\n        template &lt;class Fn&gt;\n        inline void applyVisitor(Fn&amp;&amp; visitor) {\n            boost::apply_visitor(std::forward&lt;Fn&gt;(visitor), variant);\n        }\n\n        template &lt;class Fn&gt;\n        inline void applyVisitor(Fn&amp;&amp; visitor) const {\n            boost::apply_visitor(std::forward&lt;Fn&gt;(visitor), variant);\n        }\n\n        /* ********************************************************************/\n        // Operators\n        /* ********************************************************************/\n        BoostVariantWrapper&amp; operator=(const BoostVariantWrapper &amp;other) {\n            return operator=(other.variant);\n        }\n\n        BoostVariantWrapper&amp; operator=(BoostVariantWrapper &amp;other) {\n            return operator=(other.variant);\n        }\n\n        BoostVariantWrapper&amp; operator=(BoostVariantWrapper &amp;&amp;other) {\n            return operator=(std::move(other.variant));\n        }\n\n        template&lt;class TOther&gt;\n        BoostVariantWrapper&amp; operator=(TOther &amp;&amp;other) {\n            variant = std::forward&lt;TOther&gt;(other);\n            return *this;\n        }\n\n        bool operator==(const BoostVariantWrapper &amp;other) const {\n            return variant == other.variant;\n        }\n\n        bool operator&lt;(const BoostVariantWrapper &amp;other) const {\n            return variant &lt; other.variant;\n        }\n\n        friend std::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, const BoostVariantWrapper &amp;x) {\n            os &lt;&lt; x.variant;\n            return os;\n        }\n\n        /* ********************************************************************/\n        // Serialization\n        /* ********************************************************************/\n        template&lt;class Archive&gt;\n        void serialize(Archive &amp;ar, const unsigned int) {\n            ar &amp; variant;\n        }\n};\n</code></pre>\n\n<p>Edited based on comment of Jarod42</p>\n"}, {"tags": ["c++", "c++11", "batch-file", "cmd"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1485976376, "post_id": 41987746, "comment_id": 71153103, "body": "Are looking for <a href=\"http://stackoverflow.com/questions/3024197/what-does-int-argc-char-argv-mean\">argc, argv</a>?"}, {"owner": {"reputation": 24311, "user_id": 19856, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/INXtX.jpg?s=128&g=1", "display_name": "Traveling Tech Guy", "link": "https://stackoverflow.com/users/19856/traveling-tech-guy"}, "edited": false, "score": 0, "creation_date": 1485976427, "post_id": 41987746, "comment_id": 71153132, "body": "Look for command line arguments (see this <a href=\"http://www.cprogramming.com/tutorial/lesson14.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/lesson14.html</a>)"}, {"owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "edited": false, "score": 0, "creation_date": 1485976429, "post_id": 41987746, "comment_id": 71153134, "body": "If I understand your question correctly, you can use input redirection."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1485976808, "post_id": 41987746, "comment_id": 71153337, "body": "For clarification: You want to take an application that requires user input and make it &#39;headless&#39; where the required input comes instead from a file that spoofs entering the data so that the application &#39;thinks&#39; the data was typed in. Correct?"}, {"owner": {"reputation": 195, "user_id": 5927645, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0tn1xLkspbs/AAAAAAAAAAI/AAAAAAAAATk/rAd0Puw1fCU/photo.jpg?sz=128", "display_name": "Vaisak Mohan", "link": "https://stackoverflow.com/users/5927645/vaisak-mohan"}, "reply_to_user": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1485978238, "post_id": 41987746, "comment_id": 71154113, "body": "@MikelF Yep, I just need the result of the program returned or to assign to a variable"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485978342, "post_id": 41987746, "comment_id": 71154161, "body": "&quot;return the result to a .bat program&quot; This is actually hard. What do you want to do with this out put? An alternative may be very easy such as program2 &lt; program1 &lt; argsfile"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485978540, "post_id": 41987746, "comment_id": 71154257, "body": "May be helpful: <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20120731-00/?p=7003\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/oldnewthing/20120731-00/?p=7003</a>"}, {"owner": {"reputation": 195, "user_id": 5927645, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0tn1xLkspbs/AAAAAAAAAAI/AAAAAAAAATk/rAd0Puw1fCU/photo.jpg?sz=128", "display_name": "Vaisak Mohan", "link": "https://stackoverflow.com/users/5927645/vaisak-mohan"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485978553, "post_id": 41987746, "comment_id": 71154267, "body": "@user4581301 either <code>echo</code> it or assign to a variable <code>set \\p =</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485978959, "post_id": 41987746, "comment_id": 71154501, "body": "OK. You have that end then. For the other end I&#39;d just pipe in a file containing the input arguments. <code>asd &lt; argsfile</code> where <code>argsfile</code> contains <code>param1 param2</code>"}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 2951881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZKvp.jpg?s=128&g=1", "display_name": "Comfort Chauke", "link": "https://stackoverflow.com/users/2951881/comfort-chauke"}, "is_accepted": true, "score": 1, "last_activity_date": 1485977035, "creation_date": 1485977035, "answer_id": 41987976, "question_id": 41987746, "link": "https://stackoverflow.com/questions/41987746/passing-parameters-to-c-compiled-exe-through-cmd/41987976#41987976", "title": "Passing parameters to C++ compiled exe through cmd", "body": "<p>To write to stdin u redirect the stdin using \n\n<p>so</p>\n\n<pre><code>prog&lt;\"params\"\n</code></pre>\n\n<p>will execute prog and readin String \"params\" from std::cin\nsame as redirecting stdout to file.</p>\n\n<p>The other option would be to put the input parameters as arguments to main</p>\n\n<pre><code>main(argv,argc){\n</code></pre>\n\n<p>and read argc as the array of string arguments to the program</p>\n"}], "owner": {"reputation": 195, "user_id": 5927645, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0tn1xLkspbs/AAAAAAAAAAI/AAAAAAAAATk/rAd0Puw1fCU/photo.jpg?sz=128", "display_name": "Vaisak Mohan", "link": "https://stackoverflow.com/users/5927645/vaisak-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 2, "accepted_answer_id": 41987976, "answer_count": 1, "score": 1, "last_activity_date": 1485978537, "creation_date": 1485976295, "last_edit_date": 1485978537, "question_id": 41987746, "link": "https://stackoverflow.com/questions/41987746/passing-parameters-to-c-compiled-exe-through-cmd", "title": "Passing parameters to C++ compiled exe through cmd", "body": "<p>For Example, I have compiled a C++ program through Cygwin g++ on my Windows PC. It accepts (<code>cin</code>) two <code>string</code>s and parses it to return a single <code>string</code>.\nI am thinking of using it in a batch file. Is there any way I can return the result to the .bat program directly by passing the two strings as arguments without actually executing all the input dialogues. (Something like \"<code>asd.exe -param1,param2</code>\" )\nIs it to be implemented in the cpp code end. If so, give me a start where to look upon.</p>\n"}, {"tags": ["c++", "qt", "serialization", "qmetaobject"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 7502236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9ce5ce519d93e95848744d2a605f0?s=128&d=identicon&r=PG&f=1", "display_name": "EagleNN", "link": "https://stackoverflow.com/users/7502236/eaglenn"}, "is_accepted": true, "score": 1, "last_activity_date": 1486051667, "creation_date": 1486051667, "answer_id": 42006970, "question_id": 41987497, "link": "https://stackoverflow.com/questions/41987497/serialize-nested-user-defined-class-from-q-property-in-qt/42006970#42006970", "title": "Serialize nested user defined class from Q_PROPERTY in QT", "body": "<p>The solution is to extend template with constructor</p>\n\n<pre><code>SettingsItem()\n{\n    qRegisterMetaType&lt;T&gt;();\n    qRegisterMetaTypeStreamOperators&lt;T&gt;(T::staticMetaObject.className());\n}\n</code></pre>\n\n<p>and register nested type in class constructor</p>\n\n<pre><code>RegistersSettings()\n{\n    qRegisterMetaTypeStreamOperators&lt;QList&lt;RegisterGroupSettings&gt;&gt;(\"QList&lt;RegisterGroupSettings&gt;\");\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7502236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9ce5ce519d93e95848744d2a605f0?s=128&d=identicon&r=PG&f=1", "display_name": "EagleNN", "link": "https://stackoverflow.com/users/7502236/eaglenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 42006970, "answer_count": 1, "score": 2, "last_activity_date": 1486051667, "creation_date": 1485975363, "question_id": 41987497, "link": "https://stackoverflow.com/questions/41987497/serialize-nested-user-defined-class-from-q-property-in-qt", "title": "Serialize nested user defined class from Q_PROPERTY in QT", "body": "<p>faced with following problem: I can't serialize user defined object from Q_PROPERTY\nI try to serialize RegistersSettings class to QDataStream. The idea is to be able to serialize it to text file (using &lt;&lt; operator) and later be able to read it (using >> operator). It should verify that fields that was readed from file are still valid. So I inspect property for that.\nThe issue is that Q_PROPERTY(QList groups MEMBER groups) is not work as expected.\nIt looks like it's possible to create such functionality, but it looks that it's not so easy.\nCould anyone help with the common way how to serialize user defined class from Q_PROPERTY?</p>\n\n<p>The code is simplifyed to be more readable, but the main idea is in place.</p>\n\n<pre><code>class RegisterGroupSettings:SettingsItem&lt;RegisterGroupSettings&gt;\n{\nprivate:\n    Q_GADGET\n    Q_PROPERTY(QString name MEMBER name)\n    Q_PROPERTY(int interval MEMBER interval)\n\npublic:\n    QString name;\n    int     interval;\n};\nQ_DECLARE_METATYPE(RegisterGroupSettings)\n\nclass RegistersSettings:SettingsItem&lt;RegistersSettings&gt;\n{\nprivate:\n    Q_GADGET\n    Q_PROPERTY(QList&lt;RegisterGroupSettings&gt; groups MEMBER groups)\n    Q_PROPERTY(int code MEMBER code)\n\npublic:\n    QList&lt;RegisterGroupSettings&gt; groups;\n    int code;\n};\nQ_DECLARE_METATYPE(RegistersSettings)\n</code></pre>\n\n<p>SettingsItem is a helper fo unification</p>\n\n<pre><code>template &lt;typename T&gt; class SettingsItem\n{\npublic:\n    friend QDataStream &amp; operator &lt;&lt; (QDataStream &amp;arch, const T &amp; object)\n    {\n        const QMetaObject &amp;mo = object.staticMetaObject;\n        int cnt = mo.propertyCount();\n        QString prop_name;\n        QVariant prop_value;\n        arch &lt;&lt; cnt;\n        while (cnt&gt;0)\n        {\n            prop_name = mo.property(cnt-1).name();\n            prop_value = mo.property(cnt-1).readOnGadget(&amp;object);\n            arch &lt;&lt; prop_name;\n            arch &lt;&lt; prop_value;\n            cnt--;\n        }\n        return arch;\n    }\n\n    friend QDataStream &amp; operator &gt;&gt; (QDataStream &amp;arch, T &amp; object)\n    {\n        const QMetaObject &amp;mo = object.staticMetaObject;\n        int cnt=0;\n        QString prop_name;\n        QVariant prop_value;\n        int prop_index;\n        arch &gt;&gt; cnt;\n        while (cnt&gt;0)\n        {\n            arch &gt;&gt; prop_name;\n            arch &gt;&gt; prop_value;\n            prop_index = mo.indexOfProperty(prop_name.toStdString().c_str());\n            if (prop_index &gt; -1)\n            {\n                mo.property(prop_index).writeOnGadget(&amp;object, prop_value);\n            }\n            cnt--;\n        }\n        return arch;\n    }\n\n    friend bool operator == (const T &amp;first, const T &amp;second)\n    {\n        const QMetaObject &amp;mo = first.staticMetaObject;\n        int cnt = mo.propertyCount();\n        QString prop_name;\n        QVariant oProp_value;\n        QVariant dProp_value;\n        while (cnt&gt;0)\n        {\n            prop_name = mo.property(cnt-1).name();\n            oProp_value = mo.property(cnt-1).readOnGadget(&amp;first);\n            dProp_value = mo.property(cnt-1).readOnGadget(&amp;second);\n            if (oProp_value == dProp_value)\n            {\n                cnt--;\n                continue;\n            }\n            return false;\n        }\n\n        return true;\n    }\n\n    friend bool operator != (const T &amp;first, const T &amp;second)\n    {\n        return !( first == second );\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "googletest"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485974925, "post_id": 41987295, "comment_id": 71152323, "body": "So with <i><code>fixture</code></i> you mean the derived <code>::testing::Test</code> class? Some links for the particular features would be helpful to give concise answers to your question."}, {"owner": {"reputation": 622, "user_id": 5112564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8623465410acbc409acea498fd78e53?s=128&d=identicon&r=PG&f=1", "display_name": "andrgolubev", "link": "https://stackoverflow.com/users/5112564/andrgolubev"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485975362, "post_id": 41987295, "comment_id": 71152556, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 you&#39;re right, <code>fixture</code> == derived from <code>::testing::Test</code>this is what I mean. I guess, what I ask are already the features of the gtest. Not sure what you mean."}], "answers": [{"tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 2, "last_activity_date": 1485979248, "last_edit_date": 1495540409, "creation_date": 1485979248, "answer_id": 41988614, "question_id": 41987295, "link": "https://stackoverflow.com/questions/41987295/advanced-use-of-googletests-parameterization/41988614#41988614", "title": "Advanced use of googletest&#39;s parameterization", "body": "<blockquote>\n  <p>As far as I know, I can use fixture along with parameterization feature of gtests.\n  Does this apply to both value-parameterization and type-parameterization?</p>\n</blockquote>\n\n<p>Yes, both <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#value-parameterized-tests\" rel=\"nofollow noreferrer\">value-parameterized tests</a>\nand <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#typed-tests\" rel=\"nofollow noreferrer\">typed tests</a>\nor <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/AdvancedGuide.md#type-parameterized-tests\" rel=\"nofollow noreferrer\">type-parameterized tests</a>\nmust be derived from a fixture class. The linked documentation provides examples.</p>\n\n<blockquote>\n  <p>Can I use type-parameterization with value-parameterization without fixture</p>\n</blockquote>\n\n<p>I presume you mean \"type-parameterization OR value-parameterization\". Anyway, you cannot\nuse either without a fixture class, as per the same documentation.</p>\n\n<blockquote>\n  <p>Can I use fixture together with type- and value-parameterization?</p>\n</blockquote>\n\n<p>Googletest does not expressly support type-and-value-parameterized tests,\nbut you can make a good approximation to it with type-parameterized tests,\nas I illustrated in <a href=\"https://stackoverflow.com/a/22272614/1362568\">a previous answer</a></p>\n"}], "owner": {"reputation": 622, "user_id": 5112564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8623465410acbc409acea498fd78e53?s=128&d=identicon&r=PG&f=1", "display_name": "andrgolubev", "link": "https://stackoverflow.com/users/5112564/andrgolubev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 41988614, "answer_count": 1, "score": 1, "last_activity_date": 1486009458, "creation_date": 1485974642, "last_edit_date": 1486009458, "question_id": 41987295, "link": "https://stackoverflow.com/questions/41987295/advanced-use-of-googletests-parameterization", "title": "Advanced use of googletest&#39;s parameterization", "body": "<p>I have several questions about googletest framework and its usage:</p>\n\n<blockquote>\n  <p>By <code>fixture</code> in the following questions I mean a class derived from <code>::testing::Test</code></p>\n</blockquote>\n\n<ol>\n<li><p>As far as I know, I can use <code>fixture</code> along with <code>parameterization feature</code> of gtests. Does this apply to <strong>both</strong> <code>value-parameterization</code> and <code>type-parameterization</code>?</p></li>\n<li><p>There are cases when the fixture is irrelevant. Can I use <code>type-parameterization</code> with <code>value-parameterization</code> <strong>without</strong> <code>fixture</code>? How (example would be nice)?</p></li>\n<li><p><em>Pure interest</em>: Can I use <code>fixture</code> <strong>together</strong> with <code>type-</code> <strong>and</strong> <code>value-parameterization</code>? (I am quite sure this is a needless complexity)</p></li>\n</ol>\n"}, {"tags": ["c++", "protocol-buffers"], "answers": [{"comments": [{"owner": {"reputation": 1893, "user_id": 6153683, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/433c8247303c42b6fe5cef5821f79a5a?s=128&d=identicon&r=PG", "display_name": "skgbanga", "link": "https://stackoverflow.com/users/6153683/skgbanga"}, "edited": false, "score": 0, "creation_date": 1486047103, "post_id": 41997485, "comment_id": 71186512, "body": "Thanks! That is slightly non intuitive though. The documentations says something like: - Possible sources of errors:  - A Get*() or Set*() method for singular fields is called on a repeated field.  - GetRepeated*(), SetRepeated*(), or Add*() is called on a non-repeated field."}], "tags": [], "owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "is_accepted": true, "score": 3, "last_activity_date": 1486024430, "creation_date": 1486024430, "answer_id": 41997485, "question_id": 41987291, "link": "https://stackoverflow.com/questions/41987291/setting-repeated-field-in-protobuf-using-reflection/41997485#41997485", "title": "setting repeated field in protobuf using reflection", "body": "<p><code>SetRepeatedDouble()</code> overwrites an already-present element of the array. For your code to work, the repeated field must already have a size at least equal to <code>vect.size()</code>, otherwise you are overrunning the array, which would indeed cause a crash (or worse). If you started with an empty message instance, then you need to <strong>add</strong> the values instead of setting them, like so:</p>\n\n<pre><code>for (int i = 0; i &lt; vect.size(); ++i)\n    refl-&gt;AddDouble(&amp;protoMsg, fd, vect[i]);\n</code></pre>\n"}], "owner": {"reputation": 1893, "user_id": 6153683, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/433c8247303c42b6fe5cef5821f79a5a?s=128&d=identicon&r=PG", "display_name": "skgbanga", "link": "https://stackoverflow.com/users/6153683/skgbanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1911, "favorite_count": 0, "accepted_answer_id": 41997485, "answer_count": 1, "score": 2, "last_activity_date": 1486024430, "creation_date": 1485974617, "question_id": 41987291, "link": "https://stackoverflow.com/questions/41987291/setting-repeated-field-in-protobuf-using-reflection", "title": "setting repeated field in protobuf using reflection", "body": "<p>I have a protobuf message similar to this:</p>\n\n<pre><code>message foo {\n   repeated double values = 1;\n}\n</code></pre>\n\n<p>I am using reflection (as explained <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message#Reflection\" rel=\"nofollow noreferrer\">here</a>) to set the values like this in my C++ code</p>\n\n<pre><code>auto desc = protoMsg.GetDescription();\nauto refl = protoMsg.GetReflection();\nauto fd = desc-&gt;FindFieldByNumber(1); // run time value\n\nassert(fd-&gt;is_repeated());\nfor (int i = 0; i &lt; vect.size(); ++i)\n   refl-&gt;SetRepeatedDouble(&amp;protoMsg, fd, i, vect[i]);\n</code></pre>\n\n<p>My application is crashing inside <code>SetRepeatedDouble</code> function. Has anyone tried to do something like this before? (set values using reflection? Note that I have to use reflection due to dynamic nature of my application. I have simplified above code slightly not to do that for now)</p>\n\n<p>Also any tips on how to possible debug this are appreciated.</p>\n"}, {"tags": ["c++", "vector", "stl"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485974503, "post_id": 41987236, "comment_id": 71152098, "body": "Did you compile with optimizations on?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1485974541, "post_id": 41987236, "comment_id": 71152123, "body": "What toolchain, platform, and build commands did you use?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1485974612, "post_id": 41987236, "comment_id": 71152163, "body": "Have you verified the loops haven&#39;t been optimized out entirely?"}, {"owner": {"reputation": 265, "user_id": 2451986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd34539eb5da53425038eff969027a8f?s=128&d=identicon&r=PG", "display_name": "Damjan Dakic", "link": "https://stackoverflow.com/users/2451986/damjan-dakic"}, "edited": false, "score": 0, "creation_date": 1485974682, "post_id": 41987236, "comment_id": 71152199, "body": "I updated the question with the compiler version/flags. Even so, why would optimizations be different between these two sample codes? What is the difference between vector() and vector(0)?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1485974810, "post_id": 41987236, "comment_id": 71152260, "body": "&quot;What is the difference between vector() and vector(0)?&quot; - different ctor called"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1485975229, "post_id": 41987236, "comment_id": 71152479, "body": "@Damjan <a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector/vector</a> Slava is right, different constructors are indeed called.  See ctors 1 and 3"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1485975232, "post_id": 41987236, "comment_id": 71152481, "body": "This seems very compiler specific. gcc 6.3 with -O3 compiles both examples to the same assembly, as does clang 3.9.1 with -O2."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1485975257, "post_id": 41987236, "comment_id": 71152499, "body": "Where do you start and stop timing? What exactly are you benchmarking? What methodology are you using? Either way, what you&#39;re seeing as a difference is almost certainly just noise. Current versions of both Clang and GCC emit <i>identical</i> code for these two snippets in optimized builds. Benchmarks only make sense if you run them <i>many</i> times and average the results."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1485975379, "post_id": 41987236, "comment_id": 71152564, "body": "Do note if you ever want to see the generated assembly you can always use <a href=\"http://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">godbolt</a>"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 1, "creation_date": 1485975631, "post_id": 41987236, "comment_id": 71152709, "body": "FWIW, libstdc++ tagged at 5.4 shows that the behavior of each constructor is identical (with <code>0</code>, it delegates to the default constructor then allocates via <code>_M_allocate</code>, which just short-circuits when <code>n == 0</code> to do nothing). You&#39;ll need to post your actual benchmarking; where does timing start, where does it stop, how many runs, etc. etc., just like Cody suggested."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1485975718, "post_id": 41987236, "comment_id": 71152756, "body": "&quot;Both are created with size = capacity = 0&quot;  Actually not.  Neither vector constructor specifies the capacity.  There&#39;s already a question about what the initial capacity actually is:  <a href=\"http://stackoverflow.com/q/12271017/103167\">stackoverflow.com/q/12271017/103167</a>"}, {"owner": {"reputation": 265, "user_id": 2451986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd34539eb5da53425038eff969027a8f?s=128&d=identicon&r=PG", "display_name": "Damjan Dakic", "link": "https://stackoverflow.com/users/2451986/damjan-dakic"}, "edited": false, "score": 0, "creation_date": 1485976129, "post_id": 41987236, "comment_id": 71152975, "body": "I updated the question, it has the exact code I am compiling. The times have changed because I switched a computer, but the behavior is still unchanged."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1485976369, "post_id": 41987236, "comment_id": 71153100, "body": "Can you compare the assembly listings?"}, {"owner": {"reputation": 265, "user_id": 2451986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd34539eb5da53425038eff969027a8f?s=128&d=identicon&r=PG", "display_name": "Damjan Dakic", "link": "https://stackoverflow.com/users/2451986/damjan-dakic"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1485976795, "post_id": 41987236, "comment_id": 71153333, "body": "@GManNickG It&#39;s different very much, can&#39;t read assembly very well so not sure how to respond :/"}, {"owner": {"reputation": 265, "user_id": 2451986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd34539eb5da53425038eff969027a8f?s=128&d=identicon&r=PG", "display_name": "Damjan Dakic", "link": "https://stackoverflow.com/users/2451986/damjan-dakic"}, "edited": false, "score": 0, "creation_date": 1485977619, "post_id": 41987236, "comment_id": 71153794, "body": "Btw for you who say that your compiler produces exact assembly, it might be that everything is just optimized out? If that is the case, your test is missing the point - that vector() vs vector(0) causes 2x greater running time."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1486030590, "post_id": 41987236, "comment_id": 71175465, "body": "What <i>actually</i> misses the point is if you are benchmarking code with optimizations disabled. But no, the assembly listings I&#39;m looking at do not have everything optimized out. The compiler is generating code, it&#39;s just generating identical code for virtually identical constructs, as you might expect. You can <i>consistently</i> get this difference, no matter how many time you run the benchmark? What about if you swap the order in which you do the tests (i.e., do Test 2 first, then Test 1)?"}, {"owner": {"reputation": 265, "user_id": 2451986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd34539eb5da53425038eff969027a8f?s=128&d=identicon&r=PG", "display_name": "Damjan Dakic", "link": "https://stackoverflow.com/users/2451986/damjan-dakic"}, "edited": false, "score": 0, "creation_date": 1486042468, "post_id": 41987236, "comment_id": 71183252, "body": "Yes, the results are consistent if I repeat the test and run it in any order."}, {"owner": {"reputation": 265, "user_id": 2451986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd34539eb5da53425038eff969027a8f?s=128&d=identicon&r=PG", "display_name": "Damjan Dakic", "link": "https://stackoverflow.com/users/2451986/damjan-dakic"}, "edited": false, "score": 0, "creation_date": 1486054186, "post_id": 41987236, "comment_id": 71191461, "body": "Has anyone tested the code on the same compiler with the same flags and confirmed this?"}], "owner": {"reputation": 265, "user_id": 2451986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd34539eb5da53425038eff969027a8f?s=128&d=identicon&r=PG", "display_name": "Damjan Dakic", "link": "https://stackoverflow.com/users/2451986/damjan-dakic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1485976081, "creation_date": 1485974414, "last_edit_date": 1485976081, "question_id": 41987236, "link": "https://stackoverflow.com/questions/41987236/vector-vs-vector0-unexplained-runtime-difference", "title": "vector() vs vector(0) unexplained runtime difference", "body": "<p>Version 1 (<strong>1572.38ms</strong>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;chrono&gt;\n\nint main(int argc, char* argv[])\n{\n    std::chrono::time_point&lt;std::chrono::steady_clock&gt; startTime = std::chrono::steady_clock::now();\n    int n = 1000000;\n    int m = 1000;\n\n    for (int k = 0; k &lt; m; k++)\n    {\n\n        std::vector&lt;int&gt; array(0);\n\n        array.reserve(n);\n\n        for (int i = 0; i &lt; n - 10; i++)\n        {\n            array.push_back(i);\n        }\n    }\n\n    auto time = std::chrono::steady_clock::now() - startTime;\n    std::cout   &lt;&lt; \"Elapsed time: \"\n            &lt;&lt; std::chrono::duration&lt;double, std::milli&gt;(time).count()\n            &lt;&lt; \" ms\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>Version 2 (<strong>3736.49ms</strong>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;chrono&gt;\n\nint main(int argc, char* argv[])\n{\n    std::chrono::time_point&lt;std::chrono::steady_clock&gt; startTime = std::chrono::steady_clock::now();\n    int n = 1000000;\n    int m = 1000;\n\n    for (int k = 0; k &lt; m; k++)\n    {\n\n        std::vector&lt;int&gt; array;\n\n        array.reserve(n);\n\n        for (int i = 0; i &lt; n - 10; i++)\n        {\n            array.push_back(i);\n        }\n    }\n\n    auto time = std::chrono::steady_clock::now() - startTime;\n    std::cout   &lt;&lt; \"Elapsed time: \"\n            &lt;&lt; std::chrono::duration&lt;double, std::milli&gt;(time).count()\n            &lt;&lt; \" ms\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>Can someone please explain to me why such a great difference in the running time? The only difference is in the vector construction. Both are created with size = capacity = 0.</p>\n\n<p>Compiler: g++ 5.4.0\nCompiler flags: -Wall -std=c++14 -O2</p>\n"}, {"tags": ["c++", "c", "c-preprocessor", "boost-preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "is_accepted": true, "score": 1, "last_activity_date": 1485975232, "last_edit_date": 1485975232, "creation_date": 1485974373, "answer_id": 41987223, "question_id": 41987222, "link": "https://stackoverflow.com/questions/41987222/how-to-zip-multiple-boost-preprocessor-sequences/41987223#41987223", "title": "How to zip multiple Boost Preprocessor sequences?", "body": "<p>You can define a <code>SEQ_ZIP</code> macro for this purpose as follows:</p>\n\n<pre><code>#include &lt;boost/preprocessor/control/expr_if.hpp&gt;\n#include &lt;boost/preprocessor/repetition/repeat.hpp&gt;\n#include &lt;boost/preprocessor/seq/elem.hpp&gt;\n#include &lt;boost/preprocessor/seq/for_each.hpp&gt;\n#include &lt;boost/preprocessor/seq/size.hpp&gt;\n\n#define SEQ_ZIP_NTH_(_,d,e) (BOOST_PP_SEQ_ELEM(d, e))\n#define SEQ_ZIP_NTHS_(_,i,ss) (BOOST_PP_SEQ_FOR_EACH(SEQ_ZIP_NTH_,i,ss))\n#define SEQ_ZIP_2(ne,ss) BOOST_PP_REPEAT(ne, SEQ_ZIP_NTHS_, ss)\n#define SEQ_ZIP_(ne,ss) BOOST_PP_EXPR_IF(ne, SEQ_ZIP_2(ne, ss))\n#define SEQ_ZIP(ss) SEQ_ZIP_(BOOST_PP_SEQ_SIZE(BOOST_PP_SEQ_ELEM(0,ss)), ss)\n</code></pre>\n\n<p>And use it to zip your sequences like this:</p>\n\n<pre><code>#define S1 (a)(b)(c)\n#define S2 (1)(2)(3)\n#define S3 (x1)(x2)(x3)\nSEQ_ZIP((S1)(S2)(S3))\n</code></pre>\n"}], "owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 1, "accepted_answer_id": 41987223, "answer_count": 1, "score": 1, "last_activity_date": 1486414691, "creation_date": 1485974373, "last_edit_date": 1486414691, "question_id": 41987222, "link": "https://stackoverflow.com/questions/41987222/how-to-zip-multiple-boost-preprocessor-sequences", "title": "How to zip multiple Boost Preprocessor sequences?", "body": "<p>Given multiple Boost Preprocessor sequences:</p>\n\n<pre><code>#define S1 (a)(b)(c)\n#define S2 (1)(2)(3)\n#define S3 (x1)(x2)(x3)\n</code></pre>\n\n<p>How do I zip them using the preprocessor so the end result would be <code>((a)(1)(x1))((b)(2)(x2))((c)(3)(x3))</code>?</p>\n\n<h2>Notes</h2>\n\n<ul>\n<li>I came up with my own answer, but I'm open to accepting better solutions than provided by my answer below in reasonable time.</li>\n<li>Please refrain from removing the <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> tag since this Boost.Preprocessor works well with C++ as well as C, and my question targets both languages.</li>\n</ul>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1485975309, "post_id": 41987147, "comment_id": 71152529, "body": "Which version of doxygen are you using? Which specific settings do you have in yout doxygen configuration (Doxyfile) file? Did you try to make a minimal example to test it which you can also share here?"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1485981312, "post_id": 41987147, "comment_id": 71155751, "body": "Doxygen 1.8.13 on MacOS, installed through HomeBrew. I&#39;m working on a minimal set, I&#39;ll update the question in a little bit."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1485984514, "post_id": 41987147, "comment_id": 71157473, "body": "Also, without the anonymous namespace or the AAA class no errors are shown, but all three functions are seen as identical, their documentation is merged. If I define the <code>xxxArray</code> types using a builtin type as the template argument, then all three functions are documented separately."}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "edited": false, "score": 0, "creation_date": 1560375295, "post_id": 41987147, "comment_id": 99720238, "body": "I&#39;m having the exact same problem with standard C++ classes (not templates) and overloaded functions in an unnamed namespace. So I suspect there is a bug. The documentation of the base class appears instead of the specific version of the overloaded function. If I don&#39;t document the overloaded function, I don&#39;t get the error and the function is <i>properly</i> (i.e. properly but not specifically) documented with the base class docs."}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 1, "creation_date": 1560378331, "post_id": 41987147, "comment_id": 99721051, "body": "@albert FYI, I found a <a href=\"https://github.com/doxygen/doxygen/issues/2403\" rel=\"nofollow noreferrer\">bug report</a> on github about this problem. It&#39;s still happening in 1.8.11 and since the bug is still open, I would imagine it has not been worked on."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "reply_to_user": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "edited": false, "score": 0, "creation_date": 1560416750, "post_id": 41987147, "comment_id": 99731918, "body": "@AlexisWilke An open issue does not always mean that it has not been solved (might have been solved by means of another issue). You mention 1.8.11 an  this is from December 30 2015, the latest release is 1.8.15 and is from December 27 2018 so a lot of things might have changed (and even in the master / development version a lot of things might have been fixed). Anonymous parts are always a bit difficult."}], "answers": [{"comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1485981285, "post_id": 41988890, "comment_id": 71155734, "body": "That is not at all necessary, and also doesn&#39;t solve the problem. Thanks, though!"}], "tags": [], "owner": {"reputation": 170, "user_id": 4543427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549e4e00ae03b14d27637074b14e6c4d?s=128&d=identicon&r=PG&f=1", "display_name": "Sweekritee Singh", "link": "https://stackoverflow.com/users/4543427/sweekritee-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1485980146, "creation_date": 1485980146, "answer_id": 41988890, "question_id": 41987147, "link": "https://stackoverflow.com/questions/41987147/doxygen-complains-about-overloaded-functions-that-take-same-template-but-with-di/41988890#41988890", "title": "Doxygen complains about overloaded functions that take same template but with different template parameter", "body": "<p>As you are overloading a function, you should use /overload keyword , to add documentation for overloaded function.</p>\n\n<pre><code>template&lt;typename T&gt; class Array;\nusing UnsignedArray = Array&lt;unsigned&gt;\nusing IntegerArray = Array&lt;int&gt;\nusing FloatArray = Array&lt;float&gt;\n\n /// \\overload brief A function\nvoid function(UnsignedArray const&amp;);\n\n/// \\overload brief A function\nvoid function(IntegerArray const&amp;);\n\n/// \\overload brief A function\n void function(FloatArray const&amp;);\n</code></pre>\n\n<p>This will help doxygen to separately document them </p>\n"}, {"comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1560403953, "post_id": 56573663, "comment_id": 99725917, "body": "This is a pretty clever workaround! Thanks! My errors went away when I converted the various <code>function(xxx::Array&lt;type&gt; const&amp; in)</code> into a single templated function. That wasn&#39;t really a workaround, just a sensical simplification of my code, hence I didn&#39;t mention it here."}], "tags": [], "owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "is_accepted": true, "score": 2, "last_activity_date": 1560404036, "last_edit_date": 1560404036, "creation_date": 1560402372, "answer_id": 56573663, "question_id": 41987147, "link": "https://stackoverflow.com/questions/41987147/doxygen-complains-about-overloaded-functions-that-take-same-template-but-with-di/56573663#56573663", "title": "Doxygen complains about overloaded functions that take same template but with different template parameter", "body": "<p>I found a rather ugly way to make it work until the bug gets fixed in Doxygen. It seems to work at least for my case. I suppose it affects some links, though, but at this point I think I prefer to get the expected description for each function than having proper links and namespace names.</p>\n\n<p>I thought about the fact that Doxygen accepts preprocessor options which can be used to add a Doxygen specific <code>#define</code>. Here is my <code>doxygen.h</code> header:</p>\n\n<pre><code>#ifndef DOXYGEN_HPP\n#define DOXYGEN_HPP\n\n#ifdef DOXYGEN\n#define no_name             doxygen\n#else\n#define no_name\n#endif\n\n#endif\n</code></pre>\n\n<p>As we can see, I defined a macro named <code>no_name</code> and when I <em>compile</em> with Doxygen I set it to <code>doxygen</code> otherwise it remains empty.</p>\n\n<p>Now in my C++ files I do:</p>\n\n<pre><code>...\nnamespace no_name\n{\n    // static code goes here\n    ...\n} // no name namespace\n...\n</code></pre>\n\n<p>So now when compiling with <code>g++</code>, I don't get a name as expected. When <em>compiling</em> with Doxygen, however, the namespace is given a name: <code>doxygen</code> and I do not get that error anymore.</p>\n\n<p>For this magic to work, you also need to tweak your doxy file. Here are the relevant options:</p>\n\n<pre><code>MACRO_EXPANSION        = YES\nEXPAND_ONLY_PREDEF     = YES\nPREDEFINED             = DOXYGEN=1\nEXPAND_AS_DEFINED      = no_name\n</code></pre>\n\n<p>You may also need to fix the include path. It will be very important that the <code>doxygen.h</code> file gets included. I have CMake so it's easy for me:</p>\n\n<pre><code>INCLUDE_PATH           = @CMAKE_SOURCE_DIR@\n</code></pre>\n\n<p>At this point I've not seen anything breaking badly. So I am guessing it's a nice intermediate solution.</p>\n\n<p>One other thing, make sure that <code>INHERIT_DOCS</code> is <code>NO</code> because by default it's <code>YES</code> and that means you'd still get the base class description.</p>\n"}], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 56573663, "answer_count": 2, "score": 0, "last_activity_date": 1560404036, "creation_date": 1485974157, "last_edit_date": 1485981797, "question_id": 41987147, "link": "https://stackoverflow.com/questions/41987147/doxygen-complains-about-overloaded-functions-that-take-same-template-but-with-di", "title": "Doxygen complains about overloaded functions that take same template but with different template parameter", "body": "<p>[Edited to provide a minimal set to reproduce the issue.]</p>\n\n<p>I have C++ code similar to this (file.h):</p>\n\n<pre><code>namespace xxx {\n  template&lt; typename T &gt;\n  class Array {};\n\n  using sint = std::ptrdiff_t;\n  using uint = std::size_t;\n  using dfloat = double;\n  using IntegerArray = Array&lt; xxx::sint &gt;;\n  using UnsignedArray = Array&lt; xxx::uint &gt;;\n  using FloatArray = Array&lt; xxx::dfloat &gt;;\n}\n\n/// \\brief A namespace\nnamespace yyy {\nnamespace {\n\n  /// \\brief A function\n  inline out* function( xxx::UnsignedArray const&amp; in ) {}\n\n  /// \\brief A function\n  inline out* function( xxx::IntegerArray const&amp; in ) {}\n\n  /// \\brief A function\n  inline out* function( xxx::FloatArray const&amp; in ) {}\n\n  /// \\brief A class\n  class AAA {\n    public:\n      /// \\brief A class method\n      out* function( xxx::BBB const&amp; bbb ) {}\n};\n}}\n</code></pre>\n\n<p>The Doxyfile is:</p>\n\n<pre><code>OUTPUT_DIRECTORY       = out\nEXTRACT_ANON_NSPACES   = YES\nINPUT                  = .\nFILE_PATTERNS          = *.h\n</code></pre>\n\n<p>Doxygen complains with:</p>\n\n<pre><code>Searching for member function documentation...\n/Users/cris/tmp/doxygenissue/file.h:25: warning: no matching class member found for \n  out *anonymous_namespace file yyy::anonymous_namespace{file.h}::yyy::h::function(xxx::IntegerArray const &amp;in)\n\n/Users/cris/tmp/doxygenissue/file.h:28: warning: no matching class member found for \n  out *anonymous_namespace file yyy::anonymous_namespace{file.h}::yyy::h::function(xxx::FloatArray const &amp;in)\n</code></pre>\n\n<p>It doesn't seem to see the 2nd and 3rd functions. Only the first one shows up in the documentation. The anonymous namespace is needed to generate this error, as is the class with a method with the identical name.</p>\n\n<p>Does anybody know a workaround? Besides changing the name of the class method, that is...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1485974256, "post_id": 41987111, "comment_id": 71151969, "body": "Not sure if I follow. There&#39;s <code>friend</code> if you meant accessing private members."}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 1, "creation_date": 1485974265, "post_id": 41987111, "comment_id": 71151974, "body": "Are you familiar with the <code>friend</code> keyword? Also, it doesn&#39;t seem like <code>Container</code> uses <code>Contained</code> anywhere here."}, {"owner": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "edited": false, "score": 0, "creation_date": 1485974817, "post_id": 41987111, "comment_id": 71152263, "body": "Or make all the shared data members in its own class and pass it around."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6637454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59aa9a1d3bfd525063be0a63d66af1b5?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Molina Riddell", "link": "https://stackoverflow.com/users/6637454/juan-molina-riddell"}, "edited": false, "score": 0, "creation_date": 1485975234, "post_id": 41987263, "comment_id": 71152483, "body": "wow, that is like what I have been looking for, but after this declaration how should I define &#39;contmember&#39; so that:{somedata+=dataMember; cout&lt;&lt;somedata;} for example"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 15, "user_id": 6637454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59aa9a1d3bfd525063be0a63d66af1b5?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Molina Riddell", "link": "https://stackoverflow.com/users/6637454/juan-molina-riddell"}, "edited": false, "score": 0, "creation_date": 1485975964, "post_id": 41987263, "comment_id": 71152887, "body": "@JuanMolina You need to pass a reference or pointer to <code>Container</code>  to <code>Contained</code> in such case. You cannot directly dereference having only a forward declaration at hand."}, {"owner": {"reputation": 15, "user_id": 6637454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59aa9a1d3bfd525063be0a63d66af1b5?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Molina Riddell", "link": "https://stackoverflow.com/users/6637454/juan-molina-riddell"}, "edited": false, "score": 0, "creation_date": 1485979686, "post_id": 41987263, "comment_id": 71154900, "body": "is <code>Contained(this);</code> a right way to create a new object in order to work?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 15, "user_id": 6637454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59aa9a1d3bfd525063be0a63d66af1b5?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Molina Riddell", "link": "https://stackoverflow.com/users/6637454/juan-molina-riddell"}, "edited": false, "score": 0, "creation_date": 1485979856, "post_id": 41987263, "comment_id": 71154990, "body": "In case of taking references it should be <code>Contained(*this);</code>. But generally, yes."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 0, "last_activity_date": 1485976428, "last_edit_date": 1485976428, "creation_date": 1485974528, "answer_id": 41987263, "question_id": 41987111, "link": "https://stackoverflow.com/questions/41987111/in-class-composition-make-possible-for-contained-class-to-access-container-class/41987263#41987263", "title": "In class composition make possible for contained class to access container class variables", "body": "<p>You can use <code>friend</code> and a nested class to do so:</p>\n\n<p><strong><code>Container.h</code></strong>:</p>\n\n<pre><code>class Container\n{\n    class Contained; // &lt;&lt;&lt; Forward declare\n    friend class Contained; // &lt;&lt;&lt; Allow access from Contained\n    class Contained\n    {\n    public:\n        Contained(Container&amp; cont_) : cont(cont_) {}\n        int contmember();\n    private:\n         int somedata;\n         Container&amp; cont;\n    };\npublic:\n    Container();\n    void funcMember();\nprivate:\n    int dataMember;\n};\n</code></pre>\n\n<p>In another TU provide the implementation seeing the fully declared <code>Container</code> class:</p>\n\n<p><strong><code>Container.cpp</code></strong></p>\n\n<pre><code>#include \"Container.h\"\n\nint Container::Contained::contmember() {\n    return cont.dataMember + somedata;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6637454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59aa9a1d3bfd525063be0a63d66af1b5?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Molina Riddell", "link": "https://stackoverflow.com/users/6637454/juan-molina-riddell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 41987263, "answer_count": 1, "score": 0, "last_activity_date": 1485976428, "creation_date": 1485974033, "last_edit_date": 1485974689, "question_id": 41987111, "link": "https://stackoverflow.com/questions/41987111/in-class-composition-make-possible-for-contained-class-to-access-container-class", "title": "In class composition make possible for contained class to access container class variables", "body": "<p>First consider the class declaration:</p>\n\n<pre><code>class Container\n{\npublic:\n    Container();\n    void funcMember();\nprivate:\n    int dataMember;\n};\n\nclass Contained\n{\npublic:\n    Contained();\n    int contmember();\nprivate:\n    int somedata;\n};\n</code></pre>\n\n<p>Now the idea is that the <code>Contained</code> class is made for being declared inside the <code>Container</code> class so it can be declared more than once and be created and deleted whenever you want, in this case from <code>funcMember()</code> in the <code>Container</code> class.</p>\n\n<p>My question: Is there a way to make that every instance of <code>Contained</code> inside <code>Container</code> could access <code>dataMember</code> inside whatever <code>Container</code> instance?</p>\n\n<p>Note: several <code>Contained</code> objects could hold different values in the <code>somedata</code> variable.</p>\n"}, {"tags": ["c++", "winapi", "handle"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1485975475, "post_id": 41987026, "comment_id": 71152628, "body": "The handle might be valid but the object behind it has gone. That happened when you freed the console."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1485985905, "post_id": 41987026, "comment_id": 71158108, "body": "Note that this behaviour will vary depending on the version of Windows.  Anyways, you&#39;ll need to open a new console handle and associate it with the C++ standard output, just as you would if the application had been launched without a console.  I believe a search of Stack Overflow should turn up a solution."}, {"owner": {"reputation": 335, "user_id": 4529811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iW15kxQA8Nc/AAAAAAAAAAI/AAAAAAAAAEY/H8Zj8VwTcns/photo.jpg?sz=128", "display_name": "Vladislav", "link": "https://stackoverflow.com/users/4529811/vladislav"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1486024576, "post_id": 41987026, "comment_id": 71171532, "body": "@David Heffernan, I thought <code>ERROR_INVALID_HANDLE</code> means exactly <code>HANDLE</code> is invalid, not related object. Thanks, I realize my mistake."}], "owner": {"reputation": 335, "user_id": 4529811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iW15kxQA8Nc/AAAAAAAAAAI/AAAAAAAAAEY/H8Zj8VwTcns/photo.jpg?sz=128", "display_name": "Vladislav", "link": "https://stackoverflow.com/users/4529811/vladislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1485978570, "creation_date": 1485973719, "last_edit_date": 1485978570, "question_id": 41987026, "link": "https://stackoverflow.com/questions/41987026/catch-closure-or-invalidation-file-handle", "title": "Catch closure or invalidation file-HANDLE", "body": "<p>I have some problems with printing messages into console via <code>std::wcout</code>. Before use <code>FreeConsole</code> and <code>AttachConsole</code> everything works fine. But, after that printing does not work. I dig deeper into printing implementation, and it use <code>WriteConsoleW((HANDLE) _confh, ...)</code> where <code>_confh</code> is singleton:</p>\n\n<pre><code>_confh = (intptr_t) CreateFileW(\n  L\"CONOUT$\",\n  GENERIC_WRITE,\n  FILE_SHARE_READ | FILE_SHARE_WRITE,\n  NULL,\n  OPEN_EXISTING,\n  0,\n  NULL\n);\n</code></pre>\n\n<p><code>WriteConsoleW</code> fails with <code>LastErrorCode = ERROR_INVALID_HANDLE</code>.\nI know <code>_confh</code> value, and I want to find out when and why this handle becomes invalid. I put breakpoint into <code>CloseHandle()</code> method, but it is not caused.</p>\n\n<p>The question is, how <code>HANDLE</code> can become invalid without closure? Is it possible to determine when <code>HANDLE</code> becomes invalid?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1485973888, "post_id": 41987015, "comment_id": 71151764, "body": "It;s not clear from this description what the second function should do."}, {"owner": {"reputation": 6691, "user_id": 116846, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d2aed6e4a81b20e7c2ba7033ef849c25?s=128&d=identicon&r=PG", "display_name": "Erix", "link": "https://stackoverflow.com/users/116846/erix"}, "edited": false, "score": 3, "creation_date": 1485973897, "post_id": 41987015, "comment_id": 71151770, "body": "your teacher&#39;s wording for this problem is horrible."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485973943, "post_id": 41987015, "comment_id": 71151789, "body": "Related/dupe: <a href=\"http://stackoverflow.com/questions/24504582/how-to-test-whether-stringstream-operator-has-parsed-a-bad-type-and-skip-it\" title=\"how to test whether stringstream operator has parsed a bad type and skip it\">stackoverflow.com/questions/24504582/&hellip;</a>"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1485974096, "post_id": 41987015, "comment_id": 71151874, "body": "So does your teacher expect you to parse a more complicated input, for example, &quot;twenty three thousand, eight hundred and fifty seven&quot;?"}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 2, "creation_date": 1485974140, "post_id": 41987015, "comment_id": 71151897, "body": "I half jokingly feel this would be better suited to English Language as the the biggest issue seems to be not the program itself but that the teacher has written the spec absolutely incomprehensibly."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1485974173, "post_id": 41987015, "comment_id": 71151918, "body": "<i>&quot;I get that I need two methods, one int and one string, to overload.&quot;</i> That&#39;s not how I see it."}, {"owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "edited": false, "score": 1, "creation_date": 1485974173, "post_id": 41987015, "comment_id": 71151919, "body": "So it sounds like the function just asks the user to input a number and then reads and returns that number. The difference is that one version of the function takes a string for a custom prompt, the other one uses a default prompt."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1485974178, "post_id": 41987015, "comment_id": 71151921, "body": "Also, what does &quot;generic prompt&quot; even mean???"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1485974273, "post_id": 41987015, "comment_id": 71151977, "body": "@barak &quot;Input Something: &quot;"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1485974316, "post_id": 41987015, "comment_id": 71152001, "body": "@NeilButterworth: So what does &quot;If the caller does not supply a string for the prompt, the function should use a generic prompt&quot; mean then?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1485974372, "post_id": 41987015, "comment_id": 71152031, "body": "@barak What I said. Something that asks the user for some input."}, {"owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1485974379, "post_id": 41987015, "comment_id": 71152035, "body": "@barakmanos Just that the function should use some default string as the prompt. Like &quot;Enter a number&quot;."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1485975080, "post_id": 41987193, "comment_id": 71152397, "body": "std::flush is probably redundant, as cin and cout are tied by default."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1485975166, "post_id": 41987193, "comment_id": 71152444, "body": "@NeilButterworth: Yeah probably"}, {"owner": {"reputation": 1, "user_id": 7502045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/218d8d2b423aa347d789ed0c0902848f?s=128&d=identicon&r=PG&f=1", "display_name": "Proxy_Prone", "link": "https://stackoverflow.com/users/7502045/proxy-prone"}, "edited": false, "score": 0, "creation_date": 1485975675, "post_id": 41987193, "comment_id": 71152733, "body": "I wish I had misunderstood what he was trying to explain, but his exact words were &quot;you should be able to enter 5 or five&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1, "user_id": 7502045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/218d8d2b423aa347d789ed0c0902848f?s=128&d=identicon&r=PG&f=1", "display_name": "Proxy_Prone", "link": "https://stackoverflow.com/users/7502045/proxy-prone"}, "edited": false, "score": 1, "creation_date": 1485976243, "post_id": 41987193, "comment_id": 71153041, "body": "@Proxy_Prone: That is not what the assignment text says, so either there is more that you did not quote, or the teacher is on some kind of drugs. Either way, I have demonstrated where the default arguments vs overloading comes into it. You may need to change what the function does with its input in order to satisfy the requirements, but that doesn&#39;t have anything to do with overloading."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485976437, "post_id": 41987193, "comment_id": 71153140, "body": "No need for drugs. I&#39;ve found a baseball bat can induce many of the same symptoms."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1485974631, "last_edit_date": 1485974631, "creation_date": 1485974292, "answer_id": 41987193, "question_id": 41987015, "link": "https://stackoverflow.com/questions/41987015/i-need-some-insight-on-c-overloading-with-string-and-int/41987193#41987193", "title": "I need some insight on c++; overloading with string and int", "body": "<p>The teacher's wording translates into this:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\n/**\n * Prompts the user for an integer input on standard input, and\n * returns it. The prompt text is #prompt_text, or \"Enter input please\"\n * if not given.\n * \n * @throws std::runtime_error if input is not an integer\n */\nint promptForInput(const std::string&amp; prompt_text = \"Enter input please\")\n{\n   std::cout &lt;&lt; prompt_text &lt;&lt; \": \" &lt;&lt; std::flush;\n\n   int result;\n   if (std::cin &gt;&gt; result)\n      return result;\n   else\n      throw std::runtime_error(\"Could not understand your input\");\n}\n\nint main()\n{\n   const int x = promptForInput();\n   std::cout &lt;&lt; \"You entered: \" &lt;&lt; x &lt;&lt; std::endl;\n\n   const int y = promptForInput(\"Gimme intz lol\");\n   std::cout &lt;&lt; \"You entered: \" &lt;&lt; y &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>With overloading rather than default arguments, the function is like this:</p>\n\n<pre><code>/**\n * Prompts the user for an integer input on standard input, and\n * returns it. The prompt text is #prompt_text.\n * \n * @throws std::runtime_error if input is not an integer\n */\nint promptForInput(const std::string&amp; prompt_text)\n{\n   std::cout &lt;&lt; prompt_text &lt;&lt; \": \" &lt;&lt; std::flush;\n\n   int result;\n   if (std::cin &gt;&gt; result)\n      return result;\n   else\n      throw std::runtime_error(\"Could not understand your input\");\n}\n\n/**\n * Prompts the user for an integer input on standard input, and\n * returns it. The prompt text is \"Enter input please\".\n * \n * @throws std::runtime_error if input is not an integer\n */\nint promptForInput()\n{\n   return promptForInput(\"Enter input please\");\n}\n</code></pre>\n\n<p>In both cases, the output of this program is like this:</p>\n\n<pre><code>[tomalak@andromeda ~]$ ./test2\nEnter input please: 4\nYou entered: 4\nGimme intz lol: 62\nYou entered: 62\n</code></pre>\n\n<p>If you enter a non-integer, you'll get a non-descript process error instead:</p>\n\n<pre><code>[tomalak@andromeda ~]$ ./test2\nEnter input please: lol\nterminate called after throwing an instance of 'std::runtime_error'\n  what():  Could not understand your input\nAborted (core dumped)\n</code></pre>\n\n<p><em>(N.B. I recommend a <code>try</code>/<code>catch</code> situation in <code>main</code>, but I couldn't be bothered.)</em></p>\n\n<hr>\n\n<blockquote>\n  <p>But after talking with my teacher, he explained that with the program a user should be able to enter and int 5 or a string \"five\", and the program should be able to determine if it is an int or string and output it.</p>\n</blockquote>\n\n<p>I can't imagine that this is right; it seems pointless, and it has nothing to do with the quoted assignment. I believe you misunderstood this conversation.</p>\n"}], "owner": {"reputation": 1, "user_id": 7502045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/218d8d2b423aa347d789ed0c0902848f?s=128&d=identicon&r=PG&f=1", "display_name": "Proxy_Prone", "link": "https://stackoverflow.com/users/7502045/proxy-prone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485974631, "creation_date": 1485973674, "last_edit_date": 1485973743, "question_id": 41987015, "link": "https://stackoverflow.com/questions/41987015/i-need-some-insight-on-c-overloading-with-string-and-int", "title": "I need some insight on c++; overloading with string and int", "body": "<p>We got this exercise in class:</p>\n\n<blockquote>\n  <p>Using default arguments, write a function that ask the user for a number and returns that number. The function should accept a string prompt from the calling code. If the caller does not supply a string for the prompt, the function should use a generic prompt. Next, using function overloading, write a function that achieves the same results.</p>\n</blockquote>\n\n<p>The wording is confusing, but I get that I need two methods, one int and one string, to overload.</p>\n\n<p>But after talking with my teacher, he explained that with the program a user should be able to enter and int 5 or a string \"five\", and the program should be able to determine if it is an int or string and output it.</p>\n\n<p>I've looked up this exercise and there were several \"solutions\", none of which worked within my teacher's parameters. </p>\n\n<p>Is it possible to create a program like what my teacher explained?</p>\n\n<p>If not, does anyone have any other interpretations of the instructions?</p>\n"}, {"tags": ["c++", "crash", "signals", "posix", "core"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485976121, "post_id": 41986933, "comment_id": 71152969, "body": "GDB stops when it sees a signal whether you handle it in your code or not. Digging up a nice quote for my answer found an existing potential dupe: <a href=\"http://stackoverflow.com/questions/6008140/how-to-debug-programes-using-signals\">How to debug programes using signals?</a>"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1486818355, "post_id": 41986933, "comment_id": 71515782, "body": "Calling <code>abort()</code> terinates the execution with a core dump."}], "owner": {"reputation": 435, "user_id": 5451820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3Me0j.jpg?s=128&g=1", "display_name": "Kira", "link": "https://stackoverflow.com/users/5451820/kira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485973535, "creation_date": 1485973381, "last_edit_date": 1485973535, "question_id": 41986933, "link": "https://stackoverflow.com/questions/41986933/handling-signal-keeping-crash-point", "title": "Handling signal keeping crash point", "body": "<p>Folks, I would like to handle signals like SIGSEGV, but still crash the application so I can get a core dump.</p>\n\n<p>On my approach, in my signal handler I unregister the signal handler so I can crash the application instead of getting into a loop, bellow follows a sample code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;csignal&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nvoid signalHandler( int signum )\n{\n   signal(SIGFPE, SIG_DFL);\n   raise(signum); // &lt;-- should I keep this line?\n}\n\nint main ()\n{\n   signal(SIGFPE, signalHandler);  \n\n   int a, b=2, c=0;\n   a=b/c;\n\n   return 0;\n}\n</code></pre>\n\n<p>Now to the question:</p>\n\n<p>I'm not sure if I should keep that <code>raise</code> line. Doing some testing I've found out that if I keep it or not in both cases I get the gdb pointing to the offending line <code>a=b/c;</code>, however I don't quite get this.</p>\n\n<p>It makes sense that if I don't call <code>raise</code> the offending line will be re-executed after the signal handler and thus I'll get the core dump that I expect, however if I manually call <code>raise</code> what I would expect is the offending line to be the line which is calling <code>raise</code>. Can someone put some light on this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1485972188, "post_id": 41986579, "comment_id": 71150848, "body": "Could you please fix your indentation?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1485972327, "post_id": 41986579, "comment_id": 71150931, "body": "<code>BOOL</code> is not in C++11. You probably mean <code>bool</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1485972397, "post_id": 41986579, "comment_id": 71150976, "body": "@BasileStarynkevitch: Probably using old Microsoft type aliases"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5749114"}, "edited": false, "score": 0, "creation_date": 1485972499, "post_id": 41986579, "comment_id": 71151021, "body": "Yes it uses Visual Studio on Microsoft APIs."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1485972285, "post_id": 41986614, "comment_id": 71150904, "body": "You could have just tested it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5749114"}, "edited": false, "score": 0, "creation_date": 1485972465, "post_id": 41986614, "comment_id": 71150997, "body": "I don&#39;t have a way of testing it as it&#39;s some broken piece of code that cannot be build."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1485972492, "post_id": 41986614, "comment_id": 71151016, "body": "@DonK: Why do you care what it does if it&#39;s so broken that it doesn&#39;t build? It doesn&#39;t do anything!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 6, "last_activity_date": 1485972233, "creation_date": 1485972233, "answer_id": 41986614, "question_id": 41986579, "link": "https://stackoverflow.com/questions/41986579/will-code-execute-after-catch-block/41986614#41986614", "title": "Will code execute after CATCH block?", "body": "<blockquote>\n  <p>So is it possible that it will come out of the CATCH block and execute the line of code <code>ret = pObj-&gt;GetAllNumbers();</code>?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>If it does, then [I] would [expect] the code to crash.</p>\n</blockquote>\n\n<p>Me too.</p>\n\n<blockquote>\n  <p>And also if it hits a CATCH block will it go to the end of the function and call return ret?</p>\n</blockquote>\n\n<p>Yes.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5749114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1485972856, "creation_date": 1485972094, "last_edit_date": 1485972856, "question_id": 41986579, "link": "https://stackoverflow.com/questions/41986579/will-code-execute-after-catch-block", "title": "Will code execute after CATCH block?", "body": "<p>This should be pretty easy question for many C++ experts.</p>\n\n<p>I have some C++ code like below.</p>\n\n<pre><code>BOOL FindNumbersInObj() {\n\n    BOOL ret = true;\n\n    try {\n        //Do bunch of things here...\n        CMyObj pObj;\n\n        try {\n            pObj-&gt;GetMyObjectPtr();\n        }\n        catch (MyException ex) {\n            pObj = NULL;\n            ret = false;\n        }\n        ret = pObj-&gt;GetAllNumbers();\n        //Do something here too....\n    }\n    catch (MyException ex) {\n         //Log Error Message\n         ret = false;\n    } \n    return ret;\n}\n</code></pre>\n\n<p>As you see there's a TRY inside another TRY. In the CATCH it sets the pObj to NULL. So is it possible that it will come out of the CATCH block and execute the line of code \"<strong>ret = pObj->GetAllNumbers();</strong>\"? If it does, then i would except the code to crash.</p>\n\n<p>This is some leagcy/old code am looking at. Please give your opinion on having TRY inside another TRY.</p>\n\n<p>And also if it hits a CATCH block will it go to the end of the function and call <strong>return ret</strong>?</p>\n"}, {"tags": ["c++", "zip"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485971775, "post_id": 41986466, "comment_id": 71150610, "body": "What does identify <i>the part</i> of a compressed file?"}, {"owner": {"reputation": 1991, "user_id": 3768552, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ab5b47d4acd647c6d9f2309bda14c6da?s=128&d=identicon&r=PG&f=1", "display_name": "takje", "link": "https://stackoverflow.com/users/3768552/takje"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485971823, "post_id": 41986466, "comment_id": 71150641, "body": "A begin and end position for seek in the normal binary file (modified in question)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485971848, "post_id": 41986466, "comment_id": 71150656, "body": "Are you supposed to extract a single file from the archive? Not that it matters, I&#39;d still recommend you find a portable library to handle it for you."}, {"owner": {"reputation": 1991, "user_id": 3768552, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ab5b47d4acd647c6d9f2309bda14c6da?s=128&d=identicon&r=PG&f=1", "display_name": "takje", "link": "https://stackoverflow.com/users/3768552/takje"}, "edited": false, "score": 0, "creation_date": 1485971919, "post_id": 41986466, "comment_id": 71150700, "body": "No, currently my archive contains multiple files, but I only want to read a few bytes from one of the files."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485972281, "post_id": 41986466, "comment_id": 71150901, "body": "@takje Where should the begin/end positions of a particularly compressed files should be stored and retrieved from? The the <code>zip</code> format doesn&#39;t support that IIRC. Besides that your question is OT, because it asks for recommendation of a 3rd party resource."}, {"owner": {"reputation": 1991, "user_id": 3768552, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ab5b47d4acd647c6d9f2309bda14c6da?s=128&d=identicon&r=PG&f=1", "display_name": "takje", "link": "https://stackoverflow.com/users/3768552/takje"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485981427, "post_id": 41986466, "comment_id": 71155811, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 Modified my question to ask for a c++ solution instead."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485981506, "post_id": 41986466, "comment_id": 71155851, "body": "@takje There&#39;s no standard c++ solution to tackle that problem, sorry."}], "answers": [{"tags": [], "owner": {"reputation": 1991, "user_id": 3768552, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ab5b47d4acd647c6d9f2309bda14c6da?s=128&d=identicon&r=PG&f=1", "display_name": "takje", "link": "https://stackoverflow.com/users/3768552/takje"}, "is_accepted": true, "score": 2, "last_activity_date": 1486024037, "last_edit_date": 1495542331, "creation_date": 1485981748, "answer_id": 41989374, "question_id": 41986466, "link": "https://stackoverflow.com/questions/41986466/read-only-a-part-of-a-binary-zip-file/41989374#41989374", "title": "Read only a part of a binary zip file", "body": "<p>Apparently there is no general way to seek in zip files. This was according to:</p>\n\n<ul>\n<li>A comment of @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6.</li>\n<li>A general thread on searching in zipped files <a href=\"https://stackoverflow.com/questions/429987/compression-formats-with-good-support-for-random-access-within-archives\">here</a>.</li>\n<li>A similar question <a href=\"https://stackoverflow.com/questions/12821961/seek-a-file-within-a-zip-file-in-python-without-passing-it-to-memory\">here</a> (although the question itself is about Python). </li>\n</ul>\n"}], "owner": {"reputation": 1991, "user_id": 3768552, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ab5b47d4acd647c6d9f2309bda14c6da?s=128&d=identicon&r=PG&f=1", "display_name": "takje", "link": "https://stackoverflow.com/users/3768552/takje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 41989374, "answer_count": 1, "score": 1, "last_activity_date": 1486024037, "creation_date": 1485971707, "last_edit_date": 1495542734, "question_id": 41986466, "link": "https://stackoverflow.com/questions/41986466/read-only-a-part-of-a-binary-zip-file", "title": "Read only a part of a binary zip file", "body": "<p>I am looking for a way to read a part of a binary zip file (starting position and number of bytes to read). Currently I'm investigating this on Windows, but optimally it would be platform independent. For a normal binary file (unzipped), this can be achieved in the following way:</p>\n\n<pre><code>//Open the file\nstd::ifstream file (path, std::ios::in | std::ios::binary | std::ios::ate);\n\n//Move to the position to start reading\nfile.seekg(64); \n\n//Read 128 bytes of the file\nstd::vector&lt;unsigned char&gt; mDataBuffer;\nmDataBuffer.resize( 128 ) ;\nfile.read( (char*)( &amp;mDataBuffer[0]), 128 ) ;\n\n//Read as string\nstd::string s_data( mDataBuffer.begin(), mDataBuffer.end());\n\nfile.close()\n</code></pre>\n\n<p>This example is a slightly modified version of <a href=\"https://stackoverflow.com/questions/21433194/c-read-part-of-a-binary-file-into-a-bitset\">this one</a>.</p>\n\n<p>There are also many unzip packages available (e.g. zlib or minizip). Each covering functions to unzip a file. I could simply unzip my zipped file, save it on the disk and read it using the method above.</p>\n\n<p>Unfortunately, I didn't find an example to read only a part of a binary zip file (if that is even possible), straight from the zipped file. Because my file is quite large, I don't want to unzip it <em>completely</em> onto the hard drive. Furthermore, the part that I want to read is quite small, so it would be a waste of cpu time to completely unzip the file. For the same reasons, I also don't want to decompress the <em>complete</em> file into my memory. I am looking for a genuine way to read only a <em>part</em> of a zipped file.</p>\n\n<p>How could this be accomplished in c++? </p>\n"}, {"tags": ["c++", "class", "templates", "constructor", "initialization-list"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1485971280, "post_id": 41986199, "comment_id": 71150303, "body": "<i>i can&#39;t assign 0 to, for example, a char (and i know that)</i> That&#39;s not true. You can certainly initialize a <code>char</code> with <code>0</code>."}, {"owner": {"reputation": 83, "user_id": 7337963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae0d1e98d5ad4c1e0279584dc43f9374?s=128&d=identicon&r=PG&f=1", "display_name": "user7337963", "link": "https://stackoverflow.com/users/7337963/user7337963"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1485971511, "post_id": 41986199, "comment_id": 71150438, "body": "Yes, my bad, it did compile but i got EXC_BAD_ACCESS(code=1, address=0x0)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1485971514, "post_id": 41986199, "comment_id": 71150442, "body": "That&#39;s most likely because you didn&#39;t initialize <code>arr</code> correctly."}, {"owner": {"reputation": 83, "user_id": 7337963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae0d1e98d5ad4c1e0279584dc43f9374?s=128&d=identicon&r=PG&f=1", "display_name": "user7337963", "link": "https://stackoverflow.com/users/7337963/user7337963"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1485971570, "post_id": 41986199, "comment_id": 71150481, "body": "How should i do it?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1485971649, "post_id": 41986199, "comment_id": 71150530, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. That will be helpful for potential answerers."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7337963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae0d1e98d5ad4c1e0279584dc43f9374?s=128&d=identicon&r=PG&f=1", "display_name": "user7337963", "link": "https://stackoverflow.com/users/7337963/user7337963"}, "edited": false, "score": 0, "creation_date": 1485971753, "post_id": 41986449, "comment_id": 71150602, "body": "Thank you! I will accept the answer but I can&#39;t vote it because my reputation is less than 15."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1485971890, "last_edit_date": 1485971890, "creation_date": 1485971639, "answer_id": 41986449, "question_id": 41986199, "link": "https://stackoverflow.com/questions/41986199/initialization-list-template-variable/41986449#41986449", "title": "Initialization list template variable", "body": "<blockquote>\n  <p>How am I supposed to initialize the <code>def_value</code> correctly?</p>\n</blockquote>\n\n<p>Simply like e.g. this:</p>\n\n<pre><code>myClass(): arr(nullptr), size(0), capacity(0), def_value() {};\n                                            // ^^^^^^^^^^^\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>myClass(): arr(nullptr), size(0), capacity(0), def_value{} {};\n                                            // ^^^^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7337963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae0d1e98d5ad4c1e0279584dc43f9374?s=128&d=identicon&r=PG&f=1", "display_name": "user7337963", "link": "https://stackoverflow.com/users/7337963/user7337963"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 41986449, "answer_count": 1, "score": 1, "last_activity_date": 1485971890, "creation_date": 1485970914, "last_edit_date": 1485971556, "question_id": 41986199, "link": "https://stackoverflow.com/questions/41986199/initialization-list-template-variable", "title": "Initialization list template variable", "body": "<p>I tried to look for this on the site but i can't find exactly what I need.<br>\nBasically I need to know what is the correct way of initialize a template variable in the default constructor.<br>\nEg.:  </p>\n\n<pre><code>template&lt;typename T&gt;\nclass myClass{\n   T *arr;        // no problem with this.\n   int size;\n   int capacity;\n   T def_value;   // how do I initialize this template variable in the constructor?\n</code></pre>\n\n<p>I tried something like:<br/></p>\n\n<pre><code>myClass(): arr(0), size(0), capacity(0), def_value(0){};\n</code></pre>\n\n<p>But it doesn't compile because I can't assign <code>0</code> to, for example, a char (and I know that).\nHow am I supposed to initialize the <code>def_value</code> correctly?</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 1, "creation_date": 1485971035, "post_id": 41986187, "comment_id": 71150155, "body": "It&#39;s the name of a base class. It&#39;s no different than <code>struct A : B { A() : B() {} };</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1485971051, "post_id": 41986187, "comment_id": 71150170, "body": "Its a constructor call for the base class."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1485971315, "post_id": 41986187, "comment_id": 71150322, "body": "@NathanOliver: It&#39;s not a constructor call; we never &quot;call&quot; a constructor. However we do here name the base class and provide an initialiser."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1485972646, "creation_date": 1485972646, "answer_id": 41986735, "question_id": 41986187, "link": "https://stackoverflow.com/questions/41986187/about-type-in-c-stl/41986735#41986735", "title": "about type in C++ STL", "body": "<blockquote>\n  <p>I wonder what does _Tp_alloc_type() mean?</p>\n</blockquote>\n\n<p>As you can see in this code:</p>\n\n<pre><code>  struct _Vector_impl\n  : public _Tp_alloc_type\n</code></pre>\n\n<p><code>_Vector_impl</code> is inherited from <code>_Tp_alloc_type</code> so code:</p>\n\n<pre><code>_Vector_impl()\n: _Tp_alloc_type() ...\n</code></pre>\n\n<p>means: initialize base class <code>_Tp_alloc_type</code> through it's default ctor</p>\n"}], "owner": {"reputation": 101, "user_id": 3250528, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40ce8c08f839e792cfb988ea84379818?s=128&d=identicon&r=PG&f=1", "display_name": "SuperBald", "link": "https://stackoverflow.com/users/3250528/superbald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485976524, "creation_date": 1485970883, "last_edit_date": 1485976524, "question_id": 41986187, "link": "https://stackoverflow.com/questions/41986187/about-type-in-c-stl", "title": "about type in C++ STL", "body": "<p>Here is copied from GCC STL bits/stl_vector.h</p>\n\n<pre><code>template&lt;typename _Tp, typename _Alloc&gt;\nstruct _Vector_base\n{\n  typedef typename __gnu_cxx::__alloc_traits&lt;_Alloc&gt;::template\n    rebind&lt;_Tp&gt;::other _Tp_alloc_type;\n  typedef typename __gnu_cxx::__alloc_traits&lt;_Tp_alloc_type&gt;::pointer\n    pointer;\n\n  struct _Vector_impl\n  : public _Tp_alloc_type\n  {\npointer _M_start;\npointer _M_finish;\npointer _M_end_of_storage;\n\n_Vector_impl()\n: _Tp_alloc_type(), _M_start(0), _M_finish(0), _M_end_of_storage(0)\n{ }\n</code></pre>\n\n<p>I wonder what does <code>_Tp_alloc_type()</code> mean? <code>_Tp_alloc_type</code> is a type, defined as </p>\n\n<pre><code>typedef typename __gnu_cxx::__alloc_traits&lt;_Alloc&gt;::template\nrebind&lt;_Tp&gt;::other _Tp_alloc_type;\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "cppunit"], "answers": [{"tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 4, "last_activity_date": 1486922987, "last_edit_date": 1495539926, "creation_date": 1486630311, "answer_id": 42132006, "question_id": 41986088, "link": "https://stackoverflow.com/questions/41986088/what-are-examples-of-test-suite-property-uses-in-cppunit-cppunit-test-suite-pr/42132006#42132006", "title": "What are examples of test suite property uses in CPPUnit? (CPPUNIT_TEST_SUITE_PROPERTY)", "body": "<p>According to <a href=\"http://cppunit.sourceforge.net/doc/cvs/_xml_input_helper_8h.html#a0\" rel=\"nofollow noreferrer\">this piece of code</a>, it looks like you should be able to retrieve the property at some point while you are creating your test suite to pass it as a parameter to a specific test.</p>\n\n<p>Maybe the goal was to allow you to do:</p>\n\n<pre><code>#define CPPUNIT_TEST_WITH_PARAM(testMethod,param) \\\n    CPPUNIT_TEST_ADD( new CppUnit::ParameterizedTestCase&lt;ThisTestFixtureType&gt;( \\\n                                        context.getTestNameFor( #testMethod ), \\\n                                        #testMethod, \\\n                                        &amp;TestFixtureType::testMethod, \\\n                                        context.makeFixture(), \\\n                                        context.getStringProperty( param ) ) )\n\nCPPUNIT_TEST_SUITE( MyTestSuite);\nCPPUNIT_TEST_SUITE_PROPERTY( \"param1\", \"foo\" )\nCPPUNIT_TEST_SUITE_PROPERTY( \"param2\", \"bar\" )\nCPPUNIT_CPPUNIT_TEST_WITH_PARAM( func, \"param1\" )\nCPPUNIT_CPPUNIT_TEST_WITH_PARAM( func, \"param2\" )\nCPPUNIT_TEST_SUITE_END();\n\nvoid func( const std::string&amp; param ); \n</code></pre>\n\n<p>And this would have ended calling <code>func(\"foo\")</code> and <code>func(\"bar\")</code>. Which would be nice because it would have made it possible to add string parametrized tests.</p>\n\n<p>However, and <strong>this is just a guess attempt</strong>, as <code>ParameterizedTestCase</code> is not part of 1.12.1 old release, nor is it part of more <a href=\"https://www.freedesktop.org/wiki/Software/cppunit/\" rel=\"nofollow noreferrer\">recent releases</a> (so does <code>CPPUNIT_TEST_ADD</code> macro), I believe this is apparently something that was in a release plan but aborted and the macro <code>CPPUNIT_TEST_SUITE_PROPERTY</code> remains useless here. The <code>getStringProperty</code> also remains, and I found no way it could be used properly.</p>\n\n<p>To conclude, this looks like a broken stuff and was anyway apparently not meant to share setup/teardown code, but more to have parametrized tests (which can be done by templates actually, see <a href=\"https://stackoverflow.com/a/41566342/3336423\">this post</a>). </p>\n"}], "owner": {"reputation": 19547, "user_id": 10755, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/55eac37a13741fa7bd2145de94fd4f28?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10755/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 2, "accepted_answer_id": 42132006, "answer_count": 1, "score": 7, "last_activity_date": 1486922987, "creation_date": 1485970505, "last_edit_date": 1485971283, "question_id": 41986088, "link": "https://stackoverflow.com/questions/41986088/what-are-examples-of-test-suite-property-uses-in-cppunit-cppunit-test-suite-pr", "title": "What are examples of test suite property uses in CPPUnit? (CPPUNIT_TEST_SUITE_PROPERTY)", "body": "<p>I joined a project where CPPUnit is used for unit testing and will be adding some tests that probably share setup and teardown code.  In researching this more I came across </p>\n\n<pre><code>CPPUNIT_TEST_SUITE_PROPERTY\n</code></pre>\n\n<p>(from <a href=\"https://people.freedesktop.org/~mmohrhard/cppunit/group___writing_test_fixture.html\">https://people.freedesktop.org/~mmohrhard/cppunit/group___writing_test_fixture.html</a>)</p>\n\n<p>Its description says </p>\n\n<blockquote>\n  <p>Adds a property to the test suite builder context.</p>\n</blockquote>\n\n<p><a href=\"http://cppunit.sourceforge.net/doc/cvs/group___writing_test_fixture.html\">http://cppunit.sourceforge.net/doc/cvs/group___writing_test_fixture.html</a> says the following:</p>\n\n<blockquote>\n  <p>Adds a property to the test suite builder context</p>\n</blockquote>\n\n<p>I am not sure what the expected use or purpose of that would be, though it <strong><em>appears</em></strong> like it could be useful for sharing common information, etc.  I don't see examples of its use.  </p>\n\n<p><strong>What is the value of this and are there some examples to point me to?</strong></p>\n"}, {"tags": ["c++", "visual-studio-2015", "embedded-resource"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1485969657, "post_id": 41985783, "comment_id": 71149263, "body": "The compiler does not take the &#39;rc&#39; file as input, so writing C code in it is pointless (and probably harmful as well, because some other module within VS takes it as input, and that module expect a certain language (other than C))."}, {"owner": {"reputation": 655, "user_id": 7484210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ghd9L.jpg?s=128&g=1", "display_name": "0x400921FB54442D18", "link": "https://stackoverflow.com/users/7484210/0x400921fb54442d18"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1485969774, "post_id": 41985783, "comment_id": 71149352, "body": "@barakmanos It is able to understand preprocessor statements."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1485970106, "post_id": 41985783, "comment_id": 71149574, "body": "You need to define <code>_DEBUG</code> on the <code>rc</code> command as well as the <code>cl</code> command.  See the file properties for the .rc file in VS.  See also <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa381055(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>  Also <code>defined</code> may not be supported only <code>#ifdef</code> is documented - need to test."}, {"owner": {"reputation": 619, "user_id": 4224163, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/896671a6e44f12929d3c9bdbb297a75a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Semenyuk", "link": "https://stackoverflow.com/users/4224163/alexey-semenyuk"}, "edited": false, "score": 1, "creation_date": 1485970221, "post_id": 41985783, "comment_id": 71149662, "body": "Are you 100% sure you configured your project to define <i>_DEBUG</i> macro for this .rc file? If &#39;yes&#39;, then probably try replace <code>#if defined(_DEBUG)</code> with <code>#ifdef _DEBUG</code>. The second should work according to the spec - <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa381033(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a> . Preprocessor directives supported by .rc files are not the same that supported for C/C++ sources."}, {"owner": {"reputation": 655, "user_id": 7484210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ghd9L.jpg?s=128&g=1", "display_name": "0x400921FB54442D18", "link": "https://stackoverflow.com/users/7484210/0x400921fb54442d18"}, "edited": false, "score": 0, "creation_date": 1485970959, "post_id": 41985783, "comment_id": 71150120, "body": "Is there a way to set the same preprocessor definitions for resource compiler and compiler without having to copy paste it every time a change is made to them?"}, {"owner": {"reputation": 158, "user_id": 6398999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defb109bb54a9c25668039b82bcd3b48?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Liang", "link": "https://stackoverflow.com/users/6398999/steven-liang"}, "edited": false, "score": 0, "creation_date": 1604300465, "post_id": 41985783, "comment_id": 114294978, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16850863/vs-ignores-symbol-debug-in-resources-rc-visual-studio-bug\">VS ignores symbol _Debug in Resources.rc</a>"}], "owner": {"reputation": 655, "user_id": 7484210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ghd9L.jpg?s=128&g=1", "display_name": "0x400921FB54442D18", "link": "https://stackoverflow.com/users/7484210/0x400921fb54442d18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1308, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485975666, "creation_date": 1485969590, "last_edit_date": 1485975666, "question_id": 41985783, "link": "https://stackoverflow.com/questions/41985783/using-preprocessor-macros-in-rc-files", "title": "Using Preprocessor Macros in .rc Files", "body": "<p>I have a C++ program in Visual Studio Community 2015 where I need to include a different resource for debug and release versions. Debug and release versions are differentiated by defining the <code>_DEBUG</code> macro for the debug version, otherwise leaving it undefined.<br><br>\nSo naturally I tried to put a <code>#if defined(_DEBUG)</code> into my .rc file, but when compiling the resource compiler acts like the macro isn't defined and compiles it as it was a release version (when it is not).<br>\n<br>\nHow do I make the resource compiler see the macro?</p>\n"}, {"tags": ["c++", "c++11", "templates", "dynamic"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1485969601, "post_id": 41985745, "comment_id": 71149222, "body": "There is no such thing as a &quot;pure virtual class&quot;. There are pure virtual functions, and there are abstract classes."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1485969639, "post_id": 41985745, "comment_id": 71149249, "body": "related/dupe: <a href=\"http://stackoverflow.com/questions/29896202/stdarray-as-a-parameter-in-virtual-function\" title=\"stdarray as a parameter in virtual function\">stackoverflow.com/questions/29896202/&hellip;</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1485969686, "post_id": 41985745, "comment_id": 71149281, "body": "@PeteBecker I would describe a class that contains nothing but pure virtual functions as a pure virtual class."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1485969721, "post_id": 41985745, "comment_id": 71149309, "body": "@user2079303 You would?  I would call it an abstract class.  That is also the term used in the standard."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1485969740, "post_id": 41985745, "comment_id": 71149326, "body": "@user2079303 I&#39;d call that an <i>interface</i> ;-)."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1485969792, "post_id": 41985745, "comment_id": 71149362, "body": "@NathanOliver A class is abstract if it contains any pure virtual functions. Therefore <i>pure virtual classes</i> are a subset of abstract classes."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1485970530, "post_id": 41985745, "comment_id": 71149839, "body": "Where&#39;s the dynamic array?"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1485970593, "post_id": 41985745, "comment_id": 71149892, "body": "consider using <a href=\"https://github.com/Microsoft/gsl\" rel=\"nofollow noreferrer\"><code>gsl::span&lt;int&gt;</code></a> instead of rolling your own."}, {"owner": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "edited": false, "score": 0, "creation_date": 1485970608, "post_id": 41985745, "comment_id": 71149903, "body": "How about passing <code>std::array</code> or <code>std::stack_array</code> ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "edited": false, "score": 1, "creation_date": 1485970721, "post_id": 41985745, "comment_id": 71149975, "body": "@SebTu That&#39;s basically having the same problem (<code>LENGTH</code>)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1485971565, "post_id": 41985745, "comment_id": 71150479, "body": "There&#39;s nothing dynamic in there. A dynamic array is e.g. std::vector."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1485972652, "post_id": 41985745, "comment_id": 71151106, "body": "I don&#39;t think (might be mistaken) what you want is not possible. However, if go up a level (what is the actual functionality you try to achieve / how do you want to use your interface) there might be a solution to your problem."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1485972988, "post_id": 41985745, "comment_id": 71151277, "body": "Can N be arbitrary or can it have only a handful of different values?"}, {"owner": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1485974184, "post_id": 41985745, "comment_id": 71151927, "body": "@Quentin I guess your right, edited title."}, {"owner": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1485976475, "post_id": 41985745, "comment_id": 71153163, "body": "@MikeMB A handful"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485969865, "post_id": 41985862, "comment_id": 71149416, "body": "How do you determine what <code>LENGTH</code> should be?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485970278, "post_id": 41985862, "comment_id": 71149692, "body": "@NathanOliver Obviously, it needs to be known at compile time by the class implementing <code>send_struct</code>. See added demo."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1485970479, "post_id": 41985862, "comment_id": 71149812, "body": "No sure that that helps.  Since this is a member function, if they need to cast it back to the actual <code>MyStruct&lt;&gt;</code> then they can&#39;t get the size."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485970609, "post_id": 41985862, "comment_id": 71149904, "body": "@Nathan I&#39;d use something like a free function taking a good ole c-style opaque pointer."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485971211, "post_id": 41985862, "comment_id": 71150262, "body": "@NathanOliver It depends on what OP needs. But just to clarify, when you write &quot;<i>Since this is a member function</i>&quot;, what function are you talking about?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485971344, "post_id": 41985862, "comment_id": 71150339, "body": "<code>send_struct</code> is a member function.  I&#39;m asking how it should convert the <code>MyBase</code> to the <code>MyStruct</code> when it does not know its size.  Hard coding the size into the class does not seem right since you just made the function able to take any <code>MyStruct</code>.  If your going to have a hard coded value in the class then whats the point of taking a <code>MyBase</code> when you could just hard code the <code>MyStruct</code>?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485971548, "post_id": 41985862, "comment_id": 71150468, "body": "@NathanOliver Since a <code>MyStruct</code> size is known at compile-time, I&#39;m guessing a class handling that kind of object may know, at compile-time, this size. If it does, my suggestion fix the &quot;<code>send_struct</code> <i>needs to be a virtual function</i>&quot; request from OP. If it does not, they might prefer a dynamically sized vector, don&#39;t they? Anyway, I&#39;m not sure either this is the way; it&#39;s clearly <i>one</i> way."}, {"owner": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "edited": false, "score": 0, "creation_date": 1485978756, "post_id": 41985862, "comment_id": 71154384, "body": "@YSC Looks good but my purpose is, when passing an array to that function, the array already has data. The derived classes implementing the method are not going to know the size, but the actual array passed in already contains all that information"}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "edited": false, "score": 1, "creation_date": 1486025001, "post_id": 41985862, "comment_id": 71171758, "body": "@arias_JC If the derived classes implementing the method do not know the size then <code>MyStruct</code> is not fit for purpose. <code>MyStruct</code> by definition can only be used by functions that know (at compile time) the size."}, {"owner": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1486039783, "post_id": 41985862, "comment_id": 71181551, "body": "@ChrisDrew Not if you have separate classes implementing <code>MyStruct</code> and them giving it its size. Then those class types can call to the derived classes implementing the method, therefore the derived classes do not need the size."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1486040974, "post_id": 41985862, "comment_id": 71182312, "body": "Guys, I understand the solution I suggested may not be the best in all situation, but with the question as it&#39;s stated, it&#39;s still is <i>a</i> solution. Why the downvotes?"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": -1, "last_activity_date": 1485970195, "last_edit_date": 1485970195, "creation_date": 1485969807, "answer_id": 41985862, "question_id": 41985745, "link": "https://stackoverflow.com/questions/41985745/passing-multiple-sized-arrays-to-virtual-method-without-using-templates/41985862#41985862", "title": "Passing multiple sized arrays to virtual method without using templates", "body": "<p>You could make <code>MyStruct&lt;int&gt;</code> types inherit an empty base class:</p>\n\n<pre><code>struct BaseStruct {};\n\ntemplate &lt;int LENGTH&gt;\nstruct MyStruct : BaseStruct \n{\n  int arr[LENGTH];\n};\n</code></pre>\n\n<p>and define a virtual function which takes a <code>BaseStruct</code> and a <code>length</code>:</p>\n\n<pre><code>virtual bool send_struct(const BaseStruct&amp; mystruct, int length) = 0;\n</code></pre>\n\n<p>Eventually, you could provide a convenient function to convert from those <code>BaseStruct</code> and <code>length</code> to a <code>MyStruct&lt;length&gt;</code>:</p>\n\n<pre><code>template &lt;int LENGTH&gt;\nconst MyStruct&lt;LENGTH&gt;&amp; to_mystruct(const BaseStruct&amp; mystruct)\n{\n    return static_cast&lt;const MyStruct&lt;LENGTH&gt;&amp;&gt;(mystruct);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b735a5fbde816d23\" rel=\"nofollow noreferrer\">Demo on coliru</a></p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 0, "last_activity_date": 1485971873, "last_edit_date": 1485971873, "creation_date": 1485971609, "answer_id": 41986439, "question_id": 41985745, "link": "https://stackoverflow.com/questions/41985745/passing-multiple-sized-arrays-to-virtual-method-without-using-templates/41986439#41986439", "title": "Passing multiple sized arrays to virtual method without using templates", "body": "<p>Templates and virtual methods do not get along well. You will need to first isolate the templated portion of <code>MyStruct</code> from the rest of the class and only deal with the non-template portion with virtual methods. Second, you need to abstract the templated portion to provide a non-template interface that the virtual methods can use. For arrays, this is easy. You can simply provide a pointer and a size. To translate between the representations, add an intermediate non-virtual templated method which calls the actual non-template virtual method.</p>\n\n<pre><code>struct MyStruct \n{\n    // All non-templated members\n};\n\ntemplate &lt;int LENGTH&gt;\nstruct MyStructArray : public MyStruct\n{\n    // All templated members\n    int arr[LENGTH];\n};\n\n\nstruct OtherStruct\n{\n    virtual bool send_struct_impl(const MyStruct&amp; mystruct, const int * arr, int length) = 0;\n\n    template &lt;int LENGTH&gt;\n    bool send_struct(const MyStructArray&lt;LENGTH&gt;&amp; mystruct)\n    {\n        return send_struct_impl(mystruct, mystruct.arr, LENGTH);\n    }\n};\n</code></pre>\n\n<p>Alternatively, if you don't mind the overhead, you can store a pointer and size for <code>MyStructArray::arr</code> in <code>MyStruct</code>. This would allow you to use <code>arr</code> in every context where a non-template reference or pointer to <code>MyStruct</code> is used.</p>\n\n<pre><code>struct MyStruct \n{\nprotected:\n    MyStruct(int * p_arr_ptr, int p_arr_length) :\n        arr_ptr(p_arr_ptr), arr_length(p_arr_length) {}\n\npublic:\n    int * arr_ptr;\n    int arr_length;\n\n    // All other members\n};\n\ntemplate &lt;int LENGTH&gt;\nstruct MyStructArray : public MyStruct\n{\n    MyStructArray() : MyStruct(arr, LENGTH) {}\n    int arr[LENGTH];\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "edited": false, "score": 0, "creation_date": 1486043040, "post_id": 41989092, "comment_id": 71183640, "body": "would my function then be: <code>virtual bool send_struct(my_span &amp;ms) = 0;</code> or something?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "edited": false, "score": 0, "creation_date": 1486045598, "post_id": 41989092, "comment_id": 71185438, "body": "@arias_JC Not by reference, by value."}, {"owner": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "edited": false, "score": 0, "creation_date": 1486052295, "post_id": 41989092, "comment_id": 71190182, "body": "In your my_span class for <code>end_</code>, would it not be <code>end_(&amp;ms.arr[L-1])</code> because as it is <code>my_span::end()</code> returns 0."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "edited": false, "score": 1, "creation_date": 1486055460, "post_id": 41989092, "comment_id": 71192243, "body": "@arias_JC No it shouldn&#39;t be, that&#39;d remove the last element from the range."}, {"owner": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "edited": false, "score": 0, "creation_date": 1486127786, "post_id": 41989092, "comment_id": 71224222, "body": "I guess what I am asking is in your <code>int const* end() const { return end_; }</code> function, what is it suppose to be returning. Because it has a pointer at the size of the array which would not be the last element but the one after, therefore always returning zero or technically null."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "edited": false, "score": 0, "creation_date": 1486128292, "post_id": 41989092, "comment_id": 71224548, "body": "@arias_JC Yes, it returns a pointer to one past the end element. That&#39;s how ranges in C++ work. It does not always return zero - or really, ever return zero."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1485980764, "creation_date": 1485980764, "answer_id": 41989092, "question_id": 41985745, "link": "https://stackoverflow.com/questions/41985745/passing-multiple-sized-arrays-to-virtual-method-without-using-templates/41989092#41989092", "title": "Passing multiple sized arrays to virtual method without using templates", "body": "<p>You can't write this, as you know:</p>\n\n<pre><code>template &lt;int LENGTH&gt;\nvirtual bool send_struct(const MyStruct&lt;LENGTH&gt;&amp; mystruct) = 0;\n</code></pre>\n\n<p>There is no way to pass through a <em>compile-time</em> <code>LENGTH</code>. But you can pass through a <em>run-time</em> length by <em>type-erasing</em> your container:</p>\n\n<pre><code>virtual bool send_struct(gsl::span&lt;int const&gt; ) = 0;\n</code></pre>\n\n<p><a href=\"https://github.com/Microsoft/GSL/blob/master/gsl/span\" rel=\"nofollow noreferrer\"><code>gsl::span&lt;T&gt;</code></a> is a non-owning, contiguous container of <code>T</code>s. It's a view onto an array or a <code>vector</code> or whatever else, which can be a <code>MyStruct&lt;N&gt;</code> too. This type isn't directly constructible from your struct, but it's easy to write a version that is, or to add the necessary members to yours (<code>.data()</code> and <code>.size()</code>) to make it work.</p>\n\n<p>An extremely simple implementation would just be:</p>\n\n<pre><code>class my_span {\nprivate:\n    int const* begin_;\n    int const* end_;\n\npublic:\n    template &lt;int L&gt;\n    my_span(MyStruct&lt;L&gt; const&amp; ms)\n        : begin_(ms.arr)\n        , end_(ms.arr + L)\n    { }\n\n    int const* begin() const { return begin_; }\n    int const* end() const { return end_; }\n    int const* data() const { return begin_; }\n    size_t size() const { return end_ - begin_; }\n};\n</code></pre>\n\n<p>And now you have a easily overridable <code>virtual</code> function for some non-modifiable container of <code>int</code>s. </p>\n"}], "owner": {"reputation": 409, "user_id": 7351379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3fb0e71616dced878789edf7aba9eed?s=128&d=identicon&r=PG&f=1", "display_name": "arias_JC", "link": "https://stackoverflow.com/users/7351379/arias-jc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 1, "accepted_answer_id": 41989092, "answer_count": 3, "score": 3, "last_activity_date": 1485980764, "creation_date": 1485969439, "last_edit_date": 1485974143, "question_id": 41985745, "link": "https://stackoverflow.com/questions/41985745/passing-multiple-sized-arrays-to-virtual-method-without-using-templates", "title": "Passing multiple sized arrays to virtual method without using templates", "body": "<p>So I have a pure virtual class that needs to stay that way. In this class I have or technically need a method that takes in a templatized parameter. Here is the object type for the parameter:</p>\n\n<pre><code>template &lt;int LENGTH&gt;\nstruct MyStruct\n{\n  int arr[LENGTH];\n};\n</code></pre>\n\n<p>And here is my method:</p>\n\n<pre><code>template &lt;int LENGTH&gt;\nvirtual bool send_struct(const MyStruct&lt;LENGTH&gt;&amp; mystruct) = 0;\n</code></pre>\n\n<p>However, obviously I cannot use a template with a virtual class, the alternative being adding the template to the class, which I also cannot do for my purpose. Is there an alternative to this while keeping my constraints? I need to pass array of different sizes to this method inside my pure virtual class, but I cannot templatize the class. </p>\n"}, {"tags": ["c++", "loops", "fstream", "ofstream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1485969154, "post_id": 41985634, "comment_id": 71148982, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485969200, "post_id": 41985634, "comment_id": 71149008, "body": "Shouldn&#39;t you be writing to the file in the for loop?"}, {"owner": {"reputation": 29, "user_id": 7501692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba3fc0c5140e897e6ee00cf2f0abc4f?s=128&d=identicon&r=PG&f=1", "display_name": "ErrFunn", "link": "https://stackoverflow.com/users/7501692/errfunn"}, "edited": false, "score": 0, "creation_date": 1485969311, "post_id": 41985634, "comment_id": 71149061, "body": "Sorry! I&#39;m not good at programming I just have a module in school which requires programming :( Mind helping me out with a fix code mate?"}, {"owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "edited": false, "score": 0, "creation_date": 1485969469, "post_id": 41985634, "comment_id": 71149149, "body": "You&#39;re just overwriting all the variables on each iteration of the <code>for</code>. Go through the code line by line in your head and it should be clear what it&#39;s doing."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1485969532, "post_id": 41985634, "comment_id": 71149184, "body": "Walk through each line of your code, and explain to an imaginary friend exactly what it does and what it means... alternatively, use your debugger to step though it and tell you what each line means."}, {"owner": {"reputation": 29, "user_id": 7501692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba3fc0c5140e897e6ee00cf2f0abc4f?s=128&d=identicon&r=PG&f=1", "display_name": "ErrFunn", "link": "https://stackoverflow.com/users/7501692/errfunn"}, "edited": false, "score": 0, "creation_date": 1485969753, "post_id": 41985634, "comment_id": 71149337, "body": "can you guys tell me where I went wrong? is the for loop implementation correct? I&#39;m guessing it&#39;s because no matter how much data I input to the console, the new data I input keeps overwriting the old data and that&#39;s why it only shows the newest data keyed in only. if this is the issue.. I&#39;m not sure how to solve it as I just barely started programming :/"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485969879, "post_id": 41985634, "comment_id": 71149426, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I have copied that comment in a bookmarklet. Hope it is not copyrighted :)"}, {"owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "edited": false, "score": 0, "creation_date": 1485969935, "post_id": 41985634, "comment_id": 71149458, "body": "@ErrFunn Yes, you&#39;re overwriting all your data with new data. You&#39;ll have to do something with that data <i>before</i> you overwrite it. That is, you&#39;ll need to process your data after you read it within the <code>for</code> loop."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485970021, "post_id": 41985634, "comment_id": 71149528, "body": "@ErrFunn Also check: <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1485970154, "post_id": 41985634, "comment_id": 71149609, "body": "@RSahu You&#39;re welcome, it&#39;s not copyrighted of course. Let&#39;s hope it helps at least some new users, OP didn&#39;t bother to follow the advice so far."}, {"owner": {"reputation": 29, "user_id": 7501692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba3fc0c5140e897e6ee00cf2f0abc4f?s=128&d=identicon&r=PG&f=1", "display_name": "ErrFunn", "link": "https://stackoverflow.com/users/7501692/errfunn"}, "reply_to_user": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "edited": false, "score": 0, "creation_date": 1485970441, "post_id": 41985634, "comment_id": 71149795, "body": "@Greg Kikola mmm... what do I have to do before that? I&#39;m guessing smth along the lines of array.. not entirely sure"}, {"owner": {"reputation": 29, "user_id": 7501692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba3fc0c5140e897e6ee00cf2f0abc4f?s=128&d=identicon&r=PG&f=1", "display_name": "ErrFunn", "link": "https://stackoverflow.com/users/7501692/errfunn"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1485970497, "post_id": 41985634, "comment_id": 71149822, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 hey! Sorry for not looking at the link! :( Really rushing for time here hahaha will look at it soon! Going to bed now"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1485971917, "post_id": 41985634, "comment_id": 71150698, "body": "You have added in &quot;urgent&quot; begging in three times now, and three times it has been removed. Please do not add that in again - it is not welcome here. I have downvoted in order to remind you of this. Note also that we are not a homework factory - we will give clues, but someone will not be helping you if they do it for you."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7501692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba3fc0c5140e897e6ee00cf2f0abc4f?s=128&d=identicon&r=PG&f=1", "display_name": "ErrFunn", "link": "https://stackoverflow.com/users/7501692/errfunn"}, "edited": false, "score": 0, "creation_date": 1486000701, "post_id": 41986644, "comment_id": 71163073, "body": "I added in the structure you recommended and created the container and made the following changes in my for loop. However when I try to build it, it throws me an error saying &quot;fuel_database was not declared in this scope&quot;. :/ Thanks for the help tho man really do appreciate it!"}, {"owner": {"reputation": 29, "user_id": 7501692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba3fc0c5140e897e6ee00cf2f0abc4f?s=128&d=identicon&r=PG&f=1", "display_name": "ErrFunn", "link": "https://stackoverflow.com/users/7501692/errfunn"}, "edited": false, "score": 0, "creation_date": 1486002259, "post_id": 41986644, "comment_id": 71163462, "body": "okay I brought the structure outside of int Main() and it allows me to build it now however, after running the program and opening the text document, it didn&#39;t write my date and brand and the amount and mileage come out weird. Here&#39;s how the output looks like:  Entry 1 Date (dd/mm/yy):  Amount Payable: $2.48473e-200 Brand:  Mileage: 6.95314e-308km"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1485972344, "creation_date": 1485972344, "answer_id": 41986644, "question_id": 41985634, "link": "https://stackoverflow.com/questions/41985634/how-to-loop-ofstream-in-c/41986644#41986644", "title": "How to loop ofstream in C++?", "body": "<p>You are not storing your data, but overwriting it in the loop:</p>\n\n<pre><code>for (;;)\n{\n    cout &lt;&lt; \"\\nDate (dd/mm/yy): \";\n    cin &gt;&gt; date;\n\n    cout &lt;&lt; \"Amount Payable: $\";\n    cin &gt;&gt; amount;\n\n    cout &lt;&lt; \"Brand: \";\n    cin &gt;&gt; brand;\n\n    cout &lt;&lt; \"Mileage (km): \";\n    cin &gt;&gt; mileage;\n\n    cout &lt;&lt; \"\\nContinue? (Y/N): \";\n    cin &gt;&gt; ans;\n\n    if (ans == 'N' || ans == 'n')\n    {\n        break;\n    }\n    else\n    {\n        count++;\n    }\n}\n</code></pre>\n\n<p>You need to place the data into some type of <em>container</em> like <code>std::vector</code>.  </p>\n\n<p>Also, I recommend creating a structure to hold all the data for one entry:  </p>\n\n<pre><code>struct Fuel_Record\n{\n  std::string date;\n  double      amount;\n  std::string brand;\n  double      mileage;\n};\n</code></pre>\n\n<p>You can then create a container to hold all the data you've collected:  </p>\n\n<pre><code>std::vector&lt;Fuel_Record&gt; fuel_database;\n</code></pre>\n\n<p>Your input loop can be modified as:</p>\n\n<pre><code>Fuel_Record f;\nfor (;;)\n{\n    cout &lt;&lt; \"\\nDate (dd/mm/yy): \";\n    cin &gt;&gt; f.date;\n\n    cout &lt;&lt; \"Amount Payable: $\";\n    cin &gt;&gt; f.amount;\n\n    cout &lt;&lt; \"Brand: \";\n    cin &gt;&gt; f.brand;\n\n    cout &lt;&lt; \"Mileage (km): \";\n    cin &gt;&gt; f.mileage;\n\n    // Add the record to the container\n    fuel_database.push_back(f);\n\n    cout &lt;&lt; \"\\nContinue? (Y/N): \";\n    cin &gt;&gt; ans;\n\n    if (ans == 'N' || ans == 'n')\n    {\n        break;\n    }\n    else\n    {\n        count++;\n    }\n}\n</code></pre>\n\n<p><strong>Edit 1:  Not storing the data</strong><br>\nYou may not have learned about containers or structures.  In that case, you will need to <em>process</em> the data after you have collected it:  </p>\n\n<pre><code>double total_payable = 0.0;\ndouble total_mileage = 0.0;\nfor (;;)\n{\n    cout &lt;&lt; \"\\nDate (dd/mm/yy): \";\n    cin &gt;&gt; date;\n\n    cout &lt;&lt; \"Amount Payable: $\";\n    cin &gt;&gt; amount;\n\n    cout &lt;&lt; \"Brand: \";\n    cin &gt;&gt; brand;\n\n    cout &lt;&lt; \"Mileage (km): \";\n    cin &gt;&gt; mileage;\n\n    cout &lt;&lt; \"\\nContinue? (Y/N): \";\n    cin &gt;&gt; ans;\n\n    // Process the collected data:\n    total_mileage += mileage;\n    total_payable += payable;\n\n    if (ans == 'N' || ans == 'n')\n    {\n        break;\n    }\n    else\n    {\n        count++;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7501692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba3fc0c5140e897e6ee00cf2f0abc4f?s=128&d=identicon&r=PG&f=1", "display_name": "ErrFunn", "link": "https://stackoverflow.com/users/7501692/errfunn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 986, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1485972344, "creation_date": 1485969108, "last_edit_date": 1485971840, "question_id": 41985634, "link": "https://stackoverflow.com/questions/41985634/how-to-loop-ofstream-in-c", "title": "How to loop ofstream in C++?", "body": "<p>Program idea: Console will prompt user to key in their fuel consumption details. After a full set of data is keyed in (date, amount, brand and mileage) and I continue on with the program, logging in as much as I want and finally decide to output the text into notepad, the text document will show me all the entries I've keyed in. The for loop works like it should, looping infinitely until user inputs 'N' or 'n'.</p>\n\n<p>ISSUE: My issue with this is that no matter how many entries I key in and continue, my output text document will only show me the last entry I keyed in. Why is this so?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\n    int count = 0;\n    double amount, mileage;\n    string date, brand;\n    char ans;\n\n    cout &lt;&lt; \"****************************\" &lt;&lt; endl;\n    cout &lt;&lt; \"CAR FUEL CONSUMPTION HISTORY\" &lt;&lt; endl;\n    cout &lt;&lt; \"****************************\" &lt;&lt; endl;\n\n    for (;;)\n    {\n        cout &lt;&lt; \"\\nDate (dd/mm/yy): \";\n        cin &gt;&gt; date;\n\n        cout &lt;&lt; \"Amount Payable: $\";\n        cin &gt;&gt; amount;\n\n        cout &lt;&lt; \"Brand: \";\n        cin &gt;&gt; brand;\n\n        cout &lt;&lt; \"Mileage (km): \";\n        cin &gt;&gt; mileage;\n\n        cout &lt;&lt; \"\\nContinue? (Y/N): \";\n        cin &gt;&gt; ans;\n\n        if (ans == 'N' || ans == 'n')\n        {\n            break;\n        }\n        else\n        {\n            count++;\n        }\n    }\n\n    ofstream openFile;\n    openFile.open(\"conHist.txt\");\n\n    // NOT WORKING!!!! &gt;:(\n    while(openFile.good())\n    {\n        openFile &lt;&lt; \"Entry \" &lt;&lt; count &lt;&lt; endl;;\n        openFile &lt;&lt; \"Date (dd/mm/yy): \" &lt;&lt; date &lt;&lt; endl;\n        openFile &lt;&lt; \"Amount Payable: $\" &lt;&lt; amount &lt;&lt; endl;\n        openFile &lt;&lt; \"Brand: \" &lt;&lt; brand &lt;&lt; endl;\n        openFile &lt;&lt; \"Mileage: \" &lt;&lt; mileage &lt;&lt; \"km\" &lt;&lt; endl;\n        openFile.close();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "qt", "shared-ptr", "qsharedpointer"], "answers": [{"tags": [], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "is_accepted": false, "score": 1, "last_activity_date": 1485970901, "last_edit_date": 1485970901, "creation_date": 1485969970, "answer_id": 41985912, "question_id": 41985591, "link": "https://stackoverflow.com/questions/41985591/life-cycle-of-qsharedpointer-or-stdshared-ptr/41985912#41985912", "title": "life cycle of QSharedPointer or std::shared_ptr", "body": "<blockquote>\n  <p>Does my QSharedPointer is always valid?</p>\n</blockquote>\n\n<p>Only after you copy the data to it but after that yes, it will be valid as long as any instance of it exists so as long as your object of type <code>Acquisition</code> exists.</p>\n\n<blockquote>\n  <p>What append if during processing (MainWindow), the usb_read() occurs\n  and the memcpy write on my image.</p>\n</blockquote>\n\n<p>Race condition. You would have to use a mutex to lock the resource when processing in the <code>MainWindow</code>. Smart pointers are not inherently thread safe however <code>QSharedPointer</code> uses atomic integer for reference counting so sharing is thread safe. Again, the content is not!</p>\n\n<blockquote>\n  <p>In this case, is my signal canceled, my values are copied somewhere or\n  the thread wait for my MainWindow to finish processing ?</p>\n</blockquote>\n\n<p>This depends on how you connect your objects. By default when two <code>QObjects</code> live in two different threads the connection is automatically <code>Qt::QueuedConnection</code> and in that case the arguments are first copied (even if sent as const reference) internally to be posted as event in the receiver's thread. This requires the argument to be copyable and the receiver's thread to be running an event loop. However if you for some reason do <code>Qt::DirectConnection</code> which is default for connection in the same thread it will be equivalent to direct call. This may happen in your case if you have connected the two objects before you moved one of them to a different thread (however maybe Qt does switch all connections to queued ones when <code>QObject::moveToThread</code> is called).</p>\n\n<p>So to answer directly, when queued signal is used the arguments are copied and life time of the caller does no longer matter after the <code>emit</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5570, "user_id": 2190535, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8c8de2e627b117ddfd06b4ca08d40674?s=128&d=identicon&r=PG&f=1", "display_name": "Epitouille", "link": "https://stackoverflow.com/users/2190535/epitouille"}, "edited": false, "score": 0, "creation_date": 1486124011, "post_id": 41988019, "comment_id": 71221983, "body": "Your answers are both perfect, I accept yours because of the perfect solution to avoid race condition."}], "tags": [], "owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "is_accepted": true, "score": 1, "last_activity_date": 1485977156, "creation_date": 1485977156, "answer_id": 41988019, "question_id": 41985591, "link": "https://stackoverflow.com/questions/41985591/life-cycle-of-qsharedpointer-or-stdshared-ptr/41988019#41988019", "title": "life cycle of QSharedPointer or std::shared_ptr", "body": "<p>As it was already written in Resurrection's answer shared pointers are valid as long as they are at least referenced at one location.</p>\n\n<p>In your case you will only have once instance of the shared pointer, which is the one you create at the start of the Acquisition thread. It is referenced in the Acquisition thread as well as in the signal handlers that will be called by QT. As you have only one shared pointer (with one byte array in it) you are now updating the same data buffer on each acquisition and overwrite it, potentially at the same moment when another thread has not yet read it. You can however easily fix that by creating a new shared pointer instance for each sample and pass that one to the other thread in the signal.</p>\n\n<p>The following small change should do it:</p>\n\n<pre><code>//entry point of the thread\nvoid Acquisition::run ()\n{\n    uint8_t*                image_addr;\n\n    for (;;)\n    {\n        if (isInterruptionRequested())\n            return;\n\n\n        // here, usb_read() give me the adress of a elem in the ring buffer \n        img_addr = usb_read(...);\n\n        // Create a fresh shared pointer in the scope\n        QSharedPointer&lt;uint8_t&gt; image(new uint8_t[IMG_SIZE]);   \n\n        // the ring buffer can possibly be rewritten on the next usb_read() (if bufferlength = 1) so I copy the data into my QSharedPointer\n\n        std::memcpy(image.data(), image_addr, sizeof(IMG_SIZE));\n\n       // I send this image \n       emit imageSent(image);\n    }\n}\n</code></pre>\n\n<p>And regarding the cancellation and signaling:\nWhen you call emit signals between different threads in QT then by default a queued connection will be used. This means on the emitting thread the data and the handler that should be called will be put in a queue. The data here is your shared pointer. The queue will held it alive, even if the acquisition thread finishes. Then when the other thread kicks in (MainThread, etc.) the data will be dequeued and the signal handler will be called with it.</p>\n"}], "owner": {"reputation": 5570, "user_id": 2190535, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8c8de2e627b117ddfd06b4ca08d40674?s=128&d=identicon&r=PG&f=1", "display_name": "Epitouille", "link": "https://stackoverflow.com/users/2190535/epitouille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1007, "favorite_count": 0, "accepted_answer_id": 41988019, "answer_count": 2, "score": 0, "last_activity_date": 1485977156, "creation_date": 1485968974, "last_edit_date": 1495539930, "question_id": 41985591, "link": "https://stackoverflow.com/questions/41985591/life-cycle-of-qsharedpointer-or-stdshared-ptr", "title": "life cycle of QSharedPointer or std::shared_ptr", "body": "<p>in my application</p>\n\n<p>I've a <code>MainWindow</code> (which is a <code>QtMainWindow</code> class) and a <code>Acquisiton</code> class (which is a <code>QThread</code> class)</p>\n\n<p>Here my very simplified Acquisiton class</p>\n\n<pre><code>//entry point of the thread\nvoid Acquisition::run ()\n{\n    uint8_t*                image_addr;\n    QSharedPointer&lt;uint8_t&gt; image(new uint8_t[IMG_SIZE]);     \n\n    for (;;)\n    {\n        if (isInterruptionRequested())\n            return;\n\n\n        // here, usb_read() give me the adress of a elem in the ring buffer \n        img_addr = usb_read(...);\n\n        // the ring buffer can possibly be rewritten on the next usb_read() (if bufferlength = 1) so I copy the data into my QSharedPointer\n\n        std::memcpy(image.data(), image_addr, sizeof(IMG_SIZE));\n\n       // I send this image \n       emit imageSent(image);\n    }\n}\n</code></pre>\n\n<p>and in my MainWindow I've</p>\n\n<pre><code>// the slot for the signal imageSent\nvoid newImage(QSharedPointer&lt;uint8_t&gt; image)\n{\n    // process and draw image\n}\n</code></pre>\n\n<p>I don't understand the lifecycle of the QSharedPointer (and std::shared_ptr (imagine the samecode with std::shared_ptr)</p>\n\n<p>Does my QSharedPointer is always valid ?\nWhat append if during processing (MainWindow), the usb_read() occurs and the memcpy write on my image.</p>\n\n<p>In a related question: <a href=\"https://stackoverflow.com/questions/41677990/waiting-slots-to-be-executed-before-quitting\">Waiting slots to be executed before quitting</a></p>\n\n<p>I see that QSharedPointer keeps my data valid if the acquisition threads stop during data is processing.</p>\n\n<p>In this case, is my signal canceled, my values are copied somewhere or the thread wait for my MainWindow to finish processing ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "cmake", "nsis", "cpack"], "answers": [{"tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1485984193, "creation_date": 1485984193, "answer_id": 41990003, "question_id": 41985057, "link": "https://stackoverflow.com/questions/41985057/cpack-nsis-component-is-unspecified/41990003#41990003", "title": "CPack NSIS component is Unspecified", "body": "<p>According to documentation for <a href=\"https://cmake.org/cmake/help/v3.7/command/install.html\" rel=\"nofollow noreferrer\">install</a> command, <strong>every specification</strong> of file's type (like <em>RUNTIME</em>, <em>LIBRARY</em> or <em>PUBLIC_HEADER</em>) <strong>starts its own install clause</strong>, to which all other options are applied.</p>\n\n<p>That is, option <code>COMPONENT sdk</code> is applied <strong>only</strong> to file's type <code>PUBLIC_HEADER</code>.</p>\n\n<p>Other files (<code>RUNTIME</code>, <code>LIBRARY</code>) have component option <em>unspecified</em>.</p>\n"}], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 41990003, "answer_count": 1, "score": 0, "last_activity_date": 1485984193, "creation_date": 1485967334, "question_id": 41985057, "link": "https://stackoverflow.com/questions/41985057/cpack-nsis-component-is-unspecified", "title": "CPack NSIS component is Unspecified", "body": "<p>Behold the following fairly trivial CMake file:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7)\n\nadd_library(libdice SHARED lib.cpp)\n\nset_target_properties(libdice PROPERTIES\n    PREFIX \"\"\n    OUTPUT_NAME \"Dice\"\n    PUBLIC_HEADER \"lib.h\"\n)\n\ninstall(TARGETS libdice\n    RUNTIME DESTINATION \"lib\"\n    LIBRARY DESTINATION \"lib\"\n    PUBLIC_HEADER DESTINATION \"include\"\n    COMPONENT sdk\n)\n\nset(CPACK_PACKAGE_NAME \"Dice SDK\")\nset(CPACK_GENERATOR \"NSIS\")\n\ninclude(CPack)\n\ncpack_add_component(sdk)\n</code></pre>\n\n<p>With this <code>lib.h</code>:</p>\n\n<pre><code>#pragma once\n\nint sides_of_a_dice();\n</code></pre>\n\n<p>And <code>lib.cpp</code>:</p>\n\n<pre><code>int sides_of_a_dice()\n{\n    return 6;\n}\n</code></pre>\n\n<p>So if I <code>nmake package</code> for this on Windows it for some reason puts <code>Dice.dll</code> in an <code>Unspecified</code> component, even thought the component is clearly specified. Even weirder, the public headers (<code>lib.h</code>) correctly go in the <code>sdk</code> component.</p>\n\n<pre><code>CPack: Create package using NSIS\nCPack: Install projects\nCPack: - Run preinstall target for: Project\nCPack: - Install project: Project\nCPack: -   Install component: Unspecified   &lt;- Why??!\nCPack: -   Install component: sdk\nCPack: Create package\n</code></pre>\n\n<p>What is going on?</p>\n"}, {"tags": ["c++", "visual-studio", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 1785, "user_id": 1344457, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b105d2c2d33855560aef15c9d613742d?s=128&d=identicon&r=PG", "display_name": "Neal Kruis", "link": "https://stackoverflow.com/users/1344457/neal-kruis"}, "edited": false, "score": 0, "creation_date": 1512593142, "post_id": 41986788, "comment_id": 82325676, "body": "I can confirm that it works to define <code>CMAKE_GENERATOR_TOOLSET</code> before the <code>project</code> call. In my case, setting v120_xp from VS2017."}, {"owner": {"reputation": 217, "user_id": 5922876, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77436041430c47b85137eb812e1a1dd5?s=128&d=identicon&r=PG&f=1", "display_name": "haidahaida", "link": "https://stackoverflow.com/users/5922876/haidahaida"}, "edited": false, "score": 0, "creation_date": 1619263457, "post_id": 41986788, "comment_id": 118855266, "body": "Sorry for the delay. Simply doing <code>set(CMAKE_GENERATOR_TOOLSET &quot;$(DefaultPlatformToolset)&quot;)</code> in a toolchain file worked like a charm. Thanks!"}], "tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": true, "score": 3, "last_activity_date": 1485972853, "creation_date": 1485972853, "answer_id": 41986788, "question_id": 41984988, "link": "https://stackoverflow.com/questions/41984988/how-do-i-use-cmake-to-set-the-vs-platform-toolset-property/41986788#41986788", "title": "How do I use CMake to set the VS platform toolset property?", "body": "<p>This is generally what <a href=\"https://cmake.org/cmake/help/v3.1/variable/CMAKE_GENERATOR_TOOLSET.html\" rel=\"nofollow noreferrer\"><code>CMAKE_GENERATOR_TOOLSET</code></a> is used for, however, it should be used within a toolchain file, not within the CMakeLists.txt.</p>\n\n<blockquote>\n  <p>Native build system toolset name specified by user.</p>\n  \n  <p>Some CMake generators support a toolset name to be given to the native\n  build system to choose a compiler. If the user specifies a toolset\n  name (e.g. via the cmake -T option) the value will be available in\n  this variable.</p>\n  \n  <p>The value of this variable should never be modified by project code. A\n  toolchain file specified by the CMAKE_TOOLCHAIN_FILE variable may\n  initialize CMAKE_GENERATOR_TOOLSET. Once a given build tree has been\n  initialized with a particular value for this variable, changing the\n  value has undefined behavior.</p>\n</blockquote>\n\n<p>I think if you set it before making your <code>project</code> call, then it will theoretically still work, although obviously this is not the supported method of using it, so compatibility may vary.</p>\n"}], "owner": {"reputation": 217, "user_id": 5922876, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77436041430c47b85137eb812e1a1dd5?s=128&d=identicon&r=PG&f=1", "display_name": "haidahaida", "link": "https://stackoverflow.com/users/5922876/haidahaida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2804, "favorite_count": 0, "accepted_answer_id": 41986788, "answer_count": 1, "score": 3, "last_activity_date": 1485972853, "creation_date": 1485967151, "last_edit_date": 1495535366, "question_id": 41984988, "link": "https://stackoverflow.com/questions/41984988/how-do-i-use-cmake-to-set-the-vs-platform-toolset-property", "title": "How do I use CMake to set the VS platform toolset property?", "body": "<p>Rather that using the method <a href=\"https://stackoverflow.com/q/35549164/5922876\">presented here</a>, I would like to manually set a property of a Visual Studio project in the CMake file, in this case, the Platform Toolset to <code>$(DefaultPlatformToolset)</code> <a href=\"https://i.stack.imgur.com/UA0aN.png\" rel=\"nofollow noreferrer\">(see this image)</a>, which is a VS macro. Is it possible?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 762, "user_id": 2493292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39ea4f86f873cca1afd4a02edff6483?s=128&d=identicon&r=PG&f=1", "display_name": "jamek", "link": "https://stackoverflow.com/users/2493292/jamek"}, "edited": false, "score": 1, "creation_date": 1485967225, "post_id": 41984938, "comment_id": 71147799, "body": "Better use constexpr function not template. <a href=\"http://en.cppreference.com/w/cpp/language/constexpr\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/constexpr</a>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1485967264, "post_id": 41984938, "comment_id": 71147818, "body": "...wouldn&#39;t the simplest way be to make each <code>if</code> case in the original function its own bool-templated function, then call them from the compile-time and run-time versions of the three template parameter function? I&#39;m assuming your implementations of the various functions aren&#39;t constexpr..."}, {"owner": {"reputation": 826, "user_id": 6275792, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V7eW4xIbvAM/AAAAAAAAAAI/AAAAAAAAABw/NnFeMvvj2o4/photo.jpg?sz=128", "display_name": "Pavel Golubev", "link": "https://stackoverflow.com/users/6275792/pavel-golubev"}, "edited": false, "score": 1, "creation_date": 1485967312, "post_id": 41984938, "comment_id": 71147856, "body": "<code>a,b,c</code> must be known compile-time for <code>foo&lt;a,b,c&gt;()</code> to work"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 5, "creation_date": 1485967347, "post_id": 41984938, "comment_id": 71147875, "body": "Make foo a non-templated function? What are you really trying to achieve? How did you came to the point where you need to inject run-time values into compile-time constants?"}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1485967611, "post_id": 41984938, "comment_id": 71148024, "body": "You&#39;re mixing runtime parameters with compile-time parameters and diving into <code>constexpr</code> will only make things worse if you don&#39;t clear the former out first"}, {"owner": {"reputation": 75, "user_id": 6160838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0dc1e4d6bb3136d49e2f233b3647b7f?s=128&d=identicon&r=PG&f=1", "display_name": "apo", "link": "https://stackoverflow.com/users/6160838/apo"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1486034334, "post_id": 41984938, "comment_id": 71177965, "body": "@YSC Of course this is an overly simplified example. In my application this translates to a very critical cuda kernel that I want to specialize depending of several flags or integers. I have seen that in this case actually including the conditionals in the function (the non-templated version as you say) has a great performance impact."}, {"owner": {"reputation": 75, "user_id": 6160838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0dc1e4d6bb3136d49e2f233b3647b7f?s=128&d=identicon&r=PG&f=1", "display_name": "apo", "link": "https://stackoverflow.com/users/6160838/apo"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1486035005, "post_id": 41984938, "comment_id": 71178365, "body": "@jaggedSpire In the example function &quot;foo&quot; sure, but in the real world &quot;foo&quot; is not that trivial of a function... Anyway, regardless of &quot;foo&quot;, I believe the question is clear."}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 5, "last_activity_date": 1485968218, "creation_date": 1485968218, "answer_id": 41985348, "question_id": 41984938, "link": "https://stackoverflow.com/questions/41984938/best-way-to-handle-2-template-parameters/41985348#41985348", "title": "Best way to handle 2+ template parameters?", "body": "<blockquote>\n  <p>But what if you have 2+ parameters? You cannot just do:</p>\n</blockquote>\n\n<p>You can use <em>variadic templates</em>, recursion, higher-order functions and <code>std::integral_constant</code>:</p>\n\n<pre><code>template &lt;typename TF&gt;\nauto with_bool_constant(TF xf)\n{\n    return xf();\n};\n\ntemplate &lt;typename TF, typename T, typename... Ts&gt;\nauto with_bool_constant(TF xf, T x, Ts... xs)\n{\n    if(x) \n        return with_bool_constant([&amp;](auto... ys)\n                                  { xf(std::integral_constant&lt;bool, true&gt;{}, ys...); }, \n                                  xs...);\n    else \n        return with_bool_constant([&amp;](auto... ys)\n                                  { xf(std::integral_constant&lt;bool, false&gt;{}, ys...); }, \n                                  xs...);\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>template &lt;bool a, bool b, bool c&gt;\nvoid f() \n{ \n    std::cout &lt;&lt; std::boolalpha &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; c &lt;&lt; \"\\n\"; \n}\n\nint main()\n{\n    auto f_wrapper = [](auto a, auto b, auto c)\n    {\n        return f&lt;a, b, c&gt;();\n    };\n\n    with_bool_constant(f_wrapper, true, false, true);\n}\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/i8WP9V5AwUzvjwf5\" rel=\"noreferrer\"><strong>wandbox example</strong></a></p>\n\n<hr>\n\n<blockquote>\n  <p>Say that I know that a can vary between 0 and, i.e, 32. I would like to do something like:</p>\n</blockquote>\n\n<p>You can use <code>boost::hana::make_range</code> to generate a <code>0...32</code> compile-time range <em>(the bounds must be known at compile time)</em>. You can then use <code>boost::hana::for_each</code> or a similar compile-time iteration construct to convert a runtime value to <code>std::integral_constant&lt;int, X&gt;</code> and apply a similar technique to the one I posted above.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1485969660, "post_id": 41985456, "comment_id": 71149266, "body": "Out of curiosity - could you confirm or deny my suspicion that compiling <code>caller(a,b,c)</code> causes instantiation of all possible variants of <code>foo()</code> ?"}, {"owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "edited": false, "score": 1, "creation_date": 1485970068, "post_id": 41985456, "comment_id": 71149557, "body": "@Arkadiy yes, and that is going to be true for any such mapping from compile-time to run-time values."}], "tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": false, "score": 2, "last_activity_date": 1485970430, "last_edit_date": 1485970430, "creation_date": 1485968533, "answer_id": 41985456, "question_id": 41984938, "link": "https://stackoverflow.com/questions/41984938/best-way-to-handle-2-template-parameters/41985456#41985456", "title": "Best way to handle 2+ template parameters?", "body": "<p>You've got the right idea, you just have to do it quasirecursively for every parameter:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\ntemplate &lt;bool a, bool b, bool c&gt;\nvoid foo() {\n     if(a) printf(\"I do something when a is true!\\n\");\n     if(b) printf(\"I do something when b is true!\\n\");\n     if(c) printf(\"I do something when c is true!\\n\");\n}\n\ntemplate &lt;bool... bs&gt;\nvoid caller() {\n    foo&lt;bs...&gt;();\n}\n\ntemplate &lt;bool... cbs, typename... RBS&gt;\nvoid caller(bool rb0, RBS... rbs) {\n    if (rb0) {\n        caller&lt;cbs..., true&gt;(rbs...);\n    } else {\n        caller&lt;cbs..., false&gt;(rbs...);\n    }\n}\n\nint main() {\n     caller(true, false, true);\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6160838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0dc1e4d6bb3136d49e2f233b3647b7f?s=128&d=identicon&r=PG&f=1", "display_name": "apo", "link": "https://stackoverflow.com/users/6160838/apo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 41985348, "answer_count": 2, "score": 3, "last_activity_date": 1485970430, "creation_date": 1485966992, "question_id": 41984938, "link": "https://stackoverflow.com/questions/41984938/best-way-to-handle-2-template-parameters", "title": "Best way to handle 2+ template parameters?", "body": "<p>Say I have a templated function in the following form:</p>\n\n<pre><code>template&lt;bool a, bool b, bool c&gt;\nvoid foo(){\n   if(a) printf(\"I do something when a is true!\\n\");\n   if(b) printf(\"I do something when b is true!\\n\");\n   if(c) printf(\"I do something when c is true!\\n\");\n}\n</code></pre>\n\n<p>Now I have this function that can be compile time specialized for each of the 8 possibles cases (a = b = c = true, a=b=true c=false, etc etc).</p>\n\n<p>I would like to call this function with values of a, b and c obtained on run time. </p>\n\n<p>If the template had only one parameter I could do:</p>\n\n<pre><code>void caller(bool a){\n   if(a) foo&lt;true&gt;();\n   else  foo&lt;false&gt;();\n}\n</code></pre>\n\n<p>But what if you have 2+ parameters? You cannot just do:</p>\n\n<pre><code>void caller(bool a, bool b, bool c){\n   foo&lt;a,b,c&gt;();\n}\n</code></pre>\n\n<p>And the casuistic madness if you do it with if-else/switch is undesirable.\nI would like for the compiler to compile the 8 versions of foo and just call</p>\n\n<pre><code>foo&lt;a,b,c&gt;()\n</code></pre>\n\n<p>An equivalent situation can be made if instead bool I have:</p>\n\n<pre><code>template&lt;int a&gt;\nvoid foo(){\n   printf(\"%d\", a);\n} \n</code></pre>\n\n<p>Say that I know that a can vary between 0 and, i.e, 32.\nI would like to do something like:</p>\n\n<pre><code>void caller(int a){\n   if(a&lt;=32 &amp;&amp; a&gt;0) foo&lt;a&gt;();\n   else printf(\"ERROR!/n\");\n}\n</code></pre>\n\n<p>What would be the best way to handle these kind of situations?</p>\n"}, {"tags": ["c++", "templates", "stl", "swap", "template-specialization"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 7, "creation_date": 1485966471, "post_id": 41984587, "comment_id": 71147320, "body": "The <code>swap()</code> methods implemented on the containers can take advantage of the containers internal structure and therefore be more efficient (eg <code>std::list</code> just swap the pointers and size).  <code>std::swap</code> can be used in template(s) when you don&#39;t know the container type.  The specialisations of <code>std::swap</code> can call the container methods to take advantage of the more efficient emplementation"}, {"owner": {"reputation": 4259, "user_id": 2348315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IIlRD.jpg?s=128&g=1", "display_name": "PeterSW", "link": "https://stackoverflow.com/users/2348315/petersw"}, "edited": false, "score": 2, "creation_date": 1485966798, "post_id": 41984587, "comment_id": 71147527, "body": "I suspect the difference was much bigger before move semantics. Before that access to the container internals meant just switching pointers, while the generic route (without special compiler support) would need to do potentially a lot of copying."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 12, "creation_date": 1485967107, "post_id": 41984587, "comment_id": 71147733, "body": "They are overloads, not template specializations."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 5, "creation_date": 1485968443, "post_id": 41984587, "comment_id": 71148566, "body": "Swapping a pair can be a pain. The first thing you need to do is get the dang partridge out of the tree...."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1485992504, "post_id": 41984587, "comment_id": 71160782, "body": "Most times I find myself writing a <code>swap</code> overload, I&#39;m doing it because I want to make use of the <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">\u201ccopy &amp; swap\u201d idiom</a>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1486002367, "post_id": 41984587, "comment_id": 71163498, "body": "@5gon12eder typically that is a member swap function, not an overload of <code>std::swap</code>"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 38, "last_activity_date": 1485967220, "last_edit_date": 1485967220, "creation_date": 1485966529, "answer_id": 41984780, "question_id": 41984587, "link": "https://stackoverflow.com/questions/41984587/why-are-there-so-many-specializations-of-stdswap/41984780#41984780", "title": "Why are there so many specializations of std::swap?", "body": "<blockquote>\n  <p>So what it is gained from specializing std::pair?</p>\n</blockquote>\n\n<p>Performance. The generic swap is usually good enough (since C++11), but rarely optimal (for <code>std::pair</code>, and for most other data structures).</p>\n\n<blockquote>\n  <p>I'm also left wondering if I should be writing my own specializations for custom classes, or simply relying on the template version.</p>\n</blockquote>\n\n<p>I suggest relying on the template by default, but if profiling shows it to be a bottleneck, know that there is probably room for improvement. Premature optimization and all that...</p>\n"}, {"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1485966716, "post_id": 41984803, "comment_id": 71147475, "body": "Thanks for the concrete example."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1485985827, "post_id": 41984803, "comment_id": 71158062, "body": "The explicit element swap could also be <i>slower</i> than the temp-variable approach. Take for example <code>class Foo { char a, b, c, d, e, f, g, h; };</code> (ok, insane type, but bear with me). This class has a default copy constructor and an empty destructor. The default copy constructor is equivalent to <code>memcpy(dest, src, sizeof(Foo));</code> which will compile to a <i>single 64 bit load and store</i>. The temporary variable swap would thus compile to three or six instructions. The element based swap would likely require 24 or 48 instructions (or a loop with eight iterations)."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 12, "last_activity_date": 1485966592, "creation_date": 1485966592, "answer_id": 41984803, "question_id": 41984587, "link": "https://stackoverflow.com/questions/41984587/why-are-there-so-many-specializations-of-stdswap/41984803#41984803", "title": "Why are there so many specializations of std::swap?", "body": "<p>Presumably this is for performance reasons in the case that the <code>pair</code>'s contained types are cheap to swap but expensive to copy, like <code>vector</code>. Since it can call swap on <code>first</code> and <code>second</code> instead of doing a copy with temporary objects it may provide a significant improvement to program performance.</p>\n"}, {"comments": [{"owner": {"reputation": 3229, "user_id": 1576556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a399f46867d63605c56a842d0b821a7?s=128&d=identicon&r=PG&f=1", "display_name": "Etherealone", "link": "https://stackoverflow.com/users/1576556/etherealone"}, "edited": false, "score": 0, "creation_date": 1486504627, "post_id": 41984833, "comment_id": 71371739, "body": "This does not answer OP&#39;s question completely. The generic implementation you suggested should perfectly take advantage of cheaply <code>moving</code> internal structures (pointers and such) of STL containers via move constructors without moving every single element. The answer relies on pre-c++11 where move semtantics did not exist. And there is no reason to remove the specializations braking the 100% backward compatibility which some weird code may rely on."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 3229, "user_id": 1576556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a399f46867d63605c56a842d0b821a7?s=128&d=identicon&r=PG&f=1", "display_name": "Etherealone", "link": "https://stackoverflow.com/users/1576556/etherealone"}, "edited": false, "score": 0, "creation_date": 1486546893, "post_id": 41984833, "comment_id": 71387919, "body": "@Etherealone: I do not understand your argument, especially the part where you say that I rely on &quot;pre-c++11&quot;. While the generic implementation is definitely very efficient due to move semantics, it might not be as optimal as the presented <code>std::pair</code> implementation taken from libc++. Also what do you mean by &quot;remove the specializations&quot;?"}, {"owner": {"reputation": 3229, "user_id": 1576556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a399f46867d63605c56a842d0b821a7?s=128&d=identicon&r=PG&f=1", "display_name": "Etherealone", "link": "https://stackoverflow.com/users/1576556/etherealone"}, "edited": false, "score": 0, "creation_date": 1486556000, "post_id": 41984833, "comment_id": 71394228, "body": "Generic implementation had to copy before c++11/move semantics and specializations could allow containers to copy/swap internal structure pointers instead of whole container with contained objects. But after introducing move semantics, isn&#39;t moving the containers via the generic swap implementation (using their move constructors) just the same as specializing swap to move the internal structure pointers? Is there a case where specialization of swap will have more advantage over the generic swap while using on well-defined objects (e.g. objects with efficient move constructors etc.)?"}, {"owner": {"reputation": 3229, "user_id": 1576556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a399f46867d63605c56a842d0b821a7?s=128&d=identicon&r=PG&f=1", "display_name": "Etherealone", "link": "https://stackoverflow.com/users/1576556/etherealone"}, "edited": false, "score": 0, "creation_date": 1486556222, "post_id": 41984833, "comment_id": 71394389, "body": "After all, I think using the generic swap on a <code>pair</code> with move constructor would simply result in similar code to the specialization you provided. Such as <code>pair::pair(pair&amp;&amp; rhs) : first{std::move(rhs.first)}, ...</code> and the specialization you provided does the same via <code>swap(first, p.first);</code>."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 34, "last_activity_date": 1485966668, "last_edit_date": 1495540817, "creation_date": 1485966668, "answer_id": 41984833, "question_id": 41984587, "link": "https://stackoverflow.com/questions/41984587/why-are-there-so-many-specializations-of-stdswap/41984833#41984833", "title": "Why are there so many specializations of std::swap?", "body": "<p><code>std::swap</code> is implemented along the lines of the code below:</p>\n\n<pre><code>template&lt;typename T&gt; void swap(T&amp; t1, T&amp; t2) {\n    T temp = std::move(t1); \n    t1 = std::move(t2);\n    t2 = std::move(temp);\n}\n</code></pre>\n\n<p><em>(See <a href=\"https://stackoverflow.com/questions/25286544/how-does-the-standard-library-implement-stdswap\">\"How does the standard library implement std::swap?\"</a> for more information.)</em></p>\n\n<blockquote>\n  <p>So what it is gained from specializing <code>std::pair</code>?</p>\n</blockquote>\n\n<p><code>std::swap</code> can be specialized in the following way <em>(<a href=\"https://github.com/llvm-mirror/libcxx/blob/master/include/utility#L529-L536\" rel=\"nofollow noreferrer\">simplified from <code>libc++</code></a>)</em>:</p>\n\n<pre><code>void swap(pair&amp; p) noexcept(is_nothrow_swappable&lt;first_type&gt;{} &amp;&amp;\n                            is_nothrow_swappable&lt;second_type&gt;{})\n{\n    using std::swap;\n    swap(first,  p.first);\n    swap(second, p.second);\n}\n</code></pre>\n\n<p>As you can see, <code>swap</code> is directly invoked on the elements of the pair using ADL: this allows customized and potentially faster implementations of <code>swap</code> to be used on <code>first</code> and <code>second</code> <em>(those implementations can exploit the knowledge of the internal structure of the elements for more performance)</em>.</p>\n\n<p><em>(See <a href=\"https://stackoverflow.com/questions/28130671/how-does-using-stdswap-enable-adl\">\"How does <code>using std::swap</code> enable ADL?\"</a> for more information.)</em></p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1485967434, "creation_date": 1485967434, "answer_id": 41985094, "question_id": 41984587, "link": "https://stackoverflow.com/questions/41984587/why-are-there-so-many-specializations-of-stdswap/41985094#41985094", "title": "Why are there so many specializations of std::swap?", "body": "<p>The most efficient way to swap two pairs is not the same as the most efficient way to swap two vectors. The two types have a different implementation, different member variables and different member functions.</p>\n\n<p>There is no just generic way to \"swap\" two objects in this manner.</p>\n\n<p>I mean, sure, for a copyable type you could do this:</p>\n\n<pre><code>T tmp = a;\na = b;\nb = tmp;\n</code></pre>\n\n<p>But that's horrendous.</p>\n\n<p>For a moveable type you can add some <code>std::move</code> and prevent copies, but then you <em>still</em> need \"swap\" semantics at the next layer down in order to actually have useful move semantics. At some point, you need to specialise.</p>\n"}, {"comments": [{"owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486003985, "post_id": 41992179, "comment_id": 71163908, "body": "The move constructor must null out the source pointer at the end to prevent double-free. The move assignment must check if the destination pointer is non-null before starting to prevent memory leaks and like the move constructor must null out the source pointer at the end to prevent memory leaks. Finally the destructor must check if the pointer is non-null to prevent memory leaks."}, {"owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486004008, "post_id": 41992179, "comment_id": 71163918, "body": "So if you implement a generic swap operation as a series of move operations and use that generic swap operation on a vector you end up with a bunch of nulling and null-checks that are redundant. Hopefully the optimiser will be able to spot that those operations are redundant and optimise them away."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486006893, "post_id": 41992179, "comment_id": 71164601, "body": "OK. I misunderstood what you were saying, have removed my comment now"}], "tags": [], "owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "is_accepted": false, "score": 5, "last_activity_date": 1486008782, "last_edit_date": 1486008782, "creation_date": 1485994188, "answer_id": 41992179, "question_id": 41984587, "link": "https://stackoverflow.com/questions/41984587/why-are-there-so-many-specializations-of-stdswap/41992179#41992179", "title": "Why are there so many specializations of std::swap?", "body": "<p>The reason is performance, especially pre c++11.</p>\n\n<p>Consider something like a \"Vector\" type. The Vector has three fields: size, capacity and a pointer to the actual data. It's copy constructor and copy assignment copy the actual data. The C++11 version also has a move constructor and move assignment that steal the pointer, setting the pointer in the source object to null.</p>\n\n<p>A dedicated Vector swap implementation can simply swap the fields.</p>\n\n<p>A generic swap implementation based on the copy constructor, copy assignment and destructor will result in data copying and dynamic memory allocation/deallocation.</p>\n\n<p>A generic swap implementation based on the move constructor, move assignment and destructor will avoid any data copying or memory allocation but it will leave some redundant nulling and null-checks which the optimiser may or may not be able to optimise away.</p>\n\n<hr>\n\n<p>So why have a specialised swap implementation for \"Pair\"? For a pair of int and char there is no need. They are plain old data types so a generic swap is just fine.</p>\n\n<p>But what if I have a pair of say Vector and String ? I want to use the specialist swap operations for those types and so I need a swap operation on the pair type that handles it by swapping it's component elements.</p>\n"}, {"tags": [], "owner": {"reputation": 22733, "user_id": 134841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/51b7f05de9889e7212f949f0fd975922?s=128&d=identicon&r=PG", "display_name": "Marc Mutz - mmutz", "link": "https://stackoverflow.com/users/134841/marc-mutz-mmutz"}, "is_accepted": false, "score": 1, "last_activity_date": 1486495251, "last_edit_date": 1486495251, "creation_date": 1486030228, "answer_id": 41999345, "question_id": 41984587, "link": "https://stackoverflow.com/questions/41984587/why-are-there-so-many-specializations-of-stdswap/41999345#41999345", "title": "Why are there so many specializations of std::swap?", "body": "<p>There is a rule (I think it comes from either Herb Sutter's Exceptional C++ or Scott Meyer's Effective C++ series) that if your type can provide a swap implementation that does not throw, or is faster than the generic <code>std::swap</code> function, it should do so as member function <code>void swap(T &amp;other)</code>.</p>\n\n<p>Theoretically, the generic <code>std::swap()</code> function could use template magic to detect the presence of a member-swap and call that instead of doing</p>\n\n<pre><code>T tmp = std::move(lhs);\nlhs = std::move(rhs);\nrhs = std::move(tmp);\n</code></pre>\n\n<p>but no-one seems to have thought about that one, yet, so people tend to add overloads of free <code>swap</code> in order to call the (potentially faster) member-swap.</p>\n"}], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4123, "favorite_count": 1, "accepted_answer_id": 41984780, "answer_count": 6, "score": 43, "last_activity_date": 1486495251, "creation_date": 1485965913, "question_id": 41984587, "link": "https://stackoverflow.com/questions/41984587/why-are-there-so-many-specializations-of-stdswap", "title": "Why are there so many specializations of std::swap?", "body": "<p>While looking at the documentation for <a href=\"http://en.cppreference.com/w/cpp/algorithm/swap\"><code>std::swap</code></a>, I see a lot of specializations.<br>\nIt looks like every STL container, as well as many other std facilities have a specialized swap.<br>\nI thought with the aid of templates, we wouldn't need all of these specializations?</p>\n\n<p>For example,<br>\nIf I write my own <code>pair</code> it works correctly with the templated version:  </p>\n\n<pre><code>template&lt;class T1,class T2&gt; \nstruct my_pair{\n    T1 t1;\n    T2 t2;\n};\n\nint main() {\n    my_pair&lt;int,char&gt; x{1,'a'};\n    my_pair&lt;int,char&gt; y{2,'b'};\n    std::swap(x,y);\n} \n</code></pre>\n\n<p>So what it is gained from specializing <code>std::pair</code>?</p>\n\n<pre><code>template&lt; class T1, class T2 &gt;\nvoid swap( pair&lt;T1,T2&gt;&amp; lhs, pair&lt;T1,T2&gt;&amp; rhs );\n</code></pre>\n\n<p>I'm also left wondering if I should be writing my own specializations for custom classes,<br>\nor simply relying on the template version.</p>\n"}, {"tags": ["c++", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 6, "creation_date": 1485965147, "post_id": 41984302, "comment_id": 71146445, "body": "<i>I set the last pointer to nullptr</i> We cannot see that, from the example presented. Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1485965353, "post_id": 41984302, "comment_id": 71146580, "body": "That function looks fine to me. The problem is definitely elsewhere."}, {"owner": {"reputation": 573, "user_id": 3853544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8fb5bb3d5d9f89483269b8ba233de92c?s=128&d=identicon&r=PG&f=1", "display_name": "user3853544", "link": "https://stackoverflow.com/users/3853544/user3853544"}, "edited": false, "score": 0, "creation_date": 1485965470, "post_id": 41984302, "comment_id": 71146662, "body": "If your last outputed line before the crash isn&#39;t 0 then you don&#39;t have a null terminated list"}, {"owner": {"reputation": 515, "user_id": 7498451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5dcc4998257c85a16c4ac036330237?s=128&d=identicon&r=PG&f=1", "display_name": "SH7890", "link": "https://stackoverflow.com/users/7498451/sh7890"}, "edited": false, "score": 0, "creation_date": 1485966657, "post_id": 41984302, "comment_id": 71147440, "body": "Some of those cout statements are for my debugging purposes only."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485967938, "post_id": 41985037, "comment_id": 71148244, "body": "Better than my answer so I&#39;m going to piggy-back with a comment: Rather than using a dummy node as the end of the linked list, consider instead setting the next member of the last node <code>null_ptr</code> and testing for that. Less storage used and one less <code>node-&gt;next</code> iteration.  An easy way to start on this is to add a constructor to <code>list_node</code>: <code>list_node(T &amp; data) : data(data), next(nullptr){}</code> Now every node created has data and starts off pointing to no next node and you can slap it on the end of the list or at the beginning or in the middle without worrying that you forgot to end the list."}, {"owner": {"reputation": 515, "user_id": 7498451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5dcc4998257c85a16c4ac036330237?s=128&d=identicon&r=PG&f=1", "display_name": "SH7890", "link": "https://stackoverflow.com/users/7498451/sh7890"}, "edited": false, "score": 0, "creation_date": 1485968017, "post_id": 41985037, "comment_id": 71148297, "body": "That works. Thanks. And, if I may clarify for my own sakes. The &#39;new&#39; keyword dynamically allocates the memory. If memory is not dynamically allocated for an object, it will be destroyed once it goes out of scope?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 515, "user_id": 7498451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5dcc4998257c85a16c4ac036330237?s=128&d=identicon&r=PG&f=1", "display_name": "SH7890", "link": "https://stackoverflow.com/users/7498451/sh7890"}, "edited": false, "score": 1, "creation_date": 1485968105, "post_id": 41985037, "comment_id": 71148350, "body": "@Shadow1356 you got it.  Just remember to <code>delete</code> what you <code>new</code>. <a href=\"http://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one\">Smart pointers can help with this</a>"}], "tags": [], "owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "is_accepted": true, "score": 4, "last_activity_date": 1485967283, "creation_date": 1485967283, "answer_id": 41985037, "question_id": 41984302, "link": "https://stackoverflow.com/questions/41984302/c-linked-list-printing-crash/41985037#41985037", "title": "C++ Linked List printing Crash", "body": "<p>You have 2 different problems regarding node insertion, that are present in your code.</p>\n\n<ol>\n<li><p>In your constructor: You are creating a local variable <code>newNode</code>, and storing its memory address in <code>this-&gt;start</code>. However, <code>newNode</code> object will be destroyed upon leaving the scope of the constructor, and trying to dereference it will result in UB (undefined behavior). You should allocate the node dynamically, so it won't get destroyed once it leaves the scope:</p>\n\n<pre><code>LinkedList&lt;T&gt;::LinkedList(T firstData){\n    this-&gt;start = new list_node&lt;T&gt;;\n    this-&gt;start-&gt;data = firstData;\n    this-&gt;start-&gt;next = nullptr;\n    cout &lt;&lt;\"Constructor\" &lt;&lt;this-&gt;start-&gt;data&lt;&lt;endl;\n}\n</code></pre></li>\n<li><p>In your <code>insert_item</code> procedure: You are dereferencing local pointer <code>insertNode</code>, even though, no actual memory was allocated for it, and dereferencing it results in UB, as well. Correct version would look like:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid LinkedList&lt;T&gt;::insert_item(T item){\n    list_node&lt;T&gt; *insertNode = new list_node&lt;T&gt;;\n    insertNode-&gt;data = item;\n    insertNode-&gt;next = this-&gt;start;\n    this-&gt;start = insertNode;\n    cout &lt;&lt; \"After insert \" &lt;&lt;this-&gt;start-&gt;data &lt;&lt; '\\n' &lt;&lt; this-&gt;start-&gt;next-&gt;data&lt;&lt;endl;\n    }\n</code></pre></li>\n<li><p>And now, since we are doing dynamic memory allocation, we need to free it in the destructor (C++ has no garbage collection), so simply assigning <code>start</code> to <code>nullptr</code> won't be enough:</p>\n\n<pre><code>template &lt;typename T&gt;\n    LinkedList&lt;T&gt;::~LinkedList(){\n        list_node&lt;T&gt; *pos = this-&gt;start;\n        while (pos != nullptr){\n            list_node&lt;T&gt;* nextPos = pos-&gt;next;\n            delete pos;\n            pos = nextPos;\n        }\n    }\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 515, "user_id": 7498451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5dcc4998257c85a16c4ac036330237?s=128&d=identicon&r=PG&f=1", "display_name": "SH7890", "link": "https://stackoverflow.com/users/7498451/sh7890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 41985037, "answer_count": 1, "score": 3, "last_activity_date": 1485967588, "creation_date": 1485965026, "last_edit_date": 1485966141, "question_id": 41984302, "link": "https://stackoverflow.com/questions/41984302/c-linked-list-printing-crash", "title": "C++ Linked List printing Crash", "body": "<p>I'm not new to programming, but learning C++. To do this, I'm implementing the \"standard\" data structures in the C++ language. I'm starting with Linked Lists. I understand how they work and all that. However, when I try to print out the list, it doesn't stop when it's supposed to. I set the last pointer to nullptr and all that and have researched this problem heavily on the internet, but I cannot find what I'm doing different from everyone else. Here's the code: </p>\n\n<pre><code>template&lt;typename T&gt;\nvoid LinkedList&lt;T&gt;::print_list(){\n\n    list_node&lt;T&gt; *pos = this-&gt;start;\n\n    while(pos != nullptr){\n       cout &lt;&lt; \"PRInting\" &lt;&lt;pos-&gt;data&lt;&lt;endl &lt;&lt;pos-&gt;next;\n\n        pos = pos-&gt;next;\n    }\n}\n</code></pre>\n\n<p>Here's the Full Code:</p>\n\n<pre><code>#ifndef LINKEDLIST_H_INCLUDED\n#define LINKEDLIST_H_INCLUDED\n\n#include &lt;iostream&gt;\n\nusing std::cout;\nusing std::endl;\ntemplate &lt;class T&gt;\nstruct list_node{\n    T data;\n    list_node&lt;T&gt; *next;\n};\ntemplate &lt;class T&gt;\nclass LinkedList{\nprivate:\n    list_node&lt;T&gt; *start;\n\npublic:\n    LinkedList();\n    LinkedList(T firstData);\n    ~LinkedList();\n    void insert_item(T item);\n    void delete_item(T item);\n    list_node&lt;T&gt;* search_list();\n    void print_list();\n};\n\n\n\n//constructors and destructor\ntemplate &lt;typename T&gt;\nLinkedList&lt;T&gt;::LinkedList(){\n    this-&gt;start = nullptr;\n}\ntemplate &lt;typename T&gt;\nLinkedList&lt;T&gt;::LinkedList(T firstData){\n    list_node&lt;T&gt; newNode = {\n        firstData,\n        nullptr\n    };\n    this-&gt;start = &amp;newNode;\n    cout &lt;&lt;\"Constructor\" &lt;&lt;this-&gt;start-&gt;data&lt;&lt;endl;\n}\ntemplate &lt;typename T&gt;\nLinkedList&lt;T&gt;::~LinkedList(){\n    this-&gt;start = nullptr;\n}\n\n//Debugging print function\ntemplate&lt;typename T&gt;\nvoid LinkedList&lt;T&gt;::print_list(){\n    list_node&lt;T&gt; *pos = this-&gt;start;\n    while(pos != nullptr){\n        cout &lt;&lt; \"PRInting\" &lt;&lt;pos-&gt;data&lt;&lt;endl &lt;&lt;pos-&gt;next;\n        pos = pos-&gt;next;\n    }\n    //cout &lt;&lt; pos-&gt;data;\n}\n\n\n//Operations on Linked Lists\ntemplate &lt;typename T&gt;\nvoid LinkedList&lt;T&gt;::insert_item(T item){\n    list_node&lt;T&gt; *insertNode;\n    insertNode-&gt;data = item;\n    insertNode-&gt;next = this-&gt;start;\n    this-&gt;start = insertNode;\n    cout &lt;&lt; \"After insert \" &lt;&lt;this-&gt;start-&gt;data &lt;&lt; '\\n' &lt;&lt; this-&gt;start-&gt;next-&gt;data&lt;&lt;endl;\n}\n\n#endif // LINKEDLIST_H_INCLUDED\n</code></pre>\n"}, {"tags": ["c++", "exception", "mfc"], "comments": [{"owner": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "edited": false, "score": 0, "creation_date": 1485964817, "post_id": 41984166, "comment_id": 71146201, "body": "I&#39;d recommend searching StackOverflow for why MFC exceptions are happening.  Use the code in question.  :)"}, {"owner": {"reputation": 25, "user_id": 4771116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4dcxI.jpg?s=128&g=1", "display_name": "Slav", "link": "https://stackoverflow.com/users/4771116/slav"}, "reply_to_user": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "edited": false, "score": 0, "creation_date": 1485966044, "post_id": 41984166, "comment_id": 71147039, "body": "In the question, there is pointed ProcessWndProcException(CException* e, const MSG* pMsg) function, which is actually the code!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1485976131, "post_id": 41984166, "comment_id": 71152976, "body": "You cannot generate an <i>&quot;unhandled exception&quot;</i>. You need to raise an exception and do it in code that doesn&#39;t have any exception frames installed other than the top-level unhandled exception filter."}], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1485966852, "post_id": 41984438, "comment_id": 71147570, "body": "With MFC you shouldn&#39;t throw the <code>CException</code> object itself, you should throw a <i>pointer</i> to it."}], "tags": [], "owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "is_accepted": true, "score": 3, "last_activity_date": 1485965451, "creation_date": 1485965451, "answer_id": 41984438, "question_id": 41984166, "link": "https://stackoverflow.com/questions/41984166/how-to-generate-unhandled-mfc-exception/41984438#41984438", "title": "How to generate unhandled MFC exception?", "body": "<p>You can just throw a <code>CException</code> and not catch it anywhere.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/e583tzca(v=vs.110).aspx\" rel=\"nofollow noreferrer\">Exception Processing</a> has information about various functions provided by MFC to throw exceptions.</p>\n\n<pre><code>// Throw a CMemoryException\nAfxThrowMemoryException();\n</code></pre>\n\n<p>Bonus Info: <a href=\"https://msdn.microsoft.com/en-us/library/h2sw1zhe.aspx\" rel=\"nofollow noreferrer\">Exceptions: Throwing Exceptions from Your Own Functions</a></p>\n"}], "owner": {"reputation": 25, "user_id": 4771116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4dcxI.jpg?s=128&g=1", "display_name": "Slav", "link": "https://stackoverflow.com/users/4771116/slav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 41984438, "answer_count": 1, "score": 0, "last_activity_date": 1485965451, "creation_date": 1485964647, "question_id": 41984166, "link": "https://stackoverflow.com/questions/41984166/how-to-generate-unhandled-mfc-exception", "title": "How to generate unhandled MFC exception?", "body": "<p>I want to test \"ProcessWndProcException\" function which should catch unhandled MFC exceptions. So I need a simple example, which will generate an unhandled MFC exception. Googling did not help much, so maybe anyone have any ideas?</p>\n"}, {"tags": ["c++", "sockets"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 6, "creation_date": 1485964357, "post_id": 41984031, "comment_id": 71145823, "body": "This is not a DNS resolver. It is a tiny utility application that uses the OS&#39;s DNS resolver. Have your users use the OS&#39;s built-in tools instead of attempting to wrap them with a generic, catch-all program. The warning seems pretty explanatory. What do you mean by &quot;on some servers&quot;?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1485964468, "post_id": 41984031, "comment_id": 71145909, "body": "&quot;static libraries&quot; and &quot;run everywhere&quot; are pretty much mutually exclusive as they bind you to a specific system call interface, and system call interfaces are not standardized at all.  At least a dynamic library-call level interface is standard, even if somewhat variable."}, {"owner": {"reputation": 9, "user_id": 7385450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ce39db61b5f99f8d755edccdfaf250?s=128&d=identicon&r=PG&f=1", "display_name": "DancoD", "link": "https://stackoverflow.com/users/7385450/dancod"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1485964868, "post_id": 41984031, "comment_id": 71146240, "body": "@LightnessRacesinOrbit on this server <code>2.6.18-371.8.1.el5 #1 SMP Thu Apr 24 18:23:07 EDT 2014 i686 i686 i386 GNU&#47;Linux </code> works, it is resolving, on this <code>Linux docker-test 4.4.0-59-generic #80-Ubuntu SMP Fri Jan 6 17:47:47 UTC 2017 x86_64 x86_64 x86_64 GNU&#47;Linux</code> it dosen&#39;t ... and this part that you say <code>uses the OS&#39;s DNS resolver</code> clearly say that i have to use another library/functions beside <code>gethostbyname</code>, that is certain it seems ..."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1485965632, "post_id": 41984031, "comment_id": 71146773, "body": "There are existing standalone, real, DNS resolvers that can be used as static libraries, not merely thin wrappers for gethostbyname (including one that I wrote). But, a question on that is clearly off-topic here..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1485965648, "post_id": 41984031, "comment_id": 71146787, "body": "Well if you want to implement a DNS resolver then go ahead, but making a system call asking the OS to resolve DNS for you is not implementing a DNS resolver."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1485969541, "post_id": 41984031, "comment_id": 71149189, "body": "@DancoD <i>and this part that you say uses the OS&#39;s DNS resolver clearly say that i have to use another library/functions beside gethostbyname, that is certain it seems ...</i> That error message is telling you that you <b>can not</b> statically link <code>gethostbyname()</code> because of the way it&#39;s implemented in glibc - you need the glibc shared libraries to make that work. It is not telling you the DNS resolver didn&#39;t work - it&#39;s telling you you built an incomplete program that needs specific shared libraries. As I commented earlier, &quot;static linking&quot; and &quot;run everywhere&quot; are pretty much mutually exclusive."}, {"owner": {"reputation": 9, "user_id": 7385450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ce39db61b5f99f8d755edccdfaf250?s=128&d=identicon&r=PG&f=1", "display_name": "DancoD", "link": "https://stackoverflow.com/users/7385450/dancod"}, "edited": false, "score": 0, "creation_date": 1486048657, "post_id": 41984031, "comment_id": 71187657, "body": "so the only way is to get a third party library, do you know any good dns libraries?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7385450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ce39db61b5f99f8d755edccdfaf250?s=128&d=identicon&r=PG&f=1", "display_name": "DancoD", "link": "https://stackoverflow.com/users/7385450/dancod"}, "edited": false, "score": 0, "creation_date": 1486049726, "post_id": 41985186, "comment_id": 71188424, "body": "thank you for the answer. how do i install this? <code>.&#47;configure make make install</code> style? sorry if the question is a little bit off topic, i used only <code>curl</code> as an external library before ..."}, {"owner": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "reply_to_user": {"reputation": 9, "user_id": 7385450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ce39db61b5f99f8d755edccdfaf250?s=128&d=identicon&r=PG&f=1", "display_name": "DancoD", "link": "https://stackoverflow.com/users/7385450/dancod"}, "edited": false, "score": 0, "creation_date": 1486051117, "post_id": 41985186, "comment_id": 71189380, "body": "Exactly. The project also has a nice overview of competing libs, see <a href=\"https://c-ares.haxx.se/otherlibs.html\" rel=\"nofollow noreferrer\">c-ares.haxx.se/otherlibs.html</a>."}], "tags": [], "owner": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1485967684, "creation_date": 1485967684, "answer_id": 41985186, "question_id": 41984031, "link": "https://stackoverflow.com/questions/41984031/static-dns-resolver-in-c/41985186#41985186", "title": "Static DNS resolver in C++", "body": "<p>Use c-ares library, here: <a href=\"https://c-ares.haxx.se/\" rel=\"nofollow noreferrer\">https://c-ares.haxx.se/</a>. This is a true OS-independent resolver.</p>\n"}], "owner": {"reputation": 9, "user_id": 7385450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ce39db61b5f99f8d755edccdfaf250?s=128&d=identicon&r=PG&f=1", "display_name": "DancoD", "link": "https://stackoverflow.com/users/7385450/dancod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1489, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485967684, "creation_date": 1485964260, "last_edit_date": 1485964477, "question_id": 41984031, "link": "https://stackoverflow.com/questions/41984031/static-dns-resolver-in-c", "title": "Static DNS resolver in C++", "body": "<p>I am trying to build a fast DNS resolver in c++ with static libraries (work everywhere). So far so good  my version uses <code>gethostbyname</code> and <strong>on some servers it doesn't work</strong> i get <code>A non-recoverable name server error occurred (NO_RECOVERY)</code>. Also when compiling we are getting this warning : </p>\n\n<p><code>Using 'gethostbyname' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cstring&gt;\n\n// for dom\n#include &lt;netdb.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n\nint main(int argc, char *argv[])\n{\n    char* host = \"google.com\";\n    int debugLevel = 5;\n    char* ip_of_domain;\n    struct hostent *he;\n\n    he = gethostbyname(host);\n\n    if (he == NULL)\n    {\n        switch(h_errno)\n        {\n            case HOST_NOT_FOUND:\n                if(debugLevel &gt;= 3) puts(\"The host was not found.\");\n                break;\n            case NO_ADDRESS:\n                if(debugLevel &gt;= 3) puts(\"The name is valid but it has no address.\");\n                break;\n            case NO_RECOVERY:\n                if(debugLevel &gt;= 3) puts(\"A non-recoverable name server error occurred.\");\n                break;\n            case TRY_AGAIN:\n                if(debugLevel &gt;= 3) puts(\"The name server is temporarily unavailable.\");\n                break;\n        }\n    }\n    else\n    {\n        ip_of_domain = strdup(inet_ntoa(*((struct in_addr *) he-&gt;h_addr_list[0])));\n    }\n    if(debugLevel &gt;= 4) printf(\"IP=%s\\n\",ip_of_domain);\n}\n</code></pre>\n\n<p>The program has to be compatible every where, 32 and 64 bits.</p>\n\n<p>Any solution?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "class", "opencv", "pointers", "mat"], "comments": [{"owner": {"reputation": 616, "user_id": 7473335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVqBS.png?s=128&g=1", "display_name": "NAmorim", "link": "https://stackoverflow.com/users/7473335/namorim"}, "edited": false, "score": 0, "creation_date": 1485965874, "post_id": 41983974, "comment_id": 71146928, "body": "Hmm cannot reproduce, how/where did you use <b>Source_Buffer</b> class?"}, {"owner": {"reputation": 15, "user_id": 7375792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a2654f5f3a41652869d5f1d4eca6f6?s=128&d=identicon&r=PG&f=1", "display_name": "user7375792", "link": "https://stackoverflow.com/users/7375792/user7375792"}, "reply_to_user": {"reputation": 616, "user_id": 7473335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVqBS.png?s=128&g=1", "display_name": "NAmorim", "link": "https://stackoverflow.com/users/7473335/namorim"}, "edited": false, "score": 0, "creation_date": 1485966783, "post_id": 41983974, "comment_id": 71147515, "body": "i added additional main code"}], "owner": {"reputation": 15, "user_id": 7375792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24a2654f5f3a41652869d5f1d4eca6f6?s=128&d=identicon&r=PG&f=1", "display_name": "user7375792", "link": "https://stackoverflow.com/users/7375792/user7375792"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485966745, "creation_date": 1485964098, "last_edit_date": 1485966745, "question_id": 41983974, "link": "https://stackoverflow.com/questions/41983974/why-cant-i-initialize-opencv-mat-in-class", "title": "Why can&#39;t i initialize opencv Mat in class", "body": "<p>I tried to initialize constructor of Mat that is in class Source_Buffer but i gave me an error \"A buffer overrun has occurred in ConsoleApplication4.exe which has corrupted the program's internal state. Press Break to debug the program or Continue to terminate the program.\"</p>\n\n<pre><code># include &lt;iostream&gt;\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\nusing namespace std;\nusing namespace cv;\n\n\nclass Source_Buffer {\n\npublic:\n    Source_Buffer();\n    int run();\nprivate:\n    const char* sffiename;\n    Mat sfsrc; // this causes error\n    Rect sfregion_of_interest;\n\n\n\n};\nSource_Buffer::Source_Buffer() :\nsffiename(\"C:/ccc.jpg\")\n, sfsrc(imread(sffiename,0)) // and this\n, sfregion_of_interest()\n{\n\n}\n\nint Source_Buffer::run(){\n    cout &lt;&lt; \"test\" &lt;&lt; endl;\n    //Mat sfsrc = imread(sffiename, 0);\n    sfregion_of_interest = Rect(90, 75, 250, 250);\n    sfsrc = sfsrc(sfregion_of_interest);\n(...)\nreturn 0;\n}\n</code></pre>\n\n<p>it works just fine after i extracted 'Mat sfsrc' and 'sffiename(\"C:/ccc.jpg\")' on constructor from the class and put those into main function.\nlike <code>Mat sfsrc = imread(sffiename, 0);</code></p>\n\n<p>then i wanted to see if it work by just putting Mat sfsrc; to class as class member variable and not calling constructor for that\nwhich is like </p>\n\n<pre><code>class Source_Buffer {\n\npublic:\n    Source_Buffer();\n    int run();\nprivate:\n    const char* sffiename;\n\n    Rect sfregion_of_interest;\n    Mat sfsrc;\n\n\n};\nSource_Buffer::Source_Buffer() :\nsffiename(\"C:/ccc.jpg\")\n\n, sfregion_of_interest()\n{\n\n}\n\nint Source_Buffer::run(){\n    cout &lt;&lt; \"test\" &lt;&lt; endl;\n\n    sfsrc = imread(sffiename, 0);\n    sfregion_of_interest = Rect(90, 75, 250, 250);\n    sfsrc = sfsrc(sfregion_of_interest);\nreturn 0;\n}\n</code></pre>\n\n<p>doenst work.\nshowing me \" Access violation writing location 0x0000000000000000.\" guess some null pointer stuff.\ni tried to search some [Mat initializing in class] stuff but nothing i could find one.\nwhat is wrong with my thinking here?</p>\n\n<h1>source.cpp</h1>\n\n<pre><code>#include \"Source_Buffer.h\"\nint main()\n        {\n            try\n            {\n                cout &lt;&lt; \"(1) Start !\" &lt;&lt; endl;\n                Source_Buffer sfbuffer;\n                cout &lt;&lt; \"(2) running entrance\" &lt;&lt; endl;\n                //Source_Game source_game;\n                //source_game.runc();\n                sfbuffer.run();\n            }\n            catch (std::exception&amp; e)\n            {\n                std::cout &lt;&lt; \"\\nEXCEPTION: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n            }\n            return 0;\n        }\n</code></pre>\n\n<h1>Source_Buffer.h</h1>\n\n<pre><code>#pragma once\n\n\n/*bridge*/\nclass Source_Buffer {\n\npublic:\n    Source_Buffer();\n    int run();\n\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost", "shared-ptr"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1485963391, "post_id": 41983576, "comment_id": 71145065, "body": "If the shared pointer is never going to be shared it&#39;s kind of pointless.  Is this a question about shared pointers (in which case you might need to expand your example) or is this more a question about return value optimizations?"}, {"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 3, "creation_date": 1485963529, "post_id": 41983576, "comment_id": 71145153, "body": "You could as well have <code>boost::unordered_set&lt;std::string&gt; list;</code> and <code>return list;</code>, because all your <code>shared_ptr</code> does there is allocate some extra stuff on the heap, which is not optimal for your case unless you share the ownership of <code>shared_ptr</code> to somewhere else."}], "answers": [{"comments": [{"owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1485963242, "post_id": 41983611, "comment_id": 71144941, "body": "I made a comment that I do populate my shared_ptr with a code."}, {"owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "reply_to_user": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "edited": false, "score": 0, "creation_date": 1485963368, "post_id": 41983611, "comment_id": 71145048, "body": "But when you say *list it gets the contents of the shared pointer and that is what gets returned.  The shared_ptr objects itself is created locally on the stack of the function and destroyed when function returns -- it literally serves no purpose as written."}], "tags": [], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "is_accepted": false, "score": 2, "last_activity_date": 1485963200, "creation_date": 1485963200, "answer_id": 41983611, "question_id": 41983576, "link": "https://stackoverflow.com/questions/41983576/return-a-dereferenced-value-of-shared-ptr-from-a-function/41983611#41983611", "title": "Return a dereferenced value of shared_ptr from a function", "body": "<p>Your shared_ptr is not doing anything, you are not returning it, you are returning its contents, i.e. the unordered_set itself.\nYou should change your function to return the shared_ptr and return it by value.</p>\n\n<p>You should probably be using std:: not boost (unless this is an old compiler).</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 4, "last_activity_date": 1485963794, "creation_date": 1485963794, "answer_id": 41983849, "question_id": 41983576, "link": "https://stackoverflow.com/questions/41983576/return-a-dereferenced-value-of-shared-ptr-from-a-function/41983849#41983849", "title": "Return a dereferenced value of shared_ptr from a function", "body": "<blockquote>\n  <p>Copying/NRVO/moving or destruction of shared_ptr there by causing memory fault?</p>\n</blockquote>\n\n<p>Well, let's think about it. Consider this function:</p>\n\n<pre><code>X foo() {\n    X x;\n    return x;\n}\n</code></pre>\n\n<p>There are two potential orderings here, let's forget about copy elision.</p>\n\n<ol>\n<li><code>x</code> is copied into the return value, then <code>x</code> is destroyed.</li>\n<li><code>x</code> is destroyed, then <code>x</code> is copied into the return value.</li>\n</ol>\n\n<p>The implication of (2) would be that such code would be undefined behavior, which would make it pretty much impossible to write a function at all - since you couldn't return any local variables. So from a language sanity design perspective, it had better be (1).</p>\n\n<hr />\n\n<p>The explicit rule is in [stmt.return]:</p>\n\n<blockquote>\n  <p>The copy-initialization of the result of the call <strong>is sequenced before the destruction of temporaries</strong> at the end of the full-expression established by the operand of the return statement, which, in turn, is sequenced before\n  the destruction of local variables (6.6) of the block enclosing the return statement.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 8, "last_activity_date": 1488239828, "last_edit_date": 1488239828, "creation_date": 1485964079, "answer_id": 41983965, "question_id": 41983576, "link": "https://stackoverflow.com/questions/41983576/return-a-dereferenced-value-of-shared-ptr-from-a-function/41983965#41983965", "title": "Return a dereferenced value of shared_ptr from a function", "body": "<p>This happens:</p>\n\n<ul>\n<li>A temporary copy of the pointed object is made. This is the return value of the function. The copy can not be elided.</li>\n<li>The local variables of the function, including the shared pointer are destroyed.</li>\n<li>When the shared pointer is destroyed, the refcount is decremented. If no copies of the shared pointer were made within the function, refocount will reach 0 and the pointed object is destroyed.</li>\n</ul>\n\n<p>It is safe, but the use of dynamic allocation, and shared pointer seems <em>pointless</em> and the inefficiency of the copy may hurt performance if the set is large.</p>\n\n<hr>\n\n<p>Since you haven't demonstrated any need for using the pointer, I suggest a simpler alternative:</p>\n\n<pre><code>boost::unordered_set&lt;std::string&gt; list;\n\n/* Code to populate the unordered_set goes here and I do\n     populate my set. */\n\nreturn list;\n</code></pre>\n\n<p>NRVO can be applied to this and if it's not applied, the return value is constructed by move.</p>\n"}], "owner": {"reputation": 1805, "user_id": 1410711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2872680a6b9ef5b0407b4fef88966e2e?s=128&d=identicon&r=PG", "display_name": "Recker", "link": "https://stackoverflow.com/users/1410711/recker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 41983965, "answer_count": 3, "score": 3, "last_activity_date": 1488239828, "creation_date": 1485963088, "last_edit_date": 1485963393, "question_id": 41983576, "link": "https://stackoverflow.com/questions/41983576/return-a-dereferenced-value-of-shared-ptr-from-a-function", "title": "Return a dereferenced value of shared_ptr from a function", "body": "<p>Here is a rookie question. Is the following code safe?</p>\n\n<pre><code>boost::unordered_set&lt;std::string&gt; func()\n{\n      boost::shared_ptr&lt;boost::unordered_set&lt;std::string&gt;&gt; list =\n              boost::make_shared&lt;boost::unordered_set&lt;std::string&gt;&gt;();\n\n      /* Code to populate the shared_ptr to unordered_set goes here and I do\n         populate my set. */\n\n      return *list;\n}\n</code></pre>\n\n<p>What will happen first? Copying/NRVO/moving or destruction of <code>shared_ptr</code> there by causing memory fault? If unsafe, what are my alternatives?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 3, "creation_date": 1485963030, "post_id": 41983498, "comment_id": 71144789, "body": "I cannot reproduce this. Triple check that your program is reading the &quot;Text file&quot; you pasted in here, not some other file, or that you are running a program compiled from the code you pasted here."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1485963099, "post_id": 41983498, "comment_id": 71144833, "body": "Your test data only contains 3 numbers.  Your program demands 10 numbers are input.  What are the remaining 7?"}, {"owner": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1485963106, "post_id": 41983498, "comment_id": 71144837, "body": "@nos you probably forget to include the <code>ifstream</code> definition"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 7, "creation_date": 1485963136, "post_id": 41983498, "comment_id": 71144856, "body": "Use a hex dump program. Most likely there are invisible characters in the file."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "edited": false, "score": 1, "creation_date": 1485963199, "post_id": 41983498, "comment_id": 71144907, "body": "@SebTu I did not. There is no ifstream definiton that can be forgotten in this code."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1485963284, "post_id": 41983498, "comment_id": 71144978, "body": "You may want to change your input loop to a while loop and use <code>std::vector</code>, for example:  <code>int num; while (read &gt;&gt; num) {my_vector.push_back(num);}</code>"}, {"owner": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1485963489, "post_id": 41983498, "comment_id": 71145130, "body": "@nos Well, I thought with <code>I cannot reproduce this</code> you would mean you cannot compile the code. However, the comment from stark is probably the reason ( or at least gives a hint ) why the behavior isn&#39;t reproduciable"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1485964153, "post_id": 41983498, "comment_id": 71145648, "body": "@ThomasMatthews: As of C++11, <code>0</code>."}, {"owner": {"reputation": 1139, "user_id": 4954434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/820014a12e2c692ff8cd170a33a60141?s=128&d=identicon&r=PG", "display_name": "Jithin Pavithran", "link": "https://stackoverflow.com/users/4954434/jithin-pavithran"}, "edited": false, "score": 0, "creation_date": 1485964380, "post_id": 41983498, "comment_id": 71145837, "body": "I&#39;m getting the expected output with the given code."}, {"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "edited": false, "score": 0, "creation_date": 1485966080, "post_id": 41983498, "comment_id": 71147062, "body": "try the same using <code>cin</code> instead of <code>ifstream</code>. if it works for <code>cin</code> it should work for <code>ifstream</code>. Also check the file content carefully."}], "owner": {"reputation": 39, "user_id": 6331869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aec64d56c998ee2d14ea79b4df132f02?s=128&d=identicon&r=PG&f=1", "display_name": "massacre123", "link": "https://stackoverflow.com/users/6331869/massacre123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "closed_date": 1485992974, "answer_count": 0, "score": 2, "last_activity_date": 1485962870, "creation_date": 1485962870, "question_id": 41983498, "link": "https://stackoverflow.com/questions/41983498/reading-wrongseparated-integers-in-c", "closed_reason": "Not suitable for this site", "title": "Reading wrong(separated) integers in C++", "body": "<p>I am trying to read few integers from text file separated by white space, however I get them wrong and I want to know why.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int nums[10]={0};\n    ifstream read (\"test.txt\");\n\n    for (int i=0; i&lt;10; i++) {\n        read &gt;&gt; nums[i];\n        cout &lt;&lt; nums[i] &lt;&lt; \" \";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Text file:</p>\n\n<blockquote>\n  <p>9995 683 74634</p>\n</blockquote>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>9995 6 83 7 4634 0 0 0 0 0</p>\n</blockquote>\n"}, {"tags": ["c++", "qt", "actionscript-3", "flash", "mouseevent"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 3524653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7caa42189dc768c72ed379b1f367cb4f?s=128&d=identicon&r=PG&f=1", "display_name": "vmkan", "link": "https://stackoverflow.com/users/3524653/vmkan"}, "is_accepted": false, "score": 0, "last_activity_date": 1486653381, "creation_date": 1486653381, "answer_id": 42140377, "question_id": 41983332, "link": "https://stackoverflow.com/questions/41983332/how-to-send-mousewheelevent-to-swf-loaded-to-qwebview/42140377#42140377", "title": "How to send mouseWheelEvent to SWF, loaded to QWebView", "body": "<p>Well, it looks like a bug in QWebkit, because there is no such problem in newer versions and QWebEngine. Will try use QAxWidget instead.</p>\n"}], "owner": {"reputation": 43, "user_id": 3524653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7caa42189dc768c72ed379b1f367cb4f?s=128&d=identicon&r=PG&f=1", "display_name": "vmkan", "link": "https://stackoverflow.com/users/3524653/vmkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1486653381, "creation_date": 1485962443, "question_id": 41983332, "link": "https://stackoverflow.com/questions/41983332/how-to-send-mousewheelevent-to-swf-loaded-to-qwebview", "title": "How to send mouseWheelEvent to SWF, loaded to QWebView", "body": "<p>I have a program, written in C++, using Qt 5.5.1 (can't switch to another version), running under Windows (7 or 10, doesn't matter).</p>\n\n<p>So I have some FlashWidget, subclassed from QWebView. It loads html file, parses it and replaces %1 with appropriate path to *.swf</p>\n\n<pre><code>&lt;object \n    class=\"flashPlayer\"\n    width=90%\n    height=100% \n    type=\"application/x-shockwave-flash\"\n    id=\"bridgemovie\"\n    data=\"%1\"  &gt;\n    &lt;param name=\"allowScriptAccess\" value=\"always\"/&gt;\n&lt;/object&gt;\n</code></pre>\n\n<p>SWF file has event listeners on mouse events: mouse down, up and mouse wheel</p>\n\n<pre><code>    addEventListener(MouseEvent.MOUSE_WHEEL, zoom); //\"zoom\" is just some internal function\n    addEventListener(MouseEvent.MOUSE_DOWN, mouseDown1);\n    addEventListener(MouseEvent.MOUSE_UP, mouseReleased);\n</code></pre>\n\n<p><strong>Problem</strong>: Dragging and clicking works pretty well, but loaded SWF doesn't receive wheel events. I can't modify SWF code, only C++ and HTML parts. So, how I can natively pass mouseWheel event from JS (or, perhaps, QWebView, if allowed so) to the loaded SWF file?</p>\n\n<p><strong>P.S.</strong> I've tried loading SWF with QAxWidget, and wheelEvent is received, but there are some rendering problems, so I'm trying to repair solution with QWebView.</p>\n"}, {"tags": ["c++", "linux", "eclipse", "svn"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7501059, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0923949e94d423abe16dc624d92183d9?s=128&d=identicon&r=PG&f=1", "display_name": "Helvinion", "link": "https://stackoverflow.com/users/7501059/helvinion"}, "edited": false, "score": 0, "creation_date": 1485964699, "post_id": 41983754, "comment_id": 71146098, "body": "Unfortunately, I don&#39;t have such power on the project I am working on... CI is a planned change, but not for now... Furthermore, I would like to be able to compile my work on the remote machine, and to do basic tests before commiting it, and I am not sure CI tools are designed for that..."}, {"owner": {"reputation": 8414, "user_id": 2249175, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XGc78.png?s=128&g=1", "display_name": "Paul Kertscher", "link": "https://stackoverflow.com/users/2249175/paul-kertscher"}, "reply_to_user": {"reputation": 77, "user_id": 7501059, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0923949e94d423abe16dc624d92183d9?s=128&d=identicon&r=PG&f=1", "display_name": "Helvinion", "link": "https://stackoverflow.com/users/7501059/helvinion"}, "edited": false, "score": 0, "creation_date": 1485964853, "post_id": 41983754, "comment_id": 71146229, "body": "I see, but how does it come that you can&#39;t install the build chain locally?"}, {"owner": {"reputation": 77, "user_id": 7501059, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0923949e94d423abe16dc624d92183d9?s=128&d=identicon&r=PG&f=1", "display_name": "Helvinion", "link": "https://stackoverflow.com/users/7501059/helvinion"}, "edited": false, "score": 0, "creation_date": 1485965186, "post_id": 41983754, "comment_id": 71146468, "body": "I need the oracle pro*C precompiler, and it is not possible to install it for every developer, as some of us are on windows or linux, we don&#39;t all have administration privileges, and as I heard, a ton of configuration files and database description files are needed... too complicated, I think."}], "tags": [], "owner": {"reputation": 8414, "user_id": 2249175, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XGc78.png?s=128&g=1", "display_name": "Paul Kertscher", "link": "https://stackoverflow.com/users/2249175/paul-kertscher"}, "is_accepted": false, "score": 0, "last_activity_date": 1485963552, "creation_date": 1485963552, "answer_id": 41983754, "question_id": 41983250, "link": "https://stackoverflow.com/questions/41983250/svn-and-sftp-synchronisation-with-eclipse/41983754#41983754", "title": "SVN and SFTP synchronisation with eclipse", "body": "<p>To me this sounds like a perfect use-case for a continuus integration (CI) system. Generally speaking, this CI system pulls the code from your repository (for example in regular intervals) and then executes the build chain, collects artifacts, informs you about the state of your build, etc.</p>\n\n<p>Although it originated from the Java world, I have successfully used Jenkins for continuus integration of C-projects on a Linux server, but there are others, like TeamCity or GitLab CI (the latter would require you to switch to Git, but it's a really neat system with a YAML configuration for CI).</p>\n\n<p>Of course CI systems have a learning curve - you don't something like a free meal - but it may really be worth the effort.</p>\n"}], "owner": {"reputation": 77, "user_id": 7501059, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0923949e94d423abe16dc624d92183d9?s=128&d=identicon&r=PG&f=1", "display_name": "Helvinion", "link": "https://stackoverflow.com/users/7501059/helvinion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485963552, "creation_date": 1485962209, "question_id": 41983250, "link": "https://stackoverflow.com/questions/41983250/svn-and-sftp-synchronisation-with-eclipse", "title": "SVN and SFTP synchronisation with eclipse", "body": "<p>I have to create and configure an eclipse (Mars 2) for a C project. The project is on a SVN repository, and can only be compiled on a specific linux redhat server that has the appropriate toolchain.</p>\n\n<p>What I need is an IDE that would allow me to commit my changes to the repository and that would automagically synchronize them on the Linux server. I tried a few things but none of them worked. I must (to my great regret) avoid the need of a terminal while using that IDE, but of course not while configuring it.</p>\n\n<p>Firstly, I used the Remote System Explorer feature in eclipse. I connected succefully to the server, created a \"Remote Project\" that I could open in the C/C++ perspective. However, the whole thing is impossible to use, as it has no indexation, I had to create \"User Actions\" in order to compile (which is on my point of vue pretty anti-ergonomic) and the SVN plugin does not detect the project as an SVN copy. Furthermore, in the C/C++ perspective, there is a 2s gap between the moment I type something, and the moment it appears on my screen.</p>\n\n<p>I also tryed to mount a network filesystem on my local machine, with sshfs, and if it works far better, I still experience lags. Also, I had to write a Makefile and call my compiler via \"ssh $(USER)@$(HOST) build.ksh\". (one of the point of the projetc is to write a real Makefile...). But SVN is working.</p>\n\n<p>I also tried to run eclipse on the host machine, with X forwarding, and if it works perfectly, there is still lags...</p>\n\n<p>Finally, I tried an sftp synchronisation, but it seems I can't use my SVN plugin features and the sftp together.</p>\n\n<p>I am out of solutions, and pretty frustrated as I feel that this kind of things should be pretty easy. I mean, all I want is that eclipse automatically copy my files on my remote home directory... Thanks for your help...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485962199, "post_id": 41983170, "comment_id": 71144153, "body": "If you want to actually be able to <i>use</i> the functions of a class, you need the full definition of it. If you only have a forward declaration how would the compiler actually know what member functions it have?"}, {"owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "edited": false, "score": 0, "creation_date": 1485963221, "post_id": 41983170, "comment_id": 71144924, "body": "IMO, it is different &quot;a duplicated question&quot; and two questions about the same issue. A programmer who know the solution will immediately know the answer is similar, but a new programmer will not, and probably that is why he is asking and not already reading the answer."}], "answers": [{"comments": [{"owner": {"reputation": 1639, "user_id": 2485825, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/aa74d22ac430874ead67c4e170806910?s=128&d=identicon&r=PG", "display_name": "georgiana_e", "link": "https://stackoverflow.com/users/2485825/georgiana-e"}, "edited": false, "score": 0, "creation_date": 1485962608, "post_id": 41983349, "comment_id": 71144455, "body": "Solved by moving Observer definition before Subject definition, and in Observer I used a pointer to Subject."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 1639, "user_id": 2485825, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/aa74d22ac430874ead67c4e170806910?s=128&d=identicon&r=PG", "display_name": "georgiana_e", "link": "https://stackoverflow.com/users/2485825/georgiana-e"}, "edited": false, "score": 1, "creation_date": 1485963584, "post_id": 41983349, "comment_id": 71145192, "body": "@georgiana_e : you should really consider splitting your code in different files - you&#39;ll make your life a lot easier."}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": true, "score": 3, "last_activity_date": 1485963307, "last_edit_date": 1485963307, "creation_date": 1485962506, "answer_id": 41983349, "question_id": 41983170, "link": "https://stackoverflow.com/questions/41983170/forward-declaration-incomplete-type-recursive/41983349#41983349", "title": "Forward declaration incomplete type, recursive", "body": "<p>Move the implementation of <code>Subject::notifyAll</code> into a .cpp file (in fact, do so for all member function implementations) - say the subject.cpp file. Then keep the forward declaration for <code>Observer</code> in the header file that contains the <code>Subject</code> class definition, and <code>#include \"observer.hpp\"</code> in the subject.cpp.</p>\n\n<p>The forward declaration is sufficient in the header file since the class definition only ever refers to <code>Observer*</code>. On the other hand, the .cpp file needs to see the full <code>Observer</code> class definition, since it calls a member function on an <code>Observer</code> instance.</p>\n\n<p>So :</p>\n\n<pre><code>// subject.hpp\n#include &lt;vector&gt;\n\nclass Observer;\n\nclass Subject {\n  std::vector&lt;Observer*&gt; obs;\n  int state;\npublic:\n  Subject(): state(0) {}\n\n  void notifyAll();\n};\n</code></pre>\n\n<p>and :</p>\n\n<pre><code>// subject.cpp\n#include \"subject.hpp\"\n\n#include \"observer.hpp\"\n\n#include &lt;vector&gt;\n\nvoid Subject::notifyAll() {\n  for(std::vector&lt;Observer*&gt;::iterator it = obs.begin(); it != obs.end(); it++)\n  {\n    (*it)-&gt;update();\n  }\n}\n</code></pre>\n\n<p>Furthermore, your observer implementation can be improved quite a bit. Eg. :</p>\n\n<ul>\n<li>don't keep a <code>Subject</code> in the <code>Observer</code>. You will likely have multiple subjects for the same observer, but more importantly : the observer doesn't need to keep track of the subjects.</li>\n<li>don't link a <code>Subject</code> to an <code>Observer</code> in the <code>Observer</code> constructor. That would only allow you to have one subject per observer. Instead, attach an <code>Observer</code> to a <code>Subject</code> in the <code>Subject</code> constructor (or another member function).</li>\n<li>don't pass by value when you don't want to make a copy. Instead, pass by reference (eg. <code>const Subject&amp;</code>).</li>\n</ul>\n"}], "owner": {"reputation": 1639, "user_id": 2485825, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/aa74d22ac430874ead67c4e170806910?s=128&d=identicon&r=PG", "display_name": "georgiana_e", "link": "https://stackoverflow.com/users/2485825/georgiana-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "closed_date": 1485962510, "accepted_answer_id": 41983349, "answer_count": 1, "score": 0, "last_activity_date": 1485963307, "creation_date": 1485961963, "question_id": 41983170, "link": "https://stackoverflow.com/questions/41983170/forward-declaration-incomplete-type-recursive", "closed_reason": "Duplicate", "title": "Forward declaration incomplete type, recursive", "body": "<p>I have two classes Observer and Subject and ObserverA, ObserverB which are extending Observer (for implementing Observer DP).</p>\n\n<p>In Subject I have a vector of pointers to Observer class:</p>\n\n<pre><code>class Subject {\n    std::vector&lt;Observer*&gt; obs;\n    int state;\npublic:\n    Subject(): state(0) {}\n\n    void notifyAll() {\n      for(std::vector&lt;Observer*&gt;::iterator it = obs.begin(); it != obs.end(); it++)\n      {\n         (*it)-&gt;update();\n      }\n    }\n}\n\n...\n};\n</code></pre>\n\n<p>In Observer, I also have a Subject:</p>\n\n<pre><code>class Observer {\nprotected:\n   Subject subj;   \npublic:\n    virtual void update() {};\n};\n</code></pre>\n\n<p>ObserverA, ObserverB alike:</p>\n\n<pre><code>class ObserverA: public Observer {\npublic:    \n    ObserverA(Subject s) {\n        subj = s;\n        s.attach(this);\n    }\n\n    virtual void update() {\n        std::cout &lt;&lt; \"Update A, state subj: \" &lt;&lt; subj.getState() &lt;&lt; std::endl;    \n    }\n};\n</code></pre>\n\n<p>Before declaring class Subject, I added forward declaration for class Observer. However I am getting compiling errors:</p>\n\n<pre><code>Observer.h: In member function \u2018void Subject::notifyAll()\u2019:\nObserver.h:27:17: error: invalid use of incomplete type \u2018class Observer\u2019\n            (*it)-&gt;update();\n                 ^\nObserver.h:7:7: error: forward declaration of \u2018class Observer\u2019\n class Observer;\n   ^\n</code></pre>\n\n<p>I have a vector of pointers to Observer, in Subject class, I forward declared Obsever class and Observer class knows about Subect, why do I still have the error?</p>\n"}, {"tags": ["c++", "coding-style"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1485961948, "post_id": 41983134, "comment_id": 71143973, "body": "The highest-scoring (note: not accepted) answer in the first related link on the right gives an acceptable solution: <a href=\"http://stackoverflow.com/questions/59670/how-to-get-rid-of-deprecated-conversion-from-string-constant-to-char-warnin?rq=1\" title=\"how to get rid of deprecated conversion from string constant to char warnin\">stackoverflow.com/questions/59670/&hellip;</a> Is that legitimate enough for you?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1485961960, "post_id": 41983134, "comment_id": 71143982, "body": "Use <code>std::string</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485962045, "post_id": 41983134, "comment_id": 71144034, "body": "@NathanOliver, disagree. No need for <code>std::string</code> here, would be an extra conversion for nothing."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1485962159, "post_id": 41983134, "comment_id": 71144117, "body": "It&#39;s naughty to use contiguous data to store a password as it&#39;s not secure. So <code>char*</code> and <code>std::string</code> are both inappropriate."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1485962237, "post_id": 41983134, "comment_id": 71144178, "body": "@Bathsheba I hope you&#39;re not judging the question on that basis."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1485962274, "post_id": 41983134, "comment_id": 71144200, "body": "@MarkRansom Absolutely not. It&#39;s a good question. Well written, with a good code snippet. Have an upvote! (I wouldn&#39;t dare answer it though ;-) )"}, {"owner": {"reputation": 717, "user_id": 2255003, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/T4N9G.jpg?s=128&g=1", "display_name": "Isura Nirmal", "link": "https://stackoverflow.com/users/2255003/isura-nirmal"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1485962520, "post_id": 41983134, "comment_id": 71144392, "body": "Thank you for pointing the previous question on this but I am specifically asking for a way to address this problem other than using compiler warnings off and casting which is highly discussed in that answer. Thanks for @Bathsheba and Mark   !"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1485962582, "post_id": 41983134, "comment_id": 71144440, "body": "Seriously, if this is a production system, then my advice to you would be to set some time aside and develop a solution on the lines of <a href=\"http://stackoverflow.com/questions/3785582/how-to-write-a-password-safe-class\" title=\"how to write a password safe class\">stackoverflow.com/questions/3785582/&hellip;</a> In other words, throw the baby out with the bathwater and start afresh."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1485962007, "creation_date": 1485962007, "answer_id": 41983185, "question_id": 41983134, "link": "https://stackoverflow.com/questions/41983134/best-way-to-eliminate-deprecated-conversion-from-string-constant-to-char/41983185#41983185", "title": "Best way to eliminate deprecated conversion from string constant to \u2018char*\u2019&quot;", "body": "<p>Just do </p>\n\n<pre><code>void Login(const char* username, const char* password)\n</code></pre>\n\n<p>While you are on it, replace <code>define</code> with <code>constexpr</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 717, "user_id": 2255003, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/T4N9G.jpg?s=128&g=1", "display_name": "Isura Nirmal", "link": "https://stackoverflow.com/users/2255003/isura-nirmal"}, "edited": false, "score": 0, "creation_date": 1485963621, "post_id": 41983194, "comment_id": 71145214, "body": "Thank You. This did the trick. The login function is not actually what it seems for the context I am using it."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 3, "last_activity_date": 1485962818, "last_edit_date": 1485962818, "creation_date": 1485962028, "answer_id": 41983194, "question_id": 41983134, "link": "https://stackoverflow.com/questions/41983134/best-way-to-eliminate-deprecated-conversion-from-string-constant-to-char/41983194#41983194", "title": "Best way to eliminate deprecated conversion from string constant to \u2018char*\u2019&quot;", "body": "<blockquote>\n  <p>But I really like to know what is the best practice to solve this issue.</p>\n</blockquote>\n\n<p>The best practice is to use pointers/references to const when no modification is made to the pointed object/array. You should make the following change to the parameters:</p>\n\n<pre><code>void Login(const char* username, const char* password)\n</code></pre>\n\n<p>Conversion from string literal to <code>const char*</code> is well-formed and not deprecated.</p>\n\n<hr>\n\n<blockquote>\n  <p>the parameter datatypes cannot be changed from <code>char *</code> to <code>const char*</code></p>\n</blockquote>\n\n<p>Your requirement excludes the best practice shown above. Given this restriction, you should not pass a string literal to the function. The options left are workarounds. The workaround that I would suggest is to create a local copy of the literal, and pass that instead:</p>\n\n<pre><code>char user[] = USER;\nchar pass[] = PASSWORD;\nLogin(user,pass);\n</code></pre>\n\n<hr>\n\n<p>PS. Since C++11 the conversion from string literal to <code>char*</code> is not only deprecated, but ill-formed instead. A compiler conforming to the current standard may refuse to compile the program.</p>\n\n<p>PPS. As pointed out in the comments, storing a password within the executable as plain text (which is the way string literals are stored) is dubious from security perspective.</p>\n"}, {"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1485963081, "creation_date": 1485963081, "answer_id": 41983573, "question_id": 41983134, "link": "https://stackoverflow.com/questions/41983134/best-way-to-eliminate-deprecated-conversion-from-string-constant-to-char/41983573#41983573", "title": "Best way to eliminate deprecated conversion from string constant to \u2018char*\u2019&quot;", "body": "<p>Given that you can't change the function signature to something more appropriate, you're stuck. Bad code forces more bad code.</p>\n\n<p>In this case you need to copy the strings to something that isn't <code>const</code>.</p>\n\n<pre><code>int main()\n{\n  char user[] = USER;\n  char password[] = PASSWORD;\n  Login(user,password);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 717, "user_id": 2255003, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/T4N9G.jpg?s=128&g=1", "display_name": "Isura Nirmal", "link": "https://stackoverflow.com/users/2255003/isura-nirmal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 1, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 41983194, "answer_count": 3, "score": 0, "last_activity_date": 1485963081, "creation_date": 1485961861, "last_edit_date": 1485962264, "question_id": 41983134, "link": "https://stackoverflow.com/questions/41983134/best-way-to-eliminate-deprecated-conversion-from-string-constant-to-char", "title": "Best way to eliminate deprecated conversion from string constant to \u2018char*\u2019&quot;", "body": "<p>I have came across a situation as follows and I am getting following warning from the compiler.</p>\n\n<pre><code>    Main.cpp:14:22: warning: deprecated conversion from string constant to \u2018char*\u2019 [-Wwrite-strings]\n   Login(USER,PASSWORD);\n</code></pre>\n\n<p>Here are the codes\n<strong>Passwords.h</strong></p>\n\n<pre><code>#define USER \"user\"\n#define PASSWORD \"pass\"\n</code></pre>\n\n<p><strong>Main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Passwords.h\"\n\nusing namespace std;\n\nvoid Login(char* username,char* password)\n{\n  cout &lt;&lt; \"UserName is \" &lt;&lt; username &lt;&lt;endl;\n  cout &lt;&lt; \"Password is \" &lt;&lt; password &lt;&lt;endl;\n}\n\nint main()\n{\n  Login(USER,PASSWORD);\n  return 0;\n}\n</code></pre>\n\n<p>One thing I decided to do was to introduce a global variables in the Passwords.h file. But I really like to know what is the best practice to solve this issue.</p>\n\n<p>I hope no one will mark this as duplicate as same question is asked. I need to eliminate this warning in legitimate way and looking for a best practice as many answers for the same problem gave some hacks to turn off compiler warnings and some casting solutions.</p>\n\n<p><strong>Update</strong></p>\n\n<p>The Login function is actually a virtual function so the parameter datatypes cannot be changed from <code>char *</code> to <code>const char*</code>. I used the specific code segment for simplicity. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485961859, "post_id": 41983077, "comment_id": 71143900, "body": "Check out <a href=\"http://en.cppreference.com/w/cpp/header/type_traits\" rel=\"nofollow noreferrer\"><code>&lt;type_traits&gt;</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1485962352, "post_id": 41983128, "comment_id": 71144259, "body": "Note <code>std::is_fundamental</code> covers <code>void</code> and <code>std::nullptr_t</code> in addition to arithmetic types. On top of that, there are arrays, pointers &amp; member pointers, and references. It might be easier starting from <code>is_class</code> and <code>is_union</code> and checking whether those fail, plus removing cv-qualifiers and pointers and/or references, depending on what exactly the OP wants."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 0, "last_activity_date": 1485961853, "creation_date": 1485961853, "answer_id": 41983128, "question_id": 41983077, "link": "https://stackoverflow.com/questions/41983077/assessment-of-template-parameter/41983128#41983128", "title": "Assessment of Template Parameter", "body": "<p>You're looking for the <a href=\"http://en.cppreference.com/w/cpp/types/is_arithmetic\" rel=\"nofollow noreferrer\">std::is_arithmetic</a> template, which determines if the template parameter is an integer or a floating point type.</p>\n\n<p>By process of elimination, the only remaining options are: pointer or a reference, a class, and <code>void</code>. Maybe an enum of some kind, too. It's unclear from your question how you want to classify those, but, if necessary, adding some additional checks on top of <code>std::is_arithmetic</code> should make it possible to disambiguate the given type further.</p>\n"}], "owner": {"reputation": 21, "user_id": 5981816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5349db3f401bde5031afd290add7c8?s=128&d=identicon&r=PG&f=1", "display_name": "goktug96", "link": "https://stackoverflow.com/users/5981816/goktug96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1485992698, "answer_count": 1, "score": 0, "last_activity_date": 1485961853, "creation_date": 1485961720, "question_id": 41983077, "link": "https://stackoverflow.com/questions/41983077/assessment-of-template-parameter", "closed_reason": "Duplicate", "title": "Assessment of Template Parameter", "body": "<p>Is there a ready function which can take a template parameter as an argument and determine that it is a user defined types(class or struct) or built-in data types(int, float, char...) ?</p>\n"}, {"tags": ["c++", "c", "boost", "c-preprocessor", "boost-preprocessor"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1485960999, "post_id": 41982791, "comment_id": 71143290, "body": "Why not a single sequence of tuples? E.g. <code>((int, AddInt), (double, AddDouble))</code>..."}, {"owner": {"reputation": 1893, "user_id": 6153683, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/433c8247303c42b6fe5cef5821f79a5a?s=128&d=identicon&r=PG", "display_name": "skgbanga", "link": "https://stackoverflow.com/users/6153683/skgbanga"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1485961274, "post_id": 41982791, "comment_id": 71143483, "body": "I actually have 3-4 sequences and I have read this question: <a href=\"http://stackoverflow.com/questions/26475453/how-to-use-boostpreprocessor-to-unzip-a-sequence\" title=\"how to use boostpreprocessor to unzip a sequence\">stackoverflow.com/questions/26475453/&hellip;</a>  I guess this potentially can be done, but was wondering if there is a way for iterating over multiple sequences because those macros sequences are already defined."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1485961417, "post_id": 41982791, "comment_id": 71143589, "body": "A quick search shows me there&#39;s a library out there with a zip macro: <a href=\"https://github.com/mcinglis/libpp/blob/master/zip.h\" rel=\"nofollow noreferrer\">github.com/mcinglis/libpp/blob/master/zip.h</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "is_accepted": true, "score": 5, "last_activity_date": 1485975197, "last_edit_date": 1495542258, "creation_date": 1485964903, "answer_id": 41984254, "question_id": 41982791, "link": "https://stackoverflow.com/questions/41982791/how-to-iterate-over-two-boost-preprocessor-sequences-at-the-same-time/41984254#41984254", "title": "How to iterate over two Boost Preprocessor sequences at the same time?", "body": "<p>You could use <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/preprocessor/doc/ref/seq_for_each_i.html\" rel=\"nofollow noreferrer\"><code>BOOST_PP_SEQ_FOR_EACH_I</code></a> and <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/preprocessor/doc/ref/seq_elem.html\" rel=\"nofollow noreferrer\"><code>BOOST_PP_SEQ_ELEM</code></a> to do it as follows:</p>\n\n<pre><code>#include &lt;boost/preprocessor/seq/elem.hpp&gt;\n#include &lt;boost/preprocessor/seq/for_each_i.hpp&gt;\n\n#define types (int)(double)\n#define funcs (AddInt)(AddDouble)\n\n#define MACRO(_,funcs,i,type) \\\n    void add(type val) { obj.BOOST_PP_SEQ_ELEM(i, funcs)(val); }\n\nBOOST_PP_SEQ_FOR_EACH_I(MACRO, funcs, types)\n</code></pre>\n\n<p>The <code>BOOST_PP_SEQ_FOR_EACH_I</code> macro iterates over the sequence <code>types</code>, applying <code>MACRO</code> to each element. The second argument to <code>BOOST_PP_SEQ_FOR_EACH_I</code> is passed as the second argument to each invocation of <code>MACRO</code>, and <code>i</code> denotes the zero-based index of the current element being iterated over. Therefore, when <code>MACRO</code> is being expanded, <code>type</code> is the <code>i</code>-th element of <code>types</code> and <code>BOOST_PP_SEQ_ELEM(i, funcs)</code> is the <code>i</code>-th element of <code>funcs</code>.</p>\n\n<p>For a more general solution, you can do something like:</p>\n\n<pre><code>#define ITERATE_OVER_TWO_SEQ_(_,data,i,e2) \\\n   BOOST_PP_SEQ_ELEM(0,data)(BOOST_PP_SEQ_ELEM(i, BOOST_PP_SEQ_ELEM(1,data)), e2)\n#define ITERATE_OVER_TWO_SEQ(macro, s1, s2) \\\n    BOOST_PP_SEQ_FOR_EACH_I(ITERATE_OVER_TWO_SEQ_, (macro)(s1), s2)\n</code></pre>\n\n<p>and use it as follows:</p>\n\n<pre><code>#define MACRO(type,func) void add(type val) { obj.func(val); }\nITERATE_OVER_TWO_SEQ(MACRO, types, funcs)\n</code></pre>\n\n<p>An even more generic way would be to use <code>SEQ_ZIP</code> from <a href=\"https://stackoverflow.com/a/41987223/3919155\">this answer</a>, <code>BOOST_PP_SEQ_FOR_EACH</code> and <code>BOOST_PP_SEQ_ELEM</code>. For example:</p>\n\n<pre><code>#include &lt;boost/preprocessor/seq/for_each.hpp&gt;\n#define MACRO(_,d,seq) \\\n    void add(BOOST_PP_SEQ_ELEM(0,seq) val) \\\n    { obj.BOOST_PP_SEQ_ELEM(1, seq)(val); }\n\nBOOST_PP_SEQ_FOR_EACH(MACRO, _, SEQ_ZIP((types)(funcs))\n</code></pre>\n"}], "owner": {"reputation": 1893, "user_id": 6153683, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/433c8247303c42b6fe5cef5821f79a5a?s=128&d=identicon&r=PG", "display_name": "skgbanga", "link": "https://stackoverflow.com/users/6153683/skgbanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 1, "accepted_answer_id": 41984254, "answer_count": 1, "score": 5, "last_activity_date": 1485975197, "creation_date": 1485960915, "last_edit_date": 1485965726, "question_id": 41982791, "link": "https://stackoverflow.com/questions/41982791/how-to-iterate-over-two-boost-preprocessor-sequences-at-the-same-time", "title": "How to iterate over two Boost Preprocessor sequences at the same time?", "body": "<p>I was wondering if the following can be done via Boost Preprocessor sequences. (Most of the SO questions as well as Boost Preprocessor examples talk about only 1 sequence)</p>\n\n<pre><code>#define seq1 (a)(b)(c)\n#define seq2 (1)(2)(3)\n\n// Now iterate over both of them at the same time\n</code></pre>\n\n<p>Here is my motivation. I have to define few functions for a lot of types e.g.</p>\n\n<pre><code>void add(int val) { obj.AddInt(val); }\nvoid add(double val) { obj.AddDouble(val); }\n</code></pre>\n\n<p>I was thinking of defining two sequences like</p>\n\n<pre><code>#define types (int)(double)...\n#define funcs (AddInt)(AddDouble)...\n</code></pre>\n\n<p>and then write a macro for the function add, and iterate over the two sequences.</p>\n"}, {"tags": ["c++", "c++11", "atomic"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1485960710, "post_id": 41982623, "comment_id": 71143068, "body": "Could it be because the same function exists in <code>C</code> <a href=\"http://en.cppreference.com/w/c/atomic/atomic_thread_fence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/atomic/atomic_thread_fence</a> and this is just the imported (into the std namespace) version?"}], "answers": [{"tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 0, "last_activity_date": 1485965416, "last_edit_date": 1485965416, "creation_date": 1485964278, "answer_id": 41984041, "question_id": 41982623, "link": "https://stackoverflow.com/questions/41982623/why-does-stdatomic-thread-fence-have-c-linkage/41984041#41984041", "title": "Why does std::atomic_thread_fence have &quot;C&quot; linkage?", "body": "<p><code>atomic_thread_fence</code> establishes memory synchronization ordering of non-atomic and relaxed atomic accesses.<br>\nConcurrency, especially relaxed-memory concurrency, is a notoriously\nsubtle and error-prone domain, and so verifying such optimisations\nis of great interest. <a href=\"https://www.cl.cam.ac.uk/~pes20/CompCertTSO/doc/fenceelim.pdf\" rel=\"nofollow noreferrer\">Ref1</a>.<br>\nFor such thing is widely used <a href=\"http://www.cl.cam.ac.uk/~pes20/CompCertTSO/doc/\" rel=\"nofollow noreferrer\">CompCertTSO</a>.<br>\nCompCertTSO is a compiler that generates x86 assembly code from ClightTSO, a large subset of the C programming language enhanced with concurrency primitives for thread management and synchronisation, and with a TSO relaxed memory model based on the x86-TSO model.</p>\n\n<p>So, for verification, optimisation and testing purposes is desirable for this function to have \"C\" linkage.</p>\n"}, {"comments": [{"owner": {"reputation": 530, "user_id": 2793551, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a73981082fd79398252211805c9146e6?s=128&d=identicon&r=PG&f=1", "display_name": "WaltK", "link": "https://stackoverflow.com/users/2793551/waltk"}, "edited": false, "score": 0, "creation_date": 1486042701, "post_id": 41990025, "comment_id": 71183389, "body": "I don&#39;t understand how the C and C++ prototypes are compatible, given that the C++ prototype is in the std namespace."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "reply_to_user": {"reputation": 530, "user_id": 2793551, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a73981082fd79398252211805c9146e6?s=128&d=identicon&r=PG&f=1", "display_name": "WaltK", "link": "https://stackoverflow.com/users/2793551/waltk"}, "edited": false, "score": 0, "creation_date": 1486094303, "post_id": 41990025, "comment_id": 71207883, "body": "@WaltK I would guess it allows the C++ implementation of <code>&lt;atomic&gt;</code> to include <code>&lt;stdatomic.h&gt;</code> and then say <code>namespace std { using ::atomic_thread_fence; }</code> or something equivalent. Of course it doesn&#39;t help <code>atomic_flag_test_and_set</code> which still has C++ linkage in C++ - perhaps that NB comment wasn&#39;t  thought out that well."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 530, "user_id": 2793551, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a73981082fd79398252211805c9146e6?s=128&d=identicon&r=PG&f=1", "display_name": "WaltK", "link": "https://stackoverflow.com/users/2793551/waltk"}, "edited": false, "score": 3, "creation_date": 1486111453, "post_id": 41990025, "comment_id": 71214320, "body": "@WaltK exactly like <code>sin</code> or <code>printf</code>."}], "tags": [], "owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "is_accepted": false, "score": 5, "last_activity_date": 1485984285, "creation_date": 1485984285, "answer_id": 41990025, "question_id": 41982623, "link": "https://stackoverflow.com/questions/41982623/why-does-stdatomic-thread-fence-have-c-linkage/41990025#41990025", "title": "Why does std::atomic_thread_fence have &quot;C&quot; linkage?", "body": "<p>That was added by <a href=\"http://cplusplus.github.io/LWG/lwg-defects.html#1479\" rel=\"noreferrer\">LWG issue 1479</a> which was addressing a last-minute comment on C++11. </p>\n\n<p>The rationale for this change was C language compatibility (C11 thread library has identically-named function <a href=\"http://en.cppreference.com/w/c/atomic/atomic_thread_fence\" rel=\"noreferrer\">atomic_thread_fence</a> in stdatomic.h).</p>\n\n<p>As far as I understand, it was always a plan that C and C++ atomic libraries can coexist: other examples of compatiblity are the C-compatible type aliases for std::atomic, such as <code>atomic_int</code> and the C-compatibility macro <a href=\"http://en.cppreference.com/w/cpp/atomic/ATOMIC_VAR_INIT\" rel=\"noreferrer\">ATOMIC_VAR_INIT</a></p>\n"}], "owner": {"reputation": 530, "user_id": 2793551, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a73981082fd79398252211805c9146e6?s=128&d=identicon&r=PG&f=1", "display_name": "WaltK", "link": "https://stackoverflow.com/users/2793551/waltk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1485984285, "creation_date": 1485960479, "question_id": 41982623, "link": "https://stackoverflow.com/questions/41982623/why-does-stdatomic-thread-fence-have-c-linkage", "title": "Why does std::atomic_thread_fence have &quot;C&quot; linkage?", "body": "<p>I have no guess as to why it would be desirable for this function to have \"C\" rather than \"C++\" linkage.</p>\n"}, {"tags": ["c++", "winapi", "ssl-certificate", "x509certificate"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1485961320, "post_id": 41982617, "comment_id": 71143522, "body": "<code>but I see only their &quot;Version 1 fields&quot; and not the &quot;Extensions&quot;</code> - you say that <code>CERT_INFO .cExtension == 0</code> ?"}, {"owner": {"reputation": 3, "user_id": 7256423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d9639fc3804ed1213f1f0764918913?s=128&d=identicon&r=PG&f=1", "display_name": "teoSpeo", "link": "https://stackoverflow.com/users/7256423/teospeo"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1485961943, "post_id": 41982617, "comment_id": 71143968, "body": "I mean I cannot see the Template name in the debugger. The CERT_INFO.cExtension == 9, which is correct for my case. But I don&#39;t know how to get the template name from the retrieved certificate, in order to compare it to my search string. In the debugger I cannot see the template name strings..."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1485962417, "post_id": 41982617, "comment_id": 71144311, "body": "you need enumerate <code>CERT_EXTENSION</code> array and search for <code>pszObjId</code> which you need. then call <code>CryptDecodeObject(X509_ASN_ENCODING, rgExtension-&gt;pszObjId, rgExtension-&gt;Value.pbData, rgExtension-&gt;Value.cbData,..</code> for get decoded data and compare"}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1486042458, "post_id": 42003030, "comment_id": 71183243, "body": "every time get <code>pCertContext-&gt;pCertInfo-&gt;cExtension</code> in loop. <code>pCertContext-&gt;pCertInfo-&gt;rgExtension[i]</code> - very not effective code. need <code>if (DWORD cExtension = pCertContext-&gt;pCertInfo-&gt;cExtension) { PCERT_EXTENSION rgExtension = pCertContext-&gt;pCertInfo-&gt;rgExtension; do {.. } while (rgExtension++, --cExtension); }</code>"}, {"owner": {"reputation": 3, "user_id": 7256423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d9639fc3804ed1213f1f0764918913?s=128&d=identicon&r=PG&f=1", "display_name": "teoSpeo", "link": "https://stackoverflow.com/users/7256423/teospeo"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1486111248, "post_id": 42003030, "comment_id": 71214238, "body": "@RbMm: It looks nicer, and I trust you that it is more effective. But, can you explain me why its more effective?"}, {"owner": {"reputation": 3, "user_id": 7256423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d9639fc3804ed1213f1f0764918913?s=128&d=identicon&r=PG&f=1", "display_name": "teoSpeo", "link": "https://stackoverflow.com/users/7256423/teospeo"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1486111355, "post_id": 42003030, "comment_id": 71214278, "body": "What&#39;s the best way to cast the BYTE* to _CERT_TEMPLATE_EXT* and check it? I was thinking of a dynamic_cast, but I see that it works only if the classes are related."}], "tags": [], "owner": {"reputation": 3, "user_id": 7256423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d9639fc3804ed1213f1f0764918913?s=128&d=identicon&r=PG&f=1", "display_name": "teoSpeo", "link": "https://stackoverflow.com/users/7256423/teospeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1486041348, "last_edit_date": 1486041348, "creation_date": 1486040744, "answer_id": 42003030, "question_id": 41982617, "link": "https://stackoverflow.com/questions/41982617/need-help-to-retrieve-a-windows-certificate-by-template/42003030#42003030", "title": "Need help to retrieve a Windows Certificate by Template?", "body": "<p>I would like to post my code, hope it helps someone.</p>\n\n<pre><code>void GetCertificateByTemplate(char *certificateTemplate)\n{\n    HCERTSTORE          hCertStore;\n    PCCERT_CONTEXT      pCertContext = NULL;\n    BYTE               *pbDecoded;\n    DWORD               cbDecoded;\n    _CERT_TEMPLATE_EXT *pbDecodedTemplate = NULL;\n\n    // 1). Open Local Machine certificate store\n    if (hCertStore = CertOpenStore(\n        CERT_STORE_PROV_SYSTEM,\n        0,\n        NULL,\n        CERT_SYSTEM_STORE_LOCAL_MACHINE,\n        L\"My\"))\n    {\n        fprintf(stderr, \"The store has been opened. \\n\");\n    }\n\n    // 2). Enumerate certificates\n    while (pCertContext = CertEnumCertificatesInStore(\n        hCertStore,\n        pCertContext))\n    {\n        // 3). Check certificate extended data\n        for (int i = 0; i &lt; pCertContext-&gt;pCertInfo-&gt;cExtension; i++)\n        {\n            // 4). Decode certificate extended data\n            if (CryptDecodeObject(\n                X509_ASN_ENCODING,\n                pCertContext-&gt;pCertInfo-&gt;rgExtension[i].pszObjId,\n                pCertContext-&gt;pCertInfo-&gt;rgExtension[i].Value.pbData,\n                pCertContext-&gt;pCertInfo-&gt;rgExtension[i].Value.cbData,\n                0,\n                NULL,\n                &amp;cbDecoded))\n            {\n                ; // error !!!\n            }\n            if (!(pbDecoded = (BYTE*)malloc(cbDecoded)))\n            {\n                ; // error !!!\n            }\n            if (CryptDecodeObject(\n                X509_ASN_ENCODING,\n                pCertContext-&gt;pCertInfo-&gt;rgExtension[i].pszObjId,\n                pCertContext-&gt;pCertInfo-&gt;rgExtension[i].Value.pbData,\n                pCertContext-&gt;pCertInfo-&gt;rgExtension[i].Value.cbData,\n                0,\n                pbDecoded,\n                &amp;cbDecoded))\n            {\n                pbDecodedTemplate = (_CERT_TEMPLATE_EXT*)pbDecoded;\n\n                char* objectId = pbDecodedTemplate-&gt;pszObjId;\n\n                // todo: check pDecodeTemplate-&gt;pszObjId\n\n                // 5). Compare the template string with the search one\n                if (strcmp(pbDecodedTemplate-&gt;pszObjId, certificateTemplate) == 0)\n                {\n                    // todo: return certificate\n                    printf(\"\\nCertificate template found: %s \\n\", pbDecodedTemplate-&gt;pszObjId);   \n                    break;\n                }\n            }\n        }\n    }\n\n    // 6). Free certificate, close store\n    if (pCertContext)\n    {\n        CertFreeCertificateContext(pCertContext);\n    }\n    CertCloseStore(hCertStore, 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7256423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d9639fc3804ed1213f1f0764918913?s=128&d=identicon&r=PG&f=1", "display_name": "teoSpeo", "link": "https://stackoverflow.com/users/7256423/teospeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1486111613, "creation_date": 1485960469, "last_edit_date": 1486111613, "question_id": 41982617, "link": "https://stackoverflow.com/questions/41982617/need-help-to-retrieve-a-windows-certificate-by-template", "title": "Need help to retrieve a Windows Certificate by Template?", "body": "<p>I need to retrieve a Windows Certificate by Template Name (The Template is in the Extension Fields) using Windows API, C++.</p>\n\n<p>My steps:</p>\n\n<ol>\n<li><p>Open store: CertOpenStore(..) (Done; I can enumerate the certificates using CertEnumCertificatesInStore(..), but I see only their \"Version 1 fields\" and not the \"Extensions\". The Template is in the Extensions, so I cannot find it.)</p></li>\n<li><p><strong>I tried to find it using the CertFindCertificateInStore(), but did not succeed. Can anyone help me with the correct find type and parameters or use another function?</strong></p></li>\n<li><p>CertFreeCertificateContext(..), CertCloseStore(..) (Done).</p></li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 4, "creation_date": 1485960850, "post_id": 41982545, "comment_id": 71143159, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3025997/defining-static-const-integer-members-in-class-definition\">Defining static const integer members in class definition</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1485960884, "post_id": 41982545, "comment_id": 71143193, "body": "Do note that with optimizations turned on gcc also does not give an error on <code>const int* p1 = &amp;AE::c6;</code> as it just optimizes it away"}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 0, "creation_date": 1485960972, "post_id": 41982545, "comment_id": 71143264, "body": "Windows c++ compiler is not good because it always try to help you nicely, meaning that it will do more implicitly. <code>c6</code> is a declaration, not a definition."}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "edited": false, "score": 0, "creation_date": 1485961259, "post_id": 41982545, "comment_id": 71143475, "body": "Well, the answer is simple: msvc does it for you... And that&#39;s why I don&#39;t like msvc."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1485962245, "post_id": 41982545, "comment_id": 71144186, "body": "@Petrof: First, you must understand that this is never a compiler error.  It&#39;s a linker error if the result of compilation still uses the variable&#39;s address, but you have to actually use it, not just syntactically, or your odr-use may be removed by dead-code elimination."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1485962439, "post_id": 41982545, "comment_id": 71144329, "body": "This is not just an MSVS issue.  See: <a href=\"http://coliru.stacked-crooked.com/a/03e908b91d12d0b5\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/03e908b91d12d0b5</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485962554, "post_id": 41982545, "comment_id": 71144421, "body": "@Petrof: Printing the value of a constant isn&#39;t odr-use either.  Update your question with the code you are thinking proves your point, we can&#39;t explain the behavior of things we can&#39;t see."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1485963382, "post_id": 41982545, "comment_id": 71145058, "body": "const integers are special snowflakes in C++."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485964489, "post_id": 41982545, "comment_id": 71145929, "body": "@Petrof: We&#39;ve already explained why this code is not a good test, namely, it&#39;s all dead code, and the odr-use doesn&#39;t survive dead-code elimination.  If you&#39;re unwilling to provide better code, you won&#39;t learn."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485968639, "post_id": 41982545, "comment_id": 71148672, "body": "@BenVoigt: I&#39;ve provided some code in my answer showing that it is not the result of dead code elimination."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485974107, "post_id": 41982545, "comment_id": 71151881, "body": "@Petrof: It is not an issue with the compiler.  The standard specifically says &quot;no diagnostic required&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485964601, "post_id": 41983084, "comment_id": 71146021, "body": "And his expression is never evaluated, because there are no calls to <code>f()</code>.  Good catch."}], "tags": [], "owner": {"reputation": 30, "user_id": 7490249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f905fbe4c841c8f1ac4c9c099dafa3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Steranoid", "link": "https://stackoverflow.com/users/7490249/steranoid"}, "is_accepted": false, "score": 0, "last_activity_date": 1485961740, "creation_date": 1485961740, "answer_id": 41983084, "question_id": 41982545, "link": "https://stackoverflow.com/questions/41982545/c-static-const-members-definition/41983084#41983084", "title": "C++ static const members definition", "body": "<blockquote>\n  <p>The C++ standard says ([basic.def.odr] 3.2 paragraph 2) \"A variable\n  whose name appears as a potentially-evaluated expression is odr-used\n  unless it is an object that satisfies the requirements for appearing\n  in a constant expression (5.19) and the lvalue-to-rvalue conversion\n  (4.1) is immediately applied.\"</p>\n</blockquote>\n\n<p><a href=\"https://gcc.gnu.org/wiki/VerboseDiagnostics#missing_static_const_definition\" rel=\"nofollow noreferrer\">Read this for further information</a></p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485963776, "post_id": 41983799, "comment_id": 71145332, "body": "Quick cat or slow compilers? ;)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485964336, "post_id": 41983799, "comment_id": 71145809, "body": "It&#39;s not really a compiler extension in MSVC, just that the compiler doesn&#39;t pass enough information forward to the linker to diagnose the error.  Which is you point out, is entirely compliant behavior."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485964974, "post_id": 41983799, "comment_id": 71146321, "body": "@BenVoigt: When I remember how linkers used to be in the old days, they take a bunch of translation units containing <i>defined</i> symbols, <i>required</i> symbols and <i>mergeable</i> ones. If MSVC can link that without error, I assume that it made the symbol mergeable, which is more or less the same as a definition."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485965037, "post_id": 41983799, "comment_id": 71146369, "body": "@SergeBallesta: There&#39;s another category: no usage whatsoever.  Given that the code in the question is dead code, this option seems the most likely."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485965484, "post_id": 41983799, "comment_id": 71146672, "body": "@Petrof: Having these statements in <code>main()</code> would force the code to be used: <code>const int* p1 = &amp;AE::c6; std::cout &lt;&lt; p1 &lt;&lt; &quot;\\n&quot;;</code>"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485966115, "post_id": 41983799, "comment_id": 71147087, "body": "@BenVoigt: I&#39;ve tested with an old MSVC2008 express, and the compiler did generate a definition, with an address immediately preceding the one for <code>AE::c7</code>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485974150, "post_id": 41983799, "comment_id": 71151901, "body": "Please note that in my testing, the compiler resolved <code>*p1</code> to a constant <code>7</code> and didn&#39;t actually perform a memory access.  That is, if you don&#39;t print <code>p1</code>, <code>clang</code> and <code>g++</code> will (with certain optimization settings) no longer have an undefined reference error, even when you do print <code>*p1</code>."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485989161, "post_id": 41983799, "comment_id": 71159629, "body": "@BenVoigt: that&#39;s the reason why I print both <code>p1</code> <b>and</b> <code>*p1</code> :-)"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 4, "last_activity_date": 1485968487, "last_edit_date": 1485968487, "creation_date": 1485963665, "answer_id": 41983799, "question_id": 41982545, "link": "https://stackoverflow.com/questions/41982545/c-static-const-members-definition/41983799#41983799", "title": "C++ static const members definition", "body": "<p>The program explicitely violates the one definition rule as you have stated in your question. But the standard does not require a diagnostic in this case. This is explicit in 3.2 One definition rule [basic.def.odr] \u00a74 (emphasis mine)</p>\n\n<blockquote>\n  <p>Every program shall contain exactly one definition of every non-inline fonction or variable that is odr-used\n  in that program; <strong>no diagnostic required</strong>.</p>\n</blockquote>\n\n<p>and 1.4 Implementation compliance [intro.compliance] \u00a72.3 says:</p>\n\n<blockquote>\n  <p>If a program contains a violation of a rule for which no diagnostic is required, this International\n  Standard places no requirement on implementations with respect to that program.</p>\n</blockquote>\n\n<p>That means that gcc is right to choke on that program because one rule has been violated. But it is not a bug when MSVC accepts it as a <em>compiler extension</em>(*) without even a warning because the standard <em>places no requirement</em> here.</p>\n\n<p>We are in the compile time undefined behaviour named <em>ill-formed program, no diagnostic required</em>. A compiler implementation is free to do what it wants:</p>\n\n<ul>\n<li>reject the program</li>\n<li>automatically fix the error and generate the code as if the definition was present (for current case)</li>\n<li>remove the offending line[s] if it makes sense and makes the program compilable - even if what is generated is not what the programmer expected</li>\n<li>compile it into a program that ends in a run-time error</li>\n<li>[add whatever you think of, but I have never seen a compiler able to hit my cat...]</li>\n</ul>\n\n<hr>\n\n<p>(*) more exactly, it is a compiler extension if it is <em>documented</em>. Unfortunately, I currently have no MSVC compiler full documentation, so I can not say whether it is documented and is a conformant extension, or is not and is just hmm... one possible execution of the program</p>\n\n<p>Here is a slight variation on OP's code demonstrating that the compiler did provide a definition:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass AE {\n    // ...\npublic:\n    static const int c6 = 7;\n    static const int c7 = 31;\n};\nconst int AE::c7;   // definition\n\nint main()\n{\n    const int* p1 = &amp;AE::c6;    // error: c6 not an lvalue\n    const int* p2 = &amp;AE::c7;    // ok\n    // ...\n    std::cout &lt;&lt; *p1 &lt;&lt; \"(\" &lt;&lt; p1 &lt;&lt; \") - \" &lt;&lt; *p2 &lt;&lt; \"(\" &lt;&lt; p2 &lt;&lt; \")\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>The output is (with an old MSVC 2008, debug mode to avoid as much optimization as possible):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>7(00DF7800) - 31(00DF7804)\n</code></pre>\n\n<p>that is expected values and consecutive addresses</p>\n\n<p>With same code, Clang 3.4 complains (as expected) at link time with     </p>\n\n<pre><code>undefined reference to `AE::c6'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1485966304, "post_id": 41983879, "comment_id": 71147223, "body": "After OP&#39;s edit, it cannot be because the variable has been optimized out. It <b>has</b> a valid address. So MSVC has decided to automatically and silently generate one because of the <i>no diagnostic required</i>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1485967092, "post_id": 41983879, "comment_id": 71147724, "body": "@Serge: You can&#39;t really observe whether the address is valid until you attempt to dereference it, which the OP doesn&#39;t do. ;)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1485968218, "post_id": 41983879, "comment_id": 71148417, "body": "@Serge: Okay there you go :)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485974302, "post_id": 41983879, "comment_id": 71151995, "body": "@LightnessRacesinOrbit: And when you do dereference the pointer, the compiler performs constant propagation and still doesn&#39;t access the variable.  At least, <code>clang</code> was smart enough in my testing on rextester.com.  Maybe if you did <code>*reinterpret_cast&lt;volatile int*&gt;(reinterpret_cast&lt;uintptr_t&gt;(p1))</code>, that should defeat constant propagation."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1485963885, "creation_date": 1485963885, "answer_id": 41983879, "question_id": 41982545, "link": "https://stackoverflow.com/questions/41982545/c-static-const-members-definition/41983879#41983879", "title": "C++ static const members definition", "body": "<p>It <em>just so happens</em> that your compiler has applied some optimisations that mean it doesn't require you to follow the One Definition Rule in this case.</p>\n\n<p>However, the C++ standard still requires you to do so, so your program has undefined behaviour. The standard does not require a compiler to tell you when you violate this particular rule, so it's chosen not to. Indeed, it would have to put in extra effort to detect the problem.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4646361"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 41983799, "answer_count": 3, "score": 5, "last_activity_date": 1530034305, "creation_date": 1485960327, "last_edit_date": 1530034305, "question_id": 41982545, "link": "https://stackoverflow.com/questions/41982545/c-static-const-members-definition", "title": "C++ static const members definition", "body": "<p>I understand that <strong>static const members</strong> have to have out-ouf-class definition it they are odr-used. But the thing is, my program compiles and run just fine even without members definition.</p>\n\n<p>Let's take a look at this example from C++ FAQ:</p>\n\n<pre><code>class AE\n{\npublic:\n    static const int c6 = 7;\n    static const int c7 = 31;\n};\nconst int AE::c7;   // definition\n\nvoid f()\n{\n    const int* p1 = &amp;AE::c6;    // error: c6 not an lvalue\n    const int* p2 = &amp;AE::c7;    // ok\n\n    cout &lt;&lt; *p1 &lt;&lt; endl;\n}\n\nint main()\n{\n    f();\n\n    const int* p1 = &amp;AE::c6; \n    std::cout &lt;&lt; p1 &lt;&lt; \"\\n\";\n\n    return 0;\n}\n\n\n//RESULT:\n// 7\n// 00007FF735E7ACE8\n</code></pre>\n\n<p>I see no error whatsoever. I use Visual Studio 2015, and this code compiles and runs just fine.</p>\n\n<p><strong>My question:</strong> Is this specific to msvc or there are some language changes that I'm not aware of?</p>\n\n<p><strong>UPDATE:</strong> This is not a duplicate,  as I said at the very beginning: I do understand how this suppose to work, I don't understand why it doesn't work as it should.</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 1, "creation_date": 1485959738, "post_id": 41982304, "comment_id": 71142424, "body": "&#39;D = { 0 }&#39; - now your pointer is <code>NULL</code>."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1485959768, "post_id": 41982304, "comment_id": 71142454, "body": "Have you looked at your debugger output?"}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 1, "creation_date": 1485959832, "post_id": 41982304, "comment_id": 71142494, "body": "Semi-OT: I suggest you to use std::vector instead, you will avoid this and a lot more problems."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1485959843, "post_id": 41982304, "comment_id": 71142505, "body": "For future reference <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">this</a> should be of use"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1485961211, "post_id": 41982304, "comment_id": 71143444, "body": "One C++ surprise (inherited from C) is that your <code>D = { 0 };</code> is equivalent to <code>D = 0;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 5, "last_activity_date": 1485959737, "creation_date": 1485959737, "answer_id": 41982350, "question_id": 41982304, "link": "https://stackoverflow.com/questions/41982304/cant-access-memory-location-declared-in-array/41982350#41982350", "title": "Cant access memory location declared in array", "body": "<p>Because </p>\n\n<pre><code>D = {0};\n</code></pre>\n\n<p>sets the pointer <code>D</code> to the value <code>0</code>, i.e. <code>nullptr</code>. Trying then to de-reference </p>\n\n<pre><code>cout &lt;&lt; D[0];\n</code></pre>\n\n<p>a null pointer is UB (undefined behaviour).</p>\n\n<p>In case you wanted to set the <strong>first</strong> element of the array to zero, you need to do </p>\n\n<pre><code>D[0] = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2671, "user_id": 6306782, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MetvO.png?s=128&g=1", "display_name": "z32a7ul", "link": "https://stackoverflow.com/users/6306782/z32a7ul"}, "is_accepted": false, "score": 0, "last_activity_date": 1485959763, "creation_date": 1485959763, "answer_id": 41982354, "question_id": 41982304, "link": "https://stackoverflow.com/questions/41982304/cant-access-memory-location-declared-in-array/41982354#41982354", "title": "Cant access memory location declared in array", "body": "<p>You set D to zero, so D points to NULL, which is an invalid memory address. Maybe you wanted to write:</p>\n\n<pre><code>*D = { 0 };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 0, "last_activity_date": 1485963118, "last_edit_date": 1485963118, "creation_date": 1485962594, "answer_id": 41983385, "question_id": 41982304, "link": "https://stackoverflow.com/questions/41982304/cant-access-memory-location-declared-in-array/41983385#41983385", "title": "Cant access memory location declared in array", "body": "<p>Note that from C++11, braced-init-list could be used as the operand of the <a href=\"http://en.cppreference.com/w/cpp/language/operator_assignment#Builtin_direct_assignment\" rel=\"nofollow noreferrer\">assignment operator</a>.</p>\n\n<blockquote>\n  <p>For expressions <code>E1</code> of any scalar type <code>T</code>, the following additional\n  forms of the builtin assignment expression are allowed:</p>\n\n<pre><code>E1 = {}   (since C++11)\nE1 = {E2} (since C++11)\n</code></pre>\n  \n  <p>If the right operand is a braced-init-list</p>\n  \n  <p>if the expression <code>E1</code> has scalar type,</p>\n  \n  <ul>\n  <li>the expression <code>E1 = {}</code> is equivalent to <code>E1 = T{}</code>, where <code>T</code> is the type of <code>E1</code>.</li>\n  <li>the expression <code>E1 = {E2}</code> is equivalent to <code>E1 = T{E2}</code>, where <code>T</code> is the type of <code>E1</code>.</li>\n  </ul>\n</blockquote>\n\n<p>That means <code>D = { 0 };</code> is equivalent with <code>D = int* {0};</code>, which means assign the null pointer to <code>D</code>. Then any dereference on <code>D</code> would be undefined behavior.</p>\n\n<p>You can't assign the whole array via <code>D = {0};</code>. If your intent is to make all the elements' value to <code>0</code>, you can do that at its initialization. e.g.</p>\n\n<pre><code>int *D = new int[20000]{0}; // initialize all the elements to 0\nint *D = new int[20000]{};  // same as above\n</code></pre>\n"}], "owner": {"reputation": 1730, "user_id": 6916919, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bee0b5c5298aba8b8215fe1963d4308d?s=128&d=identicon&r=PG&f=1", "display_name": "Tanmay Bhatnagar", "link": "https://stackoverflow.com/users/6916919/tanmay-bhatnagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1485963118, "creation_date": 1485959616, "question_id": 41982304, "link": "https://stackoverflow.com/questions/41982304/cant-access-memory-location-declared-in-array", "title": "Cant access memory location declared in array", "body": "<p>This is my code ;</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int *D = new int[20000];\n    D = { 0 };\n    cout &lt;&lt; D[0];    \n}\n</code></pre>\n\n<p>At the <code>cout</code> statement I get an access violation error irrespective of the size of the array.\nWhy ?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1485960413, "post_id": 41982497, "comment_id": 71142864, "body": "I&#39;m not familiar with <code>Boost.Hana</code>, is there any runtime overhead for using this technique?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1485960538, "post_id": 41982497, "comment_id": 71142946, "body": "@Danra: no. I updated my answer with the generated assembly. <code>Boost.Hana</code> can be used for arbitrary <b>compile-time</b> computations :)"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1485960605, "post_id": 41982497, "comment_id": 71142989, "body": "Also is there a way to get the wandbox example to work with std=c++14?"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1485960728, "post_id": 41982497, "comment_id": 71143087, "body": "Well, that was obvious... :) Thanks!"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1486022448, "post_id": 41982497, "comment_id": 71170469, "body": "There are a couple of mechanisms that seem to almost do what I want without needing reflection: variadic templates (which would work if a POD struct could be automatically decomposed to its elements - I&#39;m not aware that it can be) and the upcoming structured bindings, which <i>do</i> support decomposing POD structs, but just not in a variadic way (so it would work if it were possible to write something like <code>auto [a, ...] = cs;</code>)"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 1, "last_activity_date": 1485960513, "last_edit_date": 1485960513, "creation_date": 1485960173, "answer_id": 41982497, "question_id": 41982301, "link": "https://stackoverflow.com/questions/41982301/dry-method-of-snapshotting-an-object-state/41982497#41982497", "title": "DRY method of snapshotting an object state", "body": "<p>You're looking for some sort of <em>static reflection</em>, which is not available <em>(yet)</em> in C++. Here's a solution that uses <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/hana/doc/html/group__group-Struct.html#gab9efb238a82207d91643994c5295cf8c\" rel=\"nofollow noreferrer\"><code>BOOST_HANA_DEFINE_STRUCT</code></a>:</p>\n\n<pre><code>template &lt;typename T&gt; \nstruct C {\n    BOOST_HANA_DEFINE_STRUCT(C,\n        (T, a),\n        (T, b),\n        (T, c)\n    );\n};\n\n\nstruct CSnapshot : public C&lt;float&gt; {};\nstruct CRealtime : public C&lt;const float*&gt; \n{\n    void snapshotInto(CSnapshot&amp; snapshot) \n    {\n        constexpr auto snapshot_accessors = boost::hana::accessors&lt;CSnapshot&gt;();\n        constexpr auto realtime_accessors = boost::hana::accessors&lt;CRealtime&gt;();\n        constexpr auto range = boost::hana::make_range(\n            boost::hana::int_c&lt;0&gt;, boost::hana::size(realtime_accessors));\n\n        boost::hana::for_each(range, [&amp;](auto i)\n        {\n            auto snapshot_getter = boost::hana::second(snapshot_accessors[i]);\n            auto realtime_getter = boost::hana::second(realtime_accessors[i]);\n            snapshot_getter(snapshot) = *(realtime_getter(*this));\n        });\n    }\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>int main()\n{\n    float a=1, b=2, c=3;\n\n    CSnapshot cs;\n    CRealtime cr{{&amp;a, &amp;b, &amp;c}};\n\n    cr.snapshotInto(cs);\n    assert(cs.a == a);\n    assert(cs.b == b);\n    assert(cs.c == c);\n}\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/1rodqZqFtXwo08MQ\" rel=\"nofollow noreferrer\"><strong>full wandbox example</strong></a></p>\n\n<hr>\n\n<p>The above example is compiled to the following assembly with <strong>g++ 7.0.0 20160825</strong> on Win x64, using <code>-Ofast -fno-exceptions -fno-rtti</code>:</p>\n\n<pre><code>main:\n    subq    $40, %rsp\n    call    __main\n    xorl    %eax, %eax\n    addq    $40, %rsp\n    ret\n</code></pre>\n"}], "owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 41982497, "answer_count": 1, "score": 2, "last_activity_date": 1485960513, "creation_date": 1485959607, "question_id": 41982301, "link": "https://stackoverflow.com/questions/41982301/dry-method-of-snapshotting-an-object-state", "title": "DRY method of snapshotting an object state", "body": "<p>Consider the following:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct C {\n    T a, b, c;   \n};\n\nstruct CSnapshot : public C&lt;float&gt; {};\nstruct CRealtime : public C&lt;const float*&gt; {\n    CRealtime() {\n        // Pointers are bound to some mutable data   \n    }\n\n    void snapshotInto(CSnapshot&amp; snapshot) {\n        snapshot.a = *a;\n        snapshot.b = *b;\n        snapshot.c = *c;\n    }\n};\n</code></pre>\n\n<p>Is there any good way to make the <code>snapshotInto</code> method above DRYer? So, for example, if <code>d</code> is added, there is no option of forgetting to snapshot its state in the <code>snapshotInto</code> method, or accidentally snapshotting the realtime <code>c</code> value into it.</p>\n\n<p>Motivation: This sort of code may be needed, for example, if you have an audio rendering thread which uses some parameters, which may change on a different thread due to user interaction. To make use of the parameters in your audio rendering thread, you need to be sure the parameter values don't change under your feet, so you make a snapshot of the realtime variables at the beginning of the render callback, each time it is called.</p>\n\n<p>P.S. I'm not stuck on the above implementation; for example, if there is a DRY way which works if you put the realtime pointer and the snapshotted value into a struct, for example, that's fine; <em>however</em>, there should still be a way to get an interface similar to that of the <code>CSnapshot</code> object, so given an object <code>snapshot</code> the user can just write <code>snapshot.a</code> to get the snapshotted float value, and doesn't have to write e.g. <code>snapshot.a.getVal()</code>.</p>\n\n<p>P.P.S. Performance is paramount, so having to access a map by key, for example, to get at either the snapshot value or the realtime pointer, won't do.</p>\n"}, {"tags": ["c++", "return", "return-value"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485959575, "post_id": 41982240, "comment_id": 71142322, "body": "Like you would when calling any other function returning a value, you create a variable and assign the result to it?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1485964283, "post_id": 41982240, "comment_id": 71145766, "body": "Sorry, what&#39;s the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 573, "user_id": 3853544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8fb5bb3d5d9f89483269b8ba233de92c?s=128&d=identicon&r=PG&f=1", "display_name": "user3853544", "link": "https://stackoverflow.com/users/3853544/user3853544"}, "is_accepted": false, "score": 3, "last_activity_date": 1485959504, "creation_date": 1485959504, "answer_id": 41982265, "question_id": 41982240, "link": "https://stackoverflow.com/questions/41982240/get-return-value-of-static-function-with-no-parameters-c/41982265#41982265", "title": "Get return value of (static) function with no parameters C++", "body": "<pre><code>content::mojom::CreateViewParamsPtr myViewPtr = content::mojom::CreateViewParams::New();\n//or shorter\nauto myViewPtr = content::mojom::CreateViewParams::New();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1485959513, "creation_date": 1485959513, "answer_id": 41982270, "question_id": 41982240, "link": "https://stackoverflow.com/questions/41982240/get-return-value-of-static-function-with-no-parameters-c/41982270#41982270", "title": "Get return value of (static) function with no parameters C++", "body": "<blockquote>\n  <p>How can I get the return value if the function is called in my Main function</p>\n</blockquote>\n\n<pre><code>auto rv = content::mojom::CreateViewParams::New();\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3202058, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/973628b48231eea608cd256a110b43d4?s=128&d=identicon&r=PG&f=1", "display_name": "user3202058", "link": "https://stackoverflow.com/users/3202058/user3202058"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1485959513, "creation_date": 1485959410, "question_id": 41982240, "link": "https://stackoverflow.com/questions/41982240/get-return-value-of-static-function-with-no-parameters-c", "title": "Get return value of (static) function with no parameters C++", "body": "<p>I have the following function:</p>\n\n<pre><code>content::mojom::CreateViewParamsPtr content::mojom::CreateViewParams::New() {\n  CreateViewParamsPtr rv;\n  mojo::internal::StructHelper&lt;CreateViewParams&gt;::Initialize(&amp;rv);\n  return rv;\n} \n</code></pre>\n\n<p>How can I get the return value if the function is called in my Main function as follows or at least show that the return value exists?</p>\n\n<pre><code>int PatrickMainChrome(int argc, const char** argv)  {\n\ncontent::mojom::CreateViewParams::New();\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "directx-11", "hlsl", "directx-9"], "answers": [{"comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1485975311, "post_id": 41982424, "comment_id": 71152532, "body": "The Standard Annotations are also tied into the legacy Effects system, so they don&#39;t really get used in the context of &#39;straight HLSL&#39; coding which is the recommended modern solution. That said, you can use <a href=\"https://github.com/Microsoft/FX11\" rel=\"nofollow noreferrer\">Effects for Direct3D 11</a> if you want. See <a href=\"https://fx11.codeplex.com/discussions/450240\" rel=\"nofollow noreferrer\">this thread</a> for details of the status of &quot;Effects&quot;, and <a href=\"https://fx11.codeplex.com/discussions/551307\" rel=\"nofollow noreferrer\">this thread</a> for FX vs HLSL."}, {"owner": {"reputation": 166, "user_id": 1941205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb32efb0792208a5b6b413e90376020?s=128&d=identicon&r=PG", "display_name": "Mark A. Ropper", "link": "https://stackoverflow.com/users/1941205/mark-a-ropper"}, "edited": false, "score": 0, "creation_date": 1486040120, "post_id": 41982424, "comment_id": 71181773, "body": "Thanks for the clarification, I&#39;m looking into pre-generating the images now."}], "tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": true, "score": 2, "last_activity_date": 1485959970, "creation_date": 1485959970, "answer_id": 41982424, "question_id": 41981972, "link": "https://stackoverflow.com/questions/41981972/is-there-any-directx-11-hlsl-5-0-equivalent-to-the-directx-9-texture-string-f/41982424#41982424", "title": "Is there any DirectX 11 (HLSL 5.0) equivalent to the DirectX 9 texture &quot;string function&quot; syntax?", "body": "<p>The things between the <code>&lt;</code> and <code>&gt;</code> in the texture declaration are called <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb206299(v=vs.85).aspx#Add_Information_to_Effect_Parameters_with_Annotations\" rel=\"nofollow noreferrer\">annotations</a>. Although the Effect system in D3DX9 has several <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb173004(v=vs.85).aspx\" rel=\"nofollow noreferrer\">\"standard annotations\"</a>, 'function' doesn't appear to be one of them. The standard annotations were mainly used by external tools to aid in authoring shaders, for example in <a href=\"http://developer.amd.com/rendermonkey-toolsuite/rendermonkey-toolsuite-ide-features/\" rel=\"nofollow noreferrer\">RenderMonkey</a>.</p>\n\n<p>These values provide no actual extra functionality within the context of DirectX, but likely serve as meta-data, which the C++ code would use to generate the textures. The annotation values can be queried (in C++) with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb205677(v=vs.85).aspx\" rel=\"nofollow noreferrer\">GetAnnotation</a>, or <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb205678(v=vs.85).aspx\" rel=\"nofollow noreferrer\">GetAnnotationByName</a> functions. If you are porting these to DirectX 11, you can simply hardcode these values in your C++ code, or, load them from a data file.</p>\n"}], "owner": {"reputation": 166, "user_id": 1941205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb32efb0792208a5b6b413e90376020?s=128&d=identicon&r=PG", "display_name": "Mark A. Ropper", "link": "https://stackoverflow.com/users/1941205/mark-a-ropper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 41982424, "answer_count": 1, "score": 1, "last_activity_date": 1485959970, "creation_date": 1485958632, "question_id": 41981972, "link": "https://stackoverflow.com/questions/41981972/is-there-any-directx-11-hlsl-5-0-equivalent-to-the-directx-9-texture-string-f", "title": "Is there any DirectX 11 (HLSL 5.0) equivalent to the DirectX 9 texture &quot;string function&quot; syntax?", "body": "<p>I am currently working with the source code from the GPU Gems 2 book, and I'm attempting to convert the <a href=\"http://http.download.nvidia.com/developer/GPU_Gems_2/CD/Index.html\" rel=\"nofollow noreferrer\">Improved Perlin Noise implementation (Chapter 26)</a> to work with DirectX 11. Although relatively painless, the optimisations they've used have been a slight annoyance due to their use of textures to aid lookups. The original code uses a now seemingly defunct method to declare textures which I don't know how to convert to modern DirectX.</p>\n\n<p>An example of the type of texture declaration I'm meaning is:\n(from the inoise.fxh file)</p>\n\n<pre><code>texture permTexture\n&lt;\n    string texturetype = \"2D\";\n    string format = \"l8\";\n    string function = \"GeneratePermTexture\";\n    int width = 256, height = 1;\n&gt;;\n</code></pre>\n\n<p>The texture type, format, width and height I understand how to configure outside of the shader, the <code>string function = \"GeneratePermTexture\"</code> part though has thrown me. </p>\n\n<p>The function it's referring to: (in the same file)</p>\n\n<pre><code>float4 GeneratePermTexture(float p : POSITION) : COLOR\n{\n    return permutation[p*256] / 255.0;\n}\n</code></pre>\n\n<p>There's a comment above this section of the file (which contains more of these functions for their respective textures) saying <code>// Functions to generate textures using CPU runtime</code></p>\n\n<p>Is there any simple way to do this with Dx11? My current train of investigation is suggesting I should be using the <code>D3D11_SUBRESOURCE_DATA *pInitialData</code> part of the CreateTexture functions.</p>\n"}, {"tags": ["c++", "c", "macros"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1485958594, "post_id": 41981928, "comment_id": 71141622, "body": "avoid training semicolon in your macro definition."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1485958610, "post_id": 41981928, "comment_id": 71141634, "body": "<code>printf</code> doesn&#39;t recursively format strings"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1485958633, "post_id": 41981928, "comment_id": 71141655, "body": "Macros and <code>printf</code> tend to be very C-oriented and less C++. Please try to refrain to add language tags that you don&#39;t actually use. If you&#39;re programming in C then don&#39;t add the C++ even if the solution or the code could be used in C++."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1485958672, "post_id": 41981928, "comment_id": 71141676, "body": "As for a solution to your problem, consider using a two-step process: One to format the output according to your arguments, and then one to actually print the output."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1485958706, "post_id": 41981928, "comment_id": 71141711, "body": "However, considering this is C++, how about taking advantage of a library like <a href=\"https://github.com/fmtlib/fmt\" rel=\"nofollow noreferrer\">fmt</a> that offers proper type safety?"}, {"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 0, "creation_date": 1485958943, "post_id": 41981928, "comment_id": 71141851, "body": "Thx Jean-Francois Fabre, I do not make macros often. For libraries and such, I have specific requirements that means I am coding in the c++ language only, no stl, no libraries."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1485959290, "post_id": 41981928, "comment_id": 71142096, "body": "But <code>printf</code> <i>is</i> part of the standard library. What is the reason you then can&#39;t use the rest of the standard library (since it will be linked in with whatever application your building anyway)? If you program in C++, then your life will be so much easier if you use the standard facilities that come with the language."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485960159, "post_id": 41981928, "comment_id": 71142708, "body": "@scx, I&#39;m not following what you&#39;re willing to use and what not.  Are you trying to say that you are actually writing C, <i>which is a different language from C++</i>?  Or are you perhaps saying that you are restricting yourself to the common subset of C and C++?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1485965428, "post_id": 41981928, "comment_id": 71146634, "body": "@scx, writing for the common subset of C and C++ is <i>very different</i> and considerably more difficult than writing normally for either one language or the other.  The reason these comments went the direction they did is largely that the question does not clearly state the true question."}], "answers": [{"tags": [], "owner": {"reputation": 471, "user_id": 5592711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Ctul.jpg?s=128&g=1", "display_name": "A. Monti", "link": "https://stackoverflow.com/users/5592711/a-monti"}, "is_accepted": true, "score": 0, "last_activity_date": 1485965391, "creation_date": 1485965391, "answer_id": 41984418, "question_id": 41981928, "link": "https://stackoverflow.com/questions/41981928/string-variable-expansion-in-debug-macro/41984418#41984418", "title": "String variable expansion in debug macro", "body": "<p>I think you're looking to define a macro prepending some debugging information to your formatted log.</p>\n\n<p>To achieve this, you can use the following macro :</p>\n\n<pre><code>#define LOG(format, ...) \\\nprintf(\"%s(%d) : %s() \" format, __FILE__, __LINE__, __FUNCTION__, ##__VA_ARGS__)\n</code></pre>\n\n<p>This way <code>LOG(\"%d\", 123)</code> will expand to <code>printf(\"%s(%d) : %s() \" \"%s\", __FILE__, __LINE__, __FUNCTION__, 123)</code>.\nAs consecutive string literals are merged (<code>\"a\" \"b\"</code> is equivalent to <code>\"ab\"</code>), the <code>printf</code> format is correctly built.</p>\n\n<p>Also note the use of <code>, ## __VA_ARGS__</code>. This is a GNU extension (see <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html</a>) that allows empty variadic arguments.</p>\n\n<p>This technique will however fail if <code>format</code> is not a string literal.\nSee an example here : <a href=\"http://ideone.com/gMnaES\" rel=\"nofollow noreferrer\">http://ideone.com/gMnaES</a></p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1485976948, "last_edit_date": 1485976948, "creation_date": 1485966073, "answer_id": 41984642, "question_id": 41981928, "link": "https://stackoverflow.com/questions/41981928/string-variable-expansion-in-debug-macro/41984642#41984642", "title": "String variable expansion in debug macro", "body": "<p>It seems to me that you're trying to cram too much into one <code>printf()</code> call.  You don't need to do that.  In particular, to support usage such as your first example:</p>\n\n<blockquote>\n<pre><code>OUTPUT_ERROR(\"%s was broken\", my_var);\n</code></pre>\n</blockquote>\n\n<p>you could easily split the output over multiple <code>printf()</code> calls with a macro like this:</p>\n\n<pre><code>#define OUTPUT_ERROR(...) do { \\\n  printf(\"%s(%d) : %s() : \", __FILE__, __LINE__, __func__); \\\n  printf(__VA_ARGS__); \\\n  putchar('\\n'); \\\n} while (0)\n</code></pre>\n"}], "owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 41984418, "answer_count": 2, "score": -1, "last_activity_date": 1485976948, "creation_date": 1485958507, "last_edit_date": 1485965578, "question_id": 41981928, "link": "https://stackoverflow.com/questions/41981928/string-variable-expansion-in-debug-macro", "title": "String variable expansion in debug macro", "body": "<p>I am trying to write a debug macro in the common subset of C and C++.  This is what I've come up with so far:</p>\n\n<pre><code>#define OUTPUT_ERROR(...) printf(\"%s(%d) : %s() : %s\\n\", __FILE__, __LINE__, __func__, #__VA_ARGS__)\n</code></pre>\n\n<p>Unfortunately, I cannot figure out how to give it variables to output. Is there any way to force a variable to be expanded at runtime? For example:</p>\n\n<pre><code>OUTPUT_ERROR(\"%s was broken\", my_var);\n</code></pre>\n\n<p>or simply in place</p>\n\n<pre><code>OUTPUT_ERROR(my_var + \"some text\");\n</code></pre>\n"}, {"tags": ["c++", "arrays", "memory-management"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 6, "creation_date": 1485957726, "post_id": 41981665, "comment_id": 71141007, "body": "Yes there is. Run a Google search on &quot;smart pointers&quot;."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1485957765, "post_id": 41981665, "comment_id": 71141031, "body": "Or better yet <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> (or possibly <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>)."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 4, "creation_date": 1485958116, "post_id": 41981665, "comment_id": 71141280, "body": "Read up on RAII idiom, used in Rust and C++."}, {"owner": {"reputation": 569, "user_id": 2819605, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9493cf5307d6d9801afc2268916247e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sylvain B.", "link": "https://stackoverflow.com/users/2819605/sylvain-b"}, "edited": false, "score": 0, "creation_date": 1485958742, "post_id": 41981665, "comment_id": 71141737, "body": "@people who answered : sorry for the misleading example, the size of the array is not known at compile time"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 7, "creation_date": 1485958904, "post_id": 41981665, "comment_id": 71141837, "body": "As a rule of thumb: If you are using <code>new</code> in C++ you are doing it wrong."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1485959954, "post_id": 41981665, "comment_id": 71142570, "body": "@nwp: As a side-note, since <code>new</code> did not exist prior to C++, your thumb-rule implies that there is something fundamentally wrong with this language to begin with."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1485960664, "post_id": 41981665, "comment_id": 71143035, "body": "@barakmanos <code>new</code> is a very low level element. The difference between <code>new</code> and <code>malloc</code> is that <code>new</code> calls the constructor of the object. There&#39;s no way around it. It exists, because it&#39;s also used to build high-level stuff, like <code>vector</code> and <code>unique_ptr</code>, but honestly, using it when you can use high-level options is just stupid and arrogant. It&#39;s one of the worst things you can ever do! Unless you&#39;re doing kernel level programming or building something very specific, you shouldn&#39;t use <code>new</code>! Piece of advice: Don&#39;t ever say you use <code>new</code> everywhere in an interview, you&#39;d never get that job!"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1485961666, "post_id": 41981665, "comment_id": 71143754, "body": "@TheQuantumPhysicist it&#39;s even easier than &quot;doing kernel level programming&quot; - if you are writing <code>new</code> anywhere that isn&#39;t a class named <i>something</i>_ptr, you are doing it wrong"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1485961817, "post_id": 41981665, "comment_id": 71143865, "body": "@barakmanos your statement is logically unsound (or at least incomplete). The existence of a language construct which should not <i>generally</i> be used does not in itself imply that there is anything fundamentally wrong with the language. (There&#39;s also room for argument about whether it was <i>always</i> the case that use of <code>new</code> should generally be avoided)."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1485966199, "post_id": 41981665, "comment_id": 71147148, "body": "@Caleth: ... or in a function <code>something_ptr make_something(Args...)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 1539607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9386388dbd2f7e2b6146a1324765692?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1539607/andrew"}, "edited": false, "score": 0, "creation_date": 1485960123, "post_id": 41981770, "comment_id": 71142683, "body": "<code>std::valarray&lt;double&gt;</code> may also be useful depending on the specific problem being solved."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1485960145, "post_id": 41981770, "comment_id": 71142694, "body": "I think it would be nice to mention <code>std::array</code> instead of raw arrays."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1485960975, "post_id": 41981770, "comment_id": 71143269, "body": "@GuillaumeRacicot: The size of <code>std::array</code> must be known at compile-time, and OP doesn&#39;t know the size until run-time (This was hidden in a comment on the OP: &quot;@people who answered : sorry for the misleading example, the size of the array is not known at compile time&quot;)"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1485961132, "post_id": 41981770, "comment_id": 71143387, "body": "@AndyG So does the last example with the raw array; when you declare a raw array, the size must be known at compile-time. There is little to no reason to not change a raw array into <code>std::array</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1485963136, "post_id": 41981770, "comment_id": 71144855, "body": "@GuillaumeRacicot: I think Kerrek&#39;s answer was posted before OP&#39;s clarification. raw arrays definitely won&#39;t work, unless you elect to use the GCC extension."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1485974467, "post_id": 41981770, "comment_id": 71152079, "body": "@AndyG: Good point, added <code>std::array</code> to the last example and clarified that the size needs to be know at compile time."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 13, "last_activity_date": 1485974428, "last_edit_date": 1485974428, "creation_date": 1485958017, "answer_id": 41981770, "question_id": 41981665, "link": "https://stackoverflow.com/questions/41981665/c-delete-array-even-if-error-occurs/41981770#41981770", "title": "C++ delete array even if error occurs", "body": "<p>In C++, the code would look as follows:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nvoid function()\n{\n    std::vector&lt;double&gt; array(100);\n\n    //some work that can return when or throw an exception\n    //...\n\n    return;\n}\n</code></pre>\n\n<p>If you really don't want to initialize the array elements and don't need to resize the array and don't need iterators, you can also use:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nvoid function()\n{\n    std::unique_ptr&lt;double[]&gt; array(new double[100]);\n\n    //some work that can return when or throw an exception\n    //...\n\n    return;\n}\n</code></pre>\n\n<p>In both cases you access the array elements with <code>array[0]</code>, <code>array[1]</code>, etc.</p>\n\n<p>Finally, if you don't need to transfer ownership of the data out of the function, know the size of the array at compile time, and the size isn't too large, you may also consider having a direct array object:</p>\n\n<pre><code>void function()\n{\n    double array[100];  // uninitialized, add \" = {}\" to zero-initialize\n\n    // or:\n\n    std::array&lt;double, 100&gt; array;  // ditto\n\n    //some work that can return when or throw an exception\n    //...\n\n    return;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 10, "last_activity_date": 1485959696, "last_edit_date": 1485959696, "creation_date": 1485958254, "answer_id": 41981850, "question_id": 41981665, "link": "https://stackoverflow.com/questions/41981665/c-delete-array-even-if-error-occurs/41981850#41981850", "title": "C++ delete array even if error occurs", "body": "<p>Automatic variables are destroyed <em>automatically</em> at the end of scope, whether due to return or a throw:</p>\n\n<pre><code>{\n    double array[100];\n    throw 1; // no memory leaked\n}\n</code></pre>\n\n<blockquote>\n  <p>sorry for the misleading example, the size of the array is not known at compile time</p>\n</blockquote>\n\n<p>In that case you do need a dynamic array. A popular solution to handling cleanup of resources such as dynamic memory is to wrap the pointer (or handle or descriptor depending on the type of resource) in a class, that acquires the resource on initialization, and releases on destruction. Then you can create an automatic variable of this wrapper type. This pattern is called \"Resource acquisition is initialization\" or RAII for short.</p>\n\n<p>You don't need to write your own RAII wrapper for a dynamic array however. The standard library has you covered: <code>std::vector</code></p>\n"}], "owner": {"reputation": 569, "user_id": 2819605, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9493cf5307d6d9801afc2268916247e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sylvain B.", "link": "https://stackoverflow.com/users/2819605/sylvain-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "closed_date": 1485963262, "accepted_answer_id": 41981770, "answer_count": 2, "score": 9, "last_activity_date": 1485974428, "creation_date": 1485957669, "last_edit_date": 1485959268, "question_id": 41981665, "link": "https://stackoverflow.com/questions/41981665/c-delete-array-even-if-error-occurs", "closed_reason": "Duplicate", "title": "C++ delete array even if error occurs", "body": "<p>I am new to C++, coming from C#.\nHere is the code : </p>\n\n<pre><code>void function(int n)\n{\n    double* array = new double[n];\n\n   //some work that can return or throw an exception\n   //...\n\n   delete[] array;\n   return;\n}\n</code></pre>\n\n<p>I know there is no C# <code>using</code> equivalent in C++. </p>\n\n<p>Is there a simple and elegant way to ensure that memory will be released what ever happens ?</p>\n"}, {"tags": ["c++", "arrays", "dynamic", "codeblocks"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1485957856, "post_id": 41981658, "comment_id": 71141099, "body": "First, prefer using <code>std::string</code>. to copy C-style strings, you need the services of <code>strcpy</code> or similar routines. Your expression, <code>new const char[4](staticArray);</code> tries to construct each of the elements in the newly created array with <code>staticArray</code>. And a <code>char</code> type cannot be constructed using a type of <code>char[4]</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485957858, "post_id": 41981658, "comment_id": 71141100, "body": "Are the arrays supposed to be strings? Then why not use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7058077"}, "edited": false, "score": 0, "creation_date": 1485957964, "post_id": 41981658, "comment_id": 71141173, "body": "I need a const char* at the end, to pass it to fstream"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485958141, "post_id": 41981658, "comment_id": 71141299, "body": "You <i>do</i> know that streams can handle <code>std::string</code>? There are overloads of <code>&lt;&lt;</code> that takes <code>std::string</code> arguments. And if you use e.g. <code>read</code> or <code>write</code> to read or write raw data, then you can easily get a pointer to the contained data in the string object. This seems like <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">an XY problem</a>, where you ask us with help for a solution to a problem you don&#39;t tell us about."}], "answers": [{"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 0, "last_activity_date": 1485958024, "creation_date": 1485958024, "answer_id": 41981773, "question_id": 41981658, "link": "https://stackoverflow.com/questions/41981658/initializing-to-a-dynamically-allocated-const-char-array-from-a-const-char-array/41981773#41981773", "title": "Initializing to a dynamically allocated const char array from a const char array", "body": "<p>You cannot copy-initialize an array from another array directly, hence the error. You either need to manually copy the elements (or use <code>std::copy</code>), or, better, if you want a \"copy\"-able array use <code>std::array&lt;char, 4&gt;</code> instead. </p>\n\n<p>But, as mentioned in the comments, the best probably is to use an <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> here, and use its <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\"><code>std::string::c_str()</code></a> member function in case you need to pass around <code>const char*</code> pointers to old C-like interfaces.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8992951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b91ce650969b3af6496c8f7fdac229?s=128&d=identicon&r=PG", "display_name": "Ramneet Singh", "link": "https://stackoverflow.com/users/8992951/ramneet-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1591472575, "creation_date": 1591472575, "answer_id": 62237130, "question_id": 41981658, "link": "https://stackoverflow.com/questions/41981658/initializing-to-a-dynamically-allocated-const-char-array-from-a-const-char-array/62237130#62237130", "title": "Initializing to a dynamically allocated const char array from a const char array", "body": "<p>Overloading new operator will do your job.</p>\n\n<pre><code>void * operator new[](size_t n, const char *s) {\n    void *p = malloc(n);\n    strcpy((char *)p, s);\n    return p;\n}\n</code></pre>\n\n<p>Now new operator can be called like :</p>\n\n<pre><code>const char staticArray[4] = \"abc\";\nconst char * ptrDynamicArray;\nptrDynamicArray = new (staticArray) char[4];\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7058077"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 0, "accepted_answer_id": 41981773, "answer_count": 2, "score": 1, "last_activity_date": 1591472575, "creation_date": 1485957638, "last_edit_date": 1501694046, "question_id": 41981658, "link": "https://stackoverflow.com/questions/41981658/initializing-to-a-dynamically-allocated-const-char-array-from-a-const-char-array", "title": "Initializing to a dynamically allocated const char array from a const char array", "body": "<p>I am trying to write code that will assign a const char array to a dynamically allocated const char array. \nI tried to do it like </p>\n\n<pre><code>const char staticArray[4] = \"abc\";\nconst char * ptrDynamicArray;\nptrDynamicArray = new const char[4](staticArray);\n</code></pre>\n\n<p>But I get an error (\"parenthesized initializer in array new [-fpermissive]\").</p>\n\n<p>I have two questions: </p>\n\n<ol>\n<li><p>How could I solve it - like turn it off (I am using Code::Blocks 16.01)?</p></li>\n<li><p>Can I initialize a dynamically allocated const char array somehow else?</p></li>\n</ol>\n"}, {"tags": ["c++", "input"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1485956754, "post_id": 41981295, "comment_id": 71140341, "body": "Just a nit-pick. You may want to do more <i>&quot;DRY - Do not Repeat Yourself&quot;</i>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485957094, "post_id": 41981295, "comment_id": 71140585, "body": "Why not read a string (or perhaps <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\">a whole line</a>), check if the first character <a href=\"http://en.cppreference.com/w/cpp/string/byte/isdigit\" rel=\"nofollow noreferrer\">is a digit</a> and then attempt to <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\">convert the string to an integer</a>. If not a digit then check for <code>&#39;|&#39;</code>, and if not found just discard the input."}, {"owner": {"reputation": 718, "user_id": 3933131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63a4cdcb0c5bffcd9008d7ed374dd313?s=128&d=identicon&r=PG&f=1", "display_name": "M-J", "link": "https://stackoverflow.com/users/3933131/m-j"}, "reply_to_user": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1485957322, "post_id": 41981295, "comment_id": 71140740, "body": "@Yuriy lvaskevych Clearing it to alter the failed state of std::cin, so that again it can accept new entered inputs, and I use the ignore to remove any previous inputs. (their names(clear&amp;ignore) are a bit different from what they do)"}, {"owner": {"reputation": 718, "user_id": 3933131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63a4cdcb0c5bffcd9008d7ed374dd313?s=128&d=identicon&r=PG&f=1", "display_name": "M-J", "link": "https://stackoverflow.com/users/3933131/m-j"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485957692, "post_id": 41981295, "comment_id": 71140985, "body": "@Someprogrammerdude Thanks, yes you&#39;re right, but I wonder why it isn&#39;t working in this way?"}], "answers": [{"tags": [], "owner": {"reputation": 698, "user_id": 5571136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Pp7U.jpg?s=128&g=1", "display_name": "Muhammad Nizami", "link": "https://stackoverflow.com/users/5571136/muhammad-nizami"}, "is_accepted": true, "score": 1, "last_activity_date": 1485958469, "creation_date": 1485958469, "answer_id": 41981917, "question_id": 41981295, "link": "https://stackoverflow.com/questions/41981295/using-input-stream-after-something-wrong-was-entered-in-c/41981917#41981917", "title": "Using input stream after something wrong was entered in C++", "body": "<p>Moving the clear() up seems to work:</p>\n\n<pre><code>    if (std::cin &gt;&gt; n1) {}\n    else {\n        std::cin.clear();\n        std::cin &gt;&gt; Finisher;\n        if (Finisher == '|') break; //Condition that must lead to program termination.\n        std::cin.ignore(40000,'\\n'); //40000: only a big number\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 919, "user_id": 5017858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OfAr1.png?s=128&g=1", "display_name": "Sam Marinelli", "link": "https://stackoverflow.com/users/5017858/sam-marinelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1485970398, "creation_date": 1485970398, "answer_id": 41986053, "question_id": 41981295, "link": "https://stackoverflow.com/questions/41981295/using-input-stream-after-something-wrong-was-entered-in-c/41986053#41986053", "title": "Using input stream after something wrong was entered in C++", "body": "<p>The problem is that once the read fails, <code>cin</code> is in a state where it won't be able to read anything else until you <code>clear</code> it.  You need to call <code>cin.clear();</code> before reading in the <code>Finisher</code>.</p>\n\n<p>Of course that still puts you in a position where you're reading in a separate character for the <code>Finisher</code>.  It would be more elegant to read in a single token and then check if it's a number or a pipe character.</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;stdexcept&gt;\n#include &lt;string&gt;\n\ntypedef double number;\n\nnumber parse_number() {\n\n    static std::string in;\n    static std::istringstream stream;\n    number ret;\n\n    std::cin &gt;&gt; in;\n    stream.clear();\n    stream.str(in);\n\n    if (stream &gt;&gt; ret)\n        return ret;\n\n    if (in.front() == '|')\n        std::exit(0);\n\n    std::ostringstream error;\n    error &lt;&lt; \"Could not parse token, \\\"\" &lt;&lt; in &lt;&lt; \".\\\"\";\n    throw std::runtime_error(error);\n\n}\n\nint main() {\n\n    while (true) {\n\n        const number n1 = parse_number();\n        const number n2 = parse_number();\n\n        // Do stuff with the numbers.\n\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 718, "user_id": 3933131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63a4cdcb0c5bffcd9008d7ed374dd313?s=128&d=identicon&r=PG&f=1", "display_name": "M-J", "link": "https://stackoverflow.com/users/3933131/m-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 41981917, "answer_count": 2, "score": 0, "last_activity_date": 1485970398, "creation_date": 1485956538, "question_id": 41981295, "link": "https://stackoverflow.com/questions/41981295/using-input-stream-after-something-wrong-was-entered-in-c", "title": "Using input stream after something wrong was entered in C++", "body": "<p>here's my solution to a simple problem of my textbook. Inside of that, I'm trying to use the input stream in order to detect the non-numerical input first, and then check if it's started with the '|' character to terminate the program:</p>\n\n<pre><code>    int main()\n{\n    double n1, n2;\n    char Finisher;\n    while (true) {\n        std::cout &lt;&lt; \"Enter number 1:\\n\";\n        if (std::cin &gt;&gt; n1) {}\n        else {\n            std::cin &gt;&gt; Finisher;\n            if (Finisher == '|') break; //Condition that must lead to program termination.\n            std::cin.clear();\n            std::cin.ignore(40000,'\\n'); //40000: only a big number\n        }\n        std::cout &lt;&lt; \"Enter number 2:\\n\";\n        if (std::cin &gt;&gt; n2) {}\n        else {\n            std::cin &gt;&gt; Finisher;\n            if (Finisher == '|') break;\n            std::cin.clear();\n            std::cin.ignore(40000, '\\n');\n        }\n\n        if (n1 &lt; n2) {\n            std::cout &lt;&lt; \"The smaller value is: \" &lt;&lt; n1 &lt;&lt; \" \\nThe larger value is: \" &lt;&lt; n2 &lt;&lt; '\\n';\n            if ((n1 - n2) &lt; 1.0 / 100 &amp;&amp; (n1 - n2) &gt; -1.0 / 100) {\n                std::cout &lt;&lt; \"The values are almost equal\\n\";\n            }\n        }\n        else if(n1&gt;n2){\n            std::cout &lt;&lt; \"The smaller value is: \" &lt;&lt; n2 &lt;&lt; \" \\nThe larger value is: \" &lt;&lt; n1 &lt;&lt; '\\n';\n            if ((n1 - n2) &lt; 1.0 / 100 &amp;&amp; (n1 - n2) &gt; -1.0 / 100) {\n                std::cout &lt;&lt; \"The values are almost equal\\n\";\n            }\n        }\n        else { std::cout &lt;&lt; \"both values are equal\\n\"; }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Problem is that my \"Finisher\" char variable seems to be useless, and any non-numerical input (kind of) gets lost! and another fixed character is entered in it regardless of what I've entered, in my case it's always like this: <a href=\"https://i.stack.imgur.com/pls2C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pls2C.png\" alt=\"enter image description here\"></a>\nWhat's wrong?!\nThank you.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "edited": false, "score": 0, "creation_date": 1485956055, "post_id": 41981120, "comment_id": 71139805, "body": "Forgot to mention, each .txt file have different content."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "edited": false, "score": 0, "creation_date": 1485957083, "post_id": 41981258, "comment_id": 71140578, "body": "Strangely, the iterator sets &quot;.hasNext&quot; to false and returns. Doesn&#39;t read nothing."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1485957590, "post_id": 41981258, "comment_id": 71140926, "body": "Try using <code>QDir::AllEntries | QDir::NoDotAndDotDot</code> as the filter."}], "tags": [], "owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "is_accepted": false, "score": 0, "last_activity_date": 1485956450, "creation_date": 1485956450, "answer_id": 41981258, "question_id": 41981120, "link": "https://stackoverflow.com/questions/41981120/qdiriterator-reading-directories-and-subdirectories/41981258#41981258", "title": "QDirIterator: Reading directories and subdirectories", "body": "<p>I guess, the iterator goes throu . and .. also. That means each file is read 3 times.\nTry using the constructor, where you can pass the dir-filter with the value QDir::NoDotAndDotDot</p>\n\n<p>try changing </p>\n\n<pre><code>QDirIterator it(directory, QDirIterator::Subdirectories);\n</code></pre>\n\n<p>by</p>\n\n<pre><code>QDirIterator it(directory, QDir::NoDotAndDotDot, QDirIterator::Subdirectories);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "is_accepted": false, "score": 1, "last_activity_date": 1485960853, "creation_date": 1485960853, "answer_id": 41982772, "question_id": 41981120, "link": "https://stackoverflow.com/questions/41981120/qdiriterator-reading-directories-and-subdirectories/41982772#41982772", "title": "QDirIterator: Reading directories and subdirectories", "body": "<p>Got it!</p>\n\n<pre><code>QString absoPath;\n    QString directory = QFileDialog::getExistingDirectory();\n\nQDirIterator it(directory,QDir::AllEntries |QDir::NoDotAndDotDot, QDirIterator::Subdirectories);\nabsoPath = it.path();\nwhile(it.hasNext()){\n\n    QFile totalFiles(absoPath + \"\\\\Total_imagens.txt\");\n    totalFiles.open(QIODevice::ReadOnly | QIODevice::Text);\n    if(totalFiles.isOpen()){\n        QTextStream in(&amp;totalFiles);\n        while(!in.atEnd()){\n        qDebug() &lt;&lt; in.readLine();\n        totalFiles.close();\n\n    }\n}\n    absoPath = it.next();\n}\nqDebug() &lt;&lt; \"Over\";\nreturn;\n}\n</code></pre>\n\n<p>The only thing i needed to do was to get a QString to recieve the \"it.next()\" at the end. Thanks for the help...the flags helped a lot! </p>\n"}], "owner": {"reputation": 115, "user_id": 7194758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba37e048ca0b27693fa21fc49271bb35?s=128&d=identicon&r=PG&f=1", "display_name": "GDias", "link": "https://stackoverflow.com/users/7194758/gdias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2598, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1485960853, "creation_date": 1485956001, "question_id": 41981120, "link": "https://stackoverflow.com/questions/41981120/qdiriterator-reading-directories-and-subdirectories", "title": "QDirIterator: Reading directories and subdirectories", "body": "<p>I'm having some trouble reading files recursively. Take a look:</p>\n\n<pre><code>QDir absoPath;\nQString directory = QFileDialog::getExistingDirectory();\n\nQDirIterator it(directory, QDirIterator::Subdirectories);\nwhile(it.hasNext()){\n    absoPath = it.next();\n\n    QFile totalFiles(absoPath.absolutePath() + \"\\\\Total_imagens.txt\");\n    totalFiles.open(QIODevice::ReadOnly | QIODevice::Text);\n    if(totalFiles.isOpen()){\n        QTextStream in(&amp;totalFiles);\n        while(!in.atEnd()){\n        qDebug() &lt;&lt; in.readLine();\n</code></pre>\n\n<p>My objective here is to read a .txt file and count the lines in it. In each subdirectory, is supposed to have the same .txt file with the same name.  The problem is that the iterator reads the same .txt file more than one time.</p>\n\n<p>Is there anything i could do? Change the names of the .txt files is the last thing i would want to.</p>\n\n<p>Thanks for your patience and help!</p>\n"}, {"tags": ["c++", "cuda", "compiler-optimization"], "answers": [{"comments": [{"owner": {"reputation": 260, "user_id": 3151553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zEHSf.jpg?s=128&g=1", "display_name": "stefanos", "link": "https://stackoverflow.com/users/3151553/stefanos"}, "edited": false, "score": 0, "creation_date": 1485958460, "post_id": 41981549, "comment_id": 71141524, "body": "Since I want 100% occupancy why wouldn&#39;t I use -maxrregcount and rely on launch bounds, although thanks for the link, I didn&#39;t know their existence. I&#39;m baffled because ptx compilation shouldn&#39;t be platform specific and I would expect the same results in both platforms"}, {"owner": {"reputation": 6633, "user_id": 1662425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109db00d44ebcdc900353b05e3a1443?s=128&d=identicon&r=PG", "display_name": "tera", "link": "https://stackoverflow.com/users/1662425/tera"}, "reply_to_user": {"reputation": 260, "user_id": 3151553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zEHSf.jpg?s=128&g=1", "display_name": "stefanos", "link": "https://stackoverflow.com/users/3151553/stefanos"}, "edited": false, "score": 1, "creation_date": 1485958969, "post_id": 41981549, "comment_id": 71141874, "body": "-maxrregcount works equally well if you have a single kernel per compilation unit (.cu file). Per-kernel launch bound annotations were later added so each kernel can use it&#39;s optimal configuration."}, {"owner": {"reputation": 6633, "user_id": 1662425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109db00d44ebcdc900353b05e3a1443?s=128&d=identicon&r=PG", "display_name": "tera", "link": "https://stackoverflow.com/users/1662425/tera"}, "reply_to_user": {"reputation": 260, "user_id": 3151553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zEHSf.jpg?s=128&g=1", "display_name": "stefanos", "link": "https://stackoverflow.com/users/3151553/stefanos"}, "edited": false, "score": 0, "creation_date": 1485959411, "post_id": 41981549, "comment_id": 71142186, "body": "PTX compilation isn&#39;t necessarily platform specific, but you are using different versions of the toolkit. New compiler versions very likely include additional optimizations and adjusted heuristics that would lead to different register use."}, {"owner": {"reputation": 260, "user_id": 3151553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zEHSf.jpg?s=128&g=1", "display_name": "stefanos", "link": "https://stackoverflow.com/users/3151553/stefanos"}, "edited": false, "score": 0, "creation_date": 1485961311, "post_id": 41981549, "comment_id": 71143516, "body": "it turns out that the nix version doesn&#39;t perform any register allocation unless told to do so unless maxrregcount or launch bounds are specified.  In my case both maxrregcount and launch bounds didn&#39;t spill anything to local memory. I was mislead from the nvprof --metrics because sometimes the kernel&#39;s blocks are few and do not saturate the card.  Thanks for your help :)"}, {"owner": {"reputation": 6633, "user_id": 1662425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109db00d44ebcdc900353b05e3a1443?s=128&d=identicon&r=PG", "display_name": "tera", "link": "https://stackoverflow.com/users/1662425/tera"}, "reply_to_user": {"reputation": 260, "user_id": 3151553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zEHSf.jpg?s=128&g=1", "display_name": "stefanos", "link": "https://stackoverflow.com/users/3151553/stefanos"}, "edited": false, "score": 2, "creation_date": 1485962770, "post_id": 41981549, "comment_id": 71144579, "body": "&quot;the nix version doesn&#39;t perform any register allocation unless...&quot; - not sure what that is supposed to tell me since register allocation is an essential step in compiling any code. But I&#39;m glad I could help."}, {"owner": {"reputation": 260, "user_id": 3151553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zEHSf.jpg?s=128&g=1", "display_name": "stefanos", "link": "https://stackoverflow.com/users/3151553/stefanos"}, "edited": false, "score": 0, "creation_date": 1486065049, "post_id": 41981549, "comment_id": 71197655, "body": "Not exactly, register allocation is not essential and shouldn&#39;t be done in -O0 optimization (spill everything). As far as cuda is concerned -O0 yielded 45 registers and -O3 yielded 45 registers, which would be a 1-1 var to register alloc and I wouldn&#39;t say it optimized anything."}], "tags": [], "owner": {"reputation": 6633, "user_id": 1662425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109db00d44ebcdc900353b05e3a1443?s=128&d=identicon&r=PG", "display_name": "tera", "link": "https://stackoverflow.com/users/1662425/tera"}, "is_accepted": true, "score": 1, "last_activity_date": 1485957708, "last_edit_date": 1485957708, "creation_date": 1485957317, "answer_id": 41981549, "question_id": 41981106, "link": "https://stackoverflow.com/questions/41981106/cuda-register-compiler-optimization/41981549#41981549", "title": "Cuda register compiler optimization", "body": "<p>Different versions of the toolkit (or even the driver, if you compile to PTX) may use different numbers of registers for the same code.</p>\n\n<p>Use <a href=\"http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#launch-bounds\" rel=\"nofollow noreferrer\">launch bounds</a> to inform the compiler of your intended launch configuration and occupancy goal for the specific kernel. If necessary, it will then try hard to bring down register use.<br>\nWhether that requires spilling registers to local memory is outside your control, but the compiler will generally behave very reasonable. </p>\n"}], "owner": {"reputation": 260, "user_id": 3151553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zEHSf.jpg?s=128&g=1", "display_name": "stefanos", "link": "https://stackoverflow.com/users/3151553/stefanos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 1, "accepted_answer_id": 41981549, "answer_count": 1, "score": 1, "last_activity_date": 1485957708, "creation_date": 1485955962, "question_id": 41981106, "link": "https://stackoverflow.com/questions/41981106/cuda-register-compiler-optimization", "title": "Cuda register compiler optimization", "body": "<p>My question is rather simple I'm writing a CUDA application, but because my main computer is a Windows PC (Visual Studio 2013) I have developed my application there. But the end application is going to be deployed in a *nix server.</p>\n\n<p>My question is:</p>\n\n<p>On <strong>Visual Studio 2013</strong> optimziation flag <strong>/Ox</strong> (full optimization) with <strong>/Oi</strong> (enable intrinsics) manages to squeeze my register usage to just 32regs thus getting a full occupancy.</p>\n\n<pre><code>C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v7.5\\bin\\nvcc.exe\" -gencode=arch=compute_35,code=\\\"sm_35,compute_35\\\" --use-local-env --cl-version 2013 -ccbin \"C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\bin\\x86_amd64\"  -I\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v7.5\\include\" -I\"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v7.5\\include\"     --keep-dir x64\\Release -maxrregcount=0 --ptxas-options=-v --machine 64 --compile -cudart static     -DWIN32 -DWIN64 -DNDEBUG -D_CONSOLE -D_MBCS -Xcompiler \"/EHsc /W3 /nologo /Ox /Zi  /MD \" -o Simulation.cu.obj \"Simulation.cu\" \n</code></pre>\n\n<p>On <strong>Ubuntu</strong> using <strong>gcc 4.9.4</strong> and <strong>cuda-8</strong> compiled with <strong>cmake</strong> and <strong>O3</strong> optimization level, the register count is around 49 (>32).</p>\n\n<pre><code>nvcc Simulation.cu -dc -o Simulation.cu.o -ccbin cc -m64 -DNDEBUG -Xcompiler ,\\\"-std=c++1y\\\",\\\"-w\\\",\\\"-O3\\\",\\\"-g\\\" -arch=sm_35 -std=c++11 -rdc=true -O3 --ptxas-options=-v -DNVCC\n</code></pre>\n\n<p>Am I missing any flag ? And I don't want to spill any registers to local memory.</p>\n"}, {"tags": ["c++", "performance", "division"], "comments": [{"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 1, "creation_date": 1485956440, "post_id": 41981021, "comment_id": 71140084, "body": "Integer and floating point division take the same time.  32-bit division is faster than 64-bit division. If the denominator is limited enough that you could have a lookup table to get the reciprocal then a multiply is much faster."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1485956488, "post_id": 41981021, "comment_id": 71140115, "body": "The problem is that you can&#39;t really just do a &quot;part&quot; of the division to get the non-fractional number. At least I think so, since I&#39;m not that good at advanced math. Unless you absolutely want code, then perhaps ask on <a href=\"http://math.stackexchange.com/\">math.stackexchange.com</a> for how to only get the non-fractional part of a division?"}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 3572842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc255a6852c944212c8e95ba409da5af?s=128&d=identicon&r=PG&f=1", "display_name": "kushy", "link": "https://stackoverflow.com/users/3572842/kushy"}, "edited": false, "score": 0, "creation_date": 1485957615, "post_id": 41981462, "comment_id": 71140945, "body": "Thanks for the good answer. As someone who is closer to mathematics/physics than programming, I am amazed that integer division can be slower than float/double division."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 360, "user_id": 3572842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc255a6852c944212c8e95ba409da5af?s=128&d=identicon&r=PG&f=1", "display_name": "kushy", "link": "https://stackoverflow.com/users/3572842/kushy"}, "edited": false, "score": 1, "creation_date": 1485958052, "post_id": 41981462, "comment_id": 71141231, "body": "@kushy prepare to be even more amazed: 64 bit integer division typically (as in, across most &#181;archs) takes up to 90 cycles. Completely off the charts. Anyway I guess it&#39;s largely a matter of focus, I&#39;m relatively sure that they <i>could</i> make 32bit integer division at least as fast as double division (I mean, there are fewer bits to divide, sort of.. depends on which operand you look at. At the very least, it doesn&#39;t need to be twice as slow), but choose not to."}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": true, "score": 3, "last_activity_date": 1485957605, "last_edit_date": 1485957605, "creation_date": 1485957061, "answer_id": 41981462, "question_id": 41981021, "link": "https://stackoverflow.com/questions/41981021/stop-double-division-before-decimals-low-precision-fast-division-getting-only/41981462#41981462", "title": "Stop double division before decimals (low precision, fast division; getting only the &#39;quotient&#39;)", "body": "<p>There is no way to stop earlier, and using integer division is potentially slower.</p>\n\n<p>For example, on Skylake:</p>\n\n<pre><code>idiv r/m32 L: 26-27 T: 6\ndivsd xmm, xmm L: 13-14 T: 4\n</code></pre>\n\n<p>(<a href=\"http://users.atw.hu/instlatx64/GenuineIntel00506E3_Skylake_InstLatX64.txt\" rel=\"nofollow noreferrer\">source</a>)</p>\n\n<p>So the double division is twice as fast and has a significantly better throughput. That is <em>before</em> you factor in the extra multiplications and extra cast.</p>\n\n<p>On older \u00b5archs, 32 bit integer division often has lower latency numbers listed than double division, <em>but</em> they varied more (division used to be more serial), with (for floats) round divisors being faster yet for integer division it's small results that are faster. This difference in characteristics can make it swing either way, depending on what you're dividing by what.</p>\n\n<p>As you can see it's dangerous in this case to optimize without a specific target in mind, but I imagine newer machines are a more likely target than older machines, which means the double division is more or less the best you can do anyway (unless other optimizations apply). Dividing single precision floats is faster by itself but incurs a conversion cost, it actually ends up losing (5+10) if you add them up.</p>\n"}], "owner": {"reputation": 360, "user_id": 3572842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc255a6852c944212c8e95ba409da5af?s=128&d=identicon&r=PG&f=1", "display_name": "kushy", "link": "https://stackoverflow.com/users/3572842/kushy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 41981462, "answer_count": 1, "score": 3, "last_activity_date": 1485957605, "creation_date": 1485955716, "last_edit_date": 1485955847, "question_id": 41981021, "link": "https://stackoverflow.com/questions/41981021/stop-double-division-before-decimals-low-precision-fast-division-getting-only", "title": "Stop double division before decimals (low precision, fast division; getting only the &#39;quotient&#39;)", "body": "<p>Basically a performance related question:</p>\n\n<p>I want to get only the integer quotient from a double division, i.e. for example, for a division <code>88.3/12.7 = 6.9527559055118110236220472440945</code>, I only want to get '6' as a result.\nA possible implementation would be of course: <code>floor(x/y)</code>, but here, first the performance-intensive double division is done and afterwards floor throws away most of the 'work' the double division did.</p>\n\n<p>So basically I want a division with doubles which 'stops' before calculating all these decimal points and just gives me the correct integer result of the division, without rounding or truncating the initial double arguments. Does anyone know an elegant implementation for this (I searched for this topic but didn't find much)?</p>\n\n<p>Another implementation I can imagine is:\n<code>int(x*1000)/int(y*1000)</code>\nWhere instead of 1000, the needed 'precision' can be used. A very simple implementation would be also simply subtracting y from x until the result is smaller than zero. But yeah, I was wondering what would be the best way to do it.</p>\n\n<p>Also, doing simply <code>int(x)/int(y)</code> is no option since it could easily result in wrong results.</p>\n\n<p>By the way, I know this is probably again one of these 'micro-optimization' questions which deal with a matter that does not really matter on new machines, but well, I still am kinda curious on the subject! :-)</p>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 458, "user_id": 2598455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10292c97171ec40cfe485635be47a22?s=128&d=identicon&r=PG", "display_name": "Artur Kink", "link": "https://stackoverflow.com/users/2598455/artur-kink"}, "edited": false, "score": 2, "creation_date": 1485965372, "post_id": 41980958, "comment_id": 71146587, "body": "Looking at the discussion, the example you have written above is not in the list Dimitri gives(true is not a type its a value). What you want seem to be \\ref inhibitSaving(bool) &quot;inhibitSaving(true)&quot; or \\ref inhibitSaving &quot;inhibitSaving(true)&quot;"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 458, "user_id": 2598455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10292c97171ec40cfe485635be47a22?s=128&d=identicon&r=PG", "display_name": "Artur Kink", "link": "https://stackoverflow.com/users/2598455/artur-kink"}, "edited": false, "score": 0, "creation_date": 1486020616, "post_id": 41980958, "comment_id": 71169549, "body": "@ArturKink: You are right, this works. You may want to post this as an answer to get deserved reputation."}], "answers": [{"tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 2, "last_activity_date": 1486105155, "creation_date": 1486105155, "answer_id": 42018482, "question_id": 41980958, "link": "https://stackoverflow.com/questions/41980958/doxygen-how-to-reference-a-function-but-with-arguments-values/42018482#42018482", "title": "Doxygen: How to reference a function, but with arguments values", "body": "<p>As commented by ArturKink, <code>inhibitSaving(true)</code> is not a valid type reference, only <code>inhibitSaving(bool)</code> is.</p>\n\n<p>So link should be created by <code>\\ref inhibitSaving(bool) \"inhibitSaving(true)\"</code> or  <code>\\ref inhibitSaving \"inhibitSaving(true)\"</code></p>\n"}], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6673, "favorite_count": 0, "accepted_answer_id": 42018482, "answer_count": 1, "score": 1, "last_activity_date": 1486105155, "creation_date": 1485955508, "question_id": 41980958, "link": "https://stackoverflow.com/questions/41980958/doxygen-how-to-reference-a-function-but-with-arguments-values", "title": "Doxygen: How to reference a function, but with arguments values", "body": "<p>When I generate the documentation for this class:</p>\n\n<pre><code>class MyClass\n{\n    /** Some description\n     * \\param inhibit some description\n     */\n    virtual void inhibitSaving( bool inhibit = true ) = 0;\n\n    /** \\return true if @ref inhibitSaving with parameter set to true has been called previously */\n    virtual bool isSavinginhibited() const = 0;\n};\n</code></pre>\n\n<p><code>isSavinginhibited</code>'s description has a hyperlink to <code>inhibitSaving</code>.</p>\n\n<p>However, if I write the description as below:</p>\n\n<pre><code>/** \\return true if @ref inhibitSaving(true) has been called previously */\nvirtual bool isSavinginhibited() const = 0;\n</code></pre>\n\n<p><code>isSavinginhibited</code>'s description does not have a hyperlink to <code>inhibitSaving</code>.</p>\n\n<p>Considering <a href=\"http://doxygen.10944.n7.nabble.com/Linking-to-methods-and-mentioning-parameters-td1667.html#a1672\" rel=\"nofollow noreferrer\">this discussion</a>, it's supposed to work. Why am I not getting a hyperlink. What am I doing wrong?</p>\n"}, {"tags": ["c++", "vector", "variadic-functions"], "comments": [{"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1485956035, "post_id": 41980888, "comment_id": 71139793, "body": "Might I ask why you need this? Writing a function over the vector itself being a parameter is more preferable in about any case. Since newer versions of C++ can instantiate vectors like vector a = {1,2,3}, there is not much usage for multiple arguments anyway. Can be that in your case it makes sense, but before we deal with an XY-problem here..."}, {"owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "reply_to_user": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1485956379, "post_id": 41980888, "comment_id": 71140040, "body": "@Aziuth, Im trying to work around the implicit error issue with using lambda functions added to a queue via a base class with virtual pure function definition - parameterless lambdas is no issue is getting those parameters across thats the problem - so far I have managed to transfer known types but not multiple like args..."}, {"owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "reply_to_user": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1485957198, "post_id": 41980888, "comment_id": 71140657, "body": "so far I have solved it using a fixed type to transfer [std::vector&lt;Variant&gt;] I then on the receiving end handle the vectors elements as if they were normal args - this however will make test2 definition unflexible"}], "answers": [{"comments": [{"owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "edited": false, "score": 0, "creation_date": 1485955721, "post_id": 41980995, "comment_id": 71139575, "body": "I was hoping for something like boost::bind to help with this issue"}, {"owner": {"reputation": 6166, "user_id": 350605, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a35a3976dc5e4dbd8b1c0ba81c7161e9?s=128&d=identicon&r=PG", "display_name": "PeterK", "link": "https://stackoverflow.com/users/350605/peterk"}, "reply_to_user": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "edited": false, "score": 1, "creation_date": 1485955805, "post_id": 41980995, "comment_id": 71139629, "body": "@serup: i think the fundamental problem is that in your first example, everything is known at compile time, but what you want to do is only known at runtime (as Sam says, the vector can contain any number of items at that point) and that is why it cannot be done."}, {"owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "edited": false, "score": 0, "creation_date": 1486020563, "post_id": 41980995, "comment_id": 71169520, "body": "how would you then use a function / lambda which has the definition [](const auto&amp;...args) { }   -- from a runtime allocated and executed function - so far I have not found a solution, except to change the <code>const auto&amp;...args</code> to <code>std::vector&lt;Variant&gt;</code> and then have the receiving function handle the vector elements as if they are normal args"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1486036859, "post_id": 41980995, "comment_id": 71179616, "body": "As I explained in my answer: you can&#39;t. C++ does not work this way. The C++ language&#39;s fundamental design makes this logically impossible."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 3, "last_activity_date": 1485955630, "creation_date": 1485955630, "answer_id": 41980995, "question_id": 41980888, "link": "https://stackoverflow.com/questions/41980888/how-to-convert-from-stdvector-to-args/41980995#41980995", "title": "how to convert from std::vector to args", "body": "<p>No it's not possible. Parameter packs must be determined at compile time, in order to be expanded. Each uniquely-typed parameter pack becomes its own unique function call, created at compile time.</p>\n\n<p>Obviously, the size of a vector is not known until run time. C++ does not work like that, fundamentally.</p>\n"}, {"comments": [{"owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "edited": false, "score": 0, "creation_date": 1486021201, "post_id": 41985035, "comment_id": 71169830, "body": "Interesting approach, but I agree not the way to go - I decided to make my receving functions more adapt to handling the received Variants - something like this : <code>auto fnTest = [](std::vector&lt;Variant&gt; vec) {  std::cout &lt;&lt; &quot;parameters : &quot;; for(auto a: vec) { std::cout &lt;&lt; a &lt;&lt; &quot;,&quot;; } std::cout &lt;&lt; std::endl; };</code>  so obviously each function must know types of arguments in order to fetch them like this <code>int param = boost::get&lt;int&gt;(a);</code>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "edited": false, "score": 1, "creation_date": 1486042637, "post_id": 41985035, "comment_id": 71183348, "body": "@serup instead of a vector of variant, if you can, use a tuple. tuples can be expanded into Args and they are much faster. Of course, that may mean to change your destiny, but it worth it."}, {"owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "edited": false, "score": 0, "creation_date": 1486046709, "post_id": 41985035, "comment_id": 71186221, "body": "Yes worth looking into - however so far the boost variant ways of getting value is so easy, with tuples I am not sure It would be so easy to read - performance vs. readability, but still perhaps"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 3, "last_activity_date": 1485967281, "creation_date": 1485967281, "answer_id": 41985035, "question_id": 41980888, "link": "https://stackoverflow.com/questions/41980888/how-to-convert-from-stdvector-to-args/41985035#41985035", "title": "how to convert from std::vector to args", "body": "<p>It is possible to do this. But since the size of a vector is only known at runtime, errors from mismatched sizes must occur at runtime too.</p>\n\n<p>Here's how I'd do it:</p>\n\n<pre><code>template&lt;std::size_t... S&gt;\nvoid unpack_vector(const std::vector&lt;Variant&gt;&amp; vec, std::index_sequence&lt;S...&gt;) {\n    test2(vec[S]...);\n}\n\ntemplate&lt;std::size_t size&gt;\nvoid unpack_vector(const std::vector&lt;Variant&gt;&amp; vec) {\n    if (vec.size() != size) throw /* choose your error */;\n    unpack_vector(vec, std::make_index_sequence&lt;size&gt;());\n}\n</code></pre>\n\n<p>You can then call it like this:</p>\n\n<pre><code>unpack_vector&lt;6&gt;(vec);\n</code></pre>\n\n<p>Note that this function will send <code>Variant</code> instances to the function <code>test2</code>.</p>\n\n<p>I must admit this might be a bad idea, runtime errors are not there best. I suggest you to review your design in order to not need this.</p>\n"}, {"comments": [{"owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "edited": false, "score": 0, "creation_date": 1486022615, "post_id": 41996941, "comment_id": 71170552, "body": "however this example have compile time make_tuple creating the args, so this would also not be usable, however it comes close to a viable solution"}], "tags": [], "owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "is_accepted": false, "score": 1, "last_activity_date": 1486022445, "creation_date": 1486022445, "answer_id": 41996941, "question_id": 41980888, "link": "https://stackoverflow.com/questions/41980888/how-to-convert-from-stdvector-to-args/41996941#41996941", "title": "how to convert from std::vector to args", "body": "<p>based on @Guillaume Racicot answer, I then found this solution (snippet from <a href=\"http://en.cppreference.com/w/cpp/utility/integer_sequence\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/utility/integer_sequence</a>) : </p>\n\n<p>This example shows how a std::tuple can be converted into arguments for a function invocation.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;utility&gt;\n\ntemplate&lt;typename Func, typename Tup, std::size_t... index&gt;\ndecltype(auto) invoke_helper(Func&amp;&amp; func, Tup&amp;&amp; tup, std::index_sequence&lt;index...&gt;)\n{\n    return func(std::get&lt;index&gt;(std::forward&lt;Tup&gt;(tup))...);\n}\n\ntemplate&lt;typename Func, typename Tup&gt;\ndecltype(auto) invoke(Func&amp;&amp; func, Tup&amp;&amp; tup)\n{\n    constexpr auto Size = std::tuple_size&lt;typename std::decay&lt;Tup&gt;::type&gt;::value;\n    return invoke_helper(std::forward&lt;Func&gt;(func),\n                         std::forward&lt;Tup&gt;(tup),\n                         std::make_index_sequence&lt;Size&gt;{});\n}\n\nvoid foo(int a, const std::string&amp; b, float c)\n{\n    std::cout &lt;&lt; a &lt;&lt; \" , \" &lt;&lt; b &lt;&lt; \" , \" &lt;&lt; c &lt;&lt; '\\n';\n}\n\nint main()\n{\n    auto args = std::make_tuple(2, \"Hello\", 3.5);\n    invoke(foo, args);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>2 , Hello , 3.5</p>\n"}], "owner": {"reputation": 2951, "user_id": 3990012, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mSjyZ.jpg?s=128&g=1", "display_name": "serup", "link": "https://stackoverflow.com/users/3990012/serup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3931, "favorite_count": 1, "accepted_answer_id": 41980995, "answer_count": 3, "score": 5, "last_activity_date": 1486022445, "creation_date": 1485955301, "last_edit_date": 1485955628, "question_id": 41980888, "link": "https://stackoverflow.com/questions/41980888/how-to-convert-from-stdvector-to-args", "title": "how to convert from std::vector to args", "body": "<p>I have a function which takes multiple arguments like this:</p>\n\n<pre><code>void test(const auto&amp;...args)\n{\n   typedef boost::variant&lt;int, float, std::string&gt; Variant;\n   std::vector&lt;Variant&gt; vec = {args...}\n}\n</code></pre>\n\n<p>this works fine - arguments are inside the vector as different types according to the Variant</p>\n\n<p>I would like to fetch arguments from a similar vector and put it back into a function that takes args...</p>\n\n<p>something like this :</p>\n\n<pre><code>args = vec;\ntest2(args);\n\nvoid test2(const auto&amp;...args);\n</code></pre>\n\n<p>how can this be done?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1485955481, "post_id": 41980825, "comment_id": 71139415, "body": "You should probably read the documentation for <code>seekg</code>. It does not define a &quot;range&quot;, it only moves the read position."}, {"owner": {"reputation": 23, "user_id": 6797503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8332b2a159050b2ff84523f5cc88827e?s=128&d=identicon&r=PG&f=1", "display_name": "Emin Furkan T&#252;rkmen", "link": "https://stackoverflow.com/users/6797503/emin-furkan-t%c3%bcrkmen"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1485955543, "post_id": 41980825, "comment_id": 71139459, "body": "I readed docs, and trying not working. Help me please."}, {"owner": {"reputation": 23, "user_id": 6797503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8332b2a159050b2ff84523f5cc88827e?s=128&d=identicon&r=PG&f=1", "display_name": "Emin Furkan T&#252;rkmen", "link": "https://stackoverflow.com/users/6797503/emin-furkan-t%c3%bcrkmen"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1485955663, "post_id": 41980825, "comment_id": 71139531, "body": "Windows api ReadFile function giving nNumberOfBytesToRead. for ifstream What should I do?"}, {"owner": {"reputation": 23, "user_id": 6797503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8332b2a159050b2ff84523f5cc88827e?s=128&d=identicon&r=PG&f=1", "display_name": "Emin Furkan T&#252;rkmen", "link": "https://stackoverflow.com/users/6797503/emin-furkan-t%c3%bcrkmen"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1485955709, "post_id": 41980825, "comment_id": 71139562, "body": "PointerToRawData and SizeOfRawData size&#39;s there."}, {"owner": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1485955943, "post_id": 41980825, "comment_id": 71139729, "body": "What are you trying to achieve here, are you suppose to read and parse data based on hello_ and _guys ?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1485963558, "post_id": 41981073, "comment_id": 71145177, "body": "Why not resize <code>data</code> and read into it directly? No need for the round-trip through <code>buffer</code> and C-like functions. In fact you&#39;re not using <code>data</code> at all."}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1486040758, "post_id": 41981073, "comment_id": 71182174, "body": "@LightnessRacesinOrbit You are right, my previous solution was too C-style. I replaced it by use of <code>std::string</code>."}], "tags": [], "owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "is_accepted": true, "score": 2, "last_activity_date": 1486040722, "last_edit_date": 1486040722, "creation_date": 1485955879, "answer_id": 41981073, "question_id": 41980825, "link": "https://stackoverflow.com/questions/41980825/c-ifstream-read-offset-range/41981073#41981073", "title": "C++ ifstream read offset range", "body": "<p><a href=\"http://www.cplusplus.com/reference/istream/istream/seekg/\" rel=\"nofollow noreferrer\">The seekg function</a> does only <em>set the position of the next character to be extracted from the input stream</em>. It cannot set a \"limit\" to stop. So the following line:</p>\n\n<pre><code>is.seekg(5, ios::end); // step from end \"_guys\"\n</code></pre>\n\n<p>Is incorrect. A use of seekg with <code>ios::end</code> won't set a limit.</p>\n\n<p>Your other use is correct however. If you want to read just a specific block of data, and if you know precisely the size of this block of data (the precise size of the string \"READHERE\"), you can use the <a href=\"http://www.cplusplus.com/reference/istream/istream/read/\" rel=\"nofollow noreferrer\">istream::read</a> function in order to read it:</p>\n\n<pre><code>std::ifstream is(\"test.txt\");\n\nif (is.good())\n{\n    is.seekg(5, ios::end); // step from end \"_guys\"\n\n\n    std::string data(sizeof(\"READHERE\"), '\\0'); // Initialize a string of the appropriate length.\n\n    is.read(&amp;data[0], sizeof(\"READHERE\")); // Read the word and store it into the string.\n\n    std::cout &lt;&lt; data &lt;&lt; std::endl; // output \"READHERE\".\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "is_accepted": false, "score": 1, "last_activity_date": 1485955892, "creation_date": 1485955892, "answer_id": 41981078, "question_id": 41980825, "link": "https://stackoverflow.com/questions/41980825/c-ifstream-read-offset-range/41981078#41981078", "title": "C++ ifstream read offset range", "body": "<p>When you first call <code>seekg</code> it sets a 'cursor' in file in specified position. Then after you call <code>seekg</code> second time it sets that 'curson' in another position (after 'head_' now) but it doesn't care about previous call so it wouldn't read as you suppose.</p>\n\n<p>One solution is as folows:</p>\n\n<pre><code>std::string data;\nis.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '_');\nstd::getline(is, data, '_');\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/ignore\" rel=\"nofollow noreferrer\"><code>std::ifstream::ignore</code></a> is used to skip everything until and including first occurence of '_'. Now <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> reads everything from that file (after skipped part of course) till it encounters characher-delimiter that is provided as third argument (<code>'_'</code>) so it would read exactly what you want.</p>\n"}], "owner": {"reputation": 23, "user_id": 6797503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8332b2a159050b2ff84523f5cc88827e?s=128&d=identicon&r=PG&f=1", "display_name": "Emin Furkan T&#252;rkmen", "link": "https://stackoverflow.com/users/6797503/emin-furkan-t%c3%bcrkmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2173, "favorite_count": 1, "accepted_answer_id": 41981073, "answer_count": 2, "score": 1, "last_activity_date": 1486040722, "creation_date": 1485955083, "question_id": 41980825, "link": "https://stackoverflow.com/questions/41980825/c-ifstream-read-offset-range", "title": "C++ ifstream read offset range", "body": "<p>I work an file, in this file content: \"hello_READHERE_guys\". How to read \"READHERE\" position only?</p>\n\n<p>I trying this code and fail: </p>\n\n<pre><code>std::ifstream is(\"test.txt\");\n\nif (is.good())\n{\n    is.seekg(5, ios::end); // step from end \"_guys\"\n    is.seekg(6, ios::beg); // step from start \"hello_\"\n\n    std::string data;\n\n    while (is &gt;&gt; data) {}\n\n    std::cout &lt;&lt; data &lt;&lt; std::endl; // output \"READHERE_guys\" fail.\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "360-panorama"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1485956110, "post_id": 41980693, "comment_id": 71139851, "body": "the blurriness comes from the scale factor of the image. The scaling comes from some inevitable drift which either results from small errors in the registration or from the fact that you are trying to construct a 3D scene on the 2D image. The perspective homographies used in stitching are only correct for a planar scene, or if the camera center is changed by pure rotation."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1485956511, "post_id": 41980693, "comment_id": 71140135, "body": "you could try to use INTER_CUBIC or INTER_LANCZOS4 in warpPerspective, but the documentation only talks about INTER_LINEAR and INTER_NEAREST, so maybe the others don&#39;t exist ist warping..."}, {"owner": {"reputation": 23, "user_id": 2809151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d1aa9ac407d5c98c9528ec0c438dba58?s=128&d=identicon&r=PG&f=1", "display_name": "user2809151", "link": "https://stackoverflow.com/users/2809151/user2809151"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1485967149, "post_id": 41980693, "comment_id": 71147760, "body": "same results with INTER_CUBIC or INTER_LANCZOS4"}], "owner": {"reputation": 23, "user_id": 2809151, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d1aa9ac407d5c98c9528ec0c438dba58?s=128&d=identicon&r=PG&f=1", "display_name": "user2809151", "link": "https://stackoverflow.com/users/2809151/user2809151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 578, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1485954720, "creation_date": 1485954720, "question_id": 41980693, "link": "https://stackoverflow.com/questions/41980693/c-opencv-video-to-panorama", "title": "C++ openCV video to panorama", "body": "<p>I'm trying to create panorama out of a video by stitching frame n-1 with frame n.\nMy problem is that after (around 20 frames) the right side of the picture gets very blurry and I don't know what to do with it.</p>\n\n<p>main:</p>\n\n<pre><code>  frames = getVideoFrames();\n  stichPair(frames[1], frames[0], panorama[0]);\n    for (int i = 2; i &lt; SIZE; i++)\n    {\n        stichPair(frames[i], panorama[i - 2], panorama[i - 1]);\n        printf(\"%d\\n\", i);\n    }\n\n    cvNamedWindow(windowsName1, 1);\n    on_trackbar(index, 0);\n    createTrackbar(\"MyTrackbar:\", windowsName1, &amp;index, SIZE - 2, on_trackbar);\n</code></pre>\n\n<p>stichPair:</p>\n\n<pre><code>Ptr&lt;FeatureDetector&gt; brisk = BRISK::create(20, 3, 1.0f);\n    Ptr&lt;DescriptorMatcher&gt; matcher = BFMatcher::create(\"BruteForce-Hamming\");\n// find features\n    brisk-&gt;detect(leftImage, keypoints_1);\n    brisk-&gt;detect(rightImage, keypoints_2);\n    brisk-&gt;compute(leftImage, keypoints_1, descriptors_1);\n    brisk-&gt;compute(rightImage, keypoints_2, descriptors_2);\n\n    // Find two nearest matches\n    matcher-&gt;knnMatch(descriptors_1, descriptors_2, matches, 2);\n\n    //filter bad matches\n    const float ratio = 0.6;\n    for (int i = 0; i &lt; matches.size(); ++i)\n    {\n        if (matches[i][0].distance / matches[i][1].distance &lt; ratio)\n        {\n            good_matches.push_back(matches[i][0]);\n        }\n    }\n\n    for (size_t i = 0; i &lt; good_matches.size(); i++)\n    {\n        leftImage_matchedKPs.push_back(keypoints_1[good_matches[i].queryIdx].pt);\n        rightImage_matchedKPs.push_back(keypoints_2[good_matches[i].trainIdx].pt);\n    }\n\n    H = findHomography(Mat(rightImage_matchedKPs), Mat(leftImage_matchedKPs), RANSAC, 5);\n    warpPerspective(rightImage, rightImageWarped, H, Size(4000, 1280)); // fixed size\n\n    panorama = rightImageWarped.clone();\n    roi = Mat(panorama, Rect(0, 0, leftImage.cols, leftImage.rows));\n    leftImage.copyTo(roi);\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FiHd9.jpg\" rel=\"nofollow noreferrer\">after 20 frames</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/U7ucU.jpg\" rel=\"nofollow noreferrer\">after 40 frames</a></p>\n"}, {"tags": ["c++", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1486022127, "post_id": 41980681, "comment_id": 71170297, "body": "I think you rather mean all the answers there are relevant, but don&#39;t address your ordering concern. You can find excellent answers regarding that from <a href=\"https://stackoverflow.com/tags/boost-asio/topusers\">Tanner or Sam</a> as I remember. So, if you remove the cross-concern from the question, I think this has been answered"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1486025548, "post_id": 41980681, "comment_id": 71172106, "body": "E.g. look at <a href=\"http://stackoverflow.com/a/19963481/85371\">stackoverflow.com/a/19963481/85371</a>"}, {"owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1486235301, "post_id": 41980681, "comment_id": 71261953, "body": "<a href=\"http://stackoverflow.com/questions/19946555\">stackoverflow.com/questions/19946555</a> suggests to use chaining. This won&#39;t work in my case."}], "owner": {"reputation": 738, "user_id": 1879547, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d08c8785b44c2e795ebed85a2afc7cc4?s=128&d=identicon&r=PG", "display_name": "0x2207", "link": "https://stackoverflow.com/users/1879547/0x2207"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486022388, "creation_date": 1485954676, "last_edit_date": 1486022388, "question_id": 41980681, "link": "https://stackoverflow.com/questions/41980681/boost-asio-async-read-with-timeout", "title": "Boost ASIO: async read with timeout", "body": "<p>I would like to implement simple network protocol. The message is being sent through the socket and the reply is received within timeout milliseconds. The question arises here is how to set order between timeout handler and async_read_until handler. Unfortunately, strands won't help here much:</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_43_0/doc/html/boost_asio/reference/io_service__strand.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_43_0/doc/html/boost_asio/reference/io_service__strand.html</a></p>\n\n<blockquote>\n  <p>Note that in the following case:</p>\n\n<pre><code>async_op_1(..., s.wrap(a));\nasync_op_2(..., s.wrap(b)); \n</code></pre>\n  \n  <p>the completion of the first async operation will perform\n  s.dispatch(a), and the second will perform s.dispatch(b), but the\n  order in which those are performed is unspecified. That is, you cannot\n  state whether one happens-before the other. Therefore none of the\n  above conditions are met and no ordering guarantee is made.</p>\n</blockquote>\n\n<p>Imagine that <code>io_service io</code> is shared between a number of different handlers, operations and so on. Then, between time moments <strong>A</strong> and <strong>B</strong> <code>io.run()</code> will run some handler function which is not relevant to this particular socket operation at all. Then actual data may be received by operating system at time moment <strong>C</strong> which is <strong>A</strong> &lt; <strong>C</strong> &lt; <strong>B</strong>.\nAlso, the timer may be expired at time moment <strong>D</strong> which is <strong>A</strong> &lt; <strong>D</strong> &lt; <strong>B</strong>. Two this events: data reception <strong>C</strong> and timer expiration <strong>D</strong> will be detected when <code>io.run()</code> will finish with the current handler job not earlier than time moment <strong>B</strong>.</p>\n\n<p>What I want is to preserve handler invocation order, i.e. that async_read handler is called before async_wait handler if and only if <strong>C</strong> &lt; <strong>D</strong>.\nOtherwise I could end up with the situation when the data were actually obtained before timeout deadline but discarded as timeouted.</p>\n"}]