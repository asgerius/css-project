[{"tags": ["c++", "malloc", "free"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1519862837, "post_id": 49040528, "comment_id": 85086700, "body": "Maybe you are not freeing anything, but ncurses may be - it looks like some of your code has corrupted some of the malloc/free data structures. For more help, you need to post some code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1519863563, "post_id": 49040528, "comment_id": 85086862, "body": "incorrect checksum often means that either free is looking in the wrong place for its book-keeping structure because the pointer doesn&#39;t point where it should or the book-keeping structure has been smashed by an out-of-bounds access. Check the bounds on any loops you are using and make sure any array indexing math checks out. If possible use <code>at</code> methods over <code>operator[]</code> until you&#39;ve squashed all the bugs because <code>at</code> contains bounds testing. Other than that without code all I can suggest is you make sure you always know where your towel is."}, {"owner": {"reputation": 67, "user_id": 5036481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/323d61010630082385129b1c2b65a8bc?s=128&d=identicon&r=PG&f=1", "display_name": "pr12015", "link": "https://stackoverflow.com/users/5036481/pr12015"}, "edited": false, "score": 0, "creation_date": 1519863809, "post_id": 49040528, "comment_id": 85086922, "body": "@NeilButterworth would it be ok to post github link, since I don&#39;t know what might be causing the error?"}, {"owner": {"reputation": 67, "user_id": 5036481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/323d61010630082385129b1c2b65a8bc?s=128&d=identicon&r=PG&f=1", "display_name": "pr12015", "link": "https://stackoverflow.com/users/5036481/pr12015"}, "edited": false, "score": 0, "creation_date": 1519900293, "post_id": 49040528, "comment_id": 85099640, "body": "@NeilButterworth Added some code. Would you give it another look?"}], "owner": {"reputation": 67, "user_id": 5036481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/323d61010630082385129b1c2b65a8bc?s=128&d=identicon&r=PG&f=1", "display_name": "pr12015", "link": "https://stackoverflow.com/users/5036481/pr12015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519900235, "creation_date": 1519861820, "last_edit_date": 1519900235, "question_id": 49040528, "link": "https://stackoverflow.com/questions/49040528/malloc-error-sigabrt", "title": "malloc error - SIGABRT", "body": "<p>I'm learning ncurses, so I tried to make a simple snake game in c++. When I run it, after few moves I usually get error: </p>\n\n<blockquote>\n  <p>malloc error - incorrect checksum for freed object.</p>\n</blockquote>\n\n<p>What is confusing me is that I don't free any objects explicitly.</p>\n\n<p>I would skip posting the code, because I'm not looking for that kind of help. My problem is I don't really know how to debug it. When I run it in lldb, it doesn't behave no where near as expected.</p>\n\n<p>Could someone give me some directions for solving this problem.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I figured where the error was, but still don't know how to fix it or what causes it.</p>\n\n<p>Error:</p>\n\n<pre><code>void Snake::add_snake_part() {\n  snake_part new_part = {.x = 0, .y = 0};\n  body.push_back(new_part);  // Error was here\n}\n</code></pre>\n\n<p>You can see <code>snake_part</code> is a struct by its initialization. The error seems to be with <code>body.push_back(new_part);</code> </p>\n"}, {"tags": ["c++", "serialization", "cereal"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 3924098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ea80bb5f21ba32a042e8ad39b5cbae12?s=128&d=identicon&r=PG&f=1", "display_name": "Sleepless", "link": "https://stackoverflow.com/users/3924098/sleepless"}, "is_accepted": true, "score": 0, "last_activity_date": 1521090386, "last_edit_date": 1521090386, "creation_date": 1519862134, "answer_id": 49040570, "question_id": 49040438, "link": "https://stackoverflow.com/questions/49040438/c-serialization-with-cereal-error-cereal-does-not-support-serializing-raw-poi/49040570#49040570", "title": "C++ Serialization with Cereal error: Cereal does not support serializing raw pointers", "body": "<p>I forgot that <code>this</code> is a pointer type. I guess in addition to not being able to directly serialize \"dumb\" pointers, you also can't pass them to the output archive.</p>\n\n<p>Passing the serializing object as a value solved it:</p>\n\n<pre><code>void Graph::serializeGraph(Graph a)\n{\n    ofstream ofs(\"b.out\", ofstream::binary);\n    {\n        cereal::BinaryOutputArchive oArchive(ofs);\n        oArchive(a);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3924098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ea80bb5f21ba32a042e8ad39b5cbae12?s=128&d=identicon&r=PG&f=1", "display_name": "Sleepless", "link": "https://stackoverflow.com/users/3924098/sleepless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 49040570, "answer_count": 1, "score": 0, "last_activity_date": 1521090386, "creation_date": 1519861181, "question_id": 49040438, "link": "https://stackoverflow.com/questions/49040438/c-serialization-with-cereal-error-cereal-does-not-support-serializing-raw-poi", "title": "C++ Serialization with Cereal error: Cereal does not support serializing raw pointers", "body": "<p>I'm using the <strong>Cereal</strong> C++ serialization library (<a href=\"https://uscilab.github.io/cereal/index.html\" rel=\"nofollow noreferrer\">https://uscilab.github.io/cereal/index.html</a>) to serialize some data.</p>\n\n<p>The data types that I am trying to serialize mostly include vectors of vectors (e.g.: <code>vector&lt;vector&lt;ushort&gt;&gt;</code>) and basic types (e.g.: <code>uint, vector&lt;string&gt;</code>).</p>\n\n<p>When I compile, I am getting the following error:</p>\n\n<pre><code>src/utils/cereal/types/common.hpp: In instantiation of \u2018void cereal::serialize(Archive&amp;, T*&amp;) [with Archive = cereal::BinaryOutputArchive; T = Graph]\u2019:\nsrc/utils/cereal/cereal.hpp:408:39:   required from \u2018ArchiveType&amp; cereal::OutputArchive&lt;ArchiveType, Flags&gt;::processImpl(const T&amp;) [with T = Graph*; typename cereal::traits::detail::EnableIfHelper&lt;cereal::traits::has_non_member_serialize&lt;T, ArchiveType&gt;::value, (! cereal::traits::has_invalid_output_versioning&lt;T, ArchiveType&gt;::value), (cereal::traits::is_output_serializable&lt;T, ArchiveType&gt;::value &amp;&amp; (cereal::traits::is_specialized_non_member_serialize&lt;T, ArchiveType&gt;::value || (! cereal::traits::is_specialized&lt;T, ArchiveType&gt;::value)))&gt;::type &lt;anonymous&gt; = (cereal::traits::detail::type)0; ArchiveType = cereal::BinaryOutputArchive; unsigned int Flags = 1u]\u2019\nsrc/utils/cereal/cereal.hpp:347:9:   required from \u2018void cereal::OutputArchive&lt;ArchiveType, Flags&gt;::process(T&amp;&amp;) [with T = Graph*; ArchiveType = cereal::BinaryOutputArchive; unsigned int Flags = 1u]\u2019\nsrc/utils/cereal/cereal.hpp:249:9:   required from \u2018ArchiveType&amp; cereal::OutputArchive&lt;ArchiveType, Flags&gt;::operator()(Types&amp;&amp; ...) [with Types = {Graph*}; ArchiveType = cereal::BinaryOutputArchive; unsigned int Flags = 1u]\u2019\nsrc/Graph.cpp:169:22:   required from here\nsrc/utils/cereal/types/common.hpp:114:5: error: static assertion failed: Cereal does not support serializing raw pointers - please use a smart pointer\n     static_assert(cereal::traits::detail::delay_static_assert&lt;T&gt;::value,\n</code></pre>\n\n<p>A Google search leads me to the following page regarding the error: <a href=\"https://uscilab.github.io/cereal/pointers.html\" rel=\"nofollow noreferrer\">https://uscilab.github.io/cereal/pointers.html</a></p>\n\n<p>This page suggests the cause of the error is either from serializing \"dumb\" pointers, or serializing a type with no default constructor.</p>\n\n<p>However, the <code>Graph</code> class that I am serializing has a default constructor <code>Graph()</code>, and I don't think I am serializing any \"dumb\" pointers.</p>\n\n<p>Relevant <code>Graph</code> class code:</p>\n\n<pre><code>    Graph();\n    vector&lt;vector&lt;ushort&gt;&gt; adjacencyList();\n    vector&lt;string&gt; name();\n    unordered_map&lt;string, ushort&gt; unorderedNodeNameMap();\n    uint size;\n\n    friend class cereal::access;\n\n    template&lt;class Archive&gt;\n    void serialize(Archive&amp; archive)\n    {\n        archive(CEREAL_NVP(adjacencyList), CEREAL_NVP(name), CEREAL_NVP(unorderedNodeNameMap), CEREAL_NVP(size);\n    }\n</code></pre>\n\n<p>Serialization:</p>\n\n<pre><code>void Graph::serializeGraph()\n{\n    ofstream ofs(\"b.out\", ofstream::binary);\n    {\n        cereal::BinaryOutputArchive oArchive(ofs);\n        oArchive(this);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "getline"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1519860530, "post_id": 49040336, "comment_id": 85086029, "body": "What do you think happens when you do <code>cin &gt;&gt; input2;</code> ?  Also it is kinda tricky to mix formatted input with getline."}, {"owner": {"reputation": 33, "user_id": 9426231, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kila30", "link": "https://stackoverflow.com/users/9426231/kila30"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1519860592, "post_id": 49040336, "comment_id": 85086045, "body": "@CaptainGiraffe I think of it as <code>input()</code> in Python"}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1519861233, "post_id": 49040336, "comment_id": 85086210, "body": "What is the first line with &quot;1&quot; supposed to signify?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1519861264, "post_id": 49040336, "comment_id": 85086216, "body": "<code>&gt;&gt;</code> reads input until a whitespace character or line break and puts it in the variable provided. If you&#39;re coming from Python, you should get a <a href=\"https://stackoverflow.com/q/388242/9254539\">good book</a> since it&#39;s hard to learn proper C++ from things like online tutorials"}, {"owner": {"reputation": 33, "user_id": 9426231, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kila30", "link": "https://stackoverflow.com/users/9426231/kila30"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1519861475, "post_id": 49040336, "comment_id": 85086289, "body": "@FeiXiang Yeah.. It&#39;s very stressful just by trying to learn online. Thanks for the suggestion though"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1519862048, "post_id": 49040336, "comment_id": 85086447, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10553597/cin-and-getline-skipping-input\">cin and getline skipping input</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1519866313, "post_id": 49040336, "comment_id": 85087518, "body": "@FeiXiang: more importantly, <code>operator&gt;&gt;</code> ignores leading whitespace by default (unless you use <code>std::noskipws</code>), which includes line breaks, THEN it reads data until the next whitespace."}], "answers": [{"tags": [], "owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "is_accepted": true, "score": 1, "last_activity_date": 1519861018, "last_edit_date": 1519861018, "creation_date": 1519860637, "answer_id": 49040362, "question_id": 49040336, "link": "https://stackoverflow.com/questions/49040336/getline-for-the-second-line-and-split-by-space-c/49040362#49040362", "title": "Getline() for the second line and split by space - C++", "body": "<blockquote>\n  <p>cin >> input2;</p>\n</blockquote>\n\n<p>This reads 30. </p>\n\n<blockquote>\n  <p>getline(cin, input2);</p>\n</blockquote>\n\n<p>and this reads the rest of the line. Simply change the line:</p>\n\n<pre><code>cin &gt;&gt; input2;\n</code></pre>\n\n<p>for: </p>\n\n<pre><code>cin.ignore();\n</code></pre>\n\n<p>that way you don't read the first number in the second line and ignore the enter key.</p>\n"}], "owner": {"reputation": 33, "user_id": 9426231, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kila30", "link": "https://stackoverflow.com/users/9426231/kila30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 49040362, "answer_count": 1, "score": 2, "last_activity_date": 1519861018, "creation_date": 1519860426, "last_edit_date": 1519860558, "question_id": 49040336, "link": "https://stackoverflow.com/questions/49040336/getline-for-the-second-line-and-split-by-space-c", "title": "Getline() for the second line and split by space - C++", "body": "<p>I'm trying to solve a problem that requires multiple inputs from the users. I'm used to Python, so the C++ syntax is a bit more complex to me.</p>\n\n<p>What I mean:</p>\n\n<p><strong>Input:</strong></p>\n\n<pre><code>1\n\n30 40 50\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>30 40 50\n</code></pre>\n\n<p>I didn't find a single solution to this and I've been trying to find it all day.</p>\n\n<p>What I've tried:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int input1; cin &gt;&gt; input1;\n    string input2;\n    cin &gt;&gt; input2;\n    getline(cin, input2);\n    cout &lt;&lt; input2;\n}\n</code></pre>\n\n<p>And I don't seem to understand the getline() method properly.\nWhat I get:</p>\n\n<p><strong>Output:</strong></p>\n\n<pre><code> 40 50\n</code></pre>\n\n<p><strong>Expected Output:</strong></p>\n\n<pre><code>30 40 50\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "mfc"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1519860035, "post_id": 49040249, "comment_id": 85085873, "body": "Is there by any chance another error saying that ColorGrid is not defined?"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1519860147, "post_id": 49040249, "comment_id": 85085914, "body": "@immibis or as Visual Studio like to call it for some reason <code>default type int assumed</code> when it doesn&#39;t find a type"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1519860168, "post_id": 49040249, "comment_id": 85085924, "body": "Is that error reported by the compiler or the IntelliSense of the IDE?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1519860240, "post_id": 49040249, "comment_id": 85085944, "body": "Please show the compiler error <b>verbatim</b>, as displayed in the compiler output."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1519860427, "post_id": 49040249, "comment_id": 85085996, "body": "forward declaring <code>ColorGrid</code> is not enough, you need to include the full definition of it if you want to store it by value as a data-member. The compiler needs to know how large it is."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519860494, "post_id": 49040249, "comment_id": 85086021, "body": "My compiler stops dead when it finds that weird varadic argument-like thing sitting near the end of the example. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please?"}, {"owner": {"reputation": 2602, "user_id": 1204749, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c7b2072c6586880fcb1e38a12de55ae?s=128&d=identicon&r=PG", "display_name": "cyber101", "link": "https://stackoverflow.com/users/1204749/cyber101"}, "edited": false, "score": 0, "creation_date": 1519863269, "post_id": 49040249, "comment_id": 85086800, "body": "Here is the verbatim error from compiler &quot;Error\t8\terror C2065: &#39;m_colorGrid&#39; : undeclared identifier\tc:\\users\\ary\\documents\\visual studio 2013\\projects\\tetris\\tetris\\tetrisdoc.h\t36\t1\tTetris &quot;"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1519864114, "post_id": 49040249, "comment_id": 85086992, "body": "@AryanNaim right, and the error before that?"}, {"owner": {"reputation": 2602, "user_id": 1204749, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c7b2072c6586880fcb1e38a12de55ae?s=128&d=identicon&r=PG", "display_name": "cyber101", "link": "https://stackoverflow.com/users/1204749/cyber101"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1519864816, "post_id": 49040249, "comment_id": 85087156, "body": "@IInspectable, I edit the post and added the entire header file &amp; also screenshot of the error."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1519864858, "post_id": 49040249, "comment_id": 85087167, "body": "@AryanNaim if you sort the errors correctly you will see that the <code>missing type secifier</code> errors come before it. It can&#39;t find the definition for  <code>ColorGrid</code>"}, {"owner": {"reputation": 2602, "user_id": 1204749, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c7b2072c6586880fcb1e38a12de55ae?s=128&d=identicon&r=PG", "display_name": "cyber101", "link": "https://stackoverflow.com/users/1204749/cyber101"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1519864871, "post_id": 49040249, "comment_id": 85087175, "body": "@PeterT, there isnt an error before it but the error after it is &quot;Error\t4\terror C2143: syntax error : missing &#39;;&#39; before &#39;*&#39;\tc:\\users\\ary\\documents\\visual studio 2013\\projects\\tetris\\tetris\\tetrisdoc.h\t33\t1\tTetris &quot;"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 2, "creation_date": 1519864927, "post_id": 49040249, "comment_id": 85087199, "body": "@AryanNaim it&#39;s error number 8, there&#39;s 7 before it, you sorted it weirdly alphabetically for the error description, don&#39;t do that"}, {"owner": {"reputation": 2602, "user_id": 1204749, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c7b2072c6586880fcb1e38a12de55ae?s=128&d=identicon&r=PG", "display_name": "cyber101", "link": "https://stackoverflow.com/users/1204749/cyber101"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1519865104, "post_id": 49040249, "comment_id": 85087236, "body": "@PeterT, your right I added #include &quot;ColorGrid.h&quot; by the way how do i sort it correctly, is that the default sort order when you right click? Thanks"}, {"owner": {"reputation": 2602, "user_id": 1204749, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c7b2072c6586880fcb1e38a12de55ae?s=128&d=identicon&r=PG", "display_name": "cyber101", "link": "https://stackoverflow.com/users/1204749/cyber101"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1519865791, "post_id": 49040249, "comment_id": 85087400, "body": "@Peter, thanks for resolving previous issue, Im now getting : &quot;Error\t1\terror LNK2019: unresolved external symbol &quot;public: __thiscall ColorGrid::ColorGrid(void)&quot; (??0ColorGrid@@QAE@XZ) referenced in function &quot;protected: __thiscall CTetrisDoc::CTetrisDoc(void)&quot; (??0CTetrisDoc@@IAE@XZ)\tC:\\Users\\ary\\Documents\\Visual Studio 2013\\Projects\\Tetris\\Tetris\\TetrisDoc.obj\tTetris&quot; Any thoughts?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1519868504, "post_id": 49040249, "comment_id": 85087987, "body": "Looks like you did not define your constructor for ColorGrid"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1519895140, "post_id": 49040249, "comment_id": 85096669, "body": "Don&#39;t just pick a single error and post it. Post <b>all</b> errors. And don&#39;t use the <i>Error List</i>, use the actual compiler output. Besides, a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> needs to be minimal. Don&#39;t just dump everything. A word of warning: If you are struggling with C++ and the compiler at that basic a level, MFC is not something you will understand, or use proficiently."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 1969080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943cb73449eeebda731f6d64d3246540?s=128&d=identicon&r=PG", "display_name": "Manivasakan", "link": "https://stackoverflow.com/users/1969080/manivasakan"}, "is_accepted": true, "score": 0, "last_activity_date": 1519897842, "creation_date": 1519897842, "answer_id": 49046913, "question_id": 49040249, "link": "https://stackoverflow.com/questions/49040249/vc-undeclared-identifier-although-its-declared/49046913#49046913", "title": "vc++ undeclared identifier, although its declared", "body": "<p>Make sure that you have included .h header file of \"ColorGrid\" or added the proper reference.</p>\n"}], "owner": {"reputation": 2602, "user_id": 1204749, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c7b2072c6586880fcb1e38a12de55ae?s=128&d=identicon&r=PG", "display_name": "cyber101", "link": "https://stackoverflow.com/users/1204749/cyber101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 49046913, "answer_count": 1, "score": -1, "last_activity_date": 1519897842, "creation_date": 1519859765, "last_edit_date": 1519864605, "question_id": 49040249, "link": "https://stackoverflow.com/questions/49040249/vc-undeclared-identifier-although-its-declared", "title": "vc++ undeclared identifier, although its declared", "body": "<p>Im getting a undeclared identifier for 'm_colorGrid' in tetrisdoc.h header file, although its declared: </p>\n\n<p>See the code snippet below:</p>\n\n<pre><code>// TetrisDoc.h : interface of the CTetrisDoc class\n//\n\n\n#pragma once\n#include \"Figure.h\"\n\ntypedef CList&lt;int&gt; IntList; \nconst int FIGURE_ARRAY_SIZE = 7; \nclass CTetrisDoc : public CDocument\n{\nprotected: // create from serialization only\n    CTetrisDoc();\n    DECLARE_DYNCREATE(CTetrisDoc)\npublic:\n    virtual ~CTetrisDoc();\n\n\nprivate:\n    ColorGrid m_colorGrid;\n    Figure m_activeFigure, m_nextFigure;\n    int m_iScore;\n    IntList m_scoreList;\n    const CRect NEXT_AREA, SCORE_AREA;\n    static Figure m_figureArray[FIGURE_ARRAY_SIZE];\n\n// Operations\npublic:\n    void SaveScoreList();\n    virtual void Serialize(CArchive&amp; archive);\n    int GetScore() const { return m_iScore; }\n    const IntList* GetScoreList() { return &amp;m_scoreList; }\n    const ColorGrid* GetGrid() \n    { \n        ColorGrid* pm_colorGrid = &amp;m_colorGrid;\n        return pm_colorGrid;\n    }\n    const Figure&amp; GetActiveFigure() { return m_activeFigure; }\n    const Figure&amp; GetNextFigure() { return m_nextFigure; }\n    void LeftArrowKey(); \n    void RightArroyKey(); \n    void UpArrowKey(); \n    void DownArrowKey();\n    BOOL Timer(); \n    void SpaceKey(); \n    enum COLOR {RED=0,BROWN=1,TURQUOISE=2,GREEN=3,BLUE=4,PURPLE=5,YELLOW=6};\n    enum ORIENTATION { NORTH = 0, SOUTH = 1,  EAST = 2, WEST = 3 };\n\n\n// Overrides\npublic:\n    virtual BOOL OnNewDocument();\n#ifdef SHARED_HANDLERS\n    virtual void InitializeSearchContent();\n    virtual void OnDrawThumbnail(CDC&amp; dc, LPRECT lprcBounds);\n#endif // SHARED_HANDLERS\n\n#ifdef _DEBUG\n    virtual void AssertValid() const;\n    virtual void Dump(CDumpContext&amp; dc) const;\n#endif\n\nprotected:\n\n// Generated message map functions\nprotected:\n    DECLARE_MESSAGE_MAP();\n\nprivate:\n    void GameOver(); \n    BOOL NewGame(); \n    int AddScoreToList(); \n    void DeleteFullRows(); \n    BOOL IsRowFull(int iRow);\n    void FlashRow(int iFlashRow);\n    void DeleteRow(int iDeleteRow);\n\n#ifdef SHARED_HANDLERS\n    // Helper function that sets search content for a Search Handler\n    void SetSearchContent(const CString&amp; value);\n#endif // SHARED_HANDLERS\n};\n</code></pre>\n\n<p>Here is the actual error log:</p>\n\n<p>Error   8   error C2065: 'm_colorGrid' : undeclared identifier  c:\\users\\ary\\documents\\visual studio 2013\\projects\\tetris\\tetris\\tetrisdoc.h    36  1   Tetris</p>\n\n<p>Here is the screenshot:\n<a href=\"https://i.stack.imgur.com/MB2zf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MB2zf.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see the  m_colorGrid is declared in the private header above the function. </p>\n"}, {"tags": ["c++", "tcp"], "comments": [{"owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "edited": false, "score": 0, "creation_date": 1519860023, "post_id": 49040198, "comment_id": 85085871, "body": "probably your terminal can not print the character correctly. What terminal do you use?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519860115, "post_id": 49040198, "comment_id": 85085904, "body": "Crom only knows what <code>SendToAll</code> did. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519860193, "post_id": 49040198, "comment_id": 85085934, "body": "Also are you absolutely certain about the encoding of &#39;\u0105&#39;? You could have trashed the later part of a multi-byte character."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4940368"}, "reply_to_user": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "edited": false, "score": 0, "creation_date": 1519861085, "post_id": 49040198, "comment_id": 85086172, "body": "@FrankS101 as you can see on the picture, terminal is printing <code>\u0105</code> correctly. But only if it is sent as a string."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1519861680, "post_id": 49040198, "comment_id": 85086343, "body": "They are both strings, but one string has exactly one character. My suspicion is &#39;\u0105&#39; is larger than one character and you&#39;ve pasted a zero in on top of part of it. Example: <a href=\"https://ideone.com/bPPAfx\" rel=\"nofollow noreferrer\">ideone.com/bPPAfx</a> should output 2 unless a multibyte character came into play"}, {"owner": {"reputation": 127, "user_id": 1917070, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c134d88feb4d69b18da7dde6904ed358?s=128&d=identicon&r=PG", "display_name": "msk", "link": "https://stackoverflow.com/users/1917070/msk"}, "edited": false, "score": 0, "creation_date": 1519890252, "post_id": 49040198, "comment_id": 85094288, "body": "Doest <code>SendToAll</code> support <code>wstring</code> as well? If so, you can use <code>wstring</code> together with <code>wchar_t*</code> pointer because this character is two bytes (0x0105) character."}], "owner": {"user_type": "does_not_exist", "display_name": "user4940368"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519859397, "creation_date": 1519859397, "question_id": 49040198, "link": "https://stackoverflow.com/questions/49040198/get-first-char-from-string-error-with-latin-character", "title": "Get first char from string - error with latin character", "body": "<p>I have a problem while sending latin character from TCP server to a client. </p>\n\n<p>Short example:</p>\n\n<pre><code>string temp = \"\u0105szcz\";\nSendToAll(temp); //clients reveices \u0105szcz\n\n// get first char\nchar* chr = &amp;temp.at(0);\nchr[0+1] = NULL;\nstring firstChar(chr);\n\nSendToAll(firstChar); //clients receives ?\n</code></pre>\n\n<p>This is how exactly it looks in terminal:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0Ppu6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Ppu6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can you tell me what is wrong there?</p>\n"}, {"tags": ["c++", "opencv", "optimization", "makefile"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1519859412, "post_id": 49040139, "comment_id": 85085670, "body": "Haven&#39;t looked at the documentation for <code>setFunction</code>, but five bucks says you want an instance of <code>Rosenbrock</code>, not the class, at <code>solver-&gt;setFunction(Rosenbrock);</code>."}, {"owner": {"reputation": 61, "user_id": 5966336, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208205080182716/picture?type=large", "display_name": "Pavel Sedl&#225;\u0159", "link": "https://stackoverflow.com/users/5966336/pavel-sedl%c3%a1%c5%99"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519860489, "post_id": 49040139, "comment_id": 85086018, "body": "looks like adding lin Rosenbrock* pokus = new Rosenbrock(); work man, thanks ;-) but there is still one error: /usr/local/include/opencv2/core/ptr.inl.hpp:301:26: error: invalid new-expression of abstract class type \u2018cv::ConjGradSolver\u2019      return Ptr&lt;T&gt;(new T()); any idea? maybe i wrote line wrong but i dont think so."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519860739, "post_id": 49040139, "comment_id": 85086078, "body": "No clue on the second one, I&#39;m afraid. Not familiar enough with opencv. See if you can get by with <code>Rosenbrock pokus; solver-&gt;setFunction(&amp;pokus);</code>. Less manual memory management dropped in your lap."}, {"owner": {"reputation": 61, "user_id": 5966336, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208205080182716/picture?type=large", "display_name": "Pavel Sedl&#225;\u0159", "link": "https://stackoverflow.com/users/5966336/pavel-sedl%c3%a1%c5%99"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519861227, "post_id": 49040139, "comment_id": 85086208, "body": "Still some errors, anyway thanks for advices man. ;)"}, {"owner": {"reputation": 61, "user_id": 5966336, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208205080182716/picture?type=large", "display_name": "Pavel Sedl&#225;\u0159", "link": "https://stackoverflow.com/users/5966336/pavel-sedl%c3%a1%c5%99"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519862202, "post_id": 49040139, "comment_id": 85086509, "body": "I got it man:  I added these lines     Ptr&lt;ConjGradSolver::Function&gt; pokus(new   Rosenbrock());     Ptr&lt;ConjGradSolver&gt; solver = ConjGradSolver::create();     solver-&gt;setFunction(pokus);  Time to find solution for about +- 100k parameters. :D And again thanks for help. I apprechiate it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519862576, "post_id": 49040139, "comment_id": 85086619, "body": "Might be worth writing up a formal answer to help other folks who need to recreate what you&#39;ve figured out."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 5966336, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208205080182716/picture?type=large", "display_name": "Pavel Sedl&#225;\u0159", "link": "https://stackoverflow.com/users/5966336/pavel-sedl%c3%a1%c5%99"}, "is_accepted": false, "score": 0, "last_activity_date": 1519864950, "creation_date": 1519864950, "answer_id": 49040949, "question_id": 49040139, "link": "https://stackoverflow.com/questions/49040139/opencv-solver-c-function-optimization/49040949#49040949", "title": "opencv solver c++ function optimization", "body": "<p>Now its working. I inspired by code in this link:\n<a href=\"https://github.com/opencv/opencv/blob/master/modules/core/test/test_conjugate_gradient.cpp#L107\" rel=\"nofollow noreferrer\">https://github.com/opencv/opencv/blob/master/modules/core/test/test_conjugate_gradient.cpp#L107</a>\nI replaced \n    <code>Ptr&lt;ConjGradSolver&gt; solver = makePtr&lt;ConjGradSolver&gt;();\nsolver-&gt;setFunction(Rosenbrock);</code></p>\n\n<p>with </p>\n\n<p><code>Ptr&lt;ConjGradSolver::Function&gt; pokus(new Rosenbrock()); \nPtr&lt;ConjGradSolver&gt; solver = ConjGradSolver::create(); solver-&gt;setFunction(pokus);</code></p>\n"}], "owner": {"reputation": 61, "user_id": 5966336, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208205080182716/picture?type=large", "display_name": "Pavel Sedl&#225;\u0159", "link": "https://stackoverflow.com/users/5966336/pavel-sedl%c3%a1%c5%99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519864950, "creation_date": 1519859098, "question_id": 49040139, "link": "https://stackoverflow.com/questions/49040139/opencv-solver-c-function-optimization", "title": "opencv solver c++ function optimization", "body": "<p>i am new in opencv optimization and i make simple example of using conjugate gradient solver like this:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace cv;\nusing namespace std;\n\nclass Rosenbrock: public MinProblemSolver::Function {\n    int getDims() const {\n        return 2;\n    };\n    double calc(const double* x) const {\n        return 100*(x[1] - x[0]*x[0])*(x[1]-x[0]*x[0]) + (1 - x[0])*(1-x[0]);\n    }\n};\n\nint main(int argc, char** argv) {\n    Ptr&lt;ConjGradSolver&gt; solver = makePtr&lt;ConjGradSolver&gt;();\n    solver-&gt;setFunction(Rosenbrock);\n    Mat x = (Mat_&lt;double&gt;(2, 1) &lt;&lt; 0.0, 0.0);\n    double fval = solver-&gt;minimize(x);\n    std::cout &lt;&lt; fval &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>with this makefile</p>\n\n<pre><code>CC = g++\nCFLAGS = -g -Wall\nSRCS = HelloWorld.cpp\nPROG = HelloWorld\n\nOPENCV = `pkg-config opencv --cflags --libs`\nLIBS = $(OPENCV)\n\n$(PROG):$(SRCS)\n    $(CC) $(CFLAGS) -o $(PROG) $(SRCS) $(LIBS)\n</code></pre>\n\n<p>but when i am trying to compile, it will appears errors:</p>\n\n<pre><code>g++ -g -Wall -o HelloWorld HelloWorld.cpp `pkg-config opencv --cflags --libs`\nHelloWorld.cpp: In function \u2018int main(int, char**)\u2019:\nHelloWorld.cpp:17:35: error: expected primary-expression before \u2018)\u2019 token\n     solver-&gt;setFunction(Rosenbrock);\n                                   ^\nHelloWorld.cpp:19:12: warning: unused variable \u2018fval\u2019 [-Wunused-variable]\n     double fval = solver-&gt;minimize(x);\n            ^\nIn file included from /usr/local/include/opencv2/core/cvstd.hpp:1037:0,\n                 from /usr/local/include/opencv2/core/base.hpp:58,\n                 from /usr/local/include/opencv2/core.hpp:54,\n                 from /usr/local/include/opencv2/opencv.hpp:52,\n                 from HelloWorld.cpp:1:\n/usr/local/include/opencv2/core/ptr.inl.hpp: In instantiation of     \u2018cv::Ptr&lt;T&gt; cv::makePtr() [with T = cv::ConjGradSolver]\u2019:\nHelloWorld.cpp:16:58:   required from here\n/usr/local/include/opencv2/core/ptr.inl.hpp:301:26: error: invalid new-    expression of abstract class type \u2018cv::ConjGradSolver\u2019\n     return Ptr&lt;T&gt;(new T());\n                          ^\nIn file included from /usr/local/include/opencv2/core.hpp:3225:0,\n                 from /usr/local/include/opencv2/opencv.hpp:52,\n                 from HelloWorld.cpp:1:\n</code></pre>\n\n<p>I will be gratefull for any advice,\nsincerely,\nPaul.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1519858983, "post_id": 49040047, "comment_id": 85085528, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24298144/duplicate-symbols-for-architecture-x86-64-under-xcode\">Duplicate symbols for architecture x86_64 under Xcode</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1519859070, "post_id": 49040047, "comment_id": 85085567, "body": "Don&#39;t include cpp files. Include the associated header (usually a .h file) and compile and link the cpp file."}], "answers": [{"tags": [], "owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "is_accepted": false, "score": 0, "last_activity_date": 1519858891, "creation_date": 1519858891, "answer_id": 49040101, "question_id": 49040047, "link": "https://stackoverflow.com/questions/49040047/ld-1-duplicate-symbol-for-architecture-x86-64-in-xcode/49040101#49040101", "title": "ld: 1 duplicate symbol for architecture x86_64 in Xcode", "body": "<p>Looks like you're compiling Classes.cpp twice: once when your main <code>include</code>s it, and once independently.  If you look at your link error, you can see two object files (<code>Classes.o</code> and <code>main.o</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 2, "last_activity_date": 1519859343, "creation_date": 1519859343, "answer_id": 49040185, "question_id": 49040047, "link": "https://stackoverflow.com/questions/49040047/ld-1-duplicate-symbol-for-architecture-x86-64-in-xcode/49040185#49040185", "title": "ld: 1 duplicate symbol for architecture x86_64 in Xcode", "body": "<p>Look at the error message. Actually read it. </p>\n\n<p>You have a duplicate symbol. Which duplicate symbol is it? </p>\n\n<p>The duplicate symbol is found in two files. Which two files is it found in? </p>\n\n<p>You told the linker to link two source files, which each contain directly or by inclusion the same function Student::addStudent.</p>\n"}], "owner": {"reputation": 51, "user_id": 9331866, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c1a11926866ec731ba0e5a8e477da8c0?s=128&d=identicon&r=PG&f=1", "display_name": "Devin Tripp", "link": "https://stackoverflow.com/users/9331866/devin-tripp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1848, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1555595321, "creation_date": 1519858642, "question_id": 49040047, "link": "https://stackoverflow.com/questions/49040047/ld-1-duplicate-symbol-for-architecture-x86-64-in-xcode", "title": "ld: 1 duplicate symbol for architecture x86_64 in Xcode", "body": "<p>I have been cracking my head over this one. I've searched all over and all I seem to find are issues with the same error messages but involving either building complete iphone apps or dealing with header files, all sorts of stuff.</p>\n\n<p>I was just writing a simple C++ program, I wanted all the classes in one file because i'm to lazy. Not sure if that is the issue. This is for a very simple college assignment, but I can't keep working because Xcode gives me this error that has nothing to do with the actual code (based on what I've read). I haven't messed with anything other than the actual .cpp file, I don't even know how I could've messed this up. I've done multiple assignments the same way and have never run into this issue before.</p>\n\n<pre><code>//\n//  Devin Shawn Tripp\n//  Student ID: 11199100\n//  CSCE 1040!\n//  Hw2\n//\n//  Created by Devin Tripp on 2/26/18.\n//  Copyright \u00a9 2018 Devin Tripp. All rights reserved.\n//\n\n\n\n// 6 classes - main is not a class\n\n\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string&gt;\n#include \"Classes.cpp\"\nusing namespace std;\n\n\n\nint main(int argc, const char * argv[]) {\n    /* Declare Variables */\n    //Students stud;\n    int choice = 0;\n\n\n\n    /* Create Menu */\n    while (choice != 4) {\n        printf(\"What do you want to do: \\n\");\n        printf(\"1: Add new Course \\n2: Add New Student \\n3: Add Enrollment \\n4: Quit \\n\");\n\n        cin &gt;&gt; choice;\n\n\n        switch (choice) {\n            case 1:\n                //do something\n                // inventory.additem();\n                break;\n            case 2:\n                //do something\n                //stud.addStudent();\n                break;\n            case 3:\n                //do something\n                // sales.addOrder();\n                break;\n            case 4:\n                //do something\n                exit(0);\n                break;\n\n\n            default:\n                break;\n        }\n\n\n\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The file below obviously holds all of the classes that will be used in the main.cpp.</p>\n\n<pre><code>//\n//  Classes.cpp\n//  Hw2\n//\n//  Created by Devin Tripp on 2/28/18.\n//  Copyright \u00a9 2018 Devin Tripp. All rights reserved.\n//\n\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string&gt;\n#include \"Classes.hpp\"\nusing namespace std;\n\n#define CHUNKSIZE 2\n\n\n\nclass Courses {\npublic:\nprivate:\n\n};\n\nclass Student {\npublic:\n    void setId(int id) { stud_id = id;}\n    int getId() { return stud_id;}\n    void setName(string na) { name = na; }\n    string getName() { return name;}\nprivate:\n    int stud_id;\n    string name;\n};\n\n\nclass Students {\npublic:\n    Students() {stud_cnt = 0; stud_cap = CHUNKSIZE; studs = new Student[CHUNKSIZE];}\n    ~Students() { delete [] studs;}\n    void addStudent();\nprivate:\n    int stud_cnt;\n    int stud_cap;\n    Student *studs;\n\n\n};\n\nvoid Students::addStudent() {\n    int id;\n    string temp;\n\n    if (stud_cnt == stud_cap) {\n        Student *temp;\n        temp = new Student[stud_cap + CHUNKSIZE];\n        for (int i = 0;i &lt; stud_cnt; i++) {\n            temp[i] = studs[i];\n        }\n\n        delete [] studs;\n        stud_cap += CHUNKSIZE;\n        studs = temp;\n\n    }\n\n    printf(\"Enter a new student ID: \");\n    cin &gt;&gt; id; cin.ignore();\n    printf(\"Enter Name: \");\n    cin &gt;&gt; temp; cin.ignore();\n    cout &lt;&lt; \" Got data \" &lt;&lt; temp &lt;&lt; endl;\n\n    studs[stud_cnt].setId(id); cout &lt;&lt; \"Set ID\" &lt;&lt; endl;\n    studs[stud_cnt].setName(temp); cout &lt;&lt; \"Set Name\" &lt;&lt; endl;\n    stud_cnt += 1; cout &lt;&lt; \"inc stud count\" &lt;&lt; endl;\n\n\n\n\n}\n</code></pre>\n\n<p>I didn't use the header file although I think prob should that might be the issue because I don't declare the classes in there. Which I think that you are suppose to do.</p>\n\n<p>here is the error message that I am receiving.</p>\n\n<pre><code>Ld /Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Products/Debug/Hw2 normal x86_64\n    cd \"/Users/devintripp/Desktop/swift projects/Hw2\"\n    export MACOSX_DEPLOYMENT_TARGET=10.13\n    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -L/Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Products/Debug -F/Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Products/Debug -filelist /Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Intermediates.noindex/Hw2.build/Debug/Hw2.build/Objects-normal/x86_64/Hw2.LinkFileList -mmacosx-version-min=10.13 -Xlinker -object_path_lto -Xlinker /Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Intermediates.noindex/Hw2.build/Debug/Hw2.build/Objects-normal/x86_64/Hw2_lto.o -Xlinker -export_dynamic -Xlinker -no_deduplicate -stdlib=libc++ -Xlinker -dependency_info -Xlinker /Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Intermediates.noindex/Hw2.build/Debug/Hw2.build/Objects-normal/x86_64/Hw2_dependency_info.dat -o /Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Products/Debug/Hw2\n\nduplicate symbol __ZN8Students10addStudentEv in:\n    /Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Intermediates.noindex/Hw2.build/Debug/Hw2.build/Objects-normal/x86_64/Classes.o\n    /Users/devintripp/Library/Developer/Xcode/DerivedData/Hw2-dpzrwrfmzkaytqajxohtoaipzmkh/Build/Intermediates.noindex/Hw2.build/Debug/Hw2.build/Objects-normal/x86_64/main.o\nld: 1 duplicate symbol for architecture x86_64\n</code></pre>\n"}, {"tags": ["c++", "boost", "point-cloud-library", "msvc12"], "comments": [{"owner": {"reputation": 811, "user_id": 4254191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1611eeb6d9dc84bdcc477dfa893714b?s=128&d=identicon&r=PG&f=1", "display_name": "Javanator", "link": "https://stackoverflow.com/users/4254191/javanator"}, "edited": false, "score": 1, "creation_date": 1520563599, "post_id": 49040008, "comment_id": 85377208, "body": "I ran into this just now, but I wasn&#39;t working with PCL, just boost. The problem was that I just installed vs2017, but went back to vs2015. Apparently the vs2017 installer messes with the vs2015 installation, so I had to uninstall vs2017 and repair vs2015. After that the error went away. I hope this helps."}, {"owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "reply_to_user": {"reputation": 811, "user_id": 4254191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1611eeb6d9dc84bdcc477dfa893714b?s=128&d=identicon&r=PG&f=1", "display_name": "Javanator", "link": "https://stackoverflow.com/users/4254191/javanator"}, "edited": false, "score": 0, "creation_date": 1520604805, "post_id": 49040008, "comment_id": 85396067, "body": "hmm, that does probably help actually.  I&#39;ve taken a break from that build this week, but next week when I have to go back to it, I&#39;m going to try on another (fresh) Windows computer with msvc.  Thanks!"}, {"owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "reply_to_user": {"reputation": 811, "user_id": 4254191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1611eeb6d9dc84bdcc477dfa893714b?s=128&d=identicon&r=PG&f=1", "display_name": "Javanator", "link": "https://stackoverflow.com/users/4254191/javanator"}, "edited": false, "score": 0, "creation_date": 1521475004, "post_id": 49040008, "comment_id": 85735161, "body": "I don&#39;t think anything really changed.. But after taking a break on this for a week, this bug seemed to have disappeared.  The only thing I might have changed (so much back and forth that it was hard to keep track) was being more explicit with the C++11 flag.  But I really have no useful comments for anyone else fighting this issue. :("}], "answers": [{"comments": [{"owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "edited": false, "score": 0, "creation_date": 1520793733, "post_id": 49207074, "comment_id": 85450832, "body": "About the <code>.so</code>, you&#39;re totally right.  I did <i>edit</i> the command (to make it more readable) before posting, but it was copied.. I completely missed that, is definitely should be the <code>.lib</code>s that exist there.  I&#39;ll try make that fix asap.  Thanks."}], "tags": [], "owner": {"reputation": 86, "user_id": 9458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BV65X.jpg?s=128&g=1", "display_name": "S&#233;rgio Agostinho", "link": "https://stackoverflow.com/users/9458162/s%c3%a9rgio-agostinho"}, "is_accepted": false, "score": 0, "last_activity_date": 1520671077, "creation_date": 1520671077, "answer_id": 49207074, "question_id": 49040008, "link": "https://stackoverflow.com/questions/49040008/pcl-build-with-issue-with-boostthrow-exception/49207074#49207074", "title": "PCL build with issue with boost::throw_exception", "body": "<p><code>TPN_WIN32</code> is a user defined variable on that post you reference. You need to append <code>/EHsc</code> to your <code>CMAKE_CXX_FLAGS</code> to pass it to the compiler.</p>\n\n<p>Unrelated but really suspicious <code>-DFLANN_LIBRARY:FILEPATH=%CONAN_FLANN%\\lib\\libflann_cpp.so</code> is a unix dynamic library. You can't link it on windows with MSVC.</p>\n"}], "owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520671077, "creation_date": 1519858436, "question_id": 49040008, "link": "https://stackoverflow.com/questions/49040008/pcl-build-with-issue-with-boostthrow-exception", "title": "PCL build with issue with boost::throw_exception", "body": "<p>How can I get around missing <code>boost::throw_exception</code> while building PCL?</p>\n\n<p>I've built PCL on Windows (MSVC 2013) a few times in the past, but I've never see this error.  It's been blocking me all today and yesterday:</p>\n\n<pre><code>LNK2019: unresolved external symbol \"void __cdecl boost::throw_exception(class std::exception const &amp;)\" (?throw_exception@boost@@YAXAEBVexception@std@@@Z) referenced in function \"public: __cdecl boost::detail::shared_count::shared_count&lt;struct pcl::io::ply::ply_parser::list_property&lt;unsigned char,signed char&gt; &gt;(struct pcl::io::ply::ply_parser::list_property&lt;unsigned char,signed char&gt; *)\" (??$?0U?$list_property@EC@ply_parser@ply@io@pcl@@@shared_count@detail@boost@@QEAA@PEAU?$list_property@EC@ply_parser@ply@io@pcl@@@Z) [C:\\Users\\mrussell\\.conan\\data\\pcl\\1.7.2\\ntc\\stable\\build\\d63ff451cbfa147e3b952f2f3790530e1116d93c\\io\\pcl_io_ply.vcxproj]\n</code></pre>\n\n<p>It appears that <code>BOOST_NO_EXCEPTIONS</code> is set in <code>boost\\config\\compiler\\visualc.hpp</code>, which prevents <code>boost/throw_exception.hpp</code> from defining it.</p>\n\n<p>I've tried to set <code>TPN_WIN32</code> to <code>/EHsc</code> (see <a href=\"https://stackoverflow.com/a/6847817/1861346\">this answer</a>) both through CMake and via the project properties in Visual Studio to no avail, and even tried sneaking a definition into a high level PCL include (see <a href=\"https://stackoverflow.com/a/33691561/1861346\">this answer</a>), nothing worked.</p>\n\n<p>My CMake generator is <code>Visual Studio 12 2013 Win64</code> and my definitions are:</p>\n\n<pre><code>-DBOOST_ROOT:PATH=%CONAN_BOOST%\n-DCMAKE_INSTALL_PREFIX=%CONAN_PCL%\n-DEIGEN3_DIR:PATH=%CONAN_EIGEN%\\share\\eigen3\\cmake\n-DEIGEN_INCLUDE_DIR:PATH=%CONAN_EIGEN%\\include\\eigen3\n-DFLANN_INCLUDE_DIR:PATH=%CONAN_FLANN%\\include\n-DFLANN_LIBRARY:FILEPATH=%CONAN_FLANN%\\lib\\libflann_cpp.so\n-DQHULL_INCLUDE_DIR:PATH=%CONAN_QHULL%\\include\n-DQHULL_LIBRARY:FILEPATH=%CONAN_QHULL%\\lib\\libqhull.so\n-DGTEST_ROOT:PATH=%CONAN_GTEST%\n-DBUILD_surface_on_nurbs:BOOL=ON\n</code></pre>\n\n<p>I've tried:</p>\n\n<ul>\n<li>Removing Qt &amp; VTK</li>\n<li>With Boost 1.60, 1.66, and 1.59</li>\n<li>Linking against a shared and static versions of boost. (PCL does not seem to like shared boost on Windows...)</li>\n<li>Attempting to build shared and static versions of PCL</li>\n</ul>\n\n<p>I feel like I'm chasing the wrong thing, or am missing something.  Maybe I'm missing a <code>_CPPUNWIND</code> <a href=\"https://msdn.microsoft.com/en-us/library/b0084kay(v=vs.120).aspx\" rel=\"nofollow noreferrer\">define for exceptions</a>?  I'm really just stuck.</p>\n"}, {"tags": ["c++", "bit-fields"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1519858457, "post_id": 49039998, "comment_id": 85085335, "body": "<code>identityFieldO2M</code> is not defined in the code you posted. Obviously it does not admit being assigned an <code>int</code>.  Please post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 0, "creation_date": 1519858990, "post_id": 49039998, "comment_id": 85085532, "body": "Post your bitfield definitions. We can&#39;t help you without at least that."}, {"owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519859214, "post_id": 49039998, "comment_id": 85085613, "body": "Sorry!  I have updated and posted both bitfield definitions.  I noticed even when attempting to pass the (currently static) hex value of 828a0a0  this is also giving errors related to sizing.  e.g. b= {828a0a0}; gives the error: narrowing conversion of &#39;136880288&#39; from &#39;int&#39; to &#39;unsigned char&#39; inside { }"}, {"owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519859720, "post_id": 49039998, "comment_id": 85085771, "body": "I&#39;ve tried casting in few different ways as well, and why I cannot just set it statically as a hex value I am not entirely sure since I did that before.  Maybe it has something to do with the hex value I am attempting to set being 29 bits whereas 0xA0 being 8 bits?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1519859735, "post_id": 49039998, "comment_id": 85085777, "body": "I expect your problem is that you have not defined any match for &#39;operator=&#39; (operand types are &#39;identityFieldO2M&#39; and &#39;int&#39;)"}, {"owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519861453, "post_id": 49039998, "comment_id": 85086281, "body": "I&#39;ve added the operator= that is defined in the BitFieldMember template I am using.  I think this may be the source of the problem?  For ease, i&#39;ve also put in a full set of the source code here: <a href=\"https://gist.github.com/anonymous/811851028d1fe73e6779ca25ad31c05d\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/811851028d1fe73e6779ca25ad31c05d</a> Thanks for help in advance."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519862194, "post_id": 49040493, "comment_id": 85086505, "body": "Thanks Justin! one issue, however, when checking the output this doesn&#39;t match what I expect: 0 0 0 0 0 2 4  where i was expecting: 1 145 0 0 0 14 0  If I just try a simple array seperating 0x0828a0a0 into instead { 0x41, 0x45, 0x05, 0x00 }; this will compile and the result is what I expect, but I am not sure how I can set the array to look like this?"}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "reply_to_user": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519862340, "post_id": 49040493, "comment_id": 85086550, "body": "@SamJ So then either there is something wrong with your bitfield definitions or the integer you are trying to populate it from."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "reply_to_user": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519862546, "post_id": 49040493, "comment_id": 85086607, "body": "@SamJ huh?  In network byte order (big endian) <code>int foo = 0x0828a0a0;</code> then the &quot;equivalent&quot; <code>unsigned char foo[4] = { 0x08, 0x28, 0xa0, 0xa0 };</code> so where in the world are you getting <code>{ 0x41, 0x45, 0x05, 0x00 };</code> from?"}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "reply_to_user": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519862965, "post_id": 49040493, "comment_id": 85086727, "body": "@SamJ If you want <code>identityFieldO2M b;</code> to be that value, then just set it to what you want. <code>b = { 0x41, 0x45, 0x05, 0x00 };</code> Just like you did with <code>a</code> in the previous example."}, {"owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519864950, "post_id": 49040493, "comment_id": 85087209, "body": "I understand, I think I was getting confused as there are as the amount of bits being represented by 0x08, 0x28, 0xa0, 0xa0 is 26 where I was expecting 29 bits <code>&#47;&#47;  01 0000 0101 0001 01 0 0 0 0010100 000  &#47;&#47;    1 000     101 0001 01 0 0 0 0010100 000</code>  (showing expected on top, result on bottom).  Is there anyway to preserve the leading and trailing 0s?  Apologies if this is a dumb question.  I cannot use the array of static hex values as this will be dynamically generated eventually and it will have all those padded 0&#39;s, only using it currently for testing."}, {"owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519865433, "post_id": 49040493, "comment_id": 85087305, "body": "Sorry to explain the intention, a 64 to 128 bit frame is being sent to me which I am parsing in the first struct.  I am taking two fields of that strut, 11 and 18 bits in length, to combine them into a 29 bit field which has a definition of subfields within it.  In real time, when I am actually going to pass it live data being read, that field is going to be 29 bits long with padded 0&#39;s.  I am only using the static hex values at the current time to test that I can map those 29 bits into the proper bitfield members for further use.  So 828a0a0 is just an example of 29 bits I am using to test."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "reply_to_user": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519867394, "post_id": 49040493, "comment_id": 85087746, "body": "@SamJ like I said before, if you\u2019re getting something that you don\u2019t expect (missing bits in this case) then either your computed integer value or your bitfield definitions themselves are wrong.  It looks close but those missing zeros cannot be explained by a simple shifting error alone.  Keep at it."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "reply_to_user": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519867781, "post_id": 49040493, "comment_id": 85087817, "body": "@SamJ Keep in mind that an integer is 32 bits in this case, and if you only care about 29 of them, then that means 3 of them are \u201cspare\u201d. If all \u201cspare\u201d bits come at the beginning or end, then it\u2019s easy to shift them off if needed. If they are sprinkled about in between bitfields you care about, then they must be accounted for and defined as one or more BitFieldMembers in your union."}], "tags": [], "owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "is_accepted": true, "score": 0, "last_activity_date": 1519861553, "creation_date": 1519861553, "answer_id": 49040493, "question_id": 49039998, "link": "https://stackoverflow.com/questions/49039998/c-unable-to-set-type-int-to-non-scalar-after-bitwise-functions/49040493#49040493", "title": "C++: Unable to set type int to non-scalar after bitwise functions", "body": "<p>According to your bitfield definition, you need to use an <code>unsigned char[5]</code> and it's expecting big endian values (from following the link to where you got this code). You cannot assign it to an <code>int</code> as you have seen from your compiler error. One option is to copy your <code>int</code> value into your big endian <code>b.arr</code> through bit shifting. Something like this should do it.</p>\n\n<pre><code>int result = 0x0828a0a0;\nidentityFieldO2M b;\n\nb.arr[0] = (result &gt;&gt; 24) &amp; 0xFF; // 0x08\nb.arr[1] = (result &gt;&gt; 16) &amp; 0xFF; // 0x28\nb.arr[2] = (result &gt;&gt; 8) &amp; 0xFF;  // 0xa0\nb.arr[3] = result &amp; 0xFF;         // 0xa0\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49040493, "answer_count": 1, "score": -1, "last_activity_date": 1519861553, "creation_date": 1519858370, "last_edit_date": 1519860811, "question_id": 49039998, "link": "https://stackoverflow.com/questions/49039998/c-unable-to-set-type-int-to-non-scalar-after-bitwise-functions", "title": "C++: Unable to set type int to non-scalar after bitwise functions", "body": "<p>I have two bitfields: (1) one to handle the frame (header), (2) the other to handle a subframe within a frame (identityFieldO2M). </p>\n\n<pre><code>union header\n{\n    unsigned char arr[16]; // 128 bytes allocated\n\n    BitFieldMember&lt;0, 1&gt; SOF;\n    BitFieldMember&lt;1, 11&gt; BID;\n    BitFieldMember&lt;12, 1&gt; SRR;\n    BitFieldMember&lt;13, 1&gt; IDE;\n    BitFieldMember&lt;14, 18&gt; IDEX;\n    BitFieldMember&lt;32, 1&gt; RTR;\n    BitFieldMember&lt;33, 1&gt; r1;\n    BitFieldMember&lt;34, 1&gt; r0;\n    BitFieldMember&lt;35, 4&gt; DLC;\n    BitFieldMember&lt;39, 8&gt; DataField1;\n    BitFieldMember&lt;47, 15&gt; CRC;\n    BitFieldMember&lt;62, 1&gt; CRCDelim;\n    BitFieldMember&lt;63, 1&gt; ACKSlot;\n    BitFieldMember&lt;64, 1&gt; ACKdelim;\n    BitFieldMember&lt;65, 7&gt; eof;\n};\n\nunion identityFieldO2M\n{\n    unsigned char arr[5]; // 3 bytes allocated though only need 29 bits\n\n    BitFieldMember&lt;0, 2&gt; RCI;\n    BitFieldMember&lt;2, 14&gt; DOC;\n    BitFieldMember&lt;16, 1&gt; PVT;\n    BitFieldMember&lt;17, 1&gt; LCL;\n    BitFieldMember&lt;18, 1&gt; FSB;\n    BitFieldMember&lt;19, 7&gt; SourceFID;\n    BitFieldMember&lt;26, 3&gt; LCC;\n};\n</code></pre>\n\n<p>I need to process first the first bitfield and from there I am combining two members of this bitfield and then running their combined output into another bitfield to determine subframes.  The issue I have it, however, is when I do the bitwise function to combine the two bitfields, I am not able to pass this data back into the bitfield.</p>\n\n<p>I think I am doing something \"duh\" wrong but I am not able to figure this out.  Below is my implementation:</p>\n\n<pre><code>    int main()\n    {\n    header a;\n    memset(a.arr, 0, sizeof(a.arr));\n    a = {0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0}; // 1010 0000\n\n    cout &lt;&lt; hex &lt;&lt; a.SOF &lt;&lt; endl; // 1 -&gt; 1\n    cout &lt;&lt; hex &lt;&lt; a.BID &lt;&lt; endl; // 010 0000 1010 -&gt; 20a\n    cout &lt;&lt; hex &lt;&lt; a.SRR &lt;&lt; endl; // 0 -&gt; 0\n    cout &lt;&lt; hex &lt;&lt; a.IDE &lt;&lt; endl; // 0 -&gt; 0\n    cout &lt;&lt; hex &lt;&lt; a.IDEX &lt;&lt; endl; // 00 1010 0000 1010 0000 -&gt; a0a0\n    cout &lt;&lt; hex &lt;&lt; a.RTR &lt;&lt; endl; // 1 -&gt; 1\n    cout &lt;&lt; hex &lt;&lt; a.r1 &lt;&lt; endl; // 0 -&gt; 0\n    cout &lt;&lt; hex &lt;&lt; a.r0 &lt;&lt; endl; // 1 -&gt; 1\n    cout &lt;&lt; hex &lt;&lt; a.DLC &lt;&lt; endl; // 0 000 -&gt; 0\n    cout &lt;&lt; hex &lt;&lt; a.DataField1 &lt;&lt; endl; // 0 1010 000 -&gt; 50\n    cout &lt;&lt; hex &lt;&lt; a.CRC &lt;&lt; endl; // 0 1010 0000 1010 00 -&gt; 2828\n    cout &lt;&lt; hex &lt;&lt; a.CRCDelim &lt;&lt; endl; // 0 -&gt; 0\n    cout &lt;&lt; hex &lt;&lt; a.ACKSlot &lt;&lt; endl; // 0 -&gt; 0\n    cout &lt;&lt; hex &lt;&lt; a.ACKdelim &lt;&lt; endl; // 1 -&gt; 1\n    cout &lt;&lt; hex &lt;&lt; a.eof &lt;&lt; endl; // 010 0000 -&gt; 20\n\n    int BID = a.BID;\n    int IDEX = a.IDEX;    \n    int result = (BID&lt;&lt;18) | IDEX; // concatenate BID and IDEX together to get 29 bit header\n\n    cout &lt;&lt; \"test\" &lt;&lt; endl;\n    cout &lt;&lt; \"BID: \" &lt;&lt; hex &lt;&lt; BID &lt;&lt; endl; //-&gt; 20a -&gt; 010 0000 1010\n    cout &lt;&lt; \"IDEX: \" &lt;&lt; hex &lt;&lt; IDEX &lt;&lt; endl; //-&gt; a0a0-&gt; 00 1010 0000 1010 0000\n    cout &lt;&lt; \"Identifier Field: \" &lt;&lt; hex &lt;&lt; result &lt;&lt; endl; //-&gt; 828a0a0 -&gt; 01 0000 0101 0001 01 0 0 0 0010100 000    \n    cout &lt;&lt; \"Size of Bitfield header: \" &lt;&lt; sizeof(a) &lt;&lt; endl;\n\n    identityFieldO2M b;\n    b = result; // **error: no match for 'operator=' (operand types are 'identityFieldO2M' and 'int')**\n    memset(b.arr,0,sizeof(b.arr));\n\n    cout &lt;&lt; hex &lt;&lt; b.RCI &lt;&lt; endl; // 01 -&gt; 0x01\n    cout &lt;&lt; hex &lt;&lt; b.DOC &lt;&lt; endl; // 0000 0101 0001 01 -&gt; 0x145\n    cout &lt;&lt; hex &lt;&lt; b.PVT &lt;&lt; endl; // 0 -&gt; 0x00\n    cout &lt;&lt; hex &lt;&lt; b.LCL &lt;&lt; endl; // 0 -&gt; 0x00\n    cout &lt;&lt; hex &lt;&lt; b.FSB &lt;&lt; endl; // 0 -&gt; 0x00\n    cout &lt;&lt; hex &lt;&lt; b.SourceFID &lt;&lt; endl; // 0010100 -&gt; 0x14\n    cout &lt;&lt; hex &lt;&lt; b.LCC &lt;&lt; endl; // 000 -&gt; 0 -&gt; 0x00\n\n    sleep(100);\n    return 0;\n    }\n</code></pre>\n\n<p>where the error happens when I am setting the result of concatenate BID and IDEX to struct b:</p>\n\n<pre><code>identityFieldO2M b;\nb = result; // **error: no match for 'operator=' (operand types are 'identityFieldO2M' and 'int')**\nmemset(b.arr,0,sizeof(b.arr));\n</code></pre>\n\n<p>For the BitFieldMember template I am using this very helpful template here:\n<a href=\"https://codereview.stackexchange.com/questions/54342/template-for-endianness-free-code-data-always-packed-as-big-endian\">https://codereview.stackexchange.com/questions/54342/template-for-endianness-free-code-data-always-packed-as-big-endian</a></p>\n\n<p>Looking through the definition of the BitFieldMember template, here is the operand = to assign values into the field, where I suspect this issue may lay?</p>\n\n<pre><code>/* used to assign a value into the field */\ninline self_t&amp; operator=(unsigned m)\n{\n    uchar *arr = selfArray();\n    m &amp;= mask;\n    unsigned wmask = ~(mask &lt;&lt; (7 - (lastBit &amp; 7)));\n    m &lt;&lt;= (7 - (lastBit &amp; 7));\n    uchar *p = arr + lastBit / 8;\n    int i = (lastBit &amp; 7) + 1;\n    (*p &amp;= wmask) |= m;\n    while (i &lt; bitSize)\n    {\n        m &gt;&gt;= 8;\n        wmask &gt;&gt;= 8;\n        (*(--p) &amp;= wmask) |= m;\n        i += 8;\n    }\n    return *this;\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "destructor"], "comments": [{"owner": {"reputation": 1125, "user_id": 5672740, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c16baffcdc08015ed0b3f9dcfd424751?s=128&d=identicon&r=PG&f=1", "display_name": "SenselessCoder", "link": "https://stackoverflow.com/users/5672740/senselesscoder"}, "edited": false, "score": 0, "creation_date": 1519857956, "post_id": 49039892, "comment_id": 85085118, "body": "Your distance vector isn&#39;t initialized the way you think it is."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1519858026, "post_id": 49039892, "comment_id": 85085149, "body": "<code>test::test() {             std::vector&lt;int&gt;distance(100, 1);         }</code> should be <code>test::test() :             distance(100, 1) {}</code>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519858028, "post_id": 49039892, "comment_id": 85085151, "body": "The <code>test::test</code> constructor only default initializes the instance member variable <code>distance</code>."}, {"owner": {"reputation": 161, "user_id": 8108245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wH88y2b9cA4/AAAAAAAAAAI/AAAAAAAASno/E9zjILZgoD8/photo.jpg?sz=128", "display_name": "GANESH B K", "link": "https://stackoverflow.com/users/8108245/ganesh-b-k"}, "reply_to_user": {"reputation": 1125, "user_id": 5672740, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c16baffcdc08015ed0b3f9dcfd424751?s=128&d=identicon&r=PG&f=1", "display_name": "SenselessCoder", "link": "https://stackoverflow.com/users/5672740/senselesscoder"}, "edited": false, "score": 0, "creation_date": 1519858081, "post_id": 49039892, "comment_id": 85085173, "body": "@SenselessCoder Could you please elaborate when you meant the disance vector isnt initialized the way i think."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1519858132, "post_id": 49039892, "comment_id": 85085185, "body": "<code>std::vector&lt;int&gt;distance(100, 1);</code> just creates a local variable (with same same as the member)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1519858295, "post_id": 49039892, "comment_id": 85085256, "body": "[OT]: With for range, <code>for (auto itr = distance.begin(); itr != distance.end(); ++itr)</code> might simply be <code>for (auto e : distance) { std::cout &lt;&lt; e &lt;&lt; &quot;\\n&quot;; }</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519858624, "post_id": 49039892, "comment_id": 85085418, "body": "Handy reading: <a href=\"https://en.wikipedia.org/wiki/Variable_shadowing\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Variable_shadowing</a>"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 8108245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wH88y2b9cA4/AAAAAAAAAAI/AAAAAAAASno/E9zjILZgoD8/photo.jpg?sz=128", "display_name": "GANESH B K", "link": "https://stackoverflow.com/users/8108245/ganesh-b-k"}, "edited": false, "score": 0, "creation_date": 1519859033, "post_id": 49039987, "comment_id": 85085554, "body": "Is there a way apart from initializer list to define the data members of a class?For example, i have to assign some value to the data member distance of the test class above."}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": false, "score": 4, "last_activity_date": 1519859475, "last_edit_date": 1519859475, "creation_date": 1519858314, "answer_id": 49039987, "question_id": 49039892, "link": "https://stackoverflow.com/questions/49039892/why-is-the-destructor-called-on-vector-before-printing-the-values-in-vector-in-t/49039987#49039987", "title": "Why is the destructor called on vector before printing the values in vector in the following code", "body": "<pre><code>test::test() {\n    std::vector&lt;int&gt;distance(100, 1);\n}\n</code></pre>\n\n<p>This will create a new vector local to the constructor, that will be destroyed as soon as the constructor finishes.</p>\n\n<p>To initialize the vector in your class you should use <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">initializer list</a>.</p>\n\n<pre><code>test::test() : distance(100,1) {}\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Another option is to initialize the vector in the class definition.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n    class test {\n    private:\n        vector&lt;int&gt; distance{5, 7, 9, 12};\n    public:\n        test();\n        void print();\n    };\n    void test::print() {\n        cout &lt;&lt; \"In Print\";\n        for (auto itr = distance.begin(); itr != distance.end(); ++itr)\n            cout &lt;&lt; *itr &lt;&lt; \"\\n\";\n    }\n    int main()\n    {\n        cout &lt;&lt; \"executing main \\n\";\n        test t;\n        t.print();\n        cin.get();\n        return 0;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 5843430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281357304317c3e1089709d17794ca5d?s=128&d=identicon&r=PG", "display_name": "Luis Guzman", "link": "https://stackoverflow.com/users/5843430/luis-guzman"}, "is_accepted": false, "score": 0, "last_activity_date": 1519913035, "last_edit_date": 1519913035, "creation_date": 1519860268, "answer_id": 49040316, "question_id": 49039892, "link": "https://stackoverflow.com/questions/49039892/why-is-the-destructor-called-on-vector-before-printing-the-values-in-vector-in-t/49040316#49040316", "title": "Why is the destructor called on vector before printing the values in vector in the following code", "body": "<p><strong>SOLUTION</strong></p>\n\n<p>The correct way to initialize the member vector in the constructor is:</p>\n\n<pre><code>test::test()\n: distance(100, 1) // initializes member vector with 100 ones, but\n                   // you may use any vector constructor here\n{\n}\n</code></pre>\n\n<p>This will also work:</p>\n\n<pre><code>test::test()\n: distance() // this line is implicit if you don't add it\n{\n    for (auto i = 0; i &lt; 100; ++i) {\n        distance.push_back(1); // appends 1 to the member distance\n    }\n}\n</code></pre>\n\n<p>but it is not desirable since it is less efficient because you create and initialize a default empty vector, and then you initialize it again in the body of the constructor. However, depending on what you need to initialize the vector with, it may make sense to do it in the body of the constructor, if the values require calculating, for instance.</p>\n\n<p>For a good reference of std::vector&lt;>, including its constructors, see <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">cppreference.com</a>. This vector tutorial that I wrote may also be of use: <a href=\"https://swdevmastery.com/c-stdvector-for-post-beginners-including-real-issues-ive-seen-in-practice-and-surprising-modern-usage-recommendations/\" rel=\"nofollow noreferrer\">C++ std::vector for post-beginners</a>.</p>\n\n<p><strong>YOUR PROBLEM</strong></p>\n\n<p>Your constructor is creating a new and different vector with the same name in its body. Then, when the destructor is finished, the new vector initialized there goes out of scope, and it is destroyed:</p>\n\n<pre><code>test::test()\n{\n    vector&lt;int&gt; distance(100, 1); // Creates a new vector with the same\n                                  // name as your member variable.\n} // end of constructor scope; the vector created here is destroyed\n</code></pre>\n\n<p>The constructor above is equivalent to:</p>\n\n<pre><code>test::test()\n: distance() // default initialization of member distance\n{\n    vector&lt;int&gt; distance(100, 1); // Creates a new different vector with the\n                                  // same name as your member variable.\n} // end of constructor scope; the new vector created is destroyed\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 8108245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wH88y2b9cA4/AAAAAAAAAAI/AAAAAAAASno/E9zjILZgoD8/photo.jpg?sz=128", "display_name": "GANESH B K", "link": "https://stackoverflow.com/users/8108245/ganesh-b-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1519913035, "creation_date": 1519857829, "question_id": 49039892, "link": "https://stackoverflow.com/questions/49039892/why-is-the-destructor-called-on-vector-before-printing-the-values-in-vector-in-t", "title": "Why is the destructor called on vector before printing the values in vector in the following code", "body": "<p>In the following code, the vector loses all its content before calling the print method.\nI am assuming the destructor is called before the print statement.\nCould anyone let me know why a destructor is called before the object is going out of scope.</p>\n\n<pre><code>    #include&lt;iostream&gt;\n    #include &lt;vector&gt;\n    using namespace std;\n        class test {\n        private:\n            vector&lt;int&gt; distance;\n        public:\n            test();\n            void print();\n        };\n        void test::print() {\n            cout &lt;&lt; \"In Print\";\n            for (auto itr = distance.begin(); itr != distance.end(); ++itr)\n                cout &lt;&lt; *itr &lt;&lt; \"\\n\";\n        }\n        test::test() {\n            std::vector&lt;int&gt;distance(100, 1);\n        }\n        int main()\n        {\n            cout &lt;&lt; \"executing main \\n\";\n            test t;\n            t.print();\n            cin.get();\n            return 0;\n        }\n</code></pre>\n"}, {"tags": ["c++", "frame-rate", "video-encoding", "libx264", "libx265"], "answers": [{"tags": [], "owner": {"reputation": 1896, "user_id": 1643272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a755ac1aa2d11351675ad8ee6086663?s=128&d=identicon&r=PG", "display_name": "nobody555", "link": "https://stackoverflow.com/users/1643272/nobody555"}, "is_accepted": true, "score": 1, "last_activity_date": 1519887872, "creation_date": 1519887872, "answer_id": 49044296, "question_id": 49039867, "link": "https://stackoverflow.com/questions/49039867/why-codecs-x264-x265-ignores-pts-and-dts-of-input-frame/49044296#49044296", "title": "Why codecs x264/x265 ignores pts and dts of input frame?", "body": "<p>I don't know about x265 but in x264 to encode variable frame rate (VFR) video you should enable x264_param_t.b_vfr_input option which was disabled by your zerolatency tuning (VFR encode need 1 frame latency). Also at least in x264 timebase should be in i_timebase_num/i_timebase_den and i_fps_num/i_fps_den to be average fps (or keep default 25/1 if you don't know fps) or you will broke ratecontrol.</p>\n"}], "owner": {"reputation": 293, "user_id": 7345868, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a3254b29a2a99f19e2de5b5ac404258c?s=128&d=identicon&r=PG&f=1", "display_name": "Iceman", "link": "https://stackoverflow.com/users/7345868/iceman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 49044296, "answer_count": 1, "score": 0, "last_activity_date": 1519887872, "creation_date": 1519857723, "question_id": 49039867, "link": "https://stackoverflow.com/questions/49039867/why-codecs-x264-x265-ignores-pts-and-dts-of-input-frame", "title": "Why codecs x264/x265 ignores pts and dts of input frame?", "body": "<p>I'm trying to encode images from a webcam with libx265 (libx264 tried earlier) ...<br>The webcam can not shoot with stable FPS because of the different amount of light entering the matrix and, as a result, different delays. Therefore, I count the fps and dts of the incoming frame and set these values for the corresponding parameters of the <code>x265_image</code> object, and init the encoder <code>fpsNum</code> with 1000 and <code>fpsDenom</code> with 1 (for millisecond timebase).<br>\nThe problem is that the encoder ignores pts and dts of input image and encodes at 1000 fps! The same trick with timebase produces smooth record with libvpx. Why it does not work with x264/x265 codecs?</p>\n\n<p>Here is parameters initialization:</p>\n\n<pre><code>...\n    error = (x265_param_default_preset(param, \"fast\", \"zerolatency\") != 0);\n    if(!error){\n        param-&gt;sourceWidth = width;\n        param-&gt;sourceHeight = height;\n        param-&gt;frameNumThreads = 1;\n        param-&gt;fpsNum = 1000;\n        param-&gt;fpsDenom =  1;\n        // Intra refres:\n        param-&gt;keyframeMax = 15;\n        param-&gt;intraRefine = 1;\n        // Rate control:\n        param-&gt;rc.rateControlMode = X265_RC_CQP;\n        param-&gt;rc.rfConstant = 12;\n        param-&gt;rc.rfConstantMax = 48;\n        // For streaming:\n        param-&gt;bRepeatHeaders = 1;\n        param-&gt;bAnnexB = 1;\n        encoder = x265_encoder_open(param);\n        ...\n    }\n...\n</code></pre>\n\n<p>Here is frame adding function:</p>\n\n<pre><code>bool hevc::Push(unsigned char *data){\n    if(!error){\n        std::lock_guard&lt;std::mutex&gt; lock(m_framestack);\n        if( timer &gt; 0){\n            framestack.back()-&gt;dts = clock() - timer;\n            timer+= framestack.back()-&gt;dts;\n        }\n        else{timer = clock();}\n        x265_picture *picture = x265_picture_alloc();\n        if( picture){\n            x265_picture_init(param, picture);\n            picture-&gt;height = param-&gt;sourceHeight;\n            picture-&gt;stride[0] = param-&gt;sourceWidth;\n            picture-&gt;stride[1] = picture-&gt;stride[2] = picture-&gt;stride[0] / 2;\n            picture-&gt;planes[0] = new char[  luma_size];\n            picture-&gt;planes[1] = new char[chroma_size];\n            picture-&gt;planes[2] = new char[chroma_size];\n\n            colorspaces::BGRtoI420(param-&gt;sourceWidth, param-&gt;sourceHeight, data, (byte*)picture-&gt;planes[0], (byte*)picture-&gt;planes[1], (byte*)picture-&gt;planes[2]);\n            picture-&gt;pts = picture-&gt;dts = 0;\n            framestack.emplace_back(picture);\n        }\n        else{error = true;}\n    }\n    return !error;\n}\n</code></pre>\n\n<p>Global PTS is increasing right after <code>x265_encoder_encode</code> call:\n<code>pts+= pic_in-&gt;dts;</code> and sets as a pts of new image from <code>framestack</code> queue when it comes to encoder.</p>\n\n<p>Can the x265/x264 codecs encode at variable fps? How to configure it if yes?</p>\n"}, {"tags": ["c++", "qt", "visual-c++"], "comments": [{"owner": {"reputation": 2418, "user_id": 1144539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/babed14d18f0888997cadb8fc1a89b18?s=128&d=identicon&r=PG", "display_name": "JKSH", "link": "https://stackoverflow.com/users/1144539/jksh"}, "edited": false, "score": 0, "creation_date": 1519877391, "post_id": 49039847, "comment_id": 85090061, "body": "Try deleting your <i>build-*</i> folder recompiling from scratch. If the QCP errors still appear, please edit your question to provide more info: For QCustomPlot, are you using <code>QCUSTOMPLOT_COMPILE_LIBRARY</code>/_qcustomplot.dll_ or not?"}, {"owner": {"reputation": 23, "user_id": 8877023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26d1a492a2bf318a9457301d5f65b9f?s=128&d=identicon&r=PG&f=1", "display_name": "vxtfh", "link": "https://stackoverflow.com/users/8877023/vxtfh"}, "reply_to_user": {"reputation": 2418, "user_id": 1144539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/babed14d18f0888997cadb8fc1a89b18?s=128&d=identicon&r=PG", "display_name": "JKSH", "link": "https://stackoverflow.com/users/1144539/jksh"}, "edited": false, "score": 0, "creation_date": 1519923209, "post_id": 49039847, "comment_id": 85114154, "body": "I tried using the msvc2013 32 &amp; 64 bit compilers, with no success. I also tried using Qt 5.8 rather than 5.10, and that didn&#39;t change anything either."}, {"owner": {"reputation": 23, "user_id": 8877023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26d1a492a2bf318a9457301d5f65b9f?s=128&d=identicon&r=PG&f=1", "display_name": "vxtfh", "link": "https://stackoverflow.com/users/8877023/vxtfh"}, "reply_to_user": {"reputation": 2418, "user_id": 1144539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/babed14d18f0888997cadb8fc1a89b18?s=128&d=identicon&r=PG", "display_name": "JKSH", "link": "https://stackoverflow.com/users/1144539/jksh"}, "edited": false, "score": 0, "creation_date": 1519924719, "post_id": 49039847, "comment_id": 85115066, "body": "I went into Visual Studio -&gt; Tools -&gt; Extensions and Updates -&gt; Online -&gt; Qt and installed it, and the project now compiles successfully in visual studio. I went into Qt Creator and it still won&#39;t compile there."}], "owner": {"reputation": 23, "user_id": 8877023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26d1a492a2bf318a9457301d5f65b9f?s=128&d=identicon&r=PG&f=1", "display_name": "vxtfh", "link": "https://stackoverflow.com/users/8877023/vxtfh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1519916911, "creation_date": 1519857649, "last_edit_date": 1519916911, "question_id": 49039847, "link": "https://stackoverflow.com/questions/49039847/lnk-errors-when-using-msvc2017-amd64-compiler-in-qt-creator-4-5-0-qt-5-10-0", "title": "LNK Errors when using MSVC2017 (amd64) compiler in Qt Creator 4.5.0 (Qt 5.10.0)", "body": "<p>I have a Qt project that fails to compile with the MSVC2017 compiler in Qt Creator due to LNK errors (4099, 4098, 2001, and 2019). The issues appear to arise from my inclusion of 3rd party libraries. I am using \"QCustomPlot\" (as .h and .cpp files, <em>I am not using a .dll and the QCUSTOMPLOT_USE_LIBRARY define</em>) and it works great when I'm compiling in Qt Creator with the <em>MinGW kit</em>. I am also using \"libMPSSE\" (as .h and .lib files) and this library works great when compiling in <em>visual studio 2017</em>.</p>\n\n<p>I believe that I'm missing a step here as far as setting up Qt Creator with the MSVC2017 compiler. Here are snippets from the top and bottom of my error list (disregard the first warning, I commented out the section where the variable is used):</p>\n\n<p>error list 1</p>\n\n<p><a href=\"https://i.stack.imgur.com/rt4QO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rt4QO.png\" alt=\"enter image description here\"></a></p>\n\n<p>~~~</p>\n\n<p>error list 2</p>\n\n<p><a href=\"https://i.stack.imgur.com/2QYdv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2QYdv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is what my build settings look like for the project (I haven't manually changed anything here):</p>\n\n<p>build settings</p>\n\n<p><a href=\"https://i.stack.imgur.com/kjujF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kjujF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is what my kit setup looks like:</p>\n\n<p>kit settings</p>\n\n<p><a href=\"https://i.stack.imgur.com/ta9ra.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ta9ra.png\" alt=\"enter image description here\"></a></p>\n\n<p>And here is what my .pro file looks like:</p>\n\n<pre><code>QT       += core \\\n            gui \\\n            printsupport\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = MotionDetection\nTEMPLATE = app\n\n# The following define makes your compiler emit warnings if you use\n# any feature of Qt which has been marked as deprecated (the exact warnings\n# depend on your compiler). Please consult the documentation of the\n# deprecated API in order to know how to port your code away from it.\nDEFINES += QT_DEPRECATED_WARNINGS\n#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0\n\n# You can also make your code fail to compile if you use deprecated APIs.\n# In order to do so, uncomment the following line.\n# You can also select to disable deprecated APIs only up to a certain version of Qt.\n#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # disables all the APIs deprecated before Qt 6.0.0\nINCLUDEPATH += -L\"(.lib directory location)\"\n\nLIBS += -lKernel32\nLIBS += -L\"(.lib directory location)\" -llibMPSSE\n\nSOURCES += \\\n        main.cpp \\\n        mainwindow.cpp \\\n    datacapture.cpp \\\n    mdinterface.cpp \\\n    mdata.cpp \\\n    qcustomplot.cpp\n\nHEADERS += \\\n        mainwindow.h \\\n    datacapture.h \\\n    mdinterface.h \\\n    mdata.h \\\n    qcustomplot.h \\\n    ftd2xx.h \\\n    libMPSSE_spi.h \\\n\nFORMS += \\\n        mainwindow.ui\n</code></pre>\n\n<p>Any help or advice would be greatly appreciated!</p>\n\n<p>*I should also note -- I have deleted everything in my build folder, and then ran 'clean project', 'qmake', and 'build'. In my build folder, there is indeed a 'moc' file for qcustomplot.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 5, "creation_date": 1519857426, "post_id": 49039774, "comment_id": 85084888, "body": "You already do that in your code. You can&#39;t print it like that though, since it&#39;s <code>private</code>."}, {"owner": {"reputation": 73, "user_id": 6906330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ee4d557ac6eecd429724c46a314dd9?s=128&d=identicon&r=PG&f=1", "display_name": "royK", "link": "https://stackoverflow.com/users/6906330/royk"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1519857606, "post_id": 49039774, "comment_id": 85084966, "body": "@HolyBlackCat I get an error when I do that. <code>error: &#39;int Shape::width&#39; is private</code>. Sorry about the print statement. I just realized that."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1519857683, "post_id": 49039774, "comment_id": 85085008, "body": "@royK the code you have posted (after that edit) is correct and doesn&#39;t generate any errors"}, {"owner": {"reputation": 273, "user_id": 2480884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba68307bc6b4c769fc2d67ce24493f49?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/2480884/geek"}, "edited": false, "score": 0, "creation_date": 1519857767, "post_id": 49039774, "comment_id": 85085047, "body": "No you cant acess private member in derived class, either declare them as protected or write public API as a setter function"}, {"owner": {"reputation": 73, "user_id": 6906330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ee4d557ac6eecd429724c46a314dd9?s=128&d=identicon&r=PG&f=1", "display_name": "royK", "link": "https://stackoverflow.com/users/6906330/royk"}, "edited": false, "score": 0, "creation_date": 1519857770, "post_id": 49039774, "comment_id": 85085048, "body": "I am getting the same error even when I remove that line. I am using CodeBlocks. Is that a possible problem with the software?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1519857903, "post_id": 49039774, "comment_id": 85085097, "body": "@royK Then please show us on which line exactly the error is."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1519858421, "post_id": 49039774, "comment_id": 85085314, "body": "@royK - no it isn&#39;t a problem with CodeBlocks, it just calls whatever the configured compiler is (generally mingw or tdm-mingw) which are both <code>gcc</code>. Now there may be compiler options that will influence the c++ standard you are using, but CodeBlocks works just fine."}, {"owner": {"reputation": 73, "user_id": 6906330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ee4d557ac6eecd429724c46a314dd9?s=128&d=identicon&r=PG&f=1", "display_name": "royK", "link": "https://stackoverflow.com/users/6906330/royk"}, "edited": false, "score": 0, "creation_date": 1519858557, "post_id": 49039774, "comment_id": 85085383, "body": "Sorry about that. I checked the code and I had another function that was trying to access the private members that I forgot to comment out. Thank you for your help."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1519858737, "post_id": 49039774, "comment_id": 85085455, "body": "Why would <code>Shape</code> have members <code>width</code> and <code>height</code> when they only make sense for a <code>Rectangle</code>?"}, {"owner": {"reputation": 73, "user_id": 6906330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ee4d557ac6eecd429724c46a314dd9?s=128&d=identicon&r=PG&f=1", "display_name": "royK", "link": "https://stackoverflow.com/users/6906330/royk"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1519859192, "post_id": 49039774, "comment_id": 85085606, "body": "@Walter they would make sense if I have several shapes (triangle, square, etc.). I can directly inherit those variable without creating a separate variable for each shape. Nevertheless, I was just testing out an example to understand inheritance. It&#39;s simply for practice."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1519892119, "post_id": 49039774, "comment_id": 85095135, "body": "No, they don&#39;t make sense, in particular if you have several shapes (it seems you failed to grasp the idea of polymorphism). For a circle, for example, the natural parameter is its radius, not a width and a height. You need a member function <code>virtual int width() const=0;</code> which is then overridden in the derived class implementing the actual shape."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6906330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ee4d557ac6eecd429724c46a314dd9?s=128&d=identicon&r=PG&f=1", "display_name": "royK", "link": "https://stackoverflow.com/users/6906330/royk"}, "edited": false, "score": 0, "creation_date": 1519857777, "post_id": 49039831, "comment_id": 85085052, "body": "Sorry about that. I just realized it. I am using CodeBlocks. Where exactly did you compile the code?"}, {"owner": {"reputation": 1984, "user_id": 8911468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dh52m.jpg?s=128&g=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/8911468/arash"}, "reply_to_user": {"reputation": 73, "user_id": 6906330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ee4d557ac6eecd429724c46a314dd9?s=128&d=identicon&r=PG&f=1", "display_name": "royK", "link": "https://stackoverflow.com/users/6906330/royk"}, "edited": false, "score": 0, "creation_date": 1519857903, "post_id": 49039831, "comment_id": 85085095, "body": "@royK, used <code>gcc</code> compiler (g++) on <code>ubuntu</code>."}], "tags": [], "owner": {"reputation": 1984, "user_id": 8911468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dh52m.jpg?s=128&g=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/8911468/arash"}, "is_accepted": true, "score": 0, "last_activity_date": 1519858231, "last_edit_date": 1519858231, "creation_date": 1519857599, "answer_id": 49039831, "question_id": 49039774, "link": "https://stackoverflow.com/questions/49039774/is-it-possible-to-use-the-base-class-constructor-to-initialize-values-to-base-cl/49039831#49039831", "title": "Is it possible to use the base class constructor to initialize values to base class private members using derived class?", "body": "<p>Your code already compiles fine except for you cannot have access to <code>rec.height</code> in your main function as it is private.</p>\n\n<p>A derived class inherited publically have access to the public constructor of the based class.</p>\n\n<pre><code>int main()\n{\n    Rectangle rec(10,7);\n    // cout &lt;&lt; rec.height &lt;&lt; endl;  &lt;----------- disabled\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": false, "score": 1, "last_activity_date": 1519858782, "last_edit_date": 1519858782, "creation_date": 1519858138, "answer_id": 49039953, "question_id": 49039774, "link": "https://stackoverflow.com/questions/49039774/is-it-possible-to-use-the-base-class-constructor-to-initialize-values-to-base-cl/49039953#49039953", "title": "Is it possible to use the base class constructor to initialize values to base class private members using derived class?", "body": "<p>Your current implementation of <code>Rectangle</code> correctly calls the base constructor using its parameters. Using modern C++ (at least C++11) the implementation of <code>Rectangle</code> can be simplified by using <a href=\"http://en.cppreference.com/w/cpp/language/using_declaration#Inheriting_constructors\" rel=\"nofollow noreferrer\"><em>inheriting constructors</em></a>:</p>\n\n<pre><code>struct Rectangle : public Shape {\n    using Shape::Shape;\n};\n</code></pre>\n\n<p>To access the <code>private</code> member, it needs to either be changed to <code>public</code>, or you need to implement a getter method in the base class. Alternatively you can make the <code>private</code> member <code>protected</code> and implement the getter in the derived class (although, as <code>height</code> is common to all derived classes, it would be appropriate to place the getter in the base class).</p>\n\n<pre><code>class Shape {\n/* ... */\npublic:\n    int get_height() const { return height; }\n};\n</code></pre>\n\n\n\n<pre><code>std::cout &lt;&lt; rec.get_height() &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6906330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61ee4d557ac6eecd429724c46a314dd9?s=128&d=identicon&r=PG&f=1", "display_name": "royK", "link": "https://stackoverflow.com/users/6906330/royk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 49039831, "answer_count": 2, "score": 0, "last_activity_date": 1519858782, "creation_date": 1519857324, "last_edit_date": 1519857764, "question_id": 49039774, "link": "https://stackoverflow.com/questions/49039774/is-it-possible-to-use-the-base-class-constructor-to-initialize-values-to-base-cl", "title": "Is it possible to use the base class constructor to initialize values to base class private members using derived class?", "body": "<p>What I would like to do is set the <code>width</code> and the <code>height</code> variables of the <code>Shape</code> class using the <code>Rectangle</code> class.</p>\n\n<p>Shape.h</p>\n\n<pre><code>class Shape\n{\n    public:\n        Shape(int x, int y);\n    private:\n        int width;\n        int height;\n};\n</code></pre>\n\n<p>Shape.cpp</p>\n\n<pre><code>Shape::Shape(int x, int y): width(x), height(y)\n{\n}\n</code></pre>\n\n<p>Rectangle.h</p>\n\n<pre><code>class Rectangle: public Shape\n{\n    public:\n        Rectangle(int, int);\n};\n</code></pre>\n\n<p>Rectangle.cpp</p>\n\n<pre><code>Rectangle::Rectangle(int x, int y):Shape(x, y)\n{\n}\n</code></pre>\n\n<p>Main.cpp</p>\n\n<pre><code>int main()\n{\n    Rectangle rec(10,7);\n    return 0;\n}\n</code></pre>\n\n<p>What I want to do is use the <code>rec</code> object to initialize the <code>width</code> and <code>height</code> variables of the class <code>Shape</code> which are private. Is there any way to do that? Or do I need to set the <code>width</code> and <code>height</code> variables to protected? </p>\n"}, {"tags": ["c++", "istream"], "comments": [{"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1519861997, "post_id": 49039752, "comment_id": 85086431, "body": "Thank you for the editing.  I am not well versed in it."}], "answers": [{"comments": [{"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1519861967, "post_id": 49039841, "comment_id": 85086416, "body": "Yes, that&#39;s why I am surprised.  I would only act on the fail bit and leave other bits alone.  This is an exercise in the Deitel C++ 9ed book, chapter 12."}], "tags": [], "owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "is_accepted": false, "score": 3, "last_activity_date": 1519857628, "creation_date": 1519857628, "answer_id": 49039841, "question_id": 49039752, "link": "https://stackoverflow.com/questions/49039752/cin-clearios-basefailbit-vs-cin-setstateios-basefailbit/49039841#49039841", "title": "cin.clear(ios_base::failbit) vs cin.setstate(ios_base::failbit)", "body": "<blockquote>\n  <p>I am a bit surprised to see how the fail bit is set with clear(). Why such a counter-intuitive way for using clear()?</p>\n</blockquote>\n\n<p>Well let's think about it.</p>\n\n<pre><code> std::cin.setstate(ios_base::failbit);\n</code></pre>\n\n<p>This will set the fail bit if it isn't already set, but preserve any other <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/rdstate\" rel=\"nofollow noreferrer\">stream error state</a> for <code>std::cin</code>.</p>\n\n<pre><code> std::cin.clear(ios_base::failbit);\n</code></pre>\n\n<p>This will clear all the stream error state from <code>std::cin</code> and then set only the fail bit.</p>\n"}, {"tags": [], "owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "is_accepted": false, "score": 1, "last_activity_date": 1528734932, "creation_date": 1528734932, "answer_id": 50802369, "question_id": 49039752, "link": "https://stackoverflow.com/questions/49039752/cin-clearios-basefailbit-vs-cin-setstateios-basefailbit/50802369#50802369", "title": "cin.clear(ios_base::failbit) vs cin.setstate(ios_base::failbit)", "body": "<p><code>setstate</code> and <code>clear</code> do different operations. They are not the same. </p>\n\n<p><code>setstate</code> actually calls <code>clear</code> with extra operation.  </p>\n\n<p>Basically, <code>setstate</code> is somehow <strong>adding extra flag</strong> while <code>clear</code> is to <strong>override the whole thing</strong>.</p>\n\n<p>See here:<a href=\"http://www.cplusplus.com/reference/ios/ios/setstate/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/ios/ios/setstate/</a></p>\n\n<blockquote>\n  <p>Modifies the current internal error state flags by combining the current flags with those in argument state (as if performing a bitwise OR operation).\n  ...<br>\n  This function behaves as if defined as:</p>\n</blockquote>\n\n<pre><code>void ios::setstate (iostate state) {\n  clear(rdstate()|state);   //setstate is doing a OR operation while clear does not.\n}\n</code></pre>\n\n<p>or here:<a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/setstate\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/io/basic_ios/setstate</a></p>\n\n<blockquote>\n  <p>Sets the stream error flags state in addition to currently set flags. Essentially calls clear(rdstate() | state).</p>\n</blockquote>\n\n<p>Experiment code for VC++:</p>\n\n<p>First find out how are the <code>iostate</code> constant implemented:</p>\n\n<pre><code>//Windows Visual C++ implementation\nstatic constexpr _Iostate goodbit = (_Iostate)0x0;\nstatic constexpr _Iostate eofbit = (_Iostate)0x1;\nstatic constexpr _Iostate failbit = (_Iostate)0x2;\nstatic constexpr _Iostate badbit = (_Iostate)0x4;\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nusing namespace std;\nint main()\n{\n    //eof 1, fail 2.\n    std::ostringstream stream;\n    stream.setstate(std::ios_base::failbit);\n    cout &lt;&lt; stream.rdstate() &lt;&lt; endl;  // should get 2\n    stream.setstate(ios_base::eofbit);\n    cout &lt;&lt; stream.rdstate() &lt;&lt; endl; // should get 3\n    stream.clear(ios_base::eofbit);\n    cout &lt;&lt; stream.rdstate() &lt;&lt; endl; // should get 1\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1528734932, "creation_date": 1519857196, "last_edit_date": 1519857913, "question_id": 49039752, "link": "https://stackoverflow.com/questions/49039752/cin-clearios-basefailbit-vs-cin-setstateios-basefailbit", "title": "cin.clear(ios_base::failbit) vs cin.setstate(ios_base::failbit)", "body": "<p>For one of my assignments, I was told to use <code>cin.clear(ios_base::failbit)</code> to set the <code>failbit</code>.  I wonder, what is the difference between <code>cin.clear(ios_base::failbit)</code> and <code>cin.setstate(ios_base::failbit)</code>?  Is the latter not clearer?  I am a bit surprised to see how the <code>failbit</code> is set with <code>clear()</code>.  Why such a counter-intuitive way for using <code>clear()</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1519856880, "post_id": 49039660, "comment_id": 85084650, "body": "On the each iteration of the outer loop <code>c</code> gets initialized again to <code>0</code> (because the <i>entire</i> inner loop starts again)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1519856888, "post_id": 49039660, "comment_id": 85084657, "body": "Stepping through the code with the debugger will show you how it is working.  Also just walking through the logic on paper will show you why it always prints."}], "answers": [{"tags": [], "owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "is_accepted": false, "score": 0, "last_activity_date": 1519856891, "creation_date": 1519856891, "answer_id": 49039687, "question_id": 49039660, "link": "https://stackoverflow.com/questions/49039660/confused-about-the-use-of-break-in-this-nested-loop/49039687#49039687", "title": "Confused about the use of break in this nested loop", "body": "<p><code>break</code> literally breaks out of the innermost <code>for</code> loop.</p>\n\n<p>It exits the loop it's in and the code continues as if the loop was finished.</p>\n"}, {"comments": [{"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1519857377, "post_id": 49039706, "comment_id": 85084865, "body": "But why did not it execute <code>cout&lt;&lt;endl;</code>?"}, {"owner": {"reputation": 1809, "user_id": 770302, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6ph2.png?s=128&g=1", "display_name": "Daniel A. Thompson", "link": "https://stackoverflow.com/users/770302/daniel-a-thompson"}, "reply_to_user": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1519857418, "post_id": 49039706, "comment_id": 85084885, "body": "It did, that&#39;s why the <code>*</code> are on separate lines."}], "tags": [], "owner": {"reputation": 1809, "user_id": 770302, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6ph2.png?s=128&g=1", "display_name": "Daniel A. Thompson", "link": "https://stackoverflow.com/users/770302/daniel-a-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1519857040, "creation_date": 1519857040, "answer_id": 49039706, "question_id": 49039660, "link": "https://stackoverflow.com/questions/49039660/confused-about-the-use-of-break-in-this-nested-loop/49039706#49039706", "title": "Confused about the use of break in this nested loop", "body": "<p><code>break</code> only breaks out of the innermost loop, not all loops. So the output is generated like so:</p>\n\n<pre><code>* // r = 0, c = 0\n* // r = 1, c = 0\n* // r = 2, c = 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6610551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e0ae2d2c8bc813d69b6a51cff6dabc?s=128&d=identicon&r=PG&f=1", "display_name": "MoonlitChameleon", "link": "https://stackoverflow.com/users/6610551/moonlitchameleon"}, "is_accepted": false, "score": 0, "last_activity_date": 1519857832, "creation_date": 1519857832, "answer_id": 49039894, "question_id": 49039660, "link": "https://stackoverflow.com/questions/49039660/confused-about-the-use-of-break-in-this-nested-loop/49039894#49039894", "title": "Confused about the use of break in this nested loop", "body": "<p>The <code>break</code> instruction will interrupt the current <code>for</code> loop on that line. Thus, the programm will continue the execution from the next instruction after that block, which is <code>cout&lt;&lt;endl;</code>.</p>\n\n<p>If no <code>cout&lt;&lt;endl;</code> were executed, your output would have looked like this:</p>\n\n<pre><code>***\n</code></pre>\n\n<hr>\n\n<p>To get a blank line, you need to add another <code>cout&lt;&lt;endl;</code> before the <code>break</code> instruction, like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main() {\n    for(int r = 0; r&lt;3; r++) {\n        for(int c = 0; c&lt;=r; c++) {\n            if(c == 1) {\n                cout&lt;&lt;endl;\n                break;\n            }\n            cout&lt;&lt;'*';\n        }\n        cout&lt;&lt;endl;\n    }\n\nreturn 0;\n} \n</code></pre>\n\n<p>This code will print this:</p>\n\n<pre><code>* // r = 0, c = 0\n  // new line\n* // r = 1, c = 0\n  // new line\n* // r = 2, c = 0\n  // new line\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": false, "score": 1, "last_activity_date": 1519858648, "creation_date": 1519858648, "answer_id": 49040048, "question_id": 49039660, "link": "https://stackoverflow.com/questions/49039660/confused-about-the-use-of-break-in-this-nested-loop/49040048#49040048", "title": "Confused about the use of break in this nested loop", "body": "<p>If you restructure the logic, you will find that your <em>inner loop</em> is equivalent to :</p>\n\n<pre><code>for(int c = 0; c &lt; 1 ; c++)\n       {\n         cout&lt;&lt;'*';\n       }\n</code></pre>\n\n<p>Now, the outer loop will iterate 3 times R->{0,1,2) .. and for all R's, your <em>inner</em> loop gets chance to iterate and only 1 iteration .. Thus you get three * prints.</p>\n"}], "owner": {"reputation": 7, "user_id": 8926131, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EyeWn0GdPX0/AAAAAAAAAAI/AAAAAAAAEQo/A8jNs1Oj918/photo.jpg?sz=128", "display_name": "Garvan Doyle", "link": "https://stackoverflow.com/users/8926131/garvan-doyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1519858648, "creation_date": 1519856766, "question_id": 49039660, "link": "https://stackoverflow.com/questions/49039660/confused-about-the-use-of-break-in-this-nested-loop", "title": "Confused about the use of break in this nested loop", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n for(int r = 0; r&lt;3; r++)\n    {\n       for(int c = 0; c&lt;=r; c++)\n       {\n         if(c == 1)\n           break;\n         cout&lt;&lt;'*';\n       }\n     cout&lt;&lt;endl;\n     }\n\n return 0;\n} \n</code></pre>\n\n<p>This code outputs:</p>\n\n<pre><code>*\n*\n*\n</code></pre>\n\n<p>My question is why is does it not output:</p>\n\n<pre><code>*\n\n*\n</code></pre>\n\n<p>My logic is that the first loop runs with r = 0. Then calling the inner loop where c = 0. The first if statement is not true and so * is printed. This loop ends resulting in c = 1 as well as the larger loop where r now = 1. The main loop begins again sufficing all conditions but for some reason still prints a * from the inner loop even the the if command instructs a break to be called.</p>\n\n<p>My possible thoughts are that:\n1. There are no brackets around the if statement?\n2. break; for some reason doesn't break the loop and instead the if statement(idk why this would be the case)\n3. Magic?</p>\n\n<p>Any help is appreciated as if its not already clear I am still very novice to the C++ language.</p>\n"}, {"tags": ["c#", "c++", "linux", "mono", "mono-embedding"], "comments": [{"owner": {"reputation": 2099, "user_id": 6218092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kSB0h.png?s=128&g=1", "display_name": "muszeo", "link": "https://stackoverflow.com/users/6218092/muszeo"}, "edited": false, "score": 0, "creation_date": 1519973165, "post_id": 49039505, "comment_id": 85133033, "body": "Not solved this specifically but have you tried the --arch switch on the mono command to see if you can execute in 32 bit?"}, {"owner": {"reputation": 11, "user_id": 9109981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NPW90RotBQk/AAAAAAAAAAI/AAAAAAAAPKY/BzkrlNaMNkY/photo.jpg?sz=128", "display_name": "TheLast Rar", "link": "https://stackoverflow.com/users/9109981/thelast-rar"}, "reply_to_user": {"reputation": 2099, "user_id": 6218092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kSB0h.png?s=128&g=1", "display_name": "muszeo", "link": "https://stackoverflow.com/users/6218092/muszeo"}, "edited": false, "score": 0, "creation_date": 1520015316, "post_id": 49039505, "comment_id": 85156330, "body": "According to <a href=\"https://stackoverflow.com/questions/47016012/running-32-bit-version-of-mono-embedded\">link</a>, the --arch command is not available when embedding, the issue is that on a 64bit system, mono does not provide 32bit libs to link/load and mono does not appear to have multiarch, preventing me from installing the 32bit version if the 64bit version is already installed."}, {"owner": {"reputation": 2099, "user_id": 6218092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kSB0h.png?s=128&g=1", "display_name": "muszeo", "link": "https://stackoverflow.com/users/6218092/muszeo"}, "edited": false, "score": 0, "creation_date": 1520035271, "post_id": 49039505, "comment_id": 85164328, "body": "Ah I see. So \u2014arch only useful if executing mono directly. :-/ hummm"}], "owner": {"reputation": 11, "user_id": 9109981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NPW90RotBQk/AAAAAAAAAAI/AAAAAAAAPKY/BzkrlNaMNkY/photo.jpg?sz=128", "display_name": "TheLast Rar", "link": "https://stackoverflow.com/users/9109981/thelast-rar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1519856071, "creation_date": 1519856071, "question_id": 49039505, "link": "https://stackoverflow.com/questions/49039505/embedding-32bit-version-of-mono-when-running-on-64bit-linux", "title": "Embedding 32bit version of mono when running on 64bit Linux", "body": "<p>I'm currently porting a C# plugin from Windows to Linux. On Windows the plugin is loaded using a DllExport nuget package, on Linux I'm looking to use Mono embedding.</p>\n\n<p>The program that will use my plugin only has 32bit builds, so I would need to embed the 32bit version of Mono regardless of the OS.</p>\n\n<p>On 64bit Linux, the default install of Mono only provides x64 libs and does not appear to be multi-arch compatible.</p>\n\n<p>Is there an intended way to embed 32bit Mono on a 64bit system?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1519855693, "post_id": 49039382, "comment_id": 85084156, "body": "The problem is that you think you are programming in C and C++.  I suggest you remove the C tag and focus on C++."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519855763, "post_id": 49039382, "comment_id": 85084192, "body": "Why are you using <code>strcmp</code> with <code>std::string</code>?  You could have something like: <code>if (abbr == &quot;LOL&quot;)</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519855842, "post_id": 49039382, "comment_id": 85084232, "body": "See <code>std::transform</code> for converting a string to all lower or all upper case, so you only make ` comparison. Otherwise, &#39;lOl&quot; will mess up your program as well as other letter/case combinations."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1519855911, "post_id": 49039382, "comment_id": 85084265, "body": "You have an open brace <code>{</code> after the <code>cout</code> in the last <code>else</code> statement."}], "answers": [{"comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1519858210, "post_id": 49039543, "comment_id": 85085226, "body": "And you would also need to addd <code>#include &lt;cstring&gt;</code> for <code>strcmp</code>?"}], "tags": [], "owner": {"reputation": 544, "user_id": 9277550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8032e3e443f4c8937d9601338c9ad7?s=128&d=identicon&r=PG&f=1", "display_name": "Hawkeye5450", "link": "https://stackoverflow.com/users/9277550/hawkeye5450"}, "is_accepted": false, "score": 0, "last_activity_date": 1519856244, "creation_date": 1519856244, "answer_id": 49039543, "question_id": 49039382, "link": "https://stackoverflow.com/questions/49039382/c-text-message-decoder-script-compiler-expects-unqualified-id-before-if-and/49039543#49039543", "title": "C++ Text Message Decoder script Compiler &quot;expects unqualified id&quot; before if and else statements", "body": "<p>All you have wrong is your bracing. You close <code>main()</code> before you get to the if statements. All you need to do is get rid of the <code>}</code> after you declare your strings and fix the parentheses on the if statements. As you are writing your code, try to insert pairs of parentheses instead of just one, and you should have less issues. Here is the fixed code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt; // Note: This library is needed to use the string type\nusing namespace std;\n\nint main()\n{\n    string abbr;\n    cout &lt;&lt; \"Input the abbreviation: \";\n    cin &gt;&gt; abbr;\n\n    string LOL = \"laughing out loud\";\n    string IDK = \"I don't know\";\n    string BFF = \"best friends forever\";\n    string IMHO = \"in my humble opinion\";\n    string TMI = \"too much information\";\n\n\nif((strcmp(abbr.c_str(), \"LOL\") == 0) ||\n(strcmp(abbr.c_str(), \"lol\") == 0))\n{\n    cout &lt;&lt; \"Laughing out loud\";\n}\n\nelse if((strcmp(abbr.c_str(), \"IDK\") == 0) ||\n(strcmp(abbr.c_str(), \"idk\") == 0))\n  {\n  cout &lt;&lt; \"I don't know\";\n  }\n\nelse if((strcmp(abbr.c_str(), \"BFF\") == 0) ||\n(strcmp(abbr.c_str(), \"bff\") == 0))\n  {\n  cout &lt;&lt; \"best friends forever\";\n  }\n\nelse if((strcmp(abbr.c_str(), \"IMHO\") == 0) ||\n(strcmp(abbr.c_str(), \"imho\") == 0))\n  {\n  cout &lt;&lt; \"in my humble opinion\";\n  }\n\nelse if((strcmp(abbr.c_str(), \"TMI\") == 0) ||\n(strcmp(abbr.c_str(), \"tmi\") == 0))\n  {\n  cout &lt;&lt; \"too much information\";\n  }\n\nelse\n{\n    cout &lt;&lt; \"Unknown\";\n}\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1519859541, "creation_date": 1519859541, "answer_id": 49040220, "question_id": 49039382, "link": "https://stackoverflow.com/questions/49039382/c-text-message-decoder-script-compiler-expects-unqualified-id-before-if-and/49040220#49040220", "title": "C++ Text Message Decoder script Compiler &quot;expects unqualified id&quot; before if and else statements", "body": "<p>Don't mix C and C++, that's a bad idea. If you want to use C function, then\nstick to C, if you want to use C++, then use the function C++ provides.</p>\n\n<p>If you would have proper indentation, you would have seen right away that you\ncurly braces are at the wrong places. After <code>string TMI = \"too much information\";</code>\nyou have a closing <code>}</code> which ends the <code>main</code> function. After that you are\ncalling <code>if</code> outside a function, the compiler complains about that.</p>\n\n<p>Also your <code>if</code>s are missing the first <code>(</code> </p>\n\n<pre><code>  // misses (\n  //   v\nelse if (strcmp(abbr.c_str(), \"IDK\") == 0) ||\n          (strcmp(abbr.c_str(), \"idk\") == 0))\n</code></pre>\n\n<p>also <code>strcmp</code> is a C function defined in <code>string.h</code>. In order to use that in\nC++, you need to add <code>#include&lt;cstring&gt;</code> to have access to <code>strcmp</code>.</p>\n\n<p>But like I said, if you are using C++, then use the tools that C++ provide\ninstead of mixing them with C. You shouldn't think that C++ is a C extension.</p>\n\n<p>Using C++ tools you can do something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;map&gt;\n\nint main(void)\n{\n    std::string abbr;\n    std::cout &lt;&lt; \"Input the abbreviation: \" ;\n    std::cin &gt;&gt; abbr;\n\n    std::map&lt;std::string, std::string&gt; abbr_map = {\n        {\"lol\",  \"laughing out loud\"},\n        {\"idk\",  \"I don't know\"},\n        {\"bff\",  \"best friends forever\"},\n        {\"imho\", \"in my humble opinion\"},\n        {\"tmi\",  \"too much information\"},\n    };\n\n    std::string orig = abbr;\n\n    std::transform(abbr.begin(), abbr.end(), abbr.begin(), ::tolower);\n\n    if(abbr_map.find(abbr) == abbr_map.end())\n    {\n        std::cerr &lt;&lt; \"Abbreviation '\" &lt;&lt; orig &lt;&lt; \"' not found\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    std::cout &lt;&lt; abbr_map[abbr] &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9425899, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8jhKNw0ui4E/AAAAAAAAAAI/AAAAAAAAAEc/rZBrqzIPSbg/photo.jpg?sz=128", "display_name": "Kat", "link": "https://stackoverflow.com/users/9425899/kat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1519860576, "creation_date": 1519855510, "last_edit_date": 1519860576, "question_id": 49039382, "link": "https://stackoverflow.com/questions/49039382/c-text-message-decoder-script-compiler-expects-unqualified-id-before-if-and", "title": "C++ Text Message Decoder script Compiler &quot;expects unqualified id&quot; before if and else statements", "body": "<p>Help! I'm new in C++.  I wrote this code for the purpose of decoding text abbreviations and my compiler keeps giving me Error: \"expected unqualified id\" before my if and else statements.  No matter what I'm trying I can't seem to fix this error.  Any idea where I'm going wrong? </p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt; // Note: This library is needed to use the string type\nusing namespace std;\n\nint main() {\n\nstring abbr;\ncout &lt;&lt; \"Input the abbreviation: \" ;\ncin &gt;&gt; abbr;\n\nstring LOL = \"laughing out loud\";\nstring IDK = \"I don't know\";\nstring BFF = \"best friends forever\";\nstring IMHO = \"in my humble opinion\";\nstring TMI = \"too much information\";\n}\n\nif (abbr = \"LOL\") == 0) ||\n  (abbr = \"lol\") == 0))\n{\n  cout &lt;&lt; \"Laughing out loud\";\n}\n\nelse if (abbr = \"IDK\") == 0) ||\n      (abbr = \"idk\") == 0))\n{\n  cout &lt;&lt; \"I don't know\";\n}\n\nelse if (abbr = \"BFF\") == 0) ||\n      (abbr = \"bff\") == 0))\n{\n  cout &lt;&lt; \"best friends forever\";\n}\n\nelse if (abbr = \"IMHO\") == 0) ||\n      (abbr = \"imho\") == 0))\n{\n  cout &lt;&lt; \"in my humble opinion\";\n} \n\nelse if (abbr = \"TMI\") == 0) ||\n      (abbr = \"tmi\") == 0))\n{\n  cout &lt;&lt; \"too much information\";\n}\n\nelse\n  cout &lt;&lt; \"Unknown\";\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "memory-management"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 3, "creation_date": 1519855347, "post_id": 49039327, "comment_id": 85084001, "body": "Take a look at destructors. When the vector goes out of scope, it will be deallocated for you! This is one of the many reasons you&#39;ve probably also seen people on this site preaching vectors over dynamically allocated arrays :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1519855354, "post_id": 49039327, "comment_id": 85084004, "body": "<code>clear()</code> is unneeded."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1519855366, "post_id": 49039327, "comment_id": 85084011, "body": "Elements of <code>std::vector</code> are always dynamically allocated, independently of whether the vector object itself is on the stack or on the heap (small buffer optimization cannot be used due to Standard constraints). Destruction of elements and deallocation of buffer is done automatically in destructor following RAII idiom, employed by all STL containers."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1519855575, "post_id": 49039327, "comment_id": 85084108, "body": "You don&#39;t need to do that. class Vector achieves RAII."}], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1519855717, "post_id": 49039371, "comment_id": 85084168, "body": "<i>&quot;if the elements are pointers, the pointed-to objects are not destroyed&quot;</i> This is valid for raw pointers only, not for smart ones. Just for clarification."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519857338, "post_id": 49039371, "comment_id": 85084846, "body": "@DanielLangr To be fair, smart pointers aren&#39;t seen as pointer types from the language&#39;s point of view."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519857579, "post_id": 49039371, "comment_id": 85084950, "body": "@Fran&#231;oisAndrieux Agree, they are ordinary classes."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 11, "last_activity_date": 1519857058, "last_edit_date": 1592644375, "creation_date": 1519855471, "answer_id": 49039371, "question_id": 49039327, "link": "https://stackoverflow.com/questions/49039327/do-i-need-to-call-clear-when-i-am-done-with-a-vector/49039371#49039371", "title": "Do I need to call clear() when I am done with a vector?", "body": "<h1>No.</h1>\n<p>Classes in C++ have a destructor that gets called when the class object goes out of scope or is deleted. While you are correct that <code>std::vector</code> dynamically allocates space under the hood, the <code>std::vector</code> destructor will deallocate the memory for you resulting in a happy leak-free program.</p>\n<p>From the <a href=\"http://en.cppreference.com/w/cpp/container/vector/%7Evector\" rel=\"nofollow noreferrer\">cppreference page</a>, when the vector destructor is called it...</p>\n<blockquote>\n<p>Destructs the container. The destructors of the elements are called and the used storage is deallocated. Note, that if the elements are pointers, the pointed-to objects are not destroyed.</p>\n</blockquote>\n<hr />\n<p>Also note that from the <a href=\"http://en.cppreference.com/w/cpp/container/vector/clear\" rel=\"nofollow noreferrer\">cppreference</a> on clear, the function...</p>\n<blockquote>\n<p>Leaves the capacity() of the vector unchanged...</p>\n</blockquote>\n<p>So when you call <code>clear</code> the memory isn't even actually being free'd! (see <a href=\"https://stackoverflow.com/questions/18467624/what-does-the-standard-say-about-how-calling-clear-on-a-vector-changes-the-capac/18467916#18467916\">this SO question</a> for more on what <code>clear</code> is actually doing)</p>\n"}, {"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519856029, "post_id": 49039462, "comment_id": 85084323, "body": "Or <code>std::vector&lt;int&gt;().swap(v);</code> if C++11 is not available."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519856075, "post_id": 49039462, "comment_id": 85084342, "body": "@DanielLangr Good point. I shall add that to the answer."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519856885, "post_id": 49039462, "comment_id": 85084653, "body": "@DanielLangr It&#39;s a pity that one cannot simply destroy the object via a direct destructor call (as this would invoke UB)."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519857025, "post_id": 49039462, "comment_id": 85084723, "body": "You can, but not for objects on the stack. If an object is created by placement new, then it&#39;s legal (<code>std::vector</code> does this internally with standard allocator; see <a href=\"http://en.cppreference.com/w/cpp/memory/allocator/destroy\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/allocator/destroy</a>)."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519857188, "post_id": 49039462, "comment_id": 85084788, "body": "@DanielLangr Yes I know. But I meant automatic variables, i.e. on the stack."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1519857386, "post_id": 49039462, "comment_id": 85084871, "body": "All right. I just clarified if someone else would read that without your assumption ;-)"}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 7, "last_activity_date": 1519856679, "last_edit_date": 1519856679, "creation_date": 1519855893, "answer_id": 49039462, "question_id": 49039327, "link": "https://stackoverflow.com/questions/49039327/do-i-need-to-call-clear-when-i-am-done-with-a-vector/49039462#49039462", "title": "Do I need to call clear() when I am done with a vector?", "body": "<p>If you are worried about freeing the memory allocated (and hence blocked for use elsewhere) in a (large) <code>vector</code>, you should</p>\n\n<ol>\n<li><p>make sure the scope/lifetime of the respective vector is limited to the region/time of its imminent use, so that its destruction automatically frees the memory.</p></li>\n<li><p>failing that (for whatever reason), you may </p>\n\n<pre><code>vec.clear();          // reduces the size to 0, but not the capacity\nvec.shrink_to_fit();  // suggests to reduce the capacity to size\nassert(vec.capacity()==0);\n</code></pre></li>\n</ol>\n\n<p>Note that <a href=\"http://en.cppreference.com/w/cpp/container/vector/clear\" rel=\"nofollow noreferrer\"><code>vector::clear()</code></a> de-allocates no memory in <code>vector</code> (only memory, if any, dynamically allocated by the vector elements). <a href=\"http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit\" rel=\"nofollow noreferrer\"><code>vector::shrink_to_fit()</code></a> suggests the reduction of the memory footprint of <code>vector</code> to its actual size, but the implementation can chose to ignore that request.</p>\n\n<p>Finally, an alternative to <code>clear()</code> followed by <code>shrink_to_fit()</code> is the swap idiom (which also works prior to C++11):</p>\n\n<pre><code>vector&lt;Tp&gt;().swap(vec);\nassert(vec.capacity()==0);\n</code></pre>\n\n<p>What happens here is that a new empty vector (of the same type) is constructed and then immediately swapped with <code>vec</code>, so that <code>vec</code> becomes empty (with zero size and capacity). Finally, because the new vector is a temporary (un-named) object, it is destructed, whereby de-allocating the memory originally kept with <code>vec</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 9341028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bf624ba915df163465b5c42d9a2a560?s=128&d=identicon&r=PG&f=1", "display_name": "Falljah A. Ali", "link": "https://stackoverflow.com/users/9341028/falljah-a-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "closed_date": 1528543044, "accepted_answer_id": 49039371, "answer_count": 2, "score": 5, "last_activity_date": 1519857058, "creation_date": 1519855278, "last_edit_date": 1519855481, "question_id": 49039327, "link": "https://stackoverflow.com/questions/49039327/do-i-need-to-call-clear-when-i-am-done-with-a-vector", "closed_reason": "Duplicate", "title": "Do I need to call clear() when I am done with a vector?", "body": "<p>All of the questions that I have seen ask about managing memory when the <em>elements</em> of the vector are dynamically allocated/are pointers. My question is just about a vector that has been allocated on the stack, with a simple type, for example, <code>int</code>.</p>\n\n<p>If I have the following code:</p>\n\n<pre><code>std::vector&lt;int&gt; vec(5);\nfor(int i = 0; i &lt; vec.size(); i++) {\n    std::cout &lt;&lt; vec[i] &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Do I need to call <code>clear()</code> when I am done?</p>\n"}, {"tags": ["c++", "boolean"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1519853892, "post_id": 49038969, "comment_id": 85083338, "body": "Sounds like maybe the header and implementation files are using different alignment settings, so the <code>bool</code> variable is not located at the correct offset within the class where the implementation is expecting it to be."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1519853975, "post_id": 49038969, "comment_id": 85083372, "body": "You&#39;ll need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This is probably undefined behavior somewhere else."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1519854096, "post_id": 49038969, "comment_id": 85083430, "body": "It seems likely that the problem exists when you keep the vector member and it&#39;s being corrupted instead of the <code>bool</code>, though you don&#39;t see a problem since you don&#39;t use it. Removing the vector probably bumps up the <code>bool</code> to take occupy the memory the vector used to occupy and is now the casualty of whatever UB you have."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1519854222, "post_id": 49038969, "comment_id": 85083501, "body": "Your bug(s) are probably elsewhere in your code (heap or stack corruption). Try using valgrind or sanitizers (don&#39;t know if VC has those, might be worth trying clang just for that if it has them on Windows)."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1519854228, "post_id": 49038969, "comment_id": 85083506, "body": "Check the address of the member in both places it&#39;s used, as you walk through in the debugger. If you can, set a watchpoint on it and see if something else is trampling the memory. To put your mind at ease: there definitely isn&#39;t a limit on the number of variables or members. Something else is going on. (valgrind or sanitizers definitely worth using if available)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1519855987, "post_id": 49038969, "comment_id": 85084299, "body": "<i>&quot;bool that was initialized to 205&quot;</i> ?!"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1519856150, "post_id": 49038969, "comment_id": 85084366, "body": "Your question title doesn&#39;t fit your question.  To answer the <i>title</i> of your question, there is a limit to the quantity of variables inside a class.  Also, prefer not to declare or define variables {globally} in a header file."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1519856226, "post_id": 49038969, "comment_id": 85084400, "body": "Consider implementing stuff that is <i>necessary</i>.  Some relevant code or data fields may be relevant but never accessed."}, {"owner": {"reputation": 9, "user_id": 9406941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mazxj Stripes", "link": "https://stackoverflow.com/users/9406941/mazxj-stripes"}, "edited": false, "score": 0, "creation_date": 1519870172, "post_id": 49038969, "comment_id": 85088404, "body": "I really appreciate everyone who chimed in. A little bit of help goes a long ways."}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1519854944, "post_id": 49039167, "comment_id": 85083824, "body": "Why the downvote? This is clearly a correct answer :-)"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 3, "creation_date": 1519855517, "post_id": 49039167, "comment_id": 85084083, "body": "&quot;The sky is blue&quot; is also correct, and also not useful. This is a long question. Answers need to address more than the title."}], "tags": [], "owner": {"reputation": 414, "user_id": 6273641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23004a9c1c1720796fabc0aff3b94256?s=128&d=identicon&r=PG&f=1", "display_name": "Jfevold", "link": "https://stackoverflow.com/users/6273641/jfevold"}, "is_accepted": false, "score": 2, "last_activity_date": 1519854564, "creation_date": 1519854564, "answer_id": 49039167, "question_id": 49038969, "link": "https://stackoverflow.com/questions/49038969/can-you-have-too-many-variables-in-a-header/49039167#49039167", "title": "Can you have too many variables in a header?", "body": "<p>No, there is no set limit on the number of variables you can declare.  That is not the cause of your issue.</p>\n"}], "owner": {"reputation": 9, "user_id": 9406941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mazxj Stripes", "link": "https://stackoverflow.com/users/9406941/mazxj-stripes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519855664, "creation_date": 1519853679, "last_edit_date": 1519855664, "question_id": 49038969, "link": "https://stackoverflow.com/questions/49038969/can-you-have-too-many-variables-in-a-header", "title": "Can you have too many variables in a header?", "body": "<p>I kept getting runtime errors at one spot of my code and narrowed it down to a bool that was initialized to 205. I looked this issue up and that's apparently garbage that an uninitialized bool can have.</p>\n\n<p>Okay, but I initialized it. This boolean value is in the private section of the header file. The class contains a method to set the value and another to return the value. Pretty bog standard stuff. So I set up a quick little test. </p>\n\n<pre><code>thing.setValue(false);\ncout &lt;&lt; thing.getValue() &lt;&lt;endl; \n</code></pre>\n\n<p>(not the actual names, but just to keep it simple)\nIt still spit out 205. Literally one statement setting the variable, then the very next simply asking to repeat it back and it's giving me garbage. </p>\n\n<p>Somewhat perplexed, I took a look at the header file. There's an <code>int</code> declared right above the <code>bool</code> in the header, so I did a similar test with that one. It works just fine. I swap the order of the two in the header. Now the <code>bool</code> works and the <code>int</code> doesn't. So there's one <code>vector&lt;int&gt;</code> in the header above the two that it turns out I'm no longer using because I've replaced the method that used it. So I delete that, lo and behold it now works. </p>\n\n<p>I can't seem to find any information on this. I imagine it's likely I just don't know what to search for to find the answer. I'm hoping it's a really obvious and dumb mistake someone more experienced can slap me over the head with so I can move on.</p>\n\n<p>For code example, it's just a simple header file like any other that looks like</p>\n\n<pre><code>#ifndef concept_H\n#define concept_H\nclass concept {\nprivate:\n    //...\n    //...\n    //...\n    int x;\n    bool y;\npublic:\n    //bunch of methods//\n    void setY(bool whatever);\n    bool isY();\n};\n#endif\n</code></pre>\n\n<p>with the method implementation being equally trivial</p>\n\n<pre><code>void concept::setY(bool whatever){\n    y=whatever;\n}\nbool concept::isY(){\n    return y;\n}\n</code></pre>\n\n<p>This isn't the actual code; there's a lot of other stuff there on the periphery and I just don't know what to include as relevant. Hoping again that it's a dumb mistake I'm making and someone can just tell me right away, but if not I can provide more. I just need help to even know where to begin to look.</p>\n"}, {"tags": ["c++", "static", "lnk2019"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 2768296, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48ecb782a8d21f4ddeb1859108b90e34?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Gillies", "link": "https://stackoverflow.com/users/2768296/steven-gillies"}, "edited": false, "score": 1, "creation_date": 1519856834, "post_id": 49039574, "comment_id": 85084633, "body": "I suspected it was something like this. So I guess my question then becomes, why is Project A not producing a &#39;<i>.lib&#39; file into the Debug folder? I was looking there for it but found only a &#39;</i>.obj&#39; file. Have I done something wrong when building Project A?"}], "tags": [], "owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "is_accepted": true, "score": 2, "last_activity_date": 1519856376, "creation_date": 1519856376, "answer_id": 49039574, "question_id": 49038911, "link": "https://stackoverflow.com/questions/49038911/linking-a-static-library-to-a-new-project-in-visual-c/49039574#49039574", "title": "Linking a static library to a new project in Visual C++", "body": "<p>When you <code>#include</code> a .h file, you are usually just including <strong>declarations</strong> into your code (exceptions apply, but not in this case). These are separate from <strong>definitions</strong> which are placed into .cpp files.</p>\n\n<p>By default your projects do not automatically shared <em>any</em> of this information with each other. Your definitions nor declarations from Project A do not magically propagate to Project B, for example.</p>\n\n<p>But as you've done here, you can reference declarations from Project A into Project B by <code>#include</code>ing header files. These, however, are just declarations! They just explain the existence of a function but don't implement it -- You need to add the definition of your <code>Add</code> function to Project B.</p>\n\n<p>The process of bringing such definitions together is called <em>linking.</em> You need to link the definitions of Project A (the .lib, more precisely) into Project B. The way you do this changes with each version of Visual Studio just slightly, but it's usually under some \"Linker Options\" and some \"Dependencies\" tab/window.</p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 2768296, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48ecb782a8d21f4ddeb1859108b90e34?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Gillies", "link": "https://stackoverflow.com/users/2768296/steven-gillies"}, "edited": false, "score": 0, "creation_date": 1519857309, "post_id": 49039684, "comment_id": 85084837, "body": "Thank you, that was the last piece of the puzzle."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 3, "last_activity_date": 1519856879, "creation_date": 1519856879, "answer_id": 49039684, "question_id": 49038911, "link": "https://stackoverflow.com/questions/49038911/linking-a-static-library-to-a-new-project-in-visual-c/49039684#49039684", "title": "Linking a static library to a new project in Visual C++", "body": "<p>The .lib file is generally under the solution directory rather than the more specific project directory:\nLook in \\ or possibly \\\\.</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 11170828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ocHP3.png?s=128&g=1", "display_name": "Dattatraya Mengudale", "link": "https://stackoverflow.com/users/11170828/dattatraya-mengudale"}, "is_accepted": false, "score": 1, "last_activity_date": 1561978411, "creation_date": 1561978411, "answer_id": 56834412, "question_id": 49038911, "link": "https://stackoverflow.com/questions/49038911/linking-a-static-library-to-a-new-project-in-visual-c/56834412#56834412", "title": "Linking a static library to a new project in Visual C++", "body": "<p>You need to add reference of Project A into Project B->Project Properties as below,\n<a href=\"https://i.stack.imgur.com/RPoI6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RPoI6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also, you need to add a reference in like below</p>\n\n<p><a href=\"https://i.stack.imgur.com/DlaQN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DlaQN.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 101, "user_id": 2768296, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48ecb782a8d21f4ddeb1859108b90e34?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Gillies", "link": "https://stackoverflow.com/users/2768296/steven-gillies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1409, "favorite_count": 0, "accepted_answer_id": 49039574, "answer_count": 3, "score": 1, "last_activity_date": 1561978411, "creation_date": 1519853416, "question_id": 49038911, "link": "https://stackoverflow.com/questions/49038911/linking-a-static-library-to-a-new-project-in-visual-c", "title": "Linking a static library to a new project in Visual C++", "body": "<p>I am just beginning to learn C++ and using Visual Studio 2017 as the IDE. I want to stay away from the CLR, and even Windows specific code as much as possible. Every new project option seems to say 'Windows', and thus suggest Windows OS dependencies, except for General > Empty Project, so that is the option I have chosen.</p>\n\n<p>I am trying to write a static library with some functions. Here's a simple example of what I'm trying to do.</p>\n\n<pre><code>//Lib1.h (Project A)\n#pragma once\n#ifndef LIB_H\nnamespace Lib1\n{\n    double Add(double, double);\n}\n\n//Lib1.cpp (Project A)\n#include \"Lib1.h\"\nnamespace Lib1\n{\n    double Add(double a, double b)\n    {\n        return a + b;\n    }\n}\n\n//Main.cpp (Project B)\n#include \"Lib1.h\"\n\nusing namespace Lib1;\n\nint main()\n{\n    double c = Add(1, 2);\n}\n</code></pre>\n\n<p>Project A compiles without warning/error. I changed the Project Properties > General > Configuration Type to be Static Library (.lib), but I cannot actually find the compiled .lib file in the project directory, just an .obj file.</p>\n\n<p>When I try and build Project B it throws the following error message. </p>\n\n<p>\"LNK2019    unresolved external symbol \"double __cdecl FrameTransformations::Add(double,double)\" (?Add@FrameTransformations@@YANNN@Z) referenced in function _main  FrameTransformationTests    S:\\Projects\\Cpp\\Code\\FrameTransformations\\FrameTransformationTests\\Main.obj 1\"</p>\n\n<p>I've had a look and it seems that project B can't find the Add function from project A, although I get auto-completion for the function and arguments through Intellisense (is this just because it can find the Lib1.h file ok?). </p>\n\n<p>I have tried adding in the path to the Project A folder in the Project B Properties > C/C++ > General > Additional #using Directories (both to the Project folder and to the Debug folder where I expected the Lib1.lib file to be generated), but that hasn't worked.</p>\n\n<p>Can someone please point me to what I've done wrong, this has had me stumped for a couple of hours now.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "polymorphism", "undefined-behavior", "dynamic-cast"], "comments": [{"owner": {"reputation": 1119, "user_id": 4720025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/73d27b6dbcdd1c6ee0853d2aa29a96b2?s=128&d=identicon&r=PG", "display_name": "Arda Aytekin", "link": "https://stackoverflow.com/users/4720025/arda-aytekin"}, "edited": false, "score": 0, "creation_date": 1519853677, "post_id": 49038905, "comment_id": 85083222, "body": "are you sure you have read/pasted the whole statement as is? I think you are missing some sentences in the sixth clause where you obtained the verbatim?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1519853808, "post_id": 49038905, "comment_id": 85083286, "body": "<i>&quot;When <code>dynamic_cast</code> is used in a constructor or a destructor (directly or indirectly), and <b>expression</b> refers to the object that&#39;s currently under construction/destruction, the object is considered to be the most derived object. If <b>new_type</b> is not a pointer or reference to the constructor&#39;s/destructor&#39;s own class or one of its bases, the behavior is undefined.&quot;</i> - you don&#39;t seem to be doing this in your example"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1519853821, "post_id": 49038905, "comment_id": 85083292, "body": "That clause only applies within a constructor or destructor."}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 0, "creation_date": 1519853891, "post_id": 49038905, "comment_id": 85083336, "body": "You are right. However, the same situation happens when I use <code>getParent</code> in the constructor."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1519853980, "post_id": 49038905, "comment_id": 85083379, "body": "Why don&#39;t you show the code you&#39;re actually concerned about, where you think case 6 is applicable? What&#39;s the point of <i>only</i> showing the code where your quote <i>doesn&#39;t</i> apply?"}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 0, "creation_date": 1519854068, "post_id": 49038905, "comment_id": 85083421, "body": "I&#39;ve updated the code."}, {"owner": {"reputation": 1119, "user_id": 4720025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/73d27b6dbcdd1c6ee0853d2aa29a96b2?s=128&d=identicon&r=PG", "display_name": "Arda Aytekin", "link": "https://stackoverflow.com/users/4720025/arda-aytekin"}, "edited": false, "score": 0, "creation_date": 1519854269, "post_id": 49038905, "comment_id": 85083527, "body": "Calling a constructor/destructor with <code>nullptr</code> or <code>std::bad_cast</code>, as in the case of illegal <code>dynamic_cast</code>ing of pointers or references, respectively, is undefined behaviour."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1519854440, "post_id": 49038905, "comment_id": 85083617, "body": "You are still not <code>dynamic_cast</code>ing the object that is being constructed - you are casting a member of your object"}, {"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 0, "creation_date": 1519854544, "post_id": 49038905, "comment_id": 85083655, "body": "You are right. Well this whole question turned out to be an act of misunderstanding the documentation. Sorry for that!"}, {"owner": {"reputation": 1119, "user_id": 4720025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/73d27b6dbcdd1c6ee0853d2aa29a96b2?s=128&d=identicon&r=PG", "display_name": "Arda Aytekin", "link": "https://stackoverflow.com/users/4720025/arda-aytekin"}, "edited": false, "score": 0, "creation_date": 1519854657, "post_id": 49038905, "comment_id": 85083705, "body": "and <code>p</code> in the modified version of your code is well-defined: <code>nullptr</code>"}], "answers": [{"comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1519899553, "post_id": 49039032, "comment_id": 85099204, "body": "That was mentioned comments, and subsequently edited into the question, <i>after</i> I wrote this answer. I&#39;ll update to address the change when I have time."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 3, "last_activity_date": 1519909538, "last_edit_date": 1519909538, "creation_date": 1519853916, "answer_id": 49039032, "question_id": 49038905, "link": "https://stackoverflow.com/questions/49038905/make-sure-that-dynamic-cast-wont-cause-undefined-behaviour-c/49039032#49039032", "title": "Make sure that dynamic_cast won&#39;t cause undefined behaviour C++", "body": "<p><strong>tl;dr</strong> It's fine. For some reason you picked up on a condition that clearly doesn't apply to your code.</p>\n\n<hr>\n\n<p>Your quote:</p>\n\n<blockquote>\n  <p>If new_type is not a pointer or reference to the constructor's/destructor's own class or one of its bases, the behavior is undefined.</p>\n</blockquote>\n\n<p>is obviously about using <code>dynamic_cast</code> inside a constructor or destructor, although for some reason you omitted the complete context:</p>\n\n<blockquote>\n  <p>Only the following conversions can be done with dynamic_cast, ...</p>\n  \n  <p>1) ... 5) ...</p>\n  \n  <p>6) When dynamic_cast is used in a constructor or a destructor (directly or indirectly), and expression refers to the object that's currently under construction/destruction, the object is considered to be the most derived object. If new_type is not a pointer or reference to the constructor's/destructor's own class or one of its bases, the behavior is undefined.</p>\n</blockquote>\n\n<p>Since you're not using it inside a constructor or destructor, case 6 is obviously irrelevant.</p>\n\n<p>The case actually relevant to your code is:</p>\n\n<blockquote>\n  <p>5) If expression is a pointer or reference to a polymorphic type Base, and new_type is a pointer or reference to the type Derived a run-time check is performed:</p>\n  \n  <blockquote>\n    <p>a) The most derived object pointed/identified by expression is examined. If, in that object, expression points/refers to a public base of Derived, and if only one subobject of Derived type is derived from the subobject pointed/identified by expression, then the result of the cast points/refers to that Derived subobject. (This is known as a \"downcast\".)</p>\n    \n    <p>b) Otherwise, if expression points/refers to a public base of the most derived object, and, simultaneously, the most derived object has an unambiguous public base class of type Derived, the result of the cast points/refers to that Derived (This is known as a \"sidecast\".)\n    c) Otherwise, the runtime check fails. If the dynamic_cast is used on pointers, the null pointer value of type new_type is returned. If it was used on references, the exception std::bad_cast is thrown.</p>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<p>Examining the code edited in later:</p>\n\n<pre><code>ActorComponent(ActorComponent* parent) {\n    // using `getParent` inside the constructor:\n    // `int` obviously isn't base of the ActorComponent\n    auto p = this-&gt;getParent&lt;int&gt;();\n}\n</code></pre>\n\n<p>the first part of clause 6's condition</p>\n\n<blockquote>\n  <p>When dynamic_cast is used in a constructor or a destructor (directly or indirectly) ...</p>\n</blockquote>\n\n<p><em>is</em> met (the <code>getParent</code> code is indirectly in a constructor), but the second part:</p>\n\n<blockquote>\n  <p>... and expression refers to the object that's currently under construction/destruction ...</p>\n</blockquote>\n\n<p>is <em>not</em> satisfied, so clause 6 still doesn't apply.</p>\n\n<p>You're casting <code>m_parent</code>, which is a member subobject of the <code>ActorComponent</code> object you're constructing. Since member subobjects are completely constructed by the time you enter the body of your constructor, <em>that</em> object is <em>not</em> being constructed and we are not in <em>that object's</em> constructor. Apart from anything else, <em>that object</em> (<code>m_parent</code>) is a pointer, which doesn't have a constructor. As an aside, it's uninitialized, so your code is anyway completely illegal, but not for the reason you asked about.</p>\n"}], "owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 49039032, "answer_count": 1, "score": 1, "last_activity_date": 1519909538, "creation_date": 1519853383, "last_edit_date": 1519855119, "question_id": 49038905, "link": "https://stackoverflow.com/questions/49038905/make-sure-that-dynamic-cast-wont-cause-undefined-behaviour-c", "title": "Make sure that dynamic_cast won&#39;t cause undefined behaviour C++", "body": "<p>Up to this day I thought that if I have class <code>A</code> and <code>B</code> that are not related in any way, the <code>dynamic_cast</code> using pointers would fail returning <code>nullptr</code>. Now I've read that this causes undefined behaviour...</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/dynamic_cast#Explanation\" rel=\"nofollow noreferrer\">cppreference - dynamic_cast</a>:</p>\n\n<blockquote>\n  <p>When <code>dynamic_cast</code> is used in a constructor or a destructor (directly or indirectly), and expression refers to the object that's currently under construction/destruction, the object is considered to be the most derived object. If <code>new_type</code> is not a pointer or reference to the constructor's/destructor's own class or one of its bases, the behavior is undefined.</p>\n</blockquote>\n\n<p>I have code like this:</p>\n\n<pre><code>class ActorComponent\n{\n    ActorComponent* m_parent;\npublic:\n    template &lt;typename _type&gt;\n    _type* getParent() const {\n        return dynamic_cast&lt;_type*&gt;(m_parent);\n    }\n\n    ActorComponent(ActorComponent* parent) {\n        // using `getParent` inside the constructor:\n        auto p = this-&gt;getParent&lt;int&gt;(); // `int` obviously isn't base of the ActorComponent\n    }\n};\n</code></pre>\n\n<p>I need to limit <code>_type</code> to type that is either</p>\n\n<ul>\n<li>equal to <code>ActorComponent</code></li>\n<li>derived from <code>ActorComponent</code></li>\n</ul>\n\n<p>... and possibly more.</p>\n\n<p>The question is: how to make sure in compile-time that <code>dynamic_cast</code> to such <code>_type</code> won't cause undefined behaviour? Will simple</p>\n\n<pre><code>template &lt;typename _type,\n    typename = std::enable_if_t&lt; std::is_base_of_v&lt;ActorComponent, std::remove_cv_t&lt;_type&gt; &gt; || std::is_same_v&lt;ActorComponent, std::remove_cv_t&lt;_type&gt; &gt; &gt;\n</code></pre>\n\n<p>always work?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1519852895, "post_id": 49038748, "comment_id": 85082812, "body": "Welcome to C++. It&#39;s time to learn about proper indentation and your new friend <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1519852931, "post_id": 49038748, "comment_id": 85082829, "body": "You&#39;re looking for an <code>if</code> statement."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1519852935, "post_id": 49038748, "comment_id": 85082835, "body": "This appears to be a problem caused by <code>sum</code> being used before being initialized. Check that your compiler warnings are turned on because this should get flagged. There&#39;s also no need for the <code>average</code> variable as you can <code>return sum&#47;num</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1519852996, "post_id": 49038748, "comment_id": 85082872, "body": "Why are you calling <code>averageGrades()</code> <i>before</i> you call <code>getGrades()</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1519853005, "post_id": 49038748, "comment_id": 85082874, "body": "@Fran&#231;oisAndrieux <code>sum</code> appears to be, it&#39;s not initialized to zero."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1519853074, "post_id": 49038748, "comment_id": 85082907, "body": "@tadman I believe your comment said <code>average</code> was uninitialized at the time of my reply, though I may have misread. I&#39;ve since deleted it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519853116, "post_id": 49038748, "comment_id": 85082928, "body": "@Fran&#231;oisAndrieux Yeah, I corrected that mistake."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1519853537, "post_id": 49038748, "comment_id": 85083140, "body": "<code>num</code> needs to be calculated from the number of grades that are not <code>-1</code>"}, {"owner": {"reputation": 13, "user_id": 9425763, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155622168634023/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/9425763/david"}, "edited": false, "score": 0, "creation_date": 1519857118, "post_id": 49038748, "comment_id": 85084761, "body": "thank you guys for your comments, I&#39;m really new in c++, I found an answer  using an if statement after the for loop in averageGrades() function. if(grades[i] &gt; = 0{ count ++; sum+=grades[i]; then return  sum/count; that will ignore all numbers that are less than 0"}, {"owner": {"reputation": 13, "user_id": 9425763, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155622168634023/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/9425763/david"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1519857236, "post_id": 49038748, "comment_id": 85084812, "body": "@tadman I havent learn about std::vector yet hehe"}, {"owner": {"reputation": 13, "user_id": 9425763, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155622168634023/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/9425763/david"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1519857394, "post_id": 49038748, "comment_id": 85084874, "body": "@Barmar calling one function or another first doesnt change anything in this case isnt it?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1519857954, "post_id": 49038748, "comment_id": 85085117, "body": "@David Well, you&#39;re causing undefined behavior, because you&#39;re adding up numbers in an array that was never initialized. But you&#39;re also ignoring the return value of the first call."}, {"owner": {"reputation": 13, "user_id": 9425763, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155622168634023/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/9425763/david"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1519858139, "post_id": 49038748, "comment_id": 85085190, "body": "@Barmar so I need to follow the order of the functions in the program to be more organized right? thank you!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1519858550, "post_id": 49038748, "comment_id": 85085380, "body": "You need to be aware of dependencies. You can&#39;t do something that depends on the value of a variable until <i>after</i> you assign that variable."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9425763, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155622168634023/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/9425763/david"}, "edited": false, "score": 0, "creation_date": 1519857656, "post_id": 49038912, "comment_id": 85084994, "body": "in the if(grades[i] != -1) can we change it for grades[i]&gt;= 0 so we can ignore every negative number?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 13, "user_id": 9425763, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155622168634023/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/9425763/david"}, "edited": false, "score": 0, "creation_date": 1519857994, "post_id": 49038912, "comment_id": 85085134, "body": "You can do whatever you want. The assignment says <code>-1</code> is the indicator, it doesn&#39;t say anything about other negative numbers."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1519853427, "creation_date": 1519853427, "answer_id": 49038912, "question_id": 49038748, "link": "https://stackoverflow.com/questions/49038748/c-program-that-sum-values-from-user-and-display-average/49038912#49038912", "title": "c++ program that sum values from user and display average", "body": "<p><code>averageGrades()</code> needs an <code>if</code> statement to skip the <code>-1</code> grades, and also a counter of the number of valid grades. It also needs to initialize <code>sum</code> to <code>0</code> before it can add to it.</p>\n\n<p>You can return <code>-1</code> from the function to indicate that there was no average.</p>\n\n<pre><code>int averageGrades(int grades[], int num)\n{\n    int average;\n    int sum = 0, gradeCount = 0;\n    for(int i = 0; i &lt; num; i++)\n    {\n        if (grades[i] != -1) {\n            sum+=grades[i];\n            gradeCount++;\n        }\n    }\n    if (gradeCount &gt; 0) {\n        average = sum / gradeCount;\n    } else {\n        average = -1;\n    }\n    return average;\n}\n</code></pre>\n\n<p>Then you need to check for this special return value when printing the result in <code>main()</code>, so you can show <code>---</code> instead of the number.</p>\n\n<pre><code>int avg = averageGrades(grades, NUM_GRADES);\ncout &lt;&lt; \"Average Grade: \";\nif (avg == -1) {\n    cout &lt;&lt; \"---\";\n} else {\n    cout &lt;&lt; avg;\n}\ncout &lt;&lt; \"%\\n\";\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9425763, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155622168634023/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/9425763/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 49038912, "answer_count": 1, "score": -1, "last_activity_date": 1519853427, "creation_date": 1519852827, "last_edit_date": 1519853064, "question_id": 49038748, "link": "https://stackoverflow.com/questions/49038748/c-program-that-sum-values-from-user-and-display-average", "title": "c++ program that sum values from user and display average", "body": "<p>I have an assignment regarding display the average of 10 given grades in an array. Now I need to not take into account grades with the value -1. In this case, -1 indicates the assignment was not completed yet so it should not factor in the average.\nexample:</p>\n\n<pre><code>Grade 1: 90\nGrade 2: 86\nGrade 3: 95\nGrade 4: 76\nGrade 5: 92\nGrade 6: 83\nGrade 7: 100\nGrade 8: 87\nGrade 9: 91\nGrade 10: -1\nAverage Grade: 88%  //Notice how the -1 for the 10th grade is not factored into the average.\nExample 2\nGrade 1: -1\nGrade 2: -1\nGrade 3: -1\nGrade 4: -1\nGrade 5: -1\nGrade 6: -1\nGrade 7: -1\nGrade 8: -1\nGrade 9: -1\nGrade 10: -1\nAverage Grade: ---%\n</code></pre>\n\n<p>Since all of the grades are <code>-1</code>, there is no average. You will need to handle this condition.\nThis is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#define NUM_GRADES 10\n\nvoid getGrades(int grades[], int num)\n{\nfor(int iGrades = 0; iGrades &lt; num; iGrades++)\n{\n    cout &lt;&lt; \"Grade \" &lt;&lt; iGrades + 1 &lt;&lt; \": \";\n    cin &gt;&gt; grades[iGrades];\n}\nreturn;\n}\n\nint averageGrades(int grades[], int num)\n{\nint average;\nint sum;\nfor(int i = 0; i &lt; num; i++)\n{\n    sum+=grades[i];\n}\naverage = sum / num;\nreturn average;\n}\n\n int main()\n{\nint grades[NUM_GRADES];\naverageGrades(grades, NUM_GRADES);\ngetGrades(grades, NUM_GRADES);\n\ncout &lt;&lt; \"Average Grade: \"\n&lt;&lt; averageGrades(grades, NUM_GRADES)\n&lt;&lt; \"%\\n\";\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "socket.io", "c++14", "linker-errors"], "comments": [{"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1519852440, "post_id": 49038501, "comment_id": 85082567, "body": "Are you responsible for the static library? Can we see some code about the undefined references? This particular problem can often arise when templates are defined in .cpp files instead of headers."}, {"owner": {"reputation": 11, "user_id": 6519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yai8reNRuAk/AAAAAAAAAAI/AAAAAAAAAOQ/pJn969Yn2GE/photo.jpg?sz=128", "display_name": "Amar Vishwakarma", "link": "https://stackoverflow.com/users/6519590/amar-vishwakarma"}, "reply_to_user": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1519869195, "post_id": 49038501, "comment_id": 85088158, "body": "libsioclient.a was obtained by building the opensource <a href=\"https://github.com/socketio/socket.io-client-cpp\" rel=\"nofollow noreferrer\">github.com/socketio/socket.io-client-cpp</a>  The file on which it is giving error is here <a href=\"https://github.com/socketio/socket.io-client-cpp/blob/master/src/sio_socket.cpp\" rel=\"nofollow noreferrer\">github.com/socketio/socket.io-client-cpp/blob/master/src/&hellip;</a>"}, {"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1519869277, "post_id": 49038501, "comment_id": 85088189, "body": "While we might be able to figure out a solution here, this is probably more productively posted on <i>their</i> <a href=\"https://github.com/socketio/socket.io-client-cpp/issues\" rel=\"nofollow noreferrer\">issues page.</a>"}, {"owner": {"reputation": 11, "user_id": 6519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yai8reNRuAk/AAAAAAAAAAI/AAAAAAAAAOQ/pJn969Yn2GE/photo.jpg?sz=128", "display_name": "Amar Vishwakarma", "link": "https://stackoverflow.com/users/6519590/amar-vishwakarma"}, "reply_to_user": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 1, "creation_date": 1519870185, "post_id": 49038501, "comment_id": 85088406, "body": "Thanks. I created the issue there <a href=\"https://github.com/socketio/socket.io-client-cpp/issues/193\" rel=\"nofollow noreferrer\">github.com/socketio/socket.io-client-cpp/issues/193</a>"}, {"owner": {"reputation": 11, "user_id": 6519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yai8reNRuAk/AAAAAAAAAAI/AAAAAAAAAOQ/pJn969Yn2GE/photo.jpg?sz=128", "display_name": "Amar Vishwakarma", "link": "https://stackoverflow.com/users/6519590/amar-vishwakarma"}, "reply_to_user": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1519891077, "post_id": 49038501, "comment_id": 85094609, "body": "The problem was -flto cxx flag that I was using for OPT build in my makefile.  Linking worked fine on removing this flag and just keeping -O3 as cxx flat for OPT build"}], "owner": {"reputation": 11, "user_id": 6519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yai8reNRuAk/AAAAAAAAAAI/AAAAAAAAAOQ/pJn969Yn2GE/photo.jpg?sz=128", "display_name": "Amar Vishwakarma", "link": "https://stackoverflow.com/users/6519590/amar-vishwakarma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519851774, "creation_date": 1519851774, "question_id": 49038501, "link": "https://stackoverflow.com/questions/49038501/getting-undefined-reference-error-while-making-opt-build-but-not-in-debug-build", "title": "Getting undefined reference error while making OPT build but not in debug build", "body": "<p>Can any one explain the following error I get while linking with a prebuilt static libary libsioclient.a.\nThe linking works fine in case of debug build (OPT=0) but fails in OPT=1</p>\n\n<pre><code>*./src/socketio/libsioclient.a(sio_socket.cpp.o): In function `sio::socket:\n:impl::emit(std::string const&amp;, sio::message::list const&amp;, \nstd::function&lt;void (sio::message::list const&amp;)&gt; const&amp;)':\nsio_socket.cpp:(.text+0x2822): undefined reference to `vtable for \nstd::_Sp_counted_ptr&lt;sio::string_message*, (__gnu_cxx::_Lock_policy)2&gt;'\n./src/socketio/libsioclient.a(sio_packet.cpp.o): In function \n`sio::from_json(rapidjson::GenericValue&lt;rapidjson::UTF8&lt;char&gt;, \nrapidjson::MemoryPoolAllocator&lt;rapidjson::CrtAllocator&gt; &gt; const&amp;, \nstd::vector&lt;std::shared_ptr&lt;std::string const&gt;, \nstd::allocator&lt;std::shared_ptr&lt;std::string const&gt; &gt; &gt; const&amp;)':\nsio_packet.cpp:(.text+0x2e34): undefined reference to `vtable for \nstd::_Sp_counted_ptr&lt;sio::string_message*, (__gnu_cxx::_Lock_policy)2&gt;'\nsio_packet.cpp:(.text+0x3300): undefined reference to `vtable for \nstd::_Sp_counted_ptr&lt;sio::object_message*, (__gnu_cxx::_Lock_policy)2&gt;'\ncollect2: error: ld returned 1 exit status*\n</code></pre>\n\n<p>The classes mentioned here i.e. string_message and object_message both derive from the same virtual class message.\nWhile there are many other classes which derive from message, the linker gives error only for these two. Or may be other errors will come down the line when this error gets fixed.</p>\n\n<p>Any clue as to how to triage this linker error would be great help.</p>\n"}, {"tags": ["c++", "compilation"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 4, "creation_date": 1519851769, "post_id": 49038442, "comment_id": 85082178, "body": "These are linking errors - the compiler expects object files/libraries to link to that provides the implementation of what&#39;s declared in <code>Graph.h</code>.  In that source code dir, there&#39;s implementations for all of these (<code>Graph.cpp</code>, <code>Simple_window.cpp</code>, etc.) You need to compile these files as well and include them in your linking step."}, {"owner": {"reputation": 483, "user_id": 6928367, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a165f82262414e74638451bc26c16e30?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjklm", "link": "https://stackoverflow.com/users/6928367/asdfghjklm"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1519855414, "post_id": 49038442, "comment_id": 85084031, "body": "I tried to compile the project, but it doesn&#39;t work. You can see the terminal output above."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1519857506, "post_id": 49038442, "comment_id": 85084910, "body": "Which book? Is it this one: <a href=\"https://stackoverflow.com/questions/15558519/how-can-i-use-stroustrups-graphics-libraries-simple-window-h-graph-h-in\" title=\"how can i use stroustrups graphics libraries simple window h graph h in\">stackoverflow.com/questions/15558519/&hellip;</a>"}, {"owner": {"reputation": 483, "user_id": 6928367, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a165f82262414e74638451bc26c16e30?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjklm", "link": "https://stackoverflow.com/users/6928367/asdfghjklm"}, "edited": false, "score": 0, "creation_date": 1520022022, "post_id": 49038442, "comment_id": 85159311, "body": "Yes, this is the book."}], "owner": {"reputation": 483, "user_id": 6928367, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a165f82262414e74638451bc26c16e30?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjklm", "link": "https://stackoverflow.com/users/6928367/asdfghjklm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519854328, "creation_date": 1519851566, "last_edit_date": 1519854328, "question_id": 49038442, "link": "https://stackoverflow.com/questions/49038442/c-graphics-errors-from-bjarnes-stroustrup-book", "title": "C++ Graphics errors from Bjarnes stroustrup book", "body": "<p>I've been trying to get the C++ graphics to work as I have an assignment involving this. I'm pretty sure my code is error free, but I am having trouble with compiling errors. I took this snippet from the book and it still doesn't work. </p>\n\n<p>Header files I have included:\n<a href=\"http://www.stroustrup.com/Programming/Graphics/\" rel=\"nofollow noreferrer\">http://www.stroustrup.com/Programming/Graphics/</a></p>\n\n<p>I have also download FLTK-1.1.9 which I copied the FL folder into my project directory since I had some issues with files requesting them. I did not install FLTK-1.1.9 as I was told I wouldn't have to.</p>\n\n<p>I'm using CLion, but I have tried compiling with clang(Apple LLVM version 8.1.0 (clang-802.0.42)) as well. </p>\n\n<pre><code>#include \"Simple_window.h\"    \n#include \"Graph.h\"            // get access to our graphics library facilities\n\nint main()\n{\n    using namespace Graph_lib;   // our graphics facilities are in Graph_lib\n\n    Graph_lib::Point tl(100,100);           // to become top left  corner of window\n\n    Simple_window win(tl,600,400,\"Canvas\");    // make a simple window\n\n    Graph_lib::Polygon poly;                // make a shape (a polygon)\n\n    poly.add(Point(300,200));    // add a point\n    poly.add(Point(350,100));    // add another point\n    poly.add(Point(400,200));    // add a third point \n\n    poly.set_color(Color::red);  // adjust properties of poly\n\n    win.attach (poly);           // connect poly to the window\n\n    win.wait_for_button();       // give control to the display engine\n}\n\n\n\n\n/Applications/CLion.app/Contents/bin/cmake/bin/cmake --build /Users/aaaaa/CLionProjects/Assignmen4/cmake-build-debug --target Assignmen4 -- -j 4\n[ 50%] Linking CXX executable Assignmen4\nUndefined symbols for architecture x86_64:\n  \"Fl::wait()\", referenced from:\n      Simple_window::wait_for_button() in main.cpp.o\n  \"Fl::redraw()\", referenced from:\n      Simple_window::wait_for_button() in main.cpp.o\n  \"Fl_Widget::hide()\", referenced from:\n      Graph_lib::Widget::hide() in main.cpp.o\n  \"Fl_Widget::show()\", referenced from:\n      Graph_lib::Widget::show() in main.cpp.o\n  \"Fl_Window::hide()\", referenced from:\n      vtable for Simple_window in main.cpp.o\n  \"Fl_Window::show()\", referenced from:\n      vtable for Simple_window in main.cpp.o\n  \"Fl_Window::flush()\", referenced from:\n      vtable for Simple_window in main.cpp.o\n  \"Fl_Window::handle(int)\", referenced from:\n      vtable for Simple_window in main.cpp.o\n  \"Fl_Window::resize(int, int, int, int)\", referenced from:\n      vtable for Simple_window in main.cpp.o\n  \"Fl_Window::~Fl_Window()\", referenced from:\n      Graph_lib::Window::~Window() in main.cpp.o\n  \"Graph_lib::Window::draw()\", referenced from:\n      vtable for Simple_window in main.cpp.o\n  \"Graph_lib::Window::attach(Graph_lib::Shape&amp;)\", referenced from:\n      _main in main.cpp.o\n  \"Graph_lib::Window::attach(Graph_lib::Widget&amp;)\", referenced from:\n      Simple_window::Simple_window(Graph_lib::Point, int, int, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;) in main.cpp.o\n  \"Graph_lib::Window::Window(Graph_lib::Point, int, int, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;)\", referenced from:\n      Simple_window::Simple_window(Graph_lib::Point, int, int, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;) in main.cpp.o\n  \"Graph_lib::Polygon::add(Graph_lib::Point)\", referenced from:\n      _main in main.cpp.o\n  \"typeinfo for Graph_lib::Window\", referenced from:\n      typeinfo for Simple_window in main.cpp.o\n  \"vtable for Graph_lib::Open_polyline\", referenced from:\n      Graph_lib::Open_polyline::Open_polyline() in main.cpp.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n  \"vtable for Graph_lib::Closed_polyline\", referenced from:\n      Graph_lib::Closed_polyline::Closed_polyline() in main.cpp.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n  \"vtable for Graph_lib::Shape\", referenced from:\n      Graph_lib::Shape::Shape() in main.cpp.o\n      Graph_lib::Shape::~Shape() in main.cpp.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n  \"vtable for Graph_lib::Button\", referenced from:\n      Graph_lib::Button::Button(Graph_lib::Point, int, int, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, void (*)(void*, void*)) in main.cpp.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n  \"vtable for Graph_lib::Window\", referenced from:\n      Graph_lib::Window::~Window() in main.cpp.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n  \"vtable for Graph_lib::Polygon\", referenced from:\n      Graph_lib::Polygon::Polygon() in main.cpp.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n  \"_fl_color_\", referenced from:\n      fl_color() in main.cpp.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[3]: *** [Assignmen4] Error 1\nmake[2]: *** [CMakeFiles/Assignmen4.dir/all] Error 2\nmake[1]: *** [CMakeFiles/Assignmen4.dir/rule] Error 2\nmake: *** [Assignmen4] Error 2\n</code></pre>\n\n<p>when trying to use cmake to compile the directory, this is the errors that i receive. i have just updated XCODE to the most recent version.</p>\n\n<pre><code>Compiling Fl.cxx...\nIn file included from Fl.cxx:35:\nIn file included from ../FL/x.H:41:\n../FL/mac.H:49:17: error: use of undeclared identifier 'NewRgn'\n  Fl_Region R = NewRgn();\n                ^\n../FL/mac.H:50:3: error: use of undeclared identifier 'SetRectRgn'\n  SetRectRgn(R, x, y, x+w, y+h);\n  ^\n../FL/mac.H:54:3: error: use of undeclared identifier 'DisposeRgn'; did you mean\n      'DisposePtr'?\n  DisposeRgn(r);\n  ^~~~~~~~~~\n  DisposePtr\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacMemory.h:1188:1: note: \n      'DisposePtr' declared here\nDisposePtr(Ptr p)                                             __OSX_AVAI...\n^\nIn file included from Fl.cxx:35:\nIn file included from ../FL/x.H:41:\n../FL/mac.H:54:14: error: cannot initialize a parameter of type 'Ptr'\n      (aka 'char *') with an lvalue of type 'Fl_Region'\n      (aka 'OpaqueRgnHandle *')\n  DisposeRgn(r);\n             ^\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacMemory.h:1188:16: note: \n      passing argument to parameter 'p' here\nDisposePtr(Ptr p)                                             __OSX_AVAI...\n               ^\nIn file included from Fl.cxx:35:\nIn file included from ../FL/x.H:41:\n../FL/mac.H:72:3: error: unknown type name 'CursHandle'; did you mean\n      'CharsHandle'?\n  CursHandle cursor;\n  ^~~~~~~~~~\n  CharsHandle\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/TextEdit.h:352:41: note: \n      'CharsHandle' declared here\ntypedef CharsPtr *                      CharsHandle;\n                                        ^\nIn file included from Fl.cxx:35:\nIn file included from ../FL/x.H:41:\n../FL/mac.H:99:8: error: unknown type name 'CursHandle'; did you mean\n      'CharsHandle'?\nextern CursHandle fl_default_cursor;\n       ^~~~~~~~~~\n       CharsHandle\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/TextEdit.h:352:41: note: \n      'CharsHandle' declared here\ntypedef CharsPtr *                      CharsHandle;\n                                        ^\nFl.cxx:487:3: error: use of undeclared identifier 'GetPort'\n  GetPort( &amp;port );\n  ^\nFl.cxx:489:5: error: use of undeclared identifier 'QDFlushPortBuffer'\n    QDFlushPortBuffer( port, 0 );\n    ^\nFl.cxx:715:27: warning: '&amp;&amp;' within '||' [-Wlogical-op-parentheses]\n    if (grab() || modal() &amp;&amp; window != modal()) return 0;\n               ~~ ~~~~~~~~^~~~~~~~~~~~~~~~~~~~\nFl.cxx:715:27: note: place parentheses around the '&amp;&amp;' expression to silence\n      this warning\n    if (grab() || modal() &amp;&amp; window != modal()) return 0;\n                          ^\n                  (                           )\nFl.cxx:1179:21: error: use of undeclared identifier 'NewRgn'\n      Fl_Region R = NewRgn(); \n                    ^\nFl.cxx:1180:7: error: use of undeclared identifier 'SetRectRgn'\n      SetRectRgn(R, X, Y, X+W, Y+H);\n      ^\nFl.cxx:1181:7: error: use of undeclared identifier 'UnionRgn'\n      UnionRgn(R, i-&gt;region, i-&gt;region);\n      ^\nFl.cxx:1182:7: error: use of undeclared identifier 'DisposeRgn'; did you mean\n      'DisposePtr'?\n      DisposeRgn(R);\n      ^~~~~~~~~~\n      DisposePtr\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacMemory.h:1188:1: note: \n      'DisposePtr' declared here\nDisposePtr(Ptr p)                                             __OSX_AVAI...\n^\nFl.cxx:1182:18: error: cannot initialize a parameter of type 'Ptr'\n      (aka 'char *') with an lvalue of type 'Fl_Region'\n      (aka 'OpaqueRgnHandle *')\n      DisposeRgn(R);\n                 ^\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacMemory.h:1188:16: note: \n      passing argument to parameter 'p' here\nDisposePtr(Ptr p)                                             __OSX_AVAI...\n               ^\nIn file included from Fl.cxx:1214:\n./Fl_mac.cxx:91:1: error: unknown type name 'CursHandle'; did you mean\n      'CharsHandle'?\nCursHandle fl_default_cursor;\n^~~~~~~~~~\nCharsHandle\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/TextEdit.h:352:41: note: \n      'CharsHandle' declared here\ntypedef CharsPtr *                      CharsHandle;\n                                        ^\nIn file included from Fl.cxx:1214:\n./Fl_mac.cxx:106:8: error: unknown type name 'CursPtr'; did you mean 'CharsPtr'?\nstatic CursPtr default_cursor_ptr;\n       ^~~~~~~\n       CharsPtr\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Frameworks/HIToolbox.framework/Headers/TextEdit.h:351:41: note: \n      'CharsPtr' declared here\ntypedef char *                          CharsPtr;\n                                        ^\nIn file included from Fl.cxx:1214:\n./Fl_mac.cxx:107:8: error: unknown type name 'Cursor'\nstatic Cursor default_cursor;\n       ^\n./Fl_mac.cxx:471:15: error: use of undeclared identifier 'GetMenuItemRefCon'\n  OSErr rrc = GetMenuItemRefCon( cmd-&gt;menu.menuRef, cmd-&gt;menu.menuItemIn...\n              ^\n./Fl_mac.cxx:475:23: warning: cast to 'Fl_Menu_Item *' from smaller integer type\n      'UInt32' (aka 'unsigned int') [-Wint-to-pointer-cast]\n    Fl_Menu_Item *m = (Fl_Menu_Item*)ref;\n                      ^\n./Fl_mac.cxx:479:7: error: use of undeclared identifier 'SetItemMark'\n      SetItemMark( cmd-&gt;menu.menuRef, cmd-&gt;menu.menuItemIndex, (m-&gt;flag...\n      ^\n./Fl_mac.cxx:491:9: error: use of undeclared identifier 'SetItemMark'\n        SetItemMark( cmd-&gt;menu.menuRef, i, ( j-&gt;flags &amp; FL_MENU_VALUE ) ...\n        ^\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\n2 warnings and 20 errors generated.\nmake[1]: *** [Fl.o] Error 1\nmake: *** [all] Error 1\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "sfml"], "answers": [{"comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1519857914, "post_id": 49039593, "comment_id": 85085103, "body": "You can&#39;t pass a reference, but as you correctly pointed out you can pass a <code>std::reference_wrapper&lt;T&gt;</code>. This is since <code>std::thread</code>s constructor takes it&#39;s arguments by value."}, {"owner": {"reputation": 303, "user_id": 2507223, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3150c36f7f63220b3b28fbe7e622305d?s=128&d=identicon&r=PG", "display_name": "connormcwood", "link": "https://stackoverflow.com/users/2507223/connormcwood"}, "edited": false, "score": 1, "creation_date": 1519858622, "post_id": 49039593, "comment_id": 85085417, "body": "@Daniel Thanks Daniel, std::ref() is what I was missing here. Thank you very much for taking the time to answer this question."}, {"owner": {"reputation": 35530, "user_id": 196844, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20232ad0698d2ac6c0f127d5eb850254?s=128&d=identicon&r=PG", "display_name": "Daniel Trebbien", "link": "https://stackoverflow.com/users/196844/daniel-trebbien"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1519861366, "post_id": 49039593, "comment_id": 85086252, "body": "@super Yes, you are right. I have corrected my answer."}], "tags": [], "owner": {"reputation": 35530, "user_id": 196844, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20232ad0698d2ac6c0f127d5eb850254?s=128&d=identicon&r=PG", "display_name": "Daniel Trebbien", "link": "https://stackoverflow.com/users/196844/daniel-trebbien"}, "is_accepted": true, "score": 1, "last_activity_date": 1519861331, "last_edit_date": 1519861331, "creation_date": 1519856452, "answer_id": 49039593, "question_id": 49038441, "link": "https://stackoverflow.com/questions/49038441/call-a-thread-on-an-already-existing-class-rather-than-creating-one/49039593#49039593", "title": "Call a thread on an already existing class rather than creating one", "body": "<p>As AssetManager::LoadSpriteSheets has not been provided, I am not entirely sure, but it appears that you are invoking the AssetManager::LoadSpriteSheets member function on a <em>copy</em> of the <code>AssetManager</code> instance, whereas you want to invoke the AssetManager::LoadSpriteSheets member function on the <code>this-&gt;_data-&gt;assets</code> instance.</p>\n\n<p>See the comments to <a href=\"https://stackoverflow.com/a/20586097/196844\">this post</a> and <a href=\"https://stackoverflow.com/questions/10673585/start-thread-with-member-function#comment13848992_10673671\">this comment</a>. When constructing a thread that should run a member function on a particular object, you need to pass a pointer, reference wrapper, or shared_ptr to the object. One way to accomplish this is to use std::ref():</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;utility&gt;\n\nstruct AssetManager {\n    AssetManager() { }\n    virtual ~AssetManager() { }\n\n    void LoadSpriteSheets() {\n        std::cout &lt;&lt; \"(in thread): assets = \" &lt;&lt; static_cast&lt;const void*&gt;(this) &lt;&lt; \"\\n\";\n    }\n};\n\nstruct GameData\n{\n    AssetManager assets;\n};\n\ntypedef std::shared_ptr&lt;GameData&gt; GameDataRef;\n\nint main() {\n    GameDataRef data = std::make_shared&lt;GameData&gt;();\n\n    std::cout &lt;&lt; \"data-&gt;assets = \" &lt;&lt; static_cast&lt;const void*&gt;(&amp;data-&gt;assets) &lt;&lt; \"\\n\";\n\n    std::thread t1(&amp;AssetManager::LoadSpriteSheets, std::ref(data-&gt;assets));\n    t1.join();\n\n    std::cout &lt;&lt; \"thread finished.\\n\";\n\n    std::cout &lt;&lt; \"data-&gt;assets = \" &lt;&lt; static_cast&lt;const void*&gt;(&amp;data-&gt;assets) &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>This will output something like:</p>\n\n<pre>\ndata->assets = 0x7fb942402808\n(in thread): assets = 0x7fb942402808\nthread finished.\ndata->assets = 0x7fb942402808\n</pre>\n\n<p>Without std::ref(), the output is something like:</p>\n\n<pre>\ndata->assets = 0x7fb5bcc02808\n(in thread): assets = 0x7fb5bcc02868\nthread finished.\ndata->assets = 0x7fb5bcc02808\n</pre>\n\n<p>(notice that the <code>AssetManager</code> instance is different within the thread)</p>\n\n<p>Be careful to make sure that the <code>AssetManager</code> object exists throughout the invocation of the thread.</p>\n"}, {"tags": [], "owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "is_accepted": false, "score": 0, "last_activity_date": 1519893422, "creation_date": 1519893422, "answer_id": 49045627, "question_id": 49038441, "link": "https://stackoverflow.com/questions/49038441/call-a-thread-on-an-already-existing-class-rather-than-creating-one/49045627#49045627", "title": "Call a thread on an already existing class rather than creating one", "body": "<p>Personally I'd try to avoid multithreading wherever possible, especially when it's related to OpenGL, since in the end most things have to be synced again in some way, which is causing overhead not directly visible to you (and your typical loading screen shouldn't be too elaborate anyway).</p>\n\n<p>The approach I typically use is a specific loading state that will continue drawing on screen and try to load (or download!) as many assets as possible between screen updates.</p>\n\n<p>This is from memory and basically just to show the concept:</p>\n\n<pre><code>sf::Clock timer;\nstd::queue&lt;std::string&gt; assets;\nstd::size_t numAssets = 0;\n\n// to queue some file for loading/processing\nassets.push(\"/path/to/my/file.xml\");\n++numAssets;\n\n// inside the main loop/state update\ntimer.restart();\ndo {\n    loadMyAsset(assets.front());\n    assets.pop();\n} while (!assets.empty() &amp;&amp; mTimer.getEllapsedTime() &lt; sf::milliseconds(10))\n\n// drawing\nconst std::size_t progress = 100 - 100 * assets.size() / numAssets;\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 2507223, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3150c36f7f63220b3b28fbe7e622305d?s=128&d=identicon&r=PG", "display_name": "connormcwood", "link": "https://stackoverflow.com/users/2507223/connormcwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 49039593, "answer_count": 2, "score": 2, "last_activity_date": 1519893422, "creation_date": 1519851559, "question_id": 49038441, "link": "https://stackoverflow.com/questions/49038441/call-a-thread-on-an-already-existing-class-rather-than-creating-one", "title": "Call a thread on an already existing class rather than creating one", "body": "<p>I have a game engine built with SFML and I was attempting to create a loading screen which is updated while assets are loaded. In this case it is one big XML file.</p>\n\n<p>I wanted to use a thread as this process took about ten seconds to complete and therefore the application would be stuck until it is completed.</p>\n\n<p>I decided to use the thread and detach so that the AssetManager's LoadSpriteSheets method could be called. (Essentially loads an XML sheet and initialises them as sprites)</p>\n\n<p>With the game state declaring a struct it is passed through the states class to give any state access to the struct. Which in returns give access to the AssetManager.</p>\n\n<pre><code>struct GameData\n{\n    StateMachine machine;\n    sf::RenderWindow window;\n    AssetManager assets;\n    InputManager input;\n};\n</code></pre>\n\n<p>In the initalise section of the SplashStage the thread is called</p>\n\n<pre><code>std::thread t1(&amp;AssetManager::LoadSpriteSheets, this-&gt;_data-&gt;assets);\nt1.detach();\n</code></pre>\n\n<p>As you can see, my idea was to pass the AssetManager (this->_data->assets) to the thread and call its LoadSpriteSheets Method. It does do this but it creates a new instance of the AssetManager resulting in my later polling of the GetStatus Method to result in 0. (GetStatus essentially gets the progress of the LoadSpriteSheets Method) I was going to use that to display an informative loading bar while waiting for the application to load.</p>\n\n<p>Is there a way can I call a thread on the AssetManager without initialising a new Object? Or is a rewrite required as the struct is a shared_ptr. </p>\n\n<p>Feel free to correct me also if you see a better solution to what I am trying to achieve.</p>\n\n<p>Relevant Classes:</p>\n\n<pre><code>#include \"SplashState.h\"\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;thread&gt;\n\n#include \"AssetManager.h\"\n\n#include \"Definitions.h\"\nSplashState::SplashState(GameDataRef data) : _data(data)\n{\n\n}\n\nvoid SplashState::Init()\n{\n    this-&gt;_data-&gt;assets.LoadTexture(\"Splash State Background\", SPLASH_STATE_BACKGROUND_FILEPATH);\n    _background.setTexture(this-&gt;_data-&gt;assets.GetTexture(\"Splash State Background\"));\n\n\n\n    std::thread t1(&amp;AssetManager::LoadSpriteSheets, this-&gt;_data-&gt;assets);\n    t1.detach();\n\n\n    std::cout &lt;&lt; \"Completed In Splash\" &lt;&lt; std::endl;\n    /*_test.setTexture(this-&gt;_data-&gt;assets.GetTexture(\"spaceShips_001.png\"));\n    _test.setPosition((SCREEN_WIDTH / 2) - (_test.getGlobalBounds().width / 2), _test.getGlobalBounds().height / 2);*/\n\n    //std::thread t2(&amp;SplashState::LoadXML, this);\n\n    /*_test.setTexture(this-&gt;_data-&gt;assets.GetTexture(\"spaceAstronauts_001.png\"));\n    _test.setPosition((SCREEN_WIDTH / 2) - (_test.getGlobalBounds().width / 2), _test.getGlobalBounds().height / 2);*/\n}\n</code></pre>\n\n<p>Game.cpp</p>\n\n<pre><code>#pragma once\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;SFML\\Graphics.hpp&gt;\n#include \"StateMachine.h\"\n#include \"AssetManager.h\"\n#include \"InputManager.h\"\n\nstruct GameData\n{\n    StateMachine machine;\n    sf::RenderWindow window;\n    AssetManager assets;\n    InputManager input;\n};\n\ntypedef std::shared_ptr&lt;GameData&gt; GameDataRef;\n\nclass Game\n{\npublic:\n    Game(int width, int height, std::string title);\n\nprivate: \n    const float dt = 1.0f / 60.0f;\n    sf::Clock _clock;\n\n    GameDataRef _data = std::make_shared&lt;GameData&gt;();\n\n    void Run();\n};\n\n#include \"Game.h\"\n#include \"SplashState.h\"\n\nGame::Game(int width, int height, std::string title)\n{\n    _data-&gt;window.create(sf::VideoMode(width, height), title, sf::Style::Close | sf::Style::Titlebar);\n    _data-&gt;machine.AddState(StateRef(new SplashState(this-&gt;_data)));\n    this-&gt;Run();\n}\n</code></pre>\n"}, {"tags": ["c++", "hash"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1519851577, "post_id": 49038377, "comment_id": 85082074, "body": "Is it an error or a warning?  You should be able to run an executable with a warning (we&#39;ve done it at my shop)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519851610, "post_id": 49038377, "comment_id": 85082094, "body": "Since the <code>&lt;bits&#47;stdc++.h&gt;</code> is not standard, I&#39;d begin with that."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519851689, "post_id": 49038377, "comment_id": 85082136, "body": "You can use the ancient art of using constructors in structures.  Create a constructor in <code>Hash</code> that initializes the <code>count</code> member."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1519851812, "post_id": 49038377, "comment_id": 85082198, "body": "If you are actually using C++: 1) Use <code>new</code> not <code>malloc</code>.  <code>malloc</code> does not call constructors. 2) Prefer <code>std::string</code> and not character arrays.  3) Prefer <code>std::fstream</code> instead of <code>FILE *</code>.  4) Pass pointers by reference if you are going to modify them."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519851901, "post_id": 49038377, "comment_id": 85082256, "body": "Your program would be more efficient by using an array of <code>std::string</code>, rather than a <code>map</code>.  A <code>map</code> is overkill for converting numbers to month names."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519851968, "post_id": 49038377, "comment_id": 85082290, "body": "Also, implement <code>operator&gt;&gt;</code> for your <code>record</code> class.  You input loop becomes: <code>while (cin &gt;&gt; r)</code>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1519852098, "post_id": 49038377, "comment_id": 85082349, "body": "<i>&quot;non-static data member initializers only available with -std=c++11&quot;</i>  So you <i>are</i> using the option -std=c++11, right?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1519852976, "post_id": 49038377, "comment_id": 85082866, "body": "@BoPersson: The diagnostic suggests otherwise."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9192171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8KCq.jpg?s=128&g=1", "display_name": "Strahinja Luki\u0107", "link": "https://stackoverflow.com/users/9192171/strahinja-luki%c4%87"}, "is_accepted": false, "score": 1, "last_activity_date": 1519938914, "creation_date": 1519938914, "answer_id": 49058802, "question_id": 49038377, "link": "https://stackoverflow.com/questions/49038377/im-getting-a-warning-that-is-preventing-me-from-running-my-program-and-im-not/49058802#49058802", "title": "I&#39;m getting a warning that is preventing me from running my program and I&#39;m not sure how to fix it", "body": "<p>The error message is self-explanatory. You are not allowed to initialize non-static data members within the struct declaration, as you do in line 27 of your code. Instead, you may, for example:</p>\n\n<ol>\n<li>Define the constructor of the <code>Hash</code> struct and initialize the <code>count</code> member in the c-tor. </li>\n<li>Initialize the count member every time after instantiating an object of the <code>Hash</code> struct. I would not recommend this solution, especially if you insist on declaring of the <code>Hash H[37]</code> array in the global scope (which I also would not recommend, but that is another question altogether.).</li>\n</ol>\n\n<p>In the sense of point 1. above, the <code>Hash</code> class declaration could look like this:</p>\n\n<pre><code>struct Hash{\n    Hash() :\n        head(NULL),\n        count(0)\n    {}\n\n    struct Node * head ;\n    int count;\n};\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9296376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c56d6ed7bb20bb3337adfea30033d4?s=128&d=identicon&r=PG&f=1", "display_name": "Anon_T", "link": "https://stackoverflow.com/users/9296376/anon-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519938914, "creation_date": 1519851317, "last_edit_date": 1519852811, "question_id": 49038377, "link": "https://stackoverflow.com/questions/49038377/im-getting-a-warning-that-is-preventing-me-from-running-my-program-and-im-not", "title": "I&#39;m getting a warning that is preventing me from running my program and I&#39;m not sure how to fix it", "body": "<p>The code is supposed to read input from a file and put that info into a hashing table, and if any collisions arise, it's supposed to handle those as well. I'm not sure how to fix the error I'm getting with the line <strong><code>int count = 0</code></strong>, this is the error warning:</p>\n\n<pre><code>non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]\n</code></pre>\n\n<p>..</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;map&gt; \n#include &lt;ctime&gt;\n#include&lt;bits/stdc++.h&gt;\nusing namespace std ;\n\nstruct record{\n        char last_name[15] ;\n        char first_name[15] ;\n        unsigned int account_num ;\n        unsigned int month ;\n        unsigned int day ;\n        unsigned int year ;\n        float annual_salary ;\n        char dept_code ; \n        char phone_num[12] ;\n};\n\nstruct Node{\n        record p ;\n        struct Node * next ;\n};\nstruct Hash{\n        struct Node * head ;\n        int count = 0 ;\n};\nHash H[37] ;\n/* Given a reference (pointer to pointer) to the head\n   of a list and an int, appends a new node at the end  */\nvoid append(struct Node** head_ref,record new_data)\n{\n    /* 1. allocate node */\n    struct Node* new_node = (struct Node*) malloc(sizeof(struct Node));\n\n    struct Node *last = *head_ref;  /* used in step 5*/\n\n    /* 2. put in the data  */\n    new_node-&gt;p  = new_data;\n\n    /* 3. This new node is going to be the last node, so make next of\n          it as NULL*/\n    new_node-&gt;next = NULL;\n\n    /* 4. If the Linked List is empty, then make the new node as head */\n    if (*head_ref == NULL)\n    {\n       *head_ref = new_node;\n       return;\n    }\n\n    /* 5. Else traverse till the last node */\n    while (last-&gt;next != NULL)\n        last = last-&gt;next;\n\n    /* 6. Change the next of last node */\n    last-&gt;next = new_node;\n    return;\n}\n\nvoid insert(record r)\n{\n        int x = r.account_num %37 ;\n        append(&amp;(H[x].head),r) ;\n}\nmap&lt;int,string&gt; m ;\nvoid printdata()\n{\n        time_t now = time(0);\n        char* dt = ctime(&amp;now) ;\n        int z = strlen(dt) ;\n        int yea = 0 , temp = 1;\n        z--;\n        while(dt[z]!=' ')\n        {\n                yea += temp*(dt[z]-'0');\n                temp = temp*10 ;\n                z--;\n        }\n        int mont ;\n        char ch[3] ;\n        ch[0] = dt[4] ;\n        ch[1] = dt[5] ;\n        ch[2] = dt[6] ;\n        for(int i=1;i&lt;=12;i++)\n        {\n                if(m[i]==ch)\n                {\n                        mont = i ;\n                        break ;\n                }\n        }\n        m[1] = \"Jan\" ;\n        m[2] = \"Feb\" ;\n        m[3] = \"Mar\" ;\n        m[4] = \"Apr\" ;\n        m[5] = \"May\" ;\n        m[6] = \"Jun\" ;\n        m[7] = \"Jul\" ;\n        m[8] = \"Aug\" ;\n        m[9] = \"Sep\" ;\n        m[10] = \"Oct\" ;\n        m[11] = \"Nov\" ;\n        m[12] = \"Dec\" ;\n        struct Node * q ;\n        cout &lt;&lt; \"LAST Name       Acct Number     date of birth            annual salary          department code       age\\n\";\n        for(int i=0;i&lt;=36;i++)\n        {\n                q = (H[i].head);\n                int cnt = 0 ;\n                while(q!=NULL)\n                {\n                        cnt++;\n                        q = q-&gt;next ;\n                }\n                temp = q-&gt;p.year - yea + (q-&gt;p.month - mont&gt;=6 ? 1:0) ;\n                q = H[i].head ; \n                cout &lt;&lt; q-&gt;p.last_name &lt;&lt;\" \"&lt;&lt;q-&gt;p.account_num ;\n                if(cnt&gt;1)cout&lt;&lt;\"*\";\n                cout &lt;&lt;\" \"&lt;&lt;m[q-&gt;p.month]&lt;&lt;\". \"&lt;&lt;q-&gt;p.day&lt;&lt;\",\"&lt;&lt;q-&gt;p.year&lt;&lt;\" \"&lt;&lt;q-&gt;p.annual_salary&lt;&lt;\" \"&lt;&lt;q-&gt;p.dept_code&lt;&lt;\" \"&lt;&lt;temp&lt;&lt;\"\\n\" ;;\n                if(q==NULL)continue ;\n                q = q-&gt;next ;\n                while(q!=NULL)\n                {\n                        temp = q-&gt;p.year - yea + (q-&gt;p.month - mont&gt;=6 ? 1:0) ;\n                        cout &lt;&lt; q-&gt;p.last_name &lt;&lt;\" \"&lt;&lt;q-&gt;p.account_num ;\n                    cout &lt;&lt;\" \"&lt;&lt;m[q-&gt;p.month]&lt;&lt;\". \"&lt;&lt;q-&gt;p.day&lt;&lt;\",\"&lt;&lt;q-&gt;p.year&lt;&lt;\" \"&lt;&lt;q-&gt;p.annual_salary&lt;&lt;\" \"&lt;&lt;q-&gt;p.dept_code&lt;&lt;\" \"&lt;&lt;temp&lt;&lt;\"\\n\" ;;\n                   q = q-&gt;next ;\n                }\n        }\n        return ;\n}\nint main()\n{\n\n        record r ;\n        freopen(\"data.txt\",\"r\",stdin);\n        while(cin &gt;&gt; r.last_name)\n        {\n             cin &gt;&gt; r.first_name &gt;&gt; r.account_num &gt;&gt; r.month &gt;&gt; r.day &gt;&gt; r.year &gt;&gt; r.annual_salary &gt;&gt; r.dept_code ;\n             if(cin &gt;&gt; r.phone_num) ;\n             insert(r) ;\n        }\n\n        return 0 ;\n}\n</code></pre>\n"}, {"tags": ["c++", "syntax", "compilation"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1519851124, "post_id": 49038268, "comment_id": 85081839, "body": "Change <code>bool sfun</code> to <code>static bool sfun</code>, so it won&#39;t be a member function instead it will be a class function."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1519851302, "post_id": 49038268, "comment_id": 85081936, "body": "If it&#39;s inside the class you need to refer to it as <code>&amp;Solution::sfun</code>, but this will only work if you make it static in your example."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519851872, "post_id": 49038268, "comment_id": 85082239, "body": "@Eljay -- terminology: it&#39;s still a <b>member function</b>, but more completely it&#39;s a <b>static member function</b>."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1519853061, "post_id": 49038268, "comment_id": 85082899, "body": "Alternatively, you can use <code>struct</code> with your comparator inside the class <a href=\"https://ideone.com/AMcMyi\" rel=\"nofollow noreferrer\">ideone.com/AMcMyi</a>"}, {"owner": {"reputation": 1, "user_id": 8883588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c3a4414e28597dc94125a4ba55f7d43?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/8883588/ben"}, "edited": false, "score": 0, "creation_date": 1519854719, "post_id": 49038268, "comment_id": 85083729, "body": "is there any way I can still define sfun as a non-static function inside the class (a member function) but still able to use it with the sort? If it&#39;s just a matter of signature match, the compiler should allow us to do that, right? If so, that&#39;s the syntax?  If not, what&#39;s the point of preventing us from using it that way?"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1519860103, "post_id": 49038268, "comment_id": 85085898, "body": "@Ben what is wrong with the <code>struct</code> approach? You can call <code>sfun</code> as a comparator, you can call it like a normal method within the class or if you move it to <code>public:</code> you could call it like a public method"}], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": false, "score": 1, "last_activity_date": 1519851349, "creation_date": 1519851349, "answer_id": 49038388, "question_id": 49038268, "link": "https://stackoverflow.com/questions/49038268/if-its-defined-as-a-member-function-inside-a-c-class-i-got-non-standard-syn/49038388#49038388", "title": "if it&#39;s defined as a member function inside a c++ class, I got &quot;non-standard syntax; use &#39;&amp;&#39; to create a pointer to member&quot;", "body": "<blockquote>\n<pre><code>class Solution {\n    bool sfun(const Interval &amp;a, const Interval &amp;b) {\n        return a.start &lt; b.start;\n    }\n</code></pre>\n</blockquote>\n\n<p><code>sfun</code> is a member function. You can access the implicit <code>this</code> pointer inside of it. So you can roughly view it as a function with the signature <code>bool sfun(Solution* this, const Interval&amp; a, const Interval&amp; b)</code>.</p>\n\n<p>It works when you put <code>sfun</code> outside of the class because then it's not a member function, but a regular free function. It's signature would then be <code>bool sfun(const Interval &amp;a, const Interval &amp;b)</code></p>\n\n<p>You can also make <code>sfun</code> a <code>static</code> function:</p>\n\n<pre><code>class Solution {\n    static bool sfun(const Interval &amp;a, const Interval &amp;b) {\n        return a.start &lt; b.start;\n    }\n</code></pre>\n\n<p><code>static</code> member functions are \"class functions.\" They don't work on instances of a class. There is no implicit <code>this</code> pointer. It would just be a regular function.</p>\n"}], "owner": {"reputation": 1, "user_id": 8883588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c3a4414e28597dc94125a4ba55f7d43?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/8883588/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1519852233, "answer_count": 1, "score": 0, "last_activity_date": 1519851349, "creation_date": 1519850871, "question_id": 49038268, "link": "https://stackoverflow.com/questions/49038268/if-its-defined-as-a-member-function-inside-a-c-class-i-got-non-standard-syn", "closed_reason": "Duplicate", "title": "if it&#39;s defined as a member function inside a c++ class, I got &quot;non-standard syntax; use &#39;&amp;&#39; to create a pointer to member&quot;", "body": "<p>If I defined sfun() as a member function inside a class, I got the compile error message: \"non-standard syntax; use '&amp;' to create a pointer to member\" at the line of \"sort(intervals.begin(), intervals.end(), sfun);\"</p>\n\n<p>However, if I put it outside of the class, it's fine. Why? </p>\n\n<pre><code>struct Interval {\n    int start;\n    int end;\n    Interval() : start(0), end(0) {}\n    Interval(int s, int e) : start(s), end(e) {}\n};\n\nclass Solution {\n    bool sfun(const Interval &amp;a, const Interval &amp;b) {\n        return a.start &lt; b.start;\n    }\n\n    public:   \n\n    vector&lt;Interval&gt; merge(vector&lt;Interval&gt;&amp; intervals) {\n\n        sort(intervals.begin(), intervals.end(), sfun);\n    ....\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "object-lifetime", "placement-new", "object-model"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1519851008, "post_id": 49038246, "comment_id": 85081774, "body": "related <a href=\"https://stackoverflow.com/q/30114397/1708801\">\u201cconstructing\u201d a trivially-copyable object with memcpy</a> there are <a href=\"https://stackoverflow.com/questions/linked/30114397?sort=newest\">several linked questions</a> that cover several variations of this theme one of them will almost surely cover this case."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1519854864, "post_id": 49038246, "comment_id": 85083794, "body": "Relevant is <a href=\"http://wg21.link/p0593\" rel=\"nofollow noreferrer\">P0593</a> (revision 2 recently updated), although that hasn&#39;t gotten so far yet as to propose concrete changes to the standard"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1519856077, "post_id": 49038246, "comment_id": 85084344, "body": "this isn&#39;t a dupe of the other threads (the placement-new is substantially different to <code>memcpy</code> or whatever) . The original title of this thread was misleading as to the real issue it raises"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1519858494, "post_id": 49038246, "comment_id": 85085357, "body": "@M.M: But <a href=\"https://stackoverflow.com/a/40874245/734069\">the answer is the same</a>. The placement <code>new</code> is what causes the object to be created, pursuant to [intro.object]/1. You cannot start the lifetime of an object that doesn&#39;t exist."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1519858634, "post_id": 49038246, "comment_id": 85085421, "body": "@NicolBolas Nothing in the answer you linked applies to this question. In the code in this question there <i>is</i> an object created by placement-new; that answer (and the question it answers) is talking about the situation where there are no objects created"}], "answers": [{"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1519878447, "post_id": 49039064, "comment_id": 85090319, "body": "That&#39;s unexpected. I like how the standard knows how this looks totally bogus but is there to make the language consistent"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1519888579, "post_id": 49039064, "comment_id": 85093573, "body": "@PasserBy The standard would seem more consistent if [basic.life]/1 were completed by [intro.object]/1 in this answer: <i>[...]An object is created by a definition, by a new-expression, when implicitly changing the active member of a union, or when a temporary object is created</i>"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1576225468, "post_id": 49039064, "comment_id": 104837821, "body": "@Oliv When is a definition executed?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1576244145, "post_id": 49039064, "comment_id": 104846822, "body": "@curiousguy That is a trap no? I think before C++20 it was when the placement allocation function returns. But now, it is when the vacuous initialization of the int has been completed."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 7, "last_activity_date": 1519856679, "last_edit_date": 1519856679, "creation_date": 1519854115, "answer_id": 49039064, "question_id": 49038246, "link": "https://stackoverflow.com/questions/49038246/at-what-point-does-the-lifetime-of-a-trivial-type-created-by-placement-new-start/49039064#49039064", "title": "At what point does the lifetime of a trivial type created by placement-new start?", "body": "<p>Technically, the <em>new-expression</em> always obtains storage. The code <code>new(p) int</code> both obtains storage and creates an object, and according to [basic.life]/1, the object's lifetime began when <code>new(p) int</code> obtained the storage.</p>\n\n<p>According to N4659 [expr.new], the code <code>new(p) int</code> generates a call to an allocation function <code>::operator new(sizeof(int), p)</code>.  And under [new.delete.placement], the standard library defines such a function:</p>\n\n<blockquote>\n  <p><code>void* operator new(std::size_t size, void* ptr) noexcept;</code></p>\n  \n  <p><em>Returns:</em> ptr.</p>\n  \n  <p><em>Remarks:</em> Intentionally performs no other action.</p>\n</blockquote>\n\n<p>Although \"no other action\" is performed, and probably the implementation will optimize out any actual function call, this call to an allocation function still counts as obtaining storage for the object being created by the <em>new-expression</em>.</p>\n"}], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 3, "accepted_answer_id": 49039064, "answer_count": 1, "score": 8, "last_activity_date": 1576222140, "creation_date": 1519850783, "last_edit_date": 1576222140, "question_id": 49038246, "link": "https://stackoverflow.com/questions/49038246/at-what-point-does-the-lifetime-of-a-trivial-type-created-by-placement-new-start", "title": "At what point does the lifetime of a trivial type created by placement-new start?", "body": "<p>During a dive into dynamic memory, it occurred to me it appears contradictory how trivial types begin their lifetime. Consider the snippet</p>\n\n<pre><code>void* p = ::operator new(sizeof(int));  // 1\n// 2\nnew (p) int; // 3\n</code></pre>\n\n<p>When does the <code>int</code> start its lifetime?</p>\n\n<ol>\n<li><p>Only acquires storage, <code>::operator new</code> is specified to have the effect (from <a href=\"https://timsong-cpp.github.io/cppwp/support.dynamic#new.delete.single-1\" rel=\"nofollow noreferrer\">[new.delete.single]</a>)</p>\n\n<blockquote>\n  <p>The allocation functions called by a new-expression to allocate size bytes of storage. [...] allocates storage suitably aligned to represent any object of that size provided the object's type does not have new-extended alignment.</p>\n</blockquote>\n\n<p>Given that acquiring storage <a href=\"https://stackoverflow.com/questions/40873520/reinterpret-cast-creating-a-trivially-default-constructible-object/40874245#40874245\">is insufficient</a> in creating an object, the <code>int</code> cannot have begin its lifetime here.</p></li>\n<li><p>At this point, suitbale storage for the <code>int</code> has been acquired.</p></li>\n<li><p>The <code>int</code> is created by placement new. But somehow its lifetime didn't begin here, since from <a href=\"https://timsong-cpp.github.io/cppwp/basic.life#1\" rel=\"nofollow noreferrer\">[basic.life]</a></p>\n\n<blockquote>\n  <p>[...] An object is said to have non-vacuous initialization if it is of a class or aggregate type and it or one of its subobjects is initialized by a constructor other than a trivial default constructor. The lifetime of an object of type <code>T</code> begins when:</p>\n  \n  <ul>\n  <li><p>storage with the proper alignment and size for type <code>T</code> is obtained, and</p></li>\n  <li><p>if the object has non-vacuous initialization, its initialization is complete [...]</p></li>\n  </ul>\n</blockquote>\n\n<p><code>int</code> is neither a class nor aggregate type, hence it has vacuous initialization. Therefore only the first bullet applies. However, this is clearly not when storage is obtained and therefore cannot be when its lifetime starts.</p></li>\n</ol>\n\n<h2>Some context</h2>\n\n<p>Allocators <a href=\"https://timsong-cpp.github.io/cppwp/allocator.requirements#tab:utilities.allocator.requirements\" rel=\"nofollow noreferrer\">are required</a> to return memory without constructing its elements. Yet this doesn't make sense with trivial types. The effects of <code>a.allocate(n)</code> with <code>a</code> an allocator object for type <code>T</code> is</p>\n\n<blockquote>\n  <p>Memory is allocated for <code>n</code> objects of type <code>T</code> but objects are not constructed.</p>\n</blockquote>\n"}, {"tags": ["c++", "iterator", "unique", "predicate", "deque"], "comments": [{"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 6, "creation_date": 1519850791, "post_id": 49038189, "comment_id": 85081659, "body": "Use reverse iterator?"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1519850879, "post_id": 49038189, "comment_id": 85081698, "body": "If I understand right, you want to get from a superset, the last element of all sets found in the superset?"}, {"owner": {"reputation": 168, "user_id": 8050751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac94118ae8aafb9e834b885300b2af8?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Hencke", "link": "https://stackoverflow.com/users/8050751/kevin-hencke"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1519857033, "post_id": 49038189, "comment_id": 85084726, "body": "@KillzoneKid, it seems that my compiler and cplusplus.com both tell me that std::unique takes only ForwardIterators."}, {"owner": {"reputation": 168, "user_id": 8050751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac94118ae8aafb9e834b885300b2af8?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Hencke", "link": "https://stackoverflow.com/users/8050751/kevin-hencke"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1519857095, "post_id": 49038189, "comment_id": 85084755, "body": "@ChristopherPisz yes, that sums it up correctly.  I want to do this operation with minimal copy/move ops, because the objects are heavy."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1519858198, "post_id": 49038189, "comment_id": 85085223, "body": "@KevinHencke I think you are mistaken <a href=\"https://ideone.com/MgTzHd\" rel=\"nofollow noreferrer\">ideone.com/MgTzHd</a>"}, {"owner": {"reputation": 168, "user_id": 8050751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac94118ae8aafb9e834b885300b2af8?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Hencke", "link": "https://stackoverflow.com/users/8050751/kevin-hencke"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1519916206, "post_id": 49038189, "comment_id": 85109237, "body": "@ChristopherPisz thank you for the example (and that amazing website, wow!), but it&#39;s in C++14; that&#39;s not an option for me.  Does this still work in C++11?"}], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 8050751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac94118ae8aafb9e834b885300b2af8?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Hencke", "link": "https://stackoverflow.com/users/8050751/kevin-hencke"}, "edited": false, "score": 0, "creation_date": 1519856225, "post_id": 49038520, "comment_id": 85084398, "body": "I liked the look of your second suggestion, but got the following error message:     error: no suitable user-defined conversion from &quot;std::reverse_iterator&lt;std::_Deque_iterator&lt;Heavy, Heavy &amp;, Heavy *&gt;&gt;&quot; to &quot;const std::_Deque_iterator&lt;Heavy, Heavy &amp;, Heavy *&gt;&quot; exists"}, {"owner": {"reputation": 168, "user_id": 8050751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac94118ae8aafb9e834b885300b2af8?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Hencke", "link": "https://stackoverflow.com/users/8050751/kevin-hencke"}, "edited": false, "score": 0, "creation_date": 1519856687, "post_id": 49038520, "comment_id": 85084569, "body": "I&#39;m working on trying your first suggestion; would that solution break down if a match is absent?  Would we wind up with &amp;*return.second &lt; &amp;*return.first because they&#39;d seek past each other to end() and rend()?"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 168, "user_id": 8050751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac94118ae8aafb9e834b885300b2af8?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Hencke", "link": "https://stackoverflow.com/users/8050751/kevin-hencke"}, "edited": false, "score": 0, "creation_date": 1519857575, "post_id": 49038520, "comment_id": 85084948, "body": "@KevinHencke Referring to the usage of <code>unique()</code> with <code>reverse_iterator</code>: you would need to be careful when interpreting the returned iterator (<code>reduced</code>) in my answer. It&#39;s obviously a <code>reverse_iterator</code>, so will not automatically convert to the original iterator type, but for that you can use <code>base()</code>. I&#39;ll amend my answer."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": true, "score": 0, "last_activity_date": 1519857873, "last_edit_date": 1519857873, "creation_date": 1519851830, "answer_id": 49038520, "question_id": 49038189, "link": "https://stackoverflow.com/questions/49038189/c11-stl-unique-function-but-in-reverse/49038520#49038520", "title": "C++11 STL unique function, but in reverse", "body": "<p>something like this, perhaps?</p>\n\n<pre><code>template&lt;typename BidirectionalIterator, typename UnaryPredicate&gt;\npair&lt;BidirectionalIterator,BidirectionalIterator&gt;\nmagical_range_search(BidirectionalIterator begin,\n                     BidirectionalIterator end, UnaryPredicate p)\n{\n  return {find_if(begin,end,p),\n          find_if(make_reverse_iterator(end),make_reverse_iterator(begin),p)};\n}\n</code></pre>\n\n<p>But, of course, for the whole thing you can just use <code>std::unique</code> with a <code>reverse_iterator</code>, as indicated in the comments:</p>\n\n<pre><code>heavyContainer.erase(heavyContainer.begin(),\n                     unique(make_reverse_iterator(heavyContainer.end()),\n                            make_reverse_iterator(heavyContainer.begin()),\n                            [](Heavy const&amp;lhs, Heavy const&amp;rhs) {\n                                return lhs.getLight() &lt; rhs.getLight();\n                            }).base());\n</code></pre>\n\n<p>Here <code>reverse_iterator&lt;&gt;::base()</code> returns the underlying original iterator of the <code>reverse_iterator</code> returned by <code>unique()</code>. As <code>unique()</code> returns the new end of the sequence, the reverse operation returns the new begin of the sequence. The new range is <code>{new_begin, orignal_end}</code>, and the elements in the range <code>{original_begin, new_begin}</code> must be <code>erase()</code>d.</p>\n"}], "owner": {"reputation": 168, "user_id": 8050751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac94118ae8aafb9e834b885300b2af8?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Hencke", "link": "https://stackoverflow.com/users/8050751/kevin-hencke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 49038520, "answer_count": 1, "score": 3, "last_activity_date": 1519942214, "creation_date": 1519850534, "last_edit_date": 1519942214, "question_id": 49038189, "link": "https://stackoverflow.com/questions/49038189/c11-stl-unique-function-but-in-reverse", "title": "C++11 STL unique function, but in reverse", "body": "<p>Is there a function which operates like <code>std::unique</code>, but that takes a custom comparison predicate, and retains the <em>last</em> element in an equivalent sequence, instead of the first?  The answer is yes if C++14 or C++17 is an option; however I am using C++11.</p>\n\n<p>I am starting with a deque of large heavy objects, sorted by one lightweight field.  Some objects have equal values for the lightweight field, and this is unacceptable.  I need to discard all but the <em>last</em> object in any sequence with a matching light field.</p>\n\n<p>At present my code calls <code>equal_range</code> using a custom <em>binary</em> predicate and a helper heavy object, then rewinds the end iterator:</p>\n\n<pre><code>deque&lt;Heavy&gt; heavyDeque(...);\n\nLight helperLight(...);\nHeavy helperHeavy(helperLight, );\n\ntypedef deque&lt;Heavy&gt;:: iterator HevIt;\n\npair&lt;HevIt, HevIt&gt; deleteRange = equal_range(\n    heavyDeque.begin(), heavyDeque.end(), helperHeavy,\n    [](const Heavy &amp; lhs, const Heavy &amp; rhs) {\n        return lhs.getLight() &lt; rhs.getLight()})\n\n//I have prior knowledge of at least one match\nassert(deleteRange.first != deleteRange.second);\n// back up; don't delete the last one\n--(deleteRange.second);\nheavyDeque.erase(deleteRange.first, deleteRange.second);\n</code></pre>\n\n<p>I am not too happy with having to pass in <code>helperHeavy</code>, when all I need from inside it is <code>helperLight</code>.  I would rather my code look like this:</p>\n\n<pre><code>pair&lt;HevIt, HevIt&gt; deleteRange = magical_range_search(\n    heavyDeque.begin(), heavyDeque.end(),\n    [helperLight](const Heavy &amp; heavy) {\n        return helperLight == heavy.getLight()})\n</code></pre>\n\n<p>Note that my imaginary magical function takes a <em>unary</em> predicate, not a binary one.  </p>\n"}, {"tags": ["c++", "macos", "opengl", "cmake", "clion"], "answers": [{"comments": [{"owner": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "edited": false, "score": 0, "creation_date": 1519895471, "post_id": 49039309, "comment_id": 85096869, "body": "Thank you for your reply! I tried to use <code>include_directories(${GLFW3_INCLUDE_DIR})</code> and <code>target_link_libraries(viewer GLFW3_LIBRARY)</code>, but didn&#39;t actually work. However it seems it works with <code>target_link_libraries(viewer glfw)</code>.  Do you have any idea why? You could update your reply and I accept it."}, {"owner": {"reputation": 1532, "user_id": 2226029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d9b4c52d59ba745a6e0fb739256959?s=128&d=identicon&r=PG", "display_name": "thomas_f", "link": "https://stackoverflow.com/users/2226029/thomas-f"}, "reply_to_user": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "edited": false, "score": 1, "creation_date": 1519896166, "post_id": 49039309, "comment_id": 85097265, "body": "@desa Updated. I think you just forgot to deference the variable? <code>target_link_libraries(viewer ${GLFW3_LIBRARY})</code> as opposed to <code>target_link_libraries(viewer GLFW3_LIBRARY)</code>."}, {"owner": {"reputation": 1532, "user_id": 2226029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d9b4c52d59ba745a6e0fb739256959?s=128&d=identicon&r=PG", "display_name": "thomas_f", "link": "https://stackoverflow.com/users/2226029/thomas-f"}, "reply_to_user": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "edited": false, "score": 1, "creation_date": 1519896459, "post_id": 49039309, "comment_id": 85097409, "body": "@desa As for your other question, why <code>target_link_libraries(viewer glfw)</code> works: This is the same as adding <code>-lglfw</code> to your linker flags. Since <code>glfw</code> is installed in a standard location in this case, the linker knows where to look for it. More here: <a href=\"https://cmake.org/cmake/help/v3.8/command/target_link_libraries.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.8/command/target_link_libraries.html</a>"}, {"owner": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "edited": false, "score": 0, "creation_date": 1519897994, "post_id": 49039309, "comment_id": 85098360, "body": "Thank you for clarification. But I still do not get why target_link_libraries(viewer ${GLFW3_LIBRARY}) still does not work then"}, {"owner": {"reputation": 1532, "user_id": 2226029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d9b4c52d59ba745a6e0fb739256959?s=128&d=identicon&r=PG", "display_name": "thomas_f", "link": "https://stackoverflow.com/users/2226029/thomas-f"}, "reply_to_user": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "edited": false, "score": 1, "creation_date": 1519898314, "post_id": 49039309, "comment_id": 85098530, "body": "First, try removing <code>CMakeCache.txt</code> (located in your build directory), then build again. Second, could you tell me the output of the command <code>message(&quot;GLFW LIB: ${GLFW3_LIBRARY}&quot;)</code>?"}, {"owner": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "edited": false, "score": 0, "creation_date": 1519901594, "post_id": 49039309, "comment_id": 85100445, "body": "I updated the question with the info. Could you tell me where should I check <code>glfw3Config.cmake</code>?"}, {"owner": {"reputation": 1532, "user_id": 2226029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d9b4c52d59ba745a6e0fb739256959?s=128&d=identicon&r=PG", "display_name": "thomas_f", "link": "https://stackoverflow.com/users/2226029/thomas-f"}, "reply_to_user": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "edited": false, "score": 1, "creation_date": 1519905683, "post_id": 49039309, "comment_id": 85102703, "body": "@desa I updated my answer, it seems that these variables may not be set at all when using MacOS. I was testing this under Linux, but I just verified using a Mac. My apologies for making the assumption that it would be the same on all Unix-based platforms."}, {"owner": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "edited": false, "score": 1, "creation_date": 1519905853, "post_id": 49039309, "comment_id": 85102809, "body": "thank you a lot for making it clear! Your answer is really helpful!"}], "tags": [], "owner": {"reputation": 1532, "user_id": 2226029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d9b4c52d59ba745a6e0fb739256959?s=128&d=identicon&r=PG", "display_name": "thomas_f", "link": "https://stackoverflow.com/users/2226029/thomas-f"}, "is_accepted": true, "score": 5, "last_activity_date": 1519905502, "last_edit_date": 1519905502, "creation_date": 1519855176, "answer_id": 49039309, "question_id": 49038142, "link": "https://stackoverflow.com/questions/49038142/minimal-example-with-glfw-fails-because-of-undefined-symbols-for-architecture-x8/49039309#49039309", "title": "Minimal example with GLFW fails because of undefined symbols for architecture x86_64", "body": "<p>From <code>glfw3Config.cmake</code>:</p>\n\n<pre><code># - Config file for the glfw3 package\n# It defines the following variables\n#   GLFW3_INCLUDE_DIR, the path where GLFW headers are located\n#   GLFW3_LIBRARY_DIR, folder in which the GLFW library is located\n#   GLFW3_LIBRARY, library to link against to use GLFW\n</code></pre>\n\n<p>It seems that you are referencing the wrong variables. Also, there is no need to invoke <code>include_directories()</code> in this case, since GLFW is obviously installed in a standard location, i.e. your compiler already knows where to find it.</p>\n\n<p><strong>Edit</strong>: I was able to reproduce the linker error and changing the variable name to <code>GLFW3_LIBRARY</code> fixed it.</p>\n\n<p><strong>Clarification</strong>: Change your link command to: <code>target_link_libraries(viewer ${GLFW3_LIBRARY})</code></p>\n\n<p><strong>Update if you're on Mac OS</strong>: If you're experiencing the same issues as OP, it may be because <code>glfw3Config.cmake</code> does <strong>not</strong> export the variables mentioned in my answer. Instead it creates an imported library, <code>glfw</code>. In this case, the correct way to link to <code>glfw</code> would be to simply do this: <code>target_link_libraries(&lt;target&gt; glfw)</code>.</p>\n\n<p>If <code>glfw</code> was installed using <code>brew</code>, you should find the <code>.cmake</code>-files under: <code>/usr/local/Cellar/glfw/&lt;version&gt;/lib/cmake/glfw3</code>.</p>\n"}], "owner": {"reputation": 983, "user_id": 3055351, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/hdtbJ.png?s=128&g=1", "display_name": "desa", "link": "https://stackoverflow.com/users/3055351/desa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 0, "accepted_answer_id": 49039309, "answer_count": 1, "score": 2, "last_activity_date": 1519905502, "creation_date": 1519850354, "last_edit_date": 1519901566, "question_id": 49038142, "link": "https://stackoverflow.com/questions/49038142/minimal-example-with-glfw-fails-because-of-undefined-symbols-for-architecture-x8", "title": "Minimal example with GLFW fails because of undefined symbols for architecture x86_64", "body": "<p>I am trying to compile the following minimal example for <code>GLFW</code>:</p>\n\n<pre><code>#include &lt;GLFW/glfw3.h&gt;\n#include &lt;thread&gt;\n\nint main() {\n    glfwInit();\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    glfwTerminate();\n    return 0;\n}\n</code></pre>\n\n<p>My <code>CMakeLists.txt</code> file is:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9)\nproject(viewer)\n\nset(CMAKE_CXX_STANDARD 11)\n\nfind_package(glfw3 3.2 REQUIRED)\ninclude_directories(${GLFW_INCLUDE_DIRS})\n\nadd_executable(viewer main.cpp)\n\ntarget_link_libraries(viewer ${GLFW_LIBRARIES})\n</code></pre>\n\n<p>If I try to compile the code, it fails with the following error message:</p>\n\n<pre><code>[ 50%] Linking CXX executable visualiser\nUndefined symbols for architecture x86_64:\n  \"_glfwInit\", referenced from:\n      _main in main.cpp.o\n  \"_glfwTerminate\", referenced from:\n      _main in main.cpp.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[3]: *** [visualiser] Error 1\nmake[2]: *** [CMakeFiles/visualiser.dir/all] Error 2\nmake[1]: *** [CMakeFiles/visualiser.dir/rule] Error 2\nmake: *** [visualiser] Error 2\n</code></pre>\n\n<p>I see the similar questions, e.g.:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/43817344/trouble-compiling-glfw-undefined-symbols\">Trouble compiling GLFW, undefined symbols</a></li>\n<li><a href=\"http://dudandan.com/2017/02/15/Setup-glfw-and-glew/\" rel=\"nofollow noreferrer\">http://dudandan.com/2017/02/15/Setup-glfw-and-glew/</a></li>\n</ul>\n\n<p>But their solutions did not really help.</p>\n\n<p><strong>UPD:</strong> Following the comment of @thomas_f, I modified my <code>CMakeLists.txt</code> file as follows:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9)\nproject(viewer)\n\nset(CMAKE_CXX_STANDARD 11)\n\nfind_package(glfw3 3.2 REQUIRED)\ninclude_directories(${GLFW3_INCLUDE_DIR})\n\nadd_executable(viewer main.cpp)\n\ntarget_link_libraries(viewer ${GLFW3_LIBRARY})\nmessage(GLFW LIB: ${GLFW3_LIBRARY})\n</code></pre>\n\n<p>I also made sure that there is no <code>CMakeCache.txt</code> in my build directory:</p>\n\n<pre><code>$ ls -a\n.                 ..                .idea             CMakeLists.txt    cmake-build-debug main.cpp\n</code></pre>\n\n<p>However, I still get the same error message. It seems, that </p>\n\n<pre><code>/Applications/CLion.app/Contents/bin/cmake/bin/cmake -DCMAKE_BUILD_TYPE=Debug -G \"CodeBlocks - Unix Makefiles\" ........./viewer\nGLFWLIB:\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /Users/denis/Documents/projects/theia/code/visualiser/cmake-build-debug\n\n[Finished]\n</code></pre>\n\n<p>So it seems that <code>${GLFW3_LIBRARY}</code> is not defined.</p>\n"}, {"tags": ["c++", "macos", "audio", "core-audio", "audiounit"], "answers": [{"tags": [], "owner": {"reputation": 1015, "user_id": 6391764, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ae6eb3e43b8792b2ce6fa3743e01a750?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre P.", "link": "https://stackoverflow.com/users/6391764/pierre-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1519930958, "creation_date": 1519930958, "answer_id": 49056917, "question_id": 49038140, "link": "https://stackoverflow.com/questions/49038140/audiobufferlist-for-auhal-unit-whose-output-stream-format-is-compressed/49056917#49056917", "title": "AudioBufferList for AUHAL unit whose output stream format is compressed.", "body": "<p>I have managed to fix this issue by redesigning the whole process. To make it short, I still have a unique AUHAL unit, but instead of doing the format conversion within the AUHAL unit, I do it in the render callback, with an Extended Audio File, which takes a source format and a destination format. \nThe whole challenge is to find the right format description, which is basically just testing different values for <code>mFormatID</code>, <code>mFormatFlags</code> etc... </p>\n"}], "owner": {"reputation": 1015, "user_id": 6391764, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ae6eb3e43b8792b2ce6fa3743e01a750?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre P.", "link": "https://stackoverflow.com/users/6391764/pierre-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 49056917, "answer_count": 1, "score": 2, "last_activity_date": 1519930958, "creation_date": 1519850332, "question_id": 49038140, "link": "https://stackoverflow.com/questions/49038140/audiobufferlist-for-auhal-unit-whose-output-stream-format-is-compressed", "title": "AudioBufferList for AUHAL unit whose output stream format is compressed.", "body": "<h1>ACKNOWLEDGEMENTS</h1>\n\n<p>I know this post is quite long, but I try to contextualise as much as possible my issue because I reckon it's quite unique (couldn't find any related issue apart from <a href=\"https://stackoverflow.com/questions/34714832/writing-bytes-to-audio-file-using-auhal-audio-unit\">this one</a>. The final question is at the very end of the post and <a href=\"https://stackoverflow.com/questions/34714832/writing-bytes-to-audio-file-using-auhal-audio-unit\">here's the complete code</a>. </p>\n\n<p>First of all, a bit of context. I am using <strong>CoreAudio</strong> and <strong>AudioToolbox</strong> library, more precisely <em>Audio Units</em>. I am on macOS. My ultimate goal is to record audio from any input device (hence the use of Audio Units over a simple AudioQueueBuffer) and write it to an audio file. I reckon the trickiest part of my program is to convert from LPCM to AAC (in my case) within a <strong>single audio unit</strong>, hence no use of AUGraph is made. </p>\n\n<p>My program is basically just one Audio Unit, encapsulated in a class, <code>AudioUnit mInputUnit</code> which is an AUHAL unit. Hence, I have followed this <a href=\"https://developer.apple.com/library/content/technotes/tn2091/_index.html\" rel=\"nofollow noreferrer\">this technical note</a> to set it up. Basically, I link the input scope of the input element (since the output element is disabled) to an Audio Device, i.e. my built-in microphone.</p>\n\n<p>Then I update the AudioFormat of the output scope of the unit accordingly. </p>\n\n<pre><code>  ...\n  inputStream.mFormatID = kAudioFormatMPEG4AAC;\n  inputStream.mFormatFlags = 0;\n  inputStream.mBitsPerChannel = 0;\n  checkError(\n    AudioUnitSetProperty(\n      mInputUnit,\n      kAudioUnitProperty_StreamFormat,\n      kAudioUnitScope_Output,\n      1,\n      &amp;inputStream,\n      propertySize\n    ),\n    \"Couldn't set output stream format.\"\n  );\n</code></pre>\n\n<p>Therefore, at this point, the Audio Unit <strong>should</strong> work as follow: </p>\n\n<p>Record from input device in LPCM [INPUT SCOPE] ==> Convert from LPCM to ==> Render in AAC. </p>\n\n<p>Please note that each stream format (input and output) uses <strong>2 channels</strong>. Neither the input nor the output stream has its <code>mFormatFlags</code> set to <code>kAudioFormatIsNonInterleaved</code>, so both of them are interleaved. \nIn fact, I think this is where the issue comes from but can't see why. </p>\n\n<p>At this point, everything seems to work right. The issue arises when I try to render the audio unit after having set the input callback.</p>\n\n<p>I have found a note that says the following : </p>\n\n<blockquote>\n  <p>\u201cBy convention, AUHAL deinterleaves multichannel audio. This means that you set up two AudioBuffers of one channel each instead of setting up one AudioBuffer with mNumberChannels==2. A common cause of paramErr (-50) problems in AudioUnitRender() calls is having AudioBufferLists whose topology (or arrangement of buffers) doesn\u2019t match what the unit is prepared to produce. When dealing at the unit level, you almost always want to do noninterleaved like this.\u201d</p>\n</blockquote>\n\n<p><em>Excerpt From: Chris Adamson &amp; Kevin Avila. \u201cLearning Core Audio: A Hands-On Guide to Audio Programming for Mac and iOS.\u201d iBooks.</em></p>\n\n<p>Hence, I have followed the appropriate code structure to render the audio. </p>\n\n<pre><code>OSStatus Recorder::inputProc(\n  void *inRefCon,\n  AudioUnitRenderActionFlags *ioActionFlags,\n  const AudioTimeStamp *inTimeStamp,\n  UInt32 inBusNumber,\n  UInt32 inNumberFrames,\n  AudioBufferList *ioData\n)\n{\n  Recorder *This = (Recorder *) inRefCon;\n  CAStreamBasicDescription outputStream;\n  This-&gt;getStreamBasicDescription(kAudioUnitScope_Output, outputStream);\n\n  UInt32 bufferSizeBytes = inNumberFrames * sizeof(Float32);\n  UInt32 propertySize = offsetof(AudioBufferList, mBuffers[0]) + (sizeof(AudioBuffer) * outputStream.mChannelsPerFrame);\n  auto bufferList = (AudioBufferList*) malloc(propertySize);\n  bufferList-&gt;mNumberBuffers = outputStream.mChannelsPerFrame;\n\n  for(UInt32 i = 0; i &lt; bufferList-&gt;mNumberBuffers; ++i)\n  {\n    bufferList-&gt;mBuffers[i].mNumberChannels = 1;\n    bufferList-&gt;mBuffers[i].mDataByteSize = bufferSizeBytes;\n    bufferList-&gt;mBuffers[i].mData = malloc(bufferSizeBytes);\n  }\n\n  checkError(\n    AudioUnitRender(\n      This-&gt;mInputUnit,\n      ioActionFlags,\n      inTimeStamp,\n      inBusNumber,\n      inNumberFrames,\n      bufferList\n    ),\n    \"Couldn't render audio unit.\"\n  );\n  free(bufferList);\n}\n</code></pre>\n\n<p>And then, when I try to render the audio, I have the following error <code>Error: Couldn't render audio unit. (-50)</code> which is actually the one that should had been <strong>fixed</strong> by following the note, which confuses me even more. </p>\n\n<h2>THE question</h2>\n\n<p>At this point, I don't know if this is something to do with my overall architecture, i.e. should I use a <strong>AUGraph</strong> and add an output unit instead of trying to convert from canonical format to a compressed format WITHIN a single AUHAL unit? \nOr is this something to do with the way I pre-allocate my AudioBufferList? </p>\n"}, {"tags": ["c++", "c++11", "c++14", "hashset", "unordered-set"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519850655, "post_id": 49038094, "comment_id": 85081598, "body": "It is not a good idea to rely on a position in <b>unordered</b> set in general"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1519850662, "post_id": 49038094, "comment_id": 85081603, "body": "When reading the duplicate <code>s&#47;map&#47;unordered_set&#47;g</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1519850830, "post_id": 49038094, "comment_id": 85081680, "body": "@GemTaylor there is <code>comp.insert</code> right there"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1519850882, "post_id": 49038094, "comment_id": 85081699, "body": "Apologies...  :-)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519850953, "post_id": 49038094, "comment_id": 85081746, "body": "Why do you need to store that position anyway? It does not make sense"}, {"owner": {"reputation": 47, "user_id": 5282613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01cfbd03622095afa62f64319861f057?s=128&d=identicon&r=PG&f=1", "display_name": "Nothing_8484", "link": "https://stackoverflow.com/users/5282613/nothing-8484"}, "edited": false, "score": 0, "creation_date": 1519851152, "post_id": 49038094, "comment_id": 85081857, "body": "Thank you all. I want to find the index of two numbers in the vector that adds up to a number given."}, {"owner": {"reputation": 47, "user_id": 5282613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01cfbd03622095afa62f64319861f057?s=128&d=identicon&r=PG&f=1", "display_name": "Nothing_8484", "link": "https://stackoverflow.com/users/5282613/nothing-8484"}, "edited": false, "score": 0, "creation_date": 1519851416, "post_id": 49038094, "comment_id": 85081996, "body": "So I get that ordered_set or vector would be right to use for getting an index."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519853675, "post_id": 49038094, "comment_id": 85083218, "body": "@Nothing_8484 I do not think so, I do not follow how that index related to your task"}, {"owner": {"reputation": 47, "user_id": 5282613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01cfbd03622095afa62f64319861f057?s=128&d=identicon&r=PG&f=1", "display_name": "Nothing_8484", "link": "https://stackoverflow.com/users/5282613/nothing-8484"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519855503, "post_id": 49038094, "comment_id": 85084078, "body": "@Slava, for the given vector I am storing the compliments (target value -the element value) of each element in the vector into another container(unordered_set in this case, need to change to ?) while iterating over the given vector and checking if element at current index is present in the new container. The current index and the index in the new container is what I am looking for ie the two numbers whose sum would be equal to the target. Hope I am able to explain :D"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519850764, "post_id": 49038192, "comment_id": 85081643, "body": "O(N^2) is not the only and worst problems. Bigger problem that elements can be reordered."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1519852292, "post_id": 49038192, "comment_id": 85082468, "body": "Indeed, as the code inserts (thanks) as it searches, any index would be thrown off by something inserted before it."}, {"owner": {"reputation": 12134, "user_id": 100724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/28c55fab931fa7153f0625a09b441674?s=128&d=identicon&r=PG", "display_name": "Viktor Sehr", "link": "https://stackoverflow.com/users/100724/viktor-sehr"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519852934, "post_id": 49038192, "comment_id": 85082833, "body": "@Slava: Indeed, I didn&#39;t analyse the algorithm very well :)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1519853628, "post_id": 49038192, "comment_id": 85083183, "body": "@GemTaylor index can be broken even if you insert after, so OPs code does not make any sense"}], "tags": [], "owner": {"reputation": 12134, "user_id": 100724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/28c55fab931fa7153f0625a09b441674?s=128&d=identicon&r=PG", "display_name": "Viktor Sehr", "link": "https://stackoverflow.com/users/100724/viktor-sehr"}, "is_accepted": false, "score": 1, "last_activity_date": 1519850551, "creation_date": 1519850551, "answer_id": 49038192, "question_id": 49038094, "link": "https://stackoverflow.com/questions/49038094/subtraction-of-iterators-for-unordered-set-does-not-work/49038192#49038192", "title": "Subtraction of iterators for unordered_set does not work", "body": "<p>The iterators for a unordered set is not random access, therefore you have to use <code>auto index = std::distance(iterator_a, iterator_b);</code></p>\n\n<p>However, this operation is O(N), which will result in your algorithm to be O(N^2), therefore I recommend you to use another algorithm to solve your problem.</p>\n"}], "owner": {"reputation": 47, "user_id": 5282613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01cfbd03622095afa62f64319861f057?s=128&d=identicon&r=PG&f=1", "display_name": "Nothing_8484", "link": "https://stackoverflow.com/users/5282613/nothing-8484"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "closed_date": 1519850569, "answer_count": 1, "score": 0, "last_activity_date": 1519850551, "creation_date": 1519850142, "last_edit_date": 1519850450, "question_id": 49038094, "link": "https://stackoverflow.com/questions/49038094/subtraction-of-iterators-for-unordered-set-does-not-work", "closed_reason": "Duplicate", "title": "Subtraction of iterators for unordered_set does not work", "body": "<p>Trying to find the index of an element in unordered set. Found that subtraction (operator '-') of iterators is one way of doing it.</p>\n\n<pre><code>vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) \n{\n    unordered_set&lt;int&gt; comp; \n    vector&lt;int&gt; res;\n    for(int i = 0; i&lt;nums.size(); i++)\n    {\n        //unordered_set&lt;int&gt;::iterator it = comp.find(nums[i]);\n        if (comp.find(nums[i])!=comp.end())\n        {\n            //int pos = distance(comp.begin(), comp.find(nums[i]));\n            auto pos = comp.find(nums[i]) - comp.begin();\n            res.push_back((int)pos);\n            res.push_back(i);\n        }\n        comp.insert(target-nums[i]);\n    }\n    return res;\n}\n</code></pre>\n\n<p>But I get compile error on line with auto pos: </p>\n\n<pre><code>no match for 'operator-' (operand types are 'std::unordered_set&lt;int&gt;::iterator {aka std::__detail::_Node_iterator&lt;int, true, false&gt;}' and 'std::unordered_set&lt;int&gt;::iterator {aka std::__detail::_Node_iterator&lt;int, true, false&gt;}')\n</code></pre>\n\n<p>Have included iostream, iterator and unordered_set. Please advice. Thanks</p>\n"}, {"tags": ["c++", "c", "optimization"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1519850046, "post_id": 49038057, "comment_id": 85081301, "body": "It depends on the compiler and flags. It&#39;s possible it will be optimized, it&#39;s possible it won&#39;t."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1519850082, "post_id": 49038057, "comment_id": 85081322, "body": "It&#39;s up to a specific compiler. But a conventional ones are very likely to optimize this."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1519850106, "post_id": 49038057, "comment_id": 85081331, "body": "Give <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a> a try. It shows you the assembly produced by various compilers."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1519850232, "post_id": 49038057, "comment_id": 85081394, "body": "I would not rely on it to be optimized. There are many factors that can affect it on one side and it is pretty easy to force compiler to call it only once on another."}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1519850336, "post_id": 49038057, "comment_id": 85081449, "body": "Depends. But if you want that functionality why don&#39;t you just cache the return of your function yourself before the for loop?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1519850425, "post_id": 49038057, "comment_id": 85081494, "body": "In the example <code>i &lt; object.coolFunc()</code> how would the compiler know whether the same value is returned on each loop, or a different one?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1519850558, "post_id": 49038057, "comment_id": 85081554, "body": "@WeatherVane Constant folding along with Link Time Optimization?"}, {"owner": {"reputation": 196, "user_id": 4900124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036d10222e906cc1979840aab4751023?s=128&d=identicon&r=PG&f=1", "display_name": "Love T&#228;tting", "link": "https://stackoverflow.com/users/4900124/love-t%c3%a4tting"}, "edited": false, "score": 0, "creation_date": 1519850726, "post_id": 49038057, "comment_id": 85081627, "body": "You would need to rely on the compiler to assert that the value of the condition expression is not affected by the statements in the loop, ie that size and max_size does not change. If it cannot, then the compiler shouldn\u2019t optimise as it will change the semantics of the program."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1519850764, "post_id": 49038057, "comment_id": 85081644, "body": "see <a href=\"https://stackoverflow.com/q/26771692/1708801\">Loop with a zero execution time</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1519851207, "post_id": 49038057, "comment_id": 85081880, "body": "@EugeneSh. Optimising is great with an excellent compiler like gcc, but suppose you are coding for an MCU, some cross-compilers supplied by the chip manufacturer have been flaky at best. Although the received wisdom on SO is that the compiler is better than me, I was taught not to write lazy code and not to let the compiler do the work for me. If the loop condition can obviously be done before the loop, it&#39;s a no-brainer."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1519851263, "post_id": 49038057, "comment_id": 85081911, "body": "@WeatherVane I agree that where the &quot;manual&quot;  optimization is obvious - better do it yourself."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519852382, "post_id": 49038057, "comment_id": 85082533, "body": "FYI, if you are discussing the C language, use the C tag.  If you are discussing C++, use the C++ tag.  Rarely, you need to use both tags.  Reminder, C and C++ are distinct languages."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519852533, "post_id": 49038057, "comment_id": 85082609, "body": "As far as optimization goes, a lot depends on the signature and content of the function.  For example, if a string doesn&#39;t change length inside the loop, the compiler can optimize the condition by calling the length function once instead of each iteration.  If your comparison function is called on a mutable object then the compiler will have a more difficult time optimizing (if optimization is possible)."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1519863141, "post_id": 49038057, "comment_id": 85086768, "body": "This is not a duplicate of <a href=\"https://stackoverflow.com/questions/25696857/condition-check-in-for-loop-in-c\">condition check in for loop</a> because that question asks about computation inside the abstract C model, and its answer does not address optimization, whereas this question asks specifically about optimization, which is a question about compilers and opimization outside the model."}], "answers": [{"comments": [{"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519876142, "post_id": 49041683, "comment_id": 85089787, "body": "The value&#39;s not changing is not sufficient for <a href=\"https://en.wikipedia.org/wiki/Loop_invariant#Distinction_from_loop-invariant_code\" rel=\"nofollow noreferrer\">&quot;invariant&quot;</a>. As you mentioned below as the concept of pure function, the subexpression should have no side effect, or only have side effects that are equivalent between when the subexpression is inside the loop and when it is outside the loop."}], "tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1519871664, "last_edit_date": 1519871664, "creation_date": 1519871048, "answer_id": 49041683, "question_id": 49038057, "link": "https://stackoverflow.com/questions/49038057/does-c-optimize-the-check-portion-of-for-loops/49041683#49041683", "title": "Does c optimize the check portion of for loops?", "body": "<p>Any good compiler will optimize the controlling expression of a <code>for</code> loop by evaluating visibly invariant subexpressions in it just once, provided optimization is enabled. Here, \u201cinvariant\u201d means the value of the subexpression does not change while the loop is executing. \u201cVisibly\u201d means the compiler can see that the expression is invariant. There are things that can interfere with this:</p>\n\n<ul>\n<li><p>Suppose, inside the loop, some function is called and the address of <code>size</code> is passed as an argument. Since the function has the address of <code>size</code>, it could change the contents of <code>size</code>. Maybe the function does not do this, but the compiler might not be able to see the contents of the function. Its source code could be in another file. Or the function could be so complicated the compiler cannot analyze it. Then the compiler cannot see that <code>size</code> does not change.</p></li>\n<li><p><code>min</code> is not a standard C function, so your program must define it somewhere. As above, if the compiler does not know what <code>min</code> does or if it is too complicated for the compiler to analyze (not likely in this particular case, but in general), the compiler might not be able to see that it is a <a href=\"https://en.wikipedia.org/wiki/Pure_function\" rel=\"nofollow noreferrer\">pure function</a>.</p></li>\n</ul>\n\n<p>Of course, the C standard does not guarantee this optimization. However, as you become experienced in programming, your knowledge of compilers and other tools should grow, and you will become familiar with what is expected of good tools, and you will also learn to beware of issues such as those above. For simple expressions, you can expect the compiler to optimize. But you need to remain alert to things that can interfere with optimization.</p>\n"}], "owner": {"reputation": 1414, "user_id": 5183807, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/34e6711722a4f7d037a3b8ee8de5e491?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/5183807/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519871664, "creation_date": 1519849993, "question_id": 49038057, "link": "https://stackoverflow.com/questions/49038057/does-c-optimize-the-check-portion-of-for-loops", "title": "Does c optimize the check portion of for loops?", "body": "<p>With the following code how many times would the min function actually be called</p>\n\n<pre><code>for (int i = 0; i &lt; min(size, max_size); i++) {\n   //Do something cool that does not involve changing the value of size or max size\n}\n</code></pre>\n\n<p>Would the compiler notice that they could just calculate the minimum and register it or should I explicitly create a variable to hold the value before entering the loop? What kinds of languages would be able to optimize this?</p>\n\n<p>As an extension if I were in an object oriented language with a similar loop except it looked more like this</p>\n\n<pre><code>for (int i = 0; i &lt; object.coolFunc(); i++) {\n   //Code that may change parameters and state of object but does not change the return value of coolFunc()\n}\n</code></pre>\n\n<p>What would be optimized?</p>\n"}, {"tags": ["c++", "g++", "mingw"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1519849772, "post_id": 49037978, "comment_id": 85081167, "body": "How are you building your program?"}, {"owner": {"reputation": 11, "user_id": 8661713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5670aaa53e492f52264db0a212f84c17?s=128&d=identicon&r=PG", "display_name": "Agust&#237;n Morantes", "link": "https://stackoverflow.com/users/8661713/agust%c3%adn-morantes"}, "edited": false, "score": 0, "creation_date": 1519849889, "post_id": 49037978, "comment_id": 85081227, "body": "using g++ compiler, simply doing &quot;g++ test.cpp&quot; from cmd, no additional arguments"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1519849973, "post_id": 49037978, "comment_id": 85081270, "body": "&quot;... because I wanted to write code using a lightweight code editor&quot; - Just for your information; you can use whatever editor you please and still use Microsofts <code>cl.exe</code> compiler. Nothing <i>forces</i> you to use the Visual Studio IDE just to use their compiler. You can even install a version of their toolkit that gives you just the compiler, linker, runtime libraries etc, <i>without</i> bundling Visual Studio. The compiler and IDE are <i>not</i> tied to eachother."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1519850154, "post_id": 49037978, "comment_id": 85081359, "body": "It&#39;s probably not finding the <code>.dll</code> files that comes with your MinGW install. Might need to add the appropriate paths to your Path/Environment Variables."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 2, "creation_date": 1519850247, "post_id": 49037978, "comment_id": 85081403, "body": "Try adding <code>#include &lt;string&gt;</code>"}, {"owner": {"reputation": 11, "user_id": 8661713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5670aaa53e492f52264db0a212f84c17?s=128&d=identicon&r=PG", "display_name": "Agust&#237;n Morantes", "link": "https://stackoverflow.com/users/8661713/agust%c3%adn-morantes"}, "edited": false, "score": 0, "creation_date": 1519850328, "post_id": 49037978, "comment_id": 85081447, "body": "tried with #include &lt;string&gt; before but it makes no difference"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1519850381, "post_id": 49037978, "comment_id": 85081473, "body": "@Agust&#237;nMorantes I&#39;ve used <a href=\"http://win-builds.org/doku.php\" rel=\"nofollow noreferrer\">Win-builds</a> to set up mingw-w64 on my windows machine. I can highly reccomend it if your having issues."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1519850443, "post_id": 49037978, "comment_id": 85081506, "body": "Don&#39;t name your program <code>test</code>."}, {"owner": {"reputation": 11, "user_id": 8661713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5670aaa53e492f52264db0a212f84c17?s=128&d=identicon&r=PG", "display_name": "Agust&#237;n Morantes", "link": "https://stackoverflow.com/users/8661713/agust%c3%adn-morantes"}, "edited": false, "score": 0, "creation_date": 1519850541, "post_id": 49037978, "comment_id": 85081544, "body": "Why? Anyway i tried renaming it and it does not change the outcome"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1519883175, "post_id": 49037978, "comment_id": 85091651, "body": "Are you trying to code without an IDE? You&#39;re not using notepad and the command line are you? Codeblocks is only an IDE, not a compiler, and it actually uses MinGW to compile the code by default. Why would you not want to use something like VS or Codeblocks? It makes life a lot easier."}], "answers": [{"comments": [{"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1519915183, "post_id": 49044209, "comment_id": 85108528, "body": "System libraries are always linked dynamically by default"}], "tags": [], "owner": {"reputation": 11, "user_id": 8661713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5670aaa53e492f52264db0a212f84c17?s=128&d=identicon&r=PG", "display_name": "Agust&#237;n Morantes", "link": "https://stackoverflow.com/users/8661713/agust%c3%adn-morantes"}, "is_accepted": true, "score": 1, "last_activity_date": 1519887515, "creation_date": 1519887515, "answer_id": 49044209, "question_id": 49037978, "link": "https://stackoverflow.com/questions/49037978/g-compiled-application-crashes-when-using-stdstring-or-char-pointer/49044209#49044209", "title": "G++ compiled application crashes when using std::string or char pointer", "body": "<p>Fixed it! For some reason g++ by default links the std library dynamically. As my program didn't find the dll it was not able to link std::string and std::cout. The solution was to pass the -static-libstdc++ argument to g++.</p>\n\n<p>TL;DR:\nInstead of compiling directly like this:</p>\n\n<pre><code>g++ somesourcefile.cpp\n</code></pre>\n\n<p>try this argument:</p>\n\n<pre><code>g++ somesourcefile.cpp -static-libstdc++\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8661713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5670aaa53e492f52264db0a212f84c17?s=128&d=identicon&r=PG", "display_name": "Agust&#237;n Morantes", "link": "https://stackoverflow.com/users/8661713/agust%c3%adn-morantes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 49044209, "answer_count": 1, "score": 0, "last_activity_date": 1519887709, "creation_date": 1519849671, "last_edit_date": 1519887709, "question_id": 49037978, "link": "https://stackoverflow.com/questions/49037978/g-compiled-application-crashes-when-using-stdstring-or-char-pointer", "title": "G++ compiled application crashes when using std::string or char pointer", "body": "<p>I just installed MinGW because I wanted to write code using a lightweight code editor instead of Visual Studio or Codeblocks, both of which I never had a problem with. So the code compiles and works, but for some reason it crashes every time I try to use a string or char pointer. For example this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    std::string a;\n    a = \"Hello\";\n    std::cout &lt;&lt; a;\n    std::cin.get();\n}\n</code></pre>\n\n<p>throws this error when executed:</p>\n\n<p><img src=\"https://i.stack.imgur.com/s8zl9.png\" alt=\"error\"></p>\n\n<p>but this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"hello\";\n    std::cin.get();\n}\n</code></pre>\n\n<p>Works perfectly:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Z62YE.png\" alt=\"image\"></p>\n\n<p>(I have tried both with std::string and const char* with no difference)</p>\n\n<p>I have Visual studio 2017 installed, I don't know if that could be the issue.\nMinGW version 6.0.3.</p>\n\n<p>PD: I only added C:/MinGW/bin directory to Path environment, don't know if I should add any other directory</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "reply_to_user": {"reputation": 6008, "user_id": 1983772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f429722c8167802b89cbe4d324aa1e?s=128&d=identicon&r=PG", "display_name": "Norrius", "link": "https://stackoverflow.com/users/1983772/norrius"}, "edited": false, "score": 0, "creation_date": 1519850955, "post_id": 49037975, "comment_id": 85081747, "body": "No. I told about using alignas in attribute syntax."}, {"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "reply_to_user": {"reputation": 6008, "user_id": 1983772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f429722c8167802b89cbe4d324aa1e?s=128&d=identicon&r=PG", "display_name": "Norrius", "link": "https://stackoverflow.com/users/1983772/norrius"}, "edited": false, "score": 1, "creation_date": 1519851180, "post_id": 49037975, "comment_id": 85081866, "body": "It is difficult to understand what you&#39;re asking. After reading the question linked by @Norrius, what exact questions do you have? Do you have a general question about what it does?"}, {"owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "edited": false, "score": 0, "creation_date": 1519851496, "post_id": 49037975, "comment_id": 85082029, "body": "By link which I added in question you can read."}, {"owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "edited": false, "score": 0, "creation_date": 1519851620, "post_id": 49037975, "comment_id": 85082102, "body": "Text are next:                                                                                Introduces implementation-defined attributes for types, objects, code, etc.  [[attr]] [[attr1, attr2, attr3(args)]] [[namespace::attr(args)]] alignas_specifier"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1519851741, "post_id": 49037975, "comment_id": 85082169, "body": "You should use <code>@username</code> when replying to people not under their own posts, otherwise they might not get a notification and not reply."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1519851915, "post_id": 49037975, "comment_id": 85082264, "body": "So, can you rephrase the question? As Litty said, it&#39;s not clear."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "edited": false, "score": 0, "creation_date": 1519851953, "post_id": 49038439, "comment_id": 85082277, "body": "I understand next that you can write: int x [[deprecated]] alignas(16);"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "edited": false, "score": 1, "creation_date": 1519851979, "post_id": 49038439, "comment_id": 85082298, "body": "@KotLeapold What&#39;s your question then?"}, {"owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "edited": false, "score": 0, "creation_date": 1519852020, "post_id": 49038439, "comment_id": 85082321, "body": "Can you write some example who you can use alignas specifier in attribute syntax?"}, {"owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "edited": false, "score": 0, "creation_date": 1519852188, "post_id": 49038439, "comment_id": 85082407, "body": "Can you write some example who you can use alignas specifier in attribute syntax?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "edited": false, "score": 0, "creation_date": 1519852361, "post_id": 49038439, "comment_id": 85082517, "body": "@KotLeapold There is only one syntax for it, which is described by <a href=\"https://stackoverflow.com/questions/15788947/where-can-i-use-alignas-in-c11\">the link mentioned in comments</a>. What do you mean by &quot;using it in attribute syntax&quot;?"}, {"owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "edited": false, "score": 0, "creation_date": 1519904819, "post_id": 49038439, "comment_id": 85102179, "body": "I understand correct, I can use alignas in place where I can you any attribute."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1519851548, "creation_date": 1519851548, "answer_id": 49038439, "question_id": 49037975, "link": "https://stackoverflow.com/questions/49037975/c-alignas-specifier-in-attribute-syntax/49038439#49038439", "title": "c++ alignas specifier in attribute syntax", "body": "<p>You seem to think that the page says that you can use <code>alignas</code> inside of <code>[[ ]]</code> as well as outside, but that's not the case.</p>\n\n<blockquote>\n  <p><strong>alignas</strong>_specifier is a part of the attribute specifier sequence, although it <strong>has different syntax</strong>. It <strong>may appear where the [[...]] attributes appear</strong> and may mix with them (provided it is used where alignas is permitted)</p>\n</blockquote>\n\n<p><sup>(emphasis mine)</sup></p>\n\n<p>It doesn't say that you can use <code>alignas</code> as an attribute. It says that <code>alignas</code> can appear in same locations as attribute lists.</p>\n"}], "owner": {"reputation": 29, "user_id": 9425581, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jeeMxdr0hKg/AAAAAAAAAAI/AAAAAAAAABI/b2_rFF0ogK0/photo.jpg?sz=128", "display_name": "Kot Leapold", "link": "https://stackoverflow.com/users/9425581/kot-leapold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1519859058, "answer_count": 1, "score": 0, "last_activity_date": 1519851548, "creation_date": 1519849660, "last_edit_date": 1519850869, "question_id": 49037975, "link": "https://stackoverflow.com/questions/49037975/c-alignas-specifier-in-attribute-syntax", "closed_reason": "Duplicate", "title": "c++ alignas specifier in attribute syntax", "body": "<p>I have been programming in C++ for a long time and decided to learn deeper C++ language. I read a very good site <a href=\"http://en.cppreference.com/w/cpp/language/attributes\" rel=\"nofollow noreferrer\">enter link description here</a>\nand started reading articles about attributes.</p>\n\n<p>Common syntax attributes give programmers the alignas-specifier with attribute syntax. </p>\n\n<p>How does it work and where I can write attributes with alignas-specifier?</p>\n"}, {"tags": ["c++", "function", "object"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519848796, "post_id": 49037689, "comment_id": 85080634, "body": "Appears that <code>CustomerQ</code> and <code>EventQ</code> have not been declared.  Also, since they are static to the class, it is very odd to set them in the instance&#39;s constructor."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519849755, "post_id": 49037689, "comment_id": 85081153, "body": "You need to get out of the habit of using <code>new</code> unless absolutely necessary (such as linked lists).  This one major difference between Java and C++.  BTW, C++ does not have garbage collection."}, {"owner": {"reputation": 121, "user_id": 5495155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5quCd.png?s=128&g=1", "display_name": "BadCoder", "link": "https://stackoverflow.com/users/5495155/badcoder"}, "edited": false, "score": 0, "creation_date": 1519849859, "post_id": 49037689, "comment_id": 85081211, "body": "Yes, for more context these are Queues, and PriorityQueues (secretly a sorted linked list)"}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1519848683, "creation_date": 1519848683, "answer_id": 49037762, "question_id": 49037689, "link": "https://stackoverflow.com/questions/49037689/c-undefined-reference-with-objects/49037762#49037762", "title": "C++ Undefined Reference with objects", "body": "<p>In C++ (and in Java), keyword <code>static</code> preceding a member variable denotes a class member, i.e. a variable that exists once for the class, and not once for each instance of this class.</p>\n\n<p>In C++ (in contrast to Java), you have to define a class member additionally outside the class definition,  i.e.:</p>\n\n<pre><code>class SuperMarket {\n        ...\n        static CustomerQ * regularLine; // this\n        ...\n};\n\n// .cpp-file:\n\nCustomerQ * SuperMarket::regularLine = nullptr;\n\nSuperMarket::SuperMarket() // Constructor\n{\n    count = 0;\n    ...\n}\n</code></pre>\n\n<p>Note, however, that assigning new objects to \"class members\" (i.e. static data members that exist only once in the program) within the constructor (i.e. with each object created) seldom makes sense.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 5495155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5quCd.png?s=128&g=1", "display_name": "BadCoder", "link": "https://stackoverflow.com/users/5495155/badcoder"}, "edited": false, "score": 0, "creation_date": 1519849451, "post_id": 49037770, "comment_id": 85080974, "body": "Thank you so much it worked, I am using static because I plan on having other classes access the exact same queue. <i>edit</i> I will only have 1 SuperMarket as well"}, {"owner": {"reputation": 10345, "user_id": 1270148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/esf9c.png?s=128&g=1", "display_name": "Sandy Chapman", "link": "https://stackoverflow.com/users/1270148/sandy-chapman"}, "reply_to_user": {"reputation": 121, "user_id": 5495155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5quCd.png?s=128&g=1", "display_name": "BadCoder", "link": "https://stackoverflow.com/users/5495155/badcoder"}, "edited": false, "score": 0, "creation_date": 1519850497, "post_id": 49037770, "comment_id": 85081529, "body": "@TeenCoder I&#39;d suggest following the singleton pattern here rather than some hybrid singleton that you have here. In other words make a single static Supermarket and make these static vars into members."}, {"owner": {"reputation": 121, "user_id": 5495155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5quCd.png?s=128&g=1", "display_name": "BadCoder", "link": "https://stackoverflow.com/users/5495155/badcoder"}, "reply_to_user": {"reputation": 10345, "user_id": 1270148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/esf9c.png?s=128&g=1", "display_name": "Sandy Chapman", "link": "https://stackoverflow.com/users/1270148/sandy-chapman"}, "edited": false, "score": 0, "creation_date": 1519850900, "post_id": 49037770, "comment_id": 85081716, "body": "@SandyChapman When I declared SuperMarket, I declared it as a static. Is that bad programming practice?"}, {"owner": {"reputation": 10345, "user_id": 1270148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/esf9c.png?s=128&g=1", "display_name": "Sandy Chapman", "link": "https://stackoverflow.com/users/1270148/sandy-chapman"}, "reply_to_user": {"reputation": 121, "user_id": 5495155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5quCd.png?s=128&g=1", "display_name": "BadCoder", "link": "https://stackoverflow.com/users/5495155/badcoder"}, "edited": false, "score": 0, "creation_date": 1519851079, "post_id": 49037770, "comment_id": 85081815, "body": "@TeenCoder I&#39;d suggest doing some investigation around the singleton pattern. Some consider it an antipattern but it is still very common and when you in fact only need one instance it&#39;s an easy way to achieve it. More info <a href=\"https://stackoverflow.com/a/271104/1270148\">stackoverflow.com/a/271104/1270148</a>"}], "tags": [], "owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "is_accepted": true, "score": 3, "last_activity_date": 1519848715, "creation_date": 1519848715, "answer_id": 49037770, "question_id": 49037689, "link": "https://stackoverflow.com/questions/49037689/c-undefined-reference-with-objects/49037770#49037770", "title": "C++ Undefined Reference with objects", "body": "<p>You only declared your static class members; you need to define them outside of the class the same way you would do with functions.</p>\n\n<p>In your <code>SuperMarket</code> source file:</p>\n\n<pre><code>// You probably want to initialize outside of the constructor, because otherwise it would\n// erase your queues whenever a new instance of SuperMarket is created.\nCustomerQ* SuperMarket::regularLine = new CustomerQ();\nCustomerQ* SuperMarket::expressLine = new CustomerQ();\nEventQ* SuperMarket::eventQueue = new EventQ();\n\nSuperMarket::SuperMarket() // Constructor\n{\n    // Probably don't initialize your statics in here\n    // ...\n</code></pre>\n\n<p>However, in this case I don't think it makes sense for those members to be static.  Static indicates that they should be shared across all instances of the containing class; does it really make sense for different <code>SuperMarket</code>s to all share the same lines of customers?</p>\n"}], "owner": {"reputation": 121, "user_id": 5495155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5quCd.png?s=128&g=1", "display_name": "BadCoder", "link": "https://stackoverflow.com/users/5495155/badcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 49037770, "answer_count": 2, "score": 1, "last_activity_date": 1519848715, "creation_date": 1519848368, "question_id": 49037689, "link": "https://stackoverflow.com/questions/49037689/c-undefined-reference-with-objects", "title": "C++ Undefined Reference with objects", "body": "<p>For context,  I am brand new in C++, I program in Java. So I am very bad with C++ syntax and would require dumbed down answers. </p>\n\n<p>I cannot seem to understand why I am getting this error. I checked multiple answers but they are all for primitive variables. I am using objects, which I am guessing is causing some error or I just am blind.</p>\n\n<p>Here is my class, the focus is on 3 static variables under public</p>\n\n<pre><code>class SuperMarket\n{\n    private:\n        int count;\n        int totalService;\n        int totalWait;\n    public:\n        static CustomerQ * regularLine; // this\n        static CustomerQ * expressLine; // this\n        static EventQ * eventQueue; // this\n    // Constructors\n        SuperMarket();\n    // Destructor\n        ~SuperMarket();\n    // Accessors\n        void start(int choice, string file);\n        static void loop();\n    // Mutators\n};\n</code></pre>\n\n<p>I initialize the static members in my constructor</p>\n\n<pre><code>SuperMarket::SuperMarket() // Constructor\n{\n    count = 0;\n    totalService = 0;\n    totalWait = 0;\n    regularLine = new CustomerQ(); *error*\n    expressLine = new CustomerQ(); *error*\n    SuperMarket::eventQueue = new EventQ(); *error*\n}\n</code></pre>\n\n<p>As well as anywhere else I do SuperMarket::Object I get the error. I tried using both SuperMarket:: and without as you can see, but my error doesn't go away. Of course outside my SuperMarket class I do SuperMarket:: as well.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 4, "creation_date": 1519848412, "post_id": 49037616, "comment_id": 85080434, "body": "SO is for specific programming Q&amp;A, not code review, guidance or mentoring. Please take <a href=\"https://stackoverflow.com/tour\">the tour</a> and read <a href=\"https://stackoverflow.com/help\">the help page</a>. Welcome to SO."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519849469, "post_id": 49037616, "comment_id": 85080991, "body": "Unrelated terminology: <code>count = 1; &#47;&#47; Initialize counter</code> is an assignment, not an initialization. <code>int count = 1; &#47;&#47; Initialize counter</code> is an initialization. Initialization can only be done when defining the variable or in a <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">member initializer list</a>. Assignment can take a very different path than initialization and initialization often allows the compiler extra leeway in optimizing."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519849834, "post_id": 49037616, "comment_id": 85081202, "body": "When you used a debugger, which statements are causing the issue?"}], "owner": {"reputation": 11, "user_id": 9425474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/955273d105ae93149c4258e8f1f01783?s=128&d=identicon&r=PG&f=1", "display_name": "yo0525", "link": "https://stackoverflow.com/users/9425474/yo0525"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519847992, "creation_date": 1519847992, "question_id": 49037616, "link": "https://stackoverflow.com/questions/49037616/c-case-switch-printing-to-a-loop-and-stream-to-a-file", "title": "C++ Case Switch printing to a Loop and stream to a file", "body": "<p>So I am working on a homework assignment and I have to create a Menu Driven Program to ask for how many repetitions I want for each loop type. I have most of the coding down and it prints to my file. I just don't know how to get it to be able to print how many numbers I want for each loop and to be able to put in dashes for when there is no number. For example if I chose only four numbers to be printed in my while loop, There would have to be 6 dashes for the rest of the box in my text file. I would really appreciate any advice or steps in the right direction. I also cannot use arrays because we haven't learned those in class yet.\n<a href=\"https://i.stack.imgur.com/2HXne.png\" rel=\"nofollow noreferrer\">This is what my current program text file looks like with just loops.</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nofstream ofs(\"J_Lab.txt\");\n\n// Global Variables\nstring myname = \"Salvador J \";\nstring dat = \"March 3 \";\nstring crnum = \"CIS  \";\nstring lab = \"Lab 5 \";\nstring sum = \"Case Switch \";\nstring eof = \"EOF MESSAGE \";\nstring lnu = \"________________________________________\"\n\"________________________________________\";\nstring pipe = \"|\";\nstring lnu2 = \"|_______________________________________\"\n\"_______________________________________|\";\n\n// Variables for this program only\nstring wloop = \"While\";\nstring dwl = \"Do\";\nstring output = \"LOOP Output for 3 different Looping mechanisms\";\nstring frloop = \"For\";\nstring lnu3 = \"|_______|______|______|______|______|\"\n\"______|______|______|______|______|_______|\";\nstring ttl = \"Repitition selection for Looping\";\n\n\n//*****************************\n//* Creates a Line with Pipes *\n//*****************************\n\nvoid pipefunc()\n{\n    ofs &lt;&lt; lnu2 &lt;&lt; endl;\n}\n\n//****************************\n//*Creates another line with *\n//* pipes running through it *\n//****************************\nvoid pipe2()\n\n{\n    ofs &lt;&lt; lnu3 &lt;&lt; endl;\n}\n\n//********************\n//* HEADER            *\n//********************\nvoid hdr()\n{\n    ofs &lt;&lt; lnu &lt;&lt; endl;\n    ofs &lt;&lt; pipe\n    &lt;&lt; left &lt;&lt; setw(20) &lt;&lt; myname\n    &lt;&lt; left &lt;&lt; setw(20) &lt;&lt; dat\n    &lt;&lt; left &lt;&lt; setw(20) &lt;&lt; crnum\n    &lt;&lt; left &lt;&lt; setw(18) &lt;&lt; lab\n    &lt;&lt; pipe &lt;&lt; endl;\n\n}\n\n//*********************************\n//* Creates a box to explain what *\n//* we are looking at             *\n//*********************************\nvoid box()\n{\n    ofs &lt;&lt; lnu2 &lt;&lt; endl;\n    ofs &lt;&lt; pipe\n    &lt;&lt; right &lt;&lt; setw(60) &lt;&lt; output\n    &lt;&lt; right &lt;&lt; setw(19) &lt;&lt; pipe &lt;&lt; endl;\n}\n\n//*****************************\n//* Summary of what's printed *\n//*****************************\nvoid ftr()\n{\n    ofs &lt;&lt; pipe &lt;&lt; left &lt;&lt; setw(78) &lt;&lt; sum &lt;&lt; pipe &lt;&lt; endl;\n\n}\n\n//***********************\n//* End of File Message *\n//***********************\nvoid eoff()\n{\n    ofs &lt;&lt; pipe\n    &lt;&lt; left &lt;&lt; setw(15) &lt;&lt; eof\n    &lt;&lt; left &lt;&lt; setw(18) &lt;&lt; myname\n    &lt;&lt; left &lt;&lt; setw(12) &lt;&lt; dat\n    &lt;&lt; left &lt;&lt; setw(15) &lt;&lt; crnum\n    &lt;&lt; left &lt;&lt; setw(18) &lt;&lt; lab\n    &lt;&lt; pipe &lt;&lt; endl;\n}\n\n//***********\n//* Menu    *\n//***********\n\nvoid menu()\n{\n    int n;\n    do\n    {\n        cout &lt;&lt; string(10, '\\n');\n        cout &lt;&lt; string(5, '\\t') &lt;&lt; ttl &lt;&lt; endl; // These will be variables\n        cout &lt;&lt; string(5, '\\t') &lt;&lt; \"1. While Loop - How many?\" &lt;&lt; endl;\n        cout &lt;&lt; string(5, '\\t') &lt;&lt; \"2. Do Loop    - How many?\" &lt;&lt; endl;\n        cout &lt;&lt; string(5, '\\t') &lt;&lt; \"3. For Loop   - How many?\" &lt;&lt; endl;\n        cout &lt;&lt; string(5, '\\t') &lt;&lt; \"4. Quit\" &lt;&lt; endl;\n\n\n        cout &lt;&lt; string(5, '\\t') &lt;&lt; \"Enter a number between 1-4\" &lt;&lt; endl;\n        cout &lt;&lt; string(5, '\\t');\n        cin &gt;&gt; n;\n\n\n        switch (n)\n        {\n            case 1: cout &lt;&lt; \"Inside case 1 === \" &lt;&lt; n &lt;&lt; endl;\n                break;\n            case 2: cout &lt;&lt; \"Inside case 2 === \" &lt;&lt; n &lt;&lt; endl;\n                break;\n            case 3: cout &lt;&lt; \"Inside case 3 === \" &lt;&lt; n &lt;&lt; endl;\n                break;\n            case 4: cout &lt;&lt; \"We are out of here! === \" &lt;&lt; n &lt;&lt; endl;\n                break;\n            default: cout &lt;&lt; \"Invalid data entry === \" &lt;&lt; n &lt;&lt; endl;\n                cout &lt;&lt; \"Must enter a number between 1-4\" &lt;&lt; endl;\n        }\n    } while (n != 4);\n\n    system (\"pause\");\n}\n\n\n//***************\n//* While Loop  *\n//***************\nvoid whl()\n{\n\n    ofs &lt;&lt; pipe &lt;&lt; left\n    &lt;&lt; setw (7) &lt;&lt; wloop;\n    int count;\n    count = 1; // Initialize counter\n    while (count &lt;=10)\n    {\n        cout &lt;&lt; count;\n        ofs  &lt;&lt; left &lt;&lt; setw(6) &lt;&lt; pipe &lt;&lt; count;\n        count++;\n    }\n    ofs &lt;&lt; pipe &lt;&lt; endl;\n\n    menu();\n}\n\nint main()\n{\n    hdr();\n    pipefunc();\n    box();\n    pipefunc();\n    whl();\n    pipe2();\n    doo();\n    pipe2();\n    forr();\n    pipe2();\n    pipefunc();\n    pipefunc();\n    ftr();\n    pipefunc();\n    pipefunc();\n    eoff();\n    pipefunc();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "netbeans", "syntax-highlighting", "netbeans-8.2"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1519848151, "post_id": 49036997, "comment_id": 85080284, "body": "Do you have any compilation errors or is this just your IDE and C++ trying to outwit each other?"}, {"owner": {"reputation": 161, "user_id": 8868682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdee0740030935980754045e2d6aeb0?s=128&d=identicon&r=PG&f=1", "display_name": "engelant", "link": "https://stackoverflow.com/users/8868682/engelant"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519848486, "post_id": 49036997, "comment_id": 85080477, "body": "It&#39;s just the IDE, gcc has no problems at all, it just breaks syntax highlighting and auto completion beyond the line I used the Macro."}], "owner": {"reputation": 161, "user_id": 8868682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdee0740030935980754045e2d6aeb0?s=128&d=identicon&r=PG&f=1", "display_name": "engelant", "link": "https://stackoverflow.com/users/8868682/engelant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519845455, "creation_date": 1519845455, "question_id": 49036997, "link": "https://stackoverflow.com/questions/49036997/netbeans-c-macro-unecpected-token-with-macro-from-pegtl-library", "title": "Netbeans C++ Macro unecpected token: { with Macro from PEGTL library", "body": "<p>I stumbled across some behaviour that occours in conjunction with the C++11 PEG library <a href=\"https://github.com/taocpp/PEGTL\" rel=\"nofollow noreferrer\">PEGTL</a>. Unfortunatly I'm not capable to reproduce this behaviour outside the libraries function/templates. This occured with Netbeans </p>\n\n<p>A minimal example would look like this:</p>\n\n<pre><code>include &lt;tao/pegtl.hpp&gt;\nusing namespace tao::TAOCPP_PEGTL_NAMESPACE;\n\nstruct foo : istring&lt;'f','o','o'&gt; {};\nstruct bar : TAOCPP_PEGTL_ISTRING(\"foo\") {};\nstruct foo2 : istring&lt;'f','o','o'&gt; {};\n</code></pre>\n\n<p>TAOCPP_PEGTL_ISTRING is a macro definition, that expands to istring&lt;>, so TAOCPP_PEGTL_ISTRING(\"foo\") is the same as istring&lt;'f','o','o'>.\nGCC doesn't have a problem with that, but as soon as I try to use this Macro, it says</p>\n\n<pre><code>unexpected token: {\nunexpected token: }\nunknown identifier bar\n</code></pre>\n\n<p>and every following line gets errors too.</p>\n\n<ul>\n<li>the struct foo line is fine</li>\n<li>the struct bar line is where the error occurs</li>\n<li>struct foo2 would be fine, but since the struct bar line generated an error, it's also displaying an error</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/cosKV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cosKV.jpg\" alt=\"highlighted error\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/9IfWY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9IfWY.jpg\" alt=\"highlighted error message box\"></a></p>\n\n<p>Here is my System/Netbeans information:</p>\n\n<pre><code>Product Version: NetBeans IDE 8.2 (Build 201609270201)\nUpdates: NetBeans IDE is updated to version NetBeans 8.2 Patch 2\nJava: 1.8.0_101; Java HotSpot(TM) 64-Bit Server VM 25.101-b13\nRuntime: Java(TM) SE Runtime Environment 1.8.0_101-b13\nSystem: Linux version 4.13.0-36-generic running on amd64; UTF-8; en_US (nb)\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1519845349, "post_id": 49036938, "comment_id": 85078859, "body": "What is Class2? Where have you defined it? what is ObjectAccessor? you could provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1352, "user_id": 4057416, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vtBTZ.jpg?s=128&g=1", "display_name": "mohsen", "link": "https://stackoverflow.com/users/4057416/mohsen"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1519845561, "post_id": 49036938, "comment_id": 85078983, "body": "@eyllanesc Class2 is an c++ class that i used for code behind of qml pages in my app.for get some data from network and so on..."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1519845634, "post_id": 49036938, "comment_id": 85079027, "body": "I think you know from your reputation that for these cases the most appropriate thing is to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, the error can be found elsewhere."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1519845728, "post_id": 49036938, "comment_id": 85079073, "body": "Why are you assigning a new object to the object? I think you&#39;re trying to make a fool of yourself, without context I do not understand what you&#39;re trying."}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 1, "creation_date": 1519845893, "post_id": 49036938, "comment_id": 85079171, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/49024891/why-c-signal-will-not-work-after-use-class-as-property-in-qml-page\">Why c++ signal will not work after use class as property in qml page?</a>"}, {"owner": {"reputation": 1352, "user_id": 4057416, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vtBTZ.jpg?s=128&g=1", "display_name": "mohsen", "link": "https://stackoverflow.com/users/4057416/mohsen"}, "edited": false, "score": 0, "creation_date": 1519845901, "post_id": 49036938, "comment_id": 85079178, "body": "this new object have some information in himself.for exmaple data that receveid it form network.and i have set this object from another qml file to object accessor and in this qml file i get it again."}], "answers": [{"comments": [{"owner": {"reputation": 1352, "user_id": 4057416, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vtBTZ.jpg?s=128&g=1", "display_name": "mohsen", "link": "https://stackoverflow.com/users/4057416/mohsen"}, "edited": false, "score": 0, "creation_date": 1519846195, "post_id": 49037064, "comment_id": 85079315, "body": "<code>property Class2 cl2: null</code> ok If i use like this.How can i use signals of Class2?for example <code>onMessagedChanged</code>?"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 1352, "user_id": 4057416, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vtBTZ.jpg?s=128&g=1", "display_name": "mohsen", "link": "https://stackoverflow.com/users/4057416/mohsen"}, "edited": false, "score": 0, "creation_date": 1519846337, "post_id": 49037064, "comment_id": 85079394, "body": "Refresh the answer - the Connection element is what you need and you don&#39;t really need the property part."}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": true, "score": 3, "last_activity_date": 1519845750, "creation_date": 1519845750, "answer_id": 49037064, "question_id": 49036938, "link": "https://stackoverflow.com/questions/49036938/how-set-c-class-to-an-item-in-qml/49037064#49037064", "title": "How set C++ class to an Item in qml?", "body": "<p>First of all <code>class2obj</code> being <code>undefined</code> means it is not property interfaced to be accessible from QML.</p>\n\n<p>Second, you cannot assign a qml object to another qml object. It depends on what you want to do.</p>\n\n<p>If you want to assign identity, you will have to put it into a target reference, implemented as a property:</p>\n\n<pre><code>property Class2 cl2: null\n...\ncl2=ObjectAccessor.class2obj\n</code></pre>\n\n<p>If you want to assign value, as in to make the property values of the one object to the other, you will have to that member by member.</p>\n\n<p>And if all you need is to connect to a signal, then all you need is a connection element, provided that <code>ObjectAccessor.class2obj</code> actually works:</p>\n\n<pre><code>Connections {\n  target: ObjectAccessor.class2obj\n  onMessageChanged: doStuff()\n}\n</code></pre>\n\n<p>For a more complete answer, you will have to post the code related to <code>Class2</code> and <code>ObjectAccessor</code>. And also clarify that bit:</p>\n\n<blockquote>\n  <p>so i can all data on this object an all signals</p>\n</blockquote>\n"}], "owner": {"reputation": 1352, "user_id": 4057416, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vtBTZ.jpg?s=128&g=1", "display_name": "mohsen", "link": "https://stackoverflow.com/users/4057416/mohsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 49037064, "answer_count": 1, "score": -1, "last_activity_date": 1519845750, "creation_date": 1519845242, "last_edit_date": 1519845647, "question_id": 49036938, "link": "https://stackoverflow.com/questions/49036938/how-set-c-class-to-an-item-in-qml", "title": "How set C++ class to an Item in qml?", "body": "<p>I have a c++ class with name <code>Class2</code> and I registered it with <code>qmlRegisterType</code> method and I use it as code behind of qml pages in my application.</p>\n\n<p>I have qml file and in <code>onCompleted</code> I want to get an object of <code>Class2</code> and set it to <code>cl2</code> in the qml file .but I get an error</p>\n\n<blockquote>\n  <p>left-hand side of assignment operator is not an lvalue</p>\n</blockquote>\n\n<pre><code>Rectangle{\n    Component.onCompleted: {\n        cl2=ObjectAccessor.class2obj;//error is here\n    }\n    Class2 {\n            id: cl2\n            onMessageChanged: { }                \n    }\n}\n</code></pre>\n\n<p>In qml file I changed the defenition of <code>Class2</code></p>\n\n<pre><code>property Class2 cl2: Class2 {}\n</code></pre>\n\n<p>but now i get another error</p>\n\n<blockquote>\n  <p>Cannot assign [undefined] to Class2*</p>\n</blockquote>\n\n<p>How can i set object of `Class2' so i can all data on this object an all signals?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1519845469, "post_id": 49036877, "comment_id": 85078927, "body": "What does <code>student[i].getstudent()</code> return?"}, {"owner": {"reputation": 1, "user_id": 9419719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30bf407f02af9aa0460b650412e83d2?s=128&d=identicon&r=PG&f=1", "display_name": "shally", "link": "https://stackoverflow.com/users/9419719/shally"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1519846480, "post_id": 49036877, "comment_id": 85079478, "body": "@JohnnyMopp mark,i need to convert the mark of the students which is string type to int."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1519846727, "post_id": 49036877, "comment_id": 85079593, "body": "The last line should be <code>cout &lt;&lt; MARK&#47;2 &lt;&lt; endl;</code>"}, {"owner": {"reputation": 1, "user_id": 9419719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30bf407f02af9aa0460b650412e83d2?s=128&d=identicon&r=PG&f=1", "display_name": "shally", "link": "https://stackoverflow.com/users/9419719/shally"}, "edited": false, "score": 0, "creation_date": 1519847644, "post_id": 49036877, "comment_id": 85080028, "body": "It still cannot work.Although the string is successfully convert to int, but the output is incorrect"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1519848525, "post_id": 49036877, "comment_id": 85080499, "body": "What do mean &quot;incorrect&quot;. Maybe you want a <code>float</code> output."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 3, "last_activity_date": 1519846269, "creation_date": 1519846269, "answer_id": 49037219, "question_id": 49036877, "link": "https://stackoverflow.com/questions/49036877/how-to-covert-the-data-of-array-of-objects-type-string-to-int-in-c/49037219#49037219", "title": "How to covert the data of array of objects type string to int in c++", "body": "<p>Yeah, pre-C++11 you'd use a <code>stringstream</code> to convert from an <code>std::string</code> to an <code>int</code> or <code>atoi()</code>.</p>\n\n<p>If you however have access to C++11 I'd recommend using <code>std::stoi()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9419719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30bf407f02af9aa0460b650412e83d2?s=128&d=identicon&r=PG&f=1", "display_name": "shally", "link": "https://stackoverflow.com/users/9419719/shally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519858499, "creation_date": 1519844988, "last_edit_date": 1519858499, "question_id": 49036877, "link": "https://stackoverflow.com/questions/49036877/how-to-covert-the-data-of-array-of-objects-type-string-to-int-in-c", "title": "How to covert the data of array of objects type string to int in c++", "body": "<pre><code>for (i=0;i&lt;y;i++)\n{\nstringstream ss(student[i].getstudent());\nint MARK;\nss&gt;&gt;MARK;\n\ncout&lt;&lt;student[i].getstudent()/2&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Is this a proper way to convert the data type in the array of objects into <code>int</code>? I've tried this many times but it hasn't worked.</p>\n"}, {"tags": ["c++", "templates", "binary", "stdvector"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1519845513, "post_id": 49036826, "comment_id": 85078954, "body": "<code>unsigned char</code> is only 1 byte in size. You are reading the file as a text file, line by line. Reading a line like <code>&quot;2&quot;</code> as an <code>int</code> works fine, of course, since <code>operator&gt;&gt;</code> supports that conversion. But you can&#39;t read in a line like <code>&quot;010&quot;</code> as an <code>unsigned char</code>. The STL has no I/O manipulator for reading binary-digit strings. The code shown is going to read the individual chars, so it will read <code>&#39;0&#39;</code>, <code>&#39;1&#39;</code>, <code>&#39;0&#39;</code> instead. You will have to add extra code logic to read the <code>&quot;010&quot;</code> line and apply your own conversion logic to turn it into an <code>unsigned char</code> (0x02)."}, {"owner": {"reputation": 51, "user_id": 9393297, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Serhii S.", "link": "https://stackoverflow.com/users/9393297/serhii-s"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1519845665, "post_id": 49036826, "comment_id": 85079039, "body": "What a shame.  Thank you :D"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 2, "creation_date": 1519845670, "post_id": 49036826, "comment_id": 85079040, "body": "You have to read second file knowing that data is stored as string which represents binary. Currently it doesn&#39;t seem like you have this kind of detection in your template."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1519845928, "post_id": 49036826, "comment_id": 85079190, "body": "<i>&gt;&gt;I supposed, that I should use unsigned char for to store binary</i> You can try <code>std::bitset&lt;3&gt;</code> for type <code>T</code> and then convert it to <code>unsigned char</code> later"}], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 8756717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QGWyG.jpg?s=128&g=1", "display_name": "S. Huber", "link": "https://stackoverflow.com/users/8756717/s-huber"}, "is_accepted": false, "score": 1, "last_activity_date": 1519847948, "last_edit_date": 1519847948, "creation_date": 1519847611, "answer_id": 49037532, "question_id": 49036826, "link": "https://stackoverflow.com/questions/49036826/reading-from-file-into-vectort-line-by-line-works-incorrect-for-binary-data-c/49037532#49037532", "title": "Reading from file into vector&lt;T&gt; line by line works incorrect for binary data C++", "body": "<p>There is a lot wrong with this code, but your original question has the following answer:</p>\n\n<p><strong>Converting a 0-1 ASCII string to integer.</strong> Your code <code>line_in &gt;&gt; val</code> for val being of type <code>unsigned char</code> reads a single character, like '0' and '1'. You want to convert an ASCII string made of '0's and '1's, which forms a base-2 number, into an integer.\nIn this <a href=\"https://stackoverflow.com/questions/23596988/binary-string-to-integer-with-atoi#23597029\">SO answer</a> you find that <code>val = std::stoi(line, nullptr, 2);</code> does that for you.</p>\n\n<p>So, neither \"-3\" nor \"101\" are <em>integers</em> but <em>strings</em> that represent integers in base-10 and base-2, and stoi() does the conversion to integers for you. In case of base-10, however, the iostream <code>operator&gt;&gt;()</code> works as well. (You may also have a look into <code>std::setbase()</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": true, "score": 1, "last_activity_date": 1519849209, "creation_date": 1519849209, "answer_id": 49037881, "question_id": 49036826, "link": "https://stackoverflow.com/questions/49036826/reading-from-file-into-vectort-line-by-line-works-incorrect-for-binary-data-c/49037881#49037881", "title": "Reading from file into vector&lt;T&gt; line by line works incorrect for binary data C++", "body": "<p>The 2nd file seems to contain strings of binary format. Let's assume they are always 3 bits long, in which case if you use <code>std::bitset&lt;3&gt;</code> you will read each number in full. If you use <code>unsigned char</code> then you will only read one digit at a time. Here is your function, slightly modified with examples of reading different files (format of which you know before hand I suppose). As a bonus there is also example of how to convert <code>std::bitset</code> vector into <code>unsigned char</code> should you need it.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;bitset&gt;\n#include &lt;algorithm&gt; // std::transform\n\ntemplate&lt;typename T, typename A&gt;\nvoid fill_vector_from_file(std::string const &amp;filePath, std::vector&lt;T, A&gt; &amp;vec)\n{\n    std::ifstream ifs(filePath);\n    T val;\n\n    while (ifs &gt;&gt; val)\n        vec.push_back(val);\n}\n\nint main()\n{\n    // make sample files\n    std::ofstream ofs(\"myfile.txt\");\n    ofs &lt;&lt; \"2\\n\" &lt;&lt; \"-3\\n\" &lt;&lt; \"4\\n\";\n    ofs.close();\n    ofs.open(\"myfile2.txt\");\n    ofs &lt;&lt; \"010\\n\" &lt;&lt; \"111\\n\" &lt;&lt; \"001\\n\";\n    ofs.close();\n\n\n    // fill &lt;int&gt; vector\n    std::vector&lt;int&gt; vi;\n    fill_vector_from_file(\"myfile.txt\", vi);\n    // print int vector\n    for (auto n : vi)\n        std::cout &lt;&lt; n &lt;&lt; std::endl;\n\n\n    // fill &lt;bitset&gt; vector \n    std::vector&lt;std::bitset&lt;3&gt;&gt; vbs;\n    fill_vector_from_file(\"myfile2.txt\", vbs);\n    // print bitset vector\n    for (auto n : vbs)\n        std::cout &lt;&lt; n &lt;&lt; std::endl;\n\n\n    // [OPTIONAL] convert to vector &lt;unsigned char&gt;\n    std::vector&lt;unsigned char&gt; vuc(vbs.size());\n    std::transform(vbs.begin(), vbs.end(), vuc.begin(),\n        [](std::bitset&lt;3&gt; const &amp;bs) -&gt; unsigned char { return static_cast&lt;unsigned char&gt;(bs.to_ulong()); });\n    // print vector &lt;unsigned char&gt;\n    for (auto n : vuc)\n        std::cout &lt;&lt; int(n) &lt;&lt; std::endl;\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Working demo: <a href=\"http://coliru.stacked-crooked.com/view?id=42aa04e34e4194c1\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/view?id=42aa04e34e4194c1</a></p>\n\n<pre><code>2\n-3\n4\n010\n111\n001\n2\n7\n1\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9393297, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Serhii S.", "link": "https://stackoverflow.com/users/9393297/serhii-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 49037881, "answer_count": 2, "score": 1, "last_activity_date": 1519849209, "creation_date": 1519844836, "last_edit_date": 1519845293, "question_id": 49036826, "link": "https://stackoverflow.com/questions/49036826/reading-from-file-into-vectort-line-by-line-works-incorrect-for-binary-data-c", "title": "Reading from file into vector&lt;T&gt; line by line works incorrect for binary data C++", "body": "<p>There is a template to fill <code>vector &lt;T&gt;</code> from the file:</p>\n\n<pre><code>template&lt;typename T, typename A&gt;\nvoid fill_vector_from_file(const std::string  &amp;filePath, std::vector&lt;T, A&gt; &amp; target)\n{\n    std::ifstream is(filePath, std::ifstream::in);\n\n    is.seekg(0, std::ifstream::end);\n    std::size_t size = is.tellg();\n    is.seekg(0, std::ifstream::beg);\n    target.reserve(size);\n\nstd::string line;\nwhile (std::getline(is, line))\n{\n    std::istringstream line_in(line);\n    while (line_in)\n    {\n        T val = 0;\n        if (line_in &gt;&gt; val)\n        {\n            target.push_back(val);\n        }\n    }\n}\nis.close();\n</code></pre>\n\n<p>Data in files can be int or binary and stored one number per line , for example:<br>\nFor <strong>int</strong>:</p>\n\n<pre><code>2 \n-3\n4\n</code></pre>\n\n<p>and for <strong>binary</strong>:</p>\n\n<pre><code>010\n111\n001\n</code></pre>\n\n<p>When I checked template with <code>std::vector&lt;int&gt; v1</code> for integers\nand <code>std::vector&lt;unsigned char&gt; v2</code> , result of <code>v2[0]</code> was <code>0</code> instead of <code>010</code>.<br>\n(I supposed, that I should use unsigned char for to store binary)  </p>\n\n<p>Question: Is there any way to modify template , so the result of <code>v2[0]</code> will be as expected (<code>010</code>).</p>\n"}, {"tags": ["c++", "bit-fields", "can-bus"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519845145, "post_id": 49036770, "comment_id": 85078738, "body": "Thanks very much!  That was easy enough.  I could&#39;ve sworn I tried moving it 18 and didn&#39;t see the proper result but I was trying so many implementations of trying to concatenate at once I likely ignored it."}, {"owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "edited": false, "score": 0, "creation_date": 1519846237, "post_id": 49036770, "comment_id": 85079335, "body": "Absolutely!  Sorry you answered so fast I had to wait :)"}], "tags": [], "owner": {"reputation": 897, "user_id": 334690, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/zSlND.jpg?s=128&g=1", "display_name": "Celal Erg&#252;n", "link": "https://stackoverflow.com/users/334690/celal-erg%c3%bcn"}, "is_accepted": true, "score": 2, "last_activity_date": 1519844588, "creation_date": 1519844588, "answer_id": 49036770, "question_id": 49036701, "link": "https://stackoverflow.com/questions/49036701/how-to-concatenate-two-bitfields/49036770#49036770", "title": "How to Concatenate two BitFields", "body": "<p>You should shift 18 bits first and then do the OR. For example:</p>\n\n<p><code>int result = (BID&lt;&lt;18) | IDEX;</code></p>\n\n<p>Otherwise you are overwriting the first block. What you are doing here is shifting 11 bits and then ORing with 18 bits which corrupts the first 11 bits indeed.</p>\n"}], "owner": {"reputation": 43, "user_id": 9420526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYnfHr8NNOA/AAAAAAAAAAI/AAAAAAAAALM/OkckGL3Tpn8/photo.jpg?sz=128", "display_name": "SamJ", "link": "https://stackoverflow.com/users/9420526/samj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 49036770, "answer_count": 1, "score": 2, "last_activity_date": 1519852879, "creation_date": 1519844314, "last_edit_date": 1519852879, "question_id": 49036701, "link": "https://stackoverflow.com/questions/49036701/how-to-concatenate-two-bitfields", "title": "How to Concatenate two BitFields", "body": "<p>I have two seperate bitfields that make up a \"Identity\" field that are 11 + 18 bits in length (29 bits total).</p>\n\n<p>In the bitfield they are of the expected size:</p>\n\n<pre><code>header a;\nmemset(a.arr, 0, sizeof(a.arr));\na = {0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0}; // 1010 0000\n\ncout &lt;&lt; hex &lt;&lt; a.BID &lt;&lt; endl; // 010 0000 1010 -&gt; 20a\ncout &lt;&lt; hex &lt;&lt; a.IDEX &lt;&lt; endl; // 00 1010 0000 1010 0000 -&gt; a0a0\n</code></pre>\n\n<p>and what I need to do is combine these fields into a 29-bit segment, e.g.  010 0000 1010 00 1010 0000 1010 0000.</p>\n\n<p>When attempting to concatenate the two bitfields however the result is not what I expect:</p>\n\n<pre><code>int BID = a.BID;\nint IDEX = a.IDEX;    \nint result = (BID&lt;&lt;11) | IDEX;\ncout &lt;&lt; BID &lt;&lt; endl;\nprintf(\"%x %d\",result, result);  // -&gt; 10f0a0 (21 bits) where I expect 828A0A0 (29 bits)\n</code></pre>\n\n<p>It's important for me to have all 29 bits as within this 29-bit field there's various subfields and I was going to take this output and put it through another bit-field to resolve those subfields.</p>\n\n<p>Would you be able to assist in how I could combine BID and IDEX mentioned above into one combined bitfield of 29 bits?  Unfortunately they have two bits inbetween the BID and IDEX fields another in the header that are ignored which is why I cannot just set my bitfield to 29 bits.</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1519844551, "post_id": 49036693, "comment_id": 85078417, "body": "Also related: <a href=\"https://stackoverflow.com/questions/2528318/how-come-an-arrays-address-is-equal-to-its-value-in-c\" title=\"how come an arrays address is equal to its value in c\">stackoverflow.com/questions/2528318/&hellip;</a>"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1519844802, "post_id": 49036693, "comment_id": 85078551, "body": "I mean no offense by posting these links, I&#39;m only trying to save someone else the effort of answering this question if it&#39;s already been answered. Your question seems to boil down to &quot;<i>why are <code>arey</code> and <code>&amp;arey</code> outputting the same thing</i>?&quot; which I believe my linked questions to answer. If you don&#39;t think so, please feel free to comment why your question is different so that answers can focus on that!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1519844871, "post_id": 49036693, "comment_id": 85078591, "body": "That being said, while those are helpful links I do not believe either is an appropriate duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519844932, "post_id": 49036761, "comment_id": 85078620, "body": "Your three lines are actually a good way to demonstrate that what you read is total nonsense."}, {"owner": {"reputation": 59, "user_id": 9288396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee37a53ede7011b9922b887f7d27bd61?s=128&d=identicon&r=PG&f=1", "display_name": "Ameen Izhac", "link": "https://stackoverflow.com/users/9288396/ameen-izhac"}, "edited": false, "score": 0, "creation_date": 1519845290, "post_id": 49036761, "comment_id": 85078820, "body": "oh ok thanks that makes sense now"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1519844556, "creation_date": 1519844556, "answer_id": 49036761, "question_id": 49036693, "link": "https://stackoverflow.com/questions/49036693/i-dont-understand-how-an-arrays-name-is-a-pointer-to-the-array/49036761#49036761", "title": "I dont understand how an arrays name is a pointer to the array", "body": "<blockquote>\n  <p>I dont understand how an arrays name is a pointer to the array</p>\n</blockquote>\n\n<p>It isn't.</p>\n\n<blockquote>\n  <p>I have read that the name of the array is a pointer to the array</p>\n</blockquote>\n\n<p>Whoever wrote that was lying to you.</p>\n\n<p>The name of the array is the name of the array.</p>\n\n<blockquote>\n  <p>Can someone explain why</p>\n</blockquote>\n\n<p>Under certain conditions (e.g. passing it to a function) it gets automatically (and transparently) converted to a pointer to the array's first element. That's an unfortunate truth we inherited from C.</p>\n\n<p>But the name of the array is still just the name of the array.</p>\n\n<p>So:</p>\n\n<pre><code>arey          An array\n&amp;arey         Address of the array\nf(&amp;arey)      Passing the address of the array\nf(arey)       Still passing the address of the array (ish) - thanks a lot, C!\nf(*arey)      Passing the first element's value\n</code></pre>\n\n<p>Now consider that <code>cout &lt;&lt; x</code> is actually <code>cout.operator&lt;&lt;(x)</code> (i.e. a function call) and that explains your output.</p>\n\n<blockquote>\n  <p>if it is a pointer it should have its own memory address right?</p>\n</blockquote>\n\n<p><em>If</em> it were a pointer then, yes, it would.</p>\n"}, {"tags": [], "owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "is_accepted": false, "score": 2, "last_activity_date": 1519848589, "last_edit_date": 1519848589, "creation_date": 1519846155, "answer_id": 49037183, "question_id": 49036693, "link": "https://stackoverflow.com/questions/49036693/i-dont-understand-how-an-arrays-name-is-a-pointer-to-the-array/49037183#49037183", "title": "I dont understand how an arrays name is a pointer to the array", "body": "<p><strong>Addendum to the answer of <a href=\"https://stackoverflow.com/a/49036761/2999921\">Lightness Races in Orbit</a>:</strong></p>\n\n<p>Because this question is categorized as a C++ question and not as plain C, there might be the following of interest, too.</p>\n\n<p>Modern C++ suggests to use <code>std::array</code> in favor of a plain C-Array. It comes without costs, but more comfort (like combining location in memory and size or even compile-time bounds checks).</p>\n\n<p>See also: <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a> and <a href=\"https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#slcon1-prefer-using-stl-array-or-vector-instead-of-a-c-array\" rel=\"nofollow noreferrer\">C++ Core Guidelines - std::array</a></p>\n\n<p>Most operations are transparent to the usage of C-Arrays.</p>\n\n<p>Additionally it is to prefer to use <code>std::addressof</code> in favour of <code>&amp;</code> (which also works well with <code>std::array</code>).</p>\n\n<p>See: <a href=\"http://en.cppreference.com/w/cpp/memory/addressof\" rel=\"nofollow noreferrer\">std::addressof</a></p>\n"}], "owner": {"reputation": 59, "user_id": 9288396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee37a53ede7011b9922b887f7d27bd61?s=128&d=identicon&r=PG&f=1", "display_name": "Ameen Izhac", "link": "https://stackoverflow.com/users/9288396/ameen-izhac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1519851142, "accepted_answer_id": 49036761, "answer_count": 2, "score": 0, "last_activity_date": 1519848589, "creation_date": 1519844288, "question_id": 49036693, "link": "https://stackoverflow.com/questions/49036693/i-dont-understand-how-an-arrays-name-is-a-pointer-to-the-array", "closed_reason": "Duplicate", "title": "I dont understand how an arrays name is a pointer to the array", "body": "<p>Im reading a book in c++ and I was doing some tests as I didnt understand something and when I tried printing these 3 lines I was expecting something different for all 3. The first one, the location in memory of the pointer, the second one, the address stored by the pointer, and the third one, the value at the address stored by the pointer. But instead the first two were the same:</p>\n\n<pre><code>cout &lt;&lt;&amp;arey &lt;&lt;\"\\n\";\ncout &lt;&lt;arey &lt;&lt;\"\\n\";\ncout &lt;&lt;*arey &lt;&lt;\"\\n\";\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>0x6afee8\n0x6afee8\n0\n</code></pre>\n\n<p>Can someone explain why as I have read that the name of the array is a pointer to the array so if it is a pointer it should have its own memory address right?</p>\n"}, {"tags": ["c++", "pointers", "byte", "void-pointers"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1519844074, "post_id": 49036615, "comment_id": 85078140, "body": "You&#39;re using C++. You have better options than <code>malloc</code>. Additionally, if you&#39;re creating a character buffer, create a character buffer, not a C-style <code>void*</code> thing."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 3, "creation_date": 1519844200, "post_id": 49036615, "comment_id": 85078225, "body": "What does &quot;doesn&#39;t work&quot; mean in this context?  What were you expecting, and what did you see that didn&#39;t meet that expectation?"}, {"owner": {"reputation": 11, "user_id": 9425214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/299ef3ef6e675647c8260ac2e8ba8cdc?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplus Dev", "link": "https://stackoverflow.com/users/9425214/cplusplus-dev"}, "edited": false, "score": 0, "creation_date": 1519844242, "post_id": 49036615, "comment_id": 85078248, "body": "What are the &quot;better options&quot;? In this case, the function inputs and outputs a void*, so I cannot change that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1519844297, "post_id": 49036615, "comment_id": 85078283, "body": "<code>new char[bufSize]</code> at the very least. You can keep your <code>void*</code> but it is always going to be pointing to a buffer of &quot;things&quot;, and <code>void</code> is not a &quot;thing&quot;. Anyway the code looks basically functional so yes you&#39;re going to have to tell us what &quot;it doesn&#39;t work&quot; means for you."}, {"owner": {"reputation": 11, "user_id": 9425214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/299ef3ef6e675647c8260ac2e8ba8cdc?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplus Dev", "link": "https://stackoverflow.com/users/9425214/cplusplus-dev"}, "edited": false, "score": 0, "creation_date": 1519844439, "post_id": 49036615, "comment_id": 85078367, "body": "&#39;=&#39;: truncation of constant value is the warning."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1519844464, "post_id": 49036615, "comment_id": 85078376, "body": "Okay so it <i>does</i> work, but you get a warning. 0xff doesn&#39;t fit in a char if char is signed so try unsigned char? That has nothing to do with iteration, though."}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 1, "creation_date": 1519844792, "post_id": 49036615, "comment_id": 85078546, "body": "Additionally, the last statement <code>buffer = static_cast&lt;void*&gt;(bufferPointer);</code> is unneeded. <code>buffer</code> still points to the same memory that <code>bufferPointer</code> is pointing at."}, {"owner": {"reputation": 11, "user_id": 9425214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/299ef3ef6e675647c8260ac2e8ba8cdc?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplus Dev", "link": "https://stackoverflow.com/users/9425214/cplusplus-dev"}, "edited": false, "score": 0, "creation_date": 1519844876, "post_id": 49036615, "comment_id": 85078596, "body": "Thanks for the help everyone, I was able to resolve the issue."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1519845739, "creation_date": 1519845739, "answer_id": 49037063, "question_id": 49036615, "link": "https://stackoverflow.com/questions/49036615/how-to-iterate-through-the-bytes-of-a-void-in-c/49037063#49037063", "title": "How to iterate through the bytes of a void* in C++?", "body": "<p>You need to cast the <code>void*</code> to an <code>unsigned char*</code>. You can then use <em>pointer arithmetic</em> to traverse the block of memory that you own, and set values by pointer dereference.</p>\n\n<p>Remember that pointer arithmetic is only valid within arrays. For this purpose an object can be considered to be an array of length 1. Also, and perhaps confusingly, an array of N <code>int</code> elements will equate to an array of <code>N * sizeof(int)</code> <code>unsigned char</code> elements. </p>\n"}], "owner": {"reputation": 11, "user_id": 9425214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/299ef3ef6e675647c8260ac2e8ba8cdc?s=128&d=identicon&r=PG&f=1", "display_name": "cplusplus Dev", "link": "https://stackoverflow.com/users/9425214/cplusplus-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519845739, "creation_date": 1519844012, "last_edit_date": 1519844075, "question_id": 49036615, "link": "https://stackoverflow.com/questions/49036615/how-to-iterate-through-the-bytes-of-a-void-in-c", "title": "How to iterate through the bytes of a void* in C++?", "body": "<p>What would be the best way to iterate through each byte of a void* buffer, and a assign a value to each depending on certain conditions?</p>\n\n<pre><code>        unsigned int bufSize = 100; //could be any value\n        void* buffer = malloc(bufSize);\n        char* bufferPointer = static_cast&lt;char*&gt;(buffer);\n\n        for (unsigned int i = 0; i &lt; bufSize; i++){ \n\n            if (i % 2 == 0){\n                bufferPointer[i] = 0x00;\n            }\n            else{\n                bufferPointer[i] = 0xff;\n            }\n        }\n        buffer = static_cast&lt;void*&gt;(bufferPointer);\n</code></pre>\n\n<p>Why doesn't this work? I tried converting to a char* to iterate over each byte.</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2017", "compiler-bug"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1519843872, "post_id": 49036542, "comment_id": 85078023, "body": "OT: if you <code>#include &lt;cstdint&gt;</code>, you automatically get <code>std::uint64_t</code>."}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1519844058, "post_id": 49036542, "comment_id": 85078134, "body": "I prefer not using underscores."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1519844071, "post_id": 49036542, "comment_id": 85078137, "body": "Can you include your definition of array2d, if it&#39;s not too long?"}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "edited": false, "score": 0, "creation_date": 1519844099, "post_id": 49036542, "comment_id": 85078155, "body": "Check the link, it is included there."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 6, "creation_date": 1519844114, "post_id": 49036542, "comment_id": 85078168, "body": "@lightxbulb That&#39;s not the point, <code>std::uint64_t</code> is defined to be exactly 64 bits wide, <code>unsigned long long</code> has no such guarantee."}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "edited": false, "score": 0, "creation_date": 1519844242, "post_id": 49036542, "comment_id": 85078247, "body": "Thanks, I&#39;ll be sure to change all my typedefs to use the __int64 and __int32 types."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 2, "creation_date": 1519844472, "post_id": 49036542, "comment_id": 85078381, "body": "@lightxbulb How do you see <code>std::uint64_t</code> and read <code>__int64</code>?"}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "edited": false, "score": 0, "creation_date": 1519844624, "post_id": 49036542, "comment_id": 85078454, "body": "uint64_t seems to be a typedef of __int64, but maybe that&#39;s only on my compiler."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1519844824, "post_id": 49036542, "comment_id": 85078568, "body": "That&#39;s your compiler. Note: <code>std::uint64_t</code> is optional in the C++ standard. If the system does not support 64 unsigned integers for some reason, probably because it&#39;s a 16 bit CPU, you get a nice, pretty compiler error rather than a nasty runtime surprise. Very helpful when porting software to other platforms."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1519845422, "post_id": 49036542, "comment_id": 85078891, "body": "I&#39;ve been trying your code locally with g++ and online visual studio here: <a href=\"http://rextester.com/l/cpp_online_compiler_visual\" rel=\"nofollow noreferrer\">rextester.com/l/cpp_online_compiler_visual</a> - didn&#39;t get the issue you were talking about in either case."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1519845558, "post_id": 49036542, "comment_id": 85078980, "body": "Unrelated: <code>Array2d</code> violates <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">the Rule of Three</a>. This is an unnecessary risk."}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519845633, "post_id": 49036542, "comment_id": 85079025, "body": "@user4581301 I put the whole code in. Yeah, I should have deleted the copy ctor, thanks for pointing it out."}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "reply_to_user": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1519845703, "post_id": 49036542, "comment_id": 85079061, "body": "@Cubic: Did you enable the optimizations? I&#39;ve tried it only in Visual Studio."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1519845878, "post_id": 49036542, "comment_id": 85079163, "body": "With /O, /O2 and /O3. Voting to close as nonreproducible."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1519845890, "post_id": 49036542, "comment_id": 85079168, "body": "I have VS2017, I used /Ot and /Ob2, and I cannot reproduce your error on any optimization level."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1519845933, "post_id": 49036542, "comment_id": 85079192, "body": "No VS17, but unable to reproduce in VS15"}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1519846344, "post_id": 49036542, "comment_id": 85079397, "body": "@BenjaminLindley what&#39;s your _MSC_FULL_VER?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1519846509, "post_id": 49036542, "comment_id": 85079492, "body": "@lightxbulb: 191025019"}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1519846624, "post_id": 49036542, "comment_id": 85079542, "body": "@BenjaminLindley: I assume that&#39;s an earlier version than what I have: 191125547?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1519846784, "post_id": 49036542, "comment_id": 85079616, "body": "Yes, I would assume so."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1519847653, "post_id": 49036542, "comment_id": 85080032, "body": "It is specific to x64 code generation.  Applying the <code>__declspec(noinline)</code> attribute to computeErrors() is a workaround.  Use Help &gt; Send Feedback &gt; Report a Problem to tell them about it."}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1519847904, "post_id": 49036542, "comment_id": 85080172, "body": "@HansPassant: Thanks a lot. I already sent a report. I got to the conclusion that inlining is the issue since it only happens if /Ob2 is enabled. How did you figure it was x64 specific? Did you just compile it with x86 and test it, or did you figure it out in another way?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1519848045, "post_id": 49036542, "comment_id": 85080239, "body": "Sure, got no repro for x86 so tried x64 next."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1519848409, "post_id": 49036542, "comment_id": 85080432, "body": "@Cubic -- re: &quot;no such guarantee&quot; -- well, to be absolutely clear: <code>unsigned long long</code> is guaranteed to be at least 64 bits wide. So, literally, no, it&#39;s not guaranteed to be exactly 64 bits wide. But it always exists."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1519849226, "post_id": 49036542, "comment_id": 85080857, "body": "Pretty scary that a major compiler can have such a bug in simple integer arithmetic"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1519856732, "post_id": 49036542, "comment_id": 85084588, "body": "<code>191125547</code> is VS 2017 (15.4). Have you tried VS 2017 (15.5 update) which would be 19.12.25835 fully updated?"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1519856803, "post_id": 49036542, "comment_id": 85084619, "body": "RE &quot;I prefer not using underscores.&quot; Why? <code>uint64_t</code> is part of both the C99 and C++11 standards and is supported on basically all compilers."}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1519859958, "post_id": 49036542, "comment_id": 85085852, "body": "@ChuckWalbourn: I haven&#39;t tried the newest version, I have however reported the problem. If they have already solved it, I&#39;ll get a reply about that, otherwise I hope somebody will fix it, since I lost quite a bit of time trying to figure out why my code was producing incorrect error estimates. As for the underscores thing - I do appreciate the clarification from user4581301 about portability, so I would use a <code>typedef uint64_t uint64</code> in the future rather than <code>typedef unsigned long long uint64</code>, the fact that I don&#39;t like underscores is just a quirk."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1519863341, "post_id": 49036542, "comment_id": 85086813, "body": "underscores are a way of life in C/C++. They get used everywhere...  About the only sensible stance to take is &quot;Don&#39;t use leading underscores on symbols because those are reserved for compiler implementers.&quot; In any case, the C++11 way would be to do: <code>using uint64 = uint64_t;</code>.  Overuse of <code>typedef</code> makes your C++ code so 90s."}], "answers": [{"tags": [], "owner": {"reputation": 2021, "user_id": 2452869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpaEJ.jpg?s=128&g=1", "display_name": "Anton Menshov", "link": "https://stackoverflow.com/users/2452869/anton-menshov"}, "is_accepted": false, "score": 1, "last_activity_date": 1576538810, "creation_date": 1576538810, "answer_id": 59365635, "question_id": 49036542, "link": "https://stackoverflow.com/questions/49036542/visual-c-2017-bug-compiler-optimizes-away-expression/59365635#59365635", "title": "Visual C++ 2017 bug? Compiler optimizes away expression", "body": "<p>The report was submitted (I assume by @lightxbulb) to <a href=\"https://developercommunity.visualstudio.com/content/problem/205330/c-optimizes-away-expression-possible-compiler-bug.html\" rel=\"nofollow noreferrer\">Visual Studio Developer Community</a> on Feb 28, 2018.</p>\n\n<p>On May 8, 2018, it was reported (same link) that the issue was resolved in the most recent Visual Studio Release, which was <a href=\"https://docs.microsoft.com/en-us/visualstudio/releasenotes/vs2017-relnotes-v15.7\" rel=\"nofollow noreferrer\">2017 15.7</a> (as per the information in the post header).</p>\n"}], "owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576538810, "creation_date": 1519843759, "last_edit_date": 1519846298, "question_id": 49036542, "link": "https://stackoverflow.com/questions/49036542/visual-c-2017-bug-compiler-optimizes-away-expression", "title": "Visual C++ 2017 bug? Compiler optimizes away expression", "body": "<p>The following piece of code has been causing me some issues, specifically the evaluation of diff:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nclass array2d\n{\nprotected:\n    T* arr;\n    int w, h;\n\npublic:\narray2d() : arr(nullptr), w(0), h(0) {}\n\nbool init(int w, int h)\n{\n    free();\n    arr = new (std::nothrow) T[w*h];\n    if (arr == nullptr)\n    {\n        std::cerr &lt;&lt; \"array2d::init(): Failed to allocate: \" &lt;&lt; w * h * sizeof(T) &lt;&lt; \" bytes.\\n\";\n        return false;\n    }\n    this-&gt;w = w;\n    this-&gt;h = h;\n    return true;\n}\n\nvoid fill(T v)\n{\n    for (int i = 0; i &lt; w*h; ++i)\n        arr[i] = v;\n}\n\nvoid free()\n{\n    if (arr != nullptr)\n    {\n        delete[] arr;\n        arr = nullptr;\n        w = 0;\n        h = 0;\n    }\n}\n\ntemplate&lt;typename U&gt;\nbool copy(const array2d&lt;U&gt;&amp; v)\n{\n    if (!v)\n    {\n        std::cerr &lt;&lt; \"array2d::copy(): Input array is empty.\\n\";\n        return false;\n    }\n    if (w*h != v.width()*v.height())\n    {\n        if (!init(v.width(), v.height())) return false;\n    }\n    for (int i = 0; i &lt; w*h; ++i)\n        arr[i] = static_cast&lt;T&gt;(v(i));\n    return true;\n}\n\ninline T operator()(int i) const { return arr[i]; }\ninline T&amp; operator()(int i) { return arr[i]; }\ninline T operator[](int i) const { return arr[i]; }\ninline T&amp; operator[](int i) { return arr[i]; }\ninline T operator()(int x, int y) const { return arr[x + y*w]; }\ninline T&amp; operator()(int x, int y) { return arr[x + y*w]; }\n\ninline int width() const { return w; }\ninline int height() const { return h; }\ninline const T* get() const { return arr; }\ninline T* get() { return arr; }\n\noperator bool() const { return arr != nullptr; }\n\narray2d&lt;T&gt;&amp; operator*=(T v)\n{\n    for (int i = 0; i &lt; w*h; ++i)\n        arr[i] *= v;\n    return *this;\n}\n\n~array2d() { free(); }\n};\n\ntypedef unsigned long long uint64;\n\nuint64 computeErrors(const array2d&lt;uint64&gt;&amp; a, const array2d&lt;uint64&gt;&amp; b)\n{\n    uint64 MNE = 0;\n    for (int i = 0; i &lt; a.height()*a.width(); ++i)\n    {\n        uint64 diff = ((a[i] &gt;= b[i]) ? a[i] - b[i] : b[i] - a[i]);\n        if (a[i] != b[i])\n        {\n            std::cout &lt;&lt; \"Diff: \" &lt;&lt; diff &lt;&lt; \"\\n\";\n            std::cout &lt;&lt; \"What diff should equal to: \" &lt;&lt; ((a[i] &gt;= b[i]) ? a[i] - b[i] : b[i] - a[i]) &lt;&lt; \"\\n\";\n        }\n        if (i == 0)\n        {\n            std::cout &lt;&lt; \"Diff should not be 0, but it is: \" &lt;&lt; diff &lt;&lt; \"\\n\";\n        }\n        if (MNE &lt; diff)\n        {\n            MNE = diff;\n            std::cout &lt;&lt; \"We should reach this, but we don't.\\n\";\n        }\n    }\n    return MNE;\n}\n\n\n\nint main()\n{\n    int w = 1;\n    int h = 1;\n    array2d&lt;uint64&gt; a;\n    if (!a.init(w,h)) return 1;\n    a.fill(0);\n    array2d&lt;uint64&gt; b;\n    if (!b.init(w,h)) return 1;\n    b.fill(0);\n    a[0] = 0ull;\n    b[0] = 1;\n    std::cout &lt;&lt; a[0] &lt;&lt; \" \" &lt;&lt; b[0] &lt;&lt; \"\\n\";\n    auto e = computeErrors(a, b);\n    std::cout &lt;&lt; \"MNE: \" &lt;&lt; e &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>If I compile it with /O1, or /O2, or /Ox; with /Ot and /Ob2, then diff is always 0, when it shouldn't be. If I compile without /Ot or without /Ob2 everything works as intended. Is there anything ill-formed in this code? I have attached the whole thing here: <a href=\"http://coliru.stacked-crooked.com/a/245f23f05df39418\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/245f23f05df39418</a>. If I change the array's [] operator to return const T&amp; rather than T, however, everything works fine. Is this a compiler bug? Or is it my bad returning T rather than const T&amp; in the operator[] (I am returning T since I read somewhere that passing smaller PODs by value is faster, in my case I have some arrays with uint32 where speed is very important). I am currently using Visual C++ 2017. </p>\n\n<p>EDIT:\nAs per user4581301's advice I added the whole code here too.</p>\n\n<p>EDIT2:\nThis is my _MSC_FULL_VER: 191125547.</p>\n"}, {"tags": ["c++", "function", "class"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8588556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e368bd07cd119239b258d2ad2fcf128?s=128&d=identicon&r=PG&f=1", "display_name": "BuzzLightYear", "link": "https://stackoverflow.com/users/8588556/buzzlightyear"}, "edited": false, "score": 0, "creation_date": 1519843917, "post_id": 49036560, "comment_id": 85078054, "body": "YAY!! That sorted the request for member error I was having, but now i get this error:      undefined reference to `PersonType::PersonType()&#39;   @scohe001"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 3, "user_id": 8588556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e368bd07cd119239b258d2ad2fcf128?s=128&d=identicon&r=PG&f=1", "display_name": "BuzzLightYear", "link": "https://stackoverflow.com/users/8588556/buzzlightyear"}, "edited": false, "score": 1, "creation_date": 1519843987, "post_id": 49036560, "comment_id": 85078098, "body": "@BuzzLightYear I see you&#39;ve declared your default constructor, but did you make sure to <i>implement</i> it?"}, {"owner": {"reputation": 3, "user_id": 8588556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e368bd07cd119239b258d2ad2fcf128?s=128&d=identicon&r=PG&f=1", "display_name": "BuzzLightYear", "link": "https://stackoverflow.com/users/8588556/buzzlightyear"}, "edited": false, "score": 0, "creation_date": 1519844391, "post_id": 49036560, "comment_id": 85078337, "body": "I FORGOT TO IMPLEMENT THE DEFAULT CONSTRUCTOR!!!! Thank you @scohe001   all problems are now sorted"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519844417, "post_id": 49036560, "comment_id": 85078350, "body": "You probably actually meant something like <code>family[i].name</code>."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 0, "last_activity_date": 1519844053, "last_edit_date": 1519844053, "creation_date": 1519843812, "answer_id": 49036560, "question_id": 49036532, "link": "https://stackoverflow.com/questions/49036532/error-request-for-member-in-which-is-of-non-class-type/49036560#49036560", "title": "Error: Request for member &#39; &#39; in &#39; &#39; , which is of non-class type &#39; &#39;", "body": "<p><code>family.birthday[5]</code> should be <code>family[5].birthday</code>. You're getting the 5th index of the <code>family</code> array (<code>family[5]</code>) and then access its <code>birthday</code> field.</p>\n\n<p>The same is true for <code>family.name[5]</code> => <code>family[5].name</code>.</p>\n\n<p>Note however that both <code>name</code> and <code>birthday</code> are private members, so as it stands now this code will still throw an error. You'll need to either make them public members or create accessors/mutators and call those instead. (thanks @Borgleader!)</p>\n"}], "owner": {"reputation": 3, "user_id": 8588556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e368bd07cd119239b258d2ad2fcf128?s=128&d=identicon&r=PG&f=1", "display_name": "BuzzLightYear", "link": "https://stackoverflow.com/users/8588556/buzzlightyear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 49036560, "answer_count": 1, "score": 0, "last_activity_date": 1519844053, "creation_date": 1519843721, "question_id": 49036532, "link": "https://stackoverflow.com/questions/49036532/error-request-for-member-in-which-is-of-non-class-type", "title": "Error: Request for member &#39; &#39; in &#39; &#39; , which is of non-class type &#39; &#39;", "body": "<p>I am having trouble identifying the problem with this code...</p>\n\n<p>This is the class declaration:</p>\n\n<pre><code>class PersonType{\npublic:\n    PersonType();\n    PersonType(string n, int id, string bd);\nprivate:\n    string name;\n    int ID;\n    string birthday;};\n</code></pre>\n\n<p>And this is where the problem comes in:</p>\n\n<pre><code>PersonType family[20], newBaby(\"Anny Dube\", 20180912, \"2 Sept\");\n\n//family initialized here\n\nfor (int i = 0; i &lt; 20; i++)\n    if (family.birthday[5] == newBaby.birthday)\n        cout &lt;&lt; family.name[5] &lt;&lt; \" share a birthday with \" &lt;&lt; newBaby.name;\n</code></pre>\n\n<p>I get his error when running the code:</p>\n\n<p>error: request for member 'birthday' in 'family', which is of non-class type 'PersonType [20]'|</p>\n\n<p>error: request for member 'name' in 'family', which is of non-class type 'PersonType [20]'|</p>\n\n<p>I know the fact that name, ID and birthday are private is an issue, but I know how to fix that. Even if I make the variables public or use accessor methods, I am still left with these two errors...</p>\n\n<p>I have read through a whole bunch of questions relating to this issue but everything I could find is about pointers, misspelled variables, etc.</p>\n\n<p>Nothing seems to help for this...</p>\n\n<p>Please help?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519843138, "post_id": 49036353, "comment_id": 85077694, "body": "Learn more about <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a>. Read the <a href=\"https://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools\" rel=\"nofollow noreferrer\">Dragon book</a>. Your question is off-topic, since too broad."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1519843254, "post_id": 49036353, "comment_id": 85077748, "body": "Is there something wrong with what you have? It seems to me it would deliver you a line per iteration, which you can use to select your &quot;specific function&quot; (whatever that is)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519843593, "post_id": 49036353, "comment_id": 85077888, "body": "@BasileStarynkevitch This doesn&#39;t seem to be a compiler type problem."}], "answers": [{"tags": [], "owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "is_accepted": true, "score": 3, "last_activity_date": 1519843233, "creation_date": 1519843233, "answer_id": 49036418, "question_id": 49036353, "link": "https://stackoverflow.com/questions/49036353/perform-a-specific-function-for-each-line-read-in-c/49036418#49036418", "title": "perform a specific function for each line read in c++", "body": "<p>You're quite there, what you are missing is just the function that would process the line.</p>\n\n<pre><code>void processLine(const string&amp; line) {\n    cout &lt;&lt; line &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Then just as you already do:</p>\n\n<pre><code>while (getline(file, line))\n{\n    processLine(line);\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5500646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e388bcd37382aecedcb1decbb3497c?s=128&d=identicon&r=PG&f=1", "display_name": "G king", "link": "https://stackoverflow.com/users/5500646/g-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1519846362, "accepted_answer_id": 49036418, "answer_count": 1, "score": 0, "last_activity_date": 1519843233, "creation_date": 1519842988, "question_id": 49036353, "link": "https://stackoverflow.com/questions/49036353/perform-a-specific-function-for-each-line-read-in-c", "closed_reason": "Needs more focus", "title": "perform a specific function for each line read in c++", "body": "<p>I'm want to write a program that will read from a file line by line. For each line read, I will perform a specific function and move to the next line.\nWhat will be a general syntax for this operation in c++</p>\n\n<pre><code>int main(){\nstring line;\nstring instruction;\nstring input;\nifstream file(\"file.txt\");\nif (file.is_open())\n{\n    while (getline(file, line))\n    {\n        // perform a function with info from first line\n        //den move to second line \n\n\n    }\n    file.close();\n}\nelse cout &lt;&lt; \"Unable to open file\";\n\n\n\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "pointers", "language-lawyer", "stdstring", "allocator"], "answers": [{"comments": [{"owner": {"reputation": 458, "user_id": 7122617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5c37256b8055814bb503de5efd0b1?s=128&d=identicon&r=PG&f=1", "display_name": "Baykov Nikita", "link": "https://stackoverflow.com/users/7122617/baykov-nikita"}, "edited": false, "score": 0, "creation_date": 1519901020, "post_id": 49036758, "comment_id": 85100117, "body": "A day may come when I get smarter, but it is not this day. Thank you for help! You answer is very useful."}], "tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": true, "score": 2, "last_activity_date": 1519846943, "last_edit_date": 1519846943, "creation_date": 1519844535, "answer_id": 49036758, "question_id": 49036340, "link": "https://stackoverflow.com/questions/49036340/basic-string-implementation-of-libstdc-in-gcc-and-custom-pointers/49036758#49036758", "title": "basic_string implementation of libstdc++ in GCC and custom pointers", "body": "<p>There are several requirements from the standard that together always ensure the conversion is possible, at least indirectly</p>\n\n<ol>\n<li><p>Given <code>basic_\u00adstring&lt;charT, traits, Allocator&gt;</code>, <a href=\"https://timsong-cpp.github.io/cppwp/basic.string#string.require-3\" rel=\"nofollow noreferrer\">the standard requires</a> <code>charT</code> and <code>allocator_traits&lt;Allocator&gt;::value_type</code> be equal.</p></li>\n<li><p><code>allocator_traits&lt;Allocator&gt;::pointer</code> <a href=\"https://timsong-cpp.github.io/cppwp/allocator.traits#types-1\" rel=\"nofollow noreferrer\">is required</a> to be either <code>Allocator::pointer</code> or <code>Allocator::value_type*</code>.</p>\n\n<ul>\n<li><p>In the former case, given a <code>Allocator::pointer</code> <code>p</code>, <code>*p</code> <a href=\"https://timsong-cpp.github.io/cppwp/allocator.requirements#tab:utilities.allocator.requirements\" rel=\"nofollow noreferrer\">is required</a> to be <code>Allocator::value_type&amp;</code>.</p></li>\n<li><p>In the latter case, everything is trivial.</p></li>\n</ul></li>\n<li><p><code>Allocator::pointer</code> <a href=\"https://timsong-cpp.github.io/cppwp/allocator.requirements#5\" rel=\"nofollow noreferrer\">is required</a> to be a <a href=\"https://timsong-cpp.github.io/cppwp/iterator.requirements.general#6\" rel=\"nofollow noreferrer\">contiguous iterator</a>, which requires, given a contiguous iterator <code>q</code>, <code>*(q + n) == *(addressof(*q) + n)</code></p></li>\n<li><p>Given an <code>Allocator</code> <code>a</code>, <code>a.allocate(n)</code> <a href=\"https://timsong-cpp.github.io/cppwp/allocator.requirements#tab:utilities.allocator.requirements\" rel=\"nofollow noreferrer\">is required</a> to return a <code>Allocator::pointer</code>.</p></li>\n</ol>\n\n<p>Combining everything together, it means this is always correct</p>\n\n<pre><code>template&lt;typename charT, typename traits = /* ... */, typename Allocator = /* ... */&gt;\nclass basic_string\n{\n    typename std::allocator_traits&lt;Allocator&gt;::pointer _data;\n    // ...\n\npublic:\n    charT* c_str() { return std::addressof(*_data); }\n    // ...\n};\n</code></pre>\n\n<p>Where <code>_data</code> possibly stores the result from a previous call to <code>Allocator::allocate</code></p>\n"}], "owner": {"reputation": 458, "user_id": 7122617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5c37256b8055814bb503de5efd0b1?s=128&d=identicon&r=PG&f=1", "display_name": "Baykov Nikita", "link": "https://stackoverflow.com/users/7122617/baykov-nikita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 49036758, "answer_count": 1, "score": 1, "last_activity_date": 1519846943, "creation_date": 1519842936, "last_edit_date": 1519845605, "question_id": 49036340, "link": "https://stackoverflow.com/questions/49036340/basic-string-implementation-of-libstdc-in-gcc-and-custom-pointers", "title": "basic_string implementation of libstdc++ in GCC and custom pointers", "body": "<p>I tried to study libstdc++ source code (GCC 7.2) recently and was confused. Probably I have missed something important, but I started to think that it is impossible to implement <strong>basic_string</strong> class that will fully comply C++ standard. </p>\n\n<p>Here is a problem that I have faced.</p>\n\n<ol>\n<li><strong>basic_string</strong> should be able to accept custom allocator class as template parameter.</li>\n<li><strong>allocate</strong> method is required as a part of allocator.</li>\n<li><strong>allocate</strong> is allowed to return objects of user-defined type that \"acts like pointer to allocated data\". Let's call it <strong>my_pointer</strong>. </li>\n<li><strong>my_pointer</strong> should satisfy only the requirements for <strong>NullablePointer</strong> and <strong>RandomAccessIterator</strong>. All other requirements are optional. According to standard we may be unable to cast <strong>my_pointer</strong> to <strong>CharT*</strong> type (another <strong>basic_string</strong> template parameter) because it is optional.</li>\n<li>On the other hand <strong>const CharT* c_str()</strong> method should be implemented as a part of the standard, so we have to know how to make this cast.</li>\n</ol>\n\n<p>Items 4 and 5 are conflicting and I don't know how to resolve it.\nHope that you can help me to figure it out. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "database", "architecture", "mariadb", "accountmanager"], "comments": [{"owner": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "edited": false, "score": 0, "creation_date": 1519846690, "post_id": 49036280, "comment_id": 85079573, "body": "On your database you can have an ID that you increment on each registration and use it as the number, being the first one #0001. To allow users to have the same username you&#39;d simply not assign it as being <code>unique</code>. Edit: Your primary key would be the ID, obviously."}, {"owner": {"reputation": 145, "user_id": 8559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rXCCrIzQq14/AAAAAAAAAAI/AAAAAAAAAAs/LdvngLMZlDM/photo.jpg?sz=128", "display_name": "Panakotta00", "link": "https://stackoverflow.com/users/8559298/panakotta00"}, "reply_to_user": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "edited": false, "score": 0, "creation_date": 1519850615, "post_id": 49036280, "comment_id": 85081581, "body": "As i said, i have such like this. In my table there is a parameter id, but this is a int64 (snowflake) but no users wants to know all this digits! And with auto-increment, it counts up, for every user.. so that i have users lik this:  Max#0001 Max#0002 Noob#0003 (&lt;- not wanted! It must be Noob#0001, as example)"}, {"owner": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "edited": false, "score": 0, "creation_date": 1519852696, "post_id": 49036280, "comment_id": 85082709, "body": "Oh I get it. You can add a tag_id to your table and before you insert you can query how many users have that name and set the tag_id as that number + 1."}, {"owner": {"reputation": 145, "user_id": 8559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rXCCrIzQq14/AAAAAAAAAAI/AAAAAAAAAAs/LdvngLMZlDM/photo.jpg?sz=128", "display_name": "Panakotta00", "link": "https://stackoverflow.com/users/8559298/panakotta00"}, "reply_to_user": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "edited": false, "score": 0, "creation_date": 1519938970, "post_id": 49036280, "comment_id": 85122502, "body": "Yes i can do that, but i think there where two problems: 1. when you have a very creative name that realy no one has, then you have the tag 0000 or 0001 -&gt; than as a player you know, oh this name already exists (for example) 200 times! I have a such bad name :-( 2. Doesn&#39;t this take a lot of performance?"}, {"owner": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "edited": false, "score": 0, "creation_date": 1519940190, "post_id": 49036280, "comment_id": 85123112, "body": "I don&#39;t understand what you really want. Edit: Yes, it may take a hit on performance if you have a big database."}, {"owner": {"reputation": 145, "user_id": 8559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rXCCrIzQq14/AAAAAAAAAAI/AAAAAAAAAAs/LdvngLMZlDM/photo.jpg?sz=128", "display_name": "Panakotta00", "link": "https://stackoverflow.com/users/8559298/panakotta00"}, "reply_to_user": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "edited": false, "score": 0, "creation_date": 1520016833, "post_id": 49036280, "comment_id": 85156994, "body": "The mainly thing i want, is an Accountsystem, that handles the same username multiple times, and the user must can login by typing his name, a hashtag and his four digit number!"}, {"owner": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "edited": false, "score": 0, "creation_date": 1520018615, "post_id": 49036280, "comment_id": 85157802, "body": "So, you want a four digit number that can&#39;t be fully sequential (auto-increment) and can&#39;t be partially sequential (auto-increment by username)? Then I don&#39;t know how to help you. Best solution is to clear up what you want or just go for a random number you haven&#39;t used on that username."}], "owner": {"reputation": 145, "user_id": 8559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rXCCrIzQq14/AAAAAAAAAAI/AAAAAAAAAAs/LdvngLMZlDM/photo.jpg?sz=128", "display_name": "Panakotta00", "link": "https://stackoverflow.com/users/8559298/panakotta00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519842689, "creation_date": 1519842689, "question_id": 49036280, "link": "https://stackoverflow.com/questions/49036280/how-can-i-add-a-tag-system-to-my-account-system", "title": "How can i add a &quot;tag&quot;-system to my account-system", "body": "<p>I'm trying to create Account-/Usersystem. My Problem is, i need a system that handles multiple users with the same username (each on has a specific id), but the users must can loggin!</p>\n\n<p>So... I think a \"tag\" system like that from Discord is nice. A four digit number, so that the user can login as \"Max#1234\". Great! But the problem is, how can i create them?</p>\n\n<p>I'm using MariaDB as my database. A user can be created with the REST API wich I have written in C++ (Linux) with the C++-REST-SDK (Casablanca).</p>\n\n<p>Has anyone an idea how i handle this \"tags\".</p>\n"}, {"tags": ["c++", "windows", "winapi", "ms-media-foundation", "uvc"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1519843080, "post_id": 49036270, "comment_id": 85077673, "body": "this mean that some service (not rpc itself) not running - not register well know endpoint name"}, {"owner": {"reputation": 867, "user_id": 5942797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wo0xh.png?s=128&g=1", "display_name": "Scott Mudge", "link": "https://stackoverflow.com/users/5942797/scott-mudge"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1519845203, "post_id": 49036270, "comment_id": 85078769, "body": "Is there a way to check which service isn&#39;t running? Like with COM logs somewhere?"}], "owner": {"reputation": 867, "user_id": 5942797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wo0xh.png?s=128&g=1", "display_name": "Scott Mudge", "link": "https://stackoverflow.com/users/5942797/scott-mudge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1519845030, "creation_date": 1519842655, "last_edit_date": 1519845030, "question_id": 49036270, "link": "https://stackoverflow.com/questions/49036270/windows-media-foundation-imfactivateactivateobject-rpc-error", "title": "Windows Media Foundation -- IMFActivate::ActivateObject - RPC Error?", "body": "<p>I'm having trouble creating a UVC Extension Unit interface using the Windows Media Foundation API (using the Windows 8.1 kit). </p>\n\n<p>I am attempting to open a video source before using functions provided by Ks.h to interface with the video source's respective UVC extension unit.</p>\n\n<p>I enumerate available video sources using</p>\n\n<pre><code>MFEnumDeviceSources()\n</code></pre>\n\n<p>and selecting the correct device by the enumerated devices' friendly names, which all works fine.</p>\n\n<p>The problem occurs when I attempt to call IMFActivate::ActivateObject() on the selected video source:</p>\n\n<pre><code>HRESULT hr = ppVideoDevices[deviceIndex]-&gt;ActivateObject(IID_PPV_ARGS(&amp;pVideoSource));\n</code></pre>\n\n<p>which results in the following error:</p>\n\n<pre><code>hr = 0x800706d9 : There are no more endpoints available from the endpoint mapper.\n</code></pre>\n\n<p>I have ensured all of my RPC services are running correctly, but I cannot figure out what might be causing this error. I have attempted to find an existing solution online, but could find nothing.</p>\n\n<p>Has anyone else encountered something similar?</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1519842706, "post_id": 49036245, "comment_id": 85077485, "body": "just take out show in class C. You will thus get B&#39;s show"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519842707, "post_id": 49036245, "comment_id": 85077486, "body": "There is nothing to indicate that an <code>obj</code> is a <code>B</code>, meaning you can&#39;t know that it has a <code>void B::show()</code>. If you know you need <code>obj</code> to be a kind of <code>B</code>, than it should be a pointer to <code>B</code>. It seems like a design error."}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1519842725, "post_id": 49036245, "comment_id": 85077496, "body": "What do you mean to &quot;be executed directly&quot;? That it won&#39;t print &quot;I am C&quot; or that it must completely bypass the C::show() call and only call B::show()?"}, {"owner": {"reputation": 845, "user_id": 3082254, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Xt3H7.jpg?s=128&g=1", "display_name": "Muzahir Hussain", "link": "https://stackoverflow.com/users/3082254/muzahir-hussain"}, "reply_to_user": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1519842800, "post_id": 49036245, "comment_id": 85077533, "body": "@Daniel it must completely bypass the C::show()..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1519843074, "post_id": 49036245, "comment_id": 85077668, "body": "I&#39;m still confused to the purpose. Making no assumption there is a <code>B</code> in the inheritance chain, one would have to test it, which means something like <code>B *bptr = dynamic_cast&lt;B*&gt;(obj); if (bptr) bptr-&gt;B::show();</code>. If you can make the assumption a <code>B</code> is wedged in there somewhere, then it gets considerably easier."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1519843101, "post_id": 49036245, "comment_id": 85077681, "body": "@MuzahirHussain If I was asked that question in an interview, I would first ask &quot;why?&quot;. It seems the question is asking to implement a solution to a design error and the correct solution would be to fix the design, not the implementation."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1519842796, "post_id": 49036295, "comment_id": 85077529, "body": "This assumes we <i>know</i> <code>obj</code> is a kind of <code>B</code>. It&#39;s clear in this case, but it&#39;s not applicable in general."}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1519842854, "post_id": 49036295, "comment_id": 85077557, "body": "I don&#39;t think it needs to be general, just work in this specific case. Plus, can&#39;t you just do <code>obj-&gt;B::show()</code> and skip the <code>static_cast</code> altogether?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 1, "creation_date": 1519842879, "post_id": 49036295, "comment_id": 85077570, "body": "@Daniel <code>obj</code> is a <code>A*</code> and <code>A</code> has no <code>void B::show()</code>, even if in this case the dynamic type would have it."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519842911, "post_id": 49036295, "comment_id": 85077589, "body": "@Fran&#231;oisAndrieux I added some additional note to the answer. I don&#39;t think there is a general way to do that."}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519842937, "post_id": 49036295, "comment_id": 85077602, "body": "@Fran&#231;oisAndrieux That&#39;s right, I was thinking it as a <code>C</code> when it is an <code>A</code>. My mistake"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519842991, "post_id": 49036295, "comment_id": 85077616, "body": "@liliscent The question was modified, and it looks like an interview question. So, without context, it&#39;s fair to assume a case-specific solution is fine."}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 2, "creation_date": 1519843084, "post_id": 49036295, "comment_id": 85077675, "body": "@liliscent you could potentially write <code>if(B *b = dynamic_cast&lt;B*&gt;(obj)) { b-&gt;B::show()}</code>, which would only execute if obj were a <code>B</code> or higher"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1519843216, "post_id": 49036295, "comment_id": 85077730, "body": "@Daniel Agree. This is one way among others, the key point is to ensure the type is indeed correct."}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 7, "last_activity_date": 1519842882, "last_edit_date": 1519842882, "creation_date": 1519842765, "answer_id": 49036295, "question_id": 49036245, "link": "https://stackoverflow.com/questions/49036245/understanding-inheritence-and-polymorphism-in-c/49036295#49036295", "title": "Understanding inheritence and polymorphism in C++", "body": "<p>You can force static dispatching by specify the class:</p>\n\n<pre><code>int main()\n{\n    A *obj = new C();\n    static_cast&lt;B*&gt;(obj)-&gt;B::show();\n\n    return 0;\n}\n</code></pre>\n\n<p>But if you want to use this method, you must be sure that the object is indeed a <code>B</code> instance, otherwise it's undefined behavior.</p>\n"}], "owner": {"reputation": 845, "user_id": 3082254, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Xt3H7.jpg?s=128&g=1", "display_name": "Muzahir Hussain", "link": "https://stackoverflow.com/users/3082254/muzahir-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 49036295, "answer_count": 1, "score": 4, "last_activity_date": 1519842882, "creation_date": 1519842526, "question_id": 49036245, "link": "https://stackoverflow.com/questions/49036245/understanding-inheritence-and-polymorphism-in-c", "title": "Understanding inheritence and polymorphism in C++", "body": "<p>Suppose we have following inherit classes.</p>\n\n<pre><code>class A\n{\npublic:\n    void virtual show()\n    {\n        cout &lt;&lt; \"I am A\\n\";\n    }\n};\n\nclass B:public A\n{\npublic:\n    void show()\n    {\n        cout &lt;&lt; \"I am B\\n\";\n    }\n};\n\nclass C:public B\n{\npublic:\n    void show()\n    {\n        cout &lt;&lt; \"I am C\\n\";\n    }\n};\n\nint main()\n{\n    A *obj = new C();\n    obj-&gt;show();\n\n    return 0;\n}\n</code></pre>\n\n<p>Without creating any other object, how can I call B class's show() function???</p>\n\n<p>One way I know is to modify show() in class C to,</p>\n\n<pre><code>void show()\n{\n    B::show();\n    cout &lt;&lt; \"I am c\\n\";\n}\n</code></pre>\n\n<p>This will first call B's show function then it will print \"I am C\". But I don't want the show() in C to be executed at all. I want the B's show() to be executed directly.</p>\n\n<p>Is it even possible? Can we do it using casting or something? </p>\n\n<p>Remember I am not allowed to create any other object other then the one already created i.e. C in main().\nI was asked this question at an interview today.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "ubuntu", "centos7", "g++4.8"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1519842744, "post_id": 49036167, "comment_id": 85077506, "body": "GCC 5.1 itroduced a new <code>ABI</code>. Maybe worth looking at this <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dual_abi.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/libstdc++/manual/using_dual_abi.html</a>"}, {"owner": {"reputation": 301, "user_id": 5286435, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c377241bb619c9254d07897baaa86a8?s=128&d=identicon&r=PG&f=1", "display_name": "Dnj Abc", "link": "https://stackoverflow.com/users/5286435/dnj-abc"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1519845177, "post_id": 49036167, "comment_id": 85078756, "body": "@Iharob Thanks taking the time. If I had a choice, I&#39;d do the whole this in c++ like you suggested. Unfortunately, sometimes our hands are tied and we have to make things work in certain environments. That&#39;s where I am running into these sort of issues."}, {"owner": {"reputation": 301, "user_id": 5286435, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c377241bb619c9254d07897baaa86a8?s=128&d=identicon&r=PG&f=1", "display_name": "Dnj Abc", "link": "https://stackoverflow.com/users/5286435/dnj-abc"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1519845479, "post_id": 49036167, "comment_id": 85078935, "body": "@Galik, Thanks for looking into this. On your GCC 5.1 suggestion, centos7 default GCC version is 4.8.5. I&#39;d like to move to 5.x, but I have to work with the std libraries available on the platform :("}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1519845826, "post_id": 49036167, "comment_id": 85079132, "body": "Calling C++ functions from C works perfectly fine if they&#39;re implemented as <code>extern &quot;C&quot;</code> and don&#39;t throw exceptions. Your problem has nothing to do with C vs C++. You just have a plain old code bug somewhere."}, {"owner": {"reputation": 301, "user_id": 5286435, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c377241bb619c9254d07897baaa86a8?s=128&d=identicon&r=PG&f=1", "display_name": "Dnj Abc", "link": "https://stackoverflow.com/users/5286435/dnj-abc"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1519846376, "post_id": 49036167, "comment_id": 85079421, "body": "Thanks @Nikos. I thought so too about &#39;extern &quot;C&quot;&#39; stuff. However, if you look at the GDB session output things are changing as soon I enter the c++ function. BTW, this is in a single-threaded environment. You could still be correct about something else going on here which what I am trying to figure out."}], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 5286435, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c377241bb619c9254d07897baaa86a8?s=128&d=identicon&r=PG&f=1", "display_name": "Dnj Abc", "link": "https://stackoverflow.com/users/5286435/dnj-abc"}, "is_accepted": true, "score": 1, "last_activity_date": 1519857675, "creation_date": 1519857675, "answer_id": 49039855, "question_id": 49036167, "link": "https://stackoverflow.com/questions/49036167/crash-when-calling-c-function-from-c/49039855#49039855", "title": "Crash when calling C++ function from C", "body": "<p>It turns out my c++ and C libraries were getting compiled with different #defines, as a result, the C data-structure was different in both the libraries. This results in misaligned access on the c++ side. This problem could have happened in two c libraries as well.</p>\n\n<p>Thanks to all who responded.</p>\n"}], "owner": {"reputation": 301, "user_id": 5286435, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c377241bb619c9254d07897baaa86a8?s=128&d=identicon&r=PG&f=1", "display_name": "Dnj Abc", "link": "https://stackoverflow.com/users/5286435/dnj-abc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 49039855, "answer_count": 1, "score": 0, "last_activity_date": 1519857675, "creation_date": 1519842171, "question_id": 49036167, "link": "https://stackoverflow.com/questions/49036167/crash-when-calling-c-function-from-c", "title": "Crash when calling C++ function from C", "body": "<p>I have a C++ library function which I am calling from a C function. The call passes in a C data-structure that is accessed by the C++ code. My program crashes in the C++ code when accessing the C data-structure. I've followed all the instructions in <a href=\"https://isocpp.org/wiki/faq/mixing-c-and-cpp\" rel=\"nofollow noreferrer\">C++ faq</a> related to mixing C-to-C++.</p>\n\n<p>The crash happens on a centos7 machine. Running the same code in debug mode does not result in a crash. The same code running on Ubuntu (16.04) does not result in a crash. Here's the GDB analysis of the crash.</p>\n\n<pre><code>(gdb) frame 5\n#5  0x00007fc28e79226e in ngx_http_setup_handler (r=0x2469040)\n    at /opt/platform/nginx-noname-module.c:201\n201       return ModProcessGetApi(r);\n(gdb) p r-&gt;unparsed_uri\n$1 = {len = 15, data = 0x24572c4 \"/__xx/stats/all HTTP/1.1\\r\\nUser-Agent\"}\n(gdb) down\n#4  0x00007fc28e7945b4 in ModProcessGetApi (r=r@entry=0x2469040)\n    at /opt/platform/nginx-body-handler.cc:274\n274   ss_rval_t rv = ProcessGetRequest(r, data, &amp;dsize);\n(gdb) p r-&gt;unparsed_uri\n$2 = {len = 38105792, data = 0xf &lt;Address 0xf out of bounds&gt;}\n(gdb)\n</code></pre>\n\n<p>As soon as the execution enters the C++ code, the C data structure shows address out of bounds. Here's is the glue code for c-to-c++ functions.</p>\n\n<pre><code>#if __cplusplus\nextern \"C\" {\n#endif\n\n#include &lt;nginx.h&gt;\n#include &lt;ngx_core.h&gt;\n#include &lt;ngx_log.h&gt;\n#include &lt;ngx_http.h&gt;\n\nngx_int_t ModPostRequestBodyHandler(ngx_http_request_t *r);\nngx_int_t ModProcessGetApi(ngx_http_request_t* r);\n\n#if __cplusplus\n}\n#endif\n</code></pre>\n\n<p>I would appreciate it if someone can shed some light on this. Are there any compiler options I need to use when mixing C and C++ code so that the C++ code can access the C data-structure properly? Here's the OS and compiler info:</p>\n\n<p>Centos Version: Crash happens</p>\n\n<p>OS: Centos 7, C++: g++ 4.8.5</p>\n\n<p>Ubuntu Versions: Crash does not happen.</p>\n\n<p>OS: Ubuntu 16.04, C++: g++ 5.4.0</p>\n\n<p>Not sure if it matters but I am running my app in a docker container on both OSes.</p>\n"}, {"tags": ["c++", "getline", "singly-linked-list", "stringstream"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519842526, "post_id": 49036150, "comment_id": 85077395, "body": "Does <code>Paper towels, 2.20</code> cause a problem?"}, {"owner": {"reputation": 1, "user_id": 7503865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22410c58e51ac09dbb54e3e33a331237?s=128&d=identicon&r=PG&f=1", "display_name": "willysons", "link": "https://stackoverflow.com/users/7503865/willysons"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519843193, "post_id": 49036150, "comment_id": 85077720, "body": "yes, both Ice cream and Paper towels cause an issue. I just added a couple cout&#39;s to the if (proceed) loop so that it&#39;ll tell me what getline is reading in as line and tempdata. When it comes across an itemname that has a space, for some reason it reads the entire line as line and tempdata becomes the previous itemcost. So when it reads the ice cream line, line = &quot;Ice cream, 4.50&quot; and tempdata = 1.70. ADDITIONALLY: I just realized it&#39;s skipping every other line ??? so it only read in broccoli, chocolate, milk, etc. and skipped apples, yogurt, paper towels, etc. entirely. RIP me"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519845822, "post_id": 49036150, "comment_id": 85079129, "body": "Works on my machine, although I did have to add <code>#include &lt;sstream&gt;</code>, and fix isNum (just use <code>s[i]</code> instead of copying it into a char buffer, make the loop look at the whole string, also accept <code>&#39;.&#39;</code> as valid).  Doesn&#39;t skip every other line.  I think you will need to use a debugger to see where things are going bad when you run it."}, {"owner": {"reputation": 1, "user_id": 7503865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22410c58e51ac09dbb54e3e33a331237?s=128&d=identicon&r=PG&f=1", "display_name": "willysons", "link": "https://stackoverflow.com/users/7503865/willysons"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1519850510, "post_id": 49036150, "comment_id": 85081533, "body": "I fixed the skipping and apparently, in main, changing stringstream ss; ss.str(line); into stringstream ss(line); solves all those problems. &amp; Thanks! adding the library &amp; changing isNum helped smooth it out. It seems to be working well locally. Unfortunately it has to be uploaded to the class&#39;s linux server and the files you read from/write to are given in the command line. My professor is having us implement an &quot;ArgumentManager.h&quot; that handles that but I keep getting a segmentation fault. I&#39;ll have to see if my classmates have figured it out"}], "owner": {"reputation": 1, "user_id": 7503865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22410c58e51ac09dbb54e3e33a331237?s=128&d=identicon&r=PG&f=1", "display_name": "willysons", "link": "https://stackoverflow.com/users/7503865/willysons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 881, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519842127, "creation_date": 1519842127, "question_id": 49036150, "link": "https://stackoverflow.com/questions/49036150/using-getline-to-parse-a-string-and-put-it-into-a-linked-list-c", "title": "using getline to parse a string and put it into a linked list c++", "body": "<p>I have been tasked with writing the classic \"shopping cart\" linked list project in c++. Each of my nodes has an itemname, an itemcost, and a next. I use a function called insertNode(string name, double cost) that builds the list in alphabetical order. The input is a text file where the first line is the budget and every line after that is in the form of \"Itemname, itemcost\". I use getline() and stringstream to read the lines of the file and check if it is a string or a number. It works well until I hit a line with an item that is two words (ex: \"Ice cream, 4.50\"). Visual Studios tells me that it throws a \"read access violation\" exception, . I haven't had any luck googling my problem because it's so specific (keeping white space in string parse + reading string from file + putting it into a linked list). If y'all could give me any direction (+ any general coding tips) it would be greatly appreciated!! This is the last thing I have left on this assignment. Apologies for poor formatting, I'm kinda new here!</p>\n\n<p>Example input (in a .txt file):</p>\n\n<p>15.00<br>\nApples, 1.50<br>\nBroccoli, 2.00<br>\nYogurt, 4.00<br>\nChocolate, 3.80<br>\nPaper towels, 2.20<br>\nMilk, 1.70<br>\nIce cream, 4.50  </p>\n\n<p>main.cpp:</p>\n\n<pre><code>//  main.cpp\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n#include &lt;fstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include \"List.h\"\n\nbool isNum(string);\nusing namespace std;\n\nint main(int argc, char * argv[]) {\n\nstring infilename = (\"1.txt\");\nstring outfilename = (\"output.txt\");\n\nifstream infile;\n\nList list;\ndouble budget = 0;\nstring iname;\ndouble iprice = 0;\n\ninfile.open(infilename.c_str());\n\nif (infile.fail()) {    //check for file failure (did not open)\n    exit(1);\n}\n\nstring temp;\ngetline(infile, temp);  //grab the budget, catch exceptions\ntry {\n    budget = stod(temp);\n    if (budget &lt; 0)\n        throw - 3;\n}\ncatch (int e) {\n    return -1;\n}\ncatch (...) {\n    cerr &lt;&lt; \"No budget given. Exiting\";\n    return -1;\n}\n\nstring line = \"\";\nstring tempdata;\nbool proceed = true;\ndouble tempcost = 0;\n\nwhile (!infile.eof()){\n    getline(infile, line);\n    istringstream ss;   //create ss object\n    ss.str(line);       //converts string to stringstream\n    if (isNum(line)) {  //is line a number (price)?\n        proceed = false;    //yes, is the end of the line\n    }\n\n    if (proceed) {          //no, \"import\" name &amp; cost using stringstream\n        getline(ss, line, ',');\n        getline(ss, tempdata);\n        bool duplicated = list.isDuplicate(line);   //checks if name is already included in the list\n\n        try {\n            if (!duplicated &amp;&amp; stod(tempdata) &gt; 0) {        //make sure the item doesn't already exist &amp; the price is a positive number\n                tempcost = stod(tempdata);\n                list.insertNode(line, tempcost);    //everything looks great, add it to the list\n            }\n        }\n        catch (...) { /* price is not a number, item is already in list*/\n        }\n    }\n    proceed = true;\n\n}\ninfile.close();\n\ncout &lt;&lt; \"unaltered, sorted list: \" &lt;&lt; endl;\nlist.displayList();\ncout &lt;&lt; endl;\n\nreturn 0;\n}\n\nbool isNum(string s) {\nint n = s.length();\nchar char_array[50];\nstrcpy_s(char_array, s.c_str());\n\nfor (int i = 0; i &lt; n; i++) {\n    if (!isdigit(char_array[i])) {\n        return false;\n        break;\n    }\n    return true;\n}\n</code></pre>\n\n<p>List.h:</p>\n\n<pre><code>// List.h\n// hw1\n#ifndef LIST_H\n#define LIST_H\n\n\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\nclass List {\nprivate:\n\ntypedef struct Node {   //creates node architecture\n    double itemcost;\n    string itemname;\n    Node* next;\n}* ptr;\n\nptr head;\nptr current;\nptr temp;\nptr tail;\nint count;\n\n\npublic:             // where functions go\nList();\nvoid insertNode(string addName, double addCost);\nbool isEmpty();\nbool isDuplicate(string name);\nvoid displayList();\n\n};\n\n\n#endif /* LIST_H */\n</code></pre>\n\n<p>List.cpp:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;iomanip&gt;\n#include \"List.h\"\n\nusing namespace std;\n\nList::List() {\nhead = NULL;\ncurrent = NULL;\ntemp = NULL;\ntail = NULL;\ncount = 0;\n}\n\nvoid List::insertNode(string addName, double addCost) {\nptr nodePtr;\nptr previous = NULL;\nbool spotFound;\n\nptr incomingNode = new Node;\nincomingNode-&gt;itemcost = addCost;\nincomingNode-&gt;itemname = addName;\nincomingNode-&gt;next = NULL;\n\nif (head == NULL) {         //does a list exist already? No\n    head = incomingNode;    //since there is no list, incomingNode becomes head &amp; tail\n    tail = incomingNode;\n    count++;\n}\nelse {                      //yes, list exists\n    nodePtr = head;\n    spotFound = false;\n\n    while (!spotFound &amp;&amp; nodePtr != NULL) {                   //start at head\n        if (nodePtr-&gt;itemname &gt;= incomingNode-&gt;itemname) {    //is the cost of the current node more than or equal to the incomingNode?\n            spotFound = true;\n        }\n        else {\n            previous = nodePtr;\n            nodePtr = nodePtr-&gt;next;\n        }\n    }\n    if (nodePtr == head) {          //is the current the head?\n        incomingNode-&gt;next = head;  //yes, the incomingNode inserts itself in front of the head\n        head = incomingNode;        //the incomingNode now labels itself as head\n        count++;\n    }\n    else {                              //current is not the same as the head\n        previous-&gt;next = incomingNode;  //the incomingNode gets pointed to by the node after the current (nodePtr)\n        incomingNode-&gt;next = nodePtr;   //the incomingNode now points to the current one (nodePtr)\n        if (nodePtr == NULL){       //is the current node NULL?\n            tail = incomingNode;    //if yes, then the incomingNode is actually the last in the list (tail)\n        }\n         count++;\n    }\n\n}\n}\n\nbool List::isEmpty() {\nif (count == 0)\n    return true;\nelse\n    return false;\n}\n\nbool List::isDuplicate(string name) {\ntemp = head;\nwhile (temp != NULL) {\n    if (temp-&gt;itemname == name) {\n        return true;\n    }\n    else {\n        temp = temp-&gt;next;\n    }\n}\nreturn false;\n}\n\n\nvoid List::displayList() {\nptr curr = head;\nwhile (curr) {\n    cout &lt;&lt; curr-&gt;itemname &lt;&lt; \", \" &lt;&lt; curr-&gt;itemcost &lt;&lt; endl;\n    curr = curr-&gt;next;\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1519842147, "post_id": 49036119, "comment_id": 85077192, "body": "What do you mean by &quot;stop the thread from the execute method&quot;?"}, {"owner": {"reputation": 139, "user_id": 7082682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be8641104cec1cf2b8077e4e116daca9?s=128&d=identicon&r=PG", "display_name": "user110971", "link": "https://stackoverflow.com/users/7082682/user110971"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1519842228, "post_id": 49036119, "comment_id": 85077232, "body": "@PasserBy thread calls command.execute(), which stops / kills the thread."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1519842303, "post_id": 49036119, "comment_id": 85077271, "body": "You could do <code>if(command.execute() == status::quit) return;</code> or something"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 1, "creation_date": 1519842376, "post_id": 49036119, "comment_id": 85077315, "body": "Such command is called <i>poisson</i>. Just check whether a poisson is received, if so, return."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1519842580, "post_id": 49036119, "comment_id": 85077423, "body": "Killing a thread arbitrarily can be problematic. At the very least you would want the thread to get a chance to unwind it&#39;s stack."}, {"owner": {"reputation": 464, "user_id": 1699328, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9225b78aebcfa548c9e133dcae2c4dc7?s=128&d=identicon&r=PG", "display_name": "Dom", "link": "https://stackoverflow.com/users/1699328/dom"}, "edited": false, "score": 0, "creation_date": 1519851799, "post_id": 49036119, "comment_id": 85082195, "body": "A &quot;sandbox&quot; code would be helpful to give better advices ;-)"}, {"owner": {"reputation": 1247, "user_id": 9107647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43594ef3d74c11a31be7f9d5ebddc0?s=128&d=identicon&r=PG&f=1", "display_name": "Humphrey Winnebago", "link": "https://stackoverflow.com/users/9107647/humphrey-winnebago"}, "edited": false, "score": 0, "creation_date": 1519853022, "post_id": 49036119, "comment_id": 85082879, "body": "AFAIK, you can&#39;t portably terminate or stop a std::thread in any way other than either returning from the initial function or terminating the entire process. If you don&#39;t want to change the signature of execute(), the command object can have a retval member that can be accessed after running execute().  You shouldn&#39;t detach the thread if it will be joined later. Also, keep in mind that a non-detached thread that has finished execution will hang on to some resources until it&#39;s joined. It&#39;s probably not much, but you don&#39;t want to constantly create threads without cleaning them up."}], "owner": {"reputation": 139, "user_id": 7082682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be8641104cec1cf2b8077e4e116daca9?s=128&d=identicon&r=PG", "display_name": "user110971", "link": "https://stackoverflow.com/users/7082682/user110971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519842036, "creation_date": 1519842036, "question_id": 49036119, "link": "https://stackoverflow.com/questions/49036119/c-class-method-to-stop-current-thread", "title": "C++ class method to stop current thread", "body": "<p>I have a thread pool that reads command objects from a queue. Each command object is an implementation of an abstract command class with a single execute() method, i.e. the command pattern.</p>\n\n<p>I want to implement a command that makes the thread stop itself, i.e. the execute() method stops the current thread. Usually I would just return from the thread function, but I need to stop the thread from the execute() method.</p>\n\n<p>What is the best way to do this? I can use detach or destroy, but the main program calls join on all threads and I\u2019m not sure if it will work. Assume everything the thread has access to has been unlocked. </p>\n"}, {"tags": ["c++", "exception", "memory-management", "reference"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1519841271, "post_id": 49035923, "comment_id": 85076753, "body": "So you could pass temporary objects? Or string literals (before C++11)?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 2, "creation_date": 1519841538, "post_id": 49035923, "comment_id": 85076868, "body": "You&#39;re trying to argue that the copy should be made at the call site, and then the constructor should just move it from the argument to the member variable? If so: what&#39;s the difference? Passing &quot;large&quot; input arguments by const reference is a C++ idiom. It&#39;s the default unless you have a very good reason to do otherwise. Move semantics notwithstanding."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 2, "creation_date": 1519842121, "post_id": 49035923, "comment_id": 85077178, "body": "@KubaOber &quot;Passing &quot;large&quot; input arguments by const reference is a C++ idiom.&quot; this is C++98 idiom, with move semantics it is questionable."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1519845204, "post_id": 49035923, "comment_id": 85078771, "body": "@Slave ...assumption being that rvalue reference is what we want. And we don&#39;t always want it - recall that it modifies the source."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1519841803, "post_id": 49035982, "comment_id": 85077016, "body": "&quot;You should always take the string as a const reference.&quot; this is not right statement since move semantics were added. At least it is questionable, but passing by value can be even more efficient than const reference."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1519842148, "post_id": 49035982, "comment_id": 85077194, "body": "<i>&quot;Then when putting it into a class member, it would have to copy construct it.&quot;</i> Unless you move it."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1519851159, "post_id": 49035982, "comment_id": 85081859, "body": "Guys, guys, I covered moving and why it can&#39;t always be used right there in the second paragraph."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 2, "last_activity_date": 1519851277, "last_edit_date": 1519851277, "creation_date": 1519841383, "answer_id": 49035982, "question_id": 49035923, "link": "https://stackoverflow.com/questions/49035923/why-does-the-ctor-of-stdruntime-error-take-a-constant-reference-to-stdstrin/49035982#49035982", "title": "Why does the c&#39;tor of std::runtime_error take a constant reference to std::string?", "body": "<p>You should always take the string as a const reference. It avoids making <strong>two</strong> copies of it.</p>\n\n<p>If you accepted it as a string, it would have to first construct it. Then when putting it into a class member, it would have to copy construct it.</p>\n\n<p>This may not be so inefficient with move operations but some of us still have to write C++ code for Visual Studio 2008, or Redhat Linux 5, and can't use C++11, 14 or 17.</p>\n\n<p>And besides that, when std::exception was created there weren't any move operations in the C++ standard.</p>\n"}, {"comments": [{"owner": {"reputation": 850, "user_id": 4486783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXhyL.png?s=128&g=1", "display_name": "plats1", "link": "https://stackoverflow.com/users/4486783/plats1"}, "edited": false, "score": 0, "creation_date": 1519843345, "post_id": 49036081, "comment_id": 85077787, "body": "Ah, thank you! I was not able to see the implication of copying not being permitted to throw until you pointed it out. But it makes perfect sense that this prevents the object from holding a copy. And as soon as no copy is held, I of course do agree with passing by const ref."}], "tags": [], "owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "is_accepted": true, "score": 6, "last_activity_date": 1519841891, "creation_date": 1519841891, "answer_id": 49036081, "question_id": 49035923, "link": "https://stackoverflow.com/questions/49035923/why-does-the-ctor-of-stdruntime-error-take-a-constant-reference-to-stdstrin/49036081#49036081", "title": "Why does the c&#39;tor of std::runtime_error take a constant reference to std::string?", "body": "<p>Pass by value wouldn't be useful anyway. You might be thinking about passing a <code>std::string&amp;&amp;</code>, though. According to the <a href=\"http://en.cppreference.com/w/cpp/error/runtime_error\" rel=\"noreferrer\">cppreference.com page</a> you posted.</p>\n\n<blockquote>\n  <p>Because copying std::exception is not permitted to throw exceptions, this message is typically stored internally as a separately-allocated reference-counted string. This is also why there is no constructor taking std::string&amp;&amp;: it would have to copy the content anyway.</p>\n</blockquote>\n\n<p><code>std::runtime_error</code> is not supposed to hold a <code>std::string</code> because if it did, copying the exception could result in another exception due to failure to allocate space for a copy. One way to sidestep this is to use a reference counted buffer and copy the argument to that buffer. Given that a copy has to be made, an <code>std::string&amp;&amp;</code> overload provides no benefit.</p>\n"}], "owner": {"reputation": 850, "user_id": 4486783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXhyL.png?s=128&g=1", "display_name": "plats1", "link": "https://stackoverflow.com/users/4486783/plats1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 49036081, "answer_count": 2, "score": 1, "last_activity_date": 1519851277, "creation_date": 1519841170, "question_id": 49035923, "link": "https://stackoverflow.com/questions/49035923/why-does-the-ctor-of-stdruntime-error-take-a-constant-reference-to-stdstrin", "title": "Why does the c&#39;tor of std::runtime_error take a constant reference to std::string?", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/error/runtime_error\" rel=\"nofollow noreferrer\">cppreference.com</a>, one of the c'tors of <code>std::runtime_error</code> has the following signature:</p>\n\n<pre><code>explicit runtime_error( const std::string&amp; what_arg );\n</code></pre>\n\n<p>However (I assume) the freshly constructed exception object is required to hold a copy of that <code>std::string</code> argument anyways. So why is the argument given by const ref (rather than by value)?</p>\n\n<p>Is my assumption wrong?</p>\n"}, {"tags": ["java", "c++", "c", "reverse-engineering", "libraries"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1519841336, "post_id": 49035917, "comment_id": 85076780, "body": "Note that there is no such languages as &quot;C/C++&quot;. There exists two <b><i>very</i></b> different languages C and C++ though."}, {"owner": {"reputation": 353, "user_id": 1859532, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/foSD1.jpg?s=128&g=1", "display_name": "Carl Jokl", "link": "https://stackoverflow.com/users/1859532/carl-jokl"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1519844396, "post_id": 49035917, "comment_id": 85078340, "body": "This is true but C++ builds on C in a way designed to allow it to still interoperate with it and maintain levels of compatibility. The C++ runtime builds on top of C functionality such as when creating objects with &quot;new&quot; or deleting them leading to calls to alloc and free behind the scenes."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1519998157, "post_id": 49035917, "comment_id": 85145735, "body": "@CarlJokl, your assumptions are far very simplistic.  C++ allows for operator and function overload, for example, thing that you are obviating, and not obvious at all... only to put an example of how different languages they are."}, {"owner": {"reputation": 353, "user_id": 1859532, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/foSD1.jpg?s=128&g=1", "display_name": "Carl Jokl", "link": "https://stackoverflow.com/users/1859532/carl-jokl"}, "edited": false, "score": 0, "creation_date": 1519999108, "post_id": 49035917, "comment_id": 85146343, "body": "The difference in the language isn&#39;t really the point. C++ can make direct calls to C functions without having to go through a compatibility layer. For example a C++ program can use OpenGL functions exposed in plain C. A C program can call Direct3D implemented as C++ (albeit more messy). None of this requires a native ABI translation layer like JNI or PInvoke. Objective-C can call C directly as well but is a very different style of language. So I am talking about direct interoperability of the languages, not the specific syntax."}, {"owner": {"reputation": 353, "user_id": 1859532, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/foSD1.jpg?s=128&g=1", "display_name": "Carl Jokl", "link": "https://stackoverflow.com/users/1859532/carl-jokl"}, "edited": false, "score": 0, "creation_date": 1519999634, "post_id": 49035917, "comment_id": 85146676, "body": "An equivalent grouping might be things like Java, Scala, Groovy, Clojure etc which have very different syntax but due to running on the Java Virtual Machine are able to make calls into each other. Equivalents too would be the .Net family where C# .net and VB .net can call common libraries even though the syntax is very different it runs on the CLR and has a common language interface so the languages can call each other relatively directly."}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 1859532, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/foSD1.jpg?s=128&g=1", "display_name": "Carl Jokl", "link": "https://stackoverflow.com/users/1859532/carl-jokl"}, "edited": false, "score": 0, "creation_date": 1519907608, "post_id": 49036827, "comment_id": 85103733, "body": "Thank you for the detailed answer. This relates to a discussion I had about tools that call into Minecraft world generation algorithms in order to try and determine the location of certain rare generated points of interest. So far I have only seen tools do this for the Java version. I questioned if it was practical to do the same thing with the native (&quot;Bedrock&quot;) edition. Not impossible, but certainly much more difficult."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1519844840, "creation_date": 1519844840, "answer_id": 49036827, "question_id": 49035917, "link": "https://stackoverflow.com/questions/49035917/c-c-exposure-of-functions-methods-vs-java/49036827#49036827", "title": "C/C++ exposure of functions / methods vs Java", "body": "<p>First of all, there are tools (of varying quality and capabilities) to reverse engineer compiled machine-code back to the original language [or another language, for that matter]. The biggest problem when doing this is that languages such as C and C++, the names of members in a structure don't have names, and often become \"flat\", so what is originally:</p>\n\n<pre><code> struct user\n {\n    std::string name;\n    int age;\n    int score;\n };\n</code></pre>\n\n<p>will become:</p>\n\n<pre><code> struct s0\n {\n     char *f0;\n     char *f1;\n     int f2;\n     int f3;\n };\n</code></pre>\n\n<p>[Note of course that <code>std::string</code> may be implemented in a dozen different ways, and the \"two pointers\" is just one plausible variant]</p>\n\n<p>Of course, if there is a header file describing how the library works, you can use the data structures in that to get better type information. Likewise, if there is debug information in the file, it can be used to form data structures and variable names in a much better way. But someone who wants to keep these things private will (most often) not ship the code with debug symbols, and only publish the actual necessary parts to call the public functionality.</p>\n\n<p>But if you understand how these are used [or read some code that for example displayed a \"user\", you can figure out what is the name, the age and what is the score.</p>\n\n<p>Understanding what is an array and what is separate fields can also be difficult. Which is it:</p>\n\n<pre><code> struct\n {\n    int x, y, z;\n };\n</code></pre>\n\n<p>or</p>\n\n<pre><code> int arr[3];\n</code></pre>\n\n<p>Several years ago, I started on a patience card game (Similar to \"Solitaire\"). To do that, I needed a way to display cards on the screen. So I thought \"well, there's one for the existing Solitaire on Windows, I bet I can figure out how to use that\", and indeed, I did. I could draw the Queen of Clubs or Two of Spades, as I wished. I never finished the actual game-play part, but I certainly managed to load the card-drawing functionality from a non-public shared library. Not rocket science by any means (there are people who do this for commercial games with thousands of functions and really complex data structures - this had two or three functions that you needed to call), but I didn't spend much time on it either, a couple of hours if I remember right, from coming up with the idea to having something that \"works\".</p>\n\n<p>But for the second part of your question, plugin-interfaces (such as filter plugins to Photoshop, or transitions in video editors), are very often implemented as \"shared libraries\" (aka \"dynamic link libraries\", DLLs).</p>\n\n<p>There are functions in the OS to load a shared library into memory, and to query for functions by their name. The interface of these functions is (typically) pre-defined, so a function pointer prototype in a header-file can be used to form the actual call.</p>\n\n<p>As long as the compiler for the shared library and the application code are using the the same ABI (application binary interface), all should work out when it comes to how arguments are passed from the caller to the function - it's not like the compiler just randomly uses whatever register it fancies, the parameters are passed in a well-defined order and which register is used for what is defined by the ABI specification for a given processor architecture. [It gets further more complicated if you have to know the contents of data structures, and there are different versions of such structures - say for example someone has a <code>std::string</code> that contains two pointers (start and end), and for whatever reason, the design is changed to be one pointer and a length - both the application code and the shared library need to be compiled with the same version of <code>std::string</code>, or bad things will happen!]</p>\n\n<p>Non-public API functions CAN be called, but they wouldn't be discoverable by calling the query for finding a function by name - you'd have to figure out some other way - for example by knowing that \"this function is 132 bytes on from the function XYZ\", and of course, you wouldn't have the function prototype either.</p>\n\n<p>There is of course the added complication where Java Bytecode is portable for many different processor architectures, machine code only works on a defined set of processors - code for x86 works on Intel and AMD processors (and maybe a few others), code for ARM processors work in chips developed with the ARM instruction set, and so on. You have to compile the C or C++ code for the given process.</p>\n"}], "owner": {"reputation": 353, "user_id": 1859532, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/foSD1.jpg?s=128&g=1", "display_name": "Carl Jokl", "link": "https://stackoverflow.com/users/1859532/carl-jokl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 49036827, "answer_count": 1, "score": 0, "last_activity_date": 1519852846, "creation_date": 1519841135, "last_edit_date": 1519852846, "question_id": 49035917, "link": "https://stackoverflow.com/questions/49035917/c-c-exposure-of-functions-methods-vs-java", "title": "C/C++ exposure of functions / methods vs Java", "body": "<p>The world of Minecraft Modding has made me curious about differences in mechanisms between Java and C/C++ libraries to allow methods / functions in the libraries to be invoked externally.</p>\n\n<p>My understanding is that Minecraft Modding came about due to the ability to decompile / reflect over Java in order to reverse engineer classes and methods that can be invoked from the library. I believe that the Java class specification includes quite a lot of metadata about the structure of classes allowing code to be used in ways other than intended.</p>\n\n<p>There are some obfuscation tools around that try to make it harder to reverse engineer Java but overall it seems to be quite difficult to prevent.</p>\n\n<p>I don't have the depth of knowledge in C/C++ to know to what degree the same can be done there.</p>\n\n<p>For C/C++ code is compiled natively ahead of time. The end result is an assembly of machine code specific for that platform. C/C++ has the notion of externalising functions so that they can be exposed from outside the library or executable. Some libraries also have an entry point.</p>\n\n<p>Typically when connecting to external functions there is a header file to list what functions are available to code against from the library.</p>\n\n<p>I would assume there would need to be a mechanism to map an exposed function to the address within the library / executable machine code assembly so the function calls get made in the right place.</p>\n\n<p>Typically connecting the function calls together with the address is the job of the linker. The linker still needs to somehow know where to find these functions.</p>\n\n<p>This makes me wonder if it is fundamentally possible to invoke non exported functions. If so would this require the ability to locate their address and understand their parameter format? </p>\n\n<p>function calls in C/C++ as I understand it is typically done by assigning the parameters to registers for simple functions or to an argument array for more complex functions. </p>\n\n<p>I don't know if the practice of invoking non-public API's in native code is common\nor if the inherent difficulty in doing so makes native code pretty safe from this kind of use.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "is_accepted": false, "score": 2, "last_activity_date": 1519841531, "last_edit_date": 1592644375, "creation_date": 1519841180, "answer_id": 49035925, "question_id": 49035823, "link": "https://stackoverflow.com/questions/49035823/what-is-the-meaning-of-while-calling-a-method-in-mfc-and-c/49035925#49035925", "title": "What is the meaning of :: while calling a method in mfc and c++?", "body": "<p>That is the <a href=\"https://docs.microsoft.com/en-gb/cpp/cpp/scope-resolution-operator\" rel=\"nofollow noreferrer\">scope</a> specifier.</p>\n<p>There is more information <a href=\"https://docs.microsoft.com/en-gb/cpp/cpp/scope-visual-cpp\" rel=\"nofollow noreferrer\">here</a>.</p>\n<blockquote>\n<p>C++ names can be used only in certain regions of a program. This area is called the &quot;scope&quot; of the name. Scope determines the &quot;lifetime&quot; of a name that does not denote an object of static extent. Scope also determines the visibility of a name, when class constructors and destructors are called, and when variables local to the scope are initialized. (For more information, see Constructors and Destructors.) There are five kinds of scope:</p>\n<ul>\n<li>Function scope</li>\n<li>File scope</li>\n<li>Class scope</li>\n<li>Prototype scope</li>\n</ul>\n</blockquote>\n<p>Read those articles for more information.</p>\n<hr />\n<p>There are lots of <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_variable_scope.htm\" rel=\"nofollow noreferrer\">tutorials</a> about scope too.</p>\n<blockquote>\n<p>A scope is a region of the program and broadly speaking there are three places, where variables can be declared \u2212</p>\n<ul>\n<li><p>Inside a function or a block which is called local variables,</p>\n</li>\n<li><p>In the definition of function parameters which is called formal parameters.</p>\n</li>\n<li><p>Outside of all functions which is called global variables.</p>\n</li>\n</ul>\n</blockquote>\n<p>I should point out that the same rules apply for <strong>functions</strong>. So if a function is defined in, for example, <code>CDialog</code>, and you want the <strong>global</strong> version and not the <code>CDialog</code> version, you use <code>::</code> to access the global version.</p>\n"}], "owner": {"reputation": 29, "user_id": 9397512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f1ad95fd328c231b20fbf53033a510?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek S.", "link": "https://stackoverflow.com/users/9397512/vivek-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1519856431, "answer_count": 1, "score": 0, "last_activity_date": 1519856130, "creation_date": 1519840739, "last_edit_date": 1519856130, "question_id": 49035823, "link": "https://stackoverflow.com/questions/49035823/what-is-the-meaning-of-while-calling-a-method-in-mfc-and-c", "closed_reason": "Duplicate", "title": "What is the meaning of :: while calling a method in mfc and c++?", "body": "<p>I have found a code in my project like</p>\n\n<pre><code>if(::PeekMessage( &amp;msg, NULL, 0, 0, PM_REMOVE) != 0)\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>if(&lt;Some Condition&gt;)\n\n{\n    ::TranslateMessage(&amp;msg);\n\n    ::DispatchMessage(&amp;msg);\n}\n</code></pre>\n\n<p>What is the significance of ::?</p>\n\n<p>And the code is related to JNI.</p>\n\n<p>Is it because of Threaded programming(I don't know)?</p>\n"}, {"tags": ["c++", "c++17", "structured-bindings"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 1, "creation_date": 1519840476, "post_id": 49035732, "comment_id": 85076386, "body": "Have you tried it?"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1519840540, "post_id": 49035732, "comment_id": 85076418, "body": "Yes I tried it. It doesn&#39;t work with the syntax above. Thats why I&#39;m asking if it is even possible."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1537120471, "post_id": 49035732, "comment_id": 91658270, "body": "A problem is: how to tell C++ what const/reference-ness to use for each hidden object to which each nested set of introduced names are bound? The const/reference qualifier refers to said hidden object, not the introduced aliases to its members/<code>get()</code>. I can&#39;t see how it&#39;d matter in this case if both were the same, nor immediately think of cases where distinct qualifiers would be needed, but I wouldn&#39;t want C++ to add in nested structured bindings if they were 2nd-class compared to what we currently have. And making them 1st-class seems perilous, when the grammar is probably already straining!"}], "answers": [{"comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1519840995, "post_id": 49035851, "comment_id": 85076626, "body": "I&#39;m curious how the syntax will not clash with attributes if nested decompositions become a thing."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1519841134, "post_id": 49035851, "comment_id": 85076686, "body": "Sad. That would have been one step closer to Python++. @miradulo I was asking the same question to myself. Are attributes even allowed after a type qualifier like <code>auto [[attribute]] [var1, var2]</code>?"}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1519841599, "post_id": 49035851, "comment_id": 85076902, "body": "@Timo Yup, take a look at the <a href=\"http://en.cppreference.com/w/cpp/language/attributes\" rel=\"nofollow noreferrer\">cppref example</a>. Attributes can be almost anywhere."}, {"owner": {"reputation": 415, "user_id": 9555853, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "LIU Qingyuan", "link": "https://stackoverflow.com/users/9555853/liu-qingyuan"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 1, "creation_date": 1582289773, "post_id": 49035851, "comment_id": 106735912, "body": "@miradulo Maybe extra tailing comma? Like auto [[a,b],] = func();"}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 29, "last_activity_date": 1519840841, "creation_date": 1519840841, "answer_id": 49035851, "question_id": 49035732, "link": "https://stackoverflow.com/questions/49035732/are-nested-structured-bindings-possible/49035851#49035851", "title": "Are nested structured bindings possible?", "body": "<p>No, it is not possible.</p>\n\n<p>I distinctly remember reading somewhere that nested structured bindings are not allowed for C++17, but they are considering allowing it in a future standard. Can't find the source though.</p>\n"}, {"comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1519907161, "post_id": 49039886, "comment_id": 85103493, "body": "Yes that&#39;s how I&#39;m doing it now. Thanks."}, {"owner": {"reputation": 81, "user_id": 8603646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e35c6373bffcab075e0d831c59d9ba87?s=128&d=identicon&r=PG&f=1", "display_name": "kaba", "link": "https://stackoverflow.com/users/8603646/kaba"}, "edited": false, "score": 0, "creation_date": 1612797602, "post_id": 49039886, "comment_id": 116871952, "body": "(Just out of curiosity for something I didn&#39;t understand 100% yet:) What is the benefit of using universal refs here? Aren&#39;t <code>data</code> and <code>value</code> l-values, so that these universal refs will result in being l-value refs in the end anyway?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 81, "user_id": 8603646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e35c6373bffcab075e0d831c59d9ba87?s=128&d=identicon&r=PG&f=1", "display_name": "kaba", "link": "https://stackoverflow.com/users/8603646/kaba"}, "edited": false, "score": 0, "creation_date": 1612804081, "post_id": 49039886, "comment_id": 116875286, "body": "@kaba I am lazy, and use either <code>auto&amp;&amp;</code> if I don&#39;t care, <code>auto const&amp;</code> when I want to block modification, <code>auto&amp;</code> when I want to modify what I&#39;m iterating over, and <code>auto</code> when I want a copy I can modify and not impact the original sequence.  Here, I don&#39;t care, so I use <code>auto&amp;&amp;</code>; <code>auto&amp;&amp;</code> to me means &quot;I do not care how this is stored -- alias or copy or whatever&quot;."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 18, "last_activity_date": 1519857800, "creation_date": 1519857800, "answer_id": 49039886, "question_id": 49035732, "link": "https://stackoverflow.com/questions/49035732/are-nested-structured-bindings-possible/49039886#49039886", "title": "Are nested structured bindings possible?", "body": "<p>No, they aren't possible; but this is:</p>\n\n<pre><code>for (auto&amp;&amp; [key, value] : data) {\n  auto&amp;&amp; [my_int, my_float] = value;\n}\n</code></pre>\n\n<p>which is close at least.</p>\n"}], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3983, "favorite_count": 2, "accepted_answer_id": 49035851, "answer_count": 2, "score": 50, "last_activity_date": 1565370813, "creation_date": 1519840400, "last_edit_date": 1565370813, "question_id": 49035732, "link": "https://stackoverflow.com/questions/49035732/are-nested-structured-bindings-possible", "title": "Are nested structured bindings possible?", "body": "<p>Assume I have an object of type</p>\n\n<pre><code>std::map&lt;std::string, std::tuple&lt;int, float&gt;&gt; data;\n</code></pre>\n\n<p>Is it possible to access the element types in a nested way (i.e. when used in ranged for loop) like this</p>\n\n<pre><code>for (auto [str, [my_int, my_float]] : data) /* do something */\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "linker", "boost-python"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1519840575, "post_id": 49035726, "comment_id": 85076435, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44987299/configuring-visual-studio-to-work-with-boost-python-and-python-3\">Configuring Visual Studio to work with Boost.Python and Python 3</a>"}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1520350352, "post_id": 49035726, "comment_id": 85273539, "body": "C:\\boost_1_66_0\\stage\\lib  contains &#39;boost_python3-vc141-mt-x64-1_66.lib&#39; ? Sure you modified AdditionalLibraryDirectories in all relevant configurations? (Release/Debug | x64)"}, {"owner": {"reputation": 23, "user_id": 9424891, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Denis Franck", "link": "https://stackoverflow.com/users/9424891/denis-franck"}, "edited": false, "score": 0, "creation_date": 1520369179, "post_id": 49035726, "comment_id": 85284583, "body": "Yes, for &#39;All Configurations&#39; and at the head of pathlist.  I tried at its tail too.  Another thing : This strange message at the beginning of build.  1&gt;------ Rebuild All started: Project: UFPython, Configuration: Release x64 ------ 1&gt;uf_pyt.cpp 1&gt;Info: Boost.Config is older than your compiler version - probably nothing bad will happen - but you may wish to look for an update Boost version.  Define BOOST_CONFIG_SUPPRESS_OUTDATED_MESSAGE to suppress this message. 1&gt;"}], "owner": {"reputation": 23, "user_id": 9424891, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Denis Franck", "link": "https://stackoverflow.com/users/9424891/denis-franck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519844812, "creation_date": 1519840368, "last_edit_date": 1519844812, "question_id": 49035726, "link": "https://stackoverflow.com/questions/49035726/vs-community-2017-fatal-error-lnk1104-cannot-open-file-boost-python3-vc141-m", "title": "VS Community 2017 : fatal error LNK1104: cannot open file &#39;boost_python3-vc141-mt-x64-1_66.lib&#39;", "body": "<p>As the title says ...</p>\n\n<p>while : </p>\n\n<ul>\n<li><p>Linker -> Input -> Additional dependencies : boost_python3-vc141-mt-x64-1_66.lib (is well spelled)</p></li>\n<li><p>Linker -> Platform -> Active (x64)</p></li>\n<li><p>Linker -> General -> Additional Library Directories : C:\\boost_1_66_0\\stage\\lib</p></li>\n</ul>\n\n<p>Any idea why ?</p>\n\n<p>Thanks a lot for your contributions</p>\n"}, {"tags": ["c++", "visual-studio-2017", "ibm-mq"], "comments": [{"owner": {"reputation": 5631, "user_id": 1198321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f792e733fbf4e4edd6d64842093b7691?s=128&d=identicon&r=PG", "display_name": "lxop", "link": "https://stackoverflow.com/users/1198321/lxop"}, "edited": false, "score": 1, "creation_date": 1519839696, "post_id": 49035481, "comment_id": 85075977, "body": "Yes. Add that directory"}, {"owner": {"reputation": 930, "user_id": 2571559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/16e3f51056ad39855f479f5701494e5e?s=128&d=identicon&r=PG", "display_name": "Andrey Grachev", "link": "https://stackoverflow.com/users/2571559/andrey-grachev"}, "reply_to_user": {"reputation": 5631, "user_id": 1198321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f792e733fbf4e4edd6d64842093b7691?s=128&d=identicon&r=PG", "display_name": "lxop", "link": "https://stackoverflow.com/users/1198321/lxop"}, "edited": false, "score": 0, "creation_date": 1519840068, "post_id": 49035481, "comment_id": 85076176, "body": "@lxop, when this directory is added the build fails with multiple linker error. I will update the question with those errors."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1519844439, "post_id": 49035481, "comment_id": 85078364, "body": "Wrong .lib: <a href=\"https://www.ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.dev.doc/q030490_.htm\" rel=\"nofollow noreferrer\">ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.dev.&zwnj;&#8203;doc/&hellip;</a>"}, {"owner": {"reputation": 930, "user_id": 2571559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/16e3f51056ad39855f479f5701494e5e?s=128&d=identicon&r=PG", "display_name": "Andrey Grachev", "link": "https://stackoverflow.com/users/2571559/andrey-grachev"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1519847792, "post_id": 49035481, "comment_id": 85080107, "body": "@HansPassant Do you mean <code>lib</code> vs <code>lib64</code> or something else? I tried both <code>lib64</code> with x64 and <code>lib</code> with x86."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1519847998, "post_id": 49035481, "comment_id": 85080215, "body": "No.  mqm.lib is suitable for C programs but a C++ program requires imqb23vn.lib and imqc23vn.lib"}, {"owner": {"reputation": 930, "user_id": 2571559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/16e3f51056ad39855f479f5701494e5e?s=128&d=identicon&r=PG", "display_name": "Andrey Grachev", "link": "https://stackoverflow.com/users/2571559/andrey-grachev"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1519848782, "post_id": 49035481, "comment_id": 85080627, "body": "@HansPassant Thank you, that fixed it, build succeeded. I you add it as an answer, I&#39;ll accept it"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1519848898, "post_id": 49035481, "comment_id": 85080697, "body": "Use what you learned to complete this Q+A yourself please."}], "owner": {"reputation": 930, "user_id": 2571559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/16e3f51056ad39855f479f5701494e5e?s=128&d=identicon&r=PG", "display_name": "Andrey Grachev", "link": "https://stackoverflow.com/users/2571559/andrey-grachev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519843107, "creation_date": 1519839343, "last_edit_date": 1519843107, "question_id": 49035481, "link": "https://stackoverflow.com/questions/49035481/building-ibm-mq-c-samples-with-visual-studio-2017", "title": "Building IBM MQ C++ samples with Visual Studio 2017", "body": "<p>I have IBM MQ Client version 9.0.4.0 x64 installed on Windows 10. Is it possible to build <code>C++</code> samples from <code>MQ_INTALLATION_PATH\\Tools\\cplus\\Samples</code> with Visual Studio 2017? There is this <a href=\"https://www.ibm.com/developerworks/websphere/library/techarticles/1407_gabhane/1407_gabhane.html\" rel=\"nofollow noreferrer\" title=\"article\">article</a> on this topic, but it is for <code>C</code> samples and Visual Studio 2010. </p>\n\n<p>The first problem that I have is with <code>include</code> folder. The <code>include</code> folder path for <code>C++</code> samples is <code>MQ_INTALLATION_PATH\\Tools\\cplus\\include</code>. This folder has files with <code>.hpp</code> extensions. Some of the files from this folder have includes for files located in <code>MQ_INTALLATION_PATH\\Tools\\c\\include</code>. For example <code>imqmsg.hpp</code> file has <code>#include &lt;cmqc.h&gt;</code>. Should the project have <code>MQ_INTALLATION_PATH\\Tools\\c\\include</code> added as include directory? </p>\n\n<p>Update: as recommended in comment added include directory <code>MQ_INTALLATION_PATH\\Tools\\c\\include</code>. This results in multiple linker errors with code <code>LNK2019</code>. I'll add all configuration steps done and samples of erros below:</p>\n\n<ul>\n<li>New Visual C++ <code>Empty Project</code> create in Visual Studio 2017</li>\n<li><code>MQ_INTALLATION_PATH\\Tools\\cplus\\include</code> and <code>MQ_INTALLATION_PATH\\Tools\\c\\include</code> added in Properties > VC++ Directories > Include Directories</li>\n<li><code>MQ_INTALLATION_PATH\\Tools\\Lib64</code> added in Properties > VC++ Directories > Library Directories</li>\n<li><code>mqm.Lib</code> added to Properties > Linker > Command Line > Additional Options</li>\n<li><code>imqsget.cpp</code> from <code>MQ_INTALLATION_PATH\\Tools\\cplus\\samples</code> added to Source Files</li>\n</ul>\n\n<p>As mentioned above with such config build results in multiple linker errors:</p>\n\n<pre><code>Error   LNK2019 unresolved external symbol \"public: __cdecl ImqStr::ImqStr(char const *)\" (??0ImqStr@@QEAA@PEBD@Z) referenced in function main  \nError   LNK2019 unresolved external symbol \"public: virtual __cdecl ImqErr::~ImqErr(void)\" (??1ImqErr@@UEAA@XZ) referenced in function \"public: void __cdecl ImqMgr::`vbase destructor'(void)\" (??_DImqMgr@@QEAAXXZ)        \nError   LNK2019 unresolved external symbol \"public: static void * __cdecl ImqErr::operator new(unsigned __int64)\" (??2ImqErr@@SAPEAX_K@Z) referenced in function main   \nError   LNK2019 unresolved external symbol \"public: static void __cdecl ImqErr::operator delete(void *)\" (??3ImqErr@@SAXPEAX@Z) referenced in function main$dtor$6  \nError   LNK2019 unresolved external symbol \"public: __cdecl ImqStr::ImqStr(void)\" (??0ImqStr@@QEAA@XZ) referenced in function main  \n...\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++14", "metaprogramming", "variadic-templates"], "comments": [{"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 1, "creation_date": 1519840568, "post_id": 49035480, "comment_id": 85076430, "body": "Your premise is wrong: not all lambdas can convert into function pointers! Also, those which can convert, will automatically/easily convert in a context which requires it, or you can trigger such decay trivially, e.g with a <code>+</code> sign: example: <code>+[]{}</code> converts into <code>void (*)()</code>. So you don&#39;t need a function to do that."}, {"owner": {"reputation": 13, "user_id": 6754782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58c5650a1f7710a977fe1edf2c8dace1?s=128&d=identicon&r=PG&f=1", "display_name": "Diogo Parreira", "link": "https://stackoverflow.com/users/6754782/diogo-parreira"}, "reply_to_user": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1519841728, "post_id": 49035480, "comment_id": 85076973, "body": "Thanks, I know that lambdas that have captures do not allow a conversion to function pointers. I tried <code>+[]{}</code> and did not work, I think it does not work in the MSVC compiler, or i did it the wrong way somehow. I know I was not clear, but the lambda conversion is more like an example for the real question. It&#39;s the issue I&#39;m facing right now, but what I want to know is the template stuff, I&#39;m very new to templates and I don&#39;t know how most of the things work."}], "answers": [{"tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": false, "score": 1, "last_activity_date": 1519841811, "creation_date": 1519841811, "answer_id": 49036069, "question_id": 49035480, "link": "https://stackoverflow.com/questions/49035480/how-to-make-a-variadic-template-inside-a-struct-accessible-outside/49036069#49036069", "title": "How to make a variadic template inside a struct accessible outside?", "body": "<p>As <a href=\"https://stackoverflow.com/questions/49035480/how-to-make-a-variadic-template-inside-a-struct-accessible-outside#comment85076430_49035480\">Nawaz pointed out</a>, not all lambdas can be converted to pointers, only those without captures. For those without captures, they have an implicit conversion that can be forced by adding a <code>+</code> in front.</p>\n\n<p>But to directly answer your question, just alias the signature within the trait</p>\n\n<pre><code>template&lt;typename C, typename R, typename... Args&gt;\nstruct function_traits&lt;R (C::*)(Args...)&gt;\n{\n    using signature = R(Args...);\n};\n\ntemplate&lt;typename F&gt;\nauto cast(F f)\n{\n    return static_cast&lt;typename function_traits&lt;F&gt;::signature*&gt;(f);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6754782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58c5650a1f7710a977fe1edf2c8dace1?s=128&d=identicon&r=PG&f=1", "display_name": "Diogo Parreira", "link": "https://stackoverflow.com/users/6754782/diogo-parreira"}, "edited": false, "score": 0, "creation_date": 1519862628, "post_id": 49036363, "comment_id": 85086633, "body": "This is exactly what I was searching for, specially the second part, thank you very much max66. Indeed, it&#39;s quite ugly, and complex. Just out of curiosity, do you know if it is possible to have the std::make_index_sequence give the index_sequence in the same function? (instead of having to have a helper function to receive the indices)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 13, "user_id": 6754782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58c5650a1f7710a977fe1edf2c8dace1?s=128&d=identicon&r=PG&f=1", "display_name": "Diogo Parreira", "link": "https://stackoverflow.com/users/6754782/diogo-parreira"}, "edited": false, "score": 1, "creation_date": 1519870118, "post_id": 49036363, "comment_id": 85088394, "body": "@DiogoParreira - not really complex but, yes: very ugly. And no: I don&#39;t know how pass from <code>std::make_index_sequence</code> to the corresponding <code>std::index_sequence</code> avoiding the helper function. If you find the way, please, say it to me: there are years that I&#39;m looking for it."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 0, "last_activity_date": 1519844924, "last_edit_date": 1519844924, "creation_date": 1519843027, "answer_id": 49036363, "question_id": 49035480, "link": "https://stackoverflow.com/questions/49035480/how-to-make-a-variadic-template-inside-a-struct-accessible-outside/49036363#49036363", "title": "How to make a variadic template inside a struct accessible outside?", "body": "<blockquote>\n  <p>but what I really want to know is how to make available the content of the Args inside the function_traits to access it from outside, and how to \"inline\" multiple templates and then expand them. </p>\n</blockquote>\n\n<p>First of all, the simplest solution that come in my mind to solve you particular problem with <code>l2f()</code> is define a specific type as the <code>signature</code> suggested by PasserBy.</p>\n\n<p>I propose a slightly different solution but the idea is the same: you can define </p>\n\n<pre><code>using func_type = std::function&lt;ReturnType(Args...)&gt;;\n</code></pre>\n\n<p>so <code>l2f()</code> simply become </p>\n\n<pre><code>template &lt;typename Func&gt;\nconstexpr auto l2f (Func lambda)\n { return static_cast&lt;typename function_traits&lt;Func&gt;::func_type&gt;(lambda); }\n</code></pre>\n\n<p>For the more general problem (\" how to make available the content of the Args inside the function_traits to access it from outside, and how to \"inline\" multiple templates and then expand them\") I suggest to avoid to define the template <code>arg</code> struct but simply define a tuple type inside <code>function_traits</code></p>\n\n<pre><code>using tuple_type  = std::tuple&lt;Args...&gt;;\n</code></pre>\n\n<p>Next you have to call an helper function to transform the <code>arity</code> inside the <code>function_traits</code> in a <code>std::index_sequence</code></p>\n\n<pre><code>template &lt;typename Func&gt;\nconstexpr auto l2f (Func lambda)\n { return l2f_helper(lambda,\n      std::make_index_sequence&lt;function_traits&lt;Func&gt;::arity&gt;{});  }\n</code></pre>\n\n<p>and the helper function can be written as</p>\n\n<pre><code>template &lt;typename Func, std::size_t ... Is&gt;\nconstexpr auto l2f_helper (Func lambda,\n                           std::index_sequence&lt;Is...&gt; const &amp;)\n {\n   return static_cast&lt;std::function&lt;\n      typename function_traits&lt;Func&gt;::result_type(\n         std::tuple_element_t&lt;Is,\n            typename function_traits&lt;Func&gt;::tuple_type&gt; ...)&gt;&gt;(lambda);\n }\n</code></pre>\n\n<p>Ugly. I know.</p>\n\n<p>The following is a full compilable example with both versions of <code>l2f</code> and a modified <code>function_traits</code>.</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nstruct function_traits\n    : public function_traits&lt;decltype(&amp;T::operator())&gt;\n{ };\n\ntemplate &lt;typename ClassType, typename ReturnType, typename... Args&gt;\nstruct function_traits&lt;ReturnType(ClassType::*)(Args...) const&gt;\n {\n   static constexpr std::size_t arity { sizeof...(Args) };\n\n   using result_type = ReturnType;\n   using func_type   = std::function&lt;ReturnType(Args...)&gt;;\n   using tuple_type  = std::tuple&lt;Args...&gt;;\n };\n\ntemplate &lt;typename Func&gt;\nconstexpr auto l2f_v1 (Func lambda)\n { return static_cast&lt;typename function_traits&lt;Func&gt;::func_type&gt;(lambda); }\n\ntemplate &lt;typename Func, std::size_t ... Is&gt;\nconstexpr auto l2f_v2_helper (Func lambda,\n                              std::index_sequence&lt;Is...&gt; const &amp;)\n {\n   return static_cast&lt;std::function&lt;\n      typename function_traits&lt;Func&gt;::result_type(\n         std::tuple_element_t&lt;Is,\n            typename function_traits&lt;Func&gt;::tuple_type&gt; ...)&gt;&gt;(lambda);\n }\n\ntemplate &lt;typename Func&gt;\nconstexpr auto l2f_v2 (Func lambda)\n { return l2f_v2_helper(lambda,\n      std::make_index_sequence&lt;function_traits&lt;Func&gt;::arity&gt;{});  }\n\nint main ()\n {\n   auto f1 = l2f_v1([](int, long){ std::cout &lt;&lt; \"lambda1!\" &lt;&lt; std::endl; });\n   auto f2 = l2f_v2([](int, long){ std::cout &lt;&lt; \"lambda2!\" &lt;&lt; std::endl; });\n\n   f1(1, 2L);\n   f2(2, 3L);\n\n   static_assert( std::is_same&lt;decltype(f1), decltype(f2)&gt;{}, \"!\" );\n }\n</code></pre>\n\n<p>A little improvement: if you also define the following <code>using</code> template inside <code>function_traits</code></p>\n\n<pre><code>template &lt;std::size_t I&gt;\nusing a_type = std::tuple_element_t&lt;I, tuple_type&gt;;\n</code></pre>\n\n<p>the helper function can be simplified as follows</p>\n\n<pre><code>template &lt;typename Func, std::size_t ... Is&gt;\nconstexpr auto l2f_helper (Func lambda,\n                              std::index_sequence&lt;Is...&gt; const &amp;)\n {\n   return static_cast&lt;std::function&lt;\n      typename function_traits&lt;Func&gt;::result_type(\n         typename function_traits&lt;Func&gt;::template a_type&lt;Is&gt;...)&gt;&gt;(lambda);\n }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6754782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58c5650a1f7710a977fe1edf2c8dace1?s=128&d=identicon&r=PG&f=1", "display_name": "Diogo Parreira", "link": "https://stackoverflow.com/users/6754782/diogo-parreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 49036363, "answer_count": 2, "score": 1, "last_activity_date": 1519844924, "creation_date": 1519839343, "last_edit_date": 1519839691, "question_id": 49035480, "link": "https://stackoverflow.com/questions/49035480/how-to-make-a-variadic-template-inside-a-struct-accessible-outside", "title": "How to make a variadic template inside a struct accessible outside?", "body": "<p>I'm using the <a href=\"https://stackoverflow.com/a/7943765/6754782\">code from another answer</a> to obtain the types of a lambda function (return and arguments). Here is the relevant code in the answer:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct function_traits\n    : public function_traits&lt;decltype(&amp;T::operator())&gt;\n{};\n// For generic types, directly use the result of the signature of its 'operator()'\n\ntemplate &lt;typename ClassType, typename ReturnType, typename... Args&gt;\nstruct function_traits&lt;ReturnType(ClassType::*)(Args...) const&gt;\n// we specialize for pointers to member function\n{\n    enum { arity = sizeof...(Args) };\n    // arity is the number of arguments.\n\n    typedef ReturnType result_type;\n\n    template &lt;size_t i&gt;\n    struct arg\n    {\n        typedef typename std::tuple_element&lt;i, std::tuple&lt;Args...&gt;&gt;::type type;\n        // the i-th argument is equivalent to the i-th tuple element of a tuple\n        // composed of those arguments.\n    };\n};\n</code></pre>\n\n<p>I want to create a list of arguments to automatically cast the lambda to a function pointer:</p>\n\n<pre><code>template&lt;typename Func&gt;\nconstexpr auto l2f(Func lambda) {\n    typedef function_traits&lt;Func&gt; traits;\n    return static_cast&lt;traits::result_type(*)( ..all the args.. )(lambda);\n}\n</code></pre>\n\n<p>Right now what I'm doing is, I added a function to the function_traits struct:</p>\n\n<pre><code>template &lt;typename Func&gt;\nstatic auto convertToFunctionPointer(Func fn) {\n    return static_cast&lt;ReturnType(*)(Args...)&gt;(fn);\n}\n</code></pre>\n\n<p>It works, but what I really want to know is how to make available the content of the Args inside the function_traits to access it from outside, and how to \"inline\" multiple templates and then expand them. Something like this (does not work): </p>\n\n<pre><code>return static_cast&lt;traits::result_type(*)(traits::arg&lt;std::make_index_sequence&lt;traits::arity&gt;...&gt;::type...)(lambda);\n</code></pre>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1519838653, "post_id": 49035205, "comment_id": 85075354, "body": "First job is to replace busy waits with condition variables"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1519844793, "post_id": 49035205, "comment_id": 85078548, "body": "You could maybe use a <i>boost</i> barrier wait... <a href=\"https://stackoverflow.com/a/11408125/2836621\">stackoverflow.com/a/11408125/2836621</a>"}, {"owner": {"reputation": 1247, "user_id": 9107647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a43594ef3d74c11a31be7f9d5ebddc0?s=128&d=identicon&r=PG&f=1", "display_name": "Humphrey Winnebago", "link": "https://stackoverflow.com/users/9107647/humphrey-winnebago"}, "edited": false, "score": 0, "creation_date": 1519855629, "post_id": 49035205, "comment_id": 85084129, "body": "So you essentially made a cyclic barrier?  Which part takes 17-18ms? That sounds to me like a very long time.   How many cores are you running on?  My first advice would be that if you don&#39;t know which <code>memory_order</code> to use, use <code>seq_cst</code>. (But you have to use it for all, no mixing.)  I&#39;m curious to know why you lock the atomic before an increment. This is not necessary, since you&#39;re just doing 1 operation on an <code>std::atomic</code>. It could be the source of your poor performance."}, {"owner": {"reputation": 21, "user_id": 2657559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720bdaa97b0845ab3ade0589216a859e?s=128&d=identicon&r=PG", "display_name": "SamJBarney", "link": "https://stackoverflow.com/users/2657559/samjbarney"}, "edited": false, "score": 0, "creation_date": 1519926282, "post_id": 49035205, "comment_id": 85115894, "body": "This is a port of a c version that I made. I started using the mutex when the atomic wasn&#39;t updating as expected no matter what memory_order I used (I was using release to store and acquire to read initiall IIRC), and I can definitely believe that it is causing the slowdown. It&#39;s been so long since I learned about memory order I don&#39;t really remember which is which. I&#39;m running on 4 cores. The lock/unlock sections take the longest."}], "owner": {"reputation": 21, "user_id": 2657559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720bdaa97b0845ab3ade0589216a859e?s=128&d=identicon&r=PG", "display_name": "SamJBarney", "link": "https://stackoverflow.com/users/2657559/samjbarney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519838374, "creation_date": 1519838374, "question_id": 49035205, "link": "https://stackoverflow.com/questions/49035205/how-do-i-efficiently-wait-for-all-threads-to-complete-task-before-starting-the-n", "title": "How do I efficiently wait for all threads to complete task before starting the next one?", "body": "<p>I've been trying to build an Entity Component System in C++, and I've got it working, but the code that I've written to handle the waiting between phases is very inefficient.</p>\n\n<p>I've got two phases currently. The first one is Ticking, where all of the threads go through all of the systems and tick the ones that are tickable. The second stage is the Resolution stage, where each thread takes a number of systems and add and remove components from them.</p>\n\n<p>Anyways, after each phase I have each thread atomically increment a variable and busy wait until all of the threads have incremented that variable. Once both stages are complete, I follow the same pattern in reverse (decrement each and wait till zero), and signal the main thread that the threads are done with the current tick.</p>\n\n<p>Is there a better way to do this? Currently this causes a slowdown of about 17 ms with 8 threads, and I'd like to make it faster if possible.</p>\n\n<p>Below is my code. Please excuse the poor code quality; I've been poking and prodding at it and haven't cleaned it up (especially the memory_orders).</p>\n\n<pre><code>    void Engine::threadRun(uint64_t a_ThreadID)\n    {\n    m_Mutex.lock();\n    std::cerr &lt;&lt; \"Thread #\" &lt;&lt; a_ThreadID &lt;&lt; \" starting.\" &lt;&lt; std::endl;\n    m_Mutex.unlock();\n\n    while (m_State.load(std::memory_order_acq_rel) &gt; STOPPED)\n    {\n        if (m_State.load(std::memory_order_acq_rel) == RUNNING)\n        {\n            for (auto itr = m_Systems-&gt;begin(); itr != m_Systems-&gt;end(); ++itr)\n            {\n                auto a_system = itr-&gt;second;\n                if(a_system-&gt;isTickable())\n                {\n                    a_system-&gt;tick(m_ThreadCount, a_ThreadID, m_DT.load(std::memory_order_release));\n                }\n            }\n\n            // Wait until all threads are done to move onto the resolution phase\n            m_Mutex.lock();\n            m_TickStageCompleted.fetch_add(1, std::memory_order_release);\n            m_Mutex.unlock();\n            while(m_TickStageCompleted.load(std::memory_order_acquire) != m_ThreadCount);\n\n            size_t count = m_Systems-&gt;size() / m_ThreadCount + 1; // How many per thread\n            auto start_idx = count * a_ThreadID;\n            if (start_idx &lt; m_Systems-&gt;size())\n            {\n                // There's got to be a better way to start at a specific index in a map\n                // Maybe switch to two vectors with one storing the name and the other the system\n                auto index = m_Systems-&gt;begin();\n                std::advance(index, (start_idx));\n                auto end = index;\n\n                while(end != m_Systems-&gt;end() &amp;&amp; count)\n                {\n                    ++end;\n                    --count;\n                }\n\n                for (; index != end &amp;&amp; index != m_Systems-&gt;end(); ++index)\n                {\n                    index-&gt;second-&gt;resolve();\n                }\n            }\n            /**\n             * This section is super inefficient. I need to find a better way of doing this\n             **/\n            // Wait until resolutions are complete to continue\n            m_Mutex.lock();\n            m_ResolutionStageCompleted.fetch_add(1, std::memory_order_release);\n            m_Mutex.unlock();\n            while(m_ResolutionStageCompleted.load(std::memory_order_acquire) != m_ThreadCount);\n\n            // Signal the main thread that this run completed successfully\n            m_State.store(PAUSED, std::memory_order_release);\n\n            // Reset everything\n            m_Mutex.lock();\n            m_TickStageCompleted.fetch_sub(1);\n            m_Mutex.unlock();\n            while(m_TickStageCompleted.load(std::memory_order_release) != 0);\n\n            m_Mutex.lock();\n            m_ResolutionStageCompleted.fetch_sub(1);\n            m_Mutex.unlock();\n            while(m_ResolutionStageCompleted.load(std::memory_order_release) != 0);\n        }\n    }\n    m_Mutex.lock();\n    std::cerr &lt;&lt; \"Thread #\" &lt;&lt; a_ThreadID &lt;&lt; \" ending.\" &lt;&lt; std::endl;\n    m_Mutex.unlock();\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "abstract-class"], "comments": [{"owner": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 3, "creation_date": 1519838498, "post_id": 49035194, "comment_id": 85075250, "body": "virtual void bar(std::shared_ptr&lt; Concrete &gt;) doesn&#39;t match the base class one  virtual void bar(std::shared_ptr&lt; Interface &gt;), modify the concrete one to use std::shared_ptr&lt;Interface&gt; instead"}, {"owner": {"reputation": 13, "user_id": 8045347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62809ed1ca949d9b55a2e77858e79f37?s=128&d=identicon&r=PG&f=1", "display_name": "AlesG", "link": "https://stackoverflow.com/users/8045347/alesg"}, "reply_to_user": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 0, "creation_date": 1519838685, "post_id": 49035194, "comment_id": 85075378, "body": "Yes, that works! :)  So there is not a way to have an implementation of Concrete::bar that only accepts a pointer to Concrete?  Am I thinking it the wrong way?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 0, "creation_date": 1519838721, "post_id": 49035194, "comment_id": 85075398, "body": "@AlessandroTeruzzi Why are you answering in the comments section? This is not a chatroom"}], "answers": [{"tags": [], "owner": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "is_accepted": true, "score": 1, "last_activity_date": 1519839136, "creation_date": 1519839136, "answer_id": 49035422, "question_id": 49035194, "link": "https://stackoverflow.com/questions/49035194/creating-an-interface-and-a-concrete-class-and-using-them-in-a-vector-leads-to-a/49035422#49035422", "title": "Creating an Interface and a Concrete class and using them in a vector leads to a weird behavior when calling methods", "body": "<p>virtual void bar(std::shared_ptr&lt; Concrete >)</p>\n\n<p>Doesn't match the base class one.</p>\n\n<p>virtual void bar(std::shared_ptr&lt; Interface >)</p>\n\n<p>In order to have the correct polymorphic behavior you need to modify the concrete one to have the same signature. Modify it to std::shared_ptr&lt; Interface >. If you are using C++11 you can use the override keyword to make your intention explicit <a href=\"http://en.cppreference.com/w/cpp/language/override\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/override</a>. The compiler will notify the error to you if you are not overriding an existing virtual method.</p>\n"}], "owner": {"reputation": 13, "user_id": 8045347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62809ed1ca949d9b55a2e77858e79f37?s=128&d=identicon&r=PG&f=1", "display_name": "AlesG", "link": "https://stackoverflow.com/users/8045347/alesg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 49035422, "answer_count": 1, "score": 1, "last_activity_date": 1519839136, "creation_date": 1519838343, "last_edit_date": 1519838706, "question_id": 49035194, "link": "https://stackoverflow.com/questions/49035194/creating-an-interface-and-a-concrete-class-and-using-them-in-a-vector-leads-to-a", "title": "Creating an Interface and a Concrete class and using them in a vector leads to a weird behavior when calling methods", "body": "<p>I've been trying to implement an interface class (abstract class) in C++ and a few concrete classes based on it.</p>\n\n<p>It seems to work quite well, until I put them in a vector of <code>shared_ptr&lt;Interface&gt;</code> and try to call the methods on the elements.</p>\n\n<p>The methods without argument work as expected (i.e. the Concrete class methods is called), but for methods with an argument the Interface method is called instead.</p>\n\n<p>It's probably easier to explain through code, so here is a minimal example that shows it.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nclass Interface{\n  public:\n    virtual ~Interface() = 0;\n    virtual void foo(){\n      std::cout &lt;&lt; \"Interface::foo\" &lt;&lt; std::endl;\n    }\n    virtual void bar(std::shared_ptr&lt; Interface &gt;){\n      std::cout &lt;&lt; \"Interface::bar\" &lt;&lt; std::endl;\n    }\n};\nInterface::~Interface(){}\n\nclass Concrete: public Interface{\n  public:\n    virtual void foo(){\n      std::cout &lt;&lt; \"Concrete::foo\" &lt;&lt; std::endl;\n    }\n    virtual void bar(std::shared_ptr&lt; Concrete &gt;){\n      std::cout &lt;&lt; \"Concrete::bar\" &lt;&lt; std::endl;\n    }\n};\n\nint main(){\n  std::shared_ptr&lt; Concrete &gt; a = std::make_shared&lt; Concrete &gt;();\n  a-&gt;foo();\n  a-&gt;bar(a);\n  std::cout &lt;&lt; std::endl;\n\n  std::vector&lt; std::shared_ptr&lt; Interface &gt; &gt; vec{};  \n  vec.push_back( a );\n  vec[0]-&gt;foo();\n  vec[0]-&gt;bar(a);\n\n  return 0;\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>Concrete::foo\nConcrete::bar\n\nConcrete::foo\nInterface::bar\n</code></pre>\n\n<p>What am I doing wrong? Btw, the same happens even if I were to use an array with regular pointers</p>\n"}, {"tags": ["c++", "c++11", "opengl", "callback", "glut"], "owner": {"reputation": 2125, "user_id": 1354089, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61cbedb391e7a5b3efb279814a79f9a0?s=128&d=identicon&r=PG", "display_name": "johnco3", "link": "https://stackoverflow.com/users/1354089/johnco3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519844011, "creation_date": 1519838086, "last_edit_date": 1519844011, "question_id": 49035119, "link": "https://stackoverflow.com/questions/49035119/trampolining-a-non-static-c-member-as-a-registered-c-callback", "title": "Trampolining a non-static C++ member as a registered C callback", "body": "<p>I am writing a C++ <a href=\"http://freeglut.sourceforge.net/\" rel=\"nofollow noreferrer\">freeGlut 3.0.0</a> application. I am having trouble registering a <strong>generic</strong> callback signature (hopefully a function pointer template argument) with a <strong>non static member function</strong> that matches the signatures of the declared free-glut callbacks. </p>\n\n<p>To this end, with the help from <a href=\"https://stackoverflow.com/questions/4881896/using-a-c-class-member-function-cannot-be-static-as-a-c-callback-function\">this answer</a>, I put together a <a href=\"http://coliru.stacked-crooked.com/a/9fb9d0532708035d\" rel=\"nofollow noreferrer\">live Coliru working example</a> that demonstrates how to register a C++ non static method as a callback with a C application (in my case the freeGlut library).  A better C interface would allow a caller to specify an optional void* user parameter which would typically be bound to <code>this</code> as described <a href=\"https://stackoverflow.com/questions/2097738/how-to-pass-a-non-static-member-function-as-a-callback\">here</a>. \nFreeGlut does not allow provide a mechanism to do this in their <a href=\"http://freeglut.sourceforge.net/docs/api.php#GlobalCallback\" rel=\"nofollow noreferrer\">callback registration API</a>, so it seems that I need to use a trampolining technique that I am not very familiar with - especially when it comes to variadic parameter packs and such type_trait magic.</p>\n\n<p>My cobbled together example uses one specific callback signature <code>callback_t</code>.  The place where I need help is to allow a more generic callback templated type - perhaps the trampolining example <a href=\"http://freeglut.sourceforge.net/docs/api.php#GlobalCallback\" rel=\"nofollow noreferrer\">live coliru demo</a> could be adapted to make my example more generic but I am not sure how to get this working.  I suspect I need to change the <code>callback_t</code> to somehow allow variadic arguments and a templated return type but I don't know how.</p>\n\n<pre><code>using callback_t = std::add_pointer&lt;int(const char *, int)&gt;::type;\nusing MyFTWFunction = std::function&lt;void(unsigned char, int, int)&gt;;\n\ntemplate &lt;MyFTWFunction *callback&gt;\nclass callback_binder {\npublic:\n    static void trampoline(unsigned char key, int x, int y) {\n        return (*callback)(key, x, y);\n    }\n};\n\n// This matches the signature of the callbacks in freeGlut\nextern \"C\" {\n    // register the keyboard callback here\n    void glutKeyboardFunc(void(*callback)(unsigned char ch, int x, int y)) {\n        callback('S', 3, 4);\n    }\n    // register Reshape callback here\n    void glutReshapeFunc(void(*callback)(int, int)) {\n        callback(1, 2);\n    }\n    // register Display callback here\n    void glutDisplayFunc(void(*callback)(void)) {\n        callback();\n    }\n}\n</code></pre>\n\n<p>I need help making it more generic such that I can also register other callbacks.</p>\n"}, {"tags": ["c++", "header", "namespaces"], "comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1519838510, "post_id": 49035116, "comment_id": 85075259, "body": "You can use a tool like <code>objcopy</code> with <code>--redefine-sym</code> to rename the routines in a <code>.so</code>. I&#39;m not familiar enough with windows symbol remapping to be able to offer an option in that area."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1519839581, "post_id": 49035385, "comment_id": 85075933, "body": "<i>&quot;Sadly you can&#39;t force everyone to write C++.&quot;</i> Can&#39;t believe I said that"}, {"owner": {"reputation": 83, "user_id": 2109452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2293dda97d27f6a0f4ed92fb1f76456f?s=128&d=identicon&r=PG", "display_name": "dsula", "link": "https://stackoverflow.com/users/2109452/dsula"}, "edited": false, "score": 0, "creation_date": 1519849389, "post_id": 49035385, "comment_id": 85080944, "body": "If these libraries were C++ projects with namespaces, then you wouldn&#39;t have this problem. How is that? If they for example are both C++ USB libraries and both of them use the namespace &quot;USB&quot; you were in the same mess. I can&#39;t go and modify one libraries namespace to &quot;usbA&quot; for example, can I? I would have to go in and modify the actual source of the library to change the namespace. Again if I do that, I can as well just use old school prefixes instead of namespaces and edit the library that way. What do namespaces give me? I can&#39;t encapsulate a library the way I want it with it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83, "user_id": 2109452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2293dda97d27f6a0f4ed92fb1f76456f?s=128&d=identicon&r=PG", "display_name": "dsula", "link": "https://stackoverflow.com/users/2109452/dsula"}, "edited": false, "score": 0, "creation_date": 1519852423, "post_id": 49035385, "comment_id": 85082557, "body": "@dsula: Well, granted, if two libraries pick the <i>same</i> namespace name then you&#39;re back to square one, but sensible developers don&#39;t use such trivial names. If you have an alternative suggestion that somehow solves name conflicts universally for all cases both known and unknown, feel free to propose it to the standard committee, but otherwise to be honest it kind of seems like you&#39;re just complaining. What exactly <i>is</i> &quot;the way [you] want&quot;?"}, {"owner": {"reputation": 83, "user_id": 2109452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2293dda97d27f6a0f4ed92fb1f76456f?s=128&d=identicon&r=PG", "display_name": "dsula", "link": "https://stackoverflow.com/users/2109452/dsula"}, "edited": false, "score": 0, "creation_date": 1519854034, "post_id": 49035385, "comment_id": 85083403, "body": "No, I&#39;m not complaining :-). I&#39;m wondering. First time I use this namespace stuff and probably I&#39;m ignorant but for me it doesn&#39;t do what I would consider useful functionality. I can get the same functionality by adding a prefix to each library function and class name. But then again, I&#39;m not really a power C++ user. So maybe there are different advantages, which I don&#39;t see. Meanwhile I guess you answered my question: It&#39;s not possible to encapsulate a legacy library in a namespace without modifying said librarie&#39;s source code. Too bad."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83, "user_id": 2109452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2293dda97d27f6a0f4ed92fb1f76456f?s=128&d=identicon&r=PG", "display_name": "dsula", "link": "https://stackoverflow.com/users/2109452/dsula"}, "edited": false, "score": 0, "creation_date": 1519861480, "post_id": 49035385, "comment_id": 85086290, "body": "@dsula: <i>&quot;I can get the same functionality by adding a prefix to each library function and class name&quot;</i> Ish, but that&#39;s significantly more unwieldy, and doesn&#39;t give you any of the <i>scoping</i> and <i>name lookup</i> benefits."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1519839009, "creation_date": 1519839009, "answer_id": 49035385, "question_id": 49035116, "link": "https://stackoverflow.com/questions/49035116/include-old-library-in-c-namespace/49035385#49035385", "title": "include old library in C++ namespace", "body": "<blockquote>\n  <p>This leads to linker errors obviously because the names in the actual libraries are not decorated with the namespaces as are the function calls. Can this be solved without editing the libraries code? </p>\n</blockquote>\n\n<p>I'm sure there will be ghastly ways to hack this, but I would really just &hellip; not. In my opinion it's bound to end in tears.</p>\n\n<p>If you <em>really</em> need both libraries, and their names really conflict, I think on balance you're probably best off forking them and giving them namespaces yourself.</p>\n\n<blockquote>\n  <p>This begs the question of what are namespaces good for then?</p>\n</blockquote>\n\n<p>They're good for nothing <em>if you don't use them</em> (and C code obviously doesn't use them). If these libraries were C++ projects with namespaces, then you wouldn't have this problem, which is good for quite a lot.</p>\n\n<blockquote>\n  <p>It's equally inflexible</p>\n</blockquote>\n\n<p>Well, this is why C++ introduced namespaces. Sadly you can't force everyone to write C++.</p>\n"}], "owner": {"reputation": 83, "user_id": 2109452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2293dda97d27f6a0f4ed92fb1f76456f?s=128&d=identicon&r=PG", "display_name": "dsula", "link": "https://stackoverflow.com/users/2109452/dsula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 49035385, "answer_count": 1, "score": 1, "last_activity_date": 1519839009, "creation_date": 1519838082, "last_edit_date": 1519838830, "question_id": 49035116, "link": "https://stackoverflow.com/questions/49035116/include-old-library-in-c-namespace", "title": "include old library in C++ namespace", "body": "<p>I'm trying to use two old (and different) usb libraries in a bigger project by encapsulating them into their own namespace like so:</p>\n\n<pre><code>namespace usbA {\n#include \"/msp430/usb.h\"\n}\nnamespace usbB {\n#include \"/cypress/usb.h\"\n}\n</code></pre>\n\n<p>This leads to linker errors obviously because the names in the actual libraries are not decorated with the namespaces as are the function calls.\nCan this be solved without editing the libraries code?\nAccording to some other posters answers this cannot be done. This begs the question of what are namespaces good for then? If I have to go in and modify library source code I can as well prefix each function with \"usbA_\" instead of using namespace at all. It's equally inflexible.</p>\n"}, {"tags": ["c++", "function", "formula"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519838162, "post_id": 49035044, "comment_id": 85075047, "body": "I think maybe you&#39;re in need of looking up what a struct or class is  (but your question isn&#39;t very clear)"}, {"owner": {"reputation": 103, "user_id": 9424782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPiEn.jpg?s=128&g=1", "display_name": "mac_33", "link": "https://stackoverflow.com/users/9424782/mac-33"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519838739, "post_id": 49035044, "comment_id": 85075408, "body": "I haven&#39;t been taught struct or class, I&#39;m basically using the terms I&#39;ve been taught. How can I make it clear?"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 9424782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPiEn.jpg?s=128&g=1", "display_name": "mac_33", "link": "https://stackoverflow.com/users/9424782/mac-33"}, "edited": false, "score": 0, "creation_date": 1519840062, "post_id": 49035356, "comment_id": 85076170, "body": "Hi, thanks so much for the reply. The thing is I haven&#39;t really learnt struct and the IDE is telling me &quot;Variable has incomplete type &#39;struct SlopDistance&quot;. Do you know how I can fix that? Do I have to define SlopDistance?"}, {"owner": {"reputation": 1, "user_id": 6397939, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nwwfF6xWghE/AAAAAAAAAAI/AAAAAAAAAZ0/SoajwPuFmTI/photo.jpg?sz=128", "display_name": "Hassan Essam", "link": "https://stackoverflow.com/users/6397939/hassan-essam"}, "reply_to_user": {"reputation": 103, "user_id": 9424782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPiEn.jpg?s=128&g=1", "display_name": "mac_33", "link": "https://stackoverflow.com/users/9424782/mac-33"}, "edited": false, "score": 0, "creation_date": 1520136179, "post_id": 49035356, "comment_id": 85188976, "body": "i tried this code on GCC stander compiler, BTW you can use pass two values to a function by reference or you can return a pointer to array of two that can hold the two values you need  @mac_fan_33"}], "tags": [], "owner": {"reputation": 1, "user_id": 6397939, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nwwfF6xWghE/AAAAAAAAAAI/AAAAAAAAAZ0/SoajwPuFmTI/photo.jpg?sz=128", "display_name": "Hassan Essam", "link": "https://stackoverflow.com/users/6397939/hassan-essam"}, "is_accepted": false, "score": 0, "last_activity_date": 1519838905, "creation_date": 1519838905, "answer_id": 49035356, "question_id": 49035044, "link": "https://stackoverflow.com/questions/49035044/distance-and-slope-of-two-points-with-single-functions/49035356#49035356", "title": "Distance and slope of two points with single functions", "body": "<p>you can use the \"Struct\" in C this will define new datatype that can sotre two or more separate values as below code \n-- please if you have any questions \nCode is Here : </p>\n\n<p>/<em>Include statements</em>/</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n/*Given Prototypes*/\ndouble getX();\ndouble getY();\ndouble distance(double, double, double, double);\ndouble slope(double, double, double, double);\n\n// begin main\nint main()\n{\n    // declare variables\n    double x1;\n    double x2;\n    double y1;\n    double y2;\n\n    // read in variables for points on a graph\n    x1 = getX();\n    y1 = getY();\n    x2 = getX();\n    y2 = getY();\n\n    // print out the distance between the points and the slope of the line\n    struct SlopDistance FinalValues;\n    FinalValues = CalcuateValues(x1, y1, x2, y2);\n\n    printf(\"\\n\");\n    printf(\"Distance between the points is %.2f \\n\", FinalValues.Distance);\n    printf(\"Slope of the line is %.2f \\n\\n\", FinalValues.Distance);\n}\n\n/* begin getX function */\ndouble getX()\n{\n    double x;\n    printf(\"Please enter the value of x:\");\n    scanf_s(\"%lf\", &amp;x);\n    return x;\n}\n\n\n/* begin getY function */\ndouble getY()\n{\n    double y;\n    printf(\"Please enter the value of y:\");\n    scanf_s(\"%lf\", &amp;y);\n    return y;\n}\n\n/* header for distance function */\ndouble distance(double x1, double y1, double x2, double y2)\n{\n    return sqrt(pow(x2 - x1, 2) + pow(y2 - y1, 2));\n}\n\n\n/* header for slope function */\ndouble slope(double x1, double y1, double x2, double y2)\n{\n    return (y2 - y1) / (x2 - x1);\n}\n\nstruct SlopDistance\n{\n\n    double Slope;\n    double Distance\n};\n\nstruct SlopDistance CalcuateValues(double x1, double y1, double x2, double y2)\n{\n    struct SlopDistance FinalValue;\n    FinalValue.Distance = distance(x1, x2, y1, y2);\n    FinalValue.Slope = slope(x1, x2, y1, y2);\n    return FinalValue;\n}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9424782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPiEn.jpg?s=128&g=1", "display_name": "mac_33", "link": "https://stackoverflow.com/users/9424782/mac-33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 552, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519839024, "creation_date": 1519837817, "last_edit_date": 1519839024, "question_id": 49035044, "link": "https://stackoverflow.com/questions/49035044/distance-and-slope-of-two-points-with-single-functions", "title": "Distance and slope of two points with single functions", "body": "<p>I have this assignment that asks to use functions in order to calculate the distance and slope of two points. The thing is I don't really understand how I can use a single function for two separate variables(has to be done this way for the assignment). In this case, the formula asks for x1 and x2, but I have to use a single function. So my question is how can I use my getX and getY functions that prompts for x and y twice? Basically use a single function for both first and second values. Hope that makes more sense.</p>\n\n<pre><code>/*Include statements*/\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n/*Given Prototypes*/\ndouble getX();\ndouble getY();\ndouble distance(double, double, double, double);\ndouble slope(double, double, double, double);\n\n// begin main\nint main()\n{\n    // declare variables\n       double x1;\n       double x2;\n       double y1;\n       double y2;\n\n// read in variables for points on a graph\n       x1 = getX();\n       y1 = getY();\n       x2 = getX();\n       y2 = getY();\n\n// print out the distance between the points and the slope of the line\n      printf(\"\\n\");\n      printf(\"Distance between the points is %.2f \\n\", distance(x1, x2, y1, y2));\n      printf(\"Slope of the line is %.2f \\n\\n\", slope(x1, x2, y1, y2));\n}\n\n/* begin getX function */\ndouble getX()\n{\n    double x;\n    printf( \"Please enter the value of x:\");\n    scanf(\"%lf\", &amp;x);\n    return x;\n}\n\n\n/* begin getY function */\n    double getY()\n{\n    double y;\n    printf(\"Please enter the value of y:\");\n    scanf(\"%lf\", &amp;y);\n    return y;\n}\n\n/* header for distance function */\n    double distance(double x1, double y1, double x2, double y2)\n{\n    return sqrt(pow(x2 - x1, 2) + pow(y2 - y1, 2));\n}\n\n\n/* header for slope function */\n    double slope(double x1, double y1, double x2, double y2)\n{\n    return (y2 - y1) / (x2 - x1);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", ".net"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1519837979, "post_id": 49035041, "comment_id": 85074927, "body": "I wouldn&#39;t say that C or C++ is part of the .net framework - but that the framework would support them"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1519837980, "post_id": 49035041, "comment_id": 85074930, "body": "No. The .NET Framework is a bunch of classes(libraries) abstracting some lower-level windows functionality. C and C++ are languages."}, {"owner": {"reputation": 417, "user_id": 8543849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb0976ee4767a00fce7fee6106afdca2?s=128&d=identicon&r=PG&f=1", "display_name": "E. Epstein", "link": "https://stackoverflow.com/users/8543849/e-epstein"}, "edited": false, "score": 0, "creation_date": 1519838381, "post_id": 49035041, "comment_id": 85075179, "body": "OK, so does that mean that I can use C in the .NET framework (with C# libraries for example)?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1519838616, "post_id": 49035041, "comment_id": 85075328, "body": "Yes you can. But I would go with C#... C++ in the worst case."}, {"owner": {"reputation": 536, "user_id": 4881960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0970a38e2aa57cb1c119f8c1a9849fb?s=128&d=identicon&r=PG&f=1", "display_name": "freim", "link": "https://stackoverflow.com/users/4881960/freim"}, "edited": false, "score": 1, "creation_date": 1519839155, "post_id": 49035041, "comment_id": 85075681, "body": "C++ is not a part of .NET. Managed C++ is, and I am not sure if that can be called C++ in the first place."}, {"owner": {"reputation": 417, "user_id": 8543849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb0976ee4767a00fce7fee6106afdca2?s=128&d=identicon&r=PG&f=1", "display_name": "E. Epstein", "link": "https://stackoverflow.com/users/8543849/e-epstein"}, "edited": false, "score": 0, "creation_date": 1519839187, "post_id": 49035041, "comment_id": 85075697, "body": "What do you mean by &#39;in the worst case&#39;? Is it preferred to use a different language like VB?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 6, "creation_date": 1519839272, "post_id": 49035041, "comment_id": 85075749, "body": ".NET is analogous to JVM.  Microsoft&#39;s preferred languages for .NET are:  C#, VB.NET, and F#.  There are other languages that target .NET, just as there are languages like Kotlin, Clojure, and Scala that target JVM.  Getting C or C++ to interoperate with .NET is not easy, and unless you have a Really Good Reason, is not something I&#39;d recommend."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1519841079, "post_id": 49035041, "comment_id": 85076655, "body": "The link you give is for C and C++ with Visual Studio, but <i>not</i> for .NET. Microsoft has <i>yet another language</i>, confusingly called C++/CLI, that is for .NET. See <a href=\"https://docs.microsoft.com/sv-se/cpp/dotnet/dotnet-programming-with-cpp-cli-visual-cpp\" rel=\"nofollow noreferrer\">.NET Programming with C++/CLI</a>. As far as I know, people only use that when they <i>have to</i>. Otherwise use C# if you want .NET"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1519850035, "post_id": 49035041, "comment_id": 85081293, "body": "Microsoft has also made it quite clear in online postings that they do not intend to support modern C language features that are not present in C++, so they don&#39;t really even make a modern C compiler. They make a compiler for a C-like language that is a subset of C++."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1519840728, "creation_date": 1519840728, "answer_id": 49035821, "question_id": 49035041, "link": "https://stackoverflow.com/questions/49035041/is-c-a-part-of-the-net-framework/49035821#49035821", "title": "Is C a part of the .NET framework?", "body": "<p>C and C++ are both low level, you can always write code in C and C++ that would work with other languages. The main language for the .NET I think is C#. I don't think it's necessary for you to write C++ code for a .NET project. And if you had to, then you wouldn't need to ask this, because you would know that your question doesn't even make sense. Of course, since you don't know your question is ok.</p>\n\n<p>So in a sense, <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> and <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> are part of everything, and you can always write code in low level languages with interfaces for higher level ones like <a href=\"/questions/tagged/c%23\" class=\"post-tag\" title=\"show questions tagged &#39;c#&#39;\" rel=\"tag\">c#</a> with <a href=\"/questions/tagged/.net\" class=\"post-tag\" title=\"show questions tagged &#39;.net&#39;\" rel=\"tag\">.net</a> support. But that is quite specialized and is rarely needed.</p>\n"}, {"tags": [], "owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "is_accepted": true, "score": 1, "last_activity_date": 1519841294, "creation_date": 1519841294, "answer_id": 49035959, "question_id": 49035041, "link": "https://stackoverflow.com/questions/49035041/is-c-a-part-of-the-net-framework/49035959#49035959", "title": "Is C a part of the .NET framework?", "body": "<p>.NET Framework is an object oriented programming framework meant to be used with languages that it provides bindings for. Since C is not an object oriented language it wouldn't make sense to use it with the framework. Microsoft does provide <a href=\"https://en.wikipedia.org/wiki/C%2B%2B/CLI\" rel=\"nofollow noreferrer\">its own version of C++</a> (that is incompatible with standard C++) to be used with the .NET Framework.</p>\n"}], "owner": {"reputation": 417, "user_id": 8543849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb0976ee4767a00fce7fee6106afdca2?s=128&d=identicon&r=PG&f=1", "display_name": "E. Epstein", "link": "https://stackoverflow.com/users/8543849/e-epstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "closed_date": 1519844776, "accepted_answer_id": 49035959, "answer_count": 2, "score": 1, "last_activity_date": 1519841294, "creation_date": 1519837803, "question_id": 49035041, "link": "https://stackoverflow.com/questions/49035041/is-c-a-part-of-the-net-framework", "closed_reason": "Not suitable for this site", "title": "Is C a part of the .NET framework?", "body": "<p>I've searched the net for this, but I couldn't really find an answer. I've found this though: \n<a href=\"https://msdn.microsoft.com/en-us/library/hh875057.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/hh875057.aspx</a></p>\n\n<p>It says that C++ is a part of the .NET framework, and the headline writes \"C/C++\", but there wasn't much about C, so I wasn't able to understand if it is or not.</p>\n"}, {"tags": ["c++", "friend"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1519837819, "post_id": 49035022, "comment_id": 85074834, "body": "<code>A</code> is an <i>incomplete type</i> at that point, so the compiler doesn&#39;t know its size."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1519837864, "post_id": 49035022, "comment_id": 85074865, "body": "A should be forward-declared and defined before B. Then it&#39;ll work."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 1, "creation_date": 1519837906, "post_id": 49035022, "comment_id": 85074891, "body": "Revert your classes order and make forward declaration of the class B instead of A."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1519837907, "post_id": 49035022, "comment_id": 85074892, "body": "You cannot store a concrete instance of <code>A</code> without knowing its definition (and therefore its size).  Flip your declarations around and forward declare <code>B</code>, since you can store a pointer to <code>B</code> without needing the whole class definition."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1519837951, "post_id": 49035022, "comment_id": 85074919, "body": "You can&#39;t declare <code>A a</code> after a forward declaration alone: the type must be completely defined to be used like that."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1519838157, "post_id": 49035022, "comment_id": 85075040, "body": "It&#39;s not clear why you need <code>friend class A;</code> Nothing in <code>A</code> is accessing the <code>private</code> parts of <code>B</code>."}], "owner": {"reputation": 1021, "user_id": 2137370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b92c5a40d0a2e92ce33b9ed6ca876a4f?s=128&d=identicon&r=PG", "display_name": "evolved", "link": "https://stackoverflow.com/users/2137370/evolved"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1519839256, "answer_count": 0, "score": 0, "last_activity_date": 1519837740, "creation_date": 1519837740, "question_id": 49035022, "link": "https://stackoverflow.com/questions/49035022/forward-declaration-friend", "closed_reason": "Duplicate", "title": "Forward declaration friend", "body": "<p>I have two classes A and B, where I would like to access the private members of B from A. </p>\n\n<pre><code>class A; // Forward declaration    \n\nclass B {\n    friend class A; // A is a friend of B\n\n    A a; // error: 'B::a' uses undefined class 'A'\nprivate:\n    int i;\n};\n\nclass A {\n\npublic:\n    B *m_b;\n\n    A(B *i_b) : m_b(i_b) {}; // legal access due to friendship\n};\n</code></pre>\n\n<p>However, I do not understand why I get the following error:\n'B::a' uses undefined class 'A'</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1519837580, "post_id": 49034760, "comment_id": 85074708, "body": "one could argue if it is a good thing, but in principle <code>A::operator==(B)</code> can do something completely different than <code>B::operator==(A)</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1519837738, "post_id": 49034760, "comment_id": 85074793, "body": "also in general <code>a &lt; b</code> is not the same as <code>b &gt;= a</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519838114, "post_id": 49034760, "comment_id": 85075014, "body": "<code>&lt;</code> implies an ordering, while <code>&gt;=</code> also implies an equality, which is a stronger condition."}, {"owner": {"reputation": 1515, "user_id": 6156470, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/acc632c41c1f25791da16ca3093e80f8?s=128&d=identicon&r=PG&f=1", "display_name": "John Z. Li", "link": "https://stackoverflow.com/users/6156470/john-z-li"}, "edited": false, "score": 0, "creation_date": 1519888170, "post_id": 49034760, "comment_id": 85093402, "body": "Overloading operator == in this case, IMHO, should be considered harmful. Since A and B are different types, a==b should never hold (the code compiles, sure. it is syntactically correct code). Adding a to_A() method to class B would be a better solution, and write code like if(a==b.to_A())..."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1519838225, "creation_date": 1519838225, "answer_id": 49035162, "question_id": 49034760, "link": "https://stackoverflow.com/questions/49034760/implicit-commutativity-of-operator-overloading/49035162#49035162", "title": "Implicit commutativity of operator overloading", "body": "<p>No, it won't do either. There's nothing special about overloaded operators; they're just overloaded functions with funny-looking syntax. So <code>a == b</code> in the code above is <strong>nothing more than</strong> a call to <code>a.operator==(const B&amp;)</code>.</p>\n\n<p>The reason that <code>b == a</code> fails, of course, is that there is no <code>b.operator==(const A&amp;)</code> (and, similarly, no global operator).</p>\n\n<p>The usual way to deal with this issue is to have a <strong>global</strong> <code>operator==</code> rather than a member: <code>bool operator==(const A&amp;, const B&amp;)</code>, and another <strong>global</strong> <code>operator==</code> that goes the other way: <code>bool operator==(const B&amp;, const A&amp;)</code>; if the comparison is, in fact, symmetric, then the second one can be trivially implemented by calling the first: <code>bool operator==(const B&amp; b, const A&amp; a) { return a == b; }</code>.</p>\n\n<p>The same principle applies to <code>operator&lt;</code>: it doesn't go the other way, and if you want one that does, you have to write it.</p>\n\n<p>(small print: please ignore -- there is <code>std::relops</code> (spell-correction wants to change \"relops\" to \"relapse\") that will provide these variants; don't use it; it's far too invaisve.)</p>\n"}], "owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 1, "accepted_answer_id": 49035162, "answer_count": 1, "score": 2, "last_activity_date": 1519838731, "creation_date": 1519836895, "last_edit_date": 1519838731, "question_id": 49034760, "link": "https://stackoverflow.com/questions/49034760/implicit-commutativity-of-operator-overloading", "title": "Implicit commutativity of operator overloading", "body": "<p>In C++, operators can be overloaded. If I have two classes <code>A</code> and <code>B</code> and for instance I can overload <code>operator ==</code> in class <code>A</code> for comparison with an instance of <code>B</code>:</p>\n\n<pre><code>class A {\n    // Some attributes, methods\npublic:\n    bool operator ==(const B &amp;b) {\n        // Implementation of operator ==\n    }\n}\n</code></pre>\n\n<p>then I can run code like:</p>\n\n<pre><code>A a;\nB b;\n\nif(a == b) {\n    // Some code\n}\n</code></pre>\n\n<p>However, if I write <code>b == a</code>, the compiler will look for\n<code>bool operator ==(const A &amp;a)</code> in class B. If it is not found, is there a default behavior in C++ normalization? Will the compiler, whatever it is, exit on failure or run <code>bool operator ==(const B &amp;b)</code> instead?</p>\n\n<p>And even better, if it does not find <code>operator &lt; ()</code> in class <code>B</code>, will it attempt <code>operator &gt;=()</code> in class <code>A</code>?</p>\n"}, {"tags": ["c++", "multithreading", "zeromq"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8635796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gexrc.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8635796/matt"}, "edited": false, "score": 0, "creation_date": 1519914408, "post_id": 49040669, "comment_id": 85108038, "body": "So what you&#39;re saying is to try setting the PUB_IP in the connectToPublisher function on the Ubuntu machine to 10.10.10.200? I&#39;ll give it a try and let you know how it goes."}, {"owner": {"reputation": 19, "user_id": 8635796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gexrc.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8635796/matt"}, "edited": false, "score": 0, "creation_date": 1519916417, "post_id": 49040669, "comment_id": 85109396, "body": "Program not completely working, but wireshark is showing messages going back and forth so I&#39;m going to mark this question answered. If you&#39;re interested in continuing to help, the issue is zmq_recv is returning -1 and zmq_errno is returning EAGAIN"}, {"owner": {"reputation": 19, "user_id": 8635796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gexrc.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8635796/matt"}, "edited": false, "score": 0, "creation_date": 1519918231, "post_id": 49040669, "comment_id": 85110768, "body": "Got it working 100%. Not sure why, but zmq_recv in don&#39;t wait mode was not receiving the messages. Once we took that off, it all started working."}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": true, "score": 0, "last_activity_date": 1519862777, "creation_date": 1519862777, "answer_id": 49040669, "question_id": 49034756, "link": "https://stackoverflow.com/questions/49034756/zmq-messages-not-being-received/49040669#49040669", "title": "ZMQ messages not being received", "body": "<h2>Ok, this has nothing to do with signalling / messaging framework</h2>\n\n<p>Your Ubuntu code instructs the ZeroMQ <code>Context()</code>-instance engine to create a new <code>SUB</code>-socket instance and next the code insist this socket to try to <strong><code>_connect()</code></strong> ( to setup a <code>tcp://</code> transport-class connection towards the peering counterparty ) to \"opposite\" access-point, sitting on an address of the Ubuntu <code>localhost:port#</code> that was setup as <strong><code>10.10.10.15:5556</code></strong>, while the intended <strong><code>PUB</code></strong>-side archetype access-point actually lives not on this Ubuntu machine, but on another, Windows host, <code>IP:port#</code> of which is <strong><code>10.10.10.200:5556</code></strong></p>\n\n<p>This seems to be the root-cause of the problem, so change it accordingly to match the physical layout and you may get the toys work.</p>\n"}], "owner": {"reputation": 19, "user_id": 8635796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gexrc.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8635796/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 2, "accepted_answer_id": 49040669, "answer_count": 1, "score": 1, "last_activity_date": 1519862777, "creation_date": 1519836891, "last_edit_date": 1519845399, "question_id": 49034756, "link": "https://stackoverflow.com/questions/49034756/zmq-messages-not-being-received", "title": "ZMQ messages not being received", "body": "<p>Please forgive me if I'm missing something simple, this is my first time doing anything with messaging and I inherited this codebase from someone else.</p>\n\n<p>I am trying to send a message from a windows machine with an IP of 10.10.10.200 to an Ubuntu machine with an IP of 10.10.10.15.</p>\n\n<p>I got the following result when running TCPView from the Windows machine, which makes me suspect that the problem lies in the Ubuntu machine. If I'm reading that right, then my app on the windows machine has created a connection on port 5556 which is what it is supposed to do. In case I'm wrong, I'll include the windows code too.</p>\n\n<pre><code>my_app.exe  5436    TCP MY_COMPUTER 5556    MY_COMPUTER 0   LISTENING                                       \n</code></pre>\n\n<p>Windows app code:</p>\n\n<pre><code>    void \n    NetworkManager::initializePublisher()\n    {\n        globalContext = zmq_ctx_new();\n\n        globalPublisher = zmq_socket(globalContext, ZMQ_PUB);\n\n        string protocol = \"tcp://*:\";\n        string portNumber = PUBLISHING_PORT; //5556\n        string address = protocol + portNumber;\n        char *address_ptr = new char[address.size() + 1];\n        strncpy_s(address_ptr, address.size() + 1, address.c_str(), address.size());\n\n        int bind_res = zmq_bind(globalPublisher, address_ptr);\n        if (bind_res != 0)\n        {\n            cerr &lt;&lt; \"FATAL: couldn't bind to port[\" &lt;&lt; portNumber &lt;&lt; \"] and protocol [\" &lt;&lt; protocol &lt;&lt; \"]\" &lt;&lt; endl;\n\n        }\n        cout &lt;&lt; \" Connection: \" &lt;&lt; address &lt;&lt; endl;\n    }\n\nvoid \nNetworkManager::publishMessage(MESSAGE msgToSend)\n{\n\n    // Get the size of the message to be sent\n    int sizeOfMessageToSend = MSG_MAX_SIZE;//sizeof(msgToSend);\n\n    // Copy IDVS message to buffer\n    char buffToSend[MSG_MAX_SIZE] = \"\";\n\n    // Pack the message id\n    size_t indexOfId = MSG_ID_SIZE + 1;\n    size_t indexOfName = MSG_NAME_SIZE + 1;\n    size_t indexOfdata = MSG_DATABUFFER_SIZE + 1;\n\n    memcpy(buffToSend, msgToSend.get_msg_id(), indexOfId - 1);\n\n    // Pack the message name\n    memcpy(buffToSend + indexOfId, msgToSend.get_msg_name(), indexOfName - 1);\n\n    // Pack the data buffer\n    memcpy(buffToSend + indexOfId + indexOfName, msgToSend.get_msg_data(), indexOfdata - 1);\n\n// Send message\n    int sizeOfSentMessage = zmq_send(globalPublisher, buffToSend, MSG_MAX_SIZE, ZMQ_DONTWAIT);\n\n    getSubscriptionConnectionError();\n\n    // If message size doesn't match, we have an issue, otherwise, we are good\n    if (sizeOfSentMessage != sizeOfMessageToSend)\n    {\n        int errorCode = zmq_errno();\n        cerr &lt;&lt; \"FATAL: couldn't not send message.\" &lt;&lt; endl;\n        cerr &lt;&lt; \"ERROR: \" &lt;&lt; errorCode &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>I can include more of this side's code if you think it's needed, but the error is popping up on the Ubuntu side, so I'm going to focus there. </p>\n\n<p>The problem is when I call zmq_recv it returns -1 and when I check zmq_errno I get EAGAIN (Non-blocking mode was requested and no messages are available at the moment.) I also checked with netstat and I didn't see anything on port 5556</p>\n\n<p>First is the function to connect to the publisher, then the function to get data, followed by main.\nUbuntu side code:</p>\n\n<pre><code>void\n*connectoToPublisher()\n{\n    void *context = zmq_ctx_new();\n    void *subscriber = zmq_socket(context, ZMQ_SUB);\n\n    string protocol = \"tcp://\";\n    string ipAddress = PUB_IP;      //10.10.10.15\n    string portNumber = PUB_PORT;  // 5556\n    string address = protocol + ipAddress + \":\" + portNumber;\n    cout &lt;&lt; \"Address: \" &lt;&lt; address &lt;&lt; endl;\n\n    char *address_ptr = new char[address.size() + 1];\n    strcpy(address_ptr, address.c_str());\n\n    // ------ Connect to Publisher ------\n    bool isConnectionEstablished = false;\n    int connectionStatus;\n    while (isConnectionEstablished == false)\n    {\n        connectionStatus = zmq_connect(subscriber, address_ptr);\n\n        switch (connectionStatus)\n        {\n        case 0: //we are good.\n            cout &lt;&lt; \"Connection Established!\" &lt;&lt; endl;\n            isConnectionEstablished = true;\n            break;\n        case -1:\n            isConnectionEstablished = false;\n            cout &lt;&lt; \"Connection Failed!\" &lt;&lt; endl;\n            getSubscriptionConnectionError();\n            cout &lt;&lt; \"Trying again in 5 seconds...\" &lt;&lt; endl;\n            break;\n        default:\n            cout &lt;&lt; \"Hit default connecting to publisher!\" &lt;&lt; endl;\n            break;\n        }\n\n        if (isConnectionEstablished == true)\n        {\n            break;\n        }\n        sleep(5); // Try again\n    }\n\n    // by the time we get here we should have connected to the pub\n    return subscriber;\n}\n\nstatic void *\ngetData(void *subscriber)\n{\n    const char *filter = \"\"; // Get all messages\n    int subFilterResult = zmq_setsockopt(subscriber, ZMQ_SUBSCRIBE, filter, strlen(filter));\n    // ------ Get in main loop ------\n    while (1)\n    {\n        //get messages from publisher\n        char bufferReceived[MSG_MAX_SIZE] = \"\";\n        size_t expected_messageSize = sizeof(bufferReceived);\n        int actual_messageSize = zmq_recv(subscriber, bufferReceived, MSG_MAX_SIZE, ZMQ_DONTWAIT);\n\n        if (expected_messageSize == actual_messageSize)\n        {\n            MESSAGE msg = getMessage(bufferReceived); //Uses memcpy to copy id, name, and data strutct data from buffer into struct of MESSAGE\n        if (strcmp(msg.get_msg_id(), \"IDXY_00000\") == 0)\n        {\n            DATA = getData(msg); //Uses memcpy to copy data from buffer into struct of DATA\n        }\n    } else\n\n        {\n            // Something went wrong\n            getReceivedError(); //This just calls zmq_errno and cout the error\n        }\n        usleep(1);\n    }\n    }\n\nint main (int argc, char*argv[])\n{\n//Doing some stuff...\n\nvoid *subscriber_socket = connectoToHeadTrackerPublisher();\n\n// Initialize Mux Lock\n\npthread_mutex_init(&amp;receiverMutex, NULL);\n\n// Initializing some variables...\n\n// Launch Thread to get updates from windows machine\npthread_t publisherThread;\npthread_create(&amp;publisherThread,\n        NULL, getData, subscriber_socket);\n\n// UI stuff\n\nzmq_close(subscriber_socket);\nreturn 0;\n}\n</code></pre>\n\n<p>If you cannot provide a solution, then I will accept identifying the problem as a solution. My main issue is that I don't have the knowledge or experience with messaging or networking to correctly identify the issue. Typically if I know what is wrong, I can fix it.</p>\n"}, {"tags": ["c++", "windows", "compilation"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1519837407, "post_id": 49034737, "comment_id": 85074590, "body": "AFAIK DevC++ is an IDE, not a compiler."}, {"owner": {"reputation": 3, "user_id": 9396383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23c262df8954c9aa9444b36146ec4a57?s=128&d=identicon&r=PG&f=1", "display_name": "C. Parzyck", "link": "https://stackoverflow.com/users/9396383/c-parzyck"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1519936167, "post_id": 49034737, "comment_id": 85121071, "body": "Apologies, more specificity I meant MinGW.  What I was getting at was that the current compile &amp; deploy process is that someone compiles all the binaries in the IDE, separately, by hand and then distributes them; so when an update is made the source code it&#39;s someone&#39;s job to go through every computer in the lab and recompile  each piece in the IDE and replace the binaries with new ones."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 2139902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0050129417b8d5d74968630b13da64c?s=128&d=identicon&r=PG", "display_name": "Sean Burton", "link": "https://stackoverflow.com/users/2139902/sean-burton"}, "edited": false, "score": 0, "creation_date": 1519838160, "post_id": 49034791, "comment_id": 85075045, "body": "Ninja build files are not designed to be written directly, they are intended to be generated by another build system (such as CMake)"}, {"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 1, "creation_date": 1519838737, "post_id": 49034791, "comment_id": 85075406, "body": "+1 for CMake. On windows you can use it to generate Visual Studio project files, and I assume the Visual Studio documentation has steps to build via cli."}, {"owner": {"reputation": 3, "user_id": 9396383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23c262df8954c9aa9444b36146ec4a57?s=128&d=identicon&r=PG&f=1", "display_name": "C. Parzyck", "link": "https://stackoverflow.com/users/9396383/c-parzyck"}, "reply_to_user": {"reputation": 693, "user_id": 2139902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0050129417b8d5d74968630b13da64c?s=128&d=identicon&r=PG", "display_name": "Sean Burton", "link": "https://stackoverflow.com/users/2139902/sean-burton"}, "edited": false, "score": 0, "creation_date": 1519937187, "post_id": 49034791, "comment_id": 85121607, "body": "Thanks @SeanBurton . I&#39;ll take a look at the Cmake documenation; It&#39;s been a very long time since I&#39;ve used it but I think it&#39;s probably my best bet."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 2, "last_activity_date": 1519984291, "last_edit_date": 1519984291, "creation_date": 1519836995, "answer_id": 49034791, "question_id": 49034737, "link": "https://stackoverflow.com/questions/49034737/moving-away-from-devc-to-command-line-compiling/49034791#49034791", "title": "Moving away from DevC++ to command line compiling", "body": "<p>Assume that you have a C++ compiler usable on the command line, on one translation unit. For example, <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> is such a compiler (and <a href=\"https://en.wikipedia.org/wiki/MinGW\" rel=\"nofollow noreferrer\">mingw</a> is or contains a variant of GCC). Assume also that it is capable of linking (e.g. by driving the system <a href=\"https://en.wikipedia.org/wiki/Linker_(computing)\" rel=\"nofollow noreferrer\">linker</a>).</p>\n\n<p>Then you need to use some <a href=\"https://en.wikipedia.org/wiki/Build_automation\" rel=\"nofollow noreferrer\">build automation</a> tool to drive such compilation commands. For example <a href=\"https://www.gnu.org/software/make/\" rel=\"nofollow noreferrer\">GNU make</a> or <a href=\"http://ninja-build.org/\" rel=\"nofollow noreferrer\">ninja</a> (but there are many others). AFAIK they exist on Windows (so you could port your <code>Makefile</code> on Linux to Windows).</p>\n\n<p>Once you have chosen your build automation tool, studied its documentation and understood how to use it, you'll write the relevant configuration file for it. For <code>make</code>, you'll write a <code>Makefile</code> (caveat : <kbd>tab</kbd> characters are significant). For <code>ninja</code>, you'll write some <code>build.ninja</code> files (but you'll probably generate it, perhaps with <a href=\"http://mesonbuild.com/\" rel=\"nofollow noreferrer\">meson</a>).</p>\n\n<p>Notice that some build tools (e.g. <a href=\"http://cmake.org/\" rel=\"nofollow noreferrer\">cmake</a>) are cross-platform.</p>\n\n<p>BTW, <a href=\"http://orwelldevcpp.blogspot.fr/\" rel=\"nofollow noreferrer\">DevC++</a> is an IDE, not a compiler.</p>\n"}], "owner": {"reputation": 3, "user_id": 9396383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23c262df8954c9aa9444b36146ec4a57?s=128&d=identicon&r=PG&f=1", "display_name": "C. Parzyck", "link": "https://stackoverflow.com/users/9396383/c-parzyck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 49034791, "answer_count": 1, "score": 0, "last_activity_date": 1519984291, "creation_date": 1519836831, "question_id": 49034737, "link": "https://stackoverflow.com/questions/49034737/moving-away-from-devc-to-command-line-compiling", "title": "Moving away from DevC++ to command line compiling", "body": "<p>I've inherited a large volume of C++ code for running &amp; monitoring laboratory equipment.  Currently the deployment is managed by compiling all of the individual modules (each it's own program) using DevC++, manually moving all the .exe files to a Dropbox folder, and then running them on the host machine manually.</p>\n\n<p>I'm trying to automate this process somewhat to make rolling out an implementation on a new machine simpler and making sure the most up to date binaries are what is running on any given machine quickly.  However, I don't know anything about deploying software in a Windows environment (I'm used to working on linux systems where a simple makefile would suffice)  What tools (preferably command line) are available to compile &amp; organize binaries in a portable way on windows systems?</p>\n"}, {"tags": ["c++", "std"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1519837076, "post_id": 49034732, "comment_id": 85074372, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 19, "user_id": 3293026, "user_type": "registered", "profile_image": "https://graph.facebook.com/556871113/picture?type=large", "display_name": "James Newnorth", "link": "https://stackoverflow.com/users/3293026/james-newnorth"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1519837164, "post_id": 49034732, "comment_id": 85074430, "body": "How do I delete this question? Obviously I must invert the test so that when the evaluation is false, it will fire off the error."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1519837359, "post_id": 49034732, "comment_id": 85074553, "body": "Is there not a button labelled &quot;delete&quot;?"}, {"owner": {"reputation": 19, "user_id": 3293026, "user_type": "registered", "profile_image": "https://graph.facebook.com/556871113/picture?type=large", "display_name": "James Newnorth", "link": "https://stackoverflow.com/users/3293026/james-newnorth"}, "edited": false, "score": 0, "creation_date": 1519837407, "post_id": 49034732, "comment_id": 85074589, "body": "No, I probably have too low reputation for that."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1519837584, "post_id": 49034732, "comment_id": 85074710, "body": "Look at the bottom of your post: <b>share</b> <b>edit</b> <b>close</b> <b>delete</b> <b>flag</b> You will need to click <b>delete</b>"}, {"owner": {"reputation": 19, "user_id": 3293026, "user_type": "registered", "profile_image": "https://graph.facebook.com/556871113/picture?type=large", "display_name": "James Newnorth", "link": "https://stackoverflow.com/users/3293026/james-newnorth"}, "edited": false, "score": 0, "creation_date": 1519837818, "post_id": 49034732, "comment_id": 85074833, "body": "Well, there we go. World&#39;s smallest links with low contrast. Either way, I may not delete since too many has been active in the thread."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 3293026, "user_type": "registered", "profile_image": "https://graph.facebook.com/556871113/picture?type=large", "display_name": "James Newnorth", "link": "https://stackoverflow.com/users/3293026/james-newnorth"}, "is_accepted": false, "score": 1, "last_activity_date": 1519837281, "creation_date": 1519837281, "answer_id": 49034881, "question_id": 49034732, "link": "https://stackoverflow.com/questions/49034732/stdis-array-returning-true-when-it-should-be-returning-false/49034881#49034881", "title": "std::is_array returning true when it should be returning false?", "body": "<p>Obviously I need to invert the condition statement, as it will fire off the error when the evaluation is false, rather than true.</p>\n"}], "owner": {"reputation": 19, "user_id": 3293026, "user_type": "registered", "profile_image": "https://graph.facebook.com/556871113/picture?type=large", "display_name": "James Newnorth", "link": "https://stackoverflow.com/users/3293026/james-newnorth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519837463, "creation_date": 1519836822, "last_edit_date": 1519837463, "question_id": 49034732, "link": "https://stackoverflow.com/questions/49034732/stdis-array-returning-true-when-it-should-be-returning-false", "title": "std::is_array returning true when it should be returning false?", "body": "<p>I've created a static assertion in order to make sure I don't call my helper function which creates a unique pointer (it's part of my memory debugging code).</p>\n\n<p>The problem I face is that the assertion seems to go off when <code>T</code> isn't an array.</p>\n\n<p><strong>The function:</strong></p>\n\n<pre><code>template&lt;class T&gt; n::c_uptr&lt;T&gt; mem::make_unique() {\n    static_assert(std::is_array_v&lt;T&gt;, \"T must not be an array.\");\n\n    return n::c_uptr&lt;T&gt;(nullptr, [](T * pv_object) { });\n}\n</code></pre>\n\n<p><strong>The function call:</strong></p>\n\n<pre><code>private: a_row_uptr iv_row = n::mem::make_unique&lt;a_row&gt;();\n</code></pre>\n\n<p><code>a_row</code> is an abstract class, and I've also tried with <code>!std::is_abstract_v&lt;T&gt; &amp;&amp; std::is_array_v&lt;T&gt;</code>.</p>\n\n<pre><code>3&gt;class_method_definitions\\mem.h(122): error C2338: T must not be an array.\n3&gt;class_definitions\\db\\a_result.h(6): note: see reference to function template instantiation 'std::unique_ptr&lt;n::db::a_row,std::function&lt;void (_Ty *)&gt;&gt; n::mem::make_unique&lt;n::db::a_row&gt;(void)' being compiled\n3&gt;        with\n3&gt;        [\n3&gt;            _Ty=n::db::a_row\n3&gt;        ]\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "sockets", "network-programming", "memory-model"], "comments": [{"owner": {"reputation": 1871, "user_id": 1395057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a89ccf94e8ba07a5e9cff20fcd60d649?s=128&d=identicon&r=PG", "display_name": "ndkrempel", "link": "https://stackoverflow.com/users/1395057/ndkrempel"}, "edited": false, "score": 0, "creation_date": 1519836649, "post_id": 49034629, "comment_id": 85074072, "body": "It would also be interesting if someone knows whether this point is addressed by the C++ TS Extensions for Networking (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4711.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4711.pdf</a>). Can&#39;t see anything relevant there on first browsing."}, {"owner": {"reputation": 1871, "user_id": 1395057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a89ccf94e8ba07a5e9cff20fcd60d649?s=128&d=identicon&r=PG", "display_name": "ndkrempel", "link": "https://stackoverflow.com/users/1395057/ndkrempel"}, "edited": false, "score": 0, "creation_date": 1519904339, "post_id": 49034629, "comment_id": 85101904, "body": "Related: <a href=\"https://stackoverflow.com/questions/10698253/is-function-call-an-effective-memory-barrier-for-modern-platforms\" title=\"is function call an effective memory barrier for modern platforms\">stackoverflow.com/questions/10698253/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1871, "user_id": 1395057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a89ccf94e8ba07a5e9cff20fcd60d649?s=128&d=identicon&r=PG", "display_name": "ndkrempel", "link": "https://stackoverflow.com/users/1395057/ndkrempel"}, "edited": false, "score": 0, "creation_date": 1519838002, "post_id": 49035029, "comment_id": 85074941, "body": "Do you think making <code>a</code> a <code>std::atomic&lt;int&gt;</code> initialized to <code>0</code> is enough to guarantee <code>42</code> will be read? I don&#39;t see how using an atomic provides sufficient visibility guarantees (beyond the mandated &quot;visible in a reasonable amount of time&quot;). Reference: 29.3&#182;12 in N4604, <code>Implementations should make atomic stores visible to atomic loads within a reasonable amount of time.</code>."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 1871, "user_id": 1395057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a89ccf94e8ba07a5e9cff20fcd60d649?s=128&d=identicon&r=PG", "display_name": "ndkrempel", "link": "https://stackoverflow.com/users/1395057/ndkrempel"}, "edited": false, "score": 0, "creation_date": 1519838238, "post_id": 49035029, "comment_id": 85075097, "body": "No, you will need to set the <code>std::atomic&lt;int&gt;</code> to 42 somewhere. But yeah, atomics do not GUARANTEE that either, I will delete the answer, as it&#39;s missleading. There is no way to guarantee what you want, as far as I&#39;m aware."}, {"owner": {"reputation": 1871, "user_id": 1395057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a89ccf94e8ba07a5e9cff20fcd60d649?s=128&d=identicon&r=PG", "display_name": "ndkrempel", "link": "https://stackoverflow.com/users/1395057/ndkrempel"}, "edited": false, "score": 0, "creation_date": 1519838275, "post_id": 49035029, "comment_id": 85075121, "body": "Feel free to edit your answer to include this discussion. I think it&#39;s still useful even if it doesn&#39;t fully answer the original question. (I was assuming the assignment <code>a = 42</code> is still present.)"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 1871, "user_id": 1395057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a89ccf94e8ba07a5e9cff20fcd60d649?s=128&d=identicon&r=PG", "display_name": "ndkrempel", "link": "https://stackoverflow.com/users/1395057/ndkrempel"}, "edited": false, "score": 0, "creation_date": 1519839237, "post_id": 49035029, "comment_id": 85075717, "body": "I&#39;ve edited the answer, but I&#39;m not sure it&#39;s made it really that much better. It&#39;s a hard problem to solve."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 1, "last_activity_date": 1519839057, "last_edit_date": 1519839057, "creation_date": 1519837771, "answer_id": 49035029, "question_id": 49034629, "link": "https://stackoverflow.com/questions/49034629/relying-on-network-i-o-to-provide-cross-thread-synchronization-in-c/49035029#49035029", "title": "Relying on network I/O to provide cross-thread synchronization in C++", "body": "<p>Short answer: No, there is no generic guarantee that <code>a</code> will be updated. My suggestion would be to send the value of <code>a</code> along with <code>\"foo\"</code> - e.g. <code>\"foo, 42\"</code>, or something like it. That is guaranteed to work, and probably not that significant overhead. [There may of course be other reasons why that doesn't work well]</p>\n\n<p>Long rambling stuff that doesn't really answer the problem:</p>\n\n<p>Global data is not guaranteed to be \"visible\" immediately in different cores of multicore processors without further operations. Yes, most modern processors are \"coherent\", but not all models of all brands are guaranteed to do so. So if thread2 runs on a processor that has already cached a copy of <code>a</code>, it can not be guaranteed that the value of <code>a</code> is 42 at the point when you call <code>f</code>.</p>\n\n<p>The C++ standard guarantees that global variables are loaded after the function call, so the compiler is not allowed to do:</p>\n\n<pre><code> tmp = a;\n recv(...);\n f(tmp);\n</code></pre>\n\n<p>but as I said above, cache-operations may be needed to guarantee that all processors see the same value at the same time. If <code>send</code> and <code>recv</code> are long in time or big in accesses enough [there is no direct measure that says how long or big]  you may see the correct value most or even all of the time, but there is no guarantee for ordinary types that they are ACTUALLY updated outside of the thread that wrote the value last. </p>\n\n<p><code>std::atomic</code> will help on some types of processors, but there is no guarantee that this is \"visible\" in a second thread or on a second processor core at any reasonable time after it was changed.</p>\n\n<p>The only practical solution is to have some kind of \"repeat until I see it change\" type code - this may require one value that is (for example) a counter, and one value that is the actual value - if you want to be able to say that \"a is now 42. I've set a again, it's 42 this time too\". If <code>a</code> is reppresenting, for example the number of data items available in a buffer, it is probably \"it changed value\" that matters, and just checking \"is this the same as last time\". The <code>std::atomic</code> operations have guarantees with regard to ordering, which allows you to use them to ensure that \"if I update this field, the other field is guaranteed to appear at the same time or before this\". So you can use that to guarantee for example a pair of data items are set to the \"there is a new value\" (for example a counter to indicate the \"version number\" of the current data) and \"the new value is X\". </p>\n\n<p>Of course, if you KNOW what processor architectures your code will run on, you can plausibly make more advanced guesses as to what the behaviour will be. For example all x86 and many ARM processors use the cache-interface to implement atomic updates on a variable, so by doing an atomic update on one core, you can know that \"no other processor will have a stale value of this\". But there are processors available that do not have this implementation detail, and where an update, even with an atomic instruction, will not be updated on other cores or in other threads until \"some time in the future, uncertain when\".</p>\n"}, {"tags": [], "owner": {"reputation": 1871, "user_id": 1395057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a89ccf94e8ba07a5e9cff20fcd60d649?s=128&d=identicon&r=PG", "display_name": "ndkrempel", "link": "https://stackoverflow.com/users/1395057/ndkrempel"}, "is_accepted": false, "score": 1, "last_activity_date": 1520977645, "last_edit_date": 1520977645, "creation_date": 1520976188, "answer_id": 49266074, "question_id": 49034629, "link": "https://stackoverflow.com/questions/49034629/relying-on-network-i-o-to-provide-cross-thread-synchronization-in-c/49266074#49266074", "title": "Relying on network I/O to provide cross-thread synchronization in C++", "body": "<p>In general, no, external I/O can't be relied upon for cross-thread synchronization.</p>\n\n<p>The question is out-of-scope of the C++ standard itself, as it involves the behavior of external/OS library functions. So whether the program is undefined behavior depends on any synchronization guarantees provided by the network I/O functions. In the absence of such guarantees, it is indeed undefined behavior. Switching to (initialized) atomics to avoid undefined behavior still wouldn't guarantee the \"correct\" up-to-date value will be read. To ensure that within the realms of the C++ standard would require some kind of locking (e.g. spinlock or mutex), even though it seems like waiting shouldn't be required due to the real-time ordering of the situation.</p>\n\n<p>In general, the notion of \"real-time\" synchronization (involving visibility rather than merely ordering) required to avoid having to potentially wait after the <code>recv</code> returns before loading <code>a</code> isn't supported by the C++ standard. At a lower level, this notion does exist however, and would typically be implemented through <a href=\"https://en.wikipedia.org/wiki/Inter-processor_interrupt\" rel=\"nofollow noreferrer\">inter-processor interrupts</a>, e.g. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683148(v=vs.85).aspx\" rel=\"nofollow noreferrer\">FlushProcessWriteBuffers</a> on Windows, or <a href=\"https://lwn.net/Articles/369567/\" rel=\"nofollow noreferrer\">sys_membarrier</a> on x86 Linux. This would be inserted after the store to <code>a</code> before <code>send</code> in <code>thread1</code>. No synchronization or barrier would be required in <code>thread2</code>. (It also seems like a simple <code>SFENCE</code> in <code>thread1</code> might suffice on x86 due to its strong memory model, at least in the absence of non-temporal loads/stores.)</p>\n\n<p>A compiler barrier shouldn't be needed in either thread for the reasons outlined in the question (call to an external function <code>send</code>, which for all the compiler knows could be acquiring an internal mutex to synchronize with the other call to <code>recv</code>).</p>\n\n<p>Insidious problems of the sort described in section 4.3 of Hans Boehm's paper \"<a href=\"http://www.hpl.hp.com/techreports/2004/HPL-2004-209.pdf\" rel=\"nofollow noreferrer\">Threads Cannot be Implemented as a Library</a>\" should not be a concern as the C++ compiler is thread-aware (and in particular the opaque functions <code>send</code> and <code>recv</code> could contain synchronization operations), so transformations introducing writes to <code>a</code> after the <code>send</code> in <code>thread1</code> are not permissible under the memory model.</p>\n\n<p>This leaves the open question of whether the POSIX network functions provide the necessary guarantees. I highly doubt it, as on some of the architectures with weak memory models, they are highly non-trivial and/or expensive to provide (requiring a process-wide mutex or IPI as mentioned earlier). On x86 specifically, it's almost certain that accessing a shared resource like a socket will entail an <code>SFENCE</code> or <code>MFENCE</code> (or even a <code>LOCK</code>-prefixed instruction) somewhere along the line, which should be sufficient, but this is unlikely to be enshrined in a standard anywhere. Edit: In fact, I think even the <code>INT</code> to switch to kernel mode entails a drain of the store buffer (the best reference I have to hand is this <a href=\"https://software.intel.com/en-us/forums/intel-moderncode-for-parallel-architectures/topic/537987#comment-1809755\" rel=\"nofollow noreferrer\">forum post</a>).</p>\n"}], "owner": {"reputation": 1871, "user_id": 1395057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a89ccf94e8ba07a5e9cff20fcd60d649?s=128&d=identicon&r=PG", "display_name": "ndkrempel", "link": "https://stackoverflow.com/users/1395057/ndkrempel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1520977645, "creation_date": 1519836474, "last_edit_date": 1519841311, "question_id": 49034629, "link": "https://stackoverflow.com/questions/49034629/relying-on-network-i-o-to-provide-cross-thread-synchronization-in-c", "title": "Relying on network I/O to provide cross-thread synchronization in C++", "body": "<p>Can external I/O be relied upon as a form of cross-thread synchronization?</p>\n\n<p>To be specific, consider the pseudocode below, which assumes the existence of network/socket functions:</p>\n\n<pre><code>int a;          // Globally accessible data.\nsocket s1, s2;  // Platform-specific.\n\nint main() {\n  // Set up + connect two sockets to (the same) remote machine.\n  s1 = ...;\n  s2 = ...;\n\n  std::thread t1{thread1}, t2{thread2};\n  t1.join();\n  t2.join();\n}\n\nvoid thread1() {\n  a = 42;\n  send(s1, \"foo\");\n}\n\nvoid thread2() {\n  recv(s2);     // Blocking receive (error handling omitted).\n  f(a);         // Use a, should be 42.\n}\n</code></pre>\n\n<p>We assume that the remote machine only sends data to <code>s2</code> upon receiving the <code>\"foo\"</code> from <code>s1</code>. If this assumption fails, then certainly undefined behavior will result. But if it holds (and no other external failure occurs like network data corruption, etc.), does this program produce defined behavior?</p>\n\n<p>\"Never\", \"unspecified (depends on implementation)\", \"depends on the guarantees provided by the implementation of send/recv\" are example answers of the sort I'm expecting, preferably with justification from the C++ standard (or other relevant standards, such as POSIX for sockets/networking).</p>\n\n<p>If \"never\", then changing <code>a</code> to be a <code>std::atomic&lt;int&gt;</code> initialized to a definite value (say 0) would avoid undefined behaviour, but then is the value guaranteed to be read as 42 in <code>thread2</code> or could a stale value be read? Do POSIX sockets provide a further guarantee that ensures a stale value will not be read?</p>\n\n<p>If \"depends\", do POSIX sockets provide the relevant guarantee to make it defined behavior? (How about if <code>s1</code> and <code>s2</code> were the same socket instead of two separate sockets?)</p>\n\n<p>For reference, the standard I/O library has a clause which seems to provide an analogous guarantee when working with iostreams (27.2.3\u00b62 in N4604):</p>\n\n<blockquote>\n  <p>If one thread makes a library call a that writes a value to a stream and, as a result, another thread reads this value from the stream through a library call b such that this does not result in a data race, then a\u2019s write synchronizes with b\u2019s read.</p>\n</blockquote>\n\n<p>So is it a matter of the underlying network library/functions being used providing a similar guarantee?</p>\n\n<p>In practical terms, it seems the compiler can't reorder accesses to the global <code>a</code> with respect to the <code>send</code> and<code>recv</code> functions (as they could use <code>a</code> in principle). However, the thread running <code>thread2</code> could still read a stale value of <code>a</code> unless there was some kind of memory barrier / synchronization guarantee provided by the <code>send</code>/<code>recv</code> pair itself.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 2, "creation_date": 1519836670, "post_id": 49034611, "comment_id": 85074088, "body": "You do not construct a new clean object, when you call <code>foo</code> you construct a copy, implicit default copy constructor is called, that has no body."}, {"owner": {"reputation": 37, "user_id": 9349819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7647e0944d2a0a3cf8d35066b9240d16?s=128&d=identicon&r=PG&f=1", "display_name": "S. Safinia", "link": "https://stackoverflow.com/users/9349819/s-safinia"}, "reply_to_user": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1519837909, "post_id": 49034611, "comment_id": 85074894, "body": "oh yes!!!! you are right"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519838089, "post_id": 49034611, "comment_id": 85074997, "body": "When in doubt - attach a debugger, put a breakpoint in the function; then look at the callstack so that you can see why every constructor is called"}], "owner": {"reputation": 37, "user_id": 9349819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7647e0944d2a0a3cf8d35066b9240d16?s=128&d=identicon&r=PG&f=1", "display_name": "S. Safinia", "link": "https://stackoverflow.com/users/9349819/s-safinia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519836813, "creation_date": 1519836417, "last_edit_date": 1519836813, "question_id": 49034611, "link": "https://stackoverflow.com/questions/49034611/calling-the-constructor-for-the-object-that-defined-inside-my-function", "title": "calling the constructor for the object that defined inside my function", "body": "<p>I defined a class named \"Uno\" and after that i definee a function named \"foo\" that had an object from this class in its body. I am wondering what is the problem that the constructor hadn't called by invoking the funation in my \"main()\", Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Uno{\npublic:\n    Uno(){cout &lt;&lt; \"X\";}\n};\n\nUno foo(Uno d){\n    Uno e = d;\n    return e;\n}\n\nint main(){\n    Uno u;\n    foo(u);\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "resources"], "answers": [{"comments": [{"owner": {"reputation": 731, "user_id": 8024280, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/nQZKP.jpg?s=128&g=1", "display_name": "wair92", "link": "https://stackoverflow.com/users/8024280/wair92"}, "edited": false, "score": 0, "creation_date": 1519836107, "post_id": 49034503, "comment_id": 85073707, "body": "I cannot just ignore it, because now I`m not able to compile my application, it cannot find that file."}, {"owner": {"reputation": 536, "user_id": 4881960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0970a38e2aa57cb1c119f8c1a9849fb?s=128&d=identicon&r=PG&f=1", "display_name": "freim", "link": "https://stackoverflow.com/users/4881960/freim"}, "reply_to_user": {"reputation": 731, "user_id": 8024280, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/nQZKP.jpg?s=128&g=1", "display_name": "wair92", "link": "https://stackoverflow.com/users/8024280/wair92"}, "edited": false, "score": 0, "creation_date": 1519836997, "post_id": 49034503, "comment_id": 85074321, "body": "If winres.h is not in the MFC &#39;include&#39; folder then there is an installation problem. Try reinstalling. You can&#39;t go without that file."}], "tags": [], "owner": {"reputation": 536, "user_id": 4881960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0970a38e2aa57cb1c119f8c1a9849fb?s=128&d=identicon&r=PG&f=1", "display_name": "freim", "link": "https://stackoverflow.com/users/4881960/freim"}, "is_accepted": true, "score": 1, "last_activity_date": 1519836037, "creation_date": 1519836037, "answer_id": 49034503, "question_id": 49034259, "link": "https://stackoverflow.com/questions/49034259/generated-resource-file-contains-strange-include-file/49034503#49034503", "title": "generated Resource File contains strange include file", "body": "<p>That file contains some definitions for Resource Compiler and is added automatically. There is nothing interesting in it, really. Just ignore.</p>\n\n<p>It resides in MFC's 'Include' directory if you still want to look inside. </p>\n"}], "owner": {"reputation": 731, "user_id": 8024280, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/nQZKP.jpg?s=128&g=1", "display_name": "wair92", "link": "https://stackoverflow.com/users/8024280/wair92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 49034503, "answer_count": 1, "score": 0, "last_activity_date": 1519836037, "creation_date": 1519835340, "last_edit_date": 1519836037, "question_id": 49034259, "link": "https://stackoverflow.com/questions/49034259/generated-resource-file-contains-strange-include-file", "title": "generated Resource File contains strange include file", "body": "<p>Visual studio 2013 generates me a Resource.rc in which appeared <code>#include \"winres.h\"</code>, my question is why it is here, and where to find that file? Or it is really necessary to use it? Because now I am not able to compile my application. </p>\n\n<pre><code>    // Microsoft Visual C++ generated resource script.\n//\n#include \"resource.h\"\n\n#define APSTUDIO_READONLY_SYMBOLS\n/////////////////////////////////////////////////////////////////////////////\n//\n// Generated from the TEXTINCLUDE 2 resource.\n//\n#include \"winres.h\"\n\n/////////////////////////////////////////////////////////////////////////////\n#undef APSTUDIO_READONLY_SYMBOLS\n\n/////////////////////////////////////////////////////////////////////////////\n// Slovak (Slovakia) resources\n\n#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_SKY)\nLANGUAGE LANG_SLOVAK, SUBLANG_DEFAULT\n\n#ifdef APSTUDIO_INVOKED\n/////////////////////////////////////////////////////////////////////////////\n//\n// TEXTINCLUDE\n//\n\n1 TEXTINCLUDE \nBEGIN\n    \"resource.h\\0\"\nEND\n\n2 TEXTINCLUDE \nBEGIN\n    \"#include \"\"winres.h\"\"\\r\\n\"\n    \"\\0\"\nEND\n\n3 TEXTINCLUDE \nBEGIN\n    \"\\r\\n\"\n    \"\\0\"\nEND\n\n#endif    // APSTUDIO_INVOKED\n\n#endif    // Slovak (Slovakia) resources\n/////////////////////////////////////////////////////////////////////////////\n\n\n/////////////////////////////////////////////////////////////////////////////\n// Neutral (Sys. Default) resources\n\n#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_NEUSD)\nLANGUAGE LANG_NEUTRAL, SUBLANG_SYS_DEFAULT\n\n/////////////////////////////////////////////////////////////////////////////\n//\n// Version\n//\n\nVS_VERSION_INFO VERSIONINFO\n FILEVERSION 1,0,0,0\n PRODUCTVERSION 1,0,0,0\n FILEFLAGSMASK 0x3fL\n#ifdef _DEBUG\n FILEFLAGS 0x1L\n#else\n FILEFLAGS 0x0L\n#endif\n FILEOS 0x40004L\n FILETYPE 0x0L\n FILESUBTYPE 0x0L\nBEGIN\n    BLOCK \"StringFileInfo\"\n    BEGIN\n        BLOCK \"041b04b0\"\n        BEGIN\n            VALUE \"CompanyName\", \"XXX\"\n            VALUE \"FileDescription\", \"XXX\"\n            VALUE \"FileVersion\", \"1.0.0.0\"\n            VALUE \"InternalName\", \"Frontend\"\n            VALUE \"LegalCopyright\", \"Copyright (C) 2017\"\n            VALUE \"OriginalFilename\", \"XXX\"\n            VALUE \"ProductName\", \"XXX\"\n            VALUE \"ProductVersion\", \"1.0.0.0\"\n        END\n    END\n    BLOCK \"VarFileInfo\"\n    BEGIN\n        VALUE \"Translation\", 0x41b, 1200\n    END\nEND\n\n#endif    // Neutral (Sys. Default) resources\n/////////////////////////////////////////////////////////////////////////////\n\n\n\n#ifndef APSTUDIO_INVOKED\n/////////////////////////////////////////////////////////////////////////////\n//\n// Generated from the TEXTINCLUDE 3 resource.\n//\n\n\n/////////////////////////////////////////////////////////////////////////////\n#endif    // not APSTUDIO_INVOKED\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 2, "creation_date": 1519835557, "post_id": 49034253, "comment_id": 85073348, "body": "You have a memory leak."}, {"owner": {"reputation": 503, "user_id": 8830528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78bc39faaf914ac3f42353f2e37f0311?s=128&d=identicon&r=PG&f=1", "display_name": "rbf", "link": "https://stackoverflow.com/users/8830528/rbf"}, "edited": false, "score": 6, "creation_date": 1519835582, "post_id": 49034253, "comment_id": 85073361, "body": "Can you please specify more &quot;does not work&quot; ? What are you expecting and what does not work?"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1519835997, "post_id": 49034253, "comment_id": 85073623, "body": "m_size is not initialize"}, {"owner": {"reputation": 61, "user_id": 8620067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fb2c3b4ccda9e504e80659499f3269?s=128&d=identicon&r=PG&f=1", "display_name": "griffer98", "link": "https://stackoverflow.com/users/8620067/griffer98"}, "edited": false, "score": 0, "creation_date": 1519836246, "post_id": 49034253, "comment_id": 85073789, "body": "m_size is initialized. Idk why it says that. And when the overloaded operator is used, when I display, I get a bunch of random numbers. I should be getting back the actual values. Also this is just in the class, so by the time this is used, all the attributes are initialized and have a value."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1519837119, "post_id": 49034253, "comment_id": 85074400, "body": "You don&#39;t initialize the items in <code>m_data</code>.  Your assignment operator may be copying from an instance that has undefined values in <code>m_data</code> (a.k.a. random numbers).  Use a debugger and place a breakpoint in your assignment function.  Look at the values in <code>rhs.m_data</code> (or print them out)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519838049, "post_id": 49034253, "comment_id": 85074977, "body": "<i>&quot;m_size = 0;`enter code here`&quot;</i> This is not valid C++"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1519838131, "post_id": 49034253, "comment_id": 85075026, "body": "you should familiarize yourself with <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">the Rule of three</a> and you should really appreciate the importance of the Rule of zero."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8620067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fb2c3b4ccda9e504e80659499f3269?s=128&d=identicon&r=PG&f=1", "display_name": "griffer98", "link": "https://stackoverflow.com/users/8620067/griffer98"}, "edited": false, "score": 0, "creation_date": 1519836666, "post_id": 49034540, "comment_id": 85074084, "body": "m_size is initialized to 0. by the time the overloaded constructor is called, m_size has a value other than 0;"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 61, "user_id": 8620067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fb2c3b4ccda9e504e80659499f3269?s=128&d=identicon&r=PG&f=1", "display_name": "griffer98", "link": "https://stackoverflow.com/users/8620067/griffer98"}, "edited": false, "score": 0, "creation_date": 1519836935, "post_id": 49034540, "comment_id": 85074276, "body": "@griffer98: Then the loop in the overloaded operator will happen 0 times, since it is never initialized. I edited my code slightly so that you can grasp"}, {"owner": {"reputation": 61, "user_id": 8620067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fb2c3b4ccda9e504e80659499f3269?s=128&d=identicon&r=PG&f=1", "display_name": "griffer98", "link": "https://stackoverflow.com/users/8620067/griffer98"}, "edited": false, "score": 0, "creation_date": 1519837651, "post_id": 49034540, "comment_id": 85074746, "body": "m_size fdoes have a value by the time I call the overloaded operator. m_size is not zero or n. When I run the program the loop actually loops, its the fact that instead of giving me the values that were copied over, it gives me numbers like im access memory that doesnt have any actual value. Other than my constructor, is there anything wrong with the code in my overloaded operator?"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 61, "user_id": 8620067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fb2c3b4ccda9e504e80659499f3269?s=128&d=identicon&r=PG&f=1", "display_name": "griffer98", "link": "https://stackoverflow.com/users/8620067/griffer98"}, "edited": false, "score": 0, "creation_date": 1519838059, "post_id": 49034540, "comment_id": 85074981, "body": "@griffer98:Rest seem ok but the value of m_size need to be set somewhere."}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": false, "score": 0, "last_activity_date": 1519837039, "last_edit_date": 1519837039, "creation_date": 1519836179, "answer_id": 49034540, "question_id": 49034253, "link": "https://stackoverflow.com/questions/49034253/trouble-with-implementing-overloaded-operator/49034540#49034540", "title": "Trouble with implementing overloaded operator", "body": "<p>Member variable m_size is not initialize in constructor , hence for loop will not work in the overloaded operator. See this pseudo code , assuming m_size = m_ capacity:</p>\n\n<pre><code>class SSLColumn {\n     int m_capacity;\n     int m_size; \n    int* m_data ;\npublic:\n    SSLColumn( int n);\n    const SSLColumn&amp; operator=(const SSLColumn&amp; rhs);\n};\n\nSSLColumn::SSLColumn( int n) {\n    m_capacity = m_size = n;   // &lt;--- SEE HERE !  ( m_size need some value later\n    m_data = new int[n];\n}\n\nconst SSLColumn&amp; SSLColumn::operator=(const SSLColumn&amp; rhs) {\n    if( m_data == NULL)  m_data = new int[m_capacity];\n\n    for (int i = 0; i &lt; m_size; i++)\n        m_data[i] = rhs.m_data[i];\n\n    return *this;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8620067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fb2c3b4ccda9e504e80659499f3269?s=128&d=identicon&r=PG&f=1", "display_name": "griffer98", "link": "https://stackoverflow.com/users/8620067/griffer98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519847637, "creation_date": 1519835326, "last_edit_date": 1519847637, "question_id": 49034253, "link": "https://stackoverflow.com/questions/49034253/trouble-with-implementing-overloaded-operator", "title": "Trouble with implementing overloaded operator", "body": "<p>I am having trouble getting my overloaded <code>=</code> operator working. I have a class like this.</p>\n\n<pre><code>SSLColumn::SSLColumn(int n){\n   m_capacity = n;\n   m_data = new int[m_capacity];\n   m_size = 0;\n   m_start = 0;\n   m_end = 0;\n}\n</code></pre>\n\n<p>And my overloaded operator as of now is like this</p>\n\n<pre><code>const SSLColumn&amp; SSLColumn::operator=(const SSLColumn&amp; rhs) {\n      m_capacity = rhs.m_capacity;\n      m_data = new int[m_capacity];\n      m_size = rhs.m_size;\n      m_start = rhs.m_start;\n      m_end = rhs.m_end;\n\n      for(int i = 0; i &lt; m_size; i++)\n         m_data[i] = rhs.m_data[i];\n\n      return *this;\n}\n</code></pre>\n\n<p>But it doesn't work for some reason. Is there something I am missing or not doing correctly?</p>\n"}, {"tags": ["c++", "multithreading", "boost-unordered", "shared-variable"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519834807, "post_id": 49033936, "comment_id": 85072825, "body": "I suspect you&#39;ll get better performance not locking at the start of each loop and holding for the duration of the loop; but just locking outside the loop and releasing after; it seems that you&#39;re only allowing 1 thread to run at a time in the expensive part anyway; so why bother with threads?"}, {"owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519835212, "post_id": 49033936, "comment_id": 85073091, "body": "I want only one entry into the <code>bimap</code> at a time, so I used lock after the start of the loop. There may be some other flaws also because I am new to threads."}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1519836779, "post_id": 49033936, "comment_id": 85074159, "body": "Declare  seq_itr  as local variable inside reference_index_hash() instead of global ?"}, {"owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "reply_to_user": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1519837210, "post_id": 49033936, "comment_id": 85074458, "body": "@engf-010 Why you think the code will not compile?. That is the class object by pointer or reference <code>(index or &amp;index or std::ref(index))</code>"}, {"owner": {"reputation": 4678, "user_id": 4089949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cd972e12c05d5e13dd8a6acd0025781e?s=128&d=identicon&r=PG&f=1", "display_name": "Agaz Wani", "link": "https://stackoverflow.com/users/4089949/agaz-wani"}, "edited": false, "score": 0, "creation_date": 1520264512, "post_id": 49033936, "comment_id": 85233211, "body": "@AwaitedOne Do you have static or dynamic linking of the libraries."}, {"owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "reply_to_user": {"reputation": 4678, "user_id": 4089949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cd972e12c05d5e13dd8a6acd0025781e?s=128&d=identicon&r=PG&f=1", "display_name": "Agaz Wani", "link": "https://stackoverflow.com/users/4089949/agaz-wani"}, "edited": false, "score": 0, "creation_date": 1520264644, "post_id": 49033936, "comment_id": 85233306, "body": "@AaghazHussain Static"}], "answers": [{"comments": [{"owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "edited": false, "score": 0, "creation_date": 1520001784, "post_id": 49035272, "comment_id": 85148090, "body": "Thank you for your comment. I tried using local variables but not working. I have edited that above."}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": false, "score": 0, "last_activity_date": 1519839273, "last_edit_date": 1519839273, "creation_date": 1519838594, "answer_id": 49035272, "question_id": 49033936, "link": "https://stackoverflow.com/questions/49033936/threading-with-shared-variables/49035272#49035272", "title": "Threading with shared variables", "body": "<p>All the threads will try to get the lock in the critical section, to keep the bitmap intact, you need a conditional variable so that threads will orderly get executed. This is justified as you are using   seq_itr as local variable inside reference_index_hash() and it needs to be incremented in proper sequence.</p>\n"}, {"tags": [], "owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "is_accepted": false, "score": 0, "last_activity_date": 1520142140, "creation_date": 1520142140, "answer_id": 49092379, "question_id": 49033936, "link": "https://stackoverflow.com/questions/49033936/threading-with-shared-variables/49092379#49092379", "title": "Threading with shared variables", "body": "<p>One problem in your original code is that <code>unsigned int seq_itr</code> is accessed without synchronization from multiple threads. Besides yielding invalid results it might lead to <code>seq_itr</code> being incremented to a value bigger than the actual sequence length, and the following accesses might lead to a crash.</p>\n\n<p>The new code addresses this by just passing indexes, which should be OK as long as those indexes are non-overlapping and correctly calculated. I can't follow the logic completely, but in case your <code>seq_strt</code> calculation is off the program might also crash due to an invalid index. Should be easy to verify in a debugger or with some index assertions. </p>\n\n<p>However there is an issue in the second code example with printing the map directly after threads are started with</p>\n\n<pre><code>for( bimap_reference::const_iterator iter = reference_index_vector.begin(), iend = reference_index_vector.end();\n        iter != iend; ++iter ) {\n    std::cout &lt;&lt; iter-&gt;left &lt;&lt; \" &lt;--&gt; \"&lt;&lt; iter-&gt;right &lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>This will not yield correct results, since the map is concurrently accessed by all worker threads. Access after the <code>join()</code>s is safe.</p>\n"}, {"comments": [{"owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "edited": false, "score": 0, "creation_date": 1520265815, "post_id": 49114315, "comment_id": 85234172, "body": "Thanks for pointing to <code>static</code> linking. It runs without segmentation fault now. I will check for the correctness of other code."}], "tags": [], "owner": {"reputation": 4678, "user_id": 4089949, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cd972e12c05d5e13dd8a6acd0025781e?s=128&d=identicon&r=PG&f=1", "display_name": "Agaz Wani", "link": "https://stackoverflow.com/users/4089949/agaz-wani"}, "is_accepted": true, "score": 1, "last_activity_date": 1520265024, "creation_date": 1520265024, "answer_id": 49114315, "question_id": 49033936, "link": "https://stackoverflow.com/questions/49033936/threading-with-shared-variables/49114315#49114315", "title": "Threading with shared variables", "body": "<p>I feel the culprit for <code>segmentation fault</code> is nothing but <code>static</code> linking of the libraries. Its not by incrementing <code>seq_itr</code> to a value bigger than the actual sequence length, because your for loop will never allow to enter if <code>seq_itr</code> is greater than actual sequence length. You try by removing the <code>-static</code> flag and it should work by not giving the segmentation fault, however it does not guarantee the correctness of the other code. More details about segmentation fault with <code>thread</code> can be found <a href=\"https://stackoverflow.com/questions/35116327/when-g-static-link-pthread-cause-segmentation-fault-why\">here</a></p>\n"}], "owner": {"reputation": 922, "user_id": 4467155, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3c584c0850ee1abd5661fd58c705e6de?s=128&d=identicon&r=PG&f=1", "display_name": "AwaitedOne", "link": "https://stackoverflow.com/users/4467155/awaitedone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 49114315, "answer_count": 3, "score": 2, "last_activity_date": 1520265024, "creation_date": 1519834358, "last_edit_date": 1519996073, "question_id": 49033936, "link": "https://stackoverflow.com/questions/49033936/threading-with-shared-variables", "title": "Threading with shared variables", "body": "<p>I tried to use multiple threads to insert into a <code>boost::bimap</code>. I have some shared variable between the threads, which I need to pass by reference and some of them are modified by each thread execution. However, I get the error:</p>\n\n<blockquote>\n  <p>Segmentation fault (core dumped)</p>\n</blockquote>\n\n<p>I have the following code with me. I have tried to avoid concurrent access to the variables by using <code>std::lock_guard&lt;std::mutex&gt; lock(mtx)</code>, but not able to make it work.</p>\n\n<p><strong>parallel_index.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;boost/bimap.hpp&gt;\n#include &lt;boost/bimap/unordered_set_of.hpp&gt;\n#include &lt;boost/bimap/unordered_multiset_of.hpp&gt;\n#include \"parallel_index.h\"\n\n\nnamespace bimaps = boost::bimaps;\ntypedef boost::bimap&lt;bimaps::unordered_set_of&lt;uint64_t&gt;,\n        bimaps::unordered_multiset_of&lt;std::string&gt; &gt; bimap_reference;\ntypedef bimap_reference::value_type position;\nbimap_reference reference_index_vector;\n\n\nsize_t total_threads = std::thread::hardware_concurrency();\n\nstd::string sequence_content = \"ABCDDBACDDDCBBAAACBDAADCBDAAADCBDADADACBDDCBBBCDCBCDAADCBBCDAAADCBDA\";\nuint64_t sequence_length = sequence_content.length();\nint split = 5;\nuint64_t erase_length = 0;\nunsigned int seq_itr = 0;\n\nstd::mutex mtx;   // to protect against concurent access\nint main(){\n    thread_test::create_index index;\n    std::thread threads[total_threads];\n    std::cout &lt;&lt; total_threads &lt;&lt;  \" threads lanched\" &lt;&lt; std::endl;\n    for(unsigned int i = 0; i &lt; total_threads; i++){\n        threads[i] = std::thread(&amp;thread_test::create_index::reference_index_hash, index,\n                std::ref(sequence_length), std::ref(split), std::ref(sequence_content), std::ref(erase_length));\n    }\n\n    for(unsigned int i = 0; i &lt; total_threads; i++){\n        threads[i].join();\n    }\n}\n\n\n\n/*\n * Creating index\n */\nvoid thread_test::create_index::reference_index_hash(uint64_t &amp;sequence_length, int &amp;split,\n        std::string &amp;sequence_content, uint64_t &amp;erase_length  ){\n\n    for (; seq_itr &lt; sequence_length; ++seq_itr ){\n\n        std::lock_guard&lt;std::mutex&gt; lock(mtx);    \n        std::string splitstr = sequence_content.substr(erase_length, split);\n        reference_index_vector.insert(position(seq_itr, splitstr));\n        seq_itr += split-1;\n        erase_length += split;\n\n        if(erase_length &gt; 10000){\n            sequence_content.erase(0,erase_length);\n            erase_length = 0;\n        }\n    }\n\n\n    for( bimap_reference::const_iterator iter = reference_index_vector.begin(), iend = reference_index_vector.end();\n            iter != iend; ++iter ) {\n        std::cout &lt;&lt; iter-&gt;left &lt;&lt; \" &lt;--&gt; \"&lt;&lt; iter-&gt;right &lt;&lt;std::endl;\n    }\n\n\n}\n</code></pre>\n\n<p><strong>parallel_index.h</strong></p>\n\n<pre><code>#ifndef PARALLEL_INDEX_H_\n#define PARALLEL_INDEX_H_\n\n\n#include&lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;utility&gt;\n#include &lt;boost/bimap.hpp&gt;\n#include &lt;boost/bimap/unordered_set_of.hpp&gt;\n#include &lt;boost/bimap/unordered_multiset_of.hpp&gt;\n\n\n\n\n//typedef boost::unordered_map&lt;int, std::pair&lt;int, unsigned long int&gt;&amp; &gt; reference_map;\n\nnamespace bimaps = boost::bimaps;\n\ntypedef boost::bimap&lt;bimaps::unordered_set_of&lt;uint64_t&gt;,\n        bimaps::unordered_multiset_of&lt;std::string &gt; &gt; bimap_reference;\ntypedef bimap_reference::value_type position;\nextern bimap_reference reference_index_vector;\n\n\nnamespace thread_test{\n\nclass create_index{\npublic:\n    void reference_index_hash(uint64_t &amp;sequence_length, int &amp;split,\n            std::string &amp;sequence_content, uint64_t &amp;erase_length);\n};\n}\n\n\n#endif /* PARALLEL_INDEX_H_ */\n</code></pre>\n\n<p><strong>-------------------------------EDIT---------------------------------</strong></p>\n\n<p>I tried to divide the string content into partitions equal to the number of threads to have each thread its part locally available. But nothing seems to work. Some times it finishes the first thread and stops there after with a <code>Segmentation fault (core dumped)</code>.</p>\n\n<p><strong>parallel_index.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;boost/bimap.hpp&gt;\n#include &lt;boost/bimap/unordered_set_of.hpp&gt;\n#include &lt;boost/bimap/unordered_multiset_of.hpp&gt;\n#include \"parallel_index.h\"\n\n\nnamespace bimaps = boost::bimaps;\ntypedef boost::bimap&lt;bimaps::unordered_set_of&lt;uint64_t&gt;,\n        bimaps::unordered_multiset_of&lt;std::string&gt; &gt; bimap_reference;\ntypedef bimap_reference::value_type position;\nbimap_reference reference_index_vector;\n\n\n//create threads\nsize_t total_threads = std::thread::hardware_concurrency();\n\n\nstd::string sequence_content = \"ABCDDBACDDDCBBAAACBDAADCBDAAADCBDADADACBDDCBBBCDCBCDAADCBBCDAAADCBDADDCCCAAABBBAAACDCA\";\nuint64_t sequence_length = sequence_content.length();\nint split = 5;\n\n// split the sequence_content equal to the number of threads, and assign each partition to each thread.\nuint64_t each_partition_len = sequence_content.length()/total_threads- (sequence_content.length()/total_threads)%split ;\nuint64_t last_partition_len = sequence_content.length()/total_threads +\n        (((sequence_content.length()/total_threads)%split)*(total_threads-1)) + sequence_content.length()%total_threads;\n\n\nstd::mutex mtx;   // to protect against concurent access\nint main(){\n    thread_test::create_index index;\n    std::thread threads[total_threads];\n\n    std::cout &lt;&lt; total_threads &lt;&lt;  \" threads lanched\" &lt;&lt; std::endl;\n\n    for(unsigned int i = 0; i &lt; total_threads; i++){\n\n        if(i &lt; total_threads-1)\n            threads[i] = std::thread(&amp;thread_test::create_index::reference_index_hash, index,\n                            std::ref(each_partition_len), std::ref(split), std::ref(sequence_content), i);\n\n        else\n            threads[i] = std::thread(&amp;thread_test::create_index::reference_index_hash, index,\n                                        std::ref(last_partition_len), std::ref(split), std::ref(sequence_content), i);\n\n        //std::lock_guard&lt;std::mutex&gt; lck(mtx);\n        std::cout &lt;&lt; \"launched thread \" &lt;&lt; i &lt;&lt; \"with id \" &lt;&lt; threads[i].get_id() &lt;&lt; std::endl;\n    }\n\n\n    for( bimap_reference::const_iterator iter = reference_index_vector.begin(), iend = reference_index_vector.end();\n            iter != iend; ++iter ) {\n        std::cout &lt;&lt; iter-&gt;left &lt;&lt; \" &lt;--&gt; \"&lt;&lt; iter-&gt;right &lt;&lt;std::endl;\n    }\n\n    for( unsigned int i = 0; i &lt; total_threads; ++i){\n        if(threads[i].joinable()){\n            std::cout &lt;&lt; \"trying to join thread \" &lt;&lt; i &lt;&lt; std:: endl;\n            threads[i].join();\n            std::cout &lt;&lt; \"thread joined \" &lt;&lt; i &lt;&lt; std:: endl;\n        }\n    }\n\n    for( bimap_reference::const_iterator iter = reference_index_vector.begin(), iend = reference_index_vector.end();\n            iter != iend; ++iter ) {\n        std::cout &lt;&lt; iter-&gt;left &lt;&lt; \" &lt;--&gt; \"&lt;&lt; iter-&gt;right &lt;&lt;std::endl;\n    }\n}\n\n\n\n\n\n/*\n * Creating index\n */\nvoid thread_test::create_index::reference_index_hash(uint64_t &amp;sequence_length, int &amp;split,\n        std::string &amp;sequence_content, int i  ){\n\n    uint64_t seq_strt = 0;\n\n//  set seq_strt\n    if(i == 0)\n        seq_strt = sequence_length * i;\n    else\n        seq_strt = sequence_length * i + 1;\n\n    for (uint64_t seq_itr = seq_strt; seq_itr &lt;= sequence_length; ++seq_itr ){\n\n\n        std::string splitstr = sequence_content.substr(seq_itr, split);     \n\n        mtx.lock();\n        //std::lock_guard&lt;std::mutex&gt; lock(mtx);\n        reference_index_vector.insert(position(seq_itr, splitstr));\n        mtx.unlock();\n\n        seq_itr += split-1;     \n\n    }\n}\n</code></pre>\n\n<p><strong>parallel_index.h</strong></p>\n\n<pre><code>#ifndef PARALLEL_INDEX_H_\n#define PARALLEL_INDEX_H_\n\n\n#include&lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;utility&gt;\n#include &lt;boost/bimap.hpp&gt;\n#include &lt;boost/bimap/unordered_set_of.hpp&gt;\n#include &lt;boost/bimap/unordered_multiset_of.hpp&gt;\n\nnamespace bimaps = boost::bimaps;\n\ntypedef boost::bimap&lt;bimaps::unordered_set_of&lt;uint64_t&gt;,\n        bimaps::unordered_multiset_of&lt;std::string &gt; &gt; bimap_reference;\ntypedef bimap_reference::value_type position;\nextern bimap_reference reference_index_vector;\n\n\nnamespace thread_test{\n\nclass create_index{\npublic:\n    void reference_index_hash(uint64_t &amp;sequence_length, int &amp;split,\n            std::string &amp;sequence_content, int i);\n};\n}\n\n\n#endif /* PARALLEL_INDEX_H_ */\n</code></pre>\n"}, {"tags": ["c++", "templates", "language-lawyer", "perfect-forwarding"], "comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 1, "creation_date": 1519836320, "post_id": 49033889, "comment_id": 85073832, "body": "<code>int foo() { return 1; } &#47;* ... *&#47; auto &amp;&amp;ret = foo(); decltype(auto) ret2 = foo();</code> wouldn&#39;t act the same..."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1519836486, "post_id": 49033889, "comment_id": 85073960, "body": "@W.F. Can you be more specific? I&#39;m specifically concerning about the lifetime."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 1, "creation_date": 1519837257, "post_id": 49033889, "comment_id": 85074493, "body": "Depends on the function&#39;s declared return type. You&#39;d better quote more so that we can understand the context."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 1, "creation_date": 1519837350, "post_id": 49033889, "comment_id": 85074546, "body": "A toy <a href=\"https://wandbox.org/permlink/X3qtGHLrSBSZgedZ\" rel=\"nofollow noreferrer\">&#91;example&#93;</a> of what author could have in mind... see the warning"}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519837582, "post_id": 49033889, "comment_id": 85074709, "body": "@xskxzr the function&#39;s return type is also <code>decltype(auto)</code>."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 1, "creation_date": 1519837709, "post_id": 49033889, "comment_id": 85074781, "body": "You should edit the question to clarify it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519837915, "post_id": 49033889, "comment_id": 85074899, "body": "@xskxzr: It&#39;s not really relevant here, though good general advice to present a MCVE"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1519838024, "post_id": 49033889, "comment_id": 85074958, "body": "@LightnessRacesinOrbit If the declared return type is <code>auto</code>, using <code>auto&amp;&amp; ret{...}</code> is acceptable. On the other hand, if the declared return type is <code>auto&amp;&amp;</code>, using <code>decltype(auto) ret{...}</code> still results in a lifetime problem."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519838338, "post_id": 49033889, "comment_id": 85075150, "body": "@xskxzr: Yes but we can answer generally perfectly well, covering both cases."}], "answers": [{"comments": [{"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1519837419, "post_id": 49034784, "comment_id": 85074603, "body": "Isn&#39;t <code>decltype(auto)</code> semantically same with <code>decltype(e)</code> for some expression <code>e</code>? The standard says, <code>otherwise, if e is an lvalue, decltype(e) is T&amp;, where T is the type of e;</code>."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 4, "creation_date": 1519837761, "post_id": 49034784, "comment_id": 85074811, "body": "@b1sub you forgot <a href=\"http://eel.is/c++draft/dcl.type.simple#4.2\" rel=\"nofollow noreferrer\">&#91;dcl.type.simple&#93;/4.2</a> which is relevant here"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 1, "creation_date": 1519838301, "post_id": 49034784, "comment_id": 85075130, "body": "@W.F. This seems an answer."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1519838307, "post_id": 49034784, "comment_id": 85075133, "body": "Referring to <code>Isn&#39;t decltype(auto) semantically same with decltype(e) for some expression e</code> - <a href=\"https://stackoverflow.com/questions/44946408/is-there-a-special-rule-for-lambda-in-case-of-decltypeauto\">no</a>"}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1519838323, "post_id": 49034784, "comment_id": 85075142, "body": "@W.F. BTW, <code>decltype(auto)</code> is not applied to <code>ret</code>. The initializer is not <code>id-expression</code> so that it must form a reference for some cases (i.e., xvalue/lvalue)."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1519840779, "post_id": 49034784, "comment_id": 85076513, "body": "I agree with all your conclusions, and that there will be no references formed when <code>e</code> is prvalue. I just wanted to point out that, the fact that the identifier <code>ret</code> is lvalue has nothing to do with the type deduction. But, if <code>ret</code> was an expression of <code>decltype(e)</code>, that would be an another story. Hope that I cleared out any misunderstanding."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1519841011, "post_id": 49034784, "comment_id": 85076633, "body": "True, that part is not strictly completely accurate."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1519841083, "post_id": 49034784, "comment_id": 85076659, "body": "Thank you for bearing with me. Have a nice day. =)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 5, "last_activity_date": 1519836973, "creation_date": 1519836973, "answer_id": 49034784, "question_id": 49033889, "link": "https://stackoverflow.com/questions/49033889/perfect-forwarding-a-return-value-with-auto/49034784#49034784", "title": "Perfect-forwarding a return value with auto&amp;&amp;", "body": "<blockquote>\n  <p>However, doesn't decltype(auto) also form a reference to xvalue/lvalue?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>Part of <code>decltype(auto)</code>'s magic is that it knows <code>ret</code> is an lvalue, <a href=\"https://stackoverflow.com/a/24109944/560648\">so it will not form a reference</a>.</p>\n\n<p>If you'd written <code>return (ret)</code>, it would indeed have resolved to a reference type and you'd be returning a reference to a local variable.</p>\n\n<p><strong>tl;dr: <code>decltype(auto)</code> is not always the same as <code>auto&amp;&amp;</code>.</strong></p>\n"}, {"comments": [{"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1519841337, "post_id": 49035607, "comment_id": 85076781, "body": "The whole problem certainly stems from my misunderstanding of <code>decltype(e)</code>! Thank you for the detailed answer."}], "tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": true, "score": 6, "last_activity_date": 1519871995, "last_edit_date": 1592644375, "creation_date": 1519839825, "answer_id": 49035607, "question_id": 49033889, "link": "https://stackoverflow.com/questions/49033889/perfect-forwarding-a-return-value-with-auto/49035607#49035607", "title": "Perfect-forwarding a return value with auto&amp;&amp;", "body": "<p>There are two deductions here. One from the return expression, and one from the <code>std::invoke</code> expression. Because <a href=\"http://eel.is/c++draft/dcl.type.simple#4.2\" rel=\"nofollow noreferrer\"><code>decltype(auto)</code> is deduced to be the declared type for unparenthesized id-expression</a>, we can focus on the deduction from the <code>std::invoke</code> expression.</p>\n<p>Quoted from <a href=\"http://eel.is/c++draft/dcl.type.auto.deduct#5\" rel=\"nofollow noreferrer\">[dcl.type.auto.deduct] paragraph 5:</a></p>\n<blockquote>\n<p>If the placeholder is the <code>decltype(auto)</code> <em>type-specifier</em>, <code>T</code> shall be the placeholder alone. The type deduced for <code>T</code> is determined as described in [dcl.type.simple], as though <code>e</code> had been the operand of the <code>decltype</code>.</p>\n</blockquote>\n<p>And quoted from <a href=\"http://eel.is/c++draft/dcl.type.simple#4\" rel=\"nofollow noreferrer\">[dcl.type.simple] paragraph 4</a>:</p>\n<blockquote>\n<p>For an expression <code>e</code>, the type denoted by <code>decltype(e)</code> is defined as follows:</p>\n<ul>\n<li><p>if <code>e</code> is an unparenthesized id-expression naming a structured binding ([dcl.struct.bind]), <code>decltype(e)</code> is the referenced type as given in the specification of the structured binding declaration;</p>\n</li>\n<li><p>otherwise, if <code>e</code> is an unparenthesized <em>id-expression</em> or an unparenthesized class member access, <code>decltype(e)</code> is the type of the entity named by <code>e</code>. If there is no such entity, or if <code>e</code> names a set of overloaded functions, the program is ill-formed;</p>\n</li>\n<li><p>otherwise, if <code>e</code> is an xvalue, <code>decltype(e)</code> is <code>T&amp;&amp;</code>, where <code>T</code> is the type of <code>e</code>;</p>\n</li>\n<li><p>otherwise, if <code>e</code> is an lvalue, <code>decltype(e)</code> is <code>T&amp;</code>, where <code>T</code> is the type of <code>e</code>;</p>\n</li>\n<li><p>otherwise, <code>decltype(e)</code> is the type of <code>e</code>.</p>\n</li>\n</ul>\n</blockquote>\n<p>Note <code>decltype(e)</code> is deduced to be <code>T</code> instead of <code>T&amp;&amp;</code> if <code>e</code> is a prvalue. This is the difference from <code>auto&amp;&amp;</code>.</p>\n<p>So if <code>std::invoke(std::forward&lt;Callable&gt;(op), std::forward&lt;Args&gt;(args)...)</code> is a prvalue, for example, the return type of <code>Callable</code> is not a reference, i.e. returning by value, <code>ret</code> is deduced to be the same type instead of a reference, which perfectly forwards the semantic of returning by value.</p>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": false, "score": 1, "last_activity_date": 1558281949, "creation_date": 1558281949, "answer_id": 56209613, "question_id": 49033889, "link": "https://stackoverflow.com/questions/49033889/perfect-forwarding-a-return-value-with-auto/56209613#56209613", "title": "Perfect-forwarding a return value with auto&amp;&amp;", "body": "<p><code>auto&amp;&amp;</code> is always a reference type. On the other hand, <code>decltype(auto)</code> can be either a reference or a value type, depending on the initialiser used.</p>\n\n<p>Since <code>ret</code> in the <code>return</code> statement is not surrounded by parenthesis, <code>call()</code>'s deduced return type only depends on the <em>declared type</em> of the <em>entity</em> <code>ret</code>, and <strong>not</strong> on the <em>value category</em> of the <em>expression</em> <code>ret</code>:</p>\n\n<pre><code>template&lt;typename Callable, typename... Args&gt;\ndecltype(auto) call(Callable&amp;&amp; op, Args&amp;&amp;... args) {\n   decltype(auto) ret{std::invoke(std::forward&lt;Callable&gt;(op),\n                                  std::forward&lt;Args&gt;(args)...)};\n   ...\n   return ret;\n}\n</code></pre>\n\n<p>If <code>Callable</code> returns <em>by value</em>, then the value category of <code>op</code>'s call expression will be a <strong><em>prvalue</em></strong>. In that case:</p>\n\n<ul>\n<li><code>decltype(auto)</code> will deduce <code>res</code> as a non-reference type (i.e., value type). </li>\n<li><code>auto&amp;&amp;</code> would deduce <code>res</code> as a reference type.</li>\n</ul>\n\n<p>As explained above, the <code>decltype(auto)</code> at <code>call()</code>'s return type simply results in the same type as <code>res</code>. Therefore, if <code>auto&amp;&amp;</code> would have been used for deducing the type of <code>res</code> instead of <code>decltype(auto)</code>, <code>call()</code>'s return type would have been a reference to the local object <code>ret</code>, which does not exist after <code>call()</code> returns.</p>\n"}, {"tags": [], "owner": {"reputation": 2717, "user_id": 611901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5f811c06e5a3b361c60bb3f191ea3e46?s=128&d=identicon&r=PG", "display_name": "Makers_F", "link": "https://stackoverflow.com/users/611901/makers-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1586355016, "last_edit_date": 1592644375, "creation_date": 1586355016, "answer_id": 61102750, "question_id": 49033889, "link": "https://stackoverflow.com/questions/49033889/perfect-forwarding-a-return-value-with-auto/61102750#61102750", "title": "Perfect-forwarding a return value with auto&amp;&amp;", "body": "<p>I had a similar question, but specific to how to properly return <code>ret</code> as if we called <code>invoke</code> directly instead of <code>call</code>.</p>\n<p>In the example you show, <code>call(A, B)</code> <strong>does not</strong> have the same return type of <code>std::invoke(A, B)</code> for every <code>A</code> and <code>B</code>.</p>\n<p>Specifically, when <code>invoke</code> returns an <code>T&amp;&amp;</code>, <code>call</code> returns a <code>T&amp;</code>.</p>\n<p>You can see it in this example (<a href=\"https://wandbox.org/permlink/p3xQwdvkn2PdujJ1\" rel=\"nofollow noreferrer\">wandbox link</a>)</p>\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n\nstruct PlainReturn {\n    template&lt;class F, class Arg&gt;\n    decltype(auto) operator()(F&amp;&amp; f, Arg&amp;&amp; arg) {\n        decltype(auto) ret = std::forward&lt;F&gt;(f)(std::forward&lt;Arg&gt;(arg));\n        return ret;\n    }\n};\n\nstruct ForwardReturn {\n    template&lt;class F, class Arg&gt;\n    decltype(auto) operator()(F&amp;&amp; f, Arg&amp;&amp; arg) {\n        decltype(auto) ret = std::forward&lt;F&gt;(f)(std::forward&lt;Arg&gt;(arg));\n        return std::forward&lt;decltype(ret)&gt;(ret);\n    }\n};\n\nstruct IfConstexprReturn {\n    template&lt;class F, class Arg&gt;\n    decltype(auto) operator()(F&amp;&amp; f, Arg&amp;&amp; arg) {\n        decltype(auto) ret = std::forward&lt;F&gt;(f)(std::forward&lt;Arg&gt;(arg));\n        if constexpr(std::is_rvalue_reference_v&lt;decltype(ret)&gt;) {\n            return std::move(ret);\n        } else {\n            return ret;\n        }\n    }\n};\n\ntemplate&lt;class Impl&gt;\nvoid test_impl(Impl impl) {\n    static_assert(std::is_same_v&lt;int, decltype(impl([](int) -&gt; int {return 1;}, 1))&gt;, &quot;Should return int if F returns int&quot;);\n    int i = 1;\n    static_assert(std::is_same_v&lt;int&amp;, decltype(impl([](int&amp; i) -&gt; int&amp; {return i;}, i))&gt;, &quot;Should return int&amp; if F returns int&amp;&quot;);\n    static_assert(std::is_same_v&lt;int&amp;&amp;, decltype(impl([](int&amp;&amp; i) -&gt; int&amp;&amp; { return std::move(i);}, 1))&gt;, &quot;Should return int&amp;&amp; if F returns int&amp;&amp;&quot;);\n}\n\nint main() {\n    test_impl(PlainReturn{}); // Third assert fails: returns int&amp; instead\n    test_impl(ForwardReturn{}); // First assert fails: returns int&amp; instead\n    test_impl(IfConstexprReturn{}); // Ok\n}\n</code></pre>\n<p>So it appears that the only way to properly forward the return value of a function is by doing</p>\n<pre><code>decltype(auto) operator()(F&amp;&amp; f, Arg&amp;&amp; arg) {\n    decltype(auto) ret = std::forward&lt;F&gt;(f)(std::forward&lt;Arg&gt;(arg));\n    if constexpr(std::is_rvalue_reference_v&lt;decltype(ret)&gt;) {\n        return std::move(ret);\n    } else {\n        return ret;\n    }\n}\n</code></pre>\n<p>This is quite a pitfall (which I discovered by falling into it!).</p>\n<p>Functions which return <code>T&amp;&amp;</code> are rare enough that this can easily go undetected for a while.</p>\n"}], "owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1599, "favorite_count": 2, "accepted_answer_id": 49035607, "answer_count": 4, "score": 14, "last_activity_date": 1586355016, "creation_date": 1519834212, "last_edit_date": 1560763893, "question_id": 49033889, "link": "https://stackoverflow.com/questions/49033889/perfect-forwarding-a-return-value-with-auto", "title": "Perfect-forwarding a return value with auto&amp;&amp;", "body": "<p>Consider this quote from <em>C++ Templates: The Complete Guide (2nd Edition)</em>:</p>\n\n<blockquote>\n<pre><code>decltype(auto) ret{std::invoke(std::forward&lt;Callable&gt;(op),\n                               std::forward&lt;Args&gt;(args)...)};\n...\nreturn ret;\n</code></pre>\n  \n  <p>Note that declaring <code>ret</code> with <code>auto&amp;&amp;</code> is not correct. As a\n  reference, <code>auto&amp;&amp;</code> extends the lifetime of the returned value until\n  the end of its scope <strong>but not beyond the <code>return</code> statement to the\n  caller of the function</strong>.</p>\n</blockquote>\n\n<p>The author says that <code>auto&amp;&amp;</code> is not appropriate for perfect-forwarding a return value. However, doesn't <code>decltype(auto)</code> also form a reference to xvalue/lvalue?\nIMO, <code>decltype(auto)</code> then suffers from the same issue. Then, what's the point of the author?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The above code snippet shall go inside this function template.</p>\n\n<pre><code>template&lt;typename Callable, typename... Args&gt;\ndecltype(auto) call(Callable&amp;&amp; op, Args&amp;&amp;... args) {\n    // here\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1519834251, "post_id": 49033885, "comment_id": 85072501, "body": "Why? Because that&#39;s how C++ works. If you think about it you are compiling personal.cpp in both cases. In the first case because you put it on the command line and in the second case because you included it in a file that you put on the command line. Either way it&#39;s getting compiled."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1519834337, "post_id": 49033885, "comment_id": 85072560, "body": "What makes you think that you don&#39;t need to compile <code>Personal.cpp</code>?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519834991, "post_id": 49033885, "comment_id": 85072954, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work\">How does the compilation/linking process work?</a>"}, {"owner": {"reputation": 23, "user_id": 8765385, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a11479e7f034ac9d0d5ca76e1b63d52?s=128&d=identicon&r=PG&f=1", "display_name": "Newuser1234567", "link": "https://stackoverflow.com/users/8765385/newuser1234567"}, "edited": false, "score": 0, "creation_date": 1519835173, "post_id": 49033885, "comment_id": 85073060, "body": "thank you i understand my problem now!"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1519834803, "creation_date": 1519834803, "answer_id": 49034093, "question_id": 49033885, "link": "https://stackoverflow.com/questions/49033885/undefined-reference-to-constructor-c/49034093#49034093", "title": "undefined reference to constructor c++", "body": "<blockquote>\n  <p>Why do i need compile the Personal.cpp too?</p>\n</blockquote>\n\n<p>Because you use functions that are defined in that file. In particular, you use the functions <code>Personal::Personal</code> and <code>Personal::~Personal</code>.</p>\n\n<blockquote>\n  <p>Can someone help me?</p>\n</blockquote>\n\n<p>Make sure that all functions (that are odr-used) are defined in exactly one (or in all files, in case of inline functions) of the source files that you compile and link together.</p>\n"}], "owner": {"reputation": 23, "user_id": 8765385, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a11479e7f034ac9d0d5ca76e1b63d52?s=128&d=identicon&r=PG&f=1", "display_name": "Newuser1234567", "link": "https://stackoverflow.com/users/8765385/newuser1234567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519834803, "creation_date": 1519834192, "question_id": 49033885, "link": "https://stackoverflow.com/questions/49033885/undefined-reference-to-constructor-c", "title": "undefined reference to constructor c++", "body": "<p>I already searched and found a solution for this problem but i find this a little bit strange. Anyway my problem is this:</p>\n\n<p>Personal.h</p>\n\n<pre><code>class Personal\n{\n  public:\n   Personal();\n   int money;\n    ~Personal();\n\n  }\n</code></pre>\n\n<p>Personal.cpp</p>\n\n<pre><code>#include \"Personal.h\"\nPersonal::Personal()\n{\n money = 1800;\n}\n\nPersonal::~Personal(){};\n</code></pre>\n\n<p>Now i want to compile in main </p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Personal.h\"\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n std::vector&lt;Personal&gt; test(100);\n\n }\n</code></pre>\n\n<p>When I write: g++ -Wall main.cpp -o main it gives me :</p>\n\n<pre><code>undefine reference to Personal::Personal()\nundefine reference to Personal::~Personal()\n</code></pre>\n\n<p>The solution:</p>\n\n<pre><code>g++ -Wall Personal.cpp main.cpp -o main\n</code></pre>\n\n<p>Why do i need compile the Personal.cpp too?</p>\n\n<p>Or the other main version is to include instead of \"Personal.h\", \"Personal.cpp\"</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Personal.cpp\"\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n</code></pre>\n\n<p>Then the normal g++ -Wall main.cpp -o main works</p>\n\n<p>Can someone help me?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1519833946, "post_id": 49033789, "comment_id": 85072307, "body": "<code>char junk; int a; cin &gt;&gt; a; cin &gt;&gt; junk</code> should give you the idea..."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1519834072, "post_id": 49033789, "comment_id": 85072384, "body": "since you don&#39;t know which format you&#39;re going to get, you&#39;ll have to read a string and then parse that string."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1519834166, "post_id": 49033789, "comment_id": 85072439, "body": "And what should happen if the input is <code>1,2,3</code> or <code>1.2</code> or even <code>foo bar</code>?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519834394, "post_id": 49033789, "comment_id": 85072585, "body": "@UKMonkey, that&#39;s one way.  But you could also read and parse the input character-by-character, or you could do what PYA suggested (above), or you could do what dasblinkenlight suggested (below), and probably there&#39;s other ways."}, {"owner": {"reputation": 595, "user_id": 4411297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bac0fc34da57c7aec9313fb3e2e56798?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Gale", "link": "https://stackoverflow.com/users/4411297/daniel-gale"}, "edited": false, "score": 0, "creation_date": 1519834569, "post_id": 49033789, "comment_id": 85072680, "body": "Sounds like you need some more requirements on how the user will actually put in the input. cin extraction terminates on certain characters meaning you could overload the cin extraction operator to include &#39;.&#39; in the terminating characters."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 6, "last_activity_date": 1519834308, "creation_date": 1519834308, "answer_id": 49033920, "question_id": 49033789, "link": "https://stackoverflow.com/questions/49033789/c-dots-as-spaces/49033920#49033920", "title": "C++ Dots as spaces?", "body": "<p>You can do it with <a href=\"http://en.cppreference.com/w/cpp/io/c/fscanf\" rel=\"noreferrer\"><code>std::scanf</code></a>:</p>\n\n<pre><code>if (std::scanf(\"%d%*1[ .]%d%*1[ .]%d\", &amp;a, &amp;b, &amp;c) == 3) {\n    ... // Input was successful\n}\n</code></pre>\n\n<p>The tricky part is this for mat specifier: <code>%*1[ .]</code> It scans and ignores a single space or a single dot.</p>\n\n<p><a href=\"https://ideone.com/qHWuos\" rel=\"noreferrer\">Demo.</a></p>\n"}, {"tags": [], "owner": {"reputation": 595, "user_id": 4411297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bac0fc34da57c7aec9313fb3e2e56798?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Gale", "link": "https://stackoverflow.com/users/4411297/daniel-gale"}, "is_accepted": false, "score": 0, "last_activity_date": 1519843308, "creation_date": 1519843308, "answer_id": 49036436, "question_id": 49033789, "link": "https://stackoverflow.com/questions/49033789/c-dots-as-spaces/49036436#49036436", "title": "C++ Dots as spaces?", "body": "<p>You could use getline() to get the whole input and strtok() to tokenize the string. You may need to validate input etc. Here is an example.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\nvoid DoSomething(char* inputChar){\n    printf(\"%s\\n\", inputChar);\n}\n\nint main() {\n    char myInput[256];\n    char* pch;\n    char* delimiters = \" .\";\n\n    //Loop Through Input\n    while (cin.getline(myInput,256)) {\n        cout &lt;&lt; \"-\" &lt;&lt; myInput &lt;&lt; endl;\n        pch = strtok(myInput, delimiters);\n        while (pch != NULL){\n            //Individual input chars here\n            DoSomething(pch);\n            //Set NULL to find next delimited set of char\n            pch = strtok(NULL, delimiters);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://%20https://ideone.com/p1c2NZ\" rel=\"nofollow noreferrer\">Try it now!</a></p>\n\n<p>You can modify the delimiter list and whether or not to store or do something else with the inputs. Obviously getline() could be taken out of the outer while() if you only need to use it once. atoi() can try to cast the char* to int for you as well.</p>\n\n<p>I used input</p>\n\n<pre><code>1 2 3\n1.2.3\n1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 1, "last_activity_date": 1519844193, "creation_date": 1519844193, "answer_id": 49036656, "question_id": 49033789, "link": "https://stackoverflow.com/questions/49033789/c-dots-as-spaces/49036656#49036656", "title": "C++ Dots as spaces?", "body": "<p>This post is marked as C++.</p>\n\n<p>Here is some C++ to consider:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;cassert&gt;\n\n// forward \n\n// stream input, extract and discard junk char\nvoid trial1(std::string s);     \n\n// stream input, ignore() junk char,\n//   with error check for each integer input\nvoid trial2(std::string s); \n\n// sscanf of string\nvoid trial3(std::string s); \n\n\n\nint main(int , char** )\n{\n   std::cout &lt;&lt; \"\\n\";  // stream input, extract and discard junk char\n   trial1(\"1.2.3\");\n   trial1(\"1,2,3\");\n   trial1(\"1 2 3\");    // fail\n\n\n   std::cout &lt;&lt; \"\\n\";  // stream input, ignore junk char, error checks\n   trial2(\"1.2.3\");\n   trial2(\"1,2,3\");\n   trial2(\"1 2 3\");\n   trial2(\"11.12.13\");\n   trial2(\"111,222,333\");\n   trial2(\"1234 1234 1234\");\n   trial2(\"1234 -12345678 1234\");\n   trial2(\"1x2y3\");\n   trial2(\"1xx2yy3\");    // fail - ignore skips 1 char, not 2\n\n\n   std::cout &lt;&lt; \"\\n\"; // sscanf of std::string\n   trial3(\"1.2.3\");\n   trial3(\"1 2 3\");\n   trial3(\"1,2,3\");\n   trial3(\"111,222,333\");\n   trial3(\"1234 -12345678 1234\");\n   trial3(\"1234,1234,1234\");\n   trial3(\"1xx2yy3\");    // fail \n\n\n   std::cout &lt;&lt; \"\\n\";  // requirements?\n   trial1(\"foo bar\");\n   trial2(\"foo bar\");\n   trial3(\"foo bar\");\n}\n\n\nvoid trial1(std::stringstream&amp; sin)\n{\n   char junk;\n   int a = -1;  sin &gt;&gt; a &gt;&gt; junk;\n   int b = -1;  sin &gt;&gt; b &gt;&gt; junk;\n   int c = -1;  sin &gt;&gt; c &gt;&gt; junk;\n\n   std::cout &lt;&lt; \" --&gt;  \" &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; c;\n}\nvoid trial1(std::string s)\n{\n   std::cout &lt;&lt; '\\n' &lt;&lt; __FUNCTION__ &lt;&lt; \"  '\" &lt;&lt; s &lt;&lt; \"'\";\n   std::stringstream sin (s);\n   trial1(sin);\n}\n\n\nvoid trial2(std::stringstream&amp; sin)\n{\n   int a = -1;\n   int b = -1;\n   int c = -1;\n\n   do{\n      sin &gt;&gt; a;\n      if(!sin.good() &amp;&amp; !sin.eof()) // check for error\n         std::cerr &lt;&lt; \"  error on a \" &lt;&lt; std::flush;\n\n      sin.ignore();   // ignore 1 char\n\n      sin &gt;&gt; b;\n      if(!sin.good() &amp;&amp; !sin.eof()) // check for error\n         std::cerr &lt;&lt; \"  error on b \" &lt;&lt; std::flush;\n\n      sin.ignore();\n\n      sin &gt;&gt; c;\n      if(!sin.good() &amp;&amp; !sin.eof()) // check for error\n         std::cerr &lt;&lt; \"  error on c \" &lt;&lt; std::flush;\n\n   }while(0);\n\n   std::cout &lt;&lt; \" --&gt;  \" &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; c;\n}\nvoid trial2(std::string s)\n{\n   std::cout &lt;&lt; '\\n' &lt;&lt; __FUNCTION__ &lt;&lt; \"  '\" &lt;&lt; s &lt;&lt; \"'\";\n   std::stringstream sin (s);\n   trial2(sin);\n}\n\n\n\nvoid trial3(std::string s)\n{\n   std::cout &lt;&lt; '\\n' &lt;&lt; __FUNCTION__ &lt;&lt; \"  '\" &lt;&lt; s &lt;&lt; \"'\";\n   int a = -1;\n   int b = -1;\n   int c = -1;    // note added ','----v---------v\n   if (std::sscanf(s.c_str(), \"%d%*1[ .,]%d%*1[ .,]%d\", &amp;a, &amp;b, &amp;c) == 3)\n      std::cout &lt;&lt; \" --&gt;  \" &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; c;\n   else\n      std::cout &lt;&lt; \" --&gt;  \" &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; \" \" &lt;&lt; c &lt;&lt; \"         FAILED.\" &lt;&lt; std::flush;\n}\n</code></pre>\n\n<p>with output:</p>\n\n<pre><code>trial1  '1.2.3' --&gt;  1 2 3\ntrial1  '1,2,3' --&gt;  1 2 3\ntrial1  '1 2 3' --&gt;  1 3 -1\n\ntrial2  '1.2.3' --&gt;  1 2 3\ntrial2  '1,2,3' --&gt;  1 2 3\ntrial2  '1 2 3' --&gt;  1 2 3\ntrial2  '11.12.13' --&gt;  11 12 13\ntrial2  '111,222,333' --&gt;  111 222 333\ntrial2  '1234 1234 1234' --&gt;  1234 1234 1234\ntrial2  '1234 -12345678 1234' --&gt;  1234 -12345678 1234\ntrial2  '1x2y3' --&gt;  1 2 3\ntrial2  '1xx2yy3'  error on b   error on c  --&gt;  1 0 -1\n\ntrial3  '1.2.3' --&gt;  1 2 3\ntrial3  '1 2 3' --&gt;  1 2 3\ntrial3  '1,2,3' --&gt;  1 2 3\ntrial3  '111,222,333' --&gt;  111 222 333\ntrial3  '1234 -12345678 1234' --&gt;  1234 -12345678 1234\ntrial3  '1234,1234,1234' --&gt;  1234 1234 1234\ntrial3  '1xx2yy3' --&gt;  1 -1 -1         FAILED.\n\ntrial1  'foo bar' --&gt;  0 -1 -1\ntrial2  'foo bar'  error on a   error on b   error on c  --&gt;  0 -1 -1\ntrial3  'foo bar' --&gt;  -1 -1 -1         FAILED.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1519844430, "creation_date": 1519844430, "answer_id": 49036732, "question_id": 49033789, "link": "https://stackoverflow.com/questions/49033789/c-dots-as-spaces/49036732#49036732", "title": "C++ Dots as spaces?", "body": "<p>You could read the text as a string, replace the '.' with space, then use <code>std::istringstream</code> to convert to numbers:</p>\n\n<pre><code>std::string text_read;\nstd::getline(cin, text_read);\nstd::string::size_type position = text_read.find('.');\nwhile (position != std::string::npos)\n{\n  text_read[position] = ' ';\n  position = text_read.find('.');\n}\nint a;\nint b;\nint c;\nstd::istringstream text_stream(text_read);\ntext_stream &gt;&gt; a;\ntext_stream &gt;&gt; b;\ntext_stream &gt;&gt; c;\n</code></pre>\n\n<p>This is a brute force technique.  You may be able to optimize using <code>std::transform</code>.  </p>\n"}], "owner": {"reputation": 21, "user_id": 9424510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e5670b70c4c06ed411c4939dbe6de20?s=128&d=identicon&r=PG&f=1", "display_name": "zoey xeen", "link": "https://stackoverflow.com/users/9424510/zoey-xeen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1519844430, "creation_date": 1519833877, "last_edit_date": 1519835401, "question_id": 49033789, "link": "https://stackoverflow.com/questions/49033789/c-dots-as-spaces", "title": "C++ Dots as spaces?", "body": "<p>Let's say I have </p>\n\n<pre><code>int a; cin &gt;&gt; a;   \nint b; cin &gt;&gt; b;\nint c; cin &gt;&gt; c;  \n</code></pre>\n\n<p>I would like to know how I can get same results from both inputs:</p>\n\n<p>1.2.3 and 1 2 3</p>\n\n<p>so that a would be 1, b would be 2 and c would be 3 if I input 1.2.3</p>\n"}, {"tags": ["c++", "c++11", "boost-asio", "asio"], "comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1519838043, "post_id": 49033780, "comment_id": 85074973, "body": "If you drop the <code>transfer_exactly</code>s you can just send the string in one read/write pair, see <a href=\"https://stackoverflow.com/a/47540127/2610810\">stackoverflow.com/a/47540127/2610810</a>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1519843360, "post_id": 49033780, "comment_id": 85077792, "body": "@Caleth that does nothing to fix the protocol flaw."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1519922563, "last_edit_date": 1519922563, "creation_date": 1519875770, "answer_id": 49042276, "question_id": 49033780, "link": "https://stackoverflow.com/questions/49033780/sequential-communication-failed-with-boostasiostreambuf-in-binary-way/49042276#49042276", "title": "Sequential communication failed with boost::asio::streambuf in binary way?", "body": "<p>You <em>can</em> send the size binary, but that requires you to take architectural differences between devices and operating systems into account\u00b9.</p>\n\n<p>Here's my take on actually coding the protocol reusably:</p>\n\n<pre><code>//#define BOOST_ASIO_ENABLE_HANDLER_TRACKING\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/endian/arithmetic.hpp&gt;\n\nnamespace ba = boost::asio;\nusing ba::ip::tcp;\nusing error_code = boost::system::error_code;\n\nnamespace Protocol { // your library\n\n    using net_size_t = boost::endian::big_int32_t; // This protocol uses Big-endian network byte order\n\n    template &lt;typename Derived, typename Token, typename Sig = void(error_code, size_t)&gt; \n    struct base_async_op : std::enable_shared_from_this&lt;Derived&gt; {\n        using base_type = base_async_op&lt;Derived, Token, Sig&gt;;\n\n        template &lt;typename DeducedToken&gt;\n        base_async_op(DeducedToken &amp;&amp;token) : _token(std::forward&lt;DeducedToken&gt;(token)) {}\n\n        using _Token   = std::decay_t&lt;Token&gt;;\n        using _Init    = ba::async_completion&lt;_Token, Sig&gt;;\n        using _Handler = typename _Init::completion_handler_type;\n\n        _Token _token;\n        _Init _init {_token};\n\n        auto get_allocator() const noexcept { \n            return (boost::asio::get_associated_allocator)(_init.completion_handler);\n        }\n        using executor_type = ba::associated_executor_t&lt;_Handler&gt;;\n        executor_type get_executor() const noexcept {\n            return (boost::asio::get_associated_executor)(_init.completion_handler);\n        }\n\n        Derived&amp; derived()             { return static_cast&lt;Derived&amp;&gt;(*this);       } \n        Derived const&amp; derived() const { return static_cast&lt;Derived const&amp;&gt;(*this); } \n\n        template &lt;typename F&gt;\n        auto wrap(F&amp;&amp; f) const {\n            //std::cout &lt;&lt; \"WRAP: \" &lt;&lt; typeid(derived().get_executor()).name() &lt;&lt; \"\\n\";\n            return ba::bind_executor(derived().get_executor(), std::forward&lt;F&gt;(f));\n        }\n    };\n\n    template &lt;typename Derived, typename Stream, typename Token, typename Sig = void(error_code, size_t)&gt; \n    struct stream_async_op : base_async_op&lt;Derived, Token, Sig&gt; {\n        using base_type = stream_async_op&lt;Derived, Stream, Token, Sig&gt;;\n\n        template &lt;typename DeducedToken&gt;\n        stream_async_op(Stream&amp; s, DeducedToken &amp;&amp;token) : base_async_op&lt;Derived, Token, Sig&gt;(std::forward&lt;DeducedToken&gt;(token)), _stream(s)  {}\n\n        Stream&amp; _stream;\n\n        using executor_type = ba::associated_executor_t&lt;typename stream_async_op::_Handler, decltype(std::declval&lt;Stream&gt;().get_executor())&gt;;\n        executor_type get_executor() const noexcept {\n            return (boost::asio::get_associated_executor)(this-&gt;_init.completion_handler, _stream.get_executor());\n        }\n    };\n\n    template &lt;typename AsyncStream, typename Buffer, typename Token&gt;\n    auto async_transmit(AsyncStream&amp; s, Buffer message_buffer, Token&amp;&amp; token) {\n\n        struct op : stream_async_op&lt;op, AsyncStream, Token&gt; {\n            using op::base_type::base_type;\n            using op::base_type::_init;\n            using op::base_type::_stream;\n\n            net_size_t _length[1];\n\n            auto run(Buffer buffer) {\n                auto self = this-&gt;shared_from_this();\n                _length[0] = ba::buffer_size(buffer);\n\n                ba::async_write(_stream, std::vector&lt;ba::const_buffer&gt; { ba::buffer(_length), buffer },\n                    this-&gt;wrap([self,this](error_code ec, size_t transferred) { _init.completion_handler(ec, transferred); }));\n\n                return _init.result.get();\n            }\n        };\n\n        return std::make_shared&lt;op&gt;(s, std::forward&lt;Token&gt;(token))-&gt;run(message_buffer);\n    }\n\n    template &lt;typename AsyncStream, typename Buffer, typename Token&gt;\n    auto async_receive(AsyncStream&amp; s, Buffer&amp; output, Token&amp;&amp; token) {\n\n        struct op : stream_async_op&lt;op, AsyncStream, Token&gt; {\n            using op::base_type::base_type;\n            using op::base_type::_init;\n            using op::base_type::_stream;\n\n            net_size_t _length[1] = {0};\n\n            auto run(Buffer&amp; output) {\n                auto self = this-&gt;shared_from_this();\n\n                ba::async_read(_stream, ba::buffer(_length), this-&gt;wrap([self, this, &amp;output](error_code ec, size_t transferred) {\n                    if (ec)\n                        _init.completion_handler(ec, transferred);\n                    else\n                        ba::async_read(_stream, ba::dynamic_buffer(output), ba::transfer_exactly(_length[0]),\n                            this-&gt;wrap([self, this](error_code ec, size_t transferred) { \n                                _init.completion_handler(ec, transferred);\n                            }));\n                }));\n\n                return _init.result.get();\n            }\n        };\n\n        return std::make_shared&lt;op&gt;(s, std::forward&lt;Token&gt;(token))-&gt;run(output);\n    }\n\n    template &lt;typename Output = std::string, typename AsyncStream, typename Token&gt;\n    auto async_receive(AsyncStream&amp; s, Token&amp;&amp; token) {\n\n        struct op : stream_async_op&lt;op, AsyncStream, Token, void(error_code, Output)&gt; {\n            using op::base_type::base_type;\n            using op::base_type::_init;\n            using op::base_type::_stream;\n\n            Output _output;\n            net_size_t _length[1] = {0};\n\n            auto run() {\n                auto self = this-&gt;shared_from_this();\n\n                ba::async_read(_stream, ba::buffer(_length), [self,this](error_code ec, size_t) {\n                        if (ec)\n                            _init.completion_handler(ec, std::move(_output));\n                        else\n                            ba::async_read(_stream, ba::dynamic_buffer(_output), ba::transfer_exactly(_length[0]),\n                                [self,this](error_code ec, size_t) { _init.completion_handler(ec, std::move(_output)); });\n                    });\n\n                return _init.result.get();\n            }\n        };\n\n        return std::make_shared&lt;op&gt;(s, std::forward&lt;Token&gt;(token))-&gt;run();\n    }\n\n} // Protocol\n\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nint main() {\n\n    ba::io_context io;\n    tcp::socket sock(io);\n    sock.connect({tcp::v4(), 6767});\n\n    auto cont = [](auto name, auto continuation = []{}) { return [=](error_code ec, size_t transferred) {\n        std::cout &lt;&lt; name &lt;&lt; \" completed (\" &lt;&lt; transferred &lt;&lt; \", \" &lt;&lt; ec.message() &lt;&lt; \")\\n\";\n        if (!ec) continuation();\n    }; };\n    auto report = [=](auto name) { return cont(name, []{}); };\n\n    // send chain\n    std::string hello = \"Hello\", world = \"World\";\n    Protocol::async_transmit(sock, ba::buffer(hello),\n            cont(\"Send hello\", [&amp;] { Protocol::async_transmit(sock, ba::buffer(world), report(\"Send world\")); }\n        ));\n#ifndef DEMO_USE_FUTURE\n    // receive chain\n    std::string object1, object2;\n    Protocol::async_receive(sock, object1,\n            cont(\"Read object 1\", [&amp;] { Protocol::async_receive(sock, object2, report(\"Read object 2\")); }));\n\n    io.run();\n\n    std::cout &lt;&lt; \"Response object 1: \" &lt;&lt; std::quoted(object1) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Response object 2: \" &lt;&lt; std::quoted(object2) &lt;&lt; \"\\n\";\n#else\n    // also possible, alternative completion mechanisms:\n    std::future&lt;std::string&gt; fut = Protocol::async_receive(sock, ba::use_future);\n    io.run();\n\n    std::cout &lt;&lt; \"Response object: \" &lt;&lt; std::quoted(fut.get()) &lt;&lt; \"\\n\";\n#endif\n\n}\n</code></pre>\n\n<p>When talking to a test server like:</p>\n\n<pre><code>xxd -p -r &lt;&lt;&lt; '0000 0006 4e6f 2077 6179 0000 0005 4a6f 73c3 a90a' | netcat -l -p 6767 | xxd\n</code></pre>\n\n<p>The program prints</p>\n\n<pre><code>Send hello completed (9, Success)\nSend world completed (9, Success)\nRead object 1 completed (6, Success)\nRead object 2 completed (5, Success)\nResponse object 1: \"No way\"\nResponse object 2: \"Jos\u00e9\"\n</code></pre>\n\n<p>And the netcat side prints:</p>\n\n<pre><code>00000000: 0000 0005 4865 6c6c 6f00 0000 0557 6f72  ....Hello....Wor\n00000010: 6c64                                     ld\n</code></pre>\n\n<p>Enabling handler tracking allows you to use <code>handlerviz.pl</code> to visualize the call chains: <a href=\"https://i.stack.imgur.com/FgvDk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FgvDk.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p><strong>Note</strong> You can change <code>big_int32_t</code> to <code>little_int32_t</code> without any further change. Of course, you should change the payload on the server side to match:</p>\n\n<pre><code>xxd -p -r &lt;&lt;&lt; '0600 0000 4e6f 2077 6179 0500 0000 4a6f 73c3 a90a' | netcat -l -p 6767 | xxd\n</code></pre>\n</blockquote>\n\n<p>\u00b9 Endianness, e.g. using <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/endian/doc/index.html\" rel=\"nofollow noreferrer\">Boost Endian</a> or <code>::ntohs</code>, <code>::ntohl</code>, <code>::htons</code> and <code>::htonl</code></p>\n"}], "owner": {"reputation": 448, "user_id": 9414424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9414424", "link": "https://stackoverflow.com/users/9414424/user9414424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 49042276, "answer_count": 1, "score": 1, "last_activity_date": 1519922563, "creation_date": 1519833861, "last_edit_date": 1519835616, "question_id": 49033780, "link": "https://stackoverflow.com/questions/49033780/sequential-communication-failed-with-boostasiostreambuf-in-binary-way", "title": "Sequential communication failed with boost::asio::streambuf in binary way?", "body": "<p>Using <code>boost::asio</code>, I'm coding network stuff.\nI tried to build a simple send-and-receive-string protocol.\nThe sender first send the string size to the receiver. Then the sender sends the actual string to the receiver.</p>\n\n<p>In particular, I designed the following two protocols.</p>\n\n<ul>\n<li><p>A sender holding a string sends it to a receiver. Upon receiving it, the receiver shows the  string.</p></li>\n<li><p>Execute above protocol sequentially (two times).</p></li>\n</ul>\n\n<p>I built the above protocols as shown below:\nIf I execute this protocol once, that works fine.\nHowever, if i execute this protocol more than once (e.g. two times), the\n string size that the receiver receives gets wrong.</p>\n\n<p>First time : 1365 bytes.</p>\n\n<p>Second time : 779073 bytes. (just read not 779073 but 7790)</p>\n\n<p>I found that <code>os &lt;&lt; data_size</code> is not done in a binary way. \"779073\" is just sent as 6 bytes string. But the receiver just reads 4bytes of it.\nHow to send a binary data and to receive a binary data using boost::asio and boost::asio::streambuf?</p>\n\n<p><strong>Receiver</strong></p>\n\n<pre><code>// socket is already defined\n// ** first step: recv data size\nboost::asio::streambuf buf;\nboost::asio::read(\n   socket,\n   buf, \n   boost::asio::transfer_exactly(sizeof(uint32_t))\n);\nstd::istream iss(&amp;buf);\nuint32_t read_len;\niss &gt;&gt;  read_len;\n\n// ** second step: recv payload based on the data size\nboost::asio::streambuf buf2;\nread_len = boost::asio::read(socket, buf2, \nboost::asio::transfer_exactly(read_len), error);\ncout &lt;&lt; \"  read \"&lt;&lt; read_len &lt;&lt; \" bytes payload\" &lt;&lt; endl; \nstd::istream is_payload(&amp;buf2);\nstd::string str;\nis_payload &gt;&gt; str;\ncout &lt;&lt; str &lt;&lt; endl; \n</code></pre>\n\n<p><strong>Sender</strong></p>\n\n<pre><code>// socket is already defined\nstring str=...;   // some string to be sent\n// ** first step: tell the string size to the reciever\nuint32_t data_size = str.size();\nboost::asio::streambuf send_buf;\nstd::ostream os(&amp;send_buf);\nos &lt;&lt; data_size;\nsize_t sent_byte = boost::asio::write(socket, send_buf.data());\ncout &lt;&lt; sent_byte &lt;&lt; endl; // debug purpose\n\n// ** second step: send the actual string (payload)\nsent_byte = boost::asio::write(socket, boost::asio::buffer(reinterpret_cast&lt;const char*&gt;(&amp;str[0]), data_size));\ncout &lt;&lt; sent_byte &lt;&lt; endl; // debug purpose\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 6, "creation_date": 1519833618, "post_id": 49033671, "comment_id": 85072070, "body": "<code>CreateFolder(crtfol);</code> -&gt; <code>CreateFolder(crtfol.c_str());</code>"}, {"owner": {"reputation": 1762, "user_id": 2285734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cPrBt.jpg?s=128&g=1", "display_name": "Korashen", "link": "https://stackoverflow.com/users/2285734/korashen"}, "edited": false, "score": 1, "creation_date": 1519833622, "post_id": 49033671, "comment_id": 85072077, "body": "Spamming tags is not a good way to make friends. Please limit the tags to the relevant ones."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1519834235, "post_id": 49033671, "comment_id": 85072488, "body": "BTW: what is the <code>Sleep(10000);</code> for?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519834767, "post_id": 49033671, "comment_id": 85072794, "body": "@MichaelWalz: It&#39;s just to allow enough time for the computer to do the string concatenation, obviously."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9424238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "APP", "link": "https://stackoverflow.com/users/9424238/app"}, "edited": false, "score": 0, "creation_date": 1519977238, "post_id": 49033785, "comment_id": 85134589, "body": "Thank You everyone! I tried some changes and guess what! Yes, it has worked. I am really vary happy, thank you guys"}], "tags": [], "owner": {"reputation": 2204, "user_id": 7000960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WguQ0.jpg?s=128&g=1", "display_name": "farbiondriven", "link": "https://stackoverflow.com/users/7000960/farbiondriven"}, "is_accepted": false, "score": 0, "last_activity_date": 1519833868, "creation_date": 1519833868, "answer_id": 49033785, "question_id": 49033671, "link": "https://stackoverflow.com/questions/49033671/string-in-folder-name-in-c/49033785#49033785", "title": "String in Folder Name in C++", "body": "<p>Change it to:</p>\n\n<pre><code>Path=\"Core\\\\USERS\\\\\";\ncrtfol = Path + usrnm;\nSleep(10000);\nCreateFolder(crtfol.c_str());\n</code></pre>\n\n<p>The function CreateFolder is not expecting a std::string as input parameter, but a C style string.</p>\n"}], "owner": {"reputation": 1, "user_id": 9424238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "APP", "link": "https://stackoverflow.com/users/9424238/app"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1519833868, "creation_date": 1519833518, "last_edit_date": 1519833687, "question_id": 49033671, "link": "https://stackoverflow.com/questions/49033671/string-in-folder-name-in-c", "title": "String in Folder Name in C++", "body": "<p>I want to name the folder according to the username given by the user. However, to do that (in the method in which I am doing), we have to enter the path of the folder including the name of the folder. I know the path, but, the name of the folder should be the username. The following is my code. Please help me! (Thanks for sharing your knowledge and time, in advance)</p>\n\n<pre><code>Path=\"Core\\\\USERS\\\\\";\ncrtfol = Path + usrnm;\nSleep(10000);\nCreateFolder(crtfol);\n</code></pre>\n\n<p>'usrnm' is a string for taking in  the username of the user.\n'Path' is a string in which I have entered the path of the folder.\n'crtfol' is also a string used to combine the path and the username.\n'CreateFolder' is the fuction I am using to make folder.\nIn function CreateFolder, 'crtfol' is the name to be given to the folder.</p>\n\n<p><strong>Error while compiling</strong>:</p>\n\n<blockquote>\n  <p>cannot convert 'std::string {aka std::basic_string}' to 'const char*' for argument '1' to 'void CreateFolder(const char*)'|</p>\n</blockquote>\n\n<p>Compiling done in Codeblocks.</p>\n\n<p>Thank You!</p>\n"}, {"tags": ["c++", "opengl", "image-processing", "filter"], "comments": [{"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1519834753, "post_id": 49033593, "comment_id": 85072789, "body": "If you set R=G=B, they should be grey (or white or black). So I think there is a bug.  Do you mean you set &quot;V&quot; (of HSV) to R=G=B?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1519836795, "post_id": 49033593, "comment_id": 85074171, "body": "Please, post code so as to see the filter process."}, {"owner": {"reputation": 9, "user_id": 6099828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0FEcYSMO9FE/AAAAAAAAAAI/AAAAAAAAAe8/tgziBmbaJGk/photo.jpg?sz=128", "display_name": "Aref Ariyapour", "link": "https://stackoverflow.com/users/6099828/aref-ariyapour"}, "edited": false, "score": 0, "creation_date": 1519842660, "post_id": 49033593, "comment_id": 85077461, "body": "No beside converting the color space to HSV I calculate the luminance value also: Y=0.2126R+0.7152G+0.0722B and then I set RGB to Y"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1519847144, "post_id": 49033593, "comment_id": 85079777, "body": "How do you expect us to know what is going on if you don&#39;t show what you do?"}, {"owner": {"reputation": 9, "user_id": 6099828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0FEcYSMO9FE/AAAAAAAAAAI/AAAAAAAAAe8/tgziBmbaJGk/photo.jpg?sz=128", "display_name": "Aref Ariyapour", "link": "https://stackoverflow.com/users/6099828/aref-ariyapour"}, "edited": false, "score": 0, "creation_date": 1519903450, "post_id": 49033593, "comment_id": 85101404, "body": "I just added the fragment shader. It&#39;s just a simple HSV transformation and also luminance value calculated and at the end, I decide which pixels should be drawn which not."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6099828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0FEcYSMO9FE/AAAAAAAAAAI/AAAAAAAAAe8/tgziBmbaJGk/photo.jpg?sz=128", "display_name": "Aref Ariyapour", "link": "https://stackoverflow.com/users/6099828/aref-ariyapour"}, "edited": false, "score": 0, "creation_date": 1519981913, "post_id": 49054638, "comment_id": 85136889, "body": "Thanks, you are right. It should be exactly the uninitialized framebuffer."}], "tags": [], "owner": {"reputation": 31, "user_id": 4219658, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ud5CfBLZEFM/AAAAAAAAAAI/AAAAAAAAAE0/JFyLt9VV580/photo.jpg?sz=128", "display_name": "Pending Chaos", "link": "https://stackoverflow.com/users/4219658/pending-chaos"}, "is_accepted": false, "score": 0, "last_activity_date": 1519922621, "creation_date": 1519922621, "answer_id": 49054638, "question_id": 49033593, "link": "https://stackoverflow.com/questions/49033593/colourful-noise-in-luminance-filter-opengl/49054638#49054638", "title": "colourful Noise in luminance filter opengl", "body": "<p>The purple and green pixels are probably uninitialized memory.</p>\n\n<p>gl_FragColor is not guaranteed to be initialized at the start of a shader, so initializing it before the return statements on lines 70 and 78 should fix the issue.</p>\n\n<p>If it does not and an uninitialized framebuffer is used, then it may be because of a different (and less likey) cause:</p>\n\n<ul>\n<li>It may be because of blending. Try disabling it or ensuring gl_FragColor.a is 1.</li>\n<li>It may be because the stencil buffer is exposing it. Try disabling stencil testing or ensuring that all pixels pass the stencil test.</li>\n</ul>\n\n<p>Alternatively, if it is caused by blending of the stencil test, you could initialize the framebuffer with something like glClear(). </p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 6099828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0FEcYSMO9FE/AAAAAAAAAAI/AAAAAAAAAe8/tgziBmbaJGk/photo.jpg?sz=128", "display_name": "Aref Ariyapour", "link": "https://stackoverflow.com/users/6099828/aref-ariyapour"}, "edited": false, "score": 0, "creation_date": 1519981858, "post_id": 49057050, "comment_id": 85136851, "body": "Ahh you are right. There are several places that I don&#39;t, do anything and simply return. Thanks a lot"}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1519931411, "creation_date": 1519931411, "answer_id": 49057050, "question_id": 49033593, "link": "https://stackoverflow.com/questions/49033593/colourful-noise-in-luminance-filter-opengl/49057050#49057050", "title": "colourful Noise in luminance filter opengl", "body": "<p>While your fragment \"returns\" without setting a fragment color, like here:</p>\n\n<pre><code> else {\n     // r = g = b = 0        // s = 0, v is undefined\n     s = 0.0;\n     h = -1.0;\n     return; //&lt;&lt;&lt;&lt;==== NO gl_FragColor set\n</code></pre>\n\n<p>I think this code lacks a <em>else-path</em> for the cases <code>s &lt;= 0.7</code> or <code>h &lt;= 320.0</code>:</p>\n\n<pre><code>if(v &gt;0.8){\n     if(s &gt; 0.7){\n         if( h &gt;320.0  &amp;&amp; h &lt; 360.0){\n\n             if(luminance  &gt; 1.0)\n                 gl_FragColor = vec4(vec3(1.0), textureColor.a);\n             else\n                 gl_FragColor = vec4(vec3(luminance ), textureColor.a);\n         }\n         //&lt;&lt;&lt;&lt;===== NO 'else' for h&lt;320\n     }\n     ///&lt;&lt;&lt;&lt;====== NO 'else' for s&lt;0.7\n }else{\n     gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n }\n</code></pre>\n\n<p>Thus, there are many cases where the fragment (current pixel on image) remains untouched.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 6099828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0FEcYSMO9FE/AAAAAAAAAAI/AAAAAAAAAe8/tgziBmbaJGk/photo.jpg?sz=128", "display_name": "Aref Ariyapour", "link": "https://stackoverflow.com/users/6099828/aref-ariyapour"}, "is_accepted": false, "score": 0, "last_activity_date": 1520243121, "last_edit_date": 1520243121, "creation_date": 1519984784, "answer_id": 49066792, "question_id": 49033593, "link": "https://stackoverflow.com/questions/49033593/colourful-noise-in-luminance-filter-opengl/49066792#49066792", "title": "colourful Noise in luminance filter opengl", "body": "<p>So my mistake was some places which I have returned but didn't set the gl_FragColor. In my case, any where which the process failed or didn't meet the conditions I have to set:</p>\n\n<pre><code>gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n</code></pre>\n\n<p>The corrected code should look like:</p>\n\n<pre><code>precision highp float;\n\nvarying vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\n\nconst highp vec3 W = vec3(0.299, 0.587, 0.114);\n\nvoid main()\n{\n lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);\n float luminance = dot(textureColor.rgb, W);\n\n //RF: test\n float r = textureColor.r;\n float g = textureColor.g;\n float b = textureColor.b;\n float h;\n float s;\n float v;\n\n float min = 0.0;\n float max = 0.0;\n float delta = 0.0;\n\n // min = MIN( r, g, b );\n if(r &gt;= g) {\n     if(r &gt;= b) {\n         max = r;\n     }\n     else {\n         max = b;\n     }\n }\n else {\n     if(g &gt;= b) {\n         max = g;\n     }\n     else {\n         max = b;\n     }\n }\n\n if(r &lt; g) {\n     if(r &lt; b) {\n         min = r;\n     }\n     else {\n         min = b;\n     }\n }\n else {\n     if(g &lt; b) {\n         min = g;\n     }\n     else {\n         min = b;\n     }\n }\n\n\n v = max;                // v\n delta = max - min;\n\n if (delta == 0.0) {\n     h = 0.0;\n     s = 0.0;\n     gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n     return;\n }\n else if( max != 0.0 )\n     s = delta / max;        // s\n else {\n     s = 0.0;\n     h = -1.0;\n     gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n     return;\n }\n if( r == max ){\n     h = ( g - b ) / delta;         // between yellow &amp; magenta\n\n     h = mod(h, 6.0);\n }\n else if( g == max )\n     h = 2.0 + ( b - r ) / delta;    // between cyan &amp; yellow\n else\n     h = 4.0 + ( r - g ) / delta;    // between magenta &amp; cyan\n h = h * 60.0;                // degrees\n if( h &lt; 0.0 )\n     h = h + 360.0;\n //---------------------------------------------------\n\n if(v &gt;0.8){\n     if(s &gt; 0.2){\n         if( h &gt;320.0  &amp;&amp; h &lt; 360.0){\n             gl_FragColor = vec4(vec3(luminance ), textureColor.a);\n             return;\n         }\n     }\n }\n gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n</code></pre>\n\n<p>and then it works great:\n<a href=\"https://i.stack.imgur.com/KFzQU.jpg\" rel=\"nofollow noreferrer\">Resulting Image</a></p>\n"}], "owner": {"reputation": 9, "user_id": 6099828, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0FEcYSMO9FE/AAAAAAAAAAI/AAAAAAAAAe8/tgziBmbaJGk/photo.jpg?sz=128", "display_name": "Aref Ariyapour", "link": "https://stackoverflow.com/users/6099828/aref-ariyapour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1520243121, "creation_date": 1519833304, "last_edit_date": 1519985872, "question_id": 49033593, "link": "https://stackoverflow.com/questions/49033593/colourful-noise-in-luminance-filter-opengl", "title": "colourful Noise in luminance filter opengl", "body": "<p>My final goal is to detect a laser line in my picture. To do so, first I convert my RGB colour space to HSV(in order to examine brightness). Then I will select only the pixels which have a certain value of H, S and V (the brightest pixels with a certain colour (red in my case)).</p>\n\n<p>The pixels which satisfy these values I set their luminance for all 3 channels of RGB and if they don't satisfy I set them as black.</p>\n\n<p>Here comes my problem and question:\n<a href=\"https://i.stack.imgur.com/SUKkM.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SUKkM.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/N3K3G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N3K3G.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/LNRL4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LNRL4.png\" alt=\"enter image description here\"></a></p>\n\n<p>As I mentioned, I would have either a black pixel or a grey (luminance) pixel. I don't understand how these purple or green pixels come into my picture. They are like noise and they are constantly changing!\nAt first, I thought I have these colour because of values bigger than 1. But I think OpenGL clamps the values to 0-1( I even tried it myself but no success).</p>\n\n<p>Anyone know what causes this effect?\nAny help or idea is appreciated.</p>\n\n<p>Here is my fragment shader:</p>\n\n<pre><code>precision highp float;\n\nvarying vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\n\n\nconst highp vec3 W = vec3(0.299, 0.587, 0.114);\n\n\nvoid main()\n{\n lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);\n\n float luminance = dot(textureColor.rgb, W);\n\n float r = textureColor.r;\n float g = textureColor.g;\n float b = textureColor.b;\n float h;\n float s;\n float v;\n\n float min = 0.0;\n float max = 0.0;\n float delta = 0.0;\n\n if(r &gt;= g) {\n     if(r &gt;= b) {\n         max = r;\n     }\n     else {\n         max = b;\n     }\n }\n else {\n     if(g &gt;= b) {\n         max = g;\n     }\n     else {\n         max = b;\n     }\n }\n\n // max = MAX( r, g, b );\n if(r &lt; g) {\n     if(r &lt; b) {\n         min = r;\n     }\n     else {\n         min = b;\n     }\n }\n else {\n     if(g &lt; b) {\n         min = g;\n     }\n     else {\n         min = b;\n     }\n }\n\n\n v = max;                // v\n delta = max - min;\n\n if (delta == 0.0) {\n     h = 0.0;\n     s = 0.0;\n     return;\n }\n else if( max != 0.0 )\n     s = delta / max;        // s\n else {\n     // r = g = b = 0        // s = 0, v is undefined\n     s = 0.0;\n     h = -1.0;\n     return;\n }\n if( r == max ){\n     h = ( g - b ) / delta;         // between yellow &amp; magenta\n\n     h = mod(h, 6.0);\n }\n else if( g == max )\n     h = 2.0 + ( b - r ) / delta;    // between cyan &amp; yellow\n else\n     h = 4.0 + ( r - g ) / delta;    // between magenta &amp; cyan\n\n\n h = h * 60.0;                // degrees\n\n if( h &lt; 0.0 )\n     h = h + 360.0;\n //HSV transformation ends here\n if(v &gt;0.8){\n     if(s &gt; 0.7){\n         if( h &gt;320.0  &amp;&amp; h &lt; 360.0){\n\n             if(luminance  &gt; 1.0)\n                 gl_FragColor = vec4(vec3(1.0), textureColor.a);\n             else\n                 gl_FragColor = vec4(vec3(luminance ), textureColor.a);\n         }\n\n     }\n }else{\n     gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n }\n}\n</code></pre>\n\n<p>I have to mention that, the big white spot is sunlight and it's so bright that it passes my HSV conditions at the end. That's not my problem now, but these purple noise like pixels which are there or the green noises around the picture are my problem. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1519833204, "post_id": 49033519, "comment_id": 85071794, "body": "You do build with the <code>AJV.cpp</code> source file? Or link with the object file created from that source file? How do you build your program? From the command line? What command do you use? Or do you use an IDE? Is the <code>AJV.cpp</code> source file in the IDE source tree?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1519833310, "post_id": 49033519, "comment_id": 85071872, "body": "You&#39;ve got a <code>using namespace std</code> at the top - probably - we can see from your <code>string</code> ... and then you have a variable called map.  This isn&#39;t going to end well"}, {"owner": {"reputation": 892, "user_id": 4442749, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dbb02e4991deea8a5659f76b37e0e11a?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Hebert", "link": "https://stackoverflow.com/users/4442749/philippe-hebert"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1519835675, "post_id": 49033519, "comment_id": 85073415, "body": "@Someprogrammerdude Added the additional details requested :)"}, {"owner": {"reputation": 892, "user_id": 4442749, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dbb02e4991deea8a5659f76b37e0e11a?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Hebert", "link": "https://stackoverflow.com/users/4442749/philippe-hebert"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519835710, "post_id": 49033519, "comment_id": 85073436, "body": "@UKMonkey You are totally right! I updated the variables to &quot;jmap&quot; and &quot;data&quot;. No change in the error message though"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1519837793, "post_id": 49033519, "comment_id": 85074823, "body": "If you have undefined symbols; but your functions are there; then your cmake file is probably wrong; make sure that it&#39;s compiling all the c++ files"}, {"owner": {"reputation": 892, "user_id": 4442749, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dbb02e4991deea8a5659f76b37e0e11a?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Hebert", "link": "https://stackoverflow.com/users/4442749/philippe-hebert"}, "edited": false, "score": 0, "creation_date": 1519912838, "post_id": 49033519, "comment_id": 85107007, "body": "Great find! That solved this error message. Now I get the same error for my test build. Is there a way to tell CMake to automatically follow the dependency tree and include any *.cpp files that match the .h files that are loaded by the build-included files?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1519913760, "post_id": 49033519, "comment_id": 85107596, "body": "The problem with that is that header files are not really tied to source files. CMake sets up dependencies for the header files you include in your <i>listed</i> source files, but but since there&#39;s really no connection from a header file to a specific source file, that link can&#39;t really be made. You have to explicitly list all source files you want to build with."}, {"owner": {"reputation": 892, "user_id": 4442749, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dbb02e4991deea8a5659f76b37e0e11a?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Hebert", "link": "https://stackoverflow.com/users/4442749/philippe-hebert"}, "edited": false, "score": 0, "creation_date": 1519914795, "post_id": 49033519, "comment_id": 85108271, "body": "That&#39;s a shame :P I would have thought that someone would have added an opt-in setting in build systems that assume that for each .h file there is an equivalent .cpp file, and if not then the implementation is in the .h file. I guess I was wrong in assuming that :P"}, {"owner": {"reputation": 892, "user_id": 4442749, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dbb02e4991deea8a5659f76b37e0e11a?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Hebert", "link": "https://stackoverflow.com/users/4442749/philippe-hebert"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519929554, "post_id": 49033519, "comment_id": 85117609, "body": "@UKMonkey if you want you can submit your comment as an answer; I can also answer my own question with a diff between my previous and current CMake file. Up to you. Cheers!"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519943006, "post_id": 49033519, "comment_id": 85124346, "body": "@PhilippeHebert glad you got it working :)"}], "answers": [{"tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1519942985, "creation_date": 1519942985, "answer_id": 49059646, "question_id": 49033519, "link": "https://stackoverflow.com/questions/49033519/c-classic-undefined-symbols-for-architecture-error/49059646#49059646", "title": "C++: Classic undefined symbols for architecture error", "body": "<p>When you register a project in CMake, you list both headers and source files.  It will then deal with these as best it can for the respective IDE / build system that you tell it to use.</p>\n\n<p>If you always have one header and one cpp file (there's no requirement to; you may find some objects are complex/large enough that you want to split it into multiple cpp files for your sanity) then you could list all your file names with no extension in the cmake and have it append the .cxx and .h to the end for you.  This will leave you with just half the typing.</p>\n\n<p>As an alternative there is a non-recommended route which is to to use the file command to scan the directory for files - but this is done only when cmake is run; and as such will not auto-update; leaving it possible to have a source tree that's building fine on one system; while not on another.</p>\n"}], "owner": {"reputation": 892, "user_id": 4442749, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dbb02e4991deea8a5659f76b37e0e11a?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Hebert", "link": "https://stackoverflow.com/users/4442749/philippe-hebert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 49059646, "answer_count": 1, "score": 0, "last_activity_date": 1519942985, "creation_date": 1519833061, "last_edit_date": 1519835647, "question_id": 49033519, "link": "https://stackoverflow.com/questions/49033519/c-classic-undefined-symbols-for-architecture-error", "title": "C++: Classic undefined symbols for architecture error", "body": "<p>Learning C++ lately, and I'm having trouble to compile my classes. I am currently getting the following obscure template error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"SmallWorld::AJV::validate(nlohmann::basic_json&lt;std::__1::map, std::__1::vector, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, bool, long long, unsigned long long, double, std::__1::allocator, nlohmann::adl_serializer&gt;*, nlohmann::basic_json&lt;std::__1::map, std::__1::vector, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, bool, long long, unsigned long long, double, std::__1::allocator, nlohmann::adl_serializer&gt;*)\", referenced from:\n      SmallWorld::Map::(anonymous namespace)::readMap(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;) in map.test.cpp.o\n  \"std::__1::function&lt;unsigned long (SmallWorld::Map::Graph&lt;SmallWorld::Region&gt;)&gt; SmallWorld::Map::algorithm::dfs&lt;SmallWorld::Region&gt;(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, std::__1::function&lt;bool (std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, std::__1::set&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::less&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;, std::__1::allocator&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt; &gt;&amp;, std::__1::unordered_map&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::pair&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;, std::__1::hash&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;, std::__1::equal_to&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;, std::__1::allocator&lt;std::__1::pair&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const, std::__1::pair&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt; &gt; &gt; &gt; const&amp;)&gt; const&amp;)\", referenced from:\n      creates_a_connected_graph_small_world_map_Test::TestBody() in map.test.cpp.o\n  \"SmallWorld::Region::Region(nlohmann::basic_json&lt;std::__1::map, std::__1::vector, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, bool, long long, unsigned long long, double, std::__1::allocator, nlohmann::adl_serializer&gt;)\", referenced from:\n      std::__1::shared_ptr&lt;SmallWorld::Region&gt; std::__1::shared_ptr&lt;SmallWorld::Region&gt;::make_shared&lt;nlohmann::basic_json&lt;std::__1::map, std::__1::vector, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, bool, long long, unsigned long long, double, std::__1::allocator, nlohmann::adl_serializer&gt; const&amp;&gt;(nlohmann::basic_json&lt;std::__1::map, std::__1::vector, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, bool, long long, unsigned long long, double, std::__1::allocator, nlohmann::adl_serializer&gt; const&amp;&amp;&amp;) in map.test.cpp.o\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>which can be simplified to:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"SmallWorld::AJV::validate(nlohmann::json*, nlohmann::json*)\", referenced from:\n      SmallWorld::Map::(anonymous namespace)::readMap(string const&amp;, string const&amp;) in map.test.cpp.o\n  \"std::function&lt;size_t(Graph&lt;Region&gt;)&gt; SmallWorld::Map::algorithm::dfs&lt;SmallWorld::Region&gt;(string const&amp;, std::function&lt;bool (string const&amp;, std::set&lt;string&gt; const&amp;, std::unordered_map&lt;string, string&gt; const&amp;)\", referenced from:\n      creates_a_connected_graph_small_world_map_Test::TestBody() in map.test.cpp.o\n  \"SmallWorld::Region::Region(nlohmann::json)\", referenced from:\n      std::shared_ptr&lt;SmallWorld::Region&gt; std::shared_ptr&lt;SmallWorld::Region&gt;::make_shared&lt;nlohmann::json const&amp;&amp;&amp;) in map.test.cpp.o\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>Which to me seems like it is saying that the method <code>bool AJV::validate(json* schema, json* data)</code> does not exist on type AJV. However I have verified the common mistakes (different implementation from header declaration, different invocation from implementation), to no avail.</p>\n\n<p>Here is the definition and implementation of the AJV class:</p>\n\n<pre><code>// AJV.h\n#ifndef SMALLWORLD_AJV_H\n#define SMALLWORLD_AJV_H\n\n#include &lt;nlohmann/json.hpp&gt;\n\nusing nlohmann::json;\n\nnamespace SmallWorld {\n  class AJV {\n  public:\n    std::function&lt;bool(json*)&gt; compile(json* schema);\n    bool validate(json* schema, json* data);\n    json errors;\n  private:\n    json m_schema;\n    std::function&lt;bool(json*)&gt; m_validator;\n  };\n};\n\n#endif // SMALLWORLD_AJV_H\n\n// AJV.cpp\n#include &lt;nlohmann/json.hpp&gt;\n#include \"AJV.h\"\n\nusing nlohmann::json;\n\nnamespace SmallWorld {\n  std::function&lt;bool(json*)&gt; AJV::compile(json* schema) {\n    return [](json* data){ return true; };\n  };\n  bool AJV::validate(json* schema, json* data){ return true; };\n};\n</code></pre>\n\n<p>And here is the invocation:</p>\n\n<pre><code>//loader.cpp\njson* readMap(const string&amp; map_path, const string&amp; schema_path) {\n        AJV ajv;\n        json* schema = readJSONFile(schema_path);\n        json* jmap = readJSONFile(map_path);\n        if(ajv.validate(schema, jmap)){\n          delete schema;\n          return jmap;\n        }else{\n          delete schema;\n          throw ajv.errors;\n        }\n      };\n</code></pre>\n\n<p><strong>Setup:</strong></p>\n\n<ul>\n<li><strong>OS:</strong> MacOS 10.13.3</li>\n<li><strong>C++ Version:</strong> 14</li>\n<li><strong>Compiler:</strong> g++ => Apple LLVM version 9.0.0 (clang-900.0.39.2)</li>\n<li><strong>Build manager:</strong> CMake 3.5.1</li>\n<li><strong>IDE:</strong> Atom IDE w/ linter-clang for linting (not really an IDE XD)</li>\n</ul>\n\n<p><strong>Additional Details</strong></p>\n\n<p>Compilation is done via command line: <code>mkdirp build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make</code></p>\n\n<p>File AJV.h is within source tree at the specified include path.</p>\n\n<p>How can I solve this problem?</p>\n\n<p>Cheers \u2600\ufe0f</p>\n"}, {"tags": ["c++", "tinyxml2"], "comments": [{"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1519832180, "post_id": 49033154, "comment_id": 85071075, "body": "C++/Cli is a specific type of project. I use tinyxml v2 available on GitHub instead for c++. See <a href=\"https://github.com/leethomason/tinyxml2\" rel=\"nofollow noreferrer\">github.com/leethomason/tinyxml2</a>"}, {"owner": {"reputation": 4144, "user_id": 797744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RSSUi.jpg?s=128&g=1", "display_name": "DBedrenko", "link": "https://stackoverflow.com/users/797744/dbedrenko"}, "edited": false, "score": 0, "creation_date": 1519832293, "post_id": 49033154, "comment_id": 85071140, "body": "What header declares <code>XMLDocument</code>?"}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1519832396, "post_id": 49033154, "comment_id": 85071208, "body": "XMLDocument is a .Net class for use in C# etc. I guess that is why it has to be in a C++/CLI project as managed code. That is why I used a simple library."}, {"owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "reply_to_user": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1519832422, "post_id": 49033154, "comment_id": 85071232, "body": "@Andrew Truckle I download tinyxml v2, compiled it as <code>.lib</code> file and added it&#39;s fullpath to the linker: Project Properties-&gt;Linker-&gt;Input-&gt;Additional Dependencies. I follow the <code>xmltext.cpp</code> and tried to load XML content and in one of the example they are using: <code>XMLDocument doc;</code> and when I tried it, I receive the error from my question."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1519832545, "post_id": 49033154, "comment_id": 85071315, "body": "Theirs is in a namespace tinyxml2::XMLDocument. So you got to use the namespace. Else you add a \u201cusing tinyxml2\u201d to it."}, {"owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "reply_to_user": {"reputation": 4144, "user_id": 797744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RSSUi.jpg?s=128&g=1", "display_name": "DBedrenko", "link": "https://stackoverflow.com/users/797744/dbedrenko"}, "edited": false, "score": 0, "creation_date": 1519832574, "post_id": 49033154, "comment_id": 85071341, "body": "@DBedrenko It is declared in tinyxml: <a href=\"https://github.com/leethomason/tinyxml2/blob/master/tinyxml2.h#L1650\" rel=\"nofollow noreferrer\">github.com/leethomason/tinyxml2/blob/master/tinyxml2.h#L1650</a>"}, {"owner": {"reputation": 4144, "user_id": 797744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RSSUi.jpg?s=128&g=1", "display_name": "DBedrenko", "link": "https://stackoverflow.com/users/797744/dbedrenko"}, "edited": false, "score": 0, "creation_date": 1519832614, "post_id": 49033154, "comment_id": 85071381, "body": "@E235 so <code>#include tinyxml2.h</code> and link against that library, and reference that class with <code>tinyxml2::XMLDocument</code>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1519832735, "post_id": 49033154, "comment_id": 85071457, "body": "@E235: Your problem might be that the name <code>XMLDocument</code> is rather generic. If you mean tinyxml2&#39;s <code>XMLDocument</code>, you must include &quot;tinyxml2&quot; in your web search, or you&#39;ll get irrelevant and misleading results."}], "answers": [{"comments": [{"owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "edited": false, "score": 0, "creation_date": 1519833109, "post_id": 49033411, "comment_id": 85071727, "body": "I added <code>tinyxml2.h</code> and <code>tinyxml2.cpp</code> to my project like you wrote. Is there something else I need to do ? it looks it accept it but now I have different compile errors."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "reply_to_user": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "edited": false, "score": 0, "creation_date": 1519833211, "post_id": 49033411, "comment_id": 85071798, "body": "As I have stated, you can&#39;t just add the files to the project. You must use the <code>tinyxml2::</code> prefix to your function call. You do not need any of those other included headers / namespaces you referred to in your question. Take that code out."}, {"owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "edited": false, "score": 0, "creation_date": 1519833228, "post_id": 49033411, "comment_id": 85071813, "body": "OK, now it works. I also needed to add <code>#include &quot;stdafx.h&quot;</code> to <code>tinyxml2.cpp</code>. Thanks."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "reply_to_user": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "edited": false, "score": 0, "creation_date": 1519833526, "post_id": 49033411, "comment_id": 85072012, "body": "No, you do not need to do that. Please see updated answer."}, {"owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "edited": false, "score": 1, "creation_date": 1519833636, "post_id": 49033411, "comment_id": 85072092, "body": "Nice ! Thank you very much for your explanations."}], "tags": [], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "is_accepted": true, "score": 2, "last_activity_date": 1519833503, "last_edit_date": 1519833503, "creation_date": 1519832751, "answer_id": 49033411, "question_id": 49033154, "link": "https://stackoverflow.com/questions/49033154/cant-use-xmldocument-incomplete-type-is-not-allowed/49033411#49033411", "title": "Can&#39;t use XMLDocument - &quot;incomplete type is not allowed&quot;", "body": "<p>If you look in the example source file <code>xmltest.cpp</code> you will see at the top:</p>\n\n<pre><code>using namespace tinyxml2;\n</code></pre>\n\n<p>So when you see code like:</p>\n\n<pre><code>int example_1()\n{\n    XMLDocument doc;\n    doc.LoadFile( \"resources/dream.xml\" );\n\n    return doc.ErrorID();\n}\n</code></pre>\n\n<p>It is actually:</p>\n\n<pre><code>int example_1()\n{\n    tinyxml2::XMLDocument doc;\n    doc.LoadFile( \"resources/dream.xml\" );\n\n    return doc.ErrorID();\n}\n</code></pre>\n\n<p>You must use the <code>tinyxml2</code> namespace to identify the correct <code>XMLDocument</code> to use.</p>\n\n<hr>\n\n<ul>\n<li>When you add the source files to the project, right-click the <code>cpp</code> file and choose <strong>properties</strong>:</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/CrKnO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CrKnO.png\" alt=\"Properties\"></a></p>\n\n<ul>\n<li>Next, you need to tell it not to use <strong>precompiled headers</strong>:</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/AOJvL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AOJvL.png\" alt=\"Not use precompiled headers\"></a></p>\n\n<p>Now you do not need the <code>#include stdafx.h</code> call.</p>\n\n<hr>\n\n<p>As you can see, <a href=\"https://msdn.microsoft.com/en-us/library/system.xml.xmldocument(v=vs.110).aspx\" rel=\"nofollow noreferrer\">XMLDocument</a> is also a Microsoft .NET Framework class:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7ObGB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7ObGB.png\" alt=\".NET Framework XMLDocument\"></a></p>\n\n<p>Without the <code>tinyxml2</code> namespace it will default to this <strong>.NET Framework</strong> class. That requires a compatible application which, for <strong>C++</strong>, would mean a <strong>C++/CLI project</strong>.</p>\n"}], "owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "accepted_answer_id": 49033411, "answer_count": 1, "score": 1, "last_activity_date": 1519833503, "creation_date": 1519831963, "last_edit_date": 1519832800, "question_id": 49033154, "link": "https://stackoverflow.com/questions/49033154/cant-use-xmldocument-incomplete-type-is-not-allowed", "title": "Can&#39;t use XMLDocument - &quot;incomplete type is not allowed&quot;", "body": "<p>I am trying to parse XML content.<br>\nI want to use <code>XMLDocument</code> but when I use it like that:  </p>\n\n<pre><code>XMLDocument doc; \n</code></pre>\n\n<p>I receive an error:  </p>\n\n<blockquote>\n  <p>incomplete type is not allowed  </p>\n</blockquote>\n\n<p>When I searched for this issue I found that some <a href=\"https://msdn.microsoft.com/en-us/library/aa335917(v=vs.71).aspx\" rel=\"nofollow noreferrer\">places</a> write examples with these libraries:  </p>\n\n<pre><code>#using &lt;mscorlib.dll&gt;\n#using &lt;System.dll&gt;\n#using &lt;System.Xml.dll&gt;\n\nusing namespace System;\nusing namespace System::IO;\nusing namespace System::Xml;\nusing namespace System::Xml::Schema;\n</code></pre>\n\n<p>But when I tried this I am received an error:  </p>\n\n<blockquote>\n  <p>#using requires C++/CLI mode</p>\n</blockquote>\n\n<p>What I need to do in order to be able to use <code>XMLDocument</code> object ?  </p>\n"}, {"tags": ["c++", "xml", "dictionary", "cross-platform", "translation"], "comments": [{"owner": {"reputation": 595, "user_id": 4411297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bac0fc34da57c7aec9313fb3e2e56798?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Gale", "link": "https://stackoverflow.com/users/4411297/daniel-gale"}, "edited": false, "score": 0, "creation_date": 1519832197, "post_id": 49033046, "comment_id": 85071081, "body": "Is this XML containing config like information compiled for each environment? Why XML over JSON? You will probably need to bring in a 3rd party library for parsing XML or JSON or either write one yourself."}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1519833146, "post_id": 49033046, "comment_id": 85071764, "body": "This may give you some ideas: <a href=\"https://stackoverflow.com/q/9240188/6610379\">How to load a custom binary resource in a VC++ static library as part of a dll?</a> Don&#39;t be thrown off by this being noted as procedure for &quot;binary resource&quot; - you can adapt for your XML text as well."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1519834706, "post_id": 49033046, "comment_id": 85072757, "body": "@PhilBrubaker he want&#39;s it to be platform independent. Otherwise for a Windows only app I&#39;d go the way you suggested."}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519835441, "post_id": 49033046, "comment_id": 85073257, "body": "@MichaelWalz Ah thanks, skimmed too fast. :-)  I like your answer then."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7850791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b813ee17af861e00fb55e6f22e77c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Stott", "link": "https://stackoverflow.com/users/7850791/dave-stott"}, "edited": false, "score": 0, "creation_date": 1519895754, "post_id": 49033146, "comment_id": 85097056, "body": "I&#39;m just trying to make distribution easier for myself I guess. But I think creating a utility program is probably my best bet actually, sometimes the simplest solutions are the best. Cheers!"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 1, "last_activity_date": 1519832316, "last_edit_date": 1519832316, "creation_date": 1519831919, "answer_id": 49033146, "question_id": 49033046, "link": "https://stackoverflow.com/questions/49033046/embedding-xml-string-resource-in-c-project/49033146#49033146", "title": "Embedding XML string resource in C++ project", "body": "<p>What's wrong with distributing the xml file?</p>\n\n<p>If you really don't want to distribute the XML file, you could make a small utility program that converts the xml file to a C++ source file that would look e.g like this:</p>\n\n<pre><code>// autogenerated by &lt;put your fancy name here&gt;\n// Don't hand edit this source file\n\nconst char xmlfile[] = \"&lt;sHello&gt;\\\n  &lt;en_GB&gt;Hello&lt;/en_GB&gt;\\\n  &lt;fr_FR&gt;Bonjour&lt;/fr_FR&gt;\\\n  ...\\\n&lt;/sHello&gt;\";\n</code></pre>\n\n<p>Instead of XML you could use any other suitable format such as json or whatever you think fits best for your needs.</p>\n"}], "owner": {"reputation": 23, "user_id": 7850791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b813ee17af861e00fb55e6f22e77c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Stott", "link": "https://stackoverflow.com/users/7850791/dave-stott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 49033146, "answer_count": 1, "score": 2, "last_activity_date": 1519832316, "creation_date": 1519831592, "question_id": 49033046, "link": "https://stackoverflow.com/questions/49033046/embedding-xml-string-resource-in-c-project", "title": "Embedding XML string resource in C++ project", "body": "<p>I've got a C++ Plug-in project that needs to be translatable. As such I've created a Dictionary class that can be used to access the strings. However, I'm not entirely sure what the best way of storing the strings is. I was thinking of creating an XML file and storing all the strings there with their different locales stored under one variable name, e.g.</p>\n\n<pre><code>&lt;sHello&gt;\n  &lt;en_GB&gt;Hello&lt;/en_GB&gt;\n  &lt;fr_FR&gt;Bonjour&lt;/fr_FR&gt;\n  ...\n&lt;/sHello&gt;\n</code></pre>\n\n<p>However, I would prefer not to have to distribute the XML file along with the other distributables. The Plug-in needs to be cross platform so I'm developing the Windows version in Visual Studio and the Mac OS version in XCode. Preferably, the C++ code in my Dictionary class for accessing the XML values would be the same on both platforms, meaning I could just included the XML in the respective projects and not have to worry about maintaining 2 separate code bases.</p>\n\n<p>Is it possible to embed the XML file as a compiled resource in such a way that it doesn't need to be distributed?</p>\n"}, {"tags": ["c++", "bind", "member-functions"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519831582, "post_id": 49033011, "comment_id": 85070710, "body": "Yeah - it&#39;s not always obvious ... <code>std::bind(&amp;A::fn, instanceOfA (can be pointer), argsTofn)</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 3, "creation_date": 1519831753, "post_id": 49033011, "comment_id": 85070817, "body": "@UKMonkey but that won&#39;t produce a function pointer. In fact, it is impossible to store that into a function pointer, because it needs bound arguments."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1519831906, "post_id": 49033011, "comment_id": 85070902, "body": "@Quentin You&#39;re right - I seem to automatically convert some lines in my head; like function pointer to std::function."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519832102, "post_id": 49033011, "comment_id": 85071028, "body": "AFAIK this cannot be done."}, {"owner": {"reputation": 1569, "user_id": 1694593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ec320e3d57fdbde4b7ecc8194b2a2d1?s=128&d=identicon&r=PG", "display_name": "Wander3r", "link": "https://stackoverflow.com/users/1694593/wander3r"}, "edited": false, "score": 0, "creation_date": 1519832232, "post_id": 49033011, "comment_id": 85071101, "body": "maybe, if the A::callBack is static"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1519832394, "post_id": 49033011, "comment_id": 85071206, "body": "Well, you could create a static function; that has access to the std::function that it then needs to call; but really why not just use a <code>std::function</code>?"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1519836430, "post_id": 49033011, "comment_id": 85073921, "body": "@Quentin bugger! - lol, thanks all for comments/answers. It does not look hopeful... It seems like it should be possible / something people have to deal with all the time.... but I guess in my case I am not allowed to change the <code>RegisterRequestCallBack()</code> function... don&#39;t really want to go static either....hmm... I maybe have to re-design something...  or maybe Lambda&#39;s to the rescue? (somehow!)"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1519836795, "post_id": 49033011, "comment_id": 85074170, "body": "@RickyL. away from my dev pc at the moment, but I presume that <code>auto</code> could be re-written as <code>void (*) (int someint)</code>? - as in I know the type I want... I sort of get lambdas, but not quite this one - can you explain a little?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1519839487, "post_id": 49033011, "comment_id": 85075869, "body": "@code_fodder the issue is that you want to store what function to call <i>and</i> on which object to call it. A function pointer can only store the former, so you need either an erased type (such as <code>std::function</code>) instead of the pointer, or an additional pointer to the parameter (typical C APIs take in a <code>void *</code> for that purpose)."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519833333, "post_id": 49033517, "comment_id": 85071884, "body": "You&#39;re changing the interface.  The OP wants to pass the function to a function that takes a regular function pointer."}, {"owner": {"reputation": 1015, "user_id": 8919133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cn93c.png?s=128&g=1", "display_name": "Blasco", "link": "https://stackoverflow.com/users/8919133/blasco"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519833368, "post_id": 49033517, "comment_id": 85071907, "body": "@NathanOliver I was updating the answer to cover his case too"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519833496, "post_id": 49033517, "comment_id": 85071987, "body": "You&#39;re not covering the case though.  <code>RegisterRequestCallBack(std::bind(&amp;A::callback, this, std::placeholders::_1));</code> won&#39;t compile."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1519833588, "post_id": 49033517, "comment_id": 85072051, "body": "Nope.  It returns something but it can&#39;t be a function pointer as it needs to store the object to call the member function on."}], "tags": [], "owner": {"reputation": 1015, "user_id": 8919133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cn93c.png?s=128&g=1", "display_name": "Blasco", "link": "https://stackoverflow.com/users/8919133/blasco"}, "is_accepted": false, "score": 1, "last_activity_date": 1519833344, "last_edit_date": 1519833344, "creation_date": 1519833057, "answer_id": 49033517, "question_id": 49033011, "link": "https://stackoverflow.com/questions/49033011/can-i-use-stdbind-to-convert-a-pointer-to-member-function-into-a-pointer-to-fu/49033517#49033517", "title": "Can I use std::bind to convert a pointer to member function into a pointer to function?", "body": "<p>To be able to bind to a member function you need to do:</p>\n\n<pre><code>std::function&lt;void(int)&gt; function = std::bind(&amp;A::foo, this, std::placeholders::_1);\n</code></pre>\n\n<p>Or in your case:</p>\n\n<pre><code>RegisterRequestCallBack(std::bind(&amp;A::callback, this, std::placeholders::_1));\n</code></pre>\n\n<p>But in my opinion the clearest way to achieve this is to use lambda functions. Here you have an example to for doing something similar that could inspire you:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\nclass TaskManager {\n    public:\n        using task_t = std::function&lt;void()&gt;;\n\n        void run();\n        void addTask(task_t task);\n\n    private:\n        std::vector&lt;task_t&gt; _tasks;\n};\n\nvoid TaskManager::run() {\n    for (auto&amp; task : _tasks) {\n        task();\n    }\n}\n\nvoid TaskManager::addTask(task_t task) {\n    _tasks.push_back(task);\n}\n\nclass Example {\n    public:\n        Example(){\n            taskManager.addTask([this]() {\n                task1();\n            });\n            taskManager.addTask([this,a=int(4)](){\n                task2(a);\n            });\n        }\n\n    TaskManager taskManager;\n\n    private:\n        void task1(){ std::cout &lt;&lt; \"task1!\\n\"; }\n        void task2(int a){ std::cout &lt;&lt; \"task2 says: \" &lt;&lt; a &lt;&lt; \"\\n\"; }\n};\n\nint main() {\n    Example example;\n    example.taskManager.run();\n}\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>task1!\ntask2 says: 4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1519836593, "post_id": 49033610, "comment_id": 85074040, "body": "Not the answer I want (obviously)...  but that&#39;s good information either way +1 - don&#39;t think i&#39;ll attempt your trampoline, I can&#39;t even understand it :p .. I&#39;ll wait just a bit longer in case someone has a great idea"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1617170625, "post_id": 49033610, "comment_id": 118225698, "body": "After a a few years! and more experience I have come across this trampoline pattern a few times and even had to use it once or twice myself (less so with modern c++). But now I can see this as the accepted answer (sorry for the delay)"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 2, "last_activity_date": 1519833345, "creation_date": 1519833345, "answer_id": 49033610, "question_id": 49033011, "link": "https://stackoverflow.com/questions/49033011/can-i-use-stdbind-to-convert-a-pointer-to-member-function-into-a-pointer-to-fu/49033610#49033610", "title": "Can I use std::bind to convert a pointer to member function into a pointer to function?", "body": "<p>NathanOliver's comment is correct, and your suspicion is mostly correct. Exactly how pointers to member functions work is not specified, but including <code>this</code> as a hidden argument <em>mostly</em> works. You just need a bit of extra work for inheritance and pointers to <code>virtual</code> functions (yes, you can take their address too).</p>\n\n<p>Now, often callbacks include a <code>void*</code> parameter under your control, which you can use to pass a <code>A*</code>. In those cases, you can write a wrapper (<code>static</code>) function that casts the <code>void*</code> back to <code>A*</code> and does the actual call to <code>&amp;A::callback</code>. </p>\n\n<p>That's not the case here. Registration takes a single function, without data. To get this to work in real-life situations, you have to resort to drastic solutions - not portable C++. One such method is to dynamically generate assembly (!). You create - at runtime - the compiled equivalent of </p>\n\n<pre><code>void __trampoline_0x018810000 (int i)\n{\n   A* __this = reinterpret_cast&lt;A*&gt;(0x018810000);\n   __this-&gt;callback(i);\n}\n</code></pre>\n\n<p>As you can see, you have to generate one trampoline for every <code>A*</code> value, and managing lifetimes of these is a major pain.</p>\n"}], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 1, "accepted_answer_id": 49033610, "answer_count": 2, "score": 3, "last_activity_date": 1519833345, "creation_date": 1519831475, "question_id": 49033011, "link": "https://stackoverflow.com/questions/49033011/can-i-use-stdbind-to-convert-a-pointer-to-member-function-into-a-pointer-to-fu", "title": "Can I use std::bind to convert a pointer to member function into a pointer to function?", "body": "<p>I want to pass a member function as a call-back. The call back is a basic function pointer.</p>\n\n<p>So I have something like:</p>\n\n<p>h file:</p>\n\n<pre><code>void (*pRequestFunc) (int someint) = 0;\nvoid RegisterRequestCallBack(void (*requestFunc) (int someint))\n{\n    pRequestFunc = requestFunc;\n}\n\nclass A\n{\n    void callBack(int someint);\n}\n</code></pre>\n\n<p>Cpp File:</p>\n\n<pre><code>RegisterRequestCallBack(&amp;A::callBack); // This does not work.\n</code></pre>\n\n<p><strong>Note</strong> I have tried to extract this example from my larger example and cut out all the other stuff - so it might not be perfect.</p>\n\n<p>The problem, as far as I understand, is that member function pointers really (under the hood) have an extra parameter (and instance - i.e. <code>this</code>) and are not compatible with normal function pointers.</p>\n\n<p>the <code>RegisterRequestCallBack()</code> is in reality not my code - and so I can't change that.</p>\n\n<p>So I read that boost::bind can do what I need - and I am hoping c++11 std::bind can do the same - but I could not figure out how to use it to effectively get a standard function pointer from a member function pointer...</p>\n\n<p>I was going for something like:</p>\n\n<p><code>std::bind(&amp;A::callBack)</code> ... that is about as far as I got, my understanding of the examples online is poor :(</p>\n"}, {"tags": ["c++", "string-literals"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1519831411, "post_id": 49032984, "comment_id": 85070573, "body": "Welcome to Stack Overflow! Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1519831450, "post_id": 49032984, "comment_id": 85070605, "body": "Please don&#39;t post pictures of text, post the text."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1519831471, "post_id": 49032984, "comment_id": 85070623, "body": "What&#39;s unclear about the error message? String literals are of type <code>const char*</code>, which are incompatible with a <code>char*</code> type."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1519831484, "post_id": 49032984, "comment_id": 85070633, "body": "Hint: String literals in C++ <i>decay</i> to <code>const char*</code> function parameter types. A C compiler permits decay to a <code>char*</code> but C++ fixed that mess. Then have a look at <code>std::string</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1519831586, "post_id": 49032984, "comment_id": 85070711, "body": "And you can&#39;t convert either <code>char*</code> or <code>const char*</code> to <code>char</code>. Both your parameters should be <code>const char*</code> (or <code>const std::string&amp;</code>)."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1519832089, "post_id": 49032984, "comment_id": 85071021, "body": "aside:  These aren&#39;t modules; they&#39;re functions.  Of all the terminology you need to get write - I&#39;d put that high up there."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1519832596, "post_id": 49032984, "comment_id": 85071366, "body": "why is this post up-voted? Besides the fact that the problem is a lack of  basic language understanding (which in itself it not frowned upon, we all had to start somewhere, but SO is not the place to post about it) it is not well formulated, code indentation is bad and it contains external picture to error message..."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1519831770, "post_id": 49033053, "comment_id": 85070833, "body": "You forgot to fix the prototype and there is still the issue with course"}], "tags": [], "owner": {"reputation": 558, "user_id": 9334588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/50ed88baf3c381b39061f116b808c050?s=128&d=identicon&r=PG&f=1", "display_name": "J K", "link": "https://stackoverflow.com/users/9334588/j-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1519832615, "last_edit_date": 1519832615, "creation_date": 1519831629, "answer_id": 49033053, "question_id": 49032984, "link": "https://stackoverflow.com/questions/49032984/c-program-has-syntax-errors-using-modules-for-first-time/49033053#49033053", "title": "C++ program has syntax errors, using modules for first time", "body": "<p>This happens because \"test in quotes\" is by default <code>const char*</code>.<br>\nValues with <code>const</code> in their declaration cannot be changed.<br>\nYou can't pass <code>const</code> variable to function that takes non-const parameters.  </p>\n\n<p>You could just make function's parameters <code>const</code>:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nvoid displayCourseInfo(const char *);\nvoid displayCourseInfo(const char *, const char *);\nvoid displayCourseInfo(const char *, const char *, const int);\n\nint main() {\n    displayCourseInfo(\"ENG101\");\n    displayCourseInfo(\"PSY151\", \"Bossert\");\n    displayCourseInfo(\"CIS200\", \"Edwards\", 24);\n    return 0;\n}\n\nvoid displayCourseInfo(const char *course, const char *instructor) {\n    cout &lt;&lt; course &lt;&lt; \" taught by \" &lt;&lt; instructor &lt;&lt;\n         \" enrollment \" &lt;&lt; 30 &lt;&lt; endl;\n}\n\nvoid displayCourseInfo(const char *course) {\n    cout &lt;&lt; course &lt;&lt; \" taught by \" &lt;&lt; \"Staff\" &lt;&lt;\n         \" enrollment \" &lt;&lt; 30 &lt;&lt; endl;\n}\n\nvoid displayCourseInfo(const char *course, const char *instructor, const int enrollment) {\n\n    cout &lt;&lt; course &lt;&lt; \" taught by \" &lt;&lt; instructor &lt;&lt;\n         \" enrollment \" &lt;&lt; enrollment &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1519832017, "creation_date": 1519832017, "answer_id": 49033175, "question_id": 49032984, "link": "https://stackoverflow.com/questions/49032984/c-program-has-syntax-errors-using-modules-for-first-time/49033175#49033175", "title": "C++ program has syntax errors, using modules for first time", "body": "<p>String literals in C++ (opposite to C) have types of constant character arrays. For example the string literal <code>\"Staff\"</code> has the type <code>const char [6]</code>.</p>\n\n<p>Used in expressions array designators with rare exceptions are converted to pointers to their first elements. So the string literal <code>\"Staff\"</code> used as an argument is converted to a pointer of the type <code>const char *</code>. </p>\n\n<p>The first parameter of the function <code>displayCourseInfo</code> is declared as having the type <code>char</code> while you are trying to pass a string literal as an argument.</p>\n\n<p>A valid program can look the following way</p>\n\n<pre><code>// Function displays course information\n// instructor defaults to Staff\n// enrollment defualts to 30\n// main() demonstrates function can be called three ways\n#include&lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    void displayCourseInfo( const char *, const char * = \"Staff\", int = 30 );\n\n    displayCourseInfo(\"ENG101\");\n    displayCourseInfo(\"PSY151\", \"Bossert\");\n    displayCourseInfo(\"CIS200\", \"Edwards\", 24);\n\n    return 0;\n}\n\nvoid displayCourseInfo( const char *course, const char *instructor, int enrollment)\n{  \n    cout &lt;&lt; course &lt;&lt;  \" taught by \"  &lt;&lt; instructor \n         &lt;&lt; \" enrollment \" &lt;&lt; enrollment &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>ENG101 taught by Staff enrollment 30\nPSY151 taught by Bossert enrollment 30\nCIS200 taught by Edwards enrollment 24\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9424274, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Preston Freeman", "link": "https://stackoverflow.com/users/9424274/preston-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 49033175, "answer_count": 2, "score": 1, "last_activity_date": 1519832615, "creation_date": 1519831365, "last_edit_date": 1519832168, "question_id": 49032984, "link": "https://stackoverflow.com/questions/49032984/c-program-has-syntax-errors-using-modules-for-first-time", "title": "C++ program has syntax errors, using modules for first time", "body": "<pre><code>// Function displays course information\n// instructor defaults to Staff\n// enrollment defualts to 30\n// main() demonstrates function can be called three ways\n#include&lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n   void displayCourseInfo(char, char* = \"Staff\", int = 30);\ndisplayCourseInfo(\"ENG101\");\ndisplayCourseInfo(\"PSY151\", \"Bossert\");\ndisplayCourseInfo(\"CIS200\", \"Edwards\", 24);\nreturn 0;\n }\n void displayCourseInfo(char course, char* instructor, int enrollment)\n {  cout &lt;&lt; course &lt;&lt;  \" taught by \"  &lt;&lt; instructor &lt;&lt;\n  \" enrollment \" &lt;&lt; enrollment &lt;&lt; endl;\n}\n</code></pre>\n\n<p>When I try to run this code I get\n     <a href=\"https://i.stack.imgur.com/tM62Y.jpg\" rel=\"nofollow noreferrer\">this</a> error message. It says that I cannot convert *const char to char.\nThank you for your time and help.</p>\n"}, {"tags": ["c++", "clang", "llvm"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1519832026, "post_id": 49032835, "comment_id": 85070976, "body": "I <i>think</i> you mean &quot;sensitive&quot;. It is never sensible to overload that operator."}, {"owner": {"reputation": 1393, "user_id": 2502544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af1b3817c169407c8ebafe87020b0e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Quant", "link": "https://stackoverflow.com/users/2502544/quant"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519832123, "post_id": 49032835, "comment_id": 85071045, "body": "Indeed, I edited the question."}, {"owner": {"reputation": 1393, "user_id": 2502544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af1b3817c169407c8ebafe87020b0e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Quant", "link": "https://stackoverflow.com/users/2502544/quant"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519832387, "post_id": 49032835, "comment_id": 85071198, "body": "Besides, I think that it is sensible to overload that operator in the context of pointer proxies.  For example <code>std::vector&lt;bool&gt;</code> is in fact a bitset. <code>operator[]</code> returns a reference proxy, which is a temporary. For <code>operator-&gt;</code> to make sense on iterators on such containers, you can make it return a temporary pointer proxy with <code>operator&amp;</code> overloaded."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519832674, "post_id": 49032835, "comment_id": 85071412, "body": "<code>std::vector&lt;bool&gt;</code> is deprecated, and shouldn&#39;t be taken as an example of what&#39;s sensible."}, {"owner": {"reputation": 1393, "user_id": 2502544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af1b3817c169407c8ebafe87020b0e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Quant", "link": "https://stackoverflow.com/users/2502544/quant"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519832934, "post_id": 49032835, "comment_id": 85071596, "body": "Well, it is not really the point of the question here - and std::vector&lt;bool&gt; is a known case of usage of reference proxies that was concise enough for a comment! Overloading <code>operator&amp;</code> makes sense for proxies."}, {"owner": {"reputation": 1393, "user_id": 2502544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af1b3817c169407c8ebafe87020b0e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Quant", "link": "https://stackoverflow.com/users/2502544/quant"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1519833261, "post_id": 49032835, "comment_id": 85071839, "body": "This is interesting, do you have a reference to <code>std::vector&lt;bool&gt;</code> being deprecated? I found proposals for it but no actual decisions."}], "owner": {"reputation": 1393, "user_id": 2502544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af1b3817c169407c8ebafe87020b0e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Quant", "link": "https://stackoverflow.com/users/2502544/quant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519832106, "creation_date": 1519830902, "last_edit_date": 1519832106, "question_id": 49032835, "link": "https://stackoverflow.com/questions/49032835/clangs-uo-addrof-unary-operator-sensible-to-overloading-of-operator", "title": "Clang&#39;s UO_AddrOf Unary Operator sensible to overloading of `operator&amp;`", "body": "<p>It seems that Clang's <code>UO_AddrOf</code> unary operator is sensitive to the overloading of <code>operator&amp;</code>.</p>\n\n<p>For example, if we have</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class notapointer {};\n\nstruct Bar\n{\n    inline notapointer operator&amp;()\n    {\n        return notapointer();\n    }\n};\n</code></pre>\n\n<p>and E is a clang expression containing an instance of Bar, then</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Expr* AddrOfE = Sema::BuildUnaryOp(0, loc, UO_AddrOf, E).get();\n</code></pre>\n\n<p>will return an expression of a <code>notapointer</code> instance instead of the address the object.</p>\n\n<p>Is there a means to retrieve the actual address instead of following the <code>operator&amp;</code> overload?</p>\n\n<p>In a way, it behave like <code>std::addressof</code>.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1519830176, "post_id": 49032563, "comment_id": 85069747, "body": "Hope you haven&#39;t used any C++ added since the mid 1990s, and use a CFront compiler. Job done!"}, {"owner": {"reputation": 71, "user_id": 5246092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bQhyjIvFL3c/AAAAAAAAAAI/AAAAAAAAAgA/WsjGiDu_TS8/photo.jpg?sz=128", "display_name": "GtlsGamr", "link": "https://stackoverflow.com/users/5246092/gtlsgamr"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1519830222, "post_id": 49032563, "comment_id": 85069790, "body": "I&#39;m not sure what you mean. Mind expanding a bit?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1519830445, "post_id": 49032563, "comment_id": 85069930, "body": "Please edit your post and fix the code formatting: this style is completely unreadable. For example, you must include blank lines between functions, as a bare minimum."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1519830531, "post_id": 49032563, "comment_id": 85069995, "body": "@Lundin I fixed that."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1519830545, "post_id": 49032563, "comment_id": 85070006, "body": "@GtlsGamr Bathsheba means that if any modern c++ is used, then there is no such thing as conversion. You need to write it in c from scratch, which is easier and faster than attemting to make it &quot;<i>work</i>&quot; which is impossible. Also, since you are writing it from scratch, use some concepts of structured programming and use functions to do a single thing that otherwise insert a lot of code into the <code>main()</code> and make it impossible to read and understand."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1519830582, "post_id": 49032563, "comment_id": 85070033, "body": "Oh, and it doesn&#39;t even needs to be <i>that modern</i>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 1, "creation_date": 1519830666, "post_id": 49032563, "comment_id": 85070091, "body": "@machine_1 Not really, it is still a complete mess and we aren&#39;t doing the OP a favour by fixing it. They need to learn how to write proper source code."}, {"owner": {"reputation": 677, "user_id": 3785680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e7953767467649c81b58fe9e5a9278?s=128&d=identicon&r=PG&f=1", "display_name": "Outshined", "link": "https://stackoverflow.com/users/3785680/outshined"}, "edited": false, "score": 0, "creation_date": 1519830820, "post_id": 49032563, "comment_id": 85070192, "body": "Put member fields (bal, dep, etc...) into struct instead of class. Extract methods from a class and make them function with this struct passed as an argument. Use stdio.h instead of iostream. Fix minor syntax differences."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1519830864, "post_id": 49032563, "comment_id": 85070226, "body": "The issue is that do you really want to make the program look like <code>C</code>, or be <code>C</code> but look like C++?  If it&#39;s the latter, note that other <code>C</code>-only programmers will wonder why you wrote the code in the way you did, and not use basic <code>C</code> idioms."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1519830843, "post_id": 49032776, "comment_id": 85070209, "body": "Also, functions sould be called something like <code>prev_class_set</code> ... and so on."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1519830908, "post_id": 49032776, "comment_id": 85070255, "body": "using typedef struct allows to be able to omit <code>struct</code> keyword in function prototypes"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1519830913, "post_id": 49032776, "comment_id": 85070263, "body": "Also virtual functions need to be handled through a function vector or function pointers."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1519830991, "post_id": 49032776, "comment_id": 85070312, "body": "@AjayBrahmakshatriya <i>function vector</i> is not a C term, as far as I know."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 3, "creation_date": 1519831059, "post_id": 49032776, "comment_id": 85070360, "body": "@machine_1 I don&#39;t think it&#39;s a term at all."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1519832945, "post_id": 49032776, "comment_id": 85071606, "body": "Errr.. <code>obj-&gt;strcpy</code> ??"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1519834639, "post_id": 49032776, "comment_id": 85072708, "body": "@machine_1 I meant an array of function pointers.  (I used the term function vector because of similarity to interrupt vectors, pardon me for that)"}], "tags": [], "owner": {"reputation": 503, "user_id": 8830528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78bc39faaf914ac3f42353f2e37f0311?s=128&d=identicon&r=PG&f=1", "display_name": "rbf", "link": "https://stackoverflow.com/users/8830528/rbf"}, "is_accepted": false, "score": 8, "last_activity_date": 1519833485, "last_edit_date": 1519833485, "creation_date": 1519830722, "answer_id": 49032776, "question_id": 49032563, "link": "https://stackoverflow.com/questions/49032563/how-to-implement-member-functions-used-in-c-to-convert-the-same-program-in-c/49032776#49032776", "title": "How to implement member functions used in C++ to convert the same program in C?", "body": "<p>Following example works as long as you use the C like part of C++. No std or C++ features, that do not have a simple equivalent in C (e.g. templates).</p>\n\n<ol>\n<li><p>Use a struct instead of a class</p>\n\n<pre><code>struct prev_class {\n    long bal,dep,wdamt; int acno; char name[20], type;\n};\n</code></pre></li>\n<li><p>Convert your member functions to free functions using as a first parameter a pointer to that struct:</p>\n\n<pre><code>void prev_class_set(struct prev_class* obj, int x, char n[20], char t) {\n    obj-&gt;acno = x;\n    strcpy(obj-&gt;name, n);\n    obj-&gt;type = t;\n    obj-&gt;bal = 0;\n}\n</code></pre></li>\n<li><p>Substitute your C++ specific calls like <code>cout</code> or <code>cin</code> with C conform functions.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 5246092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bQhyjIvFL3c/AAAAAAAAAAI/AAAAAAAAAgA/WsjGiDu_TS8/photo.jpg?sz=128", "display_name": "GtlsGamr", "link": "https://stackoverflow.com/users/5246092/gtlsgamr"}, "edited": false, "score": 0, "creation_date": 1519831105, "post_id": 49032839, "comment_id": 85070386, "body": "Thank you! This is exactly what i was looking for!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1519831246, "post_id": 49032839, "comment_id": 85070474, "body": "&quot;convert class bank to struct bank, removing all private:/public&quot; That&#39;s just sloppy. The proper way is to replace the class with an opaque type. There&#39;s no reason to toss OO out the door just because you move to C."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1519831379, "post_id": 49032839, "comment_id": 85070549, "body": "@Lundin that&#39;s true, but  the OP wrote <i>&quot;I just know basic level C&quot;</i> so I didn&#39;t want to make it any more complicated than necessary."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1519831442, "post_id": 49032839, "comment_id": 85070599, "body": "Opaque types also require using pointers, so OP can&#39;t straightforwardly translate <code>&#47;*struct*&#47; bank cust[10];</code> from the original code"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1519831461, "post_id": 49032839, "comment_id": 85070610, "body": "Well, any would-be programmer has to study OO, no matter which language they settle for. It is a language-agnostic way to design computer programs. Some languages have more built-in support than others."}, {"owner": {"reputation": 71, "user_id": 5246092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bQhyjIvFL3c/AAAAAAAAAAI/AAAAAAAAAgA/WsjGiDu_TS8/photo.jpg?sz=128", "display_name": "GtlsGamr", "link": "https://stackoverflow.com/users/5246092/gtlsgamr"}, "edited": false, "score": 0, "creation_date": 1519832544, "post_id": 49032839, "comment_id": 85071314, "body": "Hey man I tried what you told me and it compiles without any errors or warnings, but when i run it, it will force stop when I enter &quot;1&quot; for new customer. It says &quot;Process returned -1073741819 (0xC0000005)&quot;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 71, "user_id": 5246092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bQhyjIvFL3c/AAAAAAAAAAI/AAAAAAAAAgA/WsjGiDu_TS8/photo.jpg?sz=128", "display_name": "GtlsGamr", "link": "https://stackoverflow.com/users/5246092/gtlsgamr"}, "edited": false, "score": 0, "creation_date": 1519832809, "post_id": 49032839, "comment_id": 85071510, "body": "@GtlsGamr you need to debug this or post another question. You probably misuse <code>scanf</code>, but without seeing your actual code it&#39;s hard to tell"}, {"owner": {"reputation": 71, "user_id": 5246092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bQhyjIvFL3c/AAAAAAAAAAI/AAAAAAAAAgA/WsjGiDu_TS8/photo.jpg?sz=128", "display_name": "GtlsGamr", "link": "https://stackoverflow.com/users/5246092/gtlsgamr"}, "edited": false, "score": 0, "creation_date": 1519832982, "post_id": 49032839, "comment_id": 85071639, "body": "@MichaelWalz Yeah, i debugged it. I was using scanf the wrong way. Thanks again!"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 5, "last_activity_date": 1519831704, "last_edit_date": 1519831704, "creation_date": 1519830912, "answer_id": 49032839, "question_id": 49032563, "link": "https://stackoverflow.com/questions/49032563/how-to-implement-member-functions-used-in-c-to-convert-the-same-program-in-c/49032839#49032839", "title": "How to implement member functions used in C++ to convert the same program in C?", "body": "<p>Roughly like this:</p>\n\n<ul>\n<li>convert all class methods such as <code>set</code> to normal functions (more details below)</li>\n<li>convert all input/output from <code>cin/cout</code> to <code>scanf</code>/<code>printf</code></li>\n<li>convert <code>class bank</code> to <code>struct bank</code>, removing all <code>private:/public:</code></li>\n<li>add another <code>this</code> parameter to all converted class methods so you can emulate more ore less the C++ <code>this</code>, see below</li>\n</ul>\n\n<p>Converted <code>set</code> function (the name <code>set</code> has been replaced <code>bank_set</code>, that is not necessary, but it might prevent name collisions if there was already a free <code>set</code> function beforehand):</p>\n\n<pre><code>void bank_set(struct bank *this, int x, char n[20], char t)\n{\n    this-&gt;acno = x;\n    strcpy(this-&gt;name, n);\n    this-&gt;type = t;\n    this-&gt;bal = 0;\n}\n</code></pre>\n\n<p>Convert calls to class methods e.g like this:</p>\n\n<pre><code>cust[count].set(count, cname, ctype);\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>bank_set(&amp;cust[count], count, cname, ctype);\n</code></pre>\n\n<p>Do the same for all other class methods.</p>\n\n<p>This only works because your C++ program is old fashioned \"C-like\" C++ and you're not using inheritance.</p>\n"}], "owner": {"reputation": 71, "user_id": 5246092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bQhyjIvFL3c/AAAAAAAAAAI/AAAAAAAAAgA/WsjGiDu_TS8/photo.jpg?sz=128", "display_name": "GtlsGamr", "link": "https://stackoverflow.com/users/5246092/gtlsgamr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1537676263, "creation_date": 1519830110, "last_edit_date": 1537676263, "question_id": 49032563, "link": "https://stackoverflow.com/questions/49032563/how-to-implement-member-functions-used-in-c-to-convert-the-same-program-in-c", "title": "How to implement member functions used in C++ to convert the same program in C?", "body": "<p>I need to convert a program from C++ to C, i.e. I need the same program but in C.<br>\nI used member functions for a class in C++ but I just know basic level C.<br>\nI know this can be done using structures, but how do I implement the class functions for Structure in C?<br>\nHere is the code. This is a simple program to make bank accounts and deposit, withdraw or display account status: </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string.h&gt;\n\nint count = 0;\n\nusing namespace std;\n\nclass bank\n{\npublic:\n    long bal, dep, wdamt; \n    int acno; \n    char name[20], type;\npublic:\n    void set(int x, char n[20], char t)\n    {\n        acno = x;\n        strcpy(name, n);\n        type = t;\n        bal = 0;\n    }\n    void deposit(long z)\n    {\n        bal += z;\n        cout &lt;&lt; \"success!\";\n    }\n    void withdraw(long k)\n    {\n        bal -= k;\n        cout &lt;&lt; \"success!\";\n    }\n    void display()\n    {\n        cout &lt;&lt; \"\\n Name : \" &lt;&lt; name &lt;&lt; \"\\n AC BALANCE : \" &lt;&lt; bal;\n    }\n};\n\nint main()\n{\n    bank cust[10];\n    int c1, c2, cacno, i = 0, j = 0; \n    long cbal, cdep, cwdamt; \n    char cname[20], ctype;\n\n    while (j &lt; 10)\n    {\n\n        cout &lt;&lt; \"\\n \\n **** welcome to golu bank ****\";\n        cout &lt;&lt; \"\\n choose one of the following \\n1. New customer \\n2. Existing Customer \\n 3. Exit\";\n        cin &gt;&gt; c1;\n\n        switch (c1)\n        {\n        case 1: cout &lt;&lt; \"\\nnew customer. please enter name. \";\n            cin &gt;&gt; cname;\n            cout &lt;&lt; \"\\nEnter account type. \";\n            cin &gt;&gt; ctype;\n            cust[count].set(count, cname, ctype);\n            cout &lt;&lt; \"Hello! Your a/c number is \" &lt;&lt; cust[count].acno &lt;&lt; endl &lt;&lt; \"PRESS ENTER TO CONTINUE:\";\n            cin.get();\n            count++;\n            break;\n        case 2: cout &lt;&lt; \"Existing Customer. Enter account number\";\n            cin &gt;&gt; cacno;\n            while (i &lt; 10)\n            {\n                if (cacno == cust[i].acno)\n                {\n                    cout &lt;&lt; \"\\n Enter choice! \\n 1.Deposit \\n 2. Withdraw \\n 3. Display\\n 4.Exit\";\n                    cin &gt;&gt; c2;\n                    switch (c2)\n                    {\n                    case 1: cout &lt;&lt; \"Enter amount to deposit\";\n                        cin &gt;&gt; cdep;\n                        cust[i].deposit(cdep); break;\n                    case 2: cout &lt;&lt; \"Enter amount to withdraw\";\n                        cin &gt;&gt; cwdamt;\n                        if (cwdamt &gt; cust[i].bal)\n                            cout &lt;&lt; \"Insufficent funds!!!\";\n                        else\n                            cust[i].withdraw(cwdamt);\n                        break;\n                    case 3:  cust[i].display();\n                        break;\n                    case 4:  i = 11;\n                    default: \"Invalid choice\";\n                    }\n                }\n                else\n                    i++;\n            }\n        case 3: j = 11;\n        default: \"Invalid choice\";\n        }\n    }\n    return 0;\n    cin.get();\n}\n</code></pre>\n"}, {"tags": ["c++", "compiler-construction", "undefined-behavior"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1519830248, "post_id": 49032551, "comment_id": 85069808, "body": "Because undefined behavior is <a href=\"http://eel.is/c++draft/defns.undefined\" rel=\"nofollow noreferrer\">undefined</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1519830345, "post_id": 49032551, "comment_id": 85069874, "body": "That phrase is a little over dramatic. Chandler Carruth has a really good talk on this:<a href=\"https://www.youtube.com/watch?v=yG1OZ69H_-o\" rel=\"nofollow noreferrer\">youtube.com/watch?v=yG1OZ69H_-o</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1519830816, "post_id": 49032551, "comment_id": 85070189, "body": "An Operating System typically has its own opinions about this. It will generally enforce its own rules, but those are typically more lax than that of C++. One major exception to that rule would be Linux, which kills processes where C++ mandates a <code>std::bad_alloc</code> exception."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1519830934, "post_id": 49032551, "comment_id": 85070281, "body": "@MSalters: Interesting. Could you give an example of a case where C++ mandates <code>std::bad_alloc</code> but Linux kills the process instead?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1519831382, "post_id": 49032551, "comment_id": 85070554, "body": "@LightnessRacesinOrbit I believe MSalters is referring to <a href=\"https://stackoverflow.com/questions/1655650/linux-optimistic-malloc-will-new-always-throw-when-out-of-memory\">optimistic memory allocation</a> which is used as the default by many Linux distributions. Allocations always succeed, but accessing that memory for the first time might fail. It&#39;s very difficult to reconcile that behavior with the requirements of c++."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1519831929, "post_id": 49032551, "comment_id": 85070917, "body": "@Fran&#231;oisAndrieux: Terrible!"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1519833049, "post_id": 49032551, "comment_id": 85071684, "body": "Undefined behavior <i>can</i> be serious, depending on the circumstances. Suppose that later you get a job at the Pentagon and instead of <code>if (door_is_open)</code> you have to code <code>if (incoming_missiles_detected)</code>. Then just about anything <i>can</i> happen."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1519833132, "post_id": 49032551, "comment_id": 85071749, "body": "@BoPersson Just that variable name already scares me."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1519833473, "post_id": 49032551, "comment_id": 85071971, "body": "@SombreroChicken: It&#39;s only scary if it&#39;s true."}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "edited": false, "score": 0, "creation_date": 1519874310, "post_id": 49032551, "comment_id": 85089344, "body": "Keep in mind that C is a horribly-designed language and C++ inherited most of C&#39;s flaws. The amount of &quot;undefined behavior&quot; in C++ is much greater than what one would find in a well-designed language."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "edited": false, "score": 0, "creation_date": 1524609964, "post_id": 49032551, "comment_id": 87039812, "body": "@user3344003: At the time C was standardized, most implementations would specify behaviors in most cases where the Standard did not.  The problem is that the Standard made no distinction between &quot;Implementations should do X when practical, but implementations on weird hardware where that is impractical may do something else&quot; and &quot;Programmers have no basis for any particular expectations, even if they&#39;re only targeting non-weird hardware&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1519830673, "post_id": 49032606, "comment_id": 85070097, "body": "How about you make (a version of this) a community wiki question, feel like it&#39;d help a lot of new members."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1519830724, "post_id": 49032606, "comment_id": 85070128, "body": "Oh, nothing, don&#39;t get me wrong. Just feel like it&#39;d be nice to have a standard question with answer to link to in the future, as a dup target perhaps. I think the question right now of OP is too narrow."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 20, "last_activity_date": 1519831035, "last_edit_date": 1519831035, "creation_date": 1519830210, "answer_id": 49032606, "question_id": 49032551, "link": "https://stackoverflow.com/questions/49032551/why-is-the-phrase-undefined-behavior-means-the-compiler-can-do-anything-it-wan/49032606#49032606", "title": "Why is the phrase: &quot;undefined behavior means the compiler can do anything it wants&quot; true?", "body": "<p>Nothing \"causes\" this to occur. Undefined behaviour cannot \"occur\". There is no mystical force that descends upon your computer and suddenly makes it create black holes inside of cats.</p>\n\n<p>That anything can happen when you run a program whose behaviour is undefined, <a href=\"https://timsong-cpp.github.io/cppwp/n4140/intro.execution#5\" rel=\"noreferrer\">is stated as fact by the C++ standard.</a> It's a statement of leeway, a handy excuse used by compilers to make assumptions about your code so as to provide useful optimisations.</p>\n\n<p>For example, if we say that dereferencing <code>nullptr</code> is undefined (which it is) then no compiler needs to ever check that a pointer is not <code>nullptr</code>: it can just assume that a dereferenced pointer will never be <code>nullptr</code>, and if it's not then any consequences are the programmer's problem.</p>\n\n<p>Due to the astounding complexity of compilers, <a href=\"https://stackoverflow.com/q/48731306/560648\">some of those consequences can be rather unexpected</a>.</p>\n\n<p>Of course it is not actually true that \"anything can happen\". Your computer has neither the necessary physical power nor the necessary legal authority to instantiate a black hole inside of a cat. But since C++ is an abstraction, it seems only fitting that we use abstractions to teach people not to write programs with undefined behaviour. If you program rigorously, assuming that \"anything can happen\" if your program has undefined behaviour, then you will not be surprised by said rather unexpected consequences, and you will not be tempted to try to \"control\" the outcome in any way.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 2, "last_activity_date": 1524610265, "creation_date": 1524610265, "answer_id": 50011762, "question_id": 49032551, "link": "https://stackoverflow.com/questions/49032551/why-is-the-phrase-undefined-behavior-means-the-compiler-can-do-anything-it-wan/50011762#50011762", "title": "Why is the phrase: &quot;undefined behavior means the compiler can do anything it wants&quot; true?", "body": "<p>From the point of view of the C and C++ Standards, the fact that some situation invokes \"Undefined Behavior\" means nothing more nor less than that the Standard imposes no requirements on what an implementation must do in that situation in order to be <em>conforming</em>.  It does not imply any particular judgment as to whether implementations intended for purposes on any particular platforms should be expected to behave predictably, nor whether predictable behavior in such a situation might be required to make an implementation suitable for a such purposes on such platforms.</p>\n\n<p>For some reason, some compiler writers have equated \"the Standard does not require X\" with \"there is no need for implementations to do X\", without any particular regard for the purposes to which their compilers would be put, and without regard for what behaviors might be necessary to fulfill those purposes.  What caused Undefined Behavior to digress to the \"anything can happen\" was that compiler writers interpreted it not as an acknowledgment that there may be <em>some</em> combinations of platform and application field where the cost of ensuring predictable behavior would exceed the benefit, and compiler writers should exercise judgment as to when that is the case, but instead as an indication that the authors of the Standard had already exercised judgment that on <em>all</em> combinations of platform and application field, the cost of ensuring predictable behavior would outweigh the benefits, and there's no need for compiler writers to exercise judgment because the authors of the Standard have already done so.</p>\n"}], "owner": {"reputation": 169, "user_id": 9300660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d236bfef07821aa603da695892f5c497?s=128&d=identicon&r=PG&f=1", "display_name": "Yvain", "link": "https://stackoverflow.com/users/9300660/yvain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1594693339, "creation_date": 1519830083, "last_edit_date": 1594693339, "question_id": 49032551, "link": "https://stackoverflow.com/questions/49032551/why-is-the-phrase-undefined-behavior-means-the-compiler-can-do-anything-it-wan", "title": "Why is the phrase: &quot;undefined behavior means the compiler can do anything it wants&quot; true?", "body": "<p>Specifically in reference to: <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20140627-00/?p=633/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/oldnewthing/20140627-00/?p=633/</a></p>\n<p>I'm a new C++ programmer and I'm currently learning about undefined behavior and its effects on a program. I was linked specifically to the above blog, which says that when undefined behavior occurs, anything can happen.</p>\n<p>It mentions several times specifically that the compiler can allow anything to happen when undefined behavior occurs.</p>\n<p>What specifically causes this to occur, and why does it happen?</p>\n"}, {"tags": ["c++", "c++11", "linked-list"], "comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1519829898, "post_id": 49032475, "comment_id": 85069551, "body": "You are requested to correctly tag your question next time."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1519830047, "post_id": 49032475, "comment_id": 85069648, "body": "Note that semantically calling <code>push()</code> and <code>pop()</code> your methods makes it look like it&#39;s a stack implementation and not a linked list. In a linked list you can delete any element, and you can also insert an element, unlike in stacks where you can only add to the top of it and remove from the top of it."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1519830196, "post_id": 49032475, "comment_id": 85069762, "body": "The reason is that <code>new_node</code> is a local and goes out of scope when your constructor completes. You storing a pointer to it doesn&#39;t magically keep it alive, it just means you have an invalid pointer you can never legally dereference."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1519830210, "post_id": 49032475, "comment_id": 85069775, "body": "I understand that c++ programmers avoid pointers and stuff, but <code>(*temp).ptr</code>??? just write <code>temp-&gt;ptr</code> and <code>temp-&gt;value</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1519830352, "post_id": 49032475, "comment_id": 85069879, "body": "Yes, as @Useless said. So use <code>new</code> instead and create a pointer to persistent memory on the heap, because the memory used for your <code>new_node</code> lives in the stack frame of the constructor, and is <b>popped</b> from it when the function/method returns. Note that in the end, c++ class methods are roughly just functions with a special and invisible argument."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1519830389, "post_id": 49032475, "comment_id": 85069900, "body": "This is effectively a duplicate of <a href=\"https://stackoverflow.com/q/6441218/212858\">this old classic</a>. I&#39;m holding off closing as a dupe because there might be a better match, suggestions are welcome."}, {"owner": {"reputation": 171, "user_id": 9350876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aca01729e6386e4ffc60133c0b3a85b?s=128&d=identicon&r=PG&f=1", "display_name": "maufcost", "link": "https://stackoverflow.com/users/9350876/maufcost"}, "edited": false, "score": 0, "creation_date": 1519830609, "post_id": 49032475, "comment_id": 85070052, "body": "Indeed! That was a silly mistake. I appreciate your quick answers."}, {"owner": {"reputation": 1569, "user_id": 1694593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ec320e3d57fdbde4b7ecc8194b2a2d1?s=128&d=identicon&r=PG", "display_name": "Wander3r", "link": "https://stackoverflow.com/users/1694593/wander3r"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1519830624, "post_id": 49032475, "comment_id": 85070062, "body": "@Useless +1 for the link"}], "owner": {"reputation": 171, "user_id": 9350876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aca01729e6386e4ffc60133c0b3a85b?s=128&d=identicon&r=PG&f=1", "display_name": "maufcost", "link": "https://stackoverflow.com/users/9350876/maufcost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1519831017, "answer_count": 0, "score": 0, "last_activity_date": 1519829855, "creation_date": 1519829842, "last_edit_date": 1519829855, "question_id": 49032475, "link": "https://stackoverflow.com/questions/49032475/bad-access-exception-when-printing-linked-list-using-templates", "closed_reason": "Duplicate", "title": "Bad Access Exception when printing linked list using templates", "body": "<p>As I have just learned templates in C++, I started to practice it. \nI am at the beginning of the implementation of a Linked List using templates and I have been having an error on Xcode, where it states: \"Thread 1: EXC_BAD_ACCESS(code=1, address=0x9)\". In my other compiler, it says it is a segmentation fault, but I cannot find the cause of it.\nWhat might be the reason of this error?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T&gt; struct Node{\n\n    T value;\n    Node * ptr;\n};\n\ntemplate &lt;typename T&gt; class LinkedList {\npublic:\n\n    LinkedList(const T &amp; element);\n    T &amp; push(const T &amp; element);\n    T &amp; pop(const int index);\n    int get_size() const { return this-&gt;_size; }\n    void printll();\n\nprivate:\n    LinkedList(){};\n    struct Node&lt;T&gt; * head;\n    int _size;\n};\n\ntemplate &lt;typename T&gt; LinkedList&lt;T&gt;::LinkedList(const T &amp; element){\n\n    struct Node&lt;T&gt; new_node;           \n    new_node.value = element;\n    new_node.ptr = nullptr;\n\n    this-&gt;head = &amp;new_node;            \n\n    this-&gt;_size = 1;                    \n}\n\ntemplate &lt;typename T&gt; void LinkedList&lt;T&gt;::printll(){\n\n    if(this-&gt;head != nullptr){\n\n        Node&lt;T&gt; * temp = this-&gt;head;\n        while((*temp).ptr != nullptr){  // Error here.\n            cout &lt;&lt; (*temp).value &lt;&lt; \" \";\n            temp = temp-&gt;ptr;\n        }\n        cout &lt;&lt; (*temp).value &lt;&lt; endl;\n        cout &lt;&lt; endl;\n\n    }else {\n        cout &lt;&lt; \"The list is empty!\" &lt;&lt; endl;\n    }\n}\n\nint main(int argc, char** argv){\n\n    LinkedList&lt;int&gt; l1(5);\n\n    l1.printll();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "threshold"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1519836499, "post_id": 49032386, "comment_id": 85073967, "body": "So make it 2 steps, first use <code>threshold</code> to make the mask, and then use it with <code>setTo</code>."}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1519892760, "post_id": 49032386, "comment_id": 85095444, "body": "@DanMa\u0161ek Thanks! I found that cv::max could do the job. Check my answer"}], "answers": [{"comments": [{"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1519892461, "post_id": 49037736, "comment_id": 85095296, "body": "That&#39;s a solution is valid if you&#39;re between 0 and 255 as you said but my image is float! But thanks"}, {"owner": {"reputation": 653, "user_id": 8756717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QGWyG.jpg?s=128&g=1", "display_name": "S. Huber", "link": "https://stackoverflow.com/users/8756717/s-huber"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1519971216, "post_id": 49037736, "comment_id": 85132435, "body": "No, it is also a solution for float. You can just replace 255 by any other constant, like 0.0. I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 653, "user_id": 8756717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QGWyG.jpg?s=128&g=1", "display_name": "S. Huber", "link": "https://stackoverflow.com/users/8756717/s-huber"}, "is_accepted": true, "score": 1, "last_activity_date": 1519971162, "last_edit_date": 1519971162, "creation_date": 1519848587, "answer_id": 49037736, "question_id": 49032386, "link": "https://stackoverflow.com/questions/49032386/thresholding-image-in-opencv-of-min-value/49037736#49037736", "title": "Thresholding image in OpenCV of min value", "body": "<p>Note that for a number <code>x</code> between 0 and 255 the equivalence <code>max(x, thresh) == 255 - min(255-x, 255-thresh)</code> holds and the results stay within [0, 255].</p>\n\n<p>So you can (i) invert the image, (ii) build the max-threshold by <code>255-thresh</code>, and (iii) invert again.</p>\n\n<p>Note that mathematically for any constant <code>a</code> it holds that\n<code>max(x, thresh) == a - min(a-x, a-thresh)</code>, e.g., <code>max(x, thresh) == -min(-x, -thresh)</code>. The last one is the preferred one for floating-point data.</p>\n"}, {"tags": [], "owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1519892726, "creation_date": 1519892726, "answer_id": 49045437, "question_id": 49032386, "link": "https://stackoverflow.com/questions/49032386/thresholding-image-in-opencv-of-min-value/49045437#49045437", "title": "Thresholding image in OpenCV of min value", "body": "<p>I found this function:</p>\n\n<pre><code>void cv::max(\nconst Mat&amp; src1, // Input array\ndouble value, // Scalar input\nMat&amp; dst // Result array\n); \n</code></pre>\n\n<p>It compares every element of <code>src1</code> with <code>value</code> and take the maximum, it kind of threshold but with <code>cv::max</code> function.        </p>\n"}], "owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 49037736, "answer_count": 2, "score": 1, "last_activity_date": 1519971162, "creation_date": 1519829556, "question_id": 49032386, "link": "https://stackoverflow.com/questions/49032386/thresholding-image-in-opencv-of-min-value", "title": "Thresholding image in OpenCV of min value", "body": "<p>I want to use <code>cv::threshold</code> function because it is well optimized rather than looping through the whole image myself.. however it doesn't have a thresholding to a minimum value. That the options available:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mzQ4T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mzQ4T.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I want is to set pixels that are smaller than a certain value to that value, example:</p>\n\n<pre><code>image.at&lt;float&gt;(j,i) &gt; 0.1f ? image.at&lt;float&gt;(j,i): 0.1f;\n</code></pre>\n\n<p>Can I do that without using loops?</p>\n\n<p>I tried that:</p>\n\n<pre><code>image.setTo(0.1, image &lt; 0.1);\n</code></pre>\n\n<p>But it is saying that:</p>\n\n<pre><code> error: no match for \u2018operator&lt;\u2019 (operand types are \u2018const cv::UMat\u2019 and \u2018double\u2019)\n</code></pre>\n\n<p>PS: my images are of type cv::UMat</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1519829442, "post_id": 49032253, "comment_id": 85069242, "body": "1st copy - object being passed to constructor of <code>MyClass</code> by value; 2nd time - member variable <code>var</code> being copy-initialized."}, {"owner": {"reputation": 1569, "user_id": 1694593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ec320e3d57fdbde4b7ecc8194b2a2d1?s=128&d=identicon&r=PG", "display_name": "Wander3r", "link": "https://stackoverflow.com/users/1694593/wander3r"}, "edited": false, "score": 1, "creation_date": 1519829641, "post_id": 49032253, "comment_id": 85069386, "body": "to avoid one copy, you can make MyClass accept reference of A, than by value.. MyClass(A&amp; a):var(a)"}], "answers": [{"tags": [], "owner": {"reputation": 10406, "user_id": 33987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9915b127729c73da8b0b253f6c867e45?s=128&d=identicon&r=PG", "display_name": "Joris Timmermans", "link": "https://stackoverflow.com/users/33987/joris-timmermans"}, "is_accepted": true, "score": 8, "last_activity_date": 1519829422, "creation_date": 1519829422, "answer_id": 49032341, "question_id": 49032253, "link": "https://stackoverflow.com/questions/49032253/why-copy-constructor-is-being-called-two-times-in-below-code/49032341#49032341", "title": "Why copy constructor is being called two times in below code?", "body": "<p>You are passing the constructor argument <strong>by value</strong>, which is where your second copy comes from.  You'll get just one copy if you change the constructor signature to the more canonical C++:</p>\n\n<pre><code>MyClass(const A&amp; a)\n  : var(a)\n{\n}\n</code></pre>\n\n<p>That's called argument passing by <strong>const reference</strong>, and pre-C++11 it was basically the go-to way of passing arguments to functions.</p>\n\n<p>If you know you will be dealing with temporary objects passed as function arguments though, then C++11 and onwards also have <strong>pass-by-rvalue-reference</strong> - see e.g. <a href=\"https://stackoverflow.com/questions/37935393/pass-by-value-vs-pass-by-rvalue-reference\">Pass by value vs pass by rvalue reference</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "is_accepted": false, "score": 1, "last_activity_date": 1519830561, "creation_date": 1519830561, "answer_id": 49032733, "question_id": 49032253, "link": "https://stackoverflow.com/questions/49032253/why-copy-constructor-is-being-called-two-times-in-below-code/49032733#49032733", "title": "Why copy constructor is being called two times in below code?", "body": "<p>The first copy is from <code>a1</code> to the parameter <code>a</code> of the MyClass constructor, the second one is from the parameter <code>a</code> to the member <code>var</code>.</p>\n\n<p>If you want to reduce the number of copies, you have (at least) two options:</p>\n\n<p>Pass a const reference to the constructor as mentioned by Joris:</p>\n\n<pre><code>MyClass(A const &amp;a) : var(a) {\n}\n</code></pre>\n\n<p>If A can be efficiently moved, take <code>a</code> by value and move to the member:</p>\n\n<pre><code>MyClass(A a) : var(std::move(a)) {\n}\n</code></pre>\n\n<p>That way, a user that does not need his <code>A</code> anymore can move it into the new MyClass instance, while a user that still needs the A can pass it by value.</p>\n\n<pre><code>void useA(A &amp;a);\nvoid doSomethingWithM(MyClass &amp; m);\n\nvoid functionThatNeedsAAgain() {\n    A myImportantA;\n    MyClass m {myImportantA}; // copy myImportantA once\n    useA(myImportantA);\n    doSomethingWithM(m);\n}\n\nvoid functionThatDoesNotNeedAAgain() {\n    A tempA;\n    // no copy needed, as tempA will never be used again\n    MyClass m {std::move(tempA);\n    doSomethingWithM(m);\n}\n</code></pre>\n\n<p>The third option would be to provide constructors from both <code>const A&amp;</code> and <code>A&amp;&amp;</code> but I would weigh the code duplication against the benefit.</p>\n\n<p>If you want to know how far this can be taken if <code>A</code> happens to be <code>std::string</code> and you want to cover the construction of temporary <code>A</code>s, watch this <a href=\"https://youtu.be/PNRju6_yn3o\" rel=\"nofollow noreferrer\">excellent talk</a> by Nicolai Josuttis.</p>\n"}], "owner": {"reputation": 712, "user_id": 5570606, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NEUuj.jpg?s=128&g=1", "display_name": "Stubborn", "link": "https://stackoverflow.com/users/5570606/stubborn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 49032341, "answer_count": 2, "score": 3, "last_activity_date": 1519830561, "creation_date": 1519829221, "last_edit_date": 1519829473, "question_id": 49032253, "link": "https://stackoverflow.com/questions/49032253/why-copy-constructor-is-being-called-two-times-in-below-code", "title": "Why copy constructor is being called two times in below code?", "body": "<p>Can anyone explain why the copy constructor here is called two times?</p>\n\n<pre><code>class  A \n{\n    int i;\n    public:\n    A(){cout&lt;&lt;\"IN constr\"&lt;&lt;endl;};\n    A(int x):i(x) {};\n     A (A &amp;a)\n     {\n         cout&lt;&lt;\"in copy\"&lt;&lt;endl;\n         i= a.i;\n     }\n};\n\nclass MyClass {\n    A var;\npublic:\n    MyClass(A a):var(a) {\n                     }\n};\n\nint main() {\n\n    A a1;\n    MyClass m(a1);\n    return 0;\n}\n</code></pre>\n\n<p>When i run the code out put is:</p>\n\n<pre><code>IN constr\nin copy\nin copy\n</code></pre>\n\n<p>I can understand one time when it copies <code>a</code> into the variable <code>var</code>, but when it gets called second time?</p>\n"}, {"tags": ["c++", "data-structures", "complexity-theory", "automata", "finite-automata"], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1519829376, "creation_date": 1519829376, "answer_id": 49032317, "question_id": 49032199, "link": "https://stackoverflow.com/questions/49032199/dfa-transition-function/49032317#49032317", "title": "dfa transition function", "body": "<p>If you actually need a constant evaluation of the transition function, no searching is permitted. This means that only a two-dimensional array (where one index is the current state and the other the read letter) can be used.</p>\n"}], "owner": {"reputation": 11, "user_id": 9424151, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Amine", "link": "https://stackoverflow.com/users/9424151/amine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521033479, "creation_date": 1519829059, "last_edit_date": 1521033479, "question_id": 49032199, "link": "https://stackoverflow.com/questions/49032199/dfa-transition-function", "title": "dfa transition function", "body": "<p>i'm looking to create a transition function of an automata with a O(1)  , complexity . I was thinking of using a HashMap or a Binary tree .\nAre those idea any good ? an have you some suggestions .\nThank you for your attention :)</p>\n"}, {"tags": ["c++", "interface"], "comments": [{"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1519829140, "post_id": 49032182, "comment_id": 85069023, "body": "A template class with the type of the interpreter?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1519829219, "post_id": 49032182, "comment_id": 85069094, "body": "your post is not very clear, but it seems to me like you want <a href=\"https://en.wikipedia.org/wiki/Double_dispatch\" rel=\"nofollow noreferrer\">double dispatch</a>?"}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 1, "creation_date": 1519829234, "post_id": 49032182, "comment_id": 85069105, "body": "A polymorphic interpreter?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1519829324, "post_id": 49032182, "comment_id": 85069158, "body": "you need to give a <i>for instance</i> of an intended use. It is not clear at all what <code>SetInterpreter</code> should do"}, {"owner": {"reputation": 10089, "user_id": 294813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33c092532e11d12bd14f4fbe564560fb?s=128&d=identicon&r=PG", "display_name": "petersohn", "link": "https://stackoverflow.com/users/294813/petersohn"}, "edited": false, "score": 0, "creation_date": 1519829582, "post_id": 49032182, "comment_id": 85069348, "body": "What about <code>std::function</code>?"}, {"owner": {"reputation": 1829, "user_id": 2505648, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xYTjv.jpg?s=128&g=1", "display_name": "Shady Atef", "link": "https://stackoverflow.com/users/2505648/shady-atef"}, "reply_to_user": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1519829808, "post_id": 49032182, "comment_id": 85069501, "body": "@jdehesa, Yes I may try that"}, {"owner": {"reputation": 1829, "user_id": 2505648, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xYTjv.jpg?s=128&g=1", "display_name": "Shady Atef", "link": "https://stackoverflow.com/users/2505648/shady-atef"}, "reply_to_user": {"reputation": 10089, "user_id": 294813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33c092532e11d12bd14f4fbe564560fb?s=128&d=identicon&r=PG", "display_name": "petersohn", "link": "https://stackoverflow.com/users/294813/petersohn"}, "edited": false, "score": 0, "creation_date": 1519829838, "post_id": 49032182, "comment_id": 85069519, "body": "@petersohn, badly I have to stick with c++98"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1519830729, "post_id": 49032182, "comment_id": 85070131, "body": "what is <code>Tcl_Interp</code> and what types do you expect for <code>interpreter</code>? Because if they are related then a simple <code>dynamic_cast</code> would suffice."}, {"owner": {"reputation": 1829, "user_id": 2505648, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xYTjv.jpg?s=128&g=1", "display_name": "Shady Atef", "link": "https://stackoverflow.com/users/2505648/shady-atef"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1519833083, "post_id": 49032182, "comment_id": 85071713, "body": "@bolov <code>Tcl_Interp</code> is the c structure for <code>Tcl</code> interpreter, tcl is an interpreted language used for test automation ( or at least my case).  No interpreter are not related at all, it will change to totally different thing, if I added support for Python or ruby"}, {"owner": {"reputation": 601, "user_id": 1338667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c6c97eb8a07daf93f2415c6080bd47?s=128&d=identicon&r=PG", "display_name": "nVxx", "link": "https://stackoverflow.com/users/1338667/nvxx"}, "edited": false, "score": 0, "creation_date": 1519833736, "post_id": 49032182, "comment_id": 85072165, "body": "Does <code>SetInterpreter(...)</code> need to be a part of the virtual interface?  Do you plan to call it on a base pointer? I&#39;d assume you&#39;d like to set the interpreter when instantiating the interpreter, where the concrete type is known, thus you can define <code>SetInterpreter(...)</code> in every concrete class with the concrete parameter type."}, {"owner": {"reputation": 1829, "user_id": 2505648, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xYTjv.jpg?s=128&g=1", "display_name": "Shady Atef", "link": "https://stackoverflow.com/users/2505648/shady-atef"}, "reply_to_user": {"reputation": 601, "user_id": 1338667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c6c97eb8a07daf93f2415c6080bd47?s=128&d=identicon&r=PG", "display_name": "nVxx", "link": "https://stackoverflow.com/users/1338667/nvxx"}, "edited": false, "score": 0, "creation_date": 1519834115, "post_id": 49032182, "comment_id": 85072412, "body": "@nVxx, this is what I am currently exploring and I think it&#39;s more elegant and currently testing it."}], "owner": {"reputation": 1829, "user_id": 2505648, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xYTjv.jpg?s=128&g=1", "display_name": "Shady Atef", "link": "https://stackoverflow.com/users/2505648/shady-atef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519829671, "creation_date": 1519829020, "last_edit_date": 1592644375, "question_id": 49032182, "link": "https://stackoverflow.com/questions/49032182/variable-parameter-type-for-virtual-function-in-interface", "title": "Variable parameter type for virtual function in interface", "body": "<p>I am currently wrapping access to different programming languages interpreters in a single interface as following.</p>\n<pre><code>class Interpreter\n{\n\npublic:\n    virtual int Evaluate(const stirng&amp; cmd) = 0;\n    virtual void SetInterpreter(void * interpeter) = 0;\n};\n</code></pre>\n<p>I have function <code>SetInterpreter</code> to set an interpreter instance.\nThe issue that its parameter will vary according to the target interpreter.\n<code>void *</code> will work as generic parameter , but I'l lose all type info about the passed parameter.</p>\n<p>So is there any alternative providing some sort of type checking ?</p>\n<hr />\n<h2>Edit 1 : usage example</h2>\n<pre><code>Class TCLInterpreter : public Interpreter {\n\npublic:    \n\n    void SetInterpreter(void* interpreter)\n    {\n    this-&gt;tcl_interpreter = (Tcl_Interp *) interpreter;\n    }\n};\n</code></pre>\n<p>I can't check the type of the parameter, so I can't guarantee the behavior if parameter of another type was passed .</p>\n"}, {"tags": ["c++", "protocols", "can-bus"], "comments": [{"owner": {"reputation": 1545, "user_id": 2687589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0ca2e33a502cc32f12a023a29886f8e7?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon McKenzie", "link": "https://stackoverflow.com/users/2687589/brandon-mckenzie"}, "edited": false, "score": 1, "creation_date": 1519830143, "post_id": 49032126, "comment_id": 85069727, "body": "Perhaps a better place for this is <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>?"}, {"owner": {"reputation": 1415, "user_id": 3055724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZGm8W.png?s=128&g=1", "display_name": "Duloren", "link": "https://stackoverflow.com/users/3055724/duloren"}, "edited": false, "score": 0, "creation_date": 1519830910, "post_id": 49032126, "comment_id": 85070259, "body": "I also believe that codereview is the best place to discuss it. Anyway my suggestion is think in all protocol issues before start. For example, is this protocol reliable to data delivery? What happens if one package is lost? Does the receptor and emissor need to exchange something before/after the message is actually sent? In terms of real communication it is required to think in all the picture, not just how to serialize/unserialize the message. By the way, I did&#39;t downvote your question."}], "answers": [{"tags": [], "owner": {"reputation": 394, "user_id": 1406876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbb2bb97e3dd07dff400e22f9bfd2d2?s=128&d=identicon&r=PG", "display_name": "Alex Robenko", "link": "https://stackoverflow.com/users/1406876/alex-robenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1519888625, "creation_date": 1519888625, "answer_id": 49044482, "question_id": 49032126, "link": "https://stackoverflow.com/questions/49032126/communication-protocol-implementation-in-embedded-c/49044482#49044482", "title": "Communication protocol implementation in embedded C++", "body": "<p>I'd recommend reading <a href=\"https://www.gitbook.com/book/arobenko/comms-protocols-cpp/details\" rel=\"nofollow noreferrer\">Guide to Implementing Communication Protocols in C++ (for Embedded Systems)</a> free e-book first. The main concept mentioned in the book is that it is not uncommon for embedded systems to make an attempt to use the same protocol messages in the future over different additional I/O interfaces (such as wifi or bluethooth). As the result, it would be beneficial to separate application messages payload from the transport framing and especially from your CAN bus packatization.</p>\n"}], "owner": {"reputation": 569, "user_id": 6006544, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/dd1ce8be57e814c5564600bcfc5786e3?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6006544/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 0, "accepted_answer_id": 49044482, "answer_count": 1, "score": -1, "last_activity_date": 1519888625, "creation_date": 1519828839, "question_id": 49032126, "link": "https://stackoverflow.com/questions/49032126/communication-protocol-implementation-in-embedded-c", "title": "Communication protocol implementation in embedded C++", "body": "<p>I have been implementing a CAN based proprietary communication protocol in C++.\nThe protocol uses messages with following structure:</p>\n\n<pre><code>1       Control packet  (3 bytes header, 5 payload bytes)\n0 - 124 Data packets    (2 bytes header, 6 payload bytes)\n1       CRC packet      (2 bytes header, 4 payload bytes, 2 CRC bytes)\n</code></pre>\n\n<p>I don't have much experience with communication protocols implementation so I \nwould like to discuss here my solution. I have started with transmission. </p>\n\n<p>From the top view I have decided to divide the implementation of transmission\ninto three classes. Each of them will implement Singleton design pattern. \nThe classes interfaces are following:</p>\n\n<pre><code>// Main interface for communication over CAN bus.\nclass Manager\n{\n  public:\n\n      // initializes the CAN periphery (baud rate and reception filters)\n      bool init(can_baudrate_e, uint16_t*);\n      // creates the message, divides the message into packets and puts the \n      // packets into transmission queue, message description (type, \n      // destination node ID) and message data are stored in a structure\n      bool sendMsg(app_msg_data_t*);\n\n\n  private:\n\n      // appends unique message code to informations in app_msg_data_t \n      // structure\n      void buildMsg(app_msg_data_t*, msg_t*);\n      // calculates needed number of packets\n      uint8_t calcNoPkts(msg_t*);\n      // divides the message into packets\n      void appMsg2Pkts(msg_t*, uint8_t, pkt_t*);\n      // creates message Control packet\n      void buildAppControlPkt(msg_t*, pkt_t*, uint8_t, uint8_t);\n      // creates message Data packet\n      void buildAppDataPkt(msg_t*, pkt_t*, uint8_t);\n      // creates message CRC packet\n      void buildAppCRCPkt(msg_t*, pkt_t*, uint8_t, uint8_t);\n      // transform whole message into byte array\n      uint16_t getAppMsgBytes(pkt_t*, uint8_t, uint8_t*);\n      // returns the data content of the message\n      uint8_t* getAppMsgData(msg_t*);\n      // calculates the CRC for a message (message passed as array of bytes) \n      uint16_t calcCRC(uint8_t*, uint16_t);\n} \n\n\n// Transmission buffer\nclass TxQueue\n{\n\n   public:\n      // puts the packet into the transmission queue\n      bool putPacket(Manager::pkt_t*);\n      // retrieves the packet from the transmission queue\n      bool getPacket(Manager::pkt_t*);\n\n   private:\n}\n\n// Transmits the packets onto the CAN bus\nclass Transmitter\n{\n\n    public:\n      // transmits one packet per call onto the CAN bus \n      bool transmit(void);\n\n    private:\n      // transforms the packet into CAN frame\n      static void packet2CANFrame(Manager::pkt_t*, can_msg_t*);\n\n}\n</code></pre>\n\n<p>I would very appreciate if somebody more experienced than me could asses my solution. I am afraid of taking the wrong path. Thank you in advance for any suggestions.</p>\n"}, {"tags": ["c++", "dependency-injection", "constants"], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1519829163, "last_edit_date": 1519829163, "creation_date": 1519828008, "answer_id": 49031866, "question_id": 49031718, "link": "https://stackoverflow.com/questions/49031718/is-it-possible-to-enforce-constness-of-passed-dependency-object-in-c/49031866#49031866", "title": "Is it possible to enforce constness of passed dependency object in c++", "body": "<p>Something of the form</p>\n\n<pre><code>class C\n{\n    C() = default;\n    friend class D;\n};\n\nclass D\n{\n    public:\n    C create_C() = delete;\n    C create_C() const {return C};\n};\n</code></pre>\n\n<p>would do it. I've made the construction of <code>C</code> <code>private</code>. <code>D</code> can access it though since it's a <code>friend</code> of <code>C</code>. The non-<code>const</code> overload of <code>create_C</code> is deleted.</p>\n"}, {"comments": [{"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 1, "creation_date": 1519831483, "post_id": 49032095, "comment_id": 85070631, "body": "This is not guaranteed to work against deliberate misuse, or a const Dep&amp; being passed from elsewhere: <code>C obj(const_cast&lt;const Dep &amp;&gt;(d)) &#47;&#47; haha</code>."}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 1, "creation_date": 1519832015, "post_id": 49032095, "comment_id": 85070968, "body": "The problem is that creating a const &amp; from a non-const object is allowed, and you can not really differentiate where a const reference came from: <code>std::unique_ptr&lt;C&gt; makeC(const Dep &amp;d) {     return std::make_unique&lt;C&gt;(d); }</code> <code>makeC(nonConstD);</code>"}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 5, "last_activity_date": 1519828760, "creation_date": 1519828760, "answer_id": 49032095, "question_id": 49031718, "link": "https://stackoverflow.com/questions/49031718/is-it-possible-to-enforce-constness-of-passed-dependency-object-in-c/49032095#49032095", "title": "Is it possible to enforce constness of passed dependency object in c++", "body": "<p>If I understand your question correctly, you want to only accept a <code>const</code> argument, and want to get an error if a non-<code>const</code> argument is passed.</p>\n\n<p>The simplest way should be marking the non-<code>const</code> version as <code>delete</code>:</p>\n\n<pre><code>class C {\n  private:\n    const Dep&amp; dep_;\n  public:\n    C(const Dep&amp; dep) : dep_(dep){}\n    C(Dep &amp;) = delete;\n};\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>Dep d;\nC obj(d); // Error, deleted function selected\n\nconst Dep d1(d);\nC obj(d1); // ok\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1520040039, "post_id": 49034204, "comment_id": 85165298, "body": "You could simply make <code>Immutable</code> a template, add a few ctors, and it can be used more widely..."}], "tags": [], "owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "is_accepted": true, "score": 2, "last_activity_date": 1519835164, "creation_date": 1519835164, "answer_id": 49034204, "question_id": 49031718, "link": "https://stackoverflow.com/questions/49031718/is-it-possible-to-enforce-constness-of-passed-dependency-object-in-c/49034204#49034204", "title": "Is it possible to enforce constness of passed dependency object in c++", "body": "<p>I do not think that there is a way to enforce this directly via syntax. </p>\n\n<p>The problem is that any <code>Dep&amp;</code> may be converted freely to a <code>const Dep&amp;</code>. As you correctly noted taking a <code>const Dep &amp;d</code> does not mean that is constant, rather it is a promise that your function will never modify <code>d</code>.</p>\n\n<p>While the other answers ingeniously use overloading and deleted methods to create an error whenever a non-const Dep is passed directly, these methods fail, when a <code>const Dep &amp;</code> is passed from elsewhere.</p>\n\n<pre><code>// this could be arbitrarily complex and nested\nstd::unique_ptr&lt;C&gt; makeC(const Dep &amp;d) {\n     return std::make_unique&lt;C&gt;(d);\n} \n\nvoid test() {\n    Dep nonConstDep;\n    auto pC = makeC(nonConstD); // conversion to const &amp; is legal\n    nonConstDep.mutate(); // Nooo!\n}\n</code></pre>\n\n<p>What you need is an immutable dep class that does not allow mutation and conversion.</p>\n\n<p>Since I do not know whether you may change the <code>Dep</code> class and how you use it in other parts of your program, I suggest this solution:</p>\n\n<p>Create an <code>ImmutableDep</code> wrapper, that has a private <code>const Dep</code>. Then you could restrict your class to only take ImmutableDep references.</p>\n\n<pre><code>class ImmutableDep {\n     const Dep dep_;\n\npublic:\n     inline const Dep &amp;get() const { return dep_; }\n};\n\nclass C {\n     const Dep &amp;dep_;\npublic:\n     // we know that an ImmutableDep's dep really is immutable\n     C(const ImmutableDep &amp;dep) : dep_(dep.get()) {}\n}\n</code></pre>\n\n<p>This way you can pass around const or non-const references to <code>ImmutableDep</code> as much as you like, you are always guaranteed that the private wrapped <code>Dep</code> is immutable.</p>\n\n<p>If you need to modify <code>Dep</code> only during a limited \"construction\" phase, I suggest using the <a href=\"https://en.wikipedia.org/wiki/Builder_pattern\" rel=\"nofollow noreferrer\">Builder pattern</a> and create an immutable object after you are done, perhaps moving anything large into the the immutable object.</p>\n"}], "owner": {"reputation": 707, "user_id": 6518168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/828d5d9965ce458c668b904baac1e19a?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry J", "link": "https://stackoverflow.com/users/6518168/dmitry-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 49034204, "answer_count": 3, "score": 3, "last_activity_date": 1519836863, "creation_date": 1519827592, "question_id": 49031718, "link": "https://stackoverflow.com/questions/49031718/is-it-possible-to-enforce-constness-of-passed-dependency-object-in-c", "title": "Is it possible to enforce constness of passed dependency object in c++", "body": "<p>Here is what I would like to prevent:</p>\n\n<pre><code>class Dep; //for \"dependency\"\n\nclass C {\n  private: \n    const Dep&amp; dep_; //or std::shared_ptr if I want to guarantee proper lifetime of dependency\n  public:\n    C(const Dep&amp; dep) : dep_(dep){}\n}\n\nDep d(Arg arg);\nC obj(d); //obj can't change d\nd.some_non_const_method(); //But it's creator can :(\n</code></pre>\n\n<p>What I would like to get is that the only correct way to create <code>C</code> object was like this:</p>\n\n<pre><code>Dep d(Arg arg);\nd.some_non_const_method();\nconst Dep d1(d); //or move constructor if appropriate\nC obj(d1); //Object d1 must be const!\nd1.some_non_const_method(); //compile error, so obj can be sure that the dependency he's got is really const.\n</code></pre>\n\n<p>Is there any way to enforce this via syntax?</p>\n\n<p>P.S. Dependency is intended to be shared, so I can't use <code>std::unique_ptr</code> here.</p>\n"}, {"tags": ["c++", "numerical-methods"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1519827602, "post_id": 49031645, "comment_id": 85067925, "body": "Well it is previously defined there. Define it once only and your problem is solved."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1519827624, "post_id": 49031645, "comment_id": 85067940, "body": "As the error message says, you have defined <code>QGaussLegendre::QGaussLegendre</code> two times. Remove one of them, preferably the empty one in <code>gauss_legendre.h:25</code>."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1519827638, "post_id": 49031645, "comment_id": 85067948, "body": "Did you read the error? You are re-defining your constructor of .<code>QGaussLegendre</code>. <b>Both</b> the header, and .cpp file contains a definition of it."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1519827693, "post_id": 49031645, "comment_id": 85067986, "body": "Defined in two different ways, I&#39;m guessing both definitions need to be combined in the cpp file."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9423928, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matteo", "link": "https://stackoverflow.com/users/9423928/matteo"}, "edited": false, "score": 0, "creation_date": 1519835412, "post_id": 49031772, "comment_id": 85073237, "body": "So, I can define the constructor only in legendre_gauss.cxx. But in this case I get &lt;error: prototype for \u2018QGaussLegendre::QGaussLegendre(qenum::Order)\u2019 does not match any in class \u2018QGaussLegendre\u2019&gt;"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 41, "user_id": 9423928, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matteo", "link": "https://stackoverflow.com/users/9423928/matteo"}, "edited": false, "score": 0, "creation_date": 1519835511, "post_id": 49031772, "comment_id": 85073312, "body": "@Matteo did you declare the constructor in the class definition?"}, {"owner": {"reputation": 41, "user_id": 9423928, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matteo", "link": "https://stackoverflow.com/users/9423928/matteo"}, "edited": false, "score": 0, "creation_date": 1519836000, "post_id": 49031772, "comment_id": 85073625, "body": "In gauss_legendre.h I write &lt;class QGaussLegendre : public QBase{public:QGaussLegendre(); etc...}&gt;"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 41, "user_id": 9423928, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matteo", "link": "https://stackoverflow.com/users/9423928/matteo"}, "edited": false, "score": 0, "creation_date": 1519836475, "post_id": 49031772, "comment_id": 85073956, "body": "@Matteo so, you&#39;ve declared the function <code>QGaussLegendre()</code>, but you haven&#39;t declared <code>QGaussLegendre(Order)</code> which is what you try to define? There&#39;s your problem."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1519827723, "creation_date": 1519827723, "answer_id": 49031772, "question_id": 49031645, "link": "https://stackoverflow.com/questions/49031645/redefinition-of-classes-error-in-c/49031772#49031772", "title": "redefinition of classes error in c++", "body": "<blockquote>\n  <p>redefinition of classes error</p>\n</blockquote>\n\n<p>That's not an error about redefinition of a class. That is an error about redefinition of a function. In particular, redefinition of the function <code>QGaussLegendre::QGaussLegendre(const Order order)</code> which is the contsructor of class <code>QGaussLegendre</code>.</p>\n\n<p>You've defined it first here in <code>quadrature.h</code>:</p>\n\n<pre><code>QGaussLegendre (const Order _order=INVALID_ORDER) : QBase (_order){}\n</code></pre>\n\n<p>And second time in <code>legendre_gauss.cxx</code>:</p>\n\n<pre><code>QGaussLegendre::QGaussLegendre(const Order order)\n{\n</code></pre>\n\n<blockquote>\n  <p>Can I do to solve the problem?</p>\n</blockquote>\n\n<p>Solution is to define the function exactly once.</p>\n"}], "owner": {"reputation": 41, "user_id": 9423928, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matteo", "link": "https://stackoverflow.com/users/9423928/matteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1519827723, "creation_date": 1519827415, "question_id": 49031645, "link": "https://stackoverflow.com/questions/49031645/redefinition-of-classes-error-in-c", "title": "redefinition of classes error in c++", "body": "<p>I searched through some of the other pages with this same error, but my code does not have any of their issues that I can find. </p>\n\n<p>I have a base class named QBase defined in quadrature.h:</p>\n\n<pre><code>#ifndef SRC_QUADRATURE_H_\n#define SRC_QUADRATURE_H_\n\n#include \"enum_order.h\"\n#include \"enum_quadrature_type.h\"\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nclass QBase\n{\n    protected:\n\n        QBase (const Order _order=INVALID_ORDER);\n\n    public:\n\n        virtual ~QBase() {}\n\n        virtual QuadratureType type() const = 0;\n\n        static std::unique_ptr&lt;QBase&gt; build (const QuadratureType qt, const Order order=INVALID_ORDER);\n\n        const std::vector&lt;double&gt; &amp; get_points() const { return _points; }\n        const std::vector&lt;double&gt; &amp; get_weights() const { return _weights; }\n        std::vector&lt;double&gt; &amp; get_points() { return _points; }\n        std::vector&lt;double&gt; &amp; get_weights() { return _weights; }\n\n    protected:\n\n        const Order _order;\n\n        std::vector&lt;double&gt; _points;\n        std::vector&lt;double&gt; _weights;\n};\n\n#endif /* SRC_QUADRATURE_H */\n</code></pre>\n\n<p>I derive a class QGaussLegendre by QBase definded in gauss_legendre.h</p>\n\n<pre><code>#ifndef SRC_QUADRATURE_GAUSSLEGENDRE_H_\n#define SRC_QUADRATURE_GAUSSLEGENDRE_H_\n\n#include \"quadrature.h\"\n\nclass QGaussLegendre : public QBase\n{\n    public: \n\n         QGaussLegendre (const Order _order=INVALID_ORDER) : QBase (_order){}\n\n         ~QGaussLegendre (){}\n\n         virtual QuadratureType type() { return QGAUSSLEGENDRE; }\n};\n\n#endif /* SRC_QUADRATURE_GAUSSLEGENDRE_H_ */\n</code></pre>\n\n<p>In the main file I use the build() member function to get points and weights as follows</p>\n\n<pre><code>const Order order = ddp.order;\nconst QuadratureType qt = ddp.qt;\n\nstatic std::unique_ptr&lt;QBase&gt; qr(QBase::build(qt,order));\n\nconst std::vector&lt;double&gt;&amp; points = qr-&gt;get_points();\nconst std::vector&lt;double&gt;&amp; weights = qr-&gt;get_weights();\n</code></pre>\n\n<p>I don't have any problem till here. Now, the points and weights are defined in the file legendre_gauss.cxx</p>\n\n<pre><code>#include \"gauss_legendre.h\"\n\nQGaussLegendre::QGaussLegendre(const Order order)\n{\n\n    switch(order)\n    {\n\n       case CONSTANT:\n       case FIRST:\n       {\n           _points.resize (1);\n           _weights.resize(1);\n\n           _points[0](0)  = 0.;\n\n           _weights[0]= 2.;\n        }\n     }\n}  \n</code></pre>\n\n<p>When I compile this last file I get the error:</p>\n\n<pre><code>/home/matteo/flux/gauss_legendre.cxx:13:1: \nerror: redefinition of \u2018QGaussLegendre::QGaussLegendre(qenum::Order)\u2019\n QGaussLegendre::QGaussLegendre(const Order order)\n ^~~~~~~~~~~~~~\nIn file included from /home/matteo/flux/gauss_legendre.cxx:8:0:\n/home/matteo/flux/gauss_legendre.h:25:3: \nnote: \u2018QGaussLegendre::QGaussLegendre(qenum::Order)\u2019 previously \ndefined here\n QGaussLegendre (const Order _order=INVALID_ORDER) : QBase (_order)\n ^~~~~~~~~~~~~~\n</code></pre>\n\n<p>Can I do to solve the problem? Thanks a lot.</p>\n"}, {"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1519827478, "post_id": 49031639, "comment_id": 85067824, "body": "C++ and C are different languages.  You&#39;re clearly using C++ so please don&#39;t tag C."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1519827608, "post_id": 49031639, "comment_id": 85067932, "body": "Is there any reason you&#39;re not using a std::vector?  If you switch then you can get rid of your new&#39;s and deletes."}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1519827610, "post_id": 49031639, "comment_id": 85067933, "body": "Where is an allocation of tempBuffer?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 3, "creation_date": 1519827639, "post_id": 49031639, "comment_id": 85067950, "body": "Adding to what @UKMonkey, since you&#39;re using c++ use <code>std::string</code> and stop using <code>char *</code> pointers for strings which require a lot of ability and experience, and even then are so hard to do right."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1519827735, "post_id": 49031639, "comment_id": 85068013, "body": "And don&#39;t write such a mess of code, that&#39;s where you should start. Note that you have <code>eachLine</code> and <code>eachline</code> which are different identifiers. That&#39;s very confusing, so don&#39;t do that. Try to write code as if it was meant to be read by a 5 year old and understood. Then, you will notice that bugs are much harder to write."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1519827878, "post_id": 49031639, "comment_id": 85068131, "body": "Oh, and if you use <code>new</code> use <code>delete</code>, when allocating an array <code>new []</code> and <code>delete []</code>. You&#39;re not supposed to use <code>free()</code> except when the pointer was directly returned by <code>malloc()</code>/<code>realloc()</code>/<code>calloc()</code>, otherwise it&#39;s undefined behavior. Nor should you combine <code>malloc()</code> and <code>new</code> in your code because then it&#39;s too hard to know when to use <code>free()</code> or <code>delete</code> or <code>delete[]</code>."}, {"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1519827927, "post_id": 49031639, "comment_id": 85068164, "body": "Is your pFileContentBuffer zero-terminated?  If not, strtok can scan past the end of your buffer on the final token scan..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1519827942, "post_id": 49031639, "comment_id": 85068177, "body": "<code>stringId[i].text=malloc(sizeofValue + 1);</code> -- This will not compile using a C++ compiler.  The return value of <code>malloc</code> must be casted to the correct pointer type for a C++ program.  What C++ compiler are you using that accepts this code?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1519828032, "post_id": 49031639, "comment_id": 85068249, "body": "@mark <code>new unsigned char[sizeofthefileinbytes]</code>  if that&#39;s accurate, then no, it won&#39;t be null terminated."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1519828166, "post_id": 49031639, "comment_id": 85068340, "body": "<i>any way or tool to detect the memory corruption if it is happening.</i> Sounds like a job for <a href=\"http://valgrind.org/docs/manual/quick-start.html\" rel=\"nofollow noreferrer\"><code>valgrind</code></a>."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1519829420, "post_id": 49031639, "comment_id": 85069225, "body": "&quot;You&#39;re clearly using C++&quot; - Looking at the code, this is arguable. Except for that stray <code>new[]</code> and <code>delete[]</code>, this looks like C code."}, {"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1519829472, "post_id": 49031639, "comment_id": 85069266, "body": "I should have added, <code>strtok</code> can scan <b>and modify</b> past the end of your buffer if it&#39;s not null terminated.  Relying on CRLF at the end of your file for your <code>while(eachline &lt; pEndOfBuffer)</code> to work sounds like a recipe for undefined behavior.  Your <code>sizeofValue</code> calculation and the <code>strncpy_trimspaces</code> function with <code>someoffset</code> use are suspect as well..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1519830557, "post_id": 49031639, "comment_id": 85070014, "body": "<code>new unsigned char[sizeofthefileinbytes]</code> -- We have no idea if <code>sizeofthefileinbytes</code> is the actual size of the file in bytes.  You say that if you increase this by a few bytes, things start to work.  Did you inspect whether that value is actually correct?"}, {"owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519883696, "post_id": 49031639, "comment_id": 85091817, "body": "@UKMonkey: This is a legacy code so was trying to find the problem wit h this."}, {"owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "reply_to_user": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1519883783, "post_id": 49031639, "comment_id": 85091838, "body": "@Smit Y cyken : The memory for tempBuffer is allocated in fileLinkedList-&gt;pFileContentBuffer= new unsigned char[sizeofthefileinbytes]"}, {"owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1519884282, "post_id": 49031639, "comment_id": 85091986, "body": "@Iharob Al Asimi: I know its a mix of std:string and char * and new and malloc but its a legacy code so trying to find the cause without changing the code. I am calling delete[] for new[]"}, {"owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1519884588, "post_id": 49031639, "comment_id": 85092083, "body": "@PaulMcKenzie This is not the exact code, hidden for security reasons. I have given code fragments to give the logic flow. So in actual code its typecasted."}, {"owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1519884740, "post_id": 49031639, "comment_id": 85092137, "body": "@0x5453; with valgrind it doesn&#39;t crash"}, {"owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519886283, "post_id": 49031639, "comment_id": 85092691, "body": "@UKMonkey: I am not using std list or vectors. I can make the main file list as std::list or std::vector. Each node in the file list contains these internal filecontent buffers. Deleting these buffers causes the crash for some of the files. And files are similar."}, {"owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "reply_to_user": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1519886635, "post_id": 49031639, "comment_id": 85092802, "body": "@Mark :The file size is accurate. The size we get from the file system in windows or linux or the char count if we open it in notepad++. This size is the sizeofthefileinbytes. But why is that a problem? Why is null termination required? I use strtok but from the pattern i found i see that it replaces CR with null termination so the buffer should not overrun. Can i use some tool to check the exact memory location which is the cause of problem?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1519901558, "post_id": 49031639, "comment_id": 85100420, "body": "@Shariq <i>This is not the exact code, hidden for security reasons</i> -- So you decided to play &quot;guess my error&quot;?  You should know that a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is what is needed here, not pseudo-code."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1519901884, "post_id": 49031639, "comment_id": 85100615, "body": "@Shariq you may find this of use <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1519916233, "post_id": 49031639, "comment_id": 85109258, "body": "Not null-terminating the file contents buffer is a problem if all your files don&#39;t end with CRLF.  The way you have it coded, your code will keep on scanning past the end of your buffer until it hits the next 0x00, 0x0d, or 0x0a octet in memory.  This will be somewhat random, AKA undefined.  <code>strtok</code> will zero-out the 0x0d or 0x0a corrupting whatever it is.  Not to mention, if you&#39;re using <code>strlen(eachline)</code> to determine <code>sizeofValue</code> your length of the last token will go beyond the end of your file buffer too.  If this isn&#39;t your problem, if all your files end in CRLF, then post more code."}, {"owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "reply_to_user": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1519994420, "post_id": 49031639, "comment_id": 85143543, "body": "@mark: Yes all my files end in CRLF. The issue seems to be with last strtok call in the loop.As with the fix its not crashing. Answering my question."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "is_accepted": false, "score": 0, "last_activity_date": 1519995671, "creation_date": 1519995671, "answer_id": 49069666, "question_id": 49031639, "link": "https://stackoverflow.com/questions/49031639/memory-corruption-issue/49069666#49069666", "title": "Memory corruption issue", "body": "<p>Well the issue seems to be with the last call to strkok in the loop as with the fix its not crashing.</p>\n\n<p>So the relevant code in the code i provided:</p>\n\n<pre><code>...\npEndOfBuffer = tempBuffer + filesize - 2;//just before last CR and LF\n....\neachline = strtok(tempBuffer, \"\\n\\r\");//i see that this modifies tempBuffer but \n                                      //replaces 1 byte CR with 1 byte \\0 so \n                                      //doesnt look like causing overflow\n.....\nwhile(eachline &lt; pEndOfBuffer) {\n   .....\n    if ((eachline = strtok(NULL, \"\\n\\r\")) == NULL)\n         eachline = tempBuffer + filesize;\n}\n</code></pre>\n\n<p>In the loop i added a condition :</p>\n\n<pre><code>while(eachline &lt; pEndOfBuffer) {\n       .....\n       if(pEndOfBuffer[0] != '\\0'){\n        if ((eachline = strtok(NULL, \"\\n\\r\")) == NULL)\n             eachline = tempBuffer + filesize;\n       }else{\n         break;\n       }\n    }\n</code></pre>\n\n<p>The strtok in the loop was executing one time more so seems to be corrupting the memory. I say seems to be because from logic i see that its not required to execute the last time moreover in the last iteration pEndOfBuffer starts with \\0 as strtok null terminates the tokens. I dont think i need a tool to point the corrupted memory if i fix the code logic and it doesn't crash.</p>\n\n<p>While exploring found somewhere written that since strtok modifies the original string you should work on a copy. They made the copy with strdup. When i tried it didn't work. I could not understand if i work with a copy, the original would delete but the copy would still have to be deleted and if its corrupting the way the original does, how would it help. Anyway alls well that ends well except the 2 negative points i got :(\nThanks</p>\n"}], "owner": {"reputation": 15, "user_id": 1107631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2d03e678a0a335c1f05212ac837dd09?s=128&d=identicon&r=PG", "display_name": "Shariq", "link": "https://stackoverflow.com/users/1107631/shariq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1519995671, "creation_date": 1519827386, "last_edit_date": 1519829819, "question_id": 49031639, "link": "https://stackoverflow.com/questions/49031639/memory-corruption-issue", "title": "Memory corruption issue", "body": "<p>In my application i am creating a linked list of files. I am allocating space for content of those files in a buffer in each node, then extract Value information from the key=value pairs in the file's buffer and putting in an array :  </p>\n\n<p>Code logic is like :</p>\n\n<p>Repeat the following for all the files in the folder</p>\n\n<pre><code>{\n    fileLinkedList-&gt;pFileContentBuffer= new unsigned char[sizeofthefileinbytes]\n...\n}\n</code></pre>\n\n<p>so i have my buffers allocated now.</p>\n\n<p>Next:\nFor some of the files(files with key=value pairs on seperate lines) repeat this</p>\n\n<pre><code>char* tempBuffer = fileLinkedList-&gt;pFileContentBuffer;\n...\npEndOfBuffer = tempBuffer + filesize - 2;//just before last CR and LF\nchar* eachLine = tempBuffer;\neachline = strtok(tempBuffer, \"\\n\\r\");//i see that this modifies tempBuffer but \n                                      //replaces 1 byte CR with 1 byte \\0 so \n                                      //doesnt look like causing overflow\nint i=0;\nwhile(eachline &lt; pEndOfBuffer) {\n    stringId[i].text=malloc(sizeofValue + 1);\n    int len=strncpy_trimspaces(stringId[i].text,eachline+someoffset,someoffset);\n\n    stringIds[i].text[len] = 0;//null terminate\n    i++;\n    if ((eachline = strtok(NULL, \"\\n\\r\")) == NULL)\n         eachline = tempBuffer + filesize;\n}\n</code></pre>\n\n<p>Now I have extracted information (Values) from the buffer so i delete it</p>\n\n<pre><code>delete[] tempBuffer;\n</code></pre>\n\n<p>This passes for few files and then crashes. All the files are similar in size and format. It crashes with :</p>\n\n<p><code>free(): invalid next size (normal): 0x08895cd8 ***</code></p>\n\n<p>Please check the code logic above and let me know there is something wrong with the code logic or any way or tool to detect the memory corruption if it is happening.</p>\n\n<p>If i increase the buffersize(<code>sizeofthefileinbytes</code>) by few bytes it doesn't crash.</p>\n"}]