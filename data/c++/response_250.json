[{"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1571875168, "post_id": 58532376, "comment_id": 103388363, "body": "you&#39;re going to find this question and answers highly enlightening: <a href=\"https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work\">How do function pointers work?</a>"}, {"owner": {"reputation": 8201, "user_id": 599668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5b7d901c39cd592de9c407810715628?s=128&d=identicon&r=PG", "display_name": "slfan", "link": "https://stackoverflow.com/users/599668/slfan"}, "edited": false, "score": 0, "creation_date": 1571896874, "post_id": 58532376, "comment_id": 103392867, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work\">How do function pointers in C work?</a>"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1571912072, "post_id": 58532376, "comment_id": 103400138, "body": "Fun note: try adding some more <code>*</code>."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1571879167, "post_id": 58532421, "comment_id": 103389006, "body": "And functions are one of the few things in C++ that aren&#39;t objects."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1571911780, "post_id": 58532421, "comment_id": 103399973, "body": "@Scheff You&#39;re correct. I copied that part from the question, and forgot that the parentheses are needed. I&#39;ve fixed the answer."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 5, "last_activity_date": 1571911901, "last_edit_date": 1571911901, "creation_date": 1571875420, "answer_id": 58532421, "question_id": 58532376, "link": "https://stackoverflow.com/questions/58532376/pointer-to-the-function-in-c-are-pf-and-pf-same/58532421#58532421", "title": "pointer to the function in C++,are (*pf)() and pf same?", "body": "<blockquote>\n  <p>how can *pf() and pf() be the same where pf is a pointer to the function?</p>\n</blockquote>\n\n<p>They aren't the same (because of operator precedence). In case you meant <code>(*pf)()</code> and <code>pf()</code> are effectively the same, then that's because the rules of the language say so. Specifically, the rules say:</p>\n\n<blockquote>\n  <p>[expr.call]</p>\n  \n  <p>A function call is a postfix expression followed by parentheses containing a possibly empty, comma-separated list of initializer-clauses which constitute the arguments to the function.\n  The postfix expression shall have function type or function pointer type.\n  For a call to a non-member function or to a static member function, the postfix expression shall either be an lvalue that refers to a function (in which case the function-to-pointer standard conversion ([conv.func]) is suppressed on the postfix expression), or have function pointer type.</p>\n</blockquote>\n\n<p>In case of <code>(*pf)()</code>, the expression <code>(*pf)</code> is an lvalue that refers to a function, while in the case of <code>pf()</code>, the expression <code>pf</code> has a function pointer type. In both cases the function pointed by <code>pf</code> is called.</p>\n\n<blockquote>\n  <p>What is the difference between other pointers and a pointer to the function??</p>\n</blockquote>\n\n<p>The primary difference is that function pointers point to functions, and pointers to objects point to objects.</p>\n"}], "owner": {"reputation": 538, "user_id": 11594030, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DuGVdA7wZII/AAAAAAAAAAI/AAAAAAAAAAg/qppjoCgDM5E/photo.jpg?sz=128", "display_name": "Aayush Neupane", "link": "https://stackoverflow.com/users/11594030/aayush-neupane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 58532421, "answer_count": 1, "score": 0, "last_activity_date": 1588734500, "creation_date": 1571875039, "last_edit_date": 1588734500, "question_id": 58532376, "link": "https://stackoverflow.com/questions/58532376/pointer-to-the-function-in-c-are-pf-and-pf-same", "title": "pointer to the function in C++,are (*pf)() and pf same?", "body": "<p>I'm a beginner in C++ and I have a problem understanding pointers to functions:</p>\n\n<pre><code>main()\n{\n    double pam(int);\n    double (*pf)(int);\n    pf = pam;            \n    double x = pam(4);    \n    double y = (*pf)(5); \n    double y = pf(5);\n} \n</code></pre>\n\n<p>How can <code>(*pf)()</code> and <code>pf()</code> be the same, where <code>pf</code> is a pointer to the function?</p>\n\n<p>What is the difference between other pointers and a pointer to the function??</p>\n"}, {"tags": ["c++", "class", "c++11", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1571875189, "post_id": 58532249, "comment_id": 103388369, "body": "Did you <code>#include &lt;complex&gt;</code> ?"}, {"owner": {"reputation": 133, "user_id": 12048128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDXj9YnLcP-qdWits_MNLcG8XQdOgYHv_Gd36dE=k-s128", "display_name": "Pierpaolo Vesce", "link": "https://stackoverflow.com/users/12048128/pierpaolo-vesce"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1571910818, "post_id": 58532249, "comment_id": 103399525, "body": "Yes, the problem is that the compiler doesn&#39;t let me partially specialize a function (or a class) i.e. i can&#39;t forward declare a <code>template class Matrix&lt;std::complex&lt;T&gt;&gt;</code>, i&#39;m looking for a way to turn around the problem"}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1571923238, "post_id": 58532249, "comment_id": 103406109, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5512910/explicit-specialization-of-template-class-member-function\">explicit specialization of template class member function</a>"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 12048128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDXj9YnLcP-qdWits_MNLcG8XQdOgYHv_Gd36dE=k-s128", "display_name": "Pierpaolo Vesce", "link": "https://stackoverflow.com/users/12048128/pierpaolo-vesce"}, "edited": false, "score": 0, "creation_date": 1571926853, "post_id": 58543112, "comment_id": 103408238, "body": "I arrived at the conclusion that it will cost me more to implement a way around the problem when I can simply copy-paste the functions and change the complex template-argument. I mean, these are useful answers but I was looking for a simplier way that doesn&#39;t exist if I got it right."}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 2, "last_activity_date": 1571925797, "creation_date": 1571925797, "answer_id": 58543112, "question_id": 58532249, "link": "https://stackoverflow.com/questions/58532249/template-class-and-invalid-use-of-incomplete-type-error/58543112#58543112", "title": "Template class and &#39;invalid use of incomplete type&#39; error", "body": "<p>You cannot partially specialize function templates, but you can class templates. One trick is to have the member function delegate to a helper class template. Something like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct IsHermitianHelper;\n\ntemplate &lt;typename T&gt;\nclass Matrix {\n  friend class IsHermitianHelper&lt;T&gt;;\npublic:\n  bool is_hermitian() const;\n};\n\ntemplate &lt;typename T&gt;\nstruct IsHermitianHelper {\n  static bool is_hermitian(const Matrix&lt;T&gt;&amp; m) {\n    // General implementation here\n  }\n};\n\ntemplate &lt;typename T&gt;\nstruct IsHermitianHelper&lt;std::complex&lt;T&gt;&gt; {\n  static bool is_hermitian(const Matrix&lt;std::complex&lt;T&gt;&gt;&amp; m) {\n    // Special case for std::complex here\n  }\n};\n\ntemplate &lt;typename T&gt;\nbool Matrix&lt;T&gt;::is_hermitian() const {\n  return IsHermitianHelper&lt;T&gt;::is_hermitian(*this);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 3, "last_activity_date": 1571927727, "last_edit_date": 1571927727, "creation_date": 1571927168, "answer_id": 58543498, "question_id": 58532249, "link": "https://stackoverflow.com/questions/58532249/template-class-and-invalid-use-of-incomplete-type-error/58543498#58543498", "title": "Template class and &#39;invalid use of incomplete type&#39; error", "body": "<p>You can apply SFINE(i.e.<a href=\"https://en.cppreference.com/w/cpp/language/sfinae\" rel=\"nofollow noreferrer\">\"Substitution Failure Is Not An Error\"</a>) technique along with function overloading to choose the correct method when <code>T</code> is <code>std::complex</code> in <code>Matrix&lt;T&gt;</code> class instatiation.</p>\n\n<p>Following is the demonstration of the idea: <strong>(<a href=\"https://godbolt.org/z/ka4iEg\" rel=\"nofollow noreferrer\">See example code online live</a>)</strong></p>\n\n<pre><code>#include &lt;type_traits&gt;  // std::enable_if, std::false_type\n\n// traits for checking, T is `std::complex`\ntemplate&lt;typename&gt; struct is_std_complex : std::false_type {};\ntemplate&lt;typename T&gt; struct is_std_complex&lt;std::complex&lt;T&gt;&gt; : std::true_type {};\n\n// traits for `std::enable_if` helpers\ntemplate&lt;typename Type, typename ReType = void&gt;\nusing EnabledForComplex = typename std::enable_if&lt;is_std_complex&lt;Type&gt;::value, ReType&gt;::type;\n\ntemplate&lt;typename Type, typename ReType = void&gt;\nusing EnabledNotForComplex = typename std::enable_if&lt;!is_std_complex&lt;Type&gt;::value, ReType&gt;::type;\n\ntemplate&lt;typename T&gt;\nclass Matrix\n{\n   // ...members\n\npublic:    \n   template&lt;typename Type = T&gt;\n   auto is_hermitian() const -&gt; EnabledNotForComplex&lt;Type, bool&gt;\n   {\n      // ... code for non-std::complex types\n   }\n\n   template&lt;typename Type = T&gt;\n   auto is_hermitian() const-&gt;EnabledForComplex&lt;Type, bool&gt;\n   {\n      // ... code for std::complex types\n   }\n};\n</code></pre>\n\n<hr>\n\n<p>That being said, if you have access to <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>, you could use <a href=\"https://en.cppreference.com/w/cpp/language/if\" rel=\"nofollow noreferrer\"><code>if constexpr</code></a>, which will only instantiate the branch, which is true for the case at compile time. <strong>(<a href=\"https://godbolt.org/z/_aGEKL\" rel=\"nofollow noreferrer\">See example code online live</a>)</strong></p>\n\n<pre><code>#include &lt;type_traits&gt; // std::false_type\n\n// traits for checking, T is `std::complex`\ntemplate&lt;typename&gt; struct is_std_complex : std::false_type {};\ntemplate&lt;typename T&gt; struct is_std_complex&lt;std::complex&lt;T&gt;&gt; : std::true_type {};\n\ntemplate&lt;typename T&gt;\nclass Matrix\n{\n   // ...members\n\npublic:\n   bool is_hermitian() const\n   {\n      if (!is_squared()) return false;\n      if constexpr (is_std_complex&lt;T&gt;::value)\n      {\n         // ... code for std::complex types\n      }\n      else\n      {\n         // ... code for non-std::complex types\n      }\n      return true;\n   }\n};\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 12048128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDXj9YnLcP-qdWits_MNLcG8XQdOgYHv_Gd36dE=k-s128", "display_name": "Pierpaolo Vesce", "link": "https://stackoverflow.com/users/12048128/pierpaolo-vesce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 58543498, "answer_count": 2, "score": 2, "last_activity_date": 1571927985, "creation_date": 1571873858, "last_edit_date": 1571927985, "question_id": 58532249, "link": "https://stackoverflow.com/questions/58532249/template-class-and-invalid-use-of-incomplete-type-error", "title": "Template class and &#39;invalid use of incomplete type&#39; error", "body": "<p>I have a template <code>Matrix</code> class and I used a <code>std::vector&lt;std::vector&lt;T&gt;&gt;</code> to store data.\nI need to specialize some methods for <code>std::complex</code> matrix, for example:</p>\n\n<pre><code>template &lt;typename T&gt;\nbool Matrix&lt;T&gt;::is_hermitian() const\n{\n   if (!(*this).is_squared())\n      return false;\n   for (int r = 0; r &lt; rows_; r++)\n      for (int c = 0; c &lt; columns_; c++)\n         if (mat[r][c] != mat[c][r])\n            return false;\n   return true;\n}\n</code></pre>\n\n<p>For the specialized method I thought something like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nbool Matrix&lt;std::complex&lt;T&gt; &gt;::is_hermitian() const\n{\n   if (!(*this).is_squared())\n      return false;\n   for (int r = 0; r &lt; rows_; r++)\n      for (int c = 0; c &lt; columns_; c++)\n         if (mat[r][c] != std::conj(mat[c][r]))\n            return false;\n   return true;\n}\n</code></pre>\n\n<p>But the compiler returns me an error</p>\n\n<pre><code>'invalid use of incomplete type' \n</code></pre>\n\n<p>I instantiated at the end of the <code>.cpp</code> file a bunch of class that I could be using in the main program:</p>\n\n<pre><code>template class Matrix&lt;int&gt;;\ntemplate class Matrix&lt;double&gt;;\ntemplate class Matrix&lt;float&gt;;\ntemplate class Matrix&lt; std::complex&lt;float&gt; &gt;;\ntemplate class Matrix&lt; std::complex&lt;int&gt; &gt;;\n</code></pre>\n\n<p>How can I implement one method for all <code>std::complex&lt;T&gt;</code> type?</p>\n\n<p>And if you know how to replace the last two instance with a <code>Matrix&lt; std::complex&lt;T&gt; &gt;</code> sort of thing I will be very thankful.</p>\n"}, {"tags": ["c++", "templates", "c++17", "sparse-matrix", "index-sequence"], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "edited": false, "score": 0, "creation_date": 1571873885, "post_id": 58532234, "comment_id": 103388124, "body": "Seems to be exactly what I wanted. I had a similar version, but couldn&#39;t make it work because of some of my functions requiring compile time expressions. This looks good though, not hard to read either (at least for me)."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "edited": false, "score": 1, "creation_date": 1571875788, "post_id": 58532234, "comment_id": 103388456, "body": "@lightxbulb I added some more information, since except for very small number of indices, you really should use a different approach."}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "edited": false, "score": 0, "creation_date": 1571876578, "post_id": 58532234, "comment_id": 103388581, "body": "I realize that for larger arrays one can use map and unordered_map, both of which are runtime, however. I assume that perfect hashing may also be achieved at compile time, but this is way beyond what I need and what I am going for. My arrays won&#39;t usually extend beyond 10 items, which is also the reason why I use static arrays for the data storage."}], "tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 1, "last_activity_date": 1571876076, "last_edit_date": 1571876076, "creation_date": 1571873718, "answer_id": 58532234, "question_id": 58531898, "link": "https://stackoverflow.com/questions/58531898/automatically-generating-switch-statements-at-compile-time-for-sparse-array-inde/58532234#58532234", "title": "Automatically generating switch statements at compile time for sparse array indexing", "body": "<p>Something like this?</p>\n\n<pre><code>static constexpr size_t idx(size_t i)\n{\n    size_t j = 0;\n    if(!(... || (j++, i == Is))) {\n        throw \"Index out of range!\";\n    }\n    return j-1;\n}\n</code></pre>\n\n<p>It might be a bit tricky to read, but should do what you want, if I understood correctly. After instantiation this is basically equivalent to a series of <code>if else</code> going left-to-right through the indices in <code>Is</code>.</p>\n\n<p>You can make it more readable by separating the body of the fold expression into a lambda. You should also replace the <code>throw</code> expression with whatever is sensible for you.</p>\n\n<p>With the <code>constexpr</code> qualifier this can be reused for the template version as well:</p>\n\n<pre><code>template&lt;size_t I, auto s = idx(I)&gt;\nstatic constexpr size_t idx() {\n    return s;\n}\n</code></pre>\n\n<p>(Putting the result in the template default argument guarantees compile time evaluation.)</p>\n\n<p>This will not be the most well-performing code, sharing the same problems a manually written <code>switch</code> statement has. Depending on the predictability of the inputs, the many branches may be often mispredicted, in which case a (mostly) branchless version would be preferable. This can be achieved by modifying the fold expression appropriately.</p>\n\n<p>If the number of indices is not small, a loop through a properly constructed static array would be preferable for instruction cache locality:</p>\n\n<pre><code>static constexpr size_t idx(size_t i)\n{\n    static constexpr std::array ind{Is...};\n    size_t j = 0;\n    for(; j &lt; ind.size() &amp;&amp; i != ind[j]; j++);\n    if(j == ind.size())\n        throw \"Index out of range!\";\n    return j;\n}\n</code></pre>\n\n<p>Again, it might be preferable to replace the early exit in the loop.</p>\n\n<p>If the array is even larger, it might be useful to not only use a declared array with loop, but implement binary search on that array properly.</p>\n\n<p>Standard algorithms like <code>std::any_of</code>, <code>std::find</code> and <code>std::binary_search</code> could be used instead of the manual search implementations. However these algorithms will be <code>constexpr</code> only in C++20 and so this would limit the use here.</p>\n"}], "owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 58532234, "answer_count": 1, "score": 1, "last_activity_date": 1571876076, "creation_date": 1571870942, "question_id": 58531898, "link": "https://stackoverflow.com/questions/58531898/automatically-generating-switch-statements-at-compile-time-for-sparse-array-inde", "title": "Automatically generating switch statements at compile time for sparse array indexing", "body": "<p>Is there a way to generate compile-time switch statements, for matching indices? For example if I have a sequence <code>1,5,8</code> and I want to match it to <code>0,1,2</code>, is there a way the compiler can generate a function at compile time, which when given 1,5,8 returns respectively 0,1,2. To better illustrate what I want, I have prepared this sparse array structure: <a href=\"https://godbolt.org/z/QpWVST\" rel=\"nofollow noreferrer\">https://godbolt.org/z/QpWVST</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;tuple&gt;\n#include &lt;limits&gt;\n\ntemplate&lt;size_t depth, size_t Idx, size_t I, size_t...Is&gt;\nsize_t get_idx()\n{\n    static_assert(Idx==I || sizeof...(Is)&gt;0, \"Index not found.\");\n    if constexpr(Idx==I) return depth;\n    else return get_idx&lt;depth+1, Idx,Is...&gt;();\n}\n\ntemplate&lt;typename T, size_t... Is&gt;\nstruct sparse_array\n{\n    constexpr static size_t N = sizeof...(Is);\n    constexpr static size_t size() { return N; }\n\n    T e[N];\n\n    constexpr sparse_array() : e{} {}\n    template&lt;typename...type_pack&gt;\n    constexpr sparse_array(const type_pack&amp;... pack) : e{ pack... }\n    {\n        static_assert(sizeof...(type_pack) == size(), \"Argument count must mach array size.\");\n    }\n\n    template&lt;size_t I&gt;\n    constexpr size_t idx()\n    {\n        return get_idx&lt;0, I, Is...&gt;();\n    }\n\n    size_t idx(const size_t i)\n    {\n        // how to achieve somethig like this?\n        return idx&lt;i&gt;();\n    }\n\n    constexpr T&amp; at(size_t idx)\n    {\n        return e[idx];\n    }\n};\n\ntemplate&lt;typename T, size_t...Is&gt;\nauto make_dense_array(std::index_sequence&lt;Is...&gt;&amp;&amp; seq)\n{\n    return sparse_array&lt;T, Is...&gt;{};\n}\n\ntemplate&lt;typename T, size_t N&gt;\nusing dense_array = decltype(make_dense_array&lt;T&gt;(std::declval&lt;std::make_index_sequence&lt;N&gt;&gt;()));\n\nsize_t test()\n{\n    dense_array&lt;int, 3&gt; a;\n    sparse_array&lt;int,1,5,8&gt; b;\n    return b.idx&lt;8&gt;();\n}\n</code></pre>\n\n<p>I want to be able to also pass in runtime variables, which would go through a switch with the indices and return the appropriate corresponding index. The only idea I have for solving this, involves generating an array of the <code>Is...</code> sequence, and then having a for loop with if statements in order to return the correct index. The other option being, using a map (but this is also not compile-time). The <code>sparse_array</code> would in general be very small, and I would have liked to be able to do most things compile time.</p>\n"}, {"tags": ["c++", "function", "compiler-errors", "void"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1571873320, "post_id": 58531760, "comment_id": 103388022, "body": "<code>f_void</code> has zero function parameters and <code>*fun</code> given <code>void (*fun)(T)</code> has one function parameter, so those can never match. That <code>(void)</code> as a function parameter list means the same as <code>()</code> is just a special case to support C habits and does not work with a template dependent type which is later determined to be <code>void</code>."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 3, "last_activity_date": 1571876032, "last_edit_date": 1571876032, "creation_date": 1571870200, "answer_id": 58531810, "question_id": 58531760, "link": "https://stackoverflow.com/questions/58531760/caller-function-with-optional-argument-of-varying-type/58531810#58531810", "title": "Caller function with optional argument of varying type", "body": "<p>You could do most of it with a <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\">variadic template</a> and <a href=\"https://en.cppreference.com/w/cpp/utility/forward\" rel=\"nofollow noreferrer\">perfect forwarding</a>:</p>\n\n<pre><code>template&lt;typename F, class... Args&gt;\nvoid caller(F func, Args&amp;&amp;... args) {\n    func(std::forward&lt;Args&gt;(args)...);\n}\n\n//...\n\ncaller(f_int, 3);\ncaller(f_double, 2.1);\ncaller(f_void);\n</code></pre>\n\n<p>You may also return the value from the called function in the function template by using <code>auto</code>, even when called function is declared <code>void</code>:</p>\n\n<pre><code>int f_int(int x) {\n    return x*2;\n}\ndouble f_double(double x) {\n    return x*1.5;\n}\nvoid f_void(void) {\n    std::cout &lt;&lt; \"f_void\\n\";\n}\n\ntemplate&lt;typename F, class... Args&gt;\nauto caller(F func, Args&amp;&amp;... args) {          // note the \"auto\"\n    return func(std::forward&lt;Args&gt;(args)...);  // and return\n}\n\n//...\n\nauto rv1 = caller(f_int, 3);\nauto rv2 = caller(f_double, 2.1);\ncaller(f_void);                                // you can't assign void though\n</code></pre>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58531810, "answer_count": 1, "score": 2, "last_activity_date": 1571876032, "creation_date": 1571869799, "last_edit_date": 1571870201, "question_id": 58531760, "link": "https://stackoverflow.com/questions/58531760/caller-function-with-optional-argument-of-varying-type", "title": "Caller function with optional argument of varying type", "body": "<p>I am trying to write a caller function that can take an optional argument of varying template type.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nvoid f_int(int x){std::cout &lt;&lt; \"f_int\\n\";}\nvoid f_double(double x){std::cout &lt;&lt; \"f_double\\n\";}\nvoid f_void(void){std::cout &lt;&lt; \"f_void\\n\";}\n\ntemplate&lt;typename T&gt;\nvoid caller(void (*fun)(T), T arg)\n{\n    (*fun)(arg); \n}\n\n\nint main()\n{\n  caller(f_int, 3);\n  caller(f_double, 2.1);\n  caller(f_void);         // compilation error\n  caller(f_void, void);   // compilation error\n  void* p;\n  caller(f_void, *p);     // compilation error\n}\n</code></pre>\n\n<p>When writing this code, I was hoping that <code>T</code> could be of type <code>void</code>. Can it be? If yes, why does the above code not work? Is <code>void</code> a valid type or is only <code>void*</code> a valid type? </p>\n"}, {"tags": ["c++", "class", "oop", "object"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1571874141, "post_id": 58531647, "comment_id": 103388171, "body": "Sidenote: <code>Player::Player(Square position)</code> will copy the <code>Square</code>. That&#39;s not much work since it&#39;s a pair of <code>int</code>s, but something to watch out for with larger objects. You may want <code>Player::Player(const Square &amp;position)</code> to pass by reference to save on copying. It&#39;s tagged const because it widens what you can pass in and making everything const until proven otherwise helps prevent some types of bugs from creeping in."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1571889361, "post_id": 58531647, "comment_id": 103390876, "body": "You might want to watch this cppcon talk on OOP in modern C++. In particular using override to tag your methods can prevent a lot of grief when you accidentally overload.  <a href=\"https://www.youtube.com/watch?v=32tDTD9UJCE\" rel=\"nofollow noreferrer\">youtube.com/watch?v=32tDTD9UJCE</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 10823777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EqKyEgBjbW0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZnnEBVV5V5nmYgX7IMgC-FdJS0Vg/mo/photo.jpg?sz=128", "display_name": "lmpall4", "link": "https://stackoverflow.com/users/10823777/lmpall4"}, "is_accepted": false, "score": 0, "last_activity_date": 1571869672, "creation_date": 1571869672, "answer_id": 58531739, "question_id": 58531647, "link": "https://stackoverflow.com/questions/58531647/compiler-error-no-appropriate-default-constructor-avaible/58531739#58531739", "title": "Compiler Error: No appropriate default constructor avaible", "body": "<p>Looks like the default constructor is implicitly deleted.  You may try adding a trivial one as follows (as public in Square.h.</p>\n\n<pre><code>Square(): _x(0), _y(0){}\n~Square(){}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 2186621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7aa6df43bd70395929c9034da8d78a0?s=128&d=identicon&r=PG", "display_name": "Bernardo Reis", "link": "https://stackoverflow.com/users/2186621/bernardo-reis"}, "is_accepted": false, "score": 0, "last_activity_date": 1571870151, "last_edit_date": 1571870151, "creation_date": 1571869806, "answer_id": 58531761, "question_id": 58531647, "link": "https://stackoverflow.com/questions/58531647/compiler-error-no-appropriate-default-constructor-avaible/58531761#58531761", "title": "Compiler Error: No appropriate default constructor avaible", "body": "<p>Given that you implemented a constructor for <code>Square</code>, the compiler doesn't implement the default constructor. Your only way to construct Square is using the constructor you defined. </p>\n\n<p>Once you declared the <code>Player</code>'s member variable <code>Square _position</code>, it shall be initialized somehow on <code>Player</code>'s constructor. However, the compiler can't use the constructor you provided.</p>\n\n<p>You can declare the default constructor yourself, by:</p>\n\n<pre><code>Square() = default;\n</code></pre>\n\n<p>The error code is shown in the first line of the constructor, because the compiler is trying to initialize every member of <code>Player</code> before executing the body of the constructor, but it can't find a suitable way to construct <code>Square</code>.</p>\n\n<p>Another solution is to initialize the member variable directly using the constructor you provided. This way, the compiler will use your constructor when initializing <code>Player</code>'s member variables:</p>\n\n<pre><code>Square _position = Square(0,0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "is_accepted": false, "score": 1, "last_activity_date": 1571869934, "creation_date": 1571869934, "answer_id": 58531779, "question_id": 58531647, "link": "https://stackoverflow.com/questions/58531647/compiler-error-no-appropriate-default-constructor-avaible/58531779#58531779", "title": "Compiler Error: No appropriate default constructor avaible", "body": "<p>The issue is that <code>Player::_position</code> needs to be constructed before your opening brace in any <code>Player</code> constructor.  You can either</p>\n\n<ol>\n<li>Create a default constructor (one that can be called without arguments) for <code>Square</code>.  This may or may not be appropriate for your program.</li>\n<li>Use an initializer list.  This avoids design issues if <code>Square</code> can't have a default constructor for some reason.</li>\n</ol>\n\n<p>The initializer list solution looks like this:</p>\n\n<pre><code>Player::Player(Square position)\n : _position{position} { }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7942255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5b26a359edf4dca2f21f7ca32002e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Tremblay", "link": "https://stackoverflow.com/users/7942255/alex-tremblay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1571870151, "creation_date": 1571869026, "last_edit_date": 1592644375, "question_id": 58531647, "link": "https://stackoverflow.com/questions/58531647/compiler-error-no-appropriate-default-constructor-avaible", "title": "Compiler Error: No appropriate default constructor avaible", "body": "<p>I am doing OOP in C++ for the first time. I have noticed it's very different from other languages in which I have done OOP in the past.</p>\n<p>It's been going great so far, but I have encountered an issue where I need a constructor to receive an object that I have created as parameter and for some reasons it refuses to compile and throws errors.</p>\n<p>I made a deep research about the problem online, but I do not see cases that look enough like mine and answers vary a lot. I would like the proper way to solve this problem, so I can follow these conventions throughout my whole project.</p>\n<p>Here is the header file where the error has been thrown (Player.h):</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n\n// Header files\n#include &quot;Square.h&quot;\n\nclass Player\n{\nprivate:\n    // Private variables\n    Square _position;\n\npublic:\n    // Public constructors declarations\n    Player(Square position);\n\n    // Public functions declaration\n    void setPosition(Square position);\n    Square getPosition();\n};\n</code></pre>\n<p>Here is the CPP file where the error has been thrown (Player.cpp):</p>\n<pre><code>// Header files\n#include &quot;Player.h&quot;\n\n// Public constructors\nPlayer::Player(Square position) // &lt;---------- ERROR LOCATION\n{\n    _position = position;\n}\n\n// Public functions\nvoid Player::setPosition(Square position)\n{\n    _position = position;\n}\n\nSquare Player::getPosition()\n{\n    return _position;\n}\n</code></pre>\n<p>Just in case, here is the header file of the parameter object (Square.h):</p>\n<pre><code>#pragma once\n\nclass Square\n{\nprivate:\n    // Private variables\n    int _x;\n    int _y;\n\npublic:\n    // Public constructors declarations\n    Square(int x, int y);\n\n    // Public functions declaration\n    void setX(int x);\n    int getX();\n    void setY(int y);\n    int getY();\n};\n</code></pre>\n<p>Here is also the CPP file of the parameter object (Square.cpp):</p>\n<pre><code>// Header files\n#include &quot;Square.h&quot;\n\n// Public constructors\nSquare::Square(int x, int y)\n{\n    _x = x;\n    _y = y;\n}\n\n// Public functions\nvoid Square::setX(int x)\n{\n    _x = x;\n}\n\nint Square::getX()\n{\n    return _x;\n}\n\nvoid Square::setY(int y)\n{\n    _y = y;\n}\n\nint Square::getY()\n{\n    return _y;\n}\n</code></pre>\n<p>Here are the errors thrown by the compiler:</p>\n<blockquote>\n<p>At line 4 of the file 'Player.cpp':</p>\n<p>Error E0291: no default constructor exists for class 'Square'</p>\n<p>Error C2512: 'Square' : no appropriate default constructor avaible</p>\n</blockquote>\n"}, {"tags": ["c#", "c++", "gcc"], "comments": [{"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 2, "creation_date": 1571869719, "post_id": 58531621, "comment_id": 103387253, "body": "Most likely the difference is due to the value orientation of C++ v the reference orientation of C#. If you pass by value large objects with portions in the heap things will be quite slow compared to C#. Especially if move semantics haven&#39;t been used. Use <code>const T&amp;</code> when passing these in C++ or <code>T&amp;</code> if you are mutating the data."}, {"owner": {"reputation": 218, "user_id": 9005776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X7XkgjzojQ0/AAAAAAAAAAI/AAAAAAAABQk/5IrfXRyNwt4/photo.jpg?sz=128", "display_name": "Phles", "link": "https://stackoverflow.com/users/9005776/phles"}, "edited": false, "score": 0, "creation_date": 1571870295, "post_id": 58531621, "comment_id": 103387375, "body": "For more on optimization of C++ programs, a decent reference can be found pdf <a href=\"http://www.doc.ic.ac.uk/~ahanda/optimizing_cpp.pdf\" rel=\"nofollow noreferrer\">here</a>. Generally, you want to pass objects by reference or const reference and plain data types(such as int) by value. Most of Chapter 7, especially 7.12-7.15 has more information about the efficiency of different data types, functions, and passing."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 2, "creation_date": 1571870737, "post_id": 58531621, "comment_id": 103387475, "body": "A few things struck me in the code. The vectors are being built up piece by piece and this creates a lot of thrashing. Best to pre-allocate them at declaration time. Also the conversion of ascii hex bytes is going to be slower than molasses. You might consider writing a short function to convert the 2 char he values. Should run a lot faster. The std conversion functions are pretty bad in cases like this."}, {"owner": {"reputation": 1700, "user_id": 3025534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iI4D8.jpg?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3025534/alan"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1571871265, "post_id": 58531621, "comment_id": 103387590, "body": "@SamVarshavchik I want code that can&#39;t be decompiled with ILSpy, so C++ seemed an optimal choice. I also run a PHP website on Linux and was just musing about doing some custom PHP modules in C, but sadly this portion of the application is to be deployed at customers locations and must run on Windows.  I am surprised to hear C++ would be hobbled when nearly every high performance software including databases, video games and so much more are written in C++;"}, {"owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1571871445, "post_id": 58531621, "comment_id": 103387622, "body": "In addition to the above. The library your using for JSON is not particularly fast <a href=\"https://github.com/miloyip/nativejson-benchmark#parsing-time\" rel=\"nofollow noreferrer\">github.com/miloyip/nativejson-benchmark#parsing-time</a> many of the compeditors. I suspect C#&#39;s newtonsoft JSON is faster.  @SamVarshavchik Do you have any evidance of this? Microsoft have put alot of hours into MSVC, they also have contributed alot in terms of the STL <a href=\"https://devblogs.microsoft.com/cppblog/open-sourcing-msvcs-stl/\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/cppblog/open-sourcing-msvcs-stl</a>. I don&#39;t think you will find any evidance because microsoft are not the only ones producing compilers for windows. Clang, GCC and Intel all produce compilers."}, {"owner": {"reputation": 1700, "user_id": 3025534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iI4D8.jpg?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3025534/alan"}, "edited": false, "score": 0, "creation_date": 1571872143, "post_id": 58531621, "comment_id": 103387792, "body": "Thank you for that tip David. Before I was just storing all values in a <code>vector&lt;string&gt;</code>, but to keep the data types true I used the JSON. Normally the datasource is a binary file, not a string of hex, but I wasn&#39;t sure how else to provide an online example. MickyD, This isn&#39;t the whole program, but it was enough to show the performance problems I was facing. This is my first C++ program, I am learning all about the performance options, and what makes some code more <code>performant</code> than another similar block."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 1, "creation_date": 1571873438, "post_id": 58531621, "comment_id": 103388047, "body": "One of the good aspects of C++ is that you are programming close to the metal. But things like destructors click in automatically when you go out of scope. This is great for control of heap usage but C# uses garbage collection and can delay heap cleanup long after objects are no longer in use. Collection will eventually occur with associated delays but is something you have little control over. It&#39;s good and it&#39;s bad. Just stuff to be aware of in coding and especially benchmarking."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1571889255, "post_id": 58531621, "comment_id": 103390856, "body": "please include the C++ code here. External links may rot sometime in the future, making the question invalid"}], "answers": [{"comments": [{"owner": {"reputation": 1700, "user_id": 3025534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iI4D8.jpg?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3025534/alan"}, "edited": false, "score": 0, "creation_date": 1571870370, "post_id": 58531795, "comment_id": 103387386, "body": "Thanks Slipoch, Did you see the link to the full C++ code: <a href=\"https://wandbox.org/permlink/VIvardJNAMKzSbMf\" rel=\"nofollow noreferrer\">wandbox.org/permlink/VIvardJNAMKzSbMf</a>? The relevant lines are on the main page from 48-85"}, {"owner": {"reputation": 680, "user_id": 4105658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KTWIT.jpg?s=128&g=1", "display_name": "Slipoch", "link": "https://stackoverflow.com/users/4105658/slipoch"}, "reply_to_user": {"reputation": 1700, "user_id": 3025534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iI4D8.jpg?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3025534/alan"}, "edited": false, "score": 0, "creation_date": 1571871396, "post_id": 58531795, "comment_id": 103387615, "body": "Yeah just saw that, I would definitely look at using references instead of values in any function calls and when dealing with the data. I would also recommend simplifying each part of the process or seeing if you can remove it."}, {"owner": {"reputation": 1700, "user_id": 3025534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iI4D8.jpg?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3025534/alan"}, "edited": false, "score": 0, "creation_date": 1571871850, "post_id": 58531795, "comment_id": 103387727, "body": "Thanks, I certainly will. The stopwatch isn&#39;t timing that particular area, but the idea is still great. I haven&#39;t ever worked with the pointers, but hope to learn how to use them for this tonight."}, {"owner": {"reputation": 680, "user_id": 4105658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KTWIT.jpg?s=128&g=1", "display_name": "Slipoch", "link": "https://stackoverflow.com/users/4105658/slipoch"}, "reply_to_user": {"reputation": 1700, "user_id": 3025534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iI4D8.jpg?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3025534/alan"}, "edited": false, "score": 0, "creation_date": 1571872282, "post_id": 58531795, "comment_id": 103387817, "body": "Ah I used to be good at pointers. Been using C# for so long now, that I have mostly forgotten all the info I had on using them."}], "tags": [], "owner": {"reputation": 680, "user_id": 4105658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KTWIT.jpg?s=128&g=1", "display_name": "Slipoch", "link": "https://stackoverflow.com/users/4105658/slipoch"}, "is_accepted": false, "score": 0, "last_activity_date": 1571871556, "last_edit_date": 1571871556, "creation_date": 1571870046, "answer_id": 58531795, "question_id": 58531621, "link": "https://stackoverflow.com/questions/58531621/c-perfomance-per-compiler-200-times-slower-than-c/58531795#58531795", "title": "C++ Perfomance Per Compiler, 200 times slower than C#", "body": "<p>It really depends on the commands being executed in assembler/machine code. VS has never been great at C++ and for many years Borland kicked their arses for both efficiency &amp; reliability. Then Borland sold their IDE &amp; C++ branch as a separate company.</p>\n\n<p>It also depends on how you have programmed the process to occur in C++, can you please edit to show that code? </p>\n\n<p>The advantage of C# is that it is managed and may use higher level of interpretations of your code, so in the background it may JIT the code into converting the whole line to the parsed format, then the for loop breaks the chunks off <em>(1 step looped)</em>, wheras if you write it in C++ it will follow your commands more accurately even if they are less efficient, ie: it breaks off the chunk you are looking at, then converts that to the parsed format <em>(2 steps looped)</em>. </p>\n\n<p>So using the above example if we assume the 2 commands together are 50% slower than the 2 commands in C++, but the 2 commands are being processed on every loop, where the c# code only processeds the 1 command on every loop, any inefficiency will be compounded.</p>\n\n<p>ALSO +1 to doug in comments above, reference vs value can make a pretty big difference especially when you are dealing with large datasets. I think his answer is the most likely for large differences.</p>\n\n<p>Simplification is the answer I believe:</p>\n\n<pre><code>std::string byteString = hex.substr(i, 2);\nunsigned char byte = (unsigned char) strtol(byteString.c_str(), NULL, 16);\n</code></pre>\n\n<p>Could become</p>\n\n<pre><code>unsigned char byte = (unsigned char) strtol(hex.substr(i, 2).c_str(), NULL, 16);\n</code></pre>\n\n<p>and remove a minor memory assignment. But again, if you can convert the entire source to a byte stream, then use the for loop on that, you remove the conversion step from the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 1700, "user_id": 3025534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iI4D8.jpg?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3025534/alan"}, "is_accepted": true, "score": 0, "last_activity_date": 1572277364, "creation_date": 1572277364, "answer_id": 58593995, "question_id": 58531621, "link": "https://stackoverflow.com/questions/58531621/c-perfomance-per-compiler-200-times-slower-than-c/58593995#58593995", "title": "C++ Perfomance Per Compiler, 200 times slower than C#", "body": "<p>Ok, so I was able to get C++ processing the file at around 50,000 rows per second with 80 columns per row. I reworked the entire workflow to make sure it didn't have to backtrack at all. I first read the entire file into <code>ByteArray</code> and then would go over it line by line by moving data from one array to another rather than specifying each byte in a <code>for</code> loop. I then used a <code>map</code> to store the data. </p>\n\n<pre><code>    stopwatch&lt;&gt; sw;\n    while (CurrentLine &lt; TotalLines)\n    {\n        int BufferOffset = CurrentLine * LineLength;\n        std::move(ByteArray + BufferOffset, ByteArray + BufferOffset + LineLength, LineByteArray);\n        for (int i = 0; TotalColumns &gt; i + 1; ++i)\n        {\n            int ThisStartingPosition = StartingPosition[i];\n            int ThisWidth = ColumnWidths[i];\n            std::uint8_t* CurrentColumnBytes;\n            CurrentColumnBytes = new uint8_t[ThisWidth];\n            {\n                std::move(LineByteArray + ThisStartingPosition, LineByteArray + ThisStartingPosition + ThisWidth, CurrentColumnBytes);\n                ResultMap[CurrentLine][i] = Format(CurrentColumnBytes, ThisWidth, DataType[i]);\n            }\n        }\n        CurrentLine++;\n    }\n    std::cout &lt;&lt; \"Processed\" &lt;&lt; CurrentLine &lt;&lt; \" lines in : \" &lt;&lt; duration_cast&lt;double&gt;(sw.elapsed()) &lt;&lt; '\\n';\n</code></pre>\n\n<p>I still am a little disappointed because using the Boost Gregorian calendar conversion is unavailable using Clang to compile, and using the standard MS compiler makes it nearly 20X slower. With <code>Clang -O3</code> it was processing 10,700 records in 0.25 seconds including all <code>int</code> and <code>string</code> conversions. I will just have to write my own <code>date</code> conversion.</p>\n"}], "owner": {"reputation": 1700, "user_id": 3025534, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iI4D8.jpg?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3025534/alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 58593995, "answer_count": 2, "score": 0, "last_activity_date": 1572277364, "creation_date": 1571868894, "last_edit_date": 1571934702, "question_id": 58531621, "link": "https://stackoverflow.com/questions/58531621/c-perfomance-per-compiler-200-times-slower-than-c", "title": "C++ Perfomance Per Compiler, 200 times slower than C#", "body": "<p>I was dealing with some performance issues which I discussed in this question: <a href=\"https://stackoverflow.com/questions/58494786/super-slow-c-for-loop\">Super Slow C++ For Loop</a></p>\n\n<p>I have a simple program I wrote to parse binary data. I tested it locally on 2 computers.</p>\n\n<pre><code>1. Dual 6 core 2.4GHz Xeon V3, 64GB RAM, NVMe SSD\n2. Dual 4 core 3.5GHz Xeon V3, 64GB RAM, NVMe SSD\n</code></pre>\n\n<p>Here is some of the code(rest is on Wandbox <a href=\"https://wandbox.org/permlink/VIvardJNAMKzSbMf\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/VIvardJNAMKzSbMf</a>):</p>\n\n<pre><code>string HexRow=\"\";\nfor (int i=b; i&lt;HexLineLength+b;i++){\n    HexRow+= incomingData[i];\n}\n\nstd::vector&lt;unsigned char&gt; BufferedLine=HexToBytes(HexRow);\nstopwatch&lt;&gt; sw;\nfor (int i = 0; 80 &gt;= i; ++i)\n{\n    Byte ColumnBytes;\n    for (auto it = columns[\"data\"][i].begin(); it != columns[\"data\"][i].end(); ++it)\n    {\n        try {\n            if (it.key() == \"Column\") { ColumnBytes.Column = it.value().get&lt;std::string&gt;();}\n            else if (it.key() == \"DataType\") { ColumnBytes.DataType = it.value().get&lt;std::string&gt;();}\n            else if (it.key() == \"StartingPosition\") { ColumnBytes.StartingPosition = it.value().get&lt;int&gt;();}\n            else if (it.key() == \"ColumnWidth\") { ColumnBytes.ColumnWidth = it.value().get&lt;int&gt;();}\n        }\n        catch (...) {}\n    }\n\n    char* locale = setlocale(LC_ALL, \"UTF-8\");\n    std::vector&lt;unsigned char&gt; CurrentColumnBytes(ColumnBytes.ColumnWidth);\n    int arraySize = CurrentColumnBytes.size();\n\n    for (int C = ColumnBytes.StartingPosition; C &lt; ColumnBytes.ColumnWidth + ColumnBytes.StartingPosition; ++C)\n    {\n        int Index = C - ColumnBytes.StartingPosition;\n        CurrentColumnBytes[Index] = BufferedLine[C-1];\n    }\n}\nstd::cout &lt;&lt; \"Elapsed: \" &lt;&lt; duration_cast&lt;double&gt;(sw.elapsed()) &lt;&lt; '\\n';\n</code></pre>\n\n<h2>PC 1</h2>\n\n<p>Compiling on PC 1 with Visual Studio using the following flags:</p>\n\n<pre><code>/O2 /JMC /permissive- /MP /GS /analyze- /W3 /Zc:wchar_t /ZI /Gm- /sdl /Zc:inline /fp:precise /D \"_CRT_SECURE_NO_WARNINGS\" /D \"_MBCS\" /errorReport:prompt /WX- /Zc:forScope /Gd /Oy- /MDd /std:c++17 /FC /Fa\"Debug\\\" /EHsc /nologo /Fo\"Debug\\\" /Fp\"Debug\\Project1.pch\" /diagnostics:column\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Elapsed: 0.0913771\nElapsed: 0.0419886\nElapsed: 0.042406\n</code></pre>\n\n<p>Using Clang with the following: <code>clang main.cpp -O3</code> outputs:</p>\n\n<pre><code>Elapsed: 0.036262\nElapsed: 0.0174264\nElapsed: 0.0170038\n</code></pre>\n\n<p>Compiling with GCC from MinGW <code>gcc version 8.1.0 (i686-posix-dwarf-rev0, Built by MinGW-W64 project)</code> using these switches <code>gcc main.cpp -lstdc++ -O3</code> gives the following time:</p>\n\n<pre><code>Elapsed: 0.019841\nElapsed: 0.0099643\nElapsed: 0.0094552\n</code></pre>\n\n<h2>PC 2</h2>\n\n<p>I get with Visual Studio, still with the /O2</p>\n\n<pre><code>Elapsed: 0.054841\nElapsed: 0.03543\nElapsed: 0.034552\n</code></pre>\n\n<p>I didn't do Clang and GCC on PC 2, but the improvement wasn't significant enough to resolve my concerns. </p>\n\n<h1>Wandbox</h1>\n\n<p>The issue is that the exact same code on Wandbox (<a href=\"https://wandbox.org/permlink/VIvardJNAMKzSbMf\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/VIvardJNAMKzSbMf</a>) executes 10-80 times faster </p>\n\n<pre><code>Elapsed: 0.00115457\nElapsed: 0.000815412\nElapsed: 0.000814636\n</code></pre>\n\n<p>Wandbox is using GCC 10.0.0 and c++14. I realize it is likely running on linux, and I couldn't find any way to get GCC 10 to compile on Windows, so I can't test compiling with that version.</p>\n\n<h1>C# - 200X Faster</h1>\n\n<p>This is a rewrite of a C# application I wrote, which operates so much faster:</p>\n\n<pre><code>Elapsed: 0.017424 \nElapsed: 0.0006065 \nElapsed: 0.000733 \nElapsed: 0.0006166 \nElapsed: 0.0004699 \n\nFinished Parsing: 100 Records. Elapsed :0.0082796 at a rate of : 12076/s\n</code></pre>\n\n<p>The C# Method looks like this:</p>\n\n<pre><code>Stopwatch sw = new Stopwatch();\nsw.Start();\nforeach (dynamic item in TableData.data)  //TableData is a JSON file with the structure definition\n{\n\n    string DataType = item.DataType;\n    int startingPosition = item.StartingPosition;\n\n    int width = Convert.ToInt32(item.ColumnWidth);\n    if (width+startingPosition &gt;= FullLineLength)\n    {\n        continue;\n    }\n\n    byte[] currentColumnBytes = currentLineBytes.Skip(startingPosition).Take(width).ToArray();\n\n   // .....     200 extra lines of processing into ints, dates, strings       ......\n   // ..... Even with the extra work, it operates at 1200+ records per second ......\n\n}\nsw.Stop();\nvar seconds = sw.Elapsed.TotalSeconds;\nsw.Reset();\nConsole.WriteLine(\"Elapsed: \" + seconds);\nTempTable.Rows.Add(dataRow);\n</code></pre>\n\n<p>When I started this, I expected huge performance gains by moving code to unmanaged C++ from C#. This is my first C++ project and I am frankly just a bit discouraged about where I am. What can be done to speed up this C++? Do I need to use different datatypes, <code>malloc</code>, more / less structs? </p>\n\n<p>It needs to run on Windows, not sure if there is a way to get GCC 10 to work on Windows?</p>\n\n<p>What suggestions do you have for an aspiring C++ Developer?</p>\n"}, {"tags": ["c++", "templates", "boost", "typetraits"], "comments": [{"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1571880317, "post_id": 58531478, "comment_id": 103389197, "body": "I&#39;ve gotten numerous errors trying to compile this code, none of which match what you report. Could you provide something that can be copied and pasted as-is (c.f. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)?"}, {"owner": {"reputation": 367, "user_id": 3266738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4949adf69e0d8df5cb474352648313bf?s=128&d=identicon&r=PG&f=1", "display_name": "user3266738", "link": "https://stackoverflow.com/users/3266738/user3266738"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1571928128, "post_id": 58531478, "comment_id": 103408949, "body": "Dear JaMiT, thanks for your suggestion! In the process of setting up the minimal reproducible example, I discovered that this include was required: <code>#include &lt;boost&#47;mpl&#47;if.hpp&gt;</code>. For some reason it wasn&#39;t needed in Boost 1.59.0, but in 1.68.0 it is needed. Thank you!"}], "owner": {"reputation": 367, "user_id": 3266738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4949adf69e0d8df5cb474352648313bf?s=128&d=identicon&r=PG&f=1", "display_name": "user3266738", "link": "https://stackoverflow.com/users/3266738/user3266738"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571867710, "creation_date": 1571867710, "question_id": 58531478, "link": "https://stackoverflow.com/questions/58531478/class-template-for-removing-constness-volatileness-and-referenceness-fails-to-c", "title": "Class template for removing constness, volatileness and referenceness fails to compile after Boost/compiler update", "body": "<p>I recently updated the version of Boost I use from 1.59 to 1.68. Additionally, I also updated the version of Visual Studio I use from 2015 to 2017. After these changes, my class template below, which is used to remove constness, volatileness and referenceness, fails to compile.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Class for removing constness, volatileness and referenceness\ntemplate&lt;typename T&gt;\nstruct Cleaner\n{\n    // Part1: Remove referenceness and constness at the highest level\n    typedef  \n        typename boost::remove_cv&lt; \n            typename  boost::remove_reference&lt;typename T&gt;::type \n        &gt;::type \n        CleanPart1;\n\n    // Part2: If pointer, remove the const under the pointer and re-add the pointer\n    typedef typename \n        typename boost::mpl::if_c&lt; !boost::is_pointer&lt; CleanPart1 &gt;::value, \n            typename CleanPart1,\n            typename boost::add_pointer&lt; \n                typename boost::remove_cv&lt; \n                    typename boost::remove_pointer&lt;CleanPart1&gt;::type\n                &gt;::type\n            &gt;::type\n        &gt;::type \n        CleanPart2;\n\n    // Store final clean type\n    typedef CleanPart2 Type;\n};\n</code></pre>\n\n<p>Said class template could be used as follows in a function template that receives a template parameter <code>T</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typedef typename Cleaner&lt;T&gt;::Type CleanT;\n</code></pre>\n\n<p>The compilation errors Visual Studio is displaying are quite cryptic:</p>\n\n<pre><code>error C2143: syntax error: missing ';' before '&lt;'\nnote: see reference to class template instantiation 'Cleaner&lt;T&gt;'\nerror C4430: missing type specifier - int assumed. Note: C++ does not support default-int\nerror C2238: unexpected token(s) preceding ';'\nerror C3646: 'Type': unknown override specifier\nerror C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n</code></pre>\n\n<p>I have been studying this code for quite a while, and I can't find the reason why it fails to compile. Everything looks correct to me. Does anyone see what I am missing?</p>\n"}, {"tags": ["c++", "string", "type-conversion", "integer"], "comments": [{"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1571880657, "post_id": 58531453, "comment_id": 103389268, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5029840/convert-char-to-int-in-c-and-c\">Convert char to int in C and C++</a>"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 8351877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95102226f0b4f3315c1429e8f71f190?s=128&d=identicon&r=PG&f=1", "display_name": "William S", "link": "https://stackoverflow.com/users/8351877/william-s"}, "edited": false, "score": 0, "creation_date": 1571868808, "post_id": 58531521, "comment_id": 103387025, "body": "I saw that cheat in the book I am reading and they did not explain it just used it. I am still hoping to get some other answers to increase my knowledge.  Thanks for the explanation."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 135, "user_id": 8351877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95102226f0b4f3315c1429e8f71f190?s=128&d=identicon&r=PG&f=1", "display_name": "William S", "link": "https://stackoverflow.com/users/8351877/william-s"}, "edited": false, "score": 0, "creation_date": 1571874710, "post_id": 58531521, "comment_id": 103388276, "body": "An alternative would be  <code>hugeInt[i] = std::stoi(std::string(strInt[j], 1));</code> - make me a temporary <code>string</code> from the <code>char</code> at <code>strInt[j]</code>, then convert this <code>string</code> to an <code>int</code> with <code>stoi</code>, but that&#39;s a lot more work, and guess what <code>stoi</code> is probably doing inside to turn the characters in the string into <code>int</code>s..."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1571868007, "creation_date": 1571868007, "answer_id": 58531521, "question_id": 58531453, "link": "https://stackoverflow.com/questions/58531453/c-how-to-convert-what-i-thought-was-a-string-into-an-int-trying-to-use-stoi/58531521#58531521", "title": "C++ How to convert what I thought was a string into an int? Trying to use stoi, but will use whatever works", "body": "<p><code>strInt[j]</code> is a <code>char</code>, not a <code>std::string</code>. We can't <code>std::stoi</code> a single character, but since we know it is is a digit (thanks to <code>isdigit(strInt[j])</code>), we can cheat like heck and </p>\n\n<pre><code>hugeInt[i] = strInt[j] - '0';\n</code></pre>\n\n<p>to get the value of the digit because C++ guarantees that all digits are encoded to ascend from <code>'0'</code> and are contiguous. This means that <code>'0'</code> - <code>'0'</code> will be 0. <code>'1'</code> - <code>'0'</code> will be 1. <code>'2'</code> - <code>'0'</code> will be 2, and so on.</p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 8351877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95102226f0b4f3315c1429e8f71f190?s=128&d=identicon&r=PG&f=1", "display_name": "William S", "link": "https://stackoverflow.com/users/8351877/william-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1571920224, "creation_date": 1571920224, "answer_id": 58541450, "question_id": 58531453, "link": "https://stackoverflow.com/questions/58531453/c-how-to-convert-what-i-thought-was-a-string-into-an-int-trying-to-use-stoi/58541450#58541450", "title": "C++ How to convert what I thought was a string into an int? Trying to use stoi, but will use whatever works", "body": "<p>Actually since <code>strInt[j]</code> is a ch, I had to use a different string constructor. This one compiles and runs correctly <code>hugeInt[i] = std::stoi(std::string(1,strInt[j]));</code>.</p>\n"}], "owner": {"reputation": 135, "user_id": 8351877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95102226f0b4f3315c1429e8f71f190?s=128&d=identicon&r=PG&f=1", "display_name": "William S", "link": "https://stackoverflow.com/users/8351877/william-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 58541450, "answer_count": 2, "score": 0, "last_activity_date": 1571920224, "creation_date": 1571867550, "question_id": 58531453, "link": "https://stackoverflow.com/questions/58531453/c-how-to-convert-what-i-thought-was-a-string-into-an-int-trying-to-use-stoi", "title": "C++ How to convert what I thought was a string into an int? Trying to use stoi, but will use whatever works", "body": "<p>I have a string variable of all digits that I am parsing into an array called hugeInt. Doing this in a loop where I pick off one digit at a time out of the string and trying to put into the array. I have tried the code below which uses std::stoi directly and it gives me an error I think because it is a string. So I also tried converting the digit using <code>const char *digit = strInt[j].c_str()</code> but this gives me an error also.  So how do I get what I thought was a one character string (which is a digit) from a real string to convert to an int. code below. My .h file</p>\n\n<pre><code>// HugeInteger.h\n#ifndef HUGEINTEGER_H\n#define HUGEINTEGER_H\n\n#include &lt;array&gt;\n\nclass HugeInteger {\n   private:\n      static const int SIZE = 40;\n      std::array&lt;short int,SIZE&gt; hugeInt;\n   public:\n      HugeInteger(long = 0);\n      HugeInteger(std::string strInt);\n      void displayHugeInt();\n};\n#endif\n</code></pre>\n\n<p>my implementation code</p>\n\n<pre><code>// HugeInteger.cpp\n#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n#include \"HugeInteger.h\"\n\nHugeInteger::HugeInteger(long int num) {\n   for (short &amp;element : hugeInt) {\n      element = 0;\n   }\n\n   for (int i = SIZE-1; i &gt;= 0; i--) {\n      hugeInt[i] = num % 10;\n      num /= 10;\n      if (num == 0) {\n         break;\n      }\n   }\n}\n\nHugeInteger::HugeInteger(std::string strInt) {\n   for (short &amp;element : hugeInt) {\n      element = 0;\n   }\n\n   if (strInt.length() &gt; 40) {\n      throw std::invalid_argument(\"String integer is over 40 digits - too large.\");\n   }\n\n   for (int i = SIZE-1, j = strInt.length()-1; j &gt;= 0; i--, j--) {\n      if (isdigit(strInt[j])) {\n         hugeInt[i] = std::stoi(strInt[j]);\n      }\n      else {\n         throw std::invalid_argument(\"String integer has non digit characters.\");\n      }\n   }\n}\n\nvoid HugeInteger::displayHugeInt() {\n   bool displayStarted = false;\n   for (short &amp;element : hugeInt) {\n      if (!displayStarted) {\n         if (element == 0) {\n            continue;\n         }\n         else {\n            std::cout &lt;&lt; element;\n            displayStarted = true;\n         }\n      }\n      else {\n         std::cout &lt;&lt; element;\n      }\n   }\n   std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The problem is in the second constructor (for a string) in the for loop where <code>hugeInt[i] = std::stoi(strInt[j]);</code> is.  Any help or suggestions welcomed and appreciated.</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1571868477, "post_id": 58531408, "comment_id": 103386938, "body": "Everything sure looks like <code>priority_queue&lt;Node*&gt;</code> to me as well. Can&#39;t reproduce."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1571871668, "post_id": 58531408, "comment_id": 103387682, "body": "See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  Your post does not compile."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 2186621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7aa6df43bd70395929c9034da8d78a0?s=128&d=identicon&r=PG", "display_name": "Bernardo Reis", "link": "https://stackoverflow.com/users/2186621/bernardo-reis"}, "is_accepted": false, "score": 0, "last_activity_date": 1571869121, "creation_date": 1571869121, "answer_id": 58531658, "question_id": 58531408, "link": "https://stackoverflow.com/questions/58531408/possible-pointer-mistake-cannot-convert-from-type1-to-type-2/58531658#58531658", "title": "Possible pointer mistake cannot convert from type1 to type 2", "body": "<p>Your error message suggests that the <code>tree_builder</code> function argument is a reference to a <code>priority_queue&lt;Node&gt;</code>, instead of <code>priority_queue&lt;Node*&gt;</code>, that your code shows.</p>\n\n<p>Said that, I can compile your code just fine with clang, given the right includes.</p>\n"}], "owner": {"reputation": 61, "user_id": 12168329, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8MgM7O8lQPM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcHE5bzprox4mKbH6I9lPoYR6eTfQ/photo.jpg?sz=128", "display_name": "Risen", "link": "https://stackoverflow.com/users/12168329/risen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571869121, "creation_date": 1571867244, "last_edit_date": 1571868120, "question_id": 58531408, "link": "https://stackoverflow.com/questions/58531408/possible-pointer-mistake-cannot-convert-from-type1-to-type-2", "title": "Possible pointer mistake cannot convert from type1 to type 2", "body": "<pre><code>class Node\n{\nprotected:\n    int decimal_value;\n    char letter;\npublic:\n    Node(int decimal, char lett) : decimal_value(decimal), letter(lett)\n    {}\n\n    Node() :decimal_value(0), letter(NULL)\n    {}\n\n int get_decimal() const\n    {\n        return decimal_value;\n    }\n\n    char get_letter() const\n    {\n        return letter;\n    }\n\n    void set_decimal(int n)\n    {\n        decimal_value = n;\n    }\n\n    void set_letter(char l)\n    {\n        letter = l;\n    }\n\n    friend bool operator&lt;( const Node&amp; p1,  const Node&amp; p2)\n    {\n        return p1.decimal_value &gt; p2.decimal_value;\n    }\n\n    virtual ~Node() {};\n\n\n\n\n};\nclass Leaf :public Node\n{\n    using Node::Node;\n\n};\nclass Branch :public Node\n{\n\n    Node* left;\n    Node* right;\npublic:\n\n    Branch(Node* l, Node* r) :left(l), right(r)\n    {\n        decimal_value = l-&gt;get_decimal() + r-&gt;get_decimal();\n\n    }\n\n};\nvoid tree_builder(priority_queue&lt;Node*&gt;&amp; Q)\n{\n    Node* qleft=new Leaf;\n    Node* qright= new Leaf;\n    while (Q.size() &gt; 1)\n    {\n        *qleft = *Q.top();\n        Q.pop();\n        *qright = *Q.top();\n        Q.pop();\n        Node* b1 = new Branch(qleft, qright);\n        Q.push(b1);\n\n        cout &lt;&lt; Q.top()-&gt;get_decimal();\n        tree_builder(Q);\n    }\n\n}\nint main()\n{\n    bitset&lt;8&gt; A (string(\"1001\"));\n    Node* n1= new Leaf (A.to_ulong(), 'A');\n    priority_queue&lt;Node*&gt; my_q;\n    my_q.push(n1);\n    tree_builder(my_q);\n\n}\n\n\n}\n</code></pre>\n\n<p>On the very last line of main when I try to perform tree builder on my_q. I get the error \" cannot convert argument 1 from piriority_queue Node* to Priority_queue Node however I dont understand what is  node as everything is Node* I have simplified my code to only include 1 Node* object for easier viewing.</p>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 3, "creation_date": 1571867648, "post_id": 58531349, "comment_id": 103386696, "body": "put  a <code>cudaDeviceSynchronize()</code> at the end of your host code"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1571867824, "post_id": 58531349, "comment_id": 103386748, "body": "@RobertCrovella: You mean, <code>cuda::device::current::get().synchronize()</code> :-) ... and yes, that works."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 3, "creation_date": 1571868163, "post_id": 58531349, "comment_id": 103386856, "body": "well, that is why you&#39;re not getting printout.  Everything from your kernel launch to the end of your host is asynchronous.  Therefore it all runs without forcing the kernel to complete.  By the time you get to the closing curly-brace of main, the kernel has not completed and gotten a chance to dump its output into the host console pipe.  The output pipe gets disconnected from your app at app teardown time. Therefore nothing gets printed out.  And yes, the behavior can be different if you are running it under a tool."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1571868269, "post_id": 58531349, "comment_id": 103386878, "body": "@RobertCrovella: Made that into an answer."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1571868338, "post_id": 58531349, "comment_id": 103386893, "body": "I&#39;m sure this is a duplicate of other questions here on the <code>cuda</code> tag."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1571868374, "post_id": 58531349, "comment_id": 103386903, "body": "@RobertCrovella: That&#39;s possible, I suppose. Actually, when I first created this question I thought it was a doctest instrumentation issue."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 6633, "user_id": 1662425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8109db00d44ebcdc900353b05e3a1443?s=128&d=identicon&r=PG", "display_name": "tera", "link": "https://stackoverflow.com/users/1662425/tera"}, "edited": false, "score": 0, "creation_date": 1571899970, "post_id": 58531349, "comment_id": 103394150, "body": "@tera: The underlying problem is the same, but the question isn&#39;t, because it&#39;s about the different &quot;symptoms&quot; running stand-alone and in a profiler. Also it&#39;s a question about whether the wrapper library is at fault. So IMHO not quite a dupe."}], "answers": [{"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1571868570, "last_edit_date": 1571868570, "creation_date": 1571868150, "answer_id": 58531541, "question_id": 58531349, "link": "https://stackoverflow.com/questions/58531349/cuda-kernel-printf-produces-no-output-in-terminal-works-in-profiler/58531541#58531541", "title": "CUDA kernel printf() produces no output in terminal, works in profiler", "body": "<p>You are implicitly, and mistakenly, assuming a certain order of occurrences when <code>main()</code> is done. Specifically, you're assuming that because the default stream is synchronous, everything having to do with your kernel is over and done with by the time the next line of code after the kernel launch gets executed. That is not 100% true - as @RobertCrovella suggests; specifically, it's not guaranteed that the device's <code>printf()</code> buffer will be ferried back into host memory and dumped into the standard output stream before control returns to your program.</p>\n\n<p>You will need to synchronize the (default, current) CUDA device with the host, i.e. execute:</p>\n\n<pre><code>cuda::device::current::get().synchronize();\n</code></pre>\n\n<p>or at least synchronize the device's default stream:</p>\n\n<pre><code>cuda::device::current::get().default_stream().synchronize();\n</code></pre>\n\n<p>and this <em>will</em> ensure the <code>printf()</code> results make it to standard output.</p>\n\n<p>Now, nvvp instruments your execution in some way (probably just by having the profiler running - but nvprof instruments the execution through the hooks which are the CUDA runtime API calls). So, the behavior is different when you run your program that way.</p>\n\n<hr>\n\n<p>Somewhat-related question: <a href=\"https://stackoverflow.com/q/18443205/1593077\">The behavior of stream 0 (default) and other streams</a> .</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "closed_date": 1571946931, "answer_count": 1, "score": 1, "last_activity_date": 1571868717, "creation_date": 1571866867, "last_edit_date": 1571868717, "question_id": 58531349, "link": "https://stackoverflow.com/questions/58531349/cuda-kernel-printf-produces-no-output-in-terminal-works-in-profiler", "closed_reason": "Duplicate", "title": "CUDA kernel printf() produces no output in terminal, works in profiler", "body": "<p>Consider the following program:</p>\n\n<pre><code>#include &lt;cuda/api_wrappers.hpp&gt;\n\nnamespace kernels {\ntemplate &lt;typename T&gt;\n__global__ void print_stuff()\n{\n        printf(\"This is a plain printf() call.\\n\");\n}\n} // namespace kernels\n\nint main()\n{\n        auto launch_config { cuda::make_launch_config(2,2) };\n        cuda::launch(::kernels::print_stuff&lt;int&gt;, launch_config);\n        cuda::outstanding_error::ensure_none();\n}\n</code></pre>\n\n<p>(it uses the <a href=\"https://github.com/eyalroz/cuda-api-wrappers\" rel=\"nofollow noreferrer\">cuda-api-wrappers</a> library).</p>\n\n<p>The program compiles and runs. However, if I run in in a terminal, it prints nothing;\nwhile if I run it via nvvp, the console shows me:</p>\n\n<pre><code>This is a plain printf() call.\nThis is a plain printf() call.\nThis is a plain printf() call.\nThis is a plain printf() call.\n</code></pre>\n\n<p>... as expected (2 blocks x 2 threads = 4 lines).</p>\n\n<p>What is/could be the reason am I not getting the four lines printed on the terminal as well?</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>I realize the fault may theoretically be with the library, of which I am the author. So \"it has to be the library\" is a legitimate answer, but you need to explain why it can't be anything else.</li>\n<li>No warnings when compiling with <code>nvcc -Xcompiler -Wall -Xcompiler -Wextra</code>.</li>\n<li>I use Devuan GNU/Linux 3 (beowulf; equivalent of Debian Buster).</li>\n<li>My hardware: An AMD64 Intel CPU; a GTX 1050 Ti card.</li>\n<li>nVIDIA Driver version: 430.50; CUDA version: 10.1.105 .</li>\n<li><code>cuda-memcheck</code> does not complain about the program.</li>\n</ul>\n"}, {"tags": ["c++", "openssl"], "answers": [{"tags": [], "owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "is_accepted": false, "score": 1, "last_activity_date": 1571866526, "creation_date": 1571866526, "answer_id": 58531289, "question_id": 58531182, "link": "https://stackoverflow.com/questions/58531182/how-to-get-the-ca-certificate-used-to-validate-client-certificate-programmatical/58531289#58531289", "title": "How to get the CA Certificate Used to Validate Client Certificate programmatically", "body": "<p>This post seems on point:\n<a href=\"https://stackoverflow.com/questions/28306427/find-client-certificate-information-from-server-in-openssl?rq=1\">Find client certificate information from server in OpenSSL</a></p>\n\n<p>Since <a href=\"https://www.openssl.org/docs/manmaster/man3/SSL_get_peer_certificate.html\" rel=\"nofollow noreferrer\">SSL_get_peer_certificate</a> returns an <code>X509</code> cert, I would expect that the cert chain would be included (you couldn't handle a CRL properly without it, I'd think)?</p>\n"}, {"tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": true, "score": 1, "last_activity_date": 1571869238, "creation_date": 1571869238, "answer_id": 58531677, "question_id": 58531182, "link": "https://stackoverflow.com/questions/58531182/how-to-get-the-ca-certificate-used-to-validate-client-certificate-programmatical/58531677#58531677", "title": "How to get the CA Certificate Used to Validate Client Certificate programmatically", "body": "<p>You can use the <code>SSL_get0_verified_chain()</code> function for this purpose. See the documentation here:</p>\n\n<p><a href=\"https://www.openssl.org/docs/man1.1.1/man3/SSL_get0_verified_chain.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man1.1.1/man3/SSL_get0_verified_chain.html</a></p>\n\n<p>Note that this function was first introduced in OpenSSL 1.1.0, so this won't work in OpenSSL 1.0.2.</p>\n"}], "owner": {"reputation": 3, "user_id": 8604450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zXVb.png?s=128&g=1", "display_name": "Fen Fox", "link": "https://stackoverflow.com/users/8604450/fen-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 58531677, "answer_count": 2, "score": 0, "last_activity_date": 1573525161, "creation_date": 1571865846, "last_edit_date": 1573525161, "question_id": 58531182, "link": "https://stackoverflow.com/questions/58531182/how-to-get-the-ca-certificate-used-to-validate-client-certificate-programmatical", "title": "How to get the CA Certificate Used to Validate Client Certificate programmatically", "body": "<p>In a server application, once a connection has been established I can grab the client certificate from the <code>SSL *</code> I have. Is there a way to find out which CA I used to validate that certificate?</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 21426, "user_id": 2495283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ef72b32709062aa479476844515073?s=128&d=identicon&r=PG", "display_name": "Claies", "link": "https://stackoverflow.com/users/2495283/claies"}, "edited": false, "score": 2, "creation_date": 1571865832, "post_id": 58531132, "comment_id": 103386131, "body": "There isn&#39;t enough information here to really begin troubleshooting, but I personally wouldn&#39;t use file names with spaces for command line, and also you have a mix of <code>\\ </code> and <code>&#47;</code> which probably isn&#39;t right."}, {"owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 3, "creation_date": 1571866819, "post_id": 58531132, "comment_id": 103386435, "body": "Did you build the program? Can <i>you</i> find that executable? Was it even generated?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1571868481, "post_id": 58531132, "comment_id": 103386939, "body": "In C++, you need to convert the source code into an executable.  This is called building, but often called compiling.  Set your build mode to Debug, the build your program."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1571868542, "post_id": 58531132, "comment_id": 103386955, "body": "Also, you should get in the habit of appending &quot;\\n&quot; to your text, so that the stream will be flushed."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1571881634, "post_id": 58531132, "comment_id": 103389454, "body": "<i>How</i> did you try to run the program? Did you verify that the file <code>C:\\Users\\thom\\Desktop\\C++\\Visual\\firstproject\\Debug\\Hello World.exe</code> does in fact exist?"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 7418314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27dbc2592a0ae1db21ac18851d1a1f8d?s=128&d=identicon&r=PG", "display_name": "Eden Dupont", "link": "https://stackoverflow.com/users/7418314/eden-dupont"}, "is_accepted": false, "score": 0, "last_activity_date": 1571867126, "creation_date": 1571867126, "answer_id": 58531394, "question_id": 58531132, "link": "https://stackoverflow.com/questions/58531132/i-cant-run-basic-c-program-hello-world-in-visual-studio/58531394#58531394", "title": "I can&#39;t run basic C++ program &quot; Hello World &quot; in Visual Studio", "body": "<p>Try Build -> Rebuild Solution, find the executable in the path shown at the output to run it.\nYou can also try pressing Ctrl+F5 to build and run</p>\n"}, {"tags": [], "owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1571880944, "creation_date": 1571880944, "answer_id": 58532957, "question_id": 58531132, "link": "https://stackoverflow.com/questions/58531132/i-cant-run-basic-c-program-hello-world-in-visual-studio/58532957#58532957", "title": "I can&#39;t run basic C++ program &quot; Hello World &quot; in Visual Studio", "body": "<p>If you create a .cpp file in File > New > File > C++ File? </p>\n\n<p><a href=\"https://i.stack.imgur.com/Cmt7N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cmt7N.png\" alt=\"enter image description here\"></a></p>\n\n<p>If so, the path is not included in the project directory, causing the compiler to fail to find the file.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DqFBj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DqFBj.png\" alt=\"enter image description here\"></a></p>\n\n<p>The correct way is to create a cpp file in the project directory under Explorer.As shown below\uff1a</p>\n\n<p><a href=\"https://i.stack.imgur.com/CPcQc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CPcQc.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Kxv3H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kxv3H.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can modify the name of the .cpp, and don't modify the default location.</p>\n\n<p>Now you can try to build and run the executable.</p>\n"}], "owner": {"reputation": 1, "user_id": 12265536, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDlCKz21DxBhVrL8fOg0dKgUrIU5F38xMACWRRKjQ=k-s128", "display_name": "Tom&#225;\u0161 Kol&#225;rik", "link": "https://stackoverflow.com/users/12265536/tom%c3%a1%c5%a1-kol%c3%a1rik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 797, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1571907533, "creation_date": 1571865596, "last_edit_date": 1571907533, "question_id": 58531132, "link": "https://stackoverflow.com/questions/58531132/i-cant-run-basic-c-program-hello-world-in-visual-studio", "title": "I can&#39;t run basic C++ program &quot; Hello World &quot; in Visual Studio", "body": "<p>I'm learning C++ as first programming language and I can't figure out how to run Hello World program. I was googling for solution but I did not find any.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n\n    cout &lt;&lt; \"Hello, World!\";\n    return 0;\n}\n</code></pre>\n\n<p>Unable to start program\n'C:\\Users/thom/Desktop/C++/Visual/firstproject/Debug/Hello World.exe'.\nThe system cannot find the file specified.</p>\n"}, {"tags": ["c++", "server", "bind", "ipv6"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1571866418, "post_id": 58531087, "comment_id": 103386327, "body": "What&#39;s <code>errno</code> being set to? (Hint: Use <code>perror()</code> or <code>strerror()</code> to get a nice human-readable error message)"}], "answers": [{"comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1571870333, "post_id": 58531407, "comment_id": 103387380, "body": "Or instead of memset you can use struct initialization to zero."}], "tags": [], "owner": {"reputation": 3470, "user_id": 531679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LYlCV.gif?s=128&g=1", "display_name": "Steve Friedl", "link": "https://stackoverflow.com/users/531679/steve-friedl"}, "is_accepted": false, "score": 2, "last_activity_date": 1571867241, "creation_date": 1571867241, "answer_id": 58531407, "question_id": 58531087, "link": "https://stackoverflow.com/questions/58531087/how-can-i-bind-socket-to-ipv6-address/58531407#58531407", "title": "how can i bind socket to ipv6 address?", "body": "<p>This might depend on your platform, but on Linux since 2.4 the <code>sockaddr_in6</code> structure also contains a <code>sin6_scope_id</code> member for defining the IPv6 scope, and since the variable <code>hint</code> is on the stack, it's got random data in it.</p>\n\n<p>The IPv6 scope describes what kind of address it is: unicast, multicast, link local, and a few others, and I have only a drive-by knowledge of them. But if there's garbage in there, it could be a thing.</p>\n\n<p>Recommend ruling this out as an issue by either hard-setting <code>sin6_scope_id</code> to zero, or (better) just zero out the entire <code>sockaddr_in6</code> structure before assigning stuff to it; I've long done this with my <code>sockaddr_in</code> variables just to be sure I didn't end up with junk I didn't want.</p>\n\n<pre><code>memset(&amp;hint, 0, sizeof hint);\n</code></pre>\n\n<p>And yes, the <code>errno</code> is really important.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 53, "user_id": 11390849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WxLLVXmbV8Y/AAAAAAAAAAI/AAAAAAAAACs/jOvYjPONBM4/photo.jpg?sz=128", "display_name": "Yaser Alajely", "link": "https://stackoverflow.com/users/11390849/yaser-alajely"}, "edited": false, "score": 0, "creation_date": 1572032054, "post_id": 58532586, "comment_id": 103447975, "body": "Then please feel free to mark this answer as accepted. See <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question</a>."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1571877036, "creation_date": 1571877036, "answer_id": 58532586, "question_id": 58531087, "link": "https://stackoverflow.com/questions/58531087/how-can-i-bind-socket-to-ipv6-address/58532586#58532586", "title": "how can i bind socket to ipv6 address?", "body": "<p>Rather than populate the <code>sockaddr_in6</code> manually, you can (and should) use <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/ws2tcpip/nf-ws2tcpip-getaddrinfo\" rel=\"nofollow noreferrer\"><code>getaddrinfo()</code></a> instead and let it allocate a properly filled <code>sockaddr_in6</code> for you, eg:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int err;\n\nSOCKET listening = socket(AF_INET6, SOCK_STREAM, IPPROTO_TCP);\nif (listening == INVALID_SOCKET)\n{\n    err = WSAGetLastError(); // or errno on non-Windows platforms...\n    cerr &lt;&lt; \"Can't create a socket! Error \" &lt;&lt; err &lt;&lt; \". Quitting\" &lt;&lt; endl;\n    return;\n}\n\n// Bind the ip address and port to a socket\n\naddrinfo hint = {};\nhint.ai_flags = AI_NUMERICHOST | AI_PASSIVE;\nhint.ai_family = AF_INET6;\nhint.ai_socktype = SOCK_STREAM;\nhint.ai_protocol = IPPROTO_TCP;\n\naddrinfo *res;\n\nerr = getaddrinfo(\"::0\", \"54000\", &amp;hint, &amp;res);\nif (err != 0)\n{\n    cerr &lt;&lt; \"Can't get address to bind the socket! Error \" &lt;&lt; err &lt;&lt; \". Quitting\" &lt;&lt; endl;\n    closesocket(listening); // or close() on non-Windows platforms...\n    return;\n}\n\nerr = bind(listening, res-&gt;ai_addr, res-&gt;ai_addrlen);\nif (err == SOCKET_ERROR)\n{\n    err = WSAGetLastError(); // or errno on non-Windows platforms...\n    cerr &lt;&lt; \"Can't bind the socket! Error \" &lt;&lt; err &lt;&lt; \". Quitting\" &lt;&lt; endl;\n    freeaddrinfo(res);\n    closesocket(listening); // or close() on non-Windows platforms...\n    return;\n}\n\nfreeaddrinfo(res);\n\n...\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11390849, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WxLLVXmbV8Y/AAAAAAAAAAI/AAAAAAAAACs/jOvYjPONBM4/photo.jpg?sz=128", "display_name": "Yaser Alajely", "link": "https://stackoverflow.com/users/11390849/yaser-alajely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 1, "accepted_answer_id": 58532586, "answer_count": 2, "score": 3, "last_activity_date": 1571877036, "creation_date": 1571865311, "last_edit_date": 1571865519, "question_id": 58531087, "link": "https://stackoverflow.com/questions/58531087/how-can-i-bind-socket-to-ipv6-address", "title": "how can i bind socket to ipv6 address?", "body": "<p>I am trying to port ipv4 applications to ipv6 but I can't bind the socket to the ipv6 address. </p>\n\n<p>The problem is here: </p>\n\n<pre><code>err=bind(listening, (sockaddr*)&amp;hint, sizeof(hint));\n</code></pre>\n\n<p>The <code>err</code> should be 0 but in this code it returns -1.  What is going wrong ?  </p>\n\n<pre><code>SOCKET listening = socket(AF_INET6, SOCK_STREAM, 0);\n    if (listening == INVALID_SOCKET)\n    {\n        cerr &lt;&lt; \"Can't create a socket! Quitting\" &lt;&lt; endl;\n        return;\n    }\n    int err;\n    // Bind the ip address and port to a socket\n    sockaddr_in6 hint;\n    hint.sin6_family = AF_INET6;\n    hint.sin6_flowinfo = 0;\n    hint.sin6_port = htons(54000);\n    hint.sin6_addr = in6addr_any;\n    err=bind(listening, (sockaddr*)&amp;hint, sizeof(hint)); //&lt;======= here\n</code></pre>\n"}, {"tags": ["c++", "constructor", "destructor"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1571865444, "post_id": 58531062, "comment_id": 103386015, "body": "C++&#39;s Llibrary containers store copies. You&#39;re printing out the destruction of the copies, but not the fact that copies were made."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1571865471, "post_id": 58531062, "comment_id": 103386027, "body": "Not the most perfect duplicate, but the idea is generally the same."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1571865511, "post_id": 58531062, "comment_id": 103386037, "body": "Or this one: <a href=\"https://stackoverflow.com/questions/2627540/why-is-the-destructor-of-the-class-called-twice\">Why is the destructor of the class called twice?</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1571865553, "post_id": 58531062, "comment_id": 103386047, "body": "@Yksisarvinen Agreed waffled over the first, god hammering the second."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1571865628, "post_id": 58531062, "comment_id": 103386072, "body": "Though to be honest, you need to read both to get the full measure of what&#39;s going on. I&#39;m still looking for a closer hit."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571865768, "post_id": 58531062, "comment_id": 103386115, "body": "You probably should read up about <i>copy constructors</i> and <i>move constructors</i> in general, their <i>implicitly defined</i> versions, and how <i>pass by value</i> works for class types."}], "owner": {"reputation": 637, "user_id": 4071435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/598ac8af735dd5a8892220bba350cad4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Grinberg", "link": "https://stackoverflow.com/users/4071435/paul-grinberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1571865565, "answer_count": 0, "score": 0, "last_activity_date": 1571865179, "creation_date": 1571865179, "question_id": 58531062, "link": "https://stackoverflow.com/questions/58531062/multiple-destructor-calls-on-static-unordered-map", "closed_reason": "Duplicate", "title": "multiple destructor calls on static unordered_map", "body": "<p>I have distilled my question down to a very simple demo program</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n\ntypedef struct my_struct\n{\n  my_struct(const int &amp;x) : x(x) { printf(\"constructor my_struct(%d)\\n\", x); };\n  ~my_struct() { printf(\"destructor my_struct(%d)\\n\", x); };\n  int x;\n} my_t;\n\nstatic std::unordered_map&lt;int, my_t&gt; foo({\n      {1, my_struct(17)}\n    }); \n\nint main ()\n{\n  printf(\"It is %d\\n\", foo.at(1).x);\n  return 0;\n}\n</code></pre>\n\n<p>When compiled with the most basic <code>g++ foo.cpp</code>, executing the resulting binary produces the following output</p>\n\n<pre><code>constructor my_struct(17)\ndestructor my_struct(17)\ndestructor my_struct(17)\nIt is 17\ndestructor my_struct(17)\n</code></pre>\n\n<p>My question is why is the destructor being called so many times? For that matter, when the destructor is called multiple times, why isn't it generating an exception? Along the same lines, how can I still be accessing the value from the map when the destructor has been called?</p>\n"}, {"tags": ["c++", "c", "clang", "clang-format"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 6, "creation_date": 1571865339, "post_id": 58531030, "comment_id": 103385972, "body": "Why would you want that style? It&#39;s confusing to read. Indentation level often indicates scope changes. The style you suggest confuses the reader, leading them to believe that the variables are placed in the global scope when they actually belong within the function&#39;s scope."}, {"owner": {"reputation": 121, "user_id": 10977033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b481acf5d5db6290dcf3fa07724541d?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/10977033/jenny"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1571865429, "post_id": 58531030, "comment_id": 103386009, "body": "Hi Myst: Well, that&#39;s the prefered style of our company"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 2, "creation_date": 1571865571, "post_id": 58531030, "comment_id": 103386053, "body": "I&#39;m sorry for that. Must be confusing to read... the only solution I can think of is to use <code>&#47;&#47; clang-format off</code> and <code>&#47;&#47; clang-format on</code> around these variable declarations. There&#39;s probably a better answer somewhere, so I&#39;ll avoid posting anything."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1571865588, "post_id": 58531030, "comment_id": 103386062, "body": "What do you do with a variable defined at block scope? Does it appear on the left margin?"}, {"owner": {"reputation": 121, "user_id": 10977033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b481acf5d5db6290dcf3fa07724541d?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/10977033/jenny"}, "edited": false, "score": 0, "creation_date": 1571866048, "post_id": 58531030, "comment_id": 103386201, "body": "@ Weather Vane: Yes, it does."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1571866813, "post_id": 58531030, "comment_id": 103386434, "body": "Just a pedantic note: &quot;<i>initial parameters</i>&quot; Those aren&#39;t parameters. They&#39;re just local variables."}, {"owner": {"reputation": 1095, "user_id": 13501674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c01e5dc07ebbf5f191d177303accdf?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Backus", "link": "https://stackoverflow.com/users/13501674/eric-backus"}, "edited": false, "score": 0, "creation_date": 1598382033, "post_id": 58531030, "comment_id": 112439662, "body": "No, <code>clang-format</code> has no way to do that."}], "owner": {"reputation": 121, "user_id": 10977033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b481acf5d5db6290dcf3fa07724541d?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/10977033/jenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571865009, "creation_date": 1571865009, "question_id": 58531030, "link": "https://stackoverflow.com/questions/58531030/how-do-i-remove-spaces-before-parameters-initialization-in-clang-format", "title": "How do I remove spaces before parameters initialization in clang-format?", "body": "<p>In clang-format file code is appared in the same verticle position as initial parameters. I'd like to have the initial parameters have no space but rest of the code should have space of 4 spaces(single tab size). How do I achieve the desired format?</p>\n\n<p><strong>I have this:</strong></p>\n\n<pre><code>int main() {\n    int i;\n    int j; //parameters initialized\n    if() {\n        // stuff    //rest of the code\n    }\n}\n</code></pre>\n\n<p><strong>I want this:</strong></p>\n\n<pre><code>int main() {\nint i;\nint j; //parameters initialized\n    if() {\n        // stuff    //rest of the code\n    }\n}\n</code></pre>\n\n<p><strong>My clang-format file looks like this:</strong></p>\n\n<pre><code># Abge\u00e4nderte .clang-format-Datei\n# Anhaltspunkt ist https://clang.llvm.org/docs/ClangFormatStyleOptions.html\n# sowie: https://clangformat.com\n\n#for visual studio 2017 you have to comment this one thing:\n#BreakInheritanceList: AfterColon\n\n#version for visual studio 2017:\n#Language: Cpp\n#BasedOnStyle: LLVM\nAccessModifierOffset: 0\nAlignAfterOpenBracket: Align\nAlignConsecutiveAssignments: false\nAlignConsecutiveDeclarations: false\nAlignEscapedNewlinesLeft: true\nAlignOperands:   true\nAlignTrailingComments: false\nAllowAllParametersOfDeclarationOnNextLine: true\nAllowShortBlocksOnASingleLine: true\nAllowShortCaseLabelsOnASingleLine: true\nAllowShortIfStatementsOnASingleLine: true\nAllowShortFunctionsOnASingleLine: true\nAllowShortLoopsOnASingleLine: true\nAlwaysBreakAfterDefinitionReturnType: None\nAlwaysBreakAfterReturnType: None\nAlwaysBreakBeforeMultilineStrings: false\nAlwaysBreakTemplateDeclarations: false\nBinPackArguments: true\nBinPackParameters: true\nBreakBeforeBinaryOperators: None\nBreakBeforeBraces: Attach\nBreakBeforeTernaryOperators: false\nBreakConstructorInitializers: AfterColon\n#BreakInheritanceList: AfterColon\nColumnLimit:     300\nContinuationIndentWidth: 2\nCpp11BracedListStyle: false\nDerivePointerAlignment: false\nDisableFormat:   false\nSortIncludes: false\nIndentCaseLabels: true\nIndentWidth:     2\nIndentWrappedFunctionNames: true\nKeepEmptyLinesAtTheStartOfBlocks: false\nMaxEmptyLinesToKeep: 2\nNamespaceIndentation: All\n#PenaltyBreakBeforeFirstCallParameter: 19\n#PenaltyBreakComment: 300\n#PenaltyBreakFirstLessLess: 120\n#PenaltyBreakString: 1000\n#PenaltyExcessCharacter: 1000000\n#PenaltyReturnTypeOnItsOwnLine: 60\nPointerAlignment: Right\nReflowComments:  true\nSpaceAfterCStyleCast: false\nSpaceAfterTemplateKeyword: true\nSpaceBeforeAssignmentOperators: true\nSpaceBeforeParens: Never\nSpaceInEmptyParentheses: false\nSpacesBeforeTrailingComments: 4\nSpacesInAngles:  true\nSpacesInContainerLiterals: true\nSpacesInCStyleCastParentheses: false\nSpacesInParentheses: true\nSpacesInSquareBrackets: true\nTabWidth:        4\nUseTab:          Never\n</code></pre>\n"}, {"tags": ["c++", "c", "singly-linked-list"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1571864682, "post_id": 58530921, "comment_id": 103385750, "body": "<code>char character;</code> --&gt; <code>int character;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1571864737, "post_id": 58530921, "comment_id": 103385767, "body": "Please specify C or C++. They are different languages with different rules. For example in C++, <code>typedef struct wordNode{ ... }wordNode;</code> is wasted time. <code>struct wordNode{ ... };</code> is sufficient and in C the cast in <code>current = (wordNode*)malloc(sizeof(wordNode));</code> is not required. `"}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571864961, "post_id": 58530921, "comment_id": 103385856, "body": "Looks more like C; I don&#39;t know if it&#39;s possible to just remove the C++ tag. If C++ is desired, then are you fine just using <code>std::list&lt;T&gt;</code>, or does this have to be self-made?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1571865094, "post_id": 58530921, "comment_id": 103385895, "body": "Consider separating the linked list logic from the rest. It is almost always easier to get the linked list figured out on its own. Once you have a functional linked list, THEN it&#39;s safe to write code that uses it. If you try to integrate the two, you often spend many times longer debugging. In general, do one thing. Prove it works correctly. Move on to doing the next thing."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1571865309, "post_id": 58530921, "comment_id": 103385962, "body": "Your bug: Nothing in <code>if (head==NULL)</code>&#39;s <code>else</code> case links new <code>wordNode</code> to anything other nodes. <code>head</code> is left pointing to NULL and the rest of the nodes are leaked."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1571868638, "post_id": 58530921, "comment_id": 103386977, "body": "I recommend using <code>std::string</code> in your node for text.  The <code>char</code> arrays will get messy and may inject issues especially when copying or initializing the node."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1571868708, "post_id": 58530921, "comment_id": 103386993, "body": "BTW, any statements after <code>exit()</code> will not be executed, because your program has exited to the operating system."}, {"owner": {"reputation": 11, "user_id": 12265455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a887ff3985bf6224ed226e8b42c835e?s=128&d=identicon&r=PG&f=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/12265455/shawn"}, "edited": false, "score": 0, "creation_date": 1571869937, "post_id": 58530921, "comment_id": 103387295, "body": "I am using c language."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1571882061, "post_id": 58530921, "comment_id": 103389534, "body": "Please simplify your example. Try counting the words in a single file whose name is hardcoded into your code. (Don&#39;t parse command line arguments until you have the logic working.) Better yet, hardcode the text to process and don&#39;t open a file. Don&#39;t fork a new process. If that works, add back complications one at a time until the problem resurfaces. Then re-simplify, removing the unneeded complications and narrowing down the problem to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1571896520, "post_id": 58530921, "comment_id": 103392754, "body": "Do you want to insert every character you encounter or a string separated by spaces. Also do you want to insert them at the start of the list or end of the list?"}], "owner": {"reputation": 11, "user_id": 12265455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a887ff3985bf6224ed226e8b42c835e?s=128&d=identicon&r=PG&f=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/12265455/shawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571864440, "creation_date": 1571864440, "question_id": 58530921, "link": "https://stackoverflow.com/questions/58530921/putting-strings-into-linked-list", "title": "putting strings into linked list", "body": "<p>My wordcount function has some issues. If anyone can please help.\nI am reading characters from input file, converting them into words. I add them to linked list\nand using print statements checking that every word is going into linked list. When i call My printList\nfunction in wordcount function it only prints the head. Apparently head->next is null</p>\n\n<pre><code>typedef struct wordNode{\n    int data;\n    char *word;\n    struct wordNode *next;\n}wordNode;\n\nvoid wordCount(char *FileName); // function prototype\nvoid printList(wordNode *head);\n\nint main(int argc, char *argv[]){\n    int i,j;\n    int count = argc-1; // the count basically tells the for loop how many times to runs i.e number of files\n    pid_t childpid[count], wpid; // making a childpid array for forking more than one process\n        int status=0; // for parent process to wait for child\n\n        if(argc &gt;= 1){\n            for(j=1; j&lt;argc; j++){\n                    childpid[j] = fork();\n\n                    if(childpid[j] == -1)\n                        printf(\"The fork didn't go through for process %d\\n\", j);\n                    else if(childpid[j] == 0){\n                       // printf(\"got here\\n\");\n                        wordCount(argv[j]);\n                }\n\n            }\n        }\n\n        else {\n            printf(\"incorrect no. of argc\\n\"); }\n\n\n        //here the following code makes parent to wait for all the child processes to terminate\n\n        while((wpid = wait(&amp;status)) &gt; 0){\n\n            if ((wpid == -1)){\n                printf(\"Father didn't wait for child to term\");\n                break;\n            }\n        }\n\n        printf(\"All %d files have been counted\\n\", count);\n        return 0;\n\n}\n\n\nvoid wordCount(char *FileName){\n    char prev;  // keep track of last word that was read\n    char character;// to keep track of each character when reading input data\n    int words=0; // keep count of words\n    FILE* fp;\n    char thisword[100];\n\n    int k=0;\n\n    wordNode *head;\n    wordNode *current;\n    head=NULL;\n\n    current = NULL;\n\n    fp=fopen(FileName,\"r\");\n    prev='\\0';\n\n    if(fp==NULL){\n        printf(\"unable to open the file\\n\");\n        exit(EXIT_FAILURE); }\n    else{\n\n    while((character = fgetc(fp)) != EOF ){\n\n        if(character == ' ' || character == '\\t' || character=='\\0' || character =='\\n' ){\n            printf(\"in here\\n\");\n\n            words++; \n            thisword[k]='\\0';\n            printf(\"HERE THE WORD is %s\\n\", thisword);\n            printf(\"\\n\");\n            if (head==NULL){\n\n                head = malloc(sizeof(wordNode));\n                head-&gt;next = malloc(sizeof(wordNode));\n                head-&gt;word = (char *)calloc(strlen(thisword) + 1, strlen(thisword));\n                strcpy(head-&gt;word, thisword);\n\n                printf(\"%s \\n\", head-&gt;word);\n                current = head-&gt;next;\n            }\n\n            else{\n                current = (wordNode*)malloc(sizeof(wordNode));\n                current-&gt;word = (char *)calloc(strlen(thisword) + 1,  strlen(thisword));\n                strcpy(current-&gt;word, thisword);\n                current-&gt;next = NULL;\n                printf(\"%s\\n \", current-&gt;word);\n                current = current-&gt;next;\n            }\n\n            k=0;\n         }\n\n         else {\n            thisword[k++] = tolower(character);   \n         }\n\n    }\n        printList(head);\n        printf(\"Child process for %s: number of words is %d\\n\", FileName,words);\n        exit(0);\n        fclose(fp);\n    }   \n\n}\n\n\n\nvoid printList(wordNode *head)\n{\n    while(head != NULL)\n    {\n        printf(\"%s \", head-&gt;word);\n        head = head-&gt;next;\n    }\n</code></pre>\n"}, {"tags": ["c++", "objective-c", "cocoa", "chromium", "chromium-embedded"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 10221867, "user_type": "registered", "profile_image": "https://graph.facebook.com/1249124165229602/picture?type=large", "display_name": "Lucas Young", "link": "https://stackoverflow.com/users/10221867/lucas-young"}, "is_accepted": false, "score": 0, "last_activity_date": 1572199332, "creation_date": 1572199332, "answer_id": 58581951, "question_id": 58530876, "link": "https://stackoverflow.com/questions/58530876/cef-render-process-methods-such-as-oncontextcreated-not-being-called/58581951#58581951", "title": "CEF - Render process methods such as OnContextCreated not being called", "body": "<p><strong>What follows is a working version of CefSimple modified to include Javascript integration.</strong></p>\n\n<p>So it turns out the problem stems from using a Mac instead of a Linux or PC machine</p>\n\n<p>The code posted in my original post SHOULD work on a PC. I can't test it though because I don't have one. (If some kind soul wouldn't mind doing so, and posting the results, I'd appreciate it)</p>\n\n<p>On a mac, render processes have a separate entry-point. In the case of CEFSimple this is the process_helper_mac.cc file. All that is needed is to create a class which extends CefRenderProcessHandler, override it's GetRenderProcessHandler method to return itself, and then wrap the subprocess in that class before sending it through to CefExecuteProcess.</p>\n\n<p>In order to do this you need to define this new class, which I've called Helper_App, in a helper_app.h and helper_app.cc file. Lastly, you need to go in to the CMakeLists.txt file and actually instruct the build program to include the files we've written.</p>\n\n<p><strong>TL;DR Create the helper_app.h and helper_app.cc files and paste in the following code. Modify the process_helper_mac.cc file as follows. Modify the CMakeLists.txt file as follows.</strong></p>\n\n<p>helper_app.h</p>\n\n<pre><code>// Copyright (c) 2013 The Chromium Embedded Framework Authors. \n\nAll rights\n// reserved. Use of this source code is governed by a BSD-style license that\n// can be found in the LICENSE file.\n\n#ifndef CEF_TESTS_CEFSIMPLE_HELPER_APP_H_\n#define CEF_TESTS_CEFSIMPLE_HELPER_APP_H_\n\n#include \"include/cef_app.h\"\n\n// Implement application-level callbacks for the browser process.\nclass HelperApp : public CefApp, public CefRenderProcessHandler {\n public:\n  HelperApp();\n\n  // CefApp methods:\n  virtual CefRefPtr&lt;CefRenderProcessHandler&gt; GetRenderProcessHandler()\n      OVERRIDE {\n    return this;\n  }\n\n  // CefBrowserProcessHandler methods:\n  virtual void OnContextCreated( CefRefPtr&lt;CefBrowser&gt; browser,\n                                CefRefPtr&lt;CefFrame&gt; frame,\n                                CefRefPtr&lt;CefV8Context&gt; context ) OVERRIDE;\n\n private:\n  // Include the default reference counting implementation.\n  IMPLEMENT_REFCOUNTING(HelperApp);\n};\n\n#endif  // CEF_TESTS_CEFSIMPLE_HELPER_APP_H_\n</code></pre>\n\n<p>helper_app.cc</p>\n\n<pre><code>// Copyright (c) 2013 The Chromium Embedded Framework Authors. All rights\n// reserved. Use of this source code is governed by a BSD-style license that\n// can be found in the LICENSE file.\n\n#include \"tests/cefsimple/helper_app.h\"\n\nHelperApp::HelperApp() {}\n\nvoid HelperApp::OnContextCreated(CefRefPtr&lt;CefBrowser&gt; browser,\n        CefRefPtr&lt;CefFrame&gt; frame,\n        CefRefPtr&lt;CefV8Context&gt; context) {\n\n  // Retrieve the context's window object.\n   CefRefPtr&lt;CefV8Value&gt; object = context-&gt;GetGlobal();\n\n   // Create a new V8 string value. See the \"Basic JS Types\" section below.\n   CefRefPtr&lt;CefV8Value&gt; str = CefV8Value::CreateString(\"My Value!\");\n\n   // Add the string to the window object as \"window.myval\". See the \"JS Objects\" section below.\n   object-&gt;SetValue(\"myval\", str, V8_PROPERTY_ATTRIBUTE_NONE);\n\n}\n</code></pre>\n\n<p>process_helper_mac.cc</p>\n\n<pre><code>// Copyright (c) 2013 The Chromium Embedded Framework Authors. All rights\n// reserved. Use of this source code is governed by a BSD-style license that can\n// be found in the LICENSE file.\n\n#include \"include/cef_app.h\"\n#include \"include/wrapper/cef_library_loader.h\"\n\n#include \"tests/cefsimple/helper_app.h\"\n\n// When generating projects with CMake the CEF_USE_SANDBOX value will be defined\n// automatically. Pass -DUSE_SANDBOX=OFF to the CMake command-line to disable\n// use of the sandbox.\n#if defined(CEF_USE_SANDBOX)\n#include \"include/cef_sandbox_mac.h\"\n#endif\n\n// Entry point function for sub-processes.\nint main(int argc, char* argv[]) {\n#if defined(CEF_USE_SANDBOX)\n  // Initialize the macOS sandbox for this helper process.\n  CefScopedSandboxContext sandbox_context;\n  if (!sandbox_context.Initialize(argc, argv))\n    return 1;\n#endif\n\n  // Load the CEF framework library at runtime instead of linking directly\n  // as required by the macOS sandbox implementation.\n  CefScopedLibraryLoader library_loader;\n  if (!library_loader.LoadInHelper())\n    return 1;\n\n  // Provide CEF with command-line arguments.\n  CefMainArgs main_args(argc, argv);\n\n  CefRefPtr&lt;HelperApp&gt; app(new HelperApp);  // &lt;--- Create an object of the type HelperApp\n\n  // Execute the sub-process.\n  return CefExecuteProcess(main_args, app, NULL); &lt;--- Feed our HelperApp object through to CefExecuteProcess\n}\n</code></pre>\n\n<p>CMakeLists.txt</p>\n\n<pre><code># Copyright (c) 2014 The Chromium Embedded Framework Authors. All rights\n# reserved. Use of this source code is governed by a BSD-style license that\n# can be found in the LICENSE file.\n\n#\n# Source files.\n#\n\n# cefsimple sources.\nset(CEFSIMPLE_SRCS\n  simple_app.cc\n  simple_app.h\n  simple_handler.cc\n  simple_handler.h\n  )\nset(CEFSIMPLE_SRCS_LINUX\n  cefsimple_linux.cc\n  simple_handler_linux.cc\n  )\nset(CEFSIMPLE_SRCS_MACOSX\n  cefsimple_mac.mm\n  simple_handler_mac.mm\n  )\nset(CEFSIMPLE_SRCS_WINDOWS\n  cefsimple.exe.manifest\n  cefsimple.rc\n  cefsimple_win.cc\n  resource.h\n  simple_handler_win.cc\n  )\nAPPEND_PLATFORM_SOURCES(CEFSIMPLE_SRCS)\nsource_group(cefsimple FILES ${CEFSIMPLE_SRCS})\n\nset(CEFSIMPLE_RES_SRCS_WINDOWS\n  res/cefsimple.ico\n  res/small.ico\n  )\nAPPEND_PLATFORM_SOURCES(CEFSIMPLE_RES_SRCS)\nsource_group(cefsimple\\\\\\\\res FILES ${CEFSIMPLE_RES_SRCS})\n\nset(CEFSIMPLE_SRCS\n  ${CEFSIMPLE_SRCS}\n  ${CEFSIMPLE_RES_SRCS}\n  )\n\n# cefsimple helper sources.\n#### Tell the build program to include helper_app.cc and helper_app.h during the build process\nset(CEFSIMPLE_HELPER_SRCS_MACOSX\n  process_helper_mac.cc\n  helper_app.cc\n  helper_app.h\n  )\nAPPEND_PLATFORM_SOURCES(CEFSIMPLE_HELPER_SRCS)\nsource_group(cefsimple FILES ${CEFSIMPLE_HELPER_SRCS})\n\n# cefsimple resources.\nset(CEFSIMPLE_RESOURCES_MAC_SRCS_MACOSX\n  mac/Info.plist\n  mac/cefsimple.icns\n  )\nAPPEND_PLATFORM_SOURCES(CEFSIMPLE_RESOURCES_MAC_SRCS)\nsource_group(cefsimple\\\\\\\\mac FILES ${CEFSIMPLE_RESOURCES_MAC_SRCS})\n\nset(CEFSIMPLE_RESOURCES_MAC_ENGLISH_LPROJ_SRCS_MACOSX\n  mac/English.lproj/InfoPlist.strings\n  mac/English.lproj/MainMenu.xib\n  )\nAPPEND_PLATFORM_SOURCES(CEFSIMPLE_RESOURCES_MAC_ENGLISH_LPROJ_SRCS)\nsource_group(cefsimple\\\\\\\\mac\\\\\\\\English.lproj FILES ${CEFSIMPLE_RESOURCES_MAC_ENGLISH_LPROJ_SRCS})\n\nset(CEFSIMPLE_RESOURCES_SRCS\n  ${CEFSIMPLE_RESOURCES_MAC_SRCS}\n  ${CEFSIMPLE_RESOURCES_MAC_ENGLISH_LPROJ_SRCS}\n  )\n\n\n#\n# Shared configuration.\n#\n\n# Target executable names.\nset(CEF_TARGET \"cefsimple\")\nif(OS_MACOSX)\n  set(CEF_HELPER_TARGET \"cefsimple_Helper\")\n  set(CEF_HELPER_OUTPUT_NAME \"cefsimple Helper\")\nelse()\n  # Logical target used to link the libcef library.\n  ADD_LOGICAL_TARGET(\"libcef_lib\" \"${CEF_LIB_DEBUG}\" \"${CEF_LIB_RELEASE}\")\nendif()\n\n# Determine the target output directory.\nSET_CEF_TARGET_OUT_DIR()\n\n\n#\n# Linux configuration.\n#\n\nif(OS_LINUX)\n  # Executable target.\n  add_executable(${CEF_TARGET} ${CEFSIMPLE_SRCS})\n  SET_EXECUTABLE_TARGET_PROPERTIES(${CEF_TARGET})\n  add_dependencies(${CEF_TARGET} libcef_dll_wrapper)\n  target_link_libraries(${CEF_TARGET} libcef_lib libcef_dll_wrapper ${CEF_STANDARD_LIBS})\n\n  # Set rpath so that libraries can be placed next to the executable.\n  set_target_properties(${CEF_TARGET} PROPERTIES INSTALL_RPATH \"$ORIGIN\")\n  set_target_properties(${CEF_TARGET} PROPERTIES BUILD_WITH_INSTALL_RPATH TRUE)\n  set_target_properties(${CEF_TARGET} PROPERTIES RUNTIME_OUTPUT_DIRECTORY ${CEF_TARGET_OUT_DIR})\n\n  # Copy binary and resource files to the target output directory.\n  COPY_FILES(\"${CEF_TARGET}\" \"${CEF_BINARY_FILES}\" \"${CEF_BINARY_DIR}\" \"${CEF_TARGET_OUT_DIR}\")\n  COPY_FILES(\"${CEF_TARGET}\" \"${CEF_RESOURCE_FILES}\" \"${CEF_RESOURCE_DIR}\" \"${CEF_TARGET_OUT_DIR}\")\n  if (EXISTS \"${CEF_BINARY_DIR}/libminigbm.so\")\n    COPY_FILES(\"${CEF_TARGET}\" \"libminigbm.so\" \"${CEF_BINARY_DIR}\" \"${CEF_TARGET_OUT_DIR}\")\n  endif()\n\n  # Set SUID permissions on the chrome-sandbox target.\n  SET_LINUX_SUID_PERMISSIONS(\"${CEF_TARGET}\" \"${CEF_TARGET_OUT_DIR}/chrome-sandbox\")\nendif()\n\n\n#\n# Mac OS X configuration.\n#\n\nif(OS_MACOSX)\n  option(OPTION_USE_ARC \"Build with ARC (automatic Reference Counting) on macOS.\" ON)\n  if(OPTION_USE_ARC)\n    list(APPEND CEF_COMPILER_FLAGS\n      -fobjc-arc\n      )\n    set_target_properties(${target} PROPERTIES\n      CLANG_ENABLE_OBJC_ARC \"YES\"\n      )\n  endif()\n\n  # Output paths for the app bundles.\n  set(CEF_APP \"${CEF_TARGET_OUT_DIR}/${CEF_TARGET}.app\")\n  set(CEF_HELPER_APP \"${CEF_TARGET_OUT_DIR}/${CEF_HELPER_OUTPUT_NAME}.app\")\n\n  # Variable referenced from Info.plist files.\n  set(PRODUCT_NAME \"${CEF_TARGET}\")\n\n  # Helper executable target.\n  add_executable(${CEF_HELPER_TARGET} MACOSX_BUNDLE ${CEFSIMPLE_HELPER_SRCS})\n  SET_EXECUTABLE_TARGET_PROPERTIES(${CEF_HELPER_TARGET})\n  add_dependencies(${CEF_HELPER_TARGET} libcef_dll_wrapper)\n  target_link_libraries(${CEF_HELPER_TARGET} libcef_dll_wrapper ${CEF_STANDARD_LIBS})\n  set_target_properties(${CEF_HELPER_TARGET} PROPERTIES\n    MACOSX_BUNDLE_INFO_PLIST ${CMAKE_CURRENT_SOURCE_DIR}/mac/helper-Info.plist\n    OUTPUT_NAME ${CEF_HELPER_OUTPUT_NAME}\n    )\n\n  if(USE_SANDBOX)\n    # Logical target used to link the cef_sandbox library.\n    ADD_LOGICAL_TARGET(\"cef_sandbox_lib\" \"${CEF_SANDBOX_LIB_DEBUG}\" \"${CEF_SANDBOX_LIB_RELEASE}\")\n    target_link_libraries(${CEF_HELPER_TARGET} cef_sandbox_lib)\n  endif()\n\n  # Main executable target.\n  add_executable(${CEF_TARGET} MACOSX_BUNDLE ${CEFSIMPLE_RESOURCES_SRCS} ${CEFSIMPLE_SRCS})\n  SET_EXECUTABLE_TARGET_PROPERTIES(${CEF_TARGET})\n  add_dependencies(${CEF_TARGET} libcef_dll_wrapper \"${CEF_HELPER_TARGET}\")\n  target_link_libraries(${CEF_TARGET} libcef_dll_wrapper ${CEF_STANDARD_LIBS})\n  set_target_properties(${CEF_TARGET} PROPERTIES\n    MACOSX_BUNDLE_INFO_PLIST ${CMAKE_CURRENT_SOURCE_DIR}/mac/Info.plist\n    )\n\n  # Copy files into the main app bundle.\n  add_custom_command(\n    TARGET ${CEF_TARGET}\n    POST_BUILD\n    # Copy the helper app bundle into the Frameworks directory.\n    COMMAND ${CMAKE_COMMAND} -E copy_directory\n            \"${CEF_HELPER_APP}\"\n            \"${CEF_APP}/Contents/Frameworks/${CEF_HELPER_OUTPUT_NAME}.app\"\n    # Copy the CEF framework into the Frameworks directory.\n    COMMAND ${CMAKE_COMMAND} -E copy_directory\n            \"${CEF_BINARY_DIR}/Chromium Embedded Framework.framework\"\n            \"${CEF_APP}/Contents/Frameworks/Chromium Embedded Framework.framework\"\n    VERBATIM\n    )\n\n  # Manually process and copy over resource files.\n  # The Xcode generator can support this via the set_target_properties RESOURCE\n  # directive but that doesn't properly handle nested resource directories.\n  # Remove these prefixes from input file paths.\n  set(PREFIXES \"mac/\")\n  COPY_MACOSX_RESOURCES(\"${CEFSIMPLE_RESOURCES_SRCS}\" \"${PREFIXES}\" \"${CEF_TARGET}\" \"${CMAKE_CURRENT_SOURCE_DIR}\" \"${CEF_APP}\")\nendif()\n\n\n#\n# Windows configuration.\n#\n\nif(OS_WINDOWS)\n  # Executable target.\n  add_executable(${CEF_TARGET} WIN32 ${CEFSIMPLE_SRCS})\n  add_dependencies(${CEF_TARGET} libcef_dll_wrapper)\n  SET_EXECUTABLE_TARGET_PROPERTIES(${CEF_TARGET})\n  target_link_libraries(${CEF_TARGET} libcef_lib libcef_dll_wrapper ${CEF_STANDARD_LIBS})\n\n  if(USE_SANDBOX)\n    # Logical target used to link the cef_sandbox library.\n    ADD_LOGICAL_TARGET(\"cef_sandbox_lib\" \"${CEF_SANDBOX_LIB_DEBUG}\" \"${CEF_SANDBOX_LIB_RELEASE}\")\n    target_link_libraries(${CEF_TARGET} cef_sandbox_lib ${CEF_SANDBOX_STANDARD_LIBS})\n  endif()\n\n  # Add the custom manifest files to the executable.\n  ADD_WINDOWS_MANIFEST(\"${CMAKE_CURRENT_SOURCE_DIR}\" \"${CEF_TARGET}\" \"exe\")\n\n  # Copy binary and resource files to the target output directory.\n  COPY_FILES(\"${CEF_TARGET}\" \"${CEF_BINARY_FILES}\" \"${CEF_BINARY_DIR}\" \"${CEF_TARGET_OUT_DIR}\")\n  COPY_FILES(\"${CEF_TARGET}\" \"${CEF_RESOURCE_FILES}\" \"${CEF_RESOURCE_DIR}\" \"${CEF_TARGET_OUT_DIR}\")\nendif()\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 10221867, "user_type": "registered", "profile_image": "https://graph.facebook.com/1249124165229602/picture?type=large", "display_name": "Lucas Young", "link": "https://stackoverflow.com/users/10221867/lucas-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 982, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572199332, "creation_date": 1571864149, "last_edit_date": 1571873246, "question_id": 58530876, "link": "https://stackoverflow.com/questions/58530876/cef-render-process-methods-such-as-oncontextcreated-not-being-called", "title": "CEF - Render process methods such as OnContextCreated not being called", "body": "<p>Long time lurker, but happy to be here. I'm attempting to bind a basic javascript binding to the cefSimple application.</p>\n\n<p>I'm working on an up-to-date Macbook as well as an up-to-date iMac.</p>\n\n<p>Numerous searches have resulted in some basic mistakes I was making- but I seem to have rectified them all and it still work go.</p>\n\n<p>Specifically, I have made certain to have my SimpleApp class inherit from CefRenderProcessHandler (atleast, I think it's inheriting. The syntax is still a bit new to new)</p>\n\n<p>I have also envoked GetRenderProcessHandler in that class aswell.</p>\n\n<p>The other main suggestion I've seen is to be sure to pass the SimpleApp instance to CefExecuteProcess- which I have done.</p>\n\n<p>Here is my code:</p>\n\n<p>simple_app.mm</p>\n\n<pre><code>// Copyright (c) 2013 The Chromium Embedded Framework Authors.\n// Portions copyright (c) 2010 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n#import &lt;Cocoa/Cocoa.h&gt;\n\n#include \"include/cef_application_mac.h\"\n#include \"include/wrapper/cef_helpers.h\"\n#include \"include/wrapper/cef_library_loader.h\"\n#include \"tests/cefsimple/simple_app.h\"\n#include \"tests/cefsimple/simple_handler.h\"\n\n// Receives notifications from the application.\n@interface SimpleAppDelegate : NSObject &lt;NSApplicationDelegate&gt;\n- (void)createApplication:(id)object;\n- (void)tryToTerminateApplication:(NSApplication*)app;\n@end\n\n// Provide the CefAppProtocol implementation required by CEF.\n@interface SimpleApplication : NSApplication &lt;CefAppProtocol&gt; {\n @private\n  BOOL handlingSendEvent_;\n}\n@end\n\n@implementation SimpleApplication\n- (BOOL)isHandlingSendEvent {\n  return handlingSendEvent_;\n}\n\n- (void)setHandlingSendEvent:(BOOL)handlingSendEvent {\n  handlingSendEvent_ = handlingSendEvent;\n}\n\n- (void)sendEvent:(NSEvent*)event {\n  CefScopedSendingEvent sendingEventScoper;\n  [super sendEvent:event];\n}\n\n// |-terminate:| is the entry point for orderly \"quit\" operations in Cocoa. This\n// includes the application menu's quit menu item and keyboard equivalent, the\n// application's dock icon menu's quit menu item, \"quit\" (not \"force quit\") in\n// the Activity Monitor, and quits triggered by user logout and system restart\n// and shutdown.\n//\n// The default |-terminate:| implementation ends the process by calling exit(),\n// and thus never leaves the main run loop. This is unsuitable for Chromium\n// since Chromium depends on leaving the main run loop to perform an orderly\n// shutdown. We support the normal |-terminate:| interface by overriding the\n// default implementation. Our implementation, which is very specific to the\n// needs of Chromium, works by asking the application delegate to terminate\n// using its |-tryToTerminateApplication:| method.\n//\n// |-tryToTerminateApplication:| differs from the standard\n// |-applicationShouldTerminate:| in that no special event loop is run in the\n// case that immediate termination is not possible (e.g., if dialog boxes\n// allowing the user to cancel have to be shown). Instead, this method tries to\n// close all browsers by calling CloseBrowser(false) via\n// ClientHandler::CloseAllBrowsers. Calling CloseBrowser will result in a call\n// to ClientHandler::DoClose and execution of |-performClose:| on the NSWindow.\n// DoClose sets a flag that is used to differentiate between new close events\n// (e.g., user clicked the window close button) and in-progress close events\n// (e.g., user approved the close window dialog). The NSWindowDelegate\n// |-windowShouldClose:| method checks this flag and either calls\n// CloseBrowser(false) in the case of a new close event or destructs the\n// NSWindow in the case of an in-progress close event.\n// ClientHandler::OnBeforeClose will be called after the CEF NSView hosted in\n// the NSWindow is dealloc'ed.\n//\n// After the final browser window has closed ClientHandler::OnBeforeClose will\n// begin actual tear-down of the application by calling CefQuitMessageLoop.\n// This ends the NSApplication event loop and execution then returns to the\n// main() function for cleanup before application termination.\n//\n// The standard |-applicationShouldTerminate:| is not supported, and code paths\n// leading to it must be redirected.\n- (void)terminate:(id)sender {\n  SimpleAppDelegate* delegate =\n      static_cast&lt;SimpleAppDelegate*&gt;([NSApp delegate]);\n  [delegate tryToTerminateApplication:self];\n  // Return, don't exit. The application is responsible for exiting on its own.\n}\n@end\n\n@implementation SimpleAppDelegate\n\n// Create the application on the UI thread.\n- (void)createApplication:(id)object {\n  [NSApplication sharedApplication];\n  [[NSBundle mainBundle] loadNibNamed:@\"MainMenu\"\n                                owner:NSApp\n                      topLevelObjects:nil];\n\n  // Set the delegate for application events.\n  [[NSApplication sharedApplication] setDelegate:self];\n}\n\n- (void)tryToTerminateApplication:(NSApplication*)app {\n  SimpleHandler* handler = SimpleHandler::GetInstance();\n  if (handler &amp;&amp; !handler-&gt;IsClosing())\n    handler-&gt;CloseAllBrowsers(false);\n}\n\n- (NSApplicationTerminateReply)applicationShouldTerminate:\n    (NSApplication*)sender {\n  return NSTerminateNow;\n}\n@end\n\n// Entry point function for the browser process.\nint main(int argc, char* argv[]) {\n  // Load the CEF framework library at runtime instead of linking directly\n  // as required by the macOS sandbox implementation.\n  CefScopedLibraryLoader library_loader;\n  if (!library_loader.LoadInMain())\n    return 1;\n\n  // Provide CEF with command-line arguments.\n  CefMainArgs main_args(argc, argv);\n\n  @autoreleasepool {\n    // Initialize the SimpleApplication instance.\n    [SimpleApplication sharedApplication];\n\n    // Specify CEF global settings here.\n    CefSettings settings;\n\n    // When generating projects with CMake the CEF_USE_SANDBOX value will be\n    // defined automatically. Pass -DUSE_SANDBOX=OFF to the CMake command-line\n    // to disable use of the sandbox.\n#if !defined(CEF_USE_SANDBOX)\n    settings.no_sandbox = true;\n#endif\n\n    // SimpleApp implements application-level callbacks for the browser process.\n    // It will create the first browser instance in OnContextInitialized() after\n    // CEF has initialized.\n    CefRefPtr&lt;SimpleApp&gt; app(new SimpleApp);\n\n    // CEF applications have multiple sub-processes (render, plugin, GPU, etc)\n    // that share the same executable. This function checks the command-line and,\n    // if this is a sub-process, executes the appropriate logic.\n    CefExecuteProcess(main_args, app, nullptr);\n\n    // Initialize CEF for the browser process.\n    CefInitialize(main_args, settings, app.get(), NULL);\n\n    // Create the application delegate.\n    NSObject* delegate = [[SimpleAppDelegate alloc] init];\n    [delegate performSelectorOnMainThread:@selector(createApplication:)\n                               withObject:nil\n                            waitUntilDone:NO];\n\n    // Run the CEF message loop. This will block until CefQuitMessageLoop() is\n    // called.\n    CefRunMessageLoop();\n\n    // Shut down CEF.\n    CefShutdown();\n\n    // Release the delegate.\n#if !__has_feature(objc_arc)\n    [delegate release];\n#endif  // !__has_feature(objc_arc)\n    delegate = nil;\n  }  // @autoreleasepool\n\n  return 0;\n}\n</code></pre>\n\n<p>simple_app.h</p>\n\n<pre><code>// Copyright (c) 2013 The Chromium Embedded Framework Authors. All rights\n// reserved. Use of this source code is governed by a BSD-style license that\n// can be found in the LICENSE file.\n\n#ifndef CEF_TESTS_CEFSIMPLE_SIMPLE_APP_H_\n#define CEF_TESTS_CEFSIMPLE_SIMPLE_APP_H_\n\n#include \"include/cef_app.h\"\n\n// Implement application-level callbacks for the browser process.\nclass SimpleApp : public CefApp, \n                                public CefBrowserProcessHandler,\n                                public CefRenderProcessHandler {\n public:\n  SimpleApp();\n\n  // CefApp methods:\n  virtual CefRefPtr&lt;CefBrowserProcessHandler&gt; GetBrowserProcessHandler()\n      OVERRIDE {\n    return this;\n  }\n\n  virtual CefRefPtr&lt;CefRenderProcessHandler&gt; GetRenderProcessHandler()\n      OVERRIDE {\n    return this;\n  }\n\n  // CefBrowserProcessHandler methods:\n  virtual void OnContextInitialized() OVERRIDE;\n\n  virtual void OnContextCreated(CefRefPtr&lt;CefBrowser&gt; browser,\n                                CefRefPtr&lt;CefFrame&gt; frame,\n                                CefRefPtr&lt;CefV8Context&gt; context) OVERRIDE;\n\n private:\n  // Include the default reference counting implementation.\n  IMPLEMENT_REFCOUNTING(SimpleApp);\n};\n\n#endif  // CEF_TESTS_CEFSIMPLE_SIMPLE_APP_H_\n</code></pre>\n\n<p>simple_app.cc</p>\n\n<pre><code>// Copyright (c) 2013 The Chromium Embedded Framework Authors. All rights\n// reserved. Use of this source code is governed by a BSD-style license that\n// can be found in the LICENSE file.\n\n#include \"tests/cefsimple/simple_app.h\"\n\n#include &lt;string&gt;\n\n#include \"include/cef_browser.h\"\n#include \"include/cef_command_line.h\"\n#include \"include/views/cef_browser_view.h\"\n#include \"include/views/cef_window.h\"\n#include \"include/wrapper/cef_helpers.h\"\n#include \"tests/cefsimple/simple_handler.h\"\n\nnamespace {\n\n// When using the Views framework this object provides the delegate\n// implementation for the CefWindow that hosts the Views-based browser.\nclass SimpleWindowDelegate : public CefWindowDelegate {\n public:\n  explicit SimpleWindowDelegate(CefRefPtr&lt;CefBrowserView&gt; browser_view)\n      : browser_view_(browser_view) {}\n\n  void OnWindowCreated(CefRefPtr&lt;CefWindow&gt; window) OVERRIDE {\n    // Add the browser view and show the window.\n    window-&gt;AddChildView(browser_view_);\n    window-&gt;Show();\n\n    // Give keyboard focus to the browser view.\n    browser_view_-&gt;RequestFocus();\n  }\n\n  void OnWindowDestroyed(CefRefPtr&lt;CefWindow&gt; window) OVERRIDE {\n    browser_view_ = NULL;\n  }\n\n  bool CanClose(CefRefPtr&lt;CefWindow&gt; window) OVERRIDE {\n    // Allow the window to close if the browser says it's OK.\n    CefRefPtr&lt;CefBrowser&gt; browser = browser_view_-&gt;GetBrowser();\n    if (browser)\n      return browser-&gt;GetHost()-&gt;TryCloseBrowser();\n    return true;\n  }\n\n  CefSize GetPreferredSize(CefRefPtr&lt;CefView&gt; view) OVERRIDE {\n    return CefSize(800, 600);\n  }\n\n private:\n  CefRefPtr&lt;CefBrowserView&gt; browser_view_;\n\n  IMPLEMENT_REFCOUNTING(SimpleWindowDelegate);\n  DISALLOW_COPY_AND_ASSIGN(SimpleWindowDelegate);\n};\n\n}  // namespace\n\nSimpleApp::SimpleApp() {}\n\nvoid SimpleApp::OnContextInitialized() {\n  CEF_REQUIRE_UI_THREAD();\n\n  CefRefPtr&lt;CefCommandLine&gt; command_line =\n      CefCommandLine::GetGlobalCommandLine();\n\n#if defined(OS_WIN) || defined(OS_LINUX)\n  // Create the browser using the Views framework if \"--use-views\" is specified\n  // via the command-line. Otherwise, create the browser using the native\n  // platform framework. The Views framework is currently only supported on\n  // Windows and Linux.\n  const bool use_views = command_line-&gt;HasSwitch(\"use-views\");\n#else\n  const bool use_views = false;\n#endif\n\n  // SimpleHandler implements browser-level callbacks.\n  CefRefPtr&lt;SimpleHandler&gt; handler(new SimpleHandler(use_views));\n\n  // Specify CEF browser settings here.\n  CefBrowserSettings browser_settings;\n\n  std::string url;\n\n  // Check if a \"--url=\" value was provided via the command-line. If so, use\n  // that instead of the default URL.\n  url = command_line-&gt;GetSwitchValue(\"url\");\n  if (url.empty())\n    url = \"http://www.google.com\";\n\n  if (use_views) {\n    // Create the BrowserView.\n    CefRefPtr&lt;CefBrowserView&gt; browser_view = CefBrowserView::CreateBrowserView(\n        handler, url, browser_settings, NULL, NULL, NULL);\n\n    // Create the Window. It will show itself after creation.\n    CefWindow::CreateTopLevelWindow(new SimpleWindowDelegate(browser_view));\n  } else {\n    // Information used when creating the native window.\n    CefWindowInfo window_info;\n\n#if defined(OS_WIN)\n    // On Windows we need to specify certain flags that will be passed to\n    // CreateWindowEx().\n    window_info.SetAsPopup(NULL, \"cefsimple\");\n#endif\n\n    // Create the first browser window.\n    CefBrowserHost::CreateBrowser(window_info, handler, url, browser_settings,\n                                  NULL, NULL);\n  }\n}\n\nvoid SimpleApp::OnContextCreated(CefRefPtr&lt;CefBrowser&gt; browser,\n        CefRefPtr&lt;CefFrame&gt; frame,\n        CefRefPtr&lt;CefV8Context&gt; context) {\n\n  // Retrieve the context's window object.\n   CefRefPtr&lt;CefV8Value&gt; object = context-&gt;GetGlobal();\n\n   // Create a new V8 string value. See the \"Basic JS Types\" section below.\n   CefRefPtr&lt;CefV8Value&gt; str = CefV8Value::CreateString(\"My Value!\");\n\n   // Add the string to the window object as \"window.myval\". See the \"JS Objects\" section below.\n   object-&gt;SetValue(\"myval\", str, V8_PROPERTY_ATTRIBUTE_NONE);\n\n}\n</code></pre>\n\n<p>And of course, the HTML to check if it's working.</p>\n\n<p>CEFTest.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;span id=\"thespan\"&gt;&lt;/span&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n\n        function SetValue(argument) {\n            document.getElementById( 'thespan' ).innerHTML = window.myval + 'hello'\n        }\n\n        window.addEventListener( 'load', SetValue )\n\n    &lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My understanding of Cef is only just now starting to really take shape. What it looks like I've had to do is pass CefRenderProcessHandler to the SimpleApp class in order to allow it access to all of the RenderProcessHandler's methods. Then I had to override OnContextCreated with my own version (as the original version is simply a placeholder function)</p>\n\n<p>Calling CefExecuteProcess serves, I think, to actually force the process to start. I could use some clarification on that.</p>\n"}, {"tags": ["c++", "cmake", "ros"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1571864144, "post_id": 58530851, "comment_id": 103385580, "body": "Perhaps provide the code for how you do handle the includes in <code>mspeed.cpp</code>"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1571864289, "post_id": 58530851, "comment_id": 103385632, "body": "Welcome to Stackoverflow! When you say &quot;<i>I tried several ways to include the library binary in my CMakeLists file</i>&quot;... can you add your CMake file to your question post? It is hard to provide potential solutions without seeing your code!"}, {"owner": {"reputation": 1, "user_id": 9776423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92fbc719f08b8bb27f594cab0d838a82?s=128&d=identicon&r=PG&f=1", "display_name": "jenerous", "link": "https://stackoverflow.com/users/9776423/jenerous"}, "edited": false, "score": 0, "creation_date": 1571915899, "post_id": 58530851, "comment_id": 103402220, "body": "thanks for the kind replies so far. I added the codes"}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1572211972, "post_id": 58530851, "comment_id": 103481415, "body": "Are you trying to use robotcontrol from directions or mspeed (or both)? Did you solve your issue?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9776423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92fbc719f08b8bb27f594cab0d838a82?s=128&d=identicon&r=PG&f=1", "display_name": "jenerous", "link": "https://stackoverflow.com/users/9776423/jenerous"}, "is_accepted": true, "score": 0, "last_activity_date": 1573987564, "creation_date": 1573987564, "answer_id": 58899697, "question_id": 58530851, "link": "https://stackoverflow.com/questions/58530851/using-robotcontrol-library-in-ros-node-on-beagle-bone-blue/58899697#58899697", "title": "Using Robotcontrol library in ROS node on Beagle Bone Blue", "body": "<p>Thanks for the support. Basically I had a missunderstanding of the linking process.\nOne has to add the library first, which can be done with the existing shared object file:</p>\n\n<pre><code>add_library(librobotcontrol SHARED IMPORTED GLOBAL)\nset_target_properties(librobotcontrol PROPERTIES IMPORTED_LOCATION /usr/lib/librobotcontrol.so)\n</code></pre>\n\n<p>So far so good... all left to do now is to link the file I want to use the library in, against my typical libraries <strong><em>plus</em></strong> the newly added one:</p>\n\n<pre><code>target_link_libraries(mspeed ${catkin_LIBRARIES} robotcontrol)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9776423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92fbc719f08b8bb27f594cab0d838a82?s=128&d=identicon&r=PG&f=1", "display_name": "jenerous", "link": "https://stackoverflow.com/users/9776423/jenerous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 58899697, "answer_count": 1, "score": 0, "last_activity_date": 1573987564, "creation_date": 1571864016, "last_edit_date": 1571915835, "question_id": 58530851, "link": "https://stackoverflow.com/questions/58530851/using-robotcontrol-library-in-ros-node-on-beagle-bone-blue", "title": "Using Robotcontrol library in ROS node on Beagle Bone Blue", "body": "<p>I'm trying to compile a ROS node, where a use the robotcontrol header as an extern \"C\" include in my C++ code. \nCompiling fails at the point, where it can not find the references to several functions of the robotcontrol library that I use (e.g.:)</p>\n\n<pre><code>mspeed.cpp:(.text+0x798): undefined reference to `rc_uart_write'\nmspeed.cpp:(.text+0x7ba): undefined reference to `rc_uart_flush'\nmspeed.cpp:(.text+0x7ce): undefined reference to `rc_uart_write'\n</code></pre>\n\n<p>I tried several ways to include the library binary in my CMakeLists file that I compile using catkin_make.\nDid anyone use C code (as binary not from source) within a ROS node before? It might be that I leak knowledge on C and C++ or compiling with cmake in general, so I'm happy for any advice.</p>\n\n<p>All I found so far has used the raw c files.</p>\n\n<p>So this is how I include the library:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\"\n{\n#endif\n#include &lt;robotcontrol.h&gt; // includes ALL Robot Control subsystems\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>I'm calling the functions then like here:</p>\n\n<pre><code>rc_uart_write(bus, (uint8_t*)data[bus2mem(bus)], data_count[bus2mem(bus)]);\n</code></pre>\n\n<p>The code itself works, when I use it just as a C code. But I need to include it into the ROS node. <strong>To compile the plain C version</strong> I have another Makefile that comes along with the robotcontrol library. Do I need to provide some other compile flags to my solution?:</p>\n\n<pre><code># This is a general use makefile for librobotcontrol projects written in C.\n# Just change the target name to match your main source code filename.\nTARGET = driver_communication\n\n# compiler and linker binaries\nCC      := gcc\nLINKER      := gcc\n\n# compiler and linker flags\nWFLAGS      := -Wall -Wextra -Werror=float-equal -Wuninitialized -Wunused-variable -Wdouble-promotion\nCFLAGS      := -g -c -Wall\nLDFLAGS     := -pthread -lm -lrt -l:librobotcontrol.so.1\n\nSOURCES     := $(wildcard *.c)\nINCLUDES    := $(wildcard *.h)\nOBJECTS     := $(SOURCES:$%.c=$%.o)\n\nprefix      := /usr/local\nRM      := rm -f\nINSTALL     := install -m 4755\nINSTALLDIR  := install -d -m 755\n\nSYMLINK     := ln -s -f\nSYMLINKDIR  := /etc/robotcontrol\nSYMLINKNAME := link_to_startup_program\n\n\n# linking Objects\n$(TARGET): $(OBJECTS)\n    @$(LINKER) -o $@ $(OBJECTS) $(LDFLAGS)\n    @echo \"Made: $@\"\n\n\n# compiling command\n$(OBJECTS): %.o : %.c $(INCLUDES)\n    @$(CC) $(CFLAGS) $(WFLAGS) $(DEBUGFLAG) $&lt; -o $@\n    @echo \"Compiled: $@\"\n\nall:    $(TARGET)\n\ndebug:\n    $(MAKE) $(MAKEFILE) DEBUGFLAG=\"-g -D DEBUG\"\n    @echo \" \"\n    @echo \"$(TARGET) Make Debug Complete\"\n    @echo \" \"\n\ninstall:\n    @$(MAKE) --no-print-directory\n    @$(INSTALLDIR) $(DESTDIR)$(prefix)/bin\n    @$(INSTALL) $(TARGET) $(DESTDIR)$(prefix)/bin\n    @echo \"$(TARGET) Install Complete\"\n\nclean:\n    @$(RM) $(OBJECTS)\n    @$(RM) $(TARGET)\n    @echo \"$(TARGET) Clean Complete\"\n\nuninstall:\n    @$(RM) $(DESTDIR)$(prefix)/bin/$(TARGET)\n    @echo \"$(TARGET) Uninstall Complete\"\n\nrunonboot:\n    @$(MAKE) install --no-print-directory\n    @$(SYMLINK) $(DESTDIR)$(prefix)/bin/$(TARGET) $(SYMLINKDIR)/$(SYMLINKNAME)\n    @echo \"$(TARGET) Set to Run on Boot\"\n\n</code></pre>\n\n<p>My CMakeLists.txt file looks like this at the moment (not including any link to the robotcontrol library explicitly:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.3)\nproject(indoor_navigation)\n\nfind_package(catkin REQUIRED COMPONENTS\n  message_generation\n  message_runtime\n  roscpp\n  rospy\n  sensor_msgs\n  std_msgs\n)\n\n## Generate messages in the 'msg' folder\nadd_message_files(\n    FILES\n    Directions.msg\n)\n\n## Generate added messages and services with any dependencies listed here\ngenerate_messages(\n  DEPENDENCIES\n  sensor_msgs\n  std_msgs\n)\n\ncatkin_package(\n  LIBRARIES indoor_navigation\n)\n\n\n## Specify additional locations of header files\n## Your package locations should be listed before other locations\ninclude_directories(\n  # include\n  ${catkin_INCLUDE_DIRS}\n)\nadd_executable(directions src/directions.cpp)\nadd_executable(mspeed src/mspeed.cpp)\n\nadd_dependencies(directions ${${PROJECT_NAME}_EXPORTED_TARGETS} ${catkin_EXPORTED_TARGETS})\nadd_dependencies(directions ${PROJECT_NAME}_gencfg)\nadd_dependencies(directions ${PROJECT_NAME}_generate_messages_cpp)\n\nadd_dependencies(mspeed ${${PROJECT_NAME}_EXPORTED_TARGETS} ${catkin_EXPORTED_TARGETS})\nadd_dependencies(mspeed ${PROJECT_NAME}_gencfg)\nadd_dependencies(mspeed ${PROJECT_NAME}_generate_messages_cpp)\n\ntarget_link_libraries(directions ${catkin_LIBRARIES})\ntarget_link_libraries(mspeed ${catkin_LIBRARIES})\n</code></pre>\n\n<p>I tried to include the lib in my CMakeLists with an</p>\n\n<pre><code>add_executable(robotcontrol /usr/lib/robotcontrol)\n</code></pre>\n\n<p>which however expects a source file</p>\n\n<p>I tried several ways of </p>\n\n<pre><code>target_link_libraries(...)\n</code></pre>\n\n<p>to be honest, I tried that many versions that I don't know which ones and I know this makes helping for you guys much harder. So I keep trying and collect these.</p>\n"}, {"tags": ["c++", "voting", "voting-system"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1571863864, "post_id": 58530801, "comment_id": 103385481, "body": "Do you know how to convert individual values that comprise a total into percentages, purely as a mathematical process? If you don&#39;t, then this has nothing to do with C++ or programming, you need to learn how to do that first. If you do, then you simply do the same thing in C++. What exactly is your specific question, related to C++?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1571864552, "post_id": 58530801, "comment_id": 103385706, "body": "Warning: <code>ofstream VotingResults (&quot;results.txt&quot;, ios::app);</code> opened <code>VotingResults</code>. <code>VotingResults.open(&quot;results.txt&quot;);</code> opens the file again. You probably don&#39;t want to do that."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1571869013, "post_id": 58530801, "comment_id": 103387061, "body": "Need more code.  Is <code>Jessica</code> a variable?  Is it  an <code>enum</code>?  Is it a constant?"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1571869441, "creation_date": 1571869441, "answer_id": 58531711, "question_id": 58530801, "link": "https://stackoverflow.com/questions/58530801/how-to-get-results-from-txt-file-and-then-sum-it/58531711#58531711", "title": "How to get results from txt file and then sum it?", "body": "<p>I recommend using <code>std::map</code> for this:  </p>\n\n<pre><code>std::map&lt;std::string, int&gt; database;\n//...\nstd::string voter_name;\nstd::int    voter_number;\nwhile (std::getline(Voting_Results, voter_name, ':'))\n{\n   Voting_Results &gt;&gt; voter_number;\n   if (database.find(voter_name) != database.end())\n   {\n       database[voter_name]++;\n   }\n   else\n   {\n       database[voter_name] = 0;\n   }\n}\n</code></pre>\n\n<p>If the name exists in the map, the value field is incremented.  The value field will represent the number of votes (or occurrences).  </p>\n\n<p>The number associated with the voter is read, but not used, in order to keep the reading synchronized.  </p>\n"}], "owner": {"reputation": 3, "user_id": 6273924, "user_type": "registered", "profile_image": "https://graph.facebook.com/850712538407914/picture?type=large", "display_name": "Nastya  Osipchuk", "link": "https://stackoverflow.com/users/6273924/nastya-osipchuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571869441, "creation_date": 1571863680, "question_id": 58530801, "link": "https://stackoverflow.com/questions/58530801/how-to-get-results-from-txt-file-and-then-sum-it", "title": "How to get results from txt file and then sum it?", "body": "<p>I'm writing an electronic voting system and in the end, I want to show on the screen percentage results, not the numbers for candidates. So I collected everything in a file. It looks like this: \"results.txt\"</p>\n\n<p>Jessica: 2</p>\n\n<p>Amanda: 3</p>\n\n<p>Michael: 0</p>\n\n<p>Sam: 0</p>\n\n<p>Alex: 1</p>\n\n<p>Nancy: 0</p>\n\n<p>and after that can I take these numbers to sum them and convert to a percentage? I don't know how to realize that.</p>\n\n<p>This is the part of the program:</p>\n\n<pre><code>ofstream VotingResults (\"results.txt\", ios::app);\n\ncout&lt;&lt;\"Please enter a number for whom you give your vote: \";\n\n        cin &gt;&gt; choice;\n\n          switch (choice)\n          {\n                 case 1: \n                      Vote(Jessica);\n                      cout&lt;&lt;\"Press any button to get the results\";\n                      break;\n                 case 2:\n                      Vote(Amanda);\n                        cout&lt;&lt;\"Press any button to get the results\";\n                      break;\n                 case 3:\n                      Vote(Michael);\n                      cout&lt;&lt;\"Press any button to get the results\";\n                      break;\n                 case 4:\n                        Vote(Sam);\n                        cout&lt;&lt;\"Press any button to get the results\";\n                        break;\n                case 5:\n                        Vote(Alex);\n                        cout&lt;&lt;\"Press any button to get the results\";\n                        break;\n                case 6:\n                        Vote(Nancy);\n                        cout&lt;&lt;\"Press any button to get the results\";\n\n                        break;\n                default:\n                    cout&lt;&lt;\"Invalid number! Press any button to get the results\";\n                        break;\n                    }\n\n    VotingResults.open(\"results.txt\");\n          VotingResults &lt;&lt; \"Jessica: \" &lt;&lt; Jessica &lt;&lt; endl\n                 &lt;&lt; \"Amanda: \" &lt;&lt; Amanda &lt;&lt; endl\n                 &lt;&lt; \"Michael: \" &lt;&lt; Michael &lt;&lt; endl\n                 &lt;&lt; \"Sam: \" &lt;&lt; Sam &lt;&lt; endl\n                 &lt;&lt; \"Alex: \" &lt;&lt; Alex &lt;&lt; endl\n                 &lt;&lt; \"Nancy: \" &lt;&lt; Nancy &lt;&lt; endl;\n          VotingResults.close();\n\n\nvoid Vote(int &amp;a)\n{\n     a += 1;\n     cout &lt;&lt; \"\\n\\t\\tThank you for your vote! \";\n}\n</code></pre>\n"}, {"tags": ["c++", "networking", "tcp", "udp"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1571865036, "post_id": 58530744, "comment_id": 103385876, "body": "It doesn&#39;t mess with that. Multihoming has been working for nearly 40 years. Do the failing clients get an error? If so what?"}, {"owner": {"reputation": 1, "user_id": 12265311, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCLMgPOcjSpJAiUq7Yb5lz7O_Kk0KjXuL5VcV3iNY=k-s128", "display_name": "Hayden Hotham", "link": "https://stackoverflow.com/users/12265311/hayden-hotham"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1572020139, "post_id": 58530744, "comment_id": 103443246, "body": "@user207421 The listener never receives an error since it never detects the comms. The device gets this as an error: &quot;No connection could be made because the target machine actively refused it.&quot; That error generally just appears if no server is running."}, {"owner": {"reputation": 1, "user_id": 12265311, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCLMgPOcjSpJAiUq7Yb5lz7O_Kk0KjXuL5VcV3iNY=k-s128", "display_name": "Hayden Hotham", "link": "https://stackoverflow.com/users/12265311/hayden-hotham"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1572034006, "post_id": 58530744, "comment_id": 103448697, "body": "Just tested it again and it&#39;s getting &quot;SocketException System.Net.Sockets.SocketException (0x80004005): Connection timed out&quot;"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1572651518, "post_id": 58530744, "comment_id": 103636899, "body": "So something changed. Connection refused means nothing was listening at the port. Time out means the target didn&#39;t respond at all. NB You aren&#39;t connecting to 0.0.0.. The target is listening at 0.0.0.0, which just means all interfaces, but the IP address you supplied when connecting want 0.0.0.0."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12265311, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCLMgPOcjSpJAiUq7Yb5lz7O_Kk0KjXuL5VcV3iNY=k-s128", "display_name": "Hayden Hotham", "link": "https://stackoverflow.com/users/12265311/hayden-hotham"}, "is_accepted": false, "score": 0, "last_activity_date": 1572643191, "creation_date": 1572643191, "answer_id": 58666035, "question_id": 58530744, "link": "https://stackoverflow.com/questions/58530744/connecting-through-tcp-to-0-0-0-0-on-wi-fi-while-the-listener-pc-has-active-wi-f/58666035#58666035", "title": "Connecting through TCP to 0.0.0.0 on Wi-Fi while the listener PC has active Wi-Fi and Ethernet doesn&#39;t work", "body": "<p>When I connected Ethernet, it reset my Wi-Fi to a public Wi-Fi rather than private. That didn't allow the TCP connection because sharing was now disabled. Though it allowed a UDP connection, which is interesting to me. So if you run into this, make sure your Wi-Fi has network sharing on!</p>\n"}], "owner": {"reputation": 1, "user_id": 12265311, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCLMgPOcjSpJAiUq7Yb5lz7O_Kk0KjXuL5VcV3iNY=k-s128", "display_name": "Hayden Hotham", "link": "https://stackoverflow.com/users/12265311/hayden-hotham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1572643224, "creation_date": 1571863415, "last_edit_date": 1572643224, "question_id": 58530744, "link": "https://stackoverflow.com/questions/58530744/connecting-through-tcp-to-0-0-0-0-on-wi-fi-while-the-listener-pc-has-active-wi-f", "title": "Connecting through TCP to 0.0.0.0 on Wi-Fi while the listener PC has active Wi-Fi and Ethernet doesn&#39;t work", "body": "<p>I'm creating a TCP connection from a device on Wi-Fi to a computer that's listening on port 0.0.0.0:44440.</p>\n\n<p>When I am only on Wi-Fi, the device is able to connect without a problem. When I enable / plug in Ethernet, the listener never accepts the device's connection request. (Wi-Fi is still connected throughout this process. Checked by ipconfig)</p>\n\n<p>I'm using C++, and the command looks like this:</p>\n\n<p><code>handle = (int)accept(listening_socket-&gt;handle, (struct sockaddr *)&amp;address, &amp;addrlen);</code></p>\n\n<p>The command gets a handle when a device connects if both are on Wi-Fi only, but continues blocking if the listener is on both Ethernet and Wi-Fi.</p>\n\n<p>0.0.0.0 is supposed to be interface-ambiguous, so it should accept connections from both Ethernet (192.168.x.x) and Wi-Fi (10.161.x.x), but it seems to 'attach' to the interface that is giving the best internet. Checking using \"netstat -an\", there is an active listener on 0.0.0.0:44440 using each method.</p>\n\n<p>Anyone a pro at networking and know why having multiple running interfaces messes with this?</p>\n\n<p>.</p>\n\n<p><strong>Extra Info</strong></p>\n\n<p>I have done many checks to make sure Wi-Fi and Ethernet are enabled. I am running a UDP broadcast over both interfaces that tells devices to connect to the local computer. So the broadcast contains a message of \"192.168.x.x:44440\" for devices running on local network and \"10.161.x.x:44440\" for devices running on Wi-Fi. The device picks up this message and then tries to form a TCP connection on \"10.161.x.x:44440.\" When the computer is only connected through Wi-Fi, connecting like this works. When it's connected through both, the listener running on port 44440 never detects when the device connects. It will still connect local programs running on the same machine from either IP.</p>\n\n<p>Also note, my Ethernet is not the same network as my Wi-Fi (for security reasons). So each network has separate properties</p>\n"}, {"tags": ["c++", "shared-ptr"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1571862908, "creation_date": 1571862908, "answer_id": 58530636, "question_id": 58530596, "link": "https://stackoverflow.com/questions/58530596/why-can-i-modify-an-object-through-a-raw-pointer-but-not-a-shared-ptr/58530636#58530636", "title": "Why can I modify an object through a raw pointer but not a shared_ptr?", "body": "<p>In the first block, the <code>shared_ptr</code> points to a copy of <code>foo</code>.<br>\nIn the second block, the pointer points to <code>foo</code>.</p>\n\n<p>You can verify that by using:</p>\n\n<pre><code>std::cout &lt;&lt; \"Address of foo: \" &lt;&lt; &amp;foo &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"Pointer from shared_ptr: \" &lt;&lt; ptrfoo-&gt;get() &lt;&lt; std::endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 12265372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae427f2ede750694264e7120799b3f7d?s=128&d=identicon&r=PG&f=1", "display_name": "Khanoa", "link": "https://stackoverflow.com/users/12265372/khanoa"}, "edited": false, "score": 0, "creation_date": 1571863141, "post_id": 58530647, "comment_id": 103385183, "body": "So should I just use raw pointers in this case or is there a better solution?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3, "user_id": 12265372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae427f2ede750694264e7120799b3f7d?s=128&d=identicon&r=PG&f=1", "display_name": "Khanoa", "link": "https://stackoverflow.com/users/12265372/khanoa"}, "edited": false, "score": 1, "creation_date": 1571863211, "post_id": 58530647, "comment_id": 103385223, "body": "@Khanoa is there any need for the pointer at all? You may be able to pass a reference to <code>foo</code> around."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 3, "user_id": 12265372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae427f2ede750694264e7120799b3f7d?s=128&d=identicon&r=PG&f=1", "display_name": "Khanoa", "link": "https://stackoverflow.com/users/12265372/khanoa"}, "edited": false, "score": 1, "creation_date": 1571863217, "post_id": 58530647, "comment_id": 103385226, "body": "@Khanoa That depends entirely on the use case.  I can&#39;t really make any suggestions without seeing what your code is doing."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571864218, "post_id": 58530647, "comment_id": 103385600, "body": "I&#39;d say this is tangent to the answer. The real issue is simply that they mis-used <code>std::make_shared</code>. You give it constructor parameters that allow the object to be constructed directly into the <code>shared_ptr</code>, and in passing <code>foo</code>, they just invoked the copy constructor (That&#39;s the matching constructor). If they just wanted a shared pointer to a default Foo, <code>std::make_shared&lt;Foo&gt;()</code> would have sufficed."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571864969, "post_id": 58530647, "comment_id": 103385861, "body": "@sweenish They wanted the <code>shared_ptr</code> to point to <code>foo</code>, that&#39;s why they passed <code>foo</code> to <code>make_shared</code>."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571865148, "post_id": 58530647, "comment_id": 103385917, "body": "<b>&quot;My goal is to modify a Foo object through a pointer&quot;</b> The MRE is just that. It still wouldn&#39;t change the fact that you barely mentioned the actual issue with their code. I&#39;m also just noticing the last bit of your answer. I disagree with that as well. They act like raw pointers just fine for the basic operations."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571865690, "post_id": 58530647, "comment_id": 103386094, "body": "I missed the &quot;like so,&quot; so I get how it can be they want that foo specifically. In that case, I think I&#39;d forego <code>std::make_shared</code> altogether. <code>auto ptrFoo = std::shared_ptr&lt;Foo&gt;(&amp;foo);</code> I do still stand by my original point that the answer doesn&#39;t actually catch what&#39;s wrong with the code in the question, though."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571865773, "post_id": 58530647, "comment_id": 103386117, "body": "@sweenish <code>auto ptrFoo = std::shared_ptr&lt;Foo&gt;(&amp;foo);</code> is going to explode on you.  When <code>ptrFoo</code> goes out of scope it is going to try and delete a stack pointer."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571866531, "post_id": 58530647, "comment_id": 103386360, "body": "That&#39;s on the MRE. I obviously prefer <code>std::make_shared</code>, but if that&#39;s really what they want, then those are the consequences. It fits, then, that the better answer is to explain not just a smart pointer is, but how they should have properly used <code>std::make_shared</code>."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1572107127, "post_id": 58530647, "comment_id": 103461676, "body": "&quot;owning pointers&quot; no, classes that somehow simulate ptr syntaxes; I <i>hate</i> that &quot;smart ptr&quot; terminology (like &quot;copy elision&quot;) but I guess we are stuck with it."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1571862977, "creation_date": 1571862977, "answer_id": 58530647, "question_id": 58530596, "link": "https://stackoverflow.com/questions/58530596/why-can-i-modify-an-object-through-a-raw-pointer-but-not-a-shared-ptr/58530647#58530647", "title": "Why can I modify an object through a raw pointer but not a shared_ptr?", "body": "<p>Smart pointers are owning pointers.  Because they own the memory they point to when you do</p>\n\n<pre><code>std::shared_ptr&lt;Foo&gt; ptrfoo = std::make_shared&lt;Foo&gt;(foo);\n</code></pre>\n\n<p>you don't get a pointer to <code>foo</code> but instead you get a pointer to an object that is a copy of <code>foo</code>.  Anything you do to <code>ptrfoo</code> will not effect <code>foo</code>.  This is one of the main differences between raw pointers and smart pointers.  You can get a smart pointer to act like a raw pointer, but that is a lot of work and non owning raw pointers are okay so it's not really worth trying to modify smart pointers to get that behavior.</p>\n"}], "owner": {"reputation": 3, "user_id": 12265372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae427f2ede750694264e7120799b3f7d?s=128&d=identicon&r=PG&f=1", "display_name": "Khanoa", "link": "https://stackoverflow.com/users/12265372/khanoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "accepted_answer_id": 58530647, "answer_count": 2, "score": 0, "last_activity_date": 1571863071, "creation_date": 1571862757, "last_edit_date": 1571863071, "question_id": 58530596, "link": "https://stackoverflow.com/questions/58530596/why-can-i-modify-an-object-through-a-raw-pointer-but-not-a-shared-ptr", "title": "Why can I modify an object through a raw pointer but not a shared_ptr?", "body": "<p>So, I would like to use a function that modifies an object through a <code>shared_ptr</code>.</p>\n\n<p>I've got this class <code>Foo</code>:</p>\n\n<pre><code>class Foo\n{\nprivate:\n    bool i = false;\n\npublic:\n    void activate()\n    {\n        i = true;\n    }\n\n    bool isActive()\n    {\n        return i;\n    }\n};\n</code></pre>\n\n<p>Nothing too fancy. My goal is to modify a <code>Foo</code> object through a pointer, like so:</p>\n\n<pre><code>Foo foo;\n\nstd::shared_ptr&lt;Foo&gt; ptrfoo = std::make_shared&lt;Foo&gt;(foo);\nptrfoo-&gt;activate();\n\n// \"foo.isActive\" returns false here\n</code></pre>\n\n<p>Sadly, <code>foo.isActive</code> returns <code>false</code> when I want it to return <code>true</code>. But the thing is, it works with raw pointers:</p>\n\n<pre><code>Foo foo;\n\nFoo* ptrfoo = &amp;foo;\nptrfoo-&gt;activate();\n\n// \"foo.isActive\" returns true here\n</code></pre>\n\n<p>So why does that happen, and can I modify the object through a <code>shared_ptr</code>? If so, how can I do that?</p>\n"}, {"tags": ["c++", "c", "pointers", "memory", "memory-leaks"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1571862909, "post_id": 58530570, "comment_id": 103385083, "body": "What exactly do you expect to &quot;leak&quot;, here? You appear to be operating under a misunderstanding that you must always <code>free</code> after using a pointer. This is incorrect. You must always <code>free</code> everything that was <code>malloc</code>ed, at some point. Nothing more, nothing less. I don&#39;t see any <code>malloc</code>ing going on in the shown code, so there&#39;s nothing to <code>free</code> here."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1571862912, "post_id": 58530570, "comment_id": 103385085, "body": "Your variable is a <i>local copy</i> of the struct. It has automatic storage duration. Your code is also bad because it is probably a needless copy."}, {"owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1571863282, "post_id": 58530570, "comment_id": 103385260, "body": "@SamVarshavchik That&#39;s the point of asking a question... I was probably misunderstanding/missing something. Thanks for your comment, seem pretty obvious now."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1571863337, "post_id": 58530570, "comment_id": 103385281, "body": "kind of &lt;O/T&gt;, since speed seems to be a concern for you, you should probably pass a pointer to <code>st_displayLines</code> to <code>updateScreen</code>, like this: <code>void updateScreen(const st_displayLines* st_toDisplay);</code> As is, each time you call that function, a copy of the entire structure is made, which will take a little extra time. However, there&#39;s not enough code to know if that&#39;s really what you want/need. With a pointer, only the pointer is copied, which is less data than the overall struct."}, {"owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1571863479, "post_id": 58530570, "comment_id": 103385338, "body": "@yano I am passing the struct as value, so indeed I loose time copying the whole memory to the argument. Thanks for the advice, I&#39;ll change to pass just a pointer for the first element of the struct."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1571863680, "post_id": 58530570, "comment_id": 103385412, "body": "Any particular reason you&#39;re using a struct instead of a 2D array for everything, i.e. <code>char st_toDisplay[6][13]</code>?  it would make it easier to index the rows and columns."}, {"owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1571863947, "post_id": 58530570, "comment_id": 103385519, "body": "@dbush Well noticed, backward compatibility is the reason. One of the reasons for the pointer is for making easier the indexing part of it."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1571862939, "creation_date": 1571862939, "answer_id": 58530644, "question_id": 58530570, "link": "https://stackoverflow.com/questions/58530570/memory-leakage-when-accessing-using-pointer-elements-from-a-struct-received-by/58530644#58530644", "title": "Memory Leakage when accessing, using pointer, elements from a struct received by argument", "body": "<p>Memory leaks happen when memory allocated with <code>malloc</code> no longer has a pointer pointing to it and the memory is not free'ed.  The code as you've shown it doesn't allocate memory, so there's no leak.  </p>\n\n<p>Simply using a pointer variable is no different from using an <code>int</code>.  The variable is in scope at the point it is declared and goes out of scope at the end of the enclosing compound statement.  So no need to free anything.</p>\n"}], "owner": {"reputation": 182, "user_id": 8547802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcBka.jpg?s=128&g=1", "display_name": "Gabriel Magri", "link": "https://stackoverflow.com/users/8547802/gabriel-magri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571862939, "creation_date": 1571862633, "question_id": 58530570, "link": "https://stackoverflow.com/questions/58530570/memory-leakage-when-accessing-using-pointer-elements-from-a-struct-received-by", "title": "Memory Leakage when accessing, using pointer, elements from a struct received by argument", "body": "<p><strong>A little of context:</strong> I have recently developed a generic function to update a display image based just on which parts of it have changed. For that I receive as parameter a known struct which members are arrays of chars (display lines) and I compare it to the currently displayed information in order to update just the necessary, improving the performance. It is an embedded system for arm cortex-m0 in case it matters.\nBelow is the code code snippet for the struct.</p>\n\n<pre><code>struct displayLines {\n    char firstLine[13];\n    char secondLine[13];\n    char thirdLine[13];\n    char fourthLine[13];\n    char fivethLine[13];\n    char sixthLine[13];\n};\ntypedef struct displayLines st_displayLines;\n</code></pre>\n\n<p>Based on that struct I use a pointer, initialized with the first element address and operate with it to access the whole struct data (all lines). Below is the code snippet showing how I initialize the pointer.</p>\n\n<pre><code>void updateScreen(st_displayLines st_toDisplay)\n{\n    char *ptrtoUpdate  = st_toDisplay.firstLine;\n    char *ptrDisplayed = st_currentlyDisplayed.firstLine;\n\n    //Here is the update code which consumes the pointers.\n}\n</code></pre>\n\n<p>After operating with the same pointer variable (using arithmetic over it) and consuming its data I just return from the function, without using calling <b>free</b> operation over the pointer variable. \n<br><br><strong>The question finally is:</strong>\n<br>Is this a memory leakage? Or the allocated memory for creating the pointers will be released once I'm outside the function scope?\n<br>If it is a leakage, would it hold 1 byte per each pointer variable of my memory every time I call this function? In a manner that (making numbers now) if I have just 10 bytes of memory available, on the 6th call of the function my program would crash?</p>\n"}, {"tags": ["c++", "graph-theory", "breadth-first-search", "graph-traversal"], "comments": [{"owner": {"reputation": 360, "user_id": 12233973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoF3C.jpg?s=128&g=1", "display_name": "c_sagan", "link": "https://stackoverflow.com/users/12233973/c-sagan"}, "edited": false, "score": 0, "creation_date": 1571862665, "post_id": 58530532, "comment_id": 103384972, "body": "What is the variable <code>n</code> assigned?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1571862684, "post_id": 58530532, "comment_id": 103384982, "body": "Did you know there is a <a href=\"https://en.cppreference.com/w/cpp/container/queue\" rel=\"nofollow noreferrer\">std::queue</a>?  Also please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 13, "user_id": 12021984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5amLqS2wxx8/AAAAAAAAAAI/AAAAAAAAAIA/gAAgzV3ZbWI/photo.jpg?sz=128", "display_name": "Im retarded but", "link": "https://stackoverflow.com/users/12021984/im-retarded-but"}, "reply_to_user": {"reputation": 360, "user_id": 12233973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoF3C.jpg?s=128&g=1", "display_name": "c_sagan", "link": "https://stackoverflow.com/users/12233973/c-sagan"}, "edited": false, "score": 0, "creation_date": 1571862711, "post_id": 58530532, "comment_id": 103384993, "body": "@c_sagan Number of nodes"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 1, "creation_date": 1571862767, "post_id": 58530532, "comment_id": 103385015, "body": "vis[v] == true;"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1571862799, "post_id": 58530532, "comment_id": 103385032, "body": "@Imretardedbut -- <code>bool vis[n];</code> -- If <code>n</code> is not a constant, then that code is not valid C++.  Use <code>std::vector</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12021984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5amLqS2wxx8/AAAAAAAAAAI/AAAAAAAAAIA/gAAgzV3ZbWI/photo.jpg?sz=128", "display_name": "Im retarded but", "link": "https://stackoverflow.com/users/12021984/im-retarded-but"}, "edited": false, "score": 0, "creation_date": 1571863054, "post_id": 58530613, "comment_id": 103385147, "body": "Thanks for the help. I was trying to implement everything from scratch for better understanding"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 13, "user_id": 12021984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5amLqS2wxx8/AAAAAAAAAAI/AAAAAAAAAIA/gAAgzV3ZbWI/photo.jpg?sz=128", "display_name": "Im retarded but", "link": "https://stackoverflow.com/users/12021984/im-retarded-but"}, "edited": false, "score": 0, "creation_date": 1571863091, "post_id": 58530613, "comment_id": 103385162, "body": "No problem @Imretardedbut, practice is good! :) If my answer solved your issue, you can accept it if you want."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 0, "last_activity_date": 1571862796, "creation_date": 1571862796, "answer_id": 58530613, "question_id": 58530532, "link": "https://stackoverflow.com/questions/58530532/breadth-first-search-stuck-in-infinite-loop/58530613#58530613", "title": "Breadth first search stuck in infinite loop", "body": "<p>Change this:</p>\n\n<pre><code>vis[v] == true;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>vis[v] = true;\n</code></pre>\n\n<p>since you want to mark the adjacent node <code>v</code> as visited, by assigning it the value true - you mistakenly used the comparison operator instead of the assignment operator, so you keep and keep visiting nodes that you already traversed, again and again, going into an infinite loop..</p>\n\n<p>PS: Not the cause of the infinite loop, but as @PaulMcKenzie commented, you could/should use an <a href=\"http://www.cplusplus.com/reference/queue/queue/\" rel=\"nofollow noreferrer\"><code>std::queue</code></a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 12021984, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5amLqS2wxx8/AAAAAAAAAAI/AAAAAAAAAIA/gAAgzV3ZbWI/photo.jpg?sz=128", "display_name": "Im retarded but", "link": "https://stackoverflow.com/users/12021984/im-retarded-but"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1571869859, "accepted_answer_id": 58530613, "answer_count": 1, "score": 0, "last_activity_date": 1571862931, "creation_date": 1571862442, "last_edit_date": 1571862931, "question_id": 58530532, "link": "https://stackoverflow.com/questions/58530532/breadth-first-search-stuck-in-infinite-loop", "closed_reason": "Not suitable for this site", "title": "Breadth first search stuck in infinite loop", "body": "<p>I am trying to implement breadth first search algorithm but due to some reasons it is getting stuck in infinite loop.</p>\n\n<p>I have tried debugging it by outputting various values but still no success.</p>\n\n<p>My Bfs Code</p>\n\n<pre><code>\n    int s=0;\n    bool vis[n];\n    int dist[n];\n\n    for(int i=0;i&lt;n;i++){\n        vis[i]=false;\n        dist[i]=INT_MAX;\n    }\n\n    dist[s]=0;\n    vis[s]=true;\n    q_push(s);\n\n\n\n    while(!q_isEmpty()){\n        int u = queu[0];\n        for(int v=0;v&lt;n;v++){\n            if(adjMat[u][v]==1){\n                if(vis[v]==false){\n                    vis[v] == true;\n                    dist[v]=dist[u]+1;\n                    q_push(v);\n                    cout&lt;&lt;v;\n                }\n            }\n        }\n\n        q_pop();\n\n\n    }\n\n</code></pre>\n\n<p>My queue is globally declared its code</p>\n\n<pre><code>vector &lt;int&gt; queu;\n\nvoid q_push(int d){\n    queu.insert(queu.end(),d);\n\n}\n\nvoid q_pop(){\n    queu.erase(queu.begin());\n}\n\nbool q_isEmpty(){\n    return queu.empty();\n}\n\n</code></pre>\n\n<p>I take adjacency matrix as input its code.</p>\n\n<pre><code>int n;\ncin&gt;&gt;n;\nfor(int i=0;i&lt;n;i++){\n    for(int j=0;j&lt;n;j++){\n        int temp;\n        cin&gt;&gt;temp;\n        adjMat[i][j]=temp;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "linux"], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 1156145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mNDqY.png?s=128&g=1", "display_name": "codentary", "link": "https://stackoverflow.com/users/1156145/codentary"}, "edited": false, "score": 0, "creation_date": 1571863575, "post_id": 58530620, "comment_id": 103385377, "body": "Thank you, that works, but I cannot help but feel like this is a hack. I do not understand why the child process is signaled, as the user is not even aware there is another process running. He presses ctrl+c to exit the parent. Anyway, would peopen() behave the same?"}, {"owner": {"reputation": 573, "user_id": 1156145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mNDqY.png?s=128&g=1", "display_name": "codentary", "link": "https://stackoverflow.com/users/1156145/codentary"}, "edited": false, "score": 0, "creation_date": 1571863813, "post_id": 58530620, "comment_id": 103385460, "body": "Plus, in my case, I will have several threads that might be stuck in a system() call. Will all of the children get signaled?"}, {"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1571864119, "post_id": 58530620, "comment_id": 103385573, "body": "Ctrl-C sends the signal to all processes in the foreground process group."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 2, "last_activity_date": 1571862842, "creation_date": 1571862842, "answer_id": 58530620, "question_id": 58530499, "link": "https://stackoverflow.com/questions/58530499/sigint-ignored-while-calling-system3/58530620#58530620", "title": "SIGINT ignored while calling system(3)", "body": "<p>Your process has those signals blocked so that when the user presses Ctrl-C <code>ping</code> will be killed without your program also being killed.</p>\n\n<p>If you <em>want</em> your program to be killed you can check <code>system()</code>'s return value and see if <code>ping</code> was killed due to a signal. If it was you can take appropriate action.</p>\n\n<pre><code>int status = system(\"ping -qnc 1 192.168.1.1\");\n\nif (WIFEXITED(status)) {\n    std::cout &lt;&lt; \"ping exited with exit code \" &lt;&lt; WEXITSTATUS(status) &lt;&lt; std::endl;\n}\nelse if (WIFSIGNALED(status)) {\n    std::cerr &lt;&lt; \"ping killed by signal \" &lt;&lt; WTERMSIG(status) &lt;&lt; std::endl;\n    exit(1);\n}\nelse {\n    std::cerr &lt;&lt; \"ping exited for some other reason\" &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 573, "user_id": 1156145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mNDqY.png?s=128&g=1", "display_name": "codentary", "link": "https://stackoverflow.com/users/1156145/codentary"}, "edited": false, "score": 0, "creation_date": 1571864149, "post_id": 58530820, "comment_id": 103385584, "body": "Thank you. Yes, peopen() was also on my mind, but I don&#39;t need IO so I went with system(). Yes, I would like to gracefully exit the process and do some cleanup."}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1571864287, "post_id": 58530820, "comment_id": 103385631, "body": "I concur with this. <code>system()</code> is pretty lackluster. It&#39;s kind of like <code>scanf()</code>: fine for a quick program but I wouldn&#39;t use it in production code."}, {"owner": {"reputation": 373, "user_id": 6044375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5SDT.jpg?s=128&g=1", "display_name": "JL. Sanchez", "link": "https://stackoverflow.com/users/6044375/jl-sanchez"}, "edited": false, "score": 0, "creation_date": 1571864922, "post_id": 58530820, "comment_id": 103385841, "body": "If you don&#39;t care of the output of the second process, you could just use the good ol&#39; <code>fork&#47;exec</code> pair (pretty straightforward if you don&#39;t care about the child&#39;s fate)."}], "tags": [], "owner": {"reputation": 373, "user_id": 6044375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5SDT.jpg?s=128&g=1", "display_name": "JL. Sanchez", "link": "https://stackoverflow.com/users/6044375/jl-sanchez"}, "is_accepted": false, "score": 2, "last_activity_date": 1571863829, "creation_date": 1571863829, "answer_id": 58530820, "question_id": 58530499, "link": "https://stackoverflow.com/questions/58530499/sigint-ignored-while-calling-system3/58530820#58530820", "title": "SIGINT ignored while calling system(3)", "body": "<p><a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html#tag_16_597_03\" rel=\"nofollow noreferrer\">POSIX.1-2017</a> remarks that <code>system()</code> call 'need not be thread-safe'.</p>\n\n<p>Generally speaking, calling <code>system()</code> in a multithread environment is not a good idea. The purpose of the function is like \"run a secondary process and wait for it to finish\". That's why the signals are trapped and blocked.</p>\n\n<p>If you expect your main process to be killed somehow (eg. by pressing Ctrl+C) perhaps you would prefer to use <code>popen()</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 573, "user_id": 1156145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mNDqY.png?s=128&g=1", "display_name": "codentary", "link": "https://stackoverflow.com/users/1156145/codentary"}, "is_accepted": false, "score": 0, "last_activity_date": 1571908044, "last_edit_date": 1571908044, "creation_date": 1571907477, "answer_id": 58537777, "question_id": 58530499, "link": "https://stackoverflow.com/questions/58530499/sigint-ignored-while-calling-system3/58537777#58537777", "title": "SIGINT ignored while calling system(3)", "body": "<p>To conclude, <code>popen</code> works ok as long as you explicitly discard the command output (<code>cmd &gt; /dev/null</code>) or read the output before <code>pclose</code>, but I eventually went with <code>boost::process::system()</code> which uses <code>execve</code> and does not trap the <code>SIGINT</code> either:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool ping(const std::string&amp; ip,\n          uint32_t count = 1,\n          std::chrono::seconds timeout = 1s)\n(\n    return (0 ==\n    bp::system(bp::exe = \"/bin/ping\",\n               bp::args = { \"-q\", \n                            \"-w\", std::to_string(timeout.count()),\n                            \"-c\", std::to_string(count),\n                            ip },\n               bp::std_out &gt; bp::null));\n}\n</code></pre>\n\n<p>The only \"advantage\" of <code>popen</code>, was that <kbd>ctrl</kbd>+<kbd>c</kbd> would also signal the child, as with system, but without trapping the signal. In my case I actually want to wait for the child to complete normally.</p>\n"}], "owner": {"reputation": 573, "user_id": 1156145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mNDqY.png?s=128&g=1", "display_name": "codentary", "link": "https://stackoverflow.com/users/1156145/codentary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58530620, "answer_count": 3, "score": 0, "last_activity_date": 1571908044, "creation_date": 1571862280, "last_edit_date": 1571862357, "question_id": 58530499, "link": "https://stackoverflow.com/questions/58530499/sigint-ignored-while-calling-system3", "title": "SIGINT ignored while calling system(3)", "body": "<p>I have a process with a thread that calls for example: <code>system(\"ping -qnc 1 192.168.1.1\")</code> in a loop.<br/>\nWhen I do <kbd>CTRL</kbd> +<kbd>C</kbd>, SIGINT is ignored as per the documentation:</p>\n\n<blockquote>\n  <p>During execution of the command, <code>SIGCHLD</code> will be blocked, and <code>SIGINT</code> and\n  <code>SIGQUIT</code> will be ignored, in the process that calls <code>system()</code> (these signals will be handled according to their defaults inside the child process that executes <em>command</em>).</p>\n</blockquote>\n\n<p>Why is this, and what can I do to exit my process with <kbd>CTRL</kbd> +<kbd>C</kbd>?</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1571862400, "post_id": 58530392, "comment_id": 103384863, "body": "On a side note, <code>tree_builder()</code> should take the <code>priority_queue</code> by reference not by value. And it is leaking the objects it <code>new</code>s. And <code>Q.push(*b1)</code> <a href=\"https://stackoverflow.com/questions/274626/\">slices the <code>Branch</code> object</a>. Since you are trying to store polymorphic classes in the queue, you need to use <code>Node*</code> pointers in your queue, not <code>Node</code> objects."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1571861941, "creation_date": 1571861941, "answer_id": 58530438, "question_id": 58530392, "link": "https://stackoverflow.com/questions/58530392/object-has-type-qualifiers-that-are-not-compatible-possible-inheritance-polymor/58530438#58530438", "title": "Object has type qualifiers that are not compatible, possible inheritance/polymorphism mistake?", "body": "<p><code>priority_queue::top()</code> returns a reference to a <code>const</code> object (<code>const T &amp;</code>), but <code>get_decimal()</code> is not declared with the <code>const</code> qualifier so it cannot be called on a <code>const</code> object.  You need to add the <code>const</code> qualifier:</p>\n\n<pre><code>int get_decimal() const // &lt;-- HERE\n{\n    return decimal_value;\n}\n</code></pre>\n\n<p>You should do the same for your <code>get_letter()</code> getter, too:</p>\n\n<pre><code>char get_letter() const\n{\n    return letter;\n}\n</code></pre>\n\n<p>You should also change your <code>operator&lt;</code> to take <code>const Node &amp;</code> references as well:</p>\n\n<pre><code>friend bool operator&lt;(const Node&amp; p1, const Node&amp; p2)\n{\n    return p1.decimal_value &gt; p2.decimal_value;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12263502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f44d38e9908e51b337156c1d7f2a99b?s=128&d=identicon&r=PG&f=1", "display_name": "sargoth1", "link": "https://stackoverflow.com/users/12263502/sargoth1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 58530438, "answer_count": 1, "score": 0, "last_activity_date": 1571861941, "creation_date": 1571861738, "question_id": 58530392, "link": "https://stackoverflow.com/questions/58530392/object-has-type-qualifiers-that-are-not-compatible-possible-inheritance-polymor", "title": "Object has type qualifiers that are not compatible, possible inheritance/polymorphism mistake?", "body": "<pre><code>class Node\n{\nprotected:\n    int decimal_value;\n    char letter;\npublic:\n    Node(int decimal, char lett) : decimal_value(decimal), letter(lett)\n    {}\n    Node() :decimal_value(0), letter(NULL)\n    {}\n     int get_decimal()\n    {\n        return decimal_value;\n    }\n    char get_letter()\n    {\n        return letter;\n    }\n    void set_decimal(int n)\n    {\n        decimal_value = n;\n    }\n    void set_letter(char l)\n    {\n        letter = l;\n    }\n    friend bool operator&lt;( Node&amp; p1, Node&amp; p2)\n    {\n        return p1.decimal_value &gt; p2.decimal_value;\n    }\n    virtual ~Node() {};\n};\nclass Leaf :public Node\n{\n    using Node::Node;\n\n};\nclass Branch :public Node\n{\n\n    Node* left;\n    Node* right;\npublic:\n\n    Branch(Node* l, Node* r) :left(l), right(r)\n    {\n        decimal_value = l-&gt;get_decimal() + r-&gt;get_decimal();\n\n    }\n\n};\nvoid tree_builder(priority_queue&lt;Node&gt; Q)\n{\n    Node* qleft=new Leaf;\n    Node* qright= new Leaf;\n    while (Q.size() &gt; 1)\n    {\n        *qleft = Q.top();\n        Q.pop();\n        *qright = Q.top();\n        Q.pop();\n        Branch* b1 = new Branch(qleft, qright);\n        Q.push(*b1);\n\n        cout &lt;&lt; Q.top().get_decimal();\n    }\n\n\n\n\n}\n</code></pre>\n\n<p>Branch and Leaf are both children of Node, however on the very last line when I try to cout the top of my queue. The \"q.top()\" is giving me the error \"the object has type qualifiers that are not compatible with member function get_decimal\" and I'm not sure why. I have included Node branch and Leaf classes.</p>\n"}, {"tags": ["c++", "algorithm", "loops"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1571861519, "post_id": 58530330, "comment_id": 103384490, "body": "Regarding the use of the term STL : <a href=\"https://stackoverflow.com/questions/5205491/whats-the-difference-between-stl-and-c-standard-library\">What&#39;s the difference between \u201cSTL\u201d and \u201cC++ Standard Library\u201d?</a>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1571861762, "post_id": 58530330, "comment_id": 103384596, "body": "See also: <a href=\"https://stackoverflow.com/q/135129/10077\">Should one prefer STL algorithms over hand-rolled loops?</a>"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1571861861, "post_id": 58530330, "comment_id": 103384641, "body": "@Fran&#231;oisAndrieux it&#39;s something <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/Cpp-Seasoning\" rel=\"nofollow noreferrer\">Sean Parent said in 2013</a>, but in recent CppCon many presenters quoted him on this."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1571861870, "post_id": 58530330, "comment_id": 103384647, "body": "@Fran&#231;oisAndrieux It was advice Sean Parent gave back in at least 2013: <a href=\"https://www.youtube.com/watch?v=W2tWOdzgXHA\" rel=\"nofollow noreferrer\">youtube.com/watch?v=W2tWOdzgXHA</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1571861892, "post_id": 58530330, "comment_id": 103384654, "body": "Thanks, I&#39;ll take a look."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 0, "creation_date": 1571862144, "post_id": 58530330, "comment_id": 103384742, "body": "I&#39;m just siding with r/cpp on this one where it doesn&#39;t matter any more today. People get the idea and your ability to have a technical conversation is not really hampered.  P.S. They edited one of my answers over this technicality."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1571862756, "post_id": 58530330, "comment_id": 103385011, "body": "@Fran&#231;oisAndrieux You&#39;re right, my bad"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1571865571, "post_id": 58530330, "comment_id": 103386054, "body": "Maybe you are just using the wrong algorithm.  std::max_element only loops through once but loops through the nodes so the comparison function has to call Score() on largest every time.  std::accumulate calculates the max element much more like your second loop: <code>double max = std::accumulate(std::cbegin(nodes), std::cend(nodes), DBL_MIN, [](auto max, Node const&amp; node1) { return std::max(node1.Score(),max); });</code> and there is probably a way to use std::bind to get rid of the lambda..."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1571897439, "post_id": 58530330, "comment_id": 103393058, "body": "A side effect of <code>std::cout &lt;&lt; &quot;complex calculation\\n&quot;;</code> prevents the compiler to optimize the code correctly. It really <i>must</i> call <code>Score()</code> every time it is mentioned. Should it be pure, the compiler would cache its results."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1571914978, "post_id": 58530330, "comment_id": 103401762, "body": "@FredLarson that&#39;s from 2008... with the evolution of C++ it&#39;s not up to date imho"}], "answers": [{"comments": [{"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1571862706, "post_id": 58530544, "comment_id": 103384990, "body": "I disagree with you on &quot;a more normal case&quot;. I rarely need to compare just rows of numbers. Usually I need to compare objects, based on the value of a member variable or an evaluation formula. And I think that is is a more common &#39;normal&#39; case.."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1571862807, "post_id": 58530544, "comment_id": 103385034, "body": "Even for containers of objects, most uses would reference a value that is trivial to access."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1571865111, "post_id": 58530544, "comment_id": 103385903, "body": "@JHBonarius: Comparison based on &quot;a member variable&quot; access is <i>very different</i> from &quot;an evaluation formula&quot;. In the former case, <code>max_element</code> is just fine; the later case, not so much. Optimizing the latter case requires knowing up-front that the value you&#39;re using to compare them is expensive to calculate and therefore should be cached. Which <code>min_element</code> cannot know. Essentially, your case is a performance issue because it&#39;s really two things: converting a list of some type into a list of values, then comparing based on those values. You optimize this through caching."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1571909063, "post_id": 58530544, "comment_id": 103398585, "body": "@NicolBolas ... but that is not necessary with a raw loop. So I&#39;d have to introduce a /new/ mechanism to overcome the limitations... that&#39;s a high cost just to fulfill this &quot;no raw loops&quot; thing... I think my conclusion is: the current infrastructure is too limited to remove all raw loops. I prefer Richard&#39;s solution in that case."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1571923493, "post_id": 58530544, "comment_id": 103406244, "body": "@JHBonarius: &quot;<i>but that is not necessary with a raw loop.</i>&quot; And that&#39;s the tradeoff you <i>always</i> make for going high-level. The code looks more easily digestible and it&#39;s more difficult to make mistakes, but if your high-level needs do not exactly match the expectations of the tools at your disposal (in this case, that comparing values is cheap), then there may be additional overhead compared to a bespoke solution."}], "tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": false, "score": 1, "last_activity_date": 1571862508, "creation_date": 1571862508, "answer_id": 58530544, "question_id": 58530330, "link": "https://stackoverflow.com/questions/58530330/c-no-raw-loops-without-losing-perfomance/58530544#58530544", "title": "C++ &quot;No raw loops&quot; without losing perfomance", "body": "<p>I think your case is somewhat pathological to <code>std::max_element</code>, since your comparator calls <code>Score()</code> on <em>both</em> elements every time, and you declare it to be expensive. So where you do:</p>\n\n<pre><code>for (const auto&amp; node : nodes) {\n    auto score = node.Score();\n    if (score &gt; maxScore) {\n        maxScore = score;\n        nodePtr = &amp;node;\n    }\n}\n</code></pre>\n\n<p>... <code>std::max_element</code> effectively has to do:</p>\n\n<pre><code>for (const auto&amp; node : nodes) {\n    if (node.Score() &gt; nodePtr-&gt;Score()) {\n        nodePtr = &amp;node;\n    }\n}\n</code></pre>\n\n<p>I think <code>std::max_element</code> would be just fine in a more normal case, where the value to compare by is cheap to access.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1571862847, "post_id": 58530574, "comment_id": 103385055, "body": "Shouldn&#39;t <code>Score()</code> look more like this instead? <code>auto Score() const -&gt; double { if (std::isnan(cached_score)) { ... cached_score = 1; } return cached_score; }</code>"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1571863186, "post_id": 58530574, "comment_id": 103385202, "body": "Thank you for both suggestions, but: in the first situation the size of Node grows. So there&#39;s again a (memory) performance impact.  And in the second situation you&#39;re replacing a raw loop with a new function that effectively has the same raw loop, which just seems optical trickery."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1571864315, "post_id": 58530574, "comment_id": 103385641, "body": "@JHBonarius: If you&#39;re planning on using the <code>Score()</code> function repeatedly, then the space-time trade-off is one you&#39;ll have to consider anyway."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 2, "creation_date": 1571864417, "post_id": 58530574, "comment_id": 103385667, "body": "@JHBonarius: See the first sentence of my answer. You&#39;re replacing a complex inline operation with a call to a generic function which you can write extensive unit tests for. If you use <code>max_eval_element</code> twice in a project, this halves the amount of testing you need to do versus the raw loops. It also provides you a function you can move between projects. If you look at the documentation for <a href=\"https://en.cppreference.com/w/cpp/algorithm/max_element\" rel=\"nofollow noreferrer\"><code>std::max_element</code></a> you&#39;ll see that it too is just an abstraction. There&#39;s no magic here, only good design practices."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1571908129, "post_id": 58530574, "comment_id": 103398091, "body": "OK, I&#39;m going for this one. I modified it to <code>template &lt;typename FwdIt, typename Eval, typename Pred = std::less&lt;&gt;&gt; constexpr FwdIt max_eval_element(FwdIt first, FwdIt last, Eval eval, Pred pred = Pred())</code>, so I can call it with e.g. <code>return *max_eval_element(std::begin(nodes), std::end(nodes), std::mem_fn(&amp;Node::Score));</code> for my code. still need to fix type detection though"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1571928172, "post_id": 58530574, "comment_id": 103408988, "body": "I&#39;ve just checked the ranges-v3 (C++20 base) implementation of this... The <a href=\"https://github.com/ericniebler/range-v3/blob/master/include/range/v3/algorithm/max_element.hpp\" rel=\"nofollow noreferrer\">max_element</a> offers an extra &quot;projection&quot; input, which could be used to apply a transformation. I.e. <code>auto nodeIt3 = rng::max_element(nodes, std::less&lt;double&gt;(), [](Node const&amp; node) { return node.Score(); });</code>, however, the implementation is kind of disappointing: <code>if(invoke(pred, invoke(proj, *first), invoke(proj, *tmp)))</code> i.e. the projection is applied twice."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1571928223, "post_id": 58530574, "comment_id": 103409025, "body": "I&#39;ve checked this in <a href=\"https://godbolt.org/z/DKJ71d\" rel=\"nofollow noreferrer\">compiler explorer</a>, and indeed the projection is evaluated twice... quite an inefficient implementation..."}], "tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": true, "score": 3, "last_activity_date": 1571865373, "last_edit_date": 1571865373, "creation_date": 1571862647, "answer_id": 58530574, "question_id": 58530330, "link": "https://stackoverflow.com/questions/58530330/c-no-raw-loops-without-losing-perfomance/58530574#58530574", "title": "C++ &quot;No raw loops&quot; without losing perfomance", "body": "<p>Replacing raw loops with abstracted algorithms is good style because then you can reuse the algorithm many times but test it only once. Wrapping the loop this way may seem like syntactic sugar, but it greatly reduces the potential for bugs in your code because you can now do extensive unit tests on the abstracted algorithm and you never need to worry about mistakenly implementing it incorrectly when you need it.</p>\n\n<p>However, you're comparing apples and oranges here. Your <code>max_element</code> implementation always calculates <code>Score()</code> for its comparison whereas your <code>for</code> loop caches the result of the <code>Score()</code> function.</p>\n\n<p>A better implementation of <code>Node</code> might be:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Node {\nmutable:\n    double cached_score = std::numeric_limits&lt;double&gt;::quiet_Nan();\npublic:\n    auto Score() const -&gt; double {\n        if(std::isnan(cached_score)){\n           std::cout &lt;&lt; \"complex calculation\\n\";\n           counter++;\n           cached_score = 1;\n        }\n        return cached_score;\n    }\n    void invalidate_cache() {\n      cached_score = std::numeric_limits&lt;double&gt;::quiet_Nan();\n    }\n};\n</code></pre>\n\n<p>This way the complex calculation is only performed once.</p>\n\n<p>Alternatively, write your own abstraction:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;cfloat&gt;\n#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n\nstatic int counter;\n\nclass Node {\npublic:\n    auto Score() const -&gt; double {\n        std::cout &lt;&lt; \"complex calculation\\n\";\n        counter++;\n        return 1;\n    }\n};\n\ntemplate&lt;class ForwardIt, class Evaluate, class Compare&gt;\nForwardIt max_eval_element(\n    ForwardIt first,\n    ForwardIt last,\n    Evaluate eval,\n    Compare comp\n){\n    if (first == last) return last;\n\n    ForwardIt largest = first;\n    auto largest_val = eval(*first);\n    ++first;\n    for (; first != last; ++first) {\n        const auto this_val = eval(*first);\n        if (comp(largest_val, this_val)) {\n            largest = first;\n            largest_val = this_val;\n        }\n    }\n    return largest;\n}\n\nint main()\n{\n\n    std::array&lt;Node, 10&gt; nodes;\n\n    counter = 0;\n    Node const* nodePtr = max_eval_element(std::cbegin(nodes), std::cend(nodes),\n                                       [](Node const&amp; node){ return node.Score(); },\n                                       [](double const &amp;a, double const &amp;b) {\n                                           return a&lt;b;\n                                       });\n    std::cout &lt;&lt; \"algorithm count \" &lt;&lt; counter &lt;&lt; std::endl;\n\n    counter = 0;\n    double maxScore = -FLT_MAX;\n    for (const auto&amp; node : nodes) {\n        auto score = node.Score();\n        if (score &gt; maxScore) {\n            maxScore = score;\n            nodePtr = &amp;node;\n        }\n    }\n    std::cout &lt;&lt; \"raw loop count \" &lt;&lt; counter &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>In this instance, both loops perform the same number of evaluations.</p>\n\n<p>Many internal codebases I've worked with have extensive libraries which extend the STL. It gives the teams I've worked on much greater confidence that their code has been written correctly and allows you to interpret complex operations at a glance. In this way, these abstractions also reduce the effort of understanding code and the effort of communication.</p>\n"}, {"comments": [{"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1571906549, "post_id": 58535309, "comment_id": 103397269, "body": "I tried this. I removed counter and the cout. I added a scoring function that used a lot of <code>cmath</code>. Then I increased the node array to 100000 elements and used a <code>high_resolution_clock</code> to measure the elapsed time. I compiled with G++ 9.1 with -O3... Result: algorithm uses 22 ms, raw loop uses 8 ms... so I&#39;m afraid this is not true."}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 0, "last_activity_date": 1571898240, "creation_date": 1571898240, "answer_id": 58535309, "question_id": 58530330, "link": "https://stackoverflow.com/questions/58530330/c-no-raw-loops-without-losing-perfomance/58535309#58535309", "title": "C++ &quot;No raw loops&quot; without losing perfomance", "body": "<p>It seems that the problem is in how the test is written. The statements</p>\n\n<pre><code>    std::cout &lt;&lt; \"complex calculation\\n\";\n    count++;\n</code></pre>\n\n<p>make a visible side effect, and the compiler is obliged to call <code>Score</code> every time it appears. If it was pure (that is, having no side effects), the compiler would optimize the redundant calls away by cacheing.</p>\n\n<p>Try to use a real <code>Score</code> (I hope the real one <em>is</em> pure), and compare the execution times. </p>\n"}, {"tags": [], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "is_accepted": false, "score": 2, "last_activity_date": 1571914608, "last_edit_date": 1571914608, "creation_date": 1571909980, "answer_id": 58538516, "question_id": 58530330, "link": "https://stackoverflow.com/questions/58530330/c-no-raw-loops-without-losing-perfomance/58538516#58538516", "title": "C++ &quot;No raw loops&quot; without losing perfomance", "body": "<p>I just wanted to post the algo I used based on Richard's answer:</p>\n\n<pre><code>template &lt;typename FwdIt, typename Eval, typename Pred = std::less&lt;&gt;&gt;\nconstexpr FwdIt max_eval_element(FwdIt first, FwdIt last, Eval eval, Pred pred = Pred()) {\n    FwdIt found = first;\n    if (first != last) {\n        auto best = eval(*found);\n        while (++first != last) {\n            if (auto const thisVal = eval(*first);\n                pred(best, thisVal)) {\n                found = first;\n                best = thisVal;\n            }\n        }\n    }\n    return found;\n}\n</code></pre>\n\n<p>which allows me to call the algo as </p>\n\n<pre><code>Node const* nodePtr = &amp;*std::max_eval_element(std::cbegin(nodes), std::cend(nodes), std::mem_fn(&amp;Node::Score));\n</code></pre>\n"}], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "accepted_answer_id": 58530574, "answer_count": 4, "score": 2, "last_activity_date": 1571914608, "creation_date": 1571861473, "last_edit_date": 1571907062, "question_id": 58530330, "link": "https://stackoverflow.com/questions/58530330/c-no-raw-loops-without-losing-perfomance", "title": "C++ &quot;No raw loops&quot; without losing perfomance", "body": "<p>So the 'new (old) big thing' is \"No Raw Loops\" in C++. I'm trying to write code that way, but it seems very inefficient. Yes, there are STL algoritms which can do about anything, but they don't seem very efficient.</p>\n\n<p>I for instance have a situation where I want a pointer to a node in an array of nodes that has the highest score. Determining that score is a costly floating-point operation. So I implemented the STL algorithm version and compared it with the raw loop:</p>\n\n<pre><code>#include &lt;cfloat&gt;\n#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n\nstatic int counter;\n\nclass Node {\npublic:\n    auto Score() const -&gt; double {\n        std::cout &lt;&lt; \"complex calculation\\n\";\n        counter++;\n        return 1;\n    }\n};\n\nint main()\n{\n\n    std::array&lt;Node, 10&gt; nodes;\n\n    counter = 0;\n    Node const* nodePtr = std::max_element(std::cbegin(nodes), std::cend(nodes),\n        [](Node const&amp; node1, Node const&amp; node2) {\n            return node1.Score() &lt; node2.Score();\n        });\n    std::cout &lt;&lt; \"algorithm count \" &lt;&lt; counter &lt;&lt; std::endl;\n\n    counter = 0;\n    double maxScore = -FLT_MAX;\n    for (const auto&amp; node : nodes) {\n        auto score = node.Score();\n        if (score &gt; maxScore) {\n            maxScore = score;\n            nodePtr = &amp;node;\n        }\n    }\n    std::cout &lt;&lt; \"raw loop count \" &lt;&lt; counter &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Evaluating this, for the STL version, the costly Score function is evaluated 18 times, while the raw loop only uses 10 evaluations...</p>\n\n<p>Am I doing it wrong, or are raw loops just not that bad?</p>\n\n<p>edit:\nAfter the suggestion by <code>user58697</code> that cout and the static counter would prevent compiler optimization, I changed the code:</p>\n\n<pre><code>#include &lt;cfloat&gt;\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n#include &lt;random&gt;\n#include &lt;chrono&gt;\n\ntemplate &lt;typename T&gt;\nclass Random {\nprivate:\n    std::default_random_engine generator;\n    std::uniform_real_distribution&lt;T&gt; distribution;\npublic:\n    Random()\n        : generator()\n        , distribution(0.0, 1.0)\n    {}\n\n    auto operator()() {\n        return distribution(generator);\n    };\n};\n\nstatic Random&lt;double&gt; myRandom;\n\nclass Timer {\nprivate:\n    std::chrono::high_resolution_clock::time_point startTime{};\npublic:\n    void Start() noexcept {\n        startTime = std::chrono::high_resolution_clock::now();\n    }\n    [[nodiscard]] auto ElapsedMs() const noexcept {\n        return std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::high_resolution_clock::now() - startTime).count();\n    }\n};\n\nstatic Timer timer;\n\nclass Node {\nprivate:\n    double val;\npublic:\n    Node() noexcept : val(myRandom()) {}\n\n    [[nodiscard]] auto Score() const noexcept {\n        auto score = std::sqrt(std::log(10.0 / val));\n        score = std::sin(score) / std::cos(score);\n        score = std::sqrt(std::sqrt(std::sqrt(std::sqrt(std::sqrt(score)))));\n        score = std::pow(score, 1000);\n        return score;\n    }\n};\n\nint main()\n{\n    std::array&lt;Node, 100000&gt; nodes; // yeah, yeah... overloading the stack, I know\n\n    for (auto i = 0; i &lt; 2; i++) {\n        timer.Start();\n        Node const* nodePtr = &amp;*std::max_element(std::cbegin(nodes), std::cend(nodes),\n            [](Node const&amp; node1, Node const&amp; node2) {\n                return node1.Score() &lt; node2.Score();\n            });\n        std::cout &lt;&lt; \"algorithm elapsed time \" &lt;&lt; timer.ElapsedMs() &lt;&lt; std::endl;\n\n        timer.Start();\n        double maxScore = -FLT_MAX;\n        for (const auto&amp; node : nodes) {\n            auto score = node.Score();\n            if (score &gt; maxScore) {\n                maxScore = score;\n                nodePtr = &amp;node;\n            }\n        }\n        std::cout &lt;&lt; \"raw loop count \" &lt;&lt; timer.ElapsedMs() &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>I run the loop twice to eliminate startup behavior... results of second loop (compiled with g++ 9.1 -O3):</p>\n\n<pre><code>algorithm elapsed time 16\nraw loop count 8 (&lt;== I see I forgot to change \"count\" to \"time\" :P)\n</code></pre>\n\n<p>So that's not it.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1571860276, "post_id": 58530055, "comment_id": 103383996, "body": "<code>std::map&lt;int,char&gt;x();</code> is not a variable. It&#39;s a function declaration. <i>&quot;works fine, no segfault&quot;</i> Because simply declaring a function without using it does nothing. Try actually using it as a variable, and you&#39;ll get another error."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1571860482, "post_id": 58530055, "comment_id": 103384091, "body": "Can&#39;t reproduce: <a href=\"https://godbolt.org/z/m0TsS4\" rel=\"nofollow noreferrer\">godbolt.org/z/m0TsS4</a> - Need more code, like a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1571860505, "post_id": 58530055, "comment_id": 103384096, "body": "Look up &quot;The most vexing parse&quot; for further."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1571860936, "post_id": 58530055, "comment_id": 103384249, "body": "&quot;<i>I have a member variable declaration of: <code>std::map&lt;int,char&gt;x;</code> in my header file. It compiles, but when I run my binary I get a segfault in the initialization of the class, before I even get into the constructor.</i>&quot; - Don&#39;t you think it would be a good idea to show what the class looks like? How does it do member initialization etc.?"}, {"owner": {"reputation": 67, "user_id": 5891663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba040977e9c28587a43c56ff4a1c04?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Jeps", "link": "https://stackoverflow.com/users/5891663/mister-jeps"}, "edited": false, "score": 0, "creation_date": 1571862202, "post_id": 58530055, "comment_id": 103384774, "body": "Thanks folks, I realize it&#39;s kind of a garbage example, but I&#39;m unable to provide more detail.  I also think it&#39;s a function declaration.  I&#39;ll look up the most vexing parse, thank you all.  I&#39;ll mark something as accepted as soon as I figure out how."}], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": true, "score": 1, "last_activity_date": 1571860734, "last_edit_date": 1571860734, "creation_date": 1571860542, "answer_id": 58530119, "question_id": 58530055, "link": "https://stackoverflow.com/questions/58530055/declaring-non-intrinsic-types-with-after-variable-name-has-different-behavior/58530119#58530119", "title": "Declaring non-intrinsic types with () after variable name has different behavior than without. i.e. std::map&lt;int,char&gt;x(); - what&#39;s with that?", "body": "<p>This is the <a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\">most vexing parse</a>, as coined by Scott Meyers.</p>\n\n<p>In the standard, look up Ambiguity resolution <a href=\"http://eel.is/c++draft/stmt.ambig\" rel=\"nofollow noreferrer\">[stmt.ambig]</a>.</p>\n\n<p>As for the segfault, you will need to provide the code (see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a>) to help you with that.</p>\n"}], "owner": {"reputation": 67, "user_id": 5891663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ba040977e9c28587a43c56ff4a1c04?s=128&d=identicon&r=PG&f=1", "display_name": "Mister Jeps", "link": "https://stackoverflow.com/users/5891663/mister-jeps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1571868014, "accepted_answer_id": 58530119, "answer_count": 1, "score": -1, "last_activity_date": 1571860734, "creation_date": 1571860180, "last_edit_date": 1571860238, "question_id": 58530055, "link": "https://stackoverflow.com/questions/58530055/declaring-non-intrinsic-types-with-after-variable-name-has-different-behavior", "closed_reason": "Not suitable for this site", "title": "Declaring non-intrinsic types with () after variable name has different behavior than without. i.e. std::map&lt;int,char&gt;x(); - what&#39;s with that?", "body": "<p>I have a member variable declaration of:\n<code>std::map&lt;int,char&gt;x;</code>\nin my header file.\nIt compiles, but when I run my binary I get a segfault in the initialization of the class, before I even get into the constructor.\nIf I change the declaration to <code>std::map&lt;int,char&gt;x();</code> -i.e. I just added a () after the variable name - it works fine, no segfault.</p>\n\n<p>I can't give any more specific example than the above, but if anyone has experience with this I'd be interested to know what's going on.</p>\n\n<p>Compiler version is gcc version 4.8.5\ntarget is x86_64-redhat-linux</p>\n\n<p>I realize this is fairly nonspecific but I'm only looking for a general answer.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c", "arrays", "partitioning"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 4, "creation_date": 1571859330, "post_id": 58529819, "comment_id": 103383621, "body": "<a href=\"https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Bresenham%27s_line_algorithm</a>"}, {"owner": {"reputation": 97941, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1571859486, "post_id": 58529819, "comment_id": 103383677, "body": "maybe try <code>section[0] = size&#47;n; section[1] = (size - section[0])&#47;(n-1); section[2] = (size-section[0]-section[1])&#47;(n-2);</code> ..."}, {"owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "reply_to_user": {"reputation": 97941, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1571859796, "post_id": 58529819, "comment_id": 103383800, "body": "(Both comments will produce the same result, but unless you need it to be very fast - which was the idea for the line drawing algorithm -, @pmg&#39;s is the simpler one to comprehend)"}], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 6, "last_activity_date": 1571860453, "creation_date": 1571860453, "answer_id": 58530102, "question_id": 58529819, "link": "https://stackoverflow.com/questions/58529819/split-a-list-into-equal-parts/58530102#58530102", "title": "Split a list into equal parts?", "body": "<p>The usual approach, when you\u2019re fine with grouping all the larger pieces, is</p>\n\n<pre><code>const int total=/*\u2026*/,pieces=/*\u2026*/;\nconst int base=total/pieces,extra=total%pieces;\n</code></pre>\n\n<p>Then the first <code>extra</code> (perhaps 0) pieces have size <code>base+1</code> and the (<code>pieces-extra</code>) others have size <code>base</code>.</p>\n"}], "owner": {"reputation": 79, "user_id": 11672706, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-haTDPwh5luU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcoR0zt23FgGX1ijRYutTEaFj7tJQ/mo/photo.jpg?sz=128", "display_name": "Jedediah Heal", "link": "https://stackoverflow.com/users/11672706/jedediah-heal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 58530102, "answer_count": 1, "score": 3, "last_activity_date": 1571860453, "creation_date": 1571859076, "question_id": 58529819, "link": "https://stackoverflow.com/questions/58529819/split-a-list-into-equal-parts", "title": "Split a list into equal parts?", "body": "<p>I have an array of <code>size</code> elements, and I have a function that will split it into roughly equal sections. It does this by setting the size of the first <code>size-1</code> sections with <code>size/num_of_sections</code>, and setting the size of the last section with whatever is left. The code is simple, works correctly and looks like so:</p>\n\n<pre><code>int section_size = size / num_of_sections;\nint last_section_size = size - ( section_size * (num_of_sections - 1) );\n</code></pre>\n\n<p>The only problem is that there are some combinations of <code>size</code> and <code>num_of_sections</code> that does not split very well. For example, if <code>size = 10</code> and <code>num_of_sections = 6</code>, then the first four sections will be 1 element each, and the last section will be 6 elements.</p>\n\n<p>How can I change this to an algorithm that will split it up more evenly, specifically, so that all sections are either size <code>X</code> or <code>X+1</code>? In the above example, the first four sections would be size 2, then the last two sections will be 1 each. There would obviously need to be a third variable produced that indicates a section number where all previous sections up to and including it are size <code>X</code> and all following are size <code>X+1</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1571858274, "post_id": 58529464, "comment_id": 103383204, "body": "Initialize two first elements (example: last2= 0, last=1),. Then iterate from <code>i=3</code> to <code>numOfTerms</code>, updating in each cycle the two previous vars. That&#39;s mainly what you have planned. The go ahead of it."}], "answers": [{"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1571858399, "post_id": 58529582, "comment_id": 103383253, "body": "there&#39;s no need for nested loops. <code>3 times the previous term minus the second previous term</code> only requires accessing two data members."}, {"owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 2, "creation_date": 1571858623, "post_id": 58529582, "comment_id": 103383334, "body": "@Jeffrey: I was not to find a good algorithm for the OP but instead I only diagnosed his crashing points."}, {"owner": {"reputation": 31, "user_id": 12260682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6100d34b5626b118e3495c52ac15d090?s=128&d=identicon&r=PG&f=1", "display_name": "ddechino", "link": "https://stackoverflow.com/users/12260682/ddechino"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1571859398, "post_id": 58529582, "comment_id": 103383647, "body": "@Jeffrey would mind telling me how i could do this with just the one for loop? Im new to c++ and just starting learning about loops so maybe your seeing something differently than i am"}], "tags": [], "owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "is_accepted": false, "score": 3, "last_activity_date": 1571857939, "creation_date": 1571857939, "answer_id": 58529582, "question_id": 58529464, "link": "https://stackoverflow.com/questions/58529464/program-to-calculate-the-sum-of-terms-c/58529582#58529582", "title": "Program to calculate the sum of terms? c++", "body": "<p>There is an Undefined Behavior in your code in:</p>\n\n<pre><code>for(int i = 0; i &lt; num; i++){\n    for(int term; term &lt;= i; i++){ // term not initiaized. and the loop is infinte\n        //THIS IS WHERE IM STUCK\n    }\n}\n</code></pre>\n\n<p>You are using <code>term</code> without being intialized. Also you are stuck in the inner loop because you should increment <code>term</code> not <code>i</code> in the inner loop.</p>\n\n<p>So you can make it this way:</p>\n\n<pre><code>for(int i = 0; i &lt; num; ++i){\n    for(int term = 0; term &lt;= i; ++term){\n        // now rock here\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1571860167, "post_id": 58530035, "comment_id": 103383953, "body": "Note though, that just taking this and handing it out as your homework solution will cost you in the long run. You should pause here and make sure you understand every single line."}, {"owner": {"reputation": 31, "user_id": 12260682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6100d34b5626b118e3495c52ac15d090?s=128&d=identicon&r=PG&f=1", "display_name": "ddechino", "link": "https://stackoverflow.com/users/12260682/ddechino"}, "edited": false, "score": 1, "creation_date": 1571861105, "post_id": 58530035, "comment_id": 103384316, "body": "thats what im doing. i always make sure i can replicate it and then try 1 or 2 other variants of the question before doing anything. I have no interest in turning this is in for homework just to pass becuase that would be a waste time and money. I actually want to learn what im being taught and so far it has been going good, this is the second ive stumped."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1571860098, "creation_date": 1571860098, "answer_id": 58530035, "question_id": 58529464, "link": "https://stackoverflow.com/questions/58529464/program-to-calculate-the-sum-of-terms-c/58530035#58530035", "title": "Program to calculate the sum of terms? c++", "body": "<p>You would typically remember the last two values, and simply go on computing the next one:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n  int num;\n\n  cout &lt;&lt; \"Number of terms to be shown: \";\n  cin &gt;&gt; num;\n\n  int p1 = 1;\n  int p2 = 0;\n  cout &lt;&lt; p2 &lt;&lt; \" \" &lt;&lt; p1 &lt;&lt; \" \";\n  num -= 2;\n\n  while (num &gt; 0)\n  {\n      int current = 3 * p1 - p2;\n      cout &lt;&lt; current &lt;&lt; \" \";\n\n      p2 = p1;\n      p1 = current;\n      num--;\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1571871538, "post_id": 58531577, "comment_id": 103387646, "body": "Running time issues will kick in long before stack overflow :-)"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1571871839, "post_id": 58531577, "comment_id": 103387725, "body": "@Jeffrey Yeah - it&#39;s dead slow. It&#39;s more of a visual aid."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1571871966, "last_edit_date": 1571871966, "creation_date": 1571868520, "answer_id": 58531577, "question_id": 58529464, "link": "https://stackoverflow.com/questions/58529464/program-to-calculate-the-sum-of-terms-c/58531577#58531577", "title": "Program to calculate the sum of terms? c++", "body": "<p>This is the algorithm as I see it in my head when I read your question:</p>\n\n<pre><code>unsigned term(unsigned num) {\n\n    //                  the previous term*3   minus   the second previous term\n    if(num &gt; 1) return   term(num - 1) * 3      -        term(num - 2);\n\n    return num; // 0 or 1\n}\n</code></pre>\n\n<p>It uses <a href=\"https://en.wikipedia.org/wiki/Recursion_(computer_science)\" rel=\"nofollow noreferrer\">recursion</a> to call itself, which is a great way to visualize what needs to be done for problems like this. The function works <em>as-is</em> but only for <em>small</em> <code>num</code>s, or else you'll get a stack overflow. It's also rather time consuming since it's doing function calls and calculates all terms many, many times.</p>\n"}], "owner": {"reputation": 31, "user_id": 12260682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6100d34b5626b118e3495c52ac15d090?s=128&d=identicon&r=PG&f=1", "display_name": "ddechino", "link": "https://stackoverflow.com/users/12260682/ddechino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1571871966, "creation_date": 1571857317, "question_id": 58529464, "link": "https://stackoverflow.com/questions/58529464/program-to-calculate-the-sum-of-terms-c", "title": "Program to calculate the sum of terms? c++", "body": "<p>So im trying to write a program that will calculate the sum of terms but each term is 3 times the previous term minus the second previous term so it looks like this <code>0, 1, 3, 8, 21, 55</code> and so on. For example if the user wants 4 terms then the program should output 21. The part im having problems with is setting up the variables to store the previous number and the second previous number. This is what i have so far.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n  int num;\n  int last;\n  int last2;\n  int current;\n\n  cout &lt;&lt; \"Number of terms to be shown: \";\n  cin &gt;&gt; num;\n\n  for(int i = 0; i &lt; num; i++){\n    for(int term; term &lt;= i; i++){\n      //THIS IS WHERE IM STUCK\n    }\n  }\n}\n</code></pre>\n\n<p>The way i see it is the first for loop will tell the nested for loop how many times to run. In the nested for loop i think is where the math should go (<code>current = (last * 3) - last2</code>) while updating the <code>last</code> and <code>last2</code> variables to keep the term list going. And then outside the loop i would <code>cout &lt;&lt; current</code> so it would display the term. Like always, any help is appreciated!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1571856774, "post_id": 58529287, "comment_id": 103382617, "body": "Read the <b>Diagnostics</b> section in the help and add the missing code to find out why: <a href=\"https://docs.microsoft.com/en-us/sql/odbc/reference/syntax/sqldriverconnect-function?view=sql-server-ver15\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/sql/odbc/reference/syntax/&hellip;</a>"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1571861124, "post_id": 58529287, "comment_id": 103384325, "body": "take a look at using ADO with Linux. See  <a href=\"https://stackoverflow.com/questions/1172429/deploy-asp-net-mvc-on-linux-best-practices-tools-surprises\" title=\"deploy asp net mvc on linux best practices tools surprises\">stackoverflow.com/questions/1172429/&hellip;</a> as well as <a href=\"https://stackoverflow.com/questions/37738106/net-core-vs-mono\">stackoverflow.com/questions/37738106/net-core-vs-mono</a>  Microsoft is doing much more Linux and open source work these days."}, {"owner": {"reputation": 3, "user_id": 11938087, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QslAZ2NSNow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfBHmRRjNFnBTUJcVZcHu-JtByYNQ/photo.jpg?sz=128", "display_name": "Sumit Koirala", "link": "https://stackoverflow.com/users/11938087/sumit-koirala"}, "edited": false, "score": 0, "creation_date": 1571865399, "post_id": 58529287, "comment_id": 103386000, "body": "Richard Can you help me adding the missing code?? I tried many but still the same error. The problem seems to be in SQLdriverConnect. Sqldriverconnect return the value -1 but the value that I need is either 0 or 1 so that it can move to if statement but now due to retcode=-1 it directly moves to else and return Failed to connect string rather than going into if statement"}], "owner": {"reputation": 3, "user_id": 11938087, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QslAZ2NSNow/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfBHmRRjNFnBTUJcVZcHu-JtByYNQ/photo.jpg?sz=128", "display_name": "Sumit Koirala", "link": "https://stackoverflow.com/users/11938087/sumit-koirala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571858659, "creation_date": 1571856412, "last_edit_date": 1571858659, "question_id": 58529287, "link": "https://stackoverflow.com/questions/58529287/coversion-of-ado-to-odbc-so-that-the-solution-is-platform-independent", "title": "Coversion of ADO to ODBC so that the solution is platform-independent", "body": "<p>The original BJTIMES project had used the built-in Windows ADO framework for connecting to the DB. This limits the solution to run only on Windows. I am modifying the solution to use ODBC so that with the use of Windows/Linux ODBC drivers, we can run the solution on Windows as well as Linux </p>\n\n<p>I tried to convert the ADO to ODBC but when I run the solution it says failed to connect. That means it is not connected to Database. But it works fines in ADO version though</p>\n\n<pre><code>try\n{     //following ODBC functions to establish connection\n    if (SQL_SUCCESS == SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &amp;SqlEnvHandle ))        \n\n        if (SQL_SUCCESS == SQLSetEnvAttr(getEnvironment(), SQL_ATTR_ODBC_VERSION, (SQLPOINTER)SQL_OV_ODBC3, 0))\n\n            if (SQL_SUCCESS == SQLAllocHandle(SQL_HANDLE_DBC, getEnvironment(), &amp;SqlConnectionHandle ))\n            {\n\n                SQLCHAR retconstring[RETURN_CODE_SZ];\n\n                SQLRETURN retcode = SQLDriverConnect(  //establishing the connection to DB\n                    getConnection(),\n                    NULL,\n                    connect,\n                    SQL_NTS,\n                    retconstring,\n                    1024,\n                    NULL,\n                    SQL_DRIVER_NOPROMPT);\n\n                if ((retcode == SQL_SUCCESS) || (retcode == SQL_SUCCESS_WITH_INFO))\n                {\n                    isConnected = true;\n                    sprintf(m_ErrStr, \"Success\");\n                    IsConnected = true;\n                    return IsConnected;\n                }\n                else\n                {\n                    sprintf(m_ErrStr, \"Failed to connect\");\n                    return false;\n                }\n            }\n\n}\n\nCATCHERROR(SqlConnectionHandle,0);\n\nreturn false;\n}\n</code></pre>\n\n<p>This is the part of code for the connection to the database.</p>\n\n<p>In the above code is there variable that uses ADO rather than ODBC. It looks like SQLdriverconnect has some problem. How can I figure out the problem?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1571856501, "post_id": 58529272, "comment_id": 103382499, "body": "Have you learned about the <code>&amp;</code> bitwise AND operator and the <code>&lt;&lt;</code> bitwise shift-left operator yet? If not, I suggest you get yourself a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>. Basically, <code>klsb()</code> is returning true or false depending on whether a specified bit in <code>num</code> is set to 1 or 0."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571856605, "post_id": 58529272, "comment_id": 103382540, "body": "@NathanOliver There should be a medal I could nominate you for that edit. I gave up immediately."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1571856678, "post_id": 58529272, "comment_id": 103382577, "body": "@Fran&#231;oisAndrieux Thanks.  Wasn&#39;t too bad.  I&#39;ve got a user script that lets me highlight a code block and then press tab to indent it all.  Comes in really useful."}, {"owner": {"reputation": 190, "user_id": 3806493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e22efabb92310710965bf68ee2a568?s=128&d=identicon&r=PG&f=1", "display_name": "loaner9", "link": "https://stackoverflow.com/users/3806493/loaner9"}, "edited": false, "score": 1, "creation_date": 1571857807, "post_id": 58529272, "comment_id": 103383028, "body": "It is <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">ill advised</a> to put <code>using namespace std</code> in your code. If you absolutely must save source code characters, limit the scope of the statement to something like <code>using std::cout</code>"}], "answers": [{"tags": [], "owner": {"reputation": 414, "user_id": 11087216, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QfCCZHRqUcM/AAAAAAAAAAI/AAAAAAAAACo/b9jrw08KaX4/photo.jpg?sz=128", "display_name": "Strohhut", "link": "https://stackoverflow.com/users/11087216/strohhut"}, "is_accepted": false, "score": 0, "last_activity_date": 1571857514, "last_edit_date": 1571857514, "creation_date": 1571856654, "answer_id": 58529326, "question_id": 58529272, "link": "https://stackoverflow.com/questions/58529272/can-anyone-explain-me-what-is-the-logic-behind-these-statement/58529326#58529326", "title": "can anyone explain me what is the logic behind these statement", "body": "<p>You use <code>&amp;</code> as a bitwise AND, <code>1 &lt;&lt; k-1</code> means that 1 is bit-shifted to the left by the amount of <code>k-1</code>:</p>\n\n<p><code>$a &amp; $b</code><br>\nAnd: Bits that are set in both <code>$a</code> and <code>$b</code> are set.</p>\n\n<p><code>$a &lt;&lt; $b</code><br>\nShift left: Shift the bits of <code>$a</code> <code>$b</code> steps to the left (each step means \"multiply by two\")</p>\n\n<p>Example:</p>\n\n<p>1001 &amp; 1000 = 1000 (the first 1 is in both)</p>\n\n<p>11001&lt;&lt;2 = 1100100 (shifted 2 to the left)</p>\n"}, {"tags": [], "owner": {"reputation": 1207, "user_id": 1366591, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bcb773bbfe3cb82d192072cad1f0b12?s=128&d=identicon&r=PG", "display_name": "ACB", "link": "https://stackoverflow.com/users/1366591/acb"}, "is_accepted": false, "score": 2, "last_activity_date": 1571856971, "creation_date": 1571856971, "answer_id": 58529394, "question_id": 58529272, "link": "https://stackoverflow.com/questions/58529272/can-anyone-explain-me-what-is-the-logic-behind-these-statement/58529394#58529394", "title": "can anyone explain me what is the logic behind these statement", "body": "<p><code>a &amp; b</code> is bitwise AND. The result will be a number where all bits that are 1 in <code>a</code> and <code>b</code> will be one and all other bits will be zero. Eg <code>101 &amp; 110 = 100</code></p>\n\n<p><code>a &lt;&lt; b</code> is binary shift left. It will take the bits of <code>a</code> and shift them to the left by <code>b</code> positions filling with zeros from the right and discarding the overflow. Eg <code>1011 &lt;&lt; 1 = 0110</code></p>\n\n<p>The statement in your code will create a number where bit <code>k-1</code> is set (<code>1 &lt;&lt; (k-1)</code>) and then AND it with <code>num</code>. The result is a number != 0 iff bit <code>k-1</code> is set in num. This will then be casted to bool. Since any value != 0 is boolean <code>true</code> in C++ this function tests wether or not bit <code>k-1</code> is <code>1</code> in <code>num</code></p>\n"}], "owner": {"reputation": 41, "user_id": 8222262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beff21c1b2610bd69521479ea6c620ac?s=128&d=identicon&r=PG", "display_name": "Coder_junkyarad", "link": "https://stackoverflow.com/users/8222262/coder-junkyarad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571857514, "creation_date": 1571856354, "last_edit_date": 1571856373, "question_id": 58529272, "link": "https://stackoverflow.com/questions/58529272/can-anyone-explain-me-what-is-the-logic-behind-these-statement", "title": "can anyone explain me what is the logic behind these statement", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nbool klsb(int num, int k) {\n    return (num &amp; (1&lt;&lt;(k-1)));\n}\n\nint main() {\n    int t;\n    scanf(\"%d\",&amp;t);\n    while(t--) {\n        int num,k;\n        scanf(\"%d%d\",&amp;num, &amp;k);\n        cout&lt;&lt; klsb(num,k)&lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>In the above code, what does</p>\n\n<pre><code>return (num &amp; (1&lt;&lt;(k-1)));\n</code></pre>\n\n<p>mean?</p>\n"}, {"tags": ["c++", "bit-manipulation", "llvm"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1571856356, "post_id": 58529192, "comment_id": 103382430, "body": "Asking for tutorials is off-topic for StackOverflow."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1571856424, "post_id": 58529192, "comment_id": 103382456, "body": "<i>&quot;...typically up to 3 bits...&quot;</i> possibly spare bits because of alignment requirements of the pointed to type."}, {"owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1571859524, "post_id": 58529192, "comment_id": 103383700, "body": "@RemyLebeau this question <a href=\"https://stackoverflow.com/questions/509211/understanding-slice-notation\" title=\"understanding slice notation\">stackoverflow.com/questions/509211/understanding-slice-notat&zwnj;&#8203;ion</a> has 2969 votes and it is asking for explanation as my question"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 0, "creation_date": 1571862506, "post_id": 58530180, "comment_id": 103384894, "body": "I found out that this technique is called Tagged Pointer, I edited the question for more info about it. anyhow, I think that 3 bits is not so much, and maybe this would not be good during debugging (I may be incorrect)"}, {"owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "reply_to_user": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 1, "creation_date": 1571897771, "post_id": 58530180, "comment_id": 103393185, "body": "No, this is not a tagged pointer. A tagged pointer is when the int is used to describe what the pointer points to, e.g. &#39;this is a pointer to an int&#39;, &#39;this is a pointer to a string&#39;. Tagged pointers typically use much more than eight types, so need more than 3 bits. This class is used for other purposes, quite often for storing an enum and a pointer."}, {"owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "edited": false, "score": 0, "creation_date": 1571904534, "post_id": 58530180, "comment_id": 103396263, "body": "OK thanks for clearing that out, it seemed related to me, I removed my edit and the question is on hold anyway"}], "tags": [], "owner": {"reputation": 6958, "user_id": 857727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1", "display_name": "arnt", "link": "https://stackoverflow.com/users/857727/arnt"}, "is_accepted": true, "score": 1, "last_activity_date": 1571860792, "creation_date": 1571860792, "answer_id": 58530180, "question_id": 58529192, "link": "https://stackoverflow.com/questions/58529192/understanding-pointerintpair-class-in-llvm/58530180#58530180", "title": "Understanding PointerIntPair Class in LLVM", "body": "<p>That particular class takes advantage of the fact that on many architectures, the low <em>n</em> bits of pointers are all zero. <em>n</em> is often 3 on today's 64-bit machines.</p>\n\n<p>Therefore, it's possible to store a pointer and a small integer on top of each other, by checking that those bits are zero when the pointer is accepted during object initialisation and setting them to zero when returning the pointer for usage.</p>\n\n<p>It would also be possible to store a few booleans, but what this class stored is an int.</p>\n"}], "owner": {"reputation": 183, "user_id": 3083483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce8264bee2a26a893958a5dbd219e2bc?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3083483/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "closed_date": 1571894273, "accepted_answer_id": 58530180, "answer_count": 1, "score": 0, "last_activity_date": 1571904375, "creation_date": 1571856015, "last_edit_date": 1571904375, "question_id": 58529192, "link": "https://stackoverflow.com/questions/58529192/understanding-pointerintpair-class-in-llvm", "closed_reason": "Not suitable for this site", "title": "Understanding PointerIntPair Class in LLVM", "body": "<p>I am looking for a bit-packing like schemed for compressing integers, then I came across the <strong><a href=\"https://llvm.org/doxygen/PointerIntPair_8h_source.html\" rel=\"nofollow noreferrer\">PinterIntPair</a></strong> part of the <strong>LLVM</strong> project, however I couldn't figure out exactly how this is done. Would anyone elaborate more about it!</p>\n\n<p>They explain:</p>\n\n<blockquote>\n  <p>PointerIntPair - This class implements a pair of a pointer and small\n  integer.  It is designed to represent this in the space required by\n  one pointer by bitmangling the integer into the low part of the\n  pointer.  This can only be done for small integers: typically up to 3\n  bits, but it depends on the number of bits available according to\n  PointerLikeTypeTraits for the type.</p>\n</blockquote>\n"}, {"tags": ["c++", "compilation", "mingw", "mingw-w64", "codelite"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1571857070, "post_id": 58529130, "comment_id": 103382754, "body": "Any spaces in any of the installation directory names?"}], "answers": [{"tags": [], "owner": {"reputation": 2035, "user_id": 492029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7a38730cb1eaf6a784c74235c2661a?s=128&d=identicon&r=PG", "display_name": "Eran", "link": "https://stackoverflow.com/users/492029/eran"}, "is_accepted": false, "score": 1, "last_activity_date": 1571858410, "creation_date": 1571858410, "answer_id": 58529686, "question_id": 58529130, "link": "https://stackoverflow.com/questions/58529130/codelite-wont-detect-installed-mingw-and-will-not-compile-even-with-manual/58529686#58529686", "title": "CodeLite won&#39;t detect (installed) MinGW -- and will not compile even with manual configuration", "body": "<p>CodeLite does not need the compiler to be in the path. You can \"tell\" CodeLite where it is installed by pointing it to the right folder from <code>Settings-&gt;Build Settings</code></p>\n\n<p>See <a href=\"https://wiki.codelite.org/pmwiki.php/Main/AddNewCompiler\" rel=\"nofollow noreferrer\">this wiki page</a>, note that the build settings dialog is a bit outdated, the drop down button does not exist anymore, instead you have a toolbar with green <code>+</code> button, click it instead.</p>\n\n<p>Once you added the compiler, right click on your project and and select <code>Project Settings</code>, under the <code>General</code> tab, choose the compiler you just configured.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1272924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e9ed9f2c112bea3188fb6f653e7b86?s=128&d=identicon&r=PG", "display_name": "sillyparrot", "link": "https://stackoverflow.com/users/1272924/sillyparrot"}, "is_accepted": false, "score": 1, "last_activity_date": 1592791578, "creation_date": 1592791578, "answer_id": 62506467, "question_id": 58529130, "link": "https://stackoverflow.com/questions/58529130/codelite-wont-detect-installed-mingw-and-will-not-compile-even-with-manual/62506467#62506467", "title": "CodeLite won&#39;t detect (installed) MinGW -- and will not compile even with manual configuration", "body": "<p>I had the same issue where I had MinGW installed and working, then I downloaded CodeLite and went into the setup wizard, where it could not find MinGW.</p>\n<p>Essentially the fix I found was closing and re-opening CodeLite.</p>\n<p>I saw on the CodeLite site that the compiler should not be in a folder path with spaces in it, so I moved my compiler from &quot;Program Files&quot; to &quot;ProgramFiles&quot; and manually pointed to it using Settings -&gt; Build Settings. However, CodeLite's scan still couldn't find it until I restarted it.</p>\n<p>Then I moved my compiler back to its original folder and restarted CodeLite again, it worked.</p>\n"}], "owner": {"reputation": 11, "user_id": 6365378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e704d019ced910c1e9d9596c8c79952?s=128&d=identicon&r=PG", "display_name": "The Yuplia", "link": "https://stackoverflow.com/users/6365378/the-yuplia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5090, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1603616768, "creation_date": 1571855760, "last_edit_date": 1571856105, "question_id": 58529130, "link": "https://stackoverflow.com/questions/58529130/codelite-wont-detect-installed-mingw-and-will-not-compile-even-with-manual", "title": "CodeLite won&#39;t detect (installed) MinGW -- and will not compile even with manual configuration", "body": "<p>I installed CodeLite and was rightfully put in the direction to install MinGW. I installed MinGW right from where CodeLite suggests/links to it and everything went well there. I then click \"scan\" on CodeLite to find the just installed compiler and it says it can't find any on the system -- lost already here.</p>\n\n<p>I then just tried to configure the directory of the compiler to one which is provided with MinGW, such as gcc. I try to compile any basic hello world or such and get the error that, \"The system cannot find the file path specified.\" When trying by default it would compile even before actually properly setting up the compiler, so it seems completely backwards on the face of it. Maybe it's some cross/directory issue?</p>\n\n<p>The log shows CMD.exe looking to cd to some weird/incorrect directory. I've changed environment variables to only include MinGW's path and the issue persists. I've changed around global settings/include paths/build settings to point to the compiler, but it just won't get past this.</p>\n\n<p>Aside from manual setup not working and CodeLite being unable to find MinGW despite it being 100% verified and installed properly, I am basically lost here.</p>\n\n<p>I have prior programming experience, but usually with everything out of the box. I'm now trying to get back in but wanted to learn the process of setting up a compiler/getting more \"hands on.\"</p>\n\n<p>I'm pretty sure it's something set up wrong by me, but the problem is clearly that I have no idea what.</p>\n"}, {"tags": ["c++", "ios", "xcode", "cocoapods"], "answers": [{"tags": [], "owner": {"reputation": 9274, "user_id": 42484, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e6ee53651624f055ff4b0a6cbabb02b2?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/42484/greg"}, "is_accepted": true, "score": 0, "last_activity_date": 1572040739, "creation_date": 1572040739, "answer_id": 58566241, "question_id": 58529100, "link": "https://stackoverflow.com/questions/58529100/what-do-i-need-to-do-to-get-cocoapods-to-build-with-c/58566241#58566241", "title": "What do I need to do to get cocoapods to build with C++?", "body": "<p>It looks like the key was adding <code>private_header_files</code> entries to remove the C++ headers from the framework that Cocoapods exports.</p>\n\n<p>Although Cocoapods is documented to only include the files from <code>public_header_files</code> in the generated module umbrella header, it looks like each <code>subspec</code> section has all of its headers included if that <code>subspec</code> section doesn't have its own <code>public_header_files</code> entry.</p>\n\n<p>The C++ files were all compiled in a <code>subspec</code> section to let me use different compiler settings, so the <code>private_header_files</code> entry needed to be inside that <code>subspec</code> section as well.</p>\n"}], "owner": {"reputation": 9274, "user_id": 42484, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e6ee53651624f055ff4b0a6cbabb02b2?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/42484/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 58566241, "answer_count": 1, "score": 1, "last_activity_date": 1572040739, "creation_date": 1571855671, "question_id": 58529100, "link": "https://stackoverflow.com/questions/58529100/what-do-i-need-to-do-to-get-cocoapods-to-build-with-c", "title": "What do I need to do to get cocoapods to build with C++?", "body": "<p>I'm trying to build a library to distribute via Cocoapods. The library is written mainly in Objective C, but includes a few C++ files. None of the C++ headers are part of the library's public API. The library builds fine in Xcode, and I can distribute as a framework, but a pod is probably easier for others to consume, right?</p>\n\n<p>This is my first time attempting to build a cocoapod, so I may be doing something obviously wrong.</p>\n\n<p>When I run <code>pod lib lint</code> or try to build the demo app that depends on the pod, I get error messages that suggest that the build system doesn't understand C++ at all.</p>\n\n<p><em>in a C++ header file:</em></p>\n\n<pre><code>class CGuard {\n&gt; unknown type name 'class'; did you mean 'Class'?\n</code></pre>\n\n<p><em>in another C++ header file:</em></p>\n\n<pre><code>template&lt;typename T&gt;\nclass CContexts {\n&gt; unknown type name 'template'\n</code></pre>\n\n<p>My podspec file includes</p>\n\n<pre><code>spec.xcconfig = {\n  'CLANG_CXX_LANGUAGE_STANDARD' =&gt; 'c++11',\n  'CLANG_CXX_LIBRARY' =&gt; 'libc++'\n}\nspec.library = \"c++\"\n</code></pre>\n\n<p>What else can I do to tell the build system to use the C++ compiler?</p>\n"}, {"tags": ["c++", "sorting", "vector", "lambda"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1571855514, "post_id": 58529033, "comment_id": 103382094, "body": "Did you turn on C++11 or higher?"}, {"owner": {"reputation": 7, "user_id": 8730009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b255a16e18acc66dfb72ef2f66f3d953?s=128&d=identicon&r=PG&f=1", "display_name": "IP25", "link": "https://stackoverflow.com/users/8730009/ip25"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571855551, "post_id": 58529033, "comment_id": 103382102, "body": "how can i do that?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571855594, "post_id": 58529033, "comment_id": 103382127, "body": "What compiler are you using?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1571855743, "post_id": 58529033, "comment_id": 103382179, "body": "Clean compile (C++17) live: <a href=\"https://godbolt.org/z/8zkw24\" rel=\"nofollow noreferrer\">godbolt.org/z/8zkw24</a>"}, {"owner": {"reputation": 7, "user_id": 8730009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b255a16e18acc66dfb72ef2f66f3d953?s=128&d=identicon&r=PG&f=1", "display_name": "IP25", "link": "https://stackoverflow.com/users/8730009/ip25"}, "edited": false, "score": 0, "creation_date": 1571855882, "post_id": 58529033, "comment_id": 103382244, "body": "gcc version c++/4.2.1,"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1571855908, "post_id": 58529033, "comment_id": 103382257, "body": "@IP25 -- That version of gcc is ancient.  Are you using an old IDE, like maybe Dev-C++?"}, {"owner": {"reputation": 7, "user_id": 8730009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b255a16e18acc66dfb72ef2f66f3d953?s=128&d=identicon&r=PG&f=1", "display_name": "IP25", "link": "https://stackoverflow.com/users/8730009/ip25"}, "edited": false, "score": 0, "creation_date": 1571855951, "post_id": 58529033, "comment_id": 103382273, "body": "when i compile using: g++ -o MichelTriggerModule MichelTriggerModule.cpp MichelCalculationFunctions.cpp <code>root-config --cflags --glibs</code>  the error is not there though"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1571855955, "post_id": 58529033, "comment_id": 103382277, "body": "@IP25 You need to upgrade your compiler.  I&#39;d suggest at least version 5.0, but really you should go all the way and get 9.2."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1571856043, "post_id": 58529033, "comment_id": 103382307, "body": "gcc 4.2.1 - <code>July 18, 2007</code>:  Please update:  <a href=\"https://www.gnu.org/software/gcc/releases.html\" rel=\"nofollow noreferrer\">gnu.org/software/gcc/releases.html</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1571857160, "post_id": 58529033, "comment_id": 103382798, "body": "@IP25 AFAICS, gcc 4.2.1 predates C++11 completely (support for C++11 <a href=\"https://gcc.gnu.org/gcc-4.3/cxx0x_status.html\" rel=\"nofollow noreferrer\">started in 4.3</a>). I&#39;m kind of surprised the compiler is complaining about the lambda and not about the <code>auto</code>.  Support for <code>auto</code> was <a href=\"https://gcc.gnu.org/gcc-4.4/cxx0x_status.html\" rel=\"nofollow noreferrer\">added in 4.4</a>, support for lambdas <a href=\"https://gcc.gnu.org/gcc-4.5/cxx0x_status.html\" rel=\"nofollow noreferrer\">was added in 4.5</a>"}, {"owner": {"reputation": 7, "user_id": 8730009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b255a16e18acc66dfb72ef2f66f3d953?s=128&d=identicon&r=PG&f=1", "display_name": "IP25", "link": "https://stackoverflow.com/users/8730009/ip25"}, "edited": false, "score": 0, "creation_date": 1571882934, "post_id": 58529033, "comment_id": 103389676, "body": "it came as a warning, but it still ran"}], "owner": {"reputation": 7, "user_id": 8730009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b255a16e18acc66dfb72ef2f66f3d953?s=128&d=identicon&r=PG&f=1", "display_name": "IP25", "link": "https://stackoverflow.com/users/8730009/ip25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571856866, "creation_date": 1571855409, "last_edit_date": 1571856866, "question_id": 58529033, "link": "https://stackoverflow.com/questions/58529033/trying-to-sort-a-vector-with-a-lambda-but-keep-getting-an-expected-expression", "title": "Trying to sort a vector with a lambda but keep getting an &quot;expected expression&quot; error", "body": "<p>Here is my code function:</p>\n\n<pre><code>template&lt;typename W&gt;\nvoid cut(std::vector&lt;W&gt;&amp; data,  double frac)\n{\n    auto size = data.size();\n    //calculate number of elements to be kept\n    int to_stay = floor(frac*size);\n\n    std::sort(data.begin(),data.end(),\n          [](const W&amp; a, const W&amp; b)-&gt;bool\n          {\n          return a &lt;b;\n          });\n\n    // erase all elements after the last one to be kept\n    data.erase(data.begin(), data.begin() + to_stay);\n    data.erase(data.end() - to_stay, data.end());\n}\n</code></pre>\n\n<p>But I keep getting an error saying:</p>\n\n<pre><code>[](const W&amp; a, const W&amp; b)-&gt;bool    error: expected expression\n</code></pre>\n\n<p>What can I do?</p>\n"}, {"tags": ["c++", "linux", "shared-libraries", "mingw", "automake"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 9851332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f8b597adb68176ef681930c559f1c8?s=128&d=identicon&r=PG&f=1", "display_name": "xdimy", "link": "https://stackoverflow.com/users/9851332/xdimy"}, "is_accepted": true, "score": 1, "last_activity_date": 1571865583, "creation_date": 1571865583, "answer_id": 58531130, "question_id": 58528890, "link": "https://stackoverflow.com/questions/58528890/a-problem-with-automake-mingw-cross-compiling-of-a-shared-library-linked-to-an-i/58531130#58531130", "title": "A problem with automake Mingw cross-compiling of a shared library linked to an installed static library", "body": "<p>Just found a solution (or workaround) how to make this link on Mingw (and produce dll):</p>\n\n<p>instead of <code>libshared_la_LIBADD = -lsodium</code> that causes libtool to search for the libsodium shared library, I just passed an option <code>-Wl,-lsodium</code> to the linker in <code>libshared_la_CFLAGS</code>.</p>\n"}], "owner": {"reputation": 46, "user_id": 9851332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f8b597adb68176ef681930c559f1c8?s=128&d=identicon&r=PG&f=1", "display_name": "xdimy", "link": "https://stackoverflow.com/users/9851332/xdimy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 58531130, "answer_count": 1, "score": 0, "last_activity_date": 1571908433, "creation_date": 1571854880, "last_edit_date": 1571908433, "question_id": 58528890, "link": "https://stackoverflow.com/questions/58528890/a-problem-with-automake-mingw-cross-compiling-of-a-shared-library-linked-to-an-i", "title": "A problem with automake Mingw cross-compiling of a shared library linked to an installed static library", "body": "<p>I am building a test hello-world executable module linking to a simple shared object library 'libshared' which, in turn, links to a static library 'libsodium' that was built in the 'depends' directory.\nOS is Ubuntu 16.04.6 LTS.</p>\n\n<p>When I build this for Linux the build is okay.\nWhen I build this for Mingw this libtool error message is printed:</p>\n\n<pre><code>*** Warning: This system cannot link to static lib archive /home/ubuntu/repo/test-dll/depends/x86_64-w64-mingw32/share/../lib/libsodium.la.\n*** I have the capability to make that library automatically link in when\n*** you link to this library.  But I can only do this if you have a\n*** shared version of the library, which you do not appear to have.\n</code></pre>\n\n<p>and recipe for target 'libshared.la' failed.</p>\n\n<p>The Makefile.am:</p>\n\n<pre><code>.PHONY: gen\n.INTERMEDIATE: $\n\n# shared lib\nlib_LTLIBRARIES = libshared.la\nlibshared_la_SOURCES = \\\n    src/example_dll.c\nlibshared_la_CPPFLAGS = -I$(top_srcdir)/src -I /src\nlibshared_la_CFLAGS = -DBUILDING_EXAMPLE_DLL -O2  -Wno-unused-parameter\nlibshared_la_LDFLAGS = -no-undefined\nlibshared_la_LIBADD = -lsodium\n#libshared_la_LIBADD = $(prefix)/lib/libsodium.la\n\n# executable\ninst_PROGRAMS = testexe\ninstdir=$(prefix)/bin\ntestexe_SOURCES = \\\n     src/example_exe.c\ntestexe_CFLAGS = -DBUILDING_EXAMPLE_DLL -O2  -Wno-unused-parameter\ntestexe_CPPFLAGS = -I$(top_srcdir)/src\ntestexe_LDADD = libshared.la\n</code></pre>\n\n<p>How I invoke configure and make (build_win.sh):</p>\n\n<pre><code>export HOST=x86_64-w64-mingw32\nCXX=x86_64-w64-mingw32-g++-posix\nCC=x86_64-w64-mingw32-gcc-posix\nPREFIX=\"$(pwd)/depends/$HOST\"\n\nset -eu -o pipefail\nset -x\n\ncd depends/ &amp;&amp; make HOST=$HOST V=1 NO_QT=1\ncd ../\n\n./autogen.sh\nCONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site ./configure --prefix=\"${PREFIX}\" --host=x86_64-w64-mingw32\nCC=\"${CC} -g \" CXX=\"${CXX} -g \" make V=1\n</code></pre>\n\n<p>configure.ac params is trivial</p>\n\n<hr>\n\n<p>The only way I managed to build it was if I manually moved libsodium.la into the root of the distribution and 'libsodium.a' in the '.libs' subdirectory and manually corrected libsodium.la parameters 'libdir to '' (was '/home/ubuntu/repo/test-dll/depends/x86_64-w64-mingw32/share/../lib/libsodium.a') and 'installed' to 'no' (was 'yes'). </p>\n\n<p>So my questions are:</p>\n\n<p>Why is it trying to link libsodium as a shared library when it is in 'depends' directory and set as 'installed=yes' (I need to link it as static)? </p>\n\n<p>Could I have correct automake settings for MINGW to link my shared library to static libs in 'depends' directory?</p>\n"}, {"tags": ["c++", "enums", "modulus", "srand"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 3, "creation_date": 1571854726, "post_id": 58528782, "comment_id": 103381770, "body": "You can&#39;t calculate module with floats."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1571854940, "post_id": 58528782, "comment_id": 103381863, "body": "There&#39;s <a href=\"https://en.cppreference.com/w/cpp/numeric/math/fmod\" rel=\"nofollow noreferrer\"><code>fmod</code></a> but I don&#39;t think OP wants to use <code>float</code> here at all."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571855583, "post_id": 58528877, "comment_id": 103382119, "body": "Why <code>static_cast</code>?  Why not just make them <code>int</code>&#39;s?"}, {"owner": {"reputation": 1381, "user_id": 7040601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8645047cc60a3d4cc3a43239b5b523bf?s=128&d=identicon&r=PG&f=1", "display_name": "FutureJJ", "link": "https://stackoverflow.com/users/7040601/futurejj"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571856076, "post_id": 58528877, "comment_id": 103382320, "body": "@NathanOliver An elaborate explanation at <a href=\"https://stackoverflow.com/a/26269263/7040601\">stackoverflow.com/a/26269263/7040601</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571856319, "post_id": 58528877, "comment_id": 103382410, "body": "I&#39;m not asking why use static cast vs c-style cast, I&#39;m asking why cast at all.  Since you are only using them in an integer context, if you just change them to <code>int</code>&#39;s instead of <code>floats</code>&#39;s then you don&#39;t need all that verbosity."}, {"owner": {"reputation": 1381, "user_id": 7040601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8645047cc60a3d4cc3a43239b5b523bf?s=128&d=identicon&r=PG&f=1", "display_name": "FutureJJ", "link": "https://stackoverflow.com/users/7040601/futurejj"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571857029, "post_id": 58528877, "comment_id": 103382736, "body": "It would be good only if OP wants the variable in problematic line to be int, if he wants to accept input as float and do some float operations then int won&#39;t work."}], "tags": [], "owner": {"reputation": 1381, "user_id": 7040601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8645047cc60a3d4cc3a43239b5b523bf?s=128&d=identicon&r=PG&f=1", "display_name": "FutureJJ", "link": "https://stackoverflow.com/users/7040601/futurejj"}, "is_accepted": false, "score": 1, "last_activity_date": 1571856784, "last_edit_date": 1571856784, "creation_date": 1571854844, "answer_id": 58528877, "question_id": 58528782, "link": "https://stackoverflow.com/questions/58528782/c-using-variables-in-equations-error-expression-must-have-integral-or-unscop/58528877#58528877", "title": "C++ Using variables in equations; error: expression must have integral or unscoped enum type &amp; others", "body": "<p>So, the error is <code>%</code> operator cannot be used with float values, it can only be used with integer(<code>int</code>) data types.</p>\n\n<p>You need to typecast <code>float</code> to an <code>int</code>, one method is by using <code>static_cast&lt;int&gt;(yourFloatNumber)</code> so that your calculation code line looks like this:</p>\n\n<pre><code>computerNumber = rand( ) % (static_cast&lt;int&gt;(rangeLow) - static_cast&lt;int&gt;(rangeHigh + 1)) + 10;\n</code></pre>\n\n<blockquote>\n  <p>The modulus operator (%) has a stricter requirement in that its\n  operands must be of integral type.</p>\n</blockquote>\n\n<p>Another solution enlightened by @NathanOliver in the comments: If you are ok with using <code>int</code> instead of <code>float</code> for <code>rangeLow</code> and <code>rangeHigh</code> all across your code then typecasting wouldn't be required at all.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/cpp/multiplicative-operators-and-the-modulus-operator?view=vs-2019#remarks\" rel=\"nofollow noreferrer\">Reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1571858911, "last_edit_date": 1571858911, "creation_date": 1571856916, "answer_id": 58529386, "question_id": 58528782, "link": "https://stackoverflow.com/questions/58528782/c-using-variables-in-equations-error-expression-must-have-integral-or-unscop/58529386#58529386", "title": "C++ Using variables in equations; error: expression must have integral or unscoped enum type &amp; others", "body": "<p><code>%</code> is the modulus operator for integer values. Your range endpoints are floating point variables. In your exercise, you should make the endpoints, <code>computerNumber</code> and <code>guess</code> into <code>int</code> variables.</p>\n\n<pre><code>int rangeLow, rangeHigh, computerNumber, guess;\n</code></pre>\n\n<p>Then take a look at the computer's number generator and insert some values to try it out:</p>\n\n<pre><code>computerNumber = rand() % (rangeLow - rangeHigh + 1) + 10;\n                 rand() % (   5     -    20     + 1) + 10;\n                 rand() %          -14               + 10;\n</code></pre>\n\n<p>So, you'll have <code>rand() % -14 + 10</code>. That doesn't look correct. Reverse the range endpoints:</p>\n\n<pre><code>computerNumber = rand() % (rangeHigh - rangeLow + 1) + 10;\n                 rand() % (   20     -    5     + 1) + 10;\n                 rand() %            16              + 10;\n</code></pre>\n\n<p>This, <code>rand() % 16 + 10</code>, is better, but will obviously create a number in the range <code>[10, 10+16)</code>, or to put it differently (as a closed interval), <code>[10, 25]</code>. If you replace <code>+10</code> with <code>+rangeLow</code> like this:</p>\n\n<pre><code>computerNumber = rand() % (rangeHigh - rangeLow + 1) + rangeLow;\n</code></pre>\n\n<p>You now get the range like this:</p>\n\n<pre><code>[rangeLow, rangeLow + rangeHigh - rangeLow + 1)                             =&gt;\n[rangeLow, rangeHigh + 1)                          (left-closed interval)   =&gt;\n[rangeLow, rangeHigh]                              (closed interval)\n</code></pre>\n\n<p>Which means <code>[5, 20]</code> with the example values I used.</p>\n\n<p>Now, take a look at &lt;<a href=\"https://en.cppreference.com/w/cpp/header/random\" rel=\"nofollow noreferrer\">random</a>>.\nThat part of the standard library contains classes and functions to make all this much simpler:</p>\n"}], "owner": {"reputation": 3, "user_id": 12264833, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBVezEYL4AyRRsg-KpWLb5_ZfQdpncGcxeXVp8p7A=k-s128", "display_name": "Gut wrenched", "link": "https://stackoverflow.com/users/12264833/gut-wrenched"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 58529386, "answer_count": 2, "score": 0, "last_activity_date": 1571858911, "creation_date": 1571854387, "question_id": 58528782, "link": "https://stackoverflow.com/questions/58528782/c-using-variables-in-equations-error-expression-must-have-integral-or-unscop", "title": "C++ Using variables in equations; error: expression must have integral or unscoped enum type &amp; others", "body": "<pre><code>srand( 0 );\nint points; // number of points\nfloat computerNumber; // number generated by the computer\nfloat guess; // user's guess\nchar quit; // What the user enters when they want to quit\nint totalPoints; //the total score of all of the games played\nint avgPoints; // the average score of all games played\nint gamesPlayed; // how many games have been played\nfloat rangeLow; // the lower end of the range\nfloat rangeHigh; // the higher end of the range\npoints = 5;\nquit = 'n';\ngamesPlayed = 0;\ntotalPoints = 0;\nwhile ( quit != 'q' )\n{\n\n    gamesPlayed++;\n    cout &lt;&lt; \"Welcome to Guessing Game! \\n\";\n    points = 5;\n    cout &lt;&lt; \"What would you like your range to be? \\n\";\n    cout &lt;&lt; \"Low number: \\n\";\n    cin &gt;&gt; rangeLow;\n    cout &lt;&lt; \"High number: \\n\";\n    cin &gt;&gt; rangeHigh;\n    if ( rangeLow &gt; rangeHigh )\n    {\n        cout &lt;&lt; \"Please use a high number that is greater than the low number. \\n\";\n        cout &lt;&lt; \"Low number: \\n\";\n        cin &gt;&gt; rangeLow;\n        cout &lt;&lt; \"High number: \\n\";\n        cin &gt;&gt; rangeHigh;\n    }\n    else\n    {\n        ;\n    }\n    computerNumber = rand( ) % (rangeLow - rangeHigh + 1) + 10;\n    cout &lt;&lt; \"Computer Number: \" &lt;&lt; computerNumber &lt;&lt; endl;\n    cout &lt;&lt; \"Points:\" &lt;&lt; points &lt;&lt; endl;\n    cout &lt;&lt; \"what is your guess? \\n\" &lt;&lt; endl;\n    cin &gt;&gt; guess;\n    cout &lt;&lt; \"Your guess is: \" &lt;&lt; guess &lt;&lt; endl;\n</code></pre>\n\n<p>When I input this code (among other error-free lines of code that don't affect these lines), it won't compile and outputs two error messages- \"expression must have integral or unscoped enum type\" and \"'%' is illegal, right operand has type 'float'\"</p>\n\n<p>I have a feeling that it has something to do with using variables in my equation, but that shouldn't be a problem? All of the variable types are float that have to do with this equation, and I'm pretty confused. </p>\n"}, {"tags": ["c++", "qt", "ubuntu", "qt5", "qsystemtrayicon"], "owner": {"reputation": 45, "user_id": 11353167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6432ecbda65429d260d227529912d3ca?s=128&d=identicon&r=PG&f=1", "display_name": "anshah", "link": "https://stackoverflow.com/users/11353167/anshah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571854943, "creation_date": 1571854182, "last_edit_date": 1571854943, "question_id": 58528727, "link": "https://stackoverflow.com/questions/58528727/qsystemtrayicon-signals-not-emitting-on-mouse-click-in-ubuntu-19-04", "title": "QSystemTrayIcon signals not emitting on mouse click in Ubuntu 19.04", "body": "<p>I have just installed Ubuntu 19.04 and I'm using the Qt distribution it provides in the apt-get repo. I'm seeing that the QSytemTrayIcon signals do not emit upon mouse click. I'm aware of the issues with \"activated\" signal so I also connected a slot to listen to the \"aboutToShow\" signal from the QSystemTrayIcon's context menu which also should emit on mouse click. Neither of these signals are going out.</p>\n\n<p>Here's my code for the QSystemTrayIcon:</p>\n\n<pre><code>// Create tray and setup tray icon\nvoid MyClass::createTrayIcon()\n{\n    m_pTrayIconMenu = new QMenu(this);\n    m_pTrayImage    = new QPixmap(IMG_SMALL_NOT_CONNECTED);\n    m_pTrayIcon     = new QSystemTrayIcon(this);\n\n    m_pTrayIcon-&gt;setContextMenu(m_pTrayIconMenu);\n\n    QIcon icon(*m_pTrayImage);\n    m_pTrayIcon-&gt;setIcon(icon);\n    setWindowIcon(icon);\n    m_pTrayIcon-&gt;show();\n\n    connect(m_pTrayIconMenu, SIGNAL(aboutToShow()),\n            this,            SLOT(onActivated()));\n    connect(m_pTrayIcon, SIGNAL(activated(QSystemTrayIcon::ActivationReason)),\n            this,        SLOT(onActivated(QSystemTrayIcon::ActivationReason)));\n}\n\n// Slot to handle context menu aboutToShow signal\nvoid MyClass::onActivated()\n{\n    if (!this-&gt;isVisible())\n    {\n        this-&gt;show();\n    }\n    else\n    {\n        this-&gt;hide();\n    }\n}\n\n// Slot to handle tray icon activated signal\nvoid MyClass::onActivated(QSystemTrayIcon::ActivationReason r)\n{\n    if (r == QSystemTrayIcon::Trigger)\n    {\n        if (!this-&gt;isVisible())\n        {\n            this-&gt;show();\n        }\n        else\n        {\n            this-&gt;hide();\n        }\n    }\n}\n</code></pre>\n\n<p>In Ubuntu 18.04, the signals all emitted and everything was working fine. In Ubuntu 19.04 the signals do not emit.</p>\n"}, {"tags": ["c++", "macos", "user-interface", "ide"], "answers": [{"tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1571854602, "creation_date": 1571854602, "answer_id": 58528833, "question_id": 58528650, "link": "https://stackoverflow.com/questions/58528650/how-do-i-use-the-standard-xcode-gui-on-top-of-c-code/58528833#58528833", "title": "How do I use the standard Xcode GUI on top of C++ code", "body": "<p>This is very broad.</p>\n\n<p>General principles would be to have the physics code in its own set of portable C++ files. Regular C++ and headers. Basic structures exposed, maybe expose std:: containers but keep it generic.</p>\n\n<p>Beside that, use the UI builder in xcode, but only ever refer to the physics code in code you write. This will look like:</p>\n\n<p>nice_physics.cpp</p>\n\n<pre><code>// portable code here\n</code></pre>\n\n<p>nice_physics.h</p>\n\n<pre><code>class NicePhysic\n{\n  public:\n    int nice_function(float);\n};\n</code></pre>\n\n<p>brandname_ui.cpp</p>\n\n<pre><code>// hook generated by your IDE\nUGLY_DECL_TYPE UGLY_MACRO valueChanged(UGLY_TYPE i)\n{\n    NicePhysic phys; // move this object to wherever the UI system you use allows it\n    // make whatever calls you need to your physics system\n    phys.nice_function(0.5);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "is_accepted": false, "score": 0, "last_activity_date": 1571854649, "creation_date": 1571854649, "answer_id": 58528841, "question_id": 58528650, "link": "https://stackoverflow.com/questions/58528650/how-do-i-use-the-standard-xcode-gui-on-top-of-c-code/58528841#58528841", "title": "How do I use the standard Xcode GUI on top of C++ code", "body": "<p>Objective C++ is your answer. If you name your files with a .mm extension, you can use mix and match C++ features with Objective C features. You'll have two object systems running side by side. You can't derive C++ classes from Objective C classes and vice versa, but that's about the only major limitation. C++ code can construct ObjC objects and send ObjC messages, ObjC methods can instantiate and call C++ objects.</p>\n"}], "owner": {"reputation": 137, "user_id": 5125742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f902608bfc980a1c24d96656be027b?s=128&d=identicon&r=PG&f=1", "display_name": "userJohn", "link": "https://stackoverflow.com/users/5125742/userjohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571975827, "creation_date": 1571853851, "last_edit_date": 1571975827, "question_id": 58528650, "link": "https://stackoverflow.com/questions/58528650/how-do-i-use-the-standard-xcode-gui-on-top-of-c-code", "title": "How do I use the standard Xcode GUI on top of C++ code", "body": "<p>I have a book that teaches physics for game developers.  The code is generic C-style code.  However, the examples use GUI's to interface with the code (variable initialization, start conditions, etc...). The GUI code is not implemented and is left to the reader.  Ideally, at home on my MAC, I would like to use the GUI builder in Xcode to build these little interfaces and then use the GUI to run the code.  However, I don't want to code the physics code in Swift or Objective-C, I just want to code it in C++ so that I can transfer the code to work (which is Windows and uses Visual Studios).  If someone could just point me in the direction of a resource that explains how to have a MAC GUi call C++ code and do this all in Xcode, that would be great.</p>\n\n<p>I have done some searches but I don't think I am a using the correct terminology to get the correct results.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 8886, "user_id": 866930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4d18c82ab14aa57718bb3343876d53?s=128&d=identicon&r=PG", "display_name": "jrd1", "link": "https://stackoverflow.com/users/866930/jrd1"}, "edited": false, "score": 4, "creation_date": 1571853214, "post_id": 58528480, "comment_id": 103381112, "body": "Use <code>std::vector</code>"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 5, "creation_date": 1571853215, "post_id": 58528480, "comment_id": 103381113, "body": "It&#39;s <code>std::vector</code>, not <code>vector</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1571853572, "post_id": 58528480, "comment_id": 103381248, "body": "Just a note: <i>don&#39;t</i> pull the <code>std</code> namespace into global via <code>using</code> when you fix this. That&#39;s neither ideal nor warranted, so don&#39;t even consider that. Use proper namespace qualification (<code>std::vector</code>) as described above. <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Read this discussion</a> to better understand what I&#39;m referring to."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12264706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0dd0c58e3acc77ad322617c4e74b42?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas85281", "link": "https://stackoverflow.com/users/12264706/thomas85281"}, "edited": false, "score": 0, "creation_date": 1571906815, "post_id": 58528521, "comment_id": 103397402, "body": "that fixed it! I added &quot;using namespace std;&quot; cleaned and rebuilt the project. On to other issues. Thanks!"}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 1, "last_activity_date": 1571853328, "creation_date": 1571853328, "answer_id": 58528521, "question_id": 58528480, "link": "https://stackoverflow.com/questions/58528480/symbol-vector-could-not-be-resolved/58528521#58528521", "title": "Symbol &quot;vector&quot; could not be resolved", "body": "<blockquote>\n  <p>vector does not name a type</p>\n</blockquote>\n\n<p>You get this error because <code>vector</code> is declared in the <code>std</code> namespace. You need to write <code>std::vector&lt;float&gt; beamform;</code> instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 12264706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0dd0c58e3acc77ad322617c4e74b42?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas85281", "link": "https://stackoverflow.com/users/12264706/thomas85281"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1571853374, "answer_count": 1, "score": -4, "last_activity_date": 1571853328, "creation_date": 1571853172, "last_edit_date": 1571853255, "question_id": 58528480, "link": "https://stackoverflow.com/questions/58528480/symbol-vector-could-not-be-resolved", "closed_reason": "Not suitable for this site", "title": "Symbol &quot;vector&quot; could not be resolved", "body": "<p>I'm using the  standard file, I\"m also using the Eclipse IDT. When I use the vector template in my header files, I get \"vector does not name a type\" error, or I get \"Type 'vector ' could not be resolved\". I am able to use vector fine in .cpp files in the project. I'm including the header file code below</p>\n\n<pre><code>#ifndef TX_H_\n#define TX_H_\n#include &lt;vector&gt;\n\nclass Tx {\n    int nT;\n    vector&lt;float&gt; beamform;\npublic:\n    Tx(int);\n    virtual ~Tx();\n    vector &lt;float&gt; Trans(float);\n};\n\n#endif /* TX_H_ */\n</code></pre>\n\n<p>The line \"vector beamform\" produces the  \"vector does not name a type\" error. The line vector  Trans(float); produces the \"Type 'vector ' could not be resolved\" error. Please advise. I do need to pass vectors as parameters. So, if I'm not allowed to declare vector types, what is the workaround ?</p>\n"}, {"tags": ["python", "c++", "numpy", "swig", "typemaps"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1571857961, "post_id": 58528367, "comment_id": 103383092, "body": "In tester.py what does <code>print(type(a[1]))</code> show?"}, {"owner": {"reputation": 314, "user_id": 12114274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f20bff7c299c44c9a4df3647b1987d1?s=128&d=identicon&r=PG&f=1", "display_name": "Otherness", "link": "https://stackoverflow.com/users/12114274/otherness"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1571858818, "post_id": 58528367, "comment_id": 103383418, "body": "@Flexo &lt;class &#39;numpy.int64&#39;&gt;"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1571861266, "post_id": 58528367, "comment_id": 103384392, "body": "That&#39;s the problem then, but I&#39;m less sure what the right fix for numpy is. Maybe make the function take int64_t from <code>#include &lt;stdint.h&gt;</code>?"}, {"owner": {"reputation": 314, "user_id": 12114274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f20bff7c299c44c9a4df3647b1987d1?s=128&d=identicon&r=PG&f=1", "display_name": "Otherness", "link": "https://stackoverflow.com/users/12114274/otherness"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1571862314, "post_id": 58528367, "comment_id": 103384827, "body": "you mean change my function to: void print_int(int64_t x);  ?   When I do that I just get this:  TypeError: in method &#39;print_int&#39;, argument 1 of type &#39;int64_t&#39;"}, {"owner": {"reputation": 314, "user_id": 12114274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f20bff7c299c44c9a4df3647b1987d1?s=128&d=identicon&r=PG&f=1", "display_name": "Otherness", "link": "https://stackoverflow.com/users/12114274/otherness"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1571867101, "post_id": 58528367, "comment_id": 103386520, "body": "Update: I&#39;ve now copied other swig/numpy.i code on my machine that works for others and I always get the same TypeError. I&#39;m thinking that it&#39;s very likely to be the fact that I&#39;m copying over numpy.i from a python2.7 folder, or that there&#39;s some other version compatibility issue."}], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 12114274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f20bff7c299c44c9a4df3647b1987d1?s=128&d=identicon&r=PG&f=1", "display_name": "Otherness", "link": "https://stackoverflow.com/users/12114274/otherness"}, "is_accepted": true, "score": 2, "last_activity_date": 1571955568, "creation_date": 1571955568, "answer_id": 58549821, "question_id": 58528367, "link": "https://stackoverflow.com/questions/58528367/passing-numpy-array-element-int-to-c-int-using-swig/58549821#58549821", "title": "Passing numpy array element (int) to c++ int using SWIG", "body": "<p>Solved! There were 3 issues:</p>\n\n<ol>\n<li><strong>The numpy.i file I copied over isn't compatible</strong>, and the compatible version isn't included in the installation package when you go through anaconda (still not sure why they'd do that). </li>\n</ol>\n\n<p><strong>Answer:</strong> Find which version of numpy you're running, then go here (<a href=\"https://github.com/numpy/numpy/releases\" rel=\"nofollow noreferrer\">https://github.com/numpy/numpy/releases</a>) and download the numpy-[your_version].zip file, then specifically copy the numpy.i file, found in numpy-[your_version]/tools/swig/. Now paste that numpy.i into your project working directory.</p>\n\n<ol start=\"2\">\n<li><p>As a default, numpy makes integers of type long. So <strong>in tester.py</strong> file, I needed to write: <strong>a = np.array([1,2,3], dtype=np.intc)</strong></p></li>\n<li><p>Need to convert numpy int to c++ int <strong>in add_vector.i</strong>. This can be done by using the %apply directive right above the %include \"add_vector.h\" line: <strong>%apply (int DIM1) {(int x)};</strong></p></li>\n</ol>\n"}], "owner": {"reputation": 314, "user_id": 12114274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f20bff7c299c44c9a4df3647b1987d1?s=128&d=identicon&r=PG&f=1", "display_name": "Otherness", "link": "https://stackoverflow.com/users/12114274/otherness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 58549821, "answer_count": 1, "score": 2, "last_activity_date": 1571955568, "creation_date": 1571852667, "last_edit_date": 1571858995, "question_id": 58528367, "link": "https://stackoverflow.com/questions/58528367/passing-numpy-array-element-int-to-c-int-using-swig", "title": "Passing numpy array element (int) to c++ int using SWIG", "body": "<p>I'd like to pass an integer element from a numpy array in python to a c++ function that catches it as a c++ integer using SWIG. </p>\n\n<p>What am I missing here?</p>\n\n<p>add_vector.i</p>\n\n<pre><code>%module add_vector\n%{\n    #define SWIG_FILE_WITH_INIT\n    #define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION  // gets rid of warning\n    #include \"add_vector.h\"\n%}\n\n%include \"numpy.i\"\n%init %{\nimport_array();\n%}\n\n%include \"add_vector.h\"\n</code></pre>\n\n<p>add_vector.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid print_int(int x);\n</code></pre>\n\n<p>add_vector.cpp</p>\n\n<pre><code>#include \"add_vector.h\"\n\nvoid print_int(int x) {\n    std::cout &lt;&lt; x &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>tester.py</p>\n\n<pre><code>import add_vector as vec\nimport numpy as np\n\na = np.array([1,2,3])\nprint(a[1])\nvec.print_int(a[1])\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>2\nTraceback (most recent call last):\n  File \"tester.py\", line 6, in &lt;module&gt;\n    vec.print_int(a[1])\nTypeError: in method 'print_int', argument 1 of type 'int'\n</code></pre>\n\n<p>Reading from the numpy.i manual (<a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/swig.interface-file.html#numpy-array-scalars-and-swig\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy-1.13.0/reference/swig.interface-file.html#numpy-array-scalars-and-swig</a>), I copied the pyfragments.swg file into my working directory, but nothing changed. </p>\n\n<p>I've also tried a number of %apply directives both for passing an int and an int *, but that hasn't yet changed anything. I keep getting the same TypeError I listed above. </p>\n\n<p>Versions: <strong>numpy</strong> 1.17.3 ; <strong>swig</strong> 2.0.12 ; <strong>python</strong> 3.7.3 ; <strong>numpy.i</strong> is being copied into my working directory from: /usr/lib/python2.7/dist-packages/instant/swig/numpy.i</p>\n"}, {"tags": ["c++", "mysql", "qt"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572228236, "post_id": 58539321, "comment_id": 103484001, "body": "Thanks for your response so far Soheil. But I have only tried the piece of code &#39;qDebug() &lt;&lt; db.lastError().text();&#39; and it gave me the error message &quot;Driver not loaded Driver not loaded&quot;. How do I set the QT_DEBUG PLUGINS environment variable that you mentioned, please?"}, {"owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "reply_to_user": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572240358, "post_id": 58539321, "comment_id": 103485907, "body": "Just edited my answer to include how to set env variables in Qt Creator"}, {"owner": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572769369, "post_id": 58539321, "comment_id": 103657229, "body": "Thanks a lot Soheil for your response and the attached image. Sorry for getting back to you late. I followed your advice. Yes, I am using Qt Creator. When I added the QT_PLUGINS_ENVIRONMENT variables and run the application I got the following as part of what appears in the output console."}, {"owner": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572769851, "post_id": 58539321, "comment_id": 103657301, "body": "&quot;The plugin &#39;C:/Qt/5.13.0/mingw73_64/plugins/sqldrivers/qsqlite.dll&#39; uses incompatible Qt library. (Cannot mix debug and release libraries.)&quot;      not a plugin QFactoryLoader::QFactoryLoader() looking at &quot;C:/Qt/5.13.0/mingw73_64/plugins/sqldrivers/qsqlited.dll&quot; Found metadata in lib C:/Qt/5.13.0/mingw73_64/plugins/sqldrivers/qsqlited.dll, metadata={     &quot;IID&quot;: &quot;org.qt-project.Qt.QSqlDriverFactoryInterface&quot;,     &quot;MetaData&quot;: {         &quot;Keys&quot;: [             &quot;QSQLITE&quot;         ]     },     &quot;archreq&quot;: 1,     &quot;className&quot;: &quot;QSQLiteDriverPlugin&quot;,     &quot;debug&quot;: true,     &quot;version&quot;: 331008}"}, {"owner": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572770099, "post_id": 58539321, "comment_id": 103657342, "body": "Similar message for other drivers as you can see, but none for &#39;QMYSQL&#39; please. Got keys from plugin meta data (&quot;QODBC3&quot;, &quot;QODBC&quot;) QFactoryLoader::QFactoryLoader() looking at &quot;C:/Qt/5.13.0/mingw73_64/plugins/sqldrivers/qsqlpsql.dll&quot; Found metadata in lib C:/Qt/5.13.0/mingw73_64/plugins/sqldrivers/qsqlpsql.dll, metadata= {     &quot;IID&quot;: &quot;org.qt-project.Qt.QSqlDriverFactoryInterface&quot;,     &quot;MetaData&quot;: {         &quot;Keys&quot;: [             &quot;QPSQL7&quot;,             &quot;QPSQL&quot;         ]     },     &quot;archreq&quot;: 0,     &quot;className&quot;: &quot;QPSQLDriverPlugin&quot;,     &quot;debug&quot;: false,     &quot;version&quot;: 331008 }"}, {"owner": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572771250, "post_id": 58539321, "comment_id": 103657527, "body": "I have been to the folder &quot;C:/Qt/5.13.0/mingw73_64/plugins/sqldrivers&quot; to check and I saw files such as qsqlite.dll, qsqlited.dll, qsqlodbc.dll, qsqlodbcd.dll, qsqlpsql.dll, qsqlpsqld.dll BUT NOTHING for MYSQL. Do I need to copy something to this folder please?"}, {"owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "reply_to_user": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572773808, "post_id": 58539321, "comment_id": 103657982, "body": "Did you build this Qt or you just downloaded the prebuilt binaries from Qt website?"}, {"owner": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572781495, "post_id": 58539321, "comment_id": 103659685, "body": "I downloaded and installed the prebuilt binaries from their website and it took several hours as it was about 87 gigabit insize ."}, {"owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "reply_to_user": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572782348, "post_id": 58539321, "comment_id": 103659857, "body": "@ayedecoder 87 gigabytes ?! I don&#39;t think so. Qt never had such a big package."}, {"owner": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "edited": false, "score": 0, "creation_date": 1572811926, "post_id": 58539321, "comment_id": 103667651, "body": "It is true that I have a huge Qt installation folder. You can see it in the two images that I posted as &#39;answers&#39; above please. Do you think I should uninstall and re-install Qt? I know it takes hours to do so. I have just checked the downloaded Qt file that Iused for the installation as it is still on my computer. It is &quot;qt-unified-windows-x86-3.1.1-online.exe&quot;."}], "tags": [], "owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "is_accepted": false, "score": 0, "last_activity_date": 1572240312, "last_edit_date": 1572240312, "creation_date": 1571912744, "answer_id": 58539321, "question_id": 58528224, "link": "https://stackoverflow.com/questions/58528224/qt5-c-qmysql-driver-not-loaded/58539321#58539321", "title": "Qt5, C++: QMYSQL driver not loaded", "body": "<p>It means that the QMYSQL plugin is not available or it could not be loaded successfully. Try to set <a href=\"https://doc.qt.io/qt-5/debug.html#environment-variables-recognized-by-qt\" rel=\"nofollow noreferrer\">QT_DEBUG_PLUGINS environment variable</a> to a non-zero value and see what is happening while your executable is trying to load MySQL plugin.\nIn most cases, it's because the plugin cannot find the MySQL client libraries as you already mentioned.</p>\n\n<p>If you are using Qt Creator, note the red arrows from left to right. This is where you can add <strong><em>run</em></strong> environmental variables: \n<a href=\"https://i.stack.imgur.com/YT0z8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YT0z8.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 51, "user_id": 7281284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda8532f52457d53a0b3d4a93d50d171?s=128&d=identicon&r=PG&f=1", "display_name": "aye decoder", "link": "https://stackoverflow.com/users/7281284/aye-decoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1814, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1605013331, "creation_date": 1571852070, "last_edit_date": 1605013331, "question_id": 58528224, "link": "https://stackoverflow.com/questions/58528224/qt5-c-qmysql-driver-not-loaded", "title": "Qt5, C++: QMYSQL driver not loaded", "body": "<p>I am trying to connect to a database using MySQL server with Qt. It is not working and when I run the code, I get the error message below.</p>\n<blockquote>\n<p>QSqlDatabase: QMYSQL driver not loaded<br />\nQSqlDatabase: available drivers: QSQLITE QODBC QODBC3 QPSQL QPSQL7\nUnable to connect to the database check your connection details.</p>\n</blockquote>\n<p>I have been trying this for the past four (4) days now and I do not want to run away from the problem. So, I will really appreciate anyone's help. I have looked at several similar post but none has helped me. I have copied the files libmysql.dll and libmysqld.dll to every possible bin that I could find and none of that worked.\nI notice a big difference from my error message and the ones that other got. 'MYSQL' is not even listed as one of the available drivers in the error line that I got which is below. What does that say?</p>\n<blockquote>\n<p>QSqlDatabase: available drivers: QSQLITE QODBC QODBC3 QPSQL QPSQL7</p>\n</blockquote>\n<pre><code>#*******This is my main.cpp file**********\n\n#include &lt;QCoreApplication&gt;\n#include &lt;QtSql/QtSql&gt;\n#include &lt;QtSql/QSqlDatabase&gt;\n#include &lt;QtSql/QSqlQuery&gt;\n\n//Adding the i/o stream\n#include &lt;iostream&gt;\nusing namespace std;\n\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n//Creating a database connection\nQSqlDatabase db = QSqlDatabase::addDatabase(&quot;QMYSQL&quot;);\ndb.setHostName(&quot;localhost&quot;);\ndb.setUserName(&quot;root&quot;);\ndb.setPassword(&quot;&quot;);\ndb.setDatabaseName(&quot;qtdatabase&quot;);\n\n//Testing the connection\nif(db.open()) {\n    cout &lt;&lt; &quot;Database connected successfully&quot; &lt;&lt; endl;\n\n} else {\n\n    cout &lt;&lt; &quot;Unable to connect to the database check your connection details.&quot; &lt;&lt; endl;\n}\n\n\n    return a.exec();\n}\n\n\n#********This is my mysqlconnect.pro file**********\n\nQT += core\nQT += sql\nQT -= gui\n\nCONFIG += c++11 console\n\nTARGET = mysqlconnect\n\nCONFIG -= app_bundle\n\n\nSOURCES += \\\n        main.cpp\n\n# Default rules for deployment.\nqnx: target.path = /tmp/$${TARGET}/bin\nelse: unix:!android: target.path = /opt/$${TARGET}/bin\n!isEmpty(target.path): INSTALLS += target\n\n\n\nwin32: LIBS += -L$$PWD/../../../../Users/user/Desktop/lib/ -llibmysql\n\nINCLUDEPATH += $$PWD/../../../../Users/user/Desktop\nDEPENDPATH += $$PWD/../../../../Users/user/Desktop\n\n</code></pre>\n<hr />\n<p>I do not know why I have such a huge Qt size. You can see it in the attached images. One shows the actual folder size, and when I click on the installed Qt folder, I see both 5.12.4 and 5.13.0 versions in the folder. Is that normal? I have attached the images here please.<a href=\"https://i.stack.imgur.com/N2XKe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N2XKe.png\" alt=\"Qt installation size\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/3U4iI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3U4iI.png\" alt=\"The two versions inside the Qt folder\" /></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1571851185, "post_id": 58527959, "comment_id": 103380265, "body": "Looks like 50/50 if you bring in all of the compilers: <a href=\"https://godbolt.org/z/F1JnWH\" rel=\"nofollow noreferrer\">godbolt.org/z/F1JnWH</a>"}, {"owner": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1571851452, "post_id": 58527959, "comment_id": 103380392, "body": "@TedLyngmo wow, that was neat. I didn&#39;t know about conformance viewer."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1571851512, "post_id": 58527959, "comment_id": 103380424, "body": "Noticed it myself just a few days ago. Really nice! But I suspect it&#39;s a little buggy. The colours don&#39;t always match the result etc."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1571853198, "post_id": 58527959, "comment_id": 103381101, "body": "I think this is just a bug in GCC. You should report it."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 1, "creation_date": 1571854132, "post_id": 58527959, "comment_id": 103381482, "body": "Gcc should find U because it is a dependent name in D and because of the rule of qualified member name look up: <a href=\"http://eel.is/c++draft/basic.lookup.classref#4\" rel=\"nofollow noreferrer\">eel.is/c++draft/basic.lookup.classref#4</a>."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1571856925, "post_id": 58527959, "comment_id": 103382687, "body": "<code>using U = A&lt;T&gt;</code> is a <i>type alias</i> <a href=\"https://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">cppreference</a> that refers to a <i>type-id</i>, not to a member. So <code>B.U</code>  is an error."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1571857538, "post_id": 58527959, "comment_id": 103382941, "body": "@Ripi2 I don&#39;t think it is parsed that way. <code>U::foo</code> is a <i>qualified-name</i> which may be used as the right-hand side of a class member access operator. See also <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/operator_precedence</a>"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571857877, "post_id": 58527959, "comment_id": 103383058, "body": "@uneven_mark You&#39;re right, <code>:</code> has more precedence that <code>.</code>. Seems you picked the gcc error."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1571858372, "post_id": 58527959, "comment_id": 103383244, "body": "@Ripi2 I meant &quot;<i>qualified-id</i>&quot;, not &quot;<i>qualified-name</i>&quot;. I don&#39;t understand what you mean with &quot;<i>Seems you picked the gcc error.</i>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 4, "last_activity_date": 1571861834, "last_edit_date": 1571861834, "creation_date": 1571860021, "answer_id": 58530017, "question_id": 58527959, "link": "https://stackoverflow.com/questions/58527959/trying-to-resolve-a-gcc-specific-compilation-error/58530017#58530017", "title": "Trying to resolve a gcc specific compilation error", "body": "<p><code>U</code> in <code>b.U::foo();</code> should be looked up during instantiation in the context of <code>B&lt;T&gt;</code> first, finding <code>using U = A&lt;T&gt;;</code>, so that <code>b.U::foo()</code> calls <code>foo()</code> defined in <code>A&lt;T&gt;</code>. <a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.lookup#classref-4\" rel=\"nofollow noreferrer\">[basic.lookup.classref]/4</a></p>\n\n<p>The lookup should be delayed until instantiation and no lookup at definition should happen, because <code>b</code> is dependent as its type depends on the template parameter <code>T</code>. <a href=\"https://timsong-cpp.github.io/cppwp/n4659/temp.dep#expr-5\" rel=\"nofollow noreferrer\">[temp.dep.expr]/5</a></p>\n\n<p>Therefore this seems to be a bug in GCC. A very similar code example has been posted in <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85570\" rel=\"nofollow noreferrer\">this bug report</a>, which demonstrates the same issue as far as I can tell. The bug is currently marked status \"new\".</p>\n\n<p>As far as I can tell the other failing compilers shown in <a href=\"https://www.godbolt.org/z/F1JnWH\" rel=\"nofollow noreferrer\">the godbolt.org conformance view posted by @TedLyngmo</a> are derivatives of GCC, so it is not like independent compilers are disagreeing on this.</p>\n"}], "owner": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 58530017, "answer_count": 1, "score": 5, "last_activity_date": 1571861834, "creation_date": 1571850985, "question_id": 58527959, "link": "https://stackoverflow.com/questions/58527959/trying-to-resolve-a-gcc-specific-compilation-error", "title": "Trying to resolve a gcc specific compilation error", "body": "<p>Here is a program I am trying to compile.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nstruct A\n{\n    T foo() const\n    {\n        return 1;\n    }\n};\n\ntemplate &lt;typename T&gt;\nstruct B : A&lt;T&gt;\n{\n    using U = A&lt;T&gt;;\n    T foo() const\n    {\n        return 2;\n    }\n};\n\ntemplate &lt;typename T&gt;\nstruct D\n{\n    B&lt;T&gt; b;\n    int foo() const\n    {\n        // using U = typename B&lt;T&gt;::U; // compilation succeeds if I uncomment this line\n        return b.U::foo();\n    }\n};\n\nint main()\n{\n    D&lt;int&gt; d;\n    return d.foo();\n}\n</code></pre>\n\n<p>I see different behaviour across gcc 9.2, clang 9.0.0 and icc19.0.1.\nThe program fails to compile with gcc giving an error <code>U has not been declared</code>, compiles fine with clang and has a non-trivial assembly with icc.\nWhy is the behaviour different across these compilers?</p>\n\n<p>I tried reading <a href=\"https://en.cppreference.com/w/cpp/language/dependent_name\" rel=\"noreferrer\">dependent_name</a> but gave up since I couldn't follow it properly. From what little I understand, data member <code>b</code> inside struct <code>D</code> has a dependent type and <code>U</code> should have been resolved when the template is instantiated.</p>\n\n<p>Compiled the above code with the above compilers on godbolt.org here: <a href=\"https://godbolt.org/z/n_Wl44\" rel=\"noreferrer\">https://godbolt.org/z/n_Wl44</a>. I used C++17 with -O3 flag. Thanks in advance!!!</p>\n"}, {"tags": ["c++", "qt", "qmap", "qstringlist"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1571850221, "post_id": 58527750, "comment_id": 103379814, "body": "You are probably writing this code in a <code>const</code> member function. Please make sure that your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code is complete - the <code>classA.cpp</code> will definitely not compile."}, {"owner": {"reputation": 1, "user_id": 12264472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f5a97b8823cbc12b718a0a77e4082a2?s=128&d=identicon&r=PG&f=1", "display_name": "legendkiller0812", "link": "https://stackoverflow.com/users/12264472/legendkiller0812"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1571850988, "post_id": 58527750, "comment_id": 103380175, "body": "Yep. Didn&#39;t realize that all along.! Thanks for pointing out."}], "owner": {"reputation": 1, "user_id": 12264472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f5a97b8823cbc12b718a0a77e4082a2?s=128&d=identicon&r=PG&f=1", "display_name": "legendkiller0812", "link": "https://stackoverflow.com/users/12264472/legendkiller0812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571915533, "creation_date": 1571850048, "last_edit_date": 1571915533, "question_id": 58527750, "link": "https://stackoverflow.com/questions/58527750/qmap-always-returning-a-const-value", "title": "QMap always returning a const value", "body": "<p>I have the following piece of code :</p>\n\n<ul>\n<li>classA.h </li>\n</ul>\n\n<pre><code>class A : public QAbstractTableModel\n{\n    Q_OBJECT\n\n    private:\n        QMap &lt;QString , QStringList&gt; map_filelist_hash ;\n};\n</code></pre>\n\n<ul>\n<li>classA.cpp</li>\n</ul>\n\n<pre><code>map_filelist_hash = { {\"dummy\"},{\"dummylist\"}};                 \nQStringList&amp; temp (map_filelist_hash[\"dummy\"]);\n</code></pre>\n\n<p>I get the following error when trying to compile using gcc7.2.0</p>\n\n<blockquote>\n  <p><strong>error:</strong> cannot bind non-const lvalue reference of type \u2018QStringList&amp;\u2019 to an rvalue of type \u2018const QStringList\u2019</p>\n</blockquote>\n\n<p>How do I get <code>QMap</code> to return a reference of the <code>QStringList</code> inside the <code>QMap</code>?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1571850139, "creation_date": 1571850139, "answer_id": 58527781, "question_id": 58527730, "link": "https://stackoverflow.com/questions/58527730/correct-way-to-iterate-over-a-list-of-pairs-in-c/58527781#58527781", "title": "Correct way to iterate over a list of pairs in c++?", "body": "<p>Correct syntax is:</p>\n\n<pre><code>using List = list&lt;pair&lt;int, unordered_map&lt;int, bool&gt;&gt;&gt;;\nList calc;\nfor (List::reverse_iterator rit = calc.rbegin(); rit != calc.rend(); ++rit) \n{\n    int d = n - (*rit).first;\n}\n</code></pre>\n\n<p>You can use <code>auto</code> instead of <code>List::reverse_iterator</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "edited": false, "score": 4, "creation_date": 1571850485, "post_id": 58527806, "comment_id": 103379930, "body": "@user3243499, Our minds and fingers don&#39;t talk to each other some times :)"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1571850273, "creation_date": 1571850273, "answer_id": 58527806, "question_id": 58527730, "link": "https://stackoverflow.com/questions/58527730/correct-way-to-iterate-over-a-list-of-pairs-in-c/58527806#58527806", "title": "Correct way to iterate over a list of pairs in c++?", "body": "<pre><code>list&lt;int&gt;::reverse_iterator rit = calc.rbegin();\n</code></pre>\n\n<p>is not correct. It needs to be</p>\n\n<pre><code>list&lt;pair&lt;int, unordered_map&lt;int, bool&gt;&gt;&gt;::reverse_iterator rit = calc.rbegin();\n</code></pre>\n\n<p>You can make your life simpler and use:</p>\n\n<pre><code>auto rit = calc.rbegin();\n</code></pre>\n"}], "owner": {"reputation": 2389, "user_id": 3243499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f14551e8ca190e92beaab157c3ebec7d?s=128&d=identicon&r=PG&f=1", "display_name": "user3243499", "link": "https://stackoverflow.com/users/3243499/user3243499"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 58527806, "answer_count": 2, "score": 1, "last_activity_date": 1571852393, "creation_date": 1571849928, "last_edit_date": 1571852393, "question_id": 58527730, "link": "https://stackoverflow.com/questions/58527730/correct-way-to-iterate-over-a-list-of-pairs-in-c", "title": "Correct way to iterate over a list of pairs in c++?", "body": "<p>I have created a list of pairs of unordered_maps as follows:</p>\n\n<pre><code>list&lt;pair&lt;int, unordered_map&lt;int, bool&gt;&gt;&gt; calc;\n</code></pre>\n\n<p>And I am trying to iterate the list from right to left as follows:</p>\n\n<pre><code>for (list&lt;int&gt;::reverse_iterator rit = calc.rbegin(); rit != calc.rend(); ++rit) \n{\n    int d = n - (*rit).first;\n\n}\n</code></pre>\n\n<p>But The above is erroring out with message \"<code>request for member \u2018first\u2019 in \u2018rit.std::reverse_iterator&lt;_Iterator&gt;::operator*&lt;std::_List_iterator&lt;int&gt; &gt;()\u2019, which is of non-class type \u2018int\u2019</code>\"</p>\n\n<p>Am I missing some syntax here?</p>\n"}, {"tags": ["c++", "file", "input", "fstream", "getline"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1571850504, "post_id": 58527726, "comment_id": 103379936, "body": "In case the input file was written on a different OS than the program is compiled and run, make sure that you change the line endings in the file to the format used by the OS running the program. See <a href=\"https://stackoverflow.com/questions/6089231/getting-std-ifstream-to-handle-lf-cr-and-crlf\">this question</a>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1571850674, "post_id": 58527726, "comment_id": 103380022, "body": "Just so I&#39;m clear, all of the rest of the code inside <code>if(line != &quot;&quot;)</code> is therefore unnecessary to reproduce your problem ? And fyi, <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">this is wrong: <code>while (!input.eof()) </code></a>"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1571850842, "post_id": 58527726, "comment_id": 103380097, "body": "getline does not append the new line to the string. You could use a debugger and take a closer look at the string. Maybe some other invisible character at the end of the string?"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 2, "creation_date": 1571850912, "post_id": 58527726, "comment_id": 103380137, "body": "@churill It will append <code>\\r</code> if the file uses windows line endings and the program runs on a unix-like system, because the <code>\\r</code> is not part of the newline there. This also explains why OP doesn&#39;t find it by searching for <code>\\n</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11020359"}, "edited": false, "score": 0, "creation_date": 1571851107, "post_id": 58527726, "comment_id": 103380228, "body": "oh that would make sense since our instructor requires our program to be compatible with linux :/"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11020359"}, "edited": false, "score": 0, "creation_date": 1571851464, "post_id": 58527726, "comment_id": 103380399, "body": "the &#39;\\r&#39; worked tysm!"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571852486, "post_id": 58527726, "comment_id": 103380792, "body": "@uneven_mark -- <code>getline</code> does <b>not</b> append <code>\\r</code> in the circumstances you describe. That character is in the source file, and <code>getline</code> does not remove it, just as it does not remove any <code>A</code> characters in the file."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1571852630, "post_id": 58527726, "comment_id": 103380852, "body": "@PeteBecker Yes, I should have said &quot;<i>leaves in</i>&quot; instead of &quot;<i>append</i>&quot;. I hope that makes the explanation better?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571852747, "post_id": 58527726, "comment_id": 103380914, "body": "@uneven_mark -- yes, with that change, it&#39;s a good explanation."}], "owner": {"user_type": "does_not_exist", "display_name": "user11020359"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1571851053, "creation_date": 1571849918, "last_edit_date": 1571851053, "question_id": 58527726, "link": "https://stackoverflow.com/questions/58527726/getline-is-not-ignoring-new-line-so-that-size-of-string-has-one-extra", "title": "getline is not ignoring new line so that size of string has one extra", "body": "<p>I'm working on a homework assignment to evaluate an expression from a file, but for some reason when I use getline(filename, string variable), the string has an extra enter. I know because when I outputted the string it came with a newline. And when I check the length() of the string, it's always one more than the actual string size, but I can't get rid of the extra space at the end. The last line in the input file works just fine though which I'm assuming is because it doesn't have an enter at the end of it. The evaluate function just evaluates the string. The place with the problem is in my error checking function where detecting errors depends on the length of the string. Thus, it prints out \"error\" because it doesn't work with the incorrect string length which is one more than the actual length. </p>\n\n<pre><code>ifstream input(\"input31.txt\");\n    string line;\n    if (input.eof()) {\n        cout &lt;&lt; \"is empty\";\n        input.close();\n    }\n    else {\n\n\n        string line;\n        while (!input.eof()) {\n            getline(input, line);\n            cout &lt;&lt; line.length();\n            }\n        }\n        input.close();\n    }\n</code></pre>\n\n<p>I have tried detecting if there is a '\\n' in the string, but it doesn't detect that for some reason. Forgive me if I have made a dumb mistake with this as I usually do. I am still new to coding, and it helps me to have extra eyes on it.</p>\n\n<p>edit: Here is the input I'm using.</p>\n\n<pre><code>0*00000000000000000+0000000000000001\n(1+2)*(1000+2000)\n(+1+2)*(1000+2000)\n((1+2)*(1000+2000))*(1+10000)\n(1000000000000000-1)\n99999999999999999/99999999999999999\n(-100000+10000)*8\n((-1))-(-1)\n</code></pre>\n\n<p>edit: I'm also using xcode on Mac if that makes any difference.</p>\n"}, {"tags": ["c++", "file", "input", "fstream"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1571849975, "post_id": 58527646, "comment_id": 103379732, "body": "Have you learned about loops (<code>for</code> or <code>while</code>)? If you have not, do so. Else, what did you try that didn&#39;t work?"}, {"owner": {"reputation": 11, "user_id": 12264381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_pG5a41CToOEM5f1Qi5uHrST2iHdQi0d5GgFr2g=k-s128", "display_name": "Sura Alhaj", "link": "https://stackoverflow.com/users/12264381/sura-alhaj"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571850540, "post_id": 58527646, "comment_id": 103379953, "body": "I know what &#39;for&#39; and &#39;while&#39; loops are, but they need conditions right? I don&#39;t have a condition to write."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571850644, "post_id": 58527646, "comment_id": 103380002, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/201992/how-to-read-until-eof-from-cin-in-c\">How to read until EOF from cin in C++</a>"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571850752, "post_id": 58527646, "comment_id": 103380055, "body": "Specifically <a href=\"https://stackoverflow.com/a/202120/11941443\">this answer</a> of the duplicate has an example using formatted input. In other word, just put your <code>fin &gt;&gt;</code> statement into the <code>while</code> condition."}, {"owner": {"reputation": 11, "user_id": 12264381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_pG5a41CToOEM5f1Qi5uHrST2iHdQi0d5GgFr2g=k-s128", "display_name": "Sura Alhaj", "link": "https://stackoverflow.com/users/12264381/sura-alhaj"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571852214, "post_id": 58527646, "comment_id": 103380701, "body": "I tried that, now the program is reading only my last input and giving me the output for that and nothing else."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571852263, "post_id": 58527646, "comment_id": 103380716, "body": "Then you did not do it correctly. It would probably be better to ask about that code then."}, {"owner": {"reputation": 11, "user_id": 12264381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_pG5a41CToOEM5f1Qi5uHrST2iHdQi0d5GgFr2g=k-s128", "display_name": "Sura Alhaj", "link": "https://stackoverflow.com/users/12264381/sura-alhaj"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571852940, "post_id": 58527646, "comment_id": 103381001, "body": "alright, i edited my question and replaced my old code with the new one so you could see it."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571855671, "post_id": 58527646, "comment_id": 103382147, "body": "Please also add the contents of the file that you are using, the output you are currently getting and what you expect instead."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571855803, "post_id": 58527646, "comment_id": 103382207, "body": "That being said, you have to obvious errors: 1. There is a <code>;</code> after <code>while(...)</code> that doesn&#39;t belong there, effectively making the following block <i>not</i> part of the loop iteration. 2. You are closing the file in the (intended) loop block. I don&#39;t think you want to close the file in each iteration..."}, {"owner": {"reputation": 11, "user_id": 12264381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_pG5a41CToOEM5f1Qi5uHrST2iHdQi0d5GgFr2g=k-s128", "display_name": "Sura Alhaj", "link": "https://stackoverflow.com/users/12264381/sura-alhaj"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1571897884, "post_id": 58527646, "comment_id": 103393231, "body": "it worked! thank you so much!"}], "owner": {"reputation": 11, "user_id": 12264381, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_pG5a41CToOEM5f1Qi5uHrST2iHdQi0d5GgFr2g=k-s128", "display_name": "Sura Alhaj", "link": "https://stackoverflow.com/users/12264381/sura-alhaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1571852866, "creation_date": 1571849548, "last_edit_date": 1571852866, "question_id": 58527646, "link": "https://stackoverflow.com/questions/58527646/how-do-i-apply-a-program-ive-written-to-different-inputs-in-a-file-i-wrote-c", "title": "How do I apply a program I&#39;ve written to different inputs in a file I wrote (C++)?", "body": "<p>I want my C++ program to read all the inputs I've written in a .txt file and show me the output i want for each input. i basically want the program to run on each of my inputs, instead, it's only reading my first input. i want it to loop for each set of info i provide. Here is what i have so far:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cmath&gt;\n#include&lt;iomanip&gt;\n#include&lt;string&gt;\n#include&lt;fstream&gt;\nusing namespace std;\nint main()\n{\n    ifstream fin;\n    ofstream fout;\n    fin.open(\"emp.txt\");\n    fout.open(\"output.dat\");\n    string last, first;\n    double salary, increase, nsalary;\n    while (fin&gt;&gt;last&gt;&gt;first&gt;&gt;salary&gt;&gt;increase);\n    {\n    nsalary= salary + ((salary/100.0)*increase);\n    fout&lt;&lt;first&lt;&lt;\"\\t\"&lt;&lt;last&lt;&lt;\"\\t\"&lt;&lt;fixed&lt;&lt;showpoint&lt;&lt;setprecision(3)&lt;&lt;salary&lt;&lt;\"\\t\\t\"&lt;&lt;nsalary;\n    cout&lt;&lt;first&lt;&lt;\"\\t\"&lt;&lt;last&lt;&lt;\"\\t\"&lt;&lt;fixed&lt;&lt;showpoint&lt;&lt;setprecision(3)&lt;&lt;salary&lt;&lt;\"\\t\\t\"&lt;&lt;nsalary;\n    fin.close();\n    fout.close();\n}\n}\n</code></pre>\n\n<p>Thank you </p>\n"}, {"tags": ["c++", "iterator", "istream-iterator"], "answers": [{"comments": [{"owner": {"reputation": 1248, "user_id": 2511763, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EHEMJ.jpg?s=128&g=1", "display_name": "Muhammet Ali Asan", "link": "https://stackoverflow.com/users/2511763/muhammet-ali-asan"}, "edited": false, "score": 1, "creation_date": 1571849739, "post_id": 58527664, "comment_id": 103379653, "body": "vector( InputIt first, InputIt last,         const Allocator&amp; alloc = Allocator() ); it is this one. When first is given, InputIt type becomes std::istreambuf_iterator&lt;char&gt; and {} creates empty instance of it ."}, {"owner": {"reputation": 1817, "user_id": 4030665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4030665/dan"}, "edited": false, "score": 0, "creation_date": 1571850514, "post_id": 58527664, "comment_id": 103379938, "body": "But then, why <code>std::istreambuf_iterator&lt;char&gt;{}</code> acts as the end of the <code>ifstream</code>? Is it like telling to vector &#39;read until the iterator becomes &#39;{}&#39;, which is an empty/null iterator, so it marks the end of something&#39;?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1817, "user_id": 4030665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4030665/dan"}, "edited": false, "score": 0, "creation_date": 1571850625, "post_id": 58527664, "comment_id": 103379997, "body": "@Dan, that is correct. See <a href=\"https://en.cppreference.com/w/cpp/iterator/istream_iterator/istream_iterator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/iterator/istream_iterator/&hellip;</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1571850079, "last_edit_date": 1571850079, "creation_date": 1571849644, "answer_id": 58527664, "question_id": 58527631, "link": "https://stackoverflow.com/questions/58527631/use-of-as-end-iterator-in-stdvector-constructor/58527664#58527664", "title": "Use of &#39;{}&#39; as end iterator in std::vector constructor", "body": "<blockquote>\n  <p>Thus, the {} corresponds to last.<br>\n  What is exactly {}? Is it acting like a null/empty iterator?</p>\n</blockquote>\n\n<p>It's a default constructed object of type <code>std::istreambuf_iterator&lt;char&gt;</code>.</p>\n\n<pre><code>std::vector&lt;unsigned char&gt; barray(std::istreambuf_iterator&lt;char&gt;(input), {});\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>std::vector&lt;unsigned char&gt; barray{std::istreambuf_iterator&lt;char&gt;{input},\n                                  std::istreambuf_iterator&lt;char&gt;{}};\n</code></pre>\n"}], "owner": {"reputation": 1817, "user_id": 4030665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4030665/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58527664, "answer_count": 1, "score": 1, "last_activity_date": 1571850079, "creation_date": 1571849490, "question_id": 58527631, "link": "https://stackoverflow.com/questions/58527631/use-of-as-end-iterator-in-stdvector-constructor", "title": "Use of &#39;{}&#39; as end iterator in std::vector constructor", "body": "<p>A way for reading a file and put it as a byte array into a vector would be:</p>\n\n<pre><code>std::ifstream input(filePath, std::ios::binary);\nstd::vector&lt;unsigned char&gt; barray(std::istreambuf_iterator&lt;char&gt;(input), {});\n</code></pre>\n\n<p>As far as I understand, the constructor used for <code>std::vector</code> in the above code snippet is </p>\n\n<pre><code>template&lt; class InputIt &gt;\nvector( InputIt first, InputIt last,\n        const Allocator&amp; alloc = Allocator() );\n</code></pre>\n\n<p>Thus, the <code>{}</code> corresponds to <code>last</code>. </p>\n\n<p>What is exactly <code>{}</code>? Is it acting like a null/empty iterator?</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1571849852, "post_id": 58527630, "comment_id": 103379689, "body": "This shouldn&#39;t compile nor should you use a recursion. Can&#39;t you just make a simple for loop?"}, {"owner": {"reputation": 415, "user_id": 7572374, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh4.googleusercontent.com/-AYl8FWoZXiM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rex8ZiUs8QhOKV1o_7S5MZYVefZzw/mo/photo.jpg?sz=128", "display_name": "new_programmer_22", "link": "https://stackoverflow.com/users/7572374/new-programmer-22"}, "reply_to_user": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1571850049, "post_id": 58527630, "comment_id": 103379758, "body": "This does compile. I know I can use a for loop but I am trying to do this recursively."}, {"owner": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "edited": false, "score": 0, "creation_date": 1571850171, "post_id": 58527630, "comment_id": 103379790, "body": "Should <code>sum = sum + (array1, array2, size-1)</code> be <code>sum = sum + findRSS(array1, array2, size-1)</code>"}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1571850238, "post_id": 58527630, "comment_id": 103379826, "body": "Since you want to take the square root of the sum of squared terms, you can call the recursive function from main this way <code>sqrt(findRSS(array1, array2, size)</code> and in <code>findRSS</code> simply return the <code>sum</code> at the end (doesn&#39;t need to be double) not <code>sqrt(sum)</code>."}, {"owner": {"reputation": 415, "user_id": 7572374, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh4.googleusercontent.com/-AYl8FWoZXiM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rex8ZiUs8QhOKV1o_7S5MZYVefZzw/mo/photo.jpg?sz=128", "display_name": "new_programmer_22", "link": "https://stackoverflow.com/users/7572374/new-programmer-22"}, "edited": false, "score": 0, "creation_date": 1571850321, "post_id": 58527630, "comment_id": 103379859, "body": "I want my function to return the square root of the sum though. I understand I can call the function like that in main. I am trying to see if there is a way to recursively find the RSS and return it from a function."}, {"owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "edited": false, "score": 0, "creation_date": 1571850536, "post_id": 58527630, "comment_id": 103379949, "body": "This is the recursive way where the role of the function is to return squared sum of all the terms. For the given input, your code is doing <code>sqrt(sqrt(sqrt((1-2)^2) + (5-9)^2) + (8-10)^2)</code>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1571850914, "post_id": 58527630, "comment_id": 103380138, "body": "You can do that, but it will involve plenty of pointless square roots that are undone immediately again by squaring. All you need to do is square the return value of the recursive <code>findRSS</code> call."}, {"owner": {"reputation": 415, "user_id": 7572374, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh4.googleusercontent.com/-AYl8FWoZXiM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rex8ZiUs8QhOKV1o_7S5MZYVefZzw/mo/photo.jpg?sz=128", "display_name": "new_programmer_22", "link": "https://stackoverflow.com/users/7572374/new-programmer-22"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1571851426, "post_id": 58527630, "comment_id": 103380382, "body": "in the above example, this just results in the sum. not the square root of the sum. @MaxLanghof"}, {"owner": {"reputation": 168, "user_id": 4530832, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b154aa0721a0e9aa4ce9422c63baa810?s=128&d=identicon&r=PG&f=1", "display_name": "Otto von Bisquick", "link": "https://stackoverflow.com/users/4530832/otto-von-bisquick"}, "edited": false, "score": 1, "creation_date": 1571851585, "post_id": 58527630, "comment_id": 103380456, "body": "He means replace <code>sum = sum + findRSS(array1, array2, size-1);</code> with <code>sum = sum + pow(findRSS(array1, array2, size-1),2);</code>. That way you only have one un-canceled square root at the top of the recursion tree."}], "answers": [{"tags": [], "owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "is_accepted": false, "score": 0, "last_activity_date": 1571851974, "creation_date": 1571851974, "answer_id": 58528199, "question_id": 58527630, "link": "https://stackoverflow.com/questions/58527630/recursively-find-the-root-squared-sum/58528199#58528199", "title": "Recursively find the root squared sum", "body": "<p>I mean this way:</p>\n\n<pre><code>int findRSS(int *arr1, int *arr2, int size)\n{\n    if (size == 0)\n        return 0;\n    return (int)pow(arr1[size - 1] - arr2[size - 1], 2) + findRSS(arr1, arr2, size - 1);\n}\n\nint main()\n{\n    int arr1[] = { 1, 5, 8 };\n    int arr2[] = { 2, 9, 10 };\n    cout &lt;&lt; sqrt(findRSS(arr1, arr2, 3)) &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1571852297, "creation_date": 1571852297, "answer_id": 58528275, "question_id": 58527630, "link": "https://stackoverflow.com/questions/58527630/recursively-find-the-root-squared-sum/58528275#58528275", "title": "Recursively find the root squared sum", "body": "<p>This does what you want:</p>\n\n<pre><code>double findRSS(int* array1, int* array2, int size){\n    double sum = 0;\n    if (size &lt;= 0){\n        return 0;   }\n    else{\n        sum = pow((array1[size-1] - array2[size-1]), 2);\n        sum = sum + pow(findRSS(array1, array2, size-1), 2);\n    }\n    return sqrt(sum);\n}\n</code></pre>\n\n<p>Write out the math by hand to verify that it is correct.</p>\n\n<p>But please don't write actual programs this way. Not only is this a needlessly convoluted way to write a trivial loop, it is also horribly inefficient to take a square root at every iteration/recursion just to immediately undo it at the next. Even for the simple version below, the single square root at the end will take longer than everything else together:</p>\n\n<pre><code>double findRSS(int* array1, int* array2)\n{\n  double sum = 0;\n  for (int i = 0; i &lt; size; ++i)\n    sum += std::pow(arra1[i] - array2[i], 2);\n  return std::sqrt(sum);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1829, "user_id": 2187015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be67c478bd88613dfecad541b287ddd?s=128&d=identicon&r=PG", "display_name": "Abdurrahim", "link": "https://stackoverflow.com/users/2187015/abdurrahim"}, "is_accepted": true, "score": 2, "last_activity_date": 1571852371, "creation_date": 1571852371, "answer_id": 58528288, "question_id": 58527630, "link": "https://stackoverflow.com/questions/58527630/recursively-find-the-root-squared-sum/58528288#58528288", "title": "Recursively find the root squared sum", "body": "<p>You are calculating sqrt((1-2)^2 + sqrt((2-5)^2 + sqrt((3-8)^2)))\nyou can do somewhat simple \"fix\" to your logic by squaring recursed result once</p>\n\n<pre><code>double findRSS(int* array1, int* array2, int size){\n    double sum = 0;\n    if (size &lt;= 0){\n        return 0;   }\n    else{\n        sum = pow((array1[size-1] - array2[size-1]), 2);\n        sum = sum + pow(findRSS(array1, array2, size-1), 2); // you are undoing sqrt for new one\n    }\n    return sqrt(sum);\n}\n</code></pre>\n\n<p>but as you can see the method is flawed. This is a good example of why structured development is important. You can find principles developers found that aged well here: <a href=\"http://www.catb.org/~esr/writings/taoup/html/ch01s06.html\" rel=\"nofollow noreferrer\">http://www.catb.org/~esr/writings/taoup/html/ch01s06.html</a></p>\n\n<p>so your methods would become something like this:</p>\n\n<pre><code>double diffSum(int* array1, int* array2, int size, int power) {\n    double sum = 0;\n    if (size &lt;= 0) {\n        return 0;\n    }\n    else {\n        sum = pow((array1[size - 1] - array2[size - 1]), power);\n        sum = sum + diffSum(array1, array2, size - 1, power);\n    }\n    return sum;\n}\n\ndouble findRSS(int* array1, int* array2, int size) {\n    return sqrt(diffSum(array1, array2, size, 2));\n}\n</code></pre>\n\n<p>key to success is when to know you need to separate; beware keeping methods with fewer lines helps on maintaining the code</p>\n"}], "owner": {"reputation": 415, "user_id": 7572374, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh4.googleusercontent.com/-AYl8FWoZXiM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rex8ZiUs8QhOKV1o_7S5MZYVefZzw/mo/photo.jpg?sz=128", "display_name": "new_programmer_22", "link": "https://stackoverflow.com/users/7572374/new-programmer-22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 58528288, "answer_count": 3, "score": 0, "last_activity_date": 1571852371, "creation_date": 1571849485, "last_edit_date": 1571850250, "question_id": 58527630, "link": "https://stackoverflow.com/questions/58527630/recursively-find-the-root-squared-sum", "title": "Recursively find the root squared sum", "body": "<p>I am trying to recursively find the root squared sum of two arrays. Basically given:</p>\n\n<pre><code>array1 = {1,5,8};\narray2 = {2,9,10};\nRSS = sqrt((1-2)^2 + (2-5)^2 + (3-8)^2) = 4.58258\n</code></pre>\n\n<p>I have implemented the following code, but after testing I know that it does not work. I am returning the square root each time, so my RSS value is lower than it should be. </p>\n\n<pre><code>double findRSS(int* array1, int* array2, int size){\n    double sum = 0;\n    if (size &lt;= 0){\n        return 0;   }\n    else{\n        sum = pow((array1[size-1] - array2[size-1]), 2);\n        sum = sum + findRSS(array1, array2, size-1);\n    }\n    return sqrt(sum);\n}\n</code></pre>\n\n<p>For the above example I am returning 2.85011 instead. </p>\n\n<p>I feel I am close but just have a small issue. Can someone help me out?</p>\n"}, {"tags": ["c++", "c", "matrix", "mpi", "reduction"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571883330, "post_id": 58527622, "comment_id": 103389756, "body": "what are you exactly trying to achieve? the input and output buffers passed to <code>MPI_Reduce()</code> have the same type and size, so a reduce&#39;d matrix is a matrix. If you reduce a row, the result will also be a row. If you expect to &quot;reduce&quot; a matrix into a row, then <code>MPI_Reduce()</code> is not a fit."}, {"owner": {"reputation": 1, "user_id": 9378182, "user_type": "registered", "profile_image": "https://graph.facebook.com/759342494266145/picture?type=large", "display_name": "\u042e\u0440\u0438\u0439 \u0414\u0437\u0431\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/9378182/%d0%ae%d1%80%d0%b8%d0%b9-%d0%94%d0%b7%d0%b1%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571898763, "post_id": 58527622, "comment_id": 103393630, "body": "Thanks for your answer. I expext MPI_Reduce() to go through my matrix columns and sum every row, just like it sums every array in the example above. Do I have to make a recvbuf also a raw type as a sendbuf for this or it&#39;s just not possible with MPI_Reduce()?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571899379, "post_id": 58527622, "comment_id": 103393897, "body": "<code>MPI_Reduce()</code> takes a single <code>datatype</code> that is used for both <code>sendbuf</code> and <code>recvbuf</code>. I still do not understand what you want to achieve, and all I can say is <code>MPI_Reduce()</code> can sum the matrices from all your ranks into a resulting matrix with the same dimensions. If this is what you want to do, you can do it on one shot instead of iterating over the columns and/or rows."}, {"owner": {"reputation": 1, "user_id": 9378182, "user_type": "registered", "profile_image": "https://graph.facebook.com/759342494266145/picture?type=large", "display_name": "\u042e\u0440\u0438\u0439 \u0414\u0437\u0431\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/9378182/%d0%ae%d1%80%d0%b8%d0%b9-%d0%94%d0%b7%d0%b1%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571900044, "post_id": 58527622, "comment_id": 103394190, "body": "Sorry for my english ) Just want every proc to have the respective raw sum of my matrix A. So if I have 4 proc and A[4][4] I want for instance 0 proc to have A[0][0] + A[0][1]+A[0][2]+A[0][3]"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571900618, "post_id": 58527622, "comment_id": 103394441, "body": "<code>MPI_Reduce()</code> reduces accross the MPI ranks. For example, you would get the sum of <b>all</b> <code>A[0]0]</code> in <code>result[0][0]</code>. If you want to sum <code>result[0][0:3]</code>, then it is up to you to do it (read MPI cannot help you here)."}, {"owner": {"reputation": 1, "user_id": 9378182, "user_type": "registered", "profile_image": "https://graph.facebook.com/759342494266145/picture?type=large", "display_name": "\u042e\u0440\u0438\u0439 \u0414\u0437\u0431\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/9378182/%d0%ae%d1%80%d0%b8%d0%b9-%d0%94%d0%b7%d0%b1%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1571901370, "post_id": 58527622, "comment_id": 103394821, "body": "Oh, now I see, I got it! Thank you so much for your time!"}], "owner": {"reputation": 1, "user_id": 9378182, "user_type": "registered", "profile_image": "https://graph.facebook.com/759342494266145/picture?type=large", "display_name": "\u042e\u0440\u0438\u0439 \u0414\u0437\u0431\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/9378182/%d0%ae%d1%80%d0%b8%d0%b9-%d0%94%d0%b7%d0%b1%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571863074, "creation_date": 1571849423, "last_edit_date": 1571863074, "question_id": 58527622, "link": "https://stackoverflow.com/questions/58527622/c-mpi-reduce-rows-of-the-matrix", "title": "C++ MPI_Reduce rows of the matrix", "body": "<p>I am a new to MPI and struggling to do the global reduce operation for my matrix. I have done the reduction, using the materials I have found. But I want to do this not with a generated 1D arrays, but with the randomly filled 2D matrix rows.</p>\n\n<p>I could not find any materials for reduction and matrix.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include \"mpi.h\"\n#include &lt;time.h&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n\nint main(int argc, char* argv[])\n{\n    int rank, size;\n    double sum = 0;\n\n\n    if (MPI_Init(&amp;argc, &amp;argv) != MPI_SUCCESS) {\n        perror(\"Error initializing MPI\");\n        exit(1);\n    }\n\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    int sendbuf[size] = { 0 };\n    int recvbuf[size] = { 0 };\n\n    for (int i = 0; i &lt; size; i++)\n        sendbuf[i] = 1 + rank + size * i;\n\n    printf(\"Initial %d: \", rank);\n    for (int i = 0; i &lt; size; i++) printf(\"%d \", sendbuf[i]);\n    printf(\"\\n\");\n\n        MPI_Reduce(&amp;sendbuf, &amp;recvbuf, size, MPI_INT,\n            MPI_SUM, 0, MPI_COMM_WORLD);\n\n// if I have a matrix A[4][4], I want smth like:\n// for(int i = 0; i &lt; rows_number; i++)\n//   MPI_Reduce(&amp;A[i], &amp;recvbuf, size, MPI_INT,\n//           MPI_SUM, 0, MPI_COMM_WORLD);\n\n    if (rank == 0) {\n\n        for (int i = 0; i &lt; size; i++)\n            cout &lt;&lt; \"Reduced = \" &lt;&lt; recvbuf[i] &lt;&lt; endl;\n\n    }\n\n\n\n    MPI_Finalize();\n    return 0;\n}```\n\n\n</code></pre>\n"}, {"tags": ["c++", "namespaces"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4922937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d951b624070824d2b660ee746ae6fee2?s=128&d=identicon&r=PG&f=1", "display_name": "milkshake", "link": "https://stackoverflow.com/users/4922937/milkshake"}, "edited": false, "score": 0, "creation_date": 1571935020, "post_id": 58527688, "comment_id": 103412411, "body": "Very clear, thanks. And thanks for the information about overloading resolution."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1571858182, "last_edit_date": 1571858182, "creation_date": 1571849740, "answer_id": 58527688, "question_id": 58527598, "link": "https://stackoverflow.com/questions/58527598/passing-stdispunct-as-argument-to-remove-copy-if-fails-to-compile/58527688#58527688", "title": "passing std::ispunct as argument to remove_copy_if() fails to compile", "body": "<p><code>std::ispunct</code> is an overloaded function.  There exists a version in <a href=\"https://en.cppreference.com/w/cpp/string/byte/ispunct\" rel=\"nofollow noreferrer\"><code>&lt;cctype&gt;</code></a> and a version in <a href=\"https://en.cppreference.com/w/cpp/locale/ispunct\" rel=\"nofollow noreferrer\"><code>&lt;locale&gt;</code></a>.  Even though you don't include <code>&lt;locale&gt;</code>, one of your includes does which brings in the overload and leads to the deduction failing since overloaded functions can't have a type deduced.</p>\n\n<p>What you can do to solve this is to wrap <code>std::ispunct</code> in a lambda since in the body of the lambda the compiler can preform overload resolution and call the correct function.  That would give you</p>\n\n<pre><code>remove_copy_if(s.begin(), \n               s.end(), \n               std::back_inserter(target), \n               [](unsigned char ch){ return std::ispunct(ch); }); // use unsigned char here to stop any possible UB\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1571858081, "last_edit_date": 1571858081, "creation_date": 1571850104, "answer_id": 58527765, "question_id": 58527598, "link": "https://stackoverflow.com/questions/58527598/passing-stdispunct-as-argument-to-remove-copy-if-fails-to-compile/58527765#58527765", "title": "passing std::ispunct as argument to remove_copy_if() fails to compile", "body": "<p>Use a lambda expression instead of the function pointer.</p>\n\n<p>Here is a demonstrative program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n#include &lt;cctype&gt;\n\nstd::string strip_punct( const std::string &amp;s ) \n{\n    std::string target;\n    std::remove_copy_if( std::begin( s ), std::end( s ), \n                         std::back_inserter( target ), \n                         []( unsigned char c ) { return std::ispunct( c ); } );\n    return target;\n}\n\nint main() \n{\n    std::string word = \"abc.\";\n\n    std::cout &lt;&lt; strip_punct( word ) &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is there are two <code>ispunct</code> functions in C++. One is the C standard <code>ispunct()</code> function in the <code>&lt;ctype.h&gt;</code> header, and the other is the C++ standard <code>std::ispunct()</code> function in the <code>&lt;locale&gt;</code> header. </p>\n"}], "owner": {"reputation": 43, "user_id": 4922937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d951b624070824d2b660ee746ae6fee2?s=128&d=identicon&r=PG&f=1", "display_name": "milkshake", "link": "https://stackoverflow.com/users/4922937/milkshake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58527688, "answer_count": 2, "score": 0, "last_activity_date": 1571858182, "creation_date": 1571849294, "question_id": 58527598, "link": "https://stackoverflow.com/questions/58527598/passing-stdispunct-as-argument-to-remove-copy-if-fails-to-compile", "title": "passing std::ispunct as argument to remove_copy_if() fails to compile", "body": "<p>I tried to pass <code>std::ispunct</code> as the last argument to <code>remove_copy_if</code>, and found it failed to compile.\nHowever, if I pass <code>ispunct</code> (just with <code>std::</code> removed), the program compiles and runs as expected.</p>\n\n<p>code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;map&gt;\n#include&lt;cctype&gt;\n#include&lt;algorithm&gt;\n#include&lt;iterator&gt;\n\nusing std::map;\nusing std::string;\n\nstring strip_punct(const string &amp;s) {\n    string target;\n    remove_copy_if(s.begin(), s.end(), std::back_inserter(target), std::ispunct);\n    return target;\n}\n\nint main() {\n    string word = \"abc.\";\n    string target = strip_punct(word);\n    std::cout &lt;&lt; \"target: \" &lt;&lt; target &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>error message:</p>\n\n<pre><code>$ g++ --std=c++11 -o problem_11_4.out problem_11_4.cpp\nproblem_11_4.cpp: In function 'std::string strip_punct(const string&amp;)':\nproblem_11_4.cpp:12:80: error: no matching function for call to 'remove_copy_if(std::__cxx11::basic_string&lt;char&gt;::const_iterator, std::__cxx11::basic_string&lt;char&gt;::const_iterator, std::back_insert_iterator&lt;std::__cxx11::basic_string&lt;char&gt; &gt;, &lt;unresolved overloaded function type&gt;)'\n   12 |     remove_copy_if(s.begin(), s.end(), std::back_inserter(target), std::ispunct);\n      |                                                                                ^\nIn file included from /usr/local/Cellar/gcc/9.2.0_1/include/c++/9.2.0/algorithm:62,\n                 from problem_11_4.cpp:4:\n/usr/local/Cellar/gcc/9.2.0_1/include/c++/9.2.0/bits/stl_algo.h:703:5: note: candidate: 'template&lt;class _IIter, class _OIter, class _Predicate&gt; _OIter std::remove_copy_if(_IIter, _IIter, _OIter, _Predicate)'\n  703 |     remove_copy_if(_InputIterator __first, _InputIterator __last,\n      |     ^~~~~~~~~~~~~~\n/usr/local/Cellar/gcc/9.2.0_1/include/c++/9.2.0/bits/stl_algo.h:703:5: note:   template argument deduction/substitution failed:\nproblem_11_4.cpp:12:80: note:   couldn't deduce template parameter '_Predicate'\n   12 |     remove_copy_if(s.begin(), s.end(), std::back_inserter(target), std::ispunct);\n      |                                                                                ^\n</code></pre>\n\n<p>I searched on SO and found this question: <a href=\"https://stackoverflow.com/questions/18047031/why-std-is-not-needed-when-using-ispunct-in-c\">Why std:: is not needed when using ispunct() in C++?</a>\nIt is helpful, now I know <code>ispunct</code> can be used without <code>std::</code>. However, I wrote another program and found out that <code>ispunct</code> and <code>std::ispunct</code> both work well when used alone (not as an argument). I still don't understand why <code>std::</code> is not allowed when <code>ispunct</code> is used as an argument.</p>\n"}, {"tags": ["c++", "vector", "mean"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1571849176, "post_id": 58527519, "comment_id": 103379419, "body": "You are trying to divide by an iterator or a pointer. That&#39;s also what the error says. But what you really want to do is not divide by the <i>memory location</i> of the last element (or similar) but just the number of elements."}, {"owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "edited": false, "score": 0, "creation_date": 1571849510, "post_id": 58527519, "comment_id": 103379549, "body": "By declaring <code>end = v.size()</code> by comma separation from where you declare <code>i</code>, you are declaring it as an iterator where you should be declaring on a separate line as an integer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "edited": false, "score": 0, "creation_date": 1571850147, "post_id": 58527519, "comment_id": 103379782, "body": "@DetectivePikachu No, that line is already declaring integers. You&#39;re looking at the wrong function :P"}, {"owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "edited": false, "score": 0, "creation_date": 1571850268, "post_id": 58527519, "comment_id": 103379839, "body": "None of the lines declaring <code>end</code> are declaring integers, what in the world are you on about?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10747854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da646854204fce47e96be4dbe2121e?s=128&d=identicon&r=PG&f=1", "display_name": "James McMillan", "link": "https://stackoverflow.com/users/10747854/james-mcmillan"}, "edited": false, "score": 0, "creation_date": 1571850079, "post_id": 58527578, "comment_id": 103379767, "body": "Such a dumb mistake. Thank you very much! I spent more time than I should have on this."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 13, "user_id": 10747854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da646854204fce47e96be4dbe2121e?s=128&d=identicon&r=PG&f=1", "display_name": "James McMillan", "link": "https://stackoverflow.com/users/10747854/james-mcmillan"}, "edited": false, "score": 0, "creation_date": 1571850247, "post_id": 58527578, "comment_id": 103379831, "body": "@JamesMcMillan You are welcome! It&#39;s not rare that one makes mistakes and get stuck. 30 minutes on the couch tends to solve it for me :-)"}, {"owner": {"reputation": 13, "user_id": 10747854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da646854204fce47e96be4dbe2121e?s=128&d=identicon&r=PG&f=1", "display_name": "James McMillan", "link": "https://stackoverflow.com/users/10747854/james-mcmillan"}, "edited": false, "score": 1, "creation_date": 1571850385, "post_id": 58527578, "comment_id": 103379885, "body": "I&#39;ll definitely take that into consideration! I love to code but man does this data structures class get on my nerves lol!"}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1571849841, "last_edit_date": 1571849841, "creation_date": 1571849189, "answer_id": 58527578, "question_id": 58527519, "link": "https://stackoverflow.com/questions/58527519/vector-loops-throwing-2-errors/58527578#58527578", "title": "Vector loops throwing 2 errors?", "body": "<blockquote>\n  <p><code>no match for \u2018operator/\u2019 (operand types are \u2018double\u2019 and \u2018std::vector::const_iterator</code>.</p>\n</blockquote>\n\n<p>So, a <code>double</code> and an iterator with a division sign between them is what's causing that.</p>\n\n<p>When <code>end = v.cend();</code> you can't use <code>end</code> as the number of elements (to get the mean). Replace <code>mean = sum / end;</code> with <code>mean = sum / v.size();</code></p>\n\n<blockquote>\n  <p><code>invalid operands of types \u2018double\u2019 and \u2018std::vector::const_pointer</code>.</p>\n</blockquote>\n\n<p>Here it's a <code>double</code> and a <code>const*</code> with a division sign between them that is the problem.</p>\n\n<p>When <code>end = v.data() + v.size();</code> you can't use <code>end</code> as the number of elements (to get the mean). Replace <code>mean = sum / end;</code> with <code>mean = sum / v.size();</code></p>\n"}], "owner": {"reputation": 13, "user_id": 10747854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da646854204fce47e96be4dbe2121e?s=128&d=identicon&r=PG&f=1", "display_name": "James McMillan", "link": "https://stackoverflow.com/users/10747854/james-mcmillan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58527578, "answer_count": 1, "score": -1, "last_activity_date": 1571850171, "creation_date": 1571848925, "last_edit_date": 1571850171, "question_id": 58527519, "link": "https://stackoverflow.com/questions/58527519/vector-loops-throwing-2-errors", "title": "Vector loops throwing 2 errors?", "body": "<p>lab26.cpp: In function \u2018int meanUsingIterators(const std::vector&amp;)\u2019:<br>\nlab26.cpp:35:13: error: no match for \u2018operator/\u2019 (operand types are \u2018double\u2019 and \u2018std::vector::const_iterator {aka __gnu_cxx::__normal_iterator >}\u2019) </p>\n\n<p>mean = sum / end;</p>\n\n<p>lab26.cpp: In function \u2018int meanUsingPointers(const std::vector&amp;)\u2019:<br>\nlab26.cpp:51:13: error: invalid operands of types \u2018double\u2019 and \u2018std::vector::const_pointer {aka const int*}\u2019 to binary \u2018operator/\u2019 .  </p>\n\n<p>mean = sum / end;</p>\n\n<p>===========================================================================</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint meanUsingIndexing(const vector&lt;int&gt;&amp; v)   \n{\n\n    vector&lt;int&gt;::size_type i, end = v.size();\n    double sum = 0;\n    double mean;\n\n    for(i = 0; i &lt; end; i++)\n    {\n        sum += v.at(i); // or sum += v[i]\n    }\n    mean = sum / end;\n    return round(mean);\n}\n\nint meanUsingIterators(const vector&lt;int&gt;&amp; v)  \n{\n\n    vector&lt;int&gt;::const_iterator i, end = v.cend();\n    double sum = 0;\n    double mean;\n\n    for(i = v.cbegin(); i &lt; end; i++)      \n    {\n        sum += *i;\n    }\n    mean = sum / end;\n    return round(mean);\n}\n\nint meanUsingPointers(const vector&lt;int&gt;&amp; v)    \n{\n\n    vector&lt;int&gt;::const_pointer i, end = v.data() + v.size();\n    double sum = 0;\n    double mean;\n\n    for(i = v.data(); i &lt; end; i++)\n    {\n        sum += *i;\n    }\n    mean = sum / end;\n    return round(mean);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571848608, "post_id": 58527414, "comment_id": 103379144, "body": "How are you going to initialize the vector more efficiently?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571848787, "post_id": 58527414, "comment_id": 103379236, "body": "@VladfromMoscow The temporary <code>vector&lt;int&gt;(m)</code> causes one unnecessary heap allocation, we could get rid of it somehow."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1571849054, "post_id": 58527414, "comment_id": 103379359, "body": "IMO, this is efficient enough for most purposes. If you find this to be a performance bottleneck, only then do you have worry about finding an alternative. In the mean time, move on to more important things -- clean code, correct code, maintainable code."}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1571930593, "post_id": 58527591, "comment_id": 103410320, "body": "I have some code with <code>operator[]</code> overloading <a href=\"https://stackoverflow.com/a/53437918/509868\">here</a>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1571849882, "last_edit_date": 1571849882, "creation_date": 1571849242, "answer_id": 58527591, "question_id": 58527414, "link": "https://stackoverflow.com/questions/58527414/initializing-a-vector-of-vectors-using-the-fill-constructor/58527591#58527591", "title": "initializing a vector of vectors using the fill constructor", "body": "<blockquote>\n  <p>Does the initialization of a vector of vectors this way copy the vectors n times?</p>\n</blockquote>\n\n<p>Yes.  It is going to make <code>N</code> copies of <code>vector&lt;int&gt;(m)</code> so you'll have <code>N + 1</code> allocations.</p>\n\n<blockquote>\n  <p>Is the initialization efficient, or can we make it better?</p>\n</blockquote>\n\n<p>It is pretty good, but by no means is it the best you can do.  For raw performance what you want to do is use a single vector and pretend that it is 2d.  That would look like</p>\n\n<pre><code>std::vector&lt;int&gt; v(rows * cols);\nv[row_index * cols + col_index] = 5; // same as 2d v[row_index][col_index] = 5;\n</code></pre>\n\n<p>This does a single allocation and you are guaranteed that all of the elements are in the same block of memory.  A 2d vector does not give you that guarantee.</p>\n\n<p>To make life easier you can encapsulate that into a class so you can overload the <code>[]</code> operator to make it act like a 2d structure.  This is done by overloading the <code>operator[]</code> for the class and having it return proxy type that holds a reference to the row of the vector and you overload the <code>operator[]</code> for the proxy type to return a reference to the col in that refereed to vector.</p>\n"}], "owner": {"reputation": 55, "user_id": 4910232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ef126d450273ef83b40270dc97852d?s=128&d=identicon&r=PG&f=1", "display_name": "asmbaty", "link": "https://stackoverflow.com/users/4910232/asmbaty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58527591, "answer_count": 1, "score": 0, "last_activity_date": 1571849882, "creation_date": 1571848496, "last_edit_date": 1571848629, "question_id": 58527414, "link": "https://stackoverflow.com/questions/58527414/initializing-a-vector-of-vectors-using-the-fill-constructor", "title": "initializing a vector of vectors using the fill constructor", "body": "<p>Does the initialization of a vector of vectors this way copy the vectors <code>n</code> times?</p>\n\n<pre><code>const int n, m; \nvector&lt;vector&lt;int&gt;&gt; v(n, vector&lt;int&gt;(m));\n</code></pre>\n\n<p>Is the initialization efficient, or can we make it better?</p>\n"}, {"tags": ["c++", "unordered-map"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1571848218, "post_id": 58527278, "comment_id": 103378953, "body": "&quot;<i>Is it possible?</i>&quot; Yes. What have you tried, to accomplish this?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1571848221, "post_id": 58527278, "comment_id": 103378956, "body": "Which map do you want to modify? Or do you literally want the differences only?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1571851556, "post_id": 58527278, "comment_id": 103380441, "body": "My first thought was <a href=\"https://en.cppreference.com/w/cpp/algorithm/set_difference\" rel=\"nofollow noreferrer\">std::set_difference</a>..."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1571853641, "post_id": 58527278, "comment_id": 103381285, "body": "There is nothing that will easily help you . You will have to loop through one of the maps and look-up in the other one. Ideally loop through whichever would be the smaller one."}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 2, "last_activity_date": 1571848238, "creation_date": 1571848238, "answer_id": 58527332, "question_id": 58527278, "link": "https://stackoverflow.com/questions/58527278/how-to-subtract-stdunordered-map-vector-elements-from-one-to-other-and-update/58527332#58527332", "title": "How to subtract std::unordered_map vector elements from one to other and update it in C++?", "body": "<p>Do you mean something like</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>for(auto &amp;[key, val]: outgoing_msgs)\n{\n   auto &amp;prev{outgoing_msgs_prev[key]};\n   for(std::size_t i{}; i &lt; val.size(); ++i) val[i] -= prev[i];\n}\n</code></pre>\n\n<p>?</p>\n"}], "owner": {"reputation": 11, "user_id": 6786798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5b0bb684efa5507d2084e2f7d3df8f?s=128&d=identicon&r=PG&f=1", "display_name": "e. sfe", "link": "https://stackoverflow.com/users/6786798/e-sfe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571848238, "creation_date": 1571847991, "last_edit_date": 1571848077, "question_id": 58527278, "link": "https://stackoverflow.com/questions/58527278/how-to-subtract-stdunordered-map-vector-elements-from-one-to-other-and-update", "title": "How to subtract std::unordered_map vector elements from one to other and update it in C++?", "body": "<p>I have two <code>std::unordered_map</code>s in C++ where the key is an Index (unsigned integer) and the value is a vector of real numbers. The maps are defined as the following:</p>\n\n<pre><code>std::unordered_map&lt;Index, std::vector&lt;Real&gt;&gt; outgoing_msgs;\n\nstd::unordered_map&lt;Index, std::vector&lt;Real&gt;&gt; outgoing_msgs_prev;\n</code></pre>\n\n<p>These 2 unordered_maps have the same structures, and size properties, and also they have the same key values, same vector size but the difference resides in the vector element values.</p>\n\n<p>I want to obtain the subtraction of the vector values of <code>outgoing_msgs</code> (the first unordered_map) from the values of the vector of <code>outgoing_msgs_prev</code> (which is the second unordered_map) based on the index, which means that the subtraction of the vector will happen for the vectors that have same keys (Indexes) in both unordered maps.</p>\n\n<p>Is it possible?</p>\n\n<p>What is the fastest way to do it?</p>\n"}, {"tags": ["c++", "regex", "c++11"], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 3451943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c52082c6499925324ec427f92027ded0?s=128&d=identicon&r=PG&f=1", "display_name": "Shiwayari", "link": "https://stackoverflow.com/users/3451943/shiwayari"}, "is_accepted": true, "score": 0, "last_activity_date": 1571857383, "creation_date": 1571857383, "answer_id": 58529482, "question_id": 58527276, "link": "https://stackoverflow.com/questions/58527276/cannot-increment-returned-sregex-iterator/58529482#58529482", "title": "Cannot increment returned sregex_iterator?", "body": "<p>Apparently <code>sregex_iterator</code> <em>does</em> store a pointer to the constructed-from regex. </p>\n\n<blockquote>\n  <p>It is the programmer's responsibility to ensure that the std::basic_regex object passed to the iterator's constructor outlives the iterator. Because the iterator stores a pointer to the regex, incrementing the iterator after the regex was destroyed accesses a dangling pointer. </p>\n</blockquote>\n\n<p>from cppreference. This seems unfortunate ..., but I guess I can return the regex instead of the iterator.</p>\n\n<p>Curious with regex being C++11 and not having a move constructor instead, but I see this was added with C++14 .. maybe time to update.</p>\n"}], "owner": {"reputation": 167, "user_id": 3451943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c52082c6499925324ec427f92027ded0?s=128&d=identicon&r=PG&f=1", "display_name": "Shiwayari", "link": "https://stackoverflow.com/users/3451943/shiwayari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58529482, "answer_count": 1, "score": 0, "last_activity_date": 1571857383, "creation_date": 1571847952, "question_id": 58527276, "link": "https://stackoverflow.com/questions/58527276/cannot-increment-returned-sregex-iterator", "title": "Cannot increment returned sregex_iterator?", "body": "<p>I'm trying to construct an sregex_iterator from some complicated computations so I wrote a function to do this and return the iterator. However when I then want to increment the returned iterator, the program crashes, sometimes throwing std::bad_alloc, sometimes not..</p>\n\n<p>I managed to reduce it to a MWE with little code but somehow I still cannot figure out what is happening..</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n\nusing namespace std;\n\nsregex_iterator get_it(const string&amp; str) {\n    regex r(\"([ab]{3})\");\n\n    auto it = sregex_iterator(str.begin(), str.end(), r);\n    cout &lt;&lt; (it == sregex_iterator() ? \"end\\n\" : \"more\\n\");\n    ++it; //works as expected .. no crash. When commented out, program still crashes\n    cout &lt;&lt; \"can incr ..\\n\";\n\n    return it;\n}\n\nint main(int argc, char** argv) {\n    auto it = get_it(\"aaa bbb\");\n    cout &lt;&lt; (it == sregex_iterator() ? \"end\\n\" : \"more\\n\");\n    ++it; //this crashes the program\n\n    cout &lt;&lt; \"success\\n\"; // never runs\n}\n</code></pre>\n\n<p>To compile I use g++ (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0 with <code>-std=c++11</code> flag.</p>\n\n<p>This runs and outputs</p>\n\n<pre><code>more\ncan incr ..\nmore\nterminate called after throwing an instance of 'std::bad_alloc'\n  what():  std::bad_alloc\n</code></pre>\n\n<p>So increment works in the function where I construct the iterator, but not outside. But all that happens is copy (/move if RVO happens) of the iterator, which should not invalidate it?\nSurely the <code>sregex_iterator</code> does not store reference or pointer to any of its constructed-from arguments?</p>\n\n<p>My only guess is there must be a ref/ptr to temporary somewhere but I do not see it.. or what am I missing here?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 1, "creation_date": 1571847959, "post_id": 58527213, "comment_id": 103378835, "body": "It&#39;s not really clear what&#39;s not working for you in the code that you have posted (apart from changing that loop to iterate 490 times instead of 3 times)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1571848354, "post_id": 58527213, "comment_id": 103379033, "body": "You also need to specify the language, C and C++ are different languages."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 2, "creation_date": 1571848584, "post_id": 58527213, "comment_id": 103379134, "body": "Do you have signals below <code>100</code>? If so, how should they be formatted? &quot;<code>._001</code>&quot; or perhaps &quot;<code>._1</code>&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12227875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ac8febe3e3cc08d724931fd9327354a?s=128&d=identicon&r=PG&f=1", "display_name": "user12227875", "link": "https://stackoverflow.com/users/12227875/user12227875"}, "edited": false, "score": 0, "creation_date": 1571859506, "post_id": 58527292, "comment_id": 103383689, "body": "yes exactly, this is exactly what i want. Thank you"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 3, "last_activity_date": 1571848069, "creation_date": 1571848069, "answer_id": 58527292, "question_id": 58527213, "link": "https://stackoverflow.com/questions/58527213/how-to-loop-over-defined-name-pattern/58527292#58527292", "title": "How to loop over defined name pattern", "body": "<p>You probably want something this:</p>\n\n<pre><code>for (i = 1; i &lt;= 490 - 100; i++)\n{\n  SPrint(signal, \"Dem_AllEventsStatusByte._%d\", i + 100);\n</code></pre>\n\n<p>or maybe this:</p>\n\n<pre><code>for (i = 101; i &lt;= 490; i++)\n{\n  SPrint(signal, \"Dem_AllEventsStatusByte._%d\", i);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12227875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ac8febe3e3cc08d724931fd9327354a?s=128&d=identicon&r=PG&f=1", "display_name": "user12227875", "link": "https://stackoverflow.com/users/12227875/user12227875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1571865113, "accepted_answer_id": 58527292, "answer_count": 1, "score": -2, "last_activity_date": 1571848303, "creation_date": 1571847651, "last_edit_date": 1571848303, "question_id": 58527213, "link": "https://stackoverflow.com/questions/58527213/how-to-loop-over-defined-name-pattern", "closed_reason": "Needs details or clarity", "title": "How to loop over defined name pattern", "body": "<p>I have around 500 signals with the naming pattern</p>\n\n<pre><code>\"Dem_AllEventsStatusByte._101\"\n\"Dem_AllEventsStatusByte._102\"\n\"Dem_AllEventsStatusByte._103\"\n...\n\"Dem_AllEventsStatusByte._490\"\n</code></pre>\n\n<p>I want to loop over all of them. </p>\n\n<p>I tried the following code but when i=10 then my signal name is like \" Dem_AllEventsStatusByte._1010\" which is false it should be 110 at the end.</p>\n\n<pre><code>for (i=1; i&lt;=3;i++)\n  {\n    SPrint(signal, \"Dem_AllEventsStatusByte._10%d\", i);\n</code></pre>\n\n<p>How to loop over 490 signals of same name pattern? please help! Thank you</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "for-loop", "max"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1571847227, "post_id": 58527084, "comment_id": 103378496, "body": "When you run this with a debugger, what is the first point at which it behaves differently than you expected?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 12154743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrLTaqqihCC55jT5P897daOR6YqlQJ4D6nbxNf2g=k-s128", "display_name": "xdarkestshadow", "link": "https://stackoverflow.com/users/12154743/xdarkestshadow"}, "edited": false, "score": 0, "creation_date": 1571851261, "post_id": 58527182, "comment_id": 103380303, "body": "yes, it works perfectly with all the other inputs, but I also need this program to work with &quot;3 2&quot; input. Is there any way to do it?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 25, "user_id": 12154743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrLTaqqihCC55jT5P897daOR6YqlQJ4D6nbxNf2g=k-s128", "display_name": "xdarkestshadow", "link": "https://stackoverflow.com/users/12154743/xdarkestshadow"}, "edited": false, "score": 0, "creation_date": 1571851429, "post_id": 58527182, "comment_id": 103380384, "body": "@xdarkestshadow Is I already wrote in my answer the valid range of indices is [0, 2]. So using the index 2 + 1 ( == k + 1) is invalid and results in undefined behavior. Do you need undefined behavior?:)"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1571848888, "last_edit_date": 1571848888, "creation_date": 1571847512, "answer_id": 58527182, "question_id": 58527084, "link": "https://stackoverflow.com/questions/58527084/finding-max-element-which-is-to-the-right-of-column-k/58527182#58527182", "title": "Finding max element which is to the right of column &#39;k&#39;", "body": "<p>To get the expected output you want it is enough to write</p>\n\n<pre><code>int max = a[0][k+1];\n\nfor ( int i = 1; i &lt; n; i++ )\n{\n    if ( max &lt; a[i][k+1] ) max = a[i][k+1];\n}\n</code></pre>\n\n<p>I assume that <code>k + 1</code> is less than <code>m</code>. That is this check</p>\n\n<p>if (k>=m)\n     cout&lt;&lt;\"No\";</p>\n\n<p>shall be done before the loop. For example</p>\n\n<pre><code>int max;\n\nif ( k + 1 &lt; m )\n{\n    max = a[0][k+1];\n\n    for ( int i = 1; i &lt; n; i++ )\n    {\n        if ( max &lt; a[i][k+1] ) max = a[i][k+1];\n    }\n}\n\nif ( not ( k + 1 &lt; m ) )\n    cout&lt;&lt;\"No\";\nelse\n    cout&lt;&lt;max;    \n</code></pre>\n\n<p>And for this input </p>\n\n<pre><code>3 2\n</code></pre>\n\n<p>the program shall issue \"No\" because k + 1 when k is equal to 2 yields 3 and 3 is not a valid index. The range of valid indices for this input is <code>[0, 2]</code>.</p>\n\n<p>You can get the expected result using the presented code in my answer for this input</p>\n\n<pre><code>3 1\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12154743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCrLTaqqihCC55jT5P897daOR6YqlQJ4D6nbxNf2g=k-s128", "display_name": "xdarkestshadow", "link": "https://stackoverflow.com/users/12154743/xdarkestshadow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571848888, "creation_date": 1571847100, "last_edit_date": 1571848083, "question_id": 58527084, "link": "https://stackoverflow.com/questions/58527084/finding-max-element-which-is-to-the-right-of-column-k", "title": "Finding max element which is to the right of column &#39;k&#39;", "body": "<p>I have a task where I am asked to find max element which is to the right of column 'k' (as I understand, I need to find the maximum in k+1 column). I am clearly doing something wrong because when I run the code max value is equal to 0. There has to be a mistake I am missing so any help would be appreciated.\nThis is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main() {\n int n,m,k;\n int max=-1000001;\n int  a[10][10];\n cin&gt;&gt;n&gt;&gt;k;\n m=n;\n  for (int i=0;i&lt;n;i++) {\n   for (int j=0;j&lt;m;j++) {\n     cin&gt;&gt;a[i][j];\n   }\n }\n for(int i=0;i&lt;n;i++)\n{\n       for (int j=0;j&lt;m+1;j++)\n       {\n        if(a[i][j]&gt;max &amp;&amp; a[i][j]!=max &amp;&amp; j==k+1)\n        max=a[i][j];\n       } \n}\n  if (k&gt;=m)\n     cout&lt;&lt;\"No\";\n  else\n     cout&lt;&lt;max;    \n}\n</code></pre>\n\n<p>This is the input:</p>\n\n<pre><code>3 2\n1 2 3\n5 5 2\n6 3 4\n</code></pre>\n\n<p>This is the output I should get:</p>\n\n<pre><code>4\n</code></pre>\n"}, {"tags": ["c++", "googletest", "googlemock"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12264119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1ae63bd92d045ddfcfa9ca62106dd2?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/12264119/rajesh"}, "edited": false, "score": 0, "creation_date": 1572017935, "post_id": 58554857, "comment_id": 103442282, "body": "Even after commeting the EXPECT_CALL, i see the same error error C2770: invalid explicit template argument(s). One observation is mocking any method with one or more parameters throws the above mentioned error. But if i try to mock any function which has no arguments, there is no compilation error. Below is the code."}, {"owner": {"reputation": 1, "user_id": 12264119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1ae63bd92d045ddfcfa9ca62106dd2?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/12264119/rajesh"}, "edited": false, "score": 0, "creation_date": 1572018313, "post_id": 58554857, "comment_id": 103442444, "body": "//Working code  class RLanguageMock: public RLanguage { public:     RLanguageMock():RLanguage( ){};     MOCK_METHOD0(CreateDatabase,  RDatabase*()); }; //Non-Working Code class RLanguageMock: public RLanguage { public:     RLanguageMock():RLanguage( ){};     MOCK_METHOD1(CreateDatabase,  RDatabase*(bool)); };"}], "tags": [], "owner": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "is_accepted": false, "score": 0, "last_activity_date": 1571998092, "last_edit_date": 1571998092, "creation_date": 1571992022, "answer_id": 58554857, "question_id": 58526747, "link": "https://stackoverflow.com/questions/58526747/not-able-to-mock-cdatabase-open-function-using-google-mock/58554857#58554857", "title": "Not able to Mock CDatabase Open function using google Mock", "body": "<p>There are two errors in your test:  </p>\n\n<ol>\n<li>you put in the <code>EXPECT_CALL</code> a method function, that is not a mock method  </li>\n<li>you do not call any method in your test.</li>\n</ol>\n\n<p>This is a proper way:</p>\n\n<pre><code>TEST_F(TestRLanguage, initializeSuccess)\n{\n\n    FakeDatabase database;\n    EXPECT_CALL(database, Open_impl(NULL, FALSE, FALSE, \"ODBC;DSN=\", FALSE)).Times(testing::Exactly(1));\n    database.Open(NULL);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6831266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462398497a0b449b2d9d909155716258?s=128&d=identicon&r=PG&f=1", "display_name": "thilo", "link": "https://stackoverflow.com/users/6831266/thilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1609953201, "creation_date": 1609953201, "answer_id": 65600250, "question_id": 58526747, "link": "https://stackoverflow.com/questions/58526747/not-able-to-mock-cdatabase-open-function-using-google-mock/65600250#65600250", "title": "Not able to Mock CDatabase Open function using google Mock", "body": "<p>I had the same issue. In my case it was related to the version of Google Test. I had the issue with version 1.8.1 -- &quot;the last release supporting pre-C++11 compilers&quot; (as stated <a href=\"https://github.com/google/googletest/releases/tag/release-1.8.1%5D\" rel=\"nofollow noreferrer\">here</a>). The issue was fixed with <a href=\"https://github.com/google/googletest/pull/1817\" rel=\"nofollow noreferrer\">pull request #1817</a>. I am using HEAD of <a href=\"https://github.com/google/googletest/tree/v1.8.x\" rel=\"nofollow noreferrer\">branch 1.8.x</a> now (<a href=\"https://github.com/google/googletest/commit/dea0216d0c6bc5e63cf5f6c8651cd268668032ec\" rel=\"nofollow noreferrer\">commit dea0216</a>) and the issue is gone.</p>\n"}], "owner": {"reputation": 1, "user_id": 12264119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1ae63bd92d045ddfcfa9ca62106dd2?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/12264119/rajesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1609953201, "creation_date": 1571845925, "last_edit_date": 1573361852, "question_id": 58526747, "link": "https://stackoverflow.com/questions/58526747/not-able-to-mock-cdatabase-open-function-using-google-mock", "title": "Not able to Mock CDatabase Open function using google Mock", "body": "<p>I am trying to mock an Open function present as part of the CDatabase Class by using Google Mock. Visual studio version: 2010\nBelow is the code snippet:</p>\n\n<pre><code>class TestRLanguage: public RLanguage, public ::testing::Test\n{\n};\n\nclass FakeDatabase : public CDatabase\n{\npublic:\n    MOCK_METHOD5(Open_impl, BOOL(LPCTSTR lpszDSN, BOOL bExclusive,BOOL bReadonly, LPCTSTR lpszConnect,BOOL bUseCursorLib));\n\n    BOOL Open(LPCTSTR lpszDSN, BOOL bExclusive = FALSE,\n        BOOL bReadonly = FALSE, LPCTSTR lpszConnect = _T(\"ODBC;\"),\n        BOOL bUseCursorLib = TRUE) override\n    {\n        Open_impl( lpszDSN, bExclusive, bReadonly, lpszConnect, bUseCursorLib);\n    }\n};\n\n// Test case for testing initialize function\nTEST_F(TestRLanguage, initializeSuccess)\n{\n    FakeDatabase database;\n    EXPECT_CALL(database, Open(NULL, FALSE, FALSE, \"ODBC;DSN=\", FALSE)).Times(testing::Exactly(1));\n}\n</code></pre>\n\n<p>I get the below error:</p>\n\n<blockquote>\n<pre><code>error C2770: invalid explicit template argument(s) for 'AddReference&lt;const ::std::tr1::tuple_element&lt;I,std::tr1::tuple&lt;_Arg0,_Arg1,_Arg2,_Arg3,_Arg4&gt;&gt;::type&gt;::type testing::internal::TuplePolicy&lt;TupleT&gt;::get(const std::tr1::tuple&lt;_Arg0,_Arg1,_Arg2,_Arg3,_Arg4&gt; &amp;)'    c:\\src\\googlemockandtest\\aqtsw\\util\\googletest\\googletest-release-1.8.1\\googletest\\include\\gtest\\gtest-printers.h\n</code></pre>\n</blockquote>\n\n<p>Can anyone help me in solving this problem? </p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 5, "creation_date": 1571845553, "post_id": 58526606, "comment_id": 103377655, "body": "Please don&#39;t paraphrase the error message, instead, copy and paste into the question."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1571845629, "post_id": 58526606, "comment_id": 103377694, "body": "What is the <b>exact</b> error message?"}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1571845960, "last_edit_date": 1571845960, "creation_date": 1571845559, "answer_id": 58526626, "question_id": 58526606, "link": "https://stackoverflow.com/questions/58526606/incomplete-type-not-allowed-error-for-built-in-array/58526626#58526626", "title": "Incomplete type not allowed error for built in array", "body": "<p>You need to <code>#include &lt;array&gt;</code></p>\n\n<p>Also:</p>\n\n<p>These are wrong:</p>\n\n<pre><code>        deck[card].suit = static_cast&lt;CardSuit&gt;(suit);\n        deck[card].rank = static_cast&lt;CardRank&gt;(rank);\n</code></pre>\n\n<p>Indexing (<code>deck[ index ]</code>) should be done using integral types, and <code>card</code> is not declared.</p>\n\n<pre><code>size_t card=0; // add this\n\nfor (int suit = 0; suit &lt; MAX_SUITS; ++suit)\n    for (int rank = 0; rank &lt; MAX_RANKS; ++rank)\n    {\n        deck[card].suit = static_cast&lt;CardSuit&gt;(suit);\n        deck[card].rank = static_cast&lt;CardRank&gt;(rank);\n        ++card;\n    }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10113306, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qIHwGcFs9fE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7opkxnmF3RseJtuec-uIlGXUGDIUA/mo/photo.jpg?sz=128", "display_name": "IonutPantazi", "link": "https://stackoverflow.com/users/10113306/ionutpantazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58526626, "answer_count": 1, "score": -2, "last_activity_date": 1571845960, "creation_date": 1571845470, "question_id": 58526606, "link": "https://stackoverflow.com/questions/58526606/incomplete-type-not-allowed-error-for-built-in-array", "title": "Incomplete type not allowed error for built in array", "body": "<p>When i am trying to declare this cursed array it tells me incomplete type not allowed, i have made it myself and when it didn't work for no reason i got the same piece of code from the tutorial i'm following (lessons on a site) and it still didn't work , any help ?</p>\n\n<pre><code>#include &lt;iostream&gt;\nenum CardSuit\n{\n    SUIT_CLUB,\n    SUIT_DIAMOND,\n    SUIT_HEART,\n    SUIT_SPADE,\n    MAX_SUITS\n};\n\nenum CardRank\n{\n    RANK_2,\n    RANK_3,\n    RANK_4,\n    RANK_5,\n    RANK_6,\n    RANK_7,\n    RANK_8,\n    RANK_9,\n    RANK_10,\n    RANK_JACK,\n    RANK_QUEEN,\n    RANK_KING,\n    RANK_ACE,\n    MAX_RANKS\n};\nstruct Card\n{\n    CardRank rank;\n    CardSuit suit;\n};\n\nint main()\n{\nstd::array&lt;Card, 52&gt; deck {};\n\n    for (int suit = 0; suit &lt; MAX_SUITS; ++suit)\n        for (int rank = 0; rank &lt; MAX_RANKS; ++rank)\n        {\n            deck[card].suit = static_cast&lt;CardSuit&gt;(suit);\n            deck[card].rank = static_cast&lt;CardRank&gt;(rank);\n            ++card;\n        }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "floating-point-exceptions"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1571845303, "post_id": 58526526, "comment_id": 103377521, "body": "You only define 10 elements in array of length 11, so the last element (at index 10) is equal to 0. Bad things happen when you try to divide integers by 0."}, {"owner": {"reputation": 29, "user_id": 12096025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ce9929ed626e1694a9c5120562492f?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/12096025/santiago"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1571845693, "post_id": 58526526, "comment_id": 103377728, "body": "OMG thank you, cant believe I didn&#39;t notice that! really really appreciate it!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1571846162, "post_id": 58526526, "comment_id": 103377950, "body": "@Santiago <code>int arr[] = {2,3,5,7,11,13,17,19,23,29};</code> -- Then <code>const int ARR_LENGTH = sizeof(arr) &#47; sizeof(arr[0]);</code>."}, {"owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "edited": false, "score": 0, "creation_date": 1571846432, "post_id": 58526526, "comment_id": 103378090, "body": "Also, if I didnt miss something you are using isItRight uninitialized, so, it contains random value"}], "owner": {"reputation": 29, "user_id": 12096025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ce9929ed626e1694a9c5120562492f?s=128&d=identicon&r=PG&f=1", "display_name": "Santiago", "link": "https://stackoverflow.com/users/12096025/santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571845352, "creation_date": 1571845172, "last_edit_date": 1571845352, "question_id": 58526526, "link": "https://stackoverflow.com/questions/58526526/c-how-to-fix-error-terminated-due-to-signal-floating-point-exception-8", "title": "(C++) How to fix error: Terminated due to signal: FLOATING POINT EXCEPTION (8)", "body": "<p>I am practicing some book problems, and I am not able to understand why is there a \"Terminated due to signal: FLOATING POINT EXCEPTION (8)\" error.</p>\n\n<p>If possible, could you please explain why is there an error and how to fix it.</p>\n\n<p>Thank you for your time.</p>\n\n<p>I do not understand the error. Hence, I haven't tried anything</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nconst int ARR_LENGTH =11;\nint main() {\n\n    int arr[ARR_LENGTH] = {2,3,5,7,11,13,17,19,23,29};\n    int input =0;\n    bool isItRight; \n    bool isItPrime;\n\n\n    cout &lt;&lt;\"Input an integer between 1 and 1000\" &lt;&lt;endl;\n    while (isItRight == false){\n        cin &gt;&gt;input;\n        if (!(1000 &gt;=input  &amp;&amp; input &gt;= 1))\n                isItRight = false;\n            else \n                isItRight =true;\n\n        if (input&lt;1 || input &gt; 1000 ){\n            cout &lt;&lt;\"Input out of range\" &lt;&lt;endl;\n            cout &lt;&lt; \"enter a new value: \";\n        } else if (!input){\n            cout &lt;&lt;\"wrong data type, enter a new value: \";\n        }\n   }\n\n   for (int i =0; i &lt; ARR_LENGTH; i++){\n         if (input % arr[i] || input == arr[i])\n             isItPrime =true;\n        else \n             isItPrime =false;\n   }    \n   if (isItPrime == true){\n        cout &lt;&lt;\"\\nThe value \"&lt;&lt;input &lt;&lt;\" is prime!\" &lt;&lt;endl;\n   } else if (isItPrime == false){\n    int i =0;\n        while (i&lt; ARR_LENGTH){\n           if ((input % arr[i]) == 0 ){\n            cout &lt;&lt;\"\\nThe value \"&lt;&lt;input &lt;&lt;\" is divisible by: \" \n                 &lt;&lt; arr[i] &lt;&lt;endl;\n        }\n       }\n\n   }\n    return 0;\n}\n</code></pre>\n\n<p>I expected to check prime numbers and with the strategy in place I am not able to output anything.</p>\n"}, {"tags": ["c++", "char", "c-strings", "strlen"], "comments": [{"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "edited": false, "score": 9, "creation_date": 1571844330, "post_id": 58526276, "comment_id": 103377022, "body": "Why don&#39;t you run it?"}, {"owner": {"reputation": 1503, "user_id": 6901184, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKRBgaWMhAY/AAAAAAAAAAI/AAAAAAAAC80/ry3so1Pwh-A/photo.jpg?sz=128", "display_name": "Mart&#237;n Zaragoza", "link": "https://stackoverflow.com/users/6901184/mart%c3%adn-zaragoza"}, "edited": false, "score": 0, "creation_date": 1571844508, "post_id": 58526276, "comment_id": 103377107, "body": "Try running the code in an online C or C++ editor such as: <a href=\"https://www.onlinegdb.com/online_c++_compiler\" rel=\"nofollow noreferrer\">onlinegdb.com/online_c++_compiler</a>"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1571844655, "post_id": 58526276, "comment_id": 103377195, "body": "You have to <i>ask</i> yourself."}, {"owner": {"reputation": 820, "user_id": 5147708, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d63421f2bf9cb79b3c54df11430d8f6b?s=128&d=identicon&r=PG", "display_name": "Alexey Melezhik", "link": "https://stackoverflow.com/users/5147708/alexey-melezhik"}, "edited": false, "score": 0, "creation_date": 1571845663, "post_id": 58526276, "comment_id": 103377714, "body": "Agree with all the other reviewers. You need to run it to get the answer. Should it have been the question about how to run the code?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1571845913, "post_id": 58526276, "comment_id": 103377828, "body": "Careful with &quot;Just run it&quot; advice. It falls down in the face of Undefined Behaviour. Fortunately I see none of that in this code, so running it works in this case, but how is someone who doesn&#39;t understand the code supposed to know that?."}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1571845182, "post_id": 58526435, "comment_id": 103377449, "body": "Other than I&#39;m pretty sure <code>*(x+4) = x[n];</code> is UB  (since &quot;tasked&quot; is actually a const char)"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1571845248, "post_id": 58526435, "comment_id": 103377491, "body": "@UKMonkey You are wrong. It is a well-formed code. The both addressed characters of the array are initialized."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1571845276, "post_id": 58526435, "comment_id": 103377507, "body": "Yeah - just noticed that it&#39;s an array (which would be a copy) rather than pointer - my mistake"}, {"owner": {"reputation": 1, "user_id": 12264022, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8u_TNKw_Ul0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdllkQ7fdha6VPpTaG-9goTIgbtpA/photo.jpg?sz=128", "display_name": "Josh Rinehart", "link": "https://stackoverflow.com/users/12264022/josh-rinehart"}, "edited": false, "score": 0, "creation_date": 1571845522, "post_id": 58526435, "comment_id": 103377638, "body": "I think I understand most of what the function does, except for what <code>*(x+4) = x[n];</code> does."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1, "user_id": 12264022, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8u_TNKw_Ul0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdllkQ7fdha6VPpTaG-9goTIgbtpA/photo.jpg?sz=128", "display_name": "Josh Rinehart", "link": "https://stackoverflow.com/users/12264022/josh-rinehart"}, "edited": false, "score": 0, "creation_date": 1571845602, "post_id": 58526435, "comment_id": 103377683, "body": "@JoshRinehart See my uodated post. *(x+4) = x[n]; is the same as x[4] = x[n]; that is x[4] = x[6]; Or the same as *( x + 4 ) = *( x + 6 )."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1571845544, "last_edit_date": 1571845544, "creation_date": 1571844853, "answer_id": 58526435, "question_id": 58526276, "link": "https://stackoverflow.com/questions/58526276/could-i-get-help-finding-the-output-of-this-function-c/58526435#58526435", "title": "Could I get help finding the output of this function? (C++)", "body": "<p>The output of the program will be</p>\n\n<pre><code>ask\n</code></pre>\n\n<p>After this declaration</p>\n\n<pre><code>char y[10] = \"tasked\";\n</code></pre>\n\n<p>the array y is initialized the following way</p>\n\n<pre><code>char y[10] = { 't', 'a', 's', 'k', 'e', 'd', '\\0', '\\0', '\\0', '\\0' };\n</code></pre>\n\n<p>That is all characters that do not have a corresponding initializing character from the string literal are zero-initialized.</p>\n\n<p>After this statement</p>\n\n<pre><code>n = strlen (x);\n</code></pre>\n\n<p>n is equal to 6.</p>\n\n<p>So this statement</p>\n\n<pre><code>*(x+4) = x[n];\n</code></pre>\n\n<p>do the following. It substitutes the character 'e' (at index 4) for the character '\\0' (at index 6);</p>\n\n<p>So after that the array has the following content</p>\n\n<pre><code>{ 't', 'a', 's', 'k', '\\0', 'd', '\\0', '\\0', '\\0', '\\0' }\n</code></pre>\n\n<p>Then the pointer advances one position and points to the second character of the array (with index 1) that is to the character 'a'.</p>\n\n<p>So starting from this character 'a' until the terminating zero is encountered the characters 'a', 's', and 'k' are outputted.</p>\n"}, {"tags": [], "owner": {"reputation": 1698, "user_id": 2440976, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5f227abb74dd5cb7e0c071504397c845?s=128&d=identicon&r=PG&f=1", "display_name": "Dan B", "link": "https://stackoverflow.com/users/2440976/dan-b"}, "is_accepted": false, "score": -1, "last_activity_date": 1571854394, "creation_date": 1571854394, "answer_id": 58528783, "question_id": 58526276, "link": "https://stackoverflow.com/questions/58526276/could-i-get-help-finding-the-output-of-this-function-c/58528783#58528783", "title": "Could I get help finding the output of this function? (C++)", "body": "<p><a href=\"https://i.stack.imgur.com/wJVOp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wJVOp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Open this <a href=\"https://www.onlinegdb.com/online_c_debugger\" rel=\"nofollow noreferrer\">site</a> : and paste your code, then add the following before the \"int main()\" line:</p>\n\n<pre><code>#include &lt;string.h&gt; \n</code></pre>\n\n<p>This will allow you to use the \"strlen\" function.\nClick the green \"Run\" button to get the output.\nThen follow @Vlad from Moscow's answer and you will be informed. </p>\n"}], "owner": {"reputation": 1, "user_id": 12264022, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8u_TNKw_Ul0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdllkQ7fdha6VPpTaG-9goTIgbtpA/photo.jpg?sz=128", "display_name": "Josh Rinehart", "link": "https://stackoverflow.com/users/12264022/josh-rinehart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1571854394, "creation_date": 1571844304, "last_edit_date": 1571845987, "question_id": 58526276, "link": "https://stackoverflow.com/questions/58526276/could-i-get-help-finding-the-output-of-this-function-c", "title": "Could I get help finding the output of this function? (C++)", "body": "<p>What would the output of this code be, with all of the appropriate includes?</p>\n\n<p>I understand what everything does up until <code>*(x+4) = x[n];</code>, and from there I got a little lost.</p>\n\n<pre><code>int main(){\n    int n;\n    char y[10] = \"tasked\";\n    char *x = y;\n    n = strlen (x);\n    *(x+4) = x[n];\n    x++;\n    printf (\"%s\",x);\n}\n</code></pre>\n\n<p>Edit: I didn't understand what <code>*(x+4) = x[n];</code> did to the string, thank you all!</p>\n"}, {"tags": ["c++", "namespaces", "definition", "c++20"], "answers": [{"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571847101, "post_id": 58526366, "comment_id": 103378426, "body": "It could be said simpler: members of the set of inline namespaces are members of the enclosing namespace. Could&#39;n it be?"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1571845136, "last_edit_date": 1571845136, "creation_date": 1571844612, "answer_id": 58526366, "question_id": 58526031, "link": "https://stackoverflow.com/questions/58526031/extending-a-namespace-in-an-inline-namespace-that-initially-was-defined-in-the-e/58526366#58526366", "title": "Extending a namespace in an inline namespace that initially was defined in the enclosing namespace of the inline namespace", "body": "<p>I'll try to rewrite the standard wording in a less dense (but possibly less precise) way:</p>\n\n<ol>\n<li><p>We are lexically inside namespace <code>X</code>.</p></li>\n<li><p>We encounter something that looks like <code>namespace Y { ... }</code>.</p></li>\n<li><p>We look up <code>Y</code>. If <code>Y</code> is not a namespace name, move on<sup>1</sup>.</p></li>\n<li><p>Was <code>Y</code> introduced (directly) in <code>X</code>? If so, move to point 6.</p></li>\n<li><p>Was <code>Y</code> introduced in a namespace that is part of the inline set<sup>2</sup> of namespaces of <code>X</code>? If yes, move to 6. If not, move on<sup>1</sup>.</p></li>\n<li><p><code>Y</code> does extend the namespace we found in step 3.</p></li>\n</ol>\n\n<p><sup><sup>1</sup> <em>\"Move on\"</em> in the sense of <em>\"ignore the cited standard paragraph\"</em>.</sup><br>\n<sup><sup>2</sup> <a href=\"http://eel.is/c++draft/basic.namespace#namespace.def-8.sentence-2\" rel=\"nofollow noreferrer\">The inline namespace set of N is the transitive closure of all inline namespaces in N.</a></sup></p>\n\n<blockquote>\n  <p>may a namespace be defined in a namespace and then extended in one of its inline namespace?</p>\n</blockquote>\n\n<p>No. We only consider the directly enclosing namespace (<code>N3</code> is extended in <code>N1</code> in your first example, and in <code>N2</code> in your second one) and its inline namespaces. This is why your second example does not work: <code>N2</code> (or its inline set of namespaces) does not contain any previous definition of <code>N3</code>.</p>\n\n<blockquote>\n  <p>May a namespace be defined in an inline namespace and then be extended in its enclosing namespace?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>The examples you show are consistent with the standard wording.</p>\n"}, {"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571847079, "post_id": 58526642, "comment_id": 103378416, "body": "It could be said simpler: members of the set of inline namespaces are members of the enclosing namespace. Could&#39;n it be?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1571847111, "post_id": 58526642, "comment_id": 103378429, "body": "@VladfromMoscow See <a href=\"http://eel.is/c++draft/basic.namespace#namespace.def-7\" rel=\"nofollow noreferrer\">eel.is/c++draft/basic.namespace#namespace.def-7</a>"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 2, "last_activity_date": 1571845613, "creation_date": 1571845613, "answer_id": 58526642, "question_id": 58526031, "link": "https://stackoverflow.com/questions/58526031/extending-a-namespace-in-an-inline-namespace-that-initially-was-defined-in-the-e/58526642#58526642", "title": "Extending a namespace in an inline namespace that initially was defined in the enclosing namespace of the inline namespace", "body": "<blockquote>\n  <p>may a namespace be defined in a namespace and then extended in one of its inline namespace?</p>\n</blockquote>\n\n<p>No. In your second example, when the compiler sees the definition of <code>N3</code> inside <code>N2</code>, the lookup of <code>N3</code> finds the <code>N3</code> that was declared outside <code>N2</code>, but that <code>N3</code> was not \"introduced in the namespace in which the named-namespace-definition appears\" (since it's not inside <code>N2</code>), or \"introduced in a member of the inline namespace set of that namespace\" since the inline namespace set of <code>N2</code> is the set of transitively inline namespaces <em>inside</em> <code>N2</code>. Thus, this new definition of <code>N3</code> doesn't extend the previous one.</p>\n\n<blockquote>\n  <p>May a namespace be defined in an inline namespace and then be extended in its enclosing namespace?</p>\n</blockquote>\n\n<p>Yes. In your first example, <code>N3</code> when looked up finds <code>N2::N3</code> which was \"introduced in a member of the inline namespace set\" since <code>N2</code> is part of the inline namespace set of <code>N1</code>.</p>\n\n<p>We can understand the rationale for this apparent asymmetry as follows: in the second example, when <code>N3</code> is initially defined, it's being defined as a member of <code>N1</code> and <em>not</em> a member of any inline namespace of <code>N1</code>. Later, when <code>N2::N3</code> is being defined, if it were to extend <code>N1::N3</code>, it would be <strong>retroactively</strong> making <code>N3</code> a member of <code>N2</code>, which goes against common sense and is therefore disallowed. In the first example, <code>N3</code> is initially defined as a member of the inline namespace <code>N2</code> and there is no issue with extending it with the second definition later. (Though I cannot see an obvious reason why this is useful.)</p>\n"}], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "accepted_answer_id": 58526642, "answer_count": 2, "score": 2, "last_activity_date": 1571854043, "creation_date": 1571843573, "last_edit_date": 1571854043, "question_id": 58526031, "link": "https://stackoverflow.com/questions/58526031/extending-a-namespace-in-an-inline-namespace-that-initially-was-defined-in-the-e", "title": "Extending a namespace in an inline namespace that initially was defined in the enclosing namespace of the inline namespace", "body": "<p>I would like to check myself whether I understand correctly the following quote below from the C++ 20 Standard (English is not my native language).</p>\n\n<p>Section 9.7.1 Namespace definition:</p>\n\n<blockquote>\n  <p>2 In a named-namespace-definition, the identifier is the name of the\n  namespace. If the identifier, when looked up (6.4.1), refers to a\n  namespace-name (but not a namespace-alias) that was introduced in the\n  namespace in which the named-namespace-definition appears or that was\n  introduced in a member of the inline namespace set of that namespace,\n  the namespace-definition extends the previously-declared namespace.\n  Otherwise, the identifier is introduced as a namespace-name into the\n  declarative region in which the named-namespacedefinition appears.</p>\n</blockquote>\n\n<p>That is may a namespace be defined in a namespace and then extended in one of its inline namespace? Or vice versa. May a namespace be defined in an inline namespace and then be extended in its enclosing namespace?</p>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ninline namespace N1\n{\n    inline namespace N2\n    {\n        namespace N3\n        {\n            void f( int ) { std::cout &lt;&lt; \"f( int )\\n\"; }\n        }\n    }\n\n    namespace N3\n    {\n        void f( char ) { std::cout &lt;&lt; \"f( char )\\n\"; }\n    }        \n}\n\nint main()\n{\n    N3::f( 10 );\n    N3::f( 'A' );\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>f( int )\nf( char )\n</code></pre>\n\n<p>However for this program the compiler issues an error saying that reference to 'N3' is ambiguous.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ninline namespace N1\n{\n    namespace N3\n    {\n        void f( int ) { std::cout &lt;&lt; \"f( int )\\n\"; }\n    }\n\n    inline namespace N2\n    {\n        namespace N3\n        {\n            void f( char ) { std::cout &lt;&lt; \"f( char )\\n\"; }\n        }        \n    }\n}\n\nint main()\n{\n    N3::f( 10 );\n    N3::f( 'A' );\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "rate-limiting", "boost-beast"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 10023636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88fe0ff393523aee72bf40dd983b3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kasata Ata", "link": "https://stackoverflow.com/users/10023636/kasata-ata"}, "edited": false, "score": 1, "creation_date": 1572271872, "post_id": 58592263, "comment_id": 103497918, "body": "Is there anything about it in documentation? I wanted to help here, but only thing I managed to find is related to timeouts: <code>For portability reasons, networking does not provide timeouts or cancellation features for synchronous stream operations</code>."}], "tags": [], "owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "is_accepted": false, "score": 1, "last_activity_date": 1572271046, "creation_date": 1572271046, "answer_id": 58592263, "question_id": 58525923, "link": "https://stackoverflow.com/questions/58525923/boost-beast-rate-limiting/58592263#58592263", "title": "Boost.Beast rate limiting", "body": "<p>The limits only work for asynchronous operations.</p>\n"}], "owner": {"reputation": 39, "user_id": 12193917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e35078ca1f116ef4e01750c48090a4?s=128&d=identicon&r=PG&f=1", "display_name": "Jonny Dens", "link": "https://stackoverflow.com/users/12193917/jonny-dens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1572271046, "creation_date": 1571843238, "last_edit_date": 1572256518, "question_id": 58525923, "link": "https://stackoverflow.com/questions/58525923/boost-beast-rate-limiting", "title": "Boost.Beast rate limiting", "body": "<p>I am reading Boost.Beast documentation and I am trying to use rate limiting in my code:</p>\n\n<pre><code>  io_context context;\n  tcp::resolver resolver(context);\n  basic_stream&lt;tcp, executor, simple_rate_policy&gt; stream(context);\n\n  stream.rate_policy().write_limit(1);\n\n  stream.connect(resolver.resolve(\"www.example.com\", \"http\"));\n\n  string response;\n\n  write(stream, buffer(\"GET /index.html HTTP/1.1\\r\\nHost: www.example.com\\r\\n\\r\\n\"));\n\n  read_until(stream, dynamic_buffer(response), \"\\r\\n\\r\\n\");\n\n  cout &lt;&lt; response &lt;&lt; endl;\n\n  context.run();\n</code></pre>\n\n<p>If I am correct, this sample code should cause very long writing via socket connected with endpoint <code>www.example.com:80</code>. But simple_rate_policy seems to work only for asyc reads and writes. Am I doing something wrong or is it purposeful behaviour?</p>\n"}, {"tags": ["c++", "unit-testing", "googlemock"], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 9634289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb71dbce9a93ed492fa47cbc9e4afea2?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/9634289/a-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1571940593, "last_edit_date": 1571940593, "creation_date": 1571940008, "answer_id": 58546860, "question_id": 58525784, "link": "https://stackoverflow.com/questions/58525784/google-mock-how-to-mock-object-owned-by-class-under-test/58546860#58546860", "title": "google mock - how to mock object owned by class under test", "body": "<p>You cannot mock <code>b</code> as it is. You will need to use <a href=\"https://vladris.com/blog/2016/07/06/dependency-injection-in-c.html\" rel=\"nofollow noreferrer\">Dependency Injection</a>.</p>\n\n<p>First you will need to specify a Base Class (or interface) and derive your <code>NetworkClass</code> and <code>NetworkClassMock</code> from <code>INetworkClass</code>. Then you can pass aa raw pointer (better a smart pointer like <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">std::unique_ptr</a>) or a reference to <code>class A</code>. This input can be either your real implementation <code>NetworkClass</code> or your mock <code>NetworkClassMock</code>.</p>\n\n<p>See this example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass INetworkClass\n{\npublic:\n    virtual void doSomething() = 0;\n};\n\nclass NetworkClass : public INetworkClass\n{\npublic:\n    void doSomething() override {std::cout &lt;&lt; \"Real class\" &lt;&lt; std::endl;} ;\n};\n\nclass NetworkClassMock : public INetworkClass\n{\npublic: \n    void doSomething() override {std::cout &lt;&lt; \"Mock class\" &lt;&lt; std::endl;};\n};\n\nclass A\n{\npublic:\n    A(INetworkClass&amp; b) : b(b) {};\n    ~A() {};\n\n    void func1() {b.doSomething();};\n\nprivate:\n    // How do I mock this\n    INetworkClass&amp; b;\n};\n\nint main(){\n  NetworkClass real_class;\n  NetworkClassMock mock_class;\n\n  A a1(real_class);\n  A a2(mock_class);\n\n  a1.func1();\n  a2.func1();\n\n  return 0;\n}\n</code></pre>\n\n<p>If you just want to access your private member, e.g. to read it's value after doing some tests you should redesign your code. Accessing private members from outside your class is not a good design. If you still want to do this you could check <a href=\"https://stackoverflow.com/questions/1093020/unit-testing-and-checking-private-variable-value/1093481#1093481\">this answer</a> (written for C# instead of C++ but still usable).</p>\n\n<p>P.S. To use the override keyword you will need to compile with C++11 support.</p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 58546860, "answer_count": 1, "score": 0, "last_activity_date": 1571940593, "creation_date": 1571842832, "last_edit_date": 1571926677, "question_id": 58525784, "link": "https://stackoverflow.com/questions/58525784/google-mock-how-to-mock-object-owned-by-class-under-test", "title": "google mock - how to mock object owned by class under test", "body": "<p>In this example</p>\n\n<pre><code>class A\n{\npublic:\n    A();\n    ~A();\n\n    virtual void func1();\n    virtual void func2();\n\nprotected:\n    virtual void func3();\nprivate:\n    // How do I mock this\n    NetworkClass b;\n}\n</code></pre>\n\n<p>How do I mock <code>NetworkClass b</code> object?</p>\n\n<p>I don't think it's possible to do this solely using google-mock macros.\nYou'd have to redefine the identifier <code>NetworkClass</code> to actually mean <code>NetworkClassMock</code> and then (for purpose of the test) rename the original <code>NetworkClass</code> to something else like <code>NetworkClass_Orig</code>.</p>\n\n<p>But that still doesn't help you access the private member <code>NetworkClass b</code> for the purpose of the test.</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1571843117, "post_id": 58525780, "comment_id": 103376362, "body": "Search MSDN for <code>FindFirstFile</code> and <code>FindNextFile</code>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1571843282, "post_id": 58525780, "comment_id": 103376450, "body": "I would use the standard library instead <a href=\"https://en.cppreference.com/w/cpp/filesystem\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/filesystem</a> that is after you figure out what drives the user has installed. You may want to avoid network drives or anything cloud related. I am not sure of the purpose of such an application but from a user perspective it sounds very dangerous.."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1571843536, "post_id": 58525780, "comment_id": 103376593, "body": "You need a more reliable way to identify the file than just its name."}, {"owner": {"reputation": 3, "user_id": 12263901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04b6aabdfee4ff0e50d65d5aa875cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Theman50", "link": "https://stackoverflow.com/users/12263901/theman50"}, "edited": false, "score": 0, "creation_date": 1571844673, "post_id": 58525780, "comment_id": 103377204, "body": "Thanks, solved my problem, The program is not malicious, it is just to delete tracking files"}], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 9060589, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L112kx7B-CM/AAAAAAAAAAI/AAAAAAAAAeY/50KaS_RgRwI/photo.jpg?sz=128", "display_name": "Go Go Gadget 2", "link": "https://stackoverflow.com/users/9060589/go-go-gadget-2"}, "is_accepted": true, "score": 0, "last_activity_date": 1571843525, "last_edit_date": 1571843525, "creation_date": 1571843197, "answer_id": 58525915, "question_id": 58525780, "link": "https://stackoverflow.com/questions/58525780/question-about-removing-files-from-drives/58525915#58525915", "title": "Question about Removing files from drives", "body": "<p>You may refer to this <a href=\"https://stackoverflow.com/questions/51378530/searching-for-files-in-a-directory-by-name-using-visual-studio-c\">link</a> which using std::filesystem . It will read the given path and then find the filename you may looking for. </p>\n\n<p>string directory = FOUND_PATH;\nTo delete the file then u may use <code>filesystem::delete(directory)</code>;</p>\n"}], "owner": {"reputation": 3, "user_id": 12263901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04b6aabdfee4ff0e50d65d5aa875cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Theman50", "link": "https://stackoverflow.com/users/12263901/theman50"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 58525915, "answer_count": 1, "score": 0, "last_activity_date": 1571843525, "creation_date": 1571842822, "last_edit_date": 1571843188, "question_id": 58525780, "link": "https://stackoverflow.com/questions/58525780/question-about-removing-files-from-drives", "title": "Question about Removing files from drives", "body": "<p>I'm making a simple program which finds a certain file on a drive and deletes it. I don't necessarily know how to explain it well, but I want to know if its possible for the program i'm making to be able to search all drives and delete the certain file. </p>\n\n<p>For example, say the user run the program and the file is in their D: drive but someone else run the program and it is in their C: drive, how would I make the program be able to search all the drives and delete the certain file. </p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1571842753, "post_id": 58525712, "comment_id": 103376183, "body": "No images of text please, copy paste as text instead."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1571842802, "post_id": 58525712, "comment_id": 103376215, "body": "A hint though: The functions, are they really <i>member</i> functions?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1571842835, "post_id": 58525712, "comment_id": 103376232, "body": "You can use the {} button on the toolbar to form a code block. Select the text and press the {} button"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11769345, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q3CkAJK2MTE/AAAAAAAAAAI/AAAAAAAABEk/Pi3pDrTmLyY/photo.jpg?sz=128", "display_name": "Dina Nasyrkhan", "link": "https://stackoverflow.com/users/11769345/dina-nasyrkhan"}, "edited": false, "score": 0, "creation_date": 1571843889, "post_id": 58525797, "comment_id": 103376779, "body": "I removed private declaration, still have this problem"}, {"owner": {"reputation": 1165, "user_id": 3981539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a09Pb.jpg?s=128&g=1", "display_name": "Kavitha Karunakaran", "link": "https://stackoverflow.com/users/3981539/kavitha-karunakaran"}, "reply_to_user": {"reputation": 11, "user_id": 11769345, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q3CkAJK2MTE/AAAAAAAAAAI/AAAAAAAABEk/Pi3pDrTmLyY/photo.jpg?sz=128", "display_name": "Dina Nasyrkhan", "link": "https://stackoverflow.com/users/11769345/dina-nasyrkhan"}, "edited": false, "score": 1, "creation_date": 1571845741, "post_id": 58525797, "comment_id": 103377740, "body": "Can you please add the updated, complete code as text in the question? It would help us understand the problem better. Please don&#39;t forget to include new set of errors also alongwith the code."}, {"owner": {"reputation": 11, "user_id": 11769345, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q3CkAJK2MTE/AAAAAAAAAAI/AAAAAAAABEk/Pi3pDrTmLyY/photo.jpg?sz=128", "display_name": "Dina Nasyrkhan", "link": "https://stackoverflow.com/users/11769345/dina-nasyrkhan"}, "edited": false, "score": 0, "creation_date": 1571896162, "post_id": 58525797, "comment_id": 103392646, "body": "struct Node { \tint data; \tNode *next; };  class List{ \t\tNode *head, *tail; \tpublic: \t\tList(){ \t\t\thead = NULL; \t\t\ttail = NULL; \t\t} }; Still have exactly the same errors."}, {"owner": {"reputation": 1165, "user_id": 3981539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a09Pb.jpg?s=128&g=1", "display_name": "Kavitha Karunakaran", "link": "https://stackoverflow.com/users/3981539/kavitha-karunakaran"}, "reply_to_user": {"reputation": 11, "user_id": 11769345, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q3CkAJK2MTE/AAAAAAAAAAI/AAAAAAAABEk/Pi3pDrTmLyY/photo.jpg?sz=128", "display_name": "Dina Nasyrkhan", "link": "https://stackoverflow.com/users/11769345/dina-nasyrkhan"}, "edited": false, "score": 0, "creation_date": 1571897278, "post_id": 58525797, "comment_id": 103393004, "body": "If we do not specify access modifiers for any class&#39;s member field in C++, by default, they are treated as private. Hence, the code that you added as comment is not too different from the one you added in the picture. Note that in a class, members are by default private while in a struct, they are by default, public."}, {"owner": {"reputation": 1165, "user_id": 3981539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a09Pb.jpg?s=128&g=1", "display_name": "Kavitha Karunakaran", "link": "https://stackoverflow.com/users/3981539/kavitha-karunakaran"}, "reply_to_user": {"reputation": 11, "user_id": 11769345, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q3CkAJK2MTE/AAAAAAAAAAI/AAAAAAAABEk/Pi3pDrTmLyY/photo.jpg?sz=128", "display_name": "Dina Nasyrkhan", "link": "https://stackoverflow.com/users/11769345/dina-nasyrkhan"}, "edited": false, "score": 0, "creation_date": 1571898743, "post_id": 58525797, "comment_id": 103393621, "body": "Also one suggestion from my end would be to move the methods into the list class so that head and tail are accessible. The suggestion from lucieon about logic change still remains valid IMHO."}], "tags": [], "owner": {"reputation": 1165, "user_id": 3981539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a09Pb.jpg?s=128&g=1", "display_name": "Kavitha Karunakaran", "link": "https://stackoverflow.com/users/3981539/kavitha-karunakaran"}, "is_accepted": false, "score": 2, "last_activity_date": 1571864159, "last_edit_date": 1571864159, "creation_date": 1571842859, "answer_id": 58525797, "question_id": 58525712, "link": "https://stackoverflow.com/questions/58525712/compiler-says-that-head-is-not-declared-linkedlist/58525797#58525797", "title": "Compiler says that &quot;head&quot; is not declared: LinkedList", "body": "<p>You are having head and tail declared inside class List as it's private member fields. But you are accessing them from methods outside the class. The compiler is throwing errors because of that. </p>\n"}, {"tags": [], "owner": {"reputation": 894, "user_id": 3302115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8452b47816537de30117e8d59e93ba06?s=128&d=identicon&r=PG&f=1", "display_name": "srt1104", "link": "https://stackoverflow.com/users/3302115/srt1104"}, "is_accepted": false, "score": 0, "last_activity_date": 1571847430, "creation_date": 1571847430, "answer_id": 58527159, "question_id": 58525712, "link": "https://stackoverflow.com/questions/58525712/compiler-says-that-head-is-not-declared-linkedlist/58527159#58527159", "title": "Compiler says that &quot;head&quot; is not declared: LinkedList", "body": "<p>In the <code>insertFront</code> function, you have coded</p>\n\n<pre><code>head = node\nnode-&gt;next = head;\n</code></pre>\n\n<p>This is wrong. <code>head</code> is the only access you have to the remaining linked list. By doing <code>head = node</code>, you lose access to the rest of the list. and doing <code>node-&gt;next = head</code> after that essentially points the node to itself. It should be done in reverse.</p>\n\n<pre><code>node-&gt;next = head;\nhead = node;\n</code></pre>\n\n<p>Another mistake in the <code>insertBack</code> function. <code>prev</code> is not declared in <code>struct Node</code>. The right way to insert at <code>tail</code> is</p>\n\n<pre><code>tail-&gt;next = node;\ntail = node;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11769345, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q3CkAJK2MTE/AAAAAAAAAAI/AAAAAAAABEk/Pi3pDrTmLyY/photo.jpg?sz=128", "display_name": "Dina Nasyrkhan", "link": "https://stackoverflow.com/users/11769345/dina-nasyrkhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1571861769, "answer_count": 2, "score": -7, "last_activity_date": 1573642553, "creation_date": 1571842613, "last_edit_date": 1573642553, "question_id": 58525712, "link": "https://stackoverflow.com/questions/58525712/compiler-says-that-head-is-not-declared-linkedlist", "closed_reason": "Not suitable for this site", "title": "Compiler says that &quot;head&quot; is not declared: LinkedList", "body": "<p>I define my Node as a struct and trying to get it. But when I run my code compiler says that \"head\", \"tail\" was not declared. Am I define it wrongly?</p>\n\n<p>Tried to use template but it didn't work;</p>\n\n<p><a href=\"https://i.stack.imgur.com/jYd98.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jYd98.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/JinBM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JinBM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "ofstream"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1571842513, "post_id": 58525652, "comment_id": 103376024, "body": "To save it to a specific directory you need to use the full path (or relative path based on the current working directory) to that directory. You can append the file name to the path of the directory if you want or use an OS function to change the working directory to the path you want."}, {"owner": {"reputation": 1, "user_id": 11230899, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FhuJNej7HkA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKyRK3f_Yx-Nj3oo61xCEVQE-H4A/mo/photo.jpg?sz=128", "display_name": "Seanny", "link": "https://stackoverflow.com/users/11230899/seanny"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1571847965, "post_id": 58525652, "comment_id": 103378837, "body": "I&#39;m actually quite new at C++ and still learning.  Can you teach how to append path to the filename?"}, {"owner": {"reputation": 1, "user_id": 11230899, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FhuJNej7HkA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKyRK3f_Yx-Nj3oo61xCEVQE-H4A/mo/photo.jpg?sz=128", "display_name": "Seanny", "link": "https://stackoverflow.com/users/11230899/seanny"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1571848512, "post_id": 58525652, "comment_id": 103379107, "body": "I figured it out.  Thanks!  You mentioning appending the path made me realize it.  I added: std::string pathTo = &quot;/home/xxx/myfolder/&quot;+topicName;  outfile.open(pathTo.c_str(), std::ios_base::app);  That added it to the specific directory with the specific name assigned by the user.  Thanks!"}, {"owner": {"reputation": 510, "user_id": 5306491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3c575640d48735c736d8661f1f49bf?s=128&d=identicon&r=PG", "display_name": "CAF", "link": "https://stackoverflow.com/users/5306491/caf"}, "edited": false, "score": 0, "creation_date": 1571853034, "post_id": 58525652, "comment_id": 103381037, "body": "Please remove the &quot;.c_str()&quot;. std:ofstream accepts a std::string as file name paramerer. If you are using C++17 you could use std::filesystem::path for the file name, which also solves your directory problem."}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1571848930, "post_id": 58527505, "comment_id": 103379302, "body": "That was me.. :)"}], "tags": [], "owner": {"reputation": 1, "user_id": 11230899, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FhuJNej7HkA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKyRK3f_Yx-Nj3oo61xCEVQE-H4A/mo/photo.jpg?sz=128", "display_name": "Seanny", "link": "https://stackoverflow.com/users/11230899/seanny"}, "is_accepted": false, "score": 0, "last_activity_date": 1571848893, "creation_date": 1571848893, "answer_id": 58527505, "question_id": 58525652, "link": "https://stackoverflow.com/questions/58525652/writing-a-user-named-file-to-a-specific-directory/58527505#58527505", "title": "Writing A User-Named File to a specific directory", "body": "<p>I figured out after what Konrad mentioned.</p>\n\n<pre><code>std::string pathTo = \"/home/xxx/myfolder/\"+topicName;\noutfile.open(pathTo.c_str(), std::ios_base:app);\n</code></pre>\n\n<p>I had to created another string and concatenate the full path name and used that string instead in the ostream.\nThat worked fine.</p>\n"}], "owner": {"reputation": 1, "user_id": 11230899, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FhuJNej7HkA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcKyRK3f_Yx-Nj3oo61xCEVQE-H4A/mo/photo.jpg?sz=128", "display_name": "Seanny", "link": "https://stackoverflow.com/users/11230899/seanny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571848893, "creation_date": 1571842409, "last_edit_date": 1571842633, "question_id": 58525652, "link": "https://stackoverflow.com/questions/58525652/writing-a-user-named-file-to-a-specific-directory", "title": "Writing A User-Named File to a specific directory", "body": "<p>I'm trying to write a file to a specific directory.  And the name of the file is an input from the user.  I have figured out how to get the name and insert it into as the filename, but I don't know how to save it to a specific directory.</p>\n\n<pre><code>std::cout &lt;&lt; \"Enter topic name: \";\nstd::string topicName;\nstd::getline(std::cin, topicName);\n\nstd::ofstream outfile;\noutfile.open(topicName.c_str(), std::ios_base::app);\n</code></pre>\n\n<p>This code works,but it saves the file to the current directory.</p>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["c++", "turbo-c++"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1571841656, "post_id": 58525339, "comment_id": 103375568, "body": "One way is to go to end of file (zero offset of end) and check how far that is in the file. <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/seekg\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_istream/seekg</a> <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/tellg\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_ostream/tellg</a>"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 3, "creation_date": 1571842272, "post_id": 58525339, "comment_id": 103375881, "body": "Before working on this project start a petition and have every student sign it that says you don&#39;t want to use Turbo C++."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1571842353, "post_id": 58525339, "comment_id": 103375931, "body": "As for clearing a file, open for write, without ios::app"}, {"owner": {"reputation": 1, "user_id": 12179313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PGP8BMl5x_A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc_z6EclymmQIBlUaM8gipDo-QNrw/photo.jpg?sz=128", "display_name": "Nilay G", "link": "https://stackoverflow.com/users/12179313/nilay-g"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1571842910, "post_id": 58525339, "comment_id": 103376261, "body": "@Jeffrey doesn&#39;t work, that&#39;s why I&#39;m asking here"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1571846534, "post_id": 58525339, "comment_id": 103378143, "body": "A data file contains data if the data file is not empty.  Removing (deleting) the file will clear all the data inside it (so will formatting your hard drive)."}], "answers": [{"tags": [], "owner": {"reputation": 585, "user_id": 3694234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcdeb6b9b40f14bb4e515b06e485d16?s=128&d=identicon&r=PG&f=1", "display_name": "Yasir Khan", "link": "https://stackoverflow.com/users/3694234/yasir-khan"}, "is_accepted": false, "score": 1, "last_activity_date": 1571844131, "creation_date": 1571844131, "answer_id": 58526225, "question_id": 58525339, "link": "https://stackoverflow.com/questions/58525339/is-there-a-function-to-check-for-data-in-a-datafile/58526225#58526225", "title": "Is there a function to check for data in a datafile", "body": "<p>On Linux with GCC compiler, it can be done as below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;string&gt;\n#include &lt;unistd.h&gt;\n\nsize_t getFileSize(const std::string &amp;filename) {\n    struct stat s;\n\n    if(stat(filename.c_str(), &amp;s) != 0) {\n        return 0;\n    }\n\n    return s.st_size;   \n}\n\nvoid clearFile(const std::string &amp;filename)\n{\n    truncate(filename.c_str(), 0);\n}\n\nint main(int argc, char **argv)\n{\n    std::cout &lt;&lt; \"File size: \" &lt;&lt; getFileSize(\"../test.dat\") &lt;&lt; std::endl;\n\n    clearFile(\"../test.dat\");\n\n    std::cout &lt;&lt; \"File size: \" &lt;&lt; getFileSize(\"../test.dat\") &lt;&lt; std::endl;\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1571854222, "creation_date": 1571854222, "answer_id": 58528740, "question_id": 58525339, "link": "https://stackoverflow.com/questions/58525339/is-there-a-function-to-check-for-data-in-a-datafile/58528740#58528740", "title": "Is there a function to check for data in a datafile", "body": "<p>The most primitive: You could try opening the file for read and try to read some bytes. </p>\n\n<p>If you can't open the file then it does not exist. </p>\n\n<p>If you get no bytes then the file is empty?</p>\n\n<p>Of course the file could just be set with permissions that mean you can't open it, or you can't red it.</p>\n"}], "owner": {"reputation": 1, "user_id": 12179313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PGP8BMl5x_A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc_z6EclymmQIBlUaM8gipDo-QNrw/photo.jpg?sz=128", "display_name": "Nilay G", "link": "https://stackoverflow.com/users/12179313/nilay-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1571862207, "answer_count": 2, "score": 0, "last_activity_date": 1571854222, "creation_date": 1571841498, "question_id": 58525339, "link": "https://stackoverflow.com/questions/58525339/is-there-a-function-to-check-for-data-in-a-datafile", "closed_reason": "Needs more focus", "title": "Is there a function to check for data in a datafile", "body": "<p>We have a school project using turbo C++. So please don't hate</p>\n\n<p>Simple doubt:\nHow to check if there is any data stored in a datafile(of extension .dat) is there a function I can use and how? </p>\n\n<p>And also how to clear a datafile of all data in it. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1571845236, "post_id": 58525293, "comment_id": 103377486, "body": "You should be using the <code>ispunct</code> function instead of creating your own string.  Then when you have that, you use search / replace functions, using the <code>ispunct</code> as an indicator as to whether the current character is a punctuation or not."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12261718, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KQZCiSMh02s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdpOm1jGLafljUTjmYNPWWdBQZIjw/photo.jpg?sz=128", "display_name": "oksana vovl", "link": "https://stackoverflow.com/users/12261718/oksana-vovl"}, "edited": false, "score": 0, "creation_date": 1571844044, "post_id": 58525397, "comment_id": 103376865, "body": "Did not help((  I added - #define _CRT_SECURE_NO_WARNINGS #define __STDC_WANT_LIB_EXT1__1"}], "tags": [], "owner": {"reputation": 41, "user_id": 7418680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf0f74eec453d6004ad6b314fa7bc103?s=128&d=identicon&r=PG&f=1", "display_name": "Guenhwyvar", "link": "https://stackoverflow.com/users/7418680/guenhwyvar"}, "is_accepted": false, "score": 3, "last_activity_date": 1571871391, "last_edit_date": 1571871391, "creation_date": 1571841658, "answer_id": 58525397, "question_id": 58525293, "link": "https://stackoverflow.com/questions/58525293/function-which-takes-a-string-as-input-and-splits-it-into-words-punctuation-cha/58525397#58525397", "title": "function which takes a string as input and splits it into words. Punctuation characters should be ignored", "body": "<p>You can define <code>_CRT_SECURE_NO_WARNINGS</code> at the top of your file as follows.</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n</code></pre>\n\n<p>Or instead of <code>strtok</code>, try to use <code>strtok_s</code> and take a look at <a href=\"https://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\">this cppreference link</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 0, "last_activity_date": 1571898792, "last_edit_date": 1571898792, "creation_date": 1571842392, "answer_id": 58525640, "question_id": 58525293, "link": "https://stackoverflow.com/questions/58525293/function-which-takes-a-string-as-input-and-splits-it-into-words-punctuation-cha/58525640#58525640", "title": "function which takes a string as input and splits it into words. Punctuation characters should be ignored", "body": "<p>I would prefer regex-based tokenizing from C++11 over C functions <code>strtok</code> or <code>strtok_s</code>:</p>\n\n<pre><code>void split(const std::string&amp; s)\n{\n   std::regex rgx(\"[~`!@#$%^&amp;*()-_+=,./?;:']+\");\n   std::sregex_token_iterator iter(s.begin(), s.end(), rgx, -1);\n   std::sregex_token_iterator end;\n   for ( ; iter != end; ++iter)\n      std::cout &lt;&lt; *iter &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>IMO, it's much better since it works with <code>std::string</code> insted of char arrays (C strings).</p>\n\n<p>A simple use case:</p>\n\n<pre><code>std::string s(\"some`string?to+-be;:'tokenized\");\nsplit(s);\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/Cw7qRd3rBldShLsh\" rel=\"nofollow noreferrer\">Live demo here</a>.</p>\n\n<hr>\n\n<p>Note that this will create <code>std::string</code> objects for sub-matches, which may represent some overhead (though possibly reduced by short string optimization). This question discusses how to turn sub-matches into <code>std::string_view</code> objects: <a href=\"https://stackoverflow.com/q/50676058/580083\">Iterating regex submatches represented as std::basic_string_view\n</a>.</p>\n\n<p>A solution might in the form of rewriting the loop might look like:</p>\n\n<pre><code>for ( ; iter != end; ++iter)\n{\n   std::string_view sv(&amp;*iter-&gt;first, iter-&gt;length());\n   std::cout &lt;&lt; sv &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12261718, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KQZCiSMh02s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdpOm1jGLafljUTjmYNPWWdBQZIjw/photo.jpg?sz=128", "display_name": "oksana vovl", "link": "https://stackoverflow.com/users/12261718/oksana-vovl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571898792, "creation_date": 1571841370, "question_id": 58525293, "link": "https://stackoverflow.com/questions/58525293/function-which-takes-a-string-as-input-and-splits-it-into-words-punctuation-cha", "title": "function which takes a string as input and splits it into words. Punctuation characters should be ignored", "body": "<p>I wrote a feature but an error popped up. and I don't know how to solve it.\nAnd in general, am I properly moving in the implementation of the wind-up?</p>\n\n<pre><code>void Split(char* str) \n{\n    const char* punctuation = \"~`!@#$%^&amp;*()-_+=,./?;:'\";\n    char* ch = strtok(str, punctuation);\n\n    while (ch) \n    {              \n        std::cout &lt;&lt; ch &lt;&lt; '\\n';\n        ch = strtok(0, punctuation);\n    }\n}\n</code></pre>\n\n<p>Error - Severity    Code    Description Project File    Line    Suppression State\nError   C4996   'strtok': This function or variable may be unsafe. Consider using strtok_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.   </p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 4, "creation_date": 1571841295, "post_id": 58525219, "comment_id": 103375381, "body": "That&#39;s because <code>cnt++</code> increases <code>cnt</code> and returns the non-increased value whereas <code>cnt+1</code> doesn&#39;t increase <code>cnt</code> but returns a value <code>1</code> greater than <code>cnt</code>. They&#39;re completely different."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1571841331, "post_id": 58525219, "comment_id": 103375398, "body": "You get different output because you run different code. The two expressions are not at all equivalent. Furthermore, <code>rec(index+1,cnt++,temp)+rec(index+1,cnt,v)</code> exhibits undefined behavior, by way of having an access to and a modification of the same variable that are unsequenced."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1571842176, "last_edit_date": 1571842176, "creation_date": 1571841491, "answer_id": 58525337, "question_id": 58525219, "link": "https://stackoverflow.com/questions/58525219/getting-different-ans-if-i-pass-variable-and-variable1-in-a-recursive-questio/58525337#58525337", "title": "Getting different ans if i pass variable++ and variable+1 in a recursive question i.e Print all possible combinations of r elements in a given array", "body": "<p>Order of evaluation is <strike>unspecified</strike> unsequenced for:</p>\n\n<pre><code>rec(index + 1, cnt++, temp) + rec(index + 1, cnt, v);\n</code></pre>\n\n<ul>\n<li><code>cnt++</code> [A]</li>\n<li><code>rec(index + 1, cnt, temp)</code> [B]</li>\n<li><code>rec(index + 1, cnt, v)</code> [C]</li>\n</ul>\n\n<p>[A] should happen before [B].</p>\n\n<p>And:</p>\n\n<blockquote>\n  <p>If a side effect on a scalar object is unsequenced relative to a value computation using the value of the same scalar object, the behavior is undefined.</p>\n</blockquote>\n\n<p>You read [C] and write <code>cnt</code> [A] in unsequenced, you have UB.</p>\n"}, {"tags": [], "owner": {"reputation": 935, "user_id": 1459979, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/K2fhI.png?s=128&g=1", "display_name": "voxoid", "link": "https://stackoverflow.com/users/1459979/voxoid"}, "is_accepted": false, "score": 0, "last_activity_date": 1571841571, "creation_date": 1571841571, "answer_id": 58525368, "question_id": 58525219, "link": "https://stackoverflow.com/questions/58525219/getting-different-ans-if-i-pass-variable-and-variable1-in-a-recursive-questio/58525368#58525368", "title": "Getting different ans if i pass variable++ and variable+1 in a recursive question i.e Print all possible combinations of r elements in a given array", "body": "<p>Because <code>cnt++</code> is using the <em>postfix</em> increment operator, it will increment the local variable cnt <em>after</em> it is passed to the function rather than before. Try prefix operator <code>++cnt</code> instead. </p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 4931701, "user_type": "registered", "profile_image": "https://graph.facebook.com/841408249273575/picture?type=large", "display_name": "abdulrhmanOmran", "link": "https://stackoverflow.com/users/4931701/abdulrhmanomran"}, "is_accepted": false, "score": 1, "last_activity_date": 1571909104, "creation_date": 1571909104, "answer_id": 58538227, "question_id": 58525219, "link": "https://stackoverflow.com/questions/58525219/getting-different-ans-if-i-pass-variable-and-variable1-in-a-recursive-questio/58538227#58538227", "title": "Getting different ans if i pass variable++ and variable+1 in a recursive question i.e Print all possible combinations of r elements in a given array", "body": "<p>the reason is the same <a href=\"https://stackoverflow.com/questions/40677318/wsequence-point-warning-what-does-it-mean-and-does-it-violate-ansi-c-standard\">here</a></p>\n\n<p>see the warning : main.cpp:39:21: warning: operation on 'cnt' may be undefined [-Wsequence-point]</p>\n\n<p>consider your code as following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint arr[] = { 1,2,3,4,5 };\nint r = 3;\n\nstatic int callCounter = 0;\n\nint rec(int index, int cnt, vector&lt;int&gt; v)\n{\n    std::cout &lt;&lt; \"1+cnt = \"&lt;&lt; 1 + cnt &lt;&lt; endl;\n\n    if (cnt == r)//if required no is reach\n    {\n        cout &lt;&lt; \"IN \";\n        for (int i = 0; i &lt; v.size(); i++)\n        {\n            cout &lt;&lt; v[i] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n        return 1;\n    }\n    if (index &gt;= 5)//crossing the array\n    {\n        return 0;\n    }\n\n    int a;\n\n    vector&lt;int&gt; temp;\n    temp = v;\n    temp.push_back(arr[index]);\n\n    //int firstCall = rec(index + 1, cnt, v);\n    //int secondCall = rec(index + 1, ++cnt, temp);\n    //a = secondCall + firstCall;\n\n    `enter code here`a = rec(index + 1, ++cnt, temp) + rec(index + 1, cnt, v);\n     //a = rec(index + 1, 1+cnt, temp) + rec(index + 1, cnt, v);\n    ++callCounter;\n    std::cout &lt;&lt; \"callCounter \" &lt;&lt; callCounter &lt;&lt;endl;\n    return a;\n}\n\nint main()\n{\n    vector&lt;int&gt; v;\n    int cnt = 0;\n    int a = rec(0, cnt, v);\n    cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>the out put from GCC 9.2 is:</p>\n\n<blockquote>\n  <p>main.cpp: In function 'int rec(int, int, std::vector)':</p>\n</blockquote>\n\n<p>main.cpp:17:21: warning: comparison of integer expressions of different signedness: 'int' and 'std::vector::size_type' {aka 'long unsigned int'} [-Wsign-compare]</p>\n\n<p>17 |   for (int i = 0; i &lt; v.size(); i++)</p>\n\n<p>main.cpp:39:21: warning: operation on 'cnt' may be undefined [-Wsequence-point]</p>\n\n<p>39 |  a = rec(index + 1, ++cnt, temp) + rec(index + 1, cnt, v);</p>\n"}], "owner": {"reputation": 41, "user_id": 10513370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe728c8c32283e4dc5660528c586c98c?s=128&d=identicon&r=PG&f=1", "display_name": "Aastha", "link": "https://stackoverflow.com/users/10513370/aastha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1571909104, "creation_date": 1571841184, "question_id": 58525219, "link": "https://stackoverflow.com/questions/58525219/getting-different-ans-if-i-pass-variable-and-variable1-in-a-recursive-questio", "title": "Getting different ans if i pass variable++ and variable+1 in a recursive question i.e Print all possible combinations of r elements in a given array", "body": "<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n\nint arr[]={1,2,3,4,5};\nint r=3;\n\nint rec(int index,int cnt,vector&lt;int&gt; v)\n{\n    if(cnt==r)//if required no is reach\n    {\n        cout&lt;&lt;\"IN \";\n        for(int i=0;i&lt;v.size();i++)\n        {\n            cout&lt;&lt;v[i]&lt;&lt;\" \";\n        }\n        cout&lt;&lt;endl;\n        return 1;\n    }\n    if(index&gt;=5)//crossing the array\n    {\n        return 0;\n    }\n\n    int a;\n\n    vector&lt;int&gt; temp;\n    temp=v;\n    temp.push_back(arr[index]);\n\n    a=rec(index+1,cnt+1,temp)+rec(index+1,cnt,v);\n\n    return a;\n}\n\nint main()\n{\n    vector&lt;int&gt; v;\n    int cnt=0;\n    int a=rec(0,cnt,v);\n    cout&lt;&lt;\"a=\"&lt;&lt;a&lt;&lt;endl;\n    return 0;\n}\n\n```either select the element at the given index and increase the cnt or i dont select the element.In both cases I move forward.The total no of ways in which it can happen is stored in variable a.\n(1,2,3) is the same as (2,1,3) or(3,2,1)\nI am getting different outputs&lt;br&gt;\nCASE-1\n</code></pre>\n\n<p>a=rec(index+1,cnt++,temp)+rec(index+1,cnt,v);</p>\n\n<pre><code>OUTPUT\n</code></pre>\n\n<p>IN 1 2 3 \nIN 1 2 4 \nIN 1 2 5 \nIN 1 3 4 \nIN 1 3 5 \nIN 1 4 5 \nIN 2 3 4 \nIN 2 3 5 \nIN 2 4 5 \nIN 3 4 5 \na=10</p>\n\n<pre><code>CASE-2\n</code></pre>\n\n<p>a=rec(index+1,cnt+1,temp)+rec(index+1,cnt,v);</p>\n\n<pre><code>OUTPUT\n</code></pre>\n\n<p>IN 1 2 \nIN 1 3 \nIN 1 4 \nIN 1 \nIN 2 3 \nIN 2 4 \nIN 2 \nIN 3 4 \nIN 3 \nIN \na=10</p>\n\n<pre><code>\nI get different outputs for cnt++ and cnt+1 though both are the same\n\nWhy is this happening\n</code></pre>\n"}, {"tags": ["c++", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1571844437, "post_id": 58525103, "comment_id": 103377074, "body": "Additional note: <code>vf()</code> is virtual, so it is required to disambiguate what implementation of <code>vf()</code> ends up in the vtable of <code>D</code>. A directive like <code>using</code> that is not designed to impact the vtable cannot do the trick."}], "tags": [], "owner": {"reputation": 3652, "user_id": 1610530, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb145246cb9e317aa990ffa9bcf2f67c?s=128&d=identicon&r=PG", "display_name": "Moshe Gottlieb", "link": "https://stackoverflow.com/users/1610530/moshe-gottlieb"}, "is_accepted": false, "score": 2, "last_activity_date": 1571840771, "creation_date": 1571840771, "answer_id": 58525103, "question_id": 58524831, "link": "https://stackoverflow.com/questions/58524831/2-ways-of-resolving-ambigous-inheritance-of-virtual-method/58525103#58525103", "title": "2 ways of resolving ambigous inheritance of virtual method", "body": "<p><code>using</code> simply resolves which method you mean to call, in this case.<br>\n<code>D</code> still needs to be a complete object and must have a final overrider for <code>vf</code> regardless of resolve helpers.<br>\nIf <code>vf</code> was <strong>not</strong> implemented in the base class, then <code>using</code> would suffice, as the type is complete and all you need to do is resolve the correct call. </p>\n"}, {"comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1571842334, "post_id": 58525303, "comment_id": 103375915, "body": "Just as a note: I am not normally in the habit of using the phrase, &quot;I think&quot; in answers: in this case what I meant was that, <b><i>to my knowledge</i></b>, there is no way to avoid such an override. However, I would be very interested to see if any of the seriously decent <code>c++</code> coders on this forum can come up with a way to avoid it."}], "tags": [], "owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "is_accepted": true, "score": 3, "last_activity_date": 1571843454, "last_edit_date": 1571843454, "creation_date": 1571841388, "answer_id": 58525303, "question_id": 58524831, "link": "https://stackoverflow.com/questions/58524831/2-ways-of-resolving-ambigous-inheritance-of-virtual-method/58525303#58525303", "title": "2 ways of resolving ambigous inheritance of virtual method", "body": "<p>In your case, I think you <strong>have</strong> to give an explicit override to resolve the ambiguity! However, it would be an extremely trivial override:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct D : A, B {\n    // Uncomment the following line to resolve.\n    void vf() override { A::vf(); }\n};\n</code></pre>\n\n<p>This will just call the <code>A</code> base class whenever <code>D::vf()</code> is called! Thus, in accordance with your last sentence, there is no problem, as the <em>\"method code in one of the base class\"</em> is used (but you have to specify which base class).</p>\n"}], "owner": {"reputation": 1318, "user_id": 12091999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ig8DH.jpg?s=128&g=1", "display_name": "metablaster", "link": "https://stackoverflow.com/users/12091999/metablaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58525303, "answer_count": 2, "score": 4, "last_activity_date": 1571843454, "creation_date": 1571839893, "last_edit_date": 1571843410, "question_id": 58524831, "link": "https://stackoverflow.com/questions/58524831/2-ways-of-resolving-ambigous-inheritance-of-virtual-method", "title": "2 ways of resolving ambigous inheritance of virtual method", "body": "<p>Following code is from <a href=\"https://docs.microsoft.com/en-us/cpp/error-messages/compiler-errors-1/compiler-error-c2250?f1url=https%3A%2F%2Fmsdn.microsoft.com%2Fquery%2Fdev16.query%3FappId%3DDev16IDEF1%26l%3DEN-US%26k%3Dk(C2250)%26rd%3Dtrue%26f%3D255%26MSPPError%3D-2147217396&amp;view=vs-2019\" rel=\"nofollow noreferrer\">MSDN</a>, I copied the code here to avoid doing my own sample, basically I'm having this problem in my project.</p>\n\n<pre><code>struct V {\n   virtual void vf();\n};\n\nstruct A : virtual V {\n   void vf() override;\n};\n\nstruct B : virtual V {\n   void vf() override;\n};\n\nstruct D : A, B {\n   // Uncomment the following line to resolve.\n   // void vf() override;\n};\n</code></pre>\n\n<p>I took a look at this <a href=\"https://stackoverflow.com/questions/46912649/ambiguous-method-from-inheritance-when-using-a-crtp-pattern\">SO Question</a> where the suggestion is to use <code>using</code> directive to resolve ambiguous symbol.</p>\n\n<p>That suggestion doesn't work for this sample, instead to resolve the problem we should explicitly override base methods in derived class.</p>\n\n<p>I would like to avoid explicitly override in derived class, so the question is, why cant this be resolved with <code>using</code> directive as suggested in SO link above, instead of overriding? for example:</p>\n\n<pre><code>struct D : A, B {\n   using A::vf(); // not going to work\n};\n</code></pre>\n\n<p>The reason why to avoid explicit override is to make use of method code in one of the base classes.</p>\n"}, {"tags": ["c++", "c++17", "stringstream"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1571840570, "post_id": 58524805, "comment_id": 103374936, "body": "I can see it now, coming to C++23: <code>std::basic_string_view_stream</code> ;-)  Not sure if you can avoid copying.  Maybe Howard will know a trick."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1571840746, "post_id": 58524805, "comment_id": 103375045, "body": "The long-deprecated <a href=\"https://en.cppreference.com/w/cpp/io/strstream\" rel=\"nofollow noreferrer\"><code>std::strstream</code></a> can do that."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1571843294, "post_id": 58524805, "comment_id": 103376459, "body": "I mis-tagged this C++14 because that&#39;s what we&#39;re at in this project. I actually forgot we&#39;re using <code>boost::string_view</code>. The question is still valid, though."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 10, "last_activity_date": 1571841719, "last_edit_date": 1571841719, "creation_date": 1571841033, "answer_id": 58525170, "question_id": 58524805, "link": "https://stackoverflow.com/questions/58524805/is-there-a-way-to-create-a-stringstream-from-a-string-view-without-copying-data/58525170#58525170", "title": "Is there a way to create a stringstream from a string_view without copying data?", "body": "<p>You can do that easily with Boost.Iostreams library:</p>\n\n<pre><code>#include &lt;boost/iostreams/device/array.hpp&gt;\n#include &lt;boost/iostreams/stream.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main() {\n    std::string_view buf{\"hello\\n\"};\n    boost::iostreams::stream&lt;boost::iostreams::basic_array_source&lt;char&gt;&gt; stream(buf.begin(), buf.size());\n\n    std::string s;\n    stream &gt;&gt; s;\n    std::cout &lt;&lt; s &lt;&lt; '\\n';\n}\n</code></pre>\n\n<hr>\n\n<p>You should be able to do that with <code>std::stringstream</code> and <a href=\"https://en.cppreference.com/w/cpp/io/basic_stringbuf/setbuf\" rel=\"noreferrer\"><code>std::basic_stringbuf&lt;CharT,Traits,Allocator&gt;::setbuf</code></a> but the C++ standard botched its requirements: </p>\n\n<blockquote>\n  <p>The effect [of <code>setbuf</code>] is implementation-defined: some implementations do nothing, while some implementations clear the <code>std::string</code> member currently used as the buffer and begin using the user-supplied character array of size <code>n</code>, whose first element is pointed to by <code>s</code>, as the buffer and the input/output character sequence.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "is_accepted": false, "score": 0, "last_activity_date": 1583931868, "last_edit_date": 1583931868, "creation_date": 1583927097, "answer_id": 60635270, "question_id": 58524805, "link": "https://stackoverflow.com/questions/58524805/is-there-a-way-to-create-a-stringstream-from-a-string-view-without-copying-data/60635270#60635270", "title": "Is there a way to create a stringstream from a string_view without copying data?", "body": "<p>An alternative solution, without Boost.IOstream (when you can not use it). It is based on extending std::basic_streambuf and std::basic_istream.</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n#include &lt;istream&gt;\n#include &lt;string_view&gt;\n\ntemplate&lt;typename __char_type, class __traits_type &gt;\nclass view_streambuf final: public std::basic_streambuf&lt;__char_type, __traits_type &gt; {\nprivate:\n    typedef std::basic_streambuf&lt;__char_type, __traits_type &gt; super_type;\n    typedef view_streambuf&lt;__char_type, __traits_type&gt; self_type;\npublic:\n\n    /**\n    *  These are standard types.  They permit a standardized way of\n    *  referring to names of (or names dependent on) the template\n    *  parameters, which are specific to the implementation.\n    */\n    typedef typename super_type::char_type char_type;\n    typedef typename super_type::traits_type traits_type;\n    typedef typename traits_type::int_type int_type;\n    typedef typename traits_type::pos_type pos_type;\n    typedef typename traits_type::off_type off_type;\n\n    typedef typename std::basic_string_view&lt;char_type, traits_type&gt; source_view;\n\n    view_streambuf(const source_view&amp; src) noexcept:\n      super_type(),\n      src_( src )\n    {\n        char_type *buff = const_cast&lt;char_type*&gt;( src_.data() );\n        this-&gt;setg( buff , buff, buff + src_.length() );\n    }\n\n    virtual std::streamsize xsgetn(char_type* __s, std::streamsize __n) override\n    {\n        if(0 == __n)\n            return 0;\n        if( (this-&gt;gptr() + __n) &gt;= this-&gt;egptr() ) {\n            __n =  this-&gt;egptr() - this-&gt;gptr();\n            if(0 == __n &amp;&amp; !traits_type::not_eof( this-&gt;underflow() ) )\n                return -1;\n        }\n        std::memmove( static_cast&lt;void*&gt;(__s), this-&gt;gptr(), __n);\n        this-&gt;gbump( static_cast&lt;int&gt;(__n) );\n        return __n;\n    }\n\n    virtual int_type pbackfail(int_type __c) override\n    {\n        char_type *pos = this-&gt;gptr() - 1;\n        *pos = traits_type::to_char_type( __c );\n        this-&gt;pbump(-1);\n        return 1;\n    }\n\n    virtual int_type underflow() override\n    {\n        return traits_type::eof();\n    }\n\n    virtual std::streamsize showmanyc() override\n    {\n        return static_cast&lt;std::streamsize&gt;( this-&gt;egptr() - this-&gt;gptr() );\n    }\n\n    virtual ~view_streambuf() override\n    {}\nprivate:\n    const source_view&amp; src_;\n};\n\ntemplate&lt;typename _char_type&gt;\nclass view_istream final:public std::basic_istream&lt;_char_type, std::char_traits&lt;_char_type&gt; &gt; {\n    view_istream(const view_istream&amp;) = delete;\n    view_istream&amp; operator=(const view_istream&amp;) = delete;\nprivate:\n    typedef std::basic_istream&lt;_char_type, std::char_traits&lt;_char_type&gt; &gt; super_type;\n    typedef view_streambuf&lt;_char_type, std::char_traits&lt;_char_type&gt; &gt; streambuf_type;\npublic:\n    typedef _char_type  char_type;\n    typedef typename super_type::int_type int_type;\n    typedef typename super_type::pos_type pos_type;\n    typedef typename super_type::off_type off_type;\n    typedef typename super_type::traits_type traits_type;\n    typedef typename streambuf_type::source_view source_view;\n\n    view_istream(const source_view&amp; src):\n        super_type( nullptr ),\n        sb_(nullptr)\n    {\n        sb_ = new streambuf_type(src);\n        this-&gt;init( sb_ );\n    }\n\n\n    view_istream(view_istream&amp;&amp; other) noexcept:\n        super_type( std::forward&lt;view_istream&gt;(other) ),\n        sb_( std::move( other.sb_ ) )\n    {}\n\n    view_istream&amp; operator=(view_istream&amp;&amp; rhs) noexcept\n    {\n        view_istream( std::forward&lt;view_istream&gt;(rhs) ).swap( *this );\n        return *this;\n    }\n\n    virtual ~view_istream() override {\n        delete sb_;\n    }\n\nprivate:\n    streambuf_type *sb_;\n};\n\n\nint main(int argc, const char** argv)\n{\n    std::string_view v(\"ABDCD\\n 123\\n FAG\\n 456789\");\n\n    view_istream&lt;char&gt; in( v );\n\n    std::string s;\n    in &gt;&gt; s;\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n\n    int i;\n    in &gt;&gt; i;\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n\n    in &gt;&gt; s;\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n\n    in &gt;&gt; i;\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 1, "accepted_answer_id": 58525170, "answer_count": 2, "score": 15, "last_activity_date": 1583931868, "creation_date": 1571839838, "last_edit_date": 1571842402, "question_id": 58524805, "link": "https://stackoverflow.com/questions/58524805/is-there-a-way-to-create-a-stringstream-from-a-string-view-without-copying-data", "title": "Is there a way to create a stringstream from a string_view without copying data?", "body": "<p>I think that's a pretty straighforward question. I'd specifically like to use <code>std::get_time</code>, but it requires some sort of a stream to be used with. I am passing the data in a <code>string_view</code> and would like to avoid copying it just to parse the date.</p>\n"}, {"tags": ["c++", "cmake", "clang", "macos-catalina"], "comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1571840202, "post_id": 58524715, "comment_id": 103374715, "body": "Did you run <code>xcode-select --install</code> in the terminal after the update? That often fixes such problems."}, {"owner": {"reputation": 218, "user_id": 2935386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdcd200e0a26a1b230b1dbe77fececf?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/2935386/harry"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1571840279, "post_id": 58524715, "comment_id": 103374761, "body": "Yes, I did run it. That was sadly one of my failed attempts to solve the problem"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1571840564, "post_id": 58524715, "comment_id": 103374928, "body": "<code>TBB: NOT using libc++</code> suggests it is trying to use <code>libstdc++</code> which is no longer available with XCode"}, {"owner": {"reputation": 218, "user_id": 2935386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdcd200e0a26a1b230b1dbe77fececf?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/2935386/harry"}, "edited": false, "score": 0, "creation_date": 1571840775, "post_id": 58524715, "comment_id": 103375066, "body": "Oh, that is a good catch! Do you think, if I install an older version of Xcode (one which supports <code>libstdc++</code>) it may solve my issue? And is it even possible to install an older version of Xcode on MacOS Catalina?"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1571843934, "post_id": 58524715, "comment_id": 103376807, "body": "It is hard to tell which of these submodules it causing the problem exactly, each of them is testing against the compiler flags and some of them are changing the compiler flags directly. That TBB and glfw don&#39;t compile might be caused by another submodule, because moving the <code>add_subdirectory</code> (and the corrsponding instructions around them) for <code>tbb</code> and <code>nanoui</code> to the top of <code>ext&#47;CMakeLists.txt</code> makes those errors vanish, but it still fails."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1571844591, "post_id": 58524715, "comment_id": 103377155, "body": "You might have success to get it running if you compile each submodule in <code>ext</code> manually, and install it in e.g. <code>&#47;opt&#47;nori</code> and then change the CMakeFile of nori to link against those installed libraries.  Or maybe check if you could check if there is a newer version of those submodules available that resolves the problem."}, {"owner": {"reputation": 218, "user_id": 2935386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdcd200e0a26a1b230b1dbe77fececf?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/2935386/harry"}, "edited": false, "score": 0, "creation_date": 1571857315, "post_id": 58524715, "comment_id": 103382868, "body": "Thanks! That&#39;s truly a good suggestion. I will try this probably the next days, as tomorrow I am meeting my professor to discuss the overall status of the project and still has to prepare some documents.  I will update the topic, if your suggestion worked though. I am rather thinking of compiling each module in <code>ext</code> separately and linking them against nori."}, {"owner": {"reputation": 218, "user_id": 2935386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdcd200e0a26a1b230b1dbe77fececf?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/2935386/harry"}, "edited": false, "score": 0, "creation_date": 1572043036, "post_id": 58524715, "comment_id": 103451307, "body": "Currently, I have deserted this approach and found it more convenient to use my corporate computer running Windows with WSL, as I have plenty of work to do on the project and this issue cost me more than a day..."}], "owner": {"reputation": 218, "user_id": 2935386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdcd200e0a26a1b230b1dbe77fececf?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/2935386/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1700, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1575921208, "creation_date": 1571839593, "last_edit_date": 1575921208, "question_id": 58524715, "link": "https://stackoverflow.com/questions/58524715/failing-to-compile-a-c-application-under-macos-catalina-10-15", "title": "Failing to compile a c++ application under MacOS Catalina 10.15", "body": "<p><strong>Note:</strong> For how I solved the problem, please look at the end of the post.</p>\n\n<p>Yesterday, I have updated to MacOS Catalina 10.15 and since then I am trying to compile <a href=\"https://github.com/harrytodorov/nori\" rel=\"nofollow noreferrer\">this</a> c++ application (a fork of the <a href=\"https://github.com/wjakob/nori\" rel=\"nofollow noreferrer\">nori</a> educational ray tracer), but for some reason CMake fails to find the <strong>pthread</strong> library. Here is the output after running CMake:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ cmake ..\n-- The C compiler identification is AppleClang 11.0.0.11000033\n-- The CXX compiler identification is AppleClang 11.0.0.11000033\n-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc\n-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++\n-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Setting build type to 'Release' as none was specified.\n-- Performing Test HAS_CPP14_FLAG\n-- Performing Test HAS_CPP14_FLAG - Success\n-- Performing Test HAS_CPP11_FLAG\n-- Performing Test HAS_CPP11_FLAG - Success\n-- Found ZLIB: /usr/lib/libz.dylib (found version \"1.2.11\")\n-- Performing Test HAVE_GCC_INLINE_ASM_AVX\n-- Performing Test HAVE_GCC_INLINE_ASM_AVX - Failed\n-- Performing Test HAVE_SYSCONF_NPROCESSORS_ONLN\n-- Performing Test HAVE_SYSCONF_NPROCESSORS_ONLN - Failed\n-- TBB: NOT using libc++.\n-- Looking for pthread.h\n-- Looking for pthread.h - not found\nCMake Error at /Applications/CMake.app/Contents/share/cmake-3.15/Modules/FindPackageHandleStandardArgs.cmake:137 (message):\n  Could NOT find Threads (missing: Threads_FOUND)\nCall Stack (most recent call first):\n  /Applications/CMake.app/Contents/share/cmake-3.15/Modules/FindPackageHandleStandardArgs.cmake:378 (_FPHSA_FAILURE_MESSAGE)\n  /Applications/CMake.app/Contents/share/cmake-3.15/Modules/FindThreads.cmake:220 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)\n  ext/nanogui/ext/glfw/CMakeLists.txt:60 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"/Users/harry/dev/nori/build/CMakeFiles/CMakeOutput.log\".\nSee also \"/Users/harry/dev/nori/build/CMakeFiles/CMakeError.log\".\n</code></pre>\n\n<p>And following is the <code>CMakeError.log</code>:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>Performing C++ SOURCE FILE Test HAVE_GCC_INLINE_ASM_AVX failed with the following output:\nChange Dir: /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/usr/bin/make cmTC_1e411/fast &amp;&amp; /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_1e411.dir/build.make CMakeFiles/cmTC_1e411.dir/build\nBuilding CXX object CMakeFiles/cmTC_1e411.dir/src.cxx.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++    -std=c++14 -fvisibility=hidden -Wno-switch -Wno-tautological-compare -Wno-deprecated-register -DHAVE_GCC_INLINE_ASM_AVX -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk -mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk   -o CMakeFiles/cmTC_1e411.dir/src.cxx.o -c /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp/src.cxx\nclang: error: invalid version number in '-mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk'\nclang: warning: using sysroot for 'DriverKit' but targeting 'MacOSX' [-Wincompatible-sysroot]\nmake[1]: *** [CMakeFiles/cmTC_1e411.dir/src.cxx.o] Error 1\nmake: *** [cmTC_1e411/fast] Error 2\n\n\nSource file was:\n\n    int main()\n    {\n     #if defined(__GNUC__) &amp;&amp; defined(__SSE2__)\n         int n   = 0;\n         int eax = 0;\n         int edx = 0;\n         __asm__(\n             \"xgetbv     ;\"\n             \"vzeroupper  \"\n             : \"=a\"(eax), \"=d\"(edx) : \"c\"(n) : );\n     #else\n         #error No GCC style inline asm supported for AVX instructions\n     #endif\n    }\n\nPerforming C++ SOURCE FILE Test HAVE_SYSCONF_NPROCESSORS_ONLN failed with the following output:\nChange Dir: /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/usr/bin/make cmTC_db06f/fast &amp;&amp; /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_db06f.dir/build.make CMakeFiles/cmTC_db06f.dir/build\nBuilding CXX object CMakeFiles/cmTC_db06f.dir/src.cxx.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++    -std=c++14 -fvisibility=hidden -Wno-switch -Wno-tautological-compare -Wno-deprecated-register -DHAVE_SYSCONF_NPROCESSORS_ONLN -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk -mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk   -o CMakeFiles/cmTC_db06f.dir/src.cxx.o -c /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp/src.cxx\nclang: error: invalid version number in '-mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk'\nclang: warning: using sysroot for 'DriverKit' but targeting 'MacOSX' [-Wincompatible-sysroot]\nmake[1]: *** [CMakeFiles/cmTC_db06f.dir/src.cxx.o] Error 1\nmake: *** [cmTC_db06f/fast] Error 2\n\n\nSource file was:\n\n    #include &lt;unistd.h&gt;\n    int main()\n    {\n        sysconf(_SC_NPROCESSORS_ONLN);\n    }\n\nPerforming C++ SOURCE FILE Test HAS_LIBCPP failed with the following output:\nChange Dir: /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/usr/bin/make cmTC_4098b/fast &amp;&amp; /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_4098b.dir/build.make CMakeFiles/cmTC_4098b.dir/build\nBuilding CXX object CMakeFiles/cmTC_4098b.dir/src.cxx.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++    -std=c++14 -fvisibility=hidden -DHAS_LIBCPP -stdlib=libc++ -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk -mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk   -o CMakeFiles/cmTC_4098b.dir/src.cxx.o -c /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp/src.cxx\nclang: error: invalid version number in '-mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk'\nclang: warning: using sysroot for 'DriverKit' but targeting 'MacOSX' [-Wincompatible-sysroot]\nclang: error: invalid deployment target for -stdlib=libc++ (requires OS X 10.7 or later)\nmake[1]: *** [CMakeFiles/cmTC_4098b.dir/src.cxx.o] Error 1\nmake: *** [cmTC_4098b/fast] Error 2\n\n\n...and run output:\n\nReturn value: 1\nSource file was:\n#include &lt;iostream&gt;\nint main(int argc, char **argv) { std::cout &lt;&lt; \"test\"; return 0; }\nPerforming C++ SOURCE FILE Test SUPPORTS_STDCXX11 failed with the following output:\nChange Dir: /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/usr/bin/make cmTC_74f47/fast &amp;&amp; /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_74f47.dir/build.make CMakeFiles/cmTC_74f47.dir/build\nBuilding CXX object CMakeFiles/cmTC_74f47.dir/src.cxx.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++    -std=c++14 -fvisibility=hidden -DSUPPORTS_STDCXX11 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk -mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk   -std=c++11 -o CMakeFiles/cmTC_74f47.dir/src.cxx.o -c /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp/src.cxx\nclang: error: invalid version number in '-mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk'\nclang: warning: using sysroot for 'DriverKit' but targeting 'MacOSX' [-Wincompatible-sysroot]\nmake[1]: *** [CMakeFiles/cmTC_74f47.dir/src.cxx.o] Error 1\nmake: *** [cmTC_74f47/fast] Error 2\n\n\nSource file was:\nint main() { return 0; }\nPerforming C++ SOURCE FILE Test SUPPORTS_MRTM failed with the following output:\nChange Dir: /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/usr/bin/make cmTC_60b35/fast &amp;&amp; /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_60b35.dir/build.make CMakeFiles/cmTC_60b35.dir/build\nBuilding CXX object CMakeFiles/cmTC_60b35.dir/src.cxx.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++    -std=c++14 -fvisibility=hidden -DSUPPORTS_MRTM -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk -mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk   -mrtm -Werror -o CMakeFiles/cmTC_60b35.dir/src.cxx.o -c /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp/src.cxx\nclang: error: invalid version number in '-mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk'\nclang: error: using sysroot for 'DriverKit' but targeting 'MacOSX' [-Werror,-Wincompatible-sysroot]\nmake[1]: *** [CMakeFiles/cmTC_60b35.dir/src.cxx.o] Error 1\nmake: *** [cmTC_60b35/fast] Error 2\n\n\nSource file was:\nint main() { return 0; }\nDetermining if the include file pthread.h exists failed with the following output:\nChange Dir: /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp\n\nRun Build Command(s):/usr/bin/make cmTC_b4d5d/fast &amp;&amp; /Applications/Xcode.app/Contents/Developer/usr/bin/make -f CMakeFiles/cmTC_b4d5d.dir/build.make CMakeFiles/cmTC_b4d5d.dir/build\nBuilding C object CMakeFiles/cmTC_b4d5d.dir/CheckIncludeFile.c.o\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc   -Wno-deprecated-declarations  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk -mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk   -o CMakeFiles/cmTC_b4d5d.dir/CheckIncludeFile.c.o   -c /Users/harry/dev/nori/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c\nclang: error: invalid version number in '-mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk'\nclang: warning: using sysroot for 'DriverKit' but targeting 'MacOSX' [-Wincompatible-sysroot]\nmake[1]: *** [CMakeFiles/cmTC_b4d5d.dir/CheckIncludeFile.c.o] Error 1\nmake: *** [cmTC_b4d5d/fast] Error 2\n</code></pre>\n\n<p>The nori ray tracer expects XCode along with the command line tools installed on a MacOS machine. I have Xcode version 11.1 and the corresponding command line tools.</p>\n\n<p>As far as I can see from the <code>CMakeError.log</code> file, clang produces an error, because of an invalid version number of <strong>mmacosx-version-min</strong>. </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>clang: error: invalid version number in '-mmacosx-version-min=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/DriverKit19.0.sdk'\n</code></pre>\n\n<p>I have researched a while trying to find clues on the topic, but failed to find something that solves my problem. The version of clang I have, is the one installed with Xcode: <code>Apple clang version 11.0.0</code>.</p>\n\n<p>I am open to hear any suggestion and provide any additional information on my configuration you may find useful to pinpoint the issue.</p>\n\n<hr>\n\n<p><em>P.S.</em>: I forgot to mention, that back when I first started working on this project, I had a similar issue on MacOS Mojave <a href=\"https://github.com/wjakob/nori/issues/16\" rel=\"nofollow noreferrer\">here</a>. And I was able to fix it by installing the SDK headers as noted in <a href=\"https://github.com/neovim/neovim/issues/9050#issuecomment-424417456\" rel=\"nofollow noreferrer\">this post</a>:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg\n</code></pre>\n\n<p><strong><em>Working solution:</em></strong> Installing an older version of XCode (10.2.1 works well for me) and redirecting to it (making it the active developer directory with <code>xcode-select -s [path-to-old-xcode]</code>) turns out to solve my problem. The solution was proposed by Aaron19960821 from GitHub. See <a href=\"https://github.com/wjakob/nori/issues/16\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}, {"tags": ["c++", "intel", "openvino"], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 10389355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/180Xd.jpg?s=128&g=1", "display_name": "Rahila T - Intel", "link": "https://stackoverflow.com/users/10389355/rahila-t-intel"}, "is_accepted": true, "score": 2, "last_activity_date": 1571842965, "creation_date": 1571842965, "answer_id": 58525831, "question_id": 58524693, "link": "https://stackoverflow.com/questions/58524693/how-to-run-the-cpp-samples-in-openvino/58525831#58525831", "title": "How to run the cpp samples in openvino", "body": "<p>To build the sample applications , run the build_samples_msvc.bat batch file:</p>\n\n<blockquote>\n  <p>&lt; INSTALL_DIR >\\inference_engine\\samples\\build_samples_msvc.bat</p>\n</blockquote>\n\n<p>Open terminal</p>\n\n<pre><code> cd C:\\Program Files (x86)\\IntelSWTools\\openvino_2019.2.242\\inference_engine\\samples\n build_samples_msvc.bat\n</code></pre>\n\n<p>The sample applications binaries are in the </p>\n\n<pre><code> C:\\Users\\&lt;username&gt;\\Documents\\Intel\\OpenVINO\\inference_engine_samples_build\\intel64\\Release\n</code></pre>\n\n<p>directory.</p>\n\n<hr>\n\n<p><strong><em>The below 3 steps are optional</em></strong></p>\n\n<pre><code> cd C:\\Users\\&lt;username&gt;\\Documents\\Intel\\OpenVINO\\inference_engine_samples_build\n\n select samples.sln\n\n Build -&gt; Build Solution\n</code></pre>\n\n<hr>\n\n<p>This will create the executable files at the below location</p>\n\n<pre><code> C:\\Users\\&lt;username&gt;\\Documents\\Intel\\OpenVINO\\inference_engine_samples_build\\intel64\\Release\n</code></pre>\n\n<p>To run </p>\n\n<p>(for eg: classification_sample_async)</p>\n\n<pre><code> cd C:\\Users\\&lt;username&gt;\\Documents\\Intel\\OpenVINO\\inference_engine_samples_build\\intel64\\Release\n\n classification_sample_async.exe -m C:\\Users\\&lt;username&gt;\\Documents\\Intel\\OpenVINO\\openvino_models\\ir\\FP32\\classification\\squeezenet\\1.1\\caffe\\squeezenet1.1.xml -i \"C:\\Program Files (x86)\\IntelSWTools\\openvino_2019.1.122\\deployment_tools\\demo\\car.png\" -labels &lt;PATH_TO_LABEL_FILE&gt;\\squeezenet1.1.labels -d CPU\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 11708950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd386e6d4d4a5b235238aca57c2879fb?s=128&d=identicon&r=PG&f=1", "display_name": "Remi_TRish", "link": "https://stackoverflow.com/users/11708950/remi-trish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 58525831, "answer_count": 1, "score": 1, "last_activity_date": 1571842965, "creation_date": 1571839531, "question_id": 58524693, "link": "https://stackoverflow.com/questions/58524693/how-to-run-the-cpp-samples-in-openvino", "title": "How to run the cpp samples in openvino", "body": "<p>I am using openvino_2019.2.242 and trying to run the cpp samples in the same. Please guide me with the complete steps to build the sample applications. As an example can you provide the command to run classification sample async . Thanks in advance.</p>\n"}, {"tags": ["c++", "xcode", "macos"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1571840683, "post_id": 58524594, "comment_id": 103375005, "body": "have you tried a clean build? might be a cmake cache around with the wrong path in it"}, {"owner": {"reputation": 658, "user_id": 1619265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/IQvl9.jpg?s=128&g=1", "display_name": "Robert Sj&#246;dahl", "link": "https://stackoverflow.com/users/1619265/robert-sj%c3%b6dahl"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1571842602, "post_id": 58524594, "comment_id": 103376084, "body": "Yes, I definitely tried a clean build. Deleted the whole build directory and started form a clean build."}], "answers": [{"comments": [{"owner": {"reputation": 658, "user_id": 1619265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/IQvl9.jpg?s=128&g=1", "display_name": "Robert Sj&#246;dahl", "link": "https://stackoverflow.com/users/1619265/robert-sj%c3%b6dahl"}, "edited": false, "score": 0, "creation_date": 1571840400, "post_id": 58524826, "comment_id": 103374824, "body": "Maybe I can downgrade XCode then? Should it be downgraded to the last 10.x version of XCode?"}], "tags": [], "owner": {"reputation": 2211, "user_id": 8258079, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0hGor17Y5EI/AAAAAAAAAAI/AAAAAAAAAMM/imoWXkV2oCM/photo.jpg?sz=128", "display_name": "Richard Barber", "link": "https://stackoverflow.com/users/8258079/richard-barber"}, "is_accepted": false, "score": 1, "last_activity_date": 1571839882, "creation_date": 1571839882, "answer_id": 58524826, "question_id": 58524594, "link": "https://stackoverflow.com/questions/58524594/c-compliation-failing-after-upgrading-xcode-to-verison-11-1/58524826#58524826", "title": "C++ compliation failing after upgrading XCode to verison 11.1", "body": "<p>Yes, xcode 11 comes with the <em>Catalina</em> sdk.  Copy the old one over, or download it from <a href=\"https://github.com/phracker/MacOSX-SDKs/releases\" rel=\"nofollow noreferrer\">https://github.com/phracker/MacOSX-SDKs/releases</a></p>\n"}], "owner": {"reputation": 658, "user_id": 1619265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/IQvl9.jpg?s=128&g=1", "display_name": "Robert Sj&#246;dahl", "link": "https://stackoverflow.com/users/1619265/robert-sj%c3%b6dahl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571839882, "creation_date": 1571839154, "question_id": 58524594, "link": "https://stackoverflow.com/questions/58524594/c-compliation-failing-after-upgrading-xcode-to-verison-11-1", "title": "C++ compliation failing after upgrading XCode to verison 11.1", "body": "<p>I'm running MacOS 10.14 still but I did upgrade XCode recently so that I'm running XCode 11.1. I have a C++ project that uses CppRestSDK for HTTP and REST. Now when building my project with CMake it fails with the error:</p>\n\n<pre><code>make[2]: *** No rule to make target `/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/System/Library/Frameworks/CoreFoundation.framework', needed by `&lt;retracted&gt;'.  Stop.\nmake[2]: *** Waiting for unfinished jobs....\n</code></pre>\n\n<p>If I look under: <code>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/</code></p>\n\n<p>I only have MacOSX10.15.sdk there and not 10.14 anymore?</p>\n\n<p>I do have this:\n<code>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk/System/Library/Frameworks/CoreFoundation.framework</code></p>\n\n<p>I do not want to update MacOS to 10.15 Catalina right now.</p>\n"}, {"tags": ["c++", "tree"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1571839769, "post_id": 58524528, "comment_id": 103374435, "body": "&quot;<i>i couldnt get the answer</i>&quot; - You might need to run your code in a debugger or add some debug prints that lets your follow what your program does to find out where it starts misbehaving."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1571840480, "post_id": 58524528, "comment_id": 103374875, "body": "<i>&quot;You can write this using any technique you want, but we recommend using recursion and writing a helper function.&quot;</i> I wrote it with a loop and the test passed. Maybe you will find it simpler. What did you try so far?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12263506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d73e11223319e96d0cb0c91533a03b73?s=128&d=identicon&r=PG&f=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/12263506/ron"}, "edited": false, "score": 0, "creation_date": 1572140728, "post_id": 58525019, "comment_id": 103467907, "body": "Okay I see how that works. I was trying to return a tree in my base case instead of a single node. Thank you!"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 0, "last_activity_date": 1571840499, "creation_date": 1571840499, "answer_id": 58525019, "question_id": 58524528, "link": "https://stackoverflow.com/questions/58524528/c-function-to-populate-right-side-of-a-tree/58525019#58525019", "title": "C++ function to populate right side of a tree", "body": "<p>If you examine the tree, you will see that each subtree has <code>k</code> in the root, a leaf with <code>k+1</code> in the left node, and a right-full tree with <code>k+2</code> in its root in the right node.  </p>\n\n<p>Assume that you have the suggested helper function \u2013 let's call it \"fullHelper\" \u2013 that keeps track of the \"current value\" and produces a tree with that in its root:</p>\n\n<pre><code>// Produce a right-full tree with 'current' at the root, up until 'n'.\nTreeNode* fullHelper(int n, int current);\n</code></pre>\n\n<p>Then you can write</p>\n\n<pre><code>TreeNode* makeFullRight(int n)\n{\n    return fullHelper(n, 1);\n}\n</code></pre>\n\n<p>Now, \"all\" you need is to write the helper function.<br>\nYou need a base case and a recursive case:</p>\n\n<ul>\n<li>If <code>n == current</code>, create a single node with <code>n</code>,</li>\n<li>Otherwise, create a tree with <code>current</code> in the root, <code>current+1</code> in the left leaf, and a right-full tree rooted at <code>current+2</code> as its right subtree.</li>\n</ul>\n\n<p>Translated to C++:</p>\n\n<pre><code>TreeNode* fullHelper(int n, int current)\n{\n    return n == current\n         ? new TreeNode(current)\n         : new TreeNode(current, \n                        new TreeNode(current+1), \n                        fullHelper(n, current+2));\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12263506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d73e11223319e96d0cb0c91533a03b73?s=128&d=identicon&r=PG&f=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/12263506/ron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 58525019, "answer_count": 1, "score": -2, "last_activity_date": 1571840499, "creation_date": 1571838984, "question_id": 58524528, "link": "https://stackoverflow.com/questions/58524528/c-function-to-populate-right-side-of-a-tree", "title": "C++ function to populate right side of a tree", "body": "<p>The Problem\nWe have provided you a class TreeNode. The methods are declared in TreeNode.h, and there are implementations of most of them in TreeNode.cpp.</p>\n\n<p>Your work:\nImplement the function TreeNode *makeFullRight(int n) that builds a full tree with \nn\n nodes. The way you will build the tree is that the left child of each two-child node will be a leaf. The nodes should be numbered (by populating its data_ field) from 1 to \nn\n, according to the following rule: if a node had number \ni\n, then any left child would have number \ni\n+\n1\n and any right child would have number \ni\n+\n2\n.</p>\n\n<p>Put your code in TreeNode.cpp.</p>\n\n<p>As an example, makeFullRight(7) will produce the tree</p>\n\n<pre><code>    1\n   / \\\n  2   3\n     / \\\n    4   5\n       / \\\n      6   7\n</code></pre>\n\n<p>You should assume that your makeFullRight function will be given an odd number as input.</p>\n\n<p>You can write this using any technique you want, but we recommend using recursion and writing a helper function.</p>\n\n<p>Sample Run\nYour main.cpp will exercise your code.</p>\n\n<p>Ive tired to do it using recursion but i couldnt get the answer and now i am lost on how to the makeFullRight function</p>\n\n<p>TreeNode.cpp- File</p>\n\n<pre><code>#include \"TreeNode.h\"\n\n// Your function here\n\nTreeNode *makeFullRight(int n)\n{\n\n}\n\n// Methods and functions we provide following.\n// You should not need to edit this code.\n\nTreeNode::TreeNode(int data, TreeNode *left, TreeNode *right) :\n    data_(data), left_(left), right_(right) {}\n\nTreeNode::~TreeNode() {\n    if (left_ != NULL)\n        delete left_;\n    if (right_ != NULL)\n        delete right_;\n}\n\nbool equal(TreeNode *n1, TreeNode *n2) {\n    if (n1 == NULL)\n        return n2 == NULL;\n\n    if (n2==NULL)\n        return false;\n\n    return (n1-&gt;getData() == n2-&gt;getData() &amp;&amp;\n            equal(n1-&gt;getLeft(),n2-&gt;getLeft()) &amp;&amp;\n            equal(n1-&gt;getRight(),n2-&gt;getRight()));\n}\n\nint TreeNode::getData() const {\n    return data_;\n}\n\nTreeNode *TreeNode::getLeft() const {\n    return left_;\n}\n\nTreeNode *TreeNode::getRight() const {\n    return right_;\n}\n</code></pre>\n\n<p>TreeNode.h--- New File</p>\n\n<pre><code>#ifndef _TREENODE_H\n#define _TREENODE_H\n\n#include &lt;cstddef&gt;\n\nclass TreeNode {\n\n    public:\n        int data_;\n        TreeNode *left_;\n        TreeNode *right_;\n\n        TreeNode(int data=0, TreeNode *left=NULL, TreeNode *right=NULL);\n        ~TreeNode();\n        int findMax() const;\n\n        int getData() const;\n        TreeNode *getLeft() const;\n        TreeNode *getRight() const;\n\n};\n\n// Here is the signature of the code you will write\n\nTreeNode *makeFullRight(int n);\n\nbool equal(TreeNode *n1, TreeNode *n2);\n\n#endif\n</code></pre>\n\n<p>main.cpp ---New File</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"TreeNode.h\"\n\nusing namespace std;\n\nconst string RED_TEXT = \"\\033[1;31m\";\nconst string GREEN_TEXT = \"\\033[1;32m\";\nconst string RESET_TEXT = \"\\033[0m\";\n\nvoid print_pass(string message) {\n  cout&lt;&lt;GREEN_TEXT&lt;&lt;\"TEST PASSED\"&lt;&lt;RESET_TEXT&lt;&lt;\": \"&lt;&lt;message&lt;&lt;endl;\n}\n\nvoid print_fail(string message) {\n  cout&lt;&lt;RED_TEXT&lt;&lt;\"TEST FAILED\"&lt;&lt;RESET_TEXT&lt;&lt;\": \"&lt;&lt;message&lt;&lt;endl;\n  exit(1);\n}\n\nint main() {\n\n    TreeNode *example =\n        new TreeNode(1,\n                new TreeNode(2),\n                new TreeNode(3,\n                    new TreeNode(4),\n                    new TreeNode(5,\n                        new TreeNode(6),\n                        new TreeNode(7))));\n\n\n    // Try complete\n\n    TreeNode *x = makeFullRight(7);\n\n    cout &lt;&lt; \"Result of makeFullRight: \" &lt;&lt; endl;\n\n    if (equal(x,example))\n        print_pass(\"\");\n    else\n        print_fail(\"\");\n\n    // Clean up\n\n    delete x;\n    delete example;\n}\n</code></pre>\n\n<p>Makefile---New File</p>\n\n<pre><code>    EXENAME = main\n    OBJS = main.o TreeNode.o\n\n    CXX = clang++\n    CXXFLAGS = -std=c++0x -c -g -O0 -Wall -Wextra\n    LD = clang++\n    LDFLAGS = -std=c++0x\n\n    all: $(EXENAME)\n\n    $(EXENAME): $(OBJS)\n        $(LD) $^ $(LDFLAGS) -o $@\n\n    main.o: main.cpp\n        $(CXX) $&lt; $(CXXFLAGS)\n\n    TreeNode.o: TreeNode.cpp TreeNode.h\n        $(CXX) $&lt; $(CXXFLAGS)\n\n    clean:\n        -rm -f *.o $(EXENAME)\n</code></pre>\n"}, {"tags": ["c++", "boost", "state-machine"], "answers": [{"tags": [], "owner": {"reputation": 2569, "user_id": 1922763, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75228956a9f2a90a98b473672b91d807?s=128&d=identicon&r=PG", "display_name": "Takatoshi Kondo", "link": "https://stackoverflow.com/users/1922763/takatoshi-kondo"}, "is_accepted": true, "score": 3, "last_activity_date": 1571874038, "creation_date": 1571874038, "answer_id": 58532272, "question_id": 58524500, "link": "https://stackoverflow.com/questions/58524500/boost-state-machine-language-post-event-from-within-an-action/58532272#58532272", "title": "Boost State Machine Language - `post` event from within an `action`", "body": "<p>It is possible. You need to do 2 things.\nOne is setting <code>boost::sml::queue</code> template argument to <code>boost::sml::sm</code>.</p>\n\n<pre><code>// sml::process_queue is for post event\nsml::sm&lt;table, sml::process_queue&lt;std::queue&gt;&gt; sm;\n</code></pre>\n\n<p>The posted event need to be pushed into a queue. When the current transition is finished, then the event popd from the queue and processed. In order to do that, Boost.SML require some queue. <code>sml::process_queue&lt;std::queue&gt;</code> provides the queue type. You can pass any types that satisfies queue concept that behaves as <code>std::queue</code>.</p>\n\n<p>The other is setting <code>sml::back::process&lt;comma_separated_list_of_processed_event_types&gt;</code> parameter to the action handler as follows:</p>\n\n<pre><code>[](auto const&amp; /*ev*/, sml::back::process&lt;other_event /*, my_event*/ &gt; process) {\n</code></pre>\n\n<p>The argument process is callable. So you can call <code>process</code> as a function. When you call <code>process(event)</code> then the event is posted to the queue.</p>\n\n<p>Here is an example code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;boost/sml.hpp&gt;\n\nint main() {\n    namespace sml = boost::sml;\n\n    struct my_event {};\n    struct other_event {};\n\n    struct table {\n        auto operator()() const noexcept {\n            using namespace sml;\n            return make_transition_table(\n\n               *\"s1\"_s + event&lt;my_event&gt; / \n                // In order to post event in the action,\n                // you need to define the action handler as follows.\n                // The key is the second parameter.\n                // `sml::back::process` is posting event callable type.\n                // You need to pass all event types that are posted in the action handler\n                // as the template argument.\n                // Unfortunately you cannot write `sml::back::process&lt;_&gt;` for all events.\n                [](auto const&amp; /*ev*/, sml::back::process&lt;other_event /*, my_event*/ &gt; process) {\n                    std::cout &lt;&lt; \"before post\" &lt;&lt; std::endl;\n                    process(other_event{});\n                    std::cout &lt;&lt; \"after post\" &lt;&lt; std::endl;\n                } = \"s2\"_s,\n\n                \"s2\"_s + event&lt;other_event&gt; = X,\n\n                // entry exit log\n                \"s1\"_s + sml::on_entry&lt;_&gt; / [] { std::cout &lt;&lt; \"s1 on entry\" &lt;&lt; std::endl; },\n                \"s1\"_s + sml::on_exit&lt;_&gt;  / [] { std::cout &lt;&lt; \"s1 on exit\"  &lt;&lt; std::endl; },\n                \"s2\"_s + sml::on_entry&lt;_&gt; / [] { std::cout &lt;&lt; \"s2 on entry\" &lt;&lt; std::endl; },\n                \"s2\"_s + sml::on_exit&lt;_&gt;  / [] { std::cout &lt;&lt; \"s2 on exit\"  &lt;&lt; std::endl; }\n            );\n        };\n    };\n\n    // sml::process_queue is for post event\n    sml::sm&lt;table, sml::process_queue&lt;std::queue&gt;&gt; sm;\n    sm.process_event(my_event{});\n}\n</code></pre>\n\n<p>Live demo: <a href=\"https://wandbox.org/permlink/yueELv7SoFbPCEW1\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/yueELv7SoFbPCEW1</a></p>\n"}], "owner": {"reputation": 573, "user_id": 1156145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mNDqY.png?s=128&g=1", "display_name": "codentary", "link": "https://stackoverflow.com/users/1156145/codentary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 1, "accepted_answer_id": 58532272, "answer_count": 1, "score": 1, "last_activity_date": 1613807124, "creation_date": 1571838885, "last_edit_date": 1613807124, "question_id": 58524500, "link": "https://stackoverflow.com/questions/58524500/boost-state-machine-language-post-event-from-within-an-action", "title": "Boost State Machine Language - `post` event from within an `action`", "body": "<p>I am using <a href=\"https://boost-experimental.github.io/sml/\" rel=\"nofollow noreferrer\">boost sml</a> for a few days, and I've got to the point where I need to post / process an event from within an action.<br/>\nI can see that it can be done directly from the transition table:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>using namespace sml;\nreturn make_transition_table(\n *&quot;s1&quot;_s + event&lt;my_event&gt; / process_event(other_event{}) = &quot;s2&quot;_s,\n  &quot;s2&quot;_s + event&lt;other_event&gt; = X\n);\n</code></pre>\n<p>But my use-case is different:<br/>\nI have a state that has an <code>action</code>for <code>on-entry</code> event, which does some work, and eventually, trigger an event (from <code>within</code> the state <code>action</code>).</p>\n<p>For example, with <code>boost statechart</code>, each state had access to the <code>context</code> and could <code>post_event</code>.</p>\n<p>Is this possible with <code>sml</code>?</p>\n"}, {"tags": ["c++", "mysql", "qt", "listener", "database-trigger"], "answers": [{"tags": [], "owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "is_accepted": true, "score": 0, "last_activity_date": 1572083936, "creation_date": 1572083936, "answer_id": 58569770, "question_id": 58524370, "link": "https://stackoverflow.com/questions/58524370/how-do-i-listen-for-a-triggered-event-in-mysql-database-using-qt-c/58569770#58569770", "title": "How do I listen for a triggered event in mysql database using QT &amp; C++?", "body": "<p>MySQL has no Notify/Subscribe mechanism, unlike Postgres. So, you need to do polling on your desired table to keep track of inserts.\nYou may also take a look at this implementation:\n<a href=\"https://github.com/Cyclonecode/mysql-notification\" rel=\"nofollow noreferrer\">https://github.com/Cyclonecode/mysql-notification</a>\nIt's creating an Http server and it sends notifications over a WebSocket connection. It would not fit into every use case because of lacking security considerations. </p>\n"}], "owner": {"reputation": 3, "user_id": 12263472, "user_type": "registered", "profile_image": "https://graph.facebook.com/10220747570427079/picture?type=large", "display_name": "Bry", "link": "https://stackoverflow.com/users/12263472/bry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 58569770, "answer_count": 1, "score": 0, "last_activity_date": 1572083936, "creation_date": 1571838454, "last_edit_date": 1571842747, "question_id": 58524370, "link": "https://stackoverflow.com/questions/58524370/how-do-i-listen-for-a-triggered-event-in-mysql-database-using-qt-c", "title": "How do I listen for a triggered event in mysql database using QT &amp; C++?", "body": "<p>I am currently developing a Quote Generator for the office where I work using C++, QT and MYSQL.  Ive mostly completed it, but I still consider myself a noob to C++ as I have not used it in years. Im using the QMYSQL driver and I have succesfully created this trigger in mysql database (CREATE TRIGGER <code>new_quote_added</code> AFTER INSERT ON <code>quotes</code>\n FOR EACH ROW INSERT INTO newquotes (quoteNUM, name)\nVALUES (NEW.quoteNUM, NEW.name)), </p>\n\n<p>Im wondering if someone can give me some examples of how I can set up a listener to see this trigger and then publish a message to my systemtrayIcon that I have set up.  My apologies if this is super basic but as I said Im new and havent found anyone else doing quite this.  Thank you in advance for your help</p>\n"}, {"tags": ["c++", "qt", "environment-variables", "qmake"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1571838691, "post_id": 58524214, "comment_id": 103373758, "body": "Maybe <code>export(path_to_subsitute:$$(PATH))</code>?"}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1571839435, "post_id": 58524214, "comment_id": 103374223, "body": "@vahancho nothing change"}], "answers": [{"comments": [{"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1572277233, "post_id": 58569819, "comment_id": 103500873, "body": "Yes, but it has to be executed before the make generation or the export does not apply"}], "tags": [], "owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "is_accepted": false, "score": 0, "last_activity_date": 1572084300, "creation_date": 1572084300, "answer_id": 58569819, "question_id": 58524214, "link": "https://stackoverflow.com/questions/58524214/how-to-add-export-path-in-qt-pro-file/58569819#58569819", "title": "How to add export PATH in Qt pro file", "body": "<p>You may want to use <a href=\"https://doc.qt.io/archives/qt-4.8/qmake-function-reference.html#system-command\" rel=\"nofollow noreferrer\">system()</a> function within your .pro file. Make sure that you make it conditional for your host or target platform. </p>\n"}], "owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1572084300, "creation_date": 1571838026, "question_id": 58524214, "link": "https://stackoverflow.com/questions/58524214/how-to-add-export-path-in-qt-pro-file", "title": "How to add export PATH in Qt pro file", "body": "<p>In Qt5 Linux I have to add path to the environment so I usually do</p>\n\n<pre><code>export PATH=path_to_subsitute:$PATH\nmake\n</code></pre>\n\n<p>because I have to put it before the other path variable.</p>\n\n<p>Is there a way to add it directly to the <code>.pro</code> file? I don't wan to add it in the project settings because it changes only the <code>.pro.user</code> .</p>\n"}, {"tags": ["c++", "linux", "memory-management", "virtual-memory"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1571837471, "post_id": 58523977, "comment_id": 103373047, "body": "I&#39;m not very familiar or certain about this stuff, but I think the <code>mmap</code> system call could be used for this."}, {"owner": {"reputation": 1811, "user_id": 12062404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7672893c82da1651cc0a83bb1c54b623?s=128&d=identicon&r=PG&f=1", "display_name": "gst", "link": "https://stackoverflow.com/users/12062404/gst"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1571837564, "post_id": 58523977, "comment_id": 103373107, "body": "As said by @aschepler, <code>mmap</code> is probably used. Check with <code>strace</code>."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 3, "creation_date": 1571837899, "post_id": 58523977, "comment_id": 103373290, "body": "Please stick to the internationally agreed SI units system - <a href=\"https://en.wikipedia.org/wiki/International_System_of_Units\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/International_System_of_Units</a> Please use <b>B</b> for <b>bytes</b> and <b>b</b> for <b>bits</b>, so one megabyte is 1MB, one gigabyte is 1GB (<a href=\"https://en.wikipedia.org/wiki/Gigabyte\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Gigabyte</a>), one gigabit is 1Gb (<a href=\"https://en.wikipedia.org/wiki/Gigabit\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Gigabit</a>). Thank you."}, {"owner": {"reputation": 6693, "user_id": 233928, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2ebb47a2f272e8fe85a1b9106c4c1714?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/233928/dov"}, "edited": false, "score": 0, "creation_date": 1571837934, "post_id": 58523977, "comment_id": 103373313, "body": "@DanielLangr: that was the first problem. looking into mmap"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 4, "creation_date": 1571838080, "post_id": 58523977, "comment_id": 103373405, "body": "@MarkSetchell According to SI unit system, G stands for 10^9. If you need to be precise, use GiB here."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1571838626, "post_id": 58523977, "comment_id": 103373715, "body": "@DanielLangr Yes, agreed, thank you."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1571842346, "post_id": 58523977, "comment_id": 103375925, "body": "@DanielLangr however, I would like to emphasise that while it probably won&#39;t hurt to be specific and use GiB, it would be foolish to assume GB to mean SI Giga in computer context. Due to deep rooted tradition, most people assume that GB == GiB, and only (yeah, this is an exaggeration :) people who use the SI definition are marketing storage or bandwidth, and do so because they get to use bigger numbers."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1571842739, "post_id": 58523977, "comment_id": 103376174, "body": "@eerorika Totally agree. I just responded to Mark&#39;s comment that mentioned SI unit system. A simple comment like &quot;use b for bits and B for bytes&quot; would be enough."}], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 6693, "user_id": 233928, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2ebb47a2f272e8fe85a1b9106c4c1714?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/233928/dov"}, "edited": false, "score": 0, "creation_date": 1571838680, "post_id": 58524153, "comment_id": 103373753, "body": "@Dov I added a link to an answer that explains how virtual address space is limited. Basically, RAM size, swap size, and <code>ulimit</code> all play role here. I tried a system with 1.5 TB RAM and I was able to allocate 1 TB, but not 2 TB. <code>ulimit</code> set to unlimited."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 2, "creation_date": 1571839288, "post_id": 58524153, "comment_id": 103374115, "body": "@DanielLangr Point is that it can be, where as <code>ULL</code> will always be at least 64 bit.  Your answer is all about fitting numbers into the correct amount of bits after all."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1571839605, "post_id": 58524153, "comment_id": 103374335, "body": "Gotta agree with Paul that <code>ULL</code> is the correct choice: <a href=\"http://eel.is/c++draft/basic.fundamental#tab:basic.fundamental.width\" rel=\"nofollow noreferrer\">eel.is/c++draft/basic.fundamental#tab:basic.fundamental.widt&zwnj;&#8203;h</a> (although &quot;<code>UL</code> is just <code>unsigned int</code> usually&quot; is a dubious statement)."}, {"owner": {"reputation": 6693, "user_id": 233928, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2ebb47a2f272e8fe85a1b9106c4c1714?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/233928/dov"}, "edited": false, "score": 0, "creation_date": 1571840081, "post_id": 58524153, "comment_id": 103374631, "body": "@DanielLangr, Given that I want to access much less physical memory, this seems like a ridiculous limit. Does mmap not work this way? I am looking for a call like mmap but not with files. Surely I can memory map a file bigger than my swap space using mmap?"}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 3, "last_activity_date": 1571839688, "last_edit_date": 1571839688, "creation_date": 1571837794, "answer_id": 58524153, "question_id": 58523977, "link": "https://stackoverflow.com/questions/58523977/is-it-possible-to-allocate-large-amount-of-virtual-memory-in-linux/58524153#58524153", "title": "Is it possible to allocate large amount of virtual memory in linux?", "body": "<p>The value of <code>256*GB</code> does not fit into a range of 32-bit integer type. Try <code>uint64_t</code> as a type of <code>GB</code>:</p>\n\n<pre><code>constexpr uint64_t GB = 1024*1024*1024;\n</code></pre>\n\n<p>or, alternatively, force 64-bit multiplication:</p>\n\n<pre><code>char* p = new char[256ULL * GB];\n</code></pre>\n\n<hr>\n\n<p>OT: I would prefer this definition of <code>GB</code>:</p>\n\n<pre><code>constexpr uint64_t GB = 1ULL &lt;&lt; 30;\n</code></pre>\n\n<hr>\n\n<p>As for the virtual memory limit, see <a href=\"https://stackoverflow.com/a/8274194/580083\">this answer</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 6693, "user_id": 233928, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2ebb47a2f272e8fe85a1b9106c4c1714?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/233928/dov"}, "edited": false, "score": 0, "creation_date": 1571844385, "post_id": 58524949, "comment_id": 103377052, "body": "Great answer! new/malloc does in fact work, but I would much rather not have to set a system-wide policy of overcommitting memory. Is there any way to override it just for my process?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 6693, "user_id": 233928, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2ebb47a2f272e8fe85a1b9106c4c1714?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/233928/dov"}, "edited": false, "score": 0, "creation_date": 1571844927, "post_id": 58524949, "comment_id": 103377324, "body": "@Dov as far as I know, the setting can only be changed kernel-wide."}, {"owner": {"reputation": 6693, "user_id": 233928, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2ebb47a2f272e8fe85a1b9106c4c1714?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/233928/dov"}, "edited": false, "score": 0, "creation_date": 1571845080, "post_id": 58524949, "comment_id": 103377395, "body": "Perhaps the task set the  parameter, allocate, then set it back?  Kind of kludgy"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1571844047, "last_edit_date": 1571844047, "creation_date": 1571840277, "answer_id": 58524949, "question_id": 58523977, "link": "https://stackoverflow.com/questions/58523977/is-it-possible-to-allocate-large-amount-of-virtual-memory-in-linux/58524949#58524949", "title": "Is it possible to allocate large amount of virtual memory in linux?", "body": "<blockquote>\n  <p>Is it possible to allocate large amount of virtual memory in linux?</p>\n</blockquote>\n\n<p>Possibly. But you may need to configure it to be allowed:</p>\n\n<blockquote>\n  <p>The Linux kernel supports the following overcommit handling modes</p>\n  \n  <p>0 -   Heuristic overcommit handling. Obvious overcommits of       address\n  space are refused. Used for a typical system. It      ensures a seriously\n  wild allocation fails while allowing      overcommit to reduce swap\n  usage.  root is allowed to        allocate slightly more memory in this\n  mode. This is the         default.</p>\n  \n  <p>1 -   Always overcommit. Appropriate for some scientific      applications.\n  Classic example is code using sparse arrays       and just relying on the\n  virtual memory consisting almost      entirely of zero pages.</p>\n  \n  <p>2 -   Don't overcommit. The total address space commit        for the system\n  is not permitted to exceed swap + a       configurable amount (default is\n  50%) of physical RAM.         Depending on the amount you use, in most\n  situations        this means a process will not be killed while accessing\n        pages but will receive errors on memory allocation as       appropriate.</p>\n  \n  <p>Useful for applications that want to guarantee their      memory\n  allocations will be available in the future       without having to\n  initialize every page.</p>\n  \n  <p>The overcommit policy is set via the sysctl `vm.overcommit_memory'.</p>\n</blockquote>\n\n<p>So, if you want to allocate more virtual memory than you have physical memory, then you'd want:</p>\n\n<pre><code># in shell\nsysctl -w vm.overcommit_memory=1\n</code></pre>\n\n<blockquote>\n  <p>RLIMIT_AS The maximum size of the process's virtual memory (address space) in bytes. This limit affects calls to brk(2), mmap(2) and mremap(2), which fail with the error ENOMEM upon exceeding this limit. Also automatic stack expansion will fail (and generate a SIGSEGV that kills the process if no alternate stack has been made available via sigaltstack(2)). Since the value is a long, on machines with a 32-bit long either this limit is at most 2 GiB, or this resource is unlimited.</p>\n</blockquote>\n\n<p>So, you'd want:</p>\n\n<pre><code>setrlimit(RLIMIT_AS, {\n    .rlim_cur = RLIM_INFINITY,\n    .rlim_max = RLIM_INFINITY,\n});\n</code></pre>\n\n<p>Or, if you cannot give the process permission to do this, then you can configure this persistently in /etc/security/limits.conf which will affect all processes (of a user/group).</p>\n\n<hr>\n\n<blockquote>\n  <p>Ok, so mmap seems to support ... but it requires a file descriptor. ... could be a win but not if they have to be backed by a file ... I don't like the idea of attaching to a file</p>\n</blockquote>\n\n<p>You don't need to use a file backed mmap. There's MAP_ANONYMOUS for that.</p>\n\n<blockquote>\n  <p>I did not know what number to put in to request</p>\n</blockquote>\n\n<p>Then use null. Example:</p>\n\n<pre><code>mmap(nullptr, 256*GB, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0)\n</code></pre>\n\n<p>That said, if you've configured the system as described, then <code>new</code> should work just as well as <code>mmap</code>. It'll probably use <code>malloc</code> which will probably use <code>mmap</code> for large allocations like this.</p>\n\n<hr>\n\n<p>Bonus hint: You may benefit from taking advantage of using <a href=\"https://github.com/torvalds/linux/blob/master/Documentation/admin-guide/mm/hugetlbpage.rst\" rel=\"nofollow noreferrer\">HugeTLB Pages</a>.</p>\n"}], "owner": {"reputation": 6693, "user_id": 233928, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2ebb47a2f272e8fe85a1b9106c4c1714?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/233928/dov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 58524949, "answer_count": 2, "score": 6, "last_activity_date": 1571844047, "creation_date": 1571837286, "last_edit_date": 1571840181, "question_id": 58523977, "link": "https://stackoverflow.com/questions/58523977/is-it-possible-to-allocate-large-amount-of-virtual-memory-in-linux", "title": "Is it possible to allocate large amount of virtual memory in linux?", "body": "<p>It would be efficient for some purposes to allocate a huge amount of virtual space, and page in only pages that are accessed. Allocating a large amount of memory is instantaneous and does not actually grab pages:</p>\n\n<pre><code>char* p = new char[1024*1024*1024*256];\n</code></pre>\n\n<p>Ok, the above was wrong as pointed out because it's a 32 bit number.</p>\n\n<p>I expect that new is calling malloc which calls sbrk, and that when I access a location 4Gb beyond the start, it tries to extend the task memory by that much?</p>\n\n<p>Here is the full program:</p>\n\n<pre><code>#include &lt;cstdint&gt;\nint main() {\n  constexpr uint64_t GB = 1ULL &lt;&lt; 30;\n  char* p = new char[256*GB]; // allocate large block of virtual space\n  p[0] = 1;\n  p[1000000000] = 1;\n  p[2000000000] = 1;\n}\n</code></pre>\n\n<p>Now, I get bad_alloc when attempting to allocate the huge amount, so obviously malloc won't work.</p>\n\n<p>I was under the impression that mmap would map to files, but since this is suggested I am looking into it.</p>\n\n<p>Ok, so mmap seems to support allocation of big areas of virtual memory, but it requires a file descriptor. Creating huge in-memory data structures could be a win but not if they have to be backed by a file:</p>\n\n<p>The following code uses mmap even though I don't like the idea of attaching to a file. I did not know what number to put in to request in virtual memory, and picked 0x800000000.  mmap returns -1, so obviously I'm doing something wrong:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/mman.h&gt;\n\nint main() {\n  constexpr uint64_t GB = 1ULL &lt;&lt; 30;\n  void *addr = (void*)0x8000000000ULL;\n  int fd = creat(\"garbagefile.dat\", 0660);\n  char* p = (char*)mmap(addr, 256*GB, PROT_READ|PROT_WRITE, MAP_PRIVATE, fd, 0);\n  p[0] = 1;\n  p[1000000000] = 1;\n  p[2000000000] = 1;\n  close(fd);\n}\n</code></pre>\n\n<p>Is there any way to allocate a big chunk of virtual memory and access pages sparsely, or is this not doable? </p>\n"}, {"tags": ["c++", "qt", "config", "project"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 2, "creation_date": 1571837098, "post_id": 58523872, "comment_id": 103372812, "body": "Your code will work if you store <code>config.txt</code> file in the current working directory - the directory where you run your application from. Or store the file in the same directory where your application is and refer to it as <code>QCoreApplication::applicationDirPath() + &quot;&#47;config.txt&quot;</code> Currently you embed it (the content) into the executable using Qt resource framework."}, {"owner": {"reputation": 205, "user_id": 4818190, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10202576872502573/picture?type=large", "display_name": "Rosen Karadinev", "link": "https://stackoverflow.com/users/4818190/rosen-karadinev"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1571838343, "post_id": 58523872, "comment_id": 103373554, "body": "Okey It wokred, but I had to copy manually config.txt to build directory. Thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 5836457, "user_type": "registered", "profile_image": "https://graph.facebook.com/437781636390778/picture?type=large", "display_name": "Paolo", "link": "https://stackoverflow.com/users/5836457/paolo"}, "is_accepted": false, "score": 1, "last_activity_date": 1571838803, "creation_date": 1571838803, "answer_id": 58524473, "question_id": 58523872, "link": "https://stackoverflow.com/questions/58523872/how-to-add-non-compilable-configuration-file-into-qt-project/58524473#58524473", "title": "How to add non compilable configuration file into QT Project?", "body": "<p>You can use QMAKE_EXTRA_TARGET in your profile like: </p>\n\n<pre><code>copyfile.commands += $${QMAKE_COPY} $$system_path($$PWD/config.txt) $$system_path($$DESTDIR/)\nfirst.depends = $(first) copyfile\nQMAKE_EXTRA_TARGETS += first copyfile\n</code></pre>\n\n<p>But ensure your $$DESTDIR is correct. </p>\n"}, {"tags": [], "owner": {"reputation": 2045, "user_id": 6842395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d215da0d7fcc97ae7fbca3af451bf10d?s=128&d=identicon&r=PG&f=1", "display_name": "Former contributor", "link": "https://stackoverflow.com/users/6842395/former-contributor"}, "is_accepted": true, "score": 2, "last_activity_date": 1571865589, "last_edit_date": 1571865589, "creation_date": 1571864186, "answer_id": 58530883, "question_id": 58523872, "link": "https://stackoverflow.com/questions/58523872/how-to-add-non-compilable-configuration-file-into-qt-project/58530883#58530883", "title": "How to add non compilable configuration file into QT Project?", "body": "<p>Another option is the undocumented feature \"file_copies\" in Qt 5.6 that you can use like this:</p>\n\n<pre><code>CONFIG += file_copies                                                                                                                                                              \nconfigfiles.path = $$OUT_PWD                                                                                                                                                         \nconfigfiles.files = $$PWD/config.txt                                                                                                                                              \nCOPIES += configfiles\n</code></pre>\n\n<p>Found here: <a href=\"https://stackoverflow.com/a/54162789/6842395\">https://stackoverflow.com/a/54162789/6842395</a>\nIf you don't like this method, that post has some more options to choose.</p>\n\n<p>By the way, loooking at your <code>ParseConfigFile()</code> method seems that your config.txt is a collection of lines with the format: key = value, very similar to a classic INI file. Maybe you could use <a href=\"https://doc.qt.io/qt-5/qsettings.html#QSettings-3\" rel=\"nofollow noreferrer\">QSettings</a> third constructor like this:</p>\n\n<pre><code>QSettings settings(\"config.txt\", QSettings::IniFormat);\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4818190, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10202576872502573/picture?type=large", "display_name": "Rosen Karadinev", "link": "https://stackoverflow.com/users/4818190/rosen-karadinev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 58530883, "answer_count": 2, "score": 0, "last_activity_date": 1571865589, "creation_date": 1571836915, "question_id": 58523872, "link": "https://stackoverflow.com/questions/58523872/how-to-add-non-compilable-configuration-file-into-qt-project", "title": "How to add non compilable configuration file into QT Project?", "body": "<p>I have a .txt file in QT project, where I store settings parameters for my app. If I read it that way</p>\n\n<pre><code>void MainWindow::ReadApplicationSettings()\n{\n   QFile cfgFile(\"config.txt\");\n   if(!cfgFile.exists())\n   {\n      qDebug() &lt;&lt; \"Cannot find config file.\";\n   }\n   else\n   {\n      ParseConfigFile(cfgFile);\n      SetCfg();\n   }\n   cfgFile.close();\n}\n</code></pre>\n\n<p>And Parse it:</p>\n\n<pre><code>void MainWindow::ParseConfigFile(QFile &amp;cfgFile)\n{\n    QString line;\n    if (cfgFile.open(QIODevice::ReadOnly | QIODevice::Text))\n    {\n       QTextStream stream(&amp;cfgFile);\n       while (!stream.atEnd())\n       {\n          line = stream.readLine();\n          std::istringstream iss(line.toStdString());\n          std::string id, eq, val;\n          bool error = false;\n\n          if (!(iss &gt;&gt; id))\n          {\n            error = true;\n          }  \n          else if (id[0] == '#')\n          {\n            continue;\n          }\n          else if (!(iss &gt;&gt; eq &gt;&gt; val &gt;&gt; std::ws) || eq != \"=\" || iss.get() != EOF)\n          {\n            error = true;\n          }\n          if (error) { throw std::runtime_error(\"Parse error\"); }\n\n          cfgMap[id] = std::stoi(val);\n     }\n   }\n}\n</code></pre>\n\n<p>The file exists and when the parsing begin the content of the file is empty </p>\n\n<blockquote>\n  <p>The result of: line = stream.readLine(); is \"\".</p>\n</blockquote>\n\n<p>If I add the file like a resource file and opened this way:</p>\n\n<blockquote>\n<pre><code>QFile cfgFile(\":config.txt\");\n</code></pre>\n</blockquote>\n\n<p>It's working correct, but the problem is that <strong>the config file is compiled</strong> and when you have to change some value, <strong>the project must be rebuild to take effect</strong></p>\n\n<p>I tried to compose the path like that <code>QDir::currentPath + \"/config.txt\"</code>, but not working as well.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1571837977, "post_id": 58523864, "comment_id": 103373340, "body": "on the chartview, you would setRubberband. void QChartView::setRubberBand(const QChartView::RubberBands &amp;rubberBand)"}, {"owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1571838088, "post_id": 58523864, "comment_id": 103373411, "body": "Check your mouseMoveEvent: You set the rubberband&#39;s geometry to an empty rectangle"}], "answers": [{"comments": [{"owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1571838476, "post_id": 58524262, "comment_id": 103373621, "body": "You could probably use the rubber band&#39;s <code>pos()</code> instead of a member variable for the origin"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "reply_to_user": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1571853899, "post_id": 58524262, "comment_id": 103381390, "body": "@king_nak Possibly.  The only issue is that <code>pos()</code> always returns the position of the top-left corner whereas <code>_origin</code> as set/used in the code shown might actually represent any corner of the rubber band&#39;s geometry depending on how &#39;erratic&#39; the user is with the mouse.  So it probably could be done but the code might become very terse.  I&#39;ll leave that as an exercise for the OP :-)"}, {"owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "edited": false, "score": 0, "creation_date": 1571900281, "post_id": 58524262, "comment_id": 103394294, "body": "@GM yes, you&#39;re right... Didn&#39;t think about that ;)"}], "tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": true, "score": 4, "last_activity_date": 1571838170, "creation_date": 1571838170, "answer_id": 58524262, "question_id": 58523864, "link": "https://stackoverflow.com/questions/58523864/qt-rubberband-not-being-drawn/58524262#58524262", "title": "Qt rubberband not being drawn", "body": "<p>Take a look at your <code>mouseMoveEvent</code> implementation...</p>\n\n<pre><code>void TOTMain::mouseMoveEvent(QMouseEvent *event)\n{\n    QPoint origin = event-&gt;pos();\n    _selectionSquare-&gt;setGeometry(QRect(origin, event-&gt;pos()).normalized());\n}\n</code></pre>\n\n<p>You're setting the geometry of the rubber band to <code>QRect(origin, event-&gt;pos())</code>, but you've previously set <code>origin = event-&gt;pos()</code> so the top-left and bottom-right corners of the rectangle are the same.</p>\n\n<p>Make <code>origin</code> a member variable variable of your class (untested)...</p>\n\n<pre><code>class TOTMain: public QWidget {\npublic:\nprotected:\n    virtual void mousePressEvent (QMouseEvent *event) override\n    {\n        _origin = event-&gt;pos();\n        _selectionSquare = new QRubberBand(QRubberBand::Rectangle, this);\n        _selectionSquare-&gt;setGeometry(QRect(_origin, QSize()));\n        _selectionSquare-&gt;raise();\n        _selectionSquare-&gt;setStyleSheet(\"{ background-color : red; }\");\n        _selectionSquare-&gt;show();\n    }\n    virtual void mouseMoveEvent (QMouseEvent *event) override\n    {\n        _selectionSquare-&gt;setGeometry(QRect(_origin, event-&gt;pos()).normalized());\n    }\n    virtual void mouseReleaseEvent (QMouseEvent *event) override\n    {\n        _selectionSquare-&gt;hide();\n        // determine selection, for example using QRect::intersects()\n        // and QRect::contains().\n    }\nprivate:\n    QPoint       _origin;\n    QRubberBand *_selectionSquare = nullptr;\n};\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6945022, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/abe601594f7cbf5af54a8f956ebec84c?s=128&d=identicon&r=PG&f=1", "display_name": "WyomingUndercover", "link": "https://stackoverflow.com/users/6945022/wyomingundercover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 58524262, "answer_count": 1, "score": 0, "last_activity_date": 1571838170, "creation_date": 1571836892, "last_edit_date": 1571837849, "question_id": 58523864, "link": "https://stackoverflow.com/questions/58523864/qt-rubberband-not-being-drawn", "title": "Qt rubberband not being drawn", "body": "<p>I am attempting to implement a rubberband. Here is my code.</p>\n\n<pre><code>void TOTMain::mousePressEvent(QMouseEvent * event)\n{\n    QPoint origin = event-&gt;pos();\n    _selectionSquare = new QRubberBand(QRubberBand::Rectangle, this);\n    _selectionSquare-&gt;setGeometry(QRect(origin, QSize()));\n    _selectionSquare-&gt;raise();\n    _selectionSquare-&gt;show();\n}\n\nvoid TOTMain::mouseMoveEvent(QMouseEvent *event)\n{\n    QPoint origin = event-&gt;pos();\n    _selectionSquare-&gt;setGeometry(QRect(origin, event-&gt;pos()).normalized());\n}\n\nvoid TOTMain::mouseReleaseEvent(QMouseEvent *event)\n{\n    _selectionSquare-&gt;hide();\n    // determine selection, for example using QRect::intersects()\n    // and QRect::contains().\n}\n\n</code></pre>\n\n<p>The issue is that the band is not being drawn. I confirm it is being constructed and persists through the dragging, but no rendering. </p>\n\n<p>Any ideas appreciated.</p>\n"}, {"tags": ["c++", "cuda", "nvidia", "gpu"], "comments": [{"owner": {"reputation": 11683, "user_id": 1570854, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ef6Ng.jpg?s=128&g=1", "display_name": "Lesiak", "link": "https://stackoverflow.com/users/1570854/lesiak"}, "edited": false, "score": 5, "creation_date": 1571837982, "post_id": 58523847, "comment_id": 103373342, "body": "From the same document:  &gt; CUDA arrays are opaque memory layouts optimized for texture fetching. They are described in Texture and Surface Memory.  &gt; CUDA supports a subset of the texturing hardware that the GPU uses for graphics to access texture and surface memory. Reading data from texture or surface memory instead of global memory can have several performance benefits as described in Device Memory Accesses."}, {"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1571838643, "post_id": 58523847, "comment_id": 103373732, "body": "While I think its not disclosed, textures and such types of arrays are stored in a plane filling curve manner, such as the Hilbert or Z-curves."}, {"owner": {"reputation": 51, "user_id": 12263288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oW_3I66Vw7g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc0YwQA2Td-X3xUreyGq3bwpQWVTA/photo.jpg?sz=128", "display_name": "Phil Janana", "link": "https://stackoverflow.com/users/12263288/phil-janana"}, "edited": false, "score": 0, "creation_date": 1571842519, "post_id": 58523847, "comment_id": 103376030, "body": "So are CUDA arrays actually stored in the global memory? or somewhere else?           Or they are stored in global memory just like other data, but not in a linear form."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 5, "creation_date": 1571864314, "post_id": 58523847, "comment_id": 103385640, "body": "They are in &quot;global&quot; memory, meaning in the same physical resource that supports the logical global space, but the arrangement is unspecified.  You access them through the texture and surface mechanisms, which involve on-GPU-chip caches that access the underlying global memory allocation, according to some pattern which may change based on the exact texture definition and usage, and is unspecified."}, {"owner": {"reputation": 51, "user_id": 12263288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oW_3I66Vw7g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc0YwQA2Td-X3xUreyGq3bwpQWVTA/photo.jpg?sz=128", "display_name": "Phil Janana", "link": "https://stackoverflow.com/users/12263288/phil-janana"}, "edited": false, "score": 0, "creation_date": 1572266566, "post_id": 58523847, "comment_id": 103495295, "body": "Thank you guys very much!"}], "answers": [{"tags": [], "owner": {"reputation": 22707, "user_id": 749748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806d7f381d455b16e3f0b2fbe13c7bf5?s=128&d=identicon&r=PG", "display_name": "harrism", "link": "https://stackoverflow.com/users/749748/harrism"}, "is_accepted": false, "score": 1, "last_activity_date": 1596421719, "creation_date": 1596421719, "answer_id": 63222964, "question_id": 58523847, "link": "https://stackoverflow.com/questions/58523847/how-are-cuda-arrays-stored-in-gpu-memory-are-they-physically-linear-or-not/63222964#63222964", "title": "How are CUDA arrays stored in GPU memory? Are they physically linear or not?", "body": "<p>CUDA arrays are indeed stored in GPU device memory (&quot;global&quot; memory), and the bytes are not physically linear in memory. They are an opaque layout optimized for multichannel, multidimensional texture access and texture filtering. The format is undocumented, since it may change between GPU architectures.</p>\n"}], "owner": {"reputation": 51, "user_id": 12263288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oW_3I66Vw7g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc0YwQA2Td-X3xUreyGq3bwpQWVTA/photo.jpg?sz=128", "display_name": "Phil Janana", "link": "https://stackoverflow.com/users/12263288/phil-janana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1596421719, "creation_date": 1571836823, "last_edit_date": 1571839083, "question_id": 58523847, "link": "https://stackoverflow.com/questions/58523847/how-are-cuda-arrays-stored-in-gpu-memory-are-they-physically-linear-or-not", "title": "How are CUDA arrays stored in GPU memory? Are they physically linear or not?", "body": "<p>According to the CUDA TOOLKIT DOCUMENTATION: </p>\n\n<p><a href=\"https://docs.nvidia.com/cuda/cuda-c-programming-guide/\" rel=\"nofollow noreferrer\">https://docs.nvidia.com/cuda/cuda-c-programming-guide/</a></p>\n\n<p>Device memory can be allocated either as linear memory or as CUDA arrays.</p>\n\n<p>Does this mean that the CUDA arrays are not stored linearly in GPU memory? </p>\n\n<p>In my experiment, I successfully dumped my data from GPU memory based on the cudamemcpy function. If my data is allocated by cudaMallocArray, does it mean that the data are not physically linear in GPU memory and need to be extracted by other API?</p>\n"}, {"tags": ["c++", "templates", "c++17", "typetraits"], "comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1571836714, "post_id": 58523715, "comment_id": 103372597, "body": "You would have to inject that information yourself, something like <code>struct Derived : public GetBase&lt;Base&gt; {};</code>"}, {"owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1571836767, "post_id": 58523715, "comment_id": 103372625, "body": "@super Yeah, the idea was not to have to, otherwise, yes I can write type traits or do some hackery with crtp."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1571839040, "post_id": 58523772, "comment_id": 103373962, "body": "&quot;Sometime in the future&quot; meaning &quot;scheduled no earlier than 2026&quot; according to recent estimates I believe."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1571842576, "post_id": 58523772, "comment_id": 103376070, "body": "@MaxLanghof :( -"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 5, "last_activity_date": 1571836596, "creation_date": 1571836596, "answer_id": 58523772, "question_id": 58523715, "link": "https://stackoverflow.com/questions/58523715/decay-to-base-class/58523772#58523772", "title": "Decay to base class", "body": "<p>Nope. You can test whether a given type inherits from a given other type with <code>std::is_base_of</code>, but not ask for the base type outright. That is, until C++ gets static reflection sometime in the future.</p>\n"}], "owner": {"reputation": 1152, "user_id": 2448032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c08546fc4340f0be3109019ef869ac9e?s=128&d=identicon&r=PG", "display_name": "lightxbulb", "link": "https://stackoverflow.com/users/2448032/lightxbulb"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1571836834, "answer_count": 1, "score": 0, "last_activity_date": 1571836596, "creation_date": 1571836435, "question_id": 58523715, "link": "https://stackoverflow.com/questions/58523715/decay-to-base-class", "closed_reason": "Duplicate", "title": "Decay to base class", "body": "<p>Is there a trait that returns the base class of a specific class, with the assumption that there is no multiple inheritance involved? Basically something like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Base\n{\n\n};\n\nstruct Derived : public Base\n{\n\n};\n\nstruct DerivedDerived : public Derived\n{\n\n};\n\nstatic_assert(std::is_same_v&lt;base&lt;DerivedDerived&gt;::type,Derived&gt;);\nstatic_assert(std::is_same_v&lt;base&lt;Derived&gt;::type,Base&gt;);\nstatic_assert(std::is_same_v&lt;base&lt;Base&gt;::type,Base&gt;);\n// with levels\nstatic_assert(std::is_same_v&lt;base&lt;0,DerivedDerived&gt;::type,Base&gt;);\nstatic_assert(std::is_same_v&lt;base&lt;1,DerivedDerived&gt;::type,Derived&gt;);\nstatic_assert(std::is_same_v&lt;base&lt;2,DerivedDerived&gt;::type,DerivedDerived&gt;);\nstatic_assert(std::is_same_v&lt;base&lt;0,Derived&gt;::type,Base&gt;);\nstatic_assert(std::is_same_v&lt;base&lt;1,Derived&gt;::type,Derived&gt;);\n</code></pre>\n"}, {"tags": ["c#", "c++", "struct", "pinvoke", "dllimport"], "comments": [{"owner": {"reputation": 22713, "user_id": 1086121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d145ca3d7f8490da86055b72f3d859?s=128&d=identicon&r=PG", "display_name": "canton7", "link": "https://stackoverflow.com/users/1086121/canton7"}, "edited": false, "score": 0, "creation_date": 1571836059, "post_id": 58523541, "comment_id": 103372120, "body": "Is <code>rVDACQ_Connect</code> the same as <code>VDACQ_Connect</code>? What&#39;s its return type (you missed that out of its C++ signature)"}, {"owner": {"reputation": 65, "user_id": 6070904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181ad4e4d917653332d7cd1ad4c4fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Halpin", "link": "https://stackoverflow.com/users/6070904/joe-halpin"}, "reply_to_user": {"reputation": 22713, "user_id": 1086121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d145ca3d7f8490da86055b72f3d859?s=128&d=identicon&r=PG", "display_name": "canton7", "link": "https://stackoverflow.com/users/1086121/canton7"}, "edited": false, "score": 0, "creation_date": 1571837350, "post_id": 58523541, "comment_id": 103372974, "body": "In the sample code rVDACQ_Connect is just what they defined the function as when loading in the library and the return type is the struct tVDACQ_CallBackRec which I also included as part of the C++ code. Hope that helps let me know if you need anything else or if I missed anything else."}, {"owner": {"reputation": 22713, "user_id": 1086121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d145ca3d7f8490da86055b72f3d859?s=128&d=identicon&r=PG", "display_name": "canton7", "link": "https://stackoverflow.com/users/1086121/canton7"}, "edited": false, "score": 0, "creation_date": 1571838895, "post_id": 58523541, "comment_id": 103373865, "body": "So if it returns a tVDACQ_CallBackRec, why does your P/Invoke signature have it returning an <code>IntPtr</code>?"}, {"owner": {"reputation": 65, "user_id": 6070904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181ad4e4d917653332d7cd1ad4c4fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Halpin", "link": "https://stackoverflow.com/users/6070904/joe-halpin"}, "reply_to_user": {"reputation": 22713, "user_id": 1086121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d145ca3d7f8490da86055b72f3d859?s=128&d=identicon&r=PG", "display_name": "canton7", "link": "https://stackoverflow.com/users/1086121/canton7"}, "edited": false, "score": 0, "creation_date": 1571839361, "post_id": 58523541, "comment_id": 103374169, "body": "Because I read somewhere (can&#39;t remember where) that I could return as a IntPtr and then use Marshal.PtrToStructure. I have, however, tried returning as tVDACQ_CallBackRec and IntPtr. When I use tVDACQ_CallBackRec as the return type I get &#39;Method&#39;s type signature is not P/Invoke compatible&#39; which I assume is something wrong with the struct"}, {"owner": {"reputation": 22713, "user_id": 1086121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d145ca3d7f8490da86055b72f3d859?s=128&d=identicon&r=PG", "display_name": "canton7", "link": "https://stackoverflow.com/users/1086121/canton7"}, "edited": false, "score": 0, "creation_date": 1571839702, "post_id": 58523541, "comment_id": 103374389, "body": "Returning an <code>IntPtr</code> would only work if the C++ function returned a pointer to something. However the C++ function is returning something <i>by value</i>: it&#39;s not returning a pointer. When you tried returning tVDACQ_CallBackRec, did you remove the <code>MarshalAs</code> attribute from the return value?"}, {"owner": {"reputation": 65, "user_id": 6070904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181ad4e4d917653332d7cd1ad4c4fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Halpin", "link": "https://stackoverflow.com/users/6070904/joe-halpin"}, "reply_to_user": {"reputation": 22713, "user_id": 1086121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d145ca3d7f8490da86055b72f3d859?s=128&d=identicon&r=PG", "display_name": "canton7", "link": "https://stackoverflow.com/users/1086121/canton7"}, "edited": false, "score": 0, "creation_date": 1571842424, "post_id": 58523541, "comment_id": 103375972, "body": "Yes when I return tVDACQ_CallBackRec there is no MarshalAs, as it is only used in the function parameters for the callback as <code>[MarshalAs(UnmanagedType.FunctionPtr)] tVDACQ_CallBackProc proc</code>"}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 1, "creation_date": 1571849379, "post_id": 58523541, "comment_id": 103379502, "body": "Lots of issues. TCHAR could be ansi or unicode, make a choice in C#. tVDACQ_CallBackRec AR parameter should be marked as <code>ref</code>. You should remove <code>[return: MarshalAs(UnmanagedType.I4)]</code> from VDACQ_Connect to be consistent with IntPtr. You shouldn&#39;t need <code>unsafe</code>. Don&#39;t use FunctionPtr at all. Change <code>dynamic n</code> by <code>IntPtr n</code>. <code>IntPtr[] buffer</code> may be ok but it depends what C expects and what you pass to it."}], "owner": {"reputation": 65, "user_id": 6070904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181ad4e4d917653332d7cd1ad4c4fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Halpin", "link": "https://stackoverflow.com/users/6070904/joe-halpin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571837987, "creation_date": 1571835909, "last_edit_date": 1571837987, "question_id": 58523541, "link": "https://stackoverflow.com/questions/58523541/how-to-fix-cannot-marshal-return-value-invalid-managed-unmanaged-type-combin", "title": "How to fix &#39;Cannot marshal &#39;return value&#39;: Invalid managed/unmanaged type combination (Int/UInt must be paired with SysInt or SysUInt).&#39;", "body": "<p>I'm trying to return a struct from a C++ callback from C# and I get the error as described in the title. </p>\n\n<p>I appreciate there is a lot of information, but I wanted to include too much rather than not enough.</p>\n\n<p>I've tried returning the function as a structure, but then read it may be easier to return the function as an IntPtr and use Marshal.PtrtoStructure.</p>\n\n<p>The function that I want to call is from a .dll that comes from a different source and the input is:</p>\n\n<p>C++:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>rVDACQ_Connect(int, tVDACQ_CallBackProc, void*, short*, int)\n</code></pre>\n\n<p>the function in the sample (C++) code returns a struct (rACQ_CallBackRec) which is as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>rACQ_CallBackRec = theApp.m_Intf.rVDACQ_Connect(cVDACQ_FBright, CALLBACK_Acquisition, this, m_FrmBuffer, 0);\n//rACQ_CallBackRec is the struct type tVDACQ_CallBackRec (as described below)\n</code></pre>\n\n<p>With CALLBACK_Aquisition being:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>extern \"C\" {\n    __declspec(dllexport) void _stdcall CALLBACK_Acquisition(tVDACQ_CallBackRec* AR)\n    {\n        tVDACQ_CallBackProc test;\n        ((CPreviewDlg*)AR-&gt;rUserParam)-&gt;My_ACQ_CallBack(AR, test);\n    }\n}\n</code></pre>\n\n<p>The layout of the struct is as follows:</p>\n\n<pre><code>typedef struct {\n    int    rFlags,            // combination of cVDACQ_Fxxxx\n        rType,             // cVDACQ_ETxxx\n        rEvent,            // cVDACQ_Exxx\n        rSocket;           // 0:no relation to a 'socket'; otherwise socket's ID&gt;0 (event's source ID) \n    TCHAR  rMsg[256];         // message (trace, wrn, err)\n    int    rFrameWidth,       // full frame width\n        rFrameHeight;      // full frame height\n    short* rFrameBuffer;      // user supplied frame buffer \"AFrameBuffer\"\n    union {\n        int    rCaptureRows;      // # of received rows (for single frame acquisition)\n        int    rCaptureFrames;    // # of received full frames (for framegrabber)\n    };\n    int    rCapturePercent;   // received data in percents\n    void* rUserCallBackProc, // user supplied \"ACallBackProc\"\n        * rUserParam;        // user supplied \"AUserParam\"\n    int    rAborted;          // 1: VDACQ_Abort -1:internally\n    void* rPacketData;       // pointer to received packet; usually it is nil  \n    int    rFGControl;        // frame-grabber's control flags\n} tVDACQ_CallBackRec;\n\ntypedef void(_stdcall* tVDACQ_CallBackProc)(tVDACQ_CallBackRec*); //The Callback\n</code></pre>\n\n<p>C#</p>\n\n<p>I've created the callback procedure in C#, as well as the struct and PInvoke:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>[UnmanagedFunctionPointer(CallingConvention.StdCall)]\n        public delegate void tVDACQ_CallBackProc(tVDACQ_CallBackRec AR);\n\n[DllImport(\"C:\\\\Users\\\\jch\\\\source\\\\repos\\\\FlatPanelSensor\\\\x64\\\\Debug\\\\VADAV_AcqS.dll\", EntryPoint = \"CALLBACK_Acquisition\", CallingConvention = CallingConvention.Cdecl)]\n        public unsafe static extern void CALLBACK_Acquisition(tVDACQ_CallBackRec AR);\n\n[DllImport(\"C:\\\\Users\\\\jch\\\\source\\\\repos\\\\FlatPanelSensor\\\\FlatPanelSensor\\\\bin\\\\Debug\\\\VADAV_FGM_64.dll\", EntryPoint = \"VDACQ_Connect\", CallingConvention = CallingConvention.Cdecl)]\n        [return: MarshalAs(UnmanagedType.I4)]\n        public unsafe static extern IntPtr VDACQ_Connect(int i, [MarshalAs(UnmanagedType.FunctionPtr)] tVDACQ_CallBackProc proc, dynamic n, IntPtr[] buffer, int j);\n</code></pre>\n\n<p>Struct:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential)]\n        public struct tVDACQ_CallBackRec\n        {\n            public int rFlags;\n            public int rType;\n            public int rEvent;\n            public int rSocket;\n\n            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]\n            public string rMsg;            \n\n            public int rFrameWidth;\n            public int rFrameHeight;\n\n            public IntPtr rFrameBuffer;\n\n            public int rCaptureRows;\n            public int rCaptureFrames;\n            public int rCapturePercent;\n\n            public IntPtr rUserCallBackProc;\n            public IntPtr rUserParam;\n\n            public int rAborted;\n\n            public IntPtr rPacketData;\n\n            public int rFGControl;\n        }\n</code></pre>\n\n<p>CallBack:</p>\n\n<pre><code>tVDACQ_CallBackProc callBack =\n                (AR) =&gt;\n                {\n                    CALLBACK_Acquisition(AR); //Don't know how necessary this \n                                                is\n                };\n</code></pre>\n\n<p>Function call:</p>\n\n<pre><code>IntPtr work = VDACQ_Connect(0, callBack, this, m_FrmBuffer, 0);\n//I know 'this' isn't defined as a void* in my DLLImport,\n//but making it an IntPtr didn't work either so \n//the only type I could think of was dynamic.\n</code></pre>\n\n<p>If I could return this as a IntPtr or, even better, the struct I defined in my C# code that would be great.</p>\n\n<p>If you need anymore information then please let me know, as I think I included everything.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571836034, "post_id": 58523534, "comment_id": 103372104, "body": "I don&#39;t get the question.  What&#39;s wrong with <code>int computeSomethingFrom(Something arg, const Config&amp; config = Config());</code>?  If you don&#39;t give it an object it will give you the default one."}, {"owner": {"reputation": 6967, "user_id": 915501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b219b646efa3c74061977c39306c1841?s=128&d=identicon&r=PG", "display_name": "Shep", "link": "https://stackoverflow.com/users/915501/shep"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571836188, "post_id": 58523534, "comment_id": 103372205, "body": "I&#39;m worried that calling the default constructor many times might get expensive if this config struct becomes large"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1571836671, "post_id": 58523534, "comment_id": 103372569, "body": "Ah.  That makes sense."}], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1571836413, "post_id": 58523674, "comment_id": 103372365, "body": "IMO, this should be a comment."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1571836634, "post_id": 58523674, "comment_id": 103372532, "body": "@DanielLangr Totally disagree, I think this is the crux of the matter."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 2, "last_activity_date": 1571836455, "last_edit_date": 1571836455, "creation_date": 1571836322, "answer_id": 58523674, "question_id": 58523534, "link": "https://stackoverflow.com/questions/58523534/calling-a-constructor-vs-defining-an-inline-constant-as-a-default-parameter/58523674#58523674", "title": "Calling a constructor vs defining an inline constant as a default parameter", "body": "<blockquote>\n  <p>My guess is that each function call will be forced to construct Config since there's no way to know if the default constructor depends on something else in the environment.</p>\n</blockquote>\n\n<p>You'd be amazed at what any modern compiler can do.  All empty code will be optimised away. You want to concentrate more readability, rather than trying to out guess the compiler. Only after you've done performance analysis on running code and identified a bottleneck, then try to so some optimisation there.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 6, "last_activity_date": 1571836402, "creation_date": 1571836402, "answer_id": 58523706, "question_id": 58523534, "link": "https://stackoverflow.com/questions/58523534/calling-a-constructor-vs-defining-an-inline-constant-as-a-default-parameter/58523706#58523706", "title": "Calling a constructor vs defining an inline constant as a default parameter", "body": "<p>Just overload this function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int computeSomethingFrom(Something arg, const Config&amp; config); // note no default value\nint computeSomethingFrom(Something arg);\n</code></pre>\n\n<p>I do not know how this impacts your code since you didn't give any informatin what <code>computeSomethingFrom</code> does.</p>\n\n<p>One of possible implementations (probably you will not be happy with that):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int computeSomethingFrom(Something arg)\n{\n    static const Config cfg;\n    return computeSomethingFrom(arg, cfg);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1571836634, "creation_date": 1571836634, "answer_id": 58523789, "question_id": 58523534, "link": "https://stackoverflow.com/questions/58523534/calling-a-constructor-vs-defining-an-inline-constant-as-a-default-parameter/58523789#58523789", "title": "Calling a constructor vs defining an inline constant as a default parameter", "body": "<p>If you don't want to pollute the global space with a default instance, and you like to avoid creating an object in every function call then I would suggest overloading the function.  Have one version that takes a <code>Config</code> and another that doesn't.  Then in the one that doesn't you create a <code>static Config</code> so you'll only have one instance constructed.  This will still have a slight cost since static variables need some guarding to make sure they are not initialized more than once.  That would look like</p>\n\n<pre><code>int computeSomethingFrom(Something arg, const Config&amp; config)\n{\n    // do the stuff\n}\nint computeSomethingFrom(Something arg)\n{\n    static Config config{};\n    computeSomethingFrom(std::move(arg), config);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 3, "last_activity_date": 1571838561, "creation_date": 1571838561, "answer_id": 58524399, "question_id": 58523534, "link": "https://stackoverflow.com/questions/58523534/calling-a-constructor-vs-defining-an-inline-constant-as-a-default-parameter/58524399#58524399", "title": "Calling a constructor vs defining an inline constant as a default parameter", "body": "<blockquote>\n  <p>So is there any way to avoid doing something like</p>\n\n<pre><code>inline Config DEFAULT_CONFIG = Config();\n</code></pre>\n  \n  <p>and then declaring the function as</p>\n\n<pre><code>int computeSomethingFrom(Something arg, const Config&amp; config = DEFAULT_CONFIG);\n</code></pre>\n</blockquote>\n\n<p>You can indeed declare global (at file scope) and use that:</p>\n\n<pre><code>/*static*/ const Config DEFAULT_CONFIG = Config();\nint computeSomethingFrom(Something arg, const Config&amp; config = DEFAULT_CONFIG);\n</code></pre>\n\n<p>That would call constructor once at \"start\" (as other global), even if you don't need it.</p>\n\n<p>You might so create a \"lazy\" factory:</p>\n\n<pre><code>const Config&amp; DefaultConfig() {\n    static Config config; // Call only once\n    return config;\n}\n\nint computeSomethingFrom(Something arg, const Config&amp; config = DefaultConfig());\n</code></pre>\n\n<p>It is mainly as other proposals with overloads:</p>\n\n<pre><code>int computeSomethingFrom(Something arg, const Config&amp; config);\nint computeSomethingFrom(Something arg)\n{\n    static const Config config;\n\n    return computeSomethingFrom(arg, config);\n}\n</code></pre>\n\n<p>but handles several defaulted parameters for same function,<br>\nand handles same default for several functions.</p>\n"}], "owner": {"reputation": 6967, "user_id": 915501, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b219b646efa3c74061977c39306c1841?s=128&d=identicon&r=PG", "display_name": "Shep", "link": "https://stackoverflow.com/users/915501/shep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1571838561, "creation_date": 1571835890, "last_edit_date": 1571836853, "question_id": 58523534, "link": "https://stackoverflow.com/questions/58523534/calling-a-constructor-vs-defining-an-inline-constant-as-a-default-parameter", "title": "Calling a constructor vs defining an inline constant as a default parameter", "body": "<p>I have a function that has a configuration struct as an argument</p>\n\n<pre><code>struct Config\n{\n  Config(); //&lt;-- default constructor\n  // some configuration constants\n};\n\nint computeSomethingFrom(Something arg, const Config&amp; config = Config());\n\n</code></pre>\n\n<p>The definition for <code>Config()</code> and the <code>computeSomethingFrom(...)</code> are both in the same source file.</p>\n\n<p>My guess is that each function call will be forced to construct <code>Config</code> since there's no way to know if the default constructor depends on something else in the environment. This might get expensive if the configuration structure becomes large or the function is called many times.</p>\n\n<p>Still, I'd rather avoid creating another constant if I can. And it's <em>possible</em>, given that the default constructor and the function are defined in the same source file, that the compiler can deduce that <code>Config()</code> always returns the same thing.</p>\n\n<p>So is there any way to avoid doing something like</p>\n\n<pre><code>inline Config DEFAULT_CONFIG = Config();\n</code></pre>\n\n<p>and then declaring the function as</p>\n\n<pre><code>int computeSomethingFrom(Something arg, const Config&amp; config = DEFAULT_CONFIG);\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "cuda"], "answers": [{"comments": [{"owner": {"reputation": 2086, "user_id": 10543528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3a9d1ea239d645f62babcbb003c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/10543528/michael"}, "edited": false, "score": 0, "creation_date": 1572043086, "post_id": 58523768, "comment_id": 103451315, "body": "I don&#39;t understand why this would fix the problem; <code>cudaFree</code>is supposed to be synchronous, so calling <code>cudaDeviceSynchronize</code> right before <code>cudaFree</code> shouldn&#39;t have changed anything. Does your kernel return an error code in either case?"}, {"owner": {"reputation": 7772, "user_id": 150884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5vmQJ.jpg?s=128&g=1", "display_name": "hertzsprung", "link": "https://stackoverflow.com/users/150884/hertzsprung"}, "reply_to_user": {"reputation": 2086, "user_id": 10543528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3a9d1ea239d645f62babcbb003c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/10543528/michael"}, "edited": false, "score": 0, "creation_date": 1597317447, "post_id": 58523768, "comment_id": 112096481, "body": "Does <code>cudaFree</code> implicitly synchronize with the device?  Like you, I assume that it should.  Or perhaps I needed to <code>cudaDeviceSynchronize</code> immediately after initialising the <code>all</code> array?"}, {"owner": {"reputation": 2086, "user_id": 10543528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3a9d1ea239d645f62babcbb003c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/10543528/michael"}, "edited": false, "score": 0, "creation_date": 1597977932, "post_id": 58523768, "comment_id": 112314601, "body": "I guess that it might not; I assumed that it synchronizes because there&#39;s no stream argument, which is what I would expect if I wanted to permit asynchronous memory management. But I don&#39;t really know"}], "tags": [], "owner": {"reputation": 7772, "user_id": 150884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5vmQJ.jpg?s=128&g=1", "display_name": "hertzsprung", "link": "https://stackoverflow.com/users/150884/hertzsprung"}, "is_accepted": true, "score": 0, "last_activity_date": 1571836584, "creation_date": 1571836584, "answer_id": 58523768, "question_id": 58523472, "link": "https://stackoverflow.com/questions/58523472/initialising-nested-arrays-on-the-cuda-device/58523768#58523768", "title": "Initialising nested arrays on the CUDA device", "body": "<p>Inevitably, I found the problem shortly after posting my question.  I needed to call <code>cudaDeviceSynchronize()</code> before calling <code>cudaFree()</code>:</p>\n\n<pre><code>print_host(all);\nprint_device&lt;&lt;&lt;1, 1&gt;&gt;&gt;(all);\n\ncudaCheckErrors(cudaDeviceSynchronize());\n\ncudaCheckErrors(cudaFree(all[0].values));\ncudaCheckErrors(cudaFree(all[1].values));\ncudaCheckErrors(cudaFree(all));\n</code></pre>\n\n<p>I found the problem using the <a href=\"https://docs.nvidia.com/cuda/cuda-gdb/index.html\" rel=\"nofollow noreferrer\">cuda-gdb</a> debugger.</p>\n"}], "owner": {"reputation": 7772, "user_id": 150884, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5vmQJ.jpg?s=128&g=1", "display_name": "hertzsprung", "link": "https://stackoverflow.com/users/150884/hertzsprung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58523768, "answer_count": 1, "score": 0, "last_activity_date": 1571836584, "creation_date": 1571835723, "question_id": 58523472, "link": "https://stackoverflow.com/questions/58523472/initialising-nested-arrays-on-the-cuda-device", "title": "Initialising nested arrays on the CUDA device", "body": "<p>I want to initialise an array of structs on the CUDA device, where each struct contains an array of doubles:</p>\n\n<pre><code>typedef struct TimeSeries\n{\n    double* values;\n} TimeSeries;\n\nTimeSeries* allTimeSeries;\n</code></pre>\n\n<p>I tried using CUDA managed memory to initialise the <code>allTimesSeries</code> array of structs, then initialise each <code>values</code> array of doubles.</p>\n\n<p>Here's my minimal working example:</p>\n\n<pre><code>#include &lt;cuda.h&gt;\n#include &lt;cuda_runtime_api.h&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n\n#define cudaCheckErrors(ans) { gpuAssert((ans), __FILE__, __LINE__); }\ninline void gpuAssert(cudaError_t code, const char *file, int line)\n{   \n    if (code != cudaSuccess) \n    {\n        fprintf(stderr, \"%s %s %d\\n\", cudaGetErrorString(code), file, line);\n        exit(code);\n    }\n}   \n\ntypedef struct TimeSeries\n{\n    double* values;\n} TimeSeries;\n\nvoid print_host(TimeSeries* all)\n{\n    printf(\"CPU %f %f\\n\", all[0].values[0], all[0].values[1]);\n    printf(\"CPU %f\\n\", all[1].values[0]);\n}\n\n__global__ void print_device(TimeSeries* all)\n{\n    printf(\"GPU %f %f\\n\", all[0].values[0], all[0].values[1]);\n    printf(\"GPU %f\\n\", all[1].values[0]);\n}\n\nint main()\n{   \n    TimeSeries* all;\n    cudaCheckErrors(cudaMallocManaged(reinterpret_cast&lt;void**&gt;(&amp;all),\n            2*sizeof(TimeSeries)));\n\n    cudaCheckErrors(cudaMallocManaged(\n            reinterpret_cast&lt;void**&gt;(&amp;(all[0].values)), 2*sizeof(double)));\n    cudaCheckErrors(cudaMallocManaged(\n            reinterpret_cast&lt;void**&gt;(&amp;(all[1].values)), 1*sizeof(double)));\n\n    all[0].values[0] = 4.8;\n    all[0].values[1] = 3.3;\n    all[1].values[0] = 0.4;\n\n    print_host(all);\n    print_device&lt;&lt;&lt;1, 1&gt;&gt;&gt;(all);\n\n    cudaCheckErrors(cudaFree(all[0].values));\n    cudaCheckErrors(cudaFree(all[1].values));\n    cudaCheckErrors(cudaFree(all));\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiling with nvcc (CUDA 10) and running on a Tesla K80 gives:</p>\n\n<pre><code>CPU 4.800000 3.300000\nCPU 0.400000\n\nCommand terminated\n</code></pre>\n\n<p>How can initialise this data without crashing the GPU?  I don't mind if the solution uses unified (managed) memory or not.</p>\n"}, {"tags": ["c++", "vtk"], "answers": [{"tags": [], "owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "is_accepted": true, "score": 0, "last_activity_date": 1571839305, "last_edit_date": 1571839305, "creation_date": 1571838953, "answer_id": 58524516, "question_id": 58523300, "link": "https://stackoverflow.com/questions/58523300/cant-recolor-edges-in-vtk/58524516#58524516", "title": "Can&#39;t recolor edges in vtk", "body": "<p>Answering my own question:</p>\n\n<p>I found out that the data produced by <code>vtkPolyDataMapper</code> when being fed a <code>vtkExtractEdges</code> has scalar values (based on the incident cells I suppose) and the lines are colored by a lookup table, not as a single color.<br>\nTherefore, all I needed to do was to give the mapper a mono-colored lookup table. The new code is now</p>\n\n<pre><code>    edges_mapper-&gt;SetInputConnection(edges-&gt;GetOutputPort());\n    edges_mapper-&gt;SetLookupTable(build_mono_table(1.,1.,1.));\n    edges_actor-&gt;SetMapper(edges_mapper);\n    renderer-&gt;AddActor(edges_actor);\n</code></pre>\n\n<p>with a helper function </p>\n\n<pre><code>inline vtkSmartPointer&lt;vtkLookupTable&gt; build_mono_table(double r, double g, double b)\n{\n    vtkSmartPointer&lt;vtkLookupTable&gt; table = vtkSmartPointer&lt;vtkLookupTable&gt;::New();\n    table-&gt;SetNumberOfTableValues(1);\n    table-&gt;Build();\n    table-&gt;SetTableValue(0, r, g, b);\n    return table;\n}\n</code></pre>\n\n<p>There seems to be no need to specify the scalar range.</p>\n"}], "owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "accepted_answer_id": 58524516, "answer_count": 1, "score": 0, "last_activity_date": 1571839305, "creation_date": 1571835120, "last_edit_date": 1571838345, "question_id": 58523300, "link": "https://stackoverflow.com/questions/58523300/cant-recolor-edges-in-vtk", "title": "Can&#39;t recolor edges in vtk", "body": "<p>I have an unstructured grid in VTK which I want to render along with it's edge lines. I am able to do this using <code>vtkExtractEdges</code>, however, the edge lines are always colored blue, no matter what I do.<br>\nI have working code which draws the outlines of the grid perfectly fine in my desired color, and I tried using essentially the same code for edges:</p>\n\n<pre><code>vtkSmartPointer&lt;vtkOutlineFilter&gt; outline = vtkSmartPointer&lt;vtkOutlineFilter&gt;::New();\nvtkSmartPointer&lt;vtkPolyDataMapper&gt; outline_mapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();\nvtkSmartPointer&lt;vtkActor&gt; outline_actor = vtkSmartPointer&lt;vtkActor&gt;::New();\n\noutline-&gt;SetInput(grid);\noutline_mapper-&gt;SetInputConnection(outline-&gt;GetOutputPort());\noutline_actor-&gt;SetMapper(outline_mapper);\noutline_actor-&gt;GetProperty()-&gt;SetColor(1.,1.,1.); // &lt;&lt; works just fine here\nrenderer-&gt;AddActor(outline_actor);\n\nvtkSmartPointer&lt;vtkExtractEdges&gt; edges = vtkSmartPointer&lt;vtkExtractEdges&gt;::New();\nvtkSmartPointer&lt;vtkPolyDataMapper&gt; edges_mapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();\nvtkSmartPointer&lt;vtkActor&gt; edges_actor = vtkSmartPointer&lt;vtkActor&gt;::New();\n\nedges_mapper-&gt;SetInputConnection(edges-&gt;GetOutputPort());\nedges_actor-&gt;SetMapper(edges_mapper);\nedges_actor-&gt;GetProperty()-&gt;SetColor(1.,1.,1.); // &lt;&lt; still stays blue here\nrenderer-&gt;AddActor(edges_actor);\n</code></pre>\n\n<p>This puzzles, especially since the class I call <code>SetColor</code> on is <code>vtkPolyDataMapper</code>, and after this, the code is identical for both cases.</p>\n\n<p>Has anybody else experienced this problem and knows a solution?<br>\nSo far, I found this: <a href=\"https://public.kitware.com/pipermail/vtkusers/1999-September/087677.html\" rel=\"nofollow noreferrer\">https://public.kitware.com/pipermail/vtkusers/1999-September/087677.html</a>, in which somebody proposed solving it by drawing tubes, but I hope for a clean solution instead.</p>\n\n<p>The VTK version I work with is 5.6 and I can't use a different one for reasons of compatibility.  </p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 3, "creation_date": 1571834791, "post_id": 58523155, "comment_id": 103371384, "body": "Function template partial specializations do not exist. You will need to use SFINAE in one form or another to achieve similar results. I am not exactly well versed in that right now, but <code>std::enable_if&lt;std::is_same_v&lt;T1, T2&gt;&gt;</code> is a starting point (syntactic/semantic issues aside in this)."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 1279674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65efe3355478c8db96bc82f22fd3aa20?s=128&d=identicon&r=PG", "display_name": "Nathaniel Tagg", "link": "https://stackoverflow.com/users/1279674/nathaniel-tagg"}, "edited": false, "score": 0, "creation_date": 1571861371, "post_id": 58523249, "comment_id": 103384434, "body": "This won&#39;t work because I actually need to execute code in the other case, code which cannot be instantiated. I need to return false if the same, but do something if true, and the &#39;do something&#39; won&#39;t compile."}, {"owner": {"reputation": 2978, "user_id": 1722660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3uBU0.jpg?s=128&g=1", "display_name": "firda", "link": "https://stackoverflow.com/users/1722660/firda"}, "reply_to_user": {"reputation": 191, "user_id": 1279674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65efe3355478c8db96bc82f22fd3aa20?s=128&d=identicon&r=PG", "display_name": "Nathaniel Tagg", "link": "https://stackoverflow.com/users/1279674/nathaniel-tagg"}, "edited": false, "score": 1, "creation_date": 1571900267, "post_id": 58523249, "comment_id": 103394287, "body": "@NathanielTagg: <i>Normal If</i> won&#39;t work, but <i>Constexpr If</i> does, because it <b>discards</b> the branch not executed: <a href=\"https://godbolt.org/z/GZvqYZ\" rel=\"nofollow noreferrer\">godbolt.org/z/GZvqYZ</a> (compiles and returns 2 despite the fact that thing&lt;bool,bool&gt; cannot be instantiated - the else is discarded in that case)"}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": false, "score": 8, "last_activity_date": 1571835375, "last_edit_date": 1571835375, "creation_date": 1571834925, "answer_id": 58523249, "question_id": 58523155, "link": "https://stackoverflow.com/questions/58523155/is-there-a-way-to-override-a-template-method-matching-only-when-two-template-par/58523249#58523249", "title": "Is there a way to override a template method matching only when two template parameters are the same?", "body": "<p>Your attempt does not compile because partial function template specialization (<code>template&lt;typename A&gt; bool foo&lt;A,A&gt;()</code>) is not allowed. The usual workaround is to use overloading, as template parameters often occur as function parameters. In your case (no function parameters), if C++17 is available, you can use <code>if constexpr</code>  together with the <code>&lt;type_traits&gt;</code> header, e.g.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename A, typename B&gt; bool foo()\n{\n   if constexpr (std::is_same_v&lt;A, B&gt;)\n      return true;\n   else\n      return false;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "edited": false, "score": 3, "creation_date": 1571836846, "post_id": 58523434, "comment_id": 103372672, "body": "I usually try to avoid the word &quot;simple&quot; together with SFINAE, but anyway, +1 :)"}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": false, "score": 8, "last_activity_date": 1571835559, "creation_date": 1571835559, "answer_id": 58523434, "question_id": 58523155, "link": "https://stackoverflow.com/questions/58523155/is-there-a-way-to-override-a-template-method-matching-only-when-two-template-par/58523434#58523434", "title": "Is there a way to override a template method matching only when two template parameters are the same?", "body": "<p>If you don't have access to C++17 and <code>if constexpr</code>, you can simply use standard SFINAE:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename A, typename B, std::enable_if_t&lt;!std::is_same&lt;A, B&gt;{}, int&gt; = 0&gt; \nbool foo() { return true; }\n\ntemplate &lt;typename A, typename B, std::enable_if_t&lt;std::is_same&lt;A, B&gt;{}, int&gt; = 0&gt; \nbool foo() { return false; }\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 1279674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65efe3355478c8db96bc82f22fd3aa20?s=128&d=identicon&r=PG", "display_name": "Nathaniel Tagg", "link": "https://stackoverflow.com/users/1279674/nathaniel-tagg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1571862151, "creation_date": 1571834655, "last_edit_date": 1571862151, "question_id": 58523155, "link": "https://stackoverflow.com/questions/58523155/is-there-a-way-to-override-a-template-method-matching-only-when-two-template-par", "title": "Is there a way to override a template method matching only when two template parameters are the same?", "body": "<p>I have a function call:</p>\n\n<pre><code>template &lt;typename A, typename B&gt; bool foo();\n</code></pre>\n\n<p>I would like to override it so that any calls where A and B are the same type go to a special function override.  I'm thinking of something like:</p>\n\n<pre><code>template&lt;typename A&gt;\n    bool foo&lt;A,A&gt;() \n      { return false; }\n</code></pre>\n\n<p>However, this code does not compile, and I can't find any code that might work.  My recourse so far has been to explicitly override all possible types:</p>\n\n<pre><code>template&lt;&gt; bool foo&lt;class1,class1&gt;() { return false; }\ntemplate&lt;&gt; bool foo&lt;class2,class2&gt;() { return false; }\ntemplate&lt;&gt; bool foo&lt;class3,class3&gt;() { return false; }\n</code></pre>\n\n<p>but this is inelegant and requires maintenance when new classes are brought in.</p>\n\n<p>Thanks for any thoughts.</p>\n\n<p>Edit:\nTo be clear, when A is not the same type as B, I have code like this:</p>\n\n<pre><code> template&lt;typename A, typename B&gt; \n bool foo() {\n    Thing&lt;A,B&gt; instance;  // Thing&lt;A,A&gt; is never legal and will not compile\n }\n</code></pre>\n\n<p>(The code gets called because I'm trying all possible combinations of B against A and vice-versa. I was hoping to deal with this easily with the compiler, rather than implement if-then tests on every B to make sure it doesn't match A. Maybe there's a better way of doing this, but I thought this design would be elegant.)</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1571834509, "post_id": 58523102, "comment_id": 103371239, "body": "Sure, why not? As long as <code>x[3]</code> is an integer."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 0, "creation_date": 1571834514, "post_id": 58523102, "comment_id": 103371241, "body": "Yes, it is possible."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1571834518, "post_id": 58523102, "comment_id": 103371245, "body": "Yes, you can do that. But be aware that if you do it incorrectly you might get garbage or worse."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1571834539, "post_id": 58523102, "comment_id": 103371257, "body": "The index used for an array can be <i>any</i> valid expression that generates a valid index."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1571836794, "last_edit_date": 1571836794, "creation_date": 1571834593, "answer_id": 58523135, "question_id": 58523102, "link": "https://stackoverflow.com/questions/58523102/question-on-refering-to-a-position-of-an-array/58523135#58523135", "title": "Question on refering to a position of an array", "body": "<p>So long as <code>x[3]</code> is an integral type or is implicitly convertible to an integral type, the code is syntactically valid. It's your job though to check if <code>3</code> is a valid index of the array <code>x</code>, and <code>x[3]</code> a valid index of <code>pos</code>.</p>\n\n<p>For example, <code>pos[1.0]</code> is not allowed, as <code>1.0</code> is a <code>double</code>. (Annoyingly you can use a <code>double</code> type in the overloaded <code>[]</code> operator on <code>std::vector</code>.)</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 0, "last_activity_date": 1571834920, "creation_date": 1571834920, "answer_id": 58523247, "question_id": 58523102, "link": "https://stackoverflow.com/questions/58523102/question-on-refering-to-a-position-of-an-array/58523247#58523247", "title": "Question on refering to a position of an array", "body": "<p>Absolutely.</p>\n\n<p>Provided <code>x</code> is declared something like this:</p>\n\n<pre><code>int x[size];\nunsigned int x1[size];\nsize_t x2[size];\n</code></pre>\n\n<p>Any of these should work. However, something like this will not:</p>\n\n<pre><code>std::string x3[size];\n</code></pre>\n\n<p><code>x3</code> is an array of strings. C arrays don't have non-integer access. But any integer type should work fine.</p>\n\n<hr>\n\n<p>P. S. If you ever want to use <code>std::string</code>s as away to access an array, you will want an <a href=\"https://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\"><code>std::map</code></a> instead.</p>\n"}], "owner": {"reputation": 11, "user_id": 12263185, "user_type": "registered", "profile_image": "https://graph.facebook.com/2484930671827080/picture?type=large", "display_name": "Victor Rom&#225;rio", "link": "https://stackoverflow.com/users/12263185/victor-rom%c3%a1rio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571836794, "creation_date": 1571834462, "last_edit_date": 1571834665, "question_id": 58523102, "link": "https://stackoverflow.com/questions/58523102/question-on-refering-to-a-position-of-an-array", "title": "Question on refering to a position of an array", "body": "<p>I am starting to learn c++ language and i would like to know if it is possible to refer to a position of an array using a position of another array.\nexample:</p>\n\n<pre><code>pos[x[3]] = 0;\n</code></pre>\n"}, {"tags": ["c++", "class", "oop", "complex-numbers"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1571834488, "post_id": 58523083, "comment_id": 103371231, "body": "Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> .  We need to see what you are compiling."}, {"owner": {"reputation": 369, "user_id": 3476183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a7dda5864aa1b7c18ec44452576bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Albjenow", "link": "https://stackoverflow.com/users/3476183/albjenow"}, "edited": false, "score": 2, "creation_date": 1571834522, "post_id": 58523083, "comment_id": 103371248, "body": "Constructors for members can only be called in the initializer list of the containing constructor, not in the function body."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1571835109, "creation_date": 1571835109, "answer_id": 58523297, "question_id": 58523083, "link": "https://stackoverflow.com/questions/58523083/complex-initialization-in-class-in-c-type-complexdouble-does-not-provide-a/58523297#58523297", "title": "Complex initialization in class in c++ type &#39;complex&lt;double&gt;&#39; does not provide a call operator", "body": "<p>Member variables are constructed and initialized before the constructor body is called.</p>\n\n<p>If you want to initialize a member variable as part of the object initialization, you need to do it before the constructor body is called, and for that you need to use a <em>constructor initializer list</em>.</p>\n\n<p>Something like</p>\n\n<pre><code>complex_class(double real, double img)\n    : mycomplex(real, img)   // Initialize the mycomplex object through its constructor\n{\n    // Empty, as mycomplex already is initialized\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7846724, "user_type": "registered", "profile_image": "https://graph.facebook.com/1831134710542571/picture?type=large", "display_name": "Tae", "link": "https://stackoverflow.com/users/7846724/tae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571835109, "creation_date": 1571834411, "last_edit_date": 1571834497, "question_id": 58523083, "link": "https://stackoverflow.com/questions/58523083/complex-initialization-in-class-in-c-type-complexdouble-does-not-provide-a", "title": "Complex initialization in class in c++ type &#39;complex&lt;double&gt;&#39; does not provide a call operator", "body": "<p>Hi I currently tried to initialize a complex number within a class</p>\n\n<pre><code>class complex_class{\n\n    public:\n\n        complex&lt;double&gt; mycomplex;\n\n        complex_class(double real, double img){\n\n            //mycomplex(real, img);\n            mycomplex.real(real);\n            mycomplex.imag(img);\n\n        }\n\n};\n</code></pre>\n\n<p>when I tried to assign some values directly, an error message appeared</p>\n\n<p>error: type 'complex' does not provide a call operator\n            mycomplex(real, img);</p>\n\n<p>it works just only with functions real and imag</p>\n\n<p>So I would like to ask u guys what I did so wrong and what I didn't understood.</p>\n\n<p>thanks for reading and helping</p>\n"}, {"tags": ["c++", "qt", "qt-creator", "yolo", "darknet"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1571851842, "post_id": 58522823, "comment_id": 103380555, "body": "how your .pro...."}, {"owner": {"reputation": 107, "user_id": 5208522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7359e4278c736e407eb4faac61a23ba0?s=128&d=identicon&r=PG&f=1", "display_name": "naser piltan", "link": "https://stackoverflow.com/users/5208522/naser-piltan"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1571894327, "post_id": 58522823, "comment_id": 103392096, "body": "Thank you @eyllanesc for your answer. My .pro is some thing like this : TEMPLATE = app CONFIG += console CONFIG -= app_bundle CONFIG -= qt  And some added .h and .c files. Can you tell me that what is my mistake?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1571894449, "post_id": 58522823, "comment_id": 103392134, "body": "edit your question and add it there since as you see the comments are not the right places to place code"}, {"owner": {"reputation": 107, "user_id": 5208522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7359e4278c736e407eb4faac61a23ba0?s=128&d=identicon&r=PG&f=1", "display_name": "naser piltan", "link": "https://stackoverflow.com/users/5208522/naser-piltan"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1571895257, "post_id": 58522823, "comment_id": 103392364, "body": "Thank you @eyllanesc .I edited it rightow."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1571895560, "post_id": 58522823, "comment_id": 103392463, "body": "change <code>network net = ...</code> to <code>network *net = ...</code>"}, {"owner": {"reputation": 107, "user_id": 5208522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7359e4278c736e407eb4faac61a23ba0?s=128&d=identicon&r=PG&f=1", "display_name": "naser piltan", "link": "https://stackoverflow.com/users/5208522/naser-piltan"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1571897844, "post_id": 58522823, "comment_id": 103393213, "body": "@eyllanesc should i do this for all ofmy  errors??But why this code can be compiled with <b>make</b> command without problem?"}], "owner": {"reputation": 107, "user_id": 5208522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7359e4278c736e407eb4faac61a23ba0?s=128&d=identicon&r=PG&f=1", "display_name": "naser piltan", "link": "https://stackoverflow.com/users/5208522/naser-piltan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1571895223, "creation_date": 1571833462, "last_edit_date": 1571895223, "question_id": 58522823, "link": "https://stackoverflow.com/questions/58522823/compiling-the-yolo-darknet-source-code-in-qt", "title": "compiling the yolo darknet source code in qt", "body": "<p>I want to compile darknet yolov3 source code in Qt to train a costum network.</p>\n\n<p>I downloaded the official sources code from <a href=\"https://pjreddie.com/darknet/yolo/\" rel=\"nofollow noreferrer\">https://pjreddie.com/darknet/yolo/</a>.\nI can compile darknet by <strong>make</strong> command on my ubuntu  and detect objects successsfully on <strong>CPU</strong>.</p>\n\n<p>Now I want to compile darknet source code in Qt.</p>\n\n<p>I added all the .c and .h files in the src and examples and include folders of darknet in my Qt project. But when i run my project , i have some errors like this :</p>\n\n<p><a href=\"https://i.stack.imgur.com/6r6HM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6r6HM.png\" alt=\"This picture shoes my problem\"></a></p>\n\n<p>This is my project .pro file :</p>\n\n<p><a href=\"https://i.stack.imgur.com/0za7F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0za7F.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't know why the darknet can be compiled on terminal but can not be compiled in Qt.</p>\n\n<p>I searched a lot but there is no same problem and solutions.\nWhat is my problem?  </p>\n"}, {"tags": ["c++", "qt", "qprocess"], "comments": [{"owner": {"reputation": 387, "user_id": 149897, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/15e816f94a654e0417c5a54559528b6a?s=128&d=identicon&r=PG", "display_name": "uni", "link": "https://stackoverflow.com/users/149897/uni"}, "edited": false, "score": 1, "creation_date": 1571907800, "post_id": 58522755, "comment_id": 103397920, "body": "QProcess::ExitStatus 0 means that The process exited normally.  May be executable is reacting to arguments with exit code 1. Try to print all arguments and run executable with them manually."}, {"owner": {"reputation": 1623, "user_id": 4628115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3a6c65cdd121a35b1dcf348c6b0c9b6?s=128&d=identicon&r=PG", "display_name": "CybeX", "link": "https://stackoverflow.com/users/4628115/cybex"}, "reply_to_user": {"reputation": 387, "user_id": 149897, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/15e816f94a654e0417c5a54559528b6a?s=128&d=identicon&r=PG", "display_name": "uni", "link": "https://stackoverflow.com/users/149897/uni"}, "edited": false, "score": 0, "creation_date": 1572032350, "post_id": 58522755, "comment_id": 103448107, "body": "@uni got it resolved, see posted answer."}], "answers": [{"tags": [], "owner": {"reputation": 1623, "user_id": 4628115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3a6c65cdd121a35b1dcf348c6b0c9b6?s=128&d=identicon&r=PG", "display_name": "CybeX", "link": "https://stackoverflow.com/users/4628115/cybex"}, "is_accepted": true, "score": 1, "last_activity_date": 1572032322, "creation_date": 1572032322, "answer_id": 58564754, "question_id": 58522755, "link": "https://stackoverflow.com/questions/58522755/run-custom-executable-with-qprocess-exiting-immediately-with-exit-code-1/58564754#58564754", "title": "Run custom executable with QProcess exiting immediately with exit code 1", "body": "<p><em>Thought of deleting the question but incase it could be of use, I will post an answer which may help someone in future.</em></p>\n\n<p>The problem was not in the calling application code or the called application's code (i.e. the <code>MaintenanceTool</code> as shown above). Instead, it was a problem with the <code>MaintenanceTool</code> privileges. </p>\n\n<p>So, my <code>MaintenanceTool</code> requires <strong>administrative privileges</strong> to execute. My calling application does not run with Administrative proviledges, but my <code>MaintenanceTool</code> does. For this, I was using <a href=\"https://forum.qt.io/topic/64378/call-another-application-with-administrator-priviliges\" rel=\"nofollow noreferrer\">QProcess</a> to facilitate launching the <code>MaintenanceTool</code> application. </p>\n\n<p><strong><em>Note</strong>: To gain administrative priviledges, I used <a href=\"https://forum.qt.io/topic/64378/call-another-application-with-administrator-priviliges\" rel=\"nofollow noreferrer\">this</a> as inspiration to get mine working.</em> </p>\n\n<p>I tried combinations of the following with <code>QProcess</code>, <strong>note that none of these worked for running an app as admin</strong>!</p>\n\n<pre><code>QProcess::startDeteched(\"cmd.exe\", QStringList() &lt;&lt; \"/C\" &lt;&lt; \"/path/to/mtool.exe -arg1 -arg2\");\n\nQProcess::startDeteched(\"cmd.exe\", QStringList() &lt;&lt; \"/C\" &lt;&lt; \"/path/to/mtool.exe -arg1 -arg2\");\n\nQProcess::startDeteched(\"start.exe\", QStringList() &lt;&lt; \"\" &lt;&lt; \"/path/to/mtool.exe -arg1 -arg2\");\n\nQProcess::startDeteched(\"C:\\Windows\\System32\\cmd.exe\", QStringList() &lt;&lt; \"/C\" &lt;&lt; \"/path/to/mtool.exe -arg1 -arg2\");\n\nQProcess::startDeteched(\"C:\\Windows\\System32\\cmd.exe\", QStringList() &lt;&lt; \"/C\" &lt;&lt; \"/path/to/mtool.exe -arg1 -arg2\");\n\nQProcess::startDeteched(\"/path/to/mtool.exe\", QStringList() &lt;&lt; \"\" &lt;&lt; \"-arg1\" &lt;&lt; \"-arg2\");\n</code></pre>\n\n<p>I also created a <code>QProcess *p</code>, added <code>readStandardOutput()</code>, etc (as shown in question) which provide <code>Exit Code 0</code>. Further, I also tried printing out all the commands to the application, and invoking them manually as params when debugging the <code>MaintenaceTool</code> application. Running it with <a href=\"https://doc.qt.io/qtcreator/creator-run-settings.html#specifying-run-settings-for-desktop-device-types\" rel=\"nofollow noreferrer\">manual arguments</a> had the <code>MaintenanceTool</code> running (using Qt debug mode) and working as expected which had me quite confused (but did not show the admin privileges dialog popup - didn't notice at the time).</p>\n\n<p>Looking into the <code>QProcess::startDetached()</code> actual Qt code, I finally came across a message <code>error string</code> of sorts (which was never sent as an actual output or <code>errorString</code>) but was stored in a variable. Essentially, it mentioned that it was unable to start an application that required Administrator privileges. Thus, I searched and came across the <a href=\"https://docs.microsoft.com/en-gb/windows/win32/shell/launch\" rel=\"nofollow noreferrer\">ShellExecuteEx</a> example found <a href=\"https://forum.qt.io/topic/64378/call-another-application-with-administrator-priviliges/12\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p><strong>My Implementation</strong> of <code>ShellExecuteEx</code></p>\n\n<blockquote>\n  <p>QString args = QString(\"\\\"%1\\\" \\\"%2\\\" \\\"%3\\\" \\\"%4\\\" \\\"%5\\\"\").arg(pid).arg(appName).arg(logLocation).arg(newFilePath).arg(oldFilePath);</p>\n  \n  <p>LPCWSTR file = reinterpret_cast(updatorLocation.utf16());</p>\n  \n  <p>LPCWSTR arg = reinterpret_cast(args.utf16());</p>\n  \n  <p>SHELLEXECUTEINFO ShExecInfo = {0};</p>\n  \n  <p>ShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);</p>\n  \n  <p>ShExecInfo.fMask = SEE_MASK_NOCLOSEPROCESS;</p>\n  \n  <p>ShExecInfo.hwnd = NULL;</p>\n  \n  <p>ShExecInfo.lpVerb =  L\"runas\";</p>\n  \n  <p>ShExecInfo.lpFile = file;</p>\n  \n  <p>ShExecInfo.lpParameters = arg;</p>\n  \n  <p>ShExecInfo.lpDirectory = NULL;</p>\n  \n  <p>ShExecInfo.nShow = SW_SHOW;</p>\n  \n  <p>ShExecInfo.hInstApp = NULL;</p>\n  \n  <p>ShellExecuteEx(&amp;ShExecInfo);</p>\n</blockquote>\n\n<p>Using the <code>ShellExecuteEx</code> solved my problem and allowed the application to run without a problem, with <code>runas</code> admin dialog popping up when the application is launched.</p>\n\n<p><em>I hope this helps someone!</em></p>\n"}], "owner": {"reputation": 1623, "user_id": 4628115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3a6c65cdd121a35b1dcf348c6b0c9b6?s=128&d=identicon&r=PG", "display_name": "CybeX", "link": "https://stackoverflow.com/users/4628115/cybex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 58564754, "answer_count": 1, "score": 1, "last_activity_date": 1572032322, "creation_date": 1571833254, "last_edit_date": 1571836048, "question_id": 58522755, "link": "https://stackoverflow.com/questions/58522755/run-custom-executable-with-qprocess-exiting-immediately-with-exit-code-1", "title": "Run custom executable with QProcess exiting immediately with exit code 1", "body": "<p>I need to run a custom executable in my application. I have the following code to run my process:</p>\n\n<pre><code>QFileInfo fiUpdator(updatorLocation);\nif(!fiUpdator.isExecutable()) {\n    qWarning() &lt;&lt; \"Maintenance Tool is not an executable\";\n    return;\n}\n\nqDebug() &lt;&lt; \"Starting updator app\";\nQString pid = QString::number(qApp-&gt;applicationPid());\nQString appName = qApp-&gt;applicationName();\n\nQProcess *p = new QProcess;\n\nconnect(p, &amp;QProcess::started, this, [this](){\n    qDebug() &lt;&lt; \"Updator Process Started\";\n});\n\nconnect(p, &amp;QProcess::errorOccurred, this, [this](QProcess::ProcessError error){\n    qDebug() &lt;&lt; \"Error Occurred : \" &lt;&lt; error;\n});\n\nconnect(p, QOverload&lt;int, QProcess::ExitStatus&gt;::of(&amp;QProcess::finished), this, [this, p](){\n    qDebug() &lt;&lt; \"Finished Updator Process\";\n    QString str(\"Exit [\" + QString::number(p-&gt;exitCode()) + \"] \" + p-&gt;exitStatus());\n    qDebug() &lt;&lt; str;\n});\n\nconnect(p, &amp;QProcess::readyReadStandardError, this, [this, p](){\n    QByteArray ba = p-&gt;readAllStandardError();\n    qDebug() &lt;&lt; \"Error:\\n\" &lt;&lt; QString::fromUtf8(ba);\n});\n\nconnect(p, &amp;QProcess::readyReadStandardOutput, this, [this, p](){\n    QByteArray ba = p-&gt;readAllStandardOutput();\n    qDebug() &lt;&lt; \"Output:\\n\" &lt;&lt; QString::fromUtf8(ba);\n});\n\nconnect(p, &amp;QProcess::stateChanged, this, [this](QProcess::ProcessState newState){\n    qDebug() &lt;&lt; \"State Changed : \" &lt;&lt; newState;\n});\n\np-&gt;start(\n            updatorLocation,\n            QStringList()\n                &lt;&lt; pid\n                &lt;&lt; appName\n                &lt;&lt; newFilePath\n                &lt;&lt; oldFilePath);\n</code></pre>\n\n<p>The application (a qt console application) runs as expected using</p>\n\n<pre><code>start \"\" \"C:\\Path\\To\\AwesomeConsoleApp.exe\" \n</code></pre>\n\n<p>which briefly opens a new CMD window with the coded output, alternatively opening <code>cmd.exe</code> and running </p>\n\n<pre><code>C:\\Path\\To\\AwesomeConsoleApp.exe\n</code></pre>\n\n<p>displays the output to <code>stdout</code> in the same <code>cmd</code> window.</p>\n\n<p>The process signal fire as follows:</p>\n\n<ol>\n<li><code>stateChanged Starting</code></li>\n<li><code>stateChanged Running</code></li>\n<li><code>QProcess::started</code></li>\n<li><code>stateChanged NotRunning</code></li>\n<li><code>QProcess::finished</code> : output <code>Exit[1] 0</code></li>\n</ol>\n\n<p>I tried replacing the <code>.exe</code> to launch with <code>C:\\Windows\\System32\\calc.exe</code> and it launched with no problem. </p>\n\n<p>Does this mean there is something wrong with my custom executable?</p>\n"}, {"tags": ["c++", "c++11", "eigen3"], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 4, "last_activity_date": 1571834818, "creation_date": 1571834818, "answer_id": 58523214, "question_id": 58522426, "link": "https://stackoverflow.com/questions/58522426/how-to-fix-non-type-template-argument-is-not-a-constant-expression-in-eigen3/58523214#58523214", "title": "How to fix &#39;non-type template argument is not a constant expression&#39; in eigen3?", "body": "<p>You can't. Template arguments must be compile-time constants.</p>\n\n<p><code>const int SIZE_ = 2;</code> is a compile-time constant, there is no possible way <code>SIZE_</code> can ever have a value different from 2 here. The compiler knows this and can safely build the type <code>Eigen::Matrix&lt;float, 2, 2&gt;</code>.</p>\n\n<p><code>const int SIZE_ = someNonConstantExpression;</code> is not a compile-time constant. It cannot be used in template arguments.</p>\n\n<p>You cannot trick the compiler into accepting run-time values where compile-time values are required, such as in templates. However, Eigen has dynamic matrices (where the size need not be known at compile-time) that you could use instead.</p>\n"}, {"comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 1, "creation_date": 1571846798, "post_id": 58526467, "comment_id": 103378270, "body": "I would really suggest writing <code>constexpr int SIZE_ = ...</code> so you immediately get the error (in case <code>getSizeOfMatrix()</code> was not <code>constexpr</code>) and not only when trying to declare <code>test</code>."}], "tags": [], "owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "is_accepted": false, "score": 2, "last_activity_date": 1571844964, "creation_date": 1571844964, "answer_id": 58526467, "question_id": 58522426, "link": "https://stackoverflow.com/questions/58522426/how-to-fix-non-type-template-argument-is-not-a-constant-expression-in-eigen3/58526467#58526467", "title": "How to fix &#39;non-type template argument is not a constant expression&#39; in eigen3?", "body": "<p>I think @MaxLanghof has cleared the problem, but if you still want the value for the Matrix size to come from another method (but still at compile time), you can use a <code>constexpr</code> method like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Eigen/Dense&gt;\n\nusing namespace std;\n\nconstexpr int getSizeOfMatrix()\n{\n   return 2*3;\n}\n\nint main()\n{\n  const int SIZE_ = getSizeOfMatrix();\n  Eigen::Matrix&lt;float, SIZE_, SIZE_&gt; test;\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 12237297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8237504884798e6f502ee329e5046666?s=128&d=identicon&r=PG&f=1", "display_name": "L&#233;o Buchenel", "link": "https://stackoverflow.com/users/12237297/l%c3%a9o-buchenel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1253, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1571852581, "creation_date": 1571832114, "last_edit_date": 1571852581, "question_id": 58522426, "link": "https://stackoverflow.com/questions/58522426/how-to-fix-non-type-template-argument-is-not-a-constant-expression-in-eigen3", "title": "How to fix &#39;non-type template argument is not a constant expression&#39; in eigen3?", "body": "<p>I am still new to the Eigen library and C++. I am testing some code and I do not get why this </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Eigen/Dense&gt;\n\nusing namespace std;\n\nint main()\n{\n  int a = 2;\n  const int SIZE_ = a;\n  Eigen::Matrix&lt;float, SIZE_, SIZE_&gt; test;\n  return 0;\n}\n</code></pre>\n\n<p>does not compile, while this </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Eigen/Dense&gt;\n\nusing namespace std;\n\nint main()\n{\n  const int SIZE_ = 2;\n  Eigen::Matrix&lt;float, SIZE_, SIZE_&gt; test;\n  return 0;\n}\n</code></pre>\n\n<p>works perfectly fine. How could I change the first code so that it works (i.e. SIZE_ would be initiated by a variable that potentially could have a different value).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1571832154, "post_id": 58522394, "comment_id": 103369929, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/if\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/if</a> &quot;If statement with initializer&quot; since C++17. Though the code you have there does look like a bug."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1571832207, "post_id": 58522394, "comment_id": 103369965, "body": "@Mat Even with C++17, <code>QThread::msleep(250);</code> doesn&#39;t look like a valid declaration."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1571832235, "post_id": 58522394, "comment_id": 103369987, "body": "I think it&#39;s an <i>&quot;expression statement&quot;</i>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571832244, "post_id": 58522394, "comment_id": 103369993, "body": "That code uses a new C++17 feature that allows an &quot;init expression&quot;, but otherwise doesn&#39;t make any sense. You could just replace that statement with a plain <code>QThread::msleep(250);</code>."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1571832313, "post_id": 58522394, "comment_id": 103370025, "body": "Wait, C++17 <code>if</code> can have an arbitrary statement in it, not only a declaration? Huh."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1571832357, "post_id": 58522394, "comment_id": 103370054, "body": "@HolyBlackCat From the cppreference site, it seems it could be a declaration <i>or</i> any valid expression statement."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571832520, "post_id": 58522394, "comment_id": 103370132, "body": "Just <i>guessing</i> here, but maybe the author misunderstood how the &quot;init expression&quot; works, and though that it would be executed conditionally depending on the actual condition. It doesn&#39;t work that way. What I think was intended is <code>if (i &lt; 4) QThread::msleep(250);</code> Which <i>still</i> doesn&#39;t make sense since the condition will always be true inside the loop."}, {"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1571832567, "post_id": 58522394, "comment_id": 103370160, "body": "@HolyBlackCat + some programmer dude:  \u2026. which means, unless I am mistaken, <code>class blah { int blah_blah; } i;</code> might be valid inside an <code>if()</code>."}, {"owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571832603, "post_id": 58522394, "comment_id": 103370189, "body": "@Someprogrammerdude they probably wanted it as <code>if (i &lt; 3) QThread::msleep(250);</code>, in order to avoid the &quot;trailing delay&quot; as suggested by OP."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "edited": false, "score": 0, "creation_date": 1571832664, "post_id": 58522394, "comment_id": 103370234, "body": "@tevemadar Yeah I guess so. So a misunderstanding <i>and</i> a typo."}, {"owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "edited": false, "score": 1, "creation_date": 1571832748, "post_id": 58522394, "comment_id": 103370286, "body": "@DEKKER: unless it is a very useful and unique library otherwise, you may want to consider checking for alternatives. Where this kind of ultra-modernized bug occurrs, there can be various others."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1571832759, "post_id": 58522394, "comment_id": 103370294, "body": "@TanveerBadar Yes that&#39;s a valid simple declaration."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1571834151, "post_id": 58522394, "comment_id": 103371055, "body": "I think a <code>perl</code> programmer has been in your code: <code>QThread::msleep(250) if(i &lt; 4);</code> is perfectly logical in <code>perl</code>-land."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 8, "last_activity_date": 1571832693, "last_edit_date": 1571832693, "creation_date": 1571832267, "answer_id": 58522466, "question_id": 58522394, "link": "https://stackoverflow.com/questions/58522394/strange-if-statement-syntax-with-no-body-in-a-for-loop/58522466#58522466", "title": "Strange if statement syntax with no body in a for loop", "body": "<p>From <a href=\"https://en.cppreference.com/w/cpp/language/if\" rel=\"nofollow noreferrer\">if statement doc</a>:</p>\n\n<pre><code>    if constexpr /*optional*/ ( init-statement /*optional*/ condition ) statement-true\n</code></pre>\n\n<p>Are from C++17.</p>\n\n<p>So indeed,</p>\n\n<pre><code>if(QThread::msleep(250); i &lt; 4);\n</code></pre>\n\n<p>is valid, but mostly pointless as no action is taken. so it is equivalent to</p>\n\n<pre><code>QThread::msleep(250);\n</code></pre>\n\n<p>I think that code should simply be, to avoid last sleep:</p>\n\n<pre><code>if (i &lt; 3) QThread::msleep(250);\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 58522466, "answer_count": 1, "score": 1, "last_activity_date": 1571832693, "creation_date": 1571831985, "question_id": 58522394, "link": "https://stackoverflow.com/questions/58522394/strange-if-statement-syntax-with-no-body-in-a-for-loop", "title": "Strange if statement syntax with no body in a for loop", "body": "<p>I am working on a thirdparty API that has the following code somewhere in it:</p>\n\n<pre><code>// Toggle LEDs 4 time to show we are online\nfor(int i = 0; i &lt; 4; i++) {\n    camManager.setCameraGpioOutput(cameraRight, IO_GPIO_1, 1);\n    QThread::msleep(250);\n    camManager.setCameraGpioOutput(cameraRight, IO_GPIO_1, 0);\n    if(QThread::msleep(250); i &lt; 4);\n}\n</code></pre>\n\n<p>is that IF condition valid? I assume they wanted to omit the delay on the last loop but what sorcery is this?</p>\n"}, {"tags": ["c++", "class", "vector", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1571829949, "post_id": 58521740, "comment_id": 103368670, "body": "please include the error message, it should have some good hints on what you are doing wrong"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1571829999, "post_id": 58521740, "comment_id": 103368690, "body": "Your current <code>operator&gt;&gt;</code> function for <code>Book</code> have two major flaws: First it should not print any output, only read input. And secondly, it should read from the stream that is provided as the argument, not from <code>cin</code> (how else could you read from e.g. a file?)."}, {"owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1571830002, "post_id": 58521740, "comment_id": 103368693, "body": "@formerlyknownas_463035818 yah lets do that."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1571830004, "post_id": 58521740, "comment_id": 103368695, "body": "btw using consistent intendation helps alot for readability"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571830122, "post_id": 58521740, "comment_id": 103368749, "body": "And instead of coding an <code>operator&gt;&gt;</code> function for <code>std::vector&lt;Book&gt;</code>, use <a href=\"https://en.cppreference.com/w/cpp/iterator/istream_iterator\" rel=\"nofollow noreferrer\"><code>std::istream_iterator</code></a> to initialize the vector (or <i>any</i> suitable container). You can use the existing <code>Book</code> stream extract operator for that."}, {"owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571830232, "post_id": 58521740, "comment_id": 103368818, "body": "@Someprogrammerdude i have corrected that use of &lt;&lt; in cin overloadinf but its of no use .. still same issue ."}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1571830314, "post_id": 58521740, "comment_id": 103368877, "body": "You should include a <code>main</code> function so we can see how you&#39;re using that code. And provide some sample input. Because as it is now, getting this to work is a mystery. The first thing your <code>addBook</code> does is reading in <code>int check</code> without any prompt. The <code>if (cin) { throw [...]</code> part is very questionable (what do I have to input so it doesn&#39;t throw an exception here?) and the exception handling is puzzling, too. You ask if the user wants to try again, but the answer doesn&#39;t matter."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571830353, "post_id": 58521740, "comment_id": 103368908, "body": "I think you need to take a couple of steps back, and reread about basic input/output, and how vectors and adding elements to vectors work. Because <code>cin &gt;&gt; b.push_back()</code> shows that you have some big misunderstandings."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1571830800, "post_id": 58521740, "comment_id": 103369158, "body": "If the parameter is <code>in</code>, why does the routine ignore it and instead use <code>cin</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "is_accepted": true, "score": 3, "last_activity_date": 1571830902, "creation_date": 1571830902, "answer_id": 58522080, "question_id": 58521740, "link": "https://stackoverflow.com/questions/58521740/how-can-i-overload-cin-with-vector-of-object/58522080#58522080", "title": "How can i overload cin(&gt;&gt;) with vector of object", "body": "<p>Your basic misunderstanding here is that the function <code>push_back()</code> (note the empty parentheses) does not exist, and the compiler doesn't know what to do with it in conjunction with <code>cin &gt;&gt;</code>.</p>\n\n<p><code>push_back(Book b)</code> does exist, but you have to supply a temporary Book object, e.g. like so:</p>\n\n<pre><code>        Book book;\n        cin &gt;&gt; book; // no more error\n        b.push_back(book);\n</code></pre>\n"}], "owner": {"reputation": 929, "user_id": 12136319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZLSt.jpg?s=128&g=1", "display_name": "Problematic Dude", "link": "https://stackoverflow.com/users/12136319/problematic-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 58522080, "answer_count": 1, "score": 0, "last_activity_date": 1571830902, "creation_date": 1571829732, "last_edit_date": 1571830156, "question_id": 58521740, "link": "https://stackoverflow.com/questions/58521740/how-can-i-overload-cin-with-vector-of-object", "title": "How can i overload cin(&gt;&gt;) with vector of object", "body": "<p>If title wont make you understand issue .Here is the snippet of code with  what I'm trying to do with my code.\nI have vector of class Book object and i want to take input for book object all at once so i thought to overload it . And during pushback operation it ask for class's >> version .So i made that but still i can't take input</p>\n\n<pre><code>class Book{\nfriend istream &amp;operator&gt;&gt;(istream &amp;in,Book &amp;b);\n\n    string name;\n    unsigned int id;\n    unsigned int no;\n\n};\nclass Booklist{\n    vector&lt;Book&gt;b;\n    void addBook();\n};\nistream &amp;operator&gt;&gt;(istream &amp;in,Book &amp;b)\n{\n   // cout&lt;&lt;\"Enter book id , no and name :\"&lt;&lt;endl; as suggested lets discard it but still its error prone\n    cin&gt;&gt;b.id&gt;&gt;b.no&gt;&gt;b.name;\n    return in;\n}\nvoid Booklist::addBook()\n{\n    int check;\n    while(cin&gt;&gt;check){\n        try{\n            cout&lt;&lt;\"Enter book serial number - \"&lt;&lt;endl;\n            cin&gt;&gt;b.push_back(); // Here is the error part\n            if(cin){\n                throw runtime_error(\"Input failed.\\n\");}\n        }\n        catch(runtime_error error){\n            cout&lt;&lt;error.what()\n                &lt;&lt;\"Try again? Enter y or n.\\n\";\n                char c;\n                cin&gt;&gt;c;\n                if(!cin || c=='n'){\n                    break;\n                }\n        }\n    }\n}\n\n\n\n\n***ERRORS IN COMPILER***\n\nIn member function 'void Booklist::addBook()':|\nno matching function for call to 'std::vector&lt;Book&gt;::push_back()'|\nnote: candidate: void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;) [with _Tp = Book; _Alloc = std::allocator&lt;Book&gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = Book]|\ncandidate expects 1 argument, 0 provided|\ncandidate: void std::vector&lt;_Tp, _Alloc&gt;::push_back(std::vector&lt;_Tp, _Alloc&gt;::value_type&amp;&amp;) [with _Tp = Book; _Alloc = std::allocator&lt;Book&gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = Book]|\nnote:   candidate expects 1 argument, 0 provided|\n\n</code></pre>\n"}, {"tags": ["php", "c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1571829350, "post_id": 58521563, "comment_id": 103368359, "body": "If you have code like that in C++, then your program is bad enough that you should try to rewrite the PHP solution from scratch rather than as a faithful translation from C++."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1571829373, "post_id": 58521563, "comment_id": 103368373, "body": "Is the possible overflow an undefined behaviour in c++?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571829434, "post_id": 58521563, "comment_id": 103368398, "body": "And remember, in C++ it&#39;s implementation specific if <code>char</code> is signed or unsigned. If it happens to be unsigned, then your code will not work as you expect."}, {"owner": {"reputation": 1274, "user_id": 5757434, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/97d471e38b8d44ee7252657fa1f98816?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Williams", "link": "https://stackoverflow.com/users/5757434/thomas-williams"}, "edited": false, "score": 0, "creation_date": 1571829568, "post_id": 58521563, "comment_id": 103368481, "body": "This isn&#39;t my actual code, but a cut down example to show the problem. The c++ program works and is designed to write a binary tajima dst file. It works perfectly, but I need to do the same thing in php, for reasons, but I am not getting the same results. The bit of code I have shown here is intended to set a flag, which is the third byte I am writing to my binary file. Although the format of file doesn&#39;t matter here as I am just asking a single question."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 2, "creation_date": 1571829714, "post_id": 58521563, "comment_id": 103368564, "body": "As far as I know this is undefined behavior in C++. The result of signed overflow is undefined. If it works as expected you are lucky but the behavior could change on the next run. <a href=\"https://stackoverflow.com/questions/16188263/is-signed-integer-overflow-still-undefined-behavior-in-c\" title=\"is signed integer overflow still undefined behavior in c\">stackoverflow.com/questions/16188263/&hellip;</a>"}, {"owner": {"reputation": 1274, "user_id": 5757434, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/97d471e38b8d44ee7252657fa1f98816?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Williams", "link": "https://stackoverflow.com/users/5757434/thomas-williams"}, "edited": false, "score": 0, "creation_date": 1571829798, "post_id": 58521563, "comment_id": 103368600, "body": "I have used the c++ code on multiple DST files and it always works, so I know my C++ code is working correctly. Also please check out the Embroidermodder  source code where similar variables are being used <a href=\"http://embroidermodder.sourceforge.net/src/dst.cpp\" rel=\"nofollow noreferrer\">embroidermodder.sourceforge.net/src/dst.cpp</a> look under encode_record"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1571830147, "post_id": 58521563, "comment_id": 103368761, "body": "@BiagioFesta unsigned overflow is well defined, though <code>char</code> can be signed or unsigned"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1571830247, "post_id": 58521563, "comment_id": 103368828, "body": "Just because it seems to work for just your situation, with a specific compiler building with a specific set of optimization and for a specific target doesn&#39;t mean it will work for all compilers, all optimizations and all targets. UB is tricky that way."}, {"owner": {"reputation": 1274, "user_id": 5757434, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/97d471e38b8d44ee7252657fa1f98816?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Williams", "link": "https://stackoverflow.com/users/5757434/thomas-williams"}, "edited": false, "score": 0, "creation_date": 1571830367, "post_id": 58521563, "comment_id": 103368923, "body": "Please look at the link I posted under encode_record and look at the switch flags. This is what I am trying to do in php. This is the official source code of embroider modder, which I based my original code off for converting DSTs to svgs"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1571830444, "post_id": 58521563, "comment_id": 103368961, "body": "unsigned overflow is well defined. If signed overflow is used in the link you shouldn&#39;t base your programming on this example."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1571830616, "post_id": 58521563, "comment_id": 103369063, "body": "@formerlyknownas_463035818 Indeed, I wrote &quot;the <i>possible</i> overflow&quot;."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1571830874, "post_id": 58521563, "comment_id": 103369193, "body": "I&#39;m sorry, but the code you link to isn&#39;t what most people would consider good. Why do e.g. <code>b2=(char)243</code> in the first place, instead of assigning the wanted value to begin with (i.e. <code>b2 = -13</code>)? It seems the creator of that code reversed-engineered some file format, without bothering to write good code."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1571831021, "post_id": 58521563, "comment_id": 103369275, "body": "PHP converts e.g. <code>12 + &quot;12&quot;</code> to <code>12 + 12</code>. Your statement <code>$test+= chr(131);</code> is equivalent to <code>$test = 16 + chr(131)</code>. <code>chr(131)</code> can&#39;t be converted to a number so the result is <code>16</code>."}, {"owner": {"reputation": 1274, "user_id": 5757434, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/97d471e38b8d44ee7252657fa1f98816?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Williams", "link": "https://stackoverflow.com/users/5757434/thomas-williams"}, "edited": false, "score": 0, "creation_date": 1571831061, "post_id": 58521563, "comment_id": 103369295, "body": "Which is why in my code I changed that line to $b2=chr(-13); ages ago. I am not copying the code exactly, but it does work. There is updated versions of this code. Regardless I am trying to replicate it in php."}, {"owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1571831313, "post_id": 58521563, "comment_id": 103369427, "body": "It seems you want something like <code>function pseudo_chr($x) { return $x &lt; 128 : $x : (-256 + $x); }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": true, "score": 3, "last_activity_date": 1571832762, "last_edit_date": 1571832762, "creation_date": 1571831312, "answer_id": 58522201, "question_id": 58521563, "link": "https://stackoverflow.com/questions/58521563/why-is-my-php-code-not-outputting-the-same-as-my-c-using-chr/58522201#58522201", "title": "Why is my php code not outputting the same as my C++ using chr", "body": "<p>You can achieve this with:</p>\n\n<pre><code>&lt;?php\n    $test = 16;\n    $test = ($test + 131) % 256;\n    if ($test &gt; 127) {\n        $test -= 256;\n    }\n    echo $test;\n?&gt;\n</code></pre>\n\n<p>The addition </p>\n\n<pre><code>$test+= chr(131);\n</code></pre>\n\n<p>doesn't do what you expect. PHP tries to convert the string/character <code>chr(131)</code> into number. It can't convert it because the string doesn't contain any digits so the statement is equivalent to</p>\n\n<pre><code>$test+= 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3788, "user_id": 7271221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Rn3F.gif?s=128&g=1", "display_name": "jspit", "link": "https://stackoverflow.com/users/7271221/jspit"}, "is_accepted": false, "score": 0, "last_activity_date": 1571850228, "creation_date": 1571850228, "answer_id": 58527798, "question_id": 58521563, "link": "https://stackoverflow.com/questions/58521563/why-is-my-php-code-not-outputting-the-same-as-my-c-using-chr/58527798#58527798", "title": "Why is my php code not outputting the same as my C++ using chr", "body": "<p>I think the clean way is the c++ expression (int)(char)131 first to correctly convert to PHP integer and then adding the values. The conversion realizes the function  signByteToInt():</p>\n\n<pre><code>&lt;?php\nfunction signByteToInt($byteVal){\n  $byteVal &amp;= 0xff;\n  if($byteVal &amp; 0x80) $byteVal -= 0x100;\n  return $byteVal;\n}\n</code></pre>\n\n<p>Example of use</p>\n\n<pre><code>$test = signByteToInt(16);  //16\n$add = signByteToInt(131);  //-125\n\necho $test+$add;  //-109\n</code></pre>\n"}], "owner": {"reputation": 1274, "user_id": 5757434, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/97d471e38b8d44ee7252657fa1f98816?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Williams", "link": "https://stackoverflow.com/users/5757434/thomas-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 58522201, "answer_count": 2, "score": 1, "last_activity_date": 1571850228, "creation_date": 1571829168, "question_id": 58521563, "link": "https://stackoverflow.com/questions/58521563/why-is-my-php-code-not-outputting-the-same-as-my-c-using-chr", "title": "Why is my php code not outputting the same as my C++ using chr", "body": "<p>I am converting a working C++ program to php. Now even though most of the program works I am having trouble with one aspect of it.</p>\n\n<p>The code that works in C++ is not giving the same results in php.\nThis is for writing to a binary file later in my code.</p>\n\n<p>Here is the C++ code and the result.</p>\n\n<pre><code>C++\nchar test;\ntest = 16;\ntest+=(char)131;\nstd::cout &lt;&lt; (int)test &lt;&lt; endl;\nResult = -109\n</code></pre>\n\n<p>and here is the equivalent code in php.</p>\n\n<pre><code>PHP\n$test = chr(0);\n$test = 16;\n$test+= chr(131);\necho (int)$test;\nResult = 16\n</code></pre>\n\n<p>I am guessing this might have something to do with unicode encoding giving me the wrong result. The result should be -109 as my C++ program works correctly, but I am not getting the same result in php.</p>\n\n<p>When I cout (int)(char)131 in C++ I get -125, but if I echo chr(131) in php I get 0;</p>\n\n<p>Is there anyway to make my php output the same as my C++?</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1571829230, "post_id": 58521534, "comment_id": 103368299, "body": "or std::priority_queue"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1571829791, "post_id": 58521534, "comment_id": 103368594, "body": "pay attention to your compilers output. <code>int key[];</code> as member should trigger an error or at least a warning"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1571829242, "creation_date": 1571829242, "answer_id": 58521578, "question_id": 58521534, "link": "https://stackoverflow.com/questions/58521534/instance-variable-value-not-printing-properly/58521578#58521578", "title": "Instance variable value not printing properly", "body": "<p>You don't allocate any memory for the class member <code>key</code>.</p>\n\n<p>Use <code>std::vector&lt;int&gt; key;</code> as the member instead, with a <code>key.resize(ni);</code> in your constructor.</p>\n\n<p>Once you have it working, bin the whole thing, and use <code>std::priority_queue</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "is_accepted": false, "score": 5, "last_activity_date": 1571829795, "last_edit_date": 1571829795, "creation_date": 1571829362, "answer_id": 58521620, "question_id": 58521534, "link": "https://stackoverflow.com/questions/58521534/instance-variable-value-not-printing-properly/58521620#58521620", "title": "Instance variable value not printing properly", "body": "<p>Use <code>std::array</code> if you are using c++, or better for dynamic-ranged arrays, use <code>std::vector</code>. And instead of using <code>[]</code>-operator use the <code>at()</code> method, which checks for out-of-bound errors:</p>\n\n<p>Edit, there was an error in the constructor</p>\n\n<pre><code>int main(){\n    std::vector&lt;int&gt; k{1,2,4};  \n    int hs=3;  \n    int n=3;  \n    priorityq p(k,hs,n);  \n    p.printKey();  \n}  \n</code></pre>\n\n<p>..</p>\n\n<pre><code>class priorityq{  \n    std::vector&lt;int&gt; key;  \n    int heapsize;  \n    int n;  \npublic:  \n    void printKey();  \n    priorityq(std::vector&lt;int&gt;&amp; k,int hs, int ni);  \n};  \n</code></pre>\n\n<p>..</p>\n\n<pre><code>priorityq::priorityq(std::vector&lt;int&gt;&amp; k,int hs, int ni){  \n     for(int i=0;i&lt;ni;i++)  \n      key.push_back(k.at(i));  \n     heapsize=hs;   \n     n=n_i;   \n}\nvoid priorityq::printKey(){     \n     for(int i=0;i&lt;heap_size;i++)   \n       cout&lt;&lt;key.at(i)&lt;&lt;\" \";   \n     cout&lt;&lt;endl;    \n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 12262630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ea938071dc92eb93409a87baabd0b2?s=128&d=identicon&r=PG&f=1", "display_name": "Eragon", "link": "https://stackoverflow.com/users/12262630/eragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1571829795, "creation_date": 1571829041, "question_id": 58521534, "link": "https://stackoverflow.com/questions/58521534/instance-variable-value-not-printing-properly", "title": "Instance variable value not printing properly", "body": "<p>I am using a constructor to initialize the instance variable. When I print the instance variable it gives wrong output.</p>\n\n<pre><code>int main(){\n    int k[]={1,2,4};  \n    int hs=3;  \n    int n=3;  \n    priorityq p(k,hs,n);  \n    p.printKey();  \n}  \n</code></pre>\n\n<pre><code>class priorityq{  \n    int key[];  \n    int heapsize;  \n    int n;  \npublic:  \n    void printKey();  \n    priorityq(int k[],int hs, int ni);  \n};  \n</code></pre>\n\n<pre><code>priorityq::priorityq(int k[],int hs, int ni){  \n     for(int i=0;i&lt;ni;i++)  \n      key[i]=k[i];  \n     heapsize=hs;   \n     n=n_i;   \n}\nvoid priorityq::printKey(){     \n     for(int i=0;i&lt;heap_size;i++)   \n       cout&lt;&lt;key[i]&lt;&lt;\" \";   \n     cout&lt;&lt;endl;    \n}\n</code></pre>\n\n<p>I expect output to be \n1 2 4\nbut am getting \n3 3 4</p>\n"}, {"tags": ["c++", "time-complexity", "std", "binary-heap"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1571829130, "post_id": 58521518, "comment_id": 103368250, "body": "The standard requires <i>&quot;...At most log(N) comparisons...&quot;</i> : <a href=\"https://en.cppreference.com/w/cpp/algorithm/push_heap\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/push_heap</a>"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1571829143, "post_id": 58521518, "comment_id": 103368261, "body": "What is <code>n</code> and what is <code>N</code>?"}, {"owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1571829676, "post_id": 58521518, "comment_id": 103368545, "body": "@ThomasSablik it&#39;s the same, misprint :) Number of max elements in heap"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 3, "creation_date": 1571830060, "post_id": 58521518, "comment_id": 103368716, "body": "The complexity does not change. If you change <code>Q.back()</code> the heap is valid after <code>std::push_heap(Q.begin(), Q.end());</code>. If you change an element other than <code>Q.back()</code> the behavior is not defined. The heap could get invalid. The complexity is O(log N). If you have to change a random element call <code>make_heap</code> instead of <code>push_heap</code> with complexity O(N)."}], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 0, "creation_date": 1571829584, "post_id": 58521651, "comment_id": 103368496, "body": "Yes, but in case if container is a valid heap. Changing of one element making heap invalid, so, theoretically, complexity should be O(n). Am I right?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 0, "creation_date": 1571829913, "post_id": 58521651, "comment_id": 103368651, "body": "@Robotex you are changing the last element. After <code>std::push_heap</code> the heap is valid. If you would change a random element other than the last the heap could be invalid after <code>push_heap</code>. The complexity is the same."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1571830148, "post_id": 58521651, "comment_id": 103368763, "body": "Regarding the note at the end: If you call this on an invalid heap, the behavior is undefined and you can&#39;t know its complexity or effects. But in this case the heap is valid."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1571830581, "post_id": 58521651, "comment_id": 103369041, "body": "@interjay &amp; Thomas you are right, I improved the answer with your comments, hope that&#39;s fine. :)"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 0, "creation_date": 1571831269, "post_id": 58521651, "comment_id": 103369401, "body": "@Robotex no, see my improved answer please. :) Nice question BTW, +1."}, {"owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1571832884, "post_id": 58521651, "comment_id": 103370365, "body": "@ThomasSablik I&#39;m changing not last element, I&#39;m changing random."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 2, "creation_date": 1571833996, "post_id": 58521651, "comment_id": 103370974, "body": "@Robotex In your code snipped you are changing the element with index 3 of your vector with size 4. That&#39;s the last element and the behavior is defined. If you would change element with index 2 in the same vector the behavior is not defined."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 3, "last_activity_date": 1571830851, "last_edit_date": 1571830851, "creation_date": 1571829463, "answer_id": 58521651, "question_id": 58521518, "link": "https://stackoverflow.com/questions/58521518/is-stdpush-heap-working-for-on-complexity-instead-of-ologn-in-this-case/58521651#58521651", "title": "Is std::push_heap working for O(n) complexity instead of O(logN) in this case?", "body": "<p>The time complexity of <a href=\"http://www.cplusplus.com/reference/algorithm/push_heap/\" rel=\"nofollow noreferrer\"><code>std::push_heap</code></a> is logarithmic, i.e. O(logN):</p>\n\n<blockquote>\n  <p>Up to <strong>logarithmic</strong> in the <em>distance between first and last</em>: Compares elements and potentially swaps (or moves) them until rearranged as a longer heap.</p>\n</blockquote>\n\n<p>where <code>N = std::distance(first, last)</code>.</p>\n\n<p>Note: In case you call this method on an <strong>invalid heap</strong>,  as @interjay commented, \"the <em>behavior</em> is <strong>undefined</strong> and you can't know its <strong>complexity</strong> or effects\", since that method won't re-organize the heap into a valid one. The <a href=\"http://www.cplusplus.com/reference/algorithm/push_heap/\" rel=\"nofollow noreferrer\">ref</a> states:</p>\n\n<blockquote>\n  <p><strong>Given a heap</strong> in the range [first,last-1), this function extends the range considered a heap to [first,last) by placing the value in (last-1) into its corresponding location within it.</p>\n</blockquote>\n\n<p>So, if I was actually doing this, then I wouldn't worry about the time complexity, but for the unpredicted behavior.</p>\n\n<hr>\n\n<p>In order, to demonstrate that behavior try changing the 2nd element (any but the last, as @ThomasSablik commented - because if you change <code>Q.back()</code> the heap is valid after <code>std::push_heap(Q.begin(), Q.end());</code>), and you'll notice that the heap remains invalid after <code>std::push_heap</code>'s call - you need to call the linear (in complexity) method <a href=\"http://www.cplusplus.com/reference/algorithm/make_heap/\" rel=\"nofollow noreferrer\"><code>std::make_heap</code></a> to re-organize your now invalidated heap.</p>\n"}, {"comments": [{"owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 0, "creation_date": 1571833080, "post_id": 58522068, "comment_id": 103370475, "body": "It is possible to rearrange heap faster than O(n) after modifying the random element?"}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "reply_to_user": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 0, "creation_date": 1571833592, "post_id": 58522068, "comment_id": 103370757, "body": "@Robotex Yes, it is. You would &quot;just&quot; have to swap the changed element upwards or downwards in the heap until it doesn&#39;t violate the heap condition anymore (parent must be &gt;= children). This will take at most O(log N) swaps, limited by the depth of the heap. But you&#39;d have to do this manually, I&#39;m not aware of a STL algorithm doing this"}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "reply_to_user": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 1, "creation_date": 1571834042, "post_id": 58522068, "comment_id": 103370991, "body": "@Robotex see the answer to this question: <a href=\"https://stackoverflow.com/questions/20397674/replacing-element-in-min-heap\" title=\"replacing element in min heap\">stackoverflow.com/questions/20397674/&hellip;</a> It&#39;s for a min-heap and written in Java, but you should be able to adapt it easily"}], "tags": [], "owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "is_accepted": true, "score": 3, "last_activity_date": 1571861938, "last_edit_date": 1571861938, "creation_date": 1571830873, "answer_id": 58522068, "question_id": 58521518, "link": "https://stackoverflow.com/questions/58521518/is-stdpush-heap-working-for-on-complexity-instead-of-ologn-in-this-case/58522068#58522068", "title": "Is std::push_heap working for O(n) complexity instead of O(logN) in this case?", "body": "<p>You are asking the wrong question. Instead of asking for time complexity you should ask whether what you are doing is well defined behavior.</p>\n\n<p>Answer:\n<code>push_heap</code> has the precondition that the range you pass it is a valid heap. More precisely, if you give it the range <code>[first, last[</code>, only <code>[first, last-1[</code> is required to be a heap and the element at <code>last-1</code> will be inserted. So if this precondition is not met, the behavior is undefined (and this is the case with <code>push_heap</code> as with any other STL algorithms as far as I know). But if the precondition is met, you are guaranteed to get O(log N) here.</p>\n\n<p>In your example the heap is still valid, because you are changing the last element (which is not required to be part of the heap), so the complexity stays O(log N). If it were no heap anymore, in theory, anything could happen: Crash, O(n), O(2^n), nose dragons.</p>\n\n<p>In practice, however, the complexity will stay at O(log N) because the new entry will still sift through at max O(log N) heap layers, even if one of them is incorrect and sifting stops incorrectly (actually, if the heap is incorrect in the first place, there cannot be \"correct\" sifting).</p>\n"}, {"comments": [{"owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 0, "creation_date": 1571837309, "post_id": 58523266, "comment_id": 103372947, "body": "&gt; If you have to change a random element call make_heap  too slow  Is it possible to reorganise heap faster that O(n) if random element was changed?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 0, "creation_date": 1571837688, "post_id": 58523266, "comment_id": 103373179, "body": "@Robotex My code has a complexity of O(log N) and you can set a random element"}], "tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 1, "last_activity_date": 1571838170, "last_edit_date": 1571838170, "creation_date": 1571834990, "answer_id": 58523266, "question_id": 58521518, "link": "https://stackoverflow.com/questions/58521518/is-stdpush-heap-working-for-on-complexity-instead-of-ologn-in-this-case/58523266#58523266", "title": "Is std::push_heap working for O(n) complexity instead of O(logN) in this case?", "body": "<p>The complexity <code>push_heap</code> does not change but it's only well defined if you change the last element. </p>\n\n<p>If you change <code>Q.back()</code> the heap is valid after <code>std::push_heap(Q.begin(), Q.end());</code>. If you change an element other than <code>Q.back()</code> the behavior is not defined. The heap could get invalid. The complexity is O(log N) in any case. </p>\n\n<p>If you have to change a random element call <code>make_heap</code> instead of <code>push_heap</code> with complexity O(N) or use a custom function like:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing Container = std::vector&lt;int&gt;;\n\nvoid push_heap(Container &amp;Q, Container::size_type index, Container::value_type value) {\n    Q[index] = value;\n    for (Container::size_type i{index + 1}; i &gt; 1; i /= 2) {\n        if (Q[i - 1] &lt;= Q[i/2 - 1]) break;\n        std::swap(Q[i - 1], Q[i/2 - 1]);\n    }\n}\n\nint main() {\n    Container Q = { 1, 2, 4, 8, 16, 32 };\n\n    std::make_heap(Q.begin(), Q.end());\n\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; std::is_heap(Q.begin(), Q.end()) &lt;&lt; '\\n';\n    for (const auto &amp;el : Q) {\n        std::cout &lt;&lt; el &lt;&lt; ' ';\n    }\n    std::cout &lt;&lt; '\\n';\n    push_heap(Q, 4, 20);\n    // Q[4] = 20;\n    // std::push_heap(Q.begin(), Q.end());\n    std::cout &lt;&lt; std::is_heap(Q.begin(), Q.end()) &lt;&lt; '\\n';\n    for (const auto &amp;el : Q) {\n        std::cout &lt;&lt; el &lt;&lt; ' ';\n    }\n}\n</code></pre>\n\n<p>This function sets an element of the heap and preserves the heap property in O(log N).</p>\n\n<p>Output:</p>\n\n<pre><code>true\n32 16 4 8 2 1 \ntrue\n32 20 4 8 16 1 \n</code></pre>\n\n<p>In the example element <code>Q[4]</code> is set to 20. The behavior of <code>push_heap</code> is not defined for this case. The usual result is an invalid heap. As you can see the custom <code>push_heap</code> function reorganizes the heap in log(N) iterations and returns a valid heap.</p>\n"}], "owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "accepted_answer_id": 58522068, "answer_count": 3, "score": 3, "last_activity_date": 1571861938, "creation_date": 1571828990, "last_edit_date": 1571830790, "question_id": 58521518, "link": "https://stackoverflow.com/questions/58521518/is-stdpush-heap-working-for-on-complexity-instead-of-ologn-in-this-case", "title": "Is std::push_heap working for O(n) complexity instead of O(logN) in this case?", "body": "<p>I replaced one random element of heap and then called push_heap on this container. What complexity does it have in this case: O(n) or O(logN)?</p>\n\n<pre><code>/* heap elements are stored on a random-access container */\nstd::vector&lt;int&gt; Q = { 3, 4, 2, 1 };\n\n/* heapify Q (linear run-time complexity) */\nstd::make_heap(Q.begin(), Q.end());\n\nstd::cout &lt;&lt; std::is_heap(Q.begin(), Q.end()) &lt;&lt; std::endl;\nstd::cout &lt;&lt; Q[3] &lt;&lt; std::endl;\nQ[3] = 5;\nstd::push_heap(Q.begin(), Q.end());\nstd::cout &lt;&lt; std::is_heap(Q.begin(), Q.end()) &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": ["c++", "arrays", "templates", "vector"], "comments": [{"owner": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 1, "creation_date": 1571828793, "post_id": 58521432, "comment_id": 103368072, "body": "did you mean <code>capacity += 1;</code> instead of <code>capacity + 1;</code> in <code>push_back</code>?"}, {"owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "reply_to_user": {"reputation": 1303, "user_id": 3365922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61f61ab80f1814148f6e8ca470f177a?s=128&d=identicon&r=PG&f=1", "display_name": "fas", "link": "https://stackoverflow.com/users/3365922/fas"}, "edited": false, "score": 0, "creation_date": 1571828875, "post_id": 58521432, "comment_id": 103368113, "body": "I&#39;m creating a new array that can exactly hold one more element. That&#39;s why I used capacity + 1"}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 1, "creation_date": 1571828944, "post_id": 58521432, "comment_id": 103368149, "body": "@debrisoroids <code>capacity + 1</code> does nothing, because you don&#39;t assign the value to anything. So you have to save <code>capacity = capacity + 1</code> or in short <code>capacity += 1</code>"}, {"owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "edited": false, "score": 0, "creation_date": 1571829104, "post_id": 58521432, "comment_id": 103368232, "body": "Okay I changed it now but the problem still lies the same :("}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1571829114, "post_id": 58521432, "comment_id": 103368236, "body": "<code>index</code> is never initialized in the constructor, so using it becomes undefined behavior. There are multiple fundamental bugs in the shown code; and likely other bugs too, that a complete analysis will uncover. You need to learn how to use a debugger, so you can debug your own code and see everything that&#39;s wrong with it. stackoverflow.com isn&#39;t really a substitute for your own debugger. This is what a debugger is for. Knowing how to use a debugger is a required skill for every C++ developer. Have you yet used a debugger with this code, and if not, why not?"}, {"owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "edited": false, "score": 0, "creation_date": 1571829327, "post_id": 58521432, "comment_id": 103368345, "body": "Thank you for the suggestion. I&#39;m really new to coding. I&#39;m going to take your advice and improve my code."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1571829572, "post_id": 58521432, "comment_id": 103368483, "body": "And why exactly &quot;<code>if (index &gt;= arrSize || index &lt; 0)</code>&quot; appears in nearly every method, even this one, for which it makes absolutely no sense? This looks like something that was robo-copied into every method, without fully understanding the need for it; then, to make the compilation error go away <code>index</code> gets added as a class member; but without fully understanding the reason for the compilation error. When you&#39;re looking at a compilation error you don&#39;t understand, the right thing to do is to figure it out, not search for it on the Internet, and assume that the first explanation, applies here."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1571829579, "post_id": 58521432, "comment_id": 103368489, "body": "@debrisoroids If you are new to coding, I wouldn&#39;t recommend to start with an implementation of vector. Real vectors are quite complicated and involve advanced beasts such as <i>placement new</i>, <code>std::move_if_noexcept</code>, etc. There are even discussions about whether vectors are implementable according to C++ rules (e.g., treating objects created in an uninitialized memory as arrays). Even your implementation will have big problems with <i>exceptions</i>, which you do not seem to care about."}, {"owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1571829972, "post_id": 58521432, "comment_id": 103368677, "body": "@DanielLangr I&#39;m taking a programming course on c++ and I was given this task to complete. I know my code is still not neat but I&#39;m learning still."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1571830267, "post_id": 58521432, "comment_id": 103368844, "body": "@debrisoroids All right, this make sense (though I don&#39;t like such assignments that basically force you to implement a very bad version of vector). Anyway, note that <code>index</code> cannot be <code>&lt;0</code> when its type is <code>unsigned int</code>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1571833831, "post_id": 58521432, "comment_id": 103370890, "body": "A &quot;programming course on C++&quot; is unlikely to be starting with templates, and other advanced topics, right from the beginning. By the time I started learning templates, I no longer described myself as &quot;new to coding&quot;."}, {"owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1571834174, "post_id": 58521432, "comment_id": 103371073, "body": "@SamVarshavchik Then that could possibly mean I&#39;m weak at coding, which I don&#39;t deny as well but hey, it&#39;s not like I&#39;m not trying to overcome my weak sides of programming."}, {"owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "edited": false, "score": 0, "creation_date": 1571856454, "post_id": 58521432, "comment_id": 103382476, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c\">How do I use arrays in C++?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1571831814, "post_id": 58522178, "comment_id": 103369764, "body": "I would add a note that this solution based on OP&#39;s code may increase capacity with each <code>pushBack</code>, which would be very inefficient. It would be better to, e.g., double the capacity instead."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1571831941, "post_id": 58522178, "comment_id": 103369833, "body": "@DanielLangr I updated the post relative to the redundant data member index."}, {"owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "edited": false, "score": 0, "creation_date": 1571832087, "post_id": 58522178, "comment_id": 103369895, "body": "but for the insert member function, I&#39;m throwing OutOfRange error if (index &gt;= arrSize)"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "edited": false, "score": 1, "creation_date": 1571832160, "post_id": 58522178, "comment_id": 103369934, "body": "@debrisoroids But that <code>index</code> refers to the parameter of <code>insert</code>, not to <code>index</code> member variable."}, {"owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1571832184, "post_id": 58522178, "comment_id": 103369949, "body": "@DanielLangr I know about doubling the capacity but my task has this limitation where my task mentions that we have to increase the capacity exactly by one just to store one more element."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "edited": false, "score": 1, "creation_date": 1571832251, "post_id": 58522178, "comment_id": 103369994, "body": "@debrisoroids But in any case the capacity shall not be decreased two times in the function erase."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "edited": false, "score": 0, "creation_date": 1571832321, "post_id": 58522178, "comment_id": 103370030, "body": "@debrisoroids Ok, another strange requirement ;-)"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1571833093, "last_edit_date": 1571833093, "creation_date": 1571831240, "answer_id": 58522178, "question_id": 58521432, "link": "https://stackoverflow.com/questions/58521432/push-back-and-insert-do-not-work-properly-in-my-own-vector-class/58522178#58522178", "title": "push_back and insert do not work properly in my own vector class", "body": "<p>For starters this check in some member functions (for example including <code>insert</code>)</p>\n\n<pre><code>if (index &gt;= arrSize || index &lt; 0)\n                        ^^^^^^^^^^\n</code></pre>\n\n<p>does not make sense because the variable <code>index</code> declared as having the type unsigned int never can be negative. So you may exclude the second sub-condition of the if statement.</p>\n\n<p>In the function <code>pushBack</code> in this loop</p>\n\n<pre><code>        for (unsigned int i = 0; i &lt; capacity; ++i)\n        {\n            arrTemp[i] = arr[i];\n        }\n</code></pre>\n\n<p>subsritute <code>capacity</code> for <code>arrSize</code>.</p>\n\n<p>Also remove the statement</p>\n\n<pre><code>capacity++;\n</code></pre>\n\n<p>because capacity was already incremented in this statement</p>\n\n<pre><code>arrTemp = new T[capacity += 1];\n</code></pre>\n\n<p>Within the function <code>insert</code> change this code snippet</p>\n\n<pre><code>    else if (index == capacity)\n    {\n        pushBack(item);\n    }\n    else if (0 &lt;= index &amp;&amp; index &lt;= size())\n    {\n        arr[index] = item;\n    }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    if ( arrSize &lt;= index )\n    {\n        pushBack(item);\n    }\n    else\n    {\n        arr[index] = item;\n    }\n</code></pre>\n\n<p>And you may remove the data member</p>\n\n<pre><code>unsigned int index;\n</code></pre>\n\n<p>because it is not used.</p>\n\n<p>Pay attention to that the member function erase is also incorrect. At least there is no need to reallocate the array and change its capacity. And again there are twice capacity is decremented.</p>\n\n<pre><code>     arrTemp = new T[capacity -= 1];\n     //...\n     capacity--;\n</code></pre>\n\n<p>that is the function has the same defects as the function pushBack. And in the loop you are coping the erased element.</p>\n"}], "owner": {"reputation": 57, "user_id": 10210713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539395f6b2f9f492c4a57c804f7b6c96?s=128&d=identicon&r=PG&f=1", "display_name": "izolveidon", "link": "https://stackoverflow.com/users/10210713/izolveidon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58522178, "answer_count": 1, "score": 1, "last_activity_date": 1575505953, "creation_date": 1571828686, "last_edit_date": 1575505953, "question_id": 58521432, "link": "https://stackoverflow.com/questions/58521432/push-back-and-insert-do-not-work-properly-in-my-own-vector-class", "title": "push_back and insert do not work properly in my own vector class", "body": "<p>So, here is the header file where I implemented my own vector class in a simple way. \nThe problem is that even though the code compiles, the member functions pushBack and insert both do not work properly. </p>\n\n<p>I'd be really glad if anyone can figure out the problem in my code or find some ways how I can get this problem resolved.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;new&gt;\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nclass DiyVector\n{\n  public:\n    DiyVector()\n    {\n        arr = new T[1];\n        arrSize = 0;\n        index = 0;\n        capacity = 1;\n    }\n    ~DiyVector()\n    {\n        delete[] arr;\n    }\n\n    T&amp; at(unsigned int index) const\n    {\n        if (index &gt;= arrSize || index &lt; 0)\n        {\n            throw OutOfRange{};\n        }\n        else\n        {\n            return arr[index];\n        }\n    }\n\n    unsigned int size() const\n    {\n        return arrSize;\n    }\n\n    void pushBack(const T&amp; item)\n    {\n         if (arrSize == capacity)\n         {\n            arrTemp = new T[capacity += 1];\n\n            for (unsigned int i = 0; i &lt; capacity; ++i)\n            {\n                arrTemp[i] = arr[i];\n            }\n\n            delete[] arr;\n            capacity++;\n            arr = arrTemp;\n         }\n\n         arr[arrSize] = item;\n         arrSize++;\n\n    }\n\n    void popBack()\n    {\n        if (arrSize == 0)\n        {\n            throw OutOfRange{};\n        }\n        else\n        {\n            arrSize--;\n        }\n    }\n\n    void erase(unsigned int index)\n    {\n        if (index &gt;= arrSize || index &lt; 0)\n        {\n            throw OutOfRange{};\n        }\n\n        else\n        {\n            arrTemp = new T[capacity -= 1];\n\n            for (unsigned int i = 0; i &lt; capacity; ++i)\n            {\n                arrTemp[i] = arr[i];\n            }\n\n            delete[] arr;\n            capacity--;\n            arr = arrTemp;\n        }\n    }\n\n    void insert(unsigned int index, const T&amp; item)\n    {\n        if (index &gt;= arrSize || index &lt; 0)\n        {\n            throw OutOfRange{};\n        }\n\n        else if (index == capacity)\n        {\n            pushBack(item);\n        }\n        else if (0 &lt;= index &amp;&amp; index &lt;= size())\n        {\n            arr[index] = item;\n        }\n    }\n\n    class OutOfRange{};\n\nprivate:\n    unsigned int arrSize;\n    unsigned int capacity;\n    unsigned int index;\n    T* arr;\n    T* arrTemp;\n  };\n</code></pre>\n"}]