[{"tags": ["c++", "padding"], "comments": [{"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1520466985, "post_id": 49163193, "comment_id": 85332058, "body": "It looks like it unless for some strange reason the size of <code>uint64_t</code> changes between having and not having the <code>-m32</code> compiler flag"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1520466999, "post_id": 49163193, "comment_id": 85332062, "body": "alignment requirement might change between 32/64 (in particular <code>uint64_t</code>)."}, {"owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 1, "creation_date": 1520467067, "post_id": 49163193, "comment_id": 85332081, "body": "Difference between alignment and padding?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1520467222, "post_id": 49163193, "comment_id": 85332126, "body": "an offset of 12 bytes from the beginning of the structure will not correctly 64-bit align the uint64. Adding in 4 extra bytes of padding will offset the uint64 by 16 bytes from the beginning and align."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1520467223, "post_id": 49163193, "comment_id": 85332128, "body": "Padding is used to ensure that alignment is respected."}, {"owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 0, "creation_date": 1520471124, "post_id": 49163193, "comment_id": 85333164, "body": "I would like to understand why this question is downvoted, I did ask a clear question didn&#39;t I?"}, {"owner": {"reputation": 3617, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1520475986, "post_id": 49163193, "comment_id": 85334299, "body": "@roscoe read this <a href=\"https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member\" title=\"why isnt sizeof for a struct equal to the sum of sizeof of each member\">stackoverflow.com/questions/119123/&hellip;</a>"}, {"owner": {"reputation": 3617, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1520476016, "post_id": 49163193, "comment_id": 85334306, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member\">Why isn&#39;t sizeof for a struct equal to the sum of sizeof of each member?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1098, "user_id": 6497438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d4986f27a3f0a255bf095e3b1fd3de?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/6497438/evan"}, "is_accepted": false, "score": 0, "last_activity_date": 1520471835, "creation_date": 1520471835, "answer_id": 49163876, "question_id": 49163193, "link": "https://stackoverflow.com/questions/49163193/size-of-structures-different-in-32-and-64-bit/49163876#49163876", "title": "Size of structures different in 32 and 64 bit", "body": "<p>Yes, there are alignment differences when compiling 32 &amp; 64 bit code, though there isn't, as far as I know, anything in the standard that will tell you how they are different.</p>\n\n<p>What you are likely seeing is that the uint64_t is being aligned on an 8 byte boundary, and there are 4 bytes of padding between B.var3 and B.var5.</p>\n\n<p>Of course, I could be wrong, the padding could be anywhere.</p>\n"}], "owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520471835, "creation_date": 1520466783, "last_edit_date": 1520467064, "question_id": 49163193, "link": "https://stackoverflow.com/questions/49163193/size-of-structures-different-in-32-and-64-bit", "title": "Size of structures different in 32 and 64 bit", "body": "<p>Consider the following piece of code </p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef struct A\n{\n    uint32_t var1;\n    uint32_t var2;\n    uint32_t var3;\n    uint32_t var4;\n    uint32_t var5;\n} A_t;\ntypedef struct B\n{\n    uint32_t var1;\n    uint32_t var2;\n    uint32_t var3;\n    uint64_t var5;\n} B_t;\n\nint main(){\n    std::cout &lt;&lt; \"Size of A: \" &lt;&lt; sizeof(A_t) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Size of B: \" &lt;&lt; sizeof(B_t) &lt;&lt; std::endl; \n\n}\n</code></pre>\n\n<p>Compiling this normally with gcc gives the following output</p>\n\n<pre><code>Size of A: 20\nSize of B: 24\n</code></pre>\n\n<p>Compiling this with the <code>-m32</code> flag gives this output:</p>\n\n<pre><code>Size of A: 20\nSize of B: 20\n</code></pre>\n\n<p>Is there a difference in the way padding is done when compiling in 32bit vs 64 bits? I am on <code>x86_64-apple-darwin17.3.0</code> running gcc</p>\n"}, {"tags": ["c++", "loops", "for-loop", "vector"], "answers": [{"tags": [], "owner": {"reputation": 102, "user_id": 9438911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lugPC.jpg?s=128&g=1", "display_name": "Vladyslav Lopatin", "link": "https://stackoverflow.com/users/9438911/vladyslav-lopatin"}, "is_accepted": true, "score": 0, "last_activity_date": 1520467694, "creation_date": 1520467694, "answer_id": 49163327, "question_id": 49163187, "link": "https://stackoverflow.com/questions/49163187/removing-elements-from-vector-with-specific-string-length/49163327#49163327", "title": "removing elements from vector with specific string length", "body": "<p>When you erase for the first time (in you situation when you erase \"tom\") the id of the next elements are decreased, so in next iteration you don't check the length of \"lol\".</p>\n\n<p>It's not the best solution but you can decrement i in if and your code will work.</p>\n\n<pre><code>if(numbers[i].length() != 2){\n    numbers.erase(numbers.begin() + i);\n    i--;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 8877257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hxVPRrrWaY0/AAAAAAAAAAI/AAAAAAAABMA/jgsgAphSRO8/photo.jpg?sz=128", "display_name": "Grzegorz Depa", "link": "https://stackoverflow.com/users/8877257/grzegorz-depa"}, "is_accepted": false, "score": 0, "last_activity_date": 1520468931, "creation_date": 1520468931, "answer_id": 49163522, "question_id": 49163187, "link": "https://stackoverflow.com/questions/49163187/removing-elements-from-vector-with-specific-string-length/49163522#49163522", "title": "removing elements from vector with specific string length", "body": "<p>It's because after you erased \"tom\" the index has changed. </p>\n\n<hr>\n\n<p>Before erased \"tom\"</p>\n\n<ul>\n<li>[0] \"ho\" </li>\n<li>[1] \"ao\"</li>\n<li>[2] \"tom\"</li>\n<li>[3] \"lol\"</li>\n<li>...</li>\n</ul>\n\n<p>After</p>\n\n<ul>\n<li>[0] \"ho\"</li>\n<li>[1] \"ao\"</li>\n<li>[2] \"lol\"</li>\n<li>[3] \"cd\"</li>\n<li><p>...</p>\n\n<p>You can fix it by decreasing i;</p></li>\n</ul>\n\n<hr>\n\n<pre><code>if(numbers[i].length() != 2){\n    numbers.erase(numbers.begin() + i);\n    i--;\n}\n</code></pre>\n\n<p>or you can do this</p>\n\n<hr>\n\n<pre><code>for( auto i = numbers.begin(); i != numbers.end(); )\n{\n    if( i-&gt;length() != 2 ) i = numbers.erase(i); else ++i;\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 8390260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3c0fcad1c87d895d3e454222842b7f?s=128&d=identicon&r=PG&f=1", "display_name": "Jigar Patel", "link": "https://stackoverflow.com/users/8390260/jigar-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 49163327, "answer_count": 2, "score": 1, "last_activity_date": 1566813818, "creation_date": 1520466739, "last_edit_date": 1566813818, "question_id": 49163187, "link": "https://stackoverflow.com/questions/49163187/removing-elements-from-vector-with-specific-string-length", "title": "removing elements from vector with specific string length", "body": "<p>I have a vector that has random strings as elements. I am trying to loop through to find strings that are not a length of 2. If they are not a length of 2 then it should be removed from the vector. For some reason, my code is not removing all of the strings that are not a length of 2.</p>\n\n<p>I have tried individually removing the elements but when it is in a loop it doesn't seem to be working for elements.</p>\n\n<p>This is my output:\nho\nao\nlol\ncd\nef\nwq\nyo</p>\n\n<p>and expected output should not include the string \"lol\"</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main() {\n    vector &lt;string&gt; numbers = {\"ho\",\"ao\", \"tom\", \"lol\", \"cd\", \"ef\", \"wq\", \"hello\",\"yo\",\"sup\",\"boi\"};\n\n// loop deletes string elements from vector that don't have length of 2\nfor(int i=0; i &lt; numbers.size(); i++){\n    if(numbers[i].length() != 2){\n        numbers.erase(numbers.begin() + i); \n    }\n}\n\n// this makes sure the last element in vector gets deleted\nif( numbers[numbers.size() - 1].length() != 2  )\n    numbers.pop_back();\n\n\nfor(int i=0; i &lt; numbers.size(); i++){\n    cout &lt;&lt; numbers[i] &lt;&lt; endl; // prints out vector elements\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "qt", "ftp"], "comments": [{"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1531235569, "post_id": 49163171, "comment_id": 89515756, "body": "Why the downvote?"}], "answers": [{"comments": [{"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1520483031, "post_id": 49164569, "comment_id": 85336074, "body": "If I leave the password argument as is it doesn&#39;t work though. I get the same result - unable to login to the ftp server because the password is wrong. If the bash shell isn&#39;t called, then I assume QProcess does some sort of exec() call?"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1520483532, "post_id": 49164569, "comment_id": 85336261, "body": "Yes, it does fork() and execve()."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1520483767, "post_id": 49164569, "comment_id": 85336324, "body": "Thank you S.M. So what can I do to get <code>execve()</code> to pass the arguments with &quot;special characters&quot; to the executable?"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1520484095, "post_id": 49164569, "comment_id": 85336418, "body": "Special characters are not interpreted, pass them as they are. If your Qt is built with <code>QPROCESS_DEBUG</code> then try enable debug logs."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1520484248, "post_id": 49164569, "comment_id": 85336466, "body": "Why do you not use QFtp Class?"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1520484270, "post_id": 49164569, "comment_id": 85336471, "body": "Special characters are not interpreted? They seem to be in my case though. Weird. If I specify a password without special characters everything works properly."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1520484378, "post_id": 49164569, "comment_id": 85336511, "body": "As to why I&#39;m not using <code>QFtp</code>, it&#39;s a legacy application completely written around using <code>ncftp</code> commands. I don&#39;t have the luxury of rewriting it."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1520484540, "post_id": 49164569, "comment_id": 85336569, "body": "You did not post <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, I do not mind what is <code>(*phashSettings)[FTPPASSWORD])</code>. I am not able to help you more."}], "tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1520477261, "creation_date": 1520477261, "answer_id": 49164569, "question_id": 49163171, "link": "https://stackoverflow.com/questions/49163171/qt5-qprocess-handling-arguments-with-special-characters/49164569#49164569", "title": "Qt5 QProcess handling arguments with &quot;special&quot; characters", "body": "<blockquote>\n  <p>When I build my QProcess argument list I specifically make sure the password is surrounded by ' so that the special characters are escaped.</p>\n</blockquote>\n\n<p>Do not append or prepend the password with <code>'</code>, remove these lines</p>\n\n<pre><code>password.prepend(\"'\");\npassword.append(\"'\");\n</code></pre>\n\n<p><code>QProcess::start</code> is responsible for proper way of program arguments passing. Besides bash interpreter is not run by this call in your code.</p>\n"}], "owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 49164569, "answer_count": 1, "score": 0, "last_activity_date": 1520484620, "creation_date": 1520466625, "last_edit_date": 1520484620, "question_id": 49163171, "link": "https://stackoverflow.com/questions/49163171/qt5-qprocess-handling-arguments-with-special-characters", "title": "Qt5 QProcess handling arguments with &quot;special&quot; characters", "body": "<p>I'm maintaining a <code>Qt5</code> program that uses <code>QProcess</code> to execute <code>ncftpget</code> on <code>Linux</code>.</p>\n\n<p>The command that I'm attempting to execute is:</p>\n\n<p><code>ncftpget -E -Z -u username -p 'a#$b1379' 1.1.1.1 /x/y/temp/ update/file</code></p>\n\n<p>Which simply transfers a file from a server into a local directory. If I execute the above command on the bash command line it works properly.</p>\n\n<p>However, when my <code>Qt5</code> application executes the same command using <code>QProcess</code> the <code>ftp</code> server replies saying the username/password is not correct. When the password doesn't contain any \"special\" characters it works properly.</p>\n\n<p>As mentioned by <a href=\"https://stackoverflow.com/users/6752050/s-m\">S.M.</a> <code>QProcess</code> isn't executing the command in a shell. So I'm assuming <code>fork()</code> and some version of the <code>exec()</code> call is made. <strong>How do I make <code>QProcess</code> do the correct thing here?</strong></p>\n\n<p>I'm assuming that the problem has do to with the special character(s) in the password. When I build my <code>QProcess</code> argument list I specifically make sure the password is surrounded by <code>'</code> so that the special characters are escaped.</p>\n\n<p>Code snippet:</p>\n\n<pre><code>processFTP.setParent(this-&gt;parent());\nprocessFTP.setProcessChannelMode(QProcess::MergedChannels);\n\n// ncftpArgs is a QStringList\n// snippet doesn't show complete argument list\n\nncftpArgs-&gt;push_back(\"-Z\");\nncftpArgs-&gt;push_back(\"-u\");//username\nncftpArgs-&gt;push_back(QString((*phashSettings)[FTPUSERNAME]));\nncftpArgs-&gt;push_back(\"-p\");//pw\n// password can have special characters when shell executes command.\nQString password((*phashSettings)[FTPPASSWORD]);\npassword.prepend(\"'\");\npassword.append(\"'\");\nncftpArgs-&gt;push_back(password);\n\nncftpArgs-&gt;push_back(QString((*phashSettings)[FTPSERVERIP]));\nncftpArgs-&gt;push_back(QString((*phashSettings)[FTPTEMPDIR]));\n\n//beging the ncftpget session\nQString sExe = \"ncftpget\";  //process name\n\n// processFTP is a QProcess object\nprocessFTP.start(sExe, (*ncftpArgs));\nbSuccess = processFTP.waitForStarted();\n\n// .... more code to monitor process etc...\n</code></pre>\n\n<p>The code logs the command and arguments that will passed to <code>processFTP</code> and everything looks correct.</p>\n\n<p><strong>How do I properly set up the arguments and start the <code>QProcess</code> object so that the password argument containing the special characters are properly passed to the executable <code>ncftpget</code>?</strong></p>\n\n<p><strong>And/or how do I go about debugging the problem?</strong></p>\n"}, {"tags": ["c++", "class", "reference", "undefined"], "comments": [{"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1520466463, "post_id": 49163106, "comment_id": 85331923, "body": "What does your class definition look like?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1520466535, "post_id": 49163106, "comment_id": 85331939, "body": "It is necessary to link both object files explicitly.     The linker doesn&#39;t magically find the functions in Car.cpp unless it is supplied with Car.o"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520466548, "post_id": 49163106, "comment_id": 85331943, "body": "Looks like you didn&#39;t compile/link Car.cpp/Car.o."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1520471933, "post_id": 49163106, "comment_id": 85333393, "body": "Please create a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>."}], "owner": {"reputation": 37, "user_id": 8075115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9ce9fdb9d6c8d529d122a43b7e2331?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nordin", "link": "https://stackoverflow.com/users/8075115/ben-nordin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1520474810, "answer_count": 0, "score": 0, "last_activity_date": 1520474556, "creation_date": 1520466222, "last_edit_date": 1520474556, "question_id": 49163106, "link": "https://stackoverflow.com/questions/49163106/undefined-reference-to-carfunction", "closed_reason": "Duplicate", "title": "Undefined reference to Car::Function", "body": "<p>I have been getting this error for my project and I can't figure out why I am getting it. While this is a common error, none of the other posts seem to have the correct solution.</p>\n\n<p>Can't figure out this error:</p>\n\n<p>Main function: (proj5.cpp)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"Vehicle.h\"\n#include \"Car.h\"\n\nusing namespace std;\n\nint main(void){\n\n  cout &lt;&lt; \"\\n\" &lt;&lt;\n      \"////////////////////////////\\n\" &lt;&lt;\n      \"/////    Base Tests    /////\\n\" &lt;&lt;\n      \"////////////////////////////\" &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Base Default ctor\" &lt;&lt; endl;\n  Vehicle v1;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Base insertion operator\" &lt;&lt; endl;\n  cout &lt;&lt; v1 &lt;&lt; endl;\n  cout &lt;&lt; \"Base idgen: \" &lt;&lt; Vehicle::getIdgen() &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Base Parametrized ctor\" &lt;&lt; endl;\n  float lla_rno[3] = {39.54, 119.82, 4500.0};\n  Vehicle v99(99, lla_rno);\n\n  cout &lt;&lt; v99 &lt;&lt; endl;\n  cout &lt;&lt; \"Base idgen: \" &lt;&lt; Vehicle::getIdgen() &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Base Copy ctor\" &lt;&lt; endl;\n  Vehicle v99_cpy( v99 );  \n\n  cout &lt;&lt; v99_cpy &lt;&lt; endl;\n  cout &lt;&lt; \"Base idgen: \" &lt;&lt; Vehicle::getIdgen() &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Base Assignment operator\" &lt;&lt; endl;\n  v1 = v99_cpy;\n  cout &lt;&lt; v1 &lt;&lt; endl;\n  cout &lt;&lt; \"Base idgen: \" &lt;&lt; Vehicle::getIdgen() &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Base Move Function\" &lt;&lt; endl;\n  float lla_new[3] = {37.77, 122.42, 52.0};\n  v1.move( lla_new );  \n\n\n  cout &lt;&lt; \"\\n\" &lt;&lt;\n      \"////////////////////////////\\n\" &lt;&lt;\n      \"/////   Derived Tests  /////\\n\" &lt;&lt;\n      \"////////////////////////////\" &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Derived Default ctor\" &lt;&lt; endl;\n  Car c1;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Derived insertion operator\" &lt;&lt; endl;\n  cout &lt;&lt; c1 &lt;&lt; endl;\n  cout &lt;&lt; \"Derived idgen: \" &lt;&lt; Car::getIdgen() &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Derived Parametrized ctor\" &lt;&lt; endl;\n  char plates_999[] = \"Gandalf\";\n  Car c999(plates_999, 999, lla_rno);\n\n  cout &lt;&lt; c999 &lt;&lt; endl;\n  cout &lt;&lt; \"Derived idgen: \" &lt;&lt; Car::getIdgen() &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Derived Copy ctor\" &lt;&lt; endl;\n  Car c999_cpy( c999 );  \n\n  cout &lt;&lt; c999_cpy &lt;&lt; endl;\n  cout &lt;&lt; \"Derived idgen: \" &lt;&lt; Car::getIdgen() &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Derived Assignment operator\" &lt;&lt; endl;\n  c1 = c999_cpy;\n  cout &lt;&lt; c1 &lt;&lt; endl;\n  cout &lt;&lt; \"Derived idgen: \" &lt;&lt; Car::getIdgen() &lt;&lt; endl;\n\n  cout &lt;&lt; endl &lt;&lt; \"Testing Derived Move Function\" &lt;&lt; endl;\n  c1.move( lla_new );  \n\n  cout &lt;&lt; \"\\n\" &lt;&lt;\n      \"////////////////////////////\\n\" &lt;&lt;\n      \"/////    Tests Done    /////\\n\" &lt;&lt;\n      \"////////////////////////////\" &lt;&lt; endl;\n\n  return 0;\n\n}\n</code></pre>\n\n<p>Car.cpp:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n    #include \"Car.h\"\n    #include \"Vehicle.h\"\n    using namespace std;\n    Car::Car()\n    {\n    m_throttle = 0;\n    const int m_vin = getIdgen();\n    m_lla = (float*)malloc(sizeof(float) * 3);\n    cout &lt;&lt; \"Car #\" &lt;&lt; m_vin &lt;&lt; \": Default-ctor\" &lt;&lt; endl;\n}\nCar::Car(char * plates, int vin, float * lla)\n{\n    strcpy(m_plates, plates);\n    const int m_vin = *vin;\n    for(int i = 0; i &lt; 3; i++)\n    {\n        m_lla[i] = lla[i];\n    }\n    cout &lt;&lt; \"Car # \" &lt;&lt; m_vin &lt;&lt;\": Parametrized-ctor\" &lt;&lt; endl;\n}\nCar::Car(Car &amp; old)\n{\n    const int m_vin = old.getVin();\n    strcpy(m_plates, old.getPlates());\n    setLLA(*(old.getLLA()));\n    cout &lt;&lt; \"Car #\" &lt;&lt; m_vin &lt;&lt; \": Copy-ctor\" &lt;&lt; endl;\n}\nCar::~Car()\n{\n    cout &lt;&lt; \"Car #\" &lt;&lt; m_vin &lt;&lt; \": Dtor\" &lt;&lt; endl;\n}\nchar * Car::getPlates()\n{\n    return m_plates;\n}\nvoid Car::operator=(Car &amp; car)\n{\n    this-&gt;m_throttle = getThrottle();\n    strcpy(this-&gt;m_plates, car.getPlates());\n    const int m_vin = car.getVin();\n    this-&gt;m_lla = car.getLLA();\n    cout &lt;&lt; \"Car #\" &lt;&lt; m_vin &lt;&lt; \": Assignment\" &lt;&lt; endl;\n}\nint Car::getThrottle()\n{\n    return m_throttle;\n}\nvoid Car::setThrottle(int num)\n{\n    m_throttle = num;\n}\nvoid Car::setPlates(char * plates)\n{\n    strcpy(m_plates, plates);\n}\nvoid Car::drive(int * num)\n{\n    m_throttle = *num;\n}\nvoid Car::move(float * lla)\n{\n    this-&gt;setLLA(*lla);\n    cout &lt;&lt; \"Car #\" &lt;&lt; m_vin &lt;&lt; \": DRIVE to destination, with throttle @ 75\" &lt;&lt; endl; \n}\n</code></pre>\n\n<p>Car.h:\n    #</p>\n\n<pre><code>ifndef CAR_H_\n    #define CAR_H_\n    #include \"Vehicle.h\"\n    class Car: public Vehicle\n    {\n        public:\n            Car();\n            Car(char * plates, int vin, float * lla);\n            Car(Car &amp; old);\n            ~Car();\n            void operator=(Car &amp; car);\n            char * getPlates();\n            int getThrottle();\n            void setPlates(char * plates);\n            void setThrottle(int throttle);\n            void drive(int * throttle);\n            void move(float * lla);\n\n        private:\n            char * m_plates;\n            int m_throttle;\n    };\n    #endif\n</code></pre>\n\n<p>Here is the error:</p>\n\n<p>/tmp/cczSuMnH.o: In function <code>main':\n        proj5.cpp:(.text+0x3bd): undefined reference to</code>Car::Car()'\n        proj5.cpp:(.text+0x487): undefined reference to <code>Car::Car(char*, int, float*)'\n        proj5.cpp:(.text+0x50e): undefined reference to</code>Car::Car(Car&amp;)'\n        proj5.cpp:(.text+0x595): undefined reference to <code>Car::operator=(Car&amp;)'\n        proj5.cpp:(.text+0x61f): undefined reference to</code>Car::move(float*)'\n        proj5.cpp:(.text+0x673): undefined reference to <code>Car::~Car()'\n        proj5.cpp:(.text+0x67f): undefined reference to</code>Car::~Car()'\n        proj5.cpp:(.text+0x68b): undefined reference to <code>Car::~Car()'\n        proj5.cpp:(.text+0x6da): undefined reference to</code>Car::~Car()'\n        proj5.cpp:(.text+0x6eb): undefined reference to <code>Car::~Car()'\n        /tmp/cczSuMnH.o:proj5.cpp:(.text+0x6fc): more undefined references to</code>Car::~Car()' follow\n        collect2: error: ld returned 1 exit status</p>\n"}, {"tags": ["c++", "c", "linux", "debugging", "gdb"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1520469426, "post_id": 49163052, "comment_id": 85332699, "body": "<i>&quot;exec file is newer than core file.&quot;</i> That&#39;s a big red flag. Why/how is your executable newer than the coredump?"}, {"owner": {"reputation": 179, "user_id": 4476202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7ae7b8ae01ad5052cbdfaf16c895f88?s=128&d=identicon&r=PG&f=1", "display_name": "adowdy", "link": "https://stackoverflow.com/users/4476202/adowdy"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520473965, "post_id": 49163052, "comment_id": 85333838, "body": "That&#39;s a keen observation. It says that because I recopied the application over to the target device, but the application was not changed in any way (so far as I know). It should be the same file with which the core was generated bit by bit"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520505935, "post_id": 49163052, "comment_id": 85347357, "body": "Okay good stuff. (Usually a copy would keep the original timestamp, but this depends on your copying software.)"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 4476202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7ae7b8ae01ad5052cbdfaf16c895f88?s=128&d=identicon&r=PG&f=1", "display_name": "adowdy", "link": "https://stackoverflow.com/users/4476202/adowdy"}, "edited": false, "score": 0, "creation_date": 1520481325, "post_id": 49164532, "comment_id": 85335592, "body": "Thank you, I will review tomorrow and see if i can solve these gdb warnings in some way"}], "tags": [], "owner": {"reputation": 266, "user_id": 4622843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed7c45f601c2672c4137f38c11e621ff?s=128&d=identicon&r=PG&f=1", "display_name": "mere3ortal", "link": "https://stackoverflow.com/users/4622843/mere3ortal"}, "is_accepted": true, "score": 0, "last_activity_date": 1520476981, "creation_date": 1520476981, "answer_id": 49164532, "question_id": 49163052, "link": "https://stackoverflow.com/questions/49163052/gdb-with-corefile-on-remote-embedded-device-how-to-get-more-information-about/49164532#49164532", "title": "GDB with corefile on remote embedded device - How to get more information about backtrace?", "body": "<p>(1)\nThe</p>\n\n<blockquote>\n  <p>Do you need \"set solib-search-path\" or \"set sysroot\"?</p>\n</blockquote>\n\n<p>is a problem. Check the path (on your device) where linux-vdso.so.1 resides, and include that in the solib-search-path. Similarly for the other shared-object libraries that your program uses. E.g. if some shared-object libraries are in /lib, some are in /usr/adowdy/lib and some are in /usr/adowdy/arm/lib, you can say:</p>\n\n<blockquote>\n  <p>(gdb) set solib-search-path /lib:/usr/adowdy/lib:/usr/adowdy/arm/lib</p>\n</blockquote>\n\n<p>(2) The</p>\n\n<blockquote>\n  <p>warning: Unable to find libthread_db matching inferior's thread\n  library, thread debugging will not be available.</p>\n</blockquote>\n\n<p>is also a problem. See the answer to <a href=\"https://stackoverflow.com/questions/11585472/unable-to-debug-multi-threaded-application-with-gdb\">this question</a></p>\n\n<p>(3) The</p>\n\n<blockquote>\n  <p>failed to allocate 65611 bytes</p>\n</blockquote>\n\n<p>is a clue. Are you, by any chance, trying to allocate a negative number of bytes (maybe 65536 - 65611 = -75 bytes)? </p>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 4476202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7ae7b8ae01ad5052cbdfaf16c895f88?s=128&d=identicon&r=PG&f=1", "display_name": "adowdy", "link": "https://stackoverflow.com/users/4476202/adowdy"}, "edited": false, "score": 0, "creation_date": 1520481260, "post_id": 49164537, "comment_id": 85335572, "body": "You are right. I just said that because the stack trace information gives zero new information that I don&#39;t already know from the log error. I&#39;m hoping to use GDB to glean more about what part of the program actually causes this allocation error. It&#39;s frighteningly huge codebase to review every single spot where a malloc type call is initiated in this way. I was hoping to at least get to the point where gdb can show the thread names, for instance!"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1520477041, "creation_date": 1520477041, "answer_id": 49164537, "question_id": 49163052, "link": "https://stackoverflow.com/questions/49163052/gdb-with-corefile-on-remote-embedded-device-how-to-get-more-information-about/49164537#49164537", "title": "GDB with corefile on remote embedded device - How to get more information about backtrace?", "body": "<blockquote>\n  <p>Also the core dump backtrace gives some useless stuff.</p>\n</blockquote>\n\n<p>It's not entirely useless. The stack trace, and the message from the application say the same thing: your application ran out of memory (<code>malloc</code> failed to allocate 65611 bytes).</p>\n\n<p>While a more complete stack would tell you <em>which</em> particular call to <code>g_malloc</code> failed, it's very likely to not matter in practice -- if this <code>g_malloc</code> didn't fail, the next one would.</p>\n\n<p>You likely have a memory leak, or are simply allocating too much memory for what your system allows.</p>\n\n<p>You should look into many debugging tools built for solving this exact problem.</p>\n"}], "owner": {"reputation": 179, "user_id": 4476202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7ae7b8ae01ad5052cbdfaf16c895f88?s=128&d=identicon&r=PG&f=1", "display_name": "adowdy", "link": "https://stackoverflow.com/users/4476202/adowdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 49164532, "answer_count": 2, "score": 0, "last_activity_date": 1520477041, "creation_date": 1520465859, "last_edit_date": 1520474575, "question_id": 49163052, "link": "https://stackoverflow.com/questions/49163052/gdb-with-corefile-on-remote-embedded-device-how-to-get-more-information-about", "title": "GDB with corefile on remote embedded device - How to get more information about backtrace?", "body": "<p>I have a core dump from a C++ application running on an embedded imx6 board (yocto linux). I can put gdb on the box and run it in a terminal to examine the core file like so just fine:</p>\n\n<pre><code>gdb myApplication core.udpsrc256:src.1520419431.5526\n</code></pre>\n\n<p>I get extremely limited information, and really need to know more about what caused the core dump. All I have is a printout from the application:</p>\n\n<pre><code>(myApplication:5526): GLib-ERROR **: ../../glib-2.46.2/glib/gmem.c:100: failed to allocate 65611 bytes\n./run-app.sh: line 8:  5526 Trace/breakpoint trap   (core dumped) XDG_RUNTIME_DIR=/run/user/root ./myApplication\n</code></pre>\n\n<p>Also the core dump backtrace gives some useless stuff. I need to know more stuff up the stack that led to this frame:</p>\n\n<pre><code>#0  0x75ff1910 in raise () from /lib/libc.so.6\n[Current thread is 1 (LWP 5533)]\n(gdb) \n(gdb) \n(gdb) bt\n#0  0x75ff1910 in raise () from /lib/libc.so.6\n#1  0x6b169558 in g_logv () from /usr/lib/libglib-2.0.so.0\n#2  0x6b169610 in g_log () from /usr/lib/libglib-2.0.so.0\n#3  0x6b1681c4 in g_malloc () from /usr/lib/libglib-2.0.so.0\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\n</code></pre>\n\n<p>Sidenote -- there is some warnings when I startup gdb:</p>\n\n<pre><code>GNU gdb (GDB) 7.10.1\nCopyright (C) 2015 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"arm-poky-linux-gnueabi\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from qt5qmlvideo...done.\n\nwarning: exec file is newer than core file.\n[New LWP 5533]\n[New LWP 5526]\n[New LWP 5531]\n[New LWP 5528]\n[New LWP 5534]\n[New LWP 21064]\n[New LWP 5536]\n[New LWP 21065]\n[New LWP 5532]\n[New LWP 5527]\n[New LWP 5530]\n[New LWP 5537]\n\nwarning: Could not load shared library symbols for linux-vdso.so.1.\nDo you need \"set solib-search-path\" or \"set sysroot\"?\n\nwarning: Unable to find libthread_db matching inferior's thread library, thread debugging will not be available.\n\nwarning: Unable to find libthread_db matching inferior's thread library, thread debugging will not be available.\nCore was generated by `./qt5qmlvideo -platform wayland'.\nProgram terminated with signal SIGTRAP, Trace/breakpoint trap.\n#0  0x75ff1910 in raise () from /lib/libc.so.6\n[Current thread is 1 (LWP 5533)]\n(gdb) \n</code></pre>\n\n<p>Can anyone help? Do I need some of the stuff gdb warns about... or can i rebuild my application and its dependencies in some other configuration that would give more output? Thank you!</p>\n\n<p>Some more notes that may matter -</p>\n\n<p>This is a multithreaded application running a gstreamer pipeline. Many gstreamer plugins generate their own threads, one of which in this pipeline is 'udpsrc'. I'm wondering if it's because this failure happens in one of those threads is the reason why I can't get details, but I want to know how to get it to show the details if possible!</p>\n"}, {"tags": ["c++", "qt", "qlabel"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1520468147, "post_id": 49162969, "comment_id": 85332380, "body": "How do you call displayNotif ?, through a signal?"}, {"owner": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1520468860, "post_id": 49162969, "comment_id": 85332555, "body": "No, I&#39;m having this program run as a daemon, so I just have a while (true) loop that checks the volume and calls displayNotif if the volume changed."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1520469248, "post_id": 49162969, "comment_id": 85332647, "body": "a while True in a GUI? you could provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your project since the exec blocks the following lines."}, {"owner": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1520470314, "post_id": 49162969, "comment_id": 85332952, "body": "Sure, sorry about that. I&#39;ve edited the post to include my main function. It&#39;s not entirely complete, as I didn&#39;t add my getVolume function, but it&#39;s pretty self explanatory. Hope that&#39;s alright."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1520470405, "post_id": 49162969, "comment_id": 85332990, "body": "getVolume() takes a long time to execute or is it almost instantaneous?"}, {"owner": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1520470524, "post_id": 49162969, "comment_id": 85333018, "body": "It&#39;s almost instantaneous."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "edited": false, "score": 0, "creation_date": 1520482264, "post_id": 49163916, "comment_id": 85335841, "body": "Thanks! This works perfect for my question. Unfortunately, in my attempt to make my code &quot;Minimal&quot;, I exempted a snippet where I add a QPropertyAnimation to the dialog, so that it slides in from the right of my screen. Here&#39;s what that looks like:   <code>QPropertyAnimation *slideIn = new QPropertyAnimation(w, &quot;pos&quot;);\t slideIn-&gt;setDuration(750); slideIn-&gt;setStartValue(QPoint(1800, 30)); slideIn-&gt;setEndValue(QPoint(1250, 30)); slideIn-&gt;setEasingCurve(QEasingCurve::InBack); slideIn-&gt;start();</code>  Where can I add this into my code? If I put it into the conect loop, it does the animation again"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "edited": false, "score": 0, "creation_date": 1520482409, "post_id": 49163916, "comment_id": 85335870, "body": "@CalebVanTassel  if you update your code I could adapt my code. If my answer helps you, do not forget to mark it as correct, if you do not know how to do it, check the <a href=\"https://stackoverflow.com/tour\">tour</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "edited": false, "score": 0, "creation_date": 1520482445, "post_id": 49163916, "comment_id": 85335876, "body": "@CalebVanTassel what is <code>this</code>?, What relationship does the dialog and the QLabel have?"}, {"owner": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "edited": false, "score": 0, "creation_date": 1520482709, "post_id": 49163916, "comment_id": 85335958, "body": "My apologies. Didn&#39;t realize hitting enter submitted. I edited my code to put in the animation where I had it. I definitely will not forget to mark it as correct! Thanks!"}, {"owner": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "edited": false, "score": 0, "creation_date": 1520484163, "post_id": 49163916, "comment_id": 85336439, "body": "You are the master! Thank you so much!"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1520483196, "last_edit_date": 1520483196, "creation_date": 1520472269, "answer_id": 49163916, "question_id": 49162969, "link": "https://stackoverflow.com/questions/49162969/how-can-i-update-a-qlabel-over-a-period-of-time/49163916#49163916", "title": "How can I update a QLabel over a period of time?", "body": "<p>It is not necessary to use while True for this repetitive task, just use a <code>QTimer</code>, when using <code>QEventLoop</code> you do not leave any way to update any component of the GUI.</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QLabel&gt;\n#include &lt;QTimer&gt;\n#include &lt;QDebug&gt;\n#include &lt;QPropertyAnimation&gt;\n\nclass NotifyLabel: public QLabel{\n    Q_OBJECT\n    QTimer timer{this};\n    QPropertyAnimation slideIn{this, \"pos\"};\npublic:\n    NotifyLabel(){\n        timer.setSingleShot(true);\n        timer.setInterval(3000);\n        connect(&amp;timer, &amp;QTimer::timeout, this, &amp;NotifyLabel::hide);\n        slideIn.setDuration(750);\n        slideIn.setStartValue(QPoint(1800, 30));\n        slideIn.setEndValue(QPoint(1250, 30));\n        slideIn.setEasingCurve(QEasingCurve::InBack);\n    }\n    void displayNotif(int value){\n        if(timer.isActive()){\n            timer.stop();\n        }\n        else\n            slideIn.start();\n        setText(QString(\"%1% volume\").arg(value));\n        show();\n        timer.start();\n    }\n};\n\nstatic int  getVolume(){\n    // emulate volume\n    return 1+ rand() % 3;\n}\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    NotifyLabel w;\n    QTimer timer;\n\n    int current_vol;\n\n    QObject::connect(&amp;timer, &amp;QTimer::timeout, [&amp;w, &amp;current_vol](){\n        int update_vol = getVolume();\n\n        qDebug()&lt;&lt;update_vol;\n\n        if(current_vol != update_vol){\n            w.displayNotif(update_vol);\n        }\n        current_vol = update_vol;\n    });\n    timer.start(2000);\n    return a.exec();\n}\n\n#include \"main.moc\"\n</code></pre>\n\n<p>in the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/49162969\" rel=\"nofollow noreferrer\">link</a> you will find the complete example.</p>\n"}], "owner": {"reputation": 15, "user_id": 2781861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b2cac026de88d981b7e9d89a348327?s=128&d=identicon&r=PG&f=1", "display_name": "Caleb Van Tassel", "link": "https://stackoverflow.com/users/2781861/caleb-van-tassel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 49163916, "answer_count": 1, "score": 0, "last_activity_date": 1520483196, "creation_date": 1520465235, "last_edit_date": 1520482631, "question_id": 49162969, "link": "https://stackoverflow.com/questions/49162969/how-can-i-update-a-qlabel-over-a-period-of-time", "title": "How can I update a QLabel over a period of time?", "body": "<p>I'm attempting to create a program to display notifications on my desktop. I've started by using a QLabel that pops up whenever I change my volume.</p>\n\n<p>Here I have a function that takes a QLabel and string as parameters and updates the label with the string's text:</p>\n\n<pre><code>void displayNotif (QLabel* label, int labelText) {\n    labelStr = QString::number(labelText) + \"% volume\";\n    label -&gt; setText(labelStr);\n    label -&gt; raise();\n    label -&gt; show();\n\n    //Animation\n    QPropertyAnimation *slideIn = new QPropertyAnimation(label, \"pos\");\n    slideIn-&gt;setDuration(750);\n    slideIn-&gt;setStartValue(QPoint(1800, 30));\n    slideIn-&gt;setEndValue(QPoint(1250, 30));\n    slideIn-&gt;setEasingCurve(QEasingCurve::InBack);\n    slideIn-&gt;start();\n\n\n    // Wait 3 seconds \n    QEventLoop loop;\n    QTimer::singleShot(3000, &amp;loop, SLOT(quit()));\n    loop.exec();\n\n    // Close block\n    label -&gt; hide();\n}\n</code></pre>\n\n<p>This function is called in a loop in the main that waits every 1 second and checks if the volume has changed. My issue is that whenever I increase the volume over more than one second, the dialog ends up displaying twice (or more), which makes sense because it checks again and the volume is not the same as it was a second ago. </p>\n\n<p>What I'd like to do is have the label update continuously for the three seconds that is showing, but as far as I know, you can just</p>\n\n<pre><code>while( loop.exec() ) { //UpdateLabel }\n</code></pre>\n\n<p>How can I accomplish this? It would also help to be able to then have it show for longer if the volume is still increasing/decreasing. </p>\n\n<p>Thanks in advance!</p>\n\n<p>Edit:</p>\n\n<p>Here's what the main function, which calls the displayNotif, looks like:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QLabel&gt;\n#include &lt;QProcess&gt;\n#include &lt;QTimer&gt;\n#include \"getBattery.h\"\n#include \"getVolume.h\"\n#include \"displayNotif.h\"\n#include \"AnimatedLabel.h\"\n\nint main(int argc, char *argv[]) {\n\n    QApplication app(argc, argv);\n\n    // Create Label\n    QLabel *hello = new QLabel();\n\n    int vol;\n    vol = getVolume();\n    QEventLoop loop;\n\n    while (true) {\n        //Check if volume is updated\n        if (getVolume() != vol) {\n            vol = getVolume();\n            displayNotif (hello, vol);\n        }\n\n        // Wait .2 second\n        QTimer::singleShot(200, &amp;loop, SLOT(quit()));\n        loop.exec();\n\n    }\n    return app.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "templates", "code-generation", "auto-generate"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1520464826, "post_id": 49162871, "comment_id": 85331423, "body": "You can&#39;t - the name of a class musrt be known at compile-time. Your design is wrong."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1520464928, "post_id": 49162871, "comment_id": 85331459, "body": "@NeilButterworth I understand that much yes. But that is why I did mention <code>templates</code> if they could be used."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1520465009, "post_id": 49162871, "comment_id": 85331479, "body": "Templates are compile-time things too. You appear to want to create classes at run-time, which is not possible in C++."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1520465075, "post_id": 49162871, "comment_id": 85331508, "body": "So it appears that I have to resort to <code>writing out to files only</code>."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 2, "creation_date": 1520465165, "post_id": 49162871, "comment_id": 85331541, "body": "I think the best you can do here is a pre-build step that generates the code.  We used such a thing to build a resource class from a folder of files on a project some years ago."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1520465202, "post_id": 49162871, "comment_id": 85331551, "body": "No idea what you mean by that. It&#39;s highly unlikely that whatever  your problem is it hasn&#39;t been solved many times before. I don&#39;t see why you think you need to autogenerate anything - autogeneration is almost always a severe code smell."}, {"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1520465233, "post_id": 49162871, "comment_id": 85331563, "body": "A bit off topic, but perhaps it is time for you to look into Lisp (Common-Lisp, Clojure, ...). These sort of things are natural to lispy languages. Also, perhaps you should use Bison as your parser. If you rework the problem, Bison may be the tool needed"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520465259, "post_id": 49162871, "comment_id": 85331570, "body": "I don&#39;t understand the question. <i>&quot;my class&#39;s identifier&quot;</i> Do you mean class name? <i>&quot;how can I extract the text&quot;</i> Extract from where?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1520465563, "post_id": 49162871, "comment_id": 85331664, "body": "I believe OP wants to do something like Perl&#39;s <code>eval &quot;sub foo { print \\&quot;Hi.\\&quot;; }&quot;; foo();</code>, to define names during a running program. But C++ doesn&#39;t have a thing like <code>eval</code>."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1520467613, "post_id": 49162871, "comment_id": 85332244, "body": "@aschepler I don&#39;t know Perl so I can&#39;t say if it&#39;s similar or not, but I do appreciate the reference."}], "answers": [{"comments": [{"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1520466108, "post_id": 49163024, "comment_id": 85331813, "body": "I myself am using common-lisp more often :D"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 1, "creation_date": 1520466138, "post_id": 49163024, "comment_id": 85331829, "body": "@Makketronix: Hopefully it&#39;s not contagious :)"}, {"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1520466169, "post_id": 49163024, "comment_id": 85331841, "body": "@ LRO No, but addictive!"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1520468400, "post_id": 49163024, "comment_id": 85332437, "body": "I wasn&#39;t fully sure if it could be done or not (even with template meta programming); but my initial assumption was no. Now it is fully confirmed. Thank You!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 1, "creation_date": 1520469444, "post_id": 49163024, "comment_id": 85332705, "body": "@FrancisCugler: No problem."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1520465627, "creation_date": 1520465627, "answer_id": 49163024, "question_id": 49162871, "link": "https://stackoverflow.com/questions/49162871/auto-class-generator/49163024#49163024", "title": "Auto Class Generator", "body": "<p>You can't.</p>\n\n<p>C++ programs cannot modify themselves.</p>\n\n<p>If you want to auto-generate C++ code, do it as an pre-compilation step in your build process.</p>\n\n<p>I myself have a nice Python script generating a ton of C++ classes (and their accompanying boilerplate) each representing one of several \"message types\" defined by a third party. It's lovely.</p>\n"}], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "accepted_answer_id": 49163024, "answer_count": 1, "score": 0, "last_activity_date": 1520467993, "creation_date": 1520464746, "last_edit_date": 1520467993, "question_id": 49162871, "link": "https://stackoverflow.com/questions/49162871/auto-class-generator", "title": "Auto Class Generator", "body": "<p>I had originally asked this question here: <a href=\"https://stackoverflow.com/questions/49162554/an-in-code-class-auto-generator-from-a-string-of-text-or-some-other-mechanism?noredirect=1#comment85331027_49162554\">Former Question</a></p>\n\n<p>It appears that what I was asking for was misunderstood. I will try to make this as clear and as brief as possible:</p>\n\n<hr>\n\n<p>I'm working on a parser that will automatically generate a <code>c++</code> <code>class</code> and if the names of the header and cpp files are present the parser will write out those files respectively. If they are omitted then the parser will not write any files where it will generate a class automatically based on the information that is pulled in from the file.</p>\n\n<p>What I don't know how to do: Let's say my class's identifier is stored in a <code>std::string</code> how can I extract the text in the string to use that as the class's name. For example:</p>\n\n<pre><code>{ \n    std::string className( \"Foo\" );\n\n    // parser writing class in code\n    class className { ....\n\n} \n</code></pre>\n\n<p>This is what I don't know how to do if it can even be done. As stated in my previous question I prefer to stay away from <code>macros</code> but wouldn't mind using <code>templates</code> if needed or some other mechanism.</p>\n\n<hr>\n\n<p><strong>Conclusion</strong></p>\n\n<p>After reading the comments and the provided answer below; my initial assumption that I didn't mention was in fact proven true. It can not be done. I was suspicious of this, but only wanted to confirm. So this does leave me in having to write out to files in order to create the needed header and or source files at run time.  </p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520464299, "post_id": 49162751, "comment_id": 85331266, "body": "I&#39;m not sure what <code>__inline</code> is, but why are you trying to apply it to something that seemingly can&#39;t be inlined because it&#39;s in a different file?"}, {"owner": {"reputation": 142, "user_id": 6035741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXTNr.jpg?s=128&g=1", "display_name": "SoLux", "link": "https://stackoverflow.com/users/6035741/solux"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520464430, "post_id": 49162751, "comment_id": 85331301, "body": "i don&#39;t think that&#39;s how it works, but it doesn&#39;t really matter since it doesn&#39;t fix my problem sadly. any other ideas?"}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1520464431, "post_id": 49162751, "comment_id": 85331302, "body": "I assume this is at the linking stage? Did you remember to include this object file when you go to build the executable?"}, {"owner": {"reputation": 142, "user_id": 6035741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXTNr.jpg?s=128&g=1", "display_name": "SoLux", "link": "https://stackoverflow.com/users/6035741/solux"}, "reply_to_user": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1520464480, "post_id": 49162751, "comment_id": 85331318, "body": "@Daniel you mean like including myclass.hpp in myclass.cpp? of course. like i said, only one constructor gives me this error for some reason"}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 1, "creation_date": 1520464541, "post_id": 49162751, "comment_id": 85331345, "body": "@Charles not quite, I mean when you go to link such as <code>g++ -o program filea.o fileb.o ...</code> and then you just didn&#39;t include myclass.o in your linker step"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520464582, "post_id": 49162751, "comment_id": 85331358, "body": "Does it work if you remove <code>__inline</code>?"}, {"owner": {"reputation": 142, "user_id": 6035741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXTNr.jpg?s=128&g=1", "display_name": "SoLux", "link": "https://stackoverflow.com/users/6035741/solux"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520464583, "post_id": 49162751, "comment_id": 85331360, "body": "uhh, i&#39;m using an IDE (visual studio) @HolyBlackCat sadly, no"}, {"owner": {"reputation": 142, "user_id": 6035741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXTNr.jpg?s=128&g=1", "display_name": "SoLux", "link": "https://stackoverflow.com/users/6035741/solux"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520464676, "post_id": 49162751, "comment_id": 85331384, "body": "NEVERMIND guys, it works now. Thanks @HolyBlackCat. I swear the first time I wrote it it had no inline, it gave errors, I added inline, still errors and I assumed if I remove it it won&#39;t make a difference, but it did for some reason. Weird"}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1520464687, "post_id": 49162751, "comment_id": 85331388, "body": "Are you compiling/building one file at a time or do you have all of these files together in one project? It really seems like you are forgetting to include myclass.o in the linker step so the linker has no idea where the definition of the constructor is"}, {"owner": {"reputation": 142, "user_id": 6035741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXTNr.jpg?s=128&g=1", "display_name": "SoLux", "link": "https://stackoverflow.com/users/6035741/solux"}, "reply_to_user": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1520464791, "post_id": 49162751, "comment_id": 85331414, "body": "@Daniel thanks man but if that would have been the case, why would only one definition not be linked? (I have 3 constructors and the deconstructor)"}, {"owner": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1520465034, "post_id": 49162751, "comment_id": 85331493, "body": "@Charles it would just depend on the other parts of the code you didn&#39;t show. I haven&#39;t written a function declaration without a definition in a long time, but I thought the linker may only check if the function definition actually exists if it is explicitly used somewhere. I assumed that was the only version of the constructor that you were using."}, {"owner": {"reputation": 142, "user_id": 6035741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXTNr.jpg?s=128&g=1", "display_name": "SoLux", "link": "https://stackoverflow.com/users/6035741/solux"}, "reply_to_user": {"reputation": 1271, "user_id": 9317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ff9e5ffcbb94507cb9517cde337c91?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9317835/daniel"}, "edited": false, "score": 0, "creation_date": 1520465148, "post_id": 49162751, "comment_id": 85331535, "body": "@Daniel Oh I understand what you mean. I get why would think this. Thanks anyway"}, {"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1520465839, "post_id": 49162751, "comment_id": 85331747, "body": "Lesson learned: Don&#39;t trust your: &quot;make clean&quot;"}], "owner": {"reputation": 142, "user_id": 6035741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXTNr.jpg?s=128&g=1", "display_name": "SoLux", "link": "https://stackoverflow.com/users/6035741/solux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520479428, "creation_date": 1520464101, "last_edit_date": 1520479428, "question_id": 49162751, "link": "https://stackoverflow.com/questions/49162751/class-constructor-unresolved-external-symbol", "title": "Class constructor unresolved external symbol", "body": "<p>Before you mark this as a duplicate, I have looked at the other people here on SO with the same error. In fact, I have checked 2 pages of Google until it just started giving me random links and I gave up.</p>\n\n<p>I do not see what the error in my project is. I have changed it around 4-5 times in the ~4 hours I have been working at this. I am already wasting a lot of time just staring at the code hoping to have a revelation but I just cannot focus or there is a different error.</p>\n\n<p>myclass.HPP</p>\n\n<pre><code>class MyCLASS {\npublic:\n    __inline MyCLASS(void);\n\n    __inline MyCLASS(scan_t* lpScanInfo);\n    __inline MyCLASS(MyCLASS&amp; scanner);\n\n    __inline ~MyCLASS(void);\n};\n</code></pre>\n\n<p>myclass.CPP</p>\n\n<pre><code>__inline MyCLASS::MyCLASS(void) {\n\n}\n\n__inline MyCLASS::MyCLASS(scan_t* lpScanInfo) {\n    performScan(lpScanInfo-&gt;hProcess, lpScanInfo-&gt;vAddress, lpScanInfo-&gt;lpValue, lpScanInfo-&gt;lpAllignmentOpt, lpScanInfo-&gt;lpValueOpt);\n}\n\n__inline MyCLASS::MyCLASS(MyCLASS&amp; scanner) {\n\n}\n\n__inline MyCLASS::~MyCLASS(void) {\n\n}\n</code></pre>\n\n<p>*the inlines were added afterwards while attempting to find a fix</p>\n\n<p>EDIT: Forgot to actually say what and where my error is.</p>\n\n<p>I get the unresolved external symbol ONLY on the         <code>__inline MyCLASS::MyCLASS(scan_t* lpScanInfo)</code> constructor.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 836, "user_id": 2993440, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/566310225/picture?type=large", "display_name": "shawn1874", "link": "https://stackoverflow.com/users/2993440/shawn1874"}, "edited": false, "score": 1, "creation_date": 1520464088, "post_id": 49162723, "comment_id": 85331181, "body": "Is all of that code in the header file without guards? <a href=\"https://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Include_guard</a>"}, {"owner": {"reputation": 13, "user_id": 9436738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ecb70ae103de07a0cdd0332023aa572?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny Lee", "link": "https://stackoverflow.com/users/9436738/jenny-lee"}, "reply_to_user": {"reputation": 836, "user_id": 2993440, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/566310225/picture?type=large", "display_name": "shawn1874", "link": "https://stackoverflow.com/users/2993440/shawn1874"}, "edited": false, "score": 0, "creation_date": 1520464162, "post_id": 49162723, "comment_id": 85331205, "body": "Nope. I put guards in. Updated the code."}, {"owner": {"reputation": 13, "user_id": 9436738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ecb70ae103de07a0cdd0332023aa572?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny Lee", "link": "https://stackoverflow.com/users/9436738/jenny-lee"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1520464587, "post_id": 49162723, "comment_id": 85331361, "body": "@RemyLebeau Ah. I see now! How would I be able to include this header file in another .cpp file without it conflicting like that?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1520465056, "post_id": 49162723, "comment_id": 85331503, "body": "@JennyLee: see my answer"}], "answers": [{"tags": [], "owner": {"reputation": 836, "user_id": 2993440, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/566310225/picture?type=large", "display_name": "shawn1874", "link": "https://stackoverflow.com/users/2993440/shawn1874"}, "is_accepted": false, "score": 1, "last_activity_date": 1520464533, "creation_date": 1520464533, "answer_id": 49162826, "question_id": 49162723, "link": "https://stackoverflow.com/questions/49162723/multiple-definition-error/49162826#49162826", "title": "&#39;Multiple Definition&#39; error", "body": "<p>The definitions are in the header without the inline keyword.  Use the inline keyword or move the definitions into a .cpp file.</p>\n\n<pre><code>// Sets the User's username\ninline void User::set_user_username (std::string input) {\n    username = input;\n}\n\n// Sets the User's password\ninline void User::set_user_password (std::string input) {\n    password = input;\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/2727582/multiple-definition-in-header-file\">multiple definition in header file</a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1520464995, "last_edit_date": 1520464995, "creation_date": 1520464683, "answer_id": 49162860, "question_id": 49162723, "link": "https://stackoverflow.com/questions/49162723/multiple-definition-error/49162860#49162860", "title": "&#39;Multiple Definition&#39; error", "body": "<p>You are defining the body of the <code>set_user_username()</code> and <code>set_user_password()</code> methods inside of the header file, but outside of the class declaration.  As such, if you include this header file in multiple translation units, regardless of the use of header guards, the linker is going to see multiple object files defining the same methods and fail due to a violation of the <a href=\"https://en.wikipedia.org/wiki/One_Definition_Rule\" rel=\"nofollow noreferrer\">One Definition Rule</a>.</p>\n\n<p>You need to either:</p>\n\n<ul>\n<li><p>move the definitions to their own translation unit, and then link that unit in your project:</p>\n\n<p>Login.h</p>\n\n<pre><code>#ifndef LOGIN_H\n#define LOGIN_H\n\n#include &lt;string&gt;\n\n/* Classes */\nclass User {\n    std::string username, password;\n\npublic:\n    void set_user_username (std::string);\n    void set_user_password (std::string);\n};\n\n#endif // LOGIN_H\n</code></pre>\n\n<p>Login.cpp</p>\n\n<pre><code>#include \"Login.h\"\n\n// Sets the User's username\nvoid User::set_user_username (std::string input) {\n    username = input;\n}\n\n// Sets the User's password\nvoid User::set_user_password (std::string input) {\n    password = input;\n}\n</code></pre></li>\n<li><p>move the definitions inline inside the class declaration:</p>\n\n<p>Login.h</p>\n\n<pre><code>#ifndef LOGIN_H\n#define LOGIN_H\n\n#include &lt;string&gt;\n\n/* Classes */\nclass User {\n    std::string username, password;\n\npublic:\n    void set_user_username (std::string input) {\n        username = input;\n    }\n\n    void set_user_password (std::string input) {\n        password = input;\n    }\n};\n\n#endif // LOGIN_H\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 9436738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ecb70ae103de07a0cdd0332023aa572?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny Lee", "link": "https://stackoverflow.com/users/9436738/jenny-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 49162860, "answer_count": 2, "score": 0, "last_activity_date": 1520464995, "creation_date": 1520463932, "last_edit_date": 1520464359, "question_id": 49162723, "link": "https://stackoverflow.com/questions/49162723/multiple-definition-error", "title": "&#39;Multiple Definition&#39; error", "body": "<p>I'm trying to make a <code>User</code> class, however I'm getting an error output whenever I try to compile this code:</p>\n\n<pre><code>#ifndef LOGIN_H\n#define LOGIN_H\n\n#include &lt;string&gt;\n\n/* Classes */\nclass User {\n    std::string username, password;\n\n    public:\n    void set_user_username (std::string);\n    void set_user_password (std::string);\n};\n\n// Sets the User's username\nvoid User::set_user_username (std::string input) {\n    username = input;\n}\n\n// Sets the User's password\nvoid User::set_user_password (std::string input) {\n    password = input;\n}\n\n#endif // LOGIN_H\n</code></pre>\n\n<blockquote>\n  <p>multiple definition of `User::set_user_username(std::string)'</p>\n</blockquote>\n\n<p>Any clue why it's giving me this error message?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1520463604, "post_id": 49162624, "comment_id": 85330987, "body": "You mean you want a decimal textual representation of each byte that makes up the file?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1520463614, "post_id": 49162624, "comment_id": 85330994, "body": "Do you really want 1600 decimal integers on one line?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1520463632, "post_id": 49162624, "comment_id": 85331004, "body": "Just what &quot;decimal&quot; would a 40x40 ppm be converted to?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1520463651, "post_id": 49162624, "comment_id": 85331010, "body": "A common view is to use hexadecimal.  Pixel channels are easier to view in hexadecimal."}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1520463698, "post_id": 49162624, "comment_id": 85331026, "body": "You should check <code>fstream::good</code> after each <code>&gt;&gt;</code> operation. I&#39;m guessing you&#39;ve got a read error somewhere."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1520463712, "post_id": 49162624, "comment_id": 85331030, "body": "You may need to access the header elements to determine the bits or bytes per pixel and the number of channels, e.g. red, green, blue, alpha, etc."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1520463761, "post_id": 49162624, "comment_id": 85331049, "body": "If you want to read 8-bit quantities, you should use <code>uint8_t</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9459307"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1520463770, "post_id": 49162624, "comment_id": 85331053, "body": "@ScottHunter Its a greyscale and i would like to print out the pixels gray value (0-255) in decimal"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1520463830, "post_id": 49162624, "comment_id": 85331073, "body": "Big issue:  you need to open the file in <code>binary</code> mode, so that no translations occur (for example, converting 0x0A to 0x0D0A or ending the file at 0x1A)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1520463950, "post_id": 49162624, "comment_id": 85331125, "body": "Also, the picture file is most likely not in text format.  You&#39;ll need to use <code>fstream::read()</code> instead of the extraction operator &gt;&gt;."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1520463903, "post_id": 49162705, "comment_id": 85331108, "body": "I believe an issue is that the file needs to be open in <code>binary</code> mode and to use <code>read()</code> rather than using the extraction operator."}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1520464216, "post_id": 49162705, "comment_id": 85331230, "body": "@ThomasMatthews Good point, thank you. I&#39;ve amended my answer."}], "tags": [], "owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "is_accepted": false, "score": 0, "last_activity_date": 1520464202, "last_edit_date": 1520464202, "creation_date": 1520463847, "answer_id": 49162705, "question_id": 49162624, "link": "https://stackoverflow.com/questions/49162624/picture-pbm-decimal-in-c/49162705#49162705", "title": "Picture.pbm --&gt; decimal, in c++", "body": "<p>First, open your <code>PIC.pbm</code> file in another hex editor because it's quite possible that those bytes really are zeroes. If not, then you've got problems reading the file.</p>\n\n<p>The <code>fstream</code> constructor does not default to reading in binary mode, so it reads files as \"text\" - and I've learned the hard way that you can't trust the standard-library with knowing anything about text anymore (what with mishandling Unicode, line-endings, etc - I feel it's best to always use <code>binary</code> and a dedicated Unicode library).</p>\n\n<p>You should check the <code>fstream::good()</code> function after each read operation to see if it failed, and if so, then check <code>iostate</code>:</p>\n\n<pre><code>using namespace std;\n\n// ...\n\nfstream file;\nfile.open( \"PIC.pbm\", ios::in | ios::binary );\nfile.ignore( 13 );\n\nfor (int i = 0; i &lt; 1600; i++) {\n\n    file &gt;&gt; charTemp;\n    if( !file.good() ) {\n        cout &lt;&lt; endl;\n        cout &lt;&lt; \"Error reading file: iostate == \" &lt;&lt; file.iostate &lt;&lt; endl;\n        break;\n    }\n    else {\n        intTemp = charTemp;\n        std::cout &lt;&lt; intTemp &lt;&lt; \" \";\n        charTemp = 0;\n        intTemp = 0;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9459307"}, "edited": false, "score": 0, "creation_date": 1520464852, "post_id": 49162813, "comment_id": 85331437, "body": "Tank you very much!"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1520464455, "creation_date": 1520464455, "answer_id": 49162813, "question_id": 49162624, "link": "https://stackoverflow.com/questions/49162624/picture-pbm-decimal-in-c/49162813#49162813", "title": "Picture.pbm --&gt; decimal, in c++", "body": "<p>A better method with picture and image files is to read them as <code>binary</code> files:  </p>\n\n<pre><code>std::ifstream file(\"PIC.pbm\", ios::binary);\nstd::vector&lt;unsigned char&gt; bitmap(1600);\n\n// Skip over the header\nfile.seekg(13, ios::beg); // Skip over 13 bytes.\n\n// Read in the data at once\nfile.read((char *) &amp;bitmap[0], 1600);\n\n// Now process the bitmap from memory\nfor (int i = 0; i &lt; 1600; ++i)\n{\n  cout &lt;&lt; static_cast&lt;unsigned int&gt;(bitmap[i]) &lt;&lt; \" \";\n  if ((i % 40) == 39)\n  {\n    cout &lt;&lt; \"\\n\";\n  }\n}\ncout &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>The idea here is to read in the bitmap in one transaction into memory.  Streams like to flow (don't interrupt the flow).  Memory is faster to access than files, so the bitmap values are processed from memory.  </p>\n\n<p>The cast is used so that the formatted insertion doesn't treat the byte as a character, but a number.  </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9459307"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 49162813, "answer_count": 2, "score": 1, "last_activity_date": 1520464455, "creation_date": 1520463456, "question_id": 49162624, "link": "https://stackoverflow.com/questions/49162624/picture-pbm-decimal-in-c", "title": "Picture.pbm --&gt; decimal, in c++", "body": "<p>just want to ask if anyone knows why I cant convert an entire picture into decimal.</p>\n\n<p>Problem: after about 180 couts it turns 0 for the rest of the pixels.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint main() {\n\n    char unsigned charTemp = 0;\n    int unsigned intTemp = 0;\n\n    std::fstream file;\n    file.open(\"PIC.pbm\", std::ios::in);\n\n    //Ignore header\n    for (int i = 0; i &lt; 13; i++) {\n    file.ignore();\n    }\n\n    //read and print\n    //img res is 40x40 = 1600\n    for (int i = 0; i &lt; 1600; i++) {\n        file &gt;&gt; charTemp;\n        intTemp = charTemp;\n        std::cout &lt;&lt; intTemp &lt;&lt; \" \";\n        charTemp = 0;\n        intTemp = 0;\n    }\n\n    std::cout &lt;&lt; \"\\n\\n\\n\";\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Pic: any 40x40 pbm</p>\n"}, {"tags": ["c++", "class", "templates", "code-generation", "auto-generate"], "comments": [{"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520463700, "post_id": 49162554, "comment_id": 85331027, "body": "&quot;The problem here is that after the key word ...&quot; Unclear. Here is you who is parsing your own xml-like file. Nothing to do with compiler."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520463815, "post_id": 49162554, "comment_id": 85331063, "body": "@liliscent that&#39;s the part that I&#39;m having trouble with; I don&#39;t know how to extract the text from the string to use that as the identifier for the class name."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520463931, "post_id": 49162554, "comment_id": 85331119, "body": "Maybe to review some parsing technique(this case is very basic)..."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520464121, "post_id": 49162554, "comment_id": 85331194, "body": "@liliscent It&#39;s not the parsing part that is of an issue; it is within c++ itself. If I&#39;m in a while loop or a recursive function and I come to the part where I want to automatically generate a class that uses the text within the string as its identifier; that is what I don&#39;t know how to do. I&#39;ve searched online but couldn&#39;t find much to help me out."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520464311, "post_id": 49162554, "comment_id": 85331271, "body": "No, it has nothing to do with C++. You want to generate C++ source code from your own format. Whatever language can accomplish this task, for example, Python. Here C++ is not a programming language, it&#39;s some text."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520465044, "post_id": 49162554, "comment_id": 85331499, "body": "I feel that you can vote to close this question as others were misunderstanding what I was after. You can refer to this question here with the answer comment. <a href=\"https://stackoverflow.com/questions/49162871/auto-class-generator?noredirect=1#comment85331479_49162871\" title=\"auto class generator\">stackoverflow.com/questions/49162871/&hellip;</a>"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520465918, "post_id": 49162554, "comment_id": 85331765, "body": "I didn&#39;t vote anything. But your question is really unclear here. In the linked question, it&#39;s clear. My answer is the same as others, it&#39;s impossible."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520467540, "post_id": 49162554, "comment_id": 85332219, "body": "@liliscent That was my first assumption. I just wanted to be absolutely sure because I didn&#39;t truly know. Now that I do know; I won&#39;t be able to automatically generate classes within code as I will be forced to generate the classes to written files."}], "answers": [{"comments": [{"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1520468329, "post_id": 49162951, "comment_id": 85332420, "body": "I wasn&#39;t sure if it could be done or not, but my initial assumption was no."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 1, "last_activity_date": 1520465168, "creation_date": 1520465168, "answer_id": 49162951, "question_id": 49162554, "link": "https://stackoverflow.com/questions/49162554/an-in-code-class-auto-generator-from-a-string-of-text-or-some-other-mechanism/49162951#49162951", "title": "An in code class auto generator from a string of text or some other mechanism", "body": "<p>Sorry, but this just isn't how C++ works.  A compiler understands things like the keyword <code>class</code> and the names of members, and typically puts all that understanding to use to convert all that into machine code, which normally uses just lots of raw pointers and offsets, not the names of members or things like that.  Only after the compiler is finished, you run your program, and a typical program does not itself contain much of any capability at all to understand things like classes, member names, or assignment operators.</p>\n\n<p>So what options do you have?  You could write some utilities that are capable of doing some of the things a general class would do, but you won't be able to refer to it in the same ways as a class the compiler learned about from a header file within your program.  This might look something like:</p>\n\n<pre><code>{\n    CustomClass myclass( \"Foo.cls\" );\n    CustomObject obj = myclass.create(); // default constructor\n    CustomObject obj_copy = obj; // copy constructor\n}\n</code></pre>\n\n<p>Or you might do something that compiles and loads plugins at runtime, though there are a few complications to attempting that.  This still doesn't let you use the custom class like one compiled into your program, but it allows arbitrary C++ code (which is both powerful and dangerous, since someone could accidentally or maliciously break just about anything that way).  This would involve converting your configuration file to an actual temporary C++ source file you write out, running the compiler with special options to create a \"shared library\" (Unix, including Linux) or \"DLL\" (Windows), then loading that library using <code>dlopen</code> (many Unix flavors including Linux) or <code>LoadLibrary</code> (Windows).  And for the compile step, this means any computer where you run your program needs the compiler installed, and it should probably be a reasonably close version to the compiler version you used to compile your program.  If this compiler is on a special path, how will your program be told that path?</p>\n\n<p>Plus you would need to design a plugin architecture, considering things like:</p>\n\n<ul>\n<li><p>How does the plugin interface with the program?  Does it provide a function that just inputs and outputs vectors of strings?  Does it provide a function to create a class object derived from some abstract base class?</p></li>\n<li><p>If the plugin needs to use any base classes or specialized functions specific to your program, how will you make sure the needed header files are provided to the compiler when compiling the plugin?</p></li>\n</ul>\n"}], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 49162951, "answer_count": 1, "score": -1, "last_activity_date": 1520468168, "creation_date": 1520463124, "last_edit_date": 1520468168, "question_id": 49162554, "link": "https://stackoverflow.com/questions/49162554/an-in-code-class-auto-generator-from-a-string-of-text-or-some-other-mechanism", "title": "An in code class auto generator from a string of text or some other mechanism", "body": "<p>I would like to be able to automatically generate a class in code if possible.</p>\n\n<p>I know that I can have a text or script file that can be opened and the contents of that file be loaded into either a vector of strings or a string stream, and from there write back to a file or set of files to generate a class. I'm not interested in the details of the parsing aspect and this is not what I'm actually after. </p>\n\n<p>Let's say I have a text file that looks something like this: My current pseudo file above is much longer with more verbose detailed explanations; but omitted here for simplicity. If you feel that it is needed don't hesitate to ask and I will post it.</p>\n\n<p><strong>script</strong></p>\n\n<pre><code>// The finalized scripting file &amp; its parser will not have any comments within code sections.\n// Comments can be found before &amp; after the &lt;begin:file&gt; &amp; &lt;end:file&gt; sections\n\n// This is the beginning of the file and whether or not a header and or cpp file\n// is generated or not. If not then the idea is to generate the class in code directly.\n// &lt;begin:file \"Foo.h\"&gt; // header only otherwise \n// &lt;being:file \"Foo.h\", \"Foo.cpp\"&gt; for both header and cpp \n\n&lt;begin:file&gt; \n&lt;class:\"Foo\"&gt;\n&lt;private:&gt;\n  &lt;variables: int=mX,mY,mZ float=mWidth,mHeight&gt;\n&lt;public:&gt;\n  &lt;constructor:defualt=t, init=t&gt;\n  &lt;constructor:copy=t&gt; // automatically generates both copy() &amp; operator=() as = default;\n  &lt;constructor:copy=f&gt; // declares both copy() &amp; operator() as = delete;\n  &lt;destructor:default=t&gt;\n&lt;end:class&gt;\n&lt;end:file&gt;\n</code></pre>\n\n<p>In the above script where I have <code>&lt;begin:file&gt;</code> since there are no strings after it; this means I do not want to write to files to create a header and or cpp file. Since they are omitted I would like to generate this class in code.</p>\n\n<p>I do not want to resort to using <code>macros</code>. I could use templates if possible or some other mechanism. </p>\n\n<p>What I am not sure about is this: let's say I'm at the part where I read in <code>&lt;class:\"Foo\"&gt;</code> this will tell my parser that I want a <code>class</code> named <code>Foo</code> and this would be it's shell:</p>\n\n<pre><code>class Foo {}; \n</code></pre>\n\n<p>As expected, however we can not write the ending <code>};</code> part yet because we have not reached the <code>&lt;end:class&gt;</code> part. So at this point we need to write out <code>class Foo {</code> and the part or problem that I'm seeing here is I do not know how I would be able to take the text or string such as <code>std::string name(\"Foo\");</code>\nand appended that after the <code>c++</code> key word <code>class</code>. Pseudo example:</p>\n\n<pre><code>{\n     std::string name(\"Foo\");\n\n     class name {\n     public:\n         int x; \n     };\n\n     std::cout &lt;&lt; name &lt;&lt; std::endl; // compiles and prints to the console \"Foo\"\n     std::cout &lt;&lt; name.y &lt;&lt; std::end; // will not compile.\n}\n</code></pre>\n\n<p>The problem here is that after <code>c++</code>'s key word <code>class</code> it is expecting an identifier and the compiler will not accept this. The compiler will declare a string named <code>name</code> that has the contents of <code>\"Foo\"</code>, then below when trying to declare the class using that string, it doesn't see the string and names to the class with the identifier name. Then if you try to use the class afterwards it doesn't find the class at all but rather it finds the string called name. Is it possible to use some kind of already built in feature to append the needed text here to automatically generate a class within code without having to type it out? I am not sure of how to extract the text from a string to use that as the identifier of the class's name.</p>\n\n<hr>\n\n<p><strong>Conclusion</strong></p>\n\n<p>From reading the comments and answer provided in my related question; it then proves my initial assumptions that I didn't mention to be true. It can not be done. This does resort into having to write the class to their respective files from the parsers point of view.      </p>\n"}, {"tags": ["c++", "string", "file", "sorting", "ifstream"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1520462637, "post_id": 49162383, "comment_id": 85330611, "body": "<a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">Your Rubber Duck</a> has a question about <code>cin &gt;&gt; studentName; studentName = firstEntry;</code>.  It wants to know why you write over the <code>studentName</code> you just read without using it for anything first."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1520464226, "post_id": 49162632, "comment_id": 85331238, "body": "It would help your answer to explain why <code>if (firstEntry &lt; secondEntry)</code> is not correct string comparison"}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1520463503, "creation_date": 1520463503, "answer_id": 49162632, "question_id": 49162383, "link": "https://stackoverflow.com/questions/49162383/reading-strings-from-file-and-sorting/49162632#49162632", "title": "Reading strings from file and sorting", "body": "<p>My sincere advise would be always use pen and paper and note down your requirement first. Base on that write down the algorithm and convert that algorithm into code. What are you doing in your codes are all wrong unfortunately. Just deeply think what are you doing in your code specially below codes:-</p>\n\n<pre><code>   while (inputFile &gt;&gt; studentName)//Think what are you doing here?\n    {\n        cin &gt;&gt; studentName;//???? reading into the same variable\n        studentName = firstEntry;//???? what are your doing here no value in firstEntry\n        cin &gt;&gt; studentName;//??here\n        studentName = secondEntry;//?? here no value in secondEntry\n        do\n        {\n            if (firstEntry &lt; secondEntry)// this is not correct string comparison  \n            {\n                firstEntry = first;//?? no value in first\n                secondEntry = last;//?? no value in last\n            }\n</code></pre>\n\n<p>If you consider all this very carefully you will understand all your mistakes.</p>\n\n<p>Hope this will help you..</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8853166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b163488902e00388ab7c1e860564c6?s=128&d=identicon&r=PG", "display_name": "James Raynard", "link": "https://stackoverflow.com/users/8853166/james-raynard"}, "is_accepted": false, "score": 1, "last_activity_date": 1520463562, "creation_date": 1520463562, "answer_id": 49162644, "question_id": 49162383, "link": "https://stackoverflow.com/questions/49162383/reading-strings-from-file-and-sorting/49162644#49162644", "title": "Reading strings from file and sorting", "body": "<pre><code>         cin &gt;&gt; studentName;\n</code></pre>\n\n<p>This is why your program stops. It is waiting for you to type something at the keyboard. (cin is the standard input in C++)</p>\n"}], "owner": {"reputation": 1, "user_id": 9454674, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vwR1s5J-f3I/AAAAAAAAAAI/AAAAAAAAAEw/hcVMzZGq7fU/photo.jpg?sz=128", "display_name": "Daniel G", "link": "https://stackoverflow.com/users/9454674/daniel-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520463562, "creation_date": 1520462257, "last_edit_date": 1520462574, "question_id": 49162383, "link": "https://stackoverflow.com/questions/49162383/reading-strings-from-file-and-sorting", "title": "Reading strings from file and sorting", "body": "<p>I need help with my assignment. I am not allowed to use any functions other than loops, if statements, cout, cin, basic operators and basic string. Arrays are not allowed. I need to sort a list of names from a file by alphabetical order and output which names would be at the front and back of the line. However when I try to run my code it stops at the part where it reads the file. The file is in the correct location because I hae tested it with cout. I cant figure out what I am doing wrong. Any help would be appreciated!\nHeres the code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nint main()\n{\n\n    //Intialize variables\n    string studentName;\n    string firstEntry;\n    string secondEntry;\n    string first;\n    string last;\n    ifstream inputFile;\n    string filename;\n    int students;\n\n    //Ask for amount of students\n    cout &lt;&lt; \"Please enter the number of students in the class.\\n(The number must be a whole number between 1 and 25.)\\n\";\n    cin &gt;&gt; students;\n\n    //Input validation\n    while (students &lt; 1 || students &gt; 25)\n    {\n        cout &lt;&lt; \"\\nInvalid value. Please enter a value between 1 and 25.\\n\";\n        cin &gt;&gt; students;\n    }\n\n    //Get file name from user\n    cout &lt;&lt; \"Please enter the name of the file with the list of students\\n\";\n    cin &gt;&gt; filename;\n\n    //Open the file\n    inputFile.open(filename);\n    if (inputFile)\n    {\n        while (inputFile &gt;&gt; studentName)\n        {\n            cin &gt;&gt; studentName;\n            studentName = firstEntry;\n            cin &gt;&gt; studentName;\n            studentName = secondEntry;\n            do\n            {\n                if (firstEntry &lt; secondEntry)\n                {\n                    firstEntry = first;\n                    secondEntry = last;\n                }\n                else\n                {\n                    firstEntry = last;\n                    secondEntry = first;\n                }\n            } while (students = 30);\n\n            if (firstEntry &lt; first)\n                firstEntry = first;\n\n            if (secondEntry &lt; first)\n                secondEntry = first;\n\n            if (firstEntry &gt; last)\n                firstEntry = last;\n\n            if (secondEntry &gt; last)\n                secondEntry = last;\n\n        }\n        cout &lt;&lt; first &lt;&lt; \" is the first student in line.\";\n        cout &lt;&lt; last &lt;&lt; \" is the last student in line.\";\n    }\n    else\n    {\n        cout &lt;&lt; \"Error opening the file.\\nPlease restart the program and try again.\";\n        return 1;\n    }\n\n    inputFile.close();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "double", "mips"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1520461816, "post_id": 49162207, "comment_id": 85330270, "body": "Linux is not a processor/architecture. What is your target platform?"}, {"owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520461895, "post_id": 49162207, "comment_id": 85330309, "body": "My target architecture is x86_64"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520462718, "post_id": 49162207, "comment_id": 85330652, "body": "@tadman: Your new title completely changed the meaning. The question has nothing to do with structures."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520463317, "post_id": 49162207, "comment_id": 85330874, "body": "@LightnessRacesinOrbit The original title made even less sense. Baby steps towards cohesion here."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1520465475, "post_id": 49162207, "comment_id": 85331639, "body": "@tadman: It&#39;s better now."}], "answers": [{"comments": [{"owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 0, "creation_date": 1520462072, "post_id": 49162281, "comment_id": 85330383, "body": "So in theory, by doing a 8 byte endianess swap it should work?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 1, "creation_date": 1520462150, "post_id": 49162281, "comment_id": 85330421, "body": "@roscoe: As far as I can tell. You could test it ;)"}, {"owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 0, "creation_date": 1520462423, "post_id": 49162281, "comment_id": 85330543, "body": "I did, unfortunately I still got weird results.  It seems that the way its reading these objects into memory is misaligned, I can&#39;t see what else could cause this issue.  I may be getting off topic here, but do you know how enums are formatted in both these architectures?"}, {"owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 0, "creation_date": 1520462516, "post_id": 49162281, "comment_id": 85330580, "body": "Should I ask a new question about enum formats or just update my question to include that?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 0, "creation_date": 1520462625, "post_id": 49162281, "comment_id": 85330606, "body": "@roscoe: enums are not a factor of computer architecture. The value of an enum is just an integer. Account for type width and endianness and you should be fine (though yes you are going to have to be careful with alignment - prefer <code>std::copy</code> over <code>reinterpret_cast</code>)"}, {"owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 0, "creation_date": 1520463270, "post_id": 49162281, "comment_id": 85330854, "body": "How would I even deal with alignment?  Is the way that objects are structured between the two systems different?  If so, not sure if that problem is even fixable"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "edited": false, "score": 0, "creation_date": 1520465431, "post_id": 49162281, "comment_id": 85331618, "body": "@roscoe: Alignment and padding are not quite the same. If composite objects have been serialised with unknown padding, then that problem isn&#39;t particularly fixable, no (hopefully it was serialised in an unpadded format, as common sense dictates). You should research <i>alignment</i>, <i>padding</i> and <i>serialisation</i>."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1520462139, "last_edit_date": 1520462139, "creation_date": 1520461796, "answer_id": 49162281, "question_id": 49162207, "link": "https://stackoverflow.com/questions/49162207/floating-point-differences-when-porting-mips-code-to-x86-64/49162281#49162281", "title": "Floating point differences when porting MIPS code to x86_64", "body": "<p>According to <a href=\"http://math-atlas.sourceforge.net/devel/assembly/mipsabi64.pdf\" rel=\"nofollow noreferrer\">the MIPSPro ABI</a>:</p>\n\n<blockquote>\n  <p>the MIPS processors conform to the IEEE 754 floating point standard</p>\n</blockquote>\n\n<p>Your target platform, <a href=\"https://stackoverflow.com/a/2234499/560648\">x86_64, shares this quality</a>.</p>\n\n<p>As such, <code>double</code> means IEEE-754 double-precision float on both platforms.</p>\n\n<p>When it comes to endianness, x86_64 processors are little-endian; but, according to <a href=\"https://courses.cs.washington.edu/courses/cse410/07sp/misc/MIPS-ASM-007-2418-006.pdf\" rel=\"nofollow noreferrer\">the MIPSpro assembly programmers' guide</a>, <em>some</em> MIPSPro processors are big-endian:</p>\n\n<blockquote>\n  <p>For R4000 and earlier systems, byte ordering is configurable into either big-endian or little-endian byte ordering (configuration occurs during hardware reset). When configured as a big-endian system, byte 0 is always the most-significant (leftmost) byte. When configured as a little-endian system, byte 0 is always the least-significant (rightmost byte).</p>\n  \n  <p>The R8000 CPU, at present, supports big-endian only</p>\n</blockquote>\n\n<p>So, you will have to check the datasheet for the original platform and see whether any byte swapping is needed.</p>\n"}], "owner": {"reputation": 295, "user_id": 5040972, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e471a2ed96ad811cd44e8df446571b20?s=128&d=identicon&r=PG&f=1", "display_name": "Iliketoproveit", "link": "https://stackoverflow.com/users/5040972/iliketoproveit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 49162281, "answer_count": 1, "score": 0, "last_activity_date": 1520463329, "creation_date": 1520461450, "last_edit_date": 1520463329, "question_id": 49162207, "link": "https://stackoverflow.com/questions/49162207/floating-point-differences-when-porting-mips-code-to-x86-64", "title": "Floating point differences when porting MIPS code to x86_64", "body": "<p>I am currently working on porting a piece of code written and compiled for SGI using MIPSPro to RHEL 6.7 with gcc 4.4.7. My target architecture is x86_64 I was able to generate an executable for this code and now I am trying to run it. </p>\n\n<p>I am trying to read a binary data from a file, this file was generated in the SGI system by basically casting object's pointer to a <code>char*</code> and saving that to a file.  The piece of binary data that I am trying to read has more or less this format:</p>\n\n<pre><code>[ Header, Object A , Object B, ..., Object N ]\n</code></pre>\n\n<p>Where each object is an instantiation of different classes. </p>\n\n<p>The way the code currently processes the file is by reading it all into memory, and taking the pointer to where the object starts and using <code>reinterpret_class&lt;Class A&gt;(pointer)</code> to it.  Something tells me that the people who original designed this were not concerned about portability.  </p>\n\n<p>So far I was able to deal with the endianness of the Header object by just swapping the bytes.  Unfortunately, Objects A, B, .., N all contain fields of type <code>double</code> and trying to do a byte-swap for 8 bytes does not seem to work.  </p>\n\n<p>My question then is, are doubles in SGI/MIPSPro structured differently than in Linux?  I know that the <code>sizeof(double)</code> in the SGI machine returns <code>8</code> so I think they are of the same size.</p>\n"}, {"tags": ["c++", "opengl", "textures", "shader", "vertex-shader"], "comments": [{"owner": {"reputation": 1243, "user_id": 8308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9acc93a03890f92938b6aa28cf34ec?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/8308/jay"}, "edited": false, "score": 0, "creation_date": 1520464170, "post_id": 49161964, "comment_id": 85331207, "body": "What does your actual draw call look like? I assume you are calling glDraw{Arrays|Elements}Instanced since you are reading from gl_InstanceID in the vertex shader?"}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "reply_to_user": {"reputation": 1243, "user_id": 8308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9acc93a03890f92938b6aa28cf34ec?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/8308/jay"}, "edited": false, "score": 0, "creation_date": 1520465188, "post_id": 49161964, "comment_id": 85331548, "body": "That is correct my actual draw call is an instanced draw call that renders the same cube mesh at different positions. I am going to add some information I just got to the question."}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "reply_to_user": {"reputation": 1243, "user_id": 8308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9acc93a03890f92938b6aa28cf34ec?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/8308/jay"}, "edited": false, "score": 0, "creation_date": 1520466399, "post_id": 49161964, "comment_id": 85331901, "body": "@Jay The problem has been solved but I am not satisfied with my answer. If you have a better suggestion I would appreciate it."}], "answers": [{"comments": [{"owner": {"reputation": 1243, "user_id": 8308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9acc93a03890f92938b6aa28cf34ec?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/8308/jay"}, "edited": false, "score": 0, "creation_date": 1520467724, "post_id": 49163115, "comment_id": 85332276, "body": "It might be useful to switch to non instanced rendering so you can look at each instance in RenderDoc. I.e. call glDrawElements N times instead of calling glDrawElementsInstanced once and use a manually updated uniform instead of gl_InstanceID. That way you can look at each individual draw in RenderDoc."}], "tags": [], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "is_accepted": true, "score": 0, "last_activity_date": 1520466301, "creation_date": 1520466301, "answer_id": 49163115, "question_id": 49161964, "link": "https://stackoverflow.com/questions/49161964/scene-voxelization-not-working-due-to-lack-of-comprehension-of-texture-coordinat/49163115#49163115", "title": "Scene voxelization not working due to lack of comprehension of texture coordinates", "body": "<p>I have figured out the problem.</p>\n\n<p>Since my geometry matches the voxel grid 1 to 1. Different layers could be mapped to the same voxel, causing them to overlap in the same layer.</p>\n\n<p>Modifying the fragment shader to the following:</p>\n\n<pre><code>#version 450\n\nlayout(location = 0) in vec3 position; //(x,y,z) coordinates of a vertex\n\nlayout(std430, binding = 3) buffer instance_buffer\n{\n    vec4 cubes_info[];//first 3 values are position of object \n};\n\nout vec3 normalized_pos;\n\nout float test;\n\nuniform float width = 128;\nuniform float depth = 128;\nuniform float height = 128;\n\nuniform float voxel_size = 1;\n\nuniform float level=0;\n\nvoid main()\n{\n    vec4 pos = (vec4(position, 1.0) + vec4(vec3(cubes_info[gl_InstanceID]),0));\n\n    pos.x = (2.f*pos.x-width)/(width);\n    pos.y = (2.f*pos.y-depth)/(depth);\n\n    pos.z = cubes_info[gl_InstanceID].z;\n\n    test = pos.z + 1;\n    pos.z -= level;\n\n    if(pos.z &gt;=0 &amp;&amp; pos.z &lt; 0.999f)\n        pos.z = 1;\n    else \n        pos.z = 2;\n\n    gl_Position = pos;\n\n    normalized_pos = vec3(pos);\n}\n</code></pre>\n\n<p>Fixes the issue. </p>\n\n<p>The if statement check guarantees that geometry from a different layer that could potentially be mapped to the current layer is discarded.</p>\n\n<p>There are probably better ways to do this. So I will accept as an answer anything that produces an equivalent result in a more elegant way.</p>\n\n<p>This is what layer 0 looks like now:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NvVyA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NvVyA.png\" alt=\"enter image description here\"></a></p>\n\n<p>And this is what layer 2 looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3Izt5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3Izt5.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "accepted_answer_id": 49163115, "answer_count": 1, "score": 2, "last_activity_date": 1520466301, "creation_date": 1520460320, "last_edit_date": 1520465408, "question_id": 49161964, "link": "https://stackoverflow.com/questions/49161964/scene-voxelization-not-working-due-to-lack-of-comprehension-of-texture-coordinat", "title": "Scene voxelization not working due to lack of comprehension of texture coordinates", "body": "<p>The goal is to take an arbitrary geometry and create a 3D texture containing the voxel approximation of the scene. However right now we only have cubes. </p>\n\n<p>The scene looks as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ARNgU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ARNgU.png\" alt=\"enter image description here\"></a></p>\n\n<p>The 2 most important aspects of these scene are the following:</p>\n\n<p>Each cube in the scene is supposed to correspond to a voxel in the 3D texture. The scene geometry becomes smaller as the height increases (similar to a pyramid). The scene geometry is hollow (i.e if you go inside one of these hills the interior has no cubes, only the outline does).</p>\n\n<p>To voxelize the scene we render layer by layer as follows:</p>\n\n<pre><code>glViewport(0, 0, 7*16, 7*16);\nglBindFramebuffer(GL_FRAMEBUFFER, FBOs[FBO_TEXTURE]);\n\nfor(int i=0; i&lt;4*16; i++)\n{\n    glFramebufferTexture3D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_3D, \n        vMap-&gt;textureID, 0, i);\n\n    glClearColor(0.f, 0.f, 0.f, 0.0f);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    load_uniform((float)i, \"level\");\n    draw();\n}\n</code></pre>\n\n<p>Where \"level\" corresponds to the current layer.</p>\n\n<p>Then in the vertex shader we attempt to create a single layer as follows;</p>\n\n<pre><code>#version 450\n\nlayout(location = 0) in vec3 position; //(x,y,z) coordinates of a vertex\n\nlayout(std430, binding = 3) buffer instance_buffer\n{\n    vec4 cubes_info[];//first 3 values are position of object \n};\n\nout vec3 normalized_pos;\n\nout float test;\n\nuniform float width = 128;\nuniform float depth = 128;\nuniform float height = 128;\n\nuniform float voxel_size = 1;\n\nuniform float level=0;\n\nvoid main()\n{\n    vec4 pos = (vec4(position, 1.0) + vec4(vec3(cubes_info[gl_InstanceID]),0));\n\n    pos.x = (2.f*pos.x-width)/(width);\n    pos.y = (2.f*pos.y-depth)/(depth);\n    pos.z = floor(pos.z);\n\n    test = pos.z;\n    pos.z -= level;\n\n    gl_Position = pos;\n}\n</code></pre>\n\n<p>Finally the fragment shader:</p>\n\n<pre><code>#version 450\n\nin vec3 normalized_pos;\nin float l;\n\nin float test;\n\nout vec4 outColor;//Final color of the pixel\n\nvoid main()\n{\n    outColor = vec4(vec3(test)/10.f, 1.0);\n\n}\n</code></pre>\n\n<p>Using renderdoc I have taken some screenshots of what the resulting texture looks like:</p>\n\n<p>Layer 0:\n<a href=\"https://i.stack.imgur.com/yBJ8y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yBJ8y.png\" alt=\"enter image description here\"></a></p>\n\n<p>Layer 2:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gctyj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gctyj.png\" alt=\"enter image description here\"></a></p>\n\n<p>The immediate 2 noticeable problems are that:</p>\n\n<p>A layer should not have multiple tones of gray, only one (since each layer corresponds to a different height there should not be multiple heights being rendered to the same layer)</p>\n\n<p>The darkest section of layer 2 looks like what layer 0 should look like (i.e a filled shape with no \"holes\"). So not only does it seem I am rendering multiple heights to teh same layer, it also seems I have an offset of 2 when rendering, which should not happen.</p>\n\n<p>Does anyone have any idea as to what the problem could be?</p>\n\n<p>EDIT:</p>\n\n<p>In case anyone is wondering the cubes have dimenions of [1,1,1] And their coordinate system is aligned with teh texture. i.e the bottom, left, front corner of the first cube is at (0,0,0)</p>\n\n<p>EDIT 2:</p>\n\n<p>Changing</p>\n\n<pre><code>pos.z = floor(pos.z); \n</code></pre>\n\n<p>To:\n    pos.z = floor(pos.z)+0.1;</p>\n\n<p>Partially fixes the problem. The lowest layer is now correct however instead of 3 different colors (height values) there's now 2.</p>\n\n<p>EDIT 3:</p>\n\n<p>It seems the problem comes from drawing the geometry multiple times. \ni.e my actual draw clal looks like:</p>\n\n<pre><code>for(uint i=0; i&lt;render_queue.size(); i++)\n    {\n        Object_3D *render_data = render_queue[i]; \n        //Render multiple instances of the current object\n        multi_render(render_data-&gt;VAO, &amp;(render_data-&gt;VBOs), \n            &amp;(render_data-&gt;types), render_data-&gt;layouts, \n            render_data-&gt;mesh_indices, render_data-&gt;render_instances);\n    }\n\nvoid Renderer::multi_render(GLuint VAO, vector&lt;GLuint&gt; *VBOs, \n    vector&lt;GLuint&gt; *buffer_types, GLuint layout_num, \n    GLuint index_num, GLuint instances)\n{\n    //error check\n    if(VBOs-&gt;size() != buffer_types-&gt;size())\n    {\n        cerr &lt;&lt; \"Mismatching VBOs's and buffer_types sizes\" &lt;&lt; endl;\n        return;\n    }\n\n    //Bind Vertex array object and rendering rpogram\n    glBindVertexArray(VAO);\n    glUseProgram(current_program);\n\n    //enable shader layouts\n    for(int i=0; i&lt;layout_num;i++)\n        glEnableVertexAttribArray(i);\n\n    //Bind VBO's storing rendering data\n    for(uint i=0; i&lt;buffer_types-&gt;size(); i++)\n    {\n        if((*buffer_types)[i]==GL_SHADER_STORAGE_BUFFER)\n        {\n            glBindBuffer((*buffer_types)[i], (*VBOs)[i]);\n            glBindBufferBase(GL_SHADER_STORAGE_BUFFER, i, (*VBOs)[i]);\n        }\n    }\n    //Draw call\n    glDrawElementsInstanced(GL_TRIANGLES, index_num, GL_UNSIGNED_INT, (void*)0, instances);\n}\n</code></pre>\n\n<p>It seems then that due to rendering multiple subsets of the scene at a time I end up with different cubes being mapped to the same voxel in 2 different draw calls.</p>\n"}, {"tags": ["c++", "unicode", "ncurses", "getch", "widechar"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7567729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/317a6a3ac65dbe7dea58e238c56970b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/7567729/sirius"}, "edited": false, "score": 0, "creation_date": 1520467262, "post_id": 49163092, "comment_id": 85332137, "body": "it is solved now. The problem was because we were using -lform -lncursesw instead of -lformw -lncursesw."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1520466158, "creation_date": 1520466158, "answer_id": 49163092, "question_id": 49161923, "link": "https://stackoverflow.com/questions/49161923/window-for-taking-getch-input-not-showing-using-ncursesw-but-works-with-ncurses/49163092#49163092", "title": "Window for taking getch input not showing using ncursesw but works with ncurses", "body": "<p>You're using a function</p>\n\n<pre><code>form_driver(commandForm, ch);\n</code></pre>\n\n<p>which will not handle wide-characters.  Also, <code>getch</code> doesn't handle wide-characters (hint: try select/paste those double-line box characters shown in your screenshot into the input field).</p>\n\n<p>If you intend handling Unicode (wide-characters), you should use <a href=\"https://invisible-island.net/ncurses/man/curs_get_wch.3x.html\" rel=\"nofollow noreferrer\"><code>get_wch</code></a>. Also,\nncurses has an alternate function <a href=\"https://invisible-island.net/ncurses/man/form_driver.3x.html#h3-form_driver_w\" rel=\"nofollow noreferrer\"><code>form_driver_w</code></a> (in the <em>ncursesw</em> library of course) which may help with your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 7567729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/317a6a3ac65dbe7dea58e238c56970b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/7567729/sirius"}, "is_accepted": true, "score": 0, "last_activity_date": 1520631354, "last_edit_date": 1520631354, "creation_date": 1520467173, "answer_id": 49163260, "question_id": 49161923, "link": "https://stackoverflow.com/questions/49161923/window-for-taking-getch-input-not-showing-using-ncursesw-but-works-with-ncurses/49163260#49163260", "title": "Window for taking getch input not showing using ncursesw but works with ncurses", "body": "<p>Instead of using -lform, use -lformw. </p>\n"}], "owner": {"reputation": 27, "user_id": 7567729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/317a6a3ac65dbe7dea58e238c56970b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/7567729/sirius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 49163260, "answer_count": 2, "score": -1, "last_activity_date": 1520631354, "creation_date": 1520460093, "question_id": 49161923, "link": "https://stackoverflow.com/questions/49161923/window-for-taking-getch-input-not-showing-using-ncursesw-but-works-with-ncurses", "title": "Window for taking getch input not showing using ncursesw but works with ncurses", "body": "<p>I need to use -lncursesw to print out unicode characters otherwise it wouldn't work however after compiling it with this, the window for user input shows up but when I type characters to it, it doesn't show but still able to type. I honestly don't know how to make this work, I have set the locale with setlocale(LC_ALL, \"\"); </p>\n\n<p>this is the code for input:</p>\n\n<p><code>while ((ch = getch()) != KEY_F(9))\n        driver(ch);</code></p>\n\n<p>and an example piece of code for handling the input (using switch cases) this is the default:</p>\n\n<pre><code>    default:\n        form_driver(commandForm, ch);\n        showGrid();\n        wrefresh(mainScreen);\n        break;\n</code></pre>\n\n<p>This is what it looks like, the first picture using -lncursesw and second using -lncurses.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ytVd0.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ytVd0.jpg\" alt=\"This is using -lncursesw\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/VmR9W.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VmR9W.jpg\" alt=\"This is using -lncurses\"></a></p>\n"}, {"tags": ["c++", "audio"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520459765, "post_id": 49161854, "comment_id": 85329408, "body": "Under what circumstances did you believe you&#39;d exit your loop?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1520459791, "post_id": 49161854, "comment_id": 85329419, "body": "Don&#39;t post pics of code or links to pics. <a href=\"https://stackoverflow.com/posts/49161854/edit\">edit</a> your question and copy/paste the code as text into it."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1520460042, "post_id": 49161854, "comment_id": 85329527, "body": "<code>std::cin &gt;&gt; int</code> is <i>formatted</i> input. It&#39;s for reading numbers encoded with actual digit characters. .wav files contain binary, so it wouldn&#39;t work. Also .wav files contain not only the actual sound data that you want, but also a header with some information about the file. You have to parse the file, or find a library that does it for you."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9131623, "user_type": "registered", "profile_image": "https://graph.facebook.com/1606329206072664/picture?type=large", "display_name": "Alexandru Ca\u021bavei", "link": "https://stackoverflow.com/users/9131623/alexandru-ca%c8%9bavei"}, "edited": false, "score": 0, "creation_date": 1520460599, "post_id": 49161935, "comment_id": 85329762, "body": "so from my understanding it has to look something like this &#39;ifstream c(&quot;cv.RAW&quot;, std::ios_base::binary);     int b;     if (c.good())     while(1)         {             c&gt;&gt;b;             cout&lt;&lt;b&lt;&lt;&quot; &quot;;             if (!c.good()) break;         }     &#39;"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 7, "user_id": 9131623, "user_type": "registered", "profile_image": "https://graph.facebook.com/1606329206072664/picture?type=large", "display_name": "Alexandru Ca\u021bavei", "link": "https://stackoverflow.com/users/9131623/alexandru-ca%c8%9bavei"}, "edited": false, "score": 1, "creation_date": 1520460738, "post_id": 49161935, "comment_id": 85329817, "body": "Assuming your file is binary not a text file you still need to change from <code>&gt;&gt;</code> to <code>read()</code> and your check for good in the while loop needs to be between the read and the print, if the read fails the value in b is undefined (probably the value you read in the last successful read)"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1520466117, "post_id": 49161935, "comment_id": 85331820, "body": "Also don&#39;t use plain <code>int</code> for the data type, use one with an explicit size such as <code>int16_t</code>. Unfortunately you might still have a little-endian/big-endian problem."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 3, "last_activity_date": 1520460166, "creation_date": 1520460166, "answer_id": 49161935, "question_id": 49161854, "link": "https://stackoverflow.com/questions/49161854/reading-raw-audio-file/49161935#49161935", "title": "Reading RAW audio file", "body": "<p>you need to</p>\n\n<ol>\n<li>open your file in binary mode <code>ifstream c(\"cv.RAW\", std::ios_base::binary)</code>, if you read a binary file without this flag it will be treated as a text file and will give you incorrect values.</li>\n<li>check the file is open by checking <code>if (c.good())</code> or just <code>if (c)</code> before reading any values</li>\n<li>check the reads succeed by again checking <code>if (c.good())</code> or just <code>if (c)</code> after reading each byte</li>\n<li>read using <code>c.read((char*)&amp;b, sizeof(b))</code> if you want to read an integer at a time, for a single byte use <code>char ch; c.read(&amp;ch, sizeof(ch))</code></li>\n</ol>\n\n<p>iostreams don't throw exceptions by default so you always need to check their state every time you use them.</p>\n"}], "owner": {"reputation": 7, "user_id": 9131623, "user_type": "registered", "profile_image": "https://graph.facebook.com/1606329206072664/picture?type=large", "display_name": "Alexandru Ca\u021bavei", "link": "https://stackoverflow.com/users/9131623/alexandru-ca%c8%9bavei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520460211, "creation_date": 1520459656, "last_edit_date": 1520460211, "question_id": 49161854, "link": "https://stackoverflow.com/questions/49161854/reading-raw-audio-file", "title": "Reading RAW audio file", "body": "<p>I am a beginner in C++ and I have a school project implying analysing an audio file and I can't read the file, in the example the program keeps reading the first value from the file</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nint main()\n{\n    ifstream c;\n    c.open(\"cv.RAW\");\n    int b;\n    while(1)\n        {\n            c&gt;&gt;b;\n            cout&lt;&lt;b&lt;&lt;\" \";\n        }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glsl", "compute-shader"], "comments": [{"owner": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 0, "creation_date": 1520459833, "post_id": 49161635, "comment_id": 85329438, "body": "Did you look at this question?  They seem to have the same error code.  <a href=\"https://stackoverflow.com/q/15722803/691711\">stackoverflow.com/q/15722803/691711</a>"}, {"owner": {"reputation": 49, "user_id": 7436657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56d1f1902bd0e75c83c0e1b02f2813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hamaro", "link": "https://stackoverflow.com/users/7436657/hamaro"}, "reply_to_user": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 0, "creation_date": 1520460452, "post_id": 49161635, "comment_id": 85329704, "body": "I don&#39;t get any errors on my home computer and the program runs fine, but i get errors on the computers in school. I get the error at the dispatch call so it&#39;s something wrong inside the shader that&#39;s ok at home but not in school. All shaders compile without error."}, {"owner": {"reputation": 49, "user_id": 7436657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56d1f1902bd0e75c83c0e1b02f2813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hamaro", "link": "https://stackoverflow.com/users/7436657/hamaro"}, "reply_to_user": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 0, "creation_date": 1520460695, "post_id": 49161635, "comment_id": 85329802, "body": "I call glUseProgram() in activateShaderProgram()"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1520461281, "post_id": 49161635, "comment_id": 85330049, "body": "possible duplicate of <a href=\"https://stackoverflow.com/questions/49158485/deffered-rendering-with-opengl-compute-shader-only-works-at-home\">Deffered rendering with opengl compute shader only works at home</a>"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1520461507, "post_id": 49161635, "comment_id": 85330150, "body": "@genpfault: Should have been edited and not reasked, but at least it now contains the missing code."}, {"owner": {"reputation": 49, "user_id": 7436657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56d1f1902bd0e75c83c0e1b02f2813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hamaro", "link": "https://stackoverflow.com/users/7436657/hamaro"}, "edited": false, "score": 0, "creation_date": 1520461559, "post_id": 49161635, "comment_id": 85330172, "body": "Yeah it&#39;s but with all my code added, i deleted that one because people just downvote insted of helping."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1520461598, "post_id": 49161635, "comment_id": 85330183, "body": "What does lightingShaderProgram.activateShaderProgram() do, precisely?  1282 is generated if there is no active program for the compute shader stage.  I&#39;ve often found some drivers are more forgiving of api mistakes than others..."}, {"owner": {"reputation": 49, "user_id": 7436657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56d1f1902bd0e75c83c0e1b02f2813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hamaro", "link": "https://stackoverflow.com/users/7436657/hamaro"}, "edited": false, "score": 0, "creation_date": 1520461685, "post_id": 49161635, "comment_id": 85330212, "body": "void LightingPassShaderProgram::activateShaderProgram() { \tglUseProgram(screenQuadShader); }"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1520461710, "post_id": 49161635, "comment_id": 85330224, "body": "@Hamaro: Your last question was off-topic because it didn&#39;t contain the relevant code parts, thats why people downvoted. Just note that deleted questions also count for question bans. It is usually preferable if you fix your questions instead of reasking them."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1520461787, "post_id": 49161635, "comment_id": 85330256, "body": "@Hamaro  screenQuadShader is compiled as GL_COMPUTE_SHADER?"}, {"owner": {"reputation": 49, "user_id": 7436657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56d1f1902bd0e75c83c0e1b02f2813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hamaro", "link": "https://stackoverflow.com/users/7436657/hamaro"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1520461903, "post_id": 49161635, "comment_id": 85330311, "body": "@Robinson yes it&#39;s. I only get api error at dispatch, none at shader creation."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1520462026, "post_id": 49161635, "comment_id": 85330362, "body": "Failed shader linking/compiling doesn&#39;t produce an api error. Do you check <code>GL_COMPILE_STATE</code> and <code>GL_LINK_STATE</code>. (But I doubt this is the problem because of the uniform setting code which would produce errors when the uniforms aren&#39;t available)."}, {"owner": {"reputation": 49, "user_id": 7436657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56d1f1902bd0e75c83c0e1b02f2813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hamaro", "link": "https://stackoverflow.com/users/7436657/hamaro"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1520462306, "post_id": 49161635, "comment_id": 85330488, "body": "@BDL I just added how i create my shader programs, i believe i check for all possible compilation errors?"}], "answers": [{"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1520519237, "post_id": 49175363, "comment_id": 85355937, "body": "8 + 24? What technique are you using that you used 32 shadow maps?"}], "tags": [], "owner": {"reputation": 49, "user_id": 7436657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56d1f1902bd0e75c83c0e1b02f2813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hamaro", "link": "https://stackoverflow.com/users/7436657/hamaro"}, "is_accepted": false, "score": 0, "last_activity_date": 1520520517, "last_edit_date": 1520520517, "creation_date": 1520518801, "answer_id": 49175363, "question_id": 49161635, "link": "https://stackoverflow.com/questions/49161635/opengl-compute-shader-works-at-home-but-nowhere-else/49175363#49175363", "title": "Opengl compute shader works at home but nowhere else", "body": "<p>Solved it. In nvidia nsight->capture frame->misc->compute shader limitations i found that compute shaders just support 32 uniform textures. I had 6 sampler2d for gbuffer and 32 shadow maps sampler2ds. When i changed it to 6+26 it works.</p>\n"}], "owner": {"reputation": 49, "user_id": 7436657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56d1f1902bd0e75c83c0e1b02f2813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Hamaro", "link": "https://stackoverflow.com/users/7436657/hamaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520520517, "creation_date": 1520458706, "last_edit_date": 1520462846, "question_id": 49161635, "link": "https://stackoverflow.com/questions/49161635/opengl-compute-shader-works-at-home-but-nowhere-else", "title": "Opengl compute shader works at home but nowhere else", "body": "<p>When running my program at home in visual studio on a computer with i7 and gtx 980ti it works and i can see my scene but when i run the program in school  on a computer with xeon and gtx 1080ti i just get a black screen.</p>\n\n<p>Running Nsight on my home computer shows no api errors while in school there is a 1282 error after the dispatch call.</p>\n\n<p>C++ file</p>\n\n<pre><code>lightingShaderProgram.activateShaderProgram();\n\nuniformLoc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"invView_matrix\");\nglUniformMatrix4fv(uniformLoc, 1, GL_FALSE, glm::value_ptr(invView_matrix));\n\nuniformLoc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"view_matrix\");\nglUniformMatrix4fv(uniformLoc, 1, GL_FALSE, glm::value_ptr(view_matrix));\n\n\n//CAM pos\nuniformLoc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"view_position\");\nglUniform3fv(uniformLoc, 1, glm::value_ptr(gameScene-&gt;mainCamera-&gt;transform.position));\n\n\nglUniform1i(glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"gPosition\"), 0);\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, gPosition);\n\nglUniform1i(glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"gNormal\"), 1);\nglActiveTexture(GL_TEXTURE1);\nglBindTexture(GL_TEXTURE_2D, gNormal);\n\nglUniform1i(glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"gAlbedo\"), 2);\nglActiveTexture(GL_TEXTURE2);\nglBindTexture(GL_TEXTURE_2D, gAlbedo);\n\nglUniform1i(glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"gAORoughMet\"), 3);\nglActiveTexture(GL_TEXTURE3);\nglBindTexture(GL_TEXTURE_2D, gAORoughMet);\n\nglUniform1i(glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"gEmissive\"), 4);\nglActiveTexture(GL_TEXTURE4);\nglBindTexture(GL_TEXTURE_2D, gEmissive);\n\nglUniform1i(glGetUniformLocation(lightingShaderProgram.screenQuadShader, \"gSSAO\"), 5);\nglActiveTexture(GL_TEXTURE5);\nglBindTexture(GL_TEXTURE_2D, ssaoShaderProgram.ssaoColorBuffer);\n\nglUniform1i(glGetUniformLocation(postEffectShaderProgram.gShaderProgram, \"FragColor\"), 6);\nglBindImageTexture(6, lColor, 0, GL_FALSE, 0, GL_WRITE_ONLY, GL_RGBA32F);\n\nglUniform1i(glGetUniformLocation(postEffectShaderProgram.gShaderProgram, \"FragHDRColor\"), 7);\nglBindImageTexture(7, lHDRColor, 0, GL_FALSE, 0, GL_WRITE_ONLY, GL_RGBA32F);\nint index = 8;\n\n//Lights\nfor (int i = 0; i &lt; lightsToRender.size(); i++)\n{\n    std::cout &lt;&lt; \"lights\" &lt;&lt; lightsToRender.size() &lt;&lt; std::endl;\n    std::string lightUniform;\n\n    //Type\n    lightUniform = \"lights[\" + std::to_string(i) + \"].lightType\";\n    GLuint loc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, lightUniform.c_str());\n    glUniform1i(loc, GLint(lightsToRender.at(i)-&gt;lightComponent-&gt;lightType));\n\n    //Position\n    lightUniform = \"lights[\" + std::to_string(i) + \"].Position\";\n    loc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, lightUniform.c_str());\n    glUniform3fv(loc, 1, glm::value_ptr(lightsToRender.at(i)-&gt;transform.position));\n\n    //Direction\n    lightUniform = \"lights[\" + std::to_string(i) + \"].DirectionVector\";\n    loc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, lightUniform.c_str());\n    glUniform3fv(loc, 1, glm::value_ptr(lightsToRender.at(i)-&gt;transform.up));\n\n    //Color\n    lightUniform = \"lights[\" + std::to_string(i) + \"].Color\";\n    loc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, lightUniform.c_str());\n    glUniform3fv(loc, 1, glm::value_ptr(lightsToRender.at(i)-&gt;lightComponent-&gt;color));\n    //std::cout &lt;&lt; \" Color\" &lt;&lt; std::endl &lt;&lt; directionalLightsToRender.at(i)-&gt;lightComponent-&gt;color.x &lt;&lt; directionalLightsToRender.at(i)-&gt;lightComponent-&gt;color.y &lt;&lt; directionalLightsToRender.at(i)-&gt;lightComponent-&gt;color.z &lt;&lt; std::endl;\n\n    //Intensity\n    lightUniform = \"lights[\" + std::to_string(i) + \"].Intensity\";\n    loc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, lightUniform.c_str());\n    glUniform1f(loc, lightsToRender.at(i)-&gt;lightComponent-&gt;intensity);\n\n    //Range\n    lightUniform = \"lights[\" + std::to_string(i) + \"].Range\";\n    loc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, lightUniform.c_str());\n    glUniform1f(loc, lightsToRender.at(i)-&gt;lightComponent-&gt;range);\n\n\n    //Light space matrix\n    lightUniform = \"lights[\" + std::to_string(i) + \"].lightSpace_matrix\";\n    loc = glGetUniformLocation(lightingShaderProgram.screenQuadShader, lightUniform.c_str());\n    glUniformMatrix4fv(loc, 1, GL_FALSE, glm::value_ptr(lightsToRender.at(i)-&gt;lightComponent-&gt;lightSpaceMatrix));\n\n    //Shadow depthmap\n    lightUniform = \"lights[\" + std::to_string(i) + \"].shadowMap\";\n    glUniform1i(glGetUniformLocation(lightingShaderProgram.screenQuadShader, lightUniform.c_str()), index);\n    glActiveTexture(GL_TEXTURE0+index);\n    glBindTexture(GL_TEXTURE_2D, lightsToRender.at(i)-&gt;lightComponent-&gt;depthMap);\n\n    index++;\n\n}\nglMemoryBarrier(GL_ALL_BARRIER_BITS);\nGLint error = glGetError();\nglDispatchCompute(display_w / 32, (display_h / 30), 1);\nerror = glGetError();\nglMemoryBarrier(GL_ALL_BARRIER_BITS);\n</code></pre>\n\n<p>C++ buffer creation</p>\n\n<pre><code>    void RenderManager::createGBuffer()\n{\n    //framebufferobject\n    glGenFramebuffers(1, &amp;gbo);\n    glBindFramebuffer(GL_FRAMEBUFFER, gbo);\n\n    //g-buffer position\n    glGenTextures(1, &amp;gPosition);\n    glBindTexture(GL_TEXTURE_2D, gPosition);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB16F, display_w, display_h, 0, GL_RGB, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    //attach texture to current framebuffer\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, gPosition, 0);\n\n    //g-buffer normal\n    glGenTextures(1, &amp;gNormal);\n    glBindTexture(GL_TEXTURE_2D, gNormal);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB16F, display_w, display_h, 0, GL_RGB, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    //attach texture to current framebuffer\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, gNormal, 0);\n\n    //g-buffer albedo\n    glGenTextures(1, &amp;gAlbedo);\n    glBindTexture(GL_TEXTURE_2D, gAlbedo);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, display_w, display_h, 0, GL_RGB, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    //attach texture to current framebuffer\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT2, GL_TEXTURE_2D, gAlbedo, 0);\n\n    //g-buffer specular + metallic + AO\n    glGenTextures(1, &amp;gAORoughMet);\n    glBindTexture(GL_TEXTURE_2D, gAORoughMet);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, display_w, display_h, 0, GL_RGB, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    //attach texture to current framebuffer\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT3, GL_TEXTURE_2D, gAORoughMet, 0);\n\n    //Emmisive\n    glGenTextures(1, &amp;gEmissive);\n    glBindTexture(GL_TEXTURE_2D, gEmissive);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, display_w, display_h, 0, GL_RGB, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    //attach texture to current framebuffer\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT4, GL_TEXTURE_2D, gEmissive, 0);\n\n\n    glDrawBuffers(5, gAttachments);\n\n\n    //renderbufferobject\n    glGenRenderbuffers(1, &amp;gRbo);\n    glBindRenderbuffer(GL_RENDERBUFFER, gRbo);\n    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH24_STENCIL8, display_w, display_h);\n    glBindRenderbuffer(GL_RENDERBUFFER, 0);\n\n    //attach renderbufferobject to framebuffer\n    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_STENCIL_ATTACHMENT, GL_RENDERBUFFER, gRbo);\n\n    if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)\n    {\n        std::cout &lt;&lt; \"ERROR::GBUFFER:: Framebuffer is not complete! \" &lt;&lt; glCheckFramebufferStatus(GL_FRAMEBUFFER) &lt;&lt; std::endl;\n        if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT)\n        {\n            std::cout &lt;&lt; \"Attachment\" &lt;&lt; std::endl;\n\n        }\n\n    }\n    else\n    {\n        std::cout &lt;&lt; \"SUCCESS::FRAMEBUFFER:: Framebuffer is complete!\" &lt;&lt; std::endl;\n    }\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n\n}\n\nvoid RenderManager::createLPBuffer()\n{\n    glGenFramebuffers(1, &amp;LPfbo);\n    glBindFramebuffer(GL_FRAMEBUFFER, LPfbo);\n\n    //Color attachments\n    glGenTextures(1, &amp;lColor);\n    glBindTexture(GL_TEXTURE_2D, lColor);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, display_w, display_h, 0, GL_RGBA, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, lColor, 0);\n\n    glGenTextures(1, &amp;lHDRColor);\n    glBindTexture(GL_TEXTURE_2D, lHDRColor);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, display_w, display_h, 0, GL_RGBA, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, lHDRColor, 0);\n\n    glGenTextures(1, &amp;lProcessedColor);\n    glBindTexture(GL_TEXTURE_2D, lProcessedColor);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, display_w, display_h, 0, GL_RGBA, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT2, GL_TEXTURE_2D, lProcessedColor, 0);\n\n    glDrawBuffers(3, pAttachments);\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n\n}\n</code></pre>\n\n<p>GLSL</p>\n\n<pre><code>#version 440\n#define EPSILON 0.0001\nconst float PI = 3.14159265359;\n\nlayout(local_size_x = 32, local_size_y = 30) in; //gl_GlobalInvocationID.xy(z?) gl_LocalInvocationID.xy(z?)\n\nlayout(binding = 0) uniform sampler2D gPosition;\nlayout(binding = 1) uniform sampler2D gNormal;\nlayout(binding = 2) uniform sampler2D gAlbedo;\nlayout(binding = 3) uniform sampler2D gAORoughMet;\nlayout(binding = 4) uniform sampler2D gEmissive;\nlayout(binding = 5) uniform sampler2D gSSAO;\n\nlayout ( binding = 6, rgba32f) uniform image2D FragColor;\nlayout ( binding = 7, rgba32f) uniform image2D FragHDRColor;\n\nuniform vec3 view_position;\nuniform mat4 invView_matrix;\nuniform mat4 view_matrix;\n\nconst int NR_LIGHTS = 32;\nstruct Light {\n    int lightType;\n    vec3 Position;\n    vec3 DirectionVector;\n    vec3 Color;\n    float Intensity;\n    float Range;\n    mat4 lightSpace_matrix;\n    sampler2D shadowMap;\n\n};\nuniform Light lights[NR_LIGHTS];\n\n\n\n\nfloat distributionGGX(vec3 normalV, vec3 halfwayV, float roughness){\n\n    //Based on observations by Disney and adopted by Epic Games the \n    //lighting looks more correct squaring the roughness in both \n    //the geometry and normal distribution function.\n    float roughness2 = roughness*roughness*roughness*roughness;\n    float normalVdotHalfwayV=max(dot(normalV, halfwayV), 0.0);\n    float normalVdotHalfwayV2=normalVdotHalfwayV*normalVdotHalfwayV;\n\n    float denominator = normalVdotHalfwayV2*(roughness2-1.0)+1.0;\n    denominator= PI *denominator*denominator;\n\n    return roughness2/denominator;\n}\n\nfloat geometrySchlickGGX(float normalVdotViewDirV, float roughness){\n\n    float rough = roughness+1.0;\n    float k = (rough*rough)/8.0;\n    float denominator = normalVdotViewDirV*(1.0-k)+k;\n\n    return normalVdotViewDirV/denominator;\n}\n\nfloat GeometrySmith(vec3 normalV, vec3 viewDirV, vec3 lightDirV, float k){\n\n    float normalVdotViewDirV = max(dot(normalV, viewDirV), 0.0);\n    float normalVdotLightDirV = max(dot(normalV, lightDirV), 0.0);\n    float ggx1 = geometrySchlickGGX(normalVdotViewDirV, k);\n    float ggx2 = geometrySchlickGGX(normalVdotLightDirV, k);\n\n    return ggx1*ggx2;\n}\n\nvec3 fresnelSchlik(float cosTheta, vec3 fresnel0){\n    return fresnel0+(1.0-fresnel0)*pow(1.0 -cosTheta, 5.0);\n}\n\nvoid main(){\n    // retrieve data from G-buffer\n    vec2 uvCoord = vec2(gl_GlobalInvocationID.xy)/vec2(1280,720);// screen = 1280x720\n    vec3 FragPos = texture(gPosition, uvCoord).rgb;\n    vec3 Normal = texture(gNormal, uvCoord).rgb;\n    vec3 Albedo = texture(gAlbedo, uvCoord).rgb;\n    vec3 AORoughMet = texture(gAORoughMet, uvCoord).rgb;\n    vec3 Emissive = texture(gEmissive, uvCoord).rgb;\n    float SSAO = texture(gSSAO, uvCoord).r;\n    vec3 viewDir = normalize((view_matrix*vec4(view_position, 1)).xyz - FragPos);\n\n    //Base reflectivity\n    vec3 fresnel0 = vec3(0.04);\n    fresnel0 = mix(fresnel0, Albedo, AORoughMet.b);\n\n    vec3 totalSpectralRadiance = vec3(0.0);\n\n\n    //Lights\n    for (int i = 0; i &lt; NR_LIGHTS; ++i)\n    {\n        vec3 lightDir;\n        vec3 halfwayDir;\n        vec3 radiance;\n        float shadow=0;\n        if(lights[i].lightType==0){\n\n        }\n\n        //Directional\n        if(lights[i].lightType==1){\n            lightDir = normalize(lights[i].DirectionVector);\n            lightDir = (view_matrix*vec4(lightDir, 0)).xyz;\n\n            halfwayDir = normalize(lightDir + viewDir);\n\n            //Shadow Calculations\n            vec4 fragPosLightSpace = lights[i].lightSpace_matrix*invView_matrix*vec4(FragPos, 1.0);\n            vec3 projectedCoordninates = fragPosLightSpace.xyz / fragPosLightSpace.w;\n            projectedCoordninates = projectedCoordninates*0.5 + 0.5;\n            float currentDepth = projectedCoordninates.z;\n            vec2 texelSize = 1.0 / textureSize(lights[0].shadowMap, 0);\n            if (currentDepth &lt; 1.0) {\n                float bias = max(0.05 * (dot(Normal, lightDir)), 0.05);\n\n                for (int x = -1; x &lt;= 1; ++x)\n                {\n                    for (int y = -1; y &lt;= 1; ++y)\n                    {\n                        float pcfDepth = texture(lights[0].shadowMap, projectedCoordninates.xy + vec2(x, y) * texelSize).r;\n                        shadow += currentDepth-bias &gt; pcfDepth ? 1.0 : 0.0;\n                    }\n                }\n            }\n            shadow = shadow / 9.0;\n            //End Shadow Calculations\n\n            radiance = lights[i].Color*lights[i].Intensity;\n        }\n\n        //Point\n        if(lights[i].lightType==2){\n            lightDir = normalize((view_matrix*vec4( lights[i].Position, 1)).xyz  - FragPos);\n            halfwayDir = normalize(lightDir + viewDir);  \n            //\n            //Shadow\n            //\n            float distance = length((view_matrix*vec4( lights[i].Position, 1)).xyz - FragPos);\n            float attenuation = 1.0 / (distance*distance); \n            radiance = lights[i].Color*lights[i].Intensity*attenuation;\n\n        }\n\n\n\n\n        //Fresnel\n        vec3 fresnel = fresnelSchlik(clamp(dot(halfwayDir, viewDir), 0.0, 1.0), fresnel0);\n\n        //Normal distribution function: approximates the amount the surface's microfacets are aligned to the halfway vector influenced by the roughness of the surface\n        float normalDistribution = distributionGGX(Normal, halfwayDir, AORoughMet.g);\n\n        //Geometry function: describes the self-shadowing property of the microfacets.\n        float geometryValue = GeometrySmith(Normal, viewDir, lightDir, AORoughMet.g);\n\n        //Cook-Torrance bidirectional reflectance distribution function \n        vec3 nominator = normalDistribution*geometryValue*fresnel;\n        float denominator = 4.0 * max(dot(Normal, viewDir), 0.0)*max(dot(Normal, lightDir), 0.0);\n        vec3 specular = nominator / max(denominator, 0.001);\n\n        vec3 contributionSpec = fresnel;\n        vec3 contributionDif = vec3(1.0) - contributionSpec;\n        contributionDif *= 1.0 - AORoughMet.b;\n\n        float normalVdotLightDirV = max(dot(Normal, lightDir), 0.0);\n        totalSpectralRadiance += (contributionDif*Albedo / PI + specular)*radiance*normalVdotLightDirV*(1-shadow);\n    }\n    float ao = AORoughMet.r;\n    if (ao &lt; SSAO) {\n        ao = SSAO;\n    }\n\n\n    vec3 ambient = vec3(0.03)*Albedo;\n    vec3 color= ambient + totalSpectralRadiance*ao;\n\n    //HDR Output\n    vec3 HDRValue = vec3(0, 0, 0);\n    float brightness = dot(color.rgb, vec3(0.2126, 0.7152, 0.0722));\n    if (brightness &gt; 1.0) {\n        HDRValue += color;\n    }\n    HDRValue += Emissive;\n    //FragHDRColor = vec4(HDRValue, 1.0);\n    imageStore(FragHDRColor, ivec2(gl_GlobalInvocationID.xy), vec4(HDRValue.xyz,1.0));\n\n    vec3 outputColor = vec3(0, 0, 0);\n    brightness = dot(color.rgb, vec3(1.0,1.0,1.0));\n    if (brightness &gt; EPSILON) {\n        outputColor += color;\n    }\n    //FragColor = vec4(outputColor.xyz, 1.0);\n    imageStore(FragColor, ivec2(gl_GlobalInvocationID.xy), vec4(outputColor.xyz,1.0));\n\n    //FragColor = vec4(ao,ao,ao, 1.0);\n\n}\n</code></pre>\n\n<p>//Edit - Shader Creation </p>\n\n<pre><code>GLuint ShaderProgram::CreateShaderData(std::string vertexShader, std::string tesselationControlShader, std::string tesselationEvaluationShader, std::string geometryShader, std::string fragmentShader, std::string computeShader)\n{\n\n    // local buffer to store error strings when compiling.\n    char buff[1024];\n    memset(buff, 0, 1024);\n    GLint compileResult = 0;\n    ifstream shaderFile;\n    std::string shaderText;\n    const char* shaderTextPtr;\n    GLuint gShaderProgram = 0;\n\n    GLuint vs = 0;\n    if (vertexShader != \"\") {\n        //create vertex shader\n        vs = glCreateShader(GL_VERTEX_SHADER);\n        shaderFile.open(vertexShader);\n        shaderText.assign((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n        shaderFile.close();\n\n        shaderTextPtr = shaderText.c_str();\n\n        // ask GL to use this string as shader code source\n        glShaderSource(vs, 1, &amp;shaderTextPtr, nullptr);\n\n        // try to compile this shader source.\n        glCompileShader(vs);\n\n        // check for compilation error\n        glGetShaderiv(vs, GL_COMPILE_STATUS, &amp;compileResult);\n        if (compileResult == GL_FALSE) {\n            // query information about the compilation (nothing if compilation went fine!)\n            glGetShaderInfoLog(vs, 1024, nullptr, buff);\n            // print to Visual Studio debug console output\n            OutputDebugStringA(buff);\n        }\n    }\n\n    GLuint tcs = 0;\n    if (tesselationControlShader != \"\") {\n        //tesselation control shader\n        tcs = glCreateShader(GL_TESS_CONTROL_SHADER);\n        shaderFile.open(tesselationControlShader);\n        shaderText.assign((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n        shaderFile.close();\n        shaderTextPtr = shaderText.c_str();\n        glShaderSource(tcs, 1, &amp;shaderTextPtr, nullptr);\n        glCompileShader(tcs);\n        // query information about the compilation (nothing if compilation went fine!)\n        compileResult = GL_FALSE;\n        glGetShaderiv(tcs, GL_COMPILE_STATUS, &amp;compileResult);\n        if (compileResult == GL_FALSE) {\n            // query information about the compilation (nothing if compilation went fine!)\n            memset(buff, 0, 1024);\n            glGetShaderInfoLog(tcs, 1024, nullptr, buff);\n            // print to Visual Studio debug console output\n            OutputDebugStringA(buff);\n        }\n    }\n\n    GLuint tes = 0;\n    if (tesselationEvaluationShader != \"\") {\n        //tesselation evaluation shader\n        tes = glCreateShader(GL_TESS_EVALUATION_SHADER);\n        shaderFile.open(tesselationEvaluationShader);\n        shaderText.assign((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n        shaderFile.close();\n        shaderTextPtr = shaderText.c_str();\n        glShaderSource(tes, 1, &amp;shaderTextPtr, nullptr);\n        glCompileShader(tes);\n        // query information about the compilation (nothing if compilation went fine!)\n        compileResult = GL_FALSE;\n        glGetShaderiv(tes, GL_COMPILE_STATUS, &amp;compileResult);\n        if (compileResult == GL_FALSE) {\n            // query information about the compilation (nothing if compilation went fine!)\n            memset(buff, 0, 1024);\n            glGetShaderInfoLog(tes, 1024, nullptr, buff);\n            // print to Visual Studio debug console output\n            OutputDebugStringA(buff);\n        }\n    }\n\n    GLuint gs = 0;\n    if (geometryShader != \"\") {\n        //geometry shader\n        gs = glCreateShader(GL_GEOMETRY_SHADER);\n        shaderFile.open(geometryShader);\n        shaderText.assign((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n        shaderFile.close();\n        shaderTextPtr = shaderText.c_str();\n        glShaderSource(gs, 1, &amp;shaderTextPtr, nullptr);\n        glCompileShader(gs);\n        // query information about the compilation (nothing if compilation went fine!)\n        compileResult = GL_FALSE;\n        glGetShaderiv(gs, GL_COMPILE_STATUS, &amp;compileResult);\n        if (compileResult == GL_FALSE) {\n            // query information about the compilation (nothing if compilation went fine!)\n            memset(buff, 0, 1024);\n            glGetShaderInfoLog(gs, 1024, nullptr, buff);\n            // print to Visual Studio debug console output\n            OutputDebugStringA(buff);\n        }\n    }\n\n    GLuint fs = 0;\n    if (fragmentShader != \"\") {\n        // fragment Shader\n        fs = glCreateShader(GL_FRAGMENT_SHADER);\n        shaderFile.open(fragmentShader);\n        shaderText.assign((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n        shaderFile.close();\n        shaderTextPtr = shaderText.c_str();\n        glShaderSource(fs, 1, &amp;shaderTextPtr, nullptr);\n        glCompileShader(fs);\n        // query information about the compilation (nothing if compilation went fine!)\n        compileResult = GL_FALSE;\n        glGetShaderiv(fs, GL_COMPILE_STATUS, &amp;compileResult);\n        if (compileResult == GL_FALSE) {\n            // query information about the compilation (nothing if compilation went fine!)\n            memset(buff, 0, 1024);\n            glGetShaderInfoLog(fs, 1024, nullptr, buff);\n            // print to Visual Studio debug console output\n            OutputDebugStringA(buff);\n        }\n    }\n\n    GLuint cs = 0;\n    if (computeShader != \"\") {\n        //compute shader\n        cs = glCreateShader(GL_COMPUTE_SHADER);\n        shaderFile.open(computeShader);\n        shaderText.assign((std::istreambuf_iterator&lt;char&gt;(shaderFile)), std::istreambuf_iterator&lt;char&gt;());\n        shaderFile.close();\n        shaderTextPtr = shaderText.c_str();\n        glShaderSource(cs, 1, &amp;shaderTextPtr, nullptr);\n        glCompileShader(cs);\n        // query information about the compilation (nothing if compilation went fine!)\n        compileResult = GL_FALSE;\n        glGetShaderiv(cs, GL_COMPILE_STATUS, &amp;compileResult);\n        if (compileResult == GL_FALSE) {\n            // query information about the compilation (nothing if compilation went fine!)\n            memset(buff, 0, 1024);\n            glGetShaderInfoLog(cs, 1024, nullptr, buff);\n            // print to Visual Studio debug console output\n            OutputDebugStringA(buff);\n        }\n    }\n\n    //link shader program (connect vs and ps)\n    gShaderProgram = glCreateProgram();\n    if (fragmentShader != \"\") {\n        glAttachShader(gShaderProgram, fs);\n    }\n    if (tesselationControlShader != \"\") {\n        glAttachShader(gShaderProgram, tcs);\n    }\n    if (tesselationEvaluationShader != \"\") {\n        glAttachShader(gShaderProgram, tes);\n    }\n    if (geometryShader != \"\") {\n        glAttachShader(gShaderProgram, gs);\n    }\n    if (vertexShader != \"\") {\n        glAttachShader(gShaderProgram, vs);\n    }\n    if (computeShader != \"\") {\n        glAttachShader(gShaderProgram, cs);\n    }\n    glLinkProgram(gShaderProgram);\n\n    // check once more, if the Vertex Shader and the Fragment Shader can be used\n    // together\n    compileResult = GL_FALSE;\n    glGetProgramiv(gShaderProgram, GL_LINK_STATUS, &amp;compileResult);\n    if (compileResult == GL_FALSE) {\n        // query information about the compilation (nothing if compilation went fine!)\n        memset(buff, 0, 1024);\n        glGetProgramInfoLog(gShaderProgram, 1024, nullptr, buff);\n        // print to Visual Studio debug console output\n        OutputDebugStringA(buff);\n    }\n\n    //detach shaders\n    if (fragmentShader != \"\") {\n        glDetachShader(gShaderProgram, fs);\n    }\n    if (tesselationControlShader != \"\") {\n        glDetachShader(gShaderProgram, tcs);\n    }\n    if (tesselationEvaluationShader != \"\") {\n        glDetachShader(gShaderProgram, tes);\n    }\n    if (geometryShader != \"\") {\n        glDetachShader(gShaderProgram, gs);\n    }\n    if (vertexShader != \"\") {\n        glDetachShader(gShaderProgram, vs);\n    }\n    if (computeShader != \"\") {\n        glDetachShader(gShaderProgram, cs);\n    }\n\n    //delete shaders\n    if (fragmentShader != \"\") {\n        glDeleteShader(fs);\n    }\n    if (tesselationControlShader != \"\") {\n        glDeleteShader(tcs);\n    }\n    if (tesselationEvaluationShader != \"\") {\n        glDeleteShader(tes);\n    }\n    if (geometryShader != \"\") {\n        glDeleteShader(gs);\n    }\n    if (vertexShader != \"\") {\n        glDeleteShader(vs);\n    }\n    if (computeShader != \"\") {\n        glDeleteShader(cs);\n    }\n\n\n\n    return gShaderProgram;\n}\n</code></pre>\n\n<p>I think it's a problem with sampler2d and/or image2d because i've had problem with them before in another compute shader. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "xcode", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1520458724, "post_id": 49161632, "comment_id": 85328928, "body": "p is not guaranteed to be null."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1520458799, "post_id": 49161632, "comment_id": 85328973, "body": "its not guaranteed to be null as it is uninitialised but in this instance it is null as it says so in the error message."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 4, "last_activity_date": 1520458689, "creation_date": 1520458689, "answer_id": 49161632, "question_id": 49161618, "link": "https://stackoverflow.com/questions/49161618/thread-1-exc-bad-access-code-1-address-0x0-error/49161632#49161632", "title": "Thread 1: EXC_BAD_ACCESS (code=1, address=0x0) error", "body": "<p>p is null and you try to write to it inside biggest.</p>\n\n<p>You probably want:</p>\n\n<pre><code>int main()\n{\n    int p;\n    biggest(15, 20, &amp;p);\n    cout &lt;&lt; \"The biggest value is \" &lt;&lt; p &lt;&lt; endl;\n    return( 0 );\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9375259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb0815ad9cbc7be1eaef8a5ce89625a?s=128&d=identicon&r=PG&f=1", "display_name": "B.can", "link": "https://stackoverflow.com/users/9375259/b-can"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1512, "favorite_count": 0, "accepted_answer_id": 49161632, "answer_count": 1, "score": 0, "last_activity_date": 1520458689, "creation_date": 1520458597, "question_id": 49161618, "link": "https://stackoverflow.com/questions/49161618/thread-1-exc-bad-access-code-1-address-0x0-error", "title": "Thread 1: EXC_BAD_ACCESS (code=1, address=0x0) error", "body": "<p>Can someone help and explain why the code builds but breaks and sends out the error Thread 1: EXC_BAD_ACCESS (code=1, address=0x0)?</p>\n\n<pre><code>void biggest(int value1, int value2, int * resultPtr)\n{\n    if( value1 &gt; value2 )\n    {\n        *resultPtr = value1;\n    }\n    else\n    {\n        *resultPtr = value2;     //the code breaks on this line\n    }\n}\n\nint main()\n{\n    int* p;\n    biggest(15, 20, p);\n    cout &lt;&lt; \"The biggest value is \" &lt;&lt; *p &lt;&lt; endl;\n    return( 0 );\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "avr", "atmega", "avr-gcc"], "comments": [{"owner": {"reputation": 233, "user_id": 3866741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32da01cc166f2023c0fa10978107728?s=128&d=identicon&r=PG&f=1", "display_name": "hikerjobs", "link": "https://stackoverflow.com/users/3866741/hikerjobs"}, "edited": false, "score": 0, "creation_date": 1520458274, "post_id": 49161497, "comment_id": 85328729, "body": "It would help if you show us some code snippets and sample input/output. See <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1520458385, "post_id": 49161497, "comment_id": 85328779, "body": "Optimization might make only one return point for nested function calls. Or even inline all of these..."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1520458544, "post_id": 49161497, "comment_id": 85328848, "body": "I have edited to improve the English - please check I haven&#39;t mangled your meaning.  I have also changed the tags - the language isn&#39;t that significant (and you will get a lot of push-back about using <i>both</i> C and C++ tags), and the experts on this are likely to be the Arduino experts, not C experts.  If you want a language tag too, please pick <i>one</i>, not both."}, {"owner": {"reputation": 23, "user_id": 9459066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb46555ed22450dc668671489a0797a?s=128&d=identicon&r=PG&f=1", "display_name": "Radu", "link": "https://stackoverflow.com/users/9459066/radu"}, "edited": false, "score": 0, "creation_date": 1520460476, "post_id": 49161497, "comment_id": 85329716, "body": "/* The output of the code is: 8700 \t\t\t      8700 \t\t\t      8700 \t\t\t      8700   The right output need to be: 8700 \t\t\t      8698 \t\t\t      8696 \t\t\t      8694 */    void func3() { \tSerial.println(SP); }  void func2() { \tSerial.println(SP); \t \tfunc3(); }  void func1() { \tSerial.println(SP); \t \tfunc2(); }   void setup() { \tSerial.begin(9600);  \tSerial.println(SP); \t \tfunc1();\t }  void loop() {  }"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1520492447, "post_id": 49161497, "comment_id": 85339488, "body": "Don&#39;t post your code in comments or as a new answer, edit your existing question, as I did now."}, {"owner": {"reputation": 830, "user_id": 7059512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a00007e9f887b4547f8f29b921e612b2?s=128&d=identicon&r=PG&f=1", "display_name": "per1234", "link": "https://stackoverflow.com/users/7059512/per1234"}, "edited": false, "score": 2, "creation_date": 1520492651, "post_id": 49161497, "comment_id": 85339587, "body": "Also asked at: <a href=\"http://forum.arduino.cc/index.php?topic=533773\" rel=\"nofollow noreferrer\">forum.arduino.cc/index.php?topic=533773</a> If you&#39;re going to do that then please be considerate enough to add links to the other places you cross posted. This will let us avoid wasting time due to duplicate effort and also help others who have the same questions and find your post to discover all the relevant information."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9459066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb46555ed22450dc668671489a0797a?s=128&d=identicon&r=PG&f=1", "display_name": "Radu", "link": "https://stackoverflow.com/users/9459066/radu"}, "edited": false, "score": 0, "creation_date": 1520536029, "post_id": 49167143, "comment_id": 85366869, "body": "Hi, seams like the answer are both, put the <b>attribute</b> ((noinline)) before function name and to print SP both before and after call. I tried to do this with Atmel Studio and here is work fine, i will try to make three task, each other will power on an led if it works i will put the code here to help anyone who want to do the same thing. Thanks for help."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 23, "user_id": 9459066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb46555ed22450dc668671489a0797a?s=128&d=identicon&r=PG&f=1", "display_name": "Radu", "link": "https://stackoverflow.com/users/9459066/radu"}, "edited": false, "score": 0, "creation_date": 1520578742, "post_id": 49167143, "comment_id": 85381603, "body": "Yep, I expect that without <code>noinline</code> everything just got inlined, and even with it the tail calls got optimized to jumps. Adding something to do after the call makes tail call optimization optimization. Now if my answer helped you consider marking it as accepted (the tick near the upvote/downvote) buttons - it gives 5 points to you and 15 to me, and signals that the question did in fact have a solution. Thank you!"}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 1, "last_activity_date": 1520492201, "creation_date": 1520492201, "answer_id": 49167143, "question_id": 49161497, "link": "https://stackoverflow.com/questions/49161497/how-stack-pointer-works/49167143#49167143", "title": "How stack pointer works", "body": "<p>Most probably, your functions are rightly being inlined, so everything actually gets done straight in <code>setup()</code>, with no function calls involved. If you want to forcefully disable inlining for them (to see the stack pointer change), you can apply the gcc <code>noinline</code> attribute.</p>\n\n<pre><code>void __attribute__ ((noinline)) func1() {\n    ...\n}\n</code></pre>\n\n<p>If this still doesn't work, it's possible that gcc is applying tail call optimization anyhow. In that case, a simple method to make your functions not prone to this optimization is to print <code>SP</code> both before and <em>after</em> the call. </p>\n"}], "owner": {"reputation": 23, "user_id": 9459066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb46555ed22450dc668671489a0797a?s=128&d=identicon&r=PG&f=1", "display_name": "Radu", "link": "https://stackoverflow.com/users/9459066/radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 49167143, "answer_count": 1, "score": -2, "last_activity_date": 1539694683, "creation_date": 1520458024, "last_edit_date": 1539694683, "question_id": 49161497, "link": "https://stackoverflow.com/questions/49161497/how-stack-pointer-works", "title": "How stack pointer works", "body": "<p>I'm trying to make an multithreading kernel for atmega328p micro an for that i need to know how the stack pointer it works.</p>\n"}, {"tags": ["c++", "node.js", "compiler-errors", "node-modules", "node-nan"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1520458357, "post_id": 49161334, "comment_id": 85328764, "body": "Looks like you don&#39;t have a free space on your disk (simply clear it),or you put an invalid build file path."}, {"owner": {"reputation": 1502, "user_id": 5080787, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/649199765216133/picture?type=large", "display_name": "Maciej Kozieja", "link": "https://stackoverflow.com/users/5080787/maciej-kozieja"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1520458511, "post_id": 49161334, "comment_id": 85328841, "body": "I have 2 partitions each of them has more than 100GB"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1520458651, "post_id": 49161334, "comment_id": 85328896, "body": "<code>fatal error LNK1106: invalid file or disk full.</code> node.lib mind be: missing, corrupt, or you are building with another architecture. For example node.js is 32 bit, when your library is 64 bit or vise versa."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1520458775, "post_id": 49161334, "comment_id": 85328955, "body": "Take a look into <a href=\"https://stackoverflow.com/questions/3155492/how-do-i-specify-the-platform-for-msbuild\" title=\"how do i specify the platform for msbuild\">stackoverflow.com/questions/3155492/&hellip;</a>"}, {"owner": {"reputation": 1502, "user_id": 5080787, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/649199765216133/picture?type=large", "display_name": "Maciej Kozieja", "link": "https://stackoverflow.com/users/5080787/maciej-kozieja"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1520459262, "post_id": 49161334, "comment_id": 85329193, "body": "@VictorGubin I&#39;ve checked node.lib also I&#39;ve reinstaled node-gyp. It also creates a project so it should be valid. I&#39;m building x64 and node.lib matches"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1520459763, "post_id": 49161334, "comment_id": 85329405, "body": "Ok, got it. Take a look into <a href=\"https://stackoverflow.com/questions/18702613/fatal-error-lnk1106-invalid-file-or-disk-full-cannot-seek-to-0x5a57bebc\" title=\"fatal error lnk1106 invalid file or disk full cannot seek to 0x5a57bebc\">stackoverflow.com/questions/18702613/&hellip;</a>"}, {"owner": {"reputation": 1502, "user_id": 5080787, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/649199765216133/picture?type=large", "display_name": "Maciej Kozieja", "link": "https://stackoverflow.com/users/5080787/maciej-kozieja"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1520460253, "post_id": 49161334, "comment_id": 85329610, "body": "Added /expectedoutputsize:600000000 as linker arg but it didn&#39;t help :/"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 1, "creation_date": 1520460582, "post_id": 49161334, "comment_id": 85329757, "body": "One more thing. Looks like there were some caches  or whatever <a href=\"https://github.com/electron/electron-rebuild/issues/163\" rel=\"nofollow noreferrer\">github.com/electron/electron-rebuild/issues/163</a>"}, {"owner": {"reputation": 1502, "user_id": 5080787, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/649199765216133/picture?type=large", "display_name": "Maciej Kozieja", "link": "https://stackoverflow.com/users/5080787/maciej-kozieja"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1520462133, "post_id": 49161334, "comment_id": 85330411, "body": "Actualy I&#39;m not using electron, just nan to create c++ addon"}], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 6247412, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XoqiQ.jpg?s=128&g=1", "display_name": "Khalil", "link": "https://stackoverflow.com/users/6247412/khalil"}, "is_accepted": false, "score": 0, "last_activity_date": 1525933464, "creation_date": 1525933464, "answer_id": 50266781, "question_id": 49161334, "link": "https://stackoverflow.com/questions/49161334/node-addon-compilation-error/50266781#50266781", "title": "Node addon compilation error", "body": "<p>I had this problem. It was resolved through following steps</p>\n\n<p>Step 1 Make sure Phython is installed and has path installed in system variable</p>\n\n<p>try npm install now</p>\n\n<p>If it does now work proceed to step two</p>\n\n<p>Step 2 Delete .node-gyp folder and install node-gyp again</p>\n"}], "owner": {"reputation": 1502, "user_id": 5080787, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/649199765216133/picture?type=large", "display_name": "Maciej Kozieja", "link": "https://stackoverflow.com/users/5080787/maciej-kozieja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 543, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525933464, "creation_date": 1520457388, "question_id": 49161334, "link": "https://stackoverflow.com/questions/49161334/node-addon-compilation-error", "title": "Node addon compilation error", "body": "<p>I am new to creating c++ addons for node.<br>\nI've instaled windows-build-tools and after running <code>node-gyp build</code> I've encountered a strange problem.</p>\n\n<p>I tryed to do some research before asking this question but it seams there is no clear answer. </p>\n\n<p>I've also tryed reinstaling node-gyp and build tools.</p>\n\n<p>My question is what is the cause of this problem and how to fix it</p>\n\n<pre><code>node-gyp build\ngyp info it worked if it ends with ok\ngyp info using node-gyp@3.6.2\ngyp info using node@9.5.0 | win32 | x64\ngyp info spawn C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\MSBuild\\15.0\\Bin\\MSBuild.exe\ngyp info spawn args [ 'build/binding.sln',\ngyp info spawn args   '/clp:Verbosity=minimal',\ngyp info spawn args   '/nologo',\ngyp info spawn args   '/p:Configuration=Release;Platform=x64' ]\nProjekty w tym rozwi\u0105zaniu s\u0105 tworzone po kolei. Aby umo\u017cliwi\u0107 tworzenie r\u00f3wnoleg\u0142e, dodaj prze\u0142\u0105cznik \"/m\".\nC:\\Users\\maciek\\.node-gyp\\9.5.0\\x64\\node.lib : fatal error LNK1106: invalid file or disk full: cannot seek to 0x1E5CBE [C:\\Users\\maci\nek\\Desktop\\mcn\\build\\myModule.vcxproj]\ngyp ERR! build error\ngyp ERR! stack Error: `C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\MSBuild\\15.0\\Bin\\MSBuild.exe` failed with exit code: 1\ngyp ERR! stack     at ChildProcess.onExit (C:\\Users\\maciek\\AppData\\Roaming\\npm\\node_modules\\node-gyp\\lib\\build.js:258:23)\ngyp ERR! stack     at ChildProcess.emit (events.js:160:13)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:209:12)\ngyp ERR! System Windows_NT 10.0.16299\ngyp ERR! command \"C:\\\\Program Files\\\\nodejs\\\\node.exe\" \"C:\\\\Users\\\\maciek\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\node-gyp\\\\bin\\\\node-gyp.js\" \"build\"\ngyp ERR! cwd C:\\Users\\maciek\\Desktop\\mcn\ngyp ERR! node -v v9.5.0\ngyp ERR! node-gyp -v v3.6.2\ngyp ERR! not ok\n</code></pre>\n"}, {"tags": ["c++", "winapi", "process"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1520458736, "post_id": 49161232, "comment_id": 85328936, "body": "@Robinson: it is not a duplicate. The <code>Process.Exited</code> event is notified when a new process is spawned by the app&#39;s own code via <code>Process.Start()</code> and is then waited on asynchronously. The linked question is about how to detect the creation/termination of external processes that the app did not spawn itself."}, {"owner": {"reputation": 14802, "user_id": 800123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bZMq5.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/800123/jack"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1520472831, "post_id": 49161232, "comment_id": 85333573, "body": "Whoa. This was voted as off-topic? This is not programming? I&#39;m really confused right now."}], "answers": [{"comments": [{"owner": {"reputation": 14802, "user_id": 800123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bZMq5.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/800123/jack"}, "edited": false, "score": 0, "creation_date": 1520606556, "post_id": 49161377, "comment_id": 85397150, "body": "Thank you very much. This is a console application but in my real code I&#39;ll run up to run 4 applications at time in parallel and run a new one soon as one is exited, until the list is finished. I&#39;m trying to implemente this."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1520472277, "last_edit_date": 1520472277, "creation_date": 1520457573, "answer_id": 49161377, "question_id": 49161232, "link": "https://stackoverflow.com/questions/49161232/how-do-i-run-a-process-then-get-notified-when-it-has-exited/49161377#49161377", "title": "How do I run a process then get notified when it has exited?", "body": "<p>You are creating the new process with the <code>CREATE_SUSPENDED</code> flag, but you are not resuming the process (by passing <code>pi.hThread</code> to <code>ResumeThread()</code>) after registering the new process <code>HANDLE</code> for notification.  Even if you did, you are not waiting for the notification to arrive before exiting from <code>main()</code>.</p>\n\n<p>You are also not closing <code>pi.hThread</code>, <code>pi.hProcess</code>, or <code>hWait</code> after you are done using them.</p>\n\n<p>Try something more like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n\nstatic void CALLBACK OnExited(void* context, BOOLEAN isTimeOut);\n\nint main() \n{\n    char *cmd = \"C:\\\\Windows\\\\System32\\\\notepad.exe\";\n\n    STARTUPINFOA si = {};\n    si.cb = sizeof(si);\n\n    PROCESS_INFORMATION pi;\n\n    if (!CreateProcessA(NULL, cmd, NULL, NULL, FALSE, DETACHED_PROCESS | CREATE_SUSPENDED, NULL, NULL, &amp;si, &amp;pi))\n    {\n        printf(\"create process error = %u\\n\", GetLastError());\n    }\n    else\n    {\n        HANDLE hWait = NULL;\n\n        HANDLE hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);\n        if (!hEvent)\n        {\n            printf(\"create event error = %u\\n\", GetLastError());\n        }\n        else if (!RegisterWaitForSingleObject(&amp;hWait, pi.hProcess, OnExited, hEvent, INFINITE, WT_EXECUTEONLYONCE))\n        {\n            printf(\"register wait error = %u\\n\", GetLastError());\n        }\n\n        ResumeThread(pi.hThread);\n        CloseHandle(pi.hThread);\n\n        if (hEvent)\n        {\n            if (hWait)\n            {\n                WaitForSingleObject(hEvent, INFINITE);\n                UnregisterWait(hWait);\n            }\n\n            CloseHandle(hEvent);\n        }\n\n        CloseHandle(pi.hProcess);\n    }\n\n    return 0;\n}\n\nstatic void CALLBACK OnExited(void* context, BOOLEAN isTimeOut)\n{\n    printf(\"OnExited got called!\\n\");\n    SetEvent((HANDLE)context);\n}\n</code></pre>\n\n<p>Or, if you omit the <code>CREATE_SUSPENDED</code> flag, you can then omit the <code>ResumeThread()</code>. The wait notification will still work even if the process ends before the wait thread begins monitoring it, as long as you don't close the process handle before the wait is satisfied:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n\nstatic void CALLBACK OnExited(void* context, BOOLEAN isTimeOut);\n\nint main() \n{\n    char *cmd = \"C:\\\\Windows\\\\System32\\\\notepad.exe\";\n\n    STARTUPINFOA si = {};\n    si.cb = sizeof(si);\n\n    PROCESS_INFORMATION pi;\n\n    if (!CreateProcessA(NULL, cmd, NULL, NULL, FALSE, DETACHED_PROCESS, NULL, NULL, &amp;si, &amp;pi))\n    {\n        printf(\"create process error = %u\\n\", GetLastError());\n    }\n    else\n    {\n        CloseHandle(pi.hThread);\n\n        HANDLE hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);\n        if (!hEvent)\n        {\n            printf(\"create event error = %u\\n\", GetLastError());\n        }\n        else\n        {\n            HANDLE hWait = NULL;\n            if (!RegisterWaitForSingleObject(&amp;hWait, pi.hProcess, OnExited, hEvent, INFINITE, WT_EXECUTEONLYONCE))\n            {\n                printf(\"register wait error = %u\\n\", GetLastError());\n            }\n            else\n            {\n                WaitForSingleObject(hEvent, INFINITE);\n                UnregisterWait(hWait);\n            }\n\n            CloseHandle(hEvent);\n        }\n\n        CloseHandle(pi.hProcess);\n    }\n\n    return 0;\n}\n\nstatic void CALLBACK OnExited(void* context, BOOLEAN isTimeOut)\n{\n    printf(\"OnExited got called!\\n\");\n    SetEvent((HANDLE)context);\n}\n</code></pre>\n\n<p>However, either way, using <code>RegisterWaitForSingleObject()</code> isn't very beneficial in such a simple console app.  It makes more sense in a multithreaded/GUI app instead.  For this example, you could just use <code>WaitForSingleObject()</code> instead:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n\nint main() \n{\n    char *cmd = \"C:\\\\Windows\\\\System32\\\\notepad.exe\";\n\n    STARTUPINFOA si = {};\n    si.cb = sizeof(STARTUPINFOA);\n\n    PROCESS_INFORMATION pi;\n\n    if (!CreateProcessA(NULL, cmd, NULL, NULL, FALSE, DETACHED_PROCESS, NULL, NULL, &amp;si, &amp;pi))\n    {\n        printf(\"create process error = %d\\n\", GetLastError());\n    }\n    else\n    {\n        CloseHandle(pi.hThread);\n        WaitForSingleObject(pi.hProcess, INFINITE);\n        CloseHandle(pi.hProcess);\n        printf(\"Exited!\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1520460392, "post_id": 49161747, "comment_id": 85329667, "body": "you not close <code>pi.hProcess</code> and <code>pi.hThread</code>. you not call <code>UnregisterWait</code> - so you have resource leaks"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1520460456, "post_id": 49161747, "comment_id": 85329706, "body": "No, I don&#39;t.  I&#39;m making the OP&#39;s code &quot;work&quot;, i.e. the problem is the process is terminating."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1520460564, "post_id": 49161747, "comment_id": 85329749, "body": "but code is wrong anyway - not free resources serious error"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1547228045, "post_id": 49161747, "comment_id": 95134011, "body": "It&#39;s not &quot;leaking&quot; is it.  Any resources allocated by the process are freed on process termination.  It may be bad practice but that is a different issue."}], "tags": [], "owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "is_accepted": false, "score": -1, "last_activity_date": 1520459655, "last_edit_date": 1520459655, "creation_date": 1520459170, "answer_id": 49161747, "question_id": 49161232, "link": "https://stackoverflow.com/questions/49161232/how-do-i-run-a-process-then-get-notified-when-it-has-exited/49161747#49161747", "title": "How do I run a process then get notified when it has exited?", "body": "<p>I think the basic problem here is your main process is terminating, i.e. if you do something like:</p>\n\n<pre><code>#include &lt;thread&gt;\n\nstd::this_thread::sleep_for(std::chrono::seconds(10000));\n</code></pre>\n\n<p>on your main thread, the handler will be called.  In your example/demo your program has nothing else to do.</p>\n\n<p>I mean apart from CREATE_SUSPENDED, which obviously does what it says so you'll never see your created process's window.</p>\n\n<p>This works for me:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;windows.h&gt;\n\nstatic void CALLBACK OnExited(void* context, BOOLEAN isTimeOut);\n\nint main()\n{   \n    char *cmd = \"C:\\\\Windows\\\\System32\\\\notepad.exe\";\n\n    STARTUPINFOA si = { sizeof(STARTUPINFOA) }; \n    PROCESS_INFORMATION pi;\n\n    if (CreateProcessA(NULL, cmd, NULL, NULL, FALSE, DETACHED_PROCESS, NULL, NULL, &amp;si, &amp;pi))\n    {\n        HANDLE hWait;\n\n        if (!RegisterWaitForSingleObject(&amp;hWait, pi.hProcess, OnExited, NULL, INFINITE, WT_EXECUTEONLYONCE))\n        {\n            std::cout &lt;&lt; \"register failed: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n        }\n    }\n    else\n    {\n        std::cout &lt;&lt; \"error creating process: \" &lt;&lt; GetLastError() &lt;&lt; std::endl;\n    }\n\n    // Engage in shenanigans otherwise we'll just exit main.\n\n    std::this_thread::sleep_for(std::chrono::seconds(10000));\n}\n\nstatic void CALLBACK OnExited(void* context, BOOLEAN isTimeOut)\n{\n    std::cout &lt;&lt; \"OnExited got called!\" &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1520459910, "post_id": 49161823, "comment_id": 85329475, "body": "This looks pretty but something about &quot;delete this&quot; is giving off an awful smell."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1520460088, "post_id": 49161823, "comment_id": 85329549, "body": "@Robinson - this (<code>delete this</code>) is absolute correct here and must be. if want can move this line to <code>_WaitOrTimerCallback</code> - <code>delete reinterpret_cast&lt;WAIT_CTX*&gt;(lpParameter)</code>; but this is nothing changed by sense"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1520460219, "post_id": 49161823, "comment_id": 85329599, "body": "Your class does nothing to guarantee it was created on the heap.  But what do I know..."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1520460292, "post_id": 49161823, "comment_id": 85329628, "body": "@Robinson - my class created by <code>new</code> ( <code>WAIT_CTX* p = new WAIT_CTX(pi.hProcess)</code>) and deleted by coresponded <code>delete</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1520460607, "post_id": 49161823, "comment_id": 85329765, "body": "@Robinson - i not understand what you mean or want. my code absolute correct - in what your problem ?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1520460762, "post_id": 49161823, "comment_id": 85329833, "body": "@Robinson - my code is absolute correct. and at this line where i call this - this is correct. if you have bad knowledge - this is your problem only. you can not even explain yourself why this you mean that this (<code>delete this</code>) is error"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 2, "creation_date": 1520461024, "post_id": 49161823, "comment_id": 85329933, "body": "The problem is you allow a user to <code>WAIT_CTX doomed;</code> You should wall this off with <code>private</code> constructors and a <code>static</code> member factory function that forces dynamic allocation. Five bucks says this is what @Robinson &#39;s posted link is suggesting."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520461176, "post_id": 49161823, "comment_id": 85329996, "body": "@user4581301 - i not write here release library class code. i show very basic example of usage <code>RegisterWaitForSingleObject</code>. concrete posted code is absolute correct. handle all possible errors and free all resources. i not care here about wrong usage of class. of course possible make destructor private four you be happy :)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520461759, "post_id": 49161823, "comment_id": 85330246, "body": "No worries. Just explaining what Robinson was likely worried about and leaving a breadcrumb for those who follow."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520462316, "post_id": 49161823, "comment_id": 85330493, "body": "@user4581301 - i really not understand <i>c++</i> adepts . frequently they absolute not worried about resource leaks at all. not handle errors. but than that aesthetically dissatisfied in absolute correct code which handle all errors and free all resources. if very want - here more <i>c++</i> version - but again - i here not write class library - this is example of winapi usage of notify"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1520462958, "post_id": 49161823, "comment_id": 85330727, "body": "For someone who [correctly] commented <i>&quot;not free resources serious error&quot;</i> on another answer, this is quite the fun submission \ud83d\ude02 <code>delete this</code>? Just no. Is it valid? Sure, in this case. Is it a good idea? <b>NO.</b> Please do not forget that you are teaching."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520463086, "post_id": 49161823, "comment_id": 85330780, "body": "@LightnessRacesinOrbit - and so what ? you mean my pure english or something else ? i give the general example of correct usage <code>RegisterWaitForSingleObject</code>. how correct call it and not forget free all handles. i not show here master class of <i>c++</i> - this question not about this. fanny if i coding here in <i>c</i> style - pure struct without member functions - will be no problems ? or i simply not use context and not free handles (as robinson) this will be ok ? :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520465458, "post_id": 49161823, "comment_id": 85331632, "body": "No idea what you&#39;re talking about."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520465569, "post_id": 49161823, "comment_id": 85331666, "body": "@LightnessRacesinOrbit - i too have no idea about you talking"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1520465650, "post_id": 49161823, "comment_id": 85331689, "body": "Then I will repeat one more time: <code>delete this</code> Is it a good idea? NO."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520465772, "post_id": 49161823, "comment_id": 85331727, "body": "@LightnessRacesinOrbit - this is <b>correct</b> code. this all what i can say. and i not view any bad here"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1520465959, "post_id": 49161823, "comment_id": 85331773, "body": "Correct, yes. Good, no."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520466221, "post_id": 49161823, "comment_id": 85331853, "body": "@LightnessRacesinOrbit - and what it is not &quot;good&quot; ? i understand what i doing and can do this. somebody not like my style ? and so what. much more bad for me write code which not free resources and not handle errors. and i here not write application. may be use <code>RegisterWaitForSingleObject</code> not good idea here at all. but i show in general how this winapi/notification used. this is by sense winapi question but not about good c++ style. especially if compare my answer with another. not view that it more bad. faster otherwise"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520466246, "post_id": 49161823, "comment_id": 85331863, "body": "@RbMm: Read the FAQ entry you were linked to."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520466369, "post_id": 49161823, "comment_id": 85331895, "body": "@LightnessRacesinOrbit - faster read OP question - about what it. can also read another answer (say Robinson) and compare with my. about faq - i have enough knowledge and i free do what i want do"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520467768, "post_id": 49161823, "comment_id": 85332285, "body": "Furthermore, this post does not explain the OP&#39;s problem nor does it explain the solution provided."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1520516586, "post_id": 49161823, "comment_id": 85354055, "body": "And since no one noted (which you will certainly call off as aesthetics): <code>_WaitOrTimerCallback</code> is a <a href=\"http://en.cppreference.com/w/cpp/language/identifiers\" rel=\"nofollow noreferrer\">reserved symbol</a>. This code isn&#39;t even valid."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520519555, "post_id": 49161823, "comment_id": 85356147, "body": "Not a big fan of clicking hyperlinks, eh? The link explains, that your code exhibits undefined behavior. Appearing to work is a valid form of undefined behavior. It&#39;s still undefined."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520519745, "post_id": 49161823, "comment_id": 85356294, "body": "@IInspectable - this is not UB. this is only theoretical reserved symbol. until it by fact not. if even it will be used in future for something else - compiler  simply give error for this usage"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520521182, "post_id": 49161823, "comment_id": 85357420, "body": "Right from the <a href=\"http://en.cppreference.com/w/cpp/language/identifiers\" rel=\"nofollow noreferrer\">link</a> I posted two comments above: <i>&quot;If the programmer uses such [reserved] identifiers, the behavior is undefined.&quot;</i> What sources do you have, that this were not undefined behavior? Then again, it&#39;s the old issue revisited: You do not understand contracts. I would greatly appreciate it, if you informed yourself before commenting back."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520521330, "post_id": 49161823, "comment_id": 85357547, "body": "@IInspectable - the <b>compiler</b> behavior is undefined - in sense compiler say can compile this without errors or refuse compile, because it used this symbol"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520521389, "post_id": 49161823, "comment_id": 85357593, "body": "That is your interpretation. And that interpretation does not coincide with reality. Again, please do inform yourself, and do not comment on contracts, until you understand contracts."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520521505, "post_id": 49161823, "comment_id": 85357679, "body": "@IInspectable - no, this not only my interpretation. this is fact. i unlike you can think yourself"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520521608, "post_id": 49161823, "comment_id": 85357759, "body": "Er, unlike me, you can think myself? I&#39;m going to side with @Lightness here, and call this a fun submission."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520521655, "post_id": 49161823, "comment_id": 85357793, "body": "@IInspectable - i view already how you can think yourself. only documentation and all"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520521827, "post_id": 49161823, "comment_id": 85357940, "body": "Good spot on the reserved word @IInspectable. I&#39;d missed that. Yes, this code example has undefined behaviour."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520522010, "post_id": 49161823, "comment_id": 85358047, "body": "@LightnessRacesinOrbit - what you want really ? the code which i posted here the best from existing. i free all resources and not do senseless wait in place, which kill sense of asynchronous callback. no any errors in code . you are <i>c++</i> ultra adept ? and so what ? my code is absolute correct and efficient"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520522048, "post_id": 49161823, "comment_id": 85358079, "body": "It is not the best. It has undefined behaviour. It is the worst. If you spent less time arguing with people you may stand to learn something; unfortunately, you have no interest in that, so we can only delete this answer to protect other readers."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520523232, "post_id": 49161823, "comment_id": 85358910, "body": "@LightnessRacesinOrbit - maximum what can be - some compiler can refuse compile this code and say that symbol wrong used. nothing more. you and yourself understand this. and question was not about c++ formal standard and documentation. really - what you want ? code the best from winapi (windows) view"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": -3, "last_activity_date": 1520462130, "last_edit_date": 1520462130, "creation_date": 1520459485, "answer_id": 49161823, "question_id": 49161232, "link": "https://stackoverflow.com/questions/49161232/how-do-i-run-a-process-then-get-notified-when-it-has-exited/49161823#49161823", "title": "How do I run a process then get notified when it has exited?", "body": "<p>you can use for example next code:</p>\n\n<pre><code>class __declspec(novtable) _WAIT_CTX \n{\n    HANDLE hObject, WaitHandle;\n\n    static VOID CALLBACK _WaitOrTimerCallback(PVOID lpParameter, BOOLEAN /*TimerOrWaitFired*/)\n    {\n        reinterpret_cast&lt;_WAIT_CTX*&gt;(lpParameter)-&gt;_OnWaitCallback();\n    }\n\n    void _OnWaitCallback()\n    {\n        OnWaitCallback(hObject);\n        delete this;\n    }\nprotected:\n    virtual ~_WAIT_CTX()\n    {\n        if (WaitHandle) UnregisterWait(WaitHandle);\n        if (hObject) CloseHandle(hObject);\n    }\n    virtual void OnWaitCallback(HANDLE hObject) = 0;\npublic:\n\n    ULONG Register(HANDLE h)\n    {\n        hObject = h;\n\n        if (RegisterWaitForSingleObject(&amp;WaitHandle, h, \n            _WaitOrTimerCallback, this, INFINITE, WT_EXECUTEONLYONCE))\n        {\n            return NOERROR;\n        }\n\n        ULONG dwError = GetLastError();\n\n        delete this;\n\n        return dwError;\n    }\n\n    _WAIT_CTX() : hObject(0), WaitHandle(0)\n    {\n    }\n};\n\nclass WAIT_CTX : public _WAIT_CTX\n{\n    virtual void OnWaitCallback(HANDLE hProcess)\n    {\n        ULONG exitCode;\n        GetExitCodeProcess(hProcess, &amp;exitCode);\n        DbgPrint(\"exitcode=%x\", exitCode);\n    }\n};\n\nULONG bbb()\n{\n    STARTUPINFO si = { sizeof(si) };\n    PROCESS_INFORMATION pi;\n    ULONG dwError;\n    if (CreateProcessW(L\"c:\\\\windows\\\\notepad.exe\", 0, 0, 0, 0, 0, 0, 0, &amp;si, &amp;pi))\n    {\n        CloseHandle(pi.hThread);\n\n        if (WAIT_CTX* p = new WAIT_CTX)\n        {\n            dwError = p-&gt;Register(pi.hProcess);\n        }\n        else\n        {\n            dwError = ERROR_OUTOFMEMORY;\n            CloseHandle(pi.hProcess);\n        }\n    }\n    else \n    {\n        dwError = GetLastError();\n    }\n\n    return dwError;\n}\n</code></pre>\n"}], "owner": {"reputation": 14802, "user_id": 800123, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/bZMq5.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/800123/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 49161377, "answer_count": 3, "score": 1, "last_activity_date": 1520472277, "creation_date": 1520456935, "question_id": 49161232, "link": "https://stackoverflow.com/questions/49161232/how-do-i-run-a-process-then-get-notified-when-it-has-exited", "title": "How do I run a process then get notified when it has exited?", "body": "<p>I'm trying to reimplement .NET's <a href=\"https://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>Process.Exited</code></a> Event but I've been unsuccessfully so far. No error is returned by the application doesn't open. What am I missing?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n\nstatic void CALLBACK OnExited(void* context, BOOLEAN isTimeOut);\n\nint main() \n{\n    char *cmd = \"C:\\\\Windows\\\\System32\\\\notepad.exe\";\n    STARTUPINFOA si = { sizeof(STARTUPINFOA) };\n    //si.cb = STARTUPINFOA.sizeof;\n    PROCESS_INFORMATION pi;\n    if(CreateProcessA(NULL, cmd, NULL, NULL, FALSE, DETACHED_PROCESS | CREATE_SUSPENDED, NULL, NULL, &amp;si, &amp;pi))\n    {\n        HANDLE hWait;\n        if(!RegisterWaitForSingleObject(&amp;hWait, pi.hProcess, OnExited, NULL, INFINITE, WT_EXECUTEONLYONCE))\n        {\n            printf(\"register failed! = %d\", GetLastError());\n        }\n    }\n    else\n    {\n        printf(\"error = %d\\n\", GetLastError());\n    }\n}\n\nstatic void CALLBACK OnExited(void* context, BOOLEAN isTimeOut)\n{\n    printf(\"OnExited got called!\\n\");\n}\n</code></pre>\n"}, {"tags": ["c++", "loops", "include", "counter", "iostream"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1520456276, "post_id": 49161019, "comment_id": 85327696, "body": "<code>int count = 0;</code> recreates and resets <code>count</code> everytime through the loop. Move that to outside the <code>for</code> loop."}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1520458915, "post_id": 49161106, "comment_id": 85329035, "body": "At last!  Someone who actually solves the problem without introducing another operator that doesn&#39;t actually avoid the need to do an if!"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1520456410, "creation_date": 1520456410, "answer_id": 49161106, "question_id": 49161019, "link": "https://stackoverflow.com/questions/49161019/skip-every-third-number/49161106#49161106", "title": "Skip every third number", "body": "<p>You need to create <code>count</code> before loop, as in your code you create new one on every iteration, and print X instead of <code>i</code> not together:</p>\n\n<pre><code>int count = 0;\nfor(int i=min; i&lt;=max; i++){\n    if (++count==3){\n        cout&lt;&lt;setw(4)&lt;&lt;\"X\";\n        count = 0;\n    } else // print i only when X is not printed\n        cout&lt;&lt;setw(4)&lt;&lt;i;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9338677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3294e5a533356b95453c94174854ff?s=128&d=identicon&r=PG&f=1", "display_name": "joshpretzel", "link": "https://stackoverflow.com/users/9338677/joshpretzel"}, "edited": false, "score": 0, "creation_date": 1520458173, "post_id": 49161480, "comment_id": 85328684, "body": "In place of <code>count</code> you could use <code>(i - max + 1)</code>"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520459908, "post_id": 49161480, "comment_id": 85329474, "body": "Not <code>(i - min + 1)</code>?"}, {"owner": {"reputation": 13, "user_id": 9338677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3294e5a533356b95453c94174854ff?s=128&d=identicon&r=PG&f=1", "display_name": "joshpretzel", "link": "https://stackoverflow.com/users/9338677/joshpretzel"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520516193, "post_id": 49161480, "comment_id": 85353770, "body": "@TonyDelroy - You are correct. It should be this:    In place of <code>count</code> you could use <code>(i - min + 1)</code>"}], "tags": [], "owner": {"reputation": 13, "user_id": 9338677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3294e5a533356b95453c94174854ff?s=128&d=identicon&r=PG&f=1", "display_name": "joshpretzel", "link": "https://stackoverflow.com/users/9338677/joshpretzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1520457944, "creation_date": 1520457944, "answer_id": 49161480, "question_id": 49161019, "link": "https://stackoverflow.com/questions/49161019/skip-every-third-number/49161480#49161480", "title": "Skip every third number", "body": "<p>The modulus operator <code>%</code> returns the remainder of a division operation. <code>count++</code> is executed each loop thus the statement <code>count % 3</code> returns 1, 2, 0, 1, 2, 0, etc. for each loop iteration.</p>\n\n<p>When the result is <code>0</code> you know it is time to print <code>'X'</code>. If not, print <code>i</code>.</p>\n\n<p>Remember to start <code>count</code> at <code>1</code> so you don't print <code>'X'</code> the first iteration.</p>\n\n<pre><code>void no_5_count_from_min_to_max_skip_two(int min, int max)\n{\n    cout &lt;&lt; \"5.Counting from min to max but skip two:\";\n    cout &lt;&lt; endl;\n\n    for (int i = min, count = 1; i &lt;= max; i++, count++)\n    {\n        if ((count % 3) == 0)\n            cout &lt;&lt; setw(4) &lt;&lt; \"X\";\n        else\n            cout &lt;&lt; setw(4) &lt;&lt; i;\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9436299, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e51c188e91807683d7f00d2201fec5a8?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lopez", "link": "https://stackoverflow.com/users/9436299/eric-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "accepted_answer_id": 49161106, "answer_count": 2, "score": 0, "last_activity_date": 1520812371, "creation_date": 1520456086, "question_id": 49161019, "link": "https://stackoverflow.com/questions/49161019/skip-every-third-number", "title": "Skip every third number", "body": "<p>My assignment is to print a set of numbers from min to max (the user inputs min and mix) but every third number to print an \"x\" instead. I'm not sure how to set it up. My friend suggested using count++ but i can't get it to work properly. It runs but it doesn't display any X's.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\nvoid no_5_count_from_min_to_max_skip_two(int min, int max);\nint main()\n{\n\n    int min;\n    int max;\n    int first;\n    int second; \n\n    cout&lt;&lt;\"Enter first number:\";\n    cin&gt;&gt;first;\n    cout&lt;&lt;endl;\n    cout&lt;&lt;\"Enter second number:\";\n    cin&gt;&gt;second;\n    cout&lt;&lt;endl;\n\n    if (first&gt;second){\n        max = first;\n        min = second;\n    }\n    else{\n        max = second;\n        min = first;\n    }\n\n    no_5_count_from_min_to_max_skip_two(min,max);\n\n    return 0;\n}\n\nvoid no_5_count_from_min_to_max_skip_two(int min, int max){\n    cout&lt;&lt;\"5.Counting from min to max but skip two:\";\n    cout&lt;&lt;endl;\n\n    for(int i=min; i&lt;=max; i++){\n        int count = 0;\n        count++;\n        if (count==3){\n            cout&lt;&lt;setw(4)&lt;&lt;\"X\";\n            count = 0;\n        }\n        cout&lt;&lt;setw(4)&lt;&lt;i;\n    }\ncout&lt;&lt;endl;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520455638, "post_id": 49160715, "comment_id": 85327387, "body": "<code>0xffff</code> can&#39;t fit in a <code>signed short</code>.  Overflowing a singed integer is undefined behavior so any result is &quot;correct&quot;"}, {"owner": {"reputation": 357, "user_id": 7015860, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/d61581bbc570f857c43404cee2918847?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Hobbs", "link": "https://stackoverflow.com/users/7015860/kyle-hobbs"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520455942, "post_id": 49160715, "comment_id": 85327536, "body": "I don&#39;t have to use string stream, but I would like to.  I believed that a signed short was 16 bits in size, why would &#39;0xffff&#39; not fit in it?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1520456015, "post_id": 49160715, "comment_id": 85327572, "body": "The max value of a 16 bit signed short is <code>0x7fff</code>.  Anything more than that will overflow."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520456017, "post_id": 49160715, "comment_id": 85327575, "body": "@NathanOliver, Extracting from a stream has different specified behaviour than native operations. IIRC, streams (rather, the default facet that deals with this) always set it to the max value in this case. That said, I strongly believe initializing a signed integral type with a value over the max is IB (specifically, an implementation-defined value) rather than UB, as well as for assignment."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1520455786, "creation_date": 1520455786, "answer_id": 49160953, "question_id": 49160715, "link": "https://stackoverflow.com/questions/49160715/converting-4-character-hex-string-to-a-signed-short-with-string-streams-in-c/49160953#49160953", "title": "Converting 4 character hex string to a signed short with string streams in c++", "body": "<p>The problem most likely is that    </p>\n\n<pre><code>ss1 &gt;&gt; hex &gt;&gt; s1;\n</code></pre>\n\n<p>fails. It does for me.</p>\n\n<p>Update the code to add a check.</p>\n\n<pre><code>if ( !(ss1 &gt;&gt; hex &gt;&gt; s1) )\n{\n   cout &lt;&lt; \"Unable to read s1\\n\";\n}\n</code></pre>\n\n<p>If reading into <code>s1</code> fails, it does not make sense to rely on its value until it has been set to something valid.</p>\n"}, {"tags": [], "owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "is_accepted": false, "score": 3, "last_activity_date": 1520456705, "last_edit_date": 1520456705, "creation_date": 1520456304, "answer_id": 49161085, "question_id": 49160715, "link": "https://stackoverflow.com/questions/49160715/converting-4-character-hex-string-to-a-signed-short-with-string-streams-in-c/49161085#49161085", "title": "Converting 4 character hex string to a signed short with string streams in c++", "body": "<p>The problem is that there is no signed short overload for <code>std::num_get::get()</code>.  The stream extraction <code>operator&gt;&gt;(short&amp;)</code> is actually reading 0xffff from the string as an long int, failing to convert the value to a short because of potential overlfow, assigning a defined value of <code>std::numeric_limits&lt;short&gt;::max()</code> and setting <code>std::ios_base::failbit</code> on the stream.</p>\n\n<p>See ISO/IEC 14882 [istream.formatted.arithmetic]/2 for a detailed description of this well-defined and expected behaviour.</p>\n"}], "owner": {"reputation": 357, "user_id": 7015860, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/d61581bbc570f857c43404cee2918847?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Hobbs", "link": "https://stackoverflow.com/users/7015860/kyle-hobbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1520456705, "creation_date": 1520454765, "last_edit_date": 1520456117, "question_id": 49160715, "link": "https://stackoverflow.com/questions/49160715/converting-4-character-hex-string-to-a-signed-short-with-string-streams-in-c", "title": "Converting 4 character hex string to a signed short with string streams in c++", "body": "<p>A similar question has been asked before, and I am using the solution from that question, but it isn't working 100%.\nHere is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nint main () {\n    string hexStr1 = \"ffff\";\n    short s1;\n    stringstream ss1;\n    ss1 &lt;&lt; hex &lt;&lt; hexStr1;\n    ss1 &gt;&gt; s1;\n\n    string hexStr2 = \"f\";\n    short s2;\n    stringstream ss2;\n    ss2 &lt;&lt; hex &lt;&lt; hexStr2;\n    ss2 &gt;&gt; s2;\n\n    s2 = s2 | -16;\n\n\n\n    cout &lt;&lt; \"s1: \" &lt;&lt; s1 &lt;&lt; \"\\n\";  //Outputs 32767 (max short)\n    cout &lt;&lt; \"s2: \" &lt;&lt; s2 &lt;&lt; \"\\n\";  //Outputs -1 \n}\n</code></pre>\n\n<p>Shouldn't the value stored in <code>s1</code> be <code>-1</code> because if a (2-byte) short variable has the value <code>0xffff</code> it would be negative one?  </p>\n\n<p>I don't see what is different about how I'm setting s2 vs. how I'm setting s1, but the results are different...</p>\n\n<p>I would like the program above to print out:</p>\n\n<pre><code>s1: -1\ns2: -1\n</code></pre>\n\n<p>Can anyone explain why the value in s1 is not -1 after my program runs?</p>\n"}, {"tags": ["c++", "gcc", "intrinsics", "powerpc", "altivec"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1520462873, "post_id": 49160427, "comment_id": 85330698, "body": "<i>why are the two permutations not being folded into one?</i> Presumably because your compiler doesn&#39;t know how to do that optimization.  Missed-optimizations are common even in fairly good compilers.  On x86, I&#39;d expect clang to do it (because it has a pretty good shuffle optimizer), but I forget if gcc knows how to combine earlier or later <code>_mm_shuffle_epi32</code> intrinsics with <code>_mm_shuffle_epi8</code> with a constant vector into a single<code>pshufb</code> instruction."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520463542, "post_id": 49160427, "comment_id": 85330966, "body": "Thanks @Peter. We reported a GCC bug at <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=84753\" rel=\"nofollow noreferrer\">Issue 84753</a>, but it was closed immediately as fixed even though we are seeing it under GCC 4.8, GCC 7.2 and IBM XL C/C++ 13.1. There&#39;s something fishy going on here. The IBM team knows damn well that bug is present and not fixed."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520464253, "post_id": 49160427, "comment_id": 85331250, "body": "Your gcc bug should include a test-case that doesn&#39;t optimize away.  e.g. modify some global arrays, or write a function that takes pointer args.  IDK why you included a <code>main</code> function at all.  I usually include a godbolt link for missed-optimization bugs, but unfortunately Godbolt only has PPC gcc 6.3.  I don&#39;t have PPC compilers installed locally, so I can&#39;t test it easily."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520464462, "post_id": 49160427, "comment_id": 85331312, "body": "Thanks @Peter. There&#39;s a link to the real code that is experiencing the issue. The link is in the problem description. The code is my MCVE for the port. There&#39;s also a disassembly that shows the problem."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520466036, "post_id": 49160427, "comment_id": 85331789, "body": "Your gcc bug report doesn&#39;t have any complete block I could copy-paste and compile to repro the bug.  Thus, it&#39;s not a MCVE.  It has a tiny snippet which is M but not C or V.  It has a <code>main</code> which optimizes away and thus is C but not V.  It has a link to your original source which is C and V but not M.  It should be easy to make one short function which has all 3 properties, <b>so the gcc devs can easily test it on their own machines with a current build of gcc</b>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1520466390, "post_id": 49160427, "comment_id": 85331898, "body": "Thanks @Peter. Everything that is needed is in the bug report and the port that is experiencing the problem. I&#39;m pretty sure the compilers are broke and the SHA performance sucks. Even OpenSSL&#39;s numbers are off. Everything else is just IBM covering it up, like closing the bug report as &quot;already fixed&quot;."}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1520453421, "creation_date": 1520453421, "question_id": 49160427, "link": "https://stackoverflow.com/questions/49160427/why-doesnt-the-compiler-fold-xxswapd-and-vperm", "title": "Why doesn&#39;t the compiler fold xxswapd and vperm?", "body": "<p>I've still trying to get my 1 to 2 cpb out of <a href=\"https://stackoverflow.com/q/49132339/608639\">Power8's SHA instructions</a>. This C/C++ code copies the user's message into the message schedule:</p>\n\n<pre><code>void SHA256_SCHEDULE(uint32_t W[64+2], const uint8_t* D)\n{\n    uint32_t* w = reinterpret_cast&lt;uint32_t*&gt;(W);\n    const uint32_t* d = reinterpret_cast&lt;const uint32_t*&gt;(D);\n    unsigned int i=0;\n\n    const uint8x16_p8 mask = {3,2,1,0, 7,6,5,4, 11,10,9,8, 15,14,13,12};\n    for (i=0; i&lt;16; i+=4, d+=4, w+=4)\n        VectorStore32x4u(VectorPermute32x4(VectorLoad32x4u(d, 0), mask), w, 0);\n\n    ...\n}\n</code></pre>\n\n<p>When I compile at <code>-O3</code> and look at the disassembly I see the following:</p>\n\n<pre><code>100008bc:   99 26 20 7c     lxvd2x  vs33,0,r4\n...\n100008d0:   57 0a 21 f0     xxswapd vs33,vs33\n100008d8:   2b 08 21 10     vperm   v1,v1,v1,v0\n</code></pre>\n\n<p>I believe what is happening is:</p>\n\n<ol>\n<li>load occurs at <code>100008bc</code> (<code>lxvd2x</code>)</li>\n<li>le-to-be conversion occurs at <code>100008d0</code> (<code>xxswapd</code>)</li>\n<li>my permutation is applied at <code>100008d8</code> (<code>vperm</code>)</li>\n</ol>\n\n<p>At (1) the VSX register has the value but it is in little-endian format. Elements 0 and 4 need swapped; and elements 2 and 3 need swapped.</p>\n\n<p>At (2) and (3) two permutations are being applied. It is kind of like calling <code>shuffle_epi32</code> followed by <code>shuffle_epi8</code> on an x86 machine.</p>\n\n<p>PowerPC's <code>vec_perm</code> is very powerful, and any two permutations can be folded into one permutation.</p>\n\n<p>My first question is, why are the two permutations not being folded into one?</p>\n\n<p>My second question is, how can I force the compiler to perform the folding?</p>\n\n<p>I'm trying my best to avoid inline assembly because the code supports GCC, Clang and IBM's XL C/C++. IBM's XL C/C++ does not support inline assembly as well as GCC and Clang, so it is going to be a painful path.</p>\n\n<hr>\n\n<p>Here is the full disassembly:</p>\n\n<pre><code>0000000010000880 &lt;SHA256_SCHEDULE(unsigned int*, unsigned char const*)&gt;:\n    10000880:   03 10 40 3c     lis     r2,4099\n    10000884:   00 81 42 38     addi    r2,r2,-32512\n    10000888:   f0 ff c1 fb     std     r30,-16(r1)\n    1000088c:   f8 ff e1 fb     std     r31,-8(r1)\n    10000890:   fe ff 22 3d     addis   r9,r2,-2\n    10000894:   10 00 c4 3b     addi    r30,r4,16\n    10000898:   80 8e 29 39     addi    r9,r9,-29056\n    1000089c:   10 00 e3 3b     addi    r31,r3,16\n    100008a0:   20 00 84 39     addi    r12,r4,32\n    100008a4:   20 00 63 39     addi    r11,r3,32\n    100008a8:   99 4e 00 7c     lxvd2x  vs32,0,r9\n    100008ac:   30 00 a3 38     addi    r5,r3,48\n    100008b0:   40 00 23 39     addi    r9,r3,64\n    100008b4:   c4 ff c0 38     li      r6,-60\n    100008b8:   c0 ff e0 38     li      r7,-64\n    100008bc:   99 26 20 7c     lxvd2x  vs33,0,r4\n    100008c0:   30 00 84 38     addi    r4,r4,48\n    100008c4:   f8 ff 00 39     li      r8,-8\n    100008c8:   e4 ff 40 39     li      r10,-28\n    100008cc:   57 02 00 f0     xxswapd vs32,vs32\n    100008d0:   57 0a 21 f0     xxswapd vs33,vs33\n    100008d4:   97 05 00 f0     xxlnand vs32,vs32,vs32\n    100008d8:   2b 08 21 10     vperm   v1,v1,v1,v0\n    100008dc:   57 0a 21 f0     xxswapd vs33,vs33\n    100008e0:   99 1f 20 7c     stxvd2x vs33,0,r3\n    100008e4:   18 00 60 38     li      r3,24\n    100008e8:   a6 03 69 7c     mtctr   r3\n    100008ec:   99 f6 20 7c     lxvd2x  vs33,0,r30\n    100008f0:   57 0a 21 f0     xxswapd vs33,vs33\n    100008f4:   2b 08 21 10     vperm   v1,v1,v1,v0\n    100008f8:   57 0a 21 f0     xxswapd vs33,vs33\n    100008fc:   99 ff 20 7c     stxvd2x vs33,0,r31\n    10000900:   99 66 20 7c     lxvd2x  vs33,0,r12\n    10000904:   57 0a 21 f0     xxswapd vs33,vs33\n    10000908:   2b 08 21 10     vperm   v1,v1,v1,v0\n    1000090c:   57 0a 21 f0     xxswapd vs33,vs33\n    10000910:   99 5f 20 7c     stxvd2x vs33,0,r11\n    10000914:   99 26 20 7c     lxvd2x  vs33,0,r4\n    10000918:   57 0a 21 f0     xxswapd vs33,vs33\n    1000091c:   2b 08 01 10     vperm   v0,v1,v1,v0\n    10000920:   57 02 00 f0     xxswapd vs32,vs32\n    10000924:   99 2f 00 7c     stxvd2x vs32,0,r5\n    10000928:   00 00 00 60     nop\n    1000092c:   00 00 42 60     ori     r2,r2,0\n    10000930:   99 36 09 7c     lxvd2x  vs32,r9,r6\n    10000934:   99 3e 89 7d     lxvd2x  vs44,r9,r7\n    10000938:   99 56 a9 7d     lxvd2x  vs45,r9,r10\n    1000093c:   99 46 29 7c     lxvd2x  vs33,r9,r8\n    10000940:   82 06 00 10     vshasigmaw v0,v0,0,0\n    10000944:   82 7e 21 10     vshasigmaw v1,v1,0,15\n    10000948:   80 60 00 10     vadduwm v0,v0,v12\n    1000094c:   80 68 00 10     vadduwm v0,v0,v13\n    10000950:   80 08 00 10     vadduwm v0,v0,v1\n    10000954:   99 4f 00 7c     stxvd2x vs32,0,r9\n    10000958:   08 00 29 39     addi    r9,r9,8\n    1000095c:   d4 ff 00 42     bdnz    10000930 &lt;SHA256_SCHEDULE(unsigned int*, unsigned char const*)+0xb0&gt;\n    10000960:   f0 ff c1 eb     ld      r30,-16(r1)\n    10000964:   f8 ff e1 eb     ld      r31,-8(r1)\n    10000968:   20 00 80 4e     blr\n    1000096c:   00 00 00 00     .long 0x0\n    10000970:   00 09 00 00     .long 0x900\n    10000974:   00 02 00 00     attn\n    10000978:   00 00 00 60     nop\n    1000097c:   00 00 42 60     ori     r2,r2,0\n</code></pre>\n"}, {"tags": ["c++", "loops", "while-loop"], "comments": [{"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 3, "creation_date": 1520453216, "post_id": 49160362, "comment_id": 85326107, "body": "What does &quot;doesn&#39;t work quite so well&quot; mean? How does it work exactly? What is the output you get, and for what input?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1520453221, "post_id": 49160362, "comment_id": 85326112, "body": "Language tag please"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1520453392, "post_id": 49160362, "comment_id": 85326201, "body": "Did you mean to write <code>else if (d &lt; smallest)</code> instead of <code>else if (d &lt; largest)</code>?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1520453397, "post_id": 49160362, "comment_id": 85326206, "body": "You need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is not working?"}, {"owner": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520453503, "post_id": 49160362, "comment_id": 85326265, "body": "Sorry. If I read in 1, that becomes the largest value. If I then read in 71, that becomes the largest value. If I then read in 41, this becomes the smallest value. But that isn&#39;t correct and not sure how to fix that problem"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1520455288, "post_id": 49160362, "comment_id": 85327200, "body": "@Njgardner90 <a href=\"https://www.ideone.com/kRnhoV\" rel=\"nofollow noreferrer\">C++ can be fun</a>."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1520459229, "post_id": 49160362, "comment_id": 85329180, "body": "@PaulMcKenzie, best solution!"}], "answers": [{"comments": [{"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1520453639, "post_id": 49160439, "comment_id": 85326334, "body": "Thanks. I edited to fix some other issues."}, {"owner": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520454212, "post_id": 49160439, "comment_id": 85326627, "body": "So reading the value 72 printed that this was the largest and smallest value."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520454319, "post_id": 49160439, "comment_id": 85326690, "body": "@Njgardner90 And what do you think it should have printed instead? What is the largest and what is the smallest number when you have 1 number?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1520454415, "post_id": 49160439, "comment_id": 85326741, "body": "This will fail if the user only enters negative numbers.  There is no need to set <code>smallest</code> and <code>largest</code> to any value as they can both be set to the first input."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "edited": false, "score": 0, "creation_date": 1520454421, "post_id": 49160439, "comment_id": 85326745, "body": "Sorry, I removed your else. I just ran it in my IDE and realized you may want to only set the largest value on the first pass. Is that the case? If so I can throw the else back in there."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520454463, "post_id": 49160439, "comment_id": 85326765, "body": "@NathanOliver, yes. That is correct. Thanks for that."}, {"owner": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1520454625, "post_id": 49160439, "comment_id": 85326849, "body": "@Killzone Kid The variables smallest and largest are supposed to keep track of the smallest and largest values so far. So if I read in 1, and then 71 - reading in 41 shouldn&#39;t print &quot;the smallest value so far&quot; as it currently does. Sorry for not being clear"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520454945, "post_id": 49160439, "comment_id": 85327035, "body": "@Njgardner90 cannot confirm. 1 -&gt; is both largest and smallest, because only 1 number, 71 -&gt; largest, 41 -&gt; it doesn&#39;t print anything for me because it is neither largest nor smallest."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520454990, "post_id": 49160439, "comment_id": 85327052, "body": "@Njgardner90, your solution has that else in there. So, it was always setting the first value to the largest, no matter what. Let me know exactly what you want to do with some examples. It&#39;s just a logic problem at this point, though. I think this code can get you going."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "edited": false, "score": 0, "creation_date": 1520455089, "post_id": 49160439, "comment_id": 85327099, "body": "Actually, I&#39;m taking the else out again. Unless you always want to set the largest first, no matter what number comes in, it will set both on the first pass."}, {"owner": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1520455171, "post_id": 49160439, "comment_id": 85327140, "body": "@Killzone Kid From my original post, reading in 1 prints &quot;the largest value yet&quot;, then reading in 71 reads &quot;the largest value yet&quot; but if I then read in 41, it prints &quot;the smallest value yet&quot;"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520455218, "post_id": 49160439, "comment_id": 85327164, "body": "@Njgardner90 are we talking about your original post or this solution?"}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520455238, "post_id": 49160439, "comment_id": 85327171, "body": "@Njgardner90, yes, that is because you ALWAYS set the largest number, no matter what number came in, and you had that else in there that skipped the smallest. Do you want to skip the smalest?"}, {"owner": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520455607, "post_id": 49160439, "comment_id": 85327368, "body": "@adpro the problem for me is making sure the smallest number so far is actually the smallest and not just smaller than the largest value that was read previously"}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520458838, "post_id": 49160439, "comment_id": 85328991, "body": "@Njgardner90, if the smallest and largest number are both set on the first number entered, you will always end up with the smallest number being a smaller number than that number if one were entered, and the largest number would only change if a larger number were entered.  The only time a number would go into both smallest and largest is on the first pass.  I don&#39;t really understand what you mean by making sure it&#39;s not just smaller than the largest value. Once they&#39;re both set (to the first value) your smallest will only change when a value is entered that is smaller than smallest."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520459133, "post_id": 49160439, "comment_id": 85329127, "body": "@Njgardner90, do you only want to set the largest on the first path? Removing that else seems to fix your problem with 1, 71, 41 entered. 1 will be the smallest, and 71 will be the largest.  Can they not be the same ever?  That would be the question to ask. My solution solves your problem. If you need that else in there for some reason, please let me know why."}, {"owner": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520466074, "post_id": 49160439, "comment_id": 85331797, "body": "@adpro Yeah, the program has to keep track of the smallest value so far, and the largest. So no number entered could be smaller than the smallest and vice versa. It&#39;s a bit hard to explain. I just want to get past this drills part from Bjarne stroustrups book!"}, {"owner": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520466243, "post_id": 49160439, "comment_id": 85331861, "body": "@adpro looks like the second solution you put in works. Thank you :)"}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "reply_to_user": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "edited": false, "score": 0, "creation_date": 1520514950, "post_id": 49160439, "comment_id": 85352917, "body": "@Njgardner90, no problem."}], "tags": [], "owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "is_accepted": true, "score": 3, "last_activity_date": 1520459681, "last_edit_date": 1520459681, "creation_date": 1520453499, "answer_id": 49160439, "question_id": 49160362, "link": "https://stackoverflow.com/questions/49160362/keeping-track-of-smallest-or-largest/49160439#49160439", "title": "Keeping track of smallest or largest", "body": "<p>It looks like your issue is that you have 0 as the minimum to start. Which, well, is the minimum you could ever have.  Set it to the maximum possible double value.  Something like this should work for you.</p>\n\n<p>I also removed your else, because your first number should be the largest and smallest, right?</p>\n\n<p>You also had <code>largest</code> in your <code>smallest</code> if statement.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    double d = 0;\n    double smallest = DBL_MAX;\n    double largest = -DBL_MAX;\n\n    while (cin &gt;&gt; d)\n    {\n        if (d &gt; largest)\n        {\n            largest = d;\n\n            cout &lt;&lt; largest &lt;&lt; \" is the largest value yet\\n\\r\";\n\n        }\n\n        if (d &lt; smallest)\n        {\n            smallest = d;\n\n            cout &lt;&lt; smallest &lt;&lt; \" is the smallest value yet\\n\\r\";\n        }\n    }\n}\n</code></pre>\n\n<p>If you want to keep your else in there, the solution is almost the same, but we're basically just hiding that the first pass sets both to the same value.  This doesn't make sense to me, but here you have it.  This is how you will solve your problem with the 1, 71, 41 example, where 41 was set to the smallest number in your code.  It's incorrect because it wasn't setting 1 to both smallest and largest.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    double d = 0;\n    double smallest = DBL_MAX;\n    double largest = -DBL_MAX;\n    bool firstPass = true;\n\n    while (cin &gt;&gt; d)\n    {\n        if (d &gt; largest)\n        {\n            largest = d;\n\n            cout &lt;&lt; largest &lt;&lt; \" is the largest value yet\\n\\r\";\n        }\n        else if (d &lt; smallest)\n        {\n            smallest = d;\n\n            cout &lt;&lt; smallest &lt;&lt; \" is the smallest value yet\\n\\r\";\n        }\n\n        if(firstPass) \n        {\n            firstPass = false;\n\n            smallest = d;\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1520453639, "post_id": 49160454, "comment_id": 85326335, "body": "Consider using <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits\" rel=\"nofollow noreferrer\"><code>std::numeric_limits</code></a> when you need &quot;very large&quot; or &quot;very small&quot; values instead of arbitrary values."}, {"owner": {"reputation": 1827, "user_id": 1572834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG", "display_name": "adprocas", "link": "https://stackoverflow.com/users/1572834/adprocas"}, "edited": false, "score": 0, "creation_date": 1520514932, "post_id": 49160454, "comment_id": 85352907, "body": "This also doesn&#39;t solve the issue he was having with the smallest being set after the largest"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": -2, "last_activity_date": 1520453565, "creation_date": 1520453565, "answer_id": 49160454, "question_id": 49160362, "link": "https://stackoverflow.com/questions/49160362/keeping-track-of-smallest-or-largest/49160454#49160454", "title": "Keeping track of smallest or largest", "body": "<pre><code>else if (d &lt; largest)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>else if (d &lt; smallest)\n</code></pre>\n\n<p>and</p>\n\n<pre><code> double smallest = 0;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>  double smallest = 1000000; // or some very large number\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8106571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc2f692de89e305104489be5004de8b?s=128&d=identicon&r=PG&f=1", "display_name": "Njgardner90", "link": "https://stackoverflow.com/users/8106571/njgardner90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1520466486, "accepted_answer_id": 49160439, "answer_count": 2, "score": -1, "last_activity_date": 1520459681, "creation_date": 1520453145, "last_edit_date": 1520453652, "question_id": 49160362, "link": "https://stackoverflow.com/questions/49160362/keeping-track-of-smallest-or-largest", "closed_reason": "Not suitable for this site", "title": "Keeping track of smallest or largest", "body": "<p>I'm currently working on a drill from stroustrups book. The drill requires that you read a double each time through a loop and use 2 variables to keep track of the smallest and largest values read so far. Here's my attempt, but it doesn't work quite so well at the moment. Any help will be appreciated.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout;\nusing std::cin;\n\nint main()\n{\n    double d = 0;\n    double smallest = 0;\n    double largest = 0;\n\n    while (cin &gt;&gt; d)\n    {\n\n        if (d &gt; largest)\n        {\n            largest = d;\n             cout &lt;&lt; largest &lt;&lt; \" is the largest value yet\" \n&lt;&lt; '\\n';\n\n        }\n        else if (d &lt; largest)\n        {\n        smallest = d;\n        cout &lt;&lt; smallest &lt;&lt; \" is the smallest value yet\" \n&lt;&lt; '\\n';\n        }\n        else\n        continue;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "sublimetext3", "cpplint"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1520453180, "post_id": 49160338, "comment_id": 85326082, "body": "&quot;View &gt; Syntax &gt; Open all with current extension as ... &gt; C++&quot;"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520453201, "post_id": 49160338, "comment_id": 85326096, "body": "&quot;View &gt; Syntax &gt; Open all with current extension as &gt; C++&quot;"}, {"owner": {"reputation": 1, "user_id": 9458813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966c62363fabc9e66a6995b28606ab5c?s=128&d=identicon&r=PG&f=1", "display_name": "J.M", "link": "https://stackoverflow.com/users/9458813/j-m"}, "edited": false, "score": 0, "creation_date": 1520454306, "post_id": 49160338, "comment_id": 85326681, "body": "Was first thing I tried, but for some reason it doesn&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9458813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966c62363fabc9e66a6995b28606ab5c?s=128&d=identicon&r=PG&f=1", "display_name": "J.M", "link": "https://stackoverflow.com/users/9458813/j-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1520455322, "creation_date": 1520455322, "answer_id": 49160834, "question_id": 49160338, "link": "https://stackoverflow.com/questions/49160338/sublimelinter-cpplint-does-not-recognize-ipp-files/49160834#49160834", "title": "Sublimelinter cpplint does not recognize ipp files", "body": "<p>Turns out cpplint source code has a check to ignore extensions that aren't the usual ones in function</p>\n\n<pre><code>GetAllExtensions()\n</code></pre>\n\n<p>Simply adding \"ipp\" to the list and building cpplint solves the issue. </p>\n"}], "owner": {"reputation": 1, "user_id": 9458813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966c62363fabc9e66a6995b28606ab5c?s=128&d=identicon&r=PG&f=1", "display_name": "J.M", "link": "https://stackoverflow.com/users/9458813/j-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520455322, "creation_date": 1520453086, "question_id": 49160338, "link": "https://stackoverflow.com/questions/49160338/sublimelinter-cpplint-does-not-recognize-ipp-files", "title": "Sublimelinter cpplint does not recognize ipp files", "body": "<p>I am trying to setup sublime text 3 to work on C++ development. </p>\n\n<p>I installed cpplint and followed the installation instructions. While the documentation indicates that cpplint will lint any file with syntax set to \"C++\", this is not the case for me. cpplint only works when my file has an extention \"cpp\" or \"hpp\". The moment I change the file name extension from \"hpp\" to \"ipp\" the linter stops working. </p>\n\n<p>Does anybody know what configuration I need to make?</p>\n"}, {"tags": ["c++", "cross-platform"], "comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 1, "creation_date": 1520453050, "post_id": 49160262, "comment_id": 85326018, "body": "You might want to look at the C++17 filesystem library"}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 1, "creation_date": 1520453303, "post_id": 49160262, "comment_id": 85326150, "body": "If C++17 is unavailable due to compiler restrictions, look up the  boost::filesystem library."}], "owner": {"reputation": 19, "user_id": 31732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c856b20e0024aee228f5d709ba65ccc4?s=128&d=identicon&r=PG", "display_name": "Supandi43", "link": "https://stackoverflow.com/users/31732/supandi43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533059949, "creation_date": 1520452769, "question_id": 49160262, "link": "https://stackoverflow.com/questions/49160262/c-cross-platform-file-explorer-implementation-challenges", "title": "C++ Cross platform file explorer implementation challenges", "body": "<p>I would like to implement a cross platform file explorer for both Windows and Linux. Lately, I have been learning to use CMake and writing CMakeList files, so I am thinking of doing some productive work.</p>\n\n<p>My preferred programming language is C++. Using CMake to build for Linux using g++ and on Windows using MS Visual Studio.</p>\n\n<p>Features I would like to implement:\n - Basic file access: read/write/delete\n - Cut/Copy/Paste files\n - Display file information like date created, modified, size, location,  etc. </p>\n\n<p>The features are fairly basic right now, but I could add some cool stuff for as I get hang of things. </p>\n\n<p>Question: \nHow to address the challenges associated with file handling on multiple platforms? For example on Windows I can use \"GetFileAttributesEx\" to get file attributes but this comes from windows.h which is not good for a cross-platform application (doesn't work on Linux). Is there any free cross platform library which would help me develop this application? Can I do this with QT? or with wxWidgets? Please suggest best approaches to take.</p>\n\n<p>The idea is to learn how to build and maintain cross platform programs. I would like to practice the philosophy of \"Code once but build for multiple platforms\". As this is just a hobby project I am open to all suggestions.</p>\n"}, {"tags": ["c++", "string", "integer"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1520452783, "post_id": 49160244, "comment_id": 85325894, "body": "You&#39;re going to need to show your attempt."}, {"owner": {"reputation": 263, "user_id": 5552548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19eb9a2a0d71aea2cdf23ef4c986feb?s=128&d=identicon&r=PG&f=1", "display_name": "Hoa.N", "link": "https://stackoverflow.com/users/5552548/hoa-n"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520452880, "post_id": 49160244, "comment_id": 85325943, "body": "I have used stringstream but I got all 0"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520452924, "post_id": 49160244, "comment_id": 85325959, "body": "I can&#39;t get anything because I&#39;m not telepathic and I can&#39;t see your code."}, {"owner": {"reputation": 3617, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1520453016, "post_id": 49160244, "comment_id": 85326002, "body": "@Hoa.N show your code."}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 5552548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19eb9a2a0d71aea2cdf23ef4c986feb?s=128&d=identicon&r=PG&f=1", "display_name": "Hoa.N", "link": "https://stackoverflow.com/users/5552548/hoa-n"}, "edited": false, "score": 0, "creation_date": 1520463507, "post_id": 49160444, "comment_id": 85330948, "body": "Yes, I want to get the values after the &quot;equals&quot; sign only, I have found a way using a regex but then I don&#39;t know how to discards some numbers I don&#39;t want in the string"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1520467597, "last_edit_date": 1520467597, "creation_date": 1520453512, "answer_id": 49160444, "question_id": 49160244, "link": "https://stackoverflow.com/questions/49160244/get-all-numbers-from-string-c/49160444#49160444", "title": "Get all numbers from string c++", "body": "<p>Based on a corrected understanding of what's actually desired, I'd do things quite differently than I originally suggested. Under the circumstances, I agree with Stephen Webb that a regular expression is probably the right way to go, though I differ as to the right regex to use, and a bit in how to use it (though the latter is probably as much about habits I've formed as anything else).</p>\n\n<pre><code>#include &lt;regex&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    using iter = std::regex_token_iterator&lt;std::string::const_iterator&gt;;\n\n    std::string s = \"Sep=1, V_Batt=7.40, I_Batt=-559.63, V_SA=7.20,\n                    \" I_SA=-0.55, I_MB=500.25, V_5v=4.95, I_5v=446.20,\"\n                    \" V_3v=3.28, I_3v=3.45, S=0, T_Batt=25.24, T_SA1=22.95,\" \n                    \" T_SA2=-4.86\";\n\n    std::regex re(R\"#([A-Z][^=]*=([-\\.\\d]+))#\");\n\n    auto begin = iter(s.begin(), s.end(), re, 1);\n    iter end;\n\n    for (auto i = begin; i!= end; ++i)\n        std::cout &lt;&lt; *i &lt;&lt; \", \";\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Result:</p>\n\n<p>1, 7.40, -559.63, 7.20, -0.55, 500.25, 4.95, 446.20, 3.28, 3.45, 0, 25.24, 22.95, -4.86,</p>\n"}, {"tags": [], "owner": {"reputation": 315, "user_id": 1837323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f18e29570c3ba38aa0e286d30b11ae8?s=128&d=identicon&r=PG", "display_name": "orangesky", "link": "https://stackoverflow.com/users/1837323/orangesky"}, "is_accepted": false, "score": 1, "last_activity_date": 1520454109, "creation_date": 1520454109, "answer_id": 49160563, "question_id": 49160244, "link": "https://stackoverflow.com/questions/49160244/get-all-numbers-from-string-c/49160563#49160563", "title": "Get all numbers from string c++", "body": "<p>If the number of arguments and their order are known, you can use <a href=\"http://www.cplusplus.com/reference/cstdio/snprintf/\" rel=\"nofollow noreferrer\">snprintf</a> like this:</p>\n\n<pre><code>char str[100];\nint Sep=1;\ndouble V_Batt = 7.40, I_Batt = 559.63;// etc ...\nsnprintf(str, 100, \"%d,%.2f,%.2f\", Sep, V_Batt, I_Batt); //etc...\n// str = 1,7.40,559.63\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 8939541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3004817dd3b6a3dfc54e3b5b2481e3e9?s=128&d=identicon&r=PG&f=1", "display_name": "danciplus", "link": "https://stackoverflow.com/users/8939541/danciplus"}, "is_accepted": false, "score": 1, "last_activity_date": 1520455416, "creation_date": 1520455416, "answer_id": 49160850, "question_id": 49160244, "link": "https://stackoverflow.com/questions/49160244/get-all-numbers-from-string-c/49160850#49160850", "title": "Get all numbers from string c++", "body": "<p>Open your file with fopen() function.\nIt returns you the File* variable. Of course, if already available your chars, just skip this step.\nUse this File variable to get each char, let's say, by means of fgetc().\nCheck the content of obtained char variable and make what you want with it, eventually insert some comma in your new string, as necessary</p>\n"}, {"tags": [], "owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "is_accepted": false, "score": 1, "last_activity_date": 1520458886, "last_edit_date": 1520458886, "creation_date": 1520458464, "answer_id": 49161588, "question_id": 49160244, "link": "https://stackoverflow.com/questions/49160244/get-all-numbers-from-string-c/49161588#49161588", "title": "Get all numbers from string c++", "body": "<p>That's exactly what <code>std::regex_iterator</code> is for.</p>\n\n<pre><code>#include &lt;regex&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    const std::string s = \"Sep=1, V_Batt=7.40, I_Batt=-559.63, V_SA=7.20, I_SA=-0.55, I_MB=500.25, V_5v=4.95, I_5v=446.20, V_3v=3.28, I_3v=3.45, S=0, T_Batt=25.24, T_SA1=22.95, T_SA2=-4.86\";\n    std::regex re(\"[-\\\\d\\\\.]+\");\n    auto words_begin = std::sregex_iterator(s.begin(), s.end(), re);\n    auto words_end = std::sregex_iterator();\n\n    for (std::sregex_iterator i = words_begin; i != words_end; ++i)\n        std::cout &lt;&lt; (*i).str() &lt;&lt; ',';\n    std::cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>The output of the above complete program is this.</p>\n\n<blockquote>\n  <p>1,7.40,-559.63,7.20,-0.55,500.25,5,4.95,5,446.20,3,3.28,3,3.45,0,25.24,1,22.95,2,-4.86,</p>\n</blockquote>\n"}], "owner": {"reputation": 263, "user_id": 5552548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19eb9a2a0d71aea2cdf23ef4c986feb?s=128&d=identicon&r=PG&f=1", "display_name": "Hoa.N", "link": "https://stackoverflow.com/users/5552548/hoa-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1520467597, "creation_date": 1520452694, "last_edit_date": 1520452982, "question_id": 49160244, "link": "https://stackoverflow.com/questions/49160244/get-all-numbers-from-string-c", "title": "Get all numbers from string c++", "body": "<p>I know this question is asked for several times, but none of the answer fits with my need.<br>\nSo I have this string </p>\n\n<blockquote>\n  <p>Sep=1, V_Batt=7.40, I_Batt=-559.63, V_SA=7.20, I_SA=-0.55, I_MB=500.25,  V_5v=4.95, I_5v=446.20, V_3v=3.28, I_3v=3.45, S=0,  T_Batt=25.24, T_SA1=22.95, T_SA2=-4.86</p>\n</blockquote>\n\n<p>I want to get all of the number after the \"=\" sign and make a new string like</p>\n\n<blockquote>\n  <p>1,7.40,559.63,7.20,0.55,500.25,4.95,446.20,3.28,3.45,0,25.24,22.95,4.68</p>\n</blockquote>\n\n<p>Can anyone help me to solve the problem. I have used stringstream but I got all 0 for my output \nThank you</p>\n"}, {"tags": ["c++", "templates", "instantiation", "template-meta-programming"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1520452064, "post_id": 49160041, "comment_id": 85325511, "body": "I&#39;m not sure what you are asking here. Why not just wrap <code>print_size_of&lt;int&gt;()</code> and <code>print_size_of&lt;double&gt;()</code> in a <code>print_size_of_types()</code> function?"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1520452167, "post_id": 49160041, "comment_id": 85325565, "body": "&quot;won&#39;t work but maybe it shows what i want to do&quot; - no, it doesn&#39;t show."}, {"owner": {"reputation": 3966, "user_id": 868546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05c689f8a9d6a545795c89c6118f47db?s=128&d=identicon&r=PG", "display_name": "Drise", "link": "https://stackoverflow.com/users/868546/drise"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 1, "creation_date": 1520452227, "post_id": 49160041, "comment_id": 85325596, "body": "@EdgarRokj\u0101n I think he wants to run the function for any <code>T</code> (in this case <code>int</code> and <code>double</code>) that has been given to the template. If he had an additional <code>print_size_of&lt;string&gt;();</code>, he would want to print all 3."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1520452574, "post_id": 49160140, "comment_id": 85325791, "body": "Actually, you fail to take into account static initialization order. It may nearly look like a solution, but it just fails on the last inches."}, {"owner": {"reputation": 3966, "user_id": 868546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05c689f8a9d6a545795c89c6118f47db?s=128&d=identicon&r=PG", "display_name": "Drise", "link": "https://stackoverflow.com/users/868546/drise"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1520452708, "post_id": 49160140, "comment_id": 85325857, "body": "@Deduplicator For those of us less versed in template black-magic, can you explain?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1520452709, "post_id": 49160140, "comment_id": 85325858, "body": "Note that this will only register the function when it&#39;s invoked for the first time."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1520452744, "post_id": 49160140, "comment_id": 85325877, "body": "@liliscent: Angew spelled it out for you."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1520452790, "post_id": 49160140, "comment_id": 85325901, "body": "@Deduplicator I would never have understood that&#39;s what you meant from the comment."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1520454861, "post_id": 49160140, "comment_id": 85326993, "body": "If you wrap the template function in a <code>struct</code> and make your registration object a <code>static</code> member of that struct, it could register it without having to call the function. Though you&#39;ll need to make sure the list of instances is initialized before your <code>static</code> member, such as by returning a <code>static</code> local variable from a function."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1520457533, "post_id": 49160140, "comment_id": 85328351, "body": "@Fran&#231;oisAndrieux Maybe this is also possible. I also came up with a similar approach. In fact, the key point is to associate a class template instantiation to the function template instantiation."}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 5, "last_activity_date": 1520457220, "last_edit_date": 1520457220, "creation_date": 1520452307, "answer_id": 49160140, "question_id": 49160041, "link": "https://stackoverflow.com/questions/49160041/how-can-i-call-every-instantiated-function-of-a-template-function/49160140#49160140", "title": "How can I call every instantiated function of a template function?", "body": "<p>This is possible; you need to add some static variable inside the function template body to record those instantiations.</p>\n\n<p>In the code below, every instantiated function will have a static variable, whose constructor will register the function pointer to a global registration center:</p>\n\n<pre><code>std::vector&lt;void(*)()&gt; funcs;\n\nstruct helper {\n    explicit helper(void (*f)()) { funcs.push_back(f); }\n};\n\ntemplate&lt;typename T&gt;\nvoid print_size_of()\n{\n    static helper _(&amp;print_size_of&lt;T&gt;);\n    std::cout &lt;&lt; sizeof(T) &lt;&lt; \"\\n\";\n}\n\nint main()\n{\n    print_size_of&lt;int&gt;();\n    print_size_of&lt;double&gt;();\n\n    std::cout &lt;&lt; \"All instantiation:\\n\";\n\n    for ( auto f : funcs ) {\n        f();\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>This is not strictly recording instantiation. It only records those being called before. If you instantiate it by other methods like taking its address:</p>\n\n<pre><code>void (*f)() = &amp;print_size_of&lt;short&gt;;\n</code></pre>\n\n<p>but don't call it, then this function pointer won't be registered.</p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>In fact, it is possible to faithfully record all instantiations. The key point is to associate the instantiation of the function template to the instantiation of a class template. Then a static member of that class will be guaranteed to initialize before entering <code>main()</code> function.</p>\n\n<pre><code>// this one is to make sure `funcs` is initialized\nauto &amp;get_funcs() {\n    static std::vector&lt;void(*)()&gt; funcs;\n    return funcs;\n}\n\ntemplate&lt;void (*f)()&gt;\nstruct helper {\n    helper() { get_funcs().push_back(f); }\n    // this is a static class member, whose initialization is before main()\n    static helper _ins;\n};\n\ntemplate&lt;void (*f)()&gt; helper&lt;f&gt; helper&lt;f&gt;::_ins;\n\ntemplate&lt;typename T&gt;\nvoid print_size_of()\n{\n    // force instantiation of a class\n    const void *_ = &amp;helper&lt;&amp;print_size_of&lt;T&gt;&gt;::_ins;\n    std::cout &lt;&lt; sizeof(T) &lt;&lt; \"\\n\";\n}\n\nint main()\n{\n    print_size_of&lt;int&gt;();\n    print_size_of&lt;double&gt;();\n\n    void (*f)() = &amp;print_size_of&lt;short&gt;;\n\n    std::cout &lt;&lt; \"All instantiation:\\n\";\n\n    for ( auto f : get_funcs() ) {\n        f();\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 1, "creation_date": 1520453879, "post_id": 49160247, "comment_id": 85326464, "body": "Upvoted, because I couldn&#39;t find a way to completely remedy my solution. However, I really doubt there is <b>no</b> solution for this question. Perhaps your conclusion is not solid enough."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520457459, "post_id": 49160247, "comment_id": 85328303, "body": "In case you are still interested in, I think I have managed to give a complete solution. See my updated answer. If possible, please tell me if there are still flaws in my current approach."}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 3, "last_activity_date": 1520452717, "creation_date": 1520452717, "answer_id": 49160247, "question_id": 49160041, "link": "https://stackoverflow.com/questions/49160041/how-can-i-call-every-instantiated-function-of-a-template-function/49160247#49160247", "title": "How can I call every instantiated function of a template function?", "body": "<p>No, that is not possible.</p>\n\n<p>You can get close by calling every instantiation which was already called once (Use a static variable to register on first call), but that's the best you can do.</p>\n"}], "owner": {"reputation": 727, "user_id": 6860744, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-3_2Ewze_gI8/AAAAAAAAAAI/AAAAAAAAACQ/fz_BqGtzSd4/photo.jpg?sz=128", "display_name": "Darius Duesentrieb", "link": "https://stackoverflow.com/users/6860744/darius-duesentrieb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 1, "accepted_answer_id": 49160140, "answer_count": 2, "score": 3, "last_activity_date": 1520495602, "creation_date": 1520451857, "last_edit_date": 1520495602, "question_id": 49160041, "link": "https://stackoverflow.com/questions/49160041/how-can-i-call-every-instantiated-function-of-a-template-function", "title": "How can I call every instantiated function of a template function?", "body": "<p>Is it somehow possible to call every instantiation of a template function without knowing what will get instantiated at write-code-time?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nvoid print_size_of()\n{\n    std::cout &lt;&lt; sizeof(T) &lt;&lt; \"\\n\";\n}\n\nint main()\n{\n    print_size_of&lt;int&gt;();\n    print_size_of&lt;double&gt;();\n\n//won't work but maybe it shows what i want to do:\n    template&lt;typename T&gt;\n    print_size_of&lt;T&gt;();\n//is there a syntax so that the compiler replaces that with `print_size_of&lt;int&gt;(); print_size_of&lt;double&gt;();`\n}\n</code></pre>\n"}, {"tags": ["c++", "optimization"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1520451774, "post_id": 49159941, "comment_id": 85325354, "body": "sounds like an online coding contest. Such contest usually force you to think first and the implement a not so obvious solution while the brute force will timeout. Four loops is definitely not the way to go. What comes to my mind is first sort the numbers and then start from both ends and try to exclude combinations that you dont have to compare explicitly. Maybe thats completely off.... i dont know. Anyhow for code reviews there is <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1520452232, "post_id": 49159941, "comment_id": 85325597, "body": "it was really just a blind guess. The idea is that if you have to find 2 numbers that add to zero you just need two pointers one starting at the front and one at the end of a sorted list and then move them inwards to find a match. Finding a sum of 4 can only be just a little bit more complicated ;)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1520452346, "post_id": 49159941, "comment_id": 85325663, "body": "..well apply this idea twice and you already have something that is better than four loops (but still not optimal)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1520452465, "post_id": 49159941, "comment_id": 85325728, "body": "for java vs c++ vs python it depends. c++ gives you more control, but its up to you to make use of it. A poor c++ algorithm can be beaten easily by a better algorithm written in any language"}, {"owner": {"reputation": 983, "user_id": 289379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUjF.jpg?s=128&g=1", "display_name": "patemotter", "link": "https://stackoverflow.com/users/289379/patemotter"}, "edited": false, "score": 0, "creation_date": 1520452661, "post_id": 49159941, "comment_id": 85325835, "body": "What compiler flags are you setting for the compile? If you are just doing <b>g++ program.cpp</b> then you are likely not going to get great performance compared to optimization levels like <b>g++ -O3 program.cpp</b>"}, {"owner": {"reputation": 3, "user_id": 6569646, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3a3Ps5T3_OM/AAAAAAAAAAI/AAAAAAAAAaI/JOa5S9-yg-E/photo.jpg?sz=128", "display_name": "JiveTurkey", "link": "https://stackoverflow.com/users/6569646/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1520452757, "post_id": 49159941, "comment_id": 85325883, "body": "yeah i think that is the problem right now. as you say - more freedom (in my case) to use inefficient code. The first part runs fine, the loading of the file and creation of array."}, {"owner": {"reputation": 3, "user_id": 6569646, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3a3Ps5T3_OM/AAAAAAAAAAI/AAAAAAAAAaI/JOa5S9-yg-E/photo.jpg?sz=128", "display_name": "JiveTurkey", "link": "https://stackoverflow.com/users/6569646/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1520452822, "post_id": 49159941, "comment_id": 85325916, "body": "Just use &quot;g++ foursum.cpp&quot;. Can you recommend a source on compilers maybe?"}, {"owner": {"reputation": 3, "user_id": 6569646, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3a3Ps5T3_OM/AAAAAAAAAAI/AAAAAAAAAaI/JOa5S9-yg-E/photo.jpg?sz=128", "display_name": "JiveTurkey", "link": "https://stackoverflow.com/users/6569646/jiveturkey"}, "reply_to_user": {"reputation": 983, "user_id": 289379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUjF.jpg?s=128&g=1", "display_name": "patemotter", "link": "https://stackoverflow.com/users/289379/patemotter"}, "edited": false, "score": 0, "creation_date": 1520453324, "post_id": 49159941, "comment_id": 85326165, "body": "@patemotter That certainly helped alot. From 10 seconds to 0.77. Thanks for that."}, {"owner": {"reputation": 3752, "user_id": 327096, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cMHTm.jpg?s=128&g=1", "display_name": "kumar_m_kiran", "link": "https://stackoverflow.com/users/327096/kumar-m-kiran"}, "edited": false, "score": 0, "creation_date": 1522337142, "post_id": 49159941, "comment_id": 86127505, "body": "Use linux perf tool (in case it is linux env), you can look at some examples at <a href=\"http://techunravel.blogspot.in/2018/03/how-to-use-linux-perf-tool-and-save.html\" rel=\"nofollow noreferrer\">techunravel.blogspot.in/2018/03/&hellip;</a> to check if your code has any obvious performance issues"}], "owner": {"reputation": 3, "user_id": 6569646, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3a3Ps5T3_OM/AAAAAAAAAAI/AAAAAAAAAaI/JOa5S9-yg-E/photo.jpg?sz=128", "display_name": "JiveTurkey", "link": "https://stackoverflow.com/users/6569646/jiveturkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520451461, "creation_date": 1520451461, "question_id": 49159941, "link": "https://stackoverflow.com/questions/49159941/foursum-in-c-optimization", "title": "FourSum in C++ - Optimization", "body": "<p>I am trying to make a C++ program of the FourSum problem i.e. Does there exist a sum of four different numbers that sum to zero. \n\"i + j + k + l = 0\" \"-2 + -1 + 3 + 0 = 0\"\nI can get it to work, but the running time is around 10-15 times slower than the java implementation (both are naive approaches, so basically just four for loops). I know it is possible to use BinarySearch for the last loop, provided you sort the array. But it was my understanding that generally C++ should perform better and run faster than Java and certainly also Python. So how do I do that?\nAny or all suggestions are welcome. Thanks.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main () {\n\n    string line;\n    int N;\n    ifstream myfile (\"ints/ints-400-1.txt\");\n\n    getline(myfile,line);\n    stringstream into(line);\n\n    into &gt;&gt; N;\n    std::vector&lt;long long&gt; vals (N); \n\n    if (myfile.is_open())\n    {\n    int i = 0;\n\n    while ( getline(myfile,line) ) {\n             vals[i] = stoll( line );\n             ++i;\n        }\n\n        myfile.close();\n    }\n\n    else cout &lt;&lt; \"Unable to open file\"; \n\n    for (int i = 0; i != vals.size(); i++) {\n        for (int j = i + 1; j != vals.size(); j++) {\n            for (int k = j + 1; k != vals.size(); k++) {\n                for (int l = k + 1; l != vals.size(); l++) {\n                    if (vals[i] + vals[j] + vals[k] +vals[l] == 0) {\n                    cout &lt;&lt; \"true\";\n                    }                        \n                }\n            }\n        }\n    }\n\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linker", "cross-compiling", "ld", "dynamic-linking"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1520452789, "post_id": 49159816, "comment_id": 85325899, "body": "I think it may be helpful if you could share the command used to link."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1520457276, "post_id": 49159816, "comment_id": 85328223, "body": "Looks like you&#39;re linking with a bunch of static libraries as well."}, {"owner": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "edited": false, "score": 0, "creation_date": 1520457693, "post_id": 49159816, "comment_id": 85328430, "body": "True. The modules are static libraries, all linked into the program <code>px4</code>"}], "owner": {"reputation": 431, "user_id": 3271700, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9d6e80a762e962de924bd6f1efc3ee0?s=128&d=identicon&r=PG&f=1", "display_name": "errolflynn", "link": "https://stackoverflow.com/users/3271700/errolflynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520457924, "creation_date": 1520450880, "last_edit_date": 1520457924, "question_id": 49159816, "link": "https://stackoverflow.com/questions/49159816/why-is-program-w-dynamic-linked-libraries-so-large", "title": "Why is program w/dynamic linked libraries so large?", "body": "<p>Scenario:\nAdding a module to a larger program using <code>CMake</code> (cross-compiling for clarity). The larger program statically links all modules and dynamically links some external libraries. I am adding in some functionality, which requires a number of dynamic libraries. I have two questions about this process.</p>\n\n<p>1) Before the titular question, <em><code>ld</code> is requiring that I link to not only all direct dynamic library dependencies, but also to all recursive dependencies</em> (dependencies of dependencies, etc). Why is this and can I prevent it? Since dynamic libraries are loaded at runtime, shouldn't I be able to specify that unresolved symbols will be resolved at runtime? I tried adding <code>-Wl,-unresolved-symbols=ignore-in-shared-libs</code> to both compiler and linker flags, but no luck :(. Any suggestions?</p>\n\n<p>1) As stated in the title, when all dynamic libraries are linked (~60 including recursive dependencies), the final executable is REALLY large (relative to before). It goes from <strong>~8MB</strong> to <strong>~72MB</strong>. Also, the linking process takes a REALLY long time (relative to before). Previously it took <strong>~10s</strong>, now it takes <strong>~10min</strong>. Why is the file so much larger?</p>\n\n<p>All answers, links, and comments are greatly appreciated.</p>\n\n<p>Edit\nLink command:\n<code>/home/eric/Programs/Qualcomm/Hexagon_SDK/3.0/gcc-linaro-4.9-2014.11-x86_64_arm-linux-gnueabihf_linux/bin/arm-linux-gnueabihf-g++  --sysroot=/opt/qrlSDK/sysroots/eagle8074  -g -fno-exceptions -std=gnu++11 -fno-threadsafe-statics -DCONFIG_WCHAR_BUILTIN -D__CUSTOM_FILE_IO__ -fcheck-new -Wall -Warray-bounds -Wdisabled-optimization -Werror -Wextra -Wfatal-errors -Wfloat-equal -Wformat-security -Winit-self -Wlogical-op -Wmissing-declarations -Wmissing-field-initializers -Wpointer-arith -Wshadow -Wuninitialized -Wunknown-pragmas -Wunused-variable -Wno-unused-parameter -Wunused-but-set-variable -Wformat=1 -Wdouble-promotion -Wno-missing-field-initializers -Wno-overloaded-virtual -Wreorder -fvisibility=hidden -include visibility.h -pthread --sysroot=/opt/qrlSDK/sysroots/eagle8074 -fno-strict-aliasing -fomit-frame-pointer -funsafe-math-optimizations -ffunction-sections -fdata-sections -fno-strength-reduce -fno-builtin-printf -O2 -g -DNDEBUG  -Wl,-gc-sections -Wl,-rpath-link,/opt/qrlSDK/sysroots/eagle8074/usr/lib/arm-linux-gnueabihf -Wl,-rpath-link,/opt/qrlSDK/sysroots/eagle8074/lib/arm-linux-gnueabihf -Wl,-rpath-link,/opt/qrlSDK/sysroots/eagle8074/usr/lib -Wl,-rpath-link,/opt/qrlSDK/sysroots/eagle8074/lib --sysroot=/opt/qrlSDK/sysroots/eagle8074 src/firmware/posix/CMakeFiles/px4.dir/px4muorb_stub.c.obj src/firmware/posix/CMakeFiles/px4.dir/__/__/platforms/posix/main.cpp.obj src/firmware/posix/CMakeFiles/px4.dir/apps.cpp.obj src/firmware/posix/CMakeFiles/px4.dir/home/eric/Programs/Qualcomm/Hexagon_SDK/3.0/libs/common/rpcmem/src/rpcmem.c.obj  -o px4 -L/home/eric/Programs/px4/Firmware/build/posix_eagle_default/external/Install/lib -Wl,--start-group msg/libuorb_msgs.a src/drivers/device/libdrivers__device.a src/drivers/blinkm/libdrivers__blinkm.a src/drivers/linux_sbus/libdrivers__linux_sbus.a src/drivers/pwm_out_sim/libdrivers__pwm_out_sim.a src/drivers/rgbled/libdrivers__rgbled.a src/drivers/led/libdrivers__led.a src/drivers/boards/eagle/libdrivers__boards__sitl.a src/drivers/qshell/posix/libdrivers__qshell__posix.a src/systemcmds/param/libsystemcmds__param.a src/systemcmds/led_control/libsystemcmds__led_control.a src/systemcmds/mixer/libsystemcmds__mixer.a src/systemcmds/ver/libsystemcmds__ver.a src/systemcmds/topic_listener/libsystemcmds__topic_listener.a src/modules/mavlink/libmodules__mavlink.a src/modules/mc_pos_control/libmodules__mc_pos_control.a src/modules/mc_att_control/libmodules__mc_att_control.a src/modules/systemlib/param/libmodules__systemlib__param.a src/modules/systemlib/libmodules__systemlib.a src/modules/uORB/libmodules__uORB.a src/modules/muorb/krait/libmodules__muorb__krait.a src/modules/sensors/libmodules__sensors.a src/modules/dataman/libmodules__dataman.a src/modules/sdlog2/libmodules__sdlog2.a src/modules/logger/libmodules__logger.a src/modules/simulator/libmodules__simulator.a src/lib/controllib/liblib__controllib.a src/lib/conversion/liblib__conversion.a src/lib/DriverFramework/framework/liblib__DriverFramework__framework.a src/lib/ecl/liblib__ecl.a src/lib/geo/liblib__geo.a src/lib/geo_lookup/liblib__geo_lookup.a src/lib/led/liblib__led.a src/lib/mathlib/liblib__mathlib.a src/lib/mathlib/math/filter/liblib__mathlib__math__filter.a src/lib/mixer/liblib__mixer.a src/lib/runway_takeoff/liblib__runway_takeoff.a src/lib/tailsitter_recovery/liblib__tailsitter_recovery.a src/lib/terrain_estimation/liblib__terrain_estimation.a src/lib/version/liblib__version.a src/platforms/common/libplatforms__common.a src/platforms/posix/px4_layer/libplatforms__posix__px4_layer.a src/platforms/posix/work_queue/libplatforms__posix__work_queue.a src/modules/elka_nn/libmodules__elka_nn.a src/modules/rovio/libmodules__rovio.a -L/home/eric/Programs/Qualcomm/Hexagon_SDK/3.0/libs/common/remote/ship/UbuntuARM_Debug -ladsprpc -lpthread -lm -lrt -Wl,--end-group -L/home/eric/Programs/Qualcomm/Hexagon_SDK/3.0/libs/common/remote/ship/UbuntuARM_Debug -ladsprpc src/lib/DriverFramework/framework/src/libdf_driver_framework.a -Wl,--start-group -shared -Wl,-rpath-link,/home/eric/Programs/Snapdragon/SnapdragonSetup/libs -L/home/eric/Programs/Snapdragon/SnapdragonSetup/libs -latk-1.0 -lavcodec -lavformat -lavutil -lbz2 -lcairo -lcamera -lcgmanager -ldatrie -ldc1394 -lfontconfig -lfreetype -lgcrypt -lgdk_pixbuf-2.0 -lgdk-x11-2.0 -lgio-2.0 -lglib-2.0 -lgobject-2.0 -lgpg-error -lgraphite2 -lgtk-x11-2.0 -lHalf -lharfbuzz-gobject -lharfbuzz -licudata -licuuc -lIlmImf -ljasper -ljpeg -lnih -lnih-dbus -logg -lorc-0.4 -lpango-1.0 -lpangocairo-1.0 -lpangoft2-1.0 -lpcre -lpcrecpp -lpcreposix -lpixman-1 -lpng12 -lselinux -lswscale -ltasn1 -lthai -ltiff -ludev -lv4l1 -lv4lconvert -lX11 -lXau -lXi -lxcb -lxcb-dri3 -lxcb-glx -lxcb-present -lxcb-render -lxcb-shape -lxcb-shm -lxcb-sync -lXcomposite -lXcursor -lXdamage -lXdmcp -lXext -lXfixes -lXft -lXinerama -lXrandr -lXrender -lz -lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_gpu -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_objdetect -lopencv_ocl -lopencv_photo -lopencv_stitching -lopencv_superres -lopencv_ts -lopencv_videostab -lyaml-cpp -lpthread -lm -lrt</code></p>\n\n<p>Edit 2:\nAdding in the linker options <code>-Wl,--unresolved-symbols=ignore-in-shared-libs,--allow-shlib-undefined</code> seems to allow me to omit recursive dependencies. However, program size is still 10x the previous size. The size of the additional program shouldn't be that much larger. I'm going to try building it in a different way to see if maybe it is actually that large. As before: all help is appreciated. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1520450555, "post_id": 49159708, "comment_id": 85324668, "body": "No it can&#39;t. Neither does it makes sense to do so."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1520450601, "post_id": 49159708, "comment_id": 85324694, "body": "I highly recommend not naming a variable the same name as the structure.  Could get very confusing."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1520450722, "post_id": 49159708, "comment_id": 85324771, "body": "An iterator points to an element in a list.  You can&#39;t get the parent structure from an element in the list."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520450744, "post_id": 49159708, "comment_id": 85324784, "body": "A <code>std::list&lt;int&gt;::iterator</code> will work for any <code>std::list&lt;int&gt;</code>.  You can&#39;t get which list it belongs to."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520451732, "post_id": 49159708, "comment_id": 85325320, "body": "It&#39;s sort of an interesting point, though, because in the typical C implementation all you need is a pointer to a single node in order to do list splicing, and that&#39;s kind of half the power of it. I&#39;d never really considered how we&#39;ve sacrificed that in <code>std::list</code>. Mind you, it&#39;s not as if <code>std::list</code> set out to be a direct replacement for all of that very specific functionality."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520453217, "post_id": 49159708, "comment_id": 85326108, "body": "@LightnessRacesinOrbit It is the difference of viewing a linked list as the union of individual nodes, as opposed to considering them as components of the same structure. It&#39;s a trade-off for sure, but it made maintaining invariants possible"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1520453279, "post_id": 49159708, "comment_id": 85326135, "body": "@PasserBy: Indeed."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1520450720, "creation_date": 1520450720, "answer_id": 49159779, "question_id": 49159708, "link": "https://stackoverflow.com/questions/49159708/how-to-get-a-list-from-an-iterator/49159779#49159779", "title": "How to get a list from an iterator", "body": "<p>As stated in <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">documentation</a> <code>std::list::iterator</code> satisfies concept <a href=\"http://en.cppreference.com/w/cpp/concept/BidirectionalIterator\" rel=\"nofollow noreferrer\"><code>BidirectionalIterator</code></a> so as you can see there neither such concept not it's ancestors have such functionality to get container it belongs to.</p>\n"}, {"comments": [{"owner": {"reputation": 1438, "user_id": 412091, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/744227e46e38c985ef8494719d25dcee?s=128&d=identicon&r=PG", "display_name": "wh1sp3r", "link": "https://stackoverflow.com/users/412091/wh1sp3r"}, "edited": false, "score": 0, "creation_date": 1520451215, "post_id": 49159788, "comment_id": 85325036, "body": "Yeah, i did a quick example and did not think about same names :-)"}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": true, "score": 1, "last_activity_date": 1520454450, "last_edit_date": 1520454450, "creation_date": 1520450747, "answer_id": 49159788, "question_id": 49159708, "link": "https://stackoverflow.com/questions/49159708/how-to-get-a-list-from-an-iterator/49159788#49159788", "title": "How to get a list from an iterator", "body": "<p>You can't get the list from an iterator, you can obtain the iterator from the list. The <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\">std::list</a> container has an <a href=\"http://en.cppreference.com/w/cpp/container/list/erase\" rel=\"nofollow noreferrer\">erase</a> member function, iterator does not, so no, it can not erase itself. If you know the iterator, supply it to the list's <code>erase</code> function. As pointed out in the comments you should not name your variable <code>list</code>, especially if you have <code>using namespace std;</code> statement somewhere in your code which is also to be avoided. </p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "is_accepted": false, "score": 2, "last_activity_date": 1520451464, "creation_date": 1520451464, "answer_id": 49159942, "question_id": 49159708, "link": "https://stackoverflow.com/questions/49159708/how-to-get-a-list-from-an-iterator/49159942#49159942", "title": "How to get a list from an iterator", "body": "<p>Technically it is possible to erase element in <a href=\"https://en.wikipedia.org/wiki/Doubly_linked_list\" rel=\"nofollow noreferrer\">Doubly linked list</a> and update neighboring nodes links after erasure. But <code>std::list</code> also maintains it's <a href=\"http://en.cppreference.com/w/cpp/container/list/size\" rel=\"nofollow noreferrer\">size()</a>, which must run in O(1) since C++11. So it is impossible to update the list size without accessing list itself.</p>\n"}], "owner": {"reputation": 1438, "user_id": 412091, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/744227e46e38c985ef8494719d25dcee?s=128&d=identicon&r=PG", "display_name": "wh1sp3r", "link": "https://stackoverflow.com/users/412091/wh1sp3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 49159788, "answer_count": 3, "score": 1, "last_activity_date": 1520520006, "creation_date": 1520450409, "last_edit_date": 1520520006, "question_id": 49159708, "link": "https://stackoverflow.com/questions/49159708/how-to-get-a-list-from-an-iterator", "title": "How to get a list from an iterator", "body": "<p>How can I get a list from an iterator ?</p>\n\n<pre><code>std::list&lt;int&gt; list;\nauto it1 = list.insert(list.end(), 1);\nauto it2 = list.insert(list.end(), 2);\nauto it3 = list.insert(list.end(), 3);\nauto it4 = list.insert(list.end(), 4);\nauto it5 = list.insert(list.end(), 5);\n\nlist.erase(it3);\n</code></pre>\n\n<p>In included code, I am able to erase <code>it3</code> from the list.\nWhat if I know only an iterator, can an iterator erase itself from the list without having the list variable ?</p>\n\n<pre><code>//Something like that\nit2.list.erase(it2);\n</code></pre>\n"}, {"tags": ["c++", "performance", "class", "methods", "lambda"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 7, "creation_date": 1520449823, "post_id": 49159534, "comment_id": 85324220, "body": "Note that a <code>std::function</code> is <i>not</i> a lambda. It&#39;s a type-erased function-like type which can hold a lambda"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1520449866, "post_id": 49159534, "comment_id": 85324249, "body": "Also, <code>std::function</code> is mutable, so other code can replace these methods with arbitrary other methods."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1520450153, "post_id": 49159534, "comment_id": 85324423, "body": "What is benefit of using lambda vs regular methods here?"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 1, "creation_date": 1520450318, "post_id": 49159534, "comment_id": 85324541, "body": "In your code, <b>every instance</b> has its own huge <code>std::function</code> members. If you use some dynamic allocation for this class, the slow-down is very likely caused by more memory allocation. In the ordinary case, those function addresses are hardcoded to assembly."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1520450691, "post_id": 49159534, "comment_id": 85324754, "body": "It&#39;s likely much harder for the compiler to optimize the code this way, which can account for some performance loss."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520451553, "post_id": 49159534, "comment_id": 85325226, "body": "Note: if you are going to have a <code>public</code> getter and setter methods that do not do anything to protect the member or otherwise supply some added value  you are only marginally better off than having a <code>public</code> member. Any fool can use the getter to see the value and the setter to change the member to any value they chose undetected just like a <code>public</code> member. What you do get is a place to put a debugger breakpoint to try and see who the fool is."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1520466882, "post_id": 49159534, "comment_id": 85332026, "body": "Note that in both case, you capture <code>this</code>, so <code>[=]</code>/<code>[&amp;]</code> is simply <code>[this]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 7, "creation_date": 1520450566, "post_id": 49159694, "comment_id": 85324675, "body": "This doesn&#39;t address the question. OP indicates that he knows his idea is not optimal. This question is asking to clarification on specific issues regarding loss of performance caused his sub-optimal design."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1520450710, "post_id": 49159694, "comment_id": 85324764, "body": "@Fran&#231;oisAndrieux, it is an old joke I love, about the patient who visits the doctor and asks &#39;Doctor, when I stick a nail into my ear it hurts terribly, what should I do?&#39; And the good doctor replies - &#39;Don&#39;t stick nails into your ears&#39;. Same here. All this suffering is for nothing, so best way to avoid the suffering is not to cause it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1520450906, "post_id": 49159694, "comment_id": 85324871, "body": "But there is no suffering here, it&#39;s a question about explaining observations. Trying to understand <i>why</i> bad code is bad, or <i>what</i> makes bad code bad is a worthwhile pursuit. When asking &quot;What makes this code bad?&quot;, the answer &quot;It&#39;s bad, don&#39;t do that.&quot; is very not very helpful."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1520450983, "post_id": 49159694, "comment_id": 85324914, "body": "@Fran&#231;oisAndrieux, I still think the code is bad in general, but if you insist, I added some pointers."}, {"owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "edited": false, "score": 1, "creation_date": 1520451710, "post_id": 49159694, "comment_id": 85325310, "body": "@SergeyA Hey, sorry but Francois is right how does this actually add anything constructive to the question? I know its not optimal, obviously. There is no question that the code is bad, and I have already stated that I dont intend to write actual code like that. I also think, and have found out by myself that that code is bad as hell. But as other have said, my question is simply about C++ internals, what happens under the hood that makes it bad. What makes me curious about this is simply that that code looks cool and it makes me curious about what going on under the hood. Nothing more."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "edited": false, "score": 1, "creation_date": 1520457037, "post_id": 49159694, "comment_id": 85328102, "body": "@RaresDima I would imagine, my latest edit should address those questions?"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1520450932, "last_edit_date": 1520450932, "creation_date": 1520450365, "answer_id": 49159694, "question_id": 49159534, "link": "https://stackoverflow.com/questions/49159534/c-lambdas-as-class-methods/49159694#49159694", "title": "C++ lambdas as class methods", "body": "<p>Let me fix this code for you:</p>\n\n<pre><code>struct Complex {\n    double re, im;\n    Complex() : re(0.0), im(0.0) {}\n    Complex(double re, double im) : re(re * 1.0), im(im * 1.0) {}\n    Complex(const Complex &amp;c) = default;\n\n    ~Complex() = default;\n};\n</code></pre>\n\n<p>Exactly the same outcome, better readability, smaller memory footprint. Go for it. You code is also pretty terrible for const-correctness.</p>\n\n<p>And yes, your code is so terribly slow because of multiple factors:</p>\n\n<ul>\n<li>Your calling to methods is now virtualized, so they are not inlined, you end up being penalized terribly for this</li>\n<li>Your object creation/destruction now is very likely to incur dynamic memory allocations/deallocations</li>\n<li>Your objects have no become bigger, so more cache misses</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 4, "last_activity_date": 1520452708, "last_edit_date": 1520452708, "creation_date": 1520450510, "answer_id": 49159732, "question_id": 49159534, "link": "https://stackoverflow.com/questions/49159534/c-lambdas-as-class-methods/49159732#49159732", "title": "C++ lambdas as class methods", "body": "<p>I like the idea, but it doesn't work out so well in practice.</p>\n\n<p><code>std::function</code> is a class type, like any other custom class you might write. <code>sizeof(std::function)</code> varies from implementation to implementation, but a reasonable value is <code>24</code> bytes<sup>1</sup>. This means that you'd be adding <code>24</code> bytes to <code>sizeof(Complex)</code> for every member <code>std::function</code> you want to add, compared to adding <code>0</code> bytes for every member function. Compared to <code>sizeof(double) == 8</code> on most machines, that's a lot of overhead: your <code>Complex</code> type could be <code>16</code> bytes but is instead roughly <code>112</code> bytes.</p>\n\n<p>Furthermore, every <code>std::function</code> member has to be initialized, possibly requiring a heap allocation, and calling a <code>std::function</code> involves virtual functions (or equivalent) because of type erasure. This makes it really hard for the compiler to optimize and nearly impossible for the compiler to inline the functions, whereas the regular member functions are almost guaranteed to be inlined due to how simple they are.</p>\n\n<p>Using <code>std::function</code> for member functions means that your type is uselessly bigger, takes more work to initialize, and is much harder to optimize. That's why it's so much slower.</p>\n\n<p><sup>1: At this time, <code>sizeof(std::function)</code> is actually <code>32</code> bytes, <code>48</code> bytes, and <code>64</code> bytes on <a href=\"https://godbolt.org/g/wgPmia\" rel=\"nofollow noreferrer\">libstdc++, libc++, and MSVC's STL respectively</a></sup></p>\n\n<hr>\n\n<p>To avoid the per-object overhead, you could have <code>static constexpr</code> members (at least in C++17), but then you'd have to have an explicit <code>this</code> parameter, which removes all the nice sugar that member functions have. You'd have to write <code>Complex::getRe(myComplex)</code> rather than <code>myComplex.getRe()</code></p>\n"}], "owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2004, "favorite_count": 0, "accepted_answer_id": 49159732, "answer_count": 2, "score": 7, "last_activity_date": 1520452708, "creation_date": 1520449730, "last_edit_date": 1520451195, "question_id": 49159534, "link": "https://stackoverflow.com/questions/49159534/c-lambdas-as-class-methods", "title": "C++ lambdas as class methods", "body": "<p>As a hypothetical question, I would like to use lambdas as class methods. I understand this is bad in a professional context, but I'm curious anyway. An example would probably be best for showing what I want to do. Here is a basic class for complex numbers:</p>\n\n<pre><code>class Complex {\n    private:\n        double re, im;\n    public:\n        Complex() : re(0.0), im(0.0) {}\n        Complex(double re, double im) : re(re * 1.0), im(im * 1.0) {}\n        Complex(const Complex &amp;c) = default;\n\n        ~Complex() = default;\n\n        function&lt;double(void)&gt; getRe = [=]() -&gt; double { return re; };\n        function&lt;void(double)&gt; setRe = [&amp;](double re) -&gt; void { this-&gt;re = re; };\n\n        function&lt;double(void)&gt; getIm = [=]() -&gt; double { return im; };\n        function&lt;void(double)&gt; setIm = [&amp;](double im) -&gt; void { this-&gt;im = im; };\n\n};\n</code></pre>\n\n<p>At first I have tried using <code>auto</code> instead of explicitly specifying function types but I got errors saying that I cant use <code>auto</code> in non static fields.</p>\n\n<p>This seems to actually work, as in it apparently produces the desired behaviour. I have used it to draw some fractals using OpenGL so it ends up doing some fairly intensive work. </p>\n\n<p>As I said it seems to work, I have used reference capture for the setters especially since I figured that since <code>this</code> is a reference to the current instance it might be needed, and value capture for the getters since by default an identifier ends up searching(in this case) in the class scope and finds the fields.</p>\n\n<p>I have 2 questions:</p>\n\n<ol>\n<li><p>I have not tested this with visual studio but in what I am using, CLion with the MSVC compiler, the <code>this</code> is highlighted as as an inexistent variable(even though it \"works\"). Any ideas why this happens?</p></li>\n<li><p>The class ends up being slow. As in more than an order of magnitude slower. The rendering goes from being absolutely instant when I use plain getters and setters like <code>double getRe() {return re;}</code>, to taking 2-3 seconds. Why does this happen?</p></li>\n</ol>\n"}, {"tags": ["c++", "for-loop", "vector"], "comments": [{"owner": {"reputation": 115, "user_id": 7781195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d55b33a7112a96c18d9de7c47a4e05d?s=128&d=identicon&r=PG&f=1", "display_name": "pajczur", "link": "https://stackoverflow.com/users/7781195/pajczur"}, "edited": false, "score": 0, "creation_date": 1520450070, "post_id": 49159448, "comment_id": 85324376, "body": "I ask that question, also because my professor on university told me that better, and more proper way to programming (at least in C++)  is to make each single task in separate functions or even classes. But if I have some complicated loops, for example FFT, and then draw the results on the screen, I need to make loop in FFT function and separate loop (which is similar) in drawing function I wonder wouldn&#39;t it be better for CPU if make one big and complicated loop, then two big loops one by one? Now I don&#39;t have any subject with that professor so I can&#39;t ask him for that kind of details."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1520515558, "post_id": 49159448, "comment_id": 85353327, "body": "Also keep your questions to one per post - though the &quot;answer&quot; to the second one is to benchmark and test (and take a look at the generated assembly code), especially since based on the specific code different compilers may be able to optimize differently"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1520515647, "post_id": 49159448, "comment_id": 85353380, "body": "Modern C++ compilers are pretty good. Your whole loop will likely end up as <code>NOP</code> - no operation. This is one of the challenges of benchmarking; you typically need to make sure that the code you&#39;re measuring actually does something noticeable or the compiler may discard the unnoticeable work."}], "owner": {"reputation": 115, "user_id": 7781195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d55b33a7112a96c18d9de7c47a4e05d?s=128&d=identicon&r=PG&f=1", "display_name": "pajczur", "link": "https://stackoverflow.com/users/7781195/pajczur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "closed_date": 1520515536, "answer_count": 0, "score": 1, "last_activity_date": 1520515267, "creation_date": 1520449433, "last_edit_date": 1520515267, "question_id": 49159448, "link": "https://stackoverflow.com/questions/49159448/push-back-vectors-values-into-vector-for-loop-cpu-load", "closed_reason": "Duplicate", "title": "push back vectors values into vector - for loop - CPU load", "body": "<p>Question seems to be basic but I am not sure, but to the point.\nI have three vectors:</p>\n\n<pre><code>std::vector&lt;int&gt; vect1;\nstd::vector&lt;int&gt; vect2;\nstd::vector&lt;int&gt; vect3;\n</code></pre>\n\n<p>And for example vect1 has 3 members (10, 20 and 30), and vect2 has also 3 members with some other values like 15, 25 and 35.\nAnd I would like to push back all values of vect1 into vect3, and then push back all values of vect2 into vect3, so vect3 would have 6 members in order:\n10, 20, 30, 15, 25, 35.</p>\n\n<p>I know I can do that with <code>for</code> loop, but I wonder if I have thousands of members like in audio processing (eg. 44100) and each member would have some complex calculation, wouldn't be more CPU saving if I would make some simple steps? I imagine something like:</p>\n\n<pre><code>vect3 = vect1 + vect2;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>vect3.push_back ...; // and here in some way all values of vect1 \nvect3.push_back ...; // and here in some way all values of vect2\n</code></pre>\n\n<p>Maybe it's stupid, because even if there is some simple function like that, I suppose looping would be going somewhere under the ground in std::vector definition. But I just wonder out of curiosity.</p>\n\n<p>At all I was always wondering about some basics things about loops, how much time is consumed by each single step of some basic loop, for example:</p>\n\n<pre><code>int a=0;\nfor (int i=1; i&lt;=100; i++)\n{\n   a = i;\n}\n</code></pre>\n\n<p>So I can calculate how much time is consumed by execute whole loop. Is there any way I can check it?\nAnd other stupid questions, for example, does it matter for CPU load if I create variables outside (before) the loop, like here:</p>\n\n<pre><code>int a;\nint b;\nint c;\nfor (int i=0; i&lt;100; i++)\n{\n    a = i * 2;\n    b = i * 3;\n    c = a + b;\n}\n</code></pre>\n\n<p>Or maybe better would be like that:</p>\n\n<pre><code>int c;\nfor (int i=0; i&lt;100; i++)\n{\n    int a = i * 2;\n    int b = i * 3;\n    c = a + b;\n}\n</code></pre>\n\n<p>Where to find answer for such questions?</p>\n"}, {"tags": ["c++", "pointers", "matrix", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 2, "creation_date": 1520448190, "post_id": 49159092, "comment_id": 85323285, "body": "Quick sanity check shows your <code>new</code> and <code>delete</code>s match up (same number, all use the <code>[]</code> form).  The best thing to do though is run your program through a leak detector (e.g., <code>valgrind</code>) since that&#39;ll give you a definite answer."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520448257, "post_id": 49159092, "comment_id": 85323322, "body": "What you really want are smart pointers.  Go search for std::unique_ptr and std::shared_ptr; then all your deletes can be ... deleted"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520448877, "post_id": 49159092, "comment_id": 85323647, "body": "Aside: you may wish to put it on the sister site <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> to get feedback on your style"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1520449798, "post_id": 49159092, "comment_id": 85324206, "body": "The term you&#39;re looking for here is <i>array</i>, not matrix."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1520450430, "post_id": 49159092, "comment_id": 85324602, "body": "When it gets to this level of array indexing, I tend to put it into a flat array and add get/set with the proper indexes to do my work.  I hate multi-level allocations like this.  Error prone and wasteful."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8507713"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1520516278, "post_id": 49159092, "comment_id": 85353839, "body": "I know. But this is part of my syllebus @MichaelDorgan"}], "answers": [{"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": true, "score": 2, "last_activity_date": 1520449230, "creation_date": 1520449230, "answer_id": 49159395, "question_id": 49159092, "link": "https://stackoverflow.com/questions/49159092/correctly-deleting-the-pointers-of-a-3d-matrix/49159395#49159395", "title": "Correctly deleting the pointers of a 3D matrix", "body": "<p>You have to respect the way of deletion as much as the way of creation so you can do:</p>\n\n<pre><code>//Deleting the p pointer\nfor ( int i = 0; i &lt; vol ; i++){\n    for (int j = 0; j &lt; row[vol] ; j++)\n        delete[] p[i][j];\n    delete[] p[i];\n}\n\ndelete[] p;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8507713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 49159395, "answer_count": 1, "score": 2, "last_activity_date": 1520449230, "creation_date": 1520448015, "last_edit_date": 1520448376, "question_id": 49159092, "link": "https://stackoverflow.com/questions/49159092/correctly-deleting-the-pointers-of-a-3d-matrix", "title": "Correctly deleting the pointers of a 3D matrix", "body": "<p>I wrote a program to create a 3D matrix (or multidimensional matrix), in which all the parameters (rows, columns, all are variable). The type of matrix I am working with looks something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0dGU3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0dGU3.png\" alt=\"3D Matrix\"></a></p>\n\n<p>The program is working as intended. But I don't know if deleting the pointers is correctly freeing up memory. Am I deleting the pointers correctly?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int  vol;                   \n    cout &lt;&lt; \"enter number of 2d arrays(vol value)\" &lt;&lt;endl;\n    cin &gt;&gt; vol;\n    int row[10];\n    cout&lt;&lt; \"enter number of rows in each vol\" &lt;&lt; endl;\n    for (int i = 0; i &lt; vol ; i++)\n    {\n        cin &gt;&gt; row[i];\n    }\n\n    //================ Entering col for each rown in each vol  ================//\n    int **col;\n    col = new int *[vol];\n\n    for (int i = 0; i &lt; vol ; i++)\n    {\n        *(col+i) = new int [row[i]];\n        for (int j = 0; j &lt; row[i] ; j++)\n        {\n            cout&lt;&lt; \"enter columns of \" &lt;&lt; j &lt;&lt; \"th row \" &lt;&lt;\" of vol \" &lt;&lt; i  &lt;&lt;\" :  \";\n            cin&gt;&gt;*(*(col+i)+j);\n        }\n\n    }\n\n    //======= Printing the value of each col for each rown in each vol =======//\n    cout&lt;&lt; \"entered values are \\n \\n\" &lt;&lt; endl;\n\n    for (int i = 0; i &lt; vol; i++)\n    {\n        for (int j = 0; j &lt; row[i]; j++)\n        {\n            cout&lt;&lt; *(*(col + i) + j);\n            cout &lt;&lt; \"\\t\";\n        }\n\n        cout&lt;&lt; \"\\n\" &lt;&lt; endl;\n    }\n\n    //========================Creation of 3d matrix===========================//\n    int ***p;\n\n    p = new int **[vol];            //creating number of vol\n    for (int i = 0; i &lt; vol ; i++)  //creating rows for each vol\n    {\n        *(p + i) = new int *[row[i]];\n    }\n\n    for (int j = 0; j &lt; vol ; j++)  //creating 1d array for each row\n    {\n        for (int k = 0; k &lt; row[j] ; k++)\n        {\n            *(*(p + j) + k) = new int [*(*(col + j) + k)];\n        }\n    }\n\n    //============Entering all the values in the 3d variable matrix===========//\n    cout&lt;&lt; \"entering elements into 3d matrix\" &lt;&lt; endl;\n    cout &lt;&lt; \"enter all the values \\n \\n\" &lt;&lt; endl;\n    for (int i = 0; i &lt; vol ; i++)\n    {\n        for (int j = 0; j &lt; row[i] ; j++)\n        {\n            for (int k = 0; k &lt; *(*(col + i) + j) ; k++)\n            {\n                cout&lt;&lt; \"enter the value in col \" &lt;&lt;k &lt;&lt;\", of row \" &lt;&lt; j&lt;&lt; \", of vol \" &lt;&lt; i &lt;&lt; \" : \"&lt;&lt; endl;\n                cin &gt;&gt; *(*(*(p + i) + j) + k);\n            }\n        }\n    }\n\n    //============Printing all the values in the 3d variable matrix===========//\n    cout&lt;&lt; \"Lets print all the values in 3d matrix \\n\\n\" &lt;&lt; endl;\n    for (int i = 0; i &lt; vol; i++)\n    {\n        for (int j = 0; j &lt; row[i]; j++)\n        {\n            for (int k = 0; k &lt; *(*(col + i) + j); k++)\n            {\n                cout&lt;&lt; *(*(*(p + i) + j) + k);\n                cout &lt;&lt; \"\\t\";\n            }\n\n            cout&lt;&lt; \" \\n\" &lt;&lt; endl;\n        }\n\n        cout&lt;&lt; \"\\n\\n============================\" &lt;&lt; endl;\n    }\n\n    //======================= deleting all pointers ========================//\n\n    //Deleting the col pointer\n    for (int i = 0; i &lt; vol ; i++)\n    {\n        delete[] col[i];\n    }\n\n    delete[] col;\n\n    //Deleting the p pointer\n    for (int i = 0; i &lt; vol ; i++)\n    {\n        for (int j = 0; j &lt; row[vol] ; j++)\n        {\n            delete[] p[j];          //deleting the last arrays\n        }\n        delete[] p[i];\n    }\n    delete []p;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "recursion", "integer"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 4, "creation_date": 1520448137, "post_id": 49159070, "comment_id": 85323250, "body": "It seems you forgot to include a question in your question."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1520448936, "post_id": 49159070, "comment_id": 85323694, "body": "<code>int arr[lenOfNum];</code> is a non-standard vendor compiler extension. Use <code>new[]</code> or <code>std::vector</code> instead. But you don&#39;t want to create a new array every time the function is called anyway. Create a single array in <code>main</code> instead and then pass it into the function to be populated. And you need to populate the array from back to front, not front to back, or else the digits will be stored in backwards order (<code>2, 6, 5, 3</code> instead of <code>3, 5, 6, 2</code>)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1520457643, "post_id": 49159070, "comment_id": 85328400, "body": "use std::vector - life always goes better with std:vector"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1520449647, "post_id": 49159329, "comment_id": 85324115, "body": "Rather than have the recursion end on <code>num &lt;= 0</code>, I would probably end it on <code>idx &lt; 0</code> instead. What if the user actually enters <code>&quot;0&quot;</code> as input? If <code>cin &gt;&gt; number</code> is successful, <code>lengthCount</code> would have to be initialized to 1 instead of 0 to account for <code>arr[0] = 0</code>"}, {"owner": {"reputation": 1852, "user_id": 8318088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBXoU.jpg?s=128&g=1", "display_name": "Danyal Imran", "link": "https://stackoverflow.com/users/8318088/danyal-imran"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1520457406, "post_id": 49159329, "comment_id": 85328278, "body": "my bad, didn&#39;t actually run the code, just thought it through, thanks for the heads, handled that case :)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1520459258, "post_id": 49159329, "comment_id": 85329190, "body": "You are not handling it very well, though. I still think <code>idx &lt; 0</code> would make a better end condition: <code>void myFunction(int *arr, int num, int idx) { if (idx &lt; 0) return; arr[idx--] = num % 10; myFunction(arr, num &#47; 10, idx); }</code>"}], "tags": [], "owner": {"reputation": 1852, "user_id": 8318088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBXoU.jpg?s=128&g=1", "display_name": "Danyal Imran", "link": "https://stackoverflow.com/users/8318088/danyal-imran"}, "is_accepted": false, "score": 1, "last_activity_date": 1520490236, "last_edit_date": 1520490236, "creation_date": 1520449011, "answer_id": 49159329, "question_id": 49159070, "link": "https://stackoverflow.com/questions/49159070/recursively-storing-integers-in-an-array/49159329#49159329", "title": "Recursively storing integers in an array", "body": "<p>The problem with your code is that you are calling <code>int arr[lenOfNum]</code> in each method call, which in short creates an array with a new reference to a memory location that can store lenOfNum integers.</p>\n\n<p>To solve this, we declare the array in the main method and pass it as a parameter to the function. </p>\n\n<pre><code>int main() { \n    // somewhere in main after reading lenOfNum\n    int arr[lenOfNum];\n    // somewhere in main after declaring an array\n    myFunction(arr, number, lengthCount - 1);\n}\n</code></pre>\n\n<p>and myFunction as</p>\n\n<pre><code>void myFunction(int *arr, int num, int idx) {\n    if (idx &lt; 0) return;  // you've completed processing the num\n    else if (num == 0) {\n        arr[0] = 0;\n        return;\n    }\n\n    arr[idx--] = num % 10;\n    myFunction(arr, num / 10, idx);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 849, "user_id": 90997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9c666a3b5adb9b08bb628de8dc60d00?s=128&d=identicon&r=PG", "display_name": "Xeningem", "link": "https://stackoverflow.com/users/90997/xeningem"}, "is_accepted": false, "score": 0, "last_activity_date": 1520459947, "creation_date": 1520459947, "answer_id": 49161901, "question_id": 49159070, "link": "https://stackoverflow.com/questions/49159070/recursively-storing-integers-in-an-array/49161901#49161901", "title": "Recursively storing integers in an array", "body": "<p>Using vector and rest part of your example</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid myFunction(vector&lt;int&gt; &amp;arr, int num, int lenOfNum){\n    if (num &lt; 0) {\n        return;\n    }\n    else if (num == 0) {\n        return;\n    }\n    int next_idx = lenOfNum - 1;\n    int digit = num % 10;\n    arr[next_idx] = digit;\n    myFunction(arr, num / 10, next_idx);\n}\n\n\nint main(){\n    int number;\n    int lengthCount = 0;\n    cout &lt;&lt;\"Input numbers\" &lt;&lt; endl;\n    cin &gt;&gt; number;\n    int temp = number;\n    for(; number != 0; number /= 10, lengthCount++);        \n    number = temp;  \n\n    auto arr = vector&lt;int&gt;(lengthCount, 0);\n    myFunction(arr, number, lengthCount);\n    for(int i = 0; i &lt; arr.size(); i++){\n         cout &lt;&lt; \"arr[\" &lt;&lt; i &lt;&lt; \" ]= \" &lt;&lt; arr[i] &lt;&lt; endl;\n    }\n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 735, "user_id": 4711098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e3cc7b6d4644ecb2b44b9344f273d79?s=128&d=identicon&r=PG&f=1", "display_name": "Thinkeye", "link": "https://stackoverflow.com/users/4711098/thinkeye"}, "is_accepted": false, "score": 0, "last_activity_date": 1520461887, "creation_date": 1520461887, "answer_id": 49162306, "question_id": 49159070, "link": "https://stackoverflow.com/questions/49159070/recursively-storing-integers-in-an-array/49162306#49162306", "title": "Recursively storing integers in an array", "body": "<p>Works for positive numbers</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;stdio.h&gt;\n\nstd::vector&lt;int&gt; myFunction(int num)\n{\n  std::vector&lt;int&gt; ret;\n  int irec = num / 10;\n  if (irec &gt; 0)\n     ret = myFunction(irec);\n  ret.push_back('0' + (num % 10));\n  return ret;      \n}\n\nint main(int argc, char *argv[])\n{\n    std::vector&lt;int&gt; res = myFunction(539);\n    for(unsigned int i = 0; i &lt; res.size(); i++)\n        printf(\"%c,\", res[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9456097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d425a7e8c710a978f6a09cb5f56625?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeni", "link": "https://stackoverflow.com/users/9456097/evgeni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1520490236, "creation_date": 1520447920, "last_edit_date": 1520448518, "question_id": 49159070, "link": "https://stackoverflow.com/questions/49159070/recursively-storing-integers-in-an-array", "title": "Recursively storing integers in an array", "body": "<p>I have problem with recursive functions. </p>\n\n<p>I have to build a recursive function which creates an array of integer values corresponding to the digits of a given number.</p>\n\n<p>For example, if I input a number like 3562, it should look like :</p>\n\n<pre><code>myArray[0] = 3\nmyArray[1] = 5\nmyArray[2] = 6\nmyArray[3] = 2\n</code></pre>\n\n<p>Here is my code :</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint myFunction(int num, int lenOfNum);\n\nint main(){\n    int number;\n    int lengthCount = 0;\n    cout &lt;&lt;\"Input numbers\" &lt;&lt; endl;\n    cin &gt;&gt; number;\n    int temp = number;\n    for(; number != 0; number /= 10, lengthCount++);        \n    number = temp;  \n    cout &lt;&lt; myFunction(number, lengthCount) &lt;&lt; endl;            \n}  \n\nint myFunction(int num, int lenOfNum){\n    int arr[lenOfNum];\n    if(num &gt; 0){\n        for(int i = 0; i &lt; lenOfNum; i++){\n            arr[i] = num/=10;\n            cout &lt;&lt; \"arr[\" &lt;&lt; i + 1 &lt;&lt; \" ]= \" &lt;&lt; arr[i] &lt;&lt; endl;\n        }\n        return myFunction(num, lenOfNum);\n    }\n    else if(num == 0){\n        return 0;   \n    } else; \n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "multithreading", "data-structures", "pthreads"], "comments": [{"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520448389, "post_id": 49159060, "comment_id": 85323379, "body": "If the MCVE exhibits the problem, can&#39;t we lose the other files?  Why are you initialising the mutex and condition variable from within one of the threads (<code>busFunction</code>)?  You&#39;ve no way of knowing that will happen before the other thread is trying to access them."}, {"owner": {"reputation": 197, "user_id": 4364709, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a49619e25263e04e0f2e6cedcf4b704e?s=128&d=identicon&r=PG&f=1", "display_name": "MMMMMCK", "link": "https://stackoverflow.com/users/4364709/mmmmmck"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520448916, "post_id": 49159060, "comment_id": 85323671, "body": "Which &quot;other files&quot; are you referring to? As for the mutex and condition variable initialization, as each thread requires its own unique copies of these, how would there be any other way to do this than initialize from within the function? I used the thread here as a reference: <a href=\"https://stackoverflow.com/questions/37019144/control-each-thread-by-its-own-condition-variable-c\" title=\"control each thread by its own condition variable c\">stackoverflow.com/questions/37019144/&hellip;</a>"}, {"owner": {"reputation": 5522, "user_id": 1282949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59764db094c8dd25ad094a0a8951f1b3?s=128&d=identicon&r=PG", "display_name": "sonicwave", "link": "https://stackoverflow.com/users/1282949/sonicwave"}, "edited": false, "score": 0, "creation_date": 1520458084, "post_id": 49159060, "comment_id": 85328629, "body": "Just had a quick look - where are you initializing the busLoading_lock and busToQueue_lock? Also - have you run this in gdb? That should quickly tell you where it&#39;s hanging..."}, {"owner": {"reputation": 197, "user_id": 4364709, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a49619e25263e04e0f2e6cedcf4b704e?s=128&d=identicon&r=PG&f=1", "display_name": "MMMMMCK", "link": "https://stackoverflow.com/users/4364709/mmmmmck"}, "edited": false, "score": 0, "creation_date": 1520460025, "post_id": 49159060, "comment_id": 85329518, "body": "These are both global variables at the top of mainMCVE.cpp. And no, I&#39;m afraid I&#39;m not familiar with gdb."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520460325, "post_id": 49159060, "comment_id": 85329643, "body": "@MMMMMCK: <i>&quot;Which &quot;other file&quot; are you referring to?&quot;</i> - your question has busFunctoin and busController in two named, indented blocks, then mainMCVE.cpp repeats all the code for both."}, {"owner": {"reputation": 197, "user_id": 4364709, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a49619e25263e04e0f2e6cedcf4b704e?s=128&d=identicon&r=PG&f=1", "display_name": "MMMMMCK", "link": "https://stackoverflow.com/users/4364709/mmmmmck"}, "edited": false, "score": 0, "creation_date": 1520460439, "post_id": 49159060, "comment_id": 85329694, "body": "Yes, this was in case someone had a question about any part of the code that wasn&#39;t included in those two blocks. The blocks are more readable, the full main file is more thorough, I figured it would be more helpful to have both."}, {"owner": {"reputation": 5522, "user_id": 1282949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59764db094c8dd25ad094a0a8951f1b3?s=128&d=identicon&r=PG", "display_name": "sonicwave", "link": "https://stackoverflow.com/users/1282949/sonicwave"}, "edited": false, "score": 0, "creation_date": 1520527426, "post_id": 49159060, "comment_id": 85361811, "body": "@MMMMMCK Yes - but you still need to initialize them with either pthread_mutex_init, or statically by assigning PTHREAD_MUTEX_INITIALIZER to them. And regarding gdb - it&#39;s not really hard to learn the basics, and it&#39;ll save you a ton of time with stuff like this. There are lots of tutorials around ;)"}], "owner": {"reputation": 197, "user_id": 4364709, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a49619e25263e04e0f2e6cedcf4b704e?s=128&d=identicon&r=PG&f=1", "display_name": "MMMMMCK", "link": "https://stackoverflow.com/users/4364709/mmmmmck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520447888, "creation_date": 1520447888, "question_id": 49159060, "link": "https://stackoverflow.com/questions/49159060/pthreads-worker-thread-waits-forever-for-signal-from-controller-thread", "title": "Pthreads: Worker Thread Waits Forever for Signal From Controller Thread", "body": "<p>I'm working on a thread scheduling assignment, which consists of a controller thread indicating when a worker thread (\"bus\") is allowed to leave its station. There would normally be many bus threads fed through a text file that could be at one of several stations, but this problem can be seen by creating a single bus with pre-defined values (id, direction, loading and crossing time) and a single station, which I've done here to minimize the code.</p>\n\n<p>The general workflow of each bus thread is as follows:</p>\n\n<ol>\n<li>Create a structure which contains a con_var, lock, and flag\n(initialized to 0). This will be pushed to the first queue.</li>\n<li>Create a Bus class object with id, direction, etc. This will be pushed to \nthe second queue. Both queues represent the same station.</li>\n<li>Wait for signal from controller to begin loading. Once received, sleep for \nthe bus' loading time.</li>\n<li>On wakeup, push the created structure and the bus object to their queues</li>\n<li>Wait for crossing signal from controller...</li>\n</ol>\n\n<p>This last part is the issue; although I've verified that the controller IS continuously sending the signal, the thread will not stop waiting. It just hangs forever and never gets to cross. I'm not sure if I'm sending the wrong signal or if the problem is something else, but I'm quite stuck and would appreciate any available help. <strong>The first 2 code windows are for the controller and bus functions respectively, which are the heart of the issue and what I'm hoping someone is willing to look at</strong>. The third is the header for my structures/classes, and final is the entire compilable main function if necessary.</p>\n\n<h1>busController()</h1>\n\n<pre><code>void *busController (void* n){\n    pthread_mutex_lock(&amp;load_lock);\n    int remainingBuss = totalBusCount;\n    readyToLoad = true;\n    pthread_cond_broadcast(&amp;loadReady_cond);\n    pthread_mutex_unlock(&amp;load_lock);\n\n    while (true){\n//if there's a single bus in all queues (the first of several scenarios to come)\n            if(loadedBusCount == 1){\n            pthread_mutex_lock(&amp;SouthCondition.front().lock_var);\n            SouthCondition.front().flag = 1;\n            pthread_cond_signal(&amp;SouthCondition.front().cond_var);\n//NOTE: printing &amp;SouthCondition.front().cond_var shows different address than bus thread is waiting for\n            pthread_mutex_unlock(&amp;SouthCondition.front().lock_var);\n            }\n\n    }\n}\n</code></pre>\n\n<h1>busFunction()</h1>\n\n<pre><code>void *busFunction (void* t){\n\n    CondStruct condition; //Will be pushed to the first queue, contains cond_var, lock, and condition flag for the bus\n    pthread_mutex_init(&amp;condition.lock_var, NULL);\n    pthread_cond_init(&amp;condition.cond_var, NULL);\n    condition.flag = 0;\n\n    struct BusStructure *data = (struct BusStructure *) t;\n\n    //create Bus object which takes its data from the bus structure for easy access inside queue\n\n    Bus bus(((BusStructure*)t)-&gt;dir, ((BusStructure*)t)-&gt;id, ((BusStructure*)t)-&gt;loadTime,\n    ((BusStructure*)t)-&gt;crossTime);\n\n    //wait for signal to begin loading from controller thread\n\n    pthread_mutex_lock (&amp;load_lock);\n    while(readyToLoad == false){\n            pthread_cond_wait(&amp;loadReady_cond, &amp;load_lock);\n    }\n    cout &lt;&lt; \"BUS HAS BEEN UNLOCKED AND CAN PROCEED TO START LOADING\" &lt;&lt;endl;\n    pthread_mutex_unlock (&amp;load_lock);\n\n    usleep((((BusStructure*)t)-&gt;loadTime)*1000000); //sleep to simulate load time\n\n    //Bus has now loaded, add to relevant queue\n    pthread_mutex_lock(&amp;busLoading_lock);\n    cout &lt;&lt; \"Pushing bus \" &lt;&lt;bus.getID()&lt;&lt;\" to queue\"&lt;&lt;endl;\n    pthread_mutex_lock(&amp;busToQueue_lock);\n    SouthCondition.push(condition);\n    SouthBus.push(bus);\n    pthread_mutex_unlock(&amp;busToQueue_lock);\n\n    loadedBusCount++;\n\n    pthread_mutex_unlock(&amp;busLoading_lock);\n\n    //Wait for crossing signal from controller (THIS IS THE PROBLEM AREA, BUS WAITS FOREVER)\n\n    pthread_mutex_lock(&amp;condition.lock_var);\n    while(condition.flag == 0){\n    cout &lt;&lt;\"Thread \"&lt;&lt;bus.getID()&lt;&lt;\" is now waiting for \" &lt;&lt; &amp;condition.cond_var &lt;&lt; endl;\n            pthread_cond_wait(&amp;condition.cond_var, &amp;condition.lock_var);\n    }\n\n    cout &lt;&lt;\"TIME TO CROSS, WHICH ISN'T IMPLEMENTED YET. THIS PRINTOUT IS THE SUCCESS.\" &lt;&lt;endl;\n    pthread_mutex_unlock(&amp;condition.lock_var);\n}\n</code></pre>\n\n<h1>StructClassMCVE.h</h1>\n\n<pre><code>#ifndef StructClassMCVE_H\n#define StructClassMCVE_H\n\nstruct BusStructure{\n    public:\n    char dir;\n    int id;\n    double loadTime;\n    double crossTime;\n};\n\nclass Bus{\n    public:\n    char dir;\n    int id;\n    double loadTime;\n    double crossTime;\n\n    Bus(char d, int i, double l, double c){\n            dir = d;\n            id = i;\n            loadTime = l;\n            crossTime = c;\n    }\n\n    ~Bus(){}\n\n    char getDirection(){return dir;}\n    int getID(){return id;}\n    double getLoadingTime(){return loadTime;}\n    double getCrossingTime(){return crossTime;}\n};\n\nstruct CondStruct{\n    pthread_cond_t cond_var;\n    pthread_mutex_t lock_var;\n    int flag;\n};\n\n#endif\n</code></pre>\n\n<hr>\n\n<h1>mainMCVE.cpp:</h1>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;cstring&gt;\n#include&lt;sstream&gt;\n#include&lt;cstdlib&gt;\n#include&lt;queue&gt;\n#include&lt;math.h&gt;\n#include&lt;time.h&gt;\n#include &lt;unistd.h&gt;\n#include&lt;pthread.h&gt;\n#include&lt;ctype.h&gt;\n#include &lt;vector&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;fstream&gt;\n#include&lt;ctype.h&gt;\n\n#include\"StructClassMCVE.h\"\n\nusing namespace std;\n\nint totalBusCount;\nint loadedBusCount = 0;\n\npthread_cond_t loadReady_cond;\nbool readyToLoad = false;\n\npthread_mutex_t load_lock;\npthread_mutex_t busLoading_lock;\npthread_mutex_t busToQueue_lock;\n\nqueue&lt;CondStruct&gt; SouthCondition;\nqueue&lt;Bus&gt; SouthBus;\n\nvoid *busFunction (void* t){\n\n    CondStruct condition; //Will be pushed to the first queue, contains cond_var, lock, and condition flag for the bus\n    pthread_mutex_init(&amp;condition.lock_var, NULL);\n    pthread_cond_init(&amp;condition.cond_var, NULL);\n    condition.flag = 0;\n\n    struct BusStructure *data = (struct BusStructure *) t;\n\n    //create Bus object which takes its data from the bus structure for easy access inside queue\n\n    Bus bus(((BusStructure*)t)-&gt;dir, ((BusStructure*)t)-&gt;id, ((BusStructure*)t)-&gt;loadTime,\n    ((BusStructure*)t)-&gt;crossTime);\n\n    //wait for signal to begin loading from controller thread\n\n    pthread_mutex_lock (&amp;load_lock);\n    while(readyToLoad == false){\n            pthread_cond_wait(&amp;loadReady_cond, &amp;load_lock);\n    }\n    cout &lt;&lt; \"BUS HAS BEEN UNLOCKED AND CAN PROCEED TO START LOADING\" &lt;&lt;endl;\n    pthread_mutex_unlock (&amp;load_lock);\n\n    usleep((((BusStructure*)t)-&gt;loadTime)*1000000); //sleep to simulate load time\n\n    //Bus has now loaded, add to relevant queue\n    pthread_mutex_lock(&amp;busLoading_lock);\n    cout &lt;&lt; \"Pushing bus \" &lt;&lt;bus.getID()&lt;&lt;\" to queue\"&lt;&lt;endl;\n    pthread_mutex_lock(&amp;busToQueue_lock);\n    SouthCondition.push(condition);\n    SouthBus.push(bus);\n    pthread_mutex_unlock(&amp;busToQueue_lock);\n\n    loadedBusCount++;\n\n    pthread_mutex_unlock(&amp;busLoading_lock);\n\n    //Wait for crossing signal from controller (THIS IS THE PROBLEM AREA, BUS WAITS FOREVER)\n\n    pthread_mutex_lock(&amp;condition.lock_var);\n    while(condition.flag == 0){\n    cout &lt;&lt;\"Thread \"&lt;&lt;bus.getID()&lt;&lt;\" is now waiting for \" &lt;&lt; &amp;condition.cond_var &lt;&lt; endl;\n            pthread_cond_wait(&amp;condition.cond_var, &amp;condition.lock_var);\n    }\n\n    cout &lt;&lt;\"TIME TO CROSS, WHICH ISN'T IMPLEMENTED YET. THIS PRINTOUT IS THE SUCCESS.\" &lt;&lt;endl;\n    pthread_mutex_unlock(&amp;condition.lock_var);\n}\n\nvoid *busController (void* n){\n    pthread_mutex_lock(&amp;load_lock);\n    int remainingBuss = totalBusCount;\n    readyToLoad = true;\n    pthread_cond_broadcast(&amp;loadReady_cond);\n    pthread_mutex_unlock(&amp;load_lock);\n\n    while (true){\n//if there's a single bus in all queues (the first of several scenarios to come)\n            if(loadedBusCount == 1){\n            pthread_mutex_lock(&amp;SouthCondition.front().lock_var);\n                        SouthCondition.front().flag = 1;\n            pthread_cond_signal(&amp;SouthCondition.front().cond_var);\n//NOTE: printing &amp;SouthCondition.front().cond_var shows different address than bus thread is waiting for\n            pthread_mutex_unlock(&amp;SouthCondition.front().lock_var);\n            }\n\n    }\n}\n\nint main(int argc, char **argv){\n\n    totalBusCount = 1;\n    pthread_t thread[2];\n\n//create bus thread\n\n    struct BusStructure *busEntry = new struct BusStructure;\n\n    busEntry -&gt; id = 0;\n    busEntry -&gt; dir = 'S';\n    busEntry -&gt; loadTime = 0.6;\n    busEntry -&gt; crossTime = 1.2;\n\n    pthread_create(&amp;thread[0], NULL, busFunction,(void *) busEntry);\n\n//create controller thread\n\n    pthread_create(&amp;thread[1], NULL, busController,NULL);\n\n    for(int i = 0; i &lt; 2; i++){\n        pthread_join(thread[i], NULL);\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "opencv", "emgucv"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1520452700, "post_id": 49158952, "comment_id": 85325854, "body": "The <a href=\"https://docs.opencv.org/trunk/d3/d63/classcv_1_1Mat.html#aa5d20fc86d41d59e4d71ae93daee9726\" rel=\"nofollow noreferrer\">documentation</a> seems to do a fairly good job, IMHO. Since you&#39;re new to OpenCV, it may be prudent to familiarize yourself with it and use it."}], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": true, "score": 0, "last_activity_date": 1520449158, "creation_date": 1520449158, "answer_id": 49159369, "question_id": 49158952, "link": "https://stackoverflow.com/questions/49158952/what-is-opencvs-equivalent-in-emgucv-atucharcy-cx/49159369#49159369", "title": "What is OpenCV&#39;s equivalent in EmguCV .at&lt;uchar&gt;(cy, cx)?", "body": "<p>The line is used to change the pixel intensity.</p>\n\n<p>Here it is the gray intensity I guess.</p>\n\n<p>try this;</p>\n\n<pre><code>Image&lt;Gray,Byte&gt; imageGray; // Assume you have this Object\nimageGray[x, y] = new Gray(255);\n</code></pre>\n\n<p>For grayscale it seems order is x ,y only .... But for color it seems the order is y,x.</p>\n\n<p>Search for   <strong><em>grayscale image</em></strong> </p>\n\n<p>in <a href=\"http://www.emgu.com/wiki/index.php/Working_with_Images\" rel=\"nofollow noreferrer\">http://www.emgu.com/wiki/index.php/Working_with_Images</a></p>\n"}], "owner": {"reputation": 871, "user_id": 2733661, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wXewt.jpg?s=128&g=1", "display_name": "BorHunter", "link": "https://stackoverflow.com/users/2733661/borhunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 49159369, "answer_count": 1, "score": 0, "last_activity_date": 1520452607, "creation_date": 1520447463, "last_edit_date": 1520452607, "question_id": 49158952, "link": "https://stackoverflow.com/questions/49158952/what-is-opencvs-equivalent-in-emgucv-atucharcy-cx", "title": "What is OpenCV&#39;s equivalent in EmguCV .at&lt;uchar&gt;(cy, cx)?", "body": "<p>I'm new in c++ and opencv, my familiar language is c#.\nFound some kind of code and in this code has a line:</p>\n\n<pre><code>dst.at&lt;uchar&gt;(cy, cx) = 255;\n</code></pre>\n\n<p>Where dst is destination image, in C# is <code>Image&lt;Gray, Byte&gt;</code>. As I understood from a line in this byte writes some color.</p>\n\n<p>Does anyone can explain me this line and which equivalent for it in emgucv?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1520447479, "post_id": 49158928, "comment_id": 85322855, "body": "There is no <code>requestData</code> in the code you posted.  Please read how to post a [mvce]."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1520447526, "post_id": 49158928, "comment_id": 85322876, "body": "Class members necessarily occupy the same storage as their owning class. You can distinguish between them through the pointer type. Note that it&#39;s impossible for a class to have a member of it&#39;s own type, so there can&#39;t be an ambiguity there."}, {"owner": {"reputation": 249, "user_id": 8321082, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f8c9aaffcc9327cdaff6d451f56e2200?s=128&d=identicon&r=PG&f=1", "display_name": "J Doe.", "link": "https://stackoverflow.com/users/8321082/j-doe"}, "edited": false, "score": 0, "creation_date": 1520447703, "post_id": 49158928, "comment_id": 85322997, "body": "SO these days is more about being the first to criticize a post versus answering the question or being helpful. What a sad state of affairs. Appreciate the answers though, not the downvotes."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520447827, "post_id": 49158928, "comment_id": 85323072, "body": "@JDoe. take care of biting the hand that feeds you.  (And you&#39;re wrong). SO is all about helping people; but you forget that people helping here are busy; and if you don&#39;t post all the information then you are wasting other peoples time."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1520447901, "post_id": 49158928, "comment_id": 85323105, "body": "Stack Overflow is as much about keeping a collection of useful answers for future readers as it is about helping those who post the questions. It&#39;s very important that questions be of a certain level of quality so that they can be as useful as possible to future readers."}, {"owner": {"reputation": 249, "user_id": 8321082, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f8c9aaffcc9327cdaff6d451f56e2200?s=128&d=identicon&r=PG&f=1", "display_name": "J Doe.", "link": "https://stackoverflow.com/users/8321082/j-doe"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1520449319, "post_id": 49158928, "comment_id": 85323937, "body": "@ebyrob I&#39;ve posted tiny samples of code that were sufficient for a question, to get reprimanded immediately for not posting something that can be compiled. Every comment is &quot;MVCE bro.&quot; Now I&#39;m criticized for the opposite?  And yah I made a typo while writing my question versus my code - does it need to be downvoted? Does it have anything to do with MVCE (hint: no, @ Richard Critten). My problem with SO boils down to everything in these comments - no one even cares about the question, just the formatting, the nuances, etc."}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1520879253, "post_id": 49158928, "comment_id": 85487860, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41506788/dereference-a-structure-to-get-value-of-first-member\">Dereference a structure to get value of first member</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1520447549, "post_id": 49158962, "comment_id": 85322886, "body": "The first part of this answer isn&#39;t true. Classes often take up <i>more</i> space than the sum of their members."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1520447563, "post_id": 49158962, "comment_id": 85322897, "body": "Plus any padding used by the compiler."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1520447634, "post_id": 49158962, "comment_id": 85322941, "body": "I did say &quot;space used by their members&quot;, I would include padding in this. Non virtual classes should be the same size as their members."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1520447681, "post_id": 49158962, "comment_id": 85322982, "body": "&quot;Non virtual classes are <i>at least</i> the same size as the sum of the size of their subobjects&quot; FTFY."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1520447751, "post_id": 49158962, "comment_id": 85323032, "body": "@AlanBirtles The padding between members isn&#39;t used by those members, and in most cases is unusable."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1520447793, "post_id": 49158962, "comment_id": 85323054, "body": "OK, &quot;the space used to store the members&quot;"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520447896, "post_id": 49158962, "comment_id": 85323102, "body": "Related:  <a href=\"https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member\" title=\"why isnt sizeof for a struct equal to the sum of sizeof of each member\">stackoverflow.com/questions/119123/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1520447999, "post_id": 49158962, "comment_id": 85323168, "body": "<code>the class itself takes no space</code> is false.  <code>struct foo {}; sizeof(foo)</code> will have a non zero value"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1520448100, "post_id": 49158962, "comment_id": 85323231, "body": "@Fran&#231;oisAndrieux I swear I remember reading here that someone wrote a function that operated only in the padding of class members ... but finding the source is hard"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": -1, "last_activity_date": 1520448264, "last_edit_date": 1520448264, "creation_date": 1520447498, "answer_id": 49158962, "question_id": 49158928, "link": "https://stackoverflow.com/questions/49158928/class-member-address-is-same-as-class-pointer-value/49158962#49158962", "title": "Class member address is same as class pointer value", "body": "<p>Non virtual classes are the same size as the sum of the space used to store their members, the class itself takes no space (unless its an empty class which will have a non-zero size, unless the empty class is a base class in which case the class is again allowed to have 0 size) so the first member has the same address as the class</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1520448110, "post_id": 49159009, "comment_id": 85323236, "body": "<i>As your class contains only single data element, both addresses are identical.</i> This would be the case even if the object had multiple variables.  The first member of a class and the class itself have the same address."}, {"owner": {"reputation": 519, "user_id": 7429823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285fb82459c7dce4f022d1fde9cb036e?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh", "link": "https://stackoverflow.com/users/7429823/ashutosh"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520448164, "post_id": 49159009, "comment_id": 85323268, "body": "Yeah, true that. Editing the same."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520448204, "post_id": 49159009, "comment_id": 85323291, "body": "@NathanOliver Unless its virtual and the compiler inserted the vtbl pointer at the beginning."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1520448321, "post_id": 49159009, "comment_id": 85323343, "body": "@Borgleader Yeah.  Should have said that only applies to non virtual classes."}], "tags": [], "owner": {"reputation": 519, "user_id": 7429823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285fb82459c7dce4f022d1fde9cb036e?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh", "link": "https://stackoverflow.com/users/7429823/ashutosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1520449426, "last_edit_date": 1520449426, "creation_date": 1520447682, "answer_id": 49159009, "question_id": 49158928, "link": "https://stackoverflow.com/questions/49158928/class-member-address-is-same-as-class-pointer-value/49159009#49159009", "title": "Class member address is same as class pointer value", "body": "<p>The address returned by the pointers ideally represent <strong>the starting address</strong> of that object. As you're printing the address of very first data element of the class, it's address will be identical to that of <code>responseData</code> object. (As long as it's not a virtual class)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n// ResponseData\n\nclass ResponseData {\n    public: \n        std::string data;\n        //a dummy data just to demonstrate\n        int dummyData;\n        ResponseData();\n        ~ResponseData();\n        void PrintToConsole();\n};\n\nResponseData::  ResponseData(){\n    data = \"some data\";\n}\nResponseData::~ResponseData(){}\nvoid ResponseData::PrintToConsole(){\n    std::cout &lt;&lt; this-&gt;data &lt;&lt; std::endl;\n}\n\n// Response\n\nclass Response {\n    public: \n        ResponseData *responseData;\n        Response();\n        ~Response();\n        void SetResponseData(std::string data);\n        ResponseData* GetResponseData();\n};\n\nResponse::Response():responseData(NULL){}\nResponse::~Response(){}\nvoid Response::SetResponseData(std::string data){\n    this-&gt;responseData = new ResponseData();\n    this-&gt;responseData-&gt;data = data;\n}\nResponseData* Response::GetResponseData(){\n    return this-&gt;responseData;\n}\n\nint main(){\n    Response response;\n    response.SetResponseData(\"hello\");\n    ResponseData* responseData = response.GetResponseData();\n    // value of ResponseData* and address of ResponseData-&gt;data are the same..?\n    std::cout &lt;&lt; responseData &lt;&lt; std::endl;\n    std::cout &lt;&lt; &amp;(responseData-&gt;dummyData) &lt;&lt; std::endl;\n    responseData-&gt;PrintToConsole();\n    return 0;\n}\n</code></pre>\n\n<p>Here you can verify, the addressed would be different for <code>dummyData</code>, than that of <code>responseData</code> object.</p>\n"}], "owner": {"reputation": 249, "user_id": 8321082, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f8c9aaffcc9327cdaff6d451f56e2200?s=128&d=identicon&r=PG&f=1", "display_name": "J Doe.", "link": "https://stackoverflow.com/users/8321082/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 49159009, "answer_count": 2, "score": -2, "last_activity_date": 1520532611, "creation_date": 1520447348, "last_edit_date": 1520447604, "question_id": 49158928, "link": "https://stackoverflow.com/questions/49158928/class-member-address-is-same-as-class-pointer-value", "title": "Class member address is same as class pointer value", "body": "<p>I have a class <code>Response</code> that has a public member which is of another class type <code>ResponseData</code>. <code>ResponseData</code> has a <code>string</code> member.</p>\n\n<p>What I've notice is that upon inspecting <code>Response-&gt;responseData</code> and <code>Response-&gt;responseData-&gt;data</code>, the value of <code>ResponseData*</code> and the address of <code>ResponseData-&gt;data</code> are the same. </p>\n\n<p>Somehow the value of the pointer to the class is the same as the address of that class's string member.</p>\n\n<p><a href=\"https://onlinegdb.com/Bk-kJ3a_z\" rel=\"nofollow noreferrer\">https://onlinegdb.com/Bk-kJ3a_z</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n// ResponseData\n\nclass ResponseData {\n    public: \n        std::string data;\n        ResponseData();\n        ~ResponseData();\n        void PrintToConsole();\n};\n\nResponseData::  ResponseData(){\n    data = \"some data\";\n}\nResponseData::~ResponseData(){}\nvoid ResponseData::PrintToConsole(){\n    std::cout &lt;&lt; this-&gt;data &lt;&lt; std::endl;\n}\n\n// Response\n\nclass Response {\n    public: \n        ResponseData *responseData;\n        Response();\n        ~Response();\n        void SetResponseData(std::string data);\n        ResponseData* GetResponseData();\n};\n\nResponse::Response():responseData(NULL){}\nResponse::~Response(){}\nvoid Response::SetResponseData(std::string data){\n    this-&gt;responseData = new ResponseData();\n    this-&gt;responseData-&gt;data = data;\n}\nResponseData* Response::GetResponseData(){\n    return this-&gt;responseData;\n}\n\nint main(){\n    Response response;\n    response.SetResponseData(\"hello\");\n    ResponseData* responseData = response.GetResponseData();\n    // value of ResponseData* and address of ResponseData-&gt;data are the same..?\n    std::cout &lt;&lt; responseData &lt;&lt; std::endl;\n    std::cout &lt;&lt; &amp;responseData-&gt;data &lt;&lt; std::endl;\n    responseData-&gt;PrintToConsole();\n    return 0;\n}\n</code></pre>\n\n<p>I don't even know if this is a problem because my code runs fine. But it doesn't make sense to me. Maybe I still don't understand pointers. Calling <code>PrintToConsole</code> shouldn't work because apparently <code>responseData</code> is pointing to <code>responseData-&gt;data</code> which is a string...!?</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1520447265, "post_id": 49158868, "comment_id": 85322726, "body": "<code>SumRec</code> doesn&#39;t always return the promised <code>int</code>.  This wreaks havoc on a program. Who knows what will happen."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 4, "creation_date": 1520447276, "post_id": 49158868, "comment_id": 85322732, "body": "you need to pay attention to that compiler warning that states &quot;not all code paths return a value in a non-void function&quot;"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1520447296, "post_id": 49158868, "comment_id": 85322747, "body": "As a note, recursive functions to do this sort of thing are usually really awful. There&#39;s only so much stack space."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1520447482, "post_id": 49158868, "comment_id": 85322857, "body": "Please be careful with the compiler warnings. Not all execution branches of your function return values, and returned values of recursion calls are ignored."}, {"owner": {"reputation": 19, "user_id": 2362790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041fe40c6ff943243263855854193a59?s=128&d=identicon&r=PG", "display_name": "user2362790", "link": "https://stackoverflow.com/users/2362790/user2362790"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520447551, "post_id": 49158868, "comment_id": 85322888, "body": "@tadman Thanks for the advice, I am doing it as an HW and I am trying to figure out, what causes that output.... as it works fine without this line of code &quot; cout&lt;&lt;sum&lt;&lt;endl;&quot; at the end of the recursive function."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1520447653, "post_id": 49158868, "comment_id": 85322960, "body": "It has undefined behaviour regardless of that line, but it&#39;s only with that line present that you observe it. As others have pointed out you&#39;re not returning an <code>int</code> through every branch of that <code>if</code>, only one, and as such it&#39;s returning junk for <code>n!=1</code>. Turn on all your compiler warnings to catch simple slips like this."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1520447705, "post_id": 49158868, "comment_id": 85323001, "body": "&quot;Does not crash&quot; is not the same as &quot;works&quot; :)"}, {"owner": {"reputation": 19, "user_id": 2362790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041fe40c6ff943243263855854193a59?s=128&d=identicon&r=PG", "display_name": "user2362790", "link": "https://stackoverflow.com/users/2362790/user2362790"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520447977, "post_id": 49158868, "comment_id": 85323154, "body": "@tadman Ok, I will handle this by adding return keyword in the &quot;else&quot; branch like this  &quot;return SumRec(n-1,sum);&quot; is this ok?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1520447998, "post_id": 49158868, "comment_id": 85323167, "body": "Not all control paths return a value so add: <code>return sum;</code> in SumRec();"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520448046, "post_id": 49158868, "comment_id": 85323195, "body": "So long as each branch <code>return</code>s something then you&#39;re going to get rid of the undefined behaviour."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520448101, "post_id": 49158868, "comment_id": 85323232, "body": "@user2362790 bingo. Also remove the <code>cout</code>. Once both sides of the if statement <code>return</code> that <code>cout</code> is dead code that cannot be reached."}, {"owner": {"reputation": 19, "user_id": 2362790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041fe40c6ff943243263855854193a59?s=128&d=identicon&r=PG", "display_name": "user2362790", "link": "https://stackoverflow.com/users/2362790/user2362790"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1520448176, "post_id": 49158868, "comment_id": 85323280, "body": "@tadman All right, I got it now.... thank you very much for your help,"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520448274, "post_id": 49158868, "comment_id": 85323326, "body": "A note on Compiler Errors and Warnings. An error means the grammar is incorrect and cannot be parsed, identifiers used were not declared, or any of dozens of reasons the compiler cannot transform the code into a run-able program. Unfortunately there is a huge difference between a run-able program and a program that does what you want.  A compiler warning seems less dire because the compiler can make a program, but a warning means that the code will produce a program that does not necessarily behave as expected. A warning is often the first line of defense against bugs."}, {"owner": {"reputation": 19, "user_id": 2362790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041fe40c6ff943243263855854193a59?s=128&d=identicon&r=PG", "display_name": "user2362790", "link": "https://stackoverflow.com/users/2362790/user2362790"}, "edited": false, "score": 0, "creation_date": 1520448434, "post_id": 49158868, "comment_id": 85323404, "body": "Thanks for all of you, I have really benefited from all of your answers and I really enjoyed asking for the problems that I face and to learn from other experts."}], "answers": [{"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 3, "last_activity_date": 1520453929, "last_edit_date": 1520453929, "creation_date": 1520448328, "answer_id": 49159178, "question_id": 49158868, "link": "https://stackoverflow.com/questions/49158868/unexpected-output-for-a-recursive-function-to-compute-sum-of-n-numbers/49159178#49159178", "title": "Unexpected output for a recursive function to compute sum of n numbers", "body": "<p>You should ensure that <code>SumRec</code> returns an integer values as long as you promised when declaring it. I see that if <code>n == 1</code> it returns <code>sum</code> but otherwise doesn't! So you should make it look like:</p>\n\n<pre><code>int SumRec(int n, int sum){\n    sum += n;\n    if(n == 1)\n        return sum;\n    else\n        sum = SumRec(n - 1, sum);\n\n    cout &lt;&lt; sum &lt;&lt; endl;\n    // when done from recursion i should return a value as i promised\n    return sum;   \n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 2362790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041fe40c6ff943243263855854193a59?s=128&d=identicon&r=PG", "display_name": "user2362790", "link": "https://stackoverflow.com/users/2362790/user2362790"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1520453929, "creation_date": 1520447085, "last_edit_date": 1520447995, "question_id": 49158868, "link": "https://stackoverflow.com/questions/49158868/unexpected-output-for-a-recursive-function-to-compute-sum-of-n-numbers", "title": "Unexpected output for a recursive function to compute sum of n numbers", "body": "<p>I am trying to write a simple recursive function to compute the sum of <code>n</code> numbers. So, I wrote the code below and it works well, but when I tried to print <code>sum</code> inside the recursive function, it prints (at the main function) a random number.  </p>\n\n<pre><code>int SumRec(int n, int sum)\n{\n    sum+=n;\n    if(n==1)\n        return sum;\n    else\n        SumRec(n-1,sum);\n    cout&lt;&lt;sum&lt;&lt;endl;\n}\n\nint main()\n{\n    cout&lt;&lt;SumRec(2,0)&lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "class", "object"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1520446870, "post_id": 49158732, "comment_id": 85322482, "body": "1. <code>per.name = &quot;John&quot;; </code> uses an old conversion that is no longer supported in c++. You can&#39;t assign a string literal to a non-const <code>char*</code>. 2. Assigning a new address to <code>name</code> would not copy the content of the string it now points to."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1520446929, "post_id": 49158732, "comment_id": 85322519, "body": "@Fran&#231;oisAndrieux What do you mean by &quot;old conversion&quot; in this case? Is that to do with <code>const char*</code> to <code>char*</code>?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1520447169, "post_id": 49158732, "comment_id": 85322664, "body": "@tadman <code>char *s = &quot;Hallo&quot;;</code> used to be allowed, even though <code>&quot;Hallo&quot;</code> is <code>const</code> and <code>*s = &#39;W&#39;;</code> is UB. At some point C++ got rid of that and required the correct type <code>const char *s = &quot;Hallo&quot;;</code> which makes <code>*s = &#39;W&#39;;</code> not compile."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1520447197, "post_id": 49158732, "comment_id": 85322686, "body": "@tadman It used to be legal to assign a <code>const char[]</code>&#39;s address to a <code>char*</code>. This was deprecated in c++03 and removed in c++11."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520447220, "post_id": 49158732, "comment_id": 85322701, "body": "@nwp Yeah, that makes sense. For some reason I was thinking of some other kind of conversion probably from spending too much time with Rust and Swift."}], "answers": [{"tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": false, "score": 1, "last_activity_date": 1520446954, "creation_date": 1520446954, "answer_id": 49158830, "question_id": 49158732, "link": "https://stackoverflow.com/questions/49158732/changing-class-object-with-function-c/49158830#49158830", "title": "Changing class object with function c++", "body": "<p><code>char* name;</code> allows you to store a non-<code>const</code> pointer to some character, or NUL-terminated variable-length text.  Because it's non-<code>const</code>, the C++ compiler won't let you point it at text that you're not allowed to modify, such as a string literal (your \"John\").</p>\n\n<p>You would be better off adding...</p>\n\n<pre><code>#include &lt;string&gt;\n</code></pre>\n\n<p>...atop your file and changing the definition of the <code>name</code> member variable to:</p>\n\n<pre><code>std::string name;\n</code></pre>\n\n<p>That will then store a copy of any text you assign into the field in the <code>Person</code> object instance.</p>\n\n<p>(Some very old C++ compilers did allow non-<code>const</code> character pointers to be pointed at string literals for compatibility with early C Standards, and current compilers will sometimes still support that if explicitly requested using command line arguments, with any attempt to \"write through\" the pointer to modify the text typically resulting in a program crash at runtime.  If you're using a textbook or reference material that suggested pointing a <code>char*</code> at a string literal, get a better, modern reference.)</p>\n"}], "owner": {"reputation": 1, "user_id": 9371019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ejjm", "link": "https://stackoverflow.com/users/9371019/ejjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1520446954, "creation_date": 1520446629, "question_id": 49158732, "link": "https://stackoverflow.com/questions/49158732/changing-class-object-with-function-c", "title": "Changing class object with function c++", "body": "<p>How do I change a class object such as \"per.name\" using a function? Is prototyping necessary? Function call? Is this passed by value or reference? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std; \n\n\nclass Person {\n    public:\n\n    char* name; \n    int age;\n    double weight;\n    double height; \n\n    };\n\nint main()\n{ \n Person per;\n per.name = \"John\"; //change per.name\n cout &lt;&lt; per.name &lt;&lt; endl;\n }\n</code></pre>\n\n<p>I want to change the name John. Is this made as a copy?</p>\n"}, {"tags": ["c++", "sockets"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520445600, "post_id": 49158449, "comment_id": 85321755, "body": "What is your question, why you get the &quot;pre-standard&quot; output? Or about the <code>recv</code> issue?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520445620, "post_id": 49158449, "comment_id": 85321767, "body": "You&#39;ll need to be more specific about how you&#39;re compiling this code. If you want C++11, etc. you may need to enable that via flags. The current shipping compiler with Ubuntu is not &quot;pre-standard C++&quot;. It&#39;s probably something like <code>201402</code> which you&#39;re not testing for. Use <code>&gt;=</code> instead of <code>==</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520445649, "post_id": 49158449, "comment_id": 85321784, "body": "I also suggest you read the <a href=\"https://stackoverflow.com/tags/websocket/info\"><code>websocket</code> tag wiki</a>. It&#39;s about something very different from your code."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520445702, "post_id": 49158449, "comment_id": 85321806, "body": "<a href=\"https://en.wikipedia.org/wiki/WebSocket\" rel=\"nofollow noreferrer\">WebSocket</a> is not to be confused with &quot;socket used to retrieve web pages&quot;."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520445714, "post_id": 49158449, "comment_id": 85321812, "body": "Furthermore, if a call like <code>connect</code> fails, you should not continue and attempt to send or receive using the socket. And you should also check for errors from the <code>send</code> and <code>recv</code> calls."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1520445747, "post_id": 49158449, "comment_id": 85321828, "body": "You should use <code>\\r\\n</code> as the newline sequence, and you need to send two newlines after the header."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520445876, "post_id": 49158449, "comment_id": 85321888, "body": "As with anything internet protocol related, <a href=\"https://tools.ietf.org/html/rfc2616\" rel=\"nofollow noreferrer\">RFC2616</a> can explain what you have to do to be compliant."}, {"owner": {"reputation": 155, "user_id": 6740200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/776fb18aa28b1393e27ea4ff168989d6?s=128&d=identicon&r=PG&f=1", "display_name": "jp94", "link": "https://stackoverflow.com/users/6740200/jp94"}, "edited": false, "score": 0, "creation_date": 1520445887, "post_id": 49158449, "comment_id": 85321895, "body": "Yeah the question is why the hang on recv(). I will eventually be using the websocket protocol on it that&#39;s why that tag was there - anything different to consider in that regard? I&#39;ll try the suggestions, thanks guys. Is it safe to say you don&#39;t see any fundamental problems e.g. the data type of the message being passed to send() isn&#39;t correct or something like that?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520446375, "post_id": 49158449, "comment_id": 85322208, "body": "The error code was not checked, so you don&#39;t know if the <code>send</code> was successful. Assuming it was, what does the server say about the message? Wireshark is often a helpful tool to see what is really happening."}, {"owner": {"reputation": 155, "user_id": 6740200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/776fb18aa28b1393e27ea4ff168989d6?s=128&d=identicon&r=PG&f=1", "display_name": "jp94", "link": "https://stackoverflow.com/users/6740200/jp94"}, "edited": false, "score": 0, "creation_date": 1520447185, "post_id": 49158449, "comment_id": 85322677, "body": "I added the \\n\\n to the end of the request and it is working now. Thank you and sorry for the rather silly question."}], "answers": [{"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 0, "last_activity_date": 1520447095, "last_edit_date": 1520447095, "creation_date": 1520446413, "answer_id": 49158683, "question_id": 49158449, "link": "https://stackoverflow.com/questions/49158449/c-socket-connection-on-linux/49158683#49158683", "title": "C++ Socket Connection on Linux", "body": "<p>You haven't sent a complete HTTP request so the server is waiting for more data.</p>\n\n<p>You need to use \\r\\n as your line separator and your request has to end in a blank line:</p>\n\n<pre><code>const char req[] = \"GET / HTTP/1.1\\r\\nHost: www.google.com\\r\\n\\r\\n\";\n</code></pre>\n\n<p>Plus as others have commented you need to check for errors.</p>\n\n<p>You are also sending 1024 bytes of data from a buffer which is much smaller.</p>\n"}], "owner": {"reputation": 155, "user_id": 6740200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/776fb18aa28b1393e27ea4ff168989d6?s=128&d=identicon&r=PG&f=1", "display_name": "jp94", "link": "https://stackoverflow.com/users/6740200/jp94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520451880, "creation_date": 1520445503, "last_edit_date": 1520451880, "question_id": 49158449, "link": "https://stackoverflow.com/questions/49158449/c-socket-connection-on-linux", "title": "C++ Socket Connection on Linux", "body": "<p>I'm new to C++ and am trying to setup a connection to a remote server but having problems getting it to work. Spec: Ubuntu 16.04, pre-installed g++ compiler and when I run the following code it returns \"pre-standard C++\":</p>\n\n<pre><code>if( __cplusplus == 201103L ) std::cout &lt;&lt; \"C++11\\n\" ;\nelse if( __cplusplus == 19971L ) std::cout &lt;&lt; \"C++98\\n\" ;\nelse std::cout &lt;&lt; \"pre-standard C++\\n\" ;\n</code></pre>\n\n<p>My code is as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netdb.h&gt;\n\nusing namespace std;\n\nint main() {\n\n    int client;\n    int portNum = 80;\n    bool isExit = false;\n    int bufsize = 1024;\n    char buffer[bufsize];\n    const char ip[] = \"216.58.210.36\"; //google ip for test connection\n\n    const char req[] = \"GET / HTTP/1.1\\nHost: www.google.com\"; //test\n    char res[bufsize];\n\n    struct sockaddr_in server_addr;\n\n    client = socket(AF_INET, SOCK_STREAM, 0);\n    if (client &lt; 0) {\n        cout &lt;&lt; \"\\nError establishing socket...\" &lt;&lt; endl;\n        exit(1);\n    }\n\n    cout &lt;&lt; \"\\n=&gt; Socket client has been created...\" &lt;&lt; endl;\n\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_port = htons(portNum);\n    inet_aton(ip, &amp;server_addr.sin_addr);\n\n    if (connect(client,(struct sockaddr *)&amp;server_addr, sizeof(server_addr)) == 0){\n        cout &lt;&lt; \"=&gt; Connection to the server port number: \" &lt;&lt; portNum &lt;&lt; endl;\n    }\n\n    send(client, req, bufsize, 0);\n    cout &lt;&lt; \"=&gt; Awaiting confirmation from the server...\" &lt;&lt; endl;\n    recv(client, buffer, bufsize, 0);\n    cout &lt;&lt; \"=&gt; Connection confirmed, response:\" &lt;&lt; buffer &lt;&lt; endl;\n\n    cout &lt;&lt; res &lt;&lt; endl;\n\n    close(client);\n    return 0;\n}\n</code></pre>\n\n<p>The client is created and the socket connects but the code hangs on the call to recv() and no response is received. I'm assuming that's because the request I'm sending is in the wrong format/data type/etc. Can anyone advise where I'm going wrong? Cheers!</p>\n"}, {"tags": ["c++", "visual-studio-2017", "sdl-2"], "answers": [{"comments": [{"owner": {"reputation": 7842, "user_id": 8715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8495abb9d44de2866b83a6d164948e0c?s=128&d=identicon&r=PG", "display_name": "AntonioCS", "link": "https://stackoverflow.com/users/8715/antoniocs"}, "edited": false, "score": 0, "creation_date": 1520451193, "post_id": 49158608, "comment_id": 85325027, "body": "Thanks. I think I got confused with this as this doesn&#39;t seem to compile properly with gcc either."}], "tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 3, "last_activity_date": 1520446142, "creation_date": 1520446142, "answer_id": 49158608, "question_id": 49158337, "link": "https://stackoverflow.com/questions/49158337/visual-studio-2017-c2027use-of-undefined-type-sdl-texture/49158608#49158608", "title": "Visual Studio 2017 C2027\tuse of undefined type &#39;SDL_Texture&#39;", "body": "<p>SDL.h does not contain the definition of <code>SDL_Texture</code>. It only contains a forward declaration for it. This is because you are never meant to use the type directly, you are only ever meant to use pointers to it. However, in order to instantiate <code>std::unique_ptr&lt;SDL_Texture&gt;</code>, you need the full definition.</p>\n\n<p>But why are you using a <code>std::unique_ptr</code> without a custom deleter here anyway, since you just have to manually delete the object with <code>SDL_DestroyTexture</code>? That defeats the whole purpose of using a smart pointer. Try this:</p>\n\n<pre><code>struct TextureDeleter\n{\n    void operator()(SDL_Texture* tp) {\n        SDL_DestroyTexture(tp);\n    }\n};\n\nstd::unique_ptr&lt;SDL_Texture, TextureDeleter&gt; m_texture;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1520446570, "last_edit_date": 1520446570, "creation_date": 1520446220, "answer_id": 49158625, "question_id": 49158337, "link": "https://stackoverflow.com/questions/49158337/visual-studio-2017-c2027use-of-undefined-type-sdl-texture/49158625#49158625", "title": "Visual Studio 2017 C2027\tuse of undefined type &#39;SDL_Texture&#39;", "body": "<p><code>SDL_Texture</code> structure is not declared in SDL.h. It is an internal type and only its forward declaration is available in public interfaces, you can not <code>delete</code> it. You should provide the custom deleter to the smart pointer <code>std::unique_ptr&lt;SDL_Texture, void(SDL_Texture*)&gt; m_texture</code> and assign later <code>m_texture = std::unique_ptr(SDL_CreateTextureFromSurface(...), SDL_DestroyTexture)</code>.</p>\n"}], "owner": {"reputation": 7842, "user_id": 8715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8495abb9d44de2866b83a6d164948e0c?s=128&d=identicon&r=PG", "display_name": "AntonioCS", "link": "https://stackoverflow.com/users/8715/antoniocs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 49158608, "answer_count": 2, "score": 1, "last_activity_date": 1520446570, "creation_date": 1520445107, "question_id": 49158337, "link": "https://stackoverflow.com/questions/49158337/visual-studio-2017-c2027use-of-undefined-type-sdl-texture", "title": "Visual Studio 2017 C2027\tuse of undefined type &#39;SDL_Texture&#39;", "body": "<p>I moved from compiling my code in gcc to the compiler provided by Visual Studio 2017.</p>\n\n<p>Every time I try to run the application I get the following error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/y7VT0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y7VT0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the file where I believe the error is coming from:</p>\n\n<blockquote>\n  <p>Texture.h</p>\n</blockquote>\n\n<pre><code>#include &lt;SDL2/SDL.h&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\nnamespace AcsGameEngine {\n\nclass Renderer;\n\nclass Texture {\npublic:\n    Texture(const Renderer&amp; renderer);\n    Texture(const Renderer&amp; renderer, const std::string&amp;);\n    Texture(const Texture&amp; orig) = default;\n    virtual ~Texture();\n\n    void load(const std::string&amp;, uint16_t w = 0, uint16_t h = 0) const;\n    void load(const char*, uint16_t w = 0, uint16_t h = 0);\n\n    const Renderer&amp; getRenderer() const { return m_renderer; }\n\n    //inline SDL_Texture* getRawPointer() const { return m_texture-&gt;get(); }\n\nprivate:\n    std::unique_ptr&lt;SDL_Texture&gt; m_texture;\n    const Renderer&amp; m_renderer;\n\n    uint16_t m_width;\n    uint16_t m_height;\n};\n} // namespace AcsGameEngine\n</code></pre>\n\n<blockquote>\n  <p>Texture.cpp</p>\n</blockquote>\n\n<pre><code>#include \"Texture.h\"\n#include \"Renderer.h\"\n#include &lt;SDL2/SDL_image.h&gt;\n\nnamespace AcsGameEngine {\n\n    Texture::Texture(const Renderer &amp;renderer) : m_renderer(renderer) {\n    }\n\n    Texture::Texture(const Renderer &amp;renderer, const std::string &amp;p) : Texture(renderer) {\n        load(p.c_str());\n    }\n\n    Texture::~Texture() {\n        if (m_texture != nullptr) {\n            SDL_DestroyTexture(m_texture.get());\n        }\n    }\n\n    void Texture::load(const std::string &amp;path, uint16_t w, uint16_t h) const {\n        load(path.c_str());\n    }\n\n    void Texture::load(const char *path, uint16_t w, uint16_t h) {\n        SDL_Surface *tmp = IMG_Load(path);\n        m_texture.reset(SDL_CreateTextureFromSurface(m_renderer.getRawPointer(), tmp));\n        SDL_FreeSurface(tmp);\n\n        if (m_texture == false) {\n            //error\n        }\n\n    }\n\n} // namespace AcsGameEngine\n</code></pre>\n\n<p>I don't understand why it is complaining of an undefined type because SDL.h contains the struct SDL_Texture.</p>\n"}, {"tags": ["c++", "c++11", "constructor", "shared-ptr"], "comments": [{"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 2, "creation_date": 1520444198, "post_id": 49157976, "comment_id": 85320908, "body": "For this pattern in general (i.e. computing an initializer), you can use a private helper function that does whatever it takes to generate the initial value. Between inlining, move semantics, and RVO, the overhead of this approach can be driven nearly to zero."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1520453829, "post_id": 49157976, "comment_id": 85326434, "body": "Alternatively, you could have 2 distinct Foo constructors, one of which takes parameters for bar, and the other creates a nullptr."}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 7447149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb097959ef983f4d1888cf11f3031fb9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew231", "link": "https://stackoverflow.com/users/7447149/andrew231"}, "edited": false, "score": 0, "creation_date": 1520454794, "post_id": 49157993, "comment_id": 85326956, "body": "nice! how does this work though? nullptr is of type nullptr_t and std::make_shared&lt;Bar&gt;() returns a shared_ptr&lt;Bar&gt; type"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1520443948, "creation_date": 1520443948, "answer_id": 49157993, "question_id": 49157976, "link": "https://stackoverflow.com/questions/49157976/conditionally-make-shared-ptr-in-initializer-list-null/49157993#49157993", "title": "Conditionally make shared_ptr in initializer list null", "body": "<p><code>b(true ? std::make_shared&lt;Bar&gt;() : nullptr)</code></p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1520445123, "creation_date": 1520445123, "answer_id": 49158342, "question_id": 49157976, "link": "https://stackoverflow.com/questions/49157976/conditionally-make-shared-ptr-in-initializer-list-null/49158342#49158342", "title": "Conditionally make shared_ptr in initializer list null", "body": "<p>You can use </p>\n\n<pre><code>Foo() : b(true ? std::make_shared&lt;Bar&gt;() : nullptr) {}\n</code></pre>\n\n<p>My suggestion will be to push that logic to a helper function.</p>\n\n<pre><code>class Foo {\n\n   private:\n      std::shared_ptr&lt;Bar&gt; b;\n\n      static std::shared_ptr&lt;Bar&gt; getB(bool flag)\n      {\n         return (flag ? std::make_shared&lt;Bar&gt;() : nullptr);\n      }\n\n   public:\n      Foo() : b(getB(true)) {}\n\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1520702276, "creation_date": 1520702276, "answer_id": 49211846, "question_id": 49157976, "link": "https://stackoverflow.com/questions/49157976/conditionally-make-shared-ptr-in-initializer-list-null/49211846#49211846", "title": "Conditionally make shared_ptr in initializer list null", "body": "<p>Your problem is that your initialization of <code>b</code> is incorrect.  </p>\n\n<pre><code>b(Bar())\n</code></pre>\n\n<p>won't compile either.  You'd need </p>\n\n<pre><code>b(new Bar())\n</code></pre>\n\n<p>and the equivalent with the ternary operator:</p>\n\n<pre><code>b(true?new Bar():nullptr)\n</code></pre>\n\n<p>is fine.  However, I would recommend avoiding naked <code>new</code> wherever possible, and use</p>\n\n<pre><code>b(true?maked_shared&lt;Bar&gt;():nullptr)\n</code></pre>\n\n<p>Although <code>make_shared</code> returns a different type to <code>nullptr</code>, they can be coerced into the same type by constructing an empty <code>shared_ptr</code> from the <code>nullptr</code></p>\n"}], "owner": {"reputation": 116, "user_id": 7447149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb097959ef983f4d1888cf11f3031fb9?s=128&d=identicon&r=PG&f=1", "display_name": "andrew231", "link": "https://stackoverflow.com/users/7447149/andrew231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 49157993, "answer_count": 3, "score": 4, "last_activity_date": 1520702276, "creation_date": 1520443888, "last_edit_date": 1520701841, "question_id": 49157976, "link": "https://stackoverflow.com/questions/49157976/conditionally-make-shared-ptr-in-initializer-list-null", "title": "Conditionally make shared_ptr in initializer list null", "body": "<p>I am in a situation where I need to make a <code>shared_ptr</code> either <code>null</code> or contain an instance of class <code>Bar</code>. </p>\n\n<p>The approach below does not work though since, <code>Bar</code> and <code>nullptr</code> are not of the same type. How can achieve this? </p>\n\n<pre><code> class Bar {};\n\n class Foo {\n\n    private:\n       shared_ptr&lt;Bar&gt; b;\n\n    public:\n       Foo() : b(true ? Bar() : nullptr) {\n       }\n\n };\n</code></pre>\n"}, {"tags": ["c++", "c", "c++14"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1520443904, "post_id": 49157950, "comment_id": 85320752, "body": "What complexity? All of these operations (including division) <i>might</i> be implemented as a single CPU instruction."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520443937, "post_id": 49157950, "comment_id": 85320765, "body": "Do you mean &quot;precedence&quot; instead of &quot;complexity&quot;?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1520444024, "post_id": 49157950, "comment_id": 85320814, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/12135518/is-faster-than\">stackoverflow.com/questions/12135518/is-faster-than</a>"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1520444135, "post_id": 49157950, "comment_id": 85320871, "body": "For primitive (built-in) types like <code>int</code> or <code>double</code>, you can normally expect these to all be equal in speed. For user-defined types, it&#39;ll depend on how they&#39;re overloaded."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520444141, "post_id": 49157950, "comment_id": 85320874, "body": "@EugeneSh.: the significant difference is not in number of CPU instructions, but in number of CPU clock cycles, where divide, mod and to a less extent multiplication are often much, much slower (for e.g. <code>int</code>, <code>double</code>) than comparisons, addition, subtraction, and bitwise operations (all the latter often taking one clock cycle)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520444280, "post_id": 49157950, "comment_id": 85320952, "body": "@TonyDelroy addition and subtraction are slower than bitwise operations, but you put them together, so it is still not clear what OP and you mean by complexity."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520444480, "post_id": 49157950, "comment_id": 85321080, "body": "@Slava: <i>&quot;addition and subtraction are slower than bitwise operations&quot;</i> - there&#39;s not much point gainsaying me (or anyone) without evidence or references.  Mine: <a href=\"http://www.agner.org/optimize/instruction_tables.pdf\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1520444754, "post_id": 49157950, "comment_id": 85321248, "body": "@TonyDelroy if you ever deal with FPGA you would clearly know why summation is slower. Your reference is irrelevant here, nobody said this question about Intel CPU or compatible ones."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1520445336, "post_id": 49157950, "comment_id": 85321594, "body": "On many CPUs compare is implemented very similar to subtract, and would have the same complexity."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520445416, "post_id": 49157950, "comment_id": 85321639, "body": "@Slava: I just used x86 as a counter example to your blanket claim that &quot;addition and subtraction are slower&quot;.  My own claim - by which I stand -  was that they all are <i>&quot;often taking one clock cycle&quot;</i> - note &quot;often&quot;.  That&#39;s true on <i>many</i> CPUs.  I not only understand why the <i>circuitry</i> for addition/summation is more complicated (FPGAs or not), but also - more importantly - the reasons why clock speeds on CPUs aren&#39;t increased to try to exploit the faster performance of the simpler logic needed for bitwise operations vs <code>+</code> and <code>-</code>."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1520446102, "post_id": 49157950, "comment_id": 85322042, "body": "Almost every compiler is going to turn <code>(x &lt; 100)</code> and <code>(x &lt;= 99)</code> into exactly the same assembly code.  So no, there&#39;s no difference in complexity in that regard.  That said, modern optimizing compilers will do much more complex optimizations, many of which are obviously compiler-specific."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1520446440, "post_id": 49157950, "comment_id": 85322242, "body": "@Slava: He doesn&#39;t specify the CPU involved, but he does specify C and C++, which (at least mostly) restricts you to CPUs. Even though we all know that addition (for example) uses a carry-chain, so in theory it should be slower than a bit-wise operation, on essentially any and all reasonably modern CPUs, addition and subtraction are single-cycle operations."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520448166, "post_id": 49157950, "comment_id": 85323271, "body": "@JerryCoffin you know that for all modern CPUs including embedded? wow. How about CPU that implemented in FPGA?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520450753, "post_id": 49157950, "comment_id": 85324790, "body": "@Slava: I&#39;ll repeat: <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b14\">c++14</a>. So even if we assume there&#39;s some 8-bit microcontroller that needs two cycles for an addition, it&#39;s irrelevant to the question at hand. Likewise something I decide to implement in an FPGA, for which no C++ compiler exists."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520450922, "post_id": 49157950, "comment_id": 85324881, "body": "@JerryCoffin why so, C++ and C++14 is restricted to be used on 8-bit microcontroller? Plus compiled C++ or C++14 code can be executed on software simulator of some CPU, is that allowed?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520451072, "post_id": 49157950, "comment_id": 85324963, "body": "@Slava: If you want to write (for example) an LLVM back-end to target a 6502, feel free--but right now, I&#39;m reasonably certain it just doesn&#39;t exist (and the chances of somebody investing enough to create one are minuscule)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520451220, "post_id": 49157950, "comment_id": 85325039, "body": "@JerryCoffin I do not have to write back-end for LLVM - cfront and existence of C compiler is enough."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520451496, "post_id": 49157950, "comment_id": 85325187, "body": "@Slava: No, it&#39;s not. cfront development stopped long before C++14, or even C++98. What it accepts no longer qualifies as C++ at all, not to mention being even close to C++14."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520451950, "post_id": 49157950, "comment_id": 85325445, "body": "@JerryCoffin how about Comeau? It definitely supported C++98 and some C++11"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520452178, "post_id": 49157950, "comment_id": 85325566, "body": "@Slava: it did. But it didn&#39;t support any arbitrary C compiler as the backend--if you wanted to support some 8-bit CPU, you needed to get Comeau to do that port for you (and it&#39;s been quite a while since I saw anything from Greg Comeau to indicate that he was actively engaged in doing such things any more). Theoretically, somebody else could do the same: license the EDG front end, and use it to target a C compiler of their choice. Then you have an even harder step though: find an <i>actual</i> 8-bit CPU that executes bitwise operators faster than addition/subtraction."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1520452717, "post_id": 49157950, "comment_id": 85325868, "body": "Even if I can&#39;t say with <i>absolute</i> authority that it couldn&#39;t possibly exist, I can say that I&#39;ve used most of the common ones (Intel, Motorola, MOS Tech, NEC, National Semi, Dallas Semi, Microchip, Atmel, etc.) and I&#39;m pretty sure it&#39;s not true of any of them. Bottom line: yes, it&#39;s difficult to prove a negative--but in this case, there&#39;s a huge preponderance of evidence indicating that it just doesn&#39;t exist."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1520445504, "post_id": 49158274, "comment_id": 85321700, "body": "In addition to this, these operators can apply to classes and structs which means they&#39;re not always predictable in terms of performance."}], "tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": false, "score": 3, "last_activity_date": 1520446360, "last_edit_date": 1520446360, "creation_date": 1520444934, "answer_id": 49158274, "question_id": 49157950, "link": "https://stackoverflow.com/questions/49157950/complexity-for-vs-operation-in-c-c/49158274#49158274", "title": "Complexity for &gt;=, &lt;= vs &lt;, &gt;, == operation in C/C++", "body": "<blockquote>\n  <p>Does all the relational operations have the same complexity or differs for &lt;= and >= operations.</p>\n</blockquote>\n\n<p>The performance of these (for inbuilt integral and floating point types) is not determined by the C++ language Standard, but the CPU instructions the specific compiler implementation emits, which is of course limited by what that CPU offers.  You'll could research the compiler(s) you're interested in (e.g. <code>g++ -S program.cc</code> will produce <code>program.s</code> with assembly), then research the CPU models you're interested in and their performance.  For x86-family processors you'll find lists of instruction timings easily online (e.g. <a href=\"http://www.agner.org/optimize/instruction_tables.pdf\" rel=\"nofollow noreferrer\">here</a>), and - <strong><em>as with most CPUs - all the comparison operations tend to take one CPU cycle</em></strong>.  It's vaguely possible that some more complicated instruction like a conditional move or jump might support a more limited set of conditions on some CPU model, but that's unlikely to be a practical issue for you.</p>\n"}, {"tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1520446063, "creation_date": 1520446063, "answer_id": 49158591, "question_id": 49157950, "link": "https://stackoverflow.com/questions/49157950/complexity-for-vs-operation-in-c-c/49158591#49158591", "title": "Complexity for &gt;=, &lt;= vs &lt;, &gt;, == operation in C/C++", "body": "<p>Computational complexity is discussed in at least two contexts, theoretical and practical.</p>\n\n<p>In a theoretical context, the input to a program is a string of <em>n</em> bits, and we study how long a theoretical computer must take to produce an answer as a function of <em>n</em>. In such a computer, the time it takes to compare two binary numerals is O(<em>n</em>), because you may have to compare each of the bits of the two numbers up to the end before you find a difference. This is true regardless of whether the operation is less than, less than or equal to, greater than, greater than or equal to, equal to, or not equal to. As soon as you find the most significant bit that differs between the two numbers, you can determine any of those order relations immediately. It is finding the most significant bit that differs (or determining all bits are the same) that takes the varying amount of time, and that is O(<em>n</em>).</p>\n\n<p>In a practical context, computers have fixed-size words, and we are concerned with how long practical programs take given that they stay within the bounds of those fixed-size words. In common current general-purpose processors, comparing two scalar numbers (numbers represented in one word or less, such as 64-bit integers or narrower or 64-bit floating-point values) typically has a fixed latency, often a single CPU cycle, sometimes a few cycles. Effectively, the complexity is O(1). Sometimes the latency may be fixed for normal cases but take longer for special cases such as subnormals or NaNs. The latency generally does not differ for which relation is being evaluated. In fact, many processors have a single general comparison instruction that returns all the ordering information, and a second information is used to branch based on whether the order is less than, greater than, equal to, or unordered (NaNs are not ordered).</p>\n\n<p>If a compiler or library implements an arbitrary size number, such as multi-precision floating-point or big integers, then it will behave more like the theoretical problem: Numbers with more digits will take longer to compare. In normal representations of numbers, all comparisons will have the same complexity. However, there are special representations in which the comparisons may differ. For example, we could represent an integer by storing its residues modulo selected divisors instead of storing bits representing specific magnitudes. It would be easy to compare two such integers for equality (Are all their residues the same?), but it could be difficult to compare them for order (which one is larger is a complicated function of their residues).</p>\n"}], "owner": {"reputation": 7, "user_id": 9458110, "user_type": "registered", "profile_image": "https://graph.facebook.com/1696615907042744/picture?type=large", "display_name": "Ravi Kalahasthi", "link": "https://stackoverflow.com/users/9458110/ravi-kalahasthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "closed_date": 1520447583, "answer_count": 2, "score": -1, "last_activity_date": 1520446360, "creation_date": 1520443813, "question_id": 49157950, "link": "https://stackoverflow.com/questions/49157950/complexity-for-vs-operation-in-c-c", "closed_reason": "Needs details or clarity", "title": "Complexity for &gt;=, &lt;= vs &lt;, &gt;, == operation in C/C++", "body": "<p>In arithmetic operation, add and subtract operations takes less complexity while division has high complexity. Does all the relational operations have the same complexity or differs for &lt;= and >= operations.</p>\n"}, {"tags": ["c++", "variadic-templates", "variadic-functions", "function-template"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1520443191, "post_id": 49157696, "comment_id": 85320311, "body": "Any reason why you don&#39;t want to just use a lambda? <code>[](auto&amp;&amp;... args) { return foo(std::forward&lt;decltype(args)&gt;(args)...); }</code>"}, {"owner": {"reputation": 77, "user_id": 9457940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NaRno.png?s=128&g=1", "display_name": "Frank Jefferson", "link": "https://stackoverflow.com/users/9457940/frank-jefferson"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1520443808, "post_id": 49157696, "comment_id": 85320696, "body": "Yes, I&#39;d like the function to be an input of the wrapper."}], "owner": {"reputation": 77, "user_id": 9457940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NaRno.png?s=128&g=1", "display_name": "Frank Jefferson", "link": "https://stackoverflow.com/users/9457940/frank-jefferson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520443107, "creation_date": 1520442986, "last_edit_date": 1520443107, "question_id": 49157696, "link": "https://stackoverflow.com/questions/49157696/template-of-wrapper-for-variadic-template-functions", "title": "Template of wrapper for variadic template functions", "body": "<p>I am implementing a template for a wrapper, as in :</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/36492029/c-function-call-wrapper-with-function-as-template-argument\">C++ function call wrapper with function as template argument</a></li>\n<li><a href=\"https://stackoverflow.com/questions/25392935/wrap-a-function-pointer-in-c-with-variadic-template\">Wrap a function pointer in C++ with variadic template</a></li>\n</ul>\n\n<p>The wrapper taken from the links above is :</p>\n\n<pre><code>template&lt;typename Fn, Fn fn, typename... Args&gt;\ntypename std::result_of&lt;Fn(Args...)&gt;::type\nwrapper(Args&amp;&amp;... args) {\nreturn fn(std::forward&lt;Args&gt;(args)...);\n}\n#define WRAPPER(FUNC) wrapper&lt;decltype(&amp;FUNC), &amp;FUNC&gt;\n</code></pre>\n\n<p>Given two functions foo and foo2 :</p>\n\n<pre><code>int foo (int a) {return a};\n\ntemplate &lt;class T&gt;\n    T foo2(T a)\n    {\n        return a;\n    }\n\nWRAPPER(foo)(4) /*Works*/\nWRAPPER(foo2)(4) /*Doesn't work*/\n</code></pre>\n\n<p>I understand that it is because <code>decltype(&amp;FUNC)</code> cannot be determined unless the template function is given its arguments' types. The thing is that the information is there at compile time, ie. foo2 is called with an int, so is of type int (int) etc. etc. Isn't there some way to express things so that the type of the function is determined with the type of the arguments ?</p>\n\n<h2>Simplification</h2>\n\n<p>I removed the template call in the code above to isolate the wrapper part and thus have access to both the function and its arguments on the same \"level\" :</p>\n\n<pre><code>template&lt;class F, typename... Args&gt;\n    typename std::result_of&lt;F(Args...)&gt;::type wrapper2(F&amp;&amp; fn, Args&amp;&amp;... args)\n    {\n        return fn(std::forward&lt;Args&gt;(args)...);\n    }\nwrapper2(foo, 4) /*works*/\nwrapper2(foo2, 4) /* the instance of foo2 to create cannot be determined */\n</code></pre>\n\n<p>The wrapper should ideally be able to create the correct instance of <code>foo2</code> given the types of the list of arguments.</p>\n"}, {"tags": ["c++", "windows", "dll", "shared-libraries", "declspec"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1520443628, "post_id": 49157641, "comment_id": 85320595, "body": "Having to keep the .def file in sync with your code is very little joy.  If you don&#39;t have to rename the export, you never <i>really</i> do, then the  declspec is mighty convenient.  Keep in mind that you can still use #pragma comment to inject the linker&#39;s /export directive."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520445316, "post_id": 49157641, "comment_id": 85321578, "body": "I don&#39;t know why this article is so focused on export by ordinal, which no one is using anyway (except MSFT). IMO the more important advantage of .def file is that you can export functions by unmangled name, which makes it easier to link DLL from other language than it was written in."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520445728, "post_id": 49157641, "comment_id": 85321820, "body": "@zett42 I don&#39;t understand why we have to recompile our app if we update a dll wasn&#39;t it the main objective to shared library to don&#39;t have to do that ?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520446632, "post_id": 49157641, "comment_id": 85322341, "body": "Rebuilding the app shouldn&#39;t be necessary if you only add a new function and existing functions stay backwards compatible. I don&#39;t really see the point of that part of the article as you have to use a .def file in the first place to export by ordinal. With <code>__declspec(dllexport)</code> functions are exported by name by default."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520450669, "post_id": 49157641, "comment_id": 85324741, "body": "I agree with you @zett42 after some some tests i can add new exported functions to my dll and my exe still working. But people still saying that you have to relink i still dont understand why"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520452874, "post_id": 49157641, "comment_id": 85325938, "body": "If this would really be the case, all existing applications would stop working when a new version of Windows comes out or when MSFT adds new functions through a Windows update, which also happens quite often."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "edited": false, "score": 0, "creation_date": 1520444716, "post_id": 49157814, "comment_id": 85321226, "body": "Great answer ! I thought that the main advantage of the dll was that we can change them without touch the main app. So it&#39;s not the case infact we have to relink the app with the dll ? Is it the method generally used by software developers ? And when we use the other method declspec does it use cardinal number under the hood too ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1520449676, "post_id": 49157814, "comment_id": 85324128, "body": "@Rain-io, you can change the implementation of already available functions, but you can&#39;t add more functions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "edited": false, "score": 0, "creation_date": 1520450506, "post_id": 49157814, "comment_id": 85324642, "body": "Thanks but i dont understand after some tests using declspec i can add new exported functions into the dll and the app main still working without a new linking. Is there something that i forget ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1520450798, "post_id": 49157814, "comment_id": 85324814, "body": "@Rain-io it is not guaranteed to be working. The ordinals might change, might remain the same."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "edited": false, "score": 0, "creation_date": 1520451548, "post_id": 49157814, "comment_id": 85325223, "body": "Are you sure about that (some sources?) i thought that with declspec it use the function naming to find them, are you sure that even with declspec it use ordinal numbers ? We can create an import lib from a .def wich we have create manualy after the dll has been compiled. And this .def has only function name mentioned, not number, we use the lib create to build our exe and it works, the exe find dll function with only the names. That&#39;s why i&#39;m little confuse. (im not the downvoter)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "edited": false, "score": 0, "creation_date": 1520453132, "post_id": 49157814, "comment_id": 85326050, "body": "I have my answer here <a href=\"https://stackoverflow.com/questions/49160234/rebuild-exe-after-dll-updated?noredirect=1#comment85325873_49160234\" title=\"rebuild exe after dll updated\">stackoverflow.com/questions/49160234/&hellip;</a>  Thanks @SergeyA"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1520443393, "creation_date": 1520443393, "answer_id": 49157814, "question_id": 49157641, "link": "https://stackoverflow.com/questions/49157641/pros-and-cons-of-using-def-files/49157814#49157814", "title": "Pros and Cons of Using .def Files", "body": "<p>That is because of some specifics of MSFT implementation of shared objects (or DLLs). In Microsoft world, in order to import function into your process, you need not only the shared code itself (.dll), but you also need the special 'import' library - the <code>.lib</code> file. This file is statically linked into your application (as it is a static library). This library provides 'glue' between function names and function ordinals.</p>\n\n<p>Normally, every time you release a new version of DLL, all applications which use it will have to be relinked with the new, accompanying version of static import library (<code>.lib</code>) to be able to use this new DLL library. This is due to the fact that function ordinals are generally no longer valid after you have created the new library. However, if you are using <code>.def</code> file, you can assign ordinals manually, and ensure the ordinals remain the same for previously available functions - and thus <code>.lib</code> file will still be valid.</p>\n"}, {"comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1520444037, "post_id": 49157946, "comment_id": 85320822, "body": "I&#39;m fairly certain the import library gets created for any DLL regardless if the author is using .def files to export or not. Using  <code>__declspec dllexport</code> to export function should result in an import .lib file being generated as well."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1520444286, "post_id": 49157946, "comment_id": 85320959, "body": ".def file can be created even manually or extracted from DLL import section by some tool. What if you&#39;ve created your DLL using assembly and need an import library in order to use it in C without LoadLibrary ?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1520444384, "post_id": 49157946, "comment_id": 85321022, "body": "What use is a .def file after the DLL has already been built?"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1520445317, "post_id": 49157946, "comment_id": 85321580, "body": "Yes, for example with GNU DLL tool <a href=\"http://mirrors.zoreil.com/webclub.kcom.ne.jp/ma/colinp/win32/tools/dlltool.html\" rel=\"nofollow noreferrer\">mirrors.zoreil.com/webclub.kcom.ne.jp/ma/colinp/win32/tools/&zwnj;&#8203;&hellip;</a> like this impdef foobar.dll &gt;foobar.def"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1520445736, "post_id": 49157946, "comment_id": 85321825, "body": "Once you have recovered a .def file, what would you do with it? I suppose it enables you to create a compatible drop-in replacement DLL..."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1520446583, "post_id": 49157946, "comment_id": 85322313, "body": "It will allow you to create an import library. For example you&#39;ve using MinGW (GCC for Windows) and d&#39;like to use a DLL build by MS VC++ or vise versa. So if you have a .def file you can create such an import library. Otherwise - you will have to deal with LoadLibrary and taking function addresses from DLL export section manually."}], "tags": [], "owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520446681, "last_edit_date": 1520446681, "creation_date": 1520443799, "answer_id": 49157946, "question_id": 49157641, "link": "https://stackoverflow.com/questions/49157641/pros-and-cons-of-using-def-files/49157946#49157946", "title": "Pros and Cons of Using .def Files", "body": "<p>Ok, if you have a .def file you can use it to create an import library. </p>\n\n<p>I.e. <a href=\"https://msdn.microsoft.com/en-us/library/54xsd65y.aspx\" rel=\"nofollow noreferrer\">mydll.lib</a> for MS VC++ or <a href=\"http://www.mingw.org/wiki/createimportlibraries\" rel=\"nofollow noreferrer\">mylib-dll.a</a> for GCC</p>\n\n<p>Compilers and linkers prefer their own binary format import libraries, usually not compatible with each-other. This is especially does mater when you'r DLL is written on C/C++ but your program is written on something else like Ada/FORTRAN/Object Pascal etc or vise versa. So .def files can be used to create a compatible import library. </p>\n\n<p>Paragraph telling you a way to hide some functions from import library, with manual editing .DEF file and instruct linker to hide some functions. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5708257"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 49157814, "answer_count": 2, "score": 1, "last_activity_date": 1520446681, "creation_date": 1520442771, "question_id": 49157641, "link": "https://stackoverflow.com/questions/49157641/pros-and-cons-of-using-def-files", "title": "Pros and Cons of Using .def Files", "body": "<p>I don't understand this paragraph :</p>\n\n<blockquote>\n  <p>Exporting functions in a .def file gives you control over the export ordinals. When you add an exported function to your DLL, you can assign it a higher ordinal value than any other exported function. When you do this, applications that use implicit linking do not have to relink with the import library that contains the new function. This is very convenient if you are designing a DLL for use by many applications because you can add new functionality and also ensure that it continues to work correctly with the applications that already rely on it. For example, the MFC DLLs are built by using .def files. </p>\n</blockquote>\n\n<p>Why application doesn't have to relink with the import library in case of the usage of a .def file instead of __declspec(dllexport) in the case of a function adding into the dll ?</p>\n\n<p>cf <a href=\"https://docs.microsoft.com/en-us/cpp/build/determining-which-exporting-method-to-use\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/determining-which-exporting-method-to-use</a></p>\n"}, {"tags": ["c++", "qt", "user-interface"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 5, "creation_date": 1520442042, "post_id": 49157416, "comment_id": 85319606, "body": "Sounds like a good time to open your debugger, and look at the callstack.  You&#39;ll learn all about constructors if you do that; and why you didn&#39;t get &quot;hi&quot; printed"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1520442188, "post_id": 49157416, "comment_id": 85319702, "body": "the two codes that you sample do not resemble at all"}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1520442240, "post_id": 49157416, "comment_id": 85319742, "body": "where did you find that Qt example?"}, {"owner": {"reputation": 833, "user_id": 8047760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4420b0b735bf473e56fb2996ae53d39?s=128&d=identicon&r=PG&f=1", "display_name": "Christian G", "link": "https://stackoverflow.com/users/8047760/christian-g"}, "edited": false, "score": 0, "creation_date": 1520442290, "post_id": 49157416, "comment_id": 85319778, "body": "Qt does not call the MainWindow constructor of your class but rather the MainWindow class that was created by the moc (as you can see by the Ui namespace)"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1520442354, "post_id": 49157416, "comment_id": 85319815, "body": "<code>Ui::MainWindow</code> is different to <code>MainWindow</code>!!!!"}, {"owner": {"reputation": 833, "user_id": 8047760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4420b0b735bf473e56fb2996ae53d39?s=128&d=identicon&r=PG&f=1", "display_name": "Christian G", "link": "https://stackoverflow.com/users/8047760/christian-g"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1520442407, "post_id": 49157416, "comment_id": 85319842, "body": "@eyllanesc There is no inheritance, those are two different MainWindow classes."}, {"owner": {"reputation": 833, "user_id": 8047760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4420b0b735bf473e56fb2996ae53d39?s=128&d=identicon&r=PG&f=1", "display_name": "Christian G", "link": "https://stackoverflow.com/users/8047760/christian-g"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1520442765, "post_id": 49157416, "comment_id": 85320067, "body": "@eyllanesc The point I was trying to make was that the inheritance is irrelevant to the fact that thhis does not stackoverflow - even if MainWindow had QMainWindow simply as a member instead of inheriting"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1520444750, "post_id": 49157416, "comment_id": 85321244, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4847110/a-newbie-question-in-qt\">A newbie question in Qt</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520444920, "post_id": 49157416, "comment_id": 85321348, "body": "Unrelated: If you have not already, read <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>"}, {"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1520445064, "post_id": 49157416, "comment_id": 85321443, "body": "<b>Also</b> a duplicate of <a href=\"https://stackoverflow.com/questions/28016303/is-mainwindow-initialized-with-itself-in-qt5\">Is MainWindow initialized with itself in qt5</a>"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1520442204, "creation_date": 1520442204, "answer_id": 49157490, "question_id": 49157416, "link": "https://stackoverflow.com/questions/49157416/recursive-constructor-causing-a-crash/49157490#49157490", "title": "recursive constructor causing a crash?", "body": "<blockquote>\n  <p>but if this was the case shouldn't hey be printed to the console?</p>\n</blockquote>\n\n<p>Nope.  When you construct a class the class member initialization list happens first.  That means</p>\n\n<pre><code>ss(new Sample)\n</code></pre>\n\n<p>happens before you even enter the body of the constructor.  Since that line creates a new <code>Sample</code> you initialize that <code>Sample</code> which creates another new <code>Sample</code> and this process will happen forever until the OS stops you or the process crashes</p>\n"}, {"tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": false, "score": 4, "last_activity_date": 1520459134, "last_edit_date": 1520459134, "creation_date": 1520449468, "answer_id": 49159456, "question_id": 49157416, "link": "https://stackoverflow.com/questions/49157416/recursive-constructor-causing-a-crash/49159456#49159456", "title": "recursive constructor causing a crash?", "body": "<blockquote>\n  <p>but when I do pretty much the same thing with my own code everytime\n  the program crashes</p>\n</blockquote>\n\n<p>It is not \"pretty much the same\" - in appearance - somewhat, yet looks can be deceiving when you don't pay attention to the details, but functionally it is far from it.</p>\n\n<p>Your code is a class that infinitely creates itself, each new instance of the class creates another instance, that instance creates another and so on until you hit some (runtime, operating system or hardware) limit and your application crashes. Your code never reaches the \"hi\" part for even the first object created.</p>\n\n<p>This has nothing to do with the Qt example code. In that code, the class doesn't create a new instance of itself in the constructor. It creates a different class that was generated from a UI form. Although the class name is the same, it is <strong>not</strong> the same class, as it exists in the <code>Ui</code> namespace. The classes are named the same because they are complimentary, they don't have to be but that's what Qt does when it generates code for you. And it makes sense, since it makes it clear which widget class corresponds to which form class.</p>\n\n<p><code>MainWindow</code> and <code>Ui::MainWindow</code> are <strong>not the same</strong> classes, which is why it makes sense and actually works.</p>\n\n<p>Note that C++ won't even let you have an instance of the class inside the same class, neither directly nor through indirect inheritance or aggregation, that's a default no-no as the infinite recursion is obvious to the compiler, however deeply it may be nested. But having a pointer is OK, because the pointer is basically just a reference to another object which is OK and frequently used, and you must assume the responsibility to make sure that even if it creates another object of the same type rather than simply reference a pre-existing object, you limit that behavior so that it doesn't run into infinite recursion.</p>\n\n<pre><code>struct RTest {\n    RTest(int &amp; d) {\n      qDebug() &lt;&lt; \"hi\" &lt;&lt; d;\n      t = d++ &lt; 10 ? new RTest(d) : nullptr;\n    }\n    RTest * t;\n};\n</code></pre>\n\n<p>In this case the recursion is limited to a depth of 10. Note that if you do the pointer initialization in the initializer list, you won't get <code>hi</code> from 0 to 10, but only <code>hi 11</code>s as the body of the constructor of the first object will not be reached until the recursion is finished, which is why you never get your code to your <code>hi</code>.</p>\n"}], "owner": {"reputation": 49, "user_id": 9421071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a5ad4b716c052f244672f7dd2672be?s=128&d=identicon&r=PG&f=1", "display_name": "strikeforcefan2013", "link": "https://stackoverflow.com/users/9421071/strikeforcefan2013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1520459134, "creation_date": 1520441949, "last_edit_date": 1520449537, "question_id": 49157416, "link": "https://stackoverflow.com/questions/49157416/recursive-constructor-causing-a-crash", "title": "recursive constructor causing a crash?", "body": "<p>so I'm at the point where I think I'm comfortable enough to start trying some frameworks/apis so I am thinking of learning the qt framework so I can start developing some simple gui applications,</p>\n\n<p>anyway I noticed one strange thing in the qt MainWindow.cpp file</p>\n\n<pre><code>  MainWindow::MainWindow(QWidget *parent) :  \n    QMainWindow(parent),  \n    ui(new Ui::MainWindow)  \n{  \n    ui-&gt;setupUi(this);  \n}\n</code></pre>\n\n<p>so I understand that ui is a pointer and we allocate a new MainWindow object to that pointer </p>\n\n<p>but when I do pretty much the same thing with my own code everytime the program crashes</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n\n    class Sample{\n\n     public:\n         Sample* ss; [c++]\n         string text = \"hey ya\";\n         explicit Sample()\n         :ss(new Sample){\n\n           cout &lt;&lt; \"hi\" &lt;&lt; endl; // doesn't print hi?\n         }\n\n         void print(){\n            cout &lt;&lt; ss-&gt;text &lt;&lt; endl;\n         }\n\n         ~Sample(){\n\n           delete ss;\n         }\n    };\n\n    int main()\n    {\n        cout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\n        Sample s;\n        return 0;\n    }\n</code></pre>\n\n<p>at first I thought the crash was because of an infinite recursion each constructor will keep calling a new Sample</p>\n\n<p>but if this was the case shouldn't hey be printed to the console?</p>\n\n<p>also how come this code works in qt yet mine won't work,I mean it's pretty much doing the same thing,</p>\n\n<p>note that in the qt MainWindow header the constructor is mark explicit if that makes any difference,I tried marking my constructor in my Sample class as explicit but still crashes</p>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "dictionary", "vector", "memoization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1520441634, "post_id": 49157278, "comment_id": 85319303, "body": "Your vector isn&#39;t static.  That makes it behave completely different."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 4, "last_activity_date": 1520442041, "creation_date": 1520442041, "answer_id": 49157437, "question_id": 49157278, "link": "https://stackoverflow.com/questions/49157278/c-memoization-fibonacci-function-map-verus-vector-container-execution-time/49157437#49157437", "title": "C++ memoization - Fibonacci function - map verus vector container execution time", "body": "<p>In this code:</p>\n\n<pre><code>int fibonacci_fast_vector(int n)\n{\n    vector &lt;int&gt; cache;\n</code></pre>\n\n<p>your vector is not static so you create a new vector on every function call, so your \"memoization\" not only fails to work but actually makes it slower.</p>\n\n<p>Btw this code:</p>\n\n<pre><code>if(memo.count(n)&gt;0) { /*if it is in the map return the element*/\n    return memo[n];\n}\n</code></pre>\n\n<p>is unnecessary inefficient - you are doing 2 lookups in case data is there or 2 lookups if it is not, which is significantly expensive operation on a map. You should use something like this:</p>\n\n<pre><code>auto p = memo.emplace(n,0);\nif( p.second ) // data was not there\n    p.first-&gt;second = fibonacci_fast_map(n-1)+fibonacci_fast_map(n-2);\n\nreturn p.first-&gt;second;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "is_accepted": true, "score": 0, "last_activity_date": 1520442583, "creation_date": 1520442583, "answer_id": 49157591, "question_id": 49157278, "link": "https://stackoverflow.com/questions/49157278/c-memoization-fibonacci-function-map-verus-vector-container-execution-time/49157591#49157591", "title": "C++ memoization - Fibonacci function - map verus vector container execution time", "body": "<p>I guess the problem is that your vector is not static. Put a static keyword or declare it in the global scope. This will reduce the huge performance time because you avoid many <code>news</code> and <code>deletes</code>. Also you can create with some initial size vector if you know the probable size for the same performance reason.</p>\n"}], "owner": {"reputation": 333, "user_id": 8958611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a0b1882d7bb486182b3f7af1c1eac23?s=128&d=identicon&r=PG&f=1", "display_name": "samsung gather", "link": "https://stackoverflow.com/users/8958611/samsung-gather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 0, "accepted_answer_id": 49157591, "answer_count": 2, "score": -1, "last_activity_date": 1520442583, "creation_date": 1520441547, "last_edit_date": 1520442564, "question_id": 49157278, "link": "https://stackoverflow.com/questions/49157278/c-memoization-fibonacci-function-map-verus-vector-container-execution-time", "title": "C++ memoization - Fibonacci function - map verus vector container execution time", "body": "<p>I'm trying to learn memoization in C++ and have implemented two Fibonacci functions using <code>map</code> and <code>vector</code>. I've submitted them to the Coursera data structures course. The <code>vector</code> implementation fails due to taking too much time and the <code>map</code> passes OK. As both implement memoization could anybody suggest why one fails and the other passes? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;iterator&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint fibonacci_fast_vector(int n)\n{\n    vector &lt;int&gt; cache;\n\n    if(n&lt;=1) {\n        return n;\n    }\n    else if ((unsigned)n &gt;= cache.size()) {\n            cache.resize(n+1);\n        }\n\n    if(cache[n] != 0) {\n        return cache[n];\n    }\n\n    // otherwise\n    int ret=fibonacci_fast_vector(n-1)+fibonacci_fast_vector(n-2);\n    cache[n]=ret;\n    return ret;\n}\n\n\nint fibonacci_fast_map(int n)\n{\n    static map&lt;int,int&gt;memo;\n\n    if(n&lt;=1)\n        return n;\n\n    if(memo.count(n)&gt;0) { /*if it is in the map return the element*/\n        return memo[n];\n    }\n\n    // otherwise\n    int ret=fibonacci_fast_map(n-1)+fibonacci_fast_map(n-2);\n    memo[n]=ret;\n    return ret;\n}\n\nint main() {\n    int n = 0;\n    std::cin &gt;&gt; n;\n\n    std::cout &lt;&lt; fibonacci_fast_map(n) &lt;&lt; '\\n';\n    std::cout &lt;&lt; fibonacci_fast_vector(n) &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1520441219, "post_id": 49157138, "comment_id": 85319041, "body": "That&#39;s too much code. Please condense it down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 4, "creation_date": 1520441280, "post_id": 49157138, "comment_id": 85319087, "body": "I&#39;m guessing you need something like <code>quad *bodyQuad = new quad(bodyTri1, bodyTri2);</code>. Taking the address of a temporary is not going to work."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520441312, "post_id": 49157138, "comment_id": 85319102, "body": "<code>&amp;quad(bodyTri1, bodyTri2);</code> creates a new temporary variable; gets the pointer to it; then destroys the temporary."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1520441381, "post_id": 49157138, "comment_id": 85319143, "body": "The error message does not match the error.  <code>quad *bodyQuad = &amp;quad(bodyTri1, bodyTri2);</code> should say that the addressof operator(<code>&amp;</code>) cannot be called on an rvalue."}, {"owner": {"reputation": 1, "user_id": 7239948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202011119862692/picture?type=large", "display_name": "Chandler Thompson", "link": "https://stackoverflow.com/users/7239948/chandler-thompson"}, "edited": false, "score": 0, "creation_date": 1520452222, "post_id": 49157138, "comment_id": 85325592, "body": "changing to <code>new quad</code> from <code>&amp;quad</code> doesn&#39;t fix my current issue, but thank you for pointing out a potential future issue I would have had!"}, {"owner": {"reputation": 1, "user_id": 7239948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202011119862692/picture?type=large", "display_name": "Chandler Thompson", "link": "https://stackoverflow.com/users/7239948/chandler-thompson"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1520452946, "post_id": 49157138, "comment_id": 85325967, "body": "@RSahu it has been condensed, thank you"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1520453375, "post_id": 49157138, "comment_id": 85326188, "body": "you get the same error with the <code>new quad</code> fix?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1520453701, "post_id": 49157138, "comment_id": 85326366, "body": "@ChandlerThompson, it is condensed but it is not complete. Unless I can copy and paste the code in my setup and compile it, I don&#39;t think I can be of much help."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1520454316, "post_id": 49157138, "comment_id": 85326686, "body": "Are you sure the error doesn&#39;t stem from the line <code>bodyTri2 = *bodyTri2.applyTransform(mat3::translation2D(5, 1));</code>? Hard to tell since you haven&#39;t included the declaration"}, {"owner": {"reputation": 1, "user_id": 7239948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202011119862692/picture?type=large", "display_name": "Chandler Thompson", "link": "https://stackoverflow.com/users/7239948/chandler-thompson"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1520455649, "post_id": 49157138, "comment_id": 85327394, "body": "@pm100 correct @UnholySheep visual studio points the error as happening on the <code>quad</code> line, but I will include the code from <code>applyTransform()</code> for you to look at. @RSahu I&#39;ll see what I can do to simplify the project down to something more manageably testable"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7239948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202011119862692/picture?type=large", "display_name": "Chandler Thompson", "link": "https://stackoverflow.com/users/7239948/chandler-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1520456679, "creation_date": 1520456679, "answer_id": 49161170, "question_id": 49157138, "link": "https://stackoverflow.com/questions/49157138/list-iterator-not-dereferencable-on-creation-of-object/49161170#49161170", "title": "&quot;list iterator not dereferencable&quot; on creation of object", "body": "<p>My problem was that my <code>applyTransform()</code> was returning a <code>shape</code> pointer, but in my return statement I was simply dereferencing <code>&amp;</code> a temp variable used in <code>applyTransform()</code> instead of using the <code>new</code> keyword.</p>\n\n<p>Thank you to everyone who helped.</p>\n"}], "owner": {"reputation": 1, "user_id": 7239948, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202011119862692/picture?type=large", "display_name": "Chandler Thompson", "link": "https://stackoverflow.com/users/7239948/chandler-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520456679, "creation_date": 1520441139, "last_edit_date": 1520452891, "question_id": 49157138, "link": "https://stackoverflow.com/questions/49157138/list-iterator-not-dereferencable-on-creation-of-object", "title": "&quot;list iterator not dereferencable&quot; on creation of object", "body": "<p>I'm creating a computer graphics project using C++ and QT in visual studio.</p>\n\n<p>The line I'm getting this error on is</p>\n\n<pre><code>quad *bodyQuad = &amp;quad(bodyTri1, bodyTri2);\n</code></pre>\n\n<p>in the following method:</p>\n\n<pre><code>void MyGLWidget::createCharacter1(tree *t, node *root) {\n    triangle bodyTri1 = triangle(vec3(4, 0, 0), vec3(-1, 1, 0));\n    triangle bodyTri2 = triangle(vec3(-6, 0, 0), vec3(-1, -1, 0));\n    bodyTri2 = *bodyTri2.applyTransform(mat3::translation2D(5, 1));\n    quad *bodyQuad = &amp;quad(bodyTri1, bodyTri2);\n    root = new node(bodyQuad, 2);\n}\n</code></pre>\n\n<p><code>triangle</code> and <code>quad</code> are both derived from a virtual <code>shape</code> class. The <code>shape</code> class has a <code>std::list</code> in it for storing vertices.</p>\n\n<p><code>node</code> also has an <code>std::list</code> for storing its children. </p>\n\n<p>In the constructor of both <code>triangle</code> and <code>quad</code> the vertices are added to the list</p>\n\n<h1>triangle's constructor</h1>\n\n<pre><code>triangle::triangle(const vec3&amp; vector1, const vec3&amp; vector2) {\n    numTriangles = 1;\n    isOneColor = true;\n    vec3 origin = vec3(0, 0, 1);// '1' to signify a point\n    data = mat3(vector1, vector2, origin);\n    data = data.transpose();\n\n    //push \"origin\" vertex\n    vertices.push_back(data[2]);\n    //make sure point/vector convention followed, and push \"base\" vertex\n    vertices.push_back(data[0] + vec3(0, 0, 1));\n    //make sure point/vector convention followed, and push \"height\" vertex\n    vertices.push_back(data[1] + vec3(0, 0, 1));\n\n}\n</code></pre>\n\n<h1>quad's constructor</h1>\n\n<pre><code>quad::quad(triangle triangle1, triangle triangle2) {\n\n    numTriangles = 2;\n    isOneColor = true;\n\n    data[0] = triangle1;\n    data[1] = triangle2;\n\n    std::list&lt;vec3&gt; tri1Vertices = data[0].getVertices();\n    std::list&lt;vec3&gt; tri2Vertices = data[1].getVertices();\n\n    for (size_t i = 0; i &lt; tri1Vertices.size(); i++) {\n        vertices.push_back(tri1Vertices.front());\n        tri1Vertices.pop_front();\n    }\n\n    for (size_t i = 0; i &lt; tri2Vertices.size(); i++) {\n        vertices.push_back(tri2Vertices.front());\n        tri2Vertices.pop_front();\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "database", "postgresql", "libpq"], "answers": [{"tags": [], "owner": {"reputation": 874, "user_id": 6524134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582660ba292a4204b267476ed318bfc6?s=128&d=identicon&r=PG&f=1", "display_name": "toozyfuzzy", "link": "https://stackoverflow.com/users/6524134/toozyfuzzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1520445442, "last_edit_date": 1520445442, "creation_date": 1520439949, "answer_id": 49156763, "question_id": 49156762, "link": "https://stackoverflow.com/questions/49156762/how-to-insert-text-array-in-postgresql-table-in-binary-format-using-libpq/49156763#49156763", "title": "How to insert text array in PostgreSQL table in binary format using libpq?", "body": "<p>Everything described bellow is tested on PostgreSQL 9.5.</p>\n\n<p>PQexecParams has the following prototype:</p>\n\n<pre><code>PGresult *PQexecParams(PGconn *conn,\n                       const char *command,\n                       int nParams,\n                       const Oid *paramTypes,\n                       const char * const *paramValues,\n                       const int *paramLengths,\n                       const int *paramFormats,\n                       int resultFormat);\n</code></pre>\n\n<p><a href=\"https://www.postgresql.org/docs/current/static/libpq-exec.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/static/libpq-exec.html</a></p>\n\n<p><code>Oid</code> for text array and other types can be found in </p>\n\n<blockquote>\n  <p>/postgresql_sources_folder/src/include/catalog/pg_type.h</p>\n</blockquote>\n\n<p>In our case we need 2 of them:</p>\n\n<pre><code>#define TEXTARRAYOID        1009\n#define TEXTOID         25\n</code></pre>\n\n<p>The exact format of external PostgreSQL binary arrays can be deduced from function:</p>\n\n<pre><code>Datum array_send(PG_FUNCTION_ARGS);\n</code></pre>\n\n<p>Defined here:</p>\n\n<blockquote>\n  <p>/postgresql_sources_folder/src/backend/utils/adt/arrayfuncs.c</p>\n</blockquote>\n\n<p>I describe format in structure:</p>\n\n<pre><code>struct pgValsT {\n  /* number of array dimensions */\n  int32_t ndims;\n\n  /* flag describing if array has NULL values */\n  int32_t hasNull;\n\n  /* Oid of data stored in array. In our case is 25 for TEXT */\n  Oid oidType;\n\n  /* Number of elements in array */\n  int32_t totalLen;\n\n  /* Not sure for this one. \n     I think it describes dimensions of elements in case of arrays storing arrays */\n  int32_t subDims;\n\n  /* Here our data begins */\n  char dataBegin[];\n}__attribute__ ((__packed__));\n</code></pre>\n\n<p>Array elements are stored as structures:</p>\n\n<pre><code>struct varlena\n{\n  /* -1 if data = NULL */\n  int32_t vl_len;\n\n  /* our data */\n  char vl_dat[];\n}__attribute__ ((__packed__));\n</code></pre>\n\n<p>Same can be applied for retrieving arrays in binary format.</p>\n\n<p>Full example for insertion text array in binary format to table described in question:</p>\n\n<pre><code>#include &lt;postgresql/libpq-fe.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n\n#define TEXTOID         25\n#define TEXTARRAYOID        1009\n\n\nint main(){\n\n  PGconn* conn = PQsetdbLogin(\"localhost\", \"5432\",\n                 nullptr, nullptr, \"my_database\", \"my_user\",\n                  \"my_password\");\n\n  PGresult* res = NULL;\n\n  /* our strings to pass as array. Sizes should exclude terminating '\\0' \n     and be presented in network byte order */\n\n  const char aStr1[] = \"Stackoverflow\";\n  uint32_t pgSizeStr1 = ntohl(sizeof(aStr1) - 1);\n\n  const char aStr2[] = \"is\";\n  uint32_t pgSizeStr2 = ntohl(sizeof(aStr2) - 1);\n\n  const char aStr3[] = \"awesome!\";\n  uint32_t pgSizeStr3 = ntohl(sizeof(aStr3) - 1);\n\n  /* number of parameters for PQexecParams. We need 1 for sending 1 text array */\n  int nParams = 1;\n\n  /* number of elements in array */\n  int nElems = 3;\n\n  /* our type is text array */\n  Oid paramTypes[] = { TEXTARRAYOID };\n\n  /* Allocating memory for our pgValsT structure + our data. Don't allocate memory for '\\0' at the end of a string */\n\n  uint32_t dataSize = sizeof(pgValsT) + sizeof(int32_t) * nElems + sizeof(aStr1) + sizeof(aStr2) + sizeof(aStr3) - nElems;\n  void* vData = malloc(dataSize);\n\n  pgValsT* pDataStruct = (pgValsT*)vData;\n\n  /* setting up pointer to data to send to PostgreSQL */\n  char* paramValues[] = { (char*)vData };\n\n  /* setting up our element size */\n  int paramLengths[] = { dataSize };\n\n  /* setting binary format for our data */\n  int paramFormats[] = { 1 };\n\n  /* our array has one dimension */\n  pDataStruct-&gt;ndims = ntohl(1);\n\n  /* our array has no NULL elements */\n  pDataStruct-&gt;hasNull = ntohl(0);\n\n  /* type of our elements is text */\n  pDataStruct-&gt;oidType = ntohl(TEXTOID);\n\n  /* our array has 3 elements */\n  pDataStruct-&gt;totalLen = ntohl(nElems);\n\n  pDataStruct-&gt;subDims = ntohl(1);\n\n\n  /* copy our strings and sizes to data structure excluding terminating '\\0' */\n  size_t byteOffset = 0;\n  memcpy(pDataStruct-&gt;dataBegin, &amp;pgSizeStr1, sizeof(pgSizeStr1));\n  memcpy(pDataStruct-&gt;dataBegin + sizeof(pgSizeStr1), aStr1, sizeof(aStr1) - 1);\n  byteOffset += sizeof(pgSizeStr1) + sizeof(aStr1) - 1;\n\n  memcpy(pDataStruct-&gt;dataBegin + byteOffset, &amp;pgSizeStr2, sizeof(pgSizeStr2));\n  memcpy(pDataStruct-&gt;dataBegin + byteOffset + sizeof(pgSizeStr2), aStr2, sizeof(aStr2) - 1);\n  byteOffset += sizeof(pgSizeStr2) + sizeof(aStr2) - 1;\n\n\n  memcpy(pDataStruct-&gt;dataBegin + byteOffset, &amp;pgSizeStr3, sizeof(pgSizeStr3));\n  memcpy(pDataStruct-&gt;dataBegin + byteOffset + sizeof(pgSizeStr3), aStr3, sizeof(aStr3) - 1);\n\n  /* executing query */\n  res = PQexecParams(conn, \"INSERT INTO test_array (array_column) values ($1)\", 1, paramTypes, paramValues, paramLengths, paramFormats, 1);\n\n  PQfinish(conn);\n  PQclear(res);\n  free(vData);\n}\n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 6524134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582660ba292a4204b267476ed318bfc6?s=128&d=identicon&r=PG&f=1", "display_name": "toozyfuzzy", "link": "https://stackoverflow.com/users/6524134/toozyfuzzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 743, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520458611, "creation_date": 1520439949, "last_edit_date": 1520458611, "question_id": 49156762, "link": "https://stackoverflow.com/questions/49156762/how-to-insert-text-array-in-postgresql-table-in-binary-format-using-libpq", "title": "How to insert text array in PostgreSQL table in binary format using libpq?", "body": "<p>I didn't find any documentation describing how to work with binary arrays in PostgreSQL using libpq.\nSo you have table:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS test_array ( array_column text[] )\n</code></pre>\n\n<p>You want to insert array in binary format using <code>PQexecParams</code>\nHow exactly one does this?</p>\n"}, {"tags": ["c++", "mouseevent", "sdl-2"], "comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 1, "creation_date": 1520439872, "post_id": 49156633, "comment_id": 85318155, "body": "please post a minimal example of your problem."}, {"owner": {"reputation": 539, "user_id": 8666851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7676d687d1d340a61a3662f48b617be?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Severinsen", "link": "https://stackoverflow.com/users/8666851/edward-severinsen"}, "reply_to_user": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 0, "creation_date": 1520440084, "post_id": 49156633, "comment_id": 85318288, "body": "@Aram I added an example."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 4, "creation_date": 1520440127, "post_id": 49156633, "comment_id": 85318318, "body": "<code>SDL_PollEvent</code> has a return value. That might prove to be <b>very</b> useful."}, {"owner": {"reputation": 539, "user_id": 8666851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7676d687d1d340a61a3662f48b617be?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Severinsen", "link": "https://stackoverflow.com/users/8666851/edward-severinsen"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1520440848, "post_id": 49156633, "comment_id": 85318793, "body": "@IInspectable Wow, that&#39;s embarrassing... that&#39;s what I get for not reading documentation thoroughly. It fixed my problem, if you turn it into an answer I will accept it. Thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1520515180, "post_id": 49157026, "comment_id": 85353084, "body": "Explanation is wrong. The OP is certainly retrieving all pending events. The real issue is, that they aren&#39;t checking, whether there are any <b>new</b> events (by way of checking the return value), thus repeatedly handling the same event over and over again, until a new one arrives."}], "tags": [], "owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "is_accepted": true, "score": 0, "last_activity_date": 1520524843, "last_edit_date": 1520524843, "creation_date": 1520440801, "answer_id": 49157026, "question_id": 49156633, "link": "https://stackoverflow.com/questions/49156633/sdl-mousebuttonup-occurring-even-before-releasing-mouse-button/49157026#49157026", "title": "SDL_MOUSEBUTTONUP occurring even before releasing mouse button?", "body": "<p>EDIT: My answer is wrong, check IInspectable's answer.</p>\n\n<p>Your error is that you're not checking all the pending events given by pollEvent, just one. Try this code and tell me how many button ups you get.</p>\n\n<pre><code>#include &lt;SDL2/SDL.h&gt;\n#include &lt;iostream&gt;\n\n\nint main(int argc, char *argv[]) {\n    if(SDL_Init(SDL_INIT_VIDEO) != 0) {\n        throw std::runtime_error(\"SDL failed to initialize.\\n\");\n    }\n\n    SDL_Window *window = SDL_CreateWindow(\"App\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 640, 480, NULL);\n\n    bool done = false;\n\n    while(!done) {\n        SDL_Event event;\n\n        while(SDL_PollEvent(&amp;event)) {\n            if(event.type == SDL_QUIT) {\n                done = true;\n            }\n\n            if (event.type == SDL_MOUSEBUTTONUP) {\n                if (event.button.state == SDL_RELEASED) {\n                    printf(\"Mouse released\\n\");\n                }\n            }\n        }\n    }\n\n    SDL_DestroyWindow(window);\n\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": false, "score": 1, "last_activity_date": 1520515602, "creation_date": 1520515602, "answer_id": 49174226, "question_id": 49156633, "link": "https://stackoverflow.com/questions/49156633/sdl-mousebuttonup-occurring-even-before-releasing-mouse-button/49174226#49174226", "title": "SDL_MOUSEBUTTONUP occurring even before releasing mouse button?", "body": "<p><a href=\"https://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlpollevent.html\" rel=\"nofollow noreferrer\">SDL_PollEvent</a> has a return value, you are ignoring.</p>\n\n<blockquote>\n  <p>[It] returns 1 if there are any pending events, or 0 if there are none available.</p>\n</blockquote>\n\n<p>Given your code logic, whenever there is no pending event, you keep handling the previous event over and over again, until a new event arrives. This leads to the observed behavior.</p>\n\n<p>The easiest fix would be to wrap the entire event handling inside an <code>if (SDL_PollEvent(&amp;event)) { /* Event handling */ }</code> conditional.</p>\n"}], "owner": {"reputation": 539, "user_id": 8666851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7676d687d1d340a61a3662f48b617be?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Severinsen", "link": "https://stackoverflow.com/users/8666851/edward-severinsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 49157026, "answer_count": 2, "score": 0, "last_activity_date": 1520524843, "creation_date": 1520439545, "last_edit_date": 1520440050, "question_id": 49156633, "link": "https://stackoverflow.com/questions/49156633/sdl-mousebuttonup-occurring-even-before-releasing-mouse-button", "title": "SDL_MOUSEBUTTONUP occurring even before releasing mouse button?", "body": "<p>I'm trying to make a video player using SDL and ffmpeg in C++. I've created two separate threads, one that renders the video on the SDL window and one that handles window events. When the user clicks and releases on the video I want it to toggle playback/pause. However, it fires multiple times and the event occurs even before I release the mouse which results in unpredictable behavior.</p>\n\n<p>My code:</p>\n\n<pre><code>SDL_Event event;\n\n    while (1)\n    {\n        SDL_PollEvent(&amp;event);\n\n        switch (event.type)\n        {\n            case SDL_QUIT:\n                SDL_DestroyWindow(screen);\n                SDL_Quit();\n                break;\n            case SDL_MOUSEBUTTONUP:\n                if (event.button.state == SDL_RELEASED)\n                {\n                    printf(\"Mouse released\\n\");\n                }\n                break;\n        }\n    }\n</code></pre>\n\n<p>When I click the window and hold down I would expect it wouldn't print <code>Mouse released</code> until I release the button. However, it prints <code>Mouse released</code> the entire time I hold down the mouse button. I don't know if maybe this has to do with me using a touchpad on my laptop.</p>\n"}, {"tags": ["c++", "proj"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1520439694, "post_id": 49156603, "comment_id": 85318030, "body": "consider installing git in a path without braces or remove the git bin path from your <code>PATH</code> environment variable while you&#39;re using mingw"}, {"owner": {"reputation": 13, "user_id": 9363600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aOipF.jpg?s=128&g=1", "display_name": "SYG", "link": "https://stackoverflow.com/users/9363600/syg"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1520446520, "post_id": 49156603, "comment_id": 85322283, "body": "Ok I removed git path and it&#39;s working ! Can you move your comment as Answer ?"}], "answers": [{"tags": [], "owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "is_accepted": true, "score": 0, "last_activity_date": 1520496628, "creation_date": 1520496628, "answer_id": 49168288, "question_id": 49156603, "link": "https://stackoverflow.com/questions/49156603/compiling-proj-4-9-3-on-windows-7/49168288#49168288", "title": "Compiling proj-4.9.3 on windows 7", "body": "<p>It looks like your \"Git for Windows\" installation is clashing with your MinGW environment. So I would suggest to remove the PATH variable entry for the Git installation at least inside the MinGW environment.</p>\n"}], "owner": {"reputation": 13, "user_id": 9363600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aOipF.jpg?s=128&g=1", "display_name": "SYG", "link": "https://stackoverflow.com/users/9363600/syg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 49168288, "answer_count": 1, "score": 0, "last_activity_date": 1520496628, "creation_date": 1520439457, "question_id": 49156603, "link": "https://stackoverflow.com/questions/49156603/compiling-proj-4-9-3-on-windows-7", "title": "Compiling proj-4.9.3 on windows 7", "body": "<p>I have some troubles in compiling proj-4.9.3 with mingw530_32 :</p>\n\n<p>First like in this site : <a href=\"http://www.gaia-gis.it/spatialite-2.4.0-4/mingw_how_to.html#libproj\" rel=\"nofollow noreferrer\">http://www.gaia-gis.it/spatialite-2.4.0-4/mingw_how_to.html#libproj</a><br>\nI run :</p>\n\n<pre><code>./configure --without-mutex\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /usr/bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... no\nchecking for style of include used by make... GNU\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.exe\nchecking for suffix of executables... .exe\nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ISO C89... none needed\nchecking whether gcc understands -c and -o together... yes\nchecking dependency style of gcc... gcc3\nchecking C_WFLAGS for maximum warnings... -Wall -Wdeclaration-after-statement\nchecking for gcc... (cached) gcc\nchecking whether we are using the GNU C compiler... (cached) yes\nchecking whether gcc accepts -g... (cached) yes\nchecking for gcc option to accept ISO C89... (cached) none needed\nchecking whether gcc understands -c and -o together... (cached) yes\nchecking dependency style of gcc... (cached) gcc3\nchecking whether ln -s works... no, using cp -pR\nchecking whether make sets $(MAKE)... (cached) yes\nchecking build system type... i686-pc-mingw32\nchecking host system type... i686-pc-mingw32\nchecking how to print strings... printf\nchecking for a sed that does not truncate output... /usr/bin/sed\nchecking for grep that handles long lines and -e... /usr/bin/grep\nchecking for egrep... /usr/bin/grep -E\nchecking for fgrep... /usr/bin/grep -F\nchecking for ld used by gcc... C:/Qt/Tools/mingw530_32/i686-w64-mingw32/bin/ld.exe\nchecking if the linker (C:/Qt/Tools/mingw530_32/i686-w64-mingw32/bin/ld.exe) is GNU ld... yes\nchecking for BSD- or MS-compatible name lister (nm)... /c/Qt/Tools/mingw530_32/bin/nm -B\nchecking the name lister (/c/Qt/Tools/mingw530_32/bin/nm -B) interface... BSD nm\nchecking the maximum length of command line arguments... 8192\nchecking how to convert i686-pc-mingw32 file names to i686-pc-mingw32 format... func_convert_file_msys_to_w32\nchecking how to convert i686-pc-mingw32 file names to toolchain format... func_convert_file_msys_to_w32\nchecking for C:/Qt/Tools/mingw530_32/i686-w64-mingw32/bin/ld.exe option to reload object files... -r\nchecking for objdump... objdump\nchecking how to recognize dependent libraries... file_magic ^x86 archive import|^x86 DLL\nchecking for dlltool... dlltool\nchecking how to associate runtime and link libraries... func_cygming_dll_for_implib\nchecking for ar... ar\nchecking for archiver @FILE support... @\nchecking for strip... strip\nchecking for ranlib... ranlib\nchecking command to parse /c/Qt/Tools/mingw530_32/bin/nm -B output from gcc object... ok\nchecking for sysroot... no\nchecking for a working dd... /usr/bin/dd\nchecking how to truncate binary pipes... /usr/bin/dd bs=4096 count=1\nchecking for mt... no\nchecking if : is a manifest tool... no\nchecking how to run the C preprocessor... gcc -E\nchecking for ANSI C header files... yes\nchecking for sys/types.h... yes\nchecking for sys/stat.h... yes\nchecking for stdlib.h... yes\nchecking for string.h... yes\nchecking for memory.h... yes\nchecking for strings.h... yes\nchecking for inttypes.h... yes\nchecking for stdint.h... yes\nchecking for unistd.h... yes\nchecking for dlfcn.h... no\nchecking for objdir... .libs\nchecking if gcc supports -fno-rtti -fno-exceptions... no\nchecking for gcc option to produce PIC... -DDLL_EXPORT -DPIC\nchecking if gcc PIC flag -DDLL_EXPORT -DPIC works... yes\nchecking if gcc static flag -static works... yes\nchecking if gcc supports -c -o file.o... yes\nchecking if gcc supports -c -o file.o... (cached) yes\nchecking whether the gcc linker (C:/Qt/Tools/mingw530_32/i686-w64-mingw32/bin/ld.exe) supports shared libraries... yes\nchecking whether -lc should be explicitly linked in... yes\nchecking dynamic linker characteristics... Win32 ld.exe\nchecking how to hardcode library paths into programs... immediate\nchecking whether stripping libraries is possible... yes\nchecking if libtool supports shared libraries... yes\nchecking whether to build shared libraries... yes\nchecking whether to build static libraries... yes\nchecking for exp in -lm... yes\nchecking for ANSI C header files... (cached) yes\nchecking for localeconv... yes\nchecking jni.h usability... no\nchecking jni.h presence... no\nchecking for jni.h... no\nchecking whether to enable Java/JNI support... disabled\nchecking for mutexes... disabled by user\nchecking that generated files are newer than configure... done\nconfigure: creating ./config.status\nconfig.status: creating Makefile\nconfig.status: creating cmake/Makefile\nconfig.status: creating src/Makefile\nconfig.status: creating man/Makefile\nconfig.status: creating man/man1/Makefile\nconfig.status: creating man/man3/Makefile\nconfig.status: creating nad/Makefile\nconfig.status: creating jniwrap/Makefile\nconfig.status: creating jniwrap/org/Makefile\nconfig.status: creating jniwrap/org/proj4/Makefile\nconfig.status: creating nad/install\nconfig.status: creating proj.pc\nconfig.status: creating src/proj_config.h\nconfig.status: src/proj_config.h is unchanged\nconfig.status: executing depfiles commands\nconfig.status: executing libtool commands\n</code></pre>\n\n<p>It's seems to be ok,<br>\nThen :</p>\n\n<pre><code> $ make\nMaking all in src\nmake[1]: Entering directory 'D:/01_soft/proj-4.9.3/src'\nC:/Qt/Tools/mingw530_32/bin/make  all-am\nmake[2]: Entering directory 'D:/01_soft/proj-4.9.3/src'\nC:/Program Files (x86)/Git/usr/bin/sh.exe ../libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -DPROJ_LIB=\\\"/usr/local/share/proj\\\" -DMUTEX_stub   -Wall -Wdeclaration-after-statement -g -O2 -MT PJ_aeqd.lo -MD -MP -MF .deps/PJ_aeqd.Tpo -c -o PJ_aeqd.lo PJ_aeqd.c\n/usr/bin/sh: -c: line 0: syntax error near unexpected token `('\n/usr/bin/sh: -c: line 0: `C:/Program Files (x86)/Git/usr/bin/sh.exe ../libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -DPROJ_LIB=\\\"/usr/local/share/proj\\\" -DMUTEX_stub   -Wall -Wdeclaration-after-statement -g -O2 -MT PJ_aeqd.lo -MD -MP -MF .deps/PJ_aeqd.Tpo -c -o PJ_aeqd.lo PJ_aeqd.c'\nMakefile:822: recipe for target 'PJ_aeqd.lo' failed\nmake[2]: *** [PJ_aeqd.lo] Error 1\nmake[2]: Leaving directory 'D:/01_soft/proj-4.9.3/src'\nMakefile:464: recipe for target 'all' failed\nmake[1]: *** [all] Error 2\nmake[1]: Leaving directory 'D:/01_soft/proj-4.9.3/src'\nMakefile:439: recipe for target 'all-recursive' failed\nmake: *** [all-recursive] Error 1\n</code></pre>\n\n<p>That's weird because when i run manually this:</p>\n\n<pre><code>../libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -DPROJ_LIB=\\\"/usr/local/share/proj\\\" -DMUTEX_stub   -Wall -Wdeclaration-after-statement -g -O2 -MT PJ_aeqd.lo -MD -MP -MF .deps/PJ_aeqd.Tpo -c -o PJ_aeqd.lo PJ_aeqd.c\n</code></pre>\n\n<p>It's working. So I tried to change MakeFile to directly run this without the launcher (C:/Program Files (x86)/Git/usr/bin/sh.exe) but without success.\nI'm lost...\nI reinstalled MINGW32 but same result. I googled this error without success. \nCould someone help me ?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520442366, "post_id": 49156305, "comment_id": 85319822, "body": "You&#39;re comparing the conversion using UMat with what when you said &quot;I lose more...&quot;?"}, {"owner": {"reputation": 1427, "user_id": 608294, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a3513aa827614e4a1608d2aa7df573b1?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/608294/andrea"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520452513, "post_id": 49156305, "comment_id": 85325758, "body": "I am comparing it with and without using it, just for understanding where the bottleneck is."}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520453306, "post_id": 49156305, "comment_id": 85326152, "body": "That&#39;s normal.. meanwhile make sure that you&#39;ve activated optimization and you use the latest version of opencv"}, {"owner": {"reputation": 1427, "user_id": 608294, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a3513aa827614e4a1608d2aa7df573b1?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/608294/andrea"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520494242, "post_id": 49156305, "comment_id": 85340326, "body": "Yes, I know that it is normal, but I was wondering only if there are other ways to speed up the process. I already activated all the optimization. But I am open to other suggestions."}], "owner": {"reputation": 1427, "user_id": 608294, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a3513aa827614e4a1608d2aa7df573b1?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/608294/andrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520438536, "creation_date": 1520438536, "question_id": 49156305, "link": "https://stackoverflow.com/questions/49156305/convert-a-cvmat-cvumat-from-8uc3-to-32fc3-is-slow", "title": "Convert a cv::Mat (cv::UMat) from 8UC3 to 32FC3 is slow", "body": "<p>I have a cv::UMat of 8UC3 and I want to convert it to 32FC3.\nI use the <code>convertTo</code> method offered by the cv::UMat class, but it is slow (I lose more or less 5 frame per second). \nI know that it is due to the conversion uchar -> float, but I was wondering if there exists a method for speeding up such a conversion.</p>\n"}, {"tags": ["c++", "new-operator"], "comments": [{"owner": {"reputation": 2822, "user_id": 1366673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf94cf8fe9b542830a7f96973ca2ddd9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1366673/sam"}, "edited": false, "score": 0, "creation_date": 1520442259, "post_id": 49156243, "comment_id": 85319750, "body": "This is the actual solution to your problem: <a href=\"https://pastebin.com/xj8vySeD\" rel=\"nofollow noreferrer\">pastebin.com/xj8vySeD</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2822, "user_id": 1366673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf94cf8fe9b542830a7f96973ca2ddd9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1366673/sam"}, "edited": false, "score": 0, "creation_date": 1520442419, "post_id": 49156243, "comment_id": 85319848, "body": "@sam, how is that a solution?"}, {"owner": {"reputation": 2822, "user_id": 1366673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf94cf8fe9b542830a7f96973ca2ddd9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1366673/sam"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1520442474, "post_id": 49156243, "comment_id": 85319879, "body": "@SergeyA You cannot initialize arrays of objects using non-default constructors"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 2822, "user_id": 1366673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf94cf8fe9b542830a7f96973ca2ddd9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1366673/sam"}, "edited": false, "score": 0, "creation_date": 1520442526, "post_id": 49156243, "comment_id": 85319913, "body": "@Sam OP does not  ask for multi-dimensional array"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2822, "user_id": 1366673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf94cf8fe9b542830a7f96973ca2ddd9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1366673/sam"}, "edited": false, "score": 1, "creation_date": 1520442574, "post_id": 49156243, "comment_id": 85319945, "body": "@Sam, so what? It is <b>not</b> a solution to OPs problem."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1520442700, "post_id": 49156243, "comment_id": 85320025, "body": "I disagree with the duplicate, because it is not a real solution. But alas."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1520443027, "post_id": 49156243, "comment_id": 85320221, "body": "@SergeyA - the dup was perfect"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1520443411, "post_id": 49156243, "comment_id": 85320451, "body": "@pm, no, it is not. Do I need to explain why?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1520443566, "post_id": 49156243, "comment_id": 85320564, "body": "Use <code>std::vector</code> instead of a C array, specifically <a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">constructor (2)</a>. It does exactly what you want here. <code>std::vector&lt;myclass&gt; vec(m, n);</code>"}, {"owner": {"reputation": 87, "user_id": 5115323, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6a152eb737b49def02a60b5db0bbf57f?s=128&d=identicon&r=PG&f=1", "display_name": "Just_a_newbie", "link": "https://stackoverflow.com/users/5115323/just-a-newbie"}, "reply_to_user": {"reputation": 2822, "user_id": 1366673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf94cf8fe9b542830a7f96973ca2ddd9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1366673/sam"}, "edited": false, "score": 0, "creation_date": 1520456280, "post_id": 49156243, "comment_id": 85327697, "body": "@Sam that is indeed not a solution to my problem. However knowing that it is not possible (at least not in this way) actually helps. I guess I will have to get tackle this in another way."}, {"owner": {"reputation": 87, "user_id": 5115323, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6a152eb737b49def02a60b5db0bbf57f?s=128&d=identicon&r=PG&f=1", "display_name": "Just_a_newbie", "link": "https://stackoverflow.com/users/5115323/just-a-newbie"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1520457052, "post_id": 49156243, "comment_id": 85328107, "body": "@Caleth I am actually trying to avoid <code>std::vector</code> here because its elements get initialized when the vector does, thus reducing efficiency. Apart from that, since I need an array of fixed size, there is no point in using <code>std::vector</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1520463053, "post_id": 49156243, "comment_id": 85330768, "body": "If m is constexpr, you can use std::array, otherwise std::vector is <i>exactly</i> a dynamic array used correctly. There is no overhead. If you merely want <i>space for</i> m instances, but don&#39;t have them yet, std::vector is <i>superior</i>, as reserve doesn&#39;t construct values, it just ensures sufficient storage is allocated. newing a C array default constructs the values."}], "owner": {"reputation": 87, "user_id": 5115323, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6a152eb737b49def02a60b5db0bbf57f?s=128&d=identicon&r=PG&f=1", "display_name": "Just_a_newbie", "link": "https://stackoverflow.com/users/5115323/just-a-newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1520442610, "answer_count": 0, "score": 1, "last_activity_date": 1520441391, "creation_date": 1520438380, "question_id": 49156243, "link": "https://stackoverflow.com/questions/49156243/creating-an-array-of-objects-using-new-and-calling-a-constructor-with-parameters", "closed_reason": "Duplicate", "title": "Creating an array of objects using new and calling a constructor with parameters", "body": "<p>I am trying to create an array of objects but I want them to be created using a constructor which takes parameters. This has been my attempt so far.</p>\n\n<pre><code>class myclass {\n    int n;\n    myclass(int n) : n(n) {}\n}\n\nint main() {\n    int m = 5;\n    int n = 4;\n\n    myclass* arr = new myclass(n)[m];\n}\n</code></pre>\n\n<p>How can this be achieved?</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1520438218, "post_id": 49156149, "comment_id": 85316964, "body": "As the error message says, you need a default constructor <code>class2::class2()</code>.  As you have a user-supplied one the default one is not generated."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1520438222, "post_id": 49156149, "comment_id": 85316966, "body": "you need a default ctor for class2 i.e class2::class2(){}"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1520438370, "post_id": 49156149, "comment_id": 85317071, "body": "As mentioned in the documentation of <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/operator_at\" rel=\"nofollow noreferrer\"><code>std::unordered_map::operator[]</code></a> <code>s_list[x1]</code> inserts an element using a default constructor. Your class doesn&#39;t have one, hence it can&#39;t do that. Did you try using <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/insert\" rel=\"nofollow noreferrer\"><code>std::unordered_map::insert</code></a> instead?"}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1520438448, "post_id": 49156253, "comment_id": 85317135, "body": "How would you suggest solving the problem?"}, {"owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "edited": false, "score": 0, "creation_date": 1520438463, "post_id": 49156253, "comment_id": 85317144, "body": "But shouldn&#39;t copy constructor take care of it in the absence of default constructor?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "edited": false, "score": 2, "creation_date": 1520438513, "post_id": 49156253, "comment_id": 85317190, "body": "@skr_robo No, not really. The value is copied, after the element is created."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "reply_to_user": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "edited": false, "score": 0, "creation_date": 1520438703, "post_id": 49156253, "comment_id": 85317338, "body": "@skr_robo what Algirdas said the value is copied after. Create a default ctor and maybe do a getter/setter for the values or after the object is created use your copy ctor by assigning it a new object. Also I would consider storing pointers and not raw objects."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "reply_to_user": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "edited": false, "score": 0, "creation_date": 1520438781, "post_id": 49156253, "comment_id": 85317391, "body": "@skr_robo my bad fixed the link to See Here."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1520438808, "post_id": 49156253, "comment_id": 85317412, "body": "I would suggest against making a default constructor, if that doesn&#39;t make sense in particular use case (in addition to always preferring value-semantics instead of pointer-semantics), just so <code>std::unordered_map::operator[]</code> would work. What&#39;s wrong with using <code>std::unordered_map::insert</code> to insert values, that aren&#39;t default-constructible?"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1520438891, "post_id": 49156253, "comment_id": 85317475, "body": "@AlgirdasPreid\u017eius nothing wrong I would prefer using a insert in this case."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1520438955, "post_id": 49156253, "comment_id": 85317519, "body": "@SamerTufail You say that now.. But your answer contradicts such statement."}, {"owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1520439012, "post_id": 49156253, "comment_id": 85317560, "body": "@AlgirdasPreid\u017eius It&#39;s actually collecting sensor data in a loop. The insert will give the wrong impression to someone who reads the code later. I got the job done by adding the default constructor."}, {"owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "edited": false, "score": 0, "creation_date": 1520439048, "post_id": 49156253, "comment_id": 85317580, "body": "@SamerTufail Thank You."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1520439272, "post_id": 49156253, "comment_id": 85317731, "body": "@AlgirdasPreid\u017eius I answered based on the OP&#39;s  use case ... I added the reference to insert for completeness.."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "edited": false, "score": 2, "creation_date": 1520440112, "post_id": 49156253, "comment_id": 85318311, "body": "@skr_robo if it&#39;s in a loop; then the better function to call is <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/insert_or_assign\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/unordered_map/&hellip;</a>"}, {"owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520440229, "post_id": 49156253, "comment_id": 85318388, "body": "@UKMonkey: I had never heard of that function. Thanks a lot."}], "tags": [], "owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "is_accepted": true, "score": 2, "last_activity_date": 1520439097, "last_edit_date": 1520439097, "creation_date": 1520438394, "answer_id": 49156253, "question_id": 49156149, "link": "https://stackoverflow.com/questions/49156149/assigning-or-inserting-class-objects-in-unordered-map/49156253#49156253", "title": "Assigning or inserting class objects in unordered_map", "body": "<p>You are missing a default <code>ctor</code>. In an <code>unordered_map</code> if there is no match for a value of a <code>key</code> it creates a default one and returns a reference to it.</p>\n\n<p>Consider the subscript operator <code>[]</code>.<a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/operator_at\" rel=\"nofollow noreferrer\">See Here</a>. Closely observe the return <code>T&amp;</code></p>\n\n<p>If you do <code>s_list[\"foo\"]</code> and there is no <code>value</code> associated with \"foo\" it creates a entry in the unordered_map with <code>key</code> \"foo\" and returns a reference to the default value by callings its default ctor. </p>\n\n<p>In your class2 you dont have one. To fix it create a default ctor </p>\n\n<pre><code>class class2 // horrible name btw\n{\n   class2() = default;\n}\n</code></pre>\n\n<p>or use <code>insert</code>. <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/insert\" rel=\"nofollow noreferrer\">Reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1520440194, "last_edit_date": 1520440194, "creation_date": 1520438755, "answer_id": 49156385, "question_id": 49156149, "link": "https://stackoverflow.com/questions/49156149/assigning-or-inserting-class-objects-in-unordered-map/49156385#49156385", "title": "Assigning or inserting class objects in unordered_map", "body": "<p>An alternate way you can add items to the map without needing that constructor is to use the function <code>insert</code> rather than <code>[]</code>.</p>\n\n<p>ie <code>s_list.insert({x1, s_obj})</code></p>\n\n<p>This is because (as the other answer states) <code>[]</code> returns a reference to the object that will be assigned (and must therefore be created); while insert will copy the objects passed to it without needing to create them first.</p>\n\n<p>Update from other comments:\nthere also exists <code>insert_or_assign</code> which will assign the existing value to the new one if it exists; ie working in exactly the same way as <code>[]</code> does without calling the default constructor</p>\n"}], "owner": {"reputation": 770, "user_id": 4834108, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9ff8c9a23c77cf9ed7aeeb0709f54985?s=128&d=identicon&r=PG&f=1", "display_name": "skr_robo", "link": "https://stackoverflow.com/users/4834108/skr-robo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 49156253, "answer_count": 2, "score": 0, "last_activity_date": 1520440308, "creation_date": 1520438107, "last_edit_date": 1520440308, "question_id": 49156149, "link": "https://stackoverflow.com/questions/49156149/assigning-or-inserting-class-objects-in-unordered-map", "title": "Assigning or inserting class objects in unordered_map", "body": "<p>I have a class: <code>class1</code> with a private member variable:</p>\n\n<p><code>std::unordered_map&lt;std::string, class2&gt; s_list;</code></p>\n\n<p>I am trying to insert or assign objects of <code>class2</code> in the above <code>s_list</code>.</p>\n\n<p>The <code>class2</code> has a copy constructor of the form:</p>\n\n<pre><code>class2::class2(const class2&amp; obj)\n{\n    x = obj.x;\n    y = obj.y;\n}\n</code></pre>\n\n<p>It also has another constructor:</p>\n\n<pre><code>class2::class2(std::string x1, double y1)\n{\n    x = x1;\n    y = y1;\n}\n</code></pre>\n\n<p>Inside one of the functions of <code>class1</code>, I have the following lines:</p>\n\n<pre><code>class2 s_obj(x1, y1);\ns_list[x1] = s_obj;\n</code></pre>\n\n<p>However, it throws the error:</p>\n\n<pre><code>error: no matching function for call to \u2018class2::class2()\u2019\n         second(std::forward&lt;_Args2&gt;(std::get&lt;_Indexes2&gt;(__tuple2))...)\n                                                                      ^\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c++", "visual-studio", "boost", "icc", "boost-multiprecision"], "comments": [{"owner": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "edited": false, "score": 0, "creation_date": 1520437630, "post_id": 49155902, "comment_id": 85316532, "body": "Do any other boost functions work for you?"}, {"owner": {"reputation": 21, "user_id": 9457502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3U3TZG6o4Xc/AAAAAAAAAAI/AAAAAAAACDE/YcCb1sjNUzs/photo.jpg?sz=128", "display_name": "Starlin", "link": "https://stackoverflow.com/users/9457502/starlin"}, "reply_to_user": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "edited": false, "score": 0, "creation_date": 1520438251, "post_id": 49155902, "comment_id": 85316986, "body": "The errors in xutility are happening with other boost functions (tried some from special_functions) - thanks for pointing this"}, {"owner": {"reputation": 21, "user_id": 9457502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3U3TZG6o4Xc/AAAAAAAAAAI/AAAAAAAACDE/YcCb1sjNUzs/photo.jpg?sz=128", "display_name": "Starlin", "link": "https://stackoverflow.com/users/9457502/starlin"}, "reply_to_user": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "edited": false, "score": 0, "creation_date": 1520440914, "post_id": 49155902, "comment_id": 85318839, "body": "Would like to extend the above a bit - the code from the <a href=\"http://www.boost.org/doc/libs/1_66_0/more/getting_started/windows.html#build-a-simple-program-using-boost\" rel=\"nofollow noreferrer\">getting started page</a> compiles and works. When i try to use other functions i.e <code>#include &lt;boost&#47;math&#47;special_functions&#47;detail&#47;bessel_k1.hpp&gt; int main() { \tboost::math::detail::bessel_k1(1.0f); \treturn 0; }</code> it doesn&#39;t compile with the second error from the question."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1520494814, "post_id": 49155902, "comment_id": 85340627, "body": "Looks like the standard library used in your Visual Studio version is simply not compatible with the Intel compiler version. That&#39;s a show-stopper. If that&#39;s the case, you need to change one."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1520495038, "post_id": 49155902, "comment_id": 85340738, "body": "Re: float128, did you read <i>&quot;When the underlying type is Intel&#39;s _Quad type, the code must be compiled with the compiler option -Qoption,cpp,--extended_float_type.&quot;?</i> (<a href=\"http://www.boost.org/doc/libs/1_66_0/libs/multiprecision/doc/html/boost_multiprecision/tut/floats/float128.html\" rel=\"nofollow noreferrer\">here</a>)"}, {"owner": {"reputation": 21, "user_id": 9457502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3U3TZG6o4Xc/AAAAAAAAAAI/AAAAAAAACDE/YcCb1sjNUzs/photo.jpg?sz=128", "display_name": "Starlin", "link": "https://stackoverflow.com/users/9457502/starlin"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1520581314, "post_id": 49155902, "comment_id": 85382767, "body": "@sehe, you seem to be right Re: VS, I have posted a even more basic failing code to intel&#39;s forums, we shall see what the guys think. Re: float128, yes, the code is being compiled with that option."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1520581585, "post_id": 49155902, "comment_id": 85382917, "body": "When you find a verdict/solution from the Intel guys, consider posting that as an answer. That would be helpful for anyone else walking into this barrier!"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9457502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3U3TZG6o4Xc/AAAAAAAAAAI/AAAAAAAACDE/YcCb1sjNUzs/photo.jpg?sz=128", "display_name": "Starlin", "link": "https://stackoverflow.com/users/9457502/starlin"}, "is_accepted": true, "score": 0, "last_activity_date": 1522784496, "last_edit_date": 1522784496, "creation_date": 1522675513, "answer_id": 49612213, "question_id": 49155902, "link": "https://stackoverflow.com/questions/49155902/unable-to-compile-example-boostmultiprecision-with-intel-compiler-on-windows/49612213#49612213", "title": "Unable to compile example boost::multiprecision with intel compiler on windows", "body": "<p>I would like to write down how I managed to deal with error #2 from the original question, as it might be useful to someone. </p>\n\n<p>Just as a reminder, the second errors I was seeing were in xutility. With the help of everyone that provided suggestions, it turned out that icc was in fact failing on very simple code - the following is enough to \"break\" it </p>\n\n<p><code>int main() {\n    std::string str(\"Test string\");\n}</code></p>\n\n<p>I have posted the question to intel's forums, however so far I have not received answers (for the 17.0 version of the compiler). Link <a href=\"https://software.intel.com/en-us/forums/intel-c-compiler/topic/759215\" rel=\"nofollow noreferrer\">here</a> if anyone is interested.</p>\n\n<p>That said, I came upon this blog <a href=\"https://blogs.msdn.microsoft.com/vcblog/2017/11/15/side-by-side-minor-version-msvc-toolsets-in-visual-studio-2017/\" rel=\"nofollow noreferrer\">post</a> from the VC++ team, showing that the base toolset shown as v141 in VC2017 actually has had several minor revisions. It is possible to change the version of the MSVC toolchain but this needs to happen via editing of project files (rather than UI parameter changes). </p>\n\n<p>My testing shows that version 14.11 (which is part of VS2017 15.3 and 15.4) works for Intel 17.0 while versions 14.12 and 14.13 (the last one is the current default for VS2017 15.6.4) do not. This has been done for Update 6 of the compiler. So in order to use the intel compiler on windows with visual studio, one needs to use particular MSVC toolchain versions.</p>\n\n<p>Side note: I also installed icc version 18.0 update 1 for testing -- it too was giving compiler errors (and not just for me this time). The reason there though can be linked to some internal issue for icc, per this <a href=\"https://software.intel.com/en-us/forums/intel-c-compiler/topic/762611#comment-1920547\" rel=\"nofollow noreferrer\">forum post</a>. I can confirm that removing the compiler option /permissive- from the compiler fixes the errors irrespective of the base toolchain. Using v14.11 as base toolchain also fixes this particular problem for me with or without the option. /permissive- is a new option for icc (it is not part of 17.0).</p>\n\n<p>The above solves more or less the second part of my problem with the icc. The rest of the question (boost's float128)  though still remains. I will add more if i hear from boost's guys.</p>\n\n<p>EDIT: the errors coming from boost turned out to be an issue there -- it was fixed by the maintainers in development branch, so this is resolved as well.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9961942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418f3ab7a5b5fae70c91756f0c1697c8?s=128&d=identicon&r=PG&f=1", "display_name": "S. Nie", "link": "https://stackoverflow.com/users/9961942/s-nie"}, "is_accepted": false, "score": 0, "last_activity_date": 1530969158, "creation_date": 1530969158, "answer_id": 51223567, "question_id": 49155902, "link": "https://stackoverflow.com/questions/49155902/unable-to-compile-example-boostmultiprecision-with-intel-compiler-on-windows/51223567#51223567", "title": "Unable to compile example boost::multiprecision with intel compiler on windows", "body": "<p>For Error #1, I got the same thing. However, after commenting the code blocks in boost float128.hpp where those four functions invoked, the float128 example code can be compiled with success. The side effect is unknown. I'm looking forward a revision on boost::multiprecision::float128.</p>\n"}], "owner": {"reputation": 21, "user_id": 9457502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3U3TZG6o4Xc/AAAAAAAAAAI/AAAAAAAACDE/YcCb1sjNUzs/photo.jpg?sz=128", "display_name": "Starlin", "link": "https://stackoverflow.com/users/9457502/starlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 1, "accepted_answer_id": 49612213, "answer_count": 2, "score": 1, "last_activity_date": 1539874514, "creation_date": 1520437382, "last_edit_date": 1520450634, "question_id": 49155902, "link": "https://stackoverflow.com/questions/49155902/unable-to-compile-example-boostmultiprecision-with-intel-compiler-on-windows", "title": "Unable to compile example boost::multiprecision with intel compiler on windows", "body": "<p>I am using VS 2017 Community edition, Intel Compiler 17.00 update 6 and and boost 1.66, trying to learn my way around boost::multiprecision::float128. Literally taking the example code from <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/multiprecision/doc/html/boost_multiprecision/tut/floats/float128.html\" rel=\"nofollow noreferrer\">here</a> and putting it in a new project for VS.</p>\n\n<p>Compiling gives multiple errors, in roughly two categories/files: </p>\n\n<ol>\n<li><p>In float128.hpp:</p>\n\n<ul>\n<li><p>three errors of \"error : identifier \"xxx\" is undefined\" for fmaq, remquoq and remainderq. Indeed I am not able to find definitions for them - a missing include?</p></li>\n<li><p>the global scope has no \"signbitq\" - this again looks like missing definition (i.e. the same as above)</p></li>\n</ul></li>\n</ol>\n\n<p>For GCC the above functions are found within quadmath.h, however, the boost header doesn't seem to include it when using ICC (i.e BOOST_MP_USE_QUAD is set).</p>\n\n<ol start=\"2\">\n<li>In C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\xutility: an explicit template argument list is not allowed on this declaration. There are three counts</li>\n</ol>\n\n<p>I assume that i need to remove something that has been put in by default from the VS, but I am at a loss what exactly.</p>\n\n<p>Thank you for your help</p>\n\n<p>EDIT: Errors #2 above are actually not against boost at all (should I move this to a separate question?). \nThe following code copied from <a href=\"http://www.cplusplus.com/reference/string/string/begin/\" rel=\"nofollow noreferrer\">here!</a> is not being compiled in my setup:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nint main() {\nstd::string str(\"Test string\");\nfor (std::string::iterator it = str.begin(); it != str.end(); ++it)\n    std::cout &lt;&lt; *it;\nstd::cout &lt;&lt; '\\n';\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>The exact error (one of them) is:</p>\n\n<pre><code>1&gt;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\xutility(680): error : an explicit template argument list is not allowed on this declaration\n1&gt;      _INLINE_VAR constexpr bool _Is_iterator_v&lt;_Ty, void_t&lt;_Iter_cat_t&lt;_Ty&gt;&gt;&gt; = true;\n1&gt;                                 ^\n1&gt;          detected during:\n1&gt;            instantiation of \"const bool std::_Is_iterator_v [with _Ty=char *, &lt;unnamed&gt;=void]\" at line 520 of \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\string\"\n1&gt;            instantiation of \"std::basic_string&lt;_Elem, std::char_traits&lt;_Elem&gt;, std::allocator&lt;_Elem&gt;&gt; std::_Integral_to_string&lt;_Elem,_Ty&gt;(_Ty) [with _Elem=char, _Ty=int]\" at line 554 of \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\string\"\n</code></pre>\n\n<p>I found <a href=\"https://stackoverflow.com/a/47946560/9457502\">this</a> which indicates that there could be a problem with the particular versions used (ICC- 17.0 Up6 and VS 15.6), however i cannot really move to new intel compiler and i cannot test VS 15.4 </p>\n"}, {"tags": ["c++", "c", "multithreading", "synchronization", "mutex"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 4, "creation_date": 1520436284, "post_id": 49155497, "comment_id": 85315520, "body": "are you using c or c++?  If you&#39;re using c++11 onwards, don&#39;t use pthread_mutex but std::mutex"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520436524, "post_id": 49155497, "comment_id": 85315716, "body": "Are you trying to prevent the same file being written to in two different threads?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1520436775, "post_id": 49155497, "comment_id": 85315921, "body": "You need to decide what objects you&#39;re trying to protect from concurrent access by which threads or code paths. If you have something created and used only in one thread, then unless you actively share it with another thread, there&#39;s no need to protect access to that object."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1520436995, "post_id": 49155497, "comment_id": 85316069, "body": "<i>Why</i> are you trying to prevent simultaneous writes to your file?  Depending on your operating system, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pwrite.html\" rel=\"nofollow noreferrer\">there are ways to do atomic write operations to a file without locking at the application level</a>."}, {"owner": {"reputation": 3, "user_id": 8902868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9af429c5f9927581333cb697cf6938eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nikki", "link": "https://stackoverflow.com/users/8902868/nikki"}, "edited": false, "score": 0, "creation_date": 1520437261, "post_id": 49155497, "comment_id": 85316264, "body": "Yes, I am trying to prevent concurrent writes to the same file by different threads."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1520440794, "creation_date": 1520440794, "answer_id": 49157022, "question_id": 49155497, "link": "https://stackoverflow.com/questions/49155497/implementing-mutexes-for-file-writes/49157022#49157022", "title": "Implementing mutexes for file writes", "body": "<p>It's fairly easy to create a wrapper for an iostream that ensures only one thread can write to the stream at a time. Unfortunately, almost as soon as you do so, you run into another problem. It ensures that only one thread can insert into the stream at a time, so you get defined behavior. If, however, you have something like:</p>\n\n<p>thread 1: <code>sync_stream &lt;&lt; a &lt;&lt; b &lt;&lt; c &lt;&lt; '\\n';</code><br>\nthread 2: <code>sync_stream &lt;&lt; x &lt;&lt; y &lt;&lt; z &lt;&lt; '\\n';</code></p>\n\n<p>What you wanted was either:</p>\n\n<blockquote>\n  <p>abc<br>\n  xyz</p>\n</blockquote>\n\n<p>...or else:</p>\n\n<blockquote>\n  <p>xyz<br>\n  abc</p>\n</blockquote>\n\n<p>Since they're in separate threads, it's fine for the order between them to vary, but a line of output from one thread should remain a single line of output. Something like:</p>\n\n<blockquote>\n  <p>abxy<br>\n  cz</p>\n</blockquote>\n\n<p>...probably isn't desired or acceptable. To ensure against this, we really need <em>two</em> separate classes. One is a synchronized stream. The other is something to let us do some (more or less arbitrary) set of insertions into the stream as a single, indivisible \"transaction\". To do that, we can use a pair of classes like this:</p>\n\n<pre><code>class transaction {\n    std::ostringstream buffer;\npublic:\n    transaction(std::string const &amp;s=\"\") : buffer(s, std::ios::out | std::ios::ate) {}\n\n    template &lt;class T&gt;\n    transaction &amp;operator&lt;&lt;(T const &amp;t) {\n        buffer &lt;&lt; t;\n        return *this;\n    }\n\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, transaction const &amp;t) {\n        return os &lt;&lt; t.buffer.str();\n    }\n};\n\nclass sync_stream {\n    std::ostream &amp;out;\n    std::mutex mutex;\npublic:\n    sync_stream(std::ostream &amp;sink) : out(sink) { }\n\n    void operator&lt;&lt;(transaction const &amp;t) {\n        std::lock_guard&lt;std::mutex&gt; l(mutex);\n        out &lt;&lt; t;\n    }    \n};\n</code></pre>\n\n<p>Note that the <code>transaction</code> class supports chaining, but the <code>sync_stream</code> does not (and the only thing you can insert into it is a <code>transaction</code>). To use them, we do something like this:</p>\n\n<pre><code>for (int i=0; i&lt;10; i++)\n    threads[i] = std::thread([&amp;]{ \n        for (int i=0; i&lt;10; i++) \n            s &lt;&lt; (transaction() &lt;&lt; \"Thread: \" &lt;&lt; std::this_thread::get_id() &lt;&lt; \"\\n\");\n    });\n</code></pre>\n\n<p>This way, what a thread thinks of as a single output actually comes out as a single output, so our result might look like this:</p>\n\n<blockquote>\n  <p>Thread: 140375947724544<br>\n  Thread: 140376068564736<br>\n  Thread: 140375964509952<br>\n  Thread: 140375964509952<br>\n  Thread: 140375972902656<br>\n  Thread: 140375964509952</p>\n</blockquote>\n\n<p>Of course, you'll get different thread IDs than I did, and the order of the lines is likely to vary--but each line will be written as a single, intact unit.</p>\n\n<h1>Summary</h1>\n\n<p>The worker threads shouldn't work directly with the mutex at all. That should be automated, so the worker thread can focus on its work, and spend only a bare minimum of effort on the underlying mechanism necessary for it to do its job.</p>\n"}], "owner": {"reputation": 3, "user_id": 8902868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9af429c5f9927581333cb697cf6938eb?s=128&d=identicon&r=PG&f=1", "display_name": "Nikki", "link": "https://stackoverflow.com/users/8902868/nikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 0, "accepted_answer_id": 49157022, "answer_count": 1, "score": -3, "last_activity_date": 1520440794, "creation_date": 1520436219, "question_id": 49155497, "link": "https://stackoverflow.com/questions/49155497/implementing-mutexes-for-file-writes", "title": "Implementing mutexes for file writes", "body": "<p>I am trying to use mutexes to avoid multiple writes to the same thread inC/Cpp. Below is the flow of my program. I am confused as to where to include my lock and unlock code. </p>\n\n<pre><code>main() {\n    spawn a worker thread\n}\nworker_thread() {\n    read the input file name \n    read some content\n    write the content to the given file name\n}\n</code></pre>\n\n<p>Most of the implementation that I see, seem to have something like this: </p>\n\n<pre><code>main() {\n    pthread_mutex_init(&amp;myMutex;,0);\n    *spawn a worker thread*\n    pthread_join(thread1, 0);\n    pthread_mutex_destroy(&amp;myMutex;);\n}\nworker_thread() {\n    read the input file name \n    read some content\n    write the content to the given file name\n}\n</code></pre>\n\n<p>What I want it something like this:</p>\n\n<pre><code>main() {\n    spawn a worker thread\n}\nworker_thread() {\n    read the input file name \n    read some content\n    pthread_mutex_init(&amp;myMutex;,0) --&gt; for the given file?\n    write the content to the given file name\n    pthread_mutex_destroy(&amp;myMutex;);\n}\n</code></pre>\n\n<p>Any ideas to proceed much appreciated. Thank you!</p>\n"}, {"tags": ["c++", "ssl", "soap", "https", "gsoap"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 9285196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b840cc068effed13757e2cce7a0600e?s=128&d=identicon&r=PG&f=1", "display_name": "JCMiguel", "link": "https://stackoverflow.com/users/9285196/jcmiguel"}, "is_accepted": true, "score": 0, "last_activity_date": 1520449932, "creation_date": 1520449932, "answer_id": 49159587, "question_id": 49155480, "link": "https://stackoverflow.com/questions/49155480/c-cant-access-gsoap-web-services-with-https/49159587#49159587", "title": "c++ - Can&#39;t access gSOAP web services with HTTPS", "body": "<p>I already solved this problem. The server certificate was wrong. The Common Name in this application should be equal to the host name.</p>\n"}], "owner": {"reputation": 133, "user_id": 9285196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b840cc068effed13757e2cce7a0600e?s=128&d=identicon&r=PG&f=1", "display_name": "JCMiguel", "link": "https://stackoverflow.com/users/9285196/jcmiguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 49159587, "answer_count": 1, "score": 0, "last_activity_date": 1520449932, "creation_date": 1520436194, "last_edit_date": 1520436521, "question_id": 49155480, "link": "https://stackoverflow.com/questions/49155480/c-cant-access-gsoap-web-services-with-https", "title": "c++ - Can&#39;t access gSOAP web services with HTTPS", "body": "<p>I'm trying to hit a web service which I built with SSL on gSOAP 2.8.4. But it doesn't works. Relevant information:</p>\n\n<ul>\n<li>Everything works fine using HTTP. The problem only happens when I use HTTPS.</li>\n<li>Message error:</li>\n</ul>\n\n<blockquote>\n  <p>Error -1 fault: SOAP-ENV:Client [no subcode]\n  \"End of file or no input: Operation interrupted or timed out (60 s receive delay) (60 s send delay)\"\n  Detail: [no detail]</p>\n</blockquote>\n\n<p>The problem doesn't seem to be a low timeout because the error is instantaneous.</p>\n\n<p>Server context:</p>\n\n<pre><code>if (soap_ssl_server_context(&amp;soap,\n    SOAP_SSL_DEFAULT,   /* use SOAP_SSL_REQUIRE_CLIENT_AUTHENTICATION to verify clients: client must provide a key file e.g. \"client.pem\" and \"password\" */\n    \"server.pem\",   /* keyfile (cert+key): see SSL docs to create this file */\n    password,       /* password to read the private key in the key file */\n    \"cacert.pem\",   /* cacert file to store trusted certificates (to authenticate clients) */\n    \"./\",       /* capath */\n    NULL,   /* DH file name or DH param key len bits (e.g. \"1024\"), if NULL use RSA 2048 bits (SOAP_SSL_RSA_BITS) */\n    NULL,       /* if randfile!=NULL: use a file with random data to seed randomness */\n    \"server\"        /* server identification for SSL session cache (unique server name, e.g. use argv[0]) */\n    ))\n{\n</code></pre>\n\n<p>Client context:</p>\n\n<pre><code>if (soap_ssl_client_context(&amp;soap,\n    SOAP_SSL_DEFAULT,   /* use SOAP_SSL_DEFAULT in production code */\n    NULL,       /* keyfile (cert+key): required only when client must authenticate to server (see SSL docs to create this file) */\n    NULL,       /* password to read the keyfile */\n    \"cacert.pem\",   /* optional cacert file to store trusted certificates, use cacerts.pem for all public certificates issued by common CAs */\n    \"./\",       /* optional capath to directory with trusted certificates */\n    NULL        /* if randfile!=NULL: use a file with random data to seed randomness */\n    ))\n{\n</code></pre>\n\n<p>All the certificates and passwords are correct.\nWhat could be the problem?</p>\n\n<hr>\n\n<p>Edit:\nI compiled the code with -DDEBUG. This appears in TEST.log</p>\n\n<blockquote>\n  <p>Free ID hashtable\n  Read 0 bytes from socket=4/fd=0\n  Sending back fault struct for error code -1\n  soap_instantiate_SOAP_ENV__Fault(-1, , )</p>\n</blockquote>\n"}, {"tags": ["c++", "instantiation", "constexpr", "static-assert", "if-constexpr"], "comments": [{"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1602682045, "post_id": 49155428, "comment_id": 113797459, "body": "See <a href=\"https://stackoverflow.com/a/64354296/856199\">stackoverflow.com/a/64354296/856199</a> for the easiest way to do this in C++20."}], "owner": {"reputation": 1886, "user_id": 1012773, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0d62ac65da881c3b7db2982c98e243b5?s=128&d=identicon&r=PG", "display_name": "davide", "link": "https://stackoverflow.com/users/1012773/davide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1663, "favorite_count": 0, "closed_date": 1520436450, "answer_count": 0, "score": 7, "last_activity_date": 1520436062, "creation_date": 1520436062, "question_id": 49155428, "link": "https://stackoverflow.com/questions/49155428/static-assert-inside-if-constexpr-not-discarded", "closed_reason": "Duplicate", "title": "Static_assert inside if constexpr not discarded", "body": "<p>The following <code>static_assert</code> should be discarded being in the false branch of <code>if constexpr</code>, yet compilation fails due to assert failure:</p>\n\n<pre><code>#include &lt;type_traits&gt;                                                                                                                                                                              \n\ntemplate &lt;class T&gt;                                                                                                                                                                                  \nconstexpr bool f() {                                                                                                                                                                                \n  if constexpr (std::is_same&lt;T, int&gt;::value) return true;                                                                                                                                                                                                                                                                    \n  else static_assert(false, \"message\");                                                                                                                                                             \n}                                                                                                                                                                                                   \n\nint main () {                                                                                                                                                                                       \n  if constexpr (f&lt;int&gt;()) return 1;                                                                                                                                                                 \n  return 0;                                                                                                                                                                                         \n} \n</code></pre>\n\n<p>I'd expect that the discarded branch of <code>if constexpr</code> wouldn't be evaluated because <code>f</code> is instantiated with type <code>int</code>.</p>\n\n<p>Compiled with Gcc 7.2 (-std=c++17)</p>\n"}, {"tags": ["c++", "winapi", "usb", "wpd"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520439214, "post_id": 49155308, "comment_id": 85317702, "body": "Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> this question will be impossible to answer."}, {"owner": {"reputation": 67, "user_id": 3797009, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8c6c3d176d8f3e4f15d0b3ae3915d864?s=128&d=identicon&r=PG&f=1", "display_name": "RobRobRob", "link": "https://stackoverflow.com/users/3797009/robrobrob"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520439727, "post_id": 49155308, "comment_id": 85318054, "body": "I&#39;ll try but even an minimal example would be about 500 lines of code. And the link to Windows Dev Center shows a minimal example of the IPortableDeviceEventCallback class."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520440840, "post_id": 49155308, "comment_id": 85318784, "body": "Does this example exhibit the same issue like your own code?"}, {"owner": {"reputation": 67, "user_id": 3797009, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8c6c3d176d8f3e4f15d0b3ae3915d864?s=128&d=identicon&r=PG&f=1", "display_name": "RobRobRob", "link": "https://stackoverflow.com/users/3797009/robrobrob"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520495947, "post_id": 49155308, "comment_id": 85341193, "body": "Yes, and I have to correct myself it is not neccessary that the explorer have to create the thumbnails in the DCIM folder. I just have to browse into this folder and the notification works fine."}, {"owner": {"reputation": 160, "user_id": 2869674, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002681476958/picture?type=large", "display_name": "Arthur  Bulakaiev", "link": "https://stackoverflow.com/users/2869674/arthur-bulakaiev"}, "edited": false, "score": 0, "creation_date": 1520591264, "post_id": 49155308, "comment_id": 85388199, "body": "Could you show the part of code, where you are getting pDevice object?  (Did you call Open(...) for it, what parameter you have specified, etc)  The code of your OnEvent() looks strange in some places (you are comparing EventId to WPD_EVENT_DEVICE_CAPABILITIES_UPDATED before EventId got some value), but I suppose you checked in the debugger that OnEvent() really not called."}], "owner": {"reputation": 67, "user_id": 3797009, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8c6c3d176d8f3e4f15d0b3ae3915d864?s=128&d=identicon&r=PG&f=1", "display_name": "RobRobRob", "link": "https://stackoverflow.com/users/3797009/robrobrob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520592020, "creation_date": 1520435739, "last_edit_date": 1520592020, "question_id": 49155308, "link": "https://stackoverflow.com/questions/49155308/iportabledeviceeventcallback-doesnt-work-properly-strange-behaviour", "title": "IPortableDeviceEventCallback doesn&#39;t work properly (strange behaviour)", "body": "<p>I want to receive a callback in my application when a photo on a connected mobile phone was shot (WPD_EVENT_OBJECT_ADDED).\nI implemented a WPD client and the IPortableDeviceEventCallback like shown in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd319342(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Windows Dev Center</a>.</p>\n\n<p>Now my problem is that the IPortableDeviceEventCallback::OnEvent() methode get only invoked if I have opened the DCIM/Camera folder on the phone via Windows Explorer and the explorer starts to creating thumbnails for the images. After I did this once, I receive every event from the phone till I dis- and reconnect it. But if I do not, onEvent() never gets called except I disconnect the phone.</p>\n\n<p>Tested with different Android and iOS phones.\nDoes anyone have an idea whats going on?</p>\n\n<pre><code>DeviceEventsCallback::DeviceEventsCallback(MyPortableDevice* parent) : IPortableDeviceEventCallback(), cRef(1)\n{\n    parentDevice = parent;\n}\n\nDeviceEventsCallback::~DeviceEventsCallback()\n{\n\n}\n\nHRESULT __stdcall DeviceEventsCallback::QueryInterface(const IID&amp; riid, LPVOID* ppvObj)\n{\n    static const QITAB qitab[] = {\n        QITABENT(DeviceEventsCallback, IPortableDeviceEventCallback),\n        { },\n    };\n\n    return QISearch(this, qitab, riid, ppvObj);\n\n    //    HRESULT hr = S_OK;\n    //    if (ppvObj == NULL) {\n    //        hr = E_INVALIDARG;\n    //        return hr;\n    //    }\n\n    //    if ((riid == IID_IUnknown) ||\n    //        (riid == IID_IPortableDeviceEventCallback)) {\n    //        AddRef();\n    //        *ppvObj = this;\n    //    }\n    //    else {\n    //        *ppvObj = NULL;\n    //        hr = E_NOINTERFACE;\n    //    }\n    //    return hr;\n}\n\nULONG __stdcall DeviceEventsCallback::AddRef()\n{\n    InterlockedIncrement((long*) &amp;cRef);\n    return cRef;\n}\n\nULONG __stdcall DeviceEventsCallback::Release()\n{\n    ULONG refCount = cRef - 1;\n    long ref = InterlockedDecrement(&amp;cRef);\n\n    if (ref == 0) {\n        delete this;\n        return 0;\n    }\n\n    return refCount;\n}\n\nHRESULT __stdcall DeviceEventsCallback::OnEvent(IPortableDeviceValues* pEventParameters)\n{       \n    HRESULT hr = S_OK;\n\n    if (pEventParameters == NULL) {\n        hr = E_POINTER;\n        return hr;\n    }\n\n    // The pEventParameters collection contains information about the event that was\n    // fired. We'll at least need the EVENT_ID to figure out which event was fired\n    // and based on that retrieve additional values from the collection\n\n    // Display the event that was fired\n    GUID EventId;\n\n    if (EventId == WPD_EVENT_DEVICE_CAPABILITIES_UPDATED) {\n        return S_OK;\n    }\n\n    if (hr == S_OK) {\n        hr = pEventParameters-&gt;GetGuidValue(WPD_EVENT_PARAMETER_EVENT_ID, &amp;EventId);\n    }\n\n    if (EventId == WPD_EVENT_DEVICE_REMOVED) {\n        return S_OK;\n    }\n\n    LPWSTR pwszEventId = NULL;\n\n    if (hr == S_OK) {\n        hr = StringFromCLSID(EventId, &amp;pwszEventId);\n    }\n\n    if (pwszEventId != NULL) {\n        CoTaskMemFree(pwszEventId);\n    }\n\n    // Display the ID of the object that was affected\n    // We can also obtain WPD_OBJECT_NAME, WPD_OBJECT_PERSISTENT_UNIQUE_ID,\n    // WPD_OBJECT_PARENT_ID, etc.\n    LPWSTR pwszObjectId = NULL;\n\n    if (hr == S_OK) {\n        hr = pEventParameters-&gt;GetStringValue(WPD_OBJECT_ID, &amp;pwszObjectId);\n    }\n\n    if (parentDevice != nullptr &amp;&amp; pwszObjectId != nullptr &amp;&amp; EventId == WPD_EVENT_OBJECT_ADDED) {\n        qDebug() &lt;&lt; \"invoked method\";\n        QMetaObject::invokeMethod(parentDevice, \"onNewFileOnDevice\", Qt::DirectConnection, Q_ARG(QString, QString::fromStdWString(pwszObjectId)));\n    }\n\n    if (pwszObjectId != NULL) {\n        CoTaskMemFree(pwszObjectId);\n    }\n\n    // Note that we intentionally do not call Release on pEventParameters since we\n    // do not own it\n\n    return hr;\n}  \n</code></pre>\n\n<p>And in my MTP implementation I register my DeviceEventsCallback() eventNotifier</p>\n\n<pre><code>void MyPortableDevice::registerEventNotification(ComPtr&lt;IPortableDevice&gt; pDevice)\n{\n    HRESULT hr = S_OK;\n    PWSTR tempEventCookie = nullptr;\n\n    if (pwszEventCookie != nullptr || pDevice == nullptr) {\n        return;\n    }\n\n    eventNotifier = new(std::nothrow) DeviceEventsCallback(this);\n\n    if (eventNotifier == nullptr) {\n        hr = E_OUTOFMEMORY;\n    }\n\n    if (hr == S_OK) {\n        hr = pDevice-&gt;Advise(0, eventNotifier, nullptr, &amp;tempEventCookie);\n    }\n\n    if (hr == S_OK) {\n        pwszEventCookie = tempEventCookie;\n        tempEventCookie = nullptr; // relinquish memory to the caller\n    }\n    else {\n        // Free the event registration cookie because some error occurred\n        CoTaskMemFree(tempEventCookie);\n        tempEventCookie = nullptr;\n    }\n}\n\nvoid MyPortableDevice::unregisterEventsNotification(ComPtr&lt;IPortableDevice&gt; pDevice)\n{\n    if (pDevice == nullptr || pwszEventCookie == nullptr) {\n        return;\n    }\n\n    HRESULT hr = pDevice-&gt;Unadvise(pwszEventCookie);\n\n    CoTaskMemFree(pwszEventCookie);\n    pwszEventCookie = nullptr;\n}\n</code></pre>\n\n<p>My open() function looks like this:</p>\n\n<pre><code>bool MyPortableDevice::open(IPortableDevice** ppDevice)\n{\n    retrieveClientInformation(&amp;clientInformation);\n    IPortableDevice* pDevice = nullptr;\n\n    HRESULT hr = CoCreateInstance(CLSID_PortableDeviceFTM, nullptr, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&amp;pDevice));\n\n    if (SUCCEEDED(hr)) {\n        wchar_t* wID = new wchar_t[ID.length() + 1];\n        ID.toWCharArray(wID);\n        wID[ID.length()] = '\\0';\n\n        hr = pDevice-&gt;Open(wID, clientInformation.Get());\n\n        if (hr == E_ACCESSDENIED) {\n            qDebug() &lt;&lt; \"Failed to Open the device for Read Write access, will open it for Read-only access instead\" &lt;&lt; hr;\n            clientInformation-&gt;SetUnsignedIntegerValue(WPD_CLIENT_DESIRED_ACCESS, GENERIC_READ);\n            hr = pDevice-&gt;Open(wID, clientInformation.Get());\n\n            readOnly = true;\n        }\n        if (SUCCEEDED(hr)) {\n            // The device successfully opened, obtain an instance of the Device into\n            // ppDevice so the caller can be returned an opened IPortableDevice.\n            hr = pDevice-&gt;QueryInterface(IID_IPortableDevice, (VOID**)ppDevice);\n            if (FAILED(hr)) {\n                qDebug() &lt;&lt; \"Failed to QueryInterface the opened IPortableDevice\";\n                return  false;\n            }\n        }\n\n        if (pDevice != nullptr) {\n            pDevice-&gt;Release();\n            pDevice = nullptr;\n        }\n\n        delete [] wID;\n        wID = nullptr;\n\n        if (clientInformation != nullptr) {\n            clientInformation.Reset();\n            clientInformation = nullptr;\n        } \n\n        return true;\n    }\n    else {\n        qDebug() &lt;&lt; \"! Failed to CoCreateInstance CLSID_PortableDeviceFTM, hr = 0x%lx\\n\" &lt;&lt; hr;\n        return false;\n    }\n} \n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "visual-studio-2017", "c++14"], "comments": [{"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1520436208, "post_id": 49155224, "comment_id": 85315453, "body": "Install SDK 8.1 and see if toolset v140 works normally."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1520436354, "post_id": 49155224, "comment_id": 85315574, "body": "@seccpur: The platform toolset isn&#39;t part of the SDK. And why the 8.1 SDK anyway? What does it offer over the current SDK?"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1520436487, "post_id": 49155224, "comment_id": 85315680, "body": "Some app developed with v141 works alright under windows 10 but fails with windows 7, so a check is better. SDK 8.1 preferred for win7 &amp; 8 IMHO"}, {"owner": {"reputation": 143, "user_id": 6503426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ef1f4591f4377fe99e04a4ba3de5fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. G", "link": "https://stackoverflow.com/users/6503426/mr-g"}, "reply_to_user": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1520444544, "post_id": 49155224, "comment_id": 85321117, "body": "@seccpur: 8.1 SDK already installed. Toolset v140 works normally. But stil v141 does not work"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1520475518, "post_id": 49155224, "comment_id": 85334189, "body": "@Mr.G: Which OS are you testing the executable with 10.xxx framework ? Test it in windows 10"}, {"owner": {"reputation": 143, "user_id": 6503426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ef1f4591f4377fe99e04a4ba3de5fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. G", "link": "https://stackoverflow.com/users/6503426/mr-g"}, "reply_to_user": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1520501729, "post_id": 49155224, "comment_id": 85344632, "body": "@seccpur: I&#39;m using windows 10. SDK 8.1 + SDK 10 installed"}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 3701429, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1777520145/picture?type=large", "display_name": "Muhmmad Abubakar Ikram", "link": "https://stackoverflow.com/users/3701429/muhmmad-abubakar-ikram"}, "edited": false, "score": 0, "creation_date": 1533838422, "post_id": 49173415, "comment_id": 90505649, "body": "Thank you so much."}], "tags": [], "owner": {"reputation": 143, "user_id": 6503426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ef1f4591f4377fe99e04a4ba3de5fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. G", "link": "https://stackoverflow.com/users/6503426/mr-g"}, "is_accepted": true, "score": 3, "last_activity_date": 1520520747, "last_edit_date": 1520520747, "creation_date": 1520513015, "answer_id": 49173415, "question_id": 49155224, "link": "https://stackoverflow.com/questions/49155224/vs-2017-fail-to-create-c-projects/49173415#49173415", "title": "VS 2017: fail to create C++ projects", "body": "<p>Problem solved:</p>\n\n<p>Remove the (user) environment variable: <code>VCTargetsPath</code></p>\n"}], "owner": {"reputation": 143, "user_id": 6503426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ef1f4591f4377fe99e04a4ba3de5fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. G", "link": "https://stackoverflow.com/users/6503426/mr-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 49173415, "answer_count": 1, "score": 0, "last_activity_date": 1520520747, "creation_date": 1520435528, "last_edit_date": 1520446490, "question_id": 49155224, "link": "https://stackoverflow.com/questions/49155224/vs-2017-fail-to-create-c-projects", "title": "VS 2017: fail to create C++ projects", "body": "<p>I have VS 2015 already running. Just installed VS 2017, but I fail to create C++ projects.\nI get the following error:</p>\n\n<pre><code>The \"CL\" rule is missing the \"ConformanceMode\" property\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/j5Xz3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j5Xz3.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I see that in the project properties in 'platform toolset' I get \"v141 (not installed)\":</p>\n\n<p><a href=\"https://i.stack.imgur.com/rDCua.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rDCua.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>and in VS 2017 installation I see that v141 toolset is installed:</p>\n\n<p><a href=\"https://i.stack.imgur.com/h30tn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h30tn.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I have already try to repair and to re-install VS 2015 and VS 2017.</p>\n\n<p>Regards,\nG.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1520436548, "post_id": 49155136, "comment_id": 85315744, "body": "I&#39;m not sure whether Qt is the best choice for your specific task. This library is very portable and customizable but definitely not the fastest concerning refresh rates. (I don&#39;t want to blame Qt - for a usual GUI, this is fully acceptable considering that human perception rate is round about 100 ms (and the average patience of users even longer)). For high-performance rendering, I would recommend OpenGL. The synchronization with vertical blank is an OpenGL extension for which you have good chances for support in your OpenGL driver. (I know that NVidia supports this.)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 2, "creation_date": 1520436954, "post_id": 49155136, "comment_id": 85316053, "body": "Actually, Qt has OpenGL support built-in. Thus, this could be a possible option to use <a href=\"http://doc.qt.io/qt-5/qopenglwidget.html\" rel=\"nofollow noreferrer\"><code>QOpenGLWidget</code></a> with <a href=\"http://doc.qt.io/qt-5/qopenglfunctions.html\" rel=\"nofollow noreferrer\"><code>QOpenGLFunctions</code></a> instead of <code>QLabel</code>s with <code>QPixmap</code>s. However, I&#39;m not quite sure whether the <code>QLabel</code>/<code>QPixmap</code> rendering is the bottleneck. I&#39;m afraid the general event processing of Qt could be a problem as well. Nevertheless, the OpenGL VSync ext. to solve the VBL issue is probably solvable with <code>QOpenGL...</code>. May be, it even can be activated/forced in the Windows Graphics Driver settings."}, {"owner": {"reputation": 91, "user_id": 5101832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7b4ddd2fb6e693bd0fd2b4fd1bf0ca?s=128&d=identicon&r=PG&f=1", "display_name": "dbrue", "link": "https://stackoverflow.com/users/5101832/dbrue"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520438623, "post_id": 49155136, "comment_id": 85317284, "body": "I only need very basic textures, and the are almost anytime constant therefore the rendering should not be the problem. If I&#39;m switching to OpenGL which is completly new to me should I use QOpenGLWidget, GLFW or what else?"}, {"owner": {"reputation": 91, "user_id": 5101832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7b4ddd2fb6e693bd0fd2b4fd1bf0ca?s=128&d=identicon&r=PG&f=1", "display_name": "dbrue", "link": "https://stackoverflow.com/users/5101832/dbrue"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520438865, "post_id": 49155136, "comment_id": 85317449, "body": "If I use OpenGL and let the NVidia driver handle the synchronization to the vertical blank, can you get back a timestamp when the actual swap occured?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520438999, "post_id": 49155136, "comment_id": 85317549, "body": "<code>QOpenGLWidget</code> for the widget and <code>QOpenGLFunctions</code> for the OpenGL binding. GLFW is not needed (except you decide to skip Qt at all). There should be many simple examples to find with google, some in the Qt doc., (a few published by me in SO)."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520439155, "post_id": 49155136, "comment_id": 85317660, "body": "Timestamp of last VBL? Phew... never thought about this... I recently researched/read about time measurement of OpenGL rendering (which is usually done in the GPU and not easily retrieved on CPU side). This might be worth a research..."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520439463, "post_id": 49155136, "comment_id": 85317860, "body": "For my luck, the resp. browser tabs are still open: <a href=\"https://stackoverflow.com/q/30104982/7478597\">SO: OpenGL, measuring rendering time on gpuOpenGL, measuring rendering time on gpu</a> and <a href=\"https://www.opengl.org/discussion_boards/showthread.php/171554-How-to-measure-timing-in-OpenGL\" rel=\"nofollow noreferrer\">Khronos: How to measure timing in OpenGL?</a>. My google search terms were &#39;get opengl rendering time&#39; and there were a lot more hits..."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1520439819, "post_id": 49155136, "comment_id": 85318123, "body": "I mentioned the OpenGL rendering time measurement because it is usually connected to the issue, to detect done rendering on CPU side (this is probably related to back/front buffer swap which in turn should be synchronized to the VBL if VSync is enabled). This said with a grain of salt, as I do not have personal experiences about this..."}], "owner": {"reputation": 91, "user_id": 5101832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7b4ddd2fb6e693bd0fd2b4fd1bf0ca?s=128&d=identicon&r=PG&f=1", "display_name": "dbrue", "link": "https://stackoverflow.com/users/5101832/dbrue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520435268, "creation_date": 1520435268, "question_id": 49155136, "link": "https://stackoverflow.com/questions/49155136/frame-accurate-drawing-bufferswap", "title": "Frame accurate drawing (bufferswap)", "body": "<p>How to bufferswap between two textures, to achieve drawing on the next VBL?</p>\n\n<p>Currently I'm using two QPixmap which I set to a QLabel. This results in a unstable delay between 18ms and 45ms measured against parallelport, using a 85Hz CRT monitor (no buffers there which add any delays).</p>\n\n<p>My goal would be to issue a flip command which leads to bufferswap on the next VBL (Vertical Blanking Interrupt).</p>\n\n<p>What I have tried now:\nI setup a full screen window in the main.cpp (different problem: can't open a window at runtime) and initialize there two QPixmaps.</p>\n\n<p>With a signal created by a timer I trigger the change:</p>\n\n<pre><code>myVisualStimuli = new VisualStimuli(0);\n    //Start Timer for Stimulus Presenation\n    StimulusThread = new QThread(this);\n    StimulusTimer = new QTimer(0);\n    StimulusTimer-&gt;setInterval(500);\n    StimulusTimer-&gt;moveToThread(StimulusThread);\n    myVisualStimuli-&gt;moveToThread(StimulusThread);\n\n    myVisualStimuli-&gt;connect(StimulusTimer, SIGNAL(timeout()), SLOT(SetStimulus()), Qt::DirectConnection);\n    this-&gt;connect(StimulusTimer, SIGNAL(timeout()), SLOT(SetStimulus()), Qt::DirectConnection);\n\n    // Make sure the timer gets started from m_thread.\n    StimulusTimer-&gt;connect(StimulusThread, SIGNAL(started()), SLOT(start()));\n    StimulusThread-&gt;start();\n</code></pre>\n\n<p>And the Drawing:   Header  / Code</p>\n\n<pre><code>#ifndef VISUALSTIMULI_H\n#define VISUALSTIMULI_H\n\n#include &lt;QtCore&gt;\n#include &lt;QObject&gt;\n#include &lt;QThread&gt;\n#include &lt;QLabel&gt;\n\nclass VisualStimuli: public QThread\n{\n    Q_OBJECT\npublic:\n    explicit  VisualStimuli(QObject *parent = 0);\n    int Setup();\n    bool StimulusToggle = true;\n\n    QRect *screenres;\n    QLabel* StimulusWindow;\n\n    QPixmap *pix1;\n    QPixmap *pix2;\npublic slots:\n    void SetStimulus();\nprivate:\nprotected:\n    void run();\n\n};\n\n#endif // VISUALSTIMULI_H\n\n\n#include \"visualstimuli.h\"\nVisualStimuli::VisualStimuli(QObject *parent) : QThread(parent)\n{\n\n}\n\nint VisualStimuli::Setup()\n{\n    return 0;\n}\n\nvoid VisualStimuli::SetStimulus()\n{\n    start();\n\n}\n\nvoid VisualStimuli::run()\n{\n    if(StimulusToggle){\n        this-&gt;StimulusWindow-&gt;setPixmap(*pix1);\n        StimulusToggle=false;\n    }else{\n        this-&gt;StimulusWindow-&gt;setPixmap(*pix2);\n        StimulusToggle=true;\n    }\n}\n</code></pre>\n\n<p>Due to Hardware I'm bound to Windows 10 64Bit, so I 'don\u2019t mind to use any platform dependent code/library for the stimulus presentation.</p>\n"}, {"tags": ["android", "c++", "cmake", "android-ndk"], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 4265430, "user_type": "registered", "profile_image": "https://graph.facebook.com/222406925/picture?type=large", "display_name": "aiusepsi", "link": "https://stackoverflow.com/users/4265430/aiusepsi"}, "reply_to_user": {"reputation": 658, "user_id": 4182946, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-Cbh2k0RN26U/AAAAAAAAAAI/AAAAAAAAADE/3unk-s0QwlI/photo.jpg?sz=128", "display_name": "TooLazy", "link": "https://stackoverflow.com/users/4182946/toolazy"}, "edited": false, "score": 0, "creation_date": 1520521444, "post_id": 49156259, "comment_id": 85357631, "body": "Oops, yep, fixed it. Sorry about that; I assumed Cmake would be slight more sensible than it is."}], "tags": [], "owner": {"reputation": 304, "user_id": 4265430, "user_type": "registered", "profile_image": "https://graph.facebook.com/222406925/picture?type=large", "display_name": "aiusepsi", "link": "https://stackoverflow.com/users/4265430/aiusepsi"}, "is_accepted": true, "score": 0, "last_activity_date": 1520521605, "last_edit_date": 1520521605, "creation_date": 1520438420, "answer_id": 49156259, "question_id": 49155031, "link": "https://stackoverflow.com/questions/49155031/android-cmake-different-abi/49156259#49156259", "title": "Android cmake different abi", "body": "<p>You need to add an include directory so that the compiler can find <code>openssl/md5.h</code>.</p>\n\n<p>The most idiomatic way to do this would be:</p>\n\n<pre><code>target_include_directories(crypto INTERFACE\n    ${CMAKE_SOURCE_DIR}/libs/${ANDROID_ABI}/include)\n</code></pre>\n\n<p>Unfortunately, CMake is silly, and doesn't actually let you do this yet on imported library targets, so you have to set the property manually, like so:</p>\n\n<pre><code>set_target_properties(crypto\n    PROPERTIES\n    IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/libs/${ANDROID_ABI}/lib/libcrypto.a\n    INTERFACE_INCLUDE_DIRECTORIES ${CMAKE_SOURCE_DIR}/libs/${ANDROID_ABI}/include\n)\n</code></pre>\n\n<p>That adds that include directory to the interface of crypto, which means it also gets used when building native-lib, as properties which are preceded with INTERFACE are propagated to the users of that target. Using INTERFACE properties is the natural way in CMake to propagate usage requirements to consumers of a library.</p>\n"}, {"tags": [], "owner": {"reputation": 16285, "user_id": 4860513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNzBp.jpg?s=128&g=1", "display_name": "W0rmH0le", "link": "https://stackoverflow.com/users/4860513/w0rmh0le"}, "is_accepted": false, "score": 0, "last_activity_date": 1520454436, "creation_date": 1520454436, "answer_id": 49160646, "question_id": 49155031, "link": "https://stackoverflow.com/questions/49155031/android-cmake-different-abi/49160646#49160646", "title": "Android cmake different abi", "body": "<p>Could you please try to one of the codes below:</p>\n\n<pre><code>include_directories(\"${CMAKE_SOURCE_DIR}/libs/${ANDROID_ABI}/include\")\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>target_include_directories(native-lib \"${CMAKE_SOURCE_DIR}/libs/${ANDROID_ABI}/include\")\n</code></pre>\n\n<p>If I'm not wrong, <code>target_include_directories</code> include files to a specific target. Since you are importing the header file in your <code>native-lib</code> files, <code>target_include_directories</code> must aim the <code>native-lib</code>.. and not <code>crypto</code>.. Those header files are not necessary to <code>crypto</code>... but to <code>native-lib</code>.</p>\n\n<p>For any case, you can set <code>include_directories</code> which will add those header files to all targets (<code>native-lib</code> and <code>crypto</code>).</p>\n\n<p>Also, remember:</p>\n\n<p>1 - Edit your CMakeLists.txt</p>\n\n<p>2 - Perform a project sync</p>\n\n<p>3 - Only after that, open your <code>native-lib.cpp</code> file and try to import the file header file again.</p>\n"}], "owner": {"reputation": 658, "user_id": 4182946, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-Cbh2k0RN26U/AAAAAAAAAAI/AAAAAAAAADE/3unk-s0QwlI/photo.jpg?sz=128", "display_name": "TooLazy", "link": "https://stackoverflow.com/users/4182946/toolazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2172, "favorite_count": 1, "accepted_answer_id": 49156259, "answer_count": 2, "score": 2, "last_activity_date": 1520521605, "creation_date": 1520434999, "last_edit_date": 1520449079, "question_id": 49155031, "link": "https://stackoverflow.com/questions/49155031/android-cmake-different-abi", "title": "Android cmake different abi", "body": "<p>Im using prebuilt android native library: <code>libcrypto.a</code>.\nLibrary is compiled for <code>armeabi, armeabi-v7a and x86</code>.\nStructure:</p>\n\n<pre><code>-app\n  - CMakeLists.txt\n  - libs\n    - armeabi\n    - armeabi-v7a\n    - x86\n</code></pre>\n\n<p>Each folder (<code>armeabi, armeabi-v7a and x86</code>) contains folders <code>lib</code>(contains <code>libcrypto.a</code>) and <code>include</code> (contains header files).\nCMake code:</p>\n\n<pre><code>add_library( # Sets the name of the library.\n             native-lib\n\n             # Sets the library as a shared library.\n             SHARED\n\n             # Provides a relative path to your source file(s).\n             src/main/cpp/native-lib.cpp )\n\nadd_library(crypto STATIC IMPORTED)\nset_target_properties(crypto\n  PROPERTIES IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/libs/${ANDROID_ABI}/lib/libcrypto.a)\n\ntarget_link_libraries( # Specifies the target library.\n                       native-lib\n                       crypto\n                       # Links the target library to the log library\n                       # included in the NDK.\n                       ${log-lib})\n</code></pre>\n\n<p>In my own <code>native-lib</code> i wanna use <code>libcrypto.a</code>. But when i wanna import header file f.e. <code>#include \"openssl/md5.h\"</code> android studio does not see that file.\nAnd offer me to include one of THREE files from different abis:</p>\n\n<pre><code>\"../../../libs/x86/include/openssl/md5.h\"\n\"../../../libs/armeabi/include/openssl/md5.h\"\n\"../../../libs/armeabi-v7a/include/openssl/md5.h\"\n</code></pre>\n\n<p>Is there any way to create one version of my library (<code>native-lib</code>), include only 1 header and let android studio to choose abi automatically?</p>\n\n<p>Smth like:</p>\n\n<pre><code>#include \"openssl/md5.h\"\n</code></pre>\n\n<p>but in the same time use 3 abi version.\nOr i should use prebuilt included libraries not like that?</p>\n\n<p><strong>#EDIT1</strong></p>\n\n<pre><code>target_include_directories(crypto INTERFACE ${CMAKE_SOURCE_DIR}/libs/${ANDROID_ABI}/include)\n</code></pre>\n\n<p>Not working, getting CMake error.</p>\n\n<p>Before that i have used </p>\n\n<pre><code>target_include_directories(${CMAKE_SOURCE_DIR}/libs/${ANDROID_ABI}/include/)\n</code></pre>\n"}, {"tags": ["c++", "g++", "copy-constructor", "copy-assignment"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1520435125, "post_id": 49155028, "comment_id": 85314568, "body": "Reading the padding between members is undefined behavior. You can&#39;t expect it to remain unchanged."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1520435165, "post_id": 49155028, "comment_id": 85314594, "body": "Why is it UB?  <code>memcopy</code> copies the members correctly.  That&#39;s the only thing that matters."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1520435675, "post_id": 49155028, "comment_id": 85315027, "body": "Why are you expecting zeroes in the padding? The standard does not require it to be anything in particular."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2621805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2112dae92edc1c163a78dc572dd9e02?s=128&d=identicon&r=PG", "display_name": "Salvatore Barone", "link": "https://stackoverflow.com/users/2621805/salvatore-barone"}, "edited": false, "score": 0, "creation_date": 1520438125, "post_id": 49155363, "comment_id": 85316880, "body": "I see your observation and I can report the following: disassembling the code I have noticed that the assignmnent operator is translated as     movq   -0x8(%rbp), %rdi     movq   %rdi, 0x16a(%rip)  once the constructor is called. The standard doesn&#39;t specify the padding, rather it defines that the implicit assignment operator is guaranteed to copy member-wise the object."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 43, "user_id": 2621805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2112dae92edc1c163a78dc572dd9e02?s=128&d=identicon&r=PG", "display_name": "Salvatore Barone", "link": "https://stackoverflow.com/users/2621805/salvatore-barone"}, "edited": false, "score": 0, "creation_date": 1520438541, "post_id": 49155363, "comment_id": 85317220, "body": "yes and C++ allows an implementation to not follow the spec. word for word, but the implementation can instead behave &quot;as if&quot; it did, as observed per the guarantees in the C++ spec. See also <a href=\"http://en.cppreference.com/w/cpp/language/as_if\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/as_if</a> ."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 43, "user_id": 2621805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2112dae92edc1c163a78dc572dd9e02?s=128&d=identicon&r=PG", "display_name": "Salvatore Barone", "link": "https://stackoverflow.com/users/2621805/salvatore-barone"}, "edited": false, "score": 0, "creation_date": 1520444781, "post_id": 49155363, "comment_id": 85321267, "body": "@Salvatore - Member-wise copying doesn&#39;t preclude copying both members at the same time. On a 64-bit machine I would only see it as natural to copy 64 bits at a time.  :-)"}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 4, "last_activity_date": 1520436197, "last_edit_date": 1520436197, "creation_date": 1520435869, "answer_id": 49155363, "question_id": 49155028, "link": "https://stackoverflow.com/questions/49155028/gcc-uses-memcpy-for-implicit-copy-assignment-operator-instead-of-member-wise-cop/49155363#49155363", "title": "Gcc uses memcpy for implicit copy-assignment operator instead of member-wise copy", "body": "<p>A C++ compiler can implement copying of the members in any manner it wants to as long as the result conforms to the C++ specs.</p>\n\n<p>In this case where the members are only fundamental types, and the underlying architecture doesn't get in the way, your C++ compiler could very well use memcpy() to perform the copying.</p>\n\n<p>On many implementations there will be <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow noreferrer\">padding</a> in the memory layout between the <code>char membro1</code> and <code>char membro2</code> members in your object. </p>\n\n<p>The memory layout you see on your particular implementation will mean something like this:</p>\n\n<pre><code>{0x61, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00}\n |     |      |     |     |__________________|\n |     padding|     |              |\n |           padding|            membro2\nmembro1            padding\n</code></pre>\n\n<p>The content of the memory in these 3 padding bytes are not specified, so any value you somehow observe there is of no consequence as far as C++ is concerned - even if a particular implementation happened to copy over some values in that padding area from the stack.</p>\n"}], "owner": {"reputation": 43, "user_id": 2621805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2112dae92edc1c163a78dc572dd9e02?s=128&d=identicon&r=PG", "display_name": "Salvatore Barone", "link": "https://stackoverflow.com/users/2621805/salvatore-barone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 49155363, "answer_count": 1, "score": 1, "last_activity_date": 1520436197, "creation_date": 1520434990, "question_id": 49155028, "link": "https://stackoverflow.com/questions/49155028/gcc-uses-memcpy-for-implicit-copy-assignment-operator-instead-of-member-wise-cop", "title": "Gcc uses memcpy for implicit copy-assignment operator instead of member-wise copy", "body": "<p>following the c++ 11 standard i suppose that g++ implicitly uses a member-wise copy whenever an assignment between two objects is done. Surprisingly I noticed that contrary to the standard, g++ seems to invoke a memcpy sized at the actual size of the object. Here below a snippet of what I meant. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nclass Classe {\npublic:\n    Classe(char m1 = 0, int m2 = 0) : membro1(m1), membro2(m2) {};\n\n    void setMembro1(char m1)    {membro1 = m1;}\n    void setMembro2(int m2)     {membro2 = m2;}\n    char getMembro1() const     {return membro1;}\n    int getMembro2() const      {return membro2;}\nprivate:\n    char membro1;\n    int membro2;\n};\n\nClasse c;\n\nvoid function() {\n    c = Classe('a', 1);\n}\n\nint main() {\n    char ciao[] = \"HELLO!\";\n    printf(\"Ciao\\n\");\n    function();\n    printf(\"%d\\n\", sizeof(Classe));\n}\n</code></pre>\n\n<p>At the end of execution I expect that the memory in which the \"c\" object is located is {0x61, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00}, but apparently, next to the first location (which contains 0x61), some of the stack of the \"function\" function data are actually copied over, which is uncorrect, imho.</p>\n\n<p>Do you have any idea of what's happening?\nMany thanks for your effort.</p>\n"}, {"tags": ["c++", "zeromq", "publish-subscribe"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520435558, "post_id": 49154791, "comment_id": 85314920, "body": "<code>theory every socket type can bind or connect</code> no - udp doesn&#39;t make connections. You bind to a port on both sides and send data to the other end... nothing ensures that the data will be received; or will tell you that it is"}, {"owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520435729, "post_id": 49154791, "comment_id": 85315068, "body": "Okay. But please tell why above code fails.@UKMonkey"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520435830, "post_id": 49154791, "comment_id": 85315158, "body": "I&#39;d have to install zeromq; take your code; and then follow the steps in <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>   It would help if you said what the error was; but learning to debug your own programs is somewhat essential before attempting to do such complex tasks as this"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1520440148, "post_id": 49154791, "comment_id": 85318331, "body": "Would you kindly also post the ZeroMQ version + zmq_error number + where it has actually happened? ( <b>all the normal debugging details</b> )"}, {"owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 1, "creation_date": 1520482955, "post_id": 49154791, "comment_id": 85336044, "body": "Version : 4.2.3   After I run the program ,this is the output that I get: for publisher.cpp  &quot;terminate called after throwing an instance of &#39;zmq::error_t&#39;   what():  Invalid argument Aborted&quot;  For subscriber.cpp:&quot; terminate called after throwing an instance of &#39;zmq::error_t&#39;   what():  No such device Aborted&quot;"}, {"owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 0, "creation_date": 1520483115, "post_id": 49154791, "comment_id": 85336121, "body": "UPDATE: The code is working when I changed the line -  subscriber.bind(&quot;tcp://localhost:5556&quot;); to subscriber.bind(&quot;tcp://*:5556&quot;);      and     publisher.connect(&quot;tcp://*:5556&quot;); to publisher.connect(&quot;tcp://localhost:5556&quot;);"}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 0, "creation_date": 1520483275, "post_id": 49157027, "comment_id": 85336182, "body": "UPDATE: The code is working when I changed the line -  subscriber.bind(&quot;tcp://localhost:5556&quot;); to subscriber.bind(&quot;tcp://*:5556&quot;);      and     publisher.connect(&quot;tcp://*:5556&quot;); to publisher.connect(&quot;tcp://localhost:5556&quot;);"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 0, "creation_date": 1520483663, "post_id": 49157027, "comment_id": 85336294, "body": "Right, error traces may look mystic, but clear - the 1st is related to symbolic-name translation, the 2nd is a residual nonsense from a SLOC being manually changed / edited from .bind() method, where it had sense to .connect(), where wildcard expansion lost the sense. <b>Glad you have debugged down to the root cause.</b>"}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": false, "score": 0, "last_activity_date": 1520442824, "last_edit_date": 1520442824, "creation_date": 1520440804, "answer_id": 49157027, "question_id": 49154791, "link": "https://stackoverflow.com/questions/49154791/binding-a-subscriber-socket-and-connecting-a-publisher-socket-in-zeromq-is-givin/49157027#49157027", "title": "Binding a subscriber socket and connecting a publisher socket in ZeroMQ is giving error when the code is run. Why?", "body": "<h2>No, there is no problem in reversed <code>.bind()/.connect()</code></h2>\n\n<p>This principally works fine.</p>\n\n<p>Yet, the <strong><code>PUB/SUB</code></strong> Formal Archetype is <a href=\"https://stackoverflow.com/a/26688152\"><strong>subject</strong> to a so called <strong>late-joiner syndrome</strong>.</a></p>\n\n<p>Without thorough debugging details, as were requested above, one may just repeat general rules of thumb:</p>\n\n<p>In newer API versions one may<br>\nadd <code>rc = &lt;aSocket&gt;.setsockopt( ZMQ_CONFLATE,  1 ); assert( rc &amp; \"CONFLATE\"  );</code><br>\nadd <code>rc = &lt;aSocket&gt;.setsockopt( ZMQ_IMMEDIATE, 1 ); assert( rc &amp; \"IMMEDIATE\" );</code><br>\nand so forth,<br>\nall that to better tune the context-instance + socket-instance attributes, so as to minimise the late-joiner syndrome effects.</p>\n"}, {"tags": [], "owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "is_accepted": false, "score": 0, "last_activity_date": 1521007026, "creation_date": 1521007026, "answer_id": 49270620, "question_id": 49154791, "link": "https://stackoverflow.com/questions/49154791/binding-a-subscriber-socket-and-connecting-a-publisher-socket-in-zeromq-is-givin/49270620#49270620", "title": "Binding a subscriber socket and connecting a publisher socket in ZeroMQ is giving error when the code is run. Why?", "body": "<p>There is no problem with reversed bind()/connect().\nThe code is working when I changed the line - subscriber.bind(\"tcp://localhost:5556\"); \nto \nsubscriber.bind(\"tcp://<em>:5556\"); \nand \npublisher.connect(\"tcp://</em>:5556\"); \nto\npublisher.connect(\"tcp://localhost:5556\"); </p>\n"}], "owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 988, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1521007026, "creation_date": 1520434349, "last_edit_date": 1520440069, "question_id": 49154791, "link": "https://stackoverflow.com/questions/49154791/binding-a-subscriber-socket-and-connecting-a-publisher-socket-in-zeromq-is-givin", "title": "Binding a subscriber socket and connecting a publisher socket in ZeroMQ is giving error when the code is run. Why?", "body": "<p>In this code the Subscriber ( in <code>subscriber.cpp</code> code ) socket binds to port 5556.</p>\n\n<p>It receives updates/messages from publisher ( in <code>subscriber.cpp</code> ), and publisher socket connects to the subscriber at 5556 and sends updates/messages to it.</p>\n\n<p>I know that convention is to <code>.bind()</code> a publisher and not to call <code>.connect()</code> on it. But by theory every socket type can <code>.bind()</code> or <code>.connect()</code>.</p>\n\n<p>But, both the codes give zmq error when run. <strong>Why?</strong>  </p>\n\n<p>This is CPP code.</p>\n\n<p><strong><code>publisher.cpp</code></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;zmq.hpp&gt;\n#include &lt;zhelpers.hpp&gt;\n\nusing namespace std;\nint main () {\n\nzmq::context_t context (1);\nzmq::socket_t publisher(context, ZMQ_PUB);\npublisher.connect(\"tcp://*:5556\");\nwhile (1) {\n\n    zmq::message_t request (12);\n    memcpy (request.data (), \"Pub-1 Data\", 12);\n    sleep(1);\n    publisher.send (request);\n}\nreturn 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong><code>subcriber.cpp</code></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;zmq.hpp&gt;\n\nint main (int argc, char *argv[])\n{\nzmq::context_t context (1);\nzmq::socket_t subscriber (context, ZMQ_SUB);\nsubscriber.bind(\"tcp://localhost:5556\");\nsubscriber.setsockopt(ZMQ_SUBSCRIBE, \"\", 0); // subscribe to all messages\n\n//  Process 10 updates\nint update_nbr;\nfor (update_nbr = 0; update_nbr &lt; 10 ; update_nbr++) {\n\n    zmq::message_t update;\n    subscriber.recv (&amp;update);\n    std::string updt = std::string(static_cast&lt;char*&gt;(update.data()), update.size());\n    std::cout &lt;&lt; \"Received Update/Messages/TaskList \" &lt;&lt; update_nbr &lt;&lt;\" : \"&lt;&lt; updt &lt;&lt; std::endl;\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "erlang", "ejabberd"], "comments": [{"owner": {"reputation": 11, "user_id": 5154702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUshU.jpg?s=128&g=1", "display_name": "Neemit Shastri", "link": "https://stackoverflow.com/users/5154702/neemit-shastri"}, "edited": false, "score": 1, "creation_date": 1521954868, "post_id": 49154678, "comment_id": 85954183, "body": "you can use ejabberd&#39;s XMLRPC for calling ejabberd internal commands using other language (i have implemented using PHP for registering user and add roster). check this link it explains xmlrpc, <a href=\"https://www.ejabberd.im/ejabberd_xmlrpc\" rel=\"nofollow noreferrer\">ejabberd.im/ejabberd_xmlrpc</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2525, "user_id": 6039301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YL6k.gif?s=128&g=1", "display_name": "Badlop", "link": "https://stackoverflow.com/users/6039301/badlop"}, "is_accepted": false, "score": 0, "last_activity_date": 1522745884, "creation_date": 1522745884, "answer_id": 49626000, "question_id": 49154678, "link": "https://stackoverflow.com/questions/49154678/how-to-register-a-new-user-in-ejabberd/49626000#49626000", "title": "How to register a new user in ejabberd", "body": "<blockquote>\n  <p>** exception error: undefined function ejabberd_auth:try_register/3  </p>\n</blockquote>\n\n<p>Oh, that code works for me using ejabberd 18.03. I start ejabberd in live mode, so I have access to the erlang shell, and I can run correctly:</p>\n\n<pre><code>$ ejabberdctl live\n...\n(ejabberd@localhost)2&gt; ejabberd_auth:try_register(&lt;&lt;\"user6\"&gt;&gt;, &lt;&lt;\"localhost\"&gt;&gt;, &lt;&lt;\"somepass\"&gt;&gt;).\nok\n</code></pre>\n\n<p>Maybe you are using an old ejabberd version that doesn't still export ejabberd_auth:try_register/3  ?</p>\n"}], "owner": {"reputation": 5278, "user_id": 3663765, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/03caa8002f94a2ffd40630239d7a35c6?s=128&d=identicon&r=PG&f=1", "display_name": "Program-Me-Rev", "link": "https://stackoverflow.com/users/3663765/program-me-rev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1583142407, "creation_date": 1520434040, "last_edit_date": 1583142407, "question_id": 49154678, "link": "https://stackoverflow.com/questions/49154678/how-to-register-a-new-user-in-ejabberd", "title": "How to register a new user in ejabberd", "body": "<p>From <a href=\"https://stackoverflow.com/a/25546477/3663765\">egoscia's answer</a> on the question <a href=\"https://stackoverflow.com/q/25541829/3663765\">Register a new user in ejabberd using Erlang</a>, he says in the accepted answer that you can add a new user using:  </p>\n\n<pre><code>ejabberd_auth:try_register(&lt;&lt;\"username\"&gt;&gt;, &lt;&lt;\"example.com\"&gt;&gt;, &lt;&lt;\"secret_password\"&gt;&gt;).  \n</code></pre>\n\n<p>I tried using this in erlang, but I get the error:  </p>\n\n<pre><code>** exception error: undefined function ejabberd_auth:try_register/3  \n</code></pre>\n\n<p>This is a snippet of  how I go about it:  </p>\n\n<pre><code>-import(ejabberd_auth, [try_register/3]).\n\nstart() -&gt;\n  io:fwrite(\"Hello World!\\nThis is Sound\\n\"),\n\n  % Chat\n  ejabberd_auth:try_register(&lt;&lt;\"username\"&gt;&gt;, &lt;&lt;\"example.com\"&gt;&gt;, &lt;&lt;\"secret_password\"&gt;&gt;).  \n</code></pre>\n\n<p>How should I go about it erlang? Java/  Android/ C++/ Qt suggestions also welcome.  </p>\n\n<p>Thank you all in advance.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 8, "creation_date": 1520433967, "post_id": 49154640, "comment_id": 85313728, "body": "No, not unless you want to implement your own C++-based scripting language."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520434102, "post_id": 49154640, "comment_id": 85313830, "body": "Since you have tagged your question <code>Qt</code>, perhaps you would be interested in <a href=\"https://doc.qt.io/qt-5.10/qmlapplications.html\" rel=\"nofollow noreferrer\">QML</a> as an alternative?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1520436946, "post_id": 49154640, "comment_id": 85316047, "body": "Is there a reason you want to eval a string instead of just reading the four variables <code>r,g,b,a</code> from your text box?"}, {"owner": {"reputation": 111, "user_id": 8351244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d089d9f2a6ba7544bffe5345e0a33f87?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hu", "link": "https://stackoverflow.com/users/8351244/m-hu"}, "edited": false, "score": 0, "creation_date": 1520439285, "post_id": 49154640, "comment_id": 85317738, "body": "I developed a signal plotter. In its setting I want to add  number of curve and for each curve I define it&#39;s pattern, color ,... for this I use a table. if eval of string was possible, it&#39;s easy for me to input parameter in Qt format."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1520440548, "post_id": 49154640, "comment_id": 85318591, "body": "If you define your table columns as <code>red</code>, <code>green</code>, <code>blue</code>, then it would be easy to do as @Useless suggested and convert those to integral values which can be passed to the <code>QColor</code> constructor."}, {"owner": {"reputation": 111, "user_id": 8351244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d089d9f2a6ba7544bffe5345e0a33f87?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hu", "link": "https://stackoverflow.com/users/8351244/m-hu"}, "edited": false, "score": 0, "creation_date": 1520441207, "post_id": 49154640, "comment_id": 85319034, "body": "There is many way to do this. Thanks for your suggestion. I was looking for the easy way and @ Some programmer dude said nope! there isn&#39;t such way!"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1520442478, "creation_date": 1520442478, "answer_id": 49157564, "question_id": 49154640, "link": "https://stackoverflow.com/questions/49154640/is-any-way-to-read-text-and-execute-that-such-a-code-command-in-c/49157564#49157564", "title": "Is any way to read text and execute that such a code command in C++?", "body": "<p>Yes, there are many ways, I'll list a few:<br>\n<strong>The <code>if</code> statement:</strong>  </p>\n\n<pre><code>std::string command;\nif (command == \"QColor\")\n{\n   m_color = //...;\n}\n</code></pre>\n\n<p><strong>Using <code>std::map</code></strong>  </p>\n\n<pre><code>typedef (void) (*Function_Pointer)(const std::string&amp; arguments);\nvoid ProcessQColorCommand(const std::string&amp; arguments);\nstd::map&lt;string, Function_Pointer&gt; dispatcher;\ndispatcher[\"QColor\"] = ProcessQColorCommand;\n//...\nstd::map&lt;string, Function_Pointer&gt;::iterator iter;\niter = dispatcher.find(command);\nif (iter != dispatcher.end())\n{\n  (*iter-&gt;second)(arguments);\n}\n</code></pre>\n\n<p>You could also make a table of string and function pointer and use that.</p>\n\n<p>You may want to research \"lexing\" and \"parsing\" too.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 8351244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d089d9f2a6ba7544bffe5345e0a33f87?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hu", "link": "https://stackoverflow.com/users/8351244/m-hu"}, "edited": false, "score": 0, "creation_date": 1520628855, "post_id": 49195221, "comment_id": 85409232, "body": "Thank you for your time. I looking for global solution if possible, not just for Qcolor. If you familiar with MATLAB , this software has a eval() function that execute MATLAB expression in text .  I looking for same  function as eval as in c++."}], "tags": [], "owner": {"reputation": 467, "user_id": 9199691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-me45FbxfLtA/AAAAAAAAAAI/AAAAAAAAANY/R1k_wUiVE9c/photo.jpg?sz=128", "display_name": "And&#233;ol Evain", "link": "https://stackoverflow.com/users/9199691/and%c3%a9ol-evain"}, "is_accepted": false, "score": 0, "last_activity_date": 1520603259, "creation_date": 1520603259, "answer_id": 49195221, "question_id": 49154640, "link": "https://stackoverflow.com/questions/49154640/is-any-way-to-read-text-and-execute-that-such-a-code-command-in-c/49195221#49195221", "title": "Is any way to read text and execute that such a code command in C++?", "body": "<p>Let me rephrase just to make sure I understand correctly what you asked: </p>\n\n<p>You get a QString, that can be user input, and looks like: </p>\n\n<p>\"mColor = execute (\\\"QColor\\\"+\\\"(r,g,b,a)\\\");\"</p>\n\n<p>And you want to build a QColor object by analysing this QString and detect the correct parameters? So essentially you need a function that takes QString as Input and gives a QColor as output ?</p>\n\n<p>In that case, I think you should use regular expressions (<a href=\"http://doc.qt.io/qt-5/qregularexpression.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qregularexpression.html</a>). That should help you to extract the required information from the QString, knowing what its structure is supposed to be (and also to detect if the syntax is incorrect).</p>\n\n<p>It all depends on the complexity of what you are trying to detect. For something very simple, you can just use a good-old \"if\" statement, as Thomas Matthews suggested.</p>\n\n<p>For something a bit more complex, Regular Expressions are a good option.</p>\n\n<p>And then if you need to be able to interpret more complicated inputs, you'll have to do a full parser. But in your case, I doubt that you 'd need to go that far.</p>\n"}], "owner": {"reputation": 111, "user_id": 8351244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d089d9f2a6ba7544bffe5345e0a33f87?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hu", "link": "https://stackoverflow.com/users/8351244/m-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520603259, "creation_date": 1520433919, "question_id": 49154640, "link": "https://stackoverflow.com/questions/49154640/is-any-way-to-read-text-and-execute-that-such-a-code-command-in-c", "title": "Is any way to read text and execute that such a code command in C++?", "body": "<p>I want to capture color rgb data from a text box with (r,g,b,a) format And create: </p>\n\n<pre><code>QColor mColor = QColor(r,g,b,a);\n</code></pre>\n\n<p>Is any way to read text  and execute that such a code command?\nFor example If we assume that <code>execute</code> does this :D: </p>\n\n<pre><code>mColor = execute (\"QColor\"+\"(r,g,b,a)\");\n</code></pre>\n\n<p>Is it possible?</p>\n"}, {"tags": ["c++", "mutex", "volatile"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 4, "creation_date": 1520433847, "post_id": 49154567, "comment_id": 85313645, "body": "This is not a correct usage of <code>volatile</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1520433927, "post_id": 49154567, "comment_id": 85313697, "body": "You would have to use <code>atomic</code> or <code>mutex</code> for synchronization, not <code>volatile</code>."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1520433964, "post_id": 49154567, "comment_id": 85313726, "body": "<code>volatile</code> is caused by devices memory mapped IO or other things out of control from the program. Normally <code>volatile</code> is useless."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520433970, "post_id": 49154567, "comment_id": 85313731, "body": "<i>&quot;I know how volatile works in C++.&quot;</i> - Actually, few people do, and I&#39;d question that you are one of them. Please explain what you <i>think</i> it does, so it can be addressed in a potential answer."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1520434019, "post_id": 49154567, "comment_id": 85313766, "body": "<code>volatile</code> is primarily used to tell the <i>compiler</i> that the object&#39;s value can spontaneously change due to external influences. <code>static</code> can&#39;t accomplish this. Though, I see how they both could convey that information to the developer, for a lesser definition of &quot;spontaneously change&quot;."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1520434572, "post_id": 49154567, "comment_id": 85314133, "body": "Use mutex, it is often even better than a spin lock (had you used an atomic)."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 1, "creation_date": 1520435439, "post_id": 49154567, "comment_id": 85314827, "body": "@Oliv With intensive lock contention, the performance difference between mutex and spin lock is considerable."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1520437511, "post_id": 49154567, "comment_id": 85316441, "body": "@Oliv you may find this site of interest <a href=\"http://demin.ws/blog/english/2012/05/05/atomic-spinlock-mutex/\" rel=\"nofollow noreferrer\">demin.ws/blog/english/2012/05/05/atomic-spinlock-mutex</a>"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520438911, "post_id": 49154567, "comment_id": 85317491, "body": "@UKMonkey Unfortunatly, this kind of toy benchmark are not applicable to real code: a code where contantions are avoided. On linux, libpthread implements mutex using first a compare and change on atomic, if it succeed, (which is what happen most of the time), the mutex is locked, otherwise it perform a systemcall that will reschedule the current thread. Here in this &quot;wrong&quot; benchmark, two threads are continuously accessing the same location, leading to an heavily contented execution =&gt; mutex lock will often perform a syscall and reschedule the thread. The advantage of a mutex is that if there"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520438993, "post_id": 49154567, "comment_id": 85317544, "body": "@UKMonkey ... is a contention, the rescheduling will increase the probability that the thread holding the lock execute its critical region and the waiting thread will only restart when the lock will be released."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1520439867, "post_id": 49154567, "comment_id": 85318152, "body": "@Oliv There is no requirement for std::mutex to spin for a while before giving up and waiting.  You&#39;ll find that both pthread and critical sections are able to do so; but clearly in that test the mutex didn&#39;t.  The test highlights that there is some level of contention where spinning is faster than a mutex - what that level is will clearly depend on the system; but if working on a large matrix where contention can&#39;t be completely avoided then it&#39;s an optimisation that can pay off.  In addition you state &quot;better&quot; - but that depends if you care about burning CPU cycles or not."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520445721, "post_id": 49154567, "comment_id": 85321816, "body": "@UKMonkey so at least we agree in this code there is just always contention. Not the level of contention one would have if one were performing a block matrix multiplication. Realy it would surprise me if an implementation of mutex did not have a fast path for non-contended case, but it is true that there is no requirement on the standard for that."}], "answers": [{"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 2, "creation_date": 1520438636, "post_id": 49154877, "comment_id": 85317293, "body": "This doesn&#39;t really answer the question. The OP already knows that locks are the synchronization choice to use. The question is why should the <code>volatile</code> keyword remain in C++ and under what conditions should it be used."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1520441290, "post_id": 49154877, "comment_id": 85319093, "body": "@RichardChambers I am afraid you misinterpret question, OP thinks he knows why <code>volatile</code> is there and he is wrong, so he does not really ask about <code>volatile</code> but how to synchronize properly. At least that how I understood the question and from my understanding I do provide the answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1520442627, "post_id": 49154877, "comment_id": 85319980, "body": "@Slava: Richard is correct. I believe it is you who misunderstood the question."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 5, "last_activity_date": 1520434905, "last_edit_date": 1520434905, "creation_date": 1520434580, "answer_id": 49154877, "question_id": 49154567, "link": "https://stackoverflow.com/questions/49154567/can-i-use-mutex-or-key-wordstatic-instead-of-volatile-in-c/49154877#49154877", "title": "Can I use mutex or key word(static) instead of volatile in C++?", "body": "<blockquote>\n  <p>The programmer needs know if the word some_int changed, so he uses \"volatile\". Could I use the key word \"static\" instead</p>\n</blockquote>\n\n<p><code>volatile</code> was used in C++98 in concurrent programming because C++ did not support multi-threading as language at that time and side effects of <code>volatile</code> helped to avoid some race conditions, though there were no guarantees it would/should work. Since C++11 there are tools to work with concurrent programming properly - <a href=\"http://en.cppreference.com/w/cpp/thread/mutex\" rel=\"noreferrer\"><code>std::mutex</code></a> and <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"noreferrer\"><code>std::atomic</code></a>, so you should stop using <code>volatile</code> for wrong purpose. Making variable <code>static</code> is completely unrelated and would not affect existence of side effects directly.</p>\n"}, {"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1520437416, "post_id": 49155790, "comment_id": 85316366, "body": "One system I worked on had ~10,000 error bits and associated alarms.  Yes, that status update check code was worked on to be efficient."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1520438398, "post_id": 49155790, "comment_id": 85317097, "body": "Could you add additional material about synchronization and not using volatile within a multithreading application with the expectation that is a reliable way for inter-thread communication?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1522092747, "post_id": 49155790, "comment_id": 86002505, "body": "@RichardChambers - I think the idea of using volatile for such things is not a good fit for this post.  But I think it is a reasonable question.  However, I&#39;m not sure &#39;unreasonable&#39; answers would be received well.  and I&#39;m  not confident that I can remember enough details to explain.  Did you ever use PDP11s with RSX11?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1522096816, "post_id": 49155790, "comment_id": 86004511, "body": "Never used PDP11. Did use VAX and Gould Firebreather and Perkin-Elmer 32 bit mini-computers back in the early 1980s. With FORTRAN."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 4, "last_activity_date": 1520438590, "last_edit_date": 1520438590, "creation_date": 1520437100, "answer_id": 49155790, "question_id": 49154567, "link": "https://stackoverflow.com/questions/49154567/can-i-use-mutex-or-key-wordstatic-instead-of-volatile-in-c/49155790#49155790", "title": "Can I use mutex or key word(static) instead of volatile in C++?", "body": "<blockquote>\n  <p>The volatile keyword is intended to prevent the compiler from applying\n  any optimizations on objects that can change in ways that cannot be\n  determined by the compiler. Objects declared as volatile are omitted\n  from optimization because their values can be changed by code outside\n  the scope of current code at any time.\n  <a href=\"https://www.geeksforgeeks.org/understanding-volatile-qualifier-in-c/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/understanding-volatile-qualifier-in-c/</a></p>\n</blockquote>\n\n<p>As a long time embedded systems programmer, my perspective is that the volatile qualifier is a 'command' from me to the compiler.  On an address-by-address basis, I \"order\" the compiler to always perform every access I code.  The compiler accomplishes this by preventing certain code optimizations.</p>\n\n<blockquote>\n  <p>why we need volatile</p>\n</blockquote>\n\n<p>In memory-mapped i/o (as opposed to port i/o), my code dealt with feedback from hardware devices, indicating, for example, \"transfer complete\", or \"buffer full\", or \"los\" (loss-of-signal).  Each has their own urgency.  </p>\n\n<p>High urgency would often notify the software with an interrupt (and almost never a 'polling', as in your example). The hardware design often provides some buffering support, giving the software more time to respond to the interrupt.  In an interrupt handler, the compiler must not optimize away any hardware reads or writes.  Volatile use required.</p>\n\n<p>Lower urgency is often handled by periodic status checks (again, never by polling).  Historically the telecom \"los\" is checked once per second.  This enables the software to report the system alarm within the required 2.5 +/- 0.5 seconds (after the los started).</p>\n\n<p>The los-bit check must never be skipped. The keyword volatile commands the compiler to not remove the code doing the checking, no matter how recently the software looked at the bits.   Volatile use required.</p>\n\n<p>In this context, a semaphore or atomic will not work ... the hardware I have worked on does not know those concepts.  Volatile required.</p>\n\n<hr>\n\n<blockquote>\n  <p>Could I use the key word \"static\" instead?</p>\n</blockquote>\n\n<p>No.</p>\n\n<hr>\n\n<p>This is a wasteful poll:  </p>\n\n<pre><code>volatile int some_int = 100;\n\nwhile(some_int==100) {\n    doSomething()\n}\n</code></pre>\n\n<p>Never do this.</p>\n\n<hr>\n\n<p>This is a (much simplified) status update:</p>\n\n<pre><code>// status update thread \ndo\n{\n    waitFor_startOfSecond();  // os provided call\n\n    // status check\n    if (los(bit))   // test the los bit in hw (1 of 10000)\n    {\n       losActions()\n    }\n\n    // ... other stuff, including other status bits\n\n    // Note: expect less than 1 second elapsed since start of loop\n    // On at least one system, this alarm processing effort \n    // completed in &lt; 1/3 second  (even ~10,000 alarms)\n\n} while(1); // typically, embedded threads do not halt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1523997233, "post_id": 49157079, "comment_id": 86790111, "body": "&quot;were instead some value provided by a piece of hardware&quot; ... such as another core updating shared memory?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1528834417, "post_id": 49157079, "comment_id": 88655130, "body": "&quot;if you have mutexes, you don&#39;t need volatile&quot; - I disagree, and consider this is a more complex choice.  In certain telecom embedded systems, the alarm-bit-check is typically scheduled, and all bits are checked by the single thread (one system had &gt;10K bits).  There is no contention when you schedule, so mutex adds no value.  And unrelated threads don&#39;t read these these bits, so mutex adds no value.  The volatile is still useful, however, to handle some hw complexities ... the compiler should never &#39;remove&#39; a bit read/write during these ops."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1528887047, "post_id": 49157079, "comment_id": 88674429, "body": "@DOUGLASO.MOEN: <i>&quot;such as another core updating shared memory?&quot;</i> Yes, exactly. <i>&quot;The volatile is still useful, however, to handle some hw complexities&quot;</i> Yes, and 2/3rds of my answer talks about just that. The <i>&quot;if you have mutexes, you don&#39;t need volatile&quot;</i> may be read as if it continues <i>&quot;for thread-safety&quot;</i>, as the quote it relates to is talking specifically about synchronisation."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1520440956, "creation_date": 1520440956, "answer_id": 49157079, "question_id": 49154567, "link": "https://stackoverflow.com/questions/49154567/can-i-use-mutex-or-key-wordstatic-instead-of-volatile-in-c/49157079#49157079", "title": "Can I use mutex or key word(static) instead of volatile in C++?", "body": "<blockquote>\n  <p>Mostly, I think we should we mutex(lock) to synchronize if synchronization is necessary in multi-thread.</p>\n</blockquote>\n\n<p>You're right.</p>\n\n<p>And, if you have mutexes, you don't need <code>volatile</code> (as the load guarantees are already there).</p>\n\n<blockquote>\n  <p>The programmer needs know if the word some_int changed, so he uses \"volatile\".</p>\n</blockquote>\n\n<p>That's true, or at least it would be if <code>some_int</code> were instead some value provided by a piece of hardware, or some other part of the computer, not under your program's control. Your program can't tell when such a value has been changed externally.</p>\n\n<p>Like:</p>\n\n<pre><code>volatile int* ptr_to_some_int = 0x0123456; // hardcoded address to somewhere magical!\n\nprintf(\"%d\", *ptr_to_some_int); // okay, we'll get some value\n\n// But the value of *ptr_to_some_int may have changed here...\n\nprintf(\"%d\", *ptr_to_some_int); // ... so here it must be assuredly reloaded\n</code></pre>\n\n<blockquote>\n  <p>I'm still feeling confused about why we need volatile. </p>\n</blockquote>\n\n<p>If the above is not the case, then you don't.</p>\n\n<blockquote>\n  <p>Could I use the key word \"static\" instead?</p>\n</blockquote>\n\n<p>No, <code>static</code> is completely unrelated.</p>\n"}], "owner": {"reputation": 89, "user_id": 7139934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f50db390c86b75815eb1f9d37034684e?s=128&d=identicon&r=PG&f=1", "display_name": "Howo", "link": "https://stackoverflow.com/users/7139934/howo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1520440956, "creation_date": 1520433694, "question_id": 49154567, "link": "https://stackoverflow.com/questions/49154567/can-i-use-mutex-or-key-wordstatic-instead-of-volatile-in-c", "title": "Can I use mutex or key word(static) instead of volatile in C++?", "body": "<p>I know <strong>how</strong> volatile works in C++. However, I'm still feeling confused about <strong>why</strong> we need volatile. Only reason I think is we need listen whether the variable changed, as the code shows below:</p>\n\n<pre><code>volatile int some_int = 100;\n\nwhile(some_int==100) {\n    doSomething()\n}\n</code></pre>\n\n<p>The programmer needs know if the word <em>some_int</em> changed, so he uses \"volatile\". Could I use the key word \"static\" instead?</p>\n\n<p>Mostly, I think we should we mutex(lock) to synchronize if synchronization is necessary in multi-thread. Excuse my poor English:)</p>\n"}, {"tags": ["c++", "std-function"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520433799, "post_id": 49154535, "comment_id": 85313620, "body": "Do you question why extra move required or why it was not removed by optimization?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1520434484, "post_id": 49154535, "comment_id": 85314075, "body": "@Slava I&#39;m more interested in why extra move is required."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520434619, "post_id": 49154535, "comment_id": 85314172, "body": "Also, I wonder why said move doesn&#39;t reuse the heap-allocated buffer with <code>A</code>?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1520434711, "post_id": 49154535, "comment_id": 85314245, "body": "I think you should modify your question to make that clear."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520448477, "post_id": 49158915, "comment_id": 85323423, "body": "But one could copy/move into freshly allocated object, and if it doesn&#39;t throw, delete the old object and replace the pointer. Is this somehow worse than copy-and-swap apart from requiring slightly more code (which shouldn&#39;t concern standard library developers anyway)?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520452148, "post_id": 49158915, "comment_id": 85325556, "body": "Also, your explanation for two moves doesn&#39;t look right to me. <code>std::function&lt;void()&gt; f(A{});</code> produces a single move, which apparently means that the compiler is smart enough to elide move to the parameter and move directly to the internal buffer. So the first move is into the temporary, and the second one seems to be because of the swap."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520474633, "post_id": 49158915, "comment_id": 85333989, "body": "@HolyBlackCat For your first question, I think it needs more words to describe the behavior for the specification, so it&#39;s worse (at least no better). For your second question, the compiler can elide the move from <code>A{}</code>, but it cannot elide the move from <code>std::forward&lt;A&gt;(f)</code> because <code>f</code> is an already existed object, not a temporary. You can see an evidence by calling <code>swap</code> directly, like <a href=\"https://wandbox.org/permlink/uMpxtLrutJX1iJZN\" rel=\"nofollow noreferrer\">this</a>, to see whether there is a move."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520477858, "post_id": 49158915, "comment_id": 85334758, "body": "@HolyBlackCat In addition to your first question, note we are talking about the specification of cppreference (or of the standard), and it does not prevent a real implementation from doing so under as-if rule."}], "tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": false, "score": 1, "last_activity_date": 1520477787, "last_edit_date": 1592644375, "creation_date": 1520447294, "answer_id": 49158915, "question_id": 49154535, "link": "https://stackoverflow.com/questions/49154535/why-stdfunctionoperator-f-is-required-to-make-a-temporary-stdfunct/49158915#49158915", "title": "Why `std::function::operator=(F &amp;&amp;)` is required to make a temporary `std::function`?", "body": "<h1>Why are there two moves?</h1>\n<p>When constructing the temporary of <code>std::function</code>, the called constructor is</p>\n<pre><code>template&lt; class F &gt; \nfunction( F f );\n</code></pre>\n<p>which is pass-by-value, so the first move is in fact a move into the parameter of this constructor, while the second move is the move into the temporary. Basically, typical implementation of <code>std::function</code> <a href=\"https://stackoverflow.com/a/18453324/5376789\">stores a pointer</a> to its callable <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\">target</a>, so swapping the pointer is sufficient for its <code>swap</code> function, which will not involve in any copy/move of its callable target.</p>\n<h1>Why not directly copy/move RHS into LHS storage?</h1>\n<p>Because the type of the stored callable target in LHS may be different from that of RHS, you cannot directly perform a copy/move.</p>\n<h1>Why is <code>swap()</code> involved in?</h1>\n<p>This is called <a href=\"https://stackoverflow.com/a/3279550/5376789\">copy-and-swap idiom</a>, which behaves as an assignment with <a href=\"https://en.wikipedia.org/wiki/Exception_safety\" rel=\"nofollow noreferrer\">strong exception safety</a>.</p>\n"}], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1520477787, "creation_date": 1520433594, "last_edit_date": 1520435227, "question_id": 49154535, "link": "https://stackoverflow.com/questions/49154535/why-stdfunctionoperator-f-is-required-to-make-a-temporary-stdfunct", "title": "Why `std::function::operator=(F &amp;&amp;)` is required to make a temporary `std::function`?", "body": "<p>Apparently <code>std::function::operator=(F &amp;&amp;f)</code> is <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/operator%3D\" rel=\"nofollow noreferrer\">required to behave</a> exactly as <code>std::function(std::forward&lt;F&gt;(f)).swap(*this);</code>.</p>\n\n<p>Unless I'm missing something, this definition causes some superfluous moving:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\nstruct A\n{\n    A() {std::cout &lt;&lt; \"A()\\n\";}\n    A(const A &amp;) {std::cout &lt;&lt; \"A(const A &amp;)\\n\";}\n    A(A &amp;&amp;) {std::cout &lt;&lt; \"A(A &amp;&amp;)\\n\";}\n    A &amp;operator=(const A &amp;) {std::cout &lt;&lt; \"A &amp;operator=(const A &amp;)\\n\"; return *this;}\n    A &amp;operator=(A &amp;&amp;) {std::cout &lt;&lt; \"A &amp;operator=(A &amp;&amp;)\\n\"; return *this;}\n    ~A() {std::cout &lt;&lt; \"~A()\\n\";}\n    void operator()() const {}\n};\n\nint main()\n{\n    std::function&lt;void()&gt; f;\n    f = A{};\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<blockquote>\n<pre><code>A()        // Created by `A{}`\nA(A &amp;&amp;)    // Moved into temporary `std::function`, but what's the point?\nA(A &amp;&amp;)    // Moved into `f`\n~A()       \n~A()\n~A()\n</code></pre>\n</blockquote>\n\n<p><sup>(tested on GCC 7.2 and Clang 3.8)</sup></p>\n\n<p><strong>Question:</strong> Why can't we eliminate one move, by copying/moving (depending on value category) directly into LHS storage?</p>\n\n<hr>\n\n<p><strong>Edit:</strong> I'm not asking why the move is not optimized away, but rather why it's made in the first place.</p>\n"}, {"tags": ["c++", "openmp", "hpc", "numa"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520433815, "post_id": 49154175, "comment_id": 85313628, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> needed. It needs to be <i>complete</i> and <i>minimal</i>."}, {"owner": {"reputation": 2910, "user_id": 1329147, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bb27892c2e4adec367d862a16db8389c?s=128&d=identicon&r=PG", "display_name": "Amos", "link": "https://stackoverflow.com/users/1329147/amos"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520433916, "post_id": 49154175, "comment_id": 85313686, "body": "Hmm, I&#39;ll try to shrink the example. It&#39;s complete though."}, {"owner": {"reputation": 2910, "user_id": 1329147, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bb27892c2e4adec367d862a16db8389c?s=128&d=identicon&r=PG", "display_name": "Amos", "link": "https://stackoverflow.com/users/1329147/amos"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1520434270, "post_id": 49154175, "comment_id": 85313934, "body": "@linspectable it&#39;s much smaller now."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1520438208, "post_id": 49154175, "comment_id": 85316951, "body": "Genearlly, it&#39;s not a good idea to combine multiple threading paradigms together, such as C++11 threads and OpenMP in your code. Both use Pthreads library internally, which may cause troubles."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1520439044, "post_id": 49154175, "comment_id": 85317576, "body": "Also, note that: <i>&quot;Before any other calls in this library can be used <code>numa_available()</code> must be called. If it returns -1, all other functions in this library are undefined.&quot;</i>"}, {"owner": {"reputation": 2910, "user_id": 1329147, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bb27892c2e4adec367d862a16db8389c?s=128&d=identicon&r=PG", "display_name": "Amos", "link": "https://stackoverflow.com/users/1329147/amos"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1520439845, "post_id": 49154175, "comment_id": 85318140, "body": "@DanielLangr thanks for the note. I&#39;ve augmented the question. Well, I don&#39;t find any determinist way to physically bind openmp threads on different cpu socket."}], "answers": [{"comments": [{"owner": {"reputation": 2910, "user_id": 1329147, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bb27892c2e4adec367d862a16db8389c?s=128&d=identicon&r=PG", "display_name": "Amos", "link": "https://stackoverflow.com/users/1329147/amos"}, "edited": false, "score": 0, "creation_date": 1520440951, "post_id": 49156820, "comment_id": 85318859, "body": "Thanks. Does that mean the original issue is the confliction of c++ threading and openmp threading?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 2910, "user_id": 1329147, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bb27892c2e4adec367d862a16db8389c?s=128&d=identicon&r=PG", "display_name": "Amos", "link": "https://stackoverflow.com/users/1329147/amos"}, "edited": false, "score": 1, "creation_date": 1520441096, "post_id": 49156820, "comment_id": 85318958, "body": "@Amos I would be very careful to make such conclusion. There may be many other problems with your code, it&#39;s a bit messy in my opinion."}, {"owner": {"reputation": 2910, "user_id": 1329147, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bb27892c2e4adec367d862a16db8389c?s=128&d=identicon&r=PG", "display_name": "Amos", "link": "https://stackoverflow.com/users/1329147/amos"}, "edited": false, "score": 0, "creation_date": 1520441587, "post_id": 49156820, "comment_id": 85319270, "body": "Well, replacing the outer loop with std::thread reproduces the issue."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 2910, "user_id": 1329147, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bb27892c2e4adec367d862a16db8389c?s=128&d=identicon&r=PG", "display_name": "Amos", "link": "https://stackoverflow.com/users/1329147/amos"}, "edited": false, "score": 0, "creation_date": 1520442334, "post_id": 49156820, "comment_id": 85319806, "body": "@Amos Nice findings. That&#39;s a reason why one should never mix different threading libraries together."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 0, "last_activity_date": 1520440957, "last_edit_date": 1520440957, "creation_date": 1520440145, "answer_id": 49156820, "question_id": 49154175, "link": "https://stackoverflow.com/questions/49154175/why-doesnt-openmp-place-threads-based-on-manual-numa-bind/49156820#49156820", "title": "Why doesn&#39;t openmp place threads based on manual NUMA bind?", "body": "<p>This works for me exactly as I expected:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;iostream&gt;\n#include &lt;numa.h&gt;\n#include &lt;omp.h&gt;\n#include &lt;sched.h&gt;\n\nint main() {\n   assert (numa_available() != -1);\n\n   auto nodes = numa_num_configured_nodes();\n   auto cores = numa_num_configured_cpus();\n   auto cores_per_node = cores / nodes;\n\n   omp_set_nested(1);\n\n   #pragma omp parallel num_threads(nodes)\n   {\n      auto outer_thread_id = omp_get_thread_num();\n      numa_run_on_node(outer_thread_id);\n\n      #pragma omp parallel num_threads(cores_per_node)\n      {\n         auto inner_thread_id = omp_get_thread_num();\n\n         #pragma omp critical\n         std::cout\n            &lt;&lt; \"Thread \" &lt;&lt; outer_thread_id &lt;&lt; \":\" &lt;&lt; inner_thread_id\n            &lt;&lt; \" core: \" &lt;&lt; sched_getcpu() &lt;&lt; std::endl;\n\n         assert(outer_thread_id == numa_node_of_cpu(sched_getcpu()));\n      }\n   }\n}\n</code></pre>\n\n<p>Program first create 2 (outer) threads on my dual-socket server. Then, it binds them to different sockets (NUMA nodes). Finally, it splits each thread into 20 (inner) threads, since each CPU has 10 physical cores and enabled hyperthreading. </p>\n\n<p>All inner threads are running on the same socket as its parent thread. That is on cores 0-9 and 20-29 for outer thread 0, and on cores 10-19 and 30-39 for outer thread 1. (<code>sched_getcpu()</code> returned the number of virtual core from range 0-39 in my case.)</p>\n\n<p>Note that there is no C++11 threading, just pure OpenMP.</p>\n"}], "owner": {"reputation": 2910, "user_id": 1329147, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bb27892c2e4adec367d862a16db8389c?s=128&d=identicon&r=PG", "display_name": "Amos", "link": "https://stackoverflow.com/users/1329147/amos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 49156820, "answer_count": 1, "score": 0, "last_activity_date": 1520440957, "creation_date": 1520432557, "last_edit_date": 1520439875, "question_id": 49154175, "link": "https://stackoverflow.com/questions/49154175/why-doesnt-openmp-place-threads-based-on-manual-numa-bind", "title": "Why doesn&#39;t openmp place threads based on manual NUMA bind?", "body": "<p>I'm building a numa-aware processor that binds to a given socket and accepts lambdas. Here is what I've done:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;numa.h&gt;\n#include &lt;chrono&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nunsigned nodes = numa_num_configured_nodes();\nunsigned cores = numa_num_configured_cpus();\nunsigned cores_per_node = cores / nodes;\n\nint main(int argc, char* argv[]) {\n    putenv(\"OMP_PLACES=sockets(1)\");\n    cout &lt;&lt; numa_available() &lt;&lt; endl;  // returns 0\n    numa_set_interleave_mask(numa_all_nodes_ptr);\n    int size = 200000000;\n    for (auto i = 0; i &lt; nodes; ++i) {\n        auto t = thread([&amp;]() {\n            // binding to given socket\n            numa_bind(numa_parse_nodestring(to_string(i).c_str()));\n            vector&lt;int&gt; v(size, 0);\n            cout &lt;&lt; \"node #\" &lt;&lt; i &lt;&lt; \": on CPU \" &lt;&lt; sched_getcpu() &lt;&lt; endl;\n#pragma omp parallel for num_threads(cores_per_node) proc_bind(master)\n            for (auto i = 0; i &lt; 200000000; ++i) {\n                for (auto j = 0; j &lt; 10; ++j) {\n                    v[i]++;\n                    v[i] *= v[i];\n                    v[i] *= v[i];\n                }\n            }\n        });\n        t.join();\n    }\n}\n</code></pre>\n\n<p>However, all threads are running on socket 0. It seems <code>numa_bind</code> doesn't bind current thread to the given socket. The second numa processor -- <code>Numac 1</code> outputs <code>node #1: on CPU 0</code>, which should be on CPU 1. So what's going wrong?</p>\n"}, {"tags": ["c#", "c++", "variadic-macros"], "comments": [{"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 3, "creation_date": 1520432375, "post_id": 49154044, "comment_id": 85312650, "body": "Why are you even attempting to put c++ and c# in the same file? Are you trying to kill a glue project with yet another one?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 6, "creation_date": 1520432396, "post_id": 49154044, "comment_id": 85312666, "body": "We see the occasional code that&#39;s correctly tagged as both C and C++&#39;; this might the first about a polyglot C++ / C# question."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1520432628, "post_id": 49154044, "comment_id": 85312820, "body": "What do you mean &quot;Which does not work because C# has no value for the defines.&quot; ?  It appears that C++ will have a #define TX_TAG2xHWID_PARAMETER, and c# will have an <code>internal const string</code>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1520432961, "post_id": 49154044, "comment_id": 85313027, "body": "Do you actually ever create Unicode builds?  If not, just remove the _T() macros entirely.  They were a useful hack for MS to support both types in libraries like MFC, but they should never have appeared in user code."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1520433221, "post_id": 49154044, "comment_id": 85313204, "body": "C# does not have a pre-processor, it only supports conditional compilation with #if.  The symbols you test with #if can only be a project setting.  This is not a problem you have to solve, it has only one string type and one language syntax.  So none of these #defines can be relevant."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1520433228, "post_id": 49154044, "comment_id": 85313209, "body": "@MartinBonner: They also made sense in Windows 95-ME, but I agree with the suggestion now. ME has been EOL for over a decade now. Nobody is writing code for non-Unicode Win32 platforms anymore."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1520433417, "post_id": 49154044, "comment_id": 85313362, "body": "@MSalters : Lots of people are still writing ANSI builds to run on Unicode Win32 though.  In fact, if the OP is generating Unicode only builds, he still has the same problem: he needs L&quot;PR&quot; for C++ and &quot;PR&quot; for C#."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1520433635, "post_id": 49154044, "comment_id": 85313508, "body": "@MartinBonner: I know, but <code>_T</code> only makes sense in codebases that are compatible with both ANSI and Unicode builds. If you choose either, you choose <code>&quot;&quot;</code> or <code>L&quot;&quot;</code>."}, {"owner": {"reputation": 4434, "user_id": 949553, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BHSVU.jpg?s=128&g=1", "display_name": "Ramzi Khahil", "link": "https://stackoverflow.com/users/949553/ramzi-khahil"}, "edited": false, "score": 0, "creation_date": 1520436526, "post_id": 49154044, "comment_id": 85315718, "body": "As I mentioned before, the C++ part is compiled into an executable which runs on machines, no windows or anything is on there. It is a completly inhouse thing. And since the company is supporting machines that are 15+ years old, I cannot change the <code>_T</code> without talking to half of the staff from another department. And my boss said &quot;Try to keep it in one file&quot;. *** But thanks for all your inputs, I appreciate your interest and your answers. ***"}], "answers": [{"tags": [], "owner": {"reputation": 1172, "user_id": 7646599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351a68a8fd444d17ace74af8e5becf31?s=128&d=identicon&r=PG", "display_name": "rs232", "link": "https://stackoverflow.com/users/7646599/rs232"}, "is_accepted": false, "score": -1, "last_activity_date": 1520432951, "creation_date": 1520432951, "answer_id": 49154326, "question_id": 49154044, "link": "https://stackoverflow.com/questions/49154044/porting-define-from-c-to-c/49154326#49154326", "title": "Porting #define from C++ to C#", "body": "<p>Unless you have a good reason to keep TX_TAG2xHWID_PARAMETER and similar parameters inlined, you might replace your </p>\n\n<pre><code>#if __cplusplus\n    #define     TX_TAG2xHWID_PARAMETER _T(\"PR\")\n#else\n    internal const string   TX_TAG2xHWID_PARAMETER = \"PR\";\n#endif\n</code></pre>\n\n<p>with</p>\n\n<pre><code>#if __cplusplus\n    LPCTSTR     TX_TAG2xHWID_PARAMETER = _T(\"PR\");\n#else\n    internal const string   TX_TAG2xHWID_PARAMETER = \"PR\";\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9884, "user_id": 2035029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52b0a22963bc260b4beff6f99b98df44?s=128&d=identicon&r=PG&f=1", "display_name": "Dirk", "link": "https://stackoverflow.com/users/2035029/dirk"}, "edited": false, "score": 0, "creation_date": 1520433048, "post_id": 49154334, "comment_id": 85313085, "body": "He&#39;d have to declare the C# version as <code>static readonly</code> then."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1520433333, "post_id": 49154334, "comment_id": 85313287, "body": "On that path, I&#39;d also suggest <code>using string = std::wstring</code> for the C++ side. Keeps even more code in common."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1551697392, "last_edit_date": 1551697392, "creation_date": 1520432975, "answer_id": 49154334, "question_id": 49154044, "link": "https://stackoverflow.com/questions/49154044/porting-define-from-c-to-c/49154334#49154334", "title": "Porting #define from C++ to C#", "body": "<p>One possible solution is to give C# a function called <code>_T</code> (which just returns its argument), and then stick with the original approach:</p>\n\n<pre><code>#if !__cplusplus\n    public const string\n#else\n    static const TCHAR* const\n#endif\n                                TX_TAG2xHWID_PARAMETER = _T(\"PR\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1520433269, "creation_date": 1520433269, "answer_id": 49154436, "question_id": 49154044, "link": "https://stackoverflow.com/questions/49154044/porting-define-from-c-to-c/49154436#49154436", "title": "Porting #define from C++ to C#", "body": "<p>A completely different approach (which is why it is a separate answer), is to generate both the C++ header file and the C# file at build time with a script.  That way the actual source that needs editing is something like</p>\n\n<pre><code>output_text XML_V1_TagRoot \"r\"\noutput_text TX_TAG2xHWID_PARAMETER \"PR\"\noutput_int  FUNKY_INT_PARAM 43\n</code></pre>\n\n<p>and the messy <code>#if</code>s are all produced by the script.</p>\n"}, {"tags": [], "owner": {"reputation": 45401, "user_id": 20481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc41c338d8a89f8cec603f65f6fd0c89?s=128&d=identicon&r=PG", "display_name": "plinth", "link": "https://stackoverflow.com/users/20481/plinth"}, "is_accepted": false, "score": 0, "last_activity_date": 1520433602, "creation_date": 1520433602, "answer_id": 49154539, "question_id": 49154044, "link": "https://stackoverflow.com/questions/49154044/porting-define-from-c-to-c/49154539#49154539", "title": "Porting #define from C++ to C#", "body": "<p>Have you considered putting the strings in resources? Both of those can be accessed from C++ or C# using symbolic names and the strings will live in one place and have no issues due to differences in string escapes.</p>\n\n<p>You can also introduce a step into your build that takes a list of strings and their symbolic names and creates two output files: one for C++ and one for C# with an important comment at the top:</p>\n\n<pre><code>// This file is machine generated. To add a constant, edit the file xxxxx\n// and rebuild with the command xxxx\n</code></pre>\n\n<p>This will, at the very least, put all the strings and symbol names in exactly one place at the cost of slightly complicating your build process. And yes, this is exactly the same as using string resources except that you're using a home-cooked tool/script.</p>\n"}], "owner": {"reputation": 4434, "user_id": 949553, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BHSVU.jpg?s=128&g=1", "display_name": "Ramzi Khahil", "link": "https://stackoverflow.com/users/949553/ramzi-khahil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 0, "accepted_answer_id": 49154334, "answer_count": 4, "score": 0, "last_activity_date": 1551697392, "creation_date": 1520432153, "question_id": 49154044, "link": "https://stackoverflow.com/questions/49154044/porting-define-from-c-to-c", "title": "Porting #define from C++ to C#", "body": "<p>I have an old MCPP project which was used as a communication layer between C++ code which runs on machines and C# which runs on a desktop computer. Recently we decided to try and kill this \"glue\" project.</p>\n\n<p>This project has in it a few lists of constants which are used in the communication and these will be preferably used as an external link in both, C++ and C#.</p>\n\n<p>A colleague how has done a similar thing before used the following trick to keep changes to the constants in one place:</p>\n\n<pre><code>#if !__cplusplus\n    public const string\n#else\n    static const TCHAR* const\n#endif\n                                XML_V1_TagRoot = \"r\";\n</code></pre>\n\n<p>The <code>__cplusplus</code> is set depending on the compiler, so the prepeocessor makes each compiler see what it can compile.</p>\n\n<p>Now I have the problem with a bunch of <code>#define</code> statements of the type:</p>\n\n<pre><code>#define TX_TAG2xHWID_PARAMETER  _T(\"PR\")\n</code></pre>\n\n<p>Where <code>_T()</code> is a macro. So I tried the following:</p>\n\n<pre><code>#if __cplusplus\n    #define     TX_TAG2xHWID_PARAMETER _T(\"PR\")\n#else\n    internal const string   TX_TAG2xHWID_PARAMETER = \"PR\";\n#endif\n</code></pre>\n\n<p>Which does not work because C# has no value for the defines. <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/preprocessor-directives/preprocessor-define\" rel=\"nofollow noreferrer\">source</a></p>\n\n<p>Then I tried:</p>\n\n<pre><code>#if __cplusplus\n    #define                 TX_TAG2xHWID_PARAMETER \\\n#else\n    internal const string   TX_TAG2xHWID_PARAMETER =\n#endif\n\n#if __cplusplus\n                                                _T(\\\n#endif\n                                                    \"PR\"\n#if __cplusplus\n                                                        )\n#else\n                                                        ;\n#endif\n</code></pre>\n\n<p>Here the problem is that C# does not allow a multiline <code>#define</code>.</p>\n\n<p>Basically the issue is that a <code>#define</code> is a preprocessor instruction in itself, but should be executed only if the file is compiled in a C++ project.</p>\n\n<p>I have also played with the idea of making the C# project think it is a comment, with placing <code>/*</code> and <code>*/</code> into a different <code>#if</code>, but I had no success there.</p>\n\n<p>So, does anyone know a solution how I can make the C# compiler not complain about that line which it should never try to compile?</p>\n"}, {"tags": ["c++", "qt", "c++11", "variadic-macros"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1520432951, "post_id": 49154021, "comment_id": 85313015, "body": "The examples you link to are different, they all &quot;pass&quot; <code>__VA_ARGS__</code> to a variadic function. You try to pass it to your single-argument macro."}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1520433086, "post_id": 49154021, "comment_id": 85313108, "body": "Ok, but I could bypass my need of using the variable name?"}], "answers": [{"comments": [{"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1520438474, "post_id": 49154503, "comment_id": 85317156, "body": "&quot;I could have used just a variadic template function to solve it, but i need to print the variable name as well.&quot;"}], "tags": [], "owner": {"reputation": 205, "user_id": 8527007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb4570b7dd309f6f409f45aec2509c8?s=128&d=identicon&r=PG&f=1", "display_name": "MaLarsson", "link": "https://stackoverflow.com/users/8527007/malarsson"}, "is_accepted": false, "score": 1, "last_activity_date": 1520433481, "creation_date": 1520433481, "answer_id": 49154503, "question_id": 49154021, "link": "https://stackoverflow.com/questions/49154021/print-multiples-debug-lines-with-variadic-macro/49154503#49154503", "title": "print multiples debug lines with variadic macro", "body": "<p>Not sure how the macros work but for printing all arguments you could use a recursive variadic template.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt;\nvoid myFunc(T&amp;&amp; value) {\n    std::cout &lt;&lt; value &lt;&lt; '\\n';\n}\n\ntemplate &lt;typename T, typename ...Ts&gt;\nvoid myFunc(T&amp;&amp; value, Ts&amp;&amp; ...rest) {\n    std::cout &lt;&lt; value &lt;&lt; '\\n';\n    myFunc(std::forward&lt;Ts&gt;(rest)...);\n}\n\nint main() {\n    myFunc(0, 1, 2);\n    return 0;\n}\n</code></pre>\n\n<p>This would allow you to use the VAR macro.</p>\n"}, {"comments": [{"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1520439377, "post_id": 49155397, "comment_id": 85317790, "body": "Yes I did know something like that, I hoped there was a non-boilerplate solution though :\\"}, {"owner": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "reply_to_user": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1520520609, "post_id": 49155397, "comment_id": 85356967, "body": "@Moia I&#39;m afraid there is none for the exact interface you desire. Since you require the variable name, the macro machinery is needed. At the same time macros do not provide a convenient way to process variable length arguments."}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1520521645, "post_id": 49155397, "comment_id": 85357785, "body": "I guess there&#39;s no other option too"}], "tags": [], "owner": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "is_accepted": true, "score": 2, "last_activity_date": 1520435991, "creation_date": 1520435991, "answer_id": 49155397, "question_id": 49154021, "link": "https://stackoverflow.com/questions/49154021/print-multiples-debug-lines-with-variadic-macro/49155397#49155397", "title": "print multiples debug lines with variadic macro", "body": "<p>You are calling the macro <code>VAR</code> with two arguments since <code>__VA_ARGS__</code> expands to the full comma separated list. But that macro just takes one argument.</p>\n\n<p>What you could do is still implement this with a variadic template, but use the macro to forward variable name and value. Unfortunately it requires quite a lot of boilerplate to merge and split variadic macro arguments. I believe Boost has a library for expressing this easier, but I have never worked with it.</p>\n\n<pre><code>#define EXPAND(x) x\n#define COUNT_ARGS(...) COUNT_ARGS_(__VA_ARGS__, COUNT_ARGS_RSEQ())\n#define COUNT_ARGS_(...) EXPAND(COUNT_ARGS_N(__VA_ARGS__))\n#define COUNT_ARGS_N(_1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, N, ...) N\n#define COUNT_ARGS_RSEQ() 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0\n\n#define EXPAND_NAME_VALUE(argvalue, argname) argname, argvalue\n\n#define EXPAND_ARGS(how, ...) EXPAND_ARGS_(how, COUNT_ARGS(__VA_ARGS__), __VA_ARGS__)\n#define EXPAND_ARGS_(how, N, ...) EXPAND_ARGS__(how, N, __VA_ARGS__)\n#define EXPAND_ARGS__(how, N, ...) EXPAND(EXPAND_ARGS_##N(how, __VA_ARGS__))\n#define EXPAND_ARGS_1(how, arg, ...) how(arg, #arg)\n#define EXPAND_ARGS_2(how, arg, ...) how(arg, #arg), EXPAND(EXPAND_ARGS_1(how, __VA_ARGS__))\n#define EXPAND_ARGS_3(how, arg, ...) how(arg, #arg), EXPAND(EXPAND_ARGS_2(how, __VA_ARGS__))\n#define EXPAND_ARGS_4(how, arg, ...) how(arg, #arg), EXPAND(EXPAND_ARGS_3(how, __VA_ARGS__))\n// ...\n\n#define MVAR(...) Print(EXPAND_ARGS(EXPAND_NAME_VALUE, __VA_ARGS__))\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt;\nvoid Print(const std::string&amp; name, T&amp;&amp; value)\n{\n    std::cout &lt;&lt; name &lt;&lt; \": \" &lt;&lt; value &lt;&lt; \"\\n\";\n}\ntemplate &lt;typename T, typename... Ts&gt;\nvoid Print(const std::string&amp; name, T&amp;&amp; value, Ts&amp;&amp;... other)\n{\n    Print(name, value);\n    Print(std::forward&lt;Ts&gt;(other)...);\n}\n\nint main()\n{\n    int heyo = 5;\n    float whoo = 7.5;\n    double eyy = 2;\n    std::string s = \"hello\";\n    MVAR(heyo, whoo, eyy, s);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>heyo: 5\nwhoo: 7.5\neyy: 2\ns: hello\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1520436142, "creation_date": 1520436142, "answer_id": 49155465, "question_id": 49154021, "link": "https://stackoverflow.com/questions/49154021/print-multiples-debug-lines-with-variadic-macro/49155465#49155465", "title": "print multiples debug lines with variadic macro", "body": "<p>It seems to me that a possible way is mix a recursive template solution (as suggested by MaLarsson) with a macro to duplicate the argument and transform in string the name of the variable for first occurrence.</p>\n\n<p>I mean... if you define a recursive template function <code>foo()</code> (with a not template ground case that only print the end-of-line)</p>\n\n<pre><code>void foo ()\n { std::cout &lt;&lt; std::endl; }\n\ntemplate &lt;typename A0, typename ... As&gt;\nvoid foo (char const * nameA0, A0 const &amp; a0, As ... as)\n {\n   std::cout &lt;&lt; nameA0 &lt;&lt; ' ' &lt;&lt; a0 &lt;&lt; ' ';\n\n   foo(as...);\n }\n</code></pre>\n\n<p>and a trivial function macro <code>bar()</code> as follows</p>\n\n<pre><code>#define bar(x)  #x, x\n</code></pre>\n\n<p>you can invoke <code>foo()</code> using <code>bar()</code> for every argument as follows</p>\n\n<pre><code>foo(bar(a), bar(b), bar(c), bar(d));\n</code></pre>\n\n<p>The following is a full working example</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid foo ()\n { std::cout &lt;&lt; std::endl; }\n\ntemplate &lt;typename A0, typename ... As&gt;\nvoid foo (char const * nameA0, A0 const &amp; a0, As ... as)\n {\n   std::cout &lt;&lt; nameA0 &lt;&lt; ' ' &lt;&lt; a0 &lt;&lt; ' ';\n\n   foo(as...);\n }\n\n#define bar(x)  #x, x\n\nint main()\n {\n   int a { 0 };\n   std::string b { \"one\" };\n\n   foo(bar(a), bar(b));\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1595830516, "post_id": 63047892, "comment_id": 111598323, "body": "What is clog function?"}, {"owner": {"reputation": 852, "user_id": 3447475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca5b923cda3d2a2382d1ca7b0033cd62?s=128&d=identicon&r=PG&f=1", "display_name": "joker007", "link": "https://stackoverflow.com/users/3447475/joker007"}, "reply_to_user": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1595830683, "post_id": 63047892, "comment_id": 111598374, "body": "@Moia clog is similar to cout , difference being it writes to standard error stream instead of standard output . For debugging purposes I prefer standard error stream , thus used clog here ."}], "tags": [], "owner": {"reputation": 852, "user_id": 3447475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca5b923cda3d2a2382d1ca7b0033cd62?s=128&d=identicon&r=PG&f=1", "display_name": "joker007", "link": "https://stackoverflow.com/users/3447475/joker007"}, "is_accepted": false, "score": 0, "last_activity_date": 1595484457, "creation_date": 1595484457, "answer_id": 63047892, "question_id": 49154021, "link": "https://stackoverflow.com/questions/49154021/print-multiples-debug-lines-with-variadic-macro/63047892#63047892", "title": "print multiples debug lines with variadic macro", "body": "<p>This will help you to achieve what you need. I am using variadic macros along with variadic template parameters to achieve this.This method will help you print variable's value along with it's name. This method is completely type independent and supports variable number of arguments. And can even display values of STL's nicely , given that you overload output operator for them</p>\n<pre><code>#define show(args...) describe(#args,args);\ntemplate&lt;typename T&gt;\nvoid describe(string var_name,T value) //base case for template function\n{\n    clog&lt;&lt;var_name&lt;&lt;&quot; = &quot;&lt;&lt;value&lt;&lt;&quot; &quot;;\n}\n\ntemplate&lt;typename T,typename... Args&gt;\nvoid describe(string var_names,T value,Args... args)\n{\n    string::size_type pos = var_names.find(',');\n    string name = var_names.substr(0,pos);\n    var_names = var_names.substr(pos+1);\n    clog&lt;&lt;name&lt;&lt;&quot; = &quot;&lt;&lt;value&lt;&lt;&quot; | &quot;;\n    describe(var_names,args...);\n}\n</code></pre>\n<p>Sample use :</p>\n<pre><code>int main()\n{\n    string a;\n    int b;\n    double c;\n    a=&quot;string here&quot;;\n    b = 7;\n    c= 3.14;\n    show(a,b,c);\n}\n</code></pre>\n<p>Output :</p>\n<pre><code>a = string here | b = 7 | c = 3.14 \n</code></pre>\n"}], "owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 49155397, "answer_count": 4, "score": 2, "last_activity_date": 1595484457, "creation_date": 1520432088, "last_edit_date": 1520697884, "question_id": 49154021, "link": "https://stackoverflow.com/questions/49154021/print-multiples-debug-lines-with-variadic-macro", "title": "print multiples debug lines with variadic macro", "body": "<p>I'm using qt, gcc and c++11.</p>\n\n<p>I'd like to have a debug function which works in this way:</p>\n\n<pre><code>int a = 1;\nfloat b = 2.2;\nQString c = \"hello\";\n</code></pre>\n\n<p>usage:</p>\n\n<pre><code>myFunc(a);       // print a 1 \nmyFunc(a, b);    // print a 1 b 2.2 \nmyFunc(a, b, c); // print a 1 b 2.2 c hello\n</code></pre>\n\n<p>I could have used just a variadic template function to solve it, but i need to print the variable name as well.</p>\n\n<p>for just 1 argument this macro works fine</p>\n\n<pre><code>#define VAR(var) qDebug() &lt;&lt; #var &lt;&lt; var;\n</code></pre>\n\n<p>So I was trying to use variadics macro to solve my issue with something like:</p>\n\n<pre><code>#define MVAR(...) VAR(__VA_ARGS__)\n</code></pre>\n\n<p>It works with 1 variable, but when I try with more it gives me \"macro VAR passed 2 argumets, but takes just 1\".</p>\n\n<p>How can I solve that?</p>\n"}, {"tags": ["c++", "gcc", "constexpr", "throw", "conditional-compilation"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1520431492, "post_id": 49153779, "comment_id": 85312036, "body": "Shouldn&#39;t it be <code>if constexpr</code> instead of plain <code>if</code> inside <code>f</code>?"}, {"owner": {"reputation": 1886, "user_id": 1012773, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0d62ac65da881c3b7db2982c98e243b5?s=128&d=identicon&r=PG", "display_name": "davide", "link": "https://stackoverflow.com/users/1012773/davide"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520432843, "post_id": 49153779, "comment_id": 85312943, "body": "Replacing all <code>if</code> with <code>if constexpr</code> yields the same compilation error."}, {"owner": {"reputation": 876, "user_id": 5082245, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0b681a8964626eda6cf2a4895a3abb6b?s=128&d=identicon&r=PG&f=1", "display_name": "0xBADF00", "link": "https://stackoverflow.com/users/5082245/0xbadf00"}, "edited": false, "score": 1, "creation_date": 1520433154, "post_id": 49153779, "comment_id": 85313161, "body": "It compiles with clang 5.0"}, {"owner": {"reputation": 1886, "user_id": 1012773, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0d62ac65da881c3b7db2982c98e243b5?s=128&d=identicon&r=PG", "display_name": "davide", "link": "https://stackoverflow.com/users/1012773/davide"}, "edited": false, "score": 0, "creation_date": 1520433784, "post_id": 49153779, "comment_id": 85313609, "body": "Updated question to add a Clang test."}], "owner": {"reputation": 1886, "user_id": 1012773, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0d62ac65da881c3b7db2982c98e243b5?s=128&d=identicon&r=PG", "display_name": "davide", "link": "https://stackoverflow.com/users/1012773/davide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520433716, "creation_date": 1520431289, "last_edit_date": 1520433716, "question_id": 49153779, "link": "https://stackoverflow.com/questions/49153779/throw-after-conditional-return-in-constexpr", "title": "Throw after conditional return in constexpr", "body": "<p>GCC 7.2 (-std=c++17) doesn't compile this, complaining that <code>f</code> is an invalid constexpr due to <code>throw</code>:</p>\n\n<pre><code>#include &lt;type_traits&gt;                                                                                                                                                                              \n\ntemplate &lt;class T&gt;                                                                                                                                                                                  \nconstexpr bool f() noexcept {                                                                                                                                                                       \n  if (std::is_same&lt;T, int&gt;  ::value) return true;                                                                                                                                                  \n  if (std::is_same&lt;T, float&gt;::value) return false;                                                                                                                                                   \n\n  if (std::is_same&lt;T, int&gt;::value) throw \"message\";                                                                                                                                               \n}                                                                                                                                                                                                   \n\nint main () {                                                                                                                                                                                       \n  if constexpr (f&lt;int&gt;()) return 1;                                                                                                                                                               \n  return 0;                                                                                                                                                                                    \n} \n</code></pre>\n\n<p>But the control flow should never reach the <code>throw</code>.</p>\n\n<p>Is this behavior mandated by the standard or caused by the implementation?</p>\n\n<hr>\n\n<p><strong>Addendum:</strong>\nClang 5.0 can even compile this, but Gcc 7.2 still complains about <code>throw</code>:</p>\n\n<pre><code>#include &lt;type_traits&gt;                                                                                                                                                                              \n\ntemplate &lt;class T&gt;                                                                                                                                                                                  \nconstexpr bool f() noexcept {                                                                                                                                                                       \n  if constexpr (std::is_same&lt;T, int&gt;  ::value) return true;                                                                                                                                         \n  if constexpr (std::is_same&lt;T, float&gt;::value) return false;                                                                                                                                        \n\n  throw \"message\";                                                                                                                                                                                  \n}                                                                                                                                                                                                   \n\nint main () {                                                                                                                                                                                       \n  if constexpr (f&lt;int&gt;()) return 1;                                                                                                                                                                 \n  return 0;                                                                                                                                                                                         \n} \n</code></pre>\n"}, {"tags": ["python", "c++", "pybind11"], "answers": [{"tags": [], "owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "is_accepted": true, "score": 2, "last_activity_date": 1520433388, "creation_date": 1520433388, "answer_id": 49154477, "question_id": 49153671, "link": "https://stackoverflow.com/questions/49153671/printing-in-python-a-c-class-using-pybind11/49154477#49154477", "title": "Printing in python a C++ class using pybind11", "body": "<p>You can do something like this when you export:</p>\n\n<pre><code>class_&lt;Data&gt;(\"Data\", module)\n    .def(\"__repr__\", [](const Data&amp; d){ return std::to_string(d.getValue()); });\n</code></pre>\n\n<p>Notice I added that <code>getValue</code> method since <code>value_</code> is private.  Though depending on your interface, it might make more sense to add something like <code>Data::toString()</code> instead.</p>\n\n<p><a href=\"http://pybind11.readthedocs.io/en/stable/classes.html#binding-lambda-functions\" rel=\"nofollow noreferrer\">http://pybind11.readthedocs.io/en/stable/classes.html#binding-lambda-functions</a></p>\n"}], "owner": {"reputation": 1199, "user_id": 4613815, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ed484f059be9596847074fff94cd7db9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph", "link": "https://stackoverflow.com/users/4613815/aleph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 49154477, "answer_count": 1, "score": 1, "last_activity_date": 1520433388, "creation_date": 1520431003, "last_edit_date": 1520432638, "question_id": 49153671, "link": "https://stackoverflow.com/questions/49153671/printing-in-python-a-c-class-using-pybind11", "title": "Printing in python a C++ class using pybind11", "body": "<p>Let's say one has such a class</p>\n\n<pre><code>class Data\n{\n   public:\n      Data(double d): value_(d) {};\n\n   private:\n      double value_;\n };\n</code></pre>\n\n<p>Is it possible to export it in Python with pybind11 such that </p>\n\n<pre><code>d = Data(3.14)\nprint(d)\n</code></pre>\n\n<p>displays 3.14 instead of something like</p>\n\n<blockquote>\n  <p>Data object at 0x7fed8a8c3298</p>\n</blockquote>\n"}, {"tags": ["c++", "qt", "gdal", "ogr"], "comments": [{"owner": {"reputation": 6852, "user_id": 214762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d0879a01a4294a36eba6d1ea21699e?s=128&d=identicon&r=PG", "display_name": "RA.", "link": "https://stackoverflow.com/users/214762/ra"}, "edited": false, "score": 0, "creation_date": 1520643362, "post_id": 49153558, "comment_id": 85413895, "body": "Did you call <code>spatialRef-&gt;AutoIdentifyEPSG()</code>?"}, {"owner": {"reputation": 183, "user_id": 8027551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207196789775054/picture?type=large", "display_name": "Zharios", "link": "https://stackoverflow.com/users/8027551/zharios"}, "reply_to_user": {"reputation": 6852, "user_id": 214762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d0879a01a4294a36eba6d1ea21699e?s=128&d=identicon&r=PG", "display_name": "RA.", "link": "https://stackoverflow.com/users/214762/ra"}, "edited": false, "score": 0, "creation_date": 1520841429, "post_id": 49153558, "comment_id": 85464142, "body": "@RA. if i use this method the program crash when open the shape file :S"}, {"owner": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "edited": false, "score": 0, "creation_date": 1520858111, "post_id": 49153558, "comment_id": 85473815, "body": "try this const char *c = OSRGetAuthorityCode(layer-&gt;GetSpatialRef(),  &quot;DATUM&quot; ); \t\tif (c &amp;&amp; c[0]) \t\t\treturn atoi(c);"}, {"owner": {"reputation": 183, "user_id": 8027551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207196789775054/picture?type=large", "display_name": "Zharios", "link": "https://stackoverflow.com/users/8027551/zharios"}, "reply_to_user": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "edited": false, "score": 0, "creation_date": 1520859591, "post_id": 49153558, "comment_id": 85474867, "body": "@AndreySemenov  i try use this and c value always get &quot; &quot;."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 8027551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207196789775054/picture?type=large", "display_name": "Zharios", "link": "https://stackoverflow.com/users/8027551/zharios"}, "edited": false, "score": 0, "creation_date": 1521101307, "post_id": 49288214, "comment_id": 85590680, "body": "I use your method, and work fine with all my shapes except with the referenced in this post. In this case, all EPSG from geometrys return -1."}, {"owner": {"reputation": 604, "user_id": 8494876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f09b85a11286cad73c5ba2e7f91508d7?s=128&d=identicon&r=PG&f=1", "display_name": "Streamsoup", "link": "https://stackoverflow.com/users/8494876/streamsoup"}, "reply_to_user": {"reputation": 183, "user_id": 8027551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207196789775054/picture?type=large", "display_name": "Zharios", "link": "https://stackoverflow.com/users/8027551/zharios"}, "edited": false, "score": 1, "creation_date": 1521143486, "post_id": 49288214, "comment_id": 85618214, "body": "There&#39;s something definitely wrong with this particular EPSG in OGR, either in the underlying PROJ4 defs or in OGR/GEOS. Both GetEPSGGeogCS() and AutoIdentifyEPSG() return incorrect values (-1/7) when called on spatRef, even if the spatial reference system is initialized with proj4 parameters found on <a href=\"http://spatialreference.org/ref/epsg/etrs89-utm-zone-30n/\" rel=\"nofollow noreferrer\">spatialreference.org/ref/epsg/etrs89-utm-zone-30n</a>, or with SetWellKnownGeogCS( &quot;EPSG:25830&quot; )."}], "tags": [], "owner": {"reputation": 604, "user_id": 8494876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f09b85a11286cad73c5ba2e7f91508d7?s=128&d=identicon&r=PG&f=1", "display_name": "Streamsoup", "link": "https://stackoverflow.com/users/8494876/streamsoup"}, "is_accepted": true, "score": 1, "last_activity_date": 1521068902, "last_edit_date": 1521068902, "creation_date": 1521064402, "answer_id": 49288214, "question_id": 49153558, "link": "https://stackoverflow.com/questions/49153558/cant-get-epsg-from-shapefile-with-ogr-gdal/49288214#49288214", "title": "Can&#39;t get EPSG from Shapefile with OGR/GDAL", "body": "<p>Something like this should work:</p>\n\n<pre><code>OGRLayer  * layer = dataset-&gt;GetLayer(0);\nlayer-&gt;ResetReading();\nOGRFeature * feat= layer-&gt;GetNextFeature(); \nOGRGeometry * geom = feat-&gt;GetGeometryRef(); \nOGRSpatialReference * spatRef = geom-&gt;getSpatialReference(); \nint EPSG =  spatRef-&gt;GetEPSGGeogCS(); \n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 183, "user_id": 8027551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10207196789775054/picture?type=large", "display_name": "Zharios", "link": "https://stackoverflow.com/users/8027551/zharios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1537, "favorite_count": 0, "accepted_answer_id": 49288214, "answer_count": 1, "score": 5, "last_activity_date": 1521068902, "creation_date": 1520430652, "last_edit_date": 1520522820, "question_id": 49153558, "link": "https://stackoverflow.com/questions/49153558/cant-get-epsg-from-shapefile-with-ogr-gdal", "title": "Can&#39;t get EPSG from Shapefile with OGR/GDAL", "body": "<p>At this moment, i'm working in a shapefile visor in C++ and QT and using the GDAL/OGR library.  I have this method to get the EPSG of my shapefiles:</p>\n\n<pre><code>OGRLayer layer = dataset-&gt;GetLayer(0);\nOGRSpatialReference *spatialRef = layer-&gt;GetSpatialRef();\n</code></pre>\n\n<p>With this I get the EPSG number with:</p>\n\n<pre><code>atoi(spatialRef-&gt;GetAuthorityCode(NULL));\n</code></pre>\n\n<p>This work fine in all my shape files less one. In this case, the method always retun null.</p>\n\n<p>I try use:</p>\n\n<pre><code>spatialRef-&gt;GetAuthorityCode(\"PROJCS\");\nspatialRef-&gt;GetAuthorityCode(\"GEOGCS\");\nspatialRef-&gt;GetAuthorityName(\"GEOGCS\");\n</code></pre>\n\n<p>And all this method return <code>\"\"</code>.</p>\n\n<p>I check this shapefile in a gis program as QGIS and QGIS autodetected that his EPSG is 25830.</p>\n\n<p>My question is this: could the projection information be readed with a different method than what I'm doing?</p>\n\n<p>I wait yours suggestions.</p>\n\n<p>Thank a lot.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This is the content of .prj file:</p>\n\n<blockquote>\n  <p>PROJCS[\"ETRS89_UTM_zone_30N\",GEOGCS[\"GCS_ETRS_1989\",DATUM[\"D_ETRS_1989\",SPHEROID[\"GRS_1980\",6378137,298.257222101]],PRIMEM[\"Greenwich\",0],UNIT[\"Degree\",0.017453292519943295]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",-3],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"Meter\",1]]</p>\n</blockquote>\n"}, {"tags": ["c++", "atmosphere"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520430933, "post_id": 49153514, "comment_id": 85311642, "body": "6e-7 is small... how does it compare to the magnitude of tCurrentLight?"}, {"owner": {"reputation": 21, "user_id": 9365517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Maria", "link": "https://stackoverflow.com/users/9365517/maria"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520431179, "post_id": 49153514, "comment_id": 85311809, "body": "@UKMonkey according to the image attached in my question, the ozone density function is 6e-7 times larger than rayleigh one, which is why I multiplied by that number"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520431356, "post_id": 49153514, "comment_id": 85311947, "body": "if you&#39;re adding 6e-7 to 1 ... then I wouldn&#39;t expect to see any difference either.  If I&#39;m adding it to 6e-5 I&#39;d question if I&#39;d see it.  If I&#39;m adding it to 6e-9 then I&#39;d expect to be blinded by it.  Hence my question - how do your numbers, when you put in a breakpoint, compare?"}, {"owner": {"reputation": 21, "user_id": 9365517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Maria", "link": "https://stackoverflow.com/users/9365517/maria"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520431820, "post_id": 49153514, "comment_id": 85312281, "body": "@UKMonkey In fact it doesn&#39;t make much of a difference except during sunset/sunrise, which is why most people dont implement the ozone"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520433556, "post_id": 49153514, "comment_id": 85313456, "body": "Then you seem to have answered your own question?"}, {"owner": {"reputation": 21, "user_id": 9365517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Maria", "link": "https://stackoverflow.com/users/9365517/maria"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520434482, "post_id": 49153514, "comment_id": 85314072, "body": "@LightnessRacesinOrbit No, during sunset/sunrise there should be a difference but there isnt. As can be read here:<a href=\"http://skyrenderer.blogspot.com.mt/2012/10/ozone-absorption.html\" rel=\"nofollow noreferrer\">skyrenderer.blogspot.com.mt/2012/10/ozone-absorption.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520434829, "post_id": 49153514, "comment_id": 85314346, "body": "Can you show us the problem with images?"}, {"owner": {"reputation": 21, "user_id": 9365517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Maria", "link": "https://stackoverflow.com/users/9365517/maria"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520436051, "post_id": 49153514, "comment_id": 85315343, "body": "@LightnessRacesinOrbit <a href=\"https://ibb.co/j2tQhn\" rel=\"nofollow noreferrer\">ibb.co/j2tQhn</a>, without ozone absorption sky looks grey. After adding absorption it should look deep blue. However, I saw no difference so I must be doing something wrong."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520436099, "post_id": 49153514, "comment_id": 85315373, "body": "No, I mean, show us <i>the problem</i> with images. I already saw those examples on the linked site."}, {"owner": {"reputation": 21, "user_id": 9365517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Maria", "link": "https://stackoverflow.com/users/9365517/maria"}, "edited": false, "score": 0, "creation_date": 1520436607, "post_id": 49153514, "comment_id": 85315797, "body": "Sorry, I did not understand of what images you are requesting. My current image is grey like the one I just sent."}], "owner": {"reputation": 21, "user_id": 9365517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Maria", "link": "https://stackoverflow.com/users/9365517/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1520430685, "creation_date": 1520430548, "last_edit_date": 1520430685, "question_id": 49153514, "link": "https://stackoverflow.com/questions/49153514/adding-ozone-to-my-sky-simulation", "title": "Adding Ozone to my sky simulation", "body": "<p>I implemented a simulation for the colour of the sky a while ago by following the scratch a pixel tutorial: <a href=\"https://www.scratchapixel.com/lessons/procedural-generation-virtual-worlds/simulating-sky\" rel=\"nofollow noreferrer\">https://www.scratchapixel.com/lessons/procedural-generation-virtual-worlds/simulating-sky</a></p>\n\n<p>I adapted it for the actual sun position and am able to get realistic sky colours during the day. However, I noticed that after sunset/ before sunrise, the colours are greyish when they should be deep blue. After researching about this, I read that this is due to the ozone absorption not being present in my model.</p>\n\n<p>I used extinction coefficients : (3.426,8.298,0.356) * 0.06e-5 -> found on <a href=\"https://media.contentapi.ea.com/content/dam/eacom/frostbite/files/s2016-pbs-frostbite-sky-clouds-new.pdf\" rel=\"nofollow noreferrer\">https://media.contentapi.ea.com/content/dam/eacom/frostbite/files/s2016-pbs-frostbite-sky-clouds-new.pdf</a></p>\n\n<p>and also read that since the ozone does not scatter, it should only be added to the transmittance value.\n<a href=\"https://i.stack.imgur.com/c9KUP.jpg\" rel=\"nofollow noreferrer\">Equation</a></p>\n\n<p>Therefore, I modified the code from scratchapixel as follows:</p>\n\n<pre><code>    for (uint32_t i = 0; i &lt; numSamples; ++i) {\n        vec3 samplePosition = ray_in2.origin() + (tCurrent + \n        segmentLength * 0.5f) * ray_in2.direction();\n        float height = samplePosition.length() - atmosphere.earthRadius;\n\n        // compute optical depth for light\n        float hr = exp(-height / atmosphere.Hr) * segmentLength;\n        float hm = exp(-height / atmosphere.Hm) * segmentLength;\n        float ho = exp(-height / atmosphere.Hr)* segmentLength*(6e-7);\n        opticalDepthR += hr;\n        opticalDepthM += hm;\n        opticalDepthO += ho;\n\n        // light optical depth\n        float t0Light, t1Light;\n\n            ...\n        for (j = 0; j &lt; numSamplesLight; ++j) {\n            vec3 samplePositionLight = samplePosition + (tCurrentLight + \n            segmentLengthLight * 0.5f) * sunDir;\n            float heightLight = samplePositionLight.length() - \n            atmosphere.earthRadius;\n\n            if (heightLight &lt; 0) break;\n            opticalDepthLightR += exp(-heightLight / atmosphere.Hr) * \n            segmentLengthLight;\n            opticalDepthLightM += exp(-heightLight / atmosphere.Hm) * \n            segmentLengthLight;\n            opticalDepthLightO += exp(-heightLight / atmosphere.Hr) * \n            segmentLengthLight*(6e-7); ;\n            tCurrentLight += segmentLengthLight;\n        }\n        if (j == numSamplesLight) {\n            vec3 tau = (betaR) * (opticalDepthR + opticalDepthLightR) + \n           betaM * 1.1f * (opticalDepthM + opticalDepthLightM)+ betaO*\n          (opticalDepthO + opticalDepthLightO);\n            vec3 attenuation(exp(-tau.x()), exp(-tau.y()), exp(-\n            tau.z()));\n</code></pre>\n\n<p>Summary:</p>\n\n<ul>\n<li>I added variable opticalDepthO and opticalDepthLightO which\nare calculated same as the optical depth for Rayleigh, but multiplied\nby 6e-7.</li>\n<li>Then, the sum of opticalDepthLightO and opticalDepthO is multiplied by the extiction coefficient for ozone and added to variable tau.</li>\n</ul>\n\n<p>Problem is, I see no difference in my sky colour before and after\nadding ozone. Can someone guide me to what it is that I'm doing wrong?</p>\n"}, {"tags": ["c++", "ubuntu", "svm", "opencv3.3"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1520430360, "post_id": 49153434, "comment_id": 85311265, "body": "Have you consulted the documentation on how to use SVM? What did it say?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1520430536, "post_id": 49153434, "comment_id": 85311387, "body": "Possible duplicate for the first error: <a href=\"https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords\" title=\"where and why do i have to put the template and typename keywords\">stackoverflow.com/questions/610245/&hellip;</a>"}, {"owner": {"reputation": 4432, "user_id": 1489639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa4ec4ffb6e786c3e4370a399f9bbbf?s=128&d=identicon&r=PG", "display_name": "Turix", "link": "https://stackoverflow.com/users/1489639/turix"}, "edited": false, "score": 0, "creation_date": 1520430559, "post_id": 49153434, "comment_id": 85311399, "body": "For your first error, you probably need <code>SVM::SVM</code> in between <code>&lt;</code> and <code>&gt;</code>.    Your second error looks like a linker error which means you probably need <code>-l</code> and/or <code>-L</code> flags when you compile."}, {"owner": {"reputation": 11, "user_id": 9356699, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J7qJdGG-7sA/AAAAAAAAAAI/AAAAAAAADD8/jDIrtSwMczw/photo.jpg?sz=128", "display_name": "Rezwan hasan Antik", "link": "https://stackoverflow.com/users/9356699/rezwan-hasan-antik"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520503102, "post_id": 49153434, "comment_id": 85345581, "body": "@LightnessRacesinOrbit Yes I&#39;ve followed the documentation of SVM but still it didn&#39;t work."}, {"owner": {"reputation": 11, "user_id": 9356699, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J7qJdGG-7sA/AAAAAAAAAAI/AAAAAAAADD8/jDIrtSwMczw/photo.jpg?sz=128", "display_name": "Rezwan hasan Antik", "link": "https://stackoverflow.com/users/9356699/rezwan-hasan-antik"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1520503128, "post_id": 49153434, "comment_id": 85345595, "body": "@NathanOliver Yes the error is duplicate but here the scenario is different and that&#39;s not working."}, {"owner": {"reputation": 11, "user_id": 9356699, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J7qJdGG-7sA/AAAAAAAAAAI/AAAAAAAADD8/jDIrtSwMczw/photo.jpg?sz=128", "display_name": "Rezwan hasan Antik", "link": "https://stackoverflow.com/users/9356699/rezwan-hasan-antik"}, "reply_to_user": {"reputation": 4432, "user_id": 1489639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa4ec4ffb6e786c3e4370a399f9bbbf?s=128&d=identicon&r=PG", "display_name": "Turix", "link": "https://stackoverflow.com/users/1489639/turix"}, "edited": false, "score": 0, "creation_date": 1520503420, "post_id": 49153434, "comment_id": 85345779, "body": "@Turix I have changed the code like this: svmNew = SVM::load&lt;SVM::SVM&gt;(&quot;Liveness_classifier.xml&quot;); But still it&#39;s not working. I think this one maybe ok: svmNew = SVM::load(&quot;Liveness_classifier.xml&quot;); But can you give me one example of using -l and/or -L flags when compiling."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520506042, "post_id": 49153434, "comment_id": 85347432, "body": "They&#39;re two completely different lines of code. Which one did the documentation say to use?"}, {"owner": {"reputation": 11, "user_id": 9356699, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J7qJdGG-7sA/AAAAAAAAAAI/AAAAAAAADD8/jDIrtSwMczw/photo.jpg?sz=128", "display_name": "Rezwan hasan Antik", "link": "https://stackoverflow.com/users/9356699/rezwan-hasan-antik"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520690229, "post_id": 49153434, "comment_id": 85424213, "body": "@LightnessRacesinOrbit The documentation says: svmNew = SVM::load&lt;SVM&gt;(&quot;Liveness_classifier.xml&quot;); this one"}, {"owner": {"reputation": 11, "user_id": 9356699, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J7qJdGG-7sA/AAAAAAAAAAI/AAAAAAAADD8/jDIrtSwMczw/photo.jpg?sz=128", "display_name": "Rezwan hasan Antik", "link": "https://stackoverflow.com/users/9356699/rezwan-hasan-antik"}, "reply_to_user": {"reputation": 4432, "user_id": 1489639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa4ec4ffb6e786c3e4370a399f9bbbf?s=128&d=identicon&r=PG", "display_name": "Turix", "link": "https://stackoverflow.com/users/1489639/turix"}, "edited": false, "score": 0, "creation_date": 1520962611, "post_id": 49153434, "comment_id": 85528522, "body": "@Turix I&#39;m using this line to compile:  g++ -std=c++11 demo.cpp <code>pkg-config --libs --cflags opencv</code> -o demo  If I want to use the -L flags then how can I use this? Can you please give me an example?"}], "owner": {"reputation": 11, "user_id": 9356699, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J7qJdGG-7sA/AAAAAAAAAAI/AAAAAAAADD8/jDIrtSwMczw/photo.jpg?sz=128", "display_name": "Rezwan hasan Antik", "link": "https://stackoverflow.com/users/9356699/rezwan-hasan-antik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520430345, "creation_date": 1520430295, "last_edit_date": 1520430345, "question_id": 49153434, "link": "https://stackoverflow.com/questions/49153434/c-error-about-expected-primary-expression-before-token", "title": "C++ Error about &quot;Expected primary-expression before \u2018&gt;\u2019 token&quot;", "body": "<p>I'm trying to load a xml file using a SVM obeject.</p>\n\n<p>While running this following code:</p>\n\n<pre><code>svmNew = SVM::load&lt;SVM&gt;(\"Liveness_classifier.xml\");\n</code></pre>\n\n<p>It's showing the following error:</p>\n\n<pre><code>error: expected primary-expression before \u2018&gt;\u2019 token\n</code></pre>\n\n<p>If I change the code like this:</p>\n\n<pre><code>svmNew = SVM::load(\"Liveness_classifier.xml\");\n</code></pre>\n\n<p>Then it's showing the following error:</p>\n\n<pre><code>(.text+0xa7f): undefined reference to `lbp::OLBP(cv::Mat const&amp;, cv::Mat&amp;)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Does anyone have any solution for this kind of error?</p>\n\n<p>I'm using Ubuntu 16.4 and OpenCV3.4, and this is C++ code.</p>\n"}, {"tags": ["c++", "c", "visual-studio-2015"], "comments": [{"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 1, "creation_date": 1520430401, "post_id": 49153432, "comment_id": 85311299, "body": "No, because the compiler is operative at the project level, not the solution level. Choosing <code>C</code> for a solution that also contains a VB project would make no sense."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 3, "creation_date": 1520430549, "post_id": 49153432, "comment_id": 85311391, "body": "Anyway, MSVC respect the source file extension and compiles as C any *.c file"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 0, "creation_date": 1520430736, "post_id": 49153432, "comment_id": 85311531, "body": "@MarkBenningfield: The compiler operates at the compilation unit level. You can have a project, where compilation units are compiled as C and C++ code. Anyway, the compiler does the right thing in compiling .c files as C, unless instructed not to."}, {"owner": {"reputation": 1830, "user_id": 1939432, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33f04ad78cc166c320de2001db7d1955?s=128&d=identicon&r=PG", "display_name": "Lyrk", "link": "https://stackoverflow.com/users/1939432/lyrk"}, "edited": false, "score": 0, "creation_date": 1520430810, "post_id": 49153432, "comment_id": 85311576, "body": "Is it so? I created a simple code and named as .c file. When I compiled it hanged. (default) Then I changed Compile as option to  &quot;Compile as C Code (/TC)&quot; and it worked flawlessly."}, {"owner": {"reputation": 1830, "user_id": 1939432, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33f04ad78cc166c320de2001db7d1955?s=128&d=identicon&r=PG", "display_name": "Lyrk", "link": "https://stackoverflow.com/users/1939432/lyrk"}, "edited": false, "score": 0, "creation_date": 1520431058, "post_id": 49153432, "comment_id": 85311728, "body": "<a href=\"https://onlinegdb.com/SyS6kuaOM\" rel=\"nofollow noreferrer\">onlinegdb.com/SyS6kuaOM</a>    try this with Visual Studio 2015. When you leave the compiler as default, program hangs."}, {"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1520431133, "post_id": 49153432, "comment_id": 85311774, "body": "@IInspectable: You misunderstand. If I restate to say the exact same thing as &quot;The compiler is not operative at the solution level, but at the project level&quot;, does that make it clearer? That doesn&#39;t mean that you can only have one compiler per project; it means that you can&#39;t have <i>any</i> compilers per solution."}, {"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 1, "creation_date": 1520431450, "post_id": 49153432, "comment_id": 85312011, "body": "@Lyrk: Compiled and executed code at your link on VS2015. Renamed <code>stdafx.cpp</code> to <code>stdafx.c</code> and <code>ConsoleApplication1.cpp</code> to <code>ConsoleApplication1</code>.c<code>. </code>CompileAs` setting is &quot;Default&quot;. No problems."}, {"owner": {"reputation": 1830, "user_id": 1939432, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33f04ad78cc166c320de2001db7d1955?s=128&d=identicon&r=PG", "display_name": "Lyrk", "link": "https://stackoverflow.com/users/1939432/lyrk"}, "edited": false, "score": 0, "creation_date": 1520431837, "post_id": 49153432, "comment_id": 85312295, "body": "I do not understand. Maybe my Visual Studio Installation is faulty. Thanks for trying. I will reinstall then."}], "owner": {"reputation": 1830, "user_id": 1939432, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33f04ad78cc166c320de2001db7d1955?s=128&d=identicon&r=PG", "display_name": "Lyrk", "link": "https://stackoverflow.com/users/1939432/lyrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520437555, "creation_date": 1520430293, "question_id": 49153432, "link": "https://stackoverflow.com/questions/49153432/changing-default-compiler-option-of-a-solution", "title": "Changing default compiler option of a Solution", "body": "<p>I have a few Projects under a Solution and I am writing code in C. Whenever I make a new project under this Solution, I should change the compiler from \"default\" to \"Compile as C Code (/TC)\" by right clicking the project and going into Configuration Properties - C/C++ - All Options - Compile As. Instead of this, is there a way to set the compiler of a Solution once and this would apply to all the projects under that solution instead of changing every one of them one by one? </p>\n"}, {"tags": ["c++", "windows", "x86", "simd", "avx"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1520430409, "post_id": 49153315, "comment_id": 85311308, "body": "What was it actually compiled to? Especially that extract, which is impossible without unrolling the loop"}, {"owner": {"reputation": 9, "user_id": 9456909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec49fcfa510174390d1f3c08fc7f67a9?s=128&d=identicon&r=PG&f=1", "display_name": "farhad", "link": "https://stackoverflow.com/users/9456909/farhad"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1520431207, "post_id": 49153315, "comment_id": 85311826, "body": "Yes, It is compiled without any problem. By the way, the problem is with the cout not the extract instruction. The code does not work without the loop either (e.g. i = 0)."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1520431395, "post_id": 49153315, "comment_id": 85311974, "body": "Intel ICC (17 or 18) does not even compile this (on Linux at least). clang is the only compiler I have found that will unroll the loop to get compile-time constants for the extract index. What version of ICC are you using ?"}, {"owner": {"reputation": 9, "user_id": 9456909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec49fcfa510174390d1f3c08fc7f67a9?s=128&d=identicon&r=PG&f=1", "display_name": "farhad", "link": "https://stackoverflow.com/users/9456909/farhad"}, "edited": false, "score": 0, "creation_date": 1520432593, "post_id": 49153315, "comment_id": 85312805, "body": "I use nodepad to type the code and then I use the ICC 18 to compile it (e.g. icl test.cpp) and then I run the exe file. My OS is windows 10 64bit. Anyway, is there any other way to show the content of the variable a?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 3, "creation_date": 1520437184, "post_id": 49153315, "comment_id": 85316206, "body": "If you are using the <a href=\"https://ark.intel.com/products/71070/Intel-Pentium-Processor-G2020-3M-Cache-2_90-GHz\" rel=\"nofollow noreferrer\">G2020 the spec sheet</a> shows it doesn&#39;t support AVX. It only supports Intel&#174; SSE4.1, Intel&#174; SSE4.2 extensions."}, {"owner": {"reputation": 9, "user_id": 9456909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec49fcfa510174390d1f3c08fc7f67a9?s=128&d=identicon&r=PG&f=1", "display_name": "farhad", "link": "https://stackoverflow.com/users/9456909/farhad"}, "edited": false, "score": 0, "creation_date": 1520443814, "post_id": 49153315, "comment_id": 85320700, "body": "Maybe you are right. I used coreinfo.exe and it says it supports AVX. Perhaps this is the reason of the run-time error. I will run my code on my friend&#39;s computer on saturday and I will update the question."}, {"owner": {"reputation": 9, "user_id": 9456909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec49fcfa510174390d1f3c08fc7f67a9?s=128&d=identicon&r=PG&f=1", "display_name": "farhad", "link": "https://stackoverflow.com/users/9456909/farhad"}, "edited": false, "score": 0, "creation_date": 1520681729, "post_id": 49153315, "comment_id": 85421747, "body": "UPDATE: my code runs correctly on my friend&#39;s computer. The CPU of his computer is Intel Core i5 3570. I wonder why coreinfo.exe reports that my CPU (Intel G2020) supports AVX. Thank you all for the comments anyway."}, {"owner": {"reputation": 9, "user_id": 9456909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec49fcfa510174390d1f3c08fc7f67a9?s=128&d=identicon&r=PG&f=1", "display_name": "farhad", "link": "https://stackoverflow.com/users/9456909/farhad"}, "edited": false, "score": 0, "creation_date": 1520861783, "post_id": 49153315, "comment_id": 85476247, "body": "I have just found a code at <a href=\"https://msdn.microsoft.com/en-us/library/hskdteyh.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/hskdteyh.aspx</a> which reports the supported CPU instruction sets."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9456909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec49fcfa510174390d1f3c08fc7f67a9?s=128&d=identicon&r=PG&f=1", "display_name": "farhad", "link": "https://stackoverflow.com/users/9456909/farhad"}, "edited": false, "score": 0, "creation_date": 1520433523, "post_id": 49154279, "comment_id": 85313428, "body": "I get the same run-time error with this code too. Perhaps the problem is related to my CPU. My CPU is Intel G2020."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1520436782, "post_id": 49154279, "comment_id": 85315924, "body": "Is <code>long long</code> missing parentheses?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1520439755, "post_id": 49154279, "comment_id": 85318070, "body": "Or you meant to use <code>(T)</code>instead of <code>long long</code>"}, {"owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "edited": false, "score": 1, "creation_date": 1520453785, "post_id": 49154279, "comment_id": 85326407, "body": "CPU G2020 does not support AVX or AVX2."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1579050364, "post_id": 49154279, "comment_id": 105635933, "body": "Related: <a href=\"//stackoverflow.com/a/46752535\">print a __m128i variable</a> for more about why storing to a tmp array is a good thing, and why it wouldn&#39;t be safe to do pointer-casting."}], "tags": [], "owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "is_accepted": false, "score": 1, "last_activity_date": 1579048661, "last_edit_date": 1579048661, "creation_date": 1520432833, "answer_id": 49154279, "question_id": 49153315, "link": "https://stackoverflow.com/questions/49153315/print-out-the-content-of-m256i-variable/49154279#49154279", "title": "print out the content of __m256i variable", "body": "<p>You can try to use next function to print content of __m256i vector:</p>\n\n<pre><code>#include &lt;immintrin.h&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;    \n\ntemplate&lt;class T&gt; inline void Log(const __m256i &amp; value)\n{\n    const size_t n = sizeof(__m256i) / sizeof(T);\n    T buffer[n];\n    _mm256_storeu_si256((__m256i*)buffer, value);\n    for (int i = 0; i &lt; n; i++)\n        std::cout &lt;&lt; buffer[i] &lt;&lt; \" \";\n}\n\nint main()\n{\n    __m256i a = _mm256_set_epi64x(1, 2, 3, 4);\n    Log&lt;long&gt;(a);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9456909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec49fcfa510174390d1f3c08fc7f67a9?s=128&d=identicon&r=PG&f=1", "display_name": "farhad", "link": "https://stackoverflow.com/users/9456909/farhad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1111, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1579048661, "creation_date": 1520429929, "last_edit_date": 1520430972, "question_id": 49153315, "link": "https://stackoverflow.com/questions/49153315/print-out-the-content-of-m256i-variable", "title": "print out the content of __m256i variable", "body": "<p>I am trying to print out the value of an <code>__m256i</code> variable but I get a run-time error (file.exe has stopped working!). My CPU is Intel and supports AVX instructions. When I comment the cout line, the code runs. I am using Intel C++ compiler. what is the problem? Is there any other way to show the contents of <code>__m256i</code> variable. My code is as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include \"immintrin.h\"\n\nusing namespace std;\n\nint main()\n{\n    __m256i a;\n    int i;\n\n    a = _mm256_set_epi64x(1, 2, 3, 4);\n\n    cout &lt;&lt; setfill('0'); // fill with 0s\n\n    for (i = 0; i &lt; 4; i++) {\n\n        cout &lt;&lt; hex &lt;&lt; setw(16) &lt;&lt; _mm256_extract_epi64(a, i);\n\n    }\n\n    cout &lt;&lt; endl;\n\n    cin.get();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "image", "opencv"], "comments": [{"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1520430314, "post_id": 49153229, "comment_id": 85311223, "body": "How are your lines represented ?"}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520430375, "post_id": 49153229, "comment_id": 85311276, "body": "Could you add the photo with the lines you formed?"}, {"owner": {"reputation": 7, "user_id": 5603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664a4d99c419cc5a378e220b9f137622?s=128&d=identicon&r=PG&f=1", "display_name": "ChiHong", "link": "https://stackoverflow.com/users/5603023/chihong"}, "reply_to_user": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1520431324, "post_id": 49153229, "comment_id": 85311923, "body": "@ZdaR the lines are formed from a set of points with cv::line function."}, {"owner": {"reputation": 7, "user_id": 5603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664a4d99c419cc5a378e220b9f137622?s=128&d=identicon&r=PG&f=1", "display_name": "ChiHong", "link": "https://stackoverflow.com/users/5603023/chihong"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520431415, "post_id": 49153229, "comment_id": 85311990, "body": "@Ja_cpp The lines are in the photo attached."}, {"owner": {"reputation": 2776, "user_id": 4917686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GzLa2.png?s=128&g=1", "display_name": "Jo&#227;o Cartucho", "link": "https://stackoverflow.com/users/4917686/jo%c3%a3o-cartucho"}, "edited": false, "score": 1, "creation_date": 1520432439, "post_id": 49153229, "comment_id": 85312699, "body": "What about using <a href=\"https://docs.opencv.org/3.0-beta/modules/imgproc/doc/miscellaneous_transformations.html#floodfill\" rel=\"nofollow noreferrer\">floodfill</a> and creating separate masks?"}, {"owner": {"reputation": 2776, "user_id": 4917686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GzLa2.png?s=128&g=1", "display_name": "Jo&#227;o Cartucho", "link": "https://stackoverflow.com/users/4917686/jo%c3%a3o-cartucho"}, "edited": false, "score": 0, "creation_date": 1520432522, "post_id": 49153229, "comment_id": 85312753, "body": "If you shared your code and original image would be easier to help you"}, {"owner": {"reputation": 7, "user_id": 5603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664a4d99c419cc5a378e220b9f137622?s=128&d=identicon&r=PG&f=1", "display_name": "ChiHong", "link": "https://stackoverflow.com/users/5603023/chihong"}, "reply_to_user": {"reputation": 2776, "user_id": 4917686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GzLa2.png?s=128&g=1", "display_name": "Jo&#227;o Cartucho", "link": "https://stackoverflow.com/users/4917686/jo%c3%a3o-cartucho"}, "edited": false, "score": 0, "creation_date": 1520438741, "post_id": 49153229, "comment_id": 85317366, "body": "@Jo&#227;oCartucho I&#39;d edited the post with the code and image. Thanks for your suggestion. I will try."}, {"owner": {"reputation": 951, "user_id": 9161094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5b3673d6dd85cb6b7c4b870c601233?s=128&d=identicon&r=PG&f=1", "display_name": "Pam", "link": "https://stackoverflow.com/users/9161094/pam"}, "edited": false, "score": 0, "creation_date": 1520438809, "post_id": 49153229, "comment_id": 85317413, "body": "If you go with floodfill and masks, bear in mind your images will still be rectangular but the masks will get rid of irrelevant pixels."}], "answers": [{"tags": [], "owner": {"reputation": 2776, "user_id": 4917686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GzLa2.png?s=128&g=1", "display_name": "Jo&#227;o Cartucho", "link": "https://stackoverflow.com/users/4917686/jo%c3%a3o-cartucho"}, "is_accepted": true, "score": 1, "last_activity_date": 1520464843, "last_edit_date": 1520464843, "creation_date": 1520464442, "answer_id": 49162810, "question_id": 49153229, "link": "https://stackoverflow.com/questions/49153229/how-to-split-image-in-opencv-based-on-lines/49162810#49162810", "title": "How to split image in OpenCV based on lines", "body": "<p>I don't understand many things in your code so I just appended some lines to do what you want.</p>\n\n<p><strong>1</strong> - Create a Mat of zeros to draw the lines (CV_8U)</p>\n\n<pre><code>Mat dst = cv::Mat(height, width, CV_8U, cvScalar(0.));\n</code></pre>\n\n<p><strong>2</strong> - Draw the lines (using your points)</p>\n\n<pre><code>line( dst, Point((int)p0.x, (int)p0.y), Point((int)p1.x, (int)p1.y), Scalar( 255, 255, 255 ), 1, 8);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/N0Xko.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N0Xko.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>3</strong> - Close the \"holes\" between the lines (CLOSE morphology operation)</p>\n\n<pre><code>int morph_size = 20; // adjust this values to your image\nMat element = getStructuringElement( MORPH_RECT, Size( 2*morph_size + 1, 2*morph_size+1 ), Point( morph_size, morph_size ) );\n// Apply the CLOSE morphology operation\nmorphologyEx( dst, closed, MORPH_CLOSE, element );\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gFfJH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gFfJH.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>4</strong> - Flood fill to a mask (= \"painting\" the splitted areas)</p>\n\n<pre><code>// iterate through the points\nfor (int i = 0; i &lt; closed.rows; i++ ) {\n    for (int j = 0; j &lt; closed.cols; j++) {\n        // if point is not \"painted\" yet\n        if (closed.at&lt;uchar&gt;(i, j) == 0) {\n            // copy Mat before Flood fill\n            Mat previous_closed = closed.clone();\n            // Flood fill that seed point (\"paint\" that area)\n            floodFill(closed, Point(j, i), 255);\n            // Get mask with the \"painted\" area\n            Mat mask = closed - previous_closed;\n\n            /// Copy from segmentedImg using the mask\n            Mat outputMat;\n            segmentedImg.copyTo(outputMat, mask);\n            cv::imshow(\"Closed lines\", closed);\n            imshow(\"Splitted Area\", outputMat);\n            waitKey(0);\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>Area 1:</p>\n\n<p><a href=\"https://i.stack.imgur.com/O5ExP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O5ExP.png\" alt=\"enter image description here\"></a></p>\n\n<p>Area 2:</p>\n\n<p><a href=\"https://i.stack.imgur.com/r3W6F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r3W6F.png\" alt=\"enter image description here\"></a></p>\n\n<p>Area 3:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GGwxV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GGwxV.png\" alt=\"enter image description here\"></a></p>\n\n<p>... And so on, for the 5 areas, that loop basically keeps on painting the \"black areas\" in white and creating mats given the difference before and after each flood fill.</p>\n\n<p>Full code (your code + this lines):</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/highgui.hpp&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace cv;\n\n#define JC_VORONOI_IMPLEMENTATION\n#include \"jc_voronoi.h\"\n\n\ntypedef struct compPoint\n{\n    cv::Point pointer;\n    int siteNum, size ;\n};\n\nint maximumSize;\nfloat average=0;\n\nstd::vector&lt;compPoint&gt; generatePoint(cv::Mat image);\nvoid generateVoronoi(std::vector&lt;cv::Point&gt; points, int width, int height);\nstatic inline jcv_point remap(const jcv_point* pt, const jcv_point* min, const jcv_point* max, const jcv_point* scale);\nstatic void draw_line(int x0, int y0, int x1, int y1, unsigned char* image, int width, int height, int nchannels, unsigned char* color);\nstatic void plot(int x, int y, unsigned char* image, int width, int height, int nchannels, unsigned char* color);\nfloat areaDifference(int s1,int  s2);\n\nfloat areaDifference(int s1, int  s2)\n{\n    if (s1 &gt; s2)\n    {\n        return s1 / s2;\n    }\n    else\n    {\n        return s2 / s1;\n    }\n}\nstd::vector&lt;compPoint&gt; generatePoint(cv::Mat image)\n{\n    cv::Mat grayscale, binary;\n    cv::cvtColor(image, grayscale, cv::COLOR_BGR2GRAY);\n    cv::threshold(grayscale, binary, 190, 255, 1);\n\n    std::vector&lt;std::vector&lt;cv::Point&gt; &gt; contours;\n    std::vector&lt;cv::Vec4i&gt; hierarchy;\n\n    cv::findContours(binary, contours, hierarchy, cv::RETR_TREE, cv::CHAIN_APPROX_NONE, cv::Point(0, 0));\n\n    std::vector&lt;compPoint&gt; extractedPoint;\n    cv::Mat drawing = cv::Mat::zeros(binary.size(), CV_8UC3);\n    cv::Scalar color = cv::Scalar(255, 255, 255);\n    maximumSize = cv::contourArea(contours[0]);\n    int skip = 0;\n\n    for (int i = 0; i &lt; contours.size(); i++)\n    {\n        int jumpPoint = contours[i].size() / (contours[i].size() * 0.12);\n        bool isInner = false;\n        cv::Vec4i currentHierarchy = hierarchy[i];\n\n        if (contours[i].size() &lt;= 20)  //Remove small component\n            continue;\n\n        for (int g = 0; g &lt; contours[i].size(); g = g + jumpPoint) //Sample point from connected component\n        {\n            compPoint temp;\n            temp.pointer = contours[i].at(g);\n            line(drawing, contours[i].at(g), contours[i].at(g), color, 1, 8, 0);\n            if (currentHierarchy.val[3] != -1)\n            {\n                int currentIndex = currentHierarchy.val[3];\n                while (hierarchy[currentIndex].val[3] != -1)\n                {\n                    currentIndex = hierarchy[currentIndex].val[3];\n                }\n                temp.siteNum = currentIndex;\n                temp.size = cv::contourArea(contours[currentIndex]);\n                isInner = true;\n\n            }\n            else\n            {\n                temp.siteNum = i;\n                temp.size = cv::contourArea(contours[i]);\n\n                if (cv::contourArea(contours[i])&gt;maximumSize)\n                {\n                    maximumSize = cv::contourArea(contours[i]);\n                }\n\n            }\n\n            extractedPoint.push_back(temp);\n\n        }\n\n        if (isInner == false)\n        {\n            average = average + cv::contourArea(contours[i]);\n            skip++;\n        }\n\n    }\n    average = average/skip;\n    return extractedPoint;\n\n}\nstatic inline jcv_point remap(const jcv_point* pt, const jcv_point* min, const jcv_point* max, const jcv_point* scale)\n{\n    jcv_point p;\n    p.x = (pt-&gt;x - min-&gt;x) / (max-&gt;x - min-&gt;x) * scale-&gt;x;\n    p.y = (pt-&gt;y - min-&gt;y) / (max-&gt;y - min-&gt;y) * scale-&gt;y;\n    return p;\n}\nstatic void plot(int x, int y, unsigned char* image, int width, int height, int nchannels, unsigned char* color)\n{\n    if (x &lt; 0 || y &lt; 0 || x &gt;(width - 1) || y &gt;(height - 1))\n        return;\n    int index = y * width * nchannels + x * nchannels;\n    for (int i = 0; i &lt; nchannels; ++i)\n    {\n        image[index + i] = color[i];\n    }\n}\nstatic void draw_line(int x0, int y0, int x1, int y1, unsigned char* image, int width, int height, int nchannels, unsigned char* color)\n{\n    int dx = abs(x1 - x0), sx = x0&lt;x1 ? 1 : -1;\n    int dy = -abs(y1 - y0), sy = y0&lt;y1 ? 1 : -1;\n    int err = dx + dy, e2; // error value e_xy\n\n    for (;;)\n    {  // loop\n        plot(x0, y0, image, width, height, nchannels, color);\n        if (x0 == x1 &amp;&amp; y0 == y1) break;\n        e2 = 2 * err;\n        if (e2 &gt;= dy) { err += dy; x0 += sx; } // e_xy+e_x &gt; 0\n        if (e2 &lt;= dx) { err += dx; y0 += sy; } // e_xy+e_y &lt; 0\n    }\n}\nvoid generateVoronoi(std::vector&lt;compPoint&gt; points, int width, int height)\n{\n    /// 1 - Create Mat of zeros to draw the lines\n    Mat dst = cv::Mat(height,width, CV_8U, cvScalar(0.));\n\n    int size = points.size();\n\n    jcv_point* voronoiPoint = (jcv_point*)malloc(sizeof(jcv_point) * (size_t)size);\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        voronoiPoint[i].x = (float)points[i].pointer.x;\n        voronoiPoint[i].y = (float)points[i].pointer.y;\n        voronoiPoint[i].site = points[i].siteNum;\n        voronoiPoint[i].totalPoint = points[i].size;\n    }\n\n    jcv_rect* rect = 0;\n    size_t imagesize = (size_t)(width*height * 3);\n    unsigned char* image = (unsigned char*)malloc(imagesize);\n\n    memset(image, 0, imagesize);\n    unsigned char color_pt[] = { 255, 255, 255 };\n\n    jcv_diagram diagram;\n    jcv_point dimensions;\n    dimensions.x = (jcv_real)width;\n    dimensions.y = (jcv_real)height;\n\n    memset(&amp;diagram, 0, sizeof(jcv_diagram));\n    jcv_diagram_generate(size, (const jcv_point*)voronoiPoint, rect, &amp;diagram);\n\n    //Edge\n    const jcv_edge* edge = jcv_diagram_get_edges(&amp;diagram);\n    std::vector&lt;filtered_edge&gt; filteredEdge;\n\n    float min_x = 0.0, min_y = 0.0;\n\n    while (edge) //Remove edge from the same connected component\n    {\n        jcv_point p0 = edge-&gt;pos[0];\n        jcv_point p1 = edge-&gt;pos[1];\n\n        if (edge-&gt;sites[0]-&gt;p.site != edge-&gt;sites[1]-&gt;p.site)\n        {\n            filteredEdge.push_back(jcv_save_edge(edge));\n            min_x = min_x + abs(edge-&gt;sites[0]-&gt;p.x - edge-&gt;sites[1]-&gt;p.x);\n            min_y = min_y + abs(edge-&gt;sites[0]-&gt;p.y - edge-&gt;sites[1]-&gt;p.y);\n        }\n        edge = edge-&gt;next;\n    }\n\n    min_x = min_x / filteredEdge.size();\n    min_y = min_y / filteredEdge.size();\n    std::vector&lt;filtered_edge&gt; selectedEdge;\n\n    for (int i = 0; i &lt; filteredEdge.size(); i++)\n    {\n\n        jcv_point p0 = remap(&amp;filteredEdge.at(i).pos[0], &amp;diagram.min, &amp;diagram.max, &amp;dimensions);\n        jcv_point p1 = remap(&amp;filteredEdge.at(i).pos[1], &amp;diagram.min, &amp;diagram.max, &amp;dimensions);\n\n        float site_x = abs(filteredEdge.at(i).sites[0]-&gt;p.x - filteredEdge.at(i).sites[1]-&gt;p.x);\n        float site_y = abs(filteredEdge.at(i).sites[0]-&gt;p.y - filteredEdge.at(i).sites[1]-&gt;p.y);\n\n        float x_difference = abs(filteredEdge.at(i).pos[0].x- filteredEdge.at(i).pos[1].x);\n        float y_difference = abs(filteredEdge.at(i).pos[0].y - filteredEdge.at(i).pos[1].y);\n\n        float areaDiff = areaDifference(filteredEdge.at(i).sites[0]-&gt;p.totalPoint, filteredEdge.at(i).sites[1]-&gt;p.totalPoint);\n\n        if (p0.x - p1.x == 0 &amp;&amp; p0.y - p1.y == 0.0) //Remove short edges\n            continue;\n\n        /// 2 - Draw lines\n        if (areaDiff &gt; 20) //Keep edge between small(text) and big(image) component\n        {\n\n            float difference = abs(filteredEdge.at(i).sites[0]-&gt;p.totalPoint - filteredEdge.at(i).sites[1]-&gt;p.totalPoint);\n            if (difference &gt; average*4 )\n            {\n                unsigned char color_line2[] = { 0, 220, 220 };\n                selectedEdge.push_back(filteredEdge.at(i));\n                draw_line((int)p0.x, (int)p0.y, (int)p1.x, (int)p1.y, image, width, height, 3, color_line2);\n                line( dst, Point((int)p0.x, (int)p0.y), Point((int)p1.x, (int)p1.y), Scalar( 255, 255, 255 ), 1, 8);\n                continue;\n\n            }\n\n        }\n\n        if (x_difference &gt; y_difference) //Remove edge between close component\n        {\n\n            if (site_y &gt; min_y*1.6)\n            {\n                unsigned char color_line2[] = { 220, 0, 220 };\n\n                selectedEdge.push_back(filteredEdge.at(i));\n                draw_line((int)p0.x, (int)p0.y, (int)p1.x, (int)p1.y, image, width, height, 3, color_line2);\n                line( dst, Point((int)p0.x, (int)p0.y), Point((int)p1.x, (int)p1.y), Scalar( 255, 255, 255 ), 1, 8);\n            }\n\n        }\n        else\n        {\n            if (site_x &gt; min_x*2.5)\n            {\n                unsigned char color_line2[] = { 220, 220, 0 };\n\n                selectedEdge.push_back(filteredEdge.at(i));\n                draw_line((int)p0.x, (int)p0.y, (int)p1.x, (int)p1.y, image, width, height, 3, color_line2);\n                line( dst, Point((int)p0.x, (int)p0.y), Point((int)p1.x, (int)p1.y), Scalar( 255, 255, 255 ), 1, 8);\n            }\n        }\n    }\n\n    jcv_diagram_free(&amp;diagram);\n\n    for (int i = 0; i &lt; size; ++i)\n    {\n        jcv_point p = remap(&amp;voronoiPoint[i], &amp;diagram.min, &amp;diagram.max, &amp;dimensions);\n        plot((int)p.x, (int)p.y, image, width, height, 3, color_pt);\n\n    }\n\n    free(voronoiPoint);\n    cv::Mat segmentedImg = cv::Mat(height, width, CV_8UC3, image);\n    cv::imshow(\"Testing\", segmentedImg);\n    cv::imshow(\"Lines\", dst);\n    /// New code:\n    Mat closed = dst.clone();\n    /// 3 - Close the \"holes\" between the lines\n    int morph_size = 20; // adjust this values to your image\n    Mat element = getStructuringElement( MORPH_RECT, Size( 2*morph_size + 1, 2*morph_size+1 ), Point( morph_size, morph_size ) );\n    // Apply the CLOSE morphology operation\n    morphologyEx( dst, closed, MORPH_CLOSE, element );\n    imshow(\"Closed lines\", closed);\n    waitKey(0);\n    /// 4 - Flood fill to a mask\n    // iterate through the points\n    for (int i = 0; i &lt; closed.rows; i++ ) {\n        for (int j = 0; j &lt; closed.cols; j++) {\n            // if point is not \"painted\" yet\n            if (closed.at&lt;uchar&gt;(i, j) == 0) {\n                // copy Mat before Flood fill\n                Mat previous_closed = closed.clone();\n                // Flood fill that seed point (\"paint\" that area)\n                floodFill(closed, Point(j, i), 255);\n                // Get mask with the \"painted\" area\n                Mat mask = closed - previous_closed;\n\n                /// 5 - Copy from segmentedImg using the mask\n                Mat outputMat;\n                segmentedImg.copyTo(outputMat, mask);\n                cv::imshow(\"Closed lines\", closed);\n                imshow(\"Splitted Area\", outputMat);\n                waitKey(0);\n                break;\n            }\n        }\n    }\n\n    free(image);\n}\n\n\nint main()\n{\n    cv::Mat image, skewCorrected;\n\n    image = cv::imread(\"/home/tribta/Downloads/HI2IT.png\");\n    if (!image.data)\n    {\n        std::cout &lt;&lt; \"Error\" &lt;&lt; std::endl;\n        system(\"PAUSE\");\n\n        return 0;\n    }\n    std::vector&lt;compPoint&gt; points = generatePoint(image);\n\n    int width = image.size().width, height = image.size().height;\n    generateVoronoi(points, width, height);\n\n    cv::waitKey(0);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664a4d99c419cc5a378e220b9f137622?s=128&d=identicon&r=PG&f=1", "display_name": "ChiHong", "link": "https://stackoverflow.com/users/5603023/chihong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "accepted_answer_id": 49162810, "answer_count": 1, "score": 0, "last_activity_date": 1520464843, "creation_date": 1520429588, "last_edit_date": 1520445993, "question_id": 49153229, "link": "https://stackoverflow.com/questions/49153229/how-to-split-image-in-opencv-based-on-lines", "title": "How to split image in OpenCV based on lines", "body": "<p>I am trying to do text segmentation. The attachment below is the results of it. </p>\n\n<p><a href=\"https://i.stack.imgur.com/8GyCU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8GyCU.png\" alt=\"Line Images\"></a></p>\n\n<p>I manage to form lines to divide the image. However, I am stuck in splitting the image according to the lines that I'd found. \nAs labeled (red text) in the attached picture, I would like to split the image into 5 different images and I do not know where should I start. All the method I found only work for straight lines.</p>\n\n<p><a href=\"https://drive.google.com/open?id=1DMHFYAuQqHbN8MOWWsK60iThszoDp9Be\" rel=\"nofollow noreferrer\">Header</a></p>\n\n<p>Code - Source:</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/highgui.hpp&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;ctype.h&gt;\n#include &lt;fstream&gt;\n\n#define _USE_MATH_DEFINES\n#include &lt;math.h&gt;\n#define JC_VORONOI_IMPLEMENTATION\n#include \"jc_voronoi.h\"\n\n\ntypedef struct compPoint\n{\n  cv::Point pointer;\n  int siteNum, size ;\n};\n\nint maximumSize;\nfloat average=0;\n\nstd::vector&lt;compPoint&gt; generatePoint(cv::Mat image);\nvoid generateVoronoi(std::vector&lt;cv::Point&gt; points, int width, int height);\nstatic inline jcv_point remap(const jcv_point* pt, const jcv_point* min, const jcv_point* max, const jcv_point* scale);\nstatic void draw_line(int x0, int y0, int x1, int y1, unsigned char* image, int width, int height, int nchannels, unsigned char* color);\nstatic void plot(int x, int y, unsigned char* image, int width, int height, int nchannels, unsigned char* color);\nfloat areaDifference(int s1,int  s2);\n\nfloat areaDifference(int s1, int  s2)\n{\n  if (s1 &gt; s2)\n  {\n    return s1 / s2;\n  }\n  else\n  {\n    return s2 / s1;\n  }\n}\nstd::vector&lt;compPoint&gt; generatePoint(cv::Mat image)\n{\n  cv::Mat grayscale, binary;\n  cv::cvtColor(image, grayscale, cv::COLOR_BGR2GRAY);\n  cv::threshold(grayscale, binary, 190, 255, 1);\n\n  std::vector&lt;std::vector&lt;cv::Point&gt; &gt; contours;\n  std::vector&lt;cv::Vec4i&gt; hierarchy;\n\n  cv::findContours(binary, contours, hierarchy, cv::RETR_TREE, cv::CHAIN_APPROX_NONE, cv::Point(0, 0));\n\n  std::vector&lt;compPoint&gt; extractedPoint;\n  cv::Mat drawing = cv::Mat::zeros(binary.size(), CV_8UC3);\n  cv::Scalar color = cv::Scalar(255, 255, 255);\n  maximumSize = cv::contourArea(contours[0]);\n  int skip = 0;\n\n  for (int i = 0; i &lt; contours.size(); i++)\n  {\n    int jumpPoint = contours[i].size() / (contours[i].size() * 0.12);\n    bool isInner = false;\n    cv::Vec4i currentHierarchy = hierarchy[i];\n\n    if (contours[i].size() &lt;= 20)  //Remove small component \n      continue;\n\n    for (int g = 0; g &lt; contours[i].size(); g = g + jumpPoint) //Sample point from connected component\n    {\n      compPoint temp;\n      temp.pointer = contours[i].at(g);\n      line(drawing, contours[i].at(g), contours[i].at(g), color, 1, 8, 0);\n      if (currentHierarchy.val[3] != -1)\n      {\n          int currentIndex = currentHierarchy.val[3];\n          while (hierarchy[currentIndex].val[3] != -1)\n          {\n            currentIndex = hierarchy[currentIndex].val[3];\n          }\n          temp.siteNum = currentIndex;\n          temp.size = cv::contourArea(contours[currentIndex]);\n          isInner = true;\n\n      }\n      else\n      {\n        temp.siteNum = i;\n        temp.size = cv::contourArea(contours[i]);\n\n        if (cv::contourArea(contours[i])&gt;maximumSize)\n        {\n          maximumSize = cv::contourArea(contours[i]);\n        }\n\n      }\n\n      extractedPoint.push_back(temp);\n\n    }\n\n    if (isInner == false)\n    {\n      average = average + cv::contourArea(contours[i]);\n      skip++;\n    }\n\n  }\n  average = average/skip;\n  return extractedPoint;\n\n}\nstatic inline jcv_point remap(const jcv_point* pt, const jcv_point* min, const jcv_point* max, const jcv_point* scale)\n{\n  jcv_point p;\n  p.x = (pt-&gt;x - min-&gt;x) / (max-&gt;x - min-&gt;x) * scale-&gt;x;\n  p.y = (pt-&gt;y - min-&gt;y) / (max-&gt;y - min-&gt;y) * scale-&gt;y;\n  return p;\n}\nstatic void plot(int x, int y, unsigned char* image, int width, int height, int nchannels, unsigned char* color)\n{\n  if (x &lt; 0 || y &lt; 0 || x &gt;(width - 1) || y &gt;(height - 1))\n    return;\n  int index = y * width * nchannels + x * nchannels;\n  for (int i = 0; i &lt; nchannels; ++i)\n  {\n    image[index + i] = color[i];\n  }\n}\nstatic void draw_line(int x0, int y0, int x1, int y1, unsigned char* image, int width, int height, int nchannels, unsigned char* color)\n{\n  int dx = abs(x1 - x0), sx = x0&lt;x1 ? 1 : -1;\n  int dy = -abs(y1 - y0), sy = y0&lt;y1 ? 1 : -1;\n  int err = dx + dy, e2; // error value e_xy\n\n  for (;;)\n  {  // loop\n    plot(x0, y0, image, width, height, nchannels, color);\n    if (x0 == x1 &amp;&amp; y0 == y1) break;\n    e2 = 2 * err;\n    if (e2 &gt;= dy) { err += dy; x0 += sx; } // e_xy+e_x &gt; 0\n    if (e2 &lt;= dx) { err += dx; y0 += sy; } // e_xy+e_y &lt; 0\n  }\n}\nvoid generateVoronoi(std::vector&lt;compPoint&gt; points, int width, int height)\n{\n  int size = points.size();\n\n  jcv_point* voronoiPoint = (jcv_point*)malloc(sizeof(jcv_point) * (size_t)size);\n\n  for (int i = 0; i &lt; size; i++)\n  {\n    voronoiPoint[i].x = (float)points[i].pointer.x;\n    voronoiPoint[i].y = (float)points[i].pointer.y;\n    voronoiPoint[i].site = points[i].siteNum;\n    voronoiPoint[i].totalPoint = points[i].size;\n  }\n\n  jcv_rect* rect = 0;\n  size_t imagesize = (size_t)(width*height * 3);\n  unsigned char* image = (unsigned char*)malloc(imagesize);\n  unsigned char* image2 = (unsigned char*)malloc(imagesize);\n\n  memset(image, 0, imagesize);\n  unsigned char color_pt[] = { 255, 255, 255 };\n  unsigned char color_line[] = { 220, 220, 220 };\n\n  jcv_diagram diagram;\n  jcv_point dimensions;\n  dimensions.x = (jcv_real)width;\n  dimensions.y = (jcv_real)height;\n\n  memset(&amp;diagram, 0, sizeof(jcv_diagram));\n  jcv_diagram_generate(size, (const jcv_point*)voronoiPoint, rect, &amp;diagram);\n\n  //Edge\n  const jcv_edge* edge = jcv_diagram_get_edges(&amp;diagram);\n  std::vector&lt;filtered_edge&gt; filteredEdge;\n\n  float min_x = 0.0, min_y = 0.0;\n\n  while (edge) //Remove edge from the same connected component\n  {\n    jcv_point p0 = edge-&gt;pos[0]; \n    jcv_point p1 = edge-&gt;pos[1]; \n\n    if (edge-&gt;sites[0]-&gt;p.site != edge-&gt;sites[1]-&gt;p.site)\n    {\n      filteredEdge.push_back(jcv_save_edge(edge));\n      min_x = min_x + abs(edge-&gt;sites[0]-&gt;p.x - edge-&gt;sites[1]-&gt;p.x);\n      min_y = min_y + abs(edge-&gt;sites[0]-&gt;p.y - edge-&gt;sites[1]-&gt;p.y);\n     }\n    edge = edge-&gt;next;\n  }\n\n  min_x = min_x / filteredEdge.size();\n  min_y = min_y / filteredEdge.size();\n  std::vector&lt;filtered_edge&gt; selectedEdge;\n\n  for (int i = 0; i &lt; filteredEdge.size(); i++)\n  {\n\n    jcv_point p0 = remap(&amp;filteredEdge.at(i).pos[0], &amp;diagram.min, &amp;diagram.max, &amp;dimensions);\n    jcv_point p1 = remap(&amp;filteredEdge.at(i).pos[1], &amp;diagram.min, &amp;diagram.max, &amp;dimensions);\n\n    float site_x = abs(filteredEdge.at(i).sites[0]-&gt;p.x - filteredEdge.at(i).sites[1]-&gt;p.x);\n    float site_y = abs(filteredEdge.at(i).sites[0]-&gt;p.y - filteredEdge.at(i).sites[1]-&gt;p.y);\n\n    float x_difference = abs(filteredEdge.at(i).pos[0].x- filteredEdge.at(i).pos[1].x);\n    float y_difference = abs(filteredEdge.at(i).pos[0].y - filteredEdge.at(i).pos[1].y);\n\n    float areaDiff = areaDifference(filteredEdge.at(i).sites[0]-&gt;p.totalPoint, filteredEdge.at(i).sites[1]-&gt;p.totalPoint);\n\n    if (p0.x - p1.x == 0 &amp;&amp; p0.y - p1.y == 0.0) //Remove short edges\n      continue;\n\n    if (areaDiff &gt; 20) //Keep edge between small(text) and big(image) component\n    {\n\n      float difference = abs(filteredEdge.at(i).sites[0]-&gt;p.totalPoint - filteredEdge.at(i).sites[1]-&gt;p.totalPoint);\n      if (difference &gt; average*4 )\n      {\n        unsigned char color_line2[] = { 0, 220, 220 };\n        selectedEdge.push_back(filteredEdge.at(i));\n        draw_line((int)p0.x, (int)p0.y, (int)p1.x, (int)p1.y, image, width, height, 3, color_line2);\n        continue;\n\n      }\n\n    }\n\n    if (x_difference &gt; y_difference) //Remove edge between close component\n    {\n\n      if (site_y &gt; min_y*1.6)\n      {\n        unsigned char color_line2[] = { 220, 0, 220 };\n\n        selectedEdge.push_back(filteredEdge.at(i));\n        draw_line((int)p0.x, (int)p0.y, (int)p1.x, (int)p1.y, image, width, height, 3, color_line2);\n      }\n\n    }\n    else\n    {\n      if (site_x &gt; min_x*2.5)\n      {\n        unsigned char color_line2[] = { 220, 220, 0 };\n\n        selectedEdge.push_back(filteredEdge.at(i));\n        draw_line((int)p0.x, (int)p0.y, (int)p1.x, (int)p1.y, image, width, height, 3, color_line2);\n      }\n    }\n  }\n\n  jcv_diagram_free(&amp;diagram);\n\n  for (int i = 0; i &lt; size; ++i)\n  {\n    jcv_point p = remap(&amp;voronoiPoint[i], &amp;diagram.min, &amp;diagram.max, &amp;dimensions);\n    plot((int)p.x, (int)p.y, image, width, height, 3, color_pt);\n\n  }\n\n  free(voronoiPoint);\n  cv::Mat segmentedImg = cv::Mat(height, width, CV_8UC3, image);\n  cv::imshow(\"Testing\", segmentedImg);\n  cv::waitKey(0);\n\n  free(image);\n\n}\n\n\nint main()\n{\n  cv::Mat image, skewCorrected;\n\n  image = cv::imread(\"C:\\\\figure5.PNG\");\n  if (!image.data)\n  {\n    std::cout &lt;&lt; \"Error\" &lt;&lt; std::endl;\n    system(\"PAUSE\");\n\n    return 0;\n  }\n  std::vector&lt;compPoint&gt; points = generatePoint(image);\n\n  int width = image.size().width, height = image.size().height;\n\n  generateVoronoi(points, width, height);\n\n  cv::waitKey(0);\n\n}\n</code></pre>\n\n<p>Input image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HI2IT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HI2IT.png\" alt=\"Original Image\"></a></p>\n"}, {"tags": ["c++", "zeromq", "publish-subscribe"], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 0, "creation_date": 1520484522, "post_id": 49156124, "comment_id": 85336558, "body": "Should I write subscriber.connect(&quot;ipc://publisher.cpp&quot;); How to mention port number?@user3666197"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "edited": false, "score": 0, "creation_date": 1520524987, "post_id": 49156124, "comment_id": 85360158, "body": "No, you should not. No, there is no &quot;<i>port number</i>&quot; for <b><code>ipc:&#47;&#47;</code></b> transport-class connection mechanics. The best next step, in case one wishes to start further experimentation with <code>ipc:&#47;&#47;</code> transport-class deployment, would be to re-read the elementary system documentation on how to setup and configure system resources for this efficient IPC-tool &gt;&gt;&gt; <a href=\"https://linux.die.net/man/1/ipcmk\" rel=\"nofollow noreferrer\">linux.die.net/man/1/ipcmk</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": false, "score": 0, "last_activity_date": 1520438039, "creation_date": 1520438039, "answer_id": 49156124, "question_id": 49153116, "link": "https://stackoverflow.com/questions/49153116/is-the-subscriber-able-to-receive-updates-from-multiple-publishers-in-zeromq-wit/49156124#49156124", "title": "Is the subscriber able to receive updates from multiple publishers in ZeroMQ with cpp binding?", "body": "<h2>Does it mean we need to close the first before second?</h2>\n\n<p>No.  </p>\n\n<p>One need not <code>.close()</code> so as to launch another call  to the <code>.connect(...)</code> method.</p>\n\n<hr>\n\n<h2>How can I connect to multiple <code>PUB</code>-s to receive messages from both?</h2>\n\n<p>In cases, where both Fair-Queueing <strong><code>SUB</code></strong>-side Policy and identical  Topic-filter Policy logic processing on <strong><code>{ PUB | SUB }</code></strong>-side ( version dependent ... ) remains plausible:</p>\n\n<pre><code>int main (int argc, char *argv[])\n{\nzmq::context_t context (1);\nzmq::socket_t subscriber (context, ZMQ_SUB);\n\nsubscriber.connect( \"tcp://localhost:5556\" ); // ipc://first   will have less\nsubscriber.connect( \"tcp://localhost:5557\" ); // ipc://second  protocol overheads\n\nsubscriber.setsockopt( ZMQ_SUBSCRIBE, \"\", 0 );// subscribe to .recv() any message\n...\n}\n</code></pre>\n\n<p>In cases where it is not, use multiple <code>SUB</code>-side socket-instances, each <code>.connect()</code>-ed to respective non-balanced <strong><code>PUB</code></strong>-s and use a non-blocking <strong><code>.poll()</code></strong> inside an event-loop, tightly engineered so as to ad-hoc monitor and handle all the non-balanced message-arrival event-streams under the non-coherent Topic-filter Policy being processed per each <code>PUB/SUB</code> ( or <code>XPUB/XSUB</code> ) co-existing message \"event-streams\".</p>\n"}], "owner": {"reputation": 590, "user_id": 9065506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dffa345ed33f2f132c0a5c4d4eb74c83?s=128&d=identicon&r=PG&f=1", "display_name": "Ayush", "link": "https://stackoverflow.com/users/9065506/ayush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 559, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1520438211, "creation_date": 1520429257, "last_edit_date": 1520438211, "question_id": 49153116, "link": "https://stackoverflow.com/questions/49153116/is-the-subscriber-able-to-receive-updates-from-multiple-publishers-in-zeromq-wit", "title": "Is the subscriber able to receive updates from multiple publishers in ZeroMQ with cpp binding?", "body": "<p>In my code I am only able to receive the messages from the first publisher (on port 5556) to which I connect.</p>\n\n<p>So do I need to close the first connection (5556) before connecting to second (5557)?</p>\n\n<p>If so, then in the statement of ZeroMQ guide  </p>\n\n<blockquote>\n  <p>\"A subscriber can connect to more than one publisher, using one connect call each time. Data will then arrive and be interleaved (\"fair-queued\") so that no single publisher drowns out the others.\"</p>\n</blockquote>\n\n<p>Does the phrase \"<em>using one connect call each time</em>\" mean we need to close the first connection before connecting to second publisher?</p>\n\n<p>How can I connect to multiple publishers at the same time to receive messages from both. </p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;zmq.hpp&gt;\n#include\n\nint main (int argc, char *argv[])\n{\nzmq::context_t context (1);\nzmq::socket_t subscriber (context, ZMQ_SUB);\n\nsubscriber.connect(\"tcp://localhost:5556\");\nsubscriber.connect(\"tcp://localhost:5557\");\nsubscriber.setsockopt(ZMQ_SUBSCRIBE, \"\", 0);//subscribe to all messages\n\n//  Process 10 updates\nint update_nbr;\nfor (update_nbr = 0; update_nbr &lt; 10 ; update_nbr++) {\n\n    zmq::message_t update;\n    subscriber.recv (&amp;update);\n\n // Prints only the data from publisher bound to port 5556\n\n    std::string updt = std::string(static_cast&lt;char*&gt;(update.data()), update.size());\n    std::cout &lt;&lt; \"Received Update/Messages/TaskList \" &lt;&lt; update_nbr &lt;&lt;\" : \"&lt;&lt; updt &lt;&lt; std::endl;\n\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "json", "parsing", "websocket", "cpprest-sdk"], "comments": [{"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1520428485, "post_id": 49152808, "comment_id": 85310018, "body": "I want the extension,account name and status from that responses"}, {"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1520428528, "post_id": 49152808, "comment_id": 85310051, "body": "anyone working in websocket client using cpprestsdk packages please help me."}, {"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1520428681, "post_id": 49152808, "comment_id": 85310143, "body": "my codes have error."}, {"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1520432107, "post_id": 49152808, "comment_id": 85312476, "body": "<a href=\"https://www.codeproject.com/Articles/1102603/Accessing-JSON-Data-with-Cplusplus\" rel=\"nofollow noreferrer\">codeproject.com/Articles/1102603/&hellip;</a>"}, {"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1520432148, "post_id": 49152808, "comment_id": 85312506, "body": "i am working on the above links."}, {"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1520486963, "post_id": 49152808, "comment_id": 85337368, "body": "i got the response as json  in websocket_incoming_message event is string format.so i cant serialize .please help me"}, {"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1520574323, "post_id": 49152808, "comment_id": 85379901, "body": "the problem is that my base class method return only string data.i want to convert my json data from string to json object and parse the data from the object.  _ASYNCRTIMP pplx::task&lt;std::string&gt; web::websockets::client::websocket_incoming_message::extract&zwnj;&#8203;_string\t()\tconst"}, {"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1520574465, "post_id": 49152808, "comment_id": 85379951, "body": "Extracts the body of the incoming message as a string value, String containing body of the message."}, {"owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "edited": false, "score": 0, "creation_date": 1521204118, "post_id": 49152808, "comment_id": 85642987, "body": "json cpp packages is not working for me."}], "answers": [{"tags": [], "owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "is_accepted": true, "score": 3, "last_activity_date": 1521445943, "last_edit_date": 1521445943, "creation_date": 1521204159, "answer_id": 49321074, "question_id": 49152808, "link": "https://stackoverflow.com/questions/49152808/how-to-parse-json-data-from-websocket-client-using-cpprestsdk/49321074#49321074", "title": "How to parse json data from websocket_client using cpprestsdk", "body": "<p>I got the complete solution .please try to use boost pacakges from nuget. The documentation will help you to parse the json data from string. I think jsoncpp is not an updated packages available in the nuget.so please try boost packages available in the nuget.</p>\n\n<h2>MYJSON STRING</h2>\n\n<p>{\"action\":\"refresh_dashboard\",\"data\":{\"users_list\":[{\"user_id\":\"901e6076ff351cfc2195fb86f8438a26\",\"extensions\":[\"1002\"],\"name\":\"Karthik M\"},{\"user_id\":\"7d617ef5b2390d081d901b0d5cd108eb\",\"extensions\":[\"1015\"],\"name\":\"Synway User2\"},{\"user_id\":\"c8f667f7d663e81f6e7fa34b9296f067\",\"extensions\":[\"1012\"],\"name\":\"Rahib Video\"},{\"user_id\":\"cc3f94ecc14ee9c55670dcde9adc1887\",\"extensions\":[\"1006\"],\"name\":\"Rounak S Kiran\"},{\"user_id\":\"6c29ebdb34e1761fdf9423c573087979\",\"extensions\":[\"1003\"],\"name\":\"Amar Nath\"},{\"user_id\":\"8e15c2d95d4325cb07f0750846966be8\",\"extensions\":[\"1011\"],\"name\":\"TLS User\"},{\"user_id\":\"2fc4142bdacf83c1957bda0ad9d50e3d\",\"extensions\":[\"1014\"],\"name\":\"Synway  User1\"},{\"user_id\":\"74d5b5a9aca1faa4c2f217ce87b621d8\",\"extensions\":[\"1008\"],\"name\":\"Robin Raju\"},{\"user_id\":\"a7ad7e73bf93ea83c8efdc1723cba198\",\"extensions\":[\"1007\"],\"name\":\"Arshad Arif\"},{\"user_id\":\"b55146df593ec8d09e5fe12a8a4c1108\",\"extensions\":[\"1001\"],\"name\":\"Rahib Rasheed\"},{\"user_id\":\"391391de005a8f5403c7b5591f462ea1\",\"extensions\":[\"1013\"],\"name\":\"Sangeeth J\"},{\"user_id\":\"3258f7ae4ae1db60435cbcf583f64a89\",\"extensions\":[\"1009\"],\"name\":\"Aby TL\"},{\"user_id\":\"90bc84e5e8a3427fe35e99bd4386de95\",\"extensions\":[\"1010\"],\"name\":\"Prince T\"},{\"user_id\":\"b501ef5b270a196afc0eed557ca74237\",\"extensions\":[\"1005\"],\"name\":\"Jineed AJ\"},{\"user_id\":\"1422af351e06adeab2de92f5a633a444\",\"extensions\":[\"1004\"],\"name\":\"Ashok PA\"}],\"busy_users\":[],\"reg_users\":[{\"user_id\":\"901e6076ff351cfc2195fb86f8438a26\",\"status\":\"registered\"},{\"user_id\":\"6c29ebdb34e1761fdf9423c573087979\",\"status\":\"registered\"}],\"contacts\":[{\"owner_id\":\"901e6076ff351cfc2195fb86f8438a26\",\"status\":\"ready\"},{\"owner_id\":\"6c29ebdb34e1761fdf9423c573087979\",\"status\":\"ready\"}]}}</p>\n\n<h2>CODES</h2>\n\n<pre><code>client.receive().then([](websocket_incoming_message msg) {\n            std::cout &lt;&lt; \"receiving data from socket\";\n\n            // msg.message_type();\n            return msg.extract_string();\n            //1..i have one string\n            //cout&lt;&lt;\"\\n///////////test\"&lt;&lt; msg.extract_string().get().c_str();\n            //  // 2.convert to json array\n            //json::value::parse(   ::to_string_t(msg.extract_string().get()))\n            //\n\n        }).then([](std::string body) {\n\n            //std::cout &lt;&lt; \"displaying the data\";\n            std::cout &lt;&lt; body &lt;&lt; std::endl;\n\n\n            std::string ss = body;\n            ptree pt;\n            std::istringstream is(ss);\n            read_json(is, pt);\n\n            std::cout &lt;&lt;\"\\n 1st\"&lt;&lt; \"action:     \" &lt;&lt; pt.get&lt;std::string&gt;(\"action\") &lt;&lt; \"\\n\";\n            std::cout &lt;&lt;\"\\n 2nd\"&lt;&lt; \"data: \" &lt;&lt; pt.get&lt;std::string&gt;(\"data\") &lt;&lt; \"\\n\";\n            std::cout &lt;&lt; \"--------------------------------------------------------------\";\n            for (auto&amp; e : pt.get_child(\"data.users_list\")) {\n            std::cout &lt;&lt; \"\\n\" &lt;&lt; \"users id \" &lt;&lt; e.second.get&lt;std::string&gt;(\"user_id\") &lt;&lt; \"\\n\";\n\n\n            }\n        });\n</code></pre>\n\n<h2>useful resources</h2>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/31345401/parse-json-array-as-stdstring-with-boost-ptree\">Parse JSON array as std::string with Boost ptree</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/21537637/c-boost-parse-dynamically-generated-json-string-not-a-file/21537818\">C++ boost parse dynamically generated json string (not a file)</a></p></li>\n</ol>\n"}], "owner": {"reputation": 282, "user_id": 8107309, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e88dad408231adcd7fc4019bf2a824ba?s=128&d=identicon&r=PG&f=1", "display_name": "Prince", "link": "https://stackoverflow.com/users/8107309/prince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 0, "accepted_answer_id": 49321074, "answer_count": 1, "score": 3, "last_activity_date": 1521445943, "creation_date": 1520428319, "last_edit_date": 1520494002, "question_id": 49152808, "link": "https://stackoverflow.com/questions/49152808/how-to-parse-json-data-from-websocket-client-using-cpprestsdk", "title": "How to parse json data from websocket_client using cpprestsdk", "body": "<p>I'm connecting to a WebSocket whom always replies in JSON. I see there is an extract_string method for websocket_incoming_message however after trying numerous things with json:value it seems as though you can only construct JSON arrays on-the-fly by inserting key-value pairs one-by-one. Am I missing something here or is there a way to take the output from websocket_incoming_message and directly convert it into a json:value array?   </p>\n\n<pre><code> websocket_client client;\n\n    //start socket connection to server\n        try {\n\n            std::cout &lt;&lt; \"s\n\n\n    ----------\n\n\n\n            client.connect(U(\"wss://XZXXXZZy.com/ws?account_id=4de3f308f2f8d3247As70228f94e0d2aAea&amp;ws_key=reception\")).wait();\n\n        }\n        catch (const std::exception&amp;e)\n        {\n            std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n        }\n\n            //send messages to the server\n\n            //websocket_outgoing_message msg;\n            //msg.set_pong_message();\n            //std::cout &lt;&lt; \"\\n...........2nd.........;\";\n\n            //std::string data = \"hii\";\n            //client.send(msg).then([]() { \n            //  \n            //  \n            //  \n            //  \n            //  /* Successfully sent the message. */ });\n            //std::cout &lt;&lt; \" Successfully sent the message.\";\n            //std::cout &lt;&lt; \"\\n...........3rd.........;\";\n\n\n\n            //receive messages from the server\n\n\n\n            client.receive().then([](websocket_incoming_message msg) {\n                std::cout &lt;&lt; \"receiving data from socket\";\n\n\n\n                return msg.extract_string();\n\n\n            }).then([](std::string body) {\n                //FETCHING THE DATA FROM BODY. \"TEXT/JSON\"\n                std::cout &lt;&lt; \"displaying the data\";\n                std::cout &lt;&lt; body &lt;&lt; std::endl;\n\n                const json::value&amp; v1 = body.substr;\n\n\n\n\n                utility::string_t jsonval = v1.serialize();\n                auto array = v1.at(U(\"rows\")).as_array();\n\n\n                for (int i = 0; i&lt;array.size(); ++i)\n                {\n                    auto id = array[i].at(U(\"id\")).as_string();\n                    std::wcout &lt;&lt; \"\\n\" &lt;&lt; id;\n                    auto key = array[i].at(U(\"key\")).as_string();\n                    std::wcout &lt;&lt; \"\\n\" &lt;&lt; key;\n                    auto array2 = array[i].at(U(\"value\")).as_array();\n\n                    std::wcout &lt;&lt; array2[0];\n                    std::wcout &lt;&lt; array2[1];\n                }\n\n            }\n\n\n\n            );\n\n            //close the connection\n            client.close().then([]() {\n\n\n                std::cout &lt;&lt; \"successfully close socket connction\";\n\n\n                /* Successfully closed the connection. */\n            });\n\n\n\nI have json response in my string body.but i dont know how to parse json data from websocket responses event. i want to display contacts from api responses.please help me.. \n\n\n\nMY JSON RESPONSES\n--------------------------------------\n\n\n.{\"action\":\"refresh_dashboard\",\"data\":{\"users_list\":[{\"user_id\":\"901e6076ff351cfc2195fb86f8438a26\",\"extensions\":[\"1002\"],\"name\":\"Karthik M\"},{\"user_id\":\"cc3f94ecc14ee9c55670dcde9adc1887\",\"extensions\":[\"1006\"],\"name\":\"Rounak S Kiran\"},{\"user_id\":\"6c29ebdb34e1761fdf9423c573087979\",\"extensions\":[\"1003\"],\"name\":\"Amar Nath\"},{\"user_id\":\"74d5b5a9aca1faa4c2f217ce87b621d8\",\"extensions\":[\"1008\"],\"name\":\"Robin Raju\"},{\"user_id\":\"a7ad7e73bf93ea83c8efdc1723cba198\",\"extensions\":[\"1007\"],\"name\":\"Arshad Arif\"},{\"user_id\":\"b55146df593ec8d09e5fe12a8a4c1108\",\"extensions\":[\"1001\"],\"name\":\"Rahib Rasheed\"},{\"user_id\":\"3258f7ae4ae1db60435cbcf583f64a89\",\"extensions\":[\"1009\"],\"name\":\"Test User\"},{\"user_id\":\"90bc84e5e8a3427fe35e99bd4386de95\",\"extensions\":[\"1010\"],\"name\":\"Prince T\"},{\"user_id\":\"b501ef5b270a196afc0eed557ca74237\",\"extensions\":[\"1005\",\"+17325951060\"],\"name\":\"Jineed AJ\"},{\"user_id\":\"1422af351e06adeab2de92f5a633a444\",\"extensions\":[\"1004\"],\"name\":\"Ashok PA\"}],\"busy_users\":[],\"reg_users\":[{\"user_id\":\"cc3f94ecc14ee9c55670dcde9adc1887\",\"status\":\"registered\"},{\"user_id\":\"901e6076ff351cfc2195fb86f8438a26\",\"status\":\"registered\"},{\"user_id\":\"1422af351e06adeab2de92f5a633a444\",\"status\":\"registered\"},{\"user_id\":\"3258f7ae4ae1db60435cbcf583f64a89\",\"status\":\"registered\"},{\"user_id\":\"b55146df593ec8d09e5fe12a8a4c1108\",\"status\":\"registered\"},{\"user_id\":\"6c29ebdb34e1761fdf9423c573087979\",\"status\":\"registered\"}],\"contacts\":[{\"owner_id\":\"cc3f94ecc14ee9c55670dcde9adc1887\",\"status\":\"ready\"},{\"owner_id\":\"901e6076ff351cfc2195fb86f8438a26\",\"status\":\"ready\"},{\"owner_id\":\"1422af351e06adeab2de92f5a633a444\",\"status\":\"ready\"},{\"owner_id\":\"3258f7ae4ae1db60435cbcf583f64a89\",\"status\":\"ready\"},{\"owner_id\":\"b55146df593ec8d09e5fe12a8a4c1108\",\"status\":\"ready\"},{\"owner_id\":\"6c29ebdb34e1761fdf9423c573087979\",\"status\":\"ready\"}]}}\n</code></pre>\n"}, {"tags": ["c++", "omnet++"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520427512, "post_id": 49152349, "comment_id": 85309333, "body": "Resolving and blocking isn&#39;t a fantastic plan.  Ideally you&#39;d start the resolve; and then when the resolve is complete you&#39;d get a callback. Can&#39;t say if L3AddressResolver supports that feature already; but if it does; that&#39;s what you want to be using"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1520428765, "post_id": 49152349, "comment_id": 85310192, "body": "This is very very obvious, but if this is your real code and you want it to run fast, can you remove or comment out the <code>cout</code> statements? After that you could avoid at least some of the string copying, but you should really profile before making more changes."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1520429381, "post_id": 49152349, "comment_id": 85310622, "body": "<code>std::cout</code> can very slow, depending what it&#39;s outputting to (like a terminal). Can you store the results in memory to be printed later?"}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1520430235, "post_id": 49152349, "comment_id": 85311182, "body": "@Useless cout statements are just for making sure results are generated. I tried commenting them. &#39;"}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1520430269, "post_id": 49152349, "comment_id": 85311198, "body": "@Galik yes tried. removing cout statements don&#39;t help"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1520435421, "post_id": 49152349, "comment_id": 85314809, "body": "If removing both the <code>cout</code> statements doesn&#39;t affect time at all, something is <i>tremendously</i> slow. Anyway, the insight has to be that you need to measure and learn to profile."}, {"owner": {"reputation": 11828, "user_id": 4420967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6pYX.png?s=128&g=1", "display_name": "James Z", "link": "https://stackoverflow.com/users/4420967/james-z"}, "edited": false, "score": 0, "creation_date": 1520439862, "post_id": 49152349, "comment_id": 85318149, "body": "How slow is slow, in exact numbers? That&#39;s quite crucial information when trying to understand the problem."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520427277, "post_id": 49152385, "comment_id": 85309133, "body": "One might argue that <code>L3AddressResolver</code> may already do all this, and that&#39;s theoretically true, but I think the OP&#39;s results speak for themselves (and, therefore, speak to the contary)."}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 0, "creation_date": 1520427398, "post_id": 49152385, "comment_id": 85309231, "body": "each time the destination is randomly generated. It is not always the same. I know what you mean but it&#39;s different every time it is called"}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 0, "creation_date": 1520427459, "post_id": 49152385, "comment_id": 85309284, "body": "L3AddressResolver resolves the ip of a node from its name or the other way around"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 0, "creation_date": 1520427505, "post_id": 49152385, "comment_id": 85309327, "body": "@Saad: <i>&quot;L3AddressResolver resolves the ip of a node from its name or the other way around&quot;</i> Yes, I got that bit. The question is <i>how</i> does it accomplish that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 1, "creation_date": 1520427521, "post_id": 49152385, "comment_id": 85309340, "body": "@Saad: <i>&quot;it&#39;s different every time it is called&quot;</i> Then there&#39;s not much you can do."}, {"owner": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 0, "creation_date": 1520447495, "post_id": 49152385, "comment_id": 85322860, "body": "Not sure what <code>L3AddressResolver</code> directly translates to. But if it&#39;s not POD, you might squeeze some speed out by passing it via reference instead of value."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 0, "creation_date": 1520448067, "post_id": 49152385, "comment_id": 85323211, "body": "@M4rc: Passing it from where?"}, {"owner": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 0, "creation_date": 1520448196, "post_id": 49152385, "comment_id": 85323289, "body": "Depending on where the object is allocated and it&#39;s lifetime, as a parameter."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 0, "creation_date": 1520448210, "post_id": 49152385, "comment_id": 85323294, "body": "@M4rc: It is not a parameter in the code we&#39;ve been shown."}, {"owner": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 0, "creation_date": 1520448275, "post_id": 49152385, "comment_id": 85323327, "body": "@LightnessRacesinOrbit I should have been more clear -- the <code>dest</code> parameter of the <code>L3AddressResolver</code> type."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 0, "creation_date": 1520451051, "post_id": 49152385, "comment_id": 85324955, "body": "@M4rc: Ah, you mean the <code>dest</code> parameter of <code>L3Address</code> type. Then yes I agree, to a point - compared to the cost of name resolution it&#39;ll likely be very small, but there doesn&#39;t seem a reason to pass that by value."}, {"owner": {"reputation": 828, "user_id": 4787916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-k5_m1AUPOpo/AAAAAAAAAAI/AAAAAAAAAaY/hwdbhyqlzao/photo.jpg?sz=128", "display_name": "Rens van der Heijden", "link": "https://stackoverflow.com/users/4787916/rens-van-der-heijden"}, "edited": false, "score": 0, "creation_date": 1520498782, "post_id": 49152385, "comment_id": 85342738, "body": "The question wasn&#39;t very clear, but <a href=\"https://github.com/inet-framework/inet/blob/master/src/inet/networklayer/common/L3AddressResolver.cc#L497\" rel=\"nofollow noreferrer\">L3AddressResolver</a> basically translates IP addresses to OMNeT++ nodes (which are simulated instances of real machines, e.g., servers or nodes in an ad-hoc network). This is a step necessary only because the simulation back-end doesn&#39;t work with IP addresses."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1520427573, "last_edit_date": 1520427573, "creation_date": 1520426975, "answer_id": 49152385, "question_id": 49152349, "link": "https://stackoverflow.com/questions/49152349/slow-running-code/49152385#49152385", "title": "Slow running code", "body": "<p>If you're sending 1000 messages to the <em>same</em> destination, then you are performing 999 unnecessary name lookups. Each of those may require a roundtrip to a DNS server on your network. That's very inefficient.</p>\n\n<p>You should resolve the name <em>once</em>, the first time you need to contact a particular destination. Cache it for next time. A good resolver will tell you how long it's safe to cache it for. An even better resolver will use the OS to do the resolution (and caching) for you, but even if you have one of those you are still making unnecessary calls to the OS.</p>\n\n<p>It is not possible to give more details without a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> or, at least, some idea of what <code>L3AddressResolver</code> precisely does.</p>\n\n<p>However, if each time the destination is different, there's really not much you can do. You need to allow time for the lookup to happen. The best you can do is to perform it asynchronously so that more than one lookup can happen at the same time.</p>\n\n<p>Depending on how your application is structured, and depending on what your requirements are, and if you know in advance what they'll be, you may want to consider looking up all the names ahead of time. Then you still spend the same amount of time, but in a different place (and potentially <em>asynchronously</em> while other functions are taking place); then <em>this</em> particular function will be very fast. Only you can say whether that'll be helpful.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520451146, "post_id": 49159158, "comment_id": 85325003, "body": "Is <code>toIPv4()</code> really equivalent? If it is, it does the same work as the existing code; if it&#39;s not, you broke the code!"}, {"owner": {"reputation": 5342, "user_id": 4653172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c894c1021e3092a98cdd62d88e69819?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy D.", "link": "https://stackoverflow.com/users/4653172/jerzy-d"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520452003, "post_id": 49159158, "comment_id": 85325480, "body": "The <code>toIPv4()</code> is fully equivalent provided that IPv4 is used in the network. The more generic solution is to print just an <code>L3Address</code> object because its <code>operator&lt;&lt;</code> checks the type of address. I have improved my answer."}, {"owner": {"reputation": 828, "user_id": 4787916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-k5_m1AUPOpo/AAAAAAAAAAI/AAAAAAAAAaY/hwdbhyqlzao/photo.jpg?sz=128", "display_name": "Rens van der Heijden", "link": "https://stackoverflow.com/users/4787916/rens-van-der-heijden"}, "edited": false, "score": 0, "creation_date": 1520498866, "post_id": 49159158, "comment_id": 85342779, "body": "Is there some reason you&#39;re not recommending the use of the statistics modules that come with OMNeT++ instead of cout/EV logging? I would expect that to be way more efficient than cout/EV logging."}, {"owner": {"reputation": 5342, "user_id": 4653172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c894c1021e3092a98cdd62d88e69819?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy D.", "link": "https://stackoverflow.com/users/4653172/jerzy-d"}, "reply_to_user": {"reputation": 828, "user_id": 4787916, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-k5_m1AUPOpo/AAAAAAAAAAI/AAAAAAAAAaY/hwdbhyqlzao/photo.jpg?sz=128", "display_name": "Rens van der Heijden", "link": "https://stackoverflow.com/users/4787916/rens-van-der-heijden"}, "edited": false, "score": 1, "creation_date": 1520507756, "post_id": 49159158, "comment_id": 85348439, "body": "@RensvanderHeijden Code in my answer does exactly the same as the code in the question. I don&#39;t know what is the intension of the logging to console in the original code, so I cannot propose another solution."}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 0, "creation_date": 1520857779, "post_id": 49159158, "comment_id": 85473603, "body": "An overdue thank you. You answered the question plus added some more understanding of omnet to my knowledge. Cheers"}], "tags": [], "owner": {"reputation": 5342, "user_id": 4653172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c894c1021e3092a98cdd62d88e69819?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy D.", "link": "https://stackoverflow.com/users/4653172/jerzy-d"}, "is_accepted": true, "score": 4, "last_activity_date": 1520493312, "last_edit_date": 1520493312, "creation_date": 1520448257, "answer_id": 49159158, "question_id": 49152349, "link": "https://stackoverflow.com/questions/49152349/slow-running-code/49159158#49159158", "title": "Slow running code", "body": "<p>The code may be slightly optimized:</p>\n\n<ul>\n<li>The <code>L3Address</code> class has the convenient method <code>operator&lt;&lt;</code>, so the use of <code>L3AddressResolver().resolve(realLast)</code> is unnecessary (<a href=\"https://omnetpp.org/doc/inet/api-current/doxy/classinet_1_1_l3_address.html\" rel=\"nofollow noreferrer\">INET API).</a></li>\n<li>One should avoid using <code>cout</code> for logging (<a href=\"https://omnetpp.org/doc/omnetpp/manual/#sec:sim-lib:log-statements\" rel=\"nofollow noreferrer\">OMNeT++ Manual</a>). <code>EV</code> should be used instead of <code>cout</code>. </li>\n<li>To obtain an index of a module in vector of modules one can use <code>getIndex()</code> method from <code>cModule</code> class.</li>\n</ul>\n\n<p>Presented code may be rewritten into the following one:</p>\n\n<pre><code>void UDPBasicApp::incrementReceiveCounter(const L3Address&amp; dest) {       \n  cModule *destHost = L3AddressResolver().findHostWithAddress(dest);\n  if (destHost) {\n        int realDestNumber = destHost-&gt;getIndex();\n        recArray[realDestNumber]++;\n        EV &lt;&lt; \"Destination is: \" &lt;&lt; destHost-&gt;getName() &lt;&lt;\", IP is: \"\n           &lt;&lt; dest &lt;&lt; \", Number of destination is: \"\n           &lt;&lt; realDestNumber &lt;&lt; std::endl;\n   }\n}\n</code></pre>\n\n<p>To increase the speed of the simulation you should consider: </p>\n\n<ol>\n<li>Building the simulation in release mode.</li>\n<li>Running the simulation in Cmdenv mode.</li>\n</ol>\n"}], "owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 49159158, "answer_count": 2, "score": 0, "last_activity_date": 1520493312, "creation_date": 1520426823, "last_edit_date": 1520439781, "question_id": 49152349, "link": "https://stackoverflow.com/questions/49152349/slow-running-code", "title": "Slow running code", "body": "<p>I have the following function in my project:</p>\n\n<pre><code>void UDPBasicApp::incrementReceiveCounter(L3Address dest) {\n    char numberOfDestNode[10];\n    char name[50];\n    strcpy(name,L3AddressResolver().findHostWithAddress(dest)-&gt;getFullPath().c_str());\n    char temp[20];\n    char *last = strrchr(name, '.');\n    char *realLast = last + 1;\n    std::cout &lt;&lt; \"Destination is: \" &lt;&lt; realLast&lt;&lt;\", IP is: \"&lt;&lt;L3AddressResolver().resolve(realLast);//=====\n    strcpy(temp,realLast);\n    strtok(temp,\"[\");\n    strcpy(numberOfDestNode, strtok(NULL, \"]\"));\n    int realDestNumber = std::stoi(numberOfDestNode);\n    recArray[realDestNumber]++;\n    std::cout&lt;&lt;\", Number of destination is: \"&lt;&lt;realDestNumber&lt;&lt;std::endl;//=================\n}\n</code></pre>\n\n<p>The code runs very nicely and fast but when this function is called, the execution goes significantly slow. \nThis code is a part of a simulation project in Omnet++ and this function is called every time when a node sends a message to another. So consider if there are 1000 nodes, this function will be called 1000 times.\nI might be doing something unneeded here.</p>\n"}, {"tags": ["c++", "validation"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 2, "creation_date": 1520426404, "post_id": 49152165, "comment_id": 85308532, "body": "Use std::isdigit <a href=\"http://en.cppreference.com/w/cpp/string/byte/isdigit\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/byte/isdigit</a>"}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1520426738, "post_id": 49152165, "comment_id": 85308752, "body": "Also, use <code>std::string</code> instead of arrays of characters."}, {"owner": {"reputation": 175, "user_id": 9456688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7b6d4a460c6db43b64062a92faaec8?s=128&d=identicon&r=PG", "display_name": "Elyasaf755", "link": "https://stackoverflow.com/users/9456688/elyasaf755"}, "edited": false, "score": 0, "creation_date": 1520426752, "post_id": 49152165, "comment_id": 85308760, "body": "Thank you! I&#39;m afraid that the moodle&#39;s program checker will not recognize it though."}, {"owner": {"reputation": 175, "user_id": 9456688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7b6d4a460c6db43b64062a92faaec8?s=128&d=identicon&r=PG", "display_name": "Elyasaf755", "link": "https://stackoverflow.com/users/9456688/elyasaf755"}, "edited": false, "score": 0, "creation_date": 1520426893, "post_id": 49152165, "comment_id": 85308859, "body": "How do i limit string to a specific amount of chars? Using getline?"}], "owner": {"reputation": 175, "user_id": 9456688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7b6d4a460c6db43b64062a92faaec8?s=128&d=identicon&r=PG", "display_name": "Elyasaf755", "link": "https://stackoverflow.com/users/9456688/elyasaf755"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520428621, "creation_date": 1520426274, "last_edit_date": 1520428621, "question_id": 49152165, "link": "https://stackoverflow.com/questions/49152165/input-validation-for-characters-use-only-in-c", "title": "Input validation for characters use only, in C++", "body": "<p>How do I validate that the user have entered only characters and not numbers?</p>\n\n<pre><code>char name[20];\ncin.getline(name, 20);\n\nIf(!cin) {\n cerr&lt;&lt;\"ERROR\"&lt;&lt;endl;\n cin.clear();\n}\n</code></pre>\n"}, {"tags": ["c++", "matlab", "curve", "numerical-integration"], "comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 1, "creation_date": 1520424524, "post_id": 49151518, "comment_id": 85307292, "body": "Area of rectangle is its height multiplied with its width."}, {"owner": {"reputation": 57, "user_id": 8758316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62037004ef2f09a2d4db995b927681a?s=128&d=identicon&r=PG&f=1", "display_name": "dfdd", "link": "https://stackoverflow.com/users/8758316/dfdd"}, "reply_to_user": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1520424701, "post_id": 49151518, "comment_id": 85307430, "body": "@&#214;&#246;Tiib yes, I know, but I&#39;am about how to find area above the curve using numerical integration without function, because I have only coordinates x and y."}, {"owner": {"reputation": 15917, "user_id": 5211833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pyme2.jpg?s=128&g=1", "display_name": "Adriaan", "link": "https://stackoverflow.com/users/5211833/adriaan"}, "edited": false, "score": 1, "creation_date": 1520424835, "post_id": 49151518, "comment_id": 85307517, "body": "You have your code in MATLAB, but the title asks about C++. Please also give the C++ code and explain why you currently use two languages, as this is very confusing"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 1, "creation_date": 1520424878, "post_id": 49151518, "comment_id": 85307556, "body": "Your vectors contain coordinates of points (that define little rectangles) so sum areas of these rectangles to get the area."}, {"owner": {"reputation": 57, "user_id": 8758316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62037004ef2f09a2d4db995b927681a?s=128&d=identicon&r=PG&f=1", "display_name": "dfdd", "link": "https://stackoverflow.com/users/8758316/dfdd"}, "reply_to_user": {"reputation": 15917, "user_id": 5211833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pyme2.jpg?s=128&g=1", "display_name": "Adriaan", "link": "https://stackoverflow.com/users/5211833/adriaan"}, "edited": false, "score": 0, "creation_date": 1520425186, "post_id": 49151518, "comment_id": 85307744, "body": "@Adriaan I&#39;m sorry to make you confused. Matlab&#39;s code here is like example what I want (about smt like feval, because to use numerical intergation I need the function"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1520425263, "post_id": 49151518, "comment_id": 85307794, "body": "c++ by itself doesnt know about numerical integration. You either have to write your own integrator or pick a library. In any case your question is either too broad or should be reworded and moved to <a href=\"https://math.stackexchange.com/\">math.stackexchange.com</a>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520425408, "post_id": 49151518, "comment_id": 85307875, "body": "I think what you&#39;re looking for; since you don&#39;t have the equation but do have the points; is an approximation (you&#39;re never going to do better); and the easiest to do is one where you sum the areas of all the known trapeziums (which is the basis for integration)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1520425565, "post_id": 49151518, "comment_id": 85307980, "body": "Simpsons rule is an exact integration technique for a spline up to and including cubic."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1520426248, "post_id": 49151518, "comment_id": 85308436, "body": "1.  Are the &#39;x&#39; values evenly spaced?  2.  Look up the &quot;trapezium rule&quot;, and just add up the areas."}, {"owner": {"reputation": 1372, "user_id": 4057465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86e26dcaa334e64a9266d4b459df095?s=128&d=identicon&r=PG&f=1", "display_name": "Zizy Archer", "link": "https://stackoverflow.com/users/4057465/zizy-archer"}, "edited": false, "score": 1, "creation_date": 1520429044, "post_id": 49151518, "comment_id": 85310384, "body": "In matlab you should probably use <code>trapz</code> instead. <a href=\"https://www.mathworks.com/help/matlab/ref/trapz.html\" rel=\"nofollow noreferrer\">mathworks.com/help/matlab/ref/trapz.html</a> In C++ grab a library that has this, or write your own, it is simple enough and shown in the answer below."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1520431282, "post_id": 49151518, "comment_id": 85311898, "body": "Your problem seems twofold; you appear to not know C++ and you appear to not know mathematics (ie, how to integrate).  Is this accurate?"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 9433138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ffa860a9581f48a9261b540d4f042ed?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Watkins", "link": "https://stackoverflow.com/users/9433138/robert-watkins"}, "is_accepted": true, "score": 1, "last_activity_date": 1520425699, "creation_date": 1520425699, "answer_id": 49151980, "question_id": 49151518, "link": "https://stackoverflow.com/questions/49151518/how-can-i-find-the-area-above-the-curve/49151980#49151980", "title": "How can I find the area above the curve", "body": "<p>Not sure but I think you need to go one step further back to first principles of integration...what it looks like your trying to do is find the area under the graph... to do that you need to treat it as slices [integration is this concept taken to the point where the delta approaches 0] </p>\n\n<p>So calculate the area as little rectangles or evern better rectangles with triangles on top between each data point...</p>\n\n<p>i.e. </p>\n\n<pre><code>    for(loop over data)\n    {\n        area += (data[1] + data[0]) * time/distance between data[1] and data[0]\n    }\n</code></pre>\n\n<p>Once you have that subtract it from y_end * (x_end - x1)</p>\n\n<p>You'd use numerical integration to give you the values of data - but buy the looks of it your either measuring them or doing something else to generate them.</p>\n"}], "owner": {"reputation": 57, "user_id": 8758316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62037004ef2f09a2d4db995b927681a?s=128&d=identicon&r=PG&f=1", "display_name": "dfdd", "link": "https://stackoverflow.com/users/8758316/dfdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 2, "accepted_answer_id": 49151980, "answer_count": 1, "score": 0, "last_activity_date": 1520425699, "creation_date": 1520424295, "last_edit_date": 1520425617, "question_id": 49151518, "link": "https://stackoverflow.com/questions/49151518/how-can-i-find-the-area-above-the-curve", "title": "How can I find the area above the curve", "body": "<p>I have a question about finding the area of rectangle <code>S2</code> (above the curve). I want to find <code>S1/S2</code> like <code>(S - S2)/(S2)</code>, where <code>S = S1 + S2</code>.</p>\n\n<p>I have 2 <code>vectors</code> of <code>double</code> (x;y) and I can find <code>S1 + S2</code>:</p>\n\n<p><code>S = (x.back() - x[0])*(y.back() - y[0])</code>)</p>\n\n<p>Then I want to use numerical integration to find the whole area under the cruve <code>S2</code>, and then deduct <code>z</code> from <code>S2</code>:</p>\n\n<p><code>z = (x.back() - x[0])*(y[0] - 0)</code> , <code>S2 = S2 - z</code> </p>\n\n<p>My question is: how to use numerical integration if I have no function, but have (x;y). For example, in matlab it looks like this with <code>feval</code>:</p>\n\n<pre><code>% Total area under the curve\nft = fittype('smoothingspline');\ncf = fit(x,y,ft);\nF = @(x) feval(cf,x);\nS2 = quad(F,x(1),x(end));\n</code></pre>\n\n<p>In C++ I have:</p>\n\n<pre><code>#include \"Functions.h\"\nstd::vector&lt;double&gt;AreaRatio(std::vector&lt;double&gt;&amp;x, std::vector&lt;double&gt;&amp;y) {\n\ndouble S(0.0), z(0.0), S2(0.), R(0.0);\n\nS = (x.back() - x[0])*(y.back() - y[0]);\nz = (x.back()*x[0])*(y[0]-0);\nS2 = /.../ \n// Numerical methods (any library) to find the area under the curve, \n// but I don't know how to transfer function into function of Numerical integration, \n// because I have only coordinates. \nR = (S - S2) / S2;\nreturn R;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZZQ6E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZZQ6E.png\" alt=\"Example\"></a></p>\n"}, {"tags": ["c++", "constructor", "arguments", "constants"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1520424032, "post_id": 49151393, "comment_id": 85306966, "body": "Inside <code>test</code>, do you want to reference characters that you can modify or read-only characters?"}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1520424181, "post_id": 49151393, "comment_id": 85307060, "body": "In the former case, always copy it. Like how <code>std::string</code> works."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1520424240, "post_id": 49151393, "comment_id": 85307089, "body": "(note that a non-const pointer can be cast to a const pointer, so if you (or your struct) have a const pointer that you (or your struct) doesn&#39;t own, don&#39;t expect it to stay unchanged forever)"}, {"owner": {"reputation": 3329, "user_id": 466339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/960652dda2d376483116e2fa230b5e32?s=128&d=identicon&r=PG", "display_name": "j4x", "link": "https://stackoverflow.com/users/466339/j4x"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520424243, "post_id": 49151393, "comment_id": 85307091, "body": "Thanks for your question @nwp. Actually this test used <code>char*</code> but not my real usage case. This is just a simplification. My <code>const</code> object will not change anything. Only <code>const</code> member functions will be called. For my <code>non-const</code> object, I can do anything."}, {"owner": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "edited": false, "score": 2, "creation_date": 1520424260, "post_id": 49151393, "comment_id": 85307106, "body": "in class <code>test</code>, <code>_arg</code> needs to be <code>const char *</code> as well. Then it will work. Your problem has nothing to do with t1 or t2 being const or not. It about the `chars&#180; your pointer points to"}, {"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1520424343, "post_id": 49151393, "comment_id": 85307165, "body": "Main question is - why would You need such behaviour? It does not seem useful"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 1, "creation_date": 1520424359, "post_id": 49151393, "comment_id": 85307178, "body": "@j4x The error is there for a reason and it points out to a possible design issue. You want to use original pointer if it&#39;s modifiable, and copy contents if not, but this leads to another problem. Who and under what circumstances is the owner of the string, and how to store this information."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1520424543, "post_id": 49151393, "comment_id": 85307309, "body": "const-qualification of objects doesn&#39;t apply until the constructor completes: otherwise the constructor wouldn&#39;t be able to initialize data members (they&#39;d be <code>const</code>!)."}, {"owner": {"reputation": 3329, "user_id": 466339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/960652dda2d376483116e2fa230b5e32?s=128&d=identicon&r=PG", "display_name": "j4x", "link": "https://stackoverflow.com/users/466339/j4x"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1520424667, "post_id": 49151393, "comment_id": 85307410, "body": "@bartop, to explain why I do need this this question would become really verbose. I tried to simplify it as much as possible so please give me your trust and believe me that there might be a use for it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 5, "creation_date": 1520424781, "post_id": 49151393, "comment_id": 85307471, "body": "<i>&quot;// Ignore this warning.</i>&quot; No"}, {"owner": {"reputation": 3329, "user_id": 466339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/960652dda2d376483116e2fa230b5e32?s=128&d=identicon&r=PG", "display_name": "j4x", "link": "https://stackoverflow.com/users/466339/j4x"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1520424791, "post_id": 49151393, "comment_id": 85307480, "body": "@luk32 I think you misunderstood me. I don&#39;t want an automatic &quot;copy-if-cost&quot; but simply I need to use my class <code>const</code> methods on a const object created from a const argument. No copies, no data modification."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1520424936, "post_id": 49151393, "comment_id": 85307603, "body": "<code>const char *</code> is not the &quot;const argument version&quot; of <code>char *</code>. That&#39;s <code>char * const</code> which is a different type. If you can say specifically what you want to <i>do</i> with your class, and how it should manage memory, we might be able to help you."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1520425883, "post_id": 49151393, "comment_id": 85308195, "body": "@j4x Yes, I misread  user202729 comment as yours, but for the answer I wrote, I think got your point."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1520427131, "post_id": 49151393, "comment_id": 85309018, "body": "<code>char txt1[] = &quot;Text one&quot;;</code> so you don&#39;t have the warning."}], "answers": [{"tags": [], "owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "is_accepted": false, "score": 0, "last_activity_date": 1520424920, "creation_date": 1520424920, "answer_id": 49151728, "question_id": 49151393, "link": "https://stackoverflow.com/questions/49151393/constructor-for-const-object/49151728#49151728", "title": "Constructor for `const` object", "body": "<p>It can't be done. Just because the object is const, it doesn't mean that it guarantees the <code>char*</code> won't be used to modify its value. The constructor can mutate the argument, and code outside the class can modify its content if it is exposed. Consider the following example.</p>\n\n<pre><code>struct Test {\n    char* buffer;\n\n    Test(char* buffer):\n        buffer(buffer)\n    {\n        buffer[0] = 'a';\n    }\n\n    char* get() const {\n        return buffer;\n    }\n};\n\nint main(int argc, char* argv[]) {\n    std::string s{ \"sample text\" };\n\n    const Test t(s.data());\n\n    t.get()[1] = 'b';\n    t.buffer[2] = 'c';\n\n    std::cout &lt;&lt; s &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The above prints <code>abcple text</code>, even though <code>t</code> is const. Even though it never modifies its members, it does change the pointed-to string and it allows outside code to modify it, too. This is why <code>const</code> objects cannot accept <code>const char*</code> arguments to initialize their <code>char*</code> members.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 1, "last_activity_date": 1520428055, "last_edit_date": 1520428055, "creation_date": 1520425351, "answer_id": 49151864, "question_id": 49151393, "link": "https://stackoverflow.com/questions/49151393/constructor-for-const-object/49151864#49151864", "title": "Constructor for `const` object", "body": "<blockquote>\n  <p>How to properly declare my class constructors so that it can handle const and non-const object creation?</p>\n</blockquote>\n\n<p>The object isn't <code>const</code> <em>during</em> construction, or the constructor wouldn't be able to initialize the object (since all data members would be <code>const</code>).</p>\n\n<p>So, constructors can't be const-qualified and you can't have a constructor overload used for <code>const</code> objects.</p>\n\n<p>Now, you <em>can</em> overload on the argument, but your data member always has type <code>char *</code> during construction, although it's qualified to <code>char * const</code> (<em>not</em> <code>const char *</code>) when used in a const-qualified instance of test.</p>\n\n<p>Options are:</p>\n\n<ol>\n<li><p>overload constructor on argument type, and store a <code>char *</code> <em>always</em>. If you're passed a <code>const char *</code> you have to copy it (and you're responsible for knowing that you own and must deallocate this memory)</p>\n\n<p>In this scheme, you rely on keeping the pointer private and using const-qualified accessors to stop the contents of the pointer being changed via a const-qualified object.</p>\n\n<p>Again, you need to do this manually because <code>char * const</code> is a different type than <code>const char *</code>, because constness of the pointed-to type isn't related to constness of the pointer: having a const instance of your class just stops you mutating the pointer, not the characters it points to.</p></li>\n<li><p>overload constructor and store a <code>const char *</code> always. This avoids copying but obviously doesn't work if you sometimes need to change the pointed-to characters</p></li>\n<li><p>just write different mutable-string and immutable-string classes</p></li>\n</ol>\n\n<p>If it helps, consider this:</p>\n\n<pre><code>template &lt;typename T&gt; struct test {\n    T* p_;\n    test(T *p) : p_(p) {}\n};\ntemplate &lt;typename T&gt; test&lt;T&gt; mktest(T *p) { return {p}; }\n</code></pre>\n\n<p>and note that</p>\n\n<pre><code>const char *ccp = \"immutable characters in a string literal\";\nchar *cp = strdup(ccp);\nauto a = mktest(ccp);\nauto b = mktest(cp);\n</code></pre>\n\n<p>gives <code>a</code> the type <code>test&lt;const char&gt;</code>, and <code>b</code> the type <code>test&lt;char&gt;</code> and that these types are not the same, are not convertible, and are no more closely related in the language than to <code>test&lt;T&gt;</code> for any other type <code>T</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3329, "user_id": 466339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/960652dda2d376483116e2fa230b5e32?s=128&d=identicon&r=PG", "display_name": "j4x", "link": "https://stackoverflow.com/users/466339/j4x"}, "edited": false, "score": 0, "creation_date": 1520426187, "post_id": 49151911, "comment_id": 85308399, "body": "Thank you very much for your answer @luk32. I will need to think very well before making such split in my framework since a lot of things depend on it, but, of course it is probably a solution."}], "tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 2, "last_activity_date": 1520439400, "last_edit_date": 1520439400, "creation_date": 1520425477, "answer_id": 49151911, "question_id": 49151393, "link": "https://stackoverflow.com/questions/49151393/constructor-for-const-object/49151911#49151911", "title": "Constructor for `const` object", "body": "<p>The problem you experience goes a bit deeper. It's an indication of a design issue. </p>\n\n<p>You would like to expose only part of the API. You say that for a <code>const</code> object you will call only <code>const</code> methods and for <code>non-const</code> you can do anything. But this is problematic.</p>\n\n<p>Either you accept <code>const</code> object strip it from <code>const</code> qualifier, and won't call non-const methods by a silent contract. Or, you need to limit methods, which makes a different object - type-wise.</p>\n\n<p>C# library does it by providing a limited interface which wraps around original object and exposes only <code>const</code> methods. Something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct A {\n    void f1() const {cout &lt;&lt; \"foo\\n\"; }\n    void f2() {cout &lt;&lt; \"bar\\n\"; }\n};\n\nstruct readonlyA {\n    readonlyA(const A&amp; a) : _a(a) {};\n    void f1() const {_a.f1();};\nprivate:\n    const A&amp; _a;\n};\n\nint main() {\n    A a;\n    readonlyA roA(a);\n    a.f2();\n    roA.f1();\n    roA.f2(); // error\n    return 0;\n}\n</code></pre>\n\n<p>It's basically a read-only proxy.</p>\n"}, {"tags": [], "owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "is_accepted": false, "score": 1, "last_activity_date": 1520425539, "creation_date": 1520425539, "answer_id": 49151928, "question_id": 49151393, "link": "https://stackoverflow.com/questions/49151393/constructor-for-const-object/49151928#49151928", "title": "Constructor for `const` object", "body": "<p>The compiler does not care about what you actually do with the object at runtime.</p>\n\n<p>Const works because the compiler will forbid certain things at compile time that could potentially change the object. This might be over-restrictive in certain situations, as the compiler often does not have the full picture of what's going on in the program.</p>\n\n<p>Take for example the invocation a non-const member function on a const object: Even if the member function does not actually change the object's state, the compiler will still forbid it because the non-const function <em>could</em> potentially change the object.</p>\n\n<p>Similar in your example: Even though you don't change the member for that particular const instance of the class, there could be other non-const instances of the same class somewhere, which is why it will refuse construct <em>any</em> instance of the class from a const object.</p>\n\n<p>If you want a class that is guaranteed to leave its members unchanged, that would be a <em>different type</em>:</p>\n\n<pre><code>class test\n{\npublic:\n    test( char *arg )\n    :   _arg( arg )\n    {}  \n    char *_arg;\n};\n\nclass immutable_test\n{\npublic:\n    immutable_test(char const* arg)\n        :_arg(arg)\n    {}\n\n    char const* _arg;\n};\n\nint main( )\n{\n    char *txt1       = \"Text one\";  // Ignore this warning.\n    const char *txt2 = \"Text two\";\n\n    test           t1( txt1 );\n    immutable_test t2( txt2 );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3329, "user_id": 466339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/960652dda2d376483116e2fa230b5e32?s=128&d=identicon&r=PG", "display_name": "j4x", "link": "https://stackoverflow.com/users/466339/j4x"}, "edited": false, "score": 0, "creation_date": 1520426089, "post_id": 49152072, "comment_id": 85308327, "body": "Thanks for your answer @Robert Watkins but unfortunatelly it doesn&#39;t help. If I do <code>const</code> my <code>_arg</code> it will be forever <code>const</code> and my <code>non-const</code> methods can&#39;t be used."}], "tags": [], "owner": {"reputation": 26, "user_id": 9433138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ffa860a9581f48a9261b540d4f042ed?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Watkins", "link": "https://stackoverflow.com/users/9433138/robert-watkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1520425955, "creation_date": 1520425955, "answer_id": 49152072, "question_id": 49151393, "link": "https://stackoverflow.com/questions/49151393/constructor-for-const-object/49152072#49152072", "title": "Constructor for `const` object", "body": "<p>The compiler is preventing you from carelessly discarding the constness...</p>\n\n<pre><code>    class test\n    {\n         public:\n            test(const char *arg)\n            : _arg(arg)\n         {}\n         const char *_arg;\n    };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "is_accepted": false, "score": 2, "last_activity_date": 1583457964, "last_edit_date": 1583457964, "creation_date": 1583457615, "answer_id": 60556293, "question_id": 49151393, "link": "https://stackoverflow.com/questions/49151393/constructor-for-const-object/60556293#60556293", "title": "Constructor for `const` object", "body": "<p><strong>A note:</strong> this is a long answer for a use case that might be a bad design. Yet, the reason and the main focus for the long answer is:</p>\n\n<ul>\n<li>to show and explain what is <strong><em>not possible</em></strong></li>\n<li>to present a way in which one can make the compiler decide <strong>based on the constness of a parameter</strong> whether to create a <em>holding const object</em> and to preserve this information even if the object is passed on. Which is very close to the OP request.</li>\n</ul>\n\n<hr>\n\n<p>As explained in other answers, you can have two constructors, one for <code>const</code> parameter and the other for <code>non-const</code>, but both constructors would just create an object that can be either <code>const</code> or <code>non-const</code>. So this doesn't help.</p>\n\n<p>Another approach could be to have a <strong><em>factory method</em></strong> that would create either a const object or a non-const, according to the constness of the parameter. Though this may sound promising it would not allow to preserve the semantics of the difference between the two, as shown in the following pseudo code:</p>\n\n<pre><code>// creating an object holding a const, using the factory method `create`:\nconst MyClass const_holder  = create(const_param);\n\n// however you cannot prevent this:\nMyClass non_const_holder = create(const_param);\n</code></pre>\n\n<p>The factory would create in the second case above a <em>const</em> object that would be copied or moved (or just created directly as non_const_obj with copy elision, since C++17 as mandatory copy elision). You cannot do anything to avoid the second case unless you delete copy and move, in which case the first case wouldn't work also and the all thing collapses.</p>\n\n<p>So, without creating actually two different types it is impossible to preserve the information of which constructor was used and to avoid assignment of an object created with const param into an object that doesn't.</p>\n\n<p>However, there is no real need to bother the user with the fact that there are two classes, with a proper template implementation the user can have simple code that gives the feeling that there is only one class in the game, something like:</p>\n\n<pre><code>// creating a const holder with a factory method\n// the type would *remember* that it is holding a const resource\n// and can act accordingly\nauto const_holder = create(const_param);\n\n// and you can also create a non const holder with the same factory\nauto non_const_holder = create(param);\n</code></pre>\n\n<p>These operations would be allowed:</p>\n\n<pre><code>// (a) calling a non const method on the content of the non const holder\nnon_const_holder-&gt;non_const_method();\n\n// (b) assigning a non const holder into a const holder object\n//     -- same as assigning char* to const char*\nconst_holder = non_const_holder;\n</code></pre>\n\n<p>These operations would NOT be allowed:</p>\n\n<pre><code>// (a) calling a non const method on the content of a const holder\nconst_holder-&gt;non_const_method(); // should be compilation error\n\n// (b) assigning a const holder into a non const holder object\n//     -- same as one cannot assign const char* to char*\nnon_const_holder = const_holder; // should be compilation error\n</code></pre>\n\n<p><strong>In a way, this is very similar to the idea of <a href=\"https://en.cppreference.com/w/cpp/experimental/propagate_const\" rel=\"nofollow noreferrer\">propagate_const</a>...</strong></p>\n\n<p>The code would have a factory method:</p>\n\n<pre><code>template&lt;class T&gt;\nPointer&lt;T&gt; create(T* t) {\n    return Pointer&lt;T&gt;::create(t);\n}\n</code></pre>\n\n<p>And two implementations for the template class Pointer.</p>\n\n<p>base template:</p>\n\n<pre><code>template&lt;class T&gt;\nclass Pointer {\n    T* ptr;\n    Pointer(T* p) : ptr(p) {}\n    friend class Pointer&lt;const T&gt;;\npublic:\n    // factory method\n    static Pointer create(T* p) {\n        return p;\n    }\n    operator T*() { return ptr; }\n    operator const T*() const { return ptr; }\n};\n</code></pre>\n\n<p>and a specialized one for the const version:</p>\n\n<pre><code>template&lt;class T&gt;\nclass Pointer&lt;const T&gt; {\n    const T* ptr;\n    Pointer(const T* p) : ptr(p) {}\npublic:\n    Pointer(const Pointer&lt;T&gt;&amp; other) {\n        ptr = other.ptr;\n    }\n    // factory method\n    static const Pointer create(const T* p) {\n        return p; \n    }\n    operator const T*() { return ptr; }\n    operator const T*() const { return ptr; }\n};\n</code></pre>\n\n<p>The main would look like:</p>\n\n<pre><code>int main() {\n    char str[] = \"hello\";\n    const char* const_str = \"hello\";\n    // non-const - good!\n    auto s1 = create(str);\n    // const holding non-const - ok!\n    const auto s2 = create(str);\n    // non-const that holds const - good!\n    auto s3 = create(const_str);\n    // also possible: const holding const\n    const auto s4 = create(const_str);\n\n    s1[4] = '!'; // OK\n    // s2[0] = '#'; // obviously doesn't compile - s2 is const\n    // s3[0] = '@'; // doesn't compile - which is good - s3 holds const!\n    // s4[0] = 'E'; // obviously doesn't compile - s4 is const\n    // avoids assignment of s3 that holds a const into s1 that holds a non-const\n    // s1 = s3; // &lt;= doesn't compile - good!\n    s3 = s1; // allows assignment of `holding-non-const` into `holding-const`\n    s3 = s2; // allows assignment of `holding-non-const` into `holding-const`\n    s3 = s4; // allows assignment of `holding-const` into `holding-const`\n}\n</code></pre>\n\n<p>Code: <a href=\"http://coliru.stacked-crooked.com/a/4729be904215e4b2\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/4729be904215e4b2</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 14181666, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/bf483f9cf488029878c1f8825b62e4d6?s=128&d=identicon&r=PG", "display_name": "Quential33", "link": "https://stackoverflow.com/users/14181666/quential33"}, "is_accepted": false, "score": 0, "last_activity_date": 1606336360, "last_edit_date": 1606336360, "creation_date": 1606335135, "answer_id": 65012054, "question_id": 49151393, "link": "https://stackoverflow.com/questions/49151393/constructor-for-const-object/65012054#65012054", "title": "Constructor for `const` object", "body": "<p>Interesting.\nLook at the example below (object <code>myclass2</code>) to learn how a const object does not necessarily provide the protection that you need!</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cctype&gt;\n#include &lt;cassert&gt;\n\nclass MyClass\n{\n  public:\n    MyClass(char * str1, size_t size1) : str{str1}, size{size1}\n    {\n    }\n    char * capitalizeFirstChar()\n    {\n        *str = std::toupper(*str);\n        return str;\n    }\n    char nthChar(size_t n) const\n    {\n        assert(n &lt; size);\n        return str[n];\n    }\n\n    char * str;\n    size_t size;\n};\n\n\nint main()\n{\n    {\n        static char str1[] = &quot;abc&quot;;\n        MyClass myclass1(str1, sizeof(str1) / sizeof(*str1));\n\n        myclass1.capitalizeFirstChar();\n        std::cout &lt;&lt; myclass1.nthChar(0) &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; &quot;----------------------&quot; &lt;&lt; std::endl;\n    {\n        static const char str2[] = &quot;abc&quot;;\n        //             UGLY!!! const_cast\n        const MyClass myclass2(const_cast&lt;char *&gt;(str2), sizeof(str2) / sizeof(*str2));\n\n        // myclass2.capitalizeFirstChar();        // commented: will not compile\n\n        std::cout &lt;&lt; myclass2.nthChar(0) &lt;&lt; std::endl;\n\n        char c = 'x';\n        // myclass2.str = &amp;c;                     // commented: will not compile\n                                                  // The const myclass2, does not\n                                                  // allow modification of it's members\n\n        myclass2.str[0] = 'Z';  // WILL COMPILE (!!) and should cause a segfault\n                                // The const myclass2, CANNOT PROTECT THE OBJECT POINTED TO by str\n                                // Reason: the member in MyClass is \n                                //                      char *str  \n                                //         not \n                                //                const char *str\n\n        std::cout &lt;&lt; myclass2.nthChar(0) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n<p>Ok, the <code>str</code> member issue is actually best solved, by just making the members private.</p>\n<p>But what about that ugly <code>const_cast</code>?\nOne way of solving this is splitting into a Const baseclass, and deriving for non-const behaviour (working with const-casts). Like this perhaps:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cctype&gt;\n#include &lt;cassert&gt;\n\nclass MyClassConst\n{\n  public:\n    MyClassConst(const char * str1, size_t size1) : str{str1}, size{size1}\n    {\n    }\n    char nthChar(size_t n) const\n    {\n        assert(n &lt; size);\n        return str[n];\n    }\n\n    const char * str;\n    size_t size;\n};\n\nclass MyClass : public MyClassConst\n{\n  public:\n    MyClass(char * str1, size_t size1) : MyClassConst{const_cast&lt;const char *&gt;(str1), size1}\n    {\n    }\n    char * capitalizeFirstChar()\n    {\n        char * cp = const_cast&lt;char *&gt;(str);\n        *cp       = std::toupper(*cp);\n        return cp;\n    }\n};\n\n\nint main()\n{\n    {\n        static char str1[] = &quot;abc&quot;;\n        MyClass myclass1(str1, sizeof(str1) / sizeof(*str1));\n        myclass1.capitalizeFirstChar();\n        std::cout &lt;&lt; myclass1.nthChar(0) &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; &quot;----------------------&quot; &lt;&lt; std::endl;\n    {\n        static const char str2[] = &quot;abc&quot;;\n        //             NICE: no more const_cast\n        const MyClassConst myclass2(str2, sizeof(str2) / sizeof(*str2));\n\n        // a.capitalizeFirstChar();               // commented: will not compile\n\n        std::cout &lt;&lt; myclass2.nthChar(0) &lt;&lt; std::endl;\n\n        char c = 'x';\n        // myclass2.str = &amp;c;                     // commented: will not compile\n                                                  // The const myclass2, does not\n                                                  // allow modification of it's members\n\n        // myclass2.str[0] = 'Z';                 // commented: will not compile\n\n        std::cout &lt;&lt; myclass2.nthChar(0) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n<p>Is it worth it? Depends.\nOne is kindof trading the const-cast outside of the class... for const-cast <strong>inside</strong> the class. So maby for library code (including ugly internals, and static code analysis exceptions), with clean outside usage, it's a match...</p>\n"}], "owner": {"reputation": 3329, "user_id": 466339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/960652dda2d376483116e2fa230b5e32?s=128&d=identicon&r=PG", "display_name": "j4x", "link": "https://stackoverflow.com/users/466339/j4x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2150, "favorite_count": 0, "accepted_answer_id": 49151864, "answer_count": 7, "score": 1, "last_activity_date": 1606336360, "creation_date": 1520423902, "last_edit_date": 1520424107, "question_id": 49151393, "link": "https://stackoverflow.com/questions/49151393/constructor-for-const-object", "title": "Constructor for `const` object", "body": "<p>Consider this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass test\n{\npublic:\n    test( char *arg )\n    :   _arg( arg )\n    {}  \n    char *_arg;\n};\n\nint main( )\n{\n    char *txt1       = \"Text one\";  // Ignore this warning.\n    const char *txt2 = \"Text two\";\n\n    test       t1( txt1 );  // Normal case, nothing new.\n    const test t2( txt2 );  // Since object is const, I'd like to be able to pass a const argument in.\n}\n</code></pre>\n\n<p>It blows up with the error:</p>\n\n<pre><code>error: invalid conversion from \u2018const char*\u2019 to \u2018char*\u2019 [-fpermissive]\n   const test t2( txt2 );\n</code></pre>\n\n<p>Then I tried to add a second constructor to test whether the compiler could select the right one for <code>t2</code>, my <code>const</code> object:</p>\n\n<pre><code>    test( const char *arg )\n    :   _arg( arg )\n    {}  \n</code></pre>\n\n<p>but then the error is:</p>\n\n<pre><code>error: invalid conversion from \u2018const char*\u2019 to \u2018char*\u2019 [-fpermissive]\n  : _arg( arg )\n</code></pre>\n\n<p>So declaring my object as <code>const</code> does not make its fields <code>const</code> as well.</p>\n\n<p>How to properly declare my class constructors so that it can handle <code>const</code> and non-const object creation?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1520423944, "post_id": 49151352, "comment_id": 85306906, "body": "<a href=\"http://en.cppreference.com/w/cpp/io/c/remove\" rel=\"nofollow noreferrer\">Remove</a> it first?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9408921"}, "edited": false, "score": 1, "creation_date": 1520424122, "post_id": 49151352, "comment_id": 85307016, "body": "From <a href=\"http://en.cppreference.com/w/cpp/io/c/rename\" rel=\"nofollow noreferrer\">here</a>: <i>&quot;If new_filename exists, the behavior is implementation-defined.&quot;</i>."}, {"owner": {"reputation": 229, "user_id": 8663952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1955113748037445/picture?type=large", "display_name": "QaMar ALi", "link": "https://stackoverflow.com/users/8663952/qamar-ali"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520425702, "post_id": 49151352, "comment_id": 85308079, "body": "good idea @Someprogrammerdude"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520426231, "post_id": 49151352, "comment_id": 85308421, "body": "Note that if you remove and rename - there&#39;s a chance that something could jump in and create the file between your 2 calls.  If you wanted to do it with a 100% success rate I think you&#39;d have to copy the file manually with streams... but I&#39;d bet in this case a remove will do jsut fine"}, {"owner": {"reputation": 229, "user_id": 8663952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1955113748037445/picture?type=large", "display_name": "QaMar ALi", "link": "https://stackoverflow.com/users/8663952/qamar-ali"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520431403, "post_id": 49151352, "comment_id": 85311977, "body": "i was just practicing file system nothing else its not any kinda project   or anything @UKMonkey.. BTW i cound&#39;t understand what could happen.. i mean we can check if file exists then remove it and rename a file to the file name we wanted isn&#39;t that it ???"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520431674, "post_id": 49151352, "comment_id": 85312176, "body": "@QaMarALi   your program deletes the file -&gt; Other program jumps in and creates the file again -&gt; your program tries to move the file.  Move fails because the file exists."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520431786, "post_id": 49151352, "comment_id": 85312258, "body": "What you want to research is &quot;race conditions&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "is_accepted": true, "score": 1, "last_activity_date": 1520424350, "creation_date": 1520424350, "answer_id": 49151537, "question_id": 49151352, "link": "https://stackoverflow.com/questions/49151352/renaming-a-file-to-name-of-file-that-already-exists/49151537#49151537", "title": "Renaming a file to name of file that already exists", "body": "<p>Your code works and renames a file only once.</p>\n\n<p>The second time you run your program, file <code>banana.txt</code> already exist in that directory and function <code>std::rename(\"afile.dat\" , \"banana.txt\");</code> returns an error code. </p>\n\n<p>So you need to check if a file with the new filename is already exists or handle an error after function <code>std::rename</code>.</p>\n"}], "owner": {"reputation": 229, "user_id": 8663952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1955113748037445/picture?type=large", "display_name": "QaMar ALi", "link": "https://stackoverflow.com/users/8663952/qamar-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1456, "favorite_count": 0, "accepted_answer_id": 49151537, "answer_count": 1, "score": 0, "last_activity_date": 1520431168, "creation_date": 1520423804, "last_edit_date": 1520431168, "question_id": 49151352, "link": "https://stackoverflow.com/questions/49151352/renaming-a-file-to-name-of-file-that-already-exists", "title": "Renaming a file to name of file that already exists", "body": "<p>i am renaming file for example <code>file1.txt</code> to <code>\"newFile.txt\"</code> but when the code runs for the next time. the file <code>newFile.txt</code> already exists so the newly file created whos name is <code>\"file1.txt\"</code> doesn't renamed to <code>\"newFile.txt\"</code>\n<br>\nwhat i want is if the <code>\"newFile.txt\"</code> already exists renaming <code>\"file1.txt\"</code> should overwrite the <code>\"file1.txt\"</code> is it possible ??</p>\n\n<p>Here goes my code</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    char data[100];\n\n    fstream outfile;\n    outfile.open(\"afile.dat\" , ios::out );\n\n    cout &lt;&lt; \"Writing to the file\" &lt;&lt; endl;\n    cout &lt;&lt; \"Enter your name: \";\n    cin.getline(data, 100);\n\n    outfile &lt;&lt; data &lt;&lt; endl;\n\n    cout &lt;&lt; \"Enter your age: \";\n    cin &gt;&gt; data;\n    cin.ignore();\n\n    // again write inputted data into the file.\n    outfile &lt;&lt; data &lt;&lt; endl;\n\n    cout &lt;&lt; \"Reading from the file\" &lt;&lt; endl;\n\n    outfile &gt;&gt; data;\n    cout &lt;&lt; data &lt;&lt; endl;\n\n    outfile &gt;&gt; data;\n    cout &lt;&lt; data &lt;&lt; endl;\n    outfile.close();\n\n   // this is how i am renaming\n    std::rename(\"afile.dat\" , \"file2.txt\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 5, "creation_date": 1520423110, "post_id": 49151083, "comment_id": 85306375, "body": "What are you <i>really</i> trying to accomplish? <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">This smells like a Y to a hidden X</a>."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1520423110, "post_id": 49151083, "comment_id": 85306376, "body": "This sounds like <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem/66378\">XY problem</a>. Why do you think, that you need this?"}, {"owner": {"reputation": 4802, "user_id": 921070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f584b200a79f438d9092d7f76da7ede6?s=128&d=identicon&r=PG", "display_name": "Dean Seo", "link": "https://stackoverflow.com/users/921070/dean-seo"}, "edited": false, "score": 0, "creation_date": 1520423128, "post_id": 49151083, "comment_id": 85306391, "body": "You could <i>technically</i> get it by looking at the local stack frame, but I&#39;m not sure that&#39;s what you&#39;re looking for here..."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1520423203, "post_id": 49151083, "comment_id": 85306431, "body": "This question doesn&#39;t make any sense, because it is contradictory: &quot;<i>can we get the value of name from instance det i.e., &quot;abc&quot; without using instance det?</i>&quot;. It is like &quot;How can I eat an apple without having the apple?&quot;"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1520423632, "post_id": 49151083, "comment_id": 85306717, "body": "@gvs - Nobody was commenting on your English, it&#39;s the requirement which doesn&#39;t make any sense."}, {"owner": {"reputation": 69, "user_id": 9358653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143bbd6a6201e31d3ce823a3518e7154?s=128&d=identicon&r=PG&f=1", "display_name": "gvs", "link": "https://stackoverflow.com/users/9358653/gvs"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1520424338, "post_id": 49151083, "comment_id": 85307162, "body": "@StoryTeller my requirement is clear. Getting the value from instance by using its struct type and its member name."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520424504, "post_id": 49151083, "comment_id": 85307277, "body": "It was clear enough to produce an answer."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520424632, "post_id": 49151083, "comment_id": 85307380, "body": "@LightnessRacesinOrbit - Well, here&#39;s to hoping the OP doesn&#39;t start debating with you about how well your answer suits them. I still think this is an XY problem."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1520424906, "post_id": 49151083, "comment_id": 85307578, "body": "@StoryTeller: Every single question ever asked is an XY problem to a certain extent - we solve individual problems then apply the solutions to create a building block, part of a larger puzzle, until our whole project is finished. I don&#39;t think rejecting fairly simple questions about the language on the basis of it being &quot;an XY problem&quot; is particularly useful, personally. We&#39;re here to answer questions, not consult on the parent project&#39;s overarching architecture and design decisions."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520425252, "post_id": 49151083, "comment_id": 85307786, "body": "@LightnessRacesinOrbit - <i>&quot;To an extent&quot;</i> yes. And please do not assume the rejection is about the simplicity of the question. I get the distinct feeling that the sensible solution to the OP&#39;s real problem will not be the sensible solution to their literal problem. Very much like the linked meta post illustrates. But no matter, we&#39;ll see I suppose."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1520425376, "post_id": 49151083, "comment_id": 85307855, "body": "@StoryTeller: I agree, but it is now up to them to take the information they have learned here today, and use it to move another step along the path towards their final, finished solution. Skipping that step doesn&#39;t really help anybody."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 9358653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143bbd6a6201e31d3ce823a3518e7154?s=128&d=identicon&r=PG&f=1", "display_name": "gvs", "link": "https://stackoverflow.com/users/9358653/gvs"}, "edited": false, "score": 0, "creation_date": 1520425077, "post_id": 49151524, "comment_id": 85307692, "body": "Thank you very much. It&quot;s working.. But cannot change the format of struct into namespace due to some constraints in implementation. By the way, I am also not sure whether it is possible or not."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 69, "user_id": 9358653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143bbd6a6201e31d3ce823a3518e7154?s=128&d=identicon&r=PG&f=1", "display_name": "gvs", "link": "https://stackoverflow.com/users/9358653/gvs"}, "edited": false, "score": 3, "creation_date": 1520425107, "post_id": 49151524, "comment_id": 85307711, "body": "@gvs: If you can&#39;t use this solution, then you are stuck passing around a pointer or reference to your class instance. The language cannot do what you have described."}, {"owner": {"reputation": 69, "user_id": 9358653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143bbd6a6201e31d3ce823a3518e7154?s=128&d=identicon&r=PG&f=1", "display_name": "gvs", "link": "https://stackoverflow.com/users/9358653/gvs"}, "edited": false, "score": 0, "creation_date": 1520440037, "post_id": 49151524, "comment_id": 85318256, "body": "Yes, can implement pointer or reference concept. If there is any solution using pointers concept, please provide with an example."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 69, "user_id": 9358653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143bbd6a6201e31d3ce823a3518e7154?s=128&d=identicon&r=PG&f=1", "display_name": "gvs", "link": "https://stackoverflow.com/users/9358653/gvs"}, "edited": false, "score": 0, "creation_date": 1520440469, "post_id": 49151524, "comment_id": 85318539, "body": "@gvs: I&#39;m not going to teach you how to use pointers or references here. You should read the relevant chapter of your C++ book."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1520424315, "creation_date": 1520424315, "answer_id": 49151524, "question_id": 49151083, "link": "https://stackoverflow.com/questions/49151083/get-value-from-instance-knowing-its-struct-type/49151524#49151524", "title": "get value from instance knowing its struct type", "body": "<p>No.</p>\n\n<p>The language doesn't know that you only have one instance of <code>details</code>, and it certainly doesn't know where to find it if all you tell it is the type. There is no \"database\" of instances that it can consult.</p>\n\n<p>It sounds like you should put these pieces of data into a namespace, instead:</p>\n\n<pre><code>namespace details {\n    int numb       = 2;\n    string name    = \"abc\";\n    string address = \"def\";\n}\n\n// Refer to details::name practically anywhere\n</code></pre>\n\n<p>Now you have effectively created a \"database\" of information, and the string called <code>name</code> is in it.</p>\n"}, {"tags": [], "owner": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "is_accepted": false, "score": 0, "last_activity_date": 1520428731, "creation_date": 1520428731, "answer_id": 49152961, "question_id": 49151083, "link": "https://stackoverflow.com/questions/49151083/get-value-from-instance-knowing-its-struct-type/49152961#49152961", "title": "get value from instance knowing its struct type", "body": "<p>You can by storing a global pointer to the instance.\nHowever, there are downsides to using global variables. You should avoid it if possible.</p>\n\n<pre><code>struct details{\n    int numb;\n    string name;\n    string address;\n\n    static details* instance;\n};\n\ndetails* details::instance = nullptr;\n\ndetails det={2,\"abc\",\"def\"};\ndetails::instance = &amp;det;\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 9358653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143bbd6a6201e31d3ce823a3518e7154?s=128&d=identicon&r=PG&f=1", "display_name": "gvs", "link": "https://stackoverflow.com/users/9358653/gvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1520441194, "answer_count": 2, "score": 0, "last_activity_date": 1520428731, "creation_date": 1520422948, "last_edit_date": 1520423393, "question_id": 49151083, "link": "https://stackoverflow.com/questions/49151083/get-value-from-instance-knowing-its-struct-type", "closed_reason": "Needs details or clarity", "title": "get value from instance knowing its struct type", "body": "<p>There is a structure defined and instance is initialized.</p>\n\n<pre><code>struct details{\n    int numb;\n    string name;\n    string address;\n    };\n\ndetails det={2,\"abc\",\"def\"};\n</code></pre>\n\n<p>Now in generic implementation, we know the struct type(<code>details</code>) and member name (say <code>name</code>). Only one instance is defined for that structure. My question is can we get the value of <code>name</code> i.e., <code>\"abc\"</code> without using instance <code>det</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1520422966, "post_id": 49151033, "comment_id": 85306292, "body": "Your example can be made much simpler: Try to compare two <code>Pixel</code> objects to each other. And that&#39;s where the problem lies, that you have no comparison operators for <code>Pixel</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "is_accepted": true, "score": 6, "last_activity_date": 1520423043, "creation_date": 1520423043, "answer_id": 49151114, "question_id": 49151033, "link": "https://stackoverflow.com/questions/49151033/compare-two-user-defined-type-vectors/49151114#49151114", "title": "Compare two user defined type vectors", "body": "<p>You need to overload operator <code>==</code> for class <code>Pixel</code></p>\n\n<pre><code>struct Pixel\n{\n    int m_nX;\n    int m_nY;\n\n    Pixel(int x, int y)\n    {\n        m_nX = x;\n        m_nY = y;\n    }\n\n    bool operator==(const Pixel&amp; a) const{\n        return a.m_nX == m_nX &amp;&amp; a.m_nY == m_nY;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 608, "user_id": 949477, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4288030df390b69e82c0a389445549fc?s=128&d=identicon&r=PG", "display_name": "FaisalM", "link": "https://stackoverflow.com/users/949477/faisalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 2, "accepted_answer_id": 49151114, "answer_count": 1, "score": 2, "last_activity_date": 1520423043, "creation_date": 1520422805, "last_edit_date": 1520422899, "question_id": 49151033, "link": "https://stackoverflow.com/questions/49151033/compare-two-user-defined-type-vectors", "title": "Compare two user defined type vectors", "body": "<p>I am trying to compare two vectors using !=, but VS2015 shows these errors.</p>\n\n<pre><code>Error   C2672   'operator __surrogate_func': no matching overloaded function found  \nError   C2893   Failed to specialize function template 'unknown-type std::equal_to&lt;void&gt;::operator ()(_Ty1 &amp;&amp;,_Ty2 &amp;&amp;) const'\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;vector&gt;\nstruct Pixel \n{\n    int m_nX;\n    int m_nY;\n\n    Pixel(int x, int y)\n    {\n        m_nX = x;\n        m_nY = y;\n    }\n};\n\nint main()\n{\n    std::vector&lt;Pixel&gt; vtrPixels1;\n    vtrPixels1.emplace_back(1, 2);\n    vtrPixels1.emplace_back(3, 4);\n\n    std::vector&lt;Pixel&gt; vtrPixels2;\n    vtrPixels2.emplace_back(2, 2);\n    vtrPixels2.emplace_back(3, 4);\n\n    if (vtrPixels1 != vtrPixels2)\n        vtrPixels1 = vtrPixels2;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "stack"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520423198, "post_id": 49151014, "comment_id": 85306429, "body": "What you&#39;ve asked for is called operator abuse.  Stacks are the same if each item in the stack is the same; and order matters.  By saying you&#39;re happy to accept elements out of order; this isn&#39;t a stack comparison any more.  What you&#39;re looking for is a thing called a &#39;set&#39;"}, {"owner": {"reputation": 75, "user_id": 7054874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1997c1616628e0a1294c10ff7030db9d?s=128&d=identicon&r=PG&f=1", "display_name": "Juanti", "link": "https://stackoverflow.com/users/7054874/juanti"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520423461, "post_id": 49151014, "comment_id": 85306601, "body": "Ok then if i want to compare each element , what&#39;s the best way ?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520424158, "post_id": 49151014, "comment_id": 85307041, "body": "@UKMonkey: <i>&quot;By saying you&#39;re happy to accept elements out of order; this isn&#39;t a stack comparison any more.&quot;</i> It&#39;s still a comparison, it&#39;s just not an equivalence comparison."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520425252, "post_id": 49151014, "comment_id": 85307787, "body": "@LightnessRacesinOrbit ... true.  I like adding my own words in my head to the question; it often makes the question easier ;)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1520425457, "post_id": 49151014, "comment_id": 85307907, "body": "@UKMonkey: But then it&#39;s not the same question \ud83d\ude02"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520425721, "post_id": 49151014, "comment_id": 85308094, "body": "@LightnessRacesinOrbit How often do people ask the question they really mean anyway? :P"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520426177, "post_id": 49151014, "comment_id": 85308392, "body": "@UKMonkey: Is that really what you meant to ask?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520426280, "post_id": 49151014, "comment_id": 85308463, "body": "@LightnessRacesinOrbit Do you always answer a question with a question?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520426404, "post_id": 49151014, "comment_id": 85308531, "body": "@UKMonkey: How do you feel about that?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520426660, "post_id": 49151014, "comment_id": 85308697, "body": "@LightnessRacesinOrbit do you do counseling often, you seem well practiced?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520426682, "post_id": 49151014, "comment_id": 85308722, "body": "@UKMonkey: I am a licensed Stack Exchange psychiatrist."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520426794, "post_id": 49151014, "comment_id": 85308786, "body": "@LightnessRacesinOrbit I can imagine there&#39;s a significant need of them here - there&#39;s plenty of nutters around!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520426827, "post_id": 49151014, "comment_id": 85308808, "body": "@UKMonkey: It does keep me busy."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520426872, "post_id": 49151014, "comment_id": 85308839, "body": "@LightnessRacesinOrbit It could drive me to nuts if I wasn&#39;t already a monkey."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520427119, "post_id": 49151014, "comment_id": 85309014, "body": "@UKMonkey: Yo dawg, I put nuts in your monkey so you can monkey while you monkey."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520427144, "post_id": 49151014, "comment_id": 85309027, "body": "@LightnessRacesinOrbit   <i>UKMonkey breaks</i> I&#39;m not a dog :(  but ... I ... you ..."}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 3, "creation_date": 1520423287, "post_id": 49151143, "comment_id": 85306482, "body": "<code>if the stacks contains equivalent numbers but in different order , then the method should return true</code>  You missed this part of the question"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520423473, "post_id": 49151143, "comment_id": 85306613, "body": "@UKMonkey Yes I did, and as you say it&#39;s then no longer a comparison of the stacks."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": -1, "last_activity_date": 1520423131, "creation_date": 1520423131, "answer_id": 49151143, "question_id": 49151014, "link": "https://stackoverflow.com/questions/49151014/comparing-stack-data-structure-c/49151143#49151143", "title": "Comparing stack data structure c++", "body": "<p>On the outside your functions handle a stack, but the actual structure you implement the stack in is a simple linked list.</p>\n\n<p>And comparing two linked lists is done by comparing each element one by one, stopping when either list runs out or you find a difference in the elements.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520425480, "post_id": 49151339, "comment_id": 85307925, "body": "I can&#39;t think of a better way to do it, offhand, given the likely constraints. I think you could take a &quot;count equivalence&quot; method using a map of <i>value</i> \u21e8 <i>(int,int)</i>, then walk through each stack incrementing the integers (LHS when found in stack 1, RHS when found in stack 2), and finally examine each pair and compare all integer values for equality. But to do that you have to treat the stack as not a stack by accessing its underlying datastore, which may or may not be permitted."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1520425594, "post_id": 49151339, "comment_id": 85308002, "body": "Even if OP can&#39;t edit the stacks; then this is still the solution I think; but a copy must be made first.  Good answer though"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520425688, "post_id": 49151339, "comment_id": 85308071, "body": "@LightnessRacesinOrbit that would allow you to bail when your &#39;not matched items&#39; list is larger than the remaining size to process... best case is you only have to process half the list.  Me Likey."}], "tags": [], "owner": {"reputation": 72, "user_id": 9456349, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "jswl", "link": "https://stackoverflow.com/users/9456349/jswl"}, "is_accepted": false, "score": 2, "last_activity_date": 1520423772, "creation_date": 1520423772, "answer_id": 49151339, "question_id": 49151014, "link": "https://stackoverflow.com/questions/49151014/comparing-stack-data-structure-c/49151339#49151339", "title": "Comparing stack data structure c++", "body": "<p>Considering</p>\n\n<blockquote>\n  <p>if the stacks contains equivalent numbers but in different order , then the method should return true </p>\n</blockquote>\n\n<p>I think the optimal solution would be via sort and compare.</p>\n\n<p>Extract the data from each stack </p>\n\n<pre><code>k1 = {data of lhs}     -&gt; O(n)\nk2 = {data of rhs}     -&gt; O(n)\n</code></pre>\n\n<p>Sort the two arrays </p>\n\n<pre><code>k1_sorted = sort(k1)   -&gt; O(n log(n))\nk2_sorted = sort(k2)   -&gt; O(n log(n))\n</code></pre>\n\n<p>Now you can compare the two sorted arrays in O(n). Keep in mind the possible repeated numbers in k1_sorted and k2_sorted.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1520426019, "creation_date": 1520426019, "answer_id": 49152092, "question_id": 49151014, "link": "https://stackoverflow.com/questions/49151014/comparing-stack-data-structure-c/49152092#49152092", "title": "Comparing stack data structure c++", "body": "<p>As well as the sort method, you could take a counting approach:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\n\n/**\n * Returns true iff the two vectors contain the same elements\n * (including number of duplicates) in any order.\n *  \n * Alternatively std::sort both vectors and just compare them\n * for equality, which may or may not be faster.\n */\nbool sortOfEquivalent(const std::vector&lt;int&gt;&amp; lhs, const std::vector&lt;int&gt;&amp; rhs)\n{\n    std::map&lt;int, std::pair&lt;int,int&gt;&gt; accumulator;\n\n    for (const auto x : lhs) {\n        accumulator[x].first++;\n    }\n\n    for (const auto x : rhs) {\n        accumulator[x].second++;\n\n        if (accumulator[x].second &gt; accumulator[x].first) {\n            // Can bail early here; the RHS already has\n            // more x's than the LHS does\n            return false;\n        }\n    }\n\n    for (const auto&amp; y : accumulator) {\n        if (y.second.first != y.second.second)\n            return false;\n    }\n\n    return true;\n}\n\nint main()\n{\n    std::vector&lt;int&gt; lhs{3,5,5,7,1};\n    std::vector&lt;int&gt; rhs{1,2,3,4,5,6,7};\n\n    std::cout &lt;&lt; sortOfEquivalent(lhs, rhs);\n}\n</code></pre>\n\n<p>Depending on your data, this may or may not be faster than the sorting method. It also may or may not take less storage than the sorting method.</p>\n\n<p>Also in reality you'd probably take a reference to <code>accumulator[x]</code> in that second loop rather than looking up the element three times.</p>\n\n<p>However, you can only apply this solution to your situation if you treat your stack as not-a-stack, i.e. using its underlying data store (forward iteration is required). This may or may not be permitted.</p>\n"}], "owner": {"reputation": 75, "user_id": 7054874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1997c1616628e0a1294c10ff7030db9d?s=128&d=identicon&r=PG&f=1", "display_name": "Juanti", "link": "https://stackoverflow.com/users/7054874/juanti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 991, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1520426019, "creation_date": 1520422764, "question_id": 49151014, "link": "https://stackoverflow.com/questions/49151014/comparing-stack-data-structure-c", "title": "Comparing stack data structure c++", "body": "<p>I have the following program.What is the best , and most efficient way to check if the two stacks are equal by the values they contain?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n\nstruct StackNode\n{\n    int data;\n     StackNode* next;\n};\n\n StackNode* newNode(int data)\n{\n     StackNode* stackNode = new StackNode[sizeof(StackNode)];\n\n    stackNode-&gt;data = data;\n    stackNode-&gt;next = NULL;\n    return stackNode;\n}\n\nint isEmpty( StackNode *root)\n{\n    return !root;\n}\n\nvoid push( StackNode** root, int data)\n{\n     StackNode* stackNode = newNode(data);\n    stackNode-&gt;next = *root;\n    *root = stackNode;\n\n}\n\nint pop( StackNode** root)\n{\n    if (isEmpty(*root))\n        return INT_MIN;\n     StackNode* temp = *root;\n    *root = (*root)-&gt;next;\n    int popped = temp-&gt;data;\n    free(temp);\n\n    return popped;\n}\n\nint peek(StackNode* root)\n{\n    if (isEmpty(root))\n        return INT_MIN;\n    return root-&gt;data;\n}\n\nbool AreEqual(StackNode** lhs, StackNode** rhs)\n{\n   ////// ?\n}\n\nint main()\n{\n    StackNode* root = NULL;\n    StackNode * r2 = NULL;\n    push(&amp;root, 10);\n    push(&amp;root, 20);\n    push(&amp;root, 30);\n\n\n    push(&amp;r2, 123);\n    push(&amp;r2, 1231213);\n\n    AreEqual(&amp;root, &amp;r2);\n}\n</code></pre>\n\n<p>if the stacks contains equivalent numbers but in different order , then the method should return true .. I would be very thankful if you could give me some directions for that task.Thanks in advice.</p>\n"}, {"tags": ["c++", "opengl", "glsl", "sdl-2"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1520421588, "post_id": 49150608, "comment_id": 85305452, "body": "What does your program display?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2167177"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1520423475, "post_id": 49150608, "comment_id": 85306614, "body": "It displays a white screen when it opens (as though I set the clear colour to white), and then it changes to a black screen almost immediately, and then stays like that."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1520443606, "post_id": 49150608, "comment_id": 85320582, "body": "@user2167177 your indices defined as <code>GLfloat</code> but draw says they are <code>GL_UNSIGNED_INT</code>. Bitmasks for surface creation are also wrong, I&#39;m not sure it is guaranteed to work."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2167177"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1520448329, "post_id": 49150608, "comment_id": 85323348, "body": "@keltar You are a superstar. Changing my indices to a GLuint fixed it. If you want to write an answer to that effect, I&#39;ll give you a big ol&#39; answered."}], "answers": [{"tags": [], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "is_accepted": false, "score": 0, "last_activity_date": 1520461717, "creation_date": 1520461717, "answer_id": 49162263, "question_id": 49150608, "link": "https://stackoverflow.com/questions/49150608/opengl-programmatically-create-texture/49162263#49162263", "title": "OpenGL programmatically create texture", "body": "<p>I am adding an answer based on keltar's answer in the comment to take this question out of the unanswered tab. If keltar answers I will delete my answer.</p>\n\n<p>The issue is that the vertex attributes are qualified as floats in the lines:</p>\n\n<pre><code>glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);\nglEnableVertexAttribArray(0);\n\nglVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (GLvoid*)(3 * sizeof(GLfloat)));\nglEnableVertexAttribArray(1);\n</code></pre>\n\n<p>But the texture is expecting unsigned bytes:</p>\n\n<pre><code>glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, screen_width, screen_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, surface-&gt;pixels);\n</code></pre>\n\n<p>So changing the vertex attributes fixes the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 0, "last_activity_date": 1520484039, "creation_date": 1520484039, "answer_id": 49165532, "question_id": 49150608, "link": "https://stackoverflow.com/questions/49150608/opengl-programmatically-create-texture/49165532#49165532", "title": "OpenGL programmatically create texture", "body": "<p>Indices defined as</p>\n\n<pre><code>GLfloat indices[] = {\n        0, 1, 3,\n        1, 2, 3\n};\n</code></pre>\n\n<p>However, indices must be integer. Later when drawing it is said indices are GLuint:</p>\n\n<pre><code>glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n</code></pre>\n\n<p>And float bits are interpreted as uint, giving invalid values like  1065353216, 1077936128, ..., which greatly exceeds vertex buffer size.</p>\n\n<p>Define indices as GLuint (or uint32_t).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2167177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 49165532, "answer_count": 2, "score": 1, "last_activity_date": 1520484039, "creation_date": 1520421483, "last_edit_date": 1520423514, "question_id": 49150608, "link": "https://stackoverflow.com/questions/49150608/opengl-programmatically-create-texture", "title": "OpenGL programmatically create texture", "body": "<p>Using OpenGL core profile, I'm trying to create a texture that fills the screen and displays a white square in the middle of the texture.</p>\n\n<pre><code>#include &lt;SDL2/SDL.h&gt;\n#include \"glad/glad.h\"\n\n#define SIMPLE_VERTEX_SHADER \"#version 330 core \\n \\\nlayout (location = 0) in vec3 aPos; \\n \\\nlayout (location = 1) in vec2 aTexCoord; \\n \\\nout vec2 TexCoord; \\n \\\nvoid main() { \\n \\\n    gl_Position = vec4(aPos, 1.0f); \\n \\\n    TexCoord = vec2(aTexCoord.x, aTexCoord.y); \\n \\\n}\\n\\0\"\n\n#define SIMPLE_FRAGMENT_SHADER \"#version 330 core \\n \\\nout vec4 FragColor; \\n \\\nin vec3 ourColor; \\n \\\nin vec2 TexCoord; \\n \\\nuniform sampler2D tex; \\n \\\nvoid main() { \\n \\\n    FragColor = texture(tex, TexCoord); \\n \\\n}\\n\\0\"\n\nint main(int argv, char** args) {\n    SDL_Window *window;\n    SDL_GLContext glcontext;\n\n    if (SDL_Init(SDL_INIT_VIDEO)) {\n        printf(\"Unable to initialise SDL: %s\\n\", SDL_GetError());\n        SDL_Quit();\n        exit(1);\n    }\n\n    SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);\n    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);\n    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 3);\n\n    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);\n\n    int screen_width, screen_height;\n    screen_height = screen_width = 500;\n\n    window = SDL_CreateWindow(\"Texture Test\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, screen_width, screen_height, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN);\n    if (!window) {\n        printf(\"Unable to create window: %s\\n\", SDL_GetError());\n        SDL_Quit();\n        exit(1);\n    }\n\n    glcontext = SDL_GL_CreateContext(window);\n\n    SDL_GL_SetSwapInterval(1);\n\n\n    if (!gladLoadGLLoader((GLADloadproc)SDL_GL_GetProcAddress))\n    {\n        printf(\"Failed to initialize GLAD\\n\");\n    }\n\n    const GLchar* vertexShaderSource = SIMPLE_VERTEX_SHADER;\n\n    GLuint vertexShader;\n    vertexShader = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource(vertexShader, 1, &amp;vertexShaderSource, NULL);\n    glCompileShader(vertexShader);\n\n    int success;\n    char infoLog[512];\n    glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;success);\n    if (!success)\n    {\n        glGetShaderInfoLog(vertexShader, 512, NULL, infoLog);\n        printf(\"ERROR::SHADER::VERTEX::COMPILATION_FAILED\\n%s\\n\", infoLog);\n    }\n\n    const GLchar* fragmentShaderSource = SIMPLE_FRAGMENT_SHADER;\n\n    GLuint fragmentShader;\n    fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(fragmentShader, 1, &amp;fragmentShaderSource, NULL);\n    glCompileShader(fragmentShader);\n\n    glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &amp;success);\n    if (!success)\n    {\n        glGetShaderInfoLog(fragmentShader, 512, NULL, infoLog);\n        printf(\"ERROR::SHADER::FRAGMENT::COMPILATION_FAILED\\n%s\\n\", infoLog);\n    }\n\n    GLuint shaderProgram;\n\n    shaderProgram = glCreateProgram();\n\n    glAttachShader(shaderProgram, vertexShader);\n    glAttachShader(shaderProgram, fragmentShader);\n    glLinkProgram(shaderProgram);\n\n    glGetProgramiv(shaderProgram, GL_LINK_STATUS, &amp;success);\n    if (!success) {\n        glGetProgramInfoLog(shaderProgram, 512, NULL, infoLog);\n        printf(\"ERROR::SHADER::PROGRAM::LINKING_FAILED\\n%s\\n\", infoLog);\n    }\n\n    glDeleteShader(vertexShader);\n    glDeleteShader(fragmentShader);\n\n    GLfloat vertices[] = {\n            1.0f, 1.0f, 0.0f, 1.0, 0.0f,\n            1.0f, -1.0f, 0.0f, 1.0, 1.0f,\n            -1.0f, -1.0f, 0.0f, 0.0, 1.0f,\n            -1.0f, 1.0f, 0.0f, 0.0, 0.0f\n    };\n\n    GLfloat indices[] = {\n            0, 1, 3,\n            1, 2, 3\n    };\n\n    bool running;\n    running = true;\n    GLuint VAO, VBO, EBO;\n    SDL_Surface* surface;\n    SDL_Event e;\n\n    glGenVertexArrays(1, &amp;VAO);\n    glGenBuffers(1, &amp;VBO);\n    glGenBuffers(1, &amp;EBO);\n\n    glBindVertexArray(VAO);\n\n    glBindBuffer(GL_ARRAY_BUFFER, VBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);\n\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (void*)0);\n    glEnableVertexAttribArray(0);\n\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (GLvoid*)(3 * sizeof(GLfloat)));\n    glEnableVertexAttribArray(1);\n\n    glBindVertexArray(0);\n\n    GLuint texture;\n\n    glGenTextures(1, &amp;texture);\n    surface = SDL_CreateRGBSurface(0, screen_width, screen_height, 32, 0, 0, 0, 0);\n\n    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT);\n    SDL_GL_SwapWindow(window);\n\n\n    while(running) {\n        while(SDL_PollEvent(&amp;e)) {\n            if (e.type == SDL_QUIT) {\n                running = false;\n            }\n            if (e.type == SDL_KEYDOWN)\n            {\n                switch (e.key.keysym.sym)\n                {\n                    case SDLK_ESCAPE:\n                        running = false;\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n\n        if (SDL_MUSTLOCK(surface)) {\n            SDL_LockSurface(surface);\n        }\n        uint8_t* pixel_data = (uint8_t*)surface-&gt;pixels;\n        for (int y = screen_height * 0.25; y &lt; screen_height * 0.75; ++y) {\n            for (int x = screen_width * 0.25; x &lt; screen_width * 0.75; ++x) {\n                pixel_data[4 * (y * surface -&gt; w + x) + 0] = 0xFF;\n                pixel_data[4 * (y * surface -&gt; w + x) + 1] = 0xFF;\n                pixel_data[4 * (y * surface -&gt; w + x) + 2] = 0xFF;\n                pixel_data[4 * (y * surface -&gt; w + x) + 3] = 0xFF;\n            }\n        }\n        if (SDL_MUSTLOCK(surface)) {\n            SDL_UnlockSurface(surface);\n        }\n\n        glBindTexture(GL_TEXTURE_2D, texture);\n\n        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, screen_width, screen_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, surface-&gt;pixels);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n\n        glBindTexture(GL_TEXTURE_2D, 0);\n\n        glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        glUseProgram(shaderProgram);\n\n        glActiveTexture(GL_TEXTURE0);\n        glBindTexture(GL_TEXTURE_2D, texture);\n        glUniform1i(glGetUniformLocation(shaderProgram, \"tex\"), 0);\n\n        glBindVertexArray(VAO);\n        glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n        glBindVertexArray(0);\n\n        glUseProgram(0);\n\n        SDL_GL_SwapWindow(window) ;\n    }\n\n    SDL_GL_DeleteContext(glcontext);\n    SDL_DestroyWindow(window);\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n\n<p>It displays a white screen when it opens (as though I set the clear colour to white), and then it changes to a black screen almost immediately, and then stays like that.</p>\n\n<p>I'm clearly doing something wrong, but I cannot work out. I get the feeling that my shaders are the problem. But I don't know for sure.</p>\n\n<p>Is someone able to give me a pointer on what I'm doing wrong?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "shared-libraries", "objdump"], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1520421456, "last_edit_date": 1520421456, "creation_date": 1520420967, "answer_id": 49150457, "question_id": 49150331, "link": "https://stackoverflow.com/questions/49150331/given-program-counter-find-the-source-line-in-a-shared-library/49150457#49150457", "title": "Given program counter, find the source line in a shared library", "body": "<p>You need your program (and all the relevant shared libraries) to be compiled with debug information (in <a href=\"https://en.wikipedia.org/wiki/DWARF\" rel=\"nofollow noreferrer\">DWARF</a> format), e.g. by passing some <code>-g</code> (or <code>-g2</code> or <code>-g3</code>) flag to the <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> compiler when they are built. Notice that with GCC such a debugging option can be mixed with optimization options like <code>-O2</code> </p>\n\n<p>Then you might use utilities like <a href=\"https://sourceware.org/binutils/docs/binutils/addr2line.html\" rel=\"nofollow noreferrer\">addr2line</a>, or perhaps libraries like <a href=\"https://github.com/ianlancetaylor/libbacktrace\" rel=\"nofollow noreferrer\">libbacktrace</a>. FWIW, the GCC compiler itself (actually its <code>cc1plus</code>) uses that <code>libbacktrace</code> library to print a useful backtrace on <code>SIGSEGV</code> and other terminating signals (on compiler crashes).</p>\n\n<p>BTW, you could (and probably should) enable <a href=\"http://man7.org/linux/man-pages/man5/core.5.html\" rel=\"nofollow noreferrer\">core(5)</a> dumping and do a post mortem analysis of it with <code>gdb</code></p>\n\n<p>Notice that due to <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">ASLR</a>, a shared library is loaded (actually <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap(2)</a>-ed) at some \"random\" page.</p>\n\n<p>Read Drepper's <a href=\"https://www.akkadia.org/drepper/dsohowto.pdf\" rel=\"nofollow noreferrer\"><em>How to Write Shared Libraries</em></a> paper.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "is_accepted": true, "score": 3, "last_activity_date": 1520421906, "creation_date": 1520421906, "answer_id": 49150747, "question_id": 49150331, "link": "https://stackoverflow.com/questions/49150331/given-program-counter-find-the-source-line-in-a-shared-library/49150747#49150747", "title": "Given program counter, find the source line in a shared library", "body": "<p>The simplest solution is to load core dump into gdb and use <code>info symbol &lt;program counter address&gt;</code>, see <a href=\"https://stackoverflow.com/a/7648883/72178\">https://stackoverflow.com/a/7648883/72178</a>.</p>\n\n<p>You can also use <code>addr2line</code> but you will have to provide library starting address in parameters to <code>addr2line</code>, see <a href=\"https://stackoverflow.com/q/7556045/72178\">How to map function address to function in *.so files</a>.</p>\n"}], "owner": {"reputation": 861, "user_id": 2531913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fcc397a97fabf63c14116a93dc02d91?s=128&d=identicon&r=PG&f=1", "display_name": "Einheri", "link": "https://stackoverflow.com/users/2531913/einheri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2144, "favorite_count": 1, "accepted_answer_id": 49150747, "answer_count": 2, "score": 3, "last_activity_date": 1520421906, "creation_date": 1520420574, "question_id": 49150331, "link": "https://stackoverflow.com/questions/49150331/given-program-counter-find-the-source-line-in-a-shared-library", "title": "Given program counter, find the source line in a shared library", "body": "<p>I'm trying to debug a segfault in Android's surfaceflinger daemon on a custom made ARM board. The process crashes before dumping the call stack and register content, including the program counter. </p>\n\n<p>Normally I would've used objdump and searched for the program counter. The problem is that part of the call stack is in a shared library. Without using gdb, how can I correlate the program counter with a line in the source file? That is, can the addresses of shared library instructions be determined without running the program?</p>\n"}, {"tags": ["c++", "cimg"], "owner": {"reputation": 11, "user_id": 9071776, "user_type": "registered", "profile_image": "https://graph.facebook.com/138198173551788/picture?type=large", "display_name": "Guo Kunpeng", "link": "https://stackoverflow.com/users/9071776/guo-kunpeng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520420453, "creation_date": 1520420453, "question_id": 49150299, "link": "https://stackoverflow.com/questions/49150299/use-cimg-h-to-write-a-simple-interface", "title": "Use CImg.h to write a simple interface", "body": "<pre><code>#include \"stdafx.h\"\n#include \"CImg.h\"\n#include &lt;iostream&gt;\n#include \"windows.h\"\n#include &lt;string&gt;\n\n\nusing namespace cimg_library;\nusing std::cin;\nusing std::cout;\n\nint main(){\n\n\n    CImg &lt;unsigned char&gt; window(600, 500, 1, 3, 1);   //\u5b9a\u4e49\u4e00\u4e2a \u957f600px \u5bbd500px \u6df1 1px \u7684\u56fe\n       // 3 \u4ee3\u8868\u8272\u5f69\u901a\u9053\u6570\uff0cRed,Green,Blue RGB \u4e09\u8272\u5c31\u662f 3 \n    window.fill(1);\n    unsigned char purple[] = { 255, 0, 255 };\n\n    window.draw_text(100, 100, \"GOD\", purple);  //\u5728\u5750\u6807 100\uff0c100 \u5904\uff0c\u753b\u4e00\u4e2a\u7d2b\u8272\u7684GOD\n\n    CImg&lt;unsigned char&gt; img(200, 200, 1, 3, 0);   // \u5b9a\u4e49\u4e00\u4e2a2d \u7684\u56fe\n\n    const unsigned char color[] = { 255, 128, 64 };  //\u5b9a\u4e49\u4e00\u4e2a\u989c\u8272\n\n    char a,b,c;\n    cout &lt;&lt; \"you want to draw a line?(Y/N\uff09 \" &lt;&lt; std::endl;\n    cin &gt;&gt; a;\n    if (a == 'Y'){\n        img.draw_line(40, 40, 80, 70, color);   // draw_line \u753b\u7ebf \u8d77\u59cb\u70b9(40,40) -&gt; \u7ec8\u70b9(80,70\uff09 \u4e24\u4e2a\u70b9\uff0c color \u989c\u8272\n        img.display(\"draw_line\");\n\n    }\n    else{\n        cout &lt;&lt; \"OK, You dont want to do that\" &lt;&lt; std::endl;\n    }\n\n    cout &lt;&lt; \"Another line?(Y/N)\" &lt;&lt; std::endl;\n    cin &gt;&gt; b;\n    if (b == 'Y'){\n        img.draw_line(80, 70, 100, 110, color);   // draw_line \u753b\u7ebf \u8d77\u59cb\u70b9(80,70) -&gt; \u7ec8\u70b9(100,110\uff09 \u4e24\u4e2a\u70b9\uff0c color \u989c\u8272\n        img.display(\"draw_line\");\n    }\n    else{\n        cout &lt;&lt; \"OK, You dont want to do that\" &lt;&lt; std::endl;\n    }\n\n    cout &lt;&lt; \"Another line?(Y/N)\" &lt;&lt; std::endl;\n    cin &gt;&gt; c;\n    if (c == 'Y'){\n        img.draw_line(100, 110, 120, 190, color);   // draw_line \u753b\u7ebf \u8d77\u59cb\u70b9(80,70) -&gt; \u7ec8\u70b9(100,110\uff09 \u4e24\u4e2a\u70b9\uff0c color \u989c\u8272\n        img.display(\"draw_line\");\n    }\n    else{\n        cout &lt;&lt; \"OK, You dont want to do that\" &lt;&lt; std::endl;\n    }\n\n\n\n\n    system(\"pause\");\n    // window.display(\"My first CImg Code\");  //\u7a97\u53e3\u6807\u9898\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>It's my code and it can be built well.\nWhen it comes to img.draw_line();\nWe must close the CImg's window so it can jump to the next phrase, Can i skip close that?\nMy aim is to write a c++ project to interpreter the Logo Language.\nJust want to do the same like Turtle drawing. And i just start to test the CImg.h</p>\n"}, {"tags": ["c++", "rgb", "color-space", "bgr", "lab-color-space"], "comments": [{"owner": {"reputation": 1119, "user_id": 4720025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/73d27b6dbcdd1c6ee0853d2aa29a96b2?s=128&d=identicon&r=PG", "display_name": "Arda Aytekin", "link": "https://stackoverflow.com/users/4720025/arda-aytekin"}, "edited": false, "score": 0, "creation_date": 1520423158, "post_id": 49150250, "comment_id": 85306407, "body": "on an image segmentation project I have worked, I have used different reference values. We have used D65 / CIE-1931 with <code>Xo = 95.047</code>, <code>Yo = 100.000</code> and <code>Zo = 108.883</code>. Could you try with those reference values and let me know if they work? Moreover, there is a function called <code>cbrt</code> if you <code>#include &lt;cmath&gt;</code>, that might be better to use for taking cubic roots."}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1520426061, "post_id": 49150250, "comment_id": 85308308, "body": "What is the color space of the BGR input?"}, {"owner": {"reputation": 25, "user_id": 8225956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca7fd66be9872496912dbdd7567f83d?s=128&d=identicon&r=PG&f=1", "display_name": "Hanaa Ibrahim", "link": "https://stackoverflow.com/users/8225956/hanaa-ibrahim"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1520544017, "post_id": 49150250, "comment_id": 85370914, "body": "@JiveDadson Thanks alot for your comment. As far as I can tell it is sRGB."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8225956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca7fd66be9872496912dbdd7567f83d?s=128&d=identicon&r=PG&f=1", "display_name": "Hanaa Ibrahim", "link": "https://stackoverflow.com/users/8225956/hanaa-ibrahim"}, "edited": false, "score": 0, "creation_date": 1520543805, "post_id": 49151306, "comment_id": 85370816, "body": "Thanks a lot for your help. @Arda I used &#39;cbrt&#39; and double casting. Actually, the problem is in both the reference point and the values of BGR channels. I have a value ranging from 0 to 255 for each channel that is directly converted to XYZ through matrix multiplication. Solely changing the reference point results in a very bright image. However, when I add the operations that you apply to the RGB values before performing matrix multiplication the resulting image becomes similar to the original one. Could you please tell me more about these operations?"}, {"owner": {"reputation": 1119, "user_id": 4720025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/73d27b6dbcdd1c6ee0853d2aa29a96b2?s=128&d=identicon&r=PG", "display_name": "Arda Aytekin", "link": "https://stackoverflow.com/users/4720025/arda-aytekin"}, "reply_to_user": {"reputation": 25, "user_id": 8225956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca7fd66be9872496912dbdd7567f83d?s=128&d=identicon&r=PG&f=1", "display_name": "Hanaa Ibrahim", "link": "https://stackoverflow.com/users/8225956/hanaa-ibrahim"}, "edited": false, "score": 0, "creation_date": 1520545421, "post_id": 49151306, "comment_id": 85371696, "body": "@HanaaIbrahim, I have edited my answer. Please have a look at the last paragraph. Basically, after fixing the integer division bug in your code, what you need is to decide on the set of reference values for XYZ. These are needed to convert properly from RGB to Lab. I do not know much about the details, but on the webpage I have listed, you can find a set of reference values for different lighting conditions together with the proper calculations. If you have found the answer useful and think it has solved your problem, please select it as the correct answer :)"}], "tags": [], "owner": {"reputation": 1119, "user_id": 4720025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/73d27b6dbcdd1c6ee0853d2aa29a96b2?s=128&d=identicon&r=PG", "display_name": "Arda Aytekin", "link": "https://stackoverflow.com/users/4720025/arda-aytekin"}, "is_accepted": true, "score": 0, "last_activity_date": 1520545292, "last_edit_date": 1520545292, "creation_date": 1520423632, "answer_id": 49151306, "question_id": 49150250, "link": "https://stackoverflow.com/questions/49150250/convert-bgr-to-lab-without-opencv/49151306#49151306", "title": "convert BGR to Lab without OpenCV", "body": "<p>Your code has a bug in <code>double F(double input)</code>. It does not work as intended because of the integer division you have. You might be willing to change the function to read something like below. Note the <code>double</code> castings to make the divisions work in the floating-point domain, and the use of <code>cbrt</code> instead of <code>pow</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;cmath&gt;\n\ndouble F(double input) // function f(...), which is used for defining L, a and b\n                       // changes within [4/29,1]\n{\n  if (input &gt; 0.008856)\n    return std::cbrt(input); // maximum 1 --- prefer cbrt to pow for cubic root\n  else\n    return ((double(841) / 108) * input +\n            double(4) / 29); // 841/108 = 29*29/36*16\n}\n</code></pre>\n\n<p>Then, another problem could be the reference values you are using for the XYZ space. We have the below reference values, coming from D65 / CIE-1931:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>double Xo = 95.047;\ndouble Yo = 100;\ndouble Zo = 108.883;\n</code></pre>\n\n<p>Then, our <code>RGBtoXYZ</code> conversion was working like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class float_t&gt; struct Convert&lt;XYZ&lt;float_t&gt;&gt; {\n  template &lt;class real_t&gt; static XYZ&lt;float_t&gt; from(const RGB&lt;real_t&gt; &amp;rhs) {\n    // Assume RGB has the type invariance satisfied, i.e., channels \\in [0,255]\n    float_t var_R = float_t(rhs.comp1()) / 255;\n    float_t var_G = float_t(rhs.comp2()) / 255;\n    float_t var_B = float_t(rhs.comp3()) / 255;\n\n    var_R = (var_R &gt; 0.04045) ? std::pow((var_R + 0.055) / 1.055, 2.4)\n                              : var_R / 12.92;\n    var_G = (var_G &gt; 0.04045) ? std::pow((var_G + 0.055) / 1.055, 2.4)\n                              : var_G / 12.92;\n    var_B = (var_B &gt; 0.04045) ? std::pow((var_B + 0.055) / 1.055, 2.4)\n                              : var_B / 12.92;\n\n    var_R *= 100;\n    var_G *= 100;\n    var_B *= 100;\n\n    return XYZ&lt;float_t&gt;{var_R * float_t(0.4124) + var_G * float_t(0.3576) +\n                            var_B * float_t(0.1805),\n                        var_R * float_t(0.2126) + var_G * float_t(0.7152) +\n                            var_B * float_t(0.0722),\n                        var_R * float_t(0.0193) + var_G * float_t(0.1192) +\n                            var_B * float_t(0.9505)};\n  }\n};\n</code></pre>\n\n<p>where <code>RGB</code> was assumed to have its channels inside the valid range, as stated in the comment. Then, the <code>XYZtoLAB</code> function we have is the same except for the <code>cbrt</code> and reference value changes.</p>\n\n<p><strong>EDIT.</strong> Above numbers are obtained from <a href=\"http://www.easyrgb.com/en/math.php\" rel=\"nofollow noreferrer\">EasyRGB's Math</a> page. You can find the conversion from sRGB to XYZ and XYZ to Lab on the page, with a table of XYZ reference values. What we used was the set for \"Daylight, sRGB, Adobe RGB.\"</p>\n"}], "owner": {"reputation": 25, "user_id": 8225956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ca7fd66be9872496912dbdd7567f83d?s=128&d=identicon&r=PG&f=1", "display_name": "Hanaa Ibrahim", "link": "https://stackoverflow.com/users/8225956/hanaa-ibrahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1655, "favorite_count": 0, "accepted_answer_id": 49151306, "answer_count": 1, "score": 0, "last_activity_date": 1520545292, "creation_date": 1520420319, "question_id": 49150250, "link": "https://stackoverflow.com/questions/49150250/convert-bgr-to-lab-without-opencv", "title": "convert BGR to Lab without OpenCV", "body": "<p>With little experience in color spaces, I used the following code to convert BGR image (array of unsigned characters where each channel ranges from 0 to 255) to lab color space:</p>\n\n<pre><code>double F(double input) // function f(...), which is used for defining L, a and b changes within [4/29,1]\n{\n    if (input &gt; 0.008856)\n        return (pow(input, 0.333333333)); // maximum 1\n    else\n        return ((841/108)*input + 4/29);  //841/108 = 29*29/36*16\n}\n\n// RGB to XYZ\nvoid RGBtoXYZ(uchar R, uchar G, uchar B, double &amp;X, double &amp;Y, double &amp;Z)\n{\n    // RGB Working Space: sRGB \n    // Reference White: D65\n    X = 0.412453*R + 0.357580*G + 0.189423*B; // maximum value = 0.959456 * 255 = 244.66128\n    Y = 0.212671*R + 0.715160*G + 0.072169*B; // maximum value = 1 * 255 = 255\n    Z = 0.019334*R + 0.119193*G + 0.950227*B; //  maximum value = 1.088754 * 255 = 277.63227\n}\n\n// XYZ to CIELab\nvoid XYZtoLab(double X, double Y, double Z, double &amp;L, double &amp;a, double &amp;b)\n{\n    const double Xo = 244.66128; // reference white\n    const double Yo = 255.0;\n    const double Zo = 277.63227;\n    L = 116 * F(Y / Yo) - 16; // maximum L = 100\n    a = 500 * (F(X / Xo) - F(Y / Yo)); // maximum \n    b = 200 * (F(Y / Yo) - F(Z / Zo));\n}\n\n// RGB to CIELab\nvoid RGBtoLab(double R, double G, double B, double &amp;L, double &amp;a, double &amp;b)\n{\n    double X, Y, Z;\n    RGBtoXYZ(R, G, B, X, Y, Z);\n    XYZtoLab(X, Y, Z, L, a, b);\n}\n</code></pre>\n\n<p>I have re-converted the resulting lab image to BGR (using cvtcolor) to display it using OpenCV using the following code (I don't want to do the conversion using OpenCV, I have just used it to display the results. Basically I wanted to understand how color space conversion works):</p>\n\n<pre><code>// Lchannel, Achannel, Bchannel are arrays of type double\ncv::Mat temp64bitL(height, width, CV_64FC1, Lchannel);\ncv::Mat temp32bitL;\ntemp64bitL.convertTo(temp32bitL, CV_32F);\n\ncv::Mat temp64bitA(height, width, CV_64FC1, Achannel);\ncv::Mat temp32bitA;\ntemp64bitA.convertTo(temp32bitA, CV_32F);\ncv::Mat temp64bitB(height, width, CV_64FC1, Bchannel);\ncv::Mat temp32bitB;\ntemp64bitB.convertTo(temp32bitB, CV_32F);\n    cv::Mat chan[3] = {\n    temp32bitL, temp32bitA, temp32bitB\n};\ncv::Mat merged;\ncv::merge(chan, 3, merged);\ncv::Mat BGRImage;\ncv::cvtColor(merged, BGRImage, CV_Lab2BGR, 3);\n</code></pre>\n\n<p>However, <a href=\"https://i.stack.imgur.com/MQlPq.jpg\" rel=\"nofollow noreferrer\">the computed image</a> is different from <a href=\"https://i.stack.imgur.com/L1IFm.jpg\" rel=\"nofollow noreferrer\">the original image</a>. is that due to a problem in the code?</p>\n"}, {"tags": ["c++", "string", "pointers", "char", "pass-by-reference"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 6, "creation_date": 1520420283, "post_id": 49150182, "comment_id": 85304627, "body": "Read a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">good C++ book</a>. For the time being, forget about pointers and use <code>std::vector</code> and <code>std::string</code> instead"}, {"owner": {"reputation": 1603, "user_id": 6048373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d610d6bb4ae631578ec03de40ae8f8b7?s=128&d=identicon&r=PG&f=1", "display_name": "Vishaal Shankar", "link": "https://stackoverflow.com/users/6048373/vishaal-shankar"}, "edited": false, "score": 0, "creation_date": 1520420772, "post_id": 49150182, "comment_id": 85304980, "body": "Although there are multiple problems in the code, I ran your code in VS2017 and it did print &quot;abc&quot;. So, I&#39;m wondering which null string are you talking about ?"}, {"owner": {"reputation": 4255, "user_id": 319826, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TLA0j.jpg?s=128&g=1", "display_name": "kometen", "link": "https://stackoverflow.com/users/319826/kometen"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 2, "creation_date": 1520420901, "post_id": 49150182, "comment_id": 85305059, "body": "Yes, @PasserBy is correct. Either use C++ with all its modern features or use C."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 1603, "user_id": 6048373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d610d6bb4ae631578ec03de40ae8f8b7?s=128&d=identicon&r=PG&f=1", "display_name": "Vishaal Shankar", "link": "https://stackoverflow.com/users/6048373/vishaal-shankar"}, "edited": false, "score": 1, "creation_date": 1520420908, "post_id": 49150182, "comment_id": 85305064, "body": "@VishaalShankar It&#39;s called undefined behaviour for a reason"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1520422185, "post_id": 49150182, "comment_id": 85305798, "body": "I think you were told in your previous question that it is almost always wrong to use casts. Well, its wrong this time as well."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1520420727, "last_edit_date": 1520420727, "creation_date": 1520420295, "answer_id": 49150239, "question_id": 49150182, "link": "https://stackoverflow.com/questions/49150182/how-to-use-call-by-reference-to-get-value-of-a-char-type-variable-from-a-funct/49150239#49150239", "title": "How to use call by reference to get value of a char** type variable from a function in C++?", "body": "<p>You have (at least) <em>two</em> problems:</p>\n\n<ol>\n<li>The first is that you make <code>p</code> point to the <em>local variable</em> <code>k</code>.</li>\n<li>The second is more subtle, and is that you <em>reassign</em> <code>k</code> losing the original memory you allocated and make <code>k</code> point to.</li>\n</ol>\n\n<hr>\n\n<p>Then the usual spiel about never using arrays of <code>char</code> or pointers to <code>char</code> for strings, when you have <code>std::string</code>. And that you should never use <code>malloc</code> in C++, only <code>new</code> or <code>new[]</code>. And if you need <code>new[]</code> consider using <code>std::vector</code> instead (except for strings of course).</p>\n"}, {"comments": [{"owner": {"reputation": 351, "user_id": 3552519, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9086ed4dda4d5f1500ef449adcd62b4c?s=128&d=identicon&r=PG&f=1", "display_name": "user3552519", "link": "https://stackoverflow.com/users/3552519/user3552519"}, "edited": false, "score": 0, "creation_date": 1520425603, "post_id": 49150897, "comment_id": 85308012, "body": "Thanks for your help"}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1520422414, "creation_date": 1520422414, "answer_id": 49150897, "question_id": 49150182, "link": "https://stackoverflow.com/questions/49150182/how-to-use-call-by-reference-to-get-value-of-a-char-type-variable-from-a-funct/49150897#49150897", "title": "How to use call by reference to get value of a char** type variable from a function in C++?", "body": "<p>There is <strong>NO WAY</strong> to write code like this that follows any sort of standards of good programming. If you are serious about learning how to program you should abandon this mess and rewrite your code to do things the correct way. This is sort of mess is never necessary, even when interfacing with legacy code.</p>\n\n<p>However the following 'works'</p>\n\n<pre><code>void func(char**&amp; p) {\n    p = new char*;\n    *p = new char[8];\n    strcpy(*p, \"abc\");\n}\n</code></pre>\n\n<p>And take note, I didn't need to use a cast.</p>\n"}], "owner": {"reputation": 351, "user_id": 3552519, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9086ed4dda4d5f1500ef449adcd62b4c?s=128&d=identicon&r=PG&f=1", "display_name": "user3552519", "link": "https://stackoverflow.com/users/3552519/user3552519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520422414, "creation_date": 1520420139, "last_edit_date": 1520420267, "question_id": 49150182, "link": "https://stackoverflow.com/questions/49150182/how-to-use-call-by-reference-to-get-value-of-a-char-type-variable-from-a-funct", "title": "How to use call by reference to get value of a char** type variable from a function in C++?", "body": "<p>I am trying to print the following using the code as:</p>\n\n<pre><code>int main() {\n        char p[] = \"hello\";\n        char*t = p;\n        char**b = &amp;t;\n        std::string s = b[0];\n        cout&lt;&lt;\"string=\"&lt;&lt;s&lt;&lt;\" b[0]=\"&lt;&lt;b[0];\n}\n</code></pre>\n\n<p>The output I get is as expected:</p>\n\n<blockquote>\n  <p>string=hello b[0]=hello</p>\n</blockquote>\n\n<p>Now the same thing I want to achieve using a function call in which I pass a variable by reference as:</p>\n\n<pre><code>void func(char**&amp; p) {\n        char *k = (char*)malloc(8*sizeof(char));\n        k = (char*)\"abc\";\n        p = &amp;k;\n}\n\nint main() {\n        char**j = NULL;\n        func(j);\n        std::string s1 = j[0];\n        cout&lt;&lt;s1;\n}\n</code></pre>\n\n<p>Now I am getting a null string. What could be the reason and how to solve it ?</p>\n"}, {"tags": ["c++", "cmake", "visual-studio-2017", "conan"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 3, "creation_date": 1520421233, "post_id": 49150146, "comment_id": 85305261, "body": "According to Stack Overflow rules, the code should be in the question post, not linked. While content of <a href=\"https://github.com/conan-io/cmake-conan/blob/develop/conan.cmake\" rel=\"nofollow noreferrer\">conan.cmake</a> can be treated as well-known, content of your <code>CMakeLists.txt</code> is not, so it should be added into the question post."}, {"owner": {"reputation": 3796, "user_id": 3215383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yAGNQ.jpg?s=128&g=1", "display_name": "drodri", "link": "https://stackoverflow.com/users/3215383/drodri"}, "edited": false, "score": 1, "creation_date": 1520424553, "post_id": 49150146, "comment_id": 85307318, "body": "It is important also that you specify the steps you followed. Likely you did a <code>conan install</code> method to get the dependencies, but where? With which settings? The CMakeLists.txt will be looking for the generated <code>conanbuildinfo.cmake</code> generally in the <code>${CMAKE_BINARY_DIR}</code>  folder, but with the CMake integration, VS puts the binary-dir folder elsewhere. I&#39;ll suggest printing <code>${CMAKE_BINARY_DIR}</code> in the CMakeLists.txt, then moving to that folder to execute the <code>conan install</code>. Also, consider submitting issues to github: <a href=\"https://github.com/conan-io/conan/issues\" rel=\"nofollow noreferrer\">github.com/conan-io/conan/issues</a>."}, {"owner": {"reputation": 339, "user_id": 5919240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v6b7V.jpg?s=128&g=1", "display_name": "Noki", "link": "https://stackoverflow.com/users/5919240/noki"}, "edited": false, "score": 1, "creation_date": 1520440498, "post_id": 49150146, "comment_id": 85318560, "body": "Since you are calling conan_cmake_run with the flag CMAKE_TARGETS You might try to use target_link_libraries(CppLinuxVS CONAN_PKG::Poco)  instead of target_link_libraries(CppLinuxVS ${CONAN_LIBS}) (Be careful you used ${CONAN_LIST}"}, {"owner": {"reputation": 339, "user_id": 5919240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v6b7V.jpg?s=128&g=1", "display_name": "Noki", "link": "https://stackoverflow.com/users/5919240/noki"}, "edited": false, "score": 0, "creation_date": 1520444353, "post_id": 49150146, "comment_id": 85320998, "body": "Additionally, you can&#39;t use CMake Targets  with CMake &lt; 3.1.2 so you might change your minimum required by 3.1.2 or use ${CONAN_LIBS} without CMAKE_TARGETS flags . I can provide you a complete answer if you like."}, {"owner": {"reputation": 391, "user_id": 4405493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbafe7af73abdda55f6c607d0b11c008?s=128&d=identicon&r=PG&f=1", "display_name": "Avner Gidron", "link": "https://stackoverflow.com/users/4405493/avner-gidron"}, "edited": false, "score": 0, "creation_date": 1590759797, "post_id": 49150146, "comment_id": 109810568, "body": "Any chance you solved it? I&#39;m Facing same problem"}], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 4162418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc43d4e68f9e52558a71cf80fc7df5b7?s=128&d=identicon&r=PG&f=1", "display_name": "nunob", "link": "https://stackoverflow.com/users/4162418/nunob"}, "edited": false, "score": 0, "creation_date": 1520504956, "post_id": 49160418, "comment_id": 85346772, "body": "Thanks for the tips @solvingJ I was able to clone your repo and verified that it works fine, but your setup is for Windows builds and not Linux, as I was trying to do. It seems the issues I&#39;m having are related to that because, as soon as I changed the compilation to target Linux, even your repo stopped working. But thanks the same. Your repo has a lot of useful info."}], "tags": [], "owner": {"reputation": 1130, "user_id": 3927381, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/801e5e2a7b6e032c3ce07b9a9f7e7f8c?s=128&d=identicon&r=PG", "display_name": "solvingJ", "link": "https://stackoverflow.com/users/3927381/solvingj"}, "is_accepted": false, "score": 1, "last_activity_date": 1520453375, "creation_date": 1520453375, "answer_id": 49160418, "question_id": 49150146, "link": "https://stackoverflow.com/questions/49150146/dependency-management-using-conan-with-a-cmake-project-under-vs2017/49160418#49160418", "title": "Dependency management using Conan with a CMake project under VS2017", "body": "<p>@lusocoding here is a project i setup to demonstrate a working combination of VS -> Cmake -> Conan. </p>\n\n<p><a href=\"https://github.com/solvingj/vs-cmake-conan-demo\" rel=\"nofollow noreferrer\">https://github.com/solvingj/vs-cmake-conan-demo</a></p>\n\n<p>One of the critical parts (as I recall) was CMakeSettings.json, which is supposed to be a machine-specific setting that you don't typically commit to git. However, at the time, there were customizations (i think it was the CLI flags passed to CMake) which i had to add to to make it work. So, i committed that file to git for the demonstration. </p>\n\n<p>See if you can clone and use the project as is, and then slowly compare with your project to find differences. </p>\n\n<p>Hope this helps. </p>\n"}], "owner": {"reputation": 532, "user_id": 4162418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc43d4e68f9e52558a71cf80fc7df5b7?s=128&d=identicon&r=PG&f=1", "display_name": "nunob", "link": "https://stackoverflow.com/users/4162418/nunob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3328, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1520453375, "creation_date": 1520420054, "last_edit_date": 1520445423, "question_id": 49150146, "link": "https://stackoverflow.com/questions/49150146/dependency-management-using-conan-with-a-cmake-project-under-vs2017", "title": "Dependency management using Conan with a CMake project under VS2017", "body": "<p>I'm trying to setup a development environment for C++ to compile under Linux x64 using CMake integration with VS2017. To better manage dependencies I choose to use Conan but I'm pretty new to this software and I'm wondering what's the best way to have VS2017 to recognize the dependencies of the project. </p>\n\n<p>For example, I've used Conan to install the POCO library for C++ but when I open the Main.cpp file it doesn't recognise the header files location and I'm not really sure where to add those paths. </p>\n\n<p><img src=\"https://user-images.githubusercontent.com/114126/37088464-579ef75c-21f5-11e8-8ab7-f575eb97e325.png\" alt=\"image\"></p>\n\n<p>Can anyone give some hints to solve this? </p>\n\n<p>If needed all the source files are in my Github repo <a href=\"https://github.com/lusocoding/CppLinuxVS\" rel=\"nofollow noreferrer\">CppLinuxVS</a>. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As per comments on this post, below you can find the contents of the files: </p>\n\n<p><strong>CMakeLists.txt</strong></p>\n\n<pre><code>project(CppLinuxVS)\ncmake_minimum_required(VERSION 2.8.12)\nadd_definitions(\"-std=c++11\")\n\n# Download automatically, you can also just copy the conan.cmake file\nif(NOT EXISTS \"${CMAKE_BINARY_DIR}/conan.cmake\")\n   message(STATUS \"Downloading conan.cmake from https://github.com/conan-io/cmake-conan\")\n   file(DOWNLOAD \"https://raw.githubusercontent.com/conan-io/cmake-conan/v0.8/conan.cmake\"\n                 \"${CMAKE_BINARY_DIR}/conan.cmake\")\nendif()\n\ninclude(${CMAKE_BINARY_DIR}/conan.cmake)\nconan_cmake_run(CONANFILE conanfile.txt\n                BASIC_SETUP CMAKE_TARGETS\n                BUILD missing)\n\nadd_executable(CppLinuxVS Main.cpp)\ntarget_link_libraries(CppLinuxVS ${CONAN_LIST})\n</code></pre>\n\n<p><strong>conanfile.txt</strong></p>\n\n<pre><code>[requires]\nPoco/1.8.0@pocoproject/stable\n\n[generators]\ncmake\n</code></pre>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Output of CMake inside VS2017 after downloading the conan.cmake file into the project instead of having the download specified in CMakeLists.txt. Also updated the CMakeLists.txt to require CMake 3.1.2 as per suggestion in the comments.</p>\n\n<pre><code>1&gt; 17:52:57: Copying files to remote machine...\n1&gt; 17:53:00: Finished copying files (elapsed time 00h:00m:02s:799ms).\n1&gt; /usr/local/bin/cmake -G \"Unix Makefiles\"  -DCMAKE_BUILD_TYPE=\"Debug\" \"\\var\\tmp\\src\\03967bd6-44be-4e31-b449-a34a45d7109d\\Linux-Debug\"\n1&gt; -- Conan ** WARNING** : This detection of settings from cmake is experimental and incomplete. Please check 'conan.cmake' and contribute\n1&gt; -- Conan executing: conan install /var/tmp/src/03967bd6-44be-4e31-b449-a34a45d7109d/Linux-Debug/conanfile.txt -g cmake -s build_type=Debug -s os=Linux -s compiler=gcc -s compiler.version=5 -s compiler.libcxx=libstdc++11 --build=missing\n1&gt; PROJECT: Installing /var/tmp/src/03967bd6-44be-4e31-b449-a34a45d7109d/Linux-Debug/conanfile.txt\n1&gt; Requirements\n1&gt;     OpenSSL/1.0.2l@conan/stable from 'conan-center'\n1&gt;     Poco/1.8.0@pocoproject/stable from 'conan-center'\n1&gt;     zlib/1.2.11@conan/stable from 'conan-center'\n1&gt; Packages\n1&gt;     OpenSSL/1.0.2l@conan/stable:f68b4e006611addfaec53a2f3d5c0e6b0406266d\n1&gt;     Poco/1.8.0@pocoproject/stable:e3d8f1070a587658375103e87fd35c8b5c372b6e\n1&gt;     zlib/1.2.11@conan/stable:15c6f8a55cbf8b39b86ca055629a91be1b2d3cf5\n1&gt; \n1&gt; zlib/1.2.11@conan/stable: Already installed!\n1&gt; OpenSSL/1.0.2l@conan/stable: Already installed!\n1&gt; Poco/1.8.0@pocoproject/stable: Already installed!\n1&gt; PROJECT: Generator cmake created conanbuildinfo.cmake\n1&gt; PROJECT: Generator txt created conanbuildinfo.txt\n1&gt; PROJECT: Generated conaninfo.txt\n1&gt; -- Conan: Loading conanbuildinfo.cmake\n1&gt; -- Current conanbuildinfo.cmake directory: /var/tmp/build/03967bd6-44be-4e31-b449-a34a45d7109d/build/Linux-Debug\n1&gt; -- Conan: Compiler GCC&gt;=5, checking major version 5\n1&gt; -- Conan: Checking correct version: 5\n1&gt; -- Conan: Using cmake targets configuration\n1&gt; -- Library PocoUtild found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoUtild.a\n1&gt; -- Library PocoMongoDBd found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoMongoDBd.a\n1&gt; -- Library PocoNetd found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoNetd.a\n1&gt; -- Library PocoNetSSLd found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoNetSSLd.a\n1&gt; -- Library PocoCryptod found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoCryptod.a\n1&gt; -- Library PocoDatad found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoDatad.a\n1&gt; -- Library PocoDataSQLited found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoDataSQLited.a\n1&gt; -- Library PocoZipd found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoZipd.a\n1&gt; -- Library PocoXMLd found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoXMLd.a\n1&gt; -- Library PocoJSONd found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoJSONd.a\n1&gt; -- Library PocoFoundationd found /root/.conan/data/Poco/1.8.0/pocoproject/stable/package/e3d8f1070a587658375103e87fd35c8b5c372b6e/lib/libPocoFoundationd.a\n1&gt; -- Library pthread not found in package, might be system one\n1&gt; -- Library dl not found in package, might be system one\n1&gt; -- Library rt not found in package, might be system one\n1&gt; -- Library ssl found /root/.conan/data/OpenSSL/1.0.2l/conan/stable/package/f68b4e006611addfaec53a2f3d5c0e6b0406266d/lib/libssl.a\n1&gt; -- Library crypto found /root/.conan/data/OpenSSL/1.0.2l/conan/stable/package/f68b4e006611addfaec53a2f3d5c0e6b0406266d/lib/libcrypto.a\n1&gt; -- Library dl not found in package, might be system one\n1&gt; -- Library z found /root/.conan/data/zlib/1.2.11/conan/stable/package/15c6f8a55cbf8b39b86ca055629a91be1b2d3cf5/lib/libz.a\n1&gt; -- Conan: Adjusting default RPATHs Conan policies\n1&gt; -- Conan: Adjusting language standard\n1&gt; -- Configuring done\n1&gt; -- Generating done\n1&gt; -- Build files have been written to: /var/tmp/build/03967bd6-44be-4e31-b449-a34a45d7109d/build/Linux-Debug\n1&gt; Starting CMake target info extraction ...\n1&gt; Extracted source files and headers.\n1&gt; Extracted global settings.\n1&gt; Extracted code model.\n1&gt; Collating data ...\n1&gt; Target info extraction done.\n</code></pre>\n\n<p><strong>CMakeLists.txt updated</strong></p>\n\n<pre><code>project(CppLinuxVS)\ncmake_minimum_required(VERSION 3.1.2)\nadd_definitions(\"-std=c++11\")\n\ninclude(conan.cmake)\nconan_cmake_run(CONANFILE conanfile.txt\n                BASIC_SETUP CMAKE_TARGETS\n                BUILD missing)\n\nadd_executable(CppLinuxVS Main.cpp)\ntarget_link_libraries(CppLinuxVS ${CONAN_LIBS})\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "opencv"], "comments": [{"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520430718, "post_id": 49150066, "comment_id": 85311519, "body": "Why don&#39;t you show the image after findContours() to see the contours yourself rather than only the size of them?"}, {"owner": {"reputation": 67, "user_id": 9172914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d9c57cd8f828738b1c76081e1b91450?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Maximilian", "link": "https://stackoverflow.com/users/9172914/johannes-maximilian"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520437434, "post_id": 49150066, "comment_id": 85316380, "body": "contours is a vector &lt;vector &lt;point&gt;&gt; how can i show this with opencv?"}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 1, "creation_date": 1520437936, "post_id": 49150066, "comment_id": 85316749, "body": "Yes you can use cv::drawContours which can take your vector of vectors and draw it on input image"}, {"owner": {"reputation": 67, "user_id": 9172914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d9c57cd8f828738b1c76081e1b91450?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Maximilian", "link": "https://stackoverflow.com/users/9172914/johannes-maximilian"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1520494165, "post_id": 49150066, "comment_id": 85340292, "body": "ok. i solved the problem by installing opencv again. I have no Idea why it didn&#39;t work before. The size of the biggest contour vector now is around 25."}], "owner": {"reputation": 67, "user_id": 9172914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d9c57cd8f828738b1c76081e1b91450?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Maximilian", "link": "https://stackoverflow.com/users/9172914/johannes-maximilian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520420185, "creation_date": 1520419791, "last_edit_date": 1520420185, "question_id": 49150066, "link": "https://stackoverflow.com/questions/49150066/what-is-a-reasonable-size-of-a-contours-vector-opencv", "title": "What is a reasonable size of a contours vector (openCV)?", "body": "<p>I'm trying to track a small object with OpenCV and a Basler Camera (resolution 492 x 658), but i get undefined Behavior when I run the code and i think it might have something to do with the contours. </p>\n\n<p>I'm using <code>findContours()</code>. The object I'm tracking is approx <code>15 x 15 pixels</code>. The size I get for the biggest contours vector is around <code>500000000</code>. This seems to be too big.</p>\n\n<p>When i use <code>canny</code> before <code>findContours</code> the size gets reduced to <code>170000000</code>. Which is a bit smaller but still appears to be too big. </p>\n\n<p>What would be a reasonable size of a contour vector tracking a 15 x 15 pixel object?  </p>\n\n<p>Platform: Windows 7, Visual Studio 2017</p>\n"}, {"tags": ["c++", "function", "c++11", "templates", "callback"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1520420187, "post_id": 49149934, "comment_id": 85304574, "body": "Is that <code>template &lt;class T&gt;</code> intentional?"}, {"owner": {"reputation": 185, "user_id": 9456080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11a8c4b2336f5a3461c510c153452b9?s=128&d=identicon&r=PG", "display_name": "\u054e\u0561\u0580\u0564\u0561\u0576 \u0533\u0580\u056b\u0563\u0578\u0580\u0575\u0561\u0576", "link": "https://stackoverflow.com/users/9456080/%d5%8e%d5%a1%d6%80%d5%a4%d5%a1%d5%b6-%d4%b3%d6%80%d5%ab%d5%a3%d5%b8%d6%80%d5%b5%d5%a1%d5%b6"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520420314, "post_id": 49149934, "comment_id": 85304651, "body": "Do you mean why class is written instead of typename ?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1520420395, "post_id": 49149934, "comment_id": 85304706, "body": "No, I mean if <code>int get_num(int k)</code> is supposed to be a function or a template. It looks a bit like it was intended as a regular function."}, {"owner": {"reputation": 1884, "user_id": 2747962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JbKoL.jpg?s=128&g=1", "display_name": "Darklighter", "link": "https://stackoverflow.com/users/2747962/darklighter"}, "edited": false, "score": 0, "creation_date": 1520427158, "post_id": 49149934, "comment_id": 85309041, "body": "@\u054e\u0561\u0580\u0564\u0561\u0576\u0533\u0580\u056b\u0563\u0578\u0580\u0575\u0561\u0576 the 3rd line (actually the first 3) lines don\u2019t look like they belong here, do they?"}], "answers": [{"comments": [{"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1520420511, "post_id": 49150015, "comment_id": 85304787, "body": "Maybe, it is not an error. You need to use 2 different types in case: <code>std::string get_num (double a) { \treturn &quot;this is a string &quot; + std::to_string(a); }</code>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 0, "creation_date": 1520420731, "post_id": 49150015, "comment_id": 85304952, "body": "@SmitYcyken which is why <code>F</code> is a template parameter with a default, and not <code>template&lt;typename T&gt; void function(T(*callback)(T), T arg)</code>"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1520420531, "last_edit_date": 1520420531, "creation_date": 1520419623, "answer_id": 49150015, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function/49150015#49150015", "title": "How to pass the specific callback to a template function?", "body": "<p>One problem is that you have different types for return-type and argument-type for <code>function</code>, but in reality both are the same.</p>\n\n<p>That means you could do something like</p>\n\n<pre><code>template&lt;typename T, typename F = T(T)&gt;\nvoid function(F callback, T arg)\n{\n    callback(arg);\n}\n</code></pre>\n\n<p>The template argument <code>F</code> is just to simplify the callback argument declaration.</p>\n"}, {"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520420633, "post_id": 49150096, "comment_id": 85304884, "body": "Nitpicking, but naming your argument the same as the function it is in, is kind of confusing."}], "tags": [], "owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "is_accepted": false, "score": 1, "last_activity_date": 1520420832, "last_edit_date": 1592644375, "creation_date": 1520419894, "answer_id": 49150096, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function/49150096#49150096", "title": "How to pass the specific callback to a template function?", "body": "<p>You have to specify the type of function</p>\n<pre><code>#include &lt;iostream&gt; \n#include &lt;string&gt;\nint get_num(int k) {\n    return k + 3;\n}\n\nfloat get_num(float k) {\n    return k + 3;\n}\n\nstd::string get_num (double a)\n{\n    return &quot;this is a string &quot; + std::to_string(a);\n}\n\ntemplate &lt;class T1, class T2&gt;\nusing callback = T1(*)(T2);\n\n\ntemplate &lt;class T1, class T2&gt;\nvoid function(callback&lt;T1, T2&gt; function, T2 arg) {\n    std:: cout &lt;&lt; function(arg) &lt;&lt; std::endl;\n}\n\nint main() {\n    // your code goes here\n    function&lt;int, int&gt;(get_num, 3);\n\n    function&lt;std::string, double&gt;(get_num, 3);\n\n    system(&quot;pause&quot;);\n    return 0;\n}\n</code></pre>\n<p>Why 2 different template arguments? -The OP's question is not about optimization, it is about</p>\n<h1>How to pass the specific callback to a template function?</h1>\n<p>So, this is one of many implementations, solving the specific error.</p>\n"}, {"tags": [], "owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "is_accepted": false, "score": 0, "last_activity_date": 1520419917, "creation_date": 1520419917, "answer_id": 49150104, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function/49150104#49150104", "title": "How to pass the specific callback to a template function?", "body": "<p>I allowed myself to simplify a bit Your code. This should work fine:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;class T&gt;\nT get_num(T k) {\n    return k + 3;\n}\n\ntemplate &lt;class T1, class T2&gt;\nvoid function(T1 callback, T2 arg) {\n    callback(arg);\n}\n\nint main() {\n    function(get_num&lt;int&gt;, 3);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1520420606, "post_id": 49150114, "comment_id": 85304862, "body": "<code>typename</code> and <code>class</code> are completely interchangeable for declaring template type parameters"}], "tags": [], "owner": {"reputation": 65, "user_id": 4439032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bv3zI.jpg?s=128&g=1", "display_name": "tianshilei1992", "link": "https://stackoverflow.com/users/4439032/tianshilei1992"}, "is_accepted": false, "score": 1, "last_activity_date": 1520419945, "creation_date": 1520419945, "answer_id": 49150114, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function/49150114#49150114", "title": "How to pass the specific callback to a template function?", "body": "<p>The following code will work:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate&lt;typename T&gt;\nint get_num(int k) {\n    return k + 3;\n}\n\nfloat get_num(float k) {\n    return k + 3;\n}\n\n\ntemplate&lt;typename T1, typename T2&gt; // Maybe here you want the `typename`, not the `class`\nvoid f(T1 (*callback)(T2), T2 arg) {\n    callback(arg);\n}\n\nint main() {\n    // your code goes here\n    f(get_num&lt;int&gt;, 3); // The key point is here!\n    return 0;\n}\n</code></pre>\n\n<p>The reason you get the compiling error is the compiler could not deduce the type <code>T</code> if you just use <code>get_num</code>, because all the arguments are nothing with the type <code>T</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520420448, "post_id": 49150245, "comment_id": 85304744, "body": "Doesn&#39;t compile because it cannot deduce <code>T</code> for <code>get_num</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1520421069, "post_id": 49150245, "comment_id": 85305161, "body": "@nwp i missed the <code>template&lt;class T&gt;</code> and I am still not sure if it is there on purpose. Thanks for spotting the mistake, i hope it is better now ;)"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 2, "last_activity_date": 1520421383, "last_edit_date": 1520421383, "creation_date": 1520420302, "answer_id": 49150245, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function/49150245#49150245", "title": "How to pass the specific callback to a template function?", "body": "<p>You have a <code>template &lt;class T&gt;</code> in front of your <code>int get_num(int k)</code>. Lets assume for a moment it isnt there, then this works: </p>\n\n<p>Sometimes you cannot change the function into a template, but need to work with function pointers to a function that has several overloads. The way to choose the right overload is to specify the type of the function pointer (because for different overloads the function pointers are of different type). </p>\n\n<pre><code>typedef int (* int_get_num_t)(int);\nint main() {\n    int_get_num_t correct_overload = get_num;\n    function(correct_overload, 3);\n    return 0;\n}\n</code></pre>\n\n<p>In case the <code>int get_num(int k)</code> is really supposed to be a template (then why the float one isnt?) then you simply have to pick the template version:</p>\n\n<pre><code>int_get_num_t correct_overload = get_num&lt;int&gt;;\n</code></pre>\n\n<p>where actually you could pass any type instead of <code>int</code> as your template <code>get_num</code> always takes an <code>int</code> and returns an <code>int</code> irrespective of the template parameter.</p>\n\n<p>And finally... you actually dont need the second overload for <code>get_num</code> but you need only one template. And in that case you still need to pick the right template to get the function pointer:</p>\n\n<pre><code>template &lt;typename T&gt;    \nT get_num(T k) { return k + 3; }\n\ntemplate &lt;class T1, class T2&gt;\nvoid function(T1 (*callback)(T2), T2 arg) {\n    callback(arg);\n}\n\nint main() {\n    int_get_num_t correct_overload = get_num&lt;int&gt;;\n    function(correct_overload, 3);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1520421446, "post_id": 49150435, "comment_id": 85305375, "body": "Suggestion: break up the code and explain what it does paragraph by paragraph. Comments aren&#39;t that easy to read"}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 0, "last_activity_date": 1520420906, "creation_date": 1520420906, "answer_id": 49150435, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function/49150435#49150435", "title": "How to pass the specific callback to a template function?", "body": "<p>I want to provide an solution which differs a bit.\nI explain it inside the code to make it hopefully more comfortable to read and understand:</p>\n\n<pre><code>// create a helper class, \n// which collects all callable classes to build one callable object later\ntemplate&lt;class... Ts&gt; struct funcs : Ts... { using Ts::operator()...; };\ntemplate&lt;class... Ts&gt; funcs(Ts...) -&gt; funcs&lt;Ts...&gt;;\n\n// instead of free functions, build objects with methods\n// and use operator() instead of function names.\n// this makes it easier to \"understand\" that this will be an callable object\nstruct Func1\n{\n    int operator()(int k) {\n        return k + 3;\n    }\n};\n\nstruct Func2\n{\n    float operator()(float k) {\n        return k + 3;\n    }\n};\n\n// adapt your code to this:\ntemplate &lt;class T1, class T2&gt;\nauto function(T1 callback, T2 arg) {\n    return callback(arg);\n}\n\n// and finaly you can use it this way, also with return types \n// the central hack is:\n// funcs{ Func1(), Func2() }\n// this will generate a callable object with all the overloads\n// from the inserted callable objects\nint main() {\n    // your code goes here\n    std::cout &lt;&lt; function(funcs{ Func1(), Func2() }, 3) &lt;&lt; std::endl;\n    std::cout &lt;&lt; function(funcs{ Func1(), Func2() }, (float)7.999) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72, "user_id": 9456349, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "jswl", "link": "https://stackoverflow.com/users/9456349/jswl"}, "is_accepted": false, "score": 2, "last_activity_date": 1520422618, "creation_date": 1520422618, "answer_id": 49150954, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function/49150954#49150954", "title": "How to pass the specific callback to a template function?", "body": "<p>Here's the one using the <strong>C++ functors</strong>. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate&lt;class T&gt;\nstruct get_num : public std::unary_function&lt;T,T&gt;\n{\n  T operator()(const T&amp; k) {\n    return k+3;\n  }\n};\n\ntemplate&lt; class T1, class T2 &gt;\nvoid function( T1 fun, T2 arg)\n{\n    fun(arg);\n    cout &lt;&lt; fun(arg) &lt;&lt; endl;\n}\n\nint main()\n{\n    function(get_num&lt;int&gt;(), 3);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1884, "user_id": 2747962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JbKoL.jpg?s=128&g=1", "display_name": "Darklighter", "link": "https://stackoverflow.com/users/2747962/darklighter"}, "is_accepted": true, "score": 2, "last_activity_date": 1520428457, "last_edit_date": 1520428457, "creation_date": 1520426319, "answer_id": 49152185, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function/49152185#49152185", "title": "How to pass the specific callback to a template function?", "body": "<p>After removing <code>template &lt;class T&gt;</code> from <code>int get_num(int)</code> to get a normal overload set, you can use <a href=\"https://stackoverflow.com/a/49150015/2747962\">Some programmer dude\u2019s answer</a>.</p>\n\n<p>In this answer I want to elaborate how you can still use a function pointer based parameter.</p>\n\n<p>If you switch the arguments to <code>function</code> at least <a href=\"http://coliru.stacked-crooked.com/a/47809cc81524bcf0\" rel=\"nofollow noreferrer\">gcc is able to deduce it</a>: </p>\n\n<pre><code>template &lt;typename T, typename U&gt;\nvoid function2(T arg, U(*callback)(T)) {\n    callback(arg);\n}\n</code></pre>\n\n<p>clang doesn\u2019t like it when you use <code>U</code> there, so if your return types will always be the same as your arguments, <a href=\"http://coliru.stacked-crooked.com/a/6988ab988ef10440\" rel=\"nofollow noreferrer\">you can use <code>T</code> twice</a>: </p>\n\n<pre><code>template &lt;typename T&gt;\nvoid function2(T arg, T(*callback)(T)) {\n    callback(arg);\n}\n</code></pre>\n\n<hr>\n\n<p>To resolve disambiguities like the one in your error message in general, you can also <a href=\"http://coliru.stacked-crooked.com/a/47ec24382d92552e\" rel=\"nofollow noreferrer\">do the overload resolution manually</a> with <code>static_cast</code>: </p>\n\n<pre><code>function(static_cast&lt;float(*)(float)&gt;(&amp;get_num), 3.0f);\nfunction(static_cast&lt;int(*)(int)&gt;(&amp;get_num), 3);\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 9456080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11a8c4b2336f5a3461c510c153452b9?s=128&d=identicon&r=PG", "display_name": "\u054e\u0561\u0580\u0564\u0561\u0576 \u0533\u0580\u056b\u0563\u0578\u0580\u0575\u0561\u0576", "link": "https://stackoverflow.com/users/9456080/%d5%8e%d5%a1%d6%80%d5%a4%d5%a1%d5%b6-%d4%b3%d6%80%d5%ab%d5%a3%d5%b8%d6%80%d5%b5%d5%a1%d5%b6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 49152185, "answer_count": 8, "score": 3, "last_activity_date": 1520428457, "creation_date": 1520419401, "last_edit_date": 1520419689, "question_id": 49149934, "link": "https://stackoverflow.com/questions/49149934/how-to-pass-the-specific-callback-to-a-template-function", "title": "How to pass the specific callback to a template function?", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\ntemplate &lt;class T&gt;\n\nint get_num(int k) {\n    return k + 3;\n}\n\nfloat get_num(float k) {\n    return k + 3;\n}\n\n\ntemplate &lt;class T1, class T2&gt;\nvoid function(T1 (*callback)(T2), T2 arg) {\n    callback(arg);\n}\n\nint main() {\n    // your code goes here\n    function(get_num, 3);\n    return 0;\n}\n</code></pre>\n\n<p>I need to call the get_num() function with an <code>int</code> argument. But compiler gets this error:</p>\n\n<blockquote>\n<pre><code>prog.cpp: In function \u2018int main()\u2019: prog.cpp:21:21: error: no matching\nfunction for call to \u2018function(&lt;unresolved overloaded function type&gt;,\nint)\u2019   function(get_num, 3);\n                 ^ prog.cpp:15:6: note: candidate: template&lt;class T1, class T2&gt; void function(T1 (*)(T2), T2)  void function(T1\n(*callback)(T2), T2 arg) {\n      ^~~~~~~~ prog.cpp:15:6: note:   template argument deduction/substitution failed: prog.cpp:21:21: note:   couldn't deduce\ntemplate parameter \u2018T1\u2019   function(get_num, 3);\n</code></pre>\n</blockquote>\n\n<p>How can it be done ?</p>\n"}, {"tags": ["c++", "oop", "inheritance", "multiple-inheritance", "virtual-inheritance"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1520418642, "post_id": 49149567, "comment_id": 85303528, "body": "What is the reason <code>C</code> should inherit from both <code>A</code> and <code>B</code>? If it inherits from <code>B</code> only it <i>also</i> inherits from <code>A</code>, since <code>B</code> already inherits from <code>A</code>. Indirect inheritance is still inheritance."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1520418755, "post_id": 49149567, "comment_id": 85303606, "body": "What exactly doesn&#39;t work? Please show any error messages."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1520418837, "post_id": 49149567, "comment_id": 85303669, "body": "I have trouble believing you cannot find resources on virtual inheritance -- it has been in the language for 20 years already."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1520418861, "post_id": 49149567, "comment_id": 85303679, "body": "&quot;This works, that fails&quot; is not a useful problem statement. What fails? what error do you get?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1520418888, "post_id": 49149567, "comment_id": 85303695, "body": "@Quentin - It&#39;s <i>virtually</i> everywhere :P"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1520418905, "post_id": 49149567, "comment_id": 85303704, "body": "<a href=\"https://en.wikipedia.org/wiki/Virtual_inheritance\" rel=\"nofollow noreferrer\">This</a> seems pretty well-documented  <a href=\"https://isocpp.org/wiki/faq/multiple-inheritance#mi-diamond\" rel=\"nofollow noreferrer\">to me</a>, maybe you could say specifically what you don&#39;t understand?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1520418931, "post_id": 49149567, "comment_id": 85303724, "body": "@StoryTeller <b><i>sigh</i></b>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1520418998, "post_id": 49149567, "comment_id": 85303760, "body": "@Quentin - Oh come on, terrible puns are what SO comments exist for :)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1520419138, "post_id": 49149567, "comment_id": 85303849, "body": "@StoryTeller <i>diamonds</i> are forever, but fortunately these comments aren&#39;t -- no risk of anyone <i>inheriting</i> that."}, {"owner": {"reputation": 240, "user_id": 8330838, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ccVV7iHOsh0/AAAAAAAAAAI/AAAAAAAAADs/CCfgTyQyrGo/photo.jpg?sz=128", "display_name": "Le Ngoc Thuong", "link": "https://stackoverflow.com/users/8330838/le-ngoc-thuong"}, "edited": false, "score": 1, "creation_date": 1520419629, "post_id": 49149567, "comment_id": 85304203, "body": "I think you can find the answer here: <a href=\"https://stackoverflow.com/questions/4118412/inaccessible-direct-base-caused-by-multiple-inheritance\" title=\"inaccessible direct base caused by multiple inheritance\">stackoverflow.com/questions/4118412/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 9060084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA55GGMLxNk/AAAAAAAAAAI/AAAAAAAAAHs/5r8YKU6A5IU/photo.jpg?sz=128", "display_name": "Harshad Sharma", "link": "https://stackoverflow.com/users/9060084/harshad-sharma"}, "edited": false, "score": 0, "creation_date": 1520420564, "post_id": 49149567, "comment_id": 85304820, "body": "@LeNgocThuong- I Saw that, and got confused when I read, &quot;If you try to directly convert to A, it will have two possibilities.&quot; My understanding is if I made A virtual, I will only have 1 copy of it&#39;s members"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1520420978, "post_id": 49149567, "comment_id": 85305104, "body": "@Harshad - The problem here is that B has a non-virtual base class A, so you will get more like one-and-a-half base class. Can&#39;t see any use case for that. Only reminds me of <i>&quot;Doctor, Doctor, it hurts when I do this&quot;</i>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1520452608, "post_id": 49149567, "comment_id": 85325808, "body": "Possible duplicate <a href=\"https://stackoverflow.com/questions/4118412/inaccessible-direct-base-caused-by-multiple-inheritance\" title=\"inaccessible direct base caused by multiple inheritance\">stackoverflow.com/questions/4118412/&hellip;</a>"}], "owner": {"reputation": 41, "user_id": 9060084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA55GGMLxNk/AAAAAAAAAAI/AAAAAAAAAHs/5r8YKU6A5IU/photo.jpg?sz=128", "display_name": "Harshad Sharma", "link": "https://stackoverflow.com/users/9060084/harshad-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520420169, "creation_date": 1520418423, "last_edit_date": 1520420169, "question_id": 49149567, "link": "https://stackoverflow.com/questions/49149567/c-multiple-inheritance-using-virtual", "title": "C++: multiple inheritance using virtual", "body": "<p><strong>Still  learning basics of C++</strong></p>\n\n<p>I have a very simple query regarding the virtual keyword in multiple inheritance.\nI have the following code:</p>\n\n<pre><code>class A {};\nclass B : public A {};\n\n//1. class C : public A, public B {};\n//2. class C : virtual public A, public B {};\n//3. class C : public A, virtual public B {};\n//4. class C : virtual public A, virtual public B {};\n\nint main() {\n    C f;\n    return 0;\n}\n</code></pre>\n\n<p>Now I know (by actually trying this code out), that 1 and 3, both cases where we do not use virtual keyword while inheriting  class A work.</p>\n\n<p>I understand it is the Diamond Problem of multiple inheritance, and the compiler error goes away when I inherit class A as virtual in class B:</p>\n\n<pre><code>class B: virtual public A\n</code></pre>\n\n<p>But I wanted to experiment with the code and removed it.</p>\n\n<p>My question is, Why does creation of an object of class C fail when we inherit class A using virtual?</p>\n\n<hr>\n\n<blockquote>\n  <p>Note: I could not find a good article to explain <strong>in depth</strong> what this virtual keyword means and how the compiler reads it and <strong>what does the compiler do after reading the Virtual Keyword</strong>.</p>\n</blockquote>\n\n<p>EDIT:</p>\n\n<ol>\n<li><p>This is an experiment that I am doing, so no practical use (to me personally).</p></li>\n<li><p>When do this:</p></li>\n</ol>\n\n<blockquote>\n<pre><code>class A {};\nclass B : public A {};\nclass C : virtual public A, virtual public B {};\n\nint main() {\n    C f;\n    return 0;\n}\n</code></pre>\n</blockquote>\n\n<p>Compiler throws error: error C2584: 'C': direct base 'A' is inaccessible; already a base of 'B'</p>\n\n<ol start=\"3\">\n<li>even when I don't use virtual, compiler still gives the error msg as a \"Warning\"</li>\n</ol>\n"}]