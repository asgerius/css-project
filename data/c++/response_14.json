[{"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1429142191, "post_id": 29662993, "comment_id": 47465456, "body": "seen this? <a href=\"http://stackoverflow.com/a/29118744/85371\">stackoverflow.com/a/29118744/85371</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1944429"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1429142336, "post_id": 29662993, "comment_id": 47465498, "body": "Just tried it actually, with the -lcrypto, -lssl and -lpthread, but I&#39;m still getting a ton of errors for some reason."}], "answers": [{"owner": {"user_type": "does_not_exist", "display_name": "user1944429"}, "is_accepted": true, "score": 0, "last_activity_date": 1429162645, "last_edit_date": 1429162645, "creation_date": 1429158313, "answer_id": 29665324, "question_id": 29662993, "link": "https://stackoverflow.com/questions/29662993/errors-compiling-boost-example-of-ssl-client/29665324#29665324", "title": "Errors compiling boost example of ssl client", "body": "<p>Fixed it! It was because apt-get was giving me boost version 1.46 and I needed version 1.48. I did the following to fix it:</p>\n\n<pre><code>apt-get purge libboost-all-dev\n</code></pre>\n\n<p>and</p>\n\n<pre><code>apt-get install libboost1.48-all-dev\n</code></pre>\n\n<p>Thanks to: <a href=\"http://spencernusbaum.me/blog.php#106\" rel=\"nofollow\">http://spencernusbaum.me/blog.php#106</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1944429"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1957, "favorite_count": 0, "accepted_answer_id": 29665324, "answer_count": 1, "score": 1, "last_activity_date": 1429162645, "creation_date": 1429142064, "last_edit_date": 1429142468, "question_id": 29662993, "link": "https://stackoverflow.com/questions/29662993/errors-compiling-boost-example-of-ssl-client", "title": "Errors compiling boost example of ssl client", "body": "<p>I'm trying to compile the boost example from <a href=\"http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/example/ssl/client.cpp\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/example/ssl/client.cpp</a> . For some reason I'm getting the following errors and I don't know how to fix them:</p>\n\n<pre><code>ssl_client.cpp:37:25: error: \u2018boost::asio::ssl::verify_context\u2019 has not been declared\nssl_client.cpp: In constructor \u2018client::client(boost::asio::io_service&amp;, boost::asio::ssl::context&amp;, boost::asio::ip::basic_resolver&lt;boost::asio::ip::tcp&gt;::iterator)\u2019:\nssl_client.cpp:27:13: error: \u2018class boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt; &gt;\u2019 has no member named \u2018set_verify_mode\u2019\nssl_client.cpp:27:29: error: \u2018verify_peer\u2019 is not a member of \u2018boost::asio::ssl\u2019\nssl_client.cpp:28:13: error: \u2018class boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt; &gt;\u2019 has no member named \u2018set_verify_callback\u2019\nssl_client.cpp:31:5: error: \u2018async_connect\u2019 is not a member of \u2018boost::asio\u2019\nssl_client.cpp: In member function \u2018bool client::verify_certificate(bool, int&amp;)\u2019:\nssl_client.cpp:48:54: error: request for member \u2018native_handle\u2019 in \u2018ctx\u2019, which is of non-class type \u2018int\u2019\nssl_client.cpp: In function \u2018int main(int, char**)\u2019:\nssl_client.cpp:143:68: error: no matching function for call to \u2018boost::asio::ssl::basic_context&lt;boost::asio::ssl::context_service&gt;::basic_context(boost::asio::ssl::context_base::method)\u2019\nssl_client.cpp:143:68: note: candidates are:\n/usr/include/boost/asio/ssl/basic_context.hpp:47:3: note: boost::asio::ssl::basic_context&lt;Service&gt;::basic_context(boost::asio::io_service&amp;, boost::asio::ssl::context_base::method) [with Service = boost::asio::ssl::context_service]\n/usr/include/boost/asio/ssl/basic_context.hpp:47:3: note:   candidate expects 2 arguments, 1 provided\n/usr/include/boost/asio/ssl/basic_context.hpp:35:7: note: boost::asio::ssl::basic_context&lt;boost::asio::ssl::context_service&gt;::basic_context(const boost::asio::ssl::basic_context&lt;boost::asio::ssl::context_service&gt;&amp;)\n/usr/include/boost/asio/ssl/basic_context.hpp:35:7: note:   no known conversion for argument 1 from \u2018boost::asio::ssl::context_base::method\u2019 to \u2018const boost::asio::ssl::basic_context&lt;boost::asio::ssl::context_service&gt;&amp;\u2019\n</code></pre>\n\n<p>I'm currently compiling with the following line: </p>\n\n<pre><code>g++ -I /usr/include/boost -Wall -o main ssl_client.cpp -lboost_system\n</code></pre>\n\n<p>And I recently installed boost through:</p>\n\n<pre><code>sudo apt-get install libboost-all-dev\n</code></pre>\n\n<p>I'm sure there's an easy fix, does anyone know what I'm doing wrong?</p>\n\n<p>========================================================================\nUpdate:</p>\n\n<p>I've now tried compiling with:</p>\n\n<pre><code>g++ -I /usr/include/boost -Wall -o main ssl_client.cpp -lboost_system -lcrypto -lssl -lpthread\n</code></pre>\n\n<p>but I'm still getting the following errors:</p>\n\n<pre><code>ssl_client.cpp:37:25: error: \u2018boost::asio::ssl::verify_context\u2019 has not been declared\nssl_client.cpp: In constructor \u2018client::client(boost::asio::io_service&amp;, boost::asio::ssl::context&amp;, boost::asio::ip::basic_resolver&lt;boost::asio::ip::tcp&gt;::iterator)\u2019:\nssl_client.cpp:27:13: error: \u2018class boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt; &gt;\u2019 has no member named \u2018set_verify_mode\u2019\nssl_client.cpp:27:29: error: \u2018verify_peer\u2019 is not a member of \u2018boost::asio::ssl\u2019\nssl_client.cpp:28:13: error: \u2018class boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt; &gt;\u2019 has no member named \u2018set_verify_callback\u2019\nssl_client.cpp:31:5: error: \u2018async_connect\u2019 is not a member of \u2018boost::asio\u2019\nssl_client.cpp: In member function \u2018bool client::verify_certificate(bool, int&amp;)\u2019:\nssl_client.cpp:48:54: error: request for member \u2018native_handle\u2019 in \u2018ctx\u2019, which is of non-class type \u2018int\u2019\nssl_client.cpp: In function \u2018int main(int, char**)\u2019:\nssl_client.cpp:143:68: error: no matching function for call to \u2018boost::asio::ssl::basic_context&lt;boost::asio::ssl::context_service&gt;::basic_context(boost::asio::ssl::context_base::method)\u2019\nssl_client.cpp:143:68: note: candidates are:\n/usr/include/boost/asio/ssl/basic_context.hpp:47:3: note: boost::asio::ssl::basic_context&lt;Service&gt;::basic_context(boost::asio::io_service&amp;, boost::asio::ssl::context_base::method) [with Service = boost::asio::ssl::context_service]\n/usr/include/boost/asio/ssl/basic_context.hpp:47:3: note:   candidate expects 2 arguments, 1 provided\n/usr/include/boost/asio/ssl/basic_context.hpp:35:7: note: boost::asio::ssl::basic_context&lt;boost::asio::ssl::context_service&gt;::basic_context(const boost::asio::ssl::basic_context&lt;boost::asio::ssl::context_service&gt;&amp;)\n/usr/include/boost/asio/ssl/basic_context.hpp:35:7: note:   no known conversion for argument 1 from \u2018boost::asio::ssl::context_base::method\u2019 to \u2018const     boost::asio::ssl::basic_context&lt;boost::asio::ssl::context_service&gt;&amp;\u2019\n</code></pre>\n"}, {"tags": ["c++", "llvm"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429142281, "post_id": 29662962, "comment_id": 47465482, "body": "If you&#39;re certain that the pointer is a pointer to the subclass, then just do <code>static_cast&lt;PHINode*&gt;(value)</code> and be done with it."}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1429142341, "post_id": 29662963, "comment_id": 47465500, "body": "Exactly how is this better than the <code>dynamic_cast</code> method? Most likely, the <code>isa</code> function uses <code>dynamic_cast</code> anyway."}, {"owner": {"reputation": 582, "user_id": 4164892, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_DZMBa1glM/AAAAAAAAAAI/AAAAAAAABAk/9OI36yIg-fQ/photo.jpg?sz=128", "display_name": "Colin LeMahieu", "link": "https://stackoverflow.com/users/4164892/colin-lemahieu"}, "edited": false, "score": 2, "creation_date": 1429154636, "post_id": 29662963, "comment_id": 47468795, "body": "LLVM uses its own typing mechanism that doesn&#39;t use the normal c++ vtables. dynamic_cast won&#39;t work since these classes aren&#39;t c++ polymorphic"}], "owner": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "is_accepted": true, "score": 1, "last_activity_date": 1429212005, "last_edit_date": 1495535045, "creation_date": 1429141836, "answer_id": 29662963, "question_id": 29662962, "link": "https://stackoverflow.com/questions/29662962/how-do-i-try-to-cast-a-value-to-a-subclass/29662963#29662963", "title": "How do I try to cast a Value* to a subclass?", "body": "<p>After a lot of looking around, these two questions indirectly answered my question</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/6038330/how-is-llvm-isa-implemented\">How is LLVM isa&lt;&gt; implemented?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14560027/value-to-instruction-loadinst-casting\">Value* to Instruction*/LoadInst* casting</a></li>\n</ul>\n\n<p>llvm apparently has a built in type checking system. There's a reference page <a href=\"http://llvm.org/docs/ProgrammersManual.html#the-isa-cast-and-dyn-cast-templates\" rel=\"nofollow noreferrer\">here</a>. It works like this</p>\n\n<pre><code>if(isa&lt;PHINode&gt;(value)){\n    PHINode* phi = cast&lt;PHINode&gt;(value);\n}\nif(PHINode* phi = dyn_cast&lt;PHINode&gt;(value)){//alternatively\n    ...\n}\n</code></pre>\n\n<p>And it does appear that you don't need to specify that it's a pointer, so it's not <code>isa&lt;PHINode*&gt;</code></p>\n\n<p>Finally, as it turns out, dynamic_cast will NOT work since they implement their own RTTI</p>\n\n<blockquote>\n  <p>The LLVM source-base makes extensive use of a custom form of RTTI.\n  These templates have many similarities to the C++ dynamic_cast&lt;>\n  operator, but they don\u2019t have some drawbacks (primarily stemming from\n  the fact that dynamic_cast&lt;> only works on classes that have a\n  v-table).</p>\n</blockquote>\n"}], "owner": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 29662963, "answer_count": 1, "score": 0, "last_activity_date": 1429212005, "creation_date": 1429141836, "question_id": 29662962, "link": "https://stackoverflow.com/questions/29662962/how-do-i-try-to-cast-a-value-to-a-subclass", "title": "How do I try to cast a Value* to a subclass?", "body": "<p>I have a list of Value* and some of them I know are PHINode*.</p>\n\n<p>I could do <code>dynamic_cast&lt;PHINode*&gt;(value)</code> and check if it casted to see if it's a PHINode* but I vaguely recall there's a better way.</p>\n"}, {"tags": ["c++", "loops", "while-loop"], "comments": [{"owner": {"reputation": 4933, "user_id": 2987253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa772cdc439443e5243e9d7aa41a9c6a?s=128&d=identicon&r=PG", "display_name": "Loocid", "link": "https://stackoverflow.com/users/2987253/loocid"}, "edited": false, "score": 0, "creation_date": 1429141508, "post_id": 29662899, "comment_id": 47465225, "body": "You need to put the <code>Years++</code> line inside the do while loop."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1429141508, "post_id": 29662899, "comment_id": 47465226, "body": "Your <code>Years++</code> seems to have found its way between the <code>do</code> block and the <code>while</code>."}], "answers": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 0, "last_activity_date": 1429141513, "creation_date": 1429141513, "answer_id": 29662916, "question_id": 29662899, "link": "https://stackoverflow.com/questions/29662899/whats-wrong-with-my-do-while-loop-in-c/29662916#29662916", "title": "What&#39;s wrong with my do while loop in C++?", "body": "<p><code>Years++</code> is outside the <code>}</code> that closes the loop.</p>\n"}], "owner": {"reputation": 35, "user_id": 4794196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/63f634b9131ea2bec99aa04a143b99f2?s=128&d=identicon&r=PG&f=1", "display_name": "Emm", "link": "https://stackoverflow.com/users/4794196/emm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1464690620, "creation_date": 1429141366, "last_edit_date": 1464690620, "question_id": 29662899, "link": "https://stackoverflow.com/questions/29662899/whats-wrong-with-my-do-while-loop-in-c", "title": "What&#39;s wrong with my do while loop in C++?", "body": "<p>I'm supposed to use a do while loop to display when Mexico's population exceeds the US population, starting from 1985, whenever I run my program it says that the part that says \"Years++\" is wrong. Here's my code:</p>\n\n<p>//Program to compute when Mexico's pop exceeds the US pop</p>\n\n<pre><code>#include&lt;iostream&gt;\n##include&lt;cmath&gt;\n#include&lt;iomanip&gt;\nusing namespace std;\nint main()\n{\nint Years;\ndouble UsPop, MxPop;\ncout&lt;&lt;setw(7)&lt;&lt;\"Year\"&lt;&lt;setw(13)&lt;&lt;\"US Pop\"&lt;&lt;setw(13)&lt;&lt;\"Mex Pop\"&lt;&lt;endl;\ncout&lt;&lt;setprecision(0)&lt;&lt;fixed;\nYears=1985;\ndo\n{\n    UsPop=243000000.0*(pow(1.007,(Years-1984)));\n    MxPop=78000000*(pow(1.033,(Years-1984)));\n    cout&lt;&lt;setw(7)&lt;&lt;Years&lt;&lt;setw(13)&lt;&lt;UsPop&lt;&lt;setw(13)&lt;&lt;MxPop&lt;&lt;endl;\n}\nYears++;\nwhile(UsPop&gt;MxPop);\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "stl", "heap"], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1429159481, "post_id": 29662906, "comment_id": 47470038, "body": "I would think that <code>std::make_heap</code> would be quite a bit slower than pop and push for a large heap. For a small heap, it could well be faster."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1429201978, "post_id": 29662906, "comment_id": 47498754, "body": "@rici: I don&#39;t know how <code>make_heap</code> is implemented, but it&#39;s <i>possible</i> that it could be super fast for things that are already a heap except for one element.  It&#39;s <i>possible</i> it&#39;s even optimal for that situation.  Depends on the implementation though.  And I&#39;m entirely speculating, it could be that the make_heap implementation is more or less required to be the same runtime no matter the initial layout."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1429206276, "post_id": 29662906, "comment_id": 47501467, "body": "However it is implemented, it needs to check every element to know that what you give it is already a heap except for one element. So that&#39;s O(N). Pop and push are O(log N) with a slightly larger constant multiplier (probably no more than two or three, though), so for a large heap, <code>make_heap</code> won&#39;t scale."}], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": false, "score": 1, "last_activity_date": 1429201986, "last_edit_date": 1429201986, "creation_date": 1429141428, "answer_id": 29662906, "question_id": 29662820, "link": "https://stackoverflow.com/questions/29662820/how-to-change-max-element-in-a-heap-in-c-standard-library/29662906#29662906", "title": "How to change max element in a heap in C++ standard library?", "body": "<p>The closest you'll get is <code>std::make_heap</code>, which is <em>probably</em> slower than simply pop/push.</p>\n\n<p>However, boost heap(s?) have \"The Fixup Interface\" which allows modifications like you desire.  <a href=\"http://www.boost.org/doc/libs/1_51_0/doc/html/heap/concepts.html#heap.concepts.mutability\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_51_0/doc/html/heap/concepts.html#heap.concepts.mutability</a></p>\n"}, {"comments": [{"owner": {"reputation": 27345, "user_id": 458429, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/00331dfb525be62f49a12e6baa934198?s=128&d=identicon&r=PG", "display_name": "szli", "link": "https://stackoverflow.com/users/458429/szli"}, "edited": false, "score": 2, "creation_date": 1440542128, "post_id": 29663228, "comment_id": 52314067, "body": "There is one caveat though (but I don&#39;t think it is a problem). The document of std::pop_heap() requires [first, last) be to a heap, but when you push_back a new value as the last, there is no guarantee that [first, last) be a heap. I don&#39;t think this matters because the last element is anyway moved to first and heapify is performed."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 27345, "user_id": 458429, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/00331dfb525be62f49a12e6baa934198?s=128&d=identicon&r=PG", "display_name": "szli", "link": "https://stackoverflow.com/users/458429/szli"}, "edited": false, "score": 0, "creation_date": 1440553193, "post_id": 29663228, "comment_id": 52317076, "body": "@szli: That is a good point. A future implementation may leverage that requirement and still produce the specified effects. However, it is telling that the effects were described so specifically."}, {"owner": {"reputation": 27345, "user_id": 458429, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/00331dfb525be62f49a12e6baa934198?s=128&d=identicon&r=PG", "display_name": "szli", "link": "https://stackoverflow.com/users/458429/szli"}, "edited": false, "score": 1, "creation_date": 1440600832, "post_id": 29663228, "comment_id": 52342385, "body": "I took a look at GNU/Clang/SGI implementation of STL, the only assumption is [first, last-1) is a heap. The first step is to swap first and last-1, then heapify [first, last-1). It is safe, at least for now."}], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 10, "last_activity_date": 1440600038, "last_edit_date": 1440600038, "creation_date": 1429143528, "answer_id": 29663228, "question_id": 29662820, "link": "https://stackoverflow.com/questions/29662820/how-to-change-max-element-in-a-heap-in-c-standard-library/29663228#29663228", "title": "How to change max element in a heap in C++ standard library?", "body": "<p>If you are willing to call <code>std::pop_heap()</code> on your own container <code>v</code>, then you can just first <code>v.push_back()</code> on the container the \"modified\" element before popping the heap. Then, shrink <code>v</code>.</p>\n\n<pre><code>// Precondition is that v is already a heap.\nvoid change_max_element (std::vector&lt;int&gt; &amp;v, int modified_value) {\n    v.push_back(modified_value);\n    std::pop_heap(v.begin(), v.end());\n    v.pop_back();\n}\n</code></pre>\n\n<p>This \"works\" because <code>std::pop_heap()</code> is defined to swap the first and last elements and bubble down. However, the requirement is also stated that the input sequence should be a valid heap. If we are able to define a specialized comparison operation that would allow the newly pushed back item to report itself to belong in the last position if it was already in the last position, then it could technically satisfy the requirement.</p>\n"}], "owner": {"reputation": 953, "user_id": 608958, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/920c3fee71480a12e35d5084f44d8638?s=128&d=identicon&r=PG", "display_name": "rincewind", "link": "https://stackoverflow.com/users/608958/rincewind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1440600038, "creation_date": 1429140848, "question_id": 29662820, "link": "https://stackoverflow.com/questions/29662820/how-to-change-max-element-in-a-heap-in-c-standard-library", "title": "How to change max element in a heap in C++ standard library?", "body": "<p>If I have a max heap, and if I need to change the max element, it comes down to a single bubble-down algorithm. Is there any way to do this via the C++ standard library, without coding the algorithm by hand?</p>\n\n<p>I understand it should be equivalent to pop_heap + push_heap, but that's 2 bubble down operations instead of just one.</p>\n\n<p>So - is this bubble-down algorithm exposed via the library API?</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 1, "creation_date": 1429140930, "post_id": 29662787, "comment_id": 47465028, "body": "Did you request a depth buffer? This is done by including <code>GLUT_DEPTH</code> as part of the bitmask passed to <code>glutInitDisplayMode()</code>."}, {"owner": {"reputation": 1673, "user_id": 4590761, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/10204859132551076/picture?type=large", "display_name": "dcheng", "link": "https://stackoverflow.com/users/4590761/dcheng"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1429141356, "post_id": 29662787, "comment_id": 47465178, "body": "Oh, derp. I got it working now. Thanks!"}], "owner": {"reputation": 1673, "user_id": 4590761, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/10204859132551076/picture?type=large", "display_name": "dcheng", "link": "https://stackoverflow.com/users/4590761/dcheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1429141298, "creation_date": 1429140627, "question_id": 29662787, "link": "https://stackoverflow.com/questions/29662787/opengl-object-rendering-order", "title": "OpenGL Object Rendering Order", "body": "<p>Problem: Objects aren't rendering correctly.</p>\n\n<p>What I tried to do: Searched Stack Overflow. Read that I needed to enable Depth_Test and did so. Still doesn't work. Read that I possibly needed glDepthFunc(GL_LEQUAL);, did not work. Is there something in the way I wrote reshape/initscene/myDisplay that causes these common approaches not to work?</p>\n\n<p>Code below.</p>\n\n<pre><code>void reshape (int w, int h)\n{\n    viewport.w = w;\n    viewport.h = h;\n    glViewport(0,0,viewport.w,viewport.h);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    if (w &lt;= h) {\n        glOrtho (-1.5, 1.5, -1.5*(GLfloat)h/(GLfloat)w, 1.5*(GLfloat)h/(GLfloat)w, -10.0, 10.0);\n    }\n    else {\n        glOrtho (-1.5*(GLfloat)w/(GLfloat)h,1.5*(GLfloat)w/(GLfloat)h, -1.5, 1.5, -10.0, 10.0);\n    }\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n}\n\nvoid myDisplay() {\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // clear the color buffer\n    glMatrixMode(GL_MODELVIEW);   // indicate we are specifying camera transformations\n    glLoadIdentity();             // make sure transformation is \"zero'd\"\n    glScalef(zoom, zoom, zoom);\n    gluLookAt(0.0, -9.0, 0.0,\n      0.0, 0.0, 0.0,\n      0.0, 0.0, 1.0);\n    glRotatef(y_rotation, 0.0, 1.0, 0.0);\n    glRotatef(x_rotation, 1.0, 0.0, 0.0);\n    renderObjects();\n    glFlush();\n    glutSwapBuffers();                  // swap buffers (we earlier set double buffer)\n}\n\nvoid initScene(){\n\n    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);\n    reshape(viewport.w, viewport.h);\n\n    glShadeModel(GL_FLAT);\n    glLightModelf(GL_LIGHT_MODEL_TWO_SIDE, GL_TRUE);\n\n    GLfloat red[] = {1.0f, 0.2f, 0.2f, 1.0f};\n    GLfloat white[] = {1.0f, 1.0f, 1.0f, 1.0f};\n    GLfloat gray[] = {0.5f, 0.5f, 0.5f, 1.0f};\n    glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, gray);\n    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, gray);\n\n    GLfloat lightPos[] = {0.0f, 0.0f, -10.0f, 1.0f}; \n    glLightfv(GL_LIGHT0, GL_DIFFUSE, white);\n    glLightfv(GL_LIGHT0, GL_POSITION, lightPos);\n\n    glEnable(GL_DEPTH_TEST);\n    glEnable(GL_LIGHTING);\n    glEnable(GL_LIGHT0);    \n    glEnable(GL_NORMALIZE);\n}\n</code></pre>\n"}, {"tags": ["c++", "char", "ifstream", "getline", "istream"], "comments": [{"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1429141295, "post_id": 29662757, "comment_id": 47465150, "body": "What both answers below want to tell you is that the array <code>temp</code> contains 8 uninitialized pointers to char (8 random values, in fact). Since a pointer variable stores the address in memory of another variable, you attempt to write at random memory addresses (which, most of the times, are not writeble). The OS handles this erratic behaviour: it displays the error message and terminates the program."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1429140821, "post_id": 29662795, "comment_id": 47464989, "body": "The <code>std::vector&lt;std::string&gt;</code> may not be appropriate if the records are fixed length and not text."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1429140956, "post_id": 29662795, "comment_id": 47465041, "body": "@Thomas is right. However, it would still be substantially <i>more</i> appropriate than the existing &quot;solution&quot;."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1429140989, "post_id": 29662795, "comment_id": 47465053, "body": "@ThomasMatthews, Lightning that&#39;s true, I actually wonder what is the best container to use in this case... perhaps a container of smart pointers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3325783"}, "edited": false, "score": 0, "creation_date": 1429141384, "post_id": 29662795, "comment_id": 47465187, "body": "Ok so when I declare the char * [], I never initialize it? I just declare, is that correct?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1429141388, "post_id": 29662795, "comment_id": 47465189, "body": "If this is block reading from a file, I would use a single buffer that is 8 * 256. <i>And not use dynamic memory.</i>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1429141493, "post_id": 29662795, "comment_id": 47465221, "body": "<code>std::array&lt;unsigned char, 256&gt;</code> seems appropriate"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1429141519, "post_id": 29662795, "comment_id": 47465230, "body": "@Jimenemex, no, you declare an array of 8 pointers. Now, each pointer have to point to some valid address. In your case, they are not. That&#39;s why you need to either allocate memory to point to or point them to an already allocated chunk."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1429141680, "post_id": 29662795, "comment_id": 47465288, "body": "@MattMcNabb yes indeed, I just saw that OP is always reading 256 bytes, and only 8 lines. But probably this is not the intention, as the files can have variable number of lines. If indeed there are only 8 lines, then a std::array is the way to go."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1429142067, "post_id": 29662795, "comment_id": 47465414, "body": "@vsoftco I mean an array for each line (if he really intends that 256 should be the line, as opposed to him doing that because he didn&#39;t know any better)"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1429142284, "post_id": 29662795, "comment_id": 47465483, "body": "@MattMcNabb got it, also my wild guess is that OP intention is not reading anything in binary format, but plain text from a file. But indeed, if the line has to be fixed (which probably is not the case here), an <code>std::array</code> is the way to go."}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 2, "last_activity_date": 1429142082, "last_edit_date": 1429142082, "creation_date": 1429140676, "answer_id": 29662795, "question_id": 29662757, "link": "https://stackoverflow.com/questions/29662757/access-violation-writing-to-location/29662795#29662795", "title": "Access Violation Writing to location", "body": "<p>You define an array of 8 pointers to char, but forget to allocate memory so that the pointers point to a valid chunk of memory:</p>\n\n<pre><code>char * temp [8]; // need then to allocate memory for the pointers\n</code></pre>\n\n<p>Because of this, in the line </p>\n\n<pre><code>fileStream.get(temp[i],256,',')\n</code></pre>\n\n<p>you end up using memory that's not yours. </p>\n\n<p>Solution:</p>\n\n<pre><code>for(int i = 0; i&lt;8; i++)\n    temp[i] = new char[256]; // we allocate 256 bytes for each pointer\n</code></pre>\n\n<p>Better though, use a <code>std::vector&lt;std::string&gt;</code> instead.</p>\n\n<hr>\n\n<p>In the code you have right now it looks like you implicitly assume that the file has no more than 8 lines, which I find hard to believe. If your file has more than 8 lines, then you'll end up accessing the array of 8 pointers out of bounds, so you'll get another undefined behaviour (usually a segfault). That's why is much better to use standard STL containers like <code>std::vector</code>, to avoid all these headaches. </p>\n\n<p>In case you MUST use pointers and want a variable number of lines, then you have to use a pointer to pointer,</p>\n\n<pre><code>char** temp;\n</code></pre>\n\n<p>then allocate memory for an enough pointers-to-char,</p>\n\n<pre><code>temp = new char* [1000]; // we believe we won't have more than 1000 lines\n</code></pre>\n\n<p>then, for each pointer-to-char, allocate memory</p>\n\n<pre><code>for(int i = 0; i &lt; 1000; ++i)\n    temp[i] = new char[256];\n</code></pre>\n\n<p>At the end of the program, you must then <code>delete[]</code> in reverse order</p>\n\n<pre><code>for(int i = 0; i &lt; 1000; ++i)\n    delete[] temp[i];\n\ndelete[] temp;\n</code></pre>\n\n<p>As you can see, it's getting messy.</p>\n"}, {"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1429140807, "post_id": 29662796, "comment_id": 47464987, "body": "Funny how both of us choose <code>256</code> as the size :) But why <code>uint8_t</code> and not simply <code>char</code>? AFAIK <code>char</code> is fine, being the smallest addressable thing."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1429141021, "post_id": 29662796, "comment_id": 47465060, "body": "It <i>should</i> be <code>char</code>. Don&#39;t forget to support those <code>CHAR_BIT != 8</code> architectures! :P"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1429141306, "post_id": 29662796, "comment_id": 47465156, "body": "Changed array type from <code>uint8_t</code> to <code>char</code>, <i>per OP&#39;s question</i>."}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1429141275, "last_edit_date": 1429141275, "creation_date": 1429140679, "answer_id": 29662796, "question_id": 29662757, "link": "https://stackoverflow.com/questions/29662757/access-violation-writing-to-location/29662796#29662796", "title": "Access Violation Writing to location", "body": "<p>You never allocated memory for each pointer in <code>temp</code>.<br>\nYou probably want something like:  </p>\n\n<pre><code>for (unsigned int i = 0u; i &lt; 8; ++i)\n{\n  temp[i] = new char[256];\n}\n</code></pre>\n\n<p>The says that the <code>temp</code> variable points to 8 dynamically allocated byte buffers of 256 bytes each.  </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3325783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 29662795, "answer_count": 2, "score": 0, "last_activity_date": 1429142082, "creation_date": 1429140511, "question_id": 29662757, "link": "https://stackoverflow.com/questions/29662757/access-violation-writing-to-location", "title": "Access Violation Writing to location", "body": "<p>Im new to c++ and I dont know what this error means. It reads from a file and tries to store the values in a char * [].</p>\n\n<p>The file contains:</p>\n\n<pre><code>5,Justin,19,123-45-6789,State Farm,9876,Jessica,Broken Hand,\n</code></pre>\n\n<p>This is my code.</p>\n\n<pre><code>void Hospital::readRecordsFile(){\nstd::ifstream fileStream;\nfileStream.open(fileName); // Opens the file stream to read fileName\nchar * temp [8];\nint i = 0;\nwhile(!fileStream.eof()){\n    fileStream.get(temp[i],256,',');\n    i++;\n}\ni = 0;\nfor(char * t:temp){\n    std::cout &lt;&lt; t &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The error is at the line <code>fileStream.get(temp[i],256,',');</code> </p>\n"}, {"tags": ["c++", "sockets", "udp"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1429140633, "post_id": 29662633, "comment_id": 47464926, "body": "If the problem is UDP and not your code: Are you aware that UDP just isn&#180;t reliable? Messages may be lost. (Even if your code is perfect.)"}, {"owner": {"reputation": 159, "user_id": 4163927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2649f9b4ee6f30752c4a312aee354f0?s=128&d=identicon&r=PG&f=1", "display_name": "Martha Pears", "link": "https://stackoverflow.com/users/4163927/martha-pears"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1429141171, "post_id": 29662633, "comment_id": 47465112, "body": "I know that but I feel that my sendto function from my server(the receiver function) is not working properly. That&#39;s why it&#39;s sending and the server is only receiving the message and displaying."}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1429152166, "post_id": 29664161, "comment_id": 47468130, "body": "Or <code>fork</code> before calling <code>socket</code>. But having the two processes share a socket is definitely a bad thing -- there&#39;s a race for which process binds the socket."}, {"owner": {"reputation": 159, "user_id": 4163927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2649f9b4ee6f30752c4a312aee354f0?s=128&d=identicon&r=PG&f=1", "display_name": "Martha Pears", "link": "https://stackoverflow.com/users/4163927/martha-pears"}, "edited": false, "score": 0, "creation_date": 1429211692, "post_id": 29664161, "comment_id": 47504816, "body": "I can&#39;t understand what you mean by telling main() which mode to operate it. Could you explain?"}, {"owner": {"reputation": 77122, "user_id": 106671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a910ad61c5827193f003a11be5dacb14?s=128&d=identicon&r=PG", "display_name": "Nikolai Fetissov", "link": "https://stackoverflow.com/users/106671/nikolai-fetissov"}, "edited": false, "score": 0, "creation_date": 1429214537, "post_id": 29664161, "comment_id": 47506586, "body": "Something like this: <code>~$ .&#47;my_prog -s 7777</code> means starting your program as a server listening on port 7777, but <code>~$ .&#47;my_prog -c 10.0.0.3 7777</code> means starting it as a client that talks to the server at IP address <code>10.0.0.3</code> and port <code>7777</code>."}], "owner": {"reputation": 77122, "user_id": 106671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a910ad61c5827193f003a11be5dacb14?s=128&d=identicon&r=PG", "display_name": "Nikolai Fetissov", "link": "https://stackoverflow.com/users/106671/nikolai-fetissov"}, "is_accepted": false, "score": 1, "last_activity_date": 1429150561, "last_edit_date": 1429150561, "creation_date": 1429150111, "answer_id": 29664161, "question_id": 29662633, "link": "https://stackoverflow.com/questions/29662633/two-way-communication-program-using-udp-not-working-properly/29664161#29664161", "title": "Two way communication program using UDP not working properly", "body": "<p>Do not code this with <code>fork(2)</code> - your parent and child processes <em><code>share</code></em> the same socket (child inherits parent's file descriptors). That surely messes everything up.</p>\n\n<p>Just introduce a command line parameter telling <code>main()</code> which mode to operate in - sender or receiver - and run them in different terminal windows (eventually on different computers).</p>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 4163927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2649f9b4ee6f30752c4a312aee354f0?s=128&d=identicon&r=PG&f=1", "display_name": "Martha Pears", "link": "https://stackoverflow.com/users/4163927/martha-pears"}, "edited": false, "score": 0, "creation_date": 1429211626, "post_id": 29664238, "comment_id": 47504781, "body": "How to make it bi-directional then?"}, {"owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "reply_to_user": {"reputation": 159, "user_id": 4163927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2649f9b4ee6f30752c4a312aee354f0?s=128&d=identicon&r=PG&f=1", "display_name": "Martha Pears", "link": "https://stackoverflow.com/users/4163927/martha-pears"}, "edited": false, "score": 0, "creation_date": 1429211885, "post_id": 29664238, "comment_id": 47504932, "body": "I hope you got the point. In receiver function you are in constant loop doing <code>recvfrom</code>. Your attempt for <code>getline</code> is out of the loop.  Move the <code>getline</code> code inside loop. The loop should do <code>recvfrom</code>, then <code>getline</code> and then <code>sendto</code>"}, {"owner": {"reputation": 159, "user_id": 4163927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2649f9b4ee6f30752c4a312aee354f0?s=128&d=identicon&r=PG&f=1", "display_name": "Martha Pears", "link": "https://stackoverflow.com/users/4163927/martha-pears"}, "edited": false, "score": 0, "creation_date": 1429216878, "post_id": 29664238, "comment_id": 47508031, "body": "Ya I understand, but it still doesn&#39;t seem to work. I updated my code above in the question according to what you&#39;re saying."}, {"owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "reply_to_user": {"reputation": 159, "user_id": 4163927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2649f9b4ee6f30752c4a312aee354f0?s=128&d=identicon&r=PG&f=1", "display_name": "Martha Pears", "link": "https://stackoverflow.com/users/4163927/martha-pears"}, "edited": false, "score": 0, "creation_date": 1429228865, "post_id": 29664238, "comment_id": 47512966, "body": "Look at sender. There is &#39;recvfrom&#39; in while loop. Sender won&#39;t get send after the first time"}], "owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1429151552, "last_edit_date": 1429151552, "creation_date": 1429150610, "answer_id": 29664238, "question_id": 29662633, "link": "https://stackoverflow.com/questions/29662633/two-way-communication-program-using-udp-not-working-properly/29664238#29664238", "title": "Two way communication program using UDP not working properly", "body": "<blockquote>\n  <blockquote>\n    <p>When I type a message on the client window..</p>\n  </blockquote>\n</blockquote>\n\n<p>You have separate terminal sessions? You are forking and binding to a port in one of the process(same SD as well). Hence running another instance of program from separate windows, wouldn't it have bind error? Though, your <code>receiver</code> logic would run. You should based on command line arguments decide whether the program instance is to be a client or a server.</p>\n\n<p>BTW,the issue is, you are in a while loop in sender and receiver. In sender in <code>while(true)</code> loop for getting input from user and sending. And in other receving the data on socket. Obviously, one is destined to only receive data and the other to send data. It isn't bi-directional.</p>\n"}], "owner": {"reputation": 159, "user_id": 4163927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a2649f9b4ee6f30752c4a312aee354f0?s=128&d=identicon&r=PG&f=1", "display_name": "Martha Pears", "link": "https://stackoverflow.com/users/4163927/martha-pears"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429216780, "creation_date": 1429139909, "last_edit_date": 1429216780, "question_id": 29662633, "link": "https://stackoverflow.com/questions/29662633/two-way-communication-program-using-udp-not-working-properly", "title": "Two way communication program using UDP not working properly", "body": "<p>I am trying to write a two way chat program using UDP in C++. Here is my code:</p>\n\n<pre><code> #include &lt;sys/types.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;arpa/inet.h&gt;\n    #include &lt;netdb.h&gt;\n    #include &lt;iostream&gt;\n    #include &lt;cstring&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;string&gt;\n    enum { RECV_PORT = 5023, MSGSIZE = 1024 };\n    socklen_t addr_len = sizeof(sockaddr) ;\n    int receiver( int socket_fd )\n    {\n        sockaddr_in my_addr ;\n        std::memset( &amp;my_addr, 0, sizeof(my_addr) ) ;\n        my_addr.sin_family = AF_INET ;\n        my_addr.sin_port = htons( RECV_PORT ) ;\n        my_addr.sin_addr.s_addr = INADDR_ANY ;\n        if ( bind( socket_fd, (sockaddr*)&amp;my_addr, addr_len ) != 0 )\n           return 2 ;\n         sockaddr_in client_addr ;\n        while( true )\n        {\n            char recv_data[MSGSIZE+1] ;\n\n            int bytes_recd = recvfrom( socket_fd, recv_data, MSGSIZE, 0,\n                                    (sockaddr*)&amp;client_addr, &amp;addr_len ) ;\n            if( bytes_recd == -1 ) break ;\n            recv_data[bytes_recd] = '\\0' ;\n            std::cout &lt;&lt; \"Message from \" &lt;&lt; inet_ntoa(client_addr.sin_addr)\n                      &lt;&lt; ':' &lt;&lt; ntohs(client_addr.sin_port) &lt;&lt; \" - \"\n                      &lt;&lt; recv_data &lt;&lt; std::endl ;\n\n\n        std::string send_str ;\n        while( std::getline( std::cin, send_str ) )\n        {\n          send_str.resize(MSGSIZE) ;\n          sendto( socket_fd, send_str.c_str(), MSGSIZE, 0,\n                (sockaddr*)&amp;client_addr, addr_len ) ;\n        }\n\n        return 0 ;\n    }\n}\n    int sender( int socket_fd )\n    {\n        std::cout &lt;&lt; \"IP Address of server: \" ;\n        std::string address ; \n        std::cin &gt;&gt; address &gt;&gt; std::ws ;\n        sockaddr_in member_addr ;\n        std::memset( &amp;member_addr, 0, sizeof(member_addr) ) ;\n        member_addr.sin_family = AF_INET ;\n        member_addr.sin_port = htons( RECV_PORT ) ;\n        member_addr.sin_addr.s_addr =\n                 *(in_addr_t*)(gethostbyname( address.c_str() )-&gt;h_addr) ;\n        std::string send_str ;\n        while( std::getline( std::cin, send_str ) )\n        {\n          send_str.resize(MSGSIZE) ;\n\n\n sendto( socket_fd, send_str.c_str(), MSGSIZE, 0,\n            (sockaddr*)&amp;member_addr, addr_len ) ;\n    }\n    while( true )\n    {\n        sockaddr_in server_addr ;\n        char recv_data[MSGSIZE+1] ;\n\n        int bytes_recd = recvfrom( socket_fd, recv_data, MSGSIZE, 0,\n                                (sockaddr*)&amp;server_addr, &amp;addr_len ) ;\n        if( bytes_recd == -1 ) break ;\n            recv_data[bytes_recd] = '\\0' ;\n            std::cout &lt;&lt; \"Message from \" &lt;&lt; inet_ntoa(server_addr.sin_addr)\n                      &lt;&lt; ':' &lt;&lt; ntohs(server_addr.sin_port) &lt;&lt; \" - \"\n                      &lt;&lt; recv_data &lt;&lt; std::endl ;\n        }\n        return 0 ;\n    }\n    int main()\n    {\n      int socket_fd = socket( AF_INET, SOCK_DGRAM, 0 ) ;\n      if( socket_fd == -1 ) return 1 ;\n      return fork() == 0 ? receiver( socket_fd ) : sender( socket_fd ) ;\n    }\n</code></pre>\n\n<p>When I type a message on the client window, the message is displayed on the server window, but when I type a message on the server window, then the message is displayed not he server window only and not on the client window. Why is this happening? Can somebody please help me fix this?</p>\n"}, {"tags": ["c++", "matlab", "clang", "mex"], "comments": [{"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 0, "creation_date": 1429142437, "post_id": 29662578, "comment_id": 47465523, "body": "This might be relevant: <a href=\"http://stackoverflow.com/q/19268293/2778484\">stackoverflow.com/q/19268293/2778484</a>"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1429189453, "post_id": 29662578, "comment_id": 47488750, "body": "what&#39;s used in your mex script to link libraries, clang or g++?"}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "reply_to_user": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 0, "creation_date": 1429220688, "post_id": 29662578, "comment_id": 47510075, "body": "@chappjc thanks, seems like a different problem though."}, {"owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1429220699, "post_id": 29662578, "comment_id": 47510081, "body": "@user3528438 g++. i wasn&#39;t aware that shared libraries are compiler-dependent like that, is that true?"}], "owner": {"reputation": 2787, "user_id": 225205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a4cef1ef9304919c4b0bf56dd2bf788?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/225205/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429139626, "creation_date": 1429139626, "question_id": 29662578, "link": "https://stackoverflow.com/questions/29662578/compiling-shared-library-with-clang-for-mex-cannot-load-any-more-object-with", "title": "Compiling shared library with Clang for mex -&gt; cannot load any more object with static TLS", "body": "<p>I have a bunch of C++ code that I'd like to call from Matlab. I compile the code into a shared library, make a small mex interface, and compile that with mex while linking to the .so.</p>\n\n<p>Basically, I have a CMake file with </p>\n\n<pre><code>add_library(mylibrary SHARED &lt;dependencies&gt;)\n</code></pre>\n\n<p>which i compile with</p>\n\n<pre><code>(optionally export CXX=clang++); cmake ..; make\n</code></pre>\n\n<p>and call mex with </p>\n\n<pre><code>mex -lmylibrary [...]\n</code></pre>\n\n<p>This works fine if I compile the original code with g++. If I try to use clang++ (exact same flags etc), however, the mex compilation still runs fine but upon trying to call the function in matlab I get the error</p>\n\n<pre><code>Invalid MEX-file '&lt;path_to_file&gt;.mexa64': dlopen: cannot load any more object with static TLS\n</code></pre>\n\n<p>This isn't a huge issue obviously because I can just use g++, but I'd prefer to use clang if possible because the compilation is quite a bit faster and the warnings/errors are nicer.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1429139653, "post_id": 29662557, "comment_id": 47464589, "body": "There is <a href=\"http://stackoverflow.com/questions/20506471/how-to-create-lll-of-char-arrays\" title=\"how to create lll of char arrays\">stackoverflow.com/questions/20506471/&hellip;</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1429139897, "post_id": 29662557, "comment_id": 47464685, "body": "c or c++? not both. While(!file_in.eof) doesnt do what you think, dont use it"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1429139948, "post_id": 29662557, "comment_id": 47464697, "body": "What is an LLL?  Linear Linked List?"}, {"owner": {"reputation": 5, "user_id": 4794042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d98dae1ed9b3de6cb91847ac08d3b5?s=128&d=identicon&r=PG&f=1", "display_name": "thenikedestroyer", "link": "https://stackoverflow.com/users/4794042/thenikedestroyer"}, "edited": false, "score": 0, "creation_date": 1429140018, "post_id": 29662557, "comment_id": 47464725, "body": "Yes LLL is Linear Linked List"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4794042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d98dae1ed9b3de6cb91847ac08d3b5?s=128&d=identicon&r=PG&f=1", "display_name": "thenikedestroyer", "link": "https://stackoverflow.com/users/4794042/thenikedestroyer"}, "edited": false, "score": 0, "creation_date": 1429140137, "post_id": 29662666, "comment_id": 47464761, "body": "Thank you, I will try at it from that direction, thanks a lot, honestly. I didn&#39;t think of that."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 5, "user_id": 4794042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d98dae1ed9b3de6cb91847ac08d3b5?s=128&d=identicon&r=PG&f=1", "display_name": "thenikedestroyer", "link": "https://stackoverflow.com/users/4794042/thenikedestroyer"}, "edited": false, "score": 0, "creation_date": 1429140339, "post_id": 29662666, "comment_id": 47464829, "body": "i see u say c++ - in that case use std::string not char *"}, {"owner": {"reputation": 5, "user_id": 4794042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d98dae1ed9b3de6cb91847ac08d3b5?s=128&d=identicon&r=PG&f=1", "display_name": "thenikedestroyer", "link": "https://stackoverflow.com/users/4794042/thenikedestroyer"}, "edited": false, "score": 0, "creation_date": 1429140459, "post_id": 29662666, "comment_id": 47464859, "body": "hey pm100, i am suppose to do this without using string."}, {"owner": {"reputation": 5, "user_id": 4794042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d98dae1ed9b3de6cb91847ac08d3b5?s=128&d=identicon&r=PG&f=1", "display_name": "thenikedestroyer", "link": "https://stackoverflow.com/users/4794042/thenikedestroyer"}, "edited": false, "score": 0, "creation_date": 1429140603, "post_id": 29662666, "comment_id": 47464911, "body": "Yeah I don&#39;t know why he does that, but anyways, thank you for your help!"}], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1429140186, "last_edit_date": 1429140186, "creation_date": 1429140023, "answer_id": 29662666, "question_id": 29662557, "link": "https://stackoverflow.com/questions/29662557/creating-a-linear-linked-list-from-a-txt-file/29662666#29662666", "title": "Creating a linear linked list from a .txt file", "body": "<p>come at it from the other direction. Write a set of functions for creating and populating linked lists. And test with hard coded values. Once they are working nicely wire them up in a program that reads input from a file. The linked lists are the hard part</p>\n\n<p>ie </p>\n\n<pre><code>List *make_list()\n{\n//yr code goes here\n}\n\nvoid add_to_list(List *list, char * word)\n{\n// ditto\n}\n</code></pre>\n\n<p>etc</p>\n\n<p>then</p>\n\n<pre><code>int main()\n{\n   List *list = make_list();\n   add_to_list(list, \"word1\");\n   add_to_list(list, \"word2\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 4794042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d98dae1ed9b3de6cb91847ac08d3b5?s=128&d=identicon&r=PG&f=1", "display_name": "thenikedestroyer", "link": "https://stackoverflow.com/users/4794042/thenikedestroyer"}, "edited": false, "score": 0, "creation_date": 1429140704, "post_id": 29662708, "comment_id": 47464951, "body": "Thanks a lot Mooing Duck, I&#39;m really bad with external files."}], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": true, "score": 1, "last_activity_date": 1429140278, "creation_date": 1429140278, "answer_id": 29662708, "question_id": 29662557, "link": "https://stackoverflow.com/questions/29662557/creating-a-linear-linked-list-from-a-txt-file/29662708#29662708", "title": "Creating a linear linked list from a .txt file", "body": "<p>The normal code for homework reads more like this:</p>\n\n<pre><code>std::ifstream myfile(\"filename.txt\");\nstd::string fullline;\nwhile(std::getline(myfile, fullline)) {\n   //got a line, now split into words\n   std::istringstream line(fullline);\n   std::string word;\n   while(std::getline(line,word,';') {\n       //do something with the next word\n       //note that it probably has leading spaces since it's semicolon delimited.\n   }\n   //end of line\n}\n//end of file\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4794042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d98dae1ed9b3de6cb91847ac08d3b5?s=128&d=identicon&r=PG&f=1", "display_name": "thenikedestroyer", "link": "https://stackoverflow.com/users/4794042/thenikedestroyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 29662708, "answer_count": 2, "score": -3, "last_activity_date": 1429140278, "creation_date": 1429139569, "last_edit_date": 1429140266, "question_id": 29662557, "link": "https://stackoverflow.com/questions/29662557/creating-a-linear-linked-list-from-a-txt-file", "title": "Creating a linear linked list from a .txt file", "body": "<p>I would like to read in a .txt file and create a linear linked list from it.</p>\n\n<p>Here's an example of the .txt file.</p>\n\n<pre><code>word1; word2; num3; word4;\nword11; word22; num33; word44;\n</code></pre>\n\n<p>What I have so far is </p>\n\n<pre><code>    ifstream file_in;\n\n    file_in.open(\"word.txt\");\n    file_in.get(word, SIZE, ';');    file_in.ignore(SIZE, ';');\n    while(!file_in.eof()) \n    {\n            file_in.get(desc, SIZE, ';');    file_in.ignore(SIZE, ';');\n    }\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1429140487, "post_id": 29662516, "comment_id": 47464873, "body": "Not currently. There are proposals to allow something like <code>template&lt;auto X&gt;</code>, but they are just proposals."}, {"owner": {"reputation": 1875, "user_id": 1091536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d2f11fe9ce90bd4462a24c1bf2975c?s=128&d=identicon&r=PG", "display_name": "gomons", "link": "https://stackoverflow.com/users/1091536/gomons"}, "edited": false, "score": 0, "creation_date": 1429143760, "post_id": 29662516, "comment_id": 47465895, "body": "Do you really need pointers values at compile time?"}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "reply_to_user": {"reputation": 1875, "user_id": 1091536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d2f11fe9ce90bd4462a24c1bf2975c?s=128&d=identicon&r=PG", "display_name": "gomons", "link": "https://stackoverflow.com/users/1091536/gomons"}, "edited": false, "score": 0, "creation_date": 1429144036, "post_id": 29662516, "comment_id": 47465987, "body": "@gomons No, but it doesn&#39;t hurt."}], "answers": [{"owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "is_accepted": false, "score": 0, "last_activity_date": 1429142086, "last_edit_date": 1429142086, "creation_date": 1429139604, "answer_id": 29662568, "question_id": 29662516, "link": "https://stackoverflow.com/questions/29662516/how-to-use-a-type-of-a-class-as-argument-to-a-template/29662568#29662568", "title": "How to use a type of a class as argument to a template", "body": "<p><em>This is the closest I got. (Not a complete solution.)</em></p>\n\n<p>It uses function parameter template auto-deduction, but you still have to specify the parameter-list twice. Another approach was to use auto return type deduction (C++1y) but that has the problem that you can't get the arguments past the parameter-list barrier.</p>\n\n<pre><code>template&lt;class TB, class TF&gt; \nstruct foo_h {\n  template&lt;TB TCons, TF TDes&gt;\n  struct f { \n    typedef foo&lt;TB,TCons,TF,TDes&gt; type;\n  };  \n};\n\ntemplate&lt;class TB, class TF&gt; \nfoo_h&lt;TB,TF&gt; foo_t(TB, TF);\n\nusing bar = decltype(foo_t(&amp;tb,&amp;tf))::f&lt;&amp;tb,&amp;tf&gt;::type;\n</code></pre>\n\n<p>Maybe it helps somebody to build upon. But I don't think there is a solution, yet.</p>\n\n<p>This is the aforementioned C++1y solution, but as you can see it has the problem of passing the actual variables:</p>\n\n<pre><code>template&lt;class TB, class TF&gt;\nauto foo_t(TB b, TF f) {\n  return foo&lt;TB,&amp;tb,TF,&amp;tf&gt;();\n  //            ^^^    ^^^ using b and f doesn't work as they don't refer to globals\n}\n\nusing tofu = decltype(foo_t(&amp;tb,&amp;tf));\n</code></pre>\n"}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1429140556, "creation_date": 1429140556, "answer_id": 29662767, "question_id": 29662516, "link": "https://stackoverflow.com/questions/29662516/how-to-use-a-type-of-a-class-as-argument-to-a-template/29662767#29662767", "title": "How to use a type of a class as argument to a template", "body": "<p>Unfortunately this is not yet possible.</p>\n"}, {"owner": {"reputation": 1875, "user_id": 1091536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d2f11fe9ce90bd4462a24c1bf2975c?s=128&d=identicon&r=PG", "display_name": "gomons", "link": "https://stackoverflow.com/users/1091536/gomons"}, "is_accepted": false, "score": 0, "last_activity_date": 1429143942, "creation_date": 1429143942, "answer_id": 29663271, "question_id": 29662516, "link": "https://stackoverflow.com/questions/29662516/how-to-use-a-type-of-a-class-as-argument-to-a-template/29663271#29663271", "title": "How to use a type of a class as argument to a template", "body": "<p>Preprocessor is evil, remember it:</p>\n\n<pre><code>#define FUNC(f) decltype(f), f\n\nusing bar = foo&lt;FUNC(&amp;tb), FUNC(&amp;tf)&gt;;\n</code></pre>\n"}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "is_accepted": true, "score": 1, "last_activity_date": 1469715843, "creation_date": 1469715843, "answer_id": 38639237, "question_id": 29662516, "link": "https://stackoverflow.com/questions/29662516/how-to-use-a-type-of-a-class-as-argument-to-a-template/38639237#38639237", "title": "How to use a type of a class as argument to a template", "body": "<p>As of C++17, we can now use <code>auto</code> as the type of a template parameter, so we can now do this:</p>\n\n<pre><code>template&lt;auto TCons, auto TDes&gt;\nstruct foo{};\n</code></pre>\n\n<p>If we need to get the types of <code>TCons</code> and <code>TDes</code> we can use <code>decltype</code>.</p>\n"}], "owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 38639237, "answer_count": 4, "score": 3, "last_activity_date": 1469715843, "creation_date": 1429139318, "question_id": 29662516, "link": "https://stackoverflow.com/questions/29662516/how-to-use-a-type-of-a-class-as-argument-to-a-template", "title": "How to use a type of a class as argument to a template", "body": "<p>I apologize for the vague title, but I want to create a template class that is defined for some pointer to a pointer to a function. Currently, I have this:</p>\n\n<pre><code>template&lt;class TB, TB TCons, class TF, TF TDes&gt;\nstruct foo{}\n</code></pre>\n\n<p>Which is used like so:</p>\n\n<pre><code>using bar = foo&lt;decltype(&amp;tb), &amp;tb, decltype(&amp;tf), &amp;tf&gt;;\n</code></pre>\n\n<p>However, it is very clear the code redundancy of both specifying the types of <code>&amp;tb</code> and <code>&amp;tf</code> as well as the pointers themselves. Is there a way to construct a template class so that I can do something like this instead?</p>\n\n<pre><code>using bar = foo&lt;&amp;tb, &amp;tf&gt;;\n</code></pre>\n"}, {"tags": ["c++", "gcc", "g++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1429139149, "post_id": 29662448, "comment_id": 47464394, "body": "<a href=\"http://stackoverflow.com/questions/15909788\">same?</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1429139168, "post_id": 29662448, "comment_id": 47464406, "body": "AFAICR, the de facto mode of operation is the &#39;last takes precedence&#39; when you work with things like <code>-std=c99</code> vs <code>-std=gnu11</code>, so I would expect the same to apply to other options such as <code>-O</code>."}, {"owner": {"reputation": 12023, "user_id": 1462604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2152f0665d54a5cfe8bde11b18f91547?s=128&d=identicon&r=PG", "display_name": "Wug", "link": "https://stackoverflow.com/users/1462604/wug"}, "edited": false, "score": 0, "creation_date": 1429139170, "post_id": 29662448, "comment_id": 47464407, "body": "As far as I can tell, the <code>-O0</code> option has taken effect over the previous <code>-O2</code> but I&#39;ll still welcome anyone who quotes whatever deeply buried documentation states that this is true in all cases."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1429139247, "post_id": 29662448, "comment_id": 47464440, "body": "@DrewDormann i would say this is actually a duplicate of that question."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1429139315, "post_id": 29662448, "comment_id": 47464457, "body": "@Ben You&#39;re not alone.  :)"}, {"owner": {"reputation": 12023, "user_id": 1462604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2152f0665d54a5cfe8bde11b18f91547?s=128&d=identicon&r=PG", "display_name": "Wug", "link": "https://stackoverflow.com/users/1462604/wug"}, "edited": false, "score": 0, "creation_date": 1429139329, "post_id": 29662448, "comment_id": 47464464, "body": "I don&#39;t know how I didn&#39;t find the other question given that it&#39;s title was basically exactly the same as this one&#39;s, and I spent at least 10 minutes googling for it... :("}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1429139574, "post_id": 29662448, "comment_id": 47464553, "body": "@Wug the beauty of crowdsourcing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1429139594, "post_id": 29662448, "comment_id": 47464562, "body": "Curious...my Google search on &#39;gcc conflicting arguments&#39; turns the other question up as the top answer.  I don&#39;t know if I&#39;ve got Google particularly well trained or...well, you must have used a different query, I suppose."}], "owner": {"reputation": 12023, "user_id": 1462604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2152f0665d54a5cfe8bde11b18f91547?s=128&d=identicon&r=PG", "display_name": "Wug", "link": "https://stackoverflow.com/users/1462604/wug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "closed_date": 1429139208, "answer_count": 0, "score": 2, "last_activity_date": 1429138968, "creation_date": 1429138968, "question_id": 29662448, "link": "https://stackoverflow.com/questions/29662448/if-you-specify-conflicting-command-line-arguments-to-gcc-which-one-is-accepted", "closed_reason": "Duplicate", "title": "If you specify conflicting command line arguments to GCC, which one is accepted?", "body": "<p>I have a makefile that compiles C++ files with a rule rather like this:</p>\n\n<pre><code>$(CXX) $(CPPFLAGS) $(CXXFLAGS) $(FILE) $(DEFINE) $(INCLUDE) $(USER_CXXFLAGS)\"\n</code></pre>\n\n<p>For a particular configuration of the build system, <code>$(CXXFLAGS)</code> includes the value <code>-O2</code>.  But, I can add my own flags to <code>$(USER_CXXFLAGS)</code>,  and for easier debugging want to add <code>-O0</code>.  The end result of this is that when compilation is done, the compiler command line will include multiple conflicting instructions about how to optimize.</p>\n\n<p>Which one does it use?  I suspect it's reasonable to assume that the last specified option takes precedence, but given that position matters for some G++ options I don't want to make that assumption.  Is this behavior documented somewhere? I read the man pages but was unable to find any specification about repeated options in general.</p>\n"}, {"tags": ["c++", "eclipse-cdt"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 1, "creation_date": 1429138760, "post_id": 29662362, "comment_id": 47464258, "body": "What compiler are you using?"}, {"owner": {"reputation": 7269, "user_id": 597609, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f06fbe276a86734c80c4845319e25abb?s=128&d=identicon&r=PG", "display_name": "Andrea Zonca", "link": "https://stackoverflow.com/users/597609/andrea-zonca"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1429138989, "post_id": 29662362, "comment_id": 47464336, "body": "need 15 characters: g++"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1429140708, "post_id": 29662362, "comment_id": 47464955, "body": "I&#39;ve never seen g++ doing <code>?</code> in its output. Are you looking at Eclipse&#39;s tooltip?"}, {"owner": {"reputation": 7269, "user_id": 597609, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f06fbe276a86734c80c4845319e25abb?s=128&d=identicon&r=PG", "display_name": "Andrea Zonca", "link": "https://stackoverflow.com/users/597609/andrea-zonca"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1429141138, "post_id": 29662362, "comment_id": 47465097, "body": "@T.C. yes, it is the tooltip, I tested now running cmake from the command line and there it works. so it must be something in the Eclipse configuration."}, {"owner": {"reputation": 1133, "user_id": 1444170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad37ccfda68bd1fd0fe3c38c7e15939?s=128&d=identicon&r=PG", "display_name": "Paul Omta", "link": "https://stackoverflow.com/users/1444170/paul-omta"}, "edited": false, "score": 2, "creation_date": 1429189921, "post_id": 29662362, "comment_id": 47489138, "body": "My best guess is that the indexer doesn&#39;t know CUfunction and CUmodule. Perhaps you should add paths to files where they are included explicitly? (search for preprocessor in the project settings)"}, {"owner": {"reputation": 7269, "user_id": 597609, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f06fbe276a86734c80c4845319e25abb?s=128&d=identicon&r=PG", "display_name": "Andrea Zonca", "link": "https://stackoverflow.com/users/597609/andrea-zonca"}, "reply_to_user": {"reputation": 1133, "user_id": 1444170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad37ccfda68bd1fd0fe3c38c7e15939?s=128&d=identicon&r=PG", "display_name": "Paul Omta", "link": "https://stackoverflow.com/users/1444170/paul-omta"}, "edited": false, "score": 0, "creation_date": 1429199009, "post_id": 29662362, "comment_id": 47496594, "body": "@PaulOmta that&#39;s it! thanks, I looked at the indexer options, I doubled the file size limits and reran the indexer, error gone! Please write this as an answer."}], "answers": [{"owner": {"reputation": 1133, "user_id": 1444170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad37ccfda68bd1fd0fe3c38c7e15939?s=128&d=identicon&r=PG", "display_name": "Paul Omta", "link": "https://stackoverflow.com/users/1444170/paul-omta"}, "is_accepted": true, "score": 1, "last_activity_date": 1429270231, "creation_date": 1429270231, "answer_id": 29697976, "question_id": 29662362, "link": "https://stackoverflow.com/questions/29662362/question-mark-instead-of-class-name-in-eclipse-c/29697976#29697976", "title": "Question mark instead of class name in Eclipse C++", "body": "<p>You get question marks if the indexer doesn't know your types.</p>\n\n<p>You can search for unresolved include files with the menu option: Project -> C/C++ Index -> Search for Unresolved Includes. (Eclipse Luna)</p>\n\n<p>Folders of files that show up in that search can be added in the project settings under: C/C++ General -> Preprocessor Include Paths, Entries tab, CDT User Setting Entries (may need to be enabled in the Providers tab). Note that there are separate settings for each programming language.</p>\n"}], "owner": {"reputation": 7269, "user_id": 597609, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f06fbe276a86734c80c4845319e25abb?s=128&d=identicon&r=PG", "display_name": "Andrea Zonca", "link": "https://stackoverflow.com/users/597609/andrea-zonca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 0, "accepted_answer_id": 29697976, "answer_count": 1, "score": 2, "last_activity_date": 1429270231, "creation_date": 1429138475, "question_id": 29662362, "link": "https://stackoverflow.com/questions/29662362/question-mark-instead-of-class-name-in-eclipse-c", "title": "Question mark instead of class name in Eclipse C++", "body": "<p>In Eclipse CDT I have a C++ method defined as:</p>\n\n<pre><code>CUfunction getKernel(CUmodule&amp; module, const std::string&amp; name);\n</code></pre>\n\n<p>it uses <code>CUfunction</code> and <code>CUmodule</code> that are defined in <code>cuda.h</code> which is correctly imported.</p>\n\n<p>However when Eclipse tries to compile this, I get an error on this method:</p>\n\n<pre><code>Invalid arguments '\nCandidates are:\n? getKernel(? &amp;, const std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt;&gt; &amp;)\n'\n</code></pre>\n\n<p>Does it mean that for some reason it cannot find <code>CUfunction</code> and <code>CUmodule</code> classes?\nHowever in the same source file I use them without any complaint by Eclipse...</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "edited": false, "score": 0, "creation_date": 1429138343, "post_id": 29662297, "comment_id": 47464115, "body": "This doesn&#39;t seem to be a &quot;I am writing code, I am having problems with this code&quot; question, which pretty much makes it outside of the scope of this particular SE site. You might try blender.stackexchange.com"}, {"owner": {"reputation": 492, "user_id": 1413737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FYHEm.jpg?s=128&g=1", "display_name": "Mewa", "link": "https://stackoverflow.com/users/1413737/mewa"}, "edited": false, "score": 1, "creation_date": 1429139348, "post_id": 29662297, "comment_id": 47464471, "body": "Heh, I did this same thing a few years ago. I wouldn&#39;t bother doing a single file. I exported all part separately, and then kept track of rotation. I did a trial-and-error approach to finding lengths of the digits, but this only had to be done once (I hardcoded it in). In your case, if the hand is simple enough this wouldn&#39;t be too difficult. <a href=\"https://www.youtube.com/watch?v=uJO5sLP_vKY&amp;feature=plcp\" rel=\"nofollow noreferrer\">This is what my final result looked like</a>. If you&#39;re interested, I can post my code when I get home (really have to run right now)."}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 1544471, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/50ab901db76d17788c2e6826ebede740?s=128&d=identicon&r=PG", "display_name": "Szczepan", "link": "https://stackoverflow.com/users/1544471/szczepan"}, "edited": false, "score": 0, "creation_date": 1431036073, "post_id": 29662465, "comment_id": 48335744, "body": "Sorry for idle but I was thinking about solution. Instead of move back You can remember current position and for rotation set position to 0 or change order of multiplication. But I was working on other idea. Suppose we got 3 arms. Can I first rotate third arm, then move to his position, then rotate again third arm by same angle as second one and move to second one position and again rotate third arm by same angle as first and then move in xyz axis same as first?"}], "owner": {"reputation": 46, "user_id": 4788577, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xzg4-W8-JY8/AAAAAAAAAAI/AAAAAAAAATA/oACdYCbris0/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/4788577/robert"}, "is_accepted": false, "score": 0, "last_activity_date": 1429139047, "creation_date": 1429139047, "answer_id": 29662465, "question_id": 29662297, "link": "https://stackoverflow.com/questions/29662297/opengl-simple-3d-robotic-arm/29662465#29662465", "title": "OpenGL simple 3D robotic arm", "body": "<p>Have you considered rigging the object as you would the arm of a human? That way the objects are all linked and don't get out of sync. and then animations can be applied to the rig as a whole. Less calculations, and easier for you.</p>\n\n<p>Examples (other pages from this site are helpful as well):\n<a href=\"http://www.blender.org/api/htmlI/x7613.html\" rel=\"nofollow\">http://www.blender.org/api/htmlI/x7613.html</a>\n<a href=\"http://www.blender.org/api/htmlI/x7891.html\" rel=\"nofollow\">http://www.blender.org/api/htmlI/x7891.html</a></p>\n\n<p>Reference:\n<a href=\"http://wiki.blender.org/index.php/Doc:2.6/Manual/Rigging\" rel=\"nofollow\">http://wiki.blender.org/index.php/Doc:2.6/Manual/Rigging</a></p>\n"}, {"comments": [{"owner": {"reputation": 5944, "user_id": 739912, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ecb4e59183a439d978bb0598c94eee04?s=128&d=identicon&r=PG", "display_name": "Felix K.", "link": "https://stackoverflow.com/users/739912/felix-k"}, "edited": false, "score": 0, "creation_date": 1440713255, "post_id": 29681133, "comment_id": 52400252, "body": "Legacy OpenGL as answer? Really?"}, {"owner": {"reputation": 492, "user_id": 1413737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FYHEm.jpg?s=128&g=1", "display_name": "Mewa", "link": "https://stackoverflow.com/users/1413737/mewa"}, "reply_to_user": {"reputation": 5944, "user_id": 739912, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ecb4e59183a439d978bb0598c94eee04?s=128&d=identicon&r=PG", "display_name": "Felix K.", "link": "https://stackoverflow.com/users/739912/felix-k"}, "edited": false, "score": 0, "creation_date": 1440714185, "post_id": 29681133, "comment_id": 52400583, "body": "@FelixK., I don&#39;t see why not. The OP never answered anyways and this is a valid solution. It&#39;s not like it was accepted."}, {"owner": {"reputation": 5944, "user_id": 739912, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ecb4e59183a439d978bb0598c94eee04?s=128&d=identicon&r=PG", "display_name": "Felix K.", "link": "https://stackoverflow.com/users/739912/felix-k"}, "edited": false, "score": 0, "creation_date": 1440759479, "post_id": 29681133, "comment_id": 52417402, "body": "Because it might lead other programmers to use the deprecated OpenGL."}], "owner": {"reputation": 492, "user_id": 1413737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FYHEm.jpg?s=128&g=1", "display_name": "Mewa", "link": "https://stackoverflow.com/users/1413737/mewa"}, "is_accepted": false, "score": 1, "last_activity_date": 1429202739, "last_edit_date": 1492088258, "creation_date": 1429202739, "answer_id": 29681133, "question_id": 29662297, "link": "https://stackoverflow.com/questions/29662297/opengl-simple-3d-robotic-arm/29681133#29681133", "title": "OpenGL simple 3D robotic arm", "body": "<p>You haven't responded to the comment, but I figured I'd post this code anyways. I wrote this to render a 3D robotic hand in OpenGL. I had the blender model files for all the fingers and the hand (made by someone else), which I exported individually to .obj files.</p>\n\n<p>The final result can be seen <a href=\"https://www.youtube.com/watch?v=uJO5sLP_vKY&amp;feature=plcp\" rel=\"nofollow noreferrer\">here</a>. As you can see, I also added the functionality to change the viewpoint using the mouse. I determined the offsets for the finger phalanges via trial-and-error approach, but perhaps you can find the offset between the points using Blender as described <a href=\"https://blender.stackexchange.com/questions/19772/how-to-measure-a-distance-between-two-points\">here</a>. I cannot test this right now since I don't have Blender on my work computer. </p>\n\n<p>The code below describes as I implemented this. I broke it up so that I can write some explanation, but putting all the pieces sequentially will generate my complete function to draw a <strong>single</strong> finger attached to a hand.</p>\n\n<p>My drawing function starts as:</p>\n\n<pre><code>double t_x, t_y, t_z;\nglClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT); // Clear screen and depth buffer\nglLoadIdentity();\n\n// Set viewpoint:\ngluLookAt(eyex+3.0f, eyey+3.0f, eyez+3.0f, focusx, focusy, focusz, 0, 1, 0);\nglPushMatrix();\n\nglRotatef(g_xRotation, 0,1,0); // Rotate with mouse (g_x and g_y are determined elsewhere)\nglRotatef(g_yRotation, 1,0,0);\n</code></pre>\n\n<p>Now that we are set up at the origin (rotated as the mouse directed), we can start off by drawing the palm of the hand. No shifting is required (it is at the origin).</p>\n\n<pre><code>// DRAW PALM\nglColor3f(1.0f, 1.0f, 1.0f); // Use proper color - white\npalmHand -&gt; draw();\n</code></pre>\n\n<p>After the palm is rendered, we move to draw the first finger. The 1.87f in the translate is determined experimentally. The value here also depended on my quality of exporting items from Blender, but once you export it once, it will not change. (<em>I'm actually rather surprised at the rather smug comments I left for myself - this code is a few years old</em>). The phalanges only rotate about one axis, and the rotation values (angles) are stored in <code>f_p[]</code>.</p>\n\n<pre><code>// DRAW FINGER 1\n// CONSTANT: Move to first vertex\nglTranslatef(0.0f, 0.0f, 1.87f); \n\nglRotatef(f_p[0].theta, 0, 0, 1); // Do rotation for phalanx 1 with specified angle\nglColor3f(16.0f/255.0f, 78.0f/255.0f, 139.0f/255.0f); // Use proper color - blue\nphalanx1Hand -&gt; draw(); \n\n// CONSTANT: Necessary adjustment because of model file offset (nobody's perfect, okay?)\nglTranslatef(0.0f, 0.03f, 0.0f);\n</code></pre>\n\n<p>Drawing the second (middle) phalanx follows the same process as the bottom one, except it rotates around a different axis.</p>\n\n<pre><code>// CONSTANT: Move to second vertex\nglTranslatef(1.3f, 0.0f, 0.0f); \n\nglRotatef(f_p[1].theta, 0, 1, 0); // Do rotation for phalanx 2 with specified angle\nphalanx2Hand -&gt; draw();\n</code></pre>\n\n<p>There was no extra offset for phalanx #2 because I guess when I exported it from Blender, I lined up the model properly. </p>\n\n<pre><code>// CONSTANT: Rotate to third vertex\nglRotatef(-90.0f, 0, 1, 0);\n\n// CONSTANT: Move to third vertex\nglTranslatef(2.0f, 0.0f, 0.0f);\n\nglRotatef(f_p[2].theta, 0, 1, 0); // Do rotation for phalanx 3 with specified angle\nphalanx3Hand -&gt; draw();\n</code></pre>\n\n<p>That completes drawing a single finger. Now we reverse all the rotations and translations to go back to the starting location (because there were so many rotations in the way, you have to make sure you keep the order consistent, or you'll end up somewhere else and fingers will be all over the place).</p>\n\n<pre><code>// CONSTANT: Return to origin\n// Undo rotations and translations in proper order\nglRotatef((-1.0f*f_p[2].theta), 0, 1, 0); // Phalanx 3 rotation\nglTranslatef(-2.0f, 0.0f, 0.0f); // Phalanx 3 translation\nglRotatef(90.0f, 0, 1, 0); // Rotation to Phalanx 3\nglRotatef((-1.0f*f_p[1].theta), 0, 1, 0); // Phalanx 2\nglTranslatef(-1.3f, -0.03f, 0.0f); // Phalanx 2 translation and adjustment\nglRotatef((-1.0f*f_p[0].theta), 0, 0, 1); // Rotation to Phalanx 1\nglTranslatef(0.0f, 0.0f, -1.87f); // Phalanx 1 translation\n</code></pre>\n\n<p>Lastly, since my model has two fingers on one side, and one on the other, I had to rotate before drawing the other two fingers:</p>\n\n<pre><code>// CONSTANT: Keep parts right side up\nglRotatef(90.0f, 0, 0, 1);\n</code></pre>\n\n<p>At this point I would follow the same process for fingers 2 and 3 (basically the code starting at the <code>// DRAW FINGER 1</code> comment). You probably would not need to do this since I think your model doesn't have all these extra parts. At this point, you could forego all the rotations/translations back to origin and just finish with:</p>\n\n<pre><code>glPopMatrix();\n</code></pre>\n\n<p>and return to whatever you were doing before (waiting for user input, etc).</p>\n\n<p>The <code>draw()</code> functions I use is a standard one to draw triangles using the data extracted from the .obj files.</p>\n"}, {"owner": {"reputation": 353, "user_id": 1544471, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/50ab901db76d17788c2e6826ebede740?s=128&d=identicon&r=PG", "display_name": "Szczepan", "link": "https://stackoverflow.com/users/1544471/szczepan"}, "is_accepted": false, "score": 1, "last_activity_date": 1440710883, "creation_date": 1440710883, "answer_id": 32259744, "question_id": 29662297, "link": "https://stackoverflow.com/questions/29662297/opengl-simple-3d-robotic-arm/32259744#32259744", "title": "OpenGL simple 3D robotic arm", "body": "<p>To find more about solution please refer to <a href=\"https://en.wikipedia.org/wiki/Denavit%E2%80%93Hartenberg_parameters\" rel=\"nofollow\">denavit hartenberg notation</a></p>\n\n<p>My solution was simple. I have class kinematicChain were I stored a vectors with positions, orientations of all models. I iterate through all elements in this class using for loop, and multiply position and rotation of each element.</p>\n\n<p>Suppose we had 3 elements\nPosition of the last element in this chain will be(in pseudocode):</p>\n\n<pre><code>currentElementposition * currentElementorientation \n</code></pre>\n\n<p>Position of second element:</p>\n\n<pre><code>(currentElementPosition*currentElementorientation)*positionOfPreviousElement\n</code></pre>\n\n<p>Position of first element:</p>\n\n<pre><code>(currentElementPosition*currentElementorientation)*positionOfPreviousElement\n</code></pre>\n\n<p>And later object is scaled.</p>\n\n<p>Move and rotate is 4x4 matrix</p>\n\n<pre><code>glm::mat4 rotate;\nglm::mat4 move;\n</code></pre>\n\n<p>Function that I use:</p>\n\n<pre><code>void Model::moveModel(std::vector&lt;glm::vec3&gt; &amp; positions, std::vector&lt;glm::vec3&gt; &amp; orienations, int id)\n{\n    try\n    {\n        if (positions.size() != orienations.size()) throw \"Size of positions vector should be equal to orienations vector\";\n\n        glm::mat4 objPosition;\n\n        for (int i = id ; i &gt;= 0  ; --i)\n        {\n            rotate = glm::eulerAngleYXZ(orienations[i].y, orienations[i].x, orienations[i].z);\n            move = glm::translate(glm::mat4(), positions[i]);\n            objPosition = (move * rotate) * objPosition;\n        }\n\n        objScale = scale(glm::mat4(), objSize); // scaling object\n        objPosition = objPosition * objScale;\n\n        glUniformMatrix4fv(objPositionID, 1, GL_FALSE, &amp;objPosition[0][0]);\n        glUniformMatrix4fv(perspectiveGL, 1, GL_FALSE, &amp;perspective[0][0]);\n        glUniformMatrix4fv(lookAtGL, 1, GL_FALSE, &amp;lookAt[0][0]);\n        glUniform3f(lightPositionGL, lightPosition.x, lightPosition.y, lightPosition.z); // przes\u0142anie 3 liczb float\n    }\n    catch(char const * errorMsg)\n    {\n        std::cout &lt;&lt; errorMsg &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 1544471, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/50ab901db76d17788c2e6826ebede740?s=128&d=identicon&r=PG", "display_name": "Szczepan", "link": "https://stackoverflow.com/users/1544471/szczepan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2877, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1440710883, "creation_date": 1429138188, "question_id": 29662297, "link": "https://stackoverflow.com/questions/29662297/opengl-simple-3d-robotic-arm", "title": "OpenGL simple 3D robotic arm", "body": "<p>I want to make simple 3D robotic arm using blender. At the moment I can import obj files and textures, rotate, translate and scale. </p>\n\n<p>Problem:\nTo simplify, robotic arm will have 3 parts, base (cylinder to rotate), and two cuboids. I have no problems with rotating cilinder and cuboids. But these two cuboids have to be connected and I have no idea how to do it. I can use simple sinus and cosinus functions to compute position of second cuboid when first one is rotated but I have no idea how to measure lenth of the object. </p>\n\n<p>Second problem:\nCan I export all 3 objects in one obj file and divide them later in openGL? </p>\n\n<p><img src=\"https://imgur.com/3qm9NuZ.png\" alt=\"my_solution\"></p>\n"}, {"tags": ["c++", "linker-errors", "static-variables"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1429137779, "post_id": 29662190, "comment_id": 47463929, "body": "Did you include the <code>boost</code> in the include path?"}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1429137853, "post_id": 29662190, "comment_id": 47463953, "body": "Yes I did. I am using a lot of boost libraries in the project. And the boost libraries are included. I have also used <code>-lboost_thread-mgw48-mt-d-1_57</code> flag when building"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1429138448, "post_id": 29662190, "comment_id": 47464153, "body": "Did you give a definition of <code>mResource</code> in a translation unit? Not a declaration (like you have there), but a definition. <a href=\"http://stackoverflow.com/questions/16284629/undefined-reference-to-static-variable-c\">Like this</a> and <a href=\"http://programmers.stackexchange.com/questions/145299/why-the-static-data-members-have-to-be-defined-outside-the-class-separately-in-c\">this</a>."}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1429138842, "post_id": 29662190, "comment_id": 47464292, "body": "@Cornstalks I am not sure what you mean. I have given an initializing value for  the static variable which is in the source file as such <code>boost::recursive_mutex  EffectApplication&lt;LG_Thread_NAME&gt;::mResource;</code>"}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1429138998, "post_id": 29662190, "comment_id": 47464340, "body": "I am not sure how this is a duplicate. I have initialized the static object outside the class. In the links provided the OPS have not done that"}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1429139065, "post_id": 29662190, "comment_id": 47464363, "body": "Are you compiling and linking to that source file?"}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1429139179, "post_id": 29662190, "comment_id": 47464412, "body": "Yes. Also could you tell me how this question is a duplicate ? I might be missing something then because from what I have read from those posted links I am already doing that."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 0, "creation_date": 1429139426, "post_id": 29662190, "comment_id": 47464503, "body": "@JamesFranco: It would be a whole lot easier to tell you what you&#39;re doing wrong if you provided a <a href=\"http://stackoverflow.com/help/mcve\">MVCE</a>. My guess is that it has to do with how your definition is a <code>template &lt;&gt;</code> that only covers <code>LG_Thread_NAME</code> (rather than a truly generic <code>template &lt;LG_Thread thread&gt;</code>). If you can provide enough details to prove this isn&#39;t a duplicate and properly demonstrate what the issue is, then I&#39;ll vote to reopen. But as it is, there&#39;s not enough details here for me to be convinced otherwise. That MVCE thing I mentioned is critical."}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1429139488, "post_id": 29662190, "comment_id": 47464523, "body": "Thanks for clearing that up. Ill try to build a working example and update this post. thanks"}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1429206144, "post_id": 29662190, "comment_id": 47501383, "body": "So I updated the question with more finding. Apparently I did not mention a macro being involved. I just added that - Hopefully that would reopen the question"}], "answers": [{"owner": {"reputation": 3540, "user_id": 4182275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sF9cb.png?s=128&g=1", "display_name": "NikolayK", "link": "https://stackoverflow.com/users/4182275/nikolayk"}, "is_accepted": false, "score": 0, "last_activity_date": 1429763582, "creation_date": 1429763582, "answer_id": 29813740, "question_id": 29662190, "link": "https://stackoverflow.com/questions/29662190/undefined-reference-with-a-static-instance/29813740#29813740", "title": "undefined reference with a static instance", "body": "<p>The initialization </p>\n\n<pre><code>template&lt;&gt;\nboost::recursive_mutex  EffectApplication&lt;LG_Thread_NAME&gt;::mResource;\n</code></pre>\n\n<p>still is not correct, since you initialize <code>mResource</code> not for all template parameter, but only for specialization with <code>LG_Thread_NAME</code>. So I guess when you try to access it with some another template parameter you've got an error.</p>\n\n<p>Correct way is like this </p>\n\n<pre><code>template&lt;LG_Thread Thread&gt;\nboost::recursive_mutex  EffectApplication&lt;Thread&gt;::mResource;\n</code></pre>\n\n<p>Also I'm not sure with my answer because the error says that the problem is with <code>LT_Wrapper</code> class and template parameter <code>(LT_Wrapper::LT_Thread)0</code> looks strange to me.</p>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429763582, "creation_date": 1429137678, "last_edit_date": 1429206987, "question_id": 29662190, "link": "https://stackoverflow.com/questions/29662190/undefined-reference-with-a-static-instance", "title": "undefined reference with a static instance", "body": "<p>I am currently porting some code from Visual Studio to Mingw GCC.\nIt seems there is a problem when I attempt to use a static variable .\nThis code works fine in Visual studio so I am not sure what the problem might be here. I have pasted an outline of what the code looks like. If this is insufficient I could put in more.</p>\n\n<pre><code>Header file: .h\nnamespace LG_Wrapper\n{\n    template &lt;LG_Thread Thread&gt;\n    class EffectApplication : public ktApplication\n    {\n    public:\n    static EffectApplication&lt;Thread&gt;&amp; GetInstance();\n    protected:\n        .....\n        .....\n        static boost::recursive_mutex mResource;\n      }\n}\n\nDECLARE_LEGACY_TYPES(EffectApplication);\n\n\nSource File: .cpp\nnamespace LG_Wrapper\n{\n\n    template&lt;&gt;\n    boost::recursive_mutex  EffectApplication&lt;LG_Thread_NAME&gt;::mResource;  //LG_Thread_NAME type discussed below\n\n    template &lt;LG_Thread Thread&gt;\n    EffectApplication&lt;Thread&gt;&amp; EffectApplication&lt;Thread&gt;::GetInstance()\n    {\n        boost::recursive_mutex::scoped_lock mutex( mResource ); //Error with mResource\n\n        static EffectApplication&lt;Thread&gt; instance;\n        return instance;\n    }\n    ....\n}\n</code></pre>\n\n<p>Now I am not sure about the <code>LG_Thread_NAME</code> type. \nAfter going through the code I noticed that I define the following in the project settings</p>\n\n<pre><code>LG_THREAD_NAME=GAME\n</code></pre>\n\n<p>This definition comes into play with this macro somewhere else in the code</p>\n\n<pre><code>#define DECLARE_LEGACY_TYPES(...)\n</code></pre>\n\n<p>I am having issue accessing <code>mResource</code> The code builds fine if I comment out the statement</p>\n\n<pre><code>boost::recursive_mutex::scoped_lock mutex( mResource );\n</code></pre>\n\n<p>Any suggestions on why I might be getting the following error with the above code ?</p>\n\n<pre><code>(.text$_ZN10KT_Wrapper17EffectApplicationILNS_9LT_ThreadE0EE11GetInstanceEv[_ZN10LT_Wrapper17EffectApplicationILNS_9LT_ThreadE0EE11GetInstanceEv]+0x11): undefined reference to `LT_Wrapper::EffectApplication&lt;(LT_Wrapper::LT_Thread)0&gt;::mResource'\n</code></pre>\n\n<p><strong>Update:</strong>\nI am certain that there is something wrong with the variable mResource because in the static method. If I do this it builds fine</p>\n\n<pre><code>  boost::recursive_mutex l;\nboost::recursive_mutex::scoped_lock mutex( l );\n</code></pre>\n\n<p><strong>Duplicate Question Issue:</strong>\nI am not sure how this question is a duplicate of the links provided. In all the links provided the ops have not initialized their static variables. Here I have initialized my static variable outside the class.</p>\n"}, {"tags": ["c++", "string", "templates"], "comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1429148766, "post_id": 29662144, "comment_id": 47467209, "body": "Why are you even using a template?  Its seems like a simple overload would do what you want and be simpler..."}, {"owner": {"reputation": 1338, "user_id": 1453339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/55bd5597715608a47f4afe89d22e71b6?s=128&d=identicon&r=PG", "display_name": "Abu Shumon", "link": "https://stackoverflow.com/users/1453339/abu-shumon"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1429170778, "post_id": 29662144, "comment_id": 47475556, "body": "THAT&#39;S STRANGE! WHY DOWNVOTE FOR THE QUESTION!!!???"}, {"owner": {"reputation": 1338, "user_id": 1453339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/55bd5597715608a47f4afe89d22e71b6?s=128&d=identicon&r=PG", "display_name": "Abu Shumon", "link": "https://stackoverflow.com/users/1453339/abu-shumon"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1429230300, "post_id": 29662144, "comment_id": 47513418, "body": "@ChrisDodd That&#39;s a good option. Didn&#39;t came in mind initially. I&#39;ll implement this."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1429147539, "post_id": 29663436, "comment_id": 47466869, "body": "<code>calculateBC()</code> performs arithmetic operations on its input values, so it does not make sense to make it a template function, especially since the <code>TYPE</code> of <code>C()</code> is <code>std::string</code>."}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1429147679, "post_id": 29663436, "comment_id": 47466913, "body": "if it doesn&#39;t make sense to template <code>calculateBC()</code> so it can be called with <code>strings</code>, it doesn&#39;t make sense to call <code>C()</code> with <code>strings</code> as the template parameter."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1429147745, "post_id": 29663436, "comment_id": 47466934, "body": "That depends on where the input is coming from.  For example, if the input is coming from a UI, it would make sense to pass strings.  You just have to convert them first before calculating."}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1429147840, "post_id": 29663436, "comment_id": 47466963, "body": "sure, good point.  I&#39;ll edit my answer a bit.  I didn&#39;t take a super close look the first time through because I was on mobile."}], "owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "is_accepted": false, "score": 0, "last_activity_date": 1429147894, "last_edit_date": 1429147894, "creation_date": 1429145062, "answer_id": 29663436, "question_id": 29662144, "link": "https://stackoverflow.com/questions/29662144/how-to-pass-two-strings-as-parameters-into-a-c-template-template-function/29663436#29663436", "title": "How to pass two strings as parameters into a C++ template template function", "body": "<p>Your templated function calls <code>calculateBC</code>, which only accepts <code>int</code>s. You need to make <code>calculateBC</code> a template function as well.  It only works with <code>float</code> and <code>int</code> because an implict conversion from <code>float</code> to <code>int</code> happens.</p>\n\n<p>Alternatively, you could rethink your structure here, whether it means converting to <code>ints</code> inside <code>C()</code>, or even before calling <code>C()</code> and removing the template.</p>\n"}, {"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1429148846, "post_id": 29663861, "comment_id": 47467229, "body": "A template here seems like overkill -- just define two overloaded versions of  <code>C</code> (one with ints and one with strings)."}, {"owner": {"reputation": 1338, "user_id": 1453339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/55bd5597715608a47f4afe89d22e71b6?s=128&d=identicon&r=PG", "display_name": "Abu Shumon", "link": "https://stackoverflow.com/users/1453339/abu-shumon"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1429606718, "post_id": 29663861, "comment_id": 47665801, "body": "@ChrisDodd reason of making <code>C</code> template is because calling <code>C</code> can be in various ways such as <code>C(int, int), C(float, float), C(string, string)</code>. As I mentioned in the problem works fine for other input except <code>string</code> therefore I think template would be handy as @RemyLebeau proposed."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 1338, "user_id": 1453339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/55bd5597715608a47f4afe89d22e71b6?s=128&d=identicon&r=PG", "display_name": "Abu Shumon", "link": "https://stackoverflow.com/users/1453339/abu-shumon"}, "edited": false, "score": 1, "creation_date": 1430009912, "post_id": 29663861, "comment_id": 47869976, "body": "@johnshumon: That doesn&#39;t require a template, it just requires overloading.  In fact, a template just gets in the way."}], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1429147993, "creation_date": 1429147993, "answer_id": 29663861, "question_id": 29662144, "link": "https://stackoverflow.com/questions/29662144/how-to-pass-two-strings-as-parameters-into-a-c-template-template-function/29663861#29663861", "title": "How to pass two strings as parameters into a C++ template template function", "body": "<p><code>calculateBC()</code> only accepts <code>int</code> values as input and performs arithmetic operations on them.  However, the <code>TYPE</code> of <code>C()</code> is <code>std::string</code>, not <code>int</code>.  So you need to convert the string values to integer values before you can call <code>calculateBC()</code>, eg:</p>\n\n<pre><code>// Function to calculate bionomial coefficient.  \ntemplate &lt;typename TYPE&gt;\nint C(TYPE &amp;n, TYPE &amp;k) {    \n    //...\n}\n\n// specialized Function for string parameters.\ntemplate &lt;&gt;\nint C&lt;std::string&gt;(std::string &amp;n, std::string &amp;k) {\n    int i_n = std::atoi(n.c_str());\n    int i_k = std::atoi(k.c_str());\n    // validate as needed...\n    return C(i_n, i_k);\n}\n</code></pre>\n"}], "owner": {"reputation": 1338, "user_id": 1453339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/55bd5597715608a47f4afe89d22e71b6?s=128&d=identicon&r=PG", "display_name": "Abu Shumon", "link": "https://stackoverflow.com/users/1453339/abu-shumon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "accepted_answer_id": 29663861, "answer_count": 2, "score": -2, "last_activity_date": 1429151270, "creation_date": 1429137477, "last_edit_date": 1429151270, "question_id": 29662144, "link": "https://stackoverflow.com/questions/29662144/how-to-pass-two-strings-as-parameters-into-a-c-template-template-function", "title": "How to pass two strings as parameters into a C++ template template function", "body": "<p>Following is the template function I am using  </p>\n\n<pre><code>// Function to calculate bionomial coefficient.  \ntemplate &lt;typename TYPE&gt;\nint C(TYPE &amp;n, TYPE &amp;k) {    \n\n    if (!parametersChecking(n, k)) {\n        return false;\n    }\n    else{\n        return claculateBC(n,k);\n    }\n\n}\n</code></pre>\n\n<p>I am passing two string parameter to the function. But it says </p>\n\n<blockquote>\n  <p>error: cannot convert \u2018std::string {aka std::basic_string}\u2019 to  \u2018int\u2019 for argument '1' to 'int calculateBC(int, int)'</p>\n</blockquote>\n\n<p>But works fine if I pass <code>int</code> and <code>float</code> type parameters. I have tried stringstream, it does help only if the both the parameters are some text, but if one is text and another is number then it doesn't return desired result.</p>\n\n<p>Passing the value from another function i.e.</p>\n\n<pre><code>void test3_string(int testNo) {\n\n    std::string n = \"john\"; std::string k = \"doe\";\n    int pass = 0;\n\n\n//  std::stringstream ss(n);\n//  ss &gt;&gt; tempN;\n//  std::cout &lt;&lt; tempN &lt;&lt; std::endl;\n\n//  std::stringstream ss2(k);\n//  ss2 &gt;&gt; tempK;\n//  std::cout &lt;&lt; tempK &lt;&lt; std::endl;    \n    pass = C(n, k);\n    printStatus(pass, testNo-1);\n}\n</code></pre>\n\n<p>So can anyone please help how can I pass string to the function?  </p>\n\n<p><strong>Additional Info:</strong>  </p>\n\n<pre><code>int claculateBC(int n, int k){\n\n    int bionomial_coefficient = 1;\n\n    if (n == k || k == 0) {\n        return 1;\n    }\n    int nMinusK = n - k;    \n    n = eachValuesFactorial(n);\n    k = eachValuesFactorial(k);\n    nMinusK = eachValuesFactorial(nMinusK);\n\n    bionomial_coefficient = n / (k * nMinusK);\n\n    return bionomial_coefficient;\n}\n</code></pre>\n\n<p>Here is the full program if anyone wants to have a look: <a href=\"http://repl.it/ivw/4\" rel=\"nofollow\">Bionomial-Coefficient</a></p>\n"}, {"tags": ["android", "c++", "opencv", "android-studio", "android-ndk"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1429138304, "post_id": 29662061, "comment_id": 47464102, "body": "You need to add the path to the .hpp in your LOCAL_INCLUDES, otherwise it doesn&#39;t know where to find it. Of course there&#39;s supposed to be issues with radle and the NDK, so good luck."}], "answers": [{"comments": [{"owner": {"reputation": 771, "user_id": 1941949, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f44579959f5a2657999731c1032e98c4?s=128&d=identicon&r=PG", "display_name": "Romantic Electron", "link": "https://stackoverflow.com/users/1941949/romantic-electron"}, "edited": false, "score": 0, "creation_date": 1429169665, "post_id": 29662517, "comment_id": 47474906, "body": "I am getting an error saying <code>Error:(23, 0) Could not find property &#39;NdkCompile&#39; on com.android.build.gradle.AppExtension_Decorated@a550b6.</code>"}, {"owner": {"reputation": 771, "user_id": 1941949, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f44579959f5a2657999731c1032e98c4?s=128&d=identicon&r=PG", "display_name": "Romantic Electron", "link": "https://stackoverflow.com/users/1941949/romantic-electron"}, "edited": false, "score": 0, "creation_date": 1429180646, "post_id": 29662517, "comment_id": 47482039, "body": "Thanks , I  was able to run the app after inclusion of <code>com.android.build.gradle.tasks.NdkCompile;</code>in my com.android.build.gradle.tasks.NdkCompile;"}, {"owner": {"reputation": 507, "user_id": 1120115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/792470c29ccfe94f2386117c6ee11cb6?s=128&d=identicon&r=PG", "display_name": "JParrish88", "link": "https://stackoverflow.com/users/1120115/jparrish88"}, "reply_to_user": {"reputation": 771, "user_id": 1941949, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f44579959f5a2657999731c1032e98c4?s=128&d=identicon&r=PG", "display_name": "Romantic Electron", "link": "https://stackoverflow.com/users/1941949/romantic-electron"}, "edited": false, "score": 1, "creation_date": 1450084406, "post_id": 29662517, "comment_id": 56267814, "body": "@RomanticElectron could you expand on the fix? Where did you add the above modification?"}, {"owner": {"reputation": 1628, "user_id": 98606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9e8bf8a86a4bbef2cd4cacd79f430320?s=128&d=identicon&r=PG", "display_name": "Numenor", "link": "https://stackoverflow.com/users/98606/numenor"}, "reply_to_user": {"reputation": 507, "user_id": 1120115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/792470c29ccfe94f2386117c6ee11cb6?s=128&d=identicon&r=PG", "display_name": "JParrish88", "link": "https://stackoverflow.com/users/1120115/jparrish88"}, "edited": false, "score": 1, "creation_date": 1455875906, "post_id": 29662517, "comment_id": 58695879, "body": "@JParrish88 use import at beginning of the same gradle build file like this: import com.android.build.gradle.tasks.NdkCompile;"}], "owner": {"reputation": 427, "user_id": 4637580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HtxEZagbJis/AAAAAAAAAAI/AAAAAAAAAHI/yH5rFemq1CI/photo.jpg?sz=128", "display_name": "Eduardo Gomez", "link": "https://stackoverflow.com/users/4637580/eduardo-gomez"}, "is_accepted": false, "score": 2, "last_activity_date": 1429139324, "creation_date": 1429139324, "answer_id": 29662517, "question_id": 29662061, "link": "https://stackoverflow.com/questions/29662061/opencv-hpp-not-found-android-ndk/29662517#29662517", "title": "opencv.hpp not found ? Android NDK", "body": "<p>You should only include header files strictly required by certain source i.e. </p>\n\n<pre><code>#include &lt;DetectionBasedTracker.h&gt;\n#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/contrib/detection_based_tracker.hpp&gt;\n</code></pre>\n\n<p>Considering the accepted answer you're referencing as a possible solution for your issue as a reference the directory where you should put SO files are set up on <em>app/build.grade</em>:</p>\n\n<pre><code>sourceSets.main {\n    jniLibs.srcDir 'src/main/libs' //set .so files location to libs\n    jni.srcDirs = [] //Disable automatic ndk-build call\n}\n\ntasks.withType(NdkCompile) {\n    compileTask -&gt; compileTask.enabled = false\n}\n</code></pre>\n\n<p>Nevertheless I'd still try to reference OpenCV.mk in your Android.mk: </p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\nOPENCV_CAMERA_MODULES:=on\nOPENCV_INSTALL_MODULES:=off\nOPENCV_LIB_TYPE:=STATIC\ninclude /Users/egomez/dev/OpenCV4AndroidWorkspace/OpenCV-android-sdk/sdk/native/jni/OpenCV.mk\n</code></pre>\n\n<p>Hope it helps. </p>\n"}], "owner": {"reputation": 771, "user_id": 1941949, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f44579959f5a2657999731c1032e98c4?s=128&d=identicon&r=PG", "display_name": "Romantic Electron", "link": "https://stackoverflow.com/users/1941949/romantic-electron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3948, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434171772, "creation_date": 1429137067, "last_edit_date": 1495541778, "question_id": 29662061, "link": "https://stackoverflow.com/questions/29662061/opencv-hpp-not-found-android-ndk", "title": "opencv.hpp not found ? Android NDK", "body": "<p>I have all the prebuilt Open CV <code>.so</code> files in the <code>jniLibs</code> directory while I have some <code>C++</code> files which use the OpenCV as well.I have the following <code>Android.mk</code> and <code>Application.mk</code> scripts .</p>\n\n<p><code>Android.mk</code></p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE:= opencv-prebuilt\nLOCAL_SRC_FILES:= ../jniLibs/$(TARGET_ARCH_ABI)/libopencv_java.so\nLOCAL_EXPORT_C_INCLUDES:= $(LOCAL_PATH)/build/include\ninclude $(PREBUILT_SHARED_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE     := AN\nLOCAL_SRC_FILES  := A.cpp B.cpp\nLOCAL_SHARED_LIBRARIES := opencv-prebuilt\nLOCAL_C_INCLUDES += $(LOCAL_PATH)\nLOCAL_LDLIBS     += -llog -ldl\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p><code>Application.mk</code></p>\n\n<pre><code>APP_STL := gnustl_static\nAPP_CPPFLAGS := -frtti -fexceptions\nAPP_ABI := armeabi-v7a\nAPP_PLATFORM := android-8\n</code></pre>\n\n<p>Why does it keep giving me error  <code>no such directory or file found</code> and points to <code>#include &lt;opencv2/opencv.hpp&gt;</code> statement in my <code>jni</code> directory when I try to compile?</p>\n\n<p>I have looked at another similar question <a href=\"https://stackoverflow.com/questions/29214015/android-studio-with-opencv-for-android-ndk-opencv-header-files-not-found\">here</a> but I was unable to solve it via the solution</p>\n"}, {"tags": ["c++", "multithreading", "boost"], "comments": [{"owner": {"reputation": 480, "user_id": 5173839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CJDcM.jpg?s=128&g=1", "display_name": "Anton3", "link": "https://stackoverflow.com/users/5173839/anton3"}, "edited": false, "score": 0, "creation_date": 1618302311, "post_id": 29662040, "comment_id": 118554031, "body": "<code>queue</code> allocates a node for each element, but caches node memory when elements are removed. Because all your insertions are first-time insertions, you are essentially measuring allocator performance. Try producing and consuming queue elements in a loop, it should be closer to real-world performance."}], "answers": [{"owner": {"reputation": 56, "user_id": 5662780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d5f57ed12fd798e56523eaf94acc14?s=128&d=identicon&r=PG&f=1", "display_name": "qRayner", "link": "https://stackoverflow.com/users/5662780/qrayner"}, "is_accepted": false, "score": 0, "last_activity_date": 1449739813, "creation_date": 1449739813, "answer_id": 34198099, "question_id": 29662040, "link": "https://stackoverflow.com/questions/29662040/compare-among-boostlockfreespsc-queue-boostlockfreequeue-serial-queue/34198099#34198099", "title": "compare among boost::lockfree::spsc_queue, boost::lockfree::queue, serial queue operation", "body": "<p>Yes, you are right!</p>\n\n<p>The lockfree queues can be accessed concurrently in an multi threaded environment without producing any data races.</p>\n\n<ul>\n<li>boost::lockfree::spsc_queue: a single produce single consumer queue </li>\n<li>boost::lockfree::queue:a multi producer multi consumer queue</li>\n</ul>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/lockfree.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_59_0/doc/html/lockfree.html</a></p>\n"}, {"owner": {"reputation": 183, "user_id": 4119156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lBGugoWscQI/AAAAAAAAAAI/AAAAAAAAAFQ/XbODxH0Kzw0/photo.jpg?sz=128", "display_name": "George Roger", "link": "https://stackoverflow.com/users/4119156/george-roger"}, "is_accepted": false, "score": 0, "last_activity_date": 1454418725, "creation_date": 1454418725, "answer_id": 35154502, "question_id": 29662040, "link": "https://stackoverflow.com/questions/29662040/compare-among-boostlockfreespsc-queue-boostlockfreequeue-serial-queue/35154502#35154502", "title": "compare among boost::lockfree::spsc_queue, boost::lockfree::queue, serial queue operation", "body": "<p>Lock free queues are of interest in real-time systems to avoid priority inversion. For example, if you are making an audio application, the GUI thread will need to communicate with the audio thread. If a queue with locks is used, and the low-priority GUI thread holds a lock to the queue for any length of time, when the audio thread, gets held at that lock, the audio will glitch. Using a lock free queue allows the audio thread to do it's call to the queue, without ever getting stuck waiting for a low-priority thread.</p>\n"}], "owner": {"reputation": 197, "user_id": 3658306, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/7de74f6c88604021ac45b868b398e293?s=128&d=identicon&r=PG&f=1", "display_name": "user3658306", "link": "https://stackoverflow.com/users/3658306/user3658306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1389, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1454418725, "creation_date": 1429136950, "question_id": 29662040, "link": "https://stackoverflow.com/questions/29662040/compare-among-boostlockfreespsc-queue-boostlockfreequeue-serial-queue", "title": "compare among boost::lockfree::spsc_queue, boost::lockfree::queue, serial queue operation", "body": "<p>I have compared the elapse time used among these three cases, they are boost::lockfree::queue, boost::lockfree::spsc_queue and also the serial code of the producer/consumer queues using std::queue.  I compiled and ran the boost example code of \"spsc_queue.cpp\", \"queue.cpp\" in \"/apps/boost_1_56_0/libs/lockfree/examples\" and below is the serial code to produce/consume the same number of objects.</p>\n\n<p>The elapsed time spent for boost::lockfree::queue to produce/consume 400000000 objects is 290 seconds, and for boost::lockfree::spsc_queue (nowait single producer queue and single consumer queue) is 172.84 second. The code without multithreading is only for 17.35 seconds. I am wondering what's the point to use the multithreading lockfree queue. Is it just a demo to feature these two lockfree queues can be concurrently accessed ? </p>\n\n<pre><code>#include &lt;queue&gt;\n#include &lt;iostream&gt;\n\n\nint producer_count = 0;\nint consumer_count = 0;\n\nstd::queue&lt;int&gt; q;\n\nconst int iterations = 400000000;\n\nvoid producer(void)\n{\n    for (int i = 0; i != iterations; ++i) {\n        int value = ++producer_count;\n        q.push(value);\n    }\n}\n\nvoid consumer(void)\n{\n    int value;\n\n    while (!q.empty()) {\n        value = q.front();\n        q.pop();\n        ++consumer_count;\n    }\n}\n\nint main(int argc, char* argv[])\n{\n    using namespace std;\n\n    producer();\n    consumer();\n\n    cout &lt;&lt; \"produced \" &lt;&lt; producer_count &lt;&lt; \" objects.\" &lt;&lt; endl;\n    cout &lt;&lt; \"consumed \" &lt;&lt; consumer_count &lt;&lt; \" objects.\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "arduino"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 2, "creation_date": 1429137402, "post_id": 29662007, "comment_id": 47463802, "body": "You should never write this much code before testing any of it. You&#39;re trying to get at least two new things working at the same time; develop them in isolation, then hook them together."}], "answers": [{"owner": {"reputation": 1915, "user_id": 4475902, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8283da1024358bce8d1a286b923c360c?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/4475902/konrad"}, "is_accepted": false, "score": 1, "last_activity_date": 1429137692, "last_edit_date": 1429137692, "creation_date": 1429137148, "answer_id": 29662076, "question_id": 29662007, "link": "https://stackoverflow.com/questions/29662007/3d-array-for-arduino/29662076#29662076", "title": "3D array for Arduino", "body": "<p>Under <code>void loop()</code>, you are declaring <code>xSeed</code>, <code>ySeed</code>, and <code>zSeed</code> inside the <code>if</code> block, which makes the variables local to that if block, which means they go out of scope when you exit the if block. Declare them before (outside) the if block instead, before <code>ledBuffer</code>, at the beginning of the <code>void loop()</code> function, since you are trying to use those variables before you have told the compiler that they exist, hence the compiler's message that they were \"not declared in this scope\"</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Also, it seems you want all these functions to operate on the same <code>ledBuffer</code> 3D array. You should consider declaring it as a global variable (if you are using C), or if you are using C++, perhaps consider making it a class, with <code>ledBuffer</code> as an attribute/field.</p>\n"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "is_accepted": false, "score": 0, "last_activity_date": 1429142695, "creation_date": 1429142695, "answer_id": 29663093, "question_id": 29662007, "link": "https://stackoverflow.com/questions/29662007/3d-array-for-arduino/29663093#29663093", "title": "3D array for Arduino", "body": "<p>I have tried to split your code and factorized it. I don't have an Arduino build system I can't test my code.\nI don't understand your mapping x, y, z to pin number I have tried one.</p>\n\n<pre><code>/* Struct for global conf */\nstatic struct {                                                                \n    int ledBuffer[4][4][4];                                                    \n    int ledXY[4][4];                                                           \n    int ledZ[4];                                                               \n} _G;                                                                          \n\nvoid setup() {                                                                 \n    _G.ledXY = {                                                               \n        {22, 24, 26, 28} ,                                                     \n        {30, 32, 34, 36},                                                      \n        {23, 25, 27, 29},                                                      \n        {31, 33, 35, 37}                                                       \n    };                                                                         \n    _G.ledZ = {38,40,42,44};                                                   \n\n    //sets all used pins as output                                                  \n    for(int i = 0; i &lt; 4; i++){                                                \n        pinMode(_G.ledZ[i], OUTPUT);                                           \n        for (int j = 0; j &lt; 4; j++) {                                          \n            pinMode(_G.ledXY[i][j], OUTPUT);                                   \n        }                                                                      \n    }                                                                          \n    allOn(); /* switch on all led*/                                                                   \n    allOff(); /* switch off all led */                                                                  \n}                                                                              \n\nvoid loop() {                                                                  \n    static int xSeed;                                                          \n    static int ySeed;                                                          \n    static int zSeed;                                                          \n\n    _G.ledBuffer[xSeed][ySeed][zSeed] = 0;                                     \n\n    if (zSeed == 0)                                                            \n    {                                                                          \n        xSeed = random(0, 3);                                                  \n        ySeed = random(0, 3);                                                  \n        zSeed = random(0, 3);                                                  \n    } else {                                                                   \n        zSeed--;                                                               \n    }                                                                          \n    _G.ledBuffer[xSeed][ySeed][zSeed] = 1;                                     \n\n    doLight();                                                                 \n} \n\nstatic void doLight();                                                         \n\n    for (int step = 0; step &lt; 80; step++) { /* Perhaps use sleep instead */                                   \n        allOff();                                                              \n        for(int i = 0; i &lt; 4; i++){                                            \n            for(int j = 0; j &lt; 4; j++){                                        \n                for(int k = 0; i &lt; 4; i++){                                    \n                    digitalSwitch(i, j, k, ledBuffer[i][j][k]);                \n                }                                                              \n            }                                                                  \n        }                                                                      \n    }                                                                          \n}                                                                              \n\nstatic void digitalSwitch(int x, int y, int z, int on) {\n    /* convert x y z to the correct pin*/                       \n    digitalWrite(_G.ledXY[x][y], _G.[ledZ[z]], on ? HIGH : LOW);               \n}                                                                              \n\n\nstatic void _all(int on) {                                                     \n    for(int i = 0; i &lt; 4; i++){                                                \n        for(int j = 0; j &lt; 4; j++){                                            \n            for(int k = 0; i &lt; 4; i++){                                        \n                digitalSwitch(i, j, k, on);                                    \n            }                                                                  \n        }                                                                      \n    }                                                                          \n}                                                                              \nint allOff(){                                                                  \n    _all(0);                                                                   \n};                                                                             \n\nint allOn(){                                                                   \n    _all(1);                                                                   \n};     \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2473971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429142695, "creation_date": 1429136734, "last_edit_date": 1429142673, "question_id": 29662007, "link": "https://stackoverflow.com/questions/29662007/3d-array-for-arduino", "title": "3D array for Arduino", "body": "<p>Currently I am working on my 4x4x4 led cube, I wanted to write my own code for it but currently I am stuck on using 3D arrays. I declare several arrays in void setup(), and I have tried putting them in the void loop() as well. Still, when trying to compile it keeps returning errors.</p>\n\n<p>In short, the code is supposed to generate a random point with a XYZ value. Then it has to write it to an buffer, this buffer has to project and multiplex it onto the led cube.</p>\n\n<p>I made the lines that return the errors bold.</p>\n\n<p>The errors are:</p>\n\n<pre><code>LedCube1.0.ino: In function 'void loop()':    \nLedCube1.0.ino:41:3: error: 'ledBuffer' was not declared in this scope    \nLedCube1.0.ino:41:13: error: 'xSeed' was not declared in this scope    \nLedCube1.0.ino:41:20: error: 'ySeed' was not declared in this scope    \nLedCube1.0.ino:41:27: error: 'zSeed' was not declared in this scope    \nLedCube1.0.ino:42:7: error: 'rainstep' was not declared in this scope    \nLedCube1.0.ino: In function 'int allOff()':    \nLedCube1.0.ino:76:9: error: 'ledBuffer' was not declared in this scope\nLedCube1.0.ino: In function 'int allOn()':\nLedCube1.0.ino:86:9: error: 'ledBuffer' was not declared in this scope    \nError compiling.\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>void setup() {                                                                 \n    //sets all pins as output                                                  \n    for(int a=22;a&lt;53;a++){                                                    \n        pinMode(a, OUTPUT);                                                    \n    }                                                                          \n    //declares the sizes of the cube                                           \n    int width = 4;                                                             \n    int depth = 4;                                                             \n    int height = 4;                                                            \n    int ledBuffer[4][4][4] = {  //creates a buffer that can store values generated by a function \n        {                                                                      \n            {0,0,0,0}, {0,0,0,0}, {0,0,0,0}, {0,0,0,0}                         \n        },                                                                     \n        {                                                                      \n            {0,0,0,0}, {0,0,0,0}, {0,0,0,0}, {0,0,0,0}                         \n        },                                                                     \n        {                                                                      \n            {0,0,0,0}, {0,0,0,0}, {0,0,0,0}, {0,0,0,0},                        \n        },                                                                     \n        {                                                                      \n            {0,0,0,0}, {0,0,0,0}, {0,0,0,0}, {0,0,0,0},                        \n        }                                                                      \n    };                                                                         \n    //defines to which connector each layer is connected                       \n    int ledXY[4][4] = {                                                        \n        {22,24,26,28} ,                                                        \n        {30,32,34,36},                                                         \n        {23,25,27,29},                                                         \n        {31,33,35,37}                                                          \n    };                                                                         \n    int ledZ[4] = {38,40,42,44};                                               \n    //create variables to start generating raindrops                           \n    int rainstep = 0;                                                          \n    int xSeed = 0;                                                             \n    int ySeed = 0;                                                             \n    int zSeed = 0;                                                             \n}  \n\nvoid loop() {                                                                  \n    //generatedrop                                                             \n    ledBuffer[xSeed][ySeed][zSeed] = 0;                                        \n    if (rainstep == 0)                                                         \n    {                                                                          \n        int xSeed=random(0,3);                                                 \n        int ySeed=random(0,3);                                                 \n        int zSeed=random(0,3);                                                 \n    }                                                                          \n    else                                                                       \n    {                                                                          \n        zSeed = zSeed - rainstep;                                              \n    }                                                                          \n    ledBuffer[xSeed][ySeed][zSeed] = 1;                                        \n\n    //updatecube                                                               \n    for(int i=0; i&lt;80;i++){                                                    \n        int currentZ = i%4;                                                    \n        allOff;                                                                \n        for(int j=0;j&lt;4;j++){                                                  \n            for(int k=0; i&lt;4;i++){                                             \n                if(ledBuffer[i][j][k]==0){                                     \n                    digitalWrite(ledBuffer[i][j][k],HIGH);                     \n                }else{                                                         \n                    digitalWrite(ledBuffer[i][j][k],LOW);                      \n                }                                                              \n            }                                                                  \n        }                                                                      \n    }                                                                          \n}                                      \n\n//function declares entire array 0                                             \nint allOff(){                                                                  \n    for(int c=0;c&lt;4;c++){                                                      \n        for(int d=0;d&lt;4;d++){                                                  \n            for(int e=0;e&lt;4;e++){                                              \n                ledBuffer[c][d][e]=0;                                          \n            }                                                                  \n        }                                                                      \n    }                                                                          \n};                                                                             \n//function declares entire array 1                                             \nint allOn(){                                                                   \n    for(int c=0;c&lt;4;c++){                                                      \n        for(int d=0;d&lt;4;d++){                                                  \n            for(int e=0;e&lt;4;e++){                                              \n                ledBuffer[c][d][e]=1;                                          \n            }                                                                  \n        }                                                                      \n    }                                                                          \n};                 \nI re\n</code></pre>\n\n<p>Can someone help me or at least point me in the right direction.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 1, "creation_date": 1429136946, "post_id": 29662002, "comment_id": 47463644, "body": "The compiler is telling you there&#39;s an error at line 16, did you look there?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1429137039, "post_id": 29662002, "comment_id": 47463672, "body": "<code>1&#47;TOTAL2=1&#47;value + 1&#47;TOTAL2;</code> this isn&#39;t a valid assignment expression."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1429137771, "post_id": 29662002, "comment_id": 47463925, "body": "Given the number of typos, I think it&#39;s a fair recommendation that you check your code for any errors <i>before</i> writing this much."}], "answers": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1429136873, "creation_date": 1429136873, "answer_id": 29662029, "question_id": 29662002, "link": "https://stackoverflow.com/questions/29662002/in-lines-16-54-55-56-57-58-i-get-the-error-statement-missing-in-function-main/29662029#29662029", "title": "In lines 16,54,55,56,57,58 i get the error &quot;Statement missing ; in function main()&quot; WHY?", "body": "<p>You're missing parens:</p>\n\n<pre><code>if(value&gt;=r1) &amp;&amp; (value&gt;=r2) &amp;&amp; (value&lt;=r3) &amp;&amp; (value&lt;=r4)\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>if ((value&gt;=r1) &amp;&amp; (value&gt;=r2) &amp;&amp; (value&lt;=r3) &amp;&amp; (value&lt;=r4))\n</code></pre>\n\n<p>Similarly in a few other places.</p>\n"}, {"owner": {"reputation": 6511, "user_id": 4765200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb1ac82079e2f813975cfa1aad1e234?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Pressler", "link": "https://stackoverflow.com/users/4765200/brian-pressler"}, "is_accepted": false, "score": 2, "last_activity_date": 1429136946, "creation_date": 1429136946, "answer_id": 29662038, "question_id": 29662002, "link": "https://stackoverflow.com/questions/29662002/in-lines-16-54-55-56-57-58-i-get-the-error-statement-missing-in-function-main/29662038#29662038", "title": "In lines 16,54,55,56,57,58 i get the error &quot;Statement missing ; in function main()&quot; WHY?", "body": "<p>On line 16 did you intend to put:</p>\n\n<pre><code>cout &lt;&lt; \"Give voltage: \";\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>cout \"Give voltage: \";\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4794008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e55bf4f5e3a7ae9a94a573d1896389f?s=128&d=identicon&r=PG&f=1", "display_name": "Stergiospaok Sp", "link": "https://stackoverflow.com/users/4794008/stergiospaok-sp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1429137747, "creation_date": 1429136706, "last_edit_date": 1429136919, "question_id": 29662002, "link": "https://stackoverflow.com/questions/29662002/in-lines-16-54-55-56-57-58-i-get-the-error-statement-missing-in-function-main", "title": "In lines 16,54,55,56,57,58 i get the error &quot;Statement missing ; in function main()&quot; WHY?", "body": "<p>In lines 16,54,55,56,57,58 I get the error </p>\n\n<blockquote>\n  <p>Statement missing ; in function main()</p>\n</blockquote>\n\n<p>WHY?</p>\n\n<p>And in 31 I get</p>\n\n<blockquote>\n  <p>expression syntax in function main()</p>\n</blockquote>\n\n<p>I'm trying n resistors categorize them into 2 categories based on 4 resistors values </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n int n;\n float V,TOTAL1,TOTAL2;\n int r1,r2,r3,r4,i;\n cout &lt;&lt; \"Give r1: \";//Im asking for resitors.\n cin &gt;&gt; r1;\n cout &lt;&lt; \"Give r2: \";\n cin &gt;&gt; r2;\n cout &lt;&lt; \"Give r3: \";\n cin &gt;&gt; r3;\n cout &lt;&lt; \"Give r4: \";\n cin &gt;&gt; r4;\n cout \"Give voltage: \";\n cin &gt;&gt; V;\n cout &lt;&lt; \"Give number of resistors: \";\n cin &gt;&gt; n;\n for(i=1;i&lt;n+1;i++)\n{\n  float value;\n  int m;\n  m=0;\n  m=m+1;\n  cout &lt;&lt; \"Give resistane: \";\n  cin &gt;&gt; value;\n  int a,b;//I try to count the number on its category.\n  a=0;\n  b=0;\n  if(value&gt;=r1) &amp;&amp; (value&gt;=r2) &amp;&amp; (value&lt;=r3) &amp;&amp; (value&lt;=r4)\n  {\n   if(m%2&gt;0)\n   {\n    cout &lt;&lt; \"It belongs to the first\";\n    a=a+1;\n    TOTAL1=value+TOTAL1;//If they are in the first category they are connected in series\n   }\n    else\n   {\n     cout &lt;&lt; \"It belongs to the second\";\n     b=b+1;\n     1/TOTAL2=1/value + 1/TOTAL2;\n    }\n  else if(value&gt;=r1)&amp;&amp;(value&lt;=r2)\n  cout &lt;&lt; \"It belongs to the first\";\n  a=a+1;\n  TOTAL1=value+TOTAL1;\n  else if(value&gt;=r3)&amp;&amp;(value&lt;=r4)\n  cout &lt;&lt; \"It belongs to the second\";\n  b=b+1;\n  1/TOTAL2=1/value + 1/TOTAL2;\n  }\n }\n cout &lt;&lt; \"\\n The first category has: \" a;\n cout &lt;&lt; \"\\n The second category has: \" b; \n cout &lt;&lt; \"\\n The yotal resistance of the first category is: \" TOTAL1; \n cout &lt;&lt; \"\\n The total resistance of the second category is: \" 1/(1/TOTAL2); \n return 0;\n}      \n</code></pre>\n"}, {"tags": ["c++", "arrays", "loops"], "comments": [{"owner": {"reputation": 5943, "user_id": 2674553, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r41zt.jpg?s=128&g=1", "display_name": "ste-fu", "link": "https://stackoverflow.com/users/2674553/ste-fu"}, "edited": false, "score": 2, "creation_date": 1429135431, "post_id": 29661705, "comment_id": 47463058, "body": "consider adding a tag for the progranming language"}, {"owner": {"reputation": 509, "user_id": 4747617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841eeba38ce0900b1ceadfde0076515?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Byer", "link": "https://stackoverflow.com/users/4747617/joshua-byer"}, "edited": false, "score": 0, "creation_date": 1429135569, "post_id": 29661705, "comment_id": 47463110, "body": "its c++ ................."}, {"owner": {"reputation": 509, "user_id": 4747617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841eeba38ce0900b1ceadfde0076515?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Byer", "link": "https://stackoverflow.com/users/4747617/joshua-byer"}, "edited": false, "score": 1, "creation_date": 1429135634, "post_id": 29661705, "comment_id": 47463132, "body": "n[0][i] = n[0][i] + 2; to   n[0][i] = n[0][i - 1 ] + 2;"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4794006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5057ae39c10b4e79b9e1ce84bd4678c?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Phillips", "link": "https://stackoverflow.com/users/4794006/nicholas-phillips"}, "edited": false, "score": 0, "creation_date": 1429138110, "post_id": 29661792, "comment_id": 47464041, "body": "I&#39;m sorry it is working. The only problem is that it is going past 19. Meaning it surpasses the ten columns I need filled"}], "owner": {"reputation": 509, "user_id": 4747617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1841eeba38ce0900b1ceadfde0076515?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Byer", "link": "https://stackoverflow.com/users/4747617/joshua-byer"}, "is_accepted": false, "score": 0, "last_activity_date": 1429135717, "creation_date": 1429135717, "answer_id": 29661792, "question_id": 29661705, "link": "https://stackoverflow.com/questions/29661705/array-that-fills-using-a-loop-and-swaps/29661792#29661792", "title": "Array that fills using a loop *AND swaps", "body": "<pre><code>#include&lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\n\nvoid out(int n[2][10]);\nvoid fillit(int n[2][10]);\nint main(){\nint nums[2][10];\nfillit(nums);\nout(nums);\n}\nvoid fillit(int n[2][10]){\nn[0][0] = 1;\nn[1][0] = 0;\n\nfor (int i = 1; i &lt; 10; i++){\n    n[0][i] = n[0][i-1] + 2;\n    n[1][i] = n[0][i-1] + 2;\n}\n}\nvoid out(int n[2][10]){\nfor (int r = 0; r &lt;= 1; r++){\n    for (int c = 0; c &lt;= 9; c++){\n        cout &lt;&lt; n[r][c];\n    }\n    cout &lt;&lt; endl;\n}\n}\n</code></pre>\n"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 2, "last_activity_date": 1429136039, "creation_date": 1429136039, "answer_id": 29661861, "question_id": 29661705, "link": "https://stackoverflow.com/questions/29661705/array-that-fills-using-a-loop-and-swaps/29661861#29661861", "title": "Array that fills using a loop *AND swaps", "body": "<pre><code>void fillit(int n[2][10]){\n\n for (int i = 0; i &lt; 10; i++){\n    n[0][i] = (i * 2 ) + 1;\n    n[1][i] = i * 2;\n }\n}\n</code></pre>\n"}, {"owner": {"reputation": 2180, "user_id": 3263867, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/378IE.jpg?s=128&g=1", "display_name": "Xela", "link": "https://stackoverflow.com/users/3263867/xela"}, "is_accepted": false, "score": 0, "last_activity_date": 1429136642, "last_edit_date": 1429136642, "creation_date": 1429136225, "answer_id": 29661905, "question_id": 29661705, "link": "https://stackoverflow.com/questions/29661705/array-that-fills-using-a-loop-and-swaps/29661905#29661905", "title": "Array that fills using a loop *AND swaps", "body": "<p>How about this, its shorter?</p>\n\n<pre><code>int nums[2][10];\nfor (int i = 0; i &lt; 20; i++)\n{\n    nums[(i%2)^1][i/2] = i;\n}\n</code></pre>\n"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1429157264, "last_edit_date": 1429157264, "creation_date": 1429137529, "answer_id": 29662155, "question_id": 29661705, "link": "https://stackoverflow.com/questions/29661705/array-that-fills-using-a-loop-and-swaps/29662155#29662155", "title": "Array that fills using a loop *AND swaps", "body": "<p>I noticed that second array elements are even numbers, and the first array corresponding elements are one bigger (and thus odd) ... so this answer accomplishes using <em>ONLY</em> addition.  Might be easier to understand.</p>\n\n<pre><code>void fillit(int n[2][10])\n{\n    int even = 0; // start value\n\n    for (size_t i = 0; i &lt; 10; i++)\n    {\n       int odd  = even + 1;\n       n[0][i] = odd;\n       n[1][i] = even;  \n       even += 2;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>I noticed that you tagged this problem with C++.  Perhaps you should try vectors.</p>\n\n<p>For small vectors, you simply declare with initial values in curly-braces, making it easy to define the matrix limits [2] and [10].  In this example, I initialized using easy to recognize values, so you can tell the 2x10 matrix has not yet been filled.  Without this init, the values contained will be random noise.</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; n {\n   {  11,  12,  13,  14,  15,  16,  17,  18,  19, 20 }, // row 1\n   {  21,  22,  23,  24,  25,  26,  27,  28,  29, 30 }  // row 2\n   //  1    2    3    4    5    6    7    8    9  10   &lt;-- col\n}; \n</code></pre>\n\n<p>Yes, you could write in the target value of your output, but then fillit() would not be needed.</p>\n\n<p>For passing the 2x10 vector to fillIt(), remember that you need to mark the matrix as a reference.  The following emphasizes that n[0] contains odd numbers, and n[1] contains 10 even numbers.</p>\n\n<pre><code>//                vector x vector        v--reference\nvoid fillIt(std::vector&lt;std::vector&lt;int&gt;&gt;&amp; n)\n{\n   int even = 0;\n   for (size_t c = 0; c &lt; 10; ++c) // row major {\n      int odd = even + 1;\n      n[0][c] = odd;\n      n[1][c] = even;\n      even += 2;\n   }\n}\n</code></pre>\n\n<p>For test, I recommend just passing the 2x10 vector to a new function \"showIt()\".</p>\n\n<pre><code>// do not modify--vvvvv                 do not copy--v\nvoid vec2x10Show (const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; n)\n{\n   // header\n   std::cout &lt;&lt; \"\\nCOL-&gt;\";\n   for (int i=0; i&lt;10; ++i) std::cout &lt;&lt;  std::setw(3) &lt;&lt; i+1 &lt;&lt; \" \";\n\n   std::cout &lt;&lt; \"\\nr1:  \"; //                              r  c\n   for (int c=0; c&lt;10; ++c) std::cout &lt;&lt; std::setw(3) &lt;&lt; n[0][c] &lt;&lt; \" \";\n\n   std::cout &lt;&lt; \"\\nr2:  \"; //                              r  c\n   for (int c=0; c&lt;10; ++c) std::cout &lt;&lt; std::setw(3) &lt;&lt; n[1][c] &lt;&lt; \" \";\n\n   std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Note the hard coded '10' in each loop (a magic number).  Using vectors, this magic number is not necessary because the vector includes this information  (your next assignment).</p>\n"}], "owner": {"reputation": 11, "user_id": 4794006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5057ae39c10b4e79b9e1ce84bd4678c?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Phillips", "link": "https://stackoverflow.com/users/4794006/nicholas-phillips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1429157264, "creation_date": 1429135307, "last_edit_date": 1429142456, "question_id": 29661705, "link": "https://stackoverflow.com/questions/29661705/array-that-fills-using-a-loop-and-swaps", "title": "Array that fills using a loop *AND swaps", "body": "<p>I did this program in class and I'm trying to recreate it for an exam coming up. The program is supposed to be an array[2][10] and is supposed to output numbers in this order: </p>\n\n<pre><code>        1 3 5 7 9 11 13 15 17 19\n        0 2 4 6 8 10 12 14 16 18\n</code></pre>\n\n<p>I'm really lost on this and I could really use any help.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\n\nvoid out(int n[2][10]);\nvoid fillit(int n[2][10]);\nint main(){\nint nums[2][10];\nfillit(nums);\nout(nums);\n}\nvoid fillit(int n[2][10]){\nn[0][0] = 1;\nn[1][0] = 0;\n\nfor (int i = 1; i &lt; 10; i++){\n    n[0][i] = n[0][i] + 2;\n    n[1][i] = n[0][i] + 2;\n}\n}\nvoid out(int n[2][10]){\nfor (int r = 0; r &lt;= 1; r++){\n    for (int c = 0; c &lt;= 9; c++){\n        cout &lt;&lt; n[r][c];\n    }\n    cout &lt;&lt; endl;\n}\n}\n</code></pre>\n\n<p><em>Update</em> I have the program successfully filling the array but now I need the program to swap row 1 with row 2 and then output the new array. I.e.\n        0 2 4 6 8 10 12 14 16 18\n        1 3 5 7 9 11 13 15 17 19</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1429134486, "post_id": 29661502, "comment_id": 47462638, "body": "Please post the full error message."}, {"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1429134536, "post_id": 29661502, "comment_id": 47462662, "body": "In some places you&#39;ve used <code>Customer</code> and in others <code>customer</code>. Case matters!"}, {"owner": {"reputation": 839, "user_id": 3325075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66ab0c4cbd037439ea80ba4e934d92e7?s=128&d=identicon&r=PG", "display_name": "Cinch", "link": "https://stackoverflow.com/users/3325075/cinch"}, "edited": false, "score": 0, "creation_date": 1429134646, "post_id": 29661502, "comment_id": 47462721, "body": "Yeah we can&#39;t really help you until you add more code or information"}, {"owner": {"reputation": 21, "user_id": 4517802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb2c44487bd9221092ef4291844a901a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnTheDemon", "link": "https://stackoverflow.com/users/4517802/johnthedemon"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1429134933, "post_id": 29661502, "comment_id": 47462841, "body": "added error list - @0x499602D2"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1429139731, "post_id": 29661502, "comment_id": 47464616, "body": "you havent defined Pinkbase yet. You only gave a forward reference. Where is the definition of getTextsAllowed - the compiler isn&#39;t psychic"}], "owner": {"reputation": 21, "user_id": 4517802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb2c44487bd9221092ef4291844a901a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnTheDemon", "link": "https://stackoverflow.com/users/4517802/johnthedemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1429134493, "answer_count": 0, "score": 0, "last_activity_date": 1429139425, "creation_date": 1429134359, "last_edit_date": 1429139425, "question_id": 29661502, "link": "https://stackoverflow.com/questions/29661502/c-error-c2227-on-class", "closed_reason": "Duplicate", "title": "C++ error c2227 on class *", "body": "<p>I have an issue with my <code>PinkBase * ContractType</code>. PinkBase is a class type, and the customer class it is in is a class to store data about the customer.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>class PinkBase;\n\nclass Customer\n{\n  private;\n  //all of my private data including:\n  PinkBase* ContractType;\n\n  public:\n  //all of my public Methods (gets and sets)\n}\n\n//I then run the constructor for my customer class:\nCustomer::Customer()\n{\n    strcpy_s(FirstName, \"\");\n    strcpy_s(SecondName, \"\");\n    ContractType = NULL; //this is the issue, the class compiles fine, however.\n    TextsUsed = 0;\n    Minutes080Used = 0;\n    MinutesUsed = 0;\n    DataUsed = 0;\n}\n\n// the errors come when I start to calculate the bills and use code like this:\n\ndouble Customer::calculateBill()\n{\n  textRange = TextsUsed - ContractType-&gt;getTextsAllowed();// this should return the amount of allowed texts\n}\n</code></pre>\n\n<p>I get an error (c2227) complaining that my \"->\" notation's left side SHOULD be pointing to a class/struct. To the best of my knowledge, IT IS.</p>\n\n<p>Errors are as follows:</p>\n\n<pre><code>Error   1   error C2027: use of undefined type 'PinkBase'   c:\\users\\administrator\\desktop\\pinkmobile - 15 th - 2\\pinkmobile\\contracts.h    66  1   PinkMobile\nError   2   error C2227: left of '-&gt;getTextsAllowed' must point to class/struct/union/generic type  c:\\users\\administrator\\desktop\\pinkmobile - 15 th - 2\\pinkmobile\\contracts.h    66  1   PinkMobile\nError   3   error C2027: use of undefined type 'PinkBase'   c:\\users\\administrator\\desktop\\pinkmobile - 15 th - 2\\pinkmobile\\contracts.h    74  1   PinkMobile\nError   4   error C2227: left of '-&gt;getMinutes080Allowed' must point to class/struct/union/generic type c:\\users\\administrator\\desktop\\pinkmobile - 15 th - 2\\pinkmobile\\contracts.h    74  1   PinkMobile\nError   5   error C2027: use of undefined type 'PinkBase'   c:\\users\\administrator\\desktop\\pinkmobile - 15 th - 2\\pinkmobile\\contracts.h    82  1   PinkMobile\nError   6   error C2227: left of '-&gt;getMinutesAllowed' must point to class/struct/union/generic type    c:\\users\\administrator\\desktop\\pinkmobile - 15 th - 2\\pinkmobile\\contracts.h    82  1   PinkMobile\nError   7   error C2027: use of undefined type 'PinkBase'   c:\\users\\administrator\\desktop\\pinkmobile - 15 th - 2\\pinkmobile\\contracts.h    90  1   PinkMobile\nError   8   error C2227: left of '-&gt;getDataAllowed' must point to class/struct/union/generic type   c:\\users\\administrator\\desktop\\pinkmobile - 15 th - 2\\pinkmobile\\contracts.h    90  1   PinkMobile\n</code></pre>\n"}, {"tags": ["c++", "windows-store-apps", "verification"], "comments": [{"owner": {"reputation": 4243, "user_id": 1051830, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jyfok.png?s=128&g=1", "display_name": "crea7or", "link": "https://stackoverflow.com/users/1051830/crea7or"}, "edited": false, "score": 0, "creation_date": 1429140130, "post_id": 29661383, "comment_id": 47464756, "body": "Does it work in debug?"}, {"owner": {"reputation": 14165, "user_id": 472614, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4d46aadd2d340d02ee82c8a30a0ca213?s=128&d=identicon&r=PG", "display_name": "A.R.", "link": "https://stackoverflow.com/users/472614/a-r"}, "reply_to_user": {"reputation": 4243, "user_id": 1051830, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jyfok.png?s=128&g=1", "display_name": "crea7or", "link": "https://stackoverflow.com/users/1051830/crea7or"}, "edited": false, "score": 0, "creation_date": 1429140256, "post_id": 29661383, "comment_id": 47464802, "body": "Of course.  Why would I ask if my application didn&#39;t work?"}], "answers": [{"comments": [{"owner": {"reputation": 14165, "user_id": 472614, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4d46aadd2d340d02ee82c8a30a0ca213?s=128&d=identicon&r=PG", "display_name": "A.R.", "link": "https://stackoverflow.com/users/472614/a-r"}, "edited": false, "score": 0, "creation_date": 1429146039, "post_id": 29663401, "comment_id": 47466484, "body": "you think, or you know?  The app cert kit runs it somehow, so why can&#39;t I?"}, {"owner": {"reputation": 4537, "user_id": 964222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FtScS.jpg?s=128&g=1", "display_name": "Jeffrey Chen", "link": "https://stackoverflow.com/users/964222/jeffrey-chen"}, "reply_to_user": {"reputation": 14165, "user_id": 472614, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4d46aadd2d340d02ee82c8a30a0ca213?s=128&d=identicon&r=PG", "display_name": "A.R.", "link": "https://stackoverflow.com/users/472614/a-r"}, "edited": false, "score": 0, "creation_date": 1429147265, "post_id": 29663401, "comment_id": 47466804, "body": "It is just my understanding about it, so please feel free to tell me if I have any misunderstanding :)"}], "owner": {"reputation": 4537, "user_id": 964222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FtScS.jpg?s=128&g=1", "display_name": "Jeffrey Chen", "link": "https://stackoverflow.com/users/964222/jeffrey-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1429144862, "creation_date": 1429144862, "answer_id": 29663401, "question_id": 29661383, "link": "https://stackoverflow.com/questions/29661383/can-app-verifier-be-used-with-windows-store-apps/29663401#29663401", "title": "Can App Verifier be used with Windows Store Apps?", "body": "<p>As you said, Windows Store App needs to be run in an app container which is process-isolated. Given this, I don\u2019t think the application verifier could be used with Windows Store App.</p>\n"}], "owner": {"reputation": 14165, "user_id": 472614, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4d46aadd2d340d02ee82c8a30a0ca213?s=128&d=identicon&r=PG", "display_name": "A.R.", "link": "https://stackoverflow.com/users/472614/a-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429144862, "creation_date": 1429133839, "question_id": 29661383, "link": "https://stackoverflow.com/questions/29661383/can-app-verifier-be-used-with-windows-store-apps", "title": "Can App Verifier be used with Windows Store Apps?", "body": "<p>I am writing a Windows Store App in C++ as a learning exercise.  I can't seem to get it to work with App Verifier however.  I follow the instructions on the verifier, run the app from the IDE and nothing happens.</p>\n\n<p>I can't run the generated EXE manually because it needs to be run in an app container.</p>\n\n<p>Can application verifier be used with store apps at all?  If so, how is it done?</p>\n"}, {"tags": ["c++", "directx", "direct3d"], "comments": [{"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1429193088, "post_id": 29661380, "comment_id": 47491810, "body": "When you say &#39;desktop&#39;, I&#39;m assuming you mean the window of your application - not the entire windows desktop?"}, {"owner": {"reputation": 251, "user_id": 4339786, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1ef8053bb4a31695d89af5972ddbf0a?s=128&d=identicon&r=PG&f=1", "display_name": "Jary316", "link": "https://stackoverflow.com/users/4339786/jary316"}, "reply_to_user": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 0, "creation_date": 1429210607, "post_id": 29661380, "comment_id": 47504106, "body": "No I wanted to grab the entire Windows desktop. Sorry for the imprecision."}], "answers": [{"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": true, "score": 5, "last_activity_date": 1429272749, "creation_date": 1429272749, "answer_id": 29698887, "question_id": 29661380, "link": "https://stackoverflow.com/questions/29661380/d3d11-screen-desktop-copy-to-id3d11texture2d/29698887#29698887", "title": "D3D11 screen desktop copy to ID3D11Texture2D", "body": "<p>Not necessarily all desktop content would be rendered with D3D11. DXGI is the underlying system for all graphics on Windows, so you will definitely need to use it in some way to get a capture of the desktop. However, D3D11 is built on DXGI (for example, ID3D11Texture2D supports the IDXGIResource interface). The code sample below shows how you can capture the output of an entire monitor into a D3D11 staging texture:</p>\n\n<pre><code>// IDXGIOutput* poutput = ...; // from DXGIAdapter::EnumOutputs.\n\n// Get description of desktop.\nDXGI_OUTPUT_DESC outdesc;\npoutput-&gt;GetDesc(&amp;outdesc);\n\n// Create destination texture, sized same as desktop.\nD3D11_TEXTURE2D_DESC texDesc;\nmemset(&amp;texDesc, 0, sizeof(texDesc));\ntexDesc.CPUAccessFlags = D3D11_CPU_ACCESS_READ | D3D11_CPU_ACCESS_WRITE;\ntexDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;\ntexDesc.BindFlags = 0;\ntexDesc.Width  = outdesc.DesktopCoordinates.right - outdesc.DesktopCoordinates.left;\ntexDesc.Height = outdesc.DesktopCoordinates.bottom - outdesc.DesktopCoordinates.top;\ntexDesc.MipLevels = 1;\ntexDesc.SampleDesc = { 1, 0 };\ntexDesc.Usage = D3D11_USAGE_STAGING;\ntexDesc.ArraySize = 1;\nID3D11Texture2D* destinationTexture = 0;\npDevice-&gt;CreateTexture2D(&amp;texDesc, 0, &amp;destinationTexture); // check HRESULT.\n\n// Get IDXGIResource from texture.\nIDXGIResource* destinationResource=0;\ndestinationTexture-&gt;QueryInterface(IID_PPV_ARGS(&amp;destinationResource)); // check HRESULT.\n\n// Get data.\nIDXGIOutput1* poutput1;\npoutput-&gt;QueryInterface(IID_PPV_ARGS(&amp;poutput1)); // check HRESULT.\npoutput1-&gt;TakeOwnership(pDevice, TRUE);\npoutput1-&gt;GetDisplaySurfaceData1(destinationResource); // check HRESULT.\npoutput1-&gt;ReleaseOwnership();\n\n// Now use destinationTexture, it contains the contents of the desktop.\n</code></pre>\n\n<p>Unfortunately, it has the nasty side effect of turning the output black during the <code>IDXGIOutput::TakeOwnership</code> call. However, without this call, the <code>GetDiplaySurfaceData1</code> will fail. Depending on your situation, this may be acceptable.</p>\n"}], "owner": {"reputation": 251, "user_id": 4339786, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1ef8053bb4a31695d89af5972ddbf0a?s=128&d=identicon&r=PG&f=1", "display_name": "Jary316", "link": "https://stackoverflow.com/users/4339786/jary316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2666, "favorite_count": 4, "accepted_answer_id": 29698887, "answer_count": 1, "score": 2, "last_activity_date": 1429272749, "creation_date": 1429133823, "last_edit_date": 1429210691, "question_id": 29661380, "link": "https://stackoverflow.com/questions/29661380/d3d11-screen-desktop-copy-to-id3d11texture2d", "title": "D3D11 screen desktop copy to ID3D11Texture2D", "body": "<p>I am writing a DLL plugin that will read the desktop frame buffer (whole screen) and render it directly into a Texture2D pointer that is passed in. The goal is to keep everything in video memory (and avoid the cost of copying back to system memory and back to video memory).</p>\n\n<p>I am able to pass the Texture2D (showing up as a ID3D11Texture2D), but I am having issues grabbing the desktop frame buffer with D3D11. D3D9 offered GetFrontBufferData() but it seems D3D11 solution is to use GetBuffer().</p>\n\n<p>My issue is about getting the IDXGISwapChain. Because I want to read the desktop frame buffer and simply read the content via GetBuffer() and display it on the ID3D11Texture2D. I am getting a ID3D11Device I do not understand how to get its IDXGISwapChain.</p>\n\n<p>I have code as follows to get the frame buffer and put it on the Texture:</p>\n\n<pre><code>ID3D11Texture2D* src = (ID3D11Texture2D*)g_TexturePointer;\nID3D11Texture2D* dst = NULL;\nHRESULT hr = swapchain-&gt;GetBuffer(0, __uuidof(ID3D11Texture2D), (LPVOID*)&amp;dst);\ng_devCon-&gt;CopyResource(dst, src);\n</code></pre>\n\n<p>Here I actually created my own swapchain using D3D11CreateDeviceAndSwapChain() but I wonder if it is necessary as I already have a ID3D11Device.</p>\n\n<p>The CopyResource() also seems to fail.</p>\n"}, {"tags": ["c++", "c++11", "perfect-forwarding"], "answers": [{"comments": [{"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1429134541, "post_id": 29661370, "comment_id": 47462666, "body": "I undertand. Thank you Mikhail :)"}], "owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "is_accepted": true, "score": 2, "last_activity_date": 1429134896, "last_edit_date": 1429134896, "creation_date": 1429133773, "answer_id": 29661370, "question_id": 29661303, "link": "https://stackoverflow.com/questions/29661303/utility-of-stdforwardfunc-at-call/29661370#29661370", "title": "Utility of std::forward&lt;Func&gt; at call", "body": "<p>In most scenarios there are no difference between these two options. However, <code>Func</code> may have ref-qualified <code>operator()</code>. Like the following:</p>\n\n<pre><code>struct Func {\n    operator()(/* stuff */) &amp;&amp;;\n}\n</code></pre>\n\n<p>This can be called only on r-values, so the second call will not compile, since <code>func</code> inside <code>myfunction</code> is an l-value. Or it can have ref-qualified overloads:</p>\n\n<pre><code>struct Func {\n    operator()(/* stuff */) &amp;;\n    operator()(/* stuff */) &amp;&amp;;\n}\n</code></pre>\n\n<p>In this case call without <code>std::forward</code> will use the first overload regardless of what is passed to <code>myfunction</code>: an l-value or an r-value. A call with <code>std::forward</code>, on the other side, will pick appropriate overload based on l-valueness of the passed <code>func</code> object.</p>\n"}], "owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 29661370, "answer_count": 1, "score": 1, "last_activity_date": 1429157466, "creation_date": 1429133472, "last_edit_date": 1429157466, "question_id": 29661303, "link": "https://stackoverflow.com/questions/29661303/utility-of-stdforwardfunc-at-call", "title": "Utility of std::forward&lt;Func&gt; at call", "body": "<p>I am coding functions like the well known <em>tuple_apply</em>, which take a rvalue reference of a Function as parameter. \nDuring my researches on the web, I came across the two following calls:</p>\n\n<pre><code>template &lt;\n    typename Func,\n    /* stuff */\n&gt;\nvoid myfunction(Func &amp;&amp; func, /* stuff */)\n{\n    std::forward&lt;Func&gt;(func)(/* stuff */); // use of std::forward before call\n    func(/* stuff */);                     // direct call\n}\n</code></pre>\n\n<p>Is this call to <code>std::forward</code> really usefull ? If so why ?</p>\n\n<p>Thanks for your enlightenment!</p>\n"}, {"tags": ["c++", "c++11", "gcc", "clang", "overload-resolution"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1429133581, "post_id": 29661253, "comment_id": 47462184, "body": "This may just be due to the simplifying of your code for this question, but since you&#39;re using C++14, <code>[](auto x, auto y){return x+y;}</code> would produce a lambda with the same overloaded capabilities."}, {"owner": {"reputation": 5358, "user_id": 1932452, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7dfca62a1e4eb69f39ce00152862c70e?s=128&d=identicon&r=PG", "display_name": "wyer33", "link": "https://stackoverflow.com/users/1932452/wyer33"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1429133853, "post_id": 29661253, "comment_id": 47462338, "body": "@DrewDormann For sure.  Really, I was just trying to come up with a single example to show what was going on.  Later, I&#39;d like to use it for more complicated cases."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1429134127, "post_id": 29661253, "comment_id": 47462476, "body": "It&#39;s surprising that the original code compiled in clang. The general rule is that the same names in different base classes do not overload."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1429135015, "post_id": 29661253, "comment_id": 47462869, "body": "@T.C. operator lookup, maybe?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 3, "creation_date": 1429135165, "post_id": 29661253, "comment_id": 47462936, "body": "@dyp No, this case involves standard lookup of <code>operator()</code> in the context of <code>(fgh).operator()</code> ([over.call.object]/p1). The result of that lookup is clearly ambiguous."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1429135890, "post_id": 29661253, "comment_id": 47463224, "body": "Simplified example: <a href=\"http://coliru.stacked-crooked.com/a/7470dd2f07b1aa14\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/7470dd2f07b1aa14</a>"}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 4, "creation_date": 1429141377, "post_id": 29661253, "comment_id": 47465184, "body": "Stop using <code>std::function</code> when is completely unnecessary. It is a bad practice and less experienced people will learn it from code like this."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1429152909, "post_id": 29661253, "comment_id": 47468328, "body": "You aren&#39;t overloading lambdas, you are overloading <code>std::function</code>s.  Lambdas and <code>std::function</code>s are unrelated types.  As an aside, I&#39;d want to binary tree inherit myself, instead of linear, just to keep things cleaner."}], "answers": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 10, "last_activity_date": 1429135191, "creation_date": 1429135191, "answer_id": 29661678, "question_id": 29661253, "link": "https://stackoverflow.com/questions/29661253/overloaded-lambdas-in-c-and-differences-between-clang-and-gcc/29661678#29661678", "title": "Overloaded lambdas in C++ and differences between clang and gcc", "body": "<p>The original code <strong>shouldn't</strong> compile, gcc is correct here. See [class.member.lookup]:</p>\n\n<blockquote>\n  <p>Otherwise (i.e., C does not contain a declaration of f or the resulting declaration set is empty), S(f,C) is\n  initially empty. If C has base classes, calculate the lookup set for f in each direct base class subobject Bi,\n  and merge each such lookup set S(f,Bi) in turn into S(f,C).<br>\n  \u2014 [..]<br>\n  \u2014 Otherwise, if the declaration sets of S(f,Bi) and S(f,C) differ, the merge is ambiguous...</p>\n</blockquote>\n\n<p>The initial declaration set is empty (<code>overload</code> has no methods) - so merge all the bases, all of whom have differing sets. So the merge <strong>should</strong> fail. That rule only applies if the declaration set of <code>overload</code> is empty though, which is why the explicit adding of the <code>using F1::operator()</code> works. </p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441832839, "post_id": 29661693, "comment_id": 52838930, "body": "This is because name lookup is done before overload resolution even starts, and name lookup finds both <code>Foo::bar</code> and <code>Baz::bar</code> of which neither is preferred?"}], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 16, "last_activity_date": 1429135244, "creation_date": 1429135244, "answer_id": 29661693, "question_id": 29661253, "link": "https://stackoverflow.com/questions/29661253/overloaded-lambdas-in-c-and-differences-between-clang-and-gcc/29661693#29661693", "title": "Overloaded lambdas in C++ and differences between clang and gcc", "body": "<p>Looks like a Clang bug to me.</p>\n\n<p>The general rule is that member functions of the same name in different base classes do not overload. For example:</p>\n\n<pre><code>struct Foo { void bar(); };\nstruct Baz { void bar(int); };\nstruct Quux : Foo, Baz { };\n\nint main() { Quux().bar(); } // error on both GCC and Clang\n</code></pre>\n\n<p>For whatever reason, Clang fails to diagnose this ambiguity for <code>operator()</code>.</p>\n\n<p>A <code>using-declaration</code> lifts the named base class members to the derived class scope, allowing them to overload. Hence:</p>\n\n<pre><code>struct Quux_2 : Foo, Baz { using Foo::bar; using Baz::bar; };\nQuux_2().bar(); // OK.\n</code></pre>\n\n<p>In the working version of the code, the <code>using</code> declarations recursively bring every <code>operator()</code> declaration in the template arguments into the scope of the most derived class,  allowing them to overload.</p>\n"}], "owner": {"reputation": 5358, "user_id": 1932452, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7dfca62a1e4eb69f39ce00152862c70e?s=128&d=identicon&r=PG", "display_name": "wyer33", "link": "https://stackoverflow.com/users/1932452/wyer33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 7, "accepted_answer_id": 29661693, "answer_count": 2, "score": 26, "last_activity_date": 1429136200, "creation_date": 1429133261, "last_edit_date": 1429136200, "question_id": 29661253, "link": "https://stackoverflow.com/questions/29661253/overloaded-lambdas-in-c-and-differences-between-clang-and-gcc", "title": "Overloaded lambdas in C++ and differences between clang and gcc", "body": "<p>I'm playing with a trick to overload lambdas in C++.  Specifically:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>// For std::function\n#include &lt;functional&gt;\n\n// For std::string\n#include &lt;string&gt;\n\n// For std::cout\n#include &lt;iostream&gt;\n\ntemplate &lt;class... F&gt;\nstruct overload : F... {\n    overload(F... f) : F(f)... {}\n};      \n\ntemplate &lt;class... F&gt;\nauto make_overload(F... f) {\n    return overload&lt;F...&gt;(f...);\n}\n\nint main() {\n\n    std::function &lt;int(int,int)&gt; f = [](int x,int y) {\n        return x+y;\n    };\n    std::function &lt;double(double,double)&gt; g = [](double x,double y) {\n        return x+y;\n    };\n    std::function &lt;std::string(std::string,std::string)&gt; h = [](std::string x,std::string y) {\n        return x+y;\n    };\n\n    auto fgh = make_overload(f,g,h);\n    std::cout &lt;&lt; fgh(1,2) &lt;&lt; std::endl;\n    std::cout &lt;&lt; fgh(1.5,2.5) &lt;&lt; std::endl;\n    std::cout &lt;&lt; fgh(\"bob\",\"larry\") &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Now, the above program compiles and works fine in clang:</p>\n\n<pre><code>$ clang++ -g -std=c++14 test01.cpp -o test01\n$ ./test01\n3\n4\nboblarry\n</code></pre>\n\n<p>It does not compile in gcc:</p>\n\n<pre><code>$ g++ -g -std=c++14 test01.cpp -o test01\ntest01.cpp: In function 'int main()':\ntest01.cpp:36:25: error: request for member 'operator()' is ambiguous\n     std::cout &lt;&lt; fgh(1,2) &lt;&lt; std::endl;\n                         ^\nIn file included from test01.cpp:5:0:\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note: candidates are: _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = std::basic_string&lt;char&gt;; _ArgTypes = {std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;}]\n     function&lt;_Res(_ArgTypes...)&gt;::\n     ^\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note:                 _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = double; _ArgTypes = {double, double}]\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note:                 _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = int; _ArgTypes = {int, int}]\ntest01.cpp:37:29: error: request for member 'operator()' is ambiguous\n     std::cout &lt;&lt; fgh(1.5,2.5) &lt;&lt; std::endl;\n                             ^\nIn file included from test01.cpp:5:0:\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note: candidates are: _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = std::basic_string&lt;char&gt;; _ArgTypes = {std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;}]\n     function&lt;_Res(_ArgTypes...)&gt;::\n     ^\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note:                 _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = double; _ArgTypes = {double, double}]\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note:                 _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = int; _ArgTypes = {int, int}]\ntest01.cpp:38:35: error: request for member 'operator()' is ambiguous\n     std::cout &lt;&lt; fgh(\"bob\",\"larry\") &lt;&lt; std::endl;\n                                   ^\nIn file included from test01.cpp:5:0:\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note: candidates are: _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = std::basic_string&lt;char&gt;; _ArgTypes = {std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;}]\n     function&lt;_Res(_ArgTypes...)&gt;::\n     ^\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note:                 _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = double; _ArgTypes = {double, double}]\n/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/include/g++-v4/functional:2434:5: note:                 _Res std::function&lt;_Res(_ArgTypes ...)&gt;::operator()(_ArgTypes ...) const [with _Res = int; _ArgTypes = {int, int}]\nMakefile:2: recipe for target 'all' failed\nmake: *** [all] Error 1\n</code></pre>\n\n<p>Why is there a difference?  For the record, I'm using gcc 4.9.2 and clang 3.5.0.</p>\n\n<hr>\n\n<h1>Edit 1</h1>\n\n<p>Evidently, this snippet of code failed to compile on VC as well and had already been <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/990223/overloaded-lambda-pattern-fails-to-compile\">reported</a>.  That being said, Sean Middleditch  posted a working version of the overloaded code:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>template&lt;class F1, class... Fs&gt;\nstruct overload : F1, overload&lt;Fs...&gt;\n{\n    using F1::operator();\n    using overload&lt;Fs...&gt;::operator();\n    overload(F1 f1, Fs... fs) : F1(f1), overload&lt;Fs...&gt;(fs...) {}\n};\n\ntemplate&lt;class F1&gt;\nstruct overload&lt;F1&gt; : F1\n{\n    using F1::operator();\n    overload(F1 f1) : F1(f1) {}\n};\n\n\ntemplate &lt;class... F&gt;\nauto make_overload(F... f) {\n    return overload&lt;F...&gt;(f...);\n}\n</code></pre>\n\n<p>I'm still interested in understanding why this version of the overloaded lambda code works, but the original one does not.</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-asio"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "edited": false, "score": 0, "creation_date": 1429139790, "post_id": 29661237, "comment_id": 47464637, "body": "It&#39;s extremely confusing. The library claims to be standalone, but I find a bunch of includes for boost headers inside of it. Best I can do is point you here <a href=\"https://think-async.com/Asio/AsioAndBoostAsio\" rel=\"nofollow noreferrer\">think-async.com/Asio/AsioAndBoostAsio</a> and suggest building out a sample application to test and see by using the appropriate defines, you can compile a boost-free, non-C++11 sample."}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1429154931, "post_id": 29661237, "comment_id": 47468868, "body": "This <a href=\"http://stackoverflow.com/a/16086836/1053968\">answer</a> to a similar question may provide some help"}, {"owner": {"reputation": 3353, "user_id": 1858151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84149fe98216d2a7875da7ce6e875335?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/1858151/stefan"}, "edited": false, "score": 1, "creation_date": 1429307782, "post_id": 29661237, "comment_id": 47555704, "body": "Management wants a flexible transport solution for persons. But they are dead-set against cars as cars are bloated because cars come with wheels and seats and windshield and so on. I&#39;m sorry, your problem is not boost."}], "answers": [{"comments": [{"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 1, "creation_date": 1429133844, "post_id": 29661296, "comment_id": 47462334, "body": "Yes, but I&#39;m wondering which C++11 features are required if you use it completely without boost. It seems that it &#39;fills in&#39; some missing features as needed by borrowing from boost when you build it on a C++03 compiler."}], "owner": {"reputation": 839, "user_id": 3325075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66ab0c4cbd037439ea80ba4e934d92e7?s=128&d=identicon&r=PG", "display_name": "Cinch", "link": "https://stackoverflow.com/users/3325075/cinch"}, "is_accepted": false, "score": -1, "last_activity_date": 1429133443, "creation_date": 1429133443, "answer_id": 29661296, "question_id": 29661237, "link": "https://stackoverflow.com/questions/29661237/can-asio-be-used-without-boost-or-c11/29661296#29661296", "title": "Can Asio be used without boost or C++11?", "body": "<p><a href=\"https://github.com/chriskohlhoff/asio/tree/master/asio/src/examples\" rel=\"nofollow\">https://github.com/chriskohlhoff/asio/tree/master/asio/src/examples</a></p>\n\n<p>It appears that Asio's examples are filled with both C++03, C++11, and C++14 version. In this vein, Asio should work with C++03</p>\n"}, {"comments": [{"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1429159820, "post_id": 29661788, "comment_id": 47470143, "body": "I&#39;m wondering about the minimum required, not about what&#39;s in the examples or necessarily easy to use (we&#39;ll probably do custom functor classes for handlers, since no lambdas)"}], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1429136183, "last_edit_date": 1429136183, "creation_date": 1429135703, "answer_id": 29661788, "question_id": 29661237, "link": "https://stackoverflow.com/questions/29661237/can-asio-be-used-without-boost-or-c11/29661788#29661788", "title": "Can Asio be used without boost or C++11?", "body": "<p>I've used ASIO with MS VC++ 2013, without using any other parts of Boost.</p>\n\n<p>Most ASIO code uses <code>boost::bind</code>, but VC++ 2013 includes a <code>std::bind</code> that works fine for the job. A fair amount of Boost demo code also uses <code>boost::array</code>, but this is just a fairly ordinary array--you can use <code>std::array</code>, or <code>std::vector</code>, or any number of other possibilities.</p>\n\n<p>Warning: while this has worked fine for me in what I've done, I'm pretty certain I haven't used all parts of ASIO, and I'm ever more certain I haven't combined them in every possible way. As such, I can say it has worked, and I don't recall any issues that seemed to be related to lack of using other parts of Boost, but at the time time, it's always possible that (depending what you use and how) you could run into an issue I simply never encountered (e.g., something that works with <code>boost::bind</code> that just doesn't work (at least the same way) with VC++ 2013's implementation of <code>std::bind</code>.</p>\n\n<p>The other compilers are a lot less certain--with a newer version of gcc, there would be no problem, but 4.4 or 4.3 is pretty darned old. It's been long enough since I did anything on OS X that I'm uncertain what compiler goes with XCode 5.1.</p>\n"}, {"owner": {"reputation": 398, "user_id": 4796503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ApH2Q.png?s=128&g=1", "display_name": "MicroCheapFx", "link": "https://stackoverflow.com/users/4796503/microcheapfx"}, "is_accepted": false, "score": 0, "last_activity_date": 1482847471, "creation_date": 1482847471, "answer_id": 41346643, "question_id": 29661237, "link": "https://stackoverflow.com/questions/29661237/can-asio-be-used-without-boost-or-c11/41346643#41346643", "title": "Can Asio be used without boost or C++11?", "body": "<p>Asio might be using <a href=\"http://en.cppreference.com/w/cpp/utility/functional/placeholders\" rel=\"nofollow noreferrer\">placeholder</a> or <a href=\"http://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">smart pointers</a> or even <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">bind()</a> function which were parts of boost and were included in C++11 std library. Without those, you can't use asio.</p>\n"}], "owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2753, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1482847471, "creation_date": 1429133205, "last_edit_date": 1429154247, "question_id": 29661237, "link": "https://stackoverflow.com/questions/29661237/can-asio-be-used-without-boost-or-c11", "title": "Can Asio be used without boost or C++11?", "body": "<p>I'm looking at libraries to help build a scalable tcp/ip server, and Boost::ASIO looks pretty nice to make async socket i/o work homogeneously across platforms (We need to support at least OSX, Linux x86, and Windows, probably Solaris, maybe HP-UX &amp; AIX).</p>\n\n<p>Management is dead-set against using Boost in our product, mostly due to it being 'bloated', and due to issues we've had in the past with conflicts, as our code gets statically linked with customer code (which may also be using boost, possibly not the same version).</p>\n\n<p>The <a href=\"http://think-async.com/Asio/AsioAndBoostAsio\" rel=\"nofollow\" title=\"Asio\">Asio</a> page claims that it can be used without boost, although it's pretty vague, as later it also says \"When using C++11 ... Asio can be used independently of Boost ...\", which seems to imply it won't work on a C++03 compiler. I was thinking I could simply do a '#define asio proprietary_asio' before including the header to avoid the symbol clash issue.</p>\n\n<p>I just tested VS2013 on my local machine, and it compiled; Does anyone know which particular C++11 features are needed? I need to (at the very least) support VS2012/2013 on windows, gcc 4.4 (maybe 4.3) on linux, and XCode 5.1 on OSX.</p>\n\n<p>I'm guessing the problem is going to be with the old version of GCC...</p>\n"}, {"tags": ["c++", "memory", "memory-management", "embedded", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1429133028, "post_id": 29661149, "comment_id": 47461878, "body": "It is implementation specific. So edit your question to improve it by telling much more (which compiler &amp; version, which <code>libstdc++</code> &amp; version, how is <code>::operator new</code> implemented, how -with which optimizations- are you compiling, etc etc...)."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1429133169, "post_id": 29661149, "comment_id": 47461961, "body": "Even the edit does not tell enough. How is actually the memory allocator done?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1429133203, "post_id": 29661149, "comment_id": 47461977, "body": "It all depends on whether you (and your libraries) initialize variables, or rely on power-up reset to give them expected values.  Soft reset doesn&#39;t restore everything to power-up defaults."}, {"owner": {"reputation": 3189, "user_id": 633310, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8583c083d6d1fc36b494effea416b114?s=128&d=identicon&r=PG", "display_name": "Cuadue", "link": "https://stackoverflow.com/users/633310/cuadue"}, "edited": false, "score": 0, "creation_date": 1429133445, "post_id": 29661149, "comment_id": 47462118, "body": "Right, so how do I find those things out? I&#39;ll edit the question..."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1429134175, "post_id": 29661149, "comment_id": 47462498, "body": "libstdc++ uses the memory allocation services of the standard C library (malloc/free); so we need to know what C library is being used - the default glibc requires a POSIX environment, so on a bare-metal system you are most probably using an alternative."}], "answers": [{"comments": [{"owner": {"reputation": 3189, "user_id": 633310, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8583c083d6d1fc36b494effea416b114?s=128&d=identicon&r=PG", "display_name": "Cuadue", "link": "https://stackoverflow.com/users/633310/cuadue"}, "edited": false, "score": 0, "creation_date": 1429135689, "post_id": 29661417, "comment_id": 47463155, "body": "Very informative. Yes, my <code>_sbrk()</code> looks very similar. The <code>heap_end</code> is zero initialized. Where could I look for the zero-initialization? But, even if the heap had junk left in it, could it cause a <code>bad_alloc</code>?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 3189, "user_id": 633310, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8583c083d6d1fc36b494effea416b114?s=128&d=identicon&r=PG", "display_name": "Cuadue", "link": "https://stackoverflow.com/users/633310/cuadue"}, "edited": false, "score": 0, "creation_date": 1429215949, "post_id": 29661417, "comment_id": 47507466, "body": "@Cuadue :  I am hypothesising that rather the &quot;having junk left in&quot;, it is simply a matter of not being initialised correctly which would have non-deterministic results.  You should perhaps be clearer on what you mean by a &quot;soft reset&quot; - is the C runtime initialisation <i>definitely</i> executed on such a reset?"}, {"owner": {"reputation": 3189, "user_id": 633310, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8583c083d6d1fc36b494effea416b114?s=128&d=identicon&r=PG", "display_name": "Cuadue", "link": "https://stackoverflow.com/users/633310/cuadue"}, "edited": false, "score": 0, "creation_date": 1429223856, "post_id": 29661417, "comment_id": 47511357, "body": "We poke the CPU registers to stop the clock, issue a reset, and start the clock again. An attached JTAG debugger indicates that the program starts executing from the boot vector (address 0)."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 3189, "user_id": 633310, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8583c083d6d1fc36b494effea416b114?s=128&d=identicon&r=PG", "display_name": "Cuadue", "link": "https://stackoverflow.com/users/633310/cuadue"}, "edited": false, "score": 1, "creation_date": 1429275575, "post_id": 29661417, "comment_id": 47535647, "body": "@Cuadue :  Perhaps not related to your problem, but I wonder why you explicitly stop the clock since all peripheral registers will be restored to their reset state on a true reset in any case?  &quot;ARMv7&quot; refers to a number of cores, Cortex-M (ARMv7-M/v7E-M) for example, reset is issued via the NVIC, although it is also possible to simply stop resetting a watchdog timer.  Neither is the same as simply jumping to the reset vector, which would not reset the stack-pointer to its reset state for example."}, {"owner": {"reputation": 3189, "user_id": 633310, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8583c083d6d1fc36b494effea416b114?s=128&d=identicon&r=PG", "display_name": "Cuadue", "link": "https://stackoverflow.com/users/633310/cuadue"}, "edited": false, "score": 0, "creation_date": 1429289124, "post_id": 29661417, "comment_id": 47545461, "body": "To be honest, I don&#39;t know why we have to stop the clock, but it&#39;s what the vendor recommends. Good point about the SP and LR, I&#39;ll have a look."}], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 2, "last_activity_date": 1429134952, "last_edit_date": 1429134952, "creation_date": 1429133986, "answer_id": 29661417, "question_id": 29661149, "link": "https://stackoverflow.com/questions/29661149/can-a-graceless-exit-corrupt-the-c-memory-allocator/29661417#29661417", "title": "Can a graceless exit corrupt the C++ memory allocator?", "body": "<p>If state is retained between restarts, then this is most likely due to incorrect initialisation at start-up.</p>\n\n<p>It is the responsibility of the C++ runtime start-up to initialise the standard library.  In a bare-metal system this includes initialising the heap and memory allocator.  How this is done, and whether you have to perform any special action will depend on your particular tool-chain and library.</p>\n\n<p>In ARM RealView (also used by Keil MDK-ARM) for example, you normally specify the heap size explicitly in the start-up code configuration.  In other cases it is common for the linker script to automatically allocate all available memory that is not statically allocated or allocated to the stack to be allocated to the heap automatically.  The linker script still needs to know the location and size of available RAM of course.  Check your linker's map file output to verify the size and location of the heap.</p>\n\n<p>Most embedded system libraries include stubs that must be user-implemented to match the library to the target - mostly this is related to I/O, but in the <em>Newlib</em> library (often used with GCC bare-metal toolchains) for example, the <code>sbrk</code> (or <code>sbrk_r</code>) stub must be reimplemented for correct heap operation.  The implementation of <code>sbrk</code> is critical to the correct operation of the heap.</p>\n\n<hr>\n\n<p><strong>Added</strong></p>\n\n<p>It appears that Sourcery CodeBench Lite uses Newlib.  I have seen implementations that start as follows:</p>\n\n<pre><code>caddr_t _sbrk(int incr) \n{\n\n    extern char _ebss; // Defined by the linker\n    static char *heap_end;\n    char *prev_heap_end;\n\n    if (heap_end == 0) { ...\n</code></pre>\n\n<p>This is potentially unsafe if the runtime initialisation does not correctly initialise static data to zero (some embedded systems do that for faster start-up; though it is seldom worth the potential for bugs).  Verify that your start-up performs zero-initialisation correctly and in any case explicitly initialise <code>heap_end</code> to zero:</p>\n\n<pre><code>static char *heap_end = 0 ;\n</code></pre>\n\n<p>in order to guarantee that it will work regardless of the strict correctness or otherwise of the start-up.  </p>\n"}, {"comments": [{"owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "edited": false, "score": 0, "creation_date": 1429166041, "post_id": 29661446, "comment_id": 47472688, "body": "the initial question explicitely stated this is bare metal (no OS) embedded code. Discussing the duties of the OS is probably pointless in this regard."}], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 0, "last_activity_date": 1429134144, "creation_date": 1429134144, "answer_id": 29661446, "question_id": 29661149, "link": "https://stackoverflow.com/questions/29661149/can-a-graceless-exit-corrupt-the-c-memory-allocator/29661446#29661446", "title": "Can a graceless exit corrupt the C++ memory allocator?", "body": "<p>A good implementation of memory allocation should not get corrupted by allocating all available memory (or trying to allocate more than all) , such that <code>std::bad_alloc</code> is called. It is of course possible that there are bugs in the memory allocator in the OS you are using - there is no telling. But a \"good\" allocator should not get corrupted or stop working simply because your application allocated until it got <code>std::bad_alloc</code>.  </p>\n\n<p>However, whether just exiting the application with <code>exit(1)</code> at that point will free up the memory allocated by the application code or not depends on your operating system. If it handles cleanup of exiting application code, then you're safe. If the OS doesn't, then you need to catch the exception and clean everything up yourself. Since there are literally many hundreds of operating systems in existance, it's impossible to answer the question in a general way. </p>\n\n<p>It should be pretty easy to test this: Just write an application that allocates a lot of memory in a loop, run it several times times and determine if the number of iterations in the loop is about the same number or, for example, reduces for each run of the application - in the latter case, you have some sort of problem.</p>\n"}], "owner": {"reputation": 3189, "user_id": 633310, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8583c083d6d1fc36b494effea416b114?s=128&d=identicon&r=PG", "display_name": "Cuadue", "link": "https://stackoverflow.com/users/633310/cuadue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1429134952, "creation_date": 1429132852, "last_edit_date": 1429133484, "question_id": 29661149, "link": "https://stackoverflow.com/questions/29661149/can-a-graceless-exit-corrupt-the-c-memory-allocator", "title": "Can a graceless exit corrupt the C++ memory allocator?", "body": "<p>It is well known that the usual cause of a <code>std::bad_malloc</code> being thrown is when memory is exhausted.</p>\n\n<p>I'm executing an embedded, bare metal (without Operating System) application. The initial allocation sometimes succeeds, and sometimes fails. Since there is no other code running (no OS, no other processes), I have good reason to believe that this <code>std::bad_alloc</code> is more complex than allocating more memory than is available to the system. When it works, there is ~500kB of memory allocated. The hardware has been allocated 16MB.</p>\n\n<p>Instead, it seems that the system has an incorrect record of how much memory is allocated, specifically that when the allocator begins, it thinks some non-zero amount of memory has already been allocated.</p>\n\n<p>When a bare metal application starts, it should have identically zero memory allocated. It seems that is not the case here.</p>\n\n<p>Is it possible that some state in the memory allocator is being retained between soft resets? How can I find out how the allocation is being done?</p>\n\n<p>This is running on an ARMv7 with gcc (Sourcery CodeBench Lite 2013.05-40) 4.7.3, and linking against libstdc++6.0. We are compiling with <code>-O0 -g</code>.</p>\n\n<p>We are allocating both <code>std::</code> objects and user-defined objects with the <code>new</code> keyword, and the standard allocator.</p>\n"}, {"tags": ["c++", "mongodb", "mongo-cxx-driver"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1429132408, "post_id": 29660986, "comment_id": 47461538, "body": "You&#39;re passing a <code>double</code>. The function expects a <code>long long int</code>, and apparently the compile flags are such warnings are treated as errors?"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1429132413, "post_id": 29660986, "comment_id": 47461541, "body": "You have an error on line 83 of <code>compare_numbers.h</code>. Apparently, you&#39;re passing a <code>double</code> where you should be passing a <code>long long int</code>. That&#39;s what the error says."}, {"owner": {"reputation": 134, "user_id": 4623896, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b63ed0994ed6475838f89353771f1895?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid Mamdoohi", "link": "https://stackoverflow.com/users/4623896/hamid-mamdoohi"}, "edited": false, "score": 0, "creation_date": 1429132544, "post_id": 29660986, "comment_id": 47461610, "body": "i just use <code>scons</code> in mongo-cxx-driver-legacy directory, without extra code"}, {"owner": {"reputation": 1999, "user_id": 2866898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c3f789c8dff46eed3cfa22ee7abc00?s=128&d=identicon&r=PG", "display_name": "Arkanosis", "link": "https://stackoverflow.com/users/2866898/arkanosis"}, "edited": false, "score": 0, "creation_date": 1429132578, "post_id": 29660986, "comment_id": 47461628, "body": "If the code is not yours, then you&#39;re probably using a compiler which is more strict than the one the developers use. Check that you use the last version of the code and if so, report the issue upstream."}, {"owner": {"reputation": 6760, "user_id": 1401962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b8a7fe2bd33ed2532597f348d523fb?s=128&d=identicon&r=PG", "display_name": "tux3", "link": "https://stackoverflow.com/users/1401962/tux3"}, "edited": false, "score": 0, "creation_date": 1429132688, "post_id": 29660986, "comment_id": 47461684, "body": "Someone&#39;s been abusing the fact that <code>sizeof(double) == sizeof(long long)</code> on most sane architectures. Remove the -Werror and pray."}, {"owner": {"reputation": 134, "user_id": 4623896, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b63ed0994ed6475838f89353771f1895?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid Mamdoohi", "link": "https://stackoverflow.com/users/4623896/hamid-mamdoohi"}, "edited": false, "score": 0, "creation_date": 1429132795, "post_id": 29660986, "comment_id": 47461735, "body": "my gcc version is 4.1.2"}], "owner": {"reputation": 134, "user_id": 4623896, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b63ed0994ed6475838f89353771f1895?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid Mamdoohi", "link": "https://stackoverflow.com/users/4623896/hamid-mamdoohi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429132265, "creation_date": 1429132265, "question_id": 29660986, "link": "https://stackoverflow.com/questions/29660986/compare-numbers-h83-warning-passing-double-for-argument-2-to-int-mongoco", "title": "compare_numbers.h:83: warning: passing &#39;double&#39; for argument 2 to &#39;int mongo::compareLongs(long long int, long long int)&#39;", "body": "<p>I want compile mongo c++ driver in  RHEL 5, but when use <code>scons</code>, Error is : <br/></p>\n\n<pre><code>compare_numbers.h:83: warning: passing 'double' for argument 2 to 'int mongo::compareLongs(long long int, long long int)'\nscons: *** [build/linux2/normal/mongo/bson/bsonelement.o] Error 1\nscons: building terminated because of errors.\n</code></pre>\n\n<p>What is this ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 2, "creation_date": 1429132364, "post_id": 29660763, "comment_id": 47461511, "body": "what do you mean you dont want to use a leftshift technique? You dont want to use the operator <code>&lt;&lt;</code>?  You could easily write code to simulate left shifting/right shifting"}], "answers": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 1, "last_activity_date": 1429136549, "creation_date": 1429136549, "answer_id": 29661966, "question_id": 29660763, "link": "https://stackoverflow.com/questions/29660763/how-to-neglect-a-a-block-of-bits-while-adding-two-binary-numbers-at-bit-level/29661966#29661966", "title": "How to neglect a a block of bits while adding two binary numbers at bit level", "body": "<p>I will assume you are confident you can right a version of <code>add()</code> for which the <code>cut</code> is 0. Then, you can write two functions. The first function just implements the <code>add()</code> assuming the <code>cut</code> is 0.</p>\n\n<pre><code>// Add reg and arr (cut is 0)\nvoid add( bool reg[], bool arr[], int sizereg, int sizearr )\n{\n    //...\n}\n</code></pre>\n\n<p>The second function that has <code>cut</code> calls the first function, adjusting the arguments in such a way that the <code>cut</code> can be treated as 0. If the <code>cut</code> is on the higher order indices, you simply need to reduce the size. If the <code>cut</code> is on the lower order indices, then you also have to advance the pointer.</p>\n\n<pre><code>// cut &gt; 0 means cutting the higher indices.\n// cut &lt; 0 means cutting the lower indices.\nvoid add( bool reg[], bool arr[], int sizereg, int sizearr, int cut )\n{\n    if (cut &lt; 0) {\n        cut = -cut;\n        reg += cut;\n    }\n    add(reg, arr, sizereg - cut, sizearr);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4793191, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g3MI37mVhgs/AAAAAAAAAAI/AAAAAAAAABE/s-pwfFXshPY/photo.jpg?sz=128", "display_name": "Hashir Omer", "link": "https://stackoverflow.com/users/4793191/hashir-omer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429136549, "creation_date": 1429131413, "question_id": 29660763, "link": "https://stackoverflow.com/questions/29660763/how-to-neglect-a-a-block-of-bits-while-adding-two-binary-numbers-at-bit-level", "title": "How to neglect a a block of bits while adding two binary numbers at bit level", "body": "<p>I have been assigned a project on binary arithmetic at the bit level. I have made a function which successfully adds two binary numbers ignoring the overflow. For some reason , I want to make it more flexible by passing an argument to ignore n bits of bits from a number.</p>\n\n<p>For instance, I want to  neglect the rightmost two bits of a and add it to b.</p>\n\n<pre><code>         a=111011\n\n         b= 101         \n        +---------\n          1001111\n</code></pre>\n\n<p>Here's my function definition.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>void add( bool reg[], bool arr[], int sizereg, int sizearr, int cut)\n\n{\nint i=sizereg-1-cut;\nint j=sizereg-sizearr;\n\nbool  carry=0,dummy;\n\n\n\nfor (i; i&gt;=j-cut ; i--)\n  {\n\n     dummy=reg[i]; \n     reg[i]= (!reg[i]) &amp;&amp; (arr[i-j] !=carry) || reg[i] &amp;&amp; (arr[i-j]==carry);\n     carry=(arr[i-j] &amp;&amp;dummy) || (dummy&amp;&amp;carry) || (arr[i-j]&amp;&amp;carry);\n  }\n\nwhile (carry &amp;&amp; (i+1))\n\n{     \n    dummy=reg[i];\n    reg[i]=(carry!=reg[i]);\n    carry=(carry==dummy);\n    i--;\n}\n</code></pre>\n\n\n\n<p>My program works for cut=0, for nonzero values of cut, it doesn't give the desired result. How do I correctly use cut in order to  neglect (cut) number of bits from the reg array</p>\n\n<p>PS: I don't want to use Leftshift technique.</p>\n"}, {"tags": ["c++", "stream"], "answers": [{"comments": [{"owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "edited": false, "score": 0, "creation_date": 1429131677, "post_id": 29660781, "comment_id": 47461093, "body": "I wrote &quot;perform some operations&quot; because I need to do something more complex than adding a simple newline. Frankly I&#39;d prefer not to use a &quot;terminator&quot; object. I will if I&#39;m forced to."}, {"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "reply_to_user": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "edited": false, "score": 0, "creation_date": 1429131818, "post_id": 29660781, "comment_id": 47461183, "body": "@Albert Are you looking for std::stringbuffer?"}, {"owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "edited": false, "score": 0, "creation_date": 1429132054, "post_id": 29660781, "comment_id": 47461314, "body": "Not really, the objects I&#39;ll be receiving are complex ones (not always convertible to simple strings) and I need to buffer them for an &#39;entire line&#39; of input before start using them."}], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 1, "last_activity_date": 1429131497, "creation_date": 1429131497, "answer_id": 29660781, "question_id": 29660753, "link": "https://stackoverflow.com/questions/29660753/detect-end-of-line-before-next-one/29660781#29660781", "title": "Detect end of line before next one", "body": "<pre><code>`\"\\n\"` \n</code></pre>\n\n<p>do it for you as shown below:</p>\n\n<pre><code>int main() {\n    Test myobj;\n\n    myobj&lt;&lt; \"hello\" &lt;&lt; \"this is cool&lt;&lt;\"\\n\"\";\n    // How to insert a newline here?        \n   myobj &lt;&lt; \"but\" &lt;&lt; \"this is NOT cool\";\n}\n</code></pre>\n\n<p>Or otherwise you use <code>std::endl</code> as follows</p>\n\n<pre><code>myobj &lt;&lt; \"hello\" &lt;&lt; \"this is cool&lt;&lt;std::endl;\n</code></pre>\n"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 0, "last_activity_date": 1429131664, "creation_date": 1429131664, "answer_id": 29660824, "question_id": 29660753, "link": "https://stackoverflow.com/questions/29660753/detect-end-of-line-before-next-one/29660824#29660824", "title": "Detect end of line before next one", "body": "<p>You can detect it in its destructor. Create a <code>log()</code> helper function that returns a temporary. At the end of the full expression its destructor will run:</p>\n\n<pre><code>class Test {\npublic:\n    template&lt;class T&gt;\n    Test&amp; operator&lt;&lt; (T&amp;&amp; anything) {...}\n\n    ~Test() { std::cout &lt;&lt; std::endl; }\n};\n\nTest log() { return Test(); }\n// ...\nlog() &lt;&lt; \"hello\" &lt;&lt; \"this is cool\";   // destructor inserts a newline here\nlog() &lt;&lt; \"but\" &lt;&lt; \"this is NOT cool\"; // here too\n</code></pre>\n"}], "owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 29660824, "answer_count": 2, "score": 1, "last_activity_date": 1429131664, "creation_date": 1429131392, "question_id": 29660753, "link": "https://stackoverflow.com/questions/29660753/detect-end-of-line-before-next-one", "title": "Detect end of line before next one", "body": "<p>I don't know how to \"buffer\" a line of input (and perform some operations on that line, e.g. insert a newline at the end) before the next one in the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Test {\n  public:\n    template&lt;class T&gt;\n    Test&amp; operator&lt;&lt; (T&amp;&amp; anything) {\n        std::cout &lt;&lt; anything;\n        return *this;\n    }\n\n};\n\nint main() {\n    Test myobj;\n\n    myobj &lt;&lt; \"hello\" &lt;&lt; \"this is cool\";\n    // How to insert a newline here?        \n    myobj &lt;&lt; \"but\" &lt;&lt; \"this is NOT cool\";\n}\n</code></pre>\n\n<p>I'd like to be able to detect when the line</p>\n\n<pre><code>myobj &lt;&lt; \"hello\" &lt;&lt; \"this is cool\";\n</code></pre>\n\n<p>has completed before the next one is executed.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qwebview"], "comments": [{"owner": {"reputation": 5779, "user_id": 876686, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0dc9f06a29ef13328a46d31db59634ea?s=128&d=identicon&r=PG", "display_name": "tier1", "link": "https://stackoverflow.com/users/876686/tier1"}, "edited": false, "score": 2, "creation_date": 1429132948, "post_id": 29660722, "comment_id": 47461822, "body": "Only thing that I can think of is possibly have another thread / process scrape the content of the website and save it for offline use?"}, {"owner": {"reputation": 3215, "user_id": 1095432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/608db.png?s=128&g=1", "display_name": "Kunal", "link": "https://stackoverflow.com/users/1095432/kunal"}, "edited": false, "score": 0, "creation_date": 1429145975, "post_id": 29660722, "comment_id": 47466462, "body": "This might help -&gt; <a href=\"http://doc.qt.io/qt-5/qwebsettings.html#setOfflineWebApplicationCachePath\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/&hellip;</a>"}], "owner": {"reputation": 3905, "user_id": 784345, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4585b1d04f798ebd7d091aa98d3b99aa?s=128&d=identicon&r=PG", "display_name": "Dejwi", "link": "https://stackoverflow.com/users/784345/dejwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429131292, "creation_date": 1429131292, "question_id": 29660722, "link": "https://stackoverflow.com/questions/29660722/cache-content-of-qwebview-for-offline-usage", "title": "Cache content of QWebView for offline usage", "body": "<p>I wish to use a QWebView in application, which most of time is in offline state. Even then it should present as up to date data as it is possible.</p>\n\n<p>For example - user visits the stackoverflow.com webpage via QWebView. After 2-3 days he wish to visit the same webpage, however he is in offline state. As a result he gets the last available content.</p>\n\n<p><strong>The question</strong> - Is it possible to easily add an offline storage to QWebView instance?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1429131346, "post_id": 29660706, "comment_id": 47460893, "body": "<code>IRepository</code> should have a virtual destructor, but that&#39;s not your bug."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1429131620, "post_id": 29660706, "comment_id": 47461062, "body": "Why did you declare all of those functions as <code>inline</code>?"}], "answers": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 0, "last_activity_date": 1429131575, "creation_date": 1429131575, "answer_id": 29660804, "question_id": 29660706, "link": "https://stackoverflow.com/questions/29660706/cant-get-this-class-with-template-to-work/29660804#29660804", "title": "Can&#39;t get this class with template to work?", "body": "<p>If you want to declare the member functions of <code>AccountRepository</code> as <code>inline</code>, you have to make them known in all translation units that use them, as per [basic.def.odr]/3:</p>\n\n<blockquote>\n  <p>(...) An inline function shall be defined in every translation unit in which it is odr-used.</p>\n</blockquote>\n\n<p>Either remove the <code>inline</code> from the function definitions or move them all to the header.</p>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1429132973, "post_id": 29660820, "comment_id": 47461845, "body": "@dyp: The linker is responsible for <i>the link error</i>.  However, the <i>cause</i> is UB because each ODR use blah blah blah.  I also noticed that and edited.  Trying to explain both the cause and the effects in novice-friendly language is tricky."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1429133529, "post_id": 29660820, "comment_id": 47462158, "body": "I don&#39;t think your answer is bad, I&#39;m just a bit confused about certain details such as <i>&quot;so it expects that the cpps that use them should each have their own (identical) copy&quot;</i>. As far as I can tell, the linker does not know the function is <code>inline</code> - it sees two object files. Only in the TU of one of them has the function been declared <code>inline</code>. In the other TU, the <i>compiler</i> (presumably) assumes the function is <i>not</i> inline."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1429133788, "post_id": 29660820, "comment_id": 47462301, "body": "@dyp: I laid out all the details, should be complete now."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1429133819, "post_id": 29660820, "comment_id": 47462322, "body": "Hmm I think I should take that back. The linker has to know something about the function, since it needs to select one instance rather than reporting a duplicate symbol."}], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": false, "score": 2, "last_activity_date": 1429133764, "last_edit_date": 1429133764, "creation_date": 1429131623, "answer_id": 29660820, "question_id": 29660706, "link": "https://stackoverflow.com/questions/29660706/cant-get-this-class-with-template-to-work/29660820#29660820", "title": "Can&#39;t get this class with template to work?", "body": "<p>You're misusing the <code>inline</code> keyword.  Treat it as if it means \"the implementation for this function is in the header\".  </p>\n\n<p>This immediately reveals the problem: You have a lot of <code>inline</code> functions in one of your cpp files, which is not a header.  Each cpp file that uses an <code>inline</code> function is <em>required</em> to either contain or include a definition of that function.  The problem is that the linkers do magic things with <code>inline</code> functions because they're supposed to be one copy in each of many cpp files.  So the compiler compiles <code>main.cpp</code>, and (since main doesn't know the function is inlined, notes that later the linker should link in the default constructor).  The compiler then compiles <code>AccountReposity.cpp</code>, sees that an inline function is not used, and so just skips it. Later then the linker has trouble finding a copy of <code>AccountRepository()</code> to use, and it reports an error. If the function body was defined in the header properly, it would have been instantiated into <code>main.cpp</code> during the compilation step, before it gets to the linking stage.</p>\n\n<p>The fact that <em>some</em> compilers treat <code>inline</code> functions special doesn't really affect the rule-of-thumb at all.  Other compilers don't give <code>inline</code> functions any special optimization, and thinking of it as an optimization causes the error you encountered.  Ignoring the optimization makes it clearer where the keyword goes.</p>\n"}], "owner": {"reputation": 81, "user_id": 4143938, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/605d000bb3b7f7762326f94a082c8836?s=128&d=identicon&r=PG", "display_name": "Max Medina", "link": "https://stackoverflow.com/users/4143938/max-medina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1429133764, "creation_date": 1429131250, "question_id": 29660706, "link": "https://stackoverflow.com/questions/29660706/cant-get-this-class-with-template-to-work", "title": "Can&#39;t get this class with template to work?", "body": "<p>I'm trying to write something like a C# interface in C++ with a generic object but i can't get it work.\nevery time i create a new instance in the main i get the following error:\nError   1   error LNK2019: unresolved external symbol \"public: __thiscall AccountRepository::AccountRepository(void)\"</p>\n\n<p><em>main.cpp</em></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include \"AccountRepository.h\"\n\nusing namespace std;\n\nint main(){\n\n    AccountRepository repo;\n\n    return 0;\n}\n</code></pre>\n\n<p><em>IRepository.h</em></p>\n\n<pre><code>#pragma once\n#include &lt;vector&gt;\nusing namespace std;\n\ntemplate &lt;class Entity&gt;\nclass IRepository\n{\npublic:\n    virtual bool add(Entity entity) = 0;\n    virtual bool update(Entity entity) = 0;\n    virtual Entity getById(int Id) = 0;\n    virtual bool remove(Entity entity) = 0;\n    virtual vector&lt;Entity&gt; getAll() = 0;\n};\n</code></pre>\n\n<p><em>AccountRepository.h</em></p>\n\n<pre><code>#pragma once\n#include \"IRepository.h\"\n#include \"Account.h\"\n#include &lt;vector&gt;\n\nclass AccountRepository : public IRepository&lt;Account&gt;{\nprivate:\n    vector&lt;Account&gt; _accounts;\n\npublic:\n    AccountRepository();\n    ~AccountRepository();\n\n    virtual bool add(Account entity) override;\n    virtual bool update(Account entity) override;\n    virtual Account getById(int Id) override;\n    virtual bool remove(Account entity) override;\n    virtual vector&lt;Account&gt; getAll() override;\n\n};\n</code></pre>\n\n<p><em>AccountReposity.cpp</em></p>\n\n<pre><code>#include \"AccountRepository.h\"\n\ninline AccountRepository::AccountRepository()\n{\n\n}\n\ninline AccountRepository::~AccountRepository()\n{\n\n}\n\ninline bool AccountRepository::add(Account entity)\n{\n    _accounts.push_back(entity);\n    return true;\n}\n\ninline bool AccountRepository::update(Account entity)\n{\n    for (Account account : _accounts){\n        if (account.getId() == entity.getId()){\n            account.setName(entity.getName());\n            account.setDescription(entity.getDescription());\n            return true;\n        }\n    }\n\n    return false;\n}\n\ninline Account AccountRepository::getById(int Id)\n{\n    for (Account account: _accounts)\n    {\n        if (account.getId() == Id)\n            return account;\n    }\n}\n\ninline bool AccountRepository::remove(Account entity)\n{\n    vector&lt;Account&gt;::iterator it;\n    for (it = _accounts.begin(); it != _accounts.end(); ++it){\n        if (it-&gt;getId() == entity.getId())\n        {\n            _accounts.erase(it);\n            return true;\n        }\n    }\n\n    return false;\n}\n\ninline vector&lt;Account&gt; AccountRepository::getAll()\n{\n    return _accounts;\n}\n</code></pre>\n"}, {"tags": ["c++", "hash", "unordered-set"], "answers": [{"owner": {"reputation": 55561, "user_id": 418715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ExBMo.gif?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/418715/joe"}, "is_accepted": true, "score": 2, "last_activity_date": 1429132025, "last_edit_date": 1429132025, "creation_date": 1429131466, "answer_id": 29660773, "question_id": 29660702, "link": "https://stackoverflow.com/questions/29660702/hash-function-errors-c/29660773#29660773", "title": "Hash function errors, c++", "body": "<p>Your operator takes a <code>const</code> class but calls a non-const member function. To fix your issue declare <code>getNum</code> as <code>const</code> since it does not modify the class.</p>\n\n<pre><code>class Class{\nprivate:\n    int num;\npublic:\n    Class(int n) : num(n) {}\n    Class() : num(0) {}\n    int getNum() const { return num;}\n\n    friend bool operator==(const Class &amp;k1, const Class &amp;k2);\n\n};\n</code></pre>\n\n<p>In the above example also notice that I used <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow\">member initializer lists</a> to instantiate member variables. Also change the return type from <code>void</code> to <code>int</code> on main and I recommend either returning 0 or <code>EXIT_SUCCESS</code> from <code>&lt;cstdlib&gt;</code> at the end of main.</p>\n"}], "owner": {"reputation": 2060, "user_id": 4043273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001236868090/picture?type=large", "display_name": "wdc", "link": "https://stackoverflow.com/users/4043273/wdc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 29660773, "answer_count": 1, "score": 1, "last_activity_date": 1429132025, "creation_date": 1429131227, "question_id": 29660702, "link": "https://stackoverflow.com/questions/29660702/hash-function-errors-c", "title": "Hash function errors, c++", "body": "<p>Here's the simple example class with hash function I wrote. Function maybe isn't most efficient one, but quality of hash function isn't relevant to me for now.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;unordered_set&gt;\n\nusing namespace std;\n\nclass Class{\nprivate:\n    int num;\npublic:\n    Class(int n){num=n;}\n    Class(){num=0;}\n    int getNum(){return num;}\n\n    friend bool operator==(const Class &amp;k1, const Class &amp;k2);\n\n};\n\nbool operator==(const Class &amp;k1, const Class &amp;k2){\n    return(k1.num == k2.num);\n}\n\nnamespace std {\n  template &lt;&gt;\n  struct hash&lt;Class&gt;{\n\n    size_t operator()(const Class &amp; c) const\n    {\n        return(31+c.getNum()*7);\n    }\n  };\n}\n\nvoid main(){\n\n    unordered_set&lt;Class&gt; set;\n    set.insert(Class(5));\n    set.insert(Class(55));\n    set.insert(Class(4));\n    set.insert(Class(123));\n    set.insert(Class(11));\n\n    for(unordered_set&lt;Class&gt;::iterator it = set.begin(); it!=set.end(); it++)\n        cout&lt;&lt;it-&gt;getNum()&lt;&lt; endl;\n}\n</code></pre>\n\n<p>This worked fine when all fields of <code>Class</code> were public, but errors appear in hash function at <code>return(31+c.getNum()*7);</code> on <code>c</code>, because I can't call <code>getNum()</code> function. I don't know if there is any problem if in line <code>size_t operator()(const Class &amp; c) const</code> I remove const, so object c is not const?</p>\n\n<p>Also, in the last line, <code>cout&lt;&lt;it-&gt;getNum()&lt;&lt; endl</code>, there is error when accessing <code>getNum()</code> function. I don't know how to iterate over unordered_set <code>set</code> and to print num.</p>\n"}, {"tags": ["c++", "arrays", "bit-manipulation", "bit", "bitmask"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 3, "creation_date": 1429131312, "post_id": 29660664, "comment_id": 47460868, "body": "Since you have reversed the bit order, just reverse the order of the position (eg <code>7 - position</code>)"}, {"owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1429131651, "post_id": 29660664, "comment_id": 47461080, "body": "that was it! thanks, I now remember hearing about that in class and I wish I remembered sooner!"}], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "edited": false, "score": 0, "creation_date": 1429131736, "post_id": 29660769, "comment_id": 47461127, "body": "thanks! yeah i forgot to take that Mask function out and replace with the one i declare in the method, but same thing essentially"}], "owner": {"reputation": 973, "user_id": 4777513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/inkg3.jpg?s=128&g=1", "display_name": "Ekleog", "link": "https://stackoverflow.com/users/4777513/ekleog"}, "is_accepted": true, "score": 4, "last_activity_date": 1429131438, "creation_date": 1429131438, "answer_id": 29660769, "question_id": 29660664, "link": "https://stackoverflow.com/questions/29660664/simplifying-a-bit-set-algorithm-attempt/29660769#29660769", "title": "Simplifying a bit set algorithm attempt", "body": "<p>Actually the order you read bits is not the order C (or C++) reads bits. You appear to be reading bits from left to right, while for C \"1\" is \"00000001\".\nSo you should fix your statement this way (also using the \"|=\" operator) :</p>\n\n<pre><code>barray[location] |= 1 &lt;&lt; (7 - position);\n</code></pre>\n\n<p>(I'm ignoring your function <code>Mask(index)</code> as you did not describe it to us)</p>\n"}, {"owner": {"reputation": 7641, "user_id": 4282370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0WI7C.jpg?s=128&g=1", "display_name": "Amnon Shochot", "link": "https://stackoverflow.com/users/4282370/amnon-shochot"}, "is_accepted": false, "score": 2, "last_activity_date": 1429131444, "creation_date": 1429131444, "answer_id": 29660770, "question_id": 29660664, "link": "https://stackoverflow.com/questions/29660664/simplifying-a-bit-set-algorithm-attempt/29660770#29660770", "title": "Simplifying a bit set algorithm attempt", "body": "<p>It looks like what you need is to define <code>int position = 7 - (index % 8);</code>.</p>\n"}], "owner": {"reputation": 542, "user_id": 3470987, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1527668336/picture?type=large", "display_name": "Tyler Kelly", "link": "https://stackoverflow.com/users/3470987/tyler-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 29660769, "answer_count": 2, "score": 0, "last_activity_date": 1429131444, "creation_date": 1429131080, "question_id": 29660664, "link": "https://stackoverflow.com/questions/29660664/simplifying-a-bit-set-algorithm-attempt", "title": "Simplifying a bit set algorithm attempt", "body": "<p>Trying to simplify this working but lengthy code for an assignment involving bit array manipulation. What I have so far for the set function(sets the bit at index in the array to 1):</p>\n\n<pre><code>// set bit with given index to 1\nvoid BitArray::Set   (unsigned int index){\n    switch( index%8 )\n    {\ncase 7: \n    barray[index/8] = barray[index/8] | 1;\n    break;\ncase 6: \n    barray[index/8] = barray[index/8] | 2;\n    break;\ncase 5:\n    barray[index/8] = barray[index/8] | 4;\n    break;\ncase 4:\n    barray[index/8] = barray[index/8] | 8;\n    break;\ncase 3:\n    barray[index/8] = barray[index/8] | 16;\n    break;\ncase 2:\n    barray[index/8] = barray[index/8] | 32;\n    break;\ncase 1:\n    barray[index/8] = barray[index/8] | 64;\n    break;\ncase 0:\n    barray[index/8] = barray[index/8] | 128;\n    break;\ndefault: cout &lt;&lt; \"Error. Index less than 0. Cannot set the bit.\";\n\n} // end of switch( index )*/\n</code></pre>\n\n<p>So I'm going to a element in a char array, and at that elemnt I am then going through the 8 bits that holds and changing that index.</p>\n\n<p>Here is my attempt at simplifying the switch statement:</p>\n\n<pre><code>int location = index / 8;\nint position = index % 8;\n\nmask = (1 &lt;&lt; position);\nbarray[location] = barray[location] | Mask(index);\n</code></pre>\n\n<p>which doesnt work the way I intend(sets the bit at index 5 to '1' if I pass in 2 as the index to change)</p>\n\n<p>Thanks for any input</p>\n"}, {"tags": ["c++", "boost", "swig"], "answers": [{"comments": [{"owner": {"reputation": 10343, "user_id": 1309332, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2CtHJ.png?s=128&g=1", "display_name": "dbn", "link": "https://stackoverflow.com/users/1309332/dbn"}, "edited": false, "score": 0, "creation_date": 1465943997, "post_id": 30601871, "comment_id": 63110088, "body": "awesome. I just had this same problem today, and I found this question. I haven&#39;t thought of SO as my personal knowledge db, but, there we go."}], "owner": {"reputation": 10343, "user_id": 1309332, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2CtHJ.png?s=128&g=1", "display_name": "dbn", "link": "https://stackoverflow.com/users/1309332/dbn"}, "is_accepted": true, "score": 0, "last_activity_date": 1433263411, "creation_date": 1433263411, "answer_id": 30601871, "question_id": 29660593, "link": "https://stackoverflow.com/questions/29660593/no-type-checking-rule-error-only-when-i-supply-a-type-checking-rule/30601871#30601871", "title": "&quot;No type checking rule&quot; error only when I supply a type checking rule", "body": "<p>I don't understand why, but in this case I needed to supply a precedence for the typecheck:</p>\n\n<pre><code>%shared_ptr(mynamespace::MyClass)\n%typemap(typecheck, precedence=SWIG_TYPECHECK_POINTER) boost::shared_ptr&lt;mynamespace::MyClass&gt; {\n    // always OK, dummy for testing.\n    $1 = SWIG_IsOK(1);\n}\n</code></pre>\n\n<p>For other typechecks, I certainly didn't need to provide a precedence.</p>\n"}], "owner": {"reputation": 10343, "user_id": 1309332, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2CtHJ.png?s=128&g=1", "display_name": "dbn", "link": "https://stackoverflow.com/users/1309332/dbn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 30601871, "answer_count": 1, "score": 0, "last_activity_date": 1433263411, "creation_date": 1429130861, "question_id": 29660593, "link": "https://stackoverflow.com/questions/29660593/no-type-checking-rule-error-only-when-i-supply-a-type-checking-rule", "title": "&quot;No type checking rule&quot; error only when I supply a type checking rule", "body": "<p>I have a class that is predominantly used as a boost::shared_ptr. I'm trying to wrap some overloaded functions, and need to add a type-checking rule in order to make some functionality available from the Python side.</p>\n\n<p>When I tell SWIG that the to use a shared pointer for my class, the SWIG wrappers build and compile fine.</p>\n\n<pre><code>%shared_ptr(mynamespace::MyClass)\n</code></pre>\n\n<p>Once I add a type-checking rule, however, SWIG tells me that no type checking rule is supplied! Here's my SWIG wrapping code:</p>\n\n<pre><code>%shared_ptr(mynamespace::MyClass)\n%typemap(typecheck) boost::shared_ptr&lt;mynamespace::MyClass&gt; {\n    // always OK, dummy for testing.\n    $1 = SWIG_IsOK(1);\n}\n</code></pre>\n\n<p>The error message I get is:</p>\n\n<p>/scr/dbw/bld/include/header.h:509: Warning 467: Overloaded method mynamespace::get_contacts(boost::shared_ptr&lt; mynamespace::MyClass >) not supported (no type checking rule for 'boost::shared_ptr&lt; mynamespace::MyClass >').</p>\n"}, {"tags": ["c++", "c++11", "gcc", "clang", "rvalue-reference"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1429131293, "post_id": 29660549, "comment_id": 47460854, "body": "<code>make_ptr_r</code> returns a reference to a local variable. The variable dies when the function exits, and the reference becomes dangling. Any attempt to actually use this reference exhibits undefined behavior. The fact that this is an rvalue reference doesn&#39;t change anything."}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1429131414, "post_id": 29660549, "comment_id": 47460926, "body": "To add to what @IgorTandetnik said: The return type of <code>make_ptr_r</code> should be <code>PTR</code> without the <code>&amp;&amp;</code>. Check the output of your code and see if it makes sense to you."}, {"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "reply_to_user": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1429132440, "post_id": 29660549, "comment_id": 47461552, "body": "@DanielFrey I did check the output and even mentioned that it doesn&#39;t make so much sense. What I misunderstood was the idea that std::move() with a return type of rvalue-reference should move the object out of local."}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 1, "creation_date": 1429132579, "post_id": 29660549, "comment_id": 47461629, "body": "@inetknght Sorry, no offense intended! I meant the output <i>after</i> you change the return type as I suggested and compare it to you previous output. I hope the difference will help you understand that even without the <code>&amp;&amp;</code> on the return type, your move-ctor and move-assignment will then be correct and help to reduce copy operations."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1429132710, "post_id": 29660549, "comment_id": 47461696, "body": "<code>std::move</code> doesn&#39;t move anything. It&#39;s just a convenient way to cast an object to rvalue reference: <code>std::move(x)</code> is roughly equivalent to <code>static_cast&lt;decltype(x)&amp;&amp;&gt;(x)</code>. Something else (e.g. a move constructor) can now take this reference as a parameter, and move data out of <code>x</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 0, "creation_date": 1429132353, "post_id": 29660760, "comment_id": 47461506, "body": "So the rvalue reference in this case specifically does not <i>move</i> the object as I had understood it would?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 1, "creation_date": 1429133777, "post_id": 29660760, "comment_id": 47462294, "body": "@inetknght <code>std::move()</code> does not <b>move</b>. It is just a cast."}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1429131404, "creation_date": 1429131404, "answer_id": 29660760, "question_id": 29660549, "link": "https://stackoverflow.com/questions/29660549/segmentation-fault-when-specifying-rvalue-as-return-value/29660760#29660760", "title": "Segmentation fault when specifying rvalue as return value", "body": "<p>You're returning a reference to a temporary. You can tell this from your output:</p>\n\n<pre><code>rvalue new: \n    ctor  @0x7ffed71b7a00\n    dtor~~@0x7ffed71b7a00\n    ctor&amp;&amp;@0x7ffed71b7a40   &lt;@0x7ffed71b7a00\n</code></pre>\n\n<p>You construct and destroy <code>7a00</code> <em>before</em> you move construct <code>7a40</code> with it. The fact that you happen to return an rvalue reference rather than an lvalue reference doesn't matter. It's basically still something of the form:</p>\n\n<pre><code>T&amp; foo() {\n    T object;\n    return object;\n}\n</code></pre>\n\n<p>That's why the <code>make_ptr_l</code> works - you're returning a value, not a reference. And the <code>std::move()</code> there isn't necessary.</p>\n"}], "owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 29660760, "answer_count": 1, "score": 1, "last_activity_date": 1429135005, "creation_date": 1429130649, "last_edit_date": 1429135005, "question_id": 29660549, "link": "https://stackoverflow.com/questions/29660549/segmentation-fault-when-specifying-rvalue-as-return-value", "title": "Segmentation fault when specifying rvalue as return value", "body": "<p>I have a factory class which constructs new objects. <strong>The new objects <em>should</em> not be copied but <em>may</em> be moved.</strong> So I figured I would delete the copy constructor and copy assignment operator while providing a move constructor and move assignment operator.</p>\n\n<p>I figured that, to help convey the idea that the object must be <em>moved</em> into place rather than copied, I would return an rvalue reference. However, upon doing this, it seems that the compiler always generates code which destroys the \"expiring\" object being returned and then provides that same (destroyed!) object to the move constructor or move assignment operator.</p>\n\n<p><strong>So I'm wondering; is there something in the standard which I am violating?</strong> If so, is there a warning (error, preferably) I can enable to prevent me from continuing to do something so stupid? Or else, if I'm not violating any standard, then I assume this is a compiler bug?</p>\n\n<pre><code>// g++ (Ubuntu 4.9.2-0ubuntu1~14.04) 4.9.2\n// g++ test.cpp -std=c++11\n\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nstruct PTR {\n    char * blah = nullptr;\n\n    PTR(char* blah) : blah(blah)\n    {\n        std::cout &lt;&lt; \"\\tctor  @\" &lt;&lt; (void*)this &lt;&lt; std::endl;\n    }\n\n    PTR(const PTR &amp; copy_ctor) : blah(new char)\n    {\n        *blah = *copy_ctor.blah;\n        std::cout &lt;&lt; \"\\tcopy @@\" &lt;&lt; (void*)this &lt;&lt; \"\\t&lt;-\" &lt;&lt; (void*)&amp;copy_ctor &lt;&lt; std::endl;\n    }\n\n    PTR(PTR &amp;&amp; move_ctor) : blah(move_ctor.blah)\n    {\n        move_ctor.blah = nullptr;\n        std::cout &lt;&lt; \"\\tctor&amp;&amp;@\" &lt;&lt; (void*)this &lt;&lt; \"\\t&lt;@\" &lt;&lt; (void*)&amp;move_ctor &lt;&lt; std::endl;\n    }\n\n    PTR &amp; operator=(const PTR &amp; copy_assign)\n    { delete blah;\n        blah = new char;\n        *blah = *copy_assign.blah;\n        std::cout &lt;&lt; \"copyas@\" &lt;&lt; (void*)this &lt;&lt; \"\\t&lt;-\" &lt;&lt; (void*)&amp;copy_assign &lt;&lt; std::endl;\n        return *this;\n    }\n\n    PTR &amp; operator=(PTR &amp;&amp; move_assign)\n    {\n        delete blah;\n        blah = move_assign.blah;\n        move_assign.blah = nullptr;\n        std::cout &lt;&lt; \"\\tmove&amp;&amp;@\" &lt;&lt; (void*)this &lt;&lt; \"\\t&lt;@\" &lt;&lt; (void*)&amp;move_assign &lt;&lt; std::endl;\n        return *this;\n    }\n\n    ~PTR()\n    {\n        std::cout &lt;&lt; \"\\tdtor~~@\" &lt;&lt; (void*)this &lt;&lt; std::endl;\n        delete blah;\n    }\n};\n\nPTR make_ptr_l() {\n    PTR ptr(new char());\n    return std::move(ptr); // Without std::move, compiler *may* opt to copy the class, which is undesired\n}\n\nPTR &amp;&amp; make_ptr_r() {\n    PTR ptr(new char());\n    return std::move(ptr); // Requires std::move to turn ptr into rvalue, otherwise compiler error\n}\n\nint main() {\n    std::cout &lt;&lt; \"lvalue: \\n\" &lt;&lt; std::flush;\n    PTR ptr = make_ptr_l();\n    std::cout &lt;&lt; \"successful\\nrvalue new: \\n\" &lt;&lt; std::flush;\n    {\n        PTR ptr_r = make_ptr_r();\n        std::cout &lt;&lt; \"successful\\nrvalue assign: \\n\" &lt;&lt; std::flush;\n    }\n    ptr = make_ptr_r();\n    std::cout &lt;&lt; \"successful\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>With the above code, you can see the following output:</p>\n\n<pre><code>lvalue: \n    ctor  @0x7ffed71b7a00\n    ctor&amp;&amp;@0x7ffed71b7a30   &lt;@0x7ffed71b7a00\n    dtor~~@0x7ffed71b7a00\nsuccessful\nrvalue new: \n    ctor  @0x7ffed71b7a00\n    dtor~~@0x7ffed71b7a00\n    ctor&amp;&amp;@0x7ffed71b7a40   &lt;@0x7ffed71b7a00\nsuccessful\nrvalue assign: \n    dtor~~@0x7ffed71b7a40\n*** Error in `./a.out': double free or corruption (fasttop): 0x0000000001d1bc40 ***\nAborted (core dumped)\n</code></pre>\n\n<p>As you can see after <code>rvalue new</code>, an object is constructed, then immediately destroyed, then the destroyed object is passed to a move constructor. Since the move constructor therefore accesses the destroyed variables, this is the source of segmentation faults.</p>\n\n<p>I have tried this with <code>g++ (Ubuntu 4.9.2-0ubuntu1~14.04) 4.9.2</code> as well as <code>Apple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)</code>.</p>\n"}, {"tags": ["c++", "c++11", "unique-ptr"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1429130641, "post_id": 29660391, "comment_id": 47460498, "body": "Related: <a href=\"http://stackoverflow.com/questions/21355037/why-does-unique-ptr-take-two-template-parameters-when-shared-ptr-only-takes-one\" title=\"why does unique ptr take two template parameters when shared ptr only takes one\">stackoverflow.com/questions/21355037/&hellip;</a>"}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 4, "creation_date": 1429130646, "post_id": 29660391, "comment_id": 47460504, "body": "Template classes don&#39;t infer template parameters. Only template functions do."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 3, "creation_date": 1429130926, "post_id": 29660391, "comment_id": 47460641, "body": "I wonder why <code>std::make_unique</code> doesn&#39;t have an overload in which you can specify the deleter. This way, you can infer the type of the deleter."}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1429130962, "post_id": 29660391, "comment_id": 47460657, "body": "@vsoftco I was looking at the docs just now and wondered the same thing..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 2, "creation_date": 1429130983, "post_id": 29660391, "comment_id": 47460670, "body": "@vsoftco How would that work? It has to take an argument pack to construct the <code>T</code>. How would you differentiate which one of <code>Args...</code> is the <code>Deleter</code>?"}, {"owner": {"reputation": 37223, "user_id": 485561, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/61c769a3a57614e2cff3789076adde3d?s=128&d=identicon&r=PG", "display_name": "Mankarse", "link": "https://stackoverflow.com/users/485561/mankarse"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1429131278, "post_id": 29660391, "comment_id": 47460838, "body": "@Barry: It could be done with a type tag. For example, a &#39;deleter&#39; template class that contained the deleter, or a tag that always preceded the deleter in the argument list. The <code>make_unique</code> would then just have to identify that element and use it to construct the deleter where required."}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1429131456, "post_id": 29660391, "comment_id": 47460952, "body": "@Barry, of course. Should have noticed this.@Mankarse, I think a type tag would make inferring the deleter impossible, turning make_unique into a function too verbose to be actually useful? (instead we should simply use unique_ptr&#39;s constructor) Correct me if I&#39;m wrong, though."}], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1429130977, "post_id": 29660604, "comment_id": 47460667, "body": "that&#39;s exactly what I would&#39;ve done for <code>std::make_unique</code>, don&#39;t see any reason why it&#39;s not implemented like that."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 2, "creation_date": 1429131043, "post_id": 29660604, "comment_id": 47460702, "body": "@vsoftco [copied from above] How would that work? It has to take an argument pack to construct the T. How would you differentiate which one of Args... is the Deleter?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1429131138, "post_id": 29660604, "comment_id": 47460752, "body": "maybe with a <code>std::piecewise_construct</code> / <code>std::forward_as_tuple</code>"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 6, "last_activity_date": 1429131066, "last_edit_date": 1429131066, "creation_date": 1429130882, "answer_id": 29660604, "question_id": 29660391, "link": "https://stackoverflow.com/questions/29660391/why-cant-unique-ptr-infer-the-type-of-the-deleter/29660604#29660604", "title": "Why can&#39;t unique_ptr infer the type of the deleter?", "body": "<p>For <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow\"><code>unique_ptr</code></a>, the deleter is part of the type:</p>\n\n<pre><code>template &lt;\n    class T,\n    class Deleter = std::default_delete&lt;T&gt;\n&gt; class unique_ptr;\n</code></pre>\n\n<p>As such, when you're constructing an object, you need to specify its type. The line you're writing:</p>\n\n<pre><code>std::unique_ptr&lt;int&gt; x(new int, custom_deleter);\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>std::unique_ptr&lt;int, std::default_delete&lt;int&gt; &gt; x(new int, custom_deleter);\n</code></pre>\n\n<p>And you cannot construct a <code>std::default_delete&lt;int&gt;</code> from <code>custom_deleter</code>. </p>\n\n<p>The only way to <em>infer</em> the deleter type is to use template deduction on that part too:</p>\n\n<pre><code>template &lt;typename T, typename Deleter&gt;\nstd::unique_ptr&lt;T, Deleter&gt; make_unique_ptr(T* ptr, Deleter deleter) {\n    return std::unique_ptr&lt;T, Deleter&gt;(ptr, deleter);\n}\n</code></pre>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1429152718, "creation_date": 1429152718, "answer_id": 29664522, "question_id": 29660391, "link": "https://stackoverflow.com/questions/29660391/why-cant-unique-ptr-infer-the-type-of-the-deleter/29664522#29664522", "title": "Why can&#39;t unique_ptr infer the type of the deleter?", "body": "<p>It cannot infer the type of the deleter, because <code>unique_ptr</code> by default has no state devoted to a deleter: the default deleter is stateless.</p>\n\n<p>In your case, the deleter needs a pointer's worth of state, so it cannot 'fit' within the <code>std::unique_ptr</code>'s state (which is just a pointer to a <code>T</code>).</p>\n\n<p>This makes <code>unique_ptr</code> a lightweight, nearly cost-free replacement for an owning pointer.</p>\n\n<p>Deductin could be done, but it would have to change the type of the resulting <code>unique_ptr</code>.</p>\n\n<p>In comparison, <code>shared_ptr</code> always has state capacity for a deleter, two different atomic counters, and a pointer to value.  It is heavier weight, and not a cost-free replacement for a pointer.</p>\n"}], "owner": {"reputation": 1521, "user_id": 1601719, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3204e69368a88bc0fef2a1c85a5b88e1?s=128&d=identicon&r=PG", "display_name": "rubix_addict", "link": "https://stackoverflow.com/users/1601719/rubix-addict"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "answer_count": 2, "score": 11, "last_activity_date": 1429152718, "creation_date": 1429130156, "last_edit_date": 1429131099, "question_id": 29660391, "link": "https://stackoverflow.com/questions/29660391/why-cant-unique-ptr-infer-the-type-of-the-deleter", "title": "Why can&#39;t unique_ptr infer the type of the deleter?", "body": "<p>Let's say I want to use a custom deleter with an unique_ptr:</p>\n\n<pre><code>void custom_deleter(int* obj)\n{\n    delete obj; \n}\n</code></pre>\n\n<p>Why do I have to write this:</p>\n\n<pre><code>std::unique_ptr&lt;int, void(*)(int*)&gt; x(new int, custom_deleter);\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>std::unique_ptr&lt;int&gt; x(new int, custom_deleter); //does not compile\n</code></pre>\n\n<p>?</p>\n\n<p>Can't the type of the deleter be inferred?</p>\n"}, {"tags": ["c++", "processing", "sdl-2"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1429132575, "post_id": 29660066, "comment_id": 47461626, "body": "is there a reason you can&#39;t just use this same approach, determining the pixel colour based on the pheromone percentage, and coloring your pixels in SDL2 with the appropriate alpha value every iteration?"}, {"owner": {"reputation": 127, "user_id": 4586011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c181e055483b63b9bee59675536a07c?s=128&d=identicon&r=PG", "display_name": "transistor", "link": "https://stackoverflow.com/users/4586011/transistor"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1429155681, "post_id": 29660066, "comment_id": 47469060, "body": "I don&#39;t know how to do that actually. I am new to SDL2 and know blitting and handling events only. Can you please describe the method you are talking about in detail in an answer?"}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1429156385, "post_id": 29660066, "comment_id": 47469237, "body": "in order to get that kind of answer, you&#39;ll want to add your SDL2 code to the question, too, so people can see what you already have and what would be the best pointers to achieving what you want."}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1429159050, "post_id": 29660066, "comment_id": 47469933, "body": "looking at <a href=\"http://stackoverflow.com/questions/20579658/pixel-drawing-in-sdl2-0\" title=\"pixel drawing in sdl2 0\">stackoverflow.com/questions/20579658/pixel-drawing-in-sdl2-0</a>&zwnj;&#8203;, it sounds like <a href=\"https://wiki.libsdl.org/SDL_RenderDrawPoint\" rel=\"nofollow noreferrer\">SDL_renderDrawPoint</a> might be a way to colour individual pixels before sending them off to the GPU. Not sure about <i>setting</i> the colouring though"}], "answers": [{"owner": {"reputation": 1153, "user_id": 3496135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de2debb79517c3c97de136c4cac1d350?s=128&d=identicon&r=PG&f=1", "display_name": "kdyz", "link": "https://stackoverflow.com/users/3496135/kdyz"}, "is_accepted": true, "score": 0, "last_activity_date": 1429522495, "last_edit_date": 1592644375, "creation_date": 1429522495, "answer_id": 29744145, "question_id": 29660066, "link": "https://stackoverflow.com/questions/29660066/leaving-a-trail-on-screen-using-sdl2-c/29744145#29744145", "title": "Leaving a trail on screen using SDL2/C++", "body": "<p>I'm not really sure but in terms of textures, let me make an example.</p>\n<p>You wanted an image on the screen lighten and disappear over time so-</p>\n<blockquote>\n<p>SDL_Texture* image = IMG_LoadTexture(putRendererHere, FilePath.c_str());</p>\n</blockquote>\n<p>FilePath.c_str() should be replaced by the address of your file\nexample : &quot;Resources/Intro/15.png&quot;</p>\n<blockquote>\n<p>SDL_Rect rect;</p>\n<p>rect.x = x;    //x coordinate</p>\n<p>rect.y = y;    //y coordinate</p>\n<p>rect.w = w;    //width</p>\n<p>rect.h = h;    //height</p>\n</blockquote>\n<p>The rect is responsible for handling the position and size of the image.</p>\n<p>The next part would be the one responsible for your &quot;Fade-out&quot; effects.</p>\n<blockquote>\n<p>int elapsedTime = xx; //xx should be your in-game time. You can use SDL_GetTicks()</p>\n<p>int alpha1 = 250; //In alpha terms, 250 is Opaque while 0 is invisible</p>\n<p>int alpha2 = 250;</p>\n<p>SDL_SetTextureBlendMode(texture, SDL_BLENDMODE_BLEND);//This sets the texture in blendmode</p>\n<p>if (alpha1 &gt; 0) { //This checks if the image is not yet invisible</p>\n<pre><code>  alpha2 -= xf * elapsedTime; // change x into any float\n\nalpha1 = alpha2; //so alpha1 starts to slowly decrease. (Fading Out)\n</code></pre>\n<p>}</p>\n<blockquote>\n<p>if (alpha1 &lt;= 0) { //This code will repeat in the while loop above, once it hits 0 or below 0 then all looping stops and this loop sets the image to a state where it can't be seen.</p>\n</blockquote>\n<pre><code>  alpha1 = 0;\n\n  alpha2 = 0;\n</code></pre>\n<p>}</p>\n<p>SDL_SetTextureAlphaMod(texture, alpha);</p>\n<p>SDL_RenderCopy(renderer, texture, NULL, &amp;rect);</p>\n</blockquote>\n<p>Those are the basics, but since you're making 'trails' then I'm assuming that you'd be making millions of these, you should make a function responsible for creating the image, drawing, and changing the alpha of the texture.</p>\n<p>After that, you should be able to replicate these with just a line.</p>\n<p>In the last if statement, you can tweak the contents to make the program forget about the image, thus, releasing all the memory it took to generate the images.</p>\n<p>Happy Coding :)</p>\n<p>//I can't to open your link so I'm not sure if this was what you accurately needed but as a tip-</p>\n<ul>\n<li><p>Create a an int that handles the general time in you game</p>\n</li>\n<li><p>Create a bunch of other int that handles the time per footprint and once it's done, it could handle another footprint.</p>\n</li>\n<li><p>Do some Math with the above int(s) and you should get footprint-like results.</p>\n</li>\n</ul>\n"}], "owner": {"reputation": 127, "user_id": 4586011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c181e055483b63b9bee59675536a07c?s=128&d=identicon&r=PG", "display_name": "transistor", "link": "https://stackoverflow.com/users/4586011/transistor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 29744145, "answer_count": 1, "score": 1, "last_activity_date": 1429522495, "creation_date": 1429129045, "last_edit_date": 1429179228, "question_id": 29660066, "link": "https://stackoverflow.com/questions/29660066/leaving-a-trail-on-screen-using-sdl2-c", "title": "Leaving a trail on screen using SDL2/C++", "body": "<p>I am making an ant simulation program using SDL2 and C++ using <a href=\"http://www.openprocessing.org/sketch/15109\" rel=\"nofollow\">http://www.openprocessing.org/sketch/15109</a>  as  my reference.The link is a Processing sketch.</p>\n\n<p>I have figured out how to do everything in C++/SDL2 except the part where the ants leave trails on the screen which evaporate over time. Now the trails are integral to the algorithm itself but at the same time having them on the screen increases the beauty of the program :D. I managed to get the algorithm part working. Now I just need to see the trails.</p>\n\n<p>The relevant code (in Processing) is:</p>\n\n<pre><code>void draw() {\n\n  loadPixels();\n  for (int i=0; i&lt;pherHome.length; i++) {\n    color pixelColor;\n    if (food.getValue(i)) {\n      // Draw food\n      pixelColor = FOOD_COLOR;\n    } \n    else {\n      // Draw pheromones\n\n      float pixelAlpha = pherHome.getPercentage(i);\n      int pixel_r = int(HOME_R * pixelAlpha + DIRT_R * (1-pixelAlpha));\n      int pixel_g = int(HOME_G * pixelAlpha + DIRT_G * (1-pixelAlpha));\n      int pixel_b = int(HOME_B * pixelAlpha + DIRT_B * (1-pixelAlpha));\n\n      pixelAlpha = pherFood.getPercentage(i);\n      pixel_r = int(FOOD_R * pixelAlpha + pixel_r * (1-pixelAlpha));\n      pixel_g = int(FOOD_G * pixelAlpha + pixel_g * (1-pixelAlpha));\n      pixel_b = int(FOOD_B * pixelAlpha + pixel_b * (1-pixelAlpha));\n\n      // Using bitwise color math instead of color() on the following line\n      // upped the framerate from 43 to 58 on my computer\n      //pixelColor = color(pixel_r, pixel_g, pixel_b);\n      pixelColor = pixel_r &lt;&lt; 16 | pixel_g &lt;&lt; 8 | pixel_b;\n    }\n    // Set\n    pixels[i] = pixelColor;\n  }\n  updatePixels();\n\n  // Draw ants and do other stuff}\n</code></pre>\n\n<p>Please suggest some way in which I can achieve the same effect. </p>\n\n<p>My SDL2 code :</p>\n\n<pre><code>/* draw loop**********************************************************************************************************************************/\n\nbool quit = false;\n\nwhile (!quit)\n\n{   \n    SDL_Event e;\n\n    while ( SDL_PollEvent(&amp;e) != 0)\n    {\n        if (e.type == SDL_QUIT)\n        {\n            quit = true;\n        }\n    }\n    int mousex,mousey;\n    SDL_GetMouseState(&amp;mousex,&amp;mousey);\n    if ( e.type == SDL_MOUSEBUTTONDOWN )\n    {\n        food.addFood(mousex,mousey);\n    }\n\n    SDL_BlitSurface (background, NULL, gsurface, NULL);\n    // displaying food\n    for(int i =0 ; i &lt; width; i ++)\n    {\n        for(int j = 0; j &lt; height ; j++)\n        {\n            if (food.getValue(i,j))\n            {\n                SDL_Rect pos;\n                pos.x = i;\n                pos.y = j;\n\n                SDL_BlitSurface (food_source_image, NULL, gsurface, &amp;pos);\n            }\n        }\n    }\n\n\n\n    for (int i = 0; i &lt; col.ants.size(); i++) \n    {\n      col.ants[i].step();\n      int thisXi = col.ants[i].intX;// position in int\n      int thisYi = col.ants[i].intY;\n\n      float thisXf = col.ants[i].x;// position in float\n      float thisYf = col.ants[i].y;\n\n      if (col.ants[i].hasFood) \n      {\n        if (thisXi&gt;col.x-10 &amp;&amp; thisXi&lt;col.x+10 &amp;&amp; thisYi&gt;col.y-10 &amp;&amp; thisYi&lt;col.y+10) \n        {\n          // Close enough to home\n          cout &lt;&lt; \"dropped\" &lt;&lt; endl;\n          col.ants[i].hasFood = false;\n          col.ants[i].homePher = 100;\n        }\n      }\n      else if(food.getValue(thisXi, thisYi)) \n      {\n        cout &lt;&lt; \"found \" &lt;&lt; endl;\n        col.ants[i].hasFood = true;\n        col.ants[i].foodPher = 100;\n        food.bite(thisXi, thisYi);\n      }\n\n      SDL_Rect pos; pos.x = thisXi; pos.y = thisYi;\n      SDL_BlitSurface (human_image, NULL, gsurface, &amp;pos);\n\n    }\n\n    // Evaporate\n    pherHome.step();\n    pherFood.step();\n\n    SDL_UpdateWindowSurface(gwindow);\n    SDL_Delay(1);\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "vector"], "comments": [{"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "edited": false, "score": 0, "creation_date": 1429129898, "post_id": 29660065, "comment_id": 47460078, "body": "That is not the issue in <i>this</i> code because a thread is <code>joined</code> before the next one is constructed. So this runs nicely sequentially. Without the <code>t2.join()</code> you are right and this code would crash &amp; burn ...."}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "reply_to_user": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "edited": false, "score": 0, "creation_date": 1429129973, "post_id": 29660065, "comment_id": 47460117, "body": "@haavee ahh yes indeed, I must have glossed over that. Might be good to make a mention to him about it though, since he&#39;s probably done this by accident and actually in effect is not really doing any true parallelism at all."}, {"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429130191, "post_id": 29660065, "comment_id": 47460246, "body": "yes please tell me how to make it run parallel !"}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "edited": false, "score": 1, "creation_date": 1429130406, "post_id": 29660065, "comment_id": 47460372, "body": "@AmirHosseinF, haavee is explaining in his answer. You&#39;re going to incur overhead in locking access to the container. If it were me, I&#39;d call resize() on the vector to ensure I can legally access it using the subscript operator [] and then use an INT associated with the thread as an index for where to start writing so you can have your program run lock-free. Then you&#39;re really going to see a performance boost."}, {"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "edited": false, "score": 0, "creation_date": 1429130776, "post_id": 29660065, "comment_id": 47460566, "body": "@TechnikEmpire Is that <i>really</i> thread-safe, though? The C++ standard doesn&#39;t guarantee that the non-const version of <code>operator[]</code> won&#39;t modify something that we don&#39;t realize is there. It&#39;d be stupid, but it&#39;s possible."}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "reply_to_user": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "edited": false, "score": 0, "creation_date": 1429131126, "post_id": 29660065, "comment_id": 47460746, "body": "@kirbyfan64sos As far as I understand, threaded write to a single object within a container is safe, as long as you&#39;re ensuring you&#39;re not hammering the same memory with two threads by accident at the same time. I&#39;m totally open to being wrong though. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "reply_to_user": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "edited": false, "score": 0, "creation_date": 1429133832, "post_id": 29660065, "comment_id": 47462327, "body": "@kirbyfan64sos you could be completely right by the way, there could be some kind of container somewhere that does a non-thread-safe operation on subscript operator access. I think in the case of standard containers, we&#39;re okay though."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "edited": false, "score": 0, "creation_date": 1429129913, "post_id": 29660272, "comment_id": 47460084, "body": "You should probably also mention that the container he&#39;s writing on is not safe in a threaded context."}, {"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429130441, "post_id": 29660272, "comment_id": 47460393, "body": "I would appreciate if you could help make this code run in parallel :)"}, {"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429131305, "post_id": 29660272, "comment_id": 47460863, "body": "@haavee Thanks for the help. so there is no <code>tN.join()</code> needed ? does it ensure all threads complete before the main thread and before the line <code>cout &lt;&lt; cluster.size() &lt;&lt; endl;</code> in the main thread ?"}, {"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "edited": false, "score": 0, "creation_date": 1429131414, "post_id": 29660272, "comment_id": 47460927, "body": "you should do the <code>.join()</code> before the <code>cout &lt;&lt; cluster.size() &lt;&lt; endl;</code> line indeed - you want to wait for all threads to finish before displaying the total size. Also I imagine that this will be <i>slower</i> than just <code>for(unsigned i=0; i&lt;1000; i++) &#47;&#47;do stuff</code>"}, {"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429132007, "post_id": 29660272, "comment_id": 47461285, "body": "@haavee I belive so.It is a foundation of a bigger project for which I hope the concurrency work ! Thank you for so much help man. I learned a lot and I&#39;m revising my code based on your remarks ..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "reply_to_user": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429134034, "post_id": 29660272, "comment_id": 47462420, "body": "@AmirHosseinF Don&#39;t forget to upvote his answer and, if it was the most helpful answer to you (which it seems to be), mark it as the correct answer. :)"}, {"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429185150, "post_id": 29660272, "comment_id": 47485399, "body": "@haavee : I revised my code but the compiler complains, could you help me ?"}, {"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "edited": false, "score": 0, "creation_date": 1429185557, "post_id": 29660272, "comment_id": 47485707, "body": "The compiler complains about what? const?"}], "owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "is_accepted": false, "score": 4, "last_activity_date": 1429130693, "last_edit_date": 1429130693, "creation_date": 1429129816, "answer_id": 29660272, "question_id": 29660065, "link": "https://stackoverflow.com/questions/29660065/how-to-manipulate-a-vector-using-threads-in-a-class/29660272#29660272", "title": "How to manipulate a vector using threads in a class?", "body": "<p>When you start the thread like this:</p>\n\n<pre><code>thread t2(&amp;CLASS::thread2, CLASS(), &amp;cluster);\n</code></pre>\n\n<p>you pass a reference to a newly constructed CLASS object (<code>CLASS()</code>), with it's own member <code>cluster</code>. So the threads will push back on a temporary object.</p>\n\n<p>Only the final - your <code>main</code> thread as it's called, is operating on the <code>cluster</code> member of the instance on which the member function is called.</p>\n\n<p>Probably you want to create the thread like this:</p>\n\n<pre><code>thread t2(&amp;CLASS::thread2, *this, &amp;cluster);\n</code></pre>\n\n<p>because then it refers to the <code>cluster</code> member of the <code>this</code> object.</p>\n\n<p><strong>NOTE</strong> \nYour code is inherently <strong>very</strong> thread unsafe. The only reason your code currently works is because of the <code>.join()</code> you do before creating the next thread, effectively serializing your code.</p>\n\n<p>As soon as those threads will run in parallel, your code will explode. Segfault, hang, crash &amp; burn. The shared <code>vector&lt;int&gt;</code>, that all threads intend to modify, needs to be protected by a <code>mutex</code>.</p>\n\n<p>In which case you effectively serialize access to the shared variable, rendering the use of threads, in this case, useless and complicates the code to no end.</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>class CLASS\n{\n    protected:\n    std::vector&lt;int&gt; cluster;\n    std::mutex       mtx;   // &lt;-- add this\n...\n};\n</code></pre>\n\n<p>Then start the threads like so:</p>\n\n<pre><code>thread t2(&amp;CLASS::thread2, *this);\n</code></pre>\n\n<p>And change the <code>threadN</code> member functions to:</p>\n\n<pre><code>void CLASS::thread2( void ) {\n     mtx.lock();\n     // ... do things with `cluster`\n     mtx.unlock();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429130948, "post_id": 29660447, "comment_id": 47460647, "body": "so there should be no <code>t*.join()</code> whatsoever ? does it ensure all threads complete before the main thread ?"}, {"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "reply_to_user": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429131412, "post_id": 29660447, "comment_id": 47460925, "body": "@AmirHosseinF <code>join</code> is a function that forces the caller (in this case, the main thread) to wait for the other thread to finish. Calling <code>t2.join()</code> will wait for <code>t2</code> to finish, <code>t3.join()</code> will wait for <code>t3</code>, etc. This defeats the parallelism."}, {"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429131535, "post_id": 29660447, "comment_id": 47461009, "body": "In this case I should add <code>t2.join(); t3.join(); t4.join();</code> before the line <code>cout &lt;&lt; cluster.size() &lt;&lt; endl;</code> for the code to ensure all the threads are finished before printing the size. this way I have not damaged any parallelism ... right ?"}, {"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "reply_to_user": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429131783, "post_id": 29660447, "comment_id": 47461156, "body": "@AmirHosseinF Exactly! You&#39;re getting it! See <a href=\"http://www.bogotobogo.com/cplusplus/multithreaded4_cplusplus11.php\" rel=\"nofollow noreferrer\">this link</a> for a good tutorial on threads."}, {"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429132066, "post_id": 29660447, "comment_id": 47461323, "body": "cool man. Appreciate all the help, I&#39;m revising my code based on your remarks."}, {"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "reply_to_user": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 1, "creation_date": 1429196705, "post_id": 29660447, "comment_id": 47494769, "body": "@AmirHosseinF See my last point that I just put. Also, please don&#39;t put your new code as an answer. Edit your original question instead."}], "owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "is_accepted": true, "score": 2, "last_activity_date": 1431013620, "last_edit_date": 1431013620, "creation_date": 1429130324, "answer_id": 29660447, "question_id": 29660065, "link": "https://stackoverflow.com/questions/29660065/how-to-manipulate-a-vector-using-threads-in-a-class/29660447#29660447", "title": "How to manipulate a vector using threads in a class?", "body": "<p>Ok, here are some things:</p>\n\n<ol>\n<li><p>I noticed this:</p>\n\n<pre><code>for (unsigned n = 0; n &lt; 1000/4; ++n)\n</code></pre>\n\n<p>You shouldn't use <code>unsigned</code> unless you're <em>sure</em> it's necessary. Otherwise, just use a normal <code>int</code>.</p></li>\n<li><p>This:</p>\n\n<pre><code>(*cluster).push_back(-1);\n</code></pre>\n\n<p>is the same thing as:</p>\n\n<pre><code>cluster-&gt;push_back(-1);\n</code></pre></li>\n<li><p>You're using C++11, so you might as well use a <code>unique_ptr</code> to hold <code>CLASS</code>:</p>\n\n<pre><code>std::unique_ptr&lt;CLASS&gt; classObject = new CLASS();\n</code></pre></li>\n<li><p>All-caps class names are generally discouraged; that convention is primarily used with macros.</p></li>\n<li><p><strong>You are appending to cluster from multiple different threads and therefore may cause a data race.</strong> You should manage access to the vector from the threads via a mutex:</p>\n\n<pre><code>// in your header file\nstd::vector&lt;int&gt; cluster;\nstd::mutex cluster_mutex;\n\n// in your thread* functions\ncluster_mutex.lock();\ncluster-&gt;push_back(-1);\ncluster_mutex.unlock();\n</code></pre></li>\n<li><p>Why are you doing this:</p>\n\n<pre><code>thread t2(&amp;CLASS::thread2, CLASS(), &amp;cluster);\nt2.join();\n</code></pre>\n\n<p>There are a few problems here:</p>\n\n<ol>\n<li>You're giving the thread function a copy of the current class.</li>\n<li>You're passing it a member...that...could normally be accessed more simply...</li>\n<li>You're joining the thread right after it's created. <code>joining</code> waits for the thread to complete. This kind of kills the whole point of threading: concurrency.</li>\n</ol>\n\n<p>Here's a better version:</p>\n\n<pre><code>thread t2(&amp;CLASS::thread2, *this);\n</code></pre>\n\n<p>Remove the <code>std::vector&lt;int&gt;*</code> argument from your <code>thread*</code> functions and remove the explicit dereferencing of <code>cluster</code>:</p>\n\n<pre><code> cluster.push_back(-1);\n</code></pre></li>\n<li><p>Define an explicit constructor and copy constructor:</p>\n\n<pre><code>myCLASS() {}\nmyCLASS(myCLASS&amp; rhs): cluster(rhs.cluster) {}\n</code></pre></li>\n</ol>\n\n<p>Also, when I said \"try not to use all-caps,\" I meant something more like renaming <code>CLASS</code> to maybe <code>Class</code> or <code>class</code>, not <code>myCLASS</code>. Still looks really weird. Of course, at this point its more of a personal taste...but still.</p>\n"}, {"comments": [{"owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429133168, "post_id": 29661137, "comment_id": 47461959, "body": "awesome, gonna review this :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "reply_to_user": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429133759, "post_id": 29661137, "comment_id": 47462289, "body": "@AmirHosseinF Don&#39;t forget to upvote and downvote questions that find helpful or unhelpful. Also don&#39;t forget to mark one of the other answers as the correct/best answer for you when you&#39;re done. Welcome to StackOverflow. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "reply_to_user": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "edited": false, "score": 0, "creation_date": 1429134877, "post_id": 29661137, "comment_id": 47462812, "body": "As a side note, my code is heavily relying on the number of cores in the machine and the number of elements in the vector being even numbers. Without that, we&#39;d end up with a screwy program here because we&#39;d get non-whole numbers when doing things like dividing and multiplying to get the count, position etc within the array. But you get the general idea."}], "owner": {"user_type": "does_not_exist", "display_name": "user562566"}, "is_accepted": false, "score": 1, "last_activity_date": 1429132828, "creation_date": 1429132828, "answer_id": 29661137, "question_id": 29660065, "link": "https://stackoverflow.com/questions/29660065/how-to-manipulate-a-vector-using-threads-in-a-class/29661137#29661137", "title": "How to manipulate a vector using threads in a class?", "body": "<p>Just to compliment the other great answers, I decided to put together a quick example of writing to a vector from multiple threads without a locking mechanism. Uses C++11 features, which is okay because you are too. :)</p>\n\n<pre><code>//============================================================================\n// Name        : HelloThreadedVector.cpp\n// Author      : Jesse Nicholson\n//============================================================================\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\nvoid fillThreaded(std::vector&lt;std::string&gt;&amp; vec, int startIndex, int count)\n{\n    int threadNumber = 0;\n\n    if (startIndex == 0)\n    {\n        threadNumber = 0;\n    }\n    else\n    {\n        threadNumber = startIndex / count;\n    }\n\n    for (int i = startIndex; i &lt; startIndex + count; ++i)\n    {\n        vec[i] = std::move(std::string(\"Filled by thread: \" + std::to_string(threadNumber)));\n    }\n}\n\nint main()\n{\n\n    // Get the total number of logical cores supported by the machine\n    size_t totalLogicalCores = std::thread::hardware_concurrency();\n\n    //Create the vector we're going to fill\n    std::vector&lt;std::string&gt; stringsFromThreads;\n\n    //Call resize to ensure we can access the vector at indices 0-999 using subscript operator []\n    stringsFromThreads.resize(1000);\n\n    size_t i = 0;\n\n    //Get how many writes each thread will have to perform for all total threads to fill the vector\n    size_t totalWritesPerThread = stringsFromThreads.size() / totalLogicalCores;\n\n    //Create a vector of thread objects so we can easily store all the thread we're making\n    std::vector&lt;std::thread&gt; runningThreads;\n\n    //Because I abuse std::move(). Not really necessary, could have just pushed_back\n    runningThreads.resize(totalLogicalCores);\n\n    //Spawn each thread, pass the vector by reference, pass the start index and the total count of writes the thread is to perform\n    for (i = 0; i &lt; totalLogicalCores; ++i)\n    {\n        runningThreads[i] = std::move(std::thread(&amp;fillThreaded, std::ref(stringsFromThreads), totalWritesPerThread * i, totalWritesPerThread));\n    }\n\n    //Join all of our threads\n    for(i = 0; i &lt; totalLogicalCores; ++i)\n    {\n        runningThreads[i].join();\n    }\n\n    runningThreads.clear();\n\n    //Viola!\n    for (auto s : stringsFromThreads)\n    {\n        std::cout &lt;&lt; s &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 0, "accepted_answer_id": 29660447, "answer_count": 3, "score": 1, "last_activity_date": 1431013620, "creation_date": 1429129042, "last_edit_date": 1429197790, "question_id": 29660065, "link": "https://stackoverflow.com/questions/29660065/how-to-manipulate-a-vector-using-threads-in-a-class", "title": "How to manipulate a vector using threads in a class?", "body": "<p>I intend to manipulate a vector using threads inside a class.cpp source code not the main.cpp source code via a class member function.</p>\n\n<p>my main.cpp is:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdlib.h&gt;\n#include &lt;vector&gt;\n#include \"class.h\"\n\nusing namespace std;\nint main()\n{\n    CLASS* classObject = new CLASS();\n    classObject-&gt;classMemberFucntion(... some arguments....);\n    return 0;\n}\n</code></pre>\n\n<p>class.h is:</p>\n\n<pre><code>#include &lt;vector&gt;\n\n#ifndef SLIC_H\n#define SLIC_H\n\nclass CLASS\n{\n    protected:\n    std::vector&lt;int&gt; cluster;\n\n    public:\n\n    void classMemberFunction(... some arguemnts ... );\n\n    //creating threads function\n    void thread2(std::vector&lt;int&gt; *cluster);\n    void thread3(std::vector&lt;int&gt; *cluster);\n    void thread4(std::vector&lt;int&gt; *cluster);\n};\n#endif\n</code></pre>\n\n<p>and the class.cpp is:</p>\n\n<pre><code>#include \"class.h\"\n#include &lt;vector&gt;\n#include &lt;thread&gt;\nusing namespace std;\n\nvoid CLASS::classMemberFunction(... some arguments ...)\n{\n    thread t2(&amp;CLASS::thread2, CLASS(), &amp;cluster);\n    t2.join();\n    thread t3(&amp;CLASS::thread3, CLASS(), &amp;cluster);\n    t3.join();\n    thread t4(&amp;CLASS::thread4, CLASS(), &amp;cluster);\n    t4.join();\n\n    //main thread===================================================\n    for (unsigned n = 0; n &lt; 1000/4; ++n)\n            {\n                cluster.push_back(-1);\n            }\n    cout &lt;&lt; cluster.size() &lt;&lt; endl;\n}\n\nvoid CLASS::thread2(std::vector&lt;int&gt; *cluster)\n{\n    for (unsigned n = 0; n &lt; 1000 / 4; ++n)\n    {\n        (*cluster).push_back(-1);\n    }\n}\n\nvoid CLASS::thread3(std::vector&lt;int&gt; *cluster)\n{\n    for (unsigned n = 0; n &lt; 1000 / 4; ++n)\n    {\n        (*cluster).push_back(-1);\n    }\n}\n\nvoid CLASS::thread4(std::vector&lt;int&gt; *cluster)\n{\n    for (unsigned n = 0; n &lt; 1000 / 4; ++n)\n    {\n        (*cluster).push_back(-1);\n    }\n}\n</code></pre>\n\n<p>as it is seen, I intend to start three threads inside a member function (the member function acting as a main thread and having a total of four threads)  and initialize a vector. I expect the program to print a size of 1000 when calling <code>cout &lt;&lt; cluster.size() &lt;&lt; endl;</code> but every time the program prints a size of 250 ! I'm new to threading and I have no idea if I'm using the right syntax. So let me know what I'm doing wrong.</p>\n\n<p><strong>UPDATE:</strong><br>\nso I revised my code like this:</p>\n\n<pre><code>//main.cpp\n#include \"stdafx.h\"\n#include &lt;stdlib.h&gt;\n#include &lt;vector&gt;\n#include \"class.h\"\n\nusing namespace std;\nint main()\n{\n    myCLASS* classObject = new myCLASS();\n    classObject-&gt;classMemberFunction();\n    return 0;\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>//class.h\n#include \"stdafx.h\"\n#include &lt;vector&gt;\n#include &lt;mutex&gt;\n\n#ifndef SLIC_H\n#define SLIC_H\n\nclass myCLASS\n{\nprotected:\n    std::vector&lt;int&gt; cluster;\n    std::mutex cluster_mutex;\n\npublic:\n\n    void classMemberFunction();\n    //creating threads function\n    void thread2();\n    void thread3();\n    void thread4();\n};\n#endif\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>//class.cpp\n#include \"stdafx.h\"\n#include \"class.h\"\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\nusing namespace std;\n\nvoid myCLASS::classMemberFunction(void)\n{\n    thread t2(&amp;myCLASS::thread2, *this);\n    thread t3(&amp;myCLASS::thread3, *this);\n    thread t4(&amp;myCLASS::thread4, *this);\n\n    //main thread===================================================\n    for (int n = 0; n &lt; 1000 / 4; ++n)\n    {\n        cluster.push_back(-1);\n    }\n    t2.join();\n    t3.join();\n    t4.join();\n    cout &lt;&lt; cluster.size() &lt;&lt; endl;\n}\n\nvoid myCLASS::thread2()\n{\n    cluster_mutex.lock();\n    for (int n = 0; n &lt; 1000 / 4; ++n)\n    {\n        cluster.push_back(-1);\n    }\n    cluster_mutex.unlock();\n}\n\nvoid myCLASS::thread3()\n{\n    cluster_mutex.lock();\n    for (int n = 0; n &lt; 1000 / 4; ++n)\n    {\n        cluster.push_back(-1);\n    }\n    cluster_mutex.unlock();\n}\n\nvoid myCLASS::thread4()\n{\n    cluster_mutex.lock();\n    for (int n = 0; n &lt; 1000 / 4; ++n)\n    {\n        cluster.push_back(-1);\n    }\n    cluster_mutex.unlock();\n}\n</code></pre>\n\n<p>when I run the code in Visual Studio 2013, I get the following:</p>\n\n<pre><code>1&gt;------ Build started: Project: threadTEST, Configuration: Release Win32 ------\n1&gt;  class.cpp\n1&gt;D:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\include\\xlocnum(155): error C2280: 'std::mutex::mutex(const std::mutex &amp;)' : attempting to reference a deleted function\n1&gt;          D:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\include\\mutex(113) : see declaration of 'std::mutex::mutex'\n1&gt;          This diagnostic occurred in the compiler generated function 'myCLASS::myCLASS(const myCLASS &amp;)'\n1&gt;  threadTEST.cpp\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I think there is something wrong with the default copy constructor !</p>\n"}, {"tags": ["c#", "c++", "dll", "mfc", "code-injection"], "answers": [{"comments": [{"owner": {"reputation": 2705, "user_id": 1370984, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wc7yM.jpg?s=128&g=1", "display_name": "SILENT", "link": "https://stackoverflow.com/users/1370984/silent"}, "edited": false, "score": 0, "creation_date": 1429131534, "post_id": 29660650, "comment_id": 47461008, "body": "I already know how to inject a C# dll into a MFC app. How would I call any MFC GUI properties from within the app? In a .Net app, I would call via Applications.OpenForm or Applications.Current.Windows. I have no clue about c++."}, {"owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1429144283, "post_id": 29660650, "comment_id": 47466064, "body": "Could you give some examples of what do you mean by &quot;GUI Properties&#39;. MFC is built around Win32 API. This operates on parameters that take HWND, a window handle. For example, to set the text of a static control, you would call the SerWindowText API or PostMessage(hand, WM_TEXT, ...)."}, {"owner": {"reputation": 2705, "user_id": 1370984, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wc7yM.jpg?s=128&g=1", "display_name": "SILENT", "link": "https://stackoverflow.com/users/1370984/silent"}, "reply_to_user": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "edited": false, "score": 0, "creation_date": 1429307992, "post_id": 29660650, "comment_id": 47555799, "body": "@DavidChing In C#, GUI properties like Textbox.Text. When I first learned C++, they never taught GUI anything, just console. Is there a static handle that I can poll with my injected DLL?"}], "owner": {"reputation": 2180, "user_id": 3263867, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/378IE.jpg?s=128&g=1", "display_name": "Xela", "link": "https://stackoverflow.com/users/3263867/xela"}, "is_accepted": false, "score": 0, "last_activity_date": 1429131049, "creation_date": 1429131049, "answer_id": 29660650, "question_id": 29660057, "link": "https://stackoverflow.com/questions/29660057/code-injection-to-set-and-extract-data-from-mfc-application/29660650#29660650", "title": "Code Injection to set and extract data from MFC Application", "body": "<p>Sounds like a strange class project but yes you can injection your own dlls into other process's using winapi from c# using pinvoke. </p>\n\n<p>The main methods you would use to dll inject are OpenProcess, WriteProcessMemory, CreateRemoteThreadEx, VirtualAllocEx, GetProcAddress.</p>\n\n<p>PInvoke them like below:</p>\n\n<pre><code>[DllImport(\"kernel32.dll\")]\npublic static extern IntPtr OpenProcess(int dwDesiredAccess, bool bInheritHandle, int dwProcessId);\n</code></pre>\n\n<p>See <a href=\"http://www.codingvision.net/miscellaneous/c-inject-a-dll-into-a-process-w--createremotethread\" rel=\"nofollow\">How to inject a dll into a remote process c#</a></p>\n\n<p>See <a href=\"http://web.archive.org/web/20101224064236/http://codingthewheel.com/archives/how-to-inject-a-managed-assembly-dll\" rel=\"nofollow\">How to inject a managed assembly DLL</a></p>\n"}], "owner": {"reputation": 2705, "user_id": 1370984, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wc7yM.jpg?s=128&g=1", "display_name": "SILENT", "link": "https://stackoverflow.com/users/1370984/silent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429285261, "creation_date": 1429129007, "last_edit_date": 1495534210, "question_id": 29660057, "link": "https://stackoverflow.com/questions/29660057/code-injection-to-set-and-extract-data-from-mfc-application", "title": "Code Injection to set and extract data from MFC Application", "body": "<p>For my class project, I have to inject code into a simple randomly assigned app with a couple buttons and labels. After some research, I was able to identify the app as a C++ MFC app (still not 100% sure). </p>\n\n<p>I was taught how to inject a C# dll into a .Net app to get and set data. However, I don't know if its applicable for a MFC app. I was able to inject a C# dll into the MFC app and even launch a messagebox. I don't know C++ well enough to get/set data.</p>\n\n<p>Can I get/set data within a C++ MFC app using C# or do I have inject C++ dll into the MFC app and somehow use it to get/set couple buttons &amp; labels?</p>\n\n<hr>\n\n<p>Update 1: I realize I may be incorrect on my C++ assumptions. Please refer to this <a href=\"https://stackoverflow.com/questions/29703669/exe-programming-language-identity\">link</a>.</p>\n"}, {"tags": ["c++", "for-loop", "counter", "reset"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 4776414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff42db88649eeb2eabacc725ac628e7c?s=128&d=identicon&r=PG&f=1", "display_name": "StefanW", "link": "https://stackoverflow.com/users/4776414/stefanw"}, "edited": false, "score": 0, "creation_date": 1429129064, "post_id": 29660058, "comment_id": 47459608, "body": "or better, use counter as a local variable"}], "owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "is_accepted": false, "score": 2, "last_activity_date": 1429129089, "last_edit_date": 1429129089, "creation_date": 1429129017, "answer_id": 29660058, "question_id": 29659998, "link": "https://stackoverflow.com/questions/29659998/hour-counter-wont-reset-after-the-program-is-run-again/29660058#29660058", "title": "&quot;hour&quot; counter won&#39;t reset, after the program is run again", "body": "<p>You need to reset the counter after you're done with your iteration:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nconst float initialVolume = 130.00; \nconst float decreaseRate = 0.13; \nint counter = 0;\n\nint main()\n{\nint hours,i,j,k;\nfloat remainingVolume, halfVolume, zeroVolume;\n\nwhile (cout &lt;&lt; \"Enter hours to see how much caffeine \"\n     &lt;&lt; \"is left in your body, after you drank your coffee: \" &amp;&amp; cin &gt;&gt; hours)\n{\ncout &lt;&lt; endl;\ncout &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision(4);\n\nremainingVolume = initialVolume;\n\nfor (i = 0; i &lt; hours; i++)\n{\n    counter++;\n    remainingVolume = remainingVolume - decreaseRate * remainingVolume;\n    cout &lt;&lt; \"Hour \" &lt;&lt; setw(5) &lt;&lt; counter &lt;&lt; setw(15) &lt;&lt; remainingVolume &lt;&lt; \"mg\"&lt;&lt; endl;\n}\n\nfor (j = 0, halfVolume = 130.00; halfVolume &gt; 65.0000; j++)\n{\n    counter++;\n    halfVolume = halfVolume - decreaseRate * halfVolume;\n}\n\nfor (k = 0, zeroVolume = 130.00; zeroVolume &gt; 0.0001; k++)\n{\n    counter++;\n    zeroVolume = zeroVolume - decreaseRate * zeroVolume;\n}\n\ncout &lt;&lt; \"\\n\" &lt;&lt; endl;\ncout &lt;&lt; \"It will take \" &lt;&lt; j &lt;&lt; \" hours to get caffeine levels to 65mg. \\n\" &lt;&lt; endl;\ncout &lt;&lt; \"It will take \" &lt;&lt; k &lt;&lt; \" hours to get caffeine levels to 0mg. \\n\\n\" &lt;&lt; endl;\n\ncounter = 0; // &lt;--\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4389341, "user_type": "registered", "profile_image": "https://graph.facebook.com/1440315439/picture?type=large", "display_name": "Matthew Barragan", "link": "https://stackoverflow.com/users/4389341/matthew-barragan"}, "edited": false, "score": 1, "creation_date": 1429131372, "post_id": 29660082, "comment_id": 47460908, "body": "Of course it was something so simple, and I couldn&#39;t figure it out. Thank you!!"}, {"owner": {"reputation": 30803, "user_id": 97614, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/343f4aabd790030a01f5f1510218bb7e?s=128&d=identicon&r=PG", "display_name": "Sam Holder", "link": "https://stackoverflow.com/users/97614/sam-holder"}, "reply_to_user": {"reputation": 13, "user_id": 4389341, "user_type": "registered", "profile_image": "https://graph.facebook.com/1440315439/picture?type=large", "display_name": "Matthew Barragan", "link": "https://stackoverflow.com/users/4389341/matthew-barragan"}, "edited": false, "score": 0, "creation_date": 1429131767, "post_id": 29660082, "comment_id": 47461150, "body": "you should step through the application in the debugger and monitor the values. Learning how to debug correctly is one of the most useful skills you can give yourself."}, {"owner": {"reputation": 13, "user_id": 4389341, "user_type": "registered", "profile_image": "https://graph.facebook.com/1440315439/picture?type=large", "display_name": "Matthew Barragan", "link": "https://stackoverflow.com/users/4389341/matthew-barragan"}, "edited": false, "score": 0, "creation_date": 1429132889, "post_id": 29660082, "comment_id": 47461787, "body": "I was trying to figure out if I should add in another loop for the counter, in the end of the program. It didn&#39;t occur to me to put the counter at the beginning of the program.  I appreciate your help!!"}, {"owner": {"reputation": 30803, "user_id": 97614, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/343f4aabd790030a01f5f1510218bb7e?s=128&d=identicon&r=PG", "display_name": "Sam Holder", "link": "https://stackoverflow.com/users/97614/sam-holder"}, "reply_to_user": {"reputation": 13, "user_id": 4389341, "user_type": "registered", "profile_image": "https://graph.facebook.com/1440315439/picture?type=large", "display_name": "Matthew Barragan", "link": "https://stackoverflow.com/users/4389341/matthew-barragan"}, "edited": false, "score": 0, "creation_date": 1429133526, "post_id": 29660082, "comment_id": 47462154, "body": "No problem. Glad I could help."}], "owner": {"reputation": 30803, "user_id": 97614, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/343f4aabd790030a01f5f1510218bb7e?s=128&d=identicon&r=PG", "display_name": "Sam Holder", "link": "https://stackoverflow.com/users/97614/sam-holder"}, "is_accepted": true, "score": 2, "last_activity_date": 1429129095, "creation_date": 1429129095, "answer_id": 29660082, "question_id": 29659998, "link": "https://stackoverflow.com/questions/29659998/hour-counter-wont-reset-after-the-program-is-run-again/29660082#29660082", "title": "&quot;hour&quot; counter won&#39;t reset, after the program is run again", "body": "<p>You are never resetting your <code>counter</code> value. You initialise it to 0 and then increase it in every loop. you need to reset it to 0 every time they enter a new number (ie in your while loop).</p>\n\n<p>The best solution would be to have to counter variable as a local variable declared in the loop:</p>\n\n<pre><code>while (cout &lt;&lt; \"Enter hours to see how much caffeine \"\n     &lt;&lt; \"is left in your body, after you drank your coffee: \" &amp;&amp; cin &gt;&gt; hours)\n{\nint counter=0;\ncout &lt;&lt; endl;\ncout &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision(4);\n\nremainingVolume = initialVolume;\n\nfor (i = 0; i &lt; hours; i++)\n{\n    counter++;\n    remainingVolume = remainingVolume - decreaseRate * remainingVolume;\n    cout &lt;&lt; \"Hour \" &lt;&lt; setw(5) &lt;&lt; counter &lt;&lt; setw(15) &lt;&lt; remainingVolume &lt;&lt; \"mg\"&lt;&lt; endl;\n}\n\nfor (j = 0, halfVolume = 130.00; halfVolume &gt; 65.0000; j++)\n{\n    counter++;\n    halfVolume = halfVolume - decreaseRate * halfVolume;\n}\n\nfor (k = 0, zeroVolume = 130.00; zeroVolume &gt; 0.0001; k++)\n{\n    counter++;\n    zeroVolume = zeroVolume - decreaseRate * zeroVolume;\n}\n\ncout &lt;&lt; \"\\n\" &lt;&lt; endl;\ncout &lt;&lt; \"It will take \" &lt;&lt; j &lt;&lt; \" hours to get caffeine levels to 65mg. \\n\" &lt;&lt; endl;\ncout &lt;&lt; \"It will take \" &lt;&lt; k &lt;&lt; \" hours to get caffeine levels to 0mg. \\n\\n\" &lt;&lt; endl;\n\n}\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4389341, "user_type": "registered", "profile_image": "https://graph.facebook.com/1440315439/picture?type=large", "display_name": "Matthew Barragan", "link": "https://stackoverflow.com/users/4389341/matthew-barragan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 29660082, "answer_count": 2, "score": 0, "last_activity_date": 1429131668, "creation_date": 1429128822, "last_edit_date": 1429131668, "question_id": 29659998, "link": "https://stackoverflow.com/questions/29659998/hour-counter-wont-reset-after-the-program-is-run-again", "title": "&quot;hour&quot; counter won&#39;t reset, after the program is run again", "body": "<p>I can't figure out how to reset the \"hour\" counter. </p>\n\n<p>The program runs perfect on the 1st run, but when user enters another set of hours, hours start numbering between 110-117. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nconst float initialVolume = 130.00; \nconst float decreaseRate = 0.13; \nint counter = 0;\n\nint main()\n{\nint hours,i,j,k;\nfloat remainingVolume, halfVolume, zeroVolume;\n\nwhile (cout &lt;&lt; \"Enter hours to see how much caffeine \"\n     &lt;&lt; \"is left in your body, after you drank your coffee: \" &amp;&amp; cin &gt;&gt; hours)\n{\ncout &lt;&lt; endl;\ncout &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision(4);\n\nremainingVolume = initialVolume;\n\nfor (i = 0; i &lt; hours; i++)\n{\n    counter++;\n    remainingVolume = remainingVolume - decreaseRate * remainingVolume;\n    cout &lt;&lt; \"Hour \" &lt;&lt; setw(5) &lt;&lt; counter &lt;&lt; setw(15) &lt;&lt; remainingVolume &lt;&lt; \"mg\"&lt;&lt; endl;\n}\n\nfor (j = 0, halfVolume = 130.00; halfVolume &gt; 65.0000; j++)\n{\n    counter++;\n    halfVolume = halfVolume - decreaseRate * halfVolume;\n}\n\nfor (k = 0, zeroVolume = 130.00; zeroVolume &gt; 0.0001; k++)\n{\n    counter++;\n    zeroVolume = zeroVolume - decreaseRate * zeroVolume;\n}\n\ncout &lt;&lt; \"\\n\" &lt;&lt; endl;\ncout &lt;&lt; \"It will take \" &lt;&lt; j &lt;&lt; \" hours to get caffeine levels to 65mg. \\n\" &lt;&lt; endl;\ncout &lt;&lt; \"It will take \" &lt;&lt; k &lt;&lt; \" hours to get caffeine levels to 0mg. \\n\\n\" &lt;&lt; endl;\n\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<blockquote>\n  <p>Enter hours to see how much caffeine is left in your body, after you\n  drank your coffee: 4</p>\n  \n  <p>Hour     1       113.1000mg<br>\n  Hour     2        98.3970mg<br>\n  Hour     3        85.6054mg<br>\n  Hour     4        74.4767mg  </p>\n  \n  <p>Enter hours to see how much caffeine is left in your body, after you\n  drank your coffee: 3</p>\n  \n  <p>Hour   112       113.1000mg<br>\n  Hour   113        98.3970mg<br>\n  Hour   114        85.6054mg  </p>\n</blockquote>\n"}, {"tags": ["c++", "oracle", "mfc"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1429129669, "post_id": 29659910, "comment_id": 47459952, "body": "I don&#39;t see any problem with that.  It is hardly &quot;long&quot;"}, {"owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "edited": false, "score": 0, "creation_date": 1429131082, "post_id": 29659910, "comment_id": 47460726, "body": "Does it really work? There should be no semicolon at the end of SQL statement. What library are you using? It does not look like pure OCI. How you allocate szProcName and why to you use it?"}, {"owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "edited": false, "score": 0, "creation_date": 1429131307, "post_id": 29659910, "comment_id": 47460865, "body": "It does really work.  I am using Oracle 3.8.  I allocated szProcName by creating it as <code>char szProcName[500];</code>.  It is used to hold the string of text that I execute as SQL code.  I am using libraries <code>&lt;sql.h&gt;</code> and <code>&lt;sqlext.h&gt;</code>"}, {"owner": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "edited": false, "score": 1, "creation_date": 1429132835, "post_id": 29659910, "comment_id": 47461757, "body": "I think 3.8 is your Oracle Enterprise Linux version (OEL).  You are probably running oracle 11g or possibly 12c."}, {"owner": {"reputation": 10018, "user_id": 1309356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o45P6.png?s=128&g=1", "display_name": "cha", "link": "https://stackoverflow.com/users/1309356/cha"}, "edited": false, "score": 1, "creation_date": 1429137997, "post_id": 29659910, "comment_id": 47464008, "body": "If it is MFC use CString. If you are more comfortable with STL use std::string. Then you will not have to worry about the buffer size"}, {"owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "reply_to_user": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "edited": false, "score": 0, "creation_date": 1429189354, "post_id": 29659910, "comment_id": 47488668, "body": "Thanks. @jimmcnamara I am running 11g."}], "answers": [{"owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "is_accepted": true, "score": 0, "last_activity_date": 1560872540, "last_edit_date": 1560872540, "creation_date": 1429282611, "answer_id": 29702715, "question_id": 29659910, "link": "https://stackoverflow.com/questions/29659910/executing-a-long-length-oracle-command-in-c/29702715#29702715", "title": "Executing a &quot;long-length&quot; Oracle command in C++", "body": "<p>I have found one working way. By increasing szProcName's size and using strcat(), I can add each line and then execute. I still wonder if there is a more appropriate way, especially if my statements become any larger (which they have).</p>\n"}], "owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29702715, "answer_count": 1, "score": 0, "last_activity_date": 1560977355, "creation_date": 1429128535, "last_edit_date": 1560977355, "question_id": 29659910, "link": "https://stackoverflow.com/questions/29659910/executing-a-long-length-oracle-command-in-c", "title": "Executing a &quot;long-length&quot; Oracle command in C++", "body": "<p><strong>Problem:</strong> I have a C++ application that executes different Oracle commands. My application can execute this SQL statement the following way (I have ommited error checking and a few earlier steps):</p>\n\n<pre><code>strcpy(szProcName,\"select grantee, granted_role from DBA_ROLE_PRIVS;\");\nrc=SQLPrepare(sqlc.g_hstmt,(SQLCHAR*)szProcName,(SQLINTEGER)strlen(szProcName));\nrc = SQLExecute(sqlc.g_hstmt);\n</code></pre>\n\n<p>The select statement's data is placed/binded into an MFC List Control.  This works without problem...</p>\n\n<p><em>The issue comes when I try to execute long-length select statements.</em>\nI now wish to use the same method, but to run this <em>long</em> SQL statement:</p>\n\n<pre><code>SELECT  a.GRANTEE, a.granted_role as \"Connect\", b.granted_role as \"APPUSER\" FROM\n(SELECT GRANTEE, granted_role from DBA_ROLE_PRIVS where GRANTED_ROLE = 'CONNECT')  a\nFULL OUTER JOIN\n(SELECT GRANTEE, granted_role from DBA_ROLE_PRIVS where GRANTED_ROLE = 'APPUSER') b\nON a.GRANTEE=b.GRANTEE;\n</code></pre>\n\n<p>Setting that entire statement into <code>szProcName</code> seems like the wrong way to go about things.  </p>\n\n<p><strong>What I have tried:</strong>  I tried to add all the SQL text into <code>szProcName</code>, but it does not fit and makes the code terribly messy.  I also thought to create a Stored Procedure to call in C++.  The Stored Procedure requires that I use an <code>INTO</code> clause and does not produce a table that I can use in C++.  Is there a better way to do this?</p>\n\n<p><strong>Edit:</strong> I have found one working way. By increasing <code>szProcName</code>'s size and using<code>strcat()</code>, I can add each line and then execute.  I still wonder if there is a more appropriate way, especially if my statements become any larger (which they probably will).</p>\n"}, {"tags": ["c++", "button", "localization", "qt5", "qt5.4"], "comments": [{"owner": {"reputation": 8275, "user_id": 1465625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5294e4ecf2875e565ad0c6e2950e4042?s=128&d=identicon&r=PG", "display_name": "hank", "link": "https://stackoverflow.com/users/1465625/hank"}, "edited": false, "score": 0, "creation_date": 1429172579, "post_id": 29659874, "comment_id": 47476592, "body": "You can reimplement <code>QTranslator::translate</code> and check which strings your application wants to be translated. Maybe that will help."}], "answers": [{"owner": {"reputation": 2435, "user_id": 385655, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e4b0ef43a12e4a3327e91b5819b71058?s=128&d=identicon&r=PG", "display_name": "David Burson", "link": "https://stackoverflow.com/users/385655/david-burson"}, "is_accepted": false, "score": 0, "last_activity_date": 1429209188, "creation_date": 1429209188, "answer_id": 29683199, "question_id": 29659874, "link": "https://stackoverflow.com/questions/29659874/qt5-qdialogbuttonbox-localized-values-arent-found-though-they-exist-in-qt-xx-q/29683199#29683199", "title": "Qt5 QDialogButtonBox localized values aren&#39;t found, though they exist in qt_xx.qm and were found in Qt4", "body": "<p>I stepped into the Qt code and found in qtbase\\src\\gui\\kernel\\qplatformtheme.cpp:</p>\n\n<pre><code>QString QPlatformTheme::defaultStandardButtonText(int button)\n{\n    switch (button) {\n    case QPlatformDialogHelper::Ok:\n        return QCoreApplication::translate(\"QPlatformTheme\", \"OK\");\n    case QPlatformDialogHelper::Save:\n        return QCoreApplication::translate(\"QPlatformTheme\", \"Save\");\n    case QPlatformDialogHelper::SaveAll:\n        return QCoreApplication::translate(\"QPlatformTheme\", \"Save All\");\n    case QPlatformDialogHelper::Open:\n        return QCoreApplication::translate(\"QPlatformTheme\", \"Open\");\n</code></pre>\n\n<p>etc.</p>\n\n<p>So, in each qt_xx.ts file, I copied the QDialogButtonBox section and renamed it to QPlatformTheme.  That did it!  No idea why the qt_xx.ts's that shipped with Qt 5.4.1 are wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 2435, "user_id": 385655, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e4b0ef43a12e4a3327e91b5819b71058?s=128&d=identicon&r=PG", "display_name": "David Burson", "link": "https://stackoverflow.com/users/385655/david-burson"}, "edited": false, "score": 0, "creation_date": 1434993291, "post_id": 30954066, "comment_id": 50001934, "body": "My answer works, but this appears to be the correct answer, especially once Qt 5.5.0 is released."}], "owner": {"reputation": 168, "user_id": 4802862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b78fd241cebaac5bce83f491c2b8c5?s=128&d=identicon&r=PG&f=1", "display_name": "georges abitbol", "link": "https://stackoverflow.com/users/4802862/georges-abitbol"}, "is_accepted": true, "score": 1, "last_activity_date": 1466108094, "last_edit_date": 1466108094, "creation_date": 1434803560, "answer_id": 30954066, "question_id": 29659874, "link": "https://stackoverflow.com/questions/29659874/qt5-qdialogbuttonbox-localized-values-arent-found-though-they-exist-in-qt-xx-q/30954066#30954066", "title": "Qt5 QDialogButtonBox localized values aren&#39;t found, though they exist in qt_xx.qm and were found in Qt4", "body": "<p>Qt translation files have been modified in previous versions of Qt, and nobody bothered updating french support. It is now done, and hopefully released in Qt 5.5.0 :</p>\n\n<p><a href=\"https://codereview.qt-project.org/#/c/111230/\" rel=\"nofollow\">https://codereview.qt-project.org/#/c/111230/</a></p>\n\n<p>Note that the <code>qt_fr.qm</code> is obsolete and empty, and you should load <code>qtbase_fr.qm</code>, following the new Qt5 repository architecture.</p>\n\n<p>qtcreator translation still needs work, you can contribute to its translation on Transifex, look for <code>qttraductions</code> project.</p>\n"}], "owner": {"reputation": 2435, "user_id": 385655, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e4b0ef43a12e4a3327e91b5819b71058?s=128&d=identicon&r=PG", "display_name": "David Burson", "link": "https://stackoverflow.com/users/385655/david-burson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 972, "favorite_count": 0, "accepted_answer_id": 30954066, "answer_count": 2, "score": 0, "last_activity_date": 1466108094, "creation_date": 1429128418, "question_id": 29659874, "link": "https://stackoverflow.com/questions/29659874/qt5-qdialogbuttonbox-localized-values-arent-found-though-they-exist-in-qt-xx-q", "title": "Qt5 QDialogButtonBox localized values aren&#39;t found, though they exist in qt_xx.qm and were found in Qt4", "body": "<p>Upgrading my application from Qt 4.8 to Qt 5.4.1, I notice that when running my application in non-English, the translated items in the \"QDialogButtonBox\" section of qt_xx.ts are not found.  Other items, such as those in the \"QWizard\" section, are found and displayed correctly.</p>\n\n<p>How can I get my <code>QMessageBox</code>'s to have their buttons use the translated strings in qt_xx.qm?</p>\n\n<p>I used French to demonstrate this issue (code below):</p>\n\n<p>I deleted all the sections in the qt_fr.ts file except for \"QDialogButtonBox\" and \"QWizard\".  I edited the translation of \"Cancel\" in the \"QWizard\" section to be sure that qt_fr.qm is used at all.  Then I ran lrelease to create my qt_fr.qm.</p>\n\n<p>On a Windows 7 box, in the Region and Language dialog:</p>\n\n<ul>\n<li>in the Formats tab, I set the Format to \"French (France)\"</li>\n<li>in the Keyboards and Languages tab, I set the Display Language to French.</li>\n</ul>\n\n<p>I run my sample project with the .exe and qt_fr.qm in the same folder.  In that folder I also have a copy of the necessary Qt5 dll's (can copy them from a Windows build of Qt, in qtbase\\bin).</p>\n\n<p>Results:</p>\n\n<p>When I click the \"QMessageBox\" button I see a <code>QMessageBox</code>, with the buttons NOT translated.  When I click the \"QWizard\" button I see a <code>QWizard</code>, and the Cancel button DOES have my edited translation.</p>\n\n<p>The QMessageBox buttons are translated in the Qt 4 version of my application.  What changed?  How do I get it to work in Qt 5?</p>\n\n<p>Sample project code:</p>\n\n<p>btn_localize_bug757.pro:</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = btn_localize_bug757\nTEMPLATE = app\n\n\nSOURCES += main.cpp\\\n        mainwindow.cpp\n\nHEADERS  += mainwindow.h\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QtWidgets/QApplication&gt;\n#include &lt;QtCore/QTranslator&gt;\n\nint main(int argc, char *argv[])\n{\n  QApplication a(argc, argv);\n\n  QTranslator qtTranslator;\n  qtTranslator.load(\"qt_fr\");\n  a.installTranslator(&amp;qtTranslator);\n\n  MainWindow w;\n  w.show();\n\n  return a.exec();\n}\n</code></pre>\n\n<p>mainwindow.h:</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QtWidgets/QMainWindow&gt;\n\n#include &lt;QtWidgets/QPushButton&gt;\n\nclass MainWindow : public QMainWindow\n{\n  Q_OBJECT\n\npublic:\n  MainWindow(QWidget *parent = 0);\n  ~MainWindow();\n\nprivate slots:\n  void showMessage();\n  void showWizard();\n\nprivate:\n  QPushButton *showMessageButton;\n  QPushButton *showWizardButton;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>mainwindow.cpp:</p>\n\n<pre><code>#include \"mainwindow.h\"\n\n#include &lt;QtWidgets/QMessageBox&gt;\n#include &lt;QtWidgets/QVBoxLayout&gt;\n#include &lt;QtWidgets/QWizard&gt;\n\nMainWindow::MainWindow(QWidget *parent)\n  : QMainWindow(parent)\n{\n  setWindowTitle(\"test\");\n\n  QPushButton *showMessageButton = new QPushButton(\"QMessageBox\", this);\n  connect(showMessageButton, SIGNAL(clicked()), SLOT(showMessage()));\n\n  QPushButton *showWizardButton = new QPushButton(\"QWizard\", this);\n  connect(showWizardButton, SIGNAL(clicked()), SLOT(showWizard()));\n\n  QVBoxLayout *layout = new QVBoxLayout;\n  layout-&gt;addWidget(showMessageButton);\n  layout-&gt;addWidget(showWizardButton);\n\n  QWidget *window = new QWidget();\n  window-&gt;setLayout(layout);\n\n  setCentralWidget(window);\n}\n\nMainWindow::~MainWindow()\n{\n\n}\n\nvoid MainWindow::showMessage()\n{\n  QMessageBox msg(this);\n  msg.setWindowModality(Qt::WindowModal);\n  msg.setIcon(QMessageBox::Question);\n  msg.setText(\"test\");\n  msg.setStandardButtons(QMessageBox::Save |\n                                         QMessageBox::Discard |\n                                         QMessageBox::Cancel);\n  msg.setDefaultButton(QMessageBox::Save);\n\n  msg.exec();\n}\n\nvoid MainWindow::showWizard()\n{\n  QWizard *wiz = new QWizard();\n  wiz-&gt;show();\n}\n</code></pre>\n\n<p>qt_fr.ts:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!DOCTYPE TS&gt;\n&lt;TS version=\"2.0\" language=\"fr\"&gt;\n&lt;context&gt;\n    &lt;name&gt;QDialogButtonBox&lt;/name&gt;\n    &lt;message&gt;\n        &lt;source&gt;OK&lt;/source&gt;\n        &lt;translation&gt;OK&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Save&lt;/source&gt;\n        &lt;translation&gt;Enregistrer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;Save&lt;/source&gt;\n        &lt;translation&gt;Enregi&amp;amp;strer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Open&lt;/source&gt;\n        &lt;translation&gt;Ouvrir&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Cancel&lt;/source&gt;\n        &lt;translation&gt;Annuler&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;Cancel&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;Annuler&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Close&lt;/source&gt;\n        &lt;translation&gt;Fermer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;Close&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;Fermer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Apply&lt;/source&gt;\n        &lt;translation&gt;Appliquer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Reset&lt;/source&gt;\n        &lt;translation&gt;R\u00e9initialiser&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Help&lt;/source&gt;\n        &lt;translation&gt;Aide&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Don&amp;apos;t Save&lt;/source&gt;\n        &lt;translation&gt;Ne pas enregistrer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Discard&lt;/source&gt;\n        &lt;translation&gt;Ne pas enregistrer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;Yes&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;Oui&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Yes to &amp;amp;All&lt;/source&gt;\n        &lt;translation&gt;Oui \u00e0 &amp;amp;tout&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;No&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;Non&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;N&amp;amp;o to All&lt;/source&gt;\n        &lt;translation&gt;Non \u00e0 to&amp;amp;ut&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Save All&lt;/source&gt;\n        &lt;translation&gt;Tout Enregistrer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Abort&lt;/source&gt;\n        &lt;translation&gt;Abandonner&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Retry&lt;/source&gt;\n        &lt;translation&gt;R\u00e9essayer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Ignore&lt;/source&gt;\n        &lt;translation&gt;Ignorer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Restore Defaults&lt;/source&gt;\n        &lt;translation&gt;Restaurer les valeurs par d\u00e9faut&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Close without Saving&lt;/source&gt;\n        &lt;translation&gt;Fermer sans enregistrer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;OK&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;OK&lt;/translation&gt;\n    &lt;/message&gt;\n&lt;/context&gt;\n&lt;context&gt;\n    &lt;name&gt;QWizard&lt;/name&gt;\n    &lt;message&gt;\n        &lt;source&gt;Go Back&lt;/source&gt;\n        &lt;translation&gt;Pr\u00e9c\u00e9dent&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Continue&lt;/source&gt;\n        &lt;translation&gt;Continuer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Commit&lt;/source&gt;\n        &lt;translatorcomment&gt;si il s&amp;apos;agit de commit au m\u00eame sens que git... (en m\u00eame temps se marier en cliquant... ?!!?!)&lt;/translatorcomment&gt;\n        &lt;translation&gt;Soumettre&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Done&lt;/source&gt;\n        &lt;translation&gt;Terminer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Quit&lt;/source&gt;\n        &lt;translation type=\"obsolete\"&gt;Quitter&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Help&lt;/source&gt;\n        &lt;translation&gt;Aide&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;lt; &amp;amp;Back&lt;/source&gt;\n        &lt;translation&gt;&amp;lt; &amp;amp;Pr\u00e9c\u00e9dent&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;Finish&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;Terminer&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;Cancel&lt;/source&gt;\n        &lt;translation&gt;testAnnuler&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;Help&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;Aide&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;Next&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;Suivant &amp;gt;&lt;/translation&gt;\n    &lt;/message&gt;\n    &lt;message&gt;\n        &lt;source&gt;&amp;amp;Next &amp;gt;&lt;/source&gt;\n        &lt;translation&gt;&amp;amp;Suivant &amp;gt;&lt;/translation&gt;\n    &lt;/message&gt;\n&lt;/context&gt;\n&lt;/TS&gt;\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2010", "visual-c++"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1429128595, "post_id": 29659816, "comment_id": 47459319, "body": "&quot;it said I already had a newer version&quot;  Sounds like a message from the libraries installer, which is just a small part of the development tools.  Not unusual to have the Visual C++ libraries already installed by other software."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1429128711, "post_id": 29659816, "comment_id": 47459397, "body": "In any case, you probably would want the latest Visual Studio 2013 express, since lots of compiler bugs have gotten fixed.  Or community edition, which includes even more.  <a href=\"https://www.visualstudio.com/en-us/products/visual-studio-community-vs.aspx\" rel=\"nofollow noreferrer\">visualstudio.com/en-us/products/visual-studio-community-vs.a&zwnj;&#8203;spx</a>"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1429128851, "post_id": 29659816, "comment_id": 47459461, "body": "If you are taking a class, you might be eligible to use <a href=\"https://www.dreamspark.com\" rel=\"nofollow noreferrer\">dreamspark.com</a> to download a complete full version.  Check with your school/IT department."}, {"owner": {"reputation": 3, "user_id": 4789130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccccfd5789a1653aaa52be94776447b6?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Vocke", "link": "https://stackoverflow.com/users/4789130/justin-vocke"}, "edited": false, "score": 0, "creation_date": 1429128910, "post_id": 29659816, "comment_id": 47459493, "body": "So how do I get the actual program? I&#39;ve uninstalled/installed multiple times and each time i&#39;ve installed the actual visual c++ was nowhere to be found, even after searching, all that was left when I typed in visual c++ to the searchbar was the setup program."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1429129288, "post_id": 29659816, "comment_id": 47459735, "body": "With an updated Windows 7, VS 2013 (and I would think the express version as well) works fine. I use it. The earliest versions were troublesome."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1429129555, "post_id": 29659816, "comment_id": 47459886, "body": "Also Visual Studio creates a restore point before a proper install. If it was recently you can restore to that to undo anything bad you might have done."}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1429131281, "post_id": 29659816, "comment_id": 47460843, "body": "I have a laptop with windows 7 as well, and I am using visual studio express with no problems. Another version you might like to look at is the community version of visual studio which has a lot more utilities than the express version (almost like the pro version) but the licensing limits it to personal and learning uses, which is the case based on your post. Also, this might not be the case, but are you by any chance installing Visual C++ redistributable package instead of the actual Visual C++?"}, {"owner": {"reputation": 3, "user_id": 4789130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccccfd5789a1653aaa52be94776447b6?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Vocke", "link": "https://stackoverflow.com/users/4789130/justin-vocke"}, "edited": false, "score": 0, "creation_date": 1429132508, "post_id": 29659816, "comment_id": 47461591, "body": "captain giraffe I would think that as well, and I looked for a restore point but found none, perhaps because the original download was halted when it said I had a new version?   triple_r yes I am using the redistributable package, that&#39;s the only one I could find on Microsoft&#39;s website that was 2010...Not a good idea?"}, {"owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "edited": false, "score": 0, "creation_date": 1429139741, "post_id": 29659816, "comment_id": 47464619, "body": "The redistributable package is not Visual C++. It is just libraries that can be used by programs developed with Visual C++."}, {"owner": {"reputation": 3, "user_id": 4789130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccccfd5789a1653aaa52be94776447b6?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Vocke", "link": "https://stackoverflow.com/users/4789130/justin-vocke"}, "edited": false, "score": 0, "creation_date": 1429151147, "post_id": 29659816, "comment_id": 47467856, "body": "Okay that makes sense. After searching through program files, I&#39;ve found the visual studio 2010, and in it there&#39;s a &quot;microsoft visual c++ 2010 express-enu&quot; folder with a lot of .dll files and otheres but the only executable programs are the setup.exe, DeleteTemp.exe, and vs_setup.MSI  I ran setup.exe and it downloaded all the files including .net and all that but still I can&#39;t find the damn program itself and it doesn&#39;t open automatically."}, {"owner": {"reputation": 429, "user_id": 1055623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9661cc5c54cf17f4257228538aabb928?s=128&d=identicon&r=PG", "display_name": "pag3faul7", "link": "https://stackoverflow.com/users/1055623/pag3faul7"}, "edited": false, "score": 0, "creation_date": 1429166157, "post_id": 29659816, "comment_id": 47472755, "body": "Looks like you are fiddling with the VS redistributable packages and not the IDE. You need to download and install Visual Studio."}, {"owner": {"reputation": 3, "user_id": 4789130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccccfd5789a1653aaa52be94776447b6?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Vocke", "link": "https://stackoverflow.com/users/4789130/justin-vocke"}, "edited": false, "score": 0, "creation_date": 1429209702, "post_id": 29659816, "comment_id": 47503564, "body": "Hmm ok, I&#39;m installing visual studio community 2013 with update 4 so I&#39;ll see how that goes. If not screw it I&#39;m just going to use NetBeans. Thanks for all the help everybody!"}], "owner": {"reputation": 3, "user_id": 4789130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccccfd5789a1653aaa52be94776447b6?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Vocke", "link": "https://stackoverflow.com/users/4789130/justin-vocke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429128239, "creation_date": 1429128239, "question_id": 29659816, "link": "https://stackoverflow.com/questions/29659816/visual-c-not-showing-up-after-download-on-windows-7-tried-everything", "title": "Visual C++ not showing up after download on Windows 7 (tried everything!)", "body": "<p>I wasn't sure how exactly to word this so here goes. I tried to download Visual C++ 2010 for a class I'm taking, and after starting the installer it said I already had a newer version, which I don't remember downloading but anywho..</p>\n\n<p>So I went to uninstall it from the programs panel, and there were 2 Visual C++ 2010 programs and 2 Visual C++ 2008 programs, including the Visual Studio 2010 and Visual Studio tools for office runtime. <b>THATS WHEN THE CRAZINESS ENSUED!</b></p>\n\n<p>Now not only are they all gone, but I have tried downloading VC++ multiple times and uninstalled the same amount and when I search for the program all I come up with is the install program. Also, all my folders for software writing programs are empty on the start-up menu (Visual Studio 2010,Dev-C++,Netbeans, python,Java etc.).</p>\n\n<p>Did I delete something I wasn't supposed to? I have a Visual studio 2010 folder that looks legit with what it contains (even a visual c++ 2010 Express-ENU) folder but both only contain the installer.exe program and uninstall temp.exe program. Any idea what the heck is going on? Sorry it's not a \"sexy\" problem but any help at all but I just want to learn and code some damn C++! Thanks to all!</p>\n"}, {"tags": ["c++", "lua", "luabind"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1429131915, "post_id": 29659750, "comment_id": 47461239, "body": "You can call the lua functions from C++ to create and access the instance if you want to keep things done this way."}], "answers": [{"comments": [{"owner": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "edited": false, "score": 0, "creation_date": 1429197144, "post_id": 29677545, "comment_id": 47495112, "body": "Exactly what I was looking for thanks! For my process the object will live for the entire application so not an issue."}], "owner": {"reputation": 3500, "user_id": 847349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BsyZ.jpg?s=128&g=1", "display_name": "Dmitry Ledentsov", "link": "https://stackoverflow.com/users/847349/dmitry-ledentsov"}, "is_accepted": true, "score": 2, "last_activity_date": 1429194919, "last_edit_date": 1429194919, "creation_date": 1429194011, "answer_id": 29677545, "question_id": 29659750, "link": "https://stackoverflow.com/questions/29659750/pass-c-object-so-lua-can-use-it/29677545#29677545", "title": "Pass C++ Object so Lua can use it", "body": "<p>You can push the value onto the Lua stack via luabind:</p>\n\n<pre><code>Player p;\nluabind::globals(L)[\"player\"] = p;\n</code></pre>\n\n<p>a runnable example: <a href=\"https://travis-ci.org/d-led/lua_cpp_tryout/builds/58761283\" rel=\"nofollow\">travis-ci</a>, <a href=\"https://github.com/d-led/lua_cpp_tryout/blob/29659750/try_luabridge.cpp\" rel=\"nofollow\">source</a>.</p>\n\n<p>P.S. beware of object lifetime and ownership issues. The <a href=\"http://vinniefalco.github.com/LuaBridge\" rel=\"nofollow\">LuaBridge</a> manual can be of help to plan a strategy of shared object lifetime management. + an updated <a href=\"http://public.vrac.iastate.edu/vancegroup/docs/luabind/\" rel=\"nofollow\">LuaBind manual</a> for the LuaBind lifetime policies.</p>\n"}], "owner": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 29677545, "answer_count": 1, "score": 4, "last_activity_date": 1429194919, "creation_date": 1429128021, "question_id": 29659750, "link": "https://stackoverflow.com/questions/29659750/pass-c-object-so-lua-can-use-it", "title": "Pass C++ Object so Lua can use it", "body": "<p>I understand with Luabind that I can expose classes and then instances of those classes can be created in lua.</p>\n\n<pre><code>module[L_state]\n   [\n      class_&lt;Player&gt;(\"Player\")\n      .def(constructor&lt;&gt;())\n      .def(\"Update\",&amp;Player::Update)\n   ];\n\ntest.lua\nplayer = Player()\nplayer:Update()\n</code></pre>\n\n<p>But what if I wanted to create that player instance in C++ because I want to call it's members in C++, but I also want to expose that same instance of player to Lua so it can still call it's functions like:</p>\n\n<pre><code>player:Update()\n</code></pre>\n"}, {"tags": ["c++", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 3, "user_id": 4742452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbabd7fdc8058709bb159a431c619a5b?s=128&d=identicon&r=PG&f=1", "display_name": "hallan", "link": "https://stackoverflow.com/users/4742452/hallan"}, "edited": false, "score": 0, "creation_date": 1429127931, "post_id": 29659704, "comment_id": 47458946, "body": "Those are the exact (x,y) for the picture."}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1429128028, "post_id": 29659704, "comment_id": 47459010, "body": "What units are the X and Y in?  Do you have the correct scale and offset?  (ie Should you consider -ve and +ve values for X and Y)"}, {"owner": {"reputation": 3, "user_id": 4742452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbabd7fdc8058709bb159a431c619a5b?s=128&d=identicon&r=PG&f=1", "display_name": "hallan", "link": "https://stackoverflow.com/users/4742452/hallan"}, "reply_to_user": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1429128279, "post_id": 29659704, "comment_id": 47459132, "body": "From what i&#39;m aware, SDL&#39;s image origin is always set at 0,0. So an offset doesn&#39;t seem to be necessary ."}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1429128471, "post_id": 29659704, "comment_id": 47459257, "body": "Can you post an image of what it does when you put in the &#39;proper&#39; X and Y, which I assume is 32,32?   (Maybe the units of your canvas are not aligned with the units you are using?)"}, {"owner": {"reputation": 3, "user_id": 4742452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbabd7fdc8058709bb159a431c619a5b?s=128&d=identicon&r=PG&f=1", "display_name": "hallan", "link": "https://stackoverflow.com/users/4742452/hallan"}, "reply_to_user": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1429128536, "post_id": 29659704, "comment_id": 47459290, "body": "If the x and y are at 32, 32 you will get the image above as well."}, {"owner": {"reputation": 1992, "user_id": 2059346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b1bf47c1c750ebf4d32aadb85222e11?s=128&d=identicon&r=PG", "display_name": "Zammalad", "link": "https://stackoverflow.com/users/2059346/zammalad"}, "edited": false, "score": 0, "creation_date": 1429128702, "post_id": 29659704, "comment_id": 47459392, "body": "Can you show the <code>drawSprite</code> code please?"}, {"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1429128709, "post_id": 29659704, "comment_id": 47459395, "body": "This is pretty weird. I assume you haven&#39;t messed up with the SDL_RenderSetViewport ... so post your drawSprite code."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1429128798, "post_id": 29659704, "comment_id": 47459433, "body": "It may actually be working correctly depending on how SDL works and how you setup your renderer.  I haven&#39;t worked with it in a looooong time but is it possible they cannot occupy the same space and your <code>SDL_Renderer</code> is trying to obey that rule?  Look into it, change some Alpha values and see what you get."}, {"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1429128893, "post_id": 29659704, "comment_id": 47459482, "body": "destRect.x = y; .. here is your mistake"}, {"owner": {"reputation": 3, "user_id": 4742452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbabd7fdc8058709bb159a431c619a5b?s=128&d=identicon&r=PG&f=1", "display_name": "hallan", "link": "https://stackoverflow.com/users/4742452/hallan"}, "edited": false, "score": 0, "creation_date": 1429128924, "post_id": 29659704, "comment_id": 47459501, "body": "DrawSprite added into original post."}, {"owner": {"reputation": 1992, "user_id": 2059346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b1bf47c1c750ebf4d32aadb85222e11?s=128&d=identicon&r=PG", "display_name": "Zammalad", "link": "https://stackoverflow.com/users/2059346/zammalad"}, "reply_to_user": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1429128950, "post_id": 29659704, "comment_id": 47459526, "body": "@jnbbender I can&#39;t think of any configuration where a texture/surface would not be rendered if another was drawn partially covering it. It would simply display in order of rendering calls ie last called would be drawn on top"}, {"owner": {"reputation": 3, "user_id": 4742452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbabd7fdc8058709bb159a431c619a5b?s=128&d=identicon&r=PG&f=1", "display_name": "hallan", "link": "https://stackoverflow.com/users/4742452/hallan"}, "edited": false, "score": 0, "creation_date": 1429128972, "post_id": 29659704, "comment_id": 47459541, "body": "Oh wow, so simple. Thank you very much though guys!!"}], "answers": [{"owner": {"reputation": 1992, "user_id": 2059346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b1bf47c1c750ebf4d32aadb85222e11?s=128&d=identicon&r=PG", "display_name": "Zammalad", "link": "https://stackoverflow.com/users/2059346/zammalad"}, "is_accepted": true, "score": 4, "last_activity_date": 1429129152, "creation_date": 1429129152, "answer_id": 29660100, "question_id": 29659704, "link": "https://stackoverflow.com/questions/29659704/why-are-my-sdl-c-images-disappearing/29660100#29660100", "title": "Why are my SDL/C++ images disappearing?", "body": "<p>You are setting up the destination <code>SDL_Rect</code> incorrectly by assigning <code>destRect.x = y</code> it should be <code>destRect.x = x</code></p>\n\n<pre><code>void SpriteLoader::drawSprite(std::string id, int x, int y, int width, int height, SDL_Renderer* renderer, SDL_RendererFlip flip)\n{\n    SDL_Rect srcRect;\n    SDL_Rect destRect;\n\n    srcRect.x = 0;\n    srcRect.y = 0;\n    srcRect.w = destRect.w = width;\n    srcRect.h = destRect.h = height;\n    destRect.x = x;   // THIS WAS THE ERROR (You had destRect.x = y;)\n    destRect.y = y;\n\n    SDL_RenderCopyEx(renderer, textures[id], &amp;srcRect, &amp;destRect, 0, 0, flip);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4742452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbabd7fdc8058709bb159a431c619a5b?s=128&d=identicon&r=PG&f=1", "display_name": "hallan", "link": "https://stackoverflow.com/users/4742452/hallan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 29660100, "answer_count": 1, "score": 0, "last_activity_date": 1429208998, "creation_date": 1429127840, "last_edit_date": 1429208998, "question_id": 29659704, "link": "https://stackoverflow.com/questions/29659704/why-are-my-sdl-c-images-disappearing", "title": "Why are my SDL/C++ images disappearing?", "body": "<p>I'm making a little game engine as a side project but for some reason I'm getting a really weird problem.</p>\n\n<p>It's to do with the sprites. I'm loading the sprites fine, I seem to render fine. But when the x, y of the sprites are close to each other, one of the tiles  either vanish or go in the wrong position. Usually it's off by 32 whether it's x or y.</p>\n\n<pre><code>void SpriteLoader::loadSprites(SDL_Renderer* renderer)\n{\n    loadSprite(\"assets/grass.png\", \"grass\", renderer);\n    loadSprite(\"assets/grass_full.png\", \"grass2\", renderer);\n}\n\nvoid SpriteLoader::renderSprites(SDL_Renderer* renderer)\n{\n    drawSprite(\"grass\", 0, 0, 32, 32, renderer);\n    drawSprite(\"grass2\", 64, 32, 32, 32, renderer);\n\n}\n</code></pre>\n\n<p>Here is the image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/8Wrf4.png\" alt=\"enter image description here\"></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void SpriteLoader::drawSprite(std::string id, int x, int y, int width, int height, SDL_Renderer* renderer, SDL_RendererFlip flip)\n{\n    SDL_Rect srcRect;\n    SDL_Rect destRect;\n\n    srcRect.x = 0;\n    srcRect.y = 0;\n    srcRect.w = destRect.w = width;\n    srcRect.h = destRect.h = height;\n    destRect.x = y;\n    destRect.y = y;\n\n    SDL_RenderCopyEx(renderer, textures[id], &amp;srcRect, &amp;destRect, 0, 0, flip);\n}\n</code></pre>\n"}, {"tags": ["c++", "hash", "cryptography", "crypto++"], "comments": [{"owner": {"reputation": 99643, "user_id": 445517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e2ba76e6290c4e9e19821a068bc8c1?s=128&d=identicon&r=PG", "display_name": "CodesInChaos", "link": "https://stackoverflow.com/users/445517/codesinchaos"}, "edited": false, "score": 2, "creation_date": 1429128363, "post_id": 29659594, "comment_id": 47459181, "body": "Where did you run into problems?"}, {"owner": {"reputation": 273, "user_id": 4713649, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cc44fcabc8880af560b7363a408d864b?s=128&d=identicon&r=PG&f=1", "display_name": "pnk", "link": "https://stackoverflow.com/users/4713649/pnk"}, "reply_to_user": {"reputation": 99643, "user_id": 445517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e2ba76e6290c4e9e19821a068bc8c1?s=128&d=identicon&r=PG", "display_name": "CodesInChaos", "link": "https://stackoverflow.com/users/445517/codesinchaos"}, "edited": false, "score": 0, "creation_date": 1429129525, "post_id": 29659594, "comment_id": 47459868, "body": "When I want hash bigger text then 16kB: error C2026: string too big, trailing characters truncated"}, {"owner": {"reputation": 99643, "user_id": 445517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e2ba76e6290c4e9e19821a068bc8c1?s=128&d=identicon&r=PG", "display_name": "CodesInChaos", "link": "https://stackoverflow.com/users/445517/codesinchaos"}, "edited": false, "score": 1, "creation_date": 1429130149, "post_id": 29659594, "comment_id": 47460226, "body": "Isn&#39;t that a compiler error, which tells you that you can&#39;t use string literals that long? In that case you could simply build the string in another way, e.g. by reading from a file."}], "answers": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 1, "last_activity_date": 1429188403, "last_edit_date": 1429188403, "creation_date": 1429129690, "answer_id": 29660240, "question_id": 29659594, "link": "https://stackoverflow.com/questions/29659594/how-can-i-hash-bigger-text-file-than-16kb/29660240#29660240", "title": "How can I hash bigger text file than 16kB?", "body": "<blockquote>\n  <p>When I'm using Crypto++ library for hash how can I hash bigger file than 16kB (string size)? I want hash files like 1Mb at least.</p>\n</blockquote>\n\n<p>You should do either one of two things. First, use a <a href=\"http://www.cryptopp.com/wiki/FileSource\" rel=\"nofollow\"><code>FileSource</code></a> rather than a <a href=\"http://www.cryptopp.com/wiki/StringSource\" rel=\"nofollow\"><code>StringSource</code></a>. Something like:</p>\n\n<pre><code>string s1, s2, s3, s4;\nSHA1 sha1; SHA224 sha224; SHA256 sha256; SHA512 sha512;\n\nHashFilter f1(sha1, new HexEncoder(new StringSink(s1)));\nHashFilter f2(sha224, new HexEncoder(new StringSink(s2)));\nHashFilter f3(sha256, new HexEncoder(new StringSink(s3)));\nHashFilter f4(sha512, new HexEncoder(new StringSink(s4)));\n\nChannelSwitch cs;\ncs.AddDefaultRoute(f1);\ncs.AddDefaultRoute(f2);\ncs.AddDefaultRoute(f3);\ncs.AddDefaultRoute(f4);\n\nFileSource fs(\"filename.xxx\", true /*pumpAll*/, new Redirector(cs));\n\ncout &lt;&lt; Message: \" &lt;&lt; message &lt;&lt; endl;\ncout &lt;&lt; \"SHA-1: \" &lt;&lt; s1 &lt;&lt; endl;\ncout &lt;&lt; \"SHA-224: \" &lt;&lt; s2 &lt;&lt; endl;\ncout &lt;&lt; \"SHA-256: \" &lt;&lt; s3 &lt;&lt; endl;\ncout &lt;&lt; \"SHA-512: \" &lt;&lt; s4 &lt;&lt; endl;\n</code></pre>\n\n<p>In general, you can swap in any <a href=\"http://www.cryptopp.com/wiki/Category:Source\" rel=\"nofollow\">Crypto++ Source</a> and things will just work.</p>\n\n<p>Second, you can map a view of the file into your process and then repeatedly call <code>Put</code> in a loop. When you are finished consuming all the data in the file, call <code>MessageEnd</code> and then unmap the file. You call <code>Put</code> and <code>MessageEnd</code> on on the <code>ChannelSwitch</code> above because its the <a href=\"http://www.cryptopp.com/wiki/BufferedTransformation\" rel=\"nofollow\"><code>BufferedTransformation</code></a> of interest.</p>\n\n<p>On Windows, you map the view of a file with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366761%28v=vs.85%29.aspx\" rel=\"nofollow\">MapViewOfFile</a>. On Linux, you use <a href=\"http://linux.die.net/man/2/mmap\" rel=\"nofollow\">mmap(2)</a>.</p>\n\n<p>When you map a view of a file, you will effectively have a in-memory byte array backed by disk. In this case, you would use an <a href=\"http://www.cryptopp.com/wiki/ArraySource\" rel=\"nofollow\"><code>ArraySource</code></a> instead of <code>StringSource</code> or <code>FileSource</code>.</p>\n"}], "owner": {"reputation": 273, "user_id": 4713649, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cc44fcabc8880af560b7363a408d864b?s=128&d=identicon&r=PG&f=1", "display_name": "pnk", "link": "https://stackoverflow.com/users/4713649/pnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 0, "accepted_answer_id": 29660240, "answer_count": 1, "score": 1, "last_activity_date": 1429188403, "creation_date": 1429127575, "last_edit_date": 1429138402, "question_id": 29659594, "link": "https://stackoverflow.com/questions/29659594/how-can-i-hash-bigger-text-file-than-16kb", "title": "How can I hash bigger text file than 16kB?", "body": "<p>I'm using Crypto++ library for hashing. How can I hash bigger file than 16kB (string size)? I want hash files like 1Mb at least.</p>\n\n<p>The error I am getting is when the text is bigger then 16kB:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>error C2026: string too big, trailing characters truncated\n</code></pre>\n\n<p>Here is the code I am using:</p>\n\n<pre><code>std::string hash;\nCryptoPP::SHA512 sha;\n\nCryptoPP::StringSource ss(source, true,\n                          new CryptoPP::HashFilter(sha,\n                              new CryptoPP::HexEncoder(\n                                  new CryptoPP::StringSink(hash))));\n\ncout &lt;&lt; \"SHA-512 hash: \" &lt;&lt; hash &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "qt", "qdialog"], "comments": [{"owner": {"reputation": 1071, "user_id": 1530677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86ae106b53ffd344388a994c407b6dde?s=128&d=identicon&r=PG", "display_name": "kiss-o-matic", "link": "https://stackoverflow.com/users/1530677/kiss-o-matic"}, "edited": false, "score": 1, "creation_date": 1429127641, "post_id": 29659541, "comment_id": 47458767, "body": "Where&#39;s the code that creates the QPushButton and connects it to a slot?"}, {"owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "reply_to_user": {"reputation": 1071, "user_id": 1530677, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86ae106b53ffd344388a994c407b6dde?s=128&d=identicon&r=PG", "display_name": "kiss-o-matic", "link": "https://stackoverflow.com/users/1530677/kiss-o-matic"}, "edited": false, "score": 0, "creation_date": 1429149118, "post_id": 29659541, "comment_id": 47467285, "body": "@kiss-o-matic thanks you&#39;re right forget to do it.... sorry I&#39;m should take a nap"}], "answers": [{"owner": {"reputation": 117, "user_id": 4263347, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000299891986/picture?type=large", "display_name": "Philipp", "link": "https://stackoverflow.com/users/4263347/philipp"}, "is_accepted": false, "score": 0, "last_activity_date": 1429137527, "creation_date": 1429137527, "answer_id": 29662154, "question_id": 29659541, "link": "https://stackoverflow.com/questions/29659541/ok-button-is-not-working-on-qdialog/29662154#29662154", "title": "Ok button is not working on QDialog", "body": "<p>i'm not quite sure assuming u have connected everything. could be that the application is frozen.</p>\n\n<p>why not put the calculation in a different thread and connect the same signal that shows the dialog to thread pause.</p>\n\n<p>the signal of the ok pushbutten should be connected to close the dialog and thread resume...</p>\n"}], "owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429137527, "creation_date": 1429127407, "last_edit_date": 1429127511, "question_id": 29659541, "link": "https://stackoverflow.com/questions/29659541/ok-button-is-not-working-on-qdialog", "title": "Ok button is not working on QDialog", "body": "<p>I'm working on an app in C++/Qt I have used the design tool to design a Qdialog box.</p>\n\n<p>The Dialog box is defined as below.</p>\n\n<p>c++ file</p>\n\n<pre><code>#include \"dialogwarning.h\"\n#include \"ui_dialogwarning.h\"\n\nDialogWarning::DialogWarning(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::DialogWarning)\n{\n    ui-&gt;setupUi(this);\n}\n\nDialogWarning::~DialogWarning()\n{\n    delete ui;\n}\n</code></pre>\n\n<p>header file</p>\n\n<pre><code>#include &lt;QDialog&gt;\n\nnamespace Ui {\nclass DialogWarning;\n}\n\nclass DialogWarning : public QDialog\n{\n    Q_OBJECT\n\npublic:\n    explicit DialogWarning(QWidget *parent = 0);\n    ~DialogWarning();\n\nprivate:\n    Ui::DialogWarning *ui;\n};\n</code></pre>\n\n<p>The source use it as below:</p>\n\n<pre><code>WarningDialog = new DialogWarning();\nQLabel *label = new QLabel(\"File/Folder name already exist\", WarningDialog);\nlabel-&gt;setGeometry(WarningDialog-&gt;rect().center().x() - label-&gt;rect().width()/2,\n                   WarningDialog-&gt;rect().center().y() - label-&gt;rect().height()*2,\n                   WarningDialog-&gt;rect().width(),\n                   WarningDialog-&gt;rect().height());\nWarningDialog-&gt;exec();\n</code></pre>\n\n<p>I'm using exec instead of show because the exec primitive allow me to be stucked inside the dialog until a press on the \"Ok\" button.</p>\n\n<p>What is strange is that the OK button is not working. I do not need any specific behavior just wait the OK press to continue to run the code.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c", "multithreading", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429127210, "post_id": 29659458, "comment_id": 47458521, "body": "Normally worker threads produce data, which is then passed to the UI, which in turn displays that data."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429127997, "post_id": 29659458, "comment_id": 47458991, "body": "@David Heffernan So I guess they are just other threads. They are IOCP threads in fact."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1429128329, "post_id": 29659458, "comment_id": 47459157, "body": "It doesn&#39;t really matter. Try to avoid such direct coupling with the UI."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429132916, "post_id": 29659458, "comment_id": 47461803, "body": "@David Heffernan What do you mean by that? (I am new to GUI programming)."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1429133035, "post_id": 29659458, "comment_id": 47461886, "body": "Stop trying to get the worker thread to drive the UI thread. Have the worker thread update a non-visual data structure, and let the UI thread present it. Perhaps use message passing (not necessarily the Windows message queue) to pass data from worker. But the worker thread should not need to know anything about the UI. Keep the worker thread ignorant of the UI."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429133325, "post_id": 29659458, "comment_id": 47462050, "body": "@David Heffernan So when I receive some data from a socket, I place this data in some data structure, and then the UI thread gets this data and update the UI controls? But how will the UI thread knows that there are pending data?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429133450, "post_id": 29659458, "comment_id": 47462121, "body": "Various ways to do that. Posting a message via the message queue is one way. Setting an event another. Having the UI thread poll with a timer another. Kind of depends on your needs."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429133808, "post_id": 29659458, "comment_id": 47462312, "body": "@David Heffernan Also, if the worker thread needs to read data from a control, should I also have the UI thread place this data into some data structure, and then have the worker thread read it? And wouldn&#39;t this mean that I have to wait until the data is read? (because when displaying data to the UI controls I can just continue executing the rest of the code)"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429134046, "post_id": 29659458, "comment_id": 47462431, "body": "Have the worker ask for the data. Your goal is for the worker to know nothing about the UI."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429134251, "post_id": 29659458, "comment_id": 47462534, "body": "@David Heffernan I don&#39;t think that this approach is necessary for a small program such as mine. Is there a technical problem in having the worker thread access the UI controls directly?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429134654, "post_id": 29659458, "comment_id": 47462722, "body": "Decoupling like this is always better in my view. You disagree? Fine. That&#39;s your call."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429135317, "post_id": 29659458, "comment_id": 47463013, "body": "@David Heffernan I don&#39;t have any experience with this approach to disagree with you (this is the first time I heard of it). I just think that I don&#39;t need to implement it just because I have 5 places where I need to display something to the UI controls and 3 placed where I need to read something from the UI controls"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429180272, "post_id": 29659458, "comment_id": 47481786, "body": "How can you ask this question, outlining existing problems, and then turn around and say that you do not need a solution? David has provided the information you need, so go ahead and decouple the calculation kernel from your UI."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429182672, "post_id": 29659458, "comment_id": 47483453, "body": "@IInspectable Can you tell me why the approach of accessing the UI controls directly is wrong (in my case) so that I can follow the decoupling approach?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429182683, "post_id": 29659458, "comment_id": 47483463, "body": "In that case you may wish to <a href=\"http://stackoverflow.com/q/29012941/1889329\">read up on your approach</a>. At any rate, if you insist that you wish to shoot yourself in the foot, go right ahead. I&#39;m out."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429183580, "post_id": 29659458, "comment_id": 47484108, "body": "@IInspectable The accepted answer in that thread says that the UI manipulation code will ultimately be executed in the context of the UI thread. So I don&#39;t see a problem for this approach other the the ones I have mentioned in my question."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429183728, "post_id": 29659458, "comment_id": 47484226, "body": "The accepted answer says: <i>&quot;So only the owning thread should ever manipulate the HWND and its data in any way.&quot;</i>"}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429184041, "post_id": 29659458, "comment_id": 47484465, "body": "@IInspectable When I send a <code>WM_SETTEXT</code> message to change a Window title, this is not manipulating the <code>HWND</code>, correct? So does &quot;manipulate the HWND&quot; means something like destroying the Window?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429184940, "post_id": 29659458, "comment_id": 47485231, "body": "A <code>HWND</code> is an index into a kernel-controlled table of <code>WND</code> structures. The window title is part of the <code>WND</code> structure, as are parent and owner window, position, or the size. Any change to this structure is colloquially referred to as <i>manipulating the <code>HWND</code></i>. <code>WM_SETTEXT</code> works, due to a compatibility shim, that was implemented, because too many people like yourself insisted, that they knew what they were doing. If you absolutely must do the Wrong Thing, keep in mind that you are taking a dependency on a compatibility shim. Not entirely wise for new software."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429186006, "post_id": 29659458, "comment_id": 47486028, "body": "@IInspectable I have heard from many programmers contradictory statements about whether it is a bad idea to use <code>SendMessage()</code> from a worker thread or not. So I guess to be on the safe side, I will not use it. However, is there a problem in using <code>SendMessage()</code> to send a user-defined message?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1429186575, "post_id": 29659458, "comment_id": 47486468, "body": "You are reasoning at the wrong level of abstraction. Calling <code>SendMessage</code> from a thread is not, per se, wrong. What is wrong is baking knowledge of the UI into your worker threads. As @IInspectable says, go ahead and do that if you want. My advice is that you don&#39;t do so."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1429238838, "post_id": 29659458, "comment_id": 47515718, "body": "So long as the UI thread does not exit the message loop until the worker thread has exited, you shouldn&#39;t have any issues with deadlocking.  However, if by &quot;terminate the worker thread automatically&quot; you mean using TerminateThread, that&#39;s extremely dangerous and could cause a deadlock."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429238971, "post_id": 29659458, "comment_id": 47515753, "body": "@DavidHeffernan: I think we may be confusing the OP at this point.  Your advice <a href=\"http://stackoverflow.com/a/29577983/886887\">in this answer</a> seems to contradict your advice in these comments?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1429250848, "post_id": 29659458, "comment_id": 47519551, "body": "@Harry Here we are talking more about threading design within an app. In the answer there I was saying that SendMessage could be used and would work. I wasn&#39;t necessarily blessing it as a design choice. I also talked about cross process use."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1429272361, "post_id": 29659458, "comment_id": 47533284, "body": "@Harry Johnston What I meant is that because I am using <code>SendMessage()</code> in the worker threads, then if when closing the program I try to send a message to the worker threads asking them to close, this could cause a deadlock if a a worker thread is blocking on a <code>SendMessage()</code>, so I figured that if I did not closed the worker threads and just closed the program then the worker threads will also be closed automatically. (bad thing to do I know but better than <code>TerminateThread()</code>!)."}, {"owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1429272666, "post_id": 29659458, "comment_id": 47533507, "body": "@Harry Johnston Anyway, this does not matter anymore as I have come up with another solution: use <code>PostMessage()</code> instead of <code>SendMessage()</code> in the worker threads to send user-defined messages, and then wait on two events: one to be signaled when the user-defined message is processed, and the other to be signaled when closing the program (to break the &quot;<code>PostMessage()</code> block&quot; if any, and hence no deadlock will occur)."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1429316899, "post_id": 29659458, "comment_id": 47558525, "body": "Yes, that should work."}], "owner": {"reputation": 521, "user_id": 4582812, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7a1b31917b1c556fd426c990c21019b3?s=128&d=identicon&r=PG&f=1", "display_name": "user4582812", "link": "https://stackoverflow.com/users/4582812/user4582812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1429127143, "creation_date": 1429127143, "question_id": 29659458, "link": "https://stackoverflow.com/questions/29659458/ui-thread-and-deadlock", "title": "UI thread and deadlock", "body": "<p>I have a UI thread, and one or more worker threads. I want the worker thread to write to the UI controls, and read from the UI controls. The way I decided to implement it is by using <code>SendMessage()</code>.</p>\n\n<p>The worker thread starts when the main thread starts, and terminates when the main thread terminates (this could cause a deadlock if I tried to send a message (and wait) to the worker thread asking it to terminate and the worker thread issued a <code>SendMessage()</code> at the same time, but closing my program will terminate the worker thread automatically).</p>\n\n<p>In the UI thread, I will not wait for the worker thread to terminate (or waiting for anything for that matter), so I believe that no deadlock will occur.</p>\n\n<p><strong>My question is: is there a situation that I am missing where a deadlock could happen?</strong></p>\n\n<p>Note that I don't mind with the other problems caused by using <code>SendMessage()</code> instead of <code>PostMessage()</code>, such as blocking the worker thread for some time instead of just posting a message to the UI thread message queue and continue executing its code.</p>\n\n<hr>\n\n<p>This is the reason why I am using the synchronous <code>SendMessage()</code> in the worker thread and not the asynchronous <code>PostMessage()</code>:</p>\n\n<p>Say I have the following pseudo-code:</p>\n\n<pre><code>/* Thread A */\n\n// Get content of hEdit into str\n// DeleteFile(str)\n</code></pre>\n\n<p>If I use <code>PostMessage()</code>, then I could reach <code>DeleteFile(str)</code> before the content of <code>hEdit</code> are placed into <code>str</code>.</p>\n"}, {"tags": ["c++", "hevc"], "answers": [{"owner": {"reputation": 1212, "user_id": 1148474, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a295466f0105739320523cfb4f018cba?s=128&d=identicon&r=PG", "display_name": "thesaint", "link": "https://stackoverflow.com/users/1148474/thesaint"}, "is_accepted": false, "score": 4, "last_activity_date": 1429132367, "creation_date": 1429132367, "answer_id": 29661010, "question_id": 29659304, "link": "https://stackoverflow.com/questions/29659304/c-code-to-read-hevc-video-and-extract-frames/29661010#29661010", "title": "C++ code to read HEVC video and extract frames", "body": "<p>I recommend using FFMPEG. It's OpenSource and trivial to use.</p>\n\n<p>You find a copy&amp;paste example here:\n<a href=\"https://ffmpeg.org/doxygen/trunk/api-example_8c-source.html\" rel=\"nofollow\">https://ffmpeg.org/doxygen/trunk/api-example_8c-source.html</a></p>\n\n<p>What you want is shown in the function:</p>\n\n<pre><code>static void video_decode_example(const char *outfilename, const char *filename) {\n</code></pre>\n\n<p>Instead of <code>pgm_save</code> you would finally call <code>sws_scale</code> or use the raw frames directly. But normally you want to map them back from YUV to RGB.</p>\n\n<p>Please note that use of HVEC as well as H264 might incur a license fee of 5 mio. US dollars depending on your use-case. The 5 mio. are for H264 but I think HVEC has something similar (or will get it soon, so be aware).</p>\n"}], "owner": {"reputation": 1, "user_id": 2290742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88696fdc8b46ec5db3bcd1ae49c2d322?s=128&d=identicon&r=PG", "display_name": "user2290742", "link": "https://stackoverflow.com/users/2290742/user2290742"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 809, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439304295, "creation_date": 1429126658, "last_edit_date": 1429127259, "question_id": 29659304, "link": "https://stackoverflow.com/questions/29659304/c-code-to-read-hevc-video-and-extract-frames", "title": "C++ code to read HEVC video and extract frames", "body": "<p>Could any one help me how to read HEVC video and extract frames using c++.</p>\n\n<p>I tried using matlab , but matlab cannot read HEVC videos.</p>\n\n<p>Can anyone help me how to read HEVC videos using C++ in windows 7 and extract frames, so that I can perform some operation on these frames.</p>\n\n<p>Simple c++ code or  logic.</p>\n"}, {"tags": ["c++", "segmentation-fault", "queue", "iostream", "cout"], "comments": [{"owner": {"reputation": 18084, "user_id": 2700898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3RkV.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2700898/matt"}, "edited": false, "score": 0, "creation_date": 1429126090, "post_id": 29659013, "comment_id": 47457857, "body": "What will <code>que.front() &lt;= cut</code> be when <code>que</code> is empty? It seems you are assuming it will be false. Review this assumption. Either that, or perhaps you intended to put that condition into an <code>if</code> instead of a <code>while</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1429126534, "post_id": 29659013, "comment_id": 47458122, "body": "Also a style issue -- if you know you want to loop over all the elements of the vector, drop using separate variables that supposedly holds the the number of entries.  Instead, use the <code>vector::size()</code> function.  I&#39;m speaking of the <code>n</code> variable you are using in the second <code>for</code> loop -- there is no need for it at that point.  I know the program right now is simple, but using the vector to tell you its size is a habit you should get into."}, {"owner": {"reputation": 5, "user_id": 4470234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221a308d0f817a57940404f6e2a8d0e?s=128&d=identicon&r=PG&f=1", "display_name": "Andu", "link": "https://stackoverflow.com/users/4470234/andu"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1429126632, "post_id": 29659013, "comment_id": 47458200, "body": "@PaulMcKenzie - I will consider that in the future! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4470234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221a308d0f817a57940404f6e2a8d0e?s=128&d=identicon&r=PG&f=1", "display_name": "Andu", "link": "https://stackoverflow.com/users/4470234/andu"}, "edited": false, "score": 0, "creation_date": 1429126536, "post_id": 29659129, "comment_id": 47458124, "body": "I forgot to verify that inner loop indeed. I have just begun using STL and I&#39;m not used to verify every possible thing that would crash. Thank you!"}], "owner": {"reputation": 1185, "user_id": 1393971, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/2gqNV.jpg?s=128&g=1", "display_name": "Databyte", "link": "https://stackoverflow.com/users/1393971/databyte"}, "is_accepted": true, "score": 2, "last_activity_date": 1429126155, "creation_date": 1429126155, "answer_id": 29659129, "question_id": 29659013, "link": "https://stackoverflow.com/questions/29659013/unexpected-segmentation-error/29659129#29659129", "title": "Unexpected segmentation error", "body": "<p>You get an error because you call <code>front</code> while the queue is empty.\nJust check if the queue is empty in your inner loop:</p>\n\n<pre><code>#include &lt;queue&gt;\n#include &lt;queue&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n\nint main() {\n    int n, i, x, cut = 0;\n    queue&lt;int&gt; que;\n    vector&lt;int&gt; vec;\n\n    cin &gt;&gt; n;\n    for (i = 1; i &lt;= n; i++) {\n        cin &gt;&gt; x;\n        vec.push_back(x);\n    }\n\n    sort(vec.begin(), vec.end());\n    for (i = 0; i &lt; n; i++)\n        que.push(vec[i]);\n\n    while (!que.empty()) {\n        cout &lt;&lt; que.size() &lt;&lt; '\\n';\n        cut += que.front();\n        while (!que.empty() &amp;&amp; que.front() &lt;= cut )\n            que.pop();\n    }\n    return 0;\n}\n</code></pre>\n"}, {"owner": {"reputation": 719, "user_id": 3271508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a812a47fb5c834cc6ea8c530bb59561b?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Costa", "link": "https://stackoverflow.com/users/3271508/marco-costa"}, "is_accepted": false, "score": 0, "last_activity_date": 1429126329, "creation_date": 1429126329, "answer_id": 29659197, "question_id": 29659013, "link": "https://stackoverflow.com/questions/29659013/unexpected-segmentation-error/29659197#29659197", "title": "Unexpected segmentation error", "body": "<p>Your code is actually crashing on the line:</p>\n\n<pre><code>while (que.front() &lt;= cut)\n</code></pre>\n\n<p>Because you have a loop that may be true for the whole queue. The next line pops a value. At some point, your queue is empty and <code>que.front()</code> will crash.</p>\n"}], "owner": {"reputation": 5, "user_id": 4470234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221a308d0f817a57940404f6e2a8d0e?s=128&d=identicon&r=PG&f=1", "display_name": "Andu", "link": "https://stackoverflow.com/users/4470234/andu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 29659129, "answer_count": 2, "score": 0, "last_activity_date": 1429126345, "creation_date": 1429125801, "question_id": 29659013, "link": "https://stackoverflow.com/questions/29659013/unexpected-segmentation-error", "title": "Unexpected segmentation error", "body": "<p>I wrote a really simple program, but it's crashing when I try to write the size of a queue (created with STL). I have no idea why, please help.</p>\n\n<pre><code>#include &lt;queue&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n\nint main() {\n    int n, i, x, cut = 0;\n    queue&lt;int&gt; que;\n    vector&lt;int&gt; vec;\n\n    cin &gt;&gt; n;\n    for (i = 1; i &lt;= n; i++) {\n        cin &gt;&gt; x;\n        vec.push_back(x);\n    }\n\n    sort(vec.begin(), vec.end());\n    for (i = 0; i &lt; n; i++)\n        que.push(vec[i]);\n\n    while (!que.empty()) {\n        cout &lt;&lt; que.size() &lt;&lt; '\\n';\n        cut += que.front();\n        while (que.front() &lt;= cut)\n            que.pop();\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "directshow"], "answers": [{"comments": [{"owner": {"reputation": 599, "user_id": 1110776, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ed81cb5e0994a1ad0dc7caa978d644ac?s=128&d=identicon&r=PG", "display_name": "KevinA", "link": "https://stackoverflow.com/users/1110776/kevina"}, "edited": false, "score": 0, "creation_date": 1429126415, "post_id": 29659185, "comment_id": 47458052, "body": "OK, that makes things simpler.  Thank you"}], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1429126297, "creation_date": 1429126297, "answer_id": 29659185, "question_id": 29658969, "link": "https://stackoverflow.com/questions/29658969/source-filter-cbuffers-1-and-getdeliverybuffer/29659185#29659185", "title": "Source Filter cBuffers &gt; 1 and GetDeliveryBuffer", "body": "<p>The buffer won't be reused until the only reference to the buffer is the reference from its owning memory allocator. </p>\n\n<p>This means that in <code>DoBufferProcessingLoop</code> you get clean buffer, you do your thing filling it, then you pass it downstream. Then the magic continues and finally the buffer is ready for reuse when it is discarded or presented, and is not being used by anybody else. You don't need to do anything to ensure this, it happens on its own.</p>\n"}], "owner": {"reputation": 599, "user_id": 1110776, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ed81cb5e0994a1ad0dc7caa978d644ac?s=128&d=identicon&r=PG", "display_name": "KevinA", "link": "https://stackoverflow.com/users/1110776/kevina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 29659185, "answer_count": 1, "score": 0, "last_activity_date": 1429126297, "creation_date": 1429125636, "last_edit_date": 1429125886, "question_id": 29658969, "link": "https://stackoverflow.com/questions/29658969/source-filter-cbuffers-1-and-getdeliverybuffer", "title": "Source Filter cBuffers &gt; 1 and GetDeliveryBuffer", "body": "<p>I'm writing a source filter for <code>directshow</code>. The intel Media SDK H.264 Encoder requires <code>ALLOCATOR_PROPERTIES-&gt;cBuffer &gt; 1</code>.</p>\n\n<p>when in <code>DoBufferProcessingLoop</code> I get the buffer using  <code>GetDeliveryBuffer(&amp;pSample, NULL, NULL, 0)</code></p>\n\n<p>Do I need to do anything to make sure I get the next buffer, and I'm not overwriting the previous buffer?<br>\nI noticed the <code>pSample-&gt;AddRef()</code> in the sample encoder.  Do I have to do something similar when I <code>GetdeliveryBuffer</code> or in <code>FillBuffer</code>?</p>\n"}, {"tags": ["c++", "portable-executable"], "answers": [{"comments": [{"owner": {"reputation": 4933, "user_id": 1095495, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/65ff646226e0b868f8d0d232c3eb9089?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1095495/john"}, "edited": false, "score": 0, "creation_date": 1429127555, "post_id": 29659398, "comment_id": 47458715, "body": "What is everything I would have to fix to increase the size of the .text section"}], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1429126964, "creation_date": 1429126964, "answer_id": 29659398, "question_id": 29658925, "link": "https://stackoverflow.com/questions/29658925/c-unable-to-increase-size-of-text-section/29659398#29659398", "title": "C++ Unable to increase size of .text section", "body": "<p>You haven't changed where the sections load in memory, so yes, the following sections(s) will be loaded over the end your expanded .text section. </p>\n\n<p>What you're trying to do isn't possible in the general case. You can't insert anything into the middle of the executable because you need to change the load address of everything that follows. Changing the load address of a section will invalidate any pointers to that point to anything within the section, as they'll still point to the location in memory where the section used to be.</p>\n"}], "owner": {"reputation": 4933, "user_id": 1095495, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/65ff646226e0b868f8d0d232c3eb9089?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1095495/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 746, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429126964, "creation_date": 1429125516, "question_id": 29658925, "link": "https://stackoverflow.com/questions/29658925/c-unable-to-increase-size-of-text-section", "title": "C++ Unable to increase size of .text section", "body": "<p>I am attempting to increase the size of the .text section of an executable.</p>\n\n<pre><code>int main()\n{\n    DWORD dwSize,\n          dwFileOffset,\n          dwFileSize;\n\n    ifstream in;\n\n    BYTE* pData,\n        * pContents;\n\n    bool bAdjust = false;\n\n    DWORD dwDataPointer;\n\n    IMAGE_DOS_HEADER* dosHeader;\n\n    IMAGE_NT_HEADERS* ntHeader;\n\n    IMAGE_SECTION_HEADER* sectionHeader;\n\n    vector&lt;byte&gt; data;\n\n    vector&lt;byte&gt;::iterator dataIterator;\n\n\n    in.open(\"C:\\\\MineSweeper.exe\", ios::in | ios::binary);\n\n    if(in.is_open() == true)\n    {\n        in.seekg(0, ios::end);\n        dwFileSize = in.tellg();\n        in.seekg(0, ios::beg);\n\n        pContents = new BYTE[dwFileSize];\n        in.read((char*)pContents, dwFileSize);\n        in.close();\n\n\n        for(int i = 0; i &lt; dwFileSize; i++)\n            data.push_back(pContents[i]);\n\n\n        dosHeader = (IMAGE_DOS_HEADER*)&amp;data[0];\n\n        if (dosHeader-&gt;e_magic == IMAGE_DOS_SIGNATURE)\n        {\n            ntHeader = (IMAGE_NT_HEADERS*)((DWORD)&amp;data[0] + dosHeader-&gt;e_lfanew);\n\n            if(ntHeader-&gt;Signature == IMAGE_NT_SIGNATURE)\n            {\n                sectionHeader = IMAGE_FIRST_SECTION(ntHeader);\n\n                if(sectionHeader != NULL)\n                {\n                    for (unsigned int i = 0; i &lt; ntHeader-&gt;FileHeader.NumberOfSections; i++)\n                    {\n                        printf(\"In section %s %d/%d\\n\", sectionHeader-&gt;Name, i, ntHeader-&gt;FileHeader.NumberOfSections);\n\n                        if(bAdjust == true)\n                        {\n                            if(sectionHeader-&gt;PointerToRawData &gt; dwDataPointer)\n                            {\n                                sectionHeader-&gt;PointerToRawData += 0x1000;\n                                //sectionHeader-&gt;VirtualAddress += 0x1000;\n                            }\n                        }\n\n                        if(strcmp((char*)sectionHeader-&gt;Name, \".text\") == 0)\n                        {\n                            BYTE* pTemp;\n\n                            pTemp = new BYTE[0x1000];\n\n\n                            char* szStartMessage = \"This is the start\";\n\n                            for(int k = 0; k &lt; strlen(szStartMessage); k++)\n                                pTemp[k] = szStartMessage[k];\n\n                            for(int k = strlen(szStartMessage); k &lt; 0x1000; k++)\n                                pTemp[k] = k;\n\n\n                            data.insert(data.begin() + sectionHeader-&gt;PointerToRawData + sectionHeader-&gt;SizeOfRawData, pTemp, pTemp + 0x1000);\n\n                            dwDataPointer = sectionHeader-&gt;PointerToRawData;\n\n                            ntHeader-&gt;OptionalHeader.SizeOfCode += 0x1000;\n                            ntHeader-&gt;OptionalHeader.BaseOfData += 0x1000;\n                            sectionHeader-&gt;SizeOfRawData += 0x1000;\n\n                            bAdjust = true;\n                        }\n\n                        sectionHeader++;\n                    }\n                }\n\n                ofstream out;\n\n                out.open(\"C:\\\\test2.exe\", ios::out | ios::binary);\n\n                if(out.is_open() == true)\n                {\n                    out.write((char*)&amp;data[0], data.size());\n                    out.close();\n                }\n                else\n                    printf(\"Couldn't write\\n\");\n            }\n        }\n    }\n\n    delete[] pContents;\n\n    printf(\"Done\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>I read Minesweeper into a vector of bytes. I then insert 0x1000 bytes to the bottom of the .text section. I increase all the relevant offsets by 0x1000 including the pointers of the other sections that come after it.</p>\n\n<p>However, when I view the process in RAM. It seems to only show 1024 (0x400) of the bytes I inserted. The end seems to be truncated by whatever comes next.\nPossibly the .data section since its virtual address is 0x5000.</p>\n\n<p>How can I increase the size of the .text section?</p>\n"}, {"tags": ["c++", "c++11", "scanf"], "comments": [{"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 0, "creation_date": 1429125548, "post_id": 29658916, "comment_id": 47457475, "body": "you dont need <code>int d</code> here.  <code>%d</code> is a format specifier for scanf"}, {"owner": {"reputation": 5, "user_id": 4782515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14605df1cc157deb48266a9ed93ff8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Raid Force", "link": "https://stackoverflow.com/users/4782515/raid-force"}, "reply_to_user": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 0, "creation_date": 1429125625, "post_id": 29658916, "comment_id": 47457516, "body": "Srry i was trying some stuff with the another variable d. Just ignore it."}, {"owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "edited": false, "score": 0, "creation_date": 1429125843, "post_id": 29658916, "comment_id": 47457684, "body": "I see only one input: <code>&quot;%d\\n&quot;</code> says read an integer (<code>%d</code>), and <code>&amp;c</code> is where the integer is stored after it is read from the input. Where&#39;s the second input?"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 1, "creation_date": 1429125858, "post_id": 29658916, "comment_id": 47457697, "body": "A <code>\\n</code> in the <code>scanf</code> format string matches <i>whitespace</i>: any whitespace, not just a hit of the Enter key. When <b>you</b> hit the Enter key, <code>stdin</code>&#39;s line buffer is flushed. The <code>scanf</code> then parses the (first) <code>int</code>, gobbles up any whitespace after it, stops <i>before</i> the 2nd <code>int</code>, returns, then your code prints that first <code>int</code> and quits."}, {"owner": {"reputation": 5, "user_id": 4782515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14605df1cc157deb48266a9ed93ff8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Raid Force", "link": "https://stackoverflow.com/users/4782515/raid-force"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1429126020, "post_id": 29658916, "comment_id": 47457808, "body": "@IwillnotexistIdonotexist So any whitespace character will flush the line buffer?"}, {"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1429126040, "post_id": 29658916, "comment_id": 47457823, "body": "@IwillnotexistIdonotexist why don&#39;t you post this as an answer?"}, {"owner": {"reputation": 5, "user_id": 4782515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14605df1cc157deb48266a9ed93ff8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Raid Force", "link": "https://stackoverflow.com/users/4782515/raid-force"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1429126137, "post_id": 29658916, "comment_id": 47457892, "body": "Thanks for that was really confused about it. @IwillnotexistIdonotexist"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1429126188, "post_id": 29658916, "comment_id": 47457922, "body": "@RaidForce No; <code>\\n</code> in <code>scanf</code>&#39;s <i>format string</i> matches <code>\\n</code>, <code>\\t</code>, <code>\\r</code>, space and anything that counts as whitespace <i>in the input stream</i>. But only pressing the Enter key on your keyboard will flush the input line buffer (and allow the line to be seen by <code>scanf</code>)"}, {"owner": {"reputation": 5, "user_id": 4782515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14605df1cc157deb48266a9ed93ff8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Raid Force", "link": "https://stackoverflow.com/users/4782515/raid-force"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1429126468, "post_id": 29658916, "comment_id": 47458082, "body": "Ok got you. Thanks for helping. @IwillnotexistIdonotexist"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1429128146, "post_id": 29658916, "comment_id": 47459071, "body": "Why are you using <code>scanf</code> in C++ code? Then use <code>cout</code> afterwards. Perhaps using <code>cin</code> is the order of the day"}], "answers": [{"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": -1, "last_activity_date": 1429128025, "last_edit_date": 1429128025, "creation_date": 1429127569, "answer_id": 29659592, "question_id": 29658916, "link": "https://stackoverflow.com/questions/29658916/scanf-using-n-dont-know-what-does-it-do/29659592#29659592", "title": "Scanf using \\n. Don&#39;t know what does it do", "body": "<p>First of all, not mix C-style input/output (<code>sacnf</code>, <code>printf</code>, etc.) with C++style (<code>cout</code>, <code>cin</code>, stc.).\nConcerning your question, the problem is in the format line for <code>scanf</code> function. Change code to:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\n\nint main(){\n   int c,d;\n   scanf(\"%d\", &amp;c);\n   cout&lt;&lt;c&lt;&lt;endl;\n   return 0;\n}\n</code></pre>\n\n<p>and see the difference.</p>\n\n<p>The simplest explanation of why <code>\"%d\\n\"</code> require second input is:\n<code>scanf</code> use <code>%d</code> as instruction to find a number in the input stream, and additional <code>\\n</code> requires to wait for character with code equal to newline code, but <code>scanf</code> always stop reading input stream and stop working after reading newline character, so <code>scanf(\"%d\\n\", &amp;c)</code> needs two newline - the first to satisfy requirement of format line, and the second to be sure that input finished.</p>\n"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1429130090, "creation_date": 1429130090, "answer_id": 29660369, "question_id": 29658916, "link": "https://stackoverflow.com/questions/29658916/scanf-using-n-dont-know-what-does-it-do/29660369#29660369", "title": "Scanf using \\n. Don&#39;t know what does it do", "body": "<p>The <code>\\n</code> in a <code>scanf</code> format string means to read <em>any amount of <a href=\"http://en.wikipedia.org/wiki/Whitespace_character\" rel=\"nofollow\">whitespace</a></em>.</p>\n\n<p>So to ensure this action is carried out, it must keep reading until it reads a non-whitespace character.</p>\n\n<p>Another factor at play is that terminal input defaults to being line-buffered; so data is not available for <code>scanf</code> to check until you press Enter.</p>\n\n<p>The result of this is that you need to type in your number, plus another non-whitespace character, and press Enter, in order to satisfy <code>\"%d\\n\"</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 4782515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14605df1cc157deb48266a9ed93ff8a7?s=128&d=identicon&r=PG&f=1", "display_name": "Raid Force", "link": "https://stackoverflow.com/users/4782515/raid-force"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 29660369, "answer_count": 2, "score": 0, "last_activity_date": 1429130090, "creation_date": 1429125484, "last_edit_date": 1429125647, "question_id": 29658916, "link": "https://stackoverflow.com/questions/29658916/scanf-using-n-dont-know-what-does-it-do", "title": "Scanf using \\n. Don&#39;t know what does it do", "body": "<p>I am new to programming and I can't figure out what is happening. This is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\n\nint main(){\n   int c,d;\n   scanf(\"%d\\n\", &amp;c);\n   cout&lt;&lt;c&lt;&lt;endl;\n   return 0;\n}\n</code></pre>\n\n<p>I can't understand why it's taking two inputs and printing the first one out.</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1429125629, "post_id": 29658908, "comment_id": 47457521, "body": "<a href=\"http://en.wikipedia.org/wiki/False_sharing\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/False_sharing</a>  maybe?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1429125795, "post_id": 29658908, "comment_id": 47457651, "body": "Uh, I&#39;m uncertain, but is each thread ending up with it&#39;s own copy of <code>raster</code>?  That could be impressive overhead maybe.  What is <code>raster</code>? And what is <code>sh</code>?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1429125827, "post_id": 29658908, "comment_id": 47457669, "body": "Why are you using <code>unique_ptr&lt;std::thread[]&gt;</code> instead of <code>vector&lt;std::thread&gt;</code>?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1429126518, "post_id": 29658908, "comment_id": 47458116, "body": "Perhaps <a href=\"http://en.wikipedia.org/wiki/CUDA\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/CUDA</a> is worth a look"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1429127172, "post_id": 29658908, "comment_id": 47458498, "body": "You should also look into OpenMP. OMP is a great way to quickly and easily implement multithreading for something like this. It also leaves your code looking a lot like it did originally, therefore it is easier to change if you are still developing the code/algorithm."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1429125949, "post_id": 29659054, "comment_id": 47457758, "body": "I think you misunderstood what the question is"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1429128068, "post_id": 29659054, "comment_id": 47459029, "body": "The <i>standard</i> C++ language provides no support for using parallelism or amp.  Compiler specific <code>pragma</code>s need to be used.   You can take advantage of multiple cores in other languages.  Not sure what you are trying to communicate."}], "owner": {"reputation": 123, "user_id": 295321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb3a565a5290ac92978588432a05d9d7?s=128&d=identicon&r=PG", "display_name": "mg3", "link": "https://stackoverflow.com/users/295321/mg3"}, "is_accepted": false, "score": -2, "last_activity_date": 1429125935, "creation_date": 1429125935, "answer_id": 29659054, "question_id": 29658908, "link": "https://stackoverflow.com/questions/29658908/threads-seem-to-be-slowing-down-image-processing-c11/29659054#29659054", "title": "Threads seem to be slowing down image processing C++11", "body": "<p>in C++ you can take advantage of those cores using parallelism or use amp (accelerated massive parallelism).  My vote will be to do the latter.</p>\n\n<p>sample amp project: <a href=\"http://austin.codeplex.com/\" rel=\"nofollow\">http://austin.codeplex.com/</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/hh265137.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/hh265137.aspx</a>\n<a href=\"http://blogs.msdn.com/b/nativeconcurrency/archive/2012/08/30/learn-c-amp.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/nativeconcurrency/archive/2012/08/30/learn-c-amp.aspx</a></p>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1429126021, "post_id": 29659064, "comment_id": 47457810, "body": "So it is the false sharing of <code>raster</code> then?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1429126100, "post_id": 29659064, "comment_id": 47457865, "body": "@MooingDuck it could be.  It could also be that the problem is completely memory bound, and the threading just wastes time starting up threads and cleaning them up."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1429126216, "post_id": 29659064, "comment_id": 47457939, "body": "Actually, yeah. Memory bound makes a lot more sense then any theory I came up with.  That would mean your answer isn&#39;t right though."}, {"owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 1, "creation_date": 1429126428, "post_id": 29659064, "comment_id": 47458065, "body": "Ok this is good to know.  I was trying to write something generic.  Shader is an instance of std::function which I guess is bad.  Also I see how with small calculations the memory will be a limiting factor. Right now the Shader I was testing with just changes all the green pixels to full value.  Maybe if I did something more heavy like a convolution it would make a difference."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1429126729, "post_id": 29659064, "comment_id": 47458266, "body": "@MooingDuck I doubt it is memory bound: while there is a 100ms latency on a cache miss, access is pretty coherent and predictable after that.  The cache should &quot;get ahead&quot; of the code.  It is a possibility, but I doubt it.  Vectorization, contention and thread overhead seem more likely."}, {"owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 0, "creation_date": 1429126889, "post_id": 29659064, "comment_id": 47458360, "body": "But even if the way I am doing it is not the fastest then shouldn&#39;t the threaded method be faster than the unthreaded way in the else?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 1, "creation_date": 1429126933, "post_id": 29659064, "comment_id": 47458382, "body": "@chasep255 A special note on this is to make sure to pay attention to how he changed your single for loop into a nested for loop. While a nested for loop feels wrong, doing an extra divide and/or mod each loop iteration will hurt as those are incredibly expensive operations. Not to mention that this syntax will make it easier to understand how you are accessing data from the raster array and will make software prefetching more efficient."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 0, "creation_date": 1429126970, "post_id": 29659064, "comment_id": 47458401, "body": "@chasep255 yep.  Write <code>template&lt;class F&gt; std::function&lt; void(byte* data,size_t len, size_t x, size_t y) &gt; make_scanline_op( F&amp;&amp; )</code> that takes a per-pixel op, and executes it on a line of pixels.  Write a <code>scanline_shade</code> in your .cpp file, and <code>template&lt;class F&gt; void shade</code> in the header file simply calls <code>scanline_sharder( make_scanline_op(std::forward&lt;F&gt;(f)), blah... )</code>."}, {"owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 0, "creation_date": 1429127218, "post_id": 29659064, "comment_id": 47458526, "body": "Thats what I think I will do.  If I have 4 thread break the image into 4 rectangles."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 1, "creation_date": 1429127367, "post_id": 29659064, "comment_id": 47458591, "body": "@chasep255 yes, but give each thread as contiguous of memory as possible -- hence vertical split.  That is what I did above.  (if your image is tiled, you either multi-thread over each tile scanline (ok), or you give each thread an equal number of tiles (maybe better))"}, {"owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "edited": false, "score": 0, "creation_date": 1429127673, "post_id": 29659064, "comment_id": 47458797, "body": "It is one continuous chunk of memory."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 6, "last_activity_date": 1429126681, "last_edit_date": 1429126681, "creation_date": 1429125963, "answer_id": 29659064, "question_id": 29658908, "link": "https://stackoverflow.com/questions/29658908/threads-seem-to-be-slowing-down-image-processing-c11/29659064#29659064", "title": "Threads seem to be slowing down image processing C++11", "body": "<p>What you have done is maximized contention between threads.</p>\n\n<p>You want to minimize it.</p>\n\n<p>Threads should work on a scanline at a time (or more).  Divide your image into n blocks of roughly equal number of scanlines (left of image to right), and tell each thread to work on the nth block of scanlines.</p>\n\n<pre><code>std::vector&lt;std::thread&gt; threads;\nthreads.reserve(nthreads);\nfor(size_t i = 0; i &lt; nthreads; i++) {\n  size_t v_start = (h*i)/nthreads;\n  size_t v_end = (h*(i+1))/nthreads;\n  threads.push_back(std::thread([=]()\n  {   \n    for(size_t y = v_start; y &lt; v_end; ++y)\n    {   \n      for (size_t x = 0; x &lt; w; ++x) {\n        sh(raster[y * width + x], x, y);\n      }\n    }\n  }));\n}\nfor(auto&amp;&amp; thread:threads)\n  thread.join();\n</code></pre>\n\n<p>another approach is to grab the ppl (parallel patterns library) and use it.  It will dynamically balance the number of threads based on the current load and hardware specs, and might use thread pooling to reduce thread startup costs.</p>\n\n<p>A serious concern is your <code>Shader sh</code>.  You do not want to be calling anything as expensive as a function pointer (or even more expensive, a <code>std::function</code>) on a per-pixel basis.</p>\n\n<p>My general rule is that I write a \"for each pixel\" function that takes the pixel operation as a <code>F&amp;&amp;</code>, and pass it to a \"for each scanline\" function after wrapping the pixel-shader in an (in-header-file) scanline based operation.  The cost of indirection is then reduced to once per scanline.  In addition, the compiler may be able to optimize between pixel operations (say, doing SIMD), while a per-pixel call cannot be optimized this way.</p>\n\n<p>A final problem with your \"interleave\" solution is it makes it impossible for the compiler to vectorize your code.  Vectorization can easily give a 3-4x speedup.</p>\n"}, {"owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "is_accepted": false, "score": 0, "last_activity_date": 1429154990, "creation_date": 1429154990, "answer_id": 29664837, "question_id": 29658908, "link": "https://stackoverflow.com/questions/29658908/threads-seem-to-be-slowing-down-image-processing-c11/29664837#29664837", "title": "Threads seem to be slowing down image processing C++11", "body": "<p>Well that answer is pretty simple.  The threaded solution was infact faster.  It was just consuming more clock() time and the clock() function is not good for timing threads.</p>\n"}], "owner": {"reputation": 9942, "user_id": 2876799, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f4774e789da0e393d56db22b62b9d292?s=128&d=identicon&r=PG&f=1", "display_name": "chasep255", "link": "https://stackoverflow.com/users/2876799/chasep255"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 29659064, "answer_count": 3, "score": 0, "last_activity_date": 1429154990, "creation_date": 1429125465, "last_edit_date": 1429152039, "question_id": 29658908, "link": "https://stackoverflow.com/questions/29658908/threads-seem-to-be-slowing-down-image-processing-c11", "title": "Threads seem to be slowing down image processing C++11", "body": "<p>I am writing a function to change the values of the pixels in an image.  The way it works is by splitting up the task of shading each pixel into multiple threads.  For example if there are 4 threads then each one will shade every 4 pixels.  What I find strange is that the threaded approach is about a 1/10 of a second slower than doing it in a single loop. I can't figure out why this is since I have a quad core CPU and there is no real synchronization involved between the threads.  I would expect it to be about 4x faster minus a bit of overhead.  Am I doing something wrong here?</p>\n\n<p>Note that I set nthreads=1 to measure the single loop approach.  </p>\n\n<p>FYI raster is a pointer in the class which points to a dynamic array of pixels.</p>\n\n<pre><code>void RGBImage::shade(Shader sh, size_t sx, size_t sy, size_t ex, size_t ey)\n{\n    validate();\n    if(ex == 0)\n        ex = width;\n    if(ey == 0)\n        ey = height;\n\n    if(sx &lt; 0 || sx &gt;= width || sx &gt;= ex || ex &gt; width || sy &lt; 0 || sy &gt;= height || sy &gt;= ey\n            || ey &gt; height)\n        throw std::invalid_argument(\"Bounds Invalid\");\n\n    size_t w = ex - sx;\n    size_t h = ey - sy;\n    size_t nthreads = std::thread::hardware_concurrency();\n    if(nthreads &gt; MAX_THREADS)\n        nthreads = MAX_THREADS;\n    else if(nthreads &lt; 1)\n        nthreads = 1;\n\n    size_t load_per_thread = w * h / nthreads;\n    if(load_per_thread &lt; MIN_THREAD_LOAD)\n        nthreads = (w * h) / MIN_THREAD_LOAD;\n\n    clock_t start = clock();\n    if(nthreads &gt; 1)\n    {\n        std::unique_ptr&lt;std::thread[]&gt; threads(new std::thread[nthreads]);\n        for(size_t i = 0; i &lt; nthreads; i++)\n            threads[i] = std::thread([=]()\n            {   \n                for(size_t p = i; p &lt; (w * h); p += nthreads)\n                {   \n                    size_t x = sx + p % w;\n                    size_t y = sy + p / w;\n                    sh(raster[y * width + x], x, y);\n                }\n            });\n        for(size_t i = 0; i &lt; nthreads; i++)\n            threads[i].join();\n    }\n    else\n    {\n        for(size_t p = 0; p &lt; (w * h); ++p)\n        {\n            size_t x = sx + p % w;\n            size_t y = sy + p / w;\n            sh(raster[y * width + x], x, y);\n        }\n    }\n    std::cout &lt;&lt; ((float)(clock() - start) / CLOCKS_PER_SEC) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I took some of the advice ans changed up my function.</p>\n\n<pre><code>void RGBImage::shade(Shader sh, bool threads)\n{\n    validate();\n    clock_t c = clock();\n    if(threads)\n    {\n        int nthreads = std::thread::hardware_concurrency();\n        size_t pix = width * height;\n        if(nthreads &lt; 1)\n            nthreads = 1;\n        else if(nthreads &gt; MAX_THREADS)\n            nthreads = MAX_THREADS;\n        if(pix / nthreads &lt; MIN_THREAD_LOAD)\n            nthreads = pix / MIN_THREAD_LOAD;\n\n        size_t pix_per_threads = pix / nthreads;\n\n        std::unique_ptr&lt;std::thread[]&gt; t(new std::thread[nthreads]);\n        for(int i = 0; i &lt; nthreads; i++)\n        {\n            t[i] = std::thread([=]()\n            {\n                size_t offset = i * pix_per_threads;\n                size_t x = offset % width;\n                size_t y = offset / width;\n                sh(raster + offset, *this, x, y, \n                        i == nthreads - 1 ? pix_per_threads + (width * height) % nthreads : pix_per_threads);\n            });\n        }\n        for(int i = 0; i &lt; nthreads; i++)\n            t[i].join();\n    }\n    else\n    {\n        sh(raster, *this, 0, 0, width * height);\n    }\n    std::cout &lt;&lt; ((float)(clock() - c) / CLOCKS_PER_SEC) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Now it runs about 10x faster but the threaded version is still slower.</p>\n"}, {"tags": ["c++", "class", "c++11", "inheritance", "virtual-inheritance"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 3, "creation_date": 1429125427, "post_id": 29658777, "comment_id": 47457395, "body": "You seem to be coding as if <code>Fish</code> and <code>Amphibian</code> are subclasses of <code>Species</code>.  Your code says they are not.  Perhaps the nature of the English word &quot;species&quot; makes it unclear whether it&#39;s a <i>container of things</i> or a <i>particular thing</i>,"}], "answers": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1429129136, "last_edit_date": 1429129136, "creation_date": 1429128111, "answer_id": 29659768, "question_id": 29658777, "link": "https://stackoverflow.com/questions/29658777/why-wont-my-point-in-species-class-point-to-its-heterogeneous-class/29659768#29659768", "title": "Why won&#39;t my point in Species class point to its heterogeneous class", "body": "<p>The following code suggests that you see <code>Species</code> as something more general than <code>Animal</code>:  </p>\n\n<pre><code> Species* animal(&amp;kermit);\n animal-&gt;display();\n animal = &amp;nemo;\n</code></pre>\n\n<p>In this case you shall make sure the inheritance is declared, by changing the class definition to : </p>\n\n<pre><code>class Animal : Species {\n...\n};\n</code></pre>\n\n<p>Some remarks nevertheless: </p>\n\n<ul>\n<li>as all species have a name, whether vegetal or animal,  you could consider to move member <code>Animal::name_species</code> to class <code>Species</code>;</li>\n<li>the fact that the name of the class <code>Species</code> is in plural, that you have a   vector as member, and that every element of this member is displayed or deleted when the corresponding operation is called for the member tends however to suggest that Species is an aggregation of <code>Animals</code>.  It is then not clear how you add elements to your vector. </li>\n<li>Rather than using raw pointers in the aggregation, you could use shared_ptr instead.  You then don't need to delete the aniamls yourself. </li>\n</ul>\n"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1429128456, "creation_date": 1429128456, "answer_id": 29659889, "question_id": 29658777, "link": "https://stackoverflow.com/questions/29658777/why-wont-my-point-in-species-class-point-to-its-heterogeneous-class/29659889#29659889", "title": "Why won&#39;t my point in Species class point to its heterogeneous class", "body": "<p>Nothing inherits from class <code>Species</code> so conversion not possible using assignment technique.  </p>\n\n<p>There are no methods in <code>Species</code> to <strong>convert</strong> an <code>Animal</code> into a <code>Species</code>, so no luck there.  Compiler running out of ideas on how to convert <code>Animal</code> to <code>Species</code>.  </p>\n\n<p>Looks like <code>Species</code> is a <strong>container</strong> of <code>Animal</code>s.  You will need to supply a method that adds an <code>Animal</code> to the container inside <code>Species</code> or make the container public.  </p>\n\n<p>You want something like this:</p>\n\n<pre><code>Species s;\ns.animals.push_back(&amp;kermit);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4793480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f511613c680e0149573180bc7ad785?s=128&d=identicon&r=PG&f=1", "display_name": "Computeramateur", "link": "https://stackoverflow.com/users/4793480/computeramateur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1429134944, "creation_date": 1429125044, "last_edit_date": 1429134944, "question_id": 29658777, "link": "https://stackoverflow.com/questions/29658777/why-wont-my-point-in-species-class-point-to-its-heterogeneous-class", "title": "Why won&#39;t my point in Species class point to its heterogeneous class", "body": "<p>My code consists of a class animal and 2 sub classes inheriting animal charactistics - amphibian, and fish. The code compiles but the oorder of the deconstructors kills them from bottom to top but i want them to be killed from top to bottom as the display function order suggests-\nHere is my code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Animal{\npublic:\n    Animal(string name, string diet, bool queue)\n        : name_species(name), regime(diet), queue(queue){\n            if(name == \"\"){cout &lt;&lt; \"Error, name can't be empty!\" &lt;&lt; endl; }\n            else { cout &lt;&lt; \"A new animal\" &lt;&lt; endl; }}\n    virtual ~Animal(){ cout &lt;&lt; \"End of animal\" &lt;&lt; endl; }\n    virtual void display()const;\nprotected:\n    string name_species;\n    string regime;\n    bool queue;\n};\n\nvoid Animal::display() const{\n    cout &lt;&lt; \"I present the species \" &lt;&lt; name_species &lt;&lt; endl;\n}\n\nclass Fish : public Animal {\npublic:\n    Fish(string name, unsigned int scales, string diet = \"Carnivore\", bool  queue = true)\n        : Animal(name, diet, queue), scales(scales){ cout &lt;&lt; \"Add a fish\" &lt;&lt; endl; }\n    ~Fish(){ cout &lt;&lt; \"Fish species \" &lt;&lt; name_species &lt;&lt; \" is turned off. \" &lt;&lt; endl; }\n    void display() const override;\nprivate:\n    unsigned int scales;\n};\nvoid Fish::display() const {\n    Animal::display();\n    if(queue == true){cout &lt;&lt; \"I have a tail \"; }\n    else { cout &lt;&lt; \"I don't have a tail \"; } cout &lt;&lt; \"and i follow \" &lt;&lt; regime &lt;&lt;    endl;\n    cout &lt;&lt; \"I have \" &lt;&lt; scales &lt;&lt; \" scales\" &lt;&lt; endl;\n}\n\n\nclass Amphibian : public Animal {\npublic: Amphibian(string name, string diet, unsigned int claws = 4, bool queue = false)\n        : Animal(name, diet, queue), claws(claws){ cout &lt;&lt; \"Add an amphibian\" &lt;&lt; endl; }\n        void affiche() const;\n        ~Amphibian(){ cout &lt;&lt; \"Amphibian species \" &lt;&lt; name_species &lt;&lt; \" is turned off. \" &lt;&lt; endl; }\nprivate:\n        unsigned int claws;\n};\n\nvoid Amphibian::display() const {\n    Animal::display();\n    if(queue == true){ cout &lt;&lt; \"I have a tail \"; }\n    else { cout &lt;&lt; \"I don't have a tail \" ; } cout &lt;&lt; \"and i follow \" &lt;&lt; regime &lt;&lt; endl;\n    cout &lt;&lt; \"I have \" &lt;&lt; scales &lt;&lt; \" scales \" &lt;&lt; endl;\n}\n\nclass Species {\npublic:\n    virtual void display()const = 0;\n    virtual ~Species();\nprivate:\n    vector&lt;Animal*&gt; animals;\n};\n\nvoid Species::display()const{\n    for(size_t i(0); i &lt; animals.size(); ++i){\n        animals[i]-&gt;display(); }\n}\n\nSpecies::~Species(){\n    for(size_t i(0); i &lt; animals.size(); ++i){\n        delete animals[i];\n    }\n}\n\nint main()\n{\n    Amphibian kermit(\"lizard\", \"insects\");\n    Fish nemo(\"dolphin\", 6);\n    Fish sala(\"salamander\", 4);\n\n    Animal* animal(&amp;kermit);\n    animal-&gt;display();\n\n    animal = &amp;nemo;\n    animal-&gt;display();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "stdvector"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1429125211, "post_id": 29658749, "comment_id": 47457257, "body": "What are the benchmark results on your intended usage?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1429125260, "post_id": 29658749, "comment_id": 47457290, "body": "<i>I have heard that std::vector push_back is slower compared to vector[]</i> those two things don&#39;t do the same thing at all it makes no sense to compare how fast they are."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1429125327, "post_id": 29658749, "comment_id": 47457327, "body": "std::vector might be slower in debug builds (especially when using microsoft (dinkumware)). In release builds, there should be no difference."}], "answers": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": false, "score": 1, "last_activity_date": 1429125261, "creation_date": 1429125261, "answer_id": 29658849, "question_id": 29658749, "link": "https://stackoverflow.com/questions/29658749/standard-vectors-and-boost-vectors-push-back-which-is-faster/29658849#29658849", "title": "Standard vector&#39;s and boost vector&#39;s push_back: which is faster?", "body": "<p>vector is a simple concept.  There are many std implementations, a boost implementation, a MFC implementation, and a hundred thousand other implementations.  And they should all be pretty close to the same speed in the abstract.  </p>\n\n<p>In all of them, it makes little sense to compare <code>push_back</code> to <code>operator[]</code> since they do 100% different things.  One checks the capacity, maybe reallocates/moves, creates a new element on the back.  The other one simply accesses an element that already exists.  However, since <code>operator[]</code> doesn't actually <em>do</em> anything, it will always be faster.</p>\n"}], "owner": {"reputation": 617, "user_id": 2088022, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a1a6f18974e6dd66dd55dc370e3ab9f3?s=128&d=identicon&r=PG", "display_name": "vervenumen", "link": "https://stackoverflow.com/users/2088022/vervenumen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1429125261, "creation_date": 1429124943, "question_id": 29658749, "link": "https://stackoverflow.com/questions/29658749/standard-vectors-and-boost-vectors-push-back-which-is-faster", "title": "Standard vector&#39;s and boost vector&#39;s push_back: which is faster?", "body": "<p>How the performance of boost::container::vector compares to that of std::vector, and which factors have significant influence on it?</p>\n\n<p>In particular, I have heard that std::vector push_back is slower compared to vector[]. How does this compare in boost?</p>\n"}, {"tags": ["c++", "constructor", "initialization", "initializer-list"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1429125127, "post_id": 29658714, "comment_id": 47457210, "body": "Well, almost; default initialisation of an <code>int</code> won&#39;t set it to <code>0</code>; it&#39;ll leave it with an unspecified value."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1429125460, "post_id": 29658714, "comment_id": 47457422, "body": "@LightningRacisinObrit Well, not almost then. The bold statement that every member is initialized before the body is entered is simply wrong."}, {"owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "edited": false, "score": 0, "creation_date": 1429125677, "post_id": 29658714, "comment_id": 47457556, "body": "So, what would the accurate statement be?"}], "owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1429125106, "answer_count": 0, "score": 1, "last_activity_date": 1429129578, "creation_date": 1429124835, "last_edit_date": 1429129578, "question_id": 29658714, "link": "https://stackoverflow.com/questions/29658714/initializing-in-the-constructor-member-initializer-list-vs-initializing-inside-t", "closed_reason": "Duplicate", "title": "Initializing in the constructor member initializer list vs initializing inside the constructor body", "body": "<p>Somebody told me that if you initialize the data members inside the constructor body, they are essentially being overwritten on their previously initialized values. The previous initialization apparently occurs in the constructor initializer list just like the constructor of a superclass subobject does if you don't do it yourself. </p>\n\n<p>Is this true?</p>\n\n<p>If a class has an int data member, and you initialize it (to 10) inside the body of the constructor, it first gets initialized to a default value i.e 0 before it enters the constructor body and then it gets ovewritten to 10 is it?</p>\n"}, {"tags": ["c++", "rest", "visual-studio-2012", "nuget-package"], "answers": [{"comments": [{"owner": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "edited": false, "score": 0, "creation_date": 1429131368, "post_id": 29660508, "comment_id": 47460904, "body": "it&#39;s empty. when clicking &#39;edit&#39; I see empty list and &quot;Inherit from parent...&quot; is checked. what supposed to be there?"}, {"owner": {"reputation": 132, "user_id": 1251001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/be1522bcdf4142c7b1c7fe17f690d002?s=128&d=identicon&r=PG", "display_name": "Goshutu", "link": "https://stackoverflow.com/users/1251001/goshutu"}, "reply_to_user": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "edited": false, "score": 1, "creation_date": 1429132059, "post_id": 29660508, "comment_id": 47461318, "body": "You have to add the directory where the &quot;cpprest&quot; folder is. That way, the compiler would know where to search for cpprest/http_client.h. The #include &lt;xxxxxx.h&gt; searches in the additional include directories, and the #include &quot;xxxxx.h&quot; searches in the current project directory only."}, {"owner": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "edited": false, "score": 0, "creation_date": 1429208445, "post_id": 29660508, "comment_id": 47502844, "body": "thanks. it actually helped. but then I ran into other problem. thanks anyway."}, {"owner": {"reputation": 422, "user_id": 3817656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/258Vl.jpg?s=128&g=1", "display_name": "Srijan Chaudhary", "link": "https://stackoverflow.com/users/3817656/srijan-chaudhary"}, "edited": false, "score": 0, "creation_date": 1590469027, "post_id": 29660508, "comment_id": 109682817, "body": "In case a user is using Qt as a development environment, you need to add the path to the &quot;cpprestsdk_xx-XX&quot; in your .pro file for both &quot;include&quot; and &quot;lib&quot; folder of &quot;cpprestsdk&quot; or to your properties file in case you are using any other development env."}], "owner": {"reputation": 132, "user_id": 1251001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/be1522bcdf4142c7b1c7fe17f690d002?s=128&d=identicon&r=PG", "display_name": "Goshutu", "link": "https://stackoverflow.com/users/1251001/goshutu"}, "is_accepted": true, "score": 5, "last_activity_date": 1429130527, "creation_date": 1429130527, "answer_id": 29660508, "question_id": 29658672, "link": "https://stackoverflow.com/questions/29658672/cannot-open-include-file-cpprest-http-client-h/29660508#29660508", "title": "Cannot open include file: &#39;cpprest/http_client.h&#39;", "body": "<p>Check if you have set up the include directories for the headers. You can do it under project properties -> Configuration Properties -> C/C++ -> General -> Additional Include Directories.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 5553618, "user_type": "registered", "profile_image": "https://graph.facebook.com/933652159989974/picture?type=large", "display_name": "Seung-Min Jung", "link": "https://stackoverflow.com/users/5553618/seung-min-jung"}, "edited": false, "score": 0, "creation_date": 1475097436, "post_id": 39756949, "comment_id": 66811622, "body": "and also you have to notice that they are not offering static libraries. therefore, your application is needed to be set &#39;MD/MDd&#39;."}], "owner": {"reputation": 113, "user_id": 5553618, "user_type": "registered", "profile_image": "https://graph.facebook.com/933652159989974/picture?type=large", "display_name": "Seung-Min Jung", "link": "https://stackoverflow.com/users/5553618/seung-min-jung"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094094, "creation_date": 1475094094, "answer_id": 39756949, "question_id": 29658672, "link": "https://stackoverflow.com/questions/29658672/cannot-open-include-file-cpprest-http-client-h/39756949#39756949", "title": "Cannot open include file: &#39;cpprest/http_client.h&#39;", "body": "<p>I have faced the same problems like you. \nEven i set my project properties manually, i could see linking errors.</p>\n\n<p>And i could find an article on their official forum.</p>\n\n<p><a href=\"https://casablanca.codeplex.com/discussions/644534\" rel=\"nofollow\">https://casablanca.codeplex.com/discussions/644534</a></p>\n\n<blockquote>\n  <p>Yes, we've removed VS 2012 binaries from the package. I recommend\n  trying out VS 2015 community, which can be downloaded for free from:\n  <a href=\"https://www.visualstudio.com/downloads/download-visual-studio-vs\" rel=\"nofollow\">https://www.visualstudio.com/downloads/download-visual-studio-vs</a>.</p>\n</blockquote>\n\n<p>I have tested it on the same way on VS2015 community IDE.\nThe package is working perfectly.</p>\n"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6430604"}, "is_accepted": false, "score": 6, "last_activity_date": 1475831610, "creation_date": 1475831610, "answer_id": 39913630, "question_id": 29658672, "link": "https://stackoverflow.com/questions/29658672/cannot-open-include-file-cpprest-http-client-h/39913630#39913630", "title": "Cannot open include file: &#39;cpprest/http_client.h&#39;", "body": "<p>you have to include this path :</p>\n\n<p>C:\\YourProject\\packages\\cpprestsdk.v140.windesktop.msvcstl.dyn.rt-dyn.2.8.0\\build\\native\\include</p>\n\n<p>and:</p>\n\n<p>C:\\YourProject\\packages\\cpprestsdk.v140.windesktop.msvcstl.dyn.rt-dyn.2.8.0\\lib</p>\n\n<p>I've got the same issue after I added the NuGet package. The include and lib folders are not linked automatically as the description says.</p>\n"}], "owner": {"reputation": 2141, "user_id": 2880391, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/4a2b0b7a8bc67ffcb8090a2f0b50b5f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2880391", "link": "https://stackoverflow.com/users/2880391/user2880391"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8325, "favorite_count": 0, "accepted_answer_id": 29660508, "answer_count": 3, "score": 3, "last_activity_date": 1531462778, "creation_date": 1429124670, "last_edit_date": 1429125261, "question_id": 29658672, "link": "https://stackoverflow.com/questions/29658672/cannot-open-include-file-cpprest-http-client-h", "title": "Cannot open include file: &#39;cpprest/http_client.h&#39;", "body": "<p>I'm trying to run c++ windows application using casablanca 'c++ rest sdk' for REST requests.\nI've created new 'CLR Empty Project' (visual studio 2012) and added new item - 'Windows Form'. added some code and was able to see a form when running the projects.\nnow, I have installed the c++ rest sdk using NuGet, as the instructions tell. it all went successfully. the problem is that in order to use the 'c++ rest sdk' I've added these:</p>\n\n<pre><code>#include &lt;cpprest/http_client.h&gt;\n#include &lt;cpprest/filestream.h&gt; \n</code></pre>\n\n<p>and it doesn't find those files.\nI'm getting</p>\n\n<pre><code>fatal error C1083: Cannot open include file: 'cpprest/http_client.h': No   such file or directory\n</code></pre>\n\n<p>Project screenshot:\n<img src=\"https://i.stack.imgur.com/by8dr.png\" alt=\"project screenshot\"></p>\n\n<p>thanks!</p>\n"}, {"tags": ["c++", "opencv", "cuda", "tegra"], "answers": [{"owner": {"reputation": 326, "user_id": 4500198, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a15a842a58c015610ac68e55ed7b4560?s=128&d=identicon&r=PG", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/4500198/alex-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1429128258, "creation_date": 1429128258, "answer_id": 29659825, "question_id": 29658561, "link": "https://stackoverflow.com/questions/29658561/jetson-tk1-opencv4tegra-linker-errors/29659825#29659825", "title": "Jetson TK1 / OpenCV4Tegra Linker errors", "body": "<p>Turns out I needed <code>pkg-config --libs opencv</code> after my files in the make file.</p>\n"}], "owner": {"reputation": 326, "user_id": 4500198, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a15a842a58c015610ac68e55ed7b4560?s=128&d=identicon&r=PG", "display_name": "Alex Smith", "link": "https://stackoverflow.com/users/4500198/alex-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "closed_date": 1429565335, "accepted_answer_id": 29659825, "answer_count": 1, "score": 0, "last_activity_date": 1429128258, "creation_date": 1429124265, "question_id": 29658561, "link": "https://stackoverflow.com/questions/29658561/jetson-tk1-opencv4tegra-linker-errors", "closed_reason": "Duplicate", "title": "Jetson TK1 / OpenCV4Tegra Linker errors", "body": "<p>I've got a program that compiles / runs fine on my machine.  I just picked up a Nvidia Jetson TK1 to try running it on that.  I flashed to the latest version of linux4tegra, installed cuda and opencv per the instruction <a href=\"http://developer.download.nvidia.com/embedded/L4T/r21_Release_v3.0/l4t_quick_start_guide.txt\" rel=\"nofollow\">here</a> and <a href=\"http://developer.download.nvidia.com/embedded/OpenCV/L4T_21.1/README.txt\" rel=\"nofollow\">here</a>.  I'm getting linker errors whenever I try to run my make file:</p>\n\n<pre><code>(.text+0x94): undefined reference to `cv::VideoCapture::VideoCapture(std::string const&amp;)'\n(.text+0xb2): undefined reference to `cv::VideoCapture::isOpened() const'\n(.text+0xcc): undefined reference to `cv::VideoCapture::~VideoCapture()'\n(.text+0x108): undefined reference to `cv::namedWindow(std::string const&amp;, int)'\n(.text+0x146): undefined reference to `vtable for cv::VideoCapture'\n(.text+0x14a): undefined reference to `vtable for cv::VideoCapture'\n</code></pre>\n\n<p>I already symlinked a few cuda SO's, but I can't figure out where these are coming from.</p>\n\n<p>My makefile looks like:</p>\n\n<pre><code>g++ `pkg-config --libs opencv` ...\n</code></pre>\n\n<p>Package config returns:</p>\n\n<pre><code>$ pkg-config --libs opencv\n/usr/lib/libopencv_calib3d.so /usr/lib/libopencv_contrib.so /usr/lib/libopencv_core.so /usr/lib/libopencv_features2d.so /usr/lib/libopencv_flann.so /usr/lib/libopencv_gpu.so /usr/lib/libopencv_highgui.so /usr/lib/libopencv_imgproc.so /usr/lib/libopencv_legacy.so /usr/lib/libopencv_ml.so /usr/lib/libopencv_objdetect.so /usr/lib/libopencv_photo.so /usr/lib/libopencv_stitching.so /usr/lib/libopencv_superres.so /usr/lib/libopencv_ts.a /usr/lib/libopencv_video.so /usr/lib/libopencv_videostab.so /usr/lib/libopencv_esm_panorama.so /usr/lib/libopencv_facedetect.so /usr/lib/libopencv_imuvstab.so /usr/lib/libopencv_tegra.so /usr/lib/libopencv_vstab.so -lcufft -lnpps -lnppi -lnppc -lcudart -lrt -lpthread -lm -ldl  \n</code></pre>\n\n<p>Any ideas?  My initial though was header / SO mismatch but since these all came from nvidia in the same package I think that's unlikely.</p>\n"}, {"tags": ["c++", "templates", "opengl"], "comments": [{"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1429123964, "post_id": 29658389, "comment_id": 47456494, "body": "If it is not compile-time, it will never work as a template parameter - use a normal (run-time) parameter for the function."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "reply_to_user": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 0, "creation_date": 1429124130, "post_id": 29658389, "comment_id": 47456605, "body": "Is there any way to have something similar to <code>using</code> so that I don&#39;t have to write the function parameters each time?"}], "answers": [{"comments": [{"owner": {"reputation": 97521, "user_id": 565635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7b4b3e7c9ac68b7d2c93ad02d0b9c79d?s=128&d=identicon&r=PG", "display_name": "orlp", "link": "https://stackoverflow.com/users/565635/orlp"}, "edited": false, "score": 0, "creation_date": 1429124871, "post_id": 29658670, "comment_id": 47457052, "body": "Sorry, I was wrong about the function pointers - was just about to undo my edit."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1429124910, "post_id": 29658670, "comment_id": 47457071, "body": "The issue is that <code>glGenBuffers</code> is not necessarily a type of TBuilder. They are defined as <code>#define glGenBuffers GLEW_GET_FUN(__glewGenBuffers)</code>, and their internal types are all different. For example, <code>glGenBuffers</code> is <code>PFNGLGENBUFFERSPROC</code> and <code>glDeleteBuffers</code> is <code>PFNGLDELETEBUFFERSPROC</code> and I can&#39;t convert between pointers to those types and TBuilder."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1429125230, "post_id": 29658670, "comment_id": 47457270, "body": "@user975989 that sounds like a completely different problem than what you describe in the OP?  From my readings of the source, the types are fixed, but different for the two cases.  So use a different types for the two cases?  Is it the problem that they are sometimes pointers, and sometimes not?"}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1429125671, "post_id": 29658670, "comment_id": 47457553, "body": "Sorry, that&#39;s my fault for miscommunicating. Is there a way that I can deduce the type without having to type a typedef for each type?"}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1429125397, "last_edit_date": 1429125397, "creation_date": 1429124663, "answer_id": 29658670, "question_id": 29658389, "link": "https://stackoverflow.com/questions/29658389/how-to-pass-pointer-to-glew-function-to-a-template/29658670#29658670", "title": "How to pass pointer to GLEW function to a template?", "body": "<pre><code>using TBuilder = void(*)(GLsizei, GLuint *);\n\ntemplate&lt;std::size_t N, TBuilder* TConstructor, TBuilder* TFreer&gt;\nstruct OGLWrapper{\n  std::array&lt;GLuint, N&gt; data;\n  void gen(){\n    (*TConstructor)(N, &amp;data[0]);\n  }\n  ~OGLWrapper(){\n    (*TFreer)(N, &amp;data[0]);\n  }\n};\n\nusing VBO = OGLWrapper&lt;1, &amp;glGenBuffers, &amp;glDeleteBuffers&gt;;\n</code></pre>\n\n<p>live example</p>\n\n<p>We store pointers to the function pointers.  The function pointers are only updated when you call <code>glewInit()</code>.  So if you use your VBO before that point, it will do UB, but what do you expect?</p>\n\n<p>One thing you may have to be careful about is calling convention.  But so long as your <code>typedef</code> for the <code>TBuilder</code> is accurate, you will be good.</p>\n\n<p>A final concern is that your destructor runs even if <code>gen</code> is not called.  Possibly you should run <code>gen</code> in the constructor of the class?  Or record if <code>gen</code> has been called with a <code>bool</code>.</p>\n"}, {"owner": {"reputation": 97521, "user_id": 565635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7b4b3e7c9ac68b7d2c93ad02d0b9c79d?s=128&d=identicon&r=PG", "display_name": "orlp", "link": "https://stackoverflow.com/users/565635/orlp"}, "is_accepted": false, "score": 0, "last_activity_date": 1429125683, "last_edit_date": 1429125683, "creation_date": 1429125351, "answer_id": 29658877, "question_id": 29658389, "link": "https://stackoverflow.com/questions/29658389/how-to-pass-pointer-to-glew-function-to-a-template/29658877#29658877", "title": "How to pass pointer to GLEW function to a template?", "body": "<p>Here's a solution that uses macros to construct the wrappers, but usage is macro-free:</p>\n\n<pre><code>#define CREATE_GLEW_WRAPPER(name, N, construct, freer) \\\n    struct name {                                      \\\n        std::array&lt;GLuint, N&gt; data;                    \\\n        void gen() {                                   \\\n            construct(N, &amp;data[0]);                    \\\n        }                                              \\\n                                                       \\\n        ~name() {                                      \\\n            freer(N, &amp;data[0]);                        \\\n        }                                              \\\n    };                                               \n\nnamespace gl {\n    CREATE_GLEW_WRAPPER(VBO, 1, glGenBuffers, glDeleteBuffers)\n}\n\n#undef CREATE_GLEW_WRAPPER\n</code></pre>\n"}], "owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1429127390, "creation_date": 1429123690, "last_edit_date": 1429127390, "question_id": 29658389, "link": "https://stackoverflow.com/questions/29658389/how-to-pass-pointer-to-glew-function-to-a-template", "title": "How to pass pointer to GLEW function to a template?", "body": "<p>I'm trying to write a simple wrapper for OpenGL that holds buffers. Since there are many buffers, each with a specialized generate and delete function, I was hoping to use a template so that I can create these wrappers easily. The end goal is to have something like this:</p>\n\n<pre><code>gl::VBO v;\nv.gen();\n</code></pre>\n\n<p>I have tried to do the following:</p>\n\n<pre><code>using TBuilder = void(*)(GLsizei, GLuint *);\n\ntemplate&lt;std::size_t N, TBuilder TConstructor, TBuilder TFreer&gt;\nstruct OGLWrapper{\n    std::array&lt;GLuint, N&gt; data;\n    void gen(){\n        TConstructor(N, &amp;data[0]);\n    }\n    ~OGLWrapper(){\n        TFreer(N, &amp;data[0]);\n    }\n};\n\nusing VBO = OGLWrapper&lt;1, glGenBuffers, glDeleteBuffers&gt;;\n</code></pre>\n\n<p>The problem is that <code>glGenBuffers</code> and <code>glDeleteBuffers</code> are not compile time constants. They are unusable until <code>glewInit()</code> is called. I was hoping there would be a way to delay lookup of these functions until a VBO is generated. It is entirely possible that templates cannot be used in this situation, but I am hoping there is a smart way of wrapping my OpenGL resources.</p>\n\n<hr>\n\n<p>After reading the answers, I got as far as this:</p>\n\n<pre><code>using TBuilder = decltype(&amp;glGenBuffers);\nusing TFreer = decltype(&amp;glDeleteBuffers);\n\ntemplate&lt;std::size_t N, TBuilder TCons, TFreer TDes&gt;\nstruct OGLWrapper{\n    std::array&lt;GLuint, N&gt; data;\n    OGLWrapper():data{}{}\n    void gen(){\n        (*TCons)(N, &amp;data[0]);\n    }\n    ~OGLWrapper(){\n        (*TDes)(N, &amp;data[0]);\n    }\n};\n\nusing VBO = OGLWrapper&lt;1, &amp;glGenBuffers, &amp;glDeleteBuffers&gt;;\nusing VAO = OGLWrapper&lt;1, &amp;glGenVertexArrays, &amp;glDeleteVertexArrays&gt;;\n</code></pre>\n\n<p>Which is nice, but I was hoping to remove the TBuilder and TFreer typedefs. My concern is generalization, since I am unsure of if other functions use these signatures. Is there a way to make the template deduce these types?</p>\n"}, {"tags": ["c++", "qt", "opengl", "qglwidget"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 2608975, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e604a83ebeb1b45cd4caffbb7580c2e2?s=128&d=identicon&r=PG", "display_name": "BKreger", "link": "https://stackoverflow.com/users/2608975/bkreger"}, "edited": false, "score": 0, "creation_date": 1429126160, "post_id": 29658924, "comment_id": 47457903, "body": "I know how the connect works what im asking is how to move the widget from the frame buffer to a matrix, QGLWidget does have a direct method for accessing pixels like QImage does"}, {"owner": {"reputation": 69, "user_id": 2608975, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e604a83ebeb1b45cd4caffbb7580c2e2?s=128&d=identicon&r=PG", "display_name": "BKreger", "link": "https://stackoverflow.com/users/2608975/bkreger"}, "edited": false, "score": 0, "creation_date": 1429162221, "post_id": 29658924, "comment_id": 47470948, "body": "So if I were to retrieve the pixels of the open gl objects is there a function I can call for that? I know I may not be going about this the most efficient or easiest way but thats what the professor is asking for."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 69, "user_id": 2608975, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e604a83ebeb1b45cd4caffbb7580c2e2?s=128&d=identicon&r=PG", "display_name": "BKreger", "link": "https://stackoverflow.com/users/2608975/bkreger"}, "edited": false, "score": 0, "creation_date": 1429183550, "post_id": 29658924, "comment_id": 47484091, "body": "@BKreger I&#39;ve added a link to some Qt/OpenGL examples in my answer. Let me just stress again, you&#39;re looking for &quot;pixels&quot; but that is like asking what the best way to take your goldfish for a walk is. Try understanding the examples, then if my answer doesn&#39;t contain enough to get you going lets talk again."}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1429183242, "last_edit_date": 1495540245, "creation_date": 1429125516, "answer_id": 29658924, "question_id": 29658381, "link": "https://stackoverflow.com/questions/29658381/changing-brightness-of-qglwidget/29658924#29658924", "title": "changing brightness of QGLWidget", "body": "<p>You'll need to setup a custom <code>slot</code> for your <code>QGLWidget</code> which typically would involve making a custom class that inherits from <code>QGLWidget</code> with the added functionality of the additional <code>slot</code>.</p>\n\n<p>So let's say that you define that as:</p>\n\n<pre><code>public slot:\n    void foo(int value);\n</code></pre>\n\n<p>You need to <code>connect</code> <code>foo</code> to one of your <code>QSlider</code>'s signals: <a href=\"http://doc.qt.io/qt-5/qabstractslider.html#signals\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qabstractslider.html#signals</a> Let's say you have access to  <code>QSlider bar</code> in your <code>QGLWidget</code> specialization, then you could do this in the constructor:</p>\n\n<pre><code>connect(&amp;bar, &amp;QSignal::valueChanged, this, &amp;foo);\n</code></pre>\n\n<p>This connection will cause <code>foo</code> to be called every time the <code>bar.valueChanged</code> signal is called. For a more in depth example of signals and slots with a <code>QSlider</code> you can look here: <a href=\"http://doc.qt.io/qt-5/qtwidgets-widgets-sliders-example.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtwidgets-widgets-sliders-example.html</a></p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>You seem to have a misunderstanding of what a <code>QGLWidget</code> is it does not have \"pixels\". It has OpenGL Objects. After updating the OpenGL Object you can call <a href=\"http://doc.qt.io/qt-5/qopenglwidget.html#paintGL\" rel=\"nofollow noreferrer\"><code>paintGL</code></a> to force your specialization of the <code>QGLWidget</code> to redraw.</p>\n\n<p>All that to say, what you're trying to ask here is: <strong>\"How do I redraw an OpenGL Object with another color?\"</strong></p>\n\n<p>You need to provide more information in your question before I can answer that. In the simplest case you could just call <a href=\"https://www.opengl.org/sdk/docs/man2/xhtml/glColor.xml\" rel=\"nofollow noreferrer\"><code>glColor</code></a> to accomplish this. If that's your case you will probably find this link helpful: <a href=\"https://stackoverflow.com/q/8315809/2642059\">glColor not actually changing OpenGL&#39;s color</a></p>\n\n<p>In the more in-depth case such as situations where you're ignoring a OpenGL object's color you might be able to add a black polygon right in front of the camera and change it's transparency in <code>foo</code>. Having this draw to the color buffer but not the depth buffer could be enough, though with more complex obscuring shaders you might have to put in some additional work.</p>\n\n<p>Though I think these examples still use a <code>QGLWidget</code>, instead of a <code>QOpenGLWidget</code>, they may be helpful to you in understanding how to work with OpenGL via Qt: <a href=\"http://doc.qt.io/qt-5/examples-widgets-opengl.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/examples-widgets-opengl.html</a></p>\n"}], "owner": {"reputation": 69, "user_id": 2608975, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e604a83ebeb1b45cd4caffbb7580c2e2?s=128&d=identicon&r=PG", "display_name": "BKreger", "link": "https://stackoverflow.com/users/2608975/bkreger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429183242, "creation_date": 1429123674, "question_id": 29658381, "link": "https://stackoverflow.com/questions/29658381/changing-brightness-of-qglwidget", "title": "changing brightness of QGLWidget", "body": "<p>i have a an QGLWidget that I am trying to adjust the brightness of using a slider widget however im running into trouble trying to get my head around how I would go about doing this. </p>\n\n<p>I know that I need to move the pixels from the frame buffer to a matrix so I can make the needed adjustments but im not understanding how to do this.</p>\n"}, {"tags": ["c++", "struct", "stl", "stack"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1429123791, "post_id": 29658355, "comment_id": 47456382, "body": "You&#39;re trying to push a pointer onto your stack and it doesn&#39;t accept pointers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1429124405, "post_id": 29658355, "comment_id": 47456782, "body": "Some hints: Always pair a new with a delete (or delegate to a smart pointer), never store pointers in a container (unless you need polymorphism ), do not fool around and get informed. (BTW: your German is awful)"}], "answers": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1429123806, "creation_date": 1429123806, "answer_id": 29658426, "question_id": 29658355, "link": "https://stackoverflow.com/questions/29658355/c-who-storing-the-struct-in-the-stack-stl/29658426#29658426", "title": "C++ Who storing the struct in the stack (STL)", "body": "<p>You declared your stack to contain <code>adresse</code>s, but are trying to push the <em>address</em> of an <code>adresse</code>.</p>\n"}, {"owner": {"reputation": 376, "user_id": 4518353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-M91XiIDCrOs/AAAAAAAAAAI/AAAAAAAAAUA/PPxc0V1dFC8/photo.jpg?sz=128", "display_name": "Abhishek Vasisht", "link": "https://stackoverflow.com/users/4518353/abhishek-vasisht"}, "is_accepted": false, "score": 0, "last_activity_date": 1429123821, "creation_date": 1429123821, "answer_id": 29658432, "question_id": 29658355, "link": "https://stackoverflow.com/questions/29658355/c-who-storing-the-struct-in-the-stack-stl/29658432#29658432", "title": "C++ Who storing the struct in the stack (STL)", "body": "<p>First of all to do what you are doing you would need a stack like so, </p>\n\n<pre><code>stack&lt;adresse*&gt; Stack1;\n</code></pre>\n\n<p>If you want to use your own stack then push it like so </p>\n\n<pre><code>Stack1.push(*temp);\n</code></pre>\n"}, {"owner": {"reputation": 973, "user_id": 4777513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/inkg3.jpg?s=128&g=1", "display_name": "Ekleog", "link": "https://stackoverflow.com/users/4777513/ekleog"}, "is_accepted": false, "score": 0, "last_activity_date": 1429123891, "creation_date": 1429123891, "answer_id": 29658449, "question_id": 29658355, "link": "https://stackoverflow.com/questions/29658355/c-who-storing-the-struct-in-the-stack-stl/29658449#29658449", "title": "C++ Who storing the struct in the stack (STL)", "body": "<p>When writing <code>Stack1.push(temp)</code>, <code>temp</code> is a <code>adresse *</code>, while <code>Stack1.push</code> expects an <code>adresse const &amp;</code> argument.</p>\n\n<p>This is what the compiler is trying to tell you.</p>\n\n<p>To fix this issue, just do not store <code>temp</code> as a pointer to the object but rather directly as the object.</p>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 5, "last_activity_date": 1429124216, "last_edit_date": 1429124216, "creation_date": 1429123903, "answer_id": 29658453, "question_id": 29658355, "link": "https://stackoverflow.com/questions/29658355/c-who-storing-the-struct-in-the-stack-stl/29658453#29658453", "title": "C++ Who storing the struct in the stack (STL)", "body": "<pre><code>adresse temp;\ntemp.info = eingabe;\nStack1.push(temp); // maybe `std::move(temp)` instead of `temp`\n</code></pre>\n\n<p>instead of the <code>new</code> and stuff you did with <code>temp</code>.  <code>new</code> is not required here.  <code>[0]</code> is not required.  Pointers are not required.</p>\n\n<p>In general, <code>new</code> means \"create a copy of this whose lifetime I will manage manually, and whose access is slower\".  It returns a pointer to the thing you <code>new</code>ed.  If you don't need fine-grained control over the lifetime of what you are creating, create it on the stack instead.</p>\n\n<p>In some modern C++ coding styles, all calls to <code>new</code> outside of specific low level resource management functions are discouraged (like <code>make_shared</code> or <code>make_unique</code> or <code>boost::variant</code> or the like).  But you still need to understand pointers.</p>\n\n<p>You created a pointer to some data, and you tried to store it in a container that expects values of some data.  The container wanted a reference to an existing chunk of data which it would copy: you gave it a pointer to some data instead.  These are not the same type, so the compiler gave you an error saying there was no way to automatically convert from one type to the other.</p>\n"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 0, "last_activity_date": 1429124110, "creation_date": 1429124110, "answer_id": 29658510, "question_id": 29658355, "link": "https://stackoverflow.com/questions/29658355/c-who-storing-the-struct-in-the-stack-stl/29658510#29658510", "title": "C++ Who storing the struct in the stack (STL)", "body": "<p>You have a few problems.</p>\n\n<p>First your header <code>&lt;stdio.h&gt;</code> is a <code>C</code> header, in <code>C++</code> use <code>&lt;cstdio&gt;</code>.</p>\n\n<p>Next you are creating a pointer to an object and trying to push that pointer onto your stack. No need to make a pointer, just define the object directly.</p>\n\n<p>Finally using <code>eingabe[0]</code> only gives you the first letter of the word stored in <code>eingabe</code>.</p>\n\n<p>Try the following:</p>\n\n<pre><code>//#include &lt;stdio.h&gt; // not this in C++\n#include &lt;cstdio&gt; // use this instead\n#include &lt;stack&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nstruct adresse\n{\n\n    string info;\n};\n\nint main()\n{\n\n    string eingabe;\n    stack&lt;adresse&gt; Stack1;\n\n    cout &lt;&lt; \"Bitte Ausdruck eingeben: \" &lt;&lt; endl;\n    getline(cin, eingabe);\n\n    // no need to make pointers just use\n    // adresse as if it were built in\n    adresse temp;\n    temp.info = eingabe; // [0] will only give you the first letter\n    Stack1.push(temp);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4256914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35b88c1f0b5de485f7d054c80a406fc?s=128&d=identicon&r=PG&f=1", "display_name": "tsid", "link": "https://stackoverflow.com/users/4256914/tsid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 29658510, "answer_count": 5, "score": -2, "last_activity_date": 1429124354, "creation_date": 1429123601, "last_edit_date": 1495534210, "question_id": 29658355, "link": "https://stackoverflow.com/questions/29658355/c-who-storing-the-struct-in-the-stack-stl", "title": "C++ Who storing the struct in the stack (STL)", "body": "<p>I have a Problem like this: \n<a href=\"https://stackoverflow.com/questions/8126955/c-storing-structs-in-a-stack/29655319#29655319\">C++: Storing structs in a stack</a></p>\n\n<p>My Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stack&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nstruct adresse{\n\n    string info;\n};\n\nint main(){\n\n    string eingabe;\n    stack&lt;adresse&gt; Stack1;\n\n    cout &lt;&lt; \"Bitte Ausdruck eingeben: \" &lt;&lt; endl;\n    getline( cin, eingabe);\n\n    adresse* temp;\n    temp = new adresse;\n    temp-&gt;info = eingabe[0];\n    Stack1.push(temp);\n\n    return 0;  \n}\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>reference to type 'const value_type'(aka 'const adresse') could not bind to an \nlvalue of type 'adresse *'Stack1.push(temp);\n</code></pre>\n\n<p>What is wrong?</p>\n\n<p>Thanks</p>\n\n<p>Tommy</p>\n"}, {"tags": ["c++", "c", "matrix-multiplication", "blas"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429125637, "post_id": 29658349, "comment_id": 47457527, "body": "That&#39;s a runtime error about values in <code>A</code>? What does <code>initM(A,B,C)</code> do? How does it know what size the arrays are?"}, {"owner": {"reputation": 645, "user_id": 4034274, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23ec632d96dcede141d4d110a49bcd01?s=128&d=identicon&r=PG&f=1", "display_name": "Puneet S. Chauhan", "link": "https://stackoverflow.com/users/4034274/puneet-s-chauhan"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1429159240, "post_id": 29658349, "comment_id": 47469971, "body": "@WeatherVane  i have added the initM function body, size of array is substituted at preprocessing phase!"}], "answers": [{"comments": [{"owner": {"reputation": 645, "user_id": 4034274, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23ec632d96dcede141d4d110a49bcd01?s=128&d=identicon&r=PG&f=1", "display_name": "Puneet S. Chauhan", "link": "https://stackoverflow.com/users/4034274/puneet-s-chauhan"}, "edited": false, "score": 1, "creation_date": 1429159857, "post_id": 29659878, "comment_id": 47470154, "body": "tried your suggestion ; now i am getting <b>On entry to SGEMM parameter number 13 had an illegal value</b>!"}], "owner": {"reputation": 3112, "user_id": 2707697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9da9a865b63faae8438d2d57c1c71b9?s=128&d=identicon&r=PG&f=1", "display_name": "ztik", "link": "https://stackoverflow.com/users/2707697/ztik"}, "is_accepted": true, "score": 2, "last_activity_date": 1429167319, "last_edit_date": 1429167319, "creation_date": 1429128425, "answer_id": 29659878, "question_id": 29658349, "link": "https://stackoverflow.com/questions/29658349/on-entry-to-sgemm-parameter-number-8-had-an-illegal-value/29659878#29659878", "title": "On entry to SGEMM parameter number 8 had an illegal value", "body": "<p>The error message is produced by <code>sgemm</code> and not <code>cblas_sgemm</code>. The number 8 parameter of <code>sgemm</code> is :</p>\n\n<blockquote>\n  <p>SUBROUTINE SGEMM(TRANSA, TRANSB, M, N, K, ALPHA, A, <strong>LDA</strong>, B, LDB, BETA, C, LDC)</p>\n</blockquote>\n\n<p>The C function cblas_sgemm is just a wrapper calling the Fortran routine sgemm. Bascally it converts some arguments passed from <code>by value</code> to <code>by reference</code>. Also, the Fortran routine is missing \"RowMajor\" parameter.</p>\n\n<p>Since you are using \"RowMajor\" storage, you should use the number of columns as the leading dimension of the matrices.</p>\n\n<p>Even if I can not test it, I suggest:</p>\n\n<pre><code>cblas_sgemm(CblasRowMajor, CblasNoTrans,CblasNoTrans,A_R, B_C, A_C, 1.0, A, A_C, B, B_C, 0.0, C, B_C);\n</code></pre>\n\n<p>Also, you can refer to GSL <a href=\"https://www.gnu.org/software/gsl/manual/html_node/GSL-CBLAS-Examples.html\" rel=\"nofollow\">example</a>.</p>\n"}, {"owner": {"reputation": 293, "user_id": 2857475, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/92fae34f531d4a8b63ed4995001de268?s=128&d=identicon&r=PG&f=1", "display_name": "Puneet S. Chauhan", "link": "https://stackoverflow.com/users/2857475/puneet-s-chauhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1429162193, "last_edit_date": 1429162193, "creation_date": 1429161844, "answer_id": 29665967, "question_id": 29658349, "link": "https://stackoverflow.com/questions/29658349/on-entry-to-sgemm-parameter-number-8-had-an-illegal-value/29665967#29665967", "title": "On entry to SGEMM parameter number 8 had an illegal value", "body": "<p>Slight modification to ctheo's answer:</p>\n\n<pre><code>A[A_R][A_C] X B[B_R][B_C]=C[A_R][B_C] //if (A_C==B_R)\n</code></pre>\n\n<p>so, on setting the last parameter as <strong>LDC</strong>=B_C , the code works fine</p>\n\n<pre><code>cblas_sgemm(CblasRowMajor, CblasNoTrans,CblasNoTrans,A_R, B_C,A_C,1.0, A,A_C, B, B_C,0.0, C,   B_C  );\n</code></pre>\n"}], "owner": {"reputation": 645, "user_id": 4034274, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23ec632d96dcede141d4d110a49bcd01?s=128&d=identicon&r=PG&f=1", "display_name": "Puneet S. Chauhan", "link": "https://stackoverflow.com/users/4034274/puneet-s-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6617, "favorite_count": 2, "accepted_answer_id": 29659878, "answer_count": 2, "score": 3, "last_activity_date": 1456656458, "creation_date": 1429123587, "last_edit_date": 1495540882, "question_id": 29658349, "link": "https://stackoverflow.com/questions/29658349/on-entry-to-sgemm-parameter-number-8-had-an-illegal-value", "title": "On entry to SGEMM parameter number 8 had an illegal value", "body": "<p>I am trying to explore cblas library ; so i tried 2d matrix multiplication using Level3 <strong>cblas_sgemm</strong> routine.</p>\n\n<pre><code>C=(alpha)* A * B + (beta) * C\n;; where aplha=1 &amp; beta=0\n</code></pre>\n\n\n\n<pre><code>#define TYPE float\n#define A_R 3\n#define A_C 2\n#define B_R 2\n#define B_C 3\n\n    int main()\n    {\n        TYPE *A=NULL,*B=NULL,*C=NULL;\n        if(A_C != B_R)\n                {\n                printf(\"\\nA(%d,%d) X B(%d,%d) not possible\\n\",A_R,A_C,B_R,B_C);\n                exit(1);\n                }\n\n        A=(TYPE*)malloc(A_R*A_C*sizeof(TYPE));\n        B=(TYPE*)malloc(B_R*B_C*sizeof(TYPE));\n        C=(TYPE*)malloc(A_R*B_C*sizeof(TYPE));\n        initM(A,B,C);//initializes matrix\n        cblas_sgemm(CblasRowMajor, CblasNoTrans,CblasNoTrans,A_R, B_C,A_C, 1.0, A,A_R, B, B_R,0.0, C, A_C);\n        //multiply(A,B,C);\n\n        printf(\"\\n%f\\n\",C[ (A_R*B_C)-1]);\n}\n</code></pre>\n\n<p>I compiled my program using static libraries :</p>\n\n<pre><code>gcc mxm_blas.c -L/CBLAS/lib/ -lcblas -L/BLAS/ -lblas -I/CBLAS/include/ -lgfortran\n</code></pre>\n\n<p>Now running the code, i get :</p>\n\n<blockquote>\n  <p><strong>On entry to SGEMM parameter number  8 had an illegal value</strong></p>\n</blockquote>\n\n<p>It seems to me that trouble is with the way of declaring array! Most of the examples  <a href=\"https://stackoverflow.com/questions/3747720/cblas-dgemm-works-only-if-beta-is-power-of-two\">i have seen</a> declare array as:</p>\n\n<pre><code>float A[100][100],b[100][100],C[100][100];\n</code></pre>\n\n<p>Is this the cause of the error or there is a programmatic error? Is malloc based matrix multiplication via the sgemm API not possible?</p>\n\n<p><strong>UPDATE:</strong> initM initializes the matrix :</p>\n\n<pre><code>void initM(TYPE* A,TYPE* B,TYPE* C)\n{\nlong int i,j;\n\nj=A_R*A_C;\nfor(i=0;i&lt;j;i++) A[i]=2;\n\nj=B_R*B_C;\nfor(i=0;i&lt;j;i++)  B[i]=3;\n\nj=A_R*B_C;\nfor(i=0;i&lt;j;i++)  C[i]=0;\n }\n</code></pre>\n"}, {"tags": ["c++", "matlab", "visual-studio-2013", "call", "mex"], "comments": [{"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 0, "creation_date": 1429125003, "post_id": 29658286, "comment_id": 47457124, "body": "Not an answer, but maybe try <a href=\"http://stackoverflow.com/q/8552580/2778484\">stackoverflow.com/q/8552580/2778484</a>"}], "answers": [{"owner": {"reputation": 301, "user_id": 3673819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46c92d06d6159ce4352c0ed80eb1c11?s=128&d=identicon&r=PG&f=1", "display_name": "mlnthr", "link": "https://stackoverflow.com/users/3673819/mlnthr"}, "is_accepted": false, "score": 0, "last_activity_date": 1445116358, "creation_date": 1445116358, "answer_id": 33191649, "question_id": 29658286, "link": "https://stackoverflow.com/questions/29658286/set-up-c-compiler-for-matlab-r2011b/33191649#33191649", "title": "Set up c++ compiler for matlab R2011b", "body": "<p>I am currently experiencing the same issue, maybe this could help. The error is (on Matlab2014a terminal): </p>\n\n<pre><code>&gt; mex -setup c\nError using mex\nNo supported compiler or SDK was found. For options, visit\nhttp://www.mathworks.com/support/compilers/R2014a/win64.\n</code></pre>\n\n<p>When you actually follow that link, it shows that only Professional versions of Visual Studio can be linked to Matlab, such as \"Microsoft Visual C++ 2013 Professional\". Since you and I have \"Community\" versions of Visual Studio I think that's where the problem is.</p>\n\n<p>I am now trying to get a standalone version of SDK but it seems like it does not want to install and I don't know why...</p>\n\n<p>Hope you have solved your problem since your post.</p>\n"}], "owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 454, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445116358, "creation_date": 1429123396, "question_id": 29658286, "link": "https://stackoverflow.com/questions/29658286/set-up-c-compiler-for-matlab-r2011b", "title": "Set up c++ compiler for matlab R2011b", "body": "<p>I have Matlab R2011b and want to call some C++ code from it. I guess I need some mex-commands for that, and install a c++ compiler that Matlab will work with. I have Windows 7, 64bit, MS Visual Studio Community 2013 (Version 12.0) and am not sure which MS SDK; it says under \"C:\\Program Files (x86)\\Microsoft SDKs\\Windows\" I see several folders, v7.0A, v7.1A, v8.0, v8.0A, v8.1 and v8.1A. The  <a href=\"http://de.mathworks.com/support/compilers/R2011b/win64.html\" rel=\"nofollow\">list of compilers supported by Matlab</a> tells me that Matlab R2011b supports the c++ compilers  \"Microsoft Visual C++ 2010 Express with Microsoft Windows SDK 7.1\" and \"Microsoft Windows SDK 7.1\". </p>\n\n<p>When I type \"mex -setup\" in Matlab and have it locate installed compilers, it says \"No supported SDK or compiler was found on this computer. \" </p>\n\n<p>Does it mean that:</p>\n\n<ul>\n<li>Matlab R2011b only supports MS Visual Studio 2010 Express, but not MS Visual Studio Community 2013 (which I could have figured, if it were downward compatible)</li>\n<li>it does not find the compiler; then where is it - I know the .exe to my Visual Studio, but is this also the compiler?</li>\n<li>I need the the SDK 7.1 - then do I have to uninstall the others? When I search in my list of Software (through the control panel) for \"SDK\", I see only \"Microsoft .NET Framework 4.5 SDK\", \"Microsoft .NET Framework 4.5.1 SDK\" and \"Microsoft Silverlight 5 SDK\"</li>\n<li>anything else?\nThanks. </li>\n</ul>\n"}, {"tags": ["c++", "compilation", "beagleboneblack"], "answers": [{"owner": {"reputation": 269, "user_id": 2561033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1834831121/picture?type=large", "display_name": "Martin G", "link": "https://stackoverflow.com/users/2561033/martin-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1429194381, "last_edit_date": 1495535046, "creation_date": 1429194381, "answer_id": 29677723, "question_id": 29658229, "link": "https://stackoverflow.com/questions/29658229/beaglebone-black-blacklib-programlibrary-compilation/29677723#29677723", "title": "BeagleBone Black + BlackLib- program+library compilation", "body": "<p>I have posted the answer to <a href=\"https://stackoverflow.com/questions/27771076/how-to-compile-blacklib-c/29677607#29677607\">how to compile blacklib (c++)</a> with headline <em>COMPLETE GUIDE how to compile BLACKLIB directly on BEAGLEBONE BLACK (rev C) running ANGSTROM</em></p>\n"}, {"owner": {"reputation": 1, "user_id": 4832704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dad08856308accceedb28a62579854cd?s=128&d=identicon&r=PG", "display_name": "ashitosh", "link": "https://stackoverflow.com/users/4832704/ashitosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1429989075, "creation_date": 1429989075, "answer_id": 29869531, "question_id": 29658229, "link": "https://stackoverflow.com/questions/29658229/beaglebone-black-blacklib-programlibrary-compilation/29869531#29869531", "title": "BeagleBone Black + BlackLib- program+library compilation", "body": "<p>you need to add header file unistd.h to BlackUART.h  </p>\n"}], "owner": {"reputation": 269, "user_id": 2561033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1834831121/picture?type=large", "display_name": "Martin G", "link": "https://stackoverflow.com/users/2561033/martin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1794, "favorite_count": 0, "accepted_answer_id": 29677723, "answer_count": 2, "score": 0, "last_activity_date": 1429989075, "creation_date": 1429123215, "last_edit_date": 1495535046, "question_id": 29658229, "link": "https://stackoverflow.com/questions/29658229/beaglebone-black-blacklib-programlibrary-compilation", "title": "BeagleBone Black + BlackLib- program+library compilation", "body": "<p>I need to compile library with my program (just main.cpp). The library is BlackLib 2.0 (there is already <a href=\"https://stackoverflow.com/questions/27771076/how-to-compile-blacklib-c\">how to compile blacklib (c++)</a>, but I am not able to reproduce the result ... maybe I am misinterpreting something).</p>\n\n<p>Anyway, 3 important points:</p>\n\n<p>1) main.cpp includes : </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;BlackCore.h&gt;\n#include &lt;BlackDef.h&gt;\n#include &lt;BlackErr.h&gt;\n#include &lt;BlackLib.h&gt;\n#include &lt;BlackUART.h&gt;\n</code></pre>\n\n<p>2) all files (library files - .cpp &amp; .h ... and main.cpp) are in 1 folder: </p>\n\n<pre><code>/home/martin/uart/uart_5#\n</code></pre>\n\n<p>3) command to compile the files (directly on BeagleBone Black)</p>\n\n<pre><code>g++ *.cpp -o main -std=c++11\n</code></pre>\n\n<p>Problems :</p>\n\n<pre><code>BlackI2C.cpp: In member function 'bool BlackLib::BlackI2C::close()':\nBlackI2C.cpp:133:13: error: '::close' has not been declared\nBlackI2C.cpp: In member function 'bool BlackLib::BlackI2C::writeLine(uint8_t*, size_t)':\nBlackI2C.cpp:287:13: error: '::write' has not been declared\nBlackI2C.cpp: In member function 'bool BlackLib::BlackI2C::readLine(uint8_t*, size_t)':\nBlackI2C.cpp:302:13: error: '::read' has not been declared\nBlackSPI.cpp: In member function 'bool BlackLib::BlackSPI::close()':\nBlackSPI.cpp:213:13: error: '::close' has not been declared\nBlackUART.cpp: In member function 'bool BlackLib::BlackUART::close()':\nBlackUART.cpp:166:13: error: '::close' has not been declared\nBlackUART.cpp: In member function 'bool BlackLib::BlackUART::read(char*, size_t)':\nBlackUART.cpp:226:12: error: '::read' has not been declared\nBlackUART.cpp: In member function 'std::string BlackLib::BlackUART::read()':\nBlackUART.cpp:244:24: error: '::read' has not been declared\nBlackUART.cpp: In member function 'bool BlackLib::BlackUART::write(char*, size_t)':\nBlackUART.cpp:262:12: error: '::write' has not been declared\nBlackUART.cpp: In member function 'bool BlackLib::BlackUART::write(std::string)':\nBlackUART.cpp:276:12: error: '::write' has not been declared\nBlackUART.cpp: In member function 'bool BlackLib::BlackUART::transfer(char*, char*, size_t, uint32_t)':\nBlackUART.cpp:293:12: error: '::write' has not been declared\nBlackUART.cpp:303:23: error: 'usleep' was not declared in this scope\nBlackUART.cpp:309:12: error: '::read' has not been declared\nBlackUART.cpp: In member function 'std::string BlackLib::BlackUART::transfer(std::string, uint32_t)':\nBlackUART.cpp:324:12: error: '::write' has not been declared\nBlackUART.cpp:334:23: error: 'usleep' was not declared in this scope\nBlackUART.cpp:339:24: error: '::read' has not been declared\nBlackUART.cpp: In member function 'BlackLib::BlackUART&amp; BlackLib::BlackUART::operator&lt;&lt;(std::string&amp;)':\nBlackUART.cpp:960:12: error: '::write' has not been declared\nBlackUART.cpp: In member function 'BlackLib::BlackUART&amp; BlackLib::BlackUART::operator&gt;&gt;(std::string&amp;)':\nBlackUART.cpp:977:24: error: '::read' has not been declared\nmain.cpp:4:23: fatal error: BlackCore.h: No such file or directory\ncompilation terminated.\n</code></pre>\n\n<p>I am a bit desparate. The <a href=\"http://blacklib.yigityuce.com/faq.html\" rel=\"nofollow noreferrer\">BackLib FAQ</a> doesnt help either.</p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1429122836, "post_id": 29657962, "comment_id": 47455810, "body": "It&#39;s hard to see what&#39;s going on in your code. Please post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 3417657, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/GynoP.png?s=128&g=1", "display_name": "NefariousOctopus", "link": "https://stackoverflow.com/users/3417657/nefariousoctopus"}, "edited": false, "score": 0, "creation_date": 1429123395, "post_id": 29658122, "comment_id": 47456151, "body": "Sadly, that seems to be the right answer. So &quot;copy the whole class&quot; it is."}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1429122898, "creation_date": 1429122898, "answer_id": 29658122, "question_id": 29657962, "link": "https://stackoverflow.com/questions/29657962/c-template-specialization-by-templated-class/29658122#29658122", "title": "C++ - Template specialization by templated class", "body": "<p>You can partially specialize the entire class template:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct sortedArray&lt;smartPtr&lt;T&gt;&gt; {\n    void insert(const smartPtr&lt;T&gt;&amp; object) {\n        ....\n    }\n\n    // everything else\n};\n</code></pre>\n\n<p>Or you could <em>explicitly</em> specialize a single method:</p>\n\n<blockquote>\n  <p>An explicit specialization may be declared for a function template, a class template, a member of a class template <strong>or a member template</strong>.</p>\n</blockquote>\n\n<p>as in:</p>\n\n<pre><code>template &lt;&gt;\nvoid sortedArray&lt;smartPtr&lt;int&gt;&gt;::insert(const smartPtr&lt;int&gt;&amp; object) {\n    ...\n}\n</code></pre>\n\n<p>But you cannot <em>partially</em> specialize just a single method. </p>\n"}], "owner": {"reputation": 697, "user_id": 3417657, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/GynoP.png?s=128&g=1", "display_name": "NefariousOctopus", "link": "https://stackoverflow.com/users/3417657/nefariousoctopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 29658122, "answer_count": 1, "score": 2, "last_activity_date": 1429122898, "creation_date": 1429122406, "last_edit_date": 1429122572, "question_id": 29657962, "link": "https://stackoverflow.com/questions/29657962/c-template-specialization-by-templated-class", "title": "C++ - Template specialization by templated class", "body": "<p>I've got a templated class in which I need to specialize few methods for class that is also templated. To be more specific: I try to combine smart array and shared pointer:</p>\n\n<pre><code>template &lt;class T&gt;\nint sortedArray&lt; smartPtr&lt;T&gt; &gt;::insert(const T&amp; object) {\n...\n}\n</code></pre>\n\n<p>With this syntax I get following errors:</p>\n\n<pre><code>main.cpp:162:55: error: invalid use of incomplete type \u2018class sortedArray&lt;smartPtr&lt;T&gt; &gt;\u2019\nint sortedArray&lt; smartPtr&lt;T&gt; &gt;::insert(const T&amp; object) {\n                                                      ^\nmain.cpp:87:7: error: declaration of \u2018class sortedArray&lt;smartPtr&lt;T&gt; &gt;\u2019\n class sortedArray {\n       ^\n</code></pre>\n\n<p>Is it even possible to do this kind of thing?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 3, "creation_date": 1429122398, "post_id": 29657925, "comment_id": 47455551, "body": "Please do the math yourself (without down-vote)"}, {"owner": {"reputation": 2003, "user_id": 2407394, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rVZLV.jpg?s=128&g=1", "display_name": "gyan", "link": "https://stackoverflow.com/users/2407394/gyan"}, "edited": false, "score": 0, "creation_date": 1429122417, "post_id": 29657925, "comment_id": 47455564, "body": "does it really give 1,14,13??"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1429122474, "post_id": 29657925, "comment_id": 47455597, "body": "Why don&#39;t people run the code and step through the debugger to see what is happening?  It is such a useful skill to learn they should teach that before they even go over writing code."}, {"owner": {"reputation": 4588, "user_id": 3470414, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eUip5.jpg?s=128&g=1", "display_name": "Always Learning", "link": "https://stackoverflow.com/users/3470414/always-learning"}, "edited": false, "score": 1, "creation_date": 1429122522, "post_id": 29657925, "comment_id": 47455618, "body": "Please show the actual output. There are no commas in your <code>cout</code> statement so it can&#39;t be &quot;1, 14, 13&quot;.  It&#39;s the 13 that I&#39;m skeptical about. It should have output &quot;1 14 3&quot;."}, {"owner": {"reputation": 1, "user_id": 4793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e993c9485c4bb471f99dd0ea408c34e?s=128&d=identicon&r=PG&f=1", "display_name": "jdwolfie", "link": "https://stackoverflow.com/users/4793330/jdwolfie"}, "edited": false, "score": 0, "creation_date": 1429123812, "post_id": 29657925, "comment_id": 47456398, "body": "Sorry. It was a typo."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1429124162, "post_id": 29657925, "comment_id": 47456628, "body": "What&#39;s this <i><code>cout &lt;&lt; r&lt;&lt; &#39;&#39;&lt;&lt; s&lt;&lt; &#39;&#39;&lt;&lt; t&lt;&lt; endl;</code></i> actually supposed to be? Fix your quote characters please! It should be: <code>cout &lt;&lt; r &lt;&lt; &quot;, &quot; &lt;&lt; s &lt;&lt; &quot;, &quot; &lt;&lt;  t&lt;&lt; endl;</code>"}], "answers": [{"owner": {"reputation": 1779, "user_id": 3671272, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nK622.png?s=128&g=1", "display_name": "TheCrafter", "link": "https://stackoverflow.com/users/3671272/thecrafter"}, "is_accepted": false, "score": 0, "last_activity_date": 1429122437, "creation_date": 1429122437, "answer_id": 29657967, "question_id": 29657925, "link": "https://stackoverflow.com/questions/29657925/can-someone-explain-the-process-of-passing-by-value-reference-of-this-code/29657967#29657967", "title": "Can someone explain the process of passing by value/reference of this code?", "body": "<p>It is simple.</p>\n\n<p>When you pass something by value (as you pass the first variable in function) a <strong>copy</strong> of that variable is born!</p>\n\n<p>On the other hand when you pass something by reference the <strong>actual</strong> variable gets into the function. </p>\n\n<p>In your example, you pass a copy of a but the actual b. So when you get out of the function the <code>t</code> has not changed while <code>s</code> which is passed by reference is changed.</p>\n\n<pre><code>void Twist(int a, int&amp; b)\n{\n    // a is 3 and b is 2\n    int c;\n\n    c = a+2; // c = 3 + 2 = 5\n\n    // CAREFUL: This is not the actual t you passed. It is a copy.\n    a = a*3  // a = 3 * 3 = 9.\n\n    // THIS IS the actual s you passed. NOT a copy.\n    b = c+a; // b = 9 + 5 = 14\n\n    // Now when you get out the value of s is updated to 14\n}\n</code></pre>\n"}, {"owner": {"reputation": 2553, "user_id": 2899162, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e232dd2eb7990524453d85d7a89d7388?s=128&d=identicon&r=PG&f=1", "display_name": "druckermanly", "link": "https://stackoverflow.com/users/2899162/druckermanly"}, "is_accepted": false, "score": 0, "last_activity_date": 1429122536, "creation_date": 1429122536, "answer_id": 29657996, "question_id": 29657925, "link": "https://stackoverflow.com/questions/29657925/can-someone-explain-the-process-of-passing-by-value-reference-of-this-code/29657996#29657996", "title": "Can someone explain the process of passing by value/reference of this code?", "body": "<p>After <code>twist(t,s)</code>:</p>\n\n<p><code>r</code> is <code>1</code> because it never changes.</p>\n\n<p><code>t</code> is <code>3</code> because it is passed by <strong>value</strong> into <code>Twist</code>, so it never changes.</p>\n\n<p><code>s</code> is <code>14</code> because it is passed by <strong>reference</strong> into <code>Twist</code>, so any changes that happen to <code>s</code> in <code>Twist</code> will change the value of <code>s</code> outside of <code>Twist</code>.</p>\n"}, {"owner": {"reputation": 1, "user_id": 5156891, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-biGMZ6UkjW8/AAAAAAAAAAI/AAAAAAAAEPo/U5LrdQ3bbtg/photo.jpg?sz=128", "display_name": "Aakar Dwivedi", "link": "https://stackoverflow.com/users/5156891/aakar-dwivedi"}, "is_accepted": false, "score": 0, "last_activity_date": 1464203870, "creation_date": 1464203870, "answer_id": 37445846, "question_id": 29657925, "link": "https://stackoverflow.com/questions/29657925/can-someone-explain-the-process-of-passing-by-value-reference-of-this-code/37445846#37445846", "title": "Can someone explain the process of passing by value/reference of this code?", "body": "<p>Passing by value creates a new variable with same content, as with the case when value of <code>t</code> is copied in a new variable <code>a</code>.</p>\n\n<p>Passing by reference as you did in case of variable <code>s</code> which is passed by reference to <code>b</code>, this <code>b</code> is not a new variable rather it is just another name of your variable <code>s</code>.</p>\n\n<p>Whatever operations you perform on <code>b</code> will be reflected back on <code>s</code>.</p>\n\n<p>Thus when you modify variable <code>b</code> in <code>Twist</code> function the <code>s</code> variable's values also gets modified.</p>\n"}], "owner": {"reputation": 1, "user_id": 4793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e993c9485c4bb471f99dd0ea408c34e?s=128&d=identicon&r=PG&f=1", "display_name": "jdwolfie", "link": "https://stackoverflow.com/users/4793330/jdwolfie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 3, "score": -9, "last_activity_date": 1464203870, "creation_date": 1429122258, "last_edit_date": 1429124003, "question_id": 29657925, "link": "https://stackoverflow.com/questions/29657925/can-someone-explain-the-process-of-passing-by-value-reference-of-this-code", "title": "Can someone explain the process of passing by value/reference of this code?", "body": "<pre><code>void Twist(int a, int&amp; b)\n{\n    int c;\n\n    c = a+2;\n    a = a*3;\n    b = c+a;\n\n}\n</code></pre>\n\n<p>What is the output of the following code fragment involving Twist(all variables type int)?</p>\n\n<pre><code>r = 1;\ns = 2; \nt = 3;\nTwist(t,s);\ncout &lt;&lt; r&lt;&lt; ''&lt;&lt; s&lt;&lt; ''&lt;&lt; t&lt;&lt; endl;\n</code></pre>\n\n<p>I know this displays 1, 14, 3 but why?</p>\n"}, {"tags": ["c++", "boost", "installation", "boost-log"], "answers": [{"owner": {"reputation": 111, "user_id": 939927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e83330d86a675d9178f39282364d869?s=128&d=identicon&r=PG&f=1", "display_name": "PR3x", "link": "https://stackoverflow.com/users/939927/pr3x"}, "is_accepted": true, "score": 1, "last_activity_date": 1429125838, "creation_date": 1429125838, "answer_id": 29659027, "question_id": 29657881, "link": "https://stackoverflow.com/questions/29657881/how-to-build-and-install-boost-libraries-requiring-separate-building-and-install/29659027#29659027", "title": "How to build and install Boost libraries requiring separate building and installation on Ubuntu", "body": "<p>The separate <code>boost::log</code> library shouldn't be necessary.</p>\n\n<p>Instead, make sure that <code>boost::log</code> was build with your standard install of Boost.\nIf it wasn't, try making sure you have all of Boost's build dependencies installed\n(if on Ubuntu, try <code>$ sudo apt-get build-dep boost1.54</code> or similar)\nbefore re-running <code>./b2</code>.</p>\n"}], "owner": {"reputation": 4789, "user_id": 1735836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ee6KW.png?s=128&g=1", "display_name": "Patricia", "link": "https://stackoverflow.com/users/1735836/patricia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 29659027, "answer_count": 1, "score": 1, "last_activity_date": 1429125838, "creation_date": 1429122129, "question_id": 29657881, "link": "https://stackoverflow.com/questions/29657881/how-to-build-and-install-boost-libraries-requiring-separate-building-and-install", "title": "How to build and install Boost libraries requiring separate building and installation on Ubuntu", "body": "<p>I have recently upgraded from Boost 1.54 to 1.57.  But when I look in my lib directory where all my boost library files are located, I do not see libboost_log.so</p>\n\n<p>I ran ./bootstrap.sh --show-libraries to see what should get installed and I received the following:</p>\n\n<pre><code>pdl@pdl-VirtualBox:~/Downloads/boost_1_57_0$ ./bootstrap.sh --show-libraries\nBuilding Boost.Build engine with toolset gcc... tools/build/src/engine/bin.linuxx86_64/b2\n\nThe following Boost libraries have portions that require a separate build\nand installation step. Any library not listed here can be used by including\nthe headers only.\n\nThe Boost libraries requiring separate building and installation are:\n    - atomic\n    - chrono\n    - container\n    - context\n    - coroutine\n    - date_time\n    - exception\n    - filesystem\n    - graph\n    - graph_parallel\n    - iostreams\n    - locale\n    - log\n    - math\n    - mpi\n    - program_options\n    - python\n    - random\n    - regex\n    - serialization\n    - signals\n    - system\n    - test\n    - thread\n    - timer\n    - wave\npdl@pdl-VirtualBox:~/Downloads/boost_1_57_0$ \n</code></pre>\n\n<p>I need to install the log library.  It is a separate library that I downloaded separately as shown here:</p>\n\n<p><img src=\"https://i.stack.imgur.com/NssWc.png\" alt=\"enter image description here\"></p>\n\n<p>I've been through the documents, Getting Started Guide, and looked on-line for how to install these separate libraries but I'm just not getting it.</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "visual-studio-2013", "freetype"], "answers": [{"owner": {"reputation": 61, "user_id": 3430740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d665b0f8ba8f29bbbb78cdcf7f103c?s=128&d=identicon&r=PG&f=1", "display_name": "kosob", "link": "https://stackoverflow.com/users/3430740/kosob"}, "is_accepted": false, "score": 3, "last_activity_date": 1438285862, "creation_date": 1438285862, "answer_id": 31732812, "question_id": 29657837, "link": "https://stackoverflow.com/questions/29657837/errors-building-freetype-application-with-visual-studio/31732812#31732812", "title": "Errors building Freetype application with Visual Studio", "body": "<p>I had the same issue while building FreeType2 in VS2013 with VS2013 toolset (SDK). No Google results seem to have answer to this so far so I thought I'd share even though the thread is bit old (but the problem is still recent! FreeType ver. 2.6 still suffers from the same problem).</p>\n\n<p>For reference, this can be reproduced by minimal example:</p>\n\n<pre><code>#include &lt;ft2build.h&gt;\n#include FT_FREETYPE_H\n\nFT_Library  library;\n</code></pre>\n\n<p>So the problem and solution is quite simple but was unfortunately buried in output log and wasn't that obvious at first glimpse so it needed some investigation.</p>\n\n<p><strong>There is a clash with header names between FreeType2 library and Windows SDK</strong>, namely with the fttypes.h file which gets dragged in from:</p>\n\n<p>C:\\Program Files (x86)\\Windows Kits\\8.1\\Include\\shared\\fttypes.h</p>\n\n<p>Instead, VS should include FT2 header that is located in:</p>\n\n<p>your_FT2_root\\include\\fttypes.h</p>\n\n<p>This is easy to workaround - in your Project Properties (Alt+F7) rearrange header search paths so FreeType2 path is first (for me bringing FT2 at the top worked like a charm).</p>\n\n<p>Hope this helps!</p>\n\n<p>Cheers,\nHenryk</p>\n"}], "owner": {"reputation": 6717, "user_id": 257639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747a7d45040d82aea0d8ae12e1875639?s=128&d=identicon&r=PG", "display_name": "Matthew McGoogan", "link": "https://stackoverflow.com/users/257639/matthew-mcgoogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2143, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1438285862, "creation_date": 1429121986, "question_id": 29657837, "link": "https://stackoverflow.com/questions/29657837/errors-building-freetype-application-with-visual-studio", "title": "Errors building Freetype application with Visual Studio", "body": "<p>I've been going bonkers the last week on this problem.</p>\n\n<ul>\n<li>Microsoft Visual Studio Community 2013</li>\n<li>Freetype 2.5.5</li>\n<li>Windows 8.1</li>\n<li>Building as C++ application</li>\n</ul>\n\n<p>I've been trying to build against a static library for Freetype, I've tried after building the lib using the included VC2010 project and also downloading a pre-built library with no luck. I always get the same errors below. I've tried with multiple examples and the same. I'm able to successfully compile and link against the lib using gcc (after building a .a library), this problem seems to be isolated to Visual Studio..</p>\n\n<pre><code>1&gt;f:\\audio\\libs\\header\\freetype\\fterrdef.h(35): error C2143: syntax error : missing '}' before '('\n1&gt;f:\\audio\\libs\\header\\freetype\\fterrdef.h(35): error C2143: syntax error : missing ';' before '&lt;L_TYPE_raw&gt;'\n1&gt;f:\\audio\\libs\\header\\freetype\\fterrdef.h(35): error C2059: syntax error : '&lt;L_TYPE_raw&gt;'\n1&gt;f:\\audio\\libs\\header\\freetype\\fterrors.h(164): error C2143: syntax error : missing ';' before '}'\n1&gt;f:\\audio\\libs\\header\\freetype\\fterrors.h(177): error C2059: syntax error : '}'\n1&gt;f:\\audio\\libs\\header\\freetype\\fterrors.h(177): error C2143: syntax error : missing ';' before '}'\n1&gt;f:\\audio\\libs\\header\\freetype\\freetype.h(38): error C2143: syntax error : missing ';' before '{'\n1&gt;f:\\audio\\libs\\header\\freetype\\freetype.h(38): error C2447: '{' : missing function header (old-style formal list?)\n</code></pre>\n\n<p>Example code that can cause this error:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;ft2build.h&gt;\n#include FT_FREETYPE_H\n\nint main(int argc, char **argv)\n{\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "destructor"], "comments": [{"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 2, "creation_date": 1429121844, "post_id": 29657736, "comment_id": 47455207, "body": "There&#39;s no reason why you couldn&#39;t do that. You must not throw an exception from a destructor, but otherwise you can do pretty much everything you want, including things like e.g. releasing resources/memory/locks, or well, logging that an object was destroyed."}, {"owner": {"reputation": 52016, "user_id": 373025, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1916b08af2d329d0fe74b7fb9412369b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre C.", "link": "https://stackoverflow.com/users/373025/alexandre-c"}, "edited": false, "score": 0, "creation_date": 1429122283, "post_id": 29657736, "comment_id": 47455479, "body": "It depends on how you are going to set up your logging. Are you using standard IO (either cstdio or iostream) ? Are you using a framework ? Something more elaborated ? It shouldn&#39;t be problematic to log in destructors, but make sure that you don&#39;t allow your logger to throw exceptions (in particular, don&#39;t handle IO errors when logging this way)"}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 1152801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37c9c39dce8daf63daeaa6aafdae018e?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/1152801/anirudh"}, "edited": false, "score": 0, "creation_date": 1429139353, "post_id": 29657788, "comment_id": 47464473, "body": "Thanks for the responses. I &#39;ll remember to catch exceptions within the destructor."}], "owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "is_accepted": true, "score": 2, "last_activity_date": 1429121818, "creation_date": 1429121818, "answer_id": 29657788, "question_id": 29657736, "link": "https://stackoverflow.com/questions/29657736/logging-within-a-destructor/29657788#29657788", "title": "Logging within a destructor", "body": "<p>Maybe, but <a href=\"https://isocpp.org/wiki/faq/exceptions#dtors-shouldnt-throw\" rel=\"nofollow\">don't throw exceptions</a>.  You should anticipate I/O errors and swallow them or otherwise dispose of them without throwing.</p>\n"}, {"owner": {"reputation": 1779, "user_id": 3671272, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nK622.png?s=128&g=1", "display_name": "TheCrafter", "link": "https://stackoverflow.com/users/3671272/thecrafter"}, "is_accepted": false, "score": 1, "last_activity_date": 1429122152, "creation_date": 1429122152, "answer_id": 29657890, "question_id": 29657736, "link": "https://stackoverflow.com/questions/29657736/logging-within-a-destructor/29657890#29657890", "title": "Logging within a destructor", "body": "<p>Well you CAN do it but I would not recommend it.</p>\n\n<p>First of all, it is not a good idea to pull weird design stunts like that. You will probably end up obfuscating your code.\nDestructor's main purpose of existence is deallocating resources that your class has allocated, like files or memory.</p>\n\n<p>Another problem is exceptions. If you try to add an I/O operation in your destructor and something goes wrong, you won't be able to see it. So let's say you have this huge application where the logs are of vital importance. You may miss a log. Or even worse, have unexpected data on a log.</p>\n\n<p>Anyway, I recommend you add a <code>bool Shutdown()</code> function to your class. That's what I do in cases like that. That way you control what's going on.</p>\n\n<p>Hope I helped.  </p>\n"}], "owner": {"reputation": 199, "user_id": 1152801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37c9c39dce8daf63daeaa6aafdae018e?s=128&d=identicon&r=PG", "display_name": "Anirudh", "link": "https://stackoverflow.com/users/1152801/anirudh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1179, "favorite_count": 0, "accepted_answer_id": 29657788, "answer_count": 2, "score": 1, "last_activity_date": 1429122152, "creation_date": 1429121643, "last_edit_date": 1495540247, "question_id": 29657736, "link": "https://stackoverflow.com/questions/29657736/logging-within-a-destructor", "title": "Logging within a destructor", "body": "<p>Is it a good idea to log output to a file in a C++ class destructor? My use case is a simulator where I have a logging class that logs to an in-memory data structure and then dumps it all into a file when it is destructed.</p>\n\n<p>This is similar to the question here (<a href=\"https://stackoverflow.com/questions/6862561/c-sharp-class-do-logging-housekeeping-should-i-use-a-destructor\">C# class: Do logging / housekeeping, should I use a destructor?</a>), but my question deals with standard non garbage-collected C++, not C#.</p>\n"}, {"tags": ["c++", "stl", "priority-queue"], "answers": [{"comments": [{"owner": {"reputation": 843, "user_id": 6825288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TjgqO.jpg?s=128&g=1", "display_name": "Ganesh M S", "link": "https://stackoverflow.com/users/6825288/ganesh-m-s"}, "edited": false, "score": 2, "creation_date": 1585521055, "post_id": 29657703, "comment_id": 107782197, "body": "This solution works fine. I just need to know the significance of vector&lt;int&gt; in the declaration?"}], "owner": {"reputation": 3187, "user_id": 4350216, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uYP0f.jpg?s=128&g=1", "display_name": "Ali Akber", "link": "https://stackoverflow.com/users/4350216/ali-akber"}, "is_accepted": true, "score": 8, "last_activity_date": 1429160054, "last_edit_date": 1429160054, "creation_date": 1429121548, "answer_id": 29657703, "question_id": 29657684, "link": "https://stackoverflow.com/questions/29657684/stl-priority-queue-in-increasing-order/29657703#29657703", "title": "STL priority queue in increasing order", "body": "<p>To store value in increasing order you just need to change the declaration of the priority queue :</p>\n\n<pre><code>priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt;q;\n</code></pre>\n"}, {"owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "is_accepted": false, "score": 4, "last_activity_date": 1429121914, "last_edit_date": 1495540622, "creation_date": 1429121914, "answer_id": 29657818, "question_id": 29657684, "link": "https://stackoverflow.com/questions/29657684/stl-priority-queue-in-increasing-order/29657818#29657818", "title": "STL priority queue in increasing order", "body": "<p>Just in case, in C++14 you can do:</p>\n\n<pre><code>priority_queue&lt;int, vector&lt;int&gt;, greater&lt;&gt;&gt; q;\n</code></pre>\n\n<p>You can avoid <code>greater&lt;int&gt;</code>. That is the new way. for\nmore information, see <a href=\"https://stackoverflow.com/questions/20317413/what-are-transparent-comparators\">What are transparent comparators?</a>.</p>\n"}], "owner": {"reputation": 45, "user_id": 4792952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f730e425d189c7819b122bc2e9059326?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/4792952/pablo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15377, "favorite_count": 1, "closed_date": 1429122375, "accepted_answer_id": 29657703, "answer_count": 2, "score": 3, "last_activity_date": 1429160054, "creation_date": 1429121490, "question_id": 29657684, "link": "https://stackoverflow.com/questions/29657684/stl-priority-queue-in-increasing-order", "closed_reason": "Duplicate", "title": "STL priority queue in increasing order", "body": "<p>I need to store numbers in a queue in increasing order.<br>\nI used priority queue which stores higher value first, that is in decreasing order.  </p>\n\n<pre><code>priority_queue&lt;int&gt;q;\n</code></pre>\n\n<p>Is it possible to order them increasing ?<br>\nWhat can i do to make the data order to be increasing ? </p>\n"}, {"tags": ["c++", "opencv", "ubuntu-14.04", "ros"], "comments": [{"owner": {"reputation": 1023, "user_id": 943472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfdb27fc2522dbe66a9a5554aad3a413?s=128&d=identicon&r=PG", "display_name": "alextoind", "link": "https://stackoverflow.com/users/943472/alextoind"}, "edited": false, "score": 0, "creation_date": 1429132970, "post_id": 29657658, "comment_id": 47461843, "body": "Are these 4 lines the only errors you get? If so, it seems to be a linking problem. Could you add the <code>CMakeLists.txt</code>?"}, {"owner": {"reputation": 71, "user_id": 4793254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bbd9b6f37609475503d2b68180a6ba?s=128&d=identicon&r=PG&f=1", "display_name": "snow", "link": "https://stackoverflow.com/users/4793254/snow"}, "reply_to_user": {"reputation": 1023, "user_id": 943472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfdb27fc2522dbe66a9a5554aad3a413?s=128&d=identicon&r=PG", "display_name": "alextoind", "link": "https://stackoverflow.com/users/943472/alextoind"}, "edited": false, "score": 0, "creation_date": 1429139993, "post_id": 29657658, "comment_id": 47464712, "body": "I also tried to compile another code of mine with cmake, which was working before, and now is not anymore.... I guess, I messed up an enviroment variable. However, here is a snapshot from the CMakeLists.txt of the code, which was working with no error before:             &lt;!-- begin snippet: js hide: false --&gt;  &lt;!-- language: lang-html --&gt;  cmake_minimum_required (VERSION 2.8.3) project (test) set (test_VERSION &quot;1.3.0&quot;)  find_package( OpenCV REQUIRED )\t\t\t  include_directories(   ${OpenCV_INCLUDE_DIRS}  )  target_link_libraries( test ${OpenCV_LIBS})  &lt;!-- end snippet --&gt;"}, {"owner": {"reputation": 1023, "user_id": 943472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfdb27fc2522dbe66a9a5554aad3a413?s=128&d=identicon&r=PG", "display_name": "alextoind", "link": "https://stackoverflow.com/users/943472/alextoind"}, "edited": false, "score": 0, "creation_date": 1429171806, "post_id": 29657658, "comment_id": 47476127, "body": "It would be more readable if you edit your previous message and add the whole <code>CMakeLists.txt</code> there."}, {"owner": {"reputation": 71, "user_id": 4793254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bbd9b6f37609475503d2b68180a6ba?s=128&d=identicon&r=PG&f=1", "display_name": "snow", "link": "https://stackoverflow.com/users/4793254/snow"}, "reply_to_user": {"reputation": 1023, "user_id": 943472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfdb27fc2522dbe66a9a5554aad3a413?s=128&d=identicon&r=PG", "display_name": "alextoind", "link": "https://stackoverflow.com/users/943472/alextoind"}, "edited": false, "score": 0, "creation_date": 1429202268, "post_id": 29657658, "comment_id": 47498973, "body": "Yeah, sorry about that, I thought it would look differently. I put the <code>CMakeLists.txt</code> at the end of my question."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4793254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bbd9b6f37609475503d2b68180a6ba?s=128&d=identicon&r=PG&f=1", "display_name": "snow", "link": "https://stackoverflow.com/users/4793254/snow"}, "edited": false, "score": 0, "creation_date": 1429122365, "post_id": 29657800, "comment_id": 47455529, "body": "That just gives me other errors in feature2d.hpp. Also why would I need to include vector before and also using the std namespace. I never saw that you have to do that in order to use the nonfree includes from opencv?"}], "owner": {"reputation": 19, "user_id": 4773817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f1dcb8bd1bb6ae5fa828d08487b9c4c?s=128&d=identicon&r=PG&f=1", "display_name": "dima125", "link": "https://stackoverflow.com/users/4773817/dima125"}, "is_accepted": false, "score": -1, "last_activity_date": 1429121850, "creation_date": 1429121850, "answer_id": 29657800, "question_id": 29657658, "link": "https://stackoverflow.com/questions/29657658/opencv-compiling-error-with-nonfree-feature2d-hpp/29657800#29657800", "title": "OpenCV compiling error with nonfree/feature2d.hpp", "body": "<p>Try to write just before including opencv2 :</p>\n\n<pre><code>#include &lt;vector&gt;\nusing namespace std;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1085, "user_id": 1908670, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/hhrjW.jpg?s=128&g=1", "display_name": "willSapgreen", "link": "https://stackoverflow.com/users/1908670/willsapgreen"}, "edited": false, "score": 0, "creation_date": 1462663173, "post_id": 29688869, "comment_id": 61732998, "body": "Hello @snow, I get the same problem in ROS jade. In /opt/ros/jade/include.  I have opencv_apps, instead of opencv and opencv2.  But I want to try your approach!  So what does &quot;chaning the names of the two folder...&quot; mean?  Do you change the folder names?  Thank you for taking time on my question."}], "owner": {"reputation": 71, "user_id": 4793254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bbd9b6f37609475503d2b68180a6ba?s=128&d=identicon&r=PG&f=1", "display_name": "snow", "link": "https://stackoverflow.com/users/4793254/snow"}, "is_accepted": true, "score": 2, "last_activity_date": 1429235443, "creation_date": 1429235443, "answer_id": 29688869, "question_id": 29657658, "link": "https://stackoverflow.com/questions/29657658/opencv-compiling-error-with-nonfree-feature2d-hpp/29688869#29688869", "title": "OpenCV compiling error with nonfree/feature2d.hpp", "body": "<p>I kinda fixed it, but I guess its not the proper way of doing it:</p>\n\n<p>ROS is already coming with an OpenCV Version. On my computer I also installed a separate newer OpenCV Version. I fixed it by changing the names of the two folder <code>opencv</code> and <code>opencv2</code> in the directory <code>/opt/ros/indigo/include</code>. Now, the complier is not using ROS' OpenCV anymore, but the one I installed and that is fixing my issue.</p>\n\n<p>Again, I think thats not how it should be done, so if somebody has any better idea, please let me know!</p>\n"}], "owner": {"reputation": 71, "user_id": 4793254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bbd9b6f37609475503d2b68180a6ba?s=128&d=identicon&r=PG&f=1", "display_name": "snow", "link": "https://stackoverflow.com/users/4793254/snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2258, "favorite_count": 1, "accepted_answer_id": 29688869, "answer_count": 2, "score": 0, "last_activity_date": 1430472348, "creation_date": 1429121417, "last_edit_date": 1429437922, "question_id": 29657658, "link": "https://stackoverflow.com/questions/29657658/opencv-compiling-error-with-nonfree-feature2d-hpp", "title": "OpenCV compiling error with nonfree/feature2d.hpp", "body": "<p>I am trying to compile a C++ code in ROS indigo using catkin_make under Ubuntu 14.04. I am getting the following error:</p>\n\n<pre><code>/usr/local/include/opencv2/nonfree/features2d.hpp:73:21: error: \u2018vector\u2019 has not been declared\n                     vector&lt;KeyPoint&gt;&amp; keypoints) const;\n                     ^\n/usr/local/include/opencv2/nonfree/features2d.hpp:73:27: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018&lt;\u2019 token\n                     vector&lt;KeyPoint&gt;&amp; keypoints) const;\n                           ^\n/usr/local/include/opencv2/nonfree/features2d.hpp:77:21: error: \u2018vector\u2019 has not been declared\n                     vector&lt;KeyPoint&gt;&amp; keypoints,\n                     ^\n/usr/local/include/opencv2/nonfree/features2d.hpp:77:27: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018&lt;\u2019 token\n                     vector&lt;KeyPoint&gt;&amp; keypoints,\n</code></pre>\n\n\n\n<p>Does anyone has a clue, what the issue might be? Note that this error is occurring in the feature2d.hpp from OpenCV (so its not a file I made). I already tried to reinstall OpenCV and also ROS, but that did not fix the error.</p>\n\n<p>I would be very thankful if anyone has any idea how to solve that.</p>\n\n<p>Thanks,</p>\n\n<p>snow</p>\n\n<p>Edit: Here is the CMakeLists.txt:</p>\n\n<pre class=\"lang-makefile prettyprint-override\"><code>cmake_minimum_required (VERSION 2.8.3)\nproject (test)\nset (test_VERSION \"1.0.0\")\n\nfind_package( OpenCV REQUIRED )         \n\nif ( NOT OpenCV_FOUND )\n  message(FATAL_ERROR \"Package OpenCV required, but not found!\")\nendif( NOT OpenCV_FOUND )\n\nfind_package( Eigen3 REQUIRED )         \n\ninclude_directories(\n  ${EIGEN3_INCLUDE_DIR}             \n  ${CMAKE_CURRENT_SOURCE_DIR}/include\n  ${OpenCV_INCLUDE_DIRS}\n)\n\nset (SOURCE\n  src/test.cpp)\n\nadd_library (test ${SOURCE})\nset_target_properties (test PROPERTIES\n  COMPILE_FLAGS \"-std=c++11\")\n\ntarget_link_libraries( test ${OpenCV_LIBS} ${EIGEN3_LIBRARY_DIRS})\n</code></pre>\n\n\n"}, {"tags": ["c++", "compilation", "output"], "comments": [{"owner": {"reputation": 7182, "user_id": 1756405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ba33dcfe557ac8225234e185a43d8844?s=128&d=identicon&r=PG", "display_name": "IdeaHat", "link": "https://stackoverflow.com/users/1756405/ideahat"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1429120605, "post_id": 29657304, "comment_id": 47454397, "body": "@KerrekSB that is exactly it and I don&#39;t want to steal the answer from you. printf and cout use separate buffers that are flushed at different times. In the case of the above code,  cout was most likely flushed in line, and printf was flushed at the end of the call. Replace the space in the printf with something else (_) and you&#39;ll see it."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1429120948, "post_id": 29657304, "comment_id": 47454622, "body": "Add <code>fflush(stdout)</code>?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1429128410, "post_id": 29657304, "comment_id": 47459214, "body": "This question doesn&#39;t make much sense; having explicitly de-synced standard streams with stdio, you ask why they behave as though they were de-synced?"}, {"owner": {"reputation": 1751, "user_id": 3385517, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3dc6eda81ae8d3c645d53b339718ea3f?s=128&d=identicon&r=PG", "display_name": "Reynaldo Aguilar", "link": "https://stackoverflow.com/users/3385517/reynaldo-aguilar"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1429128788, "post_id": 29657304, "comment_id": 47459429, "body": "@T.C. The question doesn&#39;t make much sense if you know exactly what is happening, I mean, what the call to <code>ios_base::sync_with_stdio(false)</code> actually do. Maybe this line is here just for improve performance of I/O operations using cin/cout"}, {"owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "edited": false, "score": 0, "creation_date": 1429130577, "post_id": 29657304, "comment_id": 47460467, "body": "You turned off sync yourself and ask why they are not synced %)"}], "answers": [{"comments": [{"owner": {"reputation": 1751, "user_id": 3385517, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3dc6eda81ae8d3c645d53b339718ea3f?s=128&d=identicon&r=PG", "display_name": "Reynaldo Aguilar", "link": "https://stackoverflow.com/users/3385517/reynaldo-aguilar"}, "edited": false, "score": 0, "creation_date": 1429120805, "post_id": 29657402, "comment_id": 47454533, "body": "It produces the same output"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1751, "user_id": 3385517, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3dc6eda81ae8d3c645d53b339718ea3f?s=128&d=identicon&r=PG", "display_name": "Reynaldo Aguilar", "link": "https://stackoverflow.com/users/3385517/reynaldo-aguilar"}, "edited": false, "score": 0, "creation_date": 1429121156, "post_id": 29657402, "comment_id": 47454744, "body": "@ReynaldoAguilar I have fixed it."}], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1429121048, "last_edit_date": 1429121048, "creation_date": 1429120586, "answer_id": 29657402, "question_id": 29657304, "link": "https://stackoverflow.com/questions/29657304/why-doesnt-this-code-using-printf-and-cout-have-the-expected-output/29657402#29657402", "title": "Why doesn&#39;t this code using printf and cout have the expected output?", "body": "<p>You probably miss to <code>flush()</code> <code>std::cout</code>. <code>printf()</code> has a different behavior regarding this. Also the IO buffers should be synchronized. If you change your code to</p>\n\n<pre><code>int main () {\n    ios_base::sync_with_stdio(true); // Synchronizing the IO buffers\n                                     // must be enabled\n    cin.tie(NULL);    \n\n    for (int i = 0; i &lt; 3; i++) {\n        cout &lt;&lt; i &lt;&lt; \" \";\n        cout.flush(); // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n        printf(\"%d \", i);\n    }\n\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>it should behave as you expected. See the working demo <a href=\"http://ideone.com/VUyn76\" rel=\"nofollow\">here</a> please.</p>\n"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1429120605, "creation_date": 1429120605, "answer_id": 29657411, "question_id": 29657304, "link": "https://stackoverflow.com/questions/29657304/why-doesnt-this-code-using-printf-and-cout-have-the-expected-output/29657411#29657411", "title": "Why doesn&#39;t this code using printf and cout have the expected output?", "body": "<p>If you want the output <code>std::cout</code> and <code>printf</code> to be sync'ed, you'll need to use:</p>\n\n<pre><code>std::ios_base::sync_with_stdio(true);\n</code></pre>\n\n<p>not</p>\n\n<pre><code>std::ios_base::sync_with_stdio(false);\n</code></pre>\n\n<p>See it working at <a href=\"http://ideone.com/7sgH2I\" rel=\"nofollow\">http://ideone.com/7sgH2I</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1429121026, "post_id": 29657442, "comment_id": 47454674, "body": "Pretty sure <code>cout</code> also flushes for newlines, though most istreams don&#39;t."}, {"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1429121359, "post_id": 29657442, "comment_id": 47454884, "body": "@MooingDuck : From what I have read, <code>cout</code> flushes for newlines when outputting to an interactive device, such as the terminal, but doesn&#39;t flush when writing to a file."}], "owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "is_accepted": true, "score": 11, "last_activity_date": 1429120699, "creation_date": 1429120699, "answer_id": 29657442, "question_id": 29657304, "link": "https://stackoverflow.com/questions/29657304/why-doesnt-this-code-using-printf-and-cout-have-the-expected-output/29657442#29657442", "title": "Why doesn&#39;t this code using printf and cout have the expected output?", "body": "<p>One possible explanation for this is that <code>cout</code> and <code>printf</code> use separate buffers. <code>cout</code> outputs on the terminal screen either when it is flushed using the <code>endl</code> command, or if the buffer is full (generally 512 bytes). </p>\n\n<p>I am not sure about <code>printf</code> (so feel free to correct me if I'm wrong), but it also follows a similar behaviour. So what happens is that at the end of the program, both the buffers are flushed, and so the output you see is achieved.</p>\n\n<p>I ran the code on my machine (GCC 4.8.1) along with the modification as below</p>\n\n<pre><code>cout &lt;&lt; i &lt;&lt; \" . \";\nprintf(\"%d \", i);\n</code></pre>\n\n<p>The output I observed was <code>0 1 2 0 . 1 . 2 .</code> which seems to indicate that printf flushes first in my case. I have no idea if it is by design (mentioned somewhere in the standard), or if it depends on the context.</p>\n"}, {"owner": {"reputation": 192, "user_id": 1021267, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7decd43bd994cc7fcf1af0e18f67f32?s=128&d=identicon&r=PG", "display_name": "itachi", "link": "https://stackoverflow.com/users/1021267/itachi"}, "is_accepted": false, "score": 5, "last_activity_date": 1429120990, "creation_date": 1429120990, "answer_id": 29657528, "question_id": 29657304, "link": "https://stackoverflow.com/questions/29657304/why-doesnt-this-code-using-printf-and-cout-have-the-expected-output/29657528#29657528", "title": "Why doesn&#39;t this code using printf and cout have the expected output?", "body": "<p>Try this </p>\n\n<pre><code>    cout &lt;&lt; i &lt;&lt; \" \" &lt;&lt;std::flush;\n    printf(\"%d \", i);\n    fflush(stdout);\n</code></pre>\n"}, {"owner": {"reputation": 346, "user_id": 3288013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/25c0564c5de9ec3e0982f74e41b815a4?s=128&d=identicon&r=PG&f=1", "display_name": "ALXGTV", "link": "https://stackoverflow.com/users/3288013/alxgtv"}, "is_accepted": false, "score": 9, "last_activity_date": 1429121437, "creation_date": 1429121437, "answer_id": 29657667, "question_id": 29657304, "link": "https://stackoverflow.com/questions/29657304/why-doesnt-this-code-using-printf-and-cout-have-the-expected-output/29657667#29657667", "title": "Why doesn&#39;t this code using printf and cout have the expected output?", "body": "<p>By default the C stdio functions printf, etc. and the C++ io streams are synchronized meaning they can be used interchangeably. At the beginning of your code you have removed the synchronization with <code>ios_base::sync_with_stdio(false)</code> not sure if your actual intent was to write this <code>ios_base::sync_with_stdio(true)</code> which synchronizes the two io libraries.</p>\n"}], "owner": {"reputation": 1751, "user_id": 3385517, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3dc6eda81ae8d3c645d53b339718ea3f?s=128&d=identicon&r=PG", "display_name": "Reynaldo Aguilar", "link": "https://stackoverflow.com/users/3385517/reynaldo-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1361, "favorite_count": 1, "accepted_answer_id": 29657442, "answer_count": 5, "score": 15, "last_activity_date": 1429121997, "creation_date": 1429120267, "last_edit_date": 1429120442, "question_id": 29657304, "link": "https://stackoverflow.com/questions/29657304/why-doesnt-this-code-using-printf-and-cout-have-the-expected-output", "title": "Why doesn&#39;t this code using printf and cout have the expected output?", "body": "<p>I have the following code:</p>\n\n<pre><code>int main ()\n{\n    ios_base::sync_with_stdio(false);\n    cin.tie(NULL);    \n\n    for (int i = 0; i &lt; 3; i++) {\n        cout &lt;&lt; i &lt;&lt; \" \";\n        printf(\"%d \", i);\n    }\n\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The expected output of this code is:</p>\n\n<p><code>0 0 1 1 2 2</code></p>\n\n<p>but, instead, it prints:</p>\n\n<pre><code>0 1 2\n0 1 2\n</code></pre>\n\n<p>This issue happens in GNU G++ 4.9.2 compiler</p>\n"}, {"tags": ["c++", "templates", "inheritance", "casting"], "answers": [{"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "is_accepted": false, "score": 2, "last_activity_date": 1429122653, "last_edit_date": 1429122653, "creation_date": 1429120180, "answer_id": 29657271, "question_id": 29657132, "link": "https://stackoverflow.com/questions/29657132/cast-a-template-object-with-different-template-parameters-how-is-this-possible/29657271#29657271", "title": "Cast a template object with different template parameters, how is this possible?", "body": "<p>Consider this:</p>\n\n<pre><code>struct X {};\nstruct A : X {};\nstruct B : X {};\n\nX &amp; x = get_object_ref(); //can return A&amp; or B&amp;, how would I know?\n\nA &amp; a = static_cast&lt;A&amp;&gt;(x); //this will compile!\nB &amp; b = static_cast&lt;B&amp;&gt;(x); //this will compile too!\n</code></pre>\n\n<p>If <code>static_cast&lt;A&amp;&gt;(x)</code> should give error, then <code>static_cast&lt;B&amp;&gt;(x)</code> should give <em>error</em> as well by symmetry. Since one must compile, then both have to compile.</p>\n\n<p>Bottom line: <code>base&amp;</code> can always be downcasted to <code>derive&amp;</code> &mdash; it is a language feature. The onus on you to cast to the <em>correct</em> <code>derive&amp;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1429127438, "post_id": 29657281, "comment_id": 47458624, "body": "It seems to me that the OP may want (expect?) the dynamic type to be checked. Maybe it would be useful to explain how he could use <code>dynamic_cast</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1429131981, "post_id": 29657281, "comment_id": 47461272, "body": "@bogdan That&#39;s not possible for the types in the question: none of the classes is polymorphic."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1429133871, "post_id": 29657281, "comment_id": 47462343, "body": "Exactly, hence &quot;explain <i>how</i> he could use&quot;. It&#39;s only a matter of adding one virtual destructor definition, which might be good advice anyway, since he&#39;s accessing these objects through references, in a way that&#39;s more often than not associated with runtime polymorphism."}], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 2, "last_activity_date": 1429120206, "creation_date": 1429120206, "answer_id": 29657281, "question_id": 29657132, "link": "https://stackoverflow.com/questions/29657132/cast-a-template-object-with-different-template-parameters-how-is-this-possible/29657281#29657281", "title": "Cast a template object with different template parameters, how is this possible?", "body": "<p>Forget about the templates.</p>\n\n<p>You have a class <code>A</code>, a class <code>B</code> that derives from <code>A</code>, and a class <code>C</code> that derives from <code>A</code>.</p>\n\n<p>If you have an lvalue of type <code>A</code>, you can cast it to <code>B &amp;</code>, or to <code>C &amp;</code>. The compiler in general has no way of knowing what the concrete derived type is, so it trusts that you know what you're doing.</p>\n\n<p>That's exactly what you're doing: you're casting <code>A</code> to <code>B &amp;</code>. Your <code>A</code> is really a <code>C</code> object, but the compiler does not know that.</p>\n"}], "owner": {"reputation": 23, "user_id": 4668234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20301581e9fab02dac181ef4e916a42?s=128&d=identicon&r=PG&f=1", "display_name": "Ely", "link": "https://stackoverflow.com/users/4668234/ely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 29657281, "answer_count": 2, "score": 2, "last_activity_date": 1429122653, "creation_date": 1429119744, "last_edit_date": 1429119924, "question_id": 29657132, "link": "https://stackoverflow.com/questions/29657132/cast-a-template-object-with-different-template-parameters-how-is-this-possible", "title": "Cast a template object with different template parameters, how is this possible?", "body": "<p>Today I tried something, thinking it would not works, but it does work and I cannot understand why...</p>\n\n<p>I have an object of type <code>base</code> which contains nothing.<br>\nAnother of type <code>derived</code> which inherits from <code>base</code>, stores a function pointer and calls it.<br>\n<code>derived</code> is a template object, its parameters are the types of the arguments waited by the function stored.</p>\n\n<p>If I make a reference of type <code>base</code> from an object of type <code>derived&lt;void&gt;</code> and tries to cast it into <code>derived&lt;int&gt;</code>... it does work.<br>\nHow do you explain it since <code>derived&lt;&gt;</code>and <code>derived&lt; int &gt;</code>are two different types ?</p>\n\n<p>A simple example :</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid foo( int ) { ::std::cout &lt;&lt; \"void foo( int )\\n\"; }\nvoid foo() { ::std::cout &lt;&lt; \"void foo()\\n\"; }\n\nstruct base\n{\n  base() { ::std::cout &lt;&lt; \"\\tcreate base\\n\"; }\n  base( const base &amp; ) { ::std::cout &lt;&lt; \"\\tcopy base\\n\"; }\n  base( base &amp;&amp; ) { ::std::cout &lt;&lt; \"\\tmove base\\n\"; }\n\n  void operator =( const base &amp; ) { ::std::cout &lt;&lt; \"\\tcopy assignment base\\n\"; }\n  void operator =( base &amp;&amp; ) { ::std::cout &lt;&lt; \"\\tmove assignment base\\n\"; }\n};\n\ntemplate &lt; typename ... Args &gt;\nstruct derived : public base\n{\n  derived() { ::std::cout &lt;&lt; \"\\tcreate derived\\n\"; }\n  derived( const derived &amp; ) { ::std::cout &lt;&lt; \"\\tcopy derived\\n\"; }\n  derived( derived &amp;&amp; ) { ::std::cout &lt;&lt; \"\\tmove derived\\n\"; }\n\n    derived &amp; operator =( const derived &amp; ) { ::std::cout &lt;&lt; \"\\tcopy assignment derived\\n\"; }\n  derived &amp; operator =( derived &amp;&amp; ) { ::std::cout &lt;&lt; \"\\tmove assignment derived\\n\"; }\n\n  void operator ()( Args ... args )\n  {\n    f( args ... );\n  }\n\n  void ( *f )( Args ... );\n};\n\n\nint main()\n{\n  derived&lt;&gt; derived_void;\n  derived_void.f = ( void ( * )() )&amp;foo;\n\n  base &amp; base_void = derived_void;\n  derived&lt;&gt; &amp;test = derived_void;\n\n  static_cast&lt; derived&lt; int &gt; &amp; &gt;( base_void )( 1 ); // compiles, makes no copy\n//  static_cast&lt; derived&lt; int &gt; &amp; &gt;( test )( 1 ); // doesn't compile\n}\n</code></pre>\n\n<p><a href=\"http://cpp.sh/87ip\" rel=\"nofollow\">You can test it here.</a></p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "edited": false, "score": 2, "creation_date": 1429120232, "post_id": 29657113, "comment_id": 47454156, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb787524%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">MSDN</a> says that edit control that is read-only or disabled sends <code>WM_CTLCOLORSTATIC </code> instead of <code>WM_CTLCOLOREDIT</code>. Maybe that&#39;s your case?"}, {"owner": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "reply_to_user": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "edited": false, "score": 0, "creation_date": 1429123246, "post_id": 29657113, "comment_id": 47456062, "body": "@Dialecticus That was my case I found <code>::SendMessage(GetDlgItem(IDC_EDIT_SP_FROM)-&gt;GetSafeHwnd(), EM_SETREADONLY, ES_READONLY, 0);</code> in a different function. When I previously looked at the MSDN I didn&#39;t notice that it functioned as static when readonly."}], "answers": [{"owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "is_accepted": true, "score": 3, "last_activity_date": 1429123930, "creation_date": 1429123930, "answer_id": 29658465, "question_id": 29657113, "link": "https://stackoverflow.com/questions/29657113/confusion-around-case-ctlcolor-static/29658465#29658465", "title": "Confusion around case CTLCOLOR_STATIC:", "body": "<p>According to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb787524%28v=vs.85%29.aspx\" rel=\"nofollow\">MSDN</a>:</p>\n\n<blockquote>\n  <p>A static control, or an edit control that is read-only or disabled, sends the WM_CTLCOLORSTATIC message to its parent window when the control is about to be drawn. </p>\n</blockquote>\n"}], "owner": {"reputation": 250, "user_id": 4570718, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df92e9c9d3db5334f1593179be9f34f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff S", "link": "https://stackoverflow.com/users/4570718/jeff-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 29658465, "answer_count": 1, "score": 1, "last_activity_date": 1429123930, "creation_date": 1429119690, "question_id": 29657113, "link": "https://stackoverflow.com/questions/29657113/confusion-around-case-ctlcolor-static", "title": "Confusion around case CTLCOLOR_STATIC:", "body": "<p>I am working on updating some older code for our system and I am not understanding why a check for an edit control is working in a static case. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>switch(nCtlColor)\n{\ncase CTLCOLOR_STATIC:\n    {\n        if( ((pWnd-&gt;GetDlgCtrlID() == IDC_EDIT_SP_FROM) || (pWnd-&gt;GetDlgCtrlID() == IDC_EDIT_SP_TO)) &amp;&amp; \n            (m_RadioDateSelection == 0) )\n        {\n            pDC-&gt;SetBkColor(g_crSectionLTBlue);\n            hbr = g_cbSectionLTBlue;\n            break;\n        }\n\n        pDC-&gt;SetTextColor(g_crBlack);\n        hbr = g_cbSectionLTBlue;\n        pDC-&gt;SetBkColor(g_crSectionLTBlue);\n    }\n    break;\n\ncase CTLCOLOR_LISTBOX:\n    pDC-&gt;SetTextColor(g_crBlack);\n    pDC-&gt;SetBkColor(g_crWhite);\n    hbr = (HBRUSH)GetStockObject(WHITE_BRUSH);\n    break;\n\ncase CTLCOLOR_EDIT: case CTLCOLOR_MSGBOX:\n    pDC-&gt;SetTextColor(g_crBlack);\n    pDC-&gt;SetBkColor(g_crWhite);\n    hbr = (HBRUSH)GetStockObject(WHITE_BRUSH);      \n    break;\n}\n</code></pre>\n\n<p>Notice in the CTLCOLOR_STATIC there is a check for the IDC_EDIT controls.\nMy issue is if it is an edit control it shouldn't even be in the case to check and it should never pass the check and therefore the background of the edit control should never become blue. Also, the color is not set to white in any case inside the static case. However, the current checks work and when the radio is set to 0 both boxes are blue and if not they go white. In my static case the bkcolor is never set to white so why would it toggle correctly rather than always be blue or if it sees it as an edit and sets it to white, why isn't the bkcolor always white?</p>\n\n<p>Is an edit control supposed to be able to be checked in a static case?</p>\n"}, {"tags": ["c++", "image-processing", "itk"], "comments": [{"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 1, "creation_date": 1429120216, "post_id": 29657074, "comment_id": 47454146, "body": "Could you edit your post to include the exact error message you get? I&#39;m also confused as to what the <code>double</code> values you are trying to store are. Can you point them out in your code?"}, {"owner": {"reputation": 212, "user_id": 4775322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d03176a94ca793527d3f5016088932?s=128&d=identicon&r=PG&f=1", "display_name": "M&#39;henni Koroghli", "link": "https://stackoverflow.com/users/4775322/mhenni-koroghli"}, "reply_to_user": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1429120452, "post_id": 29657074, "comment_id": 47454301, "body": "This is the error message : <b>IntelliSense: no suitable conversion function from &quot;const itk::ImageRegion&lt;3U&gt;&quot; to &quot;double&quot; exists</b>"}], "answers": [{"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "is_accepted": true, "score": 2, "last_activity_date": 1429121329, "creation_date": 1429121329, "answer_id": 29657626, "question_id": 29657074, "link": "https://stackoverflow.com/questions/29657074/itk-image-processing-calculate-shape-features-for-3d-image/29657626#29657626", "title": "ITK-Image processing, calculate shape features for 3D image", "body": "<p>The problem isn't the <code>const</code> type--you are allowed to assign <em>from</em> <code>const</code>s, you are just not allowed to assign <em>to</em> them.</p>\n\n<p>The problem is that <code>GetBoundingBox()</code> returns an <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1ImageRegion.html\" rel=\"nofollow\"><code>itk::ImageRegion</code></a> object, which is a more complicated object that contains <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1Index.html\" rel=\"nofollow\"><code>Index</code></a> and <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1Size.html\" rel=\"nofollow\"><code>Size</code></a> objects as members. There is no simple way to cast this to a <code>double</code> that ITK understands, so trying to cast it to a <code>double</code> doesn't make sense. </p>\n\n<p>You should go through the <a href=\"http://www.itk.org/Doxygen/html/classitk_1_1ShapeLabelObject.html\" rel=\"nofollow\"><code>ShapeLabelObject</code></a> class documentation and see which methods return types that can be cast to <code>double</code>. </p>\n\n<p>For example, the <code>GetNumberOfPixels()</code> method returns a <code>SizeValueType</code>, which is just a <code>typedef</code> of <code>unsigned long</code>, so this could be cast to a <code>double</code>. The <code>GetElongation()</code> and <code>GetRoundness()</code> methods both have return type <code>const double</code> so those will be fine too.</p>\n"}], "owner": {"reputation": 212, "user_id": 4775322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d03176a94ca793527d3f5016088932?s=128&d=identicon&r=PG&f=1", "display_name": "M&#39;henni Koroghli", "link": "https://stackoverflow.com/users/4775322/mhenni-koroghli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "accepted_answer_id": 29657626, "answer_count": 1, "score": 3, "last_activity_date": 1429131846, "creation_date": 1429119568, "last_edit_date": 1429131846, "question_id": 29657074, "link": "https://stackoverflow.com/questions/29657074/itk-image-processing-calculate-shape-features-for-3d-image", "title": "ITK-Image processing, calculate shape features for 3D image", "body": "<p>I'm trying to calculate shape features for a 3D image using ITK library with C++. So I followed the <a href=\"http://www.itk.org/Doxygen/html/WikiExamples_2ImageProcessing_2ShapeAttributes_8cxx-example.html#_a1\" rel=\"nofollow\">example</a> given in the ITK documentation. The example takes a 2D image, and extracts different shape features. In my program, I just want for a given 3D image to get shapes attributes and stock them in an <code>array &lt;double&gt;</code>.</p>\n\n<p>Here is what I have so far :</p>\n\n<pre><code>//principal declarations\nconst unsigned int Dimension = 3;\ntypedef unsigned char                                 PixelType;\ntypedef unsigned short                                LabelType;\ntypedef itk::Image&lt;PixelType, Dimension&gt;              InputImageType;\ntypedef itk::Image&lt; LabelType, Dimension &gt;            OutputImageType;\ntypedef itk::ShapeLabelObject&lt; LabelType, Dimension &gt; ShapeLabelObjectType;\ntypedef itk::LabelMap&lt; ShapeLabelObjectType &gt;         LabelMapType;\ntypedef itk::ImageFileReader&lt;InputImageType&gt; ReaderType;\ntypedef itk::ConnectedComponentImageFilter &lt;InputImageType, OutputImageType   &gt; ConnectedComponentImageFilterType;\ntypedef itk::LabelImageToShapeLabelMapFilter&lt; OutputImageType, LabelMapType&gt; I2LType;\n\ntypedef itk::Array&lt; double &gt; MeasurementVectorType;\n\nMeasurementVectorType formes(9);\nInputImageType::Pointer image;\n\n//read the 3Dimage\nReaderType::Pointer reader = ReaderType::New();\nreader-&gt;SetFileName(file);\nreader-&gt;Update();\nimage = reader-&gt;GetOutput();\n\nConnectedComponentImageFilterType::Pointer connected =      ConnectedComponentImageFilterType::New ();\nconnected-&gt;SetInput(image);\nconnected-&gt;Update();\n\n// create the shape label map filter\nI2LType::Pointer i2l = I2LType::New();\ni2l-&gt;SetInput( connected-&gt;GetOutput() );\ni2l-&gt;SetComputePerimeter(true);\ni2l-&gt;Update(); \n\nLabelMapType *labelMap = i2l-&gt;GetOutput();\n\n//calculate shape attributes for the first label\nShapeLabelObjectType *labelObject = labelMap-&gt;GetNthLabelObject(0);\n            //stock the attributes in the array\n            formes[0]=labelObject-&gt;GetBoundingBox();\n            formes[1]=labelObject-&gt;GetNumberOfPixels();\n            formes[2]=labelObject-&gt;GetPhysicalSize();\n            formes[3]=labelObject-&gt;GetElongation();\n            formes[4]=labelObject-&gt;GetPerimeter();\n            formes[5]=labelObject-&gt;GetRoundness();\n            formes[6]=labelObject-&gt;GetEquivalentSphericalRadius();\n            formes[7]=labelObject-&gt;GetEquivalentSphericalPerimeter();\n            formes[8]=labelObject-&gt;GetFlatness();\n</code></pre>\n\n<p>I was able to read the 3D images and calculate its shape attributes. However I have this problem : i can't stock them in the <code>array &lt;double&gt;</code> because <code>labelObject</code> methodes returns a <code>const</code> type. I get this error : <strong>IntelliSense: no suitable conversion function from const itk::ImageRegion&lt;3U> to \"double\" exists</strong></p>\n\n<p>Does any one used ITK to do this ? If there is any other method to achieve that, could anyone point me to a solution please ?</p>\n\n<p>Any help will be much apreciated</p>\n"}, {"tags": ["c++", "segmentation-fault", "gdb", "point-cloud-library"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1429119347, "post_id": 29656988, "comment_id": 47453564, "body": "Some problems with destructors of any of the variables used in main?"}, {"owner": {"reputation": 1458, "user_id": 1616231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0aa864c7e5c559932d158188ea51f07?s=128&d=identicon&r=PG", "display_name": "D.J.Duff", "link": "https://stackoverflow.com/users/1616231/d-j-duff"}, "edited": false, "score": 0, "creation_date": 1429164710, "post_id": 29656988, "comment_id": 47472003, "body": "This is not a reproducible error without a definition of area_seg."}], "answers": [{"owner": {"reputation": 1458, "user_id": 1616231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0aa864c7e5c559932d158188ea51f07?s=128&d=identicon&r=PG", "display_name": "D.J.Duff", "link": "https://stackoverflow.com/users/1616231/d-j-duff"}, "is_accepted": true, "score": 1, "last_activity_date": 1429164700, "creation_date": 1429164700, "answer_id": 29666618, "question_id": 29656988, "link": "https://stackoverflow.com/questions/29656988/confusing-segfault-trace-using-pointcloudlibrary/29666618#29666618", "title": "Confusing segFault trace using PointCloudLibrary", "body": "<p>Probably what is happening is that <code>cloud_cut</code> is being destructed  twice. </p>\n\n<p>This line allocates <code>cloud_cut</code> on the stack and it will be destructed when the main function returns:</p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZRGB&gt; cloud_cut; \n</code></pre>\n\n<p>Similarly, when this smart pointer is destructed it will also trigger a destruction of the object to which it is pointing:</p>\n\n<pre><code>pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr floor_cut(&amp;cloud_cut)\n</code></pre>\n\n<p>So instead, construct the object on the heap in the first place.</p>\n"}], "owner": {"reputation": 149, "user_id": 1287981, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aHumb.jpg?s=128&g=1", "display_name": "Ponyisasquare", "link": "https://stackoverflow.com/users/1287981/ponyisasquare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 29666618, "answer_count": 1, "score": 1, "last_activity_date": 1429164700, "creation_date": 1429119263, "last_edit_date": 1429119818, "question_id": 29656988, "link": "https://stackoverflow.com/questions/29656988/confusing-segfault-trace-using-pointcloudlibrary", "title": "Confusing segFault trace using PointCloudLibrary", "body": "<p>Minimum reproducible error:</p>\n\n<pre><code>    int main( int argc, char**  argv)\n{  //std::cout &lt;&lt; \"initial area_seg\" &lt;&lt; std::endl;\npcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr cloud(new pcl::PointCloud&lt;pcl::PointXYZRGB&gt;() );\n    if (pcl::io::loadPCDFile&lt;pcl::PointXYZRGB&gt; (argv[1], *cloud) == -1){   \n      PCL_ERROR (\"Couldn't read the input file \\n\");\n      return (-1);\n    }   \n\n  std::cout &lt;&lt; \"floor cloud\" &lt;&lt; std::endl;\n    pcl::PointCloud&lt;pcl::PointXYZRGB&gt; cloud_cut; \n//custom void func that takes cloud in, and returns(by reference) cloud_cut\n    area_seg(-5,5,.15,5,-5,5,cloud, cloud_cut, \"null\");\n    pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr floor_cut(&amp;cloud_cut);//Fault HERE\n\n    return 0;\n}\n</code></pre>\n\n<p>According to the trace using GBD, command reaches return 0;  but then for some reason 'step' at this point takes control back to the previous line (generally, any Cloud::Ptr declarations) which has already been deallocated. I'm not sure if this is because it's out of scope, or because smart pointer deletes them when return is reached, or if that knowledge would even help me. The segFault is a Double free error. I believe that it is being dealocated because it is out of scope and then the smart pointer is trying to clean up.\nWhat am I missing here? Why is this happening? How can I avoid this? If you can't answer that, Is there a way to tell when an object gets deallocated(what code is run that dealocates)?\nI made sure compiler optimization is off, to ensure code runs linearly.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1429119770, "post_id": 29656976, "comment_id": 47453853, "body": "You have to specify any compile time or runtime errors verbatim in your question, to achieve an answer for this."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1429122722, "post_id": 29656976, "comment_id": 47455743, "body": "It&#39;s never good enough to say &quot;I get an error&quot;. You have to be precise and tell us what that error is, and where it occurs."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1429180428, "post_id": 29656976, "comment_id": 47481877, "body": "<i>&quot;I don&#39;t know how to call a function in C or C++&quot;</i> is not the type of question you should be asking on SO."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1429180487, "post_id": 29656976, "comment_id": 47481918, "body": "I&#39;m voting to close this question as off-topic because it shows zero research effort."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4793061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5575f2040f39a6e171ed876e36978c9?s=128&d=identicon&r=PG&f=1", "display_name": "nizzard0094", "link": "https://stackoverflow.com/users/4793061/nizzard0094"}, "edited": false, "score": 0, "creation_date": 1429290212, "post_id": 29657163, "comment_id": 47546153, "body": "this is the first thing that i did before here is the errors    Error\t1\terror C2664: &#39;HPOWERNOTIFY RegisterPowerSettingNotification(HANDLE,LPCGUID,DWORD)&#39; : cannot convert argument 2 from &#39;const GUID&#39; to &#39;LPCGUID&#39;\tc:\\users\\0110\\documents\\visual studio 2013\\projects\\lidclosingevent\\lidclosingevent\\source.cpp\t48\t&zwnj;&#8203;1\tLidClosingEvent"}, {"owner": {"reputation": 21, "user_id": 4793061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5575f2040f39a6e171ed876e36978c9?s=128&d=identicon&r=PG&f=1", "display_name": "nizzard0094", "link": "https://stackoverflow.com/users/4793061/nizzard0094"}, "edited": false, "score": 0, "creation_date": 1429290278, "post_id": 29657163, "comment_id": 47546204, "body": "2\tIntelliSense: no suitable conversion function from &quot;const GUID&quot; to &quot;LPCGUID&quot; exists\tc:\\Users\\0110\\documents\\visual studio 2013\\Projects\\LidClosingEvent\\LidClosingEvent\\Source.cpp\t48\t&zwnj;&#8203;41\tLidClosingEvent"}, {"owner": {"reputation": 1220, "user_id": 658732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac0a33ab8ae79f7ce3bd5ccc7123161?s=128&d=identicon&r=PG", "display_name": "AridTag", "link": "https://stackoverflow.com/users/658732/aridtag"}, "reply_to_user": {"reputation": 21, "user_id": 4793061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5575f2040f39a6e171ed876e36978c9?s=128&d=identicon&r=PG&f=1", "display_name": "nizzard0094", "link": "https://stackoverflow.com/users/4793061/nizzard0094"}, "edited": false, "score": 0, "creation_date": 1429290468, "post_id": 29657163, "comment_id": 47546338, "body": "Change GUID_LIDCLOSE_ACTION to &amp;GUID_LIDCLOSE_ACTION, and it should work. I will edit my answer to reflect that."}, {"owner": {"reputation": 21, "user_id": 4793061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5575f2040f39a6e171ed876e36978c9?s=128&d=identicon&r=PG&f=1", "display_name": "nizzard0094", "link": "https://stackoverflow.com/users/4793061/nizzard0094"}, "edited": false, "score": 0, "creation_date": 1429350755, "post_id": 29657163, "comment_id": 47566115, "body": "Worked thanks now i will go back learning more and coding more"}], "owner": {"reputation": 1220, "user_id": 658732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac0a33ab8ae79f7ce3bd5ccc7123161?s=128&d=identicon&r=PG", "display_name": "AridTag", "link": "https://stackoverflow.com/users/658732/aridtag"}, "is_accepted": true, "score": 3, "last_activity_date": 1429290477, "last_edit_date": 1429290477, "creation_date": 1429119837, "answer_id": 29657163, "question_id": 29656976, "link": "https://stackoverflow.com/questions/29656976/syntax-errors-when-using-registerpowersettingnotification/29657163#29657163", "title": "Syntax errors when using RegisterPowerSettingNotification", "body": "<p>It looks like you copied the RegisterPowerSettingNotification function signature into your main method and changed it's parameters.</p>\n\n<p>You have:</p>\n\n<pre><code>HPOWERNOTIFY WINAPI RegisterPowerSettingNotification(_In_  HANDLE hwnd, _In_  LPCGUID GUID_LIDCLOSE_ACTION, _In_ DWORD DEVICE_NOTIFY_WINDOW_HANDLE); \n</code></pre>\n\n<p>When you should have:</p>\n\n<pre><code>RegisterPowerSettingNotification(hWnd, &amp;GUID_LIDCLOSE_ACTION, DEVICE_NOTIFY_WINDOW_HANDLE);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4793061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5575f2040f39a6e171ed876e36978c9?s=128&d=identicon&r=PG&f=1", "display_name": "nizzard0094", "link": "https://stackoverflow.com/users/4793061/nizzard0094"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "accepted_answer_id": 29657163, "answer_count": 1, "score": -4, "last_activity_date": 1429290477, "creation_date": 1429119241, "last_edit_date": 1429125997, "question_id": 29656976, "link": "https://stackoverflow.com/questions/29656976/syntax-errors-when-using-registerpowersettingnotification", "title": "Syntax errors when using RegisterPowerSettingNotification", "body": "<p>I just started getting to know WINAPI after learning C++ online. I know that I should read more about WINAPI, but I want to do both learning and coding at the same time.</p>\n\n<p>This is my code. Its purpose is to check a function in WINAPI, but I keep getting an error. What is wrong with my code? </p>\n\n<pre><code>#ifndef UNICODE\n#define UNICODE\n#endif\n\n#include &lt;windows.h&gt;\n#include &lt;WinUser.h&gt;\n\n\n\nLRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);\n\nint WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE, PWSTR pCmdLine, int nCmdShow)\n{\n// Register the window class.\nconst wchar_t CLASS_NAME[] = L\"Sample Window Class\";\n\nWNDCLASS wc = {};\n\nwc.lpfnWndProc = WindowProc;\nwc.hInstance = hInstance;\nwc.lpszClassName = CLASS_NAME;\n\nRegisterClass(&amp;wc);\n\n// Create the window.\n\nHWND hwnd = CreateWindowEx(\n    0,                              // Optional window styles.\n    CLASS_NAME,                     // Window class\n    L\"Learn to Program Windows\",    // Window text\n    WS_OVERLAPPEDWINDOW,            // Window style\n\n    // Size and position\n    CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,\n\n    NULL,       // Parent window\n    NULL,       // Menu\n    hInstance,  // Instance handle\n    NULL        // Additional application data\n    );\n\nif (hwnd == NULL)\n{\n    return 0;\n}\n\nShowWindow(hwnd, nCmdShow);\nHPOWERNOTIFY WINAPI RegisterPowerSettingNotification(_In_  HANDLE hwnd, _In_  LPCGUID GUID_LIDCLOSE_ACTION, _In_ DWORD DEVICE_NOTIFY_WINDOW_HANDLE);//the problem is HERE i think why is not accepting DEVICE_NOTIFY_WINDOW_HANDLE if i leave it blank it works and compile but i don't get a msg \n\n// Run the message loop.\n\nMSG msg = {};\nwhile (GetMessage(&amp;msg, NULL, 0, 0))\n{\n    TranslateMessage(&amp;msg);\n    DispatchMessage(&amp;msg);\n}\n\nreturn 0;\n}\n\nLRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\nswitch (uMsg)\n{\ncase WM_POWERBROADCAST:\n    PostQuitMessage(0);\n    return 0;\n\n\ncase WM_DESTROY:\n    PostQuitMessage(0);\n    return 0;\n\ncase WM_PAINT:\n{\n    PAINTSTRUCT ps;\n    HDC hdc = BeginPaint(hwnd, &amp;ps);\n\n    FillRect(hdc, &amp;ps.rcPaint, (HBRUSH)(COLOR_WINDOW + 1));\n\n    EndPaint(hwnd, &amp;ps);\n}\nreturn 0;\n\n}\nreturn DefWindowProc(hwnd, uMsg, wParam, lParam);\n}\n</code></pre>\n\n<p>Errors:</p>\n\n<pre><code>Error   1   error C2143: syntax error : missing ')' before 'constant'   c:\\users\\0110\\documents\\visual studio 2013\\projects\\lidclosingevent\\lidclosingevent\\source.cpp  48  1   LidClosingEvent\nError   2   error C2143: syntax error : missing ';' before 'constant'   c:\\users\\0110\\documents\\visual studio 2013\\projects\\lidclosingevent\\lidclosingevent\\source.cpp  48  1   LidClosingEvent\nError   3   error C2059: syntax error : ')' c:\\users\\0110\\documents\\visual studio 2013\\projects\\lidclosingevent\\lidclosingevent\\source.cpp  48  1   LidClosingEvent\n    4   IntelliSense: expected a ')'    c:\\Users\\0110\\documents\\visual studio 2013\\Projects\\LidClosingEvent\\LidClosingEvent\\Source.cpp  48  121 LidClosingEvent\n</code></pre>\n\n<p>I use VS2013 and started with an empty project.</p>\n"}, {"tags": ["c++", "algorithm", "geolocation", "artificial-intelligence", "trilateration"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1429119197, "post_id": 29656921, "comment_id": 47453479, "body": "<i>&quot;Could someone please help me?&quot;</i> Did you actually state a concrete problem (besides linking) or question besides this?"}, {"owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1429120122, "post_id": 29656921, "comment_id": 47454079, "body": "You absolutely got the point, sorry for this. I edit my question..."}], "answers": [{"comments": [{"owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "edited": false, "score": 0, "creation_date": 1429125669, "post_id": 29658091, "comment_id": 47457552, "body": "waohh, you are a genius! I appreciate you help, it works! For me i got the right coordinates (8.02,4.13)"}, {"owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "edited": false, "score": 0, "creation_date": 1429125900, "post_id": 29658091, "comment_id": 47457725, "body": "I would like to ask an additional question, if no problem. If I want to expand it to the 3D case, where spheres intersect each other, the only thing I should add is: z = &#177;sqrt(r12 - x2 - y2)? The following question is about it: <a href=\"http://goo.gl/y30gPn\" rel=\"nofollow noreferrer\">goo.gl/y30gPn</a> . What is your advice? Thanks in advance!"}, {"owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "reply_to_user": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "edited": false, "score": 0, "creation_date": 1429133150, "post_id": 29658091, "comment_id": 47461949, "body": "For the 3D case it looks like you would just need to add a z component to each of the vectors (<code>exz</code>, <code>eyz</code>) and compute <code>ez</code> and <code>z</code> as on the Wikipedia page. Then the calculation for the final coordinates would add the term <code>&#177;z * ez</code> where <code>ez</code> is a vector (so you would need <code>ezx</code>, <code>ezy</code> and <code>ezz</code> like the other terms)."}, {"owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "edited": false, "score": 0, "creation_date": 1429134815, "post_id": 29658091, "comment_id": 47462788, "body": "Thanks! As i see the &quot;ez&quot; can be calculated with the cross product of ex and ey. I tried to do this, what do you think it is good? &quot;ezx=exx<i>eyx&quot;, &quot;ezy=exy</i>eyy&quot;, &quot;ezz=exz*eyz&quot; . After these steps the final Z coordinate should be: point1[2] + x * exz + y * eyz + z * ezz (where z = &#177;sqrt(r12 - x2 - y2)) Am I right? By the way i am really grateful, I like this site and helpful people like you very much!"}, {"owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "edited": false, "score": 0, "creation_date": 1429136281, "post_id": 29658091, "comment_id": 47463388, "body": "Because to the best of my knowledge, if we want to get a 3D coordinates, we should have 4 sphere for the clear and unequivocal solution. But I have really no clue where to put the data of the 4th point to this equations...Do you know how to handle the data of the 4th point/sphere?"}, {"owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "reply_to_user": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "edited": false, "score": 0, "creation_date": 1429144149, "post_id": 29658091, "comment_id": 47466027, "body": "The Wikipedia article only mentions 3 spheres (Trilateration, Tri = 3) and says there can be 0, 1 or 2 solutions to the problem."}, {"owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "edited": false, "score": 0, "creation_date": 1429166839, "post_id": 29658091, "comment_id": 47473175, "body": "that&#39;s okay, thanks for the infos! have a nice day! ;)"}], "owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "is_accepted": true, "score": 2, "last_activity_date": 1429122802, "last_edit_date": 1495541759, "creation_date": 1429122802, "answer_id": 29658091, "question_id": 29656921, "link": "https://stackoverflow.com/questions/29656921/trilateration-2d-algorithm-implementation/29658091#29658091", "title": "Trilateration (2D) algorithm implementation", "body": "<p>It's a little unclear, and perhaps incorrect, in the <a href=\"https://stackoverflow.com/questions/9747227/2d-trilateration\">linked SO answer</a> that the values of <code>i</code> and <code>j</code> are scalar values and computed a bit differently than the other vector quantities. More explicitly you should have:</p>\n\n<p>i = e<sub>x</sub> \u00b7 (P3 - P1) = e<sub>xx</sub> (P3<sub>x</sub> - P1<sub>x</sub>) + e<sub>xy</sub> (P3<sub>y</sub> - P1<sub>y</sub>) = ix + iy</p>\n\n<p>j = e<sub>y</sub> \u00b7 (P3 - P1) = e<sub>yx</sub> (P3<sub>x</sub> - P1<sub>x</sub>) + e<sub>yy</sub> (P3<sub>y</sub> - P1<sub>y</sub>) = jx + jy</p>\n\n<p>Note that <code>\u00b7</code> is the dot product of two vectors here. Thus, in your code there should be no <code>ix</code>, <code>iy</code>, <code>jx</code> or <code>jy</code>. </p>\n\n<p>Also, in your calculation of <code>y</code> you should change the denominator of <code>/2*j</code> to:</p>\n\n<pre><code> / (2*j)\n</code></pre>\n\n<p>otherwise you are multiplying by <code>j</code> instead of dividing. Making these changes gives me the result of <code>[7.05, 5.74]</code> which is closer to your expected values.</p>\n"}, {"owner": {"reputation": 31, "user_id": 6477008, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fP_0iozTvZc/AAAAAAAAAAI/AAAAAAAADFY/m1zuX-9z2D8/photo.jpg?sz=128", "display_name": "German Espinosa", "link": "https://stackoverflow.com/users/6477008/german-espinosa"}, "is_accepted": false, "score": 3, "last_activity_date": 1466123017, "creation_date": 1466123017, "answer_id": 37871334, "question_id": 29656921, "link": "https://stackoverflow.com/questions/29656921/trilateration-2d-algorithm-implementation/37871334#37871334", "title": "Trilateration (2D) algorithm implementation", "body": "<p>I used a couple of auxiliary variables but it works just fine... </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;math.h&gt; \n#include &lt;vector&gt;\nusing namespace std;\n\nstruct point \n{\n    float x,y;\n};\n\nfloat norm (point p) // get the norm of a vector\n{\n    return pow(pow(p.x,2)+pow(p.y,2),.5);\n}\n\npoint trilateration(point point1, point point2, point point3, double r1, double r2, double r3) {\n    point resultPose;\n    //unit vector in a direction from point1 to point 2\n    double p2p1Distance = pow(pow(point2.x-point1.x,2) + pow(point2.y-   point1.y,2),0.5);\n    point ex = {(point2.x-point1.x)/p2p1Distance, (point2.y-point1.y)/p2p1Distance};\n    point aux = {point3.x-point1.x,point3.y-point1.y};\n    //signed magnitude of the x component\n    double i = ex.x * aux.x + ex.y * aux.y;\n    //the unit vector in the y direction. \n    point aux2 = { point3.x-point1.x-i*ex.x, point3.y-point1.y-i*ex.y};\n    point ey = { aux2.x / norm (aux2), aux2.y / norm (aux2) };\n    //the signed magnitude of the y component\n    double j = ey.x * aux.x + ey.y * aux.y;\n    //coordinates\n    double x = (pow(r1,2) - pow(r2,2) + pow(p2p1Distance,2))/ (2 * p2p1Distance);\n    double y = (pow(r1,2) - pow(r3,2) + pow(i,2) + pow(j,2))/(2*j) - i*x/j;\n    //result coordinates\n    double finalX = point1.x+ x*ex.x + y*ey.x;\n    double finalY = point1.y+ x*ex.y + y*ey.y;\n    resultPose.x = finalX;\n    resultPose.y = finalY;\n    return resultPose;\n}\n\nint main(int argc, char* argv[]){\n    point finalPose;\n    point p1 = {4.0,4.0};\n    point p2 = {9.0,7.0};\n    point p3 = {9.0,1.0};\n    double r1,r2,r3;\n    r1 = 4;\n    r2 = 3;\n    r3 = 3.25;\n    finalPose = trilateration(p1,p2,p3,r1,r2,r3);\n    cout&lt;&lt;\"X:::  \"&lt;&lt;finalPose.x&lt;&lt;endl;\n    cout&lt;&lt;\"Y:::  \"&lt;&lt;finalPose.y&lt;&lt;endl; \n}\n</code></pre>\n\n<p>$ the output is:</p>\n\n<pre><code>X:::  8.02188\nY:::  4.13021\n</code></pre>\n"}], "owner": {"reputation": 833, "user_id": 1797020, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aAt5n.jpg?s=128&g=1", "display_name": "mirind4", "link": "https://stackoverflow.com/users/1797020/mirind4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7136, "favorite_count": 3, "accepted_answer_id": 29658091, "answer_count": 2, "score": 0, "last_activity_date": 1609966760, "creation_date": 1429119081, "last_edit_date": 1495541759, "question_id": 29656921, "link": "https://stackoverflow.com/questions/29656921/trilateration-2d-algorithm-implementation", "title": "Trilateration (2D) algorithm implementation", "body": "<p>I am trying to implement the Trilateration process in 2D. The wikipedia article relating to this: <a href=\"http://en.wikipedia.org/wiki/Trilateration\" rel=\"nofollow noreferrer\">Tilateration</a> </p>\n\n<p>I have found a nice question here at this site, where the algorithm is well explained:<a href=\"https://stackoverflow.com/questions/9747227/2d-trilateration\">artifical intelligence</a></p>\n\n<p>After all, I tried to implement the algorithm in c++. Unfortunately I faced some problems...\nLet's see my implementation. It is only a function: The first inputs are three vector, each representing a 2D point with X,Y coordinates. The other (r1,r2,r3) input variables stand for the distance/radius of each point.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;math.h&gt; \n#include &lt;vector&gt;\nusing namespace std;\n\nstd::vector&lt;double&gt; trilateration(double point1[], double point2[], double point3[], double r1, double r2, double r3) {\n    std::vector&lt;double&gt; resultPose;\n    //unit vector in a direction from point1 to point 2\n    double p2p1Distance = pow(pow(point2[0]-point1[0],2) + pow(point2[1]-point1[1],2),0.5);\n    double exx = (point2[0]-point1[0])/p2p1Distance;\n    double exy = (point2[1]-point1[1])/p2p1Distance;\n    //signed magnitude of the x component\n    double ix = exx*(point3[0]-point1[0]);\n    double iy = exy*(point3[1]-point1[1]);\n    //the unit vector in the y direction. \n    double eyx = (point3[0]-point1[0]-ix*exx)/pow(pow(point3[0]-point1[0]-ix*exx,2) + pow(point3[1]-point1[1]-iy*exy,2),0.5);\n    double eyy = (point3[1]-point1[1]-iy*exy)/pow(pow(point3[0]-point1[0]-ix*exx,2) + pow(point3[1]-point1[1]-iy*exy,2),0.5);\n    //the signed magnitude of the y component\n    double jx = eyx*(point3[0]-point1[0]);\n    double jy = eyy*(point3[1]-point1[1]);\n    //coordinates\n    double x = (pow(r1,2) - pow(r2,2) + pow(p2p1Distance,2))/ (2 * p2p1Distance);\n    double y = (pow(r1,2) - pow(r3,2) + pow(iy,2) + pow(jy,2))/2*jy - ix*x/jx;\n    //result coordinates\n    double finalX = point1[0]+ x*exx + y*eyx;\n    double finalY = point1[1]+ x*exy + y*eyy;\n    resultPose.push_back(finalX);\n    resultPose.push_back(finalY);\n    return resultPose;\n}\n</code></pre>\n\n<p>As I mentioned I followed <a href=\"https://stackoverflow.com/questions/9747227/2d-trilateration\">this</a> article. I am of the opinion that the problem lies at the part where the y coordinate is calculated. I am also not sure about last part, where I calculate finalX, finalY...</p>\n\n<p>My main function is the following:</p>\n\n<pre><code>int main(int argc, char* argv[]){\n    std::vector&lt;double&gt; finalPose;\n    double p1[] = {4.0,4.0};\n    double p2[] = {9.0,7.0};\n    double p3[] = {9.0,1.0};\n    double r1,r2,r3;\n    r1 = 4;\n    r2 = 3;\n    r3 = 3.25;\n    finalPose = trilateration(p1,p2,p3,r1,r2,r3);\n    cout&lt;&lt;\"X:::  \"&lt;&lt;finalPose[0]&lt;&lt;endl;\n    cout&lt;&lt;\"Y:::  \"&lt;&lt;finalPose[1]&lt;&lt;endl; \n    //x = 8, y = 4.1\n\n}\n</code></pre>\n\n<p>The result should be around X~8 and Y~4.1, but I got X = 13.5542 and Y=-5.09038</p>\n\n<p>So my problem is and question is: I have problem with dividing the calculations for x and y. I think I could solve the algorithm till x, after that I have problems with calculating y. </p>\n\n<p>The calculation is the following for y: y = (r12 - r32 + i2 + j2) / 2j - ix / j</p>\n\n<p>I do not know which i and j  I should use here since I have two i (ix,iy) and two j(jx,jy). As you can see I used iy and jy but at the end of the line I used ix due to multiplication with x.\nThanks in advance!</p>\n"}, {"tags": ["c++", "c", "opencl", "brute-force"], "comments": [{"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1429120724, "post_id": 29656770, "comment_id": 47454473, "body": "Are you checking the return codes from the OpenCL API calls (i.e. the value of <code>err</code> after API call)?"}, {"owner": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "reply_to_user": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1429123354, "post_id": 29656770, "comment_id": 47456124, "body": "@jprice i checked that, got some error feedback in creating kernel, and fixed that. Now the problems are inside that kernel.cl file.  by any chance, did you know how to define these variables correctly in openCL custom header file?  <code>__global __constant unsigned char cudaBrute[MAX_BRUTE_LENGTH]; __global __constant unsigned char cudaCharSet[95]; __global unsigned char correctPass[MAX_TOTAL];</code>"}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1429123760, "post_id": 29656770, "comment_id": 47456357, "body": "You need to pass your OpenCL buffers to the kernel as arguments, declared as (for example) <code>global uchar *data</code>."}, {"owner": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "reply_to_user": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1429124738, "post_id": 29656770, "comment_id": 47456978, "body": "@jprice can you give more explanation or example, i don&#39;t understand at all, sorry."}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1429126992, "post_id": 29656770, "comment_id": 47458412, "body": "Passing a buffer to a kernel is just like passing a pointer as an argument to a regular C function. Declare it as a pointer with the <code>global</code> attribute, and then call <code>clSetKernelArg(kernel, index, sizeof(cl_mem), &amp;buffer)</code> to set the argument."}, {"owner": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "reply_to_user": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1429131016, "post_id": 29656770, "comment_id": 47460691, "body": "@jprice thanks, solved that one before your answer.   now that i just use 2 files: kernel.cl and main.cpp, got some errors in kernel about <b>function in the kernel declared implicitly</b> and some variable in the kernel undefined , which they were there <b>already defined</b> in the main file."}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1429131469, "post_id": 29656770, "comment_id": 47460962, "body": "Any functions and variables that you use from a kernel need to be defined in the same source file (or a header file included by it). The OpenCL kernel will not be able to access functions and variables defined in the host program."}, {"owner": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "reply_to_user": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1429135133, "post_id": 29656770, "comment_id": 47462918, "body": "@jprice wow thanks mate, the kernel is now working, or at least readable. I just updated this post, could you please take a brief look. thanks before."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "edited": false, "score": 0, "creation_date": 1429139408, "post_id": 29661800, "comment_id": 47464499, "body": "finally it makes sense for me about the passing buffer, thanks. But still, it doesn&#39;t solve those 2 problems, haven&#39;t found the causes... What is the equivalent of <code>dim3 dimGrid(64); dim3 dimBlock(128);</code> in openCL?"}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "reply_to_user": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "edited": false, "score": 0, "creation_date": 1429141288, "post_id": 29661800, "comment_id": 47465144, "body": "@alfonsouchiha Local size = <code>128</code>, global size = <code>128*64</code>"}, {"owner": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "edited": false, "score": 0, "creation_date": 1429195608, "post_id": 29661800, "comment_id": 47493835, "body": "do i need to write every variable in the kernel in &#39;_global&#39; or &#39;_constant&#39;, e.g. <code>_kernel void crack( _global int numThreads, _global int digit, .....){...}</code> ?"}, {"owner": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "edited": false, "score": 0, "creation_date": 1429264913, "post_id": 29661800, "comment_id": 47528269, "body": "can i discuss this with you personally ? I don&#39;t want to make this post long without an actual answer. Thanks."}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "reply_to_user": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "edited": false, "score": 0, "creation_date": 1429266886, "post_id": 29661800, "comment_id": 47529621, "body": "OK: <a href=\"http://chat.stackoverflow.com/rooms/75491/bruteforce-in-opencl-port-from-cuda-isnt-working\">chat.stackoverflow.com/rooms/75491/&hellip;</a>"}], "owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "is_accepted": true, "score": 2, "last_activity_date": 1429276437, "last_edit_date": 1429276437, "creation_date": 1429135738, "answer_id": 29661800, "question_id": 29656770, "link": "https://stackoverflow.com/questions/29656770/bruteforce-in-opencl-port-from-cuda-isnt-working/29661800#29661800", "title": "bruteforce in OpenCL (port from CUDA) isn&#39;t working", "body": "<p>Your kernel is reading and writing from constant arrays defined at program scope in your OpenCL kernel source code (<code>cudaBrute</code>, <code>cudaCharSet</code>, <code>correctPass</code>). These arrays are not initialised, and the host will never be able to get the output from the kernel. To transfer input data from the host to a kernel and to retrieve results from a kernel, you need to use kernel arguments, not program scope variables.</p>\n\n<p>Your kernel definition should look something like this:</p>\n\n<pre><code>__kernel void crack(unsigned int numThreads, unsigned int charSetLen,\n                    unsigned int bruteLength, unsigned int v1,\n                    unsigned int v2, unsigned int v3, unsigned int v4,\n                    __global uchar *cudaBrute, \n                    __global uchar *cudaCharSet,\n                    __global uchar *correctPass)\n{\n  ...\n  (do stuff with the arguments)\n  ...\n}\n</code></pre>\n\n<p>To set the arguments from your host code, you would do something like this:</p>\n\n<pre><code>// Set the arguments to our compute kernel\nerr  = clSetKernelArg(kernel, 0, sizeof(int), &amp;numThreads);\nerr  |= clSetKernelArg(kernel, 1, sizeof(int), &amp;charSetLen);\nerr  |= clSetKernelArg(kernel, 2, sizeof(int), &amp;digit);\nerr  |= clSetKernelArg(kernel, 3, sizeof(unsigned int), &amp;v1);\nerr  |= clSetKernelArg(kernel, 4, sizeof(unsigned int), &amp;v2);\nerr  |= clSetKernelArg(kernel, 5, sizeof(unsigned int), &amp;v3);\nerr  |= clSetKernelArg(kernel, 6, sizeof(unsigned int), &amp;v4);\nerr  |= clSetKernelArg(kernel, 7, sizeof(cl_mem), &amp;cudaBrute);\nerr  |= clSetKernelArg(kernel, 8, sizeof(cl_mem), &amp;cudaCharSet);\nerr  |= clSetKernelArg(kernel, 9, sizeof(cl_mem), &amp;correctPass);\n</code></pre>\n\n<p>Notice the second argument, which is the argument index in your kernel definition, and how for the last three arguments we are now passing in the buffer we created with <code>clCreateBuffer</code>.</p>\n\n<hr>\n\n<p>(EDIT: A couple more issues were found after further debugging)</p>\n\n<p>You are updating the value of <code>digit</code> on the host. In order to pass this updated value to the device for each kernel invocation, you need to re-set the kernel argument. You can do this simply by moving this line to just before your <code>clEnqueueNDRangeKernel</code> call:</p>\n\n<pre><code>err  |= clSetKernelArg(kernel, 2, sizeof(unsigned int), &amp;digit);\n</code></pre>\n\n<p>When you write data to the <code>cudaCharSet</code> buffer, you need to make sure you are writing the correct amount. Your code currently uses <code>bytes</code> (which is 14), but this should really be <code>charSetLen</code> (which is 65):</p>\n\n<pre><code>err = clEnqueueWriteBuffer(queue, cudaCharSet, CL_TRUE, 0,\n                           charSetLen, charSet, 0, NULL, NULL);\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4337581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CRJN.jpg?s=128&g=1", "display_name": "alfonsouchiha", "link": "https://stackoverflow.com/users/4337581/alfonsouchiha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 2, "accepted_answer_id": 29661800, "answer_count": 1, "score": 5, "last_activity_date": 1429276437, "creation_date": 1429118618, "last_edit_date": 1429266911, "question_id": 29656770, "link": "https://stackoverflow.com/questions/29656770/bruteforce-in-opencl-port-from-cuda-isnt-working", "title": "bruteforce in OpenCL (port from CUDA) isn&#39;t working", "body": "<p><em>*another update in code and questions*</em></p>\n\n<p>just started to learn openCL about 1 week or so, and i tried to port a CUDA program about bruteforcing a MD5 hash to get an actual string from it. I use 2 files: kernel.cl, and main.cpp.</p>\n\n<pre><code>//this is kernel.cl\n\n{...*defining some md5 variables*...}\n\nvoid IncrementBruteGPU(unsigned char* ourBrute, unsigned int charSetLen, unsigned int bruteLength, unsigned int incrementBy){\nint i = 0;\nwhile(incrementBy &gt; 0 &amp;&amp; i &lt; bruteLength)\n{\n    int add = incrementBy + ourBrute[i];\n    ourBrute[i] = add % charSetLen;\n    incrementBy = add / charSetLen;\n    i++;\n}}\n\nvoid md5_vfy(unsigned char* data, unsigned int length, unsigned int *a1, unsigned int *b1, unsigned int *c1, unsigned int *d1){\n{...*some md5 hashing function*...}}\n\n__kernel void crack(unsigned int numThreads, unsigned int charSetLen,\n                unsigned int bruteLength, unsigned int v1,\n                unsigned int v2, unsigned int v3, unsigned int v4,\n                __constant unsigned char *cudaBrute, \n                __constant unsigned char *cudaCharSet,\n                __global unsigned char *correctPass){\n//count index\nunsigned int idx = get_global_id(0);\nint totalLen = 0;\nint bruteStart = 0;\n\nunsigned char word[14];\nunsigned char ourBrute[14];\n\nint i = 0;\n\nfor(i = 0; i &lt; 14; i++)\n{\n    ourBrute[i] = cudaBrute[i];\n}\n\ni = 0;\nbruteStart = i;\ni+= bruteLength;\ntotalLen = i;\n\nIncrementBruteGPU(ourBrute, charSetLen, bruteLength, idx);\nint timer = 0;\nfor(timer = 0; timer &lt; 200; timer++)\n{\n    //substitute into string\n    for(i = 0; i &lt; bruteLength; i++)\n    {\n        word[i+bruteStart] = cudaCharSet[ourBrute[i]];\n    }\n\n    unsigned int c1 = 0, c2 = 0, c3 = 0, c4 = 0;\n    //find MD5 hash from word\n    md5_vfy(word,totalLen, &amp;c1, &amp;c2, &amp;c3, &amp;c4);\n\n    //compare hash with the input one\n    if(c1 == v1 &amp;&amp; c2 == v2 &amp;&amp; c3 == v3 &amp;&amp; c4 == v4)\n    {\n        //place the right string into first index of array\n        int j;\n        for(j= 0; j &lt; 14; j++)\n        {\n            correctPass[j] = word[j];\n        }\n        correctPass[totalLen] = 0;\n    }\n    IncrementBruteGPU(ourBrute, charSetLen, bruteLength, numThreads);\n}}\n</code></pre>\n\n<p>and this is the main:</p>\n\n<pre><code>//just the main, not the entire main.cpp\nint main( int argc, char** argv){\nint digit=1;\nint charSetLen = 0;\nchar hash[32];\nchar *strhash[32];\n\nprintf(\"Insert Hash: \");\nscanf(\"%s\", strhash);\nsystem(\"cls\");\n\nint numThreads = BLOCKS * THREADS_PER_BLOCK;\n\nunsigned char currentBrute[14];\nunsigned char cpuCorrectPass[14];\n\nZeroFill(currentBrute, 14);\nZeroFill(cpuCorrectPass, 14);\n\ncharSetLen = 65;\nunsigned char charSet[65];\nmemcpy(charSet, \" abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@_\", charSetLen);\nmemcpy(hash, strhash, 32);\n\n//break hash into 4 processes of MD5\nunsigned int v1, v2, v3, v4;\nmd5_to_ints(hash,&amp;v1,&amp;v2,&amp;v3,&amp;v4);\n\n//openCL starts here\ncl_platform_id cpPlatform;        // OpenCL platform\ncl_device_id device_id;           // device ID\ncl_context context;               // context\ncl_command_queue queue;           // command queue\ncl_program program;               // program\ncl_kernel kernel;                 // kernel\n\ncl_int err;\ncl_mem correctPass;\ncl_mem cudaCharSet;\ncl_mem cudaBrute;\n\nsize_t globalSize, localSize;\nsize_t bytes = 14*sizeof(char);\n\n//5 work-groups\nlocalSize = 10;\nglobalSize = 50;\n\n // Bind to platform\nerr = clGetPlatformIDs(1, &amp;cpPlatform, NULL);\nif(err &lt; 0) {\n  perror(\"Couldn't identify a platform\");\n  exit(1);\n} \n\n// Get ID for the device\nerr = clGetDeviceIDs(cpPlatform, CL_DEVICE_TYPE_GPU, 1, &amp;device_id, NULL);\nif(err == CL_DEVICE_NOT_FOUND) {\n  err = clGetDeviceIDs(cpPlatform, CL_DEVICE_TYPE_CPU, 1, &amp;device_id, NULL);\n}\nif(err &lt; 0) {\n  perror(\"Couldn't access any devices\");\n  exit(1);   \n}\n\n// Create a context  \ncontext = clCreateContext(0, 1, &amp;device_id, NULL, NULL, &amp;err);\nif(err &lt; 0) {\n  perror(\"Couldn't create a context\");\n  exit(1);   \n}\n\n// Create a command queue \nqueue = clCreateCommandQueue(context, device_id, CL_QUEUE_PROFILING_ENABLE, &amp;err);\nif(err &lt; 0) {\n  perror(\"Couldn't create a command queue\");\n  exit(1);   \n}\n\n// Build the program executable \nprogram = build_program(context, device_id, PROGRAM_FILE);\n\n // Create the compute kernel in the program we wish to run\nkernel = clCreateKernel(program, KERNEL_FUNC, &amp;err);\nif(err &lt; 0) {\n  perror(\"Couldn't create a kernel\");\n  exit(1);\n}\n\n// Create the input and output arrays in device memory for our calculation\ncudaBrute = clCreateBuffer(context, CL_MEM_READ_ONLY, 14, NULL, NULL);\ncudaCharSet = clCreateBuffer(context, CL_MEM_READ_ONLY, 95, NULL, NULL);\ncorrectPass = clCreateBuffer(context, CL_MEM_READ_WRITE, 14, NULL, NULL);\n\n// Write our data set into the input array in device memory\nerr = clEnqueueWriteBuffer(queue, correctPass, CL_TRUE, 0,\n    bytes, cpuCorrectPass, 0, NULL, NULL);\nerr = clEnqueueWriteBuffer(queue, cudaCharSet, CL_TRUE, 0,\n    bytes, charSet, 0, NULL, NULL);\n\n// Set the arguments to our compute kernel\nerr  = clSetKernelArg(kernel, 0, sizeof(unsigned int), &amp;numThreads);\nerr  |= clSetKernelArg(kernel, 1, sizeof(unsigned int), &amp;charSetLen);\nerr  |= clSetKernelArg(kernel, 2, sizeof(unsigned int), &amp;digit);\nerr  |= clSetKernelArg(kernel, 3, sizeof(unsigned int), &amp;v1);\nerr  |= clSetKernelArg(kernel, 4, sizeof(unsigned int), &amp;v2);\nerr  |= clSetKernelArg(kernel, 5, sizeof(unsigned int), &amp;v3);\nerr  |= clSetKernelArg(kernel, 6, sizeof(unsigned int), &amp;v4);\nerr  |= clSetKernelArg(kernel, 7, sizeof(cl_mem), &amp;cudaBrute);\nerr  |= clSetKernelArg(kernel, 8, sizeof(cl_mem), &amp;cudaCharSet);\nerr  |= clSetKernelArg(kernel, 9, sizeof(cl_mem), &amp;correctPass);\n\nbool finished = false;\nint ct = 0;\nwhile(true){\ndo{\n    err = clEnqueueWriteBuffer(queue, cudaBrute, CL_TRUE, 0,\n        bytes, currentBrute, 0, NULL, NULL);\n\n// Execute the kernel over the entire range of the data set  \n    err = clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &amp;globalSize, &amp;localSize,\n                                                          0, NULL, NULL);\n\n// Wait for the command queue to get serviced before reading back results\n    clFinish(queue);\n\n// Read the results from the device\n    clEnqueueReadBuffer(queue, correctPass, CL_TRUE, 0, bytes, cpuCorrectPass, 0, NULL, NULL );\n\n    if(cpuCorrectPass[0] != 0)\n    {       \n        printf(\"MD5 Cracked----&gt;\\t\");\n        int k = 0;\n        while(cpuCorrectPass[k] != 0)\n        {\n            printf(\"%c\", cpuCorrectPass[k]);\n            k++;\n        }\n        printf(\"\\n\\n\");\n        return 0;\n    }\n    finished = BruteIncrement(currentBrute, charSetLen, digit, numThreads * 200);\n    if(ct % OUTPUT_INTERVAL == 0)\n    {\n        printf(\"STATUS: \");\n        int k = 0;\n        for(k = 0; k &lt; digit; k++)\n            printf(\"%c\",charSet[currentBrute[k]]);\n        printf(\"\\n\");\n    }\n    ct++;\n} while(!finished);\n    digit=digit+1;\n}   \n// release OpenCL resources\nclReleaseMemObject(correctPass);\nclReleaseMemObject(cudaCharSet);\nclReleaseMemObject(cudaBrute);\nclReleaseProgram(program);\nclReleaseKernel(kernel);\nclReleaseCommandQueue(queue);\nclReleaseContext(context);\n\nreturn 0;}\n</code></pre>\n\n<p>the problem with this program is <strong>it never finds the right string</strong>. Seems like the idea of <strong>comparing brute-hashes and the input hash isn't working</strong>. I got the CUDA version works perfectly .</p>\n\n<p><strong>Please kindly tell me what makes this doesn't run correctly</strong>. I suspect either the kernel isn't working at all or my lack of understanding about read/write memory &amp; buffer in openCL or in general cause this.</p>\n\n<p>*if you want to see all the files, please ask me., because i think it will be too long if i post them here.\nthanks before and sorry for the bad formatting.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1429118477, "post_id": 29656695, "comment_id": 47453075, "body": "Read a string and search for &quot;1&quot;, &quot;12&quot;, ..."}, {"owner": {"reputation": 19518, "user_id": 968969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0802303aaa5f03f4cec652171dffcbc7?s=128&d=identicon&r=PG", "display_name": "Tony Hopkinson", "link": "https://stackoverflow.com/users/968969/tony-hopkinson"}, "edited": false, "score": 0, "creation_date": 1429118549, "post_id": 29656695, "comment_id": 47453123, "body": "or convert the number to a string and search it"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429118983, "post_id": 29656695, "comment_id": 47453357, "body": "@Sam In fact condition either the number contains 1 or 12 is equivalent to the condition whether the number contains 1.:)"}], "answers": [{"owner": {"reputation": 3187, "user_id": 4350216, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uYP0f.jpg?s=128&g=1", "display_name": "Ali Akber", "link": "https://stackoverflow.com/users/4350216/ali-akber"}, "is_accepted": false, "score": 0, "last_activity_date": 1429118518, "creation_date": 1429118518, "answer_id": 29656731, "question_id": 29656695, "link": "https://stackoverflow.com/questions/29656695/how-do-i-check-if-an-integer-exists-in-a-variable-in-c/29656731#29656731", "title": "How do I check if an integer exists in a variable in C++?", "body": "<p>Count the number of occurrence of each digits in input number and then check it with the pattern numbers digit.<br>\nIf patterns digit is less than input numbers count - the answer is no otherwise yes.</p>\n"}, {"comments": [{"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1429119108, "post_id": 29656860, "comment_id": 47453437, "body": "I would prefer pre-initialized values, just in case"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429119188, "post_id": 29656860, "comment_id": 47453472, "body": "@therainmaker  Ingenious! And what about a number like, for example, 10?:)"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1429119499, "post_id": 29656860, "comment_id": 47453667, "body": "@therainmaker Your code is entirely wrong because you have not understood the assignment.:)"}, {"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429120342, "post_id": 29656860, "comment_id": 47454228, "body": "@VladfromMoscow: Thanks for pointing it out. I had not understood the question initially. Stupid error on my part. Is it fine now?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429120633, "post_id": 29656860, "comment_id": 47454417, "body": "@therainmaker I would not say that it is fine but at least it is closer to the task description.:)"}, {"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429120799, "post_id": 29656860, "comment_id": 47454527, "body": "@VladfromMoscow: What is the reason for not being fine? Is it because I have not given a complete code, and left some of it to the OP. Or is it because my code isn&#39;t as modular as yours (although I do mention it later in my answer). Or is there some other reason? I would appreciate feedback as it would help me get better, and that is why I&#39;m here. :)"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1429120923, "post_id": 29656860, "comment_id": 47454600, "body": "@therainmaker For example it is  a bad idea to use -1 instead of std::string::npos."}, {"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429121035, "post_id": 29656860, "comment_id": 47454678, "body": "@VladfromMoscow : Thanks for that. Any reason though? Or is it readability?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429121421, "post_id": 29656860, "comment_id": 47454924, "body": "@therainmaker It is simply confusing code. And in general it is a bad idea to use magic numbers."}, {"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1429121470, "post_id": 29656860, "comment_id": 47454964, "body": "@VladfromMoscow: Thanks. Will incorporate this in my future answers."}], "owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "is_accepted": false, "score": 1, "last_activity_date": 1429120146, "last_edit_date": 1429120146, "creation_date": 1429118890, "answer_id": 29656860, "question_id": 29656695, "link": "https://stackoverflow.com/questions/29656695/how-do-i-check-if-an-integer-exists-in-a-variable-in-c/29656860#29656860", "title": "How do I check if an integer exists in a variable in C++?", "body": "<p>For this, you can take the input in the form of a string and check if the required numbers are present.</p>\n\n<pre><code>string input;\ncout &lt;&lt; \"What number?\" &lt;&lt; endl;\ncin &gt;&gt; input;\nstring to_find = \"12\";\nint location = input.find(to_find);\nif (location == -1)\n  cout &lt;&lt; \"12 wasn't found in the string\" &lt;&lt; endl;\nelse\n  cout &lt;&lt; \"12 was present in the string, beginning at index \" &lt;&lt; location &lt;&lt; endl;\n// You can similarly do this for other cases.\n</code></pre>\n\n<p>Things you should take care of is to check whether the input was actually a number. Also, if you want to check many numbers, you can store all of them in an array, and put the <code>find()</code> command inside a loop.</p>\n"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1429121474, "last_edit_date": 1429121474, "creation_date": 1429119888, "answer_id": 29657180, "question_id": 29656695, "link": "https://stackoverflow.com/questions/29656695/how-do-i-check-if-an-integer-exists-in-a-variable-in-c/29657180#29657180", "title": "How do I check if an integer exists in a variable in C++?", "body": "<p>You can use standard function <code>std::to_string</code> to convert the number to a string and then apply method <code>find</code>. For example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    int number = 123;\n\n    for ( int x : { 1, 12, 32 } )\n    {\n        if ( std::to_string( number ).find( std::to_string( x ) ) != std::string::npos )\n        {\n            std::cout &lt;&lt; \"Number \" &lt;&lt; number &lt;&lt; \" contains \" &lt;&lt; x &lt;&lt; std::endl;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Number \" &lt;&lt; number &lt;&lt; \" does not contain \" &lt;&lt; x &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Number 123 contains 1\nNumber 123 contains 12\nNumber 123 does not contain 32\n</code></pre>\n\n<p>I suppose that searched numbers are also entered as integers. Otherwise you could have an array of string literals that correspond to the numbers.</p>\n\n<p>Also from your description it is not clear whether number 123 contains for example 13 or 32 or 21.</p>\n"}, {"owner": {"reputation": 703, "user_id": 2850608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100006061862863/picture?type=large", "display_name": "Andreas Vennstr&#246;m", "link": "https://stackoverflow.com/users/2850608/andreas-vennstr%c3%b6m"}, "is_accepted": false, "score": 0, "last_activity_date": 1429119918, "creation_date": 1429119918, "answer_id": 29657193, "question_id": 29656695, "link": "https://stackoverflow.com/questions/29656695/how-do-i-check-if-an-integer-exists-in-a-variable-in-c/29657193#29657193", "title": "How do I check if an integer exists in a variable in C++?", "body": "<p>This should work. Just convert the number to a string and check that against your numbers.</p>\n\n<pre><code>int number;\nstd::cin &gt;&gt; number;\nif ( std::to_string( number ).find( \"1\" ) != std::string::npos )\n    std::cout &lt;&lt; \"The number contains 1\" &lt;&lt; std::endl;\nif ( std::to_string( number ).find( \"12\" ) != std::string::npos )\n    std::cout &lt;&lt; \"The number contains 12\" &lt;&lt; std::endl;\nif ( std::to_string( number ).find( \"32\" ) != std::string::npos )\n    std::cout &lt;&lt; \"The number contains 32\" &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4608112, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5c66deb2b13fbf56c9e920707161c652?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4608112/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1429121474, "creation_date": 1429118379, "question_id": 29656695, "link": "https://stackoverflow.com/questions/29656695/how-do-i-check-if-an-integer-exists-in-a-variable-in-c", "title": "How do I check if an integer exists in a variable in C++?", "body": "<p>for example</p>\n\n<pre><code>cout&lt;&lt;\"What number\"&lt;&lt;endl;\ncin&gt;&gt;number;\n</code></pre>\n\n<p>This would give me</p>\n\n<pre><code>What number\n123\n</code></pre>\n\n<p>So how would I check if 1 or 12 or 32 was in the input number?</p>\n"}, {"tags": ["java", "c++", "arrays", "performance", "stdvector"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1429118353, "post_id": 29656648, "comment_id": 47452981, "body": "What are those not equal operations inside the loop?"}, {"owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "edited": false, "score": 0, "creation_date": 1429118452, "post_id": 29656648, "comment_id": 47453055, "body": "how those vectors are defined?"}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1429118622, "post_id": 29656648, "comment_id": 47453160, "body": "Did you run the C++ code in debug mode or release mode?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 42, "creation_date": 1429118664, "post_id": 29656648, "comment_id": 47453183, "body": "<code>std::vector&lt;bool&gt;</code> uses one bit per element to save space, which leads to a lot of bit-shifting. If you want speed, you should stay away from it. Use <code>std::vector&lt;int&gt;</code> instead."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 44, "creation_date": 1429118767, "post_id": 29656648, "comment_id": 47453245, "body": "@molbdnilo Or std::vector&lt;char&gt;. There&#39;s no need to waste <i>that</i> much ;-)"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1429118844, "post_id": 29656648, "comment_id": 47453284, "body": "I tried it. No difference. With -O3.  See <a href=\"https://ideone.com/9vGrG1\" rel=\"nofollow noreferrer\">ideone.com/9vGrG1</a>."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1429118993, "post_id": 29656648, "comment_id": 47453363, "body": "@molbdnilo <a href=\"https://ideone.com/mS5skb\" rel=\"nofollow noreferrer\">ideone.com/mS5skb</a> No significant speed-up with char. I doubt int will work better. And indeed: <a href=\"https://ideone.com/zp1eqO\" rel=\"nofollow noreferrer\">ideone.com/zp1eqO</a>"}, {"owner": {"reputation": 23197, "user_id": 29068, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24ddcae119119f3ffd03320b3ff6bddf?s=128&d=identicon&r=PG", "display_name": "Timo Geusch", "link": "https://stackoverflow.com/users/29068/timo-geusch"}, "edited": false, "score": 3, "creation_date": 1429119500, "post_id": 29656648, "comment_id": 47453669, "body": "First thing that comes to mind is that you&#39;re doing an awful lot of unnecessary assignments in C++ (and probably in Java, too) - all those &quot;+ 1&#180;&quot; can be expressed like so <code>h[i] += 1</code>, which should yield much faster code. The other problem is that you store all the data in unconnected contiguous arrays, so every time you access the next member, you&#39;re most likely blowing processor cache lines because you&#39;re accessing non-contiguous data constantly."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 7, "creation_date": 1429119622, "post_id": 29656648, "comment_id": 47453749, "body": "Funnily enough. The c++ version is faster when the number of cells is 200. Cache locality?"}, {"owner": {"reputation": 23197, "user_id": 29068, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24ddcae119119f3ffd03320b3ff6bddf?s=128&d=identicon&r=PG", "display_name": "Timo Geusch", "link": "https://stackoverflow.com/users/29068/timo-geusch"}, "edited": false, "score": 9, "creation_date": 1429119637, "post_id": 29656648, "comment_id": 47453758, "body": "Part II: You&#39;d be much better off creating a separate class/struct that contains one of each member of the arrays and then have a single array of objects of this struct, because then you&#39;re actually iterating through memory only once, in one direction."}, {"owner": {"reputation": 3004, "user_id": 1359034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97eaac4d6ba8f0c3f95900f02b45b42?s=128&d=identicon&r=PG", "display_name": "dwcanillas", "link": "https://stackoverflow.com/users/1359034/dwcanillas"}, "edited": false, "score": 0, "creation_date": 1429119807, "post_id": 29656648, "comment_id": 47453879, "body": "C style arrays made no difference either: <a href=\"https://ideone.com/0uODG5\" rel=\"nofollow noreferrer\">ideone.com/0uODG5</a> (I forgot to delete the arrays but that shouldnt matter)"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1429120169, "post_id": 29656648, "comment_id": 47454109, "body": "C-style arrays makes difference on my machine! C++ running time is decreasing severely..."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1429120251, "post_id": 29656648, "comment_id": 47454166, "body": "@Jean-BaptisteYun&#232;s VLAs?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1429122191, "post_id": 29656648, "comment_id": 47455421, "body": "Not sure to understand what really happens... vectors on primitive types are usually efficients. Probably a matter of optimization..."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 23197, "user_id": 29068, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/24ddcae119119f3ffd03320b3ff6bddf?s=128&d=identicon&r=PG", "display_name": "Timo Geusch", "link": "https://stackoverflow.com/users/29068/timo-geusch"}, "edited": false, "score": 9, "creation_date": 1429122831, "post_id": 29656648, "comment_id": 47455805, "body": "@TimoGeusch: While I think <code>h[i] += 1;</code> or (better still) <code>++h[i]</code> is more readable than <code>h[i] = h[i] + 1;</code>, I&#39;d be somewhat surprised to see any significant difference in speed between them. A compiler can &quot;figure out&quot; that they&#39;re both doing the same thing, and generate the same code either way (at least in most common cases)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1429123554, "post_id": 29656648, "comment_id": 47456242, "body": "@Jean-BaptisteYun&#232;s did you compile with <code>-O3</code>?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1429128341, "post_id": 29656648, "comment_id": 47459167, "body": "I suspect <code>Java</code> gains an advantage in pre-grabbing a large lump of contiguous memory from the OS at program startup. (see my answer)."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1429132575, "post_id": 29656648, "comment_id": 47461627, "body": "Here&#39;s the version I came up with, without using fancy stuff such as parallelization (which can be harmful if used without caution): <a href=\"https://ideone.com/V2E6UM\" rel=\"nofollow noreferrer\">ideone.com/V2E6UM</a> It&#39;s roughly 50% of the Java running time. The main thing comes from the struct of vectors to vector of structs transformation. I then continued to refactor things a bit, but see for yourself ;-)"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1429133276, "post_id": 29656648, "comment_id": 47462016, "body": "No optimization or -O3 makes almost no difference on my OSX Yosemite."}, {"owner": {"reputation": 3152, "user_id": 1377706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bhJMC.png?s=128&g=1", "display_name": "Pharap", "link": "https://stackoverflow.com/users/1377706/pharap"}, "edited": false, "score": 2, "creation_date": 1429154313, "post_id": 29656648, "comment_id": 47468701, "body": "I&#39;d like to say that std::vector is not really comparable to a java array. std::vector is more akin to Java&#39;s ArrayList."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1429194140, "post_id": 29656648, "comment_id": 47492633, "body": "@Jean-BaptisteYun&#232;s: That&#39;s hard to believe. C++ templates are very, very sensitive to optimisation. Factor 10 is not unusual."}, {"owner": {"reputation": 6025, "user_id": 511012, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8cd8ba81a1b2f40ea92e5abbb1c80a81?s=128&d=identicon&r=PG", "display_name": "Ian Newson", "link": "https://stackoverflow.com/users/511012/ian-newson"}, "edited": false, "score": 0, "creation_date": 1429689303, "post_id": 29656648, "comment_id": 47711074, "body": "Excellent argument for managed languages. I for one don&#39;t care to spend hours researching and rewriting loops for modest gains in performance."}, {"owner": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 1, "creation_date": 1430633432, "post_id": 29656648, "comment_id": 48139674, "body": "I wonder what would happen if vector is dropped for arrays."}, {"owner": {"reputation": 446, "user_id": 429133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8429c488166f0648102bc752ddf8e2?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/429133/amit"}, "edited": false, "score": 0, "creation_date": 1540870080, "post_id": 29656648, "comment_id": 93013010, "body": "With raw arrays used in place of vectors (similar to the java counterpart) the execution time drops to less than a millisecond."}], "answers": [{"comments": [{"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 12, "creation_date": 1429120448, "post_id": 29657336, "comment_id": 47454296, "body": "It might be a good idea to group that data in a struct and just have one vector"}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1429120782, "post_id": 29657336, "comment_id": 47454519, "body": "Well I&#39;m on mobile so I can&#39;t make measurements ;-) but the one vector should be good (also in terms of allocations)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1429123708, "post_id": 29657336, "comment_id": 47456322, "body": "Does using <code>++</code> help in any capacity? <code>x = x + 1</code> seems awfully clunky compared to <code>++x</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429123802, "post_id": 29657336, "comment_id": 47456392, "body": "Also curious what compiler optimization flags were turned on."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1429123972, "post_id": 29657336, "comment_id": 47456499, "body": "A regular O3.  O2, O3 and Ofast were all the same."}, {"owner": {"reputation": 231, "user_id": 2784961, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3fe447ee586372882274f50abaca88a?s=128&d=identicon&r=PG&f=1", "display_name": "fleetC0m", "link": "https://stackoverflow.com/users/2784961/fleetc0m"}, "edited": false, "score": 3, "creation_date": 1429145887, "post_id": 29657336, "comment_id": 47466435, "body": "Please fix the misspelled word &quot;result&quot;. It&#39;s killing me.. :)"}, {"owner": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "edited": false, "score": 0, "creation_date": 1429149114, "post_id": 29657336, "comment_id": 47467281, "body": "I think this proves quite well that java is 85% good enough when you have a 10 minutes dev budget. And C++ is the best when you have a 3 hours dev budget. These are a really expensive 15%."}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429158388, "post_id": 29657336, "comment_id": 47469762, "body": "@tadman As a general rule, x++, ++x, and x + 1 will have identical performance, so use whichever one is cleanest for reading.  There are semantic differences between the three, of course, but modern compilers are good enough that, in any situation where the three have identical behavior, the compiler will figure it out and choose to emit the ideal opcodes no matter which syntax you chose. (20 years ago, that would not have been the case.  It would have mattered)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429196471, "post_id": 29657336, "comment_id": 47494563, "body": "<code>y = ++x</code> and <code>y = x++</code> has significant implications when using things like iterators, though, since in one case a copy has to be made, and in the other, it&#39;s done in-place. I only mentioned it because it&#39;s odd nobody made  even a simple visual optimization."}, {"owner": {"reputation": 2446, "user_id": 2771718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2b9b2d50625acf8b702b3f1c81eb11?s=128&d=identicon&r=PG", "display_name": "Piotr Ko\u0142aczkowski", "link": "https://stackoverflow.com/users/2771718/piotr-ko%c5%82aczkowski"}, "edited": false, "score": 1, "creation_date": 1431673371, "post_id": 29657336, "comment_id": 48606970, "body": "If the whole iterator fits in a single register, then making a copy might be actually faster in some cases than updating in place. If you&#39;re doing update in place, this is because you&#39;re very likely using the updated value just afterwards. So you have a Read-after-Write dependency. If you update, but need only the old value, those operations do not depend on each other and CPU has more room to do them in parallel, e.g. on different pipelines, increasing effective IPC."}], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 44, "last_activity_date": 1429178257, "last_edit_date": 1592644375, "creation_date": 1429120361, "answer_id": 29657336, "question_id": 29656648, "link": "https://stackoverflow.com/questions/29656648/java-8-times-faster-with-arrays-than-stdvector-in-c-what-did-i-do-wrong/29657336#29657336", "title": "Java 8 times faster with arrays than std::vector in C++. What did I do wrong?", "body": "<p>Yep, the cache in the c++ version takes a hammering. It seems the JIT is better equipped to handle this.</p>\n<p>If you change the outer <code>for</code> in isUpdateNeeded() to shorter snippets. The difference goes away.</p>\n<p>The sample below produces a 4x speedup.</p>\n<pre><code>void isUpdateNeeded() {\n    for (int i = 0; i &lt; numberOfCells; ++i) {\n        h[i] =  h[i] + 1;\n        floodedCells[i] =  !floodedCells[i];\n        floodedCellsTimeInterval[i] =  !floodedCellsTimeInterval[i];\n        qInflow[i] =  qInflow[i] + 1;\n        qStartTime[i] =  qStartTime[i] + 1;\n        qEndTime[i] =  qEndTime[i] + 1;\n    }\n\n    for (int i = 0; i &lt; numberOfCells; ++i) {\n        lowerFloorCells[i] =  lowerFloorCells[i] + 1;\n        cellLocationX[i] =  cellLocationX[i] + 1;\n        cellLocationY[i] =  cellLocationY[i] + 1;\n        cellLocationZ[i] =  cellLocationZ[i] + 1;\n        levelOfCell[i] =  levelOfCell[i] + 1;\n        valueOfCellIds[i] =  valueOfCellIds[i] + 1;\n        h0[i] =  h0[i] + 1;\n        vU[i] =  vU[i] + 1;\n        vV[i] =  vV[i] + 1;\n        vUh[i] =  vUh[i] + 1;\n        vVh[i] =  vVh[i] + 1;\n    }\n    for (int i = 0; i &lt; numberOfCells; ++i) {\n        vUh0[i] =  vUh0[i] + 1;\n        vVh0[i] =  vVh0[i] + 1;\n        ghh[i] =  ghh[i] + 1;\n        sfx[i] =  sfx[i] + 1;\n        sfy[i] =  sfy[i] + 1;\n        qIn[i] =  qIn[i] + 1;\n        for(int j = 0; j &lt; nEdges; ++j) {\n            neighborIds[i * nEdges + j] = neighborIds[i * nEdges + j] + 1;\n        }\n        for(int j = 0; j &lt; nEdges; ++j) {\n            typeInterface[i * nEdges + j] = typeInterface[i * nEdges + j] + 1;\n        }\n    }\n\n}\n</code></pre>\n<p>This shows to a reasonable degree that cache misses are the reason for the slowdown. It is also important to note that the variables are not dependent so a threaded solution is easily created.</p>\n<h1>Order restored</h1>\n<p>As per stefans comment I tried grouping them in a struct using the original sizes. This removes the immediate cache pressure in a similar fashion. The result is that the c++ (CCFLAG -O3) version is about 15% faster than the java version.</p>\n<p><em>Varning neither short nor pretty.</em></p>\n<pre><code>#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n \n \n \nclass FloodIsolation {\n    struct item{\n      char floodedCells;\n      char floodedCellsTimeInterval;\n      double valueOfCellIds;\n      double h;\n      double h0;\n      double vU;\n      double vV;\n      double vUh;\n      double vVh;\n      double vUh0;\n      double vVh0;\n      double sfx;\n      double sfy;\n      double qInflow;\n      double qStartTime;\n      double qEndTime;\n      double qIn;\n      double nx;\n      double ny;\n      double ghh;\n      double floorLevels;\n      int lowerFloorCells;\n      char flagInterface;\n      char floorCompletelyFilled;\n      double cellLocationX;\n      double cellLocationY;\n      double cellLocationZ;\n      int levelOfCell;\n    };\n    struct inner_item{\n      int typeInterface;\n      int neighborIds;\n    };\n\n    std::vector&lt;inner_item&gt; inner_data;\n    std::vector&lt;item&gt; data;\n\npublic:\n    FloodIsolation() :\n            numberOfCells(20000), inner_data(numberOfCells * nEdges), data(numberOfCells)\n   {\n\n    }\n    ~FloodIsolation(){\n    }\n \n    void isUpdateNeeded() {\n        for (int i = 0; i &lt; numberOfCells; ++i) {\n            data[i].h = data[i].h + 1;\n            data[i].floodedCells = !data[i].floodedCells;\n            data[i].floodedCellsTimeInterval = !data[i].floodedCellsTimeInterval;\n            data[i].qInflow = data[i].qInflow + 1;\n            data[i].qStartTime = data[i].qStartTime + 1;\n            data[i].qEndTime = data[i].qEndTime + 1;\n            data[i].lowerFloorCells = data[i].lowerFloorCells + 1;\n            data[i].cellLocationX = data[i].cellLocationX + 1;\n            data[i].cellLocationY = data[i].cellLocationY + 1;\n            data[i].cellLocationZ = data[i].cellLocationZ + 1;\n            data[i].levelOfCell = data[i].levelOfCell + 1;\n            data[i].valueOfCellIds = data[i].valueOfCellIds + 1;\n            data[i].h0 = data[i].h0 + 1;\n            data[i].vU = data[i].vU + 1;\n            data[i].vV = data[i].vV + 1;\n            data[i].vUh = data[i].vUh + 1;\n            data[i].vVh = data[i].vVh + 1;\n            data[i].vUh0 = data[i].vUh0 + 1;\n            data[i].vVh0 = data[i].vVh0 + 1;\n            data[i].ghh = data[i].ghh + 1;\n            data[i].sfx = data[i].sfx + 1;\n            data[i].sfy = data[i].sfy + 1;\n            data[i].qIn = data[i].qIn + 1;\n            for(int j = 0; j &lt; nEdges; ++j) {\n                inner_data[i * nEdges + j].neighborIds = inner_data[i * nEdges + j].neighborIds + 1;\n                inner_data[i * nEdges + j].typeInterface = inner_data[i * nEdges + j].typeInterface + 1;\n            }\n        }\n \n    }\n \n    static const int nEdges;\nprivate:\n \n    const int numberOfCells;\n\n};\n \nconst int FloodIsolation::nEdges = 6;\n\nint main() {\n    FloodIsolation isolation;\n    clock_t start = clock();\n    for (int i = 0; i &lt; 4400; ++i) {\n        if(i % 100 == 0) {\n            std::cout &lt;&lt; i &lt;&lt; &quot;\\n&quot;;\n        }\n        isolation.isUpdateNeeded();\n    }\n\n    clock_t stop = clock();\n    std::cout &lt;&lt; &quot;Time: &quot; &lt;&lt; difftime(stop, start) / 1000 &lt;&lt; &quot;\\n&quot;;\n}\n                                                                              \n</code></pre>\n<p>My result differs slightly from Jerry Coffins for the original sizes. For me the differences remains.  It might well be my java version, 1.7.0_75.</p>\n"}, {"comments": [{"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1429123180, "post_id": 29658071, "comment_id": 47456014, "body": "There&#39;s still room for improvement although this most likely won&#39;t affect performance significantly: grouping the boolean variables (in general grouping the variables of same type)."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1429123349, "post_id": 29658071, "comment_id": 47456121, "body": "@stefan: There is, but I was intentionally avoiding doing any heavy optimization of the code, and instead doing (roughly) the minimum necessary to remove the most obvious problems in the original implementation. If I really wanted to optimize, I&#39;d add a <code>#pragma omp</code>, and (perhaps) a little work to ensure each loop iteration is independent. That would take fairly minimal work to get a ~Nx speedup, where N is the number of available processor cores."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1429123405, "post_id": 29658071, "comment_id": 47456155, "body": "Good point. This is well enough for an answer to this question"}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1429135308, "post_id": 29658071, "comment_id": 47463008, "body": "How is 181 time units 35% slower than 0.135 time units and 16% slower than 0.156 time units?  Did you mean that the Java version&#39;s duration is 0.181?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 1, "creation_date": 1429135801, "post_id": 29658071, "comment_id": 47463190, "body": "@jamesdlin: they&#39;re using different units (left that way, because it&#39;s how things were in the original). The C++ code gives time in seconds, but the Java code gives time in milliseconds."}], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 20, "last_activity_date": 1429123684, "last_edit_date": 1429123684, "creation_date": 1429122746, "answer_id": 29658071, "question_id": 29656648, "link": "https://stackoverflow.com/questions/29656648/java-8-times-faster-with-arrays-than-stdvector-in-c-what-did-i-do-wrong/29658071#29658071", "title": "Java 8 times faster with arrays than std::vector in C++. What did I do wrong?", "body": "<p>As @Stefan guessed in a comment on @CaptainGiraffe's answer, you gain quite a bit by using a vector of structs instead of a struct of vectors. Corrected code looks like this:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n\nclass FloodIsolation {\npublic:\n    FloodIsolation() :\n            h(0),\n            floodedCells(0),\n            floodedCellsTimeInterval(0),\n            qInflow(0),\n            qStartTime(0),\n            qEndTime(0),\n            lowerFloorCells(0),\n            cellLocationX(0),\n            cellLocationY(0),\n            cellLocationZ(0),\n            levelOfCell(0),\n            valueOfCellIds(0),\n            h0(0),\n            vU(0),\n            vV(0),\n            vUh(0),\n            vVh(0),\n            vUh0(0),\n            vVh0(0),\n            ghh(0),\n            sfx(0),\n            sfy(0),\n            qIn(0),\n            typeInterface(nEdges, 0),\n            neighborIds(nEdges, 0)\n    {\n    }\n\n    ~FloodIsolation(){\n    }\n\n    void Update() {\n        h =  h + 1;\n        floodedCells =  !floodedCells;\n        floodedCellsTimeInterval =  !floodedCellsTimeInterval;\n        qInflow =  qInflow + 1;\n        qStartTime =  qStartTime + 1;\n        qEndTime =  qEndTime + 1;\n        lowerFloorCells =  lowerFloorCells + 1;\n        cellLocationX =  cellLocationX + 1;\n        cellLocationY =  cellLocationY + 1;\n        cellLocationZ =  cellLocationZ + 1;\n        levelOfCell =  levelOfCell + 1;\n        valueOfCellIds =  valueOfCellIds + 1;\n        h0 =  h0 + 1;\n        vU =  vU + 1;\n        vV =  vV + 1;\n        vUh =  vUh + 1;\n        vVh =  vVh + 1;\n        vUh0 =  vUh0 + 1;\n        vVh0 =  vVh0 + 1;\n        ghh =  ghh + 1;\n        sfx =  sfx + 1;\n        sfy =  sfy + 1;\n        qIn =  qIn + 1;\n        for(int j = 0; j &lt; nEdges; ++j) {\n            ++typeInterface[j];\n            ++neighborIds[j];\n        }       \n    }\n\nprivate:\n\n    static const int nEdges = 6;\n    bool floodedCells;\n    bool floodedCellsTimeInterval;\n\n    std::vector&lt;int&gt; neighborIds;\n    double valueOfCellIds;\n    double h;\n    double h0;\n    double vU;\n    double vV;\n    double vUh;\n    double vVh;\n    double vUh0;\n    double vVh0;\n    double ghh;\n    double sfx;\n    double sfy;\n    double qInflow;\n    double qStartTime;\n    double qEndTime;\n    double qIn;\n    double nx;\n    double ny;\n    double floorLevels;\n    int lowerFloorCells;\n    bool flagInterface;\n    std::vector&lt;int&gt; typeInterface;\n    bool floorCompleteleyFilled;\n    double cellLocationX;\n    double cellLocationY;\n    double cellLocationZ;\n    int levelOfCell;\n};\n\nint main() {\n    std::vector&lt;FloodIsolation&gt; isolation(20000);\n    clock_t start = clock();\n    for (int i = 0; i &lt; 400; ++i) {\n        if(i % 100 == 0) {\n            std::cout &lt;&lt; i &lt;&lt; \"\\n\";\n        }\n\n        for (auto &amp;f : isolation)\n            f.Update();\n    }\n    clock_t stop = clock();\n    std::cout &lt;&lt; \"Time: \" &lt;&lt; difftime(stop, start) / 1000 &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Compiled with the compiler from VC++ 2015 CTP, using <code>-EHsc -O2b2 -GL -Qpar</code>, I get results like:</p>\n\n<pre><code>0\n100\n200\n300\nTime: 0.135\n</code></pre>\n\n<p>Compiling with g++ produces a result that's slightly slower:</p>\n\n<pre><code>0\n100\n200\n300\nTime: 0.156\n</code></pre>\n\n<p>On the same hardware, using the compiler/JVM from Java 8u45, I get results like:</p>\n\n<pre><code>0\n100\n200\n300\nTime: 181\n</code></pre>\n\n<p>This is around 35% slower than the version from VC++, and about 16% slower than the version from g++.</p>\n\n<p>If we increase the number of iterations to the desired 2000, the difference drops to only 3%, suggesting that part of the advantage of C++ in this case is simply faster loading (a perennial problem with Java), not really in execution itself. This doesn't strike me as surprising in this case--the computation being measured (in the posted code) is so trivial that I doubt most compilers can do a whole lot to optimize it.</p>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 36, "last_activity_date": 1429122908, "creation_date": 1429122908, "answer_id": 29658124, "question_id": 29656648, "link": "https://stackoverflow.com/questions/29656648/java-8-times-faster-with-arrays-than-stdvector-in-c-what-did-i-do-wrong/29658124#29658124", "title": "Java 8 times faster with arrays than std::vector in C++. What did I do wrong?", "body": "<p>Here is the C++ version with the per-node data gathered into a structure, and a single vector of that structure used:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n\n\n\nclass FloodIsolation {\npublic:\n  FloodIsolation() :\n      numberOfCells(20000),\n      data(numberOfCells)\n  {\n  }\n  ~FloodIsolation(){\n  }\n\n  void isUpdateNeeded() {\n    for (int i = 0; i &lt; numberOfCells; ++i) {\n       data[i].h = data[i].h + 1;\n       data[i].floodedCells = !data[i].floodedCells;\n       data[i].floodedCellsTimeInterval = !data[i].floodedCellsTimeInterval;\n       data[i].qInflow = data[i].qInflow + 1;\n       data[i].qStartTime = data[i].qStartTime + 1;\n       data[i].qEndTime = data[i].qEndTime + 1;\n       data[i].lowerFloorCells = data[i].lowerFloorCells + 1;\n       data[i].cellLocationX = data[i].cellLocationX + 1;\n       data[i].cellLocationY = data[i].cellLocationY + 1;\n       data[i].cellLocationZ = data[i].cellLocationZ + 1;\n       data[i].levelOfCell = data[i].levelOfCell + 1;\n       data[i].valueOfCellIds = data[i].valueOfCellIds + 1;\n       data[i].h0 = data[i].h0 + 1;\n       data[i].vU = data[i].vU + 1;\n       data[i].vV = data[i].vV + 1;\n       data[i].vUh = data[i].vUh + 1;\n       data[i].vVh = data[i].vVh + 1;\n       data[i].vUh0 = data[i].vUh0 + 1;\n       data[i].vVh0 = data[i].vVh0 + 1;\n       data[i].ghh = data[i].ghh + 1;\n       data[i].sfx = data[i].sfx + 1;\n       data[i].sfy = data[i].sfy + 1;\n       data[i].qIn = data[i].qIn + 1;\n\n\n      for(int j = 0; j &lt; nEdges; ++j) {\n        data[i].flagInterface[j] = !data[i].flagInterface[j];\n        data[i].typeInterface[j] = data[i].typeInterface[j] + 1;\n        data[i].neighborIds[j] = data[i].neighborIds[j] + 1;\n      }\n    }\n\n  }\n\nprivate:\n\n  const int numberOfCells;\n  static const int nEdges = 6;\n  struct data_t {\n    bool floodedCells = 0;\n    bool floodedCellsTimeInterval = 0;\n\n    double valueOfCellIds = 0;\n    double h = 0;\n\n    double h0 = 0;\n    double vU = 0;\n    double vV = 0;\n    double vUh = 0;\n    double vVh = 0;\n    double vUh0 = 0;\n    double vVh0 = 0;\n    double ghh = 0;\n    double sfx = 0;\n    double sfy = 0;\n    double qInflow = 0;\n    double qStartTime = 0;\n    double qEndTime = 0;\n    double qIn = 0;\n    double nx = 0;\n    double ny = 0;\n    double floorLevels = 0;\n    int lowerFloorCells = 0;\n    bool floorCompleteleyFilled = 0;\n    double cellLocationX = 0;\n    double cellLocationY = 0;\n    double cellLocationZ = 0;\n    int levelOfCell = 0;\n    bool flagInterface[nEdges] = {};\n    int typeInterface[nEdges] = {};\n    int neighborIds[nEdges] = {};\n  };\n  std::vector&lt;data_t&gt; data;\n\n};\n\nint main() {\n  std::ios_base::sync_with_stdio(false);\n  FloodIsolation isolation;\n  clock_t start = clock();\n  for (int i = 0; i &lt; 400; ++i) {\n    if(i % 100 == 0) {\n      std::cout &lt;&lt; i &lt;&lt; \"\\n\";\n    }\n    isolation.isUpdateNeeded();\n  }\n  clock_t stop = clock();\n  std::cout &lt;&lt; \"Time: \" &lt;&lt; difftime(stop, start) / 1000 &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/AZQ5oB\">live example</a></p>\n\n<p>The time is now 2x the speed of the Java version.  (846 vs 1631).</p>\n\n<p>Odds are the JIT noticed the cache burning of accessing data all over the place, and transformed your code into a logically similar but more efficient order.</p>\n\n<p>I also turned off stdio synchronization, as that is only needed if you mix <code>printf</code>/<code>scanf</code> with C++ <code>std::cout</code> and <code>std::cin</code>.  As it happens, you only print out a few values, but C++'s default behavior for printing is overly paranoid and inefficient.</p>\n\n<p>If <code>nEdges</code> is not an actual constant value, then the 3 \"array\" values will have to be stripped out of the <code>struct</code>.  That shouldn't cause a huge performance hit.</p>\n\n<p>You might be able to get another performance boost by sorting the values in that <code>struct</code> by decreasing size, thus reducing memory footprint (and sorting access as well when it doesn't matter).  But I am unsure.</p>\n\n<p>A rule of thumb is that a single cache miss is 100x more expensive than an instruction.  Arranging your data to have cache coherency has lots of value.</p>\n\n<p>If rearranging the data into a <code>struct</code> is infeasible, you can change your iteration to be over each container in turn.</p>\n\n<p>As an aside, note that the Java and C++ versions had some subtle differences in them.  The one I spotted was that the Java version has 3 variables in the \"for each edge\" loop, while the C++ one only had 2.  I made mine match the Java.  I don't know if there are others.</p>\n"}, {"comments": [{"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1429130602, "post_id": 29659791, "comment_id": 47460477, "body": "Well you can&#39;t really rely on that. The data in <code>FloodIsolation</code> may still be allocated elsewhere."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 0, "creation_date": 1429130656, "post_id": 29659791, "comment_id": 47460514, "body": "@stefan Still an interesting result."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1429130697, "post_id": 29659791, "comment_id": 47460524, "body": "@CaptainGiraffe it is, i didn&#39;t say it&#39;s useless ;-)"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 2, "creation_date": 1429130718, "post_id": 29659791, "comment_id": 47460539, "body": "@stefan I&#39;m not proposing it as a solution, merely investigating what I think is the problem. It seems it may not  have anything to do with caching but how the C++ RTS differes from Java."}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1429131308, "post_id": 29659791, "comment_id": 47460867, "body": "@Galik It&#39;s not <i>always</i> the cause, though it&#39;s fairly interesting to see it having that big impact on your platform. On ideone, I can&#39;t reproduce your result (as it seems, the allocated block isn&#39;t reused): <a href=\"https://ideone.com/im4NMO\" rel=\"nofollow noreferrer\">ideone.com/im4NMO</a> However, the vector of structs solution has a more consistent performance impact: <a href=\"https://ideone.com/b0VWSN\" rel=\"nofollow noreferrer\">ideone.com/b0VWSN</a>"}], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 9, "last_activity_date": 1429128174, "creation_date": 1429128174, "answer_id": 29659791, "question_id": 29656648, "link": "https://stackoverflow.com/questions/29656648/java-8-times-faster-with-arrays-than-stdvector-in-c-what-did-i-do-wrong/29659791#29659791", "title": "Java 8 times faster with arrays than std::vector in C++. What did I do wrong?", "body": "<p>I suspect this is about allocation of memory.</p>\n\n<p>I am thinking that <code>Java</code> grabs a large contiguous block at program startup whereas <code>C++</code> asks the OS for bits and pieces as it goes along.</p>\n\n<p>To put that theory to the test I made one modification to the <code>C++</code> version and it suddenly started running slightly faster than the <code>Java</code> version:</p>\n\n<pre><code>int main() {\n    {\n        // grab a large chunk of contiguous memory and liberate it\n        std::vector&lt;double&gt; alloc(20000 * 20);\n    }\n    FloodIsolation isolation;\n    clock_t start = clock();\n    for (int i = 0; i &lt; 400; ++i) {\n        if(i % 100 == 0) {\n            std::cout &lt;&lt; i &lt;&lt; \"\\n\";\n        }\n        isolation.isUpdateNeeded();\n    }\n    clock_t stop = clock();\n    std::cout &lt;&lt; \"Time: \" &lt;&lt; (1000 * difftime(stop, start) / CLOCKS_PER_SEC) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Runtime <em>without</em> the preallocating vector:</p>\n\n<pre><code>0\n100\n200\n300\nTime: 1250.31\n</code></pre>\n\n<p>Runtime <em>with</em> the preallocating vector:</p>\n\n<pre><code>0\n100\n200\n300\nTime: 331.214\n</code></pre>\n\n<p>Runtime for <code>Java</code> version:</p>\n\n<pre><code>0\n100\n200\n300\nTime: 407\n</code></pre>\n"}], "owner": {"reputation": 923, "user_id": 3442098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd639a0b81842f49a8f03c41804ba04c?s=128&d=identicon&r=PG&f=1", "display_name": "RobinXSI", "link": "https://stackoverflow.com/users/3442098/robinxsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7865, "favorite_count": 16, "accepted_answer_id": 29658124, "answer_count": 4, "score": 88, "last_activity_date": 1429650447, "creation_date": 1429118210, "last_edit_date": 1429650447, "question_id": 29656648, "link": "https://stackoverflow.com/questions/29656648/java-8-times-faster-with-arrays-than-stdvector-in-c-what-did-i-do-wrong", "title": "Java 8 times faster with arrays than std::vector in C++. What did I do wrong?", "body": "<p>I have the following Java code with several big arrays which never change their size. It runs in 1100 ms on my computer.</p>\n\n<p>I implemented the same code in C++ and used <code>std::vector</code>.</p>\n\n<p>The time of the C++ implementation which runs the exact same code is 8800 ms on my computer. What did I do wrong, so that it runs this slowly?</p>\n\n<p>Basically the code does the following:</p>\n\n<pre><code>for (int i = 0; i &lt; numberOfCells; ++i) {\n        h[i] =  h[i] + 1;\n        floodedCells[i] =  !floodedCells[i];\n        floodedCellsTimeInterval[i] =  !floodedCellsTimeInterval[i];\n        qInflow[i] =  qInflow[i] + 1;\n}\n</code></pre>\n\n<p>It iterates through different arrays with a size of around 20000.</p>\n\n<p>You can find both implementations under the following links:</p>\n\n<ul>\n<li>Java: <a href=\"https://ideone.com/R8KqjT\" rel=\"noreferrer\">https://ideone.com/R8KqjT</a></li>\n<li>C++: <a href=\"https://ideone.com/Lu7RpE\" rel=\"noreferrer\">https://ideone.com/Lu7RpE</a></li>\n</ul>\n\n<p>(On ideone I could only run the loop 400 times instead of 2000 times because of the time limitation. But even here there is a difference of three times)</p>\n"}, {"tags": ["c++", "input", "io", "inputstream"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1429119303, "post_id": 29656640, "comment_id": 47453543, "body": "<code>std::fixed</code> has no purpose for input streams. None of the arithmetic formatting manipulators are meant to be used with input streams."}, {"owner": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1429119600, "post_id": 29656640, "comment_id": 47453735, "body": "@0x499602D2 ok, thanks. What about solution? Is there any easy way (without writing parser) to read a double, leaving <code>e</code> in input stream?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1429122333, "post_id": 29656640, "comment_id": 47455511, "body": "There&#39;s apparently no easy way. I&#39;m looking through the code for the extractor and there doesn&#39;t seem to be a way to prevent the parser from consuming <code>e</code> or <code>E</code>. You&#39;ll have to read it out into a string and parse yourself."}, {"owner": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1429192243, "post_id": 29656640, "comment_id": 47491123, "body": "@0x499602D2, can you post your comment as answer?"}], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "edited": false, "score": 0, "creation_date": 1429119511, "post_id": 29656965, "comment_id": 47453680, "body": "Not exactly. I need to <b>read</b> a value as <code>1.4</code>, leaving <code>e</code> in input stream. Is it possible?"}], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1429119556, "last_edit_date": 1429119556, "creation_date": 1429119213, "answer_id": 29656965, "question_id": 29656640, "link": "https://stackoverflow.com/questions/29656640/how-to-use-fixed-floatfield-for-istream-istringstream/29656965#29656965", "title": "How to use &#39;fixed&#39; floatfield for istream/istringstream?", "body": "<p>You should use std::scientific\nI tried like this:</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    double value;\n    cin &gt;&gt; std::fixed&gt;&gt; std::scientific &gt;&gt; value;\n    cout &lt;&lt; std::scientific&lt;&lt;value &lt;&lt; endl;\n}\n</code></pre>\n\n<p>input: 1.4e1 \noutput: 1.400000e+01</p>\n"}, {"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1429126091, "post_id": 29659080, "comment_id": 47457858, "body": "If my assumptions are correct about your question, we might try to discuss a solution."}, {"owner": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "edited": false, "score": 0, "creation_date": 1429184714, "post_id": 29659080, "comment_id": 47485049, "body": "No, I want to read only <code>1.4</code> part and stop. Let&#39;s suppose we don&#39;t have final <code>1</code> and <code>e</code> is just a suffix to indicate some unit. So, input is <code>1.4e</code>, or <code>1.4euro</code>. I don&#39;t need to read any character after digits into my number, it will go to another variable. But I also need to read a double, not integer. Looks like there is no simple way to do that."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "edited": false, "score": 0, "creation_date": 1429198928, "post_id": 29659080, "comment_id": 47496526, "body": "I see, @JIghtuse. But <code>e</code> and <code>euro</code> are different! If you had <code>1.4 euro</code>, it would work. Since the exponent has to be next to the mantissa, a simple space between them would work, for example."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1429206807, "post_id": 29659080, "comment_id": 47501822, "body": "@Steephen It has nothing to do with UDLs."}, {"owner": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "edited": false, "score": 0, "creation_date": 1429241658, "post_id": 29659080, "comment_id": 47516397, "body": "yeah, I know that one space change everything. I was interested in reading double and char after that, so <code>e</code> in <code>euro</code> are the same in this case (i.e., I&#39;m not interested in characters after the first one)."}], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 0, "last_activity_date": 1429126019, "creation_date": 1429126019, "answer_id": 29659080, "question_id": 29656640, "link": "https://stackoverflow.com/questions/29656640/how-to-use-fixed-floatfield-for-istream-istringstream/29659080#29659080", "title": "How to use &#39;fixed&#39; floatfield for istream/istringstream?", "body": "<p>This question is somewhat misleading. <code>1.4e1 = 1.4 * 10\u00b9 = 1.4 * 10 = 14</code>. </p>\n\n<blockquote>\n  <p>[...] it should stop on a first character which is not a digit or a dot (dot\n  is not accepted second/third/more times).</p>\n</blockquote>\n\n<p>Why would it? The <code>e1</code> in <code>1.4e1</code> is <em>part</em> of the number: without it the meaning is different. You have to read it, if you want to parse it properly.</p>\n\n<blockquote>\n  <p>So, correct output would be 1.4 (we stop processing input when we\n  encounter 'e').  </p>\n</blockquote>\n\n<p>This would apply if you were reading an integral type which \"stops\" the parsing when a non-digit character ([0-9]) is met or other conditions trigger (such as overflow or underflow).</p>\n"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 0, "last_activity_date": 1448183135, "last_edit_date": 1495539941, "creation_date": 1448145994, "answer_id": 33849513, "question_id": 29656640, "link": "https://stackoverflow.com/questions/29656640/how-to-use-fixed-floatfield-for-istream-istringstream/33849513#33849513", "title": "How to use &#39;fixed&#39; floatfield for istream/istringstream?", "body": "<blockquote>\n  <p>I need to read a value as <code>1.4</code>, leaving <code>e</code> in input stream. Is it possible?</p>\n</blockquote>\n\n<p>There isn't a standard manipulator for this, I believe that there's a way to define a custom ones, but it would be too complex. I haven't found an answer on how to do that here on SO, I have only found <a href=\"https://stackoverflow.com/questions/15053753/writing-a-manipulator-for-a-custom-stream-class\">a question about output stream modifier</a>.</p>\n\n<p>Let's move to at least some kind of solution. That would be parsing it yourself:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;cctype&gt;\n\nint main()\n{\n    std::istringstream iss(\"1.4e1\");\n    double value;\n\n    {\n        std::string s;\n\n        while(iss.peek() != 'e' &amp;&amp; !std::isspace(iss.peek()))\n            s.push_back(iss.get());\n\n        std::istringstream(s) &gt;&gt; value;\n    }\n\n    std::cout &lt;&lt; value &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 836, "user_id": 1145239, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/42da999e76e511ef976a7b3f1e2ce376?s=128&d=identicon&r=PG", "display_name": "JIghtuse", "link": "https://stackoverflow.com/users/1145239/jightuse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1448183135, "creation_date": 1429118176, "last_edit_date": 1448147864, "question_id": 29656640, "link": "https://stackoverflow.com/questions/29656640/how-to-use-fixed-floatfield-for-istream-istringstream", "title": "How to use &#39;fixed&#39; floatfield for istream/istringstream?", "body": "<p>C++ has an I/O manipulator called 'fixed' to input/output floating-point numbers in fixed (non-scientific) form. It works fine for output, but I don't understand how to get input working properly.</p>\n\n<p>Consider this example:</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    double value;\n    istringstream(\"1.4e1\") &gt;&gt; fixed &gt;&gt; value;\n    cout &lt;&lt; value &lt;&lt; endl;\n}\n</code></pre>\n\n<p>In my opinion, it should work like this. Input stream has some string. When we apply <code>fixed</code> manipulator on it and try to read a double/float, it should stop on a first character which is not a digit or a dot (dot is not accepted second/third/more times). So, correct output would be <code>1.4</code> (we stop processing input when we encounter <code>'e'</code>).</p>\n\n<p>Instead, this code outputs <code>14</code>. Why? How it works and what is the purpose of <code>fixed</code> for input streams? How can I read a double from input stream and stop at <code>'e'</code> (leave it in input stream)?</p>\n"}, {"tags": ["c++", "c++11", "promise", "future"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1429118106, "post_id": 29656563, "comment_id": 47452861, "body": "Having a std::promise/std::future in a std::shared_ptr might be questionable (It breaks the no copy concept of std::promise/std::future)"}, {"owner": {"reputation": 462, "user_id": 3113508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8950f1d046593f6cbd9bca76961583f?s=128&d=identicon&r=PG", "display_name": "Scott M", "link": "https://stackoverflow.com/users/3113508/scott-m"}, "edited": false, "score": 0, "creation_date": 1429118351, "post_id": 29656563, "comment_id": 47452978, "body": "Agreed; the shared_ptr was actually needed to get around these no-copy issues, as I wanted to store them in a collection and return them from a function. However, I can&#39;t see where this would cause issues."}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 1, "creation_date": 1429118650, "post_id": 29656563, "comment_id": 47453176, "body": "@ScottM: You can also <code>std::move</code> futures if you want to store then in a collection, say <code>std::vector&lt;std::future&lt;T&gt;&gt;</code>."}, {"owner": {"reputation": 462, "user_id": 3113508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8950f1d046593f6cbd9bca76961583f?s=128&d=identicon&r=PG", "display_name": "Scott M", "link": "https://stackoverflow.com/users/3113508/scott-m"}, "edited": false, "score": 0, "creation_date": 1429118925, "post_id": 29656563, "comment_id": 47453329, "body": "You read my mind! I&#39;ve been sitting here trying to figure out if I could modify the second function <code>playAll()</code> to return <code>std::vector&lt;std::future&lt;void&gt;&gt;</code> instead of the corresponding collection of promise refereneces."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1429120929, "post_id": 29656563, "comment_id": 47454605, "body": "The no-copy premise of <code>std::future</code> means that only ONE consumer should ever have it and think they have the right to <code>.get()</code> from it.  With a <code>std::shared_ptr&lt;std::future&lt;X&gt;&gt;</code>, you are saying &quot;more than one client has equal ownership of this <code>future</code>&quot;.  This is code smell.  Similarly, <code>std::promise&lt;X&gt;</code> is supposed to be uniquely owned by the producer of the data: having two pieces of code with shared ownership implies both have the right to set its value (or read its future).  <code>play()</code> should return <code>std::future&lt;void&gt;</code>.  Internally a <code>std::promise&lt;void&gt; old_promise</code> can be kept around."}, {"owner": {"reputation": 462, "user_id": 3113508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8950f1d046593f6cbd9bca76961583f?s=128&d=identicon&r=PG", "display_name": "Scott M", "link": "https://stackoverflow.com/users/3113508/scott-m"}, "edited": false, "score": 0, "creation_date": 1429121330, "post_id": 29656563, "comment_id": 47454859, "body": "OK, so I could run into issues returning a shared_ptr&lt;promise&lt;T&gt;&gt; because the caller can potentially call get_future() on it multiple times, or call set_value(). That makes sense."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1429130835, "post_id": 29656563, "comment_id": 47460595, "body": "Using technical words correctly is important.  You say: &quot;I have a function that returns a reference to a std::promise&quot; but you show a function that returns by value a shared_ptr to the std::promise. If you don&#39;t understand the difference, learn it.  If you do understand the difference, be more careful with your words and concepts, please.  Pedants are  better programmers."}, {"owner": {"reputation": 462, "user_id": 3113508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8950f1d046593f6cbd9bca76961583f?s=128&d=identicon&r=PG", "display_name": "Scott M", "link": "https://stackoverflow.com/users/3113508/scott-m"}, "edited": false, "score": 0, "creation_date": 1429131785, "post_id": 29656563, "comment_id": 47461158, "body": "My apologies - I was purposely using reference loosely as &quot;an object that refers to a std::promise object&quot; because I didn&#39;t want to get caught up in the debate of &quot;what kind of reference&quot; (promise&amp;, promise*, or some sort of smart ptr) - I wanted to focus on whether to expose a std::future object or (some sort of) reference to a std::promise."}], "answers": [{"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "is_accepted": true, "score": 12, "last_activity_date": 1429118182, "creation_date": 1429118182, "answer_id": 29656642, "question_id": 29656563, "link": "https://stackoverflow.com/questions/29656563/c-promise-future-which-to-return-from-a-function/29656642#29656642", "title": "C++ promise/future: Which to return from a function?", "body": "<p>Since the implementation of <code>play()</code> is <em>not</em> posted, I'd say most likely you should return the future, and the function should work with the promise itself, most likely in a different thread. The rationale for this design stems from the fact that promise is a producer end, and future is a consumer end &mdash; so the function would produce a value, set it through the promise instance, which will notify the future that result has arrived through <code>get</code>.</p>\n\n<p>However, note that, you don't have to return a <code>std::shared_ptr&lt;std::future&lt;T&gt;&gt;</code> &mdash; just <code>std::future&lt;T&gt;</code> would work great.</p>\n"}], "owner": {"reputation": 462, "user_id": 3113508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8950f1d046593f6cbd9bca76961583f?s=128&d=identicon&r=PG", "display_name": "Scott M", "link": "https://stackoverflow.com/users/3113508/scott-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5131, "favorite_count": 1, "accepted_answer_id": 29656642, "answer_count": 1, "score": 13, "last_activity_date": 1429118182, "creation_date": 1429117923, "last_edit_date": 1429118172, "question_id": 29656563, "link": "https://stackoverflow.com/questions/29656563/c-promise-future-which-to-return-from-a-function", "title": "C++ promise/future: Which to return from a function?", "body": "<p>I have a function that returns a reference to a std::promise:</p>\n\n<pre><code>std::shared_ptr&lt;std::promise&lt;void&gt;&gt; play();\n</code></pre>\n\n<p>(More info: The function plays media on some device, and the return value represents when this playing is complete. If play is called a second time, a value is set on the promise returned the first time, and a new promise is created and returned for this second call)</p>\n\n<p>The caller can then catch the value and wait on the future:</p>\n\n<pre><code>auto this_future = play()-&gt;get_future();\nthis_future.wait();\n</code></pre>\n\n<p>Does it make sense to return a reference to the promise, or should I return the future instead, so that the calling function does not have to call get_future()?</p>\n"}, {"tags": ["c++", "sockets", "sdl", "sdl-net"], "answers": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 4, "last_activity_date": 1429118395, "last_edit_date": 1429118395, "creation_date": 1429118040, "answer_id": 29656595, "question_id": 29656546, "link": "https://stackoverflow.com/questions/29656546/converting-an-int-to-void-data-and-getting-the-length-in-bytes/29656595#29656595", "title": "Converting an int to void *data and getting the length in bytes", "body": "<blockquote>\n  <p><em>\"how I could use this to send an int ... Would I be able to do that or should I use another approach?\"</em></p>\n</blockquote>\n\n<p>The function can be used to do so. You just use an address and <code>sizeof()</code>:</p>\n\n<pre><code>int dataToSend = 42;\nSDLNet_TCP_Send(sock, &amp;dataToSend, sizeof(dataToSend)); \n</code></pre>\n\n<hr>\n\n<p>Depending on the data protocol you might need to obey that integer data should be sent in network byte order (to have it machine architecture independend):</p>\n\n<pre><code>#include &lt;arpa/inet.h&gt;\n\nint dataToSend = htonl(42);\n              // ^^^^^ Make integer network byte ordered (big endian)\nSDLNet_TCP_Send(sock, &amp;dataToSend, sizeof(dataToSend)); \n</code></pre>\n"}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": false, "score": 3, "last_activity_date": 1429118042, "creation_date": 1429118042, "answer_id": 29656596, "question_id": 29656546, "link": "https://stackoverflow.com/questions/29656546/converting-an-int-to-void-data-and-getting-the-length-in-bytes/29656596#29656596", "title": "Converting an int to void *data and getting the length in bytes", "body": "<p>Given <code>int x;</code> you should be able to trivially call the function like this:</p>\n\n<pre><code>SDLNet_TCP_Send(socket, &amp;x, sizeof(x));\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4629292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yyl53.jpg?s=128&g=1", "display_name": "luddbro", "link": "https://stackoverflow.com/users/4629292/luddbro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 29656595, "answer_count": 2, "score": 3, "last_activity_date": 1429118395, "creation_date": 1429117876, "last_edit_date": 1429117982, "question_id": 29656546, "link": "https://stackoverflow.com/questions/29656546/converting-an-int-to-void-data-and-getting-the-length-in-bytes", "title": "Converting an int to void *data and getting the length in bytes", "body": "<p>I am trying to use the <code>SDLNet_TCP_Send(TCPsocket sock, void *data, int len)</code> function (part of the SDL_net library) and I am having a hard time figuring out how I could use this to send an <code>int</code>. Would I be able to do that or should I use another approach? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1429117461, "post_id": 29656342, "comment_id": 47452458, "body": "<code>A(2*x);</code> does not do what you expect - get used to member initializer lists!"}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1429117485, "post_id": 29656342, "comment_id": 47452483, "body": "<i>&quot;whether two objects will be created or what.&quot;</i> - the constructor <b>does not</b> create an object; the constructor prepares the object for usage. The object is already created when the constructor runs."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1429117768, "post_id": 29656342, "comment_id": 47452662, "body": "You&#39;re reading too much into this.  You have entered the body of a function (You have gone past the first <code>{</code>).  What happens when you declare an object within a function and do nothing with it?  That is what you&#39;re doing here -- the rules don&#39;t change just because the function just happens to be a constructor.  The object created is temporary and then destroyed after that line is executed."}, {"owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1429118693, "post_id": 29656342, "comment_id": 47453206, "body": "@PaulMcKenzie: Just to be clear, what you&#39;re saying is that in the second version of the code, what the first line inside the B&#39;s constructor does is <b>create a new instance of A with no handle and that instance gets destroyed as soon as the control exits the B&#39;s constructor body</b>, is it?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1429118808, "post_id": 29656342, "comment_id": 47453267, "body": "@BloodBrother The instance of A inside the body of the constructor does a complete round trip of construction/destruction on that same line -- that&#39;s why it is temporary."}, {"owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1429119271, "post_id": 29656342, "comment_id": 47453528, "body": "@PaulMcKenzie: Oh man...why is that so? I thought it&#39;s lifetime was within the scope of the B&#39;s constructor body. What is the difference between the lifetimes of <code>A a(10)</code> and <code>A(10)</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1429119942, "post_id": 29656342, "comment_id": 47453966, "body": "@BloodBrother With <code>A(10)</code> where is the object to destroy later on?  No different than if you did this: <code>int(8 + 1);</code>  This is legal C++.  So what happened to the value of 9?  Where did it go? Same with your <code>A(10)</code>.  That <code>A</code> object goes up in smoke right away."}, {"owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1429120452, "post_id": 29656342, "comment_id": 47454300, "body": "@PaulMcKenzie: You made my day. Thanks buddy. :)"}, {"owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "edited": false, "score": 0, "creation_date": 1429120536, "post_id": 29656342, "comment_id": 47454358, "body": "BTW, I thought the garbage collector would collect them at the end of the program but I had no idea that it would collect such temporary objects as soon as the statement creating them ends."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1429120674, "post_id": 29656342, "comment_id": 47454437, "body": "@BloodBrother C++ is not Java.  There is no &quot;garbage collection&quot; done here.  C++ has deterministic destructors."}, {"owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "edited": false, "score": 0, "creation_date": 1429120712, "post_id": 29656342, "comment_id": 47454467, "body": "Now, I get it. You&#39;re the man. Thanks. :)"}], "answers": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1429117423, "creation_date": 1429117423, "answer_id": 29656413, "question_id": 29656342, "link": "https://stackoverflow.com/questions/29656342/calling-the-superclass-constuctor-twice-in-the-subclass-constructor/29656413#29656413", "title": "Calling the superclass&#39; constuctor twice in the subclass&#39; constructor", "body": "<blockquote>\n  <p>Now, the first line of B's constructor body is to call another constructor of A (which takes arguments). So, what does this result in? </p>\n</blockquote>\n\n<p>It constructs a temporary <code>A</code> and the temporary object is discarded right away. That call has no relationship to initializing the <code>A</code> part of <code>B</code>.</p>\n"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 3, "last_activity_date": 1429117429, "creation_date": 1429117429, "answer_id": 29656417, "question_id": 29656342, "link": "https://stackoverflow.com/questions/29656342/calling-the-superclass-constuctor-twice-in-the-subclass-constructor/29656417#29656417", "title": "Calling the superclass&#39; constuctor twice in the subclass&#39; constructor", "body": "<p>That doesn't call the constructor for the <code>A</code> subobject of the <code>B</code> being initialised. Instead, it creates and destroys a temporary object of type <code>A</code>. The only way to call the constructor of the base subobject is through the initialiser list, as in the first example.</p>\n"}], "owner": {"reputation": 105, "user_id": 4750722, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/8fc8846e1b8c6e5fbbc3cd14090a3ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Blood Brother", "link": "https://stackoverflow.com/users/4750722/blood-brother"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1429117429, "creation_date": 1429117237, "question_id": 29656342, "link": "https://stackoverflow.com/questions/29656342/calling-the-superclass-constuctor-twice-in-the-subclass-constructor", "title": "Calling the superclass&#39; constuctor twice in the subclass&#39; constructor", "body": "<p>I have a user defined class, say A. I have another user defined class B which publicly extends A.</p>\n\n<p>When I define the constructor of B, I have to call the constructor of A in the member initializer list of B's constructor, or else the compiler will call the default constructor.</p>\n\n<pre><code>class A {\n    int a;\npublic:\n    A(int x = 0) {\n        a = x;\n    }\n};\n\nclass B : public A {\n    int b;\npublic:\n    B(int x = 0) : A(2*x) {\n        b = x;\n    }\n};\n</code></pre>\n\n<p>Now, I understand the logic behind all this. However, what I want to know is what happens when I do this instead:</p>\n\n<pre><code>class A {\n    int a;\npublic:\n    A(int x = 0) {\n        a = x;\n    }\n};\n\nclass B : public A {\n    int b;\npublic:\n    B(int x = 0) {\n        A(2*x);\n        b = x;\n    }\n};\n</code></pre>\n\n<p>I mean, we all know that the compiler will call the default constructor of A before it enters the body of the B's constructor. Now, the first line of B's constructor body is to call another constructor of A (which takes arguments). So, what does this result in? Two different  constructors of the superclass are getting called here whenever an object of the subclass is being created. Please explain what happens...whether two objects will be created or what.</p>\n"}, {"tags": ["c++", "class", "c++11", "inheritance", "virtual-inheritance"], "answers": [{"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1429117184, "creation_date": 1429117184, "answer_id": 29656332, "question_id": 29656286, "link": "https://stackoverflow.com/questions/29656286/inaccessible-base-of-different-classes-object-oriented-programming-c/29656332#29656332", "title": "Inaccessible base of different classes object oriented programming c++", "body": "<p>Change <code>class Police : Roman</code> in <code>class Police : public Roman</code>.</p>\n\n<p>If <code>public</code> is not specified, the <code>Roman</code> will be a <code>private</code> base class for <code>Police</code>.</p>\n"}, {"owner": {"reputation": 2685, "user_id": 267256, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/88e63373598f22c174053ff0078ab42a?s=128&d=identicon&r=PG", "display_name": "Stephen Kellett", "link": "https://stackoverflow.com/users/267256/stephen-kellett"}, "is_accepted": false, "score": 0, "last_activity_date": 1429117256, "creation_date": 1429117256, "answer_id": 29656351, "question_id": 29656286, "link": "https://stackoverflow.com/questions/29656286/inaccessible-base-of-different-classes-object-oriented-programming-c/29656351#29656351", "title": "Inaccessible base of different classes object oriented programming c++", "body": "<p>Change this line</p>\n\n<p><code>class Police : Roman {</code></p>\n\n<p>to</p>\n\n<p><code>class Police : public Roman {</code></p>\n"}], "owner": {"reputation": 115, "user_id": 4283061, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/448b3862a6c74c96a6bcccf32a88a286?s=128&d=identicon&r=PG&f=1", "display_name": "user135688", "link": "https://stackoverflow.com/users/4283061/user135688"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 29656332, "answer_count": 2, "score": 1, "last_activity_date": 1429117256, "creation_date": 1429117049, "question_id": 29656286, "link": "https://stackoverflow.com/questions/29656286/inaccessible-base-of-different-classes-object-oriented-programming-c", "title": "Inaccessible base of different classes object oriented programming c++", "body": "<p>I have been trying to compile this code. It has a class called books which and other genre of books inherit from it. However, when i compile the program it keeps saying Book is an inaccessible base of Police. Then it shows red lines under the first two add_book calls in the main where they add new Police. \nI dont see where there is lack of access in my code? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std; \n\nclass Book{\npublic: \nvirtual double calc_price()const;\nBook(string t, string a, int pg, bool bs)\n: title(t), author(a), pages(pg), bestseller(bs){}\nvirtual ~Book(){}; \nvirtual void display() const; \n\nprotected: \nstring title; \nstring author; \nint pages; \nbool bestseller;      \n}; \n\nvoid Book::display() const {\ncout &lt;&lt; \"Title: \" &lt;&lt; title &lt;&lt; endl;\ncout &lt;&lt; \"Author: \" &lt;&lt; author &lt;&lt; endl; \ncout &lt;&lt; \"Number of pages: \" &lt;&lt; pages &lt;&lt; endl; \ncout &lt;&lt; \"Bestseller: \"; if(bestseller==true){ cout &lt;&lt; \"Yep\" \n&lt;&lt; endl; } else      {cout &lt;&lt; \"Nope\" &lt;&lt; endl; \ncout &lt;&lt; \"Price: \" &lt;&lt; calc_price() &lt;&lt; endl; }\n}\n\ndouble Book::calc_price() const {    \nif(bestseller==true){ return (pages*0.3 + 50); }\nelse { return (pages*0.3); }}\n\n\n\nclass Roman : public Book {\npublic: \nRoman(string t, string a, int pg, bool bs, bool bio)\n: Book(t,a,pg,bs), biography(bio){}\nvirtual ~Roman(); \nvirtual void display()const override; \nprotected:\nbool biography; \n}; \n\nvoid Roman::display() const{\nBook::display(); \ncout &lt;&lt; \"Ce roman \";\nif(biography==true){ cout &lt;&lt; \"is a biography. \" &lt;&lt; endl;\n} else { cout &lt;&lt; \"isn't a biography. \" &lt;&lt; endl; }\n}\nclass Police : Roman {\npublic: \nPolice(string t, string a, int pg, bool bs, bool bio)\n: Roman(t,a,pg,bs,bio){}\nvirtual double calc_price() const {\ndouble price; \nprice = Book::calc_price() - 10; \nif(price &lt; 0) { return 1; } else { return price; }}\nvirtual~Police();\n}; \n\nclass Fantasy : public Livre {\npublic: \nFantasy(string t, string a, int pg, bool bs)\n: Book(t,a,pg,bs){}\nvirtual ~Fantasy();     \nvirtual double calc_price() const { \nreturn (Book::calc_price() + 30); }\n\n}; \nclass Library{\npublic: \nvoid display() const; \nvoid add_book(Book* l); \nvoid empty_stock(); \nprivate: \nvector&lt;Book*&gt; books; \n}; \n\nvoid Library::add_book(Book* b){\nbooks.push_back(b);     \n}\nvoid Library::display() const {\n for(size_t i(0); i &lt; books.size(); ++i){\n    books[i]-&gt;display();     \n} }\n\nvoid Library::empty_stock(){\nfor(size_t i(0); i &lt; books.size(); ++i){\n    delete books[i]; } books.clear(); \n }\n\n\n\n\nint main()\n{\n Library l;\n\nl.add_book(new Police(\"Dogs of Baskerville\", \"A.C.Doyle\", 221, false,false));\nl.add_book(new Police(\"Le Parrain \", \"A.Cuso\", 367, true, false));\nl.add_book(new Roman(\"Book3\", \"I. Calvino\", 283, false, false));\nl.add_book(new Roman (\"Geronimoe memories\", \"S.M. Barrett\", 173, false,  true));\nl.add_book(new Fantasy (\"European rivers\", \"C. Osborne\", 150, false));\n\nl.display();\nl.empty_stock();\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "clang++", "sanitizer"], "comments": [{"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1429117204, "post_id": 29656109, "comment_id": 47452288, "body": "Do you want to know why your sanitizers fail or what the problem with your code is?"}, {"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "reply_to_user": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1429117443, "post_id": 29656109, "comment_id": 47452444, "body": "@honk, it&#39;s demo code with intended error. I&#39;m interested in sanitizer silence."}], "answers": [{"comments": [{"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "edited": false, "score": 0, "creation_date": 1429117556, "post_id": 29656366, "comment_id": 47452524, "body": "Yup, I know. Problem is not in the code itself, but in sanitizer behavior."}, {"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "edited": false, "score": 0, "creation_date": 1429118284, "post_id": 29656366, "comment_id": 47452942, "body": "Okay, but it&#39;s interesting that compiler won&#39;t warn you even with  -Wall -Wpedantic flags -- with that direct return. So compiler optimized out return statement in bar() function, but dangling reference is still there and sanitizer hasn&#39;t managed to catch its access. And last is the problem."}], "owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "is_accepted": false, "score": 0, "last_activity_date": 1429117784, "last_edit_date": 1429117784, "creation_date": 1429117291, "answer_id": 29656366, "question_id": 29656109, "link": "https://stackoverflow.com/questions/29656109/address-sanitizer-failure/29656366#29656366", "title": "Address sanitizer failure", "body": "<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing std::string;\nusing std::cout;\n\nclass Foo\n{\n    string _member;\npublic:\n    Foo(): _member(\"just a string\") {}\n    const string&amp; get() const { return _member; }\n};\n\nconst string bar()\n{\n    // returning reference to a temp object on stack\n    return Foo().get();\n}\n\nint main()\n{\n    cout &lt;&lt; bar() &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>Works fine if you remove the reference.</p>\n\n<p>Also the object you're creating is only valid in <code>bar()</code> making it useless afterwards.</p>\n\n<p>It works for your get method because the variable is pre existing in the scope of the class.</p>\n\n<hr>\n\n<pre><code>const string&amp; bar()\n{\n    const string a = Foo().get();\n\n    // returning reference to a temp object on stack\n    return a;\n}\n</code></pre>\n\n<p>You will get a warning if you don't actually just return the reference but rather put it in a string for example:</p>\n\n<pre><code>main.cpp:23:12: warning: reference to stack memory associated with local variable 'a' returned [-Wreturn-stack-address]\n</code></pre>\n\n<p>What I can think of concerning your direct return statement is that the compiler already optimized it out.</p>\n"}, {"comments": [{"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "edited": false, "score": 0, "creation_date": 1477468107, "post_id": 40219802, "comment_id": 67774475, "body": "Okay, that makes sense. Though I&#39;m unable to get this to work still with clang-3.8.1-r100. I see a memory dump until a zero byte is hit when no sanitizer is in use; with the sanitizer I get a segfault (no use-after-return tracking); the sanitizer + uar-tracking = just the original string, like the stack was not reused, no messages about the problem. Has this feature fully landed in the later releases?"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "edited": false, "score": 0, "creation_date": 1477472142, "post_id": 40219802, "comment_id": 67776874, "body": "Yes, the feature has been there for couple of years so should be quite robust. Note that I&#39;ve updated my answer - depending on std::string implementation this can be either use-after-return or use-after-free. Either should be detected by Asan though so I suggest to report an issue to developers."}], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 1, "last_activity_date": 1595593605, "last_edit_date": 1595593605, "creation_date": 1477315908, "answer_id": 40219802, "question_id": 29656109, "link": "https://stackoverflow.com/questions/29656109/address-sanitizer-failure/40219802#40219802", "title": "Address sanitizer failure", "body": "<p>Originally I thought that you face a use-after-return bug here on accessing temporary Foo object. UARs are not detected by ASan by default due to high memory overhead (see more details at <a href=\"https://github.com/google/sanitizers/wiki/AddressSanitizerUseAfterReturn\" rel=\"nofollow noreferrer\">dedicated wikipage</a>).</p>\n<p>But now I realized that situation is more complicated: <code>std::string</code> may store input pointer as is (copy-on-write optimization), copy it to small buffer inside object (short string optimization) or to a new heap-allocated buffer. The actual behavior depends on particular STL version that you are using (e.g. AFAIR libstdc++ implementation has recently changed).</p>\n<p>I suggest you to report it to <a href=\"https://github.com/google/sanitizers/issues/\" rel=\"nofollow noreferrer\">Asan's tracker</a> to continue investigation there.</p>\n"}], "owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2291, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1595593605, "creation_date": 1429116434, "question_id": 29656109, "link": "https://stackoverflow.com/questions/29656109/address-sanitizer-failure", "title": "Address sanitizer failure", "body": "<p>I'm using gcc and clang-embedded sanitizers for a little, including address sanitizer. And things work pretty well, but on next demo code I get no output related to a error despite it is there (to be more precise -- no output at all):\n</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing std::string;\nusing std::cout;\n\nclass Foo\n{\n    string _member;\npublic:\n    Foo(): _member(\"just a string\") {}\n    const string&amp; get() const { return _member; }\n};\n\nconst string&amp; bar()\n{\n    // returning reference to a temp object on stack\n    return Foo().get();\n}\n\nint main()\n{\n    cout &lt;&lt; bar() &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>I tried <code>g++ -O0 -g -fsanitize=address test.cc</code> and same with <code>clang++</code>: g++-version just prints nothing, clang one prints garbage for a long time.\nValgrind on non-instrumented binary gives feedback:\n<code>Syscall param write(buf) points to unaddressable byte(s)</code>.</p>\n\n<p>Is it internal asan problem or I'm doing something wrong?</p>\n\n<p>Versions: gcc 4.9.2, clang 3.6.0</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1429116521, "post_id": 29656089, "comment_id": 47451873, "body": "What do you mean &quot;different for every shared library&quot;?"}, {"owner": {"reputation": 2178, "user_id": 104104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e4c9652e58d33f02977db1ef0979e6d1?s=128&d=identicon&r=PG", "display_name": "chila", "link": "https://stackoverflow.com/users/104104/chila"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1429116906, "post_id": 29656089, "comment_id": 47452103, "body": "It&#39;s like very shared library has its own thread storage, the thread storage is not shared."}], "owner": {"reputation": 2178, "user_id": 104104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e4c9652e58d33f02977db1ef0979e6d1?s=128&d=identicon&r=PG", "display_name": "chila", "link": "https://stackoverflow.com/users/104104/chila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1429117025, "creation_date": 1429116384, "last_edit_date": 1429117025, "question_id": 29656089, "link": "https://stackoverflow.com/questions/29656089/thread-local-vs-boostthread-specific-vs-pthread-key-t", "title": "thread_local vs boost::thread_specific vs ::pthread_key_t", "body": "<p>I have a program that dlopens some libraries (all C++), that use TLS for a variable (which passed to all libraries). With the keyword 'thread_local' and with 'boost::thread_specific', the storage of the variable is different for every thread AND for every shared library. With 'pthread_key_t' it's only different for every thread, it behaves as expected. I guess 'boost::thread_specific' uses 'thread_local' and that's why it behaves like it. Why does 'thread_local' behave like this?</p>\n\n<pre><code>$ clang --version\nUbuntu clang version 3.5.0-4ubuntu2~trusty2 (tags/RELEASE_350/final) (based on LLVM 3.5.0)\nTarget: x86_64-pc-linux-gnu\nThread model: posix\n\n$ uname -a\nLinux robert-y510p 3.13.0-49-generic #81-Ubuntu SMP Tue Mar 24 19:29:48 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "build", "git-submodules"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1429116154, "post_id": 29655980, "comment_id": 47451650, "body": "You dont get an error saying there should only be one main?"}, {"owner": {"reputation": 375, "user_id": 603205, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d12849eb867d2806adc29074f88dc547?s=128&d=identicon&r=PG", "display_name": "bayindirh", "link": "https://stackoverflow.com/users/603205/bayindirh"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1429116348, "post_id": 29655980, "comment_id": 47451761, "body": "Nope, it just builds the one from the submodule. The submodule&#39;s main function is not in the scope of the project. I need the libraries, so I symbolically linked the files to the project&#39;s scope."}, {"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1429116384, "post_id": 29655980, "comment_id": 47451783, "body": "What do you mean with &quot;submodule&quot;? Is another independent project?"}, {"owner": {"reputation": 375, "user_id": 603205, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d12849eb867d2806adc29074f88dc547?s=128&d=identicon&r=PG", "display_name": "bayindirh", "link": "https://stackoverflow.com/users/603205/bayindirh"}, "edited": false, "score": 1, "creation_date": 1429116466, "post_id": 29655980, "comment_id": 47451840, "body": "Git has a feature called <a href=\"http://git-scm.com/docs/git-submodule\" rel=\"nofollow noreferrer\">submodule</a>, which imports another git repository inside the repository as, well, a submodule. You can use its files from the direct paths or by linking."}], "answers": [{"comments": [{"owner": {"reputation": 108, "user_id": 3514804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00520297a3ac5c0c858c5f714a4748d9?s=128&d=identicon&r=PG&f=1", "display_name": "MasterD", "link": "https://stackoverflow.com/users/3514804/masterd"}, "edited": false, "score": 0, "creation_date": 1554825798, "post_id": 30426943, "comment_id": 97890396, "body": "Having a related issue and being looking for days. Thank you! My problem was that the main file was not included due to the source location error. Struggled to find a solution for <code>In function LoopFillZerobss: Debug&#47;..&#47;startup&#47;startup_stm32f407xx.s:109: undefined reference to SystemInit makefile:36: recipe for target foo.elf failed Debug&#47;..&#47;startup&#47;startup_stm32f407xx.s:113: undefined reference to main</code>"}], "owner": {"reputation": 375, "user_id": 603205, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d12849eb867d2806adc29074f88dc547?s=128&d=identicon&r=PG", "display_name": "bayindirh", "link": "https://stackoverflow.com/users/603205/bayindirh"}, "is_accepted": true, "score": 1, "last_activity_date": 1432492492, "creation_date": 1432492492, "answer_id": 30426943, "question_id": 29655980, "link": "https://stackoverflow.com/questions/29655980/selecting-c-main-function-to-build-in-eclipse/30426943#30426943", "title": "Selecting C++ main function to build in eclipse", "body": "<p>I have solved the problem, at last. The solution is not a simple and straightforward one, so I'm writing step by step:</p>\n\n<ol>\n<li><p>First set your toolchain correctly from <code>Properties -&gt; C/C++ Build -&gt; Tool Chain Editor -&gt; Current toolchain</code>. It's <code>MacOSX GCC</code>or <code>Linux GCC</code> for me.</p></li>\n<li><p>Set your correct project source path. I've symlinked the files from projects I imported as submodules to my project, so setting the correct source directory didn't exclude any required files from my project. Setting is at <code>Properties -&gt; C/C++ General -&gt; Paths &amp; Symbols -&gt; Source Location</code>. Make sure you exclude the other submodules and symlink the required files to your project.</p></li>\n<li><p>Change the name of the artifact (binary, library, etc.) to something different than the <code>${projName}</code>, because when you have submodules, you will have a directory named as <code>${projName}</code> inside your build folder. Setting is at <code>Properties -&gt; C/C++ Build -&gt; Settings -&gt; Build Artifact -&gt; Artifact name</code>.</p></li>\n</ol>\n\n<p>After making these changes, your project should build automatically. Looks like eclipse makes all necessary checks during build, but doesn't warn you about the problems. I had to see all these problems with running <code>make --always-build</code> inside the <code>Debug</code> folder.</p>\n"}], "owner": {"reputation": 375, "user_id": 603205, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d12849eb867d2806adc29074f88dc547?s=128&d=identicon&r=PG", "display_name": "bayindirh", "link": "https://stackoverflow.com/users/603205/bayindirh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1253, "favorite_count": 0, "accepted_answer_id": 30426943, "answer_count": 1, "score": 0, "last_activity_date": 1432492538, "creation_date": 1429115982, "last_edit_date": 1432492538, "question_id": 29655980, "link": "https://stackoverflow.com/questions/29655980/selecting-c-main-function-to-build-in-eclipse", "title": "Selecting C++ main function to build in eclipse", "body": "<p>I've a C++ project in eclipse which is version managed with git. I've a <a href=\"http://git-scm.com/docs/git-submodule\" rel=\"nofollow\">git submodule</a>, which is another project I've written in C++. The submodule has its main function and my project has its own.</p>\n\n<p>Eclipse chooses other main (from the submodule) to compile when I press build. Is there a way to choose which main to build in eclipse?</p>\n\n<p><strong>Update:</strong> I'm still working on the issue. Excluding resources from the project didn't help either. Will answer the question when I solve it.</p>\n\n<p><strong>Update 2:</strong> Solved at last. See my answer.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 2, "creation_date": 1429115605, "post_id": 29655802, "comment_id": 47451332, "body": "There&#39;s too much irrelevant code, and not enough relevant code to figure out what might be wrong. If you can reduce your program to a <a href=\"http://stackoverflow.com/help/mcve\">simple, complete test case</a> that demonstrates the problem, then maybe someone could figure it out."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1429116208, "post_id": 29655802, "comment_id": 47451688, "body": "Time to break out your debugger!"}, {"owner": {"reputation": 2685, "user_id": 267256, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/88e63373598f22c174053ff0078ab42a?s=128&d=identicon&r=PG", "display_name": "Stephen Kellett", "link": "https://stackoverflow.com/users/267256/stephen-kellett"}, "edited": false, "score": 1, "creation_date": 1429118272, "post_id": 29655802, "comment_id": 47452935, "body": "Without knowing what s[n].output() does, knowing what s is, how long the array is, etc it&#39;s very hard to tell. Just not enough info to use."}, {"owner": {"reputation": 1, "user_id": 4746027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b4420fb3134cc3b1da4f4af6650f23?s=128&d=identicon&r=PG&f=1", "display_name": "sowmya", "link": "https://stackoverflow.com/users/4746027/sowmya"}, "edited": false, "score": 0, "creation_date": 1429159708, "post_id": 29655802, "comment_id": 47470106, "body": "<b>Which debugger do I use?@lightningracisinorbit</b>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4746027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b4420fb3134cc3b1da4f4af6650f23?s=128&d=identicon&r=PG&f=1", "display_name": "sowmya", "link": "https://stackoverflow.com/users/4746027/sowmya"}, "edited": false, "score": 0, "creation_date": 1429117047, "post_id": 29655870, "comment_id": 47452188, "body": "<i>@sth, No, i checked x isn&#39;t out of bounds and s7[x] is correctly initialized.</i>"}], "owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "is_accepted": false, "score": 1, "last_activity_date": 1429115658, "creation_date": 1429115658, "answer_id": 29655870, "question_id": 29655802, "link": "https://stackoverflow.com/questions/29655802/why-am-i-getting-a-segmentation-fault-in-this-program-at-the-if-statement-i-7-w/29655870#29655870", "title": "Why am I getting a segmentation fault in this program at the if statement i==7 when all the other before if statements are executing just fine?", "body": "<p>Likely <code>x</code> is out of bounds of the <code>s7</code> array/vector, or <code>s7[x]</code> is not correctly initialized.</p>\n"}], "owner": {"reputation": 1, "user_id": 4746027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b4420fb3134cc3b1da4f4af6650f23?s=128&d=identicon&r=PG&f=1", "display_name": "sowmya", "link": "https://stackoverflow.com/users/4746027/sowmya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1429115658, "creation_date": 1429115446, "question_id": 29655802, "link": "https://stackoverflow.com/questions/29655802/why-am-i-getting-a-segmentation-fault-in-this-program-at-the-if-statement-i-7-w", "title": "Why am I getting a segmentation fault in this program at the if statement i==7 when all the other before if statements are executing just fine?", "body": "<p><em>I'm also a beginner in c++ so I am sorry if there are any mistakes.\nThe first two messages after the if statement i==7 prints but after that segmentation fault occurs. All the other before statements prints just fine. Any help would be really appreciated.</em> </p>\n\n<pre><code>for (x = 0; x &lt; m; x++) {\nif (s[x].getrollno() == rno) {\n    b = s[x].getsem();\n    if (c[x].flag == 1) {\n        s[x].output1();\n        cout &lt;&lt; \"******\";\n        c[x].output();\n        cout &lt;&lt; \"******\";\n    }\n    if (p[x].flag == 1) {\n        cout &lt;&lt; \"*****\";\n        s[x].output1();\n        p[x].output();\n        cout &lt;&lt; \"*****\";\n    }\n    for (int i = 3; i &lt;= b; i++) {\n        if (i == 3) {\n            cout &lt;&lt; \"****\";\n            s[x].output1();\n            s3[x].output();\n            cout &lt;&lt; \"****\";\n        } else if (i == 4) {\n            cout &lt;&lt; \"****\";\n            s[x].output1();\n            s4[x].output();\n            cout &lt;&lt; \"****\";\n        } else if (i == 5) {\n            cout &lt;&lt; \"*****\";\n            s[x].output1();\n\n            s5[x].output();\n            cout &lt;&lt; \"*****\";\n        } else if (i == 6) {\n            cout &lt;&lt; \"*****\";\n            s[x].output1();\n            s6[x].output();\n            cout &lt;&lt; \"*****\";\n        } else if (i == 7) {\n            cout &lt;&lt; \"GOING!\";\n            cout &lt;&lt; \"****\";\n            cout &lt;&lt; \"GOING\";\n            s[x].output1();\n            s7[x].output();\n            cout &lt;&lt; \"******\";\n        } else {\n            cout &lt;&lt; \"******\";\n            s[x].output1();\n            cout &lt;&lt; \"CALLING\";\n            s8[x].output();\n            cout &lt;&lt; \"******\";\n        }\n\n\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "class", "shapes"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1429115479, "post_id": 29655770, "comment_id": 47451263, "body": "Does rhombus.h include a shape.h? Also look at the line <code>class rhombus</code> in rhombus.h.  You should look in your literature for inheritance."}, {"owner": {"reputation": 9, "user_id": 4690031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4709b1ff8daf5b3743aaf57af0cce012?s=128&d=identicon&r=PG&f=1", "display_name": "Satain", "link": "https://stackoverflow.com/users/4690031/satain"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1429116155, "post_id": 29655770, "comment_id": 47451651, "body": "Hi and yes it does, ive edited my post to include it, i can also attach the shape.cpp if necessary. inheritance is a topic ive barely touched upon but ill have to look into it online."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4690031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4709b1ff8daf5b3743aaf57af0cce012?s=128&d=identicon&r=PG&f=1", "display_name": "Satain", "link": "https://stackoverflow.com/users/4690031/satain"}, "edited": false, "score": 0, "creation_date": 1429118241, "post_id": 29656177, "comment_id": 47452918, "body": "Thanks Captain Giraffe, you made it look so simple i almost feel slightly embarrased. But thanks again for including the terminology, i shall now have a further look into this as im required to create numerous shapes with featured scaling and rotation included too. nightmare. Thank you again!"}], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": true, "score": 1, "last_activity_date": 1429116661, "creation_date": 1429116661, "answer_id": 29656177, "question_id": 29655770, "link": "https://stackoverflow.com/questions/29655770/need-some-help-clarifying-a-piece-of-code-which-im-trying-to-complete-c/29656177#29656177", "title": "Need some help clarifying a piece of code which im trying to complete C++", "body": "<p>The line\n    Rhombus::Rhombus(Vertex point, int radius)</p>\n\n<p>Is the constructor for your class. It tells you you can instantiate/create a Rhombus object like</p>\n\n<pre><code>int main(){\n     Vertex v;\n     Rhombus rhomb(v, 3); \n</code></pre>\n\n<p>This object creation is often called instantiation. </p>\n\n<p>The extra Shape</p>\n\n<pre><code> Rhombus::Rhombus(Vertex point, int radius): Shape(point)\n</code></pre>\n\n<p>Describes <em>how</em> to create the Rhombus object. Namely by calling a constructor in <code>Shape</code> that accepts a <code>Vertex</code> argument. Then it runs the rest of the code in the constructor. This is needed because Rhombus inherits Shape as you will find in <code>rhombus.h</code>. </p>\n\n<p>The key stuff you need to read up on is inheritance. This is likely covered quite early.</p>\n"}], "owner": {"reputation": 9, "user_id": 4690031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4709b1ff8daf5b3743aaf57af0cce012?s=128&d=identicon&r=PG&f=1", "display_name": "Satain", "link": "https://stackoverflow.com/users/4690031/satain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1429116705, "accepted_answer_id": 29656177, "answer_count": 1, "score": 0, "last_activity_date": 1429116661, "creation_date": 1429115353, "last_edit_date": 1429116041, "question_id": 29655770, "link": "https://stackoverflow.com/questions/29655770/need-some-help-clarifying-a-piece-of-code-which-im-trying-to-complete-c", "closed_reason": "Duplicate", "title": "Need some help clarifying a piece of code which im trying to complete C++", "body": "<p>Below is the code to a \"rhombus.cpp\" file which i am to complete. But first i would like to highlight this area \" Rhombus::Rhombus(Vertex point, int radius) : Shape(point){\".. my question is what exactly occurs here when in the compiler? the : Shape(point) is completely new to me so i am unsure of what to do, especially when i am to call this in the int main. And if what i have placed under the comment of //place your code here and add comments, etc is correct in what ive done? Your help is much appreciated!</p>\n\n<pre><code>#include \"rhombus.h\"\n\nRhombus::Rhombus(Vertex point, int radius) : Shape(point){\n// constructs a Rhombus of radius around a point in 2D space\nif((radius&gt;centroid.getX()/2) || (radius&gt;centroid.getX()/2))\n{\n    cout &lt;&lt; \"Object must fit on screen.\" &lt;&lt; endl;\n    system(\"pause\");\n    exit(0);\n}\n// place your code here and add comments that describe your understanding of        what is happening\nthis-&gt;radius = radius;\nplotVertices();\n}\n\nint Rhombus::area()\n{\n// returns the area of a Rhombus\nreturn 0;\n}\n\nint Rhombus::perimeter()\n{\n// returns the perimeter of a Rhombus\nreturn 0;\n}\n\nvoid Rhombus::plotVertices()\n{\n// a formula for rotating a point around 0,0 is\n// x' = x * cos(degrees in radians) - y * sin(degrees in radians)\n// y' = y * cos(degrees in radians) + x * sin(degrees in radians)\n// the coordinates for point A are the same as the centroid adjusted for the    radius\n// the coordinates for point B are determined by rotating point A by 90 degrees\n// the coordinates for point C are determined by rotating point A by 180 degrees\n// the coordinates for point C are determined by rotating point A by 270 degrees\n// remember that 0,0 is at the top left, not the bottom left, corner of the console\n\n// place your code here and add comments that describe your understanding of what is happening\n}\n</code></pre>\n\n<p>Rhombus.h</p>\n\n<pre><code>#include \"shape.h\"\n\nclass Rhombus : public Shape\n{\nint radius;\n\nvoid plotVertices();\npublic:\nRhombus(Vertex point, int radius = 10);\nint area();\nint perimeter();\n};\n</code></pre>\n\n<p>Shape.h </p>\n\n<pre><code>enter #pragma once\n#include \"console.h\"\n#include \"vertex.h\"\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\n#define PI 3.14159265358979323846\n\nclass Shape\n{\nlist&lt;Vertex&gt;::iterator itr;\nprotected:\nlist&lt;Vertex&gt; vertices;\nVertex centroid;\nvoid drawLine(int x1, int y1, int x2, int y2);\nShape(Vertex point);\ndouble round(double x);\npublic:\nvoid drawShape();\nvirtual int area() = 0;\nvirtual int perimeter() = 0;\nvirtual void outputStatistics();\nvoid rotate(double degrees);\nvoid scale(double factor);\n};\n</code></pre>\n"}, {"tags": ["c++", "windows", "macos", "qt", "cross-compiling"], "comments": [{"owner": {"reputation": 16534, "user_id": 128028, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcaa77933aaf36e13d533c713860e6ab?s=128&d=identicon&r=PG", "display_name": "Viet", "link": "https://stackoverflow.com/users/128028/viet"}, "edited": false, "score": 2, "creation_date": 1429117475, "post_id": 29655568, "comment_id": 47452468, "body": "May I know the reason you must cross compile? You can install Windows and dual-boot in on Mac machine or install it inside virtual machine and run from Mac."}, {"owner": {"reputation": 31, "user_id": 4405461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IR8uEfApuck/AAAAAAAAAAI/AAAAAAAAAhM/BdI4dh_3zWs/photo.jpg?sz=128", "display_name": "Raphael Silveira Costa", "link": "https://stackoverflow.com/users/4405461/raphael-silveira-costa"}, "reply_to_user": {"reputation": 16534, "user_id": 128028, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcaa77933aaf36e13d533c713860e6ab?s=128&d=identicon&r=PG", "display_name": "Viet", "link": "https://stackoverflow.com/users/128028/viet"}, "edited": false, "score": 0, "creation_date": 1429167137, "post_id": 29655568, "comment_id": 47473353, "body": "I need my application to run in Mac OS and Windows and I would like to simplify the compilation and do everything on Mac OS with Qt Creator."}, {"owner": {"reputation": 16534, "user_id": 128028, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcaa77933aaf36e13d533c713860e6ab?s=128&d=identicon&r=PG", "display_name": "Viet", "link": "https://stackoverflow.com/users/128028/viet"}, "edited": false, "score": 0, "creation_date": 1429174900, "post_id": 29655568, "comment_id": 47477975, "body": "I used to build stuff for Windows, Linux and MacOS, the best way is to build natively on each target. Cross-compilation can&#39;t guarantee you optimized binaries and it introduces unnecessary hassle."}], "owner": {"reputation": 31, "user_id": 4405461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IR8uEfApuck/AAAAAAAAAAI/AAAAAAAAAhM/BdI4dh_3zWs/photo.jpg?sz=128", "display_name": "Raphael Silveira Costa", "link": "https://stackoverflow.com/users/4405461/raphael-silveira-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429114727, "creation_date": 1429114727, "question_id": 29655568, "link": "https://stackoverflow.com/questions/29655568/cross-compile-c-qt-console-application-from-mac-os-to-windows", "title": "Cross Compile C++ Qt Console Application from Mac OS to Windows", "body": "<p>I am building a C++ Qt console application using CGAL and Boost.\nI would like this application to run in Mac OS and Windows.</p>\n\n<p>I am searching to compile my application in Mac OS in order to create an .exe for Windows.</p>\n\n<p>How can I do that ?</p>\n\n<p>I found <a href=\"https://forum.qt.io/topic/40116/cross-compile-on-os-x-for-windows-and-linux\" rel=\"nofollow\">this</a> but it doesn't seems to work ?</p>\n\n<p>Thanks a lot !</p>\n"}, {"tags": ["c++", "linux", "boost", "cmake", "installation"], "comments": [{"owner": {"reputation": 2230, "user_id": 3569208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd975a93e8e802235621a80c5c35ad16?s=128&d=identicon&r=PG&f=1", "display_name": "Hastur", "link": "https://stackoverflow.com/users/3569208/hastur"}, "edited": false, "score": 0, "creation_date": 1429114827, "post_id": 29655533, "comment_id": 47450889, "body": "From shell search if you have <code>boost_random</code> for example with <code>locate boost_random</code>.  In an installation by sudo you can find in <code>&#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;libboost_random.a</code>... in a user one you should search for it."}, {"owner": {"reputation": 443, "user_id": 2118761, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62df8dcd36bcf41efd718ee3613f420c?s=128&d=identicon&r=PG", "display_name": "Yasser Mohseni", "link": "https://stackoverflow.com/users/2118761/yasser-mohseni"}, "reply_to_user": {"reputation": 2230, "user_id": 3569208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd975a93e8e802235621a80c5c35ad16?s=128&d=identicon&r=PG&f=1", "display_name": "Hastur", "link": "https://stackoverflow.com/users/3569208/hastur"}, "edited": false, "score": 0, "creation_date": 1429123485, "post_id": 29655533, "comment_id": 47456203, "body": "I downloaded the standard boost library from <code>boost.org</code>. The random library actually exists in the <code>boost_1_48_0&#47;libs</code> and its includes are in <code>boost_1_48_0&#47;boost&#47;</code>. Also why <code>cmake</code> can find other boost libraries such as <code>boost_thread</code> or <code>boost_filesystem</code> but it has problem finding <code>boost_random</code>?"}, {"owner": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "edited": false, "score": 1, "creation_date": 1429125941, "post_id": 29655533, "comment_id": 47457750, "body": "Have you actually built the required boost libraries?  Your question seems to indicate that you haven&#39;t - i.e. that you&#39;ve just downloaded and extracted the Boost sources.  If you <i>have</i> built Boost.Random, what&#39;s the full path (including filename) of the compiled library?  It shouldn&#39;t be <code>boost_1_48_0&#47;libs</code> - that should contain the source files, docs, examples, etc."}, {"owner": {"reputation": 443, "user_id": 2118761, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62df8dcd36bcf41efd718ee3613f420c?s=128&d=identicon&r=PG", "display_name": "Yasser Mohseni", "link": "https://stackoverflow.com/users/2118761/yasser-mohseni"}, "reply_to_user": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "edited": false, "score": 0, "creation_date": 1429301686, "post_id": 29655533, "comment_id": 47552771, "body": "@Fraser Yes, you are right. I hadn&#39;t built the boost libraries. That had been the problem. So, I built the required libraries using  <code>booststrap.sh</code>; and now problem is solved. Thank you very much for your help."}], "answers": [{"comments": [{"owner": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "edited": false, "score": 3, "creation_date": 1429126615, "post_id": 29658783, "comment_id": 47458185, "body": "I&#39;m afraid CMake syntax is quite different - this answer doesn&#39;t really help."}], "owner": {"reputation": 888, "user_id": 4618308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/moha6.jpg?s=128&g=1", "display_name": "mrflash818", "link": "https://stackoverflow.com/users/4618308/mrflash818"}, "is_accepted": false, "score": -5, "last_activity_date": 1429125062, "creation_date": 1429125062, "answer_id": 29658783, "question_id": 29655533, "link": "https://stackoverflow.com/questions/29655533/cmake-does-not-find-a-specific-boost-library-boost-random/29658783#29658783", "title": "CMake does not find a specific boost library (boost_random)", "body": "<p>I am not sure if this will help, but if CMake uses a makefile concept, then this is what I had to add to my makefile to compile boost successfully (but I use Gnu Make, so again, not sure if this will help):</p>\n\n<p><code>LDLIBS := -lboost_thread -lboost_system -lboost_filesystem</code></p>\n\n<p>I will guess you need to add something like <code>-lboost_random</code> ?</p>\n"}], "owner": {"reputation": 443, "user_id": 2118761, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62df8dcd36bcf41efd718ee3613f420c?s=128&d=identicon&r=PG", "display_name": "Yasser Mohseni", "link": "https://stackoverflow.com/users/2118761/yasser-mohseni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3024, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429126273, "creation_date": 1429114635, "last_edit_date": 1429126273, "question_id": 29655533, "link": "https://stackoverflow.com/questions/29655533/cmake-does-not-find-a-specific-boost-library-boost-random", "title": "CMake does not find a specific boost library (boost_random)", "body": "<p>I know that there are already similar questions with good solutions; However, none of those solutions helped to resolve my problem. I am trying to build a library for my research experiments. This library requires Boost 1.48 as one of its prerequisites. I had built this library on my personal Ubuntu on a server and everything was fine. I used following commands to install required boost libraries:</p>\n\n<pre><code>sudo apt-get install libboost-all-dev\nsudo apt-get install libboost1.48-dev\nsudo apt-get install libboost-program-options1.48-dev\nsudo apt-get install libboost-system1.48-dev\nsudo apt-get install libboost-filesystem1.48-dev\nsudo apt-get install libboost-random1.48-dev\nsudo apt-get install libboost-thread1.48-dev\n</code></pre>\n\n<p>Now I have to install this library on another server. I am not an administrator on this one; hence I do not have enough privileges to install packages or use <code>sudo</code>. So I downloaded boost 1.48 from its website and extracted it to a local place. Then I set the environment variables to address the boost local directory.</p>\n\n<pre><code>export BOOST_ROOT= &lt;\"boost extracted directory\"&gt;\nexport BOOST_LIBRARYDIR=&lt;\"boost extracted directory/lib\"&gt;\n</code></pre>\n\n<p>This time CMake finds all boost libraries except <code>boost_random</code>.</p>\n\n<pre><code>CMake Error at /usr/share/cmake/Modules/FindBoost.cmake:1138 (message):\n  Unable to find the requested Boost libraries.\n\n  Boost version: 1.48.0\n\n  Boost include path: /home/ME/Research/BOOST/boost_1_48_0\n\n  Could not find the following Boost libraries:\n\n          boost_random\n\n  Some (but not all) of the required Boost libraries were found.  You may\n  need to install these additional Boost libraries.  Alternatively, set\n  BOOST_LIBRARYDIR to the directory containing Boost libraries or BOOST_ROOT to the location of Boost. Call Stack (most recent call first):\n  CMakeLists.txt:6 (FIND_PACKAGE) \n</code></pre>\n\n<p>I will highly appreciate if you can help me to resolve this problem.</p>\n\n<p><strong>Note:</strong> the report of <code>cmake -DBoost_DEBUG=ON -DBOOST_ROOT=/home/ME/Research/BOOST/boost_1_48_0/ -DBOOST_LIBRARYDIR=/home/ME/Research/BOOST/boost_1_48_0/libs/ -DBOOST_INCLUDEDIR=/home/ME/Research/BOOST/boost_1_48_0/boost/ .. &gt; out6.txt</code> is as follow:</p>\n\n<pre><code>-- Could NOT find CUDA (missing:  CUDA_TOOLKIT_ROOT_DIR CUDA_NVCC_EXECUTABLE CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) \n-- [ /usr/share/cmake/Modules/FindBoost.cmake:481 ] _boost_TEST_VERSIONS = 1.56.0;1.56;1.55.0;1.55;1.54.0;1.54;1.53.0;1.53;1.52.0;1.52;1.51.0;1.51;1.50.0;1.50;1.49.0;1.49;1.48.0;1.48\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:483 ] Boost_USE_MULTITHREADED = TRUE\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:485 ] Boost_USE_STATIC_LIBS = \n-- [ /usr/share/cmake/Modules/FindBoost.cmake:487 ] Boost_USE_STATIC_RUNTIME = \n-- [ /usr/share/cmake/Modules/FindBoost.cmake:489 ] Boost_ADDITIONAL_VERSIONS = \n-- [ /usr/share/cmake/Modules/FindBoost.cmake:491 ] Boost_NO_SYSTEM_PATHS = \n-- [ /usr/share/cmake/Modules/FindBoost.cmake:543 ] Declared as CMake or Environmental Variables:\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:545 ]   BOOST_ROOT = /home/ME/Research/BOOST/boost_1_48_0/\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:547 ]   BOOST_INCLUDEDIR = /home/ME/Research/BOOST/boost_1_48_0/boost/\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:549 ]   BOOST_LIBRARYDIR = /home/ME/Research/BOOST/boost_1_48_0/libs/\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:551 ] _boost_TEST_VERSIONS = 1.56.0;1.56;1.55.0;1.55;1.54.0;1.54;1.53.0;1.53;1.52.0;1.52;1.51.0;1.51;1.50.0;1.50;1.49.0;1.49;1.48.0;1.48\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:620 ] Include debugging info:\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:622 ]   _boost_INCLUDE_SEARCH_DIRS = /home/ME/Research/BOOST/boost_1_48_0/boost/;/home/ME/Research/BOOST/boost_1_48_0//include;/home/ME/Research/BOOST/boost_1_48_0/;PATHS;C:/boost/include;C:/boost;/sw/local/include\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:624 ]   _boost_PATH_SUFFIXES = boost-1_56_0;boost_1_56_0;boost/boost-1_56_0;boost/boost_1_56_0;boost-1_56;boost_1_56;boost/boost-1_56;boost/boost_1_56;boost-1_55_0;boost_1_55_0;boost/boost-1_55_0;boost/boost_1_55_0;boost-1_55;boost_1_55;boost/boost-1_55;boost/boost_1_55;boost-1_54_0;boost_1_54_0;boost/boost-1_54_0;boost/boost_1_54_0;boost-1_54;boost_1_54;boost/boost-1_54;boost/boost_1_54;boost-1_53_0;boost_1_53_0;boost/boost-1_53_0;boost/boost_1_53_0;boost-1_53;boost_1_53;boost/boost-1_53;boost/boost_1_53;boost-1_52_0;boost_1_52_0;boost/boost-1_52_0;boost/boost_1_52_0;boost-1_52;boost_1_52;boost/boost-1_52;boost/boost_1_52;boost-1_51_0;boost_1_51_0;boost/boost-1_51_0;boost/boost_1_51_0;boost-1_51;boost_1_51;boost/boost-1_51;boost/boost_1_51;boost-1_50_0;boost_1_50_0;boost/boost-1_50_0;boost/boost_1_50_0;boost-1_50;boost_1_50;boost/boost-1_50;boost/boost_1_50;boost-1_49_0;boost_1_49_0;boost/boost-1_49_0;boost/boost_1_49_0;boost-1_49;boost_1_49;boost/boost-1_49;boost/boost_1_49;boost-1_48_0;boost_1_48_0;boost/boost-1_48_0;boost/boost_1_48_0;boost-1_48;boost_1_48;boost/boost-1_48;boost/boost_1_48\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:644 ] location of version.hpp: /home/ME/Research/BOOST/boost_1_48_0/boost/version.hpp\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:668 ] version.hpp reveals boost 1.48.0\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:744 ] guessed _boost_COMPILER = -gcc44\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:754 ] _boost_MULTITHREADED = -mt\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:797 ] _boost_RELEASE_ABI_TAG = -\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:799 ] _boost_DEBUG_ABI_TAG = -d\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:847 ] _boost_LIBRARY_SEARCH_DIRS = /home/ME/Research/BOOST/boost_1_48_0/libs/;/home/ME/Research/BOOST/boost_1_48_0//lib;/home/ME/Research/BOOST/boost_1_48_0//stage/lib;/home/ME/Research/BOOST/boost_1_48_0/lib;/home/ME/Research/BOOST/boost_1_48_0/../lib;/home/ME/Research/BOOST/boost_1_48_0/stage/lib;PATHS;C:/boost/lib;C:/boost;/sw/local/lib\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:957 ] Searching for PROGRAM_OPTIONS_LIBRARY_RELEASE: boost_program_options-gcc44-mt-1_48;boost_program_options-gcc44-mt;boost_program_options-mt-1_48;boost_program_options-mt;boost_program_options\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:993 ] Searching for PROGRAM_OPTIONS_LIBRARY_DEBUG: boost_program_options-gcc44-mt-d-1_48;boost_program_options-gcc44-mt-d;boost_program_options-mt-d-1_48;boost_program_options-mt-d;boost_program_options-mt;boost_program_options\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:957 ] Searching for SYSTEM_LIBRARY_RELEASE: boost_system-gcc44-mt-1_48;boost_system-gcc44-mt;boost_system-mt-1_48;boost_system-mt;boost_system\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:993 ] Searching for SYSTEM_LIBRARY_DEBUG: boost_system-gcc44-mt-d-1_48;boost_system-gcc44-mt-d;boost_system-mt-d-1_48;boost_system-mt-d;boost_system-mt;boost_system\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:957 ] Searching for FILESYSTEM_LIBRARY_RELEASE: boost_filesystem-gcc44-mt-1_48;boost_filesystem-gcc44-mt;boost_filesystem-mt-1_48;boost_filesystem-mt;boost_filesystem\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:993 ] Searching for FILESYSTEM_LIBRARY_DEBUG: boost_filesystem-gcc44-mt-d-1_48;boost_filesystem-gcc44-mt-d;boost_filesystem-mt-d-1_48;boost_filesystem-mt-d;boost_filesystem-mt;boost_filesystem\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:957 ] Searching for RANDOM_LIBRARY_RELEASE: boost_random-gcc44-mt-1_48;boost_random-gcc44-mt;boost_random-mt-1_48;boost_random-mt;boost_random\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:993 ] Searching for RANDOM_LIBRARY_DEBUG: boost_random-gcc44-mt-d-1_48;boost_random-gcc44-mt-d;boost_random-mt-d-1_48;boost_random-mt-d;boost_random-mt;boost_random\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:957 ] Searching for THREAD_LIBRARY_RELEASE: boost_thread-gcc44-mt-1_48;boost_thread-gcc44-mt;boost_thread-mt-1_48;boost_thread-mt;boost_thread\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:993 ] Searching for THREAD_LIBRARY_DEBUG: boost_thread-gcc44-mt-d-1_48;boost_thread-gcc44-mt-d;boost_thread-mt-d-1_48;boost_thread-mt-d;boost_thread-mt;boost_thread\n-- [ /usr/share/cmake/Modules/FindBoost.cmake:1044 ] Boost_FOUND = 1\n-- Configuring incomplete, errors occurred!\nSee also \"/home/ME/Research/CURRENNT/build/CMakeFiles/CMakeOutput.log\".\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-graph"], "answers": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1429127814, "creation_date": 1429127814, "answer_id": 29659692, "question_id": 29655500, "link": "https://stackoverflow.com/questions/29655500/in-bgl-how-to-efficiently-find-an-adjacent-vertex-using-a-property-of-a-vertex/29659692#29659692", "title": "In BGL, how to efficiently find an adjacent vertex using a property of a vertex", "body": "<p>You don't post a sample, but from the description given you could select an ordered set for the <code>OutEdgeList</code> and order it by the target vertex ID (which is unique in that scope).</p>\n\n<p>Now you can use <code>std::lower_bound</code>/<code>std::upper_bound</code>/<code>std::equal_range</code> on the out_edges of any given node.</p>\n\n<p>If you prefer you can easily add free functions like <code>find_adjacent</code> to hide the implementation.</p>\n"}], "owner": {"reputation": 23, "user_id": 4780047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db1b5e0bdf7ad639a50e9914d5f4e883?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/4780047/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429127814, "creation_date": 1429114555, "question_id": 29655500, "link": "https://stackoverflow.com/questions/29655500/in-bgl-how-to-efficiently-find-an-adjacent-vertex-using-a-property-of-a-vertex", "title": "In BGL, how to efficiently find an adjacent vertex using a property of a vertex", "body": "<p>I\u2019m having a bidirectional graph (i.e. a directed graph in which it is possible to iterate both the in-edges and the out-edges).</p>\n\n<p>Each vertex, among other internal properties, has a special ID property which is an integer from a finite set (couple of hundreds) which is known at  program's startup, that is \u2013 it won\u2019t change during program's life time, but it is unknown at compile time. </p>\n\n<p>This property <em>is not unique</em> at the scope of the graph (i.e. there can be two Vertices with the same ID), and therefore cannot be used with named/labeled_graph. <em>It is however unique in the scope of a given Vertex</em>, that is both the incoming neighbors and the outgoing neighbors of a vertex should all have different IDs.</p>\n\n<p>My question is whether there is a build in mechanism in BGL to efficiently find an adjacent vertex <em>u</em>, of <em>v</em> given <em>u</em>\u2019s descriptor, the graph, and the ID of <em>u</em>. </p>\n\n<p>This can of course be achieve using some external mapping, but it feels like quite a common scenario, and given that the adjacency_list\u2019s first template parameter can be an associative container \u2013 it seems only natural to have some kind of find_adjacent(v,g,ID) function, alas, I wasn\u2019t able to find anything like it.</p>\n\n<p>Many thanks,\nAndrey</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1429114381, "post_id": 29655420, "comment_id": 47450610, "body": "What do you define as simpler?"}, {"owner": {"reputation": 4967, "user_id": 1935008, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3500ff2f9f622b0cc68319d62ede7244?s=128&d=identicon&r=PG", "display_name": "Ilya Kobelevskiy", "link": "https://stackoverflow.com/users/1935008/ilya-kobelevskiy"}, "edited": false, "score": 3, "creation_date": 1429114444, "post_id": 29655420, "comment_id": 47450651, "body": "See <a href=\"http://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor\" title=\"what is this weird colon member syntax in the constructor\">stackoverflow.com/questions/1711990/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 4780740, "user_type": "registered", "profile_image": "https://graph.facebook.com/1565674577018694/picture?type=large", "display_name": "Adam Madamski", "link": "https://stackoverflow.com/users/4780740/adam-madamski"}, "edited": false, "score": 0, "creation_date": 1429114473, "post_id": 29655420, "comment_id": 47450673, "body": "Without writing :x(X). I don&#39;t understand this part."}, {"owner": {"reputation": 21, "user_id": 4780740, "user_type": "registered", "profile_image": "https://graph.facebook.com/1565674577018694/picture?type=large", "display_name": "Adam Madamski", "link": "https://stackoverflow.com/users/4780740/adam-madamski"}, "edited": false, "score": 0, "creation_date": 1429114526, "post_id": 29655420, "comment_id": 47450708, "body": "Ok, Ilya gave me the answer."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1429114605, "post_id": 29655420, "comment_id": 47450754, "body": "@AdamMadamski get used to that syntax. For your <code>int</code> member is trivial, but there are entities in C++ where it is required (const members, reference members, non-default-constructibles, etc).  It is fundamentally more efficient to construct-as-wanted rather then default-construct and assign-as-wanted. Don&#39;t try to avoid it: <i>embrace it</i>."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1429116172, "post_id": 29655501, "comment_id": 47451659, "body": "Arguably, aggregate initialisation is simpler ;)"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1429116359, "post_id": 29655501, "comment_id": 47451766, "body": "@LightningRacisinObrit: True, but not for this class since it needs a non-trivial constructor."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1429116386, "post_id": 29655501, "comment_id": 47451786, "body": "Right, but you didn&#39;t constrain your summary! hehe"}], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 4, "last_activity_date": 1429116380, "last_edit_date": 1429116380, "creation_date": 1429114556, "answer_id": 29655501, "question_id": 29655420, "link": "https://stackoverflow.com/questions/29655420/simple-constructor-in-c/29655501#29655501", "title": "Simple Constructor in C++", "body": "<p>I guess from the bold face that it's just the <code>: x(X)</code> part you don't understand.</p>\n\n<p>That's the <em>initialiser list</em>, used to initialise member variables. In this case, it initialises the variable <code>x</code> to have the same value as the constructor parameter <code>X</code>. <code>y</code> is not included in the list, so it's left uninitialised at that point, then assigned a value in the constructor body.</p>\n\n<p>There's no simpler way to initialise a member variable (in a class with a non-trivial constructor).</p>\n"}, {"comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 3, "creation_date": 1429115261, "post_id": 29655544, "comment_id": 47451141, "body": "Try declaring the member as &quot;const int x;&quot;, and then you&#39;ll see the difference between initialization and assignment."}], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 4, "last_activity_date": 1429115348, "last_edit_date": 1495541662, "creation_date": 1429114654, "answer_id": 29655544, "question_id": 29655420, "link": "https://stackoverflow.com/questions/29655420/simple-constructor-in-c/29655544#29655544", "title": "Simple Constructor in C++", "body": "<p>You can't write it any simpler without altering the effect of the code.</p>\n\n<p>You <em>could</em> write it this way:</p>\n\n<pre><code>Myclass::Myclass(int X)\n{\n    x = X;\n    y = new double[x];\n}\n</code></pre>\n\n<p>But then it wouldn't be an <em>initialization</em> of <code>x</code>, it would be an <em>assignment</em> to <code>x</code>.</p>\n\n<p>Each member variable is initialized before running the constructor body (the part between <code>{</code> and <code>}</code>), in the so-called <a href=\"https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor\"><em>member initialization list</em></a> between the <code>:</code> and the <code>{</code>.</p>\n\n<hr>\n\n<p>As a side note, it would be better to initialize <code>y</code> in the member initialization list as well, rather than assigning to it in the constructor body:</p>\n\n<pre><code>Myclass::Myclass(int X) : x(X), y(new double[x])\n{\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4780740, "user_type": "registered", "profile_image": "https://graph.facebook.com/1565674577018694/picture?type=large", "display_name": "Adam Madamski", "link": "https://stackoverflow.com/users/4780740/adam-madamski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "closed_date": 1429114741, "answer_count": 2, "score": -1, "last_activity_date": 1429116380, "creation_date": 1429114351, "question_id": 29655420, "link": "https://stackoverflow.com/questions/29655420/simple-constructor-in-c", "closed_reason": "Duplicate", "title": "Simple Constructor in C++", "body": "<p>I've downloaded simple code with constructors. Could anyone explain me this part of code:</p>\n\n<pre><code>class Myclass\n{\nprivate:\n    int x;\n    double *y;                      \n\npublic:\n    Myclass(int X);              \n\n};\n\nMyclass::Myclass(int X) : x(X)\n{\ny = new double[x];\n}\n</code></pre>\n\n<p>I don't understand \"Myclass::Myclass(int X) <strong>:x(X)</strong>\". Couldn't it be written simpler?</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1429114618, "post_id": 29655492, "comment_id": 47450764, "body": "And how would that allow instantiating it with different types, as the OP does?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1429115396, "post_id": 29655492, "comment_id": 47451220, "body": "@angew Well, there is the missing <code>template&lt;class A, class B&gt; struct rebase; template&lt;template&lt;class...&gt;class Z, class A, class B&gt; struct rebase&lt;Z&lt;A&gt;,B&gt;{using type=Z&lt;B&gt;;}; template&lt;class A, class B&gt;using rebase_t=typename rebase&lt;A,B&gt;::type;</code> implied by the above interface.  Defter is just being succinct."}, {"owner": {"reputation": 721, "user_id": 479532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29d62e4d73bf4a16a7755f6862a6031f?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej \u010cert&#237;k", "link": "https://stackoverflow.com/users/479532/ond%c5%99ej-%c4%8cert%c3%adk"}, "edited": false, "score": 0, "creation_date": 1429128071, "post_id": 29655492, "comment_id": 47459033, "body": "When using just &quot;template &lt;class UPtr&gt;&quot;, I get &quot;error: \u2018UPtr\u2019 is not a template&quot;."}], "owner": {"reputation": 214, "user_id": 3207189, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001177461496/picture?type=large", "display_name": "Defter", "link": "https://stackoverflow.com/users/3207189/defter"}, "is_accepted": false, "score": -3, "last_activity_date": 1429114693, "last_edit_date": 1429114693, "creation_date": 1429114525, "answer_id": 29655492, "question_id": 29655391, "link": "https://stackoverflow.com/questions/29655391/template-template-substitution-in-function/29655492#29655492", "title": "Template template substitution in function", "body": "<p>Use only (no need <code>template &lt;typename Type&gt;</code>)</p>\n\n<pre><code>template &lt;class UPtr&gt;\n</code></pre>\n\n<p>For test you can use std::is_base_of with static_assert\nbut i don't know how validate base template class</p>\n"}, {"comments": [{"owner": {"reputation": 721, "user_id": 479532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29d62e4d73bf4a16a7755f6862a6031f?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej \u010cert&#237;k", "link": "https://stackoverflow.com/users/479532/ond%c5%99ej-%c4%8cert%c3%adk"}, "edited": false, "score": 0, "creation_date": 1429127242, "post_id": 29655520, "comment_id": 47458537, "body": "Thanks Angew! I didn&#39;t realize the Deleter must be present even if it has a default. I improved upon your answer here: <a href=\"http://stackoverflow.com/a/29659470/479532\">stackoverflow.com/a/29659470/479532</a>"}], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 5, "last_activity_date": 1429114603, "creation_date": 1429114603, "answer_id": 29655520, "question_id": 29655391, "link": "https://stackoverflow.com/questions/29655391/template-template-substitution-in-function/29655520#29655520", "title": "Template template substitution in function", "body": "<p>Look up the <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"noreferrer\">declaration of <code>std::unique_ptr</code></a>:</p>\n\n<pre><code>template &lt;class T, class Deleter = std::default_delete&lt;T&gt;&gt;\nclass unique_ptr;\n</code></pre>\n\n<p>It's a class template with 2 template parameters. To copy it exactly, you must change your class template to match, and change the test function:</p>\n\n<pre><code>template &lt;template &lt;typename, typename&gt; class UPtr&gt;\nvoid test_unique_ptr_interface()\n{\n  // ...\n}\n</code></pre>\n\n<p>An alternative would be to turn make the template template parameter variadic:</p>\n\n<pre><code>template &lt;template &lt;typename... &gt; class UPtr&gt;\nvoid test_unique_ptr_interface()\n{\n  // ...\n}\n</code></pre>\n\n<p>This would allow your class to keep just one template parameter. Note that it will then not be a full drop-in replacement for <code>std::unique_ptr</code>, though.</p>\n"}, {"comments": [{"owner": {"reputation": 721, "user_id": 479532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29d62e4d73bf4a16a7755f6862a6031f?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej \u010cert&#237;k", "link": "https://stackoverflow.com/users/479532/ond%c5%99ej-%c4%8cert%c3%adk"}, "edited": false, "score": 0, "creation_date": 1429127930, "post_id": 29655525, "comment_id": 47458945, "body": "Thanks for all the tips! Indeed, I tested the <code>unique_ptr1</code> and it works. You are absolutely right, that I need to add a Deleter into my UniquePtr (it&#39;s on my TODO list). And the right way is to modify the template argument list."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1429115525, "last_edit_date": 1429115525, "creation_date": 1429114611, "answer_id": 29655525, "question_id": 29655391, "link": "https://stackoverflow.com/questions/29655391/template-template-substitution-in-function/29655525#29655525", "title": "Template template substitution in function", "body": "<p>Change your template argument list to:</p>\n\n<pre><code>template&lt;template&lt;class...&gt;class UPtr&gt;\n</code></pre>\n\n<p>as <code>std::unique_ptr</code> takes 2 arguments, <code>template&lt;class&gt;class</code> won't match it.</p>\n\n<p>How templates are matched in C++ is a bit strange (and I don't know the justification for it), but <code>template&lt;class...&gt;class</code> will match any <code>template class</code> that takes zero value-parameters (ie, only type parameters).</p>\n\n<p>Both <code>std::unique_ptr&lt;?&gt;</code> (which takes 2 parameters, 1 of them defaulted) and <code>UniquePtr&lt;?&gt;</code> (which takes 1 parameter) will match.  Passing it one parameter will result in <code>std::unique_ptr</code> using its default second parameter.</p>\n\n<p>It is annoying that a <code>template</code> that takes 2 parameters, the second defaulted, won't match <code>template&lt;class&gt;class</code>, but that is part of the \"strange\" way template template parameters are matched.  You could write an adapter:</p>\n\n<pre><code>template&lt;class T&gt;using unique_ptr1 = std::unique_ptr&lt;T&gt;;\n</code></pre>\n\n<p>and pass <code>unique_ptr1</code> directly to your <code>test_unique_ptr_interface</code>.</p>\n\n<p>Alternatively:</p>\n\n<pre><code>template&lt;template&lt;class...&gt;class Z&gt;\nstruct unary_version {\n  template&lt;class T&gt;\n  using apply = Z&lt;T&gt;;\n};\n</code></pre>\n\n<p>then</p>\n\n<pre><code>test_unique_ptr_interface&lt; unary_version&lt;std::unique_ptr&gt;::template apply &gt;\n</code></pre>\n\n<p>is another way without changing <code>test_unique_ptr_interface</code>.  But the right answer is to replace <code>test_unique_ptr_interface</code>.</p>\n\n<p>Note that your lack of deleter means that you don't match the <code>unique_ptr</code> interface.  You could instead augment your class with those features.  You can rename your existing function to <code>test_unique_ptr_interface_with_one_arg</code>, and call it from <code>test_unique_ptr_interface</code> that also tests deleter functionality.</p>\n"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1429114686, "creation_date": 1429114686, "answer_id": 29655553, "question_id": 29655391, "link": "https://stackoverflow.com/questions/29655391/template-template-substitution-in-function/29655553#29655553", "title": "Template template substitution in function", "body": "<p><code>std::unique_ptr</code> takes <em>two</em> template parameters (type and deleter), so your template-template also needs to take those same two parameters.</p>\n"}, {"owner": {"reputation": 721, "user_id": 479532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29d62e4d73bf4a16a7755f6862a6031f?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej \u010cert&#237;k", "link": "https://stackoverflow.com/users/479532/ond%c5%99ej-%c4%8cert%c3%adk"}, "is_accepted": false, "score": 1, "last_activity_date": 1429127172, "creation_date": 1429127172, "answer_id": 29659470, "question_id": 29655391, "link": "https://stackoverflow.com/questions/29655391/template-template-substitution-in-function/29659470#29659470", "title": "Template template substitution in function", "body": "<p>@Angew gave the correct answer, though with his specific suggestion I need to change <code>UPtr&lt;A&gt; p1(new A);</code> to <code>UPtr&lt;A, std::default_delete&lt;A&gt;&gt; p1(new A);</code>. To avoid this, I need to change the function declaration from</p>\n\n<pre><code>template &lt;template &lt;typename Type&gt; class UPtr&gt;\nvoid test_unique_ptr_interface()\n</code></pre>\n\n<p>to</p>\n\n<pre><code>template &lt;template &lt;typename T, typename Deleter=std::default_delete&lt;T&gt;&gt; class UPtr&gt;\nvoid test_unique_ptr_interface()\n</code></pre>\n\n<p>Then no further changes are necessary in the function body, I can still use <code>UPtr&lt;A&gt; p1(new A);</code> and everything compiles.</p>\n"}], "owner": {"reputation": 721, "user_id": 479532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29d62e4d73bf4a16a7755f6862a6031f?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej \u010cert&#237;k", "link": "https://stackoverflow.com/users/479532/ond%c5%99ej-%c4%8cert%c3%adk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 29655520, "answer_count": 5, "score": 2, "last_activity_date": 1429127172, "creation_date": 1429114249, "question_id": 29655391, "link": "https://stackoverflow.com/questions/29655391/template-template-substitution-in-function", "title": "Template template substitution in function", "body": "<p>I am implementing my own <code>UniquePtr</code> and I would like to test that it has the same interface as the <code>std::unique_ptr</code>. So I wrote a function:</p>\n\n<pre><code>class A\n{\n  A() { }\n  ~A() { }\n};\n\nclass B\n{\n  B() { }\n  ~B() { }\n};\n\n\ntemplate &lt;template &lt;typename Type&gt; class UPtr&gt;\nvoid test_unique_ptr_interface()\n{\n  UPtr&lt;A&gt; p1(new A);\n  {\n    UPtr&lt;A&gt; p2(std::move(p1));\n    p1 = std::move(p2);\n  }\n\n  UPtr&lt;B&gt; p1(new B);\n  {\n    UPtr&lt;B&gt; p2(std::move(p1));\n    p1 = std::move(p2);\n  }\n  ...\n}\n</code></pre>\n\n<p>And then I would like to call it like this:</p>\n\n<pre><code>test_unique_ptr_interface&lt;std::unique_ptr&gt;(); \ntest_unique_ptr_interface&lt;UniquePtr&gt;();\n</code></pre>\n\n<p>The first call tests that the <code>std::unique_ptr</code> passes the tests, thus that I am testing the correct interface. The second call tests that my own <code>UniquePtr</code> implementation works as a drop in replacement. The function <code>test_unique_ptr_interface</code> will be a lot longer, I just posted a simple example.</p>\n\n<p>However, I get an error:</p>\n\n<pre><code>error: no matching function for call to \u2018test_unique_ptr_interface()\u2019\n   test_unique_ptr_interface&lt;std::unique_ptr&gt;();\n</code></pre>\n\n<p>How should I declare the <code>test_unique_ptr_interface()</code> function so that this compiles?</p>\n"}, {"tags": ["c++", "curl", "sftp", "libcurl", "libssh2"], "answers": [{"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "is_accepted": true, "score": 1, "last_activity_date": 1429131051, "creation_date": 1429131051, "answer_id": 29660651, "question_id": 29655164, "link": "https://stackoverflow.com/questions/29655164/curl-sftp-rename-when-destination-path-exists/29660651#29660651", "title": "curl SFTP rename when destination path exists", "body": "<p>I'm pretty sure the reason is that in the case when curl fails to rename a file over SFTP, it is because the server denies it. We've seen it happens at times by some servers even though curl sends the \"force overwrite\" option.</p>\n\n<p>The reason other clients may work can be that they do rm + mv under the hood or perhaps because they negotiate a different SFTP protocol version with the server (and thus get different behavior).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2026095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 1, "accepted_answer_id": 29660651, "answer_count": 1, "score": 1, "last_activity_date": 1429131072, "creation_date": 1429113592, "last_edit_date": 1429131072, "question_id": 29655164, "link": "https://stackoverflow.com/questions/29655164/curl-sftp-rename-when-destination-path-exists", "title": "curl SFTP rename when destination path exists", "body": "<p>I have to regularly update a file on a server using SFTP transfer and libcurl. From many sources and personal experience I discovered that rename command using curl with SFTP fails when the destination path points to already existing file. But sftp client does not work that way - the same command overwrites the existing file. Isn't there really way to force this behaviour on libcurl. I am aware of the option of deleting the file first, but then comes the problem that it fails if the file doesn't exists and it is still a workaround rather than a solution to me.</p>\n\n<p>Edit: \nlibcurl raises the LIBSSH2_SFTP_RENAME_OVERWRITE flag of libssh2_sftp_rename_ex but it seems to not work for some versions of the protocol/server</p>\n\n<p>Workaround:\nadd commands \"*rm\" which points that rm can fail</p>\n"}, {"tags": ["c++", "iterator", "standards", "language-lawyer", "c++-standard-library"], "comments": [{"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1429112716, "post_id": 29654728, "comment_id": 47449305, "body": "If it isnt permitted by standard, it will most likely result in undefined behaviour, because it is kind of illogical to compare iterators of different vectors"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 2, "creation_date": 1429113491, "post_id": 29654728, "comment_id": 47449941, "body": "In general, breaking a requirement gives undefined behaviour."}], "answers": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 3, "last_activity_date": 1429112810, "creation_date": 1429112810, "answer_id": 29654844, "question_id": 29654728, "link": "https://stackoverflow.com/questions/29654728/what-does-the-c-standard-say-about-stdvectorint-v1-v2-stddistancev1-be/29654844#29654844", "title": "What does the C++ standard say about std::vector&lt;int&gt; v1,v2; std::distance(v1.begin(),v2.begin())?", "body": "<p>The <code>requires</code> is not met, which means the code has undefined behavior: Anything could happen.</p>\n"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 28, "last_activity_date": 1429113287, "last_edit_date": 1429113287, "creation_date": 1429112974, "answer_id": 29654925, "question_id": 29654728, "link": "https://stackoverflow.com/questions/29654728/what-does-the-c-standard-say-about-stdvectorint-v1-v2-stddistancev1-be/29654925#29654925", "title": "What does the C++ standard say about std::vector&lt;int&gt; v1,v2; std::distance(v1.begin(),v2.begin())?", "body": "<p>[iterator.requirements.general]:</p>\n\n<blockquote>\n  <p>An iterator <code>j</code> is called <em>reachable</em> from an iterator <code>i</code> if and only\n  if there is a finite sequence of applications of  the expression <code>++i</code>\n  that makes <code>i == j</code>. </p>\n</blockquote>\n\n<p>The problem is that once you incremented <code>v1.begin()</code> <code>v1.size()-1</code> times, the next increment operation induces undefined behavior, so <code>v2.begin()</code> cannot be reached from <code>v1.begin()</code>. The same argument makes <code>v1.begin()</code> unreachable from <code>v2.begin()</code>.</p>\n\n<hr>\n\n<p>In case your question was \"What happens if a condition in a <em>Requires</em> section is violated?\", look at [res.on.required]:</p>\n\n<blockquote>\n  <p>Violation of the preconditions specified in a function\u2019s <em>Requires:</em>\n  paragraph results in undefined behavior unless the function\u2019s <em>Throws:</em>\n  paragraph specifies throwing an exception when the precondition is\n  violated.</p>\n</blockquote>\n"}, {"owner": {"reputation": 214, "user_id": 3207189, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001177461496/picture?type=large", "display_name": "Defter", "link": "https://stackoverflow.com/users/3207189/defter"}, "is_accepted": false, "score": 3, "last_activity_date": 1429122763, "last_edit_date": 1429122763, "creation_date": 1429113031, "answer_id": 29654949, "question_id": 29654728, "link": "https://stackoverflow.com/questions/29654728/what-does-the-c-standard-say-about-stdvectorint-v1-v2-stddistancev1-be/29654949#29654949", "title": "What does the C++ standard say about std::vector&lt;int&gt; v1,v2; std::distance(v1.begin(),v2.begin())?", "body": "<p>In this case will be undefined behavior. Because <code>last</code> is not reachable from <code>first</code> by (possibly repeatedly) incrementing <code>first</code>.</p>\n"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 5, "last_activity_date": 1429114718, "creation_date": 1429114718, "answer_id": 29655566, "question_id": 29654728, "link": "https://stackoverflow.com/questions/29654728/what-does-the-c-standard-say-about-stdvectorint-v1-v2-stddistancev1-be/29655566#29655566", "title": "What does the C++ standard say about std::vector&lt;int&gt; v1,v2; std::distance(v1.begin(),v2.begin())?", "body": "<p>In some implementations of <code>std::distance</code>, the first iterator is incremented until it reaches the second iterator.  The iterations are counted:  </p>\n\n<pre><code>unsigned int counts = 0;\nwhile (iter1 != iter2)\n{\n  ++counts;\n  ++iter1;\n}\n</code></pre>\n\n<p>If the iterators point to containers in different address spaces, the loop many not terminate.  Using the terms in the standard, the second iterator is not <em>reachable</em>.  </p>\n"}], "owner": {"reputation": 16103, "user_id": 15485, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NoiuG.png?s=128&g=1", "display_name": "Alessandro Jacopson", "link": "https://stackoverflow.com/users/15485/alessandro-jacopson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 0, "accepted_answer_id": 29654925, "answer_count": 4, "score": 27, "last_activity_date": 1429122763, "creation_date": 1429112560, "last_edit_date": 1429122604, "question_id": 29654728, "link": "https://stackoverflow.com/questions/29654728/what-does-the-c-standard-say-about-stdvectorint-v1-v2-stddistancev1-be", "title": "What does the C++ standard say about std::vector&lt;int&gt; v1,v2; std::distance(v1.begin(),v2.begin())?", "body": "<p>I have this code</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nint main(int argc, char* argv[])\n{\n   std::vector&lt;int&gt; v1,v2;\n   std::cout &lt;&lt; std::distance(v1.begin(),v2.begin());\n   return 0;\n}\n</code></pre>\n\n<p>and it has a bug because it is not meaningful to compare the iterators of two different vectors.</p>\n\n<p>I had a look at <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf\">N3376</a> at <em>24.4.4 Iterator operations</em> at page 815:</p>\n\n<blockquote>\n<pre><code>template&lt;class InputIterator&gt;\ntypename iterator_traits&lt;InputIterator&gt;::difference_type\ndistance(InputIterator first, InputIterator last);\n</code></pre>\n  \n  <p><em>Requires</em>: If <code>InputIterator</code> meets the requirements of random access iterator, <code>last</code> shall be reachable from <code>first</code> or <code>first</code> shall be\n  reachable from <code>last</code>; otherwise, <code>last</code> shall be reachable from\n  <code>first</code>.</p>\n</blockquote>\n\n<p>Now I think that <em>Requires</em> is not fulfilled.</p>\n\n<p>What does the standard state should happen in this case?</p>\n"}]