[{"tags": ["c++", "class", "c-strings", "strcpy"], "comments": [{"owner": {"reputation": 3276, "user_id": 746547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iL90.jpg?s=128&g=1", "display_name": "Louen", "link": "https://stackoverflow.com/users/746547/louen"}, "edited": false, "score": 6, "creation_date": 1554940088, "post_id": 55622747, "comment_id": 97938465, "body": "Since you&#39;re in C++, why not use <code>std::string</code> instead of arrays of <code>char</code> ?"}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1554940230, "post_id": 55622747, "comment_id": 97938492, "body": "What parts don&#39;t you understand?  Note: the current code will go horribly wrong if you pass an 80+ character string to libraryBook&#39;s constructor, can you figure out why?"}, {"owner": {"reputation": 13, "user_id": 10282112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a4bf1b4303ad7e57a7d668004b3f04?s=128&d=identicon&r=PG&f=1", "display_name": "juan ", "link": "https://stackoverflow.com/users/10282112/juan"}, "edited": false, "score": 0, "creation_date": 1554940358, "post_id": 55622747, "comment_id": 97938514, "body": "im not supose to change the code :(.The exercise was just about guessing the output."}, {"owner": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "reply_to_user": {"reputation": 3276, "user_id": 746547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iL90.jpg?s=128&g=1", "display_name": "Louen", "link": "https://stackoverflow.com/users/746547/louen"}, "edited": false, "score": 0, "creation_date": 1554940457, "post_id": 55622747, "comment_id": 97938535, "body": "I&#39;m confused; your professor said it should work with <code>&lt;string&gt;</code>, right? So the @Louen would be correct"}, {"owner": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "edited": false, "score": 0, "creation_date": 1554940713, "post_id": 55622747, "comment_id": 97938596, "body": "Yea it doesn&#39;t make much sense to give you the string library but force you to pass a char array."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1554940714, "post_id": 55622747, "comment_id": 97938597, "body": "Methinks you want <code>#include &lt;cstring&gt;</code>, not <code>#include &lt;string&gt;</code> to get <code>strcpy</code>. <code>strcpy</code> is a good ol&#39; C function and all the ol&#39; C stuff is in headers that start with c"}, {"owner": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "edited": false, "score": 1, "creation_date": 1554940767, "post_id": 55622747, "comment_id": 97938607, "body": "If you want to copy a string literal `.copy()&#39; is the function"}, {"owner": {"reputation": 1053, "user_id": 7885081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZvVb.png?s=128&g=1", "display_name": "Jose Fernando Lopez Fernandez", "link": "https://stackoverflow.com/users/7885081/jose-fernando-lopez-fernandez"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1554940799, "post_id": 55622747, "comment_id": 97938611, "body": "Like @user4581301 said, <code>strcpy</code> is <a href=\"https://en.cppreference.com/w/cpp/header/string\" rel=\"nofollow noreferrer\">not in &lt;string&gt;</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1554940822, "post_id": 55622747, "comment_id": 97938614, "body": "Sidenote: <code>libraryBook(char initTitle[]);</code> will be a bit more versatile as <code>libraryBook(const char *initTitle);</code> You&#39;ll be able to eat string literals safely and without errors. In modern Standard C++ <code>libraryBook b1 (&quot;computing&quot;);</code> is flat-out illegal to protect you from accidentally writing to read-only storage."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1554941150, "post_id": 55622747, "comment_id": 97938682, "body": "Dunno about your compiler, but my compiler (and my brain) don&#39;t like the fact that you are passing a string-literal to a method via a non-const-qualified argument:  <code>temp.cpp:29:19: warning: conversion from string literal to &#39;char *&#39; is       deprecated [-Wc++11-compat-deprecated-writable-strings]</code>"}, {"owner": {"reputation": 13, "user_id": 10282112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a4bf1b4303ad7e57a7d668004b3f04?s=128&d=identicon&r=PG&f=1", "display_name": "juan ", "link": "https://stackoverflow.com/users/10282112/juan"}, "edited": false, "score": 0, "creation_date": 1554941218, "post_id": 55622747, "comment_id": 97938695, "body": "ok , got it. I least I&#39;m sure now that it won&#39;t work like that .Now I can ask my teacher again to doble check my answer .(thank you for the comments)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554941563, "post_id": 55622747, "comment_id": 97938777, "body": "No worries. It&#39;s only one letter so I wrote the error off as a typo. It&#39;s astounding how easy it is for the human brain to insert a or miss a character.  A good trick to check yourself when the compiler says you&#39;ve screwed up is to pop <i>man &lt;name of function&gt;</i> into google and see what comes back at you. The man pages usually bring up what header to include pretty early. <a href=\"http://man7.org/linux/man-pages/man3/strcpy.3.html\" rel=\"nofollow noreferrer\">It&#39;s the first line in the synopsis here.</a>. For C++ stuff <a href=\"https://en.cppreference.com/w/cpp/string/byte/strcpy\" rel=\"nofollow noreferrer\">go to cppreference</a>. It&#39;s a pretty reliable reference."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554941669, "post_id": 55622747, "comment_id": 97938795, "body": "If all else fails, <a href=\"https://timsong-cpp.github.io/cppwp/\" rel=\"nofollow noreferrer\">here&#39;s a link to an up-to-date draft of the C++ Standard.</a> The Standard&#39;s the final word on what is and isn&#39;t valid C++, but it&#39;s meant to be read by 20th level multi-class Programmer/Lawyers, so don&#39;t get upset if it looks like it&#39;s written in Martian."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554942843, "post_id": 55623076, "comment_id": 97939006, "body": "Funny how answers tend to pop up at the same time, even hours after the question was asked."}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554943227, "post_id": 55623076, "comment_id": 97939086, "body": "@user4581301 I assure you it was purely coincidence :)"}], "tags": [], "owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "is_accepted": true, "score": 1, "last_activity_date": 1554943202, "last_edit_date": 1554943202, "creation_date": 1554942783, "answer_id": 55623076, "question_id": 55622747, "link": "https://stackoverflow.com/questions/55622747/what-would-be-the-output-of-this-code-it-uses-strcpy-in-a-constructor/55623076#55623076", "title": "what would be the output of this code, it uses strcpy in a constructor?", "body": "<p>In short, \"as is\", the program may or may not compile. You need to include <code>&lt;cstring&gt;</code> if you want the <code>strcpy()</code> function (as pointed out in the comments by @user4581301. </p>\n\n<p>After including <code>&lt;cstring&gt;</code>, the output of the program is nothing since you're printing nothing out. Realistically though, you shouldn't be using character arrays in lieu of <code>std::string</code> in C++. A demo of your code can be found <a href=\"http://www.cppshell.com/542cm\" rel=\"nofollow noreferrer\">here</a>.  </p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1554942793, "last_edit_date": 1592644375, "creation_date": 1554942793, "answer_id": 55623080, "question_id": 55622747, "link": "https://stackoverflow.com/questions/55622747/what-would-be-the-output-of-this-code-it-uses-strcpy-in-a-constructor/55623080#55623080", "title": "what would be the output of this code, it uses strcpy in a constructor?", "body": "<h1>TL;DR</h1>\n<p>Use <code>&lt;cstring&gt;</code> ranther than <code>&lt;string&gt;</code>, but even when the header is corrected, the program has no output.</p>\n<h1>Discussion</h1>\n<blockquote>\n<p>I thought I would need to use #include cstring</p>\n<p>I asked my teacher and he told me that the code is good as it is and that it should work with #include string</p>\n</blockquote>\n<p>You thought right and the teacher is wrong<sup>1</sup>. The <a href=\"https://timsong-cpp.github.io/cppwp/string.syn\" rel=\"nofollow noreferrer\">C++ Standard</a> does not guarantee that <code>strcpy</code> is made available by including <code>&lt;string&gt;</code>.</p>\n<p><sup>1</sup> Sort-of wrong. There are no guarantees that <code>&lt;string&gt;</code> provides <code>strcpy</code> or a header chain that ultimately includes <code>&lt;cstring&gt;</code>, but no one said that it couldn't. Just don't count on it. A file should always include all of the headers it requires<sup>2</sup> to prevent avoidable errors. The teacher may also have been fooled by their brain into seeing a c where there was no c when they told you your code was correct. They may have meant for you to use the old C header <code>&lt;string.h&gt;</code>. It's hard to tell.</p>\n<p><sup>2</sup> Sometimes you'll find a header that you'd expect to contain another header instead <a href=\"https://stackoverflow.com/questions/4757565/what-are-forward-declarations-in-c\">forward declares</a> the parts of the other header that it needs to avoid the compile-time overhead of including the other header.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1554947888, "last_edit_date": 1554947888, "creation_date": 1554943413, "answer_id": 55623140, "question_id": 55622747, "link": "https://stackoverflow.com/questions/55622747/what-would-be-the-output-of-this-code-it-uses-strcpy-in-a-constructor/55623140#55623140", "title": "what would be the output of this code, it uses strcpy in a constructor?", "body": "<p>At least in my opinion, your teacher's idea was clearly better. A halfway reasonable starting point would be something like this:</p>\n\n<pre><code>#include &lt;string&gt;\n\nclass LibraryBook { \n    std::string name;\n    int available;\npublic:\n    LibraryBook(std::string const &amp;name, int available = 1) \n        : name(name)\n        , available(available) \n    {}\n};\n</code></pre>\n\n<p>Then creating a book would look something like this:</p>\n\n<pre><code>LibraryBook book(\"Steal This Code\");\n</code></pre>\n\n<p>Since we haven't included any code to write anything out, this won't produce any output (other than returning a code to indicate successful exit).</p>\n"}], "owner": {"reputation": 13, "user_id": 10282112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a4bf1b4303ad7e57a7d668004b3f04?s=128&d=identicon&r=PG&f=1", "display_name": "juan ", "link": "https://stackoverflow.com/users/10282112/juan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 55623076, "answer_count": 3, "score": 1, "last_activity_date": 1554947888, "creation_date": 1554939771, "last_edit_date": 1554940577, "question_id": 55622747, "link": "https://stackoverflow.com/questions/55622747/what-would-be-the-output-of-this-code-it-uses-strcpy-in-a-constructor", "title": "what would be the output of this code, it uses strcpy in a constructor?", "body": "<p>Hello I have question about some code.\nIs this code supose to work as it is here?</p>\n\n<p>I thought I would need to use #include cstring</p>\n\n<p>I asked my teacher and he told me that the code is good as it is and \nthat it should work with #include string </p>\n\n<p>Is this correct? can someone explain me please  ?thank you.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt; //strcpy() works with string?\nusing namespace std;\n\nclass libraryBook{\n\n  private:\n\n    char title [80]; //cstring\n    int available;\n\n  public:\n\n    libraryBook(char initTitle[]);//cstring as argument\n\n};\n\n\nlibraryBook::libraryBook(char initTitle[]){\n\n  strcpy(title, initTitle); \n  available = 1;\n\n}\n\n\nint main() {\n\n  libraryBook b1 (\"computing\"); //what would be the output without changing the code ?\n\n  return 0 ;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 289, "user_id": 11231203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/939d1b2bae675bce554d7b467bbf5947?s=128&d=identicon&r=PG&f=1", "display_name": "Tetix", "link": "https://stackoverflow.com/users/11231203/tetix"}, "edited": false, "score": 5, "creation_date": 1554939341, "post_id": 55622688, "comment_id": 97938301, "body": "Someone wants to bot in a game :)"}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1554939681, "post_id": 55622688, "comment_id": 97938380, "body": "<a href=\"https://github.com/Brandon-T/CMML/blob/master/src/finder.c#L170\" rel=\"nofollow noreferrer\">github.com/Brandon-T/CMML/blob/master/src/finder.c#L170</a> &amp;&amp; <a href=\"https://github.com/Brandon-T/CMML/blob/master/src/finder.c#L252\" rel=\"nofollow noreferrer\">github.com/Brandon-T/CMML/blob/master/src/finder.c#L252</a> which uses pythagorean theorem to determine if colours are similar or equal in rgb or hsl space.."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1554939681, "post_id": 55622688, "comment_id": 97938381, "body": "Using what graphics library/platform?"}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1554940039, "post_id": 55622688, "comment_id": 97938458, "body": "<a href=\"https://en.wikipedia.org/wiki/Color_difference\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Color_difference</a> since no two colours will be exact on each graphics device/card or through software.. ie: in a game.."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554940520, "post_id": 55622688, "comment_id": 97938548, "body": "When the machines rise up we&#39;ll really regret all of those aim-bots."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11343216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae33f634b6786ca6b7168a917306b02b?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Mendoza", "link": "https://stackoverflow.com/users/11343216/martin-mendoza"}, "edited": false, "score": 0, "creation_date": 1555052594, "post_id": 55622955, "comment_id": 97981679, "body": "Thank you very much for this information. This is exactly what I was looking for, now I can figure it out."}], "tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": false, "score": 2, "last_activity_date": 1554941579, "creation_date": 1554941579, "answer_id": 55622955, "question_id": 55622688, "link": "https://stackoverflow.com/questions/55622688/what-is-the-fastest-way-to-detect-a-certain-color-on-a-specific-pixel-and-send-a/55622955#55622955", "title": "What is the fastest way to detect a certain color on a specific pixel and send a click once detected?", "body": "<p>First you have to know colour theory and how to detect whether two colours are the \"same\" or \"similar\" (different filters will have different outcomes too).. then you'll have to know what image formats you wish to parse into raw RGB pixels.</p>\n\n<p>Finally, you'll compare the colours in the image to the colours you want to find..</p>\n\n<p>First.. Colour similarity is measured with Euclidean distance or \"Pythagorean distance\" given as: </p>\n\n<p><code>distance = squareRoot(of: abs(r1^2 - r2^2) + abs(g1^2 - g2^2) + abs(b1^2 - b2^2))</code></p>\n\n<p>where r1g1b1 is the first colours and r2g2b2 is the second colour in RGB space..\nThen you compare that distance to some tolerance.. IE some threshold that you're okay with as an angle of error..</p>\n\n<p>For example the colour white.. 16777215 as a UInt is the same as 255, 255, 255 in RGB..</p>\n\n<p>Then there is 16777214 as a UInt is the same as 255, 255, 254..</p>\n\n<p>the two colours are white to the eye and extremely similar to the human eye but to the computer they are different! Therefore you use the formula and you compare the distance to some tolerance let's say \"10\".. why? because if the distance is 0, the colours are an exact match. If not, then you know they are not perfect, but they may be similar depending on how much of a threshold you're willing to accept.. That is what the distance represents. Otherwise compare for exact matches by comparing the bytes.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Color_difference\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Color_difference</a></p>\n\n<p>Now, you don't have to do it in RGB space.. you can use HSL and XYZ and CIELAB, etc.. at the end of the day, it will be fairly similar results.</p>\n\n<p>I have written code that does exactly that: <a href=\"https://github.com/Brandon-T/CMML/blob/master/src/finder.c#L252\" rel=\"nofollow noreferrer\">https://github.com/Brandon-T/CMML/blob/master/src/finder.c#L252</a></p>\n\n<p>and <a href=\"https://github.com/Brandon-T/CMML/blob/master/src/finder.c#L30\" rel=\"nofollow noreferrer\">https://github.com/Brandon-T/CMML/blob/master/src/finder.c#L30</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"bitmap.h\"\n#include \"finder.h\"\n\nvoid TestOne(CTSInfo* info)\n{\n    rgb32 colour = {144, 240, 255, 0};\n    PointArray pts;\n    initPointArray(&amp;pts);\n\n    if (findColours(info, &amp;pts, &amp;colour, 0, 0, info-&gt;targetImage-&gt;width, info-&gt;targetImage-&gt;height))\n    {\n        Point *p = pts.p;\n        int I = 0;\n        for (; I &lt; pts.size; ++I, ++p)\n            printf(\"Colour found at: (%d, %d)\\n\", p-&gt;x, p-&gt;y);\n    }\n\n    freePointArray(&amp;pts);\n}\n\nvoid TestTwo(CTSInfo* info, bitmap* bmp_to_find)\n{\n    int x, y;\n\n    if (findImageToleranceIn(info, bmp_to_find, &amp;x, &amp;y, 0, 0, info-&gt;targetImage-&gt;width, info-&gt;targetImage-&gt;height, 0))\n    {\n        printf(\"Image found at: (%d, %d)\\n\", x, y);\n    }\n}\n\nint main()\n{\n    CTSInfo info = {0};\n    bitmap bmp_to_find = {0};\n    bitmap bmp_target = {0};\n\n    defaultCTS(&amp;info);\n    bitmap_from_file(&amp;bmp_to_find, \"C:/Users/Brandon/Desktop/find.bmp\");\n    bitmap_from_file(&amp;bmp_target, \"C:/Users/Brandon/Desktop/target.bmp\");\n    info.targetImage = &amp;bmp_target;\n\n\n\n    TestOne(&amp;info);\n    printf(\"\\n\");\n\n    TestTwo(&amp;info, &amp;bmp_to_find);\n    printf(\"\\n\");\n\n\n    freebmp(&amp;bmp_to_find);\n    freebmp(&amp;bmp_target);\n    return 0;\n}\n</code></pre>\n\n<p>If you are planning on doing this in pure C++ you might have a harder time as you'll either have to learn X11 or WinAPI to get screenshots from windows/games to detect colours within.. The best program I know that does this is located at: <a href=\"https://villavu.com/forum\" rel=\"nofollow noreferrer\">https://villavu.com/forum</a> and it's called \"Simba\". It's written in Pascal and is used to bot Runescape with colours. It's quite successful and I've used it myself.</p>\n\n<p>Someone there wrote a tutorial on CTS (Colour Tolerance Space): <a href=\"https://villavu.com/forum/showthread.php?t=74908\" rel=\"nofollow noreferrer\">https://villavu.com/forum/showthread.php?t=74908</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11343216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae33f634b6786ca6b7168a917306b02b?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Mendoza", "link": "https://stackoverflow.com/users/11343216/martin-mendoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1554941579, "creation_date": 1554939261, "question_id": 55622688, "link": "https://stackoverflow.com/questions/55622688/what-is-the-fastest-way-to-detect-a-certain-color-on-a-specific-pixel-and-send-a", "title": "What is the fastest way to detect a certain color on a specific pixel and send a click once detected?", "body": "<p>Not sure if this code has already been uploaded since I haven't able to find one. I have more experience reading code than writing it so any help is appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1554939531, "post_id": 55622659, "comment_id": 97938356, "body": "Can you start with only returning nickels, and figure a way to calculate if you could instead emit a quarter, or a dime?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1554939791, "post_id": 55622659, "comment_id": 97938410, "body": "Suggestion: Make a function that does nothing but figure out the change from an amount of money provided,  an the cost of the product, and the numbers of coins available. You can test it by itself without the rest of the logic until you are satisfied with the results. This will make you life much easier"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1554940119, "post_id": 55622659, "comment_id": 97938471, "body": "Another suggestion: Work the math out with pencil and paper. Take notes. These notes will become the basis of your design and your design will ultimately become your code."}, {"owner": {"reputation": 1599, "user_id": 1940851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1286f9ab34446e80956701f981340bb5?s=128&d=identicon&r=PG", "display_name": "Kent Kostelac", "link": "https://stackoverflow.com/users/1940851/kent-kostelac"}, "edited": false, "score": 0, "creation_date": 1554943510, "post_id": 55622659, "comment_id": 97939156, "body": "There a lot of variables going on here. Please provide a small verifiable example. Showing input and the desired output."}], "answers": [{"tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 0, "last_activity_date": 1554957154, "creation_date": 1554957154, "answer_id": 55624753, "question_id": 55622659, "link": "https://stackoverflow.com/questions/55622659/returning-coins-from-a-vending-machine/55624753#55624753", "title": "Returning Coins From a Vending Machine", "body": "<p><strong>Algorithm to Make Change</strong></p>\n\n<p>In order to put the logic together, you have to come up with a strategy for selecting coins.  It makes sense to select coins one by one from each of your largest coin type until that type is exhausted and then proceed to the next coin type.</p>\n\n<p>You could do this in a number of ways, but the simplest( and not the most efficient) is to just keep taking quarters until either you run out of quarters or you the change left to be made is less than the value of a quarter and then move down to dimes.</p>\n\n<p>I store all values in cents, but return doubles when printing.  I try to add _cents for any variable or function that deals with cents to avoid confusions.</p>\n\n<p>So, the basic logic is contained in the make_change_cents() function</p>\n\n<pre><code>bool make_change(const uint price_cents,\n                 const uint proffered_cents,\n                 uint &amp;change_cents,\n                 uint machine_quarters,\n                 uint machine_dimes,\n                 uint machine_nickels,\n                 uint machine_pennies,\n                 uint &amp;quarters,\n                 uint &amp;dimes,\n                 uint &amp;nickels,\n                 uint &amp;pennies)\n{\n  quarters = dimes = nickels = pennies = 0;\n  change_cents = proffered_cents - price_cents;\n  uint remaining_to_be_returned = change_cents;\n  while (remaining_to_be_returned &gt;= QUARTER_VALUE &amp;&amp; machine_quarters &gt; 0) {\n    remaining_to_be_returned -= QUARTER_VALUE; // subtract value of 1 quarter\n    quarters++;                     // increment # to be returned\n    machine_quarters--;               // decrement # remaining\n  }\n  while (remaining_to_be_returned &gt;= DIME_VALUE &amp;&amp; machine_dimes &gt; 0) {\n    remaining_to_be_returned -= DIME_VALUE; // subtract value of 1 quarter\n    dimes++;                     // increment # to be returned\n    machine_dimes--;               // decrement # remaining\n  }\n  while (remaining_to_be_returned &gt;= NICKEL_VALUE &amp;&amp; machine_nickels &gt; 0) {\n    remaining_to_be_returned -= NICKEL_VALUE; // subtract value of 1 quarter\n    nickels++;                     // increment # to be returned\n    machine_nickels--;               // decrement # remaining\n  }\n  while (remaining_to_be_returned &gt;= PENNY_VALUE &amp;&amp; PENNY_VALUE &gt; 0) {\n    remaining_to_be_returned -= PENNY_VALUE; // subtract value of 1 quarter\n    pennies++;                     // increment # to be returned\n    machine_pennies--;               // decrement # remaining\n  }\n  if (remaining_to_be_returned &gt; 0) {\n    return false;\n  } else {\n    return true;\n  }\n\n}\n</code></pre>\n\n<p>You said that you were having trouble with the math.  This function provides a simple algorithm to handle the math.  </p>\n\n<p>You said that you already have the rest of the code written.  Even so, I went ahead and wrote up an implementation to make sure that my make_change_cents() function worked.  Here is my version of the rest of the code (let me know if you have any questions and welcome to stack overflow!):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;tuple&gt;\n#include &lt;vector&gt;\n\n/// make_change()\n/// price_cents -- in\n/// proffered_cents -- in\n/// machine_quarters,-- in\n/// machine_dimes, -- in\n/// machine_nickels-- in\n/// machine_pennies-- in\n/// quarters --out\n/// dimes --out\n/// nickels --out\n/// pennies --out\n/// returns false if not able to make change\n/// returns true if able to make change.\nconst uint QUARTER_VALUE{25};\n\nconst uint DIME_VALUE{10};\n\nconst uint NICKEL_VALUE{5};\n\nconst uint PENNY_VALUE{1};\n\nstd::vector&lt;std::tuple&lt;uint, uint, std::string&gt;&gt; tuples\n    {{1, 100, \"Lifesavers\"}, {2, 125, \"Juicy Fruit\"}, {3, 150, \"Big Red\"},\n     {4, 200, \"Lay's\"}, {5, 225, \"Dorito's\"}, {6, 275, \"Cheeto's\"},\n     {7, 300, \"Snickers\"}, {8, 325, \"Reese's\"}, {9, 350, \"Kit-Kat\"},};\n\nbool make_change(const uint price_cents,\n                 const uint proffered_cents,\n                 uint &amp;change_cents,\n                 uint machine_quarters,\n                 uint machine_dimes,\n                 uint machine_nickels,\n                 uint machine_pennies,\n                 uint &amp;quarters,\n                 uint &amp;dimes,\n                 uint &amp;nickels,\n                 uint &amp;pennies)\n{\n  quarters = dimes = nickels = pennies = 0;\n  change_cents = proffered_cents - price_cents;\n  uint remaining_to_be_returned = change_cents;\n  while (remaining_to_be_returned &gt;= QUARTER_VALUE &amp;&amp; machine_quarters &gt; 0) {\n    remaining_to_be_returned -= QUARTER_VALUE; // subtract value of 1 quarter\n    quarters++;                     // increment # to be returned\n    machine_quarters--;               // decrement # remaining\n  }\n  while (remaining_to_be_returned &gt;= DIME_VALUE &amp;&amp; machine_dimes &gt; 0) {\n    remaining_to_be_returned -= DIME_VALUE; // subtract value of 1 quarter\n    dimes++;                     // increment # to be returned\n    machine_dimes--;               // decrement # remaining\n  }\n  while (remaining_to_be_returned &gt;= NICKEL_VALUE &amp;&amp; machine_nickels &gt; 0) {\n    remaining_to_be_returned -= NICKEL_VALUE; // subtract value of 1 quarter\n    nickels++;                     // increment # to be returned\n    machine_nickels--;               // decrement # remaining\n  }\n  while (remaining_to_be_returned &gt;= PENNY_VALUE &amp;&amp; PENNY_VALUE &gt; 0) {\n    remaining_to_be_returned -= PENNY_VALUE; // subtract value of 1 quarter\n    pennies++;                     // increment # to be returned\n    machine_pennies--;               // decrement # remaining\n  }\n  if (remaining_to_be_returned &gt; 0) {\n    return false;\n  } else {\n    return true;\n  }\n\n}\n\nvoid generate_machine_reserves(uint &amp;machine_quarters,\n                               uint &amp;machine_dimes,\n                               uint &amp;machine_nickels,\n                               uint &amp;machine_pennies)\n{\n  /* initialize random seed: */\n  srand(time(NULL));\n  machine_quarters = rand() % 10;  // range is 0 - 9\n  machine_dimes = rand() % 10;\n  machine_nickels = rand() % 10;\n}\n\nvoid display_choices()\n{\n  int i = 1;\n  for (const auto &amp;element: tuples) {\n    std::cout &lt;&lt; \"(\" &lt;&lt; std::get&lt;0&gt;(element) &lt;&lt; \") \" &lt;&lt; std::get&lt;2&gt;(element)\n              &lt;&lt; std::fixed &lt;&lt; \": $\" &lt;&lt; std::setprecision(2)\n              &lt;&lt; ((double) std::get&lt;1&gt;(element) / 100) &lt;&lt; \"\\n\";\n  }\n}\n\nuint get_choice()\n{\n  uint choice = 0;\n  std::string input_line;\n\n  while (choice &lt; 1 || choice &gt; 9) {\n    std::cout &lt;&lt; \"Please provide a choice between 1 and 9:\\n\\n\";\n    std::getline(std::cin, input_line);\n    std::istringstream ss(input_line);\n    ss &gt;&gt; choice;\n  }\n  return choice;\n}\n\n// Return submitted payment amount in cents\nuint get_payment_amount_cents()\n{\n  std::string input_line;\n\n  double parsed_double = -1;\n  uint retval = 0;\n\n  std::cout &lt;&lt; \"Please provide the payment amount you are submitting as\\n\"\n               \"a decimal number in dollars.  This machine cannot return\\n\"\n               \"dollar bills.  This machine only returns change in\\n\"\n               \"quarters, dimes, nickels, and pennies, as long as the\\n\"\n               \"total to be returned does not exceed the amount of change\\n\"\n               \"on hand. \\n\";\n\n  while (parsed_double &lt;= 0) {\n    getline(std::cin, input_line);\n    std::stringstream ss(input_line);\n    ss &gt;&gt; parsed_double;\n    if (parsed_double &lt;= 0) {\n      std::cout\n          &lt;&lt; \"Please try again.  Your amount was not an acceptable number\\n\";\n    }\n  }\n\n  return (uint) (parsed_double * 100);\n}\n\nint main()\n{\n  uint machine_quarters;\n  uint machine_dimes;\n  uint machine_nickels;\n  uint machine_pennies;\n  uint choice = 0;\n\n  uint quarters;\n  uint dimes;\n  uint nickels;\n  uint pennies;\n\n  uint change_cents;\n\n  generate_machine_reserves(machine_quarters,\n                            machine_dimes,\n                            machine_nickels,\n                            machine_pennies);\n\n  display_choices();\n  choice = get_choice();\n\n  change_cents = get_payment_amount_cents();\n\n  std::cout &lt;&lt; \"machine_quarters: \" &lt;&lt; machine_quarters &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"machine_dimes: \" &lt;&lt; machine_dimes &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"machine_nickels: \" &lt;&lt; machine_nickels &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"machine_pennies: \" &lt;&lt; machine_pennies &lt;&lt; std::endl;\n\n  if (make_change(std::get&lt;1&gt;(tuples[choice\n                      - 1]),  // 1-based choices in 0-based vector\n                  change_cents,\n                  change_cents,\n                  machine_quarters,\n                  machine_dimes,\n                  machine_nickels,\n                  machine_pennies,\n                  quarters,\n                  dimes,\n                  nickels,\n                  pennies)) {\n    std::cout &lt;&lt; \"Your Change is: $\" &lt;&lt; std::setprecision(2) &lt;&lt; std::fixed\n              &lt;&lt; (double) change_cents / 100 &lt;&lt;\n\n              std::endl;\n    std::cout &lt;&lt; \"quarters: \" &lt;&lt; quarters &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"dimes: \" &lt;&lt; dimes &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"nickels: \" &lt;&lt; nickels &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"pennies: \" &lt;&lt; pennies &lt;&lt; std::endl;\n\n  } else {\n    std::cout &lt;&lt; \"Sorry, change cannot be given at this time.\\n\";\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11343218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80de2628b2b46588af8e5a3ab0b95be?s=128&d=identicon&r=PG&f=1", "display_name": "countryroad", "link": "https://stackoverflow.com/users/11343218/countryroad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554957154, "creation_date": 1554939036, "question_id": 55622659, "link": "https://stackoverflow.com/questions/55622659/returning-coins-from-a-vending-machine", "title": "Returning Coins From a Vending Machine", "body": "<p>I am trying to make the vending machine output coins for the total amount of change, starting with quarters and going down to nickels when the machine runs out of each coin (it is randomly determined how many of each coin are in the machine initially). I think I have the bodies of everything set up correctly but am unsure of how to execute the math for this problem. Any help is greatly appreciated</p>\n\n<pre><code>machine_quarters = rand() % 10;\n    machine_dimes = rand() % 10;\n    machine_nickels = rand() % 10;\n\n    cout &lt;&lt; machine_quarters &lt;&lt; endl;\n    cout &lt;&lt; machine_nickels &lt;&lt; endl;\n    cout &lt;&lt; machine_dimes &lt;&lt; endl;\n    cout &lt;&lt; \"(1) Lifesavers: $1.00\\n\";\n    cout &lt;&lt; \"(2) Juicy Fruit: $1.25\\n\";\n    cout &lt;&lt; \"(3) Big Red: $1.50\\n\";\n    cout &lt;&lt; \"(4) Lay's: $2.00\\n\";\n    cout &lt;&lt; \"(5) Dorito's: $2.25\\n\";\n    cout &lt;&lt; \"(6) Cheeto's: $2.75\\n\";\n    cout &lt;&lt; \"(7) Snickers: $3.00\\n\";\n    cout &lt;&lt; \"(8) Reese's: $3.25\\n\";\n    cout &lt;&lt; \"(9) Kit-Kat: $3.50\\n\";\n    cout &lt;&lt; \"\\nInput Quarters: \";\n    cin &gt;&gt; quarter_input;\n    cout &lt;&lt; \"Input Dimes: \";\n    cin &gt;&gt; dime_input;\n    cout &lt;&lt; \"Input Nickels: \";\n    cin &gt;&gt; nickel_input;\n\n    quarter_total = quarter_input * quarter;\n    dime_total = dime_input * dime;\n    nickel_total = nickel_input * nickel;\n    money_input = quarter_total + dime_total + nickel_total;\n\n    quarter_change = quarter_input - machine_quarters;\n    dime_change = dime_input - machine_dimes;\n    nickel_change = nickel_input - machine_nickels;\n\n    cout &lt;&lt; \"\\nMake Selection: \";\n    cin &gt;&gt; customerChoice;\n\n        switch (customerChoice)\n        {\n        case 1:\n            total_change = money_input - lifesavers;\n            cout &lt;&lt; \"Your Change is: $\" &lt;&lt; total_change &lt;&lt; endl;\n            if (machine_quarters != 0 &amp;&amp; machine_dimes != 0 &amp;&amp; machine_dimes != 0)\n            {\n\n            }\n            else if (machine_quarters == 0 &amp;&amp; machine_dimes != 0 &amp;&amp; machine_nickels != 0)\n            {\n\n            }\n            else if (machine_quarters != 0 &amp;&amp; machine_dimes == 0 &amp;&amp; machine_nickels != 0)\n            {\n\n            }\n            else if (machine_quarters != 0 &amp;&amp; machine_dimes != 0 &amp;&amp; machine_nickels == 0)\n            {\n\n            }\n            else if (machine_quarters == 0 &amp;&amp; machine_dimes == 0 &amp;&amp; machine_nickels == 0)\n            {\n                cout &lt;&lt; \"Change Cannot Be Given...\\n\" &lt;&lt; \"Amount Returned: $\" &lt;&lt; money_input;\n            }\n            else if (total_change == 0)\n            {\n                break;\n            }\n            break;\n</code></pre>\n\n<p>I'm expecting an output that would say:\nYour Change is: $X.XX\nQuarters returned: X\nNickels returned: X\nDimes returned: X</p>\n"}, {"tags": ["c++", "gcc", "compiler-errors", "compilation", "clang"], "comments": [{"owner": {"reputation": 11, "user_id": 11343102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d0ba9117e72d919e190d9b5ee4e621?s=128&d=identicon&r=PG&f=1", "display_name": "spectral", "link": "https://stackoverflow.com/users/11343102/spectral"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554938338, "post_id": 55622461, "comment_id": 97938070, "body": "This is the entire program."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554938607, "post_id": 55622461, "comment_id": 97938131, "body": "Ok, that&#39;s indeed quite interesting. I assume what troubles you about the clang output is that the ctor/dtor apparently run twice?"}, {"owner": {"reputation": 11, "user_id": 11343102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d0ba9117e72d919e190d9b5ee4e621?s=128&d=identicon&r=PG&f=1", "display_name": "spectral", "link": "https://stackoverflow.com/users/11343102/spectral"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554938922, "post_id": 55622461, "comment_id": 97938192, "body": "Yes, I should have been a bit more clear.  The object is constructed twice then destructed twice which definitely seems invalid to me."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554939409, "post_id": 55622461, "comment_id": 97938321, "body": "Also, disregard my comment from further up concerning UB, I wrote this based on an incorrect understanding of what it is that you are doing here."}], "owner": {"reputation": 11, "user_id": 11343102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d0ba9117e72d919e190d9b5ee4e621?s=128&d=identicon&r=PG&f=1", "display_name": "spectral", "link": "https://stackoverflow.com/users/11343102/spectral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554943539, "creation_date": 1554937404, "last_edit_date": 1554943539, "question_id": 55622461, "link": "https://stackoverflow.com/questions/55622461/thread-local-template-variable-of-struct-inside-anonymous-namespace-fails-to-lin", "title": "thread_local template variable of struct inside anonymous namespace fails to link?", "body": "<p>The following example program uses a thread local template variable, and instantiates it using a type inside an anonymous namespace.  This produces a linker error in <code>gcc</code>.  In <code>clang</code> it actually compiles but does not run correctly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntemplate&lt;typename T&gt;\nstruct container {\n    container()  { printf(\"construct: %p\\n\", this); }\n    ~container() { printf(\"destruct: %p\\n\", this);  }\n};\n\ntemplate&lt;typename T&gt;\nthread_local container&lt;T&gt; storage;\n\nnamespace {\n    struct bar {};\n}\n\nint main() {\n    auto&amp; ref1 = storage&lt;bar&gt;;\n    auto&amp; ref2 = storage&lt;bar&gt;;\n}\n</code></pre>\n\n<p>On gcc this fails with a link error:</p>\n\n<pre><code>a.cpp:6:2: warning: \u2018container&lt;T&gt;::~container() noexcept [with T = {anonymous}::bar]\u2019 used but never defined\n  ~container() { printf(\"destruct: %p\\n\", this);  }\n  ^\n/tmp/ccgh0P15.o: In function `__tls_init':\na.cpp:(.text+0xa9): undefined reference to `container&lt;(anonymous namespace)::bar&gt;::~container()'\n</code></pre>\n\n<p>With clang the program compiles but produces very troubling output:</p>\n\n<pre><code>construct: 0x7fb8d1c003d0\nconstruct: 0x7fb8d1c003d0\ndestruct: 0x7fb8d1c003d0\ndestruct: 0x7fb8d1c003d0\n</code></pre>\n\n<p>Are there some rough edges surrounding thread_local/templated variables that I am running into here?  I am unclear why this would ever produce a link error (the link error disappears if I remove thread_local).  In the case of clang how could a double destroy of an object with static storage duration be anything but a compiler bug?  In clang the issue disappears if I remove the anonymous namespace OR the thread_local specification, OR by removing one of the references in main().</p>\n\n<p>Can anyone shed some light on this, I am mainly just curious if I am misunderstanding something.  Thanks! </p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>clang++ -v\n\nApple LLVM version 10.0.0 (clang-1000.11.45.5)\n\ng++ -v\n\ngcc version 7.3.0 (Ubuntu 7.3.0-27ubuntu1~18.04)\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "arduino"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1554935911, "post_id": 55622219, "comment_id": 97937478, "body": "Tip: Try to avoid using C-style arrays and <code>new[]</code>. Instead use <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> and other Standard Library containers. These make memory management significantly easier and can be passed by reference with information on size intrinsically included."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554936431, "post_id": 55622219, "comment_id": 97937604, "body": "Unrelated: <code>Estado</code> may need extra support functions to take care of <code>char *idText;</code> See the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of Three</a> for more information."}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1554942075, "post_id": 55622263, "comment_id": 97938863, "body": "` estados = std::vector&lt;Estado&gt;;` is not valid."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1554944318, "post_id": 55622263, "comment_id": 97939309, "body": "Given that there\u2019s no copy constructor or assignment operator defined, and the defaults make a shallow copy of a <code>char*</code>, <code>estados.emplace_back(Estado(token));</code> might be better."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1554943292, "last_edit_date": 1554943292, "creation_date": 1554936125, "answer_id": 55622263, "question_id": 55622219, "link": "https://stackoverflow.com/questions/55622219/how-to-fix-error-no-match-for-operator-operand-types-are-estado-and-est/55622263#55622263", "title": "How to fix: error: no match for &#39;operator=&#39; (operand types are &#39;Estado&#39; and &#39;Estado*&#39;)", "body": "<p>You define an array of <code>Estado</code> with this:</p>\n\n<pre><code> estados = new Estado[sizeParameters];\n</code></pre>\n\n<p>Each of those entries has a type of <code>Estado</code>.</p>\n\n<p>Then you go and assign something of type <code>Estado*</code> as returned by <code>new</code>:</p>\n\n<pre><code> estados[i] = new Estado(token);\n</code></pre>\n\n<p>That can't work. Either you need this:</p>\n\n<pre><code> estados = new Estado*[sizeParameters];\n</code></pre>\n\n<p>Where those are pointers instead, or you need this:</p>\n\n<pre><code> std::vector&lt;Estado&gt; estados;\n</code></pre>\n\n<p>And then add to it incrementally:</p>\n\n<pre><code> estados.push_back(Estado(token));\n</code></pre>\n\n<p>The <code>push_back</code> approach is better because you don't need to plan ahead on what size array you need, you can just add as you find new things to add. In practice this is a lot less annoying than demanding the user state up-front how many things they're adding. You can figure that out when they're finished adding.</p>\n"}], "owner": {"reputation": 55, "user_id": 9975624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b6d40e8a37e490589a1d5cb44254ab?s=128&d=identicon&r=PG&f=1", "display_name": "Isra", "link": "https://stackoverflow.com/users/9975624/isra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 55622263, "answer_count": 1, "score": 1, "last_activity_date": 1554943292, "creation_date": 1554935799, "last_edit_date": 1554935885, "question_id": 55622219, "link": "https://stackoverflow.com/questions/55622219/how-to-fix-error-no-match-for-operator-operand-types-are-estado-and-est", "title": "How to fix: error: no match for &#39;operator=&#39; (operand types are &#39;Estado&#39; and &#39;Estado*&#39;)", "body": "<p>I'm trying to make an array of objects dynamically but after try sometimes I can't. The relevant code is the next</p>\n\n<p>The whole code is too long, to paste it all here, so I'll just post the relevant parts.</p>\n\n<p>This is the State.h</p>\n\n<pre><code>#ifndef State_h\n#define State_h\n\n#include \"Arduino.h\"\n\n\nclass State{\n    private: \n        char *idText;\n    public: \n        Estado(String _idText);\n        Estado();\n        void setID();\n        int id;\n};\n#endif\n</code></pre>\n\n<p>This is the State.cpp</p>\n\n<pre><code>#include \"Arduino.h\"\n#include \"Estado.h\"\n\nusing namespace std;\n\nEstado::Estado(String _idText){\n    _idText.toCharArray(idText, _idText.length()+1);\n    setID();\n}\n\nEstado::Estado(){}\n\nvoid Estado::setID(){\n    char* _id = strtok(idText,\":\");\n    id = atoi(_id);\n}\n\n</code></pre>\n\n<p>This is the main.ino</p>\n\n<pre><code>Satate *states;\n\nvoid setup(){\n    int sizeParameters;\n    sizeParameters = //I get the user's size from keyboard and convert to int\n    char parametersChar;\n    parametersChar = //I get the user's string from keyboard and convert to char\n    estados = new Estado[sizeParameters];\n\n    char* token = strtok(parametrosChar, \"-\");\n    int i = 0;\n    while(token != NULL){\n        estados[i] = new Estado(token);// Here I get the error\n        i++;\n        token = strtok(NULL,\"-\");\n    }\n\n    Serial.println(estados[0].id);\n}\n\n</code></pre>\n\n<p>I'm waiting an array of objects</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1554936292, "post_id": 55622211, "comment_id": 97937571, "body": "A must read, <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> from CPPReference.  Note the number of parameters for all overloads.  Voting to close as typo."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1554936346, "post_id": 55622211, "comment_id": 97937580, "body": "Always search the C++ reference of your choice before posting.  Secondly, search the internet.  Thirdly, use a debugger (if your code compiles correctly)."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1554937262, "creation_date": 1554937262, "answer_id": 55622440, "question_id": 55622211, "link": "https://stackoverflow.com/questions/55622211/how-to-use-getline-with-multiple-variables-in-the-same-line/55622440#55622440", "title": "How to use getline() with multiple variables in the same line?", "body": "<p>I highly recommend you use a vector of structures (or classes) rather than multiple, parallel arrays.</p>\n\n<pre><code>struct Mutation_Code_Cost\n{\n    Mutation_Code_Type MutCode;\n    Mutation_Cost_Type MutCost;\n};\n\nstruct Gene\n{\n    Gene_Code_Type geneCode;\n    Mutation_Code_Cost mutation_info[2];\n};\n</code></pre>\n\n<p>You can then overload <code>operator&gt;&gt;</code> to read in the structures from a text stream:  </p>\n\n<pre><code>struct Mutation_Code_Cost\n{\n    Mutation_Code_Type MutCode;\n    Mutation_Cost_Type MutCost;\n    friend std::istream&amp; operator&gt;&gt;(std::istream&amp; input, Mutation_Code_Cost&amp; mcc);\n};\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; input, Mutation_Code_Cost&amp; mcc)\n{\n  input &gt;&gt; mcc.MutCode;\n  input &gt;&gt; mcc.MutCost;\n  return input;\n}\n\nstruct Gene\n{\n    Gene_Code_Type geneCode;\n    Mutation_Code_Cost mutation_info[2];\n    friend std::istream&amp; operator&gt;&gt;(std::istream&amp; input, Gene&amp; g);\n};\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; input, Gene&amp; g)\n{\n    input &gt;&gt; g.geneCode;\n    input &gt;&gt; g.mutation_info[0];\n    input &gt;&gt; g.mutation_info[1];\n    return input;\n}\n</code></pre>\n\n<p>You can the read from the file like so:</p>\n\n<pre><code>std::vector&lt;Gene&gt; database;\nGene g;\nstd::string record;\nwhile (std::getline(input_file, record))\n{\n    std::istringstream record_stream(record);\n    if (record &gt;&gt; g)\n    {\n        database.push_back(g);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11343049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ABoBQtzSclw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfswb8ccWvk_bTmX6N87KBUA53tnQ/mo/photo.jpg?sz=128", "display_name": "user11343049", "link": "https://stackoverflow.com/users/11343049/user11343049"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 55622440, "answer_count": 1, "score": 0, "last_activity_date": 1554937262, "creation_date": 1554935707, "last_edit_date": 1554936203, "question_id": 55622211, "link": "https://stackoverflow.com/questions/55622211/how-to-use-getline-with-multiple-variables-in-the-same-line", "title": "How to use getline() with multiple variables in the same line?", "body": "<p>I'm trying to read each line from a file and store the data in each line. Say the line is \"x y z\". What arguments should the getline function use in order to read and store x, y and z individually?</p>\n\n<pre><code>void readData(Gene *data, int num)\n{\n    int codeNum;\n    int i = 0;\n    int k = num;\n    ifstream inputFile;\n    inputFile.open(\"example.data\");\n\n    inputFile &gt;&gt; codeNum;\n    while(i &lt; k){\n     getline(inputFile, data[i].geneCode, data[i].MutCode[0],\n            data[i].MutCost[0], data[i].MutCode[1],\n            data[i].MutCost[1]);\n\n     i++;\n\n    }\n</code></pre>\n\n<p>This is what I have. Note that all the vars I'm trying to read are strings, and that k is the total number of lines. when trying to compile I get an error saying \"no matching function to call to getline()\" and something about \"candidate function template not viable\". Any idea what I'm doing wrong?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 4406, "user_id": 4911665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4f3ec7f68e33af504b9055abed79b7?s=128&d=identicon&r=PG&f=1", "display_name": "talamaki", "link": "https://stackoverflow.com/users/4911665/talamaki"}, "edited": false, "score": 0, "creation_date": 1554962439, "post_id": 55622188, "comment_id": 97943396, "body": "What&#39;s your os? Did you run NetworkConfigurationManager::updateConfigurations()?"}, {"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "reply_to_user": {"reputation": 4406, "user_id": 4911665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4f3ec7f68e33af504b9055abed79b7?s=128&d=identicon&r=PG&f=1", "display_name": "talamaki", "link": "https://stackoverflow.com/users/4911665/talamaki"}, "edited": false, "score": 0, "creation_date": 1554970929, "post_id": 55622188, "comment_id": 97947407, "body": "I run NetworkConfigurationManager::updateConfigurations(), and application is test it in different operating system like several Linux distros and Android."}], "owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554935627, "creation_date": 1554935627, "question_id": 55622188, "link": "https://stackoverflow.com/questions/55622188/altenatives-for-qnetworkconfigurationmanager", "title": "Altenatives for QNetworkConfigurationManager", "body": "<p>I try to use QNetworkConfigurationManager to list all discovered SSID's by operating system, but but it only finds the ones the device has been connected to in the past. What class from Qt can be use or what third-party cross-platform can replace this class?</p>\n"}, {"tags": ["c++", "typedef"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 4, "creation_date": 1554934894, "post_id": 55622078, "comment_id": 97937196, "body": "<code>struct distance { float value; };</code> and <code>struct angle { float value; };</code>"}, {"owner": {"reputation": 2577, "user_id": 6263317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Imx4J.jpg?s=128&g=1", "display_name": "Jon Deaton", "link": "https://stackoverflow.com/users/6263317/jon-deaton"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1554935009, "post_id": 55622078, "comment_id": 97937236, "body": "Ahh I see. That is potentially a good option. It does add the annoyance of having to call <code>value</code> everywhere. But I like it. Thank you"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1554935191, "post_id": 55622078, "comment_id": 97937300, "body": "You can embellish the structs with <code>operator float() const { return value; }</code> and <code>distance&amp; operator=(float new_value) { value = new_value; return *this; }</code> to make them even less bothersome."}, {"owner": {"reputation": 2577, "user_id": 6263317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Imx4J.jpg?s=128&g=1", "display_name": "Jon Deaton", "link": "https://stackoverflow.com/users/6263317/jon-deaton"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1554935238, "post_id": 55622078, "comment_id": 97937318, "body": "Oh, thats an excellent idea."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1554935351, "post_id": 55622078, "comment_id": 97937343, "body": ":-)  It has pros and cons.  The more implicit &quot;magic&quot; the class does for you behind your back, the easier it is to have something &quot;funny&quot; and unexpected happen (although it makes perfect sense to the compiler)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1554935685, "post_id": 55622078, "comment_id": 97937427, "body": "Look <a href=\"https://www.boost.org/doc/libs/1_37_0/boost/strong_typedef.hpp\" rel=\"nofollow noreferrer\">strong typedef</a>."}], "answers": [{"tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": true, "score": 3, "last_activity_date": 1554935146, "creation_date": 1554935146, "answer_id": 55622133, "question_id": 55622078, "link": "https://stackoverflow.com/questions/55622078/c-ambiguous-constructor-when-using-typedefs/55622133#55622133", "title": "C++ ambiguous constructor when using typedefs", "body": "<p><code>typedef</code> does not create a new type, it just creates an alias for the type with a different name and possibly in a different namespace, similar to <code>using</code>.</p>\n\n<p>As a result both your constructors are effectively <code>float, float</code>.</p>\n\n<p>If you want to create an actual new type, you could create a new struct or class containing that type. The C++ chrono types such as <code>std::chrono::seconds</code> wrapping an integer. Doing so also allows more specific overloads, for example you might have say <code>displacement = velocity * time</code>, although doing so can quickly require many types and operator overloads.</p>\n\n<p>Also be careful when overloading for say <code>float</code> and <code>double</code>, I would certainly never do it such that they have different meanings. Consider what happens to literals like <code>0</code> and <code>1</code>, or implicit conversions of types like <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": false, "score": 0, "last_activity_date": 1554935196, "creation_date": 1554935196, "answer_id": 55622138, "question_id": 55622078, "link": "https://stackoverflow.com/questions/55622078/c-ambiguous-constructor-when-using-typedefs/55622138#55622138", "title": "C++ ambiguous constructor when using typedefs", "body": "<p>Yes, you need different types in order to have overloads.</p>\n\n<p>One solution is not to have an overload by changing the function names.</p>\n\n<p>The other is to create your custom type by creating a <code>class</code> or a <code>struct</code> that wraps the floats.</p>\n\n<p>You can then overload some operators to achieve the desired behavior but in my opinion, is best to change the names of the functions </p>\n"}, {"tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": false, "score": 2, "last_activity_date": 1554936207, "creation_date": 1554936207, "answer_id": 55622275, "question_id": 55622078, "link": "https://stackoverflow.com/questions/55622078/c-ambiguous-constructor-when-using-typedefs/55622275#55622275", "title": "C++ ambiguous constructor when using typedefs", "body": "<p>You can create a very light-weight wrapper around distance and angle, and then use literals!</p>\n\n<pre><code>struct Distance {\n    double value;\n};\nstruct Angle {\n    double value;\n};\n\nclass Velocity {\n   public:\n    Velocity(Distance dx, Distance dy) { /* impl */ }\n    Velocity(Angle theta, Distance magnitude) { /* impl */ }\n};\n</code></pre>\n\n<p>Then, you can wrap values when constructing <code>Velocity</code>:</p>\n\n<pre><code>// Create by distance\nVelocity v1(Distance{5.0}, Distance{10.0}); \n// Create by angle\nVelocity v2(Angle{1.5}, Distance{1.0}); \n</code></pre>\n\n<p>We can also provide user-defined literals so that you can write <code>v1</code> and <code>v2</code> like this:</p>\n\n<pre><code>Velocity v1(5.0_meters, 10.0_meters);\nVelocity v2(60.0_degrees, 10.0_meters);\n</code></pre>\n\n<p>Writing a user-defined literal is pretty simple:</p>\n\n<pre><code>Distance operator \"\"_meters(double value) {\n    return Distance{value}; \n}\nAngle operator \"\"_degrees(double value) {\n    return Angle{value / 180.0 * PI}; \n}\n</code></pre>\n"}], "owner": {"reputation": 2577, "user_id": 6263317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Imx4J.jpg?s=128&g=1", "display_name": "Jon Deaton", "link": "https://stackoverflow.com/users/6263317/jon-deaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 55622133, "answer_count": 3, "score": 1, "last_activity_date": 1554936207, "creation_date": 1554934670, "question_id": 55622078, "link": "https://stackoverflow.com/questions/55622078/c-ambiguous-constructor-when-using-typedefs", "title": "C++ ambiguous constructor when using typedefs", "body": "<p>Are there any elegant solutions to the following problem involving ambiguous types when overloading functions in C++? I want to have two different types: \"distance\" and \"angle\" which semantically mean different things but which may in fact have the same type. When trying to do this in C++ I run up against issues with function overloading:</p>\n\n<pre><code>typedef float distance;\ntypedef float angle;\n\nclass Velocity {\npublic:\n    Velocity(distance dx, distance dy) { /* impl */ }\n    Velocity(angle theta, distance magnitude) { /* impl */ }\n};\n</code></pre>\n\n<p>When I try to compile this, I get \"constructor cannot be redeclared\". However (for some reason I cannot figure out) when I'm doing this in my actual application code base the class compiles but later on I get a \"call to constructor of 'Velocity' is ambiguous\" when I'm doing something like this:</p>\n\n<pre><code>distance dx;\ndistance dy;\nVelocity v(dx, dy);\n</code></pre>\n\n<p>Are there any elegant solutions to this problem? One unsatisfactory solution would be to just change the type of one of these quantities</p>\n\n<pre><code>typedef double distance;\n</code></pre>\n\n<p>but that clearly doesn't scale since there are only a few different floating point types. Another option that I experimented with was using templates</p>\n\n<pre><code>template &lt;typename distance, typename angle&gt;\nclass Velocity {\npublic:\n    Velocity(distance dx, distance dy) : dx(dx), dy(dy) {  }\n    Velocity(angle theta, distance magnitude) { }\n};\n</code></pre>\n\n<p>but then I get \"multiple overloads of 'Velocity' instantiate to the same signature 'void (float, float)'\" if I instantiate them with the same type. Even if this worked it would still be a bit unsatisfactory since I would have to add template arguments to <code>Velocity</code> types in many places.</p>\n"}, {"tags": ["c++", ".net", "winforms", "webbrowser-control"], "comments": [{"owner": {"reputation": 56341, "user_id": 1768303, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Eypxz.jpg?s=128&g=1", "display_name": "noseratio", "link": "https://stackoverflow.com/users/1768303/noseratio"}, "edited": false, "score": 1, "creation_date": 1555099768, "post_id": 55622038, "comment_id": 98006116, "body": "To find all <code>&lt;video</code> tags you might also need to look for <code>&lt;iframe&gt;</code> and <code>&lt;frame&gt;</code> elements and recuse into them."}, {"owner": {"reputation": 708, "user_id": 8684836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2965523e34cae87aa91b7c1b92938083?s=128&d=identicon&r=PG&f=1", "display_name": "Simple", "link": "https://stackoverflow.com/users/8684836/simple"}, "reply_to_user": {"reputation": 56341, "user_id": 1768303, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Eypxz.jpg?s=128&g=1", "display_name": "noseratio", "link": "https://stackoverflow.com/users/1768303/noseratio"}, "edited": false, "score": 0, "creation_date": 1555107560, "post_id": 55622038, "comment_id": 98008604, "body": "@noseratio Thanks I looked in the page source for <code>&lt;iframe&gt;</code> and <code>&lt;frame&gt;</code> but couldn&#39;t find them. I wonder how other browsers like Chrome can find them by inspection however Chrome doesn&#39;t show any of those tags in its page source, only by inspecting each element on Chrome browser I can find <code>&lt;video&gt;</code> tags underneath lots of <code>&lt;div&gt;</code>s etc., I bet the inspection from browsers get them by JavaScript, do I really need to embed JavaScript in my c++ project?"}], "answers": [{"tags": [], "owner": {"reputation": 56341, "user_id": 1768303, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Eypxz.jpg?s=128&g=1", "display_name": "noseratio", "link": "https://stackoverflow.com/users/1768303/noseratio"}, "is_accepted": true, "score": 1, "last_activity_date": 1555108286, "creation_date": 1555108286, "answer_id": 55660193, "question_id": 55622038, "link": "https://stackoverflow.com/questions/55622038/how-to-change-webbrowser-fullscreen-video-mode/55660193#55660193", "title": "How to change WebBrowser fullscreen video mode?", "body": "<blockquote>\n  <p>Then I didn't find any  tag element in the output, only a few websites provide me that. Why? </p>\n</blockquote>\n\n<p>Let me make an educated guess. For some of the pages you're referring to, the DOM is built dynamically and asynchronously. Which means, those <code>&lt;video&gt;</code> tags might simply not be there yet. </p>\n\n<p>So, you might need to have some asynchronous polling logic in place that monitors DOM changes, specifically looking for <code>&lt;video&gt;</code> tags.</p>\n\n<p>It might not be possible to come up with a 100% working solution to cover all cases, but have a look at <a href=\"https://stackoverflow.com/a/20934538/1768303\">my other post</a> which deals with this problem.</p>\n"}], "owner": {"reputation": 708, "user_id": 8684836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2965523e34cae87aa91b7c1b92938083?s=128&d=identicon&r=PG&f=1", "display_name": "Simple", "link": "https://stackoverflow.com/users/8684836/simple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 55660193, "answer_count": 1, "score": 1, "last_activity_date": 1555389223, "creation_date": 1554934464, "last_edit_date": 1555389223, "question_id": 55622038, "link": "https://stackoverflow.com/questions/55622038/how-to-change-webbrowser-fullscreen-video-mode", "title": "How to change WebBrowser fullscreen video mode?", "body": "<p>I have a c++ project with 2 <code>WeBBrowser</code> in a <code>TableLayoutPanel</code> they are set side by side, it's working fine I navigate normal but when I go to specific websites and play a video in fullscreen that sets my whole monitor to fullscreen instead of setting only the <code>WeBBrowser</code> itself, however on other websites that fits perfect in the <code>WeBBrowser</code>. Is there a way to change the way it displays fullscreen? I wanna make it display fullscreen in the <code>WeB\u200bBrowser</code> only. I think it has something to do with <code>Web\u200bBrowser\u200bBase.\u200bActive\u200bXInstance</code> Property or <code>Web\u200bBrowser.\u200bDocument</code> Property. Most examples I find on the internet is for the old VB and not related to the fullscreen property.</p>\n\n<p>Here's a similar question:\n<a href=\"https://stackoverflow.com/questions/19137976/webbrowser-control-video-element-enter-fullscreen\">WebBrowser control video element enter fullscreen</a></p>\n\n<p>In other examples I've seen a method to extract the element by doing:</p>\n\n<pre><code>HtmlElement^  object = webBrowser1-&gt;Document-&gt;GetElementById(\"video\");\n</code></pre>\n\n<p>But I have no idea how to handle that code in order to format that video then set it back to the <code>WeBBrowser</code> with fullscreen mode fixed.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I went further and I could get the <code>&lt;video&gt;</code> element just from a few websites, here's my method:</p>\n\n<pre><code>private: System::Void webBrowser1_DocumentCompleted(System::Object^  sender, System::Windows::Forms::WebBrowserDocumentCompletedEventArgs^  e) {\n        HtmlElementCollection^  videoElements = webBrowser1-&gt;Document-&gt;GetElementsByTagName(\"video\");\n        videoElements[0]-&gt;SetAttribute(\"style\", \"width: 640px; height: 480px;\"); //Not sure if this is a proper way to set an attribute in this element.\n    }\n</code></pre>\n\n<p>The problem is that not every website gives you access to <code>&lt;video&gt;</code> tag elements, so for those websites I did the following code to make sure there were indeed no <code>&lt;video&gt;</code> tag elements in the source:</p>\n\n<pre><code>System::Diagnostics::Debug::Write(webBrowser1-&gt;DocumentText);\n</code></pre>\n\n<p>Then I didn't find any <code>&lt;video&gt;</code> tag element in the output, only a few websites provide me that. Why? How to really get and manipulate properly <code>&lt;video&gt;</code> tag elements in c++?</p>\n"}, {"tags": ["c++", "stl", "set"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 6, "creation_date": 1554934683, "post_id": 55622031, "comment_id": 97937108, "body": "Confused because: both method (1) and method (2) delete the item in question."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1554934956, "post_id": 55622031, "comment_id": 97937217, "body": "Say you do create a new set. How would you move any existing items into it? If you mean literally using move semantics, that would meanh deleting the old items which is what you said you didn&#39;t want to do. If not move semantics, in what sense would it be moving at all?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1554935413, "post_id": 55622031, "comment_id": 97937356, "body": "It would help a lot to understand precisely why you don&#39;t want the original object to be deleted. It makes a huge difference if it&#39;s because, for example, you have references to it stashed somewhere versus if it&#39;s because it&#39;s expensive to construct."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1554935762, "post_id": 55622031, "comment_id": 97937442, "body": "It is not clear what you mean. You could copy the item to another location (like a vector) then delete it from the set. You are still deleting the original value but you have a copy of that value in another container. Is this what you mean?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1554937668, "post_id": 55622031, "comment_id": 97937923, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45030932/extracting-move-only-type-from-stdset\" title=\"extracting move only type from stdset\">stackoverflow.com/questions/45030932/&hellip;</a>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1554943350, "post_id": 55622031, "comment_id": 97939115, "body": "<a href=\"https://tio.run/##zVLBTsMwDL3vK8yQupZtiPNaeuQHdmQIpalTReqSKklhCPrtw0nL1iIEFw6LqjS2n/OeY/OmWVecH6@l4nVbImRSW2eQ7fPZ2WfRjU3RKu6kVqzOjwRuuYMHreF9BrTcW4MlCrCu3GwMCjSoOD6/GtY0aDIC5nBypyFFGImq7DMGdohAE5w5bSDLIJ7GtF0B18r2vJFIBm6/DLrWKNDW580p/jj3p0gE@2neU3ZhH8TXaO3ohkLr@sQeJxCPqNiEuEgG65w8khAxIN4iPcV60i6d0Td70bIEh5Qcf8kPRdJb@0cavd0Kgu1V5rDtr/P04nys0vMFXLcu1Co@QuWh8MVOLX7CVD2m@g2zXq93ani37a1UFo2LRfLNUQ0O1joNB7inSIGVVPHgF9TJWCoHkmJ3KUGuPIYaTwhYLg8r2uS4kxMVMij8WPjfzWEqt/tTNPXS4kniZaoTF6nuP0aKxv3o1e@ZVGHaw9x76d3xEw\" rel=\"nofollow noreferrer\">tio.run/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 1, "creation_date": 1554934973, "post_id": 55622104, "comment_id": 97937220, "body": "Except that you can - you can use extract + std::move to transfer ownership of an element"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 1, "creation_date": 1554934999, "post_id": 55622104, "comment_id": 97937228, "body": "@JorgePerez That doesn&#39;t transfer ownership of an element. That deletes an existing element while creating a new element with the same value as the existing one. (Unless you want to put the old element into the same type of container.)"}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1554935112, "post_id": 55622104, "comment_id": 97937268, "body": "If the existing element doesn&#39;t own any resources, then it doesn&#39;t matter that it gets copied. If it does own resources, then this will transfer ownership of the resources."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 1, "creation_date": 1554935193, "post_id": 55622104, "comment_id": 97937301, "body": "@JorgePerez Copying an element that doesn&#39;t own any resources and destroying the original invalidates all pointers and references to it. So you can&#39;t really say it &quot;doesn&#39;t matter&quot;."}, {"owner": {"reputation": 1482, "user_id": 11082033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16202735251109a2e024fbdd88d5fc23?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/11082033/j-r"}, "edited": false, "score": 0, "creation_date": 1554936526, "post_id": 55622104, "comment_id": 97937629, "body": "This is answer outlines the only sensible option."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 4, "last_activity_date": 1554949716, "last_edit_date": 1554949716, "creation_date": 1554934885, "answer_id": 55622104, "question_id": 55622031, "link": "https://stackoverflow.com/questions/55622031/how-can-i-remove-an-item-from-a-set-in-c-without-deleting-it/55622104#55622104", "title": "How can I remove an item from a set in C++ without deleting it?", "body": "<p>You can't remove an item from a set without deleting it. Sets own their members. If the member is removed from the set, it doesn't exist anymore. If you want to be able to remove something without deleting it, don't add it to a set.</p>\n\n<p>Imagine if you have <code>int x[5]; x[2]=2;</code>. How can you get <code>x[2]</code> out of the array? What would that even mean? You can, of course, construct a new integer with the same value, <code>int j = x[2];</code>. But that's a new object (with the same value) that is not extending the life of the existing object.</p>\n\n<p>Depending on what your outer problem is, there might be a solution. For example, you could add a <code>std::unique_ptr</code> to an object into a set and then you can destroy that <code>std::unique_ptr</code> without destroying the object it points to be constructing a new <code>std::unique_ptr</code> to the same underlying object.</p>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1554935130, "post_id": 55622107, "comment_id": 97937273, "body": "Your <code>remove_from_set</code> returns a new object with the same value as the original value and destroys the original -- exactly what the OP said they didn&#39;t want to do."}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1554935223, "post_id": 55622107, "comment_id": 97937313, "body": "If the original value supports move semantics, it doesn&#39;t matter that the original value gets destroyed. Any resources will be transferred over without being deleted."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1554935264, "post_id": 55622107, "comment_id": 97937326, "body": "As I said in my response to your comment to my answer, that&#39;s just false. It can matter very much, for example if a pointer or reference to it has been stashed somewhere. We don&#39;t know why the OP doesn&#39;t want the original object to be deleted, but they&#39;ve said that&#39;s what they want to avoid."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1554935368, "post_id": 55622107, "comment_id": 97937347, "body": "Your last edit makes your answer dangerously wrong. What if, for example, the string uses a short string optimization and the iterator contains a pointer to a buffer inside the <code>std::string</code> object itself."}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1554935609, "post_id": 55622107, "comment_id": 97937406, "body": "I updated my answer clarifying and differentiating between &quot;move from the set&quot; and &quot;remove without invalidating any existing pointers or references&quot;. Are you satisfied with the changes?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1554935666, "post_id": 55622107, "comment_id": 97937422, "body": "The C++ standard containers create &quot;outer objects&quot; that hold the item for the container (has-a relationship). For example, the item belongs to an array managed by the vector, or the item belongs to a rb-tree node managed by the set. When removing the item from the container, you have to allow the &quot;outer object&quot; to become available to hold a different item. So minimally, a copy out to a different memory location is required to preserve the item. I think the OP wants the container to hold <code>std::reference_wrapper</code>."}], "tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": false, "score": 1, "last_activity_date": 1554935502, "last_edit_date": 1554935502, "creation_date": 1554934928, "answer_id": 55622107, "question_id": 55622031, "link": "https://stackoverflow.com/questions/55622031/how-can-i-remove-an-item-from-a-set-in-c-without-deleting-it/55622107#55622107", "title": "How can I remove an item from a set in C++ without deleting it?", "body": "<h3>Moving an object out of a set</h3>\n\n<p>You can use <code>extract</code> to remove the corresponding node from the set. This gives you a handle to the node. Once you have the handle, you can move the item out of the handle.</p>\n\n<pre><code>template&lt;class T&gt;\nT find_and_remove(std::set&lt;T&gt;&amp; s, T const&amp; elem) {\n    auto iterator = s.find(elem); \n    if(iterator == s.end() {\n        throw std::invalid_argument(\"elem not in set\"); \n    }\n    // Remove element, return node handle\n    auto node_handle = s.extract(iterator);\n    return std::move(node_handle.value());\n}\n</code></pre>\n\n<p>Alternatively, if you already have the iterator to the node, you can write it like this:</p>\n\n<pre><code>template&lt;class T&gt;\nT remove_from_set(std::set&lt;T&gt;&amp; s, std::set&lt;T&gt;::iterator it) {\n    return std::move(s.extract(it).value());\n}\n</code></pre>\n\n<p>Moving the value transfers ownership of any resources owned by the value. For example, if the set contains a string, the contents of the string won't be deleted, and any iterators to the string won't be invalidated. </p>\n\n<p>The caveat of this is that if you had pointers or references to the object from when it was still in the set, these will be invalidated. </p>\n\n<h3>Extracting the object itself without a move and without invalidating any pointers or references to the object</h3>\n\n<p>This is the less common case, but if you had a reference or pointer to the object in the set, you may want to do this. </p>\n\n<p>Again, we can use the <code>extract</code> function:</p>\n\n<pre><code>auto node_handle = s.extract(my_object);\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>auto node_handle = s.extract(my_iterator); \n</code></pre>\n\n<p>You can access the stored object with <code>node_handle.value()</code>, which returns a reference to the object. The object won't be deleted until the <code>node_handle</code> is deleted, and if you need to extend it's lifetime further, you can return the <code>node_handle</code> from a function without the object being deleted. </p>\n"}], "owner": {"reputation": 113, "user_id": 9638891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc88868f286c90de2469296035089136?s=128&d=identicon&r=PG&f=1", "display_name": "skrooms", "link": "https://stackoverflow.com/users/9638891/skrooms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1808, "favorite_count": 0, "accepted_answer_id": 55622104, "answer_count": 2, "score": 3, "last_activity_date": 1554949716, "creation_date": 1554934450, "question_id": 55622031, "link": "https://stackoverflow.com/questions/55622031/how-can-i-remove-an-item-from-a-set-in-c-without-deleting-it", "title": "How can I remove an item from a set in C++ without deleting it?", "body": "<p>Using std::set in C++, the only way I can find to remove an item from a set is to use the erase method. This deletes the item in question, which I don't want to happen. The only way I can think of to remove an item from a set without deleting it would be to create a new set and add all the items of the old set to it iteratively, making sure to not add the item that needs to be removed from the set, then deleting the old set.</p>\n\n<p>Is there a cleaner way to do this?</p>\n"}, {"tags": ["c++", "windows", "qml"], "comments": [{"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 0, "creation_date": 1554969820, "post_id": 55621931, "comment_id": 97946819, "body": "What do you mean by isolate? <a href=\"https://doc.qt.io/qt-5/windows-deployment.html#the-windows-deployment-tool\" rel=\"nofollow noreferrer\">windeployqt</a> has a <code>--dir</code> option which will install everything necessary for the application to the given directory."}, {"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1554977054, "post_id": 55621931, "comment_id": 97951083, "body": "Do you perhaps want to link the executable statically? This means the needed symbols are compiled into the .exe and the folder will not be that large. For this you need to have a statically build version of Qt."}], "owner": {"reputation": 31, "user_id": 10409990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c9e63324fece67bdb1bcd3b294e354?s=128&d=identicon&r=PG&f=1", "display_name": "DarthOrd", "link": "https://stackoverflow.com/users/10409990/darthord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554933811, "creation_date": 1554933811, "question_id": 55621931, "link": "https://stackoverflow.com/questions/55621931/how-can-i-isolate-a-exe-from-its-deployment-package", "title": "How can I isolate a .exe from its deployment package?", "body": "<p>I'm trying to figure out how to isolate the .exe file for the app I'm building from the .dll files because the directory in which all of these files are located is very large.</p>\n\n<p>I've already tried using iexpress.exe to make an installer for the app, but every time I have I get an error saying that it could not install because some of the .dll files were not found.</p>\n\n<p>Would statically linking the libraries fix this problem?</p>\n"}, {"tags": ["c++", "pugixml"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1554933081, "post_id": 55621708, "comment_id": 97936576, "body": "The wrapper should have more code, but after, you can use foo in a generic way."}], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": false, "score": 2, "last_activity_date": 1554934276, "last_edit_date": 1554934276, "creation_date": 1554933306, "answer_id": 55621855, "question_id": 55621708, "link": "https://stackoverflow.com/questions/55621708/how-to-write-a-generic-templated-wrapper-for-type-specific-acess-functions/55621855#55621855", "title": "How to write a generic templated wrapper for type specific acess functions?", "body": "<p>Well, your approach is actually not that bad. I'll probably stick with it.</p>\n\n<p>There is another way, however.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nauto foo(xml_attribute param)\n{\n    if constexpr (std::is_same&lt;T, int&gt;::value) {\n          return param.as_int();\n    }\n    else if constexpr (/*..*/){//...} //and so on\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 186, "user_id": 4257100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62cf6b45aa2daabc840151f312944c6d?s=128&d=identicon&r=PG&f=1", "display_name": "jpsalm", "link": "https://stackoverflow.com/users/4257100/jpsalm"}, "edited": false, "score": 0, "creation_date": 1554992613, "post_id": 55622510, "comment_id": 97960834, "body": "Thanks, this is what I was trying to do but didn&#39;t understand exactly how."}], "tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": true, "score": 1, "last_activity_date": 1554938171, "last_edit_date": 1554938171, "creation_date": 1554937777, "answer_id": 55622510, "question_id": 55621708, "link": "https://stackoverflow.com/questions/55621708/how-to-write-a-generic-templated-wrapper-for-type-specific-acess-functions/55622510#55622510", "title": "How to write a generic templated wrapper for type specific acess functions?", "body": "<p>We can use an extra parameter to create different overloads based on type, and then use overload resolution to find the right function. <code>TypeTag</code> is an empty class we can use to distinguish between different overloads:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct TypeTag{ /* empty */ };\n</code></pre>\n\n<p>Once we have that, we can write <code>read_as</code> functions based on the tag:</p>\n\n<pre><code>int read_as(xml_attribute param, TypeTag&lt;int&gt;) {\n    return param.as_int(); \n}\nbool read_as(xml_attribute param, TypeTag&lt;bool&gt;) {\n    return param.as_bool(); \n}\nfloat read_as(xml_attribute param, TypeTag&lt;float&gt;) {\n    return param.as_float(); \n}\ndouble read_as(xml_attribute param, TypeTag&lt;double&gt;) {\n    return param.as_double();\n}\nconst pugi::char_t* read_as(xml_attribute param, TypeTag&lt;const pugi::char_t*) {\n    return param.as_string(); \n}\n</code></pre>\n\n<p>Making a generic template is now pretty simple:</p>\n\n<pre><code>template&lt;class T&gt;\nT read_as(xml_attribute param) {\n    return read_as(param, TypeTag&lt;T&gt;()); \n}\n</code></pre>\n\n<p>This solution works in C++11, and it will compile faster than a series of <code>if constexpr</code> checks because the compiler can look up the correct version through overload resolution, rather than having to do a series of checks.</p>\n"}], "owner": {"reputation": 186, "user_id": 4257100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62cf6b45aa2daabc840151f312944c6d?s=128&d=identicon&r=PG&f=1", "display_name": "jpsalm", "link": "https://stackoverflow.com/users/4257100/jpsalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55622510, "answer_count": 2, "score": 1, "last_activity_date": 1554938171, "creation_date": 1554932527, "last_edit_date": 1554932980, "question_id": 55621708, "link": "https://stackoverflow.com/questions/55621708/how-to-write-a-generic-templated-wrapper-for-type-specific-acess-functions", "title": "How to write a generic templated wrapper for type specific acess functions?", "body": "<p>I'm trying to write a generic wrapper for the C++ pugi xml library that can save and store values to/from xml.</p>\n\n<p>They have implemented their xml node attributes' (stored as strings) access functions into functions such as <code>attribute.as_int()</code>, <code>attribute.as_bool()</code> etc.</p>\n\n<p>I want to achieve the same functionality seen in the nlohmann::json library where you can call <code>.get&lt;T&gt;()</code> on some json object and get some type.</p>\n\n<p>The only way I can think of (which may not even work) is to use template specialization:</p>\n\n<pre><code>template &lt;&gt;\nint foo&lt;int&gt;(xml_attribute param)\n{\n    return param.as_int();\n}\n\ntemplate &lt;&gt;\nbool foo&lt;bool&gt;(xml_attribute param)\n{\n    return param.as_bool();\n}\n</code></pre>\n\n<p>And so forth.</p>\n\n<p>Which seems to result in almost as much code as writing a non-generic wrapper...</p>\n"}, {"tags": ["c++", "initialization", "opencv3.0"], "comments": [{"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1554932776, "post_id": 55621510, "comment_id": 97936476, "body": "Make a <code>std::array</code> and use the <code>fill</code> method, like this: <code>std::array&lt;cv::Mat, 10&gt; outIM; outIM.fill(cv::Mat(rows, cols, CV_8UC3, cv::Scalar(0,0,0)))</code>."}, {"owner": {"reputation": 307, "user_id": 9684956, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R5K0pI5UV3c/AAAAAAAAAAI/AAAAAAAAAEc/-hAAKfQrXeY/photo.jpg?sz=128", "display_name": "Jai", "link": "https://stackoverflow.com/users/9684956/jai"}, "reply_to_user": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1554934233, "post_id": 55621510, "comment_id": 97936963, "body": "Thanks @Mansoor. Your idea works well in a function, but still it does not work in a class(If I am not wrong). Is there no way to initialize in class. What do you think!"}, {"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1554935009, "post_id": 55621510, "comment_id": 97937237, "body": "I don&#39;t understand what you mean by <b>in a class</b>? If <code>outIM</code> were a member of a class, you could call <code>std::array::fill</code> inside the constructors? Or you could create a static member function which returns the initialized arrays, and use <i>default</i> <i>initializers</i> in your class."}, {"owner": {"reputation": 307, "user_id": 9684956, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R5K0pI5UV3c/AAAAAAAAAAI/AAAAAAAAAEc/-hAAKfQrXeY/photo.jpg?sz=128", "display_name": "Jai", "link": "https://stackoverflow.com/users/9684956/jai"}, "reply_to_user": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1554936007, "post_id": 55621510, "comment_id": 97937501, "body": "Ah ok, I was not familiar with constructor. Let me explore that. Meanwhile If you can convert your comment to answer, I can accept it."}], "answers": [{"tags": [], "owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "is_accepted": true, "score": 0, "last_activity_date": 1555054380, "last_edit_date": 1555054380, "creation_date": 1554972346, "answer_id": 55628277, "question_id": 55621510, "link": "https://stackoverflow.com/questions/55621510/how-to-initialize-array-of-cvmat-with-rows-cols-and-valuein-a-c-class/55628277#55628277", "title": "How to initialize array of cv::Mat with rows, cols and value?(In a c++ Class)", "body": "<p>This is one possible solution:</p>\n\n<pre><code>class Foo\n{\n // Function which returns a zero initialised cv::Mat\n static std:array&lt;cv::Mat,10&gt; MakeInitMatArray() {return {cv::Mat(rows, cols, CV_8UC3, cv::Scalar(0,0,0))};}\n\n // In-class default-initializer\n std:array&lt;cv::Mat,10&gt; outIm = MakeInitMatArray();\n\n // ... rest of Foo class\n};\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 9684956, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R5K0pI5UV3c/AAAAAAAAAAI/AAAAAAAAAEc/-hAAKfQrXeY/photo.jpg?sz=128", "display_name": "Jai", "link": "https://stackoverflow.com/users/9684956/jai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 55628277, "answer_count": 1, "score": 0, "last_activity_date": 1555054380, "creation_date": 1554931393, "question_id": 55621510, "link": "https://stackoverflow.com/questions/55621510/how-to-initialize-array-of-cvmat-with-rows-cols-and-valuein-a-c-class", "title": "How to initialize array of cv::Mat with rows, cols and value?(In a c++ Class)", "body": "<p>How to initialize an array with 10 Mat's?\nI tried: (Its working in function but not in class)</p>\n\n<pre><code>cv::Mat outIm[10];\nfor(int i=0; i&lt;10; i++)\n  outIm[i] = Mat(rows, cols, CV_8UC3, cv::Scalar(0,0,0));\n</code></pre>\n\n<p>Is there something like below legal?</p>\n\n<pre><code>cv::Mat im[10](rows, cols, CV_8UC3);  //not working\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10360528, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212787580430441/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/10360528/brian"}, "edited": false, "score": 0, "creation_date": 1554942834, "post_id": 55621677, "comment_id": 97939004, "body": "Yeah that makes sense! We have not started working with arrays yet and the structure I used is the assignment requirement so I&#39;ll have to stick with what I&#39;ve got but I do see how that would work. I&#39;ve been reading a bunch of other semi-related questions on stack and some other sites and I can&#39;t for the life of me figure out why it&#39;s asking for the input in reverse still. This was still educational tho so thank you! We tackle arrays in 2 weeks."}], "tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": false, "score": 0, "last_activity_date": 1554932362, "creation_date": 1554932362, "answer_id": 55621677, "question_id": 55621441, "link": "https://stackoverflow.com/questions/55621441/function-outputting-the-input-questions-in-reverse-order-and-improving-the-algor/55621677#55621677", "title": "Function outputting the input questions in reverse order and improving the algorithm to account for equal numbers", "body": "<p>Instead of keeping four separate variables, use an array and then use <code>&lt;algorithm&gt;</code> functions to find the minimum and maximum values. Or if you want to sort you can use the <code>sort</code> function.</p>\n\n<pre><code>char *LOCATIONS[] = { \"north\", \"south\", \"east\", \"west\", \"central\" };\n\nconstexpr size_t N = 5;\n\nint main()\n{\n    int a = getNumAccidents(LOCATIONS[0]);\n    int b = getNumAccidents(LOCATIONS[1]);\n    int c = getNumAccidents(LOCATIONS[2]);\n    int d = getNumAccidents(LOCATIONS[3]);\n    int e = getNumAccidents(LOCATIONS[4]);\n\n    std::array&lt;int, N&gt; accidents = { a, b, c, d, e };\n\n    // min is the iterator to the first position in the array that is minimum\n    auto min = std::min_element(accidents.begin(), accidents.end());\n    std::cout &lt;&lt; \"The least no. of accidents was \" &lt;&lt; *min &lt;&lt; \" occuring in the \";\n\n    // calculate the position of that minimum element\n    size_t minPos = std::distance(std::begin(accidents), min);\n    std::cout &lt;&lt; LOCATIONS[minPos] &lt;&lt; \" region.\\n\";\n}\n</code></pre>\n\n<p>If you want to display them in a certain order, use the <a href=\"https://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>std::sort</code></a> function passing in a comparison function indicating the order of the sort (ascending, descending, etc.)</p>\n\n<p>Also, this design could be improved to use a map to associate the name of the location with the number of incidents there.</p>\n"}], "owner": {"reputation": 25, "user_id": 10360528, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212787580430441/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/10360528/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1554932362, "creation_date": 1554930919, "question_id": 55621441, "link": "https://stackoverflow.com/questions/55621441/function-outputting-the-input-questions-in-reverse-order-and-improving-the-algor", "title": "Function outputting the input questions in reverse order and improving the algorithm to account for equal numbers", "body": "<p>When I run the program it asks for the number of accidents in central region first, then works backwards to north. It should ask north, south, east, west, central in that order yet it outputs central -> north. Also as a challenge that was given to me, improving the algorithm to account for same number of accidents in different regions. The assignment allows the user to assume there is a different number of accidents per location, and the challenge is to improve that. The function names and types were dictated by the assignment. It works just fine and will get full credit even working backwards but I want to know why it's doing it for my own knowledge. </p>\n\n<p>For the reverse order output I tried changing the line:\nvoid findLowest(int north, int south, int east, int west, int central) \nto:\nvoid findLowest(int central, int west, int east, int south, int north),\nthinking I could trick it into processing how I want the output but it still went central -> north. For the improved algorithm challenge I started hard coding an else if statement in the findLowest function, continuing the statements with a else if(north == south || north == east...) etc but the amount of lines it would take to calculate everything seems over kill and complicated. I thought then I would put the equal numbered regions into a different variable for each place that was equal but then how would I dictate what the cout statement would be? In Python I think I would have put anything that was equal into a list or tuple and then printed that out by index or something to that effect but I don't know if that's possible in c++, haven't been exposed to anything like that yet. I'm stumped!</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint getNumAccidents(string location) {\n    int numAccidents;\n    cout &lt;&lt; \"How many accidents were reported in the \" &lt;&lt; location &lt;&lt; \" region of the city: \";\n    cin &gt;&gt; numAccidents;\n    while (numAccidents &lt; 0) {\n        cout &lt;&lt; \"The number of reported accidents must be a positive number.\" &lt;&lt; endl &lt;&lt;\n            \"How many accidents were reported in the \" &lt;&lt; location &lt;&lt; \" region of the city: \";\n            cin &gt;&gt; numAccidents;\n    }\n    return numAccidents;\n};\n\nvoid findLowest(int north, int south, int east, int west, int central) {\n    string location;\n    int lowestNumber;\n    if (north &lt; south &amp;&amp; north &lt; east &amp;&amp; north &lt; west &amp;&amp; north &lt; central){\n        location = \"north\";\n        lowestNumber = north;\n    }\n    else if (south &lt; north &amp;&amp; south &lt; east &amp;&amp; south &lt; west &amp;&amp; south &lt; central) {\n        location = \"south\";\n        lowestNumber = south;\n    }\n    else if (east &lt; north &amp;&amp; east &lt; south &amp;&amp; east &lt; west &amp;&amp; east &lt; central) {\n        location = \"east\";\n        lowestNumber = east;\n    }\n    else if (west &lt; north &amp;&amp; west &lt; south &amp;&amp; west &lt; east &amp;&amp; west &lt; central) {\n        location = \"west\";\n        lowestNumber = west;\n    }\n    else if (central &lt; north &amp;&amp; central &lt; south &amp;&amp; central &lt; east &amp;&amp; central &lt; west) {\n        location = \"central\";\n        lowestNumber = central;\n    }\n    cout &lt;&lt; \"\\nThe city's \" &lt;&lt; location &lt;&lt; \" region had the lowest number of reported \" &lt;&lt;\n        \"accidents last year. \\nThat region's reported number of accidents was \" &lt;&lt;\n        lowestNumber &lt;&lt; \".\" &lt;&lt; endl;\n};\n\n\n\nint main()\n{\n    findLowest(getNumAccidents(\"north\"), \n               getNumAccidents(\"south\"), \n               getNumAccidents(\"east\"), \n               getNumAccidents(\"west\"), \n               getNumAccidents(\"central\"));\n\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "queue", "iteration"], "comments": [{"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1554930565, "post_id": 55621338, "comment_id": 97935673, "body": "Use <a href=\"https://en.cppreference.com/w/cpp/iterator/rbegin\" rel=\"nofollow noreferrer\">std::rbegin</a> and <code>std::rend</code>"}, {"owner": {"reputation": 369, "user_id": 10028853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GZN0.jpg?s=128&g=1", "display_name": "Stahp", "link": "https://stackoverflow.com/users/10028853/stahp"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1554930858, "post_id": 55621338, "comment_id": 97935785, "body": "I knew before that rbegin and rend exists and I couldnt understand why people dont use normal begin() and end() but with swapped places in code, but just right know after reading it again from your link I found our that end() and rbegin() point to a diffrent places in memory, thanks man!"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1554930838, "creation_date": 1554930838, "answer_id": 55621422, "question_id": 55621338, "link": "https://stackoverflow.com/questions/55621338/how-to-copy-whole-vector-into-queue-in-reversed-order/55621422#55621422", "title": "How to copy whole vector into queue in reversed order?", "body": "<p><code>std::vector</code> provides the functions <a href=\"https://en.cppreference.com/w/cpp/container/vector/rbegin\" rel=\"nofollow noreferrer\"><code>rbegin</code></a> and <a href=\"https://en.cppreference.com/w/cpp/container/vector/rend\" rel=\"nofollow noreferrer\"><code>rend</code></a> which return reverse iterators that you can use to iterate from the back to the front.  Using those you can use <a href=\"https://en.cppreference.com/w/cpp/algorithm/for_each\" rel=\"nofollow noreferrer\"><code>std::for_each</code></a> to iterate the vector and then use a <a href=\"https://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda</a> as the functor to push each element into the queue.  That would look like</p>\n\n<pre><code>std::vector&lt;int&gt; v = {1, 2, 3};\nstd::queue&lt;int&gt; q;\nstd::for_each(v.rbegin(), v.rend(), [&amp;q](auto el){ q.push(el); });\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 10028853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GZN0.jpg?s=128&g=1", "display_name": "Stahp", "link": "https://stackoverflow.com/users/10028853/stahp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 55621422, "answer_count": 1, "score": 0, "last_activity_date": 1554930974, "creation_date": 1554930434, "last_edit_date": 1554930974, "question_id": 55621338, "link": "https://stackoverflow.com/questions/55621338/how-to-copy-whole-vector-into-queue-in-reversed-order", "title": "How to copy whole vector into queue in reversed order?", "body": "<p>My vector stores the numbers of the vertices of a certain graph in ascending order. I want to add these numbers to a queue in order to run BFS later in code, but I dont know how do that in nice and fast way. I want the solution to be clear for everyone to read and what I came with is in my opinion obscure. \nDisclaimer - I use static casts because i hate seeing warnings when i work with Qt. Here's what did:</p>\n\n<p>Using casual for loop to iterate in reverse order through the vector starting with <code>size-1</code> ending when <code>i</code> equals <code>-1</code>. Because I'm using <code>-1</code> as rule I need to cast everything on <code>int</code> which makes code ugly. </p>\n\n<pre><code>vector&lt;unsigned&gt; v;\nv.pushback(2);\nv.pushback(3);\nv.pushback(5);\n\nqueue&lt;unsigned&gt; q;\n\nfor(int i = static_cast&lt;int&gt;(v.size()-1); i&gt;=0; i--)\n    q.push(v[static_cast&lt;unsigned&gt;(i)];\n</code></pre>\n\n<p>Can someone tell me how pros do it? Cant find anything like \"copy in reverse order\" function that can start from <code>.end()-1</code> element and copy all elements including <code>.begin()</code> one?</p>\n"}, {"tags": ["c++", "list", "function"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1554930321, "post_id": 55621296, "comment_id": 97935580, "body": "What do you mean by <i>&quot;give it a name such as &quot;int[] list&quot; it throws the program off.&quot;</i>? Please provide a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and include all error messages"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 3, "creation_date": 1554930378, "post_id": 55621296, "comment_id": 97935608, "body": "Use <code>std::vector</code>"}, {"owner": {"reputation": 145, "user_id": 10004903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5PUBi.jpg?s=128&g=1", "display_name": "grybouilli", "link": "https://stackoverflow.com/users/10004903/grybouilli"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554930645, "post_id": 55621296, "comment_id": 97935700, "body": "you&#39;re not defining what list is in your program, at least, as far as we can see... as @UnholySheep suggested you should provide us with more code to test"}, {"owner": {"reputation": 1587, "user_id": 2079802, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e557e0909bd12533db6f43b8d6500b65?s=128&d=identicon&r=PG", "display_name": "Collin", "link": "https://stackoverflow.com/users/2079802/collin"}, "edited": false, "score": 3, "creation_date": 1554930681, "post_id": 55621296, "comment_id": 97935710, "body": "I&#39;m not sure what is going on in your code. I think you mean to name your array list? Which might be a problem because you seem to be using namespace std and list is in that namespace"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554931118, "post_id": 55621296, "comment_id": 97935909, "body": "When you say list, it means <code>std::list&lt;int&gt;</code> to me, which is probably not what you mean.  Instead, it sounds like you want to pass an array?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1554941322, "post_id": 55621296, "comment_id": 97938720, "body": "You typed <code>int[] first</code> instead of <code>int[] list</code>."}], "answers": [{"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 1, "last_activity_date": 1554930713, "creation_date": 1554930713, "answer_id": 55621394, "question_id": 55621296, "link": "https://stackoverflow.com/questions/55621296/beginners-c-how-do-i-pass-a-list-as-a-function-parameter/55621394#55621394", "title": "Beginner&#39;s C++: How do I pass a list as a function parameter?", "body": "<p>In C++, arrays are declared with the brackets after the variable name:</p>\n\n<pre><code>int binSearch(int list[], int target, int first, int last)\n</code></pre>\n\n<p>Note that I also changed the first parameter from <code>first</code> to <code>list</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 8108420, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207301228087540/picture?type=large", "display_name": "Aaron Spencer Phalin", "link": "https://stackoverflow.com/users/8108420/aaron-spencer-phalin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554932445, "creation_date": 1554930241, "last_edit_date": 1554930865, "question_id": 55621296, "link": "https://stackoverflow.com/questions/55621296/beginners-c-how-do-i-pass-a-list-as-a-function-parameter", "title": "Beginner&#39;s C++: How do I pass a list as a function parameter?", "body": "<p>I am trying to make a user-generate search function for an entry-level C++ function. The function should take a list and three integers, but it won't recognize the list. I can pass int[] but whenever i give it a name such as \"int[] list\" it throws the program off. </p>\n\n<p>EDIT: Here is the warning I get: expected a ')'. And then it goes over the variable parameters names and says \"first is unidentified\", \"last is unidentified\", and so on. Did a few ninja edits to show more of the code here. Sorry! </p>\n\n<p>I feel like this is very elementary for C++ users, but I don't get it! I do not want to use pointers quite yet in this program. </p>\n\n<pre><code>int binSearch(int[] first, int target, int first, int last) {\n    int middle = (first + last) / 2; \n    cout &lt;&lt; \"Entering binSearch: list[first]=\" + list[first] +\n        \", list[last]=\" + list[last] + \", \"; \n    cout &lt;&lt; \"list[middle]=\" + list[middle];\n}\n\nint main() {\n\n     int list[10]; \n\n    // creating sorted array \n    cout &lt;&lt; \"The list is \"; \n    for (int i = 0; i &lt; 10; i++) {\n        list[i] = 2 * i + 1; \n        cout &lt;&lt; list[i] + \" \"; \n    }\n    cout &lt;&lt; endl; \n\n    // prompt user to enter key \n    int key; \n    cout &lt;&lt; \"Enter a key: \"; \n    cin &gt;&gt; key; \n    int index = binSearch(list, 10, key, 0, 10 - 1); \n} \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1554930316, "post_id": 55621273, "comment_id": 97935576, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 2, "creation_date": 1554930360, "post_id": 55621273, "comment_id": 97935593, "body": "What do you mean by &quot;it doesn&#39;t work&quot;?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1554930372, "post_id": 55621273, "comment_id": 97935605, "body": "Your loop doesn&#39;t make sense. None of the variables involved change their value in the loop, so the loop condition is a constant (always true)."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1554931334, "post_id": 55621273, "comment_id": 97935989, "body": "You need to update <code>now</code> and <code>current_time</code> inside your while loop.  If you had put in some logging you would see that it never changes."}, {"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1554933641, "post_id": 55621273, "comment_id": 97936783, "body": "by &quot;it doesn&#39;t work&quot; I mean that the loop will be infinite"}, {"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1554933808, "post_id": 55621273, "comment_id": 97936835, "body": "Dave i put in the logging and I saw that it never changes and that&#39;s where I get confused but I guess &#39;current_minute&#39; varaiable inside the loop was supposed to change"}, {"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1554934140, "post_id": 55621273, "comment_id": 97936928, "body": "thanks guys for the quick replies btw"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1554938968, "post_id": 55621273, "comment_id": 97938203, "body": "Even if you fixed it to update <code>now</code> and <code>current_time</code> on each iteration, you would have serious issues if you start the program at 10:59:00, and it probably wouldn&#39;t do what you expect if you start it at 10:32:58."}, {"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1554974516, "post_id": 55621273, "comment_id": 97949501, "body": "Daniel I am aware of the things you mentioned, as for when the start program aut 10:59, I am thought about creating some condition that would help me solve that issue."}], "answers": [{"comments": [{"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1554934283, "post_id": 55621545, "comment_id": 97936978, "body": "I ran the code but it exits the loop imediately I dont know why, I never used the &lt;chrono&gt; library, I will dig in a little bit to try to understand it. Thanks"}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 1, "creation_date": 1554939036, "post_id": 55621545, "comment_id": 97938221, "body": "It probably doesn&#39;t appear to work because on most systems, it would only wait until at least 60 nanoseconds have passed.  I would drop the <code>count()</code> and compare the difference to <code>std::chrono::minutes{1}</code>."}], "tags": [], "owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "is_accepted": false, "score": 2, "last_activity_date": 1554974391, "last_edit_date": 1554974391, "creation_date": 1554931600, "answer_id": 55621545, "question_id": 55621273, "link": "https://stackoverflow.com/questions/55621273/execute-stay-in-the-loop-for-a-defined-amount-of-time-e-g-1-minute/55621545#55621545", "title": "Execute / stay in the loop for a defined amount of time e.g 1 minute", "body": "<p>Use <code>#include &lt;chrono&gt;</code></p>\n\n<pre><code>auto t0 = std::chrono::system_clock::now();\nwhile ( (std::chrono::system_clock::now()-t0) &lt; std::chrono::minutes{1})\n{\n    // do stuff\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 690, "user_id": 3972710, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ae8581ca6140db037bea59ada58d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "NGI", "link": "https://stackoverflow.com/users/3972710/ngi"}, "is_accepted": false, "score": 0, "last_activity_date": 1554938417, "creation_date": 1554938417, "answer_id": 55622582, "question_id": 55621273, "link": "https://stackoverflow.com/questions/55621273/execute-stay-in-the-loop-for-a-defined-amount-of-time-e-g-1-minute/55622582#55622582", "title": "Execute / stay in the loop for a defined amount of time e.g 1 minute", "body": "<p>This snippet of code needs C++11 at least and may count somewhat complex C++ objects but here is how I imaginated it </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;future&gt;     //std::async\n#include &lt;atomic&gt;\n#include &lt;chrono&gt;\n#include &lt;sstream&gt;\n\nint main()\n{   \n    int i = 0;\n    std::stringstream sstr;\n    std::atomic&lt;bool&gt; do_it(true);\n\n    //store future so that async returns immediately\n    //see Notes paragraph on https://en.cppreference.com/w/cpp/thread/async\n    auto fut = std::async(std::launch::async, [&amp;do_it]() {\n                                                        std::this_thread::sleep_for(std::chrono::milliseconds(1000));\n                                                        do_it = false;\n                                                    });\n\n    //Preemtion could steal some time here...\n\n    while ( do_it )\n    {\n        sstr &lt;&lt; \"Iteration: \" &lt;&lt; ++i &lt;&lt; \"\\n\";\n        std::this_thread::sleep_for(std::chrono::milliseconds(10));\n    }\n\n    std::cout &lt;&lt; sstr.str() &lt;&lt; \"\\n\" &lt;&lt; std::flush;\n\n    std::cout &lt;&lt; \"Bye\\n\" &lt;&lt; std::flush;\n}\n</code></pre>\n\n<p>The result is ( you can try it on online C++ compiler like <a href=\"http://coliru.stacked-crooked.com/a/7bbca4eef8572559\" rel=\"nofollow noreferrer\">coliru</a>)</p>\n\n<pre><code>Iteration: 1\n...\nIteration: 95\nIteration: 96\nIteration: 97\nIteration: 98\n\nBye\n</code></pre>\n\n<p>Hope it helps</p>\n"}, {"comments": [{"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1554974928, "post_id": 55623013, "comment_id": 97949741, "body": "Thanks Howard, very much apprecite your help. I had a peep on the tutorial link you got me, it is a 1 hour video, I will watch it later and I am excited about this library."}, {"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1555019445, "post_id": 55623013, "comment_id": 97973617, "body": "I ran the code and it worked beautifully, exactly how I wanted to be. Thank you very much"}, {"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1555791383, "post_id": 55623013, "comment_id": 98226849, "body": "Hello Howard, I&#39;ve spent the whole in front of my laptop (yesterday as well) trying to find a way to download a file from dropbox (or any other cloud storage) using c++ with no luck. I posted a question here but noone has yet answered me that completely solved my problem. That is the way I found to contact you. Hope it is not inappropriated, If so I am sorry. if you can help me I would appreciate it. Thank you"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1555807128, "post_id": 55623013, "comment_id": 98229496, "body": "I&#39;m not an expert in this area, however I do have code at this link which uses <code>curl</code> to download a file from a website: <a href=\"https://github.com/HowardHinnant/date/blob/master/src/tz.cpp#L2804-L2865\" rel=\"nofollow noreferrer\">github.com/HowardHinnant/date/blob/master/src/&hellip;</a>  Alternatives to <code>curl</code> include <code>boost::asio</code> and <code>boost::beast</code> (which is a layer on top of <code>boost::asio</code>)."}, {"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1555848530, "post_id": 55623013, "comment_id": 98236031, "body": "from what I could understand you are using the boost library as I consider myself still c++ beginner, I prefer not to start using lis library yet, I want to build a stronger backbone/foundation before going I really appreciate you taking your time to answer me on this Howard"}, {"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1555849807, "post_id": 55623013, "comment_id": 98236296, "body": "I learned how to use the curl the library, but I wish to create a program that downloads from Dropbox (as I have control over what is being downlaoded. I will keep searching Again, thank you"}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 2, "last_activity_date": 1554942229, "creation_date": 1554942229, "answer_id": 55623013, "question_id": 55621273, "link": "https://stackoverflow.com/questions/55621273/execute-stay-in-the-loop-for-a-defined-amount-of-time-e-g-1-minute/55623013#55623013", "title": "Execute / stay in the loop for a defined amount of time e.g 1 minute", "body": "<p>Here is the simplest answer:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n\nint\nmain()\n{\n    using namespace std;\n    using namespace std::chrono;\n    auto finish = system_clock::now() + 1min;\n    do\n    {\n        cout &lt;&lt; \"stuff\\n\";\n    } while (system_clock::now() &lt; finish);\n}\n</code></pre>\n\n<p>This requires C++14 or C++17.  If you're using C++11, substitute <code>minutes{1}</code> for <code>1min</code>.  If you're using C++03, <code>&lt;chrono&gt;</code> is not available, and you'll have to use the C API for timing, which is significantly harder to use.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=P32hvk8b13M\" rel=\"nofollow noreferrer\">Here is a video tutorial on <code>&lt;chrono&gt;</code>.</a></p>\n"}, {"comments": [{"owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "edited": false, "score": 0, "creation_date": 1555019764, "post_id": 55623018, "comment_id": 97973705, "body": "As I never used libraries such as &lt;thread&gt;, &lt;condition_variable&gt; and &lt;atomic&gt; this code is a little overwhelming for me. I will have do a little reseach on these ;ibraries and understand it Thank You"}], "tags": [], "owner": {"reputation": 690, "user_id": 3972710, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ae8581ca6140db037bea59ada58d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "NGI", "link": "https://stackoverflow.com/users/3972710/ngi"}, "is_accepted": false, "score": 0, "last_activity_date": 1554942787, "last_edit_date": 1554942787, "creation_date": 1554942310, "answer_id": 55623018, "question_id": 55621273, "link": "https://stackoverflow.com/questions/55621273/execute-stay-in-the-loop-for-a-defined-amount-of-time-e-g-1-minute/55623018#55623018", "title": "Execute / stay in the loop for a defined amount of time e.g 1 minute", "body": "<p>Another answer could be the use of condition variable in order to cope with the ugly <em>sleep_for(...)</em> often used like in my first answer leading to only 98 iterations instead of 100 because of the time taken by the application/calculations ( here printing some loop number inside a stringstream ).</p>\n\n<p>Condition Variables can target more than 1 thread</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;condition_variable&gt;\n#include &lt;atomic&gt;\n#include &lt;chrono&gt;\n#include &lt;sstream&gt;\n\n//From https://en.cppreference.com/w/cpp/thread/condition_variable/wait_until\n\nint index[2] = { 0 };\nstd::stringstream sstr;\nstd::condition_variable cv;\nstd::mutex cv_m;\nstd::atomic&lt;bool&gt; do_it(true);\n\nstd::mutex mut_print;\n\nvoid foo(char id, int * index)\n{ \n    if ( ! index ) return;\n\n    auto new_tp = std::chrono::system_clock::now();\n\n    while ( do_it )\n    {   \n        {\n            std::lock_guard&lt;std::mutex&gt; lock(mut_print);\n            sstr &lt;&lt; \"Iteration of \"&lt;&lt; id &lt;&lt; \": \" &lt;&lt; ++(*index) &lt;&lt; \"\\n\";\n        }\n\n        new_tp += std::chrono::milliseconds(10);\n\n        while ( do_it )\n        {   \n            std::unique_lock&lt;std::mutex&gt; lk(cv_m);\n            if(std::cv_status::timeout == cv.wait_until(lk,new_tp ) ) {\n                break;\n            }\n        }\n    }\n}\n\nvoid signals()\n{\n    std::this_thread::sleep_for(std::chrono::milliseconds(1000));\n    do_it = false;\n    cv.notify_all();\n}\n\nint main()\n{   \n    std::thread t1(foo,'A',&amp;index[0]),t2(foo,'B',&amp;index[1]),ts(signals);\n\n    t1.join();\n    t2.join();\n    ts.join();\n\n    std::cout &lt;&lt; sstr.str() &lt;&lt; \"\\n\" &lt;&lt; std::flush;\n\n    std::cout &lt;&lt; \"Bye\\n\" &lt;&lt; std::flush;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/38e74289a4b0bcbf\" rel=\"nofollow noreferrer\">coliru</a></p>\n\n<p>Result is</p>\n\n<pre><code>Iteration of A: 1\nIteration of B: 1\nIteration of A: 2\nIteration of B: 2\n...\nIteration of A: 100\nIteration of B: 100\nIteration of A: 101\nIteration of B: 101\n\nBye\n</code></pre>\n\n<p>This time we went a little bit to far with 101 iterations but this example does not pretend to execute a limited/given number of times</p>\n"}], "owner": {"reputation": 202, "user_id": 11337328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0nVvXYem5lY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYXGqAc05DuVAIZ-Nd1HFxZZd6Ww/mo/photo.jpg?sz=128", "display_name": "HBatalha", "link": "https://stackoverflow.com/users/11337328/hbatalha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 1, "accepted_answer_id": 55623013, "answer_count": 4, "score": 2, "last_activity_date": 1554974391, "creation_date": 1554930147, "last_edit_date": 1554930689, "question_id": 55621273, "link": "https://stackoverflow.com/questions/55621273/execute-stay-in-the-loop-for-a-defined-amount-of-time-e-g-1-minute", "title": "Execute / stay in the loop for a defined amount of time e.g 1 minute", "body": "<p>I want to make a c++ program that runs a <code>while</code> loop for a defined amount of time and then exits the loop.\nHaving the loop doing some stuff while running and when the time set is reached it will break out of the loop. For example have the while the loop is running it will keep printing stuff on the screen and when 1 minute has passed it will exit the loop.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n\n\nusing namespace std;\n\nint main()\n{\n\n    time_t now = time(nullptr);\n    tm* current_time = localtime(&amp;now);\n\n    int current_minute = current_time-&gt;tm_min;\n\n    int defined_minute = current_minute + 1;\n\n    while (current_minute &lt; defined_minute)\n    {\n        current_minute = current_time-&gt;tm_min;\n    }\n}\n</code></pre>\n\n<p>I created this code and it was supposed to work but it doesn't, I tried to debug but I still don't understand why it doesn't work.</p>\n\n<p>P.S. this is my first time posting a programming problem online, appreciate if someone tells me how to better put my problems in the future.</p>\n"}, {"tags": ["c++", "gcovr"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1554977872, "post_id": 55620980, "comment_id": 97951574, "body": "This question is really well written, thank you! (1) The lack of gcda files indicates that the corresponding object files were never executed. Is the library linked with your tests (how?), or is the source of the library independently included into the tests?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1554977885, "post_id": 55620980, "comment_id": 97951585, "body": "(2) Gcovr tries various heuristics to guess where the compiler was run which is necessary to resolve the paths to the source files. Ideally, gcovr is invoked from the same directory as the compiler. (a) This is often the build directory, then also adjust the <code>--root</code> directory to point to the project. (b) You can try <code>--object-directory</code> to switch to a different set of heuristics. It could be that the use of Qt is interfering with proper file name resolution. Are the error messages talking about generated file names or the source file names, or both?"}, {"owner": {"reputation": 31, "user_id": 4872144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c7c500ccf3a1843b5c4f4afc240249?s=128&d=identicon&r=PG&f=1", "display_name": "Tiberius", "link": "https://stackoverflow.com/users/4872144/tiberius"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1554996385, "post_id": 55620980, "comment_id": 97963403, "body": "@amon Thanks for the replies. To answer your questions: (1) The library is compiled as a shared library which is loaded at run time by the test driver program. The file <code>x64&#47;release&#47;tests</code> is a small binary that includes classes of the form <code>TestLibraryClassX</code> while <code>x64&#47;release&#47;library.so</code> is the shared library which contains <code>LibraryClassX</code>. To build these, I run make using a toplevel Makefile in <code>project-root</code> which ultimately cd&#39;s into <code>library</code> and <code>tests</code> to call make using the Makefiles in each of those directories."}, {"owner": {"reputation": 31, "user_id": 4872144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c7c500ccf3a1843b5c4f4afc240249?s=128&d=identicon&r=PG&f=1", "display_name": "Tiberius", "link": "https://stackoverflow.com/users/4872144/tiberius"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1554997618, "post_id": 55620980, "comment_id": 97964164, "body": "@amon (2) When I invoke gcovr from project-root (where I call make directly), I do get coverage information for the files specifically in <code>tests&#47;src</code>. I get &quot;Cannot open source file&quot; errors for every file name, both generated and source, everywhere else - including those in <code>tests&#47;src&#47;subdir</code>. (a) Not sure if this is what you meant, but I tried running from within the subdirectories since make was called in each of them. The calls took the form: <code>[user@50f886c6bdeb tests] gcovr --root &#47;code&#47;project-root&#47;</code> Both calls yielded the same result as calling from project-root."}, {"owner": {"reputation": 31, "user_id": 4872144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c7c500ccf3a1843b5c4f4afc240249?s=128&d=identicon&r=PG&f=1", "display_name": "Tiberius", "link": "https://stackoverflow.com/users/4872144/tiberius"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1554997920, "post_id": 55620980, "comment_id": 97964368, "body": "(b) I&#39;m not sure which obj directory would be the correct choice in this situation. It seems that gcovr correctly finds all of the gcno files in both obj directories; however, it is having trouble mapping back to the correct source directories. I can try this if you want though."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1554998541, "post_id": 55620980, "comment_id": 97964737, "body": "The problem is that the gcno files contain a relative path to the source files, but the path is relative to the directory where the compiler (gcc) was invoked. If you have a recursive Makefile style build process, the compiler might be invoked next to the source files and not in the build directory \u2013 and gcovr doesn&#39;t really have good heuristics for that case. This would explain that the subdir doesn&#39;t work. I don&#39;t actually think the <code>--object-directory</code> would help then. But I don&#39;t understand the behaviour 100% either."}, {"owner": {"reputation": 31, "user_id": 4872144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c7c500ccf3a1843b5c4f4afc240249?s=128&d=identicon&r=PG&f=1", "display_name": "Tiberius", "link": "https://stackoverflow.com/users/4872144/tiberius"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1555003923, "post_id": 55620980, "comment_id": 97967471, "body": "@amon Given the update (see <b>Edit #2</b> above), do you think there&#39;s some filter setting that might help?"}], "owner": {"reputation": 31, "user_id": 4872144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c7c500ccf3a1843b5c4f4afc240249?s=128&d=identicon&r=PG&f=1", "display_name": "Tiberius", "link": "https://stackoverflow.com/users/4872144/tiberius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1555014044, "creation_date": 1554928654, "last_edit_date": 1555014044, "question_id": 55620980, "link": "https://stackoverflow.com/questions/55620980/how-to-create-coverage-report-with-gcovr-and-multiple-source-object-directories", "title": "How to create coverage report with gcovr and multiple source/object directories?", "body": "<p>I'm trying to use gcovr 4.1 to generate coverage reports for a shared library project in C++/Qt while running unit tests. I had no problems instrumenting my code but am having trouble <del>getting gcda files for the library and also having trouble</del> getting a complete report for even the unit tests which did yield gcda files.</p>\n\n<p>My project has the following hierarchy after running <code>make</code> in <code>project-root</code> and executing the unit tests by calling <code>x64/release/tests</code>:</p>\n\n<pre><code>project-root/\n\u251c\u2500 Makefile\n\u251c\u2500 build\n|  \u251c\u2500 library/\n|  |  \u251c\u2500 GeneratedFiles/\n|  |  |  \u2514\u2500 &lt;cpp files generated by Qt's moc compiler&gt;\n|  |  \u2514\u2500 obj\n|  |     \u2514\u2500 &lt;*.o, *.gcno, *.gcda&gt; (gcda files show up after Edit #2)\n|  \u2514\u2500 tests/\n|     \u251c\u2500 GeneratedFiles/\n|     |  \u2514\u2500 &lt;cpp files generated by Qt's moc compiler&gt;\n|     \u2514\u2500 obj\n|        \u2514\u2500 &lt;*.o, *.gcno, *.gcda&gt;\n\u251c\u2500 library/\n|  \u251c\u2500 Makefile\n|  \u2514\u2500 src/\n|     \u251c\u2500 subdir/\n|     |  \u2514\u2500 &lt;source files&gt;\n|     \u2514\u2500 &lt;other source files&gt;\n\u251c\u2500 tests/\n|  \u251c\u2500 Makefile\n|  \u2514\u2500 src/\n|     \u251c\u2500 subdir/\n|     |  \u2514\u2500 &lt;source files&gt;\n|     \u2514\u2500 &lt;other source files&gt;  \n\u2514\u2500 x64/  \n   \u2514\u2500 release/\n      \u251c\u2500 tests\n      \u2514\u2500 library.so\n</code></pre>\n\n<p><del>Note that <code>build/library/obj</code> does not contain any gcda files while <code>build/tests/obj</code> does.</del> Altogether, 11 gcda files exist in the latter directory.</p>\n\n<p>I have tried running gcovr from several directories with various filters. Some examples that at least produced some output:</p>\n\n<pre><code>[user@50f886c6bdeb project-root] gcovr\n</code></pre>\n\n<p>Attempting to specify source directories: </p>\n\n<pre><code>[user@50f886c6bdeb project-root] gcovr --filter library/src/ --filter tests/src/\n</code></pre>\n\n<p>Specifying the root with full paths:</p>\n\n<pre><code>[user@50f886c6bdeb project-root] gcovr -r /code/project-root/ --filter /code/project-root/library/src/ --filter /code/project-root/tests/src/\n</code></pre>\n\n<p>Each of these (along with several other variations) produce identical results.</p>\n\n<ul>\n<li>I get a long list of \"Cannot open source file\" messages</li>\n<li>It reports coverage for the files immediately in <code>tests/src</code> but not for those in <code>tests/src/subdir</code> even though I can verify that the gcda files in the subdirectory contain data by examining them with gcov.</li>\n</ul>\n\n<p>The cpp files in <code>build/.../GeneratedFiles</code> are getting instrumented (i.e. have corresponding gcno files); however, I don't really care much whether or not their data is included in the report. I do need to figure out:</p>\n\n<ol>\n<li><del>How do I get the gcda files to generate for the library while executing the unit tests?</del></li>\n<li>What command line do I use to allow gcovr to pair up the results and source for this structure?</li>\n</ol>\n\n<p>I appreciate any help!</p>\n\n<p><strong>Edit #1:</strong> Added locations of Makefiles and clarified on building/running the binary.</p>\n\n<p><strong>Edit #2:</strong><br>\n<strong>Part of the mystery solved.</strong> A typo in my Qt *.pro file prevented -fprofile-arcs from being included in the linker flags for the library.<br>\nI found help through this question: <a href=\"https://stackoverflow.com/questions/3712908/gcov-producing-gcda-output-from-shared-library\">gcov: producing .gcda output from shared library?</a><br>\nwhich led me to this gcc help thread: <a href=\"https://gcc.gnu.org/ml/gcc-help/2010-09/msg00130.html\" rel=\"nofollow noreferrer\">gcov support for shared library</a><br>\nwhich eventually got me to check where the compiler was trying to save gcda files by running: </p>\n\n<pre><code>[user@50f886c6bdeb release]strings library.so | grep gcda\n</code></pre>\n\n<p>There were no entries, so I double checked the build settings for the library and found my mistake. With that fixed, gcda files are produced for the library files, and gcov can create a report with them - including the files in <code>library/src/subdir</code> (contradictory to the behavior for the tests binary).<br>\nHowever, I still see all of the same \"Cannot open source file\" messages. Attempting to build a detailed HTML report fails with an error as a result.</p>\n"}, {"tags": ["c++", "dynamic-linking", "ros2"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9125267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P9aJo.png?s=128&g=1", "display_name": "Hassan", "link": "https://stackoverflow.com/users/9125267/hassan"}, "is_accepted": false, "score": 0, "last_activity_date": 1562724720, "last_edit_date": 1562724720, "creation_date": 1562716398, "answer_id": 56961777, "question_id": 55620906, "link": "https://stackoverflow.com/questions/55620906/undefined-reference-to-qpoases-error-when-using-dynamic-library-qpoases-and-cmak/56961777#56961777", "title": "undefined reference to qpOASES error when using dynamic library qpOASES and CMakeList.txt", "body": "<p>In the Linux makefile <code>make_linux.mk</code> on line 110 there is</p>\n\n<pre><code>CPPFLAGS = -Wall -pedantic -Wshadow -Wfloat-equal -O3 -Wconversion -Wsign-conversion -fPIC -DLINUX -D__USE_LONG_INTEGERS__ -D__USE_LONG_FINTS__\n</code></pre>\n\n<p>Try removing the flags <code>-D__USE_LONG_INTEGERS__ -D__USE_LONG_FINTS__</code></p>\n\n<p>This fixed it for me.</p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 635180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b12b00e4f75ce5d85434cec28de4078?s=128&d=identicon&r=PG", "display_name": "davvid", "link": "https://stackoverflow.com/users/635180/davvid"}, "is_accepted": false, "score": 0, "last_activity_date": 1568160821, "creation_date": 1568160821, "answer_id": 57879550, "question_id": 55620906, "link": "https://stackoverflow.com/questions/55620906/undefined-reference-to-qpoases-error-when-using-dynamic-library-qpoases-and-cmak/57879550#57879550", "title": "undefined reference to qpOASES error when using dynamic library qpOASES and CMakeList.txt", "body": "<p>Alternatively, you could also tweak your cmake build to add these defines.  The core problem is that the headers do not encapsulate this difference in the build settings.  The qpOASES build conveys these through <code>CPPFLAGS</code> and the defines are not exported anywhere that's externally visible.</p>\n\n<p>Alternate solution:</p>\n\n<pre><code>    target_compile_definitions(\n        my_node PRIVATE __USE_LONG_INTEGERS__ __USE_LONG_FINTS__\n    )\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11331606, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-taN6b-hxuqo/AAAAAAAAAAI/AAAAAAAAAA4/5DQMZjkI2G0/photo.jpg?sz=128", "display_name": "Chi Zhang", "link": "https://stackoverflow.com/users/11331606/chi-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1568160821, "creation_date": 1554928278, "last_edit_date": 1554962009, "question_id": 55620906, "link": "https://stackoverflow.com/questions/55620906/undefined-reference-to-qpoases-error-when-using-dynamic-library-qpoases-and-cmak", "title": "undefined reference to qpOASES error when using dynamic library qpOASES and CMakeList.txt", "body": "<p>I am building a package in ROS2. The <code>undefined reference to</code> error occurred when I want to include a dynamic library qpOASES in the header file.</p>\n\n<p>The qpOASES is installed under <code>~</code>. \nI tried <code>find_package(qpOASES REQUIRED)</code>. But I got the error </p>\n\n<pre><code>By not providing \"FindqpOASES.cmake\" in CMAKE_MODULE_PATH this project has asked CMake to find a package configuration file provided by \"qpOASES\", but CMake did not find one.\n</code></pre>\n\n<p>In the header file I use <code>#include &lt;qpOASES.hpp&gt;</code>. In the CMakeList.txt file I use <code>target_link_libraries(my_node Eigen3::Eigen ~/qpOASES-3.2.1/bin/libqpOASES.so)</code>. But when I compile it, The following error showed up.</p>\n\n<pre><code>ltv_mpc_controller.cpp:(.text+0x4a07): undefined reference to `qpOASES::SQProblem::SQProblem(int, int, qpOASES::HessianType, qpOASES::BooleanType)'\nltv_mpc_controller.cpp:(.text+0x4a7b): undefined reference to `qpOASES::QProblem::init(double const*, double const*, double const*, double const*, double const*, double const*, double const*, int&amp;, double*, double const*, double const*, qpOASES::Bounds const*, qpOASES::Constraints const*, double const*)'\nltv_mpc_controller.cpp:(.text+0x4aeb): undefined reference to `qpOASES::SQProblem::hotstart(double const*, double const*, double const*, double const*, double const*, double const*, double const*, int&amp;, double*, qpOASES::Bounds const*, qpOASES::Constraints const*)'\n</code></pre>\n\n<p>Does anybody know how to fix this error?</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 12, "creation_date": 1554927910, "post_id": 55620811, "comment_id": 97934541, "body": "<code>new char[nSize]{};</code> will zero initialize."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 16, "creation_date": 1554927985, "post_id": 55620811, "comment_id": 97934574, "body": "<code>std::vector&lt;char&gt;</code> will be zero initialized."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1554927995, "post_id": 55620811, "comment_id": 97934579, "body": "And be sure you use <code>delete []</code> to deallocate. <code>std::vector</code> would be a better idea."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1554928089, "post_id": 55620811, "comment_id": 97934619, "body": "use <code>std::string</code> or <code>std::vector&lt;char&gt;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1554928106, "post_id": 55620811, "comment_id": 97934628, "body": "You might want  to think about why you need zero initialisation. I can&#39;t remember ever needing it myself."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1554928818, "post_id": 55620811, "comment_id": 97934911, "body": "@Fran&#231;oisAndrieux vector would normally be fine - unless i needed to own it - which i do here. So not a generel solution."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1554929034, "post_id": 55620811, "comment_id": 97935016, "body": "What do you mean by &quot;own it&quot;?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1554929966, "post_id": 55620811, "comment_id": 97935431, "body": "Note, that big allocation <code>calloc</code> is usually optimized by the OS (it has pre-allocated zero pages, and copy-on-write). So it could be much faster than any of the possible replacements."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554937280, "post_id": 55620811, "comment_id": 97937808, "body": "If <code>calloc</code> is indeed what you need, what is stopping you from just using <code>std::calloc</code>?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554979772, "post_id": 55620811, "comment_id": 97952624, "body": "@MichaelKenzel I need to modify heap allocations for finding heap erros (using VirtualAlloc and friends) - and this cannot easily be done with calloc - if possible at all."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1554931132, "last_edit_date": 1554931132, "creation_date": 1554929568, "answer_id": 55621159, "question_id": 55620811, "link": "https://stackoverflow.com/questions/55620811/whats-the-most-suitable-c-replacement-of-calloc/55621159#55621159", "title": "What&#39;s the most suitable c++ replacement of calloc?", "body": "<blockquote>\n  <p>What's the most suitable c++ replacement of calloc?</p>\n</blockquote>\n\n<p>For most purposes, <code>std::vector</code>. Or <code>std::string</code> if you intend to represent a character string. It will automatically delete whatever memory it allocates.</p>\n\n<p>For data structures that contain many arrays that are not mutually contiguous, you might want to avoid the slightly-larger-than-pointer size of <code>std::vector</code>, and instead might opt for unique pointer:</p>\n\n<pre><code>auto ptr = std::make_unique&lt;char[]&gt;(nSize);\n</code></pre>\n\n<p>You can use value initialisation with a new expression as well. This is what <code>std::make_unique</code> does internally:</p>\n\n<pre><code>new char[nSize]();\n</code></pre>\n\n<p>But I would not recommend allocations without a RAII container.</p>\n\n<hr>\n\n<p>As mentioned by <a href=\"https://stackoverflow.com/questions/55620811/whats-the-most-suitable-c-replacement-of-calloc#comment97935431_55620811\">geza</a>, <code>calloc</code> may be optimised (on some systems) such that it may elide setting the memory to zero when allocating a large block. If such optimisation applies to your case, and is measurably significant, then there may be an argument for using <code>std::calloc</code> in C++.</p>\n"}], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 55621159, "answer_count": 1, "score": 2, "last_activity_date": 1554931132, "creation_date": 1554927880, "last_edit_date": 1554927912, "question_id": 55620811, "link": "https://stackoverflow.com/questions/55620811/whats-the-most-suitable-c-replacement-of-calloc", "title": "What&#39;s the most suitable c++ replacement of calloc?", "body": "<p>The title says it.</p>\n\n<p>I have tried:</p>\n\n<pre><code>new char[nSize];\n</code></pre>\n\n<p>but it can return uninitialized memory.\nwhere as <code>calloc</code> ensures a zero-initialization.</p>\n\n<p>I could call memset, etc. - but isn't there a more direct way ?</p>\n"}, {"tags": ["c++", "list", "stl", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11342551, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IvQwuJBOIjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmUIVJqhhULrjvy36kzFCUIQr-wA/mo/photo.jpg?sz=128", "display_name": "CPP warrior", "link": "https://stackoverflow.com/users/11342551/cpp-warrior"}, "edited": false, "score": 0, "creation_date": 1554929603, "post_id": 55621105, "comment_id": 97935264, "body": "This is how the Teaching Assistants told us is the best way. A vector of lists of nodes, though we are allowed to solve it anyway as long as we dont use pointers. How might you do it?"}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "reply_to_user": {"reputation": 1, "user_id": 11342551, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IvQwuJBOIjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmUIVJqhhULrjvy36kzFCUIQr-wA/mo/photo.jpg?sz=128", "display_name": "CPP warrior", "link": "https://stackoverflow.com/users/11342551/cpp-warrior"}, "edited": false, "score": 0, "creation_date": 1554929792, "post_id": 55621105, "comment_id": 97935346, "body": "I honestly don&#39;t know how to best implement skip list and if there&#39;s another mistake in your code that could explain crashes. All I&#39;m saying is that if you want to store iterators, you must make sure that the containers remain alive. See <a href=\"https://stackoverflow.com/questions/6438086/iterator-invalidation-rules\">invalidation rules</a> + general rule that you can only compare iterators from the same object.  You could have a <code>std::list&lt;std::list&lt;Node&gt;&gt;skipList;</code>. Then your iterators should remain valid. But again, not sure if that is truly what&#39;s causing crashes."}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "reply_to_user": {"reputation": 1, "user_id": 11342551, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IvQwuJBOIjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmUIVJqhhULrjvy36kzFCUIQr-wA/mo/photo.jpg?sz=128", "display_name": "CPP warrior", "link": "https://stackoverflow.com/users/11342551/cpp-warrior"}, "edited": false, "score": 0, "creation_date": 1554929849, "post_id": 55621105, "comment_id": 97935373, "body": "@CPPwarrior My advice would be to debug your code, see where the crash happens exactly and if/when any iterators changed or any address of any container changed - that would mean the iterators are not valid."}], "tags": [], "owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "is_accepted": false, "score": 0, "last_activity_date": 1554929259, "creation_date": 1554929259, "answer_id": 55621105, "question_id": 55620685, "link": "https://stackoverflow.com/questions/55620685/iterator-stops-pointing-to-a-value-when-it-is-added-to-a-struct-which-is-added-t/55621105#55621105", "title": "Iterator stops pointing to a value when it is added to a struct which is added to a vector of lists?", "body": "<p><code>vector&lt;list&lt;Node&gt;&gt; skipList;</code> is dangerous. If a new list is added then the vector might relocate all other lists and that invalidates all stored iterators. Even though the lists can be move constructed in a new place, they are still new objects and comparing <code>.end()</code> with a iterator obtained from another object is undefined behaviour.</p>\n\n<p>I think that is what eventually happens in your code.</p>\n\n<p>[Probably not a proper answer, but its too long for a comment and I won't debug author's code to make sure.]</p>\n"}, {"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1554999347, "last_edit_date": 1554999347, "creation_date": 1554935853, "answer_id": 55622226, "question_id": 55620685, "link": "https://stackoverflow.com/questions/55620685/iterator-stops-pointing-to-a-value-when-it-is-added-to-a-struct-which-is-added-t/55622226#55622226", "title": "Iterator stops pointing to a value when it is added to a struct which is added to a vector of lists?", "body": "<p>One obvious error is your <code>Node</code> class implementation.  </p>\n\n<p>If you look at your <code>Node</code> constructor that takes a single <code>int</code>, you failed to initialize the <code>below</code> iterator.  Thus any access in attempting to dereference <code>below</code> will result in undefined behavior occurring, as you're doing in this line:</p>\n\n<pre><code>cout &lt;&lt; (*(skipList[1].front().below)).value;\n</code></pre>\n\n<p>If the skip list is empty, you will see that your code will produce <code>Node</code> objects where <code>below</code> is not initialized.</p>\n\n<p>Here is a stripped down, simple example using more or less the code you posted:</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstruct Node // in header file\n{\n    int value;\n    std::list&lt;Node&gt;::iterator below;\n    Node(int v, std::list&lt;Node&gt;::iterator b) {\n        value = v;\n        below = b;\n    }\n    Node() {}\n    Node(int v) {\n        value = v;\n    }\n};\n\nclass SkipLists\n{\n    private:\n        std::vector&lt;std::list&lt;Node&gt;&gt; skipList;\n    public:\n        void insert(int num);\n        std::list&lt;Node&gt;::iterator insertPlace(int num, std::list&lt;Node&gt;::iterator it, int height);\n        void stack(int num, std::list&lt;Node&gt;::iterator loc);\n};\n\nusing namespace std;\n\nvoid SkipLists::insert(int num) \n{\n    list&lt;Node&gt;::iterator loc;\n    if (skipList.empty()) \n    {\n        list&lt;Node&gt; nodes;\n        nodes.push_back(Node(num));\n        skipList.push_back(nodes);\n    }\n    else \n    {\n        loc = insertPlace(num, skipList[skipList.size() - 1].begin(), skipList.size() - 1);\n        skipList[0].insert(loc, Node(num));\n\n    }\n\n    stack(num, loc);\n\n    //this if statement also segfaults\n    if (skipList.size() &gt; 1) {\n        cout &lt;&lt; (*(skipList[1].front().below)).value;\n    }\n}\n\nlist&lt;Node&gt;::iterator SkipLists::insertPlace(int num, list&lt;Node&gt;::iterator it, int height) \n{\n    if (height == 0) {\n        while (it != skipList[0].end() &amp;&amp; skipList[0].size() &gt; 0 &amp;&amp; num &gt; (*it).value) \n        {\n            it++;\n        }\n        return it;\n    }\n    while (it != skipList[height].end() &amp;&amp; skipList[height].size() &gt; 0 &amp;&amp; num &gt; (*it).value) \n    {\n        cout &lt;&lt; \"he\\n\";\n        it++;\n        cout &lt;&lt; \"lo\\n\";\n    }\n    return insertPlace(num, (*it).below, --height);\n}\n\nvoid SkipLists::stack(int num, list&lt;Node&gt;::iterator loc) {\n    int flip = rand() % 2;\n    int count = 1;\n    list&lt;Node&gt;::iterator prev = loc;\n    list&lt;Node&gt;::iterator it;\n    while (flip == 1) {\n        count++;\n        flip = rand() % 2;\n\n        if (skipList.size() &lt; count) {\n            list&lt;Node&gt; nodes;\n            nodes.push_back(Node(num, prev));\n            skipList.push_back(nodes);\n            prev = skipList[skipList.size() - 1].begin();\n        }\n        else {\n            it = skipList[count - 1].begin();\n            while (it != skipList[count - 1].end() &amp;&amp; num &gt; (*it).value) {\n                it++;\n            }\n            prev = skipList[count - 1].insert(it, Node(num, prev));\n        }\n    }\n}\n\n// Test    \nint main()\n{\n    SkipLists s;\n    s.insert(4);\n}\n</code></pre>\n\n<p>You will see that <code>below</code> is not initialized on the line you are saying your application crashes on when running this very small sample.</p>\n\n<p>You also have the same issue with the <code>Node</code> default constructor where both the <code>value</code> and <code>below</code> members are not initialized.  When you create an object, all the members should be in some sort of valid state, or \"null\" in some way.  For iterators, it is harder to do this since there isn't a \"null\" iterator, unless you can set the iterator to an existing list's <code>end()</code> iterator.</p>\n\n<p>Basically you need to design your class so that you are sure that the iterator is pointing somewhere valid, or some other means of indicating that the iterator should not be dereferenced.  </p>\n"}], "owner": {"reputation": 1, "user_id": 11342551, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IvQwuJBOIjM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmUIVJqhhULrjvy36kzFCUIQr-wA/mo/photo.jpg?sz=128", "display_name": "CPP warrior", "link": "https://stackoverflow.com/users/11342551/cpp-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1554999347, "creation_date": 1554927388, "last_edit_date": 1554928922, "question_id": 55620685, "link": "https://stackoverflow.com/questions/55620685/iterator-stops-pointing-to-a-value-when-it-is-added-to-a-struct-which-is-added-t", "title": "Iterator stops pointing to a value when it is added to a struct which is added to a vector of lists?", "body": "<p>The premise of the project I am doing is to make skip lists with iterators and not pointers. I have created a vector of lists of nodes. And in the node struct, it contains an iterator which is supposed to be the iterator of the list below it while preserving position. The problem is when I create a new node, set its below iterator to the list below's iterator, and later try to access it by de referencing it, it seg faults. I think this is because the iterator is not initialized and it cant be dereferenced as it does not appear to be a bounds issue. </p>\n\n<pre><code>\nstruct Node // in header file\n{\n  int value;\n  list&lt;Node&gt;::iterator below;\n   Node(int v, list&lt;Node&gt;::iterator b){\n        value = v;\n        below = b;\n   }\n   Node(){} \n   Node(int v){\n        value = v;\n   }\n\n\n};\n\n</code></pre>\n\n<pre><code>\nvector&lt;list&lt;Node&gt;&gt; skipList; //this is the skipList initialized in the header\n\n</code></pre>\n\n<p>//insert called to add numbers to skiplist</p>\n\n<pre><code>void SkipLists::insert(int num){\n    list&lt;Node&gt;::iterator loc;\n    if(skipList.empty()){\n        list&lt;Node&gt; nodes;\n        nodes.push_back(Node(num));\n        skipList.push_back(nodes);\n    }else{\n        loc = insertPlace(num, skipList[skipList.size()-1].begin(), skipList.size() -1);\n        skipList[0].insert(loc, Node(num));\n\n    }\n    cout &lt;&lt; \"1.  \" &lt;&lt; *this &lt;&lt; \"\\n\\n\\n\";\n    stack(num, loc);\n\n    //this if statement also segfaults\n    if(skipList.size() &gt; 1){\n        cout &lt;&lt; (*(skipList[1].front().below)).value;\n    }\n\n}\n\n</code></pre>\n\n<p>//in insertPlace function it segfaults on the while loop's only if a recursive call is made. Meaning the previous value added to the skiplist had height to it. It segfaults when dereferencing it. I tested this by moving it out of the while loop. </p>\n\n<pre><code>list&lt;Node&gt;::iterator SkipLists::insertPlace(int num, list&lt;Node&gt;::iterator it, int height){\n    if(height == 0){\n        while(it != skipList[0].end() &amp;&amp; skipList[0].size() &gt; 0 &amp;&amp; num &gt; (*it).value){            // problem: likely not returning a good (*it).below or never setting it properly. \n            it++;\n        }\n        return it;\n    }\n    while(it != skipList[height].end() &amp;&amp; skipList[height].size() &gt; 0 &amp;&amp; num &gt; (*it).value){\n        cout &lt;&lt; \"he\\n\";\n        it++;\n        cout &lt;&lt; \"lo\\n\";\n    }\n    return insertPlace(num, (*it).below, --height);\n}\n\n</code></pre>\n\n<p>stack is used to add vertical elements in the skip list based on probability. This is where the nodes are given a \"below\" iterator.</p>\n\n<pre><code>\nvoid SkipLists::stack(int num, list&lt;Node&gt;::iterator loc){\n    int flip = rand() % 2;\n    int count = 1;\n    list&lt;Node&gt;::iterator prev = loc;\n    list&lt;Node&gt;::iterator it;\n    while(flip == 1){\n        count++;\n        flip = rand() % 2;\n\n        if(skipList.size() &lt; count){\n            list&lt;Node&gt; nodes;\n            nodes.push_back(Node(num, prev));\n            skipList.push_back(nodes);\n            prev = skipList[skipList.size()-1].begin();\n        }else{\n            it = skipList[count-1].begin();\n            while(it != skipList[count -1].end() &amp;&amp; num &gt; (*it).value){\n                it++;\n            }\n            prev = skipList[count -1].insert(it,Node(num, prev));\n\n        }\n    }\n}\n\n</code></pre>\n"}, {"tags": ["c++", "unique-ptr", "state-machine"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1554925787, "post_id": 55620213, "comment_id": 97933622, "body": "officially its undefined behaviour but as you don&#39;t access any members after deleting it will probably work on most platforms"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1554925992, "post_id": 55620213, "comment_id": 97933703, "body": "<code>this</code> dangles after the call to <code>sm.set_state</code>, which by itself is not UB. But referencing anything inside the class while <code>this</code> dangles will be UB. In any case looks like bad design."}, {"owner": {"reputation": 151, "user_id": 2253073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BdlDQ.jpg?s=128&g=1", "display_name": "Kostiantyn Ponomarenko", "link": "https://stackoverflow.com/users/2253073/kostiantyn-ponomarenko"}, "edited": false, "score": 0, "creation_date": 1554926656, "post_id": 55620213, "comment_id": 97933980, "body": "I would really appreciate if you could explain more about bad design here, and maybe suggest a way(s) to improve. I added my intention to the bottom of the question."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1554927605, "post_id": 55620213, "comment_id": 97934411, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3150942/is-delete-this-allowed\">Is delete this allowed?</a>"}, {"owner": {"reputation": 151, "user_id": 2253073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BdlDQ.jpg?s=128&g=1", "display_name": "Kostiantyn Ponomarenko", "link": "https://stackoverflow.com/users/2253073/kostiantyn-ponomarenko"}, "edited": false, "score": 0, "creation_date": 1554928299, "post_id": 55620213, "comment_id": 97934704, "body": "I don&#39;t think it is a duplicate and I&#39;ve added why I think so to this question."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 1, "creation_date": 1554930182, "post_id": 55620213, "comment_id": 97935526, "body": "You could make set_state() return the previous state. The caller can then decides its own lifetime."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 1, "creation_date": 1554930415, "post_id": 55620213, "comment_id": 97935621, "body": "<i>&quot;I  don&#39;t think it is a duplicate &quot;</i>. I don&#39;t see a difference between explicit delete this, or deletion through unique_ptr. Some of the answers in <a href=\"https://stackoverflow.com/questions/3150942/is-delete-this-allowed\">is delete this allowed</a> talk about that too"}], "answers": [{"tags": [], "owner": {"reputation": 145, "user_id": 10004903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5PUBi.jpg?s=128&g=1", "display_name": "grybouilli", "link": "https://stackoverflow.com/users/10004903/grybouilli"}, "is_accepted": false, "score": 0, "last_activity_date": 1554930162, "creation_date": 1554930162, "answer_id": 55621275, "question_id": 55620213, "link": "https://stackoverflow.com/questions/55620213/unique-ptr-state-object-lifetime-in-state-machine-when-pushing-new-state-in-ente/55621275#55621275", "title": "unique_ptr state object lifetime in state machine when pushing new state in enter method", "body": "<p>You could try adding a intermediary step:</p>\n\n<p>In the <code>enter()</code> methods, instead of directly pushing a new state to your state machine (which deletes the current state that is actually calling for your machine to change state), you could tell the machine what kind of state you want to push. This would make a sort of pending push waiting to be delt with.</p>\n\n<p>To do so, you could have an enum and a map associating each member of the enum with the actual state. Then you could deal with the pending push looking at what state you want to push directly in the state machine.</p>\n\n<p>But to do so, it involves comming back to the machine again, so the states can't do all the work on their own.</p>\n\n<p>It would look about something like that:</p>\n\n<pre><code>enum States\n{\n    State_A,\n    //...\n};\n\nclass StateMachine : public IStateMachine {\npublic:\n    StateMachine () {\n        fabric[State_A] = [] () { return std::unique_ptr&lt;IState&gt;(new StateA()); }\n       // ....\n    }\n\n    void push(States state) { \n        pendingState_ = std::move(state); \n    }\n\n    void update()\n    {\n        auto found = fabric_.find(pendingState_);\n        assert(found != fabric_.end());\n        state_ = found-&gt;second();\n        state_-&gt;enter(*this);\n    }\n\n   // ... same as before ...\nprivate:\n    States                  pendingState_;\n    std::map&lt;States, std::function&lt;std::unique_ptr&lt;IState&gt;()&gt; &gt; fabric_;\n};\n</code></pre>\n\n<p>now in the enter methods, it would be :</p>\n\n<pre><code>sm.push(/*a state*/);\n</code></pre>\n\n<p>and in the main, you make it roll in a loop. So that means you also need to implement a way to check when the job is done, e.g. you could make a member of the enum <code>None</code> and check if the state of the machine is none or not. </p>\n"}], "owner": {"reputation": 151, "user_id": 2253073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BdlDQ.jpg?s=128&g=1", "display_name": "Kostiantyn Ponomarenko", "link": "https://stackoverflow.com/users/2253073/kostiantyn-ponomarenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554930162, "creation_date": 1554925431, "last_edit_date": 1554928153, "question_id": 55620213, "link": "https://stackoverflow.com/questions/55620213/unique-ptr-state-object-lifetime-in-state-machine-when-pushing-new-state-in-ente", "title": "unique_ptr state object lifetime in state machine when pushing new state in enter method", "body": "<p>I am creating a state machine few states of which are switching the machine into a new (next) state in <code>enter()</code> method. The states are a <code>unique_ptr</code> objects which are created as needed and given to the machine. </p>\n\n<p>As some states switch to the next state in <code>enter()</code> method (thus, while being used) I am concerned about possible problems here - when the current state calls <code>set_state()</code> the state machine assigns a new state to its <code>state</code> member thus losing the only pointer to the state from which this call was made.</p>\n\n<p>Below is an example of my concern - the only <code>unique_ptr</code> for obj A and B is set to point to C while recursively calling this action from A and then B. Is this reliable? Will it cause any problems?</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nclass IState;\nclass IStateMachine {\npublic:\n    virtual ~IStateMachine() = default;\n    virtual void set_state(std::unique_ptr&lt;IState&gt; new_state) = 0;\n};\n\nclass IState {\npublic:\n    virtual ~IState() = default;\n    virtual void enter(IStateMachine&amp;) = 0;\n};\n\nclass StateC : public IState {\npublic:\n    void enter(IStateMachine&amp;) override {\n        std::cout &lt;&lt;  __func__ &lt;&lt; \": StateC - start\" &lt;&lt; std::endl;\n        std::cout &lt;&lt;  __func__ &lt;&lt; \": StateC - end\" &lt;&lt; std::endl;\n    }\n};\n\nclass StateB : public IState {\npublic:\n    void enter(IStateMachine&amp; sm) override {\n        std::cout &lt;&lt;  __func__ &lt;&lt; \": StateB - start\" &lt;&lt; std::endl;\n        sm.set_state(std::make_unique&lt;StateC&gt;());\n        std::cout &lt;&lt;  __func__ &lt;&lt; \": StateB - end\" &lt;&lt; std::endl;\n    }\n};\n\nclass StateA : public IState {\npublic:\n    void enter(IStateMachine&amp; sm) override {\n        std::cout &lt;&lt;  __func__ &lt;&lt; \": StateA - start\" &lt;&lt; std::endl;\n        sm.set_state(std::make_unique&lt;StateB&gt;());\n        std::cout &lt;&lt;  __func__ &lt;&lt; \": StateA - end\" &lt;&lt; std::endl;\n    }\n};\n\nclass StateMachine : public IStateMachine {\npublic:\n    void start() {\n        set_state(std::make_unique&lt;StateA&gt;());\n    }\n\n    void set_state(std::unique_ptr&lt;IState&gt; new_state) {\n        state_ = std::move(new_state);\n        state_-&gt;enter(*this);\n    }\n\n    std::unique_ptr&lt;IState&gt; state_;\n};\n\nint main()\n{\n    StateMachine sm;\n    sm.start();\n}\n\n</code></pre>\n\n<p>The output from the code:</p>\n\n<pre><code>enter: StateA - start\nenter: StateB - start\nenter: StateC - start\nenter: StateC - end\nenter: StateB - end\nenter: StateA - end\n</code></pre>\n\n<p><strong>Edit 1:</strong></p>\n\n<p>The main idea behind is that the states are created as needed and automatically destroyed after they are not needed anymore.\nThe restriction is that a state may do some work in its <code>enter()</code> method and then in the end of that method switch the state machine to the next state.</p>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>I am not deleting the object explicitly. My question is more about lifetime of the object pointed to by a <code>unique_ptr</code> in case when a new object assigned to this one <code>unique_ptr</code> from the object`s own method (recursively) (see example code).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1554925728, "post_id": 55620149, "comment_id": 97933596, "body": "You are very close to having a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> here. I suggest re-ordering the code samples and finishing it off."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1554934487, "post_id": 55620149, "comment_id": 97937039, "body": "A binary tree should have some sort of ordering in it.  When you insert you aren&#39;t doing any sorting based on the value passed in."}, {"owner": {"reputation": 1, "user_id": 5485856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea3e64976b3ce190eb1353ca119716c?s=128&d=identicon&r=PG&f=1", "display_name": "Saladenicoise", "link": "https://stackoverflow.com/users/5485856/saladenicoise"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1554937396, "post_id": 55620149, "comment_id": 97937849, "body": "@1201ProgramAlarm But wouldn&#39;t that create a BST? I want a regular binary tree, one that is top-down left to right insert."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1554942848, "post_id": 55620149, "comment_id": 97939008, "body": "How do you expect to locate anything in the tree of you don&#39;t impose some sort of order on it?"}, {"owner": {"reputation": 1, "user_id": 5485856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea3e64976b3ce190eb1353ca119716c?s=128&d=identicon&r=PG&f=1", "display_name": "Saladenicoise", "link": "https://stackoverflow.com/users/5485856/saladenicoise"}, "edited": false, "score": 0, "creation_date": 1554998545, "post_id": 55620149, "comment_id": 97964740, "body": "Well, each node has a value in it, so I would just transverse the tree until I find the node with the value"}], "answers": [{"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1555423753, "creation_date": 1555423753, "answer_id": 55710204, "question_id": 55620149, "link": "https://stackoverflow.com/questions/55620149/inserting-nodes-in-a-binary-tree-recursively/55710204#55710204", "title": "Inserting nodes in a Binary Tree recursively?", "body": "<blockquote>\n  <p>... but the code is only doing the root node and it's left and right\n  children. I am trying to figure out how to get past that point.</p>\n</blockquote>\n\n<p>I find no error in your treenode::insert, your problem might be in some other code you do not show.  For example, you did not provide \"height(root)\" or \"Printed Tree\" info. I could not diagnose them.</p>\n\n<p>I have provided some alternatives for various ideas. see \"dump()\" and \"height()\" and \"size()\".  </p>\n\n<p>Note: \"dump()\" is none of pre, in-, or post- order, because the sorted input creates unbalance tree displays (they are worst-case-unbalanced).  I found this display the easiest to review.</p>\n\n<p>Perhaps the following will help you diagnose your mistakes.   Good luck.</p>\n\n<p>Note the use of \"if(false) cout &lt;&lt; ...\".  These are diagnostic output which might provide some insights by enabling them, and / or adding such items to your code. </p>\n\n<p>Did you try your debugger yet?</p>\n\n<hr>\n\n<pre><code>#include &lt;chrono&gt; //    short form names----vvvvvvv\ntypedef std::chrono::high_resolution_clock  HRClk_t; // std-chrono-hi-res-clk\ntypedef HRClk_t::time_point                 Time_t;  // std-chrono-hi-res-clk-time-point\ntypedef std::chrono::nanoseconds            NS_t;    // std-chrono-nanoseconds\nusing  namespace std::chrono_literals;   // suffixes like 100ms, 2s, 30us\nusing  std::chrono::duration_cast;\n\n#include &lt;iostream&gt;\nusing std::cout, std::endl, std::flush;\n\n#include &lt;iomanip&gt;\nusing std::setw;\n\n\nnamespace DTB\n{\n\nclass treenode\n{\n  friend class T920_t;\n\n  int value;               //The value of the node\n\n  treenode *left, *right;   //Pointers to the left and right children\n\n  //Constructor with values;\n  treenode(int val=0, treenode *l = nullptr, treenode *r = nullptr)\n     : value(val), left(l), right(r) { ctor('A'); };\n\n\n  void ctor(char kar) {\n     if (left) left-&gt;ctor(kar);\n     {\n        if(false) // diagnostic\n           cout &lt;&lt; \"\\n  ctor: \" &lt;&lt; \"   \" &lt;&lt; kar\n                &lt;&lt; \"  val: \" &lt;&lt; setw(3) &lt;&lt; value &lt;&lt; flush;\n     }\n     if(right) right-&gt;ctor(kar);\n  }\n\n  void insert ( treenode*&amp; node, int val)\n     {\n        if(node == nullptr)\n        {\n           node = new treenode(val);\n           if (false) node-&gt;dump(); // diagnostic\n           return;\n        }\n        else\n        {\n           if(node-&gt;left == nullptr)\n           {\n              insert(node-&gt;left, val);\n              if (false) node-&gt;dump(); // diagnostic\n           }\n           else\n           {\n              insert(node-&gt;right, val);\n              if (false) node-&gt;dump(); // diaagnostic\n           }\n        }\n     }\n\n  int height(int lvl = 1)\n      {\n         static int maxHeight = 0;\n         if (left)  left-&gt;height (lvl+1);\n         if(right) right-&gt;height (lvl+1);\n         if (lvl &gt; maxHeight) maxHeight = lvl;\n         return maxHeight;\n      }\n\n  int size()\n     {\n        int count = 1; // this element\n        if (left) { count +=  left-&gt;size(); };\n        if(right) { count += right-&gt;size(); }\n        return count;\n     }\n\n\n  void dump(int lvl=0)\n     {\n        if (left)  left-&gt;dump (lvl+1);\n        if(right) right-&gt;dump (lvl+1);\n        {\n           cout &lt;&lt; \"\\n  \" // &lt;&lt; lvl\n                &lt;&lt; setw(3*lvl) &lt;&lt; ' '\n                &lt;&lt; value &lt;&lt; flush;\n        }\n     }\n\n}; // class treenode\ntypedef treenode Node_t; // shorter name for user-defined-type\n\n\n\nclass T920_t\n{\npublic:\n   int operator()(int argc, char* argv[]) { return exec(argc, argv); }\n\nprivate:\n\n   int exec(int , char** )\n      {\n         int retVal = 0;\n         Time_t start_ns = HRClk_t::now();\n\n         Node_t* root = new Node_t();  // 1st node\n         for(int v = 1; v &lt; 21; ++v) { // 20 more\n            root-&gt;insert(root, v);\n         }\n\n         cout &lt;&lt; \"\\n\\n  size : \" &lt;&lt; root-&gt;size()  // element count\n              &lt;&lt; \" maxHeight : \" &lt;&lt; root-&gt;height()\n              &lt;&lt; endl;\n\n         dumpAll(root);\n\n         for(int v = 1; v &lt; 11; ++v) { // 10 more\n            root-&gt;insert(root, v);\n         }\n\n         cout &lt;&lt; \"\\n\\n  size : \" &lt;&lt; root-&gt;size()  // element count\n              &lt;&lt; \" maxHeight : \" &lt;&lt; root-&gt;height()\n              &lt;&lt; endl;\n\n         dumpAll(root);\n\n\n         auto  duration_ns = duration_cast&lt;NS_t&gt;(HRClk_t::now() - start_ns).count();\n\n         cout &lt;&lt; \"\\n\\n\\n  T920_t::exec() duration   \"\n              &lt;&lt; duration_ns &lt;&lt; \" ns  \"\n              &lt;&lt; \"    cpluplus vers : \" &lt;&lt;  __cplusplus  &lt;&lt; std::endl;\n\n         return retVal;\n      }\n\n   void dumpAll (Node_t*&amp; node)\n      {\n         cout &lt;&lt; \"\\n  dumpAll(): \";\n         node-&gt;dump();\n         cout &lt;&lt; endl;\n      }\n\n}; // class T920_t\n} // namespace DTB\n\nint main(int argc, char* argv[]) { return DTB::T920_t()(argc, argv); }\n</code></pre>\n\n<hr>\n\n<p>A partial output is:</p>\n\n<pre><code>  size : 21 maxHeight : 11\n\n  dumpAll(): \n     1\n        3\n           5\n              7\n                 9\n                    11\n                       13\n                          15\n                             17\n                                19\n                                20\n                             18\n                          16\n                       14\n                    12\n                 10\n              8\n           6\n        4\n     2\n   0\n\n\n  size : 31 maxHeight : 16\n\n  dumpAll(): \n     1\n        3\n   ...\n\n                 10\n              8\n           6\n        4\n     2\n   0\n\n\n  T920_t::exec() duration   271095 ns      cpluplus vers : 201703\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5485856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea3e64976b3ce190eb1353ca119716c?s=128&d=identicon&r=PG&f=1", "display_name": "Saladenicoise", "link": "https://stackoverflow.com/users/5485856/saladenicoise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1555423753, "creation_date": 1554925184, "question_id": 55620149, "link": "https://stackoverflow.com/questions/55620149/inserting-nodes-in-a-binary-tree-recursively", "title": "Inserting nodes in a Binary Tree recursively?", "body": "<p>I am trying to insert nodes in a binary tree recursively, but the code is only doing the root node and it's left and right children. I am trying to figure out how to get past that point.</p>\n\n<p>I have already tried different implementations, using queues, doing level order insert. I believe the problem is due to the fact that in my main function I only call with root, and if that is the problem, how would I go about calling with the left and right childs.</p>\n\n<p>Main Function:</p>\n\n<pre><code>int main() {\n    treenode* root = new treenode();\n    for(int a = 1; a &lt; 15; a++) {\n            insert(root, a);\n    }\n    cout &lt;&lt; \"Height: \" &lt;&lt; height(root) &lt;&lt; endl;\n    cout &lt;&lt; \"Printed Tree: \" &lt;&lt; endl;\n    for(int a = 0; a &lt;= height(root); a++) {\n        printGivenLevel(root, a); //Print every level\n        cout &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Here is my insert function:</p>\n\n<pre><code>void insert(treenode*&amp; node, int val) {\n    if(node == nullptr) {\n        node = new treenode(val);\n        return;\n    }else{\n        if(node-&gt;left == nullptr) {\n            insert(node-&gt;left, val);\n        }else{\n            insert(node-&gt;right, val);\n        }\n    }\n}\n</code></pre>\n\n<p>A treenode has a value, a left child and right child:</p>\n\n<pre><code>struct treenode {\n    //The value of the node\n    int value;\n    //Pointers to the left and right children\n    treenode *left, *right;\n    //Constructor with values;\n    treenode(int val=0, treenode *l = nullptr, treenode *r = nullptr) : value(val), left(l), right(r) {};\n};\n</code></pre>\n\n<p>I would expect the result to be something like so:</p>\n\n<p>0</p>\n\n<p>1 2</p>\n\n<p>3 4 5 6</p>\n\n<p>7 8 9 10 11 12 13 14</p>\n\n<p>But my actual output is only: </p>\n\n<p>0</p>\n\n<p>1 2</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "optimization", "memory-barriers", "memory-model"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554931866, "post_id": 55620073, "comment_id": 97936171, "body": "Can you confirm what architecture and version of ARM (and GCC)?  Godbolt makes decent output for ARM64, but I am not sure if this is what you want."}, {"owner": {"reputation": 1625, "user_id": 3120079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bca953ab654e20616d2c372036509aa?s=128&d=identicon&r=PG&f=1", "display_name": "Bikineev", "link": "https://stackoverflow.com/users/3120079/bikineev"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554940007, "post_id": 55620073, "comment_id": 97938454, "body": "It&#39;s ARM32. See here: <a href=\"https://godbolt.org/z/BSPOKN\" rel=\"nofollow noreferrer\">godbolt.org/z/BSPOKN</a>"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1554925633, "creation_date": 1554925633, "answer_id": 55620267, "question_id": 55620073, "link": "https://stackoverflow.com/questions/55620073/gcc-doesnt-merge-consecutive-fences/55620267#55620267", "title": "gcc doesn&#39;t merge consecutive fences", "body": "<p>Yes, it does not, and I have been debating it for a while with various people. For external observer like myself effect is that it treats <code>atomic</code> as <code>volatile</code>, while standard doesn't require it to. I was not able to find a requirement for this in the standard.</p>\n\n<p>However, it might also be a simple case of missing optimization.</p>\n"}], "owner": {"reputation": 1625, "user_id": 3120079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0bca953ab654e20616d2c372036509aa?s=128&d=identicon&r=PG&f=1", "display_name": "Bikineev", "link": "https://stackoverflow.com/users/3120079/bikineev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1558728518, "creation_date": 1554924835, "last_edit_date": 1558728518, "question_id": 55620073, "link": "https://stackoverflow.com/questions/55620073/gcc-doesnt-merge-consecutive-fences", "title": "gcc doesn&#39;t merge consecutive fences", "body": "<p>For this simple piece of code</p>\n\n<pre><code>std::atomic_int i;\nvoid foo() {\n    i.store(1);\n    i.store(2);\n}\n</code></pre>\n\n<p>gcc generates the following assembly for ARM:</p>\n\n<pre><code>movw    r3, #:lower16:.LANCHOR0\nmovt    r3, #:upper16:.LANCHOR0\ndmb ish\nmov r1, #1\nmov r2, #2\nstr r1, [r3]\ndmb ish\ndmb ish               ; why is this not eliminated?\nstr r2, [r3]\ndmb ish\nbx  lr\n</code></pre>\n\n<p>You may notice that there is a repeated fence generated in the middle, which seems to be superfluous. Is it an issue of gcc's optimizer being not able to catch and eliminate extra fences or am I missing something?</p>\n\n<p>BTW, clang seems to handle adjacent fences.</p>\n"}, {"tags": ["c++", "deque"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1554924855, "post_id": 55620053, "comment_id": 97933175, "body": "<i>&quot;I have tried using the [] operator and que.at() function, both without success.&quot;</i> Please elaborate on how it didn&#39;t work. Please show what you tried, what you expected it to do, what it actually did and explain the difference."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11335589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee0ff097157ac06bc1c457c2bb5879b?s=128&d=identicon&r=PG&f=1", "display_name": "soderberg", "link": "https://stackoverflow.com/users/11335589/soderberg"}, "edited": false, "score": 0, "creation_date": 1555008899, "post_id": 55620161, "comment_id": 97969607, "body": "Compiler returns &quot;Error: &#39;auto&#39; is not allowed here&quot; at the const auto&amp; a and b, Any idea to why this could be?"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "reply_to_user": {"reputation": 1, "user_id": 11335589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee0ff097157ac06bc1c457c2bb5879b?s=128&d=identicon&r=PG&f=1", "display_name": "soderberg", "link": "https://stackoverflow.com/users/11335589/soderberg"}, "edited": false, "score": 0, "creation_date": 1555009180, "post_id": 55620161, "comment_id": 97969708, "body": "Not sure what compiler it version you&#39;re using, but <code>auto</code> requires C++11 or newer and using it in lambdas requires C++14. You may want to add <code>-std=c++14</code> or similar to your command line. You can see my command line, where the example works, in the Coliru link."}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "reply_to_user": {"reputation": 1, "user_id": 11335589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee0ff097157ac06bc1c457c2bb5879b?s=128&d=identicon&r=PG&f=1", "display_name": "soderberg", "link": "https://stackoverflow.com/users/11335589/soderberg"}, "edited": false, "score": 0, "creation_date": 1555009425, "post_id": 55620161, "comment_id": 97969813, "body": "Alternately, change the <code>auto</code>s in the lambda to <code>Plane</code>."}], "tags": [], "owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "is_accepted": false, "score": 1, "last_activity_date": 1554987267, "last_edit_date": 1554987267, "creation_date": 1554925217, "answer_id": 55620161, "question_id": 55620053, "link": "https://stackoverflow.com/questions/55620053/accessing-specific-element-in-stddeque/55620161#55620161", "title": "Accessing specific element in std::deque", "body": "<p>What about using the STL function <a href=\"https://en.cppreference.com/w/cpp/algorithm/min_element\" rel=\"nofollow noreferrer\"><code>std::min_element()</code></a> instead of hand-rolling the same functionality:</p>\n\n<pre><code>const auto minFuel = min_element( begin( queArr ), end( queArr ),\n    []( const auto&amp; a, const auto&amp; b) { return a.getFuel() &lt; b.getFuel(); } );\nif( minFuel != end( queArr ) )\n{\n    cout &lt;&lt; minFuel-&gt;getTime();\n}\n</code></pre>\n\n<p>Here's a complete working example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;deque&gt;\n\nusing namespace std;\n\nstruct Plane\n{\n  Plane( int fuel ) : _fuel{ fuel } {}\n  int getFuel() const { return _fuel; }\n  int getTime() const { return _fuel * 2; }\n\nprivate:\n  int _fuel;\n};\n\nint main()\n{\n  const auto queArr  = deque&lt;Plane&gt;{ 1, 2, 3, 4, 5, -1, 10 };\n  const auto minFuel = min_element( begin( queArr ), end( queArr ),\n    []( const auto&amp; a, const auto&amp; b) { return a.getFuel() &lt; b.getFuel(); } );\n  if( minFuel != end( queArr ) )\n  {\n    cout &lt;&lt; minFuel-&gt;getTime();\n  }\n}\n</code></pre>\n\n<p>which outputs <code>-2</code>. See it live on <kbd><a href=\"http://coliru.stacked-crooked.com/a/7b0f5eed95cd1e3c\" rel=\"nofollow noreferrer\">Coliru</a></kbd>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11335589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ee0ff097157ac06bc1c457c2bb5879b?s=128&d=identicon&r=PG&f=1", "display_name": "soderberg", "link": "https://stackoverflow.com/users/11335589/soderberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554987267, "creation_date": 1554924756, "question_id": 55620053, "link": "https://stackoverflow.com/questions/55620053/accessing-specific-element-in-stddeque", "title": "Accessing specific element in std::deque", "body": "<p>I need to access an element at an specific position in the deque \"queArr\". From this element, which is an object of class \"plane\" I need to call the member function getTime which returns the private member time. The problem is that I don't know how to access the element since it could be anywhere in the que.</p>\n\n<p>I have tried using the [] operator and que.at() function, both without success. These are the only options I could find in the definition of deque (<a href=\"https://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/container/deque</a>) which seemed relevant.</p>\n\n<p>This is the current code. It grabs the position of the element with the lowest fuel (accessed through getFuel()) and then removes it by .erease(pos) using the position added to an iterator pointing to the ques first element. Before this, at the place of the comment, I need to access the member function getTime of this element and add this to the variable totalArr. How to access this is my current problem.</p>\n\n<pre><code>//namespace std is being used\n\nlandingDelay+=landingTime;\ncout&lt;&lt;\"A plane has started landing \\n\";\nint quePos=0;\nint ref=queArr.front().getFuel(); \nfor(int j=0; j&lt;queArr.size(); j++)\n{\n    if(queArr.at(j).getFuel()&lt;ref)\n    {\n        ref=queArr.at(j).getFuel();\n        quePos=j;\n    }\n}\nit=queArr.begin();\nit+=quePos;\n//I was thinking something here\nqueArr.erase(it);\n</code></pre>\n\n<p>Any help would be much appreciated :)</p>\n"}, {"tags": ["c++", "string", "file", "stream"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554924426, "post_id": 55619929, "comment_id": 97932999, "body": "Regular expressions?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1554924429, "post_id": 55619929, "comment_id": 97933002, "body": "Of course &quot;sscanf doesn&#39;t do what&quot; you want. Can&#39;t do much of anything, if it doesn&#39;t even compile. sscanf is a C library function that doesn&#39;t know anything about C++ streams. Whichever C++ book gave you an example of using <code>sscanf</code> together with a <code>std::stringstream</code> -- this book is no good, need to find a better book."}, {"owner": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "edited": false, "score": 0, "creation_date": 1554924567, "post_id": 55619929, "comment_id": 97933052, "body": "This wasn&#39;t from a book, I placed here sscanf as an example to show that I want to read from stringstreams like sscanf does."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554924588, "post_id": 55619929, "comment_id": 97933060, "body": "Hint <a href=\"https://en.m.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a>. You need to <i>parse</i> the strings you read."}, {"owner": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554924606, "post_id": 55619929, "comment_id": 97933065, "body": "@MichaelChourdakis what do you mean ?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1554924631, "post_id": 55619929, "comment_id": 97933079, "body": "<code>std::stringstream</code> is fundamentally different from <code>sscanf</code>. You can&#39;t make it work &quot;like sscanf does&quot;. It doesn&#39;t work this way. Any good C++ book should have plenty of examples of how to use formatted extraction operators. Please review the many examples in your C++ book, and if you have any <b><i>specific</i></b> questions, they can be asked on stackoverflow.com"}, {"owner": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554924638, "post_id": 55619929, "comment_id": 97933083, "body": "@JesperJuhl I know but how can I parse it so that I take each number alone. This was my question"}, {"owner": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1554924676, "post_id": 55619929, "comment_id": 97933103, "body": "@SamVarshavchik a specific question would be: how can I read from a stringstream formatted like this so that I take a number at a time"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554924685, "post_id": 55619929, "comment_id": 97933109, "body": "Michael means <a href=\"https://en.m.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expressions</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554924752, "post_id": 55619929, "comment_id": 97933134, "body": "Rather than putting that forth-coming revised question in a comment, <a href=\"https://stackoverflow.com/posts/55619929/edit\">edit the question</a>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1554924842, "post_id": 55619929, "comment_id": 97933169, "body": "No, I&#39;m afraid that &quot;how do I do this&quot; is not a specific question. I specific question would be &quot;here&#39;s my literal input, here&#39;s how I&#39;m using <code>std::stringstream</code> to parse it, but it fails, and leave the stream in a failed state, why?&quot; That&#39;s the specific question.  You need to write some code first, and if it doesn&#39;t work, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that anyone can use to reproduce the problem. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> questions in stackoverflow.com&#39;s <a href=\"https://stackoverflow.com/help\">help center</a>. stackoverflow.com is not really a tutorial site, where someone goes to learn how to do something."}], "answers": [{"comments": [{"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1554925108, "post_id": 55620124, "comment_id": 97933283, "body": "I was just about to post this. Doing this before creating the stringstream really does simplify everything."}, {"owner": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "edited": false, "score": 0, "creation_date": 1554925315, "post_id": 55620124, "comment_id": 97933402, "body": "I thought of this, but wouldn&#39;t be more powerful if I could just tell the program to get the data in between the two brackets and separated by a comma?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1554925322, "post_id": 55620124, "comment_id": 97933406, "body": "I just like simpler code. The more code I write means more bugs."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "edited": false, "score": 0, "creation_date": 1554925413, "post_id": 55620124, "comment_id": 97933447, "body": "@MinaAshraf, by more powerful, if you mean &quot;very geeky&quot;, then yes. I don&#39;t see it more powerful otherwise."}, {"owner": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "edited": false, "score": 0, "creation_date": 1554925441, "post_id": 55620124, "comment_id": 97933461, "body": "totally agree, but for me to learn a new technique, can you suggest a way that extracts what is in between the brackets? A lot of people are working on the project and if I edited the file, it may destroy all the code they wrote. That&#39;s why I don&#39;t think I can edit the file"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1554925507, "post_id": 55620124, "comment_id": 97933495, "body": "Who said you have to edit the file? Nobody said that you need to edit the file."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "edited": false, "score": 0, "creation_date": 1554925512, "post_id": 55620124, "comment_id": 97933499, "body": "@MinaAshraf Modify the string after reading it but before you try to parse it. You don&#39;t need to modify the file."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1554925166, "last_edit_date": 1554925166, "creation_date": 1554925049, "answer_id": 55620124, "question_id": 55619929, "link": "https://stackoverflow.com/questions/55619929/how-can-i-read-a-numbers-from-a-specifically-formatted-stringstream/55620124#55620124", "title": "How can I read a numbers from a specifically formatted stringstream?", "body": "<p>My suggestion:</p>\n\n<ol>\n<li>Replace all the extraneous characters by space characters in the string.<br>\n<code>(</code>, <code>)</code>, and <code>,</code> can all be replaced by space.</li>\n<li>Extract the numbers from the simplified string.</li>\n</ol>\n\n<hr>\n\n<p>In the first step, <code>\"rectangle,(42,25),(68,25),(68,70),(42,70)\"</code> can be transformed to <code>\"rectangle  42 25   68 25   68 70   42 70 \"</code>.</p>\n\n<p>Reading the numbers from such a string is straight forward.</p>\n"}], "owner": {"reputation": 69, "user_id": 11196494, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dEBEz98WT3w/AAAAAAAAAAI/AAAAAAAAAAw/hFGqcHwKVCE/photo.jpg?sz=128", "display_name": "Mina Ashraf", "link": "https://stackoverflow.com/users/11196494/mina-ashraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1554933027, "creation_date": 1554924271, "last_edit_date": 1554933027, "question_id": 55619929, "link": "https://stackoverflow.com/questions/55619929/how-can-i-read-a-numbers-from-a-specifically-formatted-stringstream", "title": "How can I read a numbers from a specifically formatted stringstream?", "body": "<p>I have a huge file that contains geometric objects with their coordinates next to them. \nthe format is like this:\nrectangle,(42,25),(68,25),(68,70),(42,70)</p>\n\n<p>I want to read each number alone and store it in array as I later process this data to find the shapes areas and perimeters. </p>\n\n<pre><code>string line = \"\"; // A string for reading lines from the text file\nifstream readFile(\"Input_Points.txt\"); // Opening the input file\n\nstring name = \"\"; // A string to store the type of the shape\n\nwhile(getline(readFile,line))  { \n    // Loop through the file lines\n    stringstream iss(line); // Instantiate stringstream with the current line just read\n    getline(iss, name, ','); // Parse token until the first comma and store it in name\n    Shape * obj = gobj[name]; //Fetch the corresponding object from map using name\n    if ( obj != NULL )  { \n        // If it can find an object with name index\n        obj = obj-&gt;clone(iss); // Clone an object of the same type               \n        cout &lt;&lt; name &lt;&lt; \":\" &lt;&lt; obj-&gt;area() &lt;&lt; \":\" &lt;&lt; obj-&gt;perimeter() &lt;&lt; \"\\n\";  // Calculate area and print it\n        delete (obj); // delete the object \n    } \n    else \n        cout &lt;&lt; \"Undefined Object Identifier\\n\"; // Cannot find object type in map\n}\n</code></pre>\n\n<p>and the two functions were I handle the data </p>\n\n<pre><code>void Square::initialize (stringstream &amp; ss) \n{\n    for (int i = 0; i &lt; 2; i++) {\n        sscanf(ss,\",(%lf,%lf)\", points[i].X, points[i].Y);\n    }\n    for (int i = 0; i &lt; 2; i++) {\n        LineLength[i] = points[(i + 1)%2] - points[i];\n    }\n}\n\nShape * Square::clone (stringstream &amp; ss) { //can be done with templates \n    Square * square = new Square();\n    square-&gt;initialize(ss);\n    return square;\n}\n</code></pre>\n\n<p>the sscanf doesn't do what I want here and I have done a lot of searching and couldn't find something similar that performs what I want to do on string streams.</p>\n"}, {"tags": ["python", "c++", "zeromq", "pyzmq"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554924176, "post_id": 55619871, "comment_id": 97932903, "body": "Maybe use a <code>std::vector&lt;uint8_t&gt;</code> rather than <code>std::string</code>?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1554926437, "post_id": 55619871, "comment_id": 97933900, "body": "How do you have the image stored in c++?"}, {"owner": {"reputation": 1809, "user_id": 7472801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p8nvD.png?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/7472801/rohit"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1554931018, "post_id": 55619871, "comment_id": 97935861, "body": "@eyllanesc I&#39;ve used the library opencv for handling images. Its reads image in form of Matrix object."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1554931258, "post_id": 55619871, "comment_id": 97935964, "body": "@Rohit You should write those things at the beginning of your question since c++ does not offer by default the handling of images so you will always need to use an external library. :-)"}, {"owner": {"reputation": 1809, "user_id": 7472801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p8nvD.png?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/7472801/rohit"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1554934153, "post_id": 55619871, "comment_id": 97936933, "body": "@eyllanesc Thanks for pointing out. I&#39;ve declared use of opencv library in the question itself."}], "answers": [{"comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1554931620, "post_id": 55621196, "comment_id": 97936083, "body": "Sending a 16MB image uncompressed is potentially pretty wasteful of network bandwidth! Maybe consider using <code>cv2.imencode()</code> to convert to JPEG or PNG in memory before sending and it will likely be 200kB instead of 16MB."}, {"owner": {"reputation": 1809, "user_id": 7472801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p8nvD.png?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/7472801/rohit"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1554935165, "post_id": 55621196, "comment_id": 97937285, "body": "@MarkSetchell Thanks Mark for point out, I&#39;ve updated the code with image encoding/decoding integrated at both c++ &amp; python ends."}, {"owner": {"reputation": 142, "user_id": 2243991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AR1D8.jpg?s=128&g=1", "display_name": "7uc4", "link": "https://stackoverflow.com/users/2243991/7uc4"}, "edited": false, "score": 0, "creation_date": 1567367646, "post_id": 55621196, "comment_id": 101935537, "body": "May you provide the inverse that is sending an image (encoded) from python client to c++ server?"}], "tags": [], "owner": {"reputation": 1809, "user_id": 7472801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p8nvD.png?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/7472801/rohit"}, "is_accepted": true, "score": 7, "last_activity_date": 1554935085, "last_edit_date": 1554935085, "creation_date": 1554929787, "answer_id": 55621196, "question_id": 55619871, "link": "https://stackoverflow.com/questions/55619871/how-to-i-transfer-an-imageopencv-matrix-numpy-array-from-c-publisher-to-pyth/55621196#55621196", "title": "How to I transfer an image(opencv Matrix/numpy array) from c++ publisher to python sender via ZeroMQ?", "body": "<p><em>Disclaimer :</em> \n<em>Answering my own question, so that others shall not stuck where I did.</em></p>\n\n<p>So lets get started.</p>\n\n<p><strong>What is Zero MQ ?</strong></p>\n\n<p>ZeroMQ is a high-performance asynchronous messaging library, aimed at use in distributed or concurrent applications. It provides a message queue, but unlike message-oriented middleware, a ZeroMQ system can run without a dedicated message broker. </p>\n\n<p>Before, we get started here are the basics : </p>\n\n<p>Protocol/Library used : ZeroMQ</p>\n\n<p>Publisher : C++ oriented</p>\n\n<p>Subsciber : Python oriented</p>\n\n<hr>\n\n<p><strong>Sending String/char array message via ZeroMQ :</strong></p>\n\n<p><strong><em>C++ Publisher :-</em></strong></p>\n\n<pre><code>// Setting up ZMQ context &amp; socket variables\nvoid *context = zmq_ctx_new();\nvoid *publisher = zmq_socket(context, ZMQ_PUB); \nint bind = zmq_bind(publisher, \"tcp://*:9000\");\nstd::string message = \"Hello from sender\";\nconst char *message_char = message.c_str(); // Converting c++ string to char array\n// Sending char array via ZMQ\nzmq_send(publisher, message_char, strlen(message_char), ZMQ_NOBLOCK);\n</code></pre>\n\n<p><strong><em>Python Subscriber :-</em></strong></p>\n\n<pre><code>// Setting up ZMQ context &amp; socket variables\ncontext = zmq.Context()\nreceiver = context.socket(zmq.SUB)\nreceiver.connect(\"tcp://localhost:9000\")\n// Subscribing to start receiving messages\nreceiver.setsockopt_string(zmq.SUBSCRIBE, \"\")\nmessage = receiver.recv_string()\n</code></pre>\n\n<hr>\n\n<p><strong>Sending Image/ndarray array message via ZeroMQ :</strong></p>\n\n<p>For handling images, opencv is an awesome library. Simple, easy to code &amp; lightning fast.</p>\n\n<p><strong><em>C++ Publisher :-</em></strong></p>\n\n<pre><code>void *context = zmq_ctx_new();\nvoid *publisher = zmq_socket(context, ZMQ_PUB);\nint bind = zmq_bind(publisher, \"tcp://*:9000\");\n\n// Reading the image through opencv package\ncv::Mat image = cv::imread(\"C:/Users/rohit/Desktop/sample.bmp\", CV_LOAD_IMAGE_GRAYSCALE );\nint height = image.rows;\nint width = image.cols;\nzmq_send(publisher, image.data, (height*width*sizeof(UINT8)), ZMQ_NOBLOCK);\n</code></pre>\n\n<p><em>In above code, image is read as a grayscale image, you can read 3-channel (RGB) image as well, by passing appropriate parameters in opencv's imread method.</em> </p>\n\n<p><em>Also remember to modify the size (3rd parameter in zmq_send function call) accordingly.</em></p>\n\n<p><strong><em>Python Subscriber :-</em></strong></p>\n\n<pre><code>context = zmq.Context()\nreceiver = context.socket(zmq.SUB)\nreceiver.connect(\"tcp://localhost:9000\")\nreceiver.setsockopt_string(zmq.SUBSCRIBE, \"\")\n// Receiving image in bytes\nimage_bytes = receiver.recv()\nint width = 4096; // My image width\nint height = 4096; // My image height\n// Converting bytes data to ndarray\nimage = numpy.frombuffer(image_byte, dtype=uint8).reshape((width, height))\n</code></pre>\n\n<p><strong>TO DO / IMPROVEMENT :</strong> \nYou can also pass the image size from the c++ publisher along with the image data.\nSo, that image can be reshaped accordingly at python side.</p>\n\n<p><em>ZMQ_SNDMORE flag comes handy here</em></p>\n\n<p>Just add another zmq_send statement at c++ side. </p>\n\n<pre><code>zmq_send(publisher, img_height, strlen(img_height), ZMQ_SNDMORE)\nzmq_send(publisher, img_width, strlen(img_width), ZMQ_SNDMORE)\nzmq_send(publisher, image.data, (height*width*sizeof(UINT8)), ZMQ_NOBLOCK);\n</code></pre>\n\n<p>Similarly, add corresponding receiving statements at python end.</p>\n\n<pre><code>height = receiver.recv_string(ZMQ_RCVMORE)\nwidth = receiver.recv_string(ZMQ_RCVMORE)\nimage_bytes = receiver.recv()\n</code></pre>\n\n<hr>\n\n<p><strong>Another Improvement</strong></p>\n\n<p>Thanks @Mark Setchell for pointing out an improvement.</p>\n\n<p>Sending opencv Matrix of large size directly over network can be costly.\nA better approach would be to encode the image before sending over the network.</p>\n\n<p><strong><em>C++ Publisher :-</em></strong></p>\n\n<pre><code>void *context = zmq_ctx_new();\nvoid *publisher = zmq_socket(context, ZMQ_PUB);\nint bind = zmq_bind(publisher, \"tcp://*:9000\");\n\n// Reading the image through opencv package\ncv::Mat image = cv::imread(\"C:/Users/rohit/Desktop/sample.bmp\", CV_LOAD_IMAGE_GRAYSCALE );\nint height = image.rows;\nint width = image.cols;\ncv::vector&lt;uchar&gt; buffer;\ncv::imencode(\".jpg\", image, buffer);\nzmq_send(publisher, buffer.data(), buffer.size(), ZMQ_NOBLOCK);\n</code></pre>\n\n<p><strong><em>Python Subscriber :-</em></strong></p>\n\n<pre><code>context = zmq.Context()\nreceiver = context.socket(zmq.SUB)\nreceiver.connect(\"tcp://localhost:9000\")\nreceiver.setsockopt_string(zmq.SUBSCRIBE, \"\")\n// Receiving image in bytes\nimage_bytes = receiver.recv()\n// Decoding the image -- Python's PIL.Image library is used for decoding\nimage = numpy.array(Image.open(io.BytesIO(image_byte)))\n</code></pre>\n"}], "owner": {"reputation": 1809, "user_id": 7472801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p8nvD.png?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/7472801/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2921, "favorite_count": 4, "accepted_answer_id": 55621196, "answer_count": 1, "score": 7, "last_activity_date": 1554935085, "creation_date": 1554924027, "last_edit_date": 1554934105, "question_id": 55619871, "link": "https://stackoverflow.com/questions/55619871/how-to-i-transfer-an-imageopencv-matrix-numpy-array-from-c-publisher-to-pyth", "title": "How to I transfer an image(opencv Matrix/numpy array) from c++ publisher to python sender via ZeroMQ?", "body": "<p>I know how to send a string message from c++ to python via zeromq.</p>\n\n<p>Here's the code for sending a string message I know : </p>\n\n<p>C++ sender code :</p>\n\n<pre><code>void *context = zmq_ctx_new();\nvoid *publisher = zmq_socket(context, ZMQ_PUB);\nint bind = zmq_bind(publisher, \"tcp://localhost:5563\");\nstd::string message = \"Hello from sender\";\nconst char *message_char = message.c_str();\nzmq_send(publisher, message_char, strlen(message_char), ZMQ_NOBLOCK);\n</code></pre>\n\n<p>Python receiver code : </p>\n\n<pre><code>context = zmq.Context()\nreceiver = context.socket(zmq.SUB)\nreceiver.connect(\"tcp://*:5563\")\nreceiver.setsockopt_string(zmq.SUBSCRIBE, \"\")\nmessage = receiver.recv_string()\n</code></pre>\n\n<p>What I want is to send an image from c++ zeromq publisher to python receiver.</p>\n"}, {"tags": ["c++", "polymorphism", "containers", "virtual", "adt"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554923307, "post_id": 55619700, "comment_id": 97932550, "body": "How was <code>input()</code> declared in the base class? Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces your problem as required here please."}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 0, "last_activity_date": 1554925024, "last_edit_date": 1554925024, "creation_date": 1554924356, "answer_id": 55619954, "question_id": 55619700, "link": "https://stackoverflow.com/questions/55619700/adt-and-polymorphism/55619954#55619954", "title": "ADT and polymorphism", "body": "<p>Your code is note quite consistent between the type of <code>obj</code> and the type of <code>arr</code>.  Nevertheless, according to the symptoms,  your problem is due to <a href=\"https://en.wikipedia.org/wiki/Object_slicing\" rel=\"nofollow noreferrer\">object slicing</a>:  </p>\n\n<pre><code>arr[nelem]=obj;\n</code></pre>\n\n<p>Because, according to your definition of <code>arr</code>, <code>arr[nelem]</code> would be of type <code>object</code> here, which is the base class.  So whatever the real derived type of <code>obj</code>,  it will be converted back to the base class (and hence use the virtual functions of the base class).</p>\n\n<p>If you want to have a polymorphic container, you need to have a container of pointers,  or better, smart pointers.  And instead of arrays, you should really consider using vectors: </p>\n\n<pre><code>std::vector&lt;std::shared_ptr&lt;Object&gt;&gt; arr;\n\nbool array::InputArray(std::shared_ptr&lt;Object&gt; obj) {\n    ...\n    obj-&gt;input(cin);\n    arr.push_back(obj);  // no need for nelem.  Use arr.size() instead\n    return true;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/moDdjL\" rel=\"nofollow noreferrer\">Online demo</a></p>\n"}], "owner": {"reputation": 57, "user_id": 11319288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3JBVsApNYUs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdGv9OwXAwoRaFvgkps8xmbzYcRpw/mo/photo.jpg?sz=128", "display_name": "Dave2222", "link": "https://stackoverflow.com/users/11319288/dave2222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 55619954, "answer_count": 1, "score": 0, "last_activity_date": 1554925055, "creation_date": 1554923195, "last_edit_date": 1554925055, "question_id": 55619700, "link": "https://stackoverflow.com/questions/55619700/adt-and-polymorphism", "title": "ADT and polymorphism", "body": "<p>So I have this code:</p>\n\n<pre><code>bool array::InputArray(const ObjectPtr&amp; obj) {\n    if(full()) return false;\n    if(!duplicate(vet)) throw exception(\"\\nImportant exception\");\n    obj-&gt;input(cin);\n    arr[nelem]=obj;\n    nelem++;\n    return true;\n}\n</code></pre>\n\n<p><code>obj-&gt;input(cin)</code> is just a polymorph function to permit input from console for the exact derived class, the main program gives the right object so that virtual function is not a problem but the <code>arr[nelem]=obj;</code> is, also \"arr\" is as defined:</p>\n\n<pre><code>object* arr;\n</code></pre>\n\n<p>My goal is: I want this array to contain the right object when given in the main program, but it only contains the base class side.. how do I tell the compiler to insert even the derived side?? Thanks!</p>\n"}, {"tags": ["c#", "c++", "unity3d", "shader", "fragment-shader"], "comments": [{"owner": {"reputation": 1578, "user_id": 342842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98efa40198faaa312c6465b969f1fae?s=128&d=identicon&r=PG", "display_name": "Immersive", "link": "https://stackoverflow.com/users/342842/immersive"}, "edited": false, "score": 0, "creation_date": 1554965645, "post_id": 55619589, "comment_id": 97944676, "body": "I&#39;m not really up to speed on Unity&#39;s shaders, but your &#39;new&#39; one still has two <code>Pass</code> blocks.  Are you sure that&#39;s correct?"}, {"owner": {"reputation": 1085, "user_id": 9312961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fcb11419419d32ed648a34f4ef12e?s=128&d=identicon&r=PG&f=1", "display_name": "Kalle Halvarsson", "link": "https://stackoverflow.com/users/9312961/kalle-halvarsson"}, "reply_to_user": {"reputation": 1578, "user_id": 342842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98efa40198faaa312c6465b969f1fae?s=128&d=identicon&r=PG", "display_name": "Immersive", "link": "https://stackoverflow.com/users/342842/immersive"}, "edited": false, "score": 0, "creation_date": 1554967945, "post_id": 55619589, "comment_id": 97945829, "body": "@Immersive, singe-pass in this case refers to rendering both eyes simultaneously for VR - it&#39;s not related to the render passes inside the shader."}], "owner": {"reputation": 1, "user_id": 7376304, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vcNKa9WZG-E/AAAAAAAAAAI/AAAAAAAADeE/q41KjFjiIJI/photo.jpg?sz=128", "display_name": "Yamraj 6", "link": "https://stackoverflow.com/users/7376304/yamraj-6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554922760, "creation_date": 1554922760, "question_id": 55619589, "link": "https://stackoverflow.com/questions/55619589/convert-multipass-blur-shader-to-singlepass-rendering-mode", "title": "Convert multipass blur shader to singlepass (rendering mode)", "body": "<p>I have blur shader to Unity and this shader doesn't support SinglePass rendering mode (after build on Oculus GO with SinglePass graphic artifacts appear). I tried to implement support for SinglePass rendering using Unity guides, but with no effects. I do not have any ideas what could be wrong.</p>\n\n<p>Unity SinglePass guidies I tried applied:\n<a href=\"https://docs.unity3d.com/Manual/SinglePassStereoRendering.html\" rel=\"nofollow noreferrer\">https://docs.unity3d.com/Manual/SinglePassStereoRendering.html</a>\n<a href=\"https://docs.unity3d.com/Manual/SinglePassInstancing.html\" rel=\"nofollow noreferrer\">https://docs.unity3d.com/Manual/SinglePassInstancing.html</a></p>\n\n<p>OLD VERSION NOT SUPPORTED SINGLE PASS RENDERING:</p>\n\n<p>Shader \"Custom/BLUR\" {\n    Properties\n    {\n        _Radius(\"Radius\", Range(1, 255)) = 1\n    }</p>\n\n<pre><code>Category\n{\n    Tags{ \"Queue\" = \"Transparent\" \"IgnoreProjector\" = \"True\" \"RenderType\" = \"Opaque\" }\n\n    SubShader\n    {\n        GrabPass\n        {\n            Tags{ \"LightMode\" = \"Always\" }\n        }\n\n        Pass\n        {\n            Tags{ \"LightMode\" = \"Always\" }\n\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n            #pragma fragmentoption ARB_precision_hint_fastest\n            #include \"UnityCG.cginc\"\n\n            struct appdata_t\n            {\n                float4 vertex : POSITION;\n                float2 texcoord: TEXCOORD0;\n            };\n\n            struct v2f\n            {\n                float4 vertex : POSITION;\n                float4 uvgrab : TEXCOORD0;\n            };\n\n            v2f vert(appdata_t v)\n            {\n                v2f o;\n                o.vertex = UnityObjectToClipPos(v.vertex);\n                #if UNITY_UV_STARTS_AT_TOP\n                float scale = -1.0;\n                #else\n                float scale = 1.0;\n                #endif\n                o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;\n                o.uvgrab.zw = o.vertex.zw;\n                return o;\n            }\n\n            sampler2D _GrabTexture;\n            float4 _GrabTexture_TexelSize;\n            float _Radius;\n\n            half4 frag(v2f i) : COLOR\n            {\n                half4 sum = half4(0,0,0,0);\n\n                #define GRABXYPIXEL(kernelx, kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely, i.uvgrab.z, i.uvgrab.w)))\n\n                sum += GRABXYPIXEL(0.0, 0.0);\n                int measurments = 1;\n\n                for (float range = 0.1f; range &lt;= _Radius; range += 0.1f)\n                {\n                    sum += GRABXYPIXEL(range, range);\n                    sum += GRABXYPIXEL(range, -range);\n                    sum += GRABXYPIXEL(-range, range);\n                    sum += GRABXYPIXEL(-range, -range);\n                    measurments += 4;\n                }\n\n                return sum / measurments;\n            }\n            ENDCG\n        }\n        GrabPass\n        {\n            Tags{ \"LightMode\" = \"Always\" }\n        }\n\n        Pass\n        {\n            Tags{ \"LightMode\" = \"Always\" }\n\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n            #pragma fragmentoption ARB_precision_hint_fastest\n            #include \"UnityCG.cginc\"\n\n            struct appdata_t\n            {\n                float4 vertex : POSITION;\n                float2 texcoord: TEXCOORD0;\n            };\n\n            struct v2f\n            {\n                float4 vertex : POSITION;\n                float4 uvgrab : TEXCOORD0;\n            };\n\n            v2f vert(appdata_t v)\n            {\n                v2f o;\n                 o.vertex = UnityObjectToClipPos(v.vertex);\n                #if UNITY_UV_STARTS_AT_TOP\n                float scale = -1.0;\n                #else\n                float scale = 1.0;\n                #endif                  \n                o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;\n                o.uvgrab.zw = o.vertex.zw;\n                return o;\n            }\n\n            sampler2D _GrabTexture;\n            float4 _GrabTexture_TexelSize;\n            float _Radius;\n\n            half4 frag(v2f i) : COLOR\n            {\n\n                half4 sum = half4(0,0,0,0);\n                float radius = 1.41421356237 * _Radius;\n\n                #define GRABXYPIXEL(kernelx, kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely, i.uvgrab.z, i.uvgrab.w)))\n\n                sum += GRABXYPIXEL(0.0, 0.0);\n                int measurments = 1;\n\n                for (float range = 1.41421356237f; range &lt;= radius * 1.41; range += 1.41421356237f)\n                {\n                    sum += GRABXYPIXEL(range, 0);\n                    sum += GRABXYPIXEL(-range, 0);\n                    sum += GRABXYPIXEL(0, range);\n                    sum += GRABXYPIXEL(0, -range);\n                    measurments += 4;\n                }\n\n                return sum / measurments;\n            }\n            ENDCG\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>MY NON-WORKING CHANGES:</p>\n\n<p>Shader \"Custom/BLUR\" {\n    Properties\n    {\n        _Radius(\"Radius\", Range(1, 255)) = 1\n    }</p>\n\n<pre><code>Category\n{\n    Tags{ \"Queue\" = \"Transparent\" \"IgnoreProjector\" = \"True\" \"RenderType\" = \"Opaque\" }\n\n    SubShader\n    {\n        GrabPass\n        {\n            Tags{ \"LightMode\" = \"Always\" }\n        }\n\n        Pass\n        {\n            Tags{ \"LightMode\" = \"Always\" }\n\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n            #pragma fragmentoption ARB_precision_hint_fastest\n            #include \"UnityCG.cginc\"\n\n            struct appdata_t\n            {\n                float4 vertex : POSITION;\n                float2 texcoord: TEXCOORD0;\n            };\n\n            struct v2f\n            {\n                float4 vertex : POSITION;\n                float4 uvgrab : TEXCOORD0;\n            };\n\n            v2f vert(appdata_t v)\n            {\n                v2f o;\n                o.vertex = UnityObjectToClipPos(v.vertex);\n                #if UNITY_UV_STARTS_AT_TOP\n                float scale = -1.0;\n                #else\n                float scale = 1.0;\n                #endif\n\n                o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;\n                o.uvgrab.zw = o.vertex.zw;\n                return o;\n            }\n\n            sampler2D _GrabTexture;\n            float4 _GrabTexture_TexelSize;\n            float _Radius;\n            half4 _MainTex_ST;\n\n            half4 frag(v2f i) : SV_Target\n            {\n                half4 sum = half4(0,0,0,0);\n\n                #if UNITY_SINGLE_PASS\n                    #define GRABXYPIXEL(kernelx, kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(UnityStereoScreenSpaceUVAdjust(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely, i.uvgrab.z, i.uvgrab.w),_MainTex_ST)))\n                #else\n                    #define GRABXYPIXEL(kernelx, kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely, i.uvgrab.z, i.uvgrab.w)))\n                #endif\n                sum += GRABXYPIXEL(0.0, 0.0);\n                int measurments = 1;\n\n                for (float range = 0.1f; range &lt;= _Radius; range += 0.1f)\n                {\n                    sum += GRABXYPIXEL(range, range);\n                    sum += GRABXYPIXEL(range, -range);\n                    sum += GRABXYPIXEL(-range, range);\n                    sum += GRABXYPIXEL(-range, -range);\n                    measurments += 4;\n                }\n\n                return sum / measurments;\n            }\n            ENDCG\n        }\n        GrabPass\n        {\n            Tags{ \"LightMode\" = \"Always\" }\n        }\n\n        Pass\n        {\n            Tags{ \"LightMode\" = \"Always\" }\n\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n            #pragma fragmentoption ARB_precision_hint_fastest\n            #include \"UnityCG.cginc\"\n\n            struct appdata_t\n            {\n                float4 vertex : POSITION;\n                float2 texcoord: TEXCOORD0;\n            };\n\n            struct v2f\n            {\n                float4 vertex : POSITION;\n                float4 uvgrab : TEXCOORD0;\n            };\n\n            v2f vert(appdata_t v)\n            {\n                v2f o;\n                 o.vertex = UnityObjectToClipPos(v.vertex);\n                #if UNITY_UV_STARTS_AT_TOP\n                float scale = -1.0;\n                #else\n                float scale = 1.0;\n                #endif\n\n                o.uvgrab.xy = (float2(o.vertex.x, o.vertex.y*scale) + o.vertex.w) * 0.5;\n                o.uvgrab.zw = o.vertex.zw;\n                return o;\n            }\n\n            sampler2D _GrabTexture;\n            float4 _GrabTexture_TexelSize;\n            float _Radius;\n            half4 _MainTex_ST;\n\n            half4 frag(v2f i) : SV_Target\n            {\n\n                half4 sum = half4(0,0,0,0);\n                float radius = 1.41421356237 * _Radius;\n\n                #if UNITY_SINGLE_PASS\n                #define GRABXYPIXEL(kernelx, kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(UnityStereoScreenSpaceUVAdjust(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely, i.uvgrab.z, i.uvgrab.w),_MainTex_ST)))\n                #else\n                #define GRABXYPIXEL(kernelx, kernely) tex2Dproj( _GrabTexture, UNITY_PROJ_COORD(float4(i.uvgrab.x + _GrabTexture_TexelSize.x * kernelx, i.uvgrab.y + _GrabTexture_TexelSize.y * kernely, i.uvgrab.z, i.uvgrab.w)))\n                #endif\n                sum += GRABXYPIXEL(0.0, 0.0);\n                int measurments = 1;\n\n                for (float range = 1.41421356237f; range &lt;= radius * 1.41; range += 1.41421356237f)\n                {\n                    sum += GRABXYPIXEL(range, 0);\n                    sum += GRABXYPIXEL(-range, 0);\n                    sum += GRABXYPIXEL(0, range);\n                    sum += GRABXYPIXEL(0, -range);\n                    measurments += 4;\n                }\n\n                return sum / measurments;\n            }\n            ENDCG\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I expect this shader will support SinglePass VR rendering mode.</p>\n"}, {"tags": ["c++", "c++11", "rvalue-reference", "temporary-objects"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 9, "creation_date": 1554923071, "post_id": 55619550, "comment_id": 97932439, "body": "FWIW <code>const std::string &amp;&amp;text</code> should not be used.  You defeat the purpose of the rvalue reference by making what it refers to <code>const</code>.  If it is <code>const</code> it can&#39;t be moved from as that is a mutating operation."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 4, "last_activity_date": 1554923547, "creation_date": 1554923547, "answer_id": 55619784, "question_id": 55619550, "link": "https://stackoverflow.com/questions/55619550/rvalue-for-a-stdstring-parameter/55619784#55619784", "title": "rvalue for a std::string parameter", "body": "<p>There's no benefit in this case. <code>write_Rvalue</code> will only accept an rvalue. and <code>write_Lvalue</code> will only accept an lvalue.</p>\n\n<p>When you pass a string literal a temporary <code>std::string</code> will be constructed from the string literal. The rvalue variant can already bind to this because you're already passing a temporary and the lvalue variant can bind to the temporary because it's <code>const</code>.</p>\n\n<p>This for example, will not compile:</p>\n\n<pre><code>void write_Lvalue(const std::string &amp;text) {\n    //...\n}\n\nvoid write_Rvalue(const std::string &amp;&amp;text) {\n    //...\n}\n\nint main() {\n    std::string a = \"hello\";\n    write_Rvalue(a);\n}\n</code></pre>\n\n<p>because we're trying to pass an lvalue <code>a</code> to a function only accepting an rvalue.</p>\n\n<p>The benefit that can be gained with rvalue types is that they can be moved from. There's a great post on why moving can be faster <a href=\"https://stackoverflow.com/a/3109981/1870760\">here</a>.</p>\n\n<p>Making your rvalue <code>const</code> defeats the purpose of it though as said in the comments, because it can't be moved from anymore.</p>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1554998853, "post_id": 55619814, "comment_id": 97964916, "body": "A mutable lvalue references also doesn&#39;t work with <code>const</code> lvalues, and are quite rude to users (who have to assume their variable might get changed by the function)."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 7, "last_activity_date": 1554996935, "last_edit_date": 1554996935, "creation_date": 1554923735, "answer_id": 55619814, "question_id": 55619550, "link": "https://stackoverflow.com/questions/55619550/rvalue-for-a-stdstring-parameter/55619814#55619814", "title": "rvalue for a std::string parameter", "body": "<p>First, constant rvalue reference are not really useful, since you cannot move them. Moving value need mutable references to work.</p>\n\n<p>Let's take your corrected example:</p>\n\n<pre><code>void write_lvalue(std::string const&amp; text) {\n    //...\n}\n\nvoid write_rvalue(std::string&amp;&amp; text) {\n    //...\n}\n\nint main() {\n    write_lvalue(\"writing the Lvalue\");\n    write_rvalue(\"writing the Rvalue\");\n}\n</code></pre>\n\n<p>In this case, the two are <strong>completely equivalent</strong>. In these two case, the compiler has to create a string and send it by reference:</p>\n\n<pre><code>int main() {\n    // equivalent, string created\n    // and sent by reference (const&amp; bind to temporaries)\n    write_lvalue(std::string{\"writing the Lvalue\"}); \n\n    // equivalent, string created\n    // and sent by reference (&amp;&amp; bind to temporaries)\n    write_rvalue(std::string{\"writing the Rvalue\"});\n}\n</code></pre>\n\n<p>So why have function that takes rvalue references?</p>\n\n<p>It depends on what you do with the string. A mutable reference can be moved from:</p>\n\n<pre><code>std::string global_string;\n\nvoid write_lvalue(std::string const&amp; text) {\n    // copy, might cause allocation\n    global_string = text;\n}\n\nvoid write_rvalue(std::string&amp;&amp; text) {\n    // move, no allocation, yay!\n    global_string = std::move(text);\n}\n</code></pre>\n\n<p>So why using rvalue reference at all? Why not using mutable lvalue reference?</p>\n\n<p>That is because mutable lvalue references cannot be bound to temporaries:</p>\n\n<pre><code>void write_lvalue_mut(std::string&amp; text) {\n    // move, no allocation... yay?\n    global_string = std::move(text);\n}\n\nint main() {\n    std::string s = /* ... */;\n    write_lvalue_mut(std::move(s)); // fails\n    write_lvalue_mut(\"some text\"); // also fails\n}\n</code></pre>\n\n<p>But mutable rvalue reference can be bound to rvalue, as shown above.</p>\n"}], "owner": {"reputation": 42, "user_id": 5868856, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19438b6acc7c13d5696f0da37ba8e9d9?s=128&d=identicon&r=PG&f=1", "display_name": "anc", "link": "https://stackoverflow.com/users/5868856/anc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1798, "favorite_count": 1, "accepted_answer_id": 55619814, "answer_count": 2, "score": 8, "last_activity_date": 1554996935, "creation_date": 1554922574, "last_edit_date": 1554923137, "question_id": 55619550, "link": "https://stackoverflow.com/questions/55619550/rvalue-for-a-stdstring-parameter", "title": "rvalue for a std::string parameter", "body": "<p>What's the difference in practice between LVALUE and RVALUE in the following code when I pass the text?\nI mean, in this specific case of a string (where the string is a string literal), is there any benefit of using RVALUE (&amp;&amp;)?</p>\n\n<pre><code>void write_Lvalue(const std::string &amp;text) {\n    //...\n}\n\nvoid write_Rvalue(const std::string &amp;&amp;text) {\n    //...\n}\n\nint main() {\n    write_Lvalue(\"writing the Lvalue\");\n    write_Rvalue(\"writing the Rvalue\");\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "plugins", "vst", "juce"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10880597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2667979089879211/picture?type=large", "display_name": "William Wusik Kalfelz", "link": "https://stackoverflow.com/users/10880597/william-wusik-kalfelz"}, "edited": false, "score": 0, "creation_date": 1554930687, "post_id": 55619494, "comment_id": 97935713, "body": "SetParent works perfectly and it is compatible by Windows, as windows handles are 32 bits in size, so all is good. :-)"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 15, "user_id": 10880597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2667979089879211/picture?type=large", "display_name": "William Wusik Kalfelz", "link": "https://stackoverflow.com/users/10880597/william-wusik-kalfelz"}, "edited": false, "score": 0, "creation_date": 1554930769, "post_id": 55619494, "comment_id": 97935748, "body": "With windows it is compatible, VST windows are not aware of this."}, {"owner": {"reputation": 15, "user_id": 10880597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2667979089879211/picture?type=large", "display_name": "William Wusik Kalfelz", "link": "https://stackoverflow.com/users/10880597/william-wusik-kalfelz"}, "edited": false, "score": 0, "creation_date": 1555014814, "post_id": 55619494, "comment_id": 97972053, "body": "Indeed. I&#39;m getting some weird behaviour with SetParent, so I had to ditch the idea. Looks like the best option would be to screenshot the original window at X ms and send mouse event commands to it. Just need to figure out the later."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 15, "user_id": 10880597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2667979089879211/picture?type=large", "display_name": "William Wusik Kalfelz", "link": "https://stackoverflow.com/users/10880597/william-wusik-kalfelz"}, "edited": false, "score": 0, "creation_date": 1555015003, "post_id": 55619494, "comment_id": 97972143, "body": "In my library I use RDP to transfer data between machines."}, {"owner": {"reputation": 15, "user_id": 10880597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2667979089879211/picture?type=large", "display_name": "William Wusik Kalfelz", "link": "https://stackoverflow.com/users/10880597/william-wusik-kalfelz"}, "edited": false, "score": 0, "creation_date": 1555015564, "post_id": 55619494, "comment_id": 97972367, "body": "No, the data transfer is already working great. What I don&#39;t know is how to create and send mouse events to another window."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 15, "user_id": 10880597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2667979089879211/picture?type=large", "display_name": "William Wusik Kalfelz", "link": "https://stackoverflow.com/users/10880597/william-wusik-kalfelz"}, "edited": false, "score": 0, "creation_date": 1555016720, "post_id": 55619494, "comment_id": 97972776, "body": "VST3 supports sending  through its interfaces."}, {"owner": {"reputation": 15, "user_id": 10880597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2667979089879211/picture?type=large", "display_name": "William Wusik Kalfelz", "link": "https://stackoverflow.com/users/10880597/william-wusik-kalfelz"}, "edited": false, "score": 0, "creation_date": 1555184499, "post_id": 55619494, "comment_id": 98024680, "body": "Yeah, but I&#39;m mostly using VST2 for this. In the end here&#39;s what I did: I use the BringWindowToTop Windows command when the mouse clicks the parent interface or move/enters the parent area. And I screenshot the bridged UI with createSnapshotOfNativeWindow (JUCE function) ever 100ms. It works very good, actually. I just get the HWND from the bridged windows and everything else is easy to do. Thanks for the tips so far."}], "tags": [], "owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1554922337, "creation_date": 1554922337, "answer_id": 55619494, "question_id": 55619389, "link": "https://stackoverflow.com/questions/55619389/using-windows-handle-from-one-process-into-another-plugin-vst-audio/55619494#55619494", "title": "Using windows handle from one process into another (plugin vst audio)", "body": "<p>Windows handles are global (and also always in the lower 4GB so you can transfer them between x86/x64 apps) and you <a href=\"https://stackoverflow.com/questions/3459874/good-or-evil-setparent-win32-api-between-different-processes\">can do it</a> but when hosting VST plugins it's not advised to do so. You would have some hard time to marshal pointers between your applications and the VST SDK isn't designed with that in mind.</p>\n\n<p>The solution I follow is to use plain interop (usually COM but you can also use File Mapping) to transfer data between the editor and the host.</p>\n"}], "owner": {"reputation": 15, "user_id": 10880597, "user_type": "registered", "profile_image": "https://graph.facebook.com/2667979089879211/picture?type=large", "display_name": "William Wusik Kalfelz", "link": "https://stackoverflow.com/users/10880597/william-wusik-kalfelz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554922337, "creation_date": 1554921918, "question_id": 55619389, "link": "https://stackoverflow.com/questions/55619389/using-windows-handle-from-one-process-into-another-plugin-vst-audio", "title": "Using windows handle from one process into another (plugin vst audio)", "body": "<p>I created a 64 bits Plugin (VST JUCE) and it creates a new process that is a 32 bits application. In this application I host a 32 bits Plugin (VST JUCE).</p>\n\n<p>Now I wonder if it's possible to make the editor of the 32 bits process attach its editor to the main 64 bits plugin window handle. I could pass the original window handle using my piped process. And call:</p>\n\n<p>VSTPluginFormat::dispatcher(pluginLoad, 14, 0, 0, windowHandle, 0);</p>\n\n<p>The code 14 opens the editor.</p>\n\n<p>So the question is, does Windows allow this? Or are windows handle private to each program/process?</p>\n\n<p>If I could do this, I just need to figure out how to convert a windows handle void* into an int64 and send to my process. There I need to convert back from int64 to void*.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "static"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1554922114, "post_id": 55619385, "comment_id": 97931998, "body": "&quot;What are the differences&quot; - Negligible / irrelevant (with an optimizing compiler). Clarity/readability of the code matters <i>orders of magnitude</i> more."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1554924791, "post_id": 55619667, "comment_id": 97933153, "body": "The cost of such lock is neglectable on most modern platforms."}], "tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1554923093, "creation_date": 1554923093, "answer_id": 55619667, "question_id": 55619385, "link": "https://stackoverflow.com/questions/55619385/what-are-the-differences-object-size-performance-etc-between-a-function-tha/55619667#55619667", "title": "What are the differences (object size, performance, etc.) between a function that returns a local static and a function that returns a static member?", "body": "<p>A local static will incur the cost of an initialization guard (a mutex lock) on every call to the function. This is due to C++11 guaranteeing thread-safe initialization of statics, which for local statics means access serialization.</p>\n\n<p>A global static (which also includes static class members) does not incur that cost, since global static are initialized before <code>main()</code> runs.</p>\n\n<p>You can see the initialization guards in the generated assembly:</p>\n\n<p><a href=\"https://godbolt.org/z/BzdzvN\" rel=\"nofollow noreferrer\">https://godbolt.org/z/BzdzvN</a></p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "is_accepted": false, "score": 0, "last_activity_date": 1554923474, "last_edit_date": 1554923474, "creation_date": 1554923140, "answer_id": 55619682, "question_id": 55619385, "link": "https://stackoverflow.com/questions/55619385/what-are-the-differences-object-size-performance-etc-between-a-function-tha/55619682#55619682", "title": "What are the differences (object size, performance, etc.) between a function that returns a local static and a function that returns a static member?", "body": "<p>When you do do this</p>\n\n<pre><code>//ex.h\n#include &lt;vector&gt;\nusing intVec = std::vector&lt;int&gt;;\nstruct ex\n{\n    static intVec s_val;\n    intVec&amp; getVal();\n};\n\n//ex.cpp\n\nintVec ex::s_val = intVec(5);\n\nintVec&amp; ex::getVal()\n{\n    return s_val;\n}\n</code></pre>\n\n<p>Then the initialization code for instantiating the vector happens before <code>main()</code></p>\n\n<p>But if you do </p>\n\n<pre><code>//ex.h\n#include &lt;vector&gt;\nusing intVec = std::vector&lt;int&gt;;\nstruct ex\n{\n    intVec&amp; getVal();\n};\n\n//ex.cpp\nintVec&amp; ex::getVal()\n{\n    static intVec s_val = intVec(5);\n    return s_val;\n}\n</code></pre>\n\n<p>Then the initialization of the static variable (the constructor of <code>std::vector</code> being called) happens when you call the function for the first time.</p>\n\n<p><s>This can be an issue in multi-threaded contexts where it can lead to race-conditions, but in this case you're returning a mutable reference to a static <code>std::vector</code> so I'm assuming that threading doesn't matter for this specific case anyway.</s> (nvm. see Nikos answer to this question for why that's not longer a concern)</p>\n"}, {"comments": [{"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1554925575, "post_id": 55620167, "comment_id": 97933529, "body": "Google Benchmark shows the local static version being twice as slow as the global one."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1554925706, "post_id": 55620167, "comment_id": 97933584, "body": "@NikosC. SMYC - show me your code and compile switches. This is not supported by my observations."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1554925973, "post_id": 55620167, "comment_id": 97933695, "body": "<a href=\"https://pastebin.com/raw/veBZ9mwR\" rel=\"nofollow noreferrer\">Code</a>, <a href=\"https://pastebin.com/raw/0gDuZ2N5\" rel=\"nofollow noreferrer\">results</a>. Switches with GCC 8.3.0: <code>-std=c++17 -O3 bench.cpp -pthread -lbenchmark</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1554926153, "post_id": 55620167, "comment_id": 97933780, "body": "Did you just disable the optimizations???"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1554926275, "post_id": 55620167, "comment_id": 97933830, "body": "It&#39;s <code>-O3</code>. Unless you mean the <code>DoNotOptimize</code> wrap, which prevents the compiler from optimizing the expression away. Without that, the global static version is optimized away, making it appear like the local static version is 1000000% slower. Note that this does not disable optimization. It only protects the expression from being deleted by the compiler."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1554926902, "post_id": 55620167, "comment_id": 97934089, "body": "@NikosC. after examining that more carefully, I agree with those results and I believe they are inline with my answer. We are talking about access price of 0.6 ns vs 0.3 ns. Anything you would be doing with the object itself will likely dwarf those. So yes, minuscule price of 0.3 ns is paid, and yes, not significant for all but the tiniest minority of usage cases."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1554929510, "post_id": 55620167, "comment_id": 97935227, "body": "@PeterT it was not me who promised it to you."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1554925260, "creation_date": 1554925260, "answer_id": 55620167, "question_id": 55619385, "link": "https://stackoverflow.com/questions/55619385/what-are-the-differences-object-size-performance-etc-between-a-function-tha/55620167#55620167", "title": "What are the differences (object size, performance, etc.) between a function that returns a local static and a function that returns a static member?", "body": "<p>There is some misunderstanding there. If you declare a static member of the class, you can't initialize it in the constructor. You can obviously assign it in the constructor, but it will be assigned whenever a new object will be created (potentially multiple times) which probably doesn't make any sense for most applications.</p>\n\n<p>If you declare a static member, you should either make it a constexpr and initialize in-place, or initialize outside of class definition. The latter exposes you to all the glory of static initialization order fiasco, unless you can guarantee a compile-time initialization for your member.</p>\n\n<p>Function-local static has not issues with initialization order, and have a defined order. However, with function local static you'd pay a <strong>minuscule</strong> price of a branch (predicted) every time you call the function. For most applications, this is not even worth talking about.</p>\n"}], "owner": {"reputation": 25, "user_id": 11342168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e9310eeb380bd7be541b232b2a42e0?s=128&d=identicon&r=PG&f=1", "display_name": "Copperfield778", "link": "https://stackoverflow.com/users/11342168/copperfield778"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1554925514, "answer_count": 3, "score": -3, "last_activity_date": 1554928252, "creation_date": 1554921886, "last_edit_date": 1554928252, "question_id": 55619385, "link": "https://stackoverflow.com/questions/55619385/what-are-the-differences-object-size-performance-etc-between-a-function-tha", "closed_reason": "Needs more focus", "title": "What are the differences (object size, performance, etc.) between a function that returns a local static and a function that returns a static member?", "body": "<p>My derived class needs to provide a function that returns a std::vector&amp; to the caller.</p>\n\n<p>I could declare a static member and initialize it either in the constructor or in the 'global scope' of the CPP file.  I could also declare a local static in the derived function and return it. </p>\n\n<p>The first option has declaration, initialization and return functionality in three separate locations of the code, while the second option consolidates all three elements in the same place.  What are the object size, performance, etc. differences between these approaches?</p>\n\n<p>Edits start here after reading comments through SergeyA.  I am editing the code example of PeterT, adding a sample to show that the constructor utilizes push_back.  So I must admit to SergeyA that initialization does occur in the global scope and as written below, there are four separate locations where the variable s_val appears.</p>\n\n<pre><code>//ex.h\n#include &lt;vector&gt;\nusing intVec = std::vector&lt;int&gt;;\nstruct ex\n{\n    ex();\n    static intVec s_val;\n    intVec&amp; getVal();\n};\n\n//ex.cpp    \nintVec ex::s_val = intVec(5);\n\nex::ex()\n{\n    if (s_val.size() == 0) {\n        s_val.reserve(5);\n        s_val.push_back(1);\n        s_val.push_back(4);\n        s_val.push_back(0);\n        s_val.push_back(2);\n        s_val.push_back(3);\n    }\n    assert(s_val.size() == 5);\n}\n\nintVec&amp; ex::getVal()\n{\n    return s_val;\n}\n</code></pre>\n\n<p>I want to modernize and simplify the code to use an initializer list.  It sounds like returning a global static allows me to do that in a clean and efficient manner.  Is this correct ?</p>\n\n<pre><code>//ex.h\n#include &lt;vector&gt;\nusing intVec = std::vector&lt;int&gt;;\nstruct ex\n{\n    intVec&amp; getVal();\n};\n\n//ex.cpp    \nstatic intVec s_val = { 1, 4, 0, 2, 3 };\n\nintVec&amp; ex::getVal()\n{\n    assert(s_val.size() == 5);\n    return s_val;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1554922002, "post_id": 55619373, "comment_id": 97931956, "body": "Please narrow your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>  (emphasis on <b><i>minimal</i></b>) that exactly reproduces your problem as required here please."}, {"owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554923047, "post_id": 55619373, "comment_id": 97932430, "body": "Hello and thanks for taking the time to read the question. I just edited it to make is as minimal as possible"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1554923093, "post_id": 55619373, "comment_id": 97932448, "body": "You only declared those functions inside a class, not in the global scope"}, {"owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "edited": false, "score": 0, "creation_date": 1554923455, "post_id": 55619373, "comment_id": 97932603, "body": "@ UnholySheep, thanks for reading the question, can you please highlight the code solution?"}], "answers": [{"comments": [{"owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "edited": false, "score": 0, "creation_date": 1554996796, "post_id": 55630696, "comment_id": 97963641, "body": "@ K1why, thank for your answer! That was exactly what I was looking for! :)"}], "tags": [], "owner": {"reputation": 30, "user_id": 8332378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a047366bb17d662e92ab6209bd371d8?s=128&d=identicon&r=PG&f=1", "display_name": "K1why", "link": "https://stackoverflow.com/users/8332378/k1why"}, "is_accepted": true, "score": 1, "last_activity_date": 1554986651, "last_edit_date": 1554986651, "creation_date": 1554979774, "answer_id": 55630696, "question_id": 55619373, "link": "https://stackoverflow.com/questions/55619373/use-of-undelcared-identifier-inside-a-switch-case-loop-for-parsing-csv-files/55630696#55630696", "title": "Use of undelcared identifier inside a switch-case loop for parsing CSV files", "body": "<p>You need to create class object for using class-methods or make them static</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n    parseCSVRow_CTL_STATE ctl_parser;\n    parseCSVRow_GPS       gps_parser;\n\n    int i = 2;\n    switch (i)\n    {\n    case 1:\n\n        ctl_parser.execute_CTL_STATE_Parsing();\n        break;\n\n    case 2:\n\n        gps_parser.execute_GPS_Parsing();\n        break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 55630696, "answer_count": 1, "score": -4, "last_activity_date": 1554986651, "creation_date": 1554921861, "last_edit_date": 1554922997, "question_id": 55619373, "link": "https://stackoverflow.com/questions/55619373/use-of-undelcared-identifier-inside-a-switch-case-loop-for-parsing-csv-files", "title": "Use of undelcared identifier inside a switch-case loop for parsing CSV files", "body": "<p>I am parsing different <code>.csv</code> files so that from terminal as I run the application the program asks what the user would like to parse (e.g. the user can decide to parse a specific columns or the entire file - the choice is given inside the <code>main()</code>). However I have a <code>use of undeclared identifier</code> inside a <code>switch</code> <code>case</code> loop I am not sure how to take care inside <code>main</code>.</p>\n\n<p>I have many files to parse but I am including just a snippet of two files that replicates the error I have. The most important part of the code is below: </p>\n\n<pre><code>#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;ctime&gt;\n#include &lt;cstdio&gt;\n#include &lt;chrono&gt;\n#include &lt;atomic&gt;\n\nclass parseCSVRow_CTL_STATE\n{\npublic:\n    std::string const&amp; operator[](std::size_t index) const {\n        return m_data_CTL_STATE[index];\n    }    \n\n    std::size_t size() const {\n        return m_data_CTL_STATE.size();\n    }\n\n    void readNextRow_CTL_STATE(std::istream&amp; str) {\n        std::string line;\n        std::getline(str, line);\n        std::stringstream lineStream(line);\n        std::string cell;\n        m_data_CTL_STATE.clear();\n        while(std::getline(lineStream, cell, ',')) {\n            m_data_CTL_STATE.push_back(cell);\n        }\n        if(!lineStream &amp;&amp; cell.empty()) {\n            m_data_CTL_STATE.push_back(\"\");\n        }\n    }\n    void execute_CTL_STATE_Parsing();\n\nprivate:\n    std::vector&lt;std::string&gt; m_data_CTL_STATE;\n};\n\n\nclass parseCSVRow_GPS\n{\npublic:\n    std::string const&amp; operator[](std::size_t index) const {\n        return m_data_GPS[index];\n    }\n\n    std::size_t size() const {\n        return m_data_GPS.size();\n    }\n\n    void readNextRow_GPS(std::istream&amp; str) {\n        std::string line;\n        std::getline(str, line);\n        std::stringstream lineStream(line);\n        std::string cell;\n        m_data_GPS.clear();\n        while(std::getline(lineStream, cell, ',')) {\n            m_data_GPS.push_back(cell);\n        }\n        if(!lineStream &amp;&amp; cell.empty()) {\n            m_data_GPS.push_back(\"\");\n        }\n    }\n    void execute_GPS_Parsing();\n\nprivate:\n    std::vector&lt;std::string&gt; m_data_GPS;\n};\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; str, parseCSVRow_CTL_STATE&amp; data) {\n    data.readNextRow_CTL_STATE(str);\n    return str;\n}\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; str, parseCSVRow_GPS&amp; data) {\n    data.readNextRow_GPS(str);\n    return str;\n}\n// Files are analyzed here\nvoid parseCSVRow_CTL_STATE::execute_CTL_STATE_Parsing()\n{\n    std::ifstream file_CTL_STATE(\"/home/to/Desktop/float_controller_state_t_CTL_STATE.csv\");\n\n    parseCSVRow_CTL_STATE row_CTL_STATE;\n    int n;\n    std::cout &lt;&lt;\"Enter 0  to parse the entire file:: \"&lt;&lt;\"\\n\";\n    std::cout &lt;&lt;\"Enter 1  to search with TimeStamp:: \"&lt;&lt;\"\\n\";\n    std::cin&gt;&gt;n;\n    if(n==0) {\n    // Entire file is parsed\n    }\n    // Parsing according to TimeStamp\n    else if(n==1) {\n        std::string tm;\n        std::cout&lt;&lt;\"Enter the TimeStamp:: \";\n        // Additional operations\n    }\n}    \n\nvoid parseCSVRow_GPS::execute_GPS_Parsing()\n{\n    std::ifstream file_GPS(\"/home/to/Desktop/gps_gprmc_t_GPS_GPRMC_DATA.csv\");\n    parseCSVRow_GPS row_GPS;\n\n    int m;\n    std::cout &lt;&lt;\"Enter 0 to parse the entire file::      \"&lt;&lt;\"\\n\";\n    std::cout &lt;&lt;\"Enter 1 to search with Latitude::       \"&lt;&lt;\"\\n\";\n    // Same procedure as above but different headers\n}\n\n// Error here on main \nint main()\n{\n    int i = 2;\n    switch (i)\n    {\n    case 1:\n        execute_CTL_STATE_Parsing(); // &lt;-- use of undeclared identifier execute_CTL_STATE_Parsing\n        break;\n\n    case 2:\n        execute_GPS_Parsing(); // &lt;-- // &lt;-- use of undeclared identifier execute_GPS_Parsing\n        break;\n    }\n}\n</code></pre>\n\n<p>Can anyone explain what I am missing inside <code>main()</code> that is giving this error? </p>\n"}, {"tags": ["c++", "r", "amazon-web-services", "compiler-errors"], "comments": [{"owner": {"reputation": 3085, "user_id": 7309666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be91537cdd23587efcab0afbe2ed0023?s=128&d=identicon&r=PG&f=1", "display_name": "coder3101", "link": "https://stackoverflow.com/users/7309666/coder3101"}, "edited": false, "score": 0, "creation_date": 1554925367, "post_id": 55619370, "comment_id": 97933427, "body": "what is your gcc --version?"}, {"owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "reply_to_user": {"reputation": 3085, "user_id": 7309666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be91537cdd23587efcab0afbe2ed0023?s=128&d=identicon&r=PG&f=1", "display_name": "coder3101", "link": "https://stackoverflow.com/users/7309666/coder3101"}, "edited": false, "score": 0, "creation_date": 1554925479, "post_id": 55619370, "comment_id": 97933480, "body": "I started a brand new linux machine and got <code>gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2)</code>"}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1554958527, "post_id": 55619370, "comment_id": 97942079, "body": "Note that none of the <code>omp.h</code> files you found are for gcc version 7.2.1."}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "edited": false, "score": 0, "creation_date": 1555000339, "post_id": 55619370, "comment_id": 97965723, "body": "The new error log shows that <code>g++</code> is still used instead of <code>g++64</code>. What is the output of <code>R CMD config CXX</code>?"}, {"owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1555000584, "post_id": 55619370, "comment_id": 97965874, "body": "The output is g++64"}], "answers": [{"comments": [{"owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1554997690, "post_id": 55630967, "comment_id": 97964210, "body": "I&#39;m not sure how to make a config file. Do I just copy and paste those commands?"}, {"owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1554999402, "post_id": 55630967, "comment_id": 97965212, "body": "I added that, and I also installed Development Tools and ran <code>sudo sed -i &#39;s&#47;CC = gcc -m64&#47;CC = gcc64 -m64&#47;g&#39; &#47;usr&#47;lib64&#47;R&#47;etc&#47;Makeconf</code>, but I get the same error"}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1554999514, "post_id": 55630967, "comment_id": 97965273, "body": "@Cauder Please post the full error output after this change."}, {"owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1555000208, "post_id": 55630967, "comment_id": 97965647, "body": "I&#39;ll do that. Thanks Ralf."}, {"owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1555002917, "post_id": 55630967, "comment_id": 97966998, "body": "Is it possible that I should delete gcc 7.1 since my older version has an omp file?"}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1555003893, "post_id": 55630967, "comment_id": 97967456, "body": "@Cauder Some peopel had successs with that: <a href=\"https://forums.aws.amazon.com/thread.jspa?threadID=272761\" rel=\"nofollow noreferrer\">forums.aws.amazon.com/thread.jspa?threadID=272761</a>. But nore the caveat in the last message."}, {"owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 1, "creation_date": 1555003903, "post_id": 55630967, "comment_id": 97967460, "body": "Got it! These two lines fixed it <code>sudo yum remove gcc72-c++.x86_64 libgcc72.x86_64 sudo yum groupinstall &#39;Development Tools&#39;</code>"}, {"owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1555004032, "post_id": 55630967, "comment_id": 97967522, "body": "I see your link had the same information. If you add it to your post, I&#39;ll mark it as the correct answer. Thanks for your help, I&#39;m glad we got through this!"}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "edited": false, "score": 0, "creation_date": 1555004441, "post_id": 55630967, "comment_id": 97967721, "body": "@Cauder it makes more sense if you accept your own answer. I am not using Amazon Linux, so it I cannot give advise on which packages to install/remove. BTW, the final comment in <a href=\"https://stackoverflow.com/a/54111148/8416610\">stackoverflow.com/a/54111148/8416610</a> is also interesting. For some reason gcc 7.2 in Amazon Linux is compiled without OpenMP support."}], "tags": [], "owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "is_accepted": false, "score": 0, "last_activity_date": 1555001858, "last_edit_date": 1555001858, "creation_date": 1554980570, "answer_id": 55630967, "question_id": 55619370, "link": "https://stackoverflow.com/questions/55619370/fatal-error-auc-cpp210-fatal-error-omp-h-no-such-file-or-directory/55630967#55630967", "title": "Fatal error: auc_.cpp:2:10: fatal error: omp.h: No such file or directory", "body": "<p>You have configured R to use <code>gcc64</code>  when compiling C files, but C++ files will still be compiled with <code>g++</code> instead of <code>g++64</code>. The following configuration in <code>~/.R/Makevars</code> will change that consistently:</p>\n\n<pre><code>VER=64\nCC=gcc$(VER)\nCXX=g++$(VER)\nCXX11=g++$(VER)\nCXX14=g++$(VER)\n</code></pre>\n\n<p>Since the above does not work for you, you might be affected by the same issues as this user: <a href=\"https://stackoverflow.com/a/49876044/8416610\">https://stackoverflow.com/a/49876044/8416610</a> In that case you can edit R's <code>Makeconf</code> file with</p>\n\n<pre><code>sudo sed -i 's/g++/g++64/' $(R RHOME)/etc/Makeconf\n</code></pre>\n\n<p>(assuming you alredy changed <code>gcc</code>  to <code>gcc64</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "is_accepted": true, "score": 0, "last_activity_date": 1555003981, "creation_date": 1555003981, "answer_id": 55638237, "question_id": 55619370, "link": "https://stackoverflow.com/questions/55619370/fatal-error-auc-cpp210-fatal-error-omp-h-no-such-file-or-directory/55638237#55638237", "title": "Fatal error: auc_.cpp:2:10: fatal error: omp.h: No such file or directory", "body": "<p>It turns out that there was something wrong with the version of <code>gcc</code> on the linux box.</p>\n\n<p>Per the instructions <a href=\"https://stackoverflow.com/questions/48307251/aws-linux-server-install-r-package\">here</a>, I was able to fix the problem with these two lines of code.</p>\n\n<pre><code>sudo yum remove gcc72-c++.x86_64 libgcc72.x86_64\nsudo yum groupinstall 'Development Tools'\n</code></pre>\n"}], "owner": {"reputation": 1099, "user_id": 11117255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835dd0edaa3daddab1d1a524ba437871?s=128&d=identicon&r=PG&f=1", "display_name": "Cauder", "link": "https://stackoverflow.com/users/11117255/cauder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1290, "favorite_count": 0, "accepted_answer_id": 55638237, "answer_count": 2, "score": 0, "last_activity_date": 1555003981, "creation_date": 1554921856, "last_edit_date": 1554999922, "question_id": 55619370, "link": "https://stackoverflow.com/questions/55619370/fatal-error-auc-cpp210-fatal-error-omp-h-no-such-file-or-directory", "title": "Fatal error: auc_.cpp:2:10: fatal error: omp.h: No such file or directory", "body": "<p>I'm running RServer Studio on a Linux box on AWS.</p>\n\n<p>I tried to install <code>ModelMetrics</code>, a dependency for <code>caret</code>, and received this error:</p>\n\n<pre><code>auc_.cpp:2:10: fatal error: omp.h: No such file or directory\n #include &lt;omp.h&gt;\n          ^~~~~~~\ncompilation terminated.\nmake: *** [auc_.o] Error 1\nERROR: compilation failed for package \u2018ModelMetrics\u2019\n</code></pre>\n\n<p>This is the full output message</p>\n\n<pre><code>Installing package into \u2018/home/User/R/x86_64-pc-linux-gnu-library/3.5\u2019\n(as \u2018lib\u2019 is unspecified)\ntrying URL 'https://cran.rstudio.com/src/contrib/ModelMetrics_1.2.2.tar.gz'\nContent type 'application/x-gzip' length 16974 bytes (16 KB)\n==================================================\ndownloaded 16 KB\n\n* installing *source* package \u2018ModelMetrics\u2019 ...\n** package \u2018ModelMetrics\u2019 successfully unpacked and MD5 sums checked\n** libs\ng++  -I\"/opt/R/3.5.3/lib64/R/include\" -DNDEBUG  -I\"/home/User/R/x86_64-pc-linux-gnu-library/3.5/Rcpp/include\" -I/usr/local/include   -fpic  -g -O2  -c RcppExports.cpp -o RcppExports.o\ng++  -I\"/opt/R/3.5.3/lib64/R/include\" -DNDEBUG  -I\"/home/User/R/x86_64-pc-linux-gnu-library/3.5/Rcpp/include\" -I/usr/local/include   -fpic  -g -O2  -c auc_.cpp -o auc_.o\nauc_.cpp:2:10: fatal error: omp.h: No such file or directory\n #include &lt;omp.h&gt;\n          ^~~~~~~\ncompilation terminated.\nmake: *** [auc_.o] Error 1\nERROR: compilation failed for package \u2018ModelMetrics\u2019\n* removing \u2018/home/User/R/x86_64-pc-linux-gnu-library/3.5/ModelMetrics\u2019\nWarning in install.packages :\n  installation of package \u2018ModelMetrics\u2019 had non-zero exit status\n\nThe downloaded source packages are in\n    \u2018/tmp/Rtmpr06k8i/downloaded_packages\u2019\n</code></pre>\n\n<p>I looked around SO and it looks like there is an error with the compiler. I tried the solutions listed <a href=\"https://stackoverflow.com/questions/48576682/r-and-data-table-on-aws\">here</a>, specifically I ran these commands</p>\n\n<pre><code>yum groupinstall 'Development Tools'\nmkdir ~/.R\necho \"CC=gcc64\" &gt;&gt; ~/.R/Makevars\nsudo sed -i 's/CC = gcc -m64/CC = gcc64 -m64/g' /usr/lib64/R/etc/Makeconf\n</code></pre>\n\n<p>Even after restarting RStudio Server, I get the same output and error message.</p>\n\n<p>It looks like this error is very similar to the <a href=\"https://stackoverflow.com/questions/25990296/how-to-include-omp-h-in-os-x/52871786#52871786\">problem here</a>. I still don't have a solution after following those instructions, but I did find the location of my omp.h file.</p>\n\n<pre><code>/usr/lib/gcc/x86_64-amazon-linux/4.4.6/include/omp.h\n/usr/lib/gcc/x86_64-amazon-linux/4.8.5/include/omp.h\n/usr/lib/gcc/x86_64-amazon-linux/6.4.1/include/omp.h\n</code></pre>\n\n<p>I installed <code>Developer Tools</code> and updated the <code>Makeconf</code> file using these commands.</p>\n\n<pre><code>sudo sed -i 's/CC = gcc -m64/CC = gcc64 -m64/g' /usr/lib64/R/etc/Makeconf\nsudo yum groupinstall 'Development Tools'\n</code></pre>\n\n<p>Then, I added these lines to the <code>Makevars</code> config file.</p>\n\n<pre><code>mkdir ~/.R\nvi ~/.R/Makevars\n\nCC=gcc\nVER=64\nCC=gcc$(VER)\nCXX=g++$(VER)\nCXX11=g++$(VER)\nCXX14=g++$(VER)\n</code></pre>\n\n<p>I restarted the RStudio Server and tried to install <code>ModelMetrics</code> and received this error, the same as before.</p>\n\n<pre><code>Installing package into \u2018/home/User/R/x86_64-pc-linux-gnu-library/3.5\u2019\n(as \u2018lib\u2019 is unspecified)\ntrying URL 'https://cran.rstudio.com/src/contrib/ModelMetrics_1.2.2.tar.gz'\nContent type 'application/x-gzip' length 16974 bytes (16 KB)\n==================================================\ndownloaded 16 KB\n\n* installing *source* package \u2018ModelMetrics\u2019 ...\n** package \u2018ModelMetrics\u2019 successfully unpacked and MD5 sums checked\n** libs\ng++  -I\"/opt/R/3.5.3/lib64/R/include\" -DNDEBUG  -I\"/home/User/R/x86_64-pc-linux-gnu-library/3.5/Rcpp/include\" -I/usr/local/include   -fpic  -g -O2  -c RcppExports.cpp -o RcppExports.o\ng++  -I\"/opt/R/3.5.3/lib64/R/include\" -DNDEBUG  -I\"/home/User/R/x86_64-pc-linux-gnu-library/3.5/Rcpp/include\" -I/usr/local/include   -fpic  -g -O2  -c auc_.cpp -o auc_.o\nauc_.cpp:2:10: fatal error: omp.h: No such file or directory\n #include &lt;omp.h&gt;\n          ^~~~~~~\ncompilation terminated.\nmake: *** [auc_.o] Error 1\nERROR: compilation failed for package \u2018ModelMetrics\u2019\n* removing \u2018/home/User/R/x86_64-pc-linux-gnu-library/3.5/ModelMetrics\u2019\nWarning in install.packages :\n  installation of package \u2018ModelMetrics\u2019 had non-zero exit status\n\nThe downloaded source packages are in\n    \u2018/tmp/RtmpTSUlz4/downloaded_packages\u2019\n</code></pre>\n"}, {"tags": ["c++", "qt", "qgraphicsscene", "qgraphicsitem"], "answers": [{"tags": [], "owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "is_accepted": true, "score": 0, "last_activity_date": 1554923194, "creation_date": 1554923194, "answer_id": 55619699, "question_id": 55619007, "link": "https://stackoverflow.com/questions/55619007/how-to-sort-a-qlist-of-qgraphicsitem-by-coord-x-or-coord-y/55619699#55619699", "title": "How to sort a QList of QGraphicsitem by coord x or coord y?", "body": "<p>Just use <code>std::sort</code> with a custom compare function:</p>\n\n<pre><code>bool lessThan(QGraphicsItem * left, QGraphicsItem * right)\n{\n    return (left-&gt;x() &lt; right-&gt;x());\n}\n</code></pre>\n\n<pre><code>    QList&lt;QGraphicsItem *&gt; items;\n    auto* it1 = new QGraphicsRectItem(QRect(20, 10, 10, 10));\n    auto* it2 = new QGraphicsRectItem(QRect(20, 10, 10, 10));\n    auto* it3 = new QGraphicsRectItem(QRect(20, 10, 10, 10));\n    auto* it4 = new QGraphicsRectItem(QRect(20, 10, 10, 10));\n\n    it1-&gt;setPos(20, 0);\n    it2-&gt;setPos(10, 0);\n    it3-&gt;setPos(40, 0);\n    it4-&gt;setPos(15, 0);\n    items &lt;&lt; it1 &lt;&lt; it2 &lt;&lt; it3 &lt;&lt; it4;\n\n    std::sort(items.begin(), items.end(), lessThan);\n    for(QGraphicsItem * item: items)\n    {\n        qDebug() &lt;&lt; item-&gt;pos();\n    }\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11218737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/328e3369df7dfec147385fe7f36a8536?s=128&d=identicon&r=PG&f=1", "display_name": "davintxi", "link": "https://stackoverflow.com/users/11218737/davintxi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 55619699, "answer_count": 1, "score": 0, "last_activity_date": 1554923400, "creation_date": 1554920452, "question_id": 55619007, "link": "https://stackoverflow.com/questions/55619007/how-to-sort-a-qlist-of-qgraphicsitem-by-coord-x-or-coord-y", "title": "How to sort a QList of QGraphicsitem by coord x or coord y?", "body": "<p>I'm trying to find the best possible way to sort a QList of QGraphicsitems by the coord.x() or coord.y() of those items. I have searched a lot during months but couldn't yet find a solution,... it should be something like that,... sorry I'm noob,...I'm trying my best! Thank you! \n(an idea of how it should be...)</p>\n\n<pre><code>void sortedby()\n{\n    QList&lt;QGraphicsItem *&gt; allitems = items();\n    QList&lt;QGraphicsItem *&gt; alltypedos;\n        foreach(auto item, allitems) {\n        if(item-&gt;type() == chord::Type) {\n           alltypedos.append(item);\n        }\n    }\n    qSort(alltypedos.begin(), alltypedos.end(), item-&gt;x());\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "ubuntu", "qt-creator"], "comments": [{"owner": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 0, "creation_date": 1554920036, "post_id": 55618852, "comment_id": 97931023, "body": "Mesa has nothing with Qt, install development files for Qt libraries."}], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 5004766, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CEjn4.jpg?s=128&g=1", "display_name": "guitarpicva", "link": "https://stackoverflow.com/users/5004766/guitarpicva"}, "is_accepted": false, "score": 0, "last_activity_date": 1554920242, "creation_date": 1554920242, "answer_id": 55618964, "question_id": 55618852, "link": "https://stackoverflow.com/questions/55618852/qt-error-cannot-find-lqtcore-lqtgui-lqttest-qtopengl-lcore-on-linux-ubuntu/55618964#55618964", "title": "Qt error cannot find -lQtCore -lQtGui -lQtTest -QtOpenGl -lcore on linux ubuntu 16.04", "body": "<p>It appears that you do not have the Qt5 libraries installed on your system.  The libraries are included with the Qt Creator runtime, so it can always find them.  When you run an executable outside of Qt Creator, you must (typically) copy the libraries required to the folder where the executable has been placed.</p>\n\n<p>Check out the details in the docs.</p>\n\n<p><a href=\"https://doc.qt.io/qt-5/linux-deployment.html\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/linux-deployment.html</a></p>\n"}], "owner": {"reputation": 167, "user_id": 6078581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a662a688c4834a157177ecf5c3ad96d4?s=128&d=identicon&r=PG&f=1", "display_name": "panchester", "link": "https://stackoverflow.com/users/6078581/panchester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 586, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554925794, "creation_date": 1554919829, "last_edit_date": 1554925794, "question_id": 55618852, "link": "https://stackoverflow.com/questions/55618852/qt-error-cannot-find-lqtcore-lqtgui-lqttest-qtopengl-lcore-on-linux-ubuntu", "title": "Qt error cannot find -lQtCore -lQtGui -lQtTest -QtOpenGl -lcore on linux ubuntu 16.04", "body": "<p>I am using Qt 5.12.2 on a linux ubuntu 16.04 and when I execute a program I get an error saying that it is not finding -lQtCore, -lQtGui, -lQtTest, -lQtOpenGl and -lcore and I also get </p>\n\n<blockquote>\n  <p>collect2 error: ld returned 1 exit status.</p>\n</blockquote>\n\n<p>What can i do to fix this?</p>\n\n<p>I have already tried solving this using the command <code>sudo apt-get install libglu1-mesa-dev</code> and <code>sudo apt-get install mesa-common-dev</code></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1554919744, "post_id": 55618816, "comment_id": 97930862, "body": "You cannot use <code>case</code> like this. To do logic like that, you should use <code>if</code>, <code>else if</code>, <code>else</code>. To use <code>case</code> you should have integral types only"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1554920014, "post_id": 55618816, "comment_id": 97931010, "body": "I&#39;d recommend reading a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book</a> or two."}, {"owner": {"reputation": 1, "user_id": 11342066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d2c8fe01bfe6c7354693ea20dc558f?s=128&d=identicon&r=PG&f=1", "display_name": "justastudent", "link": "https://stackoverflow.com/users/11342066/justastudent"}, "edited": false, "score": 0, "creation_date": 1554920709, "post_id": 55618816, "comment_id": 97931326, "body": "Thank you cory! I suspected something similar!"}], "answers": [{"tags": [], "owner": {"reputation": 2920, "user_id": 1469714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/R5rUf.png?s=128&g=1", "display_name": "xryl669", "link": "https://stackoverflow.com/users/1469714/xryl669"}, "is_accepted": false, "score": -1, "last_activity_date": 1554992820, "last_edit_date": 1554992820, "creation_date": 1554920651, "answer_id": 55619068, "question_id": 55618816, "link": "https://stackoverflow.com/questions/55618816/anyone-familiar-by-c-program-on-codecademy-can-assist-with-a-noob-question/55619068#55619068", "title": "Anyone familiar by C++/ Program on Codecademy can assist with a noob question?", "body": "<p><code>switch(X)</code> is a \"jump to value\" shortcut. It's in the language because a very simple and effective optimization exists to implement this.</p>\n\n<p>For this optimization to work, the possible value must be static and known at compilation time. So you can not have a dynamic/runtime Y in your <code>case Y:</code> destination. </p>\n\n<p>The optimization is doing this way (simplified): </p>\n\n<ol>\n<li>Let's say you have a value that can go from 0 to 9. </li>\n<li>Create a switch on this value and 10 cases from 0 to 9.</li>\n<li>The compiler will create a table containing 10 entries (which are the address of the code in memory for each case)</li>\n<li>When testing the value, the compiler only have to jump to the address contained in the table at position <em>value</em>, unlike following a long if/else test chain.</li>\n</ol>\n\n<p>This will not work in your case, you'll have to create a chain of <code>if/else</code> like this:</p>\n\n<pre><code>enum House { gryffindor, hufflepuff, ravenclaw, slytherin };\n\nstd::string getHouse(House house, int &amp; max) {\n\nmax = 0;\nif (house == gryffindor) max = gryffindor;\nelse if (house == hufflepuff) max = hufflepuff;\nelse if (house == ravenclaw) max = ravenclaw;\nelse max = slytherin;\n\nswitch(max){\n     case gryffindor: return \"gryffindor\";\n     case hufflepuff: return \"hufflepuff\";\n     case ravenclaw : return \"revenclaw\";\n     case slytherin : return \"slytherin\";\n     default: return \"none\";\n        }    \n}\n</code></pre>\n\n<p>If you are not returning after a case, you must use <code>break;</code> to exits the <code>switch</code> block.</p>\n"}], "owner": {"reputation": 1, "user_id": 11342066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d2c8fe01bfe6c7354693ea20dc558f?s=128&d=identicon&r=PG&f=1", "display_name": "justastudent", "link": "https://stackoverflow.com/users/11342066/justastudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1554992820, "creation_date": 1554919642, "last_edit_date": 1554933336, "question_id": 55618816, "link": "https://stackoverflow.com/questions/55618816/anyone-familiar-by-c-program-on-codecademy-can-assist-with-a-noob-question", "title": "Anyone familiar by C++/ Program on Codecademy can assist with a noob question?", "body": "<p>I recently started on Codecademy, on the subject about conditions right now. I'm attempting to use both if + if else and switch + break + default. On the last step of this exercise i encountered this.</p>\n\n<p>Can we use case X>y?</p>\n\n<pre><code>int max = 0;\nstd::string house;\n\nswitch(max){\n      case gryffindor &gt; max : max = gryffindor;\n  house = \"gryffindor\";\n     case hufflepuff &gt; max : max = gryffindor;\n  house = \"hufflepuff\";\n     case ravenclaw &gt; max : max = gryffindor;\n  house = \"revenclaw\";\n     case slytherin &gt; max : max = gryffindor;\n  house = \"slytherin\";\n        }\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "cocos2d-x", "sfinae"], "comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1554921111, "post_id": 55618802, "comment_id": 97931519, "body": "Show the compiler error."}], "answers": [{"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 2, "last_activity_date": 1554923402, "creation_date": 1554923402, "answer_id": 55619749, "question_id": 55618802, "link": "https://stackoverflow.com/questions/55618802/cannot-be-explicitly-specialized-in-visual-studio-2017/55619749#55619749", "title": "Cannot be explicitly specialized in Visual Studio 2017", "body": "<p>I took the liberty to create a MCVE from your code.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nstruct A {\n    template&lt;typename T, typename std::enable_if&lt;!std::is_convertible&lt;T, A&gt;::value, int&gt;::type = 0&gt;\n    T getValue() {\n        return 1;\n    }\n    template&lt;typename T, typename std::enable_if&lt;std::is_convertible&lt;T, A&gt;::value, int&gt;::type = 0&gt;\n    T getValue() {\n        return T();\n    }\n};\n\ntemplate&lt;&gt;\ninline int A::getValue&lt;int, 0&gt;() {\n    return 3;\n}\n\nint main() {\n    A a;\n    return a.getValue&lt;int&gt;();\n}\n</code></pre>\n\n<p>Indeed, MSVC 2019 fails to compile it</p>\n\n<pre><code>&lt;source&gt;(15): error C2910: 'A::getValue': cannot be explicitly specialized\n</code></pre>\n\n<p>Whereas GCC and clang compile it just fine. <a href=\"https://gcc.godbolt.org/z/oxnGRz\" rel=\"nofollow noreferrer\">Live demo.</a></p>\n\n<p>Fortunately the solution is simple - just remove the explicit template parameters. They are superfluous anyway:</p>\n\n<pre><code>template&lt;&gt;\ninline int A::getValue() {\n    return 3;\n}\n</code></pre>\n\n<p>So for your case remove <code>&lt;int,nullptr&gt;</code> from</p>\n\n<pre><code>template &lt;&gt;\ninline int NRZNotification::getValue&lt;int,nullptr&gt;(const std::string&amp; key)\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 2139882, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ad118ed88efdc4d9bc42dfb0fa4b4b03?s=128&d=identicon&r=PG", "display_name": "noprops", "link": "https://stackoverflow.com/users/2139882/noprops"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 55619749, "answer_count": 1, "score": 1, "last_activity_date": 1554923402, "creation_date": 1554919580, "question_id": 55618802, "link": "https://stackoverflow.com/questions/55618802/cannot-be-explicitly-specialized-in-visual-studio-2017", "title": "Cannot be explicitly specialized in Visual Studio 2017", "body": "<p>I am making a game playable on mac and windows with cocos2d-x.</p>\n\n<p>I first wrote the code in Xcode, which could be run on mac.</p>\n\n<p>I got an error when I took it to Windows and tried to build in Visual Studio 2017.</p>\n\n<p>NRZNotification.h</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"cocos2d.h\"\n\nclass NRZNotification : public cocos2d::Ref\n{\nprotected:\n    std::string _name;\n    cocos2d::Ref* _sender;\n\n    ...\n\n    cocos2d::ValueMap _valueMap;\n    cocos2d::Map&lt;std::string, cocos2d::Ref*&gt; _objectMap;\npublic:\n    const std::string&amp; getName(){return _name;}\n    cocos2d::Ref* getSender(){return _sender;}\n\n    NRZNotification();\n    virtual ~NRZNotification();\n    static NRZNotification* create(const std::string&amp; name, Ref* sender);\n    bool init(const std::string&amp; name, Ref* sender);\n\n    ...\n\n    template &lt;typename T,\n    typename std::enable_if&lt;!std::is_convertible&lt;T, cocos2d::Ref*&gt;::value,\n    std::nullptr_t&gt;::type = nullptr&gt;\n    inline T getValue(const std::string&amp; key)\n    {\n        //CCLOG(\"%s\", __PRETTY_FUNCTION__);\n        return 0;\n    }\n    template &lt;typename T,\n    typename std::enable_if&lt;std::is_convertible&lt;T, cocos2d::Ref*&gt;::value,\n    std::nullptr_t&gt;::type = nullptr&gt;\n    inline T getValue(const std::string&amp; key)\n    {\n        //CCLOG(\"%s\", __PRETTY_FUNCTION__);\n        return dynamic_cast&lt;T&gt;(_objectMap.at(key));\n    }\n};\n#include \"NRZNotification_Private.h\"\n</code></pre>\n\n<p>NRZNotification_Private.h</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"NRZNotification.h\"\n\n...\n\n#pragma mark - get value\n\ntemplate &lt;&gt;\ninline int NRZNotification::getValue&lt;int,nullptr&gt;(const std::string&amp; key)\n{\n    if (_valueMap.find(key) == _valueMap.end()) {\n        return 0;\n    } else {\n        return _valueMap.at(key).asInt();\n    }\n}\ntemplate &lt;&gt;\ninline float NRZNotification::getValue(const std::string&amp; key)\n{\n    if (_valueMap.find(key) == _valueMap.end()) {\n        return 0.0f;\n    } else {\n        return _valueMap.at(key).asFloat();\n    }\n}\ntemplate &lt;&gt;\ninline double NRZNotification::getValue(const std::string&amp; key)\n{\n    if (_valueMap.find(key) == _valueMap.end()) {\n        return 0.0;\n    } else {\n        return _valueMap.at(key).asDouble();\n    }\n}\n\n...\n\n</code></pre>\n\n<p>These codes ran successfully on mac, but in Visual Studio 2017, calling getValue() gave the error \"cannot be explicitly specialized\".</p>\n\n<p>getValue() is a function template, and the implementation is divided according to whether the return value is a subclass of cocos2d::Ref.</p>\n\n<p>Furthermore, specialization is done for int, float, string, etc.</p>\n\n<p>How should I fix this code?</p>\n\n<p>I am using cocos2d-x 3.17.1.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "c++11", "constructor", "initialization"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1554919121, "post_id": 55618621, "comment_id": 97930573, "body": "I think <code>A a2{};</code> is doing member-wise initialization."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554919781, "post_id": 55618621, "comment_id": 97930873, "body": "@user4581301 it has to be C++11 or higher, or <code>A a2{};</code> and <code>B b2{};</code> would not compile, C++98/03 only accepted the form of <code>A a2 = {}</code>. You should put it up as the answer."}, {"owner": {"reputation": 83, "user_id": 11189322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68cbeeb110cb8bf8007c7a589bd5ce7?s=128&d=identicon&r=PG&f=1", "display_name": "R-tur", "link": "https://stackoverflow.com/users/11189322/r-tur"}, "edited": false, "score": 0, "creation_date": 1554920125, "post_id": 55618621, "comment_id": 97931068, "body": "I still don&#39;t get it - cppreference says explicitly that defaulted constructor is empty and its initializer list is also empty - so how is this member initialized to zero by compiler provided constructor if it is empty with empty initializer list?"}, {"owner": {"reputation": 83, "user_id": 11189322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68cbeeb110cb8bf8007c7a589bd5ce7?s=128&d=identicon&r=PG&f=1", "display_name": "R-tur", "link": "https://stackoverflow.com/users/11189322/r-tur"}, "edited": false, "score": 0, "creation_date": 1554920745, "post_id": 55618621, "comment_id": 97931341, "body": "I compile it as c++14"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1554921780, "post_id": 55618621, "comment_id": 97931847, "body": "The duplicate <a href=\"https://stackoverflow.com/questions/33441087/is-it-guaranteed-that-defaulted-constructor-initialize-built-in-types-automatica\">Is it guaranteed that defaulted constructor initialize built in types automatically to 0?</a> is close but not a very not a very good duplicate. Both exploit <a href=\"https://en.cppreference.com/w/cpp/language/zero_initialization\" rel=\"nofollow noreferrer\">Zero initialization</a>, but the dupe doesn&#39;t explain the crux of the question: Why <code>A</code> works and <code>B</code> doesn&#39;t. I&#39;ve removed the hold."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1554923032, "post_id": 55618621, "comment_id": 97932426, "body": "OK, everyone: <code>A</code> is not an aggregate (due to <code>A::m</code> being private), so it cannot be aggregate initialization."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554923248, "post_id": 55618621, "comment_id": 97932522, "body": "You know, I&#39;m just going to run this through MSVC14 and see what I get."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554923466, "post_id": 55618621, "comment_id": 97932608, "body": "In debug I get <code>a1.m=-858993460 a2.m=0 b1.m=-858993460 b2.m=-858993460</code> Note the &quot;garbage&quot; values all being identical. in Release however, I get <code>a1.m=0 a2.m=0 b1.m=0 b2.m=0</code>"}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554923573, "post_id": 55618621, "comment_id": 97932657, "body": "ah, here&#39;s the point of confusion, it&#39;s not aggregate-initialization, it&#39;s the supertype, <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/list_initialization</a>"}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554923758, "post_id": 55618621, "comment_id": 97932739, "body": "And the point of note: <i>If the braced-init-list is empty and T is a class type with a <b>default</b> constructor, value-initialization is performed.</i>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554923981, "post_id": 55618621, "comment_id": 97932817, "body": "And value initialization on a class with an explicitly-deleted default constructor zero initializes if construction is trivial."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554924171, "post_id": 55618621, "comment_id": 97932901, "body": "Basically, the <code>default</code> c&#39;tor does work as if it were empty, but list-initialization uses the <code>default</code>ing to trigger value-initialization which is not actually a function of the <code>default</code> c&#39;tor itself, and which the user-defined c&#39;tor does not perform."}], "answers": [{"comments": [{"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554924460, "post_id": 55619951, "comment_id": 97933016, "body": "This is incorrect, <i>list-initialization</i> will only <i>value-initialize</i> a <i>non-aggregate</i> if the type has a <code>default</code> constructor."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554924517, "post_id": 55619951, "comment_id": 97933035, "body": "@Tzalumen: Yes, and both types have default constructors."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554924657, "post_id": 55619951, "comment_id": 97933092, "body": "No, you misunderstand, list-initialization looks for <code>default</code> specifically. if it sees an empty c&#39;tor, it will not value-initialize. A has a <code>default</code> c&#39;tor, B has an empty c&#39;tor, A will value initialize during a list-initialization, B will not."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554924858, "post_id": 55619951, "comment_id": 97933177, "body": "@Tzalumen: I don&#39;t know what you mean by a &quot;<code>default</code> c&#39;tor&quot; as being distinct from an &quot;empty c&#39;tor&quot;. The <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.ctor#4\" rel=\"nofollow noreferrer\">standard makes no such distinction.</a> and <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init.list#3.4\" rel=\"nofollow noreferrer\">list initialization only says &quot;is a class type with a default constructor&quot;</a> Perhaps you could use standard wording to explain."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925030, "post_id": 55619951, "comment_id": 97933253, "body": "Implementing an empty constructor body results in compilation differences, notably the lack of a defined copy c&#39;tor which will cause special-case compilation errors with some STL operations."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925117, "post_id": 55619951, "comment_id": 97933289, "body": "@Tzalumen: &quot;<i>Implementing an empty constructor body results in compilation differences</i>&quot; An empty <i>default</i> constructor body, you mean. Yes, that is exactly the point I&#39;m getting across: a default constructor defined as <code>= default</code> is not, nor is intended to be, the same as a default constructor with an empty body."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925144, "post_id": 55619951, "comment_id": 97933304, "body": "Also, if I was WRONG about <code>A() = default;</code> not being equivalent to <code>A() {}</code> during list-initialization, we wouldn&#39;t even be here, as the observed behavioral difference would not be present."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925201, "post_id": 55619951, "comment_id": 97933334, "body": "@Tzalumen: I don&#39;t understand what you&#39;re talking about. I&#39;m saying that they are not equivalent. It&#39;s right there in the second, third, and fourth paragraphs. You are not wrong, nor am I wrong, because we&#39;re both <i>saying the same thing</i>. They both undergo value initialization, but what value initialization <i>does</i> is different."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925284, "post_id": 55619951, "comment_id": 97933382, "body": "Also <code>A() {}</code> is not an empty <code>default</code> c&#39;tor. it is an empty <code>no-arg</code> c&#39;tor, they are not the same thing. <code>default</code> is very specific to the implicit c&#39;tor and the explicit <code>default</code>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925344, "post_id": 55619951, "comment_id": 97933415, "body": "@Tzalumen: &quot;<i>they are not the same thing.</i>&quot; Yes, they are. It&#39;s <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.ctor#4\" rel=\"nofollow noreferrer\">right there in the C++ standard</a>: &quot;A default constructor for a class X is a constructor of class X for which each parameter that is not a function parameter pack has a default argument (<b><i>including the case of a constructor with no parameters</i></b>).&quot; Maybe you learned different terminology, but I&#39;m speaking standard-ese."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925396, "post_id": 55619951, "comment_id": 97933439, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/191622/discussion-between-nicol-bolas-and-tzalumen\">continue this discussion in chat</a>."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925482, "post_id": 55619951, "comment_id": 97933484, "body": "I cannot use the chat system from this computer, it is policy restricted."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925541, "post_id": 55619951, "comment_id": 97933515, "body": "@Tzalumen: Well, I don&#39;t really want to get into a long thread argument about this, so please go spend some time with the C++ standard. I&#39;ve given you some links; go look at them."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925814, "post_id": 55619951, "comment_id": 97933631, "body": "Your explanation does not explain why the RAII <code>A a1;</code> call to the defaulted no-arg c&#39;tor produces different results vs the list-initialization of <code>A a2{};</code>. The defaulted no-arg is clearly not value-initializing the members, while list-initialization is."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925923, "post_id": 55619951, "comment_id": 97933677, "body": "@Tzalumen: It doesn&#39;t need to, because that&#39;s not what the OP asked for."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554925950, "post_id": 55619951, "comment_id": 97933687, "body": "That is specifically part of what the user asked for, and was part of his code sample. If we&#39;re going to be pedantic, you didn&#39;t explain how to solve the headline question either."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554926004, "post_id": 55619951, "comment_id": 97933712, "body": "@Tzalumen: No, the OP <i>mentioned</i> it; the OP did not ask about it. The OP&#39;s question is about the difference between defaulted default constructor and user-provided default constructor behavior. It&#39;s right there in the title. And mentioned again in text: &quot;<i>So how the heck does it (in class A) initialize member &#39;m&#39; to zero when explicitly defined default constructor with empty body and empty initializer list does not.</i>&quot;"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554926250, "post_id": 55619951, "comment_id": 97933816, "body": "@Tzalumen: I added to paragraph 4 to more directly answer the title question."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554926905, "post_id": 55619951, "comment_id": 97934092, "body": "From that link to the standard (15.1 &#167;5), if you drop down to 15.1 &#167;7, you&#39;ll find that a default c&#39;tor as defined in &#167;5 will not value-initialize its members (acts as an empty initializer list), which brings me back to the original situation, that <b>list-initialization</b> specifically is performing some kind of special check and treating a default-defined c&#39;tor as different from an empty default c&#39;tor."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554928332, "post_id": 55619951, "comment_id": 97934718, "body": "@Tzalumen: And I explained exactly what that check is: it&#39;s called value initialization. Using <code>{}</code> on an object of class type <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init.list#3.4\" rel=\"nofollow noreferrer\">will perform value initialization on that object</a>, and <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init#8\" rel=\"nofollow noreferrer\">value initialization does the check for user-provided vs. defaulted</a>. It&#39;s all right there in my answer if you would just <b><i>read it</i></b>."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 2, "last_activity_date": 1554926212, "last_edit_date": 1554926212, "creation_date": 1554924349, "answer_id": 55619951, "question_id": 55618621, "link": "https://stackoverflow.com/questions/55618621/how-do-i-make-user-defined-empty-default-constructor-behave-like-compiler-define/55619951#55619951", "title": "How do I make user defined empty default constructor behave like compiler defined empty constructor", "body": "<p>Here's the basic idea. Both <code>A a2{};</code> and <code>B b2{};</code> will perform what is called \"<a href=\"https://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow noreferrer\">value initialization</a>\" on the two objects. However, the way value initialization behaves depends on how those types are defined.</p>\n\n<p><code>B</code> is an object which has a user-provided default constructor. \"User-provided\" being the term for when you provide a body for the default constructor. Because of that, value initialization will call the default constructor. That default constructor does not initialize its members, so the members remain uninitialized.</p>\n\n<p><code>A</code> is an object which does not have a user-provided default constructor. Nor does it have any other user-provided constructors. And the default constructor is not deleted either. And there are no default member initializers in <code>A</code>. Given all of that, value initialization will perform <em>zero initialization</em> on the object. Which means that it will write all zeros to the memory for that object before it comes into existence.</p>\n\n<p>That's what the rules say; the two do not behave the same, nor are they meant to. Nor is there anything you can do to make a user-provided default constructor act like a defaulted default constructor in <em>all</em> cases. You can make the user-provided constructor value initialize its members, but it would do so all the time, even if you use default initialization (<code>B b1;</code>, for example).</p>\n\n<p>Why do the rules say that? Because <code>= default</code> is <em>not supposed to</em> be equivalent to an empty constructor body. Indeed, being different is why <code>= default</code> <em>exists</em> as a feature.</p>\n\n<p>When you <code>= default</code> your default constructor, you are saying \"generate the default constructor as you normally would\". This is important, because there are things you can do which actively prevent the compiler from generating a default constructor for you. If you specify other constructors (which are not copy/move constructors), the compiler will not automatically generate one. So by using <code>= default</code> syntax, you're telling the compiler that you want the generated default constructor.</p>\n\n<p>By contrast, if you make an empty body in your default constructor, you are saying something totally different. You are explicitly saying, \"If a user calls my default constructor, I <em>want</em> my members to be default-initialized.\" That's what it means when you have an empty member initializer list in a constructor, after all. So that's what it should do.</p>\n\n<p>If <code>= default</code> and an empty body behaved the same, there would be no way for you to get that behavior, to say that you want default initialization of your members no matter what.</p>\n\n<p>Basically, Cppreference's statement is completely wrong; it does not have \"exactly the same effect as a user-defined constructor with empty body and empty initializer list\". Nor is it supposed to.</p>\n\n<hr>\n\n<p>If you want to understand the thinking of value initialization a bit further, consider this.</p>\n\n<pre><code>int i{};\n</code></pre>\n\n<p>That is guaranteed to produce a value of 0 for <code>i</code>. It is therefore reasonable that this:</p>\n\n<pre><code>struct S{int i;};\nS s{};\n</code></pre>\n\n<p>Should <em>also</em> produce a value of 0 for <code>s.i</code>. How does that happen? Because value initialization will zero-initialize <code>s</code>.</p>\n\n<p>So how does a user say that they don't want that, or want some special form of initialization? You communicate that the same way you communicate everything else: you add a constructor. Specifically, a default constructor that does the form of initialization you want.</p>\n"}, {"comments": [{"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554928218, "post_id": 55620202, "comment_id": 97934669, "body": "Finally, an answer that explains the observed behavior."}], "tags": [], "owner": {"reputation": 941, "user_id": 1849287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14e272de9cfe3615952604a7392ebdc?s=128&d=identicon&r=PG", "display_name": "Nellie Danielyan", "link": "https://stackoverflow.com/users/1849287/nellie-danielyan"}, "is_accepted": false, "score": 2, "last_activity_date": 1554928436, "last_edit_date": 1554928436, "creation_date": 1554925379, "answer_id": 55620202, "question_id": 55618621, "link": "https://stackoverflow.com/questions/55618621/how-do-i-make-user-defined-empty-default-constructor-behave-like-compiler-define/55620202#55620202", "title": "How do I make user defined empty default constructor behave like compiler defined empty constructor", "body": "<p>If any constructor is provided zero-initialization does not take place as stated <a href=\"https://en.cppreference.com/w/cpp/language/zero_initialization\" rel=\"nofollow noreferrer\">here</a></p>\n\n<blockquote>\n  <p>Zero initialization is performed in the following situations:</p>\n  \n  <p>...</p>\n  \n  <p>2) As part of value-initialization sequence for non-class types and for members of value-initialized class types <strong>that have no constructors</strong>, including value initialization of elements of aggregates for which no initializers are provided.</p>\n</blockquote>\n\n<p>Also <a href=\"https://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow noreferrer\">here</a></p>\n\n<blockquote>\n  <p>The effects of value initialization are:</p>\n  \n  <p>1) <strong>if T is a class type with at least one user-provided constructor of any kind, the default constructor is called;</strong></p>\n</blockquote>\n\n<p>Which makes sense. One should be able to control whether any additional operations can be added. If you provide a constructor, you take responsibility for your object initializations. </p>\n"}], "owner": {"reputation": 83, "user_id": 11189322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68cbeeb110cb8bf8007c7a589bd5ce7?s=128&d=identicon&r=PG&f=1", "display_name": "R-tur", "link": "https://stackoverflow.com/users/11189322/r-tur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 55619951, "answer_count": 2, "score": 8, "last_activity_date": 1554928648, "creation_date": 1554918801, "last_edit_date": 1554928648, "question_id": 55618621, "link": "https://stackoverflow.com/questions/55618621/how-do-i-make-user-defined-empty-default-constructor-behave-like-compiler-define", "title": "How do I make user defined empty default constructor behave like compiler defined empty constructor", "body": "<p>I've been trying to learn C++ for about a month and it still puzzles me. For example this 'easy' code:</p>\n\n<pre><code>class A\n{\n    int m;\npublic:\n    A() = default;\n    int getM() { return m; }\n};\n\nclass B\n{\n    int m;\npublic:\n    // empty body and empty initializer list\n    B() {} // isn't this the same as \"B() = default;\" ?\n    int getM() { return m; }\n\n};\n\nint main()\n{\n    A a1;\n    A a2{};\n\n    std::cout &lt;&lt; \"a1.m=\" &lt;&lt; a1.getM() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"a2.m=\" &lt;&lt; a2.getM() &lt;&lt; \"\\n\";\n\n    B b1;\n    B b2{};\n\n    std::cout &lt;&lt; \"b1.m=\" &lt;&lt; b1.getM() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"b2.m=\" &lt;&lt; b2.getM() &lt;&lt; \"\\n\";\n\n    std::cin.ignore();\n}\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>a1.m=...garbage\na2.m=0\nb1.m=...garbage\nb2.m=...garbage\n</code></pre>\n\n<p>According to <a href=\"https://en.cppreference.com/w/cpp/language/default_constructor\" rel=\"nofollow noreferrer\">CPP REFERENCE</a> default constructor defined by the compiler does have empty body and empty initializer list. So how the heck does it (in class A) initialize member 'm' to zero when explicitly defined default constructor with empty body and empty initializer list does not. According to cppreference excerpt:</p>\n\n<pre><code>If the implicitly-declared default constructor is not defined as deleted,  it is defined (that is, a function body is generated and compiled)\nby the compiler if odr-used, and it has exactly the same effect as a user-defined constructor with empty body and empty initializer list. \n</code></pre>\n\n<p>As far as I understand it both constructors should behave exactly the same way. Seems simple yet I do not get it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1554918263, "post_id": 55618475, "comment_id": 97930196, "body": "<b>WARNING</b>: Using <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\"><code>rand()</code> is highly problematic</a> and you\u2019re strongly encouraged to use an appropriate <a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">random number generator facility in the Standard Library</a> that produces high-quality random values. Your use of <code>time(NULL)</code> as a random number seed means that this will produce identical results if run in the same second, and on many platforms <code>rand()</code> is <a href=\"http://dilbert.com/strip/2001-10-25\" rel=\"nofollow noreferrer\"><i>barely</i> random at all</a>."}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 2, "creation_date": 1554918460, "post_id": 55618475, "comment_id": 97930292, "body": "Regarding the line: <code>long long int arr[n];</code> -- when <a href=\"http://coliru.stacked-crooked.com/a/f887c55f96959c7f\" rel=\"nofollow noreferrer\">I build this</a>, I get the warning &quot;ISO C++ forbids variable length array &#39;arr&#39; [-Wvla]&quot;. Therefore, I suggest you start there. One way would be to replace that line with <code>std::vector&lt;long long&gt; arr( n );</code>. For instance, <a href=\"http://coliru.stacked-crooked.com/a/b62fa27a4d7fd218\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554918871, "post_id": 55618475, "comment_id": 97930455, "body": "Why are you using <code>long long</code> for everything?   Seems you could use a more common type for the same result."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554920328, "post_id": 55618475, "comment_id": 97931160, "body": "Recommended watching: <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">rand() Considered Harmful</a>"}, {"owner": {"reputation": 1, "user_id": 8579443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1p8f2.jpg?s=128&g=1", "display_name": "Manas Bhardwaj", "link": "https://stackoverflow.com/users/8579443/manas-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1554925967, "post_id": 55618475, "comment_id": 97933693, "body": "Actually, I am doing a competetive programming problem. Just to test my naive and efficient algorithm I developed this program for multiple test cases."}, {"owner": {"reputation": 1, "user_id": 8579443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1p8f2.jpg?s=128&g=1", "display_name": "Manas Bhardwaj", "link": "https://stackoverflow.com/users/8579443/manas-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1554926020, "post_id": 55618475, "comment_id": 97933718, "body": "I am using <code>long long</code> in the code because of the constraints provided in the problem."}], "answers": [{"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554918743, "post_id": 55618602, "comment_id": 97930407, "body": "Should mention leaking memory as troublesome as well.  long long to store 0-9 is interesting too."}, {"owner": {"reputation": 2920, "user_id": 1469714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/R5rUf.png?s=128&g=1", "display_name": "xryl669", "link": "https://stackoverflow.com/users/1469714/xryl669"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554919148, "post_id": 55618602, "comment_id": 97930581, "body": "Yes, you&#39;re perfectly right but that&#39;s not the issue in the code right now, as far as I&#39;m understanding it. They are many way to improve this code, starting by adequate type for the data size, using vectors, not using <code>srand</code>/<code>rand</code> and trying to prove that a O(N^2) is slower than O(N) when N is so small, and taking a modulo of 0, correct indentation..."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554919356, "post_id": 55618602, "comment_id": 97930679, "body": "lol - yup.  The better thing would have been to have OP go to the debugger on the line of the crash and see if it was divide by 0, like we think, or something else."}], "tags": [], "owner": {"reputation": 2920, "user_id": 1469714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/R5rUf.png?s=128&g=1", "display_name": "xryl669", "link": "https://stackoverflow.com/users/1469714/xryl669"}, "is_accepted": false, "score": 0, "last_activity_date": 1554918664, "creation_date": 1554918664, "answer_id": 55618602, "question_id": 55618475, "link": "https://stackoverflow.com/questions/55618475/why-does-loop-runs-1-or-2-times-only-when-i-use-rand-function-in-c/55618602#55618602", "title": "Why does loop runs 1 or 2 times only when I use rand() function in c++", "body": "<p>This code is problematic:</p>\n\n<pre><code>while(t--){\n    long long int n;\n    n = rand()%10;\n    long long int arr[n];\n    for(long long int i=0;i&lt;n;i++){\n    arr[i] = rand()%10;\n    }\n</code></pre>\n\n<p>If you need a variable size array, you should use <code>long long int * arr = new long long int[n];</code> and <code>delete[] arr;</code> before the last closing brace of the <code>while</code> block.</p>\n"}, {"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554919267, "post_id": 55618682, "comment_id": 97930631, "body": "Show the line it does this in your answer - the <code>arr[i]%arr[j]</code> line or possibly the <code>max1%max2</code> line."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554919433, "post_id": 55618682, "comment_id": 97930720, "body": "Also, allocating 0 bytes then de-referencing it is also bad and is fixed by this..."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1554919729, "post_id": 55618682, "comment_id": 97930851, "body": "This comment confused me some - its not <i>this</i> mod which is bad when <code>rand</code> is used. its the fact that this mod may set <code>arr[I]</code> to 0 and a later mod uses that as the RHS."}, {"owner": {"reputation": 478, "user_id": 10344058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3207ec849f10bb519e1e1ab04336ad18?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Marshall", "link": "https://stackoverflow.com/users/10344058/tyler-marshall"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1554919778, "post_id": 55618682, "comment_id": 97930870, "body": "@MichaelDorgan feel free to edit post. I can&#39;t seem to mention the line where the mod occurs without being too wordy."}, {"owner": {"reputation": 478, "user_id": 10344058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3207ec849f10bb519e1e1ab04336ad18?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Marshall", "link": "https://stackoverflow.com/users/10344058/tyler-marshall"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1554919849, "post_id": 55618682, "comment_id": 97930912, "body": "@MikeVine exactly. The values generated here are what is used in the RHS later. Changing these values prevents mod by 0 later."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1554919874, "post_id": 55618682, "comment_id": 97930920, "body": "Honestly, the whole program is problematic.  Mention <code>number % 0</code> is bad.  Mention dynamic array of size 0 is bad.  Mention dynamic array instead of vector or new/delete is bad for leaks.  So much to mention..."}, {"owner": {"reputation": 1, "user_id": 8579443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1p8f2.jpg?s=128&g=1", "display_name": "Manas Bhardwaj", "link": "https://stackoverflow.com/users/8579443/manas-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1554926097, "post_id": 55618682, "comment_id": 97933757, "body": "Thanks for telling me about my mistakes. Ill surely take care next time while building such programs."}], "tags": [], "owner": {"reputation": 478, "user_id": 10344058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3207ec849f10bb519e1e1ab04336ad18?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Marshall", "link": "https://stackoverflow.com/users/10344058/tyler-marshall"}, "is_accepted": false, "score": 2, "last_activity_date": 1554919721, "last_edit_date": 1554919721, "creation_date": 1554919055, "answer_id": 55618682, "question_id": 55618475, "link": "https://stackoverflow.com/questions/55618475/why-does-loop-runs-1-or-2-times-only-when-i-use-rand-function-in-c/55618682#55618682", "title": "Why does loop runs 1 or 2 times only when I use rand() function in c++", "body": "<p>In addition to the memory leaks and not declaring a variable sized array correctly mentioned in the other answer, the issue is that you are performing the mod operation on values that could be 0.  This will force your program to exit.  To fix this, change</p>\n\n<pre><code>arr[i] = rand()%10;\n</code></pre>\n\n<p>to something like</p>\n\n<pre><code>arr[i] = rand()%10+1;\n</code></pre>\n\n<p>to prevent division by 0.</p>\n\n<p>EDIT: as mentioned by @Michael Dorgan, you should probably do the same for <code>n</code>. Change</p>\n\n<pre><code>n = rand()%10;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>n = rand()%10+1;\n</code></pre>\n\n<p>to prevent 0 length arrays from being allocated.</p>\n"}], "owner": {"reputation": 1, "user_id": 8579443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1p8f2.jpg?s=128&g=1", "display_name": "Manas Bhardwaj", "link": "https://stackoverflow.com/users/8579443/manas-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554919721, "creation_date": 1554918076, "last_edit_date": 1554918946, "question_id": 55618475, "link": "https://stackoverflow.com/questions/55618475/why-does-loop-runs-1-or-2-times-only-when-i-use-rand-function-in-c", "title": "Why does loop runs 1 or 2 times only when I use rand() function in c++", "body": "<p>I want to generate random test cases for my program, but it crashes after running 1 or 2 times.\nI have used rand() function to generate random numbers for random test cases\nbut it is not running after one or sometimes two times.. and does not generate any random number. The program simply exits.</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\n#include&lt;ctime&gt;\n#include &lt;time.h&gt;\nusing namespace std;\n\nlong long int naive(long long int arr[],long long int n){\n    long long int max=-1;\n    for(long long int i=0;i&lt;n;i++)\n    {\n        for(long long int j=0;j&lt;n;j++){\n            if(arr[i]%arr[j] &gt; max){\n                max = arr[i]%arr[j];\n            }\n        }\n    }\n    return max;\n}\n\nlong long int efficent(long long int arr[],long long int n){\n    long long int max1=0,max2=0;\n    for(long long int i=0;i&lt;n;i++){\n         if (arr[i] &gt; max1) \n        { \n            max2 = max1; \n            max1 = arr[i]; \n        } \n        else if (arr[i] &gt; max2 &amp;&amp; arr[i] != max1) \n            max2 = arr[i]; \n    }\n    return max2%max1;\n}\n\nint main(){\n    srand(time(0));\n    long long int count=0;\n    int t=10;\n    while(t--){\n      long long int n;\n      n = rand()%10;\n      long long int arr[n];\n      for(long long int i=0;i&lt;n;i++){\n        arr[i] = rand()%10;\n      }\n      long long int a,b;\n      a = naive(arr,n);\n      b = efficent(arr,n);\n      if(a == b)\n        cout&lt;&lt;\"Naive : \"&lt;&lt;a&lt;&lt;\"\\tEfficent : \"&lt;&lt;b&lt;&lt;\"\\n\";\n      else{\n        cout&lt;&lt;\"\\nNot Equal.\"&lt;&lt;\"\\nCount : \"&lt;&lt;++count&lt;&lt;endl;\n        cout&lt;&lt;\"Naive : \"&lt;&lt;a&lt;&lt;\"\\tEfficent : \"&lt;&lt;b&lt;&lt;\"\\n\";\n      }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "template-meta-programming"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1554921556, "post_id": 55618409, "comment_id": 97931725, "body": "Sorry but I don&#39;t understand what do you exactly want. Please, could you add some practical examples?"}, {"owner": {"reputation": 13, "user_id": 8333032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6478cee9db94ae9bdcaf7d7e4c629a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8333032/tim"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1554928198, "post_id": 55618409, "comment_id": 97934658, "body": "@max66 I have added what I hope is a clarifying edit."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8333032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6478cee9db94ae9bdcaf7d7e4c629a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8333032/tim"}, "edited": false, "score": 0, "creation_date": 1554930183, "post_id": 55621068, "comment_id": 97935527, "body": "Thanks! I realize now my clarification left out a key point. I can have MyObject and MyObject2 and MyObject3 etc. I thought I could solve that using something like unpack_sequence_impl above there I take two parameter packs as template arguments and deduce them by expanding them together but that does not seem to work."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": false, "score": 2, "last_activity_date": 1554929515, "last_edit_date": 1554929515, "creation_date": 1554929089, "answer_id": 55621068, "question_id": 55618409, "link": "https://stackoverflow.com/questions/55618409/how-can-a-recover-the-non-typename-template-argument-from-each-type-in-a-variadi/55621068#55621068", "title": "How can a recover the non-typename template argument from each type in a variadic pack of template classes?", "body": "<pre><code>template &lt;typename&gt;\nstruct MakeMyPack;\n\ntemplate &lt;int... Ns&gt;\nstruct MakeMyPack&lt;MyTuple&lt;MyObject&lt;Ns&gt;...&gt;&gt;\n{\n    using type = MyPack&lt;Ns...&gt;;\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b9ba9c915ae7d5ec\" rel=\"nofollow noreferrer\"><strong>DEMO</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8333032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6478cee9db94ae9bdcaf7d7e4c629a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8333032/tim"}, "edited": false, "score": 0, "creation_date": 1554932135, "post_id": 55621337, "comment_id": 97936263, "body": "Thanks! this worked like a charm. I didn&#39;t think to wrap the deduced packs into another pack to enable the deduction. You have saved me a lot of frustration."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 0, "last_activity_date": 1554930859, "last_edit_date": 1554930859, "creation_date": 1554930432, "answer_id": 55621337, "question_id": 55618409, "link": "https://stackoverflow.com/questions/55618409/how-can-a-recover-the-non-typename-template-argument-from-each-type-in-a-variadi/55621337#55621337", "title": "How can a recover the non-typename template argument from each type in a variadic pack of template classes?", "body": "<blockquote>\n  <p>For clarification what I am trying to accomplish is recovering the template arguments from one template class to use them in another. Below are three template classes: MyObject, MyTuple, MyPack. MyTuple takes MyObject objects as its template parameters. I want to recover the MyObject template parameters to use as the template argument for a MyPack object.</p>\n</blockquote>\n\n<p>Just for fun, I propose a solution more generic, with a double variadic template (template-template and value template), not bounded to <code>MyTuple</code> and <code>MyObject</code></p>\n\n<pre><code>template &lt;typename&gt;\nstruct getMyPack;\n\ntemplate &lt;template &lt;typename...&gt; class C,\n          template &lt;int&gt; class ... Cs, int ... Is&gt;\nstruct getMyPack&lt;C&lt;Cs&lt;Is&gt;...&gt;&gt;\n { using type = MyPack&lt;Is...&gt;; };\n</code></pre>\n\n<p>The following is a full compiling example</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;int&gt;\nstruct MyObject1\n { };\n\ntemplate &lt;int&gt;\nstruct MyObject2\n { };\n\ntemplate &lt;int...&gt;\nstruct MyPack\n { };\n\ntemplate &lt;typename...&gt;\nstruct MyTuple\n { };\n\ntemplate &lt;typename&gt;\nstruct getMyPack;\n\ntemplate &lt;template &lt;typename...&gt; class C,\n          template &lt;int&gt; class ... Cs, int ... Is&gt;\nstruct getMyPack&lt;C&lt;Cs&lt;Is&gt;...&gt;&gt;\n { using type = MyPack&lt;Is...&gt;; };\n\n\nint main ()\n {\n   using T0 = MyTuple&lt;MyObject1&lt;1&gt;, MyObject2&lt;2&gt;, MyObject1&lt;3&gt;&gt;;\n   using T1 = MyPack&lt;1, 2, 3&gt;;\n   using T2 = typename getMyPack&lt;T0&gt;::type;\n\n   static_assert( std::is_same&lt;T1, T2&gt;::value, \"!\" );\n }\n</code></pre>\n\n<p><strong>-- EDIT --</strong></p>\n\n<blockquote>\n  <p>Second clarification: MyTuple does not just take MyObject types but any type that has one template parameter of int.</p>\n</blockquote>\n\n<p>As I was suspecting.</p>\n\n<p>My solution is unboud to <code>MyObject</code> so should works.</p>\n\n<p>Preceding example modified to show it.</p>\n"}], "owner": {"reputation": 13, "user_id": 8333032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6478cee9db94ae9bdcaf7d7e4c629a?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8333032/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 55621337, "answer_count": 2, "score": 1, "last_activity_date": 1554930859, "creation_date": 1554917860, "last_edit_date": 1554930619, "question_id": 55618409, "link": "https://stackoverflow.com/questions/55618409/how-can-a-recover-the-non-typename-template-argument-from-each-type-in-a-variadi", "title": "How can a recover the non-typename template argument from each type in a variadic pack of template classes?", "body": "<p>I am trying to recover the non-typename template argument from a variadic pack of template classes (where each class has one non-type argument) so that I can use them as an integer sequence in another type.</p>\n\n<p>The code below shows what I have. The integer sequence / member sequence is cribbed from tuple.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;std::size_t... Integers&gt;\nstruct size_t_sequence {\n    using type = size_t_sequence&lt;Integers...&gt;;\n};\n\ntemplate &lt;std::size_t, typename&gt;\nstruct push_size_t_sequence;\n\ntemplate &lt;std::size_t I, std::size_t... Integers&gt;\nstruct push_size_t_sequence&lt;I, size_t_sequence&lt;Integers...&gt;&gt;\n    : size_t_sequence&lt;I, Integers...&gt; {};\n\ntemplate &lt;std::size_t N, std::size_t Head, std::size_t... Tail&gt;\nstruct make_size_t_sequence\n    : push_size_t_sequence&lt;Head, typename make_size_t_sequence&lt;N - 1, Tail...&gt;::type&gt;::type {};\n\ntemplate&lt;std::size_t I, std::size_t... OneLeft&gt;\nstruct make_size_t_sequence &lt;2, I, OneLeft...&gt; :\n    push_size_t_sequence&lt;I, size_t_sequence&lt;OneLeft...&gt;&gt;::type {};\n\n\n\ntemplate&lt;typename... Members&gt;\nstruct member_sequence {\n    using type = member_sequence&lt;Members...&gt;;\n};\ntemplate &lt;typename, typename&gt;\nstruct push_member_sequence;\n\ntemplate &lt;typename M, typename... Members&gt;\nstruct push_member_sequence&lt;M, member_sequence&lt;Members...&gt;&gt;\n    : member_sequence&lt;M, Members...&gt; {};\n\ntemplate &lt;std::size_t N, typename Head, typename... Tail&gt;\nstruct make_member_sequence\n    : push_member_sequence&lt;Head, typename make_member_sequence&lt;N - 1, Tail...&gt;::type&gt;::type {};\n\ntemplate&lt;typename M, typename... OneLeft&gt;\nstruct make_member_sequence &lt;2, M, OneLeft...&gt; :\n    push_member_sequence&lt;M, member_sequence&lt;OneLeft...&gt;&gt;::type {};\n\n\ntemplate&lt;typename&gt;\nstruct unpack_sequence_impl;\n\ntemplate&lt;template&lt;std::size_t&gt; class... T, std::size_t... DimensionSizes&gt;\nstruct unpack_sequence_impl&lt;member_sequence&lt;T&lt;DimensionSizes&gt;...&gt;&gt; {\n    using member_types = member_sequence&lt;T&lt;DimensionSizes&gt;...&gt;;\n    using size_types = size_t_sequence&lt;DimensionSizes...&gt;;\n};\n\ntemplate&lt;typename... Members&gt;\nstruct unpack_sequence : \n    unpack_sequence_impl&lt;make_member_sequence&lt;sizeof...(Members), Members...&gt;&gt; {\n    using base_t = unpack_sequence_impl&lt;make_member_sequence&lt;sizeof...(Members), Members...&gt;&gt;;\n    using member_types = typename base_t::member_types;\n    using size_types = typename base_t::size_types;\n};\n\n\ntemplate&lt;std::size_t N&gt;\nclass example {\n    int s = N;\n};\n\nint main()\n{\n    auto mem_sequence = make_member_sequence&lt;3, example&lt;3&gt;, example&lt;2&gt;, example&lt;1&gt;&gt;::type();\n    auto integer_sequence = make_size_t_sequence&lt;3, 3,2,1&gt;::type();\n    auto un_mem_sequence = unpack_sequence&lt;example&lt;3&gt;, example&lt;2&gt;, example&lt;1&gt;&gt;::member_types();\n    auto un_size_sequence = unpack_sequence&lt;example&lt;3&gt;, example&lt;2&gt;, example&lt;1&gt;&gt;::size_types();\n}\n\n</code></pre>\n\n<p>The types of <code>mem_sequence</code> and <code>integer_sequence</code> are <code>member_sequence&lt;example&lt;3&gt;,example&lt;2&gt;,example&lt;1&gt;&gt;</code> and <code>size_t_sequence&lt;3,2,1&gt;</code>. The types of <code>un_mem_sequence</code> and <code>un_size_sequence</code> should be the same.</p>\n\n<p>How can I accomplish this?</p>\n\n<p>Thank you for your help!</p>\n\n<p>Tim</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>For clarification what I am trying to accomplish is recovering the template arguments from one template class to use them in another. Below are three template classes: <code>MyObject</code>, <code>MyTuple</code>, <code>MyPack</code>. <code>MyTuple</code> takes <code>MyObject</code> objects as its template parameters. I want to recover the <code>MyObject</code> template parameters to use as the template argument for a <code>MyPack</code> object.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;int N&gt;\nMyObject;\n\ntemplate&lt;int... Ns&gt;\nMyPack;\n\ntemplate&lt;typename... MyObjects&gt;\nMyTuple {};\n\n\n\nint main() {\n    MyTuple&lt;MyObject&lt;1&gt;,MyObject&lt;2&gt;,MyObject&lt;3&gt;&gt; a;\n    MyPack&lt;1,2,3&gt; b;\n}\n</code></pre>\n\n<p>So I want to pull the arguments from the MyObject's in MyTuple to be used to create a MyPack.</p>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>Second clarification: <code>MyTuple</code> does not just take <code>MyObject</code> types but any type that has one template parameter of int.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;int N&gt;\nMyObject;\n\ntemplate&lt;int N&gt;\nMyObject2;\n\ntemplate&lt;int... Ns&gt;\nMyPack;\n\ntemplate&lt;typename... MyObjects&gt;\nMyTuple {};\n\n\n\nint main() {\n    MyTuple&lt;MyObject&lt;1&gt;,MyObject&lt;2&gt;,MyObject2&lt;1&gt;,MyObject2&lt;2&gt;&gt; a;\n    MyPack&lt;1,2,1,2&gt; b;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1554917836, "post_id": 55618390, "comment_id": 97929966, "body": "<code>char *p = &quot;Hello&quot;;</code> is not supposed to compile.  If you are using gcc use <code>-pedantic-erros</code> when compiling to turn off compiler extensions. (I really wish this was on by default)."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 1, "creation_date": 1554917936, "post_id": 55618390, "comment_id": 97930018, "body": "undefined behavior = works fine sometimes but is still undefined behavior"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1554917965, "post_id": 55618390, "comment_id": 97930031, "body": "@NathanOliver technically, it is valid but deprecated in C++03"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1554918021, "post_id": 55618390, "comment_id": 97930062, "body": "The two different quotes do different things. Double quotes: <code>&quot;A string of characters&quot;</code> inclose a string of characters, which has a type of <code>char const*</code> while Single Quotes: <code>&#39;X&#39;</code> incluse a single character which has a type of <code>char</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1554918034, "post_id": 55618390, "comment_id": 97930073, "body": "@Brian True, but the C++ tag refers to the current standard (C++17) so my comment is correct."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1554918241, "post_id": 55618390, "comment_id": 97930186, "body": "Note: <code>deprecated</code> means it is still valid. It just means that compiler should warn you that it is a bad idea. It will never be removed because it would break so much old code. So though Nathan is pedantically correct it is not relevant point that is muddying the actual discussion (and I would encourage him to remove his comments as it is confusing to a beginner)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1554920613, "post_id": 55618390, "comment_id": 97931294, "body": "@MartinYork Pedantically, the type of <code>&quot;A string of characters&quot;</code> is not <code>const char*</code>, it is <code>const char[23]</code>."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1554922032, "post_id": 55618390, "comment_id": 97931969, "body": "@NathanOliver the C++ tag doesn&#39;t refer to a specific version, that&#39;s why the tooltip for it suggests adding version-specific tags."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554922255, "post_id": 55618390, "comment_id": 97932077, "body": "@Tzalumen <a href=\"https://stackoverflow.com/tags/c%2b%2b/info\">It actually does</a>: <i>Unless the question explicitly mentions which version of the C++ standard that is used, it is assumed that the current version is used. That is, whichever version of ISO 14882 that ISO currently lists as active. Please have this in mind when answering or commenting on questions tagged c++.</i>"}, {"owner": {"reputation": 157, "user_id": 7200139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab71a47ac7bc3fc13e3943318577e46?s=128&d=identicon&r=PG&f=1", "display_name": "Dimfred", "link": "https://stackoverflow.com/users/7200139/dimfred"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1554923729, "post_id": 55618390, "comment_id": 97932728, "body": "@NathanOliver why should char <i>p = &quot;Hello&quot;; not compile? &quot;Hello&quot; is an array of char so char</i> is valid"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 157, "user_id": 7200139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab71a47ac7bc3fc13e3943318577e46?s=128&d=identicon&r=PG&f=1", "display_name": "Dimfred", "link": "https://stackoverflow.com/users/7200139/dimfred"}, "edited": false, "score": 1, "creation_date": 1554923829, "post_id": 55618390, "comment_id": 97932756, "body": "@Dimfred Because <code>&quot;Hello&quot;</code> is a <code>const char[N]</code> where <code>N</code> is the number of characters plus a null terminator.  Doing <code>char* foo = &quot;hello&quot;;</code> would strip the <code>const</code> off of the string literal so it should fail to compile as the only way to remove <code>const</code> is to use a c-style cast or <code>const_cast</code>."}, {"owner": {"reputation": 157, "user_id": 7200139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab71a47ac7bc3fc13e3943318577e46?s=128&d=identicon&r=PG&f=1", "display_name": "Dimfred", "link": "https://stackoverflow.com/users/7200139/dimfred"}, "edited": false, "score": 0, "creation_date": 1554976191, "post_id": 55618390, "comment_id": 97950524, "body": "Ahh got it thx."}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1555395342, "post_id": 55618390, "comment_id": 98084604, "body": "So the question in the title is actually a good question!"}], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 8671940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8abcb8960a5bf7f32db224a4588c49?s=128&d=identicon&r=PG&f=1", "display_name": "user123456789", "link": "https://stackoverflow.com/users/8671940/user123456789"}, "edited": false, "score": 0, "creation_date": 1554919317, "post_id": 55618652, "comment_id": 97930663, "body": "So doing this is also discarded (without using const)? -   <code>#include &lt;iostream&gt;  void test(char *str){     std::cout &lt;&lt; str &lt;&lt; std::endl; }  int main(){     test(&quot;Hello&quot;); }</code>"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 323, "user_id": 8671940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8abcb8960a5bf7f32db224a4588c49?s=128&d=identicon&r=PG&f=1", "display_name": "user123456789", "link": "https://stackoverflow.com/users/8671940/user123456789"}, "edited": false, "score": 0, "creation_date": 1554919480, "post_id": 55618652, "comment_id": 97930743, "body": "<code>discarded</code> is the wrong word. Pick your words carefully. There is an automatic conversion from <code>char const*</code> to <code>char*</code> that the compiler is allowed to to apply to <code>string literals</code>. That works here. It does not apply to genericly typed objects."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1554919489, "post_id": 55618652, "comment_id": 97930750, "body": "<code>double quote creates a string literal of type char const*</code> wrong, and the rest of explanation which is founded on this assumption is wrong too."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1554919684, "post_id": 55618652, "comment_id": 97930833, "body": "@SergeyA Care to explain? I am pretty certain that is the correct type of a string literal. Or are you saying that string literal is <code>char const[]</code>."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1554920045, "post_id": 55618652, "comment_id": 97931028, "body": "@SergeyA Added a note at the first mention and exact definition at the bottom."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1554920149, "post_id": 55618652, "comment_id": 97931083, "body": "Yes, they are of type <code>const char[]</code> and it is important. The way you structured your answer makes an incorrect claim in the very beginning, on which you build, and only in the very end you mention the correct definition. I disagree with that approach. I believe, the answer should use correct definitions all the way."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1554920225, "post_id": 55618652, "comment_id": 97931117, "body": "@SergeyA I am more than happy to make alterations to make this better. DO you want to discuss this?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1554920440, "post_id": 55618652, "comment_id": 97931217, "body": "Well, the way I&#39;d do it is to say what is it, and than base discussion on it. Truth it, it might not even be neccessary. There are plenty of duplicates: <a href=\"https://stackoverflow.com/questions/12517983/what-is-the-datatype-of-string-literal-in-c?noredirect=1&amp;lq=1\" title=\"what is the datatype of string literal in c\">stackoverflow.com/questions/12517983/&hellip;</a> <a href=\"https://stackoverflow.com/questions/3683602/single-quotes-vs-double-quotes-in-c-or-c\" title=\"single quotes vs double quotes in c or c\">stackoverflow.com/questions/3683602/&hellip;</a> possibly others."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1554920604, "post_id": 55618652, "comment_id": 97931289, "body": "Moved the definition to the top. Also added the important point of pointer decay."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1554922455, "post_id": 55618652, "comment_id": 97932167, "body": "@SergeyA I read the other questions. They don&#39;t answer this question very well. Especially for a beginner as there is a lot of implied information (or information that is not relevant). This question provides context for this situation."}, {"owner": {"reputation": 564, "user_id": 7298812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkDJ8dvUcEI/AAAAAAAAAAI/AAAAAAAAAII/QYtIn6oS_zg/photo.jpg?sz=128", "display_name": "Tzalumen", "link": "https://stackoverflow.com/users/7298812/tzalumen"}, "edited": false, "score": 0, "creation_date": 1554922679, "post_id": 55618652, "comment_id": 97932256, "body": "All the more reason to prefer <code>std::string</code> over <code>const char[]</code>, no risk of confusion to be had. Not to mention that the <code>const char[]</code> created with <code>operator&quot;&quot;()</code> has an implicit terminal <code>&#39;\\0&#39;</code>"}], "tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 0, "last_activity_date": 1554920448, "last_edit_date": 1554920448, "creation_date": 1554918935, "answer_id": 55618652, "question_id": 55618390, "link": "https://stackoverflow.com/questions/55618390/why-can-we-say-char-c-hello-in-c/55618652#55618652", "title": "Why can we say &#39; char *c = &quot;Hello&quot;; &#39; in C++", "body": "<p>The issue here is that C++ is a strongly typed language. You have to make sure the type on the right of an <code>=</code> is the same as the type on the left (or there is some well defined conversion that allows the compiler to convert between types).</p>\n\n<p>So we need to know what types literals are: Using a double quote creates a string literal of type <code>char const[]</code> while using a single quote creates a character literal of type <code>char const</code>.</p>\n\n<p>You will have to bear with me on the <code>const</code> part. That makes the discussion much more complicates so we will gloss over it initially.</p>\n\n<p>We also need to know that when arrays are used in expressions they very easily decay into pointers. So it most situations the type of <code>char const[]</code> will decay into <code>char const*</code>.</p>\n\n<p>This should work:</p>\n\n<pre><code>char const* p = \"Hello\";    // This is valid.\n                            // Both left and right sides have the same type.\n                            // After you consider the array decay into a pointer.\n</code></pre>\n\n<p>On the other hand</p>\n\n<pre><code>char const* p = 'H';        // The type on the right is `char const'\n                            // While the type on the right has a pointer in it.\n</code></pre>\n\n<p>Now there are some automatic conversions at play here.<br>\nIn the original C++03 the compiler was allowed to auto convert string literals from <code>char const*</code> to <code>char*</code>. This is a relic from the old C language that was not as strict on type checking as C++ is now. This allows for this:</p>\n\n<pre><code> char*       p = \"Hello\";    // Because there is an auto conversion\n                             // the compiler is allowed to make \n                             // the conversion from one type to another\n</code></pre>\n\n<p>Note in later versions of C++ this conversion has been deprecated. SO the compiler will warn you that this is dangerous (because you have removed the const from the type you are allowed to modify it, but the underlying object can't be modified so if you try it will blow up the program).</p>\n\n<p>So why can you assign <code>char const</code> to a <code>char</code>?</p>\n\n<pre><code>char  x = 'X';\n</code></pre>\n\n<p>Here you are copying the original object <code>char const</code> into an object of type <code>char</code> this is perfectly valid. You can not alter or chance the literal but you are allowed to make copies of it. So you can easily remove the outer <code>const</code> in an assignment expression.</p>\n\n<pre><code> char const* const y = \"Hello\";\n char const*       z = y;        // We remove the outer const\n                                 // from a pointer. But the inner\n                                 // const (of the object being pointed\n                                 // at) can not be removed so easily.\n\n                                 // This works because z is allowed to \n                                 // to be changed but hold a value a pointer\n                                 // to a value that can not be changed.\n</code></pre>\n\n<p>Looking at your comment:</p>\n\n<pre><code>#include &lt;iostream&gt;\nvoid test(char *str)\n{\n    std::cout &lt;&lt; str &lt;&lt; std::endl;\n}\n\nint main()\n{\n    test(\"Hello\");           // This is allowed in C++\n                             // Deprecated still means valid.\n                             // Just not a good idea\n\n                             // There is a allowed conversion from\n                             // char const* to char* for string literals.\n\n\n    char const* x = \"test\";\n    test(x);                 // This is NOT allowed.\n                             // You can not cast away this const.\n}\n</code></pre>\n\n<p>Note: Technically a string literal is <code>char const[]</code>. ie an array of const char. <strong>BUT</strong> when used in an expression arrays very easily decay into pointers and thus it is sometimes simpler to think of them as <code>char const*</code> but this thinking is abstract and you should know the underlying exact type.</p>\n"}], "owner": {"reputation": 323, "user_id": 8671940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8abcb8960a5bf7f32db224a4588c49?s=128&d=identicon&r=PG&f=1", "display_name": "user123456789", "link": "https://stackoverflow.com/users/8671940/user123456789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1554920448, "creation_date": 1554917771, "last_edit_date": 1554918894, "question_id": 55618390, "link": "https://stackoverflow.com/questions/55618390/why-can-we-say-char-c-hello-in-c", "title": "Why can we say &#39; char *c = &quot;Hello&quot;; &#39; in C++", "body": "<p>When I do- </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(){\n    char *p = \"Hello\";\n}\n</code></pre>\n\n<p>it works fine, but doing</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(){\n    char *p = 'H';\n    // OR\n    int *x = 5;\n\n}\n</code></pre>\n\n<p>gives an error: invalid conversion from 'char' to 'char*' [-fpermissive] / 'int' to 'int*'</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1554917548, "post_id": 55618269, "comment_id": 97929824, "body": "Your question seems... confused. I don&#39;t understand what the problem is with &quot;what to do when one of this meshs is removed or has its vertices changed??&quot;. Perhaps you should just try to put everything in a single VAO and then ask about the problems you encounter when doing so."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1554917807, "post_id": 55618269, "comment_id": 97929952, "body": "Usually you won&#39;t have to change meshes very much. For example you draw a square, changing the size of it should be done in shaders using transformation matrices. Same with 3D squeletal animations. And even if you have objects with different number of vertices, you can draw a subset of all vertex to be drawn and consider that an &quot;object&quot;"}, {"owner": {"reputation": 1, "user_id": 10566684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1975396695879872/picture?type=large", "display_name": "Adriano Lima", "link": "https://stackoverflow.com/users/10566684/adriano-lima"}, "edited": false, "score": 0, "creation_date": 1554918442, "post_id": 55618269, "comment_id": 97930280, "body": "It&#39;s not my case. I&#39;m writting an editor and my meshs has its geometry changed all the time :("}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1554920265, "post_id": 55618269, "comment_id": 97931132, "body": "Then find a way to reduce the number of mutable meshes or find another approach. Either way, this problem is much too broad for this site."}], "owner": {"reputation": 1, "user_id": 10566684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1975396695879872/picture?type=large", "display_name": "Adriano Lima", "link": "https://stackoverflow.com/users/10566684/adriano-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554917280, "creation_date": 1554917280, "question_id": 55618269, "link": "https://stackoverflow.com/questions/55618269/vao-memory-issue", "title": "VAO memory issue", "body": "<p>I need to draw a thousand of objects with OpenGL (3.3). \nI'm using one VAO for each object and I think it's the problem.</p>\n\n<p>Isolating the problem for test I notice that, in the code below, from point 0 to point 1 the process memory increases 800MB.</p>\n\n<pre><code>glewExperimental = GL_TRUE;\nGLenum initStatus = glewInit();\nassert(initStatus == GLEW_OK);\n\n// point 0\nfor (size_t i = 0; i &lt; 100000; i++)\n{\n    GLuint VAO;\n    glGenVertexArrays(1, &amp;VAO);\n    glBindVertexArray(VAO);\n}\n// point 1\n</code></pre>\n\n<p>What's the approach to handle this problem?\nI know it's possible to share one VAO for multiple meshes, but what to do when one of this meshs is removed or has its vertices changed??</p>\n"}, {"tags": ["c++", "noexcept"], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1554917005, "post_id": 55618192, "comment_id": 97929553, "body": "Ah, but then you must&#39;ve forgot, you can also use the <code>noexcept</code> identifier inside the <code>noexcept</code> operator inside the <code>noexcept</code> specifier, like so : <code>noexcept(noexcept(noexcept(yesexcept)));</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1554917089, "post_id": 55618192, "comment_id": 97929585, "body": "@SombreroChicken <i>noexception</i>?"}, {"owner": {"reputation": 761, "user_id": 7198015, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1045114908943982/picture?type=large", "display_name": "Jo&#227;o Pires", "link": "https://stackoverflow.com/users/7198015/jo%c3%a3o-pires"}, "edited": false, "score": 0, "creation_date": 1554918205, "post_id": 55618192, "comment_id": 97930165, "body": "@NathanOliver, but from the options I gave, which of them would give me the same result?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 761, "user_id": 7198015, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1045114908943982/picture?type=large", "display_name": "Jo&#227;o Pires", "link": "https://stackoverflow.com/users/7198015/jo%c3%a3o-pires"}, "edited": false, "score": 0, "creation_date": 1554919165, "post_id": 55618192, "comment_id": 97930591, "body": "@Jo&#227;oPires I believe A is the correct way to do it since it will either be a <code>T</code> or <code>T&amp;</code>.  Can&#39;t sayy 100% though so I didn&#39;t want to make it part of the answer.  That is why I like C best.  I don&#39;t have to think about what <code>Ts</code> is and how it will play with <code>decval</code>."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1554916942, "creation_date": 1554916942, "answer_id": 55618192, "question_id": 55617890, "link": "https://stackoverflow.com/questions/55617890/noexcept-variadic-is-nothrow-constructible-v/55618192#55618192", "title": "Noexcept variadic is_nothrow_constructible_v", "body": "<p>I prefer option C.  You can use the <a href=\"https://en.cppreference.com/w/cpp/language/noexcept\" rel=\"nofollow noreferrer\"><code>noexcept</code> operator</a> in the noexcept specifier and have it evaluate the call for you.  I find this a lot easier to read an understand since you use the expression you want to do for exception specifier.  In you case that would look like</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Test {\n    T test;\n\n    // C\n    template &lt;typename... Ts&gt;\n    Test(Ts &amp;&amp;... ts) noexcept(noexcept(T(std::forward&lt;Ts&gt;(ts)...)))\n        : test(std::forward&lt;Ts&gt;(ts)...) {\n    }\n};\n</code></pre>\n\n<p>And now the code says <code>Test(Ts &amp;&amp;... ts)</code> is noexcept if <code>T(std::forward&lt;Ts&gt;(ts)...)</code>is noexcept.</p>\n"}], "owner": {"reputation": 761, "user_id": 7198015, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1045114908943982/picture?type=large", "display_name": "Jo&#227;o Pires", "link": "https://stackoverflow.com/users/7198015/jo%c3%a3o-pires"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554916942, "creation_date": 1554915866, "question_id": 55617890, "link": "https://stackoverflow.com/questions/55617890/noexcept-variadic-is-nothrow-constructible-v", "title": "Noexcept variadic is_nothrow_constructible_v", "body": "<p>Which of them is the correct one and why?</p>\n\n<p>I think it's the first one because <code>Ts</code> already have the <code>&amp;&amp;</code> or <code>const &amp;</code> associated with the type but I like to be sure and there really isn't that many examples of this particular case of <code>noexcept</code>.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Test {\n    T test;\n\n    // A\n    template &lt;typename... Ts&gt;\n    Test(Ts &amp;&amp;... ts) noexcept(std::is_nothrow_constructible_v&lt;T, Ts...&gt;)\n        : test(std::forward&lt;Ts&gt;(ts)...) {\n    }\n\n    // B\n    template &lt;typename... Ts&gt;\n    Test(Ts &amp;&amp;... ts) noexcept(std::is_nothrow_constructible_v&lt;T, Ts &amp;&amp;...&gt;)\n        : test(std::forward&lt;Ts&gt;(ts)...) {\n    }\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1554916684, "post_id": 55617845, "comment_id": 97929379, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/120876/what-are-the-rules-for-calling-the-superclass-constructor\">What are the rules for calling the superclass constructor?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 1, "last_activity_date": 1554917875, "last_edit_date": 1554917875, "creation_date": 1554916920, "answer_id": 55618188, "question_id": 55617845, "link": "https://stackoverflow.com/questions/55617845/what-is-the-difference-between-two-types-of-defining-constructors-first-one-usi/55618188#55618188", "title": "what is the difference between two types of defining constructors? first one using &quot;:&quot; and the second one defining it in curly braces like functions", "body": "<h2>Initializer List</h2>\n\n<p>What you are missing is the initializer list.</p>\n\n<pre><code>Type::Type(Parameters)\n    : member1(init)       // This is the initializer list\n    , member2(init)\n{\n    Your code\n}\n</code></pre>\n\n<p>If you do not explicitly provide one then the compiler will do it for you using the default constructor for the parent class then a call to the default constructor for each member.</p>\n\n<p>So lets look at your class.</p>\n\n<pre><code>Student::Student(const std::string &amp; name, int age, const std::string &amp; course)\n{\n     // Code\n}\n</code></pre>\n\n<p>That is what you wrote. But this is what the compiler implemented.</p>\n\n<pre><code>Student::Student(const std::string &amp; name, int age, const std::string &amp; course)\n    : Person()\n    , course()\n{\n     // Code\n}\n</code></pre>\n\n<p>So because you did not do anything the compiler added it calls to the <code>Person</code> default constructor and <code>course (std::string)</code> default constructor.</p>\n\n<p>Now the problem comes if your base class does not have a default constructor. Then the compiler can not add the appropriate calls and will generate a compiler error.</p>\n\n<p>But there is also the issue that the way you are writing this is very inefficient as you are basically initializing all the members twice. Your calling the default constructor then in the <strong>Code</strong> section you are re-initializing the members with another value.</p>\n\n<pre><code>Student::Student(const std::string &amp; name, int age, const std::string &amp; course)\n    : Person(name, age)\n    , course()                       // Initialize it to empty here.\n{\n    course = \"[unassigned course]\";  // Re-Initialize it with info.\n}\n</code></pre>\n\n<p>You could simply do it once:</p>\n\n<pre><code>Student::Student()\n    : Person()                        // Note person must have a default constructor for this to work.\n    , course(\"[unassigned course]\")\n{}\n</code></pre>\n\n<h2>Temporary Object</h2>\n\n<pre><code>Student::Student(const std::string &amp; name, int age, const std::string &amp; course)\n{\n    Person(name, age);\n    // CODE.\n}\n</code></pre>\n\n<p>This is not doing what you think.<br>\nLets add the initializer list.</p>\n\n<pre><code>Student::Student(const std::string &amp; name, int age, const std::string &amp; course)\n    : Person()\n    , course()\n{\n    Person(name, age);   // This is creating a person object localy.\n                         // the person object has no name so is a\n                         // temporary variable and goes out of scope\n                         // at the ';'. So it is created and destroyed\n                         // in place before other code is executed.\n                         //\n                         // This does not help initialize the class.\n                         // It is creating a completely different\n                         // and independent object.\n    // CODE.\n}\n</code></pre>\n\n<p>You can see the execution here:</p>\n\n<pre><code>Hello from Person::Person()                       // Init parent\nHello from Person::Person(string, int)            // Init the temp object.\n                                                  // If you put a print in the destructor\n                                                  // You will also see that executed\n                                                  // Before the Student\n                                                  // This is also why the object has \"unknown name\" and 0 age. \n\nHello from Student::Student(string, int, string)  // Now we init the student\n[unknown name], 0\nPhysics\n</code></pre>\n\n<h2>Advice</h2>\n\n<p>Is there a valid scenario where you want initialized versions of the object? Personally I think not (if there are then ignore this) so get rid of the default constructors of <code>Person</code> and <code>Student</code>. Then you can not create uninitialized <code>Students</code> or `People.</p>\n"}], "owner": {"reputation": 1, "user_id": 11331014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c369a7cd45e55f75383fa8961ece818f?s=128&d=identicon&r=PG&f=1", "display_name": "SaeedShekari", "link": "https://stackoverflow.com/users/11331014/saeedshekari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 55618188, "answer_count": 1, "score": -4, "last_activity_date": 1554921462, "creation_date": 1554915653, "last_edit_date": 1554921462, "question_id": 55617845, "link": "https://stackoverflow.com/questions/55617845/what-is-the-difference-between-two-types-of-defining-constructors-first-one-usi", "title": "what is the difference between two types of defining constructors? first one using &quot;:&quot; and the second one defining it in curly braces like functions", "body": "<p>I have problem in defining constructors for classes and the way I have defined them earlier, doesn't work here properly.</p>\n\n<p>This is for edx c++ intermediate course. when I try to define a class that inherits from some other class, referring to my base class with a constructor doesn't work properly and so my new class won't be defined correctly. What's the difference between the first use of constructors in the first code (using \":\" notation that works properly), and the second one in second code (defining like function, that I have used before properly and doesn't work here)?</p>\n\n<p>I have a base class called Person and a Student class that inherits from the base class. When I try to initialize a Student object that calls one of Person class constructors, it gives wrong answers. I think this is because of the way I define constructors. I make them like functions and initialize variables in curl braces. I have used this method earlier and it was working properly, but it doesn't work here. But the standard method using \":\" before curly braces works properly here. I want to know what is the difference between these two?</p>\n\n<p>Person.h:</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n\nclass Person\n{\nprivate:\n    std::string name;\nprotected:\n    int age;\npublic:\n    Person();\n    Person(const std::string &amp; name, int age);\n    void displayNameAge() const;\n};\n</code></pre>\n\n<p>Person.cpp:</p>\n\n<pre><code>#include \"pch.h\"\n#include \"Person.h\"\n#include &lt;iostream&gt;\n\n//Person::Person()\n//  : name(\"[unknown name]\"), age(0)\n//{\n//  std::cout &lt;&lt; \"Hello from Person::Person()\" &lt;&lt; std::endl;\n//}\nPerson::Person()\n{\n    name = \"[unknown name]\";\n    age = 0;\n    std::cout &lt;&lt; \"Hello from Person::Person()\" &lt;&lt; std::endl;\n}\n\nPerson::Person(const std::string &amp; name, int age)\n{\n    this-&gt;name = name;\n    this-&gt;age = age;\n    std::cout &lt;&lt; \"Hello from Person::Person(string, int)\" &lt;&lt; std::endl;\n}\n\n//Person::Person(const std::string &amp; name, int age)\n//  : name(name), age(age)\n//{\n//  std::cout &lt;&lt; \"Hello from Person::Person(string, int)\" &lt;&lt; std::endl;\n//}\n\n\nvoid Person::displayNameAge() const\n{\n    std::cout &lt;&lt; name &lt;&lt; \", \" &lt;&lt; age &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Student.h:</p>\n\n<pre><code>#pragma once\n#include \"Person.h\" \n\nclass Student : public Person\n{\nprivate:\n    std::string course;\npublic:\n    Student();\n    Student(const std::string &amp; name, int age, const std::string &amp; course);\nvoid displayCourse() const;\n};\n</code></pre>\n\n<p>Student.cpp:</p>\n\n<pre><code>#include \"pch.h\"\n#include \"Student.h\"\n#include &lt;iostream&gt;\n\nStudent::Student()\n{\n    course = \"[unassigned course]\";\n    std::cout &lt;&lt; \"Hello from Student::Student()\" &lt;&lt; std::endl;\n}\n\n// first method: the right one\n//Student::Student(const std::string &amp; name, int age, const std::string &amp; course)\n//  : Person(name, age), course(course)\n//{\n//  std::cout &lt;&lt; \"Hello from Student::Student(string, int, string)\" &lt;&lt; std::endl;\n//}\n// second method: the wrong one\nStudent::Student(const std::string &amp; name, int age, const std::string &amp; course)\n{\n    Person(name, age);\n    this-&gt;course = course;\n    std::cout &lt;&lt; \"Hello from Student::Student(string, int, string)\" &lt;&lt; std::endl;\n}\n\nvoid Student::displayCourse() const\n{\n    std::cout &lt;&lt; course &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include \"pch.h\"\n#include \"Student.h\"\n int main()\n {\n     // Create a Student object using the no-argument constructor.\n     Student Student1;\n     Student1.displayNameAge();\n     Student1.displayCourse();\n\n     // Create a Student object using the parameterized constructor.\n     Student Student2(\"Jane Smith\", 25, \"Physics\");\n     Student2.displayNameAge();\n     Student2.displayCourse();\n\n     return 0;\n }\n</code></pre>\n\n<p>expected result:</p>\n\n<pre><code>Hello from Person::Person()\nHello from Student::Student()\n[unknown name], 0\n[unassigned course]\nHello from Person::Person(string, int)\nHello from Student::Student(string, int, string)\nJane Smith, 25\nPhysics\n</code></pre>\n\n<p>actual result:</p>\n\n<pre><code>Hello from Person::Person()\nHello from Student::Student()\n[unknown name], 0\n[unassigned course]\nHello from Person::Person()\nHello from Person::Person(string, int)\nHello from Student::Student(string, int, string)\n[unknown name], 0\nPhysics\n</code></pre>\n"}, {"tags": ["c++", "performance", "parameter-passing", "template-meta-programming"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1554915650, "post_id": 55617795, "comment_id": 97928890, "body": "If the implementation for pass-by-value and pass-by-reference would be the same, you can just use a <code>std::conditional_t</code> to determine the argument type instead of using <code>enable_if</code>. The advantage is you only have to write the function once, avoiding repeating yourself."}, {"owner": {"reputation": 489, "user_id": 9834214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9B9BA.png?s=128&g=1", "display_name": "Fourmet", "link": "https://stackoverflow.com/users/9834214/fourmet"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1554916777, "post_id": 55617795, "comment_id": 97929418, "body": "Didn&#39;t think of it. However when I try it, the compiler becomes unable to deduce the <code>argument T</code>..."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1554916967, "post_id": 55617795, "comment_id": 97929532, "body": "That&#39;s a good point, you won&#39;t be able to perform template deduction directly, and you can&#39;t explicitly give template arguments for an operator. You could have <code>operator()</code> forward perfectly to a private function that actually implements the behavior, but at that point I&#39;m not sure it&#39;s still worth it."}], "answers": [{"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 1, "last_activity_date": 1554968407, "last_edit_date": 1554968407, "creation_date": 1554919376, "answer_id": 55618762, "question_id": 55617795, "link": "https://stackoverflow.com/questions/55617795/when-to-pass-by-copy-reference/55618762#55618762", "title": "When to pass by copy / reference?", "body": "<h3>Some checks are redundant:</h3>\n\n<p>All fundamental types and pointer types are also trivial. Admittedly, some fundamental types could be bigger than <code>void*</code> (pointers to member / member function, though they are likely larger, are not detected by <code>std::is_pointer</code>).</p>\n\n<h3>This is over-constraining:</h3>\n\n<p>Being trivially copyable is enough, trivial default-constructibility is irrelevant. One might even make a case for trivial destructibility alone to be sufficient.</p>\n\n<pre><code>template &lt;class T&gt;\nusing prefer_copy = std::bool_constant&lt;std::is_trivially_copyable&lt;T&gt;() &amp;&amp; sizeof(T) &lt;= sizeof(std::max_align_t)&gt;;\n</code></pre>\n\n<h3>You will be writing the implementation twice</h3>\n\n<p>If your compiler allows you to force inlining (not standardised, but nearly every compiler allows it somehow), you can delegate to that singular common implementation and get it inlined.</p>\n"}], "owner": {"reputation": 489, "user_id": 9834214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9B9BA.png?s=128&g=1", "display_name": "Fourmet", "link": "https://stackoverflow.com/users/9834214/fourmet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 55618762, "answer_count": 1, "score": 4, "last_activity_date": 1554968407, "creation_date": 1554915440, "last_edit_date": 1554918007, "question_id": 55617795, "link": "https://stackoverflow.com/questions/55617795/when-to-pass-by-copy-reference", "title": "When to pass by copy / reference?", "body": "<p>Say I have two templates for an <code>operator=</code> overloading :</p>\n\n<pre><code>class MyClass {\npublic:\n    template &lt;typename T&gt;\n    std::enable_if_t&lt;true == /* a condition */, MyClass&amp;&gt;\n    operator=(T value) {\n        std::cout &lt;&lt; \"Pass by copy\" &lt;&lt; std::endl;\n    }\n\n    template &lt;typename T&gt;\n    std::enable_if_t&lt;false == /* a condition */, MyClass&amp;&gt;\n    operator=(const T &amp;value) {\n        std::cout &lt;&lt; \"Pass by reference\" &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>What would be the most optimal condition to use with <code>std::enable_if</code> ?</p>\n\n<p>I came up with this :</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct pass_copy_cond : std::conditional&lt;\n        std::is_fundamental&lt;T&gt;::value ||\n        std::is_pointer&lt;T&gt;::value ||\n        (std::is_trivial&lt;T&gt;::value &amp;&amp; sizeof(T) &lt; sizeof(void*))\n    , std::true_type, std::false_type&gt;::type {};\n</code></pre>\n\n<p>Is there a way to improve the condition ?</p>\n"}, {"tags": ["c++", "c-preprocessor", "ternary-operator"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1554914969, "post_id": 55617552, "comment_id": 97928562, "body": "Well, it&#39;s 2 lines of code vs 4, so it&#39;s 100% better ;) Seriously though I can&#39;t think of a technical reason where one is better then the other.  Looks like a style decision."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 1, "creation_date": 1554916175, "post_id": 55617552, "comment_id": 97929143, "body": "Is there a difference? The compiled code will probably be the same for both. In terms of language 1 is an expression, 2 is a statement. So you can stuff 1 into ternaries and/or chain them using commas I guess? Not that that is actually a good idea."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1554916725, "post_id": 55617552, "comment_id": 97929399, "body": "@NathanOliver <i>&quot;Looks like a style decision.&quot;</i> Agreed from my side. Finally would make that question POB."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554917331, "post_id": 55617552, "comment_id": 97929709, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: See edit."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1554917815, "post_id": 55617552, "comment_id": 97929955, "body": "@jakub_d: I actually think there isn&#39;t, wanted to make sure I wasn&#39;t missing something obscure. See edit."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554918358, "post_id": 55617552, "comment_id": 97930240, "body": "@einpoklum Yeah, the edit makes it better. I can&#39;t help though having a feeling you have a trend to ask <i>&quot;slightly odd&quot;</i> questions, and even answer odd questions here. No offence, thinking <i>the odd way</i> maybe a great impulse for creativity and innowation."}], "answers": [{"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 0, "last_activity_date": 1554917895, "creation_date": 1554917895, "answer_id": 55618425, "question_id": 55617552, "link": "https://stackoverflow.com/questions/55617552/wrapping-in-do-while-0-vs-wrapping-in-a-ternary-operator-with-void0/55618425#55618425", "title": "wrapping in do-while-0 vs wrapping in a ternary operator with (void)0", "body": "<p>So, my skillz tell me that <code>CHECK_1</code> and <code>CHECK_2</code> should be entirely equivalent and only a matter of style. I can't think of why this might not be the case. @NathanOliver seems to agree.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1554917895, "creation_date": 1554914610, "last_edit_date": 1554917262, "question_id": 55617552, "link": "https://stackoverflow.com/questions/55617552/wrapping-in-do-while-0-vs-wrapping-in-a-ternary-operator-with-void0", "title": "wrapping in do-while-0 vs wrapping in a ternary operator with (void)0", "body": "<p>I'm looking at <a href=\"https://github.com/Microsoft/GSL/blob/master/include/gsl/gsl_assert#L154\" rel=\"nofollow noreferrer\">this macro</a> within Microsoft's GSL:</p>\n\n<pre><code>#define GSL_CONTRACT_CHECK(type, cond) \\\n    (GSL_LIKELY(cond) ? static_cast&lt;void&gt;(0) \\\n        : gsl::details::throw_exception(gsl::fail_fast( \\\n            \"GSL: \" type \" failure at \" __FILE__ \": \" GSL_STRINGIFY(__LINE__))))\n</code></pre>\n\n<p>Let's simplify it to ignore what I don't care about:</p>\n\n<pre><code>#define CHECK_1(cond) \\\n    (cond ? static_cast&lt;void&gt;(0) : do_something() )\n</code></pre>\n\n<p>Now, I would intuitively write something like:</p>\n\n<pre><code>#define CHECK_2(cond) \\\n    do { \\\n        if (not (cond)) {do_something();} \\\n    } while(0)\n</code></pre>\n\n<p>My question: Is there any difference between these wrapping mechanism? Is there perhaps some corner use case where one causes some unintended compilation gaffe, but not the other?</p>\n\n<p>Note:</p>\n\n<ul>\n<li>This might actually be a C question in disguise, I'm not sure there's any real C++ issue here.</li>\n</ul>\n"}, {"tags": ["c++", "clang", "abstract-syntax-tree", "clang-ast-matchers"], "answers": [{"tags": [], "owner": {"reputation": 781, "user_id": 1406713, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2f51b38b26f5ec8e2cafbd9296c3623e?s=128&d=identicon&r=PG", "display_name": "Hesky Fisher", "link": "https://stackoverflow.com/users/1406713/hesky-fisher"}, "is_accepted": false, "score": 0, "last_activity_date": 1554922599, "creation_date": 1554922599, "answer_id": 55619554, "question_id": 55617341, "link": "https://stackoverflow.com/questions/55617341/clang-ast-matchers-how-to-match-on-lambda-captured-variables/55619554#55619554", "title": "Clang AST Matchers: How to match on lambda captured variables?", "body": "<p>I found a solution.</p>\n\n<p>I use a negative matcher (unless) to say that the declaration of the variable is not a descendant of the lambda's body. This doesn't exactly do what I asked for (determine that the variable is a capture) but it will only match captures and globals so it works for my use case.</p>\n\n<p>Here is my whole matcher:</p>\n\n<pre><code>cxxRecordDecl(isLambda(), hasDescendant(cxxMethodDecl(returns(hasUnqualifiedDesugaredType(recordType(hasDeclaration(cxxRecordDecl(hasName(\"Status\")))))), parameterCountIs(1), hasParameter(0, hasType(pointsTo(cxxRecordDecl(hasName(\"TransactionOp\"))))), hasBody(compoundStmt(allOf(hasDescendant(cxxMemberCallExpr(on(declRefExpr(to(varDecl().bind(\"insertee\")))), thisPointerType(cxxRecordDecl(hasName(\"set\"))), callee(cxxMethodDecl(hasName(\"insert\"))))), unless(hasDescendant(cxxMemberCallExpr(on(declRefExpr(to(equalsBoundNode(\"insertee\")))), thisPointerType(cxxRecordDecl(hasName(\"set\"))), callee(cxxMethodDecl(hasName(\"clear\")))))), unless(hasDescendant(decl(equalsBoundNode(\"insertee\"))))))))))\n</code></pre>\n\n<p>The interesting parts are where I bind the declaration of the set being inserted inside the cxxMethodDecl:</p>\n\n<pre><code>cxxMethodDecl(on(declRefExpr(to(varDecl().bind(\"insertee\")))), ...)\n</code></pre>\n\n<p>And then say that the declaration is not a descendant of the body (so it must be outside):</p>\n\n<pre><code>unless(hasDescendant(decl(equalsBoundNode(\"insertee\")))))))\n</code></pre>\n\n<p>Hopefully, this solution can save someone else some time.</p>\n"}], "owner": {"reputation": 781, "user_id": 1406713, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2f51b38b26f5ec8e2cafbd9296c3623e?s=128&d=identicon&r=PG", "display_name": "Hesky Fisher", "link": "https://stackoverflow.com/users/1406713/hesky-fisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1555012451, "creation_date": 1554913816, "last_edit_date": 1555012451, "question_id": 55617341, "link": "https://stackoverflow.com/questions/55617341/clang-ast-matchers-how-to-match-on-lambda-captured-variables", "title": "Clang AST Matchers: How to match on lambda captured variables?", "body": "<p>How can I match against variables in a lambda that are defined outside of the lambda and captured by reference?</p>\n\n<p>The problem I'm trying to solve: I have a database transaction system whose code looks something like this:</p>\n\n<pre><code>std::set&lt;int&gt; values;\nauto f = [&amp;](TransactionOp* op) -&gt; Status {\n  for (auto v : readColumn(\"values\")) \n     values.insert(v);\n  return Ok();\n}\nStatus s = TransactionRunner::Run(f);\n</code></pre>\n\n<p>The code above has a subtle bug because f doesn't clear values. TransactionRunner::Run can call f multiple times until the transaction succeeds. If f doesn't clear values then values will have garbage values from previous attempts.</p>\n\n<p>I'm writing a clang-tidy check to find bugs like this and stop new ones from being written.</p>\n\n<p>So far I have something like:</p>\n\n<pre><code>cxxRecordDecl(isLambda(), hasDescendant(cxxMethodDecl(returns(hasUnqualifiedDesugaredType(recordType(hasDeclaration(cxxRecordDecl(hasName(\"Status\")))))), parameterCountIs(1), hasParameter(0, hasType(pointsTo(cxxRecordDecl(hasName(\"TransactionOp\"))))), hasBody(compoundStmt(allOf(hasDescendant(cxxMemberCallExpr(on(declRefExpr(to(varDecl().bind(\"insertee\")))), thisPointerType(cxxRecordDecl(hasName(\"set\"))), callee(cxxMethodDecl(hasName(\"insert\"))))), unless(hasDescendant(cxxMemberCallExpr(on(declRefExpr(to(equalsBoundNode(\"insertee\")))), thisPointerType(cxxRecordDecl(hasName(\"set\"))), callee(cxxMethodDecl(hasName(\"clear\"))))))))))))\n</code></pre>\n\n<p>The above will find a lambda with the right signature that has a set insertion inside it but no clear call to the same set.</p>\n\n<p>I want it to not trigger on sets declared inside the lambda. So I'd like the matcher to only match if the set is captured by the lambda. </p>\n"}, {"tags": ["c++", "qt", "qt5", "qtablewidget", "qpalette"], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 2912471, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f948420ff93916a691d90dc40eca67b9?s=128&d=identicon&r=PG&f=1", "display_name": "DrPepperJo", "link": "https://stackoverflow.com/users/2912471/drpepperjo"}, "edited": false, "score": 0, "creation_date": 1555017461, "post_id": 55619533, "comment_id": 97973017, "body": "This was exactly what I was looking for, thank you very much!"}, {"owner": {"reputation": 518, "user_id": 2912471, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f948420ff93916a691d90dc40eca67b9?s=128&d=identicon&r=PG&f=1", "display_name": "DrPepperJo", "link": "https://stackoverflow.com/users/2912471/drpepperjo"}, "edited": false, "score": 0, "creation_date": 1555020360, "post_id": 55619533, "comment_id": 97973873, "body": "So while this worked fine for the QTableWidget example, it seems to overwrite all kinds of style options other than the text, when used with QComboBox. It even seems to mess with the text of the item in some cases. Any idea what I could be doing wrong here?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 518, "user_id": 2912471, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f948420ff93916a691d90dc40eca67b9?s=128&d=identicon&r=PG&f=1", "display_name": "DrPepperJo", "link": "https://stackoverflow.com/users/2912471/drpepperjo"}, "edited": false, "score": 1, "creation_date": 1555020648, "post_id": 55619533, "comment_id": 97973957, "body": "@DrPepperJo Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> I could not point you out, I&#39;m also assuming that the view uses a QStyledItemDelegate as a delegate, and in the case of QListView, QTableView and QTreeView use it. It is possible that in other cases such as the QComboBox simply use a QItemDelegate that has another style so when placing QStyledItemDelegate you are changing the default style of the QComboBox."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 518, "user_id": 2912471, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f948420ff93916a691d90dc40eca67b9?s=128&d=identicon&r=PG&f=1", "display_name": "DrPepperJo", "link": "https://stackoverflow.com/users/2912471/drpepperjo"}, "edited": false, "score": 1, "creation_date": 1555020652, "post_id": 55619533, "comment_id": 97973959, "body": "@DrPepperJo Or it may be that your implementation has another error. Your current question is very focused: QTableWidget and that is the right thing to do because here we are looking for precise questions, so in the end I recommend you to ask a new question with an MCVE"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1554922496, "creation_date": 1554922496, "answer_id": 55619533, "question_id": 55617335, "link": "https://stackoverflow.com/questions/55617335/mimic-qapplicationpalette-based-color-style-behavior/55619533#55619533", "title": "Mimic QApplication::palette() based color style behavior", "body": "<p>To be automatic you must overwrite the initStyleOption() method of QStyledItemDelegate and associate the fake enable with a new role:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;QtWidgets&gt;\n\nenum FakeRoles {\n    FakeEnableRole = Qt::UserRole + 1000\n};\n\nclass ForegroundDelegate: public QStyledItemDelegate\n{\npublic:\n    using QStyledItemDelegate::QStyledItemDelegate;\nprotected:\n    void initStyleOption(QStyleOptionViewItem *option, const QModelIndex &amp;index) const override{\n        QStyledItemDelegate::initStyleOption(option, index);\n        QVariant val = index.data(FakeRoles::FakeEnableRole);\n        if(val.canConvert&lt;bool&gt;()){\n            bool enabled = val.value&lt;bool&gt;();\n            option-&gt;palette.setBrush(QPalette::Text,\n                                     QApplication::palette().color(enabled ? QPalette::Active:\n                                                                             QPalette::Disabled, QPalette::Text));\n        }\n    }\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QTableWidget w(4, 4);\n    ForegroundDelegate *delegate = new ForegroundDelegate(&amp;w);\n    w.setItemDelegate(delegate);\n    for(int i=0; i&lt; w.rowCount(); ++i)\n        for (int j=0; j&lt; w.columnCount(); ++j) {\n            QTableWidgetItem *it = new QTableWidgetItem(QString(\"%1-%2\").arg(i).arg(j));\n            w.setItem(i, j, it);\n            bool enabled =  QRandomGenerator::global()-&gt;bounded(0, 2) == 0;\n            it-&gt;setData(FakeRoles::FakeEnableRole, enabled);\n        }\n    w.show();\n    QTimer::singleShot(1000, [](){\n        QPalette pal = QApplication::palette();\n        pal.setColor(QPalette::Active, QPalette::Text, QColor(\"salmon\"));\n        pal.setColor(QPalette::Disabled, QPalette::Text, QColor(\"cyan\"));\n        QApplication::setPalette(pal);\n    });\n    return a.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 518, "user_id": 2912471, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f948420ff93916a691d90dc40eca67b9?s=128&d=identicon&r=PG&f=1", "display_name": "DrPepperJo", "link": "https://stackoverflow.com/users/2912471/drpepperjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 55619533, "answer_count": 1, "score": 1, "last_activity_date": 1555743344, "creation_date": 1554913800, "last_edit_date": 1555743344, "question_id": 55617335, "link": "https://stackoverflow.com/questions/55617335/mimic-qapplicationpalette-based-color-style-behavior", "title": "Mimic QApplication::palette() based color style behavior", "body": "<p>It is very simple: I want to mimic the change in color of an item being disabled without disabling it.</p>\n\n<p>Having <code>QTableWidgetItem</code> and <code>QStandardItem</code> items, I am using code like this</p>\n\n<pre><code>item-&gt;setForeground( enabled ? QApplication::palette().color( QPalette::Text ) : QApplication::palette().color( QPalette::Disabled, QPalette::Text ) );\n</code></pre>\n\n<p>right now. However, if the user calls <code>QApplication::setPalette( ... )</code> using a new palette, the item has to be manually refreshed. I would much rather set a <code>ColorGroup</code> and <code>Role</code>, so Qt knows how to refresh. Is it possible to do that?</p>\n"}, {"tags": ["c++", "inheritance", "compiler-errors", "protected", "pure-virtual"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1554913875, "post_id": 55617274, "comment_id": 97927990, "body": "This code example wouldn&#39;t even compile (c++ is a case sensitive language). Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> reproducing your problem as required here please."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1554914166, "post_id": 55617274, "comment_id": 97928128, "body": "It would be helpful to see the rest of the error message. I say you cut it off at the important part."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1554914400, "post_id": 55617274, "comment_id": 97928245, "body": "When correcting basic syntax mistakes (e.g., Public -&gt; public) of your example, it compiles without problem. Please provide a minimal example that replicates the problem."}, {"owner": {"reputation": 1, "user_id": 8707488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eed6228cfe8a48956d92323fa4cd03?s=128&d=identicon&r=PG&f=1", "display_name": "user8707488", "link": "https://stackoverflow.com/users/8707488/user8707488"}, "edited": false, "score": 0, "creation_date": 1554917560, "post_id": 55617274, "comment_id": 97929831, "body": "Hi All, This is not the actual code but the overall code flow. I will try to post minimal complete code!"}, {"owner": {"reputation": 1, "user_id": 8707488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eed6228cfe8a48956d92323fa4cd03?s=128&d=identicon&r=PG&f=1", "display_name": "user8707488", "link": "https://stackoverflow.com/users/8707488/user8707488"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1554921662, "post_id": 55617274, "comment_id": 97931784, "body": "@drescherjm  Pl find the updated code now!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8707488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eed6228cfe8a48956d92323fa4cd03?s=128&d=identicon&r=PG&f=1", "display_name": "user8707488", "link": "https://stackoverflow.com/users/8707488/user8707488"}, "is_accepted": false, "score": 0, "last_activity_date": 1555184791, "creation_date": 1555184791, "answer_id": 55669246, "question_id": 55617274, "link": "https://stackoverflow.com/questions/55617274/not-able-to-access-base-protected-members-in-derived-class-in-virtual-functi/55669246#55669246", "title": "Not able to access base protected members in derived class ! ( in virtual functions )", "body": "<p>All the private members were needed to referred with template definition of the parent.\ne.g.\n first would change to linkedListType::first;</p>\n\n<p>This is because of some compiler limitations to use the template library. </p>\n"}], "owner": {"reputation": 1, "user_id": 8707488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eed6228cfe8a48956d92323fa4cd03?s=128&d=identicon&r=PG&f=1", "display_name": "user8707488", "link": "https://stackoverflow.com/users/8707488/user8707488"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1555184791, "creation_date": 1554913480, "last_edit_date": 1554921518, "question_id": 55617274, "link": "https://stackoverflow.com/questions/55617274/not-able-to-access-base-protected-members-in-derived-class-in-virtual-functi", "title": "Not able to access base protected members in derived class ! ( in virtual functions )", "body": "<p>I have a abstract class e.g. A  ( few pure virtual functions ). I am public inheriting class B from class A. \nWhile providing the definitions of virtual functions, I am trying to access the private members of class A (e.g. Ptr ). However, compiler is unable to find declaration of all protected members of class A. \n What is going wrong here?</p>\n\n<pre><code>        //\n        // LinkedListType.h\n        //\n\n        #ifndef LINKEDLISTTYPE_LINKEDLISTTYPE_H\n        #define LINKEDLISTTYPE_LINKEDLISTTYPE_H\n\n        #include &lt;iostream&gt;\n        using namespace std;\n\n        template &lt;class Type&gt;\n        struct nodeType\n        {\n            int val;\n            nodeType&lt;Type&gt; *link;\n        };\n\n        template &lt;class Type&gt;\n        class LinkedListType{\n        public:\n\n            virtual void insertFirst(Type&amp; node)=0;\n\n            LinkedListType();\n            ~LinkedListType();\n            void destroyList();\n        protected:\n            int count;\n            nodeType&lt;Type&gt; *first;\n            nodeType&lt;Type&gt; *last;\n        };\n        #endif //LINKEDLISTTYPE_LINKEDLISTTYPE_H\n\n\n        //\n        // LinkedListType.cpp\n        //\n        #include &lt;iostream&gt;\n        #include \"LinkedListType.h\"\n\n        using namespace std;\n\n        template &lt;class Type&gt;\n        void LinkedListType&lt;Type&gt;::destroyList() {\n            if (firstElem == NULL)cout&lt;&lt;\"LinkedList is empty\"&lt;&lt;endl;\n\n            nodeType&lt;Type&gt; *tmp;\n            while(tmp != NULL){\n                tmp=first;\n                first=first-&gt;link;\n                delete tmp;\n            }\n            last=NULL;\n            count =0;\n        }\n\n\n\n        template &lt;class Type&gt;\n        LinkedListType&lt;Type&gt;::LinkedListType() {\n            first=NULL;\n            last=NULL;\n            count=0;\n        }\n\n\n        template &lt;class Type&gt;\n        LinkedListType&lt;Type&gt;::~LinkedListType() {\n            destroyList();\n        }\n\n\n\n\n//\n        // unorderedLinkedList.cpp\n        //\n\n        #ifndef UNORDEREDLINKEDLIST_UNORDEREDLINKEDLIST_H\n        #define UNORDEREDLINKEDLIST_UNORDEREDLINKEDLIST_H\n\n        #include &lt;iostream&gt;\n        #include \"LinkedListType.h\"\n\n        using namespace std;\n\n        template &lt;class Type&gt;\n        class unorderedLinkedList: public LinkedListType&lt;Type&gt;{\n        public:\n            void insertFirst(Type&amp; node);\n        };\n        #endif //UNORDEREDLINKEDLIST_UNORDEREDLINKEDLIST_H\n\n\n\n        //\n        // unorderedLinkedList.h\n        //\n        #include &lt;iostream&gt;\n        #include \"unorderedLinkedList.h\"\n\n        using  namespace std;\n\n        template &lt;class Type&gt;\n        void unorderedLinkedList&lt;Type&gt;::insertFirst(Type&amp; node) {\n            nodeType&lt;Type&gt; *newNode= new nodeType&lt;Type&gt;;\n            if(newNode == NULL)\n                assert(\"Unable to allocate node to insert\");\n            newNode-&gt;val=node;\n            newNode-&gt;link=first;  /* ---&gt; ERROR error: use of undeclared \n                               identifier 'first'; did you mean \n                               'std::_PairT::first'? */\n            first=newNode; /* ---&gt; ERROR error: use of undeclared \n                                identifier 'first'; did you mean \n                               'std::_PairT::first'? */\n            count++;\n        }\n\n\n\n        //\n        // CMakeList.txt\n        //\n        cmake_minimum_required(VERSION 3.13)\n        project(UnorderedLinkedList)\n\n        set(CMAKE_CXX_STANDARD 14)\n\n        add_executable(UnorderedLinkedList main.cpp LinkedListType.h LinkedListType.cpp unorderedLinkedList.h unorderedLinkedList.cpp)\n\n\n        //Main program\n        #include &lt;iostream&gt;\n        #include \"unorderedLinkedList.h\"\n        #include \"unorderedLinkedList.cpp\"\n        using namespace std;\n\n        int main() {\n            std::cout &lt;&lt; \"Hello, World!\" &lt;&lt; std::endl;\n            unorderedLinkedList&lt;int&gt; u1;\n            u1.insertFirst(10);\n            return 0;\n        }\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "thread-safety", "c++-standard-library"], "comments": [{"owner": {"reputation": 937, "user_id": 8447562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xYRil.png?s=128&g=1", "display_name": "Symon", "link": "https://stackoverflow.com/users/8447562/symon"}, "edited": false, "score": 0, "creation_date": 1554914934, "post_id": 55617270, "comment_id": 97928539, "body": "Welcome to Stackoverflow! Please take a look at <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. It would be very helpful to others if you included your attempted code!"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1554915818, "post_id": 55617270, "comment_id": 97928972, "body": "XY problem warning. There&#39;s probably a better solution to your problem, not involving sharing a vector of pointers..."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1554916806, "post_id": 55617270, "comment_id": 97929438, "body": "Short answer to how to make <i>any</i> shared data thread safe:  Each thread locks a mutex before it accesses the data, Each thread keeps the mutex locked for as short a time as possible, Each thread ensures that the data are in a consistent state--safe for other threads to see--before it unlocks the mutex.  Note that &quot;Access&quot; includes merely <i>looking</i> at the data. You usually don&#39;t want one thread to be looking at data when another thread is only half-way done changing it."}], "answers": [{"tags": [], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "is_accepted": false, "score": 0, "last_activity_date": 1554913916, "creation_date": 1554913916, "answer_id": 55617367, "question_id": 55617270, "link": "https://stackoverflow.com/questions/55617270/sharing-stdvector-of-pointers-through-threads/55617367#55617367", "title": "Sharing std::vector of pointers through threads", "body": "<p>Simply write the class and guard the member functions with synchronization object (a critical section).</p>\n\n<p>Look at <a href=\"https://mfreiholz.de/posts/make-a-class-thread-safe-cpp/\" rel=\"nofollow noreferrer\">this</a> example.</p>\n"}], "owner": {"reputation": 39, "user_id": 11341562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be22818ef878411f729fbeea3c0c41d2?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/11341562/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1554913916, "creation_date": 1554913470, "last_edit_date": 1554913873, "question_id": 55617270, "link": "https://stackoverflow.com/questions/55617270/sharing-stdvector-of-pointers-through-threads", "title": "Sharing std::vector of pointers through threads", "body": "<p>I would like to share a std::vector of pointers through threads. Each thread should have the ability to get or delete a pointer and remove it from the vector. How could I make this thread safe and is there anything from the C++ Standard Library that does this already?</p>\n"}, {"tags": ["c++", "statistics", "distribution"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 2, "creation_date": 1554910907, "post_id": 55616459, "comment_id": 97926332, "body": "No. C++ standard for distributions does not provide either PDF or CDF or survival functions, or PPF. You&#39;d better write them yourself or use BOOST or GSL"}, {"owner": {"reputation": 863, "user_id": 6203203, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7aa4188d95040238a2e7ba29119d2996?s=128&d=identicon&r=PG&f=1", "display_name": "philippos", "link": "https://stackoverflow.com/users/6203203/philippos"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1554911160, "post_id": 55616459, "comment_id": 97926501, "body": "@SeverinPappadeux sorry for my limited knowledge, but I have no idea about any of the names you mentioned. Could you please help with some references?"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 2, "creation_date": 1554912264, "post_id": 55616459, "comment_id": 97927147, "body": "BOOST is collection of high quality C++ libraries, but not part of C++ standard. Take a look at <a href=\"https://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/dist.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_65_1/libs/math/doc/html/dist.html</a> for statistical functions. GNU Scientific Library is another set of high quality C libiraries, not part of the C or C++ standard, take a look <a href=\"https://www.gnu.org/software/gsl/\" rel=\"nofollow noreferrer\">gnu.org/software/gsl</a>"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 1, "creation_date": 1554912599, "post_id": 55616459, "comment_id": 97927326, "body": "Basically, I&#39;m saying to get what you want you have to look beyond C++ standard. I proposed two high quality libraries which might be of help, but there are other libraries as well."}], "owner": {"reputation": 863, "user_id": 6203203, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7aa4188d95040238a2e7ba29119d2996?s=128&d=identicon&r=PG&f=1", "display_name": "philippos", "link": "https://stackoverflow.com/users/6203203/philippos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554911783, "creation_date": 1554910622, "question_id": 55616459, "link": "https://stackoverflow.com/questions/55616459/c-t-distribution-value", "title": "C++: T-distribution value", "body": "<p>I want to get the value of <code>t-distribution</code> in C++, in a way similar to what could be done in python, like:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>t = stats.t.isf(q=(alpha / n) / 2, df=n - 2)\n</code></pre>\n\n<p>I have seen this documentation:</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/random/student_t_distribution/\" rel=\"nofollow noreferrer\">student_t_distribution</a></p>\n\n<p>and tried to manipulate the example written there, however, I still need a some help.\nWhat I want to do eventually is to get <code>t-distribution</code> value in a way like:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>t = t_distFunction(alpha, degree_of_freedom);\ncout &lt;&lt; \"t= \" &lt;&lt; t;\n&gt;&gt; t= 2.88 \n</code></pre>\n\n<p>Is that possible using the class I mentioned above? and if not, how can I get the t_dist value? </p>\n"}, {"tags": ["c++", "arrays", "visual-studio"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1554909041, "post_id": 55615919, "comment_id": 97925287, "body": "It&#39;s not just Visual Studio.. VLAs are not a part of C++ standard."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 1, "creation_date": 1554909276, "post_id": 55615919, "comment_id": 97925427, "body": "also: <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">why is \u201cusing namespace std\u201d considered bad practice</a>"}], "owner": {"reputation": 39, "user_id": 11341145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb8ef7ac8a958131debd10357cdea11?s=128&d=identicon&r=PG&f=1", "display_name": "Marcelluxx", "link": "https://stackoverflow.com/users/11341145/marcelluxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1554909030, "answer_count": 0, "score": 0, "last_activity_date": 1554908905, "creation_date": 1554908905, "question_id": 55615919, "link": "https://stackoverflow.com/questions/55615919/how-to-use-array-on-visual-studio", "closed_reason": "Duplicate", "title": "How to use array on visual studio", "body": "<p>When I try to declare an array of variable sizes (chosen by the user) visual studio says it is wrong and that a constant variable must be used</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    using namespace std;\n    int main(){\n        int n;\n        cin&gt;&gt;n;\n        int array[n];\n    }\n</code></pre>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 1453, "user_id": 2018010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fwCYF.gif?s=128&g=1", "display_name": "magras", "link": "https://stackoverflow.com/users/2018010/magras"}, "edited": false, "score": 1, "creation_date": 1554909156, "post_id": 55615650, "comment_id": 97925364, "body": "I think you are looking for <code>enable_shared_from_this</code>."}, {"owner": {"reputation": 2729, "user_id": 519493, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/NXzpT.jpg?s=128&g=1", "display_name": "Aaronium112", "link": "https://stackoverflow.com/users/519493/aaronium112"}, "reply_to_user": {"reputation": 1453, "user_id": 2018010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fwCYF.gif?s=128&g=1", "display_name": "magras", "link": "https://stackoverflow.com/users/2018010/magras"}, "edited": false, "score": 0, "creation_date": 1554910938, "post_id": 55615650, "comment_id": 97926359, "body": "i think you&#39;re right."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1554993806, "post_id": 55615650, "comment_id": 97961694, "body": "problem is that OP do not understand what <code>shared_ptr</code> or <code>weak_ptr</code> does so <code>enable_shared_from_this</code> will not help. Take a look how <code>task</code> is passed by value and local <code>shared_ptr</code> is created and then assigned to a <code>weak_ptr</code>. I recommend reading documentation and understand what those things do before using them. Here is great <a href=\"https://youtu.be/JfmTagWcqoE\" rel=\"nofollow noreferrer\">cpp con lecture about topic</a>."}, {"owner": {"reputation": 2729, "user_id": 519493, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/NXzpT.jpg?s=128&g=1", "display_name": "Aaronium112", "link": "https://stackoverflow.com/users/519493/aaronium112"}, "edited": false, "score": 0, "creation_date": 1555259955, "post_id": 55615650, "comment_id": 98040118, "body": "Marek, how is it that you know what i understand?"}], "answers": [{"comments": [{"owner": {"reputation": 2729, "user_id": 519493, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/NXzpT.jpg?s=128&g=1", "display_name": "Aaronium112", "link": "https://stackoverflow.com/users/519493/aaronium112"}, "edited": false, "score": 0, "creation_date": 1555438724, "post_id": 55616193, "comment_id": 98109233, "body": "That&#39;s helpful but it doesn&#39;t answer the question."}], "tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": false, "score": 1, "last_activity_date": 1554909748, "creation_date": 1554909748, "answer_id": 55616193, "question_id": 55615650, "link": "https://stackoverflow.com/questions/55615650/how-to-implement-a-weak-reference-to-an-object-in-a-constructor-using-boostwea/55616193#55616193", "title": "How to implement a weak reference to an object in a constructor using boost::weak_ptr?", "body": "<p>Most of this functionality has been included into the C++ standard. If you can't use such a recent version, then the boost libraries are very near identical, and you can replace <code>std::</code> with <code>boost::</code> here.</p>\n\n<p>For creating both a <code>shared_ptr</code> or a <code>weak_ptr</code> from a raw pointer, you must derive from <code>enabled_shared_from_this</code>, for example:</p>\n\n<pre><code>class Foo : public std::enabled_shared_from_this&lt;Foo&gt; // C++11\n{\n};\n...\nFoo *ptr = ...;\nstd::shared_ptr&lt;Foo&gt; a = foo-&gt;shared_from_this(); // C++11\nstd::weak_ptr&lt;Foo&gt; b = foo-&gt;weak_from_this(); // C++17\n</code></pre>\n\n<p>The <code>enabled_shared_from_this</code> will add a little size to your type, but then so does <code>make_shared</code> with a type not using it, so if that is a concern, or often for simplicity, there is <code>unique_ptr</code> (C++11) that is more like a raw pointer.</p>\n\n<p>It still doesn't normally make sense to try and make one from a stack allocated object, as the shared_ptr will not prevent it being deleted like normal local variables, and in fact could cause double deletion. You can do some tricks like give it a \"no-op\" deleter for the second problem.</p>\n\n<p>In the case of <code>Foo *ptr</code> you also need to be sure that some other <code>shared_ptr</code> to it still exists, else the <code>ptr</code> may have been deleted already.</p>\n"}, {"tags": [], "owner": {"reputation": 2729, "user_id": 519493, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/NXzpT.jpg?s=128&g=1", "display_name": "Aaronium112", "link": "https://stackoverflow.com/users/519493/aaronium112"}, "is_accepted": true, "score": 0, "last_activity_date": 1556026012, "creation_date": 1556026012, "answer_id": 55812330, "question_id": 55615650, "link": "https://stackoverflow.com/questions/55615650/how-to-implement-a-weak-reference-to-an-object-in-a-constructor-using-boostwea/55812330#55812330", "title": "How to implement a weak reference to an object in a constructor using boost::weak_ptr?", "body": "<p>So the answer is that one cannot instantiate an object with a weak pointer. Here's an example you can use to implement weak references between objects.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/weak_ptr.hpp&gt;\n#include &lt;boost/enable_shared_from_this.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt;\n\nclass Callback;\n\nclass Task: public boost::enable_shared_from_this&lt;Task&gt;\n{\n  public:\n    Task(Callback&amp; callback)\n      : m_callback(callback)\n    {\n      std::cout &lt;&lt; \"Task:: Constructor\" &lt;&lt; std::endl;\n    }\n\n    void delegateMethod() {\n      std::cout &lt;&lt; \"Task: delegateMethod\" &lt;&lt; std::endl;\n    }\n\n  private:\n    Callback&amp; m_callback;\n};\n\n\nclass Callback\n{\n  public:\n\n    Callback(){\n      std::cout &lt;&lt; \"Callback::Constructor\" &lt;&lt; std::endl;\n    };\n\n    //You have to set the delegate after Construction\n    void delegate(const boost::weak_ptr&lt;Task&gt; task) {\n      std::cout &lt;&lt; \"Callback:: void delegate(const boost::weak_ptr&lt;Task&gt; task) \" &lt;&lt; std::endl;\n      this-&gt;m_delegate = task;\n    }\n\n\n    void delegateSomething() {\n      std::cout &lt;&lt; \"Callback::delegateSomething()\" &lt;&lt; std::endl;\n      boost::shared_ptr&lt;Task&gt; sharedDelegate = this-&gt;m_delegate.lock();\n      std::cout &lt;&lt; \"sharedDelegate: \" &lt;&lt; sharedDelegate &lt;&lt; std::endl;\n      if (sharedDelegate) {\n        // Use *shared_delegate\n        std::cout &lt;&lt; \"Callback::delegateSomething() use delegate\" &lt;&lt; std::endl;\n        sharedDelegate-&gt;delegateMethod();\n      }\n    }\n\n    private:\n     boost::weak_ptr&lt;Task&gt; m_delegate;\n};\n\nint main()\n{\n  std::cout &lt;&lt; \"main: Construct Callback\" &lt;&lt; std::endl;\n  Callback callback;\n\n  std::cout &lt;&lt; \"main: Construct Task\" &lt;&lt; std::endl;\n  Task task(callback);\n\n  std::cout &lt;&lt; \"main: Connect callback delegate\" &lt;&lt; std::endl;\n  boost::shared_ptr&lt;Task&gt; sharedTask = boost::make_shared&lt;Task&gt;(task);\n  boost::weak_ptr&lt;Task&gt; weakTask(sharedTask);\n  callback.delegate(weakTask);\n  callback.delegateSomething();\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2729, "user_id": 519493, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/NXzpT.jpg?s=128&g=1", "display_name": "Aaronium112", "link": "https://stackoverflow.com/users/519493/aaronium112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 55812330, "answer_count": 2, "score": 0, "last_activity_date": 1556026012, "creation_date": 1554908101, "last_edit_date": 1554912353, "question_id": 55615650, "link": "https://stackoverflow.com/questions/55615650/how-to-implement-a-weak-reference-to-an-object-in-a-constructor-using-boostwea", "title": "How to implement a weak reference to an object in a constructor using boost::weak_ptr?", "body": "<p>How does one create a boost::weak_ptr to an exiting object in C++ inside a constructor?</p>\n\n<p>Here's what I've got but it doesn't work because the shared pointer constructor is wrong. The thing is i don't want to make a new task. I want to use the task that is required to make a TestCallback but i only want a weak reference to the TestTask because the TestTask owns the TestCallback and if it goes away so should the TestCallback.</p>\n\n<pre><code>class TestCallback {\n  public:\n    TestCallback(TestTask task);\n    boost::weak_ptr&lt;TestTask&gt; testTask;\n};\n</code></pre>\n\n<p>//Constructor</p>\n\n<pre><code>TestCallback(TestTask task) {\n  boost::shared_ptr&lt;DeleteStaticRouteTask&gt; sharedTask(task);\n  boost::weak_ptr&lt;DeleteStaticRouteTask&gt; weakTask(sharedTask);\n  m_task = weakTask;\n}\n</code></pre>\n\n<p>//Ideal Call Site</p>\n\n<pre><code>TestTask testTask(DependencyA, DependencyB);\nTestCallback testCallback(task);\n</code></pre>\n"}, {"tags": ["c++", "linux", "usb"], "owner": {"reputation": 11, "user_id": 11340866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7dff69ab065c0f41d7ff8296fa6ec7?s=128&d=identicon&r=PG&f=1", "display_name": "benjo", "link": "https://stackoverflow.com/users/11340866/benjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554908079, "creation_date": 1554908079, "question_id": 55615640, "link": "https://stackoverflow.com/questions/55615640/usb-gadget-functionfs-how-to-access-endpoints-utilizing-flag-functionfs-virtu", "title": "USB gadget - functionfs: How to access endpoints utilizing flag FUNCTIONFS_VIRTUAL_ADDR", "body": "<p>I'm trying to utilize the <a href=\"https://www.kernel.org/doc/Documentation/usb/functionfs.txt\" rel=\"nofollow noreferrer\">functionFS</a> API to implement a custom USB device. I managed to set up the device descriptors with configFS as well as the interface and enpoint descriptors via functionFS.\nTo have a more deterministic endpoint numbering (functionFS does that in the background), I tried to use the flag FUNCTIONFS_VIRTUAL_ADDR, which names the endpoint files like \"ep02\" and \"ep81\" instead of \"ep2\" and \"ep1\".</p>\n\n<p>My problem now is, as soon as I make use of the flag FUNCTIONFS_VIRTUAL_ADDR, I cannot receive bulk transfers anymore. Endpoint files are there (in my case \"/mnt/ffs/ep02\" and \"/mnt/ffs/ep81\") but reading the ep02 file doesn't return any content.</p>\n\n<p>Does anyone have any experience with this?</p>\n\n<p>cheers benjo</p>\n\n<p>I have sniffed the traffic with wireshark and can see a bulk transfer from the host to endpoint 0x02 but my device never sees this.</p>\n\n<pre><code>void Usb::dumpThread()\n{\n    std::ofstream ep1File(m_ffsPath + \"/ep81\");\n    std::ifstream ep2File(m_ffsPath + \"/ep02\");\n\n    static std::array&lt;char, maxPacketSize&gt; buffer;\n    while (true)\n    {\n        ep2File.getline(&amp;buffer[0], buffer.size(), '\\0');\n        if (ep2File.gcount() &gt; 0)\n        {\n            std::cout &lt;&lt; \"Received \" &lt;&lt; ep2File.gcount() &lt;&lt; \" bytes.\" &lt;&lt; std::endl;\n            std::cout &lt;&lt; reinterpret_cast&lt;const char*&gt;(&amp;buffer[0]) &lt;&lt; std::endl;\n            std::string command(reinterpret_cast&lt;const char*&gt;(&amp;buffer[1]));\n\n            if (command == \"ABC\")\n            {\n                // do sth.\n            }\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "access-violation"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1554908291, "post_id": 55615612, "comment_id": 97924814, "body": "<code>NULL</code> is not the only invalid address a pointer to have. Are you sure it&#39;s actually initialized? Are you sure the object points it to exists and haven&#39;t been destroyed? The fact that you have things like <code>this != NULL</code> and check that the memory the object <code>this</code> points to is valid leads me to believe your code is likely full of Undefined Behavior, any of which could cause the problem you are observing."}, {"owner": {"reputation": 63, "user_id": 10776888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93101f7dc85d3592a3ddc730b3de3313?s=128&d=identicon&r=PG&f=1", "display_name": "Fellnase", "link": "https://stackoverflow.com/users/10776888/fellnase"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1554908622, "post_id": 55615612, "comment_id": 97925020, "body": "My problem is, I haven&#39;t written this code in first place. It&#39;s a bigger project and I only should recompile it with a newer visual studio. Is there any way to check of the pointer is valid? I thought with != NULL and AfxIsValidAddress I&#39;m on the save side. I looked thought the class, this pointer is initialized with null and is set only once in the function and I fould deletes only in the shutdown methods"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1554909020, "post_id": 55615612, "comment_id": 97925272, "body": "This may be a configuration problem, since you are migrating to another version of Visual Studio. Make sure all components, including .obj files and libraries with C++ linkage (static and dynamic) were recompiled with the same version of VC++ using compatible parameters. This might also be the result of UB expressing itself differently with your newer compiler. Be sure to compile with no optimization to help spot the problem. Carefully step through the code, see at what point your debugger can no longer report on the internals of your object."}, {"owner": {"reputation": 63, "user_id": 10776888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93101f7dc85d3592a3ddc730b3de3313?s=128&d=identicon&r=PG&f=1", "display_name": "Fellnase", "link": "https://stackoverflow.com/users/10776888/fellnase"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1554909040, "post_id": 55615612, "comment_id": 97925286, "body": "I may note that this this-check is in an MFC function, CObject::IsKindOf is nothing from my selfwritten programcode."}, {"owner": {"reputation": 63, "user_id": 10776888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93101f7dc85d3592a3ddc730b3de3313?s=128&d=identicon&r=PG&f=1", "display_name": "Fellnase", "link": "https://stackoverflow.com/users/10776888/fellnase"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1554909125, "post_id": 55615612, "comment_id": 97925344, "body": "What do you mean with UB Expressing? Unfortunately the problem is not happening on my developer PC when I run it with the debugger. Optimization is already disabled"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1554909347, "post_id": 55615612, "comment_id": 97925478, "body": "<i>I also don&#39;t understand why I can&#39;t catch this access violation with my try-catch around this</i> <code>try</code>/<code>catch</code> are for C++ exceptions. A Seg-Fault / Access Violation is  not a C++ exception - hence it cannot be catched this way. Btw. after Access Violation it&#39;s probably the best to let that process die in peace... ;-) Found <a href=\"https://stackoverflow.com/a/457583/7478597\">SO: Catching access violation exceptions?</a> concerning this."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1554909472, "post_id": 55615612, "comment_id": 97925562, "body": "Code that reaches Undefined Behavior can, by definition, exhibit any behavior. This behavior can change at any time for any reason, including changing compiler. What I mean by <i>&quot;the result of UB expressing itself differently&quot;</i> is that your code probably contains Undefined Behavior which use to exhibit itself as doing whatever the developer was expecting, but changing compiler has alter that behavior in such a way that it causes your program to crash. This is not a problem with changing compiler, it&#39;s a problem with the code being incorrect in the first place."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1554913622, "post_id": 55615612, "comment_id": 97927837, "body": "Make sure that all of the dependent libraries were built with the new compiler. Binaries from Visual Studio 2010 will not be compatible."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10776888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93101f7dc85d3592a3ddc730b3de3313?s=128&d=identicon&r=PG&f=1", "display_name": "Fellnase", "link": "https://stackoverflow.com/users/10776888/fellnase"}, "edited": false, "score": 0, "creation_date": 1554912771, "post_id": 55616480, "comment_id": 97927418, "body": "Unfortunately so far it happens only on the test system without IDE. Can I debug a release version with disabeled opimization too or do I need a debug version?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1554913588, "post_id": 55616480, "comment_id": 97927814, "body": "<b><i>Can I debug a release version with disabeled opimization too</i></b> Yes, debug the RelWithDebInfo configuration. Also change the settings so there is no optimization."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 63, "user_id": 10776888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93101f7dc85d3592a3ddc730b3de3313?s=128&d=identicon&r=PG&f=1", "display_name": "Fellnase", "link": "https://stackoverflow.com/users/10776888/fellnase"}, "edited": false, "score": 0, "creation_date": 1554915001, "post_id": 55616480, "comment_id": 97928577, "body": "@Fellnase If you have to, you can remote debug, although experience is not perfect. This is useful if a debug build fails on the test system but not locally, debugging release crashes is still pretty difficult either way. <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/remote-debugging-cpp?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/visualstudio/debugger/&hellip;</a>"}], "tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": false, "score": 2, "last_activity_date": 1554910680, "creation_date": 1554910680, "answer_id": 55616480, "question_id": 55615612, "link": "https://stackoverflow.com/questions/55615612/why-does-my-function-crash-after-changing-visual-studio-versions/55616480#55616480", "title": "Why does my function crash after changing visual studio versions?", "body": "<p>The use of <a href=\"https://docs.microsoft.com/en-us/previous-versions/s240k6fz(v=vs.140)\" rel=\"nofollow noreferrer\"><code>AfxIsValidAddress</code></a> is very concerning.</p>\n\n<blockquote>\n  <p>Tests any memory address to ensure that it is contained entirely within the program's memory space.</p>\n</blockquote>\n\n<p>Worse, it only works in <strong>debug builds</strong> at all.</p>\n\n<blockquote>\n  <p>In non-debug builds, nonzero if lp is not NULL; otherwise 0.</p>\n</blockquote>\n\n<p>This makes no promise that it is what you want at all. If you delete an object, the memory is likely still within the application ready to be reused, not returned to the operating system, and things like <code>AfxIsValidAddress</code> will return true. Worse, when you allocator does reuse that memory, it will still return true, while the pointer actually now refers to some completely different, and <strong>unknown</strong> object, leading to heap corruption.</p>\n\n<p>This applies to all such similar functions, like <code>IsBadReadPtr</code>. Raymond Chen has a Microsoft blog post <a href=\"https://devblogs.microsoft.com/oldnewthing/20060927-07/?p=29563\" rel=\"nofollow noreferrer\">IsBadXxxPtr should really be called CrashProgramRandomly</a>.</p>\n\n<p>You will probably have to debug this in the IDE and find a specific problem, it is almost certainly a use after free issue, or a more serious issue elsewhere in the program overwriting the object. Can you produce it directly in the IDE rather than getting a dump file?</p>\n\n<blockquote>\n  <p>I also don't understand why I can't catch this access violation with my try-catch around this</p>\n</blockquote>\n\n<p>Access violations, and such on the various platforms are not C++ exceptions. And since they generally only happen after a programs memory got corrupted, are basically impossible to recover from. There is generally some platform specific means to interact with them.</p>\n"}], "owner": {"reputation": 63, "user_id": 10776888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93101f7dc85d3592a3ddc730b3de3313?s=128&d=identicon&r=PG&f=1", "display_name": "Fellnase", "link": "https://stackoverflow.com/users/10776888/fellnase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1555070606, "creation_date": 1554908003, "last_edit_date": 1555070606, "question_id": 55615612, "link": "https://stackoverflow.com/questions/55615612/why-does-my-function-crash-after-changing-visual-studio-versions", "title": "Why does my function crash after changing visual studio versions?", "body": "<p>I have an old 32-bit MFC application in C++ which was written with Visual Studio 2010. It ran without problems. Now I had to upgrade to Visual Studio 2017 and it crashes pretty often when I click on the treeview window. I have a dmp file and when I open it then I see that it crashes here:</p>\n\n<pre><code> BOOL CObject::IsKindOf(const CRuntimeClass* pClass) const\n {\n     ENSURE(this != NULL);\n     // it better be in valid memory, at least for CObject size\n     ASSERT(AfxIsValidAddress(this, sizeof(CObject)));\n\n     // simple SI case\n         CRuntimeClass* pClassThis = GetRuntimeClass(); //----&gt;HERE Crash \n\n     ENSURE(pClassThis);\n     return pClassThis-&gt;IsDerivedFrom(pClass);\n }\n</code></pre>\n\n<p>When I go back the call list then I end here:</p>\n\n<pre><code>//m_pTheModel is initialized with NULL\nif (bValidValue == true)\n    m_pTheModel = GetModel((WORD)lHint);\n\nif (m_pTheModel == NULL || !AfxIsValidAddress(m_pTheModel, sizeof(m_pTheModel)))\n{\n   lock.Unlock();\n   return;\n}\n\ntry\n{\n    if ((m_pTheModel-&gt;IsKindOf(RUNTIME_CLASS(CMyClassModel))))\n    ...\n}\ncatch (...)\n{\n}\n</code></pre>\n\n<p>m_pTheModel is not NULL but when I look at the values in the debugger, for some values the memory is not readable. </p>\n\n<p>What could the problem be? With the old version of visual studio I didn't have this problem. I have only recompiled this project and I had to set the target operation system to Windows XP.</p>\n\n<p>The error message is \u201cThe thread tried to read from or write to a virtual address for which it does not have the appropriate access.\u201d</p>\n\n<p>I also don't understand why I can't catch this access violation with my try-catch around this.</p>\n\n<p><strong>Update:</strong>\nI found the reason. It was a strcpy that overwrites my pointer.</p>\n"}, {"tags": ["c++", "rapidjson"], "answers": [{"tags": [], "owner": {"reputation": 1569, "user_id": 1694593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ec320e3d57fdbde4b7ecc8194b2a2d1?s=128&d=identicon&r=PG", "display_name": "Wander3r", "link": "https://stackoverflow.com/users/1694593/wander3r"}, "is_accepted": true, "score": 0, "last_activity_date": 1554911950, "creation_date": 1554911950, "answer_id": 55616820, "question_id": 55615556, "link": "https://stackoverflow.com/questions/55615556/print-json-with-matching-key-rapidjson/55616820#55616820", "title": "Print JSON with matching key - RapidJSON", "body": "<p>You don't need to iterate each member and see if it matches in the 'key' list. Rather use <code>document.HasMember()</code> to see if the key exists.</p>\n\n<pre><code>#include \"rapidjson/document.h\"\n#include \"rapidjson/writer.h\"\n#include \"rapidjson/stringbuffer.h\"\n#include &lt;iostream&gt;\n\nusing namespace rapidjson;\n\nconst char* kTypeNames[] = { \"First\", \"text\", \"print\", \"key\" };\n\nint main() {\n    // 1. Parse a JSON string into DOM.\n    const char json[] =\n        \" { \\\"First\\\" : \\\"a\\\", \\\"text\\\" : \\\"b\\\" ,\\\"key\\\" : \\\"hello\\\" ,\\\"print\\\" : \\\"1\\\",\\\"print\\\" : \\\"2\\\",\\\"no_key\\\" : \\\"2\\\"} \";\n    // ...\n    Document document;\n    document.Parse(json);\n\n    printf(json);\n\n    printf(\"\\nAccess values in document:\\n\");\n    assert(document.IsObject());\n\n  //For each type in ktypenames, see if json has member\n\n    for (auto Typename : kTypeNames) {\n        if (document.HasMember(Typename)) {\n            std::cout &lt;&lt; Typename &lt;&lt; \":\" &lt;&lt; document[Typename].GetString() &lt;&lt; std::endl;\n        }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 10005890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba54ee97219486045c6176419b2ad21c?s=128&d=identicon&r=PG&f=1", "display_name": "DDBE", "link": "https://stackoverflow.com/users/10005890/ddbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 55616820, "answer_count": 1, "score": 0, "last_activity_date": 1554911950, "creation_date": 1554907845, "last_edit_date": 1554908610, "question_id": 55615556, "link": "https://stackoverflow.com/questions/55615556/print-json-with-matching-key-rapidjson", "title": "Print JSON with matching key - RapidJSON", "body": "<p>I'm trying to print from a JSON only the values that matching some keys:   </p>\n\n<pre><code>#include \"rapidjson/document.h\"\n#include \"rapidjson/writer.h\"\n#include \"rapidjson/stringbuffer.h\"\n#include &lt;iostream&gt;\n\nusing namespace rapidjson;\n\nchar* kTypeNames[] = { \"First\", \"text\", \"print\", \"key\" };\n\nint main() {\n// 1. Parse a JSON string into DOM.\nconst char json[] =\n\" { \\\"First\\\" : \\\"a\\\", \\\"text\\\" : \\\"b\\\" ,\\\"key\\\" : \\\"hello\\\" ,\n\\\"print\\\" : \\\"1\\\",\\\"print\\\" : \\\"2\\\",\\\"no_key\\\" : \\\"2\\\"} \";\n// ...\nDocument document;\ndocument.Parse(json);\n\nprintf(json);\n\nprintf(\"\\nAccess values in document:\\n\");\nassert(document.IsObject());\n\nfor (Value::ConstMemberIterator itr = document.MemberBegin();\nitr !=document.MemberEnd(); ++itr)\n{\n    //how to print element that matches with kTypeNames array?\n}\n}\n</code></pre>\n\n<p>Keys needed are First, text, print and key, and I want to ignore no_key value.\nSo I want to print only a, b, hello, 1 and do not print 2.</p>\n\n<p>I'm looking and the documentation trying to find out how to do it.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "inheritance", "linker"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554907896, "post_id": 55615555, "comment_id": 97924555, "body": "Why <code>inline</code> in definitions?"}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554907976, "post_id": 55615555, "comment_id": 97924606, "body": "Well, I know if the method is defined entirely in class body then it&#39;s inlined by default, but if I define it outside, then it&#39;s not, and I want it to be. Cuz those methods will be called extremely often and I don&#39;t want to lose performance due to function call overhead"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1554907980, "post_id": 55615555, "comment_id": 97924608, "body": "What do you think you getting by using <code>inline</code>? Removing the <code>inline</code> is the correct soution."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1554908026, "post_id": 55615555, "comment_id": 97924642, "body": "@dabljues You&#39;re misunderstanding what <code>inline</code> does. Surprisingly it has nothing to do with inlining functions."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 0, "creation_date": 1554908283, "post_id": 55615555, "comment_id": 97924809, "body": "Gosh, that&#39;s embarrassing. Now I know, thank you! Should I delete/close the question then?"}, {"owner": {"reputation": 941, "user_id": 1849287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14e272de9cfe3615952604a7392ebdc?s=128&d=identicon&r=PG", "display_name": "Nellie Danielyan", "link": "https://stackoverflow.com/users/1849287/nellie-danielyan"}, "edited": false, "score": 0, "creation_date": 1554908457, "post_id": 55615555, "comment_id": 97924898, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3992980/c-inline-member-function-in-cpp-file\">C++ inline member function in .cpp file</a>"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1554909785, "post_id": 55615555, "comment_id": 97925741, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/inline\" rel=\"nofollow noreferrer\">inline</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 0, "creation_date": 1554908628, "post_id": 55615731, "comment_id": 97925024, "body": "Thank you! This guy&#39;s answer, which @Aconcagua pasted: <a href=\"https://stackoverflow.com/a/5971755/1312382\">stackoverflow.com/a/5971755/1312382</a>, suggests &quot;Of course, this is in addition to the hint to the compiler that the function should be compiled inline into where it is used (avoiding a function call overhead).&quot;. So is he wrong then?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 1, "creation_date": 1554908764, "post_id": 55615731, "comment_id": 97925102, "body": "@dabljues yep, this is obsolete for a while. Compilers nowadays completely ignore <code>inline</code> when it comes to function inlining, and do it based on their own heuristics algorithms. Moreover, inlining is increasingly a property of a call site, rather than a function itself - function could be inlined in one place, and called in another."}, {"owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "edited": false, "score": 0, "creation_date": 1554908876, "post_id": 55615731, "comment_id": 97925180, "body": "Thank you, that was really clarifying!"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1554913604, "post_id": 55615731, "comment_id": 97927824, "body": "@SergeyA compiler do actually still use <code>inline</code> declaration in their heuristics. And a function being inline has a lot to do with the function being inlined because it is not possible for the compiler to inline function calls across TU&#39;s. (although, it is possible for linkers)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1554917537, "post_id": 55615731, "comment_id": 97929818, "body": "@eerorika I still maintain that <code>inline</code> is a property of the language, rather than actual inlining. For example, a function which is not declared inline will still be inlined if it is&#39;s definition is visible, provided it is inlineable. The opposite is also true - an inline function which is not inlineable won&#39;t be inlined. Bottom line - the specifier is not related."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1554925199, "post_id": 55615731, "comment_id": 97933332, "body": "@SergeyA I agree with everything, except for your conclusion. A rectangle can be very wide, but have a small area (if it has small enough height). A rectangle can be very narrow, but have a large area (if it is tall enough). Thus you might conclude that the area of a rectangle is not related to the width of the rectangle. But that would be a false conclusion: They are directly related. Your conclusion has the same problem."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1554925368, "post_id": 55615731, "comment_id": 97933428, "body": "@eerorika it feels like splitting hairs to me. From practical perspective, I think we are really in agreement here."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1554908344, "creation_date": 1554908344, "answer_id": 55615731, "question_id": 55615555, "link": "https://stackoverflow.com/questions/55615555/c-inheritance-cannot-define-methods-in-cpp-file/55615731#55615731", "title": "C++ inheritance - cannot define methods in cpp file", "body": "<p>Your code has a bug in it. According to <a href=\"https://en.cppreference.com/w/cpp/language/inline\" rel=\"nofollow noreferrer\">cppreference</a></p>\n\n<blockquote>\n  <p>The definition of an inline function or variable (since C++17) must be\n  present in the translation unit where it is accessed (not necessarily\n  before the point of access).</p>\n</blockquote>\n\n<p>Obviously, when you put your definitions in .cpp file and call those functions from other translation units, this condition is not satisfied.</p>\n\n<p>So your two alternative approaches both work because they either</p>\n\n<ul>\n<li>Remove this condition altogether (when you remove inline specifier)</li>\n<li>Make the definition visible</li>\n</ul>\n\n<p>And last, but not the least - C++ <code>inline</code> specifier has nothing to do with function inlining. There are other, compiler-dependent ways to request the actual inlining, i.e. <code>__forceinline</code> in various compilers.</p>\n"}], "owner": {"reputation": 1002, "user_id": 10638608, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "dabljues", "link": "https://stackoverflow.com/users/10638608/dabljues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 55615731, "answer_count": 1, "score": 0, "last_activity_date": 1554908344, "creation_date": 1554907839, "last_edit_date": 1554907896, "question_id": 55615555, "link": "https://stackoverflow.com/questions/55615555/c-inheritance-cannot-define-methods-in-cpp-file", "title": "C++ inheritance - cannot define methods in cpp file", "body": "<p>I have a following problem. I have these 3 files (I made a simplified example, but the errors are the same):</p>\n\n<p>foo.hpp</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n\nclass foo\n{\nprotected:\n    virtual void bar() const noexcept = 0;\n\npublic:\n    foo() = default;\n    virtual void callbar() = 0;\n};\n\nclass baz : public foo\n{\nprotected:\n    void bar() const noexcept override;\n\npublic:\n    void callbar();\n};\n</code></pre>\n\n<p>foo.cpp</p>\n\n<pre><code>#include \"foo.hpp\"\n\ninline void baz::bar() const noexcept { std::cout &lt;&lt; \"baz::bar()\" &lt;&lt; '\\n'; }\n\ninline void baz::callbar() { bar(); }\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"foo.hpp\"\n\nauto main() -&gt; int\n{\n    baz b;\n    b.callbar();\n}\n</code></pre>\n\n<p>Compiler (actually the linker I guess) gives me the following error: </p>\n\n<pre><code>foo.cpp\nmain.cpp\nGenerating Code...\nMicrosoft (R) Incremental Linker Version 14.15.26729.0\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\n/out:foo.exe\nfoo.obj\nmain.obj\nmain.obj : error LNK2001: unresolved external symbol \"protected: virtual void __cdecl baz::bar(void)const \" (?bar@baz@@MEBAXXZ)\nmain.obj : error LNK2019: unresolved external symbol \"public: virtual void __cdecl baz::callbar(void)\" (?callbar@baz@@UEAAXXZ) referenced in function main\nfoo.exe : fatal error LNK1120: 2 unresolved externals\n</code></pre>\n\n<p>Now I've gotten around this by doing either one of those two things:</p>\n\n<ul>\n<li>Remove <code>inline</code> keyword</li>\n<li>Leave <code>inline</code> as it is, but move the methods definitions to <code>.hpp</code> file</li>\n</ul>\n\n<p>If I do one of those things, everything works. But my question is: why? In my real code I really wan the compiler to inline the method calls plus I want them to be defined in <code>.cpp</code> file, to make my <code>.hpp</code> file more clear. Is there a solution to that?</p>\n"}, {"tags": ["c++", "multithreading", "qt", "qt-events", "queued-connection"], "comments": [{"owner": {"reputation": 1350, "user_id": 1698678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c3dcda949d1adcc6db14345586b2b9?s=128&d=identicon&r=PG", "display_name": "PlinyTheElder", "link": "https://stackoverflow.com/users/1698678/plinytheelder"}, "edited": false, "score": 3, "creation_date": 1554907760, "post_id": 55615364, "comment_id": 97924467, "body": "As far as I am aware, inter-thread signal-slot communication with Qt::QueuedConnection is completely safe, no matter how many threads you have. It would be a glaring hole in Qt thread handling otherwise, wouldn&#39;t it?"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 2, "creation_date": 1554927193, "post_id": 55615364, "comment_id": 97934229, "body": "The per-thread event queue follows the general producer-consumer pattern. The queue&#39;s thread can be either a consumer (when it picks up events and handles them by sending them to the responsible <code>QObject</code>) or a producer (e.g. when it posts an event to its own queue). The other threads are usually producers (since they can post events for that thread to handle). I would suggest reading <a href=\"https://woboq.com/blog/how-qt-signals-slots-work-part3-queuedconnection.html\" rel=\"nofollow noreferrer\">this excellent article</a> if you are interested in the internals of Qt cross-thread signal/slot connections."}], "answers": [{"tags": [], "owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "is_accepted": false, "score": 2, "last_activity_date": 1554949707, "last_edit_date": 1592644375, "creation_date": 1554949707, "answer_id": 55623817, "question_id": 55615364, "link": "https://stackoverflow.com/questions/55615364/is-qts-event-loop-thread-safe-or-atomic-how-is-it-synchronised-when-dealing-wi/55623817#55623817", "title": "Is Qt&#39;s event loop thread safe or atomic? How is it synchronised when dealing with `QueuedConnection`?", "body": "<p>The article mentioned in <a href=\"https://stackoverflow.com/questions/55615364/is-qts-event-loop-thread-safe-or-atomic-how-is-it-synchronised-when-dealing-wi#comment97934229_55615364\">this comment</a>, says that the event queue is protected by a mutex.</p>\n<blockquote>\n<h3><a href=\"https://woboq.com/blog/how-qt-signals-slots-work-part3-queuedconnection.html\" rel=\"nofollow noreferrer\">How Qt Signals and Slots Work - Part 3 - Queued and Inter Thread Connections</a></h3>\n<p>A <code>QueuedConnection</code> will post an event to the event loop to eventually be handled.</p>\n<p>When posting an event (in <code>QCoreApplication::postEvent</code>), the event will be pushed in a per-thread queue (<code>QThreadData::postEventList</code>). <strong>The event queue is protected by a mutex, so there is no race conditions when threads push events to another thread's event queue</strong>.</p>\n<p>Once the event has been added to the queue, and if the receiver is living in another thread, we notify the event dispatcher of that thread by calling <code>QAbstractEventDispatcher::wakeUp</code>. This will wake up the dispatcher if it was sleeping while waiting for more events. If the receiver is in the same thread, the event will be processed later, as the event loop iterates.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": false, "score": 2, "last_activity_date": 1555066312, "last_edit_date": 1555066312, "creation_date": 1555065887, "answer_id": 55649880, "question_id": 55615364, "link": "https://stackoverflow.com/questions/55615364/is-qts-event-loop-thread-safe-or-atomic-how-is-it-synchronised-when-dealing-wi/55649880#55649880", "title": "Is Qt&#39;s event loop thread safe or atomic? How is it synchronised when dealing with `QueuedConnection`?", "body": "<p>Qt event loop is thread safe but not atomic. </p>\n\n<p><strong>Thread safety</strong></p>\n\n<p>As long as <code>Object2OfThread2</code> state is always modified by the thread associated with <code>Thread2</code>, there won't be any race conditions. At most one slot will be executed at any time.</p>\n\n<p><strong>Atomicity</strong></p>\n\n<p>The order of execution of slots is governed by :</p>\n\n<ul>\n<li>usual thread preemption</li>\n<li>The order in which the connections were made to this slot. </li>\n<li>The other slots connected to the signal.</li>\n</ul>\n\n<p>So I would not advise to assume a specific order of execution for a given slot.</p>\n\n<blockquote>\n  <p>what if Thread1 and Thread3 both post a signal simultaneously to Thread2's event loop</p>\n</blockquote>\n\n<ul>\n<li>First, it is different signals : two threads cannot emit the same signal of the same object as this object resides in only one QObject</li>\n<li><a href=\"https://doc.qt.io/qt-5/qobject.html#connect\" rel=\"nofollow noreferrer\">The signal connected first wins</a>, assuming these signals are only connected to <code>Object2OfThread2</code> even if they are \"posted\" simultaneously.</li>\n<li>If for instance Thread1 signals are connected to other signals\\slots, and those connections are made before <code>Object2OfThread2, &amp;Object2::Slot</code>, they will be processed before being posted on <code>Object2OfThread2</code> event loop. If the signals <strong>emitted</strong> simultaneously, Thread3 signal will be the first queued, so the first to execute. </li>\n</ul>\n"}], "owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1555066312, "creation_date": 1554907286, "question_id": 55615364, "link": "https://stackoverflow.com/questions/55615364/is-qts-event-loop-thread-safe-or-atomic-how-is-it-synchronised-when-dealing-wi", "title": "Is Qt&#39;s event loop thread safe or atomic? How is it synchronised when dealing with `QueuedConnection`?", "body": "<p>Suppose 2 <code>QThread</code>s are running with following relation:</p>\n\n<pre><code>connect(&amp;Object1OfThread1, &amp;Object1::Signal, \n        &amp;Object2OfThread2, &amp;Object2::Slot, Qt::QueuedConnection);\n</code></pre>\n\n<p>So when an object from one thread raises a signal, the other thread's slot is invoked. As discussed in <a href=\"https://stackoverflow.com/questions/15051553/qt-signals-queuedconnection-and-directconnection\">Qt signals (QueuedConnection and DirectConnection)</a>, due to <code>Qt::QueuedConnection</code>, the <code>Signal()</code> is posted/appended into the event loop of the Thread2. When it turn comes, the <code>Slot()</code> is invoked.</p>\n\n<p><strong>Question</strong>: Is the event loop itself thread-safe?<br>\nviz. what if Thread1 and Thread3 both post a signal simultaneously to Thread2's event loop.</p>\n"}, {"tags": ["c++", "c++-cli", "member-function-pointers"], "comments": [{"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1554906706, "post_id": 55614770, "comment_id": 97923829, "body": "@AndyG while it is certainly very bad practise to use C-style casts in C++, I think this should be fine as long as the member pointer is only used with objects that are actually of type <code>B</code>. The C-style cast here <a href=\"https://timsong-cpp.github.io/cppwp/n4659/expr.cast#4.2\" rel=\"nofollow noreferrer\">should correspond</a> to a <code>static_cast</code> since <code>static_cast</code> can convert from a pointer to member of a class to a pointer to member of one of its base classes <a href=\"https://timsong-cpp.github.io/cppwp/n4659/expr.static.cast#12\" rel=\"nofollow noreferrer\">&#91;expr.static.cast&#93;/12</a>?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554906873, "post_id": 55614770, "comment_id": 97923927, "body": "How does the library actually use the member function pointer? I would imagine it must somehow use it as a sort of callback? If that is the case, does this callback get any information that you could use to map it back to a particular delegate?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554907237, "post_id": 55614770, "comment_id": 97924170, "body": "@MichaelKenzel: I suppose the code shown is safe, so long as when it actually calls the function, it&#39;s casted back to an appropriate type."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1554907789, "post_id": 55614770, "comment_id": 97924481, "body": "@AndyG I don&#39;t think there is a need to cast back. The only thing that is necessary is that the dynamic type of the object the member pointer is used with is actually the correct type (<code>B</code> in this case) <a href=\"https://timsong-cpp.github.io/cppwp/n4659/expr.mptr.oper#4\" rel=\"nofollow noreferrer\">&#91;expr.mptr.oper&#93;/4</a>. At least as far as my understanding goes, member pointers are supposed to have any necessary offset for the this pointer encoded in their value\u2026"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554908877, "post_id": 55614770, "comment_id": 97925181, "body": "@MichaelKenzel: Well I&#39;ll be. Looks like you&#39;re 100% right. Thanks for pointing that out. Didn&#39;t know about the rule for the dynamic type. I had thought it was undefined but worked just because the offsets lined up by chance; in a multi-inheritance situation I assumed they would not. Thanks."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1554909165, "post_id": 55614770, "comment_id": 97925368, "body": "@AndyG I also wasn&#39;t all that sure until I looked it up. This sort of stuff is just not something that I (or anyone I&#39;d ever known) end up using on a regular basis because it&#39;s just\u2026something else\u2026 ;-)"}, {"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554912865, "post_id": 55614770, "comment_id": 97927479, "body": "@MichaelKenzel The library iterates through a collection with <code>A</code> pointers and uses <code>getTheCollection</code>. Then it invokes the member function using the <code>A</code> pointer and member function pointer. In the real situation <code>FooBar</code> contains a few more fields, but none that can be used to do anything (they need to remain the same or they will break things). The member function is called without any arguments. I actually have the same problem with another Register_X function that actually takes 2 arguments, but as I have no control over the calling, I cannot use them to my advantage"}, {"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1554912923, "post_id": 55614770, "comment_id": 97927505, "body": "Inside the function that iterates the <code>A</code> collection <code>identifier</code> is known, but never passed to the &#39;delegate&#39;."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1555220552, "post_id": 55614770, "comment_id": 98030486, "body": "I&#39;m afraid the only solution I can come up with in this case would be to dynamically allocate thunks that forward/translate the member function call to a call of a delegate. It&#39;s possible to do this, however, note that the fundamental problem here is the design of this collection and nothing else. So if at all possible, I would consider getting rid of this collection and replacing it with something more sensible\u2026"}, {"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1555312601, "post_id": 55614770, "comment_id": 98052103, "body": "@MichaelKenzel Thanks for the response. Yeah thats the entire problem with the question, I&#39;m unable to change things. I think I&#39;m going to go with accepting the limitations and just separating the managed side from the unmanaged side in this case."}], "owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554906047, "creation_date": 1554905626, "last_edit_date": 1554906047, "question_id": 55614770, "link": "https://stackoverflow.com/questions/55614770/determine-context-inside-member-function-being-called-by-a-pointer-to-it", "title": "Determine context inside member function being called by a pointer to it", "body": "<p>The title might not be explanatory enough, since the problem is hard to describe.</p>\n\n<p>I have the following (simplified) two data structures in a Library which I cannot change:</p>\n\n<pre><code>class A;\n\ntypedef void(A::*AMemFunc)();\nstruct FooBar\n{\n    AMemFunc func;\n    std::string identifier;\n};\n\nclass A\n{\n    private:\n        std::vector&lt;FooBar *&gt; theCollection;\n\n    public:\n        virtual ~A()\n        {\n            for (auto fooBar : theCollection)\n            {\n                delete fooBar;\n            }\n\n            theCollection.clear();\n        }\n\n        void AddToCollection(AMemFunc func, const std::string &amp;identifier)\n        {\n            FooBar *newFooBar = new FooBar();\n            newFooBar-&gt;func = func;\n            newFooBar-&gt;identifier = identifier;\n\n            theCollection.push_back(newFooBar);\n        }\n\n        void RemoveFromCollection(const std::string &amp;identifier)\n        {\n            for (auto collectionIt = theCollection.begin(); collectionIt != theCollection.end(); collectionIt++)\n            {\n                FooBar *currentFooBar = *collectionIt;\n                if (currentFooBar-&gt;identifier == identifier)\n                {\n                    collectionIt = theCollection.erase(collectionIt);\n                    delete currentFooBar;\n                    currentFooBar = nullptr;\n                }\n            }\n        }\n\n        const std::vector&lt;FooBar *&gt; &amp;getTheCollection() const\n        {\n            return theCollection;\n        }\n};\n</code></pre>\n\n<p>The member function is invoked inside the library and is entirely out of my control. Now a user of the library may create sub-classes of A and add a member function to the collection, as follows:</p>\n\n<pre><code>class B : public A\n{\n    public:\n        B()\n        {\n            AddToCollection((AMemFunc)&amp;B::Test, \"MyIdentifier\");\n        }\n\n        void Test()\n        {\n\n        }\n};\n</code></pre>\n\n<p>Now I want to create a C++/CLI wrapper for this functionality (inheriting from A and being able to assign a member method). The details of creating a B instance is omitted for simplicity's sake:</p>\n\n<pre><code>ref class WrapperB\n{\n    public:\n        delegate void AMemFuncDelegate();\n\n        void AddToCollection(AMemFuncDelegate ^func, String ^identifier)\n        {\n            // Do stuff\n        }\n};\n</code></pre>\n\n<p>But I am presented with a problem of how I could possibly allow dynamic creation of member function pointers.</p>\n\n<p>These are the sub-par solutions I came up with so far:</p>\n\n<ul>\n<li>Ignore the unmanaged std::vector altogether and manage it completely in c++/cli (details are ommitted, but it is possible). The drawback is that the C++ side has no interop capabilities (or knowledge about) with the managed functions.</li>\n<li>Define N member functions in <code>B</code> which transmit a unique id to the managed side which can be coupled to a delegate. This limits the amount of things you can add to the collection and gives a lot of code clutter and duplication. Also when a user calls <code>RemoveFromCollection</code> I cannot detect a removal of a <code>FooBar</code> (no virtual destructor either) and decouple the managed delegate. But this is really a problem in all situations</li>\n</ul>\n\n<p>Both solutions I came up with thus-far are non-ideal and I'm not sure if I'm missing something here.</p>\n\n<p>Edit: I cannot use c++11 or higher on the unmanaged side.</p>\n"}, {"tags": ["c++", "tensorflow", "valgrind", "tensorflow-lite"], "comments": [{"owner": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1554917330, "post_id": 55614711, "comment_id": 97929707, "body": "The warning is just a warning.  It is not shown if you decrease the valgrind verbosity using -q.  I suggest you use gdb+vgdb to see what your program does when running under valgrind.  See <a href=\"http://www.valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver\" rel=\"nofollow noreferrer\">valgrind.org/docs/manual/&hellip;</a> for more info."}, {"owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "reply_to_user": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1554918285, "post_id": 55614711, "comment_id": 97930211, "body": "I&#39;ve done that yes to at least get the trace and see where it stucks."}, {"owner": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1554924612, "post_id": 55614711, "comment_id": 97933068, "body": "Has this shown anything ? Is your program still progressing ?"}, {"owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "reply_to_user": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1554927462, "post_id": 55614711, "comment_id": 97934351, "body": "I am at home at the moment and ran valgrind for the night. I can get the trace fast since the error is at the beginning. I will edit my post with the trace tomorrow if I don&#39;t have a good surprise tomorrow morning."}, {"owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "reply_to_user": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1554973400, "post_id": 55614711, "comment_id": 97948773, "body": "The valgrind finally passed. I cannot explain why and how. I know valgring is longer than a normal run but here a normal run is about 3min and a valgrind run is 30min I didn&#39;t remember it could took so long. Does the valgrind overhead is directly linked to the amount of memory allocated (I use the memcheck tool) ?"}, {"owner": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1555016836, "post_id": 55614711, "comment_id": 97972829, "body": "A factor 10 is not unusual.  The slowdown can depend significantly on what your application does and what options you give to valgrind.  You might be interested to look at <a href=\"https://archive.fosdem.org/2015/schedule/event/valgrind_tuning/attachments/slides/743/export/events/attachments/valgrind_tuning/slides/743/tuning_V_for_your_workload.pdf\" rel=\"nofollow noreferrer\">archive.fosdem.org/2015/schedule/event/valgrind_tuning/&hellip;</a>"}, {"owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "reply_to_user": {"reputation": 3079, "user_id": 3035584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3f84eebae0cfccb50e3be86dad24f1?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/3035584/phd"}, "edited": false, "score": 0, "creation_date": 1555080694, "post_id": 55614711, "comment_id": 97997338, "body": "My CI will always run the same options: --leak-check=full, --track-origins=yes and --show-leak-kinds=definite,possible. I wasn&#39;t fully aware about the vgdb / gdb possibilities. Thanks for pointing that."}], "owner": {"reputation": 957, "user_id": 1393510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d577ec4e03225c00a51523736dbe006a?s=128&d=identicon&r=PG&f=1", "display_name": "baptiste", "link": "https://stackoverflow.com/users/1393510/baptiste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1555357781, "creation_date": 1554905483, "last_edit_date": 1555357781, "question_id": 55614711, "link": "https://stackoverflow.com/questions/55614711/valgrind-on-tensorflow-lite-invoke-makes-it-run-indefinitely", "title": "Valgrind on Tensorflow Lite invoke makes it run indefinitely", "body": "<p>I have a custom library that wraps either Tensorflow or Tensorflow Lite, depending on the device that should run a given network. Since the goal is to exports this library, I have continuous integration that at some point checks the leaks and any errors a valgrind run could return. </p>\n\n<p>In that context, Valgrind seems to struggle running <code>TFL_InterpreterInvoke</code> from the 1.12.1 Tensorflow release. I simply have a warning <code>Warning: set address range perms: large range [0x14f33050, 0x2b0330d0) (undefined)</code> that tells me I allocated ~350Mo.</p>\n\n<p>Is there a way to give valgrind a bigger address range? It seems tensorflow is doing <code>mmap</code> allocations, is this the issue, can I tell valgrind to not check those?</p>\n"}, {"tags": ["c++", "unit-testing", "googletest"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554905756, "post_id": 55614595, "comment_id": 97923264, "body": "Maybe <a href=\"https://en.cppreference.com/w/cpp/types/is_base_of\" rel=\"nofollow noreferrer\">std::is_base_of</a> could be of use.."}], "answers": [{"tags": [], "owner": {"reputation": 2605, "user_id": 10420039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1YiNn.png?s=128&g=1", "display_name": "Hiroki", "link": "https://stackoverflow.com/users/10420039/hiroki"}, "is_accepted": true, "score": 0, "last_activity_date": 1554941021, "last_edit_date": 1554941021, "creation_date": 1554918232, "answer_id": 55618513, "question_id": 55614595, "link": "https://stackoverflow.com/questions/55614595/identifying-the-used-base-class-in-a-type-parameterized-test-using-googletest/55618513#55618513", "title": "Identifying the used base class in a type-parameterized Test using googletest", "body": "<p>You can label <code>base1&lt;1&gt;</code>, <code>base1&lt;2&gt;</code>, <code>base2&lt;1&gt;</code>, <code>base2&lt;2&gt;</code>, ... by one dimensional integers <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, ... using the following class template <code>TestsWrapper</code>.\nMore specifically, <code>TestsWrapper&lt;...T&gt;::getIdx&lt;U&gt;()</code> returns the position of the type <code>U</code> in the <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\"><strong>parameter pack</strong></a> <code>...T</code>.\nFor instance, </p>\n\n<ul>\n<li><code>TestsWrapper&lt;A,B,C,D,E&gt;::getIdx&lt;A&gt;()</code> is <code>0</code>, </li>\n<li><code>TestsWrapper&lt;A,B,C,D,E&gt;::getIdx&lt;B&gt;()</code> is <code>1</code>, </li>\n<li><code>TestsWrapper&lt;A,B,C,D,E&gt;::getIdx&lt;C&gt;()</code> is <code>2</code>, </li>\n</ul>\n\n<p>and so on.\nThis enables us to identify the tested class as <code>TestsWrapper&lt;base1&lt;1&gt;, base1&lt;2&gt;, base2&lt;1&gt;, base2&lt;2&gt;&gt;::getIdx&lt;TypeParam&gt;()</code> at compile-time:</p>\n\n<p><a href=\"https://wandbox.org/permlink/DEIY1fH7QaedW8jD\" rel=\"nofollow noreferrer\"><strong>Live DEMO</strong></a></p>\n\n<pre><code>template&lt;class ...T&gt;\nclass TestsWrapper\n{\n   template&lt;class U&gt;\n   static constexpr std::size_t getIdx_impl()\n   {\n       return 0;\n   }\n\n   template&lt;class U, class T0, class ...Ts&gt;\n   static constexpr std::size_t getIdx_impl()\n   {\n       return std::is_same&lt;U, T0&gt;::value ? 0 : (getIdx_impl&lt;U, Ts...&gt;() + 1);\n   }\n\npublic:\n   using Types = ::testing::Types&lt;T...&gt;;\n\n   template&lt;class U&gt;\n   static constexpr std::size_t getIdx()\n   {\n       return getIdx_impl&lt;U, T...&gt;();\n   }\n};\n</code></pre>\n\n<p>The usage example of this class template for the typed tests is as follows.\nHere <code>idx</code> is the above integer label <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, ... and saves which type is currently tested.\nYou can use this label to identify the currently tested class.\nI have already checked that this approach well works in my Windows environment:</p>\n\n<pre><code>using TWrapper = TestsWrapper&lt;base1&lt;1&gt;, base1&lt;2&gt;, base2&lt;1&gt;, base2&lt;2&gt;&gt;;\n\ntemplate &lt;typename T&gt;\nclass test : public ::testing::Test {};\n\nTYPED_TEST_CASE(test, TWrapper::Types);\n\nTYPED_TEST(test, testname)\n{\n   constexpr auto idx = TWrapper::getIdx&lt;TypeParam&gt;();\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11340693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906299ebe480d9502180d7d381b432da?s=128&d=identicon&r=PG&f=1", "display_name": "Karazhjo", "link": "https://stackoverflow.com/users/11340693/karazhjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 55618513, "answer_count": 1, "score": 1, "last_activity_date": 1554941021, "creation_date": 1554905152, "question_id": 55614595, "link": "https://stackoverflow.com/questions/55614595/identifying-the-used-base-class-in-a-type-parameterized-test-using-googletest", "title": "Identifying the used base class in a type-parameterized Test using googletest", "body": "<p>A physics simulation is being refurbished and I am trying to write unittests for functions which are to be replaced using type-parameterized tests. The basic setup looks something like this:</p>\n\n<pre><code>using MyTypes = ::testing::Types&lt;base1&lt;1&gt;, base1&lt;2&gt;, base2&lt;1&gt;, base2&lt;2&gt;&gt;;\nTYPED_TEST_CASE(tests, MyTypes);\nTYPED_TEST(tests, testname){\n  auto obj = clname(TypeParam);\n  auto parameters = generate_values(TypeParam);      \n  for( auto&amp; p : parameters ){\n    // Test if obj.func(p) equals the saved values\n  }\n}\n</code></pre>\n\n<p>Since the number of base classes and generated values is large, I'd like to write the outputs of the current (presumed correct) version to a file and compare the outputs of new versions to these values. The function (func) changes depending on TypeParam, so I need to save the used base class in some form as well.</p>\n\n<p>However, I don't know how to identify the base class used: One solution would be to save and compare the typeid, as in saving</p>\n\n<pre><code>typeid(TypeParam).name()\n</code></pre>\n\n<p>along with the results, but I've been told that this is value can change between machines and is therefore not useful as a value to use. I've tried to find the corrosponding entry in MyTypes, i.e. saving i for which</p>\n\n<pre><code>std::is_same&lt;MyTypes[i],TypeParam&gt;::value\n</code></pre>\n\n<p>is true, but this seems not to be the case for any i. Is there any good way to do this with a type-parameterized test? Or do I need to use something else entirely?</p>\n"}, {"tags": ["c++", "function", "templates"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554905113, "post_id": 55614519, "comment_id": 97922896, "body": "what do you actually want to achieve? btw <code>sort_function(test_ordering_container)</code> this is not  a function, but you call the function and it returns a vector and a vector is not a function ;)"}, {"owner": {"reputation": 424, "user_id": 3520726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678a32857aa0b85042868b22233c81b2?s=128&d=identicon&r=PG&f=1", "display_name": "Mdp11", "link": "https://stackoverflow.com/users/3520726/mdp11"}, "edited": false, "score": 0, "creation_date": 1554905274, "post_id": 55614519, "comment_id": 97922987, "body": "I&#39;m trying to get that template function to receive 3 parameters, a vector of T, a vector of U, and a function that can sort the second vector, but I want to call that function inside the template &quot;special_sort&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1554920835, "last_edit_date": 1554920835, "creation_date": 1554905737, "answer_id": 55614801, "question_id": 55614519, "link": "https://stackoverflow.com/questions/55614519/passing-a-specific-function-to-a-template/55614801#55614801", "title": "Passing a specific function to a template", "body": "<p>There are two mistakes. First, use this:</p>\n\n<pre><code>special_sort&lt;std::string, int&gt;(test_container, test_ordering_container, sort_function);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>special_sort&lt;std::string, int&gt;(test_container, test_ordering_container, sort_function(test_ordering_container));\n</code></pre>\n\n<p>You were passing the result of the function instead of the function itself.</p>\n\n<p>You also need to declare the argument of <code>special_sort</code> as</p>\n\n<pre><code>const std::function&lt;std::vector&lt;std::pair&lt;unsigned int, unsigned int&gt;&gt;(std::vector&lt;U&gt;&amp;)&gt;&amp; sort_function\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>std::function&lt;std::vector&lt;std::pair&lt;unsigned int, unsigned int&gt;&gt;(std::vector&lt;U&gt;&amp;)&gt;&amp; sort_function\n</code></pre>\n\n<p>Because <code>sort_function</code> refers to a standard function call, it needs to be converted to a <code>std::function</code> to be able to call <code>special_sort</code>. However, this implicit conversion will create a temporary object which cannot be passed as reference. But a const reference is accepted for temporary objects.</p>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 2, "last_activity_date": 1554922148, "last_edit_date": 1554922148, "creation_date": 1554905805, "answer_id": 55614826, "question_id": 55614519, "link": "https://stackoverflow.com/questions/55614519/passing-a-specific-function-to-a-template/55614826#55614826", "title": "Passing a specific function to a template", "body": "<p>So you got two mistakes here.</p>\n\n<p>The first is this:</p>\n\n<pre><code>special_sort&lt;std::string, int&gt;(\n    test_container, test_ordering_container, \n    sort_function(test_ordering_container)\n);//     --------^-----------------------^\n</code></pre>\n\n<p>Instead of sending the function, you call it and send the result.</p>\n\n<p>The compiler complains about a vector not convertible to a <code>std::function</code>.</p>\n\n<pre><code>special_sort&lt;std::string, int&gt;(\n    test_container, test_ordering_container, \n    sort_function\n);//        ^------ the function itself\n</code></pre>\n\n<hr>\n\n<p>The second error is taking the function by mutable reference.</p>\n\n<p>The type of a function is <strong>not</strong> <code>std::function</code>. The type of <code>sort_function</code> is a function pointer type.</p>\n\n<p>The class <code>std::function</code> is a polymorphic wrapper around any callable. So a lambda type, a function object type, a function pointer and such can all be contained in a <code>std::function</code> in a type erased way.</p>\n\n<p>When sending a function pointer as parameter to your function, it has to create a temporary <code>std::function</code>. But the problem here is that temporary cannot be bound to mutable reference, only constant ones:</p>\n\n<pre><code>template &lt;typename T, typename U&gt;\nvoid special_sort(\n    std::vector&lt;T&gt;&amp; container,\n    std::vector&lt;U&gt;&amp; ordering_container,\n    std::function&lt;std::vector&lt;std::pair&lt;unsigned int, unsigned int&gt;&gt;(std::vector&lt;U&gt;&amp;)&gt; const&amp; sort_function\n) { //                            -----------------------------------------------------^\n\n}\n</code></pre>\n\n<p>Or you can also use a template parameter. You don't need runtime polymorphism and type erasure in that particular case. Do what the STL does and simply take the callable by value:</p>\n\n<pre><code>template &lt;typename T, typename U, typename F&gt;\nvoid special_sort(\n    std::vector&lt;T&gt;&amp; container,\n    std::vector&lt;U&gt;&amp; ordering_container,\n    F sort_function\n) {\n    // much simpler\n    // you can still do:\n    // sort_function(ordering_container)\n}\n</code></pre>\n"}], "owner": {"reputation": 424, "user_id": 3520726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678a32857aa0b85042868b22233c81b2?s=128&d=identicon&r=PG&f=1", "display_name": "Mdp11", "link": "https://stackoverflow.com/users/3520726/mdp11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55614801, "answer_count": 2, "score": 1, "last_activity_date": 1554922148, "creation_date": 1554904890, "last_edit_date": 1554905173, "question_id": 55614519, "link": "https://stackoverflow.com/questions/55614519/passing-a-specific-function-to-a-template", "title": "Passing a specific function to a template", "body": "<p>I'm trying to pass a function to a template, and so far I obtained this:</p>\n\n<pre><code>template &lt;typename T, typename U&gt; void special_sort(std::vector&lt;T&gt;&amp; container, std::vector&lt;U&gt;&amp; ordering_container,\n    std::function&lt;std::vector&lt;std::pair&lt;unsigned int, unsigned int&gt;&gt;(std::vector&lt;U&gt;&amp;)&gt;&amp; sort_function) {\n\n    sort_function(ordering_container);\n}\n</code></pre>\n\n<p>In the main, I declared this:</p>\n\n<pre><code>std::vector&lt;std::pair&lt;unsigned, unsigned&gt;&gt; sort_function(std::vector&lt;int&gt;&amp;) {\n    std::vector&lt;std::pair&lt;unsigned int, unsigned int&gt;&gt; a;\n    return a;\n}\n\nint main() {\n    std::vector&lt;std::string&gt; test_container = {\"a\", \"b\", \"c\"};\n    std::vector&lt;int&gt; test_ordering_container = {4,7,2};\n\n    auto a = sort_function(test_ordering_container);\n    special_sort&lt;std::string, int&gt;(test_container, test_ordering_container, sort_function(test_ordering_container));\n}\n</code></pre>\n\n<p>But I'm getting the following error:</p>\n\n<blockquote>\n  <p>Error (active)    E0304   no instance of function template \"special_sort\" matches the argument list   Objective_challenge C:\\Users\\mdp11\\source\\repos\\Objective_challenge\\Objective_challenge\\main.cpp    21                  argument types are: (<code>std::vector&lt;std::string</code>, <code>std::allocator&lt;std::string&gt;&gt;</code>, <code>std::vector&lt;int, std::allocator&lt;int&gt;&gt;</code>, <code>std::vector&lt;std::pair&lt;unsigned int, unsigned int&gt;</code>, <code>std::allocator&lt;std::pair&lt;unsigned int, unsigned int&gt;&gt;&gt;</code>)</p>\n</blockquote>\n\n<p>What is that I'm doing wrong? \nThank you all in advance.</p>\n"}, {"tags": ["c++", "qt", "qchart"], "comments": [{"owner": {"reputation": 158, "user_id": 4599792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61088b54ff4323076d64d3a517dc9655?s=128&d=identicon&r=PG&f=1", "display_name": "sirop", "link": "https://stackoverflow.com/users/4599792/sirop"}, "edited": false, "score": 0, "creation_date": 1555404981, "post_id": 55614512, "comment_id": 98089483, "body": "Then try <a href=\"https://qwtpolar.sourceforge.io/class_qwt_polar_plot.html#details\" rel=\"nofollow noreferrer\">qwtpolar.sourceforge.io/class_qwt_polar_plot.html#details</a> with which"}, {"owner": {"reputation": 158, "user_id": 4599792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61088b54ff4323076d64d3a517dc9655?s=128&d=identicon&r=PG&f=1", "display_name": "sirop", "link": "https://stackoverflow.com/users/4599792/sirop"}, "edited": false, "score": 0, "creation_date": 1555406015, "post_id": 55614512, "comment_id": 98090087, "body": "with <a href=\"https://qwt.sourceforge.io/class_qwt_scale_engine.html#details\" rel=\"nofollow noreferrer\">qwt.sourceforge.io/class_qwt_scale_engine.html#details</a>: &quot;The scales at the axes can be explicitely set (QwtScaleDiv) , or are calculated from the plot items, using algorithms (QwtScaleEngine) which can be configured separately for each axis.&quot; and QwtScaleEngine::Attribute::Inverted.  Sorry for proposing a different lib, but I could not see that QtCharts is the right choice."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 1, "creation_date": 1557823021, "post_id": 55614512, "comment_id": 98884192, "body": "You may check with <code>isReverse</code> if the command <code>setReverse</code> was taken into account"}, {"owner": {"reputation": 2355, "user_id": 3599179, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0yv37.png?s=128&g=1", "display_name": "codeaviator", "link": "https://stackoverflow.com/users/3599179/codeaviator"}, "reply_to_user": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 1, "creation_date": 1557831446, "post_id": 55614512, "comment_id": 98888866, "body": "@Damien I&#39;ve just made the test by putting <code>qDebug() &lt;&lt; elevationAxis-&gt;isReverse();</code> immediately before and immediately after <code>elevationAxis-&gt;setReverse(true);</code> and it prints out <code>false</code> and <code>true</code>, respectively. So the <code>reverse</code> property is indeed changed. However, this change is not reflected in the axis."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 1, "creation_date": 1557838260, "post_id": 55614512, "comment_id": 98892831, "body": "This is not a cartesian chart but that warning was only for area series and this is not your case (scatter series) so it should work. The second notice says that all axes related to the same series must be reversed (I tried it but it still does not work). I couldn&#39;t find the problem for now."}], "answers": [{"tags": [], "owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "is_accepted": true, "score": 5, "last_activity_date": 1557845417, "creation_date": 1557845417, "answer_id": 56133255, "question_id": 55614512, "link": "https://stackoverflow.com/questions/55614512/reverse-axis-of-qpolarchart/56133255#56133255", "title": "Reverse axis of QPolarChart", "body": "<p>I couldn't make the <code>setReversed(true)</code> work whatever the way I tried to do it.</p>\n\n<p>So I found another solution: Do it manually.</p>\n\n<p>I printed the series in reversed way:</p>\n\n<pre><code>QScatterSeries *series = new QScatterSeries();\nfor (int i = 0; i &lt; 360; i += 10) {\n    series-&gt;append(i, MAX_ELEVATION - i);\n}\n</code></pre>\n\n<p><code>MAX_ELEVATION</code> equals to <code>90</code>.</p>\n\n<p>Then I reversed the labels names. For that I had to replace <code>QValueAxis</code> by its derived <code>QCategoryAxis</code>.</p>\n\n<hr>\n\n<p><strong>The full code</strong></p>\n\n<pre><code>#include &lt;QtWidgets/QApplication&gt;\n#include &lt;QtWidgets/QMainWindow&gt;\n#include &lt;QtCharts/QChartView&gt;\n#include &lt;QtCharts/QPolarChart&gt;\n#include &lt;QtCharts/QValueAxis&gt;\n#include &lt;QScatterSeries&gt;\n#include &lt;QtCharts/QCategoryAxis&gt;\n\nQT_CHARTS_USE_NAMESPACE\n\n#define MAX_ELEVATION 90\n\nint main(int argc, char *argv[])\n{\n    QApplication app(argc, argv);\n\n    QtCharts::QPolarChart *chart = new QtCharts::QPolarChart();\n    chart-&gt;legend()-&gt;hide();\n\n    QScatterSeries *series = new QScatterSeries();\n    for (int i = 0; i &lt; 360; i += 10) {\n        series-&gt;append(i, MAX_ELEVATION - i);\n    }\n    chart-&gt;addSeries(series);\n\n    QValueAxis *azimuthAxis = new QValueAxis();\n    azimuthAxis-&gt;setRange(0, 360);\n    azimuthAxis-&gt;setTickCount(9);\n    azimuthAxis-&gt;setLabelFormat(\"%d\");\n    azimuthAxis-&gt;setLabelsVisible(true);\n    chart-&gt;addAxis(azimuthAxis, QPolarChart::PolarOrientationAngular);\n\n    /*\n    QValueAxis *elevationAxis = new QValueAxis();\n    elevationAxis-&gt;setRange(0, 90);\n    elevationAxis-&gt;setTickCount(7);\n    elevationAxis-&gt;setLabelFormat(\"%d\");\n    elevationAxis-&gt;setLabelsVisible(true);\n    elevationAxis-&gt;setReverse(true); // &lt;-- REVERSE THE AXIS\n    chart-&gt;addAxis(elevationAxis, QPolarChart::PolarOrientationRadial);\n    */\n\n    QCategoryAxis *elevationAxis = new QCategoryAxis;\n    elevationAxis-&gt;setRange(0, MAX_ELEVATION);\n    for(unsigned int i = 0; i &lt;= MAX_ELEVATION; i += 15)\n        elevationAxis-&gt;append(QString::number(MAX_ELEVATION-i), i);\n    elevationAxis-&gt;setLabelsPosition(QCategoryAxis::AxisLabelsPositionOnValue);\n    elevationAxis-&gt;setLabelsVisible(true);\n    chart-&gt;addAxis(elevationAxis, QPolarChart::PolarOrientationRadial);\n\n\n    QtCharts::QChartView *chartView = new QtCharts::QChartView();\n    chartView-&gt;setChart(chart);\n    chartView-&gt;setRenderHint(QPainter::Antialiasing);\n\n    QMainWindow window;\n    window.setCentralWidget(chartView);\n    window.resize(800, 600);\n    window.show();\n\n    return app.exec();\n}\n</code></pre>\n\n<hr>\n\n<p>It is equivalent to what <code>setReversed(true)</code> should do. It will display your series exactly the way you want without modifying anything of the way the data are computed.</p>\n\n<p>Here you can see what it looks like:\n<a href=\"https://i.stack.imgur.com/QMTQo.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QMTQo.png\" alt=\"Display\"></a></p>\n\n<p>It worked successfully for me.</p>\n\n<p>Hope it can help.</p>\n"}], "owner": {"reputation": 2355, "user_id": 3599179, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0yv37.png?s=128&g=1", "display_name": "codeaviator", "link": "https://stackoverflow.com/users/3599179/codeaviator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 56133255, "answer_count": 1, "score": 10, "last_activity_date": 1557845417, "creation_date": 1554904870, "last_edit_date": 1557832561, "question_id": 55614512, "link": "https://stackoverflow.com/questions/55614512/reverse-axis-of-qpolarchart", "title": "Reverse axis of QPolarChart", "body": "<p>I need to modify a <a href=\"https://doc.qt.io/qt-5/qpolarchart.html\" rel=\"noreferrer\"><code>QPolarChart</code></a> to create a <a href=\"http://introgps.uga.edu/course/Skyplot.html\" rel=\"noreferrer\">Satellite SkyPlot</a>.</p>\n\n<p>For this, I need to reverse the radial axis (elevation axis) so that 90 is placed on the origin and 0 on the outer ring.</p>\n\n<p>In the <a href=\"https://doc.qt.io/qt-5/qvalueaxis-members.html\" rel=\"noreferrer\">list of members for <code>QValueAxis</code></a> I found the method <a href=\"https://doc.qt.io/qt-5/qabstractaxis.html#reverse-prop\" rel=\"noreferrer\"><code>setReverse</code></a>, which seems to do what I need.</p>\n\n<p>However, doing <code>setReverse(true)</code> on the elevation axis does not flip the axis as I was expecting.</p>\n\n<p>How can I reverse the axis then?</p>\n\n<p><a href=\"https://i.stack.imgur.com/ddwrz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ddwrz.png\" alt=\"Polar Chart\"></a></p>\n\n<p>This is the minimal code required to run this example:</p>\n\n<pre><code>#include &lt;QtWidgets/QApplication&gt;\n#include &lt;QtWidgets/QMainWindow&gt;\n#include &lt;QtCharts/QChartView&gt;\n#include &lt;QtCharts/QPolarChart&gt;\n#include &lt;QtCharts/QValueAxis&gt;\n#include &lt;QScatterSeries&gt;\n\nQT_CHARTS_USE_NAMESPACE\n\nint main(int argc, char *argv[])\n{\n    QApplication app(argc, argv);\n\n    QtCharts::QPolarChart *chart = new QtCharts::QPolarChart();\n    chart-&gt;legend()-&gt;hide();\n\n    QScatterSeries *series = new QScatterSeries();\n    for (int i = 0; i &lt; 360; i += 10) {\n        series-&gt;append(i, i);\n    }\n    chart-&gt;addSeries(series);\n\n    QValueAxis *azimuthAxis = new QValueAxis();\n    azimuthAxis-&gt;setRange(0, 360);\n    azimuthAxis-&gt;setTickCount(9);\n    azimuthAxis-&gt;setLabelFormat(\"%d\");\n    azimuthAxis-&gt;setLabelsVisible(true);\n    chart-&gt;addAxis(azimuthAxis, QPolarChart::PolarOrientationAngular);\n\n    QValueAxis *elevationAxis = new QValueAxis();\n    elevationAxis-&gt;setRange(0, 90);\n    elevationAxis-&gt;setTickCount(7);\n    elevationAxis-&gt;setLabelFormat(\"%d\");\n    elevationAxis-&gt;setLabelsVisible(true);\n    elevationAxis-&gt;setReverse(true); // &lt;-- REVERSE THE AXIS\n    chart-&gt;addAxis(elevationAxis, QPolarChart::PolarOrientationRadial);\n\n    QtCharts::QChartView *chartView = new QtCharts::QChartView();\n    chartView-&gt;setChart(chart);\n    chartView-&gt;setRenderHint(QPainter::Antialiasing);\n\n    QMainWindow window;\n    window.setCentralWidget(chartView);\n    window.resize(800, 600);\n    window.show();\n\n    return app.exec();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>After reading <a href=\"https://stackoverflow.com/questions/55614512/reverse-axis-of-qpolarchart#comment98884192_55614512\">Damien's comment</a>:</p>\n\n<blockquote>\n  <p><em>You may check with</em> <code>isReverse</code> <em>if the command</em> <code>setReverse</code> <em>was taken into account</em></p>\n</blockquote>\n\n<p>I made the test by putting <code>qDebug() &lt;&lt; elevationAxis-&gt;isReverse();</code> immediately before and immediately after <code>elevationAxis-&gt;setReverse(true);</code>, and it prints out <code>false</code> and <code>true</code>, respectively.</p>\n\n<pre><code>qDebug() &lt;&lt; elevationAxis-&gt;isReverse(); // &lt;-- Prints out \"false\"\nelevationAxis-&gt;setReverse(true);        // &lt;-- REVERSE THE AXIS\nqDebug() &lt;&lt; elevationAxis-&gt;isReverse(); // &lt;-- Prints out \"true\"\n</code></pre>\n\n<p>So the <code>reverse</code> property is indeed changed. However, this change is not reflected visually in the axis.</p>\n\n<p>The <a href=\"https://doc.qt.io/qt-5/qabstractaxis.html#reverse-prop\" rel=\"noreferrer\">documentation</a> for the <code>reverse</code> property reads:</p>\n\n<blockquote>\n  <p><em>This property holds whether a reverse axis is used.</em></p>\n  \n  <p><em>By default, the value is</em> <code>false</code>.</p>\n  \n  <p><em>The reverse axis is supported with a line, spline, and scatter series,\n  as well as an area series with a <strong>cartesian chart</strong>. All axes of the same\n  orientation attached to the same series must be reversed if one is\n  reversed or the behavior is undefined.</em></p>\n</blockquote>\n\n<p>A polar chart is certainly NOT a cartesian chart, so that might be the root of the problem.</p>\n"}, {"tags": ["c#", "c++", "wpf", "wic"], "comments": [{"owner": {"reputation": 109436, "user_id": 1136211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd80cd7d5927902f3af471fa0353836?s=128&d=identicon&r=PG", "display_name": "Clemens", "link": "https://stackoverflow.com/users/1136211/clemens"}, "edited": false, "score": 1, "creation_date": 1554904698, "post_id": 55614367, "comment_id": 97922617, "body": "Just a note, the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.imaging.bitmapimage.decodepixelwidth?view=netframework-4.7.2#remarks\" rel=\"nofollow noreferrer\">Remarks</a> on MS Docs say that <i>The JPEG and Portable Network Graphics (PNG) codecs natively decode the image to the specified size; other codecs decode the image at its original size and scale the image to the desired size</i>. So it may not be &quot;perfect&quot; for all image formats."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1554906383, "post_id": 55614367, "comment_id": 97923624, "body": "What would your program do? What input, output do you expect?"}, {"owner": {"reputation": 53, "user_id": 4737441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7a379ce407b5c3f9471bd7ef400c9c?s=128&d=identicon&r=PG", "display_name": "Stefano Baraldi", "link": "https://stackoverflow.com/users/4737441/stefano-baraldi"}, "edited": false, "score": 0, "creation_date": 1554926796, "post_id": 55614367, "comment_id": 97934042, "body": "I would input an image filename, and output an uncompressed bitmap (pixel array in RGBA or RGB format) of the desired size."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4737441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7a379ce407b5c3f9471bd7ef400c9c?s=128&d=identicon&r=PG", "display_name": "Stefano Baraldi", "link": "https://stackoverflow.com/users/4737441/stefano-baraldi"}, "edited": false, "score": 0, "creation_date": 1554926875, "post_id": 55620533, "comment_id": 97934077, "body": "Thank you! Do you have a code snippet with proper steps that would help me?"}, {"owner": {"reputation": 1053, "user_id": 4926931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sv8Gv.jpg?s=128&g=1", "display_name": "saucecontrol", "link": "https://stackoverflow.com/users/4926931/saucecontrol"}, "reply_to_user": {"reputation": 53, "user_id": 4737441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7a379ce407b5c3f9471bd7ef400c9c?s=128&d=identicon&r=PG", "display_name": "Stefano Baraldi", "link": "https://stackoverflow.com/users/4737441/stefano-baraldi"}, "edited": false, "score": 1, "creation_date": 1554927239, "post_id": 55620533, "comment_id": 97934249, "body": "This sample from the docs has the basic usage: <a href=\"https://docs.microsoft.com/en-us/windows/desktop/wic/-wic-bitmapsources-howto-scale\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/wic/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1053, "user_id": 4926931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sv8Gv.jpg?s=128&g=1", "display_name": "saucecontrol", "link": "https://stackoverflow.com/users/4926931/saucecontrol"}, "is_accepted": true, "score": 1, "last_activity_date": 1554926722, "creation_date": 1554926722, "answer_id": 55620533, "question_id": 55614367, "link": "https://stackoverflow.com/questions/55614367/using-wic-to-reproduce-wpf-bitmapimage-decodepixelwidth-height/55620533#55620533", "title": "Using WIC to reproduce WPF BitmapImage.DecodePixelWidth / Height", "body": "<p>Two of the WIC codecs (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wincodec/nf-wincodec-iwicbitmapsourcetransform-getclosestsize#remarks\" rel=\"nofollow noreferrer\">JPEG and JPEG-XR</a>) support scaling within the decoder, and you can verify this at runtime using <code>IWICBitmapSourceTransform::GetClosestSize</code>.  However, even if the source image must be decoded at its full resolution, <code>IWICBitmapScaler</code> will use minimal memory when scaling the image to its desired size, as indicated in the documentation's <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapscaler#remarks\" rel=\"nofollow noreferrer\">remarks</a>.</p>\n\n<p>Better still, <code>IWICBitmapScaler</code> will automatically use the <code>IWICBitmapSourceTransform</code> capability of the decoder when supported, so you can simply use it and get the behavior you seek automatically.</p>\n"}], "owner": {"reputation": 53, "user_id": 4737441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7a379ce407b5c3f9471bd7ef400c9c?s=128&d=identicon&r=PG", "display_name": "Stefano Baraldi", "link": "https://stackoverflow.com/users/4737441/stefano-baraldi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 55620533, "answer_count": 1, "score": 0, "last_activity_date": 1554926722, "creation_date": 1554904442, "question_id": 55614367, "link": "https://stackoverflow.com/questions/55614367/using-wic-to-reproduce-wpf-bitmapimage-decodepixelwidth-height", "title": "Using WIC to reproduce WPF BitmapImage.DecodePixelWidth / Height", "body": "<p>I need to generate thumbnails of \"huge\" image files without loading the full image in memory.\nThis feature is perfectly implemented in WPF's <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.imaging.bitmapimage.decodepixelheight?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">BitmapImage.DecodePixelWidth / Height</a> but i need to use it in a non-managed C++ dll.</p>\n\n<p>I \"think\" it is implemented using WIC, however i cannot find any useful sample about this functionality, i would load all the thumbnail formats that WIC can handle.</p>\n\n<p>Anyone can help about it?</p>\n"}, {"tags": ["c++", "linux", "clang", "llvm"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1554903894, "post_id": 55614083, "comment_id": 97922127, "body": "Are you trying to build libc++ or the whole LLVM/Clang toolchain? Also, why do you assume that x64 Clang compiler can&#39;t target x86 arch? What did you do with previous version of LLVM/Clang?"}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1554904255, "post_id": 55614083, "comment_id": 97922344, "body": "I never said the x64 compiler can&#39;t target x86. What I&#39;m saying is that the 32-bit LLVM libraries are not available, so using <code>-m32</code> causes linker failures due to <code>libc++</code> missing (since it&#39;s not available for the i386 architecture)."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1554904605, "post_id": 55614083, "comment_id": 97922565, "body": "clang by default uses system libstdc++, but anyway, if you only want libc++, why are you building the whole LLVM (with ninja and cmake to boot)? Have you read <a href=\"https://libcxx.llvm.org/docs/BuildingLibcxx.html\" rel=\"nofollow noreferrer\">libcxx.llvm.org/docs/BuildingLibcxx.html</a> ?"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1554905268, "post_id": 55614083, "comment_id": 97922981, "body": "If you&#39;re using Ubuntu already, can&#39;t you <code>dpkg --add-architecture i386</code> and then <code>apt-get install libc++1:i386</code> ? (see <a href=\"https://wiki.debian.org/Multiarch/HOWTO#Installing_Android_SDK_compat_libraries\" rel=\"nofollow noreferrer\">Debian multiarchitecture</a>)"}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1554906600, "post_id": 55614083, "comment_id": 97923761, "body": "@Botje <a href=\"https://packages.ubuntu.com/cosmic/libc++1\" rel=\"nofollow noreferrer\">the libc++1 package</a> is for Clang v7, not v8, and also requires v18.10 of ubuntu (I&#39;m on 18.04 and that cannot change)."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1554906663, "post_id": 55614083, "comment_id": 97923799, "body": "@DanM. Yep I saw that link, but mostly they just point to the same getting started page I linked earlier."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1554906839, "post_id": 55614083, "comment_id": 97923904, "body": "@void.pointer it shows how to build libc++ separately from llvm. You don&#39;t need to waste hours recompiling llvm/clang if you only need to build libc."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1554927941, "post_id": 55614083, "comment_id": 97934556, "body": "@DanM. I feel like that documentation might be outdated. I&#39;m not able to get it working. I think the way it&#39;s structured requires that you generate projects through the <code>llvm</code> subdirectory first. It has all the common CMake logic. Without that, none of the other projects build successfully."}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 3, "last_activity_date": 1554906167, "creation_date": 1554906167, "answer_id": 55614952, "question_id": 55614083, "link": "https://stackoverflow.com/questions/55614083/how-do-i-build-32-bit-libc-with-64-bit-clang-v8-on-64-bit-ubuntu-18-04/55614952#55614952", "title": "How do I build 32-bit libc++ with 64-bit clang v8 on 64-bit Ubuntu 18.04?", "body": "<p>Seems like you are linking against the wrong Python: <code>usr/lib/x86_64-linux-gnu/libpython2.7.so</code>.</p>\n\n<p>You may want to for it and add it to the CMake commands:</p>\n\n<pre><code>-DPYTHON_EXECUTABLE=PATH_TO_PYTHON-DEV:i686\n</code></pre>\n\n<p>You may also need to set <code>PYTHON_LIBRARY</code> and <code>PYTHON_INCLUDE_DIR</code> to make sure that the i386 versions are used.</p>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 55614952, "answer_count": 1, "score": 0, "last_activity_date": 1554906167, "creation_date": 1554903642, "question_id": 55614083, "link": "https://stackoverflow.com/questions/55614083/how-do-i-build-32-bit-libc-with-64-bit-clang-v8-on-64-bit-ubuntu-18-04", "title": "How do I build 32-bit libc++ with 64-bit clang v8 on 64-bit Ubuntu 18.04?", "body": "<p>Using a <code>Dockerfile</code>, I'm attempting to build Clang version v8 along with its dependencies on Ubuntu 18.04. The reason I'm going through all this trouble is because I can't find a 32-bit version of the LLVM libraries. Even the LLVM packages themselves have only 64-bit variants of everything. Because of this, I'm not able to build my 32-bit applications using the LLVM toolchain at version 8. Using version 8 of LLVM is mandatory for reasons I won't go into here.</p>\n\n<p>So far, here is what I have:</p>\n\n<pre><code>FROM ubuntu:18.04 AS build\n\nARG NUM_PARALLEL=8\n\nRUN true \\\n    &amp;&amp; dpkg --add-architecture i386 \\\n    &amp;&amp; apt-get -qq update \\\n    &amp;&amp; apt-get -qq install \\\n        software-properties-common \\\n        build-essential \\\n        gcc-multilib \\\n        g++-multilib \\\n        git \\\n        wget \\\n        autoconf \\\n        pkg-config \\\n        m4 \\\n        python-dev:i386 \\\n        libcurl4-gnutls-dev:i386 \\\n        libncurses-dev:i386 \\\n        uuid-dev:i386 \\\n        libx11-dev:i386 \\\n        libxext-dev:i386 \\\n        libtinfo-dev:i386 \\\n        libedit-dev:i386 \\\n        swig \\\n        libedit-dev\n        python-dev\n\nENV CMAKE_BUILD_PARALLEL_LEVEL=$NUM_PARALLEL\n\n# Ninja\nRUN true \\\n    &amp;&amp; git clone --depth 1 --branch v1.8.2 https://github.com/ninja-build/ninja.git \\\n    &amp;&amp; cd ninja \\\n    &amp;&amp; ./configure.py --bootstrap \\\n    &amp;&amp; cp ninja /usr/local/bin\n\n# CMake\nRUN true \\\n    &amp;&amp; git clone --depth 1 --branch v3.13.4 https://gitlab.kitware.com/cmake/cmake.git \\\n    &amp;&amp; cd cmake \\\n    &amp;&amp; ./bootstrap --parallel=$NUM_PARALLEL \\\n    &amp;&amp; make -j$NUM_PARALLEL install\n\n# Clang (See: https://clang.llvm.org/get_started.html)\nRUN true \\\n    &amp;&amp; git clone --depth 1 --branch llvmorg-8.0.0 https://github.com/llvm/llvm-project.git \\\n    &amp;&amp; cd llvm-project \\\n    &amp;&amp; cmake -G Ninja -B build -S llvm \\\n        -D CMAKE_BUILD_TYPE=Release \\\n        -D LLVM_BUILD_32_BITS:BOOL=ON \\\n        -D LLVM_ENABLE_PROJECTS=all \\\n        -D LLVM_BUILD_TESTS:BOOL=OFF \\\n        -D LLVM_BUILD_EXAMPLES:BOOL=OFF \\\n        -D LLVM_INCLUDE_EXAMPLES:BOOL=OFF \\\n        -D LLVM_INCLUDE_TESTS:BOOL=OFF \\\n        -D LLVM_INCLUDE_BENCHMARKS:BOOL=OFF \\\n    &amp;&amp; cmake --build build -j $NUM_PARALLEL --target install\n</code></pre>\n\n<p>I get through compiling a little over 5200 translation units, which takes over an hour, only for it to fail:</p>\n\n<pre><code>[5232/6435] Linking CXX shared library lib/readline.so\nFAILED: lib/readline.so\n: &amp;&amp; /usr/bin/c++ -fPIC -fPIC -fvisibility-inlines-hidden -m32 -Werror=date-time -std=c++11 -Wall -Wextra -Wno-unused-parameter -Wwrite-strings -Wcast-qual -Wno-missing-field-initializers -pedantic -Wno-long-long -Wimplicit-fallthrough -Wno-maybe-uninitialized -Wno-noexcept-type -Wdelete-non-virtual-dtor -Wno-comment -fdiagnostics-color -ffunction-sections -fdata-sections -Wno-deprecated-declarations -Wno-unknown-pragmas -Wno-strict-aliasing -Wno-deprecated-register -Wno-vla-extension -Wno-macro-redefined -O3 -DNDEBUG  -Wl,-z,defs -Wl,-z,nodelete -m32 -shared -Wl,-soname,readline.so -o lib/readline.so tools/lldb/scripts/Python/modules/readline/CMakeFiles/readline.dir/readline.cpp.o  /usr/lib/x86_64-linux-gnu/libpython2.7.so /usr/lib/x86_64-linux-gnu/libedit.so &amp;&amp; :\n/usr/lib/x86_64-linux-gnu/libpython2.7.so: error adding symbols: File in wrong format\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I followed the <a href=\"https://clang.llvm.org/get_started.html\" rel=\"nofollow noreferrer\">getting started</a> page to understand how to build LLVM so far, but I must be missing something. They don't exactly go into 32-bit compilation in their examples. Can someone help me get this building? Or at least (and probably better), point me to a version of Clang v8 that has 32-bit LLVM libraries bundled with it?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1554903943, "post_id": 55614039, "comment_id": 97922148, "body": "<a href=\"https://stackoverflow.com/questions/12175438/how-to-set-image-with-qlabel-in-qt\" title=\"how to set image with qlabel in qt\">stackoverflow.com/questions/12175438/&hellip;</a>"}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "reply_to_user": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1554904315, "post_id": 55614039, "comment_id": 97922387, "body": "@AndrewKashpur If I have a default image in resources, can I build an image editor on it?"}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 1, "creation_date": 1554905224, "post_id": 55614039, "comment_id": 97922962, "body": "i may be wrong, but i think it is bad idea to build editor around QLabel. What you are describing is not too difficult to implement using QGraphicsView\\QGraphicsScene\\QGraphicsItem. You catch mouse events in view, store modifications to image somewhere and paint QGraphicsItem according to stored modifications. I&#39;m pretty sure somewhere in qt docs should be reasonably simple example of usage of this part of framework"}], "owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554913041, "creation_date": 1554903522, "last_edit_date": 1554913041, "question_id": 55614039, "link": "https://stackoverflow.com/questions/55614039/paint-application-qt", "title": "Paint application Qt", "body": "<p>I am trying to create a simple paint application using Qt Creator. I want to have a rectangular area on <code>QDialog</code> in which I can draw an image using mouse. The image format will be <code>QImage::Format_Mono</code> (Black and white, pixel indexes are either 0 or 1). I will use pixel indexes for simple image processing purpose, which operates on simple 1 and 0 pixel values, so <code>Format_Mono</code> is essential.</p>\n\n<p>Now the application does its job, but the image (painting area) is stuck at left top part (positioned at <code>x=0</code> and <code>y=0</code>). I want to have rectangular image editor part at any x and y coordinates I want. </p>\n\n<p>To create the image editor I defined a <code>QImage</code> in <code>dialog.h</code>   </p>\n\n<pre><code>QImage image;\n</code></pre>\n\n<p>In constructor of the <code>Dialog</code> I have:</p>\n\n<pre><code>image = QImage(ui-&gt;label-&gt;size(), QImage::Format_Mono);\nimage.fill(Qt::black); \n</code></pre>\n\n<p>As you can see in above code, I have a <code>QLabel</code> named <code>label</code> in my user interface. I want to put the image editor part in that label (or do something similar). </p>\n\n<p>I checked the <code>QImage</code> documentation, but could not find a function to change the position of the <code>image</code>. Or, it would also be good if I could find any other way to put the <code>image</code> (image editor) in <code>QLabel</code>.</p>\n\n<p><strong>What can I do to have that feature in my application?</strong></p>\n\n<p><strong>EDIT:</strong> The created image editor part has the same size as the <code>label</code> (as it should be the case), but image editor (<code>QImage</code>) starts at <code>x=0</code> and <code>y=0</code> only. </p>\n"}, {"tags": ["c++", "c", "valgrind"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1554904631, "post_id": 55614036, "comment_id": 97922584, "body": "Causing the program to behave differently when being analyzed would defeat the purpose of performing the analysis."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1554904654, "post_id": 55614036, "comment_id": 97922594, "body": "What is the problem with adding valgrind/memcheck headers?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1554904921, "post_id": 55614036, "comment_id": 97922762, "body": "If you nevertheless do want to modulate the behavior of the program, then using command-line options, configuration files, or interactive input to do so is the right way to do it, because that provides an appropriate separation of concerns.  As a practical matter, that means you can analyze the set of features you choose, instead of being limited to a specific set baked into the program."}], "answers": [{"tags": [], "owner": {"reputation": 2920, "user_id": 1469714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/R5rUf.png?s=128&g=1", "display_name": "xryl669", "link": "https://stackoverflow.com/users/1469714/xryl669"}, "is_accepted": false, "score": 0, "last_activity_date": 1554905317, "creation_date": 1554905317, "answer_id": 55614661, "question_id": 55614036, "link": "https://stackoverflow.com/questions/55614036/looking-for-a-way-to-detect-valgrind-memcheck-at-runtime-without-including-valgr/55614661#55614661", "title": "Looking for a way to detect valgrind/memcheck at runtime without including valgrind headers", "body": "<p>Not sure it's a good idea to have a different behavior when running under Valgrind since the goal of Valgrind is to assert your software in the <em>expected</em> usage case.</p>\n\n<p>Anyway, Valgrind does not change the stack or symbols since it (kind of) emulates a CPU running your program. The only way to detect if you're being run under Valgrind is to observe for its effects, that is, everything is slow and not multithreaded in Valgrind. </p>\n\n<p>So, for example, run a test that spawn 3 threads consuming a common FIFO (with a mutex/lock) and observe the number of items received. In real CPU, you'd expect the 3 threads to have processed close to the same amount of items in <code>T</code> time, but when run under Valgrind, one thread will have consumed almost all items in <code>&gt;&gt;T</code> time.</p>\n\n<p>Another possibility is to call a some known syscall. Valgrind has some rules for <em>observing</em> syscall. For example, if you are allocating memory, then Valgrind will intercept this block of memory, and fill that memory area with some data. In a good software, you should not read that data and first write to it (so overwriting what Valgrind set). If you try to read that data and observe non zero value, you'll get a Valgrind <code>invalid read of size XXX</code> message, but your code will know it's being instrumented.</p>\n\n<p>Finally, (and I think it much simpler), you should move the code you need to instrument in a library, and have 2 frontends. The \"official\" frontend, and a test frontend where you've disabled all bells and whistles that's supposed to be run under Valgrind.</p>\n"}], "owner": {"reputation": 71, "user_id": 815640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90a71927c61dc1844a6de7f29f684a99?s=128&d=identicon&r=PG", "display_name": "Ebrahim Ahmed", "link": "https://stackoverflow.com/users/815640/ebrahim-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1554905317, "creation_date": 1554903512, "last_edit_date": 1554903981, "question_id": 55614036, "link": "https://stackoverflow.com/questions/55614036/looking-for-a-way-to-detect-valgrind-memcheck-at-runtime-without-including-valgr", "title": "Looking for a way to detect valgrind/memcheck at runtime without including valgrind headers", "body": "<p>Valgrind/Memcheck can be intensive and causes runtime performance to drop significantly. I need a way (at runtime) to detect it in order to disable all auxiliary services and features in order to perform checks in under 24 hours. I would prefer not to pass any explicit flags to program, but that would be one way. </p>\n\n<ol>\n<li>I explored searching the symbol table (via abi calls) for valgrind or memcheck symbols, but there were none.</li>\n<li>I explored checking the stack (via boost::stacktrace), but nothing was there either.</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1365, "user_id": 7610883, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d5b2f292c46f7ef87ab8a0adb47154fa?s=128&d=identicon&r=PG&f=1", "display_name": "cmdLP", "link": "https://stackoverflow.com/users/7610883/cmdlp"}, "edited": false, "score": 2, "creation_date": 1554903496, "post_id": 55613898, "comment_id": 97921880, "body": "I suggest to use the <code>CSV</code> format, it is simple to generate and can be opened with any spreadsheet software. You just need to seperate the cells horizontally by <code>;</code> and vertically by a newline."}], "owner": {"reputation": 616, "user_id": 11340559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/twZd7.jpg?s=128&g=1", "display_name": "CaseebRamos", "link": "https://stackoverflow.com/users/11340559/caseebramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1594903426, "creation_date": 1554903138, "last_edit_date": 1594903426, "question_id": 55613898, "link": "https://stackoverflow.com/questions/55613898/how-to-put-calendar-in-a-grid", "title": "How to put Calendar in a grid", "body": "<p>I am beginner in C++, and doing a personal project where I get an user input and put <code>X</code> in the place where they choose. The placement of that <code>X</code> will be in a calendar basically. After spending few days, I have finally made a grid and calender, but I can't connect the two together.</p>\n<p>I have tried to combine the two together, but I am very off.</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std; \n\n\nint main() { \n    std::cout &lt;&lt; &quot;     &quot; ;//5 space chars\n    for (int i = 2; i &lt;= 13; ++i){\n        std::cout &lt;&lt; &quot;    &quot;; //4 space chars\n    }\n    std::cout &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot; |----|&quot;;\n\n    for (int i = 2; i &lt;= 13; ++i){\n        std::cout &lt;&lt; &quot;----|&quot;;\n    }\n    std::cout &lt;&lt; std::endl;\n\n    for (int i = 1; i &lt;= 32; ++i){\n        std::cout &lt;&lt; std::setw(2) &lt;&lt; &quot;|&quot;;\n\n        for (int j = 1; j &lt;= 13; ++j)\n            std::cout &lt;&lt; std::setw(5) &lt;&lt; &quot;|&quot;;\n\n        std::cout &lt;&lt; std::endl;\n        std::cout &lt;&lt; &quot; |----&quot;;\n\n        for (int j = 2; j &lt;= 12; ++j)\n            std::cout &lt;&lt; &quot;|----&quot;;\n\n        std::cout &lt;&lt; &quot;|----|&quot;;\n        std::cout &lt;&lt; std::endl;\n    }\n    std::vector&lt;std::vector&lt;std::string&gt;&gt; cal_mat(32, std::vector&lt;std::string&gt;(13));\n    std::string months_array[12]{ &quot;J&quot;,&quot;F&quot;, &quot;M&quot;, &quot;A&quot;, &quot;M&quot;, &quot;J&quot;, &quot;J&quot;,&quot;A&quot;, &quot;S&quot;, &quot;O&quot;, &quot;N&quot;, &quot;D&quot; };\n    for (int x = 0; x &lt; 32; x++) {\n        for (int y = 0; y &lt; 13; y++) {\n            //if ((x == 0) &amp;&amp; (y &gt; 0)) cal_mat[x][y] = &quot;  &quot; + months_arr[y - 1];\n            if ((x == 0) &amp;&amp; (y &gt; 0)) { cal_mat[x][y] = months_array[y - 1]; }\n            else if ((y == 0) &amp;&amp; (x &gt; 0)) { cal_mat[x][y] = std::to_string(x);}\n            else cal_mat[x][y] = &quot; &quot;;\n\n            cal_mat[2][10] = &quot;X&quot;; /*just an example, it will be user input*/\n            std::cout &lt;&lt; cal_mat[x][y];\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n\n    return 0; \n} \n</code></pre>\n<p>I expect to have the months in row 1 and days 1 to 31 in column 1. The middle portion should be blank where user can put X mark. The position <code>[0][0]</code> in <code>cal_mat</code> shoud be blank. <a href=\"https://i.stack.imgur.com/sEsvl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sEsvl.png\" alt=\"calender, &quot;X&quot; at date October 2nd\" /></a></p>\n"}, {"tags": ["python", "c++", "function-pointers", "member-function-pointers", "pybind11"], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1554903335, "post_id": 55613671, "comment_id": 97921758, "body": "Obligatory &quot;another instance where <code>static_cast</code> keeps you on the right track, unlike C-style casts&quot;."}, {"owner": {"reputation": 1267, "user_id": 3378223, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/873c642b0a5742d354675d4235c10b1a?s=128&d=identicon&r=PG&f=1", "display_name": "alec.tu", "link": "https://stackoverflow.com/users/3378223/alec-tu"}, "edited": false, "score": 0, "creation_date": 1554903348, "post_id": 55613671, "comment_id": 97921769, "body": "Awesome. Can you elaborate more about the &quot;*&quot; symbol?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1267, "user_id": 3378223, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/873c642b0a5742d354675d4235c10b1a?s=128&d=identicon&r=PG&f=1", "display_name": "alec.tu", "link": "https://stackoverflow.com/users/3378223/alec-tu"}, "edited": false, "score": 0, "creation_date": 1554906097, "post_id": 55613671, "comment_id": 97923476, "body": "@alec.tu It means the very same thing as in the cast you show in your question: It means <i>pointer</i>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1267, "user_id": 3378223, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/873c642b0a5742d354675d4235c10b1a?s=128&d=identicon&r=PG&f=1", "display_name": "alec.tu", "link": "https://stackoverflow.com/users/3378223/alec-tu"}, "edited": false, "score": 0, "creation_date": 1554909569, "post_id": 55613671, "comment_id": 97925623, "body": "@alec.tu The type <code>void (*)(int, int)</code> means &quot;pointer to a function taking two <code>int</code> arguments, returning nothing&quot;. The type <code>void (TESTDB::*)(int, int)</code> means &quot;pointer to a <code>TESTDB</code> member function taking two <code>int</code> arguments, returning nothing&quot;."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1554902875, "last_edit_date": 1554902875, "creation_date": 1554902481, "answer_id": 55613671, "question_id": 55613577, "link": "https://stackoverflow.com/questions/55613577/unable-to-bind-overloaded-static-member-functions-in-pybind11/55613671#55613671", "title": "Unable to bind overloaded static member functions in pybind11", "body": "<p>The problem is your cast <code>(void (TESTDB::*)(int, int))</code>. That cast is casting the pointer to the static member function into a pointer to <em>non</em>-static member function, which is incorrect.</p>\n\n<p>Since the functions are static, you should simply cast them as pointers to ordinary non-member functions:</p>\n\n<pre><code>py::class_&lt;TESTDB&gt;(m, \"db\")\n    .def_static(\"aaaa\", static_cast&lt;void (*)(int, int)&gt;(&amp;TESTDB::aaaa));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2605, "user_id": 10420039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1YiNn.png?s=128&g=1", "display_name": "Hiroki", "link": "https://stackoverflow.com/users/10420039/hiroki"}, "is_accepted": false, "score": 1, "last_activity_date": 1554918560, "last_edit_date": 1554918560, "creation_date": 1554909953, "answer_id": 55616246, "question_id": 55613577, "link": "https://stackoverflow.com/questions/55613577/unable-to-bind-overloaded-static-member-functions-in-pybind11/55616246#55616246", "title": "Unable to bind overloaded static member functions in pybind11", "body": "<p>Just FYI - First, <em>8.3.1 Pointers [dcl.ptr] / 1</em> of the C++ standard draft <a href=\"https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents/4653479#4653479\">n3337</a> (essentially C++11) states </p>\n\n<blockquote>\n  <p>In a declaration T D where D has the form</p>\n\n<pre><code>* attribute-specifier-seq cv-qualifier-seq D1\n</code></pre>\n  \n  <p>and the type of the identifier in the declaration T D1 is \u201c<em>derived-declarator-type-list</em> T,\u201d then the type of the identifier of D is \u201c<em>derived-declarator-type-list</em> <em>cv-qualifier-seq</em> pointer to T.\u201d ...</p>\n</blockquote>\n\n<p>and <em>8.3.3 Pointers to members [dcl.mptr] / 1</em> states</p>\n\n<blockquote>\n  <p>In a declaration T D where D has the form</p>\n\n<pre><code>nested-name-specifier * attribute-specifier-seq cv-qualifier-seq D1\n</code></pre>\n  \n  <p>and the <em>nested-name-specifier</em> denotes a class, and the type of the identifier in the declaration T D1 is \u201c<em>derived-declarator-type-list</em> T\u201d, then the type of the identifier of D is \u201c<em>derived-declarator-type-list</em> <em>cv-qualifier-seq</em> pointer to member of class <em>nested-name-specifier</em> of type T\u201d. ...</p>\n</blockquote>\n\n<p><strong>These statements mean that we have to use the above <em>nested-name-specifier</em> <code>TESTDB::</code> in <code>TESTDB::*</code> if and only if the function <code>TESTDB::aaaa</code> is a member function</strong>.</p>\n\n<p>Next, <em>5.2.2 Function call [expr.call]</em> states</p>\n\n<blockquote>\n  <ol>\n  <li>There are two kinds of function call: <em>ordinary function</em> call and <em>member function<sup><strong>63</strong></sup></em> (9.3) call. ...</li>\n  </ol>\n</blockquote>\n\n<p>where the footnote <strong>63</strong> is</p>\n\n<blockquote>\n  <p><strong>63</strong>) A static member function (9.4) is an <em>ordinary function</em>.</p>\n</blockquote>\n\n<p><strong>This implies that your static member function <code>TESTDB::aaaa</code> is an <em>ordinary function</em></strong>, not a <em>member function</em>.\nThus you must not specify <code>TESTDB::</code> in the current cast.</p>\n\n<hr>\n\n<p>In summary, you have to disambiguate the two overloads of <code>TESTDB::aaaa</code> like this:</p>\n\n<p><a href=\"https://godbolt.org/z/DEDdvI\" rel=\"nofollow noreferrer\"><strong>Live DEMO</strong></a></p>\n\n<pre><code>static_cast&lt;void (*)(int, int)&gt;(&amp;TESTDB::aaaa)\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 3378223, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/873c642b0a5742d354675d4235c10b1a?s=128&d=identicon&r=PG&f=1", "display_name": "alec.tu", "link": "https://stackoverflow.com/users/3378223/alec-tu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 55613671, "answer_count": 2, "score": 0, "last_activity_date": 1554918560, "creation_date": 1554902213, "last_edit_date": 1554911051, "question_id": 55613577, "link": "https://stackoverflow.com/questions/55613577/unable-to-bind-overloaded-static-member-functions-in-pybind11", "title": "Unable to bind overloaded static member functions in pybind11", "body": "<p>I tried to bind the static overloaded functions with pybind11, but got some problems.</p>\n\n<p>Here is the sample code</p>\n\n<pre><code>#include &lt;pybind11/pybind11.h&gt;\n\nnamespace py = pybind11;\n\nclass TESTDB {\n  public:\n    static void aaaa(int a, int b) {printf(\"aaaaa\");};\n    static void aaaa(int a) {printf(\"xxxxx\");};\n};\n\nPYBIND11_MODULE(example, m) {\n\n\n  py::class_&lt;TESTDB&gt;(m, \"db\")\n     .def_static(\"aaaa\", (void (TESTDB::*)(int, int)) &amp;TESTDB::aaaa);\n\n}\n</code></pre>\n\n<p>but it's failed to compile due to</p>\n\n<pre><code>error: no matches converting function \u2018aaaa\u2019 to type \u2018void (class TESTDB::*)(int, int)\u2019\n   .def_static(\"aaaa\", (void (TESTDB::*)(int, int)) &amp;TESTDB::aaaa);\n note: candidates are: static void TESTDB::aaaa(int)\n static void aaaa(int a) {printf(\"xxxxx\");};\n note:                 static void TESTDB::aaaa(int, int)\n static void aaaa(int a, int b) {printf(\"aaaaa\");};\n</code></pre>\n\n<p>any idea?</p>\n\n<p>thank you</p>\n"}, {"tags": ["c++", "multithreading", "testing"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1554902130, "post_id": 55613359, "comment_id": 97920955, "body": "Why not? why do you not want to test the actual behaviour? the thread does terminate gracefully right? I would mock the backend server and check the actual connection."}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1554902369, "post_id": 55613359, "comment_id": 97921106, "body": "I don&#39;t need a full mock of the backend server at the moment. I&#39;m perfectly fine with just assuring that the API methods (which are wrapped by a separate class) are called at the right moment with the right parameters."}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1554902504, "post_id": 55613359, "comment_id": 97921176, "body": "To answer your second point: I don&#39;t know if it&#39;s a good idea to always start a detached thread every time that unit test is run. If you can convince be that it doesn&#39;t matter, then fine :D"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1554902519, "post_id": 55613359, "comment_id": 97921183, "body": "It does not need to be a full mock but a light weight one really. In that case you are better of creating an abstracion class and wrap your lower level calls in them like have your own CreateThread(), CreateMtx etc and override them as you will."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554902537, "post_id": 55613359, "comment_id": 97921199, "body": "why does <code>A</code> start and detach the thread? If the line in the method would be just <code>ioc_.create_thread_and_run()</code> you could mock <code>ioc_</code> to do nothing in that method for the test"}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554902639, "post_id": 55613359, "comment_id": 97921266, "body": "@user463035818 ioc is actually an object of a class of the boost library called io_context. Yes, mocking that class would be another possibility. I&#39;d have to look into the class it inherits from to see if mocking that is possible."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554902744, "post_id": 55613359, "comment_id": 97921329, "body": "tbh I dont really understand the question. As I understand it the answer definitely is dependency injection, however you already mention it and want to avoid it, but then what else do you want?"}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 2, "creation_date": 1554902867, "post_id": 55613359, "comment_id": 97921424, "body": "I don&#39;t want to avoid it. I just wanted to ask if there&#39;s another way that I should consider instead of dependency injection. Because creating a class that simply starts a new thread on a given ioc object and having to inject that class seems like a lot of overhead."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1554911851, "post_id": 55613359, "comment_id": 97926915, "body": "Another possibility is that You have 2 cpp files with the implementation of <code>void A::StartIocThread()</code>. 1) A file with the real implementation which is linked with the release code, 2) a file with an empty/test/mock implementation which is linked with the test project. But this can be a headache."}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1554966308, "post_id": 55613359, "comment_id": 97945019, "body": "Thanks for your suggestions :) I decided to go with a standard dependency injection for now."}], "owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554903247, "creation_date": 1554901597, "question_id": 55613359, "link": "https://stackoverflow.com/questions/55613359/how-to-avoid-calling-a-method-in-unit-tests", "title": "How to avoid calling a method in unit tests?", "body": "<p>I'm writing tests for a class A. The behavior this class is supposed to implement is starting a connection to a backend system. It offers the public function <code>StartConnection()</code> via its interface.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void A::StartConnection(const std::string uri) {\n  // various method calls...\n  StartIocThread();\n  // more method calls and stuff to do...\n}\n</code></pre>\n\n<p><code>StartConnection</code> includes calls to various private methods, such as a method to regex the URI or set up handler. One of these methods is called <code>StartIocThread</code> which launches a new thread which will later invoke the handlers.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void A::StartIocThread() {\n  std::thread([&amp;] { ioc_.run(); }).detach();\n}\n</code></pre>\n\n<p>Now obviously I don't want a new thread to be detached every time I run the <code>StartConnection</code> unit test. However, this method gets called inside the <code>StartConnection()</code> method. What is the best way to prevent a new thread being created every time?</p>\n\n<p>The only way I can think of right now is putting that method inside a different class which I can then mock in the unit test. But that seems like a lot of overhead (including dependency injection) just to prevent this method from being called.</p>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1554901874, "post_id": 55613317, "comment_id": 97920783, "body": "If you say <code>phonebook.arr[k].AddName(&amp;contact);</code>, you are adding <code>contact</code>&#39;s address to the list. You need to add a copy instead. Any in any case, it seems that the last code snipped was included in some loop, which is dangerous as you would be passing the address of a local/temporary variable."}, {"owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1554902013, "post_id": 55613317, "comment_id": 97920874, "body": "@molbdnilo most probably <a href=\"https://www.opendatastructures.org/ods-cpp/5_1_Hashing_with_Chaining.html\" rel=\"nofollow noreferrer\">hashing with chaining</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "edited": false, "score": 0, "creation_date": 1554902077, "post_id": 55613317, "comment_id": 97920914, "body": "@andreee I should have read the first sentence..."}], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": true, "score": 1, "last_activity_date": 1554902211, "creation_date": 1554902211, "answer_id": 55613575, "question_id": 55613317, "link": "https://stackoverflow.com/questions/55613317/same-address-is-getting-stored-in-the-head-of-a-linked-list/55613575#55613575", "title": "Same address is getting stored in the head of a linked list", "body": "<p>The problem here is that you are creating a stack variable and then adding its address in the list. Then maybe you change the values and add it again.</p>\n\n<p>To  achieve your desired behavior you must create new instances at each entry. For this you can use <code>new</code> to create different contacts.</p>\n\n<pre><code>  Contact* contact = new Contact;\n</code></pre>\n\n<p>Even better will be to use a smart pointers in order to manage the memory and ensure no memory leaks.</p>\n\n<pre><code>std::unique_ptr&lt;Contact&gt; contact = std::make_unique&lt;Contact&gt;();\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10145538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d188fd0e36ed211e2f98a95affe64c?s=128&d=identicon&r=PG&f=1", "display_name": "Umakant Vashishtha", "link": "https://stackoverflow.com/users/10145538/umakant-vashishtha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 55613575, "answer_count": 1, "score": 1, "last_activity_date": 1554902271, "creation_date": 1554901483, "last_edit_date": 1554902271, "question_id": 55613317, "link": "https://stackoverflow.com/questions/55613317/same-address-is-getting-stored-in-the-head-of-a-linked-list", "title": "Same address is getting stored in the head of a linked list", "body": "<p>I am trying to implement hash tables in C++. So for this, I have created an array of linked lists. But I am having issues with maintaining the head of each list.</p>\n\n<p>And I have a linked_list named <strong><code>ContactList</code></strong> and the array of the list is defined in another class called <strong><code>PhoneBook</code></strong>:</p>\n\n<pre><code>class ContactList {            \n    public:\n    Contact *head;\n    void AddName(Contact *);\n};\n\n\nclass PhoneBook {\n    public:\n    ContactList arr[100000];\n};\n</code></pre>\n\n<p>which is supposed to contain nodes defined in the following manner:</p>\n\n<pre><code>struct Contact {\n    int phone;\n    string name;\n    Contact *next;\n};\n</code></pre>\n\n<p>the <code>AddName</code> function is supposed to go through the whole list to find a node with the same number and if it finds that node, it simply modifies the <code>node.name</code>, otherwise it adds it to the end of the list. I wrote the following code to carry this out:</p>\n\n<pre><code>void ContactList::AddName(Contact *contact){\n    bool flag = 0;\n    Contact *node = head;\n    if(node == NULL){\n        head = contact;\n        return;\n    }\n    ...\n}\n</code></pre>\n\n<p>A call to function <code>AddName</code> goes like this:</p>\n\n<pre><code>Contact contact{queries[i].number, queries[i].name};\nphonebook.arr[k].AddName(&amp;contact);\n</code></pre>\n\n<p>But the problem is that at every call the address of argument <code>contact</code> is the same and therefore the same address is stored in the head of every list at each index. How do I change the call to allocate new memory? Or should I change something inside my <code>AddNew</code> function?</p>\n\n<p>Edit: I figured out I was not allocating new memory, so I looked for a solution and made the following changes:</p>\n\n<pre><code>void ContactList::AddName(Contact contact){\n    bool flag = 0;\n    struct Contact *new_node = (struct Contact *) malloc(sizeof(struct Contact));\n    new_node-&gt;phone = contact.phone;\n    new_node-&gt;name = contact.name;\n    if(head == NULL){\n        head = new_node;\n        return;\n    }\n</code></pre>\n\n<p>But now I am getting a Segmentation Error in the following line:</p>\n\n<pre><code>new_node-&gt;name = contact.name;\n</code></pre>\n"}, {"tags": ["c++", "boost", "ipc", "boost-interprocess"], "answers": [{"comments": [{"owner": {"reputation": 6790, "user_id": 1027706, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ff91cf16cbd51dad8e48e2799f97e811?s=128&d=identicon&r=PG", "display_name": "Ad N", "link": "https://stackoverflow.com/users/1027706/ad-n"}, "edited": false, "score": 0, "creation_date": 1554909898, "post_id": 55615735, "comment_id": 97925807, "body": "Thank you for your response. What does it mean to unlink the file? Can we leverage that to actually achieve Process persistence for the application? (so it behaves correctly in the event of a crash)"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 6790, "user_id": 1027706, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ff91cf16cbd51dad8e48e2799f97e811?s=128&d=identicon&r=PG", "display_name": "Ad N", "link": "https://stackoverflow.com/users/1027706/ad-n"}, "edited": false, "score": 0, "creation_date": 1554910783, "post_id": 55615735, "comment_id": 97926262, "body": "@AdN You can use a robust mutex to protect from mutexes locked by terminated processes."}, {"owner": {"reputation": 6790, "user_id": 1027706, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ff91cf16cbd51dad8e48e2799f97e811?s=128&d=identicon&r=PG", "display_name": "Ad N", "link": "https://stackoverflow.com/users/1027706/ad-n"}, "edited": false, "score": 0, "creation_date": 1554916738, "post_id": 55615735, "comment_id": 97929404, "body": "Are you aware of an implementation of robust mutexes available in boost interprocess? (I am afraid it is not a portable approach, afaik robust mutexes are not available on macOS)"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1554974957, "last_edit_date": 1554974957, "creation_date": 1554908370, "answer_id": 55615735, "question_id": 55613226, "link": "https://stackoverflow.com/questions/55613226/what-does-it-mean-to-have-process-persistence-for-boost-interprocess-mutex/55615735#55615735", "title": "What does it mean to have &quot;Process persistence&quot; for boost interprocess_mutex?", "body": "<p>POSIX mutex, for example (used in Linux implementation of boost::interprocess), doesn't own its memory, so its persistence is that of the memory it resides in.</p>\n\n<p>The code creates an anonymous mutex in a named file in the filesystem. The mutex's persistence becomes that of the named file it resides in.</p>\n\n<p>When the file is unlinked, the mutex's persistence becomes process persistence.</p>\n"}], "owner": {"reputation": 6790, "user_id": 1027706, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ff91cf16cbd51dad8e48e2799f97e811?s=128&d=identicon&r=PG", "display_name": "Ad N", "link": "https://stackoverflow.com/users/1027706/ad-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554974957, "creation_date": 1554901243, "question_id": 55613226, "link": "https://stackoverflow.com/questions/55613226/what-does-it-mean-to-have-process-persistence-for-boost-interprocess-mutex", "title": "What does it mean to have &quot;Process persistence&quot; for boost interprocess_mutex?", "body": "<p>From <a href=\"https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess/some_basic_explanations.html#interprocess.some_basic_explanations.persistence\" rel=\"nofollow noreferrer\">Boost Interprocess documentation</a>, the (anonymous) process-shared mutex types have <em>Process persistence</em>, which it defines as follows:</p>\n\n<blockquote>\n  <p>Process-persistence: The mechanism lasts until all the processes that have opened the mechanism close it, exit or crash.</p>\n</blockquote>\n\n<p>Since these mutexes are anonymous, to be shared they have to be placed in some shared memory (that has longer persistence, either Kernel or Filesystem depending on the platform).</p>\n\n<p>Let's consider this minimal example:</p>\n\n<pre><code>namespace bi = boost::interprocess;\n\n{\n    bool isMemoryCreated = /*assume function to get this info*/;\n\n    bi::shared_memory_object shm = [&amp;]() -&gt; bi::shared_memory_object\n    {\n        if (isMemoryCreated)\n        {\n            return {bi::open_only, \"sharemem\", bi::read_write};\n        }\n        else\n        {\n            bi::shared_memory_object shm{bi::create_only, \"sharemem\", bi::read_write};\n            shm.truncate(sizeof(bi::interprocess_mutex));\n            return shm;\n        }\n    }();\n\n    //Map the whole shared memory in this process\n    region = bi::mapped_region(shm, bi::read_write);\n    void * address = region.get_address();\n\n    bi::interprocess_mutex mutex = [&amp;]() \n    {\n        if (isMemoryCreated)\n        {\n            return static_cast&lt;bi::interprocess_mutex*&gt;(address);\n        }\n        else\n        {\n            return new (address) bi::interprocess_mutex;\n        }\n    }();\n\n    std::cout &lt;&lt; mutex-&gt;try_lock() &lt;&lt; std::endl;\n\n    // wait on external condition\n\n    mutex-&gt;unlock();\n    bi::shared_memory_object::remove(\"sharemem\");\n}\n</code></pre>\n\n<p>Here are some results of running this on macOS:</p>\n\n<ul>\n<li><p>If running <em>processA</em> until normal completion then <em>processB</em>, both processes have to create the memory, and successfully acquire the lock. This is as expected.</p></li>\n<li><p>If running <em>processA</em> and \"force quitting\" it, it never reaches the clean-up code releasing the lock and removing the memory. Now, running <em>processB</em> the memory would already exist (<code>isMemoryCreated</code> being true), which is expected because shared memory has at least Kernel persistence. But <strong>processB would not be able to lock the mutex</strong>, which seems contradictory to the boost documentation: the mutex should have process persistence, thus when <em>processA</em> exited it should not have persisted further.</p></li>\n</ul>\n\n<p>Is that a bug in the library? Or does \"Process persistence\" means something different than that?</p>\n"}, {"tags": ["c++", "ssl", "timeout"], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 7976600, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a8d5fd4726738cd6d054cbf1898e2733?s=128&d=identicon&r=PG&f=1", "display_name": "Drejc", "link": "https://stackoverflow.com/users/7976600/drejc"}, "is_accepted": false, "score": 0, "last_activity_date": 1572277681, "creation_date": 1572277681, "answer_id": 58594090, "question_id": 55613133, "link": "https://stackoverflow.com/questions/55613133/set-connection-timeout-for-ssl-read-in-openssl-in-c/58594090#58594090", "title": "Set connection timeout for SSL_read in OpenSSL in C++", "body": "<p>You can do that in the same way as you do it with normal sockets. Basically you set the <code>timeval</code> on a socket and in ssl code the <code>SSL_read</code> will return -1 when the time set in <code>timeval</code> passes. </p>\n\n<pre><code>int fd, new_fd;\nstruct timeval tv;\nchar buffer[1024];\n\n// ...\n\ntv.tv_sec = 5; // 5 seconds\ntv.tv_usec = 0;\nsetsockopt(new_fd, SOL_SOCKET, SO_RCVTIMEO, (const char*)&amp;tv, sizeof tv);\n\n// ...\n\n// this will return -1 if nothing is received after 5 seconds\nSSL_read(ssl, buffer, sizeof buffer); \n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11147631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33987d138900bb6cd6f67c922cf9996?s=128&d=identicon&r=PG&f=1", "display_name": "Francois", "link": "https://stackoverflow.com/users/11147631/francois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1071, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1572277681, "creation_date": 1554900924, "question_id": 55613133, "link": "https://stackoverflow.com/questions/55613133/set-connection-timeout-for-ssl-read-in-openssl-in-c", "title": "Set connection timeout for SSL_read in OpenSSL in C++", "body": "<p>I am developing a linux application which communicates with OpenSSL. I am currently running some robustness tests and one of the is giving me a hard time.</p>\n\n<p>I plug out the Ethernet cable when my program is downloading a big file and I wish that it stops after 30seconds for example. But it never stop.</p>\n\n<p>I use SSL_read and this is where it blocks :</p>\n\n<pre><code>count = SSL_read(ssl, buffer, BUFSIZE);\n</code></pre>\n\n<p>Is it possible to set a timeout to SSL_read ? </p>\n\n<p>I have tried <code>SSL_CTX_set_timeout()</code> but it is not working. I have also seen that it was maybe possible to use <code>select()</code> but I don't understand how to use it with <code>SSL_read()</code></p>\n"}, {"tags": ["c++", "templates", "c++98"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1554900140, "post_id": 55612759, "comment_id": 97919636, "body": "Is that the only thing you want to do? Because you could use a macro... :)"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 2, "creation_date": 1554901085, "post_id": 55612759, "comment_id": 97920232, "body": "It would be better if you show: how you want to use this template; instead showing: how you think it should be written. It may turn out that @StoryTeller answer doesn&#39;t match your requirements, but it is a valid fix for code you&#39;ve provided."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1554903933, "post_id": 55612759, "comment_id": 97922146, "body": "Is it the case that most namespaces contain function templates and/or functions that accept arguments from same and other namespaces named &quot;bar&quot;? Did the authors ran out of verbs? Note that the very situation is confusing for human reader. That can indeed be made unambiguous for C++ compiler by using parentheses around function name to pick from same namespace or helper namespaces to pick from argument namespace but it is smelly anyway."}], "answers": [{"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1554900449, "post_id": 55612878, "comment_id": 97919821, "body": "Hahaha :) lol but this won&#39;t work if there is a <code>bar</code> already in <code>foo</code>&#39;s namespace, which is why I&#39;m assuming OP wanted to call it with namespace qualifier."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1554900992, "post_id": 55612878, "comment_id": 97920180, "body": "@Rakete1111 - There are ways to address that too (I know you know) :) If the OP has a case like that on their hands, it sounds to me like prime material for a followup question."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1554901403, "post_id": 55612878, "comment_id": 97920440, "body": "Hmm I know the reverse (no ADL) but not how to disable unqual lookup and only get ADL."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1554901548, "post_id": 55612878, "comment_id": 97920535, "body": "@Rakete1111 - regular unqualified name lookup up namespace scopes stops the moment a name is found. So if one adds a layer of indirection, where only the worst possible match may be found... <a href=\"http://coliru.stacked-crooked.com/a/08e1f9d97ed4bb97\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/08e1f9d97ed4bb97</a>"}, {"owner": {"reputation": 307, "user_id": 1340086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/05d733b5d7d7ed78a9e0ff37d9f92cd2?s=128&d=identicon&r=PG", "display_name": "Oracular", "link": "https://stackoverflow.com/users/1340086/oracular"}, "edited": false, "score": 0, "creation_date": 1554906484, "post_id": 55612878, "comment_id": 97923688, "body": "Thanks so much! Does exactly what I wanted. Was not familiar enough with the ADL rules. Guess you learn something new every day :)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 307, "user_id": 1340086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/05d733b5d7d7ed78a9e0ff37d9f92cd2?s=128&d=identicon&r=PG", "display_name": "Oracular", "link": "https://stackoverflow.com/users/1340086/oracular"}, "edited": false, "score": 0, "creation_date": 1554906736, "post_id": 55612878, "comment_id": 97923841, "body": "@Oracular - Happy to be of help :)"}, {"owner": {"reputation": 307, "user_id": 1340086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/05d733b5d7d7ed78a9e0ff37d9f92cd2?s=128&d=identicon&r=PG", "display_name": "Oracular", "link": "https://stackoverflow.com/users/1340086/oracular"}, "edited": false, "score": 1, "creation_date": 1554915270, "post_id": 55612878, "comment_id": 97928689, "body": "@StoryTeller what if the function bar() does not take a parameter based on the template type? What if it is just bar(int) or something similar?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 307, "user_id": 1340086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/05d733b5d7d7ed78a9e0ff37d9f92cd2?s=128&d=identicon&r=PG", "display_name": "Oracular", "link": "https://stackoverflow.com/users/1340086/oracular"}, "edited": false, "score": 1, "creation_date": 1554915527, "post_id": 55612878, "comment_id": 97928825, "body": "@Oracular - For ADL to work, the argument must be a user-defined type. That did not look like a possibility in your original post however. I suppose your <code>X</code> is a type alias? There is no solution for it to my knowledge, short of doing what Marek proposed, and using a <code>struct</code> in lieu of a namespace."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 12, "last_activity_date": 1554906701, "last_edit_date": 1554906701, "creation_date": 1554900203, "answer_id": 55612878, "question_id": 55612759, "link": "https://stackoverflow.com/questions/55612759/alternative-to-using-namespace-as-template-parameter/55612878#55612878", "title": "Alternative to using namespace as template parameter", "body": "<blockquote>\n  <p>Except T is a namespace rather than a struct or a class. What is the best way to achieve the most similar result to what I am expecting?</p>\n</blockquote>\n\n<p>Don't mention <code>T</code> at all.</p>\n\n<pre><code>template &lt;typename X&gt;\nvoid foo(X* x)\n{\n    bar(x);\n}\n</code></pre>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/adl\" rel=\"nofollow noreferrer\">ADL</a> will always pick up on overloads from the namespace where <code>X</code> is defined. Let the mechanism do its work.</p>\n\n<hr>\n\n<p>Now, if you are asking how to make the compiler <em>favor</em> functions found by ADL, it's all about manipulating overload resolution. We can do that by limiting what is picked up by regular unqualified name lookup:</p>\n\n<pre><code>namespace foo_detail {\n    void bar(...);\n    template&lt;typename X&gt;\n    void foo_impl(X* x) {\n        bar(x);\n    }\n}\n\ntemplate &lt;typename X&gt;\nvoid foo(X* x)\n{\n    foo_detail::foo_impl(x);\n}\n</code></pre>\n\n<p>When the call in <code>foo_detail::foo_impl</code> is trying to resolve <code>bar</code>, the first phase in two-phase lookup will pickup the C variable argument function. Now lookup stops, no further enclosing namespaces will be looked in. Which means that only ADL can offer more candidates. And due to how overload resolution works, a C-style variable argument function like we added will be a worse match than anything ADL will find.</p>\n\n<p>Here's a <a href=\"http://coliru.stacked-crooked.com/a/506f0f41dfa59390\" rel=\"nofollow noreferrer\">live example</a> for all of this at work.</p>\n"}, {"comments": [{"owner": {"reputation": 15536, "user_id": 106797, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2cd9d402946952185010cdb5e8b9de0d?s=128&d=identicon&r=PG", "display_name": "Catskul", "link": "https://stackoverflow.com/users/106797/catskul"}, "edited": false, "score": 3, "creation_date": 1569861677, "post_id": 55613344, "comment_id": 102724984, "body": "I can&#39;t figure out why when someone starts their original question with &quot;I know I cannot use a namespace as a template parameter.&quot; another person would start their response with &quot;Namespace can&#39;t be a template parameter&quot;."}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 3, "last_activity_date": 1554902322, "last_edit_date": 1554902322, "creation_date": 1554901550, "answer_id": 55613344, "question_id": 55612759, "link": "https://stackoverflow.com/questions/55612759/alternative-to-using-namespace-as-template-parameter/55613344#55613344", "title": "Alternative to using namespace as template parameter", "body": "<p>Namespace can't be a template parameter.\nThe only possible template parameters are:</p>\n\n<ul>\n<li>types</li>\n<li>and values which are: <a href=\"https://en.cppreference.com/w/cpp/language/template_parameters#Non-type_template_parameter\" rel=\"nofollow noreferrer\">Template parameters and template arguments - cppreference.com</a></li>\n</ul>\n\n<blockquote>\n  <ul>\n  <li><a href=\"https://en.cppreference.com/w/cpp/types/nullptr_t\" rel=\"nofollow noreferrer\" title=\"cpp/types/nullptr t\">std::nullptr_t</a> (since C++11);</li>\n  <li>an <a href=\"https://en.cppreference.com/w/cpp/language/type\" rel=\"nofollow noreferrer\" title=\"cpp/language/type\">integral type</a>;</li>\n  <li>a <a href=\"https://en.cppreference.com/w/cpp/language/pointer\" rel=\"nofollow noreferrer\" title=\"cpp/language/pointer\">pointer type</a> (to object or to function);</li>\n  <li>a <a href=\"https://en.cppreference.com/w/cpp/language/pointer#Pointers_to_members\" rel=\"nofollow noreferrer\" title=\"cpp/language/pointer\">pointer to member type</a> (to member object or to member function);</li>\n  <li>an <a href=\"https://en.cppreference.com/w/cpp/language/enum\" rel=\"nofollow noreferrer\" title=\"cpp/language/enum\">enumeration type</a>.</li>\n  </ul>\n</blockquote>\n\n<p>So if you want change <code>bar</code> version depending on namespace it can't be done like you proposed.<br>\nIt can be achieved if <code>bar</code> is enclosed in class as a static function. In such case you can use your template, then that class becomes template parameter.</p>\n\n<p>So your code can look lie this:</p>\n\n<pre><code>class Variant1 {\npublic:\n    typedef int* argType;\n\n    static void bar(argType i) {\n        std::cout &lt;&lt; (*i + 1);\n    }\n};\nclass Variant2 {\npublic:\n    typedef size_t* argType;\n\n    static void bar(argType i) {\n        std::cout &lt;&lt; (*i - 1);\n    }\n};\n\ntemplate &lt;typename T&gt;\nvoid foo(typename T::argType x)\n{\n    T::bar(x);\n}\n\n//usage\nsize_t a = 1;\nint x = 1;\n\nfoo&lt;Variant1&gt;(&amp;a);\nfoo&lt;Variant2&gt;(&amp;b);\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 1340086, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/05d733b5d7d7ed78a9e0ff37d9f92cd2?s=128&d=identicon&r=PG", "display_name": "Oracular", "link": "https://stackoverflow.com/users/1340086/oracular"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2016, "favorite_count": 0, "accepted_answer_id": 55612878, "answer_count": 2, "score": 4, "last_activity_date": 1554906701, "creation_date": 1554899862, "question_id": 55612759, "link": "https://stackoverflow.com/questions/55612759/alternative-to-using-namespace-as-template-parameter", "title": "Alternative to using namespace as template parameter", "body": "<p>I know I cannot use a namespace as a template parameter. However, I'm trying to achieve behavior similar to this:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid foo(T::X* x)\n{\n    T::bar(x);\n}\n</code></pre>\n\n<p>Except T is a namespace rather than a struct or a class. What is the best way to achieve the most similar result to what I am expecting?</p>\n"}, {"tags": ["c++", "boost", "cmake", "clion"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1554900737, "post_id": 55612713, "comment_id": 97920018, "body": "&quot;About case 2: [Target pattern contains no &#39;%&#39;. Makefile] implies that it is a path problem with any of my paths. I have zero idea how to further debug the problem&quot; - You may start with <b>looking into the line of Makefile</b> which causes the error. Path to the Makefile and an errornous line are printed in the error message. As for the absent file <code>&#47;usr&#47;local&#47;lib&#47;libboost_program_options.so</code>, you need to <b>install the package</b> which provides given file. For find the package name, simply google for &quot;&lt;your-Linux-distro&gt; &lt;filename&gt;&quot;."}, {"owner": {"reputation": 563, "user_id": 7707765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c4a31d9b1f46e17036955b67c3a340?s=128&d=identicon&r=PG&f=1", "display_name": "Ketzu", "link": "https://stackoverflow.com/users/7707765/ketzu"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1554903011, "post_id": 55612713, "comment_id": 97921526, "body": "@Tsyvarev thanks for the hint for case 2, i have been blind about it. That helped. I&#39;ll edit it in. About case 1 and the installation of the package: The file exists as far as I can tell and boost-devel is installed already."}], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 7707765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c4a31d9b1f46e17036955b67c3a340?s=128&d=identicon&r=PG&f=1", "display_name": "Ketzu", "link": "https://stackoverflow.com/users/7707765/ketzu"}, "is_accepted": true, "score": 0, "last_activity_date": 1556277863, "creation_date": 1556277863, "answer_id": 55866593, "question_id": 55612713, "link": "https://stackoverflow.com/questions/55612713/cmake-and-or-make-error-while-adding-boost-to-project/55866593#55866593", "title": "CMake and/or make error while adding boost to project", "body": "<p>While I could find clues for the reasons of the problem, I could not solve them. It was most likely a problem with my system config on fedora.</p>\n\n<p>But as an alternative solution to operating system development library management and troubles with ld I used <a href=\"https://conan.io/\" rel=\"nofollow noreferrer\">conan.io</a> with cmake to setup my development environment.</p>\n\n<p>While this might not help everyone sumbling accross similar problems to mine, it might help some out.</p>\n\n<p>Thanks everyone for the help.</p>\n"}], "owner": {"reputation": 563, "user_id": 7707765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c4a31d9b1f46e17036955b67c3a340?s=128&d=identicon&r=PG&f=1", "display_name": "Ketzu", "link": "https://stackoverflow.com/users/7707765/ketzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 55866593, "answer_count": 1, "score": 0, "last_activity_date": 1556277863, "creation_date": 1554899695, "last_edit_date": 1592644375, "question_id": 55612713, "link": "https://stackoverflow.com/questions/55612713/cmake-and-or-make-error-while-adding-boost-to-project", "title": "CMake and/or make error while adding boost to project", "body": "<p>I started a fresh c++ project trying to use <a href=\"https://www.boost.org/doc/libs/1_63_0/doc/html/program_options.html\" rel=\"nofollow noreferrer\">boost program_options</a>. Unfortunately I have trouble with cmake; depending on what I try I either get a gmake error not beeing able to build a file or another one about target patterns not containing <code>%</code>.</p>\n<p>Actual errors are:</p>\n<blockquote>\n<p>While using ${Boost_LIBRARIES} (case 1): gmake error: No rule to build /usr/local/lib/libbooost_program_options.so</p>\n<p>While using Boost::program_options (case 2): gmake error: Target pattern does not conaint &quot;%&quot;. Stop.</p>\n</blockquote>\n<p>I sourced my solution attempts from this SO thread: <a href=\"https://stackoverflow.com/questions/3897839/how-to-link-c-program-with-boost-using-cmake\">How to link C++ program with Boost using CMake</a></p>\n<p>About case 1: <a href=\"https://askubuntu.com/questions/939526/make-problem-no-rule-to-make-target-usr-lib-x86-64-linux-gnu-libpcl-common-so/940036#940036\">this</a> provides a step by step guide for this problem. Unfortunately after step one &quot;check if the file exists&quot; there is no hint at what to do if it DOES exists, which it does in my case.</p>\n<pre><code>stat /usr/local/lib/libboost_program_options.so\n  Datei: /usr/local/lib/libboost_program_options.so -&gt; libboost_program_options.so.1.62.0\n</code></pre>\n<p>Other threads, such as <a href=\"https://stackoverflow.com/questions/26807329/no-rule-to-make-target-error-in-cmake-when-linking-to-shared-library\">&quot;No rule to make target&quot; error in cmake when linking to shared library</a> suggest using finder scripts, which I already do.</p>\n<p>edit: Thanks to a comment it turned out i was blind for parts of the error message: The path plugged into the makefile is &quot;Boost::program_options-NOTFOUND&quot; which will obviously result in an error.</p>\n<hr />\n<p>About case 2: <a href=\"https://stackoverflow.com/questions/15113138/target-pattern-contains-no-makefile\">Target pattern contains no &#39;%&#39;. Makefile</a> implies that it is a path problem with any of my paths. I have zero idea how to further debug the problem, as debugging cmake scripts seems to be not well supported. Info on this is hard to find on any search engine.</p>\n<p>The two versions of cmake scripts I used look like this:</p>\n<pre><code>cmake_minimum_required(VERSION 3.13)\nproject(probsim)\n\nset(CMAKE_CXX_STANDARD 17)\n\nFIND_PACKAGE(Boost COMPONENTS program_options REQUIRED )\n\nadd_executable(probsim main.cpp)\n\ntarget_link_libraries(probsim ${Boost_LIBRARIES})\n# alternative: target_link_libraries(probsim Boost::program_options)\n</code></pre>\n<p>Results are:</p>\n<pre><code>-- Boost version: 1.62.0\n-- Found the following Boost libraries:\n--   program_options\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/ketzu/CLionProjects/probsim/cmake-build-debug\n</code></pre>\n<hr />\n<p>Summary: Cmake creates an invalid makefile one way or another, the reason seems to be related to paths used on my filesystem.</p>\n"}, {"tags": ["c++", "regex", "string", "file", "search"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1554899367, "post_id": 55612544, "comment_id": 97919170, "body": "Note that what you&#39;re describing isn&#39;t regular expressions, it&#39;s <a href=\"https://en.wikipedia.org/wiki/Glob_(programming)\" rel=\"nofollow noreferrer\"><i>globbing</i></a>."}, {"owner": {"reputation": 147, "user_id": 9314483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185735ee8db2a425cc9ff72a69fbca49?s=128&d=identicon&r=PG&f=1", "display_name": "l.k", "link": "https://stackoverflow.com/users/9314483/l-k"}, "edited": false, "score": 0, "creation_date": 1554899701, "post_id": 55612544, "comment_id": 97919362, "body": "maybe have a look here: according to ripgrep, the answer to that question &#39;finite automata&#39;   <a href=\"https://github.com/BurntSushi/ripgrep\" rel=\"nofollow noreferrer\">github.com/BurntSushi/ripgrep</a>"}, {"owner": {"reputation": 11, "user_id": 11340065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ff093c212910132431a6867734eaec?s=128&d=identicon&r=PG&f=1", "display_name": "ace1eric", "link": "https://stackoverflow.com/users/11340065/ace1eric"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1554905036, "post_id": 55612544, "comment_id": 97922845, "body": "@Someprogrammerdude it&#39;s a more generalized form of regular expressions. whether you want to call it globbing or regex doesn&#39;t really matter. the program works as intended, it&#39;s just not fast enough. the regex expressions I&#39;m using are in the form of &quot;globs&quot; if that&#39;s what you want to call them."}, {"owner": {"reputation": 10100, "user_id": 619216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c07104de771c3b6f6c30be8f592ef8f7?s=128&d=identicon&r=PG", "display_name": "BurntSushi5", "link": "https://stackoverflow.com/users/619216/burntsushi5"}, "edited": false, "score": 0, "creation_date": 1554993504, "post_id": 55612544, "comment_id": 97961471, "body": "Consider using a faster regex engine, and one that can in particular match multiple regexes simultaneously. e.g., RE2: <a href=\"https://github.com/google/re2/blob/master/re2/set.h#L23\" rel=\"nofollow noreferrer\">github.com/google/re2/blob/master/re2/set.h#L23</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11340065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ff093c212910132431a6867734eaec?s=128&d=identicon&r=PG&f=1", "display_name": "ace1eric", "link": "https://stackoverflow.com/users/11340065/ace1eric"}, "edited": false, "score": 0, "creation_date": 1554912220, "post_id": 55615317, "comment_id": 97927115, "body": "Can you direct me to an example of using memory mapping? Everywhere I&#39;ve looked has basically told me to go with that to make the most efficient file reading code, but I don&#39;t understand how to implement it programmatically. I&#39;m VERY new to C++ so that&#39;s probably part of it, but still. I do not know how to use this method even with resources in front of me mostly because they don&#39;t explain anything."}], "tags": [], "owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "is_accepted": false, "score": 0, "last_activity_date": 1554907185, "creation_date": 1554907185, "answer_id": 55615317, "question_id": 55612544, "link": "https://stackoverflow.com/questions/55612544/how-to-speed-up-regex-searching-for-large-quantity-of-potentially-large-files-in/55615317#55615317", "title": "How to speed up regex searching for large quantity of potentially large files in C++?", "body": "<p>Some ideas by order of priority:</p>\n\n<ol>\n<li><p>You could join all the regex patterns together to form a single regex instead of matching <code>r</code> regexes on each line. This will speed up your program by a factor of <code>r</code>. Example: <code>(R1)|(R2)|(...)|(Rr)</code></p></li>\n<li><p>Ensure you are compiling the regex before usage.</p></li>\n<li>Do not add the final <code>.*</code> to your regex pattern.</li>\n</ol>\n\n<p>Some ideas but non-portable:</p>\n\n<ol>\n<li>Memory map the file instead of reading through iostreams</li>\n<li>Consider if it is worth reimplementing <code>grep</code> instead of calling to <code>grep</code> through <code>popen()</code></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 11340065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ff093c212910132431a6867734eaec?s=128&d=identicon&r=PG&f=1", "display_name": "ace1eric", "link": "https://stackoverflow.com/users/11340065/ace1eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554907185, "creation_date": 1554899197, "question_id": 55612544, "link": "https://stackoverflow.com/questions/55612544/how-to-speed-up-regex-searching-for-large-quantity-of-potentially-large-files-in", "title": "How to speed up regex searching for large quantity of potentially large files in C++?", "body": "<p>I'm trying to make a program to read user inputted wildcard files and wildcard strings using an excel document as a configuration file. For example the user may be able to enter in C:\\Read*.txt, and any files in the C drive that start with Read and then any characters after read and are text files will be included in the search. </p>\n\n<p>They could search for Message: * and all strings beginning with \"Message: \" and ending with any sequence of characters would get matched.</p>\n\n<p>So far it is a working program but the problem is that the speed efficiency is quite terrible and I need it to be able to search very large files. I'm using a filestream and the regex class to do so and I'm not sure what is taking so much time.</p>\n\n<p>The bulk of the time in my code is being spent in the following loop (I've only included the lines above the while loop so you can better understand what I'm trying to do):</p>\n\n<pre><code>smatch matches;\nvector&lt;regex&gt; expressions;\n\nfor (int i = 0; i &lt; regex_patterns.size(); i++){expressions.emplace_back(regex_patterns.at(i));}\n\nauto startTimer = high_resolution_clock::now();\n// Open file and begin reading\nifstream stream1(filePath);\nif (stream1.is_open())\n{\n    int count = 0;\n    while (getline(stream1, line))\n    {\n        // Continue to next step if line is empty, no point in searching it.\n        if (line.size() == 0)\n        {\n            // Continue to next step if line is empty, no point in searching it.\n            continue;\n        }\n\n        // Loop through each search string, if match, save line number and line text,\n        for (int i = 0; i &lt; expressions.size(); i++)\n        {\n            size_t found = regex_search(line, matches, expressions.at(i));\n            if (found == 1)\n            {\n                lineNumb.push_back(count);\n                lineTextToSave.push_back(line);\n            }\n        }\n        count = count + 1;\n    }\n}\nauto stopTimer = high_resolution_clock::now();\nauto duration2 = duration_cast&lt;milliseconds&gt;(stopTimer - startTimer);\ncout &lt;&lt; \"Time to search file: \" &lt;&lt; duration2.count() &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Is there a better method of searching files than this? I tried looking up many things but haven't found a programmatic example that I've understood thus far.</p>\n"}, {"tags": ["c++", "multithreading", "eigen", "tensor"], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 3296789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IdobE.png?s=128&g=1", "display_name": "PeteBlackerThe3rd", "link": "https://stackoverflow.com/users/3296789/peteblackerthe3rd"}, "edited": false, "score": 0, "creation_date": 1554905189, "post_id": 55614330, "comment_id": 97922941, "body": "I&#39;ll give it a got and let you know what happens."}, {"owner": {"reputation": 443, "user_id": 3296789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IdobE.png?s=128&g=1", "display_name": "PeteBlackerThe3rd", "link": "https://stackoverflow.com/users/3296789/peteblackerthe3rd"}, "edited": false, "score": 0, "creation_date": 1554906139, "post_id": 55614330, "comment_id": 97923499, "body": "That&#39;s fixed it. I guess the API has changed a bit since that documentation was written. Thanks for your help."}], "tags": [], "owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1554911773, "last_edit_date": 1554911773, "creation_date": 1554904346, "answer_id": 55614330, "question_id": 55612498, "link": "https://stackoverflow.com/questions/55612498/error-compiling-code-which-creates-eigenthreadpooldevice-object/55614330#55614330", "title": "Error compiling code which creates Eigen::ThreadPoolDevice object", "body": "<p>Looking at the error message and <code>ThreadPoolDevice(ThreadPoolInterface* pool, int num_cores) : pool_(pool), num_threads_(num_cores) { }</code> <a href=\"https://eigen.tuxfamily.org/dox/unsupported/TensorDeviceThreadPool_8h_source.html\" rel=\"nofollow noreferrer\">here, on line 107</a> I'm going to go out on a limb and suggest that you need to create and pass in the address of a <code>ThreadPool</code> to the constructor.  There is a <code>ThreadPool</code> typedef at the top of that source file.  </p>\n\n<p>DISCLAIMER -- I have not tested this.  This is based on examination of source code files.  <a href=\"https://github.com/rocmarchive/eigen-upstream/blob/master/unsupported/Eigen/CXX11/src/ThreadPool/NonBlockingThreadPool.h\" rel=\"nofollow noreferrer\">NonBlockingThreadPool.h</a></p>\n\n<pre><code>Eigen::ThreadPool pool(4/*number of threads*/);\nEigen::ThreadPoolDevice my_device(&amp;pool, 4 /* number of threads to use */);\n</code></pre>\n\n<p>I wonder if your example documentation is out of date, or just wrong...</p>\n"}], "owner": {"reputation": 443, "user_id": 3296789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IdobE.png?s=128&g=1", "display_name": "PeteBlackerThe3rd", "link": "https://stackoverflow.com/users/3296789/peteblackerthe3rd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 55614330, "answer_count": 1, "score": 1, "last_activity_date": 1554911773, "creation_date": 1554899042, "question_id": 55612498, "link": "https://stackoverflow.com/questions/55612498/error-compiling-code-which-creates-eigenthreadpooldevice-object", "title": "Error compiling code which creates Eigen::ThreadPoolDevice object", "body": "<p>Eigen Version 3.3.90</p>\n\n<p>gcc Version 5.4.0</p>\n\n<hr>\n\n<p>I'm currently trying to add multi-threading support to my Eigen Tensor project, and I've hit a problem creating the ThreadPoolDevice required to evaluate tensor operations.</p>\n\n<p>A minimal code example which produces the error is shown below. This is based upon the examples <a href=\"https://eigen.tuxfamily.org/dox/unsupported/eigen_tensors.html#title3\" rel=\"nofollow noreferrer\">shown here</a> in the Eigen Docs.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#define EIGEN_USE_THREADS\n#include &lt;unsupported/Eigen/CXX11/Tensor&gt;\n#include &lt;unsupported/Eigen/CXX11/ThreadPool&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"Eigen Version \" &lt;&lt; EIGEN_WORLD_VERSION &lt;&lt; \".\" &lt;&lt; EIGEN_MAJOR_VERSION &lt;&lt; \".\" &lt;&lt; EIGEN_MINOR_VERSION &lt;&lt; std::endl;\n\n    // Create the Eigen ThreadPoolDevice.\n    Eigen::ThreadPoolDevice my_device(4 /* number of threads to use */);\n\n    Eigen::Tensor&lt;float, 2&gt; a(40, 40);\n    Eigen::Tensor&lt;float, 2&gt; b(40, 40);\n\n    // Now just use the device when evaluating expressions.\n    Eigen::array&lt;Eigen::IndexPair&lt;int&gt;, 1&gt; product_dims = { Eigen::IndexPair&lt;int&gt;(1, 0) };\n    Eigen::Tensor&lt;float, 2&gt; c;\n    c.device(my_device) = a.contract(b, product_dims);\n\n    std::cout &lt;&lt; \"Result was \" &lt;&lt; c &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This produces the error message shown below:</p>\n\n<pre><code>thread_pool_tests.cpp: In function \u2018int main()\u2019:\nthread_pool_tests.cpp:12:68: error: no matching function for call to \u2018Eigen::ThreadPoolDevice::ThreadPoolDevice(int)\u2019\n  Eigen::ThreadPoolDevice my_device(4 /* number of threads to use */);\n                                                                    ^\nIn file included from /usr/local/include/unsupported/Eigen/CXX11/Tensor:103:0,\n                 from thread_pool_tests.cpp:4:\n/usr/local/include/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:55:3: note: candidate: Eigen::ThreadPoolDevice::ThreadPoolDevice(Eigen::ThreadPoolInterface*, int, Eigen::Allocator*)\n   ThreadPoolDevice(ThreadPoolInterface* pool, int num_cores, Allocator* allocator = NULL)\n   ^\n/usr/local/include/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:55:3: note:   candidate expects 3 arguments, 1 provided\n/usr/local/include/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:53:8: note: candidate: constexpr Eigen::ThreadPoolDevice::ThreadPoolDevice(const Eigen::ThreadPoolDevice&amp;)\n struct ThreadPoolDevice {\n        ^\n/usr/local/include/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:53:8: note:   no known conversion for argument 1 from \u2018int\u2019 to \u2018const Eigen::ThreadPoolDevice&amp;\u2019\n/usr/local/include/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:53:8: note: candidate: constexpr Eigen::ThreadPoolDevice::ThreadPoolDevice(Eigen::ThreadPoolDevice&amp;&amp;)\n/usr/local/include/unsupported/Eigen/CXX11/src/Tensor/TensorDeviceThreadPool.h:53:8: note:   no known conversion for argument 1 from \u2018int\u2019 to \u2018Eigen::ThreadPoolDevice&amp;&amp;\u2019\n</code></pre>\n\n<p>It appears that the ThreadPoolDevice constructor in this version is also expecting a pointer to an object derived from ThreadPoolInterface. But I cannot find any examples of this form. Does anyone know how I can solve this and start working with ThreadPoolDevices in my application.</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c++", "gsoap"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1554899045, "post_id": 55612472, "comment_id": 97918989, "body": "Does the same occur if you use another name for the macro? Say <code>MY_SUPER_UNIQUE_STRING_LEN</code>?"}, {"owner": {"reputation": 5079, "user_id": 572586, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/4837f7d94d6466b2e4a6d4af3551926a?s=128&d=identicon&r=PG", "display_name": "cprogrammer", "link": "https://stackoverflow.com/users/572586/cprogrammer"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1554899192, "post_id": 55612472, "comment_id": 97919071, "body": "Yes. The name of the macro is not the cause of the issue."}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1554900626, "post_id": 55612472, "comment_id": 97919944, "body": "Any reason to limit the char array?"}], "answers": [{"tags": [], "owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "is_accepted": false, "score": 0, "last_activity_date": 1554966946, "last_edit_date": 1554966946, "creation_date": 1554901516, "answer_id": 55613332, "question_id": 55612472, "link": "https://stackoverflow.com/questions/55612472/define-not-recognised-when-generating-gsoap-files-from-header/55613332#55613332", "title": "define not recognised when generating gSOAP files from header", "body": "<p>As this question is marked C++ and you are using soap<strong>cpp</strong>2: You probably shouldn't use defines, <code>typedef struct ...</code> and char-arrays for strings. This said and if there is no particular reason to limit the string length, rewriting your code to:</p>\n\n<pre><code>class test {\n    public:\n    std::string name;\n};\n\nint op1(test* a, int b, int * r );\n</code></pre>\n\n<p>Results in successfull compilation without any warnings.</p>\n"}], "owner": {"reputation": 5079, "user_id": 572586, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/4837f7d94d6466b2e4a6d4af3551926a?s=128&d=identicon&r=PG", "display_name": "cprogrammer", "link": "https://stackoverflow.com/users/572586/cprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554966946, "creation_date": 1554898969, "last_edit_date": 1554900538, "question_id": 55612472, "link": "https://stackoverflow.com/questions/55612472/define-not-recognised-when-generating-gsoap-files-from-header", "title": "define not recognised when generating gSOAP files from header", "body": "<p>I am trying to generate gsoap classes from a header file</p>\n\n<pre><code>soapcpp2.exe test.h\n</code></pre>\n\n<p>where test.h</p>\n\n<pre><code>// test.h\n\n#define MY_STRUCT_NAME_LEN 50\n\ntypedef struct MY_STRUCT_TYPE\n{\n    char name[MY_STRUCT_NAME_LEN];\n}MY_STRUCT;\n\nint op1(MY_STRUCT* a, int b, int * r );\n</code></pre>\n\n<p>my problem is that <code>#define MY_STRUCT_NAME_LEN 50</code> al line:3 is not recognised.</p>\n\n<pre><code>test.h(7): *WARNING*: undefined identifier 'MY_STRUCT_NAME_LEN'\n\n\ntest.h(7): *WARNING*: char[30681240620171331] will be serialized as an array of 30681240620171331 bytes: use soapcpp2 option -b to enable char[] string serialization or use char* for strings\n\n\n    test.h(7): **ERROR**: undetermined array size\n\n    Saving soapStub.h annotated copy of the source interface header file\n    Saving soapH.h serialization functions to #include in projects\n\n    test.h(12): *WARNING*: serializable typedef 'MY_STRUCT' is not namespace qualified: schema definition for 'MY_STRUCT' in WSDL file output may be invalid\n\n    Saving soap.nsmap namespace mapping table\n    Saving soapClient.cpp client call stub functions\n    Saving soapClientLib.cpp client stubs with serializers (use only for libs)\n    Saving soapServer.cpp server request dispatcher\n    Saving soapServerLib.cpp server request dispatcher with serializers (use only for libs)\n    Saving soapC.cpp serialization functions\n\n    There were errors:\n    1 semantic error\n    3 warnings\n</code></pre>\n\n<p>If I change line:7 to</p>\n\n<pre><code>char name[50];\n</code></pre>\n\n<p>it will work fine.</p>\n\n<p>I would really prefer to use macros for size of string (the real case is more complex). \nCan someone help on this ?</p>\n"}, {"tags": ["c++", "visual-studio", "class", "projects-and-solutions"], "comments": [{"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1554899404, "post_id": 55612394, "comment_id": 97919193, "body": "I don&#39;t really understand what you are asking. What are the projects? Are they both applications? To share data between seperate processes you need other means such as pipes or sockets. Or to just re-use existing code put it in a static (.lib) or dynamic (.dll) library project and reference that."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 1, "creation_date": 1554899526, "post_id": 55612394, "comment_id": 97919264, "body": "Also you will need to use <i>header files</i>, it doesn&#39;t look like you are in that code, so check out some learning resources on those. Then you use <code>#include &quot;class_in_other_project.h&quot;</code> to access it from a static or dynamic library, not sure what you are getting at by &quot;using Project1&quot;."}, {"owner": {"reputation": 23, "user_id": 6609954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb7a562cba257c66d23afce2a5eec30?s=128&d=identicon&r=PG&f=1", "display_name": "Garv Sharma", "link": "https://stackoverflow.com/users/6609954/garv-sharma"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1554955265, "post_id": 55612394, "comment_id": 97941363, "body": "@FireLancer yes, both projects are individual applications. And I want to share an image generated by Project1 with the Project2 so that it can process and then send back processed image to Project1. Right now, I am not combining both projects because in future there may be more projects of type Project2 using image from Project1. I will see if the DLL method works for me. I got the idea of Project References and the <code>using</code> statement from this <a href=\"https://stackoverflow.com/questions/3554658/how-to-use-a-class-from-one-c-sharp-project-with-another-c-sharp-project\">link</a>"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1554969113, "post_id": 55612394, "comment_id": 97946438, "body": "So the user will run both applications (exe) at the same time, with their own seperate windows etc., on the same computer? Or you have just one exe, &quot;Project2&quot;?"}, {"owner": {"reputation": 23, "user_id": 6609954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb7a562cba257c66d23afce2a5eec30?s=128&d=identicon&r=PG&f=1", "display_name": "Garv Sharma", "link": "https://stackoverflow.com/users/6609954/garv-sharma"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1555052099, "post_id": 55612394, "comment_id": 97981452, "body": "Yes, since they are in the same solutions, they are launched simultaneously and then start sharing data."}], "owner": {"reputation": 23, "user_id": 6609954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb7a562cba257c66d23afce2a5eec30?s=128&d=identicon&r=PG&f=1", "display_name": "Garv Sharma", "link": "https://stackoverflow.com/users/6609954/garv-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554898735, "creation_date": 1554898735, "question_id": 55612394, "link": "https://stackoverflow.com/questions/55612394/use-a-class-from-one-c-visual-studio-project-into-another", "title": "Use a class from one c++ Visual Studio project into another", "body": "<p>I have two projects in my solution: \n1. Project1, containing camera code which captures image frames\n2. Project2, which takes input image and does processing on it. I would like to share/provide the image generated in project1 to the project2. I am trying to use Project references to share data between projects.</p>\n\n<p>I created a class(with namespace) containing the required data members(to be shared) and member functions(populating the data members) in Project1. I am not able to use this class in Project2 despite adding Project Reference in Project2. </p>\n\n<pre><code>Project1:\nnamespace TheImagingSource\n{\n    class Images {\n    public: \n        UINT8 input_image1[IMAGE_SIZE];\n        UINT8 input_image2[IMAGE_SIZE];\n\n        void upload_image(Mat);\n    } TIS;\n\n    void Images::upload_image(Mat m)\n    {\n        memcpy(input_image1, m.data, IMAGE_SIZE);\n        memcpy(input_image2, m.data, IMAGE_SIZE);\n    }\n}\n</code></pre>\n\n<p>The 'using Project1' statement in Project2 gives error: identifier 'Project1' is undefined.</p>\n"}, {"tags": ["c++", "shared-libraries", "dlopen"], "comments": [{"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1554899742, "post_id": 55612364, "comment_id": 97919388, "body": "maybe your program has setuid or setgid? This prevents it from using <code>LD_LIBRARY_PATH</code>"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1554899858, "post_id": 55612364, "comment_id": 97919462, "body": "@bartop I have not intentionally set that - I am guessing I would know if I had done this? My makefile is fairly simple, I don&#39;t see any such option..."}, {"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1554900018, "post_id": 55612364, "comment_id": 97919567, "body": "for the sake of ruling out obvious problems - just check it with <code>ls -l</code> and maybe extend question with the info"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1554900895, "post_id": 55612364, "comment_id": 97920115, "body": "The man page of dlopen specifies where it searches."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1554901163, "post_id": 55612364, "comment_id": 97920277, "body": "What does <code>dlerror()</code> return?"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1554903966, "post_id": 55612364, "comment_id": 97922163, "body": "@yugr ...ummmm, sorry - its my crap code  ... I was checking if the file exists (in the same dir) before passing it to <code>dlopen()</code>. So I was not seeing me dlerror() output. I only noticed this when I went to look why as a result of your question and spotting my error. It works fine now... feel free to write your comment as an answer and I can mark it up - I will edit my question to reflect my foolishness :o - and then I wil close my question"}], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554904046, "creation_date": 1554898650, "last_edit_date": 1554904046, "question_id": 55612364, "link": "https://stackoverflow.com/questions/55612364/dlopen-finds-a-lib-in-the-same-directory-but-not-in-a-differnt-dir-even-with-l", "title": "dlopen() finds a lib in the same directory but not in a differnt dir even with LD_LIBRARY_PATH set", "body": "<p><strong>Update</strong></p>\n\n<p>I was being foolish - I had a check to see if the file existed (in the same folder) before passing it to <code>dlopen()</code>.. so the question is not valid, I will close it.</p>\n\n<p><strong>Original Question</strong></p>\n\n<p>For an exectuable that needs to link to a bunch of shared libraries in a different folder you can just do <code>export LD_LIBRARY_PATH=/some/other/folder</code> and then when you run your exectuable it can find them - and that is all working as expected for me.</p>\n\n<p>However one of my applications uses dlopen() to open a shared library at runtime (in a plug-in like way). I am using <code>dlopen(\"libsome_lilb.so\", RTLD_NOW)</code>.</p>\n\n<p>So, this works if the plugin shared lib is in the same folder, but not if its in some other folder. So then I set LD_LIBRARY_PATH and re-try, but it still fails to find the library.</p>\n\n<p>This is related to this question: <a href=\"https://stackoverflow.com/questions/17715774/c-linux-dlopen-cant-find-so-library\">c-linux-dlopen-cant-find-so-library</a></p>\n\n<p>But that OP seems to have a varaition of this issue where they are trying to open a .so in the same folder... so I can't see a solution there.</p>\n\n<p>Not quite sure what to tinker with now... maybe some of the options for <code>dlopen(\"name\", options);</code>? (that's a guess)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1554898440, "post_id": 55612242, "comment_id": 97918619, "body": "What&#39;s a &quot;huge value&quot;? You&#39;re probably running out of stack space."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1554898441, "post_id": 55612242, "comment_id": 97918620, "body": "To begin with, you don&#39;t initialize all elements of the arrays. If you ever use these uninitialized elements later, you will have <i>undefined behavior</i>. That in itself should not cause any crashes though, and to help you with that you need to provide us with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For example, what is the value of <code>size</code> when the program crashes?"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1554898749, "post_id": 55612242, "comment_id": 97918796, "body": "with <code>size = 550</code>, you will end up with 4,6MB of stack space for this 2 arrays. That is too much for some environments."}], "owner": {"reputation": 33, "user_id": 11340204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bb002c66cf5439e55c9b47061de934?s=128&d=identicon&r=PG&f=1", "display_name": "Togomi", "link": "https://stackoverflow.com/users/11340204/togomi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1554899390, "answer_count": 0, "score": 0, "last_activity_date": 1554898254, "creation_date": 1554898254, "question_id": 55612242, "link": "https://stackoverflow.com/questions/55612242/segmentation-falutcore-dumped-in-nested-for-loop", "closed_reason": "Duplicate", "title": "Segmentation falut(Core dumped) in nested for loop", "body": "<p>I want to initialized (size)x(size) array, so I wrote nested for loop codes.\nBut when I give huge value in 'size', there is an error: Segmentation(Core dumped). The program works well when size is smaller than around 550.\nWhat is the problem and how can I solve it?</p>\n\n<p>I already searched on google but there is not proper answers yet.</p>\n\n<pre><code>double l[size][size];\ndouble u[size][size];\n\nfor(i=2; i&lt;size; i++)\n  for(j=1; j&lt;i; j++)\n    u[i][j] = 0;\n\n\nfor(i=1; i&lt;size; i++){\n  l[i][i] = 1;\n  for(j=i+1; j&lt;size; j++)\n    l[i][j] = 0;\n</code></pre>\n\n<p>I just want this codes work well with no errors.</p>\n"}, {"tags": ["c++", "templates", "compilation"], "comments": [{"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 0, "creation_date": 1554898748, "post_id": 55612228, "comment_id": 97918793, "body": "If the purpose is to hide functions that are not &quot;exported&quot;, use an anonymous namespace. That&#39;ll allow the compiler to remove them should they be unused or inlined everywhere."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1554898795, "post_id": 55612228, "comment_id": 97918834, "body": "Are you actually worried about optimizing compile time? Or something else? If you&#39;re trying (prematurely) to optimize compile time, is it the time to build the library or the client code that you&#39;re worried about?"}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 3430623, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/10a35a4f863ed69c5b299420c473918f?s=128&d=identicon&r=PG&f=1", "display_name": "dexter", "link": "https://stackoverflow.com/users/3430623/dexter"}, "edited": false, "score": 0, "creation_date": 1555759765, "post_id": 55612422, "comment_id": 98218723, "body": "I basically agree. Also, it makes things unnecessarily bloated. Having said that, it&#39;s always possible to make explicit template instantiations, making the required functions available in the library. However, this defeats the purpose of using the templates in this particular case, since, as I understand it, not generating the code was one of the objectives."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 2, "last_activity_date": 1554899285, "last_edit_date": 1554899285, "creation_date": 1554898836, "answer_id": 55612422, "question_id": 55612228, "link": "https://stackoverflow.com/questions/55612228/is-it-beneficial-to-make-library-functions-templated-to-avoid-compiler-instructi/55612422#55612422", "title": "Is it beneficial to make library functions templated to avoid compiler instructions?", "body": "<p><strong>tl;dr</strong></p>\n\n<blockquote>\n  <p>Is it beneficial to make library functions templated to avoid compiler instructions?</p>\n</blockquote>\n\n<p>No. Emitting dead code isn't the expensive part of compiling. File access, parsing and optimization (not necessarily in that order) take time, and this idea forces library clients to read &amp; parse more code than in the regular header + library model.</p>\n\n<p>Templates are usually blamed for <em>slowing</em> builds, not speeding them up.</p>\n\n<hr>\n\n<p>It also means you can't build your library ahead of time, so each user needs to compile whichever parts they use from scratch, in every translation unit where they're used.</p>\n\n<p>The total time spent compiling will <em>probably</em> be greater with the templated version. You'd have to profile to be sure (and I suspect this <code>f</code> is so small as to be immeasurable either way) but I have a hard time seeing this as a useful improvement.</p>\n\n<p>Your comparison isn't representative anyway - a good compiler will discard dead code at link time. Some will also be able to inline code from static libraries, so there's no reliable effect on either compile-time or runtime performance.</p>\n"}], "owner": {"reputation": 420, "user_id": 6569689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb150b5f78aeda0371f727993367025?s=128&d=identicon&r=PG&f=1", "display_name": "Lourens Dijkstra", "link": "https://stackoverflow.com/users/6569689/lourens-dijkstra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 55612422, "answer_count": 1, "score": 2, "last_activity_date": 1554899285, "creation_date": 1554898179, "last_edit_date": 1554898784, "question_id": 55612228, "link": "https://stackoverflow.com/questions/55612228/is-it-beneficial-to-make-library-functions-templated-to-avoid-compiler-instructi", "title": "Is it beneficial to make library functions templated to avoid compiler instructions?", "body": "<p>Let's say I'm creating my own library in namespace <code>l</code>. Would it be beneficial to make as much as possible members of the namespace templated? This would encourage the compiler to only generate instructions for members that are actually called by the user of the library. To make my point clear, I'll demonstrate it here:</p>\n\n<p>1)</p>\n\n<pre><code>namespace l{\n    template &lt;typename = void&gt;\n    int f() { return 3; }\n}\n</code></pre>\n\n<p>vs.</p>\n\n<p>2)</p>\n\n<pre><code>namespace l{\n    int f() { return 3; }\n}\n</code></pre>\n\n<p>It is not being called in main to show the difference.</p>\n\n<pre><code>int main() { return EXIT_SUCCESS; }\n</code></pre>\n\n<p>function 1) does not require additional instructions for <code>l::f()</code>:  </p>\n\n<pre><code>main:\n    push    rbp\n    mov     rbp, rsp\n    mov     dword ptr [rbp - 4], 0\n    mov     eax, 0\n    pop     rbp\n    ret\n</code></pre>\n\n<p>function 2) does require additional instructions for <code>l::f()</code> ( If, again, <code>l::f()</code> is not called):</p>\n\n<pre><code>l::f()\n    push    rbp\n    mov     rbp, rsp\n    mov     eax, 3\n    pop     rbp\n    ret\nmain:                                  \n    push    rbp\n    mov     rbp, rsp\n    mov     dword ptr [rbp - 4], 0\n    mov     eax, 0\n    pop     rbp\n    ret\n</code></pre>\n"}, {"tags": ["c++", "windows", "visual-c++", "calling-convention"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2728022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540e7b84906bffd829ab7edfc0923135?s=128&d=identicon&r=PG", "display_name": "sbw", "link": "https://stackoverflow.com/users/2728022/sbw"}, "edited": false, "score": 0, "creation_date": 1554985181, "post_id": 55612318, "comment_id": 97955734, "body": "So it&#39;s impossible to pass arguments with only stack in x64 architecture?"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 35, "user_id": 2728022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540e7b84906bffd829ab7edfc0923135?s=128&d=identicon&r=PG", "display_name": "sbw", "link": "https://stackoverflow.com/users/2728022/sbw"}, "edited": false, "score": 0, "creation_date": 1554986686, "post_id": 55612318, "comment_id": 97956666, "body": "Well, if you write assembler, you can do what you like with the <code>call</code> instruction, its not a hardware limitation, but no, I don&#39;t believe you can make the compiler do it. The x64 ABI is very close, with the &quot;shadow store&quot;, but for performance reasons, it doesn&#39;t actually write the data to it, the intention being that the <i>called</i> function does the write/<code>mov</code> if need be."}], "tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": true, "score": 3, "last_activity_date": 1554899162, "last_edit_date": 1554899162, "creation_date": 1554898492, "answer_id": 55612318, "question_id": 55612188, "link": "https://stackoverflow.com/questions/55612188/cdecl-calling-convention-not-work-on-msvc-x64/55612318#55612318", "title": "__cdecl calling convention not work on msvc x64", "body": "<p>x64 has it's own calling conventions.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/cpp/cdecl?view=vs-2019\" rel=\"nofollow noreferrer\">Microsoft docs <code>__cdecl</code></a></p>\n\n<blockquote>\n  <p>On ARM and x64 processors, __cdecl is accepted but typically ignored by the compiler. By convention on ARM and x64, arguments are passed in registers when possible, and subsequent arguments are passed on the stack. In x64 code, use __cdecl to override the /Gv compiler option and use the default x64 calling convention.</p>\n</blockquote>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/build/x64-calling-convention?view=vs-2019\" rel=\"nofollow noreferrer\"><code>Microsoft docs x64 calling convention</code></a></p>\n\n<blockquote>\n  <p>The x64 Application Binary Interface (ABI) uses a four-register fast-call calling convention by default. Space is allocated on the call stack as a shadow store for callees to save those registers. There's a strict one-to-one correspondence between the arguments to a function call and the registers used for those arguments. Any argument that doesn\u2019t fit in 8 bytes, or isn't 1, 2, 4, or 8 bytes, must be passed by reference.</p>\n  \n  <p>...</p>\n  \n  <p>Integer arguments are passed in registers RCX, RDX, R8, and R9</p>\n</blockquote>\n\n<p>You can see it using ECX and EDX for the <code>int a</code> and <code>int b</code> (as they are 32bits, while the full RCX and RDX is 64bits).</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/cpp/stdcall?view=vs-2019\" rel=\"nofollow noreferrer\"><code>__stdcall</code></a>, <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/fastcall?view=vs-2019\" rel=\"nofollow noreferrer\"><code>__fastcall</code></a> and <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/thiscall?view=vs-2019\" rel=\"nofollow noreferrer\"><code>__thiscall</code></a> are also ignored. <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/vectorcall?view=vs-2019\" rel=\"nofollow noreferrer\"><code>__vectorcall</code></a> is available (the /Gv switch makes it default) and is another register calling convention, but compared to the x64 default it can use registers in more cases and has some other rule differences.</p>\n"}], "owner": {"reputation": 35, "user_id": 2728022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540e7b84906bffd829ab7edfc0923135?s=128&d=identicon&r=PG", "display_name": "sbw", "link": "https://stackoverflow.com/users/2728022/sbw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "accepted_answer_id": 55612318, "answer_count": 1, "score": 0, "last_activity_date": 1554899162, "creation_date": 1554898032, "question_id": 55612188, "link": "https://stackoverflow.com/questions/55612188/cdecl-calling-convention-not-work-on-msvc-x64", "title": "__cdecl calling convention not work on msvc x64", "body": "<p>Just a test for <code>__cdecl</code> calling convention.</p>\n\n<p>It's a cmake project and only have 1 source file:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\n#define CALL_CONVENTION __cdecl\n\nvoid CALL_CONVENTION f(int a, int b)\n{\n    printf(\"%d, %d\", a, b);\n}\n\nint main()\n{\n    f(1, 2);\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm using <code>set(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} /FA\")</code> to output the assembly code.</p>\n\n<p>and when I build with <code>cmake -G \"Visual Studio 15\"</code>, It's build a 32bit application, and every thing is in anticipation:</p>\n\n<pre><code>...\n; Line 12\n    push    ebp\n    mov ebp, esp\n; Line 13\n    push    2        ; &lt;------- argument 2\n    push    1        ; &lt;------- argument 1\n    call    _f       ; &lt;------- call function\n    add esp, 8\n; Line 15\n    xor eax, eax\n; Line 16\n    cmp ebp, esp\n    call    __RTC_CheckEsp\n    pop ebp\n    ret 0\n_main   ENDP\n...\n</code></pre>\n\n<p>You can see the arguments is passed by <code>push 2</code> and <code>push 1</code> instructions, it's <code>__cdecl</code> call convention.</p>\n\n<p>But if I'm using <code>cmake -G \"Visual Studio 15 Win64\"</code> to build a 64bit application, the <code>__cdecl</code> annotation seems not work (arguments not passed by stack):</p>\n\n<pre><code>...\n; Line 12\n$LN3:\n    push    rdi\n    sub rsp, 32                 ; 00000020H\n    mov rdi, rsp\n    mov ecx, 8\n    mov eax, -858993460             ; ccccccccH\n    rep stosd\n; Line 13\n    mov edx, 2        ; &lt;------ argument 2\n    mov ecx, 1        ; &lt;------ argument 1\n    call    f         ; &lt;------ call function\n; Line 15\n    xor eax, eax\n; Line 16\n    add rsp, 32                 ; 00000020H\n    pop rdi\n    ret 0\nmain    ENDP\n...\n</code></pre>\n\n<p>the arguments is passed by register <code>edx</code> and <code>ecx</code>, not passed by stack.</p>\n\n<p>So why arguments not passed by stack in x64 even if I specify <code>__cdecl</code> and what should I do if I want do same things in x64 environments.</p>\n"}, {"tags": ["c++", "logging", "glog"], "comments": [{"owner": {"reputation": 253, "user_id": 6130067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eeb56375d9f625d01a18313c9a076f1?s=128&d=identicon&r=PG&f=1", "display_name": "Badr El Hiouel", "link": "https://stackoverflow.com/users/6130067/badr-el-hiouel"}, "edited": false, "score": 0, "creation_date": 1554903824, "post_id": 55611914, "comment_id": 97922082, "body": "It seems that you do not link your program to glog. if you use cmake add this : target_link_libraries(${PROJECT_NAME} glog::glog)"}, {"owner": {"reputation": 55, "user_id": 11017315, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GVVPrYgMDnM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOchfVEue8qVMkqrPDG6CFSGVtDNw/mo/photo.jpg?sz=128", "display_name": "Ador Dastan", "link": "https://stackoverflow.com/users/11017315/ador-dastan"}, "reply_to_user": {"reputation": 253, "user_id": 6130067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eeb56375d9f625d01a18313c9a076f1?s=128&d=identicon&r=PG&f=1", "display_name": "Badr El Hiouel", "link": "https://stackoverflow.com/users/6130067/badr-el-hiouel"}, "edited": false, "score": 0, "creation_date": 1554985135, "post_id": 55611914, "comment_id": 97955709, "body": "I actually use GNU GCC, and I found out that adding <code>-lglog</code> solves the problem, but is there a way to permanently link?"}], "owner": {"reputation": 55, "user_id": 11017315, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GVVPrYgMDnM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOchfVEue8qVMkqrPDG6CFSGVtDNw/mo/photo.jpg?sz=128", "display_name": "Ador Dastan", "link": "https://stackoverflow.com/users/11017315/ador-dastan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1554897511, "answer_count": 0, "score": 0, "last_activity_date": 1554897180, "creation_date": 1554897180, "question_id": 55611914, "link": "https://stackoverflow.com/questions/55611914/undefined-reference-when-compiling-glog", "closed_reason": "Duplicate", "title": "undefined reference when compiling glog", "body": "<p>I'm trying to compile the following code:</p>\n\n<pre><code>#include &lt;glog/logging.h&gt;\n\nusing namespace std;\n\nint main(int argc, char **argv)\n{\n    google::InitGoogleLogging(argv[0]);\n    LOG(ERROR)&lt;&lt;\"ERROR\";\n}\n\n</code></pre>\n\n<p>but it gives an undefined reference error, as following:</p>\n\n<pre><code>undefined reference to `google::LogMessage::~LogMessage()'\nundefined reference to `google::LogMessage::~LogMessage()'\nundefined reference to `google::LogMessage::stream()'\nundefined reference to `google::LogMessage::LogMessage(char const*, int, int)'\nundefined reference to `google::InitGoogleLogging(char const*)'\n</code></pre>\n\n<p>I've looked for this error with no luck, though i think it's a linking problem, if it is how to link it? or it's something else?</p>\n"}, {"tags": ["c++", "vector", "insert", "constants", "lower-bound"], "comments": [{"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1554897945, "post_id": 55611624, "comment_id": 97918336, "body": "are you sure you want <code>string msg</code> to be <code>const</code>? It means that it can&#39;t be changed after initialization and that is what prevents you from inserting it."}, {"owner": {"reputation": 23, "user_id": 7085953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9807113d4557e56c0c0cae02060e597b?s=128&d=identicon&r=PG&f=1", "display_name": "Infinittty", "link": "https://stackoverflow.com/users/7085953/infinittty"}, "reply_to_user": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 0, "creation_date": 1554901707, "post_id": 55611624, "comment_id": 97920656, "body": "Thanks for all the answers, I understand the problem now. However, I cannot change <code>class Mail</code> including <code>const string msg</code>. I changed vector to vector of pointers  <code>vector&lt;CMail*&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1554897944, "last_edit_date": 1554897944, "creation_date": 1554897453, "answer_id": 55611997, "question_id": 55611624, "link": "https://stackoverflow.com/questions/55611624/inserting-objects-into-vector-using-lower-bound-with-compare-struct/55611997#55611997", "title": "Inserting objects into vector using lower_bound with compare struct", "body": "<p>The problems here pertain to the deleted copy assignment operator and the deleted move assignment operator because of the <code>const string msg;</code> member in the <code>Mail</code> class:</p>\n\n<blockquote>\n  <p><strong><a href=\"https://en.cppreference.com/w/cpp/language/copy_assignment\" rel=\"nofollow noreferrer\">Deleted implicitly-declared copy assignment operator</a></strong>  </p>\n  \n  <p>A defaulted copy assignment operator for class <code>T</code> <strong>is defined as deleted</strong> if any of the following is true:  </p>\n  \n  <ul>\n  <li><code>T</code> has a non-static data member of non-class type (or array thereof) that is <code>const</code>;</li>\n  </ul>\n  \n  <p><strong><a href=\"https://en.cppreference.com/w/cpp/language/move_assignment\" rel=\"nofollow noreferrer\">Deleted implicitly-declared move assignment operator</a></strong>  </p>\n  \n  <p>The implicitly-declared or defaulted move assignment operator for class <code>T</code> <strong>is defined as deleted</strong> if any of the following is true:</p>\n  \n  <ul>\n  <li>T has a non-static data member that is <code>const</code>;</li>\n  </ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "is_accepted": true, "score": 0, "last_activity_date": 1554900056, "last_edit_date": 1554900056, "creation_date": 1554898111, "answer_id": 55612206, "question_id": 55611624, "link": "https://stackoverflow.com/questions/55611624/inserting-objects-into-vector-using-lower-bound-with-compare-struct/55612206#55612206", "title": "Inserting objects into vector using lower_bound with compare struct", "body": "<p>The errors in C++ can sometimes be hard to diagnose. My tip is to always start at the top and resolve that one first. In this case, there's <a href=\"http://coliru.stacked-crooked.com/a/b242cb9276d4b31d\" rel=\"nofollow noreferrer\">a long list of them</a>, but they're all really about the same thing -- the assignment operator for <code>Mail</code> cannot be generated.</p>\n\n<p>Think of it this way, the compiler is being helpful and is trying to generate (and inside <code>lower_bound()</code>, use) this function:</p>\n\n<pre><code>Mail&amp; operator=( const&amp; Mail mail ) \n{ \n    msg = mail.msg; \n    return *this;\n}\n</code></pre>\n\n<p>But it can't because that assignment in the body is invalid due to <code>msg</code> being <code>const</code>. You can't really write it yourself either since you also can't assign to a <code>const</code> variable. </p>\n\n<p>Usually you don't need member variables to be <code>const</code> because they become <code>const</code> if the instance of the class is itself <code>const</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const auto mail1 = Mail{\"1\"};\nauto       mail2 = Mail{\"2\"};\n\nmail1.msg = \"3\"; // FAIL! msg is const since mail1 is const\nmail2.msg = \"4\"; // Ok! msg is not const\n</code></pre>\n\n<p>If you do need a <code>const</code> member, you can't use assignment operators with the class. Them's the breaks.</p>\n\n<p>Remove that <code>const</code> and all works:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nclass Mail {\n  public:\n    Mail(const string &amp; msg) : msg(msg) {}\n\n    string msg; //////////////////////////////// Not const!\n};\n\nstruct Compare {\n  bool operator()(const Mail &amp; mail, Mail const &amp; mail2) const {\n    return mail.msg &lt; mail2.msg;\n  }\n};\n\nint main() {\n  vector &lt;Mail&gt; mails;\n\n  Mail mail2(\"1\");\n  mails.push_back(mail2);\n\n  const string msg = \"2\";\n  Mail mail(msg);\n  auto low = lower_bound(mails.begin(), mails.end(), mail, Compare());\n\n  // mails.push_back(mail);   // OK\n  mails.insert(low, mail); // OK!\n\n  return 0;\n}\n</code></pre>\n\n<p>See it run live on <kbd><a href=\"http://coliru.stacked-crooked.com/a/5761df86c017b2a0\" rel=\"nofollow noreferrer\">Coliru</a></kbd>.</p>\n\n<p><strong>Footnotes</strong>:</p>\n\n<ul>\n<li>You could use a lambda for the comaparator to avoid some boilerplate around the class <code>Compare</code>:</li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const auto low = lower_bound( begin(mails), end(mails), mail, \n                              []( const auto&amp; mail1, const auto&amp; mail2 ) \n                              { return mail1.msg &lt; mail2.msg; } );\n</code></pre>\n\n<ul>\n<li>You can use <a href=\"https://en.cppreference.com/w/cpp/container/vector/emplace_back\" rel=\"nofollow noreferrer\"><code>vector::emplace_back()</code></a> to construct items in place, avoiding a copy. The following blocks do the same thing in effect, but the second is more efficient:</li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const auto mail = Mail{\"2\"};\nmails.push_back( mail2 ); // Copies\n\nmails.emplace_back(\"2\"); // Creates it right in the vector\n</code></pre>\n\n<ul>\n<li>Consider using <a href=\"https://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>vector::reserve()</code></a> if you know how many items you'll put in your vector.</li>\n</ul>\n"}], "owner": {"reputation": 23, "user_id": 7085953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9807113d4557e56c0c0cae02060e597b?s=128&d=identicon&r=PG&f=1", "display_name": "Infinittty", "link": "https://stackoverflow.com/users/7085953/infinittty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55612206, "answer_count": 2, "score": 2, "last_activity_date": 1554900056, "creation_date": 1554896322, "last_edit_date": 1554896928, "question_id": 55611624, "link": "https://stackoverflow.com/questions/55611624/inserting-objects-into-vector-using-lower-bound-with-compare-struct", "title": "Inserting objects into vector using lower_bound with compare struct", "body": "<p>I have this class:</p>\n\n<pre><code>class Mail {\n  public:\n    Mail(const string &amp; msg) : msg(msg) {}\n\n    const string msg;\n};\n</code></pre>\n\n<p>And this structure, which compares two Mail objects:</p>\n\n<pre><code>struct Compare {\n  bool operator()(const Mail &amp; mail, Mail const &amp; mail2) const {\n    return mail.msg &lt; mail2.msg;\n  }\n};\n</code></pre>\n\n<p>I want to have a vector with Mail objects sorted by their message <code>const string msg</code>. However, when I try to insert new object into vector using <a href=\"https://en.cppreference.com/w/cpp/algorithm/lower_bound\" rel=\"nofollow noreferrer\"><code>lower_bound</code></a>, I get many errors, including:</p>\n\n<blockquote>\n  <p>passing \u2018const string as \u2018this\u2019 argument discards qualifiers.</p>\n</blockquote>\n\n<pre><code>int main() {\n  vector &lt;Mail&gt; mails;\n\n  Mail mail2(\"1\");\n  mails.push_back(mail2);\n\n  const string msg = \"2\";\n  Mail mail(msg);\n  auto low = lower_bound(mails.begin(), mails.end(), mail, Compare());\n\n  // mails.push_back(mail);   // OK\n  mails.insert(low, mail); // passing \u2018const string as \u2018this\u2019 argument discards qualifiers\n\n  return 0;\n}\n</code></pre>\n\n<p>I dont yet understand <code>const</code> usage much and can't figure out, which <code>const</code> is wrong.<br>\nI am sorry, if this has already been asked, but I haven't found an answer to this problem yet.</p>\n"}, {"tags": ["c++", "multithreading", "exception", "throw"], "answers": [{"comments": [{"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1554896946, "post_id": 55611709, "comment_id": 97917715, "body": "hm.. now thinking about it, probably <code>thread.detach()</code> before throwing would do the trick as well.. but hm.. I don&#39;t like either of the solutions.."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1554897009, "post_id": 55611709, "comment_id": 97917744, "body": "btw. <code>it should work</code> - yeah, <code>catch</code> will fire, and THEN terminate the program on <code>return 0</code> when std::thread passes the outer scope :):)"}, {"owner": {"reputation": 309, "user_id": 1985409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ef777b688d9037fc35811311864315?s=128&d=identicon&r=PG", "display_name": "audi02", "link": "https://stackoverflow.com/users/1985409/audi02"}, "edited": false, "score": 0, "creation_date": 1554900173, "post_id": 55611709, "comment_id": 97919660, "body": "Thanks, that was right.  I changed it to std::async instead of std::thread"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 3, "last_activity_date": 1554897147, "last_edit_date": 1554897147, "creation_date": 1554896573, "answer_id": 55611709, "question_id": 55611414, "link": "https://stackoverflow.com/questions/55611414/cant-catch-exception-in-main-thread-when-other-thread-active-and-has-try-catch/55611709#55611709", "title": "can&#39;t catch exception in main thread when other thread active and has try-catch", "body": "<p>It's not so much that the exception isn't caught as it is that destroying a joinable thread terminates the process. \nSo your program terminates before the exception handler can be executed.</p>\n\n<p>If you declare the thread outside the try-catch block, the exception will be caught.<br>\nRemember that you also need to join the thread if the exception was thrown.  </p>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 1985409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ef777b688d9037fc35811311864315?s=128&d=identicon&r=PG", "display_name": "audi02", "link": "https://stackoverflow.com/users/1985409/audi02"}, "edited": false, "score": 0, "creation_date": 1554900180, "post_id": 55611711, "comment_id": 97919661, "body": "Thanks, that was right.  I changed it to std::async instead of std::thread"}], "tags": [], "owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "is_accepted": false, "score": 2, "last_activity_date": 1554896580, "creation_date": 1554896580, "answer_id": 55611711, "question_id": 55611414, "link": "https://stackoverflow.com/questions/55611414/cant-catch-exception-in-main-thread-when-other-thread-active-and-has-try-catch/55611711#55611711", "title": "can&#39;t catch exception in main thread when other thread active and has try-catch", "body": "<p>You've got something wrong. I mean, you've misunderstood something.</p>\n\n<p>It can't be about try-catch. 'throw' and 'try-catch' are intra-thread things, they live only on the current thread, whatever it would be at the moment of throwing, main thread or the other.</p>\n\n<p>Another thread cannot catch exception thrown from current thread. Exceptions does not cross threads, unless you really want it and implement it as, for example, something on current thread catches the exception and passed them to other thread and then re-throws/etc these exceptions there. You don't have any such things, so it cannot be it.</p>\n\n<p>You have a <code>join()</code> call after the throw, and you expect that <code>throw 1</code> will skip over it. That's true. However, there's also the <code>std::thread cThread</code> variable in the scope.</p>\n\n<p>Since the thread is running, and due to <code>throw 1</code> the thread has never been join()ed yet, then the <strong>expected</strong> thing to see would be <strong>program termination</strong> (see <a href=\"https://stackoverflow.com/a/13984169/717732\">https://stackoverflow.com/a/13984169/717732</a>), because the <strong>destructor</strong> of std::thread would detect the un-join()ed thread. That means, the <code>std::cout &lt;&lt; \"Catched exception \" &lt;&lt; e &lt;&lt; \" in main\";</code> should never be called. Even if the thread has somehow finished, your program should still terminate, since it does not change the fact it was not join()ed (see <a href=\"https://en.cppreference.com/w/cpp/thread/thread/joinable\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/thread/thread/joinable</a>)</p>\n\n<p>However, depending on library, compiler, debugger, etc, the effect you see may differ. For example, if you run it in a debugger, it may wait until all threads finish, and you'd get the effect of \"waiting until inner thread finished\". Hard to say.</p>\n\n<p>If you actually see the <code>\"Catched exception \" &lt;&lt; e &lt;&lt; \"</code> line running, the you've got a real problem. Either you are running something else than your current code, or your stdlib is broken. A broken stdlib might for example do a silent join() in the destructor of std::thread instead of terminating the program. Who knows. Broken lib can do many things.</p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 1985409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ef777b688d9037fc35811311864315?s=128&d=identicon&r=PG", "display_name": "audi02", "link": "https://stackoverflow.com/users/1985409/audi02"}, "is_accepted": false, "score": 0, "last_activity_date": 1554903008, "last_edit_date": 1554903008, "creation_date": 1554900518, "answer_id": 55612994, "question_id": 55611414, "link": "https://stackoverflow.com/questions/55611414/cant-catch-exception-in-main-thread-when-other-thread-active-and-has-try-catch/55612994#55612994", "title": "can&#39;t catch exception in main thread when other thread active and has try-catch", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/404970/molbdnilo\">molbdnilo</a> and <a href=\"https://stackoverflow.com/users/717732/quetzalcoatl\">quetzalcoatl</a>.\nI now made the code works by using std::async instead of std::thread: </p>\n\n<p>First, the problem is not related to try-catch in the thread. It was mine mistake to think it is. So here is a failure code:</p>\n\n<pre><code>int main()\n{\n  // try-catch of main thread\n  try\n  {\n     // run a thread\n     std::thread cThread([]()\n     {\n     });\n\n     // Any call to throw BEFORE thread join won't be catch.  \n     // HOW TO SOLVE IT??\n     throw 1;\n\n     // wait thread finished\n     cThread.join();\n\n     // IF YOU PUT THE \"throw 1\" HERE (AFTER THREAD FINISHED), IT WILL BE \n     // CATCH.\n   }\n   catch (int e)\n   {\n      std::cout &lt;&lt; \"Catched exception \" &lt;&lt; e &lt;&lt; \" in main\";\n   }\n\n   return 0;\n}\n</code></pre>\n\n<p>And a code that works:</p>\n\n<pre><code>int main()\n{\n  std::future&lt;void&gt; cF;\n\n  // try-catch of main thread\n  try\n  {\n     // run a thread\n     cF = std::async(std::launch::async, []()\n     {\n     });\n\n     // You can call throw , it will be catch :)  \n     throw 1;\n\n     // wait thread finished\n     if (cF.valid())\n     {\n        cF.get();\n     }\n   }\n   catch (int e)\n   {\n      std::cout &lt;&lt; \"Catched exception \" &lt;&lt; e &lt;&lt; \" in main\";\n   }\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 1985409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ef777b688d9037fc35811311864315?s=128&d=identicon&r=PG", "display_name": "audi02", "link": "https://stackoverflow.com/users/1985409/audi02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 1, "accepted_answer_id": 55611709, "answer_count": 3, "score": 1, "last_activity_date": 1554903008, "creation_date": 1554895610, "question_id": 55611414, "link": "https://stackoverflow.com/questions/55611414/cant-catch-exception-in-main-thread-when-other-thread-active-and-has-try-catch", "title": "can&#39;t catch exception in main thread when other thread active and has try-catch", "body": "<p>Main thread can't catch an exception (that was thrown in the main thread) while another thread with try-catch is still active. How to solve it?\nexample:</p>\n\n<pre><code>int main()\n{\n  // try-catch of main thread\n  try\n  {\n     // run a thread\n     std::thread cThread([]()\n     {\n        // try-catch of secondary thread\n        try\n        {\n           // makes thread works for 500 ms in order main thread will call\n           // throw while thread is still active.  \n           std::this_thread::sleep_for(std::chrono::milliseconds(500));\n        }\n        catch (...)\n        {\n        }\n     });\n\n     // Any call to throw BEFORE thread is finished, won't be catch.  \n     // HOW TO SOLVE IT??\n     throw 1;\n\n     // wait thread finished\n     cThread.join();\n\n     // IF YOU PUT THE \"throw 1\" HERE (AFTER THREAD FINISHED), IT WILL BE \n     // CATCH.\n   }\n   catch (int e)\n   {\n      std::cout &lt;&lt; \"Catched exception \" &lt;&lt; e &lt;&lt; \" in main\";\n   }\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1554895361, "post_id": 55611168, "comment_id": 97916778, "body": "You can use static code-analysis tools to guard against this kind of mistake, like clang-tidy."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1554895881, "post_id": 55611168, "comment_id": 97917081, "body": "After <code>register</code> was removed in C++17, a proposal came out to re-purpose it for prolonging the life of temporaries. I don&#39;t know what&#39;s the state of <a href=\"https://wg21.link/p0577\" rel=\"nofollow noreferrer\">p0577</a> today, but assuming the author keeps pursuing it, maybe there will be a better way in the future. Who knows."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1554899301, "post_id": 55611168, "comment_id": 97919129, "body": "<a href=\"http://kera.name/articles/2012/05/when-is-a-scoped-lock-not-a-scoped-lock/\" rel=\"nofollow noreferrer\">kera.name/articles/2012/05/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 0, "last_activity_date": 1554895166, "creation_date": 1554895166, "answer_id": 55611272, "question_id": 55611168, "link": "https://stackoverflow.com/questions/55611168/how-do-you-give-the-rvalue-generated-by-a-constructor-the-lifetime-of-an-lvalue/55611272#55611272", "title": "How do you give the rvalue generated by a constructor the lifetime of an lvalue?", "body": "<p>You have to do this. No other choice.</p>\n\n<p>A good example of this being indeed painful is NAG Automatic Differentiation DCO library, where you have to add lots of <code>const auto&amp;</code> to your code because they rely on the destruction order to create a graph (RAII, just like you rely on this).</p>\n\n<p>So would say, even use <code>const auto&amp; _</code> so that you ensure that <code>_</code> doesn't get changed if this is needed.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "is_accepted": false, "score": 2, "last_activity_date": 1554895492, "creation_date": 1554895492, "answer_id": 55611369, "question_id": 55611168, "link": "https://stackoverflow.com/questions/55611168/how-do-you-give-the-rvalue-generated-by-a-constructor-the-lifetime-of-an-lvalue/55611369#55611369", "title": "How do you give the rvalue generated by a constructor the lifetime of an lvalue?", "body": "<p>It's an unsolved problem for <code>std::lock_guard</code> as well, if you forget to give it a name, you get a bug.</p>\n\n<p>Some tricks in here: <a href=\"https://stackoverflow.com/questions/16189742/how-to-avoid-c-anonymous-objects\">How to avoid C++ anonymous objects</a></p>\n\n<p>A talk about this and other pitfalls linked here: <a href=\"https://stackoverflow.com/questions/51963131/different-behavior-when-stdlock-guardstdmutex-object-has-no-name\">Different behavior when `std::lock_guard&lt;std::mutex&gt;` object has no name</a></p>\n"}, {"tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1554895532, "creation_date": 1554895532, "answer_id": 55611384, "question_id": 55611168, "link": "https://stackoverflow.com/questions/55611168/how-do-you-give-the-rvalue-generated-by-a-constructor-the-lifetime-of-an-lvalue/55611384#55611384", "title": "How do you give the rvalue generated by a constructor the lifetime of an lvalue?", "body": "<p>Require the user to tell the <code>manipulate</code> ctor what code they want to run. So change it to take a callable as argument and call it:</p>\n\n<pre><code>manipulate(model, data, [&amp;model, &amp;args] {\n    model.get_info(args);\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1554897208, "post_id": 55611555, "comment_id": 97917860, "body": "@MatthieuBrucher there is no way to extend the lifetime of an rvalue beyond its full-expression without binding it to some variable. The way I understood the question is that OP was lamenting the fact that he cannot even use <code>[[nodiscard]]</code>, which the function approach presented above would allow. I edited the answer to make this more clear\u2026"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 1, "last_activity_date": 1554898350, "last_edit_date": 1554898350, "creation_date": 1554896121, "answer_id": 55611555, "question_id": 55611168, "link": "https://stackoverflow.com/questions/55611168/how-do-you-give-the-rvalue-generated-by-a-constructor-the-lifetime-of-an-lvalue/55611555#55611555", "title": "How do you give the rvalue generated by a constructor the lifetime of an lvalue?", "body": "<p>There is no way to extend the lifetime of an rvalue beyond the full-expression it appears in without binding it to some variable. So, unfortunately, you will have to <em>somehow</em> turn your rvalue into an lvalue, or move the actual work into a scope that does not outlive the rvalue.</p>\n\n<p>One way to achieve the latter is to use a callback as demonstrated in the other answers here.</p>\n\n<p>Alternatively, thanks to guaranteed copy elision, you could turn your <code>manipulate()</code> into a function instead of calling the constructor directly. This would at least allow you to take advantage of the <code>[[nodiscard]]</code> attribute, for example:</p>\n\n<pre><code>[[nodiscard]] manipulate begin_transaction(const Model&amp; model, const Data&amp; data)\n{\n    return { model, data };\n}\n\nwhile(model.condition)\n{\n    auto data = yield_data();\n    auto guard = begin_transaction(model, data);\n    model.get_info(args);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:&#39;%0A%0Astruct+manipulate%0A%7B%0A++++manipulate(int+a,+int+b)+%7B%7D%0A++++manipulate(const+manipulate%26)+%3D+delete%3B%0A++++manipulate(manipulate%26%26)+%3D+delete%3B%0A++++manipulate%26+operator+%3D(const+manipulate%26)+%3D+delete%3B%0A++++manipulate%26+operator+%3D(manipulate%26%26)+%3D+delete%3B%0A%7D%3B%0A%0A%5B%5Bnodiscard%5D%5D+manipulate+begin_transaction(int+a,+int+b)%0A%7B%0A++++return+%7B+a,+b+%7D%3B%0A%7D%0A%0Avoid+test()%0A%7B%0A++++auto+guard+%3D+begin_transaction(42,+23)%3B%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:clang_trunk,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),lang:c%2B%2B,libs:!(),options:&#39;-std%3Dc%2B%2B17+-O3&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+clang+(trunk)+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1,wrap:&#39;1&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+clang+(trunk)&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:50,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">try it out here</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11339939"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 55611555, "answer_count": 4, "score": 4, "last_activity_date": 1554898350, "creation_date": 1554894807, "last_edit_date": 1554894971, "question_id": 55611168, "link": "https://stackoverflow.com/questions/55611168/how-do-you-give-the-rvalue-generated-by-a-constructor-the-lifetime-of-an-lvalue", "title": "How do you give the rvalue generated by a constructor the lifetime of an lvalue?", "body": "<pre><code>while(model.condition) {\n    auto data = yield_data();\n    auto _= manipulate(model, data);\n    model.get_info(args);\n}\n</code></pre>\n\n<p>I have an RAII object of type <code>manipulate</code>, whose destructor undoes the mutation it causes when it falls out of scope, much like <code>std::lock_guard</code>. The problem is that the user has to type <code>auto _=</code> or the destructor will get called before <code>model.get_info()</code>; I don't like that the user has to type <code>auto _=</code>. Why would a user think to create an object that is never used?</p>\n\n<p>My first idea was to make the constructor <code>[[nodiscard]]</code>; but constructors have no return values. Is there a way to tell the compiler that manipulate rvalues should have lvalue lifetimes?</p>\n"}, {"tags": ["c++", "windows", "gcc", "cygwin", "ccache"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1554894116, "post_id": 55610898, "comment_id": 97916126, "body": "Visual Studio has also &quot;precompiled headers&quot; to do what you want.  Forget anything cygwin-related and generally, anything that tries to implement linux programming aspects in Windows."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1554976913, "post_id": 55610898, "comment_id": 97950996, "body": "I would like to walk you through setting this up because it&#39;s not hard.  But maybe you could add a little something more about what kind of &quot;C and C++ projects&quot; you want to build.  Do you mean just some generic Windows programs (in which case you&#39;re better off using Visual Studio)?  Or are you trying to compile Linux and/or POSIX-oriented code with their associated build tools?    What <i>specifically</i> are you trying to do."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1554977069, "post_id": 55610898, "comment_id": 97951094, "body": "As for Cygwin vs MingGW, these are two separately, mostly mutually incompatible things.  MinGW is a collection of common UNIX build and build-related tools compiled natively for Windows, so that it&#39;s easy to run gcc on Windows and some other things, but it does not provide a full POSIX emulation layer.  That&#39;s what Cygwin does.  Cygwin is providing a more &quot;complete&quot; UNIX-like experience on Windows with support for compiling and running <i>most</i> POSIX-compliant code with little to no modification.  If you want a full UNIX-like experience on a Windows desktop use that."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1554977283, "post_id": 55610898, "comment_id": 97951212, "body": "The reason <code>which gcc</code> returns something in <code>&#47;cygdrive&#47;c&#47;mingw</code> is that somehow or other you&#39;ve ended up (maybe via a <code>.bashrc</code> or a <code>.profile</code>)? with a configuration that&#39;s putting <code>C:\\MinGW</code> too early on your <code>$PATH</code>.  That, or you simply haven&#39;t installed Cygwin&#39;s gcc package."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 1, "creation_date": 1554977299, "post_id": 55610898, "comment_id": 97951224, "body": "The installation path of ccache&#39;s compiler wrappers like <code>&#47;usr&#47;lib&#47;ccache&#47;gcc </code> is not on your <code>$PATH</code> by default.  The usual thing to do for setting up ccache is then to manually create a symbolic link like <code>ln -s &#47;usr&#47;lib&#47;ccache&#47;gcc &#47;usr&#47;local&#47;bin&#47;gcc</code>.  <code>&#47;usr&#47;local&#47;bin</code> is usually before <code>&#47;usr&#47;bin</code> on <code>$PATH</code> so that will override your default <code>gcc</code>."}, {"owner": {"reputation": 223, "user_id": 10643316, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Bg4ZUYICyQU/AAAAAAAAAAI/AAAAAAAAAFo/XAJD1-IkY5w/photo.jpg?sz=128", "display_name": "Saturas", "link": "https://stackoverflow.com/users/10643316/saturas"}, "edited": false, "score": 0, "creation_date": 1554988791, "post_id": 55610898, "comment_id": 97958106, "body": "Actually i wont do anything with it. My task is just to set ccache up and write a &quot;how to&quot; so someone could use it in the future on a windows pc to compile his c/c++ projects. I managed to compile ccache now with cygwin. I used the commands, given in the INSTALL.md , inside cygwin-console while beeing in the downloaded Ccache folder i got from gitHub. <a href=\"https://github.com/ccache/ccache/blob/master/doc/INSTALL.md\" rel=\"nofollow noreferrer\">github.com/ccache/ccache/blob/master/doc/INSTALL.md</a> . I didnt check everything but if i am not wrong i can now use that generated ccache.exe to compile code using ccache."}, {"owner": {"reputation": 223, "user_id": 10643316, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Bg4ZUYICyQU/AAAAAAAAAAI/AAAAAAAAAFo/XAJD1-IkY5w/photo.jpg?sz=128", "display_name": "Saturas", "link": "https://stackoverflow.com/users/10643316/saturas"}, "edited": false, "score": 0, "creation_date": 1554989154, "post_id": 55610898, "comment_id": 97958385, "body": "I will keep this question updated about my progress. For now i managed to get the ccache.exe."}, {"owner": {"reputation": 606, "user_id": 4257143, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q195EKev0qQ/AAAAAAAAAAI/AAAAAAAAAxM/R2bEEt98Yrc/photo.jpg?sz=128", "display_name": "Doug Henderson", "link": "https://stackoverflow.com/users/4257143/doug-henderson"}, "edited": false, "score": 0, "creation_date": 1554994522, "post_id": 55610898, "comment_id": 97962226, "body": "Before you even look at ccache (again), you need to understand how to run the C and C++ compiler tool chains without it. I have never, in well over 10 years using cygwin, encountered a situation where I have felt a need to speed up C and C++ compilations. Try your biggest compilations, if they are in fact unreasonably slow, then look for solutions. Personally, I do not believe a learner should attempt to write a tutorial, it is just fumbling in the dark. BTW, &quot;which -a gcc&quot; will show you all &quot;gcc&quot; exes in the order they are found in the path."}, {"owner": {"reputation": 223, "user_id": 10643316, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Bg4ZUYICyQU/AAAAAAAAAAI/AAAAAAAAAFo/XAJD1-IkY5w/photo.jpg?sz=128", "display_name": "Saturas", "link": "https://stackoverflow.com/users/10643316/saturas"}, "edited": false, "score": 0, "creation_date": 1555055349, "post_id": 55610898, "comment_id": 97982918, "body": "As i said i wont compile in the near future ^^ its basicly a task given to me personally i only code in Java/C#/groovy maybe Typescript/Javascript but not C or C++ . Anyways with the ccache.exe i can now compile with the ccache flag. I cant tell if its alot faster because i dont have a big C/C++ project. And i really only needed cygwin (with the autoconf and gperf package) to compile ccache for the exe. But my task is done for now so thanks for all the comments."}], "owner": {"reputation": 223, "user_id": 10643316, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Bg4ZUYICyQU/AAAAAAAAAAI/AAAAAAAAAFo/XAJD1-IkY5w/photo.jpg?sz=128", "display_name": "Saturas", "link": "https://stackoverflow.com/users/10643316/saturas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1025, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1554893894, "creation_date": 1554893894, "question_id": 55610898, "link": "https://stackoverflow.com/questions/55610898/how-to-set-up-and-use-ccache-with-cygwin-on-windows", "title": "How to set up and use ccache (with cygwin) on windows?", "body": "<p>I am not able to set up Ccache on Windows using Cygwin.</p>\n\n<p>What do i want to do ?\nI want to install CCache on a Windows PC so i could use it to compile C and C++ projects.</p>\n\n<p>I have almost no Knowledge about C/C++ and the whole GCC/G++ Compiler thing.<br>\nmain sources for my approaches:<br>\n- <a href=\"https://wiki.archlinux.org/index.php/ccache\" rel=\"nofollow noreferrer\">https://wiki.archlinux.org/index.php/ccache</a><br>\n- <a href=\"http://charette.no-ip.com:81/programming/2016-02-07_CCache/index.html\" rel=\"nofollow noreferrer\">http://charette.no-ip.com:81/programming/2016-02-07_CCache/index.html</a><br>\n- <a href=\"https://askubuntu.com/questions/470545/how-do-i-set-up-ccache\">https://askubuntu.com/questions/470545/how-do-i-set-up-ccache</a></p>\n\n<p>Ccache is made for Unix-systems only so in order to get the bash commands i installed Cygwin for windows.<br>\nI have also installed MinGW32 on my C:/ drive.\nIn Cygwin I installed the following packages: (View: Picked)</p>\n\n<pre><code>- autoconfig                    13-1\n- ccache                        3.1.9-2\n- ccache-debuginfo              3.1.9-2\n- fish                          2.7.0-1\n- gcc-tools-epoch2-autoconf     2.64-2\n- gperf                         3.1-1\n- libgcc1                       7.4.0-1\n- make                          4.2.1-2\n- mingw64x86_64-gcc-core        7.4.0-1\n- mingw64x86_64-gcc-debuginfo   7.4.0-1\n- mingw64x86_64-gcc-g++         7.4.0-1\n</code></pre>\n\n<p>After the installation i can use \"ccache -V\" inside Cygwin and it tells me i got version 3.1.9</p>\n\n<p>according to the tutorials i am following i should get:</p>\n\n<pre><code>/usr/lib/ccache/gcc \n/usr/lib/ccache/g++\n</code></pre>\n\n<p>if i type the command: \"which gcc g++\".<br>\nBut i am getting as default the following:</p>\n\n<pre><code>/cygdrive/c/mingw/bin/gcc\n/cygdrive/c/mingw/bin/g++\n</code></pre>\n\n<p>So i wanted to change the path. \nBut the structure of ccache inside cygwin seems to be way different then   it is when you install it with sudo on a unix machine.<br>\nI cant find any gcc or g++ compilers inside ccache or at all in cygwin.<br>\nBut ccache is also not at usr/lib/ccache in cygwin. If i type in \"which   ccache\" it gives me the path usr/bin/ccache.  </p>\n\n<p>I am out of ideas and it seems like i just dont have enough knowledge about C compilers in general to get an idea of what to do / where to search.</p>\n"}, {"tags": ["c++", "opengl", "opengl-es", "stencil-buffer"], "owner": {"reputation": 11, "user_id": 11052010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccc01682fc1c66201e9ec2043bbdcc2?s=128&d=identicon&r=PG&f=1", "display_name": "evaee", "link": "https://stackoverflow.com/users/11052010/evaee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1554972629, "creation_date": 1554893866, "last_edit_date": 1554972629, "question_id": 55610885, "link": "https://stackoverflow.com/questions/55610885/the-stencil-buffer-doesn-t-draw-a-part-of-the-tiles", "title": "The stencil buffer doesn\u2019t draw a part of the tiles", "body": "<p>Well, I\u2019m trying to draw tiles into a stencil buffer, but while drawing obviously happens something that I don\u2019t understand and during the drawing disappearing (not drawn) part of the tiles.\nSo, how I draw:</p>\n\n<pre><code>// Enable blending.\nglEnable(GL_BLEND);\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n// Enable testing.\nglEnable(GL_STENCIL_TEST);\n\n// Disable depth test.\nglDisable(GL_DEPTH_TEST);\n\n// Set stencil buff to 0.\nglClearStencil(0);\nglClear(GL_STENCIL_BUFFER_BIT);\n\n// Here I got all visible tiles by a camera.\nauto const visible_tiles = camera.visible_tiles();\n\n// Draw tiles into a stencil.\nglStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);\nglStencilMask(0xFF);\n\n// Don't output the color.\nglColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);\n\n// ...\n\n// Here I had a loop where I go through each tile from all which was visible for the camera.\nauto tile_id = 1;\nvisible_tiles.for_each_tile([this, &amp;tile_id](auto const&amp; tile_position) {\n\n    // Output tile ID into stencil buffer. I assume there will never be more than\n    // 255 tiles.\n    glStencilFunc(GL_ALWAYS, tile_id, 0xFF);\n\n    mesh_-&gt;draw(); // &lt;&lt; Here I draw.\n\n    ++tile_id;\n});\n\n// Disable testing.\nglDisable(GL_STENCIL_TEST);\n</code></pre>\n\n<p>However, how my problem looks like?</p>\n\n<p><img src=\"https://i.stack.imgur.com/5f0iD.png\" alt=\"[\">]<a href=\"https://i.stack.imgur.com/5f0iD.png\" rel=\"nofollow noreferrer\">1</a></p>\n\n<p>If I disable stencil testing at all, everything is OK.\nAnd we draw it correctly.</p>\n\n<p><strong>UPD</strong>: With the help of the debug, I managed to narrow the circle of suspects )))\nAnd I realized that the problem was somewhere in glEnable(GL_STENCIL_TEST), namely when I repeatedly call my method \u201cdraw(\u2026)\u201d.\nSo, I just did the following:</p>\n\n<pre><code>static bool flag = false;\nif (!flag) {\n    glEnable(GL_STENCIL_TEST);\n    flag = true;\n}\n</code></pre>\n\n<p>So, now I call glEnable(GL_STENCIL_TEST) only once, at first call of draw, and didn\u2019t call glDisable(GL_STENCIL_TEST);\nAnd it looks as if everything works correctly, at least now I didn\u2019t see any defects.\nBut why this works?</p>\n"}, {"tags": ["c++", "std-filesystem"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1554893687, "post_id": 55610499, "comment_id": 97915898, "body": "Even if the user gives you such a path you should have no problems because the security should be per user and checked by the OS.  If the user intentionally gives you such a path and has write access to that file, they could do it anyway without your app."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1554894256, "post_id": 55610499, "comment_id": 97916193, "body": "@MichaelChourdakis I am not sure if I understand this correctly. Just to clarify, the user gives me a relative path, which is a relative path to my system (server application) and he is reading files not on his system but on the servers system. And he should not be allowed to read files outside of the public folder."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554894559, "post_id": 55610499, "comment_id": 97916339, "body": "for a server application, you should not allow the user to refer to a local file anyway. Why do you want to get such input from the user?"}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554894944, "post_id": 55610499, "comment_id": 97916552, "body": "@MichaelChourdakis E.g. if you want to manage user uploaded files you would have to give them (download) access to these uploaded files. I dont know how to manage a server application different, considering that a simple http GET request is requesting a certain local file no?"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1554895008, "post_id": 55610499, "comment_id": 97916583, "body": "You should implement it using a database. This database will store a primary key ID of the user&#39;s upload, and a user-specified filename which will be only there for display purposes. When you present the list to the user to download, you will present the filenames he has specified, but use the ID to read the data from your database, not by using the filename."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554895533, "post_id": 55610499, "comment_id": 97916883, "body": "@MichaelChourdakis I have this mapping for user files. Tough Idk why I didn&#39;t just do the same for this public folder. Probably I should just do the same. But on the other side I would avoid some sql calls if I just check if the files exist and then return them. Thank you for noting this. This is gonna be at least an alternative."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554895604, "post_id": 55610499, "comment_id": 97916933, "body": "No, using SQL is way more preferable otherwise you risk security issues too severe for a web app. Besides, the user might input a filename incompatible with your filesystems"}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1554895686, "post_id": 55610499, "comment_id": 97916981, "body": "@MichaelChourdakis But that is actually the question here. So if <code>std::filesystem::canonical</code> would prevent these security issues."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554914328, "post_id": 55610499, "comment_id": 97928201, "body": "@MichaelChourdakis I am sry for being annoying, can you give me some reference which confirms that database lookups are always the way to go, even if the nature of the problem is a real folder?"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554919154, "post_id": 55610499, "comment_id": 97930587, "body": "When designing a server program, you want as much abstraction as possible. The users should never be able to access real files on the disk directly. Take for example google drive, its an ID that you use to access a file, not the file&#39;s name, let alone the physical location of the dat.  There are various references, for example <a href=\"https://carstenwindler.de/php/filesystem-abstraction-in-php-and-why-it-sometimes-is-useful/\" rel=\"nofollow noreferrer\">this</a> but ultimately you should do like all other applications do."}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554921286, "post_id": 55610499, "comment_id": 97931592, "body": "Thank you very much. Thank you for your time!"}], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 0, "creation_date": 1554897061, "post_id": 55611385, "comment_id": 97917781, "body": "Thank you for the answer. By removing these redundant elements. Does the resulting path guarantee that it is not harmful against these attacks(not just dot dot attack, I am no expert in filepath injection, but i think there is many more like slash slash and others). So e.g. if i have a relative path, apply realpath or canonical, does the resulting path guarantee that there is no director traversal? So is the file guaranteed to be in all subdirectories separated by slash in the resulting path."}, {"owner": {"reputation": 902, "user_id": 1345339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i5mFB.jpg?s=128&g=1", "display_name": "A. H.", "link": "https://stackoverflow.com/users/1345339/a-h"}, "reply_to_user": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 0, "creation_date": 1554898383, "post_id": 55611385, "comment_id": 97918580, "body": "If you apply canonical first, the double dots get converted to the directory names and the dots get removed all together. It depends on the operation you are performing and what path names you allow such as white spaces which require quotes. I am pretty sure you can find something that does with some googlin"}, {"owner": {"reputation": 902, "user_id": 1345339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i5mFB.jpg?s=128&g=1", "display_name": "A. H.", "link": "https://stackoverflow.com/users/1345339/a-h"}, "reply_to_user": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 0, "creation_date": 1554908232, "post_id": 55611385, "comment_id": 97924775, "body": "@czorp look into the <a href=\"http://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow noreferrer\">execve</a> family of functions, they do not use a shell and thus escaping doesn&#39;t matter, as if you just call main directly"}, {"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 0, "creation_date": 1554909847, "post_id": 55611385, "comment_id": 97925780, "body": "Thanks, I&#39;ll have a look at them :D"}, {"owner": {"reputation": 902, "user_id": 1345339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i5mFB.jpg?s=128&g=1", "display_name": "A. H.", "link": "https://stackoverflow.com/users/1345339/a-h"}, "reply_to_user": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 0, "creation_date": 1554916095, "post_id": 55611385, "comment_id": 97929106, "body": "@czorp well if this entry answers your question and you are satisfied by the information you gained, perhaps you might want to select an answer"}], "tags": [], "owner": {"reputation": 902, "user_id": 1345339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i5mFB.jpg?s=128&g=1", "display_name": "A. H.", "link": "https://stackoverflow.com/users/1345339/a-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1554895533, "last_edit_date": 1592644375, "creation_date": 1554895533, "answer_id": 55611385, "question_id": 55610499, "link": "https://stackoverflow.com/questions/55610499/can-filesystemcanonical-be-used-to-prevent-filepath-injection-for-filepaths-pa/55611385#55611385", "title": "Can filesystem::canonical be used to prevent filepath injection for filepaths passed to fstream", "body": "<p>Short answer no.</p>\n<p>Long answer this is modeled after posix <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/realpath.html\" rel=\"nofollow noreferrer\">realpath</a></p>\n<p>I understand the source of confusion. From realpath</p>\n<blockquote>\n<p>The realpath() function shall derive, from the pathname pointed to by file_name, an absolute pathname that resolves to the same directory entry, whose resolution does not involve '.', '..</p>\n</blockquote>\n<p>From <a href=\"https://en.cppreference.com/w/cpp/filesystem/path\" rel=\"nofollow noreferrer\">cppref path</a> you can also see that the double dot is removed. However the path still points to the same file. It's just that redundant elements are removed.</p>\n<p>If you are processing values from a db/webapp/whatever where your program has different privileges than the user who supplied the path, you need to sanitize the filename first by escaping double dots. Dots are fine.</p>\n<p>Perhaps you can use a regex to escape double dots with a backslash thus rendering them ineffective.</p>\n<pre><code>#include &lt;iostream&gt; \n#include &lt;filesystem&gt;\n#include &lt;string&gt;\n#include &lt;regex&gt;\n\n\n\n\nint main() \n{ \n    \n     std::string bad = &quot;../bad/../other&quot;;\n    std::filesystem::path p(bad);\n    \n    \n    std::cout &lt;&lt; std::filesystem::weakly_canonical(p) &lt;&lt; std::endl;\n    \n   \n    std::regex r(R&quot;(\\.\\.)&quot;);\n    p = std::regex_replace(bad, r, &quot;\\\\.\\\\.&quot;);\n    std::cout &lt;&lt; std::filesystem::weakly_canonical(p) &lt;&lt; std::endl;\n    \n}\n</code></pre>\n<p>Output</p>\n<blockquote>\n<p>&quot;/tmp/other&quot;</p>\n<p>&quot;/tmp/1554895428.8689194/\\.\\./bad/\\.\\./other&quot;</p>\n</blockquote>\n<p><a href=\"https://coliru.stacked-crooked.com/a/72d2101da66097ea\" rel=\"nofollow noreferrer\">Run sample</a></p>\n"}, {"tags": [], "owner": {"reputation": 2587, "user_id": 404861, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d2831ff629e115077cd3a39383688918?s=128&d=identicon&r=PG", "display_name": "Yuval", "link": "https://stackoverflow.com/users/404861/yuval"}, "is_accepted": false, "score": 0, "last_activity_date": 1599783107, "creation_date": 1599783107, "answer_id": 63839175, "question_id": 55610499, "link": "https://stackoverflow.com/questions/55610499/can-filesystemcanonical-be-used-to-prevent-filepath-injection-for-filepaths-pa/63839175#63839175", "title": "Can filesystem::canonical be used to prevent filepath injection for filepaths passed to fstream", "body": "<p>I can see how you could employ <code>weakly_canonical()</code> to prevent path traversal - similar to what is described <a href=\"https://portswigger.net/web-security/file-path-traversal\" rel=\"nofollow noreferrer\">here</a> - by checking that the result is prefixed with your base path. E.g.</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;filesystem&gt;\n#include &lt;optional&gt;\n\n// Returns the canonical form of basepath/relpath if the canonical form\n// is under basepath, otherwise returns std::nullopt.\n// Note that one would probably require that basepath is sanitized, \n// safe for use in this context and absolute.\n// Thanks to https://portswigger.net/web-security/file-path-traversal \n// for the basic idea.\nstd::optional&lt;std::filesystem::path&gt; abspath_no_traversal(\n        const std::filesystem::path &amp; basepath,\n        const std::filesystem::path &amp; relpath) {\n\n    const auto abspath = std::filesystem::weakly_canonical(basepath / relpath);\n\n    // thanks to https://stackoverflow.com/questions/1878001/how-do-i-check-if-a-c-stdstring-starts-with-a-certain-string-and-convert-a\n    const auto index = abspath.string().rfind(basepath.string(), 0);\n    if (index != 0) {\n        return std::nullopt;\n    }\n    return abspath;\n}\n</code></pre>\n<p>Since I am no security expert, I welcome any corrections.</p>\n"}], "owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1599783107, "creation_date": 1554892812, "question_id": 55610499, "link": "https://stackoverflow.com/questions/55610499/can-filesystemcanonical-be-used-to-prevent-filepath-injection-for-filepaths-pa", "title": "Can filesystem::canonical be used to prevent filepath injection for filepaths passed to fstream", "body": "<p>I have a public folder <code>pub</code> with subfolders and files in it. A user gives me now a relative filepath, I perform some mappings, and I read the file with <code>fstream</code> and return it to the user.</p>\n\n<p>The problem is now if the user gives me a path like e.g. <code>../fileXY.txt</code> or some other fancy stuff considering path traversal or other types of filepath injection. <code>fstream</code> is just gonna accept it and read potential files outside of my public <code>pub</code> folder or even worse give them a list of all files on my system etc... .</p>\n\n<p>Before reinventing the wheel, I searched in the filesystem library\nand I have seen there is this <a href=\"https://en.cppreference.com/w/cpp/filesystem/canonical\" rel=\"noreferrer\">std::filesystem::canonical</a> function and there is quite a talk about the normal form. I have a general question here, can this function and the variant <a href=\"https://en.cppreference.com/w/cpp/filesystem/canonical\" rel=\"noreferrer\">std::filesystem::weakly_canonical</a> be used to prevent this types of vulnerabilities? So basically is it enough?</p>\n\n<p>Further, my system's filesystem library is still in experimental mode and the <code>std::filesystem::weakly_canonical</code> is missing. But I cannot use the <code>canonical</code> because the files must exist in <code>canonical</code>. In my case I have certain mappings and the files dont exist in that sense. So I would need to mimic the <code>weakly_canonical</code> function, but how?</p>\n\n<p>I have seen a related stackoverflow question on <a href=\"https://stackoverflow.com/questions/11034002/how-to-get-absolute-path-of-file-or-directory-that-does-not-exist\">realpath for nonexisting paths</a> and he was suggested to repeat the canonical as long as the path exist and then to add the nonexisting part to it, but that is again vulnerable to these type of injections. So do I have to roll my own <code>weakly_canonical</code> or can I somehow mimic it by combining some <code>std::experimental::filesystem</code> functions?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 6, "creation_date": 1554891631, "post_id": 55610095, "comment_id": 97914732, "body": "You really shouldn&#39;t be using <code>&lt;string.h&gt;</code> in C++... For C++ strings, it&#39;s <code>&lt;string&gt;</code> and for functions that work with C style ones, <code>&lt;cstring&gt;</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1554891681, "post_id": 55610095, "comment_id": 97914764, "body": "it is not completely clear what you are taking about. Is it <code>std::string</code> ? In general you need to include what you use. If some header includes a second header and you do include the first then it is not necessary to also include the second, but sometimes you should... Can you show some code?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1554893786, "post_id": 55610095, "comment_id": 97915952, "body": "If your cpp file <code>#include</code>s a header file, it will implicitly <code>#include</code> any headers <code>#include</code>d by that header file.    That&#39;s how the preprocessor generally works.  (It is possible to prevent that happening, for example, by the header using conditional inclusion, but - unless you have deliberately done that - it won&#39;t affect you.  Such things don&#39;t happen by default)."}], "answers": [{"tags": [], "owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "is_accepted": false, "score": 1, "last_activity_date": 1554891646, "creation_date": 1554891646, "answer_id": 55610137, "question_id": 55610095, "link": "https://stackoverflow.com/questions/55610095/should-i-also-include-string-h-even-it-exists-in-header-file/55610137#55610137", "title": "Should I also include string.h even it exists in header file?", "body": "<p>No, if the cpp file includes your header file, then you do not need to include it again. Still, if you do, this should not cause any harm, because of the <a href=\"https://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow noreferrer\">Include guard</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1554898960, "last_edit_date": 1554898960, "creation_date": 1554894585, "answer_id": 55611098, "question_id": 55610095, "link": "https://stackoverflow.com/questions/55610095/should-i-also-include-string-h-even-it-exists-in-header-file/55611098#55611098", "title": "Should I also include string.h even it exists in header file?", "body": "<p>If you use a declaration or a definition from a header, then you must include that header. Including a header does transitively include all headers included by that header.</p>\n\n<p>You must never rely on transitive inclusion from a header that is not controlled by yourself (i.e. standard headers or library headers) because those inclusions can change across versions. It is a bad design to rely on transitive inclusions of your own headers as well unless properly documented, as such reliance creates invisible dependencies.</p>\n\n<hr>\n\n<p>PS. <code>&lt;string.h&gt;</code> is deprecated in favour of <code>&lt;cstring&gt;</code> header.</p>\n\n<p>PPS. <code>&lt;string.h&gt;</code> does not define <code>std::string</code>. That is in the header <code>&lt;string&gt;</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 11339663, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TV_7J2-itxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc32BcvAfmH-mIkcSniIC2CE9Gs6Q/mo/photo.jpg?sz=128", "display_name": "CPP123", "link": "https://stackoverflow.com/users/11339663/cpp123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1554898960, "creation_date": 1554891485, "question_id": 55610095, "link": "https://stackoverflow.com/questions/55610095/should-i-also-include-string-h-even-it-exists-in-header-file", "title": "Should I also include string.h even it exists in header file?", "body": "<p>I'm having trouble understanding the process of making class in cpp.</p>\n\n<p>If I included string in header file, do I also have to include the same header file in the cpp file, which implements header file? </p>\n"}, {"tags": ["c++", "http", "boost", "boost-asio", "boost-beast"], "answers": [{"comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1554934912, "post_id": 55622001, "comment_id": 97937200, "body": "IIUYC, the only change it would do is replace <code>buf</code> with a <code>string</code>. But then this isn&#39;t where I&#39;m having trouble. I&#39;m having trouble after the serializer. Instead of having the serializer be written to a socket (as shown in the example I copied from http_relay), I&#39;d like it to go to a string/view. You mentioned chunking before and it&#39;s a legitimate concern. Especially that, in all my attempts to convert anything to a string, I&#39;m having repeated parts of the data. Can you please write a little snippet of code that replaces <code>write(output, sr, ec);</code> to something that&#39;ll convert <code>sr</code> to a string?"}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1554992460, "post_id": 55622001, "comment_id": 97960732, "body": "You want to convert the HTTP message into a string? Use <code>operator&lt;&lt;</code> to <code>std::stringstream</code>."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1555005694, "post_id": 55622001, "comment_id": 97968222, "body": "Thanks, Vinnie. I think I understand how it works now. I don&#39;t need a serializer. I misunderstood the documentation. The serializer is not necessary because I don&#39;t want to submit to a socket. I just needed the parser. Once I used a <code>string_body</code> in the parser template parameter, everything became easy and everything worked fine. The only problem left is that since it&#39;s chunked and the steam never ends, the parser content just keeps growing indefinitely. Is there a way to clear/consume its string content? (other than recreating the connection)"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1555011007, "post_id": 55622001, "comment_id": 97970501, "body": "The only clear function I found is for individual body objects, not everything in the parser. An issue is that for some reason, in <code>body()</code>, all terminators <code>\\r\\n</code> were non-existent. I was able to circumvent this problem by using the <code>payload_size()</code>, where I read a body, parse it with json if parsable, and then clear the body() string. No idea why terminators are disappearing. I can live with that as long as messages/read callbacks will not be combined, otherwise that will sabotage json parsing. If I&#39;m doing any of this incorrectly, please let me know. Best."}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1555022689, "post_id": 55622001, "comment_id": 97974557, "body": "You won&#39;t see the chunked encoding delimiters because Beast&#39;s parser removes them before appending the data to the string. As I said already, use <code>buffer_body</code> if you want to parse a never-ending response incrementally."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1555055544, "post_id": 55622001, "comment_id": 97983000, "body": "I will do that next. I have a working starting point now where I can optimize things to the fullest and know what to expect. Thanks again and have a nice day :-)"}], "tags": [], "owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "is_accepted": true, "score": 0, "last_activity_date": 1554934226, "creation_date": 1554934226, "answer_id": 55622001, "question_id": 55610026, "link": "https://stackoverflow.com/questions/55610026/how-can-i-convert-serialized-data-in-boostbeast-to-a-string-so-that-i-could-pr/55622001#55622001", "title": "How can I convert serialized data in boost::beast to a string so that I could process it in a FIFO manner?", "body": "<p>Where is <code>buf</code>? You could read directly into the <code>std::string</code> instead. Call <code>string.resize(N)</code>, and set the pointer and size in the <code>buffer_body::value_type</code> to <code>string.data()</code> and <code>string.size()</code>.</p>\n"}], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 55622001, "answer_count": 1, "score": 1, "last_activity_date": 1554934226, "creation_date": 1554891281, "last_edit_date": 1554901439, "question_id": 55610026, "link": "https://stackoverflow.com/questions/55610026/how-can-i-convert-serialized-data-in-boostbeast-to-a-string-so-that-i-could-pr", "title": "How can I convert serialized data in boost::beast to a string so that I could process it in a FIFO manner?", "body": "<p>I have an application of a client where I need to receive http \"long running requests\" from a server. I send a command, and after getting the header of the response, I have to just receive json data separated by <code>\\r\\n</code> until the connection is terminated.</p>\n\n<p>I managed to adapt <a href=\"https://www.boost.org/doc/libs/1_66_0/libs/beast/example/http/client/async/http_client_async.cpp\" rel=\"nofollow noreferrer\">boost beast client example</a> to send the message and receive the header and parse it and receive responses from the server. However, I failed at finding a way to serialize the data so that I could process the json messages.</p>\n\n<p>The closest demonstration of the problem can be found in <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/beast/doc/html/beast/more_examples/http_relay.html\" rel=\"nofollow noreferrer\">this relay example</a>. In that example (<code>p</code> is a parser, <code>sr</code> is a serializer, <code>input</code> is a socket input stream and <code>output</code> is an socket output stream), after reading the http header, we have a loop that reads continuously from the server:</p>\n\n<pre><code>do\n{\n    if(! p.is_done())\n    {\n        // Set up the body for writing into our small buffer\n        p.get().body().data = buf;\n        p.get().body().size = sizeof(buf);\n\n        // Read as much as we can\n        read(input, buffer, p, ec);\n\n        // This error is returned when buffer_body uses up the buffer\n        if(ec == error::need_buffer)\n            ec = {};\n        if(ec)\n            return;\n\n        // Set up the body for reading.\n        // This is how much was parsed:\n        p.get().body().size = sizeof(buf) - p.get().body().size;\n        p.get().body().data = buf;\n        p.get().body().more = ! p.is_done();\n    }\n    else\n    {\n        p.get().body().data = nullptr;\n        p.get().body().size = 0;\n    }\n\n    // Write everything in the buffer (which might be empty)\n    write(output, sr, ec);\n\n    // This error is returned when buffer_body uses up the buffer\n    if(ec == error::need_buffer)\n        ec = {};\n    if(ec)\n        return;\n}\nwhile(! p.is_done() &amp;&amp; ! sr.is_done());\n</code></pre>\n\n<p>A few things I don't understand here:</p>\n\n<ol>\n<li>We're done reading the header. Why do we need boost beast and not boost asio to read a raw tcp message? When I tried to do that (with both async_read/async_read_some) I got an infinite reads of zero size.</li>\n<li>The documentation of <a href=\"https://www.boost.org/doc/libs/develop/libs/beast/doc/html/beast/ref/boost__beast__http__parser.html\" rel=\"nofollow noreferrer\">parser</a> says (at the end of the page) that a new instance is needed for every message, but I don't see that in the example.</li>\n<li>Since tcp message reading is not working, is there a way to convert the parser/serializer data to some kind of string? Even write it to a text file in a FIFO manner, so that I could process it with some json library? I don't want to use another socket like the example.</li>\n</ol>\n\n<p>The function <code>boost::beast::buffers()</code> failed to compile for the parser and the serializer, and for the parser there's no consume function, and the serializer's consume seems to be for particular http parts of the message, which fires an assert if I do it for <code>body()</code>.</p>\n\n<p>Besides that, I also failed at getting consistent chunks of data from the parser and the buffer with old-school <code>std::copy</code>. I don't seem to understand how to combine the data together to get the stream of data. Consuming the buffer with <code>.consume()</code> at any point while receiving data leads to <code>need buffer</code> error.</p>\n\n<p>I would really appreciate someone explaining the logic of how all this should work together.</p>\n"}, {"tags": ["c++", "linux-kernel", "beagleboneblack", "armv7", "debian-jessie"], "owner": {"reputation": 21, "user_id": 10739942, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213394635610900/picture?type=large", "display_name": "Peeranut Noonurak", "link": "https://stackoverflow.com/users/10739942/peeranut-noonurak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1554891446, "creation_date": 1554891065, "last_edit_date": 1554891446, "question_id": 55609963, "link": "https://stackoverflow.com/questions/55609963/how-to-use-timer-interrupt-from-gpio-to-control-sampling-period-of-adc-in-beagle", "title": "How to use timer interrupt from GPIO to control sampling period of ADC in BeagleBone Black by c++ code?", "body": "<p>I'm a university student, who need to study about making adc capturing in BeagleBone Black. </p>\n\n<p>Everything goes really well. I can sampling the data from adc and even print the time stamp in each sample value. Then I check the sampling period of result which i got by using oscilloscope the check the wave from GPIO P8_10 by using \"<strong>BeagleBoneBlack-GPIO</strong>\" library  Finally I realized that the sampling period is not stable at all.</p>\n\n<p>And I assumed that I supposed to use Interrupt timer in BeagleBone Black. But my root-skill is pretty low to make it by my own. </p>\n\n<p>Anyway. How can i make Interrupt timer by c++ through GPIO because I need to used the interrupt timer to control the adc to make the steady and stable sampling period such as 3ms.</p>\n\n<p>data below is which version I am using, the code, and the result right now also</p>\n\n<blockquote>\n<pre><code>-BeagleBone Black \n-Debian GNU/LInux 8.11 (jessie)\n-Linux 5.0.3-bone5\n-ARMv7 Processor rev2 (v7l)\n</code></pre>\n</blockquote>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;sys/time.h&gt;\n    #include &lt;time.h&gt;\n    #include &lt;math.h&gt;\n    #include&lt;iostream&gt;\n    #include&lt;fstream&gt;\n    #include&lt;string&gt;\n    #include&lt;sstream&gt;\n    #include&lt;unistd.h&gt;\n    #include \"GPIO/GPIOManager.h\"\n    #include \"GPIO/GPIOConst.h\"\n\n    using namespace std;\n    #define LIN0_PATH \"/sys/bus/iio/devices/iio:device0/in_voltage\" \n    int readAnalog(int number){\n            stringstream ss;\n            ss &lt;&lt; LIN0_PATH &lt;&lt; number &lt;&lt; \"_raw\";\n            fstream fs;\n            fs.open(ss.str().c_str(), fstream::in);\n            fs &gt;&gt; number;\n            fs.close(); \n     return number; \n     } \n     int main(int argc, char* argv[ ]){ \n     int i=0;       \n     GPIO::GPIOManager* gp = GPIO::GPIOManager::getInstance();  \n     int pin1 = GPIO::GPIOConst::getInstance()-&gt;getGpioByKey(\"P8_10\");  \n     gp-&gt;setDirection(pin1, GPIO::OUTPUT);\n\n      char buffer[26];   \n      int millisec;   \n      struct tm* tm_info;   \n      struct timeval tv;\n\n    gettimeofday(&amp;tv, NULL);   \n    millisec = lrint(tv.tv_usec/1000.0); // Round to nearest millisec   \n    if (millisec&gt;=1000) {                \n        millisec -=1000;\n        tv.tv_sec++;\n        }   tm_info = localtime(&amp;tv.tv_sec);   \n    strftime(buffer, 26, \"%d/%m/%Y %H:%M:%S\", tm_info);   \n    cout&lt;&lt;\"print date and time\"&lt;&lt;buffer&lt;&lt;\":\"&lt;&lt;millisec &lt;&lt; endl;\n\n    for (int j=0;j&lt;100;j++){  \n      gp-&gt;setValue(pin1, GPIO::HIGH);  \n      float value[j] = readAnalog(0)*(1.8/4096) ;  \n      gp-&gt;setValue(pin1, GPIO::LOW);  \n      usleep(300);  \n    }    \n\n    for (int j=0;j&lt;100;j++){   \n      cout &lt;&lt; fixed;   \n      cout.precision(3);   \n      cout &lt;&lt;i&lt;&lt;\";\"&lt;&lt;value&lt;&lt; endl;\n\n    i++; }\n\n    return 0; }\n</code></pre>\n\n<p>And these are command to run the my file</p>\n\n<blockquote>\n  <p><code>g++ GPIO/GPIOConst.cpp GPIO/GPIOManager.cpp try.cpp</code></p>\n</blockquote>\n\n<p>then </p>\n\n<blockquote>\n  <p><code>./a.out</code></p>\n</blockquote>\n\n<p>and this is the result</p>\n\n<blockquote>\n<pre><code>print date and time10/04/2019 17:02:27:460\n0;1.697\n1;1.697\n2;1.695\n3;1.693\n4;1.694\n5;1.693\n6;1.693\n7;1.692\n8;1.691\n9;1.692\n10;1.693\n11;1.692\n12;1.694\n13;1.694\n14;1.694\n15;1.692\n16;1.695\n17;1.692\n18;1.693\n19;1.694\n20;1.693\n21;1.691\n22;1.692\n23;1.693\n24;1.691\n25;1.693\n26;1.693\n27;1.693\n28;1.694\n29;1.691\n30;1.694\n31;1.693\n32;1.695\n33;1.691\n34;1.694\n35;1.693\n36;1.693\n37;1.691\n38;1.693\n39;1.691\n40;1.692\n41;1.694\n42;1.692\n43;1.692\n44;1.693\n45;1.692\n46;1.694\n47;1.693\n48;1.693\n49;1.692\n50;1.692\n51;1.692\n52;1.691\n53;1.690\n54;1.691\n55;1.692\n56;1.693\n57;1.692\n58;1.692\n59;1.692\n60;1.694\n61;1.694\n62;1.694\n63;1.694\n64;1.693\n65;1.692\n66;1.693\n67;1.692\n68;1.693\n69;1.693\n70;1.692\n71;1.692\n72;1.693\n73;1.694\n74;1.693\n75;1.694\n76;1.693\n77;1.692\n78;1.694\n79;1.692\n80;1.692\n81;1.692\n82;1.692\n83;1.692\n84;1.694\n85;1.694\n86;1.693\n87;1.693\n88;1.694\n89;1.693\n90;1.693\n91;1.692\n92;1.694\n93;1.691\n94;1.694\n95;1.693\n96;1.691\n97;1.692\n98;1.693\n99;1.694\n</code></pre>\n</blockquote>\n\n<p>[and this is what i got from oscilloscope][1]</p>\n\n<blockquote>\n  <p>[1]: <a href=\"https://i.stack.imgur.com/FJSRe.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/FJSRe.jpg</a></p>\n</blockquote>\n\n<p>It will be really great if there are anyone who would love to give me some advice. And If there are something concerning you guys. Please feel free to ask me.</p>\n\n<p>Best Regard</p>\n\n<p>Peeranut Noonurak</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 2, "creation_date": 1554890664, "post_id": 55609830, "comment_id": 97914181, "body": "could you not define an invalid <code>koalaGraph::PVertex</code> and return this? The calling code needs to check if it&#39;s invalid or not before deciding to use it"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 3, "creation_date": 1554890967, "post_id": 55609830, "comment_id": 97914374, "body": "&quot;How to handle errors&quot; is really too broad for a simple Q&amp;A.  There are three choices: 1.  Throw an exception.  2.  Actual result is returned in an argument passed by reference, and the function returns an error code (or success).  3.  Function returns actual result but you have a known value (like -1, or nullptr) which means &quot;an error occured&quot;.  The appropriate style depends on a lot of things."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1554891123, "post_id": 55609830, "comment_id": 97914464, "body": "You should either return <code>optional&lt;koalaGraph::PVertex&gt;</code> or throw an exception if missing value is not expected or call <code>abort</code> if it would violate some constraint."}, {"owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "edited": false, "score": 0, "creation_date": 1554891752, "post_id": 55609830, "comment_id": 97914803, "body": "If <code>koalaVertices[i]</code> is a pointer, you could return <code>nullptr</code> or a pointer to some specially designated variable. Then you can compare the returned pointer with one of those."}], "answers": [{"tags": [], "owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "is_accepted": false, "score": 9, "last_activity_date": 1554895919, "last_edit_date": 1554895919, "creation_date": 1554891147, "answer_id": 55609983, "question_id": 55609830, "link": "https://stackoverflow.com/questions/55609830/how-to-properly-handle-if-a-function-exits-without-encoutering-a-return/55609983#55609983", "title": "How to properly handle if a function exits without encoutering a return", "body": "<p>You can use <a href=\"https://en.cppreference.com/w/cpp/utility/optional\" rel=\"nofollow noreferrer\"><code>std::optional</code></a></p>\n\n<pre><code>#include &lt;optional&gt;\nstd::optional&lt;koalaGraph::PVertex&gt; \nKoala::lookUpVertexbyName(const std::string&amp;vertexName, \n                          const std::vector&lt;koalaGraph::PVertex&gt;&amp; koalaVertices) {\n\n    for (size_t i = 0; i &lt; koalaVertices.size(); i++) {\n\n        if(koalaVertices[i]-&gt;info.name == vertexName) \n            return koalaVertices[i];\n    }\n    return {};\n}\n\nint main()\n{\n    Koala k;\n    //...\n    auto maybeVertex = k.lookUpVertexByName(\"foo\",vertices);\n    if(maybeVertex)\n        koalaGraph::PVertex&amp;&amp; vertex = *maybeVertex;\n    //alternatively\n    if(maybeVertex.has_value())\n        //found\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1554892036, "post_id": 55610069, "comment_id": 97914954, "body": "pedagogical advice: never work with negative examples. those are most likely to remember =)"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1554893990, "last_edit_date": 1554893990, "creation_date": 1554891406, "answer_id": 55610069, "question_id": 55609830, "link": "https://stackoverflow.com/questions/55609830/how-to-properly-handle-if-a-function-exits-without-encoutering-a-return/55610069#55610069", "title": "How to properly handle if a function exits without encoutering a return", "body": "<p>There are three ways to exit a function:</p>\n\n<ol>\n<li>Return a value</li>\n<li>Throw a value</li>\n<li>Call <code>std::abort</code> or <code>std::exit</code> (possibly indirectly)</li>\n<li>(<code>std::longjmp</code> which you shouldn't use)</li>\n</ol>\n\n<p>If you don't do any of the above, then behaviour will be undefined. If you don't want to do 1., then your options are 2. or 3. Abort and exit will terminate the process. A throw can be caught, but an uncaught throw will cause <code>std::abort</code>.</p>\n\n<p>Note that just because you don't find a value, it's not necessarily impossible to return some value. What you can do is return a \"sentinel\" value that represents \"not found\". For example, <code>std::string</code> functions that return an index will return <code>std::string::npos</code> when there is no result. Functions returning a pointer might return null, and functions returning an iterator would return an iterator the the end of the range.</p>\n\n<p>If there is no representation of your return type that could be reserved for a sentinel, there is a way to add such representation by wrapping the return type with additional state. The standard library has a generic wrapper for this: <code>std::optional</code>.</p>\n\n<p>Another wrapper is the proposed <a href=\"https://github.com/viboes/std-make/tree/master/doc/proposal/expected\" rel=\"nofollow noreferrer\"><code>std::expected</code></a> (it's not accepted to the standard as far as I know, but there are plenty of non-standard implementations). It allows storing information about the reason for not returning a proper value which similar to what you can do with exceptions.</p>\n\n<hr>\n\n<p>P.S. Your function appears to be nearly identical to <code>std::find_if</code>. Use standard algorithms when possible. Also consider a data structure that is more efficient for searching if the search space is large.</p>\n"}, {"comments": [{"owner": {"reputation": 941, "user_id": 1849287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14e272de9cfe3615952604a7392ebdc?s=128&d=identicon&r=PG", "display_name": "Nellie Danielyan", "link": "https://stackoverflow.com/users/1849287/nellie-danielyan"}, "edited": false, "score": 0, "creation_date": 1554892072, "post_id": 55610167, "comment_id": 97914982, "body": "This is incorrect. He is comparing koalaVertices[i]-&gt;info.name to vertexName."}, {"owner": {"reputation": 463, "user_id": 2657179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/516fe6fe86e7f822cbcd6f670a6b06da?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/2657179/kilian"}, "edited": false, "score": 0, "creation_date": 1554897587, "post_id": 55610167, "comment_id": 97918106, "body": "Dereferencing the end()-iterator is undefined behavior (<a href=\"https://en.cppreference.com/w/cpp/container/vector/end\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector/end</a>) so this approach does not work."}, {"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1554898988, "post_id": 55610167, "comment_id": 97918951, "body": "edited one more time, no the code is tested with gcc, clang and visual studio 2017"}, {"owner": {"reputation": 319, "user_id": 11226898, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-suvAg66YwmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcIggdXEKD-19IaYC84ilb6AvEm8Q/mo/photo.jpg?sz=128", "display_name": "black sheep", "link": "https://stackoverflow.com/users/11226898/black-sheep"}, "edited": false, "score": 0, "creation_date": 1554916758, "post_id": 55610167, "comment_id": 97929411, "body": "@skratchi.at thanks for your answer - why do you return a vector though?"}, {"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1554959344, "post_id": 55610167, "comment_id": 97942320, "body": "I return an iterator. So to speak an element of the <code>std::vector</code>"}], "tags": [], "owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "is_accepted": false, "score": 3, "last_activity_date": 1554898956, "last_edit_date": 1554898956, "creation_date": 1554891746, "answer_id": 55610167, "question_id": 55609830, "link": "https://stackoverflow.com/questions/55609830/how-to-properly-handle-if-a-function-exits-without-encoutering-a-return/55610167#55610167", "title": "How to properly handle if a function exits without encoutering a return", "body": "<p>You could use a <code>for</code>-loop and return a iterator.</p>\n\n<pre><code>std::vector&lt;koalaGraph::PVertex&gt;::const_iterator\nKoala::lookUpVertexbyName(\n        const std::string&amp;vertexName, \n        const std::vector&lt;koalaGraph::PVertex&gt;&amp; koalaVertices) \n{\n    for(auto iter = koalaVertices.begin(); iter != koalaVertices.end(); ++iter) {\n        if(koalaVertices[i]-&gt;info.name == vertexName) {\n            return iter;\n        }\n    }\n    return koalaVertices.end();\n}\n</code></pre>\n\n<p>Further you check if you got <code>end</code> back. <code>end</code> indicates if the value was found or not.</p>\n\n<pre><code>auto iter = &lt;fucntioncall&gt; // lookUpVertexbyName\nif (iter == &lt;vector&gt;.end() {\n    // abort or do what ever you want\n}\n</code></pre>\n\n<p>To use the value you have to dereference the iterator. DON'T derefence the <code>end</code>-iterator, it will lead you to neverland -> undefined behavior.</p>\n\n<pre><code>std::string test = *iter;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 941, "user_id": 1849287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14e272de9cfe3615952604a7392ebdc?s=128&d=identicon&r=PG", "display_name": "Nellie Danielyan", "link": "https://stackoverflow.com/users/1849287/nellie-danielyan"}, "is_accepted": false, "score": 2, "last_activity_date": 1554892690, "last_edit_date": 1554892690, "creation_date": 1554892382, "answer_id": 55610350, "question_id": 55609830, "link": "https://stackoverflow.com/questions/55609830/how-to-properly-handle-if-a-function-exits-without-encoutering-a-return/55610350#55610350", "title": "How to properly handle if a function exits without encoutering a return", "body": "<p>Why not use <code>std::find_if</code> instead of reinventing the wheel. See this <a href=\"http://www.cplusplus.com/reference/algorithm/find_if/\" rel=\"nofollow noreferrer\">link</a>.</p>\n\n<pre><code>struct equal\n{\n    equal(const std::string&amp; vertexName) : vertexName_(vertexName) { }\n    bool operator()(const koalaGraph::PVertex&amp; pVertex) const \n    {\n        return  pVertex-&gt;info.name == vertexName_;\n    } \n\n    private:\n        std::string vertexName_;\n};\n</code></pre>\n\n<p>And then:</p>\n\n<p><code>std::find_if(koalaVertices.begin(), koalaVertices.end(), eq(vertexName));</code></p>\n\n<p>Regarding handling the errors in function as it has already been stated there are multiple approaches that one can take. Returning an iterator instead of object(you will avoid copying this way too) is one of them. <code>end()</code> iterator would then indicate that the name was not found.</p>\n"}], "owner": {"reputation": 319, "user_id": 11226898, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-suvAg66YwmA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcIggdXEKD-19IaYC84ilb6AvEm8Q/mo/photo.jpg?sz=128", "display_name": "black sheep", "link": "https://stackoverflow.com/users/11226898/black-sheep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 1, "answer_count": 4, "score": 5, "last_activity_date": 1554898956, "creation_date": 1554890574, "question_id": 55609830, "link": "https://stackoverflow.com/questions/55609830/how-to-properly-handle-if-a-function-exits-without-encoutering-a-return", "title": "How to properly handle if a function exits without encoutering a return", "body": "<p>I have a function that search a vector and returns the item if it is found. But I want to know that best software appraoch to handle if it is not found.</p>\n\n<p>I have created a function and could return -1 or something but that wouldn't match the return type.</p>\n\n<pre><code>koalaGraph::PVertex Koala::lookUpVertexbyName(const std::string&amp;vertexName, const std::vector&lt;koalaGraph::PVertex&gt;&amp; koalaVertices) {\n\n    for (size_t i = 0; i &lt; koalaVertices.size(); i++) {\n\n        if(koalaVertices[i]-&gt;info.name == vertexName) \n            return koalaVertices[i];\n    }\n}\n</code></pre>\n\n<p>If a situation is encountered where the item being searched for is not in the vector then program will exit.</p>\n"}, {"tags": ["c++", "libcurl"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1554890224, "post_id": 55609585, "comment_id": 97913901, "body": "Maybe increase the timeout. One second isn&#39;t that long if the server is busy. Other than that, there&#39;s not much for us to go on here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 0, "creation_date": 1554894009, "post_id": 55609585, "comment_id": 97916060, "body": "none of the default timeouts seem to be 1000 ms, I wonder if curl_easy_reset would help you"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 0, "creation_date": 1554894365, "post_id": 55609585, "comment_id": 97916243, "body": "according to this <a href=\"https://stackoverflow.com/questions/6211282/why-would-curl-time-out-in-1000ms-when-i-have-set-up-timeout-upto-3000ms\" title=\"why would curl time out in 1000ms when i have set up timeout upto 3000ms\">stackoverflow.com/questions/6211282/&hellip;</a> and the message you are seeing an &quot;operation timeout&quot; governed by the values <code>CURLOPT_TIMEOUT</code>/<code>CURLOPT_TIMEOUT_MS</code>"}, {"owner": {"reputation": 39, "user_id": 11339485, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ETjihEFOkwo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcMX25pHuyFLZVDFRMuIOwpPX3FAg/mo/photo.jpg?sz=128", "display_name": "pranav shah", "link": "https://stackoverflow.com/users/11339485/pranav-shah"}, "edited": false, "score": 0, "creation_date": 1554905892, "post_id": 55609585, "comment_id": 97923362, "body": "I am still not able to get on how to resolve this issue :("}], "owner": {"reputation": 39, "user_id": 11339485, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ETjihEFOkwo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcMX25pHuyFLZVDFRMuIOwpPX3FAg/mo/photo.jpg?sz=128", "display_name": "pranav shah", "link": "https://stackoverflow.com/users/11339485/pranav-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1369, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1554896914, "creation_date": 1554889803, "last_edit_date": 1554891451, "question_id": 55609585, "link": "https://stackoverflow.com/questions/55609585/how-to-fix-operation-timed-out-after-1000-milliseconds-with-0-bytes-received-e", "title": "How to fix &quot;Operation timed out after 1000 milliseconds with 0 bytes received&quot; error?", "body": "<p>For our integration project, we make rest calls using libcurl library functions. However, we are facing some intermittent issue while making a rest call.The issue is that the <code>curl_easy_perform()</code> method is returning an error code with following description:</p>\n\n<blockquote>\n  <p>Operation timed out after 1000 milliseconds with 0 bytes received</p>\n</blockquote>\n\n<p>Can someone please help me on this ?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1554889967, "post_id": 55609564, "comment_id": 97913729, "body": "10^9 x 10^9 x 4 bytes is more memory than any computer have or will ever have in multiple lifetimes. You need to rethink your algorithms."}, {"owner": {"reputation": 455, "user_id": 9646647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4732ac3dcf9b597cd7e6da6a2ec51c80?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Scott", "link": "https://stackoverflow.com/users/9646647/andrew-scott"}, "edited": false, "score": 0, "creation_date": 1554890037, "post_id": 55609564, "comment_id": 97913778, "body": "^ True. The most you can use is 10^9 * 4 bytes in a normal computer."}], "answers": [{"tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": false, "score": 4, "last_activity_date": 1554890564, "last_edit_date": 1554890564, "creation_date": 1554890104, "answer_id": 55609680, "question_id": 55609564, "link": "https://stackoverflow.com/questions/55609564/how-to-allocate-memory-to-a-2d-array-of-size-109/55609680#55609680", "title": "How to allocate memory to a 2d array of size 10^9", "body": "<p>10^9 even with 1 byte elements is a gigabyte, a 2D array is 10^9^2 or an exabyte. With 64bit integers that is 8 exabytes. So you need to rethink this. I assume you won't actually have data in the vast majority of that?</p>\n\n<p>You could for example use an <code>std::map</code> or <code>std::unordered_map</code>.</p>\n\n<pre><code>unsigned char bytes[] = { 10, 55, 255 };\nstruct pair_hash\n{\n    std::size_t operator() (const std::pair&lt;int, int&gt; &amp;p)const\n    {\n        return std::hash&lt;int&gt;()(p.first) ^ std::hash&lt;int&gt;()(p.first); // Possibly want a better hash\n    }\n};\nstd::unordered_map&lt;std::pair&lt;int, int&gt;, long long, pair_hash&gt; map;\n</code></pre>\n\n<p>You will need to define a hash for it. In this case you could also combine the two integers into the high and low bits, as a long long is generally large enough to hold two ints.</p>\n\n<pre><code>std::unordered_map&lt;long long, long long&gt; map;\n</code></pre>\n\n<p>There are other ways to do \"sparse arrays\" and can depend a lot on your data, for example do you expect \"clusters\" or everything evenly distributed? What is the read/write pattern?</p>\n"}], "owner": {"reputation": 1, "user_id": 5079878, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-E11GCOQxlrg/AAAAAAAAAAI/AAAAAAAAADU/TdSqW1oueTg/photo.jpg?sz=128", "display_name": "Simrit Singh", "link": "https://stackoverflow.com/users/5079878/simrit-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554894028, "creation_date": 1554889738, "last_edit_date": 1554894028, "question_id": 55609564, "link": "https://stackoverflow.com/questions/55609564/how-to-allocate-memory-to-a-2d-array-of-size-109", "title": "How to allocate memory to a 2d array of size 10^9", "body": "<p>I want a 2d array to take inputs upto 10^9.\nRows and Columns can  go upto 10^9.\nHow shall I assign it since dynamic allocation is giving me a run-time error.</p>\n\n<p>I assigned the memory dynamically but I am getting a run-time error when input is 10^5 or more.\nI know array will use 10^9 x 10^9 x 4 bytes of memory which my heap can't handle it, so How do i assign it.</p>\n\n<pre><code>long long int n,m,k,ans=0;\n        cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;\n        long long int**a=new long long int*[n+2];\n        for(long long i=0;i&lt;=n+2;i++){\n            a[i]=new long long int[m+2];\n        }\n        for(long long int i=0;i&lt;=n+1;i++){\n            for(long long int j=0;j&lt;=m+1;j++)\n                a[i][j]=0;\n        }\n</code></pre>\n\n<p>I expect the code to take input when rows and columns are 10^5.\nHowever I am getting following:</p>\n\n<pre><code>terminate called after throwing an instance of std::bad_alloc\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554889788, "post_id": 55609509, "comment_id": 97913620, "body": "Nope, <code>.join()</code> is mandatory. <i>&quot;it never ends&quot;</i> - this should be fixed as well. One does not want to deal with any &quot;never ending threads&quot;. Also this code suffers from the race condition."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554890001, "post_id": 55609509, "comment_id": 97913757, "body": "@VTT Yes but I just want the function <code>run()</code> to run in the background until <code>ctrl-c</code> is called. Regarding the race condition, why? I do not see that the values could be written by some other thread."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554890191, "post_id": 55609509, "comment_id": 97913875, "body": "Then you will need to implement Ctrl-C handler that sets <code>exit</code> flag that should be periodically checked in both threads. When it is set main thread should invoke <code>.join</code> while background thread should exit. <code>_position</code> is read from main thread when it invokes <code>getPosition</code> while background thread writes it when it invokes <code>convertToMeters</code>"}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554890482, "post_id": 55609509, "comment_id": 97914042, "body": "@VTT Hmm, that makes sense but I just included <code>.join</code> and the <code>run()</code> function kept running..."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554890570, "post_id": 55609509, "comment_id": 97914127, "body": "<code>join</code> starts waiting for the thread to exit, but in this case background thread never exits because it contains endless loop."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554890669, "post_id": 55609509, "comment_id": 97914184, "body": "@VTT ok thanks, I should read more about std::thread. From my understanding, I cannot do anything after <code>.join()</code> as it will wait forever."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554890703, "post_id": 55609509, "comment_id": 97914203, "body": "That&#39;s why I wrote above that you need to have an <code>exit</code> flag to be checked in background thread so it can actually exit."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554894446, "post_id": 55609509, "comment_id": 97916279, "body": "@VTT Would you mind writing with a bit more details the answer of invoking .join as it answers to my question?"}], "owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554890497, "creation_date": 1554889545, "question_id": 55609509, "link": "https://stackoverflow.com/questions/55609509/program-with-a-separate-thread-is-being-killed", "title": "Program with a separate thread is being killed", "body": "<p>After declaring an object in my main and running its function in a separate thread, my program crashes.</p>\n\n<p>I have read other question on SO but due to my lack of knowledge in multithreading, I cannot understand what is my specific problem.</p>\n\n<p>Here is my class called UART (without header files and only showing the required cpp declaration):</p>\n\n<pre><code>void UART::run()\n    {\n        while(true)\n        {\n            _letter = _serial.read();\n            if (_letter == \"!\")\n            {\n                _line = _serial.readline();\n                _words.clear();\n                std::istringstream f(_line);\n                std::string s;\n                //std::cout &lt;&lt; _letter &lt;&lt; std::endl;\n                while (getline(f,s,'\\t'))\n                {\n                    _words.push_back(s);\n                }\n                this-&gt;fillVars();\n            }\n        }\n    }\n\n    void UART::fillVars()\n    {\n        if (_words[0] == \"s\")\n        {\n            _effort[0] = std::stoi(_words[1]);\n            _effort[1] = std::stoi(_words[2]);\n        }\n        else if (_words[0] == \"e\")\n        {\n            this-&gt;convertToMeters();\n        }\n\n    }\n\n    void UART::convertToMeters()\n    {\n        std::cout &lt;&lt; _position[0];\n        _position[0] = std::stod(_words[1]); // / _tick_meters;\n        _position[1] = std::stod(_words[2]) / _tick_meters;\n    }\n\n\n    double UART::getPosition(std::string wheel)\n    {\n        if (wheel == \"LEFT\") return _position[0];\n        else return _position[1];\n    }\n</code></pre>\n\n<p>And my main cpp looks like this:</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n    ros::init(argc, argv, \"joint_node\");\n    std::string port(\"/dev/ttyACM0\");\n\n    unsigned long baud = 115200;\n\n    try\n    {\n        serial::Serial my_serial(port, baud, serial::Timeout::simpleTimeout(1000));\n        if(my_serial.isOpen()) ROS_INFO(\"Serial is %s\", \"open\");\n\n        genius::UART uart(my_serial, 380);\n        std::thread uart_run(&amp;genius::UART::run, uart);\n        std::cout &lt;&lt; uart.getPosition(\"LEFT\") &lt;&lt;std::endl;\n\n    } catch (std::exception &amp;e)\n    {\n        std::cerr &lt;&lt; \"Unhandled Exception: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>My understanding is that after creating an object <code>uart</code>, I want to run its function <code>run()</code> in a separate thread as I want its values to be updated with no interruption on a background. So whenever I access its values like using its function <code>uart.getPosition(\"LEFT\")</code> I will get the last up-to date data. I guess I do not need <code>.join()</code> this thread as I do not want to wait for it as it never ends.</p>\n\n<p>But for some reason after calling the <code>uart.getPosition(\"LEFT\")</code> my program crashes and also function <code>getPosition()</code> never gets executed and I always get value of 0.</p>\n"}, {"tags": ["c++", "namespaces", "include"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1554889561, "post_id": 55609463, "comment_id": 97913451, "body": "<code>#include &lt;string&gt;</code>, then use <code>std::string</code>. Standard headers have no extension."}, {"owner": {"reputation": 941, "user_id": 1849287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14e272de9cfe3615952604a7392ebdc?s=128&d=identicon&r=PG", "display_name": "Nellie Danielyan", "link": "https://stackoverflow.com/users/1849287/nellie-danielyan"}, "edited": false, "score": 0, "creation_date": 1554889588, "post_id": 55609463, "comment_id": 97913469, "body": "&quot;when only one of these two are absent&quot;.   Two what?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1554889590, "post_id": 55609463, "comment_id": 97913471, "body": "The only thing <code>using namespace std;</code> does is it allows you to not write <code>std::</code> before names from the standard library. You still need <code>#include</code>s."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1554889696, "post_id": 55609463, "comment_id": 97913548, "body": "About <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">using namespace std</a>..."}, {"owner": {"reputation": 775, "user_id": 10529912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iz2xlkek4WM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWMgBYJUjLP3ocrOQ3_fyB1WaPSWg/mo/photo.jpg?sz=128", "display_name": "Rhee", "link": "https://stackoverflow.com/users/10529912/rhee"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1554890447, "post_id": 55609463, "comment_id": 97914026, "body": "@Quentin you meant &lt;string.h&gt; by &quot;Standard headers&quot;?"}, {"owner": {"reputation": 10406, "user_id": 33987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9915b127729c73da8b0b253f6c867e45?s=128&d=identicon&r=PG", "display_name": "Joris Timmermans", "link": "https://stackoverflow.com/users/33987/joris-timmermans"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1554894741, "post_id": 55609463, "comment_id": 97916451, "body": "I think @Quentin means &quot;standard library headers&quot;, but see e.g. <a href=\"https://en.wikipedia.org/wiki/C%2B%2B_Standard_Library\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C%2B%2B_Standard_Library</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1554889911, "post_id": 55609518, "comment_id": 97913706, "body": "Functions from <code>cstring</code>/<code>string.h</code> comprise e. g. memset, strchr, strlen, ... (printf family, incontrast, comes from <code>cstdio</code>/<code>stdio.h</code>)."}, {"owner": {"reputation": 775, "user_id": 10529912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iz2xlkek4WM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWMgBYJUjLP3ocrOQ3_fyB1WaPSWg/mo/photo.jpg?sz=128", "display_name": "Rhee", "link": "https://stackoverflow.com/users/10529912/rhee"}, "edited": false, "score": 0, "creation_date": 1554890678, "post_id": 55609518, "comment_id": 97914189, "body": "I don&#39;t understand what &quot;&lt;string&gt; is C++ and provides the std::string class.&quot; means. Is it that something like interface of string exists in std , but not implemented yet? And if I include &lt;string&gt; then, I kinda imported the implemented-real string&gt;?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1554890701, "post_id": 55609518, "comment_id": 97914201, "body": "Not sure if the guidelines reference is good \u2013 there are good points in, but referencing another non-standard library excessively (GSL) is at least questionable in my eyes..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 775, "user_id": 10529912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iz2xlkek4WM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWMgBYJUjLP3ocrOQ3_fyB1WaPSWg/mo/photo.jpg?sz=128", "display_name": "Rhee", "link": "https://stackoverflow.com/users/10529912/rhee"}, "edited": false, "score": 0, "creation_date": 1554890806, "post_id": 55609518, "comment_id": 97914273, "body": "@Rhee <code>#include &lt;string&gt;</code> is what you need; <code>&lt;string&gt;</code> was short for the header named &#39;string&#39; which defines an equally named class in namespace <code>std</code>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1554892568, "post_id": 55609518, "comment_id": 97915263, "body": "@Aconcagua The GSL is an implementation of Core Guidelines verification. The link itself is the official one, supported by members of the C++ committee."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1554896568, "post_id": 55609518, "comment_id": 97917471, "body": "Then question arises: Why doesn&#39;t it enter the standard directly (in namespace <code>std</code>)???"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1554897484, "post_id": 55609518, "comment_id": 97918044, "body": "This is a quite recent effort of adding guidelines, so it takes time. You can actually see some of the content of the GSL that have made their way in the standard."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 5, "last_activity_date": 1554889846, "last_edit_date": 1554889846, "creation_date": 1554889582, "answer_id": 55609518, "question_id": 55609463, "link": "https://stackoverflow.com/questions/55609463/how-to-import-include-string-in-cpp/55609518#55609518", "title": "How to import/ include string in cpp", "body": "<p><code>&lt;string&gt;</code> is C++ and provides the <code>std::string</code> class.</p>\n\n<p><code>&lt;string.h&gt;</code> is C (the C++ equivalent is <code>&lt;cstring&gt;</code>) and only provides functions to work on <code>char*</code>.</p>\n\n<p>Don't use <code>using namespace std;</code> (see the <a href=\"https://github.com/isocpp/CppCoreGuidelines\" rel=\"nofollow noreferrer\">C++ Core Guidelines</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 10406, "user_id": 33987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9915b127729c73da8b0b253f6c867e45?s=128&d=identicon&r=PG", "display_name": "Joris Timmermans", "link": "https://stackoverflow.com/users/33987/joris-timmermans"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1554894591, "post_id": 55609766, "comment_id": 97916356, "body": "Nothing wrong with being pedantic when it comes to programming!"}], "tags": [], "owner": {"reputation": 10406, "user_id": 33987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9915b127729c73da8b0b253f6c867e45?s=128&d=identicon&r=PG", "display_name": "Joris Timmermans", "link": "https://stackoverflow.com/users/33987/joris-timmermans"}, "is_accepted": true, "score": 2, "last_activity_date": 1554894569, "last_edit_date": 1554894569, "creation_date": 1554890341, "answer_id": 55609766, "question_id": 55609463, "link": "https://stackoverflow.com/questions/55609463/how-to-import-include-string-in-cpp/55609766#55609766", "title": "How to import/ include string in cpp", "body": "<p>In C++ the <code>using</code> statement is not related to including the functionality of that namespace (or type).  Instead, it allows you to use the namespace in the statement without a namespace prefix in the rest of the current scope (or compilation unit if you have the statement in global scope) after the <code>using</code> statement.</p>\n\n<p>So you could either write</p>\n\n<pre><code>#include &lt;string&gt;\n\nstd::string my_string;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#include &lt;string&gt;\nusing namespace std;\n\nstring my_string;\n</code></pre>\n\n<p>As others have mentioned - the first version is more recommended than the second, because there's usually a reason that things are in their own namespace (such as the <code>std</code> namespace here).  If you have a blanket <code>using</code> statement you may get unexpected name clashes or other issues.  This is especially true if you do it in a header file, which you should never do unless you know exactly what the results will be and where.</p>\n"}], "owner": {"reputation": 775, "user_id": 10529912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iz2xlkek4WM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWMgBYJUjLP3ocrOQ3_fyB1WaPSWg/mo/photo.jpg?sz=128", "display_name": "Rhee", "link": "https://stackoverflow.com/users/10529912/rhee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 55609766, "answer_count": 2, "score": 1, "last_activity_date": 1554894569, "creation_date": 1554889386, "last_edit_date": 1554890438, "question_id": 55609463, "link": "https://stackoverflow.com/questions/55609463/how-to-import-include-string-in-cpp", "title": "How to import/ include string in cpp", "body": "<p>I would like to use the string class.\nShould I also involve <code>using namespace std;</code>?</p>\n\n<p>I thought <code>#include &lt;string&gt;</code> would be enough but in CLion when only one of these two (namespace or include) is absent, there are some errors.</p>\n\n<p>What makes things more complicated, is that there is <code>&lt;string&gt;</code> or <code>&lt;strings.h&gt;</code>. What's the difference?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "edited": false, "score": 0, "creation_date": 1554892135, "post_id": 55609449, "comment_id": 97915013, "body": "Do not set your graphView as the central widget. It has to be in a layout that contains the rest of your ui. See: <a href=\"https://doc.qt.io/qt-5/layout.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/layout.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1554892637, "creation_date": 1554892637, "answer_id": 55610444, "question_id": 55609449, "link": "https://stackoverflow.com/questions/55609449/how-to-display-qtchartview-in-window-with-other-widgets/55610444#55610444", "title": "How to display QtChartView in window with other widgets?", "body": "<p>I would try:</p>\n\n<pre><code>ui-&gt;graphView-&gt;setChart(chart);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>QChartView *chartView = new QChartView(chart);\nui-&gt;graphView = chartView;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 11315595, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aXSWEkqqbQA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reU2Ev9vh9yHpBOV0so8Mgw9Pdo9Q/mo/photo.jpg?sz=128", "display_name": "Giorgiy Popov", "link": "https://stackoverflow.com/users/11315595/giorgiy-popov"}, "is_accepted": false, "score": 0, "last_activity_date": 1554893586, "creation_date": 1554893586, "answer_id": 55610791, "question_id": 55609449, "link": "https://stackoverflow.com/questions/55609449/how-to-display-qtchartview-in-window-with-other-widgets/55610791#55610791", "title": "How to display QtChartView in window with other widgets?", "body": "<p><code>ui-&gt;graphView</code> already in layout when you assign <code>ui-&gt;graphView = chartView;</code>. You just change the pointer. Instead you have to initially create <code>ui-&gt;graphView</code> as <code>QChartView</code></p>\n"}], "owner": {"reputation": 89, "user_id": 9249043, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155512160613802/picture?type=large", "display_name": "Marko Marinkovic", "link": "https://stackoverflow.com/users/9249043/marko-marinkovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 55610444, "answer_count": 2, "score": 1, "last_activity_date": 1554893586, "creation_date": 1554889348, "last_edit_date": 1554889535, "question_id": 55609449, "link": "https://stackoverflow.com/questions/55609449/how-to-display-qtchartview-in-window-with-other-widgets", "title": "How to display QtChartView in window with other widgets?", "body": "<p>I followed the following youtube tutorial (succesfully) <a href=\"https://www.youtube.com/watch?v=MHn3ZTWcyXk&amp;t=13m33s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=MHn3ZTWcyXk&amp;t=13m33s</a>. I'm essentially trying to do the exact same thing as in the tutorial, however this time in a bigger window which already contains a bunch of widgets and stuff. I call the below function in the class constructor. This does however not display the data in the ui->graphview which is a QChartView. </p>\n\n<pre><code>void RecordWidget::setupGraph(){\n\n    QLineSeries *series = new QLineSeries();\n    series-&gt;append(0, 16);\n    series-&gt;append(1, 25);\n    series-&gt;append(2, 24);\n    series-&gt;append(3, 19);\n    series-&gt;append(4, 33);\n    series-&gt;append(5, 25);\n    series-&gt;append(6, 34);\n\n    // Create chart, add data, hide legend, and add axis\n    QChart *chart = new QChart();\n    chart-&gt;legend()-&gt;hide();\n    chart-&gt;addSeries(series);\n    chart-&gt;createDefaultAxes();\n\n    // Customize the title font\n    QFont font;\n    font.setPixelSize(18);\n    chart-&gt;setTitleFont(font);\n    chart-&gt;setTitleBrush(QBrush(Qt::black));\n    chart-&gt;setTitle(\"Barry Bonds HRs as Pirate\");\n\n    // Change the line color and weight\n    QPen pen(QRgb(0x000000));\n    pen.setWidth(5);\n    series-&gt;setPen(pen);\n\n    chart-&gt;setAnimationOptions(QChart::AllAnimations);\n\n    // Change the x axis categories\n    QCategoryAxis *axisX = new QCategoryAxis();\n    axisX-&gt;append(\"1986\",0);\n    axisX-&gt;append(\"1987\",1);\n    axisX-&gt;append(\"1988\",2);\n    axisX-&gt;append(\"1989\",3);\n    axisX-&gt;append(\"1990\",4);\n    axisX-&gt;append(\"1991\",5);\n    axisX-&gt;append(\"1992\",6);\n    chart-&gt;setAxisX(axisX, series);\n\n    // Used to display the chart\n    QChartView *chartView = new QChartView(chart);\n    chartView-&gt;setRenderHint(QPainter::Antialiasing);\n\n    ui-&gt;graphView = chartView;\n    ui-&gt;graphView-&gt;show();\n    ui-&gt;graphView-&gt;setVisible(true);\n}\n</code></pre>\n"}]