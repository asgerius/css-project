[{"tags": ["c++"], "comments": [{"owner": {"reputation": 1587, "user_id": 2079802, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e557e0909bd12533db6f43b8d6500b65?s=128&d=identicon&r=PG", "display_name": "Collin", "link": "https://stackoverflow.com/users/2079802/collin"}, "edited": false, "score": 0, "creation_date": 1510790389, "post_id": 47319335, "comment_id": 81589889, "body": "Can you try and rephrase you question? Its hard to interpret."}, {"owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "edited": false, "score": 0, "creation_date": 1510790417, "post_id": 47319335, "comment_id": 81589896, "body": "Are you getting an error message? Can you tell us what it is? Your statement &quot;it is telling me i have hero h; calling a deleted function&quot; sounds like you might be getting an error message."}, {"owner": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "edited": false, "score": 0, "creation_date": 1510790479, "post_id": 47319335, "comment_id": 81589918, "body": "i am trying to pass stats integers through this constructor so they can be called and modified later."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510790514, "post_id": 47319335, "comment_id": 81589928, "body": "If your code works, consider posting to <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "edited": false, "score": 0, "creation_date": 1510790516, "post_id": 47319335, "comment_id": 81589929, "body": "Error\tC2280\t&#39;hero::hero(void)&#39;: attempting to reference a deleted"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510790640, "post_id": 47319335, "comment_id": 81589955, "body": "In your <code>hero</code> class, which is derived from <code>Stats</code>, why is there a local <code>Stats</code> variable in the method?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510790774, "post_id": 47319335, "comment_id": 81589991, "body": "Your <code>RaceAndClass</code> method is worthless.  It has local variables that are intialized, but disappear after execution leaves the method.  The <code>using namespace std;</code> is also worthless where it is.  BTW, don&#39;t put <code>using namespace std;</code> in header files."}, {"owner": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "edited": false, "score": 0, "creation_date": 1510790916, "post_id": 47319335, "comment_id": 81590023, "body": "hero is calling stats constructor to so it can be passed into the race constructor so the stats can be modified. analogy ever play D&amp;D every character has there stats which then effect other skills but those stats are changed slightly based on race. like i roll 15 for orc then +2 for being an orc, now my str is 17 and that helps my skill at climbing. i guess ;p"}, {"owner": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "edited": false, "score": 0, "creation_date": 1510790985, "post_id": 47319335, "comment_id": 81590039, "body": "the namespcae std: was used b4 for cout &amp; endl but i removed those but left the std. should i then change the raceAndClass to be a constructor for hero?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "edited": false, "score": 0, "creation_date": 1510791656, "post_id": 47319396, "comment_id": 81590199, "body": "okey i know this  is probably gonna sound bad but do you have a reference i learn from examples?"}, {"owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "reply_to_user": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "edited": false, "score": 0, "creation_date": 1510791789, "post_id": 47319396, "comment_id": 81590231, "body": "@PiePie: A quick Google search found this which looks like it addresses the problems you&#39;re having: <a href=\"http://www.learncpp.com/cpp-tutorial/85-constructors/\" rel=\"nofollow noreferrer\">learncpp.com/cpp-tutorial/85-constructors</a>"}], "tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": false, "score": 1, "last_activity_date": 1510790680, "creation_date": 1510790680, "answer_id": 47319396, "question_id": 47319335, "link": "https://stackoverflow.com/questions/47319335/need-help-improving-my-c-and-class-creation-2/47319396#47319396", "title": "Need help improving my c++ and class creation 2", "body": "<p>Your <code>hero</code> class derives from <code>Stats</code>. Your <code>Stats</code> class requires a constructor call with a bunch of arguments; there is no default constructor. Therefore, you cannot call the default <code>hero</code> constructor with just <code>hero H;</code>, because there isn't one (that's where the compiler tells you that you can't reference a deleted method). You will need to implement a no-argument constructor for <code>hero</code>, which calls the <code>Stats</code> constructor with suitable arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "edited": false, "score": 0, "creation_date": 1510832487, "post_id": 47320890, "comment_id": 81608059, "body": "one more quick question, its simple so i dont feel i should make another question page. would it be ok to use my class Stats for seval other creatures such as an any bandit? or should i make a whole other class for those creatures. i wanna minimize my code."}], "tags": [], "owner": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "is_accepted": false, "score": 0, "last_activity_date": 1510801531, "creation_date": 1510801531, "answer_id": 47320890, "question_id": 47319335, "link": "https://stackoverflow.com/questions/47319335/need-help-improving-my-c-and-class-creation-2/47320890#47320890", "title": "Need help improving my c++ and class creation 2", "body": "<p>i redid my stats class and my hero class!!! i will also take my stats class and add more stats/skills to it as well as get my classes class refinded. thanks for the help!!!</p>\n\n<pre><code>#pragma once\nclass Stats {\npublic:\n    int //default stats\n        Str = 10,\n        Dex = 10,\n        Con = 10,\n        Int = 10,\n        Wis = 10,\n        Chr = 10;\n\n    Stats(){}\n};\n\n\n//hero class vvvvv\n\nclass hero : public Stats {\nprivate:\n    Stats s;\npublic:\n\n     hero() {\n\n         race c_race(race::orc, s);\n         std::cout &lt;&lt; s.Str &lt;&lt; std::endl;\n         std::cout &lt;&lt; s.Int &lt;&lt; std::endl;\n         std::cout &lt;&lt; s.Chr &lt;&lt; std::endl;\n         std::cout &lt;&lt; s.Wis &lt;&lt; std::endl;\n        //classes c_classes(classes::fighter, modStats, sneak, bluff, deplomacy, swim, mana, run);\n\n        }\n};\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8060050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iVsIJx0hJIE/AAAAAAAAAAI/AAAAAAAAABI/0GSvu0v9MYo/photo.jpg?sz=128", "display_name": "Pie Pie", "link": "https://stackoverflow.com/users/8060050/pie-pie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1510801531, "creation_date": 1510790215, "question_id": 47319335, "link": "https://stackoverflow.com/questions/47319335/need-help-improving-my-c-and-class-creation-2", "title": "Need help improving my c++ and class creation 2", "body": "<p>i wanna know where i can improve my program as well as i have run into a problem with my code.</p>\n\n<p>this is my hero class and source, it is telling me i have <code>hero h;</code> calling a deleted function as well as how do i pass stats through this function? until i have this figured out i had <code>//</code> out the classes constructor.</p>\n\n<pre><code> class hero : public Stats {\n    //protected:\n\npublic:\n\n\n\n    void raceAndClass() {\n\n        Stats S(10,10,10,10,10,10);\n        race c_race(race::orc, S);\n        //classes c_classes(classes::fighter, modStats, sneak, bluff, deplomacy, swim, mana, run);\n        using namespace std;\n        }\n};\n\n\nint main()\n{\n        hero H;\n        H.raceAndClass();\n        while (true);\n\n}\n</code></pre>\n\n<p>here is my next class stats</p>\n\n<pre><code>   class Stats {\n    public:\n        int //default stats\n            Str = 10,\n            Dex = 10,\n            Con = 10,\n            Int = 10,\n            Wis = 10,\n            Chr = 10;\n\n    Stats(int STR, int DEX, int CON, int INT, int WIS, int CHR) :\n        Str(STR), Dex(DEX), Con(CON), Int(INT), Wis(WIS), Chr(CHR) {\n    }\n};\n</code></pre>\n\n<p>my race cpp and header</p>\n\n<pre><code>  #include\"stats.h\"\n\nclass race {\npublic:\n    enum raceOpt { orc, elf, human };\n\n    race(raceOpt c_raceOpt, Stats &amp;stats);\n\n\n    //race opt outcomes \n    void ORC(Stats&amp; stats) {\n        stats.Str += 2;\n        stats.Int -= 2;\n        stats.Chr -= 2;\n    }\n    void ELF(Stats &amp;stats) {\n        //elf code and stat changes\n    }\n\n    void HUMAN(Stats &amp;stats) {\n\n\n}\n    };\n\n\n#include\"race.h\"\n\nrace::race(raceOpt c_raceOpt, Stats &amp;stats) {\n    switch (c_raceOpt) {\n    case orc:\n        ORC(stats);\n        break;\n    case human:\n        //human code\n        break;\n    case elf:\n        //elf code\n        break;\n    }\n}\n</code></pre>\n\n<p>and finally my classes cpp &amp; header.(not currently being called)</p>\n\n<pre><code>#include\"stats.h\"\n\nclass classes {\npublic:\n    enum classOpt { fighter, mage, soccerPlayer };\n\n    classes(classOpt c_classOpt, double ModStats[_MAX_PATH], int&amp; Sneak, int&amp; Bluff, int&amp; Deplomacy, int&amp; Swim, int&amp; Mana, int&amp; Run);\n\n    void Fighter(int&amp; SWIM, int&amp; RUN, int&amp; BLUFF, double ModStats[_MAX_PATH]) {\n        SWIM = static_cast&lt;int&gt;(SWIM + std::round(((ModStats[1] * 2.3))));\n        RUN = static_cast&lt;int&gt;(RUN + (std::round(((ModStats[1] * 2)))));\n        BLUFF = static_cast&lt;int&gt;(BLUFF + std::round(((ModStats[0] * 2.5))));\n\n    }\n    void Mage(int&amp; MANA, int&amp; DEPLOMACY, int&amp; BLUFF, double ModStats[_MAX_PATH]) {\n        //code to be added\n\n    }\n    void SoccerPlayer(int&amp; RUN, int&amp; SWIM, int&amp; DEPLOMACY, int&amp; SNEAK, double ModStats[_MAX_PATH]) {\n        //code to be added\n\n    }\n};\n\n#include\"classes.h\"\n\n\nclasses::classes(classOpt c_classOpt, double ModStats[_MAX_PATH], int&amp; Sneak, int&amp; Bluff, int&amp; Deplomacy, int&amp; Swim, int&amp; Mana, int&amp; Run) {\n    switch (c_classOpt) {\n    case fighter:\n        Fighter(Swim, Run, Bluff, ModStats);\n        break;\n    case mage:\n        Mage(Mana, Deplomacy, Bluff, ModStats);\n        break;\n    case soccerPlayer:\n        SoccerPlayer(Run, Swim, Deplomacy, Sneak, ModStats);\n        break;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "variadic-templates", "c++17", "template-meta-programming"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1510790942, "post_id": 47319300, "comment_id": 81590027, "body": "&quot;<i>As you can predict, func is supposed to carry out</i>&quot; Why would it do that?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1510791078, "post_id": 47319300, "comment_id": 81590068, "body": "And the error is...? And perhaps a reduced program demonstrating the error might be...?"}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1510791136, "post_id": 47319300, "comment_id": 81590085, "body": "Segmentation fault on clang, internal compiler error on GCC.  You can isolate the <code>call</code> function without the <code>Functor</code> class, though the syntax will be a lot uglier.  The same error occurs."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1510793451, "post_id": 47319300, "comment_id": 81590715, "body": "@ Barry   I think I isolated the problem and I described it at the top of my question.  I still don&#39;t know how to work around that."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1510798272, "post_id": 47319300, "comment_id": 81591955, "body": "I don&#39;t get any compiler segfault using clang++ 6.0.0 or ICE using g++ 5.4.0.  Though g++ errors on <code>Method m = Method{};</code> for some reason.  If I change that to <code>Method m{};</code>, it&#39;s fine.  (In both cases, the program segfaults when executed, as expected.)"}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 2, "last_activity_date": 1510798902, "creation_date": 1510798902, "answer_id": 47320521, "question_id": 47319300, "link": "https://stackoverflow.com/questions/47319300/compiler-cannot-handle-stdinvoke/47320521#47320521", "title": "Compiler cannot handle std::invoke", "body": "<p>Taking your smaller first example, note that <code>decltype(&amp;foo::process)</code> is the type called <code>void (foo::*)(int, char, bool)</code>.</p>\n\n<p>This type does <em>not</em> contain or imply any association with the original function <code>foo::process</code> itself.  Just like the type <code>int</code> doesn't let you get the value of some particular <code>int</code> elsewhere in your program, or the type <code>SomeClass</code> doesn't let you refer to a <code>SomeClass</code> object elsewhere in your program, the type alone doesn't carry a value or identity.</p>\n\n<p>The expression <code>Method{}</code> value-initializes this pointer to member type.  Which means the resulting value is a null pointer value.  Which means calling it is undefined behavior (and on many systems is likely to result in a segfault).</p>\n\n<p>If you're using C++17 mode, you could use a <code>template &lt;auto Method&gt;</code> non-type parameter and simply pass <code>&amp;foo::process</code> (without using <code>decltype</code>) as the template argument.  Some SFINAE techniques could enforce that the argument is actually a pointer to member function, and some helper traits could be used to get the class type and parameter list tuple.</p>\n\n<p>Or if you're using a standard earlier than C++17, you'll have to either make the function pointer a function argument, or make it a template parameter which follows the type, as in <code>template &lt;typename MethodType, MethodType Method&gt;</code>, then call as <code>thing&lt;decltype(&amp;foo::process), &amp;foo::process&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "is_accepted": false, "score": 0, "last_activity_date": 1510862236, "creation_date": 1510862236, "answer_id": 47338094, "question_id": 47319300, "link": "https://stackoverflow.com/questions/47319300/compiler-cannot-handle-stdinvoke/47338094#47338094", "title": "Compiler cannot handle std::invoke", "body": "<p>Thanks to aschepler's answer and advice to use <code>auto...</code> instead of <code>typename...</code> for the member function pointers, I was able to carry the original goal:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;functional&gt;  // std::invoke\n#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\nnamespace utilities {\n    template &lt;std::size_t N, auto I, auto... Is&gt;\n    struct nth_element : nth_element&lt;N - 1, Is...&gt; { };\n\n    template &lt;auto I, auto... Is&gt;\n    struct nth_element&lt;0, I, Is...&gt; {\n        static constexpr decltype(I) value = I;\n    };\n\n    template &lt;std::size_t N, typename Pack&gt; struct nth_index;\n\n    template &lt;std::size_t N, std::size_t... Is&gt;\n    struct nth_index&lt;N, std::index_sequence&lt;Is...&gt;&gt; : nth_element&lt;N, Is...&gt; { };\n\n    template &lt;std::size_t Skip, std::size_t Take, typename Tuple&gt;\n    auto extract_subtuple (const Tuple&amp;, std::enable_if_t&lt;(Take == 0)&gt;* = nullptr) {\n        return std::tuple&lt;&gt;();\n    }\n\n    template &lt;std::size_t Skip, std::size_t Take, typename Tuple&gt;\n    auto extract_subtuple (const Tuple&amp; tuple, std::enable_if_t&lt;(Take &gt; 0)&gt;* = nullptr) {\n        return std::tuple_cat (std::make_tuple(std::get&lt;Skip&gt;(tuple)), extract_subtuple&lt;Skip + 1, Take - 1&gt;(tuple));\n    }\n\n    template &lt;std::size_t N, typename Tuple&gt;\n    auto tuple_head (const Tuple&amp; tuple) {\n        return extract_subtuple&lt;0, N&gt;(tuple);   \n    }\n\n    template &lt;typename F, typename T, typename Tuple, std::size_t... Is&gt;\n    decltype(auto) invoke_with_tuple_h (F&amp;&amp; f, T&amp;&amp; t, Tuple&amp;&amp; tuple, std::index_sequence&lt;Is...&gt;&amp;&amp;) {\n        return std::invoke(std::forward&lt;F&gt;(f), std::forward&lt;T&gt;(t), std::get&lt;Is&gt;(std::forward&lt;Tuple&gt;(tuple))...);\n    }\n\n    template &lt;typename F, typename T, typename Tuple&gt;\n    decltype(auto) invoke_with_tuple (F&amp;&amp; f, T&amp;&amp; t, Tuple&amp;&amp; tuple) {\n        return invoke_with_tuple_h (std::forward&lt;F&gt;(f), std::forward&lt;T&gt;(t), std::forward&lt;Tuple&gt;(tuple), std::make_index_sequence&lt;std::tuple_size_v&lt;std::decay_t&lt;Tuple&gt;&gt;&gt;{});\n    }\n\n    template &lt;typename PartialSums, std::size_t Sum, std::size_t... Is&gt; struct all_partial_sums_h;\n\n    template &lt;std::size_t... PartialSums, std::size_t Sum&gt;\n    struct all_partial_sums_h&lt;std::index_sequence&lt;PartialSums...&gt;, Sum&gt; {\n        using type = std::index_sequence&lt;PartialSums..., Sum&gt;;\n        using type_without_last_sum = std::index_sequence&lt;PartialSums...&gt;;  // We define this because this is what we need actually.\n    };\n\n    template &lt;std::size_t... PartialSums, std::size_t Sum, std::size_t First, std::size_t... Rest&gt;\n    struct all_partial_sums_h&lt;std::index_sequence&lt;PartialSums...&gt;, Sum, First, Rest...&gt; :\n        all_partial_sums_h&lt;std::index_sequence&lt;PartialSums..., Sum&gt;, Sum + First, Rest...&gt; { };\n\n    template &lt;typename Pack&gt; struct all_partial_sums;\n\n    template &lt;std::size_t... Is&gt;\n    struct all_partial_sums&lt;std::index_sequence&lt;Is...&gt;&gt; : all_partial_sums_h&lt;std::index_sequence&lt;&gt;, 0, Is...&gt; { };\n\n    template &lt;typename Pack&gt; struct pack_size;\n\n    template &lt;template &lt;typename...&gt; class P, typename... Ts&gt;\n    struct pack_size&lt;P&lt;Ts...&gt;&gt; : std::integral_constant&lt;std::size_t, sizeof...(Ts)&gt; { };\n\n    template &lt;typename PackOfPacks&gt; struct get_pack_sizes;\n\n    template &lt;template &lt;typename...&gt; class P, typename... Packs&gt;\n    struct get_pack_sizes&lt;P&lt;Packs...&gt;&gt; {\n        using type = std::index_sequence&lt;pack_size&lt;Packs&gt;::value...&gt;;\n    };\n}\n\ntemplate &lt;typename Method&gt; struct method_traits;\n\ntemplate &lt;typename R, typename C, typename... Args&gt;\nstruct method_traits&lt;R(C::*)(Args...)&gt; {\n    using return_type = R;\n    using class_type = C;\n    using args_type = std::tuple&lt;Args...&gt;;  \n};\n\ntemplate &lt;typename Rs, typename Cs, typename ArgsPacks, auto... Members&gt; struct many_members_h;\n\ntemplate &lt;typename Rs, typename Cs, typename ArgsPacks&gt;\nstruct many_members_h&lt;Rs, Cs, ArgsPacks&gt; {\n    using return_types = Rs;\n    using classes = Cs;\n    using args_packs = ArgsPacks;\n};\n\ntemplate &lt;typename... Rs, typename... Cs, typename... ArgsPacks, auto F, auto... Rest&gt;\nstruct many_members_h&lt;std::tuple&lt;Rs...&gt;, std::tuple&lt;Cs...&gt;, std::tuple&lt;ArgsPacks...&gt;, F, Rest...&gt; :\n    many_members_h&lt;std::tuple&lt;Rs..., typename method_traits&lt;decltype(F)&gt;::return_type&gt;, std::tuple&lt;Cs..., typename method_traits&lt;decltype(F)&gt;::class_type&gt;, std::tuple&lt;ArgsPacks..., typename method_traits&lt;decltype(F)&gt;::args_type&gt;, Rest...&gt; { };\n\ntemplate &lt;auto... Members&gt;\nstruct many_members : many_members_h&lt;std::tuple&lt;&gt;, std::tuple&lt;&gt;, std::tuple&lt;&gt;, Members...&gt; { };\n\ntemplate &lt;auto... Members&gt;\nstruct Functor {\n    using m = many_members&lt;Members...&gt;;\n    using starting_points = typename utilities::all_partial_sums&lt;typename utilities::get_pack_sizes&lt;typename m::args_packs&gt;::type&gt;::type;\n\n    template &lt;typename... Args&gt;\n    typename m::return_types operator()(Args&amp;&amp;... args) const {\n        constexpr std::size_t M = sizeof...(Members);\n        auto t = std::make_tuple(std::forward&lt;Args&gt;(args)...);\n        auto objects = utilities::tuple_head&lt;M&gt;(t);\n        auto arguments = utilities::extract_subtuple&lt;M, sizeof...(Args) - M&gt;(t);\n        return call(objects, arguments, std::make_index_sequence&lt;M&gt;{});\n    }\nprivate:\n    template &lt;typename Tuple1, typename Tuple2, std::size_t... Is&gt;\n    auto call (Tuple1&amp; objects, const Tuple2&amp; args, std::index_sequence&lt;Is...&gt;&amp;&amp;) const {  // perfect forwarding to do later\n        return std::make_tuple(call_helper&lt;Is&gt;(objects, args)...);\n    }\n    template &lt;std::size_t N, typename Tuple1, typename Tuple2&gt;\n    auto call_helper (Tuple1&amp; objects, const Tuple2&amp; args) const {  // perfect forwarding to do later\n        constexpr std::size_t s = std::tuple_size_v&lt;std::tuple_element_t&lt;N, typename m::args_packs&gt;&gt;;;\n        constexpr std::size_t a = utilities::nth_index&lt;N, starting_points&gt;::value;\n        const auto args_tuple = utilities::extract_subtuple&lt;a, s&gt;(args);\n        return utilities::invoke_with_tuple (utilities::nth_element&lt;N, Members...&gt;::value, std::get&lt;N&gt;(objects), args_tuple);\n    }\n};\n\n// Testing\n#include &lt;iostream&gt;\n\nstruct Foo { int play (char c, bool b) { std::cout &lt;&lt; std::boolalpha &lt;&lt; \"Foo::play(\" &lt;&lt; c &lt;&lt; \", \" &lt;&lt; b &lt;&lt; \") called.\\n\";  return 3; }  };\nstruct Bar { double jump (int a, short b, float c) { std::cout &lt;&lt; \"Bar::jump(\" &lt;&lt; a &lt;&lt; \", \" &lt;&lt; b &lt;&lt; \", \" &lt;&lt; c &lt;&lt; \") called.\\n\";  return 5.8; } };\nstruct Baz { char run (double d) { std::cout &lt;&lt; \"Baz::run(\" &lt;&lt; d &lt;&lt; \") called.\\n\";  return 'b'; } };\n\nint main() {\n    Foo foo;  Bar bar;  Baz baz;\n    Functor&lt;&amp;Foo::play, &amp;Bar::jump, &amp;Baz::run&gt; func;\n    const auto tuple = func(foo, bar, baz, 'c', true, 5, 2, 4.5, 6.8);\n    std::cin.get();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Baz::run(6.8) called.\nBar::jump(5, 2, 4.5) called.\nFoo::play(c, true) called.\n</code></pre>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 47320521, "answer_count": 2, "score": -1, "last_activity_date": 1510862236, "creation_date": 1510789914, "last_edit_date": 1510797289, "question_id": 47319300, "link": "https://stackoverflow.com/questions/47319300/compiler-cannot-handle-stdinvoke", "title": "Compiler cannot handle std::invoke", "body": "<p>What is the problem with this?</p>\n\n<pre><code>struct foo {\n    void process(int, char, bool) {}    \n};\n\nfoo myfoo;\n\ntemplate &lt;typename Method&gt; struct thing {\n    void doit() {\n        Method m = Method{};\n        (myfoo.*m)(5, 'a', true);\n    }\n};\n\nint main() {\n    thing&lt;decltype(&amp;foo::process)&gt; t;\n    t.doit();\n}\n</code></pre>\n\n<p>I think this isolates the problem.  What is the workaround if I have to use the type <code>Method</code>, as in the case of my original post below?</p>\n\n<p><strong>Original post:</strong>\nIn the following attempted test:</p>\n\n<pre><code>struct Foo { int play (char, bool) {return 3;} };\nstruct Bar { double jump (int, short, float) {return 5.8;} };\nstruct Baz { char run (double) {return 'b';} };\n\nint main() {\n    Foo foo;  Bar bar;  Baz baz;\n    Functor&lt;decltype(&amp;Foo::play), decltype(&amp;Bar::jump), decltype(&amp;Baz::run)&gt; func;\n    func(foo, bar, baz, 'c', true, 5, 2, 4.5, 6.8);\n}\n</code></pre>\n\n<p>As you can predict, <code>func</code> is supposed to carry out</p>\n\n<pre><code>foo.play('c', true);  bar.jump(5, 2, 4.5);  baz.run(6.8);\n</code></pre>\n\n<p>My implementation of the <code>Functor</code> class so far (ignoring perfect forwarding and such for now) is</p>\n\n<pre><code>template &lt;typename... Members&gt;\nstruct Functor {\n    using m = many_members&lt;Members...&gt;;\n    template &lt;typename... Args&gt;\n    typename m::return_types operator()(Args... args) const { // perfect forwarding to do later\n        auto t = std::make_tuple(args...);\n        auto objects = utilities::tuple_head&lt;sizeof...(Members)&gt;(t);\n        auto arguments = utilities::extract_subtuple&lt;sizeof...(Members), sizeof...(Args) - sizeof...(Members)&gt;(t);\n        call(objects, arguments);  // Won't compile on GCC 7.2 or clang 6.0.\n    }\nprivate:\n    template &lt;typename Tuple1, typename Tuple2&gt;\n    auto call (Tuple1&amp; objects, const Tuple2&amp; args) const {\n        std::invoke(typename utilities::nth_element&lt;0, Members...&gt;::type{}, std::get&lt;0&gt;(objects), 'c', true);\n    }\n};\n</code></pre>\n\n<p>where my last line using <code>std::invoke</code> is just to test the concept before I continue.  It however will not compile on either GCC 7.2 or clang 6.0, so I cannot continue with the generalization.  Any workaround here, or a completely different implementation altogether?</p>\n\n<p>Here is everything I have so far:</p>\n\n<pre><code>namespace utilities {\n    template &lt;std::size_t N, typename... Ts&gt;\n    struct nth_element : std::tuple_element&lt;N, std::tuple&lt;Ts...&gt;&gt; { };\n\n    template &lt;std::size_t Skip, std::size_t Take, typename Tuple&gt;\n    auto extract_subtuple (const Tuple&amp;, std::enable_if_t&lt;(Take == 0)&gt;* = nullptr) {\n        return std::tuple&lt;&gt;();\n    }\n\n    template &lt;std::size_t Skip, std::size_t Take, typename Tuple&gt;\n    auto extract_subtuple (const Tuple&amp; tuple, std::enable_if_t&lt;(Take &gt; 0)&gt;* = nullptr) {\n        return std::tuple_cat (std::make_tuple(std::get&lt;Skip&gt;(tuple)), extract_subtuple&lt;Skip + 1, Take - 1&gt;(tuple));\n    }\n\n    template &lt;std::size_t N, typename Tuple&gt;\n    auto tuple_head (const Tuple&amp; tuple) {\n        return extract_subtuple&lt;0, N&gt;(tuple);   \n    }\n}\n\ntemplate &lt;typename Rs, typename Ts, typename ArgsPacks, typename AllArgs, typename... Members&gt; struct many_members_h;\n\ntemplate &lt;typename Rs, typename Ts, typename ArgsPacks, typename AllArgs&gt;\nstruct many_members_h&lt;Rs, Ts, ArgsPacks, AllArgs&gt; {\n    using return_types = Rs;\n    using classes = Ts;\n    using args_packs = ArgsPacks;\n    using all_args = AllArgs;\n};\n\ntemplate &lt;typename... Rs, typename... Ts, typename... ArgsPacks, typename... AllArgs, typename R, typename T, typename... Args, typename... Rest&gt;\nstruct many_members_h&lt;std::tuple&lt;Rs...&gt;, std::tuple&lt;Ts...&gt;, std::tuple&lt;ArgsPacks...&gt;, std::tuple&lt;AllArgs...&gt;, R(T::*)(Args...), Rest...&gt; :\n    many_members_h&lt;std::tuple&lt;Rs..., R&gt;, std::tuple&lt;Ts..., T&gt;, std::tuple&lt;ArgsPacks..., std::tuple&lt;Args...&gt;&gt;, std::tuple&lt;AllArgs..., Args...&gt;, Rest...&gt; { };\n\ntemplate &lt;typename... Members&gt;\nstruct many_members : many_members_h&lt;std::tuple&lt;&gt;, std::tuple&lt;&gt;, std::tuple&lt;&gt;, std::tuple&lt;&gt;, Members...&gt; { };\n\ntemplate &lt;typename... Members&gt;\nstruct Functor {\n    using m = many_members&lt;Members...&gt;;\n    template &lt;typename... Args&gt;\n    typename m::return_types operator()(Args... args) const { // perfect forwarding to do later\n        auto t = std::make_tuple(args...);\n        auto objects = utilities::tuple_head&lt;sizeof...(Members)&gt;(t);\n        auto arguments = utilities::extract_subtuple&lt;sizeof...(Members), sizeof...(Args) - sizeof...(Members)&gt;(t);\n        call(objects, arguments);  // Won't compile on GCC 7.2 or clang 6.0.\n    }\nprivate:\n    template &lt;typename Tuple1, typename Tuple2&gt;\n    auto call (Tuple1&amp; objects, const Tuple2&amp; args) const {\n        std::invoke(typename utilities::nth_element&lt;0, Members...&gt;::type{}, std::get&lt;0&gt;(objects), 'c', true);\n    }\n};\n\n// Testing\n#include &lt;iostream&gt;\n\nstruct Foo { int play (char, bool) {return 3;} };\nstruct Bar { double jump (int, short, float) {return 5.8;} };\nstruct Baz { char run (double) {return 'b';} };\n\nint main() {\n    Foo foo;  Bar bar;  Baz baz;\n    Functor&lt;decltype(&amp;Foo::play), decltype(&amp;Bar::jump), decltype(&amp;Baz::run)&gt; func;\n    func(foo, bar, baz, 'c', true, 5, 2, 4.5, 6.8);\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "events", "lambda", "timer"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510789948, "post_id": 47319261, "comment_id": 81589733, "body": "Try some blocking I/O before returning from main, for example <code>getch()</code>."}, {"owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510790061, "post_id": 47319261, "comment_id": 81589781, "body": "@BenVoigt what do you mean, explain?"}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510790190, "post_id": 47319261, "comment_id": 81589814, "body": "Since you are calling <code>detach()</code> on your thread, <code>main()</code> is not waiting for it and returns, destroying the thread immediately. Use <code>join()</code> to make <code>main()</code> wait for the thread to finish (and perhaps add a condition to break out of the <code>while</code> loop)."}, {"owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "reply_to_user": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510790371, "post_id": 47319261, "comment_id": 81589882, "body": "@cantordust could you explain how to do this? Sorry, I&#39;m not too experienced with C++..."}], "answers": [{"comments": [{"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "reply_to_user": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "edited": false, "score": 0, "creation_date": 1510791326, "post_id": 47319439, "comment_id": 81590124, "body": "Glad I could help. You should also look at <code>std::condition_variable</code> for communication between threads."}], "tags": [], "owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "is_accepted": true, "score": 0, "last_activity_date": 1510791001, "creation_date": 1510791001, "answer_id": 47319439, "question_id": 47319261, "link": "https://stackoverflow.com/questions/47319261/c-creating-an-event-repeatedly-called-by-timer/47319439#47319439", "title": "C++: creating an event repeatedly called by timer", "body": "<p>You need to wait for the thread to finish what it is doing, which is usually accomplished by calling <code>join()</code>. So maybe something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;chrono&gt;\n#include &lt;future&gt;\n#include &lt;cstdio&gt;\n\nusing namespace std;\n\nclass callBackTimer //no idea how this works, got it from Stack Overflow thread\n{\n\npublic:\n    callBackTimer()\n        :_execute(false)\n    {}\n\n    void setup(int interval, std::function&lt;void(void)&gt; func)\n    {\n        _execute = true;\n        thread = std::thread([=]()\n        {\n//          while (_execute)\n            for (int steps = 0; steps &lt; 100; ++steps)\n            {\n                func();\n                std::this_thread::sleep_for(std::chrono::milliseconds(interval));\n            }\n        });\n    }\n\n    void stop()\n    {\n        _execute = false;\n    }\n\n    void run()\n    {\n        thread.join();\n    }\n\nprivate:\n    bool _execute;\n    std::thread thread;\n\n};\n\nvoid timerExec()\n{\n    cout &lt;&lt; \"SNAFU\" &lt;&lt; endl;\n}\n\nint main(int argc, const char * argv[])\n{\n    callBackTimer timer; //declare the timer\n    std::function&lt;void(void)&gt; exec = timerExec; //declare a pointer to timerExec\n    timer.setup(25, std::bind(exec)); //start the timer\n    timer.run();\n\n    return 0;\n}\n</code></pre>\n\n<p>Calling <code>detach()</code> is OK, but you have to make <code>main()</code> wait for the thread manually. You also need a condition to break out of the <code>while</code> loop, otherwise it will go on forever. Hope that helps!</p>\n"}], "owner": {"reputation": 49, "user_id": 7983406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758383bb9868ae0d558471d3bd63aaf6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Simanski", "link": "https://stackoverflow.com/users/7983406/michael-simanski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 47319439, "answer_count": 1, "score": 0, "last_activity_date": 1510791001, "creation_date": 1510789697, "question_id": 47319261, "link": "https://stackoverflow.com/questions/47319261/c-creating-an-event-repeatedly-called-by-timer", "title": "C++: creating an event repeatedly called by timer", "body": "<p>I wanted to redo a Conway's Game of Life thing I did in Java, but this time use ncurses and C++. Obviously I need a timed event so I can run out the simulation at a rate which it can be viewed. Turns out it is a hell of a lot harder to make a timed event in C++ than it is in Java. I am not as experienced in C++ than I am in Java. I have already looked around online, and what I found led me to the code I have below. Upon executing it produces no result in the terminal. What exactly am I doing wrong?</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;chrono&gt;\n#include &lt;future&gt;\n#include &lt;cstdio&gt;\n\nusing namespace std;\n\nclass callBackTimer //no idea how this works, got it from Stack Overflow thread\n{\n\npublic:\n    callBackTimer()\n    :_execute(false)\n    {}\n\n    void start(int interval, std::function&lt;void(void)&gt; func)\n    {\n        _execute = true;\n        std::thread([=]()\n                    {\n                        while (_execute)\n                        {\n                            func();\n                            std::this_thread::sleep_for(\n                            std::chrono::milliseconds(interval));\n                        }\n                    }).detach();\n    }\n\n    void stop()\n    {\n        _execute = false;\n    }\n\nprivate:\n    bool _execute;\n\n};\n\nvoid timerExec()\n{\n    cout &lt;&lt; \"SNAFU\" &lt;&lt; endl;\n}\n\nint main(int argc, const char * argv[])\n{\n    callBackTimer timer; //declare the timer\n    std::function&lt;void(void)&gt; exec = timerExec; //declare a pointer to timerExec\n    timer.start(25, std::bind(exec)); //start the timer\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 1047683, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c4e6acbea8dfe8e7ff22543c02b261ef?s=128&d=identicon&r=PG", "display_name": "Jacky Chen", "link": "https://stackoverflow.com/users/1047683/jacky-chen"}, "edited": false, "score": 0, "creation_date": 1510850609, "post_id": 47324753, "comment_id": 81621251, "body": "Thanks for the answer. But I don&#39;t want to patch and change libgnu. There was a elfutils-portabiliy.patch for elfutils to solve this issue but this patch had disappeared since 0.164 version. Any idea to fix this compilation error? And I can&#39;t send email to elfutils-devel@sourceware.org. Where should I send email to ask question on elfutils?"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 127, "user_id": 1047683, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c4e6acbea8dfe8e7ff22543c02b261ef?s=128&d=identicon&r=PG", "display_name": "Jacky Chen", "link": "https://stackoverflow.com/users/1047683/jacky-chen"}, "edited": false, "score": 0, "creation_date": 1510853756, "post_id": 47324753, "comment_id": 81623369, "body": "You either need to apply something like this patch or compile on Linux or one of the supported BSDs."}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 2, "last_activity_date": 1510820529, "creation_date": 1510820529, "answer_id": 47324753, "question_id": 47319122, "link": "https://stackoverflow.com/questions/47319122/elfutils-compilation-error-implicit-function-declaration/47324753#47324753", "title": "elfutils compilation error implicit-function-declaration", "body": "<p>elfutils incorrectly uses <code>htobe64</code>, which is not in any standard and only available in glibc and a subset of the BSDs.</p>\n\n<p>Since you use GCC, you can use Ulf Hermann's patch to work around this issue:</p>\n\n<ul>\n<li><a href=\"https://sourceware.org/ml/elfutils-devel/2017-q2/msg00147.html\" rel=\"nofollow noreferrer\">Add replacement endian.h and byteswap.h to libgnu</a></li>\n</ul>\n\n<p>It adds an implementation of <code>htobe64</code> based on GCC built-in functions, so it is available when GCC is used as the compiler, independently of what the C library provides.</p>\n"}], "owner": {"reputation": 127, "user_id": 1047683, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c4e6acbea8dfe8e7ff22543c02b261ef?s=128&d=identicon&r=PG", "display_name": "Jacky Chen", "link": "https://stackoverflow.com/users/1047683/jacky-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1510820529, "creation_date": 1510788790, "question_id": 47319122, "link": "https://stackoverflow.com/questions/47319122/elfutils-compilation-error-implicit-function-declaration", "title": "elfutils compilation error implicit-function-declaration", "body": "<p>I downloaded elfutils 0.170 and 0.169, but can't use gcc to compile either of them because of implicit-function-declaration. I can't find any place in elfutils makefile which specifies -Werror or -Werror=implicit-function-declaration.  Any idea to fix this compilation error?</p>\n\n<p><a href=\"https://sourceware.org/elfutils/ftp/0.170/\" rel=\"nofollow noreferrer\">https://sourceware.org/elfutils/ftp/0.170/</a>\nMy steps</p>\n\n<p>1: bzip2 -d elfutils-0.170.tar.bz2\n2: tar -xvf elfutils-0.170.tar\n3: ./configure<br>\n4: make</p>\n\n<p>Then below errors show up.\nelf_compress_gnu.c: In function 'elf_compress_gnu':\nelf_compress_gnu.c:114:28: error: implicit declaration of function 'htobe64' [-Werror=implicit-function-declaration]\n       uint64_t be64_size = htobe64 (orig_size);\n                            ^\nelf_compress_gnu.c:163:15: error: implicit declaration of function 'be64toh' [-Werror=implicit-function-declaration]\n       gsize = be64toh (gsize);\n               ^\ncc1: all warnings being treated as errors</p>\n"}, {"tags": ["c++", "linux", "cross-compiling", "linker-errors", "win64"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1510787863, "post_id": 47318927, "comment_id": 81589055, "body": "The <code>__imp_XXX</code> tells you you are missing an import library. The ones you are missing are part of GDI32. When you use a DLL on Windows, there is a <code>*.lib</code> file that provides the DLL&#39;s exports, and then the DLL itself that provides the implementation. Th <code>*.lib</code> extension is the same extension as a static library, but it serves a different purpose. Can you (1) remove referenced to <code>gdi32.dll</code>, or (2) copy the import lib&#39;s from a Windows machine to your Debian machine?"}, {"owner": {"reputation": 815, "user_id": 495564, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/404c7306fb8dfb224fdebe0abb2898e0?s=128&d=identicon&r=PG", "display_name": "Gogeta70", "link": "https://stackoverflow.com/users/495564/gogeta70"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1510788317, "post_id": 47318927, "comment_id": 81589230, "body": "@jww Curious. I am using GDI functions in my code, so I do require the library. I thought the one provided by the debian package would be sufficient? I&#39;ll update my question to show the location of the gdi32 lib."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510788766, "post_id": 47318927, "comment_id": 81589365, "body": "You may be using the import library for 32-bit, to build a 64-bit binary you need 64-bit import libraries at link time, and 64-bit DLLs at runtime."}, {"owner": {"reputation": 815, "user_id": 495564, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/404c7306fb8dfb224fdebe0abb2898e0?s=128&d=identicon&r=PG", "display_name": "Gogeta70", "link": "https://stackoverflow.com/users/495564/gogeta70"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510789098, "post_id": 47318927, "comment_id": 81589472, "body": "@BenVoigt I ran <code>objdump -p libgdi32.a</code> and it tells me <code>file format pe-x86-64</code>. That would indicate that this is a 64-bit library, right?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510789709, "post_id": 47318927, "comment_id": 81589657, "body": "@Gogeta70: Yes, that looks ok.  And if you dump the exports from it (<code>objdump</code> or <code>x86_64-w64-mingw32-nm</code> or similar)?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510789838, "post_id": 47318927, "comment_id": 81589695, "body": "You might also try moving the <code>-l</code> options to the end of the command-line."}, {"owner": {"reputation": 815, "user_id": 495564, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/404c7306fb8dfb224fdebe0abb2898e0?s=128&d=identicon&r=PG", "display_name": "Gogeta70", "link": "https://stackoverflow.com/users/495564/gogeta70"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510790879, "post_id": 47318927, "comment_id": 81590012, "body": "@BenVoigt Moving the <code>-lgdi32</code> and other linker options to the end of the command did the trick! I find this very strange... Any explanation for this behavior?"}, {"owner": {"reputation": 1884, "user_id": 2747962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JbKoL.jpg?s=128&g=1", "display_name": "Darklighter", "link": "https://stackoverflow.com/users/2747962/darklighter"}, "edited": false, "score": 0, "creation_date": 1510791205, "post_id": 47318927, "comment_id": 81590098, "body": "have a look <a href=\"https://stackoverflow.com/a/409470/2747962\">here</a>"}], "owner": {"reputation": 815, "user_id": 495564, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/404c7306fb8dfb224fdebe0abb2898e0?s=128&d=identicon&r=PG", "display_name": "Gogeta70", "link": "https://stackoverflow.com/users/495564/gogeta70"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 649, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510790778, "creation_date": 1510787642, "last_edit_date": 1510790778, "question_id": 47318927, "link": "https://stackoverflow.com/questions/47318927/cross-compile-a-win64-binary-on-linux", "title": "Cross-compile a Win64 binary on Linux", "body": "<p>I'm trying to use the <code>x86_64-w64-mingw32-g++</code> utility to compile a Win64 binary on my Debian machine. I'm running into an issue with <code>undefined reference *</code> linker errors even though I'm passing the libraries to the linker:</p>\n\n<pre><code># /usr/bin/x86_64-w64-mingw32-g++ -lgdi32 -luser32 -lkernel32 -lcomctl32 -m64 -o main.exe main.cpp code.obj\n/tmp/ccSKB1pW.o:main.cpp:(.text+0x82a): undefined reference to `__imp_CreateCompatibleDC'\n/tmp/ccSKB1pW.o:main.cpp:(.text+0x847): undefined reference to `__imp_CreateCompatibleBitmap'\n/tmp/ccSKB1pW.o:main.cpp:(.text+0x85f): undefined reference to `__imp_SelectObject'\n/tmp/ccSKB1pW.o:main.cpp:(.text+0x871): undefined reference to `__imp_CreateSolidBrush'\n/tmp/ccSKB1pW.o:main.cpp:(.text+0x8da): undefined reference to `__imp_BitBlt'\n/tmp/ccSKB1pW.o:main.cpp:(.text+0x8ee): undefined reference to `__imp_SelectObject'\n/tmp/ccSKB1pW.o:main.cpp:(.text+0x8fe): undefined reference to `__imp_DeleteObject'\n/tmp/ccSKB1pW.o:main.cpp:(.text+0x90e): undefined reference to `__imp_DeleteDC'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I'm not able to find much information about this issue online. Any idea why it's not finding the symbols in the libraries?</p>\n\n<p>Edit: As far as I can tell, a GDI library was provided by the debian package:</p>\n\n<pre><code># dpkg -L mingw-w64-x86-64-dev | grep gdi32\n/usr/x86_64-w64-mingw32/lib/libgdi32.a\n</code></pre>\n\n<p>Additionally, I am able to find the symbols in the library file:</p>\n\n<pre><code># objdump -t /usr/x86_64-w64-mingw32/lib/libgdi32.a | grep CreateCompat\n[  7](sec  1)(fl 0x00)(ty   0)(scl   2) (nx 0) 0x0000000000000000 CreateCompatibleDC\n[  8](sec  5)(fl 0x00)(ty   0)(scl   2) (nx 0) 0x0000000000000000 __imp_CreateCompatibleDC\n[  7](sec  1)(fl 0x00)(ty   0)(scl   2) (nx 0) 0x0000000000000000 CreateCompatibleBitmap\n[  8](sec  5)(fl 0x00)(ty   0)(scl   2) (nx 0) 0x0000000000000000 __imp_CreateCompatibleBitmap\n</code></pre>\n"}, {"tags": ["c++", "new-operator", "dynamic-memory-allocation", "allocation", "allocator"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1510788381, "post_id": 47318721, "comment_id": 81589254, "body": "Are you certain the error is on the labeled line? Your <code>vec_of_vec</code> constructor definitely requires a copy constructor."}, {"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1510789217, "post_id": 47318721, "comment_id": 81589513, "body": "Yes it is (complaining about X&#39;s constructor). I&#39;m curious why you think the example needs a copy ctor?"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 1, "creation_date": 1510789663, "post_id": 47318721, "comment_id": 81589645, "body": "btw, GCC 7.2 complains about <code>bits&#47;stl_uninitialized.h:275:25: error: no matching function for call to &#39;__gnu_cxx::__alloc_traits&lt;my_allocator&lt;X&gt;, X&gt;::construct(my_allocator&lt;X&gt;&amp;, X*, const X&amp;)&#39;</code> pointing at <code>vec_of_vec</code> constructor: <a href=\"https://wandbox.org/permlink/IDweYauHBP7XxEnW\" rel=\"nofollow noreferrer\">wandbox.org/permlink/IDweYauHBP7XxEnW</a>"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1510789967, "post_id": 47318721, "comment_id": 81589743, "body": "let&#39;s draw @aschepler attention to your question, as I&#39;m curious too"}, {"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 0, "creation_date": 1510789971, "post_id": 47318721, "comment_id": 81589746, "body": "It looks like gcc is trying to call my_allocator&lt;X&gt;::construct, which is supposed to be optional... I believe? <a href=\"http://en.cppreference.com/w/cpp/concept/Allocator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/concept/Allocator</a>"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1510790321, "post_id": 47318721, "comment_id": 81589861, "body": "hm, it does look like this <code>construct</code> tries to call copy constructor of <code>X</code>: <code>construct(my_allocator&lt;X&gt;&amp;, X*, const X&amp;)</code>: <a href=\"http://en.cppreference.com/w/cpp/memory/allocator_traits/construct\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/allocator_traits/construct</a>"}, {"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "reply_to_user": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1510790541, "post_id": 47318721, "comment_id": 81589934, "body": "@Gruffalo I think so as well. Based off Google&#39;s (great) allocator-guide : &quot;<i>This either invokes <code>::new (static_cast&lt;void *&gt;(c)) C(std::forward&lt;Args&gt;(args)...)</code>, or, <b>if Alloc defines a suitable member function</b>, <code>a.construct(c, std::forward&lt;Args&gt;(args)...)</code></i>&quot;. <a href=\"https://rawgit.com/google/cxx-std-draft/allocator-paper/allocator_user_guide.html\" rel=\"nofollow noreferrer\">rawgit.com/google/cxx-std-draft/allocator-paper/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 0, "creation_date": 1510791642, "post_id": 47319433, "comment_id": 81590194, "body": "I&#39;m not sure I understand what you mean by &quot;emptiness is runtime feature&quot;?  Are you implying an object needs a copy constructor when used in a vector? I&#39;m probably reading that wrong."}, {"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 0, "creation_date": 1510792348, "post_id": 47319433, "comment_id": 81590385, "body": "Here&#39;s an example where gcc outputs almost the same error as VS2015. <a href=\"https://wandbox.org/permlink/syIqOafbQV7lwYQD\" rel=\"nofollow noreferrer\">wandbox.org/permlink/syIqOafbQV7lwYQD</a> I still don&#39;t understand why this is happening, so I&#39;ll keep the question open while I dig. Ty for the answer though! edit: Clang still compiles like a champ :)"}, {"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 0, "creation_date": 1510792602, "post_id": 47319433, "comment_id": 81590461, "body": "Ah! Ok I think I understand with your fix. GCC and VS are copying <i>that</i> inner vector 10 times, and as such need X&#39;s copy constructor. Clang does... magic? O_o This is problematic when you have a stateful allocator like me. I actually need to pass the allocator as an object."}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 0, "creation_date": 1510792794, "post_id": 47319433, "comment_id": 81590495, "body": "you can \u2018std::generate\u2019 your values"}, {"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 0, "creation_date": 1510793141, "post_id": 47319433, "comment_id": 81590633, "body": "Here&#39;s what I&#39;ve come up with. I&#39;ll check out <code>std::generate</code> though, I&#39;ve never used it. <a href=\"https://wandbox.org/permlink/dI0pCerZx1pbqIm7\" rel=\"nofollow noreferrer\">wandbox.org/permlink/dI0pCerZx1pbqIm7</a>"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 1, "creation_date": 1510793785, "post_id": 47319433, "comment_id": 81590835, "body": "btw, I tried to make your allocator statefull, and here what I got: <a href=\"https://wandbox.org/permlink/LENDvsX1XSifbaz7\" rel=\"nofollow noreferrer\">wandbox.org/permlink/LENDvsX1XSifbaz7</a>. clang doesn&#39;t copy it 10 times so anyway it doesn&#39;t look like what you need"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 1, "creation_date": 1510794581, "post_id": 47319433, "comment_id": 81591058, "body": "added solution for stateful allocator"}, {"owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "edited": false, "score": 0, "creation_date": 1510801607, "post_id": 47319433, "comment_id": 81592855, "body": "Thx for taking the time to add another solution, you rock! :D"}], "tags": [], "owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "is_accepted": true, "score": 1, "last_activity_date": 1510794570, "last_edit_date": 1510794570, "creation_date": 1510790939, "answer_id": 47319433, "question_id": 47318721, "link": "https://stackoverflow.com/questions/47318721/reference-to-vector-element-in-allocator-aware-class-calls-copy-constructor/47319433#47319433", "title": "Reference to vector element in allocator aware class calls copy constructor", "body": "<p>GCC error sheds light on what's going on, potentially same in VS2015 case.</p>\n\n<pre><code>In file included from memory:65,\n                 from prog.cc:2:\nbits/stl_uninitialized.h: In instantiation of '_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, _Allocator&amp;) [with _InputIterator = __gnu_cxx::__normal_iterator&lt;const X*, std::vector&lt;X, my_allocator&lt;X&gt; &gt; &gt;; _ForwardIterator = X*; _Allocator = my_allocator&lt;X&gt;]':\nbits/stl_vector.h:454:31:   required from 'std::vector&lt;_Tp, _Alloc&gt;::vector(const std::vector&lt;_Tp, _Alloc&gt;&amp;) [with _Tp = X; _Alloc = my_allocator&lt;X&gt;]'\nbits/alloc_traits.h:250:4:   required from 'static std::_Require&lt;std::__and_&lt;std::__not_&lt;typename std::allocator_traits&lt;_Alloc&gt;::__construct_helper&lt;_Tp, _Args&gt;::type&gt;, std::is_constructible&lt;_Tp, _Args ...&gt; &gt; &gt; std::allocator_traits&lt;_Alloc&gt;::_S_construct(_Alloc&amp;, _Tp*, _Args&amp;&amp; ...) [with _Tp = std::vector&lt;X, my_allocator&lt;X&gt; &gt;; _Args = {const std::vector&lt;X, my_allocator&lt;X&gt; &gt;&amp;}; _Alloc = my_allocator&lt;std::vector&lt;X, my_allocator&lt;X&gt; &gt; &gt;; std::_Require&lt;std::__and_&lt;std::__not_&lt;typename std::allocator_traits&lt;_Alloc&gt;::__construct_helper&lt;_Tp, _Args&gt;::type&gt;, std::is_constructible&lt;_Tp, _Args ...&gt; &gt; &gt; = void]'\nbits/alloc_traits.h:344:16:   required from 'static decltype (std::allocator_traits&lt;_Alloc&gt;::_S_construct(__a, __p, (forward&lt;_Args&gt;)(std::allocator_traits::construct::__args)...)) std::allocator_traits&lt;_Alloc&gt;::construct(_Alloc&amp;, _Tp*, _Args&amp;&amp; ...) [with _Tp = std::vector&lt;X, my_allocator&lt;X&gt; &gt;; _Args = {const std::vector&lt;X, my_allocator&lt;X&gt; &gt;&amp;}; _Alloc = my_allocator&lt;std::vector&lt;X, my_allocator&lt;X&gt; &gt; &gt;; decltype (std::allocator_traits&lt;_Alloc&gt;::_S_construct(__a, __p, (forward&lt;_Args&gt;)(std::allocator_traits::construct::__args)...)) = void]'\nbits/stl_uninitialized.h:351:25:   required from '_ForwardIterator std::__uninitialized_fill_n_a(_ForwardIterator, _Size, const _Tp&amp;, _Allocator&amp;) [with _ForwardIterator = std::vector&lt;X, my_allocator&lt;X&gt; &gt;*; _Size = long unsigned int; _Tp = std::vector&lt;X, my_allocator&lt;X&gt; &gt;; _Allocator = my_allocator&lt;std::vector&lt;X, my_allocator&lt;X&gt; &gt; &gt;]'\nbits/stl_vector.h:1466:33:   required from 'void std::vector&lt;_Tp, _Alloc&gt;::_M_fill_initialize(std::vector&lt;_Tp, _Alloc&gt;::size_type, const value_type&amp;) [with _Tp = std::vector&lt;X, my_allocator&lt;X&gt; &gt;; _Alloc = my_allocator&lt;std::vector&lt;X, my_allocator&lt;X&gt; &gt; &gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = long unsigned int; std::vector&lt;_Tp, _Alloc&gt;::value_type = std::vector&lt;X, my_allocator&lt;X&gt; &gt;]'\nbits/stl_vector.h:421:9:   required from 'std::vector&lt;_Tp, _Alloc&gt;::vector(std::vector&lt;_Tp, _Alloc&gt;::size_type, const value_type&amp;, const allocator_type&amp;) [with _Tp = std::vector&lt;X, my_allocator&lt;X&gt; &gt;; _Alloc = my_allocator&lt;std::vector&lt;X, my_allocator&lt;X&gt; &gt; &gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = long unsigned int; std::vector&lt;_Tp, _Alloc&gt;::value_type = std::vector&lt;X, my_allocator&lt;X&gt; &gt;; std::vector&lt;_Tp, _Alloc&gt;::allocator_type = my_allocator&lt;std::vector&lt;X, my_allocator&lt;X&gt; &gt; &gt;]'\nprog.cc:59:42:   required from 'vec_of_vec&lt;T, Allocator&gt;::vec_of_vec(const Allocator&amp;) [with T = X; Allocator = my_allocator&lt;X&gt;]'\nprog.cc:76:46:   required from here\nbits/stl_uninitialized.h:275:25: error: no matching function for call to '__gnu_cxx::__alloc_traits&lt;my_allocator&lt;X&gt;, X&gt;::construct(my_allocator&lt;X&gt;&amp;, X*, const X&amp;)'\n      __traits::construct(__alloc, std::__addressof(*__cur), *__first);```\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/IDweYauHBP7XxEnW\" rel=\"nofollow noreferrer\">Wandbox</a></p>\n\n<p>if we go from bottom to top we see:</p>\n\n<ul>\n<li><code>vec_of_vec</code> constructor</li>\n<li><code>fill</code>ing <code>vector&lt;vector&gt;</code> by 10 copies of empty inner vector</li>\n<li>construction of copies</li>\n</ul>\n\n<p>Despite of the fact that inner vector is empty, its copy constructor requires that the type it contains is copy-constructible.</p>\n\n<p>P.S.</p>\n\n<p>I don't know how clang overcomes this. Potentially it recognises that <code>vector&lt;vector&gt;</code> if filled with default value (if constructor with passed allocator instance still qualifies as default) and so instead of copying uses default construction</p>\n\n<p>EDIT:</p>\n\n<p>To fix the error replace</p>\n\n<pre><code>vec_of_vec(const Allocator&amp; alloc = Allocator{})\n        : data(10, std::vector&lt;T, Allocator&gt;{ alloc },\n                  OuterAlloc{ alloc }) {\n\n    for (int i = 0; i &lt; 10; ++i) {\n        data[i].resize(42);\n    }\n}\n</code></pre>\n\n<p>by</p>\n\n<pre><code>vec_of_vec(const Allocator&amp; alloc = Allocator{})\n{\n    data.resize(10); // here we don't `fill` it by copies but default-construct 10 instances\n    for (int i = 0; i &lt; 10; ++i) {\n        data[i].resize(42);\n    }\n}\n</code></pre>\n\n<p>or version for stateful allocator:</p>\n\n<pre><code>vec_of_vec(const Allocator&amp; alloc = Allocator{}):\n    data(OuterAlloc(alloc))\n{\n    for (int i = 0; i &lt; 10; ++i) {\n        data.emplace_back(alloc);\n        data.back().resize(42);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "accepted_answer_id": 47319433, "answer_count": 1, "score": 3, "last_activity_date": 1510851496, "creation_date": 1510786512, "last_edit_date": 1592644375, "question_id": 47318721, "link": "https://stackoverflow.com/questions/47318721/reference-to-vector-element-in-allocator-aware-class-calls-copy-constructor", "title": "Reference to vector element in allocator aware class calls copy constructor", "body": "<p>I have a class that contains a vector of vector. It is allocator aware. When trying to call the <code>operator[]</code> to store elements in a reference, Visual Studio 2015 fails to compile, AppleClang (latest) is fine with it.</p>\n<p>I am unsure whether this is a bug or not, which compiler is right, or if there is some undefined behaviour somewhere in my code.</p>\n<p>Here is a concise example, with everything as simple as possible.</p>\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;memory&gt;\n#include &lt;new&gt;\n#include &lt;vector&gt;\n\n/* Allocator */\ntemplate &lt;class T&gt;\nstruct my_allocator {\n    typedef T value_type;\n    my_allocator() = default;\n\n    template &lt;class U&gt;\n    constexpr my_allocator(const my_allocator&lt;U&gt;&amp;) noexcept {\n    }\n\n    T* allocate(std::size_t n) {\n        if (n &gt; std::size_t(-1) / sizeof(T))\n            throw std::bad_alloc();\n        if (auto p = static_cast&lt;T*&gt;(std::malloc(n * sizeof(T))))\n            return p;\n        throw std::bad_alloc();\n    }\n\n    void deallocate(T* p, std::size_t) noexcept {\n        std::free(p);\n    }\n};\n\ntemplate &lt;class T, class U&gt;\nbool operator==(const my_allocator&lt;T&gt;&amp;, const my_allocator&lt;U&gt;&amp;) {\n    return true;\n}\ntemplate &lt;class T, class U&gt;\nbool operator!=(const my_allocator&lt;T&gt;&amp;, const my_allocator&lt;U&gt;&amp;) {\n    return false;\n}\n\n/* Example Element */\nstruct X {\n    X() = default;\n    X(X&amp;&amp;) = default;\n    X&amp; operator=(X&amp;&amp;) = default;\n\n    X(const X&amp;) = delete;\n    X&amp; operator=(const X&amp;) = delete;\n\n    int test = 42;\n};\n\n/* Example Container Class */\ntemplate &lt;class T, class Allocator = std::allocator&lt;T&gt;&gt;\nstruct vec_of_vec {\n    using OuterAlloc = typename std::allocator_traits&lt;\n            Allocator&gt;::template rebind_alloc&lt;std::vector&lt;T, Allocator&gt;&gt;;\n\n    vec_of_vec(const Allocator&amp; alloc = Allocator{})\n            : data(10, std::vector&lt;T, Allocator&gt;{ alloc },\n                      OuterAlloc{ alloc }) {\n\n        for (int i = 0; i &lt; 10; ++i) {\n            data[i].resize(42);\n        }\n    }\n\n    std::vector&lt;T, Allocator&gt;&amp; operator[](size_t i) {\n        return data[i];\n    }\n\n    std::vector&lt;std::vector&lt;T, Allocator&gt;, OuterAlloc&gt; data;\n};\n\n/* Trigger Error */\nint main(int, char**) {\n    my_allocator&lt;X&gt; alloc;\n    vec_of_vec&lt;X, my_allocator&lt;X&gt;&gt; test(alloc);\n\n    X&amp; ref_test = test[0][0]; // &lt;-- Error Here!\n    printf(&quot;%d\\n&quot;, ref_test.test);\n\n    return 0;\n}\n</code></pre>\n<p>VS tries to use the copy constructor of X.</p>\n<blockquote>\n<p>error C2280: 'X::X(const X &amp;)': attempting to reference a deleted function</p>\n<p>function main.cpp(42): note: see declaration of 'X::X'</p>\n</blockquote>\n<p>Is there something I am missing with the use of allocators and allocator_traits?</p>\n"}, {"tags": ["c++", "binary-tree", "exc-bad-access"], "comments": [{"owner": {"reputation": 428, "user_id": 5923576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/96pUL.jpg?s=128&g=1", "display_name": "kvr", "link": "https://stackoverflow.com/users/5923576/kvr"}, "edited": false, "score": 0, "creation_date": 1510786234, "post_id": 47318610, "comment_id": 81588495, "body": "Please share the exception details"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1510786324, "post_id": 47318610, "comment_id": 81588527, "body": "<code>tree[0] </code> doesn&#39;t exist."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 8734624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84da1bdb6bc5f9f27c21657402c14972?s=128&d=identicon&r=PG&f=1", "display_name": "arnavlohe15", "link": "https://stackoverflow.com/users/8734624/arnavlohe15"}, "edited": false, "score": 0, "creation_date": 1510792182, "post_id": 47319092, "comment_id": 81590346, "body": "my professor told me that if I simply pick an index and assign it a value, the vector automatically handles the dynamic allocation and creates empty cells up until that index. I don&#39;t know if this is right or not, but it was something I was told somewhere. Thanks for the suggestion, though"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 113, "user_id": 8734624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84da1bdb6bc5f9f27c21657402c14972?s=128&d=identicon&r=PG&f=1", "display_name": "arnavlohe15", "link": "https://stackoverflow.com/users/8734624/arnavlohe15"}, "edited": false, "score": 0, "creation_date": 1510818551, "post_id": 47319092, "comment_id": 81598993, "body": "Never trust such dubious suggestions, but check out yourself, for example the excellent documentation provided at the link in my answer."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 0, "last_activity_date": 1510788620, "creation_date": 1510788620, "answer_id": 47319092, "question_id": 47318610, "link": "https://stackoverflow.com/questions/47318610/c-exc-bad-access-binary-tree/47319092#47319092", "title": "C++ EXC_BAD_ACCESS (Binary Tree)", "body": "<p>There are various places in your code where you try to access non-existent <code>vector</code> elements via <a href=\"http://en.cppreference.com/w/cpp/container/vector/operator_at\" rel=\"nofollow noreferrer\"><code>std::vector::operator[]</code></a>, which will never throw an exception, but instead may crash if you're attempting to access out-of-bounds elements. For a start, you could use <code>std::vector::at()</code> instead, which is similar but does throw an exception (rather than crash) giving you more information.</p>\n\n<p>You seem to lack fundamental understanding of how <code>std::vector</code> works and is meant to be used. For example, in the constructor of <code>binarytree</code>, you should instead of</p>\n\n<pre><code>tree[0] = sentinel;\n</code></pre>\n\n<p>have</p>\n\n<pre><code>tree.push_back(sentinel);\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 8734624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84da1bdb6bc5f9f27c21657402c14972?s=128&d=identicon&r=PG&f=1", "display_name": "arnavlohe15", "link": "https://stackoverflow.com/users/8734624/arnavlohe15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1510788620, "creation_date": 1510785893, "question_id": 47318610, "link": "https://stackoverflow.com/questions/47318610/c-exc-bad-access-binary-tree", "title": "C++ EXC_BAD_ACCESS (Binary Tree)", "body": "<p>My class assignment is to create a binary tree, and I decided to use a vector of nodes to do so. When I try to run my code, I keep getting a process 11 bad access error, and my IDE/debugger (CLion) always highlights my class declaration for nodes. The code is below. Can anyone tell me why exactly I keep getting this error? Where is the invalid memory access happening?</p>\n\n<pre><code>//Genghis Khan\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\n//Creating node class and initializing tree vector\nclass node\n{\npublic:\n    int key;\n    double balance;\n    string name;\n    friend class binarytree;\n    bool visited; //for use in traversal\n};\n\nclass binarytree\n{\npublic:\nvector&lt;node&gt; tree;\nint index; //index to iterate through the tree\n\n//Constructor\nbinarytree()\n{\n    node sentinel;\n    sentinel.key = 0;\n    sentinel.balance = 0;\n    sentinel.name = \"\";\n    sentinel.visited = false;\n    tree[0] = sentinel;\n}\n\n//Empty\nbool empty()\n{\n    return(tree.size() == 1);\n}\n\n//set temp to root\nvoid set()\n{\n    index = 1;\n}\n\n//create a new node\n/*node create()\n{\n    node *v = new node;\n    cout &lt;&lt; \"Enter name: \";\n    getline(cin, v-&gt;name);\n    cout &lt;&lt; \"Enter balance: \";\n    cin &gt;&gt; v-&gt;balance;\n    cout &lt;&lt; \"Enter key: \";\n    cin &gt;&gt; v-&gt;key;\n    return(*v);\n}*/\n\n//return left child for an index\nint leftchild(int a)\n{\n    return(a*2);\n}\n\n//return right child for an index\nint rightchild(int a)\n{\n    return(a*2+1);\n}\n//whether a node is a leaf\nbool isleaf(int a)\n{\n    //if there are no nodes at tree[a]'s left and right children, a is a leaf\n    try\n    {\n        cout &lt;&lt; tree[leftchild(a)].key;\n        cout &lt;&lt; tree[rightchild(a)].key;\n    }\n    catch(const std::invalid_argument)\n    {\n        return true;\n    }\n    return false;\n}\n\n//insert\nvoid insert(node a)\n{\n    while(!isleaf(index))\n    {\n        if(empty())\n        {\n            tree[1] = a; //set root to index 1\n        }\n        else\n        {\n            if(a.key &lt; tree[index].key)\n            {\n                index = index * 2;\n                insert(tree[index]);\n            }\n            else if(a.key &gt; tree[index].key)\n            {\n                index = index * 2 + 1;\n                insert(tree[index]);\n            }\n        }\n    }\n    tree[index] = a;\n}\n\n//visit\nvoid visit(node a)\n{\n    cout &lt;&lt; a.name &lt;&lt; endl;\n    cout &lt;&lt; a.balance &lt;&lt; endl;\n    cout &lt;&lt; a.key &lt;&lt; endl;\n}\n\n//inorder\nvoid inorder(int a) //will only pass root to this function\n{\n    if(!isleaf(a))\n    {\n        inorder(leftchild(a));\n        visit(tree[a]);\n        inorder(rightchild(a));\n    }\n}\n\n};\n\nint main()\n{\n    int n;\n    cout &lt;&lt; \"How many people would you like to enter: \";\n    cin &gt;&gt; n;\n\n    binarytree b;\n    node *v = new node;\n    for(int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; \"Enter name: \";\n        getline(cin, v-&gt;name);\n        cout &lt;&lt; \"Enter balance: \";\n        cin &gt;&gt; v-&gt;balance;\n        cout &lt;&lt; \"Enter key: \";\n        cin &gt;&gt; v-&gt;key;\n        b.set();\n        b.insert(*v);\n    }\n\n    for(int j = 0; j &lt; b.tree.size(); j++)\n    {\n        cout &lt;&lt; b.tree[j].key &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5", "qtsql", "qsqltablemodel"], "answers": [{"comments": [{"owner": {"reputation": 452, "user_id": 3296093, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Vfcdo.png?s=128&g=1", "display_name": "mekkanizer", "link": "https://stackoverflow.com/users/3296093/mekkanizer"}, "edited": false, "score": 0, "creation_date": 1510791200, "post_id": 47319440, "comment_id": 81590097, "body": "wait, but I didn&#39;t use setData to insert, I used it to set the values in a freshly inserted row. I call insertRow before setData"}, {"owner": {"reputation": 452, "user_id": 3296093, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Vfcdo.png?s=128&g=1", "display_name": "mekkanizer", "link": "https://stackoverflow.com/users/3296093/mekkanizer"}, "edited": false, "score": 0, "creation_date": 1510791322, "post_id": 47319440, "comment_id": 81590123, "body": "if it&#39;s impossible to use insertRow(s) however, I fully accept that. Just give any link to prove that and I&#39;ll switch to using insertRecord"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 452, "user_id": 3296093, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Vfcdo.png?s=128&g=1", "display_name": "mekkanizer", "link": "https://stackoverflow.com/users/3296093/mekkanizer"}, "edited": false, "score": 1, "creation_date": 1510791332, "post_id": 47319440, "comment_id": 81590128, "body": "Is that you do not have to use setData not insertRow, you just have to use insertRecord, this method calls the previous ones internally."}, {"owner": {"reputation": 452, "user_id": 3296093, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Vfcdo.png?s=128&g=1", "display_name": "mekkanizer", "link": "https://stackoverflow.com/users/3296093/mekkanizer"}, "edited": false, "score": 0, "creation_date": 1510791392, "post_id": 47319440, "comment_id": 81590140, "body": "I see now. I don&#39;t need to delete ID however, since it&#39;s not auto incremented. I wil lchange that detail. Thank you for clarification of what-calls-what"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 452, "user_id": 3296093, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Vfcdo.png?s=128&g=1", "display_name": "mekkanizer", "link": "https://stackoverflow.com/users/3296093/mekkanizer"}, "edited": false, "score": 0, "creation_date": 1510791464, "post_id": 47319440, "comment_id": 81590152, "body": "@mekkanizer Okay, in my case if I did it, it was just a plus. :P"}, {"owner": {"reputation": 19680, "user_id": 562222, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jgGXb.jpg?s=128&g=1", "display_name": "qed", "link": "https://stackoverflow.com/users/562222/qed"}, "edited": false, "score": 0, "creation_date": 1531864408, "post_id": 47319440, "comment_id": 89753500, "body": "Don&#39;t forget to submit: <code>if(model.insertRecord(-1, record)){         model-&gt;submitAll();     }</code>, otherwise the changes will not be saved."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 4, "last_activity_date": 1584970253, "last_edit_date": 1584970253, "creation_date": 1510791003, "answer_id": 47319440, "question_id": 47318601, "link": "https://stackoverflow.com/questions/47318601/inserting-row-into-qsqltablemodel/47319440#47319440", "title": "Inserting row into QSqlTableModel", "body": "<p>To insert a row to <code>QSqlTableModel</code> you should not use <code>setData()</code> directly, if you must not use <code>insertRecord()</code>, where you indicate the row and the <code>QSqlRecord</code>. The <code>QSqlRecord</code> can be obtained through the <code>record()</code> method of the model.</p>\n\n<pre><code>InsertDialog dial;\nif(dial.exec()== InsertDialog::Accepted){\n    db.transaction();\n    QString f = dial.firstname();\n    QString l = dial.lastname();\n\n    QSqlRecord record = model.record();\n    /* since the id field has the autoincrement attribute,\n     * it is not necessary to indicate its value,\n     * that is because this field of the request is removed.\n    */\n    record.remove(record.indexOf(\"id\"))\n    record.setValue(\"firstname\", f);\n    record.setValue(\"lastname\", l);\n    /*-1 is set to indicate that it will be added to the last row*/\n    if(model.insertRecord(-1, record)){\n        qDebug()&lt;&lt;\"successful insertion\";\n        model-&gt;submitAll();\n    }\n    else{\n        db.rollback();\n    }\n}\n</code></pre>\n\n<p><sup>In the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/questions/47318601\" rel=\"nofollow noreferrer\">link</a> you will find an example.</sup></p>\n"}], "owner": {"reputation": 452, "user_id": 3296093, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Vfcdo.png?s=128&g=1", "display_name": "mekkanizer", "link": "https://stackoverflow.com/users/3296093/mekkanizer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4499, "favorite_count": 0, "accepted_answer_id": 47319440, "answer_count": 1, "score": 1, "last_activity_date": 1584970253, "creation_date": 1510785821, "last_edit_date": 1510792164, "question_id": 47318601, "link": "https://stackoverflow.com/questions/47318601/inserting-row-into-qsqltablemodel", "title": "Inserting row into QSqlTableModel", "body": "<p>When a row is going to be edited, an index is passed into the editing dialogue.<br>\nThe edit works fine.<br>\nWhen I want to add a row, I don't pass an index to the dialogue constructor, so it knows that it's supposed to add a new row.<br>\nHere's the code of function reacting to dialogue's buttons</p>\n\n<pre><code>void DialogAddCl::on_buttonBox_clicked(QAbstractButton *button)\n{\n    // prepare\n    m-&gt;database().transaction();\n    QString debugstr;\n    auto chi4 = ui-&gt;buttonBox-&gt;buttonRole(button);\n    int rowCount = m-&gt;rowCount();\n    switch (chi4) {\n    case QDialogButtonBox::AcceptRole:\n        if (!ind-&gt;isValid())\n            // insert\n            if (!m-&gt;insertRow(rowCount, *ind))\n            {\n                QMessageBox::critical (this, \"Error inserting into model\", m-&gt;lastError().text(), QMessageBox::Cancel);\n                break;\n            }\n            else\n            {\n                m-&gt;setData(m-&gt;index(rowCount, 0), rowCount+1);\n            }\n        else\n        {\n            // update\n            rowCount = ind-&gt;row();\n        }\n        m-&gt;setData(m-&gt;index(rowCount, 1), ui-&gt;name-&gt;text());\n        m-&gt;setData(m-&gt;index(rowCount, 2), ui-&gt;addr-&gt;text());\n        // 12 other setData() calls\n\n        if (m-&gt;submitAll())\n        {\n            m-&gt;database().commit();\n        }\n        else\n        {\n            // rollback if error\n            m-&gt;database().rollback();\n            debugstr = QString(m-&gt;database().lastError().text());\n            QMessageBox::critical (this, \"Database returned an error\",\n                                   m-&gt;database().lastError().text(), QMessageBox::Cancel);\n        }\n    case QDialogButtonBox::RejectRole:\n        this-&gt;close();\n        break;\n    case QDialogButtonBox::ResetRole:\n        fillFields();\n        break;\n    default:\n        break;\n    }\n\n}\n</code></pre>\n\n<p>Here's a piece of dialogaddcl.h:</p>\n\n<pre><code>private:\n    Ui::DialogAddCl *ui;\n    QSqlTableModel* m;\n    QModelIndex* ind;\n</code></pre>\n\n<p>So, <code>m-&gt;submitAll()</code> works fine if I edit an existing record, and fails if I try to submit freshly inserted row. I have checked with debugging, <code>setData()</code> calls work fine even when adding, so it's not DB expecting <code>NOT NULL</code> fields and giving an error.<br>\nBy the way, maybe somebody can point out a method to catch the actual error text? I tried with <code>debugstr</code>, but it always only contains empty string. So does the error message that I print</p>\n"}, {"tags": ["c++", "opengl", "gpu"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 2, "creation_date": 1510788410, "post_id": 47318538, "comment_id": 81589260, "body": "<a href=\"https://en.wikipedia.org/wiki/Mesa_(computer_graphics)#Software_renderer\" rel=\"nofollow noreferrer\">Mesa</a>."}], "answers": [{"tags": [], "owner": {"reputation": 920, "user_id": 8108125, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d73c63113cdabd2357f32a9808bd0559?s=128&d=identicon&r=PG&f=1", "display_name": "Cpp plus 1", "link": "https://stackoverflow.com/users/8108125/cpp-plus-1"}, "is_accepted": true, "score": 4, "last_activity_date": 1510785626, "creation_date": 1510785626, "answer_id": 47318566, "question_id": 47318538, "link": "https://stackoverflow.com/questions/47318538/can-opengl-calls-run-without-a-gpu-present/47318566#47318566", "title": "Can opengl calls run without a GPU present?", "body": "<p>Yes, if it all just depends on whether or not the vendor of the device bothered to write OpenGL drivers for his or her system. All OpenGL functions can be implemented without a graphics card, but with a performance penalty, of course.</p>\n"}, {"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 4, "last_activity_date": 1510830381, "creation_date": 1510830381, "answer_id": 47328063, "question_id": 47318538, "link": "https://stackoverflow.com/questions/47318538/can-opengl-calls-run-without-a-gpu-present/47328063#47328063", "title": "Can opengl calls run without a GPU present?", "body": "<p>Strictly speaking OpenGL is not a <em>library</em> but only a programming interface (API). The specific details of how this API is implemented on a particular machine are left open and are at the disposal of the system implementors. It might be a software rasterizer, it might be an interface to dedicated hardware.</p>\n\n<p>OpenGL has been part of the ABI (i.e. the set of things that applications can be sure of to be available on a system) of Windows, LSB4/Desktop (Linux Standard Base / Desktop requirements) and MacOS. As such the system must make sure that there's always a some way to have at least a minimal set of OpenGL functionality (we're speaking OpenGL-1.x here), even if there's not hardware acceleration for it.</p>\n\n<p>It should be noted that all these ABIs are writting against the assumption, that it is used to render things to a display device:</p>\n\n<p>The Windows fallback software rasterizer implementation (which is horribly slow BTW) does allow rendering to GDI bitmaps, but does not have support for PBuffers; and don't even think about framebuffer objects.</p>\n\n<p>The Mesa software rasterizer is pretty much OpenGL-3.x feature complete.</p>\n"}], "owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1708, "favorite_count": 0, "accepted_answer_id": 47318566, "answer_count": 2, "score": 0, "last_activity_date": 1510830381, "creation_date": 1510785516, "question_id": 47318538, "link": "https://stackoverflow.com/questions/47318538/can-opengl-calls-run-without-a-gpu-present", "title": "Can opengl calls run without a GPU present?", "body": "<p>I know that opengl is a library that allows certain tasks/calls (like shading) to be executed on the GPU for faster computation (hardware accelerated). I've been reading on the internet about it and am wondering if calls to opengl will run without a GPU present. For example, someone on this forum (<a href=\"https://www.gamedev.net/forums/topic/638883-will-opengl-3d-games-run-in-a-pc-without-a-dedicated-video-card/\" rel=\"nofollow noreferrer\">https://www.gamedev.net/forums/topic/638883-will-opengl-3d-games-run-in-a-pc-without-a-dedicated-video-card/</a>) mentioned that it can run as a software emulation. Can anyone speak to this?</p>\n"}, {"tags": ["c++", "for-loop", "stdvector"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1510785636, "post_id": 47318510, "comment_id": 81588288, "body": "Have you debugged to find out which bit is causing a segfault?"}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 1, "creation_date": 1510785755, "post_id": 47318510, "comment_id": 81588325, "body": "What does <code>Decomp::decompose()</code> look like?"}, {"owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1510786462, "post_id": 47318510, "comment_id": 81588575, "body": "@John3136, I added the gdb output to the post"}, {"owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "reply_to_user": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510786507, "post_id": 47318510, "comment_id": 81588592, "body": "@cantordust I added the sources"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1510787610, "post_id": 47318510, "comment_id": 81588972, "body": "Obviously, your <code>Decomp::decompose(8)</code> does something different if it was called after <code>Decomp::decompose(n)</code> with <code>n=1,...7</code> than if it was called first thing. So, the bug is in this function somewhere. Though this is NOT a debugging service."}, {"owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "edited": false, "score": 0, "creation_date": 1510787779, "post_id": 47318510, "comment_id": 81589030, "body": "You&#39;re right, I&#39;ll try to investigate myself. The reason I posted the question was in case I missed something obvious. I&#39;ll delete the post if more people share the same sentiment."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1510787835, "post_id": 47318510, "comment_id": 81589050, "body": "Btw, it&#39;s very confusing to have a member <code>table()</code> and an automatic variable of the same name within a member function ..."}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510788070, "post_id": 47318510, "comment_id": 81589139, "body": "I&#39;d say one of your unsigned vars (probably <code>i</code>) reaches <code>0</code> and wraps around. Try adding a breakpoint, say, at the <code>while</code> loop and see what the value of <code>i</code> is at each iteration."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1510789278, "post_id": 47318510, "comment_id": 81589532, "body": "My guess was also an invalid array index. gdb is good if you can find it that way, or valgrind is another helpful option for this sort of thing."}, {"owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "reply_to_user": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510792359, "post_id": 47318510, "comment_id": 81590390, "body": "@cantordust and others, thanks for the good suggestions. The problem turned out to be quite trivial, see my anwer below."}], "answers": [{"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1510786467, "creation_date": 1510786467, "answer_id": 47318712, "question_id": 47318510, "link": "https://stackoverflow.com/questions/47318510/why-does-assigning-a-vector-from-a-factory-function-and-iterating-over-it-inside/47318712#47318712", "title": "Why does assigning a vector from a factory function and iterating over it inside a loop cause a segfault?", "body": "<p>Your problem is with <code>auto res = Decomp::decompose(n);</code> it returns a res object with junk values. Consider this output <code>8: [5 4 3 2 1 0 72405692564177152 72340172838076673.....</code> after 0 all are seems to be junk value. So put some condition and break loop <code>for (long long i: res)</code> or correct <code>Decomp::decompose(n)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510792778, "post_id": 47319630, "comment_id": 81590492, "body": "Glad you made it work. I would suggest using <code>std::vector&lt;bool&gt;(rows * cols, false)</code> to get an efficient array with all values initialised to <code>false</code>."}, {"owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "reply_to_user": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510793401, "post_id": 47319630, "comment_id": 81590696, "body": "@cantordust That would probably be for the best. As an added bonus I don&#39;t need to worry about freeing the memory afterwards :)"}, {"owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "reply_to_user": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510793967, "post_id": 47319630, "comment_id": 81590910, "body": "Actually, using a std::vector slows down the program a bit, especially for large <code>n</code> since the table (and the amount of indexing operations) grows as O(n^3)."}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510795442, "post_id": 47319630, "comment_id": 81591252, "body": "Interesting. <code>std::vector&lt;bool&gt;</code> should be optimised to occupy a single bit for each element. You could also try using <code>std::bitset</code>."}, {"owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "reply_to_user": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510798181, "post_id": 47319630, "comment_id": 81591930, "body": "It&#39;s strange indeed, std::vector should be about as fast as a regular array. When I first tried to use a vector, I passed it by value in the <code>backtrace</code> function. I later changed it to pass by reference, but the array implementation is still about three times faster than the vector implementation."}], "tags": [], "owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "is_accepted": false, "score": 0, "last_activity_date": 1510792295, "creation_date": 1510792295, "answer_id": 47319630, "question_id": 47318510, "link": "https://stackoverflow.com/questions/47318510/why-does-assigning-a-vector-from-a-factory-function-and-iterating-over-it-inside/47319630#47319630", "title": "Why does assigning a vector from a factory function and iterating over it inside a loop cause a segfault?", "body": "<p>After a debugging session, I found the problem: the <code>bool *table</code> variable was initialized to garbage values in this line: <code>bool *table = new bool[rows * cols];</code>. I expected this to initialize the bools to false. The nonzero garbage values tricked the program into thinking there was a solution for <code>n=8</code> and thus calling <code>backtrace</code>. However, <code>backtrace</code> only works when there is a solution. Otherwise the indexing operations will go out of bounds.</p>\n\n<p>I fixed it by calling the default constructor for <code>bool</code> in the table allocation, which sets the bools to false: <code>bool *table = new bool[rows * cols]();</code></p>\n\n<p>Thanks to cantordust for suggesting to try breakpoints.</p>\n"}], "owner": {"reputation": 9, "user_id": 8948051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5d69999f4a4ee9949a6b3f6a075858?s=128&d=identicon&r=PG&f=1", "display_name": "HDW", "link": "https://stackoverflow.com/users/8948051/hdw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1510792295, "creation_date": 1510785361, "last_edit_date": 1510787824, "question_id": 47318510, "link": "https://stackoverflow.com/questions/47318510/why-does-assigning-a-vector-from-a-factory-function-and-iterating-over-it-inside", "title": "Why does assigning a vector from a factory function and iterating over it inside a loop cause a segfault?", "body": "<p>I wrote a function that decomposes a number into a sequence of smaller numbers such that the sum of the squared sequence elements equals the square of the input number. The declaration of this function looks like this: <code>std::vector&lt;long long&gt; Decomp::decompose(long long n);</code>. To test the output of the function, I use the following <code>main</code> function:</p>\n\n<pre><code>int main()\n{\n    for (long long n = 1; n &lt;= 65; ++n)\n    {\n        auto res = Decomp::decompose(n);\n        if (res.empty())\n            std::cout &lt;&lt; n &lt;&lt; \": No solution.\\n\";\n        else\n        {\n            std::cout &lt;&lt; n &lt;&lt; \": [\";\n            for (long long i: res)\n                std::cout &lt;&lt; i &lt;&lt; ' ';\n            std::cout &lt;&lt; \"\\b]\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>However, this leads to a segmentation fault for <code>n=8</code>: </p>\n\n<pre><code>Output:\n1: No solution.\n2: No solution.\n3: No solution.\n4: No solution.\n5: [3 4]\n6: No solution.\n7: [2 3 6]\n8: [5 4 3 2 1 0 72405692564177152 72340172838076673 281474993553665 130961 139767842405240 139767842405240 4366240942559068160 72340172838076673 72340172838076673 282578800148737 1099511628033 256 72340168526266368 72340172838091928 72340172838076673 72340172838076673 72340172838076673 72340172838076673 72057594054770689 72340173837828353 72340172838076673 72340172838076673 72340172838076673 72340172838076673 72340172838076673 72405692564177153 72340172838076673 72340172838076673 72340172838076673 72340172838076673 72340172838076673 16843009 240 32 17817984 4 272 32 0 3 304 48 0 4 3 2 72339069014704384 130609 257 130593 0 0 0 0 0 0 282574488404224 72340168543109376 0 0 0 0 0 0 72339069031481344 72339073326448640 72058697861300225 257 0 0 0 0 72057598349672448 72058697861300225 72340172838011137 72058697861366017 282578783305985 65793 0 0 1103806595072 282578783305985 72340172821299457 282578800148737 72340168526332161 72340168543109376 72340172838076673 72339069031481600 282578800148481 72340168526332160 72340168543109376 72340172838076673 72339069031481600 72340172838076673 72340172838076673 72340172838076673 72340172838076673 72339069031481344 72339073326448641 72340172838076673 72057598349737985 72340172838076673 72340172838076673 72340172838076673 282578800148737 130145 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 (whole lot of zeros...)  Segmentation fault\n</code></pre>\n\n<p>I suspect something in above <code>main</code> function is causing the segfault, since the following <code>main</code> function seems to work fine:</p>\n\n<pre><code>int main()\n{\n    long long n = 8;\n    auto res = Decomp::decompose(n);\n    if (res.empty())\n        std::cout &lt;&lt; n &lt;&lt; \": No solution.\\n\";\n    else\n    {\n        std::cout &lt;&lt; n &lt;&lt; \": [\";\n        for (long long i: res)\n            std::cout &lt;&lt; i &lt;&lt; ' ';\n        std::cout &lt;&lt; \"\\b]\\n\";\n    }\n}\n\nOutput:\n8: No solution.\n</code></pre>\n\n<p>Edit: \ngdb says the following:</p>\n\n<pre><code>Core was generated by `./test'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x00000000004026e3 in main ()\n</code></pre>\n\n<p><code>Decomp::decompose</code> looks like this:</p>\n\n<pre><code>std::vector&lt;long long&gt; Decomp::decompose(long long n)\n{\n    if (n &lt;= 1)\n        return std::vector&lt;long long&gt;();\n\n    size_t rows = n - 1, cols = n * n + 1;\n    bool *table = new bool[rows * cols];\n    std::vector&lt;long long&gt; ret;\n\n    for (size_t i = 0; i &lt; rows; ++i)\n        table[i * cols] = true;\n\n    table[1] = true;\n\n    for (size_t i = 1; i &lt; rows; ++i)\n        for (size_t j = 1; j &lt; cols; ++j)\n        {\n            table[i * cols + j] = (j &lt; (i + 1) * (i + 1)) ? \n                                  table[(i - 1) * cols + j] :\n                                  table[(i - 1) * cols + j] ||\n                                  table[(i - 1) * cols + j - (i + 1) * (i + 1)];\n        }\n\n    if ( table[rows * cols - 1] )\n    {\n        backtrace(n, rows - 1, cols - 1, table, ret);\n        std::reverse(ret.begin(), ret.end());\n    }\n\n    delete[] table;\n    return ret;\n}\n</code></pre>\n\n<p><code>Decomp::backtrace</code> is a recursive function that extracts the sequence from the table created in <code>decompose</code>, just adding it here for reference:</p>\n\n<pre><code>bool Decomp::backtrace(long long n, size_t i, size_t j, bool table[], std::vector&lt;long long&gt; &amp;seq)\n{\n    if (std::inner_product(seq.begin(), seq.end(), seq.begin(), 0LL) == n * n)\n        return true;\n\n    size_t cols = n * n + 1;\n\n    if (table[i * cols + j])\n    {\n        if ((i + 1) * (i + 1) &lt;= j)\n        {\n            seq.push_back(i + 1);\n            if (backtrace(n, i - 1, j - (i + 1) * (i + 1), table, seq))\n                return true;\n\n            return backtrace(n, i - 1, j, table, seq);\n        }\n        else\n        {\n            while (table[i * cols + j] and (i + 1) * (i + 1) &gt; j)\n                --i;\n\n            if (table[i * cols + j])\n            {\n                seq.push_back(i + 1);\n\n                if (backtrace(n, i - 1, j - (i + 1) * (i + 1), table, seq))\n                    return true;\n\n                return backtrace(n, i - 1, j, table, seq);\n            }\n            else\n            {\n                std::cout &lt;&lt; \"case found\\n\";\n                seq.pop_back();\n                return false;\n            }\n        }\n    }\n    else\n    {\n        seq.pop_back();\n        return false;\n    }\n}\n</code></pre>\n\n<p>And the class header for reference:</p>\n\n<pre><code>public:\n    static std::vector&lt;long long&gt; decompose(long long n);\nprivate:\n    static bool backtrace(long long n, size_t i, size_t j, bool table[], std::vector&lt;long long&gt; &amp;seq);\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1510784854, "post_id": 47318363, "comment_id": 81587941, "body": "How would you use that, and what for?"}, {"owner": {"reputation": 1470, "user_id": 1072878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/15e4a648de45b3005f2f5b891f4e6242?s=128&d=identicon&r=PG", "display_name": "eXXXXXXXXXXX2", "link": "https://stackoverflow.com/users/1072878/exxxxxxxxxxx2"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1510785263, "post_id": 47318363, "comment_id": 81588125, "body": "@BaummitAugen. Very simple use-case is when you want to use some scalar type with extra value, e.g.: int + unknown value: <code>Storage&lt;1&gt;</code> and <code>Storage&lt;Unknown&gt;</code> where <code>Unknown</code> is just tag type. Most of the time <code>Storage</code> from integer literal would be enough, but sometimes we want to pass some special value/type."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1510785348, "post_id": 47318363, "comment_id": 81588163, "body": "Ok. The <code>integral_constant</code> stuff below should be what you need then."}], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510788997, "post_id": 47318417, "comment_id": 81589442, "body": "Upvote went for the idea how to avoid boilerplate. Nice."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 6, "last_activity_date": 1510784924, "creation_date": 1510784924, "answer_id": 47318417, "question_id": 47318363, "link": "https://stackoverflow.com/questions/47318363/type-and-non-type-template-parameters-to-use-interchangeably/47318417#47318417", "title": "Type and non-type template parameters to use interchangeably", "body": "<p>Nope, that is not possible. As a workaround, you could use <code>std::integral_constant</code> in order to pass values homogeneously as types.</p>\n\n<pre><code>template &lt;typename I&gt;\nstruct Foo {};\n\nint main()\n{\n    Foo&lt;int&gt; foo1;\n    Foo&lt;std::integral_constant&lt;int, 1&gt;&gt; foo2;\n}\n</code></pre>\n\n<p>With C++17, you can define </p>\n\n<pre><code>template &lt;auto I&gt;\nusing constant = std::integral_constant&lt;decltype(I), I&gt;;\n</code></pre>\n\n<p>to avoid some boilerplate.</p>\n"}], "owner": {"reputation": 1470, "user_id": 1072878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/15e4a648de45b3005f2f5b891f4e6242?s=128&d=identicon&r=PG", "display_name": "eXXXXXXXXXXX2", "link": "https://stackoverflow.com/users/1072878/exxxxxxxxxxx2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 47318417, "answer_count": 1, "score": 2, "last_activity_date": 1510784924, "creation_date": 1510784716, "question_id": 47318363, "link": "https://stackoverflow.com/questions/47318363/type-and-non-type-template-parameters-to-use-interchangeably", "title": "Type and non-type template parameters to use interchangeably", "body": "<p>Is it possible in C++ to declare some class so that it would be allowed to pass integer value or type as template parameter?</p>\n\n<p>Something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt;auto I&gt;\nstruct Foo {};\n\nint main()\n{\n    Foo&lt;int&gt; foo1;\n    Foo&lt;1&gt; foo2;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading", "inline", "functor"], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 4284157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e62b5fb0aa2e70e12e26c806af18c23f?s=128&d=identicon&r=PG&f=1", "display_name": "user198530", "link": "https://stackoverflow.com/users/4284157/user198530"}, "is_accepted": false, "score": 1, "last_activity_date": 1510784981, "creation_date": 1510784981, "answer_id": 47318426, "question_id": 47318098, "link": "https://stackoverflow.com/questions/47318098/c-functor-vs-inline-function-vs-operator-overload/47318426#47318426", "title": "C++ - functor vs inline function vs operator overload?", "body": "<p>Maybe i don't understand the question but if <em>this</em> refers to std::sort i would say it is a template function <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">ref</a></p>\n"}, {"tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": false, "score": 1, "last_activity_date": 1510785648, "creation_date": 1510785648, "answer_id": 47318571, "question_id": 47318098, "link": "https://stackoverflow.com/questions/47318098/c-functor-vs-inline-function-vs-operator-overload/47318571#47318571", "title": "C++ - functor vs inline function vs operator overload?", "body": "<blockquote>\n  <p>My question is, what is this? A functor, inline function, operator overload, or something else entirely?</p>\n</blockquote>\n\n<p>It is just a function, that got converted to a <a href=\"http://en.cppreference.com/w/cpp/language/pointer#Pointers_to_functions\" rel=\"nofollow noreferrer\">pointer to function</a>. A function pointer can be used in the function call operator, thus it can be used as a comparator for <code>std::sort</code>.</p>\n"}], "owner": {"reputation": 2254, "user_id": 4835204, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/283f32b9e64aece759dc7dd27305d396?s=128&d=identicon&r=PG&f=1", "display_name": "cdahms", "link": "https://stackoverflow.com/users/4835204/cdahms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 1, "closed_date": 1510795634, "answer_count": 2, "score": -1, "last_activity_date": 1510785648, "creation_date": 1510783537, "question_id": 47318098, "link": "https://stackoverflow.com/questions/47318098/c-functor-vs-inline-function-vs-operator-overload", "closed_reason": "Needs details or clarity", "title": "C++ - functor vs inline function vs operator overload?", "body": "<p>Based on various Stack Overflow posts, I put the following together in a license plate recognition program I did a while back:</p>\n\n<p>PossiblePlate.h:</p>\n\n<pre><code>(lines omitted)\n\nstd::string strChars;\n\n///////////////////////////////////////////////////////////////////////////////////////////////\nstatic bool sortDescendingByNumberOfChars(const PossiblePlate &amp;ppLeft, const PossiblePlate &amp;ppRight) {\n    return(ppLeft.strChars.length() &gt; ppRight.strChars.length());\n}\n\n(lines omitted)\n</code></pre>\n\n<p>Main.cpp</p>\n\n<pre><code>(lines omitted)\n\n// sort the vector of possible plates in descending order (most number of chars to least number of chars)\nstd::sort(vectorOfPossiblePlates.begin(), vectorOfPossiblePlates.end(), PossiblePlate::sortDescendingByNumberOfChars);\n\n(lines omitted)\n</code></pre>\n\n<p>Here is the repo if more context would be helpful:</p>\n\n<p><a href=\"https://github.com/MicrocontrollersAndMore/OpenCV_3_License_Plate_Recognition_Cpp\" rel=\"nofollow noreferrer\">https://github.com/MicrocontrollersAndMore/OpenCV_3_License_Plate_Recognition_Cpp</a></p>\n\n<p>This code is great for sorting a vector of objects in C++ based on any member variable, I've re-used it quite a few times since in various other projects.</p>\n\n<p>My question is, what is this?  A functor, inline function, operator overload, or something else entirely?  How could I determine the difference?</p>\n"}, {"tags": ["c++", "binary-search"], "comments": [{"owner": {"reputation": 5102, "user_id": 1054322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IhsyB.jpg?s=128&g=1", "display_name": "MatrixManAtYrService", "link": "https://stackoverflow.com/users/1054322/matrixmanatyrservice"}, "edited": false, "score": 2, "creation_date": 1510783044, "post_id": 47317897, "comment_id": 81587055, "body": "It&#39;s not immediately clear what your question is.  If you want to know why you&#39;re getting a segmentation fault, you might want to edit your question so that the sentence &quot;Why does this code produce a segmentation fault?&quot;  Also, you&#39;ve posted a significant amount of code.  You&#39;re more likely to get help if you construct the most minimal example possible that still shows the error."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 0, "last_activity_date": 1510783075, "creation_date": 1510783075, "answer_id": 47317978, "question_id": 47317897, "link": "https://stackoverflow.com/questions/47317897/uninitialised-value-was-created-by-a-stack-allocation-segmentation-fault/47317978#47317978", "title": "Uninitialised value was created by a stack allocation,segmentation fault", "body": "<p>This is because variable <code>fl</code> of type <code>linearFunction*</code> is uninitialized.</p>\n\n<p>You can change it to a non-pointer, and invoke with address-of operator:</p>\n\n<pre><code>linearFunction fl;\n...\ncheck(&amp;fl, low, high, expected_ans, message);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8864900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f72ec53d5ada69b0a8e36e5cd991185?s=128&d=identicon&r=PG&f=1", "display_name": "Ashley.W", "link": "https://stackoverflow.com/users/8864900/ashley-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 47317978, "answer_count": 1, "score": 0, "last_activity_date": 1510783075, "creation_date": 1510782645, "last_edit_date": 1510782960, "question_id": 47317897, "link": "https://stackoverflow.com/questions/47317897/uninitialised-value-was-created-by-a-stack-allocation-segmentation-fault", "title": "Uninitialised value was created by a stack allocation,segmentation fault", "body": "<p>I am writing to perform and test a binary search. The aim is to get the maximum x when y&lt;=0 for the function y=x-1, and the search range is [-2,2),obviously the answer should be 1.\nfor test part, I should test if the invocations of function f is less than the calculated max_invoke\na segmentation fault appeared, and when I valgrind it, the error is:</p>\n\n<pre><code>    ==126667== Use of uninitialised value of size 8\n    ==126667==    at 0x400C8A: binarySearchForZero(Function&lt;int, int&gt;*, int, \n    int) (in /home/jw562/ece551/092_tests_binsrch/test)\n    ==126667==    by 0x400DD5: check(Function&lt;int, int&gt;*, int, int, int, \n    char const*) (in /home/jw562/ece551/092_tests_binsrch/test)\n    ==126667==    by 0x400E81: main (in \n    /home/jw562/ece551/092_tests_binsrch/test)\n    ==126667==  Uninitialised value was created by a stack allocation\n    ==126667==    at 0x400E41: main (in \n    /home/jw562/ece551/092_tests_binsrch/test)\n</code></pre>\n\n<p>below is my code:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;cstdlib&gt;\n    #include &lt;cstdio&gt;\n    #include &lt;cmath&gt; \n\n    using namespace std;\n\n    template&lt;typename R, typename A&gt; \n    class Function {\n    public:\n      virtual R invoke(A arg) = 0;\n      virtual ~Function() {}\n    };\n\n    class CountedIntFn : public Function&lt;int,int&gt;{\n    protected:\n      unsigned remaining;\n      Function&lt;int,int&gt; * f;\n      const char * mesg;\n    public:\n      CountedIntFn(unsigned n, Function&lt;int,int&gt; * fn, const char * m): \n      remaining(n),f(fn),mesg(m) {}\n      virtual int invoke(int arg) {\n        if (remaining == 0) {\n          fprintf(stderr,\"Too many function invocations in %s\\n\", mesg);\n          exit(EXIT_FAILURE);\n      }\n      remaining--;\n      return f-&gt;invoke(arg);\n    }\n\n    class linearFunction : public Function&lt;int, int&gt; {\n      public:\n      virtual int invoke(int arg) {\n        int ans = arg-1;\n        return ans;\n      }\n      virtual ~linearFunction(){}\n    };\n\n    int binarySearchForZero(Function&lt;int, int&gt; * f, int low, int high){\n        if (high &lt;= low){\n            cout &lt;&lt; \"high less or equal than low\" &lt;&lt; endl;\n            return EXIT_FAILURE;\n        }\n        int low_ans = f-&gt;invoke(low);\n        int high_ans = f-&gt;invoke(high);\n        int mid = (high-low)/2+low;\n        int mid_ans = f-&gt;invoke(mid);\n        if (low_ans &gt; 0){\n             return low;//all positive\n        }\n        if (high_ans &lt; 0){\n             return high-1;//all negtive\n        }\n        if (low_ans = high_ans){\n             return low;//all zero\n        }\n        if (mid_ans &lt;= 0){\n             low = mid;\n        }\n        if (mid_ans &gt;= 0){\n             high = mid;\n        }\n        return binarySearchForZero(f,low,high);\n      }\n\n      void check(Function&lt;int,int&gt; * f,int low,int high,int \n      expected_ans,const char * mesg){\n        int max_invoke = 0;//the maximum number of invocations allowed\n        if (high &gt; low){\n           max_invoke = (int)(log2(high-low))+1;\n        }\n        else {\n           max_invoke = 1;\n        }  \n        CountedIntFn count(max_invoke,f,mesg);\n        int ans = binarySearchForZero(f,low,high);\n        if (ans != expected_ans){\n           cout &lt;&lt; \"wrong answer\" &lt;&lt;endl;\n        }\n      }\n\n      int main(void){\n         linearFunction *fl;\n         const char * message = \"linearFunction\";\n         int low = -2;\n         int high = 2;\n         int expected_ans = 1;\n         check(fl,low,high,expected_ans,message);\n         return EXIT_SUCCESS;\n      }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "weak-ptr", "data-representation"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1510782837, "post_id": 47317875, "comment_id": 81586937, "body": "<a href=\"http://en.cppreference.com/w/cpp/types/is_trivially_copyable#Notes\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/types/is_trivially_copyable#Notes</a> . <a href=\"http://en.cppreference.com/w/cpp/memory/weak_ptr/weak_ptr\" rel=\"nofollow noreferrer\"><code>std::weak_ptr</code></a> has nontrivial constructors, if I read it correctly."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1510783480, "post_id": 47317875, "comment_id": 81587245, "body": "@Justin The presence of non-trivial constructors isn\u2019t the issue, only the presence of non-trivial copy or move constructors. However, it\u2019s impossible for an implementation to have a trivial <code>std::weak_ptr</code> copy constructor, since copying a <code>weak_ptr</code> needs to modify the control block."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1511506320, "post_id": 47317875, "comment_id": 81889894, "body": "&quot;<i>Particularly is std::weak_ptr just a pointer to the control block of a std::shared_ptr</i>&quot; not &quot;is a&quot; but <b>contains a</b>"}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510783647, "post_id": 47317964, "comment_id": 81587333, "body": "There are other uses for raw buffers, like <code>optional</code> or <code>variant</code>. But it is at least a bit weird. If you really need to copy the <code>weak_ptr</code> into a buffer, though, the correct tool is placement new."}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510783722, "post_id": 47317964, "comment_id": 81587374, "body": "@DanielH A very good point! I will add this to the answer, thank you."}], "tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": true, "score": 5, "last_activity_date": 1510783886, "last_edit_date": 1510783886, "creation_date": 1510782993, "answer_id": 47317964, "question_id": 47317875, "link": "https://stackoverflow.com/questions/47317875/can-i-memcpy-stdweak-ptr/47317964#47317964", "title": "Can I memcpy std::weak_ptr?", "body": "<p>When all <code>std::shared_ptr</code> objects are gone, the control block still exists (that's how <code>std::weak_ptr</code>'s work), only the referenced object is deleted.</p>\n\n<p>Now, a C++ object can be safely copied via <code>std::memcpy</code> <a href=\"http://en.cppreference.com/w/cpp/string/byte/memcpy\" rel=\"nofollow noreferrer\">only if it is trivially copyable</a>. Checking the requirements of <a href=\"http://en.cppreference.com/w/cpp/concept/TriviallyCopyable\" rel=\"nofollow noreferrer\"><code>TriviallyCopyable</code></a> concept, we see that <code>std::weak_ptr</code> does not satisfy it due to having a non-trivial copy constructor. In fact, this constructor will increase the weak-pointers-counter inside the control block, so copying it with <code>std::memcpy</code> would break its invariants.</p>\n\n<p>To be honest, storing an <code>std::weak_ptr</code> in a raw buffer sounds like a terrible idea in usual code. Buffers are normally used for serialization, sending/writing data, etc, and all these tasks are nonsensical for a smart pointer. If, however, you are absolutely sure that you need to store it in a buffer, you need <a href=\"http://en.cppreference.com/w/cpp/language/new\" rel=\"nofollow noreferrer\">placement <code>new</code></a>:</p>\n\n<pre><code>std::weak_ptr&lt;T&gt; the_one_i_want_to_copy;\n\nstd::weak_ptr&lt;T&gt; * buffer = ...;\nnew (buffer) std::weak_ptr&lt;T&gt; { the_one_i_want_to_copy };\n</code></pre>\n\n<p>Notice the <code>(buffer)</code> after <code>new</code>: it tells <code>new</code> not to allocate the memory, but to use an already prepared place (thus <strong>place</strong>ment new). When preparing <code>buffer</code>, be sure to provide the required size and alignment.</p>\n"}], "owner": {"reputation": 1433, "user_id": 13115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/j6Qgs.png?s=128&g=1", "display_name": "Game_Overture", "link": "https://stackoverflow.com/users/13115/game-overture"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 47317964, "answer_count": 1, "score": -4, "last_activity_date": 1511510068, "creation_date": 1510782570, "last_edit_date": 1511510068, "question_id": 47317875, "link": "https://stackoverflow.com/questions/47317875/can-i-memcpy-stdweak-ptr", "title": "Can I memcpy std::weak_ptr?", "body": "<p>First off, what is the typical implementation of a <code>std::weak_ptr</code>? Particularly is <code>std::weak_ptr</code> just a pointer to the control block of a <code>std::shared_ptr</code>?</p>\n\n<p>If all the <code>std::shared_ptr</code> references are gone is the internal control block deleted? If so, how does <code>std::weak_ptr::expired()</code> function properly if that memory is re-purposed?</p>\n\n<hr>\n\n<p>I have an object that contains a <code>std::weak_ptr</code>, and I want to <code>memcpy</code> the object to a buffer to be processed later. Is doing so going to break the internal workings of the smart pointer in some way?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1510782625, "post_id": 47317822, "comment_id": 81586811, "body": "From <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms725500%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">MSDN</a>: <i>The data in the buffer pointed to by the lpString parameter consists of one or more null-terminated strings, followed by a final null character.</i> So you need 2 null chars at the end."}, {"owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1510782914, "post_id": 47317822, "comment_id": 81586985, "body": "@JohnnyMopp So you suggest That I add sthing like strBuffer +=&quot;\\0\\0&quot;; ??"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 4, "creation_date": 1510783063, "post_id": 47317822, "comment_id": 81587066, "body": "It&#39;s been a while since I used ini files, but it looks like you need <code>\\0</code> after each entry, and then another <code>\\0</code> after the last one."}, {"owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1510783254, "post_id": 47317822, "comment_id": 81587149, "body": "@JohnnyMopp: thx it works !!"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1510783687, "post_id": 47317822, "comment_id": 81587359, "body": "strBuffer +=&quot;\\0\\0&quot;; is triple null terminated"}], "answers": [{"tags": [], "owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "is_accepted": true, "score": 0, "last_activity_date": 1510829804, "creation_date": 1510829804, "answer_id": 47327846, "question_id": 47317822, "link": "https://stackoverflow.com/questions/47317822/writeprivateprofilesection-writes-with-extra-caracs/47327846#47327846", "title": "WritePrivateProfileSection writes with extra caracs", "body": "<p><code>string.c_str()</code> is already null-terminated, let's represent this as</p>\n\n<pre><code>{ 'H', 'i', '\\0' };\n</code></pre>\n\n<p>WritePrivateProfileSection expects multiple strings, separated by a single <code>'\\0'</code>, terminated by <code>'\\0\\0'</code>, e.g. for the two entries <code>x=1</code> and <code>y=2</code></p>\n\n<pre><code>{ 'x', '=', '1', '\\0', 'y', '=', '2', '\\0', '\\0' }\n</code></pre>\n\n<hr>\n\n<p>The problem with your code is </p>\n\n<pre><code>s += line;\n</code></pre>\n\n<p>which expects a zero-terminated string on the rhs. You could use:</p>\n\n<pre><code>int len = sprintf(buffer, \"%s=%d\\0\", key, value); // TODO! Check for error!\ns += std::string(line, len); // don't stop at the first '\\0'!\n</code></pre>\n\n<p>but at this point I'd use a <code>std::vector&lt;char&gt;</code> instead, since the std::string behavior seems too error-prone here, and we rely on the finer details of what constitutes a string. </p>\n"}], "owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 47327846, "answer_count": 1, "score": -1, "last_activity_date": 1510829804, "creation_date": 1510782345, "last_edit_date": 1510829149, "question_id": 47317822, "link": "https://stackoverflow.com/questions/47317822/writeprivateprofilesection-writes-with-extra-caracs", "title": "WritePrivateProfileSection writes with extra caracs", "body": "<p>I have a little problem that is driving me crazy. \nI have std::string that contains some data, which I wanna save in an INI file. </p>\n\n<p>So I did as below:</p>\n\n<pre><code>std::string strBuffer;\nchar line[MAX_BUFFER + 1];\n\nfor (int i=0; i &lt; NbrElts; i++)\n{\n    //Here I get pData filled with data \n\n    sprintf_s(line, \"%s%d=%s,%s,%s,%s,%s,%s,%s\", \"key\", i, pData-&gt;sType, pData-&gt;sId, pData-&gt;sName, pData-&gt;sCountry, pData-&gt;sSite, pData-&gt;sCDB, pData-&gt;sShortName);\n    strBuffer += line;\n}\n\nWritePrivateProfileSection(\"PERSONAL\", strBuffer.c_str(), GetMYFile());\n</code></pre>\n\n<p>so at this point, when I use debugger the content of my strBuffer is good, but when the <code>WritePrivateProfileSection</code> is executed I have extra caracters written into my file. </p>\n\n<p>I tried to use conversion before writing in the INI file but with no success. \nAny help what may be the clue? </p>\n\n<p>Thank you.</p>\n\n<hr>\n\n<p>Example :</p>\n\n<p>strBuffer contains <code>\"HELLO WORLD\"</code> and in my file I get <code>HELLO WORLD \u05e0\u05e0\u05e0</code></p>\n\n<blockquote>\n  <p>PS: Besides that I missed to add \"\\0\" after each key, the main problem comes from using std::string as it doesn't handle the null\n  termination, so even with adding the \"\\0\" I still got the messy output\n  ---> Have to change to char[].</p>\n</blockquote>\n"}, {"tags": ["c++", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 7592, "user_id": 2371054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gWrKl.jpg?s=128&g=1", "display_name": "mshildt", "link": "https://stackoverflow.com/users/2371054/mshildt"}, "is_accepted": false, "score": 0, "last_activity_date": 1510841119, "last_edit_date": 1510841119, "creation_date": 1510782788, "answer_id": 47317926, "question_id": 47317769, "link": "https://stackoverflow.com/questions/47317769/have-cmake-modify-object-files-before-linking-static-library/47317926#47317926", "title": "Have cmake modify object files before linking static library", "body": "<p>As far as I can tell I think the best you can do is specify a command to run on the entirety of the target, as opposed to just some of the target's object files. For example, to manually strip a static library you could do:</p>\n\n<pre><code>add_library(my_proj STATIC ${SOURCES})\nadd_custom_command(TARGET my_proj POST_BUILD\n    COMMAND objcopy -S $&lt;TARGET_FILE:my_proj&gt;\n    COMMENT \"Stripping my_proj\"\n)\n</code></pre>\n\n<p>Which will run objcopy on my_proj.a after it has been built. If you need finer granularity on which object files are operated on, I suggest you split up the library into a few smaller static libraries, and operate accordingly on each one.</p>\n"}], "owner": {"reputation": 43, "user_id": 1292404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0391c2effe152c5cd54f81d624f7f6df?s=128&d=identicon&r=PG", "display_name": "noiz77", "link": "https://stackoverflow.com/users/1292404/noiz77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1609393889, "creation_date": 1510782159, "last_edit_date": 1609393889, "question_id": 47317769, "link": "https://stackoverflow.com/questions/47317769/have-cmake-modify-object-files-before-linking-static-library", "title": "Have cmake modify object files before linking static library", "body": "<p>I am really new to cmake but I am trying to see if there is a way to modify object files that cmake has made before linking them into a static library.  My cmake file looks like this right now:</p>\n<pre><code>set(CMAKE_CXX_FLAGS  &quot;${CMAKE_CXX_FLAGS} -g&quot;)    \nset(SOURCES\n    file1.cpp \n    file2.cpp\n)\nadd_library(my_proj STATIC ${SOURCES})\nadd_custom_command(\n    TARGET my_proj \n    PRE_LINK\n    COMMAND &lt;run objcopy on some of the object files here&gt;\n    COMMENT &quot; Running PRE_LINK action &quot;\n)\n</code></pre>\n<p>I don't see a good way with cmake to get the object file names so that I can loop over some of them and strip out debug symbols from some while leaving debug symbols for other objects. This would then allow me to create a smaller static library with symbols added for only the objects I need.  Is there any cmake variable that can give me all the object file names so I could selectively call objcopy and strip out debug symbols for some of the object files?</p>\n"}, {"tags": ["c++", "c", "shared-libraries", "dlopen", "ldd"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1510782182, "post_id": 47317750, "comment_id": 81586606, "body": "can&#39;t you try libpython3.5m.so, then libpython3.4m.so, then libpython2.7.so... until it succeeds?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1510782899, "post_id": 47317750, "comment_id": 81586977, "body": "@Jean-Fran&#231;oisFabre I don&#39;t think it would work like that... you could load an incorrect library"}], "answers": [{"tags": [], "owner": {"reputation": 841, "user_id": 2272506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d910c6f729897b6af6fa867a794001?s=128&d=identicon&r=PG", "display_name": "Jesin", "link": "https://stackoverflow.com/users/2272506/jesin"}, "is_accepted": false, "score": 0, "last_activity_date": 1510798854, "creation_date": 1510798854, "answer_id": 47320507, "question_id": 47317750, "link": "https://stackoverflow.com/questions/47317750/check-c-shared-dependencies-at-runtime-ldd-on-self/47320507#47320507", "title": "Check C++ shared dependencies at runtime (ldd on self)", "body": "<p>On Linux, you can read <code>/proc/self/maps</code> or <code>/proc/self/map_files</code>, but this is not portable to other platforms.</p>\n"}, {"comments": [{"owner": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "edited": false, "score": 0, "creation_date": 1510925397, "post_id": 47320610, "comment_id": 81655537, "body": "It turns out to not be pointless when loading pybind11 plugins. If you don&#39;t call dlopen, then you can get into issues (e.g. can&#39;t find PyFloat_Type) when executing python code that imports modules like ctypes. I don&#39;t need to ever call <code>dlsym</code>. However, dl_iterate_phdr seems like exactly what I was looking for."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "edited": false, "score": 0, "creation_date": 1510931322, "post_id": 47320610, "comment_id": 81659595, "body": "@Erotemic Your explanation of what goes wrong makes no sense to me. If you are already linked against <code>libfoo.so</code>, then calling <code>dlopen(&quot;libfoo.so&quot;, RTLD_LAZY)</code> is surely a no-op. I&#39;d be curious to see a <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> where such <code>dlopen</code> makes a difference."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 2, "last_activity_date": 1510931462, "last_edit_date": 1510931462, "creation_date": 1510799672, "answer_id": 47320610, "question_id": 47317750, "link": "https://stackoverflow.com/questions/47317750/check-c-shared-dependencies-at-runtime-ldd-on-self/47320610#47320610", "title": "Check C++ shared dependencies at runtime (ldd on self)", "body": "<blockquote>\n  <p>I want to call <code>void *handle = dlopen(\"...\", ...)</code></p>\n</blockquote>\n\n<p>Presumably you want to then call <code>dlsym(handle, \"SomePythonSymbol\")</code>.</p>\n\n<p>That is a <em>pointless</em> thing to do. Instead of performing dynamic lookup, simply call the <code>SomePythonSymbol</code> directly.</p>\n\n<p>To answer your original \"what version of libpython am I linked to\" question, on a GLIBC-based system you can use <a href=\"http://man7.org/linux/man-pages/man3/dl_iterate_phdr.3.html\" rel=\"nofollow noreferrer\">dl_iterate_phdr</a> to enumerate all currently loaded shared libraries.</p>\n\n<p>If you already have a symbol that you know is defined in libpython, <a href=\"http://man7.org/linux/man-pages/man3/dladdr.3.html\" rel=\"nofollow noreferrer\">dladdr1</a> will make finding the library even easier.</p>\n"}], "owner": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 1, "accepted_answer_id": 47320610, "answer_count": 2, "score": 2, "last_activity_date": 1510931462, "creation_date": 1510782098, "question_id": 47317750, "link": "https://stackoverflow.com/questions/47317750/check-c-shared-dependencies-at-runtime-ldd-on-self", "title": "Check C++ shared dependencies at runtime (ldd on self)", "body": "<p>Is there a way to check or access the names of the libraries a C++ binary  is dynamically linked to within the binary itself?</p>\n\n<p>Essentially I want to run <code>ldd</code> on a binary, without running <code>ldd</code>. </p>\n\n<p>The use case is using <code>dlopen</code> from <code>dlfcn.h</code>. I have a C++ library which is linked to <code>libpython</code>, but I don't know if its <code>libpython3.5m.so</code>, <code>libpython3.4m.so</code>, <code>libpython2.7.so</code>, etc... </p>\n\n<p>I want to call </p>\n\n<pre><code>void* handle = dlopen( \"@PYTHON_LIBRARY@\", RTLD_LAZY | RTLD_GLOBAL );\n</code></pre>\n\n<p>where <code>\"@PYTHON_LIBRARY@\"</code> resolves to the path to whatever the current libpython the module is currently dynamically linked to. </p>\n\n<p>Is there any way to do this?</p>\n"}, {"tags": ["c++", "sorting", "stl"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 80284, "user_id": 13430, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QUCnD.png?s=128&g=1", "display_name": "Evan Teran", "link": "https://stackoverflow.com/users/13430/evan-teran"}, "edited": false, "score": 2, "creation_date": 1510782432, "post_id": 47317740, "comment_id": 81586723, "body": "@EvanTeran <code>A</code> has copy and move constructors. It&#39;s the assignment operators that are the problem for <code>std::swap</code>."}, {"owner": {"reputation": 80284, "user_id": 13430, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QUCnD.png?s=128&g=1", "display_name": "Evan Teran", "link": "https://stackoverflow.com/users/13430/evan-teran"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1510782516, "post_id": 47317740, "comment_id": 81586764, "body": "@aschepler thanks for the correction. I made sure to get it right when converting my comment to an answer :-)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1510782694, "post_id": 47317740, "comment_id": 81586852, "body": "<code>A(int id) : id(id) {}</code> this is not a good idea"}, {"owner": {"reputation": 63, "user_id": 8947831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a16175c44e7592fd83bd4d4ffbb22e4?s=128&d=identicon&r=PG&f=1", "display_name": "Koach", "link": "https://stackoverflow.com/users/8947831/koach"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1510822172, "post_id": 47317740, "comment_id": 81600937, "body": "@Slava Why not?"}], "answers": [{"tags": [], "owner": {"reputation": 80284, "user_id": 13430, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QUCnD.png?s=128&g=1", "display_name": "Evan Teran", "link": "https://stackoverflow.com/users/13430/evan-teran"}, "is_accepted": true, "score": 5, "last_activity_date": 1510842408, "last_edit_date": 1510842408, "creation_date": 1510782478, "answer_id": 47317853, "question_id": 47317740, "link": "https://stackoverflow.com/questions/47317740/sorting-a-vector-of-custom-objects-with-const-member/47317853#47317853", "title": "Sorting a vector of custom objects with const member", "body": "<p>Well, the way that sort is going to be implemented is that it will swap objects as needed. A class with a const member and no copy or move assignment operators is not going to be \"swappable\".</p>\n\n<p>I would probably make the <code>id</code> member private and non-const. Then I'd have it accessed via a getter (but not providing a setter). Making it logically const, but the class would be copyable.</p>\n\n<p>Something like this:</p>\n\n<pre><code>class A {\npublic:\n    A(int id) : id_(id) {}\n\n    bool operator&lt;(const A &amp;other) const {\n        return id_ &lt; other.id_;\n    }\n\n    int id() const { return id_; }\n\nprivate:\n    int id_;\n};\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 8947831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a16175c44e7592fd83bd4d4ffbb22e4?s=128&d=identicon&r=PG&f=1", "display_name": "Koach", "link": "https://stackoverflow.com/users/8947831/koach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "accepted_answer_id": 47317853, "answer_count": 1, "score": 6, "last_activity_date": 1510842408, "creation_date": 1510782067, "last_edit_date": 1510782254, "question_id": 47317740, "link": "https://stackoverflow.com/questions/47317740/sorting-a-vector-of-custom-objects-with-const-member", "title": "Sorting a vector of custom objects with const member", "body": "<p>I would like to sort a vector holding objects of a class with a <code>const</code> member variable.<br>\nUnfortunately, I get an error stating that there is <em>\"no matching function for call to \"swap\"\"</em>.  </p>\n\n<p>When I remove the <code>const</code> keyword for <strong><code>id</code></strong>, then <code>std::sort()</code> works with both the overloaded <code>operator&lt;()</code> and the custom compare function. </p>\n\n<p>Why is this the case? Can I in general not sort objects belonging to a class with a const member variable?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nstruct A\n{\n    const int id;\n    A(int id) : id(id) {}\n    bool operator&lt;(const A &amp;other) const\n    {\n        return id &lt; other.id;\n    }\n};\n\nbool cmp(const A &amp;lhs, const A &amp;rhs)\n{\n    return lhs.id &lt; rhs.id;\n}\n\nint main()\n{\n    vector&lt;A&gt; vec;\n    vec.emplace_back(3);\n    vec.emplace_back(0);\n    vec.emplace_back(2);\n    vec.emplace_back(1);\n    std::sort(vec.begin(), vec.end());\n    std::sort(vec.begin(), vec.end(), cmp);\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1510782125, "post_id": 47317709, "comment_id": 81586570, "body": "Show your code for constructing MyDialog object."}, {"owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "edited": false, "score": 2, "creation_date": 1510782151, "post_id": 47317709, "comment_id": 81586586, "body": "Why you dont use signal and slots?"}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510782217, "post_id": 47317709, "comment_id": 81586626, "body": "You have to store the pointer to the parent window in the child&#39;s instance. Otherwise the pointer is not accessible beyond the child&#39;s constructor."}, {"owner": {"reputation": 883, "user_id": 2574608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Whnyl.jpg?s=128&g=1", "display_name": "earth", "link": "https://stackoverflow.com/users/2574608/earth"}, "reply_to_user": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510782262, "post_id": 47317709, "comment_id": 81586645, "body": "@cantordust: Thanks. How do I do that?"}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1510782377, "post_id": 47317709, "comment_id": 81586689, "body": "Put a <code>MyApp* parent</code> data member in your <code>MyDialog</code> class and assign <code>parent</code> to it in the constructor."}, {"owner": {"reputation": 883, "user_id": 2574608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Whnyl.jpg?s=128&g=1", "display_name": "earth", "link": "https://stackoverflow.com/users/2574608/earth"}, "reply_to_user": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "edited": false, "score": 0, "creation_date": 1510861891, "post_id": 47317709, "comment_id": 81627991, "body": "Thank you, @CherkesgillerTural. I looked into using signals and slots and solved it. I have posted the answer below."}], "answers": [{"tags": [], "owner": {"reputation": 883, "user_id": 2574608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Whnyl.jpg?s=128&g=1", "display_name": "earth", "link": "https://stackoverflow.com/users/2574608/earth"}, "is_accepted": true, "score": 0, "last_activity_date": 1510861651, "creation_date": 1510861651, "answer_id": 47337928, "question_id": 47317709, "link": "https://stackoverflow.com/questions/47317709/accessing-a-public-member-function-from-a-child-windows-function/47337928#47337928", "title": "Accessing a public member function from a child window&#39;s function", "body": "<p>I wound up using signals and slots to solve this per Cherkesgiller Tural's <a href=\"https://stackoverflow.com/questions/47317709/accessing-a-public-member-function-from-a-child-windows-function?noredirect=1#comment81586586_47317709\">comment</a>. Here is what I did:</p>\n\n<p>In <code>mydialog.h</code>, I added the signal I wanted to emit: </p>\n\n<pre><code>signals:\n  void sendMySignal();\n</code></pre>\n\n<p>In <code>mydialog.cpp</code>, I had the <code>doStuff()</code> function emit my signal:</p>\n\n<pre><code>void doStuff() {\n  emit sendMySignal();\n}\n</code></pre>\n\n<p>In <code>myapp.h</code>, I added <code>myFunction</code> as a public slot and also created an instance of the myDialog:</p>\n\n<pre><code>public slots:\n  void myFunction();\n\n....\n\nprivate:\n  MyDialog myDialog;\n</code></pre>\n\n<p>In <code>myapp.cpp</code>, I added the <code>connect</code> line to the constructor:</p>\n\n<pre><code>connect(&amp;myDialog, SIGNAL(sendMySignal()), this, SLOT(myFunction()));\n</code></pre>\n\n<p>This <code>connect</code> listens for the <code>sendMySignal()</code> signal within the <code>myDialog</code> object. When the signal is emitted and it is received by <code>myApp app</code> (myapp.cpp), it runs the <code>myFunction()</code> function, just as I wanted.</p>\n\n<p>Thank you all for the help.</p>\n"}], "owner": {"reputation": 883, "user_id": 2574608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Whnyl.jpg?s=128&g=1", "display_name": "earth", "link": "https://stackoverflow.com/users/2574608/earth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 47337928, "answer_count": 1, "score": 0, "last_activity_date": 1510861651, "creation_date": 1510781906, "last_edit_date": 1510784642, "question_id": 47317709, "link": "https://stackoverflow.com/questions/47317709/accessing-a-public-member-function-from-a-child-windows-function", "title": "Accessing a public member function from a child window&#39;s function", "body": "<p>I need to call a parent public member function (<code>myFunction()</code>) from a child dialog function (<code>doStuff()</code>).  The code below more or less does what I need it to do, but I'm running into some issues. </p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include \"myapp.h\"\n\nint main(int argc, char* argv[])\n{\n  QApplication a(argc, argv);\n  myApp app;  // my main app window\n  app.show();\n  return a.exec();\n}\n</code></pre>\n\n<p><strong>myapp.h</strong></p>\n\n<pre><code>...\n\nclass MyApp : public QMainWindow\n{\n  Q_OBJECT\n\npublic:\n  explicit MyApp(QWidget* parent = 0);\n  void myFunction();\n\n...\n</code></pre>\n\n<p><strong>myapp.cpp</strong></p>\n\n<pre><code>...\n\nMyApp::MyApp(QWidget* parent)\n  : QMainWindow(parent)\n  {\n    // constructor\n  }\n\nMyApp::void myFunction() { \n// do some stuff \n}\n</code></pre>\n\n<p><strong>mydialog.h</strong></p>\n\n<pre><code>...\n\nclass MyDialog : public QDialog\n{\n  Q_OBJECT\n\npublic:\n  explicit MyDialog(QWidget* parent = 0);\n  ~MyDialog();\n\nprivate:\n  void doStuff();\n\n  ...\n</code></pre>\n\n<p><strong>mydialog.cpp</strong></p>\n\n<pre><code>MyDialog::MyDialog(QWidget* parent) :\n  QDialog(parent, QDialog().windowFlags() &amp; ~Qt::WindowContextHelpButtonHint)\n\n{\n  //constructor\n}\n\nvoid doStuff() {\n  ((MyApp*)(parent()))-&gt;myFunction(); // this crashes the application\n}\n</code></pre>\n\n<p>Ideally, what I would want to do instead of that cast (<code>((MyApp*)(parent()))-&gt;myFunction();</code>) is something like <code>app-&gt;myFunction()</code> since I have already created the <code>MyApp app</code> instance in <code>main.cpp</code>. What am I doing wrong here?</p>\n"}, {"tags": ["c++", "char", "string-literals"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 2, "creation_date": 1510781439, "post_id": 47317552, "comment_id": 81586230, "body": "s/<code>printBar(sym,size);</code>/<code>printBar(*sym,size);</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 6, "creation_date": 1510781550, "post_id": 47317552, "comment_id": 81586277, "body": "<code>char*</code> and <code>char</code> are different types."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1510781594, "post_id": 47317552, "comment_id": 81586295, "body": "You are passing a <i>pointer</i> to a character, not a single character.  Try <code>printBar(sym[0], size);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510781845, "post_id": 47317618, "comment_id": 81586417, "body": "why remove <code>const</code>? It doesnt hurt, or am I missing something?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510781951, "post_id": 47317618, "comment_id": 81586478, "body": "@tobi303 The argument is passed to the function by value. So the qualifier does not make great sense. These two function declarations void printBar( condt char symbol, int count); and void printBar(char symbol, int count); declare the same one function."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510782385, "post_id": 47317618, "comment_id": 81586694, "body": "It expresses that the parameter is not modified inside the function. Whether this makes sense is a matter of taste, I can understand your point of view. Btw I was really just confused for a second, but of course it does not make much difference concerning correctness"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510782509, "post_id": 47317618, "comment_id": 81586760, "body": "@tobi303 If in the function definition you will declare the parameter with the qualifier const then indeed within the function you may not change it. But this has nothing common with the original argument because the argument is passed to the function by value that is the function deals with a copy of the value of the argument. So for users of the function it is entirely unimportant whether the parameter that is a local variable of the function is changed or not within the function. The original argument in any case will be unchanged."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510782890, "post_id": 47317618, "comment_id": 81586971, "body": "yes, sorry for starting a discussion on a non-issue. When thinking about it, I am also in favor of removing the <code>const</code> because it is an implementation detail and just leads to confusion (and unnecessary discussions ;)"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1510783271, "last_edit_date": 1510783271, "creation_date": 1510781580, "answer_id": 47317618, "question_id": 47317552, "link": "https://stackoverflow.com/questions/47317552/print-character-in-a-for-loop-c/47317618#47317618", "title": "Print character in a for loop c++", "body": "<p>For starters there is a typo</p>\n\n<pre><code>const char* sym = \"*\":\n                    ^^^\n</code></pre>\n\n<p>There shall be a semicolon.</p>\n\n<p>The loop in the function should look like</p>\n\n<pre><code>void printBar(const char symbol, int count){\n    for (int i = 0; i &lt; count; i++){\n                    ^^^^^^^^^\n        cout &lt;&lt; symbol;\n    }\n}\n</code></pre>\n\n<p>And the qualifier const in the first parameter declaration may be removed.</p>\n\n<pre><code>void printBar(char symbol, int count){\n</code></pre>\n\n<p>If the variable <code>sym</code> declared like</p>\n\n<pre><code>const char* sym = \"*\":\n</code></pre>\n\n<p>then the function should be called like</p>\n\n<pre><code>printBar(*sym,size);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>printBar(sym[0],size);\n</code></pre>\n\n<p>that is you need to pass to the function just one character instead of the pointer.</p>\n\n<p>Another approach to write the function can look as it is shown in the demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nstd::ostream &amp; printBar( char symbol, size_t count, std::ostream &amp;os = std::cout )\n{\n    if ( count )\n    {\n        os &lt;&lt; std::setw( count ) &lt;&lt; std::setfill( symbol ) &lt;&lt; symbol; \n    }\n\n    return os;\n}\n\nint main() \n{\n    size_t size = 8;\n    const char *sym = \"*\";\n\n    printBar( *sym, size ) &lt;&lt; std::endl;    \n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>********\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 2, "last_activity_date": 1510781610, "creation_date": 1510781610, "answer_id": 47317621, "question_id": 47317552, "link": "https://stackoverflow.com/questions/47317552/print-character-in-a-for-loop-c/47317621#47317621", "title": "Print character in a for loop c++", "body": "<p>You should say what goes wriong. Errors, wrong output.... But I can guess</p>\n\n<p>First this loop is wrong</p>\n\n<pre><code>void printBar(const char symbol, int count){\n    for (int i = 0;i &lt;= count; i++){\n        cout &lt;&lt; symbol;\n    }\n}\n</code></pre>\n\n<p>it will print one too many char. You should have <code>i &lt; count</code></p>\n\n<p>Second your function needs a char, but you pass in a char*</p>\n\n<p>Do this</p>\n\n<pre><code>int main(){\n\nint size = 8;\nconst char sym = '*':\nprintBar(sym,size);\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7488033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VI8tn.jpg?s=128&g=1", "display_name": "Preston White", "link": "https://stackoverflow.com/users/7488033/preston-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1260, "favorite_count": 0, "closed_date": 1511048887, "accepted_answer_id": 47317621, "answer_count": 2, "score": 0, "last_activity_date": 1510783271, "creation_date": 1510781307, "last_edit_date": 1510782311, "question_id": 47317552, "link": "https://stackoverflow.com/questions/47317552/print-character-in-a-for-loop-c", "closed_reason": "Not suitable for this site", "title": "Print character in a for loop c++", "body": "<p>This is a pretty basic question as I am new to the C++ language but I have a program that takes a function to print a single character in a for loop. My code is shown below:</p>\n\n<pre><code>void printBar(const char symbol, int count){\n    for (int i = 0;i &lt;= count; i++){\n        cout &lt;&lt; symbol;\n    }\n}\n</code></pre>\n\n<p>and my main function is this:</p>\n\n<pre><code>int main(){\n    int size = 8;\n    const char* sym = \"*\":\n    printBar(sym,size);\n</code></pre>\n\n<p>I want my result to look like this:</p>\n\n<pre><code>********\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c++", "shared-ptr", "smart-pointers", "software-design"], "comments": [{"owner": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1510781606, "post_id": 47317531, "comment_id": 81586302, "body": "Is this for a game?"}, {"owner": {"reputation": 199, "user_id": 7292232, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-wc_R88lWqms/AAAAAAAAAAI/AAAAAAAAAII/NqFYX7hCwZY/photo.jpg?sz=128", "display_name": "Adrian Albert Koch", "link": "https://stackoverflow.com/users/7292232/adrian-albert-koch"}, "reply_to_user": {"reputation": 6147, "user_id": 948652, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/22ed67baa24e475226ef327a818e4ffd?s=128&d=identicon&r=PG", "display_name": "arynaq", "link": "https://stackoverflow.com/users/948652/arynaq"}, "edited": false, "score": 0, "creation_date": 1510781735, "post_id": 47317531, "comment_id": 81586364, "body": "@arynaq yeah game engine^^"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1510826442, "post_id": 47317531, "comment_id": 81603932, "body": "A possible solution (which is used in many game engines) is to have a &quot;map&quot; using ObjectIDs (via which you can retrieve and reference components owned by other systems), this way you don&#39;t have to pass a &quot;full&quot; reference (and ObjectIDs are safe to store)"}, {"owner": {"reputation": 199, "user_id": 7292232, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-wc_R88lWqms/AAAAAAAAAAI/AAAAAAAAAII/NqFYX7hCwZY/photo.jpg?sz=128", "display_name": "Adrian Albert Koch", "link": "https://stackoverflow.com/users/7292232/adrian-albert-koch"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1510827716, "post_id": 47317531, "comment_id": 81604838, "body": "@UnholySheep True, I have used this for the components and entities (managed by the entity manager). The problem here is that the RenderNode is owned by the RenderComponent which itself is owned by the entity which is owned by the entity manager. So to do just that (using a map), I would have to use the entity manager to find the entity, component, and node to see whether the entity still exists to then remove it."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1510843632, "post_id": 47317531, "comment_id": 81616057, "body": "So the entity manager might try to remove an entity that doesn&#39;t exist? What kind of manager doesn&#39;t know that in the first place? It could just have an entity map, and you can keep a back-pointer to the owning component in the entity."}, {"owner": {"reputation": 199, "user_id": 7292232, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-wc_R88lWqms/AAAAAAAAAAI/AAAAAAAAAII/NqFYX7hCwZY/photo.jpg?sz=128", "display_name": "Adrian Albert Koch", "link": "https://stackoverflow.com/users/7292232/adrian-albert-koch"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1510846808, "post_id": 47317531, "comment_id": 81618472, "body": "@Useless No, the entity manager owns the entities and therefore knows whether they exist. The point is that it ONLY manages the entities and not their components and the nodes of these components. Hence, I would have to give each entity and each component a unique ID to then check whether that component still exists (in the renderSystem) to then be able to delete the respective node if &#39;its&#39; entity has been deleted. This would work fine with one important caveat: The RenderSystem could only handle one entities and their RenderNodes - not renderNodes in general...."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1510871688, "post_id": 47317531, "comment_id": 81632804, "body": "OK, you have multiple components with very particular semantics, and as far as I can see you haven&#39;t described any of them usefully in the question (eg. you mention an EventManager, but never refer to it again, and don&#39;t say what interactions it has). Hopefully someone familiar with game engines will be able to guess the details."}, {"owner": {"reputation": 199, "user_id": 7292232, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-wc_R88lWqms/AAAAAAAAAAI/AAAAAAAAAII/NqFYX7hCwZY/photo.jpg?sz=128", "display_name": "Adrian Albert Koch", "link": "https://stackoverflow.com/users/7292232/adrian-albert-koch"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1510915093, "post_id": 47317531, "comment_id": 81649130, "body": "@Useless I have tried to describe the context as briefly as possible since the question is a more general one. I am basically asking for the correct way to reference objects uniquely owned by some other object. And not just reference them but also store these &#39;references&#39; in a container. I am sorry if that isn&#39;t clear from the question"}], "answers": [{"tags": [], "owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": 2, "last_activity_date": 1510962670, "creation_date": 1510962670, "answer_id": 47360951, "question_id": 47317531, "link": "https://stackoverflow.com/questions/47317531/using-shared-ptr-for-unique-ownership-kind-of-is-this-good-practice/47360951#47360951", "title": "Using shared_ptr for unique ownership (kind of) - is this good practice?", "body": "<p>There's certainly nothing wrong with using <code>std::weak_ptr</code> to grant access to an object that might be destroyed, that's what it was invented for. But it does necessitate that the object itself be held by a <code>std::shared_ptr</code>. Not only does this mask your intent to have the object lifetime controlled by its parent, it forces dynamic allocation of the object and precludes it from being a member variable of the parent.</p>\n\n<p>An alternate approach is to keep track of the pointer through a handle, and have a handle manager that tracks whether the object is alive or dead. The safest way to implement this is to make the manager a base class of the object you're tracking, that way RAII ensures it is always up to date. Here's a sample implementation of that concept. Note: untested.</p>\n\n<pre><code>template&lt;class Derived&gt;\nclass HandleBased\n{\npublic:\n    typedef uint64_t handle_t;\n\n    HandleBased() : m_Handle(NextHandle())\n    {\n        Map()[m_Handle] = this;\n    }\n\n    ~HandleBased()\n    {\n        auto it = Map().find(m_Handle);\n        Map().erase(it);\n    }\n\n    handle_t ThisHandle()\n    {\n        return m_Handle;\n    }\n\n    static Derived* FindPtr(handle_t h)\n    {\n        auto it = Map().find(h);\n        if (it == Map().end())\n            return null_ptr;\n        return static_cast&lt;Derived*&gt;(it-&gt;second);\n    }\n\nprivate:\n    static handle_t NextHandle()\n    {\n        static handle_t next = 0;\n        return next++;\n    }\n\n    static std::unordered_map&lt;handle_t, HandleBased*&gt;&amp; Map()\n    {\n        static std::unordered_map&lt;handle_t, HandleBased*&gt; the_map;\n        return the_map;\n    }\n\n    handle_t m_Handle;\n};\n</code></pre>\n\n<p>And here's an example of how you'd use it:</p>\n\n<pre><code>class RenderNode : public HandleBased&lt;RenderNode&gt;\n{\n};\n\nclass RenderComponent\n{\n    std::unique_ptr&lt;RenderNode&gt; node1;\n    RenderNode node2;\n\npublic:\n    void Setup(RenderSystem&amp; rs)\n    {\n        node1 = new RenderNode;\n        rs.nodes.push_back(node1-&gt;ThisHandle());\n        rs.nodes.push_back(node2.ThisHandle());\n    }\n};\n\nclass RenderSystem\n{\npublic:\n    std::list&lt;RenderNode::Handle&gt; nodes;\n\n    void DoRender()\n    {\n        for (auto it = nodes.begin(); it != nodes.end(); )\n        {\n            RenderNode* p = RenderNode::FindPtr(*it);\n            if (p == NULL)\n                it = nodes.erase(it);\n            else\n            {\n                p-&gt;DoSomething();\n                ++it;\n            }\n        }\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 7292232, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-wc_R88lWqms/AAAAAAAAAAI/AAAAAAAAAII/NqFYX7hCwZY/photo.jpg?sz=128", "display_name": "Adrian Albert Koch", "link": "https://stackoverflow.com/users/7292232/adrian-albert-koch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "accepted_answer_id": 47360951, "answer_count": 1, "score": 2, "last_activity_date": 1510962670, "creation_date": 1510781220, "last_edit_date": 1510825959, "question_id": 47317531, "link": "https://stackoverflow.com/questions/47317531/using-shared-ptr-for-unique-ownership-kind-of-is-this-good-practice", "title": "Using shared_ptr for unique ownership (kind of) - is this good practice?", "body": "<p>this is quite hard to explain but I'll try my best. So, I have a RenderComponent, EventManager and RenderSystem. In my RenderComponents constructor, I raise a renderComponentCreated event which the RenderSystem subscribes to. Using an event args object, I pass a RenderNode as data which contains the information the renderSystem needs to draw the thing (drawable, position and type).</p>\n\n<p>So far so good. Now, when the renderComponent is deleted, I want the RenderNode to be removed from the RenderSystem automatically while still leaving the option to remove it manually e.g. as a reaction to some event. This could be done using a RenderComponentRemoveNodeEvent which again the RenderSystem subscribes to.</p>\n\n<p>Now the 'problem'. From my understanding (and from what I want) the renderNode should be something uniquely owned by the RenderComponent (hence unique_ptr). However, this would require me to either copy (and implement a comparison operator for the renderNode --> to be able to find it when I want to remove it) or pass a reference / raw pointer to the renderNode. However, (If I'm correct) there is no way to know whether a reference still refers to a valid object which would mean that automatic removal could not be implemented.</p>\n\n<p>My solution was to make the RenderNode (that is uniquely owned by the RenderComponent) shared and pass weak pointers to the event. The RenderSystem also now maintains a list of weak pointers that it checks for whether they are still pointing to a valid object and automatically removes them if not. So essentially what I would have wanted is creating a weak pointer from a unique one. However, the way it is now, someone could just create a shared pointer from the weak pointer and keep the RenderNode alive longer than it should. Since the managed object itself (RenderNode) contains references to other objects that will not exist longer than the RenderComponent this may cause serious issues.</p>\n\n<p>My question now: can this be considered good design or have I missed something?</p>\n\n<p>PS: Sorry if this explanation reads a bit clunky (English is not my native) and thanks for your help!</p>\n"}, {"tags": ["c++", "c++11", "templates", "language-lawyer", "variadic-templates"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1510865672, "creation_date": 1510865672, "answer_id": 47338867, "question_id": 47317529, "link": "https://stackoverflow.com/questions/47317529/must-variadic-template-have-callable-specialization-with-non-empty-parameter-pac/47338867#47338867", "title": "Must variadic template have callable specialization with non empty parameter pack to be well-formed?", "body": "<p>This reminds me a little of the Haskell function <a href=\"http://hackage.haskell.org/package/void-0.5.10/docs/src/Data-Void.html#absurd\" rel=\"nofollow noreferrer\"><code>absurd</code></a>:</p>\n\n<pre><code>-- | Since 'Void' values logically don't exist, this witnesses the logical\n-- reasoning tool of \\\"ex falso quodlibet\\\".\nabsurd :: Void -&gt; a\n</code></pre>\n\n<p>What this means is a function that takes an instance of <code>Void</code> and returns an instance of <em>any type</em>. What does it mean to say that a function can invent an instance of any type out of thin air from nothing? It doesn't matter, because you can't come up with an instance of <code>Void</code> to pass into it.</p>\n\n<p>Similarly here. In my opinion, the code is well-formed, if silly. There is nothing here that <strong>requires</strong> <code>Ts...</code> to be an empty pack. If <code>Ts...</code> were non-empty, the program would still be fine. The fact that there's no way to make <code>Ts...</code> non-empty seems orthogonal - if you could come up with a construct that made a non-empty <code>Ts</code> that led to the program being ill-formed, maybe [temp.res]/8.3 would apply - but you can't so... <code>\u00af\\_(\u30c4)_/\u00af</code></p>\n"}], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 47338867, "answer_count": 1, "score": 3, "last_activity_date": 1510865672, "creation_date": 1510781213, "last_edit_date": 1510865328, "question_id": 47317529, "link": "https://stackoverflow.com/questions/47317529/must-variadic-template-have-callable-specialization-with-non-empty-parameter-pac", "title": "Must variadic template have callable specialization with non empty parameter pack to be well-formed?", "body": "<p>On the one hand there is the rule <a href=\"http://eel.is/c++draft/temp.res#8.3\" rel=\"nofollow noreferrer\">[temp.res]/8.3</a> which states that if every valid specialization of a variadic template requires an empty template parameter pack the program is ill-formed and no diagnostic is required. On the other hand one can imagine the situation when one can explicit instantiate any desired specialization of the template but cannot call it <a href=\"http://eel.is/c++draft/temp.mem#5.note-1\" rel=\"nofollow noreferrer\">[temp.mem]/5.note-1</a>, e.g.:</p>\n\n<pre><code>struct foo {\n    template &lt;class... Ts&gt;\n    foo() { }\n};\n\ntemplate\nfoo::foo&lt;int, float, double&gt;();\n</code></pre>\n\n<p>Is the code well-formed or the fact one cannot call any valid specialization apart from the one with empty template parameter pack violates the [temp.res]/8.3 rule?</p>\n"}, {"tags": ["c++", "vector", "menu"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510781129, "post_id": 47317468, "comment_id": 81586071, "body": "Just curios: <i><code>int delBook(vector&lt;string&gt; *bookCollection)</code></i> Why do you pass <code>bookCollection</code> as a pointer? Wouldn&#39;t a reference be more suitable."}, {"owner": {"reputation": 954, "user_id": 3104621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27f0df827e6c87c5738d9ab26f30ca3e?s=128&d=identicon&r=PG&f=1", "display_name": "Joald", "link": "https://stackoverflow.com/users/3104621/joald"}, "edited": false, "score": 0, "creation_date": 1510781361, "post_id": 47317468, "comment_id": 81586183, "body": "What do you mean by menu? There aren&#39;t any C++ features specifically for making menus, so you need to specify what would you want the menu to be?"}, {"owner": {"reputation": 1, "user_id": 8738730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b83e8bb010c4e684d0bc4d8c9c70a?s=128&d=identicon&r=PG&f=1", "display_name": "DevonD", "link": "https://stackoverflow.com/users/8738730/devond"}, "edited": false, "score": 0, "creation_date": 1510781466, "post_id": 47317468, "comment_id": 81586241, "body": "I&#39;m a student and beginner so forgive my lack of knowledge. But when I reference bookCollection in the argument, the rest of the vector bookCollection&#39;s ask for a pointer type."}, {"owner": {"reputation": 1, "user_id": 8738730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b83e8bb010c4e684d0bc4d8c9c70a?s=128&d=identicon&r=PG&f=1", "display_name": "DevonD", "link": "https://stackoverflow.com/users/8738730/devond"}, "edited": false, "score": 0, "creation_date": 1510781497, "post_id": 47317468, "comment_id": 81586251, "body": "I mean menu more in the sense of a numbered list. So when the user selects &quot;Delete Book&quot; from the main menu, it gives a numbered list of all the books in the vector. I want those tied to numbers, so the user inputs the number tied to the book they want gone."}, {"owner": {"reputation": 1, "user_id": 8738730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b83e8bb010c4e684d0bc4d8c9c70a?s=128&d=identicon&r=PG&f=1", "display_name": "DevonD", "link": "https://stackoverflow.com/users/8738730/devond"}, "edited": false, "score": 0, "creation_date": 1510781614, "post_id": 47317468, "comment_id": 81586305, "body": "Forgive me I&#39;m only in my second semester of Computer Science. Just want to know if it can be done."}, {"owner": {"reputation": 1, "user_id": 8738730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b83e8bb010c4e684d0bc4d8c9c70a?s=128&d=identicon&r=PG&f=1", "display_name": "DevonD", "link": "https://stackoverflow.com/users/8738730/devond"}, "edited": false, "score": 0, "creation_date": 1510781836, "post_id": 47317468, "comment_id": 81586413, "body": "Also the function you&#39;re looking at is what happens with the user selects &quot;Delete Book&quot; from the main menu, I want to add the numbered list before &#39;int y;&#39; I&#39;m just stuck on how to do it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8738730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b83e8bb010c4e684d0bc4d8c9c70a?s=128&d=identicon&r=PG&f=1", "display_name": "DevonD", "link": "https://stackoverflow.com/users/8738730/devond"}, "edited": false, "score": 0, "creation_date": 1510782600, "post_id": 47317813, "comment_id": 81586801, "body": "Thanks! A little advanced for my knowledge of syntax right now but I&#39;m going to mess with this and learn something new today! I appreciate the help :)"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1510782318, "creation_date": 1510782318, "answer_id": 47317813, "question_id": 47317468, "link": "https://stackoverflow.com/questions/47317468/c-how-to-make-a-numbered-list-only-as-big-as-the-number-of-things-in-my-vector/47317813#47317813", "title": "C++ How to make a numbered list only as big as the number of things in my vector", "body": "<p>There are many methods for displaying and processing menus.  </p>\n\n<p>Here is a table driven approach:  </p>\n\n<pre><code>struct Menu_Item\n{\n  const char * menu_text;\n  void (*processing_function)(); // Pointer to processing function\n};\n\nvoid Process_Hello()\n{\n   std::cout &lt;&lt; \"Hello\\n\";\n}\n\nstatic const Menu_Entry menu_1[] =\n{\n  {\"Print Hello\", Process_Hello},\n};\nconst size_t menu_1_item_count = \nsizeof(menu_1) / sizeof(menu_1[0]);\n\nvoid Menu_Processor(Menu_Entry const * const p_menu,\n                    size_t item_count)\n{\n  for (unsigned int i = 0; i &lt; item_count; ++i)\n  {\n    std::cout &lt;&lt; (i + 1) &lt;&lt; p_menu[i].menu_text &lt;&lt; \"\\n\";\n  }\n  unsigned int selection;\n  std::cin &gt;&gt; selection;\n  // Process the selection:\n  (p_menu[selection - 1])();\n}\n</code></pre>\n\n<p>This method is nice because you can insert or remove entries into the table without having to change the code.  It can be improved, but this one demonstrates the concept of a table driven menu system.  </p>\n"}], "owner": {"reputation": 1, "user_id": 8738730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/582b83e8bb010c4e684d0bc4d8c9c70a?s=128&d=identicon&r=PG&f=1", "display_name": "DevonD", "link": "https://stackoverflow.com/users/8738730/devond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510872256, "creation_date": 1510780935, "last_edit_date": 1510858384, "question_id": 47317468, "link": "https://stackoverflow.com/questions/47317468/c-how-to-make-a-numbered-list-only-as-big-as-the-number-of-things-in-my-vector", "title": "C++ How to make a numbered list only as big as the number of things in my vector", "body": "<p>I want to make a numbered list for the contents of my vector that will shrink or increase depending on how many things are in the vector, since the user will be able to add or delete contents in the vector at will. </p>\n\n<p>In this project, the user can select from a menu to edit the vector by 1. Adding a book, 2. Showing a list of all the books in the vector, and 3. Deleting a book. The function seen below is option 3, delete a book. As you can see I have set up 'y' to be the user selection that gets erased, all I need now is a way to list the books (contents of my vector bookCollection) in a numbered list for the user.</p>\n\n<pre><code>int delBook(vector&lt;string&gt; *bookCollection)\n{\n    int y;\n    for (vector&lt;string&gt;::iterator bIter = bookCollection-&gt;begin(); bIter &lt; bookCollection-&gt;end(); bIter++)\n    {\n        if (bookCollection-&gt;at(y+1) == *bIter)\n        {\n            bookCollection-&gt;erase(bIter);\n        }\n    }\n}\n</code></pre>\n\n<p>I want the delete selection to look something like this in the console:</p>\n\n<ol>\n<li>\"Book One\"</li>\n<li>\"Book Two\"</li>\n<li>\"Book Three\"</li>\n<li><p>\"Book Four\"</p>\n\n<p>Enter the number of the book you want to delete: \"4\"</p></li>\n</ol>\n\n<p>But can shrink or increase based on how many strings have been added to the vector, so next time the user selects \"3. Delete a Book\" it shows:</p>\n\n<ol>\n<li>\"Book One\"</li>\n<li>\"Book Two\"</li>\n<li><p>\"Book Three\"</p>\n\n<p>Enter the number of the book you want to delete:</p></li>\n</ol>\n\n<p>I'm still very new to programming so forgive me if none of this made sense, still learning the lingo. </p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 4, "creation_date": 1510780682, "post_id": 47317351, "comment_id": 81585846, "body": "You can&#39;t generally deduce template parameters through the signature in a <code>std::function</code>."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1510780720, "post_id": 47317351, "comment_id": 81585869, "body": "<code>[](...)-&gt;int {...}</code> is not of type <code>std::function</code>."}, {"owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "edited": false, "score": 1, "creation_date": 1510781379, "post_id": 47317351, "comment_id": 81586197, "body": "Lambda function is not a std::function&lt;...&gt;."}, {"owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "edited": false, "score": 0, "creation_date": 1510781742, "post_id": 47317351, "comment_id": 81586367, "body": "and &quot;solve&quot; is templated function  you should write solve&lt;int&gt;  i think"}], "owner": {"reputation": 1430, "user_id": 703764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e0f702b5287daf26382d035d915480d8?s=128&d=identicon&r=PG", "display_name": "jack_carver", "link": "https://stackoverflow.com/users/703764/jack-carver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510780352, "creation_date": 1510780352, "question_id": 47317351, "link": "https://stackoverflow.com/questions/47317351/template-substitution-failure-for-stdfunction", "title": "template substitution failure for std::function", "body": "<p>I am unable to figure out why the compiler complains with template substitution failure for this piece of code</p>\n\n<pre><code>struct Report {\n    double val;\n    vector&lt;string&gt; props;\n};\n\ntemplate &lt;typename T&gt;\nvoid solve(\n    const  Report&amp; report,\n    std::function&lt;T(const double, const string&amp;)&gt; map) {\n    vector&lt;T&gt; results;\n    results.reserve(report.props.size());\n    for (const auto&amp; prop : report.props) {\n      results.emplace_back(map(report.val, prop));\n    }\n}\n\nint main(int argc, char const *argv[]) {\n    solve(Report(), [](const double x, const string&amp;y) -&gt; int {\n        return 1;\n    });\n\n    return 0;\n}\n</code></pre>\n\n<p>I get the below compilation error </p>\n\n<pre><code>note: candidate template ignored: could not match 'function&lt;type-parameter-0-0\n(double, const std::__1::basic_string&lt;char&gt; &amp;)&gt;' against '(lambda at \ntest.cpp:29:18)'\n</code></pre>\n"}, {"tags": ["c++", "performance", "sorting", "data-structures"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 10, "creation_date": 1510779859, "post_id": 47317193, "comment_id": 81585424, "body": "You should measure it and let us know. When it comes to performance, there is rarely a &quot;best solution&quot;. Rather, it depends strongly on the data and it&#39;s layout, the system it&#39;s running on, the implementation being used, and many other variables."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1510779928, "post_id": 47317193, "comment_id": 81585461, "body": "the only valid answer to &quot;what is faster?&quot; is: measure."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1510779971, "post_id": 47317193, "comment_id": 81585479, "body": "Those <code>inline</code> declarations are redundant - the functions are inline without them."}, {"owner": {"reputation": 73, "user_id": 6856211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c472526852d8f2951dd32990cf0eeb?s=128&d=identicon&r=PG&f=1", "display_name": "pinbox", "link": "https://stackoverflow.com/users/6856211/pinbox"}, "edited": false, "score": 0, "creation_date": 1510779997, "post_id": 47317193, "comment_id": 81585490, "body": "Well, I could measure it, but then I won&#39;t know why one is faster."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1510780002, "post_id": 47317193, "comment_id": 81585494, "body": "btw why do you care? Actually you should measure even before asking yourself &quot;what is faster?&quot;"}, {"owner": {"reputation": 73, "user_id": 6856211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c472526852d8f2951dd32990cf0eeb?s=128&d=identicon&r=PG&f=1", "display_name": "pinbox", "link": "https://stackoverflow.com/users/6856211/pinbox"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510780091, "post_id": 47317193, "comment_id": 81585542, "body": "@tobi303 I care because I would like to use the faster algorithm"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1510780188, "post_id": 47317193, "comment_id": 81585585, "body": "did you profile your real case and identified this part as a hot spot? If not, write code to be readable and let the compiler do the optimizations"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1510780205, "post_id": 47317193, "comment_id": 81585596, "body": "@pinbox You may be interested in <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a> to inspect the resulting assembly generated. It can help understand why some solutions are faster than others."}, {"owner": {"reputation": 73, "user_id": 6856211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c472526852d8f2951dd32990cf0eeb?s=128&d=identicon&r=PG&f=1", "display_name": "pinbox", "link": "https://stackoverflow.com/users/6856211/pinbox"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1510780286, "post_id": 47317193, "comment_id": 81585640, "body": "based on the comments and the influx of downvotes, it seems to me like any of the implementations could be faster, based on many variables mentioned by @Fran&#231;oisAndrieux. I doubt I&#39;ll get a meaningful answer here, time to hit the books"}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 1, "creation_date": 1510780435, "post_id": 47317193, "comment_id": 81585720, "body": "@pinbox No, time to hit the profiler. Profile it, see which one is faster, <i>then</i> ask here if you can&#39;t figure out why by yourself."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510780445, "post_id": 47317193, "comment_id": 81585725, "body": "tip: I am pretty sure that you wont get downvoted that much if you measure (dont forget to turn on compiler optimizations), present the results and ask &quot;why is A so much faster than B?&quot;"}, {"owner": {"reputation": 73, "user_id": 6856211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c472526852d8f2951dd32990cf0eeb?s=128&d=identicon&r=PG&f=1", "display_name": "pinbox", "link": "https://stackoverflow.com/users/6856211/pinbox"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510780663, "post_id": 47317193, "comment_id": 81585831, "body": "@tobi303 thanks for the tip! I haven&#39;t been that active in the SO community long enough to know what kind of questions would be downvoted"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510780879, "post_id": 47317193, "comment_id": 81585943, "body": "dont worry too much about votes ;)"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1510784943, "post_id": 47317193, "comment_id": 81587997, "body": "Is <code>secondVal</code> ever larger than <code>100</code>?"}, {"owner": {"reputation": 73, "user_id": 6856211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c472526852d8f2951dd32990cf0eeb?s=128&d=identicon&r=PG&f=1", "display_name": "pinbox", "link": "https://stackoverflow.com/users/6856211/pinbox"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1510788698, "post_id": 47317193, "comment_id": 81589343, "body": "@Walter in my case no, but why does it matter?"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1510788902, "post_id": 47317193, "comment_id": 81589407, "body": "It does matter, since then you only need to get <code>secondVal</code> if the <code>val</code>s are identical: <code>return first-&gt;getVal()&lt;second-&gt;getVal() || (first-&gt;getVal()==second-&gt;getVal() &amp;&amp; first-&gt;getSecondVal()&lt;second-&gt;getSecondVal());</code>"}, {"owner": {"reputation": 73, "user_id": 6856211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c472526852d8f2951dd32990cf0eeb?s=128&d=identicon&r=PG&f=1", "display_name": "pinbox", "link": "https://stackoverflow.com/users/6856211/pinbox"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1510789960, "post_id": 47317193, "comment_id": 81589741, "body": "@Walter you&#39;re right, that would reduce it from 5 operations (2 additions, 2 multiplications and a comparison) to 2 operations (2 comparisons), thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6856211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c472526852d8f2951dd32990cf0eeb?s=128&d=identicon&r=PG&f=1", "display_name": "pinbox", "link": "https://stackoverflow.com/users/6856211/pinbox"}, "edited": false, "score": 0, "creation_date": 1510788664, "post_id": 47318321, "comment_id": 81589335, "body": "Thanks for the input. I profiled both cases and found that for smaller inputs, using hash table has a large overhead and is significantly slower. Direct function calls are indeed inlined but just wanted to make it explicit. For my purposes, I don&#39;t except the number of inputs to be more than 500, so I might be better off without the hash table."}], "tags": [], "owner": {"reputation": 1884, "user_id": 2747962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JbKoL.jpg?s=128&g=1", "display_name": "Darklighter", "link": "https://stackoverflow.com/users/2747962/darklighter"}, "is_accepted": true, "score": 0, "last_activity_date": 1510784563, "creation_date": 1510784563, "answer_id": 47318321, "question_id": 47317193, "link": "https://stackoverflow.com/questions/47317193/whats-faster-an-inline-function-call-or-a-hashmap-lookup/47318321#47318321", "title": "What&#39;s faster, an inline function call or a hashmap lookup", "body": "<p>Direct functions calls are inlined automatically most of the time. </p>\n\n<p>The complexity in your example isn\u2019t that you call \u00bbthe getter\u00ab twice but that you do your calculation several times \u2013 for all comparisons with a specific element. </p>\n\n<p>Using <code>unordered_map</code> you also have to create the hash table first. </p>\n\n<p>Have a look at <a href=\"http://coliru.stacked-crooked.com/a/fccace6896fef0ef\" rel=\"nofollow noreferrer\">these</a> benchmarks.  </p>\n\n<p>Using the members directly vs a getter function makes no difference.<br>\nThe hash lookups are 10 times as slow as doing the calculation for each comparison.<br>\nIf you have to sort several times it may be useful to keep the calculated value (cache) by storing it as a pair (as a cheaper alternative to a hashmap). </p>\n\n<p>Using pointers to your class instead of values may change the performance (for the worse) but it shouldn\u2019t change the observed differences. </p>\n"}], "owner": {"reputation": 73, "user_id": 6856211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49c472526852d8f2951dd32990cf0eeb?s=128&d=identicon&r=PG&f=1", "display_name": "pinbox", "link": "https://stackoverflow.com/users/6856211/pinbox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1510786901, "accepted_answer_id": 47318321, "answer_count": 1, "score": -3, "last_activity_date": 1510788192, "creation_date": 1510779834, "last_edit_date": 1510788192, "question_id": 47317193, "link": "https://stackoverflow.com/questions/47317193/whats-faster-an-inline-function-call-or-a-hashmap-lookup", "closed_reason": "Needs more focus", "title": "What&#39;s faster, an inline function call or a hashmap lookup", "body": "<p>Say I have a class <code>ClassToSort</code> which I need to sort with <code>std::sort()</code> based on the values of <code>val</code> and <code>secondVal</code> (in ascending order of <code>(val * 100) + secondVal</code>).</p>\n\n<pre><code>class ClassToSort {\n  private:\n    int val;\n    long int secondVal;\n    int id;\n\n  public:\n    inline const int getVal() const { return val; }\n    inline const long int getSecondVal() const { return secondVal; }\n    inline const int getID() const { return id; }\n};\n\nstd::vector&lt;ClassToSort*&gt; objs;\n</code></pre>\n\n<p>Now, I have two ways to sort it, either precompute the value of <code>(val * 100) + secondVal</code> and store it in an <code>std::unordered_map&lt;int, long&gt; valMap</code> and refer to this map while sorting, or make function calls to <code>getVal()</code> and <code>getSecondVal()</code> each time while sorting (this will cause the number of function calls to double). Here are the two options:</p>\n\n<pre><code>std::sort(objs.begin(), objs.end(),\n         [&amp;](const ClassToSort* first, const ClassToSort* second) {\n          return valMap[first-&gt;getID()] &lt; valMap[second-&gt;getID()];\n         });\n</code></pre>\n\n<p>and</p>\n\n<pre><code>std::sort(objs.begin(), objs.end(),\n         [](const ClassToSort* first, const ClassToSort* second) {\n          return (first-&gt;getVal() * 100 + first-&gt;getSecondVal()) &lt;\n                 (second-&gt;getVal() * 100 + second-&gt;getSecondVal());\n         });\n</code></pre>\n\n<p>It is clear that the second option will not only call getter functions for each object twice, but also do the same computation twice. Intuitively, I would think that for large number of inputs, hashtable lookup would be faster than when the number of function calls is more, along with recalculation. Is my understanding correct?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qtcpsocket", "qtcpserver"], "comments": [{"owner": {"reputation": 1375, "user_id": 2351039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCmqF.jpg?s=128&g=1", "display_name": "Felix Castor", "link": "https://stackoverflow.com/users/2351039/felix-castor"}, "edited": false, "score": 0, "creation_date": 1510779957, "post_id": 47317151, "comment_id": 81585473, "body": "Could you isolate the code you think may be the problem?  It seems that you have a very direct question."}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1510782276, "creation_date": 1510782276, "answer_id": 47317802, "question_id": 47317151, "link": "https://stackoverflow.com/questions/47317151/change-qt-gui-by-qt-tcp-socket/47317802#47317802", "title": "change Qt GUI by Qt tcp socket?", "body": "<p>The variables created in the functions only exist while the function is called, so when the function is finished executing the variables are eliminated, and in your case the QLabel is eliminated.</p>\n\n<p>A possible solution is to create <code>QLabel</code> as a member of the class:</p>\n\n<p><strong>server.h</strong></p>\n\n<pre><code>private:\n    QLabel *label;\n</code></pre>\n\n<p><strong>server.cpp</strong></p>\n\n<pre><code>Server::Server(QObject *parent) : QObject(parent)\n{\n    [...]\n    qDebug() &lt;&lt;  \"connected\";\n    label = new QLabel;\n}\n\nvoid Server::startRead()\n{\n    [...]\n    for (int j = 0; j &lt; 60; ++j) {\n        if ((j % 5) != 0)\n            painter.drawLine(92, 0, 96, 0);\n        painter.rotate(6.0);\n    }\n\n    label-&gt;setPixmap(pixmap);\n    label-&gt;show();\n\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8947750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c8db1a8580b3641e52f132f42b06a62?s=128&d=identicon&r=PG&f=1", "display_name": "ali daei ", "link": "https://stackoverflow.com/users/8947750/ali-daei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 1, "accepted_answer_id": 47317802, "answer_count": 1, "score": 0, "last_activity_date": 1523507864, "creation_date": 1510779662, "last_edit_date": 1523507864, "question_id": 47317151, "link": "https://stackoverflow.com/questions/47317151/change-qt-gui-by-qt-tcp-socket", "title": "change Qt GUI by Qt tcp socket?", "body": "<p>i have a server and client.i am going to change the handle of my clock to new value that will send by client to server.i added the source code below.\n<strong><em>my problem</em></strong> is when client connect to server after client send data to server to change the handle of clock to new data. <strong><em>the gui that created in Server::startRead() method appear and disappear automatically</em></strong>. what is wrong with my code please.</p>\n\n<p>server.h</p>\n\n<pre><code>#ifndef SERVER_H\n#define SERVER_H\n#include &lt;QtNetwork&gt;\n#include &lt;QObject&gt;\n#include &lt;QTcpServer&gt;\n#include &lt;QTcpSocket&gt;\n\nclass Server: public QObject\n{\nQ_OBJECT\npublic:\n\n   QString buf;\n  Server(QObject * parent = 0);\n  ~Server();\npublic slots:\n  void acceptConnection();\n  void startRead();\n  QString getinfo();\n\nprivate:\n  QTcpServer server;\n  QTcpSocket* client;\n};\n\n\n#endif // SERVER_H\n</code></pre>\n\n<p>server.cpp</p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include \"server.h\"\n#include &lt;QDebug&gt;\n#include &lt;iostream&gt;\n#include &lt;QApplication&gt;\n#include \"qlabel.h\"\n#include &lt;QtGui&gt;\nServer::Server(QObject* parent): QObject(parent)\n{\n\nconnect(&amp;server, SIGNAL(newConnection()),\n    this, SLOT(acceptConnection()));\n\n\n  server.listen(QHostAddress::Any, 1234);\n  qDebug() &lt;&lt;  \"connected\";\n}\n\nServer::~Server()\n{\n  server.close();\n}\n\nvoid Server::acceptConnection()\n{\n\n  qDebug()&lt;&lt;\"accept connection\";\n  client = server.nextPendingConnection();\n  client-&gt;write(\"Hello client\\r\\n\");\n\n  connect(client, SIGNAL(readyRead()),\n    this, SLOT(startRead()));\n\n}\n\nvoid Server::startRead()\n{\n\n    client-&gt;waitForReadyRead(3000);\n    QString buf=client-&gt;readAll();\n\n    qDebug() &lt;&lt; buf;\n\n    static const QPoint minuteHand[3] = {\n        QPoint(7, 8),\n        QPoint(-7, 8),\n        QPoint(0, -40)\n    };\n     int side = qMin(200, 200);\n    QColor minuteColor(60, 60, 0);\n    QPixmap pixmap( 200, 200 );\n    pixmap.fill( Qt::red );\n    QPainter painter( &amp;pixmap );\n    painter.setRenderHint(QPainter::Antialiasing);\n    painter.translate(200 / 2, 200 / 2);\n    painter.scale(side / 200.0, side / 200.0);\n\n    painter.setPen(Qt::NoPen);\n\n    for (int i = 0; i &lt; 12; ++i) {\n        painter.drawLine(88, 0, 96, 0);\n        painter.rotate(30.0);\n    }\n    painter.setPen(Qt::NoPen);\n    painter.setBrush(minuteColor);\n\n    painter.save();\n    painter.rotate(240);\n    painter.drawConvexPolygon(minuteHand, 3);\n    painter.restore();\n\n    painter.setPen(minuteColor);\n\n    for (int j = 0; j &lt; 60; ++j) {\n        if ((j % 5) != 0)\n            painter.drawLine(92, 0, 96, 0);\n        painter.rotate(6.0);\n    }\n\n    QLabel l;\n    l.setPixmap(pixmap);\n    l.show();\n\n}\nQString Server::getinfo()\n{\n\n qDebug()&lt;&lt; buf;\n    return buf;\n\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"server.h\"\n#include &lt;QApplication&gt;\n#include \"analogclock.h\"\n#include \"qlabel.h\"\n#include &lt;QtGui&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\nServer s;\n\n\n\n    return a.exec();\n}\n</code></pre>\n\n<p>application output</p>\n\n<pre><code>Starting C:\\Qt\\Qt5.3.0_1\\Tools\\QtCreator\\bin\\build-NHAJA-Desktop_Qt_5_3_0_MinGW_32bit-Debug\\debug\\NHAJA.exe...\nconnected\naccept connection\n\"11\"\nC:\\Qt\\Qt5.3.0_1\\Tools\\QtCreator\\bin\\build-NHAJA-Desktop_Qt_5_3_0_MinGW_32bit-Debug\\debug\\NHAJA.exe exited with code 0\n</code></pre>\n\n<p>I really appreciate it.</p>\n"}, {"tags": ["c++", "smart-pointers", "unique-ptr"], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1510780928, "post_id": 47317147, "comment_id": 81585964, "body": "@NicolBolas why did you remove lvalue reference? It is not really readable, but still would work."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1510781147, "post_id": 47317147, "comment_id": 81586077, "body": "Of course it will work. But it&#39;s a bad idea to give people bad ideas. And moving from an lvalue reference is pretty much <i>always wrong</i>. It means that, at the site where the function is called, there is no indication that the object will be moved from. And since moving from an object leaves it in an undefined state, that means using it later is dubious. Preventing that is a big part of why <code>std::move</code> and rvalue references <i>exist</i>. The other reason being of course that you can&#39;t pass prvalues to lvalue reference parameters."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1510781817, "post_id": 47317147, "comment_id": 81586407, "body": "&quot;It means that, at the site where the function is called, there is no indication that the object will be moved from.&quot; yes, but unfortunately that is the case for almost any call where lvalue reference passed - method suppose to change it but there is no indication on calling site. But I am not sure this is good enough reason to prohibit passing by lvalue reference in general."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1510783792, "post_id": 47317147, "comment_id": 81587413, "body": "There&#39;s a difference between whether or not the function will change it and whether or not the function will move from it. Despite the latter being a subset of the former, the latter is a much more damaging process. Generally speaking, it is incredibly rude to completely destroy the contents of a non-<code>const</code> lvalue reference parameter. And destroying the contents of an object is <i>exactly</i> what move does."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1510780655, "last_edit_date": 1510780655, "creation_date": 1510779623, "answer_id": 47317147, "question_id": 47317077, "link": "https://stackoverflow.com/questions/47317077/append-vector-of-unique-ptr-to-another-via-member-function/47317147#47317147", "title": "Append vector of unique ptr to another via member function", "body": "<p>You cannot move from a vector, that you passed by const reference, as moving requires modification. So change that method to:</p>\n\n<pre><code>void AddAs(vector&lt;unique_ptr&lt;A&gt;&gt;&amp;&amp; vv)\n</code></pre>\n\n<p>Passing by value will also work:</p>\n\n<pre><code>void AddAs(vector&lt;unique_ptr&lt;A&gt;&gt; vv)\n</code></pre>\n\n<p>Note you need to change calling code:</p>\n\n<pre><code>b.AddAs(std::move(v));\n</code></pre>\n\n<p>which is actually good as shows the reader that vector would be moved from.</p>\n\n<p><a href=\"https://ideone.com/tAQqdn\" rel=\"nofollow noreferrer\">live example</a></p>\n"}], "owner": {"reputation": 23, "user_id": 6118598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/222372445f9e121918a5858ca6ecb025?s=128&d=identicon&r=PG&f=1", "display_name": "jackten", "link": "https://stackoverflow.com/users/6118598/jackten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 47317147, "answer_count": 1, "score": 2, "last_activity_date": 1510780655, "creation_date": 1510779377, "question_id": 47317077, "link": "https://stackoverflow.com/questions/47317077/append-vector-of-unique-ptr-to-another-via-member-function", "title": "Append vector of unique ptr to another via member function", "body": "<p>I want to move a vector of unique ptrs to a vector of unique ptrs I have stored in a class. I have reduced this to a minimum example here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass A\n{\npublic:\n    A() = default;  \n};\n\n\nclass B\n{\n\npublic:\n\n    void AddAs(const vector&lt;unique_ptr&lt;A&gt;&gt;&amp; vv)\n    {\n\n        vec.insert(vec.end(),\n            std::make_move_iterator(vv.begin()),\n            std::make_move_iterator(vv.end())\n        );\n    }\n\n    vector&lt;unique_ptr&lt;A&gt;&gt; vec;\n};\n\n\nint main() {    \n    vector&lt;unique_ptr&lt;A&gt;&gt; v;\n    for(int i=0; i&lt;10; ++i)\n    {\n        v.push_back(make_unique&lt;A&gt;());\n    }\n    B b;\n    b.AddAs(v);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/76iNIM\" rel=\"nofollow noreferrer\">https://ideone.com/76iNIM</a> </p>\n\n<p>This trying to follow the answer from <a href=\"https://stackoverflow.com/questions/21487714/inserting-a-vector-of-unique-ptr-into-another-vector\">Inserting a vector of unique_ptr into another vector</a></p>\n\n<p>But this doesn't compile as it says that is using the copy operator. </p>\n\n<p>I am sure this is a stupid question, but I am new to C++ and I am struggling to see where the copy is.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510779060, "post_id": 47316990, "comment_id": 81584973, "body": "you need to show code. Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and provide one"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1510779557, "post_id": 47316990, "comment_id": 81585250, "body": "A declaration is not a definition."}], "owner": {"reputation": 55, "user_id": 6886108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451ffd94b773364441a9709ec574fe13?s=128&d=identicon&r=PG&f=1", "display_name": "Dop3n", "link": "https://stackoverflow.com/users/6886108/dop3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1510779052, "answer_count": 0, "score": 0, "last_activity_date": 1510778994, "creation_date": 1510778994, "question_id": 47316990, "link": "https://stackoverflow.com/questions/47316990/undefined-reference-to-llist-initlinkedlist", "closed_reason": "Duplicate", "title": "undefined reference to `llist_init(LinkedList*)&#39;", "body": "<p>I got a short question. I'm getting this error</p>\n\n<pre><code>undefined reference to `llist_init(LinkedList*)'\n</code></pre>\n\n<p>my Stack.cpp includes</p>\n\n<pre><code>#include \"LinkedList.h\"\n</code></pre>\n\n<p>LinkedList.h has a init function</p>\n\n<pre><code> void llist_init(LinkedList * list);\n</code></pre>\n\n<p>I can't understand why it's telling me \"undefined\" since I include LinkedList.h and LinkedList.h has a llist_init function. help!</p>\n"}, {"tags": ["c++", "regex", "string", "c++11", "match"], "answers": [{"comments": [{"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 0, "creation_date": 1510779785, "post_id": 47317153, "comment_id": 81585376, "body": "Can you tell me how I can correct the example then? My goal is to have labeled capture groups"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 0, "creation_date": 1510779978, "post_id": 47317153, "comment_id": 81585485, "body": "Groups that capture what? Do you need <code>&quot;(a[a-z])(a)&quot;</code> or something?"}, {"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 0, "creation_date": 1510780134, "post_id": 47317153, "comment_id": 81585566, "body": "I need to find reoccuring patterns, so I want to have groups that capture only the same characters for a given capture group label."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 1, "creation_date": 1510780384, "post_id": 47317153, "comment_id": 81585691, "body": "Do you mean <code>&quot;(a[a-z])\\1&quot;</code> to capture &quot;ab&quot; in &quot;abab&quot;? You can look for identical matches by using back references: &quot;\\&lt;digit&gt;&quot;."}, {"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 0, "creation_date": 1510780474, "post_id": 47317153, "comment_id": 81585737, "body": "In this example, I wanted to capture &quot;bb&quot;: <a href=\"https://regex101.com/r/DqgnAs/1\" rel=\"nofollow noreferrer\">regex101.com/r/DqgnAs/1</a> Can I do it with proper labels?"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 1, "creation_date": 1510780873, "post_id": 47317153, "comment_id": 81585936, "body": "So probably simply <code>([a-z])\\1</code>: a group that captures a single lowercase character and immediately a backreference to it."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1510779663, "creation_date": 1510779663, "answer_id": 47317153, "question_id": 47316942, "link": "https://stackoverflow.com/questions/47316942/regexp-matching-fails-with-invalid-special-open-parenthesis/47317153#47317153", "title": "Regexp matching fails with invalid special open parenthesis", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/regex/ecmascript\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/regex/ecmascript</a> says that ECMAScript (the default type for <code>std::regex</code>) requires <code>(?=</code> for positive lookahead.</p>\n"}, {"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1510780920, "creation_date": 1510780920, "answer_id": 47317464, "question_id": 47316942, "link": "https://stackoverflow.com/questions/47316942/regexp-matching-fails-with-invalid-special-open-parenthesis/47317464#47317464", "title": "Regexp matching fails with invalid special open parenthesis", "body": "<p>There are 2 issues here:</p>\n\n<ul>\n<li><code>std::regex</code> flavors do not support named capturing groups / backreferences, you need to use <em>numbered</em> capturing groups / backreferences</li>\n<li>You should use <a href=\"http://en.cppreference.com/w/cpp/regex/regex_search\" rel=\"nofollow noreferrer\"><code>regex_search</code></a> rather than <a href=\"http://en.cppreference.com/w/cpp/regex/regex_match\" rel=\"nofollow noreferrer\"><code>regex_match</code></a> that <a href=\"https://stackoverflow.com/questions/26696250/difference-between-stdregex-match-stdregex-search\">requires a full string match</a>.</li>\n</ul>\n\n<p>Use</p>\n\n<pre><code>std::string regexp_string(R\"(([a-z])\\1)\");\nstd::regex regexp_to_match(regexp_string);\nstd::string target(\"abbab\");\nstd::smatch matched_regexp;\nif (std::regex_search(target, matched_regexp, regexp_to_match)) {\n    std::cout &lt;&lt; matched_regexp.str() &lt;&lt; std::endl;\n}\n// =&gt; bb\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/EXwO6T\" rel=\"nofollow noreferrer\">C++ demo</a></p>\n\n<p>The <code>R\"(([a-z])\\1)\"</code> raw string literal defines the <code>([a-z])\\1</code> regex that matches any lowercase ASCII letter and then matches the same letter again.</p>\n"}, {"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 0, "last_activity_date": 1510780985, "creation_date": 1510780985, "answer_id": 47317477, "question_id": 47316942, "link": "https://stackoverflow.com/questions/47316942/regexp-matching-fails-with-invalid-special-open-parenthesis/47317477#47317477", "title": "Regexp matching fails with invalid special open parenthesis", "body": "<p>The reason your regex crashes for you is because named groups not supported by std::regex. However you can still use what is available to find the first duplicate char in string:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n\nint main()\n{\n    std::string s = \"abc def cde\";\n    std::smatch m;\n    std::regex r(\"(\\\\w).*?(?=\\\\1)\");\n\n    if (std::regex_search(s, m, r))\n        std::cout &lt;&lt; m[1] &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Prints </p>\n\n<pre><code>c\n</code></pre>\n"}], "owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 1, "accepted_answer_id": 47317464, "answer_count": 3, "score": 3, "last_activity_date": 1510780985, "creation_date": 1510778812, "question_id": 47316942, "link": "https://stackoverflow.com/questions/47316942/regexp-matching-fails-with-invalid-special-open-parenthesis", "title": "Regexp matching fails with invalid special open parenthesis", "body": "<p>I am trying to use regexps in c++11, but my code always throws an <code>std::regex_error</code> of <code>Invalid special open parenthesis.</code>. A minimal example code which tries to find the first duplicate character in a string:</p>\n\n<pre><code>std::string regexp_string(\"(?P&lt;a&gt;[a-z])(?P=a)\"); // Nothing to be escaped here, right?\nstd::regex  regexp_to_match(regexp_string);\nstd::string target(\"abbab\");\nstd::smatch matched_regexp;\nstd::regex_match(target, matched_regexp, regexp_to_match);\nfor(const auto&amp; m: matched_regexp)\n{\n    std::cout &lt;&lt; m &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Why do I get an error and how do I fix this example?</p>\n"}, {"tags": ["c++", "pthreads", "sendmail", "popen", "broken-pipe"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4615320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12710c237498e6348cca9ebe1c592d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Luchio", "link": "https://stackoverflow.com/users/4615320/luchio"}, "edited": false, "score": 0, "creation_date": 1511195028, "post_id": 47317166, "comment_id": 81746225, "body": "It was sendmail that was quitting unexpectely because we passed it wrongly formatted e-mail addresses.  Thanks for the cue!"}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": true, "score": 1, "last_activity_date": 1510779710, "creation_date": 1510779710, "answer_id": 47317166, "question_id": 47316855, "link": "https://stackoverflow.com/questions/47316855/c-calling-sendmail-from-pthread-results-in-broken-pipe/47317166#47317166", "title": "C++: Calling sendmail from pthread results in Broken Pipe", "body": "<p><code>EPIPE</code> means that the other end (the process you are writing to) has died.  This could happen if there is a fork failure (<code>popen</code> invokes the shell, so there is another subprocess involved) because there are temporarily too many processes in the system.  A more direct cause would be <code>sendmail</code> failing and exiting prematurely, before reading all of standard input, say due to malformed email headers.</p>\n\n<p><code>popen</code> is unfortunately not a very reliable interface.  You might be better off using <code>fork</code>/<code>execve</code> or <code>posix_spawn</code>, either with a temporary file for the input or I/O multiplexing using <code>poll</code>, just to be able to capture any error that <code>sendmail</code> might generate.  Alternatively, you could try to call <code>sendmail</code> with <code>-oee</code>, which is supposed to report any errors by email, but it won't help if the creation of the <code>sendmail</code> itself fails.</p>\n"}], "owner": {"reputation": 53, "user_id": 4615320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12710c237498e6348cca9ebe1c592d2f?s=128&d=identicon&r=PG&f=1", "display_name": "Luchio", "link": "https://stackoverflow.com/users/4615320/luchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 47317166, "answer_count": 1, "score": 2, "last_activity_date": 1510779710, "creation_date": 1510778462, "question_id": 47316855, "link": "https://stackoverflow.com/questions/47316855/c-calling-sendmail-from-pthread-results-in-broken-pipe", "title": "C++: Calling sendmail from pthread results in Broken Pipe", "body": "<p>I'm trying to send an e-mail with <code>sendmail</code> in a separate <code>pthread</code>.  This code works 99.9% of the time.</p>\n\n<pre><code>void* emailClientThreadFct(void* emailClientPtr)\n{\n   EmailClient* emailClient = static_cast&lt;EmailClient*&gt;(emailClientPtr);\n\n   try\n   {\n      emailClient-&gt;Send();\n   }\n   catch (const exception&amp; excep)\n   {\n      SYSLOG_ERROR(\"E-mail client exception: %s\", excep.what());\n   }\n\n   delete emailClient;\n   return NULL;\n}\n\n// Send email for current output in a separate thread\npthread_t emailThread;\npthread_attr_t attr;\n\n/* Initialize and set thread detached attribute */\npthread_attr_init(&amp;attr);\npthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_DETACHED);\n\npthread_create(&amp;emailThread, &amp;attr, emailClientThreadFct, emailClientObj);\n</code></pre>\n\n<p>0.1% of the time, I get the error <code>fwrite error Broken Pipe</code> when I do the following call.  From what I read, Broken Pipe (EPIPE 32) is usually a receiver problem, but sendmail is a local process... Could it be that I'm sending too much data to fwrite?  Or that I'm doing something bad in my pthread instanciation?  Or has sendmail crashed?</p>\n\n<pre><code>void EmailClient::Send() const\n{\n   // Flush all open output streams, as recommended by popen man page\n   fflush(NULL);\n\n   string popen_command = \"sendmail -t -oi &gt;/dev/null 2&gt;&amp;1\");\n\n   // Open pipe to Mail Transport Agent (MTA)\n   errno = 0;\n   FILE* stream = popen(popen_command.c_str(), \"w\");\n\n   if (stream == NULL)\n   {\n      throw exception(\"Cannot send email popen\");\n   }\n   errno = 0;\n   if (fwrite(message.data(), message.size(), 1, stream) &lt; 1)\n   {\n      pclose(stream);\n      throw exception(\"fwrite error \", strerror(errno));\n   }\n\n   // Close MTA\n   errno = 0;\n   if (pclose(stream) == -1)\n      printf(\"\\\"Error closing the MTA pipe (%s)\\\"\", strerror(errno))\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "rotation", "shift"], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1510777648, "creation_date": 1510777648, "answer_id": 47316652, "question_id": 47316558, "link": "https://stackoverflow.com/questions/47316558/c-how-to-use-a-pointer-to-circular-shift-array-element/47316652#47316652", "title": "C++ how to use a pointer to circular shift array element", "body": "<p>It's just deferencing the pointer, which returns an <code>int</code>, and performing all the bit operations on that. It's effectively the same as:</p>\n\n<pre><code>unsigned int val = *q;\nval = (val &gt;&gt; 8)|((val &amp; 0xff) &lt;&lt; 24);\n*q = val;\n</code></pre>\n\n<p>The program itself has undefined behavior. You can't access a <code>char</code> array through an <code>unsigned int*</code> pointer. It also assumes that <code>sizeof (unsigned int)</code> is <code>4</code>, the array has no padding between elements, and a particular endianness of the CPU.</p>\n"}, {"comments": [{"owner": {"reputation": 1793, "user_id": 6398487, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1013337205416693/picture?type=large", "display_name": "Jason", "link": "https://stackoverflow.com/users/6398487/jason"}, "edited": false, "score": 0, "creation_date": 1510815688, "post_id": 47317624, "comment_id": 81597583, "body": "Thank you so much for such detailed explanation. It\u2019s very clear! Just one more question on the \u2018(*q &gt;&gt; 8) | ((*q &amp; 0xff) &lt;&lt; 24)\u2019: when the program does these two operation, why, when implementing \u2018 ((*q &amp; 0xff) &lt;&lt; 24)\u2019 would the original left 24 bits are still there for  \u2018(*q &gt;&gt; 8)\u2018 to operate on?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 1793, "user_id": 6398487, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1013337205416693/picture?type=large", "display_name": "Jason", "link": "https://stackoverflow.com/users/6398487/jason"}, "edited": false, "score": 0, "creation_date": 1510818899, "post_id": 47317624, "comment_id": 81599155, "body": "@Jason because these shift operations are performed on the value of *q and do not change the original content of the object unless there&#39;s an assignment. It&#39;s like writing a+15; you wouldn&#39;t expect a to change either."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 2, "last_activity_date": 1510783442, "last_edit_date": 1592644375, "creation_date": 1510781618, "answer_id": 47317624, "question_id": 47316558, "link": "https://stackoverflow.com/questions/47316558/c-how-to-use-a-pointer-to-circular-shift-array-element/47317624#47317624", "title": "C++ how to use a pointer to circular shift array element", "body": "<h2>How can this work ?</h2>\n<p>The pointer <code>in</code> to the array looks like:</p>\n<pre><code>         +---+---+---+---+\nin --&gt;   | a | b | c | d | \n         +---+---+---+---+\n</code></pre>\n<p>Let's assuming that each char would be coded as a sequence of 8 bits (ok, language-lawyers would argue that a byte is not necessarily 8 bits, but in practice, it's quite often the case).  So in binary it would look like:</p>\n<pre><code>         +----------+----------+----------+----------+\nin --&gt;   | 01100001 | 01100010 | 01100011 | 01100100 | \n         +----------+----------+----------+----------+\n</code></pre>\n<p>Let's assume that the int is made of 32 bits.  The ugly <a href=\"https://en.wikipedia.org/wiki/Pointer_(computer_programming)#Typed_pointers_and_casting\" rel=\"nofollow noreferrer\">casting</a> trick with unsigned <code>int* q= (unsigned int*)in;</code> is to instruct the compiler to handle the pointer as if it would point to an <code>int</code>, combining several char in a single value:</p>\n<pre><code>         +----------+----------+----------+----------+\nq  --&gt;   | 01100001   01100010   01100011   01100100 | \n         +----------+----------+----------+----------+\n   \n</code></pre>\n<p>Attention:  for the sake of simplicity, I'll assume here a big endian CPU architecture. But I'll come back later on this by explaining how it works with little endian.<br />\nThis binary coded number in the example represents 1633837924 in decimal notation.</p>\n<p>If you now perform  <code>(*q &gt;&gt; 8)</code> it will <a href=\"https://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/bitshift.html\" rel=\"nofollow noreferrer\">shift the bits</a> of this integer to the right by 8 bits, injecting 0 bits on the left:</p>\n<pre><code>         +----------+----------+----------+----------+\n*q &gt;&gt;8 = | 00000000   01100001   01100010   01100011 | \n         +----------+----------+----------+----------+\n                        'a'         'b'        'c'\n</code></pre>\n<p>Now <code>0xff</code> in binary in <code>11111111</code>. If you now perform the following <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation#AND\" rel=\"nofollow noreferrer\">bitwise and</a> operation <code>(*q &amp; 0xff)</code> you will set all the bits to 0, except the last 8 bits:</p>\n<pre><code>            +----------+----------+----------+----------+\n(*q&amp;0xff) = | 00000000   00000000   00000000   01100100 | \n            +----------+----------+----------+----------+\n                                                 'd'\n</code></pre>\n<p>if you combine this with <code>...&lt;&lt;24</code>, you shift all the bits to the left by 24 positions, by injecting 0 to the right:</p>\n<pre><code>                +----------+----------+----------+----------+\n(*q&amp;0xff)&lt;&lt;24 = | 01100100   00000000   00000000   00000000 | \n                +----------+----------+----------+----------+\n                     'd'\n</code></pre>\n<p>If you now combine these two terms with a <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation#OR\" rel=\"nofollow noreferrer\">bitwise or</a>, you'll obtain:</p>\n<pre><code>                +----------+----------+----------+----------+\n*q &gt;&gt;8 =        | 00000000   01100001   01100010   01100011 | \n                +----------+----------+----------+----------+\n                             'a'         'b'        'c'\n                +----------+----------+----------+----------+\n(*q&amp;0xff)&lt;&lt;24 = | 01100100   00000000   00000000   00000000 | \n                +----------+----------+----------+----------+\n                     'd'\n                +----------+----------+----------+----------+\n| (bitwise or)  | 01100100   01100001   01100010   01100011 | \n                +----------+----------+----------+----------+\n                     'd'        'a'         'b'        'c'\n</code></pre>\n<p>So in this case it rotates right.  This is the consequence of the big-endian assumption that I made.</p>\n<h2>But is this safe ?</h2>\n<p>The problem with this code is that it assumes a lot of things which are not guaranteed by standard C++. So it is not guaranteed to work.   It works only if:</p>\n<ul>\n<li>a <code>char</code> is 8 bits long (because the shift right and shift left are multiples of 8).</li>\n<li>an <code>int</code> is 32 bits long (because it assumes that the combination of shifts corresponds to exactly 32 bits).</li>\n<li>the direction of the rotation depends on endianness.  Only little endian ensures a rotation to the left.</li>\n</ul>\n<p>Here the impact on <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">endianness</a>:</p>\n<ul>\n<li>In my step by step explanations, I've used big-endian, where the bytes are taken sequentially in the right order to form the integer.  THe rotation is done towards the right.</li>\n<li>If you have a little endian architecture, which is much more probable, the bytes would be loaded into the register as an integer in the reverse order (e.g. <code>a b c d</code> in memory order would be loaded as <code>d c b a</code> for the calculations) , the bytes would then be shifted and combined as explained to the right (e.g. <code>a d c b</code>), but when stored back into memory, the bytes would again be reversed (e.g. <code>b c d a</code>), so the rotate right that is done on the integer results in a rotate left if looking at the individual chars.</li>\n</ul>\n"}], "owner": {"reputation": 1793, "user_id": 6398487, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1013337205416693/picture?type=large", "display_name": "Jason", "link": "https://stackoverflow.com/users/6398487/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 0, "accepted_answer_id": 47317624, "answer_count": 2, "score": 2, "last_activity_date": 1510783442, "creation_date": 1510777305, "last_edit_date": 1510777911, "question_id": 47316558, "link": "https://stackoverflow.com/questions/47316558/c-how-to-use-a-pointer-to-circular-shift-array-element", "title": "C++ how to use a pointer to circular shift array element", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid RotateLeft(unsigned char* in)\n{\n    unsigned int* q= (unsigned int*)in;\n    *q = (*q &gt;&gt; 8)|((*q &amp; 0xff) &lt;&lt; 24);\n}\nint main() {\n    unsigned char temp[4] = {'a', 'b', 'c', 'd'};\n    RotateLeft(temp);\n    for (int i=0; i&lt;4; i++) {\n        cout&lt;&lt;temp[i]&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>the output is: b c d a.</p>\n\n<p>Could you explain how does this line work: </p>\n\n<pre><code>*q = (*q &gt;&gt; 8)|((*q &amp; 0xff) &lt;&lt; 24);\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "multithreading", "qt", "dll", "threadpool"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1510786010, "post_id": 47316556, "comment_id": 81588428, "body": "That implies two separate instances of thread pool I guess. It is likely because of static variable with thread count being allocated for both EXE and DLL. The question is then how the project was linked altogether in the first place? Is there a way to make sure we have one thread pool object in the app?"}], "answers": [{"tags": [], "owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "is_accepted": false, "score": 1, "last_activity_date": 1510950415, "creation_date": 1510950415, "answer_id": 47358753, "question_id": 47316556, "link": "https://stackoverflow.com/questions/47316556/qthreadpool-maxthreadcount-different-in-application-and-dll/47358753#47358753", "title": "QThreadPool maxThreadCount different in Application and DLL", "body": "<p>Looking at the implementation of QThreadPool <a href=\"https://code.woboq.org/qt5/qtbase/src/corelib/global/qglobalstatic.h.html#158\" rel=\"nofollow noreferrer\">https://code.woboq.org/qt5/qtbase/src/corelib/global/qglobalstatic.h.html#158</a>\nwe can see that :</p>\n\n<pre><code>QThreadPool *QThreadPool::globalInstance()\n    {\n        return theInstance();\n    }\n</code></pre>\n\n<p>which is defined here <a href=\"https://code.woboq.org/qt5/qtbase/src/corelib/thread/qthreadpool.cpp.html#50\" rel=\"nofollow noreferrer\">https://code.woboq.org/qt5/qtbase/src/corelib/thread/qthreadpool.cpp.html#50</a></p>\n\n<pre><code> Q_GLOBAL_STATIC(QThreadPool, theInstance)\n</code></pre>\n\n<p>From here, if for some obscure reason your dll and your exec are not linked with the exact same Qt core dll, you would get the problem</p>\n"}], "owner": {"reputation": 356, "user_id": 3174581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qp6Jo.jpg?s=128&g=1", "display_name": "rhodysurf", "link": "https://stackoverflow.com/users/3174581/rhodysurf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510950415, "creation_date": 1510777290, "last_edit_date": 1510778019, "question_id": 47316556, "link": "https://stackoverflow.com/questions/47316556/qthreadpool-maxthreadcount-different-in-application-and-dll", "title": "QThreadPool maxThreadCount different in Application and DLL", "body": "<p>When using QThreadPool::globalInstance() in an application I can set the maximum number of threads to a number (say 50 for this example)</p>\n\n<pre><code>QThreadPool::globalInstance()-&gt;setMaxThreadCount(50);\n</code></pre>\n\n<p>Which later we can query within that same application and 50 will be returned. However, if QThreadPool::maxThreadCount() is queried from within a DLL called by that same application, it returns that the maximum thread count is only 12. I can then increase the maxThreadCount in the library to be any number I would like, separate from the applications maxThreadCount number. </p>\n\n<p>So is the QThreadPool::globalInstance only global to the independent application and libraries somehow? Why wouldn't a Qt DLL and application that share the same process not have the same global QThreadPool?</p>\n"}, {"tags": ["c++", "c", "header"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 9, "creation_date": 1510777039, "post_id": 47316473, "comment_id": 81583815, "body": "Because they&#39;re in the sub-directory &#39;sys&#39; of wherever the include files are."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1510777052, "post_id": 47316473, "comment_id": 81583824, "body": "These headers aren&#39;t defined by the C(++) standards - these are OS-specific."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 1, "creation_date": 1510782367, "post_id": 47316473, "comment_id": 81586680, "body": "Suppose i write a <code>source.c</code> file inside a folder named test. If iput all headers defined by me inside inner folder <code>hd</code>, for using header i must write their addresses something like: <code>#include &lt;hd&#47;myheader.h&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1510781786, "post_id": 47317444, "comment_id": 81586385, "body": "Well, <i>sys/</i>, <i>net/</i> etc, and headers under them is defined by POSIX standard (I believe, did not verify), so it&#39;s not just a convention any more than C standard headers are a convention."}], "tags": [], "owner": {"reputation": 604, "user_id": 8908931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9a2630c9ff44937efd1bcb036b018e?s=128&d=identicon&r=PG&f=1", "display_name": "OriBS", "link": "https://stackoverflow.com/users/8908931/oribs"}, "is_accepted": false, "score": 4, "last_activity_date": 1510780831, "creation_date": 1510780831, "answer_id": 47317444, "question_id": 47316473, "link": "https://stackoverflow.com/questions/47316473/why-do-some-c-c-headers-have-sys-in-front-of-them/47317444#47317444", "title": "Why do some C/C++ headers have &quot;sys/&quot; in front of them?", "body": "<p>Practically, this shows those file are under a sub-folder named \"sys\" in  one of the standard list of system directories (e.g compiler default search path, or folder given as a parameter during the build).</p>\n\n<p>The reason they are in a sub-folder is to indicate they are not a part of the c or c++ standard libraries, but rather a specific extension, usually provided by the operating system you are working in.</p>\n\n<p>Note that this is only a matter of conventions, and not part of the specified behavior by C or C++. Usually to really understand those kind of header you will look at further documentation provided by the operating system you are working under.</p>\n"}], "owner": {"reputation": 10264, "user_id": 1655700, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xObp1.png?s=128&g=1", "display_name": "Tyler Durden", "link": "https://stackoverflow.com/users/1655700/tyler-durden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 1, "closed_date": 1510781682, "answer_count": 1, "score": 0, "last_activity_date": 1510781544, "creation_date": 1510776946, "question_id": 47316473, "link": "https://stackoverflow.com/questions/47316473/why-do-some-c-c-headers-have-sys-in-front-of-them", "closed_reason": "Needs details or clarity", "title": "Why do some C/C++ headers have &quot;sys/&quot; in front of them?", "body": "<p>Some C/C++ headers like <code>&lt;sys/ioctl.h&gt;</code> have a \"sys/\" prefix in front of them.</p>\n\n<p>(There are also some with a \"net/\" prefix.)</p>\n\n<p>Why is this?</p>\n"}, {"tags": ["c++", "list"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1510776180, "post_id": 47316262, "comment_id": 81583372, "body": "Well, you&#39;re not outputting any spaces between them, so..."}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 0, "creation_date": 1510776186, "post_id": 47316262, "comment_id": 81583374, "body": "Assuming you just want a single space separating them - <code>std::cout &lt;&lt; display-&gt;value &lt;&lt; &quot; &quot;;</code>. Printing a newline after you loop might be an idea too."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1510776355, "post_id": 47316262, "comment_id": 81583483, "body": "@molbdnilo... so it seems it is not he who wrote the program.:)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1510777754, "post_id": 47316262, "comment_id": 81584191, "body": "On a completely unrelated note, you should not <code>#include</code> .cpp files. Learn how to use your compiler for separate compilation instead."}], "answers": [{"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1510776850, "post_id": 47316348, "comment_id": 81583707, "body": "Splendid! Using your separator char const* sep = &quot;&quot;; he will get the same output.:)"}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1510776921, "post_id": 47316348, "comment_id": 81583741, "body": "@VladfromMoscow No, because he changes <code>sep</code> after the first item is displayed. Doing it that way ensures you don&#39;t get the stray space at the end like a naive version."}, {"owner": {"reputation": 1, "user_id": 8947479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1857390444275687/picture?type=large", "display_name": "Michael Hery", "link": "https://stackoverflow.com/users/8947479/michael-hery"}, "edited": false, "score": 0, "creation_date": 1510779942, "post_id": 47316348, "comment_id": 81585467, "body": "I still get the same output."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 1, "user_id": 8947479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1857390444275687/picture?type=large", "display_name": "Michael Hery", "link": "https://stackoverflow.com/users/8947479/michael-hery"}, "edited": false, "score": 0, "creation_date": 1510789506, "post_id": 47316348, "comment_id": 81589596, "body": "@MichaelHery \u2022 hmmm, shouldn&#39;t get the same output.  Change the first one to <code>sep = &quot;&gt;&quot;</code> and the second one to <code>sep = &quot;,&quot;</code> to help see the output better."}], "tags": [], "owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "is_accepted": false, "score": 1, "last_activity_date": 1510776443, "creation_date": 1510776443, "answer_id": 47316348, "question_id": 47316262, "link": "https://stackoverflow.com/questions/47316262/im-having-trouble-displaying-a-linked-list/47316348#47316348", "title": "I&#39;m having trouble displaying a linked list", "body": "<p>Add a separator for between your values.</p>\n\n<pre><code>char const* sep = \"\";\nwhile (display)\n{\n    std::cout &lt;&lt; sep &lt;&lt; display-&gt;value;\n    sep = \" \";\n    display = display-&gt;next;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8947479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1857390444275687/picture?type=large", "display_name": "Michael Hery", "link": "https://stackoverflow.com/users/8947479/michael-hery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510776443, "creation_date": 1510776077, "question_id": 47316262, "link": "https://stackoverflow.com/questions/47316262/im-having-trouble-displaying-a-linked-list", "title": "I&#39;m having trouble displaying a linked list", "body": "<p>When I run my program, it works as intended, except the items in the list have no spaces between them when the displayList() function is called.  I have 3 files.  The main cpp file is ShoppingList.cpp.  Then I have two other files for the linked list classification and implementation.</p>\n\n<pre><code>//ShoppingList.cpp\n//Michael Hery\n//COP 2001\n//11/9/17\n//Shopping List\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"strList.h\"\n#include \"strlist.cpp\"\n\nusing namespace std;\n\nint main()\n{\n    //Define a NumberList object\n    StrList list;\n    string item;\n    string delItem;\n    int menuSelection;\n\n    //Ask the user how many items to \n    //put in the list\n    cout &lt;&lt; \"How many items would you like to put it the list? &gt;&gt; \";\n    cin &gt;&gt; menuSelection;\n    while (menuSelection &lt; 1)\n    {\n        cout &lt;&lt; \"Please enter a valid number (greater than 0) &gt;&gt; \";\n        cin &gt;&gt; menuSelection;\n    }\n\n    for (int i = 0; i &lt; menuSelection; i++)\n    {\n        cout &lt;&lt; \"Please enter item \" &lt;&lt; i + 1 &lt;&lt; \": \";\n        cin &gt;&gt; item;\n        list.appendNode(item);\n    }\n\n    list.displayList();\n\n    cout &lt;&lt; \"Which item do you wish to delete from the list? &gt;&gt; \";\n    cin &gt;&gt; delItem;\n    while (delItem == \"\")\n    {\n        cout &lt;&lt; \"Please enter a valid item &gt;&gt; \";\n        cin &gt;&gt; delItem;\n    }\n\n    list.deleteNode(delItem);\n\n    list.displayList();\n\n    //Wait for user input to exit program\n    system(\"PAUSE\");\n\n    return 0;\n}\n\n\n\n //strList.h\n #ifndef STRLIST_H\n #define STRLIST_H\n\n #include &lt;iostream&gt;\n #include &lt;string&gt;\n\n namespace\n {\n     class StrList\n    {\n    private:\n        struct ListNode\n        {\n            std::string value;\n            struct ListNode *next;\n        };\n\n        ListNode *head;\n    public:\n        //Constructor\n        StrList()\n        {\n             head = nullptr;\n        }\n\n         //Destructor\n         ~StrList();\n\n         //Linked List Operations\n         void appendNode(std::string item);\n         void insertNode(std::string item);\n         void deleteNode(std::string item);\n         void displayList() const;\n     };\n }\n#endif\n\n\n\n //strList.cpp\n #ifndef STRLIST_CPP\n #define STRLIST_CPP\n\n #include &lt;iostream&gt;\n #include &lt;string&gt;\n #include \"strList.h\"\n\n void StrList::appendNode(std::string item)\n {\n     ListNode *newNode;\n     ListNode *nodePtr;\n\n     //Allocate a new node and store item there\n     newNode = new ListNode;\n     newNode-&gt;value = item;\n     newNode-&gt;next = nullptr;\n\n     //If there are no nodes in the list\n     //make newNode the first node\n     if (!head)\n         head = newNode;\n     else //Otherwise, insert newNode at the end\n     {\n         //Initialize nodePtr to head of the list\n         nodePtr = head;\n\n         //Find the last node in the list\n         while (nodePtr-&gt;next)\n             nodePtr = nodePtr-&gt;next;\n\n         //Insert newNode as the last node\n         nodePtr-&gt;next = newNode;\n     }\n }\n\n void StrList::insertNode(std::string item)\n {\n     ListNode *newNode;\n     ListNode *nodePtr;\n     ListNode *previousNode = nullptr;\n\n     //Allocate a new node and store num there\n     newNode = new ListNode;\n     newNode-&gt;value = item;\n\n     //If there are no nodes in the list\n     //make newNode the first node\n     if (!head)\n     {\n         head = newNode;\n         newNode-&gt;next = nullptr;\n     }\n     else //Otherwise, insert newNode\n     {\n         //Position nodePtr at the head of list\n         nodePtr = head;\n\n         //Initialize previousNode to nullPtr\n         previousNode = nullptr;\n\n         //Skip all nodes whose values is less than num\n         while (nodePtr != nullptr &amp;&amp; nodePtr-&gt;value &lt; item)\n         {\n             previousNode = nodePtr;\n             nodePtr = nodePtr-&gt;next;\n         }\n\n         //If the new node is to be the 1st in the list,\n         //insert it before all the other nodes\n         if (previousNode == nullptr)\n         {\n             head = newNode;\n             newNode-&gt;next = nodePtr;\n         }\n         else //Otherwise insert after the previous node\n         {\n             previousNode-&gt;next = newNode;\n             newNode-&gt;next = nodePtr;\n         }\n     }\n }\n\n void StrList::deleteNode(std::string item)\n {\n     ListNode *nodePtr;     //To traverse the list\n     ListNode *previousNode = nullptr; //To point to the previous node\n\n                             //If the list is empty, do nothing\n     if (!head)\n         return;\n\n     //Determine if the first node is the one\n     if (head-&gt;value == item)\n     {\n        nodePtr = head-&gt;next;\n        delete head;\n        head = nodePtr;\n     }\n     else\n     {\n         //Initialize nodePtr to head of list\n         nodePtr = head;\n\n         //Skip all nodes whose value member is\n         //not equal to num\n         while (nodePtr != nullptr &amp;&amp; nodePtr-&gt;value != item)\n         {\n             previousNode = nodePtr;\n             nodePtr = nodePtr-&gt;next;\n         }\n\n         //If nodePtr is not at the end of the list,\n         //link the previous node to the node after\n         //nodePtr, then delete nodePtr\n         if (nodePtr)\n         {\n             previousNode-&gt;next = nodePtr-&gt;next;\n             delete nodePtr;\n         }\n     }\n }\n\n StrList::~StrList()\n {\n     ListNode *nodePtr; //To traverse the list\n     ListNode *nextNode; //To point to the next node\n\n                    //Position nodePtr at the head of the list\n     nodePtr = head;\n\n     //While nodePtr is not at the end of the list\n     while (nodePtr != nullptr)\n     {\n         //Save a pointer to the next node\n         nextNode = nodePtr-&gt;next;\n\n         //Delete the current node\n         delete nodePtr;\n\n         //Position nodePtr at the next node\n         nodePtr = nextNode;\n     }\n }\n\n void StrList::displayList() const\n {\n     ListNode *display;\n     display = head;\n\n     std::cout &lt;&lt; \"**********************************\" &lt;&lt; std::endl;\n     std::cout &lt;&lt; \"****    Your Shopping List    ****\" &lt;&lt; std::endl;\n     std::cout &lt;&lt; \"**********************************\" &lt;&lt; std::endl;\n\n     while (display)\n     {\n         std::cout &lt;&lt; display-&gt;value;\n         display = display-&gt;next;\n     }\n }\n\n #endif\n</code></pre>\n\n<p>The problem lies in the displayList(); function towards the end of the file.</p>\n"}, {"tags": ["c++", "operator-overloading", "dereference"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1510775920, "post_id": 47315991, "comment_id": 81583247, "body": "I think you need to include a small, complete code example.  From what you have posted, it is not clear what is going awry."}], "answers": [{"tags": [], "owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "is_accepted": false, "score": 1, "last_activity_date": 1510792694, "last_edit_date": 1510792694, "creation_date": 1510776207, "answer_id": 47316290, "question_id": 47315991, "link": "https://stackoverflow.com/questions/47315991/dereference-works-with-ptr-operator-but-not-with-ptr/47316290#47316290", "title": "Dereference works with ptr-&gt;operator*() but not with *ptr", "body": "<p>The overloaded <code>operator*</code> will only go in effect if you use it directly on an object of the class you defined it on. It has no effect on pointers to such objects. If you use <code>*</code> on a pointer, it will just dereference it to the underlying object. Additional <code>*</code> would invoke the overloaded <code>operator*</code>.</p>\n\n<pre><code>MyIterator *iter = new MyIterator();\n*iter;  // This will only dereference the pointer.\n**iter; // This will dereference the pointer and call your operator*.\n</code></pre>\n\n<p>In your case the <code>ptr-&gt;operator*()</code> works, because the <code>-&gt;</code> already does the first dereference. It is equivalent to <code>(*ptr).operator*()</code>.</p>\n\n<p>Note that iterators are usually used by-value, you will rarely find them behind a pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1510792951, "creation_date": 1510792951, "answer_id": 47319734, "question_id": 47315991, "link": "https://stackoverflow.com/questions/47315991/dereference-works-with-ptr-operator-but-not-with-ptr/47319734#47319734", "title": "Dereference works with ptr-&gt;operator*() but not with *ptr", "body": "<p>Your loop is completely wrong.</p>\n\n<p>The <code>begin()</code> iterator is not being saved to <code>list_iter</code>, it is being compared directly to the <code>end()</code> iterator.  So the loop will run forever if the list is not empty.</p>\n\n<p><code>(*list_iter).operator++()</code> dereferences the iterator to access its data, then calls <code>operator++</code> on that data, not on the iterator itself.</p>\n\n<p><code>cout &lt;&lt; list_iter</code> is not defined for iterators.  You need to dereference the iterator so you can output the data being referenced: <code>cout &lt;&lt; *list_iter</code>.</p>\n\n<p><code>cout &lt;&lt; list_iter-&gt;operator*()</code> dereferences the iterator to access its data, then calls <code>operator*</code> on that data, not on the iterator itself.</p>\n\n<p>Your loop should look more like this instead:</p>\n\n<pre><code>for(list_iter = list-&gt;begin(); list_iter != list-&gt;end(); ++list_iter)\n{\n    cout &lt;&lt; *list_iter &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Or, in C++11, you can use a <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-for loop</a> instead and let it handle the iterator for you:</p>\n\n<pre><code>for(auto &amp;data : *list)\n{\n    cout &lt;&lt; data &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8947424, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q6SKNdRSJtM/AAAAAAAAAAI/AAAAAAAACT4/ElkX7JZOaxs/photo.jpg?sz=128", "display_name": "Michael Pereira", "link": "https://stackoverflow.com/users/8947424/michael-pereira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 47319734, "answer_count": 2, "score": 0, "last_activity_date": 1510792951, "creation_date": 1510775108, "question_id": 47315991, "link": "https://stackoverflow.com/questions/47315991/dereference-works-with-ptr-operator-but-not-with-ptr", "title": "Dereference works with ptr-&gt;operator*() but not with *ptr", "body": "<p>I'm creating an iterator for a list class.  The iterator has a dereference operator:</p>\n\n<pre><code>    T&amp; operator*() const {\n        return this-&gt;currentNode-&gt;data;\n    }\n</code></pre>\n\n<p>While trying to use the iterator:</p>\n\n<pre><code>for( ; list-&gt;begin() != list-&gt;end; (*list_iter).operator++())\n{\n    cout &lt;&lt; list_iter &lt;&lt; endl;\n    cout &lt;&lt; list_iter-&gt;operator*() &lt;&lt; endl;\n    //cout &lt;&lt; *list_iter &lt;&lt; endl;  //not working\n}\n</code></pre>\n\n<p>The commented line says \"invalid operand to binary experssion ostream and MyList::iterator\".  Likewise, if I change from (*list_iter).operator++() to list_iter++ or (*list_iter)++, I get a similar error.</p>\n\n<p>What I think is happening is something like this:</p>\n\n<pre><code>int num1 = 3;\nint *num2 = new int;\n*num2 = 3;\n</code></pre>\n\n<p>In this case, num1 is == *num2...  *num2 is functionally similar to num1 (both are integers), though num2 is a pointer to an integer, the *num2 makes it an integer.</p>\n\n<p>So in:</p>\n\n<pre><code>MyList list1();\nMyList *list2 = new MyList();\n</code></pre>\n\n<p>In this case, should I expect \"*list2\" to be similar to list1 in the same way that \"*num2\" is similar to num1?  Is <em>num2 going to call a dereferencer, or try to turn a MyList</em> into a MyList?</p>\n\n<p>Really struggling with what's going on under the hood here.  Thanks!</p>\n"}, {"tags": ["java", "python", "c++"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1510776099, "post_id": 47315956, "comment_id": 81583331, "body": "You should probably be using <code>numpy.ndarrays</code> that let you use sized-ints. These essentially give you object-oriented wrappers around primitive arrays."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1510776322, "post_id": 47315956, "comment_id": 81583458, "body": "If you use some good library, which i assume, native python int&#39;s are probably not used! As there seems to be no code to debug or discuss, it boils down to (imho) misconceptions and a very broad asking for language A vs. language B. These kind of questions are off-topic here."}, {"owner": {"reputation": 22, "user_id": 3522986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6730bfaa1d803a8ca884e6fe625aeb?s=128&d=identicon&r=PG&f=1", "display_name": "V-Nesh", "link": "https://stackoverflow.com/users/3522986/v-nesh"}, "edited": false, "score": 0, "creation_date": 1510787967, "post_id": 47315956, "comment_id": 81589095, "body": "Sorry for the unclear question. I am new to posting questions in this medium. I have changed it now. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 493, "user_id": 6111465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/72fJG.png?s=128&g=1", "display_name": "gammazero", "link": "https://stackoverflow.com/users/6111465/gammazero"}, "is_accepted": false, "score": 1, "last_activity_date": 1510776026, "creation_date": 1510776026, "answer_id": 47316245, "question_id": 47315956, "link": "https://stackoverflow.com/questions/47315956/difference-between-int-datatype-used-in-python-and-other-languages/47316245#47316245", "title": "Difference between int datatype used in Python and other languages", "body": "<p>Everything in Python is an object and <code>int</code> is no exception. With code like <code>a = 42</code>, Python constructs an integer object whose value is 42 internally.  In Python, an object has a type and a reference count. Different ints with the same value may reuse the same object.</p>\n"}], "owner": {"reputation": 22, "user_id": 3522986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6730bfaa1d803a8ca884e6fe625aeb?s=128&d=identicon&r=PG&f=1", "display_name": "V-Nesh", "link": "https://stackoverflow.com/users/3522986/v-nesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1510778325, "answer_count": 1, "score": -2, "last_activity_date": 1510787790, "creation_date": 1510774961, "last_edit_date": 1510787790, "question_id": 47315956, "link": "https://stackoverflow.com/questions/47315956/difference-between-int-datatype-used-in-python-and-other-languages", "closed_reason": "Needs more focus", "title": "Difference between int datatype used in Python and other languages", "body": "<p>I found that Python int size is generally 24 byte whereas C++,Java or C# int size is very less (4 bytes)? Why the size of datatype is large in Python?</p>\n"}, {"tags": ["c++", "arrays", "char", "initialization", "compiler-warnings"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1510774675, "post_id": 47315806, "comment_id": 81582594, "body": "Don&#39;t you think when you ask about a compiler behavior it would be helpful to mention which one you are using?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1510774736, "post_id": 47315806, "comment_id": 81582619, "body": "@Slava afaik narrowing conversions inside <code>{}</code> should be disallowed on any compiler"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1510774786, "post_id": 47315806, "comment_id": 81582644, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/list_initialization</a> basically when you use list initialisation it is more strict and compiler will complain"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510775007, "post_id": 47315806, "comment_id": 81582746, "body": "@tobi303 we do not know that yet, so when you ask &quot;why compiler does that or does not do this&quot; it would not hurt to say which one."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1510775073, "post_id": 47315806, "comment_id": 81582788, "body": "@Slava errors in general should not depend on compiler but on the version of the standard. Nevermind, I get your point"}, {"owner": {"reputation": 812, "user_id": 3294674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14cfc283085251d99c33ebf3296bbd99?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/3294674/marcus"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1510775117, "post_id": 47315806, "comment_id": 81582816, "body": "@Slava I&#39;ve added the compiler version."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1510775196, "post_id": 47315806, "comment_id": 81582863, "body": "@Marcus yes I see that, thanks"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1510776823, "post_id": 47315806, "comment_id": 81583693, "body": "<code>char</code> is never interpreted as <code>signed char</code>. <code>char</code> and <code>signed char</code> are always distinct types. They may or may not have the same representation."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1510776985, "post_id": 47315806, "comment_id": 81583780, "body": "<code>const char mydata[] = { 0x80 };</code> does not create or initialize a <code>char*</code>. It creates and initializes an array object of type <code>const char[2]</code>. Arrays are not pointers. See section 6 of the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a>; most of it applies to C++ as well."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1510782722, "post_id": 47315806, "comment_id": 81586872, "body": "This question is answered by reading the error message carefully"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 5, "last_activity_date": 1510775160, "creation_date": 1510775160, "answer_id": 47316016, "question_id": 47315806, "link": "https://stackoverflow.com/questions/47315806/difference-in-initializing-char-array-and-char-with-integer-literals/47316016#47316016", "title": "Difference in initializing char-array and char with integer literals", "body": "<p>This is actually one of the reasons why <code>{}</code> initialization should be prefered: It does not allow narrowing conversions. In contrast to this, the old way of initalization (as in <code>const char data = 0x80</code>) does allow narrowing conversions.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1510776902, "post_id": 47316402, "comment_id": 81583732, "body": "<code>const char data = 0x80</code> <i>could</i> produce the same warning, it&#39;s just not required."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1510777307, "post_id": 47316402, "comment_id": 81583974, "body": "@Keith Thompson: but with <code>const char data = 0x80</code>, the program is not ill-formed, while with <code>const char data { 0x80 }</code> it is, right?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1510781960, "post_id": 47316402, "comment_id": 81586481, "body": "I believe so (but I know C better than I know C++)."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1510776644, "creation_date": 1510776644, "answer_id": 47316402, "question_id": 47315806, "link": "https://stackoverflow.com/questions/47315806/difference-in-initializing-char-array-and-char-with-integer-literals/47316402#47316402", "title": "Difference in initializing char-array and char with integer literals", "body": "<p>An initializer of the form <code>const char c = 0x80</code> is a much older construct than \ninitializer lists, which have been introduced later. So it was possible to define stricter rules for initializer lists, while these rules where not applied to \"older\" initializers (probably because of not to break \"older\" code more than necessary). </p>\n\n<p>Hence, initializer lists as defined in <a href=\"https://timsong-cpp.github.io/cppwp/n3337/dcl.init.aggr#2\" rel=\"nofollow noreferrer\">this online c++ standard draft</a> forbid such narrowing:</p>\n\n<blockquote>\n  <p><strong>8.5.1 Aggregates</strong></p>\n  \n  <p>(2) When an aggregate is initialized by an initializer list, as\n  specified in [dcl.init.list], the elements of the initializer list are\n  taken as initializers for the members of the aggregate, in increasing\n  subscript or member order. Each member is copy-initialized from the\n  corresponding initializer-clause. <strong>If the initializer-clause is an\n  expression and a narrowing conversion ([dcl.init.list]) is required to\n  convert the expression, the program is ill-formed.</strong> ...</p>\n</blockquote>\n\n<p>BTW: If you use a brace initializer like <code>const char data { 0x80 }</code>, you will get an error, too. So the stricter rules are due to brace-initializers / initializer lists, and not due to whether you initialize an array or a scalar value.</p>\n"}], "owner": {"reputation": 812, "user_id": 3294674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14cfc283085251d99c33ebf3296bbd99?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/3294674/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 3, "accepted_answer_id": 47316402, "answer_count": 2, "score": 8, "last_activity_date": 1510782656, "creation_date": 1510774389, "last_edit_date": 1510782656, "question_id": 47315806, "link": "https://stackoverflow.com/questions/47315806/difference-in-initializing-char-array-and-char-with-integer-literals", "title": "Difference in initializing char-array and char with integer literals", "body": "<p>On my system (<em>4.13.11-1-ARCH, gcc 7.2.0</em>) <code>char</code> is <code>signed</code>. When initializing an array of <code>char</code> with an <code>integer literal</code> like this: </p>\n\n<pre><code>const char mydata[] = {\n    0x80\n};\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>error: narrowing conversion of \u2018128\u2019 from \u2018int\u2019 to \u2018char\u2019 inside { } [-Wnarrowing]\n</code></pre>\n\n<p>However, when I instead do <code>const char data = 0x80</code> the compiler is not worried of any narrowing, although it happens of course. The output is <code>7F</code>, the highest positive <code>signed char</code> value.</p>\n\n<h1>Question</h1>\n\n<p>Why is the compiler not equally worried about truncation in both cases?</p>\n"}, {"tags": ["c++", "autotools", "libtool"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510784539, "post_id": 47315717, "comment_id": 81587787, "body": "If <code>libtool</code> is really adding C source files then they ought to be compiled via a C compiler.  C and C++ are distinct languages, each with features that the other lacks.  It is not, in general, safe to assume that you can compile C source successfully with a C++ compiler, and if you do succeed in that, it is not safe to assume that the resulting binary has semantics equivalent to those that one built from the same source by a C compiler would have."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510784658, "post_id": 47315717, "comment_id": 81587834, "body": "But this whole thing is surprising to me.  Is it related to LTDL?  I can&#39;t think of any other reason why <code>libtool</code> would need to add any runtime code to a project."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510784748, "post_id": 47315717, "comment_id": 81587883, "body": "@JohnBollinger - I think Libtool adds some sort of wrapper program that calls the real program (or some component in libtool does it). I only realized it when the wrapper failed to compile. See, for example, <a href=\"https://lists.gnu.org/archive/html/bug-libtool/2017-11/msg00002.html\" rel=\"nofollow noreferrer\">C++ compiler, Newlib and &quot;implicit declaration of function &#39;_spawnv&#39;&quot;</a> on the libtool mailing list."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510784897, "post_id": 47315717, "comment_id": 81587967, "body": "Not in my builds for Linux, OS X, or MinGW.  But again, I could believe that it might happen if LTDL is involved to support dynamically loadable modules on systems where that is tricky."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1510785089, "post_id": 47315717, "comment_id": 81588058, "body": "Anyway, have you considered setting the needed flags in <code>AM_CFLAGS</code>?  That shouldn&#39;t affect any of your C++ compilations, but it ought to be applied to C sources involved in any target that doesn&#39;t define its own C flags."}], "answers": [{"tags": [], "owner": {"reputation": 401, "user_id": 413238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869deec4e42e0404fb8ccbf8b7b01d4f?s=128&d=identicon&r=PG", "display_name": "Gunee", "link": "https://stackoverflow.com/users/413238/gunee"}, "is_accepted": false, "score": 0, "last_activity_date": 1512124388, "creation_date": 1512124388, "answer_id": 47591450, "question_id": 47315717, "link": "https://stackoverflow.com/questions/47315717/how-to-tell-libtool-to-use-c-and-not-c/47591450#47591450", "title": "How to tell Libtool to use C++ and not C?", "body": "<p>You could add the C compiler options you mention to the CFLAGS env var before compilation. Do you see any reasons why this would not work?</p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512124388, "creation_date": 1510774067, "question_id": 47315717, "link": "https://stackoverflow.com/questions/47315717/how-to-tell-libtool-to-use-c-and-not-c", "title": "How to tell Libtool to use C++ and not C?", "body": "<p>I am working on an <a href=\"https://github.com/noloader/cryptopp-autotools\" rel=\"nofollow noreferrer\">Autools front-end for a C++ library</a>. It looks like Libtool is adding C source files to the project and its causing a fair amount of trouble on some platforms. We think its causing unexplained crashes like <a href=\"https://stackoverflow.com/q/47314385/608639\">Message \u201cDuring startup program terminated with signal SIGKILL\u201d from GDB</a>.</p>\n\n<p>The C source files cause trouble for several reasons. First, we only query <code>CXXFLAGS</code> and set <code>AM_CXXFLAGS</code>; and we don't do anything with <code>CFLAGS</code> or <code>AM_CFLAGS</code>. Second, C files need additional options in a C++ project, like <code>-frtti</code> and <code>-fexceptions</code> under GCC and options like <code>-qrtti</code> under IBM XL C/C++ compiler. Its not clear to me if libtool is adding the necessary options. Third, the C source files added by Libtool need additional Posix options on platforms that use Newlib, like Cygwin and MSYS. Our source files don't need the options.</p>\n\n<p>I'd like to force Libtool to use C++ instead of C but I have not been able to locate an option or method to do so. I think the easiest path would be for Libtool to use <code>lt-&lt;some file&gt;.cpp</code> and <code>CXXFLAGS</code> rather than <code>lt-&lt;some file&gt;.c</code> and <code>CFLAGS</code> but I can't figure out how to do it.</p>\n\n<p>How do we tell Libtool to use C++ and not C?</p>\n\n<hr>\n\n<p>A related problem is <a href=\"https://stackoverflow.com/q/47060001/608639\">How to disable C compiler in C++ Autotools project</a>, but it only ask to use the C++ compiler for feature testing.</p>\n"}, {"tags": ["c++", "c++20", "spaceship-operator"], "comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1510773768, "post_id": 47315539, "comment_id": 81582134, "body": "BTW the feature is incompatible with <code>a&gt;&gt;operator&lt;=&gt;&gt;c;</code> that currently can be valid."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 2, "creation_date": 1510774195, "post_id": 47315539, "comment_id": 81582349, "body": "@JohannesSchaub-litb Yes, it is. That\u2019s also mentioned in the proposal: \u201cTokenization follows max munch as usual. [...] This is the only known backward source incompatibility, and it is intentional. (We could adopt a special parsing rule to keep such code working without a space, but I would discourage that as having too little benefit for the trouble.)\u201d. Seeing as you would usually have a space and/or parentheses there anyway, I think I agree with the proposal here."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1510775203, "post_id": 47315539, "comment_id": 81582867, "body": "@Barry it isn&#39;t mentioned in the proposal, as far as I can see (it only gives a following comparison, but not a following switch, as backward incompatiblity. and it says &quot;this is the only known backward source incompatibility&quot;)"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1510778564, "post_id": 47315539, "comment_id": 81584660, "body": "@JohannesSchaub-litb 1. Please check who you\u2019re replying to; Barry didn\u2019t say the proposal mentioned that, I did, and I almost missed your comment. 2. I assume you mean \u201ca following shift\u201d, since I don\u2019t see how a following switch can cause an issue. 3. I read it as saying maximum munch is the only known backward source incompatibility, although I don\u2019t know why Herb didn\u2019t list shift as one of the two places he\u2019s aware of maximum munch occurring."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510779047, "post_id": 47315539, "comment_id": 81584962, "body": "(For reference, <a href=\"https://godbolt.org/g/TsUzxX\" rel=\"nofollow noreferrer\">here</a> is an example where maximum munch changes the tokenization in a shift expression)"}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510773812, "post_id": 47315567, "comment_id": 81582157, "body": "Here you\u2019re calling <code>*lhs</code> and <code>*rhs</code> when you know one of them is empty. Also, why are you implementing this as a non-member when <code>operator&lt;=&gt;</code> is intended to be implemented as a member?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510773843, "post_id": 47315567, "comment_id": 81582170, "body": "@DanielH I fixed his typo in the 2nd comparison"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510773896, "post_id": 47315567, "comment_id": 81582196, "body": "(I also feel like calling <code>has_value</code> is clearer than the explicit cast to <code>bool</code>, but that\u2019s a matter of style)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1510773919, "post_id": 47315567, "comment_id": 81582209, "body": "@DanielH Why in the world do you think it is &quot;intended to be implemented as a member&quot;?  My complaint would rather be &quot;why are you a template on both, and not a koenig operator&quot;."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1510773981, "post_id": 47315567, "comment_id": 81582243, "body": "@Yakk Thanks! And it states as such in the paper. I just wrote it as a non-member for clarity and not having to write <code>**this</code>"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1510774029, "post_id": 47315567, "comment_id": 81582268, "body": "@Yakk Because of the note on page 3 of the proposal which says \u201cNormally, <code>operator&lt;=&gt;</code> should be just a member function; you will still get conversions on each parameter because of the symmetric generation rules in &#167;2.3.\u201d, right above the start of section 1.4.1."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1510779380, "post_id": 47315567, "comment_id": 81585141, "body": "@Yakk I missed your edit. Presumably you template on both so that if you have optionals of two different but comparable types, like <code>string</code> and <code>string_view</code>, you can still compare them."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510781207, "post_id": 47315567, "comment_id": 81586107, "body": "@DanielH I get why you have to have that, but my problem is that by templating on both you cannot support types that can implicitly convert-to optional on either side of the <code>&lt;=&gt;</code>.  As an example, try streaming <code>struct hello_world { operator std::string() const { return &quot;hello world&quot;; } }</code> to <code>std::ostream</code> and watch it break because <code>&lt;&lt;</code> in question is &quot;over-templated&quot;."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1510782140, "post_id": 47315567, "comment_id": 81586580, "body": "@Yakk Would that be solvable by adding a non-template overload for <code>optional&lt;T&gt;</code> specifically?"}, {"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1511049505, "post_id": 47315567, "comment_id": 81697407, "body": "@DanielH You could constrain the second template to types which are not convertible to <code>optional&lt;T&gt;</code> and keep the first one as is."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1511352739, "post_id": 47315567, "comment_id": 81822959, "body": "Why not implement the <code>optional&lt;T&gt; &lt;=&gt; optional&lt;U&gt;</code> case using the <code>optional&lt;T&gt; &lt;=&gt; U</code> case? E.g. <code>if(has_value()) return **this &lt;=&gt; rhs; else return has_value() &lt;=&gt; rhs.has_value();</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1511742849, "post_id": 47315567, "comment_id": 81960805, "body": "@dyp You could, but I don&#39;t see the benefit? Doesn&#39;t save you any code."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1511776823, "post_id": 47315567, "comment_id": 81972090, "body": "I&#39;m a bit aggressive against code duplication lately, and this <code>compare_3way</code> is repeated four times; we could drop two of them. I guess you could even implement all comparison functions using a single implementation, if <code>optional&lt;T&amp;&gt;</code> was supported (wrap <code>U const&amp;</code> -&gt; <code>optional&lt;U const&amp;&gt;</code>)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1512070732, "post_id": 47315567, "comment_id": 82120053, "body": "I was musing about sum/product types, and it makes me think your code should have a <code>if (auto kind = (has_value() &lt;=&gt; rhs.has_value())</code> directly in it. (or does it need a <code>;kind==0</code>?)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 9, "last_activity_date": 1564348229, "last_edit_date": 1564348229, "creation_date": 1510773455, "answer_id": 47315567, "question_id": 47315539, "link": "https://stackoverflow.com/questions/47315539/implementing-operator-for-optionalt/47315567#47315567", "title": "Implementing operator&lt;=&gt; for optional&lt;T&gt;", "body": "<p>With <code>&lt;=&gt;</code> we have to make a decision: what do we want to do if the underlying comparison we need does not yet implement <code>&lt;=&gt;</code>? </p>\n\n<p>One option is: don't care. Just use <code>&lt;=&gt;</code> and if the relevant types don't provide it, we're not comparable. That makes for a very concise implementation (note that you need to do the same thing for <code>==</code> for a total of six functions):</p>\n\n<pre><code>template &lt;typename T&gt;\nclass optional {\npublic:\n    // ...\n\n    template &lt;typename U&gt;\n    constexpr std::compare_three_way_result_t&lt;T, U&gt;\n    operator&lt;=&gt;(optional&lt;U&gt; const&amp; rhs) const\n    {\n        if (has_value() &amp;&amp; rhs) {\n            return **this &lt;=&gt; *rhs;\n        } else {\n            return has_value() &lt;=&gt; rhs.has_value();\n        }\n    }\n\n    template &lt;typename U&gt;\n    constexpr std::compare_three_way_result_t&lt;T, U&gt;\n    operator&lt;=&gt;(U const&amp; rhs) const\n    {\n        if (has_value()) {\n            return **this &lt;=&gt; *rhs;\n        } else {\n            return strong_ordering::less;\n        }\n    }\n\n    constexpr strong_ordering operator&lt;=&gt;(nullopt_t ) const {\n        return has_value() ? strong_ordering::greater\n                           : strong_ordering::equal;\n    }\n};\n</code></pre>\n\n<p>The three-way comparison between <code>bool</code>s yields <code>std::strong_ordering</code>, which is implicitly convertible to the other comparison categories. Likewise, <code>strong_ordering::less</code> being implicitly convertible to <code>weak_ordering::less</code>, <code>partial_ordering::less</code>, <code>strong_equality::unequal</code>, or <code>weak_equality::nonequivalent</code>, as appropriate. </p>\n\n<p>The above is the super nice, happy answer. And hopefully as time progresses, people will adopt <code>&lt;=&gt;</code> and more and more code will be able to rely on the happy answer.</p>\n\n<hr />\n\n<p>Another option is: we do care, and want to fallback to synthesizing an ordering. That is, if we need to compare a <code>T</code> and a <code>U</code> and they don't provide a <code>&lt;=&gt;</code>, we can use one of the new customization point objects in the standard library. Which one though? The most conservative option is to synthesize a <code>partial_ordering</code> with <code>compare_partial_order_fallback</code>. This guarantees that we will always get the right answer.</p>\n\n<p>For the <code>optional&lt;T&gt;</code> vs <code>optional&lt;U&gt;</code> comparison, that looks like:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass optional {\npublic:\n    // ...\n\n    template &lt;typename U&gt;\n    constexpr auto operator&lt;=&gt;(optional&lt;U&gt; const&amp; rhs) const\n        -&gt; decltype(std::compare_partial_order_fallback(**this, *rhs))\n    {\n        if (has_value() &amp;&amp; rhs) {\n            return std::compare_partial_order_fallback(**this, *rhs);\n        } else {\n            return has_value() &lt;=&gt; rhs.has_value();\n        }\n    }\n\n    // ...\n};\n</code></pre>\n\n<p>Unfortunately, as implemented above, our comparison now always returns <code>partial_ordering</code> -- even between two <code>optional&lt;int&gt;</code>s. So a better alternative might be to use whatever <code>&lt;=&gt;</code> returns and use the conservative fallback otherwise. I have no idea how to name this concept yet, so I'll just go with:</p>\n\n<pre><code>template &lt;typename T, std::three_way_comparable_with&lt;T&gt; U&gt;\nconstexpr auto spaceship_or_fallback(T const&amp; t, U const&amp; u) {\n    return t &lt;=&gt; u;\n}\n\ntemplate &lt;typename T, typename U&gt;\nconstexpr auto spaceship_or_fallback(T const&amp; t, U const&amp; u)\n    -&gt; decltype(std::compare_partial_order_fallback(t, u))\n{\n    return std::compare_partial_order_fallback(t, u);\n}\n</code></pre>\n\n<p>and use that:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass optional {\npublic:\n    // ...\n\n    template &lt;typename U&gt;\n    constexpr auto operator&lt;=&gt;(optional&lt;U&gt; const&amp; rhs) const\n        -&gt; decltype(spaceship_or_fallback(**this, *rhs))\n    {\n        if (has_value() &amp;&amp; rhs) {\n            return spaceship_or_fallback(**this, *rhs);\n        } else {\n            return has_value() &lt;=&gt; rhs.has_value();\n        }\n    }\n\n    // ...\n};\n</code></pre>\n\n<hr />\n\n<p>A third option, the most conservative option, is what the Standard Library will take. Provide <em>both</em> the relational operators <em>and</em> the three-way comparison:</p>\n\n<pre><code>template &lt;typename T&gt; class optional { /* ... */ };\n\ntemplate &lt;typename T, typename U&gt;\nconstexpr bool operator&lt;(optional&lt;T&gt; const&amp;, optional&lt;U&gt; const&amp;);\ntemplate &lt;typename T, typename U&gt;\nconstexpr bool operator&gt;(optional&lt;T&gt; const&amp;, optional&lt;U&gt; const&amp;);\ntemplate &lt;typename T, typename U&gt;\nconstexpr bool operator&lt;=(optional&lt;T&gt; const&amp;, optional&lt;U&gt; const&amp;);\ntemplate &lt;typename T, typename U&gt;\nconstexpr bool operator&gt;=(optional&lt;T&gt; const&amp;, optional&lt;U&gt; const&amp;);\n\ntemplate &lt;typename T, std::three_way_comparable_with&lt;T&gt; U&gt;\nstd::compare_three_way_result_t&lt;T, U&gt;\noperator&lt;=&gt;(optional&lt;T&gt; const&amp; x, optional&lt;U&gt; const&amp; y) {\n    if (x &amp;&amp; y) {\n        return *x &lt;=&gt; *y;\n    } else {\n        return x.has_value() &lt;=&gt; y.has_value();\n    }\n}\n</code></pre>\n\n<p>This is the most conservative option as it effectively takes both the C++17-and-earlier comparison implementation strategy <em>and</em> the C++20 comparison implementation strategy. As in: the \"Why not both?\" strategy. The use of the <code>concept</code> on <code>operator&lt;=&gt;</code> is what ensures that <code>a &lt; b</code> invokes <code>&lt;=&gt;</code> where possible, instead of <code>&lt;</code>.</p>\n\n<p>It's by far the most tedious and verbose approach, with lots of boilerplate, but it ensures that for existing, single-object comparison types, existing comparisons continue to work and do the same thing. The standard library has to be conservative like this.</p>\n\n<p>But new code doesn't. </p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 4, "answer_count": 1, "score": 17, "last_activity_date": 1564348229, "creation_date": 1510773330, "last_edit_date": 1511086952, "question_id": 47315539, "link": "https://stackoverflow.com/questions/47315539/implementing-operator-for-optionalt", "title": "Implementing operator&lt;=&gt; for optional&lt;T&gt;", "body": "<p>With <code>operator&lt;=&gt;</code> being added into C++20, I wanted to try to reason about how to implement this operator for those cases where it's not a simple member-wise comparison. </p>\n\n<p>How would you implement the spaceship operator for comparing an <code>optional&lt;T&gt;</code> to an <code>optional&lt;U&gt;</code>or a <code>U</code>, which is a case where we either have to compare the <code>T</code> to the <code>U</code> or compare underlying states, getting the correct return type? There isn't such an example in the <a href=\"http://wg21.link/p0515\" rel=\"noreferrer\">latest paper</a>.</p>\n"}, {"tags": ["c++", "qt", "opengl", "qt5", "qt3d"], "answers": [{"comments": [{"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1510778059, "post_id": 47316675, "comment_id": 81584359, "body": "Ok, that makes sense if <code>QTextureImage</code> doesn&#39;t hold the image data itself. Do you know, would the texture coordinates map directly to the pixel position in the <code>QImage</code>?"}, {"owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "reply_to_user": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 1, "creation_date": 1510778596, "post_id": 47316675, "comment_id": 81584679, "body": "No, texture coordinates range from 0.0 to 1.0 starting at bottom left corner. <code>QImage</code> uses regular pixel coordinates from 0 to width/height starting at top left corner. So you have to multiply by width and height, flip Y axis and round."}, {"owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "reply_to_user": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 1, "creation_date": 1510778767, "post_id": 47316675, "comment_id": 81584796, "body": "It is also possible for texture coordinates to be out of the [0.0, 1.0] range. In that case OpenGL wraps or clamps them (wraps by default), so if your mesh data may contain such coordinates, you need to wrap/clamp them as well."}], "tags": [], "owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "is_accepted": true, "score": 1, "last_activity_date": 1510777739, "creation_date": 1510777739, "answer_id": 47316675, "question_id": 47315506, "link": "https://stackoverflow.com/questions/47315506/get-diffuse-map-rgb-data-from-qt3d-pickevent/47316675#47316675", "title": "Get diffuse map RGB data from Qt3D PickEvent", "body": "<p>The <code>QTextureImage</code> does not hold the image data itself, it just holds information about the texture that was uploaded to OpenGL.</p>\n\n<p>It is possible to get the texture data back with raw OpenGL. There is probably some way to do it using Qt too, but I would not recommend it. Copying data between GPU and CPU is slow, so better to avoid it if not necessary.</p>\n\n<p>I would recommend to keep the texture loaded in a <code>QImage</code>, then you can easily query to pixel colors using <code>pixel(..)</code> or <code>pixelColor(..)</code> methods. It may seem wasteful to have it loaded twice, but if you need to access the pixel data from CPU, there is no better way.</p>\n"}], "owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 47316675, "answer_count": 1, "score": 0, "last_activity_date": 1510841683, "creation_date": 1510773230, "last_edit_date": 1510841683, "question_id": 47315506, "link": "https://stackoverflow.com/questions/47315506/get-diffuse-map-rgb-data-from-qt3d-pickevent", "title": "Get diffuse map RGB data from Qt3D PickEvent", "body": "<p>I am developing an application using Qt3D's Scene3D components. I have loaded a mesh obj into the <code>Scene3D</code> and applying a PNG image as diffuse map via <code>QDiffuseMapMaterial</code>. Great so far, object renders with map correct.</p>\n\n<p>Now, I need to get the RGB properties for a picked vertex using a <code>QPickEvent</code>. I aquire a few vertex properties like so:</p>\n\n<pre><code>ESEctoPoint ES3DAnalysisEntity::getVertexDataFromIndex(quint32 idx)\n{\n    ESEctoPoint vData;\n    vData.vIndex = idx;\n\n    const QGeometry *geometry = m_mesh-&gt;geometry();\n    for (QAttribute* attribute : geometry-&gt;attributes())\n    {\n        if (attribute-&gt;name() == defaultTextureCoordinateAttributeName())\n        {\n            vData.vTexCoord = extractVertexData&lt;QVector2D, uint&gt;(attribute, idx);\n        }\n...\n    }\n\n    return vData;\n}\n</code></pre>\n\n<p>I then have the vertex index, position, and uv texture coordinates. Now, what I need is the RGB data from the uv position for the given vertex. How do I go about getting that data? I am keeping the diffuse material and the <code>QTextureImage</code> containing the diffuse map in memory. I'm sure there's a way to get the RGB value, I just need a little help with how to translate the uv texture coordinate to QTextureImage and get the pixel data.</p>\n\n<p><strong>FOLLOWUP</strong></p>\n\n<p>Using the answer given, I am holding the image in a <code>QImage</code> object, I get the vertex position, followed by texture coordinates. Using the texture coordinates, I am able to get the pixel position and the pixel's color using this small function:</p>\n\n<pre><code>QColor getPixelColorForTexturePos(QVector2D const&amp; uvPos, QImage* map)\n{\n    auto x = uvPos.x() * map-&gt;width();\n    auto y = map-&gt;height() - (uvPos.y() * map-&gt;height());\n    return map-&gt;pixelColor((int)x, (int)y);\n}\n</code></pre>\n"}, {"tags": ["c++", "validation", "input", "menu", "getline"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510773205, "post_id": 47315456, "comment_id": 81581823, "body": "Far too much code. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Something like 5 lines of code should be sufficient to demonstrate a problem with <code>getline</code>"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510774021, "post_id": 47315456, "comment_id": 81582265, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/21567291/why-does-stdgetline-skip-input-after-a-formatted-extraction\">Why does std::getline() skip input after a formatted extraction?</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510780378, "post_id": 47315456, "comment_id": 81585687, "body": "What are the type(s) of your string variables?  Are they character arrays or <code>std::string</code> or some other data type?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8877616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f4a2d70d503703f0cd6de7ccc28b89e?s=128&d=identicon&r=PG&f=1", "display_name": "Shane Leavens", "link": "https://stackoverflow.com/users/8877616/shane-leavens"}, "edited": false, "score": 0, "creation_date": 1510786937, "post_id": 47318149, "comment_id": 81588748, "body": "The majority of my problems were with cin,get() as you said especially with where I had it located in the validation code."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 0, "last_activity_date": 1510783742, "creation_date": 1510783742, "answer_id": 47318149, "question_id": 47315456, "link": "https://stackoverflow.com/questions/47315456/using-getline-to-input-strings-into-the-program-is-causing-some-kind-of-overfl/47318149#47318149", "title": "using getline() to input strings into the program is causing some kind of overflow into the next input", "body": "<p>You are creating a lot of problems by adding <code>if(cin.get() == '.')</code> </p>\n\n<p>The <code>&gt;&gt;</code> operator will convert the input string <code>\"1.\"</code> to <code>1</code>, and if you call <code>ignore(...,'\\n')</code> the <code>.</code> and any other characters before <code>\\n</code> will be ignored. Test for <code>if(cin &gt;&gt; number){...}</code> is also not necessary. You can initialize the value to <code>-1</code> to indicate an error:</p>\n\n<pre><code>int menuChoice;\nfor(;;)\n{\n    menuChoice = -1;\n    cin &gt;&gt; menuChoice;\n    cout &lt;&lt; menuChoice;\n    cin.clear();\n    cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n    if(menuChoice == 1 || menuChoice == 2)\n    {\n        cout &lt;&lt; menuChoice &lt;&lt; \"\\n\";\n        break;\n    }\n    cout &lt;&lt; \"You did not enter a valid menu option. Please try again.\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Just make sure you are using the right input. For Yes or No option the input should be <code>char</code>:</p>\n\n<pre><code>cout &lt;&lt; \"enter y or n\\n\";\nfor(;;)\n{\n    char val;\n    cin &gt;&gt; val;\n    if(val != 'y' &amp;&amp; val != 'n')\n    {\n        cout &lt;&lt; \"You did not enter either y or n. Please try again.\" &lt;&lt; endl;\n        cin.clear();\n        cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n    }\n    else\n        break;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8877616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f4a2d70d503703f0cd6de7ccc28b89e?s=128&d=identicon&r=PG&f=1", "display_name": "Shane Leavens", "link": "https://stackoverflow.com/users/8877616/shane-leavens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "closed_date": 1510800157, "accepted_answer_id": 47318149, "answer_count": 1, "score": 0, "last_activity_date": 1510783742, "creation_date": 1510773032, "question_id": 47315456, "link": "https://stackoverflow.com/questions/47315456/using-getline-to-input-strings-into-the-program-is-causing-some-kind-of-overfl", "closed_reason": "Not suitable for this site", "title": "using getline() to input strings into the program is causing some kind of overflow into the next input", "body": "<p>I am having a number of problems in my program that all have to do with input. \nThe first thing in the program I ask the user to input is their name which I do so with this</p>\n\n<pre><code>cout &lt;&lt; \"Please tell me your name.\" &lt;&lt; endl;\ngetline(cin, user_name);\ncout &lt;&lt; \"Hello \" &lt;&lt; user_name &lt;&lt; \" and welcome to Fantasy Battle!\" &lt;&lt; endl;\n</code></pre>\n\n<p>where user_name is declared as a string variable elsewhere. This part seems to have no problems as the following message displays to the screen correctly</p>\n\n<p>The next input from the user comes from this code</p>\n\n<pre><code>{\ncout &lt;&lt; \"Hello, what would you like to do?\" &lt;&lt; endl;\ncout &lt;&lt; \"1. Play\" &lt;&lt; endl &lt;&lt; \"2. Exit\" &lt;&lt; endl;\ncout &lt;&lt; \"Please enter the number corresponding to your choice from the list \nabove.\" &lt;&lt; endl;\nfor(;;)\n{\n    if(cin &gt;&gt; menuChoice)\n    {\n        if(cin.get() == '.')\n        {\n            cin.clear();\n            cin.ignore(10000, '\\n');\n        }\n        if(menuChoice == 1 || menuChoice == 2)\n            break;\n        else\n        {\n            cout &lt;&lt; \"You did not enter a valid menu option. Please try \n            again.\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore(100000, '\\n');\n        }\n    }\n    else\n    {\n        cout &lt;&lt; \"You did not enter a valid menu option. Please try again.\" \n        &lt;&lt; endl;\n        cin.clear();\n        cin.ignore(100000, '\\n');\n    }\n}\nif(menuChoice == 2)\n{\n    return 2;\n}\nelse\n{\n    //setup a fight code further down\n}\n</code></pre>\n\n<p>One the first run through if I enter 2 it will exit the program successfully from main or if  enter 1 it will run through the fight function. However, if I go through 1 fight and get back the program asking me to either enter 1 or 2 to play or exit, I can enter 2 infinite times and it will not exit the program. I am not sure what it causing this. </p>\n\n<pre><code>for(;;)\n    {\n        game = menu();\n        if(game == 2)\n        {\n            break;\n        }\n        else\n        {\n            fight();\n        }\n     }\n     return 0;\n</code></pre>\n\n<p>The code inside the menu() function of my program is as follows and is where the rest of the input for my program is contained. I am using getline(cin, fighterName) to get a string from the user to use as a name for each character they want to create\nThe problem I am having is that it starts to just save the name of characters as empty without asking. </p>\n\n<pre><code>cout &lt;&lt; \"How many fighters should be on Team 1?\" &lt;&lt; endl;\n//Input Validation\nfor(;;)\n{\n    if(cin.get() == '.')\n    {\n        cin.clear();\n        cin.ignore(100000, '\\n');\n    }\n    if(cin &gt;&gt; team1Size)\n    {\n        if(team1Size &lt;= 0)\n        {\n            cout &lt;&lt; \"The team must be a size of at least 1 fighter. Please try again.\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore(100000, '\\n');\n        }\n        else\n        {\n            break;\n        }\n    }\n    else\n    {\n        cout &lt;&lt; \"You did not enter a valid number. Please try again.\" &lt;&lt; endl;\n           cin.clear();\n            cin.ignore(100000, '\\n');\n    }\n}\n\ncout &lt;&lt; \"How many fighters should be on Team 2?\" &lt;&lt; endl;\n//Input Validation\nfor(;;)\n{\n    if(cin.get() == '.')\n    {\n        cin.clear();\n        cin.ignore(100000, '\\n');\n    }\n    if(cin &gt;&gt; team2Size)\n    {\n        if(team2Size &lt;= 0)\n        {\n            cout &lt;&lt; \"The team must be a size of at least 1 fighter. Please try again.\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore(100000, '\\n');\n        }\n        else\n        {\n            break;\n        }\n    }\n    else\n    {\n        cout &lt;&lt; \"You did not enter a valid number. Please try again.\" &lt;&lt; endl;\n           cin.clear();\n            cin.ignore(100000, '\\n');\n    }\n}\n\n//Set up team 1 \ncout &lt;&lt; \"Begin setup for team 1:\" &lt;&lt; endl &lt;&lt; endl;\nfor(int i = 0; i &lt; team1Size; i++)\n{\n    cout &lt;&lt; \"Which character type should fighter \" &lt;&lt; i+1 &lt;&lt; \" be?\" &lt;&lt; endl;\n    cout &lt;&lt; \"1. Barbarian\" &lt;&lt; endl;\n    cout &lt;&lt; \"2. BlueMen\" &lt;&lt; endl;\n    cout &lt;&lt; \"3. Vampire\" &lt;&lt; endl;\n    cout &lt;&lt; \"4. Medusa\" &lt;&lt; endl;    \n    cout &lt;&lt; \"5. Harry Potter\" &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter the number corresponding to your choice from the list above.\" &lt;&lt; endl;\n    for(;;)\n    {\n        if(cin.get() == '.')\n        {\n            cin.clear();\n            cin.ignore(100000, '\\n');\n        }\n        if(cin &gt;&gt; fighterType)\n        {\n            if(fighterType &lt; 1 || fighterType &gt; 5)\n            {\n                cout &lt;&lt; \"You did not enter a valid choice. Please try again.\" &lt;&lt; endl;\n                cin.clear();\n                cin.ignore(100000, '\\n');\n            }\n            else\n                break;\n        }\n        else\n        {\n            cout &lt;&lt; \"You did not enter a valid choice. Please try again.\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore(100000, '\\n');\n        }\n    }\n    //Now that we have the desired type of the fighter we must add a fighter of the correct type to the linked list\n    //representing team 1. We will do so by calling the add function of the linked list\n    cout &lt;&lt; \"Please enter the name of this fighter.\" &lt;&lt; endl;\n    getline(cin, fighterName);\n    if(fighterType == 1)\n    {\n        team1.addBack(\"Barbarian\", fighterName);\n    }\n    else if(fighterType == 2)\n    {\n        team1.addBack(\"BlueMen\", fighterName);\n    }\n    else if(fighterType == 3)\n    {\n        team1.addBack(\"Vampire\", fighterName);\n    }\n    else if(fighterType == 4)\n    {\n        team1.addBack(\"Medusa\", fighterName);\n    }\n    else\n    {\n        team1.addBack(\"HarryPotter\", fighterName);\n    }\n\n}\n\ncout &lt;&lt; \"Team 1 has been created!\" &lt;&lt; endl &lt;&lt; endl;\n\n//Set up team 2 \ncout &lt;&lt; \"Begin setup for team 2:\" &lt;&lt; endl &lt;&lt; endl;\nfor(int i = 0; i &lt; team2Size; i++)\n{\n    cout &lt;&lt; \"Which character type should fighter \" &lt;&lt; i+1 &lt;&lt; \" be?\" &lt;&lt; endl;\n    cout &lt;&lt; \"1. Barbarian\" &lt;&lt; endl;\n    cout &lt;&lt; \"2. BlueMen\" &lt;&lt; endl;\n    cout &lt;&lt; \"3. Vampire\" &lt;&lt; endl;\n    cout &lt;&lt; \"4. Medusa\" &lt;&lt; endl;    \n    cout &lt;&lt; \"5. Harry Potter\" &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter the number corresponding to your choice from the list above.\" &lt;&lt; endl;\n    for(;;)\n    {\n        if(cin.get() == '.')\n        {\n            cin.clear();\n            cin.ignore(100000, '\\n');\n        }\n        if(cin &gt;&gt; fighterType)\n        {\n            if(fighterType &lt; 1 || fighterType &gt; 5)\n            {\n                cout &lt;&lt; \"You did not enter a valid choice. Please try again.\" &lt;&lt; endl;\n                cin.clear();\n                cin.ignore(100000, '\\n');\n            }\n            else\n                break;\n        }\n        else\n        {\n            cout &lt;&lt; \"You did not enter a valid choice. Please try again.\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore(100000, '\\n');\n        }\n    }\n    //Now that we have the desired type of the fighter we must add a fighter of the correct type to the linked list\n    //representing team 2. We will do so by calling the add function of the linked list\n    cout &lt;&lt; \"Please enter the name of this fighter.\" &lt;&lt; endl;\n    getline(cin, fighterName);\n    if(fighterType == 1)\n    {\n        team2.addBack(\"Barbarian\", fighterName);\n    }\n    else if(fighterType == 2)\n    {\n        team2.addBack(\"BlueMen\", fighterName);\n    }\n    else if(fighterType == 3)\n    {\n        team2.addBack(\"Vampire\", fighterName);\n    }\n    else if(fighterType == 4)\n    {\n        team2.addBack(\"Medusa\", fighterName);\n    }\n    else\n    {\n        team2.addBack(\"HarryPotter\", fighterName);\n    }\n}\n\n\ncout &lt;&lt; \"Team 2 has been created!\" &lt;&lt; endl &lt;&lt; endl;\n\ncout &lt;&lt; \"Let the fight begin!\" &lt;&lt; endl &lt;&lt; endl;\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>The final piece of input from my code is the following which simply asks the user to enter a character either y or n and then executes a function if y is entered.</p>\n\n<pre><code>cout &lt;&lt; \"Would you like to see the contents of the loserPile?\" &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter y for yes or n for no\" &lt;&lt; endl;\n    for(;;)\n    {\n        if(cin &gt;&gt; displayLosers)\n        {\n            if(displayLosers != 'y' &amp;&amp; displayLosers != 'n')\n            {\n                cout &lt;&lt; \"You did not enter either y or n. Please try again.\" &lt;&lt; endl;\n                cin.clear();\n                cin.ignore(100000, '\\n');\n            }\n            else\n                break;\n        }\n        else\n        {\n            cout &lt;&lt; \"You did not enter either y or n. Please try again.\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore(100000, '\\n');\n        }\n    }\n    if(displayLosers == 'y')\n    {\n        losers.displayPile();\n    }\n</code></pre>\n\n<p>If someone could point out where I am making the error in obtaining user input I would appreciate it as I am running out of things to try that I know of. </p>\n"}, {"tags": ["c++", "opengl", "assets"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1510773605, "post_id": 47315394, "comment_id": 81582037, "body": "How should we know? What is the result of <code>path::fromAssets(&quot;shader&#47;basic.vert.glsl&quot;)</code> and how is it different from <code>&quot;&#47;Users&#47;a&#47;b&#47;c&#47;build&#47;assets&#47;shader&#47;basic.vert.glsl&quot;</code>?"}, {"owner": {"reputation": 221, "user_id": 6253080, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/828795010586660/picture?type=large", "display_name": "Neok", "link": "https://stackoverflow.com/users/6253080/neok"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1510773845, "post_id": 47315394, "comment_id": 81582173, "body": "They&#39;re not different, strcmp return 0 - That&#39;s where the mystery comes from."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1510774440, "post_id": 47315394, "comment_id": 81582463, "body": "Ah, spotted the problem."}, {"owner": {"reputation": 221, "user_id": 6253080, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/828795010586660/picture?type=large", "display_name": "Neok", "link": "https://stackoverflow.com/users/6253080/neok"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1510774554, "post_id": 47315394, "comment_id": 81582534, "body": "Can you lead me to the solution ? I&#39;ve edit with the strcmp comparison."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1510774768, "post_id": 47315394, "comment_id": 81582633, "body": "See my answer. Chances are high that the strcmp comparison just works because there is absolutely no code inbetween (and thus nothing could override the freed memory)."}], "answers": [{"tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": true, "score": 1, "last_activity_date": 1510774708, "creation_date": 1510774708, "answer_id": 47315885, "question_id": 47315394, "link": "https://stackoverflow.com/questions/47315394/assets-path-absolute-vs-generated/47315885#47315885", "title": "Assets path : absolute vs generated", "body": "<p>The <code>fromAssets</code> method returns a pointer to an invalid memory address. That happens because you return the <code>c_str()</code> pointer of a std::string object that is a local variable of that function. When the function returns, all local variables, including the std::string, get deleted and the pointer returned points to a no longer existing memory address.</p>\n\n<p>The best (and most modern) fix would be to return the std::string object itself instead of a const char* pointer. You can than either pass the c_str pointer to the Shader constructor or even better adjust the constructor to take <code>const std::string&amp;</code> as parameters.</p>\n"}], "owner": {"reputation": 221, "user_id": 6253080, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/828795010586660/picture?type=large", "display_name": "Neok", "link": "https://stackoverflow.com/users/6253080/neok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 47315885, "answer_count": 1, "score": 0, "last_activity_date": 1510774708, "creation_date": 1510772835, "last_edit_date": 1510774461, "question_id": 47315394, "link": "https://stackoverflow.com/questions/47315394/assets-path-absolute-vs-generated", "title": "Assets path : absolute vs generated", "body": "<p>I'm currently making a \"fromAssets\" function that provide a path to the assets folder where ever the program is execute.</p>\n\n<p>The function come from the following part of code.</p>\n\n<p><strong><em>Header file :</em></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/filesystem.hpp&gt;\n\nnamespace fs = boost::filesystem;\n\nnamespace path {\n    static fs::path BUILD_PATH;\n    const void initialiseBuildPath(const char *argv);\n    const char * fromAssets(const char * path);\n}\n</code></pre>\n\n<p><strong><em>Source file :</em></strong></p>\n\n<pre><code>using namespace path;\n\nconst void path::initialiseBuildPath(const char *argv0) {\n    BUILD_PATH = fs::initial_path&lt;fs::path&gt;();\n    BUILD_PATH = fs::system_complete(fs::path(argv0))\n                            .parent_path()\n                            .parent_path();\n}\n\nconst char * path::fromAssets(const char * path) {\n    std::string strPath = std::string(path);\n    return (BUILD_PATH.string() + \"/assets/\" + strPath).c_str();\n}\n</code></pre>\n\n<p><strong><em>Use :</em></strong></p>\n\n<pre><code>const char * absolute = \"/Users/thomaspetillot/CLionProjects/glDiscoverProject/build/assets/shader/basic.vert.glsl\";\nconst char * generated = path::fromAssets(\"shader/basic.vert.glsl\");\ncout &lt;&lt; strcmp(absolute, generated) &lt;&lt; endl; // show 0\n\n\n\n// Work\nauto * shader = new Shader(absolute,\n                           path::fromAssets(\"shader/basic.frag.glsl\"));\n\n// Doesn't work\nauto * shader = new Shader(generated,\n                           path::fromAssets(\"shader/basic.frag.glsl\"));\n</code></pre>\n\n<p>Folder structure :</p>\n\n<pre><code>build\n\u251c\u2500\u2500 assets\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 img\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 pepe.jpg\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 snoop.jpg\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 shader\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 basic.frag.glsl\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 basic.vert.glsl\n\u2514\u2500\u2500 bin\n    \u2514\u2500\u2500 program\n</code></pre>\n\n<p><strong>How can it work for the frag shader but not for the other ?</strong></p>\n"}, {"tags": ["c++", "arm", "bit-fields", "vtable", "iar"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510773601, "post_id": 47315289, "comment_id": 81582033, "body": "<code>B() : invert(false)</code> invert doesn\u2019t exist, that code doesn\u2019t compile."}, {"owner": {"reputation": 61, "user_id": 8946371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdd6e493fbdab26716f9e0017b71258?s=128&d=identicon&r=PG&f=1", "display_name": "Lyle Cheatham", "link": "https://stackoverflow.com/users/8946371/lyle-cheatham"}, "edited": false, "score": 0, "creation_date": 1510773995, "post_id": 47315289, "comment_id": 81582249, "body": "Apologies, I made 2 syntax errors typing that up, it should compile fine now (in GCC ARM) <a href=\"https://godbolt.org/g/AFmKrw\" rel=\"nofollow noreferrer\">godbolt.org/g/AFmKrw</a>"}, {"owner": {"reputation": 61, "user_id": 8946371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdd6e493fbdab26716f9e0017b71258?s=128&d=identicon&r=PG&f=1", "display_name": "Lyle Cheatham", "link": "https://stackoverflow.com/users/8946371/lyle-cheatham"}, "edited": false, "score": 0, "creation_date": 1510781283, "post_id": 47315289, "comment_id": 81586147, "body": "To anyone else coming to take a look, I have made a more complete godbolt example <a href=\"https://godbolt.org/g/sVWUhi\" rel=\"nofollow noreferrer\">godbolt.org/g/sVWUhi</a>"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8946371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdd6e493fbdab26716f9e0017b71258?s=128&d=identicon&r=PG&f=1", "display_name": "Lyle Cheatham", "link": "https://stackoverflow.com/users/8946371/lyle-cheatham"}, "edited": false, "score": 0, "creation_date": 1510846942, "post_id": 47329088, "comment_id": 81618577, "body": "Thanks @Johan, we&#39;re probably going to update to 8.20 for now, but I&#39;m still waiting to hear back from IAR on what the actual bug is to make sure that we don&#39;t have any exposure on any of our other code.  I&#39;ll let you know what they say"}], "tags": [], "owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "is_accepted": true, "score": 1, "last_activity_date": 1510834150, "last_edit_date": 1510834150, "creation_date": 1510833468, "answer_id": 47329088, "question_id": 47315289, "link": "https://stackoverflow.com/questions/47315289/initializer-list-initialization-of-a-member-struct-bitfield-element-causing-bugs/47329088#47329088", "title": "Initializer list initialization of a member struct bitfield element causing bugs in IAR ARM", "body": "<p>This is a compiler bug and according to my investigations it triggers in at least EWARM 7.80.1 and 8.11.2. It does not trigger in EWARM 8.20.1. The bug triggers on all optimization levels and I can't think of another work-around than the one mentioned in the question.</p>\n"}], "owner": {"reputation": 61, "user_id": 8946371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdd6e493fbdab26716f9e0017b71258?s=128&d=identicon&r=PG&f=1", "display_name": "Lyle Cheatham", "link": "https://stackoverflow.com/users/8946371/lyle-cheatham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 1, "accepted_answer_id": 47329088, "answer_count": 1, "score": 5, "last_activity_date": 1510834150, "creation_date": 1510772470, "last_edit_date": 1510781890, "question_id": 47315289, "link": "https://stackoverflow.com/questions/47315289/initializer-list-initialization-of-a-member-struct-bitfield-element-causing-bugs", "title": "Initializer list initialization of a member struct bitfield element causing bugs in IAR ARM", "body": "<p>I have the following class structure in IAR:</p>\n\n<pre><code>class A\n{\npublic:\n    A(){}\n    virtual ~A() {};\n    virtual void load() {};\n};\n\n\nclass C\n{\npublic:\n    C()\n    {\n        //C does other stuff, not relevant\n    }\n};\n\nclass D;\n\nclass B : public A\n{\npublic:\n    B() : invert(false) {};\n    virtual ~B() {};\n    void load()\n    {\n        //Irrelevant stuff done here\n    }\nprivate:\n    C member_c;\n    std::vector&lt;D*&gt; vector_of_d;\n    struct {\n        bool var_1:1;\n        bool var_2:1;\n        bool var_3:1;\n        bool var_4:1;\n        bool invert:1;\n    };\n};\n</code></pre>\n\n<p>I am running into bugs with the assembly generated to initialize B, where it seems to be getting 'confused' about where the VTable pointer is vs where the anonymous struct bitfield is.  When it goes to set the invert bit false, it goes to the first word of the object (which is the VTable pointer) and flips a bit in the address.  When I later call <code>load()</code>, it follows the invalid VTable pointer and ends up finding a null pointer, which it then blindly follows.  Things obviously fall apart from there.</p>\n\n<p>Here is an example of the code that would invoke this problem:</p>\n\n<pre><code>void load_A(A* to_be_loaded){\n    if(to_be_loaded) to_be_loaded-&gt;load();\n}\n\nint main(){\n   load_A(new B());\n}\n</code></pre>\n\n<p>Now the big question, is have I accidentally introduced some undefined behavior somewhere?  This is code that is being ported from GCC-ARM, where it worked fine, but now suddenly it is causing hard-faults when compiled with IAR.  My two theories are:</p>\n\n<ul>\n<li>It's a compiler bug (I know, it's never a compiler bug)</li>\n<li>It's non-standard behavior that GCC handled as an extension</li>\n</ul>\n\n<p>As far as I can tell, there shouldn't be anything wrong with using an initializer list to initialize a field in an anonymous struct.  I do recognize that anonymous structs <em>are</em> a compiler extension, but they are documented in both IAR and GCC. Either way, IAR is not giving me any warning or error, and is generating clearly broken assembly.</p>\n\n<p>Here is the assembly that it made for the <code>B</code> constructor</p>\n\n<pre><code>1 |    B() : invert(false) {};\n2 |B::B():\n3 |_ZN6BC1Ev:\n4 |    0x80645e8: 0xb510         PUSH      {R4, LR}\n5 |    0x80645ea: 0x4604         MOV       R4, R0\n6 |    B() : invert(false) {};\n7 |    0x80645ec: 0xf007 0xfb20  BL        A::subobject A() ; 0x806bc30\n8 |    0x80645f0: 0x4807         LDR.N     R0, [PC, #0x1c]         ; 0x8088808 (134776840)\n9 |    0x80645f2: 0x6020         STR       R0, [R4]\n10|    0x80645f4: 0xf104 0x0018  ADD.W     R0, R4, #24             ; 0x18\n11|    0x80645f8: 0xf00a 0xfadd  BL        C::C()              ; 0x806ebb6\n12|    0x80645fc: 0xf104 0x001c  ADD.W     R0, R4, #28             ; 0x1c\n13|    0x8064600: 0xf00e 0xff2e  BL        std::vector&lt;D *&gt;::vector() ; 0x8073460\n14|    0x8064604: 0x7820         LDRB      R0, [R4]\n15|    0x8064606: 0xf000 0x00ef  AND.W     R0, R0, #239            ; 0xef\n16|    0x806460a: 0x7020         STRB      R0, [R4]\n17|    B() : invert(false) {};\n18|    0x806460c: 0x4620         MOV       R0, R4\n19|    0x806460e: 0xbd10         POP       {R4, PC}\n20|    0x8064610: 0x08088808     DC32      0x8088808 (134776840)\n</code></pre>\n\n<p>On line 14, we load the value that R4 points to, which is the base address of our object.  It does not apply any offset to it, which means it points to the first thing in the object which is the VTable pointer.  It then continues with the assumption that it has the bitfield and unsets one bit on line 15 before putting it back into the object where it got it from on line 16.</p>\n\n<p>For reference, if we change the constructor of B to <em>not</em> use initializer lists (shown below) it will work as expected:</p>\n\n<pre><code>class B : public A\n{\npublic:\n    B(){ invert = false; };\n    virtual ~B() {};\n    void load()\n    {\n        //Irrelevant stuff done here\n    }\nprivate:\n    C member_c;\n    std::vector&lt;D*&gt; vector_of_d;\n    struct {\n        bool var_1:1;\n        bool var_2:1;\n        bool var_3:1;\n        bool var_4:1;\n        bool invert:1;\n    }\n};\n</code></pre>\n\n<p>The generated assembly is as follows, take note of the offset used in the <code>LDRB</code> and <code>STRB</code> instructions on lines 14 and 16.  This is the proper offset to access the bitfield in the object.</p>\n\n<pre><code>1 |    B(){ invert = false; };\n2 |B::B():\n3 |_ZN6BC1Ev:\n4 |    0x80645e8: 0xb510         PUSH      {R4, LR}\n5 |    0x80645ea: 0x4604         MOV       R4, R0\n6 |    B(){ invert = false; };\n7 |    0x80645ec: 0xf007 0xfb20  BL        A::subobject A() ; 0x806bc30\n8 |    0x80645f0: 0x4807         LDR.N     R0, [PC, #0x20]         ; 0x8088808 (134776840)\n9 |    0x80645f2: 0x6020         STR       R0, [R4]\n10|    0x80645f4: 0xf104 0x0018  ADD.W     R0, R4, #24             ; 0x18\n11|    0x80645f8: 0xf00a 0xfadd  BL        C::C()              ; 0x806ebb6\n12|    0x80645fc: 0xf104 0x001c  ADD.W     R0, R4, #28             ; 0x1c\n13|    0x8064600: 0xf00e 0xff2e  BL        std::vector&lt;D *&gt;::vector() ; 0x8073460\n14|    0x8064604: 0x7820         LDRB      R0, [R4, #0x2c]\n15|    0x8064606: 0xf000 0x00ef  AND.W     R0, R0, #239            ; 0xef\n16|    0x806460a: 0x7020         STRB      R0, [R4, #0x2c]\n17|    B(){ invert = false; };\n18|    0x806460c: 0x4620         MOV       R0, R4\n19|    0x806460e: 0xbd10         POP       {R4, PC}\n20|    0x8064610: 0x08088808     DC32      0x8088808 (134776840)\n</code></pre>\n\n<p>Side note, there is a slight change on line 8, but that's probably due to some offsets changes.</p>\n\n<p>Does anyone have any insight as to what could be causing this?</p>\n"}, {"tags": ["c++", "winapi", "uac", "administrator"], "answers": [{"comments": [{"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 1, "creation_date": 1510773180, "post_id": 47315365, "comment_id": 81581802, "body": "Note: Your original input token needs to be opened with TOKEN_DUPLICATE."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1510774667, "post_id": 47315365, "comment_id": 81582588, "body": "Thanks, that worked. Although I just noticed the following at the bottom of the <code>CheckTokenMembership</code> page: <code>&quot;Even if a SID is present in the token, the system may not use the SID in an access check. The SID may be disabled or have the SE_GROUP_USE_FOR_DENY_ONLY attribute. The system uses only enabled SIDs to grant access when performing an access check&quot;</code> Does it mean that <code>CheckTokenMembership</code> may return unreliable results?"}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1510777673, "post_id": 47315365, "comment_id": 81584152, "body": "I think they just mean that a disabled or deny-only SID will not grant access and CheckTokenMembership isMember is false for those. Compare this with the old NT4 style method where you check each SID in the token yourself. Deny-only SIDs are Win2000+ and NT4 style gives the wrong result."}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": true, "score": 3, "last_activity_date": 1510772748, "creation_date": 1510772748, "answer_id": 47315365, "question_id": 47315191, "link": "https://stackoverflow.com/questions/47315191/how-to-check-group-membership-for-a-process-that-is-not-self/47315365#47315365", "title": "How to check group membership for a process that is not &quot;self&quot;?", "body": "<p>MSDN does confirm that it is a requirement:</p>\n\n<blockquote>\n  <p>The token must be an impersonation token.</p>\n</blockquote>\n\n<p>It also says for the NULL handle case:</p>\n\n<blockquote>\n  <p><code>CheckTokenMembership</code> uses the impersonation token of the calling thread. If the thread is not impersonating, the function duplicates the thread's primary token to create an impersonation token.</p>\n</blockquote>\n\n<p>You could try this:</p>\n\n<pre><code>HANDLE hImpToken;\nif (DuplicateTokenEx(hToken, TOKEN_QUERY, NULL, SecurityImpersonation, TokenImpersonation, &amp;hImpToken))\n{\n    CheckTokenMembership(hImpToken, ...);\n    CloseHandle(hImpToken);\n}\n</code></pre>\n"}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 47315365, "answer_count": 1, "score": 1, "last_activity_date": 1510772748, "creation_date": 1510772178, "question_id": 47315191, "link": "https://stackoverflow.com/questions/47315191/how-to-check-group-membership-for-a-process-that-is-not-self", "title": "How to check group membership for a process that is not &quot;self&quot;?", "body": "<p>I'm trying to use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa376389(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this code</a> to check security group membership for an arbitrary process that I have a handle for. But in my code below <code>CheckTokenMembership</code> fails with error code 1309, or <code>ERROR_NO_IMPERSONATION_TOKEN</code>. I'm not sure I understand how I can get that impersonation token...</p>\n\n<p>So what am I doing wrong here?</p>\n\n<pre><code>void check_membership(HANDLE hProc)\n{\n    HANDLE hToken;\n    if(OpenProcessToken(hProc, TOKEN_QUERY, &amp;hToken))\n    {\n        check_group_membership(hToken, L\"Local Group\", DOMAIN_ALIAS_RID_USERS);\n        check_group_membership(hToken, L\"Admin Group\", DOMAIN_ALIAS_RID_ADMINS);\n        check_group_membership(hToken, L\"Domain Admin Group\", DOMAIN_GROUP_RID_ADMINS);\n        check_group_membership(hToken, L\"Schema Admin Group\", DOMAIN_GROUP_RID_SCHEMA_ADMINS);\n        check_group_membership(hToken, L\"Enterprise Admin Group\", DOMAIN_GROUP_RID_ENTERPRISE_ADMINS);\n\n        CloseHandle(hToken);\n    }\n}\n\n\nvoid check_group_membership(HANDLE hToken, LPCTSTR pStrName, DWORD nSubauthority)\n{\n    BOOL bIsMember;\n    SID_IDENTIFIER_AUTHORITY NtAuthority = SECURITY_NT_AUTHORITY;\n\n    wprintf(L\"Local %s: \", pStrName);\n\n    PSID pSID = NULL; \n    if(AllocateAndInitializeSid(&amp;NtAuthority, 2,\n        SECURITY_BUILTIN_DOMAIN_RID,\n        nSubauthority,\n        0, 0, 0, 0, 0, 0, &amp;pSID))\n    {\n        bIsMember = FALSE;\n        if(CheckTokenMembership(hToken, pSID, &amp;bIsMember))\n        {\n            wprintf(L\"%s\", bIsMember ? L\"Yes\" : L\"No\");\n        }\n        else\n        {\n            wprintf(L\"&lt;CheckErr: (%d)&gt;\", GetLastError());\n        }\n    }\n    else\n    {\n        wprintf(L\"&lt;SidErr: (%d)&gt;\", GetLastError());\n    }\n\n    wprintf(L\"\\n\");\n\n    if(pSID)\n    {\n        FreeSid(pSID) == NULL);\n        pSID = NULL;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "codeblocks", "directx-11"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510771980, "post_id": 47315110, "comment_id": 81581066, "body": "How did you set up your include file search paths for the project?"}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1510771983, "post_id": 47315110, "comment_id": 81581067, "body": "Please specify what compiler you&#39;re using. Neither Code::Blocks or Visual Studio are compilers."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510772037, "post_id": 47315110, "comment_id": 81581093, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24715864/problems-importing-libraries-to-my-c-project-how-to-fix-this\">Problems importing libraries to my c++ project, how to fix this?</a>"}, {"owner": {"reputation": 1, "user_id": 8920675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d390e8036b863f7bae497f83d71027d?s=128&d=identicon&r=PG&f=1", "display_name": "Guljaca", "link": "https://stackoverflow.com/users/8920675/guljaca"}, "edited": false, "score": 0, "creation_date": 1510772239, "post_id": 47315110, "comment_id": 81581218, "body": "GNU GCC Compiler"}, {"owner": {"reputation": 1, "user_id": 8920675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d390e8036b863f7bae497f83d71027d?s=128&d=identicon&r=PG&f=1", "display_name": "Guljaca", "link": "https://stackoverflow.com/users/8920675/guljaca"}, "edited": false, "score": 0, "creation_date": 1510772370, "post_id": 47315110, "comment_id": 81581290, "body": "I added path to DirectX_SDC.include and DirectX_SDC.lib"}], "answers": [{"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": false, "score": 1, "last_activity_date": 1510776615, "last_edit_date": 1592644375, "creation_date": 1510776287, "answer_id": 47316306, "question_id": 47315110, "link": "https://stackoverflow.com/questions/47315110/c-error-with-dxgi-h-when-try-include-d3d11-h/47316306#47316306", "title": "c++ - error with DXGI.h when try include d3d11.h", "body": "<p>You can hit a number of issues when mixing the legacy DirectX SDK headers with the Windows 8.0 SDK, Windows 8.1 SDK, or the Windows 10 SDK. The problems are because the legacy DirectX SDK has some older headers that conflict with the new SDKs.</p>\n<p>You likely need two fixes:</p>\n<p>First, make sure that you add the DirectX SDK include and lib paths at the <em>end</em> of the search path rather than the beginning so you get the newer ones listed first.</p>\n<p>For x86/Win32 configurations:</p>\n<pre><code>$(ExecutablePath);$(DXSDK_DIR)Utilities\\bin\\x86\n$(IncludePath);$(DXSDK_DIR)Include\n$(LibraryPath);$(DXSDK_DIR)Lib\\x86\n</code></pre>\n<p>For x64 native configurations:</p>\n<pre><code>$(ExecutablePath);$(DXSDK_DIR)Utilities\\bin\\x64;$(DXSDK_DIR)Utilities\\bin\\x86\n$(IncludePath);$(DXSDK_DIR)Include\n$(LibraryPath);$(DXSDK_DIR)Lib\\x64\n</code></pre>\n<p>Second, explicitly include the dependent header so you don't end up with the older one:</p>\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;windowsx.h&gt;\n#include &lt;d3d11.h&gt;\n#include &lt;dxgi.h&gt;    // &lt;-- make sure you pick up the Windows SDK version\n#include &lt;d3dx11.h&gt;  //     and not from the DXSDK\n</code></pre>\n<p>If you let <code>d3dx11.h</code> pull in <code>dxgi.h</code> then you'll end up with the wrong one!</p>\n<p>See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx\" rel=\"nofollow noreferrer\">MSDN</a>, <a href=\"https://blogs.msdn.microsoft.com/chuckw/2015/08/05/where-is-the-directx-sdk-2015-edition/\" rel=\"nofollow noreferrer\">Where is the DirectX SDK (2015 Edition)?</a>, and <a href=\"https://blogs.msdn.microsoft.com/chuckw/2015/03/23/the-zombie-directx-sdk/\" rel=\"nofollow noreferrer\">The Zombie DirectX SDK</a></p>\n<blockquote>\n<p>Two other things to note here about your code. First, there's no reason at all to use DirectX 10 or <code>d3dx10.h</code>. Use DirectX 11 only.</p>\n<p>Second, D3DX itself is deprecated including D3DX9, D3DX10, and D3DX11. See <a href=\"https://blogs.msdn.microsoft.com/chuckw/2013/08/20/living-without-d3dx/\" rel=\"nofollow noreferrer\">Living without D3DX</a> for Direct3D 11 open source replacements.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 8920675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d390e8036b863f7bae497f83d71027d?s=128&d=identicon&r=PG&f=1", "display_name": "Guljaca", "link": "https://stackoverflow.com/users/8920675/guljaca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "closed_date": 1510812617, "answer_count": 1, "score": -2, "last_activity_date": 1510776615, "creation_date": 1510771893, "question_id": 47315110, "link": "https://stackoverflow.com/questions/47315110/c-error-with-dxgi-h-when-try-include-d3d11-h", "closed_reason": "Not suitable for this site", "title": "c++ - error with DXGI.h when try include d3d11.h", "body": "<p>When I try compile code with Code::Block and Visual Studio, i get error in DXGI.h</p>\n\n<p>error: '__in' has not been declared|</p>\n\n<p>error: expected ',' or '...' before '&amp;' token|\nand so on</p>\n\n<p>Why it's going on and how can i fix that?</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;windowsx.h&gt;\n#include &lt;d3d11.h&gt;\n#include &lt;d3dx11.h&gt;\n#include &lt;d3dx10.h&gt;\n</code></pre>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1510771511, "post_id": 47314761, "comment_id": 81580802, "body": "Unrelated: Seeding the random number generator with a random number  before the random number generator is seeded is a bit weird. I don&#39;t think <code>srand (time(NULL) * rand());</code> will do much for  you that use of the <code>&lt;random&gt;</code> library wouldn&#39;t do better."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1510772210, "post_id": 47314761, "comment_id": 81581191, "body": "Unrelated: <code>pow</code> is designed to compute crazy stuff like e to the power of pi. Using it to square is vast overkill. You are almost always better off with <code>x*x</code>"}, {"owner": {"reputation": 5, "user_id": 7209827, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253975844625083/picture?type=large", "display_name": "Tignite", "link": "https://stackoverflow.com/users/7209827/tignite"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1510808295, "post_id": 47314761, "comment_id": 81594657, "body": "I ran into the problem when seeding with time(NULL) only the vectors would all be generated equally and thats why I came up with this weird sran.. ^^ Okay, I won&#39;t use pow any more to calculate squares! :D"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1510809098, "post_id": 47314761, "comment_id": 81594950, "body": "<code>time(NULL)</code> returns the current number in seconds. This means if you call <code>srand</code> more often than once a second you will reseed the generator with the same seed and generate the same sequence. Typical usage of <code>srand</code> is to call it once near the beginning of the <code>main</code> function and then leave it alone because you almost never need to reseed the generator. If you find yourself in a case where you do need to reseed the generator, you&#39;re probably better off using a more advanced generator."}, {"owner": {"reputation": 5, "user_id": 7209827, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253975844625083/picture?type=large", "display_name": "Tignite", "link": "https://stackoverflow.com/users/7209827/tignite"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1510824811, "post_id": 47314761, "comment_id": 81602717, "body": "Since we are instructed to use rand and srand your suggestion of moving the srand into the main function should do the trick for me then. Thank you very much"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7209827, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253975844625083/picture?type=large", "display_name": "Tignite", "link": "https://stackoverflow.com/users/7209827/tignite"}, "edited": false, "score": 0, "creation_date": 1510808056, "post_id": 47315131, "comment_id": 81594585, "body": "Besides being non desciptive they are right. I need a n-dimensional vector and v (for the german word &quot;versuche&quot; = trials) as a counter for vectors. The array itself is created at &#39;createArray(ptr, n);&#39; and printed at &#39;printArray(vektorArray[i], n);&#39; So variables shouldn&#39;t be a problem.."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 5, "user_id": 7209827, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253975844625083/picture?type=large", "display_name": "Tignite", "link": "https://stackoverflow.com/users/7209827/tignite"}, "edited": false, "score": 0, "creation_date": 1510809287, "post_id": 47315131, "comment_id": 81595025, "body": "@Tignite They may be right, but your usage is wrong. <code>vektorArray</code> is allocated 10 slots. <code>for (unsigned int i = 0; i &lt; v; i++)</code> coupled with <code>vektorArray[i]</code> accesses 20 slots, running outside the bounds of the array&#39;s allocated memory and into the wild world of undefined behaviour. That means the program can do whatever it wants, including look like it works sometimes."}, {"owner": {"reputation": 5, "user_id": 7209827, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253975844625083/picture?type=large", "display_name": "Tignite", "link": "https://stackoverflow.com/users/7209827/tignite"}, "edited": false, "score": 0, "creation_date": 1510824610, "post_id": 47315131, "comment_id": 81602596, "body": "I totally overlooked your first quote and didn&#39;t notice the &#39;new double[n]&#39;! I will correct and try it once I&#39;m back home but I still don&#39;t understand why this won&#39;t cause an error when stepping through inside debug mode.."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 5, "user_id": 7209827, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253975844625083/picture?type=large", "display_name": "Tignite", "link": "https://stackoverflow.com/users/7209827/tignite"}, "edited": false, "score": 0, "creation_date": 1510847215, "post_id": 47315131, "comment_id": 81618777, "body": "Because of dumb bad luck. More here: <a href=\"https://stackoverflow.com/questions/1239938/accessing-an-array-out-of-bounds-gives-no-error-why\" title=\"accessing an array out of bounds gives no error why\">stackoverflow.com/questions/1239938/&hellip;</a>"}, {"owner": {"reputation": 5, "user_id": 7209827, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253975844625083/picture?type=large", "display_name": "Tignite", "link": "https://stackoverflow.com/users/7209827/tignite"}, "edited": false, "score": 0, "creation_date": 1511108195, "post_id": 47315131, "comment_id": 81710189, "body": "All right then, thank you again! That little sneaky n made the code work!"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1510771961, "creation_date": 1510771961, "answer_id": 47315131, "question_id": 47314761, "link": "https://stackoverflow.com/questions/47314761/weird-crashing-program-while-debug-runs-smoothly-eclipse-c/47315131#47315131", "title": "Weird crashing program while debug runs smoothly (Eclipse C++)", "body": "<pre><code>vektorArray = new double*[n];\n</code></pre>\n\n<p>created an array of size <code>n</code>, but </p>\n\n<pre><code>void newArray(double** x, unsigned int v, unsigned int n)\n{\n    for (unsigned int i = 0; i &lt; v; i++)\n    {\n        double* ptr = x[i];\n        createArray(ptr, n);\n        x[i] = ptr;\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; v; i++)\n{\n    if (i % 10 == 0)\n        printArray(vektorArray[i], n);\n}\n</code></pre>\n\n<p>index that array with <code>v</code>. Looks like you got your variables crossed. Strongly recommend giving variables better, more descriptive names to help make this more obvious.</p>\n"}], "owner": {"reputation": 5, "user_id": 7209827, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253975844625083/picture?type=large", "display_name": "Tignite", "link": "https://stackoverflow.com/users/7209827/tignite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1547399705, "creation_date": 1510770629, "last_edit_date": 1547399705, "question_id": 47314761, "link": "https://stackoverflow.com/questions/47314761/weird-crashing-program-while-debug-runs-smoothly-eclipse-c", "title": "Weird crashing program while debug runs smoothly (Eclipse C++)", "body": "<p>I'm writing a program for my algorithmic math class at university and I'm using Win 7 (x64), Eclipse Oxygen.1a Release (4.7.1a) with MinGW 6.3.0.</p>\n\n<p>Whenever I build and run the program it crashes with windows claiming 'Abgabe3.exe stopped working' but when trying to find the problem using the debugger and breakpoints I step trough the whole program and it finishes without errors...</p>\n\n<p>I stripped everything not used by the problematic function and copied everything into a seperate file and the exact problem occurs.\nMaybe somebody has a clue what happened at my side. ^^</p>\n\n<pre><code>#include &lt;math.h&gt;       /* pow, sqrt */\n#include &lt;iostream&gt;     /* cin, cout */\n#include &lt;new&gt;          /* new */\n#include &lt;string&gt;       /* string */\n#include &lt;stdlib.h&gt;     /* srand, rand */\n#include &lt;time.h&gt;       /* time */\n\nusing namespace std;\n\n\nvoid NORM(double* res, double* x, int n){\n    res[0] = 0.0;\n    for(int i = 0; i &lt; n; i++){\n        res[0] += pow(x[i], 2);\n    }\n    res[0] = sqrt(res[0]);\n}\n\nvoid initRand(double* x, int n){\n    srand (time(NULL) * rand());\n    for(int i = 0; i &lt; n; i++){\n        x[i] = (((double) rand()) / ((double) RAND_MAX));\n    }\n}\n\nvoid createArray(double* &amp;x, int n){\n    if (n &gt; 0){\n        x = new double[n];\n        initRand(x, n);\n    }\n}\n\nvoid printArray(double* x, int n){\n    if (x != NULL){\n    cout&lt;&lt;\"(\\n\";\n    for(int i = 0; i &lt; n; i++){\n        if(i+1 == n) cout&lt;&lt;x[i];\n        else if ((i % 5) == 0) cout&lt;&lt;x[i];\n        else if ( ((i+1) % 5) == 0 ){\n            cout&lt;&lt;\", \"&lt;&lt;x[i]&lt;&lt;\"\\n\";\n        }\n        else {\n            cout&lt;&lt;\", \"&lt;&lt;x[i];\n        }\n    }\n    cout&lt;&lt;\"\\n)\\n\";\n    }\n    else cout&lt;&lt;\"\\nError: pointer = NULL\\n\";\n}\n\nunsigned long long int bin(unsigned int n, unsigned int k){\n    unsigned long long res = 1;\n    if(k == 0) return 1;\n    else if( n &gt;= k){\n        for(unsigned long long int i = 1; i &lt;= k; i++){\n            res *= (n + 1 - i) / i;\n        }\n    }\n    else return 0;\n    return res;\n}\n\nvoid newArray(double** x, unsigned int v, unsigned int n){\n    for(unsigned int i = 0; i &lt; v; i++){\n        double* ptr = x[i];\n        createArray(ptr,n);\n        x[i] = ptr;\n    }\n}\n\nvoid experiment(double** vektorArray){\n    unsigned int n = 10, v = 20;\n    cout&lt;&lt;\"Dimension n = \"&lt;&lt;n&lt;&lt;\"\\nAnzahl Versuche v = \"&lt;&lt;v&lt;&lt;endl;\n    //Erstellen der Vektoren\n    cout&lt;&lt;\"Erstellen - starte\\n\";\n\n    vektorArray = new double*[n];\n    newArray(vektorArray, v, n);\n\n    cout&lt;&lt;\"Erstellen - fertig\\n\";\n\n    for(unsigned int i = 0; i &lt; v; i++){\n        if(i%10 == 0) printArray(vektorArray[i], n);\n    }\n}\nint main(int argc, char** argv){\n    double** vektorArray = NULL;\n    experiment(vektorArray);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "sorting", "opencv", "point"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770528, "post_id": 47314698, "comment_id": 81580242, "body": "Did you already have a look <a href=\"http://en.cppreference.com/w/cpp/algorithm\" rel=\"nofollow noreferrer\">here</a>?"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1510771121, "post_id": 47314698, "comment_id": 81580582, "body": "<code>&gt;&gt; lowest x value and highest y value</code> You seem to want AND but using OR here <code>return (a.x &lt; b.x || a.y &gt; b.y);</code>"}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510772437, "post_id": 47314698, "comment_id": 81581329, "body": "&amp;&amp; won&#39;t work here. Please rethink. @ Killzone Kid"}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510772521, "post_id": 47314698, "comment_id": 81581377, "body": "@user0042 : I have looked there. But I have no clue which method should I use. Can you be a little more helpful, please?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510772660, "post_id": 47314698, "comment_id": 81581465, "body": "@nsssayom  Look at [this](en.cppreference.com/w/cpp/algorithm/lower_bound) or <a href=\"http://en.cppreference.com/w/cpp/algorithm/upper_bound\" rel=\"nofollow noreferrer\">this</a> maybe?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1510772938, "post_id": 47314698, "comment_id": 81581643, "body": "&quot;lowest x value and highest y value&quot; this is obviously not well defined. You&#39;ll need some metric or sth."}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510773103, "post_id": 47314698, "comment_id": 81581745, "body": "@user0042 I tried stable_sort. Returns the same. And not sure about lower_bound."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1510773156, "post_id": 47314698, "comment_id": 81581787, "body": "maybe you could find the point as &quot;the point with lowest distance to the top left corner of the bounding rectangle&quot;, but no idea how to use that in a sorting. maybe just sth. like the closer2tlCorner point to the bounding rect of those two points?"}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1510773172, "post_id": 47314698, "comment_id": 81581798, "body": "@Micka Desired output for the failed case is [48, 498]"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1510773325, "post_id": 47314698, "comment_id": 81581879, "body": "As @Micka says, what does &quot;lowest x and highest y&quot; mean?  How does a value with a very low x, but only a middling y compare to a value with a slightly higher x, but a considerably higher y?  Do you just want to compare x-y?"}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1510773559, "post_id": 47314698, "comment_id": 81582012, "body": "@MartinBonner I simply want to find out the point with Largest Y value and with Smallest X value."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1510774016, "post_id": 47314698, "comment_id": 81582262, "body": "So given the points (0,0) and (1,1) which one do you want?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1510774072, "post_id": 47314698, "comment_id": 81582287, "body": "but in your failed sample, the lowest x value is 47, not 48 and the highest y value is 502, not 498. Try return (a.x - a.y &lt; b.x - b.y); However sorting will imho be slower than searching, if you only need a single point and not the complete sorted set of points."}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1510774261, "post_id": 47314698, "comment_id": 81582376, "body": "@Micka: I am searching for a POINT not the highest and lowest values. I am looking for a point that has lowest X and at the same time highest Y possible."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1510774453, "post_id": 47314698, "comment_id": 81582470, "body": "So you basically just need the bounding box? What about cv::boundingRect(Points); ? You can then easily retrieve the four rectangle vertices"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1510774575, "post_id": 47314698, "comment_id": 81582546, "body": "well, the lowest x is 47 and since there is no other point with 47, this is the winner? You must tell the algorithm your metric on how x and y work together if there is no point with LOWEST x (47 in example) and at the same time HIGHEST y (502 in example) but only points that lie in between. I wanted to show you that your criteria isn&#39;t well defined for your problem. Try the a.x-a.y &lt; b.x-b.y thing, maybe that is enough (it will punish the diagonal, though) Imho the right metric would be the L2 distance to top left bounding box coordinate."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510772399, "post_id": 47314772, "comment_id": 81581301, "body": "No luck. Returns the same output as mine."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 1, "creation_date": 1510773890, "post_id": 47314772, "comment_id": 81582192, "body": "@nsssayom, I think there is a mismatch between your description of what you want to accomplish and the name of the function. I would change the last line to <code>return (a.y &lt; b.y);</code> to match the description."}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510774016, "post_id": 47314772, "comment_id": 81582261, "body": "There is apparently no mismatch and your last edit returns the same output as my code did."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510774171, "post_id": 47314772, "comment_id": 81582336, "body": "@nsssayom, please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. That would be helpful in providing further help."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1510772251, "last_edit_date": 1510772251, "creation_date": 1510770674, "answer_id": 47314772, "question_id": 47314698, "link": "https://stackoverflow.com/questions/47314698/sort-points-using-c/47314772#47314772", "title": "Sort Points Using C++", "body": "<p>The logic used in the compare function is not correct. It does not meet the requirements of <a href=\"https://stackoverflow.com/questions/979759/operator-and-strict-weak-ordering\">strictly weak ordering</a>.</p>\n\n<p>Change it to:</p>\n\n<pre><code>bool SortForMinXMaxY(const Point &amp; a, const Point &amp;b) \n{\n   if ( a.x != b.x )\n   {\n      return (a.x &lt; b.x);\n   }\n   return (a.y &gt; b.y);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510772350, "post_id": 47314892, "comment_id": 81581275, "body": "this doesn&#39;t work!"}, {"owner": {"reputation": 674, "user_id": 1872476, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc68c7db6d34031debde9bf2957b535b?s=128&d=identicon&r=PG", "display_name": "Thadeu Antonio Ferreira Melo", "link": "https://stackoverflow.com/users/1872476/thadeu-antonio-ferreira-melo"}, "reply_to_user": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510772497, "post_id": 47314892, "comment_id": 81581359, "body": "Ok. Has @rsahu solution worked?"}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510772569, "post_id": 47314892, "comment_id": 81581407, "body": "Nope. that doesn&#39;t work too."}, {"owner": {"reputation": 674, "user_id": 1872476, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc68c7db6d34031debde9bf2957b535b?s=128&d=identicon&r=PG", "display_name": "Thadeu Antonio Ferreira Melo", "link": "https://stackoverflow.com/users/1872476/thadeu-antonio-ferreira-melo"}, "reply_to_user": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510772926, "post_id": 47314892, "comment_id": 81581635, "body": "Wha is the result if you use&quot;return (a.x &lt; b.x &amp;&amp; a.y &gt; b.y) ;&quot;?"}, {"owner": {"reputation": 674, "user_id": 1872476, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc68c7db6d34031debde9bf2957b535b?s=128&d=identicon&r=PG", "display_name": "Thadeu Antonio Ferreira Melo", "link": "https://stackoverflow.com/users/1872476/thadeu-antonio-ferreira-melo"}, "reply_to_user": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510773229, "post_id": 47314892, "comment_id": 81581835, "body": "I think my last edit or something close to it might work."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1510773407, "post_id": 47314892, "comment_id": 81581923, "body": "Using &amp;&amp; won&#39;t work.  It isn&#39;t a strict weak ordering."}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510773414, "post_id": 47314892, "comment_id": 81581925, "body": "I thought so too. But doesn&#39;t work."}, {"owner": {"reputation": 674, "user_id": 1872476, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc68c7db6d34031debde9bf2957b535b?s=128&d=identicon&r=PG", "display_name": "Thadeu Antonio Ferreira Melo", "link": "https://stackoverflow.com/users/1872476/thadeu-antonio-ferreira-melo"}, "edited": false, "score": 0, "creation_date": 1510773691, "post_id": 47314892, "comment_id": 81582097, "body": "Well. if your array is not large you could try to use another sorting algorithm."}, {"owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "edited": false, "score": 0, "creation_date": 1510773757, "post_id": 47314892, "comment_id": 81582127, "body": "@Thadeu such as?"}, {"owner": {"reputation": 674, "user_id": 1872476, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc68c7db6d34031debde9bf2957b535b?s=128&d=identicon&r=PG", "display_name": "Thadeu Antonio Ferreira Melo", "link": "https://stackoverflow.com/users/1872476/thadeu-antonio-ferreira-melo"}, "edited": false, "score": 0, "creation_date": 1510774069, "post_id": 47314892, "comment_id": 81582283, "body": "Bubble or InsectionSort. With these two you can sort the array twice, with diferente rules for each variable. InsectionSort would be far better. MergeSort might also work."}], "tags": [], "owner": {"reputation": 674, "user_id": 1872476, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc68c7db6d34031debde9bf2957b535b?s=128&d=identicon&r=PG", "display_name": "Thadeu Antonio Ferreira Melo", "link": "https://stackoverflow.com/users/1872476/thadeu-antonio-ferreira-melo"}, "is_accepted": false, "score": 0, "last_activity_date": 1510773199, "last_edit_date": 1510773199, "creation_date": 1510771051, "answer_id": 47314892, "question_id": 47314698, "link": "https://stackoverflow.com/questions/47314698/sort-points-using-c/47314892#47314892", "title": "Sort Points Using C++", "body": "<p>The C++ sort function your are calling is quicksort, so each elemento will be evaluated multiple times. You need a more strict to make sure each possibility is evaluated by the function.</p>\n\n<pre><code>bool SortForMinXMaxY(const Point &amp; a, const Point &amp;b) \n{\n   if ( a.x == b.x )\n   {\n      return (a.y &gt; b.y);\n   }\n   if ( a.y == b.y)\n   {\n      return (a.x &lt; b.x);\n   }\n   return (a.x &lt; b.x || a.y &gt; b.y);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 1, "last_activity_date": 1510786943, "last_edit_date": 1510786943, "creation_date": 1510786257, "answer_id": 47318675, "question_id": 47314698, "link": "https://stackoverflow.com/questions/47314698/sort-points-using-c/47318675#47318675", "title": "Sort Points Using C++", "body": "<p>Your problem (finding <em>lowest x value <strong>and</strong> highest y value</em>) is <strong>ILL-POSED</strong>, since the lowest x value may be another point than the highest y value. You must not ask for both at the same point, but be clearer what you actually want. There are a number of possibilities:</p>\n\n<ol>\n<li><p>The highest <code>y</code> amongst the points with lowest <code>x</code></p>\n\n<pre><code>[](Point const&amp;a, Point const&amp;b)\n{ return a.x==b.x? a.y&lt;b.y : a.x&gt;b.x; }\n</code></pre></li>\n<li><p>the lowest <code>x</code> amongst the points with highest <code>y</code></p>\n\n<pre><code>[](Point const&amp;a, Point const&amp;b)\n{ return a.y==b.y? a.x&gt;b.x : a.y&lt;b.y; }\n</code></pre></li>\n<li><p>the point with maximum difference <code>y-x</code></p>\n\n<pre><code>[](Point const&amp;a, Point const&amp;b)\n{ return a.y-a.x &lt; b.y-b.x; }\n</code></pre></li>\n</ol>\n\n<p>From your example, I guess it's the last one of these that you actually want, as <code>[48,498]</code> has neither the lowest x nor the highest y, but the largest difference.</p>\n\n<p>Finally, for merely finding the maximum of (some function of) some values, you don't need to sort them, but merely do a single pass:</p>\n\n<pre><code> auto extremum = std::max_element(Points.begin(), Points.end(),\n                                  [](Point const&amp;a, Point const&amp;b)\n                                  { return a.y-a.x &lt; b.y-b.x; });\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 2392537, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/zkuYq.png?s=128&g=1", "display_name": "nsssayom", "link": "https://stackoverflow.com/users/2392537/nsssayom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1701, "favorite_count": 0, "closed_date": 1511048913, "accepted_answer_id": 47314772, "answer_count": 3, "score": -1, "last_activity_date": 1510786943, "creation_date": 1510770361, "last_edit_date": 1510774505, "question_id": 47314698, "link": "https://stackoverflow.com/questions/47314698/sort-points-using-c", "closed_reason": "Needs details or clarity", "title": "Sort Points Using C++", "body": "<p>I need to find the point with the <strong>lowest x value</strong> and <strong>highest y value</strong> from an array of <strong>std::vector</strong>. I am currently using C++ <strong>sort</strong> function which works fine in some cases but awfully fails in some.</p>\n\n<p>My code is-</p>\n\n<pre><code>bool SortForMinXMaxY(const Point &amp; a, const Point &amp;b) \n{\n     return (a.x &lt; b.x || a.y &gt; b.y) ;\n}\n\nsort( Points.begin(), Points.end(), SortForMinXMaxY);\nMinXMaxY = Points[0];\n</code></pre>\n\n<p>This code is successful for cases like this- </p>\n\n<pre><code>[49, 500]\n[49, 374]\n[49, 260]\n[49, 129]\n[440, 374]\n[440, 259]\n[440, 128]\n[441, 501]\n</code></pre>\n\n<p>But fails for this- [ returns [47, 128] But, I need [48, 498] as it's the point with Highest Y with lowest possible X]</p>\n\n<pre><code>[47, 128]\n[48, 498]\n[48, 373]\n[48, 259]\n[443, 502]\n[443, 374]\n[443, 259]\n[443, 128]\n</code></pre>\n\n<p>Any modification of the existing code or any other ways to solve this problem for universal cases is appreciated. I also need to find more three points from this points: </p>\n\n<ol>\n<li>lowest x and lowest y</li>\n<li>highest x and lowest y</li>\n<li>highest x and highest y</li>\n</ol>\n\n<p>So, it would be best if there is a way to get the four points altogether easily.</p>\n"}, {"tags": ["c++", "arrays", "char", "integer"], "comments": [{"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1510769559, "post_id": 47314407, "comment_id": 81579690, "body": "Are the char and int the same item or separated by space? A sample file content would help"}, {"owner": {"reputation": 55, "user_id": 8942152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/94ed907283a89e675031cde645ba91d7?s=128&d=identicon&r=PG&f=1", "display_name": "Carol", "link": "https://stackoverflow.com/users/8942152/carol"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1510769744, "post_id": 47314407, "comment_id": 81579793, "body": "@KillzoneKid the char and int may or may not be the same item. I.e. the file may be &quot;1 2 3 A 6 12 90&quot; (n which case the letter appears first)."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1510769994, "post_id": 47314407, "comment_id": 81579963, "body": "<code>1 2 3 A 6 12 90</code> so this is a fail, right? A is before 6 which is &lt; 10"}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 0, "creation_date": 1510770095, "post_id": 47314407, "comment_id": 81580017, "body": "is this homework?"}, {"owner": {"reputation": 55, "user_id": 8942152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/94ed907283a89e675031cde645ba91d7?s=128&d=identicon&r=PG&f=1", "display_name": "Carol", "link": "https://stackoverflow.com/users/8942152/carol"}, "reply_to_user": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 0, "creation_date": 1510770669, "post_id": 47314407, "comment_id": 81580327, "body": "@ventsyv no its not, its part of a project I&#39;m working on but I want to report errors if the input file has random/stray data that is not relevant for the next part."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1510771213, "post_id": 47314407, "comment_id": 81580633, "body": "If you read character by character and you find 2 characters that are digits in a row before you find a letter, you&#39;ve found an error. Hmmm maybe not. 01 would fail that test. A step in the right direction, though."}], "answers": [{"comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1510769731, "post_id": 47314524, "comment_id": 81579780, "body": "Most of the time regex is <i>overshoot</i> for such simple parsing problems."}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770675, "post_id": 47314524, "comment_id": 81580330, "body": "I disagree. You can write a regex search function in less than 10 lines of code."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770778, "post_id": 47314524, "comment_id": 81580396, "body": "You can do his with good old <code>std::istream</code> text extraction methods in less than 10 lines of code as well, so what?"}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510771290, "post_id": 47314524, "comment_id": 81580685, "body": "So when your boss comes and tells you to add all those special cases, you can simply modify your regex instead of writing a whole lot of code for them."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510771534, "post_id": 47314524, "comment_id": 81580814, "body": "So when your boss comes and says: <i>&quot;Why is that file record hashing so frickin&#39; slow? What did you do there??&quot;</i>, you should also be prepared to have a good answer."}], "tags": [], "owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "is_accepted": false, "score": 0, "last_activity_date": 1510770923, "last_edit_date": 1510770923, "creation_date": 1510769644, "answer_id": 47314524, "question_id": 47314407, "link": "https://stackoverflow.com/questions/47314407/identifying-whether-an-integer-over-a-certain-value-appears-before-a-non-numeric/47314524#47314524", "title": "Identifying whether an integer over a certain value appears before a non-numerical char does C++", "body": "<p>You can use a regular expression. The following will find two or more digits followed by a letter</p>\n\n<pre><code>\\d{2,}[a-zA-Z]\n</code></pre>\n\n<p>This will work unless you have zero padded numericals (for example 01a)</p>\n\n<p>Depending on the C++ standard you are targeting, you might be able to use <code>&lt;regex&gt;</code>. More info on that <a href=\"http://www.cplusplus.com/reference/regex/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><a href=\"http://www.cplusplus.com/reference/regex/regex_search/\" rel=\"nofollow noreferrer\">Here is an example</a> how to return all matches.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 8942152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/94ed907283a89e675031cde645ba91d7?s=128&d=identicon&r=PG&f=1", "display_name": "Carol", "link": "https://stackoverflow.com/users/8942152/carol"}, "edited": false, "score": 0, "creation_date": 1510770774, "post_id": 47314707, "comment_id": 81580392, "body": "but how would I read in an integer (which can consist of 2 digits) versus a character? You&#39;re reply is making it sound like you can read in one integer as one character?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 55, "user_id": 8942152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/94ed907283a89e675031cde645ba91d7?s=128&d=identicon&r=PG&f=1", "display_name": "Carol", "link": "https://stackoverflow.com/users/8942152/carol"}, "edited": false, "score": 0, "creation_date": 1510771286, "post_id": 47314707, "comment_id": 81580679, "body": "I may be wrong, but I suspect that you learned how to turn a string of digits into an integer not that long ago. So instead of reading an integer, you read a string, then convert it into an integer if it&#39;s not a letter."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1510770369, "creation_date": 1510770369, "answer_id": 47314707, "question_id": 47314407, "link": "https://stackoverflow.com/questions/47314407/identifying-whether-an-integer-over-a-certain-value-appears-before-a-non-numeric/47314707#47314707", "title": "Identifying whether an integer over a certain value appears before a non-numerical char does C++", "body": "<p>You don't need an array, you just need keep track of which one you encounter first.</p>\n\n<p>Something like this:</p>\n\n<ul>\n<li>Define a variable letter_first</li>\n<li>As long a there is input:\n\n<ul>\n<li>Read one thing</li>\n<li>If it's a letter, then it occurs before an integer > 10; set letter_first to true and break out of the loop</li>\n<li>If it's a number greater than 10, then it occurs before a letter; set letter_first to false and break out of the loop</li>\n<li>Otherwise, continue with the next item</li>\n</ul></li>\n<li>Use the result</li>\n</ul>\n"}], "owner": {"reputation": 55, "user_id": 8942152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/94ed907283a89e675031cde645ba91d7?s=128&d=identicon&r=PG&f=1", "display_name": "Carol", "link": "https://stackoverflow.com/users/8942152/carol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1510770923, "creation_date": 1510769200, "last_edit_date": 1510769820, "question_id": 47314407, "link": "https://stackoverflow.com/questions/47314407/identifying-whether-an-integer-over-a-certain-value-appears-before-a-non-numeric", "title": "Identifying whether an integer over a certain value appears before a non-numerical char does C++", "body": "<p>I'm wanting to read through a file and identify if a letter character appears before an integer value which is above 10. The items in the file are separated by a space and at the end of the list is an \"endl;\".</p>\n\n<p>So far, I tried getting an array of the integers in the file (just by reading in the arrays and checking if any are above 10) and equally, I've been reading characters in through the file and checking if any are not a digit, but I can't work out how to compare the positions of a non-digit character and too-large integer that I find? Any advice would be greatly appreciated!</p>\n\n<pre><code>// i.e. sample file may contain:\n1 2 3 A 6 12 90 //(in which case the letter appears first).\n// example two:\n34A 20 4 5 6 7 //(large number here appears first).\n</code></pre>\n"}, {"tags": ["c++", "gdb", "aix"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1510769378, "post_id": 47314385, "comment_id": 81579578, "body": "May need to use a tedious &quot;divide and conquer&quot; approach ? #ifdef out half the code, re-compile, run, repeat..."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1510770389, "post_id": 47314385, "comment_id": 81580180, "body": "If you run the program from the shell, without using gdb, do you get different behavior?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1510770651, "post_id": 47314385, "comment_id": 81580316, "body": "You may be able to make a class with a  constructor that does something meaningless but hard to compile out, force construction of this class as early as possible in the start-up process, and place a breakpoint in this constructor. From there you may be able to step through the pre-<code>main</code> code and find the cause of death."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1510771303, "post_id": 47314385, "comment_id": 81580697, "body": "@Mark - Yes, the issue is present both inside and outside the debugger. Another wrinkle is, we are trying to add an <a href=\"https://github.com/noloader/cryptopp-autotools\" rel=\"nofollow noreferrer\">Autotools front-end</a>. Our regular [hand written] GNUmakefile is fine. The problem only surfaces under the Autotools binaries. And the image above is the Autotools binary."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1510771464, "post_id": 47314385, "comment_id": 81580773, "body": "So you can easily compare the compile and link commands."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1510772458, "post_id": 47314385, "comment_id": 81581342, "body": "@RustyX - Well, I&#39;m not sure how easy it will be. We place the same options in Autotools we place in our GNUmakefile. But Autotools adds its own flags and I don&#39;t know how to stop them. And Autotools adds C source files to the project, and I don&#39;t know how to stop that behavior either. Related, see <a href=\"https://stackoverflow.com/q/47060001/608639\">How to disable C compiler in C++ Autotools project</a>. And I think Libtool adding C source files is a bug; see <a href=\"https://lists.gnu.org/archive/html/bug-libtool/2017-11/msg00002.html\" rel=\"nofollow noreferrer\">Bug #29298: C++ compiler, Newlib and &quot;implicit declaration...&quot;</a>."}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1510830709, "post_id": 47314385, "comment_id": 81606932, "body": "@OP Do examine the core file with gdb."}], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 1, "creation_date": 1510835346, "post_id": 47321017, "comment_id": 81609995, "body": "Actually, unlike linux!loader, AIX!loader does explain what unresolved external prohibited the loading of the program. There is no core-dump in these cases."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 2, "last_activity_date": 1510802415, "creation_date": 1510802415, "answer_id": 47321017, "question_id": 47314385, "link": "https://stackoverflow.com/questions/47314385/message-during-startup-program-terminated-with-signal-sigkill-from-gdb/47321017#47321017", "title": "Message &quot;During startup program terminated with signal SIGKILL&quot; from GDB", "body": "<p>The <code>SIGKILL</code> at startup most likely means that the AIX runtime loader couldn't find some library that the binary links against (a Linux runtime loader produces a more helpful error message when that happens).</p>\n\n<p>You should verify that <code>ldd cryptestcwd</code> doesn't complain about anything.</p>\n\n<p>You could also try to load the <code>core</code> that is produced when you run your program outside of GDB into GDB -- there may be additional clues there (use <code>info shared</code>, <code>where</code>, <code>x/i $pc</code> commands).</p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3032, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510802415, "creation_date": 1510769124, "last_edit_date": 1510782948, "question_id": 47314385, "link": "https://stackoverflow.com/questions/47314385/message-during-startup-program-terminated-with-signal-sigkill-from-gdb", "title": "Message &quot;During startup program terminated with signal SIGKILL&quot; from GDB", "body": "<p>I'm having trouble debugging a C++ program on AIX built with GNU tools. When the program runs outside the debugger:</p>\n\n<pre><code>-bash-4.3$ ./cryptestcwd v\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>When the program runs under GDB, the debugger prints the message <em><code>During startup program terminated with signal SIGKILL, Killed.</code></em> and exits:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oSOgN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oSOgN.png\" alt=\"enter image description here\"></a></p>\n\n<p>An added wrinkle is, this only happens with an <a href=\"https://github.com/noloader/cryptopp-autotools\" rel=\"nofollow noreferrer\">Autotools front-end</a>. It does not happens with our regular GNUmakefile. We supply the same arguments to both Autotools and the GNUmakefile. We are aware Autotools <a href=\"https://stackoverflow.com/q/47315717/608639\">adds additional options</a> and even <a href=\"https://stackoverflow.com/q/47315717/608639\">adds C files</a> to the C++ project, but we have no control over it.</p>\n\n<p>A related question is at <a href=\"https://stackoverflow.com/q/16416866/608639\">During startup program terminated with signal SIGKILL, Killed</a>, but it does not have useful answers. Two other related questions just state that <code>SIGKILL</code> cannot be caught. Also see <a href=\"https://stackoverflow.com/q/25325847/608639\">Debugging program that catches SIGKILL under Linux</a> and <a href=\"https://stackoverflow.com/q/23826676/608639\">Handling signals with gdb</a>.</p>\n\n<p>How can I debug the problem further?</p>\n"}, {"tags": ["c#", "c++", "ios", "visual-c++", "uwp"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510769006, "post_id": 47314331, "comment_id": 81579400, "body": "Using <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b-cli\">c++-cli</a> seems to be the easiest option."}, {"owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510769782, "post_id": 47314331, "comment_id": 81579816, "body": "Could you explain? I still get the impression that I have to write a wrapper in order to expose it to C#. I get CLI will be common, but does my C++ code stay standard in that way?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510769861, "post_id": 47314331, "comment_id": 81579866, "body": "<i>&quot;but does my C++ code stay standard in that way?&quot;</i> Of course not. Do you have to write portable c++ code?"}, {"owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770098, "post_id": 47314331, "comment_id": 81580020, "body": "Yes I have to write portable C++ code to support UWP and iOS."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770224, "post_id": 47314331, "comment_id": 81580096, "body": "That requires you need to write some extra layer to wrap the plain standard C++ API. C# cannot consume from the native C++ interfaces directly."}, {"owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770495, "post_id": 47314331, "comment_id": 81580222, "body": "That stinks... That kind of defeats the purpose of portable C++ code. At least for data models (large amounts of members etc..)"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770711, "post_id": 47314331, "comment_id": 81580351, "body": "You probably misunderstood what I meant. The c++ kernel API will still be portable. The extra efforts on top is to write a relatively thin layer (well, still easiest using c++-cli) to make the proper marshalling from c++ to c# happen."}, {"owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770817, "post_id": 47314331, "comment_id": 81580422, "body": "Yeah but doesn&#39;t that mean I have to redefine all my class members in the c++cli/clr wrapper? i.e. I can&#39;t just say hay here is an object called <code>bob</code>. I have to say here is an object called <code>bob</code> and his <code>birthday</code>, <code>socialsec</code>, <code>bankacct</code> etc. right?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510770963, "post_id": 47314331, "comment_id": 81580492, "body": "Sure, that&#39;s what&#39;s needed to be done. Who ever promised that C# types should be compatible with native C++?"}, {"owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510772674, "post_id": 47314331, "comment_id": 81581471, "body": "At least the primitive types and some of the basics like map or vector. I guess I&#39;ll just build it out. But it&#39;s unfortunate that it&#39;s almost duplicated work at that point."}, {"owner": {"reputation": 373, "user_id": 1782708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6706fc6e9bf14fc0507d4e2d8f566c80?s=128&d=identicon&r=PG", "display_name": "Mikkel K.", "link": "https://stackoverflow.com/users/1782708/mikkel-k"}, "edited": false, "score": 0, "creation_date": 1510773702, "post_id": 47314331, "comment_id": 81582102, "body": "If you want a truly portable library, you could also wrap it in a C interface. You&#39;d then make a C# wrapper around that using standard interop (and in this case there&#39;d be no point in using C++/CLI)."}], "owner": {"reputation": 3549, "user_id": 4102299, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b2230dd0847bea99293f3707fb7b6da9?s=128&d=identicon&r=PG&f=1", "display_name": "visc", "link": "https://stackoverflow.com/users/4102299/visc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510768892, "creation_date": 1510768892, "question_id": 47314331, "link": "https://stackoverflow.com/questions/47314331/what-can-i-do-to-expose-a-standard-c-object-in-visual-c", "title": "What can I do to expose a standard C++ object in visual C++?", "body": "<p>I'm writing a universal runtime component using code from a shared standard C++ library (i.e. I can't public ref the whole thing). We want to use this code acress iOS an UWP/Windows Store btw.</p>\n\n<p>The problem is it seems in order to use C++ in my C# uwp app I have to create a universal runtime component using visual C++. I get the incentive of allowing these components to be used by many languages. But how do I expose a basic C++ object to C# in one of these components?</p>\n\n<p>Do I just create an interface and methods for everything I want to expose in visual C++?</p>\n"}, {"tags": ["android", "c++", "cmake", "static-libraries"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 1, "creation_date": 1510769127, "post_id": 47314274, "comment_id": 81579455, "body": "YOu have to set the directory of the headers in the includes directory list of your project."}], "answers": [{"tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 1, "last_activity_date": 1510769244, "creation_date": 1510769244, "answer_id": 47314425, "question_id": 47314274, "link": "https://stackoverflow.com/questions/47314274/use-header-file-h-from-a-static-library-a/47314425#47314425", "title": "Use header file (.h) from a static library (.a)", "body": "<p>Static library files (<code>.a</code> on Unix/Linux <code>.lib</code> on Windows) do normally <strong>not</strong> contain headers. Yes, technically it is possible to pack arbitrary files along the object files, but most linkers will just choke on that and refuse to go to work when presented with such an abomination.</p>\n\n<p>The most likely reason that when searching for the header name in the archive matches is, that the header file name is part of the debugging metadata that's part of the library (so that a debugger can translate binary locations to source file locations).</p>\n\n<p>You have to install the headers separately and specify the installation location when compiling as additional include directory.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1510775000, "last_edit_date": 1510775000, "creation_date": 1510769254, "answer_id": 47314428, "question_id": 47314274, "link": "https://stackoverflow.com/questions/47314274/use-header-file-h-from-a-static-library-a/47314428#47314428", "title": "Use header file (.h) from a static library (.a)", "body": "<p>To use a library you need two things: the compiled code for the library (in a .a file, a .so file, a .lib file, or whatever) and, separately a header file that describes the entry points for the library. In general you can't derive the header from the library.</p>\n\n<p>For example, to use the C++ standard library (which comes with your compiler as some form of library file) you use the standard header files, which have names like \"iostream\", \"string\", and so on.</p>\n\n<p>For example, if you have a library that contains compiled code from one source file:</p>\n\n<pre><code>// source.cpp\n#include &lt;iostream&gt;\nvoid f(int i) {\n    std::cout &lt;&lt; i &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>you need a header file that describes that entry point:</p>\n\n<pre><code>// mylibrary.h\nvoid f(int i);\n</code></pre>\n\n<p>In every source file that calls <code>f</code> you need <code>#include \"mylibrary.h\"</code> and when you link your executable you need to link with the compiled code in the library.</p>\n"}], "owner": {"reputation": 1492, "user_id": 4337310, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a9bef9a8ef9e7ed2c6cf655b8c2d824c?s=128&d=identicon&r=PG&f=1", "display_name": "PRVS", "link": "https://stackoverflow.com/users/4337310/prvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1720, "favorite_count": 0, "accepted_answer_id": 47314425, "answer_count": 2, "score": 2, "last_activity_date": 1510775000, "creation_date": 1510768652, "last_edit_date": 1510769053, "question_id": 47314274, "link": "https://stackoverflow.com/questions/47314274/use-header-file-h-from-a-static-library-a", "title": "Use header file (.h) from a static library (.a)", "body": "<p>I'm trying to use a static library (.a) in another project. I want to make an <code>#include</code> of a header from this .a, but i'm with errors. </p>\n\n<p>First, I tried to search .h file in the .a file, in order to understand if it exists under .a and I get: </p>\n\n<pre><code>Binary file libtest.a matches\n</code></pre>\n\n<p>So, the header in under the static library. Then, I insert this way in the CMakeFiles.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\nadd_library(hello-jni SHARED\n            hello-jni.c)\n\n# Include libraries needed for hello-jni lib\ntarget_link_libraries(hello-jni\n                      android\n                      log\n                     /home/prvs/android-ndk/hello/jni/app/src/main/cpp/libtest.a\n              )\n</code></pre>\n\n<p>However, when I run the app in Android-Studio I got:</p>\n\n<pre><code>Fatal error: 'example.h' file not found\n</code></pre>\n\n<p>And I'm importing to the C like this:</p>\n\n<pre><code>#include &lt;example.h&gt;\n</code></pre>\n\n<p>In order to import a header file, it is necessary another steps?</p>\n"}, {"tags": ["c++", "templates", "sfinae"], "answers": [{"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 2, "last_activity_date": 1510773038, "last_edit_date": 1592644375, "creation_date": 1510769314, "answer_id": 47314443, "question_id": 47314166, "link": "https://stackoverflow.com/questions/47314166/detection-idiom-and-sfinae-via-inheritance/47314443#47314443", "title": "Detection Idiom and SFINAE via Inheritance", "body": "<p>In the second case, the base class is not part of the template type, so it's not considered during SFINAE (It's a <em>dependent base class</em>)</p>\n<p>Instantiating</p>\n<pre><code>template &lt;typename T&gt;\nstruct chips2&lt;T*&gt;\n</code></pre>\n<p>Succeeds, and then compilation fails because it derives from <code>std::enable_if_t&lt;std::is_same&lt;T,int&gt;::value,Base&gt;</code> which becomes an ill-formed expression.</p>\n<hr />\n<p>You cannot specialize templates by their base class<sup>*</sup>.</p>\n<p>For example, you couldn't have two competing specializations like:</p>\n<pre><code>template &lt;typename T&gt;\nstruct chips2&lt;T*&gt; : std::enable_if_t&lt;std::is_same&lt;T,int&gt;::value,Base&gt; {\n  using type = int;\n};\n\ntemplate &lt;typename T&gt;\nstruct chips2&lt;T*&gt; : std::enable_if_t&lt;!std::is_same&lt;T,int&gt;::value,Base&gt; {\n  using type = float;\n};\n</code></pre>\n<p>They would be considered identical from a specialization standpoint (i.e., they are identical from a naming standpoint, so the compiler will consider the second one to be a redeclaration of the first one). The only part that matters is everything up to the colon <code>:</code></p>\n<p>In the first case, your <code>enable_if</code> is directly part of the template specialization, so SFINAE works properly.</p>\n<hr />\n<h2>Another note</h2>\n<p>In the second one, you've effectively made it impossible to instantiate <code>chips2</code> with anything other than <code>int*</code>, see the following example:</p>\n<pre><code>struct Base {};\n\ntemplate &lt;typename&gt;\nstruct chips2\n{};\n\ntemplate &lt;typename T&gt;\nstruct chips2&lt;T*&gt; \n   : std::enable_if_t&lt;std::is_same&lt;T,int&gt;::value, Base&gt; \n{};\n\nint main(){\n    chips2&lt;float*&gt; c;\n}\n</code></pre>\n<p>You might be inclined to think that SFINAE will choose the base class template for <code>c</code>, but in reality it chooses the specialization <code>chips2&lt;T*&gt;</code> because of what I said above, and compilation fails.</p>\n<hr />\n<p><sup>*</sup>Relevant standardese at [temp.spec]</p>\n<blockquote>\n<p>the name of the class that is explicitly specialized shall be a <em>simple-template-id.</em></p>\n</blockquote>\n<p>Where a <em>simple-template-id</em> is of the form: <br/>\n\u00a0\u00a0 <em>template-name &lt; template-argument-listopt &gt;</em></p>\n<p>e.g. <code>chips2&lt;T*&gt;</code>. Note that there is no option to also include the class it derives from</p>\n"}], "owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 47314443, "answer_count": 1, "score": 3, "last_activity_date": 1510773038, "creation_date": 1510768298, "question_id": 47314166, "link": "https://stackoverflow.com/questions/47314166/detection-idiom-and-sfinae-via-inheritance", "title": "Detection Idiom and SFINAE via Inheritance", "body": "<p>I can use <code>std::experimental::is_detected</code> to check whether <code>chips1_t</code> can be instantiated with <code>float*</code> (which it can't) as shown in the <code>static_assert</code> below:</p>\n\n<pre><code>#include &lt;experimental/type_traits&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename, typename = void&gt;\n  struct chips1;\n\ntemplate &lt;typename T&gt;\nstruct chips1&lt;T*,std::enable_if_t&lt;std::is_same&lt;T,int&gt;::value&gt;&gt; {\n  using type = int;\n};\n\ntemplate &lt;typename T&gt; using chips1_t = typename chips1&lt;T&gt;::type;\n\nstatic_assert(!std::experimental::is_detected&lt;chips1_t,float*&gt;::value,\"\");\n</code></pre>\n\n<p>If I then try a check using <code>chips2_t</code>, a similar <code>static_assert</code>, shown below, will produce a compilation error; regarding the missing <code>type</code> member. Can anyone tell me why?</p>\n\n<pre><code>struct Base {};\n\ntemplate &lt;typename&gt;\n  struct chips2;\n\ntemplate &lt;typename T&gt;\nstruct chips2&lt;T*&gt; : std::enable_if_t&lt;std::is_same&lt;T,int&gt;::value,Base&gt; {\n  using type = int;\n};\n\ntemplate &lt;typename T&gt; using chips2_t = typename chips2&lt;T&gt;::type;\n\nstatic_assert(!std::experimental::is_detected&lt;chips2_t,float*&gt;::value,\"\");\n</code></pre>\n"}, {"tags": ["c++", "pointers", "object-slicing"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510767976, "post_id": 47314057, "comment_id": 81578841, "body": "Does <code>Shape</code> have at least a <code>virtual ~Shape() {}</code> destructor?"}, {"owner": {"reputation": 33, "user_id": 8741380, "user_type": "registered", "profile_image": "https://graph.facebook.com/1619805741405055/picture?type=large", "display_name": "Lazar Lazarov", "link": "https://stackoverflow.com/users/8741380/lazar-lazarov"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510768046, "post_id": 47314057, "comment_id": 81578878, "body": "It does indeed - so does Circle."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1510768072, "post_id": 47314057, "comment_id": 81578889, "body": "Overload resolution is not dynamic in C++. You need virtual functions here."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1510768076, "post_id": 47314057, "comment_id": 81578891, "body": "<code>*shapes[0]</code> calls <code>operator&lt;&lt; (std::ostream&amp; stream, const Shape&amp; shape)</code> as it supposed to. Your expectations are wrong."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1510768061, "creation_date": 1510768061, "answer_id": 47314101, "question_id": 47314057, "link": "https://stackoverflow.com/questions/47314057/c-object-slicing-even-after-using-pointers/47314101#47314101", "title": "C++ - Object slicing even after using pointers", "body": "<p>overload resolution is done with static type.</p>\n\n<p>You may use:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt; (std::ostream&amp; stream, const Shape&amp; shape) {\n    shape.print(stream);\n    return stream;\n}\n</code></pre>\n\n<p>with <code>virtual void Shape::print(std::ostream&amp;) const;</code> to solve your issue.</p>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 3, "last_activity_date": 1510768258, "creation_date": 1510768258, "answer_id": 47314156, "question_id": 47314057, "link": "https://stackoverflow.com/questions/47314057/c-object-slicing-even-after-using-pointers/47314156#47314156", "title": "C++ - Object slicing even after using pointers", "body": "<p>There's no slicing involved, it just looks like it.</p>\n\n<p>Overloads are selected at compile time, from the static type as it is known to the compiler.<br>\nSince <code>shapes</code> is a <code>vector&lt;Shape*&gt;</code>, <code>*shapes[0]</code> is a <code>Shape&amp;</code>, and that overload is chosen.</p>\n\n<p>The common solution is to only write an <code>operator&lt;&lt;</code> for the base class, and that in turn calls a virtual function on the object.<br>\nThis will let the dynamic function dispatch select the function at runtime.</p>\n\n<p>For instance:</p>\n\n<pre><code>struct Shape  { virtual ostream&amp; print(ostream&amp; os) const { ... } };\nstruct Circle { ostream&amp; print(ostream&amp; os) const override { ... } };\n\nostream&amp; operator&lt;&lt;(ostream&amp; os, const Shape&amp; s) { return s.print(os); }\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8741380, "user_type": "registered", "profile_image": "https://graph.facebook.com/1619805741405055/picture?type=large", "display_name": "Lazar Lazarov", "link": "https://stackoverflow.com/users/8741380/lazar-lazarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 47314156, "answer_count": 2, "score": 2, "last_activity_date": 1510768258, "creation_date": 1510767884, "question_id": 47314057, "link": "https://stackoverflow.com/questions/47314057/c-object-slicing-even-after-using-pointers", "title": "C++ - Object slicing even after using pointers", "body": "<p>I have a base class Shape, and a derived class Circle which inherits Shape publically:</p>\n\n<pre><code>class Circle : public Shape\n</code></pre>\n\n<p>I made a C++ vector of Shape pointers, and I assigned Circle pointers to them. I'd read up a lot on object slicing so expected the code to treat the Circle in the vector as a Circle, not a Shape.</p>\n\n<p>Can anyone point out what's wrong with this, given the output?</p>\n\n<pre><code>int main(void) {\nvector&lt;Shape*&gt; shapes;\n\nCircle* ncl = new Circle(-8, -8, 0.2f);\nshapes.push_back(ncl);\n\ncout &lt;&lt; \"Expected: \" &lt;&lt; *ncl &lt;&lt; endl;\ncout &lt;&lt; \"Reality: \" &lt;&lt; *shapes[0] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>Expected: Circle is at: -8,-8 and has a radius of: 0.2\nReality: Shape centered at point: -8,-8\n</code></pre>\n\n<p>I have overridden the &lt;&lt; operator for both classes out of scope, so I think that's not the problem, but still - here's the code context of my overrides:</p>\n\n<pre><code>inline std::ostream&amp; operator&lt;&lt; (std::ostream&amp; stream, const Shape&amp; shape) {\n    std::cout &lt;&lt; \"Shape centered at point: \" &lt;&lt; shape.getX() &lt;&lt; \",\" &lt;&lt; shape.getY();\n    return stream;\n}\n\ninline std::ostream&amp; operator&lt;&lt; (std::ostream&amp; stream, const Circle&amp; circle) {\n    std::cout &lt;&lt; \"Circle is at: \" &lt;&lt; circle.getX() &lt;&lt; \",\" &lt;&lt; circle.getY() &lt;&lt; \n        \" and has a radius of: \" &lt;&lt; circle.getR();\n    return stream;\n}\n</code></pre>\n\n<p>All in all - I want to be able to access my Circle variables properly while they're stored in the Shape vector (with pointers or otherwise).</p>\n"}, {"tags": ["c++", "cuda", "thrust"], "answers": [{"comments": [{"owner": {"reputation": 14111, "user_id": 217019, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ede807eedb7fe77242664741f91627f7?s=128&d=identicon&r=PG", "display_name": "Mateusz Dymczyk", "link": "https://stackoverflow.com/users/217019/mateusz-dymczyk"}, "edited": false, "score": 0, "creation_date": 1510827031, "post_id": 47326786, "comment_id": 81604366, "body": "Yes, that&#39;s what I was afraid of. Guess I&#39;ll just have to do without it somehow. Wondering if that&#39;s just a <code>thrust</code> shortcoming or was it not done due to some other concerns."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "reply_to_user": {"reputation": 14111, "user_id": 217019, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ede807eedb7fe77242664741f91627f7?s=128&d=identicon&r=PG", "display_name": "Mateusz Dymczyk", "link": "https://stackoverflow.com/users/217019/mateusz-dymczyk"}, "edited": false, "score": 0, "creation_date": 1510827688, "post_id": 47326786, "comment_id": 81604815, "body": "all the thrust containers were modelled after the SGI STL/C++ standard library, and they don&#39;t offer anything like this. The obvious model to use would be something like <code>boost::range</code>, but that is still an iterator, not a container. It seems to me that the problem is really with the API you are using. If it was written to accept iterators, we wouldn&#39;t be having this conversation....."}], "tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": false, "score": 1, "last_activity_date": 1510826847, "creation_date": 1510826847, "answer_id": 47326786, "question_id": 47313847, "link": "https://stackoverflow.com/questions/47313847/thrust-vector-slice-view/47326786#47326786", "title": "Thrust vector slice/view", "body": "<p>There is no way to do this that I am aware of. </p>\n\n<p>Thrust doesn't expose a <code>device_vector</code> constructor which accepts an existing <code>device_pointer</code>. Were that the case, you could potentially implement you own device_pointer which supported strided access or slicing, etc. But I don't know of a way to achieve what you envisage without recourse to fancy iterators, and apparently those are not viable for your use case.</p>\n"}], "owner": {"reputation": 14111, "user_id": 217019, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ede807eedb7fe77242664741f91627f7?s=128&d=identicon&r=PG", "display_name": "Mateusz Dymczyk", "link": "https://stackoverflow.com/users/217019/mateusz-dymczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1510826847, "creation_date": 1510767193, "question_id": 47313847, "link": "https://stackoverflow.com/questions/47313847/thrust-vector-slice-view", "title": "Thrust vector slice/view", "body": "<p>I have a matrix (row oriented) inside a <code>thrust::device_vector&lt;T&gt;</code>. Is there any way to get a slice/view of that vector (that would also be of type <code>thrust::device_vector&lt;T&gt;</code>)? I'm not interested in copy constructors as those create new vectors and use memory.</p>\n\n<p>So basically assuming we have a vector <code>thrust::device_vector&lt;int&gt; vec = {1,2,3,4,5,6}</code> I'd like to do <code>thrust::device_vector&lt;int&gt; vec_view = vec.slice(2,4)</code> that would be a view pointing to <code>{3,4}</code>.</p>\n\n<p>Need to run certain computations on it in batches and the method I'm using takes only <code>thrust:device_vector&lt;T&gt;</code> (no iterators etc.). </p>\n"}, {"tags": ["c++", "vector", "move-semantics", "unique-ptr", "emplace"], "comments": [{"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1510771633, "post_id": 47313833, "comment_id": 81580869, "body": "For future reference, these are useful and relevant questions: <a href=\"https://stackoverflow.com/questions/29089227/push-back-or-emplace-back-with-stdmake-unique\" title=\"push back or emplace back with stdmake unique\">stackoverflow.com/questions/29089227/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/35404932/stdvectoremplace-back-and-stdmove\" title=\"stdvectoremplace back and stdmove\">stackoverflow.com/questions/35404932/&hellip;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1510768633, "post_id": 47314019, "comment_id": 81579196, "body": "Thanks so much for the response. Will go through it carefully to see if I have any follow-up questions, but for now, I have a very quick and dumb question: in my code, why was I able to simply call <code>move()</code> rather than needing to use <code>std::move()</code>? I never use <code>using namespace std</code>, and all other symbols in <code>std</code> correctly require the <code>std::</code> prefix..."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 1, "creation_date": 1510768815, "post_id": 47314019, "comment_id": 81579289, "body": "@PhysicsCodingEnthusiast That&#39;s not a dumb question! It&#39;s because <code>pBeta</code> is in the namespace. The compiler also searches the namespace of a function&#39;s arguments to find it. This is called ADL."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1510769346, "post_id": 47314019, "comment_id": 81579565, "body": "Ah, okay. That makes sense. Thank you. I guess, to be safe, it&#39;s probably a good idea to include <code>std::</code>, even when ADL applies? Also, one other point of confusion: in this example, what is the transfer of ownership from and to? Is it <i>from</i> the function <code>addBeta</code> and <i>to</i> the vector <code>betaVec</code>?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 1, "creation_date": 1510769540, "post_id": 47314019, "comment_id": 81579680, "body": "@PhysicsCodingEnthusiast I do it, mainly for consistency. But is is safe, because it is an actual language rule :) I&#39;d say that is is happening from <code>pBeta</code> to <code>betaVec</code> (or an element of it - I guess you could say both), but not from the function, because it doesn&#39;t really have anything to do with the ownership of variables defined in it."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1510769902, "post_id": 47314019, "comment_id": 81579901, "body": "I was initially thinking it was being transferring from <code>pBeta</code>, but it seemed strange to me, since that makes it seem like the <code>unique_ptr</code> is being transferred from itself to something else. But I suppose that <code>pBeta</code> is more accurately a named storage &quot;container&quot; for the <code>unique_ptr</code>, and ownership is being transferred from that &quot;container&quot; to the element of <code>betaVec</code>."}, {"owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1510770109, "post_id": 47314019, "comment_id": 81580025, "body": "Sorry, one last question for you: in this case, since the object has already been constructed, does it matter if I use <code>emplace_back()</code> vs. <code>push_back()</code>?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "edited": false, "score": 0, "creation_date": 1510776417, "post_id": 47314019, "comment_id": 81583514, "body": "@PhysicsCodingEnthusiast Yes and no. Because you are passing the object you want to construct, it doesn&#39;t matter. <code>emplace</code> is used to construct the object in place with the arguments of the constructor, but naturally it also works if you need to copy/move an object."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 5, "last_activity_date": 1510767752, "creation_date": 1510767752, "answer_id": 47314019, "question_id": 47313833, "link": "https://stackoverflow.com/questions/47313833/why-is-move-necessary-with-emplace-back-in-this-example/47314019#47314019", "title": "Why is move necessary with emplace_back in this example?", "body": "<blockquote>\n  <p>I was under the assumption that <code>emplace_back()</code> implicitly uses/calls a move constructor</p>\n</blockquote>\n\n<p>Sorry, but you're assumption is wrong. <code>emplace_back</code> constructs the object in the vector in-place, i.e. instead of copying/moving the object from its parameters, it constructs the element directly which avoids the copy/move constructor.</p>\n\n<p>Now, if you construct the object with the same (but another) object, then of course either the copy or the move constructor will get used instead, which is what is happening in your case.</p>\n\n<blockquote>\n  <p>so why is an explicit <code>move()</code> necessary</p>\n</blockquote>\n\n<p>Because you can't copy a <code>std::unique_ptr</code>. Basically, <code>emplace_back</code> does something akin to this:</p>\n\n<pre><code>new (place) T(std::forward&lt;Ts&gt;(args)...);\n</code></pre>\n\n<p>It's like if you did: <code>T a(std::forward&lt;Ts&gt;(args)...)</code> (for construction only, it doesn't actually do the same thing).</p>\n\n<p>Now it might be a bit more obvious:</p>\n\n<pre><code>T option1(std::move(pBeta)); // ok, move\nT option3(pBeta); // error, copy\n</code></pre>\n\n<blockquote>\n  <p>Does it have something to do with <code>r-value</code> vs. <code>l-value</code>? Or does this have to do with <code>std::unique_ptr</code> needing to transfer ownership?</p>\n</blockquote>\n\n<p>Well, in a way, yes. <code>std::unique_ptr</code> requires explicit transfer of ownership, that's why the copy is disabled and the move is not (you still want to transfer ownership! And a copy can happen everywhere - why <code>std::auto_ptr</code> was deprecated, then removed). An rvalue uses move semantics by default, while an lvalue does not. By using <code>std::move</code>, you are doing a conversion from an lvalue to a prvalue, effectively \"hiding\" the fact that you have an lvalue, and the compiler will happily move from it.</p>\n"}], "owner": {"reputation": 643, "user_id": 1483948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f12de9d09fa231c155b8d528df46094e?s=128&d=identicon&r=PG", "display_name": "AnInquiringMind", "link": "https://stackoverflow.com/users/1483948/aninquiringmind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 2, "accepted_answer_id": 47314019, "answer_count": 1, "score": 6, "last_activity_date": 1510767752, "creation_date": 1510767147, "question_id": 47313833, "link": "https://stackoverflow.com/questions/47313833/why-is-move-necessary-with-emplace-back-in-this-example", "title": "Why is move necessary with emplace_back in this example?", "body": "<p>The following minimal working example compiles when the code under option 1 or option 2 is used, but does <em>not</em> compile when the code under option 3 is used. I was under the assumption that <code>emplace_back()</code> implicitly uses/calls a <code>move</code> constructor, so why is an explicit <code>move()</code> necessary? Does it have something to do with <code>r-value</code> vs. <code>l-value</code>? Or does this have to do with <code>std::unique_ptr</code> needing to transfer ownership? (I am still new to these concepts, particularly in this context.)</p>\n\n<p>For completeness, option 4 with <code>push_back()</code> does not compile, either, unless <code>move()</code> is called.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nclass Beta {\npublic:\n    Beta(int x, int y, int z): mX(x), mY(y), mZ(z) { };\n    int mX; int mY; int mZ;\n\n};\n\nclass Alpha {\npublic:\n    std::vector&lt;std::unique_ptr&lt;Beta&gt;&gt; betaVec;\n    void addBeta(int x, int y, int z) {\n        // only choose one of the following options:\n        // option 1 (compiles)\n        std::unique_ptr&lt;Beta&gt; pBeta = std::make_unique&lt;Beta&gt;(x, y, z);\n        betaVec.emplace_back(move(pBeta));\n\n        // option 2 (compiles)\n        betaVec.emplace_back(std::make_unique&lt;Beta&gt;(x, y, z));\n\n        // option 3 (does not compile)\n        std::unique_ptr&lt;Beta&gt; pBeta = std::make_unique&lt;Beta&gt;(x, y, z);\n        betaVec.emplace_back(pBeta);\n\n        // option 4 (does not compile)\n        std::unique_ptr&lt;Beta&gt; pBeta = std::make_unique&lt;Beta&gt;(x, y, z);\n        betaVec.push_back(pBeta);\n\n        // option 5 (compiles)\n        std::unique_ptr&lt;Beta&gt; pBeta = std::make_unique&lt;Beta&gt;(x, y, z);\n        betaVec.push_back(move(pBeta));\n    }\n};\n\nint main() {\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Note:</strong> I do not believe that this is a duplicate of <a href=\"https://stackoverflow.com/questions/8114276/how-do-i-pass-a-unique-ptr-argument-to-a-constructor-or-a-function\">this question</a> about passing <code>unique_ptr</code> parameters to functions, even though the answers to the linked question are useful, as this is asking about defining a <code>unique_ptr</code> <em>within</em> a function and then moving it to a member <code>vector</code> so that it is not destroyed at the end of the function and, furthermore, is asking specifically about <code>emplace_back()</code> in this context.</p>\n\n<p>Additionally, I think that it would be useful to have explanations given in this context, as it is sometimes difficult to translate explanations from one context to another. Thank you!</p>\n"}, {"tags": ["c++", "copy-constructor", "ifstream"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1510767073, "post_id": 47313788, "comment_id": 81578323, "body": "why do you think you have to open the file three times?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1510767151, "post_id": 47313788, "comment_id": 81578372, "body": "maybe thats the source of your misunderstanding: You cannot copy a stream, but you can pass references around as you wish. Open it once, pass it around, do some stuff, close it once."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8337500"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510767540, "post_id": 47313788, "comment_id": 81578600, "body": "Yes but how do I pass it around? getLine(&amp;myfile) doesn&#39;t work.."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510767682, "post_id": 47313788, "comment_id": 81578678, "body": "you are actually already passing it by reference. No offense, but from your last comment I get the impression that you are missing some basics. I suggest you to take a look <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">here</a> and do some research on references"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8337500"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510767759, "post_id": 47313788, "comment_id": 81578724, "body": "Yes I do, that&#39;s why I&#39;m asking here. Thought it was the most efficient way"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510768180, "post_id": 47313788, "comment_id": 81578949, "body": "sorry, but there is no way of learning C++ for dummies (still no offense). There is just too much opportunity to get it wrong. The only proper way to learn it is to rtfm"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8337500"}, "edited": false, "score": 0, "creation_date": 1510821303, "post_id": 47315685, "comment_id": 81600421, "body": "Thanks for your answer. I know that creating the matrix via vectors makes this easier, but I want to use QuantLib::Matrix since I need some functions of it in the further code. Thus I need to know in advance what the number of rows and columns are. After the setMatrix a function readFile(abwicklungsdreieck, myfile2) gets called which reads the file and sets the values out of it to the matrix of abwicklungsdreieck."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 0, "last_activity_date": 1510774806, "last_edit_date": 1510774806, "creation_date": 1510773944, "answer_id": 47315685, "question_id": 47313788, "link": "https://stackoverflow.com/questions/47313788/alternative-for-deleted-copy-constrctor-of-ifstream/47315685#47315685", "title": "Alternative for deleted copy constrctor of ifstream", "body": "<p>You can read the file line by line, convert each line to a stream, then read the columns on the stream:</p>\n\n<pre><code>std::ifstream myfile(filename);\nif(!myfile) return 0;\n\nstd::string line;\nwhile(std::getline(myfile, line))\n{\n    std::stringstream ss(line);\n    std::string column;\n    while(std::getline(ss, column, ';'))\n    {\n        cout &lt;&lt; column;\n    }\n    cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><code>getline(myfile, line)</code> will copy each row in to <code>line</code>.</p>\n\n<p>Convert line to <code>ss</code> stream.</p>\n\n<p><code>getline(ss, column, ';')</code> will break the line in to columns.</p>\n\n<p>Use <code>std::stoi</code> to convert the string in to integer.</p>\n\n<p>If your matrix is based on <code>std::vector</code>, you can grow the vector one row at a time, so you don't need to know the size in advance.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n\nvoid readfile(const std::string &amp;filename)\n{\n    std::vector&lt;std::vector&lt;int&gt;&gt; matrix;\n    std::ifstream myfile(filename);\n    if(!myfile) return;\n    std::string buf;\n    while(std::getline(myfile, buf))\n    {\n        int maxrow = matrix.size();\n        std::stringstream ss(buf);\n        matrix.resize(maxrow + 1);\n        cout &lt;&lt; \"break in to columns:\" &lt;&lt; buf &lt;&lt; \"\\n\";\n        while(std::getline(ss, buf, ';'))\n        {\n            try {\n                int num = std::stoi(buf);\n                matrix[maxrow].push_back(num);\n            }\n            catch(...) { }\n        }\n    }\n\n    for(auto &amp;row : matrix) {\n        for(auto col : row)\n            cout &lt;&lt; col &lt;&lt; \"|\";\n        cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8337500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510774806, "creation_date": 1510766983, "question_id": 47313788, "link": "https://stackoverflow.com/questions/47313788/alternative-for-deleted-copy-constrctor-of-ifstream", "title": "Alternative for deleted copy constrctor of ifstream", "body": "<p>I want to extract data from a csv file but I have to get the number of rows and columns of the table first.</p>\n\n<p>What I have so far is the following:</p>\n\n<pre><code>        std::ifstream myfile(filename); // filename is a string and passed in by the constructor\n        if (myfile.is_open())\n        {\n            // First step: Get number of rows and columns of the matrix to initialize it.\n            // We have to close and re-open the file each time we want to work with it.\n            int rows = getRows(myfile);\n            std::ifstream myfile1(filename);\n            int columns = getColumns(myfile1);\n\n            if (rows == columns) // Matrix has to be quadratic.\n            {\n                std::ifstream myfile2(filename);\n                abwicklungsdreieck.set_Matrix(QuantLib::Matrix(rows, columns, 0)); // abwicklungsdreieck is initialised before\n                //...\n            }\n            else\n            {\n                std::cout &lt;&lt; \"\\nNumber of rows has to equal number of columns.\";\n            }\n        }\n    // [...]\n    int getRows(std::ifstream &amp;myfile)\n    {\n        std::string line;\n        int rows = 0;\n\n        while (std::getline(myfile, line)) // While-loop simply counts rows.\n        {\n            rows++;\n        }\n        myfile.close();\n        return rows - 1;\n    }\n\n    int getColumns(std::ifstream &amp;myfile)\n    {\n        std::string line;\n        char delimiter = ';';\n        size_t pos = 0;\n        int columns = 0;\n\n        while (std::getline(myfile, line) &amp;&amp; columns == 0) // Consider first line in the .csv file.\n        {\n            line = line + \";\";\n            while ((pos = line.find(delimiter)) != std::string::npos) // Counts columns.\n            {\n                line.erase(0, pos + 1);\n                columns++;\n            }\n        }\n        myfile.close();\n        return columns - 1;\n    }\n</code></pre>\n\n<p>This code is working. However, I have to open the file for three times which I do not like. Is there a way to evade this?</p>\n\n<p>I was thinking about working with tempfiles in getRows() and getColumns() but the copying streams isn't possible since it doesn't make sense as I learned recently. </p>\n\n<p>So, is there another way do that? Or can I for example evade the getline() and the line.erase() methods?</p>\n"}, {"tags": ["c++", "memory", "vector", "struct"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510766980, "post_id": 47313742, "comment_id": 81578270, "body": "Use <code>resize()</code> instead of <code>reserve()</code>."}, {"owner": {"reputation": 11, "user_id": 5976043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9240567402af550ed666fcbb5a08db7b?s=128&d=identicon&r=PG&f=1", "display_name": "grateful_ted", "link": "https://stackoverflow.com/users/5976043/grateful-ted"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510767041, "post_id": 47313742, "comment_id": 81578304, "body": "@user0042 would using the assignment operator instead of emplace_back make a difference as well? Thanks by the way"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1510774543, "post_id": 47313742, "comment_id": 81582524, "body": "Use a debugger."}, {"owner": {"reputation": 11, "user_id": 5976043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9240567402af550ed666fcbb5a08db7b?s=128&d=identicon&r=PG&f=1", "display_name": "grateful_ted", "link": "https://stackoverflow.com/users/5976043/grateful-ted"}, "edited": false, "score": 0, "creation_date": 1510777302, "post_id": 47313742, "comment_id": 81583972, "body": "Genius, thanks. How did I not think of this before???? /s"}], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 5717066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zXUcs.jpg?s=128&g=1", "display_name": "Matteo Ugolotti", "link": "https://stackoverflow.com/users/5717066/matteo-ugolotti"}, "is_accepted": false, "score": 0, "last_activity_date": 1510781809, "creation_date": 1510781809, "answer_id": 47317675, "question_id": 47313742, "link": "https://stackoverflow.com/questions/47313742/cant-figure-out-the-cause-of-bad-access-error/47317675#47317675", "title": "Can&#39;t figure out the cause of BAD_ACCESS error?", "body": "<p>The line </p>\n\n<p>for(int col = 0; col &lt;=15; col++) </p>\n\n<p>seems wrong, as the highest element you can index is 14, not 15. You should replace the &lt;= with a &lt;.</p>\n\n<p>For your other piece of code, I don't know what's the content of curX, xPos, curY and yPos, but make sure they are not bigger then your array size - 1.</p>\n"}], "owner": {"reputation": 11, "user_id": 5976043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9240567402af550ed666fcbb5a08db7b?s=128&d=identicon&r=PG&f=1", "display_name": "grateful_ted", "link": "https://stackoverflow.com/users/5976043/grateful-ted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510781809, "creation_date": 1510766840, "last_edit_date": 1510766985, "question_id": 47313742, "link": "https://stackoverflow.com/questions/47313742/cant-figure-out-the-cause-of-bad-access-error", "title": "Can&#39;t figure out the cause of BAD_ACCESS error?", "body": "<p>When trying to initialize this vector with \"Cell\"'s, a bad access error keeps getting thrown at </p>\n\n<pre><code>grid.emplace_back(Cell{1,false, row,col});   \n</code></pre>\n\n<p>And I can't seem to figure out why. After some googling I believe it has something to do with memory getting dereferenced or lost, but can't seem to figure out where exactly this is happening. Any help would be immensely appreciated. Thanks.</p>\n\n<pre><code>struct Cell{\n    int cellVal;\n    bool visited;\n    int xPos;\n    int yPos;\n};\nvector&lt;vector&lt;Cell&gt;&gt; grid;\nvector&lt;Cell&gt; path(15);\n\nvector&lt;Cell&gt; monsterPath(15);\nint main() {\n\n    grid.reserve(15);\n    for(int row = 0; row &lt;=1; row++){\n        for(int col = 0; col &lt;=15; col++){\n            grid[col].reserve(15);\n            grid.emplace_back(Cell{1,false,row,col});\n        }\n    }\n</code></pre>\n\n<p>Thanks to @user0042 the above code segment no longer throws the bad access error. However, my next code segments throws the exact same error, specifically the first line in the if statement.</p>\n\n<pre><code>if((!grid[path[curX].xPos - 1][path[curX].yPos].visited) &amp;&amp;       //cell being checked is (x-1, y)\n               !grid[path[path.size() - 1].xPos - 1][path[path.size() - 1].yPos - 1].visited &amp;&amp;              //check cell x-1, y-1\n               !grid[path[path.size() - 1].xPos - 2][path[path.size() - 1].yPos].visited &amp;&amp;                  //check cell x-2, y\n               !grid[path[path.size() - 1].xPos][path[path.size() + 1].yPos + 1].visited)                //check cell x, y+1\n            {\n                grid[path[path.size()-1].xPos - 1][path[path.size()-1].yPos].cellVal = 0;\n                grid[path[path.size()-1].xPos - 1][path[path.size()-1].yPos].visited = true;\n                path.emplace_back((grid[path[path.size()-1].xPos - 1][path[path.size()-1].yPos]));\n                cout &lt;&lt; \"path constructed\" &lt;&lt; endl;\n\n            }\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "file-handling"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1510766874, "post_id": 47313724, "comment_id": 81578211, "body": "You can just pass it to the base class like you&#39;re doing with <code>filename</code>."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510766893, "post_id": 47313724, "comment_id": 81578220, "body": "Why are you inheriting from <code>std::oftsream</code> instead of simply using a member variable?"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 1, "creation_date": 1510767298, "post_id": 47313724, "comment_id": 81578456, "body": "@MateGvenetadze: Don&#39;t be agressive like that, people can ask you questions to figure out precisely what you want and later give you an answer."}, {"owner": {"reputation": 95, "user_id": 8473377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd46a4c744c9b1390db2123cf8575610?s=128&d=identicon&r=PG&f=1", "display_name": "Mate Gvenetadze", "link": "https://stackoverflow.com/users/8473377/mate-gvenetadze"}, "edited": false, "score": 0, "creation_date": 1510767354, "post_id": 47313724, "comment_id": 81578501, "body": "Yes but they are pressing the &quot;down&quot; arrow."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 1, "creation_date": 1510767408, "post_id": 47313724, "comment_id": 81578533, "body": "@MateGvenetadze: How do YOU know? It&#39;s not necessarily the same persons!"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8473377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd46a4c744c9b1390db2123cf8575610?s=128&d=identicon&r=PG&f=1", "display_name": "Mate Gvenetadze", "link": "https://stackoverflow.com/users/8473377/mate-gvenetadze"}, "edited": false, "score": 0, "creation_date": 1510767900, "post_id": 47313956, "comment_id": 81578807, "body": "Thanks that&#39;s exactly what i wanted... But in constructor&#39;s description there is <code>int</code>  type. And i tried to write <code>my_file file(&quot;name&quot;,&quot;new.txt&quot;,(any integer number))</code> and it worked but i don&#39;t know it&#39;s definition. Where can i find it ?"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 95, "user_id": 8473377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd46a4c744c9b1390db2123cf8575610?s=128&d=identicon&r=PG&f=1", "display_name": "Mate Gvenetadze", "link": "https://stackoverflow.com/users/8473377/mate-gvenetadze"}, "edited": false, "score": 0, "creation_date": 1510768435, "post_id": 47313956, "comment_id": 81579088, "body": "@MateGvenetadze: Where have you seen any place where it&#39;s mentioned it&#39;s an int. I see no place like that in the doc. However, it&#39;s most likely implemented as an <code>int</code>, but passing an <code>int</code> may fire some warnings on some compilers. Just use <code>std::ios_base::openmode</code>, that&#39;s what the type is!"}, {"owner": {"reputation": 95, "user_id": 8473377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd46a4c744c9b1390db2123cf8575610?s=128&d=identicon&r=PG&f=1", "display_name": "Mate Gvenetadze", "link": "https://stackoverflow.com/users/8473377/mate-gvenetadze"}, "edited": false, "score": 0, "creation_date": 1510768455, "post_id": 47313956, "comment_id": 81579096, "body": "Like these: <a href=\"https://scontent-sof1-1.xx.fbcdn.net/v/t34.0-12/23634642_407996486285669_130467435_n.png?oh=4c9daa04b64c815a556b3ad36d4acb8d&amp;oe=5A0E7B8C\" rel=\"nofollow noreferrer\">scontent-sof1-1.xx.fbcdn.net/v/t34.0-12/&hellip;</a>"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 95, "user_id": 8473377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd46a4c744c9b1390db2123cf8575610?s=128&d=identicon&r=PG&f=1", "display_name": "Mate Gvenetadze", "link": "https://stackoverflow.com/users/8473377/mate-gvenetadze"}, "edited": false, "score": 0, "creation_date": 1510768590, "post_id": 47313956, "comment_id": 81579174, "body": "@MateGvenetadze: That&#39;s what your IDE thinks it is (this is not an official language reference), because it saw that <code>std::ios_base::openmode</code> is implemented as a <code>int</code> in the STL version you are using. However, I can&#39; say if that will always be the case (when you&#39;ll change compiler, target...)"}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 0, "last_activity_date": 1510767560, "creation_date": 1510767560, "answer_id": 47313956, "question_id": 47313724, "link": "https://stackoverflow.com/questions/47313724/i-want-to-pass-in-constructor-mode-of-file/47313956#47313956", "title": "I want to pass in constructor mode of file", "body": "<p><em>I know that it's int type but how to understand what is value of ios::app?</em></p>\n\n<p>Wrong, that's not a <code>int</code>!</p>\n\n<p>Go to <code>ofstream</code> doc <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/fstream/ofstream/</a>, then click <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/ofstream/\" rel=\"nofollow noreferrer\">(constructor)</a> to see what the parameters are and then you can see that mode is of type <code>std::ios_base::openmode</code> (as described <a href=\"http://www.cplusplus.com/reference/ios/ios_base/openmode/\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<p>So simply do:</p>\n\n<pre><code>class my_file : public ofstream {\n    string name;\npublic:\n    my_file(string name, const char* filename, std::ios_base::openmode mode ) : ofstream(filename,mode) { this-&gt;name = name; }\n    inline const string get() { return this-&gt;name; }\n};\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>my_file file(\"Name\",\"new.txt\", ios::app);\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8473377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd46a4c744c9b1390db2123cf8575610?s=128&d=identicon&r=PG&f=1", "display_name": "Mate Gvenetadze", "link": "https://stackoverflow.com/users/8473377/mate-gvenetadze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 47313956, "answer_count": 1, "score": -2, "last_activity_date": 1510767560, "creation_date": 1510766784, "question_id": 47313724, "link": "https://stackoverflow.com/questions/47313724/i-want-to-pass-in-constructor-mode-of-file", "title": "I want to pass in constructor mode of file", "body": "<p>I created child class of ofstream. I want to pass in constructor mode of file. For example <code>ios::app</code>. How can i do it ? What should i write in <code>my_file</code> constructor to put it in <code>ofstream</code> class constructor? I know that it's <code>int</code> type but how to understand what is value of <code>ios::app</code>?</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nclass my_file : public ofstream {\n    string name;\npublic:\n    my_file(string name, const char* filename) : ofstream(filename) { this-&gt;name = name; }\n    inline const string get() { return this-&gt;name; }\n};\n\nint main(void) {\n    my_file file(\"Name\",\"new.txt\"  /* , ios::app  */   );\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "file", "getline"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1510766390, "post_id": 47313555, "comment_id": 81577928, "body": "You&#39;re using <code>getline</code> to ignore that line..."}, {"owner": {"reputation": 1, "user_id": 8946732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a547cd359d488fc347288d0d1decdba?s=128&d=identicon&r=PG&f=1", "display_name": "C the Destroyer", "link": "https://stackoverflow.com/users/8946732/c-the-destroyer"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1510766570, "post_id": 47313555, "comment_id": 81578022, "body": "Sorry, could you elaborate? Super new to c++ here. I&#39;ve tried looking this problem up and most code i&#39;ve looked at uses getline like that. How should it look instead?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1510766826, "post_id": 47313555, "comment_id": 81578181, "body": "<a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1510793937, "creation_date": 1510793937, "answer_id": 47319865, "question_id": 47313555, "link": "https://stackoverflow.com/questions/47313555/getline-not-reading-from-file-correctly/47319865#47319865", "title": "Getline not reading from file correctly?", "body": "<p>all sorts of funky things going on here</p>\n\n<p>First opening a file for writing, then opening it for reading and writing to it while reading might work but looks odd. Better to write a new file out in the second phase</p>\n\n<p>Second, you write 8 numbers , read 9 and divide total by 7 to get mean. Thats surely broken.</p>\n\n<p>The style is odd, using a while loop and then inside that loop running out to end of file with another while loop. Is that really what you mean? That while on min and max will read the whole file</p>\n\n<p>in your max and min, you should set min to a very large number, not 0. Other wise min>num will never be true</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1510796826, "last_edit_date": 1510796826, "creation_date": 1510794287, "answer_id": 47319909, "question_id": 47313555, "link": "https://stackoverflow.com/questions/47313555/getline-not-reading-from-file-correctly/47319909#47319909", "title": "Getline not reading from file correctly?", "body": "<p>There are many problems with your code.</p>\n\n<p>You are not closing <code>myfile</code> before opening <code>infile</code> (which should be a <code>std::ifstream</code> instead).  While not strictly an error, it is unusual.  If you are trying to modify the file while you are reading from it, that is not safe.  Write to a new file first, and then replace the old file with the new file when finished, if needed.</p>\n\n<p>You are not doing any error handling on <code>infile</code> at all.</p>\n\n<p>You are <a href=\"https://stackoverflow.com/questions/5605125/\">misusing <code>eof()</code></a>.</p>\n\n<p>Your reading of <code>infile</code> is just WAY off and makes no sense at all.  It needs to be completely re-written.</p>\n\n<p>You are outputting 8 numbers per line, but you are reading in 9 numbers per line, and averaging 7 of them.</p>\n\n<p>I <em>think</em> what you are trying to do is produce an output file where you display stats for each line of numbers.  If so, try something more like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n    ofstream myfile(\"numbers.txt\");\n    if (!myfile)\n    {\n        cout &lt;&lt; \"Unable to create numbers file\\n\";\n        return 0;\n    }\n\n    myfile &lt;&lt; \"90 63 84 52 21 93 77 46\\n\";\n    myfile &lt;&lt; \"90 22 26 34 39 44 75 98\\n\";\n    myfile &lt;&lt; \"28 28 85 57 28 33 66 100\\n\";\n    myfile &lt;&lt; \"16 80 74 62 42 84 42 56\\n\";\n    myfile &lt;&lt; \"85 44 76 97 16 64 80 14\\n\";\n    myfile &lt;&lt; \"41 85 13 88 78 8 18 38\\n\";\n    myfile &lt;&lt; \"53 49 71 79 75 57 93 62\\n\";\n    myfile.close();\n\n    ifstream infile(\"numbers.txt\");\n    if (!infile)\n    {\n        cout &lt;&lt; \"Unable to open numbers file\\n\";\n        return 0;\n    }\n\n    myfile.open(\"output.txt\");\n    if (!myfile)\n    {\n        cout &lt;&lt; \"Unable to create output file\\n\";\n        return 0;\n    }\n\n    myfile &lt;&lt; \"Numbers:                       TOTAL        AVERAGE      MAX      MIN\\n\";\n\n    string line;\n    while (getline(infile, line))\n    {\n        istringstream iss(line);\n        ostringstream oss;\n\n        int num, total = 0, count = 0, average = 0, max = 0, min = 0;\n\n        if (iss &gt;&gt; num)\n        {\n            max = min = num;\n\n            do\n            {\n                total += num;\n                ++count;\n\n                if (num &gt; max)\n                    max = num;\n\n                if (num &lt; min)\n                    min = num;\n\n                oss &lt;&lt; num &lt;&lt; ' ';\n            }\n            while (iss &gt;&gt; num);\n\n            average = total / count;\n        }\n\n        myfile &lt;&lt; left &lt;&lt; setw(30) &lt;&lt; setfill(' ') &lt;&lt; oss.str() &lt;&lt; \" \";\n        myfile &lt;&lt; left &lt;&lt; setw(12) &lt;&lt; setfill(' ') &lt;&lt; total &lt;&lt; \" \";\n        myfile &lt;&lt; left &lt;&lt; setw(12) &lt;&lt; setfill(' ') &lt;&lt; average &lt;&lt; \" \";\n        myfile &lt;&lt; left &lt;&lt; setw(8) &lt;&lt; setfill(' ') &lt;&lt; max &lt;&lt; \" \";\n        myfile &lt;&lt; min &lt;&lt; endl;\n    }\n\n    infile.close();\n    myfile.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>numbers.txt</p>\n\n<pre>\n90 63 84 52 21 93 77 46\n90 22 26 34 39 44 75 98\n28 28 85 57 28 33 66 100\n16 80 74 62 42 84 42 56\n85 44 76 97 16 64 80 14\n41 85 13 88 78 8 18 38\n53 49 71 79 75 57 93 62\n</pre>\n\n<p>output.txt</p>\n\n<pre>\nNumbers:                       TOTAL        AVERAGE      MAX      MIN\n90 63 84 52 21 93 77 46        526          65           93       21\n90 22 26 34 39 44 75 98        428          53           98       22\n28 28 85 57 28 33 66 100       425          53           100      28\n16 80 74 62 42 84 42 56        456          57           84       16\n85 44 76 97 16 64 80 14        476          59           97       14\n41 85 13 88 78 8 18 38         369          46           88       8\n53 49 71 79 75 57 93 62        539          67           93       49\n</pre>\n\n<p>Alternatively, you can remove <code>numbers.txt</code> altogether if you use an in-memory array instead of a file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nconst int numbers[7][8] = {\n    {90, 63, 84, 52, 21, 93, 77, 46},\n    {90, 22, 26, 34, 39, 44, 75, 98},\n    {28, 28, 85, 57, 28, 33, 66, 100},\n    {16, 80, 74, 62, 42, 84, 42, 56},\n    {85, 44, 76, 97, 16, 64, 80, 14},\n    {41, 85, 13, 88, 78, 8 , 18, 38},\n    {53, 49, 71, 79, 75, 57, 93, 62}\n};\n\nint main()\n{\n    ofstream myfile(\"output.txt\");\n    if (!myfile)\n    {\n        cout &lt;&lt; \"Unable to create output file\\n\";\n        return 0;\n    }\n\n    myfile &lt;&lt; \"Numbers:                       TOTAL        AVERAGE      MAX      MIN\\n\";\n\n    for(int i = 0; i &lt; 7; ++i)\n    {\n        int num = numbers[i][0];\n        int total = num, max = num, min = num;\n\n        ostringstream oss;\n        oss &lt;&lt; num &lt;&lt; ' ';\n\n        for(int j = 1; j &lt; 8; ++j)\n        {\n            num = numbers[i][j];\n            total += num;\n\n            if (max &lt; num)\n                max = num;\n\n            if (min &gt; num)\n                min = num;\n\n            oss &lt;&lt; num &lt;&lt; ' ';\n        }\n\n        int average = total / 8;\n\n        myfile &lt;&lt; left &lt;&lt; setw(30) &lt;&lt; setfill(' ') &lt;&lt; oss.str() &lt;&lt; \" \";\n        myfile &lt;&lt; left &lt;&lt; setw(12) &lt;&lt; setfill(' ') &lt;&lt; total &lt;&lt; \" \";\n        myfile &lt;&lt; left &lt;&lt; setw(12) &lt;&lt; setfill(' ') &lt;&lt; average &lt;&lt; \" \";\n        myfile &lt;&lt; left &lt;&lt; setw(8) &lt;&lt; setfill(' ') &lt;&lt; max &lt;&lt; \" \";\n        myfile &lt;&lt; min &lt;&lt; endl;\n    }\n\n    myfile.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>output.txt</p>\n\n<pre>\nNumbers:                       TOTAL        AVERAGE      MAX      MIN\n90 63 84 52 21 93 77 46        526          65           93       21\n90 22 26 34 39 44 75 98        428          53           98       22\n28 28 85 57 28 33 66 100       425          53           100      28\n16 80 74 62 42 84 42 56        456          57           84       16\n85 44 76 97 16 64 80 14        476          59           97       14\n41 85 13 88 78 8 18 38         369          46           88       8\n53 49 71 79 75 57 93 62        539          67           93       49\n</pre>\n"}], "owner": {"reputation": 1, "user_id": 8946732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a547cd359d488fc347288d0d1decdba?s=128&d=identicon&r=PG&f=1", "display_name": "C the Destroyer", "link": "https://stackoverflow.com/users/8946732/c-the-destroyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1241, "favorite_count": 0, "closed_date": 1510956575, "answer_count": 2, "score": -3, "last_activity_date": 1510796826, "creation_date": 1510766207, "last_edit_date": 1510793516, "question_id": 47313555, "link": "https://stackoverflow.com/questions/47313555/getline-not-reading-from-file-correctly", "closed_reason": "Duplicate", "title": "Getline not reading from file correctly?", "body": "<p>Working on a project where I need to fill a file with numbers and use a getline to read those numbers line by line and then display the total, average, max, and min from each line. Everything's in place except my getline doesn't seem to be working as the output for the total, average, etc, is always 0. Any help at all is appreciated. Thanks!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    ofstream myfile;\n    myfile.open(\"file.txt\");\n    if(!myfile)\n    {\n        cout &lt;&lt; \"Unable to open file\\n\";\n        return 0;\n    }\n    if(myfile.is_open())\n    {\n        myfile &lt;&lt; \"Numbers: \\n\";\n        myfile &lt;&lt; \"90 63 84 52 21 93 77 46\\n\";\n        myfile &lt;&lt; \"90 22 26 34 39 44 75 98\\n\";\n        myfile &lt;&lt; \"28 28 85 57 28 33 66 100\\n\";\n        myfile &lt;&lt; \"16 80 74 62 42 84 42 56\\n\";\n        myfile &lt;&lt; \"85 44 76 97 16 64 80 14\\n\";\n        myfile &lt;&lt; \"41 85 13 88 78 8 18 38\\n\";\n        myfile &lt;&lt; \"53 49 71 79 75 57 93 62\\n\";\n\n        fstream infile;\n        infile.open(\"file.txt\");\n        int total, average, max=0, min=0, num;\n        while(!infile.eof())\n        {\n            string line;\n            getline(infile, line);\n            int a, b, c, d, e, f, g, h, i;\n            infile &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d &gt;&gt; e &gt;&gt; f &gt;&gt; g &gt;&gt; h &gt;&gt; i;\n            total = a+b+c+d+e+f+g+h+i;\n            average = total/7;\n            while(infile&gt;&gt;num)\n            {\n                max = num;\n                min = num;\n                if(max&lt;num)\n                {\n                    max = num;\n                }\n                if(min &gt; num)\n                {\n                    min = num;\n                }\n            }\n            myfile &lt;&lt; \"                               TOTAL        AVERAGE      MAX      MIN\\n\";\n            myfile &lt;&lt; \"90 63 84 52 21 93 77 46    \" &lt;&lt; total &lt;&lt; \"  \" &lt;&lt; average &lt;&lt; \"  \" &lt;&lt; max &lt;&lt; \"  \" &lt;&lt; min &lt;&lt; endl;\n            myfile &lt;&lt; \"90 22 26 34 39 44 75 98\\n\";\n            myfile &lt;&lt; \"28 28 85 57 28 33 66 100\\n\";\n            myfile &lt;&lt; \"16 80 74 62 42 84 42 56\\n\";\n            myfile &lt;&lt; \"85 44 76 97 16 64 80 14\\n\";\n            myfile &lt;&lt; \"41 85 13 88 78 8 18 38\\n\";\n            myfile &lt;&lt; \"53 49 71 79 75 57 93 62\\n\";\n        }\n        infile.close();\n    }\n    myfile.close();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["javascript", "html", "c++", "webassembly"], "comments": [{"owner": {"reputation": 6045, "user_id": 3983557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01A0D.jpg?s=128&g=1", "display_name": "JF Bastien", "link": "https://stackoverflow.com/users/3983557/jf-bastien"}, "edited": false, "score": 0, "creation_date": 1510766825, "post_id": 47313403, "comment_id": 81578179, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41353389/how-can-i-return-a-javascript-string-from-a-webassembly-function\">How can I return a JavaScript string from a WebAssembly function</a>. The answer I provided in this other question tells you how to pass string in / out of WebAssembly."}, {"owner": {"reputation": 183, "user_id": 8813505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/907730a45f486fe236d3fea93a859f6d?s=128&d=identicon&r=PG", "display_name": "Mogadishu", "link": "https://stackoverflow.com/users/8813505/mogadishu"}, "reply_to_user": {"reputation": 6045, "user_id": 3983557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01A0D.jpg?s=128&g=1", "display_name": "JF Bastien", "link": "https://stackoverflow.com/users/3983557/jf-bastien"}, "edited": false, "score": 0, "creation_date": 1510775962, "post_id": 47313403, "comment_id": 81583262, "body": "@JFBastien I&#39;m not sure. I&#39;ve followed these instructions to get started with wasm yesterday-&gt; <a href=\"https://developer.mozilla.org/en-US/docs/WebAssembly/C_to_wasm\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/WebAssembly/C_to_wasm</a> . When I compile a .cpp file, I get a .js file which I reference via a &lt;script&gt; tag to get access to a Module object in the global scope. I&#39;m not really sure about what you&#39;re doing at all. Is your way of things what I should be doing? Could you elaborate?"}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 8813505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/907730a45f486fe236d3fea93a859f6d?s=128&d=identicon&r=PG", "display_name": "Mogadishu", "link": "https://stackoverflow.com/users/8813505/mogadishu"}, "is_accepted": false, "score": 5, "last_activity_date": 1510780535, "creation_date": 1510780535, "answer_id": 47317391, "question_id": 47313403, "link": "https://stackoverflow.com/questions/47313403/passing-client-files-to-webassembly-from-the-front-end/47317391#47317391", "title": "Passing client files to webassembly from the front-end", "body": "<p>This is a partial answer. It's superior to what I originally did and I feel like it might be closer to what the creators intended. However, I'm still creating more than one copy of the file. Credit to <a href=\"https://stackoverflow.com/questions/41875728/pass-a-javascript-array-as-argument-to-a-webassembly-function/41878939#41878939\">this post for making it click for me.</a></p>\n\n<p>This is now my handleFile callback, commented with things I learned.</p>\n\n<pre><code>handleFile(e){\n\n    const file = e.currentTarget.files[0];\n    if(!(file instanceof Blob)) return;\n    const reader = new FileReader();\n    reader.onloadend = evt =&gt; {\n\n        //evt.target.result is an ArrayBuffer. In js, \n        //you can't do anything with an ArrayBuffer \n        //so we have to ???cast??? it to an Uint8Array\n        const uint8_t_arr = new Uint8Array(evt.target.result);\n\n        //Right now, we have the file as a unit8array in javascript memory. \n        //As far as I understand, wasm can't directly access javascript memory. \n        //Which is why we need to allocate special wasm memory and then\n        //copy the file from javascript memory into wasm memory so our wasm functions \n        //can work on it.\n\n        //First we need to allocate the wasm memory. \n        //_malloc returns the address of the new wasm memory as int32.\n        //This call is probably similar to \n        //uint8_t * ptr = new uint8_t[sizeof(uint8_t_arr)/sizeof(uint8_t_arr[0])]\n        const uint8_t_ptr = window.Module._malloc(uint8_t_arr.length);\n\n        //Now that we have a block of memory we can copy the file data into that block\n        //This is probably similar to \n        //std::memcpy(uint8_t_ptr, uint8_t_arr, sizeof(uint8_t_arr)/sizeof(uint8_t_arr[0]))\n        window.Module.HEAPU8.set(uint8_t_arr, uint8_t_ptr);\n\n        //The only thing that's now left to do is pass \n        //the address of the wasm memory we just allocated\n        //to our function as well as the size of our memory.\n        window.Module.readFile(uint8_t_ptr, uint8_t_arr.length);\n\n        //At this point we're forced to wait until wasm is done with the memory. \n        //Your site will now freeze if the memory you're working on is big. \n        //Maybe we can somehow let our wasm function run on a seperate thread and pass a callback?\n\n        //Retreiving our (modified) memory is also straight forward. \n        //First we get some javascript memory and then we copy the \n        //relevant chunk of the wasm memory into our javascript object.\n        const returnArr = new Uint8Array(uint8_t_arr.length);\n        //If returnArr is std::vector&lt;uint8_t&gt;, then is probably similar to \n        //returnArr.assign(ptr, ptr + dataSize)\n        returnArr.set(window.Module.HEAPU8.subarray(uint8_t_ptr, uint8_t_ptr + uint8_t_arr.length));\n\n        //Lastly, according to the docs, we should call ._free here.\n        //Do we need to call the gc somehow?\n        window.Module._free(uint8_t_ptr);\n\n    }\n    reader.readAsArrayBuffer(file);\n}\n</code></pre>\n\n<p>Here is readFile.cpp.</p>\n\n<pre><code>#include &lt;emscripten/bind.h&gt;\n\n//We get out pointer as a plain int from javascript\nvoid readFile(const int &amp; addr, const size_t &amp; len){\n  //We use a reinterpret_cast to turn our plain int into a uint8_t pointer. After\n  //which we can play with the data just like we would normally.\n  uint8_t * data = reinterpret_cast&lt;uint8_t *&gt;(addr);\n  for(size_t i = 0; i &lt; len; ++i){\n    data[i] += 1;\n  }\n}\n\n//Using this command to compile\n//  emcc --bind -O3 readFile.cpp -s WASM=1 -s TOTAL_MEMORY=268435456 -o api.js --std=c++11\n//Note that you need to make sure that there's enough memory available to begin with.\n//I got only 16mb without passing the TOTAL_MEMORY setting.\nEMSCRIPTEN_BINDINGS(my_module) {\n  emscripten::function(\"readFile\", &amp;readFile);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 790, "user_id": 1252308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ee23536f0d1707311b5b1056644b5c?s=128&d=identicon&r=PG", "display_name": "nzeemin", "link": "https://stackoverflow.com/users/1252308/nzeemin"}, "is_accepted": false, "score": 9, "last_activity_date": 1514197223, "last_edit_date": 1514197223, "creation_date": 1511295729, "answer_id": 47422016, "question_id": 47313403, "link": "https://stackoverflow.com/questions/47313403/passing-client-files-to-webassembly-from-the-front-end/47422016#47422016", "title": "Passing client files to webassembly from the front-end", "body": "<p>With Emscripten you can use a virtual file system for WASM.\nFirst, you compile your C/C++ code with <code>-s FORCE_FILESYSTEM=1</code> option.\nInside the C/C++, you just work with files as usual, with standard library functions.\nAt the HTML page you have an <code>input type=file</code> element.</p>\n\n<p>Sample JS code to get the file from the input element and pass it into the WASM:</p>\n\n<pre><code>function useFileInput(fileInput) {\n    if (fileInput.files.length == 0)\n        return;\n    var file = fileInput.files[0];\n\n    var fr = new FileReader();\n    fr.onload = function () {\n        var data = new Uint8Array(fr.result);\n\n        Module['FS_createDataFile']('/', 'filename', data, true, true, true);\n        Module.ccall('YourCppFunctionToUtilizeTheFile', null, [], null);\n\n        fileInput.value = '';\n    };\n    fr.readAsArrayBuffer(file);\n}\n</code></pre>\n\n<p>Links:</p>\n\n<ol>\n<li><a href=\"https://kripken.github.io/emscripten-site/docs/porting/files/file_systems_overview.html\" rel=\"noreferrer\">Emscripten - File System Overview</a></li>\n<li><a href=\"https://github.com/nzeemin/ukncbtl-wasm/blob/master/index.html\" rel=\"noreferrer\">Here I use the approach, see emulatorAttachFileInput() function</a></li>\n</ol>\n"}], "owner": {"reputation": 183, "user_id": 8813505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/907730a45f486fe236d3fea93a859f6d?s=128&d=identicon&r=PG", "display_name": "Mogadishu", "link": "https://stackoverflow.com/users/8813505/mogadishu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4282, "favorite_count": 3, "answer_count": 2, "score": 10, "last_activity_date": 1514197223, "creation_date": 1510765789, "last_edit_date": 1510775503, "question_id": 47313403, "link": "https://stackoverflow.com/questions/47313403/passing-client-files-to-webassembly-from-the-front-end", "title": "Passing client files to webassembly from the front-end", "body": "<p>I'm looking to pass user-submitted data to a c++ function which I've compiled to wasm. The data is a file which the user submits on the front end via an input tag, like so:</p>\n\n<pre><code>&lt;input type=\"file\" onChange={this.handleFile.bind(this)} /&gt;\n</code></pre>\n\n<p>The onChange callback currently looks like this:</p>\n\n<pre><code>handleFile(e){\n    const file = e.currentTarget.files[0];\n    const reader = new FileReader();\n    reader.onloadend = evt =&gt; {\n        window.Module.readFile(evt.target.result);\n    }\n    reader.readAsArrayBuffer(file);\n}\n</code></pre>\n\n<p>Finally, the .cpp file containing the readFile function looks like this:</p>\n\n<pre><code>void readFile(const std::string &amp; rawString){\n  std::vector&lt;uint8_t&gt; data(rawString.begin(), rawString.end());\n  //...\n}\n\nEMSCRIPTEN_BINDINGS(my_module) {\n  emscripten::function(\"readFile\", &amp;readFile);\n}\n</code></pre>\n\n<p>I've spend my afternoon reading various docs so I'm aware that I'm supposed to allocate memory for these files on the heap and then pass a ptr from js to readFile instead of passing all of the data. My problem is that I just don't really understand how all of that is supposed to work. Could someone explain?</p>\n"}, {"tags": ["c++", "gpu", "vulkan"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1510766266, "post_id": 47313319, "comment_id": 81577862, "body": "<code>4294967296</code> is 2^32. <code>maxMemoryAllocationCount</code> is <code>uint32_t</code> which can hold values between <code>0</code> and <code>4294967295</code>/<code>2^32-1</code>. So the value is most likely just garbage."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1510767127, "post_id": 47313319, "comment_id": 81578359, "body": "@SimonKraemer: It&#39;s not garbage. It means &quot;as many as you want&quot;."}, {"owner": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "edited": false, "score": 1, "creation_date": 1510768497, "post_id": 47313319, "comment_id": 81579117, "body": "4096 memory allocations is quite a big number. If You hit this limit, this means You should allocate smaller number of much larger memory objects."}], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 7130273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-Dwb6-v0qLkQ/AAAAAAAAAAI/AAAAAAAAAFg/O3sa335H85Y/photo.jpg?sz=128", "display_name": "Brotcrunsher", "link": "https://stackoverflow.com/users/7130273/brotcrunsher"}, "edited": false, "score": 0, "creation_date": 1510770607, "post_id": 47313935, "comment_id": 81580281, "body": "That &quot;should&quot; part is because maxMemoryAllocationCount is part of the physical device limits. &quot;Physical Device Limit&quot; seems to be not that strict here."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 767, "user_id": 7130273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-Dwb6-v0qLkQ/AAAAAAAAAAI/AAAAAAAAAFg/O3sa335H85Y/photo.jpg?sz=128", "display_name": "Brotcrunsher", "link": "https://stackoverflow.com/users/7130273/brotcrunsher"}, "edited": false, "score": 0, "creation_date": 1510770730, "post_id": 47313935, "comment_id": 81580361, "body": "@Brotcrunsher: It&#39;s <code>VkPhysicalDeviceLimits</code>. As in, the limits for <code>VkPhysicalDevice</code>s. The words &quot;physical device&quot; has a specific meaning in Vulkan, and it has nothing to do with a specific piece of silicon."}, {"owner": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "reply_to_user": {"reputation": 767, "user_id": 7130273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-Dwb6-v0qLkQ/AAAAAAAAAAI/AAAAAAAAAFg/O3sa335H85Y/photo.jpg?sz=128", "display_name": "Brotcrunsher", "link": "https://stackoverflow.com/users/7130273/brotcrunsher"}, "edited": false, "score": 1, "creation_date": 1510782256, "post_id": 47313935, "comment_id": 81586644, "body": "@Brotcrunsher Graphics hardware (physical device) can only operate in an area defined by the operating system. So even if the silicon itself is capable of allocating much larger number of memory objects, it cannot do it if operating system doesn&#39;t allow for that. So in this case it doesn&#39;t even matter if it is a &quot;real&quot; hardware limitation or an OS constraint - this hardware/driver/OS combination forbids You to allocate more than 4096 memory objects."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 7, "last_activity_date": 1510767471, "creation_date": 1510767471, "answer_id": 47313935, "question_id": 47313319, "link": "https://stackoverflow.com/questions/47313319/vulkan-why-does-the-1080-ti-have-a-maxmemoryallocationcount-of-4294967296-on-ar/47313935#47313935", "title": "Vulkan: Why does the 1080 Ti have a maxMemoryAllocationCount of 4294967296 on arch but only 4096 on Windows?", "body": "<p>Why \"should\" it be a hardware limitation?</p>\n\n<p>With 4 exceptions, every Windows implementation is limited to 4096 allocations. And those exceptions are either open-source RADV hacked to run on Windows or early drivers that returned bogus values.</p>\n\n<p>So clearly, Windows as an OS is imposing this limitation. After all, the OS owns the GPU and must be involved in any memory allocations.</p>\n\n<p>It is the right of the OS to prevent a process from engaging in pathological behavior. Windows seems to think that making lots of GPU allocations is pathological, so the WDDM model imposes a low-but-reasonable limit on GPU allocations.</p>\n"}], "owner": {"reputation": 767, "user_id": 7130273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-Dwb6-v0qLkQ/AAAAAAAAAAI/AAAAAAAAAFg/O3sa335H85Y/photo.jpg?sz=128", "display_name": "Brotcrunsher", "link": "https://stackoverflow.com/users/7130273/brotcrunsher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "accepted_answer_id": 47313935, "answer_count": 1, "score": 0, "last_activity_date": 1510767471, "creation_date": 1510765559, "question_id": 47313319, "link": "https://stackoverflow.com/questions/47313319/vulkan-why-does-the-1080-ti-have-a-maxmemoryallocationcount-of-4294967296-on-ar", "title": "Vulkan: Why does the 1080 Ti have a maxMemoryAllocationCount of 4294967296 on arch but only 4096 on Windows?", "body": "<p>I am currently building a game engine in C++ which uses vulkan for rendering. While implementing a terrain renderer I reached a hardware limit, the maxMemoryAllocationCount which limits the amount of allocated memory blocks. I checked <a href=\"https://vulkan.gpuinfo.org/\" rel=\"nofollow noreferrer\">https://vulkan.gpuinfo.org/</a> to see how high that value on different GPUs is. When looking at the \"GeForce GTX 1080 Ti\", the value is 4096 for windows but 4294967296 for arch/manjaro. Why is there a difference between those OSes, when this really <em>should</em> be a hardware limitation? </p>\n"}, {"tags": ["c++", "file", "istringstream"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1510765297, "post_id": 47313213, "comment_id": 81577289, "body": "Wait, are you looking for a code review? If so, you may want to take a look at <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 313, "user_id": 6133698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfa4373992c2edad6b81ff6b764630e4?s=128&d=identicon&r=PG&f=1", "display_name": "hamza keurti", "link": "https://stackoverflow.com/users/6133698/hamza-keurti"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1510765436, "post_id": 47313213, "comment_id": 81577371, "body": "I didnt know about this community, Thanks mate! :)"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1510765481, "post_id": 47313213, "comment_id": 81577403, "body": "You might want to read the help center there, just to make sure that your question is actually on topic, and modify it appropriately :) Thanks"}, {"owner": {"reputation": 313, "user_id": 6133698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfa4373992c2edad6b81ff6b764630e4?s=128&d=identicon&r=PG&f=1", "display_name": "hamza keurti", "link": "https://stackoverflow.com/users/6133698/hamza-keurti"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1510765532, "post_id": 47313213, "comment_id": 81577438, "body": "I will! Thanks for the advice!"}], "answers": [{"tags": [], "owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "is_accepted": true, "score": 1, "last_activity_date": 1510766749, "creation_date": 1510766749, "answer_id": 47313714, "question_id": 47313213, "link": "https://stackoverflow.com/questions/47313213/extracting-file-names-from-text-file/47313714#47313714", "title": "Extracting file names from text file", "body": "<p>From C++11 or using boost, my recommendation is that you\nuse a regular expression with a regex iterator for this problem, since you have variations in the number of spaces and parsing is going to get a bit messy.\nA sregex_iterator will traverse the text and match regexes (you can use as a source any bidirectional iterator, for example, strings taken with <code>getline</code>). A non-tested idea follows:</p>\n\n<pre><code>static std::regex const filename_re(\"[[:space:]]*file[[:space:]]*=(.*)[[:space:]]*\");\n\nstd::regex_iterator rit(line.begin(), line.end(), filename_re), end;\n\n\nwhile (rit != end) {\n  cout &lt;&lt; rit[1] &lt;&lt; ',';\n  ++rit;\n}\n</code></pre>\n\n<p>This, taking for each iteration your line, would get the filename found and print it, since the capture group captures the filename.</p>\n"}], "owner": {"reputation": 313, "user_id": 6133698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfa4373992c2edad6b81ff6b764630e4?s=128&d=identicon&r=PG&f=1", "display_name": "hamza keurti", "link": "https://stackoverflow.com/users/6133698/hamza-keurti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 47313714, "answer_count": 1, "score": 1, "last_activity_date": 1510766749, "creation_date": 1510765229, "last_edit_date": 1510765340, "question_id": 47313213, "link": "https://stackoverflow.com/questions/47313213/extracting-file-names-from-text-file", "title": "Extracting file names from text file", "body": "<p>I need to extract file names with their extension from an input text file to a string vector.\nThe input text file is quite messy and serves as configuration file for some application.</p>\n\n<p>What I know about the file names I am trying to extract is they are preceded by a 'file =' mention, the filename is quoted between ' ' or \" \". Example : file=\"name.abc\". I also have no guarantee of how spacing is : It may be file=\"name.abc\", file = \"name.abc\" , file= \"name.abc\"... And extension can be of different lengths.</p>\n\n<p>So I tried the following code:</p>\n\n<pre><code>std::vector&lt;std::string&gt; attachment_names;\nstd::istringstream words(text_content);\nstd::string word;\nstd::string pst_extension(\".abc\"); // My code should support any extension\nwhile (words &gt;&gt; word)\n{\n    auto extension_found = word.find(abc_extension);\n    if (extension_found != word.npos)\n    {\n        auto name_start = word.find(\"'\") + 1; \n             //I am not even sure the file is quoted by ''\n\n        std::string attachment_name = word.substr(name_start, (extension_found + 3) - name_start + 1); \n             //Doing this annoys me a bit... Especially that the extension may be longer than 3 characters\n\n        attachment_names.push_back(attachment_name);\n    }\n}\n</code></pre>\n\n<p>Is there a nicer way of doing this? Is there a possibility to rely more on the file caption to support any extension?</p>\n"}, {"tags": ["c++", "c", "virtual-functions", "memory-layout", "vptr"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 2, "creation_date": 1510764896, "post_id": 47313094, "comment_id": 81577005, "body": "Structs do not have any member functions in c."}, {"owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1510765006, "post_id": 47313094, "comment_id": 81577090, "body": "@user0042 When compiled in C, there are no member functions defined. It is entirely valid to have a POD struct which includes member functions in C++, which will have exactly the same memory layout when used in C."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1510765495, "post_id": 47313094, "comment_id": 81577414, "body": "I&#39;d advise at trying to commingle C and C++ in that fashion.  Keep them separate.  Have a C++ class that has-a member variable of the POD struct.  If you need to, pass a token (a void*) to the C side of the API for the C++ class instance, and package it (to a void*, or back to a C++ class pointer) at that C/C++ API barrier."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1511389703, "post_id": 47313094, "comment_id": 81844936, "body": "In general, polymorphic classes cannot be made compatible with C &quot;equivalent&quot; because C has no equivalent. You would need to know how these classes are compiled. Then your code would only work for the ABI of the compiler."}], "answers": [{"comments": [{"owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 0, "creation_date": 1510772254, "post_id": 47313408, "comment_id": 81581228, "body": "I&#39;m not a fan of this answer as it makes usage clunky. For example, initialisation in C would be like <code>MyStrImpl* impl = (MyStrImpl*) malloc(sizeof(MyStrImpl)); MyStr str; str.impl = impl;</code>, and using methods in C++ will take the form <code>str.impl-&gt;toString()</code>. This might be fine for internal code, but it&#39;s just not acceptable for an API."}, {"owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "reply_to_user": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 0, "creation_date": 1510772747, "post_id": 47313408, "comment_id": 81581512, "body": "If you need something more fancy, anyway, the solution amounts to duplicate a C and a C++ implementation if you want different interfaces. You could add C functions for construct/destruct with current solution."}, {"owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 0, "creation_date": 1510773127, "post_id": 47313408, "comment_id": 81581762, "body": "Sure, I could make a constructor function in C. This would have to assume that the caller is OK with using malloc (which may not always be the case). It&#39;s more about the ease-of-use. The user of the struct whether in C or C++ should never have to worry about implementation details, and just write code semantically. I&#39;m wondering if user-defined packing will do what I want."}, {"owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "reply_to_user": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 0, "creation_date": 1510774069, "post_id": 47313408, "comment_id": 81582284, "body": "The fact that you hide the constructor behind a C interface does not mean malloc will be used. I get your idea about ease of use but that is going to complicate the implementation a lot. My recommendation here would be to split the C and C++ implementation in that case or you just have the option to clutter things with #ifdefs. You cannot guarantee a layout without an indirection AFAIK."}, {"owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 0, "creation_date": 1510778293, "post_id": 47313408, "comment_id": 81584510, "body": "I peronsally prefer the hard way of doing things. If I can make it easy to use, with proper abstraction, I will. I can avoid lots of <code>#ifdefs</code> anyway by splitting the C and C++ headers."}], "tags": [], "owner": {"reputation": 6892, "user_id": 429879, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/VyTUw.png?s=128&g=1", "display_name": "Germ&#225;n Diago", "link": "https://stackoverflow.com/users/429879/germ%c3%a1n-diago"}, "is_accepted": false, "score": 2, "last_activity_date": 1510765807, "creation_date": 1510765807, "answer_id": 47313408, "question_id": 47313094, "link": "https://stackoverflow.com/questions/47313094/using-c-struct-with-virtual-members-i-e-non-pod-in-c/47313408#47313408", "title": "Using C++ struct with virtual members (i.e. non-POD) in C", "body": "<p>I do not recommend you to clutter your header file with <code>#ifdefs</code>. </p>\n\n<p>The first thing you should do in this case if you want to retain some kind of virtualization and C compatibility at the same time is:</p>\n\n<ol>\n<li>Make your C++ and C type an opaque pointer to the representation.</li>\n<li>Put implementation details in a .cpp file.</li>\n</ol>\n\n<p>An idea follows.</p>\n\n<p>Header file:</p>\n\n<pre><code>struct MyStrImpl;\n\nstruct MyStr {\n   MyStrImpl * impl;\n};\n\nextern \"C\" MyReturnType myFunction(MyStr myStr);\n</code></pre>\n\n<p>Implementation in <code>.cpp</code> file:</p>\n\n<pre><code>struct MyCppString {\n    virtual ...\n};\n\n#ifdef __cplusplus\nstruct MyStrImpl : public MyCppString {\n\n};\n#else\nstruct MyStrImpl {\n\n};\n#endif\nMyStr::MyStr() : impl{new MyStrImpl{}} {\n\n}\n</code></pre>\n\n<p>This way you have a type that can be used from both C and C++.</p>\n\n<p>Advantages:</p>\n\n<ul>\n<li>No <code>#ifdef</code> in header file.</li>\n<li>Compatible with C/C++ and consumable from both languages.</li>\n</ul>\n\n<p>Disadvantages:</p>\n\n<ul>\n<li>Lose overloading due to extern \"C\".</li>\n<li>Must use a C-style interface (but can implement with C++-like with virtual functions interface in your .cpp file.</li>\n</ul>\n\n<p>You cannot have both a C-compatible type and virtual functions in a header file at the same time without cluttering it with <code>#ifdef</code>, something that I do not recommend since it can be inconvenient if you need to refactor code.</p>\n"}], "owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1511191815, "creation_date": 1510764857, "last_edit_date": 1511191815, "question_id": 47313094, "link": "https://stackoverflow.com/questions/47313094/using-c-struct-with-virtual-members-i-e-non-pod-in-c", "title": "Using C++ struct with virtual members (i.e. non-POD) in C", "body": "<p>In questions such as <a href=\"https://stackoverflow.com/questions/1429440/c-class-or-struct-compatiblity-with-c-struct\">this</a>, compatibility between C++ classes/structs and C structs is explained as possible as long as all members are of the same type, in the same order, and no virtual members are declared.</p>\n\n<p>That's my problem. I have virtual methods, and I would very much like to keep them when manipulating the struct in C++.</p>\n\n<p>Let's examine this toy example. It's meant to be a C and C++ compatible struct defined in a single header file.</p>\n\n<p>mystr.h:</p>\n\n<pre><code>#ifdef __cplusplus\n#include &lt;string&gt;\nstruct mystr_base {\n    virtual ~mystr_base() {}\n\n    virtual std::string toString() = 0;\n};\n#endif\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nstruct mystr\n#ifdef __cplusplus\n: public mystr_base\n#endif\n{\n    const char* data;\n\n#ifdef __cplusplus\n    std::string toString() {\n        return std::string(data);\n    }\n#endif\n};\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>This may not be exactly pretty, but will do for the example. In a real scenario, the C and C++ variants may be in separate headers, with the C++ struct extending a POD struct. Regardless of implementation, the issue of alignment is still present.</p>\n\n<p>With this example, if a C program was written that passes an instance of <code>mystr</code> to a C++ function, the vtable will interfere with the alignment:</p>\n\n<p>test.h:</p>\n\n<pre><code>#include \"mystr.h\"\n\n#ifdef __cplusplus\nextern \"C\"\n#endif\nvoid mycxxfunc(struct mystr str);\n</code></pre>\n\n<p>test.cpp:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"test.h\"\n\nvoid mycxxfunc(mystr str) {\n    printf(\"mystr: %s\\n\", str.data);\n}\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include \"test.h\"\n\nint main(int argc, char** argv) {\n    const char* testString = \"abc123\";\n    struct mystr str;\n    str.data = testString;\n    mycxxfunc(str);\n}\n\n$ g++ -c test.cpp &amp;&amp; gcc main.c test.o\n$ ./a.out\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>(presuming that this is because the C++ function is attempting to read <code>data</code> from beyond the end of the struct's allocated memory)</p>\n\n<p>What's the best way to enable this C-C++ interoperability while still retaining the ability to use virtual functions in C++?</p>\n"}, {"tags": ["c++", "sockets", "dll", "mfc", "casyncsocket"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6618035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8873911e256abc131fbeb6d9bcaa8d37?s=128&d=identicon&r=PG&f=1", "display_name": "sriep", "link": "https://stackoverflow.com/users/6618035/sriep"}, "is_accepted": false, "score": 0, "last_activity_date": 1511035857, "creation_date": 1511035857, "answer_id": 47370556, "question_id": 47312997, "link": "https://stackoverflow.com/questions/47312997/casyncsocketonreceive-not-being-called-in-dll/47370556#47370556", "title": "CAsyncSocket::OnReceive not being called in DLL", "body": "<p>There appears to be a problem with sending the OnRecieve message in DLLs.</p>\n\n<p>Despite the OnRecieve message not being sent, any response should still be available to be read by Recieve. </p>\n\n<p>So a workaround seems to be, if using CAsyncSocket in a DLL, to not use CAsyncSocket::OnRecieve but only use CAsyncSocket::Receive. Perhaps attached to a timer.</p>\n"}], "owner": {"reputation": 1, "user_id": 6618035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8873911e256abc131fbeb6d9bcaa8d37?s=128&d=identicon&r=PG&f=1", "display_name": "sriep", "link": "https://stackoverflow.com/users/6618035/sriep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511035857, "creation_date": 1510764571, "last_edit_date": 1510770968, "question_id": 47312997, "link": "https://stackoverflow.com/questions/47312997/casyncsocketonreceive-not-being-called-in-dll", "title": "CAsyncSocket::OnReceive not being called in DLL", "body": "<p>I have a Qt program that needs to use VC++ CAsyncSocket for TCP connection. I have created a dll. to wrap CAsyncSocket.</p>\n\n<pre><code>class CClientSocket ;\nclass __declspec(dllexport) CClientSocketEx\n{\npublic:\n    CClientSocketEx();\n     ~CClientSocketEx();\n\n     void Close();\n     bool Create();\n     bool Connect(const char* lpszHostAddress, unsigned int nHostPort); \n     int Send(const char* lpBuf, int nBufLen, int nFlags = 0);\n     bool GetPeerName(char* rPeerAddress, int length, unsigned int&amp; rPeerPort);\n     int Receive(void* lpBuf, int nBufLen, int nFlags = 0);\nprivate:\n    CClientSocket* clientSocket;\n};\n\nclass CClientSocket : public CAsyncSocket\n{\n   virtual void OnReceive(int nErrorCode);\n};\n\nvoid CClientSocket::OnReceive(int nErrorCode)\n{\n    if (!AfxSocketInit())\n    {\n        AfxMessageBox(_T(\"Failed to Initialize Sockets\"), MB_OK | MB_ICONSTOP);\n    }\n    CString mesage(_T(\"CClientSocket::OnReceive nErrorCode: %d\"), nErrorCode);\n    logMessage(mesage);\n    CAsyncSocket::OnReceive(nErrorCode);\n}\n</code></pre>\n\n<p>The problem I have is that CAsyncSocket::OnRecieve is \nnever called.</p>\n\n<p>Further, if I call CAsyncSocke::Recieve without waiting for the OnRecieve  I get a WSAEWOULDBLOCK error.</p>\n\n<p>When I unit test on my own PC everything works ok. When I try on client machine I have the above problem.  The connect and send commands all work ok, and I am informed that the hardware is sending a reply, but no OnRecieve event.</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1510768870, "post_id": 47312983, "comment_id": 81579320, "body": "What&#39;s the actual question?"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1510797571, "post_id": 47312983, "comment_id": 81591790, "body": "<code>typename T t;</code> is ill-formed because <a href=\"http://eel.is/c++draft/temp.res#3\" rel=\"nofollow noreferrer\">the grammar requires a nested-name-specifier</a>."}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510933324, "post_id": 47312983, "comment_id": 81660910, "body": "Grammar doesn&#39;t require nested name specifier everywhere for typename, its only particular case for obligate using of typename. There are many cases where typename is required, but  nested name specifier is not applied. For example p&lt;T&gt;.x"}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510933444, "post_id": 47312983, "comment_id": 81660992, "body": "I try to resolve my missunderstanding, since it looks as collision between 2 assertions in standard."}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510934674, "post_id": 47312983, "comment_id": 81661813, "body": "more precisely, assertion in standard 14882:2011 &#167; 14.6.2.1 and example from standard: T t;"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510923191, "post_id": 47314293, "comment_id": 81654182, "body": "&gt; &quot;<code>T</code> is not a dependent name in your example.&quot;   Why ? According to ISO 14882:2011 &#167; 14.6.2.1: A type is dependent if it is \u2014 a template parameter,  And dependent type is kind of dependent name according standard."}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510924788, "post_id": 47314293, "comment_id": 81655150, "body": "Please, justify your answer according iso 14882"}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510932168, "post_id": 47314293, "comment_id": 81660194, "body": "I got an errors. see wandbox.org/permlink/FIMBqI579385nbhy How do you explain that standard asserts: 14882:2011 &#167; 14.6.2.1: A type is dependent if it is \u2014 a template parameter, ???"}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510938028, "post_id": 47314293, "comment_id": 81663887, "body": "I got the same result in class scope: <a href=\"https://wandbox.org/permlink/Zdm245quHUTZTYjK\" rel=\"nofollow noreferrer\">wandbox.org/permlink/Zdm245quHUTZTYjK</a>"}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510938380, "post_id": 47314293, "comment_id": 81664106, "body": "I try to resolve miisunderstanding, since some assertions in standard, denoted above, look as contradictory."}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510939112, "post_id": 47314293, "comment_id": 81664533, "body": "I use this code only for example of declaration of data member. My question related to relations between standard assertions!!! I know, that code is ill-formed. I want to understand why ?"}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510939319, "post_id": 47314293, "comment_id": 81664662, "body": "I don&#39;t try to declare type alias in class scope by typedef."}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "reply_to_user": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510939454, "post_id": 47314293, "comment_id": 81664749, "body": "@Pupkin Ah, I must have read over the &quot;mistake&quot; in your example code at least 10 times :). Sorry for that! The <code>typename</code> is not allowed here because <code>T</code> is not a <code>nested name-specifier</code> (Section 17.7.3). As also noted by @cpplearner."}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510939835, "post_id": 47314293, "comment_id": 81664957, "body": "I very well understand Section 17.7.3, but those assertions it is not rule, apllied everywhere, but only where &quot;When a qualified-id is intended to refer&quot; It is only particular case. This rule don&#39;t imply the rule for all cases."}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "reply_to_user": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510940467, "post_id": 47314293, "comment_id": 81665272, "body": "@Pupkin I don&#39;t quite understand what you&#39;re trying to say here."}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510940765, "post_id": 47314293, "comment_id": 81665432, "body": "I try to resolve my missunderstanding, since it looks as collision between standard assertions, donoted in top post and axamples, denoted in top post.  please see top post. I dint refer to draft 17.7.7.3."}, {"owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "edited": false, "score": 0, "creation_date": 1510941246, "post_id": 47314293, "comment_id": 81665686, "body": "And 17.7.7.3 don&#39;t resolve a collision because 17.7.7.3 explicity denote scope of apllying for itself: &quot;When a qualified-id is intended to refer&quot;"}], "tags": [], "owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "is_accepted": false, "score": 1, "last_activity_date": 1510940383, "last_edit_date": 1510940383, "creation_date": 1510768718, "answer_id": 47314293, "question_id": 47312983, "link": "https://stackoverflow.com/questions/47312983/simple-type-specifier-is-template-parameter/47314293#47314293", "title": "Simple type specifier is template parameter", "body": "<p>Your example code is ill-formed, because of ISO section 17.7.3 (<a href=\"http://eel.is/c++draft/temp.res#3\" rel=\"nofollow noreferrer\">http://eel.is/c++draft/temp.res#3</a>): <code>T</code> is not a <code>nested name-specifier</code>.</p>\n\n<p>Hence, there's no way <code>T</code> can be anything else but the <code>typename T</code> used as the template parameter. I.e. the compiler can't be mistaken, so you don't need to qualify it with the <code>typename-specifier</code>.</p>\n\n<p>An example of a dependent type where the <code>typename-specifier</code> is required would be <code>T::value_type</code>, because the actual type/value of <code>value_type</code> <em>depends</em> on what <code>T</code> is. In that case you have to help the compiler out:</p>\n\n<pre><code>template &lt;typename T&gt; class U {\n  using t = T;                      // OK\n  using u = T::value_type;          // ill-formed: needs typename-specifier\n  using v = typename t::value_type; // OK: qualified with typename keyword\n};\n</code></pre>\n\n<p>Let's say you have the following:</p>\n\n<pre><code>class foo {\n  constexpr static int value_type = 7;\n}\n\nclass bar {\n  using value_type = int;\n}\n</code></pre>\n\n<p>This is the reason the 2nd typedef line above is ill-formed: if <code>T</code> is <code>foo</code> then <code>value_type</code> is not actually a type, but a constant with a very confusing name. If <code>T</code> is <code>bar</code> then all is well. But the compiler can't know this, so you have to help him out and assure him <code>value_type</code> is in fact a type. That also means you will be greeted with a compile error if you ever try to compile <code>U&lt;foo&gt;</code>.</p>\n\n<p>Note: I used C++11 syntax for the typedefs, because I find it much more readable. The explanation above still holds if you use <code>typedef</code> instead of <code>using</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 8212126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3335ba8c95ea705dcb17a30f9459dc?s=128&d=identicon&r=PG&f=1", "display_name": "Pupkin ", "link": "https://stackoverflow.com/users/8212126/pupkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510940383, "creation_date": 1510764528, "last_edit_date": 1510937604, "question_id": 47312983, "link": "https://stackoverflow.com/questions/47312983/simple-type-specifier-is-template-parameter", "title": "Simple type specifier is template parameter", "body": "<p>According to ISO 14882:2011 \u00a7 14.6.2.1:</p>\n\n<blockquote>\n  <p>A type is dependent if it is \u2014 a template parameter,</p>\n</blockquote>\n\n<p>And according to \u00a7 ISO 14882:2011 14.6:</p>\n\n<blockquote>\n  <p>A name used in a template declaration or definition and that is\n  dependent on a template-parameter is assumed not to name a type unless\n  the applicable name lookup finds a type name or the name is qualified\n  by the keyword typename.</p>\n</blockquote>\n\n<p>But </p>\n\n<pre><code>template &lt;typename T&gt; class U\n{\n    typename T t; // ill-formed, i have an compilier error\n};\n</code></pre>\n\n<p>Are \"dependent name\" and \"name used in a template declaration or definition and that is dependent on a template-parameter\" the same concept?\nI try to resolve my missunderstanding, since it looks as collision between  assertions in standard(ISO 14882:2011 \u00a7 14.6.2.1) and example from standard T t;.</p>\n"}, {"tags": ["c++", "precision", "uint64"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1510764690, "post_id": 47312877, "comment_id": 81576830, "body": "you have d2 twice in yr cout. Why does t1 == t2 when you say &#39;HIT!&#39; thats for sure wrong"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 5, "creation_date": 1510764726, "post_id": 47312877, "comment_id": 81576858, "body": "This works correctly on ideone after fixing a typo in your code (<a href=\"https://ideone.com/Ljdjsp\" rel=\"nofollow noreferrer\">demo</a>)."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1510764767, "post_id": 47312877, "comment_id": 81576897, "body": "there is something more suspicious going on here. This is not the full code"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510764799, "post_id": 47312877, "comment_id": 81576931, "body": "Works properly with VS 2017 and gcc 7.2 after correcting typo."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1510764826, "post_id": 47312877, "comment_id": 81576946, "body": "What platform are you compiling for? What compiler are you using? What compiler flags?"}, {"owner": {"reputation": 57972, "user_id": 131140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/11b4048e49b8b89f670cc984059d1677?s=128&d=identicon&r=PG", "display_name": "Goz", "link": "https://stackoverflow.com/users/131140/goz"}, "edited": false, "score": 0, "creation_date": 1510764863, "post_id": 47312877, "comment_id": 81576977, "body": "What platform and compiler are you using.  Cos I get both being as you would expect on VS2013 (Release build) on an x86 running in 64-bit mode."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510764920, "post_id": 47312877, "comment_id": 81577030, "body": "I get only reproduce if I use <code>float</code> instead of <code>double</code>."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1510764937, "post_id": 47312877, "comment_id": 81577044, "body": "aki means sizeof(double) &gt; sizeof(float)"}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 1, "creation_date": 1510764950, "post_id": 47312877, "comment_id": 81577056, "body": "I meant to check sizeof float == sizeof double. Double has to be at least the size of float, but not necessarily larger."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1510765073, "post_id": 47312877, "comment_id": 81577132, "body": "What does &quot;HIT! (naturally)&quot; mean? Does it mean that the numbers are equal? Does it mean that the numbers are different? Anything else?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1510765113, "post_id": 47312877, "comment_id": 81577163, "body": "@pm100 Saying \u201cHIT\u201d there means that the <code>assert</code> is actually triggered; i.e., he didn\u2019t accidentally change <code>NDEBUG</code> or something.\\"}, {"owner": {"reputation": 895, "user_id": 1783320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c69a0bf14a6be8295c1b14c5af5b0a3?s=128&d=identicon&r=PG", "display_name": "Luc Bloom", "link": "https://stackoverflow.com/users/1783320/luc-bloom"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1510765462, "post_id": 47312877, "comment_id": 81577391, "body": "Thank you for confirming that computers are awesome and that the error must be with my compiler settings. (Which means it&#39;s fixable, yay!) Thanks for the cool online tool link, @dasblinkenlight !"}, {"owner": {"reputation": 895, "user_id": 1783320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c69a0bf14a6be8295c1b14c5af5b0a3?s=128&d=identicon&r=PG", "display_name": "Luc Bloom", "link": "https://stackoverflow.com/users/1783320/luc-bloom"}, "edited": false, "score": 0, "creation_date": 1510765524, "post_id": 47312877, "comment_id": 81577427, "body": "I&#39;m using VS 2012 with target MachineX86, toolkit v110_xp. Floating point model &quot;Precise (/fp:precise)&quot;. Any more info?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1510765993, "post_id": 47312877, "comment_id": 81577707, "body": "You&#39;ve added <code>#include</code> directives for <code>&lt;iostream&gt;</code> (which you need) and <code>&lt;time.h&gt;</code> (which you don&#39;t use). You also need <code>#include</code> headers for <code>&lt;cassert&gt;</code> and <code>&lt;cstdint&gt;</code>. I suggest you update your question to show a complete self-contained program that we can copy-and-paste and run unmodified on our own systems. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1510770558, "post_id": 47312877, "comment_id": 81580253, "body": "@KeithThompson I\u2019m guessing that <code>&lt;iostream&gt;</code> itself includes <code>&lt;cassert&gt;</code> and <code>&lt;cstdint&gt;</code> on the OP\u2019s machine, so it\u2019s hard to notice the missing headers."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1510771847, "post_id": 47312877, "comment_id": 81581002, "body": "@DanielH: That is unfortunately possible."}, {"owner": {"reputation": 895, "user_id": 1783320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c69a0bf14a6be8295c1b14c5af5b0a3?s=128&d=identicon&r=PG", "display_name": "Luc Bloom", "link": "https://stackoverflow.com/users/1783320/luc-bloom"}, "edited": false, "score": 1, "creation_date": 1510785562, "post_id": 47312877, "comment_id": 81588251, "body": "Keith\u2019s right. I should make it self-contained and test it that way, too. Tomorrow I\u2019ll try and see if_fpreset() restores my sanity."}], "answers": [{"comments": [{"owner": {"reputation": 895, "user_id": 1783320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c69a0bf14a6be8295c1b14c5af5b0a3?s=128&d=identicon&r=PG", "display_name": "Luc Bloom", "link": "https://stackoverflow.com/users/1783320/luc-bloom"}, "edited": false, "score": 0, "creation_date": 1510765140, "post_id": 47313101, "comment_id": 81577182, "body": "I thought you had the answer there, but it appears that the sizeof&#39;s are both 8. Could it be that according to ieee754, even though a double is 64-bits, it cannot hold the integral number 1510763846?"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1510765309, "post_id": 47313101, "comment_id": 81577295, "body": "This is probably still the answer; only the conversion to <code>float</code> is somewhere else (cannot know where exactly). I remember that on some ARM platform there were dedicated functions in the C runtime for casting from 64-bit integers to floating point. These functions could be broken."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1510765856, "post_id": 47313101, "comment_id": 81577633, "body": "The C++ standard does allow <code>double</code> and <code>float</code> to have the same size, representation, range, and precision (though they&#39;re always distinct types), but it also imposes minimal requirements on the range and precision of type <code>double</code>. I&#39;m fairly sure a 32-bit type can&#39;t meet those requirements."}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 1, "creation_date": 1510767766, "post_id": 47313101, "comment_id": 81578731, "body": "This is the best reference to the allowed sizes of float and double I found: <a href=\"https://stackoverflow.com/a/24157568/1716339\">stackoverflow.com/a/24157568/1716339</a> \u2014 but I dont know whats happening, except that there\u2019s strong smell of float. We should look at the assembler dump."}], "tags": [], "owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1510765208, "last_edit_date": 1510765208, "creation_date": 1510764864, "answer_id": 47313101, "question_id": 47312877, "link": "https://stackoverflow.com/questions/47312877/unexpected-result-after-converting-uint64-t-to-double/47313101#47313101", "title": "Unexpected result after converting uint64_t to double", "body": "<p>From ieee754 floating point conversion it looks like your implementation of double is actually float, which is of course allowed by the standard, that mandates that <code>sizeof double &gt;= sizeof float</code>.</p>\n\n<blockquote>\n  <blockquote>\n    <p>The most accurate representation of 1510763846 is 1.510763904E9.</p>\n  </blockquote>\n</blockquote>\n"}], "owner": {"reputation": 895, "user_id": 1783320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c69a0bf14a6be8295c1b14c5af5b0a3?s=128&d=identicon&r=PG", "display_name": "Luc Bloom", "link": "https://stackoverflow.com/users/1783320/luc-bloom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1766, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1510823943, "creation_date": 1510764186, "last_edit_date": 1510823943, "question_id": 47312877, "link": "https://stackoverflow.com/questions/47312877/unexpected-result-after-converting-uint64-t-to-double", "title": "Unexpected result after converting uint64_t to double", "body": "<p>In the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n...\n\nuint64_t t1 = 1510763846;\nuint64_t t2 = 1510763847;\ndouble d1 = (double)t1;\ndouble d2 = (double)t2;\n// d1 == t2 =&gt; evaluates to true somehow?\n// t1 == d2 =&gt; evaluates to true somehow?\n// d1 == d2 =&gt; evaluates to true somehow?\n// t1 == t2 =&gt; evaluates to false, of course.\nstd::cout &lt;&lt; std::fixed &lt;&lt; \n        \"uint64_t: \" &lt;&lt; t1 &lt;&lt; \", \" &lt;&lt; t2 &lt;&lt; \", \" &lt;&lt;\n        \"double: \" &lt;&lt; d1 &lt;&lt; \", \" &lt;&lt; d2 &lt;&lt; \", \" &lt;&lt; (d2+1) &lt;&lt; std::endl;\n</code></pre>\n\n<p>I get this output:</p>\n\n<pre><code>uint64_t: 1510763846, 1510763847, double: 1510763904.000000, 1510763904.000000, 1510763905.000000\n</code></pre>\n\n<p>And I don't understand why. This answer: <a href=\"https://stackoverflow.com/questions/1848700/biggest-integer-that-can-be-stored-in-a-double\">biggest integer that can be stored in a double</a> says that an integral number up to 2^53 (9007199254740992) can be stored in a <code>double</code> without losing precision.</p>\n\n<p>I actually get errors when I start doing calculations with the doubles, so it's not only a printing issue. (e.g. 1510763846 and 1510763847 both give 1510763904)</p>\n\n<p>It's also very weird that the double can just be added to and then come out correct (d2+1 == 1510763905.000000)</p>\n\n<p>Rationale: I'm converting these numbers to doubles because I need to work with them in Lua, which only supports floating point numbers. I'm sure I'm compiling the Lua lib with <code>double</code> as the <code>lua_Number</code> type, not <code>float</code>.</p>\n\n<pre><code>std::cout &lt;&lt; sizeof(t1) &lt;&lt; \", \" &lt;&lt; sizeof(d2) &lt;&lt; std::endl;\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>8, 8\n</code></pre>\n\n<p>I'm using VS 2012 with target MachineX86, toolkit v110_xp. Floating point model \"Precise (/fp:precise)\"</p>\n\n<p><strong>Addendum</strong></p>\n\n<p>With the help of people who replied and this article <a href=\"https://stackoverflow.com/questions/1154221/why-are-doubles-added-incorrectly-in-a-specific-visual-studio-2008-project\">Why are doubles added incorrectly in a specific Visual Studio 2008 project?</a>, I've been able to pinpoint the problem. A library is using a function like _set_controlfp, _control87, _controlfp or __control87_2 to change the precision of my executable to \"single\". That is why a uint64_t conversion to a double behaves as if it's a float.</p>\n\n<p>When doing a file search for the above function names and \"MCW_PC\", which is used for Precision Control, I found the following libraries that might have set it:</p>\n\n<ul>\n<li>Android NDK</li>\n<li>boost::math</li>\n<li>boost::numeric</li>\n<li>DirectX (We're using June 2010)</li>\n<li>FMod (non-EX)</li>\n<li>Pyro particle engine</li>\n</ul>\n\n<p><strong>Now I'd like to rephrase my question:</strong></p>\n\n<p>How do I make sure converting from a <code>uint64_t</code> to a <code>double</code> goes correctly every time, without:</p>\n\n<ol>\n<li>having to call _fpreset() each and every time a possible conversion occurs (think about the function parameters)</li>\n<li>having to worry about a library's thread changing the floating point precision in between my _fpreset() and the conversion?</li>\n</ol>\n\n<p>Naive code would be something like this:</p>\n\n<pre><code>double toDouble(uint64_t i)\n{\n    double d;\n    do {\n        _fpreset();\n        d = i;\n        _fpreset();\n    } while (d != i);\n    return d;\n}\n\ndouble toDouble(int64_t i)\n{\n    double d;\n    do {\n        _fpreset();\n        d = i;\n        _fpreset();\n    } while (d != i);\n    return d;\n}\n</code></pre>\n\n<p>This solution assumes the odds of a thread messing with the Floating Point Precision <strong>twice</strong> are astronomically small. Problem is, the values I'm working with, are timers that represent real-world value. So I shouldn't be taking any chances. Is there a silver bullet for this problem?</p>\n"}, {"tags": ["c++", "c++11", "templates", "lambda", "divide-and-conquer"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1510764181, "post_id": 47312712, "comment_id": 81576475, "body": "Did you mean to write <code>const std::string x</code> instead of <code>const A x</code>? Otherwise the types of parameters don&#39;t match (If so, we should close as typo). btw <code>const std::string&amp; x</code> might be a better choice."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1510764563, "post_id": 47312712, "comment_id": 81576754, "body": "There are many typographical errors here, so I&#39;m voting to close. You seem to get your template types mixed up with other types. At the same time, I want to help you without posting an answer, so I&#39;ve mocked up something that will <i>compile</i> <a href=\"https://wandbox.org/permlink/N24l4R9dFmchvQMw\" rel=\"nofollow noreferrer\">here</a>. Note, you likely have logic errors, too."}, {"owner": {"reputation": 251, "user_id": 7063478, "user_type": "registered", "profile_image": "https://graph.facebook.com/1454136917948906/picture?type=large", "display_name": "nowaqq", "link": "https://stackoverflow.com/users/7063478/nowaqq"}, "edited": false, "score": 1, "creation_date": 1510764908, "post_id": 47312712, "comment_id": 81577016, "body": "You expect 1st and 3rd argument of divideAndConquer function to share the type (except from const), but passing std::string and lambda. Those have different types, resulting in lack of match."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1510766617, "creation_date": 1510766617, "answer_id": 47313676, "question_id": 47312712, "link": "https://stackoverflow.com/questions/47312712/c-template-argument-deduction-substitution-failed/47313676#47313676", "title": "C++ template argument deduction/substitution failed:", "body": "<p>First of all, a suggestion: give names to template type that are more useful (that suggest the use) than <code>A</code>, <code>B</code>, <code>C</code>, ...</p>\n\n<p>So become more understandable that you have given the same type identifier to completely different things (<code>A</code> for <code>std::string</code> and for a lambda function; <code>B</code> for two different lambda types (and take in count that different lambda are ever different types; also when with the same signature) and for the return value (<code>int</code>, in your example)).</p>\n\n<p>I propose the following version</p>\n\n<pre><code>template &lt;typename dataT, typename divT, typename conqT, typename baseT,\n          typename solvT&gt;\nauto divideAndConquer (dataT const &amp; x, baseT basecase, divT divide,\n                       conqT conquer, solvT solvecase)\n   -&gt; decltype(solvecase(x))\n {\n   using retT = decltype(solvecase(x));\n\n   if ( basecase(x) )\n      return solvecase(x);\n\n   dataT const probl1 { divide(x, 1) };\n   dataT const probl2 { divide(x, 2) };\n\n   auto sol1f = async&lt;retT(*)(dataT const &amp;, baseT, divT, conqT, solvT)&gt;\n      (divideAndConquer, probl1, basecase, divide, conquer, solvecase);\n\n   retT sol2 { divideAndConquer(probl2, basecase, divide, conquer,\n                                solvecase) };\n   retT sol1 { sol1f.get() };\n\n   return conquer(sol1, sol2);\n }\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/044d5f48b5bca1cea895aee400c4e02a?s=128&d=identicon&r=PG&f=1", "display_name": "Francesco", "link": "https://stackoverflow.com/users/5421658/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 918, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510766965, "creation_date": 1510763719, "last_edit_date": 1510766965, "question_id": 47312712, "link": "https://stackoverflow.com/questions/47312712/c-template-argument-deduction-substitution-failed", "title": "C++ template argument deduction/substitution failed:", "body": "<p>I am quite new to C++ and I am experiencing some of its features. In particular, I would like to implement a generic <strong>Divide and Conquer</strong> procedure that takes as parameter the 'functional code' to solve the problem. Actually what I have in mind is that 'Divide and Conquer' is a higher order function taking as parameters:</p>\n\n<ul>\n<li>a function <code>basecase()</code> to test whether the we reached the base case</li>\n<li>a function <code>solvecase()</code> to solve the base case</li>\n<li>a function <code>divide()</code> to split the problem in two subproblems </li>\n<li>a function <code>conquer()</code> that takes to partial solutions and builds one solution out of the two.</li>\n</ul>\n\n<p>To do this, I used <strong>templates</strong>: in particular, type <code>A</code> is the type of the input problem, type <code>B</code> is the type of the output problem and type <code>C</code> will probably be a boolean (the result type of the test for base case).</p>\n\n<p>There is also other stuff, like the use of <code>async()</code> to compute concurrently the solution, but this is not the focus of my question.</p>\n\n<p>My question is: why do I get the following message when I compile, complaining about <strong>conflicting types</strong> ?</p>\n\n<pre><code>D&amp;C.cpp: In function \u2018int main(int, char**)\u2019:\nD&amp;C.cpp:67:92: error: no matching function for call to \u2018divideAndConquer(std::string&amp;, main(int, char**)::__lambda4&amp;, main(int, char**)::__lambda5&amp;, main(int, char**)::__lambda6&amp;, main(int, char**)::__lambda7&amp;)\u2019\n     divideAndConquer(text, lambda_basecase, lambda_divide, lambda_conquer, lambda_solvecase);\n                                                                                            ^\nD&amp;C.cpp:67:92: note: candidate is:\nD&amp;C.cpp:10:3: note: template&lt;class A, class B, class C&gt; B divideAndConquer(A, C, A, B, B)\n B divideAndConquer(const A x, C basecase, A divide, B conquer, B solvecase)\n   ^\nD&amp;C.cpp:10:3: note:   template argument deduction/substitution failed:\nD&amp;C.cpp:67:92: note:   deduced conflicting types for parameter \u2018A\u2019 (\u2018std::basic_string&lt;char&gt;\u2019 and \u2018main(int, char**)::__lambda5\u2019)\n     divideAndConquer(text, lambda_basecase, lambda_divide, lambda_conquer, lambda_solvecase);\n</code></pre>\n\n<p>The Code is the following: basically the idea is to use the Divide and Conquer procedure to look for the instances of a target string into a text, but to be general enough to reuse this schema to solve also other problems (e.g. the Fibonacci numbers).</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;future&gt;\n\nusing namespace std;\n\ntemplate &lt;typename A, typename B, typename C&gt;\nB divideAndConquer(const A x, C basecase, A divide, B conquer, B solvecase)\n{\n    if (basecase(x))\n    return solvecase(x);\n\n    A probl1 = divide(x,1);\n    A probl2 = divide(x, 2);\n\n    auto sol1f = async(divideAndConquer, probl1, basecase, divide, conquer, solvecase);\n    B sol2 = divideAndConquer(probl2, basecase, divide, conquer, solvecase);\n    B sol1 = sol1f.get();\n\n    return (conquer(sol1, sol2));\n}\n\nint splitOnWhitespaces(const string&amp; text, int half, string direction){\n    int i=half, N = text.length();\n    if (direction.compare(\"forward\")==0){    \n        while(text[i]!=' ' &amp;&amp; text[i] != '\\n' &amp;&amp; i &lt; N)\n            i++;\n    }\n    else{\n         while(text[i]!=' ' &amp;&amp; text[i] != '\\n' &amp;&amp; i &gt;= 0)\n            i--;\n    if (i&lt;=0 || i==N)\n        return -1;\n    else\n        return i;\n    }\n}\n\nint main(int argc, char *argv[]){\n    string text= \"Nel mezzo del cammin di nostra vita mi ritrovai per una selva oscura, che la diritta via era smarrita.\";\n    string target = \"nel\";\n    int base = 10;\n    auto lambda_basecase = [base](string text){return text.length()&lt;=base;};\n    auto lambda_divide= [](string text, int subprobl){\n         int half = text.length()/2;\n         half = splitOnWhitespaces(text, half, \"forward\");\n         if (half==-1)\n            half = splitOnWhitespaces(text, half, \"backward\");\n         if (half==-1)\n             throw runtime_error(\"Error splitting the string: no whitespaces\\n\");\n         return ((subprobl==1) ? string(text, 0, half) : string(text, half));\n     };\n    auto lambda_conquer = [](int count1, int count2){return count1+count2;};    \n    auto lambda_solvecase = [target](string baseText){\n        int found = 0;\n        int start = 0;\n        int len = target.length();\n        while(baseText.find(target, start)!=string::npos ){\n            found++;\n            int position = baseText.find(target, start);\n            start = position + len + 1;\n        }\n        return found;\n    };\n    divideAndConquer(text, lambda_basecase, lambda_divide, lambda_conquer, lambda_solvecase);\n    return 0;\n}\n</code></pre>\n\n<p>I am studying template programming right now, so any help about this issue and any reference to (good) books or webpages explaining the matter would be appreciated.\nThank you in advance!</p>\n"}, {"tags": ["c++", "docker", "cmake", "gitlab", "gitlab-ci"], "comments": [{"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1510763802, "post_id": 47312630, "comment_id": 81576230, "body": "Hmm.. by running cmake in the script section? Also cmake and g++ are not mutually exclusive. The former is a build system, the latter is a compiler."}, {"owner": {"reputation": 2559, "user_id": 6415286, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/bhSEp.jpg?s=128&g=1", "display_name": "Thomas Easo", "link": "https://stackoverflow.com/users/6415286/thomas-easo"}, "reply_to_user": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1510764296, "post_id": 47312630, "comment_id": 81576551, "body": "i want to run ./runner.sh in the docker which contains a cmake command. So how can i make it work?"}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1510764610, "post_id": 47312630, "comment_id": 81576782, "body": "What exactly doesn&#39;t work? I cannot run your <code>.gitlab-ci.yml</code> because I have no idea what <code>runner.sh</code> is. If you want to get help, care to explain the problem better and put all the necessary information into the question."}, {"owner": {"reputation": 2559, "user_id": 6415286, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/bhSEp.jpg?s=128&g=1", "display_name": "Thomas Easo", "link": "https://stackoverflow.com/users/6415286/thomas-easo"}, "reply_to_user": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1510764717, "post_id": 47312630, "comment_id": 81576850, "body": "./runner.sh contains  cmake -H. -Bbuild cmake --build build -- -j3"}], "answers": [{"comments": [{"owner": {"reputation": 678, "user_id": 7768165, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gb_HKOYMQXc/AAAAAAAAAAI/AAAAAAAAAA4/psIFQ0Adofs/photo.jpg?sz=128", "display_name": "stephanmg", "link": "https://stackoverflow.com/users/7768165/stephanmg"}, "edited": false, "score": 0, "creation_date": 1543627031, "post_id": 47419063, "comment_id": 93999541, "body": "Thanks nktiwari: Useful to know how to debug. Best SG"}, {"owner": {"reputation": 5209, "user_id": 610692, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc307881f13b04b0b60022a8cb55400d?s=128&d=identicon&r=PG", "display_name": "Nathan Moinvaziri", "link": "https://stackoverflow.com/users/610692/nathan-moinvaziri"}, "edited": false, "score": 0, "creation_date": 1549043312, "post_id": 47419063, "comment_id": 95776300, "body": "If you install cmake while gitlab-runner service is running, you will need to restart the service after you change your PATH environment variable."}], "tags": [], "owner": {"reputation": 87, "user_id": 8718591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb0966eb350faca92f75ff8b13c06b5?s=128&d=identicon&r=PG&f=1", "display_name": "nktiwari", "link": "https://stackoverflow.com/users/8718591/nktiwari"}, "is_accepted": false, "score": 5, "last_activity_date": 1511285040, "creation_date": 1511285040, "answer_id": 47419063, "question_id": 47312630, "link": "https://stackoverflow.com/questions/47312630/how-to-integrate-cmake-in-gitlab-repository-for-continuous-integrationci/47419063#47419063", "title": "how to integrate cmake in gitlab repository for Continuous Integration(CI)", "body": "<p>I think you need to add apt-get update in order to get cmake to install. See <a href=\"https://askubuntu.com/questions/14685/what-does-package-package-has-no-installation-candidate-mean\">this</a></p>\n\n<pre><code>image: gcc\nbefore_script:\n - apt-get update --yes\n - apt-get install --yes cmake\n\nbuild:\n  script:\n    - ./runner.sh\n    - ./bin/hello\n</code></pre>\n\n<p>In general, you can figure stuff out by jumping into the docker image to debug (in your case the image is the debian-based gcc:latest):</p>\n\n<pre><code>sudo docker run -it --rm gcc\n</code></pre>\n\n<p>If you had run your original apt-get install command inside the gcc container, you would have seen following error message that you could have then googled to figure out that apt-get update was needed</p>\n\n<pre><code>sudo docker run -it --rm gcc apt-get install --yes cmake\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nPackage cmake is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Package 'cmake' has no installation candidate\n</code></pre>\n\n<p>As this blog post mentions, you can do a test run locally by <a href=\"https://docs.gitlab.com/runner/install/linux-manually.html\" rel=\"noreferrer\">downloading the gitlab-runner executable</a>:</p>\n\n<pre><code>gitlab-runner exec docker build\n</code></pre>\n\n<p>Running the gitlab-runner locally will have gitlab clone your repo and run through all the steps in the .gitlab-ci.yml and you can see the output and debug locally rather quickly.</p>\n"}], "owner": {"reputation": 2559, "user_id": 6415286, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/bhSEp.jpg?s=128&g=1", "display_name": "Thomas Easo", "link": "https://stackoverflow.com/users/6415286/thomas-easo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9330, "favorite_count": 4, "answer_count": 1, "score": 4, "last_activity_date": 1511285040, "creation_date": 1510763481, "last_edit_date": 1510764795, "question_id": 47312630, "link": "https://stackoverflow.com/questions/47312630/how-to-integrate-cmake-in-gitlab-repository-for-continuous-integrationci", "title": "how to integrate cmake in gitlab repository for Continuous Integration(CI)", "body": "<p>I was able to run the C++ Program and build &amp; test it using GitLab CI unit with the help of Docker Image of gcc. But now I want to compile the program in docker using <strong>cmake</strong> instead of g++. How to change the '.gitlab-ci.yml' file to support cmake.</p>\n\n<p><strong>Current File : .gitlab-ci.yml</strong></p>\n\n<pre><code>image: gcc\nbefore_script:\n   - apt-get install --yes cmake libmatio-dev libblas-dev libsqlite3-dev libcurl4-openssl-dev\n   - apt-get install --yes libarchive-dev liblzma-dev\n\nbuild:\n  script:\n    - ./runner.sh\n    - ./bin/hello\n</code></pre>\n\n<p>./runner.sh</p>\n\n<pre><code>cmake -H. -Bbuild\ncmake --build build -- -j3\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "stl", "c++17"], "comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1510763206, "post_id": 47312461, "comment_id": 81575770, "body": "What exactly are you expecting <code>remove_if</code> to do here?"}, {"owner": {"reputation": 85, "user_id": 6866713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yGcgb.png?s=128&g=1", "display_name": "sciamano", "link": "https://stackoverflow.com/users/6866713/sciamano"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1510763848, "post_id": 47312461, "comment_id": 81576257, "body": "given <code>recursive_directory_iterator</code> is there a way to proceed regular files only in a <i>functional-programming</i> style (and possible chain other filters afterwards)?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1510764320, "post_id": 47312461, "comment_id": 81576566, "body": "Not easily possible with just standard iterators. Have a look at <a href=\"http://www.boost.org/doc/libs/release/libs/range/doc/html/index.html\" rel=\"nofollow noreferrer\">boost range library</a> which allows for chaining."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1510764396, "post_id": 47312461, "comment_id": 81576619, "body": "Or Eric Niebler&#39;s range-v3 library: <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">github.com/ericniebler/range-v3</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1510765934, "post_id": 47312461, "comment_id": 81577673, "body": "Also <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/iterator/doc/filter_iterator.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_65_1/libs/iterator/doc/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1510763947, "post_id": 47312691, "comment_id": 81576319, "body": "Just what I was about to write. ;-) @sciamano It helps to look at the <a href=\"http://en.cppreference.com/w/cpp/iterator#Iterator_categories\" rel=\"nofollow noreferrer\">iterator categories</a>. If a function expects a certain category, you can only pass it an iterator of the same or a less restrictive category (those on the left side of the expected category). Also the use of <code>begin(dir_listing)</code> and <code>end(dir_listing)</code> implies a misunderstanding of <code>recursive_directory_iterator</code>. It is not a collection like a <code>std::vector</code>."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1510764503, "post_id": 47312691, "comment_id": 81576703, "body": "@zett42: It&#39;s not a collection, but it nevertheless supports <code>begin</code> and <code>end</code>. <code>begin</code> returns the iterator itself, and <code>end</code> returns a default constructed iterator. <a href=\"http://en.cppreference.com/w/cpp/filesystem/recursive_directory_iterator/begin\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/filesystem/&hellip;</a>"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1510764724, "post_id": 47312691, "comment_id": 81576856, "body": "Interesting although it feels somewhat strange. It&#39;s propably there for convenience only as ranges have not made it into the standard yet."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1510764789, "post_id": 47312691, "comment_id": 81576919, "body": "@zett42: Yes, it&#39;s there mainly so you can pass it to a range-based for loop."}], "tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 3, "last_activity_date": 1510765903, "last_edit_date": 1510765903, "creation_date": 1510763666, "answer_id": 47312691, "question_id": 47312461, "link": "https://stackoverflow.com/questions/47312461/how-to-use-recursive-directory-iterator-with-algorithm-library-and-stdremove-i/47312691#47312691", "title": "How to use recursive_directory_iterator with algorithm library and std::remove_if in particular?", "body": "<p><code>std::remove_if</code> expects forward iterators, pointing to move assignable values. <code>recursive_directory_iterator</code> is an input iterator, and the values it points to are const (so not move assignable).</p>\n\n<p>I'm not sure exactly what you're trying to do, but <code>std::remove/remove_if</code> is for removing items from a collection. Not all iterators point into collections, as is the case with <code>recursive_directory_iterator</code>.</p>\n\n<p>If you're trying to use it as a filter that you want to possibly forward to other algorithms, unfortunately the standard library does not have direct support for that. The best you can probably do (with the standard library) is use <code>remove_copy_if</code> with <code>back_inserter</code> to filter elements into a vector, and then do further processing on that vector.</p>\n\n<pre><code>std::vector&lt;fs::path&gt; paths;\nstd::remove_copy_if(begin(dir_listing), end(dir_listing), std::back_inserter(paths),\n    [](const fs::path&amp; p) {\n        return !fs::is_regular_file(p);\n    });\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6866713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yGcgb.png?s=128&g=1", "display_name": "sciamano", "link": "https://stackoverflow.com/users/6866713/sciamano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 47312691, "answer_count": 1, "score": 0, "last_activity_date": 1510765903, "creation_date": 1510763010, "last_edit_date": 1510764117, "question_id": 47312461, "link": "https://stackoverflow.com/questions/47312461/how-to-use-recursive-directory-iterator-with-algorithm-library-and-stdremove-i", "title": "How to use recursive_directory_iterator with algorithm library and std::remove_if in particular?", "body": "<p>I want to filter out some entries from the recursive directory listing using the standard algorithms. Let say leave only regular files. \nSome algorithms from STL do work, e.g. <code>std::count_if</code>, but others, e.g <code>std::remove_if</code>, do not.</p>\n\n<p><del>Should it work or is the <code>recursive_directory_iterator</code> intentionally not (fully) compatible with STL?</del></p>\n\n<p>Given <code>recursive_directory_iterator</code> is there a way to proceed regular files only in a functional-programming style (and possible chain other filters afterwards)? </p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;experimental/filesystem&gt;\n#include &lt;iostream&gt;\n\nnamespace fs = std::experimental::filesystem;\n\nint main()\n{\n  { // count_if is fine\n    auto dir_listing = fs::recursive_directory_iterator(\"/tmp/myfiles\");\n    auto n = std::count_if(begin(dir_listing), end(dir_listing), [](auto &amp;p) { return fs::is_regular_file(p); });\n    std::cout &lt;&lt; n &lt;&lt; '\\n';\n  }\n\n  { // remove_if does not even compile\n    auto dir_listing = fs::recursive_directory_iterator(\"/tmp/myfiles\");\n    auto my_files = std::remove_if(begin(dir_listing), end(dir_listing), [](const fs::path &amp;p) { return !fs::is_regular_file(p); });\n    for (auto &amp;f : my_files)\n    {\n      std::cout &lt;&lt; f &lt;&lt; '\\n';\n    }\n  }\n}\n</code></pre>\n\n<p>Compiling with gcc-7 leads to an error (clang-5 as well)</p>\n\n<pre><code>g++-7 myfiles.cpp -std=c++1z -lstdc++fs\n...\n/usr/include/c++/7/bits/stl_algo.h:871:16: error: passing \u2018const std::experimental::filesystem::v1::directory_entry\u2019 as \u2018this\u2019 argument discards qualifiers [-fpermissive]\n      *__result = _GLIBCXX_MOVE(*__first);\n</code></pre>\n\n<p>And after adding <code>-fpermissive</code> it just segfaults.</p>\n"}, {"tags": ["c++", "boost", "geometry", "boost-geometry"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6398396, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d0f32037d548d2b97a74099a12b8556f?s=128&d=identicon&r=PG&f=1", "display_name": "Tu&#226;n Nguy\u1ec5n \u0110&#236;nh", "link": "https://stackoverflow.com/users/6398396/tu%c3%a2n-nguy%e1%bb%85n-%c4%90%c3%acnh"}, "edited": false, "score": 0, "creation_date": 1510890230, "post_id": 47316414, "comment_id": 81638005, "body": "oke, I combine overlaps() and winthin(), it solve my problem :)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 33, "user_id": 6398396, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d0f32037d548d2b97a74099a12b8556f?s=128&d=identicon&r=PG&f=1", "display_name": "Tu&#226;n Nguy\u1ec5n \u0110&#236;nh", "link": "https://stackoverflow.com/users/6398396/tu%c3%a2n-nguy%e1%bb%85n-%c4%90%c3%acnh"}, "edited": false, "score": 0, "creation_date": 1510920453, "post_id": 47316414, "comment_id": 81652475, "body": "@Tu&#226;nNguy\u1ec5n\u0110&#236;nh welcome to SO. Be sure to accept if an answer solved your problem (see <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1510777082, "last_edit_date": 1510777082, "creation_date": 1510776716, "answer_id": 47316414, "question_id": 47312330, "link": "https://stackoverflow.com/questions/47312330/create-solid-polygon-in-boost-geometry/47316414#47316414", "title": "Create solid polygon in boost geometry", "body": "<p>Polygons are <strong><em>by definition</em></strong> solid until you subtract inner rings. From \u00a76.1.11.1 from the standard\u00b9:</p>\n\n<blockquote>\n  <p>A Polygon is a planar Surface defined by 1 exterior boundary and 0 or more interior boundaries. Each interior\n  boundary defines a hole in the Polygon. A Triangle is a polygon with 3 distinct, non-collinear vertices and no\n  interior boundary. \u00b9</p>\n</blockquote>\n\n<p>Overlapping doesn't mean what you think it means.</p>\n\n<p>From \u00a76.1.15.3 (Named spatial relationship predicates based on the DE-9IM)</p>\n\n<ul>\n<li>Crosses <a href=\"https://i.stack.imgur.com/L3XKS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L3XKS.png\" alt=\"enter image description here\"></a></li>\n<li>Within <a href=\"https://i.stack.imgur.com/7ZiPo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7ZiPo.png\" alt=\"enter image description here\"></a></li>\n<li><p>Overlaps <a href=\"https://i.stack.imgur.com/goU3k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/goU3k.png\" alt=\"enter image description here\"></a></p>\n\n<p>It is defined as</p>\n\n<pre><code>a.Overlaps(b) \u21d4 ( dim(I(a)) = dim(I(b)) = dim(I(a) \u2229 I(b)))\n                 \u2227 (a \u2229 b \u2260 a) \u2227 (a \u2229 b \u2260 b)\n</code></pre></li>\n<li><p>Contains</p>\n\n<pre><code>a.Contains(b) \u21d4 b.Within(a)\n</code></pre></li>\n<li><p>Intersects</p>\n\n<pre><code>a.Intersects(b) \u21d4 ! a.Disjoint(b) \n</code></pre></li>\n</ul>\n\n<p>In your case you might be looking for <code>!disjoint</code>, <code>within</code>, <code>contains</code> or <code>intersection</code>:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/d295776db5b5e3d5\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/geometries/geometries.hpp&gt;\n#include &lt;boost/geometry/geometries/point_xy.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace bg = boost::geometry;\n\ntemplate &lt;typename Geo&gt; void debug(std::string name, Geo const&amp; g) {\n    std::string reason;\n    std::cout &lt;&lt; name &lt;&lt; \": \" &lt;&lt; bg::dsv(g) &lt;&lt; \" \" &lt;&lt; bg::is_valid(g, reason) &lt;&lt; \", '\" &lt;&lt; reason &lt;&lt; \"'\\n\"; \n}\n\ntemplate &lt;typename Geo, typename F&gt;\nvoid both_ways(std::string name, Geo const&amp; a, Geo const&amp; b, F f) {\n    std::cout &lt;&lt; name &lt;&lt; \"(a, b) -&gt; \" &lt;&lt; f(a,b) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; name &lt;&lt; \"(b, a) -&gt; \" &lt;&lt; f(b,a) &lt;&lt; \"\\n\";\n}\n\nint main() {\n    std::cout &lt;&lt; std::boolalpha;\n\n    using Pt = bg::model::d2::point_xy&lt;int&gt;;\n    using Poly = bg::model::polygon&lt;Pt&gt;;\n    using Multi = bg::model::multi_polygon&lt;Poly&gt;;\n\n    Poly const a {{ { 0,0 }, { 0,3 }, { 3,3 }, { 3,0 }, { 0,0 }} };\n    Poly const b {{ { 1,1 }, { 1,2 }, { 2,2 }, { 2,1 }, { 1,1 }} };\n\n    debug(\"a\", a);\n    debug(\"b\", b);\n\n#define TEST(algo) both_ways(#algo, a, b, [](auto&amp; a, auto&amp; b) { return bg::algo(a, b); })\n    TEST(overlaps);\n    TEST(intersects);\n    TEST(within);\n    //TEST(contains); // contains(a,b) \u21d4 within(b,a)\n    //TEST(crosses); // not implemented for polygons\n    TEST(disjoint);\n\n    both_ways(\"intersection\", a, b, [](auto&amp; a, auto&amp; b) {\n        Multi c; \n        bg::intersection(a, b, c);\n        return boost::lexical_cast&lt;std::string&gt;(bg::dsv(c));\n    });\n}\n</code></pre>\n\n<p>Which prints</p>\n\n<pre><code>a: (((0, 0), (0, 3), (3, 3), (3, 0), (0, 0))) true, 'Geometry is valid'\nb: (((1, 1), (1, 2), (2, 2), (2, 1), (1, 1))) true, 'Geometry is valid'\noverlaps(a, b) -&gt; false\noverlaps(b, a) -&gt; false\nintersects(a, b) -&gt; true\nintersects(b, a) -&gt; true\nwithin(a, b) -&gt; false\nwithin(b, a) -&gt; true\ndisjoint(a, b) -&gt; false\ndisjoint(b, a) -&gt; false\nintersection(a, b) -&gt; ((((1, 1), (1, 2), (2, 2), (2, 1), (1, 1))))\nintersection(b, a) -&gt; ((((1, 1), (1, 2), (2, 2), (2, 1), (1, 1))))\n</code></pre>\n\n\n\n<p>\u00b9 The <a href=\"http://www.opengeospatial.org/standards/sfa\" rel=\"nofollow noreferrer\">OGC Simple Feature</a> / Common architecture</p>\n"}], "owner": {"reputation": 33, "user_id": 6398396, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d0f32037d548d2b97a74099a12b8556f?s=128&d=identicon&r=PG&f=1", "display_name": "Tu&#226;n Nguy\u1ec5n \u0110&#236;nh", "link": "https://stackoverflow.com/users/6398396/tu%c3%a2n-nguy%e1%bb%85n-%c4%90%c3%acnh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 1, "accepted_answer_id": 47316414, "answer_count": 1, "score": 2, "last_activity_date": 1556216189, "creation_date": 1510762634, "last_edit_date": 1556216189, "question_id": 47312330, "link": "https://stackoverflow.com/questions/47312330/create-solid-polygon-in-boost-geometry", "title": "Create solid polygon in boost geometry", "body": "<p>I'm newbie at boost geometry, I have created polygon with <code>boost::geometry::assign_points()</code>. But I only create outer and inner of that polygon is empty. So I try test <code>boost::geometry::overlaps()</code> with two polygons A, B and A is inside B, result is not overlaps.</p>\n\n<p>So, What can I do to create solid polygon (only know outer point of polygon and inside of polygon is valid) ?</p>\n"}, {"tags": ["c++", "windows", "service"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1510762105, "post_id": 47312093, "comment_id": 81575014, "body": "you got request to stop - <code>SERVICE_CONTROL_STOP</code> and handle it. <i>if service is killed</i> - what you mean under this ? somebody terminate service process ? in this case service of course not get any notify"}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1510810563, "post_id": 47312206, "comment_id": 81595487, "body": "Services are isolated in Session 0. Task Manager and taskkill.exe can&#39;t enumerate windows of a Desktop in another Session, let alone send a <code>WM_CLOSE</code> window message or post a <code>WM_QUIT</code> thread message across Session boundaries. Anyway, modern services generally don&#39;t create windows (since they&#39;re run in a non-interactive WindowStation) or even have an attached console. <code>SERVICE_CONTROL_STOP</code> is the only way I know to gracefully end a service -- not necessarily the process."}], "tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": false, "score": 1, "last_activity_date": 1510762265, "creation_date": 1510762265, "answer_id": 47312206, "question_id": 47312093, "link": "https://stackoverflow.com/questions/47312093/how-to-handle-event-if-window-service-killed/47312206#47312206", "title": "How to handle event if window service killed", "body": "<p>If it's killed, it's killed. It ends. Immediately. You don't get any signals. </p>\n\n<p><em>However</em> recent windows versions will never just <em>kill</em> a process if you select that in the task manager. They will first send a close signal (as if you had pressed Alt-F4) to the app to give it a chance to close gracefully. The app will only be terminated if it does not shut down in a specified time span.</p>\n"}], "owner": {"reputation": 41, "user_id": 2354396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d18cb31437758d7c3a3de5cf08670fe5?s=128&d=identicon&r=PG", "display_name": "user2354396", "link": "https://stackoverflow.com/users/2354396/user2354396"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510762340, "creation_date": 1510761931, "last_edit_date": 1510762340, "question_id": 47312093, "link": "https://stackoverflow.com/questions/47312093/how-to-handle-event-if-window-service-killed", "title": "How to handle event if window service killed", "body": "<p>I have developed window service. I want to know how can I get notification if service is killed. Presently i am getting notification if service is stopped.</p>\n\n<pre><code>----service startup code---\n\ninline void CServiceModule::Init(_ATL_OBJMAP_ENTRY* p, HINSTANCE h, UINT      nServiceNameID, const GUID* plibid)\n{\n    CComModule::Init(p, h, plibid);\n\n    m_bService = TRUE;\n    m_hInstance = h;\n\n    if(m_szServiceName.size()==0)\n    {\n        string strServiceName = GetServiceName(); \n        m_szServiceName = strServiceName;\n    }\n\n    // set up the initial service status \n    m_hServiceStatus = NULL;\n    m_status.dwServiceType = SERVICE_WIN32_OWN_PROCESS;\n    m_status.dwCurrentState = SERVICE_STOPPED;\n    m_status.dwControlsAccepted = SERVICE_ACCEPT_PRESHUTDOWN;\n    m_status.dwWin32ExitCode = 0;\n    m_status.dwServiceSpecificExitCode = 0;\n    m_status.dwCheckPoint = 0;\n    m_status.dwWaitHint = 0;\n}\n\n ---Handler----\n inline void CServiceModule::Handler(DWORD dwOpcode)\n {\n     switch (dwOpcode)\n     {\n        case SERVICE_CONTROL_SHUTDOWN:\n        case SERVICE_CONTROL_STOP:\n            SetServiceStatus(SERVICE_STOP_PENDING);\n            PostThreadMessage(dwThreadID, WM_QUIT, 0, 0);\n            break;\n        case SERVICE_CONTROL_PAUSE:\n            break;\n        case SERVICE_CONTROL_CONTINUE:\n            break;\n        case SERVICE_CONTROL_INTERROGATE:\n            break;\n  /*    case SERVICE_CONTROL_SHUTDOWN:\n\n        break;*/\n        default:\n            LogEvent(_T(\"Bad service request\"));\n    }\n}\n</code></pre>\n\n<p>I am getting notification <code>SERVICE_CONTROL_STOP</code> when service is stopped. Please suggest what handler should i used if service is killed.</p>\n"}, {"tags": ["c++", "static", "constants"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 8, "creation_date": 1510761699, "post_id": 47311954, "comment_id": 81574707, "body": "Declare it with the least needed scope and visibility."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1510761821, "post_id": 47311954, "comment_id": 81574807, "body": "4. Define them in an anonymous namespace in the file that uses them."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 2, "creation_date": 1510761966, "post_id": 47311954, "comment_id": 81574910, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2268749/defining-global-constant-in-c\">Defining global constant in C++</a>"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1510762145, "post_id": 47311954, "comment_id": 81575046, "body": "or maybe <code>constexpr</code>"}, {"owner": {"reputation": 63, "user_id": 8144915, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de7e965e14e213b9ddc0e4d5bb7b4e7?s=128&d=identicon&r=PG&f=1", "display_name": "zonzor18", "link": "https://stackoverflow.com/users/8144915/zonzor18"}, "edited": false, "score": 1, "creation_date": 1510762166, "post_id": 47311954, "comment_id": 81575066, "body": "it&#39;s not a duplication of because I don&#39;t want it to be visible in multiple source files but only in this one source file in different functions. P.S constexpr is not an options because it&#39;s not c++11"}, {"owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 0, "creation_date": 1510762660, "post_id": 47311954, "comment_id": 81575400, "body": "If you need them in one source file only keep them local to that file. I would go for number 3."}, {"owner": {"reputation": 63, "user_id": 8144915, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de7e965e14e213b9ddc0e4d5bb7b4e7?s=128&d=identicon&r=PG&f=1", "display_name": "zonzor18", "link": "https://stackoverflow.com/users/8144915/zonzor18"}, "reply_to_user": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 0, "creation_date": 1510762913, "post_id": 47311954, "comment_id": 81575573, "body": "@EmeraldWeapon - what&#39;s the difference between 2 and 3, both are local to that file"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1510763091, "post_id": 47311954, "comment_id": 81575674, "body": "can you change the question to be less subjective? What is prefered is mainly opinion-based, but maybe you can make it more explicit by saying what piece of information you are missing to decide between the options you list"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1510763467, "post_id": 47311954, "comment_id": 81575996, "body": "@molbdnilo would upvote that if it were an answer."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1510763491, "post_id": 47311954, "comment_id": 81576016, "body": "@zonzor18 \u2022 2 and 3 are the same.  3 is a little more typing."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "edited": false, "score": 0, "creation_date": 1510763647, "post_id": 47311954, "comment_id": 81576119, "body": "@EmeraldWeapon \u2022 2 has internal linkage too, because it is a const and isn&#39;t declared <code>extern</code>."}, {"owner": {"reputation": 2102, "user_id": 3280022, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d8a213aec89c1883c261a278baf9aee?s=128&d=identicon&r=PG&f=1", "display_name": "Emerald Weapon", "link": "https://stackoverflow.com/users/3280022/emerald-weapon"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1510763791, "post_id": 47311954, "comment_id": 81576223, "body": "@Eljay Whoops, you are right, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 0, "last_activity_date": 1510764889, "last_edit_date": 1592644375, "creation_date": 1510763877, "answer_id": 47312769, "question_id": 47311954, "link": "https://stackoverflow.com/questions/47311954/constant-variables-that-are-used-only-in-one-cpp-file-where-to-declare-them/47312769#47312769", "title": "constant variables that are used only in one cpp file - where to declare them", "body": "<blockquote>\n<p>Only this one file will use those constant variables.</p>\n</blockquote>\n<p>If I understood correctly, that sentence automatically excludes the first option:</p>\n<blockquote>\n<p>declare static const in the header, define in the source file</p>\n</blockquote>\n<p>You don't need to expose the declaration in other compilation units (<em>cpp</em> files), so you don't need a header file includable in different cpp files.</p>\n<hr />\n<p>At this point the following options:</p>\n<blockquote>\n<ol start=\"2\">\n<li><p>define const in source file in the namespace scope</p>\n</li>\n<li><p>define static const in source file in the namespace scope</p>\n</li>\n</ol>\n</blockquote>\n<p><strong>In your situation, the correct answer should be (3).</strong></p>\n<hr />\n<h3>Why?</h3>\n<p>The answer is simply the correlation with the meaning of <code>static</code> variable <em>outside function block</em>.</p>\n<p>From <a href=\"http://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">here</a>:</p>\n<blockquote>\n<p>The static specifier [...]. When used in a declaration at namespace scope, it specifies internal linkage.</p>\n</blockquote>\n<p>So when you need to declare a constant variable which will be used only in that single compilation unit (cpp file), you <em>should</em> declare it as <code>static const</code> in order to express the <em>internal linkage</em> more explicit in the reading.</p>\n<hr />\n<h3>Extra</h3>\n<p><a href=\"https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions\">In general</a> is a good point to use, instead, an <em>anonymous namespace</em> in your compilation unit.</p>\n<p>In your <code>.cpp</code> file:</p>\n<pre><code> namespace {\n    const int kVariable = 12;\n }\n\n // no more static const int kVariable = 12;\n\n void foo() {\n   std::cout &lt;&lt; kVariable &lt;&lt; '\\n';\n }\n</code></pre>\n<p>The purpose is practically the same.</p>\n<hr />\n<h3>Conclusions</h3>\n<p>All those information give you a general idea about <code>static</code> keyword in the constant declarations.</p>\n<p>Anyway, it is often a matter of style.</p>\n"}, {"tags": [], "owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "is_accepted": false, "score": 0, "last_activity_date": 1510763977, "creation_date": 1510763977, "answer_id": 47312799, "question_id": 47311954, "link": "https://stackoverflow.com/questions/47311954/constant-variables-that-are-used-only-in-one-cpp-file-where-to-declare-them/47312799#47312799", "title": "constant variables that are used only in one cpp file - where to declare them", "body": "<p>I'd select option #3.  It is a little more typing, and means the same thing as #2.</p>\n\n<p>But people (myself included!) can easily forget that a <code>const</code> will have internal linkage unless declared <code>extern const</code>.  So putting <code>static const</code> helps with self-documenting code, in my opinion.</p>\n\n<p>If you like anonymous namespaces, you could put them in one to help clarify that they are internal to that translation unit.  That is a matter of preference.</p>\n"}], "owner": {"reputation": 63, "user_id": 8144915, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de7e965e14e213b9ddc0e4d5bb7b4e7?s=128&d=identicon&r=PG&f=1", "display_name": "zonzor18", "link": "https://stackoverflow.com/users/8144915/zonzor18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1175, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1510764889, "creation_date": 1510761550, "last_edit_date": 1510763220, "question_id": 47311954, "link": "https://stackoverflow.com/questions/47311954/constant-variables-that-are-used-only-in-one-cpp-file-where-to-declare-them", "title": "constant variables that are used only in one cpp file - where to declare them", "body": "<p>I have a small project and all its code is in one namespace (multiple files), in certain file I need to use multiple constants.</p>\n\n<p>Only this one file will use those constant variables.</p>\n\n<p>Which one is the right way to go and what's the difference (I'm familiar with static and const but still don't know the difference)</p>\n\n<ol>\n<li>declare static const in the header, define in the source file</li>\n<li>define const in source file in the namespace scope</li>\n<li>define static const in source file in the namespace scope</li>\n</ol>\n"}, {"tags": ["c++", "c++03"], "answers": [{"comments": [{"owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 0, "creation_date": 1510761642, "post_id": 47311953, "comment_id": 81574663, "body": "Actually, this function is in another namespace. I think it&#39;s a bad practice to overload in another namespace. I edit my question to add this information."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 0, "creation_date": 1510761915, "post_id": 47311953, "comment_id": 81574874, "body": "OK - you could probably just create a convenience header which contains overloads such as the above."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 1, "creation_date": 1510762091, "post_id": 47311953, "comment_id": 81574996, "body": "@Caduchon If you can (are alowed to) change a function, you can also overload it, regardless of what namespace it&#39;t in."}, {"owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1510762235, "post_id": 47311953, "comment_id": 81575114, "body": "@n.m. you really consider safe to overload my own <code>lapack::dgesvd</code> ?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 1, "creation_date": 1510762701, "post_id": 47311953, "comment_id": 81575425, "body": "@Caduchon If it&#39;s safe to modify the signature of a function, it&#39;s equally safe to overload it. Its namespace doesn&#39;t matter."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 1, "creation_date": 1510763340, "post_id": 47311953, "comment_id": 81575897, "body": "@Caduchon - That overload doesn&#39;t have to be in the same namespace. Just introduce both with a using declaration (into a scope of your choosing), and let overload resolution pick the correct one based on the number of arguments."}, {"owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1510765534, "post_id": 47311953, "comment_id": 81577441, "body": "@StoryTeller Then, sometimes I call <code>mynamespace::f</code>or <code>libnamespace::f</code> for exactly the same functionality. It&#39;s quite confusing if I want to change to have the info for debugging (for example). I clearly prefer to have all the declarations in my own namespace when I decide to interface it."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "edited": false, "score": 1, "creation_date": 1510767393, "post_id": 47311953, "comment_id": 81578523, "body": "@Caduchon - <code>mynamespace</code> should be <code>libnamespace_util</code>, and a combination of using declarations/directives can allow you any kind of uniform prefix you want. Frankly, it seems to me like you are just being overly pessimistic. But it&#39;s your party, as they say. Do whatever works for you."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 5, "last_activity_date": 1510761550, "creation_date": 1510761550, "answer_id": 47311953, "question_id": 47311890, "link": "https://stackoverflow.com/questions/47311890/interface-a-function-to-have-an-optional-argument-instead-of-a-required-one/47311953#47311953", "title": "Interface a function to have an optional argument instead of a required one", "body": "<p>Rather than change the current implementation you can just add an overloaded function with one argument:</p>\n\n<pre><code>double f(double x)\n{\n    double info;\n    return f(x, info);\n}\n</code></pre>\n"}], "owner": {"reputation": 4123, "user_id": 3378179, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3mmbS.png?s=128&g=1", "display_name": "Caduchon", "link": "https://stackoverflow.com/users/3378179/caduchon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510762052, "creation_date": 1510761368, "last_edit_date": 1510762052, "question_id": 47311890, "link": "https://stackoverflow.com/questions/47311890/interface-a-function-to-have-an-optional-argument-instead-of-a-required-one", "title": "Interface a function to have an optional argument instead of a required one", "body": "<p>Suppose I use a function (coming from a third-party API, in another namespace) having arguments filled by the function with some information:</p>\n\n<pre><code>double foo::f(double x, double&amp; info);\n</code></pre>\n\n<p>When I call it, I have to create a local variable, even if I don't care about the filled value:</p>\n\n<pre><code>const double x = 3.14159;\ndouble info = 0.0;\nconst double y = foo::f(x, info);\n// Nothing to do with info\n</code></pre>\n\n<p>Then, I want to interface this function to have an optional argument instead of a reference. Is there an usual/better/easiest/more-readable way than the following to do that ?</p>\n\n<pre><code>double ff(double x, double* info = 0)\n{\n  double unused_info = 0.0;\n  double&amp; info_ = ((bool)info ? *info : unused_info);\n  return foo::f(x, info_);\n}\n</code></pre>\n\n<p>This works, but it looks a little bit clumsy for the need.</p>\n\n<p><em>Note: I don't use C++11 for compatibility reasons. But I'm interested by C++11 solutions even if it doesn't answer the question.</em></p>\n"}, {"tags": ["c++", "c++11", "scope", "static", "initialization"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1510761341, "post_id": 47311823, "comment_id": 81574413, "body": "Please share the linker errors."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1510761377, "post_id": 47311823, "comment_id": 81574450, "body": "Please read a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>. It should explain about scopes, variable shadowing between them, and how can you resolve it. One such way to resolve them is scope resolution operator (<code>::</code>), via which you can use <code>arr</code> from global scope like this: <code>::arr</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1510761384, "post_id": 47311823, "comment_id": 81574458, "body": "You can disambiguate with <code>::arr</code> and <code>B::arr</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1510763103, "post_id": 47312173, "comment_id": 81575688, "body": "Thank you for such a detailed explanation!"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1510762511, "last_edit_date": 1510762511, "creation_date": 1510762162, "answer_id": 47312173, "question_id": 47311823, "link": "https://stackoverflow.com/questions/47311823/static-variable-shadowing-global/47312173#47312173", "title": "Static variable shadowing global", "body": "<p>From the C++ 2017 Standard (12.2.3.2 Static data members)</p>\n\n<blockquote>\n  <p>2 The declaration of a non-inline static data member in its class\n  definition is not a definition and may be of an incomplete type other\n  than cv void. The definition for a static data member that is not\n  defined inline in the class definition shall appear in a namespace\n  scope enclosing the member\u2019s class definition. In the definition at\n  namespace scope, the name of the static data member shall be qualified\n  by its class name using the :: operator. <strong>The initializer expression\n  in the definition of a static data member is in the scope of its\n  class</strong> (6.3.7).</p>\n</blockquote>\n\n<p>So in this definition of the static data member</p>\n\n<pre><code>const A* B::a_obj = new(arr) A;\n</code></pre>\n\n<p>the unqualified name <code>arr</code> is at first searched in the scope of the class <code>B</code>. And the class B indeed declares such a name</p>\n\n<pre><code>static char arr[sizeof(A)];\n</code></pre>\n\n<p>If you want to use the name from the global namespace then use the qualified name</p>\n\n<pre><code>const A* B::a_obj = new(::arr) A;\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct A\n{\n    const static int N = 10;\n    static int n1;\n    static int n2;\n};\n\nconst int N = 20;\n\nint A::n1 = N;\nint A::n2 = ::N;\n\n\nint main() \n{\n    std::cout &lt;&lt; \"A::n1 = \" &lt;&lt; A::n1 &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"A::n2 = \" &lt;&lt; A::n2 &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>A::n1 = 10\nA::n2 = 20\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1510763637, "post_id": 47312408, "comment_id": 81576113, "body": "thank you, thought it was something like that but wasn&#39;t sure at all."}], "tags": [], "owner": {"reputation": 604, "user_id": 8908931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9a2630c9ff44937efd1bcb036b018e?s=128&d=identicon&r=PG&f=1", "display_name": "OriBS", "link": "https://stackoverflow.com/users/8908931/oribs"}, "is_accepted": false, "score": 1, "last_activity_date": 1510763190, "last_edit_date": 1510763190, "creation_date": 1510762851, "answer_id": 47312408, "question_id": 47311823, "link": "https://stackoverflow.com/questions/47311823/static-variable-shadowing-global/47312408#47312408", "title": "Static variable shadowing global", "body": "<p>The reason arr is attribute to the class B and not the global scope is due to unqualified name lookup rules.</p>\n\n<p>Specifically: </p>\n\n<blockquote>\n  <p>Static data member definition For a name used in the definition of a\n  static data member, lookup proceeds the same way as for a name used in\n  the definition of a member function. </p>\n</blockquote>\n\n<p>Meaning:</p>\n\n<pre><code>struct X {\n    static int x;\n    static const int n = 1; // found 1st\n};\nint n = 2; // found 2nd.\nint X::x = n; // finds X::n, sets X::x to 1, not 2\n</code></pre>\n\n<p>If you are intrested you can see more information here:\n<a href=\"http://en.cppreference.com/w/cpp/language/unqualified_lookup\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/unqualified_lookup</a></p>\n\n<p>As people suggested to get what you want just use:</p>\n\n<pre><code>const A* B::a_obj = new(::arr) A;\n</code></pre>\n"}], "owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 47312173, "answer_count": 2, "score": 3, "last_activity_date": 1510763190, "creation_date": 1510761213, "last_edit_date": 1510762757, "question_id": 47311823, "link": "https://stackoverflow.com/questions/47311823/static-variable-shadowing-global", "title": "Static variable shadowing global", "body": "<p>I am trying to create an object using <code>placement new</code> (I know to use smart pointers, this is just to learn). My code is as follows:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\n\nusing namespace std; // please excuse this\n\n// if you change like 19 to arr1 (or any other var name) instead of arr and line 40 to arr1 then it works\n\nstruct A\n{\n    int in = 999;\n    A()\n    {cout &lt;&lt; \"A ctor\\n\";}\n    ~A()\n    {cout &lt;&lt; \"A dtor\\n\";}\n};\n\nchar arr[sizeof(A)];\n\nclass B\n{\n    public:\n    static char arr[sizeof(A)];\n\n    const static A* a_obj;\n\n    B()\n    {\n        cout &lt;&lt; \"B ctor\\n\";\n        //cout &lt;&lt; (a_obj-&gt;in) &lt;&lt; endl;\n    }\n    ~B()\n    {\n        cout &lt;&lt; \"B dtor\\n\";\n    }\n};\n\n\n\nconst A* B::a_obj = new(arr) A;\n\n\nint main()\n{\n    B g;\n}\n</code></pre>\n\n<p>I have created a <code>global array</code> named arr and another <code>array</code> named <code>arr</code>in <code>B</code>. It seems like when I do my <code>placement new</code> the <code>arr</code> being used is from the class as I get what I think are linker errors.</p>\n\n<p>Why is this happening? why isn't the <code>global arr</code> being used? If i change the <code>placement new</code> to use my renamed <code>global array</code> it works. I think it has to do something with <code>lookups</code> but I don't have a concrete answer.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 2, "creation_date": 1510761148, "post_id": 47311757, "comment_id": 81574262, "body": "A minimal example would be sweet."}, {"owner": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1510761519, "post_id": 47311757, "comment_id": 81574573, "body": "@gsamaras Added simplified implementation of mix function"}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 8945252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd86e72a7d12c9b1a15e47da7e864bf2?s=128&d=identicon&r=PG&f=1", "display_name": "Light", "link": "https://stackoverflow.com/users/8945252/light"}, "is_accepted": false, "score": 0, "last_activity_date": 1510761537, "creation_date": 1510761537, "answer_id": 47311950, "question_id": 47311757, "link": "https://stackoverflow.com/questions/47311757/no-matching-function-on-heap/47311950#47311950", "title": "No matching function on heap", "body": "<p>In the heap one, you are giving pointer to a function that expects reference, you have to derefence them.</p>\n"}, {"comments": [{"owner": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510762108, "post_id": 47312052, "comment_id": 81575018, "body": "After changing it I got error: &#39;class Sequence&lt;int, std::basic_string&lt;char&gt; &gt;&#39; has no member named &#39;sth3&#39;| so I think it&#39;s not the case?"}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510762176, "post_id": 47312052, "comment_id": 81575075, "body": "Your comment doesn&#39;t make any sense!"}, {"owner": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510762369, "post_id": 47312052, "comment_id": 81575207, "body": "I mean, after doing <code>*sth3 = sth3-&gt;mix(*sth1,*sth2)</code> I get <code>class Sequence&lt;int, std::basic_string&lt;char&gt; &gt;&#39; has no member named &#39;sth3</code> error instead of no matching function error."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510762458, "post_id": 47312052, "comment_id": 81575272, "body": "I understood that part, but your comment doesn&#39;t make any sense when taking into consideration the code that you have provided. So I&#39;m assuming that a part of your code is missing, hence your comment will not make any sense until you provide this missing piece of code."}, {"owner": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510762900, "post_id": 47312052, "comment_id": 81575563, "body": "I&#39;ve added the missing line, maybe it changes something. The rest of the code seems to be the same. I think that&#39;s all. What part of code can I miss?"}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510763002, "post_id": 47312052, "comment_id": 81575626, "body": "I don&#39;t see how any of the occurrences of <code>sth3</code> in your code could lead to this compilation error."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510763053, "post_id": 47312052, "comment_id": 81575656, "body": "The only plausible explanation that I can think of is that you have removed the line <code>Sequence&lt;int,string&gt; *sth3 = new Sequence&lt;int,string&gt;();</code>."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510763103, "post_id": 47312052, "comment_id": 81575689, "body": "So with no local variable <code>sth3</code> declared, the compiler is left to assume that it is a member of your class."}, {"owner": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510763204, "post_id": 47312052, "comment_id": 81575768, "body": "In my main() I have only 3 lines with sth3 <code>Sequence&lt;int,string&gt; *sth3 = new Sequence&lt;int,string&gt;();     *sth3 = sth3-&gt;mix(*sth1,*sth2);     sth3-&gt;Print();</code>"}, {"owner": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "edited": false, "score": 0, "creation_date": 1510763793, "post_id": 47312052, "comment_id": 81576225, "body": "It was copying error: After checking it few times I have realized that I have *sth3 -&gt; sth3-&gt;mix(...) instead of *sth3 = sth3-&gt;mix(...)"}], "tags": [], "owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "is_accepted": true, "score": 2, "last_activity_date": 1510761810, "creation_date": 1510761810, "answer_id": 47312052, "question_id": 47311757, "link": "https://stackoverflow.com/questions/47311757/no-matching-function-on-heap/47312052#47312052", "title": "No matching function on heap", "body": "<p>Change <code>sth3 = sth3-&gt;mix(sth1,sth2)</code> to <code>*sth3 = sth3-&gt;mix(*sth1,*sth2)</code>.</p>\n"}], "owner": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 47312052, "answer_count": 2, "score": 0, "last_activity_date": 1510762679, "creation_date": 1510761043, "last_edit_date": 1510762679, "question_id": 47311757, "link": "https://stackoverflow.com/questions/47311757/no-matching-function-on-heap", "title": "No matching function on heap", "body": "<p>I've created a mix method which is taking two lists by reference. Than I've created mixed list(3) to which I'm assigning elements form list 1 and 2, than I return a list 3. </p>\n\n<p>When I try to implement it it works in stack, but not heap.\nWhat can be a possible problem?</p>\n\n<p>(sth3 = sth3->mix(sth1,sth2);) - I have no matching function problem.</p>\n\n<p>Not working:</p>\n\n<pre><code>    Sequence&lt;int,string&gt; *sth1 = new Sequence&lt;int,string&gt;();\n    sth1-&gt;AddNode(1,\"n1\");\n    sth1-&gt;AddNode(2,\"n2\");\n\n    Sequence&lt;int,string&gt; *sth2 = new Sequence&lt;int,string&gt;();\n    sth2-&gt;AddNode(10,\"n1\");   \n\n    Sequence&lt;int,string&gt; *sth3 = new Sequence&lt;int,string&gt;();\n    sth3 = sth3-&gt;mix(sth1,sth2);\n    sth3-&gt;Print();\n</code></pre>\n\n<p>Working one:</p>\n\n<pre><code>    Sequence&lt;int,string&gt; st1;\n    st1.AddNode(1,\"n1\");\n\n    Sequence&lt;int,string&gt; st2;\n    st2.AddNode(10,\"n1\");\n\n    Sequence&lt;int,string&gt; st3;\n    st3 = st3.mix(st1,st2);\n    st3.Print();\n</code></pre>\n\n<p>Simplified function mix(..)</p>\n\n<pre><code>template&lt;typename key,typename info&gt;\nSequence&lt;key, info&gt; Sequence&lt;key, info&gt;::mix(const Sequence&lt;key, info&gt; &amp;s1, const Sequence&lt;key,info&gt; &amp;s2)\n{\n            Sequence&lt;key,info&gt; s;\n            Node&lt;key, info&gt; *curr1 = s1.head;\n            Node&lt;key, info&gt; *curr2 = s2.head;\n\n            while (s.count &lt; 10)\n            {\n                s.AddNode(curr1-&gt;GetId(), curr1-&gt;GetData())\n                curr1 = curr1-&gt;GetNext();\n                s.AddNode(curr2-&gt;GetId(), curr2-&gt;GetData())\n                curr2 = curr2-&gt;GetNext();\n\n                if (curr1 == NULL &amp;&amp; curr2 == NULL)\n                    break;\n\n            }\n\n    return s;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "gsl"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510761290, "post_id": 47311703, "comment_id": 81574382, "body": "<i>I noticed that the variable mesh is assigned an address,</i> -- Who assigned the address?  Or is it just an uninitialized pointer?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1510761334, "post_id": 47311703, "comment_id": 81574409, "body": "Name hiding might be surprising."}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "edited": false, "score": 0, "creation_date": 1510761632, "post_id": 47311703, "comment_id": 81574655, "body": "You talk about a method called <code>MeshBuilder</code> but you showed us other method: <code>LinearMesh</code>..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1512321"}, "reply_to_user": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "edited": false, "score": 0, "creation_date": 1510762898, "post_id": 47311703, "comment_id": 81575558, "body": "@Rama Sorry I intended to ask for the MatrixBuilder but the MeshBuilder does exactly the same thing. So thnx for whoever edited the question to consistently say MeshBuilder."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1512321"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1510762952, "post_id": 47311703, "comment_id": 81575592, "body": "@Jarod42 is there a compiler flag that will warn me of name hiding?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1510765293, "post_id": 47311703, "comment_id": 81577286, "body": "<code>-Wshadow</code> from <a href=\"https://stackoverflow.com/questions/911740/warning-about-hiding-member-variables\">warning-about-hiding-member-variables</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2920, "user_id": 1469714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/R5rUf.png?s=128&g=1", "display_name": "xryl669", "link": "https://stackoverflow.com/users/1469714/xryl669"}, "is_accepted": false, "score": 2, "last_activity_date": 1510761584, "creation_date": 1510761584, "answer_id": 47311963, "question_id": 47311703, "link": "https://stackoverflow.com/questions/47311703/pointer-code-smell-c/47311963#47311963", "title": "Pointer code smell C++", "body": "<p>The mesh variable in the method shadows the private's variable. \nIf you use the private variable directly, then you avoid declaring a temporary, but in practice, it does not change much.</p>\n\n<p>However, if the interface of the class is to be used in multithreaded contexts, then changing the private variable directly will make it visible to any other thread at the <em>allocation</em> time, so if the <code>...</code> section in the code above does some sort of setup of the vector, it means other thread might see or use an invalid (not constructed) variable.\nIn that case, you should use a temporary (like in your initial code) and protect the assignment <code>mesh = MeshBuilder(...)</code> with either a mutex or an atomic operation (like CAS, or pointer exchange).</p>\n\n<p>Also, in all cases, if you want to write safe code, you should also consider what is going to happen is an exception is thrown in the <code>...</code> part of the code.\nSetting the private variable directly, you might have a chance to clean the allocation (in the destructor of your class), else you'll get a memory leak since a pointer does not clean the allocation by itself. </p>\n\n<p>If you want a really safe code that's working in all possible conditions, you should use a smart pointer in place of the temporary (for exception safe code), a mutex to protect private variable access (for multithread safe code). </p>\n"}, {"tags": [], "owner": {"reputation": 604, "user_id": 8908931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9a2630c9ff44937efd1bcb036b018e?s=128&d=identicon&r=PG&f=1", "display_name": "OriBS", "link": "https://stackoverflow.com/users/8908931/oribs"}, "is_accepted": false, "score": 2, "last_activity_date": 1510761599, "creation_date": 1510761599, "answer_id": 47311969, "question_id": 47311703, "link": "https://stackoverflow.com/questions/47311703/pointer-code-smell-c/47311969#47311969", "title": "Pointer code smell C++", "body": "<p>Simple answer is no, in your current code, you are leaking a resource.\nThe problem is <code>gsl_vector_alloc</code> does not return a value, but indeed an address, which point to a struct that contain the value you except to see. In this context, <code>gsl_vector_alloc</code> is behaving similar to using <code>new</code>, as it allocating a vector struct, and initializing it.</p>\n\n<p>The function <code>gsl_vector_alloc</code>, as it name suggest allocate a vector. This mean you need to free it with <code>gsl_vector_free</code> before you are overriding it.\nAlso allocation can fail, in such a case <code>gsl_vector_alloc</code> will return <code>NULL</code> and you will have to check for it, before using mesh.</p>\n\n<p>Side note: In the function you are providing you call your local variable mesh, which has the same name as a private member, this is a bad practice as the local variable will hide the private member.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1512321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556596027, "creation_date": 1510760894, "last_edit_date": 1556596027, "question_id": 47311703, "link": "https://stackoverflow.com/questions/47311703/pointer-code-smell-c", "title": "Pointer code smell C++", "body": "<p>I'm using the gsl library in C++. I have declared a gsl_vector pointer mesh as a private member of the class. </p>\n\n<pre><code>private:\n    gsl_vector * mesh;\n</code></pre>\n\n<p>I also have a method, MeshBuilder, that declares a gsl_vector, pointer mesh (over-riding the original mesh variable) and returns mesh. </p>\n\n<pre><code>gsl_vector * ThinFilm::LinearMesh(...){\n    gsl_vector * mesh = gsl_vector_alloc(numberofcells);\n    ...\n    return mesh;\n}\n</code></pre>\n\n<p>I then assign the result of the method to the variable mesh as:</p>\n\n<pre><code>mesh = MeshBuilder(...);\n</code></pre>\n\n<p>It compiles and runs just fine (no warnings either, with -Wall). Stepping through the program I noticed that the variable mesh is assigned an address, and then the MeshBuilder overwrites that. Which is exactly what I programmed to do. </p>\n\n<p>But is it good practice? After all, shouldn't I not assign a value to the pointer address? </p>\n\n<p>Shouldn't I instead not declare a the mesh pointer in the MeshBuilder method and therefore directly use the pointer declared in the private section of the class?  </p>\n\n<p>I'm guessing the only reason this works is because the address value I'm assigning to mesh is in fact valid having been declared. </p>\n"}, {"tags": ["c++", "syntax", "dry"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 5, "creation_date": 1510760974, "post_id": 47311702, "comment_id": 81574123, "body": "Because the standard says so."}, {"owner": {"reputation": 616, "user_id": 6668238, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f74f0fac244cce3435409dd57c88404f?s=128&d=identicon&r=PG", "display_name": "Kamil Koczurek", "link": "https://stackoverflow.com/users/6668238/kamil-koczurek"}, "edited": false, "score": 2, "creation_date": 1510760993, "post_id": 47311702, "comment_id": 81574141, "body": "@manni66 Seriously? It&#39;s quite clear that the question is what&#39;s the reasoning that led to putting such a thing in the standard."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 616, "user_id": 6668238, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f74f0fac244cce3435409dd57c88404f?s=128&d=identicon&r=PG", "display_name": "Kamil Koczurek", "link": "https://stackoverflow.com/users/6668238/kamil-koczurek"}, "edited": false, "score": 5, "creation_date": 1510761110, "post_id": 47311702, "comment_id": 81574238, "body": "@KamilKoczurek Write an email to Bjarne then."}, {"owner": {"reputation": 1984, "user_id": 638445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1af75f7c77e2a4962fd908d311f0f0c?s=128&d=identicon&r=PG", "display_name": "Matt Chambers", "link": "https://stackoverflow.com/users/638445/matt-chambers"}, "edited": false, "score": 0, "creation_date": 1510761136, "post_id": 47311702, "comment_id": 81574257, "body": "Obviously the question is not very practical, but it may be of interest to some. Feel free to ignore it."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1510761187, "post_id": 47311702, "comment_id": 81574303, "body": "It&#39;s been a long time, but Brian was asked this at Oxford some 20 years ago."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1510761209, "post_id": 47311702, "comment_id": 81574321, "body": "@BaummitAugen That would apply to most c++03 language questions. It could be that people other than the creator of the language know why language decisions were taken."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1510761347, "post_id": 47311702, "comment_id": 81574420, "body": "@juanchopanza But usually questions like this just lead to a bunch of guesswork and speculation in the answers. I think they are not useful."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1510761434, "post_id": 47311702, "comment_id": 81574497, "body": "@BaummitAugen That is on the people who decide to answer with speculation. They aren&#39;t forced to answer if they don&#39;t know the facts."}], "answers": [{"comments": [{"owner": {"reputation": 1984, "user_id": 638445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1af75f7c77e2a4962fd908d311f0f0c?s=128&d=identicon&r=PG", "display_name": "Matt Chambers", "link": "https://stackoverflow.com/users/638445/matt-chambers"}, "edited": false, "score": 0, "creation_date": 1510761458, "post_id": 47311789, "comment_id": 81574515, "body": "This is a good reason. The class name makes itself a reserved word, but these abbreviations would take more potential names away. Although considering the standard rules (guidelines?) about who can and can&#39;t use leading underscores, 2/3 extra keywords seems inconsequential."}, {"owner": {"reputation": 1104, "user_id": 7296908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523fdee63293ed32d8b695c146a9c35c?s=128&d=identicon&r=PG&f=1", "display_name": "negacao", "link": "https://stackoverflow.com/users/7296908/negacao"}, "edited": false, "score": 0, "creation_date": 1510762042, "post_id": 47311789, "comment_id": 81574963, "body": "Mind editing so I can undo an accidental downvote?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 1104, "user_id": 7296908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523fdee63293ed32d8b695c146a9c35c?s=128&d=identicon&r=PG&f=1", "display_name": "negacao", "link": "https://stackoverflow.com/users/7296908/negacao"}, "edited": false, "score": 1, "creation_date": 1510762108, "post_id": 47311789, "comment_id": 81575017, "body": "@negacao: Done ;-)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1510763123, "post_id": 47311789, "comment_id": 81575706, "body": "Using <code>~</code> is more than sensible. It&#39;s a fantastic pun. I recall reading that Bjarne chose to prefix the destructor with the negation operator, because the destructors job is to negate the work of the constructor. I&#39;ll see if I can find the original."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 1984, "user_id": 638445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1af75f7c77e2a4962fd908d311f0f0c?s=128&d=identicon&r=PG", "display_name": "Matt Chambers", "link": "https://stackoverflow.com/users/638445/matt-chambers"}, "edited": false, "score": 0, "creation_date": 1510765016, "post_id": 47311789, "comment_id": 81577098, "body": "@MattChambers -- the class name is not a reserved word; it&#39;s an identifier."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1510763390, "last_edit_date": 1510763390, "creation_date": 1510761136, "answer_id": 47311789, "question_id": 47311702, "link": "https://stackoverflow.com/questions/47311702/why-does-c-use-the-name-of-the-class-for-the-ctor-dtor/47311789#47311789", "title": "Why does C++ use the name of the class for the ctor/dtor?", "body": "<p>It comes from the evolution of C++ as being \"C with classes\".</p>\n\n<p>The C and C++ language committees (ISO these days) are always reluctant to introduce new keywords as doing that can break a lot of code. <code>ctor</code> and <code>dtor</code> would have been a new keywords. Note that <code>cctor</code> would not be additionally required since C++ supports function overloading; even if the very initial drafts did not.</p>\n\n<p>Furthermore, being able to name a member function to be the same as the name of the class would be an exercise in obfuscation! Reserving it for construction and destruction therefore makes sense in this context.</p>\n\n<p>Using the name of the class as the constructor with a <code>~</code> for the destructor was a sensible choice at the time. It still is, in my opinion at least.</p>\n"}], "owner": {"reputation": 1984, "user_id": 638445, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1af75f7c77e2a4962fd908d311f0f0c?s=128&d=identicon&r=PG", "display_name": "Matt Chambers", "link": "https://stackoverflow.com/users/638445/matt-chambers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "closed_date": 1510766212, "accepted_answer_id": 47311789, "answer_count": 1, "score": -2, "last_activity_date": 1510763390, "creation_date": 1510760892, "question_id": 47311702, "link": "https://stackoverflow.com/questions/47311702/why-does-c-use-the-name-of-the-class-for-the-ctor-dtor", "closed_reason": "Opinion-based", "title": "Why does C++ use the name of the class for the ctor/dtor?", "body": "<p>One thing that occasionally irks me about C++ is the repetition of defining constructors. This is especially true when defining the ctors in a separate cpp file. When we refer to them generally, we usually say \"constructor\", \"destructor\", \"copy constructor\", or abbreviate them as \"ctor\", \"dtor\", and \"cctor\". Even some C++ compilers abbreviate them like that. So why doesn't the language use that? Isn't:</p>\n\n<pre><code>class SomeLongSelfDocumentingClassName\n{\n   ctor(int a, string b);\n   cctor(const SomeLongSelfDocumentingClassName&amp; other);\n   ~dtor();\n};\n\nSomeLongSelfDocumentingClassName::ctor(int a, string b) { /* ... */ }\nSomeLongSelfDocumentingClassName::cctor(const SomeLongSelfDocumentingClassName&amp; other) { /* ... */ }\nSomeLongSelfDocumentingClassName::dtor(int a, string b) { /* ... */ }\n</code></pre>\n\n<p>easier to read than:</p>\n\n<pre><code>class SomeLongSelfDocumentingClassName\n{\n   SomeLongSelfDocumentingClassName(int a, string b);\n   SomeLongSelfDocumentingClassName(const SomeLongSelfDocumentingClassName&amp; other);\n   ~SomeLongSelfDocumentingClassName();\n};\n\nSomeLongSelfDocumentingClassName::SomeLongSelfDocumentingClassName(int a, string b) { /* ... */ }\nSomeLongSelfDocumentingClassName::SomeLongSelfDocumentingClassName(const SomeLongSelfDocumentingClassName&amp; other) { /* ... */ }\nSomeLongSelfDocumentingClassName::SomeLongSelfDocumentingClassName(int a, string b) { /* ... */ }\n</code></pre>\n\n<p>?</p>\n\n<p>Admittedly, I've been doing it the repetitive way for so long that the former block looks like nonsense at first glance. Is there a good reason Stroustrup chose the repetitious representation that just hasn't occurred to me? </p>\n"}, {"tags": ["c++", "io", "fstream", "binaryfiles"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1510760789, "post_id": 47311651, "comment_id": 81573972, "body": "<code>1024*1024*5</code> = merry hell if you have a 16 bit <code>int</code>. You have to be very careful with compile time evaluable constant expressions."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510766368, "post_id": 47311651, "comment_id": 81577917, "body": "A nice feature of using a large buffer is that the system can process the data transfer in the background.  For example, the driver could use a DMA processor to transfer the data to the hard drive.  The relieves the CPU of having to read memory, write data to the device, repeat."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510766495, "post_id": 47311651, "comment_id": 81577984, "body": "There is an overhead to each transaction.  The optimal solution is to maximize data sizes per transaction.  The overhead could be: drive spinning up, drive spinning down, locating sectors, etc."}], "answers": [{"tags": [], "owner": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "is_accepted": false, "score": 0, "last_activity_date": 1510761656, "last_edit_date": 1510761656, "creation_date": 1510761334, "answer_id": 47311871, "question_id": 47311651, "link": "https://stackoverflow.com/questions/47311651/write-a-const-pattern-to-a-file-of-specific-size/47311871#47311871", "title": "Write a const pattern to a file of specific size", "body": "<p>You can use a smaller buffer and write it several times with a <code>for</code> loop.</p>\n\n<p>If you have to write 5Mb you can do something like</p>\n\n<pre><code>#define BYTES_SIZE_5MB (5242880) // Bathsheba comment have to be considered\n#define BUFFER_SIZE (1024) // Chunk size to be written (this is an arbitrary amount)\n\nstatic char buffer[BUFFER_SIZE];\nofstream myFile (\"data.bin\", ios::out | ios::binary);\nint i, repetitions = BYTES_SIZE_5MB / BUFFER_SIZE;\nmemset(buffer, 0xff, BUFFER_SIZE);\nfor (i=0; i &lt; repetitions; ++i)\n    myFile.write(buffer, BYTES_BUFFER_SIZE_5MB);\nmyFile.close();\n</code></pre>\n\n<p><strong>Note</strong> <code>write()</code> method could become really slow, it's better to choose a bigger <em>chunk size</em> and that way you will do less <code>write</code> calls, which improves the speed of your program</p>\n"}, {"tags": [], "owner": {"reputation": 1045, "user_id": 397604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/150b0c56515f6ea3d8209745e358de2c?s=128&d=identicon&r=PG", "display_name": "Itaypk", "link": "https://stackoverflow.com/users/397604/itaypk"}, "is_accepted": false, "score": 0, "last_activity_date": 1510761556, "creation_date": 1510761556, "answer_id": 47311956, "question_id": 47311651, "link": "https://stackoverflow.com/questions/47311651/write-a-const-pattern-to-a-file-of-specific-size/47311956#47311956", "title": "Write a const pattern to a file of specific size", "body": "<p>It's not simpler, but you can use <a href=\"https://en.wikipedia.org/wiki/Memory-mapped_file\" rel=\"nofollow noreferrer\">memory-mapped files</a>. They give you exactly what you asked for - you can write the file as if you're writing to memory.</p>\n\n<p>Each (popular) operating system have different API for them, but there are a few libraries that provide portable support.</p>\n"}, {"comments": [{"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "edited": false, "score": 0, "creation_date": 1544650032, "post_id": 47312138, "comment_id": 94355861, "body": "It should be noted that you can use a compile time value for the size sent to setw, making this useful for padding out binary structures when writing them to files."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 2, "last_activity_date": 1510772221, "last_edit_date": 1510772221, "creation_date": 1510762084, "answer_id": 47312138, "question_id": 47311651, "link": "https://stackoverflow.com/questions/47311651/write-a-const-pattern-to-a-file-of-specific-size/47312138#47312138", "title": "Write a const pattern to a file of specific size", "body": "<p>I think we can do this in one line with stream manipulators:</p>\n\n<pre><code>fout &lt;&lt; std::setw(BYTES_BUFFER_SIZE_5MB - 1) &lt;&lt; std::setfill(char(0xFF)) &lt;&lt; char(0xFF);\n</code></pre>\n\n<ul>\n<li><a href=\"http://en.cppreference.com/w/cpp/io/manip/setw\" rel=\"nofollow noreferrer\"><code>setw</code></a> to set the number of bytes to write out</li>\n<li><a href=\"http://en.cppreference.com/w/cpp/io/manip/setfill\" rel=\"nofollow noreferrer\"><code>setfill</code></a> to make it write out 0xFF by default</li>\n</ul>\n\n<p>That way we don't have a buffer involved. The only risk is if you want to write a lot of bytes, you risk overflowing <code>int</code> on your call to <code>setw</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 5553670, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9b8733b4f61c586bbdec4b7ff75082ae?s=128&d=identicon&r=PG&f=1", "display_name": "talw", "link": "https://stackoverflow.com/users/5553670/talw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1510772221, "creation_date": 1510760751, "last_edit_date": 1510762555, "question_id": 47311651, "link": "https://stackoverflow.com/questions/47311651/write-a-const-pattern-to-a-file-of-specific-size", "title": "Write a const pattern to a file of specific size", "body": "<p>I need to write C++ code that will open a binary file and will write 5 MB of '1' in to it.</p>\n\n<p>Currently my code is:</p>\n\n<pre><code>#define BYTES_BUFFER_SIZE_5MB (1024*1024*5)\n\nstatic char buffer[BYTES_BUFFER_SIZE_5MB];\nmemset(buffer, 0xff, BYTES_BUFFER_SIZE_5MB);\nofstream myFile (\"data.bin\", ios::out | ios::binary);\nmyFile.write(buffer, BYTES_BUFFER_SIZE_5MB);\n</code></pre>\n\n<p>Is there a <code>memset</code>-like method for writing to a file, so I can avoid having a buffer?</p>\n"}, {"tags": ["c++", "type-conversion", "language-lawyer", "unions", "placement-new"], "comments": [{"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1510760163, "post_id": 47311250, "comment_id": 81573456, "body": "converts std::byte back to uint-type, should be irrelavant for the question"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510760274, "post_id": 47311250, "comment_id": 81573555, "body": "Interesting question, but I think this is UB, at least that&#39;s the intention of the standard, if it is not explicitly said."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510763817, "post_id": 47311250, "comment_id": 81576235, "body": "Here some references stating to use placement new: <a href=\"https://stackoverflow.com/questions/39763548/memcpy-memmove-to-a-union-member-does-this-set-the-active-member\" title=\"memcpy memmove to a union member does this set the active member\">stackoverflow.com/questions/39763548/&hellip;</a>"}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1510763857, "post_id": 47311250, "comment_id": 81576262, "body": "also: <a href=\"http://en.cppreference.com/w/cpp/language/union\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/union</a>"}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1510763879, "post_id": 47311250, "comment_id": 81576278, "body": "ans: <a href=\"http://talesofcpp.fusionfenix.com/post-17/eggs.variant---part-i\" rel=\"nofollow noreferrer\">talesofcpp.fusionfenix.com/post-17/eggs.variant---part-i</a>"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510764497, "post_id": 47311250, "comment_id": 81576699, "body": "There&#39;s nothing wrong with placement new. Where I sense some problem is that: first, you set active member to <code>a</code>. Then, with placement new, you change active member to <code>b</code>. So far, so good. Then, you read from <code>b</code>, which is not &quot;initialized&quot; yet, but you depend on the previous value of <code>a</code>. And to make the issue more difficult, you use <code>std::byte</code>, for which aliasing is allowed. You could have just used <code>reinterpret_cast&lt;std::byte *&gt;</code>, which is not UB for sure."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510764908, "post_id": 47311250, "comment_id": 81577015, "body": "Well, my thought was to active <code>b</code> (new-op) and then read it, because it is activen then, assuming, that the bits remain the same. Well, it could be a cast under the same assumption ..."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510765006, "post_id": 47311250, "comment_id": 81577089, "body": "But what if one wants to provide the opposite direction: then she has to cast to uint32_t, that violates strict aliasing, I think?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510765243, "post_id": 47311250, "comment_id": 81577249, "body": "Yes. &quot;assuming, that the bits remain&quot; - because of that part, I think that it is UB. But I&#39;m not 100% sure. On the other hand, the cast is well defined for sure. And yes, the other direction is UB in the case of cast. The general advice here is to use memcpy, if you want to be absolutely sure that you&#39;re standard conformant. Or just use unions, it works with GCC, Clang, MSVC (but remember, according to the standard, it is UB)."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510765494, "post_id": 47311250, "comment_id": 81577413, "body": "I thought, the above &quot;technique&quot; using placement-new could be a way of getting rid of UB."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510765843, "post_id": 47311250, "comment_id": 81577626, "body": "Maybe. I&#39;m not skilled enough to judge this, but my feeling is that it is still UB. I&#39;d recommend you to use memcpy, as its efficiency is the same as the union variant (using modern compilers)."}], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510769902, "post_id": 47313934, "comment_id": 81579900, "body": "As far as I know, this is UB. You write to <code>a</code> as <code>uint8_t</code>, then read from it as a different type. You can read the underlying bytes as <code>std::byte</code> or <code>(unsigned) char</code>, but you cannot write it as <code>byte&#47;char</code> then read as a different type. It works only in one way."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510783823, "post_id": 47313934, "comment_id": 81587432, "body": "In the BigEndian case I can replace the fold-expression with a memcpy, then it should be fine. In the LittleEndian case my thought was , that the fold-expression is essentially the same as a memcpy."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510784009, "post_id": 47313934, "comment_id": 81587515, "body": "What do you want to achieve in the end? Maybe your approach is not ideal, and there is a better solution..."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510784116, "post_id": 47313934, "comment_id": 81587576, "body": "The goal is the implement the same as type-punning through unions as in C99/C11 with additionally regarding the byte-order problems. maybe I&#39;m to focused on the union-approach."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510784253, "post_id": 47313934, "comment_id": 81587638, "body": "But why do you want to achieve this with type-punning? What&#39;s the reason the you choose this way? With unions? What&#39;s the big picture, why do you need this? Maybe it&#39;s better to do the endianness conversion in an <code>int</code>. For example, on x86, there&#39;s an instruction for this, which is accessible from gcc and msvc as well."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510784481, "post_id": 47313934, "comment_id": 81587761, "body": "The most basic use-case is in &#181;C applications: getting a number of bytes via some sort of interface that must be combined into a integral number or the other way round. In C99/C11 the fastest way to do this is via type-punning using unions. In C++ one safely can to the conversion using the byte-shift approach, but is is a performance burden on small say 8-Bit &#181;C."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510784651, "post_id": 47313934, "comment_id": 81587829, "body": "Which compiler do you use?"}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510784744, "post_id": 47313934, "comment_id": 81587877, "body": "Well, the solution should be compiler-agnostic. Actually I&#39;m using gcc, mainly because of concepts."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510785721, "post_id": 47313934, "comment_id": 81588314, "body": "Maybe you should ask this question :). Type punning through unions is UB in C++. But, as I&#39;ve said earlier, it does work in gcc, clang, and msvc too. And I&#39;ve read somewhere, that <i>maybe</i> the committee will relax the rules of type punning through unions, if the union has standard layout. But, to be honest, I would not go for compiler-angostic in this case. GCC has __builtin_bswap32, MSVC has its thing too, that&#39;s the most efficient way to change endianness. And if, you don&#39;t use this compilers, then your original solution can kick in."}, {"owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510785927, "post_id": 47313934, "comment_id": 81588389, "body": "One can use a solution with a combination of C11 and C++, that is use C-functions that operate on the unions to do the actual punnind. This is a bit of effort due to the lack of templates but it should work. Due to lto there should be no performance penalty."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1510827308, "post_id": 47313934, "comment_id": 81604571, "body": "It seems that I was wrong here: if you use <code>std::byte</code> or <code>(unsigned) char</code> to read or <b>modify</b>, then it is not UB. <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/reinterpret_cast</a>: &quot;Whenever an attempt is made to read or <b>modify</b> the stored value of an object of type DynamicType through a glvalue of type AliasedType, the behavior is undefined unless one of the following is true: [...] AliasedType is std::byte, char, or unsigned char&quot;"}], "tags": [], "owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "is_accepted": false, "score": 0, "last_activity_date": 1510767467, "creation_date": 1510767467, "answer_id": 47313934, "question_id": 47311250, "link": "https://stackoverflow.com/questions/47311250/explicitly-setting-active-member-in-union-in-c/47313934#47313934", "title": "Explicitly setting active member in union in C++", "body": "<p>Instead of using a union to provide both conversion direction, the following maybe a solution in C++ using two specializations for the conversion directions <code>std::byte</code> to larger integer-type or integer-type to <code>std::byte</code>.</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;cstddef&gt;\n#include &lt;utility&gt;\n#include &lt;array&gt;\n#include &lt;tuple&gt;\n#include &lt;cassert&gt;\n#include &lt;cstring&gt;\n\nnamespace std {\n    enum class endian { // since c++20\n#ifdef _WIN32\n        little = 0,\n        big    = 1,\n        native = little\n#else\n        little = __ORDER_LITTLE_ENDIAN__,\n        big    = __ORDER_BIG_ENDIAN__,\n        native = __BYTE_ORDER__\n#endif\n    };\n    namespace literals {\n        constexpr byte operator\"\" _byte(unsigned long long v) { // &lt;&gt; Literal-Operator for suffix `_byte`\n            return byte{static_cast&lt;uint8_t&gt;(v)};\n        }\n    }\n}\n\ntemplate&lt;typename T&gt;\nrequires (std::is_same&lt;uint64_t, T&gt;::value || std::is_same&lt;uint32_t, T&gt;::value || std::is_same&lt;uint16_t, T&gt;::value) &amp;&amp; (sizeof(T) &gt; 1)\nstruct ByteUnion&lt;ByteToIntegral, T&gt; {\npublic:\n    template&lt;typename... B&gt;\n    requires (std::is_same&lt;B, std::byte&gt;::value || ...) &amp;&amp; (sizeof...(B) == sizeof(T))\n    explicit ByteUnion(B... vv) : ByteUnion{endian_type{}, std::index_sequence_for&lt;B...&gt;{}, vv...} {}\n\n    const T&amp; value() const {return a;}     \nprivate:\n    template&lt;size_t... II, typename... B&gt;\n    explicit ByteUnion(LittleEndian, std::index_sequence&lt;II...&gt;, B&amp;&amp;... vv) {\n        uint8_t* p = reinterpret_cast&lt;uint8_t*&gt;(&amp;a);\n        ((p[sizeof...(II) - 1 - II] = static_cast&lt;uint8_t&gt;(vv)),...);    \n    }\n    template&lt;size_t... II, typename... B&gt;\n    explicit ByteUnion(BigEndian, std::index_sequence&lt;II...&gt;, B&amp;&amp;... vv) {\n        uint8_t* p = reinterpret_cast&lt;uint8_t*&gt;(&amp;a);\n        ((p[II] = static_cast&lt;uint8_t&gt;(vv)),...);\n    }\n    T a;\n};\n\nusing namespace std::literals;\n\nint main(){\n    ByteUnion&lt;IntegralToByte, uint64_t&gt; u1{0x01020304}; // initialise and activate byte-memebers\n//    ByteUnion&lt;ByteToIntegral, uint64_t&gt; u1x{0x01020304}; // not possible\n    auto v1 = std::to_integer&lt;uint8_t&gt;(u1[0]);    \n//    u1.value(); // not possible, who access inactive member\n    assert(v1 == 4);\n\n    ByteUnion&lt;ByteToIntegral, uint32_t&gt; u2{0x01_byte, 0x02_byte, 0x03_byte, 0x04_byte}; // initialise and activate integral value member\n//    ByteUnion&lt;IntegralToByte, uint32_t&gt; u2x{0x01_byte, 0x02_byte, 0x03_byte, 0x04_byte}; // not possible\n    auto v2 = u2.value(); \n    assert(v2 == 0x01020304);\n//    u2[0];\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1510770784, "creation_date": 1510770784, "answer_id": 47314810, "question_id": 47311250, "link": "https://stackoverflow.com/questions/47311250/explicitly-setting-active-member-in-union-in-c/47314810#47314810", "title": "Explicitly setting active member in union in C++", "body": "<p>From <a href=\"http://eel.is/c++draft/dcl.init#12\" rel=\"nofollow noreferrer\">[dcl.init]/12</a>:</p>\n\n<blockquote>\n  <p>If no initializer is specified for an object, the object is default-initialized. When storage for an object with automatic or dynamic storage duration is obtained, the object has an <em>indeterminate value</em>, and if no initialization is performed for the object, that object retains an indeterminate value until that value is replaced ([expr.ass]). [...] If an indeterminate value is produced by an evaluation, the behavior is undefined except in the following cases: [...]</p>\n</blockquote>\n\n<p>In this code:</p>\n\n<pre><code>assert(v10 == 4);\n</code></pre>\n\n<p>Either the initialization of <code>v10</code> itself is undefined behavior due to not fitting any of the bullet points (I'm not entirely sure about this), or the initialization of <code>v10</code> is fine and it just is considered to have indeterminate value, at which point the ultimate comparison to <code>4</code> is undefined behavior.</p>\n\n<p>Either way, this is undefined behavior.</p>\n"}], "owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1510770784, "creation_date": 1510759704, "last_edit_date": 1510766047, "question_id": 47311250, "link": "https://stackoverflow.com/questions/47311250/explicitly-setting-active-member-in-union-in-c", "title": "Explicitly setting active member in union in C++", "body": "<p>The following code is the classical, infamous type-punning union. Similar code is legal in C99/C11 but illegal in C++, because one has to read from the inactive member.</p>\n\n<p>To activate the inactive member one has to write to it (that is not appropriate here) or to construct it via placement-new. </p>\n\n<p>The code below does exactly this: it initializes member <code>a</code> and then activates member <code>b</code> by placement-new. In case of an array of primitive types, the construction is actually a noop, and the bitvalues remain the same. </p>\n\n<p>I never saw this solution in the numerous other questions / answers to this topix, so I wonder if the code below in fact circumvents UB really.</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;cstddef&gt;\n#include &lt;utility&gt;\n#include &lt;array&gt;\n#include &lt;tuple&gt;\n#include &lt;cassert&gt;\n\nunion ByteUnion32 {\npublic:\n    explicit ByteUnion32(uint32_t v) : a{v}{\n        new (&amp;b) std::byte[sizeof(uint32_t)]; // set b active, but prevents constexpr, actually a noop\n    }\n    std::byte operator[](uint8_t i) const {\n            return b[i];\n    }\nprivate:\n    uint32_t a;\n    std::byte b[sizeof(uint32_t)];\n};\nint main(){\n    ByteUnion32 u10{0x01020304}; // initialise and activate byte-memebers\n    auto v10 = std::to_integer&lt;uint8_t&gt;(u10[0]);    \n    assert(v10 == 4);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "serial-port"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1510760091, "post_id": 47311216, "comment_id": 81573405, "body": "This isn&#39;t C but C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510760678, "post_id": 47311216, "comment_id": 81573893, "body": "This is C with cout, but not C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510760831, "post_id": 47311216, "comment_id": 81574008, "body": "<code>memset(Buffer, &#39;\\0&#39;, strlen(Buffer));</code> what will strlen(Buffer) be?"}, {"owner": {"reputation": 1, "user_id": 8899177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b37159d2b9302aa29823de8fe9e5f3a?s=128&d=identicon&r=PG&f=1", "display_name": "B&#233;la-Csaba Simon", "link": "https://stackoverflow.com/users/8899177/b%c3%a9la-csaba-simon"}, "edited": false, "score": 0, "creation_date": 1510833206, "post_id": 47311216, "comment_id": 81608540, "body": "manni66 You answered to my question with an answer! So I did not get closer to the solution."}], "owner": {"reputation": 1, "user_id": 8899177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b37159d2b9302aa29823de8fe9e5f3a?s=128&d=identicon&r=PG&f=1", "display_name": "B&#233;la-Csaba Simon", "link": "https://stackoverflow.com/users/8899177/b%c3%a9la-csaba-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510760352, "creation_date": 1510759598, "last_edit_date": 1510760352, "question_id": 47311216, "link": "https://stackoverflow.com/questions/47311216/reading-data-from-pulseoximeter-via-serial-port-in-c", "title": "Reading data from Pulseoximeter via Serial Port in C++", "body": "<p>I have a pulseoximeter and I want to read data from Serial Port. This task isn't so easy because I need to set some communications parameters. I set the baud rate, but it is not enough. I need to set the parameters from this page: <a href=\"https://www.tranzoa.net/~alex/blog/images/Communication%20protocol.pdf\" rel=\"nofollow noreferrer\">https://www.tranzoa.net/~alex/blog/images/Communication%20protocol.pdf</a>.\nHow can I set these parameters in C? This problem is implemented in python here: <a href=\"https://github.com/atbrask/CMS50Dplus\" rel=\"nofollow noreferrer\">https://github.com/atbrask/CMS50Dplus</a>. I need it in C/C++. I mention that I need it for Linux.\nNow I have a simple C++ program which is able from read ordinary data from Serial port:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;math.h&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n\n\nusing namespace std;\n\nchar Buffer[100];\nint Port_ID;\n\nint Available() {\n    int n = 0;\n    int m;\n    if ((m = ioctl(Port_ID, FIONREAD, &amp;n)) &lt; 0) {\n        cout &lt;&lt; \"ioctl failed with \" &lt;&lt; m &lt;&lt; \"\\r\\n\";\n        return -1;\n    }\n    cout &lt;&lt; \"ioctl read \" &lt;&lt; n &lt;&lt; \"\\r\\n\";\n    return n;\n}\n\nvoid Receive(){\n    char chr;\n    int i = 0;\n    memset(Buffer, '\\0', strlen(Buffer));\n    while (Available() &gt; 0){\n\n            read(Port_ID, &amp;chr, sizeof(chr));\n            Buffer[i++] = chr;\n            cout &lt;&lt; chr; \n\n    }\n}\n\nint InitSerialPort(string portname) {\n    cout &lt;&lt; \"I'm serial comm!\\r\" &lt;&lt; endl;\n\n    Port_ID = open(portname.c_str(), O_RDWR | O_NOCTTY);\n     printf(\"Open() PortID! %s Port ID %d\\r\\n\", strerror(errno), Port_ID);\n    return Port_ID;\n}\n\n\nint main(int argc, char** argv) {\n    memset(Buffer, '\\0', strlen(Buffer));\n    int i=1, n;\n    char message[50];\n    Port_ID = InitSerialPort(\"/dev/ttyPS1\");\n\n\n    while(i++){\n        Receive(); \n        if(strlen(Buffer) &gt; 0){\n            cout &lt;&lt; Buffer;\n            memset(Buffer, '\\0', strlen(Buffer));    \n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "input", "char"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 2, "creation_date": 1510759748, "post_id": 47311209, "comment_id": 81573128, "body": "Use std::string!"}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 1, "creation_date": 1510759822, "post_id": 47311209, "comment_id": 81573190, "body": "I suggest you search for your question in stack overflow itself. You&#39;ll get your answer. :)"}, {"owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510760325, "post_id": 47311209, "comment_id": 81573607, "body": "@AditiRawat, everyone uses <code>string</code> or something else which is predefined beforehand. I would like to use only <code>arrays</code> and <code>chars</code>."}, {"owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510760919, "post_id": 47311209, "comment_id": 81574078, "body": "@AditiRawat, it is pretty hard to find a decent explanation on the point. For example, it is not very clear where or not I should put a zero symbol into the array manually and so on. So, that question is not so trivial. ( :"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1510761191, "post_id": 47311209, "comment_id": 81574306, "body": "@trafalgarLaww I&#39;m not sure, but search with tag <code>c</code> may give good result. (since you do not want <code>c++</code> things). And you can always buffer all the input with dynamic allocated array."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510761773, "post_id": 47311209, "comment_id": 81574763, "body": "@trafalgarLaww never called it trivial in the first place."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510762036, "post_id": 47311209, "comment_id": 81574959, "body": "@trafalgarLaww knows the person who has down voted it!"}, {"owner": {"reputation": 1632, "user_id": 7462657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da6cde7de38cf0b6686e85193273b12f?s=128&d=identicon&r=PG&f=1", "display_name": "xander", "link": "https://stackoverflow.com/users/7462657/xander"}, "edited": false, "score": 0, "creation_date": 1510762258, "post_id": 47311209, "comment_id": 81575131, "body": "If you really want to implement it yourself, you can always do it like simple string implementation would: read input char by char and use a dynamic allocated char array to save the chars to, increasing the array if space runs out (increasing means create a new bigger char* memory and copy the old data to the new memory)."}, {"owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "reply_to_user": {"reputation": 1632, "user_id": 7462657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da6cde7de38cf0b6686e85193273b12f?s=128&d=identicon&r=PG&f=1", "display_name": "xander", "link": "https://stackoverflow.com/users/7462657/xander"}, "edited": false, "score": 0, "creation_date": 1510762325, "post_id": 47311209, "comment_id": 81575182, "body": "@xander, you can propose it as an answer."}, {"owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510762748, "post_id": 47311209, "comment_id": 81575462, "body": "@AditiRawat, never said that you called it trivial in the place before the first. ( :"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1510763905, "post_id": 47311209, "comment_id": 81576288, "body": "Please <a href=\"https://stackoverflow.com/posts/47311209/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">the code you have so far</a>.  You should include at least an outline (but preferably a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) of the code that you are having problems with, then we can try to help with the specific problem. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1510764918, "post_id": 47311209, "comment_id": 81577028, "body": "@TobySpeight, delete the question, please."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1510766771, "post_id": 47311209, "comment_id": 81578138, "body": "The fundamental issue is that an array is fixed size, and user input is not fixed size.  You can declare an array of any size, and the User will be able to overflow the array.  You&#39;ll need to limit the input to the size of the array.  The alternative is to read one character at a time."}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "edited": false, "score": 0, "creation_date": 1510759947, "post_id": 47311338, "comment_id": 81573298, "body": "I am not interested in string."}, {"owner": {"reputation": 8391, "user_id": 7896849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Q2qxc.jpg?s=128&g=1", "display_name": "Sreeram TP", "link": "https://stackoverflow.com/users/7896849/sreeram-tp"}, "reply_to_user": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "edited": false, "score": 1, "creation_date": 1510760014, "post_id": 47311338, "comment_id": 81573345, "body": "You can convert string to char* if you want to"}, {"owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "edited": false, "score": 0, "creation_date": 1510760237, "post_id": 47311338, "comment_id": 81573525, "body": "Thank you very much for the attention. But I would like to figure out how to work with chars and arrays."}, {"owner": {"reputation": 8391, "user_id": 7896849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Q2qxc.jpg?s=128&g=1", "display_name": "Sreeram TP", "link": "https://stackoverflow.com/users/7896849/sreeram-tp"}, "reply_to_user": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "edited": false, "score": 0, "creation_date": 1510760340, "post_id": 47311338, "comment_id": 81573621, "body": "Ok.! I will let you know if i could find it.!!"}], "tags": [], "owner": {"reputation": 8391, "user_id": 7896849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Q2qxc.jpg?s=128&g=1", "display_name": "Sreeram TP", "link": "https://stackoverflow.com/users/7896849/sreeram-tp"}, "is_accepted": true, "score": 0, "last_activity_date": 1510760238, "last_edit_date": 1510760238, "creation_date": 1510759929, "answer_id": 47311338, "question_id": 47311209, "link": "https://stackoverflow.com/questions/47311209/save-input-into-a-char-array-c/47311338#47311338", "title": "Save input into a char array C++", "body": "<p>You can use <code>std:string</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string s;\n    std::cin &gt;&gt; s;\n\n    const char *cstr = s.c_str();\n\n    std::cout &lt;&lt; cstr;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 4277611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b4445539e4fbddc811385e53a6d47d4?s=128&d=identicon&r=PG&f=1", "display_name": "dg.vs", "link": "https://stackoverflow.com/users/4277611/dg-vs"}, "is_accepted": false, "score": 0, "last_activity_date": 1510760181, "creation_date": 1510760181, "answer_id": 47311434, "question_id": 47311209, "link": "https://stackoverflow.com/questions/47311209/save-input-into-a-char-array-c/47311434#47311434", "title": "Save input into a char array C++", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n  std::string foo;\n  std::getline(std::cin, foo);\n\n  std::cout &lt;&lt; \"Text: [\" &lt;&lt; foo &lt;&lt; \"]\" &lt;&lt; std::endl;\n  const char* asCStr = foo.c_str();  \n\n  std::cout &lt;&lt; \"Text: [\" &lt;&lt; asCStr &lt;&lt; \"]\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>You can convert the std::string to a char pointer as shown in the second part of the code snippet.</p>\n"}, {"tags": [], "owner": {"reputation": 1779, "user_id": 5031233, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/2a71ce927c21d822e74578204225e2d8?s=128&d=identicon&r=PG&f=1", "display_name": "waas1919", "link": "https://stackoverflow.com/users/5031233/waas1919"}, "is_accepted": false, "score": 0, "last_activity_date": 1510760224, "creation_date": 1510760224, "answer_id": 47311445, "question_id": 47311209, "link": "https://stackoverflow.com/questions/47311209/save-input-into-a-char-array-c/47311445#47311445", "title": "Save input into a char array C++", "body": "<p>You can use a <code>vector</code> of <code>char</code>'s, with no fixed size.\nYou can add the <code>char</code> using <code>cin &gt;&gt;</code> and <code>push_back</code> to your <code>vector</code>.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    char myChar;\n    std::vector&lt;char&gt; myInputs = {};\n\n    while(true)\n    {\n        std::cin &gt;&gt; myChar;\n        myInputs.push_back(myChar);\n\n        for(char&amp; i: myInputs)\n        {\n            std::cout &lt;&lt; \"input:\" &lt;&lt; i &lt;&lt; std::endl;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 1, "creation_date": 1510760675, "post_id": 47311573, "comment_id": 81573889, "body": "This would work only for 5 characters..What if string length is something else?"}, {"owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510760840, "post_id": 47311573, "comment_id": 81574015, "body": "@AditiRawat, yes. That is my problem and why the solution won`t work."}, {"owner": {"reputation": 8391, "user_id": 7896849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Q2qxc.jpg?s=128&g=1", "display_name": "Sreeram TP", "link": "https://stackoverflow.com/users/7896849/sreeram-tp"}, "edited": false, "score": 0, "creation_date": 1510760960, "post_id": 47311573, "comment_id": 81574107, "body": "Why reading a character in to a string array.?"}, {"owner": {"reputation": 19, "user_id": 8692871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1e004103a621b1f4bab3137bbfec8?s=128&d=identicon&r=PG&f=1", "display_name": "EatRocks", "link": "https://stackoverflow.com/users/8692871/eatrocks"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510771350, "post_id": 47311573, "comment_id": 81580719, "body": "@AditiRawat yeah it is, but count can be changed to however many values needed"}, {"owner": {"reputation": 19, "user_id": 8692871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1e004103a621b1f4bab3137bbfec8?s=128&d=identicon&r=PG&f=1", "display_name": "EatRocks", "link": "https://stackoverflow.com/users/8692871/eatrocks"}, "reply_to_user": {"reputation": 8391, "user_id": 7896849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Q2qxc.jpg?s=128&g=1", "display_name": "Sreeram TP", "link": "https://stackoverflow.com/users/7896849/sreeram-tp"}, "edited": false, "score": 0, "creation_date": 1510771383, "post_id": 47311573, "comment_id": 81580739, "body": "@SreeramTP because the user might enter more than 1 character."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510771468, "post_id": 47311573, "comment_id": 81580775, "body": "@EatRocks the problem statement says that <i>I do not know beforehand how much input will the user provide</i> hence we do not know <code>count</code> beforehand."}, {"owner": {"reputation": 8391, "user_id": 7896849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Q2qxc.jpg?s=128&g=1", "display_name": "Sreeram TP", "link": "https://stackoverflow.com/users/7896849/sreeram-tp"}, "edited": false, "score": 0, "creation_date": 1510803173, "post_id": 47311573, "comment_id": 81593252, "body": "@EatRocks You can read the input to a <code>string</code> without knowing the length of the input. There is no necessity of a string array which is just a memory wastage.."}, {"owner": {"reputation": 19, "user_id": 8692871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1e004103a621b1f4bab3137bbfec8?s=128&d=identicon&r=PG&f=1", "display_name": "EatRocks", "link": "https://stackoverflow.com/users/8692871/eatrocks"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1510885425, "post_id": 47311573, "comment_id": 81636799, "body": "@AditiRawat oh I misinterpreted maybe use a vector because it can dynamically allocate size. Maybe even a linked list"}], "tags": [], "owner": {"reputation": 19, "user_id": 8692871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb1e004103a621b1f4bab3137bbfec8?s=128&d=identicon&r=PG&f=1", "display_name": "EatRocks", "link": "https://stackoverflow.com/users/8692871/eatrocks"}, "is_accepted": false, "score": 0, "last_activity_date": 1510760559, "creation_date": 1510760559, "answer_id": 47311573, "question_id": 47311209, "link": "https://stackoverflow.com/questions/47311209/save-input-into-a-char-array-c/47311573#47311573", "title": "Save input into a char array C++", "body": "<p>If you think the user will input more than one character definitely change it to a string array. below is how you would enter data into an array and print them out. count is the number of values that will be entered so you can change that to something more or less.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n {\n   int count = 5;\n   string data;\n   string stringArray[count];\n   for(int i = 0; i&lt;count; i++)\n   { \n     cout &lt;&lt; \"Enter a value\";\n     cin &gt;&gt; stringArray[i];\n    }\n\n    for(int i=0; I &lt; count; i++)\n    {\n     cout &lt;&lt; stringArray[i] &lt;&lt; \" \";\n     }\n      return 0;\n     }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 3714404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGbSQ.png?s=128&g=1", "display_name": "Nerdrigo", "link": "https://stackoverflow.com/users/3714404/nerdrigo"}, "is_accepted": false, "score": 0, "last_activity_date": 1510761309, "creation_date": 1510761309, "answer_id": 47311857, "question_id": 47311209, "link": "https://stackoverflow.com/questions/47311209/save-input-into-a-char-array-c/47311857#47311857", "title": "Save input into a char array C++", "body": "<p>If you are set on only using an array of <code>char</code> instead of a <code>std::string</code> or even <code>std::vector</code> (basically the same thing) you can dynamically allocate an array with <code>new[]</code> and <code>delete[]</code> (you use <code>delete[]</code> to avoid memory leaks).</p>\n\n<p>You can read more about it and find an example <a href=\"http://www.learncpp.com/cpp-tutorial/6-9a-dynamically-allocating-arrays/\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>If you don't want to open the link then go to learncpp.com and jump to lesson 6.9a. I would also suggest to read the previous lesson to understand more about dynamic memory allocation.</p>\n"}], "owner": {"reputation": 485, "user_id": 8736128, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae9a305d97c6876f453f9c3c5772734?s=128&d=identicon&r=PG&f=1", "display_name": "trafalgarLaww", "link": "https://stackoverflow.com/users/8736128/trafalgarlaww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2164, "favorite_count": 0, "closed_date": 1510764788, "accepted_answer_id": 47311338, "answer_count": 5, "score": 0, "last_activity_date": 1510761309, "creation_date": 1510759586, "last_edit_date": 1510760351, "question_id": 47311209, "link": "https://stackoverflow.com/questions/47311209/save-input-into-a-char-array-c", "closed_reason": "Needs more focus", "title": "Save input into a char array C++", "body": "<p>How can I save input into a char array C++?</p>\n\n<p>The problem I have is that I do not know beforehand how much input will the user provide.</p>\n\n<p>I would like to use only arrays and chars.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1510758256, "post_id": 47310700, "comment_id": 81571939, "body": "No, an object of type <code>Base</code> is not an object of type <code>A</code>"}, {"owner": {"reputation": 1936, "user_id": 4265714, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-GWz2zlyQ_u0/AAAAAAAAAAI/AAAAAAAADH4/GRNAzkeBFx8/photo.jpg?sz=128", "display_name": "miradham", "link": "https://stackoverflow.com/users/4265714/miradham"}, "edited": false, "score": 0, "creation_date": 1510758843, "post_id": 47310700, "comment_id": 81572373, "body": "just curious, why would you do this?"}, {"owner": {"reputation": 1678, "user_id": 1109847, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5b3e3fea46d3703692d26915260d2503?s=128&d=identicon&r=PG", "display_name": "Lefsler", "link": "https://stackoverflow.com/users/1109847/lefsler"}, "edited": false, "score": 0, "creation_date": 1510758857, "post_id": 47310700, "comment_id": 81572380, "body": "You should do the invert Base* b = new A(); and all the methods that you have that are common should be &quot;virtual&quot;. That is how you handle it, that is the reason to have a interface that specifies the contract."}, {"owner": {"reputation": 4055, "user_id": 1559666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056d49ed81998b09cfe70aebec986cc2?s=128&d=identicon&r=PG", "display_name": "tower120", "link": "https://stackoverflow.com/users/1559666/tower120"}, "reply_to_user": {"reputation": 1936, "user_id": 4265714, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-GWz2zlyQ_u0/AAAAAAAAAAI/AAAAAAAADH4/GRNAzkeBFx8/photo.jpg?sz=128", "display_name": "miradham", "link": "https://stackoverflow.com/users/4265714/miradham"}, "edited": false, "score": 0, "creation_date": 1510759182, "post_id": 47310700, "comment_id": 81572654, "body": "@miradham Wel...... I found myself in situation where I start writing Proxy object, which I could easily recreate(it have only 1 ptr). Then I need Proxy + some data...  And then I thought what a heck... :) Hard to explain in two words."}, {"owner": {"reputation": 4055, "user_id": 1559666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056d49ed81998b09cfe70aebec986cc2?s=128&d=identicon&r=PG", "display_name": "tower120", "link": "https://stackoverflow.com/users/1559666/tower120"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1510759372, "post_id": 47310700, "comment_id": 81572810, "body": "@appleapple not exactly - this is non-virtual classes."}], "answers": [{"comments": [{"owner": {"reputation": 4055, "user_id": 1559666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056d49ed81998b09cfe70aebec986cc2?s=128&d=identicon&r=PG", "display_name": "tower120", "link": "https://stackoverflow.com/users/1559666/tower120"}, "edited": false, "score": 0, "creation_date": 1510758517, "post_id": 47310772, "comment_id": 81572124, "body": "But derived classes &quot;empty&quot;, zero-sized, non-virtual <a href=\"http://coliru.stacked-crooked.com/a/ea14a7cd238064e1\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/ea14a7cd238064e1</a>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 4055, "user_id": 1559666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056d49ed81998b09cfe70aebec986cc2?s=128&d=identicon&r=PG", "display_name": "tower120", "link": "https://stackoverflow.com/users/1559666/tower120"}, "edited": false, "score": 0, "creation_date": 1510758563, "post_id": 47310772, "comment_id": 81572163, "body": "@tower120: That&#39;s UB."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 4055, "user_id": 1559666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056d49ed81998b09cfe70aebec986cc2?s=128&d=identicon&r=PG", "display_name": "tower120", "link": "https://stackoverflow.com/users/1559666/tower120"}, "edited": false, "score": 2, "creation_date": 1510758599, "post_id": 47310772, "comment_id": 81572187, "body": "@tower120 congratulations, you hit the worst kind of UB: &quot;But it works right now on ths machine on this invocation of the program!&quot; one."}, {"owner": {"reputation": 4055, "user_id": 1559666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056d49ed81998b09cfe70aebec986cc2?s=128&d=identicon&r=PG", "display_name": "tower120", "link": "https://stackoverflow.com/users/1559666/tower120"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1510758733, "post_id": 47310772, "comment_id": 81572286, "body": "@Revolver_Ocelot I actually think it will works everywhere now (it have zero offsets)... But UB is UB."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1510758363, "creation_date": 1510758363, "answer_id": 47310772, "question_id": 47310700, "link": "https://stackoverflow.com/questions/47310700/c-static-cast-downcast-validity/47310772#47310772", "title": "C++ static_cast downcast validity", "body": "<p>No.</p>\n\n<p>Not all <code>Base</code> objects are of type <code>A</code><sup>1</sup>, although the converse is true, and a <code>static_cast</code> would work in <em>that</em> direction.</p>\n\n<hr>\n\n<p><sup>1</sup>Another translation unit might have a class that inherits from <code>Base</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1510760197, "post_id": 47310910, "comment_id": 81573492, "body": "Note that adding virtual member function and performing a dynamic_cast has a performance cost."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 8, "last_activity_date": 1511440590, "last_edit_date": 1511440590, "creation_date": 1510758769, "answer_id": 47310910, "question_id": 47310700, "link": "https://stackoverflow.com/questions/47310700/c-static-cast-downcast-validity/47310910#47310910", "title": "C++ static_cast downcast validity", "body": "<p><code>static_cast</code> for performing downcast does not perform any safety checks. Since it's possible for a <code>Base&amp;</code> to be referencing an instance of <code>A</code>, the cast proceeds and since it's <em>NOT</em> actually referencing an <code>A</code>, we enter undefined behavior territory<sup>*</sup>.</p>\n\n<p>A <code>dynamic_cast</code> on the other hand is safer. It will perform a check and throw an exception in the case of reference casting, or return <code>nullptr</code> in the case of pointer casting<sup>\u2020</sup>.</p>\n\n<p>However, since your base class lacks any virtual functions, <code>dynamic_cast</code> is impossible, so you'd need to modify it with at least a virtual destructor:</p>\n\n<pre><code>class Base{\npublic:\n    int m_object;\n    virtual ~Base()=default;\n};\n</code></pre>\n\n<p>Now if we tried to cast:</p>\n\n<pre><code>A* a = dynamic_cast&lt;A*&gt;(&amp;base);\nif (a)\n    a-&gt;arggh();\nelse\n    std::cout &lt;&lt; \"null\\n\";\n</code></pre>\n\n<p>Our output would be</p>\n\n<blockquote>\n  <p>null</p>\n</blockquote>\n\n<hr>\n\n<p><sup>*</sup>Relevant standardese can be found in [expr.static.cast]:</p>\n\n<blockquote>\n  <p>[for a cast like <code>static_cast&lt;D&amp;&gt;(b)</code> where <code>b</code> is an instance of a base class for <code>D</code>], If the object of type \u201c<em>cv1</em> <code>B</code>\u201d is actually a base class subobject of an object of type <code>D</code>, the result refers to the enclosing object of type <code>D</code>. Otherwise, the behavior is undefined.</p>\n</blockquote>\n\n<p><sup>\u2020</sup>Relevant standardese at [expr.dynamic.cast]</p>\n\n<blockquote>\n  <p>The value of a failed cast to pointer type is the null pointer value of the required result type. A failed cast to reference type throws an exception of a type that would match a handler of type\n  <code>std::bad_cast</code></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 8945252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd86e72a7d12c9b1a15e47da7e864bf2?s=128&d=identicon&r=PG&f=1", "display_name": "Light", "link": "https://stackoverflow.com/users/8945252/light"}, "is_accepted": false, "score": 0, "last_activity_date": 1510758986, "creation_date": 1510758986, "answer_id": 47310990, "question_id": 47310700, "link": "https://stackoverflow.com/questions/47310700/c-static-cast-downcast-validity/47310990#47310990", "title": "C++ static_cast downcast validity", "body": "<p>Not at all.</p>\n\n<p>Let's say Base is represented in memory by this block [--] and A is [--+], here you can see that A contains a part Base (with the little '-').</p>\n\n<p>When you are creating a Base you have your [--] and then you are casting it to A which means that you are saying it's in fact [--+] BUT the memory after [--] does not correspond to [--+]</p>\n\n<p>As you may understand with this example, you can cast A to Base because [--+] contains [--] </p>\n"}], "owner": {"reputation": 4055, "user_id": 1559666, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/056d49ed81998b09cfe70aebec986cc2?s=128&d=identicon&r=PG", "display_name": "tower120", "link": "https://stackoverflow.com/users/1559666/tower120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5394, "favorite_count": 1, "closed_date": 1510772057, "accepted_answer_id": 47310910, "answer_count": 3, "score": 3, "last_activity_date": 1511440590, "creation_date": 1510758173, "question_id": 47310700, "link": "https://stackoverflow.com/questions/47310700/c-static-cast-downcast-validity", "closed_reason": "Duplicate", "title": "C++ static_cast downcast validity", "body": "<p>Is this <code>static_cast</code> downcast valid?</p>\n\n<pre><code>// non-virtual, may be non-trivially copyable\nstruct Base{\n    int m_object;\n};\n\n// Derived class have only non-virtual functions\nstruct A : Base{\n    void arggh(){\n        std::cout &lt;&lt; \"Arrghh \" &lt;&lt; m_object;\n    }\n};\n\nint main() {\n    Base base{190};\n    A&amp; a = static_cast&lt;A&amp;&gt;(base);\n    a.arggh();\n    return 0;\n}\n</code></pre>\n\n<p>I mean, CREATE base class, and then cast to derived.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b41fa256a292b145\" rel=\"nofollow noreferrer\">Live</a></p>\n"}, {"tags": ["c++", "insertion-sort"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1510758086, "post_id": 47310545, "comment_id": 81571801, "body": "<a href=\"https://stackoverflow.com/questions/24650626/how-to-implement-classic-sorting-algorithms-in-modern-c\">How to implement classic sorting algorithms in modern C++</a> and look for &quot;Insertion Sort&quot;."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1510760975, "post_id": 47310545, "comment_id": 81574124, "body": "your <code>isSorted</code> is incorrect"}, {"owner": {"reputation": 952, "user_id": 6533037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sqGPs.jpg?s=128&g=1", "display_name": "O&#39;Niel", "link": "https://stackoverflow.com/users/6533037/oniel"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1510767054, "post_id": 47310545, "comment_id": 81578307, "body": "@appleapple Why?"}, {"owner": {"reputation": 952, "user_id": 6533037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sqGPs.jpg?s=128&g=1", "display_name": "O&#39;Niel", "link": "https://stackoverflow.com/users/6533037/oniel"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510774470, "post_id": 47310545, "comment_id": 81582480, "body": "@PaulMcKenzie Those algorithms are all for normal vectors and arrays; they don&#39;t include the complication with only having vector::begin and vector::end"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510775216, "post_id": 47310545, "comment_id": 81582872, "body": "@O&#39;Niel -- I don&#39;t understand what the issue is.  Those algorithms work for any sequence container.  Did you read the article carefully?  What are the first two arguments to those functions?  Aren&#39;t they <code>begin()</code> and <code>end()</code>?"}, {"owner": {"reputation": 952, "user_id": 6533037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sqGPs.jpg?s=128&g=1", "display_name": "O&#39;Niel", "link": "https://stackoverflow.com/users/6533037/oniel"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510775359, "post_id": 47310545, "comment_id": 81582948, "body": "@PaulMcKenzie I can&#39;t do arr[index]; I can&#39;t ask any index in my code, look, I only have ::begin and end::, I don&#39;t give my vector in any parameter"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510775618, "post_id": 47310545, "comment_id": 81583086, "body": "@O&#39;Niel -- Please look again.  <i>The first two parameters of <code>insertion_sort</code> are the being() and end() iterators</i>.  No different than the code you have now.  If you need to be convinced, <a href=\"https://www.ideone.com/p8eTDe\" rel=\"nofollow noreferrer\">here is your code using insertion_sort</a>"}, {"owner": {"reputation": 952, "user_id": 6533037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sqGPs.jpg?s=128&g=1", "display_name": "O&#39;Niel", "link": "https://stackoverflow.com/users/6533037/oniel"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510776927, "post_id": 47310545, "comment_id": 81583744, "body": "@PaulMcKenzie But that makes use of built in algorithms. It&#39;s for learning purposes so I want to do it myself"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510777039, "post_id": 47310545, "comment_id": 81583814, "body": "@O&#39;Niel -- Also, most algorithms are written to take iterators, not entire containers.  That same <code>insertion_sort</code> would work for a <code>std::deque</code> and any other sequence container that has forward iterators.  <a href=\"https://www.ideone.com/LahH0A\" rel=\"nofollow noreferrer\">Same code using std::deque</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510777125, "post_id": 47310545, "comment_id": 81583872, "body": "So implement <code>lower_bound</code> and <code>rotate</code>."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1510797508, "post_id": 47310545, "comment_id": 81591774, "body": "@O&#39;Niel It fails for <code>0 3 2</code>"}], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 5717066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zXUcs.jpg?s=128&g=1", "display_name": "Matteo Ugolotti", "link": "https://stackoverflow.com/users/5717066/matteo-ugolotti"}, "is_accepted": false, "score": 0, "last_activity_date": 1510785521, "creation_date": 1510785521, "answer_id": 47318539, "question_id": 47310545, "link": "https://stackoverflow.com/questions/47310545/insertion-sort-on-vector/47318539#47318539", "title": "Insertion sort on vector", "body": "<p>Just a few notes.\nFirst, as @appleapple suggested, your implementation of isSorted is incorrect, because you are comparing only the first element with each other element of the array. (i.e. if the first element is smaller then all the others, you consider the array as sorted).</p>\n\n<p>At line 19</p>\n\n<p>int *pointer;</p>\n\n<p>this pointer is not initialized, and would be better to initialize it pointing it to some element of the array.</p>\n\n<p>At line 23</p>\n\n<p>*pointer = *it;</p>\n\n<p>Here you are assigning the value pointed to by it to the address pointed to by pointer. However, this means that if pointer was uninitialized, you may crash the application. If it was initialized, you'll override the value of the array pointed to by pointer.</p>\n\n<p>I guess what you are trying to do is to have pointer point at the same address as the iterator.</p>\n\n<p>In that case you can replace the line with </p>\n\n<p>pointer = &amp;(*it);</p>\n\n<p>Finally, I think you are missing one loop, since every time you loop you take the global minimum as the current minimum, while you should slide forward in the vector at each new minimum.</p>\n\n<p>The problem is at the line</p>\n\n<p>int smallest = *x;</p>\n\n<p>You should have another loop between the while and this line, so that at each loop, you can set the smallest to the first non-sorted element, instead of the first element of the array.</p>\n"}], "owner": {"reputation": 952, "user_id": 6533037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sqGPs.jpg?s=128&g=1", "display_name": "O&#39;Niel", "link": "https://stackoverflow.com/users/6533037/oniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 685, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512280630, "creation_date": 1510757709, "question_id": 47310545, "link": "https://stackoverflow.com/questions/47310545/insertion-sort-on-vector", "title": "Insertion sort on vector", "body": "<p>I want to do insertion sort on a vector using vector::begin and vector::end.\nThis is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n//Checking if vector is sorted\nbool isSorted(vector&lt;int&gt;::iterator x, vector&lt;int&gt;::iterator y) {\n    for (vector&lt;int&gt;::iterator it = x; it != y; ++it) {\n        if (*x &gt; *it) return false;\n    }\n\n    return true;\n}\n\n//Doing insertion sort algorithm\nvoid insertionSort(vector&lt;int&gt;::iterator x, vector&lt;int&gt;::iterator y) {\n    while(!isSorted(x, y)) {\n        int smallest = *x;\n        int* pointer;\n        for (vector&lt;int&gt;::iterator it = x; it != y; ++it) {\n            if (*it &lt; smallest) {\n                smallest = *it;\n                *pointer = *it;\n            }\n        }\n\n\n        int buffer = *x;\n        *x = smallest;\n        *pointer = buffer; \n    }\n}\n\nint main() {\n    vector&lt;int&gt; list;\n    list.push_back(5);\n    list.push_back(3);\n    list.push_back(4);\n    list.push_back(0);\n    list.push_back(10);\n    list.push_back(1);\n\n    //Displaying\n    for (int i = 0; i &lt; list.size(); i++) {\n        cout &lt;&lt; list[i] &lt;&lt; endl;\n    }\n\n    insertionSort(list.begin(), list.end());\n\n    //Displaying after sort\n    cout &lt;&lt; \"\\nafter sort\" &lt;&lt; endl;\n    for (int i = 0; i &lt; list.size(); i++) {\n        cout &lt;&lt; list[i] &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>And this is the output:</p>\n\n<pre><code>5\n3\n4\n0\n10\n1\n\n after sort\n0\n3\n4\n0\n10\n1\n</code></pre>\n\n<p>Expected output of after sort: 0,0,1,3,4,10.\nThe insertion sort ain't working as expected. In the function insertionSort() I want to iterate until smallest element found, if found place that one on the first index in place.</p>\n\n<p>I guess the problem is occurs somewhere on line 28, however I can't figure out what the problem is because the pointers etc make it somewhat complex.</p>\n"}, {"tags": ["c++", "c++17", "standard-library"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 3, "creation_date": 1510758202, "post_id": 47310536, "comment_id": 81571890, "body": "Note that <code>std::disjunction</code> short-circuits."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1510758242, "post_id": 47310536, "comment_id": 81571922, "body": "@Zereges this might be an answer ;)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1510858947, "post_id": 47310536, "comment_id": 81626360, "body": "This is certainly <i>not</i> a standard library implementation..."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1510758121, "post_id": 47310629, "comment_id": 81571830, "body": "Since all <code>B</code>s might have different types, <code>std::disjunction&lt;B...&gt;</code> returns the first type whose <code>::value</code> member converts to <code>true</code>. Isn&#39;t that a bit strange? It might be useful to make a funny selector/(a)buse sfinae..."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 6, "last_activity_date": 1510757933, "creation_date": 1510757933, "answer_id": 47310629, "question_id": 47310536, "link": "https://stackoverflow.com/questions/47310536/implementation-of-stddisjunction-in-the-standard-library/47310629#47310629", "title": "Implementation of std::disjunction in the Standard Library", "body": "<p>You return <code>std::integral_constant</code>.</p>\n\n<p><code>std::disjunction</code> returns one of the given type (which might have additional member).</p>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": true, "score": 3, "last_activity_date": 1510760651, "last_edit_date": 1510760651, "creation_date": 1510759162, "answer_id": 47311054, "question_id": 47310536, "link": "https://stackoverflow.com/questions/47310536/implementation-of-stddisjunction-in-the-standard-library/47311054#47311054", "title": "Implementation of std::disjunction in the Standard Library", "body": "<p>moreover, <code>disjunction&lt;B1,...,BN&gt;</code> is required resulting in the last given type (<code>BN</code>) if all of them are falsy (see <a href=\"https://timsong-cpp.github.io/cppwp/meta.logical#10.2\" rel=\"nofollow noreferrer\">[meta.logical#10.2]</a>).</p>\n\n<p>The unary specialization <code>disjunction&lt;B1&gt;</code> implements this behaviour in the tail of the recursive sequence.</p>\n\n<p>For example, without the unary specialization, <code>disjunction&lt;B1&gt;</code> would give <code>B1</code> if <code>B1::value</code> is <code>true</code>, and <code>std::false_type</code> otherwise.</p>\n\n<hr>\n\n<blockquote>\n  <p>Since all Bs might have different types, std::disjunction returns the first type whose ::value member converts to true. Isn't that a bit strange? It might be useful to make a funny selector</p>\n</blockquote>\n\n<p>indeed, I've never used this family of traits(yet), but it seems quite a flexible abstraction: </p>\n\n<pre><code>template&lt;class T&gt;\nstruct some_condition: std::bool_constant&lt;/*whatever*/&gt;\n{\n  using payload = T;\n};\n\n// take the first T satisfying some_condition, or last T if none does\ndisjunction&lt;some_condition&lt;T&gt;...&gt;::payload\n\n// take the first T satisfying some_condition, or none\ndisjunction&lt;some_condition&lt;T&gt;...,none_type&gt;::payload\n</code></pre>\n\n<p>the only thing I hate about <em>disjunction</em> is its name ...</p>\n"}], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 47311054, "answer_count": 2, "score": 1, "last_activity_date": 1510760651, "creation_date": 1510757687, "question_id": 47310536, "link": "https://stackoverflow.com/questions/47310536/implementation-of-stddisjunction-in-the-standard-library", "title": "Implementation of std::disjunction in the Standard Library", "body": "<p>I've seen the implementation of <a href=\"http://en.cppreference.com/w/cpp/types/disjunction\" rel=\"nofollow noreferrer\"><code>std::disjunction</code></a> in the Standard Library (<a href=\"https://gist.github.com/picanumber/3794ec6e80379ff4b727fa01d4819532\" rel=\"nofollow noreferrer\">source</a>):</p>\n\n<pre><code>template&lt;class...&gt; struct disjunction : std::false_type { };\ntemplate&lt;class B1&gt; struct disjunction&lt;B1&gt; : B1 { };\ntemplate&lt;class B1, class... Bn&gt;\nstruct disjunction&lt;B1, Bn...&gt;\n    : std::conditional_t&lt;bool(B1::value), B1, disjunction&lt;Bn...&gt;&gt; { };\n</code></pre>\n\n<p>I am curious about the need to specialize <code>disjunction&lt;B1&gt;</code> as <code>B1</code>. Why is it better than my naive implementation of it?</p>\n\n<pre><code>template&lt;class...&gt;              struct or_t\n    : std::false_type {};\ntemplate&lt;class B1, class... Bn&gt; struct or_t&lt;B1, Bn...&gt;\n    : std::integral_constant&lt;bool, bool(B1::value) || bool(or_t&lt;Bn...&gt;::value)&gt; {};\n</code></pre>\n"}, {"tags": ["c++", "abstract-syntax-tree", "llvm-clang"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1510759113, "post_id": 47310488, "comment_id": 81572584, "body": "You might want to have a look at <a href=\"https://clang.llvm.org/docs/Tooling.html\" rel=\"nofollow noreferrer\">this list</a>. Also, libclang may be what you want."}, {"owner": {"reputation": 76, "user_id": 8727849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e072773ad38458733f895b6802f722?s=128&d=identicon&r=PG&f=1", "display_name": "GoldenBoyLDN", "link": "https://stackoverflow.com/users/8727849/goldenboyldn"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1511366103, "post_id": 47310488, "comment_id": 81832497, "body": "Unfortunately, I could not find a way to generate a CFG with libclang. Though, it was very useful to understand the process of parsing the source code. :)"}], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 8727849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e072773ad38458733f895b6802f722?s=128&d=identicon&r=PG&f=1", "display_name": "GoldenBoyLDN", "link": "https://stackoverflow.com/users/8727849/goldenboyldn"}, "edited": false, "score": 0, "creation_date": 1511365760, "post_id": 47437205, "comment_id": 81832260, "body": "Thanks a lot for the info.  I have also found a good presentation from a lecture: <a href=\"http://swtv.kaist.ac.kr/courses/cs492-fall17/coverage/lec8-building-Clang-analyzer.pdf\" rel=\"nofollow noreferrer\">Program Analysis with Clang</a>"}], "tags": [], "owner": {"reputation": 991, "user_id": 7472328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ddbe555b433ddd61621c5b5697f421?s=128&d=identicon&r=PG&f=1", "display_name": "Some Who Call Me Tim", "link": "https://stackoverflow.com/users/7472328/some-who-call-me-tim"}, "is_accepted": false, "score": 2, "last_activity_date": 1511361072, "creation_date": 1511361072, "answer_id": 47437205, "question_id": 47310488, "link": "https://stackoverflow.com/questions/47310488/generate-ast-from-c-source-code-using-clang/47437205#47437205", "title": "Generate AST from C source code using Clang", "body": "<p>Post that includes links to Clang AST tutorials and related posts: </p>\n\n<p><a href=\"http://variousburglarious.com/2017/01/18/getting-started-with-clang-refactoring-tools/\" rel=\"nofollow noreferrer\">http://variousburglarious.com/2017/01/18/getting-started-with-clang-refactoring-tools/</a></p>\n\n<p>Repository of Clang AST examples, mostly refactoring and analyzing using AST matchers. Nothing to do with CFG, but maybe it will help?</p>\n\n<p><a href=\"https://github.com/lanl/CoARCT\" rel=\"nofollow noreferrer\">https://github.com/lanl/CoARCT</a></p>\n"}], "owner": {"reputation": 76, "user_id": 8727849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e072773ad38458733f895b6802f722?s=128&d=identicon&r=PG&f=1", "display_name": "GoldenBoyLDN", "link": "https://stackoverflow.com/users/8727849/goldenboyldn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1544, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1511361072, "creation_date": 1510757549, "question_id": 47310488, "link": "https://stackoverflow.com/questions/47310488/generate-ast-from-c-source-code-using-clang", "title": "Generate AST from C source code using Clang", "body": "<p>As an academic project, I have to create a front-end for a static analyser. I am new to C/C++ and my main language is Java. \nInitially I have to use Clang to generate an AST for the input C program. Then I need to create the corresponding CFG where after I will do some other tasks. I am struggling to find any good examples or tutorials of how to generate an AST of a C program. Any thoughts or suggestions of how should I approach this project?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "optimization", "stdvector", "lapack", "blas"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 32, "creation_date": 1510757235, "post_id": 47310340, "comment_id": 81571118, "body": "the most efficient way would be to not do it at all. What I mean is the following: Just do what you would do with the negated vector with the negated values, eg <code>for (auto e : MyVec) { std::cout &lt;&lt; - e &lt;&lt; &quot; &quot;;}</code> instead of <code>for (auto e : MyVec) { std::cout &lt;&lt; e &lt;&lt; &quot; &quot;;}</code>"}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 9, "creation_date": 1510757334, "post_id": 47310340, "comment_id": 81571203, "body": "@tobi303 or negate it as you insert it."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 6, "creation_date": 1510757456, "post_id": 47310340, "comment_id": 81571302, "body": "As with most optimization questions, it depends on your use case. Are you writing a general purpose linear algebra library with negation? Then this is a good question. Is this for a specific algorithm you&#39;re writing? <i>Profile it</i> and see if your current code is actually a bottleneck."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 9, "creation_date": 1510757475, "post_id": 47310340, "comment_id": 81571318, "body": "For vector algebra, you probably want a different abstraction than std::vector.  Take a look at the Eigen (<a href=\"http://eigen.tuxfamily.org\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org</a>) library, where you could just say <code>-MyVec</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1510757782, "post_id": 47310340, "comment_id": 81571577, "body": "Since a <code>std::vector</code> stores its data in contiguous memory no different than an array, instead of thinking of <code>std::vector</code>, how would you optimize this if you have an array of <code>double</code> values?  update:  ok, the answer given basically answers that question."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 11, "creation_date": 1510759017, "post_id": 47310340, "comment_id": 81572508, "body": "If your vector has any significant size (= cannot be fully cached), the algorithm that you use for inversion is pretty much irrelevant, your bottleneck will be memory itself. Just a few numbers: A <code>double</code> is 8 bytes, and let&#39;s assume that your CPU can do an inversion per nanosecond. That&#39;s already 8 GB per second that first need to be read, and then need to be stored, so 16 GB per second on the memory bus. Take into account that current CPUs are faster than that when it comes to pure arithmetic instructions, and you know that the memory bus will determine your speed."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1510813126, "post_id": 47310340, "comment_id": 81596453, "body": "@cmaster: what kind of crappy CPU can only do one inversion per ns?  16GB per second doesn&#39;t saturate the memory bus in recent desktop CPUs; DDR3-1600 is about 25GB/s (in one direction).  But even with scalar instructions only, all modern x86 CPUs can do one inversion per clock cycle, so that&#39;s more like 1/3rd of a ns (on a 3GHz CPU).  Compilers easily auto-vectorize with SSE2 or AVX, so that&#39;s 2 or 4 <code>double</code>s per clock.  (Well actually gcc doesn&#39;t unroll loops at all by default, so it&#39;s more like one per 1.5 clocks front-end bottleneck <a href=\"https://godbolt.org/g/BqqDCS\" rel=\"nofollow noreferrer\">godbolt.org/g/BqqDCS</a>)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510813254, "post_id": 47310340, "comment_id": 81596506, "body": "But yes, you do fairly easily saturate memory bandwidth, even rewriting in-place (with is somewhat faster than writing to new memory because that involves separate read-for-ownership traffic unless you use NT stores.)  Still, tobi303&#39;s suggestion is by far the best: don&#39;t negate in place, fold it into the next step so it can use <code>FNMADD</code> instead of <code>FMADD</code> or <code>sub</code> instead of <code>add</code> for no extra cost."}, {"owner": {"reputation": 101, "user_id": 5330156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS3IE.png?s=128&g=1", "display_name": "flith", "link": "https://stackoverflow.com/users/5330156/flith"}, "edited": false, "score": 2, "creation_date": 1510817133, "post_id": 47310340, "comment_id": 81598318, "body": "Is it bad if I want to answer the title question with <code>Go see your doctor and get some pills</code>? :)"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1510822718, "post_id": 47310340, "comment_id": 81601282, "body": "@PeterCordes I agree with everything you said. I just didn&#39;t feel in the mood to look up any solid numbers, so I went for a ridiculously low <i>lower bound</i> to illustrate my point. Thanks for providing better numbers :-)"}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 4079970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ff70aa7cfec663212ade95168e3732?s=128&d=identicon&r=PG", "display_name": "Stefan Atev", "link": "https://stackoverflow.com/users/4079970/stefan-atev"}, "edited": false, "score": 0, "creation_date": 1510761631, "post_id": 47310475, "comment_id": 81574654, "body": "If you combine this suggestion (intirnsics) with OpenMP, you would get the fastest possible solution; note that this is entirely memory-bound for large arrays since it has very little arithmetic; non-temporal stores can also help depending on the case. Speaking of BLAS, a DAXPY may be the fastest routine anyway - again, you are limited by memory bandwidth, not arithmetic. Also, recent ebnough compilers may be able to vectorize/parallelize std::transform anyway... You have to measure / look at disassembly to know..."}, {"owner": {"reputation": 4708, "user_id": 667266, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/ejOZy.png?s=128&g=1", "display_name": "borisbn", "link": "https://stackoverflow.com/users/667266/borisbn"}, "edited": false, "score": 0, "creation_date": 1510764230, "post_id": 47310475, "comment_id": 81576510, "body": "IMHO IPP is the best option, but I think you should say, that it&#39;s not open-source or free and it&#39;s cost starts from $249. Yes, thay have free products, but only for linux and with limited functionality"}, {"owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "reply_to_user": {"reputation": 4708, "user_id": 667266, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/ejOZy.png?s=128&g=1", "display_name": "borisbn", "link": "https://stackoverflow.com/users/667266/borisbn"}, "edited": false, "score": 2, "creation_date": 1510764659, "post_id": 47310475, "comment_id": 81576814, "body": "@borisbn, there has been a free option for a while now (for all platforms and full functionality) the only difference between the paid option and the free option is that the free option just comes with no support except the intel forums for help and raising bugs"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510812265, "post_id": 47310475, "comment_id": 81596125, "body": "Negating by flipping the sign bit (with <code>xorpd</code>) is more power-efficient than calling a general-purpose function that actually multiplies.  But if you don&#39;t have access to a well-tuned loop to do the bit-flip and can&#39;t write one yourself, using a scalar * vector function is not bad for performance."}], "tags": [], "owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "is_accepted": false, "score": 16, "last_activity_date": 1510764834, "last_edit_date": 1510764834, "creation_date": 1510757516, "answer_id": 47310475, "question_id": 47310340, "link": "https://stackoverflow.com/questions/47310340/fastest-way-to-negate-a-stdvector/47310475#47310475", "title": "Fastest way to negate a std::vector", "body": "<p>Fortunately the data in <code>std::vector</code> is contiguous so you can multiply by -1 using vector intrinsics (using unaligned load/stores and special handing of the possible overflow). Or use <code>ippsMulC_64f</code>/<code>ippsMulC_64f_I</code> from intel's IPP library (you'll struggle to write something faster) which will use the largest vector registers available to your platform: <a href=\"https://software.intel.com/en-us/ipp-dev-reference-mulc\" rel=\"noreferrer\">https://software.intel.com/en-us/ipp-dev-reference-mulc</a></p>\n\n<p>Update: to clear up some confusion in the comments, the full version of Intel IPP is free (although you can pay for support) and comes on Linux, Windows and macOS.</p>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1510759057, "post_id": 47310737, "comment_id": 81572537, "body": "@PeteBecker I actually meant &quot;most simplistic&quot;. Anyhow I take your edit as a compliment ;)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1510764649, "post_id": 47310737, "comment_id": 81576810, "body": "Feel free to roll it back if it distorts your meaning."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510813724, "post_id": 47310737, "comment_id": 81596724, "body": "This is by far the best answer, especially if the vector is more than a couple SIMD vectors long.  Fold the negation into a later (or earlier step).    If you do this right so the compiler can still optimize, the next step can use <code>subpd</code> instead of <code>addpd</code>, or <code>fnmadd</code> instead of <code>fmadd</code> to do the negation for free.  This only works if it makes two versions of the whole loop, one for negated and one for not negated.  (It may need your help to do that, by using an <code>if()</code> around your whole loop if your compiler does a poor job on its own.)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510813853, "post_id": 47310737, "comment_id": 81596790, "body": "But even if it doesn&#39;t clone a loop, on x86 you negate using a SIMD <code>xorpd</code> to flip the sign bit.  So hopefully outside the loop, the compiler could set up a constant that&#39;s either <code>0</code> or <code>0x8000...</code>, and <code>xor</code> with it inside the loop (to either negate or not depending on how the constant was set up outside the loop)."}, {"owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "edited": false, "score": 0, "creation_date": 1510814339, "post_id": 47310737, "comment_id": 81596990, "body": "I had thought about this but I really don&#39;t like the performance hit of the extra branch on each access."}, {"owner": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 0, "creation_date": 1510820969, "post_id": 47310737, "comment_id": 81600212, "body": "It might be more efficient to remove the branching and instead multiply by 1 or -1 (but it probably depends how often you&#39;re switching the sign)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 1, "creation_date": 1510821610, "post_id": 47310737, "comment_id": 81600602, "body": "@Dukeling the answer was actually only meant as an academic exercise by taking the question too literally. What I would really do is what I mentioned in a comment: Not negate the vector at all. And this answer was just an attempt to back that up with some code, but imho without more information on what the vector would be used for, it is impossible to find &quot;the fastest way&quot;"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 3, "last_activity_date": 1510813296, "last_edit_date": 1510813296, "creation_date": 1510758266, "answer_id": 47310737, "question_id": 47310340, "link": "https://stackoverflow.com/questions/47310340/fastest-way-to-negate-a-stdvector/47310737#47310737", "title": "Fastest way to negate a std::vector", "body": "<p>As others have mentioned, it completely depends on your use case. Probably the simplest way would be something like this:</p>\n\n<pre><code> struct MyNegatingVect {\n     MyVect data;\n     bool negated = false;\n     void negate() { negated = !negated; }\n     // ... setter and getter need indirection ...\n     // ..for example\n     MyVect::data_type at(size_t index) { return negated ? - data.at(index) : data.at(index);\n };\n</code></pre>\n\n<p>Whether this additional indirection for each single access is worth transforming the negation into setting a single <code>bool</code> depends, as already mentioned, on your use case (actually I doubt that there is a use case where this would bring any measurable benefit).</p>\n"}, {"comments": [{"owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "edited": false, "score": 3, "creation_date": 1510766119, "post_id": 47313270, "comment_id": 81577789, "body": "There will be a processor stall on the branch and you will loose cycles based on the latency of <code>xorpd</code>. A more optimised version would typically repeat the operation several times before branching."}, {"owner": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "reply_to_user": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "edited": false, "score": 2, "creation_date": 1510770262, "post_id": 47313270, "comment_id": 81580113, "body": "@keith I doubt that is true on modern x86 CPUs. They are smart enough to predict several branches ahead and also to rename registers."}, {"owner": {"reputation": 656, "user_id": 5277022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7aa91dde8db1b879b0842a0a75ee62b?s=128&d=identicon&r=PG&f=1", "display_name": "navyblue", "link": "https://stackoverflow.com/users/5277022/navyblue"}, "edited": false, "score": 0, "creation_date": 1510770996, "post_id": 47313270, "comment_id": 81580515, "body": "I would recommend watching this <a href=\"https://www.youtube.com/watch?v=2EWejmkKlxs\" rel=\"nofollow noreferrer\">youtube.com/watch?v=2EWejmkKlxs</a> to see how the processor is not going to stall on that branch by speculatively taking the path that continues the loop instead of exiting the loop. The video is long and in this case it&#39;s the second half of the video that is relevant here but it&#39;s worth watching anyway."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "edited": false, "score": 2, "creation_date": 1510772815, "post_id": 47313270, "comment_id": 81581564, "body": "@jpa The processor may not stall, but loop unrolling is still beneficial if the processor ends up micro-op or decode limited (which it likely will be unless it is memory bound)."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 22, "creation_date": 1510773846, "post_id": 47313270, "comment_id": 81582174, "body": "This generated code is actually quite amazing given the high level nature of this C++ code."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 6, "creation_date": 1510777286, "post_id": 47313270, "comment_id": 81583964, "body": "If you switch to clang-5.0.0 on the Compiler Explorer, you&#39;ll <a href=\"https://godbolt.org/g/SAhvUj\" rel=\"nofollow noreferrer\">see</a> it unroll the loop a bit. (Be sure to change <code>cbegin</code> and <code>cend</code> to <code>begin</code> and <code>end</code>, otherwise it&#39;ll not compile)."}, {"owner": {"reputation": 5189, "user_id": 5223757, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FdOvO.png?s=128&g=1", "display_name": "wizzwizz4", "link": "https://stackoverflow.com/users/5223757/wizzwizz4"}, "reply_to_user": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "edited": false, "score": 0, "creation_date": 1510785639, "post_id": 47313270, "comment_id": 81588292, "body": "@keith If you turn on loop unrolling the compiler will decide that as the case may be."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510812788, "post_id": 47313270, "comment_id": 81596327, "body": "The code you show isn&#39;t a loop (no branch back to the top), and it&#39;s loading a <b>scalar</b> double (<code>movSd</code>).  gcc and clang do in fact make nice-ish asm if you use <code>-march=haswell</code> (to enable AVX + AVX2 and tune for Haswell), but gcc&#39;s does kinda suck (6 fused-domain uops on Haswell, in a non-unrolled loop with two loop counters and indexed addressing modes.)  On Godbolt (<a href=\"https://godbolt.org/g/BqqDCS\" rel=\"nofollow noreferrer\">godbolt.org/g/BqqDCS</a>) it&#39;s from <code>.L6</code> to the <code>jb .L6</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1510817691, "post_id": 47313270, "comment_id": 81598569, "body": "@Ruslan: Or use <code>-std=gnu++11</code> or <code>14</code> for clang, because unlike recent gcc that&#39;s not the default."}, {"owner": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "edited": false, "score": 0, "creation_date": 1510843917, "post_id": 47313270, "comment_id": 81616245, "body": "Unrolling the loop does not always help. A large number of instructions can pollute the instruction cache leading to a performance hit. It is best to leave it to the compiler to decide if the loop must be unrolled. AFAIK clang is pretty good at unrolling."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "edited": false, "score": 0, "creation_date": 1510858598, "post_id": 47313270, "comment_id": 81626174, "body": "@LakshayGarg: gcc without profile-guided optimization never unrolls, even for <i>tiny</i> loops, which is often sub-optimal when the actually are hot.  You&#39;re right that with clang the compiler usually chooses well, though."}], "tags": [], "owner": {"reputation": 1144, "user_id": 2054398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b865847749e59dde2dd3f65917bbdd?s=128&d=identicon&r=PG", "display_name": "ColdCat", "link": "https://stackoverflow.com/users/2054398/coldcat"}, "is_accepted": true, "score": 28, "last_activity_date": 1510765414, "creation_date": 1510765414, "answer_id": 47313270, "question_id": 47310340, "link": "https://stackoverflow.com/questions/47310340/fastest-way-to-negate-a-stdvector/47313270#47313270", "title": "Fastest way to negate a std::vector", "body": "<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt; \nvoid check()\n{\n    std::vector&lt;double&gt; MyVec(255);\n    std::transform(MyVec.cbegin(),MyVec.cend(),MyVec.begin(),std::negate&lt;double&gt;());\n}\n</code></pre>\n\n<p>This code on <a href=\"https://godbolt.org/\" rel=\"noreferrer\">https://godbolt.org/</a> with copile option -O3 generate nice assembly</p>\n\n<pre><code>.L3:\n[...]\n  cmp r8, 254\n  je .L4\n  movsd xmm0, QWORD PTR [rdi+2032]\n  xorpd xmm0, XMMWORD PTR .LC0[rip]\n  movsd QWORD PTR [rdi+2032], xmm0\n.L4:\n</code></pre>\n\n<p>It's difficult to imagine faster. Your code is already perfect, don't try to outsmart the compiler and use clean C++ code it works almost every times.</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510814154, "post_id": 47315393, "comment_id": 81596908, "body": "It&#39;s too bad gcc picks the worst of all worlds in that loop.  It uses indexed addressing modes instead of a pointer increment even though the load and store addresses are the same.  And it uses a separate loop counter instead of a <code>cmp</code> against an end address.  So on Haswell it&#39;s 6 fused-domain uops (<code>vxorpd</code> doesn&#39;t micro-fuse with an indexed addressing mode, but the store does), with a front-end bottleneck of one iter per 1.5 clocks.  A simple pointer-increment loop could easily be 4 uops, running one iter per 1 clock (if data is hot in L1D or maybe L2)."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510850979, "post_id": 47315393, "comment_id": 81621487, "body": "@PeterCordes - I neglected to omit the possible loop unrolling for avx / avx512. The first listing turned out to be &#39;tail&#39; handling..."}], "tags": [], "owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "is_accepted": false, "score": 3, "last_activity_date": 1510851255, "last_edit_date": 1510851255, "creation_date": 1510772834, "answer_id": 47315393, "question_id": 47310340, "link": "https://stackoverflow.com/questions/47310340/fastest-way-to-negate-a-stdvector/47315393#47315393", "title": "Fastest way to negate a std::vector", "body": "<p>First, a generic <code>negate</code> function for arithmetic type vectors as an example:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;vector&gt;\n\n...\n\ntemplate &lt;typename arithmetic_type&gt; std::vector&lt;arithmetic_type&gt; &amp;\nnegate (std::vector&lt;arithmetic_type&gt; &amp; v)\n{\n    static_assert(std::is_arithmetic&lt;arithmetic_type&gt;::value,\n        \"negate: not an arithmetic type vector\");\n\n    for (auto &amp; vi : v) vi = - vi;\n\n    // note: anticipate that a range-based for may be more amenable\n    // to loop-unrolling, vectorization, etc., due to fewer compiler\n    // template transforms, and contiguous memory / stride.\n\n    // in theory, std::transform may generate the same code, despite\n    // being less concise. very large vectors *may* possibly benefit\n    // from C++17's 'std::execution::par_unseq' policy?\n\n    return v;\n}\n</code></pre>\n\n<p>Your wish for a <em>canonical</em> unary <code>operator -</code> function is going to require a the creation of a temporary, in the form:</p>\n\n<pre><code>std::vector&lt;double&gt; operator - (const std::vector&lt;double&gt; &amp; v)\n{\n    auto ret (v); return negate(ret);\n}\n</code></pre>\n\n<p>Or generically:</p>\n\n<pre><code>template &lt;typename arithmetic_type&gt; std::vector&lt;arithmetic_type&gt;\noperator - (const std::vector&lt;arithmetic_type&gt; &amp; v)\n{\n    auto ret (v); return negate(ret);\n}\n</code></pre>\n\n<p>Do <em>not</em> be tempted to implement the operator as:</p>\n\n<pre><code>template &lt;typename arithmetic_type&gt; std::vector&lt;arithmetic_type&gt; &amp;\noperator - (std::vector&lt;arithmetic_type&gt; &amp; v)\n{\n    return negate(v);\n}\n</code></pre>\n\n<p>While <code>(- v)</code> will negate the elements and return the modified vector without the need for a temporary, it breaks mathematical conventions by effectively setting: <code>v = - v;</code> If that's your goal, then use the <code>negate</code> function. Don't break expected operator evaluation!</p>\n\n<hr>\n\n<p>clang, with avx512 enabled, generates this loop, negating an impressive 64 doubles per iteration - between pre/post length handling:</p>\n\n<pre><code>        vpbroadcastq    LCPI0_0(%rip), %zmm0\n        .p2align        4, 0x90\nLBB0_21:\n        vpxorq  -448(%rsi), %zmm0, %zmm1\n        vpxorq  -384(%rsi), %zmm0, %zmm2\n        vpxorq  -320(%rsi), %zmm0, %zmm3\n        vpxorq  -256(%rsi), %zmm0, %zmm4\n        vmovdqu64       %zmm1, -448(%rsi)\n        vmovdqu64       %zmm2, -384(%rsi)\n        vmovdqu64       %zmm3, -320(%rsi)\n        vmovdqu64       %zmm4, -256(%rsi)\n        vpxorq  -192(%rsi), %zmm0, %zmm1\n        vpxorq  -128(%rsi), %zmm0, %zmm2\n        vpxorq  -64(%rsi), %zmm0, %zmm3\n        vpxorq  (%rsi), %zmm0, %zmm4\n        vmovdqu64       %zmm1, -192(%rsi)\n        vmovdqu64       %zmm2, -128(%rsi)\n        vmovdqu64       %zmm3, -64(%rsi)\n        vmovdqu64       %zmm4, (%rsi)\n        addq    $512, %rsi              ## imm = 0x200\n        addq    $-64, %rdx\n        jne     LBB0_21\n</code></pre>\n\n<p>gcc-7.2.0 generates a similar loop, but appears to insist on indexed addressing.</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1510814307, "post_id": 47323139, "comment_id": 81596976, "body": "Why is that better than <code>std::transform</code> with <code>std::negate</code>?  It also allows an execution policty, and compiles efficiently with gcc and clang."}, {"owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510814427, "post_id": 47323139, "comment_id": 81597034, "body": "Transform has an extra iterator, which could lead to potential aliasing problems."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510814902, "post_id": 47323139, "comment_id": 81597227, "body": "Aliasing with what?  <code>double</code> can&#39;t alias with an iterator that uses integer / pointer types.  Compiler output for a function with a vector arg by reference: <a href=\"https://godbolt.org/g/mN4fYQ\" rel=\"nofollow noreferrer\">godbolt.org/g/mN4fYQ</a>.  It still optimizes fully with <code>-fno-strict-aliasing</code>, so it wasn&#39;t type-based aliasing rules that let the compiler detect it, it&#39;s that the iterator is private local variable.  It&#39;s easy for the compiler to prove that nothing else has a pointer to the internal iterator."}], "tags": [], "owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "is_accepted": false, "score": 0, "last_activity_date": 1510814152, "creation_date": 1510814152, "answer_id": 47323139, "question_id": 47310340, "link": "https://stackoverflow.com/questions/47310340/fastest-way-to-negate-a-stdvector/47323139#47323139", "title": "Fastest way to negate a std::vector", "body": "<p>Use for_each</p>\n\n<pre><code>std::for_each(MyVec.begin(), MyVec.end(), [](double&amp; val) { val = -val });\n</code></pre>\n\n<p>or C++17 parallel</p>\n\n<pre><code>std::for_each(std::execution::par_unseq, MyVec.begin(), MyVec.end(), [](double&amp; val) { val = -val });\n</code></pre>\n"}], "owner": {"reputation": 781, "user_id": 8831115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e576be70be41fd87263dd39353077c43?s=128&d=identicon&r=PG&f=1", "display_name": "enanone", "link": "https://stackoverflow.com/users/8831115/enanone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4491, "favorite_count": 7, "accepted_answer_id": 47313270, "answer_count": 5, "score": 27, "last_activity_date": 1510851255, "creation_date": 1510757107, "last_edit_date": 1510817529, "question_id": 47310340, "link": "https://stackoverflow.com/questions/47310340/fastest-way-to-negate-a-stdvector", "title": "Fastest way to negate a std::vector", "body": "<p>Assume I have a std::vector of double, namely</p>\n\n<pre><code>std::vector&lt;double&gt; MyVec(N);\n</code></pre>\n\n<p>Where <code>N</code> is so big that performance matters. Now assume that <code>MyVec</code> is a nontrivial vector (i.e. it is not a vector of zeros, but has been modified by some routine). Now, I need the <strong>negated</strong> version of the vector: I need <code>-MyVec</code>.</p>\n\n<p>So far, I have been implementing it via</p>\n\n<pre><code>std::transform(MyVec.cbegin(),MyVec.cend(),MyVec.begin(),std::negate&lt;double&gt;());\n</code></pre>\n\n<p>But, really, I do not know if this is something sensible or it is just super na\u00efve from my side.</p>\n\n<p>Am I doing it correctly? Or std::transform is just a super slow routine in this case?</p>\n\n<p>PS: I am using BLAS and LAPACK libraries all the time, but I have not found anything that matches this particular need. However, if there exists such a function in BLAS/LAPACK which is faster than std::transform, I would be glad to know.</p>\n"}, {"tags": ["c++", "pthreads", "dji-sdk"], "comments": [{"owner": {"reputation": 613, "user_id": 1306907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QTPnd.jpg?s=128&g=1", "display_name": "ScoobyDrew18", "link": "https://stackoverflow.com/users/1306907/scoobydrew18"}, "edited": false, "score": 0, "creation_date": 1510757388, "post_id": 47310302, "comment_id": 81571244, "body": "Welcome to Stack Overflow!  Questions that show some effort to solve the issue tend to receive a better response here.  You should read this article before asking a question: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 896, "user_id": 4785440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQYO3.jpg?s=128&g=1", "display_name": "Arnaud Thiercelin", "link": "https://stackoverflow.com/users/4785440/arnaud-thiercelin"}, "is_accepted": true, "score": 0, "last_activity_date": 1510775936, "creation_date": 1510775936, "answer_id": 47316218, "question_id": 47310302, "link": "https://stackoverflow.com/questions/47310302/dji-sdk-3-3-create-multiple-threads/47316218#47316218", "title": "DJI SDK 3.3 - Create multiple threads", "body": "<p>You're not gated to use the posix thread apis.\nYou can easily use the <a href=\"http://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\">std::thread</a>.</p>\n\n<p>Here is a small runloop-style sample.</p>\n\n<pre><code>void\nRunLoop::start()\n{\n  this-&gt;asyncThread = std::thread(&amp;RunLoop::asyncStart, this);\n}\n\nvoid\nRunLoop::asyncStart()\n{\n  while (this-&gt;shouldRun)\n  {\n    // Timer's executions\n    this-&gt;evaluateTimers();\n\n    std::this_thread::sleep_for(std::chrono::milliseconds(10));\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7927280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba089c25c9c64a63b02f334dcbe0c76c?s=128&d=identicon&r=PG&f=1", "display_name": "mpetitjean", "link": "https://stackoverflow.com/users/7927280/mpetitjean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 47316218, "answer_count": 1, "score": 0, "last_activity_date": 1510775936, "creation_date": 1510756991, "question_id": 47310302, "link": "https://stackoverflow.com/questions/47310302/dji-sdk-3-3-create-multiple-threads", "title": "DJI SDK 3.3 - Create multiple threads", "body": "<p>I want to create threads using the DJI OSDK 3.3. I located the definition of PosixThread in the file <code>posix_thread.cpp</code>, but since I am rather new to C++, could anyone provide me with some hints/links on how to properly create a custom thread ?</p>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1510756956, "post_id": 47310203, "comment_id": 81570878, "body": "<code>using std::string;</code>,  <code>using std::unique_ptr;</code>,  <code>using namespace std;</code>,  <code>using std::list;</code> -- why?"}, {"owner": {"reputation": 15, "user_id": 6281112, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208119034707810/picture?type=large", "display_name": "Jake Wells", "link": "https://stackoverflow.com/users/6281112/jake-wells"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1510757326, "post_id": 47310203, "comment_id": 81571197, "body": "@Quentin I copied and pasted them over from another class in desperate attempt that it might fix it. I have just removed these and I still have the same error. I&#39;m a huge noob at programming, do you have any idea what the problem may be?"}], "owner": {"reputation": 15, "user_id": 6281112, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208119034707810/picture?type=large", "display_name": "Jake Wells", "link": "https://stackoverflow.com/users/6281112/jake-wells"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1510756758, "answer_count": 0, "score": 0, "last_activity_date": 1510756703, "creation_date": 1510756703, "question_id": 47310203, "link": "https://stackoverflow.com/questions/47310203/undefined-reference-to-stateinventoryabicxx11", "closed_reason": "Duplicate", "title": "undefined reference to `State::Inventory[abi:cxx11]&#39;", "body": "<p>I know this question has been asked before but I can't figure out what's wrong with my program.</p>\n\n<p>I have a class and a header file:</p>\n\n<blockquote>\n  <p>State.cpp</p>\n</blockquote>\n\n<pre><code>    #include \"State.h\"\n#include \"GameObject.h\"\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;memory&gt;\n#include &lt;iterator&gt;\n#include &lt;vector&gt;\n#include \"wordwrap.h\"\n\n\n\n\nusing std::string;\nusing std::unique_ptr;\nusing namespace std;\nusing std::list;\n\n/**\n * Current state of the game.\n */\n\n/**\n * Display the description of the room the player is in. */\n\nvoid State::announceLoc() const {\n    this-&gt;currentRoom-&gt;describe();\n}\n\n/**\n * Constructor.\n * @param startRoom Pointer to the room to start in.\n */\nState::State(const Room *startRoom) : currentRoom(startRoom) {};\n\n/**\n * Move to a specified room and print its description.\n * @param target Pointer to the room to move to.\n */\nvoid State::goTo(const Room *target) {\n    this-&gt;currentRoom = target;\n    this-&gt;announceLoc();\n}\n\nGameObject State::addToInv(GameObject* gameobject) {\n    Inventory.push_back(gameobject);\n}\n\nvoid State::dispInv(){\n\n    for (auto test : Inventory){\n        wrapOut(test-&gt;getName());\n        wrapEndPara();\n    }\n}\n\n\n/**\n * Return a pointer to the current room.\n * @return Pointer to the current room.\n */\nconst Room* State::getCurrentRoom() const {\n    return this-&gt;currentRoom;\n}\n</code></pre>\n\n<blockquote>\n  <p>and State.h</p>\n</blockquote>\n\n<pre><code>#ifndef TEXTADV_STATE_H\n#define TEXTADV_STATE_H\n\n\n#include \"Room.h\"\n#include \"GameObject.h\"\n#include &lt;list&gt;\nusing std::string;\n\nusing namespace std;\nusing std::list;\n\n\nclass State {\n    const Room *currentRoom;\n    static list&lt;GameObject*&gt; Inventory;\n\npublic:\n    GameObject addToInv(GameObject* gameobject);\n    void dispInv();\n    explicit State(const Room *startRoom);\n    void goTo(const Room *target);\n    void announceLoc() const;\n    const Room* getCurrentRoom() const;\n\n};\n</code></pre>\n\n<p>However when I try running it I get the issue:</p>\n\n<blockquote>\n  <p>CMakeFiles\\ott.dir/objects.a(State.cpp.obj): In function\n  <code>ZN5State8addToInvEP10GameObject': H:/.0 Year 3/C and\n  C++/CW/ott/State.cpp:49: undefined reference to\n  </code>State::Inventory[abi:cxx11]'\n  CMakeFiles\\ott.dir/objects.a(State.cpp.obj): In function\n  <code>ZN5State7dispInvEv': H:/.0 Year 3/C and\n  C++/CW/ott/State.cpp:54: undefined reference to\n  </code>State::Inventory[abi:cxx11]' collect2.exe: error: ld returned 1 exit\n  status mingw32-make.exe[3]: <strong>* [ott.exe] Error 1\n  mingw32-make.exe[2]: <em></strong> [CMakeFiles/ott.dir/all] Error 2\n  CMakeFiles\\ott.dir\\build.make:225: recipe for target 'ott.exe'\n  failed CMakeFiles\\Makefile2:66: recipe for target\n  'CMakeFiles/ott.dir/all' failed CMakeFiles\\Makefile2:78: recipe\n  for target 'CMakeFiles/ott.dir/rule' failed mingw32-make.exe[1]:\n  <strong></em> [CMakeFiles/ott.dir/rule] Error 2 Makefile:117: recipe for target 'ott' failed mingw32-make.exe: *</strong> [ott] Error 2</p>\n</blockquote>\n\n<p>What am I doing wrong and how do I fix this??</p>\n"}, {"tags": ["c++", "multithreading", "c++14", "threadpool"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1510756509, "post_id": 47310042, "comment_id": 81570549, "body": "I notice you&#39;re capturing a local variable by reference and having that closure escape the scope. That could be related. I believe Clang&#39;s AddressSanitizer catches that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510756520, "post_id": 47310042, "comment_id": 81570557, "body": "<i>i&#39;m pretty sure its at promise.set_value</i> a debugger will tell you."}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "edited": false, "score": 0, "creation_date": 1510756552, "post_id": 47310042, "comment_id": 81570588, "body": "@manni66 i tried, debugging, but it wont let me step into the exact location^^"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1510756892, "post_id": 47310042, "comment_id": 81570840, "body": "Your <code>std::promise</code> object gets destroyed as soon as the <code>queueTask</code> function exits."}], "answers": [{"comments": [{"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "edited": false, "score": 0, "creation_date": 1510757727, "post_id": 47310345, "comment_id": 81571540, "body": "Obviously, that makes sense. Thanks very much for taking your time to write this answer."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1510758732, "last_edit_date": 1510758732, "creation_date": 1510757109, "answer_id": 47310345, "question_id": 47310042, "link": "https://stackoverflow.com/questions/47310042/proper-usage-of-stdpromise-and-stdfuture-segfaults/47310345#47310345", "title": "Proper usage of std::promise and std::future, segfaults", "body": "<p>The main problem is that the promise is already dead. When <code>queueTask</code> is done, the <code>promise</code> is destroyed, and the task now just has a dangling reference. The task must share ownership of the <code>promise</code> in order for it to live long enough to fulfill it.</p>\n\n<p>The same is true of the underlying <code>std::function</code> object <code>_task</code>, since you're capturing it by reference.</p>\n\n<p>You're using <code>std::function</code>, which requires copyable objects, hence... <code>shared_ptr</code>:</p>\n\n<pre><code>template&lt;typename RT&gt;\ninline std::future&lt;RT&gt; queueTask(std::function&lt;RT()&gt; _task, bool _execute = false)\n{\n    auto promise = std::make_shared&lt;std::promise&lt;RT&gt;&gt;();\n    std::function&lt;void()&gt; func([promise, task=std::move(_task)]{\n        RT val = _task();\n        promise-&gt;set_value(val);\n    });\n\n    {\n        std::lock_guard&lt;std::mutex&gt; lk(mTasksMutex); // NB: no manual lock()/unlock()!!\n        mTasks.emplace(func);\n    }\n    if(_execute) flush();\n    return promise-&gt;get_future();\n}\n</code></pre>\n\n<p>Consider <a href=\"http://en.cppreference.com/w/cpp/thread/packaged_task\" rel=\"nofollow noreferrer\"><code>std::packaged_task</code></a> instead.</p>\n"}], "owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 47310345, "answer_count": 1, "score": 0, "last_activity_date": 1510758732, "creation_date": 1510756243, "last_edit_date": 1510756620, "question_id": 47310042, "link": "https://stackoverflow.com/questions/47310042/proper-usage-of-stdpromise-and-stdfuture-segfaults", "title": "Proper usage of std::promise and std::future, segfaults", "body": "<p>I've been trying my luck on a small threadpool implementation.\nHowever, after conceptualizing and implementing i've hit a brick wall.\nI've confirmed that the worker threads ate starting up and sleeping correctly, also that they pick up and execute stored tasks correctly.\nHowever, my program segfaults - i'm pretty sure its at <code>promise.set_value</code>.</p>\n\n<p>Im not sure how i could provide a complete, verifiable example (given that i can hardly upload the whole code) but i'll include the segments\ni believe to be relevant to this problem.\nFirst off, workers are created like this:</p>\n\n<pre><code>worker = [this](){\n    while(true)\n    {\n        std::unique_lock&lt;std::mutex&gt; lock(mStatusMutex); //CV for status updates\n        mCV.wait(lock);\n        if(mStatus != Running) //If threadpool status does not imply running\n            break; //Break out of loop, ending thread in the process\n        else //If threadpool is in running state\n        {\n            lock.unlock(); //Unlock state\n            while(true) //Loop until no tasks are left\n            {\n                mTasksMutex.lock(); //Lock task queue\n                if(mTasks.empty()) //IF no tasks left, break out of loop and return to waiting\n                {\n                    mTasksMutex.unlock();\n                    break;\n                }\n                else //Else, retrieve a task, unlock the task queue and execute the task\n                {\n                    std::function&lt;void()&gt; task = mTasks.front();\n                    mTasks.pop();\n                    mTasksMutex.unlock();\n                    task(); //Execute task\n                }\n            }\n        }\n    }\n};\n</code></pre>\n\n<p>And then started and stored into a <code>std::vector&lt;std::thread&gt;</code> like this:</p>\n\n<pre><code>std::thread tWorker(worker);\nmWorkers.push_back(std::move(tWorker));\n</code></pre>\n\n<p>Now, the tricky part i believe to be the following is when adding/executing tasks to the task queue, which is a <code>std::queue&lt;std::function&lt;void()&gt;&gt;</code>.\nThe following two functions are relevant here:</p>\n\n<pre><code>template&lt;typename RT&gt;\ninline std::future&lt;RT&gt; queueTask(std::function&lt;RT()&gt; _task, bool _execute = false)\n{\n    std::promise&lt;RT&gt; promise;\n    std::function&lt;void()&gt; func([&amp;_task, &amp;promise]() -&gt; RT {\n        RT val = _task();\n        promise.set_value(val);\n    });\n\n    mTasksMutex.lock();\n    mTasks.emplace(func);\n    mTasksMutex.unlock();\n    if(_execute) flush();\n    return promise.get_future();\n}\ninline void flush()\n{\n    mCV.notify_all();\n}\n</code></pre>\n\n<p>Is there anything principally wrong with this approach? \nFor anyone who believes this to be a bad question, feel free to tell me how i can improve it.\nFull code is hosted on <a href=\"https://github.com/calcyss/cernel\" rel=\"nofollow noreferrer\" title=\"github\">my github repo</a>.</p>\n"}, {"tags": ["c++", "c++11", "gcc", "shared-libraries", "libstdc++"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1510756226, "post_id": 47309819, "comment_id": 81570322, "body": "I think GCC introduced an ABI break at version 5.1. Have you tried?"}, {"owner": {"reputation": 1390, "user_id": 1900954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rRoSO.jpg?s=128&g=1", "display_name": "Uri Granta", "link": "https://stackoverflow.com/users/1900954/uri-granta"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1510757138, "post_id": 47309819, "comment_id": 81571037, "body": "Tried what? Running the application against a newer version of libstdc++ (e.g. via LD_PRELOAD)?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 1, "creation_date": 1510782093, "post_id": 47309819, "comment_id": 81586551, "body": "Linux shared objects support symbol versioning (<a href=\"https://gcc.gnu.org/wiki/SymbolVersioning\" rel=\"nofollow noreferrer\">gcc.gnu.org/wiki/SymbolVersioning</a>), which I think should already apply to your situation. However some people argue, that versioned symbols introduce a whole different level of problems on their own (<a href=\"http://harmful.cat-v.org/software/dynamic-linking/versioned-symbols\" rel=\"nofollow noreferrer\">harmful.cat-v.org/software/dynamic-linking/versioned-symbol&zwnj;&#8203;s</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 2, "last_activity_date": 1510781786, "creation_date": 1510781786, "answer_id": 47317666, "question_id": 47309819, "link": "https://stackoverflow.com/questions/47309819/using-a-c11-shared-library-in-a-c03-application-that-was-compiled-with-gcc-4/47317666#47317666", "title": "Using a C++11 shared library in a C++03 application that was compiled with gcc 4.1 in Linux?", "body": "<p>If you do that, you definitely need to use the newer <code>libstdc++.so.6</code>, which should be compatible with the system <code>libstdc++.so.6</code> based on GCC 4.1 (in the sense that GCC upstream intends to preserve ABI compatibility for the library).  It would be a very good idea to use the <code>libstdc++.so.6</code> library that came with the GCC 4.9 compiler.</p>\n\n<p>Once you do that, it is <em>supposed</em> to work, unless you hit the few of the compatibility gotchas you already listed, and as long as the C++ part of the library interface actually sticks to the C++98 subset and does not use any constructs which are not expressible in the language subset.</p>\n\n<p>All this assumes that the library was actually compiled on the the system which uses GCC 4.1, which probably has something like glibc 2.5.  If the library was compiled on a completely different, newer system, then you will likely run into library compatibility issues beyond <code>libstdc++.so.6</code>, and these libraries tend to be even harder to upgrade.</p>\n\n<p>(There is also the possibility that the library was explicitly compiled for use with the 4.1-based system <code>libstdc++.so.6</code> and everything just works, just as if by magic, but then you wouldn't be asking here, I suppose.)</p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 2143724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff359c940a896ba893cecf78eed193?s=128&d=identicon&r=PG", "display_name": "karsten", "link": "https://stackoverflow.com/users/2143724/karsten"}, "is_accepted": false, "score": 1, "last_activity_date": 1527872697, "creation_date": 1527872697, "answer_id": 50648115, "question_id": 47309819, "link": "https://stackoverflow.com/questions/47309819/using-a-c11-shared-library-in-a-c03-application-that-was-compiled-with-gcc-4/50648115#50648115", "title": "Using a C++11 shared library in a C++03 application that was compiled with gcc 4.1 in Linux?", "body": "<p>If you still have problems there is the option to use a statically linked C-API library as border between the two, application and your library, see <a href=\"https://stackoverflow.com/questions/21783761/how-do-i-link-different-versions-of-the-same-library-in-g/21787183?noredirect=1#comment88302577_21787183\">this post</a>. </p>\n\n<p>Also you may be able to explicitely demand an old version of a symbol, see <a href=\"https://stackoverflow.com/questions/4032373/linking-against-an-old-version-of-libc-to-provide-greater-application-coverage\">this post</a></p>\n"}], "owner": {"reputation": 1390, "user_id": 1900954, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rRoSO.jpg?s=128&g=1", "display_name": "Uri Granta", "link": "https://stackoverflow.com/users/1900954/uri-granta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527872697, "creation_date": 1510755625, "question_id": 47309819, "link": "https://stackoverflow.com/questions/47309819/using-a-c11-shared-library-in-a-c03-application-that-was-compiled-with-gcc-4", "title": "Using a C++11 shared library in a C++03 application that was compiled with gcc 4.1 in Linux?", "body": "<p>Having gone through a number of similar questions (see below), I don't think any of them cover this case.</p>\n\n<p><strong>Problem</strong></p>\n\n<p>Is it possible to dlopen and use a C++11 shared library compiled using gcc 4.9 from a C++03 application compiled with gcc 4.1? Both the library and application use libstdc++, including on the API (but not std::list, which is apparently a problem). I can't change the way the application is compiled (sadly), and must be certain that existing code doesn't break (e.g. if it ends up dynamically linking to a new version of libstdc++.so).</p>\n\n<p>As far as I understand it (which is not very), on Linux the dynamic linker uses a flat namespace, meaning that is not possible to have the same symbol defined in two libraries. Does statically linking the library against the newer libstdc++ help at all here, or is there perhaps some other way?</p>\n\n<p><strong>Some similar questions that don't seem to answer this</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/19729441/c11-backwards-compatibility\">C++11 backwards compatibility</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12637699/c03-library-with-c11-source-code\">C++03 library with C++11 source code</a></li>\n<li><a href=\"https://stackoverflow.com/questions/28201173/c11-compatibility-with-existing-libraries-frameworks\">C++11 compatibility with existing libraries/frameworks</a></li>\n<li><a href=\"https://softwareengineering.stackexchange.com/questions/162408/can-a-compiled-c11-library-lib-dll-etc-be-linked-in-older-c-compilers\">Can a compiled C++11 library (lib,dll,etc.) be linked in older C++ compilers?</a> [softwareengineering.stackexchange.com]</li>\n</ul>\n"}, {"tags": ["python", "c++", "multithreading", "pybind11"], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 7237628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a333b87481c0ecac25832977bcf1b1f6?s=128&d=identicon&r=PG&f=1", "display_name": "ryadav", "link": "https://stackoverflow.com/users/7237628/ryadav"}, "is_accepted": false, "score": 1, "last_activity_date": 1527153457, "creation_date": 1527153457, "answer_id": 50505493, "question_id": 47309688, "link": "https://stackoverflow.com/questions/47309688/how-to-use-pybind11-in-multithreaded-application/50505493#50505493", "title": "How to use pybind11 in multithreaded application", "body": "<p>If you want to do following -\nFrom Python you want to run C++ threads to execute different tasks on each thread.</p>\n\n<p>Create a theradpool like <a href=\"https://github.com/progschj/ThreadPool\" rel=\"nofollow noreferrer\">https://github.com/progschj/ThreadPool</a></p>\n\n<p>Write a wrapper class to wrap and bind to Python using PyBind11.\nCreate the instance of ThreadPool and add tasks from Python which in turn creates different threads to execute your tasks.</p>\n\n<p>Disclaimer - I have not tried but this will work :)</p>\n"}, {"tags": [], "owner": {"reputation": 315, "user_id": 3713719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24aeec9ea28e801fc98b11d5652d99b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3713719", "link": "https://stackoverflow.com/users/3713719/user3713719"}, "is_accepted": false, "score": 5, "last_activity_date": 1589456010, "last_edit_date": 1589456010, "creation_date": 1549741652, "answer_id": 54610088, "question_id": 47309688, "link": "https://stackoverflow.com/questions/47309688/how-to-use-pybind11-in-multithreaded-application/54610088#54610088", "title": "How to use pybind11 in multithreaded application", "body": "<p>this works. Wrap the long running c++ code with gil_scoped_release and gil_scoped_acquire</p>\n\n<pre><code>pybind11::gil_scoped_release release;\n\nwhile (true)\n{\n    // do something and break\n}\n\npybind11::gil_scoped_acquire acquire;\n</code></pre>\n"}], "owner": {"reputation": 14111, "user_id": 978486, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mEjSr.jpg?s=128&g=1", "display_name": "ManuelSchneid3r", "link": "https://stackoverflow.com/users/978486/manuelschneid3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2984, "favorite_count": 5, "answer_count": 2, "score": 6, "last_activity_date": 1589456010, "creation_date": 1510755294, "question_id": 47309688, "link": "https://stackoverflow.com/questions/47309688/how-to-use-pybind11-in-multithreaded-application", "title": "How to use pybind11 in multithreaded application", "body": "<p>I want to run Python in a worker thread. However I get strange segfaults and deadlocks of the threads in the worker pool. How do I correctly use pybind11/Python C API to allow the threads to run the jobs?</p>\n\n<p>I know that it does not make much sense to MT python because of the GIL, but thats an intermediate solution to fit the current architecture until there is a better approach.</p>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 0, "creation_date": 1510756773, "post_id": 47309531, "comment_id": 81570757, "body": "Hints: Invalid block size (maximum 1024 threads per block are allowed), matrix step should be divided by the size of data-type, i.e. <code>step&#47;sizeof(float)</code>."}, {"owner": {"reputation": 264, "user_id": 7795069, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e5b1c663655ddc6d4810ea996adc9eaf?s=128&d=identicon&r=PG&f=1", "display_name": "A.albin", "link": "https://stackoverflow.com/users/7795069/a-albin"}, "reply_to_user": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 0, "creation_date": 1510757917, "post_id": 47309531, "comment_id": 81571679, "body": "@sgarizvi I assumed that GpuMat.step would return an int.... I was wrong, I&#39;ll test tomorrow morning. Any hints/other things that might be wrong? (also is there a debugger for CUDA except gdb?)"}], "answers": [{"tags": [], "owner": {"reputation": 418, "user_id": 7681552, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d99f0e12766c6fe1b5895bed3d80aefd?s=128&d=identicon&r=PG&f=1", "display_name": "Ebya", "link": "https://stackoverflow.com/users/7681552/ebya"}, "is_accepted": false, "score": 1, "last_activity_date": 1510811814, "creation_date": 1510811814, "answer_id": 47322614, "question_id": 47309531, "link": "https://stackoverflow.com/questions/47309531/matrix-dot-product/47322614#47322614", "title": "Matrix dot product", "body": "<p>Partial answer:</p>\n\n<p>In your kernel you aren't doing the good sum, nor taking the good elements, and your dim seems inverted</p>\n\n<pre><code>__global__ void MatrixDot(Matrix_t A, Matrix_t B, float* dot_)\n{\n//int blockRow = blockIdx.y;\n//int blockCol = blockIdx.x;\nint blockRow = blockIdx.x;\nint blockCol = blockIdx.y;\n\n\nfloat SubDotValue = 0.0f;\n\n\n//int row = threadIdx.y;\n//int col = threadIdx.x;\nint row = threadIdx.x;\nint col = threadIdx.y;\n\n\n\n\nfor(int m = 0; m &lt; (A.row_ / BLOCK_SIZE); ++m)\n    {\n        //get subA &amp; subB\n        Matrix_t A_sub = getSubMat(A, m, blockCol);//getSubMat(A, blockRow, m)\n        Matrix_t B_sub = getSubMat(B, m, blockCol);//getSubMat(B, blockRow, m)\n\n        //set Asub &amp; Bsub to the  __shared__ memory\n\n        __shared__ float ASub[BLOCK_SIZE][BLOCK_SIZE];\n        __shared__ float BSub[BLOCK_SIZE][BLOCK_SIZE];\n\n        ASub[row][col] = getElement(A_sub, row, col);\n        BSub[row][col] = getElement(B_sub, row, col);\n\n        //Synchronize before calculations:\n        __syncthreads();\n\n        //Get the dot product of the vector Asub[] Bsub[]\n        for(int el_ = 0; el_ &lt; BLOCK_SIZE; ++el_)\n        {\n            SubDotValue += ASub[row][el_] * BSub[row][el_];\n        }\n        __syncthreads();\n    }\n\ndot_[blockRow*BLOCK_SIZE + row] = SubDotValue; //dot_[row] = SubDotValue;\n\n}\n</code></pre>\n\n<p>And your wrapper isn't also allocating the size you need:</p>\n\n<pre><code>cudaError_t err = cudaMalloc( (void**)&amp;retval_device,B.row_/ BLOCK_SIZE *sizeof(float) );\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>cudaError_t err = cudaMalloc( (void**)&amp;retval_device,B.row_*sizeof(float) );\n</code></pre>\n\n<p>Note that other allocation related have to change too (Lazy me).</p>\n\n<p>And your call in main need to divide the GpuMat step by the size of one element of the GpuMat</p>\n\n<pre><code>res_m = Matrix_dot_((float* )ctA.ptr(), (float*)ctB.ptr(), ctA.cols, ctA.rows, ctA.step/ctA.elemsize1());\n</code></pre>\n\n<p>You might also want to change your Matrix_t structure to use const float* instead of float to be able to use:</p>\n\n<pre><code> GpuMat_.ptr&lt;float&gt;();\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>(float*)GpuMat.ptr();\n</code></pre>\n\n<p>Note that for a matrix of N rows you are starting N^2 threads doing the same thing. I don't have enough knowledge on Cuda to fix that.</p>\n"}], "owner": {"reputation": 264, "user_id": 7795069, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e5b1c663655ddc6d4810ea996adc9eaf?s=128&d=identicon&r=PG&f=1", "display_name": "A.albin", "link": "https://stackoverflow.com/users/7795069/a-albin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510811814, "creation_date": 1510754869, "last_edit_date": 1510756761, "question_id": 47309531, "link": "https://stackoverflow.com/questions/47309531/matrix-dot-product", "title": "Matrix dot product", "body": "<p>Disclaimer: Im a cuda beginner.</p>\n\n<pre><code>typedef struct\n{\n    int row_;\n    int col_;\n    float* element_;\n    int step;\n}Matrix_t;\n\n#define BLOCK_SIZE 64\n\n__device__ float getElement(const Matrix_t A, int row, int col);\n__device__ Matrix_t getSubMat(Matrix_t A, int row, int col);\n__device__ void setElement(Matrix_t A, int row, int col, float value);\n__global__ void MatrixDot(Matrix_t A, Matrix_t B, float* dot_);\nfloat  Matrix_dot_(float* M_dev_1, float* M_dev_2, int Number_of_cols, int Number_of_rows, int step);\n</code></pre>\n\n<p>the Matrix_t are used to link a cv::cuda::GpuMat to the C interface via the ptr() operator to get the GPU pointer to element.</p>\n\n<pre><code>__device__ float getElement(const Matrix_t A, int row, int col)\n{\n    return A.element_[row* A.step + col];\n}\n\n__device__ void setElement(Matrix_t A, int row, int col, float value)\n{\n    A.element_[row*A.step + col] = value;\n}\n__device__ Matrix_t getSubMat(Matrix_t A, int row, int col)\n{\n    Matrix_t A_sub;\n    A_sub.row_ = BLOCK_SIZE;\n    A_sub.col_ = BLOCK_SIZE;\n    A_sub.step = A.step;\n    A_sub.element_ = &amp;A.element_[A.step * BLOCK_SIZE * row + BLOCK_SIZE * col];\n\n    return A_sub;\n}\n</code></pre>\n\n<p>Here is the kernel:</p>\n\n<pre><code>__global__ void MatrixDot(Matrix_t A, Matrix_t B, float* dot_)\n{\n    int blockRow = blockIdx.y;\n    int blockCol = blockIdx.x;\n\n\n    float SubDotValue = 0.0f;\n\n\n    int row = threadIdx.y;\n    int col = threadIdx.x;\n\n\n\n    for(int m = 0; m &lt; (A.row_ / BLOCK_SIZE); ++m)\n    {\n        //get subA &amp; subB\n        Matrix_t A_sub = getSubMat(A, blockRow, m);\n        Matrix_t B_sub = getSubMat(B, blockRow, m);\n\n        //set Asub &amp; Bsub to the  __shared__ memory\n\n        __shared__ float ASub[BLOCK_SIZE][BLOCK_SIZE];\n        __shared__ float BSub[BLOCK_SIZE][BLOCK_SIZE];\n\n        ASub[row][col] = getElement(A_sub, row, col);\n        BSub[row][col] = getElement(B_sub, row, col);\n\n        //Synchronize before calculations:\n        __syncthreads();\n\n        //Get the dot product of the vector Asub[] Bsub[]\n        for(int el_ = 0; el_ &lt; BLOCK_SIZE; ++el_)\n        {\n            SubDotValue += ASub[row][el_] * BSub[row][el_];\n        }\n        __syncthreads();\n    }\n\n    dot_[row] = SubDotValue;\n\n}\n</code></pre>\n\n<p>and the wrapper:</p>\n\n<pre><code>float  Matrix_dot_(float* M_dev_1,float* M_dev_2, int Number_of_cols, int Number_of_rows, int step)\n{\n\n\n    float retval = 0;\n    float* retval_partial;\n    float* retval_device;\n\n    Matrix_t A;\n    A.col_ = Number_of_cols;\n    A.row_ = Number_of_rows;\n    A.element_ = M_dev_1;\n    A.step = step;\n    Matrix_t B;\n    B.col_ = Number_of_cols;\n    B.row_ = Number_of_rows;\n    B.element_ = M_dev_2;\n    B.step = step;\n\n\n\n    retval_partial = (float*)malloc( B.row_*sizeof(float) );\n\n    cudaError_t err = cudaMalloc( (void**)&amp;retval_device,B.row_/ BLOCK_SIZE *sizeof(float) );\n    printf(\"\\n Cuda malloc: %s\", cudaGetErrorString(err));\n    std::cout&lt;&lt;std::flush;\n    dim3 dimBlock(BLOCK_SIZE, BLOCK_SIZE);\n    dim3 dimGrid(B.row_ / BLOCK_SIZE, B.col_ / BLOCK_SIZE);\n\n    MatrixDot&lt;&lt;&lt;dimGrid, dimBlock&gt;&gt;&gt;(A, B, retval_device);\n    err = cudaThreadSynchronize();\n    std::cout&lt;&lt;std::flush;\n\n    printf(\"\\n Cuda kernel run: %s\", cudaGetErrorString(err));\n    err = cudaMemcpy(retval_partial, retval_device, B.row_ / BLOCK_SIZE* sizeof(float), cudaMemcpyDeviceToHost);\n    printf(\"\\n Cuda cudaMemcpy: %s\", cudaGetErrorString(err));\n    err = cudaFree(retval_device);\n    printf(\"\\n Cuda cudaFree: %s\", cudaGetErrorString(err));\n    for(int i = 0; i&lt;B.row_/ BLOCK_SIZE ; ++i)\n    {\n        retval+=retval_partial[i];\n    }\n\n    free(retval_partial);\n\n    return retval;\n}\n</code></pre>\n\n<p>and the main:</p>\n\n<pre><code>int main(int argc, const char * argv[])\n{\n    cv::cuda::DeviceInfo devInfo;\n    cv::cuda::setDevice(devInfo.deviceID());\n\n    cv::Mat cudatestA = cv::Mat(64*3, 64*3, CV_32FC1, 2);\n    cv::Mat cudatestB = cv::Mat(64*3, 64*3, CV_32FC1, 2);\n\n\n    double tr = (double) cv::getTickCount();\n    double res = cudatestA.dot(cudatestB);\n\n    tr = ((double)cv::getTickCount()-tr)/(double)cv::getTickFrequency();\n\n    cv::cuda::GpuMat ctA(cudatestA);\n    cv::cuda::GpuMat ctB(cudatestB);\n\n\n    double tm_ = (double) cv::getTickCount();\n    float res_m = 0;\n\n    res_m = Matrix_dot_((float* )ctA.ptr(), (float*)ctB.ptr(), ctA.cols, ctA.rows, ctA.step);\n    tm_ = ((double)cv::getTickCount()-tm_)/(double)cv::getTickFrequency();\n\n\n    printf(\"\\nCPU: %0.4fms, res: %0.4f\\nGPU_M: %0.4fms, res: %0.4f\\n\", tr*1000.0f, res, tm_*1000.0f,res_m);\n    return 0;\n}\n</code></pre>\n\n<p>I'm currently stuck on various points:</p>\n\n<p>1) it always output 0.</p>\n\n<p>2) it can only work for matrix M*N Multiple of the defined BLOCK_SIZE (64).</p>\n\n<p>for 1) I can't figure where my logic break, I could get the dot product to work on vector without any troubles but the matrix problem induced by the stride between each row prevent me to use the code (code deleted as the site tell me that there is too much code).</p>\n"}, {"tags": ["python", "c++", "tensorflow", "tensorflow-gpu"], "owner": {"reputation": 279, "user_id": 2591551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05e9c453e82590beb1484edd10ac0ab?s=128&d=identicon&r=PG", "display_name": "Stefan Seibert", "link": "https://stackoverflow.com/users/2591551/stefan-seibert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 878, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1510777544, "creation_date": 1510754569, "last_edit_date": 1510777544, "question_id": 47309425, "link": "https://stackoverflow.com/questions/47309425/tensorflow-op-and-kernel-do-not-register-on-windows-with-cmake", "title": "Tensorflow Op and Kernel do not register on Windows with CMAKE", "body": "<p>I am building a custom Tensorflow Op and Kernel Implementation in C++ targeting Tensorflow r1.3. I successfully build and link the op library by using the suggestions form <a href=\"https://github.com/tensorflow/models/issues/1103\" rel=\"nofollow noreferrer\">this bug report</a>.</p>\n\n<p>My code is pretty much the boilerplate op code from the Tensorflow API.</p>\n\n<p>When I load the ops with <code>tf.load_op_library()</code> I can use the ops in Python and create a graph with them and save this as graph definition. When I subsequently try to load the Ops then in C/C++ with <code>TF_LoadLibrary()</code> the call returns OK as Status but the ops cannot be found. </p>\n\n<p>I always get the error:</p>\n\n<blockquote>\n  <p>Not found: Op type not registered '...' in binary running on ... Make sure the Op and Kernel are registered in the binary running in this process.</p>\n</blockquote>\n\n<p>I am aware of this article: <a href=\"https://stackoverflow.com/questions/37548662/understand-op-registration-and-kernel-linking-in-tensorflow\">Understand Op Registration and Kernel Linking in TensorFlow</a>.\nBoth the Op registration and kernel registration code are to be found in the op library code.</p>\n\n<p>I tried:</p>\n\n<ol>\n<li>Moving the Op registration code to my own c++ code. That works but then the error changes that no kernels are registered for that op which doesnt help either.</li>\n<li>Moving the Kernel registration code to my own c++ code. That doesnt work because the Linker cant find the nvcc compiled operators.</li>\n<li>Putting the Op and Kernel Registration Macros inside a DllMain method instead of putting them directly into the code. Didnt help either.</li>\n<li>Procmon.exe and Dependency Walker both show that the DLL of the Op is loaded\ncorrectly. So somehow Tensorflow does not register the Ops with the\ncmake based build setup. Building tensorflow takes 3-4 hours, when I\nhave to build tensorflow completely for my op changes is not really\npracticable.</li>\n<li>I was digging through the Tensorflow Codebase and found this code snippet which i tried to call directly <code>Register(\"MyOp\", TF::OpRegistry::Global());</code></li>\n<li>Initializing the Python Interpreter with <code>Py_Initialize()</code> from C++ and run the python import command from within C++ with <code>PyRun_SimpleString</code></li>\n</ol>\n\n<p>Anyone has tried that already and succeeded? Any Input? I am desperate.</p>\n"}, {"tags": ["c++", "list", "arguments", "default", "initializer"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510754873, "post_id": 47309347, "comment_id": 81569280, "body": "You did implement <code>getType&lt;&gt;()</code> in the header?"}, {"owner": {"reputation": 447, "user_id": 3038149, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sEl9N.png?s=128&g=1", "display_name": "VincentDM", "link": "https://stackoverflow.com/users/3038149/vincentdm"}, "edited": false, "score": 0, "creation_date": 1510755056, "post_id": 47309347, "comment_id": 81569425, "body": "@manni66 yes, in an included header"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 2, "creation_date": 1510755149, "post_id": 47309347, "comment_id": 81569481, "body": "Show code, show the meaasge."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 2, "creation_date": 1510755985, "post_id": 47309347, "comment_id": 81570101, "body": "&quot;CustomType&amp; iType = getType...&quot; is it a typo, or are you really binding a CustomType&amp; to a CustomeType*  ? if yes, what&#39;s CustomType ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510756135, "post_id": 47309347, "comment_id": 81570239, "body": "<code>Metadata::</code> ??"}, {"owner": {"reputation": 447, "user_id": 3038149, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sEl9N.png?s=128&g=1", "display_name": "VincentDM", "link": "https://stackoverflow.com/users/3038149/vincentdm"}, "edited": false, "score": 0, "creation_date": 1510756662, "post_id": 47309347, "comment_id": 81570660, "body": "<code>Metadata</code> is the namespace where <code>getType</code> is declared"}, {"owner": {"reputation": 447, "user_id": 3038149, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sEl9N.png?s=128&g=1", "display_name": "VincentDM", "link": "https://stackoverflow.com/users/3038149/vincentdm"}, "edited": false, "score": 0, "creation_date": 1510756698, "post_id": 47309347, "comment_id": 81570687, "body": "there is no typo, this is actually how the code is"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510757037, "post_id": 47309347, "comment_id": 81570966, "body": "<i>there is no typo, this is actually how the code is</i> that will <b>not</b> result in in linker error but in a copiler error. You do not show the relevant code. You are on your own."}, {"owner": {"reputation": 447, "user_id": 3038149, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sEl9N.png?s=128&g=1", "display_name": "VincentDM", "link": "https://stackoverflow.com/users/3038149/vincentdm"}, "edited": false, "score": 0, "creation_date": 1510757182, "post_id": 47309347, "comment_id": 81571073, "body": "alright, sorry for the disturbance. thank you both for your interest and have a good day"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1510757409, "post_id": 47309347, "comment_id": 81571256, "body": "again, what&#39;s CustomType ? as of now, the only explanation I see is that CustomType has a non explicit constructor taking CustomType* and either CustomType is an alias for some const T or you&#39;re compiling with an old version of vc++ that allows binding lvalue references to rvalues ... either way, I don&#39;t see how this relates to the linker error though. Can you create an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> ?"}, {"owner": {"reputation": 447, "user_id": 3038149, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sEl9N.png?s=128&g=1", "display_name": "VincentDM", "link": "https://stackoverflow.com/users/3038149/vincentdm"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1510757590, "post_id": 47309347, "comment_id": 81571412, "body": "@Massimiliano I&#39;ll do that in a near future, it&#39;s really bugging me. Also this project does use an older compiler (VS2005)"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1510761401, "post_id": 47311495, "comment_id": 81574469, "body": "... but the declaration should still be valid ( but this could be explained by a converting ctor and older vc++ allowing rvalue to lvalue reference binding, see comments ); moreover, if getType is not instantiated why the linker complains ? isn&#39;t there a contradiction here ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1510764965, "post_id": 47311495, "comment_id": 81577064, "body": "@MassimilianoJanes: Does the code split in several projects ? is definition of <code>getType()</code> is in header ? That might explain the link error."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1510760375, "creation_date": 1510760375, "answer_id": 47311495, "question_id": 47309347, "link": "https://stackoverflow.com/questions/47309347/initializer-list-vs-default-argument-value-difference-when-setting-a-member/47311495#47311495", "title": "&quot;initializer list &quot;vs. &quot;default argument value&quot; difference when setting a member value", "body": "<p>Default arguments are only \"exectuted\" at call site: so for</p>\n\n<pre><code>MyClass(CustomType&amp; iType = getType&lt;OtherClass&gt;())\n</code></pre>\n\n<p>You only need declaration of <code>getType&lt;OtherClass&gt;()</code>.</p>\n\n<p>Instantiation would be done only when you use something like:</p>\n\n<pre><code>MyClass myClass{}; // MyClass myClass{getType&lt;OtherClass&gt;()}\n</code></pre>\n\n<p>I assume that definition of <code>getType&lt;OtherClass&gt;</code> is inaccessible.\n(you might have implementation of template inside cpp file)</p>\n\n<p>For </p>\n\n<pre><code>MyClass() : mType(getType&lt;OtherClass&gt;()) {}\n</code></pre>\n\n<p><code>getType&lt;OtherClass&gt;</code> is instantiated.</p>\n"}], "owner": {"reputation": 447, "user_id": 3038149, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sEl9N.png?s=128&g=1", "display_name": "VincentDM", "link": "https://stackoverflow.com/users/3038149/vincentdm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1510760375, "creation_date": 1510754321, "last_edit_date": 1510755580, "question_id": 47309347, "link": "https://stackoverflow.com/questions/47309347/initializer-list-vs-default-argument-value-difference-when-setting-a-member", "title": "&quot;initializer list &quot;vs. &quot;default argument value&quot; difference when setting a member value", "body": "<p>I've been experiencing a linking issue on a project, and I've found a workaround I can't really explain.</p>\n\n<p>I had this kind of class and I was getting an unresolved external symbol on <code>getType&lt;&gt;()</code>, which was <em>correctly</em> imported from another lib.</p>\n\n<pre><code>MyClass( CustomType&amp; iType = getType&lt;OtherClass&gt;() ) \n{...}\n</code></pre>\n\n<p>The workaround found is a little less reusable, but still satisfies conviniently my use case for now. Same linker properties, etc.</p>\n\n<pre><code>MyClass( ) \n: mType( getType&lt;OtherClass&gt;() ) \n{...}\n</code></pre>\n\n<ul>\n<li>What difference does it make to set a member variable with a default argument value or through the initializer list? </li>\n<li>Is there a difference of scope? e.g. could it be because <code>otherClass</code> and <code>getType&lt;&gt;()</code> exist in different namespaces?</li>\n</ul>\n\n<p>EDIT:\nDeclaration of getType:</p>\n\n<pre><code>template&lt;typename type&gt;\nCustomType* getType() {\n  static CustomType* oType = getType(typeid(type));\n  return oType;\n}\n</code></pre>\n\n<p>Linker error:</p>\n\n<pre><code>MyClass.obj : error LNK2019: unresolved external symbol \"public: class CustomType * __thiscall Metadata::getType&lt;class OtherClass&gt;(void)\" ...\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "build", "dependency-management", "ninja"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1510756213, "post_id": 47309215, "comment_id": 81570313, "body": "What about c) a moderate number of calls to the compiler with a bunch of files each? You don&#39;t say anything about your compiler or build hardware. It probably depends on number of cores, amount of RAM, kinds of disks and possibly network speed."}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1510758322, "post_id": 47309215, "comment_id": 81571978, "body": "@BoPersson Edited the question. As for the configuration I&#39;ll be using over here to test will be mostly visual studio cl compiler (vs2015/vs2017). I understand cpu+ram+disk+network are extremely important factors. But let&#39;s take those out of the equation, as my question intends to figure out what&#39;s the &quot;best&quot; way to produce optimal ninja files. Said otherwise, is there any major difference when picking up a/b/c or it doesn&#39;t matter at all? It&#39;d be interesting to know which approach is used by large projects like chromium. That would give me some insights about real-world use-cases"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1511212445, "post_id": 47309215, "comment_id": 81755923, "body": "Maybe you can measure it. Record the actual compiler invocations from VS, and with some text editing, you can modify it to simulate the behavior you mention. I&#39;ve checked a project: 300 files with GCC under linux. The difference between a) and &quot;one call to the compiler with all the files&quot; is a) is 0.2% slower."}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511212948, "post_id": 47309215, "comment_id": 81756216, "body": "@geza Interesting! are these 300 files from a real world-case scenario project or just some files created procedurally to make the experiment? Did you try cold build in both cases? Anyway, you&#39;re right, making a test with some real project editing the compiler output to merge them into &quot;one call to the compiler with all the files&quot; sounds like a good idea. Btw, on windows there is a limitation where you can just use 8kb or 32kb(unicode)  as command line arguments, guess on linux there isn&#39;t exist that limitation? I&#39;d have to spawn them like batches as i think vs compiler doesn&#39;t read from stdin"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1511213754, "post_id": 47309215, "comment_id": 81756591, "body": "It&#39;s a real world project. I tried it with warm disk-caches. But I don&#39;t think that there would be a significant difference (at least, for my case). Source code is small. There is some limit in linux too, but I think it&#39;s much higher than 8KB. For my case, command line was ~15KB, it had no problems."}], "answers": [{"comments": [{"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "edited": false, "score": 0, "creation_date": 1511537743, "post_id": 47469345, "comment_id": 81907300, "body": "Interesting! so it seems is worth my metabuild system would generate ninja files depending on os/compiler. So, you&#39;ve already clarified than on windows/MSCV this is definitely a big win to consider but as you know on windows CreateProcess lpCmdLine can&#39;t be bigger than 32kb, which means you could only batch few files per compiler call, any workaround about it? As far as i know MSVC can&#39;t read from stdin a file listing, right? Finally, do you know why big projects like chromium (on windows) are using multiple cl calls per file... wouldn&#39;t they benefit the other way around?"}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "edited": false, "score": 0, "creation_date": 1511537877, "post_id": 47469345, "comment_id": 81907384, "body": "As for my question, even if i&#39;ve asked the typical &quot;is it faster to... question&quot; i didn&#39;t want it to be a very generic one, as basically I&#39;m only interested on the major platforms/ compilers. Your question addresses those ones, so if nobody brings to the table anything more elaborated this will be probably be marked as valid/bountied one, +1 in the meantime ;) . Also, about <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow noreferrer\">createProcess</a> 32kb limitation..."}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1511542158, "post_id": 47469345, "comment_id": 81909365, "body": "One more reason for preferring separate compiles would be that ninja parallelizes independent build steps by default. So even if you spend more CPU time, wall clock time might be lower for a more fine-granular split on machines with many cores. Also more fine granular builds should allow for more fine granular dependencies, potentially lessening the number of recompilations necessary."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1511512808, "creation_date": 1511512808, "answer_id": 47469345, "question_id": 47309215, "link": "https://stackoverflow.com/questions/47309215/is-there-any-build-time-boost-when-including-many-source-files-on-multiple-compi/47469345#47469345", "title": "Is there any build-time boost when including many source files on multiple compiler calls?", "body": "<p>It depends.  (But you <em>knew</em> that was going to be the answer to a \"is it faster to ...\" question, didn't you?)</p>\n\n<p>Using MSVC it is <em>much</em> faster to compile all the files with a single call to the compiler.  It's not just that process creation is slow on Windows, the compiler also takes quite a long time to initialize itself.  (Of course, the speed-up going from twenty-at-a-time to all-at-once will probably be much less than going from one-at-a-time to twenty-at-a-time.)</p>\n\n<p>Using gcc/clang on Linux, it is probably faster to compile one file at a time.  This is not so much because gcc is faster like this, but because you can use ccache (ccache will only optimize if given a single file to compile), and ccache makes compilation <em>much</em> faster.  (Obviously, if all your files are different every time - because they are generated with unique content - ccache won't help.)  The same applies to mingw on Windows.</p>\n"}], "owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 47469345, "answer_count": 1, "score": 3, "last_activity_date": 1511512808, "creation_date": 1510753949, "last_edit_date": 1510979590, "question_id": 47309215, "link": "https://stackoverflow.com/questions/47309215/is-there-any-build-time-boost-when-including-many-source-files-on-multiple-compi", "title": "Is there any build-time boost when including many source files on multiple compiler calls?", "body": "<p>First of all, let me clarify my question is totally unrelated to <a href=\"https://stackoverflow.com/questions/22219967/is-there-any-benefit-to-passing-all-source-files-at-once-to-a-compiler\">Is there any benefit to passing all source files at once to a compiler?</a>.</p>\n\n<p>What I'd like to know here is whether my build-times would become faster if i made: </p>\n\n<ul>\n<li><p>a) Many number of calls to the compiler with one single file each </p></li>\n<li><p>b) Few number of calls to the compiler with many files each</p></li>\n<li><p>c) Moderate number of calls to the compiler with a bunch of files each</p></li>\n</ul>\n\n<p>Why am I asking this? I'm in the middle of creating a ninja generator (similar to the bunch <a href=\"https://github.com/ninja-build/ninja/wiki/List-of-generators-producing-ninja-build-files\" rel=\"nofollow noreferrer\">here</a> and I'd like to know what's the best way to create the dependency DAG.</p>\n\n<p>You could claim spawning less subprocesses will be typically faster and less expensive but i'd like to know whether the gains would be worth or not so I can design my tool properly.</p>\n\n<p>Just to clarify a little bit further, here's a simple <a href=\"https://gist.github.com/jiripospisil/1d099dda373280206aee\" rel=\"nofollow noreferrer\">example</a>, as you can see in that build.ninja file there are many build statements with a 1:1 dependency per compiler call, so... could the build times improved by grouping few source files on single build statements?</p>\n\n<p>EDIT: Also, I guess this <a href=\"https://stackoverflow.com/questions/47845/why-is-creating-a-new-process-more-expensive-on-windows-than-linux\">Why is creating a new process more expensive on Windows than Linux?</a> can provide some insights for the current topic</p>\n"}, {"tags": ["c++", "compiler-errors", "linked-list"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510753448, "post_id": 47308935, "comment_id": 81568298, "body": "Rule of thumb: templates are implemented in the header."}, {"owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1510753572, "post_id": 47308935, "comment_id": 81568378, "body": "So i have to declare everything in header file ? Do not need another cpp file for implementation."}, {"owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "edited": false, "score": 0, "creation_date": 1510753795, "post_id": 47308935, "comment_id": 81568549, "body": "Thank you i&#39;ve solved the problem :)"}], "owner": {"reputation": 386, "user_id": 6705628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/208fa0d86c50a5335ce665a38a80f595?s=128&d=identicon&r=PG&f=1", "display_name": "T&#252;rker Berke Y\u0131ld\u0131r\u0131m", "link": "https://stackoverflow.com/users/6705628/t%c3%bcrker-berke-y%c4%b1ld%c4%b1r%c4%b1m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1510753713, "answer_count": 0, "score": 0, "last_activity_date": 1510753238, "creation_date": 1510753238, "question_id": 47308935, "link": "https://stackoverflow.com/questions/47308935/linkedlist-template-linkedlist-stack-template", "closed_reason": "Duplicate", "title": "LinkedList Template / LinkedList Stack Template", "body": "<p>I am gettin some errors while i am trying to implement linked list with template way. I couldn't solve the problem for 4-5 hours. Gonna be crazy ..</p>\n\n<p>I am taking error messsage when i tried to create an object. Taking same error in stack implement..</p>\n\n<blockquote>\n  <p>1>Kaynak1.obj : error LNK2001: \u00c7\u00f6z\u00fcmlenmemi\u015f d\u0131\u015f sembol \"public:\n  __thiscall linkedlist::~linkedlist(void)\" (??1?$linkedlist@H@@QAE@XZ) \n  1>Kaynak1.obj : error LNK2001:\n  \u00c7\u00f6z\u00fcmlenmemi\u015f d\u0131\u015f sembol \"public: __thiscall\n  linkedlist::linkedlist(void)\" (??0?$linkedlist@H@@QAE@XZ)</p>\n</blockquote>\n\n<p>My head file is :</p>\n\n<pre><code>#pragma once\n#include&lt;iostream&gt;\n#include&lt;cassert&gt;\nusing namespace std;\ntemplate &lt;typename Type1&gt;\nstruct node\n{\n    Type1 data;\n    node* link;\n};\ntemplate &lt;class Type&gt;\nclass linkedlist {\n    node &lt;Type&gt; *first, *last;\n    int count;\npublic:\n    linkedlist();\n    linkedlist(linkedlist&amp;);\n    void initializeList();\n    int length()const;\n    bool isEmptyList()const;\n    void print()const;\n\n    Type front()const;\n    Type back()const;\n    bool search(Type) const;\n    void insertFirst(Type);\n    void insertLast(Type);\n    void deleteNode(Type);\n    ~linkedlist();\n};\n</code></pre>\n\n<p>And my implement file;</p>\n\n<pre><code>#include\"\u00dcst Bilgi.h\"\ntemplate &lt;class Type&gt;\nlinkedlist&lt;Type&gt;::linkedlist() {\n    first = NULL;\n    last = NULL;\n    count = 0;\n}\ntemplate &lt;class Type&gt;\nint linkedlist&lt;Type&gt;::length()const {\n    return count;\n}\ntemplate &lt;class Type&gt;\nbool linkedlist&lt;Type&gt;::isEmptyList()const {\n    return count == 0;\n}\ntemplate &lt;class Type&gt;\nType linkedlist&lt;Type&gt;::front()const {\n    assert(first != NULL);\n    return first-&gt;data;\n}\ntemplate &lt;class Type&gt;\nType linkedlist&lt;Type&gt;::back()const {\n    assert(last != NULL);\n    return last-&gt;data;\n}\ntemplate &lt;class Type&gt;\nvoid linkedlist&lt;Type&gt;::print()const {\n    node *temp = first;\n\n    if (temp == NULL)\n    {\n        cout &lt;&lt; \"Empty list...\" &lt;&lt; endl;\n    }\n    else\n    {\n        while (temp != NULL)\n        {\n            cout &lt;&lt; temp-&gt;data &lt;&lt; endl;\n            temp = temp-&gt;link;\n        }\n    }\n}\ntemplate &lt;class Type&gt;\nvoid linkedlist&lt;Type&gt;::insertFirst(Type value) {\n\n    node &lt;Type1&gt; *valuenode = new node;\n\n    valuenode-&gt;data = value;\n    valuenode-&gt;link = NULL;\n\n    valuenode-&gt;link = first;\n    first = valuenode;\n\n    if (last == NULL)\n    {\n        last = valuenode;\n    }\n    count++;\n}\ntemplate &lt;class Type&gt;\nvoid linkedlist&lt;Type&gt;::insertLast(Type value) {\n    node *valuenode = new node;\n\n    valuenode-&gt;data = value;\n    valuenode-&gt;link = NULL;\n\n    if (last == NULL) {\n        first = last = valuenode;\n    }\n    else\n    {\n        last-&gt;link = valuenode;\n        last = valuenode;\n    }\n    count++;\n}\ntemplate &lt;class Type&gt;\nlinkedlist&lt;Type&gt;::~linkedlist() {\n\n    node* temp = first;\n\n    while (temp != NULL)\n    {\n        first = first-&gt;link;\n        delete temp;\n        temp = first;\n    }\n    last = NULL;\n    count = 0;\n}\ntemplate &lt;class Type&gt;\nlinkedlist&lt;Type&gt;::linkedlist(linkedlist &amp;other) {\n\n    if (other.first == NULL)\n    {\n        first = last = NULL;\n        count = 0;\n    }\n    else\n    {\n        count = other.count;\n        first = new node;\n        first-&gt;data = other.first-&gt;data;\n        first-&gt;link = NULL;\n        last = first;\n\n        node *current = other.first-&gt;link;\n\n        while (current != NULL)\n        {\n            insertLast(current-&gt;data);\n            current = current-&gt;link;\n        }\n    }\n}\ntemplate &lt;class Type&gt;\nbool linkedlist&lt;Type&gt;::search(Type value)const {\n\n    bool found = false;\n\n    node *temp = first;\n\n    while (temp != NULL)\n    {\n        if (temp-&gt;data == value)\n        {\n            found = true;\n            break;\n        }\n        temp = temp-&gt;link;\n    }\n\n    return found;\n}\ntemplate &lt;class Type&gt;\nvoid linkedlist&lt;Type&gt;::initializeList() {\n\n    node *temp = first;\n    while (temp != NULL)\n    {\n        first = first-&gt;link;\n        delete temp;\n        temp = first;\n    }\n    last = NULL; count = 0;\n}\ntemplate &lt;class Type&gt;\nvoid linkedlist&lt;Type&gt;::deleteNode(Type value) {\n\n    bool isfound = search(value);\n    node *temp = first;\n\n    if (isfound)\n    {\n        if (first == last)\n        {\n            delete temp;\n            count = 0;\n            last = NULL;\n        }\n        else if (first-&gt;data == value) {\n            first = first-&gt;link;\n            delete temp;\n            temp = first;\n            count--;\n        }\n        else if (last-&gt;data == value)\n        {\n            node *rtemp = temp;\n            while (temp-&gt;link != NULL)\n            {\n                rtemp = temp;\n                temp = temp-&gt;link;\n            }\n            last = rtemp;\n            delete temp;\n\n            last-&gt;link = NULL;\n            count--;\n        }\n        else\n        {\n            node *rtemp = temp;\n            while (temp-&gt;link != NULL)\n            {\n                rtemp = temp;\n                temp = temp-&gt;link;\n                if (temp-&gt;data == value)\n                {\n                    break;\n                }\n            }\n            rtemp-&gt;link = temp-&gt;link;\n            delete temp;\n            count--;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "dynamic-memory-allocation"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 6, "creation_date": 1510753270, "post_id": 47308928, "comment_id": 81568176, "body": "You are violating the rule of 3/5/0."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1510753505, "post_id": 47308928, "comment_id": 81568331, "body": "You are leaking memory on <code>a</code> creation"}, {"owner": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "edited": false, "score": 0, "creation_date": 1510753578, "post_id": 47308928, "comment_id": 81568379, "body": "So how can i change it to not violate rules ?"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1510753631, "post_id": 47308928, "comment_id": 81568417, "body": "Simply read the rule of three."}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 8945252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd86e72a7d12c9b1a15e47da7e864bf2?s=128&d=identicon&r=PG&f=1", "display_name": "Light", "link": "https://stackoverflow.com/users/8945252/light"}, "is_accepted": false, "score": 3, "last_activity_date": 1510753760, "creation_date": 1510753760, "answer_id": 47309143, "question_id": 47308928, "link": "https://stackoverflow.com/questions/47308928/i-want-to-know-is-it-okay-if-i-will-use-following-method-of-memory-allocation/47309143#47309143", "title": "I want to know is it okay if i will use following method of memory allocation?", "body": "<p>You are violating the rule of 3 (5 since c++11). It means that since you defined the destructor you should define the copy/move constructor/operation.</p>\n\n<p>With your implementation, the copy/move constructor/operation are wrong. When you copy your object, it will do a shallow copy of your pointer and will delete it therefore you will have a double delete. When you move it, you will delete a pointer you didn't allocated.</p>\n\n<p>Bonus point: your inline is useless</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "edited": false, "score": 0, "creation_date": 1510754459, "post_id": 47309174, "comment_id": 81568996, "body": "If i will add copy constructor and change code like these: <code>int *p= new int(3); test a(p); delete p;</code> Is it okay ?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "edited": false, "score": 0, "creation_date": 1510754553, "post_id": 47309174, "comment_id": 81569063, "body": "@LukaMamulaishvili copy constructor <i>and</i> assignment operator (rule of 3). Both with move semantics, too, to fit the rule of five. Apart from that, you are right..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "edited": false, "score": 0, "creation_date": 1510754664, "post_id": 47309174, "comment_id": 81569135, "body": "@LukaMamulaishvili By the way, for the temporary array, you <i>can</i> go another way, too: allocate it on the stack: <code>int p[] = { 3 }; test a(p);</code> (sure, not always appropriate, but if, ...)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "edited": false, "score": 0, "creation_date": 1510755010, "post_id": 47309174, "comment_id": 81569392, "body": "@LukaMamulaishvili it is okeish, but this code is error prone and more important it is unreadable. It would be totally unclear for a reader why you need to allocate it, pass to ctor and then immediately destroy it."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1510755038, "post_id": 47309174, "comment_id": 81569416, "body": "@Aconcagua you do not need to create an array, just pass pointer to an <code>int</code> variable."}, {"owner": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "edited": false, "score": 0, "creation_date": 1510755168, "post_id": 47309174, "comment_id": 81569493, "body": "So is it better to create object in main and delete it ? Without pointers inside class?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1510755284, "post_id": 47309174, "comment_id": 81569559, "body": "@Slava Totally clear... Just as you <i>asumed</i> that the class is designed to take ownership of the array, I assumed the array is needed by design (in a different szenario with more than one value) and the code here is just an example..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "edited": false, "score": 0, "creation_date": 1510755363, "post_id": 47309174, "comment_id": 81569611, "body": "@LukaMamulaishvili Sometimes yes, sometimes no. It depends on the use case, software requirements, ..."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 4, "last_activity_date": 1510754170, "last_edit_date": 1510754170, "creation_date": 1510753840, "answer_id": 47309174, "question_id": 47308928, "link": "https://stackoverflow.com/questions/47308928/i-want-to-know-is-it-okay-if-i-will-use-following-method-of-memory-allocation/47309174#47309174", "title": "I want to know is it okay if i will use following method of memory allocation?", "body": "<p>You have 2 issues in your code:</p>\n\n<ul>\n<li><p>your class violates <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of three/five/zero</a></p></li>\n<li><p>you are leaking memory when create <code>a</code></p></li>\n</ul>\n\n<p>In this code:</p>\n\n<pre><code>test a(new int(3));\n</code></pre>\n\n<p>you dynamically allocate <code>int</code> with value 3 and pass to <code>a</code> ctor which uses value and creates it's own dynamically allocated <code>int</code>. After that this memory is leaked. If you want to pass dynamically allocated data to a class use a smart  pointer:</p>\n\n<pre><code>class test {\n    std::unique_ptr&lt;int&gt; x;\npublic:\n    test(std::unique_ptr&lt;int&gt; n) : x( std::move( n ) ) {  }\n    int get() const { return *x; }\n};\n\nint main()\n{\n    x a( std::make_unique&lt;int&gt;( 3 ) ); // since c++14\n    x a( std::unique_ptr&lt;int&gt;( new int(3) ) ); // before c++14\n    ...\n}\n</code></pre>\n\n<p>and you do not need to implement dtor explicitly, you do not violate the rule and it is safe to pass dynamically allocated data to ctor.</p>\n\n<p>Note: I assumed you used <code>int</code> as example and you would understand that dynamically allocate one <code>int</code> is useless, you should just store it by value.</p>\n"}], "owner": {"reputation": 23, "user_id": 8555782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c6847774c0dc7af57962f99a9cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Mamulaishvili", "link": "https://stackoverflow.com/users/8555782/luka-mamulaishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47309174, "answer_count": 2, "score": -1, "last_activity_date": 1510754170, "creation_date": 1510753217, "last_edit_date": 1510753272, "question_id": 47308928, "link": "https://stackoverflow.com/questions/47308928/i-want-to-know-is-it-okay-if-i-will-use-following-method-of-memory-allocation", "title": "I want to know is it okay if i will use following method of memory allocation?", "body": "<p>I want to know is it okay if i will use following method? There is no syntax errors and any warnings but i want to know is there any memory problems?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass test {\n    int* x;\npublic:\n    test(int *n) { this-&gt;x = new int(*n); }\n    inline int get() { return *x; }\n    ~test() { delete x; }\n};\n\nint main(void) {\nwhile(1){\n    test a(new int(3));\n    cout &lt;&lt; a.get() &lt;&lt; endl;\n}\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "synchronization", "posix"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510752148, "post_id": 47308494, "comment_id": 81567336, "body": "Use std::thread in C++."}], "answers": [{"tags": [], "owner": {"reputation": 12730, "user_id": 264338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/97936fd8ef03399c3adb1d678d19270f?s=128&d=identicon&r=PG", "display_name": "mkaes", "link": "https://stackoverflow.com/users/264338/mkaes"}, "is_accepted": false, "score": 0, "last_activity_date": 1510753229, "creation_date": 1510753229, "answer_id": 47308931, "question_id": 47308494, "link": "https://stackoverflow.com/questions/47308494/is-there-a-data-race-if-pthread-cond-signal-is-the-last-call-in-a-thread/47308931#47308931", "title": "Is there a data race if pthread_cond_signal is the last call in a thread?", "body": "<p>It is totally legal to call <code>pthread_cond_signal</code> as the last call.\nAnd it is also not needed to hold a mutex for the the <code>pthread_cond_signal</code>.<br>\nBut in your case if you do not do this it is possible that you create a data race. This is illegal.<br>\nIn your case it is possible that when your thread unlocks the mutex your main thread starts to run and destroys the condition. This is your data race.</p>\n\n<p>So you have two possibilities.<br>\nEither you hold the mutex when calling <code>pthread_cond_signal</code> so that your main thread cannot access the condition before it is used.<br>\nOr you can first join your thread and then destroy the condition. Both will work.</p>\n\n<p>But in general i recommend to stick to <code>std::thread</code>, <code>std::mutex</code> and <code>std::condition_variable</code></p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1510753237, "creation_date": 1510753237, "answer_id": 47308933, "question_id": 47308494, "link": "https://stackoverflow.com/questions/47308494/is-there-a-data-race-if-pthread-cond-signal-is-the-last-call-in-a-thread/47308933#47308933", "title": "Is there a data race if pthread_cond_signal is the last call in a thread?", "body": "<blockquote>\n  <p>Is it documented anywhere that calling pthread_cond_signal as the last call that references a pthread_cond_t, and destroying it from the thread that does pthread_cond_wait is not legal ?</p>\n</blockquote>\n\n<p>They cannot cover all corner cases in documentation. Yes it is legal to call <code>pthread_cond_signal()</code> after mutex unlocked, it is not legal to destroy it at the same time as <code>pthread_cond_signal()</code> can be called.</p>\n"}, {"tags": [], "owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "is_accepted": false, "score": 1, "last_activity_date": 1510760575, "creation_date": 1510760575, "answer_id": 47311584, "question_id": 47308494, "link": "https://stackoverflow.com/questions/47308494/is-there-a-data-race-if-pthread-cond-signal-is-the-last-call-in-a-thread/47311584#47311584", "title": "Is there a data race if pthread_cond_signal is the last call in a thread?", "body": "<p>It is a bad idea to destroy the condition variable and the mutex before joining the thread that may still use it. Consider this scenario: </p>\n\n<ol>\n<li>Main creates the thread and is interrupted.</li>\n<li><code>func()</code> runs until the <code>pthread_mutex_unlock</code>, but is interrupted before it signals.</li>\n<li><code>main</code> continues, <code>done</code> is true, so it never waits, unlocks the mutex and destroys the condition variable, then waits for the thread to exit.</li>\n<li><code>func()</code> calls <code>pthread_cond_signal</code> on the destroyed condition variable - probably a bad idea.</li>\n</ol>\n\n<p>Fix:</p>\n\n<p>Move the join before the two \"destroys\".</p>\n\n<p>In your example I think holding the mutex longer would prevent this, but I think it is not a sustainable approach for larger software.</p>\n\n<p>I would not recommend to destroy any synchronization objects (mutex, condition, etc.) before it is absolutely obvious, that all threads that are supposed to use them are joined or are guaranteed by other explicit synchronization to never access the synchronization objects again.</p>\n"}], "owner": {"reputation": 451, "user_id": 1660121, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/559d96d22fbbf916f435cb4eb0d63dd7?s=128&d=identicon&r=PG", "display_name": "patraulea", "link": "https://stackoverflow.com/users/1660121/patraulea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 47308933, "answer_count": 3, "score": 1, "last_activity_date": 1510910858, "creation_date": 1510752071, "last_edit_date": 1510910858, "question_id": 47308494, "link": "https://stackoverflow.com/questions/47308494/is-there-a-data-race-if-pthread-cond-signal-is-the-last-call-in-a-thread", "title": "Is there a data race if pthread_cond_signal is the last call in a thread?", "body": "<p>Compiling this with <code>-fsanitize=thread</code> yields a data race report between <code>pthread_cond_signal</code> and <code>pthread_cond_destroy</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;err.h&gt;\n\nbool done = false;\n\npthread_mutex_t mutex;\npthread_cond_t cond;\n\nvoid *func(void *)\n{   \n    pthread_mutex_lock(&amp;mutex);\n\n    done = true;\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_cond_signal(&amp;cond);\n\n    return NULL;\n}\n\nint main()\n{\n    pthread_t thread;\n\n    pthread_cond_init(&amp;cond, NULL);\n    pthread_mutex_init(&amp;mutex, NULL);\n\n    if (pthread_create(&amp;thread, NULL, func, NULL) != 0)\n        err(1, \"pthread_create()\");\n\n    pthread_mutex_lock(&amp;mutex);\n\n    while (!done)\n        pthread_cond_wait(&amp;cond, &amp;mutex);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_cond_destroy(&amp;cond);\n    pthread_mutex_destroy(&amp;mutex);\n\n    pthread_join(thread, NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>The report goes away if I call <code>pthread_mutex_unlock</code> after <code>pthread_cond_signal</code>. But the manual says <code>pthread_cond_signal</code> doesn't need the mutex to be taken. Is it documented anywhere that calling <code>pthread_cond_signal</code> as the last call that references a <code>pthread_cond_t</code>, and destroying it from the thread that does <code>pthread_cond_wait</code> is not legal ?</p>\n"}, {"tags": ["c++", "linux", "signals"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1510752915, "post_id": 47308463, "comment_id": 81567926, "body": "You are not allowed to do much in a signal handler, <a href=\"http://en.cppreference.com/w/cpp/utility/program/signal\" rel=\"nofollow noreferrer\">there are strict limitations</a> including not allowed to call library functions. So <code>printf</code> would be ruled out."}, {"owner": {"reputation": 13, "user_id": 8100525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a21986b1645134c19129e350e20d4b81?s=128&d=identicon&r=PG&f=1", "display_name": "jay k", "link": "https://stackoverflow.com/users/8100525/jay-k"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1510758161, "post_id": 47308463, "comment_id": 81571863, "body": "@BoPersson Yeah, I know well your talking about. exactly, there are very strict for inside of handler. but the important point in my question is not about that. that problem can be overcame with using a combination of pthread and sigwait with shifting the flow to outside of strict area. however i couldn&#39;t get any understanding about implementing a SIG_IGN or SIG_DFL within my own handler. that&#39;s a my really want."}], "owner": {"reputation": 13, "user_id": 8100525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a21986b1645134c19129e350e20d4b81?s=128&d=identicon&r=PG&f=1", "display_name": "jay k", "link": "https://stackoverflow.com/users/8100525/jay-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 486, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1510751981, "creation_date": 1510751981, "question_id": 47308463, "link": "https://stackoverflow.com/questions/47308463/how-can-i-implement-sig-ign-or-sig-dfl-programmactically-in-c-c", "title": "How can I implement SIG_IGN or SIG_DFL programmactically in C/C++?", "body": "<p>I want to encapsulate the signal handling mechanism into C++ class like WndProc's message dispatching to children's window(s).</p>\n\n<pre><code>class SignalHost : public IRefCount {\nprivate:\n    SignalHost() { ... (init) ... }\n    ~SignalHost() { ... (restore all signals) ... }\n\npublic:\n    static SignalHost* getSingleton() {\n        static SignalHost _instance;\n        return &amp;_instance;\n    }\n\npublic:\n    bool attach(SignalHandler* handler, int signum) { \n        ... (create a list for signal or push newbie) ...\n    }\n    bool detach(SignalHandler* handler, int signum) { \n        ... (remove the handler from list) ...\n    }\n\npublic: /* when the signal occured, \n    this will invoke all of attached handlers for that signal. */\n};\n</code></pre>\n\n<p>unfortunately, some handler requires special action such as SIG_IGN, SIG_DFL or SIG_ERR. for example, <code>nohup</code> uses SIG_IGN for ignoring SIGHUP.\nand many cases can be occurred against the <code>SignalHost</code>.</p>\n\n<ol>\n<li>Signal Handler A executed against SIGSEGV: \nthis will perform <code>printf(\"SIGSEGV!\\n\");</code>only.</li>\n<li>Signal Handler B executed against SIGSEGV\nthis want to bypass the flow into SIG_DFL or handle it like SIG_DFL.</li>\n</ol>\n\n<p>in linux system, the defined signal handlers are just a dummy reference like <code>#define SIG_DFL ((sighandler_t) 0)</code>. i already know mechanisms about using directly with SIG_IGN, SIG_DFL or SIG_ERR. but if the signal handlers must be organized within some class and executed as series?</p>\n\n<p>please look at the code below which express my question more detail without OOP concepts.</p>\n\n<pre><code>void my_sigsegv_handler (int signo);\n\n...\n\nstruct sigaction sa_sigsegv;\nsa_sigsegv.sa_handler = my_sigsegv_handler;\nsa_sigsegv.sa_flags = 0;\n\nsigaction(SIGSEGV, &amp;sa_sigsegv, 0);\n\n...\n\nvoid my_sigsegv_handler (int signo) {\n    ... (handle SIGSEGV as my wish which must be executed) ...\n\n    // unfortunately, my code can not handle it correctly...\n    // so, I want to perform printing errors into stdin without \n    //    returning back into the flow which has caused errors.\n\n    exit(-1);\n}\n</code></pre>\n\n<p>Of course, specifying SIG_IGN into SIGSEGV will not be working as my want.\njust, this code is an example for explaining i want to do.</p>\n\n<p><strong>Question which i really want to know is,</strong> How can I implement the handler which can work like SIG_DFL, SIG_IGN or SIG_ERR after above handler's code??</p>\n"}, {"tags": ["c++", "c++11", "token"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 6, "creation_date": 1510751166, "post_id": 47308141, "comment_id": 81566644, "body": "What exactly are you confused about? Tokens are just the &quot;words&quot; (and punctuation marks) that a compiler understands. As opposed to, for example, dealing with everything letter-by-letter all the way through the compilation process."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1510751692, "post_id": 47308141, "comment_id": 81567001, "body": "They are not needed in C++ programming."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1510752461, "post_id": 47308403, "comment_id": 81567575, "body": "@Bathsheba - Thanks :) I&#39;d promise to not tempt you anymore, but I&#39;m afraid SO is too addicting (and yes, upon reading it I realized this comment is quite short on modesty)."}, {"owner": {"reputation": 418, "user_id": 5832798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aphMx.jpg?s=128&g=1", "display_name": "farhan", "link": "https://stackoverflow.com/users/5832798/farhan"}, "edited": false, "score": 1, "creation_date": 1510761663, "post_id": 47308403, "comment_id": 81574682, "body": "@StoryTeller very thorough explanation."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 7, "last_activity_date": 1510762529, "last_edit_date": 1510762529, "creation_date": 1510751784, "answer_id": 47308403, "question_id": 47308141, "link": "https://stackoverflow.com/questions/47308141/what-does-tokens-do-and-why-they-need-to-be-created-in-c-programming/47308403#47308403", "title": "What does Tokens do and why they need to be created in C++ programming?", "body": "<p>Tokenizing is important to the process of figuring out what a program does. What Bjarne is referring to in relation to C++ source deals with how a programs meaning is affected by the tokenization rules. In particular, we must know what the tokens are, and how they are determined. Specifically, how can we identify a single token when it appears next to other characters, and how should we delimit tokens if there is ambiguity.</p>\n\n<p>For instance, consider the prefix operators <code>++</code> and <code>+</code>. Let's assume we only had one token <code>+</code> to work with. What is the meaning of the following snippet?</p>\n\n<pre><code>int i = 1;\n++i;\n</code></pre>\n\n<p>With <code>+</code> only, is the above going to just apply unary <code>+</code> on <code>i</code> twice? Or is it going to increment it once? It's ambiguous, naturally. We need an additional token, and therefore introduce <code>++</code> as it's own \"word\" in the language.</p>\n\n<p>But now there is another (albeit smaller) problem. What if the programmer <em>wants</em> to just apply unary <code>+</code> twice, and not increment? Token processing rules are needed. So if we determine that a white space is always a separator for tokens, our programmer may write:</p>\n\n<pre><code>int i = 1;\n+ +i;\n</code></pre>\n\n<p>Roughly speaking, a C++ implementation starts with a file full of characters, transforms them initially to a sequence of tokens (\"words\" with meaning in the C++ language), and then checks if the tokens appear in a \"sentence\" that has some valid meaning.</p>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1510752706, "post_id": 47308421, "comment_id": 81567757, "body": "<i>&quot;unless you are writing a parser it is unlikely you will ever use the concept&quot;</i> - Except if she ever needs to deal with nasty preprocessor reliant code, and its oddities due operating on <i>tokens</i>."}], "tags": [], "owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "is_accepted": false, "score": 5, "last_activity_date": 1510752170, "last_edit_date": 1510752170, "creation_date": 1510751852, "answer_id": 47308421, "question_id": 47308141, "link": "https://stackoverflow.com/questions/47308141/what-does-tokens-do-and-why-they-need-to-be-created-in-c-programming/47308421#47308421", "title": "What does Tokens do and why they need to be created in C++ programming?", "body": "<p>He's refering to <a href=\"https://en.wikipedia.org/wiki/Lexical_analysis\" rel=\"nofollow noreferrer\">the lexical analysis</a> - the necessary piece of every compiler. It is a tool for the compiler to treat a text (as in: a sequence of bytes) in a meaningful way. For example consider the following line in C++</p>\n\n<pre><code>double x  = (15*3.0);  // my variable\n</code></pre>\n\n<p>when the compiler looks at the text it first splits the line into a sequence of tokens which may look like this:</p>\n\n<pre><code>Token {\"identifier\", \"double\"}\nToken {\"space\", \" \"}\nToken {\"identifier\", \"x\"}\nToken {\"space\", \"  \"}\nToken {\"operator\", \"=\"}\nToken {\"space\", \" \"}\nToken {\"separator\", \"(\"}\nToken {\"literal_integer\", \"15\"}\nToken {\"operator\", \"*\"}\nToken {\"literal_float\", \"3.0\"}\nToken {\"separator\", \")\"}\nToken {\"separator\", \";\"}\nToken {\"space\", \"  \"}\nToken {\"comment\", \"// my variable\"}\nToken {\"end_of_line\"}\n</code></pre>\n\n<p>It doesn't have to be interpreted like above (note that in my case both <code>kind</code> and <code>value</code> are strings), its just an example how it can be done. You usually do this via some regular expressions.</p>\n\n<p>Anyway tokens are easier to understand for the machine then a raw text. Next step for the compiler is to create so called <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow noreferrer\">abstract syntax tree</a> based on the tokenization and finally add meaning to everything.</p>\n\n<p>Also note that unless you are writing a <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parser</a> it is unlikely you will ever use the concept.</p>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 2306243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3882aa29a4ee80fec66b8c77089a4f6a?s=128&d=identicon&r=PG", "display_name": "SCCC", "link": "https://stackoverflow.com/users/2306243/sccc"}, "is_accepted": false, "score": -1, "last_activity_date": 1510751989, "creation_date": 1510751989, "answer_id": 47308469, "question_id": 47308141, "link": "https://stackoverflow.com/questions/47308141/what-does-tokens-do-and-why-they-need-to-be-created-in-c-programming/47308469#47308469", "title": "What does Tokens do and why they need to be created in C++ programming?", "body": "<p>Broadly speaking, a compiler will run multiple operations on a given source code, before converting it into a binary format. One of the first stages is running a tokenizer, where the contents of a source file are converted to Tokens, which are units understood by the compiler. For example, if you write a statement<code>int a</code>, the tokenizer might create a structure to store this information.</p>\n\n<pre><code>Type: integer\nIdentifier: A\nReserved Word: No\nLine number: 10\n</code></pre>\n\n<p>This would be then referred to as a token, and most of the code in a source file will be broken down into similar structures.</p>\n"}, {"tags": [], "owner": {"reputation": 418, "user_id": 5832798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aphMx.jpg?s=128&g=1", "display_name": "farhan", "link": "https://stackoverflow.com/users/5832798/farhan"}, "is_accepted": true, "score": 3, "last_activity_date": 1510762579, "last_edit_date": 1510762579, "creation_date": 1510761499, "answer_id": 47311938, "question_id": 47308141, "link": "https://stackoverflow.com/questions/47308141/what-does-tokens-do-and-why-they-need-to-be-created-in-c-programming/47311938#47311938", "title": "What does Tokens do and why they need to be created in C++ programming?", "body": "<p>As mentioned by others Bjrane is referring to Lexical analysis.</p>\n\n<p>In general terms tokenizing || creating tokens, is a process of processing input streams and dividing them into blocks, without worrying about whitespaces etc. best described earlier by @StoryTeller.\n \"or as bjrane said: is a sequence of characters that represent something we consider a unit\".</p>\n\n<p>The token itself is an example of a C++ user-defined type'UDT' like int or char, so token can be used to define variables and hold values. </p>\n\n<p>UDT can have member functions as well as data members. In your code you define two member functions which is very basic.</p>\n\n<p>1)Kind, 2)Value </p>\n\n<pre><code>class Token {\npublic:\n   char kind;\n   double value;\n};\n</code></pre>\n\n<p>Based on it we can initialize or construct its objects.</p>\n\n<pre><code>Token token_kind_one{'+'};\n</code></pre>\n\n<p>Initializing token_kind_one with its kind(operator) '+'.</p>\n\n<pre><code>Token token_kind_two{'8',3.14};\n</code></pre>\n\n<p>and token_kind_two with its kind(integer/number) '8' and with a value of 3.14.</p>\n\n<p>Lets assume we have an expression of ten characters 1+2*3(5/4), which translates to ten tokens.</p>\n\n<p>Tokens:</p>\n\n<pre><code>        |----------------------|---------------------|\nKind    |'8' |'+' |'8' |'*'|'8'|'('|'8' |'/'|'8' |')'|\n        |----------------------|---------------------|\nValue   | 1  |    | 2  |   | 3 |   | 5  |   | 4  |   |\n        |----------------------|---------------------|\n</code></pre>\n\n<p>C++ compiler transfer file data to a token sequence skipping all whitespaces. To make it understandable to itself.</p>\n"}], "owner": {"reputation": 71, "user_id": 8932462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9gU99.jpg?s=128&g=1", "display_name": "elizabeth", "link": "https://stackoverflow.com/users/8932462/elizabeth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1560, "favorite_count": 0, "accepted_answer_id": 47311938, "answer_count": 4, "score": 6, "last_activity_date": 1510762579, "creation_date": 1510750989, "last_edit_date": 1510751746, "question_id": 47308141, "link": "https://stackoverflow.com/questions/47308141/what-does-tokens-do-and-why-they-need-to-be-created-in-c-programming", "title": "What does Tokens do and why they need to be created in C++ programming?", "body": "<p>I am reading a book (Programming Principles and Practice by Bjarne Stroustrup).</p>\n\n<p>In which he introduce Tokens:</p>\n\n<p>\u201cA token is a sequence of characters that represents something we consider a unit, such as a number or an operator. That\u2019s the way a C++ compiler deals with its source. Actually, \u201ctokenizing\u201d in some form or another is the way most analysis of text starts.\u201d</p>\n\n<pre><code>class Token {\npublic:\n    char kind;\n    double value;\n};\n</code></pre>\n\n<p>I do get what they are but he never explains this in detail and its quite confusing to me. </p>\n"}]